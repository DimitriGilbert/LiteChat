var D$=Object.defineProperty;var M$=(e,t,n)=>t in e?D$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ua=(e,t,n)=>M$(e,typeof t!="symbol"?t+"":t,n);function P$(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var N_={exports:{}},$p={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g3;function F$(){if(g3)return $p;g3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return $p.Fragment=t,$p.jsx=n,$p.jsxs=n,$p}var y3;function L$(){return y3||(y3=1,N_.exports=F$()),N_.exports}var y=L$(),I_={exports:{}};function $$(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V4={exports:{}},ea=V4.exports={},bs,vs;function US(){throw new Error("setTimeout has not been defined")}function qS(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?bs=setTimeout:bs=US}catch{bs=US}try{typeof clearTimeout=="function"?vs=clearTimeout:vs=qS}catch{vs=qS}})();function G4(e){if(bs===setTimeout)return setTimeout(e,0);if((bs===US||!bs)&&setTimeout)return bs=setTimeout,setTimeout(e,0);try{return bs(e,0)}catch{try{return bs.call(null,e,0)}catch{return bs.call(this,e,0)}}}function B$(e){if(vs===clearTimeout)return clearTimeout(e);if((vs===qS||!vs)&&clearTimeout)return vs=clearTimeout,clearTimeout(e);try{return vs(e)}catch{try{return vs.call(null,e)}catch{return vs.call(this,e)}}}var wl=[],If=!1,Hc,Gy=-1;function z$(){!If||!Hc||(If=!1,Hc.length?wl=Hc.concat(wl):Gy=-1,wl.length&&W4())}function W4(){if(!If){var e=G4(z$);If=!0;for(var t=wl.length;t;){for(Hc=wl,wl=[];++Gy<t;)Hc&&Hc[Gy].run();Gy=-1,t=wl.length}Hc=null,If=!1,B$(e)}}ea.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];wl.push(new K4(e,t)),wl.length===1&&!If&&G4(W4)};function K4(e,t){this.fun=e,this.array=t}K4.prototype.run=function(){this.fun.apply(null,this.array)};ea.title="browser";ea.browser=!0;ea.env={};ea.argv=[];ea.version="";ea.versions={};function Ml(){}ea.on=Ml;ea.addListener=Ml;ea.once=Ml;ea.off=Ml;ea.removeListener=Ml;ea.removeAllListeners=Ml;ea.emit=Ml;ea.prependListener=Ml;ea.prependOnceListener=Ml;ea.listeners=function(e){return[]};ea.binding=function(e){throw new Error("process.binding is not supported")};ea.cwd=function(){return"/"};ea.chdir=function(e){throw new Error("process.chdir is not supported")};ea.umask=function(){return 0};var U$=V4.exports;const Vr=$$(U$);var Dn={},b3;function q$(){if(b3)return Dn;b3=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,w={};function _(G,X,ae){this.props=G,this.context=X,this.refs=w,this.updater=ae||g}_.prototype.isReactComponent={},_.prototype.setState=function(G,X){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,X,"setState")},_.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(G,X,ae){this.props=G,this.context=X,this.refs=w,this.updater=ae||g}var E=S.prototype=new x;E.constructor=S,v(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function j(G,X,ae,be,we,fe){return ae=fe.ref,{$$typeof:e,type:G,key:X,ref:ae!==void 0?ae:null,props:fe}}function N(G,X){return j(G.type,X,void 0,void 0,void 0,G.props)}function U(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function V(G){var X={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(ae){return X[ae]})}var J=/\/+/g;function P(G,X){return typeof G=="object"&&G!==null&&G.key!=null?V(""+G.key):X.toString(36)}function Z(){}function F(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Z,Z):(G.status="pending",G.then(function(X){G.status==="pending"&&(G.status="fulfilled",G.value=X)},function(X){G.status==="pending"&&(G.status="rejected",G.reason=X)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function ue(G,X,ae,be,we){var fe=typeof G;(fe==="undefined"||fe==="boolean")&&(G=null);var Me=!1;if(G===null)Me=!0;else switch(fe){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(G.$$typeof){case e:case t:Me=!0;break;case f:return Me=G._init,ue(Me(G._payload),X,ae,be,we)}}if(Me)return we=we(G),Me=be===""?"."+P(G,0):be,C(we)?(ae="",Me!=null&&(ae=Me.replace(J,"$&/")+"/"),ue(we,X,ae,"",function(Ae){return Ae})):we!=null&&(U(we)&&(we=N(we,ae+(we.key==null||G&&G.key===we.key?"":(""+we.key).replace(J,"$&/")+"/")+Me)),X.push(we)),1;Me=0;var Pe=be===""?".":be+":";if(C(G))for(var Oe=0;Oe<G.length;Oe++)be=G[Oe],fe=Pe+P(be,Oe),Me+=ue(be,X,ae,fe,we);else if(Oe=m(G),typeof Oe=="function")for(G=Oe.call(G),Oe=0;!(be=G.next()).done;)be=be.value,fe=Pe+P(be,Oe++),Me+=ue(be,X,ae,fe,we);else if(fe==="object"){if(typeof G.then=="function")return ue(F(G),X,ae,be,we);throw X=String(G),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Me}function le(G,X,ae){if(G==null)return G;var be=[],we=0;return ue(G,be,"","",function(fe){return X.call(ae,fe,we++)}),be}function ne(G){if(G._status===-1){var X=G._result;X=X(),X.then(function(ae){(G._status===0||G._status===-1)&&(G._status=1,G._result=ae)},function(ae){(G._status===0||G._status===-1)&&(G._status=2,G._result=ae)}),G._status===-1&&(G._status=0,G._result=X)}if(G._status===1)return G._result.default;throw G._result}var Q=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(X))return}else if(typeof Vr=="object"&&typeof Vr.emit=="function"){Vr.emit("uncaughtException",G);return}console.error(G)};function te(){}return Dn.Children={map:le,forEach:function(G,X,ae){le(G,function(){X.apply(this,arguments)},ae)},count:function(G){var X=0;return le(G,function(){X++}),X},toArray:function(G){return le(G,function(X){return X})||[]},only:function(G){if(!U(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Dn.Component=_,Dn.Fragment=n,Dn.Profiler=a,Dn.PureComponent=S,Dn.StrictMode=r,Dn.Suspense=u,Dn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Dn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return A.H.useMemoCache(G)}},Dn.cache=function(G){return function(){return G.apply(null,arguments)}},Dn.cloneElement=function(G,X,ae){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var be=v({},G.props),we=G.key,fe=void 0;if(X!=null)for(Me in X.ref!==void 0&&(fe=void 0),X.key!==void 0&&(we=""+X.key),X)!O.call(X,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&X.ref===void 0||(be[Me]=X[Me]);var Me=arguments.length-2;if(Me===1)be.children=ae;else if(1<Me){for(var Pe=Array(Me),Oe=0;Oe<Me;Oe++)Pe[Oe]=arguments[Oe+2];be.children=Pe}return j(G.type,we,void 0,void 0,fe,be)},Dn.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:i,_context:G},G},Dn.createElement=function(G,X,ae){var be,we={},fe=null;if(X!=null)for(be in X.key!==void 0&&(fe=""+X.key),X)O.call(X,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(we[be]=X[be]);var Me=arguments.length-2;if(Me===1)we.children=ae;else if(1<Me){for(var Pe=Array(Me),Oe=0;Oe<Me;Oe++)Pe[Oe]=arguments[Oe+2];we.children=Pe}if(G&&G.defaultProps)for(be in Me=G.defaultProps,Me)we[be]===void 0&&(we[be]=Me[be]);return j(G,fe,void 0,void 0,null,we)},Dn.createRef=function(){return{current:null}},Dn.forwardRef=function(G){return{$$typeof:s,render:G}},Dn.isValidElement=U,Dn.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:ne}},Dn.memo=function(G,X){return{$$typeof:c,type:G,compare:X===void 0?null:X}},Dn.startTransition=function(G){var X=A.T,ae={};A.T=ae;try{var be=G(),we=A.S;we!==null&&we(ae,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(te,Q)}catch(fe){Q(fe)}finally{A.T=X}},Dn.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Dn.use=function(G){return A.H.use(G)},Dn.useActionState=function(G,X,ae){return A.H.useActionState(G,X,ae)},Dn.useCallback=function(G,X){return A.H.useCallback(G,X)},Dn.useContext=function(G){return A.H.useContext(G)},Dn.useDebugValue=function(){},Dn.useDeferredValue=function(G,X){return A.H.useDeferredValue(G,X)},Dn.useEffect=function(G,X,ae){var be=A.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return be.useEffect(G,X)},Dn.useId=function(){return A.H.useId()},Dn.useImperativeHandle=function(G,X,ae){return A.H.useImperativeHandle(G,X,ae)},Dn.useInsertionEffect=function(G,X){return A.H.useInsertionEffect(G,X)},Dn.useLayoutEffect=function(G,X){return A.H.useLayoutEffect(G,X)},Dn.useMemo=function(G,X){return A.H.useMemo(G,X)},Dn.useOptimistic=function(G,X){return A.H.useOptimistic(G,X)},Dn.useReducer=function(G,X,ae){return A.H.useReducer(G,X,ae)},Dn.useRef=function(G){return A.H.useRef(G)},Dn.useState=function(G){return A.H.useState(G)},Dn.useSyncExternalStore=function(G,X,ae){return A.H.useSyncExternalStore(G,X,ae)},Dn.useTransition=function(){return A.H.useTransition()},Dn.version="19.1.0",Dn}var v3;function oE(){return v3||(v3=1,I_.exports=q$()),I_.exports}var B=oE();const wt=Qa(B),Z4=P$({__proto__:null,default:wt},[B]);var O_={exports:{}},Bp={},j_={exports:{}},D_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w3;function H$(){return w3||(w3=1,function(e){function t(le,ne){var Q=le.length;le.push(ne);e:for(;0<Q;){var te=Q-1>>>1,G=le[te];if(0<a(G,ne))le[te]=ne,le[Q]=G,Q=te;else break e}}function n(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var ne=le[0],Q=le.pop();if(Q!==ne){le[0]=Q;e:for(var te=0,G=le.length,X=G>>>1;te<X;){var ae=2*(te+1)-1,be=le[ae],we=ae+1,fe=le[we];if(0>a(be,Q))we<G&&0>a(fe,be)?(le[te]=fe,le[we]=Q,te=we):(le[te]=be,le[ae]=Q,te=ae);else if(we<G&&0>a(fe,Q))le[te]=fe,le[we]=Q,te=we;else break e}}return ne}function a(le,ne){var Q=le.sortIndex-ne.sortIndex;return Q!==0?Q:le.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],c=[],f=1,h=null,m=3,g=!1,v=!1,w=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(le){for(var ne=n(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=le)r(c),ne.sortIndex=ne.expirationTime,t(u,ne);else break;ne=n(c)}}function A(le){if(w=!1,C(le),!v)if(n(u)!==null)v=!0,O||(O=!0,P());else{var ne=n(c);ne!==null&&ue(A,ne.startTime-le)}}var O=!1,j=-1,N=5,U=-1;function V(){return _?!0:!(e.unstable_now()-U<N)}function J(){if(_=!1,O){var le=e.unstable_now();U=le;var ne=!0;try{e:{v=!1,w&&(w=!1,S(j),j=-1),g=!0;var Q=m;try{t:{for(C(le),h=n(u);h!==null&&!(h.expirationTime>le&&V());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var G=te(h.expirationTime<=le);if(le=e.unstable_now(),typeof G=="function"){h.callback=G,C(le),ne=!0;break t}h===n(u)&&r(u),C(le)}else r(u);h=n(u)}if(h!==null)ne=!0;else{var X=n(c);X!==null&&ue(A,X.startTime-le),ne=!1}}break e}finally{h=null,m=Q,g=!1}ne=void 0}}finally{ne?P():O=!1}}}var P;if(typeof E=="function")P=function(){E(J)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,F=Z.port2;Z.port1.onmessage=J,P=function(){F.postMessage(null)}}else P=function(){x(J,0)};function ue(le,ne){j=x(function(){le(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(le){le.callback=null},e.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<le?Math.floor(1e3/le):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(le){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var Q=m;m=ne;try{return le()}finally{m=Q}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(le,ne){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var Q=m;m=le;try{return ne()}finally{m=Q}},e.unstable_scheduleCallback=function(le,ne,Q){var te=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?te+Q:te):Q=te,le){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=Q+G,le={id:f++,callback:ne,priorityLevel:le,startTime:Q,expirationTime:G,sortIndex:-1},Q>te?(le.sortIndex=Q,t(c,le),n(u)===null&&le===n(c)&&(w?(S(j),j=-1):w=!0,ue(A,Q-te))):(le.sortIndex=G,t(u,le),v||g||(v=!0,O||(O=!0,P()))),le},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(le){var ne=m;return function(){var Q=m;m=ne;try{return le.apply(this,arguments)}finally{m=Q}}}}(D_)),D_}var _3;function V$(){return _3||(_3=1,j_.exports=H$()),j_.exports}var M_={exports:{}},qa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x3;function G$(){if(x3)return qa;x3=1;var e=oE();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return qa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,qa.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},qa.flushSync=function(u){var c=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=c,r.p=f,r.d.f()}},qa.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},qa.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},qa.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},qa.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=s(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},qa.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},qa.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=s(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},qa.requestFormReset=function(u){r.d.r(u)},qa.unstable_batchedUpdates=function(u,c){return u(c)},qa.useFormState=function(u,c,f){return o.H.useFormState(u,c,f)},qa.useFormStatus=function(){return o.H.useHostTransitionStatus()},qa.version="19.1.0",qa}var S3;function Y4(){if(S3)return M_.exports;S3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),M_.exports=G$(),M_.exports}var E3;function W$(){if(E3)return Bp;E3=1;var e=V$(),t=oE(),n=Y4();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(i(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,b=d;;){var T=p.return;if(T===null)break;var M=T.alternate;if(M===null){if(b=T.return,b!==null){p=b;continue}break}if(T.child===M.child){for(M=T.child;M;){if(M===p)return s(T),l;if(M===b)return s(T),d;M=M.sibling}throw Error(r(188))}if(p.return!==b.return)p=T,b=M;else{for(var re=!1,xe=T.child;xe;){if(xe===p){re=!0,p=T,b=M;break}if(xe===b){re=!0,b=T,p=M;break}xe=xe.sibling}if(!re){for(xe=M.child;xe;){if(xe===p){re=!0,p=M,b=T;break}if(xe===b){re=!0,b=M,p=T;break}xe=xe.sibling}if(!re)throw Error(r(189))}}if(p.alternate!==b)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),J=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:(l=J&&l[J]||l["@@iterator"],typeof l=="function"?l:null)}var Z=Symbol.for("react.client.reference");function F(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case _:return"Profiler";case w:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList";case U:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case E:return(l.displayName||"Context")+".Provider";case S:return(l._context.displayName||"Context")+".Consumer";case C:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case j:return d=l.displayName||null,d!==null?d:F(l.type)||"Memo";case N:d=l._payload,l=l._init;try{return F(l(d))}catch{}}return null}var ue=Array.isArray,le=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},te=[],G=-1;function X(l){return{current:l}}function ae(l){0>G||(l.current=te[G],te[G]=null,G--)}function be(l,d){G++,te[G]=l.current,l.current=d}var we=X(null),fe=X(null),Me=X(null),Pe=X(null);function Oe(l,d){switch(be(Me,d),be(fe,l),be(we,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?HT(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=HT(d),l=VT(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ae(we),be(we,l)}function Ae(){ae(we),ae(fe),ae(Me)}function $e(l){l.memoizedState!==null&&be(Pe,l);var d=we.current,p=VT(d,l.type);d!==p&&(be(fe,l),be(we,p))}function qe(l){fe.current===l&&(ae(we),ae(fe)),Pe.current===l&&(ae(Pe),Dp._currentValue=Q)}var Fe=Object.prototype.hasOwnProperty,Ne=e.unstable_scheduleCallback,$=e.unstable_cancelCallback,Se=e.unstable_shouldYield,ke=e.unstable_requestPaint,ce=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,Y=e.unstable_ImmediatePriority,_e=e.unstable_UserBlockingPriority,De=e.unstable_NormalPriority,Ee=e.unstable_LowPriority,Ze=e.unstable_IdlePriority,Et=e.log,at=e.unstable_setDisableYieldValue,_t=null,Nt=null;function Rt(l){if(typeof Et=="function"&&at(l),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(_t,l)}catch{}}var Kt=Math.clz32?Math.clz32:H,pe=Math.log,R=Math.LN2;function H(l){return l>>>=0,l===0?32:31-(pe(l)/R|0)|0}var de=256,Re=4194304;function ye(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ce(l,d,p){var b=l.pendingLanes;if(b===0)return 0;var T=0,M=l.suspendedLanes,re=l.pingedLanes;l=l.warmLanes;var xe=b&134217727;return xe!==0?(b=xe&~M,b!==0?T=ye(b):(re&=xe,re!==0?T=ye(re):p||(p=xe&~l,p!==0&&(T=ye(p))))):(xe=b&~M,xe!==0?T=ye(xe):re!==0?T=ye(re):p||(p=b&~l,p!==0&&(T=ye(p)))),T===0?0:d!==0&&d!==T&&(d&M)===0&&(M=T&-T,p=d&-d,M>=p||M===32&&(p&4194048)!==0)?d:T}function oe(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ft(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var l=de;return de<<=1,(de&4194048)===0&&(de=256),l}function D(){var l=Re;return Re<<=1,(Re&62914560)===0&&(Re=4194304),l}function Be(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function st(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function ge(l,d,p,b,T,M){var re=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var xe=l.entanglements,ze=l.expirationTimes,ut=l.hiddenUpdates;for(p=re&~p;0<p;){var St=31-Kt(p),At=1<<St;xe[St]=0,ze[St]=-1;var pt=ut[St];if(pt!==null)for(ut[St]=null,St=0;St<pt.length;St++){var mt=pt[St];mt!==null&&(mt.lane&=-536870913)}p&=~At}b!==0&&je(l,b,0),M!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=M&~(re&~d))}function je(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-Kt(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|p&4194090}function Je(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var b=31-Kt(p),T=1<<b;T&d|l[b]&d&&(l[b]|=d),p&=~T}}function It(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function me(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function q(){var l=ne.p;return l!==0?l:(l=window.event,l===void 0?32:c3(l.type))}function z(l,d){var p=ne.p;try{return ne.p=l,d()}finally{ne.p=p}}var W=Math.random().toString(36).slice(2),he="__reactFiber$"+W,Te="__reactProps$"+W,Ve="__reactContainer$"+W,gt="__reactEvents$"+W,Gt="__reactListeners$"+W,ht="__reactHandles$"+W,Ct="__reactResources$"+W,Ot="__reactMarker$"+W;function Zt(l){delete l[he],delete l[Te],delete l[gt],delete l[Gt],delete l[ht]}function En(l){var d=l[he];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Ve]||p[he]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=ZT(l);l!==null;){if(p=l[he])return p;l=ZT(l)}return d}l=p,p=l.parentNode}return null}function zn(l){if(l=l[he]||l[Ve]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function hr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function pr(l){var d=l[Ct];return d||(d=l[Ct]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Mn(l){l[Ot]=!0}var ti=new Set,Qo={};function es(l,d){ts(l,d),ts(l+"Capture",d)}function ts(l,d){for(Qo[l]=d,l=0;l<d.length;l++)ti.add(d[l])}var Lr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ns={},Xi={};function ng(l){return Fe.call(Xi,l)?!0:Fe.call(ns,l)?!1:Lr.test(l)?Xi[l]=!0:(ns[l]=!0,!1)}function xo(l,d,p){if(ng(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Bs(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Ii(l,d,p,b){if(b===null)l.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+b)}}var cc,rs;function zs(l){if(cc===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);cc=d&&d[1]||"",rs=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cc+l+rs}var $l=!1;function Cd(l,d){if(!l||$l)return"";$l=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var At=function(){throw Error()};if(Object.defineProperty(At.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(At,[])}catch(mt){var pt=mt}Reflect.construct(l,[],At)}else{try{At.call()}catch(mt){pt=mt}l.call(At.prototype)}}else{try{throw Error()}catch(mt){pt=mt}(At=l())&&typeof At.catch=="function"&&At.catch(function(){})}}catch(mt){if(mt&&pt&&typeof mt.stack=="string")return[mt.stack,pt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var M=b.DetermineComponentFrameRoot(),re=M[0],xe=M[1];if(re&&xe){var ze=re.split(`
`),ut=xe.split(`
`);for(T=b=0;b<ze.length&&!ze[b].includes("DetermineComponentFrameRoot");)b++;for(;T<ut.length&&!ut[T].includes("DetermineComponentFrameRoot");)T++;if(b===ze.length||T===ut.length)for(b=ze.length-1,T=ut.length-1;1<=b&&0<=T&&ze[b]!==ut[T];)T--;for(;1<=b&&0<=T;b--,T--)if(ze[b]!==ut[T]){if(b!==1||T!==1)do if(b--,T--,0>T||ze[b]!==ut[T]){var St=`
`+ze[b].replace(" at new "," at ");return l.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",l.displayName)),St}while(1<=b&&0<=T);break}}}finally{$l=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?zs(p):""}function Un(l){switch(l.tag){case 26:case 27:case 5:return zs(l.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 15:return Cd(l.type,!1);case 11:return Cd(l.type.render,!1);case 1:return Cd(l.type,!0);case 31:return zs("Activity");default:return""}}function Ph(l){try{var d="";do d+=Un(l),l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ni(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Fh(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function _r(l){var d=Fh(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var T=p.get,M=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(re){b=""+re,M.call(this,re)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return b},setValue:function(re){b=""+re},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function as(l){l._valueTracker||(l._valueTracker=_r(l))}function Bl(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),b="";return l&&(b=Fh(l)?l.checked?"true":"false":l.value),l=b,l!==p?(d.setValue(l),!0):!1}function So(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Lh=/[\n"\\]/g;function La(l){return l.replace(Lh,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function zl(l,d,p,b,T,M,re,xe){l.name="",re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"?l.type=re:l.removeAttribute("type"),d!=null?re==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ni(d)):l.value!==""+ni(d)&&(l.value=""+ni(d)):re!=="submit"&&re!=="reset"||l.removeAttribute("value"),d!=null?Ul(l,re,ni(d)):p!=null?Ul(l,re,ni(p)):b!=null&&l.removeAttribute("value"),T==null&&M!=null&&(l.defaultChecked=!!M),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?l.name=""+ni(xe):l.removeAttribute("name")}function $h(l,d,p,b,T,M,re,xe){if(M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(l.type=M),d!=null||p!=null){if(!(M!=="submit"&&M!=="reset"||d!=null))return;p=p!=null?""+ni(p):"",d=d!=null?""+ni(d):p,xe||d===l.value||(l.value=d),l.defaultValue=d}b=b??T,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=xe?l.checked:!!b,l.defaultChecked=!!b,re!=null&&typeof re!="function"&&typeof re!="symbol"&&typeof re!="boolean"&&(l.name=re)}function Ul(l,d,p){d==="number"&&So(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Us(l,d,p,b){if(l=l.options,d){d={};for(var T=0;T<p.length;T++)d["$"+p[T]]=!0;for(p=0;p<l.length;p++)T=d.hasOwnProperty("$"+l[p].value),l[p].selected!==T&&(l[p].selected=T),T&&b&&(l[p].defaultSelected=!0)}else{for(p=""+ni(p),d=null,T=0;T<l.length;T++){if(l[T].value===p){l[T].selected=!0,b&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function ql(l,d,p){if(d!=null&&(d=""+ni(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+ni(p):""}function Bh(l,d,p,b){if(d==null){if(b!=null){if(p!=null)throw Error(r(92));if(ue(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),d=p}p=ni(d),l.defaultValue=p,b=l.textContent,b===p&&b!==""&&b!==null&&(l.value=b)}function Hl(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var Vn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ad(l,d,p){var b=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,p):typeof p!="number"||p===0||Vn.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function rg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var b in p)!p.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var T in d)b=d[T],d.hasOwnProperty(T)&&p[T]!==b&&Ad(l,T,b)}else for(var M in d)d.hasOwnProperty(M)&&Ad(l,M,d[M])}function zh(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ri=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qs(l){return Vl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Ji=null;function Td(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Hs=null,Rr=null;function Oi(l){var d=zn(l);if(d&&(l=d.stateNode)){var p=l[Te]||null;e:switch(l=d.stateNode,d.type){case"input":if(zl(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+La(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var b=p[d];if(b!==l&&b.form===l.form){var T=b[Te]||null;if(!T)throw Error(r(90));zl(b,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<p.length;d++)b=p[d],b.form===l.form&&Bl(b)}break e;case"textarea":ql(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Us(l,!!p.multiple,d,!1)}}}var Vs=!1;function Gl(l,d,p){if(Vs)return l(d,p);Vs=!0;try{var b=l(d);return b}finally{if(Vs=!1,(Hs!==null||Rr!==null)&&(Vg(),Hs&&(d=Hs,l=Rr,Rr=Hs=null,Oi(d),l)))for(d=0;d<l.length;d++)Oi(l[d])}}function Gs(l,d){var p=l.stateNode;if(p===null)return null;var b=p[Te]||null;if(b===null)return null;p=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uh=!1;if(ga)try{var $a={};Object.defineProperty($a,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",$a,$a),window.removeEventListener("test",$a,$a)}catch{Uh=!1}var Qi=null,Rd=null,Wl=null;function Kl(){if(Wl)return Wl;var l,d=Rd,p=d.length,b,T="value"in Qi?Qi.value:Qi.textContent,M=T.length;for(l=0;l<p&&d[l]===T[l];l++);var re=p-l;for(b=1;b<=re&&d[p-b]===T[M-b];b++);return Wl=T.slice(l,1<b?1-b:void 0)}function Zl(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function dc(){return!0}function ag(){return!1}function ta(l){function d(p,b,T,M,re){this._reactName=p,this._targetInst=T,this.type=b,this.nativeEvent=M,this.target=re,this.currentTarget=null;for(var xe in l)l.hasOwnProperty(xe)&&(p=l[xe],this[xe]=p?p(M):M[xe]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?dc:ag,this.isPropagationStopped=ag,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=dc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=dc)},persist:function(){},isPersistent:dc}),d}var Ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nd=ta(Ws),is=f({},Ws,{view:0,detail:0}),Id=ta(is),fc,qh,hc,Od=f({},is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ks,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==hc&&(hc&&l.type==="mousemove"?(fc=l.screenX-hc.screenX,qh=l.screenY-hc.screenY):qh=fc=0,hc=l),fc)},movementY:function(l){return"movementY"in l?l.movementY:qh}}),jd=ta(Od),Hh=f({},Od,{dataTransfer:0}),ig=ta(Hh),Dd=f({},is,{relatedTarget:0}),Yl=ta(Dd),Md=f({},Ws,{animationName:0,elapsedTime:0,pseudoElement:0}),og=ta(Md),Hw=f({},Ws,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Pd=ta(Hw),Vh=f({},Ws,{data:0}),Fd=ta(Vh),Gh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ya={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pc(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=ya[l])?!!d[l]:!1}function Ks(){return pc}var sg=f({},is,{key:function(l){if(l.key){var d=Gh[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=Zl(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Wh[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ks,charCode:function(l){return l.type==="keypress"?Zl(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Zl(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Ld=ta(sg),lg=f({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kh=ta(lg),$d=f({},is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ks}),Zh=ta($d),Zs=f({},Ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yh=ta(Zs),Xh=f({},Od,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Bd=ta(Xh),Jh=f({},Ws,{newState:0,oldState:0}),ug=ta(Jh),Vw=[9,13,27,32],mc=ga&&"CompositionEvent"in window,os=null;ga&&"documentMode"in document&&(os=document.documentMode);var Gw=ga&&"TextEvent"in window&&!os,zd=ga&&(!mc||os&&8<os&&11>=os),Ud=" ",cg=!1;function Qh(l,d){switch(l){case"keyup":return Vw.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dg(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Ys=!1;function fg(l,d){switch(l){case"compositionend":return dg(d);case"keypress":return d.which!==32?null:(cg=!0,Ud);case"textInput":return l=d.data,l===Ud&&cg?null:l;default:return null}}function Ww(l,d){if(Ys)return l==="compositionend"||!mc&&Qh(l,d)?(l=Kl(),Wl=Rd=Qi=null,Ys=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return zd&&d.locale!=="ko"?null:d.data;default:return null}}var hg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qd(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!hg[l.type]:d==="textarea"}function ep(l,d,p,b){Hs?Rr?Rr.push(b):Rr=[b]:Hs=b,d=Xg(d,"onChange"),0<d.length&&(p=new Nd("onChange","change",null,p,b),l.push({event:p,listeners:d}))}var Xl=null,gc=null;function Kw(l){$T(l,0)}function Hd(l){var d=hr(l);if(Bl(d))return l}function yc(l,d){if(l==="change")return d}var eo=!1;if(ga){var Nr;if(ga){var Jl="oninput"in document;if(!Jl){var ai=document.createElement("div");ai.setAttribute("oninput","return;"),Jl=typeof ai.oninput=="function"}Nr=Jl}else Nr=!1;eo=Nr&&(!document.documentMode||9<document.documentMode)}function pg(){Xl&&(Xl.detachEvent("onpropertychange",Vd),gc=Xl=null)}function Vd(l){if(l.propertyName==="value"&&Hd(gc)){var d=[];ep(d,gc,l,Td(l)),Gl(Kw,d)}}function mg(l,d,p){l==="focusin"?(pg(),Xl=d,gc=p,Xl.attachEvent("onpropertychange",Vd)):l==="focusout"&&pg()}function Xs(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Hd(gc)}function tp(l,d){if(l==="click")return Hd(d)}function Ql(l,d){if(l==="input"||l==="change")return Hd(d)}function ss(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ba=typeof Object.is=="function"?Object.is:ss;function k(l,d){if(Ba(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),b=Object.keys(d);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var T=p[b];if(!Fe.call(d,T)||!Ba(l[T],d[T]))return!1}return!0}function I(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function K(l,d){var p=I(l);l=0;for(var b;p;){if(p.nodeType===3){if(b=l+p.textContent.length,l<=d&&b>=d)return{node:p,offset:d-l};l=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=I(p)}}function ee(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?ee(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function se(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=So(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=So(l.document)}return d}function ve(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Ie=ga&&"documentMode"in document&&11>=document.documentMode,Le=null,We=null,Ye=null,tt=!1;function He(l,d,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;tt||Le==null||Le!==So(b)||(b=Le,"selectionStart"in b&&ve(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ye&&k(Ye,b)||(Ye=b,b=Xg(We,"onSelect"),0<b.length&&(d=new Nd("onSelect","select",null,d,p),l.push({event:d,listeners:b}),d.target=Le)))}function rt(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Ge={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionrun:rt("Transition","TransitionRun"),transitionstart:rt("Transition","TransitionStart"),transitioncancel:rt("Transition","TransitionCancel"),transitionend:rt("Transition","TransitionEnd")},et={},it={};ga&&(it=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Xe(l){if(et[l])return et[l];if(!Ge[l])return l;var d=Ge[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in it)return et[l]=d[p];return l}var dt=Xe("animationend"),yt=Xe("animationiteration"),bt=Xe("animationstart"),xt=Xe("transitionrun"),Ft=Xe("transitionstart"),qt=Xe("transitioncancel"),Dt=Xe("transitionend"),Bt=new Map,Vt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vt.push("scrollEnd");function Mt(l,d){Bt.set(l,d),es(d,[l])}var Xt=new WeakMap;function un(l,d){if(typeof l=="object"&&l!==null){var p=Xt.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Ph(d)},Xt.set(l,d),d)}return{value:l,source:d,stack:Ph(d)}}var fn=[],kn=0,Ia=0;function bn(){for(var l=kn,d=Ia=kn=0;d<l;){var p=fn[d];fn[d++]=null;var b=fn[d];fn[d++]=null;var T=fn[d];fn[d++]=null;var M=fn[d];if(fn[d++]=null,b!==null&&T!==null){var re=b.pending;re===null?T.next=T:(T.next=re.next,re.next=T),b.pending=T}M!==0&&ba(p,T,M)}}function Kr(l,d,p,b){fn[kn++]=l,fn[kn++]=d,fn[kn++]=p,fn[kn++]=b,Ia|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function na(l,d,p,b){return Kr(l,d,p,b),to(l)}function Eo(l,d){return Kr(l,null,null,d),to(l)}function ba(l,d,p){l.lanes|=p;var b=l.alternate;b!==null&&(b.lanes|=p);for(var T=!1,M=l.return;M!==null;)M.childLanes|=p,b=M.alternate,b!==null&&(b.childLanes|=p),M.tag===22&&(l=M.stateNode,l===null||l._visibility&1||(T=!0)),l=M,M=M.return;return l.tag===3?(M=l.stateNode,T&&d!==null&&(T=31-Kt(p),l=M.hiddenUpdates,b=l[T],b===null?l[T]=[d]:b.push(d),d.lane=p|536870912),M):null}function to(l){if(50<Cp)throw Cp=0,e_=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var ls={};function v9(l,d,p,b){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(l,d,p,b){return new v9(l,d,p,b)}function Zw(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Js(l,d){var p=l.alternate;return p===null?(p=ji(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function EC(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function gg(l,d,p,b,T,M){var re=0;if(b=l,typeof l=="function")Zw(l)&&(re=1);else if(typeof l=="string")re=_$(l,p,we.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case U:return l=ji(31,p,d,T),l.elementType=U,l.lanes=M,l;case v:return bc(p.children,T,M,d);case w:re=8,T|=24;break;case _:return l=ji(12,p,d,T|2),l.elementType=_,l.lanes=M,l;case A:return l=ji(13,p,d,T),l.elementType=A,l.lanes=M,l;case O:return l=ji(19,p,d,T),l.elementType=O,l.lanes=M,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case E:re=10;break e;case S:re=9;break e;case C:re=11;break e;case j:re=14;break e;case N:re=16,b=null;break e}re=29,p=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=ji(re,p,d,T),d.elementType=l,d.type=b,d.lanes=M,d}function bc(l,d,p,b){return l=ji(7,l,b,d),l.lanes=p,l}function Yw(l,d,p){return l=ji(6,l,null,d),l.lanes=p,l}function Xw(l,d,p){return d=ji(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Gd=[],Wd=0,yg=null,bg=0,no=[],ro=0,vc=null,Qs=1,el="";function wc(l,d){Gd[Wd++]=bg,Gd[Wd++]=yg,yg=l,bg=d}function kC(l,d,p){no[ro++]=Qs,no[ro++]=el,no[ro++]=vc,vc=l;var b=Qs;l=el;var T=32-Kt(b)-1;b&=~(1<<T),p+=1;var M=32-Kt(d)+T;if(30<M){var re=T-T%5;M=(b&(1<<re)-1).toString(32),b>>=re,T-=re,Qs=1<<32-Kt(d)+T|p<<T|b,el=M+l}else Qs=1<<M|p<<T|b,el=l}function Jw(l){l.return!==null&&(wc(l,1),kC(l,1,0))}function Qw(l){for(;l===yg;)yg=Gd[--Wd],Gd[Wd]=null,bg=Gd[--Wd],Gd[Wd]=null;for(;l===vc;)vc=no[--ro],no[ro]=null,el=no[--ro],no[ro]=null,Qs=no[--ro],no[ro]=null}var ii=null,qr=null,Qn=!1,_c=null,us=!1,e1=Error(r(519));function xc(l){var d=Error(r(418,""));throw ap(un(d,l)),e1}function CC(l){var d=l.stateNode,p=l.type,b=l.memoizedProps;switch(d[he]=l,d[Te]=b,p){case"dialog":Hn("cancel",d),Hn("close",d);break;case"iframe":case"object":case"embed":Hn("load",d);break;case"video":case"audio":for(p=0;p<Tp.length;p++)Hn(Tp[p],d);break;case"source":Hn("error",d);break;case"img":case"image":case"link":Hn("error",d),Hn("load",d);break;case"details":Hn("toggle",d);break;case"input":Hn("invalid",d),$h(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),as(d);break;case"select":Hn("invalid",d);break;case"textarea":Hn("invalid",d),Bh(d,b.value,b.defaultValue,b.children),as(d)}p=b.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||b.suppressHydrationWarning===!0||qT(d.textContent,p)?(b.popover!=null&&(Hn("beforetoggle",d),Hn("toggle",d)),b.onScroll!=null&&Hn("scroll",d),b.onScrollEnd!=null&&Hn("scrollend",d),b.onClick!=null&&(d.onclick=Jg),d=!0):d=!1,d||xc(l)}function AC(l){for(ii=l.return;ii;)switch(ii.tag){case 5:case 13:us=!1;return;case 27:case 3:us=!0;return;default:ii=ii.return}}function np(l){if(l!==ii)return!1;if(!Qn)return AC(l),Qn=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||g_(l.type,l.memoizedProps)),p=!p),p&&qr&&xc(l),AC(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(d===0){qr=Co(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++;l=l.nextSibling}qr=null}}else d===27?(d=qr,mu(l.type)?(l=w_,w_=null,qr=l):qr=d):qr=ii?Co(l.stateNode.nextSibling):null;return!0}function rp(){qr=ii=null,Qn=!1}function TC(){var l=_c;return l!==null&&(vi===null?vi=l:vi.push.apply(vi,l),_c=null),l}function ap(l){_c===null?_c=[l]:_c.push(l)}var t1=X(null),Sc=null,tl=null;function eu(l,d,p){be(t1,d._currentValue),d._currentValue=p}function nl(l){l._currentValue=t1.current,ae(t1)}function n1(l,d,p){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===p)break;l=l.return}}function r1(l,d,p,b){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var M=T.dependencies;if(M!==null){var re=T.child;M=M.firstContext;e:for(;M!==null;){var xe=M;M=T;for(var ze=0;ze<d.length;ze++)if(xe.context===d[ze]){M.lanes|=p,xe=M.alternate,xe!==null&&(xe.lanes|=p),n1(M.return,p,l),b||(re=null);break e}M=xe.next}}else if(T.tag===18){if(re=T.return,re===null)throw Error(r(341));re.lanes|=p,M=re.alternate,M!==null&&(M.lanes|=p),n1(re,p,l),re=null}else re=T.child;if(re!==null)re.return=T;else for(re=T;re!==null;){if(re===l){re=null;break}if(T=re.sibling,T!==null){T.return=re.return,re=T;break}re=re.return}T=re}}function ip(l,d,p,b){l=null;for(var T=d,M=!1;T!==null;){if(!M){if((T.flags&524288)!==0)M=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var re=T.alternate;if(re===null)throw Error(r(387));if(re=re.memoizedProps,re!==null){var xe=T.type;Ba(T.pendingProps.value,re.value)||(l!==null?l.push(xe):l=[xe])}}else if(T===Pe.current){if(re=T.alternate,re===null)throw Error(r(387));re.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Dp):l=[Dp])}T=T.return}l!==null&&r1(d,l,p,b),d.flags|=262144}function vg(l){for(l=l.firstContext;l!==null;){if(!Ba(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ec(l){Sc=l,tl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function za(l){return RC(Sc,l)}function wg(l,d){return Sc===null&&Ec(l),RC(l,d)}function RC(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},tl===null){if(l===null)throw Error(r(308));tl=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else tl=tl.next=d;return p}var w9=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},_9=e.unstable_scheduleCallback,x9=e.unstable_NormalPriority,ua={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function a1(){return{controller:new w9,data:new Map,refCount:0}}function op(l){l.refCount--,l.refCount===0&&_9(x9,function(){l.controller.abort()})}var sp=null,i1=0,Kd=0,Zd=null;function S9(l,d){if(sp===null){var p=sp=[];i1=0,Kd=s_(),Zd={status:"pending",value:void 0,then:function(b){p.push(b)}}}return i1++,d.then(NC,NC),d}function NC(){if(--i1===0&&sp!==null){Zd!==null&&(Zd.status="fulfilled");var l=sp;sp=null,Kd=0,Zd=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function E9(l,d){var p=[],b={status:"pending",value:null,reason:null,then:function(T){p.push(T)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var T=0;T<p.length;T++)(0,p[T])(d)},function(T){for(b.status="rejected",b.reason=T,T=0;T<p.length;T++)(0,p[T])(void 0)}),b}var IC=le.S;le.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&S9(l,d),IC!==null&&IC(l,d)};var kc=X(null);function o1(){var l=kc.current;return l!==null?l:Cr.pooledCache}function _g(l,d){d===null?be(kc,kc.current):be(kc,d.pool)}function OC(){var l=o1();return l===null?null:{parent:ua._currentValue,pool:l}}var lp=Error(r(460)),jC=Error(r(474)),xg=Error(r(542)),s1={then:function(){}};function DC(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Sg(){}function MC(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then(Sg,Sg),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,FC(l),l;default:if(typeof d.status=="string")d.then(Sg,Sg);else{if(l=Cr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=b}},function(b){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,FC(l),l}throw up=d,lp}}var up=null;function PC(){if(up===null)throw Error(r(459));var l=up;return up=null,l}function FC(l){if(l===lp||l===xg)throw Error(r(483))}var tu=!1;function l1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function u1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function nu(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function ru(l,d,p){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(sr&2)!==0){var T=b.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),b.pending=d,d=to(l),ba(l,null,p),d}return Kr(l,b,d,p),to(l)}function cp(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Je(l,p)}}function c1(l,d){var p=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var T=null,M=null;if(p=p.firstBaseUpdate,p!==null){do{var re={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};M===null?T=M=re:M=M.next=re,p=p.next}while(p!==null);M===null?T=M=d:M=M.next=d}else T=M=d;p={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:M,shared:b.shared,callbacks:b.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var d1=!1;function dp(){if(d1){var l=Zd;if(l!==null)throw l}}function fp(l,d,p,b){d1=!1;var T=l.updateQueue;tu=!1;var M=T.firstBaseUpdate,re=T.lastBaseUpdate,xe=T.shared.pending;if(xe!==null){T.shared.pending=null;var ze=xe,ut=ze.next;ze.next=null,re===null?M=ut:re.next=ut,re=ze;var St=l.alternate;St!==null&&(St=St.updateQueue,xe=St.lastBaseUpdate,xe!==re&&(xe===null?St.firstBaseUpdate=ut:xe.next=ut,St.lastBaseUpdate=ze))}if(M!==null){var At=T.baseState;re=0,St=ut=ze=null,xe=M;do{var pt=xe.lane&-536870913,mt=pt!==xe.lane;if(mt?(Gn&pt)===pt:(b&pt)===pt){pt!==0&&pt===Kd&&(d1=!0),St!==null&&(St=St.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var vn=l,hn=xe;pt=d;var yr=p;switch(hn.tag){case 1:if(vn=hn.payload,typeof vn=="function"){At=vn.call(yr,At,pt);break e}At=vn;break e;case 3:vn.flags=vn.flags&-65537|128;case 0:if(vn=hn.payload,pt=typeof vn=="function"?vn.call(yr,At,pt):vn,pt==null)break e;At=f({},At,pt);break e;case 2:tu=!0}}pt=xe.callback,pt!==null&&(l.flags|=64,mt&&(l.flags|=8192),mt=T.callbacks,mt===null?T.callbacks=[pt]:mt.push(pt))}else mt={lane:pt,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},St===null?(ut=St=mt,ze=At):St=St.next=mt,re|=pt;if(xe=xe.next,xe===null){if(xe=T.shared.pending,xe===null)break;mt=xe,xe=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);St===null&&(ze=At),T.baseState=ze,T.firstBaseUpdate=ut,T.lastBaseUpdate=St,M===null&&(T.shared.lanes=0),du|=re,l.lanes=re,l.memoizedState=At}}function LC(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function $C(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)LC(p[l],d)}var Yd=X(null),Eg=X(0);function BC(l,d){l=ul,be(Eg,l),be(Yd,d),ul=l|d.baseLanes}function f1(){be(Eg,ul),be(Yd,Yd.current)}function h1(){ul=Eg.current,ae(Yd),ae(Eg)}var au=0,Ln=null,mr=null,ra=null,kg=!1,Xd=!1,Cc=!1,Cg=0,hp=0,Jd=null,k9=0;function Zr(){throw Error(r(321))}function p1(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!Ba(l[p],d[p]))return!1;return!0}function m1(l,d,p,b,T,M){return au=M,Ln=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,le.H=l===null||l.memoizedState===null?SA:EA,Cc=!1,M=p(b,T),Cc=!1,Xd&&(M=UC(d,p,b,T)),zC(l),M}function zC(l){le.H=Og;var d=mr!==null&&mr.next!==null;if(au=0,ra=mr=Ln=null,kg=!1,hp=0,Jd=null,d)throw Error(r(300));l===null||va||(l=l.dependencies,l!==null&&vg(l)&&(va=!0))}function UC(l,d,p,b){Ln=l;var T=0;do{if(Xd&&(Jd=null),hp=0,Xd=!1,25<=T)throw Error(r(301));if(T+=1,ra=mr=null,l.updateQueue!=null){var M=l.updateQueue;M.lastEffect=null,M.events=null,M.stores=null,M.memoCache!=null&&(M.memoCache.index=0)}le.H=O9,M=d(p,b)}while(Xd);return M}function C9(){var l=le.H,d=l.useState()[0];return d=typeof d.then=="function"?pp(d):d,l=l.useState()[0],(mr!==null?mr.memoizedState:null)!==l&&(Ln.flags|=1024),d}function g1(){var l=Cg!==0;return Cg=0,l}function y1(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function b1(l){if(kg){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}kg=!1}au=0,ra=mr=Ln=null,Xd=!1,hp=Cg=0,Jd=null}function yi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ra===null?Ln.memoizedState=ra=l:ra=ra.next=l,ra}function aa(){if(mr===null){var l=Ln.alternate;l=l!==null?l.memoizedState:null}else l=mr.next;var d=ra===null?Ln.memoizedState:ra.next;if(d!==null)ra=d,mr=l;else{if(l===null)throw Ln.alternate===null?Error(r(467)):Error(r(310));mr=l,l={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},ra===null?Ln.memoizedState=ra=l:ra=ra.next=l}return ra}function v1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pp(l){var d=hp;return hp+=1,Jd===null&&(Jd=[]),l=MC(Jd,l,d),d=Ln,(ra===null?d.memoizedState:ra.next)===null&&(d=d.alternate,le.H=d===null||d.memoizedState===null?SA:EA),l}function Ag(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return pp(l);if(l.$$typeof===E)return za(l)}throw Error(r(438,String(l)))}function w1(l){var d=null,p=Ln.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var b=Ln.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=v1(),Ln.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),b=0;b<l;b++)p[b]=V;return d.index++,p}function rl(l,d){return typeof d=="function"?d(l):d}function Tg(l){var d=aa();return _1(d,mr,l)}function _1(l,d,p){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=p;var T=l.baseQueue,M=b.pending;if(M!==null){if(T!==null){var re=T.next;T.next=M.next,M.next=re}d.baseQueue=T=M,b.pending=null}if(M=l.baseState,T===null)l.memoizedState=M;else{d=T.next;var xe=re=null,ze=null,ut=d,St=!1;do{var At=ut.lane&-536870913;if(At!==ut.lane?(Gn&At)===At:(au&At)===At){var pt=ut.revertLane;if(pt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),At===Kd&&(St=!0);else if((au&pt)===pt){ut=ut.next,pt===Kd&&(St=!0);continue}else At={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},ze===null?(xe=ze=At,re=M):ze=ze.next=At,Ln.lanes|=pt,du|=pt;At=ut.action,Cc&&p(M,At),M=ut.hasEagerState?ut.eagerState:p(M,At)}else pt={lane:At,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},ze===null?(xe=ze=pt,re=M):ze=ze.next=pt,Ln.lanes|=At,du|=At;ut=ut.next}while(ut!==null&&ut!==d);if(ze===null?re=M:ze.next=xe,!Ba(M,l.memoizedState)&&(va=!0,St&&(p=Zd,p!==null)))throw p;l.memoizedState=M,l.baseState=re,l.baseQueue=ze,b.lastRenderedState=M}return T===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function x1(l){var d=aa(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var b=p.dispatch,T=p.pending,M=d.memoizedState;if(T!==null){p.pending=null;var re=T=T.next;do M=l(M,re.action),re=re.next;while(re!==T);Ba(M,d.memoizedState)||(va=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),p.lastRenderedState=M}return[M,b]}function qC(l,d,p){var b=Ln,T=aa(),M=Qn;if(M){if(p===void 0)throw Error(r(407));p=p()}else p=d();var re=!Ba((mr||T).memoizedState,p);re&&(T.memoizedState=p,va=!0),T=T.queue;var xe=GC.bind(null,b,T,l);if(mp(2048,8,xe,[l]),T.getSnapshot!==d||re||ra!==null&&ra.memoizedState.tag&1){if(b.flags|=2048,Qd(9,Rg(),VC.bind(null,b,T,p,d),null),Cr===null)throw Error(r(349));M||(au&124)!==0||HC(b,d,p)}return p}function HC(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=Ln.updateQueue,d===null?(d=v1(),Ln.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function VC(l,d,p,b){d.value=p,d.getSnapshot=b,WC(d)&&KC(l)}function GC(l,d,p){return p(function(){WC(d)&&KC(l)})}function WC(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!Ba(l,p)}catch{return!0}}function KC(l){var d=Eo(l,2);d!==null&&Li(d,l,2)}function S1(l){var d=yi();if(typeof l=="function"){var p=l;if(l=p(),Cc){Rt(!0);try{p()}finally{Rt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:l},d}function ZC(l,d,p,b){return l.baseState=p,_1(l,mr,typeof b=="function"?b:rl)}function A9(l,d,p,b,T){if(Ig(l))throw Error(r(485));if(l=d.action,l!==null){var M={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(re){M.listeners.push(re)}};le.T!==null?p(!0):M.isTransition=!1,b(M),p=d.pending,p===null?(M.next=d.pending=M,YC(d,M)):(M.next=p.next,d.pending=p.next=M)}}function YC(l,d){var p=d.action,b=d.payload,T=l.state;if(d.isTransition){var M=le.T,re={};le.T=re;try{var xe=p(T,b),ze=le.S;ze!==null&&ze(re,xe),XC(l,d,xe)}catch(ut){E1(l,d,ut)}finally{le.T=M}}else try{M=p(T,b),XC(l,d,M)}catch(ut){E1(l,d,ut)}}function XC(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(b){JC(l,d,b)},function(b){return E1(l,d,b)}):JC(l,d,p)}function JC(l,d,p){d.status="fulfilled",d.value=p,QC(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,YC(l,p)))}function E1(l,d,p){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=p,QC(d),d=d.next;while(d!==b)}l.action=null}function QC(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function eA(l,d){return d}function tA(l,d){if(Qn){var p=Cr.formState;if(p!==null){e:{var b=Ln;if(Qn){if(qr){t:{for(var T=qr,M=us;T.nodeType!==8;){if(!M){T=null;break t}if(T=Co(T.nextSibling),T===null){T=null;break t}}M=T.data,T=M==="F!"||M==="F"?T:null}if(T){qr=Co(T.nextSibling),b=T.data==="F!";break e}}xc(b)}b=!1}b&&(d=p[0])}}return p=yi(),p.memoizedState=p.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eA,lastRenderedState:d},p.queue=b,p=wA.bind(null,Ln,b),b.dispatch=p,b=S1(!1),M=R1.bind(null,Ln,!1,b.queue),b=yi(),T={state:d,dispatch:null,action:l,pending:null},b.queue=T,p=A9.bind(null,Ln,T,M,p),T.dispatch=p,b.memoizedState=l,[d,p,!1]}function nA(l){var d=aa();return rA(d,mr,l)}function rA(l,d,p){if(d=_1(l,d,eA)[0],l=Tg(rl)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=pp(d)}catch(re){throw re===lp?xg:re}else b=d;d=aa();var T=d.queue,M=T.dispatch;return p!==d.memoizedState&&(Ln.flags|=2048,Qd(9,Rg(),T9.bind(null,T,p),null)),[b,M,l]}function T9(l,d){l.action=d}function aA(l){var d=aa(),p=mr;if(p!==null)return rA(d,p,l);aa(),d=d.memoizedState,p=aa();var b=p.queue.dispatch;return p.memoizedState=l,[d,b,!1]}function Qd(l,d,p,b){return l={tag:l,create:p,deps:b,inst:d,next:null},d=Ln.updateQueue,d===null&&(d=v1(),Ln.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(b=p.next,p.next=l,l.next=b,d.lastEffect=l),l}function Rg(){return{destroy:void 0,resource:void 0}}function iA(){return aa().memoizedState}function Ng(l,d,p,b){var T=yi();b=b===void 0?null:b,Ln.flags|=l,T.memoizedState=Qd(1|d,Rg(),p,b)}function mp(l,d,p,b){var T=aa();b=b===void 0?null:b;var M=T.memoizedState.inst;mr!==null&&b!==null&&p1(b,mr.memoizedState.deps)?T.memoizedState=Qd(d,M,p,b):(Ln.flags|=l,T.memoizedState=Qd(1|d,M,p,b))}function oA(l,d){Ng(8390656,8,l,d)}function sA(l,d){mp(2048,8,l,d)}function lA(l,d){return mp(4,2,l,d)}function uA(l,d){return mp(4,4,l,d)}function cA(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function dA(l,d,p){p=p!=null?p.concat([l]):null,mp(4,4,cA.bind(null,d,l),p)}function k1(){}function fA(l,d){var p=aa();d=d===void 0?null:d;var b=p.memoizedState;return d!==null&&p1(d,b[1])?b[0]:(p.memoizedState=[l,d],l)}function hA(l,d){var p=aa();d=d===void 0?null:d;var b=p.memoizedState;if(d!==null&&p1(d,b[1]))return b[0];if(b=l(),Cc){Rt(!0);try{l()}finally{Rt(!1)}}return p.memoizedState=[b,d],b}function C1(l,d,p){return p===void 0||(au&1073741824)!==0?l.memoizedState=d:(l.memoizedState=p,l=gT(),Ln.lanes|=l,du|=l,p)}function pA(l,d,p,b){return Ba(p,d)?p:Yd.current!==null?(l=C1(l,p,b),Ba(l,d)||(va=!0),l):(au&42)===0?(va=!0,l.memoizedState=p):(l=gT(),Ln.lanes|=l,du|=l,d)}function mA(l,d,p,b,T){var M=ne.p;ne.p=M!==0&&8>M?M:8;var re=le.T,xe={};le.T=xe,R1(l,!1,d,p);try{var ze=T(),ut=le.S;if(ut!==null&&ut(xe,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var St=E9(ze,b);gp(l,d,St,Fi(l))}else gp(l,d,b,Fi(l))}catch(At){gp(l,d,{then:function(){},status:"rejected",reason:At},Fi())}finally{ne.p=M,le.T=re}}function R9(){}function A1(l,d,p,b){if(l.tag!==5)throw Error(r(476));var T=gA(l).queue;mA(l,T,d,Q,p===null?R9:function(){return yA(l),p(b)})}function gA(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:Q},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function yA(l){var d=gA(l).next.queue;gp(l,d,{},Fi())}function T1(){return za(Dp)}function bA(){return aa().memoizedState}function vA(){return aa().memoizedState}function N9(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=Fi();l=nu(p);var b=ru(d,l,p);b!==null&&(Li(b,d,p),cp(b,d,p)),d={cache:a1()},l.payload=d;return}d=d.return}}function I9(l,d,p){var b=Fi();p={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Ig(l)?_A(d,p):(p=na(l,d,p,b),p!==null&&(Li(p,l,b),xA(p,d,b)))}function wA(l,d,p){var b=Fi();gp(l,d,p,b)}function gp(l,d,p,b){var T={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ig(l))_A(d,T);else{var M=l.alternate;if(l.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var re=d.lastRenderedState,xe=M(re,p);if(T.hasEagerState=!0,T.eagerState=xe,Ba(xe,re))return Kr(l,d,T,0),Cr===null&&bn(),!1}catch{}finally{}if(p=na(l,d,T,b),p!==null)return Li(p,l,b),xA(p,d,b),!0}return!1}function R1(l,d,p,b){if(b={lane:2,revertLane:s_(),action:b,hasEagerState:!1,eagerState:null,next:null},Ig(l)){if(d)throw Error(r(479))}else d=na(l,p,b,2),d!==null&&Li(d,l,2)}function Ig(l){var d=l.alternate;return l===Ln||d!==null&&d===Ln}function _A(l,d){Xd=kg=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function xA(l,d,p){if((p&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Je(l,p)}}var Og={readContext:za,use:Ag,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useInsertionEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useSyncExternalStore:Zr,useId:Zr,useHostTransitionStatus:Zr,useFormState:Zr,useActionState:Zr,useOptimistic:Zr,useMemoCache:Zr,useCacheRefresh:Zr},SA={readContext:za,use:Ag,useCallback:function(l,d){return yi().memoizedState=[l,d===void 0?null:d],l},useContext:za,useEffect:oA,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Ng(4194308,4,cA.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Ng(4194308,4,l,d)},useInsertionEffect:function(l,d){Ng(4,2,l,d)},useMemo:function(l,d){var p=yi();d=d===void 0?null:d;var b=l();if(Cc){Rt(!0);try{l()}finally{Rt(!1)}}return p.memoizedState=[b,d],b},useReducer:function(l,d,p){var b=yi();if(p!==void 0){var T=p(d);if(Cc){Rt(!0);try{p(d)}finally{Rt(!1)}}}else T=d;return b.memoizedState=b.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},b.queue=l,l=l.dispatch=I9.bind(null,Ln,l),[b.memoizedState,l]},useRef:function(l){var d=yi();return l={current:l},d.memoizedState=l},useState:function(l){l=S1(l);var d=l.queue,p=wA.bind(null,Ln,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:k1,useDeferredValue:function(l,d){var p=yi();return C1(p,l,d)},useTransition:function(){var l=S1(!1);return l=mA.bind(null,Ln,l.queue,!0,!1),yi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var b=Ln,T=yi();if(Qn){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),Cr===null)throw Error(r(349));(Gn&124)!==0||HC(b,d,p)}T.memoizedState=p;var M={value:p,getSnapshot:d};return T.queue=M,oA(GC.bind(null,b,M,l),[l]),b.flags|=2048,Qd(9,Rg(),VC.bind(null,b,M,p,d),null),p},useId:function(){var l=yi(),d=Cr.identifierPrefix;if(Qn){var p=el,b=Qs;p=(b&~(1<<32-Kt(b)-1)).toString(32)+p,d="«"+d+"R"+p,p=Cg++,0<p&&(d+="H"+p.toString(32)),d+="»"}else p=k9++,d="«"+d+"r"+p.toString(32)+"»";return l.memoizedState=d},useHostTransitionStatus:T1,useFormState:tA,useActionState:tA,useOptimistic:function(l){var d=yi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=R1.bind(null,Ln,!0,p),p.dispatch=d,[l,d]},useMemoCache:w1,useCacheRefresh:function(){return yi().memoizedState=N9.bind(null,Ln)}},EA={readContext:za,use:Ag,useCallback:fA,useContext:za,useEffect:sA,useImperativeHandle:dA,useInsertionEffect:lA,useLayoutEffect:uA,useMemo:hA,useReducer:Tg,useRef:iA,useState:function(){return Tg(rl)},useDebugValue:k1,useDeferredValue:function(l,d){var p=aa();return pA(p,mr.memoizedState,l,d)},useTransition:function(){var l=Tg(rl)[0],d=aa().memoizedState;return[typeof l=="boolean"?l:pp(l),d]},useSyncExternalStore:qC,useId:bA,useHostTransitionStatus:T1,useFormState:nA,useActionState:nA,useOptimistic:function(l,d){var p=aa();return ZC(p,mr,l,d)},useMemoCache:w1,useCacheRefresh:vA},O9={readContext:za,use:Ag,useCallback:fA,useContext:za,useEffect:sA,useImperativeHandle:dA,useInsertionEffect:lA,useLayoutEffect:uA,useMemo:hA,useReducer:x1,useRef:iA,useState:function(){return x1(rl)},useDebugValue:k1,useDeferredValue:function(l,d){var p=aa();return mr===null?C1(p,l,d):pA(p,mr.memoizedState,l,d)},useTransition:function(){var l=x1(rl)[0],d=aa().memoizedState;return[typeof l=="boolean"?l:pp(l),d]},useSyncExternalStore:qC,useId:bA,useHostTransitionStatus:T1,useFormState:aA,useActionState:aA,useOptimistic:function(l,d){var p=aa();return mr!==null?ZC(p,mr,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:w1,useCacheRefresh:vA},ef=null,yp=0;function jg(l){var d=yp;return yp+=1,ef===null&&(ef=[]),MC(ef,l,d)}function bp(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Dg(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function kA(l){var d=l._init;return d(l._payload)}function CA(l){function d(nt,Ke){if(l){var lt=nt.deletions;lt===null?(nt.deletions=[Ke],nt.flags|=16):lt.push(Ke)}}function p(nt,Ke){if(!l)return null;for(;Ke!==null;)d(nt,Ke),Ke=Ke.sibling;return null}function b(nt){for(var Ke=new Map;nt!==null;)nt.key!==null?Ke.set(nt.key,nt):Ke.set(nt.index,nt),nt=nt.sibling;return Ke}function T(nt,Ke){return nt=Js(nt,Ke),nt.index=0,nt.sibling=null,nt}function M(nt,Ke,lt){return nt.index=lt,l?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<Ke?(nt.flags|=67108866,Ke):lt):(nt.flags|=67108866,Ke)):(nt.flags|=1048576,Ke)}function re(nt){return l&&nt.alternate===null&&(nt.flags|=67108866),nt}function xe(nt,Ke,lt,kt){return Ke===null||Ke.tag!==6?(Ke=Yw(lt,nt.mode,kt),Ke.return=nt,Ke):(Ke=T(Ke,lt),Ke.return=nt,Ke)}function ze(nt,Ke,lt,kt){var Qt=lt.type;return Qt===v?St(nt,Ke,lt.props.children,kt,lt.key):Ke!==null&&(Ke.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===N&&kA(Qt)===Ke.type)?(Ke=T(Ke,lt.props),bp(Ke,lt),Ke.return=nt,Ke):(Ke=gg(lt.type,lt.key,lt.props,null,nt.mode,kt),bp(Ke,lt),Ke.return=nt,Ke)}function ut(nt,Ke,lt,kt){return Ke===null||Ke.tag!==4||Ke.stateNode.containerInfo!==lt.containerInfo||Ke.stateNode.implementation!==lt.implementation?(Ke=Xw(lt,nt.mode,kt),Ke.return=nt,Ke):(Ke=T(Ke,lt.children||[]),Ke.return=nt,Ke)}function St(nt,Ke,lt,kt,Qt){return Ke===null||Ke.tag!==7?(Ke=bc(lt,nt.mode,kt,Qt),Ke.return=nt,Ke):(Ke=T(Ke,lt),Ke.return=nt,Ke)}function At(nt,Ke,lt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return Ke=Yw(""+Ke,nt.mode,lt),Ke.return=nt,Ke;if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case m:return lt=gg(Ke.type,Ke.key,Ke.props,null,nt.mode,lt),bp(lt,Ke),lt.return=nt,lt;case g:return Ke=Xw(Ke,nt.mode,lt),Ke.return=nt,Ke;case N:var kt=Ke._init;return Ke=kt(Ke._payload),At(nt,Ke,lt)}if(ue(Ke)||P(Ke))return Ke=bc(Ke,nt.mode,lt,null),Ke.return=nt,Ke;if(typeof Ke.then=="function")return At(nt,jg(Ke),lt);if(Ke.$$typeof===E)return At(nt,wg(nt,Ke),lt);Dg(nt,Ke)}return null}function pt(nt,Ke,lt,kt){var Qt=Ke!==null?Ke.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Qt!==null?null:xe(nt,Ke,""+lt,kt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:return lt.key===Qt?ze(nt,Ke,lt,kt):null;case g:return lt.key===Qt?ut(nt,Ke,lt,kt):null;case N:return Qt=lt._init,lt=Qt(lt._payload),pt(nt,Ke,lt,kt)}if(ue(lt)||P(lt))return Qt!==null?null:St(nt,Ke,lt,kt,null);if(typeof lt.then=="function")return pt(nt,Ke,jg(lt),kt);if(lt.$$typeof===E)return pt(nt,Ke,wg(nt,lt),kt);Dg(nt,lt)}return null}function mt(nt,Ke,lt,kt,Qt){if(typeof kt=="string"&&kt!==""||typeof kt=="number"||typeof kt=="bigint")return nt=nt.get(lt)||null,xe(Ke,nt,""+kt,Qt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case m:return nt=nt.get(kt.key===null?lt:kt.key)||null,ze(Ke,nt,kt,Qt);case g:return nt=nt.get(kt.key===null?lt:kt.key)||null,ut(Ke,nt,kt,Qt);case N:var Bn=kt._init;return kt=Bn(kt._payload),mt(nt,Ke,lt,kt,Qt)}if(ue(kt)||P(kt))return nt=nt.get(lt)||null,St(Ke,nt,kt,Qt,null);if(typeof kt.then=="function")return mt(nt,Ke,lt,jg(kt),Qt);if(kt.$$typeof===E)return mt(nt,Ke,lt,wg(Ke,kt),Qt);Dg(Ke,kt)}return null}function vn(nt,Ke,lt,kt){for(var Qt=null,Bn=null,on=Ke,gn=Ke=0,_a=null;on!==null&&gn<lt.length;gn++){on.index>gn?(_a=on,on=null):_a=on.sibling;var Jn=pt(nt,on,lt[gn],kt);if(Jn===null){on===null&&(on=_a);break}l&&on&&Jn.alternate===null&&d(nt,on),Ke=M(Jn,Ke,gn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn,on=_a}if(gn===lt.length)return p(nt,on),Qn&&wc(nt,gn),Qt;if(on===null){for(;gn<lt.length;gn++)on=At(nt,lt[gn],kt),on!==null&&(Ke=M(on,Ke,gn),Bn===null?Qt=on:Bn.sibling=on,Bn=on);return Qn&&wc(nt,gn),Qt}for(on=b(on);gn<lt.length;gn++)_a=mt(on,nt,gn,lt[gn],kt),_a!==null&&(l&&_a.alternate!==null&&on.delete(_a.key===null?gn:_a.key),Ke=M(_a,Ke,gn),Bn===null?Qt=_a:Bn.sibling=_a,Bn=_a);return l&&on.forEach(function(wu){return d(nt,wu)}),Qn&&wc(nt,gn),Qt}function hn(nt,Ke,lt,kt){if(lt==null)throw Error(r(151));for(var Qt=null,Bn=null,on=Ke,gn=Ke=0,_a=null,Jn=lt.next();on!==null&&!Jn.done;gn++,Jn=lt.next()){on.index>gn?(_a=on,on=null):_a=on.sibling;var wu=pt(nt,on,Jn.value,kt);if(wu===null){on===null&&(on=_a);break}l&&on&&wu.alternate===null&&d(nt,on),Ke=M(wu,Ke,gn),Bn===null?Qt=wu:Bn.sibling=wu,Bn=wu,on=_a}if(Jn.done)return p(nt,on),Qn&&wc(nt,gn),Qt;if(on===null){for(;!Jn.done;gn++,Jn=lt.next())Jn=At(nt,Jn.value,kt),Jn!==null&&(Ke=M(Jn,Ke,gn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn);return Qn&&wc(nt,gn),Qt}for(on=b(on);!Jn.done;gn++,Jn=lt.next())Jn=mt(on,nt,gn,Jn.value,kt),Jn!==null&&(l&&Jn.alternate!==null&&on.delete(Jn.key===null?gn:Jn.key),Ke=M(Jn,Ke,gn),Bn===null?Qt=Jn:Bn.sibling=Jn,Bn=Jn);return l&&on.forEach(function(j$){return d(nt,j$)}),Qn&&wc(nt,gn),Qt}function yr(nt,Ke,lt,kt){if(typeof lt=="object"&&lt!==null&&lt.type===v&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:e:{for(var Qt=lt.key;Ke!==null;){if(Ke.key===Qt){if(Qt=lt.type,Qt===v){if(Ke.tag===7){p(nt,Ke.sibling),kt=T(Ke,lt.props.children),kt.return=nt,nt=kt;break e}}else if(Ke.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===N&&kA(Qt)===Ke.type){p(nt,Ke.sibling),kt=T(Ke,lt.props),bp(kt,lt),kt.return=nt,nt=kt;break e}p(nt,Ke);break}else d(nt,Ke);Ke=Ke.sibling}lt.type===v?(kt=bc(lt.props.children,nt.mode,kt,lt.key),kt.return=nt,nt=kt):(kt=gg(lt.type,lt.key,lt.props,null,nt.mode,kt),bp(kt,lt),kt.return=nt,nt=kt)}return re(nt);case g:e:{for(Qt=lt.key;Ke!==null;){if(Ke.key===Qt)if(Ke.tag===4&&Ke.stateNode.containerInfo===lt.containerInfo&&Ke.stateNode.implementation===lt.implementation){p(nt,Ke.sibling),kt=T(Ke,lt.children||[]),kt.return=nt,nt=kt;break e}else{p(nt,Ke);break}else d(nt,Ke);Ke=Ke.sibling}kt=Xw(lt,nt.mode,kt),kt.return=nt,nt=kt}return re(nt);case N:return Qt=lt._init,lt=Qt(lt._payload),yr(nt,Ke,lt,kt)}if(ue(lt))return vn(nt,Ke,lt,kt);if(P(lt)){if(Qt=P(lt),typeof Qt!="function")throw Error(r(150));return lt=Qt.call(lt),hn(nt,Ke,lt,kt)}if(typeof lt.then=="function")return yr(nt,Ke,jg(lt),kt);if(lt.$$typeof===E)return yr(nt,Ke,wg(nt,lt),kt);Dg(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ke!==null&&Ke.tag===6?(p(nt,Ke.sibling),kt=T(Ke,lt),kt.return=nt,nt=kt):(p(nt,Ke),kt=Yw(lt,nt.mode,kt),kt.return=nt,nt=kt),re(nt)):p(nt,Ke)}return function(nt,Ke,lt,kt){try{yp=0;var Qt=yr(nt,Ke,lt,kt);return ef=null,Qt}catch(on){if(on===lp||on===xg)throw on;var Bn=ji(29,on,null,nt.mode);return Bn.lanes=kt,Bn.return=nt,Bn}finally{}}}var tf=CA(!0),AA=CA(!1),ao=X(null),cs=null;function iu(l){var d=l.alternate;be(ca,ca.current&1),be(ao,l),cs===null&&(d===null||Yd.current!==null||d.memoizedState!==null)&&(cs=l)}function TA(l){if(l.tag===22){if(be(ca,ca.current),be(ao,l),cs===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(cs=l)}}else ou()}function ou(){be(ca,ca.current),be(ao,ao.current)}function al(l){ae(ao),cs===l&&(cs=null),ae(ca)}var ca=X(0);function Mg(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||v_(p)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function N1(l,d,p,b){d=l.memoizedState,p=p(b,d),p=p==null?d:f({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var I1={enqueueSetState:function(l,d,p){l=l._reactInternals;var b=Fi(),T=nu(b);T.payload=d,p!=null&&(T.callback=p),d=ru(l,T,b),d!==null&&(Li(d,l,b),cp(d,l,b))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var b=Fi(),T=nu(b);T.tag=1,T.payload=d,p!=null&&(T.callback=p),d=ru(l,T,b),d!==null&&(Li(d,l,b),cp(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Fi(),b=nu(p);b.tag=2,d!=null&&(b.callback=d),d=ru(l,b,p),d!==null&&(Li(d,l,p),cp(d,l,p))}};function RA(l,d,p,b,T,M,re){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,M,re):d.prototype&&d.prototype.isPureReactComponent?!k(p,b)||!k(T,M):!0}function NA(l,d,p,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,b),d.state!==l&&I1.enqueueReplaceState(d,d.state,null)}function Ac(l,d){var p=d;if("ref"in d){p={};for(var b in d)b!=="ref"&&(p[b]=d[b])}if(l=l.defaultProps){p===d&&(p=f({},p));for(var T in l)p[T]===void 0&&(p[T]=l[T])}return p}var Pg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Vr=="object"&&typeof Vr.emit=="function"){Vr.emit("uncaughtException",l);return}console.error(l)};function IA(l){Pg(l)}function OA(l){console.error(l)}function jA(l){Pg(l)}function Fg(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function DA(l,d,p){try{var b=l.onCaughtError;b(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function O1(l,d,p){return p=nu(p),p.tag=3,p.payload={element:null},p.callback=function(){Fg(l,d)},p}function MA(l){return l=nu(l),l.tag=3,l}function PA(l,d,p,b){var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var M=b.value;l.payload=function(){return T(M)},l.callback=function(){DA(d,p,b)}}var re=p.stateNode;re!==null&&typeof re.componentDidCatch=="function"&&(l.callback=function(){DA(d,p,b),typeof T!="function"&&(fu===null?fu=new Set([this]):fu.add(this));var xe=b.stack;this.componentDidCatch(b.value,{componentStack:xe!==null?xe:""})})}function j9(l,d,p,b,T){if(p.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=p.alternate,d!==null&&ip(d,p,T,!0),p=ao.current,p!==null){switch(p.tag){case 13:return cs===null?n_():p.alternate===null&&Hr===0&&(Hr=3),p.flags&=-257,p.flags|=65536,p.lanes=T,b===s1?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([b]):d.add(b),a_(l,b,T)),!1;case 22:return p.flags|=65536,b===s1?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([b]):p.add(b)),a_(l,b,T)),!1}throw Error(r(435,p.tag))}return a_(l,b,T),n_(),!1}if(Qn)return d=ao.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,b!==e1&&(l=Error(r(422),{cause:b}),ap(un(l,p)))):(b!==e1&&(d=Error(r(423),{cause:b}),ap(un(d,p))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,b=un(b,p),T=O1(l.stateNode,b,T),c1(l,T),Hr!==4&&(Hr=2)),!1;var M=Error(r(520),{cause:b});if(M=un(M,p),kp===null?kp=[M]:kp.push(M),Hr!==4&&(Hr=2),d===null)return!0;b=un(b,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=T&-T,p.lanes|=l,l=O1(p.stateNode,b,l),c1(p,l),!1;case 1:if(d=p.type,M=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(fu===null||!fu.has(M))))return p.flags|=65536,T&=-T,p.lanes|=T,T=MA(T),PA(T,l,p,b),c1(p,T),!1}p=p.return}while(p!==null);return!1}var FA=Error(r(461)),va=!1;function Oa(l,d,p,b){d.child=l===null?AA(d,null,p,b):tf(d,l.child,p,b)}function LA(l,d,p,b,T){p=p.render;var M=d.ref;if("ref"in b){var re={};for(var xe in b)xe!=="ref"&&(re[xe]=b[xe])}else re=b;return Ec(d),b=m1(l,d,p,re,M,T),xe=g1(),l!==null&&!va?(y1(l,d,T),il(l,d,T)):(Qn&&xe&&Jw(d),d.flags|=1,Oa(l,d,b,T),d.child)}function $A(l,d,p,b,T){if(l===null){var M=p.type;return typeof M=="function"&&!Zw(M)&&M.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=M,BA(l,d,M,b,T)):(l=gg(p.type,null,b,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(M=l.child,!B1(l,T)){var re=M.memoizedProps;if(p=p.compare,p=p!==null?p:k,p(re,b)&&l.ref===d.ref)return il(l,d,T)}return d.flags|=1,l=Js(M,b),l.ref=d.ref,l.return=d,d.child=l}function BA(l,d,p,b,T){if(l!==null){var M=l.memoizedProps;if(k(M,b)&&l.ref===d.ref)if(va=!1,d.pendingProps=b=M,B1(l,T))(l.flags&131072)!==0&&(va=!0);else return d.lanes=l.lanes,il(l,d,T)}return j1(l,d,p,b,T)}function zA(l,d,p){var b=d.pendingProps,T=b.children,M=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((d.flags&128)!==0){if(b=M!==null?M.baseLanes|p:p,l!==null){for(T=d.child=l.child,M=0;T!==null;)M=M|T.lanes|T.childLanes,T=T.sibling;d.childLanes=M&~b}else d.childLanes=0,d.child=null;return UA(l,d,b,p)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&_g(d,M!==null?M.cachePool:null),M!==null?BC(d,M):f1(),TA(d);else return d.lanes=d.childLanes=536870912,UA(l,d,M!==null?M.baseLanes|p:p,p)}else M!==null?(_g(d,M.cachePool),BC(d,M),ou(),d.memoizedState=null):(l!==null&&_g(d,null),f1(),ou());return Oa(l,d,T,p),d.child}function UA(l,d,p,b){var T=o1();return T=T===null?null:{parent:ua._currentValue,pool:T},d.memoizedState={baseLanes:p,cachePool:T},l!==null&&_g(d,null),f1(),TA(d),l!==null&&ip(l,d,b,!0),null}function Lg(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function j1(l,d,p,b,T){return Ec(d),p=m1(l,d,p,b,void 0,T),b=g1(),l!==null&&!va?(y1(l,d,T),il(l,d,T)):(Qn&&b&&Jw(d),d.flags|=1,Oa(l,d,p,T),d.child)}function qA(l,d,p,b,T,M){return Ec(d),d.updateQueue=null,p=UC(d,b,p,T),zC(l),b=g1(),l!==null&&!va?(y1(l,d,M),il(l,d,M)):(Qn&&b&&Jw(d),d.flags|=1,Oa(l,d,p,M),d.child)}function HA(l,d,p,b,T){if(Ec(d),d.stateNode===null){var M=ls,re=p.contextType;typeof re=="object"&&re!==null&&(M=za(re)),M=new p(b,M),d.memoizedState=M.state!==null&&M.state!==void 0?M.state:null,M.updater=I1,d.stateNode=M,M._reactInternals=d,M=d.stateNode,M.props=b,M.state=d.memoizedState,M.refs={},l1(d),re=p.contextType,M.context=typeof re=="object"&&re!==null?za(re):ls,M.state=d.memoizedState,re=p.getDerivedStateFromProps,typeof re=="function"&&(N1(d,p,re,b),M.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof M.getSnapshotBeforeUpdate=="function"||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(re=M.state,typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount(),re!==M.state&&I1.enqueueReplaceState(M,M.state,null),fp(d,b,M,T),dp(),M.state=d.memoizedState),typeof M.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){M=d.stateNode;var xe=d.memoizedProps,ze=Ac(p,xe);M.props=ze;var ut=M.context,St=p.contextType;re=ls,typeof St=="object"&&St!==null&&(re=za(St));var At=p.getDerivedStateFromProps;St=typeof At=="function"||typeof M.getSnapshotBeforeUpdate=="function",xe=d.pendingProps!==xe,St||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(xe||ut!==re)&&NA(d,M,b,re),tu=!1;var pt=d.memoizedState;M.state=pt,fp(d,b,M,T),dp(),ut=d.memoizedState,xe||pt!==ut||tu?(typeof At=="function"&&(N1(d,p,At,b),ut=d.memoizedState),(ze=tu||RA(d,p,ze,b,pt,ut,re))?(St||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(d.flags|=4194308)):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ut),M.props=b,M.state=ut,M.context=re,b=ze):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{M=d.stateNode,u1(l,d),re=d.memoizedProps,St=Ac(p,re),M.props=St,At=d.pendingProps,pt=M.context,ut=p.contextType,ze=ls,typeof ut=="object"&&ut!==null&&(ze=za(ut)),xe=p.getDerivedStateFromProps,(ut=typeof xe=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(re!==At||pt!==ze)&&NA(d,M,b,ze),tu=!1,pt=d.memoizedState,M.state=pt,fp(d,b,M,T),dp();var mt=d.memoizedState;re!==At||pt!==mt||tu||l!==null&&l.dependencies!==null&&vg(l.dependencies)?(typeof xe=="function"&&(N1(d,p,xe,b),mt=d.memoizedState),(St=tu||RA(d,p,St,b,pt,mt,ze)||l!==null&&l.dependencies!==null&&vg(l.dependencies))?(ut||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(b,mt,ze),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(b,mt,ze)),typeof M.componentDidUpdate=="function"&&(d.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof M.componentDidUpdate!="function"||re===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=mt),M.props=b,M.state=mt,M.context=ze,b=St):(typeof M.componentDidUpdate!="function"||re===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||re===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),b=!1)}return M=b,Lg(l,d),b=(d.flags&128)!==0,M||b?(M=d.stateNode,p=b&&typeof p.getDerivedStateFromError!="function"?null:M.render(),d.flags|=1,l!==null&&b?(d.child=tf(d,l.child,null,T),d.child=tf(d,null,p,T)):Oa(l,d,p,T),d.memoizedState=M.state,l=d.child):l=il(l,d,T),l}function VA(l,d,p,b){return rp(),d.flags|=256,Oa(l,d,p,b),d.child}var D1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function M1(l){return{baseLanes:l,cachePool:OC()}}function P1(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=io),l}function GA(l,d,p){var b=d.pendingProps,T=!1,M=(d.flags&128)!==0,re;if((re=M)||(re=l!==null&&l.memoizedState===null?!1:(ca.current&2)!==0),re&&(T=!0,d.flags&=-129),re=(d.flags&32)!==0,d.flags&=-33,l===null){if(Qn){if(T?iu(d):ou(),Qn){var xe=qr,ze;if(ze=xe){e:{for(ze=xe,xe=us;ze.nodeType!==8;){if(!xe){xe=null;break e}if(ze=Co(ze.nextSibling),ze===null){xe=null;break e}}xe=ze}xe!==null?(d.memoizedState={dehydrated:xe,treeContext:vc!==null?{id:Qs,overflow:el}:null,retryLane:536870912,hydrationErrors:null},ze=ji(18,null,null,0),ze.stateNode=xe,ze.return=d,d.child=ze,ii=d,qr=null,ze=!0):ze=!1}ze||xc(d)}if(xe=d.memoizedState,xe!==null&&(xe=xe.dehydrated,xe!==null))return v_(xe)?d.lanes=32:d.lanes=536870912,null;al(d)}return xe=b.children,b=b.fallback,T?(ou(),T=d.mode,xe=$g({mode:"hidden",children:xe},T),b=bc(b,T,p,null),xe.return=d,b.return=d,xe.sibling=b,d.child=xe,T=d.child,T.memoizedState=M1(p),T.childLanes=P1(l,re,p),d.memoizedState=D1,b):(iu(d),F1(d,xe))}if(ze=l.memoizedState,ze!==null&&(xe=ze.dehydrated,xe!==null)){if(M)d.flags&256?(iu(d),d.flags&=-257,d=L1(l,d,p)):d.memoizedState!==null?(ou(),d.child=l.child,d.flags|=128,d=null):(ou(),T=b.fallback,xe=d.mode,b=$g({mode:"visible",children:b.children},xe),T=bc(T,xe,p,null),T.flags|=2,b.return=d,T.return=d,b.sibling=T,d.child=b,tf(d,l.child,null,p),b=d.child,b.memoizedState=M1(p),b.childLanes=P1(l,re,p),d.memoizedState=D1,d=T);else if(iu(d),v_(xe)){if(re=xe.nextSibling&&xe.nextSibling.dataset,re)var ut=re.dgst;re=ut,b=Error(r(419)),b.stack="",b.digest=re,ap({value:b,source:null,stack:null}),d=L1(l,d,p)}else if(va||ip(l,d,p,!1),re=(p&l.childLanes)!==0,va||re){if(re=Cr,re!==null&&(b=p&-p,b=(b&42)!==0?1:It(b),b=(b&(re.suspendedLanes|p))!==0?0:b,b!==0&&b!==ze.retryLane))throw ze.retryLane=b,Eo(l,b),Li(re,l,b),FA;xe.data==="$?"||n_(),d=L1(l,d,p)}else xe.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ze.treeContext,qr=Co(xe.nextSibling),ii=d,Qn=!0,_c=null,us=!1,l!==null&&(no[ro++]=Qs,no[ro++]=el,no[ro++]=vc,Qs=l.id,el=l.overflow,vc=d),d=F1(d,b.children),d.flags|=4096);return d}return T?(ou(),T=b.fallback,xe=d.mode,ze=l.child,ut=ze.sibling,b=Js(ze,{mode:"hidden",children:b.children}),b.subtreeFlags=ze.subtreeFlags&65011712,ut!==null?T=Js(ut,T):(T=bc(T,xe,p,null),T.flags|=2),T.return=d,b.return=d,b.sibling=T,d.child=b,b=T,T=d.child,xe=l.child.memoizedState,xe===null?xe=M1(p):(ze=xe.cachePool,ze!==null?(ut=ua._currentValue,ze=ze.parent!==ut?{parent:ut,pool:ut}:ze):ze=OC(),xe={baseLanes:xe.baseLanes|p,cachePool:ze}),T.memoizedState=xe,T.childLanes=P1(l,re,p),d.memoizedState=D1,b):(iu(d),p=l.child,l=p.sibling,p=Js(p,{mode:"visible",children:b.children}),p.return=d,p.sibling=null,l!==null&&(re=d.deletions,re===null?(d.deletions=[l],d.flags|=16):re.push(l)),d.child=p,d.memoizedState=null,p)}function F1(l,d){return d=$g({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function $g(l,d){return l=ji(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function L1(l,d,p){return tf(d,l.child,null,p),l=F1(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function WA(l,d,p){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),n1(l.return,d,p)}function $1(l,d,p,b,T){var M=l.memoizedState;M===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:T}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=b,M.tail=p,M.tailMode=T)}function KA(l,d,p){var b=d.pendingProps,T=b.revealOrder,M=b.tail;if(Oa(l,d,b.children,p),b=ca.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&WA(l,p,d);else if(l.tag===19)WA(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(be(ca,b),T){case"forwards":for(p=d.child,T=null;p!==null;)l=p.alternate,l!==null&&Mg(l)===null&&(T=p),p=p.sibling;p=T,p===null?(T=d.child,d.child=null):(T=p.sibling,p.sibling=null),$1(d,!1,T,p,M);break;case"backwards":for(p=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&Mg(l)===null){d.child=T;break}l=T.sibling,T.sibling=p,p=T,T=l}$1(d,!0,p,null,M);break;case"together":$1(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function il(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),du|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(ip(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=Js(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=Js(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function B1(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&vg(l)))}function D9(l,d,p){switch(d.tag){case 3:Oe(d,d.stateNode.containerInfo),eu(d,ua,l.memoizedState.cache),rp();break;case 27:case 5:$e(d);break;case 4:Oe(d,d.stateNode.containerInfo);break;case 10:eu(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(iu(d),d.flags|=128,null):(p&d.child.childLanes)!==0?GA(l,d,p):(iu(d),l=il(l,d,p),l!==null?l.sibling:null);iu(d);break;case 19:var T=(l.flags&128)!==0;if(b=(p&d.childLanes)!==0,b||(ip(l,d,p,!1),b=(p&d.childLanes)!==0),T){if(b)return KA(l,d,p);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),be(ca,ca.current),b)break;return null;case 22:case 23:return d.lanes=0,zA(l,d,p);case 24:eu(d,ua,l.memoizedState.cache)}return il(l,d,p)}function ZA(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)va=!0;else{if(!B1(l,p)&&(d.flags&128)===0)return va=!1,D9(l,d,p);va=(l.flags&131072)!==0}else va=!1,Qn&&(d.flags&1048576)!==0&&kC(d,bg,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var b=d.elementType,T=b._init;if(b=T(b._payload),d.type=b,typeof b=="function")Zw(b)?(l=Ac(b,l),d.tag=1,d=HA(null,d,b,l,p)):(d.tag=0,d=j1(null,d,b,l,p));else{if(b!=null){if(T=b.$$typeof,T===C){d.tag=11,d=LA(null,d,b,l,p);break e}else if(T===j){d.tag=14,d=$A(null,d,b,l,p);break e}}throw d=F(b)||b,Error(r(306,d,""))}}return d;case 0:return j1(l,d,d.type,d.pendingProps,p);case 1:return b=d.type,T=Ac(b,d.pendingProps),HA(l,d,b,T,p);case 3:e:{if(Oe(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var M=d.memoizedState;T=M.element,u1(l,d),fp(d,b,null,p);var re=d.memoizedState;if(b=re.cache,eu(d,ua,b),b!==M.cache&&r1(d,[ua],p,!0),dp(),b=re.element,M.isDehydrated)if(M={element:b,isDehydrated:!1,cache:re.cache},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){d=VA(l,d,b,p);break e}else if(b!==T){T=un(Error(r(424)),d),ap(T),d=VA(l,d,b,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(qr=Co(l.firstChild),ii=d,Qn=!0,_c=null,us=!0,p=AA(d,null,b,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(rp(),b===T){d=il(l,d,p);break e}Oa(l,d,b,p)}d=d.child}return d;case 26:return Lg(l,d),l===null?(p=QT(d.type,null,d.pendingProps,null))?d.memoizedState=p:Qn||(p=d.type,l=d.pendingProps,b=Qg(Me.current).createElement(p),b[he]=d,b[Te]=l,Da(b,p,l),Mn(b),d.stateNode=b):d.memoizedState=QT(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return $e(d),l===null&&Qn&&(b=d.stateNode=YT(d.type,d.pendingProps,Me.current),ii=d,us=!0,T=qr,mu(d.type)?(w_=T,qr=Co(b.firstChild)):qr=T),Oa(l,d,d.pendingProps.children,p),Lg(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Qn&&((T=b=qr)&&(b=l$(b,d.type,d.pendingProps,us),b!==null?(d.stateNode=b,ii=d,qr=Co(b.firstChild),us=!1,T=!0):T=!1),T||xc(d)),$e(d),T=d.type,M=d.pendingProps,re=l!==null?l.memoizedProps:null,b=M.children,g_(T,M)?b=null:re!==null&&g_(T,re)&&(d.flags|=32),d.memoizedState!==null&&(T=m1(l,d,C9,null,null,p),Dp._currentValue=T),Lg(l,d),Oa(l,d,b,p),d.child;case 6:return l===null&&Qn&&((l=p=qr)&&(p=u$(p,d.pendingProps,us),p!==null?(d.stateNode=p,ii=d,qr=null,l=!0):l=!1),l||xc(d)),null;case 13:return GA(l,d,p);case 4:return Oe(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=tf(d,null,b,p):Oa(l,d,b,p),d.child;case 11:return LA(l,d,d.type,d.pendingProps,p);case 7:return Oa(l,d,d.pendingProps,p),d.child;case 8:return Oa(l,d,d.pendingProps.children,p),d.child;case 12:return Oa(l,d,d.pendingProps.children,p),d.child;case 10:return b=d.pendingProps,eu(d,d.type,b.value),Oa(l,d,b.children,p),d.child;case 9:return T=d.type._context,b=d.pendingProps.children,Ec(d),T=za(T),b=b(T),d.flags|=1,Oa(l,d,b,p),d.child;case 14:return $A(l,d,d.type,d.pendingProps,p);case 15:return BA(l,d,d.type,d.pendingProps,p);case 19:return KA(l,d,p);case 31:return b=d.pendingProps,p=d.mode,b={mode:b.mode,children:b.children},l===null?(p=$g(b,p),p.ref=d.ref,d.child=p,p.return=d,d=p):(p=Js(l.child,b),p.ref=d.ref,d.child=p,p.return=d,d=p),d;case 22:return zA(l,d,p);case 24:return Ec(d),b=za(ua),l===null?(T=o1(),T===null&&(T=Cr,M=a1(),T.pooledCache=M,M.refCount++,M!==null&&(T.pooledCacheLanes|=p),T=M),d.memoizedState={parent:b,cache:T},l1(d),eu(d,ua,T)):((l.lanes&p)!==0&&(u1(l,d),fp(d,null,null,p),dp()),T=l.memoizedState,M=d.memoizedState,T.parent!==b?(T={parent:b,cache:b},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),eu(d,ua,b)):(b=M.cache,eu(d,ua,b),b!==T.cache&&r1(d,[ua],p,!0))),Oa(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function ol(l){l.flags|=4}function YA(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!a3(d)){if(d=ao.current,d!==null&&((Gn&4194048)===Gn?cs!==null:(Gn&62914560)!==Gn&&(Gn&536870912)===0||d!==cs))throw up=s1,jC;l.flags|=8192}}function Bg(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?D():536870912,l.lanes|=d,of|=d)}function vp(l,d){if(!Qn)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function $r(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,b=0;if(d)for(var T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags&65011712,b|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=b,l.childLanes=p,d}function M9(l,d,p){var b=d.pendingProps;switch(Qw(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $r(d),null;case 1:return $r(d),null;case 3:return p=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),nl(ua),Ae(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(np(d)?ol(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,TC())),$r(d),null;case 26:return p=d.memoizedState,l===null?(ol(d),p!==null?($r(d),YA(d,p)):($r(d),d.flags&=-16777217)):p?p!==l.memoizedState?(ol(d),$r(d),YA(d,p)):($r(d),d.flags&=-16777217):(l.memoizedProps!==b&&ol(d),$r(d),d.flags&=-16777217),null;case 27:qe(d),p=Me.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return $r(d),null}l=we.current,np(d)?CC(d):(l=YT(T,b,p),d.stateNode=l,ol(d))}return $r(d),null;case 5:if(qe(d),p=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return $r(d),null}if(l=we.current,np(d))CC(d);else{switch(T=Qg(Me.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?T.createElement("select",{is:b.is}):T.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?T.createElement(p,{is:b.is}):T.createElement(p)}}l[he]=d,l[Te]=b;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(Da(l,p,b),p){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&ol(d)}}return $r(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&ol(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=Me.current,np(d)){if(l=d.stateNode,p=d.memoizedProps,b=null,T=ii,T!==null)switch(T.tag){case 27:case 5:b=T.memoizedProps}l[he]=d,l=!!(l.nodeValue===p||b!==null&&b.suppressHydrationWarning===!0||qT(l.nodeValue,p)),l||xc(d)}else l=Qg(l).createTextNode(b),l[he]=d,d.stateNode=l}return $r(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=np(d),b!==null&&b.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[he]=d}else rp(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;$r(d),T=!1}else T=TC(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(al(d),d):(al(d),null)}if(al(d),(d.flags&128)!==0)return d.lanes=p,d;if(p=b!==null,l=l!==null&&l.memoizedState!==null,p){b=d.child,T=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(T=b.alternate.memoizedState.cachePool.pool);var M=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(M=b.memoizedState.cachePool.pool),M!==T&&(b.flags|=2048)}return p!==l&&p&&(d.child.flags|=8192),Bg(d,d.updateQueue),$r(d),null;case 4:return Ae(),l===null&&d_(d.stateNode.containerInfo),$r(d),null;case 10:return nl(d.type),$r(d),null;case 19:if(ae(ca),T=d.memoizedState,T===null)return $r(d),null;if(b=(d.flags&128)!==0,M=T.rendering,M===null)if(b)vp(T,!1);else{if(Hr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(M=Mg(l),M!==null){for(d.flags|=128,vp(T,!1),l=M.updateQueue,d.updateQueue=l,Bg(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)EC(p,l),p=p.sibling;return be(ca,ca.current&1|2),d.child}l=l.sibling}T.tail!==null&&ce()>qg&&(d.flags|=128,b=!0,vp(T,!1),d.lanes=4194304)}else{if(!b)if(l=Mg(M),l!==null){if(d.flags|=128,b=!0,l=l.updateQueue,d.updateQueue=l,Bg(d,l),vp(T,!0),T.tail===null&&T.tailMode==="hidden"&&!M.alternate&&!Qn)return $r(d),null}else 2*ce()-T.renderingStartTime>qg&&p!==536870912&&(d.flags|=128,b=!0,vp(T,!1),d.lanes=4194304);T.isBackwards?(M.sibling=d.child,d.child=M):(l=T.last,l!==null?l.sibling=M:d.child=M,T.last=M)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=ce(),d.sibling=null,l=ca.current,be(ca,b?l&1|2:l&1),d):($r(d),null);case 22:case 23:return al(d),h1(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(p&536870912)!==0&&(d.flags&128)===0&&($r(d),d.subtreeFlags&6&&(d.flags|=8192)):$r(d),p=d.updateQueue,p!==null&&Bg(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048),l!==null&&ae(kc),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),nl(ua),$r(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function P9(l,d){switch(Qw(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return nl(ua),Ae(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return qe(d),null;case 13:if(al(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));rp()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return ae(ca),null;case 4:return Ae(),null;case 10:return nl(d.type),null;case 22:case 23:return al(d),h1(),l!==null&&ae(kc),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return nl(ua),null;case 25:return null;default:return null}}function XA(l,d){switch(Qw(d),d.tag){case 3:nl(ua),Ae();break;case 26:case 27:case 5:qe(d);break;case 4:Ae();break;case 13:al(d);break;case 19:ae(ca);break;case 10:nl(d.type);break;case 22:case 23:al(d),h1(),l!==null&&ae(kc);break;case 24:nl(ua)}}function wp(l,d){try{var p=d.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var T=b.next;p=T;do{if((p.tag&l)===l){b=void 0;var M=p.create,re=p.inst;b=M(),re.destroy=b}p=p.next}while(p!==T)}}catch(xe){xr(d,d.return,xe)}}function su(l,d,p){try{var b=d.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var M=T.next;b=M;do{if((b.tag&l)===l){var re=b.inst,xe=re.destroy;if(xe!==void 0){re.destroy=void 0,T=d;var ze=p,ut=xe;try{ut()}catch(St){xr(T,ze,St)}}}b=b.next}while(b!==M)}}catch(St){xr(d,d.return,St)}}function JA(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{$C(d,p)}catch(b){xr(l,l.return,b)}}}function QA(l,d,p){p.props=Ac(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(b){xr(l,d,b)}}function _p(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof p=="function"?l.refCleanup=p(b):p.current=b}}catch(T){xr(l,d,T)}}function ds(l,d){var p=l.ref,b=l.refCleanup;if(p!==null)if(typeof b=="function")try{b()}catch(T){xr(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(T){xr(l,d,T)}else p.current=null}function eT(l){var d=l.type,p=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&b.focus();break e;case"img":p.src?b.src=p.src:p.srcSet&&(b.srcset=p.srcSet)}}catch(T){xr(l,l.return,T)}}function z1(l,d,p){try{var b=l.stateNode;r$(b,l.type,p,d),b[Te]=d}catch(T){xr(l,l.return,T)}}function tT(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&mu(l.type)||l.tag===4}function U1(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||tT(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&mu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function q1(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=Jg));else if(b!==4&&(b===27&&mu(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(q1(l,d,p),l=l.sibling;l!==null;)q1(l,d,p),l=l.sibling}function zg(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(b!==4&&(b===27&&mu(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(zg(l,d,p),l=l.sibling;l!==null;)zg(l,d,p),l=l.sibling}function nT(l){var d=l.stateNode,p=l.memoizedProps;try{for(var b=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);Da(d,b,p),d[he]=l,d[Te]=p}catch(M){xr(l,l.return,M)}}var sl=!1,Yr=!1,H1=!1,rT=typeof WeakSet=="function"?WeakSet:Set,wa=null;function F9(l,d){if(l=l.containerInfo,p_=iy,l=se(l),ve(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var T=b.anchorOffset,M=b.focusNode;b=b.focusOffset;try{p.nodeType,M.nodeType}catch{p=null;break e}var re=0,xe=-1,ze=-1,ut=0,St=0,At=l,pt=null;t:for(;;){for(var mt;At!==p||T!==0&&At.nodeType!==3||(xe=re+T),At!==M||b!==0&&At.nodeType!==3||(ze=re+b),At.nodeType===3&&(re+=At.nodeValue.length),(mt=At.firstChild)!==null;)pt=At,At=mt;for(;;){if(At===l)break t;if(pt===p&&++ut===T&&(xe=re),pt===M&&++St===b&&(ze=re),(mt=At.nextSibling)!==null)break;At=pt,pt=At.parentNode}At=mt}p=xe===-1||ze===-1?null:{start:xe,end:ze}}else p=null}p=p||{start:0,end:0}}else p=null;for(m_={focusedElem:l,selectionRange:p},iy=!1,wa=d;wa!==null;)if(d=wa,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,wa=l;else for(;wa!==null;){switch(d=wa,M=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&M!==null){l=void 0,p=d,T=M.memoizedProps,M=M.memoizedState,b=p.stateNode;try{var vn=Ac(p.type,T,p.elementType===p.type);l=b.getSnapshotBeforeUpdate(vn,M),b.__reactInternalSnapshotBeforeUpdate=l}catch(hn){xr(p,p.return,hn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)b_(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":b_(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,wa=l;break}wa=d.return}}function aT(l,d,p){var b=p.flags;switch(p.tag){case 0:case 11:case 15:lu(l,p),b&4&&wp(5,p);break;case 1:if(lu(l,p),b&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(re){xr(p,p.return,re)}else{var T=Ac(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(re){xr(p,p.return,re)}}b&64&&JA(p),b&512&&_p(p,p.return);break;case 3:if(lu(l,p),b&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{$C(l,d)}catch(re){xr(p,p.return,re)}}break;case 27:d===null&&b&4&&nT(p);case 26:case 5:lu(l,p),d===null&&b&4&&eT(p),b&512&&_p(p,p.return);break;case 12:lu(l,p);break;case 13:lu(l,p),b&4&&sT(l,p),b&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=G9.bind(null,p),c$(l,p))));break;case 22:if(b=p.memoizedState!==null||sl,!b){d=d!==null&&d.memoizedState!==null||Yr,T=sl;var M=Yr;sl=b,(Yr=d)&&!M?uu(l,p,(p.subtreeFlags&8772)!==0):lu(l,p),sl=T,Yr=M}break;case 30:break;default:lu(l,p)}}function iT(l){var d=l.alternate;d!==null&&(l.alternate=null,iT(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Zt(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Dr=null,bi=!1;function ll(l,d,p){for(p=p.child;p!==null;)oT(l,d,p),p=p.sibling}function oT(l,d,p){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(_t,p)}catch{}switch(p.tag){case 26:Yr||ds(p,d),ll(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Yr||ds(p,d);var b=Dr,T=bi;mu(p.type)&&(Dr=p.stateNode,bi=!1),ll(l,d,p),Np(p.stateNode),Dr=b,bi=T;break;case 5:Yr||ds(p,d);case 6:if(b=Dr,T=bi,Dr=null,ll(l,d,p),Dr=b,bi=T,Dr!==null)if(bi)try{(Dr.nodeType===9?Dr.body:Dr.nodeName==="HTML"?Dr.ownerDocument.body:Dr).removeChild(p.stateNode)}catch(M){xr(p,d,M)}else try{Dr.removeChild(p.stateNode)}catch(M){xr(p,d,M)}break;case 18:Dr!==null&&(bi?(l=Dr,KT(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Lp(l)):KT(Dr,p.stateNode));break;case 4:b=Dr,T=bi,Dr=p.stateNode.containerInfo,bi=!0,ll(l,d,p),Dr=b,bi=T;break;case 0:case 11:case 14:case 15:Yr||su(2,p,d),Yr||su(4,p,d),ll(l,d,p);break;case 1:Yr||(ds(p,d),b=p.stateNode,typeof b.componentWillUnmount=="function"&&QA(p,d,b)),ll(l,d,p);break;case 21:ll(l,d,p);break;case 22:Yr=(b=Yr)||p.memoizedState!==null,ll(l,d,p),Yr=b;break;default:ll(l,d,p)}}function sT(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Lp(l)}catch(p){xr(d,d.return,p)}}function L9(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new rT),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new rT),d;default:throw Error(r(435,l.tag))}}function V1(l,d){var p=L9(l);d.forEach(function(b){var T=W9.bind(null,l,b);p.has(b)||(p.add(b),b.then(T,T))})}function Di(l,d){var p=d.deletions;if(p!==null)for(var b=0;b<p.length;b++){var T=p[b],M=l,re=d,xe=re;e:for(;xe!==null;){switch(xe.tag){case 27:if(mu(xe.type)){Dr=xe.stateNode,bi=!1;break e}break;case 5:Dr=xe.stateNode,bi=!1;break e;case 3:case 4:Dr=xe.stateNode.containerInfo,bi=!0;break e}xe=xe.return}if(Dr===null)throw Error(r(160));oT(M,re,T),Dr=null,bi=!1,M=T.alternate,M!==null&&(M.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)lT(d,l),d=d.sibling}var ko=null;function lT(l,d){var p=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Di(d,l),Mi(l),b&4&&(su(3,l,l.return),wp(3,l),su(5,l,l.return));break;case 1:Di(d,l),Mi(l),b&512&&(Yr||p===null||ds(p,p.return)),b&64&&sl&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?b:p.concat(b))));break;case 26:var T=ko;if(Di(d,l),Mi(l),b&512&&(Yr||p===null||ds(p,p.return)),b&4){var M=p!==null?p.memoizedState:null;if(b=l.memoizedState,p===null)if(b===null)if(l.stateNode===null){e:{b=l.type,p=l.memoizedProps,T=T.ownerDocument||T;t:switch(b){case"title":M=T.getElementsByTagName("title")[0],(!M||M[Ot]||M[he]||M.namespaceURI==="http://www.w3.org/2000/svg"||M.hasAttribute("itemprop"))&&(M=T.createElement(b),T.head.insertBefore(M,T.querySelector("head > title"))),Da(M,b,p),M[he]=l,Mn(M),b=M;break e;case"link":var re=n3("link","href",T).get(b+(p.href||""));if(re){for(var xe=0;xe<re.length;xe++)if(M=re[xe],M.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&M.getAttribute("rel")===(p.rel==null?null:p.rel)&&M.getAttribute("title")===(p.title==null?null:p.title)&&M.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){re.splice(xe,1);break t}}M=T.createElement(b),Da(M,b,p),T.head.appendChild(M);break;case"meta":if(re=n3("meta","content",T).get(b+(p.content||""))){for(xe=0;xe<re.length;xe++)if(M=re[xe],M.getAttribute("content")===(p.content==null?null:""+p.content)&&M.getAttribute("name")===(p.name==null?null:p.name)&&M.getAttribute("property")===(p.property==null?null:p.property)&&M.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&M.getAttribute("charset")===(p.charSet==null?null:p.charSet)){re.splice(xe,1);break t}}M=T.createElement(b),Da(M,b,p),T.head.appendChild(M);break;default:throw Error(r(468,b))}M[he]=l,Mn(M),b=M}l.stateNode=b}else r3(T,l.type,l.stateNode);else l.stateNode=t3(T,b,l.memoizedProps);else M!==b?(M===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):M.count--,b===null?r3(T,l.type,l.stateNode):t3(T,b,l.memoizedProps)):b===null&&l.stateNode!==null&&z1(l,l.memoizedProps,p.memoizedProps)}break;case 27:Di(d,l),Mi(l),b&512&&(Yr||p===null||ds(p,p.return)),p!==null&&b&4&&z1(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Di(d,l),Mi(l),b&512&&(Yr||p===null||ds(p,p.return)),l.flags&32){T=l.stateNode;try{Hl(T,"")}catch(mt){xr(l,l.return,mt)}}b&4&&l.stateNode!=null&&(T=l.memoizedProps,z1(l,T,p!==null?p.memoizedProps:T)),b&1024&&(H1=!0);break;case 6:if(Di(d,l),Mi(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,p=l.stateNode;try{p.nodeValue=b}catch(mt){xr(l,l.return,mt)}}break;case 3:if(ny=null,T=ko,ko=ey(d.containerInfo),Di(d,l),ko=T,Mi(l),b&4&&p!==null&&p.memoizedState.isDehydrated)try{Lp(d.containerInfo)}catch(mt){xr(l,l.return,mt)}H1&&(H1=!1,uT(l));break;case 4:b=ko,ko=ey(l.stateNode.containerInfo),Di(d,l),Mi(l),ko=b;break;case 12:Di(d,l),Mi(l);break;case 13:Di(d,l),Mi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(X1=ce()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,V1(l,b)));break;case 22:T=l.memoizedState!==null;var ze=p!==null&&p.memoizedState!==null,ut=sl,St=Yr;if(sl=ut||T,Yr=St||ze,Di(d,l),Yr=St,sl=ut,Mi(l),b&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(p===null||ze||sl||Yr||Tc(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){ze=p=d;try{if(M=ze.stateNode,T)re=M.style,typeof re.setProperty=="function"?re.setProperty("display","none","important"):re.display="none";else{xe=ze.stateNode;var At=ze.memoizedProps.style,pt=At!=null&&At.hasOwnProperty("display")?At.display:null;xe.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(mt){xr(ze,ze.return,mt)}}}else if(d.tag===6){if(p===null){ze=d;try{ze.stateNode.nodeValue=T?"":ze.memoizedProps}catch(mt){xr(ze,ze.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(p=b.retryQueue,p!==null&&(b.retryQueue=null,V1(l,p))));break;case 19:Di(d,l),Mi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,V1(l,b)));break;case 30:break;case 21:break;default:Di(d,l),Mi(l)}}function Mi(l){var d=l.flags;if(d&2){try{for(var p,b=l.return;b!==null;){if(tT(b)){p=b;break}b=b.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var T=p.stateNode,M=U1(l);zg(l,M,T);break;case 5:var re=p.stateNode;p.flags&32&&(Hl(re,""),p.flags&=-33);var xe=U1(l);zg(l,xe,re);break;case 3:case 4:var ze=p.stateNode.containerInfo,ut=U1(l);q1(l,ut,ze);break;default:throw Error(r(161))}}catch(St){xr(l,l.return,St)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function uT(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;uT(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function lu(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)aT(l,d.alternate,d),d=d.sibling}function Tc(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:su(4,d,d.return),Tc(d);break;case 1:ds(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&QA(d,d.return,p),Tc(d);break;case 27:Np(d.stateNode);case 26:case 5:ds(d,d.return),Tc(d);break;case 22:d.memoizedState===null&&Tc(d);break;case 30:Tc(d);break;default:Tc(d)}l=l.sibling}}function uu(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,T=l,M=d,re=M.flags;switch(M.tag){case 0:case 11:case 15:uu(T,M,p),wp(4,M);break;case 1:if(uu(T,M,p),b=M,T=b.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ut){xr(b,b.return,ut)}if(b=M,T=b.updateQueue,T!==null){var xe=b.stateNode;try{var ze=T.shared.hiddenCallbacks;if(ze!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ze.length;T++)LC(ze[T],xe)}catch(ut){xr(b,b.return,ut)}}p&&re&64&&JA(M),_p(M,M.return);break;case 27:nT(M);case 26:case 5:uu(T,M,p),p&&b===null&&re&4&&eT(M),_p(M,M.return);break;case 12:uu(T,M,p);break;case 13:uu(T,M,p),p&&re&4&&sT(T,M);break;case 22:M.memoizedState===null&&uu(T,M,p),_p(M,M.return);break;case 30:break;default:uu(T,M,p)}d=d.sibling}}function G1(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&op(p))}function W1(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&op(l))}function fs(l,d,p,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)cT(l,d,p,b),d=d.sibling}function cT(l,d,p,b){var T=d.flags;switch(d.tag){case 0:case 11:case 15:fs(l,d,p,b),T&2048&&wp(9,d);break;case 1:fs(l,d,p,b);break;case 3:fs(l,d,p,b),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&op(l)));break;case 12:if(T&2048){fs(l,d,p,b),l=d.stateNode;try{var M=d.memoizedProps,re=M.id,xe=M.onPostCommit;typeof xe=="function"&&xe(re,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ze){xr(d,d.return,ze)}}else fs(l,d,p,b);break;case 13:fs(l,d,p,b);break;case 23:break;case 22:M=d.stateNode,re=d.alternate,d.memoizedState!==null?M._visibility&2?fs(l,d,p,b):xp(l,d):M._visibility&2?fs(l,d,p,b):(M._visibility|=2,nf(l,d,p,b,(d.subtreeFlags&10256)!==0)),T&2048&&G1(re,d);break;case 24:fs(l,d,p,b),T&2048&&W1(d.alternate,d);break;default:fs(l,d,p,b)}}function nf(l,d,p,b,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var M=l,re=d,xe=p,ze=b,ut=re.flags;switch(re.tag){case 0:case 11:case 15:nf(M,re,xe,ze,T),wp(8,re);break;case 23:break;case 22:var St=re.stateNode;re.memoizedState!==null?St._visibility&2?nf(M,re,xe,ze,T):xp(M,re):(St._visibility|=2,nf(M,re,xe,ze,T)),T&&ut&2048&&G1(re.alternate,re);break;case 24:nf(M,re,xe,ze,T),T&&ut&2048&&W1(re.alternate,re);break;default:nf(M,re,xe,ze,T)}d=d.sibling}}function xp(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,b=d,T=b.flags;switch(b.tag){case 22:xp(p,b),T&2048&&G1(b.alternate,b);break;case 24:xp(p,b),T&2048&&W1(b.alternate,b);break;default:xp(p,b)}d=d.sibling}}var Sp=8192;function rf(l){if(l.subtreeFlags&Sp)for(l=l.child;l!==null;)dT(l),l=l.sibling}function dT(l){switch(l.tag){case 26:rf(l),l.flags&Sp&&l.memoizedState!==null&&S$(ko,l.memoizedState,l.memoizedProps);break;case 5:rf(l);break;case 3:case 4:var d=ko;ko=ey(l.stateNode.containerInfo),rf(l),ko=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=Sp,Sp=16777216,rf(l),Sp=d):rf(l));break;default:rf(l)}}function fT(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Ep(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];wa=b,pT(b,l)}fT(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)hT(l),l=l.sibling}function hT(l){switch(l.tag){case 0:case 11:case 15:Ep(l),l.flags&2048&&su(9,l,l.return);break;case 3:Ep(l);break;case 12:Ep(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,Ug(l)):Ep(l);break;default:Ep(l)}}function Ug(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];wa=b,pT(b,l)}fT(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:su(8,d,d.return),Ug(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,Ug(d));break;default:Ug(d)}l=l.sibling}}function pT(l,d){for(;wa!==null;){var p=wa;switch(p.tag){case 0:case 11:case 15:su(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var b=p.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:op(p.memoizedState.cache)}if(b=p.child,b!==null)b.return=p,wa=b;else e:for(p=l;wa!==null;){b=wa;var T=b.sibling,M=b.return;if(iT(b),b===p){wa=null;break e}if(T!==null){T.return=M,wa=T;break e}wa=M}}}var $9={getCacheForType:function(l){var d=za(ua),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p}},B9=typeof WeakMap=="function"?WeakMap:Map,sr=0,Cr=null,qn=null,Gn=0,lr=0,Pi=null,cu=!1,af=!1,K1=!1,ul=0,Hr=0,du=0,Rc=0,Z1=0,io=0,of=0,kp=null,vi=null,Y1=!1,X1=0,qg=1/0,Hg=null,fu=null,ja=0,hu=null,sf=null,lf=0,J1=0,Q1=null,mT=null,Cp=0,e_=null;function Fi(){if((sr&2)!==0&&Gn!==0)return Gn&-Gn;if(le.T!==null){var l=Kd;return l!==0?l:s_()}return q()}function gT(){io===0&&(io=(Gn&536870912)===0||Qn?vt():536870912);var l=ao.current;return l!==null&&(l.flags|=32),io}function Li(l,d,p){(l===Cr&&(lr===2||lr===9)||l.cancelPendingCommit!==null)&&(uf(l,0),pu(l,Gn,io,!1)),st(l,p),((sr&2)===0||l!==Cr)&&(l===Cr&&((sr&2)===0&&(Rc|=p),Hr===4&&pu(l,Gn,io,!1)),hs(l))}function yT(l,d,p){if((sr&6)!==0)throw Error(r(327));var b=!p&&(d&124)===0&&(d&l.expiredLanes)===0||oe(l,d),T=b?q9(l,d):r_(l,d,!0),M=b;do{if(T===0){af&&!b&&pu(l,d,0,!1);break}else{if(p=l.current.alternate,M&&!z9(p)){T=r_(l,d,!1),M=!1;continue}if(T===2){if(M=d,l.errorRecoveryDisabledLanes&M)var re=0;else re=l.pendingLanes&-536870913,re=re!==0?re:re&536870912?536870912:0;if(re!==0){d=re;e:{var xe=l;T=kp;var ze=xe.current.memoizedState.isDehydrated;if(ze&&(uf(xe,re).flags|=256),re=r_(xe,re,!1),re!==2){if(K1&&!ze){xe.errorRecoveryDisabledLanes|=M,Rc|=M,T=4;break e}M=vi,vi=T,M!==null&&(vi===null?vi=M:vi.push.apply(vi,M))}T=re}if(M=!1,T!==2)continue}}if(T===1){uf(l,0),pu(l,d,0,!0);break}e:{switch(b=l,M=T,M){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:pu(b,d,io,!cu);break e;case 2:vi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=X1+300-ce(),10<T)){if(pu(b,d,io,!cu),Ce(b,0,!0)!==0)break e;b.timeoutHandle=GT(bT.bind(null,b,p,vi,Hg,Y1,d,io,Rc,of,cu,M,2,-0,0),T);break e}bT(b,p,vi,Hg,Y1,d,io,Rc,of,cu,M,0,-0,0)}}break}while(!0);hs(l)}function bT(l,d,p,b,T,M,re,xe,ze,ut,St,At,pt,mt){if(l.timeoutHandle=-1,At=d.subtreeFlags,(At&8192||(At&16785408)===16785408)&&(jp={stylesheets:null,count:0,unsuspend:x$},dT(d),At=E$(),At!==null)){l.cancelPendingCommit=At(kT.bind(null,l,d,M,p,b,T,re,xe,ze,St,1,pt,mt)),pu(l,M,re,!ut);return}kT(l,d,M,p,b,T,re,xe,ze)}function z9(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var b=0;b<p.length;b++){var T=p[b],M=T.getSnapshot;T=T.value;try{if(!Ba(M(),T))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function pu(l,d,p,b){d&=~Z1,d&=~Rc,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var T=d;0<T;){var M=31-Kt(T),re=1<<M;b[M]=-1,T&=~re}p!==0&&je(l,p,d)}function Vg(){return(sr&6)===0?(Ap(0),!1):!0}function t_(){if(qn!==null){if(lr===0)var l=qn.return;else l=qn,tl=Sc=null,b1(l),ef=null,yp=0,l=qn;for(;l!==null;)XA(l.alternate,l),l=l.return;qn=null}}function uf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,i$(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),t_(),Cr=l,qn=p=Js(l.current,null),Gn=d,lr=0,Pi=null,cu=!1,af=oe(l,d),K1=!1,of=io=Z1=Rc=du=Hr=0,vi=kp=null,Y1=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var T=31-Kt(b),M=1<<T;d|=l[T],b&=~M}return ul=d,bn(),p}function vT(l,d){Ln=null,le.H=Og,d===lp||d===xg?(d=PC(),lr=3):d===jC?(d=PC(),lr=4):lr=d===FA?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Pi=d,qn===null&&(Hr=1,Fg(l,un(d,l.current)))}function wT(){var l=le.H;return le.H=Og,l===null?Og:l}function _T(){var l=le.A;return le.A=$9,l}function n_(){Hr=4,cu||(Gn&4194048)!==Gn&&ao.current!==null||(af=!0),(du&134217727)===0&&(Rc&134217727)===0||Cr===null||pu(Cr,Gn,io,!1)}function r_(l,d,p){var b=sr;sr|=2;var T=wT(),M=_T();(Cr!==l||Gn!==d)&&(Hg=null,uf(l,d)),d=!1;var re=Hr;e:do try{if(lr!==0&&qn!==null){var xe=qn,ze=Pi;switch(lr){case 8:t_(),re=6;break e;case 3:case 2:case 9:case 6:ao.current===null&&(d=!0);var ut=lr;if(lr=0,Pi=null,cf(l,xe,ze,ut),p&&af){re=0;break e}break;default:ut=lr,lr=0,Pi=null,cf(l,xe,ze,ut)}}U9(),re=Hr;break}catch(St){vT(l,St)}while(!0);return d&&l.shellSuspendCounter++,tl=Sc=null,sr=b,le.H=T,le.A=M,qn===null&&(Cr=null,Gn=0,bn()),re}function U9(){for(;qn!==null;)xT(qn)}function q9(l,d){var p=sr;sr|=2;var b=wT(),T=_T();Cr!==l||Gn!==d?(Hg=null,qg=ce()+500,uf(l,d)):af=oe(l,d);e:do try{if(lr!==0&&qn!==null){d=qn;var M=Pi;t:switch(lr){case 1:lr=0,Pi=null,cf(l,d,M,1);break;case 2:case 9:if(DC(M)){lr=0,Pi=null,ST(d);break}d=function(){lr!==2&&lr!==9||Cr!==l||(lr=7),hs(l)},M.then(d,d);break e;case 3:lr=7;break e;case 4:lr=5;break e;case 7:DC(M)?(lr=0,Pi=null,ST(d)):(lr=0,Pi=null,cf(l,d,M,7));break;case 5:var re=null;switch(qn.tag){case 26:re=qn.memoizedState;case 5:case 27:var xe=qn;if(!re||a3(re)){lr=0,Pi=null;var ze=xe.sibling;if(ze!==null)qn=ze;else{var ut=xe.return;ut!==null?(qn=ut,Gg(ut)):qn=null}break t}}lr=0,Pi=null,cf(l,d,M,5);break;case 6:lr=0,Pi=null,cf(l,d,M,6);break;case 8:t_(),Hr=6;break e;default:throw Error(r(462))}}H9();break}catch(St){vT(l,St)}while(!0);return tl=Sc=null,le.H=b,le.A=T,sr=p,qn!==null?0:(Cr=null,Gn=0,bn(),Hr)}function H9(){for(;qn!==null&&!Se();)xT(qn)}function xT(l){var d=ZA(l.alternate,l,ul);l.memoizedProps=l.pendingProps,d===null?Gg(l):qn=d}function ST(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=qA(p,d,d.pendingProps,d.type,void 0,Gn);break;case 11:d=qA(p,d,d.pendingProps,d.type.render,d.ref,Gn);break;case 5:b1(d);default:XA(p,d),d=qn=EC(d,ul),d=ZA(p,d,ul)}l.memoizedProps=l.pendingProps,d===null?Gg(l):qn=d}function cf(l,d,p,b){tl=Sc=null,b1(d),ef=null,yp=0;var T=d.return;try{if(j9(l,T,d,p,Gn)){Hr=1,Fg(l,un(p,l.current)),qn=null;return}}catch(M){if(T!==null)throw qn=T,M;Hr=1,Fg(l,un(p,l.current)),qn=null;return}d.flags&32768?(Qn||b===1?l=!0:af||(Gn&536870912)!==0?l=!1:(cu=l=!0,(b===2||b===9||b===3||b===6)&&(b=ao.current,b!==null&&b.tag===13&&(b.flags|=16384))),ET(d,l)):Gg(d)}function Gg(l){var d=l;do{if((d.flags&32768)!==0){ET(d,cu);return}l=d.return;var p=M9(d.alternate,d,ul);if(p!==null){qn=p;return}if(d=d.sibling,d!==null){qn=d;return}qn=d=l}while(d!==null);Hr===0&&(Hr=5)}function ET(l,d){do{var p=P9(l.alternate,l);if(p!==null){p.flags&=32767,qn=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){qn=l;return}qn=l=p}while(l!==null);Hr=6,qn=null}function kT(l,d,p,b,T,M,re,xe,ze){l.cancelPendingCommit=null;do Wg();while(ja!==0);if((sr&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(M=d.lanes|d.childLanes,M|=Ia,ge(l,p,M,re,xe,ze),l===Cr&&(qn=Cr=null,Gn=0),sf=d,hu=l,lf=p,J1=M,Q1=T,mT=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,K9(De,function(){return NT(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=le.T,le.T=null,T=ne.p,ne.p=2,re=sr,sr|=4;try{F9(l,d,p)}finally{sr=re,ne.p=T,le.T=b}}ja=1,CT(),AT(),TT()}}function CT(){if(ja===1){ja=0;var l=hu,d=sf,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=le.T,le.T=null;var b=ne.p;ne.p=2;var T=sr;sr|=4;try{lT(d,l);var M=m_,re=se(l.containerInfo),xe=M.focusedElem,ze=M.selectionRange;if(re!==xe&&xe&&xe.ownerDocument&&ee(xe.ownerDocument.documentElement,xe)){if(ze!==null&&ve(xe)){var ut=ze.start,St=ze.end;if(St===void 0&&(St=ut),"selectionStart"in xe)xe.selectionStart=ut,xe.selectionEnd=Math.min(St,xe.value.length);else{var At=xe.ownerDocument||document,pt=At&&At.defaultView||window;if(pt.getSelection){var mt=pt.getSelection(),vn=xe.textContent.length,hn=Math.min(ze.start,vn),yr=ze.end===void 0?hn:Math.min(ze.end,vn);!mt.extend&&hn>yr&&(re=yr,yr=hn,hn=re);var nt=K(xe,hn),Ke=K(xe,yr);if(nt&&Ke&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==Ke.node||mt.focusOffset!==Ke.offset)){var lt=At.createRange();lt.setStart(nt.node,nt.offset),mt.removeAllRanges(),hn>yr?(mt.addRange(lt),mt.extend(Ke.node,Ke.offset)):(lt.setEnd(Ke.node,Ke.offset),mt.addRange(lt))}}}}for(At=[],mt=xe;mt=mt.parentNode;)mt.nodeType===1&&At.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<At.length;xe++){var kt=At[xe];kt.element.scrollLeft=kt.left,kt.element.scrollTop=kt.top}}iy=!!p_,m_=p_=null}finally{sr=T,ne.p=b,le.T=p}}l.current=d,ja=2}}function AT(){if(ja===2){ja=0;var l=hu,d=sf,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=le.T,le.T=null;var b=ne.p;ne.p=2;var T=sr;sr|=4;try{aT(l,d.alternate,d)}finally{sr=T,ne.p=b,le.T=p}}ja=3}}function TT(){if(ja===4||ja===3){ja=0,ke();var l=hu,d=sf,p=lf,b=mT;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ja=5:(ja=0,sf=hu=null,RT(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(fu=null),me(p),d=d.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(_t,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=le.T,T=ne.p,ne.p=2,le.T=null;try{for(var M=l.onRecoverableError,re=0;re<b.length;re++){var xe=b[re];M(xe.value,{componentStack:xe.stack})}}finally{le.T=d,ne.p=T}}(lf&3)!==0&&Wg(),hs(l),T=l.pendingLanes,(p&4194090)!==0&&(T&42)!==0?l===e_?Cp++:(Cp=0,e_=l):Cp=0,Ap(0)}}function RT(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,op(d)))}function Wg(l){return CT(),AT(),TT(),NT()}function NT(){if(ja!==5)return!1;var l=hu,d=J1;J1=0;var p=me(lf),b=le.T,T=ne.p;try{ne.p=32>p?32:p,le.T=null,p=Q1,Q1=null;var M=hu,re=lf;if(ja=0,sf=hu=null,lf=0,(sr&6)!==0)throw Error(r(331));var xe=sr;if(sr|=4,hT(M.current),cT(M,M.current,re,p),sr=xe,Ap(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(_t,M)}catch{}return!0}finally{ne.p=T,le.T=b,RT(l,d)}}function IT(l,d,p){d=un(p,d),d=O1(l.stateNode,d,2),l=ru(l,d,2),l!==null&&(st(l,2),hs(l))}function xr(l,d,p){if(l.tag===3)IT(l,l,p);else for(;d!==null;){if(d.tag===3){IT(d,l,p);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(fu===null||!fu.has(b))){l=un(p,l),p=MA(2),b=ru(d,p,2),b!==null&&(PA(p,b,d,l),st(b,2),hs(b));break}}d=d.return}}function a_(l,d,p){var b=l.pingCache;if(b===null){b=l.pingCache=new B9;var T=new Set;b.set(d,T)}else T=b.get(d),T===void 0&&(T=new Set,b.set(d,T));T.has(p)||(K1=!0,T.add(p),l=V9.bind(null,l,d,p),d.then(l,l))}function V9(l,d,p){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Cr===l&&(Gn&p)===p&&(Hr===4||Hr===3&&(Gn&62914560)===Gn&&300>ce()-X1?(sr&2)===0&&uf(l,0):Z1|=p,of===Gn&&(of=0)),hs(l)}function OT(l,d){d===0&&(d=D()),l=Eo(l,d),l!==null&&(st(l,d),hs(l))}function G9(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),OT(l,p)}function W9(l,d){var p=0;switch(l.tag){case 13:var b=l.stateNode,T=l.memoizedState;T!==null&&(p=T.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),OT(l,p)}function K9(l,d){return Ne(l,d)}var Kg=null,df=null,i_=!1,Zg=!1,o_=!1,Nc=0;function hs(l){l!==df&&l.next===null&&(df===null?Kg=df=l:df=df.next=l),Zg=!0,i_||(i_=!0,Y9())}function Ap(l,d){if(!o_&&Zg){o_=!0;do for(var p=!1,b=Kg;b!==null;){if(l!==0){var T=b.pendingLanes;if(T===0)var M=0;else{var re=b.suspendedLanes,xe=b.pingedLanes;M=(1<<31-Kt(42|l)+1)-1,M&=T&~(re&~xe),M=M&201326741?M&201326741|1:M?M|2:0}M!==0&&(p=!0,PT(b,M))}else M=Gn,M=Ce(b,b===Cr?M:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(M&3)===0||oe(b,M)||(p=!0,PT(b,M));b=b.next}while(p);o_=!1}}function Z9(){jT()}function jT(){Zg=i_=!1;var l=0;Nc!==0&&(a$()&&(l=Nc),Nc=0);for(var d=ce(),p=null,b=Kg;b!==null;){var T=b.next,M=DT(b,d);M===0?(b.next=null,p===null?Kg=T:p.next=T,T===null&&(df=p)):(p=b,(l!==0||(M&3)!==0)&&(Zg=!0)),b=T}Ap(l)}function DT(l,d){for(var p=l.suspendedLanes,b=l.pingedLanes,T=l.expirationTimes,M=l.pendingLanes&-62914561;0<M;){var re=31-Kt(M),xe=1<<re,ze=T[re];ze===-1?((xe&p)===0||(xe&b)!==0)&&(T[re]=ft(xe,d)):ze<=d&&(l.expiredLanes|=xe),M&=~xe}if(d=Cr,p=Gn,p=Ce(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,p===0||l===d&&(lr===2||lr===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&$(b),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||oe(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(b!==null&&$(b),me(p)){case 2:case 8:p=_e;break;case 32:p=De;break;case 268435456:p=Ze;break;default:p=De}return b=MT.bind(null,l),p=Ne(p,b),l.callbackPriority=d,l.callbackNode=p,d}return b!==null&&b!==null&&$(b),l.callbackPriority=2,l.callbackNode=null,2}function MT(l,d){if(ja!==0&&ja!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Wg()&&l.callbackNode!==p)return null;var b=Gn;return b=Ce(l,l===Cr?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(yT(l,b,d),DT(l,ce()),l.callbackNode!=null&&l.callbackNode===p?MT.bind(null,l):null)}function PT(l,d){if(Wg())return null;yT(l,d,!0)}function Y9(){o$(function(){(sr&6)!==0?Ne(Y,Z9):jT()})}function s_(){return Nc===0&&(Nc=vt()),Nc}function FT(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:qs(""+l)}function LT(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function X9(l,d,p,b,T){if(d==="submit"&&p&&p.stateNode===T){var M=FT((T[Te]||null).action),re=b.submitter;re&&(d=(d=re[Te]||null)?FT(d.formAction):re.getAttribute("formAction"),d!==null&&(M=d,re=null));var xe=new Nd("action","action",null,b,T);l.push({event:xe,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(Nc!==0){var ze=re?LT(T,re):new FormData(T);A1(p,{pending:!0,data:ze,method:T.method,action:M},null,ze)}}else typeof M=="function"&&(xe.preventDefault(),ze=re?LT(T,re):new FormData(T),A1(p,{pending:!0,data:ze,method:T.method,action:M},M,ze))},currentTarget:T}]})}}for(var l_=0;l_<Vt.length;l_++){var u_=Vt[l_],J9=u_.toLowerCase(),Q9=u_[0].toUpperCase()+u_.slice(1);Mt(J9,"on"+Q9)}Mt(dt,"onAnimationEnd"),Mt(yt,"onAnimationIteration"),Mt(bt,"onAnimationStart"),Mt("dblclick","onDoubleClick"),Mt("focusin","onFocus"),Mt("focusout","onBlur"),Mt(xt,"onTransitionRun"),Mt(Ft,"onTransitionStart"),Mt(qt,"onTransitionCancel"),Mt(Dt,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e$=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tp));function $T(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var b=l[p],T=b.event;b=b.listeners;e:{var M=void 0;if(d)for(var re=b.length-1;0<=re;re--){var xe=b[re],ze=xe.instance,ut=xe.currentTarget;if(xe=xe.listener,ze!==M&&T.isPropagationStopped())break e;M=xe,T.currentTarget=ut;try{M(T)}catch(St){Pg(St)}T.currentTarget=null,M=ze}else for(re=0;re<b.length;re++){if(xe=b[re],ze=xe.instance,ut=xe.currentTarget,xe=xe.listener,ze!==M&&T.isPropagationStopped())break e;M=xe,T.currentTarget=ut;try{M(T)}catch(St){Pg(St)}T.currentTarget=null,M=ze}}}}function Hn(l,d){var p=d[gt];p===void 0&&(p=d[gt]=new Set);var b=l+"__bubble";p.has(b)||(BT(d,l,2,!1),p.add(b))}function c_(l,d,p){var b=0;d&&(b|=4),BT(p,l,b,d)}var Yg="_reactListening"+Math.random().toString(36).slice(2);function d_(l){if(!l[Yg]){l[Yg]=!0,ti.forEach(function(p){p!=="selectionchange"&&(e$.has(p)||c_(p,!1,l),c_(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[Yg]||(d[Yg]=!0,c_("selectionchange",!1,d))}}function BT(l,d,p,b){switch(c3(d)){case 2:var T=A$;break;case 8:T=T$;break;default:T=k_}p=T.bind(null,d,p,l),T=void 0,!Uh||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),b?T!==void 0?l.addEventListener(d,p,{capture:!0,passive:T}):l.addEventListener(d,p,!0):T!==void 0?l.addEventListener(d,p,{passive:T}):l.addEventListener(d,p,!1)}function f_(l,d,p,b,T){var M=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var re=b.tag;if(re===3||re===4){var xe=b.stateNode.containerInfo;if(xe===T)break;if(re===4)for(re=b.return;re!==null;){var ze=re.tag;if((ze===3||ze===4)&&re.stateNode.containerInfo===T)return;re=re.return}for(;xe!==null;){if(re=En(xe),re===null)return;if(ze=re.tag,ze===5||ze===6||ze===26||ze===27){b=M=re;continue e}xe=xe.parentNode}}b=b.return}Gl(function(){var ut=M,St=Td(p),At=[];e:{var pt=Bt.get(l);if(pt!==void 0){var mt=Nd,vn=l;switch(l){case"keypress":if(Zl(p)===0)break e;case"keydown":case"keyup":mt=Ld;break;case"focusin":vn="focus",mt=Yl;break;case"focusout":vn="blur",mt=Yl;break;case"beforeblur":case"afterblur":mt=Yl;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=jd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=Zh;break;case dt:case yt:case bt:mt=og;break;case Dt:mt=Yh;break;case"scroll":case"scrollend":mt=Id;break;case"wheel":mt=Bd;break;case"copy":case"cut":case"paste":mt=Pd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=Kh;break;case"toggle":case"beforetoggle":mt=ug}var hn=(d&4)!==0,yr=!hn&&(l==="scroll"||l==="scrollend"),nt=hn?pt!==null?pt+"Capture":null:pt;hn=[];for(var Ke=ut,lt;Ke!==null;){var kt=Ke;if(lt=kt.stateNode,kt=kt.tag,kt!==5&&kt!==26&&kt!==27||lt===null||nt===null||(kt=Gs(Ke,nt),kt!=null&&hn.push(Rp(Ke,kt,lt))),yr)break;Ke=Ke.return}0<hn.length&&(pt=new mt(pt,vn,null,p,St),At.push({event:pt,listeners:hn}))}}if((d&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",pt&&p!==Ji&&(vn=p.relatedTarget||p.fromElement)&&(En(vn)||vn[Ve]))break e;if((mt||pt)&&(pt=St.window===St?St:(pt=St.ownerDocument)?pt.defaultView||pt.parentWindow:window,mt?(vn=p.relatedTarget||p.toElement,mt=ut,vn=vn?En(vn):null,vn!==null&&(yr=i(vn),hn=vn.tag,vn!==yr||hn!==5&&hn!==27&&hn!==6)&&(vn=null)):(mt=null,vn=ut),mt!==vn)){if(hn=jd,kt="onMouseLeave",nt="onMouseEnter",Ke="mouse",(l==="pointerout"||l==="pointerover")&&(hn=Kh,kt="onPointerLeave",nt="onPointerEnter",Ke="pointer"),yr=mt==null?pt:hr(mt),lt=vn==null?pt:hr(vn),pt=new hn(kt,Ke+"leave",mt,p,St),pt.target=yr,pt.relatedTarget=lt,kt=null,En(St)===ut&&(hn=new hn(nt,Ke+"enter",vn,p,St),hn.target=lt,hn.relatedTarget=yr,kt=hn),yr=kt,mt&&vn)t:{for(hn=mt,nt=vn,Ke=0,lt=hn;lt;lt=ff(lt))Ke++;for(lt=0,kt=nt;kt;kt=ff(kt))lt++;for(;0<Ke-lt;)hn=ff(hn),Ke--;for(;0<lt-Ke;)nt=ff(nt),lt--;for(;Ke--;){if(hn===nt||nt!==null&&hn===nt.alternate)break t;hn=ff(hn),nt=ff(nt)}hn=null}else hn=null;mt!==null&&zT(At,pt,mt,hn,!1),vn!==null&&yr!==null&&zT(At,yr,vn,hn,!0)}}e:{if(pt=ut?hr(ut):window,mt=pt.nodeName&&pt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&pt.type==="file")var Qt=yc;else if(qd(pt))if(eo)Qt=Ql;else{Qt=Xs;var Bn=mg}else mt=pt.nodeName,!mt||mt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?ut&&zh(ut.elementType)&&(Qt=yc):Qt=tp;if(Qt&&(Qt=Qt(l,ut))){ep(At,Qt,p,St);break e}Bn&&Bn(l,pt,ut),l==="focusout"&&ut&&pt.type==="number"&&ut.memoizedProps.value!=null&&Ul(pt,"number",pt.value)}switch(Bn=ut?hr(ut):window,l){case"focusin":(qd(Bn)||Bn.contentEditable==="true")&&(Le=Bn,We=ut,Ye=null);break;case"focusout":Ye=We=Le=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,He(At,p,St);break;case"selectionchange":if(Ie)break;case"keydown":case"keyup":He(At,p,St)}var on;if(mc)e:{switch(l){case"compositionstart":var gn="onCompositionStart";break e;case"compositionend":gn="onCompositionEnd";break e;case"compositionupdate":gn="onCompositionUpdate";break e}gn=void 0}else Ys?Qh(l,p)&&(gn="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(gn="onCompositionStart");gn&&(zd&&p.locale!=="ko"&&(Ys||gn!=="onCompositionStart"?gn==="onCompositionEnd"&&Ys&&(on=Kl()):(Qi=St,Rd="value"in Qi?Qi.value:Qi.textContent,Ys=!0)),Bn=Xg(ut,gn),0<Bn.length&&(gn=new Fd(gn,l,null,p,St),At.push({event:gn,listeners:Bn}),on?gn.data=on:(on=dg(p),on!==null&&(gn.data=on)))),(on=Gw?fg(l,p):Ww(l,p))&&(gn=Xg(ut,"onBeforeInput"),0<gn.length&&(Bn=new Fd("onBeforeInput","beforeinput",null,p,St),At.push({event:Bn,listeners:gn}),Bn.data=on)),X9(At,l,ut,p,St)}$T(At,d)})}function Rp(l,d,p){return{instance:l,listener:d,currentTarget:p}}function Xg(l,d){for(var p=d+"Capture",b=[];l!==null;){var T=l,M=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||M===null||(T=Gs(l,p),T!=null&&b.unshift(Rp(l,T,M)),T=Gs(l,d),T!=null&&b.push(Rp(l,T,M))),l.tag===3)return b;l=l.return}return[]}function ff(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function zT(l,d,p,b,T){for(var M=d._reactName,re=[];p!==null&&p!==b;){var xe=p,ze=xe.alternate,ut=xe.stateNode;if(xe=xe.tag,ze!==null&&ze===b)break;xe!==5&&xe!==26&&xe!==27||ut===null||(ze=ut,T?(ut=Gs(p,M),ut!=null&&re.unshift(Rp(p,ut,ze))):T||(ut=Gs(p,M),ut!=null&&re.push(Rp(p,ut,ze)))),p=p.return}re.length!==0&&l.push({event:d,listeners:re})}var t$=/\r\n?/g,n$=/\u0000|\uFFFD/g;function UT(l){return(typeof l=="string"?l:""+l).replace(t$,`
`).replace(n$,"")}function qT(l,d){return d=UT(d),UT(l)===d}function Jg(){}function gr(l,d,p,b,T,M){switch(p){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Hl(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Hl(l,""+b);break;case"className":Bs(l,"class",b);break;case"tabIndex":Bs(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Bs(l,p,b);break;case"style":rg(l,b,M);break;case"data":if(d!=="object"){Bs(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=qs(""+b),l.setAttribute(p,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof M=="function"&&(p==="formAction"?(d!=="input"&&gr(l,d,"name",T.name,T,null),gr(l,d,"formEncType",T.formEncType,T,null),gr(l,d,"formMethod",T.formMethod,T,null),gr(l,d,"formTarget",T.formTarget,T,null)):(gr(l,d,"encType",T.encType,T,null),gr(l,d,"method",T.method,T,null),gr(l,d,"target",T.target,T,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=qs(""+b),l.setAttribute(p,b);break;case"onClick":b!=null&&(l.onclick=Jg);break;case"onScroll":b!=null&&Hn("scroll",l);break;case"onScrollEnd":b!=null&&Hn("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}p=qs(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""+b):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":b===!0?l.setAttribute(p,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,b):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(p,b):l.removeAttribute(p);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(p):l.setAttribute(p,b);break;case"popover":Hn("beforetoggle",l),Hn("toggle",l),xo(l,"popover",b);break;case"xlinkActuate":Ii(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Ii(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Ii(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Ii(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Ii(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Ii(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Ii(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":xo(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ri.get(p)||p,xo(l,p,b))}}function h_(l,d,p,b,T,M){switch(p){case"style":rg(l,b,M);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof b=="string"?Hl(l,b):(typeof b=="number"||typeof b=="bigint")&&Hl(l,""+b);break;case"onScroll":b!=null&&Hn("scroll",l);break;case"onScrollEnd":b!=null&&Hn("scrollend",l);break;case"onClick":b!=null&&(l.onclick=Jg);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qo.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(T=p.endsWith("Capture"),d=p.slice(2,T?p.length-7:void 0),M=l[Te]||null,M=M!=null?M[p]:null,typeof M=="function"&&l.removeEventListener(d,M,T),typeof b=="function")){typeof M!="function"&&M!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,b,T);break e}p in l?l[p]=b:b===!0?l.setAttribute(p,""):xo(l,p,b)}}}function Da(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hn("error",l),Hn("load",l);var b=!1,T=!1,M;for(M in p)if(p.hasOwnProperty(M)){var re=p[M];if(re!=null)switch(M){case"src":b=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:gr(l,d,M,re,p,null)}}T&&gr(l,d,"srcSet",p.srcSet,p,null),b&&gr(l,d,"src",p.src,p,null);return;case"input":Hn("invalid",l);var xe=M=re=T=null,ze=null,ut=null;for(b in p)if(p.hasOwnProperty(b)){var St=p[b];if(St!=null)switch(b){case"name":T=St;break;case"type":re=St;break;case"checked":ze=St;break;case"defaultChecked":ut=St;break;case"value":M=St;break;case"defaultValue":xe=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(r(137,d));break;default:gr(l,d,b,St,p,null)}}$h(l,M,xe,ze,ut,re,T,!1),as(l);return;case"select":Hn("invalid",l),b=re=M=null;for(T in p)if(p.hasOwnProperty(T)&&(xe=p[T],xe!=null))switch(T){case"value":M=xe;break;case"defaultValue":re=xe;break;case"multiple":b=xe;default:gr(l,d,T,xe,p,null)}d=M,p=re,l.multiple=!!b,d!=null?Us(l,!!b,d,!1):p!=null&&Us(l,!!b,p,!0);return;case"textarea":Hn("invalid",l),M=T=b=null;for(re in p)if(p.hasOwnProperty(re)&&(xe=p[re],xe!=null))switch(re){case"value":b=xe;break;case"defaultValue":T=xe;break;case"children":M=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(r(91));break;default:gr(l,d,re,xe,p,null)}Bh(l,b,T,M),as(l);return;case"option":for(ze in p)if(p.hasOwnProperty(ze)&&(b=p[ze],b!=null))switch(ze){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:gr(l,d,ze,b,p,null)}return;case"dialog":Hn("beforetoggle",l),Hn("toggle",l),Hn("cancel",l),Hn("close",l);break;case"iframe":case"object":Hn("load",l);break;case"video":case"audio":for(b=0;b<Tp.length;b++)Hn(Tp[b],l);break;case"image":Hn("error",l),Hn("load",l);break;case"details":Hn("toggle",l);break;case"embed":case"source":case"link":Hn("error",l),Hn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in p)if(p.hasOwnProperty(ut)&&(b=p[ut],b!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:gr(l,d,ut,b,p,null)}return;default:if(zh(d)){for(St in p)p.hasOwnProperty(St)&&(b=p[St],b!==void 0&&h_(l,d,St,b,p,void 0));return}}for(xe in p)p.hasOwnProperty(xe)&&(b=p[xe],b!=null&&gr(l,d,xe,b,p,null))}function r$(l,d,p,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,M=null,re=null,xe=null,ze=null,ut=null,St=null;for(mt in p){var At=p[mt];if(p.hasOwnProperty(mt)&&At!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":ze=At;default:b.hasOwnProperty(mt)||gr(l,d,mt,null,b,At)}}for(var pt in b){var mt=b[pt];if(At=p[pt],b.hasOwnProperty(pt)&&(mt!=null||At!=null))switch(pt){case"type":M=mt;break;case"name":T=mt;break;case"checked":ut=mt;break;case"defaultChecked":St=mt;break;case"value":re=mt;break;case"defaultValue":xe=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,d));break;default:mt!==At&&gr(l,d,pt,mt,b,At)}}zl(l,re,xe,ze,ut,St,M,T);return;case"select":mt=re=xe=pt=null;for(M in p)if(ze=p[M],p.hasOwnProperty(M)&&ze!=null)switch(M){case"value":break;case"multiple":mt=ze;default:b.hasOwnProperty(M)||gr(l,d,M,null,b,ze)}for(T in b)if(M=b[T],ze=p[T],b.hasOwnProperty(T)&&(M!=null||ze!=null))switch(T){case"value":pt=M;break;case"defaultValue":xe=M;break;case"multiple":re=M;default:M!==ze&&gr(l,d,T,M,b,ze)}d=xe,p=re,b=mt,pt!=null?Us(l,!!p,pt,!1):!!b!=!!p&&(d!=null?Us(l,!!p,d,!0):Us(l,!!p,p?[]:"",!1));return;case"textarea":mt=pt=null;for(xe in p)if(T=p[xe],p.hasOwnProperty(xe)&&T!=null&&!b.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:gr(l,d,xe,null,b,T)}for(re in b)if(T=b[re],M=p[re],b.hasOwnProperty(re)&&(T!=null||M!=null))switch(re){case"value":pt=T;break;case"defaultValue":mt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==M&&gr(l,d,re,T,b,M)}ql(l,pt,mt);return;case"option":for(var vn in p)if(pt=p[vn],p.hasOwnProperty(vn)&&pt!=null&&!b.hasOwnProperty(vn))switch(vn){case"selected":l.selected=!1;break;default:gr(l,d,vn,null,b,pt)}for(ze in b)if(pt=b[ze],mt=p[ze],b.hasOwnProperty(ze)&&pt!==mt&&(pt!=null||mt!=null))switch(ze){case"selected":l.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:gr(l,d,ze,pt,b,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hn in p)pt=p[hn],p.hasOwnProperty(hn)&&pt!=null&&!b.hasOwnProperty(hn)&&gr(l,d,hn,null,b,pt);for(ut in b)if(pt=b[ut],mt=p[ut],b.hasOwnProperty(ut)&&pt!==mt&&(pt!=null||mt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,d));break;default:gr(l,d,ut,pt,b,mt)}return;default:if(zh(d)){for(var yr in p)pt=p[yr],p.hasOwnProperty(yr)&&pt!==void 0&&!b.hasOwnProperty(yr)&&h_(l,d,yr,void 0,b,pt);for(St in b)pt=b[St],mt=p[St],!b.hasOwnProperty(St)||pt===mt||pt===void 0&&mt===void 0||h_(l,d,St,pt,b,mt);return}}for(var nt in p)pt=p[nt],p.hasOwnProperty(nt)&&pt!=null&&!b.hasOwnProperty(nt)&&gr(l,d,nt,null,b,pt);for(At in b)pt=b[At],mt=p[At],!b.hasOwnProperty(At)||pt===mt||pt==null&&mt==null||gr(l,d,At,pt,b,mt)}var p_=null,m_=null;function Qg(l){return l.nodeType===9?l:l.ownerDocument}function HT(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VT(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function g_(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var y_=null;function a$(){var l=window.event;return l&&l.type==="popstate"?l===y_?!1:(y_=l,!0):(y_=null,!1)}var GT=typeof setTimeout=="function"?setTimeout:void 0,i$=typeof clearTimeout=="function"?clearTimeout:void 0,WT=typeof Promise=="function"?Promise:void 0,o$=typeof queueMicrotask=="function"?queueMicrotask:typeof WT<"u"?function(l){return WT.resolve(null).then(l).catch(s$)}:GT;function s$(l){setTimeout(function(){throw l})}function mu(l){return l==="head"}function KT(l,d){var p=d,b=0,T=0;do{var M=p.nextSibling;if(l.removeChild(p),M&&M.nodeType===8)if(p=M.data,p==="/$"){if(0<b&&8>b){p=b;var re=l.ownerDocument;if(p&1&&Np(re.documentElement),p&2&&Np(re.body),p&4)for(p=re.head,Np(p),re=p.firstChild;re;){var xe=re.nextSibling,ze=re.nodeName;re[Ot]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&re.rel.toLowerCase()==="stylesheet"||p.removeChild(re),re=xe}}if(T===0){l.removeChild(M),Lp(d);return}T--}else p==="$"||p==="$?"||p==="$!"?T++:b=p.charCodeAt(0)-48;else b=0;p=M}while(p);Lp(d)}function b_(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":b_(p),Zt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function l$(l,d,p,b){for(;l.nodeType===1;){var T=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Ot])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(M=l.getAttribute("rel"),M==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(M!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(M=l.getAttribute("src"),(M!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&M&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var M=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===M)return l}else return l;if(l=Co(l.nextSibling),l===null)break}return null}function u$(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Co(l.nextSibling),l===null))return null;return l}function v_(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function c$(l,d){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")d();else{var b=function(){d(),p.removeEventListener("DOMContentLoaded",b)};p.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Co(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var w_=null;function ZT(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}function YT(l,d,p){switch(d=Qg(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Np(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Zt(l)}var oo=new Map,XT=new Set;function ey(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var cl=ne.d;ne.d={f:d$,r:f$,D:h$,C:p$,L:m$,m:g$,X:b$,S:y$,M:v$};function d$(){var l=cl.f(),d=Vg();return l||d}function f$(l){var d=zn(l);d!==null&&d.tag===5&&d.type==="form"?yA(d):cl.r(l)}var hf=typeof document>"u"?null:document;function JT(l,d,p){var b=hf;if(b&&typeof d=="string"&&d){var T=La(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof p=="string"&&(T+='[crossorigin="'+p+'"]'),XT.has(T)||(XT.add(T),l={rel:l,crossOrigin:p,href:d},b.querySelector(T)===null&&(d=b.createElement("link"),Da(d,"link",l),Mn(d),b.head.appendChild(d)))}}function h$(l){cl.D(l),JT("dns-prefetch",l,null)}function p$(l,d){cl.C(l,d),JT("preconnect",l,d)}function m$(l,d,p){cl.L(l,d,p);var b=hf;if(b&&l&&d){var T='link[rel="preload"][as="'+La(d)+'"]';d==="image"&&p&&p.imageSrcSet?(T+='[imagesrcset="'+La(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(T+='[imagesizes="'+La(p.imageSizes)+'"]')):T+='[href="'+La(l)+'"]';var M=T;switch(d){case"style":M=pf(l);break;case"script":M=mf(l)}oo.has(M)||(l=f({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),oo.set(M,l),b.querySelector(T)!==null||d==="style"&&b.querySelector(Ip(M))||d==="script"&&b.querySelector(Op(M))||(d=b.createElement("link"),Da(d,"link",l),Mn(d),b.head.appendChild(d)))}}function g$(l,d){cl.m(l,d);var p=hf;if(p&&l){var b=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+La(b)+'"][href="'+La(l)+'"]',M=T;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":M=mf(l)}if(!oo.has(M)&&(l=f({rel:"modulepreload",href:l},d),oo.set(M,l),p.querySelector(T)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Op(M)))return}b=p.createElement("link"),Da(b,"link",l),Mn(b),p.head.appendChild(b)}}}function y$(l,d,p){cl.S(l,d,p);var b=hf;if(b&&l){var T=pr(b).hoistableStyles,M=pf(l);d=d||"default";var re=T.get(M);if(!re){var xe={loading:0,preload:null};if(re=b.querySelector(Ip(M)))xe.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},p),(p=oo.get(M))&&__(l,p);var ze=re=b.createElement("link");Mn(ze),Da(ze,"link",l),ze._p=new Promise(function(ut,St){ze.onload=ut,ze.onerror=St}),ze.addEventListener("load",function(){xe.loading|=1}),ze.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,ty(re,d,b)}re={type:"stylesheet",instance:re,count:1,state:xe},T.set(M,re)}}}function b$(l,d){cl.X(l,d);var p=hf;if(p&&l){var b=pr(p).hoistableScripts,T=mf(l),M=b.get(T);M||(M=p.querySelector(Op(T)),M||(l=f({src:l,async:!0},d),(d=oo.get(T))&&x_(l,d),M=p.createElement("script"),Mn(M),Da(M,"link",l),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},b.set(T,M))}}function v$(l,d){cl.M(l,d);var p=hf;if(p&&l){var b=pr(p).hoistableScripts,T=mf(l),M=b.get(T);M||(M=p.querySelector(Op(T)),M||(l=f({src:l,async:!0,type:"module"},d),(d=oo.get(T))&&x_(l,d),M=p.createElement("script"),Mn(M),Da(M,"link",l),p.head.appendChild(M)),M={type:"script",instance:M,count:1,state:null},b.set(T,M))}}function QT(l,d,p,b){var T=(T=Me.current)?ey(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=pf(p.href),p=pr(T).hoistableStyles,b=p.get(d),b||(b={type:"style",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=pf(p.href);var M=pr(T).hoistableStyles,re=M.get(l);if(re||(T=T.ownerDocument||T,re={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},M.set(l,re),(M=T.querySelector(Ip(l)))&&!M._p&&(re.instance=M,re.state.loading=5),oo.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},oo.set(l,p),M||w$(T,l,p,re.state))),d&&b===null)throw Error(r(528,""));return re}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=mf(p),p=pr(T).hoistableScripts,b=p.get(d),b||(b={type:"script",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function pf(l){return'href="'+La(l)+'"'}function Ip(l){return'link[rel="stylesheet"]['+l+"]"}function e3(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function w$(l,d,p,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),Da(d,"link",p),Mn(d),l.head.appendChild(d))}function mf(l){return'[src="'+La(l)+'"]'}function Op(l){return"script[async]"+l}function t3(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+La(p.href)+'"]');if(b)return d.instance=b,Mn(b),b;var T=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Mn(b),Da(b,"style",T),ty(b,p.precedence,l),d.instance=b;case"stylesheet":T=pf(p.href);var M=l.querySelector(Ip(T));if(M)return d.state.loading|=4,d.instance=M,Mn(M),M;b=e3(p),(T=oo.get(T))&&__(b,T),M=(l.ownerDocument||l).createElement("link"),Mn(M);var re=M;return re._p=new Promise(function(xe,ze){re.onload=xe,re.onerror=ze}),Da(M,"link",b),d.state.loading|=4,ty(M,p.precedence,l),d.instance=M;case"script":return M=mf(p.src),(T=l.querySelector(Op(M)))?(d.instance=T,Mn(T),T):(b=p,(T=oo.get(M))&&(b=f({},p),x_(b,T)),l=l.ownerDocument||l,T=l.createElement("script"),Mn(T),Da(T,"link",b),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,ty(b,p.precedence,l));return d.instance}function ty(l,d,p){for(var b=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=b.length?b[b.length-1]:null,M=T,re=0;re<b.length;re++){var xe=b[re];if(xe.dataset.precedence===d)M=xe;else if(M!==T)break}M?M.parentNode.insertBefore(l,M.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function __(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function x_(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var ny=null;function n3(l,d,p){if(ny===null){var b=new Map,T=ny=new Map;T.set(p,b)}else T=ny,b=T.get(p),b||(b=new Map,T.set(p,b));if(b.has(l))return b;for(b.set(l,null),p=p.getElementsByTagName(l),T=0;T<p.length;T++){var M=p[T];if(!(M[Ot]||M[he]||l==="link"&&M.getAttribute("rel")==="stylesheet")&&M.namespaceURI!=="http://www.w3.org/2000/svg"){var re=M.getAttribute(d)||"";re=l+re;var xe=b.get(re);xe?xe.push(M):b.set(re,[M])}}return b}function r3(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function _$(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function a3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var jp=null;function x$(){}function S$(l,d,p){if(jp===null)throw Error(r(475));var b=jp;if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=pf(p.href),M=l.querySelector(Ip(T));if(M){l=M._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=ry.bind(b),l.then(b,b)),d.state.loading|=4,d.instance=M,Mn(M);return}M=l.ownerDocument||l,p=e3(p),(T=oo.get(T))&&__(p,T),M=M.createElement("link"),Mn(M);var re=M;re._p=new Promise(function(xe,ze){re.onload=xe,re.onerror=ze}),Da(M,"link",p),d.instance=M}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=ry.bind(b),l.addEventListener("load",d),l.addEventListener("error",d))}}function E$(){if(jp===null)throw Error(r(475));var l=jp;return l.stylesheets&&l.count===0&&S_(l,l.stylesheets),0<l.count?function(d){var p=setTimeout(function(){if(l.stylesheets&&S_(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(p)}}:null}function ry(){if(this.count--,this.count===0){if(this.stylesheets)S_(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ay=null;function S_(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ay=new Map,d.forEach(k$,l),ay=null,ry.call(l))}function k$(l,d){if(!(d.state.loading&4)){var p=ay.get(l);if(p)var b=p.get(null);else{p=new Map,ay.set(l,p);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),M=0;M<T.length;M++){var re=T[M];(re.nodeName==="LINK"||re.getAttribute("media")!=="not all")&&(p.set(re.dataset.precedence,re),b=re)}b&&p.set(null,b)}T=d.instance,re=T.getAttribute("data-precedence"),M=p.get(re)||b,M===b&&p.set(null,T),p.set(re,T),this.count++,b=ry.bind(this),T.addEventListener("load",b),T.addEventListener("error",b),M?M.parentNode.insertBefore(T,M.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var Dp={$$typeof:E,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function C$(l,d,p,b,T,M,re,xe){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=b,this.onUncaughtError=T,this.onCaughtError=M,this.onRecoverableError=re,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function i3(l,d,p,b,T,M,re,xe,ze,ut,St,At){return l=new C$(l,d,p,re,xe,ze,ut,At),d=1,M===!0&&(d|=24),M=ji(3,null,null,d),l.current=M,M.stateNode=l,d=a1(),d.refCount++,l.pooledCache=d,d.refCount++,M.memoizedState={element:b,isDehydrated:p,cache:d},l1(M),l}function o3(l){return l?(l=ls,l):ls}function s3(l,d,p,b,T,M){T=o3(T),b.context===null?b.context=T:b.pendingContext=T,b=nu(d),b.payload={element:p},M=M===void 0?null:M,M!==null&&(b.callback=M),p=ru(l,b,d),p!==null&&(Li(p,l,d),cp(p,l,d))}function l3(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function E_(l,d){l3(l,d),(l=l.alternate)&&l3(l,d)}function u3(l){if(l.tag===13){var d=Eo(l,67108864);d!==null&&Li(d,l,67108864),E_(l,67108864)}}var iy=!0;function A$(l,d,p,b){var T=le.T;le.T=null;var M=ne.p;try{ne.p=2,k_(l,d,p,b)}finally{ne.p=M,le.T=T}}function T$(l,d,p,b){var T=le.T;le.T=null;var M=ne.p;try{ne.p=8,k_(l,d,p,b)}finally{ne.p=M,le.T=T}}function k_(l,d,p,b){if(iy){var T=C_(b);if(T===null)f_(l,d,b,oy,p),d3(l,b);else if(N$(T,l,d,p,b))b.stopPropagation();else if(d3(l,b),d&4&&-1<R$.indexOf(l)){for(;T!==null;){var M=zn(T);if(M!==null)switch(M.tag){case 3:if(M=M.stateNode,M.current.memoizedState.isDehydrated){var re=ye(M.pendingLanes);if(re!==0){var xe=M;for(xe.pendingLanes|=2,xe.entangledLanes|=2;re;){var ze=1<<31-Kt(re);xe.entanglements[1]|=ze,re&=~ze}hs(M),(sr&6)===0&&(qg=ce()+500,Ap(0))}}break;case 13:xe=Eo(M,2),xe!==null&&Li(xe,M,2),Vg(),E_(M,2)}if(M=C_(b),M===null&&f_(l,d,b,oy,p),M===T)break;T=M}T!==null&&b.stopPropagation()}else f_(l,d,b,null,p)}}function C_(l){return l=Td(l),A_(l)}var oy=null;function A_(l){if(oy=null,l=En(l),l!==null){var d=i(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return oy=l,null}function c3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case Y:return 2;case _e:return 8;case De:case Ee:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var T_=!1,gu=null,yu=null,bu=null,Mp=new Map,Pp=new Map,vu=[],R$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d3(l,d){switch(l){case"focusin":case"focusout":gu=null;break;case"dragenter":case"dragleave":yu=null;break;case"mouseover":case"mouseout":bu=null;break;case"pointerover":case"pointerout":Mp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pp.delete(d.pointerId)}}function Fp(l,d,p,b,T,M){return l===null||l.nativeEvent!==M?(l={blockedOn:d,domEventName:p,eventSystemFlags:b,nativeEvent:M,targetContainers:[T]},d!==null&&(d=zn(d),d!==null&&u3(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function N$(l,d,p,b,T){switch(d){case"focusin":return gu=Fp(gu,l,d,p,b,T),!0;case"dragenter":return yu=Fp(yu,l,d,p,b,T),!0;case"mouseover":return bu=Fp(bu,l,d,p,b,T),!0;case"pointerover":var M=T.pointerId;return Mp.set(M,Fp(Mp.get(M)||null,l,d,p,b,T)),!0;case"gotpointercapture":return M=T.pointerId,Pp.set(M,Fp(Pp.get(M)||null,l,d,p,b,T)),!0}return!1}function f3(l){var d=En(l.target);if(d!==null){var p=i(d);if(p!==null){if(d=p.tag,d===13){if(d=o(p),d!==null){l.blockedOn=d,z(l.priority,function(){if(p.tag===13){var b=Fi();b=It(b);var T=Eo(p,b);T!==null&&Li(T,p,b),E_(p,b)}});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function sy(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=C_(l.nativeEvent);if(p===null){p=l.nativeEvent;var b=new p.constructor(p.type,p);Ji=b,p.target.dispatchEvent(b),Ji=null}else return d=zn(p),d!==null&&u3(d),l.blockedOn=p,!1;d.shift()}return!0}function h3(l,d,p){sy(l)&&p.delete(d)}function I$(){T_=!1,gu!==null&&sy(gu)&&(gu=null),yu!==null&&sy(yu)&&(yu=null),bu!==null&&sy(bu)&&(bu=null),Mp.forEach(h3),Pp.forEach(h3)}function ly(l,d){l.blockedOn===d&&(l.blockedOn=null,T_||(T_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,I$)))}var uy=null;function p3(l){uy!==l&&(uy=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){uy===l&&(uy=null);for(var d=0;d<l.length;d+=3){var p=l[d],b=l[d+1],T=l[d+2];if(typeof b!="function"){if(A_(b||p)===null)continue;break}var M=zn(p);M!==null&&(l.splice(d,3),d-=3,A1(M,{pending:!0,data:T,method:p.method,action:b},b,T))}}))}function Lp(l){function d(ze){return ly(ze,l)}gu!==null&&ly(gu,l),yu!==null&&ly(yu,l),bu!==null&&ly(bu,l),Mp.forEach(d),Pp.forEach(d);for(var p=0;p<vu.length;p++){var b=vu[p];b.blockedOn===l&&(b.blockedOn=null)}for(;0<vu.length&&(p=vu[0],p.blockedOn===null);)f3(p),p.blockedOn===null&&vu.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(b=0;b<p.length;b+=3){var T=p[b],M=p[b+1],re=T[Te]||null;if(typeof M=="function")re||p3(p);else if(re){var xe=null;if(M&&M.hasAttribute("formAction")){if(T=M,re=M[Te]||null)xe=re.formAction;else if(A_(T)!==null)continue}else xe=re.action;typeof xe=="function"?p[b+1]=xe:(p.splice(b,3),b-=3),p3(p)}}}function R_(l){this._internalRoot=l}cy.prototype.render=R_.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,b=Fi();s3(p,b,l,d,null,null)},cy.prototype.unmount=R_.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;s3(l.current,2,null,l,null,null),Vg(),d[Ve]=null}};function cy(l){this._internalRoot=l}cy.prototype.unstable_scheduleHydration=function(l){if(l){var d=q();l={blockedOn:null,target:l,priority:d};for(var p=0;p<vu.length&&d!==0&&d<vu[p].priority;p++);vu.splice(p,0,l),p===0&&f3(l)}};var m3=t.version;if(m3!=="19.1.0")throw Error(r(527,m3,"19.1.0"));ne.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var O$={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:le,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dy.isDisabled&&dy.supportsFiber)try{_t=dy.inject(O$),Nt=dy}catch{}}return Bp.createRoot=function(l,d){if(!a(l))throw Error(r(299));var p=!1,b="",T=IA,M=OA,re=jA,xe=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(re=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(xe=d.unstable_transitionCallbacks)),d=i3(l,1,!1,null,null,p,b,T,M,re,xe,null),l[Ve]=d.current,d_(l),new R_(d)},Bp.hydrateRoot=function(l,d,p){if(!a(l))throw Error(r(299));var b=!1,T="",M=IA,re=OA,xe=jA,ze=null,ut=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onUncaughtError!==void 0&&(M=p.onUncaughtError),p.onCaughtError!==void 0&&(re=p.onCaughtError),p.onRecoverableError!==void 0&&(xe=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ze=p.unstable_transitionCallbacks),p.formState!==void 0&&(ut=p.formState)),d=i3(l,1,!0,d,p??null,b,T,M,re,xe,ze,ut),d.context=o3(null),p=d.current,b=Fi(),b=It(b),T=nu(b),T.callback=null,ru(p,T,b),p=b,d.current.lanes=p,st(d,p),hs(d),l[Ve]=d.current,d_(l),new cy(d)},Bp.version="19.1.0",Bp}var k3;function K$(){if(k3)return O_.exports;k3=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),O_.exports=W$(),O_.exports}var Z$=K$();const Y$=Qa(Z$);function C3(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function sE(...e){return t=>{let n=!1;const r=e.map(a=>{const i=C3(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():C3(e[a],null)}}}}function xn(...e){return B.useCallback(sE(...e),e)}function Iu(e){const t=J$(e),n=B.forwardRef((r,a)=>{const{children:i,...o}=r,s=B.Children.toArray(i),u=s.find(eB);if(u){const c=u.props.children,f=s.map(h=>h===u?B.Children.count(c)>1?B.Children.only(null):B.isValidElement(c)?c.props.children:null:h);return y.jsx(t,{...o,ref:a,children:B.isValidElement(c)?B.cloneElement(c,void 0,f):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var X$=Iu("Slot");function J$(e){const t=B.forwardRef((n,r)=>{const{children:a,...i}=n;if(B.isValidElement(a)){const o=nB(a),s=tB(i,a.props);return a.type!==B.Fragment&&(s.ref=r?sE(r,o):o),B.cloneElement(a,s)}return B.Children.count(a)>1?B.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var X4=Symbol("radix.slottable");function Q$(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=X4,t}function eB(e){return B.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===X4}function tB(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function nB(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function J4(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=J4(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Q4(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=J4(e))&&(r&&(r+=" "),r+=t);return r}const A3=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,T3=Q4,e6=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return T3(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const m=A3(f)||A3(h);return a[c][m]}),s=n&&Object.entries(n).reduce((c,f)=>{let[h,m]=f;return m===void 0||(c[h]=m),c},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(v=>{let[w,_]=v;return Array.isArray(_)?_.includes({...i,...s}[w]):{...i,...s}[w]===_})?[...c,h,m]:c},[]);return T3(e,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},lE="-",rB=e=>{const t=iB(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(lE);return s[0]===""&&s.length!==1&&s.shift(),t6(s,t)||aB(o)},getConflictingClassGroupIds:(o,s)=>{const u=n[o]||[];return s&&r[o]?[...u,...r[o]]:u}}},t6=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?t6(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(lE);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},R3=/^\[(.+)\]$/,aB=e=>{if(R3.test(e)){const t=R3.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},iB=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)HS(n[a],r,a,t);return r},HS=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:N3(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(oB(a)){HS(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{HS(o,N3(t,i),n,r)})})},N3=(e,t)=>{let n=e;return t.split(lE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},oB=e=>e.isThemeGetter,sB=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},VS="!",GS=":",lB=GS.length,uB=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,u=0,c;for(let v=0;v<a.length;v++){let w=a[v];if(o===0&&s===0){if(w===GS){i.push(a.slice(u,v)),u=v+lB;continue}if(w==="/"){c=v;continue}}w==="["?o++:w==="]"?o--:w==="("?s++:w===")"&&s--}const f=i.length===0?a:a.substring(u),h=cB(f),m=h!==f,g=c&&c>u?c-u:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+GS,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},cB=e=>e.endsWith(VS)?e.substring(0,e.length-1):e.startsWith(VS)?e.substring(1):e,dB=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},fB=e=>({cache:sB(e.cacheSize),parseClassName:uB(e),sortModifiers:dB(e),...rB(e)}),hB=/\s+/,pB=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(hB);let u="";for(let c=s.length-1;c>=0;c-=1){const f=s[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:w}=n(f);if(h){u=f+(u.length>0?" "+u:u);continue}let _=!!w,x=r(_?v.substring(0,w):v);if(!x){if(!_){u=f+(u.length>0?" "+u:u);continue}if(x=r(v),!x){u=f+(u.length>0?" "+u:u);continue}_=!1}const S=i(m).join(":"),E=g?S+VS:S,C=E+x;if(o.includes(C))continue;o.push(C);const A=a(x,_);for(let O=0;O<A.length;++O){const j=A[O];o.push(E+j)}u=f+(u.length>0?" "+u:u)}return u};function mB(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=n6(t))&&(r&&(r+=" "),r+=n);return r}const n6=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=n6(e[r]))&&(n&&(n+=" "),n+=t);return n};function gB(e,...t){let n,r,a,i=o;function o(u){const c=t.reduce((f,h)=>h(f),e());return n=fB(c),r=n.cache.get,a=n.cache.set,i=s,s(u)}function s(u){const c=r(u);if(c)return c;const f=pB(u,n);return a(u,f),f}return function(){return i(mB.apply(null,arguments))}}const da=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},r6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,a6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,yB=/^\d+\/\d+$/,bB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,_B=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,xB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gf=e=>yB.test(e),$n=e=>!!e&&!Number.isNaN(Number(e)),_u=e=>!!e&&Number.isInteger(Number(e)),P_=e=>e.endsWith("%")&&$n(e.slice(0,-1)),dl=e=>bB.test(e),SB=()=>!0,EB=e=>vB.test(e)&&!wB.test(e),i6=()=>!1,kB=e=>_B.test(e),CB=e=>xB.test(e),AB=e=>!en(e)&&!tn(e),TB=e=>dh(e,l6,i6),en=e=>r6.test(e),Ic=e=>dh(e,u6,EB),F_=e=>dh(e,jB,$n),I3=e=>dh(e,o6,i6),RB=e=>dh(e,s6,CB),fy=e=>dh(e,c6,kB),tn=e=>a6.test(e),zp=e=>fh(e,u6),NB=e=>fh(e,DB),O3=e=>fh(e,o6),IB=e=>fh(e,l6),OB=e=>fh(e,s6),hy=e=>fh(e,c6,!0),dh=(e,t,n)=>{const r=r6.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},fh=(e,t,n=!1)=>{const r=a6.exec(e);return r?r[1]?t(r[1]):n:!1},o6=e=>e==="position"||e==="percentage",s6=e=>e==="image"||e==="url",l6=e=>e==="length"||e==="size"||e==="bg-size",u6=e=>e==="length",jB=e=>e==="number",DB=e=>e==="family-name",c6=e=>e==="shadow",MB=()=>{const e=da("color"),t=da("font"),n=da("text"),r=da("font-weight"),a=da("tracking"),i=da("leading"),o=da("breakpoint"),s=da("container"),u=da("spacing"),c=da("radius"),f=da("shadow"),h=da("inset-shadow"),m=da("text-shadow"),g=da("drop-shadow"),v=da("blur"),w=da("perspective"),_=da("aspect"),x=da("ease"),S=da("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...C(),tn,en],O=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],N=()=>[tn,en,u],U=()=>[gf,"full","auto",...N()],V=()=>[_u,"none","subgrid",tn,en],J=()=>["auto",{span:["full",_u,tn,en]},_u,tn,en],P=()=>[_u,"auto",tn,en],Z=()=>["auto","min","max","fr",tn,en],F=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],le=()=>["auto",...N()],ne=()=>[gf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],Q=()=>[e,tn,en],te=()=>[...C(),O3,I3,{position:[tn,en]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",IB,TB,{size:[tn,en]}],ae=()=>[P_,zp,Ic],be=()=>["","none","full",c,tn,en],we=()=>["",$n,zp,Ic],fe=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[$n,P_,O3,I3],Oe=()=>["","none",v,tn,en],Ae=()=>["none",$n,tn,en],$e=()=>["none",$n,tn,en],qe=()=>[$n,tn,en],Fe=()=>[gf,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[dl],breakpoint:[dl],color:[SB],container:[dl],"drop-shadow":[dl],ease:["in","out","in-out"],font:[AB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[dl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[dl],shadow:[dl],spacing:["px",$n],text:[dl],"text-shadow":[dl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",gf,en,tn,_]}],container:["container"],columns:[{columns:[$n,en,tn,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:U()}],"inset-x":[{"inset-x":U()}],"inset-y":[{"inset-y":U()}],start:[{start:U()}],end:[{end:U()}],top:[{top:U()}],right:[{right:U()}],bottom:[{bottom:U()}],left:[{left:U()}],visibility:["visible","invisible","collapse"],z:[{z:[_u,"auto",tn,en]}],basis:[{basis:[gf,"full","auto",s,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$n,gf,"auto","initial","none",en]}],grow:[{grow:["",$n,tn,en]}],shrink:[{shrink:["",$n,tn,en]}],order:[{order:[_u,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:J()}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:J()}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...F(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...F()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":F()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:le()}],mx:[{mx:le()}],my:[{my:le()}],ms:[{ms:le()}],me:[{me:le()}],mt:[{mt:le()}],mr:[{mr:le()}],mb:[{mb:le()}],ml:[{ml:le()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[s,"screen",...ne()]}],"min-w":[{"min-w":[s,"screen","none",...ne()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...ne()]}],h:[{h:["screen",...ne()]}],"min-h":[{"min-h":["screen","none",...ne()]}],"max-h":[{"max-h":["screen",...ne()]}],"font-size":[{text:["base",n,zp,Ic]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tn,F_]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",P_,en]}],"font-family":[{font:[NB,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tn,en]}],"line-clamp":[{"line-clamp":[$n,"none",tn,F_]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...fe(),"wavy"]}],"text-decoration-thickness":[{decoration:[$n,"from-font","auto",tn,Ic]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[$n,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_u,tn,en],radial:["",tn,en],conic:[_u,tn,en]},OB,RB]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:ae()}],"gradient-via-pos":[{via:ae()}],"gradient-to-pos":[{to:ae()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:be()}],"rounded-s":[{"rounded-s":be()}],"rounded-e":[{"rounded-e":be()}],"rounded-t":[{"rounded-t":be()}],"rounded-r":[{"rounded-r":be()}],"rounded-b":[{"rounded-b":be()}],"rounded-l":[{"rounded-l":be()}],"rounded-ss":[{"rounded-ss":be()}],"rounded-se":[{"rounded-se":be()}],"rounded-ee":[{"rounded-ee":be()}],"rounded-es":[{"rounded-es":be()}],"rounded-tl":[{"rounded-tl":be()}],"rounded-tr":[{"rounded-tr":be()}],"rounded-br":[{"rounded-br":be()}],"rounded-bl":[{"rounded-bl":be()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...fe(),"hidden","none"]}],"divide-style":[{divide:[...fe(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...fe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$n,tn,en]}],"outline-w":[{outline:["",$n,zp,Ic]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",f,hy,fy]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",h,hy,fy]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[$n,Ic]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",m,hy,fy]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[$n,tn,en]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$n]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[$n]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:Oe()}],brightness:[{brightness:[$n,tn,en]}],contrast:[{contrast:[$n,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",g,hy,fy]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",$n,tn,en]}],"hue-rotate":[{"hue-rotate":[$n,tn,en]}],invert:[{invert:["",$n,tn,en]}],saturate:[{saturate:[$n,tn,en]}],sepia:[{sepia:["",$n,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":Oe()}],"backdrop-brightness":[{"backdrop-brightness":[$n,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[$n,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$n,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$n,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",$n,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[$n,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[$n,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",$n,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$n,"initial",tn,en]}],ease:[{ease:["linear","initial",x,tn,en]}],delay:[{delay:[$n,tn,en]}],animate:[{animate:["none",S,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,tn,en]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Ae()}],"rotate-x":[{"rotate-x":Ae()}],"rotate-y":[{"rotate-y":Ae()}],"rotate-z":[{"rotate-z":Ae()}],scale:[{scale:$e()}],"scale-x":[{"scale-x":$e()}],"scale-y":[{"scale-y":$e()}],"scale-z":[{"scale-z":$e()}],"scale-3d":["scale-3d"],skew:[{skew:qe()}],"skew-x":[{"skew-x":qe()}],"skew-y":[{"skew-y":qe()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Fe()}],"translate-x":[{"translate-x":Fe()}],"translate-y":[{"translate-y":Fe()}],"translate-z":[{"translate-z":Fe()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[$n,zp,Ic,F_]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},PB=gB(MB);function Ut(...e){return PB(Q4(e))}const FB=e6("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Lt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?X$:"button";return y.jsx(i,{"data-slot":"button",className:Ut(FB({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$B=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),j3=e=>{const t=$B(e);return t.charAt(0).toUpperCase()+t.slice(1)},d6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=B.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},u)=>B.createElement("svg",{ref:u,...BB,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:d6("lucide",a),...s},[...o.map(([c,f])=>B.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=(e,t)=>{const n=B.forwardRef(({className:r,...a},i)=>B.createElement(zB,{ref:i,iconNode:t,className:d6(`lucide-${LB(j3(e))}`,`lucide-${e}`,r),...a}));return n.displayName=j3(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],qB=cn("archive",UB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],od=cn("check",HB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],uE=cn("chevron-down",VB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],WB=cn("chevron-right",GB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZB=cn("chevron-up",KB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],f6=cn("chevrons-up-down",YB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Lf=cn("circle-alert",XB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],h6=cn("circle-check",JB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],ez=cn("clipboard",QB);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],p6=cn("cloud-upload",tz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],rz=cn("cog",nz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],ab=cn("download",az);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],oz=cn("file-archive",iz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],lz=cn("file-json",sz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],cz=cn("file-question",uz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fz=cn("file-text",dz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],pz=cn("file",hz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],gz=cn("folder-git",mz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yz=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],cE=cn("folder-plus",yz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],vz=cn("folder-up",bz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],s0=cn("folder",wz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],rm=cn("git-branch",_z);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],Sz=cn("git-commit-horizontal",xz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],kz=cn("git-merge",Ez);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cz=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],m6=cn("git-pull-request",Cz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],g6=cn("hard-drive",Az);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Rz=cn("house",Tz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Iz=cn("image",Nz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jz=cn("info",Oz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Mz=cn("key",Dz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Xn=cn("loader-circle",Pz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fz=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Lz=cn("message-square",Fz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $z=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Bz=cn("music",$z);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Uz=cn("panel-left-close",zz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Hz=cn("panel-right-close",qz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],y6=cn("paperclip",Vz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],dE=cn("pen",Gz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gv=cn("plus",Wz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kz=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yv=cn("refresh-cw",Kz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zz=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Yz=cn("rotate-ccw",Zz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fE=cn("save",Xz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],b6=cn("search",Jz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qz=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],e7=cn("send-horizontal",Qz);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],n7=cn("settings",t7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],a7=cn("sliders-horizontal",r7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],WS=cn("square-pen",i7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],s7=cn("square",o7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ou=cn("trash-2",l7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hE=cn("triangle-alert",u7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],d7=cn("upload",c7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],D3=cn("users",f7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],p7=cn("video",h7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],g7=cn("wrench",m7);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Yu=cn("x",y7),M3=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:Ut(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(wt.Fragment,{children:i},a.id):null})})},P3=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,a,s);return s},b7=e=>e?P3(e):P3,v7=e=>e;function w7(e,t=v7){const n=wt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return wt.useDebugValue(n),n}const F3=e=>{const t=b7(e),n=r=>w7(t,r);return Object.assign(n,t),n},Go=e=>e?F3(e):F3;var v6=Symbol.for("immer-nothing"),L3=Symbol.for("immer-draftable"),ar=Symbol.for("immer-state");function po(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var $f=Object.getPrototypeOf;function Bf(e){return!!e&&!!e[ar]}function Cl(e){var t;return e?w6(e)||Array.isArray(e)||!!e[L3]||!!((t=e.constructor)!=null&&t[L3])||vv(e)||wv(e):!1}var _7=Object.prototype.constructor.toString();function w6(e){if(!e||typeof e!="object")return!1;const t=$f(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===_7}function am(e,t){bv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function bv(e){const t=e[ar];return t?t.type_:Array.isArray(e)?1:vv(e)?2:wv(e)?3:0}function KS(e,t){return bv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _6(e,t,n){const r=bv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function x7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function vv(e){return e instanceof Map}function wv(e){return e instanceof Set}function Sa(e){return e.copy_||e.base_}function ZS(e,t){if(vv(e))return new Map(e);if(wv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=w6(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ar];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create($f(e),r)}else{const r=$f(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function pE(e,t=!1){return _v(e)||Bf(e)||!Cl(e)||(bv(e)>1&&(e.set=e.add=e.clear=e.delete=S7),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>pE(r,!0))),e}function S7(){po(2)}function _v(e){return Object.isFrozen(e)}var YS={};function Zc(e){const t=YS[e];return t||po(0,e),t}function E7(e,t){YS[e]||(YS[e]=t)}var im;function ib(){return im}function k7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $3(e,t){t&&(Zc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function XS(e){JS(e),e.drafts_.forEach(C7),e.drafts_=null}function JS(e){e===im&&(im=e.parent_)}function B3(e){return im=k7(im,e)}function C7(e){const t=e[ar];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function z3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ar].modified_&&(XS(t),po(4)),Cl(e)&&(e=ob(t,e),t.parent_||sb(t,e)),t.patches_&&Zc("Patches").generateReplacementPatches_(n[ar].base_,e,t.patches_,t.inversePatches_)):e=ob(t,n,[]),XS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==v6?e:void 0}function ob(e,t,n){if(_v(t))return t;const r=t[ar];if(!r)return am(t,(a,i)=>U3(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return sb(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),am(i,(s,u)=>U3(e,r,a,s,u,n,o)),sb(e,a,!1),n&&e.patches_&&Zc("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function U3(e,t,n,r,a,i,o){if(Bf(a)){const s=i&&t&&t.type_!==3&&!KS(t.assigned_,r)?i.concat(r):void 0,u=ob(e,a,s);if(_6(n,r,u),Bf(u))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(Cl(a)&&!_v(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ob(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&sb(e,a)}}function sb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&pE(t,n)}function A7(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ib(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=mE;n&&(a=[r],i=om);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var mE={get(e,t){if(t===ar)return e;const n=Sa(e);if(!KS(n,t))return T7(e,n,t);const r=n[t];return e.finalized_||!Cl(r)?r:r===L_(e.base_,t)?($_(e),e.copy_[t]=sm(r,e)):r},has(e,t){return t in Sa(e)},ownKeys(e){return Reflect.ownKeys(Sa(e))},set(e,t,n){const r=x6(Sa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=L_(Sa(e),t),i=a==null?void 0:a[ar];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(x7(n,a)&&(n!==void 0||KS(e.base_,t)))return!0;$_(e),ml(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return L_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,$_(e),ml(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Sa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){po(11)},getPrototypeOf(e){return $f(e.base_)},setPrototypeOf(){po(12)}},om={};am(mE,(e,t)=>{om[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});om.deleteProperty=function(e,t){return om.set.call(this,e,t,void 0)};om.set=function(e,t,n){return mE.set.call(this,e[0],t,n,e[0])};function L_(e,t){const n=e[ar];return(n?Sa(n):e)[t]}function T7(e,t,n){var a;const r=x6(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function x6(e,t){if(!(t in e))return;let n=$f(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=$f(n)}}function ml(e){e.modified_||(e.modified_=!0,e.parent_&&ml(e.parent_))}function $_(e){e.copy_||(e.copy_=ZS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var R7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(u=i,...c){return o.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&po(6),r!==void 0&&typeof r!="function"&&po(7);let a;if(Cl(t)){const i=B3(this),o=sm(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?XS(i):JS(i)}return $3(i,r),z3(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===v6&&(a=void 0),this.autoFreeze_&&pE(a,!0),r){const i=[],o=[];Zc("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else po(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,u=>t(u,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Cl(e)||po(8),Bf(e)&&(e=N7(e));const t=B3(this),n=sm(e,void 0);return n[ar].isManual_=!0,JS(t),n}finishDraft(e,t){const n=e&&e[ar];(!n||!n.isManual_)&&po(9);const{scope_:r}=n;return $3(r,t),z3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=Zc("Patches").applyPatches_;return Bf(e)?r(e,t):this.produce(e,a=>r(a,t))}};function sm(e,t){const n=vv(e)?Zc("MapSet").proxyMap_(e,t):wv(e)?Zc("MapSet").proxySet_(e,t):A7(e,t);return(t?t.scope_:ib()).drafts_.push(n),n}function N7(e){return Bf(e)||po(10,e),S6(e)}function S6(e){if(!Cl(e)||_v(e))return e;const t=e[ar];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ZS(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ZS(e,!0);return am(n,(r,a)=>{_6(n,r,S6(a))}),t&&(t.finalized_=!1),n}function I7(){class e extends Map{constructor(u,c){super(),this[ar]={type_:2,parent_:c,scope_:c?c.scope_:ib(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Sa(this[ar]).size}has(u){return Sa(this[ar]).has(u)}set(u,c){const f=this[ar];return o(f),(!Sa(f).has(u)||Sa(f).get(u)!==c)&&(n(f),ml(f),f.assigned_.set(u,!0),f.copy_.set(u,c),f.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[ar];return o(c),n(c),ml(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[ar];o(u),Sa(u).size&&(n(u),ml(u),u.assigned_=new Map,am(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const f=this[ar];Sa(f).forEach((h,m,g)=>{u.call(c,this.get(m),m,this)})}get(u){const c=this[ar];o(c);const f=Sa(c).get(u);if(c.finalized_||!Cl(f)||f!==c.base_.get(u))return f;const h=sm(f,c);return n(c),c.copy_.set(u,h),h}keys(){return Sa(this[ar]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const f=this.get(c.value);return{done:!1,value:[c.value,f]}}}}[Symbol.iterator](){return this.entries()}}function t(s,u){return new e(s,u)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(u,c){super(),this[ar]={type_:3,parent_:c,scope_:c?c.scope_:ib(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Sa(this[ar]).size}has(u){const c=this[ar];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[ar];return o(c),this.has(u)||(i(c),ml(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[ar];return o(c),i(c),ml(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[ar];o(u),Sa(u).size&&(i(u),ml(u),u.copy_.clear())}values(){const u=this[ar];return o(u),i(u),u.copy_.values()}entries(){const u=this[ar];return o(u),i(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const f=this.values();let h=f.next();for(;!h.done;)u.call(c,h.value,h.value,this),h=f.next()}}function a(s,u){return new r(s,u)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(u=>{if(Cl(u)){const c=sm(u,s);s.drafts_.set(u,c),s.copy_.add(c)}else s.copy_.add(u)}))}function o(s){s.revoked_&&po(3,JSON.stringify(Sa(s)))}E7("MapSet",{proxyMap_:t,proxySet_:a})}var Ki=new R7,O7=Ki.produce;Ki.produceWithPatches.bind(Ki);Ki.setAutoFreeze.bind(Ki);Ki.setUseStrictShallowCopy.bind(Ki);Ki.applyPatches.bind(Ki);Ki.createDraft.bind(Ki);Ki.finishDraft.bind(Ki);const j7=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?O7(a):a;return t(s,i,...o)},e(r.setState,n,r)),Wo=j7,Qr=Go(Wo((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((u,c)=>(u.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Wy={exports:{}},D7=Wy.exports,q3;function M7(){return q3||(q3=1,function(e,t){(function(n,r){e.exports=r()})(D7,function(){var n=function(k,I){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,ee){K.__proto__=ee}||function(K,ee){for(var se in ee)Object.prototype.hasOwnProperty.call(ee,se)&&(K[se]=ee[se])})(k,I)},r=function(){return(r=Object.assign||function(k){for(var I,K=1,ee=arguments.length;K<ee;K++)for(var se in I=arguments[K])Object.prototype.hasOwnProperty.call(I,se)&&(k[se]=I[se]);return k}).apply(this,arguments)};function a(k,I,K){for(var ee,se=0,ve=I.length;se<ve;se++)!ee&&se in I||((ee=ee||Array.prototype.slice.call(I,0,se))[se]=I[se]);return k.concat(ee||Array.prototype.slice.call(I))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:qc,o=Object.keys,s=Array.isArray;function u(k,I){return typeof I!="object"||o(I).forEach(function(K){k[K]=I[K]}),k}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(k,I){return f.call(k,I)}function m(k,I){typeof I=="function"&&(I=I(c(k))),(typeof Reflect>"u"?o:Reflect.ownKeys)(I).forEach(function(K){v(k,K,I[K])})}var g=Object.defineProperty;function v(k,I,K,ee){g(k,I,u(K&&h(K,"get")&&typeof K.get=="function"?{get:K.get,set:K.set,configurable:!0}:{value:K,configurable:!0,writable:!0},ee))}function w(k){return{from:function(I){return k.prototype=Object.create(I.prototype),v(k.prototype,"constructor",k),{extend:m.bind(null,k.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(k,I,K){return x.call(k,I,K)}function E(k,I){return I(k)}function C(k){if(!k)throw new Error("Assertion Failed")}function A(k){i.setImmediate?setImmediate(k):setTimeout(k,0)}function O(k,I){if(typeof I=="string"&&h(k,I))return k[I];if(!I)return k;if(typeof I!="string"){for(var K=[],ee=0,se=I.length;ee<se;++ee){var ve=O(k,I[ee]);K.push(ve)}return K}var Ie=I.indexOf(".");if(Ie!==-1){var Le=k[I.substr(0,Ie)];return Le==null?void 0:O(Le,I.substr(Ie+1))}}function j(k,I,K){if(k&&I!==void 0&&!("isFrozen"in Object&&Object.isFrozen(k)))if(typeof I!="string"&&"length"in I){C(typeof K!="string"&&"length"in K);for(var ee=0,se=I.length;ee<se;++ee)j(k,I[ee],K[ee])}else{var ve,Ie,Le=I.indexOf(".");Le!==-1?(ve=I.substr(0,Le),(Ie=I.substr(Le+1))===""?K===void 0?s(k)&&!isNaN(parseInt(ve))?k.splice(ve,1):delete k[ve]:k[ve]=K:j(Le=!(Le=k[ve])||!h(k,ve)?k[ve]={}:Le,Ie,K)):K===void 0?s(k)&&!isNaN(parseInt(I))?k.splice(I,1):delete k[I]:k[I]=K}}function N(k){var I,K={};for(I in k)h(k,I)&&(K[I]=k[I]);return K}var U=[].concat;function V(k){return U.apply([],k)}var _t="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(V([8,16,32,64].map(function(k){return["Int","Uint","Float"].map(function(I){return I+k+"Array"})}))).filter(function(k){return i[k]}),J=new Set(_t.map(function(k){return i[k]})),P=null;function Z(k){return P=new WeakMap,k=function I(K){if(!K||typeof K!="object")return K;var ee=P.get(K);if(ee)return ee;if(s(K)){ee=[],P.set(K,ee);for(var se=0,ve=K.length;se<ve;++se)ee.push(I(K[se]))}else if(J.has(K.constructor))ee=K;else{var Ie,Le=c(K);for(Ie in ee=Le===Object.prototype?{}:Object.create(Le),P.set(K,ee),K)h(K,Ie)&&(ee[Ie]=I(K[Ie]))}return ee}(k),P=null,k}var F={}.toString;function ue(k){return F.call(k).slice(8,-1)}var le=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof le=="symbol"?function(k){var I;return k!=null&&(I=k[le])&&I.apply(k)}:function(){return null};function Q(k,I){return I=k.indexOf(I),0<=I&&k.splice(I,1),0<=I}var te={};function G(k){var I,K,ee,se;if(arguments.length===1){if(s(k))return k.slice();if(this===te&&typeof k=="string")return[k];if(se=ne(k)){for(K=[];!(ee=se.next()).done;)K.push(ee.value);return K}if(k==null)return[k];if(typeof(I=k.length)!="number")return[k];for(K=new Array(I);I--;)K[I]=k[I];return K}for(I=arguments.length,K=new Array(I);I--;)K[I]=arguments[I];return K}var X=typeof Symbol<"u"?function(k){return k[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},at=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ai=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(at),ae={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function be(k,I){this.name=k,this.message=I}function we(k,I){return k+". Errors: "+Object.keys(I).map(function(K){return I[K].toString()}).filter(function(K,ee,se){return se.indexOf(K)===ee}).join(`
`)}function fe(k,I,K,ee){this.failures=I,this.failedKeys=ee,this.successCount=K,this.message=we(k,I)}function Me(k,I){this.name="BulkError",this.failures=Object.keys(I).map(function(K){return I[K]}),this.failuresByPos=I,this.message=we(k,this.failures)}w(be).from(Error).extend({toString:function(){return this.name+": "+this.message}}),w(fe).from(be),w(Me).from(be);var Pe=ai.reduce(function(k,I){return k[I]=I+"Error",k},{}),Oe=be,Ae=ai.reduce(function(k,I){var K=I+"Error";function ee(se,ve){this.name=K,se?typeof se=="string"?(this.message="".concat(se).concat(ve?`
 `+ve:""),this.inner=ve||null):typeof se=="object"&&(this.message="".concat(se.name," ").concat(se.message),this.inner=se):(this.message=ae[I]||K,this.inner=null)}return w(ee).from(Oe),k[I]=ee,k},{});Ae.Syntax=SyntaxError,Ae.Type=TypeError,Ae.Range=RangeError;var $e=at.reduce(function(k,I){return k[I+"Error"]=Ae[I],k},{}),qe=ai.reduce(function(k,I){return["Syntax","Type","Range"].indexOf(I)===-1&&(k[I+"Error"]=Ae[I]),k},{});function Fe(){}function Ne(k){return k}function $(k,I){return k==null||k===Ne?I:function(K){return I(k(K))}}function Se(k,I){return function(){k.apply(this,arguments),I.apply(this,arguments)}}function ke(k,I){return k===Fe?I:function(){var K=k.apply(this,arguments);K!==void 0&&(arguments[0]=K);var ee=this.onsuccess,se=this.onerror;this.onsuccess=null,this.onerror=null;var ve=I.apply(this,arguments);return ee&&(this.onsuccess=this.onsuccess?Se(ee,this.onsuccess):ee),se&&(this.onerror=this.onerror?Se(se,this.onerror):se),ve!==void 0?ve:K}}function ce(k,I){return k===Fe?I:function(){k.apply(this,arguments);var K=this.onsuccess,ee=this.onerror;this.onsuccess=this.onerror=null,I.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?Se(K,this.onsuccess):K),ee&&(this.onerror=this.onerror?Se(ee,this.onerror):ee)}}function ie(k,I){return k===Fe?I:function(K){var ee=k.apply(this,arguments);u(K,ee);var se=this.onsuccess,ve=this.onerror;return this.onsuccess=null,this.onerror=null,K=I.apply(this,arguments),se&&(this.onsuccess=this.onsuccess?Se(se,this.onsuccess):se),ve&&(this.onerror=this.onerror?Se(ve,this.onerror):ve),ee===void 0?K===void 0?void 0:K:u(ee,K)}}function Y(k,I){return k===Fe?I:function(){return I.apply(this,arguments)!==!1&&k.apply(this,arguments)}}function _e(k,I){return k===Fe?I:function(){var K=k.apply(this,arguments);if(K&&typeof K.then=="function"){for(var ee=this,se=arguments.length,ve=new Array(se);se--;)ve[se]=arguments[se];return K.then(function(){return I.apply(ee,ve)})}return I.apply(this,arguments)}}qe.ModifyError=fe,qe.DexieError=be,qe.BulkError=Me;var De=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ee(k){De=k}var Ze={},Et=100,_t=typeof Promise>"u"?[]:function(){var k=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[k,c(k),k];var I=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[I,c(I),k]}(),at=_t[0],ai=_t[1],_t=_t[2],ai=ai&&ai.then,Nt=at&&at.constructor,Rt=!!_t,Kt=function(k,I){oe.push([k,I]),R&&(queueMicrotask(me),R=!1)},pe=!0,R=!0,H=[],de=[],Re=Ne,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Fe,pgp:!1,env:{},finalize:Fe},Ce=ye,oe=[],ft=0,vt=[];function D(k){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var I=this._PSD=Ce;if(typeof k!="function"){if(k!==Ze)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++I.ref,function K(ee,se){try{se(function(ve){if(ee._state===null){if(ve===ee)throw new TypeError("A promise cannot be resolved with itself.");var Ie=ee._lib&&q();ve&&typeof ve.then=="function"?K(ee,function(Le,We){ve instanceof D?ve._then(Le,We):ve.then(Le,We)}):(ee._state=!0,ee._value=ve,je(ee)),Ie&&z()}},ge.bind(null,ee))}catch(ve){ge(ee,ve)}}(this,k)}var Be={get:function(){var k=Ce,I=Ct;function K(ee,se){var ve=this,Ie=!k.global&&(k!==Ce||I!==Ct),Le=Ie&&!zn(),We=new D(function(Ye,tt){Je(ve,new st(es(ee,k,Ie,Le),es(se,k,Ie,Le),Ye,tt,k))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return K.prototype=Ze,K},set:function(k){v(this,"then",k&&k.prototype===Ze?Be:{get:function(){return k},set:Be.set})}};function st(k,I,K,ee,se){this.onFulfilled=typeof k=="function"?k:null,this.onRejected=typeof I=="function"?I:null,this.resolve=K,this.reject=ee,this.psd=se}function ge(k,I){var K,ee;de.push(I),k._state===null&&(K=k._lib&&q(),I=Re(I),k._state=!1,k._value=I,ee=k,H.some(function(se){return se._value===ee._value})||H.push(ee),je(k),K&&z())}function je(k){var I=k._listeners;k._listeners=[];for(var K=0,ee=I.length;K<ee;++K)Je(k,I[K]);var se=k._PSD;--se.ref||se.finalize(),ft===0&&(++ft,Kt(function(){--ft==0&&W()},[]))}function Je(k,I){if(k._state!==null){var K=k._state?I.onFulfilled:I.onRejected;if(K===null)return(k._state?I.resolve:I.reject)(k._value);++I.psd.ref,++ft,Kt(It,[K,k,I])}else k._listeners.push(I)}function It(k,I,K){try{var ee,se=I._value;!I._state&&de.length&&(de=[]),ee=De&&I._consoleTask?I._consoleTask.run(function(){return k(se)}):k(se),I._state||de.indexOf(se)!==-1||function(ve){for(var Ie=H.length;Ie;)if(H[--Ie]._value===ve._value)return H.splice(Ie,1)}(I),K.resolve(ee)}catch(ve){K.reject(ve)}finally{--ft==0&&W(),--K.psd.ref||K.psd.finalize()}}function me(){Qo(ye,function(){q()&&z()})}function q(){var k=pe;return R=pe=!1,k}function z(){var k,I,K;do for(;0<oe.length;)for(k=oe,oe=[],K=k.length,I=0;I<K;++I){var ee=k[I];ee[0].apply(null,ee[1])}while(0<oe.length);R=pe=!0}function W(){var k=H;H=[],k.forEach(function(ee){ee._PSD.onunhandled.call(null,ee._value,ee)});for(var I=vt.slice(0),K=I.length;K;)I[--K]()}function he(k){return new D(Ze,!1,k)}function Te(k,I){var K=Ce;return function(){var ee=q(),se=Ce;try{return Mn(K,!0),k.apply(this,arguments)}catch(ve){I&&I(ve)}finally{Mn(se,!1),ee&&z()}}}m(D.prototype,{then:Be,_then:function(k,I){Je(this,new st(null,null,k,I,Ce))},catch:function(k){if(arguments.length===1)return this.then(null,k);var I=k,K=arguments[1];return typeof I=="function"?this.then(null,function(ee){return(ee instanceof I?K:he)(ee)}):this.then(null,function(ee){return(ee&&ee.name===I?K:he)(ee)})},finally:function(k){return this.then(function(I){return D.resolve(k()).then(function(){return I})},function(I){return D.resolve(k()).then(function(){return he(I)})})},timeout:function(k,I){var K=this;return k<1/0?new D(function(ee,se){var ve=setTimeout(function(){return se(new Ae.Timeout(I))},k);K.then(ee,se).finally(clearTimeout.bind(null,ve))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(D.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=ti(),m(D,{all:function(){var k=G.apply(null,arguments).map(hr);return new D(function(I,K){k.length===0&&I([]);var ee=k.length;k.forEach(function(se,ve){return D.resolve(se).then(function(Ie){k[ve]=Ie,--ee||I(k)},K)})})},resolve:function(k){return k instanceof D?k:k&&typeof k.then=="function"?new D(function(I,K){k.then(I,K)}):new D(Ze,!0,k)},reject:he,race:function(){var k=G.apply(null,arguments).map(hr);return new D(function(I,K){k.map(function(ee){return D.resolve(ee).then(I,K)})})},PSD:{get:function(){return Ce},set:function(k){return Ce=k}},totalEchoes:{get:function(){return Ct}},newPSD:Zt,usePSD:Qo,scheduler:{get:function(){return Kt},set:function(k){Kt=k}},rejectionMapper:{get:function(){return Re},set:function(k){Re=k}},follow:function(k,I){return new D(function(K,ee){return Zt(function(se,ve){var Ie=Ce;Ie.unhandleds=[],Ie.onunhandled=ve,Ie.finalize=Se(function(){var Le,We=this;Le=function(){We.unhandleds.length===0?se():ve(We.unhandleds[0])},vt.push(function Ye(){Le(),vt.splice(vt.indexOf(Ye),1)}),++ft,Kt(function(){--ft==0&&W()},[])},Ie.finalize),k()},I,K,ee)})}}),Nt&&(Nt.allSettled&&v(D,"allSettled",function(){var k=G.apply(null,arguments).map(hr);return new D(function(I){k.length===0&&I([]);var K=k.length,ee=new Array(K);k.forEach(function(se,ve){return D.resolve(se).then(function(Ie){return ee[ve]={status:"fulfilled",value:Ie}},function(Ie){return ee[ve]={status:"rejected",reason:Ie}}).then(function(){return--K||I(ee)})})})}),Nt.any&&typeof AggregateError<"u"&&v(D,"any",function(){var k=G.apply(null,arguments).map(hr);return new D(function(I,K){k.length===0&&K(new AggregateError([]));var ee=k.length,se=new Array(ee);k.forEach(function(ve,Ie){return D.resolve(ve).then(function(Le){return I(Le)},function(Le){se[Ie]=Le,--ee||K(new AggregateError(se))})})})}),Nt.withResolvers&&(D.withResolvers=Nt.withResolvers));var Ve={awaits:0,echoes:0,id:0},gt=0,Gt=[],ht=0,Ct=0,Ot=0;function Zt(k,I,K,ee){var se=Ce,ve=Object.create(se);return ve.parent=se,ve.ref=0,ve.global=!1,ve.id=++Ot,ye.env,ve.env=Rt?{Promise:D,PromiseProp:{value:D,configurable:!0,writable:!0},all:D.all,race:D.race,allSettled:D.allSettled,any:D.any,resolve:D.resolve,reject:D.reject}:{},I&&u(ve,I),++se.ref,ve.finalize=function(){--this.parent.ref||this.parent.finalize()},ee=Qo(ve,k,K,ee),ve.ref===0&&ve.finalize(),ee}function En(){return Ve.id||(Ve.id=++gt),++Ve.awaits,Ve.echoes+=Et,Ve.id}function zn(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=Ve.awaits*Et,!0)}function hr(k){return Ve.echoes&&k&&k.constructor===Nt?(En(),k.then(function(I){return zn(),I},function(I){return zn(),Lr(I)})):k}function pr(){var k=Gt[Gt.length-1];Gt.pop(),Mn(k,!1)}function Mn(k,I){var K,ee=Ce;(I?!Ve.echoes||ht++&&k===Ce:!ht||--ht&&k===Ce)||queueMicrotask(I?(function(se){++Ct,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.awaits=Ve.id=0),Gt.push(Ce),Mn(se,!0)}).bind(null,k):pr),k!==Ce&&(Ce=k,ee===ye&&(ye.env=ti()),Rt&&(K=ye.env.Promise,I=k.env,(ee.global||k.global)&&(Object.defineProperty(i,"Promise",I.PromiseProp),K.all=I.all,K.race=I.race,K.resolve=I.resolve,K.reject=I.reject,I.allSettled&&(K.allSettled=I.allSettled),I.any&&(K.any=I.any))))}function ti(){var k=i.Promise;return Rt?{Promise:k,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject}:{}}function Qo(k,I,K,ee,se){var ve=Ce;try{return Mn(k,!0),I(K,ee,se)}finally{Mn(ve,!1)}}function es(k,I,K,ee){return typeof k!="function"?k:function(){var se=Ce;K&&En(),Mn(I,!0);try{return k.apply(this,arguments)}finally{Mn(se,!1),ee&&queueMicrotask(zn)}}}function ts(k){Promise===Nt&&Ve.echoes===0?ht===0?k():enqueueNativeMicroTask(k):setTimeout(k,0)}(""+ai).indexOf("[native code]")===-1&&(En=zn=Fe);var Lr=D.reject,ns="￿",Xi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ng="String expected.",xo=[],Bs="__dbnames",Ii="readonly",cc="readwrite";function rs(k,I){return k?I?function(){return k.apply(this,arguments)&&I.apply(this,arguments)}:k:I}var zs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function $l(k){return typeof k!="string"||/\./.test(k)?function(I){return I}:function(I){return I[k]===void 0&&k in I&&delete(I=Z(I))[k],I}}function Cd(){throw Ae.Type()}function Un(k,I){try{var K=Ph(k),ee=Ph(I);if(K!==ee)return K==="Array"?1:ee==="Array"?-1:K==="binary"?1:ee==="binary"?-1:K==="string"?1:ee==="string"?-1:K==="Date"?1:ee!=="Date"?NaN:-1;switch(K){case"number":case"Date":case"string":return I<k?1:k<I?-1:0;case"binary":return function(se,ve){for(var Ie=se.length,Le=ve.length,We=Ie<Le?Ie:Le,Ye=0;Ye<We;++Ye)if(se[Ye]!==ve[Ye])return se[Ye]<ve[Ye]?-1:1;return Ie===Le?0:Ie<Le?-1:1}(ni(k),ni(I));case"Array":return function(se,ve){for(var Ie=se.length,Le=ve.length,We=Ie<Le?Ie:Le,Ye=0;Ye<We;++Ye){var tt=Un(se[Ye],ve[Ye]);if(tt!==0)return tt}return Ie===Le?0:Ie<Le?-1:1}(k,I)}}catch{}return NaN}function Ph(k){var I=typeof k;return I!="object"?I:ArrayBuffer.isView(k)?"binary":(k=ue(k),k==="ArrayBuffer"?"binary":k)}function ni(k){return k instanceof Uint8Array?k:ArrayBuffer.isView(k)?new Uint8Array(k.buffer,k.byteOffset,k.byteLength):new Uint8Array(k)}var Fh=(_r.prototype._trans=function(k,I,K){var ee=this._tx||Ce.trans,se=this.name,ve=De&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(k==="readonly"?"read":"write"," ").concat(this.name));function Ie(Ye,tt,He){if(!He.schema[se])throw new Ae.NotFound("Table "+se+" not part of transaction");return I(He.idbtrans,He)}var Le=q();try{var We=ee&&ee.db._novip===this.db._novip?ee===Ce.trans?ee._promise(k,Ie,K):Zt(function(){return ee._promise(k,Ie,K)},{trans:ee,transless:Ce.transless||Ce}):function Ye(tt,He,rt,Ge){if(tt.idbdb&&(tt._state.openComplete||Ce.letThrough||tt._vip)){var et=tt._createTransaction(He,rt,tt._dbSchema);try{et.create(),tt._state.PR1398_maxLoop=3}catch(it){return it.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,He,rt,Ge)})):Lr(it)}return et._promise(He,function(it,Xe){return Zt(function(){return Ce.trans=et,Ge(it,Xe,et)})}).then(function(it){if(He==="readwrite")try{et.idbtrans.commit()}catch{}return He==="readonly"?it:et._completion.then(function(){return it})})}if(tt._state.openComplete)return Lr(new Ae.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return Lr(new Ae.DatabaseClosed);tt.open().catch(Fe)}return tt._state.dbReadyPromise.then(function(){return Ye(tt,He,rt,Ge)})}(this.db,k,[this.name],Ie);return ve&&(We._consoleTask=ve,We=We.catch(function(Ye){return console.trace(Ye),Lr(Ye)})),We}finally{Le&&z()}},_r.prototype.get=function(k,I){var K=this;return k&&k.constructor===Object?this.where(k).first(I):k==null?Lr(new Ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ee){return K.core.get({trans:ee,key:k}).then(function(se){return K.hook.reading.fire(se)})}).then(I)},_r.prototype.where=function(k){if(typeof k=="string")return new this.db.WhereClause(this,k);if(s(k))return new this.db.WhereClause(this,"[".concat(k.join("+"),"]"));var I=o(k);if(I.length===1)return this.where(I[0]).equals(k[I[0]]);var K=this.schema.indexes.concat(this.schema.primKey).filter(function(Le){if(Le.compound&&I.every(function(Ye){return 0<=Le.keyPath.indexOf(Ye)})){for(var We=0;We<I.length;++We)if(I.indexOf(Le.keyPath[We])===-1)return!1;return!0}return!1}).sort(function(Le,We){return Le.keyPath.length-We.keyPath.length})[0];if(K&&this.db._maxKey!==ns){var ve=K.keyPath.slice(0,I.length);return this.where(ve).equals(ve.map(function(We){return k[We]}))}!K&&De&&console.warn("The query ".concat(JSON.stringify(k)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(I.join("+"),"]"));var ee=this.schema.idxByName;function se(Le,We){return Un(Le,We)===0}var Ie=I.reduce(function(He,We){var Ye=He[0],tt=He[1],He=ee[We],rt=k[We];return[Ye||He,Ye||!He?rs(tt,He&&He.multi?function(Ge){return Ge=O(Ge,We),s(Ge)&&Ge.some(function(et){return se(rt,et)})}:function(Ge){return se(rt,O(Ge,We))}):tt]},[null,null]),ve=Ie[0],Ie=Ie[1];return ve?this.where(ve.name).equals(k[ve.keyPath]).filter(Ie):K?this.filter(Ie):this.where(I).equals("")},_r.prototype.filter=function(k){return this.toCollection().and(k)},_r.prototype.count=function(k){return this.toCollection().count(k)},_r.prototype.offset=function(k){return this.toCollection().offset(k)},_r.prototype.limit=function(k){return this.toCollection().limit(k)},_r.prototype.each=function(k){return this.toCollection().each(k)},_r.prototype.toArray=function(k){return this.toCollection().toArray(k)},_r.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_r.prototype.orderBy=function(k){return new this.db.Collection(new this.db.WhereClause(this,s(k)?"[".concat(k.join("+"),"]"):k))},_r.prototype.reverse=function(){return this.toCollection().reverse()},_r.prototype.mapToClass=function(k){var I,K=this.db,ee=this.name;function se(){return I!==null&&I.apply(this,arguments)||this}(this.schema.mappedClass=k).prototype instanceof Cd&&(function(We,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function tt(){this.constructor=We}n(We,Ye),We.prototype=Ye===null?Object.create(Ye):(tt.prototype=Ye.prototype,new tt)}(se,I=k),Object.defineProperty(se.prototype,"db",{get:function(){return K},enumerable:!1,configurable:!0}),se.prototype.table=function(){return ee},k=se);for(var ve=new Set,Ie=k.prototype;Ie;Ie=c(Ie))Object.getOwnPropertyNames(Ie).forEach(function(We){return ve.add(We)});function Le(We){if(!We)return We;var Ye,tt=Object.create(k.prototype);for(Ye in We)if(!ve.has(Ye))try{tt[Ye]=We[Ye]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Le,this.hook("reading",Le),k},_r.prototype.defineClass=function(){return this.mapToClass(function(k){u(this,k)})},_r.prototype.add=function(k,I){var K=this,ee=this.schema.primKey,se=ee.auto,ve=ee.keyPath,Ie=k;return ve&&se&&(Ie=$l(ve)(k)),this._trans("readwrite",function(Le){return K.core.mutate({trans:Le,type:"add",keys:I!=null?[I]:null,values:[Ie]})}).then(function(Le){return Le.numFailures?D.reject(Le.failures[0]):Le.lastResult}).then(function(Le){if(ve)try{j(k,ve,Le)}catch{}return Le})},_r.prototype.update=function(k,I){return typeof k!="object"||s(k)?this.where(":id").equals(k).modify(I):(k=O(k,this.schema.primKey.keyPath),k===void 0?Lr(new Ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(k).modify(I))},_r.prototype.put=function(k,I){var K=this,ee=this.schema.primKey,se=ee.auto,ve=ee.keyPath,Ie=k;return ve&&se&&(Ie=$l(ve)(k)),this._trans("readwrite",function(Le){return K.core.mutate({trans:Le,type:"put",values:[Ie],keys:I!=null?[I]:null})}).then(function(Le){return Le.numFailures?D.reject(Le.failures[0]):Le.lastResult}).then(function(Le){if(ve)try{j(k,ve,Le)}catch{}return Le})},_r.prototype.delete=function(k){var I=this;return this._trans("readwrite",function(K){return I.core.mutate({trans:K,type:"delete",keys:[k]})}).then(function(K){return K.numFailures?D.reject(K.failures[0]):void 0})},_r.prototype.clear=function(){var k=this;return this._trans("readwrite",function(I){return k.core.mutate({trans:I,type:"deleteRange",range:zs})}).then(function(I){return I.numFailures?D.reject(I.failures[0]):void 0})},_r.prototype.bulkGet=function(k){var I=this;return this._trans("readonly",function(K){return I.core.getMany({keys:k,trans:K}).then(function(ee){return ee.map(function(se){return I.hook.reading.fire(se)})})})},_r.prototype.bulkAdd=function(k,I,K){var ee=this,se=Array.isArray(I)?I:void 0,ve=(K=K||(se?void 0:I))?K.allKeys:void 0;return this._trans("readwrite",function(Ie){var Ye=ee.schema.primKey,Le=Ye.auto,Ye=Ye.keyPath;if(Ye&&se)throw new Ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(se&&se.length!==k.length)throw new Ae.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&Le?k.map($l(Ye)):k;return ee.core.mutate({trans:Ie,type:"add",keys:se,values:Ye,wantResults:ve}).then(function(et){var He=et.numFailures,rt=et.results,Ge=et.lastResult,et=et.failures;if(He===0)return ve?rt:Ge;throw new Me("".concat(ee.name,".bulkAdd(): ").concat(He," of ").concat(We," operations failed"),et)})})},_r.prototype.bulkPut=function(k,I,K){var ee=this,se=Array.isArray(I)?I:void 0,ve=(K=K||(se?void 0:I))?K.allKeys:void 0;return this._trans("readwrite",function(Ie){var Ye=ee.schema.primKey,Le=Ye.auto,Ye=Ye.keyPath;if(Ye&&se)throw new Ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(se&&se.length!==k.length)throw new Ae.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&Le?k.map($l(Ye)):k;return ee.core.mutate({trans:Ie,type:"put",keys:se,values:Ye,wantResults:ve}).then(function(et){var He=et.numFailures,rt=et.results,Ge=et.lastResult,et=et.failures;if(He===0)return ve?rt:Ge;throw new Me("".concat(ee.name,".bulkPut(): ").concat(He," of ").concat(We," operations failed"),et)})})},_r.prototype.bulkUpdate=function(k){var I=this,K=this.core,ee=k.map(function(Ie){return Ie.key}),se=k.map(function(Ie){return Ie.changes}),ve=[];return this._trans("readwrite",function(Ie){return K.getMany({trans:Ie,keys:ee,cache:"clone"}).then(function(Le){var We=[],Ye=[];k.forEach(function(He,rt){var Ge=He.key,et=He.changes,it=Le[rt];if(it){for(var Xe=0,dt=Object.keys(et);Xe<dt.length;Xe++){var yt=dt[Xe],bt=et[yt];if(yt===I.schema.primKey.keyPath){if(Un(bt,Ge)!==0)throw new Ae.Constraint("Cannot update primary key in bulkUpdate()")}else j(it,yt,bt)}ve.push(rt),We.push(Ge),Ye.push(it)}});var tt=We.length;return K.mutate({trans:Ie,type:"put",keys:We,values:Ye,updates:{keys:ee,changeSpecs:se}}).then(function(He){var rt=He.numFailures,Ge=He.failures;if(rt===0)return tt;for(var et=0,it=Object.keys(Ge);et<it.length;et++){var Xe,dt=it[et],yt=ve[Number(dt)];yt!=null&&(Xe=Ge[dt],delete Ge[dt],Ge[yt]=Xe)}throw new Me("".concat(I.name,".bulkUpdate(): ").concat(rt," of ").concat(tt," operations failed"),Ge)})})})},_r.prototype.bulkDelete=function(k){var I=this,K=k.length;return this._trans("readwrite",function(ee){return I.core.mutate({trans:ee,type:"delete",keys:k})}).then(function(Ie){var se=Ie.numFailures,ve=Ie.lastResult,Ie=Ie.failures;if(se===0)return ve;throw new Me("".concat(I.name,".bulkDelete(): ").concat(se," of ").concat(K," operations failed"),Ie)})},_r);function _r(){}function as(k){function I(Ie,Le){if(Le){for(var We=arguments.length,Ye=new Array(We-1);--We;)Ye[We-1]=arguments[We];return K[Ie].subscribe.apply(null,Ye),k}if(typeof Ie=="string")return K[Ie]}var K={};I.addEventType=ve;for(var ee=1,se=arguments.length;ee<se;++ee)ve(arguments[ee]);return I;function ve(Ie,Le,We){if(typeof Ie!="object"){var Ye;Le=Le||Y;var tt={subscribers:[],fire:We=We||Fe,subscribe:function(He){tt.subscribers.indexOf(He)===-1&&(tt.subscribers.push(He),tt.fire=Le(tt.fire,He))},unsubscribe:function(He){tt.subscribers=tt.subscribers.filter(function(rt){return rt!==He}),tt.fire=tt.subscribers.reduce(Le,We)}};return K[Ie]=I[Ie]=tt}o(Ye=Ie).forEach(function(He){var rt=Ye[He];if(s(rt))ve(He,Ye[He][0],Ye[He][1]);else{if(rt!=="asap")throw new Ae.InvalidArgument("Invalid event config");var Ge=ve(He,Ne,function(){for(var et=arguments.length,it=new Array(et);et--;)it[et]=arguments[et];Ge.subscribers.forEach(function(Xe){A(function(){Xe.apply(null,it)})})})}})}}function Bl(k,I){return w(I).from({prototype:k}),I}function So(k,I){return!(k.filter||k.algorithm||k.or)&&(I?k.justLimit:!k.replayFilter)}function Lh(k,I){k.filter=rs(k.filter,I)}function La(k,I,K){var ee=k.replayFilter;k.replayFilter=ee?function(){return rs(ee(),I())}:I,k.justLimit=K&&!ee}function zl(k,I){if(k.isPrimKey)return I.primaryKey;var K=I.getIndexByKeyPath(k.index);if(!K)throw new Ae.Schema("KeyPath "+k.index+" on object store "+I.name+" is not indexed");return K}function $h(k,I,K){var ee=zl(k,I.schema);return I.openCursor({trans:K,values:!k.keysOnly,reverse:k.dir==="prev",unique:!!k.unique,query:{index:ee,range:k.range}})}function Ul(k,I,K,ee){var se=k.replayFilter?rs(k.filter,k.replayFilter()):k.filter;if(k.or){var ve={},Ie=function(Le,We,Ye){var tt,He;se&&!se(We,Ye,function(rt){return We.stop(rt)},function(rt){return We.fail(rt)})||((He=""+(tt=We.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(tt)),h(ve,He)||(ve[He]=!0,I(Le,We,Ye)))};return Promise.all([k.or._iterate(Ie,K),Us($h(k,ee,K),k.algorithm,Ie,!k.keysOnly&&k.valueMapper)])}return Us($h(k,ee,K),rs(k.algorithm,se),I,!k.keysOnly&&k.valueMapper)}function Us(k,I,K,ee){var se=Te(ee?function(ve,Ie,Le){return K(ee(ve),Ie,Le)}:K);return k.then(function(ve){if(ve)return ve.start(function(){var Ie=function(){return ve.continue()};I&&!I(ve,function(Le){return Ie=Le},function(Le){ve.stop(Le),Ie=Fe},function(Le){ve.fail(Le),Ie=Fe})||se(ve.value,ve,function(Le){return Ie=Le}),Ie()})})}var ql=(Bh.prototype.execute=function(k){var I=this["@@propmod"];if(I.add!==void 0){var K=I.add;if(s(K))return a(a([],s(k)?k:[],!0),K).sort();if(typeof K=="number")return(Number(k)||0)+K;if(typeof K=="bigint")try{return BigInt(k)+K}catch{return BigInt(0)+K}throw new TypeError("Invalid term ".concat(K))}if(I.remove!==void 0){var ee=I.remove;if(s(ee))return s(k)?k.filter(function(se){return!ee.includes(se)}).sort():[];if(typeof ee=="number")return Number(k)-ee;if(typeof ee=="bigint")try{return BigInt(k)-ee}catch{return BigInt(0)-ee}throw new TypeError("Invalid subtrahend ".concat(ee))}return K=(K=I.replacePrefix)===null||K===void 0?void 0:K[0],K&&typeof k=="string"&&k.startsWith(K)?I.replacePrefix[1]+k.substring(K.length):k},Bh);function Bh(k){this["@@propmod"]=k}var Hl=(Vn.prototype._read=function(k,I){var K=this._ctx;return K.error?K.table._trans(null,Lr.bind(null,K.error)):K.table._trans("readonly",k).then(I)},Vn.prototype._write=function(k){var I=this._ctx;return I.error?I.table._trans(null,Lr.bind(null,I.error)):I.table._trans("readwrite",k,"locked")},Vn.prototype._addAlgorithm=function(k){var I=this._ctx;I.algorithm=rs(I.algorithm,k)},Vn.prototype._iterate=function(k,I){return Ul(this._ctx,k,I,this._ctx.table.core)},Vn.prototype.clone=function(k){var I=Object.create(this.constructor.prototype),K=Object.create(this._ctx);return k&&u(K,k),I._ctx=K,I},Vn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Vn.prototype.each=function(k){var I=this._ctx;return this._read(function(K){return Ul(I,k,K,I.table.core)})},Vn.prototype.count=function(k){var I=this;return this._read(function(K){var ee=I._ctx,se=ee.table.core;if(So(ee,!0))return se.count({trans:K,query:{index:zl(ee,se.schema),range:ee.range}}).then(function(Ie){return Math.min(Ie,ee.limit)});var ve=0;return Ul(ee,function(){return++ve,!1},K,se).then(function(){return ve})}).then(k)},Vn.prototype.sortBy=function(k,I){var K=k.split(".").reverse(),ee=K[0],se=K.length-1;function ve(We,Ye){return Ye?ve(We[K[Ye]],Ye-1):We[ee]}var Ie=this._ctx.dir==="next"?1:-1;function Le(We,Ye){return Un(ve(We,se),ve(Ye,se))*Ie}return this.toArray(function(We){return We.sort(Le)}).then(I)},Vn.prototype.toArray=function(k){var I=this;return this._read(function(K){var ee=I._ctx;if(ee.dir==="next"&&So(ee,!0)&&0<ee.limit){var se=ee.valueMapper,ve=zl(ee,ee.table.core.schema);return ee.table.core.query({trans:K,limit:ee.limit,values:!0,query:{index:ve,range:ee.range}}).then(function(Le){return Le=Le.result,se?Le.map(se):Le})}var Ie=[];return Ul(ee,function(Le){return Ie.push(Le)},K,ee.table.core).then(function(){return Ie})},k)},Vn.prototype.offset=function(k){var I=this._ctx;return k<=0||(I.offset+=k,So(I)?La(I,function(){var K=k;return function(ee,se){return K===0||(K===1?--K:se(function(){ee.advance(K),K=0}),!1)}}):La(I,function(){var K=k;return function(){return--K<0}})),this},Vn.prototype.limit=function(k){return this._ctx.limit=Math.min(this._ctx.limit,k),La(this._ctx,function(){var I=k;return function(K,ee,se){return--I<=0&&ee(se),0<=I}},!0),this},Vn.prototype.until=function(k,I){return Lh(this._ctx,function(K,ee,se){return!k(K.value)||(ee(se),I)}),this},Vn.prototype.first=function(k){return this.limit(1).toArray(function(I){return I[0]}).then(k)},Vn.prototype.last=function(k){return this.reverse().first(k)},Vn.prototype.filter=function(k){var I;return Lh(this._ctx,function(K){return k(K.value)}),(I=this._ctx).isMatch=rs(I.isMatch,k),this},Vn.prototype.and=function(k){return this.filter(k)},Vn.prototype.or=function(k){return new this.db.WhereClause(this._ctx.table,k,this)},Vn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Vn.prototype.desc=function(){return this.reverse()},Vn.prototype.eachKey=function(k){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(K,ee){k(ee.key,ee)})},Vn.prototype.eachUniqueKey=function(k){return this._ctx.unique="unique",this.eachKey(k)},Vn.prototype.eachPrimaryKey=function(k){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(K,ee){k(ee.primaryKey,ee)})},Vn.prototype.keys=function(k){var I=this._ctx;I.keysOnly=!I.isMatch;var K=[];return this.each(function(ee,se){K.push(se.key)}).then(function(){return K}).then(k)},Vn.prototype.primaryKeys=function(k){var I=this._ctx;if(I.dir==="next"&&So(I,!0)&&0<I.limit)return this._read(function(ee){var se=zl(I,I.table.core.schema);return I.table.core.query({trans:ee,values:!1,limit:I.limit,query:{index:se,range:I.range}})}).then(function(ee){return ee.result}).then(k);I.keysOnly=!I.isMatch;var K=[];return this.each(function(ee,se){K.push(se.primaryKey)}).then(function(){return K}).then(k)},Vn.prototype.uniqueKeys=function(k){return this._ctx.unique="unique",this.keys(k)},Vn.prototype.firstKey=function(k){return this.limit(1).keys(function(I){return I[0]}).then(k)},Vn.prototype.lastKey=function(k){return this.reverse().firstKey(k)},Vn.prototype.distinct=function(){var k=this._ctx,k=k.index&&k.table.schema.idxByName[k.index];if(!k||!k.multi)return this;var I={};return Lh(this._ctx,function(se){var ee=se.primaryKey.toString(),se=h(I,ee);return I[ee]=!0,!se}),this},Vn.prototype.modify=function(k){var I=this,K=this._ctx;return this._write(function(ee){var se,ve,Ie;Ie=typeof k=="function"?k:(se=o(k),ve=se.length,function(Xe){for(var dt=!1,yt=0;yt<ve;++yt){var bt=se[yt],xt=k[bt],Ft=O(Xe,bt);xt instanceof ql?(j(Xe,bt,xt.execute(Ft)),dt=!0):Ft!==xt&&(j(Xe,bt,xt),dt=!0)}return dt});var Le=K.table.core,He=Le.schema.primaryKey,We=He.outbound,Ye=He.extractKey,tt=200,He=I.db._options.modifyChunkSize;He&&(tt=typeof He=="object"?He[Le.name]||He["*"]||200:He);function rt(Xe,bt){var yt=bt.failures,bt=bt.numFailures;et+=Xe-bt;for(var xt=0,Ft=o(yt);xt<Ft.length;xt++){var qt=Ft[xt];Ge.push(yt[qt])}}var Ge=[],et=0,it=[];return I.clone().primaryKeys().then(function(Xe){function dt(bt){var xt=Math.min(tt,Xe.length-bt);return Le.getMany({trans:ee,keys:Xe.slice(bt,bt+xt),cache:"immutable"}).then(function(Ft){for(var qt=[],Dt=[],Bt=We?[]:null,Vt=[],Mt=0;Mt<xt;++Mt){var Xt=Ft[Mt],un={value:Z(Xt),primKey:Xe[bt+Mt]};Ie.call(un,un.value,un)!==!1&&(un.value==null?Vt.push(Xe[bt+Mt]):We||Un(Ye(Xt),Ye(un.value))===0?(Dt.push(un.value),We&&Bt.push(Xe[bt+Mt])):(Vt.push(Xe[bt+Mt]),qt.push(un.value)))}return Promise.resolve(0<qt.length&&Le.mutate({trans:ee,type:"add",values:qt}).then(function(fn){for(var kn in fn.failures)Vt.splice(parseInt(kn),1);rt(qt.length,fn)})).then(function(){return(0<Dt.length||yt&&typeof k=="object")&&Le.mutate({trans:ee,type:"put",keys:Bt,values:Dt,criteria:yt,changeSpec:typeof k!="function"&&k,isAdditionalChunk:0<bt}).then(function(fn){return rt(Dt.length,fn)})}).then(function(){return(0<Vt.length||yt&&k===Ad)&&Le.mutate({trans:ee,type:"delete",keys:Vt,criteria:yt,isAdditionalChunk:0<bt}).then(function(fn){return rt(Vt.length,fn)})}).then(function(){return Xe.length>bt+xt&&dt(bt+tt)})})}var yt=So(K)&&K.limit===1/0&&(typeof k!="function"||k===Ad)&&{index:K.index,range:K.range};return dt(0).then(function(){if(0<Ge.length)throw new fe("Error modifying one or more objects",Ge,et,it);return Xe.length})})})},Vn.prototype.delete=function(){var k=this._ctx,I=k.range;return So(k)&&(k.isPrimKey||I.type===3)?this._write(function(K){var ee=k.table.core.schema.primaryKey,se=I;return k.table.core.count({trans:K,query:{index:ee,range:se}}).then(function(ve){return k.table.core.mutate({trans:K,type:"deleteRange",range:se}).then(function(Ie){var Le=Ie.failures;if(Ie.lastResult,Ie.results,Ie=Ie.numFailures,Ie)throw new fe("Could not delete some values",Object.keys(Le).map(function(We){return Le[We]}),ve-Ie);return ve-Ie})})}):this.modify(Ad)},Vn);function Vn(){}var Ad=function(k,I){return I.value=null};function rg(k,I){return k<I?-1:k===I?0:1}function zh(k,I){return I<k?-1:k===I?0:1}function ri(k,I,K){return k=k instanceof Hs?new k.Collection(k):k,k._ctx.error=new(K||TypeError)(I),k}function Vl(k){return new k.Collection(k,function(){return Td("")}).limit(0)}function qs(k,I,K,ee){var se,ve,Ie,Le,We,Ye,tt,He=K.length;if(!K.every(function(et){return typeof et=="string"}))return ri(k,ng);function rt(et){se=et==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},ve=et==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},Ie=et==="next"?rg:zh;var it=K.map(function(Xe){return{lower:ve(Xe),upper:se(Xe)}}).sort(function(Xe,dt){return Ie(Xe.lower,dt.lower)});Le=it.map(function(Xe){return Xe.upper}),We=it.map(function(Xe){return Xe.lower}),tt=(Ye=et)==="next"?"":ee}rt("next"),k=new k.Collection(k,function(){return Ji(Le[0],We[He-1]+ee)}),k._ondirectionchange=function(et){rt(et)};var Ge=0;return k._addAlgorithm(function(et,it,Xe){var dt=et.key;if(typeof dt!="string")return!1;var yt=ve(dt);if(I(yt,We,Ge))return!0;for(var bt=null,xt=Ge;xt<He;++xt){var Ft=function(qt,Dt,Bt,Vt,Mt,Xt){for(var un=Math.min(qt.length,Vt.length),fn=-1,kn=0;kn<un;++kn){var Ia=Dt[kn];if(Ia!==Vt[kn])return Mt(qt[kn],Bt[kn])<0?qt.substr(0,kn)+Bt[kn]+Bt.substr(kn+1):Mt(qt[kn],Vt[kn])<0?qt.substr(0,kn)+Vt[kn]+Bt.substr(kn+1):0<=fn?qt.substr(0,fn)+Dt[fn]+Bt.substr(fn+1):null;Mt(qt[kn],Ia)<0&&(fn=kn)}return un<Vt.length&&Xt==="next"?qt+Bt.substr(qt.length):un<qt.length&&Xt==="prev"?qt.substr(0,Bt.length):fn<0?null:qt.substr(0,fn)+Vt[fn]+Bt.substr(fn+1)}(dt,yt,Le[xt],We[xt],Ie,Ye);Ft===null&&bt===null?Ge=xt+1:(bt===null||0<Ie(bt,Ft))&&(bt=Ft)}return it(bt!==null?function(){et.continue(bt+tt)}:Xe),!1}),k}function Ji(k,I,K,ee){return{type:2,lower:k,upper:I,lowerOpen:K,upperOpen:ee}}function Td(k){return{type:1,lower:k,upper:k}}var Hs=(Object.defineProperty(Rr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Rr.prototype.between=function(k,I,K,ee){K=K!==!1,ee=ee===!0;try{return 0<this._cmp(k,I)||this._cmp(k,I)===0&&(K||ee)&&(!K||!ee)?Vl(this):new this.Collection(this,function(){return Ji(k,I,!K,!ee)})}catch{return ri(this,Xi)}},Rr.prototype.equals=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Td(k)})},Rr.prototype.above=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(k,void 0,!0)})},Rr.prototype.aboveOrEqual=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(k,void 0,!1)})},Rr.prototype.below=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(void 0,k,!1,!0)})},Rr.prototype.belowOrEqual=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(void 0,k)})},Rr.prototype.startsWith=function(k){return typeof k!="string"?ri(this,ng):this.between(k,k+ns,!0,!0)},Rr.prototype.startsWithIgnoreCase=function(k){return k===""?this.startsWith(k):qs(this,function(I,K){return I.indexOf(K[0])===0},[k],ns)},Rr.prototype.equalsIgnoreCase=function(k){return qs(this,function(I,K){return I===K[0]},[k],"")},Rr.prototype.anyOfIgnoreCase=function(){var k=G.apply(te,arguments);return k.length===0?Vl(this):qs(this,function(I,K){return K.indexOf(I)!==-1},k,"")},Rr.prototype.startsWithAnyOfIgnoreCase=function(){var k=G.apply(te,arguments);return k.length===0?Vl(this):qs(this,function(I,K){return K.some(function(ee){return I.indexOf(ee)===0})},k,ns)},Rr.prototype.anyOf=function(){var k=this,I=G.apply(te,arguments),K=this._cmp;try{I.sort(K)}catch{return ri(this,Xi)}if(I.length===0)return Vl(this);var ee=new this.Collection(this,function(){return Ji(I[0],I[I.length-1])});ee._ondirectionchange=function(ve){K=ve==="next"?k._ascending:k._descending,I.sort(K)};var se=0;return ee._addAlgorithm(function(ve,Ie,Le){for(var We=ve.key;0<K(We,I[se]);)if(++se===I.length)return Ie(Le),!1;return K(We,I[se])===0||(Ie(function(){ve.continue(I[se])}),!1)}),ee},Rr.prototype.notEqual=function(k){return this.inAnyRange([[-1/0,k],[k,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Rr.prototype.noneOf=function(){var k=G.apply(te,arguments);if(k.length===0)return new this.Collection(this);try{k.sort(this._ascending)}catch{return ri(this,Xi)}var I=k.reduce(function(K,ee){return K?K.concat([[K[K.length-1][1],ee]]):[[-1/0,ee]]},null);return I.push([k[k.length-1],this.db._maxKey]),this.inAnyRange(I,{includeLowers:!1,includeUppers:!1})},Rr.prototype.inAnyRange=function(dt,I){var K=this,ee=this._cmp,se=this._ascending,ve=this._descending,Ie=this._min,Le=this._max;if(dt.length===0)return Vl(this);if(!dt.every(function(yt){return yt[0]!==void 0&&yt[1]!==void 0&&se(yt[0],yt[1])<=0}))return ri(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ae.InvalidArgument);var We=!I||I.includeLowers!==!1,Ye=I&&I.includeUppers===!0,tt,He=se;function rt(yt,bt){return He(yt[0],bt[0])}try{(tt=dt.reduce(function(yt,bt){for(var xt=0,Ft=yt.length;xt<Ft;++xt){var qt=yt[xt];if(ee(bt[0],qt[1])<0&&0<ee(bt[1],qt[0])){qt[0]=Ie(qt[0],bt[0]),qt[1]=Le(qt[1],bt[1]);break}}return xt===Ft&&yt.push(bt),yt},[])).sort(rt)}catch{return ri(this,Xi)}var Ge=0,et=Ye?function(yt){return 0<se(yt,tt[Ge][1])}:function(yt){return 0<=se(yt,tt[Ge][1])},it=We?function(yt){return 0<ve(yt,tt[Ge][0])}:function(yt){return 0<=ve(yt,tt[Ge][0])},Xe=et,dt=new this.Collection(this,function(){return Ji(tt[0][0],tt[tt.length-1][1],!We,!Ye)});return dt._ondirectionchange=function(yt){He=yt==="next"?(Xe=et,se):(Xe=it,ve),tt.sort(rt)},dt._addAlgorithm(function(yt,bt,xt){for(var Ft,qt=yt.key;Xe(qt);)if(++Ge===tt.length)return bt(xt),!1;return!et(Ft=qt)&&!it(Ft)||(K._cmp(qt,tt[Ge][1])===0||K._cmp(qt,tt[Ge][0])===0||bt(function(){He===se?yt.continue(tt[Ge][0]):yt.continue(tt[Ge][1])}),!1)}),dt},Rr.prototype.startsWithAnyOf=function(){var k=G.apply(te,arguments);return k.every(function(I){return typeof I=="string"})?k.length===0?Vl(this):this.inAnyRange(k.map(function(I){return[I,I+ns]})):ri(this,"startsWithAnyOf() only works with strings")},Rr);function Rr(){}function Oi(k){return Te(function(I){return Vs(I),k(I.target.error),!1})}function Vs(k){k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault()}var Gl="storagemutated",Gs="x-storagemutated-1",ga=as(null,Gl),Uh=($a.prototype._lock=function(){return C(!Ce.global),++this._reculock,this._reculock!==1||Ce.global||(Ce.lockOwnerFor=this),this},$a.prototype._unlock=function(){if(C(!Ce.global),--this._reculock==0)for(Ce.global||(Ce.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var k=this._blockedFuncs.shift();try{Qo(k[1],k[0])}catch{}}return this},$a.prototype._locked=function(){return this._reculock&&Ce.lockOwnerFor!==this},$a.prototype.create=function(k){var I=this;if(!this.mode)return this;var K=this.db.idbdb,ee=this.db._state.dbOpenError;if(C(!this.idbtrans),!k&&!K)switch(ee&&ee.name){case"DatabaseClosedError":throw new Ae.DatabaseClosed(ee);case"MissingAPIError":throw new Ae.MissingAPI(ee.message,ee);default:throw new Ae.OpenFailed(ee)}if(!this.active)throw new Ae.TransactionInactive;return C(this._completion._state===null),(k=this.idbtrans=k||(this.db.core||K).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Te(function(se){Vs(se),I._reject(k.error)}),k.onabort=Te(function(se){Vs(se),I.active&&I._reject(new Ae.Abort(k.error)),I.active=!1,I.on("abort").fire(se)}),k.oncomplete=Te(function(){I.active=!1,I._resolve(),"mutatedParts"in k&&ga.storagemutated.fire(k.mutatedParts)}),this},$a.prototype._promise=function(k,I,K){var ee=this;if(k==="readwrite"&&this.mode!=="readwrite")return Lr(new Ae.ReadOnly("Transaction is readonly"));if(!this.active)return Lr(new Ae.TransactionInactive);if(this._locked())return new D(function(ve,Ie){ee._blockedFuncs.push([function(){ee._promise(k,I,K).then(ve,Ie)},Ce])});if(K)return Zt(function(){var ve=new D(function(Ie,Le){ee._lock();var We=I(Ie,Le,ee);We&&We.then&&We.then(Ie,Le)});return ve.finally(function(){return ee._unlock()}),ve._lib=!0,ve});var se=new D(function(ve,Ie){var Le=I(ve,Ie,ee);Le&&Le.then&&Le.then(ve,Ie)});return se._lib=!0,se},$a.prototype._root=function(){return this.parent?this.parent._root():this},$a.prototype.waitFor=function(k){var I,K=this._root(),ee=D.resolve(k);K._waitingFor?K._waitingFor=K._waitingFor.then(function(){return ee}):(K._waitingFor=ee,K._waitingQueue=[],I=K.idbtrans.objectStore(K.storeNames[0]),function ve(){for(++K._spinCount;K._waitingQueue.length;)K._waitingQueue.shift()();K._waitingFor&&(I.get(-1/0).onsuccess=ve)}());var se=K._waitingFor;return new D(function(ve,Ie){ee.then(function(Le){return K._waitingQueue.push(Te(ve.bind(null,Le)))},function(Le){return K._waitingQueue.push(Te(Ie.bind(null,Le)))}).finally(function(){K._waitingFor===se&&(K._waitingFor=null)})})},$a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ae.Abort))},$a.prototype.table=function(k){var I=this._memoizedTables||(this._memoizedTables={});if(h(I,k))return I[k];var K=this.schema[k];if(!K)throw new Ae.NotFound("Table "+k+" not part of transaction");return K=new this.db.Table(k,K,this),K.core=this.db.core.table(k),I[k]=K},$a);function $a(){}function Qi(k,I,K,ee,se,ve,Ie){return{name:k,keyPath:I,unique:K,multi:ee,auto:se,compound:ve,src:(K&&!Ie?"&":"")+(ee?"*":"")+(se?"++":"")+Rd(I)}}function Rd(k){return typeof k=="string"?k:k?"["+[].join.call(k,"+")+"]":""}function Wl(k,I,K){return{name:k,primKey:I,indexes:K,mappedClass:null,idxByName:(ee=function(se){return[se.name,se]},K.reduce(function(se,ve,Ie){return Ie=ee(ve,Ie),Ie&&(se[Ie[0]]=Ie[1]),se},{}))};var ee}var Kl=function(k){try{return k.only([[]]),Kl=function(){return[[]]},[[]]}catch{return Kl=function(){return ns},ns}};function Zl(k){return k==null?function(){}:typeof k=="string"?(I=k).split(".").length===1?function(K){return K[I]}:function(K){return O(K,I)}:function(K){return O(K,k)};var I}function dc(k){return[].slice.call(k)}var ag=0;function ta(k){return k==null?":id":typeof k=="string"?k:"[".concat(k.join("+"),"]")}function Ws(k,I,We){function ee(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Xe.lower,et=Xe.upper,it=Xe.lowerOpen,Xe=Xe.upperOpen;return Ge===void 0?et===void 0?null:I.upperBound(et,!!Xe):et===void 0?I.lowerBound(Ge,!!it):I.bound(Ge,et,!!it,!!Xe)}function se(rt){var Ge,et=rt.name;return{name:et,schema:rt,mutate:function(it){var Xe=it.trans,dt=it.type,yt=it.keys,bt=it.values,xt=it.range;return new Promise(function(Ft,qt){Ft=Te(Ft);var Dt=Xe.objectStore(et),Bt=Dt.keyPath==null,Vt=dt==="put"||dt==="add";if(!Vt&&dt!=="delete"&&dt!=="deleteRange")throw new Error("Invalid operation type: "+dt);var Mt,Xt=(yt||bt||{length:1}).length;if(yt&&bt&&yt.length!==bt.length)throw new Error("Given keys array must have same length as given values array.");if(Xt===0)return Ft({numFailures:0,failures:{},results:[],lastResult:void 0});function un(ba){++Ia,Vs(ba)}var fn=[],kn=[],Ia=0;if(dt==="deleteRange"){if(xt.type===4)return Ft({numFailures:Ia,failures:kn,results:[],lastResult:void 0});xt.type===3?fn.push(Mt=Dt.clear()):fn.push(Mt=Dt.delete(ee(xt)))}else{var Bt=Vt?Bt?[bt,yt]:[bt,null]:[yt,null],bn=Bt[0],Kr=Bt[1];if(Vt)for(var na=0;na<Xt;++na)fn.push(Mt=Kr&&Kr[na]!==void 0?Dt[dt](bn[na],Kr[na]):Dt[dt](bn[na])),Mt.onerror=un;else for(na=0;na<Xt;++na)fn.push(Mt=Dt[dt](bn[na])),Mt.onerror=un}function Eo(ba){ba=ba.target.result,fn.forEach(function(to,ls){return to.error!=null&&(kn[ls]=to.error)}),Ft({numFailures:Ia,failures:kn,results:dt==="delete"?yt:fn.map(function(to){return to.result}),lastResult:ba})}Mt.onerror=function(ba){un(ba),Eo(ba)},Mt.onsuccess=Eo})},getMany:function(it){var Xe=it.trans,dt=it.keys;return new Promise(function(yt,bt){yt=Te(yt);for(var xt,Ft=Xe.objectStore(et),qt=dt.length,Dt=new Array(qt),Bt=0,Vt=0,Mt=function(fn){fn=fn.target,Dt[fn._pos]=fn.result,++Vt===Bt&&yt(Dt)},Xt=Oi(bt),un=0;un<qt;++un)dt[un]!=null&&((xt=Ft.get(dt[un]))._pos=un,xt.onsuccess=Mt,xt.onerror=Xt,++Bt);Bt===0&&yt(Dt)})},get:function(it){var Xe=it.trans,dt=it.key;return new Promise(function(yt,bt){yt=Te(yt);var xt=Xe.objectStore(et).get(dt);xt.onsuccess=function(Ft){return yt(Ft.target.result)},xt.onerror=Oi(bt)})},query:(Ge=Ye,function(it){return new Promise(function(Xe,dt){Xe=Te(Xe);var yt,bt,xt,Bt=it.trans,Ft=it.values,qt=it.limit,Mt=it.query,Dt=qt===1/0?void 0:qt,Vt=Mt.index,Mt=Mt.range,Bt=Bt.objectStore(et),Vt=Vt.isPrimaryKey?Bt:Bt.index(Vt.name),Mt=ee(Mt);if(qt===0)return Xe({result:[]});Ge?((Dt=Ft?Vt.getAll(Mt,Dt):Vt.getAllKeys(Mt,Dt)).onsuccess=function(Xt){return Xe({result:Xt.target.result})},Dt.onerror=Oi(dt)):(yt=0,bt=!Ft&&"openKeyCursor"in Vt?Vt.openKeyCursor(Mt):Vt.openCursor(Mt),xt=[],bt.onsuccess=function(Xt){var un=bt.result;return un?(xt.push(Ft?un.value:un.primaryKey),++yt===qt?Xe({result:xt}):void un.continue()):Xe({result:xt})},bt.onerror=Oi(dt))})}),openCursor:function(it){var Xe=it.trans,dt=it.values,yt=it.query,bt=it.reverse,xt=it.unique;return new Promise(function(Ft,qt){Ft=Te(Ft);var Vt=yt.index,Dt=yt.range,Bt=Xe.objectStore(et),Bt=Vt.isPrimaryKey?Bt:Bt.index(Vt.name),Vt=bt?xt?"prevunique":"prev":xt?"nextunique":"next",Mt=!dt&&"openKeyCursor"in Bt?Bt.openKeyCursor(ee(Dt),Vt):Bt.openCursor(ee(Dt),Vt);Mt.onerror=Oi(qt),Mt.onsuccess=Te(function(Xt){var un,fn,kn,Ia,bn=Mt.result;bn?(bn.___id=++ag,bn.done=!1,un=bn.continue.bind(bn),fn=(fn=bn.continuePrimaryKey)&&fn.bind(bn),kn=bn.advance.bind(bn),Ia=function(){throw new Error("Cursor not stopped")},bn.trans=Xe,bn.stop=bn.continue=bn.continuePrimaryKey=bn.advance=function(){throw new Error("Cursor not started")},bn.fail=Te(qt),bn.next=function(){var Kr=this,na=1;return this.start(function(){return na--?Kr.continue():Kr.stop()}).then(function(){return Kr})},bn.start=function(Kr){function na(){if(Mt.result)try{Kr()}catch(ba){bn.fail(ba)}else bn.done=!0,bn.start=function(){throw new Error("Cursor behind last entry")},bn.stop()}var Eo=new Promise(function(ba,to){ba=Te(ba),Mt.onerror=Oi(to),bn.fail=to,bn.stop=function(ls){bn.stop=bn.continue=bn.continuePrimaryKey=bn.advance=Ia,ba(ls)}});return Mt.onsuccess=Te(function(ba){Mt.onsuccess=na,na()}),bn.continue=un,bn.continuePrimaryKey=fn,bn.advance=kn,na(),Eo},Ft(bn)):Ft(null)},qt)})},count:function(it){var Xe=it.query,dt=it.trans,yt=Xe.index,bt=Xe.range;return new Promise(function(xt,Ft){var qt=dt.objectStore(et),Dt=yt.isPrimaryKey?qt:qt.index(yt.name),qt=ee(bt),Dt=qt?Dt.count(qt):Dt.count();Dt.onsuccess=Te(function(Bt){return xt(Bt.target.result)}),Dt.onerror=Oi(Ft)})}}}var ve,Ie,Le,tt=(Ie=We,Le=dc((ve=k).objectStoreNames),{schema:{name:ve.name,tables:Le.map(function(rt){return Ie.objectStore(rt)}).map(function(rt){var Ge=rt.keyPath,Xe=rt.autoIncrement,et=s(Ge),it={},Xe={name:rt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:et,keyPath:Ge,autoIncrement:Xe,unique:!0,extractKey:Zl(Ge)},indexes:dc(rt.indexNames).map(function(dt){return rt.index(dt)}).map(function(xt){var yt=xt.name,bt=xt.unique,Ft=xt.multiEntry,xt=xt.keyPath,Ft={name:yt,compound:s(xt),keyPath:xt,unique:bt,multiEntry:Ft,extractKey:Zl(xt)};return it[ta(xt)]=Ft}),getIndexByKeyPath:function(dt){return it[ta(dt)]}};return it[":id"]=Xe.primaryKey,Ge!=null&&(it[ta(Ge)]=Xe.primaryKey),Xe})},hasGetAll:0<Le.length&&"getAll"in Ie.objectStore(Le[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=tt.schema,Ye=tt.hasGetAll,tt=We.tables.map(se),He={};return tt.forEach(function(rt){return He[rt.name]=rt}),{stack:"dbcore",transaction:k.transaction.bind(k),table:function(rt){if(!He[rt])throw new Error("Table '".concat(rt,"' not found"));return He[rt]},MIN_KEY:-1/0,MAX_KEY:Kl(I),schema:We}}function Nd(k,I,K,ee){var se=K.IDBKeyRange;return K.indexedDB,{dbcore:(ee=Ws(I,se,ee),k.dbcore.reduce(function(ve,Ie){return Ie=Ie.create,r(r({},ve),Ie(ve))},ee))}}function is(k,ee){var K=ee.db,ee=Nd(k._middlewares,K,k._deps,ee);k.core=ee.dbcore,k.tables.forEach(function(se){var ve=se.name;k.core.schema.tables.some(function(Ie){return Ie.name===ve})&&(se.core=k.core.table(ve),k[ve]instanceof k.Table&&(k[ve].core=se.core))})}function Id(k,I,K,ee){K.forEach(function(se){var ve=ee[se];I.forEach(function(Ie){var Le=function We(Ye,tt){return _(Ye,tt)||(Ye=c(Ye))&&We(Ye,tt)}(Ie,se);(!Le||"value"in Le&&Le.value===void 0)&&(Ie===k.Transaction.prototype||Ie instanceof k.Transaction?v(Ie,se,{get:function(){return this.table(se)},set:function(We){g(this,se,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):Ie[se]=new k.Table(se,ve))})})}function fc(k,I){I.forEach(function(K){for(var ee in K)K[ee]instanceof k.Table&&delete K[ee]})}function qh(k,I){return k._cfg.version-I._cfg.version}function hc(k,I,K,ee){var se=k._dbSchema;K.objectStoreNames.contains("$meta")&&!se.$meta&&(se.$meta=Wl("$meta",og("")[0],[]),k._storeNames.push("$meta"));var ve=k._createTransaction("readwrite",k._storeNames,se);ve.create(K),ve._completion.catch(ee);var Ie=ve._reject.bind(ve),Le=Ce.transless||Ce;Zt(function(){return Ce.trans=ve,Ce.transless=Le,I!==0?(is(k,K),Ye=I,((We=ve).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(tt){return tt??Ye}):D.resolve(Ye)).then(function(tt){return rt=tt,Ge=ve,et=K,it=[],tt=(He=k)._versions,Xe=He._dbSchema=Yl(0,He.idbdb,et),(tt=tt.filter(function(dt){return dt._cfg.version>=rt})).length!==0?(tt.forEach(function(dt){it.push(function(){var yt=Xe,bt=dt._cfg.dbschema;Md(He,yt,et),Md(He,bt,et),Xe=He._dbSchema=bt;var xt=jd(yt,bt);xt.add.forEach(function(Vt){Hh(et,Vt[0],Vt[1].primKey,Vt[1].indexes)}),xt.change.forEach(function(Vt){if(Vt.recreate)throw new Ae.Upgrade("Not yet support for changing primary key");var Mt=et.objectStore(Vt.name);Vt.add.forEach(function(Xt){return Dd(Mt,Xt)}),Vt.change.forEach(function(Xt){Mt.deleteIndex(Xt.name),Dd(Mt,Xt)}),Vt.del.forEach(function(Xt){return Mt.deleteIndex(Xt)})});var Ft=dt._cfg.contentUpgrade;if(Ft&&dt._cfg.version>rt){is(He,et),Ge._memoizedTables={};var qt=N(bt);xt.del.forEach(function(Vt){qt[Vt]=yt[Vt]}),fc(He,[He.Transaction.prototype]),Id(He,[He.Transaction.prototype],o(qt),qt),Ge.schema=qt;var Dt,Bt=X(Ft);return Bt&&En(),xt=D.follow(function(){var Vt;(Dt=Ft(Ge))&&Bt&&(Vt=zn.bind(null,null),Dt.then(Vt,Vt))}),Dt&&typeof Dt.then=="function"?D.resolve(Dt):xt.then(function(){return Dt})}}),it.push(function(yt){var bt,xt,Ft=dt._cfg.dbschema;bt=Ft,xt=yt,[].slice.call(xt.db.objectStoreNames).forEach(function(qt){return bt[qt]==null&&xt.db.deleteObjectStore(qt)}),fc(He,[He.Transaction.prototype]),Id(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),Ge.schema=He._dbSchema}),it.push(function(yt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===dt._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(bt){return bt!=="$meta"})):yt.objectStore("$meta").put(dt._cfg.version,"version"))})}),function dt(){return it.length?D.resolve(it.shift()(Ge.idbtrans)).then(dt):D.resolve()}().then(function(){ig(Xe,et)})):D.resolve();var He,rt,Ge,et,it,Xe}).catch(Ie)):(o(se).forEach(function(tt){Hh(K,tt,se[tt].primKey,se[tt].indexes)}),is(k,K),void D.follow(function(){return k.on.populate.fire(ve)}).catch(Ie));var We,Ye})}function Od(k,I){ig(k._dbSchema,I),I.db.version%10!=0||I.objectStoreNames.contains("$meta")||I.db.createObjectStore("$meta").add(Math.ceil(I.db.version/10-1),"version");var K=Yl(0,k.idbdb,I);Md(k,k._dbSchema,I);for(var ee=0,se=jd(K,k._dbSchema).change;ee<se.length;ee++){var ve=function(Ie){if(Ie.change.length||Ie.recreate)return console.warn("Unable to patch indexes of table ".concat(Ie.name," because it has changes on the type of index or primary key.")),{value:void 0};var Le=I.objectStore(Ie.name);Ie.add.forEach(function(We){De&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Ie.name,".").concat(We.src)),Dd(Le,We)})}(se[ee]);if(typeof ve=="object")return ve.value}}function jd(k,I){var K,ee={del:[],add:[],change:[]};for(K in k)I[K]||ee.del.push(K);for(K in I){var se=k[K],ve=I[K];if(se){var Ie={name:K,def:ve,recreate:!1,del:[],add:[],change:[]};if(""+(se.primKey.keyPath||"")!=""+(ve.primKey.keyPath||"")||se.primKey.auto!==ve.primKey.auto)Ie.recreate=!0,ee.change.push(Ie);else{var Le=se.idxByName,We=ve.idxByName,Ye=void 0;for(Ye in Le)We[Ye]||Ie.del.push(Ye);for(Ye in We){var tt=Le[Ye],He=We[Ye];tt?tt.src!==He.src&&Ie.change.push(He):Ie.add.push(He)}(0<Ie.del.length||0<Ie.add.length||0<Ie.change.length)&&ee.change.push(Ie)}}else ee.add.push([K,ve])}return ee}function Hh(k,I,K,ee){var se=k.db.createObjectStore(I,K.keyPath?{keyPath:K.keyPath,autoIncrement:K.auto}:{autoIncrement:K.auto});return ee.forEach(function(ve){return Dd(se,ve)}),se}function ig(k,I){o(k).forEach(function(K){I.db.objectStoreNames.contains(K)||(De&&console.debug("Dexie: Creating missing table",K),Hh(I,K,k[K].primKey,k[K].indexes))})}function Dd(k,I){k.createIndex(I.name,I.keyPath,{unique:I.unique,multiEntry:I.multi})}function Yl(k,I,K){var ee={};return S(I.objectStoreNames,0).forEach(function(se){for(var ve=K.objectStore(se),Ie=Qi(Rd(Ye=ve.keyPath),Ye||"",!0,!1,!!ve.autoIncrement,Ye&&typeof Ye!="string",!0),Le=[],We=0;We<ve.indexNames.length;++We){var tt=ve.index(ve.indexNames[We]),Ye=tt.keyPath,tt=Qi(tt.name,Ye,!!tt.unique,!!tt.multiEntry,!1,Ye&&typeof Ye!="string",!1);Le.push(tt)}ee[se]=Wl(se,Ie,Le)}),ee}function Md(k,I,K){for(var ee=K.db.objectStoreNames,se=0;se<ee.length;++se){var ve=ee[se],Ie=K.objectStore(ve);k._hasGetAll="getAll"in Ie;for(var Le=0;Le<Ie.indexNames.length;++Le){var We=Ie.indexNames[Le],Ye=Ie.index(We).keyPath,tt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!I[ve]||(Ye=I[ve].idxByName[tt])&&(Ye.name=We,delete I[ve].idxByName[tt],I[ve].idxByName[We]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(k._hasGetAll=!1)}function og(k){return k.split(",").map(function(I,K){var ee=(I=I.trim()).replace(/([&*]|\+\+)/g,""),se=/^\[/.test(ee)?ee.match(/^\[(.*)\]$/)[1].split("+"):ee;return Qi(ee,se||null,/\&/.test(I),/\*/.test(I),/\+\+/.test(I),s(se),K===0)})}var Hw=(Pd.prototype._parseStoresSpec=function(k,I){o(k).forEach(function(K){if(k[K]!==null){var ee=og(k[K]),se=ee.shift();if(se.unique=!0,se.multi)throw new Ae.Schema("Primary key cannot be multi-valued");ee.forEach(function(ve){if(ve.auto)throw new Ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!ve.keyPath)throw new Ae.Schema("Index must have a name and cannot be an empty string")}),I[K]=Wl(K,se,ee)}})},Pd.prototype.stores=function(K){var I=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,K):K;var K=I._versions,ee={},se={};return K.forEach(function(ve){u(ee,ve._cfg.storesSource),se=ve._cfg.dbschema={},ve._parseStoresSpec(ee,se)}),I._dbSchema=se,fc(I,[I._allTables,I,I.Transaction.prototype]),Id(I,[I._allTables,I,I.Transaction.prototype,this._cfg.tables],o(se),se),I._storeNames=o(se),this},Pd.prototype.upgrade=function(k){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||Fe,k),this},Pd);function Pd(){}function Vh(k,I){var K=k._dbNamesDB;return K||(K=k._dbNamesDB=new eo(Bs,{addons:[],indexedDB:k,IDBKeyRange:I})).version(1).stores({dbnames:"name"}),K.table("dbnames")}function Fd(k){return k&&typeof k.databases=="function"}function Gh(k){return Zt(function(){return Ce.letThrough=!0,k()})}function Wh(k){return!("from"in k)}var ya=function(k,I){if(!this){var K=new ya;return k&&"d"in k&&u(K,k),K}u(this,arguments.length?{d:1,from:k,to:1<arguments.length?I:k}:{d:0})};function pc(k,I,K){var ee=Un(I,K);if(!isNaN(ee)){if(0<ee)throw RangeError();if(Wh(k))return u(k,{from:I,to:K,d:1});var se=k.l,ee=k.r;if(Un(K,k.from)<0)return se?pc(se,I,K):k.l={from:I,to:K,d:1,l:null,r:null},lg(k);if(0<Un(I,k.to))return ee?pc(ee,I,K):k.r={from:I,to:K,d:1,l:null,r:null},lg(k);Un(I,k.from)<0&&(k.from=I,k.l=null,k.d=ee?ee.d+1:1),0<Un(K,k.to)&&(k.to=K,k.r=null,k.d=k.l?k.l.d+1:1),K=!k.r,se&&!k.l&&Ks(k,se),ee&&K&&Ks(k,ee)}}function Ks(k,I){Wh(I)||function K(ee,We){var ve=We.from,Ie=We.to,Le=We.l,We=We.r;pc(ee,ve,Ie),Le&&K(ee,Le),We&&K(ee,We)}(k,I)}function sg(k,I){var K=Ld(I),ee=K.next();if(ee.done)return!1;for(var se=ee.value,ve=Ld(k),Ie=ve.next(se.from),Le=Ie.value;!ee.done&&!Ie.done;){if(Un(Le.from,se.to)<=0&&0<=Un(Le.to,se.from))return!0;Un(se.from,Le.from)<0?se=(ee=K.next(Le.from)).value:Le=(Ie=ve.next(se.from)).value}return!1}function Ld(k){var I=Wh(k)?null:{s:0,n:k};return{next:function(K){for(var ee=0<arguments.length;I;)switch(I.s){case 0:if(I.s=1,ee)for(;I.n.l&&Un(K,I.n.from)<0;)I={up:I,n:I.n.l,s:1};else for(;I.n.l;)I={up:I,n:I.n.l,s:1};case 1:if(I.s=2,!ee||Un(K,I.n.to)<=0)return{value:I.n,done:!1};case 2:if(I.n.r){I.s=3,I={up:I,n:I.n.r,s:0};continue}case 3:I=I.up}return{done:!0}}}}function lg(k){var I,K,ee=(((I=k.r)===null||I===void 0?void 0:I.d)||0)-(((K=k.l)===null||K===void 0?void 0:K.d)||0),se=1<ee?"r":ee<-1?"l":"";se&&(I=se=="r"?"l":"r",K=r({},k),ee=k[se],k.from=ee.from,k.to=ee.to,k[se]=ee[se],K[se]=ee[I],(k[I]=K).d=Kh(K)),k.d=Kh(k)}function Kh(K){var I=K.r,K=K.l;return(I?K?Math.max(I.d,K.d):I.d:K?K.d:0)+1}function $d(k,I){return o(I).forEach(function(K){k[K]?Ks(k[K],I[K]):k[K]=function ee(se){var ve,Ie,Le={};for(ve in se)h(se,ve)&&(Ie=se[ve],Le[ve]=!Ie||typeof Ie!="object"||J.has(Ie.constructor)?Ie:ee(Ie));return Le}(I[K])}),k}function Zh(k,I){return k.all||I.all||Object.keys(k).some(function(K){return I[K]&&sg(I[K],k[K])})}m(ya.prototype,((ai={add:function(k){return Ks(this,k),this},addKey:function(k){return pc(this,k,k),this},addKeys:function(k){var I=this;return k.forEach(function(K){return pc(I,K,K)}),this},hasKey:function(k){var I=Ld(this).next(k).value;return I&&Un(I.from,k)<=0&&0<=Un(I.to,k)}})[le]=function(){return Ld(this)},ai));var Zs={},Yh={},Xh=!1;function Bd(k){$d(Yh,k),Xh||(Xh=!0,setTimeout(function(){Xh=!1,Jh(Yh,!(Yh={}))},0))}function Jh(k,I){I===void 0&&(I=!1);var K=new Set;if(k.all)for(var ee=0,se=Object.values(Zs);ee<se.length;ee++)ug(Ie=se[ee],k,K,I);else for(var ve in k){var Ie,Le=/^idb\:\/\/(.*)\/(.*)\//.exec(ve);Le&&(ve=Le[1],Le=Le[2],(Ie=Zs["idb://".concat(ve,"/").concat(Le)])&&ug(Ie,k,K,I))}K.forEach(function(We){return We()})}function ug(k,I,K,ee){for(var se=[],ve=0,Ie=Object.entries(k.queries.query);ve<Ie.length;ve++){for(var Le=Ie[ve],We=Le[0],Ye=[],tt=0,He=Le[1];tt<He.length;tt++){var rt=He[tt];Zh(I,rt.obsSet)?rt.subscribers.forEach(function(Xe){return K.add(Xe)}):ee&&Ye.push(rt)}ee&&se.push([We,Ye])}if(ee)for(var Ge=0,et=se;Ge<et.length;Ge++){var it=et[Ge],We=it[0],Ye=it[1];k.queries.query[We]=Ye}}function Vw(k){var I=k._state,K=k._deps.indexedDB;if(I.isBeingOpened||k.idbdb)return I.dbReadyPromise.then(function(){return I.dbOpenError?Lr(I.dbOpenError):k});I.isBeingOpened=!0,I.dbOpenError=null,I.openComplete=!1;var ee=I.openCanceller,se=Math.round(10*k.verno),ve=!1;function Ie(){if(I.openCanceller!==ee)throw new Ae.DatabaseClosed("db.open() was cancelled")}function Le(){return new D(function(rt,Ge){if(Ie(),!K)throw new Ae.MissingAPI;var et=k.name,it=I.autoSchema||!se?K.open(et):K.open(et,se);if(!it)throw new Ae.MissingAPI;it.onerror=Oi(Ge),it.onblocked=Te(k._fireOnBlocked),it.onupgradeneeded=Te(function(Xe){var dt;tt=it.transaction,I.autoSchema&&!k._options.allowEmptyDB?(it.onerror=Vs,tt.abort(),it.result.close(),(dt=K.deleteDatabase(et)).onsuccess=dt.onerror=Te(function(){Ge(new Ae.NoSuchDatabase("Database ".concat(et," doesnt exist")))})):(tt.onerror=Oi(Ge),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,He=Xe<1,k.idbdb=it.result,ve&&Od(k,tt),hc(k,Xe/10,tt,Ge))},Ge),it.onsuccess=Te(function(){tt=null;var Xe,dt,yt,bt,xt,Ft=k.idbdb=it.result,qt=S(Ft.objectStoreNames);if(0<qt.length)try{var Dt=Ft.transaction((bt=qt).length===1?bt[0]:bt,"readonly");if(I.autoSchema)dt=Ft,yt=Dt,(Xe=k).verno=dt.version/10,yt=Xe._dbSchema=Yl(0,dt,yt),Xe._storeNames=S(dt.objectStoreNames,0),Id(Xe,[Xe._allTables],o(yt),yt);else if(Md(k,k._dbSchema,Dt),((xt=jd(Yl(0,(xt=k).idbdb,Dt),xt._dbSchema)).add.length||xt.change.some(function(Bt){return Bt.add.length||Bt.change.length}))&&!ve)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ft.close(),se=Ft.version+1,ve=!0,rt(Le());is(k,Dt)}catch{}xo.push(k),Ft.onversionchange=Te(function(Bt){I.vcFired=!0,k.on("versionchange").fire(Bt)}),Ft.onclose=Te(function(Bt){k.on("close").fire(Bt)}),He&&(xt=k._deps,Dt=et,Ft=xt.indexedDB,xt=xt.IDBKeyRange,Fd(Ft)||Dt===Bs||Vh(Ft,xt).put({name:Dt}).catch(Fe)),rt()},Ge)}).catch(function(rt){switch(rt==null?void 0:rt.name){case"UnknownError":if(0<I.PR1398_maxLoop)return I.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Le();break;case"VersionError":if(0<se)return se=0,Le()}return D.reject(rt)})}var We,Ye=I.dbReadyResolve,tt=null,He=!1;return D.race([ee,(typeof navigator>"u"?D.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(rt){function Ge(){return indexedDB.databases().finally(rt)}We=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then(Le)]).then(function(){return Ie(),I.onReadyBeingFired=[],D.resolve(Gh(function(){return k.on.ready.fire(k.vip)})).then(function rt(){if(0<I.onReadyBeingFired.length){var Ge=I.onReadyBeingFired.reduce(_e,Fe);return I.onReadyBeingFired=[],D.resolve(Gh(function(){return Ge(k.vip)})).then(rt)}})}).finally(function(){I.openCanceller===ee&&(I.onReadyBeingFired=null,I.isBeingOpened=!1)}).catch(function(rt){I.dbOpenError=rt;try{tt&&tt.abort()}catch{}return ee===I.openCanceller&&k._close(),Lr(rt)}).finally(function(){I.openComplete=!0,Ye()}).then(function(){var rt;return He&&(rt={},k.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(et){et.name&&(rt["idb://".concat(k.name,"/").concat(Ge.name,"/").concat(et.name)]=new ya(-1/0,[[[]]]))}),rt["idb://".concat(k.name,"/").concat(Ge.name,"/")]=rt["idb://".concat(k.name,"/").concat(Ge.name,"/:dels")]=new ya(-1/0,[[[]]])}),ga(Gl).fire(rt),Jh(rt,!0)),k})}function mc(k){function I(ve){return k.next(ve)}var K=se(I),ee=se(function(ve){return k.throw(ve)});function se(ve){return function(We){var Le=ve(We),We=Le.value;return Le.done?We:We&&typeof We.then=="function"?We.then(K,ee):s(We)?Promise.all(We).then(K,ee):K(We)}}return se(I)()}function os(k,I,K){for(var ee=s(k)?k.slice():[k],se=0;se<K;++se)ee.push(I);return ee}var Gw={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(k){return r(r({},k),{table:function(I){var K=k.table(I),ee=K.schema,se={},ve=[];function Ie(He,rt,Ge){var et=ta(He),it=se[et]=se[et]||[],Xe=He==null?0:typeof He=="string"?1:He.length,dt=0<rt,dt=r(r({},Ge),{name:dt?"".concat(et,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:dt,keyTail:rt,keyLength:Xe,extractKey:Zl(He),unique:!dt&&Ge.unique});return it.push(dt),dt.isPrimaryKey||ve.push(dt),1<Xe&&Ie(Xe===2?He[0]:He.slice(0,Xe-1),rt+1,Ge),it.sort(function(yt,bt){return yt.keyTail-bt.keyTail}),dt}I=Ie(ee.primaryKey.keyPath,0,ee.primaryKey),se[":id"]=[I];for(var Le=0,We=ee.indexes;Le<We.length;Le++){var Ye=We[Le];Ie(Ye.keyPath,0,Ye)}function tt(He){var rt,Ge=He.query.index;return Ge.isVirtual?r(r({},He),{query:{index:Ge.lowLevelIndex,range:(rt=He.query.range,Ge=Ge.keyTail,{type:rt.type===1?2:rt.type,lower:os(rt.lower,rt.lowerOpen?k.MAX_KEY:k.MIN_KEY,Ge),lowerOpen:!0,upper:os(rt.upper,rt.upperOpen?k.MIN_KEY:k.MAX_KEY,Ge),upperOpen:!0})}}):He}return r(r({},K),{schema:r(r({},ee),{primaryKey:I,indexes:ve,getIndexByKeyPath:function(He){return(He=se[ta(He)])&&He[0]}}),count:function(He){return K.count(tt(He))},query:function(He){return K.query(tt(He))},openCursor:function(He){var rt=He.query.index,Ge=rt.keyTail,et=rt.isVirtual,it=rt.keyLength;return et?K.openCursor(tt(He)).then(function(dt){return dt&&Xe(dt)}):K.openCursor(He);function Xe(dt){return Object.create(dt,{continue:{value:function(yt){yt!=null?dt.continue(os(yt,He.reverse?k.MAX_KEY:k.MIN_KEY,Ge)):He.unique?dt.continue(dt.key.slice(0,it).concat(He.reverse?k.MIN_KEY:k.MAX_KEY,Ge)):dt.continue()}},continuePrimaryKey:{value:function(yt,bt){dt.continuePrimaryKey(os(yt,k.MAX_KEY,Ge),bt)}},primaryKey:{get:function(){return dt.primaryKey}},key:{get:function(){var yt=dt.key;return it===1?yt[0]:yt.slice(0,it)}},value:{get:function(){return dt.value}}})}}})}})}};function zd(k,I,K,ee){return K=K||{},ee=ee||"",o(k).forEach(function(se){var ve,Ie,Le;h(I,se)?(ve=k[se],Ie=I[se],typeof ve=="object"&&typeof Ie=="object"&&ve&&Ie?(Le=ue(ve))!==ue(Ie)?K[ee+se]=I[se]:Le==="Object"?zd(ve,Ie,K,ee+se+"."):ve!==Ie&&(K[ee+se]=I[se]):ve!==Ie&&(K[ee+se]=I[se])):K[ee+se]=void 0}),o(I).forEach(function(se){h(k,se)||(K[ee+se]=I[se])}),K}function Ud(k,I){return I.type==="delete"?I.keys:I.keys||I.values.map(k.extractKey)}var cg={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(k){return r(r({},k),{table:function(I){var K=k.table(I),ee=K.schema.primaryKey;return r(r({},K),{mutate:function(se){var ve=Ce.trans,Ie=ve.table(I).hook,Le=Ie.deleting,We=Ie.creating,Ye=Ie.updating;switch(se.type){case"add":if(We.fire===Fe)break;return ve._promise("readwrite",function(){return tt(se)},!0);case"put":if(We.fire===Fe&&Ye.fire===Fe)break;return ve._promise("readwrite",function(){return tt(se)},!0);case"delete":if(Le.fire===Fe)break;return ve._promise("readwrite",function(){return tt(se)},!0);case"deleteRange":if(Le.fire===Fe)break;return ve._promise("readwrite",function(){return function He(rt,Ge,et){return K.query({trans:rt,values:!1,query:{index:ee,range:Ge},limit:et}).then(function(it){var Xe=it.result;return tt({type:"delete",keys:Xe,trans:rt}).then(function(dt){return 0<dt.numFailures?Promise.reject(dt.failures[0]):Xe.length<et?{failures:[],numFailures:0,lastResult:void 0}:He(rt,r(r({},Ge),{lower:Xe[Xe.length-1],lowerOpen:!0}),et)})})}(se.trans,se.range,1e4)},!0)}return K.mutate(se);function tt(He){var rt,Ge,et,it=Ce.trans,Xe=He.keys||Ud(ee,He);if(!Xe)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Xe}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),rt=K,et=Xe,((Ge=He).type==="add"?Promise.resolve([]):rt.getMany({trans:Ge.trans,keys:et,cache:"immutable"})).then(function(dt){var yt=Xe.map(function(bt,xt){var Ft,qt,Dt,Bt=dt[xt],Vt={onerror:null,onsuccess:null};return He.type==="delete"?Le.fire.call(Vt,bt,Bt,it):He.type==="add"||Bt===void 0?(Ft=We.fire.call(Vt,bt,He.values[xt],it),bt==null&&Ft!=null&&(He.keys[xt]=bt=Ft,ee.outbound||j(He.values[xt],ee.keyPath,bt))):(Ft=zd(Bt,He.values[xt]),(qt=Ye.fire.call(Vt,Ft,bt,Bt,it))&&(Dt=He.values[xt],Object.keys(qt).forEach(function(Mt){h(Dt,Mt)?Dt[Mt]=qt[Mt]:j(Dt,Mt,qt[Mt])}))),Vt});return K.mutate(He).then(function(bt){for(var xt=bt.failures,Ft=bt.results,qt=bt.numFailures,bt=bt.lastResult,Dt=0;Dt<Xe.length;++Dt){var Bt=(Ft||Xe)[Dt],Vt=yt[Dt];Bt==null?Vt.onerror&&Vt.onerror(xt[Dt]):Vt.onsuccess&&Vt.onsuccess(He.type==="put"&&dt[Dt]?He.values[Dt]:Bt)}return{failures:xt,results:Ft,numFailures:qt,lastResult:bt}}).catch(function(bt){return yt.forEach(function(xt){return xt.onerror&&xt.onerror(bt)}),Promise.reject(bt)})})}}})}})}};function Qh(k,I,K){try{if(!I||I.keys.length<k.length)return null;for(var ee=[],se=0,ve=0;se<I.keys.length&&ve<k.length;++se)Un(I.keys[se],k[ve])===0&&(ee.push(K?Z(I.values[se]):I.values[se]),++ve);return ee.length===k.length?ee:null}catch{return null}}var dg={stack:"dbcore",level:-1,create:function(k){return{table:function(I){var K=k.table(I);return r(r({},K),{getMany:function(ee){if(!ee.cache)return K.getMany(ee);var se=Qh(ee.keys,ee.trans._cache,ee.cache==="clone");return se?D.resolve(se):K.getMany(ee).then(function(ve){return ee.trans._cache={keys:ee.keys,values:ee.cache==="clone"?Z(ve):ve},ve})},mutate:function(ee){return ee.type!=="add"&&(ee.trans._cache=null),K.mutate(ee)}})}}}};function Ys(k,I){return k.trans.mode==="readonly"&&!!k.subscr&&!k.trans.explicit&&k.trans.db._options.cache!=="disabled"&&!I.schema.primaryKey.outbound}function fg(k,I){switch(k){case"query":return I.values&&!I.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ww={stack:"dbcore",level:0,name:"Observability",create:function(k){var I=k.schema.name,K=new ya(k.MIN_KEY,k.MAX_KEY);return r(r({},k),{transaction:function(ee,se,ve){if(Ce.subscr&&se!=="readonly")throw new Ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ce.querier));return k.transaction(ee,se,ve)},table:function(ee){var se=k.table(ee),ve=se.schema,Ie=ve.primaryKey,He=ve.indexes,Le=Ie.extractKey,We=Ie.outbound,Ye=Ie.autoIncrement&&He.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(Ie.keyPath)}),tt=r(r({},se),{mutate:function(Ge){function et(Mt){return Mt="idb://".concat(I,"/").concat(ee,"/").concat(Mt),bt[Mt]||(bt[Mt]=new ya)}var it,Xe,dt,yt=Ge.trans,bt=Ge.mutatedParts||(Ge.mutatedParts={}),xt=et(""),Ft=et(":dels"),qt=Ge.type,Vt=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[Ud(Ie,Ge).filter(function(Mt){return Mt}),Ge.values]:[],Dt=Vt[0],Bt=Vt[1],Vt=Ge.trans._cache;return s(Dt)?(xt.addKeys(Dt),(Vt=qt==="delete"||Dt.length===Bt.length?Qh(Dt,Vt):null)||Ft.addKeys(Dt),(Vt||Bt)&&(it=et,Xe=Vt,dt=Bt,ve.indexes.forEach(function(Mt){var Xt=it(Mt.name||"");function un(kn){return kn!=null?Mt.extractKey(kn):null}function fn(kn){return Mt.multiEntry&&s(kn)?kn.forEach(function(Ia){return Xt.addKey(Ia)}):Xt.addKey(kn)}(Xe||dt).forEach(function(kn,Kr){var bn=Xe&&un(Xe[Kr]),Kr=dt&&un(dt[Kr]);Un(bn,Kr)!==0&&(bn!=null&&fn(bn),Kr!=null&&fn(Kr))})}))):Dt?(Bt={from:(Bt=Dt.lower)!==null&&Bt!==void 0?Bt:k.MIN_KEY,to:(Bt=Dt.upper)!==null&&Bt!==void 0?Bt:k.MAX_KEY},Ft.add(Bt),xt.add(Bt)):(xt.add(K),Ft.add(K),ve.indexes.forEach(function(Mt){return et(Mt.name).add(K)})),se.mutate(Ge).then(function(Mt){return!Dt||Ge.type!=="add"&&Ge.type!=="put"||(xt.addKeys(Mt.results),Ye&&Ye.forEach(function(Xt){for(var un=Ge.values.map(function(bn){return Xt.extractKey(bn)}),fn=Xt.keyPath.findIndex(function(bn){return bn===Ie.keyPath}),kn=0,Ia=Mt.results.length;kn<Ia;++kn)un[kn][fn]=Mt.results[kn];et(Xt.name).addKeys(un)})),yt.mutatedParts=$d(yt.mutatedParts||{},bt),Mt})}}),He=function(et){var it=et.query,et=it.index,it=it.range;return[et,new ya((et=it.lower)!==null&&et!==void 0?et:k.MIN_KEY,(it=it.upper)!==null&&it!==void 0?it:k.MAX_KEY)]},rt={get:function(Ge){return[Ie,new ya(Ge.key)]},getMany:function(Ge){return[Ie,new ya().addKeys(Ge.keys)]},count:He,query:He,openCursor:He};return o(rt).forEach(function(Ge){tt[Ge]=function(et){var it=Ce.subscr,Xe=!!it,dt=Ys(Ce,se)&&fg(Ge,et)?et.obsSet={}:it;if(Xe){var yt=function(Bt){return Bt="idb://".concat(I,"/").concat(ee,"/").concat(Bt),dt[Bt]||(dt[Bt]=new ya)},bt=yt(""),xt=yt(":dels"),it=rt[Ge](et),Xe=it[0],it=it[1];if((Ge==="query"&&Xe.isPrimaryKey&&!et.values?xt:yt(Xe.name||"")).add(it),!Xe.isPrimaryKey){if(Ge!=="count"){var Ft=Ge==="query"&&We&&et.values&&se.query(r(r({},et),{values:!1}));return se[Ge].apply(this,arguments).then(function(Bt){if(Ge==="query"){if(We&&et.values)return Ft.then(function(un){return un=un.result,bt.addKeys(un),Bt});var Vt=et.values?Bt.result.map(Le):Bt.result;(et.values?bt:xt).addKeys(Vt)}else if(Ge==="openCursor"){var Mt=Bt,Xt=et.values;return Mt&&Object.create(Mt,{key:{get:function(){return xt.addKey(Mt.primaryKey),Mt.key}},primaryKey:{get:function(){var un=Mt.primaryKey;return xt.addKey(un),un}},value:{get:function(){return Xt&&bt.addKey(Mt.primaryKey),Mt.value}}})}return Bt})}xt.add(K)}}return se[Ge].apply(this,arguments)}}),tt}})}};function hg(k,I,K){if(K.numFailures===0)return I;if(I.type==="deleteRange")return null;var ee=I.keys?I.keys.length:"values"in I&&I.values?I.values.length:1;return K.numFailures===ee?null:(I=r({},I),s(I.keys)&&(I.keys=I.keys.filter(function(se,ve){return!(ve in K.failures)})),"values"in I&&s(I.values)&&(I.values=I.values.filter(function(se,ve){return!(ve in K.failures)})),I)}function qd(k,I){return K=k,((ee=I).lower===void 0||(ee.lowerOpen?0<Un(K,ee.lower):0<=Un(K,ee.lower)))&&(k=k,(I=I).upper===void 0||(I.upperOpen?Un(k,I.upper)<0:Un(k,I.upper)<=0));var K,ee}function ep(k,I,rt,ee,se,ve){if(!rt||rt.length===0)return k;var Ie=I.query.index,Le=Ie.multiEntry,We=I.query.range,Ye=ee.schema.primaryKey.extractKey,tt=Ie.extractKey,He=(Ie.lowLevelIndex||Ie).extractKey,rt=rt.reduce(function(Ge,et){var it=Ge,Xe=[];if(et.type==="add"||et.type==="put")for(var dt=new ya,yt=et.values.length-1;0<=yt;--yt){var bt,xt=et.values[yt],Ft=Ye(xt);dt.hasKey(Ft)||(bt=tt(xt),(Le&&s(bt)?bt.some(function(Mt){return qd(Mt,We)}):qd(bt,We))&&(dt.addKey(Ft),Xe.push(xt)))}switch(et.type){case"add":var qt=new ya().addKeys(I.values?Ge.map(function(Xt){return Ye(Xt)}):Ge),it=Ge.concat(I.values?Xe.filter(function(Xt){return Xt=Ye(Xt),!qt.hasKey(Xt)&&(qt.addKey(Xt),!0)}):Xe.map(function(Xt){return Ye(Xt)}).filter(function(Xt){return!qt.hasKey(Xt)&&(qt.addKey(Xt),!0)}));break;case"put":var Dt=new ya().addKeys(et.values.map(function(Xt){return Ye(Xt)}));it=Ge.filter(function(Xt){return!Dt.hasKey(I.values?Ye(Xt):Xt)}).concat(I.values?Xe:Xe.map(function(Xt){return Ye(Xt)}));break;case"delete":var Bt=new ya().addKeys(et.keys);it=Ge.filter(function(Xt){return!Bt.hasKey(I.values?Ye(Xt):Xt)});break;case"deleteRange":var Vt=et.range;it=Ge.filter(function(Xt){return!qd(Ye(Xt),Vt)})}return it},k);return rt===k?k:(rt.sort(function(Ge,et){return Un(He(Ge),He(et))||Un(Ye(Ge),Ye(et))}),I.limit&&I.limit<1/0&&(rt.length>I.limit?rt.length=I.limit:k.length===I.limit&&rt.length<I.limit&&(se.dirty=!0)),ve?Object.freeze(rt):rt)}function Xl(k,I){return Un(k.lower,I.lower)===0&&Un(k.upper,I.upper)===0&&!!k.lowerOpen==!!I.lowerOpen&&!!k.upperOpen==!!I.upperOpen}function gc(k,I){return function(K,ee,se,ve){if(K===void 0)return ee!==void 0?-1:0;if(ee===void 0)return 1;if((ee=Un(K,ee))===0){if(se&&ve)return 0;if(se)return 1;if(ve)return-1}return ee}(k.lower,I.lower,k.lowerOpen,I.lowerOpen)<=0&&0<=function(K,ee,se,ve){if(K===void 0)return ee!==void 0?1:0;if(ee===void 0)return-1;if((ee=Un(K,ee))===0){if(se&&ve)return 0;if(se)return-1;if(ve)return 1}return ee}(k.upper,I.upper,k.upperOpen,I.upperOpen)}function Kw(k,I,K,ee){k.subscribers.add(K),ee.addEventListener("abort",function(){var se,ve;k.subscribers.delete(K),k.subscribers.size===0&&(se=k,ve=I,setTimeout(function(){se.subscribers.size===0&&Q(ve,se)},3e3))})}var Hd={stack:"dbcore",level:0,name:"Cache",create:function(k){var I=k.schema.name;return r(r({},k),{transaction:function(K,ee,se){var ve,Ie,Le=k.transaction(K,ee,se);return ee==="readwrite"&&(Ie=(ve=new AbortController).signal,se=function(We){return function(){if(ve.abort(),ee==="readwrite"){for(var Ye=new Set,tt=0,He=K;tt<He.length;tt++){var rt=He[tt],Ge=Zs["idb://".concat(I,"/").concat(rt)];if(Ge){var et=k.table(rt),it=Ge.optimisticOps.filter(function(Xt){return Xt.trans===Le});if(Le._explicit&&We&&Le.mutatedParts)for(var Xe=0,dt=Object.values(Ge.queries.query);Xe<dt.length;Xe++)for(var yt=0,bt=(qt=dt[Xe]).slice();yt<bt.length;yt++)Zh((Dt=bt[yt]).obsSet,Le.mutatedParts)&&(Q(qt,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)}));else if(0<it.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(Xt){return Xt.trans!==Le});for(var xt=0,Ft=Object.values(Ge.queries.query);xt<Ft.length;xt++)for(var qt,Dt,Bt,Vt=0,Mt=(qt=Ft[xt]).slice();Vt<Mt.length;Vt++)(Dt=Mt[Vt]).res!=null&&Le.mutatedParts&&(We&&!Dt.dirty?(Bt=Object.isFrozen(Dt.res),Bt=ep(Dt.res,Dt.req,it,et,Dt,Bt),Dt.dirty?(Q(qt,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)})):Bt!==Dt.res&&(Dt.res=Bt,Dt.promise=D.resolve({result:Bt}))):(Dt.dirty&&Q(qt,Dt),Dt.subscribers.forEach(function(Xt){return Ye.add(Xt)})))}}}Ye.forEach(function(Xt){return Xt()})}}},Le.addEventListener("abort",se(!1),{signal:Ie}),Le.addEventListener("error",se(!1),{signal:Ie}),Le.addEventListener("complete",se(!0),{signal:Ie})),Le},table:function(K){var ee=k.table(K),se=ee.schema.primaryKey;return r(r({},ee),{mutate:function(ve){var Ie=Ce.trans;if(se.outbound||Ie.db._options.cache==="disabled"||Ie.explicit||Ie.idbtrans.mode!=="readwrite")return ee.mutate(ve);var Le=Zs["idb://".concat(I,"/").concat(K)];return Le?(Ie=ee.mutate(ve),ve.type!=="add"&&ve.type!=="put"||!(50<=ve.values.length||Ud(se,ve).some(function(We){return We==null}))?(Le.optimisticOps.push(ve),ve.mutatedParts&&Bd(ve.mutatedParts),Ie.then(function(We){0<We.numFailures&&(Q(Le.optimisticOps,ve),(We=hg(0,ve,We))&&Le.optimisticOps.push(We),ve.mutatedParts&&Bd(ve.mutatedParts))}),Ie.catch(function(){Q(Le.optimisticOps,ve),ve.mutatedParts&&Bd(ve.mutatedParts)})):Ie.then(function(We){var Ye=hg(0,r(r({},ve),{values:ve.values.map(function(tt,He){var rt;return We.failures[He]?tt:(tt=(rt=se.keyPath)!==null&&rt!==void 0&&rt.includes(".")?Z(tt):r({},tt),j(tt,se.keyPath,We.results[He]),tt)})}),We);Le.optimisticOps.push(Ye),queueMicrotask(function(){return ve.mutatedParts&&Bd(ve.mutatedParts)})}),Ie):ee.mutate(ve)},query:function(ve){if(!Ys(Ce,ee)||!fg("query",ve))return ee.query(ve);var Ie=((Ye=Ce.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",He=Ce,Le=He.requery,We=He.signal,Ye=function(et,it,Xe,dt){var yt=Zs["idb://".concat(et,"/").concat(it)];if(!yt)return[];if(!(it=yt.queries[Xe]))return[null,!1,yt,null];var bt=it[(dt.query?dt.query.index.name:null)||""];if(!bt)return[null,!1,yt,null];switch(Xe){case"query":var xt=bt.find(function(Ft){return Ft.req.limit===dt.limit&&Ft.req.values===dt.values&&Xl(Ft.req.query.range,dt.query.range)});return xt?[xt,!0,yt,bt]:[bt.find(function(Ft){return("limit"in Ft.req?Ft.req.limit:1/0)>=dt.limit&&(!dt.values||Ft.req.values)&&gc(Ft.req.query.range,dt.query.range)}),!1,yt,bt];case"count":return xt=bt.find(function(Ft){return Xl(Ft.req.query.range,dt.query.range)}),[xt,!!xt,yt,bt]}}(I,K,"query",ve),tt=Ye[0],He=Ye[1],rt=Ye[2],Ge=Ye[3];return tt&&He?tt.obsSet=ve.obsSet:(He=ee.query(ve).then(function(et){var it=et.result;if(tt&&(tt.res=it),Ie){for(var Xe=0,dt=it.length;Xe<dt;++Xe)Object.freeze(it[Xe]);Object.freeze(it)}else et.result=Z(it);return et}).catch(function(et){return Ge&&tt&&Q(Ge,tt),Promise.reject(et)}),tt={obsSet:ve.obsSet,promise:He,subscribers:new Set,type:"query",req:ve,dirty:!1},Ge?Ge.push(tt):(Ge=[tt],(rt=rt||(Zs["idb://".concat(I,"/").concat(K)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ve.query.index.name||""]=Ge)),Kw(tt,Ge,Le,We),tt.promise.then(function(et){return{result:ep(et.result,ve,rt==null?void 0:rt.optimisticOps,ee,tt,Ie)}})}})}})}};function yc(k,I){return new Proxy(k,{get:function(K,ee,se){return ee==="db"?I:Reflect.get(K,ee,se)}})}var eo=(Nr.prototype.version=function(k){if(isNaN(k)||k<.1)throw new Ae.Type("Given version is not a positive number");if(k=Math.round(10*k)/10,this.idbdb||this._state.isBeingOpened)throw new Ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,k);var I=this._versions,K=I.filter(function(ee){return ee._cfg.version===k})[0];return K||(K=new this.Version(k),I.push(K),I.sort(qh),K.stores({}),this._state.autoSchema=!1,K)},Nr.prototype._whenReady=function(k){var I=this;return this.idbdb&&(this._state.openComplete||Ce.letThrough||this._vip)?k():new D(function(K,ee){if(I._state.openComplete)return ee(new Ae.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return void ee(new Ae.DatabaseClosed);I.open().catch(Fe)}I._state.dbReadyPromise.then(K,ee)}).then(k)},Nr.prototype.use=function(k){var I=k.stack,K=k.create,ee=k.level,se=k.name;return se&&this.unuse({stack:I,name:se}),k=this._middlewares[I]||(this._middlewares[I]=[]),k.push({stack:I,create:K,level:ee??10,name:se}),k.sort(function(ve,Ie){return ve.level-Ie.level}),this},Nr.prototype.unuse=function(k){var I=k.stack,K=k.name,ee=k.create;return I&&this._middlewares[I]&&(this._middlewares[I]=this._middlewares[I].filter(function(se){return ee?se.create!==ee:!!K&&se.name!==K})),this},Nr.prototype.open=function(){var k=this;return Qo(ye,function(){return Vw(k)})},Nr.prototype._close=function(){var k=this._state,I=xo.indexOf(this);if(0<=I&&xo.splice(I,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}k.isBeingOpened||(k.dbReadyPromise=new D(function(K){k.dbReadyResolve=K}),k.openCanceller=new D(function(K,ee){k.cancelOpen=ee}))},Nr.prototype.close=function(K){var I=(K===void 0?{disableAutoOpen:!0}:K).disableAutoOpen,K=this._state;I?(K.isBeingOpened&&K.cancelOpen(new Ae.DatabaseClosed),this._close(),K.autoOpen=!1,K.dbOpenError=new Ae.DatabaseClosed):(this._close(),K.autoOpen=this._options.autoOpen||K.isBeingOpened,K.openComplete=!1,K.dbOpenError=null)},Nr.prototype.delete=function(k){var I=this;k===void 0&&(k={disableAutoOpen:!0});var K=0<arguments.length&&typeof arguments[0]!="object",ee=this._state;return new D(function(se,ve){function Ie(){I.close(k);var Le=I._deps.indexedDB.deleteDatabase(I.name);Le.onsuccess=Te(function(){var We,Ye,tt;We=I._deps,Ye=I.name,tt=We.indexedDB,We=We.IDBKeyRange,Fd(tt)||Ye===Bs||Vh(tt,We).delete(Ye).catch(Fe),se()}),Le.onerror=Oi(ve),Le.onblocked=I._fireOnBlocked}if(K)throw new Ae.InvalidArgument("Invalid closeOptions argument to db.delete()");ee.isBeingOpened?ee.dbReadyPromise.then(Ie):Ie()})},Nr.prototype.backendDB=function(){return this.idbdb},Nr.prototype.isOpen=function(){return this.idbdb!==null},Nr.prototype.hasBeenClosed=function(){var k=this._state.dbOpenError;return k&&k.name==="DatabaseClosed"},Nr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Nr.prototype,"tables",{get:function(){var k=this;return o(this._allTables).map(function(I){return k._allTables[I]})},enumerable:!1,configurable:!0}),Nr.prototype.transaction=function(){var k=(function(I,K,ee){var se=arguments.length;if(se<2)throw new Ae.InvalidArgument("Too few arguments");for(var ve=new Array(se-1);--se;)ve[se-1]=arguments[se];return ee=ve.pop(),[I,V(ve),ee]}).apply(this,arguments);return this._transaction.apply(this,k)},Nr.prototype._transaction=function(k,I,K){var ee=this,se=Ce.trans;se&&se.db===this&&k.indexOf("!")===-1||(se=null);var ve,Ie,Le=k.indexOf("?")!==-1;k=k.replace("!","").replace("?","");try{if(Ie=I.map(function(Ye){if(Ye=Ye instanceof ee.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),k=="r"||k===Ii)ve=Ii;else{if(k!="rw"&&k!=cc)throw new Ae.InvalidArgument("Invalid transaction mode: "+k);ve=cc}if(se){if(se.mode===Ii&&ve===cc){if(!Le)throw new Ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");se=null}se&&Ie.forEach(function(Ye){if(se&&se.storeNames.indexOf(Ye)===-1){if(!Le)throw new Ae.SubTransaction("Table "+Ye+" not included in parent transaction.");se=null}}),Le&&se&&!se.active&&(se=null)}}catch(Ye){return se?se._promise(null,function(tt,He){He(Ye)}):Lr(Ye)}var We=(function Ye(tt,He,rt,Ge,et){return D.resolve().then(function(){var it=Ce.transless||Ce,Xe=tt._createTransaction(He,rt,tt._dbSchema,Ge);if(Xe.explicit=!0,it={trans:Xe,transless:it},Ge)Xe.idbtrans=Ge.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(bt){return bt.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,He,rt,null,et)})):Lr(bt)}var dt,yt=X(et);return yt&&En(),it=D.follow(function(){var bt;(dt=et.call(Xe,Xe))&&(yt?(bt=zn.bind(null,null),dt.then(bt,bt)):typeof dt.next=="function"&&typeof dt.throw=="function"&&(dt=mc(dt)))},it),(dt&&typeof dt.then=="function"?D.resolve(dt).then(function(bt){return Xe.active?bt:Lr(new Ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):it.then(function(){return dt})).then(function(bt){return Ge&&Xe._resolve(),Xe._completion.then(function(){return bt})}).catch(function(bt){return Xe._reject(bt),Lr(bt)})})}).bind(null,this,ve,Ie,se,K);return se?se._promise(ve,We,"lock"):Ce.trans?Qo(Ce.transless,function(){return ee._whenReady(We)}):this._whenReady(We)},Nr.prototype.table=function(k){if(!h(this._allTables,k))throw new Ae.InvalidTable("Table ".concat(k," does not exist"));return this._allTables[k]},Nr);function Nr(k,I){var K=this;this._middlewares={},this.verno=0;var ee=Nr.dependencies;this._options=I=r({addons:Nr.addons,autoOpen:!0,indexedDB:ee.indexedDB,IDBKeyRange:ee.IDBKeyRange,cache:"cloned"},I),this._deps={indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange},ee=I.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var se,ve,Ie,Le,We,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Fe,dbReadyPromise:null,cancelOpen:Fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:I.autoOpen};Ye.dbReadyPromise=new D(function(He){Ye.dbReadyResolve=He}),Ye.openCanceller=new D(function(He,rt){Ye.cancelOpen=rt}),this._state=Ye,this.name=k,this.on=as(this,"populate","blocked","versionchange","close",{ready:[_e,Fe]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(rt,Ge){Nr.vip(function(){var et,it=K._state;it.openComplete?(it.dbOpenError||D.resolve().then(rt),Ge&&He(rt)):it.onReadyBeingFired?(it.onReadyBeingFired.push(rt),Ge&&He(rt)):(He(rt),et=K,Ge||He(function Xe(){et.on.ready.unsubscribe(rt),et.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(se=this,Bl(Hl.prototype,function(dt,Xe){this.db=se;var Ge=zs,et=null;if(Xe)try{Ge=Xe()}catch(yt){et=yt}var it=dt._ctx,Xe=it.table,dt=Xe.hook.reading.fire;this._ctx={table:Xe,index:it.index,isPrimKey:!it.index||Xe.schema.primKey.keyPath&&it.index===Xe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:et,or:it.or,valueMapper:dt!==Ne?dt:null}})),this.Table=(ve=this,Bl(Fh.prototype,function(He,rt,Ge){this.db=ve,this._tx=Ge,this.name=He,this.schema=rt,this.hook=ve._allTables[He]?ve._allTables[He].hook:as(null,{creating:[ke,Fe],reading:[$,Ne],updating:[ie,Fe],deleting:[ce,Fe]})})),this.Transaction=(Ie=this,Bl(Uh.prototype,function(He,rt,Ge,et,it){var Xe=this;this.db=Ie,this.mode=He,this.storeNames=rt,this.schema=Ge,this.chromeTransactionDurability=et,this.idbtrans=null,this.on=as(this,"complete","error","abort"),this.parent=it||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new D(function(dt,yt){Xe._resolve=dt,Xe._reject=yt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(dt){var yt=Xe.active;return Xe.active=!1,Xe.on.error.fire(dt),Xe.parent?Xe.parent._reject(dt):yt&&Xe.idbtrans&&Xe.idbtrans.abort(),Lr(dt)})})),this.Version=(Le=this,Bl(Hw.prototype,function(He){this.db=Le,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,Bl(Hs.prototype,function(He,rt,Ge){if(this.db=We,this._ctx={table:He,index:rt===":id"?null:rt,or:Ge},this._cmp=this._ascending=Un,this._descending=function(et,it){return Un(it,et)},this._max=function(et,it){return 0<Un(et,it)?et:it},this._min=function(et,it){return Un(et,it)<0?et:it},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ae.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(K.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(K.name,"'. Closing db now to resume the delete request.")),K.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(K.name,"') was blocked")):console.warn("Upgrade '".concat(K.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=Kl(I.IDBKeyRange),this._createTransaction=function(He,rt,Ge,et){return new K.Transaction(He,rt,Ge,K._options.chromeTransactionDurability,et)},this._fireOnBlocked=function(He){K.on("blocked").fire(He),xo.filter(function(rt){return rt.name===K.name&&rt!==K&&!rt._state.vcFired}).map(function(rt){return rt.on("versionchange").fire(He)})},this.use(dg),this.use(Hd),this.use(Ww),this.use(Gw),this.use(cg);var tt=new Proxy(this,{get:function(He,rt,Ge){if(rt==="_vip")return!0;if(rt==="table")return function(it){return yc(K.table(it),tt)};var et=Reflect.get(He,rt,Ge);return et instanceof Fh?yc(et,tt):rt==="tables"?et.map(function(it){return yc(it,tt)}):rt==="_createTransaction"?function(){return yc(et.apply(this,arguments),tt)}:et}});this.vip=tt,ee.forEach(function(He){return He(K)})}var Jl,ai=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",pg=(Vd.prototype.subscribe=function(k,I,K){return this._subscribe(k&&typeof k!="function"?k:{next:k,error:I,complete:K})},Vd.prototype[ai]=function(){return this},Vd);function Vd(k){this._subscribe=k}try{Jl={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Jl={indexedDB:null,IDBKeyRange:null}}function mg(k){var I,K=!1,ee=new pg(function(se){var ve=X(k),Ie,Le=!1,We={},Ye={},tt={get closed(){return Le},unsubscribe:function(){Le||(Le=!0,Ie&&Ie.abort(),He&&ga.storagemutated.unsubscribe(Ge))}};se.start&&se.start(tt);var He=!1,rt=function(){return ts(et)},Ge=function(it){$d(We,it),Zh(Ye,We)&&rt()},et=function(){var it,Xe,dt;!Le&&Jl.indexedDB&&(We={},it={},Ie&&Ie.abort(),Ie=new AbortController,dt=function(yt){var bt=q();try{ve&&En();var xt=Zt(k,yt);return xt=ve?xt.finally(zn):xt}finally{bt&&z()}}(Xe={subscr:it,signal:Ie.signal,requery:rt,querier:k,trans:null}),Promise.resolve(dt).then(function(yt){K=!0,I=yt,Le||Xe.signal.aborted||(We={},function(bt){for(var xt in bt)if(h(bt,xt))return;return 1}(Ye=it)||He||(ga(Gl,Ge),He=!0),ts(function(){return!Le&&se.next&&se.next(yt)}))},function(yt){K=!1,["DatabaseClosedError","AbortError"].includes(yt==null?void 0:yt.name)||Le||ts(function(){Le||se.error&&se.error(yt)})}))};return setTimeout(rt,0),tt});return ee.hasValue=function(){return K},ee.getValue=function(){return I},ee}var Xs=eo;function tp(k){var I=ss;try{ss=!0,ga.storagemutated.fire(k),Jh(k,!0)}finally{ss=I}}m(Xs,r(r({},qe),{delete:function(k){return new Xs(k,{addons:[]}).delete()},exists:function(k){return new Xs(k,{addons:[]}).open().then(function(I){return I.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(k){try{return I=Xs.dependencies,K=I.indexedDB,I=I.IDBKeyRange,(Fd(K)?Promise.resolve(K.databases()).then(function(ee){return ee.map(function(se){return se.name}).filter(function(se){return se!==Bs})}):Vh(K,I).toCollection().primaryKeys()).then(k)}catch{return Lr(new Ae.MissingAPI)}var I,K},defineClass:function(){return function(k){u(this,k)}},ignoreTransaction:function(k){return Ce.trans?Qo(Ce.transless,k):k()},vip:Gh,async:function(k){return function(){try{var I=mc(k.apply(this,arguments));return I&&typeof I.then=="function"?I:D.resolve(I)}catch(K){return Lr(K)}}},spawn:function(k,I,K){try{var ee=mc(k.apply(K,I||[]));return ee&&typeof ee.then=="function"?ee:D.resolve(ee)}catch(se){return Lr(se)}},currentTransaction:{get:function(){return Ce.trans||null}},waitFor:function(k,I){return I=D.resolve(typeof k=="function"?Xs.ignoreTransaction(k):k).timeout(I||6e4),Ce.trans?Ce.trans.waitFor(I):I},Promise:D,debug:{get:function(){return De},set:function(k){Ee(k)}},derive:w,extend:u,props:m,override:E,Events:as,on:ga,liveQuery:mg,extendObservabilitySet:$d,getByKeyPath:O,setByKeyPath:j,delByKeyPath:function(k,I){typeof I=="string"?j(k,I,void 0):"length"in I&&[].map.call(I,function(K){j(k,K,void 0)})},shallowClone:N,deepClone:Z,getObjectDiff:zd,cmp:Un,asap:A,minKey:-1/0,addons:[],connections:xo,errnames:Pe,dependencies:Jl,cache:Zs,semVer:"4.0.11",version:"4.0.11".split(".").map(function(k){return parseInt(k)}).reduce(function(k,I,K){return k+I/Math.pow(10,2*K)})})),Xs.maxKey=Kl(Xs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ga(Gl,function(k){ss||(k=new CustomEvent(Gs,{detail:k}),ss=!0,dispatchEvent(k),ss=!1)}),addEventListener(Gs,function(k){k=k.detail,ss||tp(k)}));var Ql,ss=!1,Ba=function(){};return typeof BroadcastChannel<"u"&&((Ba=function(){(Ql=new BroadcastChannel(Gs)).onmessage=function(k){return k.data&&tp(k.data)}})(),typeof Ql.unref=="function"&&Ql.unref(),ga(Gl,function(k){ss||Ql.postMessage(k)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(k){if(!eo.disableBfCache&&k.persisted){De&&console.debug("Dexie: handling persisted pagehide"),Ql!=null&&Ql.close();for(var I=0,K=xo;I<K.length;I++)K[I].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(k){!eo.disableBfCache&&k.persisted&&(De&&console.debug("Dexie: handling persisted pageshow"),Ba(),tp({all:new ya(-1/0,[[]])}))})),D.rejectionMapper=function(k,I){return!k||k instanceof be||k instanceof TypeError||k instanceof SyntaxError||!k.name||!$e[k.name]?k:(I=new $e[k.name](I||k.message,k),"stack"in k&&v(I,"stack",{get:function(){return this.inner.stack}}),I)},Ee(De),r(eo,Object.freeze({__proto__:null,Dexie:eo,liveQuery:mg,Entity:Cd,cmp:Un,PropModification:ql,replacePrefix:function(k,I){return new ql({replacePrefix:[k,I]})},add:function(k){return new ql({add:k})},remove:function(k){return new ql({remove:k})},default:eo,RangeSet:ya,mergeRanges:Ks,rangesOverlap:sg}),{default:eo}),eo})}(Wy)),Wy.exports}var P7=M7();const QS=Qa(P7),H3=Symbol.for("Dexie"),lb=globalThis[H3]||(globalThis[H3]=QS);if(QS.semVer!==lb.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${QS.semVer} and ${lb.semVer}`);const{liveQuery:K0e,mergeRanges:Z0e,rangesOverlap:Y0e,RangeSet:X0e,cmp:J0e,Entity:Q0e,PropModification:ege,replacePrefix:tge,add:nge,remove:rge}=lb;class F7 extends lb{constructor(){super("LiteChatDatabase_Rewrite_v1");Ua(this,"conversations");Ua(this,"interactions");Ua(this,"mods");Ua(this,"appState");Ua(this,"providerConfigs");Ua(this,"apiKeys");Ua(this,"syncRepos");Ua(this,"projects");this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const sn=new F7,Oc=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class Ht{static async loadConversations(){try{return(await sn.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Oc(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await sn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await sn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await sn.interactions.where({conversationId:t}).sortBy("index")).map(r=>Oc(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await sn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await sn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await sn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await sn.mods.orderBy("loadOrder").toArray()).map(n=>Oc(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await sn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await sn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await sn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await sn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=sn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Oc(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await sn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await sn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=sn.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Oc(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await sn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await sn.transaction("rw",[sn.apiKeys,sn.providerConfigs],async()=>{const n=await sn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await sn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await sn.syncRepos.toArray()).map(n=>Oc(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await sn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await sn.transaction("rw",[sn.syncRepos,sn.conversations],async()=>{const n=await sn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await sn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await sn.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Oc(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await sn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await sn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await sn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>sn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await sn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await sn.transaction("rw",[sn.projects,sn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await sn.transaction("rw",[sn.conversations,sn.interactions,sn.mods,sn.appState,sn.providerConfigs,sn.apiKeys,sn.syncRepos,sn.projects],async()=>{await sn.interactions.clear(),await sn.conversations.clear(),await sn.projects.clear(),await sn.mods.clear(),await sn.appState.clear(),await sn.providerConfigs.clear(),await sn.apiKeys.clear(),await sn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const er=Go(Wo((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n});try{const r=await Ht.loadInteractionsForConversation(n);r.sort((a,i)=>a.index-i.index),e({interactions:r,status:"idle"})}catch(r){console.error("InteractionStore: Error loading interactions",r),e({error:"Failed load interactions",status:"error"})}},_addInteractionToState:n=>{const r=t().interactions;if(r.some(a=>a.id===n.id))console.warn(`InteractionStore: Interaction ${n.id} already exists in state.`);else{const a=[...r,n];a.sort((i,o)=>i.index-o.index),e({interactions:a})}},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&(s.toolResults=[...r.metadata.toolResults])),Object.assign(o,{...r,metadata:void 0}),o.metadata=s}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)?a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r:console.warn(`InteractionStore: Tried to append chunk to non-streaming interaction buffer ${n}.`)})},_removeInteractionFromState:n=>{const a=t().interactions.filter(i=>i.id!==n);e({interactions:a})},addInteractionAndPersist:async n=>{const a=t().interactions.filter(u=>u.conversationId===n.conversationId),i=a.reduce((u,c)=>Math.max(u,c.index),-1)+1,o=a.length>0?a[a.length-1].id:null,s={...n,index:i,parentId:o};t()._addInteractionToState(s);try{return await Ht.saveInteraction(s),s}catch(u){throw console.error("InteractionStore: Error persisting added interaction",u),t()._removeInteractionFromState(s.id),e({error:"Failed to save interaction"}),u}},updateInteractionAndPersist:async n=>{try{await Ht.saveInteraction({...n})}catch(r){throw console.error(`InteractionStore: Error persisting final update for ${n.id}`,r),e({error:"Failed to save final interaction state"}),r}},deleteInteraction:async n=>{const r=t().interactions.find(i=>i.id===n);if(!r)return;const a={...r};t()._removeInteractionFromState(n),t()._removeStreamingId(n);try{await Ht.deleteInteraction(n)}catch(i){throw console.error("InteractionStore: Error deleting interaction",i),t()._addInteractionToState(a),a.status==="STREAMING"&&t()._addStreamingId(n),e({error:"Failed to delete interaction"}),i}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions."),e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null})},setError:n=>{e(r=>{r.error=n,n?r.status="error":r.status==="error"&&(r.status=r.streamingInteractionIds.length>0?"streaming":"idle")})},setStatus:n=>{t().status!==n&&e({status:n})},_addStreamingId:n=>{e(r=>{r.streamingInteractionIds.includes(n)||(r.streamingInteractionIds.push(n),r.activeStreamBuffers[n]="",r.streamingInteractionIds.length===1&&(r.status="streaming"),r.error=null)})},_removeStreamingId:n=>{e(r=>{const a=r.streamingInteractionIds.indexOf(n);a!==-1&&(r.streamingInteractionIds.splice(a,1),delete r.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),r.streamingInteractionIds.length===0&&r.status==="streaming"&&(r.status=r.error?"error":"idle"))})}}))),Ka=Go(Wo(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})}}))),lm=Go(Wo(e=>({attachedFilesMetadata:[],enabledTools:new Set,addAttachedFile:t=>{e(n=>{if(n.attachedFilesMetadata.some(a=>a.source==="direct"&&t.source==="direct"?a.name===t.name:a.source==="vfs"&&t.source==="vfs"?a.path===t.path:!1))console.warn(`InputStore: File "${t.name}" (source: ${t.source}) already attached. Skipping.`);else{const a={id:crypto.randomUUID(),...t};n.attachedFilesMetadata.push(a)}})},removeAttachedFile:t=>{e(n=>{n.attachedFilesMetadata=n.attachedFilesMetadata.filter(r=>r.id!==t)})},clearAttachedFiles:()=>{e({attachedFilesMetadata:[],enabledTools:new Set})},setEnabledTools:t=>{e(n=>{n.enabledTools=t(n.enabledTools)})}}))),L7="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let $o=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=L7[n[e]&63];return t};function $7(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ei=$7();var E6="vercel.ai.error",B7=Symbol.for(E6),k6,z7=class C6 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[k6]=!0,this.name=t,this.cause=r}static isInstance(t){return C6.hasMarker(t,E6)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};k6=B7;var Sn=z7,A6="AI_APICallError",T6=`vercel.ai.error.${A6}`,U7=Symbol.for(T6),R6,fa=class extends Sn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:A6,message:t,cause:s}),this[R6]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Sn.hasMarker(t,T6)}};R6=U7;var N6="AI_EmptyResponseBodyError",I6=`vercel.ai.error.${N6}`,q7=Symbol.for(I6),O6,gE=class extends Sn{constructor({message:t="Empty response body"}={}){super({name:N6,message:t}),this[O6]=!0}static isInstance(t){return Sn.hasMarker(t,I6)}};O6=q7;function l0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var j6="AI_InvalidArgumentError",D6=`vercel.ai.error.${j6}`,H7=Symbol.for(D6),M6,yE=class extends Sn{constructor({message:t,cause:n,argument:r}){super({name:j6,message:t,cause:n}),this[M6]=!0,this.argument=r}static isInstance(t){return Sn.hasMarker(t,D6)}};M6=H7;var P6="AI_InvalidPromptError",F6=`vercel.ai.error.${P6}`,V7=Symbol.for(F6),L6,pl=class extends Sn{constructor({prompt:t,message:n,cause:r}){super({name:P6,message:`Invalid prompt: ${n}`,cause:r}),this[L6]=!0,this.prompt=t}static isInstance(t){return Sn.hasMarker(t,F6)}};L6=V7;var $6="AI_InvalidResponseDataError",B6=`vercel.ai.error.${$6}`,G7=Symbol.for(B6),z6,Of=class extends Sn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:$6,message:n}),this[z6]=!0,this.data=t}static isInstance(t){return Sn.hasMarker(t,B6)}};z6=G7;var U6="AI_JSONParseError",q6=`vercel.ai.error.${U6}`,W7=Symbol.for(q6),H6,ju=class extends Sn{constructor({text:t,cause:n}){super({name:U6,message:`JSON parsing failed: Text: ${t}.
Error message: ${l0(n)}`,cause:n}),this[H6]=!0,this.text=t}static isInstance(t){return Sn.hasMarker(t,q6)}};H6=W7;var V6="AI_LoadAPIKeyError",G6=`vercel.ai.error.${V6}`,K7=Symbol.for(G6),W6,py=class extends Sn{constructor({message:t}){super({name:V6,message:t}),this[W6]=!0}static isInstance(t){return Sn.hasMarker(t,G6)}};W6=K7;var K6="AI_TooManyEmbeddingValuesForCallError",Z6=`vercel.ai.error.${K6}`,Z7=Symbol.for(Z6),Y6,bE=class extends Sn{constructor(t){super({name:K6,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[Y6]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Sn.hasMarker(t,Z6)}};Y6=Z7;var X6="AI_TypeValidationError",J6=`vercel.ai.error.${X6}`,Y7=Symbol.for(J6),Q6,X7=class e2 extends Sn{constructor({value:t,cause:n}){super({name:X6,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${l0(n)}`,cause:n}),this[Q6]=!0,this.value=t}static isInstance(t){return Sn.hasMarker(t,J6)}static wrap({value:t,cause:n}){return e2.isInstance(n)&&n.value===t?n:new e2({value:t,cause:n})}};Q6=Y7;var Du=X7,eO="AI_UnsupportedFunctionalityError",tO=`vercel.ai.error.${eO}`,J7=Symbol.for(tO),nO,vr=class extends Sn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:eO,message:n}),this[nO]=!0,this.functionality=t}static isInstance(t){return Sn.hasMarker(t,tO)}};nO=J7;let Q7=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var vE={},xv={};xv.byteLength=nU;xv.toByteArray=aU;xv.fromByteArray=sU;var ws=[],co=[],eU=typeof Uint8Array<"u"?Uint8Array:Array,B_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var yf=0,tU=B_.length;yf<tU;++yf)ws[yf]=B_[yf],co[B_.charCodeAt(yf)]=yf;co[45]=62;co[95]=63;function rO(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function nU(e){var t=rO(e),n=t[0],r=t[1];return(n+r)*3/4-r}function rU(e,t,n){return(t+n)*3/4-n}function aU(e){var t,n=rO(e),r=n[0],a=n[1],i=new eU(rU(e,r,a)),o=0,s=a>0?r-4:r,u;for(u=0;u<s;u+=4)t=co[e.charCodeAt(u)]<<18|co[e.charCodeAt(u+1)]<<12|co[e.charCodeAt(u+2)]<<6|co[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=co[e.charCodeAt(u)]<<2|co[e.charCodeAt(u+1)]>>4,i[o++]=t&255),a===1&&(t=co[e.charCodeAt(u)]<<10|co[e.charCodeAt(u+1)]<<4|co[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function iU(e){return ws[e>>18&63]+ws[e>>12&63]+ws[e>>6&63]+ws[e&63]}function oU(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(iU(r));return a.join("")}function sU(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(oU(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(ws[t>>2]+ws[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(ws[t>>10]+ws[t>>4&63]+ws[t<<2&63]+"=")),a.join("")}var wE={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */wE.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,u=(1<<s)-1,c=u>>1,f=-7,h=n?a-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-f)-1,g>>=-f,f+=s;f>0;i=i*256+e[t+h],h+=m,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+h],h+=m,f-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};wE.write=function(e,t,n,r,a,i){var o,s,u,c=i*8-a-1,f=(1<<c)-1,h=f>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=m/u:t+=m*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=v,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+g]=o&255,g+=v,o/=256,c-=8);e[n+g-v]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=xv,n=wE,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;f.TYPED_ARRAY_SUPPORT=u(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const pe=new i(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,i.prototype),Object.setPrototypeOf(pe,R),pe.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(pe){if(pe>a)throw new RangeError('The value "'+pe+'" is invalid for option "size"');const R=new i(pe);return Object.setPrototypeOf(R,f.prototype),R}function f(pe,R,H){if(typeof pe=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(pe)}return h(pe,R,H)}f.poolSize=8192;function h(pe,R,H){if(typeof pe=="string")return w(pe,R);if(o.isView(pe))return x(pe);if(pe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe);if(at(pe,o)||pe&&at(pe.buffer,o)||typeof s<"u"&&(at(pe,s)||pe&&at(pe.buffer,s)))return S(pe,R,H);if(typeof pe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const de=pe.valueOf&&pe.valueOf();if(de!=null&&de!==pe)return f.from(de,R,H);const Re=E(pe);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof pe[Symbol.toPrimitive]=="function")return f.from(pe[Symbol.toPrimitive]("string"),R,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof pe)}f.from=function(pe,R,H){return h(pe,R,H)},Object.setPrototypeOf(f.prototype,i.prototype),Object.setPrototypeOf(f,i);function m(pe){if(typeof pe!="number")throw new TypeError('"size" argument must be of type number');if(pe<0)throw new RangeError('The value "'+pe+'" is invalid for option "size"')}function g(pe,R,H){return m(pe),pe<=0?c(pe):R!==void 0?typeof H=="string"?c(pe).fill(R,H):c(pe).fill(R):c(pe)}f.alloc=function(pe,R,H){return g(pe,R,H)};function v(pe){return m(pe),c(pe<0?0:C(pe)|0)}f.allocUnsafe=function(pe){return v(pe)},f.allocUnsafeSlow=function(pe){return v(pe)};function w(pe,R){if((typeof R!="string"||R==="")&&(R="utf8"),!f.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const H=O(pe,R)|0;let de=c(H);const Re=de.write(pe,R);return Re!==H&&(de=de.slice(0,Re)),de}function _(pe){const R=pe.length<0?0:C(pe.length)|0,H=c(R);for(let de=0;de<R;de+=1)H[de]=pe[de]&255;return H}function x(pe){if(at(pe,i)){const R=new i(pe);return S(R.buffer,R.byteOffset,R.byteLength)}return _(pe)}function S(pe,R,H){if(R<0||pe.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<R+(H||0))throw new RangeError('"length" is outside of buffer bounds');let de;return R===void 0&&H===void 0?de=new i(pe):H===void 0?de=new i(pe,R):de=new i(pe,R,H),Object.setPrototypeOf(de,f.prototype),de}function E(pe){if(f.isBuffer(pe)){const R=C(pe.length)|0,H=c(R);return H.length===0||pe.copy(H,0,0,R),H}if(pe.length!==void 0)return typeof pe.length!="number"||_t(pe.length)?c(0):_(pe);if(pe.type==="Buffer"&&Array.isArray(pe.data))return _(pe.data)}function C(pe){if(pe>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return pe|0}function A(pe){return+pe!=pe&&(pe=0),f.alloc(+pe)}f.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==f.prototype},f.compare=function(R,H){if(at(R,i)&&(R=f.from(R,R.offset,R.byteLength)),at(H,i)&&(H=f.from(H,H.offset,H.byteLength)),!f.isBuffer(R)||!f.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===H)return 0;let de=R.length,Re=H.length;for(let ye=0,Ce=Math.min(de,Re);ye<Ce;++ye)if(R[ye]!==H[ye]){de=R[ye],Re=H[ye];break}return de<Re?-1:Re<de?1:0},f.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(R,H){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return f.alloc(0);let de;if(H===void 0)for(H=0,de=0;de<R.length;++de)H+=R[de].length;const Re=f.allocUnsafe(H);let ye=0;for(de=0;de<R.length;++de){let Ce=R[de];if(at(Ce,i))ye+Ce.length>Re.length?(f.isBuffer(Ce)||(Ce=f.from(Ce)),Ce.copy(Re,ye)):i.prototype.set.call(Re,Ce,ye);else if(f.isBuffer(Ce))Ce.copy(Re,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=Ce.length}return Re};function O(pe,R){if(f.isBuffer(pe))return pe.length;if(o.isView(pe)||at(pe,o))return pe.byteLength;if(typeof pe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof pe);const H=pe.length,de=arguments.length>2&&arguments[2]===!0;if(!de&&H===0)return 0;let Re=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return _e(pe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return Ze(pe).length;default:if(Re)return de?-1:_e(pe).length;R=(""+R).toLowerCase(),Re=!0}}f.byteLength=O;function j(pe,R,H){let de=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,R>>>=0,H<=R))return"";for(pe||(pe="utf8");;)switch(pe){case"hex":return ae(this,R,H);case"utf8":case"utf-8":return ne(this,R,H);case"ascii":return G(this,R,H);case"latin1":case"binary":return X(this,R,H);case"base64":return le(this,R,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,R,H);default:if(de)throw new TypeError("Unknown encoding: "+pe);pe=(pe+"").toLowerCase(),de=!0}}f.prototype._isBuffer=!0;function N(pe,R,H){const de=pe[R];pe[R]=pe[H],pe[H]=de}f.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let H=0;H<R;H+=2)N(this,H,H+1);return this},f.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let H=0;H<R;H+=4)N(this,H,H+3),N(this,H+1,H+2);return this},f.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let H=0;H<R;H+=8)N(this,H,H+7),N(this,H+1,H+6),N(this,H+2,H+5),N(this,H+3,H+4);return this},f.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?ne(this,0,R):j.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(R){if(!f.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:f.compare(this,R)===0},f.prototype.inspect=function(){let R="";const H=e.INSPECT_MAX_BYTES;return R=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(R+=" ... "),"<Buffer "+R+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(R,H,de,Re,ye){if(at(R,i)&&(R=f.from(R,R.offset,R.byteLength)),!f.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(H===void 0&&(H=0),de===void 0&&(de=R?R.length:0),Re===void 0&&(Re=0),ye===void 0&&(ye=this.length),H<0||de>R.length||Re<0||ye>this.length)throw new RangeError("out of range index");if(Re>=ye&&H>=de)return 0;if(Re>=ye)return-1;if(H>=de)return 1;if(H>>>=0,de>>>=0,Re>>>=0,ye>>>=0,this===R)return 0;let Ce=ye-Re,oe=de-H;const ft=Math.min(Ce,oe),vt=this.slice(Re,ye),D=R.slice(H,de);for(let Be=0;Be<ft;++Be)if(vt[Be]!==D[Be]){Ce=vt[Be],oe=D[Be];break}return Ce<oe?-1:oe<Ce?1:0};function U(pe,R,H,de,Re){if(pe.length===0)return-1;if(typeof H=="string"?(de=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,_t(H)&&(H=Re?0:pe.length-1),H<0&&(H=pe.length+H),H>=pe.length){if(Re)return-1;H=pe.length-1}else if(H<0)if(Re)H=0;else return-1;if(typeof R=="string"&&(R=f.from(R,de)),f.isBuffer(R))return R.length===0?-1:V(pe,R,H,de,Re);if(typeof R=="number")return R=R&255,typeof i.prototype.indexOf=="function"?Re?i.prototype.indexOf.call(pe,R,H):i.prototype.lastIndexOf.call(pe,R,H):V(pe,[R],H,de,Re);throw new TypeError("val must be string, number or Buffer")}function V(pe,R,H,de,Re){let ye=1,Ce=pe.length,oe=R.length;if(de!==void 0&&(de=String(de).toLowerCase(),de==="ucs2"||de==="ucs-2"||de==="utf16le"||de==="utf-16le")){if(pe.length<2||R.length<2)return-1;ye=2,Ce/=2,oe/=2,H/=2}function ft(D,Be){return ye===1?D[Be]:D.readUInt16BE(Be*ye)}let vt;if(Re){let D=-1;for(vt=H;vt<Ce;vt++)if(ft(pe,vt)===ft(R,D===-1?0:vt-D)){if(D===-1&&(D=vt),vt-D+1===oe)return D*ye}else D!==-1&&(vt-=vt-D),D=-1}else for(H+oe>Ce&&(H=Ce-oe),vt=H;vt>=0;vt--){let D=!0;for(let Be=0;Be<oe;Be++)if(ft(pe,vt+Be)!==ft(R,Be)){D=!1;break}if(D)return vt}return-1}f.prototype.includes=function(R,H,de){return this.indexOf(R,H,de)!==-1},f.prototype.indexOf=function(R,H,de){return U(this,R,H,de,!0)},f.prototype.lastIndexOf=function(R,H,de){return U(this,R,H,de,!1)};function J(pe,R,H,de){H=Number(H)||0;const Re=pe.length-H;de?(de=Number(de),de>Re&&(de=Re)):de=Re;const ye=R.length;de>ye/2&&(de=ye/2);let Ce;for(Ce=0;Ce<de;++Ce){const oe=parseInt(R.substr(Ce*2,2),16);if(_t(oe))return Ce;pe[H+Ce]=oe}return Ce}function P(pe,R,H,de){return Et(_e(R,pe.length-H),pe,H,de)}function Z(pe,R,H,de){return Et(De(R),pe,H,de)}function F(pe,R,H,de){return Et(Ze(R),pe,H,de)}function ue(pe,R,H,de){return Et(Ee(R,pe.length-H),pe,H,de)}f.prototype.write=function(R,H,de,Re){if(H===void 0)Re="utf8",de=this.length,H=0;else if(de===void 0&&typeof H=="string")Re=H,de=this.length,H=0;else if(isFinite(H))H=H>>>0,isFinite(de)?(de=de>>>0,Re===void 0&&(Re="utf8")):(Re=de,de=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ye=this.length-H;if((de===void 0||de>ye)&&(de=ye),R.length>0&&(de<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let Ce=!1;for(;;)switch(Re){case"hex":return J(this,R,H,de);case"utf8":case"utf-8":return P(this,R,H,de);case"ascii":case"latin1":case"binary":return Z(this,R,H,de);case"base64":return F(this,R,H,de);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,R,H,de);default:if(Ce)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),Ce=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function le(pe,R,H){return R===0&&H===pe.length?t.fromByteArray(pe):t.fromByteArray(pe.slice(R,H))}function ne(pe,R,H){H=Math.min(pe.length,H);const de=[];let Re=R;for(;Re<H;){const ye=pe[Re];let Ce=null,oe=ye>239?4:ye>223?3:ye>191?2:1;if(Re+oe<=H){let ft,vt,D,Be;switch(oe){case 1:ye<128&&(Ce=ye);break;case 2:ft=pe[Re+1],(ft&192)===128&&(Be=(ye&31)<<6|ft&63,Be>127&&(Ce=Be));break;case 3:ft=pe[Re+1],vt=pe[Re+2],(ft&192)===128&&(vt&192)===128&&(Be=(ye&15)<<12|(ft&63)<<6|vt&63,Be>2047&&(Be<55296||Be>57343)&&(Ce=Be));break;case 4:ft=pe[Re+1],vt=pe[Re+2],D=pe[Re+3],(ft&192)===128&&(vt&192)===128&&(D&192)===128&&(Be=(ye&15)<<18|(ft&63)<<12|(vt&63)<<6|D&63,Be>65535&&Be<1114112&&(Ce=Be))}}Ce===null?(Ce=65533,oe=1):Ce>65535&&(Ce-=65536,de.push(Ce>>>10&1023|55296),Ce=56320|Ce&1023),de.push(Ce),Re+=oe}return te(de)}const Q=4096;function te(pe){const R=pe.length;if(R<=Q)return String.fromCharCode.apply(String,pe);let H="",de=0;for(;de<R;)H+=String.fromCharCode.apply(String,pe.slice(de,de+=Q));return H}function G(pe,R,H){let de="";H=Math.min(pe.length,H);for(let Re=R;Re<H;++Re)de+=String.fromCharCode(pe[Re]&127);return de}function X(pe,R,H){let de="";H=Math.min(pe.length,H);for(let Re=R;Re<H;++Re)de+=String.fromCharCode(pe[Re]);return de}function ae(pe,R,H){const de=pe.length;(!R||R<0)&&(R=0),(!H||H<0||H>de)&&(H=de);let Re="";for(let ye=R;ye<H;++ye)Re+=Nt[pe[ye]];return Re}function be(pe,R,H){const de=pe.slice(R,H);let Re="";for(let ye=0;ye<de.length-1;ye+=2)Re+=String.fromCharCode(de[ye]+de[ye+1]*256);return Re}f.prototype.slice=function(R,H){const de=this.length;R=~~R,H=H===void 0?de:~~H,R<0?(R+=de,R<0&&(R=0)):R>de&&(R=de),H<0?(H+=de,H<0&&(H=0)):H>de&&(H=de),H<R&&(H=R);const Re=this.subarray(R,H);return Object.setPrototypeOf(Re,f.prototype),Re};function we(pe,R,H){if(pe%1!==0||pe<0)throw new RangeError("offset is not uint");if(pe+R>H)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(R,H,de){R=R>>>0,H=H>>>0,de||we(R,H,this.length);let Re=this[R],ye=1,Ce=0;for(;++Ce<H&&(ye*=256);)Re+=this[R+Ce]*ye;return Re},f.prototype.readUintBE=f.prototype.readUIntBE=function(R,H,de){R=R>>>0,H=H>>>0,de||we(R,H,this.length);let Re=this[R+--H],ye=1;for(;H>0&&(ye*=256);)Re+=this[R+--H]*ye;return Re},f.prototype.readUint8=f.prototype.readUInt8=function(R,H){return R=R>>>0,H||we(R,1,this.length),this[R]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(R,H){return R=R>>>0,H||we(R,2,this.length),this[R]|this[R+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(R,H){return R=R>>>0,H||we(R,2,this.length),this[R]<<8|this[R+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(R,H){return R=R>>>0,H||we(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(R,H){return R=R>>>0,H||we(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},f.prototype.readBigUInt64LE=Rt(function(R){R=R>>>0,ke(R,"offset");const H=this[R],de=this[R+7];(H===void 0||de===void 0)&&ce(R,this.length-8);const Re=H+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,ye=this[++R]+this[++R]*2**8+this[++R]*2**16+de*2**24;return BigInt(Re)+(BigInt(ye)<<BigInt(32))}),f.prototype.readBigUInt64BE=Rt(function(R){R=R>>>0,ke(R,"offset");const H=this[R],de=this[R+7];(H===void 0||de===void 0)&&ce(R,this.length-8);const Re=H*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],ye=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+de;return(BigInt(Re)<<BigInt(32))+BigInt(ye)}),f.prototype.readIntLE=function(R,H,de){R=R>>>0,H=H>>>0,de||we(R,H,this.length);let Re=this[R],ye=1,Ce=0;for(;++Ce<H&&(ye*=256);)Re+=this[R+Ce]*ye;return ye*=128,Re>=ye&&(Re-=Math.pow(2,8*H)),Re},f.prototype.readIntBE=function(R,H,de){R=R>>>0,H=H>>>0,de||we(R,H,this.length);let Re=H,ye=1,Ce=this[R+--Re];for(;Re>0&&(ye*=256);)Ce+=this[R+--Re]*ye;return ye*=128,Ce>=ye&&(Ce-=Math.pow(2,8*H)),Ce},f.prototype.readInt8=function(R,H){return R=R>>>0,H||we(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},f.prototype.readInt16LE=function(R,H){R=R>>>0,H||we(R,2,this.length);const de=this[R]|this[R+1]<<8;return de&32768?de|4294901760:de},f.prototype.readInt16BE=function(R,H){R=R>>>0,H||we(R,2,this.length);const de=this[R+1]|this[R]<<8;return de&32768?de|4294901760:de},f.prototype.readInt32LE=function(R,H){return R=R>>>0,H||we(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},f.prototype.readInt32BE=function(R,H){return R=R>>>0,H||we(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},f.prototype.readBigInt64LE=Rt(function(R){R=R>>>0,ke(R,"offset");const H=this[R],de=this[R+7];(H===void 0||de===void 0)&&ce(R,this.length-8);const Re=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(de<<24);return(BigInt(Re)<<BigInt(32))+BigInt(H+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),f.prototype.readBigInt64BE=Rt(function(R){R=R>>>0,ke(R,"offset");const H=this[R],de=this[R+7];(H===void 0||de===void 0)&&ce(R,this.length-8);const Re=(H<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(Re)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+de)}),f.prototype.readFloatLE=function(R,H){return R=R>>>0,H||we(R,4,this.length),n.read(this,R,!0,23,4)},f.prototype.readFloatBE=function(R,H){return R=R>>>0,H||we(R,4,this.length),n.read(this,R,!1,23,4)},f.prototype.readDoubleLE=function(R,H){return R=R>>>0,H||we(R,8,this.length),n.read(this,R,!0,52,8)},f.prototype.readDoubleBE=function(R,H){return R=R>>>0,H||we(R,8,this.length),n.read(this,R,!1,52,8)};function fe(pe,R,H,de,Re,ye){if(!f.isBuffer(pe))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Re||R<ye)throw new RangeError('"value" argument is out of bounds');if(H+de>pe.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(R,H,de,Re){if(R=+R,H=H>>>0,de=de>>>0,!Re){const oe=Math.pow(2,8*de)-1;fe(this,R,H,de,oe,0)}let ye=1,Ce=0;for(this[H]=R&255;++Ce<de&&(ye*=256);)this[H+Ce]=R/ye&255;return H+de},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(R,H,de,Re){if(R=+R,H=H>>>0,de=de>>>0,!Re){const oe=Math.pow(2,8*de)-1;fe(this,R,H,de,oe,0)}let ye=de-1,Ce=1;for(this[H+ye]=R&255;--ye>=0&&(Ce*=256);)this[H+ye]=R/Ce&255;return H+de},f.prototype.writeUint8=f.prototype.writeUInt8=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,1,255,0),this[H]=R&255,H+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,2,65535,0),this[H]=R&255,this[H+1]=R>>>8,H+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,2,65535,0),this[H]=R>>>8,this[H+1]=R&255,H+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,4,4294967295,0),this[H+3]=R>>>24,this[H+2]=R>>>16,this[H+1]=R>>>8,this[H]=R&255,H+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,4,4294967295,0),this[H]=R>>>24,this[H+1]=R>>>16,this[H+2]=R>>>8,this[H+3]=R&255,H+4};function Me(pe,R,H,de,Re){Se(R,de,Re,pe,H,7);let ye=Number(R&BigInt(4294967295));pe[H++]=ye,ye=ye>>8,pe[H++]=ye,ye=ye>>8,pe[H++]=ye,ye=ye>>8,pe[H++]=ye;let Ce=Number(R>>BigInt(32)&BigInt(4294967295));return pe[H++]=Ce,Ce=Ce>>8,pe[H++]=Ce,Ce=Ce>>8,pe[H++]=Ce,Ce=Ce>>8,pe[H++]=Ce,H}function Pe(pe,R,H,de,Re){Se(R,de,Re,pe,H,7);let ye=Number(R&BigInt(4294967295));pe[H+7]=ye,ye=ye>>8,pe[H+6]=ye,ye=ye>>8,pe[H+5]=ye,ye=ye>>8,pe[H+4]=ye;let Ce=Number(R>>BigInt(32)&BigInt(4294967295));return pe[H+3]=Ce,Ce=Ce>>8,pe[H+2]=Ce,Ce=Ce>>8,pe[H+1]=Ce,Ce=Ce>>8,pe[H]=Ce,H+8}f.prototype.writeBigUInt64LE=Rt(function(R,H=0){return Me(this,R,H,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Rt(function(R,H=0){return Pe(this,R,H,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(R,H,de,Re){if(R=+R,H=H>>>0,!Re){const ft=Math.pow(2,8*de-1);fe(this,R,H,de,ft-1,-ft)}let ye=0,Ce=1,oe=0;for(this[H]=R&255;++ye<de&&(Ce*=256);)R<0&&oe===0&&this[H+ye-1]!==0&&(oe=1),this[H+ye]=(R/Ce>>0)-oe&255;return H+de},f.prototype.writeIntBE=function(R,H,de,Re){if(R=+R,H=H>>>0,!Re){const ft=Math.pow(2,8*de-1);fe(this,R,H,de,ft-1,-ft)}let ye=de-1,Ce=1,oe=0;for(this[H+ye]=R&255;--ye>=0&&(Ce*=256);)R<0&&oe===0&&this[H+ye+1]!==0&&(oe=1),this[H+ye]=(R/Ce>>0)-oe&255;return H+de},f.prototype.writeInt8=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,1,127,-128),R<0&&(R=255+R+1),this[H]=R&255,H+1},f.prototype.writeInt16LE=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,2,32767,-32768),this[H]=R&255,this[H+1]=R>>>8,H+2},f.prototype.writeInt16BE=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,2,32767,-32768),this[H]=R>>>8,this[H+1]=R&255,H+2},f.prototype.writeInt32LE=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,4,2147483647,-2147483648),this[H]=R&255,this[H+1]=R>>>8,this[H+2]=R>>>16,this[H+3]=R>>>24,H+4},f.prototype.writeInt32BE=function(R,H,de){return R=+R,H=H>>>0,de||fe(this,R,H,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[H]=R>>>24,this[H+1]=R>>>16,this[H+2]=R>>>8,this[H+3]=R&255,H+4},f.prototype.writeBigInt64LE=Rt(function(R,H=0){return Me(this,R,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Rt(function(R,H=0){return Pe(this,R,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Oe(pe,R,H,de,Re,ye){if(H+de>pe.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function Ae(pe,R,H,de,Re){return R=+R,H=H>>>0,Re||Oe(pe,R,H,4),n.write(pe,R,H,de,23,4),H+4}f.prototype.writeFloatLE=function(R,H,de){return Ae(this,R,H,!0,de)},f.prototype.writeFloatBE=function(R,H,de){return Ae(this,R,H,!1,de)};function $e(pe,R,H,de,Re){return R=+R,H=H>>>0,Re||Oe(pe,R,H,8),n.write(pe,R,H,de,52,8),H+8}f.prototype.writeDoubleLE=function(R,H,de){return $e(this,R,H,!0,de)},f.prototype.writeDoubleBE=function(R,H,de){return $e(this,R,H,!1,de)},f.prototype.copy=function(R,H,de,Re){if(!f.isBuffer(R))throw new TypeError("argument should be a Buffer");if(de||(de=0),!Re&&Re!==0&&(Re=this.length),H>=R.length&&(H=R.length),H||(H=0),Re>0&&Re<de&&(Re=de),Re===de||R.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(de<0||de>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),R.length-H<Re-de&&(Re=R.length-H+de);const ye=Re-de;return this===R&&typeof i.prototype.copyWithin=="function"?this.copyWithin(H,de,Re):i.prototype.set.call(R,this.subarray(de,Re),H),ye},f.prototype.fill=function(R,H,de,Re){if(typeof R=="string"){if(typeof H=="string"?(Re=H,H=0,de=this.length):typeof de=="string"&&(Re=de,de=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!f.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(R.length===1){const Ce=R.charCodeAt(0);(Re==="utf8"&&Ce<128||Re==="latin1")&&(R=Ce)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(H<0||this.length<H||this.length<de)throw new RangeError("Out of range index");if(de<=H)return this;H=H>>>0,de=de===void 0?this.length:de>>>0,R||(R=0);let ye;if(typeof R=="number")for(ye=H;ye<de;++ye)this[ye]=R;else{const Ce=f.isBuffer(R)?R:f.from(R,Re),oe=Ce.length;if(oe===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(ye=0;ye<de-H;++ye)this[ye+H]=Ce[ye%oe]}return this};const qe={};function Fe(pe,R,H){qe[pe]=class extends H{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${pe}]`,this.stack,delete this.name}get code(){return pe}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${pe}]: ${this.message}`}}}Fe("ERR_BUFFER_OUT_OF_BOUNDS",function(pe){return pe?`${pe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Fe("ERR_INVALID_ARG_TYPE",function(pe,R){return`The "${pe}" argument must be of type number. Received type ${typeof R}`},TypeError),Fe("ERR_OUT_OF_RANGE",function(pe,R,H){let de=`The value of "${pe}" is out of range.`,Re=H;return Number.isInteger(H)&&Math.abs(H)>2**32?Re=Ne(String(H)):typeof H=="bigint"&&(Re=String(H),(H>BigInt(2)**BigInt(32)||H<-(BigInt(2)**BigInt(32)))&&(Re=Ne(Re)),Re+="n"),de+=` It must be ${R}. Received ${Re}`,de},RangeError);function Ne(pe){let R="",H=pe.length;const de=pe[0]==="-"?1:0;for(;H>=de+4;H-=3)R=`_${pe.slice(H-3,H)}${R}`;return`${pe.slice(0,H)}${R}`}function $(pe,R,H){ke(R,"offset"),(pe[R]===void 0||pe[R+H]===void 0)&&ce(R,pe.length-(H+1))}function Se(pe,R,H,de,Re,ye){if(pe>H||pe<R){const Ce=typeof R=="bigint"?"n":"";let oe;throw R===0||R===BigInt(0)?oe=`>= 0${Ce} and < 2${Ce} ** ${(ye+1)*8}${Ce}`:oe=`>= -(2${Ce} ** ${(ye+1)*8-1}${Ce}) and < 2 ** ${(ye+1)*8-1}${Ce}`,new qe.ERR_OUT_OF_RANGE("value",oe,pe)}$(de,Re,ye)}function ke(pe,R){if(typeof pe!="number")throw new qe.ERR_INVALID_ARG_TYPE(R,"number",pe)}function ce(pe,R,H){throw Math.floor(pe)!==pe?(ke(pe,H),new qe.ERR_OUT_OF_RANGE("offset","an integer",pe)):R<0?new qe.ERR_BUFFER_OUT_OF_BOUNDS:new qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,pe)}const ie=/[^+/0-9A-Za-z-_]/g;function Y(pe){if(pe=pe.split("=")[0],pe=pe.trim().replace(ie,""),pe.length<2)return"";for(;pe.length%4!==0;)pe=pe+"=";return pe}function _e(pe,R){R=R||1/0;let H;const de=pe.length;let Re=null;const ye=[];for(let Ce=0;Ce<de;++Ce){if(H=pe.charCodeAt(Ce),H>55295&&H<57344){if(!Re){if(H>56319){(R-=3)>-1&&ye.push(239,191,189);continue}else if(Ce+1===de){(R-=3)>-1&&ye.push(239,191,189);continue}Re=H;continue}if(H<56320){(R-=3)>-1&&ye.push(239,191,189),Re=H;continue}H=(Re-55296<<10|H-56320)+65536}else Re&&(R-=3)>-1&&ye.push(239,191,189);if(Re=null,H<128){if((R-=1)<0)break;ye.push(H)}else if(H<2048){if((R-=2)<0)break;ye.push(H>>6|192,H&63|128)}else if(H<65536){if((R-=3)<0)break;ye.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if((R-=4)<0)break;ye.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return ye}function De(pe){const R=[];for(let H=0;H<pe.length;++H)R.push(pe.charCodeAt(H)&255);return R}function Ee(pe,R){let H,de,Re;const ye=[];for(let Ce=0;Ce<pe.length&&!((R-=2)<0);++Ce)H=pe.charCodeAt(Ce),de=H>>8,Re=H%256,ye.push(Re),ye.push(de);return ye}function Ze(pe){return t.toByteArray(Y(pe))}function Et(pe,R,H,de){let Re;for(Re=0;Re<de&&!(Re+H>=R.length||Re>=pe.length);++Re)R[Re+H]=pe[Re];return Re}function at(pe,R){return pe instanceof R||pe!=null&&pe.constructor!=null&&pe.constructor.name!=null&&pe.constructor.name===R.name}function _t(pe){return pe!==pe}const Nt=function(){const pe="0123456789abcdef",R=new Array(256);for(let H=0;H<16;++H){const de=H*16;for(let Re=0;Re<16;++Re)R[de+Re]=pe[H]+pe[Re]}return R}();function Rt(pe){return typeof BigInt>"u"?Kt:pe}function Kt(){throw new Error("BigInt not supported")}})(vE);const Wt=vE.Buffer,Ar=vE.Buffer;var jc={exports:{}},V3;function lU(){if(V3)return jc.exports;V3=1;const e=typeof Wt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Wt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const f=JSON.parse(s,u);if(f===null||typeof f!="object")return f;const h=c&&c.protoAction||"error",m=c&&c.constructorAction||"error";if(h==="ignore"&&m==="ignore")return f;if(h!=="ignore"&&m!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return f}else if(h!=="ignore"&&m==="ignore"){if(t.test(s)===!1)return f}else if(n.test(s)===!1)return f;return a(f,{protoAction:h,constructorAction:m,safe:c&&c.safe})}function a(s,{protoAction:u="error",constructorAction:c="error",safe:f}={}){let h=[s];for(;h.length;){const m=h;h=[];for(const g of m){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(f===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const w=g[v];w&&typeof w=="object"&&h.push(w)}}}return s}function i(s,u,c){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,c)}finally{Error.stackTraceLimit=f}}function o(s,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return jc.exports=i,jc.exports.default=i,jc.exports.parse=i,jc.exports.safeParse=o,jc.exports.scan=a,jc.exports}var uU=lU();const Ko=Qa(uU);var cU={};function Ns(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function dU(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function fU(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function hU(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=pU(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function pU(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function u0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var sd=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Q7(n,t);if(e==null)return a;if(n.includes(r))throw new yE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},_s=sd();function mU(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function gU(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Ky(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function yU({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new py({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new py({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=cU[t],e==null)throw new py({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new py({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var ub=Symbol.for("vercel.ai.validator");function bU(e){return{[ub]:!0,validate:e}}function vU(e){return typeof e=="object"&&e!==null&&ub in e&&e[ub]===!0&&"validate"in e}function wU(e){return vU(e)?e:_U(e)}function _U(e){return bU(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function xU({value:e,schema:t}){const n=hh({value:e,schema:t});if(!n.success)throw Du.wrap({value:e,cause:n.error});return n.value}function hh({value:e,schema:t}){const n=wU(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Du.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Du.wrap({value:e,cause:r})}}}function SU({text:e,schema:t}){try{const n=Ko.parse(e);return t==null?n:xU({value:n,schema:t})}catch(n){throw ju.isInstance(n)||Du.isInstance(n)?n:new ju({text:e,cause:n})}}function Yc({text:e,schema:t}){try{const n=Ko.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=hh({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:ju.isInstance(n)?n:new ju({text:e,cause:n})}}}function G3(e){try{return Ko.parse(e),!0}catch{return!1}}function EU({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=hh({value:t[e],schema:n});if(!r.success)throw new yE({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var kU=()=>globalThis.fetch,Bo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>CU({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),CU=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=kU()})=>{try{const s=await o(e,{method:"POST",headers:gU(t),body:n.content,signal:i}),u=u0(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw Ky(f)||fa.isInstance(f)?f:new fa({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Ky(c)||fa.isInstance(c))?c:new fa({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(Ky(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new fa({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},aO=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=u0(r);if(o.trim()==="")return{responseHeaders:s,value:new fa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=SU({text:o,schema:e});return{responseHeaders:s,value:new fa({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new fa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},_E=e=>async({response:t})=>{const n=u0(t);if(t.body==null)throw new gE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(hU()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Yc({text:r,schema:e}))}}))}},ld=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Yc({text:a,schema:e}),o=u0(t);if(!i.success)throw new fa({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:AU,atob:TU}=globalThis;function iO(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=TU(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function zf(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return AU(t)}function oO(e){return e==null?void 0:e.replace(/\/$/,"")}var Kn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Kn||(Kn={}));var t2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(t2||(t2={}));const Jt=Kn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),gl=e=>{switch(typeof e){case"undefined":return Jt.undefined;case"string":return Jt.string;case"number":return isNaN(e)?Jt.nan:Jt.number;case"boolean":return Jt.boolean;case"function":return Jt.function;case"bigint":return Jt.bigint;case"symbol":return Jt.symbol;case"object":return Array.isArray(e)?Jt.array:e===null?Jt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Jt.promise:typeof Map<"u"&&e instanceof Map?Jt.map:typeof Set<"u"&&e instanceof Set?Jt.set:typeof Date<"u"&&e instanceof Date?Jt.date:Jt.object;default:return Jt.unknown}},jt=Kn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),RU=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Hi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(n(o))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return a(this),r}static assert(t){if(!(t instanceof Hi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Hi.create=e=>new Hi(e);const Uf=(e,t)=>{let n;switch(e.code){case jt.invalid_type:e.received===Jt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case jt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Kn.jsonStringifyReplacer)}`;break;case jt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Kn.joinValues(e.keys,", ")}`;break;case jt.invalid_union:n="Invalid input";break;case jt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Kn.joinValues(e.options)}`;break;case jt.invalid_enum_value:n=`Invalid enum value. Expected ${Kn.joinValues(e.options)}, received '${e.received}'`;break;case jt.invalid_arguments:n="Invalid function arguments";break;case jt.invalid_return_type:n="Invalid function return type";break;case jt.invalid_date:n="Invalid date";break;case jt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Kn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case jt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case jt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case jt.custom:n="Invalid input";break;case jt.invalid_intersection_types:n="Intersection results could not be merged";break;case jt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case jt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Kn.assertNever(e)}return{message:n}};let sO=Uf;function NU(e){sO=e}function cb(){return sO}const db=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},IU=[];function Yt(e,t){const n=cb(),r=db({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Uf?void 0:Uf].filter(a=>!!a)});e.common.issues.push(r)}class Za{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return wn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Za.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return wn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const wn=Object.freeze({status:"aborted"}),Cf=e=>({status:"dirty",value:e}),di=e=>({status:"valid",value:e}),n2=e=>e.status==="aborted",r2=e=>e.status==="dirty",Xc=e=>e.status==="valid",um=e=>typeof Promise<"u"&&e instanceof Promise;function fb(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function lO(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var rn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(rn||(rn={}));var Yp,Xp;class Is{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const W3=(e,t)=>{if(Xc(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Hi(e.common.issues);return this._error=n,this._error}}};function jn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var u,c;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:s.defaultError}},description:a}}class Pn{get description(){return this._def.description}_getType(t){return gl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Za,ctx:{common:t.parent.common,data:t.data,parsedType:gl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(um(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return W3(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return Xc(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>Xc(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:gl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(um(a)?a:Promise.resolve(a));return W3(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:jt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new zo({schema:this,typeName:$t.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Po.create(this,this._def)}nullable(){return Lu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mo.create(this)}promise(){return Hf.create(this,this._def)}or(t){return hm.create([this,t],this._def)}and(t){return pm.create(this,t,this._def)}transform(t){return new zo({...jn(this._def),schema:this,typeName:$t.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new vm({...jn(this._def),innerType:this,defaultValue:n,typeName:$t.ZodDefault})}brand(){return new xE({typeName:$t.ZodBranded,type:this,...jn(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new wm({...jn(this._def),innerType:this,catchValue:n,typeName:$t.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return c0.create(this,t)}readonly(){return _m.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const OU=/^c[^\s-]{8,}$/i,jU=/^[0-9a-z]+$/,DU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,MU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,PU=/^[a-z0-9_-]{21}$/i,FU=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,LU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$U=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,BU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let z_;const zU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,UU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,HU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,VU=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,uO="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",WU=new RegExp(`^${uO}$`);function cO(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function KU(e){return new RegExp(`^${cO(e)}$`)}function dO(e){let t=`${uO}T${cO(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function ZU(e,t){return!!((t==="v4"||!t)&&zU.test(e)||(t==="v6"||!t)&&qU.test(e))}function YU(e,t){if(!FU.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function XU(e,t){return!!((t==="v4"||!t)&&UU.test(e)||(t==="v6"||!t)&&HU.test(e))}class jo extends Pn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Jt.string){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.string,received:i.parsedType}),wn}const r=new Za;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Yt(a,{code:jt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Yt(a,{code:jt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")$U.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"email",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")z_||(z_=new RegExp(BU,"u")),z_.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"emoji",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")MU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"uuid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")PU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"nanoid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")OU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cuid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")jU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cuid2",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")DU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"ulid",code:jt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Yt(a,{validation:"url",code:jt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"regex",code:jt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?dO(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?WU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?KU(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?LU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"duration",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?ZU(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"ip",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?YU(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"jwt",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?XU(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"cidr",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?VU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"base64",code:jt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?GU.test(t.data)||(a=this._getOrReturnCtx(t,a),Yt(a,{validation:"base64url",code:jt.invalid_string,message:i.message}),r.dirty()):Kn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:jt.invalid_string,...rn.errToObj(r)})}_addCheck(t){return new jo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...rn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...rn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...rn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...rn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...rn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...rn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...rn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...rn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...rn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...rn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...rn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...rn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...rn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...rn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...rn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...rn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...rn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...rn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...rn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...rn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...rn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...rn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...rn.errToObj(n)})}nonempty(t){return this.min(1,rn.errToObj(t))}trim(){return new jo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new jo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new jo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}jo.create=e=>{var t;return new jo({checks:[],typeName:$t.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...jn(e)})};function JU(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class Mu extends Pn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Jt.number){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.number,received:i.parsedType}),wn}let r;const a=new Za;for(const i of this._def.checks)i.kind==="int"?Kn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?JU(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_finite,message:i.message}),a.dirty()):Kn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new Mu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new Mu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:rn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:rn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Kn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Mu.create=e=>new Mu({checks:[],typeName:$t.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...jn(e)});class Pu extends Pn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Jt.bigint)return this._getInvalidInput(t);let r;const a=new Za;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Yt(r,{code:jt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Kn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Yt(n,{code:jt.invalid_type,expected:Jt.bigint,received:n.parsedType}),wn}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new Pu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new Pu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Pu.create=e=>{var t;return new Pu({checks:[],typeName:$t.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...jn(e)})};class cm extends Pn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Jt.boolean){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.boolean,received:r.parsedType}),wn}return di(t.data)}}cm.create=e=>new cm({typeName:$t.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...jn(e)});class Jc extends Pn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Jt.date){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_type,expected:Jt.date,received:i.parsedType}),wn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Yt(i,{code:jt.invalid_date}),wn}const r=new Za;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Yt(a,{code:jt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Kn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Jc({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:rn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:rn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Jc.create=e=>new Jc({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:$t.ZodDate,...jn(e)});class hb extends Pn{_parse(t){if(this._getType(t)!==Jt.symbol){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.symbol,received:r.parsedType}),wn}return di(t.data)}}hb.create=e=>new hb({typeName:$t.ZodSymbol,...jn(e)});class dm extends Pn{_parse(t){if(this._getType(t)!==Jt.undefined){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.undefined,received:r.parsedType}),wn}return di(t.data)}}dm.create=e=>new dm({typeName:$t.ZodUndefined,...jn(e)});class fm extends Pn{_parse(t){if(this._getType(t)!==Jt.null){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.null,received:r.parsedType}),wn}return di(t.data)}}fm.create=e=>new fm({typeName:$t.ZodNull,...jn(e)});class qf extends Pn{constructor(){super(...arguments),this._any=!0}_parse(t){return di(t.data)}}qf.create=e=>new qf({typeName:$t.ZodAny,...jn(e)});class Wc extends Pn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return di(t.data)}}Wc.create=e=>new Wc({typeName:$t.ZodUnknown,...jn(e)});class Al extends Pn{_parse(t){const n=this._getOrReturnCtx(t);return Yt(n,{code:jt.invalid_type,expected:Jt.never,received:n.parsedType}),wn}}Al.create=e=>new Al({typeName:$t.ZodNever,...jn(e)});class pb extends Pn{_parse(t){if(this._getType(t)!==Jt.undefined){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.void,received:r.parsedType}),wn}return di(t.data)}}pb.create=e=>new pb({typeName:$t.ZodVoid,...jn(e)});class Mo extends Pn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Jt.array)return Yt(n,{code:jt.invalid_type,expected:Jt.array,received:n.parsedType}),wn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Yt(n,{code:o?jt.too_big:jt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Yt(n,{code:jt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Yt(n,{code:jt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new Is(n,o,n.path,s)))).then(o=>Za.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new Is(n,o,n.path,s)));return Za.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Mo({...this._def,minLength:{value:t,message:rn.toString(n)}})}max(t,n){return new Mo({...this._def,maxLength:{value:t,message:rn.toString(n)}})}length(t,n){return new Mo({...this._def,exactLength:{value:t,message:rn.toString(n)}})}nonempty(t){return this.min(1,t)}}Mo.create=(e,t)=>new Mo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:$t.ZodArray,...jn(t)});function kf(e){if(e instanceof Br){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Po.create(kf(r))}return new Br({...e._def,shape:()=>t})}else return e instanceof Mo?new Mo({...e._def,type:kf(e.element)}):e instanceof Po?Po.create(kf(e.unwrap())):e instanceof Lu?Lu.create(kf(e.unwrap())):e instanceof Os?Os.create(e.items.map(t=>kf(t))):e}class Br extends Pn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Kn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Jt.object){const c=this._getOrReturnCtx(t);return Yt(c,{code:jt.invalid_type,expected:Jt.object,received:c.parsedType}),wn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Al&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||s.push(c);const u=[];for(const c of o){const f=i[c],h=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Is(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Al){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")s.length>0&&(Yt(a,{code:jt.unrecognized_keys,keys:s}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of s){const h=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Is(a,h,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const h=await f.key,m=await f.value;c.push({key:h,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>Za.mergeObjectSync(r,c)):Za.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return rn.errToObj,new Br({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const u=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=rn.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new Br({...this._def,unknownKeys:"strip"})}passthrough(){return new Br({...this._def,unknownKeys:"passthrough"})}extend(t){return new Br({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Br({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:$t.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Br({...this._def,catchall:t})}pick(t){const n={};return Kn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Br({...this._def,shape:()=>n})}omit(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Br({...this._def,shape:()=>n})}deepPartial(){return kf(this)}partial(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Br({...this._def,shape:()=>n})}required(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Po;)i=i._def.innerType;n[r]=i}}),new Br({...this._def,shape:()=>n})}keyof(){return fO(Kn.objectKeys(this.shape))}}Br.create=(e,t)=>new Br({shape:()=>e,unknownKeys:"strip",catchall:Al.create(),typeName:$t.ZodObject,...jn(t)});Br.strictCreate=(e,t)=>new Br({shape:()=>e,unknownKeys:"strict",catchall:Al.create(),typeName:$t.ZodObject,...jn(t)});Br.lazycreate=(e,t)=>new Br({shape:e,unknownKeys:"strip",catchall:Al.create(),typeName:$t.ZodObject,...jn(t)});class hm extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Hi(s.ctx.common.issues));return Yt(n,{code:jt.invalid_union,unionErrors:o}),wn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(u=>new Hi(u));return Yt(n,{code:jt.invalid_union,unionErrors:s}),wn}}get options(){return this._def.options}}hm.create=(e,t)=>new hm({options:e,typeName:$t.ZodUnion,...jn(t)});const hl=e=>e instanceof gm?hl(e.schema):e instanceof zo?hl(e.innerType()):e instanceof ym?[e.value]:e instanceof Fu?e.options:e instanceof bm?Kn.objectValues(e.enum):e instanceof vm?hl(e._def.innerType):e instanceof dm?[void 0]:e instanceof fm?[null]:e instanceof Po?[void 0,...hl(e.unwrap())]:e instanceof Lu?[null,...hl(e.unwrap())]:e instanceof xE||e instanceof _m?hl(e.unwrap()):e instanceof wm?hl(e._def.innerType):[];class Sv extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.object)return Yt(n,{code:jt.invalid_type,expected:Jt.object,received:n.parsedType}),wn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Yt(n,{code:jt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),wn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=hl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new Sv({typeName:$t.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...jn(r)})}}function a2(e,t){const n=gl(e),r=gl(t);if(e===t)return{valid:!0,data:e};if(n===Jt.object&&r===Jt.object){const a=Kn.objectKeys(t),i=Kn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const u=a2(e[s],t[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(n===Jt.array&&r===Jt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],u=a2(o,s);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===Jt.date&&r===Jt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class pm extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(n2(i)||n2(o))return wn;const s=a2(i.value,o.value);return s.valid?((r2(i)||r2(o))&&n.dirty(),{status:n.value,value:s.data}):(Yt(r,{code:jt.invalid_intersection_types}),wn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}pm.create=(e,t,n)=>new pm({left:e,right:t,typeName:$t.ZodIntersection,...jn(n)});class Os extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.array)return Yt(r,{code:jt.invalid_type,expected:Jt.array,received:r.parsedType}),wn;if(r.data.length<this._def.items.length)return Yt(r,{code:jt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),wn;!this._def.rest&&r.data.length>this._def.items.length&&(Yt(r,{code:jt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Is(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Za.mergeArray(n,o)):Za.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Os({...this._def,rest:t})}}Os.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Os({items:e,typeName:$t.ZodTuple,rest:null,...jn(t)})};class mm extends Pn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.object)return Yt(r,{code:jt.invalid_type,expected:Jt.object,received:r.parsedType}),wn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new Is(r,s,r.path,s)),value:o._parse(new Is(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Za.mergeObjectAsync(n,a):Za.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Pn?new mm({keyType:t,valueType:n,typeName:$t.ZodRecord,...jn(r)}):new mm({keyType:jo.create(),valueType:t,typeName:$t.ZodRecord,...jn(n)})}}class mb extends Pn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.map)return Yt(r,{code:jt.invalid_type,expected:Jt.map,received:r.parsedType}),wn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,u],c)=>({key:a._parse(new Is(r,s,r.path,[c,"key"])),value:i._parse(new Is(r,u,r.path,[c,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return wn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of o){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return wn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}}}}mb.create=(e,t,n)=>new mb({valueType:t,keyType:e,typeName:$t.ZodMap,...jn(n)});class Qc extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Jt.set)return Yt(r,{code:jt.invalid_type,expected:Jt.set,received:r.parsedType}),wn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Yt(r,{code:jt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Yt(r,{code:jt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const c=new Set;for(const f of u){if(f.status==="aborted")return wn;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const s=[...r.data.values()].map((u,c)=>i._parse(new Is(r,u,r.path,c)));return r.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(t,n){return new Qc({...this._def,minSize:{value:t,message:rn.toString(n)}})}max(t,n){return new Qc({...this._def,maxSize:{value:t,message:rn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Qc.create=(e,t)=>new Qc({valueType:e,minSize:null,maxSize:null,typeName:$t.ZodSet,...jn(t)});class jf extends Pn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.function)return Yt(n,{code:jt.invalid_type,expected:Jt.function,received:n.parsedType}),wn;function r(s,u){return db({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,cb(),Uf].filter(c=>!!c),issueData:{code:jt.invalid_arguments,argumentsError:u}})}function a(s,u){return db({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,cb(),Uf].filter(c=>!!c),issueData:{code:jt.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Hf){const s=this;return di(async function(...u){const c=new Hi([]),f=await s._def.args.parseAsync(u,i).catch(g=>{throw c.addIssue(r(u,g)),c}),h=await Reflect.apply(o,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const s=this;return di(function(...u){const c=s._def.args.safeParse(u,i);if(!c.success)throw new Hi([r(u,c.error)]);const f=Reflect.apply(o,this,c.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new Hi([a(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new jf({...this._def,args:Os.create(t).rest(Wc.create())})}returns(t){return new jf({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new jf({args:t||Os.create([]).rest(Wc.create()),returns:n||Wc.create(),typeName:$t.ZodFunction,...jn(r)})}}class gm extends Pn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}gm.create=(e,t)=>new gm({getter:e,typeName:$t.ZodLazy,...jn(t)});class ym extends Pn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Yt(n,{received:n.data,code:jt.invalid_literal,expected:this._def.value}),wn}return{status:"valid",value:t.data}}get value(){return this._def.value}}ym.create=(e,t)=>new ym({value:e,typeName:$t.ZodLiteral,...jn(t)});function fO(e,t){return new Fu({values:e,typeName:$t.ZodEnum,...jn(t)})}class Fu extends Pn{constructor(){super(...arguments),Yp.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Yt(n,{expected:Kn.joinValues(r),received:n.parsedType,code:jt.invalid_type}),wn}if(fb(this,Yp)||lO(this,Yp,new Set(this._def.values)),!fb(this,Yp).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Yt(n,{received:n.data,code:jt.invalid_enum_value,options:r}),wn}return di(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Fu.create(t,{...this._def,...n})}exclude(t,n=this._def){return Fu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Yp=new WeakMap;Fu.create=fO;class bm extends Pn{constructor(){super(...arguments),Xp.set(this,void 0)}_parse(t){const n=Kn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Jt.string&&r.parsedType!==Jt.number){const a=Kn.objectValues(n);return Yt(r,{expected:Kn.joinValues(a),received:r.parsedType,code:jt.invalid_type}),wn}if(fb(this,Xp)||lO(this,Xp,new Set(Kn.getValidEnumValues(this._def.values))),!fb(this,Xp).has(t.data)){const a=Kn.objectValues(n);return Yt(r,{received:r.data,code:jt.invalid_enum_value,options:a}),wn}return di(t.data)}get enum(){return this._def.values}}Xp=new WeakMap;bm.create=(e,t)=>new bm({values:e,typeName:$t.ZodNativeEnum,...jn(t)});class Hf extends Pn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Jt.promise&&n.common.async===!1)return Yt(n,{code:jt.invalid_type,expected:Jt.promise,received:n.parsedType}),wn;const r=n.parsedType===Jt.promise?n.data:Promise.resolve(n.data);return di(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Hf.create=(e,t)=>new Hf({type:e,typeName:$t.ZodPromise,...jn(t)});class zo extends Pn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===$t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Yt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return wn;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?wn:u.status==="dirty"||n.value==="dirty"?Cf(u.value):u});{if(n.value==="aborted")return wn;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?wn:s.status==="dirty"||n.value==="dirty"?Cf(s.value):s}}if(a.type==="refinement"){const o=s=>{const u=a.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?wn:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?wn:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Xc(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>Xc(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Kn.assertNever(a)}}zo.create=(e,t,n)=>new zo({schema:e,typeName:$t.ZodEffects,effect:t,...jn(n)});zo.createWithPreprocess=(e,t,n)=>new zo({schema:t,effect:{type:"preprocess",transform:e},typeName:$t.ZodEffects,...jn(n)});class Po extends Pn{_parse(t){return this._getType(t)===Jt.undefined?di(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Po.create=(e,t)=>new Po({innerType:e,typeName:$t.ZodOptional,...jn(t)});class Lu extends Pn{_parse(t){return this._getType(t)===Jt.null?di(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Lu.create=(e,t)=>new Lu({innerType:e,typeName:$t.ZodNullable,...jn(t)});class vm extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Jt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}vm.create=(e,t)=>new vm({innerType:e,typeName:$t.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...jn(t)});class wm extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return um(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Hi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Hi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}wm.create=(e,t)=>new wm({innerType:e,typeName:$t.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...jn(t)});class gb extends Pn{_parse(t){if(this._getType(t)!==Jt.nan){const r=this._getOrReturnCtx(t);return Yt(r,{code:jt.invalid_type,expected:Jt.nan,received:r.parsedType}),wn}return{status:"valid",value:t.data}}}gb.create=e=>new gb({typeName:$t.ZodNaN,...jn(e)});const QU=Symbol("zod_brand");class xE extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class c0 extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?wn:i.status==="dirty"?(n.dirty(),Cf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?wn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new c0({in:t,out:n,typeName:$t.ZodPipeline})}}class _m extends Pn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Xc(a)&&(a.value=Object.freeze(a.value)),a);return um(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}_m.create=(e,t)=>new _m({innerType:e,typeName:$t.ZodReadonly,...jn(t)});function K3(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function hO(e,t={},n){return e?qf.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(u=>{var c,f;if(!u){const h=K3(t,r),m=(f=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!s){const u=K3(t,r),c=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:c})}}):qf.create()}const eq={object:Br.lazycreate};var $t;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})($t||($t={}));const tq=(e,t={message:`Input not instance of ${e.name}`})=>hO(n=>n instanceof e,t),pO=jo.create,mO=Mu.create,nq=gb.create,rq=Pu.create,gO=cm.create,aq=Jc.create,iq=hb.create,oq=dm.create,sq=fm.create,lq=qf.create,uq=Wc.create,cq=Al.create,dq=pb.create,fq=Mo.create,hq=Br.create,pq=Br.strictCreate,mq=hm.create,gq=Sv.create,yq=pm.create,bq=Os.create,vq=mm.create,wq=mb.create,_q=Qc.create,xq=jf.create,Sq=gm.create,Eq=ym.create,kq=Fu.create,Cq=bm.create,Aq=Hf.create,Z3=zo.create,Tq=Po.create,Rq=Lu.create,Nq=zo.createWithPreprocess,Iq=c0.create,Oq=()=>pO().optional(),jq=()=>mO().optional(),Dq=()=>gO().optional(),Mq={string:e=>jo.create({...e,coerce:!0}),number:e=>Mu.create({...e,coerce:!0}),boolean:e=>cm.create({...e,coerce:!0}),bigint:e=>Pu.create({...e,coerce:!0}),date:e=>Jc.create({...e,coerce:!0})},Pq=wn;var L=Object.freeze({__proto__:null,defaultErrorMap:Uf,setErrorMap:NU,getErrorMap:cb,makeIssue:db,EMPTY_PATH:IU,addIssueToContext:Yt,ParseStatus:Za,INVALID:wn,DIRTY:Cf,OK:di,isAborted:n2,isDirty:r2,isValid:Xc,isAsync:um,get util(){return Kn},get objectUtil(){return t2},ZodParsedType:Jt,getParsedType:gl,ZodType:Pn,datetimeRegex:dO,ZodString:jo,ZodNumber:Mu,ZodBigInt:Pu,ZodBoolean:cm,ZodDate:Jc,ZodSymbol:hb,ZodUndefined:dm,ZodNull:fm,ZodAny:qf,ZodUnknown:Wc,ZodNever:Al,ZodVoid:pb,ZodArray:Mo,ZodObject:Br,ZodUnion:hm,ZodDiscriminatedUnion:Sv,ZodIntersection:pm,ZodTuple:Os,ZodRecord:mm,ZodMap:mb,ZodSet:Qc,ZodFunction:jf,ZodLazy:gm,ZodLiteral:ym,ZodEnum:Fu,ZodNativeEnum:bm,ZodPromise:Hf,ZodEffects:zo,ZodTransformer:zo,ZodOptional:Po,ZodNullable:Lu,ZodDefault:vm,ZodCatch:wm,ZodNaN:gb,BRAND:QU,ZodBranded:xE,ZodPipeline:c0,ZodReadonly:_m,custom:hO,Schema:Pn,ZodSchema:Pn,late:eq,get ZodFirstPartyTypeKind(){return $t},coerce:Mq,any:lq,array:fq,bigint:rq,boolean:gO,date:aq,discriminatedUnion:gq,effect:Z3,enum:kq,function:xq,instanceof:tq,intersection:yq,lazy:Sq,literal:Eq,map:wq,nan:nq,nativeEnum:Cq,never:cq,null:sq,nullable:Rq,number:mO,object:hq,oboolean:Dq,onumber:jq,optional:Tq,ostring:Oq,pipeline:Iq,preprocess:Nq,promise:Aq,record:vq,set:_q,strictObject:pq,string:pO,symbol:iq,transformer:Z3,tuple:bq,undefined:oq,union:mq,unknown:uq,void:dq,NEVER:Pq,ZodIssueCode:jt,quotelessJson:RU,ZodError:Hi});function Fq({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,u)=>{var c,f,h,m;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(c=s.mimeType)!=null?c:"image/jpeg"};base64,${zf(s.image)}`,detail:(h=(f=s.providerMetadata)==null?void 0:f.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new vr({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=s.filename)!=null?m:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new vr({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const u=[];for(const c of o)switch(c.type){case"text":{s+=c.text;break}case"tool-call":{u.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(u.length>1)throw new vr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:u.length>0?u[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:u.length>0?u:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function Y3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function yb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var SE=L.object({error:L.object({message:L.string(),type:L.string().nullish(),param:L.any().nullish(),code:L.union([L.string(),L.number()]).nullish()})}),$u=aO({errorSchema:SE,errorToMessage:e=>e.error.message});function bb({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Lq({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new vr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):s.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const u=o.type;switch(u){case"auto":case"none":case"required":return{tools:s,tool_choice:u,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=u;throw new vr({functionality:`Unsupported tool choice type: ${c}`})}}}var $q=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:i2(this.modelId)}get defaultObjectGenerationMode(){return Uq(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g,v,w,_,x,S,E;const C=e.type,A=[];i!=null&&A.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&A.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const O=this.settings.useLegacyFunctionCalling;if(O&&this.settings.parallelToolCalls===!0)throw new vr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(O&&this.supportsStructuredOutputs)throw new vr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:j,warnings:N}=Fq({prompt:t,useLegacyFunctionCalling:O,systemMessageMode:qq(this.modelId)});A.push(...N);const U={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(m=c.name)!=null?m:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:f,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(w=h==null?void 0:h.openai)==null?void 0:w.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:j};switch(i2(this.modelId)&&(U.temperature!=null&&(U.temperature=void 0,A.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),U.top_p!=null&&(U.top_p=void 0,A.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),U.frequency_penalty!=null&&(U.frequency_penalty=void 0,A.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),U.presence_penalty!=null&&(U.presence_penalty=void 0,A.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),U.logit_bias!=null&&(U.logit_bias=void 0,A.push({type:"other",message:"logitBias is not supported for reasoning models"})),U.logprobs!=null&&(U.logprobs=void 0,A.push({type:"other",message:"logprobs is not supported for reasoning models"})),U.top_logprobs!=null&&(U.top_logprobs=void 0,A.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),U.max_tokens!=null&&(U.max_completion_tokens==null&&(U.max_completion_tokens=U.max_tokens),U.max_tokens=void 0)),C){case"regular":{const{tools:V,tool_choice:J,functions:P,function_call:Z,toolWarnings:F}=Lq({mode:e,useLegacyFunctionCalling:O,structuredOutputs:this.supportsStructuredOutputs});return{args:{...U,tools:V,tool_choice:J,functions:P,function_call:Z},warnings:[...A,...F]}}case"object-json":return{args:{...U,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:A};case"object-tool":return{args:O?{...U,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...U,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:A};default:{const V=C;throw new Error(`Unsupported type: ${V}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u;const{args:c,warnings:f}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await Bo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ns(this.config.headers(),e.headers),body:c,failedResponseHandler:$u,successfulResponseHandler:ld(Bq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...w}=c,_=m.choices[0],x=(t=m.usage)==null?void 0:t.completion_tokens_details,S=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:_s(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:_s(),toolName:C.function.name,args:C.function.arguments}}),finishReason:yb(_.finish_reason),usage:{promptTokens:(o=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(u=(s=m.usage)==null?void 0:s.completion_tokens)!=null?u:NaN},rawCall:{rawPrompt:v,rawSettings:w},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:bb(m),warnings:f,logprobs:Y3(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const w=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...w.response}),w.text&&x.enqueue({type:"text-delta",textDelta:w.text}),w.toolCalls)for(const S of w.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:w.finishReason,usage:w.usage,logprobs:w.logprobs,providerMetadata:w.providerMetadata}),x.close()}}),rawCall:w.rawCall,rawResponse:w.rawResponse,warnings:w.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Bo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ns(this.config.headers(),e.headers),body:r,failedResponseHandler:$u,successfulResponseHandler:_E(zq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,u=[];let c="unknown",f={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(w,_){var x,S,E,C,A,O,j,N,U,V,J,P;if(!w.success){c="error",_.enqueue({type:"error",error:w.error});return}const Z=w.value;if("error"in Z){c="error",_.enqueue({type:"error",error:Z.error});return}if(m&&(m=!1,_.enqueue({type:"response-metadata",...bb(Z)})),Z.usage!=null){const{prompt_tokens:Q,completion_tokens:te,prompt_tokens_details:G,completion_tokens_details:X}=Z.usage;f={promptTokens:Q??void 0,completionTokens:te??void 0},(X==null?void 0:X.reasoning_tokens)!=null&&(v.openai.reasoningTokens=X==null?void 0:X.reasoning_tokens),(X==null?void 0:X.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=X==null?void 0:X.accepted_prediction_tokens),(X==null?void 0:X.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=X==null?void 0:X.rejected_prediction_tokens),(G==null?void 0:G.cached_tokens)!=null&&(v.openai.cachedPromptTokens=G==null?void 0:G.cached_tokens)}const F=Z.choices[0];if((F==null?void 0:F.finish_reason)!=null&&(c=yb(F.finish_reason)),(F==null?void 0:F.delta)==null)return;const ue=F.delta;ue.content!=null&&_.enqueue({type:"text-delta",textDelta:ue.content});const le=Y3(F==null?void 0:F.logprobs);le!=null&&le.length&&(h===void 0&&(h=[]),h.push(...le));const ne=g&&ue.function_call!=null?[{type:"function",id:_s(),function:ue.function_call,index:0}]:ue.tool_calls;if(ne!=null)for(const Q of ne){const te=Q.index;if(u[te]==null){if(Q.type!=="function")throw new Of({data:Q,message:"Expected 'function' type."});if(Q.id==null)throw new Of({data:Q,message:"Expected 'id' to be a string."});if(((x=Q.function)==null?void 0:x.name)==null)throw new Of({data:Q,message:"Expected 'function.name' to be a string."});u[te]={id:Q.id,type:"function",function:{name:Q.function.name,arguments:(S=Q.function.arguments)!=null?S:""},hasFinished:!1};const X=u[te];((E=X.function)==null?void 0:E.name)!=null&&((C=X.function)==null?void 0:C.arguments)!=null&&(X.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:X.id,toolName:X.function.name,argsTextDelta:X.function.arguments}),G3(X.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(A=X.id)!=null?A:_s(),toolName:X.function.name,args:X.function.arguments}),X.hasFinished=!0));continue}const G=u[te];G.hasFinished||(((O=Q.function)==null?void 0:O.arguments)!=null&&(G.function.arguments+=(N=(j=Q.function)==null?void 0:j.arguments)!=null?N:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:(U=Q.function.arguments)!=null?U:""}),((V=G.function)==null?void 0:V.name)!=null&&((J=G.function)==null?void 0:J.arguments)!=null&&G3(G.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(P=G.id)!=null?P:_s(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0))}},flush(w){var _,x;w.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(_=f.promptTokens)!=null?_:NaN,completionTokens:(x=f.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},yO=L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish(),prompt_tokens_details:L.object({cached_tokens:L.number().nullish()}).nullish(),completion_tokens_details:L.object({reasoning_tokens:L.number().nullish(),accepted_prediction_tokens:L.number().nullish(),rejected_prediction_tokens:L.number().nullish()}).nullish()}).nullish(),Bq=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({message:L.object({role:L.literal("assistant").nullish(),content:L.string().nullish(),function_call:L.object({arguments:L.string(),name:L.string()}).nullish(),tool_calls:L.array(L.object({id:L.string().nullish(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).nullish()}),index:L.number(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullish()})),usage:yO}),zq=L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).nullish(),content:L.string().nullish(),function_call:L.object({name:L.string().optional(),arguments:L.string().optional()}).nullish(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullable().optional(),index:L.number()})),usage:yO}),SE]);function i2(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function Uq(e){return e.startsWith("gpt-4o-audio-preview")}function qq(e){var t,n;return i2(e)?(n=(t=Hq[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var Hq={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function Vq({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new pl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new vr({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new vr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new vr({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function X3(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var Gq=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h}){var m;const g=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:w,stopSequences:_}=Vq({prompt:n,inputFormat:t}),x=[..._??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,prompt:w,stop:x.length>0?x:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new vr({functionality:"tools"});if(e.toolChoice)throw new vr({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new vr({functionality:"object-json mode"});case"object-tool":throw new vr({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Bo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ns(this.config.headers(),e.headers),body:t,failedResponseHandler:$u,successfulResponseHandler:ld(Wq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,u=a.choices[0];return{text:u.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:yb(u.finish_reason),logprobs:X3(u.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:bb(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Bo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ns(this.config.headers(),e.headers),body:r,failedResponseHandler:$u,successfulResponseHandler:_E(Kq),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){u="error",g.enqueue({type:"error",error:m.error});return}const v=m.value;if("error"in v){u="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...bb(v)})),v.usage!=null&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const w=v.choices[0];(w==null?void 0:w.finish_reason)!=null&&(u=yb(w.finish_reason)),(w==null?void 0:w.text)!=null&&g.enqueue({type:"text-delta",textDelta:w.text});const _=X3(w==null?void 0:w.logprobs);_!=null&&_.length&&(f===void 0&&(f=[]),f.push(..._))},flush(m){m.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Wq=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullish()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()})}),Kq=L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string().nullish(),index:L.number(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullish()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),SE]),Zq=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new bE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Bo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ns(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:$u,successfulResponseHandler:ld(Yq),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Yq=L.object({data:L.array(L.object({embedding:L.array(L.number())})),usage:L.object({prompt_tokens:L.number()}).nullish()}),Xq={"dall-e-3":1,"dall-e-2":10},Jq=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:Xq[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:v,responseHeaders:w}=await Bo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ns(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:$u,successfulResponseHandler:ld(Qq),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(_=>_.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:w}}}},Qq=L.object({data:L.array(L.object({b64_json:L.string()}))});function eH({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var u,c,f,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${zf(o.image)}`,detail:(f=(c=o.providerMetadata)==null?void 0:c.openai)==null?void 0:f.imageDetail};case"file":{if(o.data instanceof URL)throw new vr({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new vr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function J3({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function tH({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)switch(u.type){case"function":o.push({type:"function",name:u.name,description:u.description,parameters:u.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(u.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:u.args.searchContextSize,user_location:u.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:u});break}break;default:a.push({type:"unsupported-tool",tool:u});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const u=s;throw new vr({functionality:`Unsupported tool choice type: ${u}`})}}}var nH=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:u,prompt:c,providerMetadata:f,responseFormat:h}){var m,g,v;const w=[],_=bH(this.modelId),x=e.type;i!=null&&w.push({type:"unsupported-setting",setting:"topK"}),u!=null&&w.push({type:"unsupported-setting",setting:"seed"}),o!=null&&w.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&w.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&w.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=eH({prompt:c,systemMessageMode:_.systemMessageMode});w.push(...E);const C=EU({provider:"openai",providerOptions:f,schema:vH}),A=(m=C==null?void 0:C.strictSchemas)!=null?m:!0,O={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:A,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(O.temperature!=null&&(O.temperature=void 0,w.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),O.top_p!=null&&(O.top_p=void 0,w.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:j,tool_choice:N,toolWarnings:U}=tH({mode:e,strict:A});return{args:{...O,tools:j,tool_choice:N},warnings:[...w,...U]}}case"object-json":return{args:{...O,text:{format:e.schema!=null?{type:"json_schema",strict:A,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:w};case"object-tool":return{args:{...O,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:A}]},warnings:w};default:{const j=x;throw new Error(`Unsupported type: ${j}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:u,value:c,rawValue:f}=await Bo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ns(this.config.headers(),e.headers),body:o,failedResponseHandler:$u,successfulResponseHandler:ld(L.object({id:L.string(),created_at:L.number(),model:L.string(),output:L.array(L.discriminatedUnion("type",[L.object({type:L.literal("message"),role:L.literal("assistant"),content:L.array(L.object({type:L.literal("output_text"),text:L.string(),annotations:L.array(L.object({type:L.literal("url_citation"),start_index:L.number(),end_index:L.number(),url:L.string(),title:L.string()}))}))}),L.object({type:L.literal("function_call"),call_id:L.string(),name:L.string(),arguments:L.string()}),L.object({type:L.literal("web_search_call")}),L.object({type:L.literal("computer_call")}),L.object({type:L.literal("reasoning")})])),incomplete_details:L.object({reason:L.string()}).nullable(),usage:bO})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),m=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var w,_,x;return{sourceType:"url",id:(x=(_=(w=this.config).generateId)==null?void 0:_.call(w))!=null?x:_s(),url:v.url,title:v.title}})),finishReason:J3({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:m.length>0}),toolCalls:m.length>0?m:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:f},request:{body:JSON.stringify(o)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Bo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ns(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:$u,successfulResponseHandler:_E(cH),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,u=NaN,c=null,f=null,h=null;const m={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,C,A,O,j;if(!v.success){o="error",w.enqueue({type:"error",error:v.error});return}const N=v.value;if(gH(N))N.item.type==="function_call"&&(m[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(mH(N)){const U=m[N.output_index];U!=null&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.toolCallId,toolName:U.toolName,argsTextDelta:N.delta})}else pH(N)?(h=N.response.id,w.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):dH(N)?w.enqueue({type:"text-delta",textDelta:N.delta}):fH(N)&&N.item.type==="function_call"?(m[N.output_index]=void 0,g=!0,w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):hH(N)?(o=J3({finishReason:(_=N.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=N.response.usage.input_tokens,u=N.response.usage.output_tokens,c=(S=(x=N.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:c,f=(C=(E=N.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:f):yH(N)&&w.enqueue({type:"source",source:{sourceType:"url",id:(j=(O=(A=i.config).generateId)==null?void 0:O.call(A))!=null?j:_s(),url:N.annotation.url,title:N.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:u},...(c!=null||f!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:f}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},bO=L.object({input_tokens:L.number(),input_tokens_details:L.object({cached_tokens:L.number().nullish()}).nullish(),output_tokens:L.number(),output_tokens_details:L.object({reasoning_tokens:L.number().nullish()}).nullish()}),rH=L.object({type:L.literal("response.output_text.delta"),delta:L.string()}),aH=L.object({type:L.enum(["response.completed","response.incomplete"]),response:L.object({incomplete_details:L.object({reason:L.string()}).nullish(),usage:bO})}),iH=L.object({type:L.literal("response.created"),response:L.object({id:L.string(),created_at:L.number(),model:L.string()})}),oH=L.object({type:L.literal("response.output_item.done"),output_index:L.number(),item:L.discriminatedUnion("type",[L.object({type:L.literal("message")}),L.object({type:L.literal("function_call"),id:L.string(),call_id:L.string(),name:L.string(),arguments:L.string(),status:L.literal("completed")})])}),sH=L.object({type:L.literal("response.function_call_arguments.delta"),item_id:L.string(),output_index:L.number(),delta:L.string()}),lH=L.object({type:L.literal("response.output_item.added"),output_index:L.number(),item:L.discriminatedUnion("type",[L.object({type:L.literal("message")}),L.object({type:L.literal("function_call"),id:L.string(),call_id:L.string(),name:L.string(),arguments:L.string()})])}),uH=L.object({type:L.literal("response.output_text.annotation.added"),annotation:L.object({type:L.literal("url_citation"),url:L.string(),title:L.string()})}),cH=L.union([rH,aH,iH,oH,sH,lH,uH,L.object({type:L.string()}).passthrough()]);function dH(e){return e.type==="response.output_text.delta"}function fH(e){return e.type==="response.output_item.done"}function hH(e){return e.type==="response.completed"||e.type==="response.incomplete"}function pH(e){return e.type==="response.created"}function mH(e){return e.type==="response.function_call_arguments.delta"}function gH(e){return e.type==="response.output_item.added"}function yH(e){return e.type==="response.output_text.annotation.added"}function bH(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var vH=L.object({metadata:L.any().nullish(),parallelToolCalls:L.boolean().nullish(),previousResponseId:L.string().nullish(),store:L.boolean().nullish(),user:L.string().nullish(),reasoningEffort:L.string().nullish(),strictSchemas:L.boolean().nullish(),instructions:L.string().nullish()}),wH=L.object({});function _H({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:wH}}var xH={webSearchPreview:_H};function vO(e={}){var t,n,r;const a=(t=oO(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${yU({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(w,_={})=>new $q(w,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),c=(w,_={})=>new Gq(w,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),f=(w,_={})=>new Zq(w,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(w,_={})=>new Jq(w,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),m=(w,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return w==="gpt-3.5-turbo-instruct"?c(w,_):u(w,_)},g=w=>new nH(w,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),v=function(w,_){return m(w,_)};return v.languageModel=m,v.chat=u,v.completion=c,v.responses=g,v.embedding=f,v.textEmbedding=f,v.textEmbeddingModel=f,v.image=h,v.imageModel=h,v.tools=xH,v}vO({compatibility:"strict"});var wO="vercel.ai.error",SH=Symbol.for(wO),_O,EH=class xO extends Error{constructor({name:t,message:n,cause:r}){super(n),this[_O]=!0,this.name=t,this.cause=r}static isInstance(t){return xO.hasMarker(t,wO)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};_O=SH;var Ya=EH,SO="AI_APICallError",EO=`vercel.ai.error.${SO}`,kH=Symbol.for(EO),kO,bl=class extends Ya{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:SO,message:t,cause:s}),this[kO]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Ya.hasMarker(t,EO)}};kO=kH;var CO="AI_EmptyResponseBodyError",AO=`vercel.ai.error.${CO}`,CH=Symbol.for(AO),TO,AH=class extends Ya{constructor({message:t="Empty response body"}={}){super({name:CO,message:t}),this[TO]=!0}static isInstance(t){return Ya.hasMarker(t,AO)}};TO=CH;function RO(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var NO="AI_InvalidArgumentError",IO=`vercel.ai.error.${NO}`,TH=Symbol.for(IO),OO,jO=class extends Ya{constructor({message:t,cause:n,argument:r}){super({name:NO,message:t,cause:n}),this[OO]=!0,this.argument=r}static isInstance(t){return Ya.hasMarker(t,IO)}};OO=TH;var DO="AI_JSONParseError",MO=`vercel.ai.error.${DO}`,RH=Symbol.for(MO),PO,vb=class extends Ya{constructor({text:t,cause:n}){super({name:DO,message:`JSON parsing failed: Text: ${t}.
Error message: ${RO(n)}`,cause:n}),this[PO]=!0,this.text=t}static isInstance(t){return Ya.hasMarker(t,MO)}};PO=RH;var FO="AI_LoadAPIKeyError",LO=`vercel.ai.error.${FO}`,NH=Symbol.for(LO),$O,my=class extends Ya{constructor({message:t}){super({name:FO,message:t}),this[$O]=!0}static isInstance(t){return Ya.hasMarker(t,LO)}};$O=NH;var BO="AI_TooManyEmbeddingValuesForCallError",zO=`vercel.ai.error.${BO}`,IH=Symbol.for(zO),UO,OH=class extends Ya{constructor(e){super({name:BO,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[UO]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Ya.hasMarker(e,zO)}};UO=IH;var qO="AI_TypeValidationError",HO=`vercel.ai.error.${qO}`,jH=Symbol.for(HO),VO,DH=class o2 extends Ya{constructor({value:t,cause:n}){super({name:qO,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${RO(n)}`,cause:n}),this[VO]=!0,this.value=t}static isInstance(t){return Ya.hasMarker(t,HO)}static wrap({value:t,cause:n}){return o2.isInstance(n)&&n.value===t?n:new o2({value:t,cause:n})}};VO=jH;var wb=DH,GO="AI_UnsupportedFunctionalityError",WO=`vercel.ai.error.${GO}`,MH=Symbol.for(WO),KO,Zy=class extends Ya{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:GO,message:n}),this[KO]=!0,this.functionality=t}static isInstance(t){return Ya.hasMarker(t,WO)}};KO=MH;let PH=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var FH={};function s2(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function LH(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=$H(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function $H(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Ev(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var BH=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=PH(n,t);if(e==null)return a;if(n.includes(r))throw new jO({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},zH=BH();function UH(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function U_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function qH({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new my({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new my({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=FH[t],e==null)throw new my({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new my({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var l2=Symbol.for("vercel.ai.validator");function HH(e){return{[l2]:!0,validate:e}}function VH(e){return typeof e=="object"&&e!==null&&l2 in e&&e[l2]===!0&&"validate"in e}function GH(e){return VH(e)?e:WH(e)}function WH(e){return HH(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function KH({value:e,schema:t}){const n=EE({value:e,schema:t});if(!n.success)throw wb.wrap({value:e,cause:n.error});return n.value}function EE({value:e,schema:t}){const n=GH(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:wb.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:wb.wrap({value:e,cause:r})}}}function ZH({text:e,schema:t}){try{const n=Ko.parse(e);return t==null?n:KH({value:n,schema:t})}catch(n){throw vb.isInstance(n)||wb.isInstance(n)?n:new vb({text:e,cause:n})}}function ZO({text:e,schema:t}){try{const n=Ko.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=EE({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:vb.isInstance(n)?n:new vb({text:e,cause:n})}}}function YH({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=EE({value:t[e],schema:n});if(!r.success)throw new jO({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var XH=()=>globalThis.fetch,u2=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>JH({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),JH=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=XH()})=>{try{const s=await o(e,{method:"POST",headers:UH(t),body:n.content,signal:i}),u=Ev(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw U_(f)||bl.isInstance(f)?f:new bl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(U_(c)||bl.isInstance(c))?c:new bl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(U_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new bl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function c2(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var QH=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Ev(r);if(o.trim()==="")return{responseHeaders:s,value:new bl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=ZH({text:o,schema:e});return{responseHeaders:s,value:new bl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new bl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},eV=e=>async({response:t})=>{const n=Ev(t);if(t.body==null)throw new AH({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(LH()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(ZO({text:r,schema:e}))}}))}},YO=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=ZO({text:a,schema:e}),o=Ev(t);if(!i.success)throw new bl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:tV}=globalThis;function nV(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return tV(t)}function rV(e){return e==null?void 0:e.replace(/\/$/,"")}function fo(e){if(aV(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:u,format:c,const:f,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),f!==void 0&&(g.enum=[f]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),a!=null&&(g.properties=Object.entries(a).reduce((v,[w,_])=>(v[w]=fo(_),v),{})),i&&(g.items=Array.isArray(i)?i.map(fo):fo(i)),o&&(g.allOf=o.map(fo)),s)if(s.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=s.filter(w=>!(typeof w=="object"&&(w==null?void 0:w.type)==="null"));if(v.length===1){const w=fo(v[0]);typeof w=="object"&&(g.nullable=!0,Object.assign(g,w))}else g.anyOf=v.map(fo),g.nullable=!0}else g.anyOf=s.map(fo);return u&&(g.oneOf=u.map(fo)),h!==void 0&&(g.minLength=h),g}function aV(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function iV(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new Zy({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const u=[];for(const c of s)switch(c.type){case"text":{u.push({text:c.text});break}case"image":{u.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:nV(c.image)}});break}case"file":{u.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:u});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(u=>{switch(u.type){case"text":return u.text.length===0?void 0:{text:u.text};case"file":{if(u.mimeType!=="image/png")throw new Zy({functionality:"Only PNG images are supported in assistant messages"});if(u.data instanceof URL)throw new Zy({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:u.mimeType,data:u.data}}}case"tool-call":return{functionCall:{name:u.toolName,args:u.args}}}}).filter(u=>u!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(u=>({functionResponse:{name:u.toolName,response:{name:u.toolName,content:u.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function Q3(e){return e.includes("/")?e:`models/${e}`}var oV=L.object({error:L.object({code:L.number().nullable(),message:L.string(),status:L.string()})}),d2=QH({errorSchema:oV,errorToMessage:e=>e.error.message});function sV(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],u=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:u?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const f=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):f.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:fo(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:s};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=m;throw new Zy({functionality:`Unsupported tool choice type: ${g}`})}}}function eR({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var lV=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g;const v=e.type,w=[],_=YH({provider:"google",providerOptions:h,schema:fV}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:u,seed:f,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?fo(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=iV(t);switch(v){case"regular":{const{tools:C,toolConfig:A,toolWarnings:O}=sV(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:A,cachedContent:this.settings.cachedContent},warnings:[...w,...O]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?fo(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:w};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:fo(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:w};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),u=JSON.stringify(o),c=s2(await c2(this.config.headers),e.headers),{responseHeaders:f,value:h,rawValue:m}=await u2({url:`${this.config.baseURL}/${Q3(this.modelId)}:generateContent`,headers:c,body:o,failedResponseHandler:d2,successfulResponseHandler:YO(cV),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=o,w=h.candidates[0],_=w.content==null||typeof w.content!="object"||!("parts"in w.content)?[]:w.content.parts,x=tR({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:nR(_),files:(t=rR(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:eR({finishReason:w.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:f,body:m},warnings:s,providerMetadata:{google:{groundingMetadata:(a=w.groundingMetadata)!=null?a:null,safetyRatings:(i=w.safetyRatings)!=null?i:null}},sources:aR({groundingMetadata:w.groundingMetadata,generateId:this.config.generateId}),request:{body:u}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=s2(await c2(this.config.headers),e.headers),{responseHeaders:i,value:o}=await u2({url:`${this.config.baseURL}/${Q3(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:d2,successfulResponseHandler:eV(dV),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...u}=t;let c="unknown",f={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,C,A;if(!v.success){w.enqueue({type:"error",error:v.error});return}const O=v.value,j=O.usageMetadata;j!=null&&(f={promptTokens:(_=j.promptTokenCount)!=null?_:NaN,completionTokens:(x=j.candidatesTokenCount)!=null?x:NaN});const N=(S=O.candidates)==null?void 0:S[0];if(N==null)return;const U=N.content;if(U!=null){const V=nR(U.parts);V!=null&&w.enqueue({type:"text-delta",textDelta:V});const J=rR(U.parts);if(J!=null)for(const Z of J)w.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const P=tR({parts:U.parts,generateId:m});if(P!=null)for(const Z of P)w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),g=!0}if(N.finishReason!=null){c=eR({finishReason:N.finishReason,hasToolCalls:g});const V=(E=aR({groundingMetadata:N.groundingMetadata,generateId:m}))!=null?E:[];for(const J of V)w.enqueue({type:"source",source:J});h={google:{groundingMetadata:(C=N.groundingMetadata)!=null?C:null,safetyRatings:(A=N.safetyRatings)!=null?A:null}}}},flush(v){v.enqueue({type:"finish",finishReason:c,usage:f,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:u},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function tR({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function nR(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function rR(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function aR({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var XO=L.object({role:L.string(),parts:L.array(L.union([L.object({text:L.string()}),L.object({functionCall:L.object({name:L.string(),args:L.unknown()})}),L.object({inlineData:L.object({mimeType:L.string(),data:L.string()})})])).nullish()}),uV=L.object({web:L.object({uri:L.string(),title:L.string()}).nullish(),retrievedContext:L.object({uri:L.string(),title:L.string()}).nullish()}),JO=L.object({webSearchQueries:L.array(L.string()).nullish(),retrievalQueries:L.array(L.string()).nullish(),searchEntryPoint:L.object({renderedContent:L.string()}).nullish(),groundingChunks:L.array(uV).nullish(),groundingSupports:L.array(L.object({segment:L.object({startIndex:L.number().nullish(),endIndex:L.number().nullish(),text:L.string().nullish()}),segment_text:L.string().nullish(),groundingChunkIndices:L.array(L.number()).nullish(),supportChunkIndices:L.array(L.number()).nullish(),confidenceScores:L.array(L.number()).nullish(),confidenceScore:L.array(L.number()).nullish()})).nullish(),retrievalMetadata:L.union([L.object({webDynamicRetrievalScore:L.number()}),L.object({})]).nullish()}),QO=L.object({category:L.string(),probability:L.string(),probabilityScore:L.number().nullish(),severity:L.string().nullish(),severityScore:L.number().nullish(),blocked:L.boolean().nullish()}),cV=L.object({candidates:L.array(L.object({content:XO.nullish().or(L.object({}).strict()),finishReason:L.string().nullish(),safetyRatings:L.array(QO).nullish(),groundingMetadata:JO.nullish()})),usageMetadata:L.object({promptTokenCount:L.number().nullish(),candidatesTokenCount:L.number().nullish(),totalTokenCount:L.number().nullish()}).nullish()}),dV=L.object({candidates:L.array(L.object({content:XO.nullish(),finishReason:L.string().nullish(),safetyRatings:L.array(QO).nullish(),groundingMetadata:JO.nullish()})).nullish(),usageMetadata:L.object({promptTokenCount:L.number().nullish(),candidatesTokenCount:L.number().nullish(),totalTokenCount:L.number().nullish()}).nullish()}),fV=L.object({responseModalities:L.array(L.enum(["TEXT","IMAGE"])).nullish()}),hV=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new OH({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=s2(await c2(this.config.headers),t),{responseHeaders:a,value:i}=await u2({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:d2,successfulResponseHandler:YO(pV),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},pV=L.object({embeddings:L.array(L.object({values:L.array(L.number())}))});function mV(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function ej(e={}){var t;const n=(t=rV(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":qH({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,u={})=>{var c;return new lV(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:zH,isSupportedUrl:mV,fetch:e.fetch})},i=(s,u={})=>new hV(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,u)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}ej();var tj="vercel.ai.error",gV=Symbol.for(tj),nj,yV=class rj extends Error{constructor({name:t,message:n,cause:r}){super(n),this[nj]=!0,this.name=t,this.cause=r}static isInstance(t){return rj.hasMarker(t,tj)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};nj=gV;var Ta=yV,aj="AI_APICallError",ij=`vercel.ai.error.${aj}`,bV=Symbol.for(ij),oj,vl=class extends Ta{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:u}){super({name:aj,message:e,cause:o}),this[oj]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=u}static isInstance(e){return Ta.hasMarker(e,ij)}};oj=bV;var sj="AI_EmptyResponseBodyError",lj=`vercel.ai.error.${sj}`,vV=Symbol.for(lj),uj,wV=class extends Ta{constructor({message:e="Empty response body"}={}){super({name:sj,message:e}),this[uj]=!0}static isInstance(e){return Ta.hasMarker(e,lj)}};uj=vV;function cj(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var dj="AI_InvalidArgumentError",fj=`vercel.ai.error.${dj}`,_V=Symbol.for(fj),hj,xV=class extends Ta{constructor({message:t,cause:n,argument:r}){super({name:dj,message:t,cause:n}),this[hj]=!0,this.argument=r}static isInstance(t){return Ta.hasMarker(t,fj)}};hj=_V;var pj="AI_InvalidPromptError",mj=`vercel.ai.error.${pj}`,SV=Symbol.for(mj),gj,EV=class extends Ta{constructor({prompt:e,message:t,cause:n}){super({name:pj,message:`Invalid prompt: ${t}`,cause:n}),this[gj]=!0,this.prompt=e}static isInstance(e){return Ta.hasMarker(e,mj)}};gj=SV;var yj="AI_InvalidResponseDataError",bj=`vercel.ai.error.${yj}`,kV=Symbol.for(bj),vj,q_=class extends Ta{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:yj,message:t}),this[vj]=!0,this.data=e}static isInstance(e){return Ta.hasMarker(e,bj)}};vj=kV;var wj="AI_JSONParseError",_j=`vercel.ai.error.${wj}`,CV=Symbol.for(_j),xj,_b=class extends Ta{constructor({text:e,cause:t}){super({name:wj,message:`JSON parsing failed: Text: ${e}.
Error message: ${cj(t)}`,cause:t}),this[xj]=!0,this.text=e}static isInstance(e){return Ta.hasMarker(e,_j)}};xj=CV;var Sj="AI_LoadAPIKeyError",Ej=`vercel.ai.error.${Sj}`,AV=Symbol.for(Ej),kj,gy=class extends Ta{constructor({message:e}){super({name:Sj,message:e}),this[kj]=!0}static isInstance(e){return Ta.hasMarker(e,Ej)}};kj=AV;var Cj="AI_TypeValidationError",Aj=`vercel.ai.error.${Cj}`,TV=Symbol.for(Aj),Tj,RV=class f2 extends Ta{constructor({value:t,cause:n}){super({name:Cj,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${cj(n)}`,cause:n}),this[Tj]=!0,this.value=t}static isInstance(t){return Ta.hasMarker(t,Aj)}static wrap({value:t,cause:n}){return f2.isInstance(n)&&n.value===t?n:new f2({value:t,cause:n})}};Tj=TV;var xb=RV,Rj="AI_UnsupportedFunctionalityError",Nj=`vercel.ai.error.${Rj}`,NV=Symbol.for(Nj),Ij,ho=class extends Ta{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Rj,message:t}),this[Ij]=!0,this.functionality=e}static isInstance(e){return Ta.hasMarker(e,Nj)}};Ij=NV;let IV=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},iR=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function H_(e){}function OV(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=H_,onError:n=H_,onRetry:r=H_,onComment:a}=e;let i="",o=!0,s,u="",c="";function f(w){const _=o?w.replace(/^\xEF\xBB\xBF/,""):w,[x,S]=jV(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(w){if(w===""){g();return}if(w.startsWith(":")){a&&a(w.slice(w.startsWith(": ")?2:1));return}const _=w.indexOf(":");if(_!==-1){const x=w.slice(0,_),S=w[_+1]===" "?2:1,E=w.slice(_+S);m(x,E,w);return}m(w,"",w)}function m(w,_,x){switch(w){case"event":c=_;break;case"data":u=`${u}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new iR(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new iR(`Unknown field "${w.length>20?`${w.slice(0,20)}…`:w}"`,{type:"unknown-field",field:w,value:_,line:x}));break}}function g(){u.length>0&&t({id:s,event:c||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",c=""}function v(w={}){i&&w.consume&&h(i),o=!0,s=void 0,u="",c="",i=""}return{feed:f,reset:v}}function jV(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class DV extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=OV({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var MV={};function Sb(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function kv(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var PV=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=IV(n,t);if(e==null)return a;if(n.includes(r))throw new xV({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},yy=PV();function FV(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function V_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function LV({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new gy({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new gy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=MV[t],e==null)throw new gy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new gy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var h2=Symbol.for("vercel.ai.validator");function $V(e){return{[h2]:!0,validate:e}}function BV(e){return typeof e=="object"&&e!==null&&h2 in e&&e[h2]===!0&&"validate"in e}function zV(e){return BV(e)?e:UV(e)}function UV(e){return $V(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function qV({value:e,schema:t}){const n=Oj({value:e,schema:t});if(!n.success)throw xb.wrap({value:e,cause:n.error});return n.value}function Oj({value:e,schema:t}){const n=zV(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:xb.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:xb.wrap({value:e,cause:r})}}}function HV({text:e,schema:t}){try{const n=Ko.parse(e);return t==null?n:qV({value:n,schema:t})}catch(n){throw _b.isInstance(n)||xb.isInstance(n)?n:new _b({text:e,cause:n})}}function jj({text:e,schema:t}){try{const n=Ko.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Oj({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:_b.isInstance(n)?n:new _b({text:e,cause:n})}}}function G_(e){try{return Ko.parse(e),!0}catch{return!1}}var VV=()=>globalThis.fetch,Eb=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>GV({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),GV=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=VV()})=>{try{const s=await o(e,{method:"POST",headers:FV(t),body:n.content,signal:i}),u=kv(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw V_(f)||vl.isInstance(f)?f:new vl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(V_(c)||vl.isInstance(c))?c:new vl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(V_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new vl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},WV=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=kv(r);if(o.trim()==="")return{responseHeaders:s,value:new vl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=HV({text:o,schema:e});return{responseHeaders:s,value:new vl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new vl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Dj=e=>async({response:t})=>{const n=kv(t);if(t.body==null)throw new wV({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new DV).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(jj({text:r,schema:e}))}}))}},Mj=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=jj({text:a,schema:e}),o=kv(t);if(!i.success)throw new vl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:KV}=globalThis;function ZV(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return KV(t)}function YV(e){return e==null?void 0:e.replace(/\/$/,"")}var XV=Object.defineProperty,JV=Object.defineProperties,QV=Object.getOwnPropertyDescriptors,kb=Object.getOwnPropertySymbols,Pj=Object.prototype.hasOwnProperty,Fj=Object.prototype.propertyIsEnumerable,oR=(e,t,n)=>t in e?XV(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ui=(e,t)=>{for(var n in t||(t={}))Pj.call(t,n)&&oR(e,n,t[n]);if(kb)for(var n of kb(t))Fj.call(t,n)&&oR(e,n,t[n]);return e},Yy=(e,t)=>JV(e,QV(t)),Cb=(e,t)=>{var n={};for(var r in e)Pj.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&kb)for(var r of kb(e))t.indexOf(r)<0&&Fj.call(e,r)&&(n[r]=e[r]);return n};function ps(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function eG(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:ps(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=ps(s))!=null?n:ps(o[0].providerMetadata)});break}const u=ps(s),c=o.map(f=>{var h,m,g,v;switch(f.type){case"text":return{type:"text",text:f.text,cache_control:(h=ps(f.providerMetadata))!=null?h:u};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(m=f.mimeType)!=null?m:"image/jpeg"};base64,${ZV(f.image)}`},cache_control:(g=ps(f.providerMetadata))!=null?g:u};case"file":return{type:"text",text:f.data instanceof URL?f.data.toString():f.data,cache_control:(v=ps(f.providerMetadata))!=null?v:u};default:{const w=f;throw new Error(`Unsupported content part type: ${w}`)}}});a.push({role:"user",content:c});break}case"assistant":{let u="";const c=[];for(const f of o)switch(f.type){case"text":{u+=f.text;break}case"tool-call":{c.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=f;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,cache_control:ps(s)});break}case"tool":{for(const u of o)a.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),cache_control:(r=ps(s))!=null?r:ps(u.providerMetadata)});break}default:{const u=i;throw new Error(`Unsupported role: ${u}`)}}return a}function sR(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function Ab(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var kE=L.object({error:L.object({message:L.string(),type:L.string(),param:L.any().nullable(),code:L.string().nullable()})}),Tb=WV({errorSchema:kE,errorToMessage:e=>e.error.message});function tG(e){return"parameters"in e}var nG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:u,responseFormat:c,topK:f,providerMetadata:h}){var m;const g=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},w=Ui(Ui(Ui({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:u,response_format:c,top_k:f,messages:eG(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return Ui(Ui({},w),iG(e));case"object-json":return Yy(Ui({},w),{response_format:{type:"json_object"}});case"object-tool":return Yy(Ui({},w),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new ho({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const u=this.getArgs(e),{responseHeaders:c,value:f}=await Eb({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Sb(this.config.headers(),e.headers),body:u,failedResponseHandler:Tb,successfulResponseHandler:Mj(rG),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u,{messages:m}=h,g=Cb(h,["messages"]),v=f.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:f.id,modelId:f.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(w=>{var _;return{toolCallType:"function",toolCallId:(_=w.id)!=null?_:yy(),toolName:w.function.name,args:w.function.arguments}}),finishReason:Ab(v.finish_reason),usage:{promptTokens:(i=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=f.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:sR(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Eb({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Sb(this.config.headers(),e.headers),body:Yy(Ui({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Tb,successfulResponseHandler:Dj(aG),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=Cb(a,["messages"]),s=[];let u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,v,w,_,x,S,E,C,A,O,j,N;if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const U=h.value;if("error"in U){u="error",m.enqueue({type:"error",error:U.error});return}U.id&&m.enqueue({type:"response-metadata",id:U.id}),U.model&&m.enqueue({type:"response-metadata",modelId:U.model}),U.usage!=null&&(c={promptTokens:U.usage.prompt_tokens,completionTokens:U.usage.completion_tokens});const V=U.choices[0];if((V==null?void 0:V.finish_reason)!=null&&(u=Ab(V.finish_reason)),(V==null?void 0:V.delta)==null)return;const J=V.delta;J.content!=null&&m.enqueue({type:"text-delta",textDelta:J.content}),J.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:J.reasoning});const P=sR(V==null?void 0:V.logprobs);if(P!=null&&P.length&&(f===void 0&&(f=[]),f.push(...P)),J.tool_calls!=null)for(const Z of J.tool_calls){const F=Z.index;if(s[F]==null){if(Z.type!=="function")throw new q_({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new q_({data:Z,message:"Expected 'id' to be a string."});if(((g=Z.function)==null?void 0:g.name)==null)throw new q_({data:Z,message:"Expected 'function.name' to be a string."});s[F]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const le=s[F];if(le==null)throw new Error("Tool call is missing");((w=le.function)==null?void 0:w.name)!=null&&((_=le.function)==null?void 0:_.arguments)!=null&&G_(le.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:le.id,toolName:le.function.name,argsTextDelta:le.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=le.id)!=null?x:yy(),toolName:le.function.name,args:le.function.arguments}),le.sent=!0);continue}const ue=s[F];if(ue==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(ue.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ue.id,toolName:ue.function.name,argsTextDelta:(A=Z.function.arguments)!=null?A:""}),((O=ue.function)==null?void 0:O.name)!=null&&((j=ue.function)==null?void 0:j.arguments)!=null&&G_(ue.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=ue.id)!=null?N:yy(),toolName:ue.function.name,args:ue.function.arguments}),ue.sent=!0)}},flush(h){var m;if(u==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:yy(),toolName:g.function.name,args:G_(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},Lj=L.object({id:L.string().optional(),model:L.string().optional(),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number(),total_tokens:L.number()}).nullish()}),rG=Lj.extend({choices:L.array(L.object({message:L.object({role:L.literal("assistant"),content:L.string().nullable().optional(),reasoning:L.string().nullable().optional(),tool_calls:L.array(L.object({id:L.string().optional().nullable(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).optional()}),index:L.number(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullable().optional(),finish_reason:L.string().optional().nullable()}))}),aG=L.union([Lj.extend({choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).optional(),content:L.string().nullish(),reasoning:L.string().nullish().optional(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullable().optional(),index:L.number()}))}),kE]);function iG(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>tG(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function oG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new EV({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new ho({functionality:"images"});case"file":throw new ho({functionality:"file attachments"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new ho({functionality:"tool-call messages"});case"reasoning":throw new ho({functionality:"reasoning messages"});case"redacted-reasoning":throw new ho({functionality:"redacted reasoning messages"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new ho({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function lR(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var sG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:u,responseFormat:c,topK:f,stopSequences:h,providerMetadata:m}){var g,v;const w=e.type,_=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:x}=oG({prompt:n,inputFormat:t}),S=Ui(Ui(Ui({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:u,stop:h,response_format:c,top_k:f,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(w){case"regular":{if((v=e.tools)!=null&&v.length)throw new ho({functionality:"tools"});if(e.toolChoice)throw new ho({functionality:"toolChoice"});return S}case"object-json":throw new ho({functionality:"object-json mode"});case"object-tool":throw new ho({functionality:"object-tool mode"});default:{const E=w;throw new ho({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:u}=await Eb({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Sb(this.config.headers(),e.headers),body:o,failedResponseHandler:Tb,successfulResponseHandler:Mj(uR),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o,{prompt:f}=c,h=Cb(c,["prompt"]);if("error"in u)throw new Error(`${u.error.message}`);const m=u.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:u.id,modelId:u.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=u.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=u.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:Ab(m.finish_reason),logprobs:lR(m.logprobs),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Eb({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Sb(this.config.headers(),e.headers),body:Yy(Ui({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Tb,successfulResponseHandler:Dj(uR),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=Cb(a,["prompt"]);let s="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(f,h){if(!f.success){s="error",h.enqueue({type:"error",error:f.error});return}const m=f.value;if("error"in m){s="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(u={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=Ab(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=lR(g==null?void 0:g.logprobs);v!=null&&v.length&&(c===void 0&&(c=[]),c.push(...v))},flush(f){f.enqueue({type:"finish",finishReason:s,logprobs:c,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},uR=L.union([L.object({id:L.string().optional(),model:L.string().optional(),choices:L.array(L.object({text:L.string(),reasoning:L.string().nullish().optional(),finish_reason:L.string().nullish(),index:L.number(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullable().optional()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).optional().nullable()}),kE]);function $j(e={}){var t,n,r;const a=(n=YV((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>Ui({Authorization:`Bearer ${LV({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,m={})=>new nG(h,m,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m={})=>new sG(h,m,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?u(h,m):s(h,m)},f=function(h,m){return c(h,m)};return f.languageModel=c,f.chat=s,f.completion=u,f}$j({compatibility:"strict"});var Dc={},W_={},cR;function dR(){return cR||(cR=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(W_)),W_}var fR;function lG(){return fR||(fR=1,function(e){var t=Dc&&Dc.__createBinding||(Object.create?function(c,f,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,m,g)}:function(c,f,h,m){m===void 0&&(m=h),c[m]=f[h]}),n=Dc&&Dc.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=dR();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(dR(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return s(c.trim(),f)}e.parseJSON=o;const s=(c,f)=>{const h=c.length;let m=0;const g=A=>{throw new a(`${A} at position ${m}`)},v=A=>{throw new i(`${A} at position ${m}`)},w=()=>(C(),m>=h&&g("Unexpected end of input"),c[m]==='"'?_():c[m]==="{"?x():c[m]==="["?S():c.substring(m,m+4)==="null"||r.Allow.NULL&f&&h-m<4&&"null".startsWith(c.substring(m))?(m+=4,null):c.substring(m,m+4)==="true"||r.Allow.BOOL&f&&h-m<4&&"true".startsWith(c.substring(m))?(m+=4,!0):c.substring(m,m+5)==="false"||r.Allow.BOOL&f&&h-m<5&&"false".startsWith(c.substring(m))?(m+=5,!1):c.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&f&&h-m<8&&"Infinity".startsWith(c.substring(m))?(m+=8,1/0):c.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-m&&h-m<9&&"-Infinity".startsWith(c.substring(m))?(m+=9,-1/0):c.substring(m,m+3)==="NaN"||r.Allow.NAN&f&&h-m<3&&"NaN".startsWith(c.substring(m))?(m+=3,NaN):E()),_=()=>{const A=m;let O=!1;for(m++;m<h&&(c[m]!=='"'||O&&c[m-1]==="\\");)O=c[m]==="\\"?!O:!1,m++;if(c.charAt(m)=='"')try{return JSON.parse(c.substring(A,++m-Number(O)))}catch(j){v(String(j))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(A,m-Number(O))+'"')}catch{return JSON.parse(c.substring(A,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{m++,C();const A={};try{for(;c[m]!=="}";){if(C(),m>=h&&r.Allow.OBJ&f)return A;const O=_();C(),m++;try{const j=w();A[O]=j}catch(j){if(r.Allow.OBJ&f)return A;throw j}C(),c[m]===","&&m++}}catch{if(r.Allow.OBJ&f)return A;g("Expected '}' at end of object")}return m++,A},S=()=>{m++;const A=[];try{for(;c[m]!=="]";)A.push(w()),C(),c[m]===","&&m++}catch{if(r.Allow.ARR&f)return A;g("Expected ']' at end of array")}return m++,A},E=()=>{if(m===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(O){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(O))}}const A=m;for(c[m]==="-"&&m++;c[m]&&",]}".indexOf(c[m])===-1;)m++;m==h&&!(r.Allow.NUM&f)&&g("Unterminated number literal");try{return JSON.parse(c.substring(A,m))}catch{c.substring(A,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(A,c.lastIndexOf("e")))}catch(j){v(String(j))}}},C=()=>{for(;m<h&&` 
\r	`.includes(c[m]);)m++};return w()},u=o;e.parse=u}(Dc)),Dc}var uG=lG();function K_(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new vr({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(zf(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var cG=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=uG.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:_s(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function dG({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var fG=L.object({error:L.object({code:L.string().nullable(),message:L.string(),param:L.any().nullable(),type:L.string()})}),p2=aO({errorSchema:fG,errorToMessage:e=>e.error.message});function hG({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new vr({functionality:`Unsupported tool choice type: ${s}`})}}}function pG(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var mG=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},gG=e=>async({response:t})=>{const n=u0(t);if(t.body===null)throw new gE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new mG).pipeThrough(new TransformStream({transform(r,a){a.enqueue(Yc({schema:e,text:r}))}}))}},yG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:u,topK:c,topP:f}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:pG({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:u,tfs_z:this.settings.tfsZ,top_k:c,top_p:f,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:w}=hG({mode:n});return{args:{...g,messages:K_(a),tools:v},type:h,warnings:[...m,...w]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:K_(a)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:K_(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Bo({abortSignal:e.abortSignal,body:i,failedResponseHandler:p2,fetch:this.config.fetch,headers:Ns(this.config.headers(),e.headers),successfulResponseHandler:ld(bG),url:`${this.config.baseURL}/chat`}),{messages:u,...c}=i,f=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:_s(),toolCallType:"function",toolName:h.function.name}});return{finishReason:dG({finishReason:s.done_reason,hasToolCalls:f!==void 0&&f.length>0}),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:f,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...g.response}),g.text&&w.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)w.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),w.enqueue({type:"tool-call",..._});w.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),w.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Bo({abortSignal:e.abortSignal,body:t,failedResponseHandler:p2,fetch:this.config.fetch,headers:Ns(this.config.headers(),e.headers),successfulResponseHandler:gG(vG),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,u=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new cG({tools:u,type:n});let f="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:f,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const w=g.value;if(w.done){f=c.finish({controller:v}),h={completionTokens:w.eval_count,promptTokens:w.prompt_eval_count||0};return}m&&c.parse({controller:v,delta:w.message.content})||w.message.content!==null&&v.enqueue({textDelta:w.message.content,type:"text-delta"})}})),warnings:r}}},bG=L.object({created_at:L.string(),done:L.literal(!0),done_reason:L.string().optional().nullable(),eval_count:L.number(),eval_duration:L.number(),load_duration:L.number().optional(),message:L.object({content:L.string(),role:L.string(),tool_calls:L.array(L.object({function:L.object({arguments:L.record(L.any()),name:L.string()}),id:L.string().optional()})).optional().nullable()}),model:L.string(),prompt_eval_count:L.number().optional(),prompt_eval_duration:L.number().optional(),total_duration:L.number()}),vG=L.discriminatedUnion("done",[L.object({created_at:L.string(),done:L.literal(!1),message:L.object({content:L.string(),role:L.string()}),model:L.string()}),L.object({created_at:L.string(),done:L.literal(!0),eval_count:L.number(),eval_duration:L.number(),load_duration:L.number().optional(),model:L.string(),prompt_eval_count:L.number().optional(),prompt_eval_duration:L.number().optional(),total_duration:L.number()})]),wG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new bE({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Bo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:p2,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:ld(_G),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},_G=L.object({embeddings:L.array(L.array(L.number())),prompt_eval_count:L.number().nullable()});function Bj(e={}){var t;const n=(t=oO(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,u={})=>new yG(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,u={})=>new wG(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,u){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,u)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}Bj();let xG=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function Vf(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function SG(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=EG(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function EG(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Cv(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var kG=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=xG(n,t);if(e==null)return a;if(n.includes(r))throw new yE({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Z_=kG();function CG(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Y_(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var m2=Symbol.for("vercel.ai.validator");function AG(e){return{[m2]:!0,validate:e}}function TG(e){return typeof e=="object"&&e!==null&&m2 in e&&e[m2]===!0&&"validate"in e}function RG(e){return TG(e)?e:NG(e)}function NG(e){return AG(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function IG({value:e,schema:t}){const n=zj({value:e,schema:t});if(!n.success)throw Du.wrap({value:e,cause:n.error});return n.value}function zj({value:e,schema:t}){const n=RG(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Du.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Du.wrap({value:e,cause:r})}}}function OG({text:e,schema:t}){try{const n=Ko.parse(e);return t==null?n:IG({value:n,schema:t})}catch(n){throw ju.isInstance(n)||Du.isInstance(n)?n:new ju({text:e,cause:n})}}function Uj({text:e,schema:t}){try{const n=Ko.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=zj({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:ju.isInstance(n)?n:new ju({text:e,cause:n})}}}function hR(e){try{return Ko.parse(e),!0}catch{return!1}}var jG=()=>globalThis.fetch,Gf=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>DG({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),DG=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=jG()})=>{try{const s=await o(e,{method:"POST",headers:CG(t),body:n.content,signal:i}),u=Cv(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw Y_(f)||fa.isInstance(f)?f:new fa({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(Y_(c)||fa.isInstance(c))?c:new fa({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(Y_(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new fa({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},Av=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Cv(r);if(o.trim()==="")return{responseHeaders:s,value:new fa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=OG({text:o,schema:e});return{responseHeaders:s,value:new fa({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new fa({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},qj=e=>async({response:t})=>{const n=Cv(t);if(t.body==null)throw new gE({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(SG()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Uj({text:r,schema:e}))}}))}},Tv=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Uj({text:a,schema:e}),o=Cv(t);if(!i.success)throw new fa({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:MG}=globalThis;function PG(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return MG(t)}function FG(e){return e==null?void 0:e.replace(/\/$/,"")}function Up(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function LG(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Up({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Up(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const u=Up(o);switch(o.type){case"text":return{type:"text",text:o.text,...u};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${PG(o.image)}`},...u};case"file":throw new vr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const u of r){const c=Up(u);switch(u.type){case"text":{o+=u.text;break}case"tool-call":{s.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)},...c});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=Up(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function Rb({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Nb(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var $G=L.object({error:L.object({message:L.string(),type:L.string().nullish(),param:L.any().nullish(),code:L.union([L.string(),L.number()]).nullish()})}),Rv={errorSchema:$G,errorToMessage:e=>e.error.message};function BG({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)u.type==="provider-defined"?a.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const u=s;throw new vr({functionality:`Unsupported tool choice type: ${u}`})}}}var zG=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Rv;this.chunkSchema=qG(i.errorSchema),this.failedResponseHandler=Av(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:u,stopSequences:c,responseFormat:f,seed:h}){var m,g;const v=e.type,w=[];i!=null&&w.push({type:"unsupported-setting",setting:"topK"}),(f==null?void 0:f.type)==="json"&&f.schema!=null&&!this.supportsStructuredOutputs&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(f==null?void 0:f.type)==="json"?this.supportsStructuredOutputs===!0&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,name:(m=f.name)!=null?m:"response",description:f.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...u==null?void 0:u[this.providerOptionsName],messages:LG(t)};switch(v){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=BG({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...w,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:w};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:w};default:{const x=v;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u,c;const{args:f,warnings:h}=this.getArgs({...e}),m=JSON.stringify(f),{responseHeaders:g,value:v,rawValue:w}=await Gf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Vf(this.config.headers(),e.headers),body:f,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Tv(UG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=f,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:w});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:Z_(),toolName:C.function.name,args:C.function.arguments}}),finishReason:Nb(S.finish_reason),usage:{promptTokens:(s=(o=v.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(c=(u=v.usage)==null?void 0:u.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:w},response:Rb(v),warnings:h,request:{body:m}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const x of v.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&_.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const x of v.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),_.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await Gf({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Vf(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:qj(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=n,f=[];let h="unknown",m={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(v,w){var _,x,S,E,C,A,O,j,N,U,V,J,P,Z;if(!v.success){h="error",w.enqueue({type:"error",error:v.error});return}const F=v.value;if(i==null||i.processChunk(v.rawValue),"error"in F){h="error",w.enqueue({type:"error",error:F.error.message});return}g&&(g=!1,w.enqueue({type:"response-metadata",...Rb(F)})),F.usage!=null&&(m={promptTokens:(_=F.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=F.usage.completion_tokens)!=null?x:void 0});const ue=F.choices[0];if((ue==null?void 0:ue.finish_reason)!=null&&(h=Nb(ue.finish_reason)),(ue==null?void 0:ue.delta)==null)return;const le=ue.delta;if(le.reasoning_content!=null&&w.enqueue({type:"reasoning",textDelta:le.reasoning_content}),le.content!=null&&w.enqueue({type:"text-delta",textDelta:le.content}),le.tool_calls!=null)for(const ne of le.tool_calls){const Q=ne.index;if(f[Q]==null){if(ne.type!=="function")throw new Of({data:ne,message:"Expected 'function' type."});if(ne.id==null)throw new Of({data:ne,message:"Expected 'id' to be a string."});if(((S=ne.function)==null?void 0:S.name)==null)throw new Of({data:ne,message:"Expected 'function.name' to be a string."});f[Q]={id:ne.id,type:"function",function:{name:ne.function.name,arguments:(E=ne.function.arguments)!=null?E:""},hasFinished:!1};const G=f[Q];((C=G.function)==null?void 0:C.name)!=null&&((A=G.function)==null?void 0:A.arguments)!=null&&(G.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:G.function.arguments}),hR(G.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=G.id)!=null?O:Z_(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0));continue}const te=f[Q];te.hasFinished||(((j=ne.function)==null?void 0:j.arguments)!=null&&(te.function.arguments+=(U=(N=ne.function)==null?void 0:N.arguments)!=null?U:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:te.id,toolName:te.function.name,argsTextDelta:(V=ne.function.arguments)!=null?V:""}),((J=te.function)==null?void 0:J.name)!=null&&((P=te.function)==null?void 0:P.arguments)!=null&&hR(te.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=te.id)!=null?Z:Z_(),toolName:te.function.name,args:te.function.arguments}),te.hasFinished=!0))}},flush(v){var w,_;const x=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(w=m.promptTokens)!=null?w:NaN,completionTokens:(_=m.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:a}}}},UG=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({message:L.object({role:L.literal("assistant").nullish(),content:L.string().nullish(),reasoning_content:L.string().nullish(),tool_calls:L.array(L.object({id:L.string().nullish(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).nullish()}),finish_reason:L.string().nullish()})),usage:L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish()}).nullish()}),qG=e=>L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).nullish(),content:L.string().nullish(),reasoning_content:L.string().nullish(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),finish_reason:L.string().nullish()})),usage:L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish()}).nullish()}),e]);function HG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new pl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new vr({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new vr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new vr({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var VG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Rv;this.chunkSchema=WG(a.errorSchema),this.failedResponseHandler=Av(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,providerMetadata:m}){var g;const v=e.type,w=[];o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=HG({prompt:n,inputFormat:t}),S=[...x??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new vr({functionality:"tools"});if(e.toolChoice)throw new vr({functionality:"toolChoice"});return{args:E,warnings:w}}case"object-json":throw new vr({functionality:"object-json mode"});case"object-tool":throw new vr({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await Gf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Vf(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Tv(GG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:f,...h}=i,m=u.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=u.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=u.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:Nb(m.finish_reason),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s,body:c},response:Rb(u),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await Gf({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Vf(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:qj(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){u="error",m.enqueue({type:"error",error:g.error});return}f&&(f=!1,m.enqueue({type:"response-metadata",...Rb(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(u=Nb(v.finish_reason)),(v==null?void 0:v.text)!=null&&m.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},GG=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),WG=e=>L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string().nullish(),index:L.number()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),e]),KG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new bE({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await Gf({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Vf(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Av((r=this.config.errorStructure)!=null?r:Rv),successfulResponseHandler:Tv(ZG),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},ZG=L.object({data:L.array(L.object({embedding:L.array(L.number())})),usage:L.object({prompt_tokens:L.number()}).nullish()}),YG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:w,responseHeaders:_}=await Gf({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Vf(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:Av((m=this.config.errorStructure)!=null?m:Rv),successfulResponseHandler:Tv(XG),abortSignal:s,fetch:this.config.fetch});return{images:w.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:_}}}},XG=L.object({data:L.array(L.object({b64_json:L.string()}))});function JG(e){const t=FG(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>o(h,m),o=(h,m={})=>new zG(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,m={})=>new VG(h,m,a("completion")),u=(h,m={})=>new KG(h,m,a("embedding")),c=(h,m={})=>new YG(h,m,a("image")),f=(h,m)=>i(h,m);return f.languageModel=i,f.chatModel=o,f.completionModel=s,f.textEmbeddingModel=u,f.imageModel=c,f}const Af=(e,t)=>`${e}:${t}`,d0=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},CE=e=>e==="openai"||e==="openrouter"||e==="google",AE=e=>e==="ollama"||e==="openai-compatible",em=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",Hj=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],g2={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},Vj=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function QG(e,t,n){try{switch(e.type){case"openai":return vO({apiKey:n})(t);case"google":return ej({apiKey:n})(t);case"openrouter":return $j({apiKey:n})(t);case"ollama":return Bj({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return JG({baseURL:Vj(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function eW(e,t,n){const r=e.type,i=(e.fetchedModels&&e.fetchedModels.length>0?e.fetchedModels:g2[r]||[]).find(c=>c.id===t);if(!i)return;const o=QG(e,t,n);if(!o)return;const s=e.type==="openai",u=["openai","google","openrouter"].includes(e.type);return{id:Af(e.id,t),name:i.name,providerId:e.id,providerName:e.name,instance:o,supportsImageGeneration:s,supportsToolCalling:u,metadata:i.metadata}}var f0=Y4();const Gj=Qa(f0);function tW(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const nW=e=>{switch(e){case"success":return iW;case"info":return sW;case"warning":return oW;case"error":return lW;default:return null}},rW=Array(12).fill(0),aW=({visible:e,className:t})=>wt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},wt.createElement("div",{className:"sonner-spinner"},rW.map((n,r)=>wt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),iW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),oW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),sW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),lW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},wt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),uW=wt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},wt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),wt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),cW=()=>{const[e,t]=wt.useState(document.hidden);return wt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let y2=1;class dW{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:y2++,o=this.toasts.find(u=>u.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:r}),{...u,...t,id:i,dismissible:s,title:r}):u):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async c=>{if(o=["resolve",c],wt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(hW(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!wt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...v})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof f=="object"&&!wt.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((c,f)=>s.then(()=>o[0]==="reject"?f(o[1]):c(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||y2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const _i=new dW,fW=(e,t)=>{const n=(t==null?void 0:t.id)||y2++;return _i.addToast({title:e,...t,id:n}),n},hW=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",pW=fW,mW=()=>_i.toasts,gW=()=>_i.getActiveToasts(),ct=Object.assign(pW,{success:_i.success,info:_i.info,warning:_i.warning,error:_i.error,custom:_i.custom,message:_i.message,promise:_i.promise,dismiss:_i.dismiss,loading:_i.loading},{getHistory:mW,getToasts:gW});tW("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function by(e){return e.label!==void 0}const yW=3,bW="24px",vW="16px",pR=4e3,wW=356,_W=14,xW=45,SW=200;function ms(...e){return e.filter(Boolean).join(" ")}function EW(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const kW=e=>{var t,n,r,a,i,o,s,u,c;const{invert:f,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:w,heights:_,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:A,closeButton:O,style:j,cancelButtonStyle:N,actionButtonStyle:U,className:V="",descriptionClassName:J="",duration:P,position:Z,gap:F,expandByDefault:ue,classNames:le,icons:ne,closeButtonAriaLabel:Q="Close toast"}=e,[te,G]=wt.useState(null),[X,ae]=wt.useState(null),[be,we]=wt.useState(!1),[fe,Me]=wt.useState(!1),[Pe,Oe]=wt.useState(!1),[Ae,$e]=wt.useState(!1),[qe,Fe]=wt.useState(!1),[Ne,$]=wt.useState(0),[Se,ke]=wt.useState(0),ce=wt.useRef(h.duration||P||pR),ie=wt.useRef(null),Y=wt.useRef(null),_e=x===0,De=x+1<=w,Ee=h.type,Ze=h.dismissible!==!1,Et=h.className||"",at=h.descriptionClassName||"",_t=wt.useMemo(()=>_.findIndex(je=>je.toastId===h.id)||0,[_,h.id]),Nt=wt.useMemo(()=>{var je;return(je=h.closeButton)!=null?je:O},[h.closeButton,O]),Rt=wt.useMemo(()=>h.duration||P||pR,[h.duration,P]),Kt=wt.useRef(0),pe=wt.useRef(0),R=wt.useRef(0),H=wt.useRef(null),[de,Re]=Z.split("-"),ye=wt.useMemo(()=>_.reduce((je,Je,It)=>It>=_t?je:je+Je.height,0),[_,_t]),Ce=cW(),oe=h.invert||f,ft=Ee==="loading";pe.current=wt.useMemo(()=>_t*F+ye,[_t,ye]),wt.useEffect(()=>{ce.current=Rt},[Rt]),wt.useEffect(()=>{we(!0)},[]),wt.useEffect(()=>{const je=Y.current;if(je){const Je=je.getBoundingClientRect().height;return ke(Je),v(It=>[{toastId:h.id,height:Je,position:h.position},...It]),()=>v(It=>It.filter(me=>me.toastId!==h.id))}},[v,h.id]),wt.useLayoutEffect(()=>{if(!be)return;const je=Y.current,Je=je.style.height;je.style.height="auto";const It=je.getBoundingClientRect().height;je.style.height=Je,ke(It),v(me=>me.find(z=>z.toastId===h.id)?me.map(z=>z.toastId===h.id?{...z,height:It}:z):[{toastId:h.id,height:It,position:h.position},...me])},[be,h.title,h.description,v,h.id]);const vt=wt.useCallback(()=>{Me(!0),$(pe.current),v(je=>je.filter(Je=>Je.toastId!==h.id)),setTimeout(()=>{C(h)},SW)},[h,C,v,pe]);wt.useEffect(()=>{if(h.promise&&Ee==="loading"||h.duration===1/0||h.type==="loading")return;let je;return E||g||Ce?(()=>{if(R.current<Kt.current){const me=new Date().getTime()-Kt.current;ce.current=ce.current-me}R.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(Kt.current=new Date().getTime(),je=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},ce.current))})(),()=>clearTimeout(je)},[E,g,h,Ee,Ce,vt]),wt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function D(){var je;if(ne!=null&&ne.loading){var Je;return wt.createElement("div",{className:ms(le==null?void 0:le.loader,h==null||(Je=h.classNames)==null?void 0:Je.loader,"sonner-loader"),"data-visible":Ee==="loading"},ne.loading)}return wt.createElement(aW,{className:ms(le==null?void 0:le.loader,h==null||(je=h.classNames)==null?void 0:je.loader),visible:Ee==="loading"})}const Be=h.icon||(ne==null?void 0:ne[Ee])||nW(Ee);var st,ge;return wt.createElement("li",{tabIndex:0,ref:Y,className:ms(V,Et,le==null?void 0:le.toast,h==null||(t=h.classNames)==null?void 0:t.toast,le==null?void 0:le.default,le==null?void 0:le[Ee],h==null||(n=h.classNames)==null?void 0:n[Ee]),"data-sonner-toast":"","data-rich-colors":(st=h.richColors)!=null?st:A,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":be,"data-promise":!!h.promise,"data-swiped":qe,"data-removed":fe,"data-visible":De,"data-y-position":de,"data-x-position":Re,"data-index":x,"data-front":_e,"data-swiping":Pe,"data-dismissible":Ze,"data-type":Ee,"data-invert":oe,"data-swipe-out":Ae,"data-swipe-direction":X,"data-expanded":!!(E||ue&&be),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${fe?Ne:pe.current}px`,"--initial-height":ue?"auto":`${Se}px`,...j,...h.style},onDragEnd:()=>{Oe(!1),G(null),H.current=null},onPointerDown:je=>{ft||!Ze||(ie.current=new Date,$(pe.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(Oe(!0),H.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,Je,It;if(Ae||!Ze)return;H.current=null;const me=Number(((je=Y.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),q=Number(((Je=Y.current)==null?void 0:Je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),z=new Date().getTime()-((It=ie.current)==null?void 0:It.getTime()),W=te==="x"?me:q,he=Math.abs(W)/z;if(Math.abs(W)>=xW||he>.11){$(pe.current),h.onDismiss==null||h.onDismiss.call(h,h),ae(te==="x"?me>0?"right":"left":q>0?"down":"up"),vt(),$e(!0);return}else{var Te,Ve;(Te=Y.current)==null||Te.style.setProperty("--swipe-amount-x","0px"),(Ve=Y.current)==null||Ve.style.setProperty("--swipe-amount-y","0px")}Fe(!1),Oe(!1),G(null)},onPointerMove:je=>{var Je,It,me;if(!H.current||!Ze||((Je=window.getSelection())==null?void 0:Je.toString().length)>0)return;const z=je.clientY-H.current.y,W=je.clientX-H.current.x;var he;const Te=(he=e.swipeDirections)!=null?he:EW(Z);!te&&(Math.abs(W)>1||Math.abs(z)>1)&&G(Math.abs(W)>Math.abs(z)?"x":"y");let Ve={x:0,y:0};const gt=Gt=>1/(1.5+Math.abs(Gt)/20);if(te==="y"){if(Te.includes("top")||Te.includes("bottom"))if(Te.includes("top")&&z<0||Te.includes("bottom")&&z>0)Ve.y=z;else{const Gt=z*gt(z);Ve.y=Math.abs(Gt)<Math.abs(z)?Gt:z}}else if(te==="x"&&(Te.includes("left")||Te.includes("right")))if(Te.includes("left")&&W<0||Te.includes("right")&&W>0)Ve.x=W;else{const Gt=W*gt(W);Ve.x=Math.abs(Gt)<Math.abs(W)?Gt:W}(Math.abs(Ve.x)>0||Math.abs(Ve.y)>0)&&Fe(!0),(It=Y.current)==null||It.style.setProperty("--swipe-amount-x",`${Ve.x}px`),(me=Y.current)==null||me.style.setProperty("--swipe-amount-y",`${Ve.y}px`)}},Nt&&!h.jsx&&Ee!=="loading"?wt.createElement("button",{"aria-label":Q,"data-disabled":ft,"data-close-button":!0,onClick:ft||!Ze?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:ms(le==null?void 0:le.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=ne==null?void 0:ne.close)!=null?ge:uW):null,(Ee||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[Ee])!==null||h.icon)?wt.createElement("div",{"data-icon":"",className:ms(le==null?void 0:le.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||D():null,h.type!=="loading"?Be:null):null,wt.createElement("div",{"data-content":"",className:ms(le==null?void 0:le.content,h==null||(i=h.classNames)==null?void 0:i.content)},wt.createElement("div",{"data-title":"",className:ms(le==null?void 0:le.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?wt.createElement("div",{"data-description":"",className:ms(J,at,le==null?void 0:le.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),wt.isValidElement(h.cancel)?h.cancel:h.cancel&&by(h.cancel)?wt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||N,onClick:je=>{by(h.cancel)&&Ze&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,je),vt())},className:ms(le==null?void 0:le.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,wt.isValidElement(h.action)?h.action:h.action&&by(h.action)?wt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||U,onClick:je=>{by(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,je),!je.defaultPrevented&&vt())},className:ms(le==null?void 0:le.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function mR(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function CW(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?vW:bW;function u(c){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):u(s)}),n}const AW=wt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:u,offset:c,mobileOffset:f,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:w=yW,toastOptions:_,dir:x=mR(),gap:S=_W,icons:E,containerAriaLabel:C="Notifications"}=t,[A,O]=wt.useState([]),j=wt.useMemo(()=>Array.from(new Set([a].concat(A.filter(X=>X.position).map(X=>X.position)))),[A,a]),[N,U]=wt.useState([]),[V,J]=wt.useState(!1),[P,Z]=wt.useState(!1),[F,ue]=wt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),le=wt.useRef(null),ne=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=wt.useRef(null),te=wt.useRef(!1),G=wt.useCallback(X=>{O(ae=>{var be;return(be=ae.find(we=>we.id===X.id))!=null&&be.delete||_i.dismiss(X.id),ae.filter(({id:we})=>we!==X.id)})},[]);return wt.useEffect(()=>_i.subscribe(X=>{if(X.dismiss){requestAnimationFrame(()=>{O(ae=>ae.map(be=>be.id===X.id?{...be,delete:!0}:be))});return}setTimeout(()=>{Gj.flushSync(()=>{O(ae=>{const be=ae.findIndex(we=>we.id===X.id);return be!==-1?[...ae.slice(0,be),{...ae[be],...X},...ae.slice(be+1)]:[X,...ae]})})})}),[A]),wt.useEffect(()=>{if(h!=="system"){ue(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:ae})=>{ue(ae?"dark":"light")})}catch{X.addListener(({matches:be})=>{try{ue(be?"dark":"light")}catch(we){console.error(we)}})}},[h]),wt.useEffect(()=>{A.length<=1&&J(!1)},[A]),wt.useEffect(()=>{const X=ae=>{var be;if(i.every(Me=>ae[Me]||ae.code===Me)){var fe;J(!0),(fe=le.current)==null||fe.focus()}ae.code==="Escape"&&(document.activeElement===le.current||(be=le.current)!=null&&be.contains(document.activeElement))&&J(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[i]),wt.useEffect(()=>{if(le.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,te.current=!1)}},[le.current]),wt.createElement("section",{ref:n,"aria-label":`${C} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((X,ae)=>{var be;const[we,fe]=X.split("-");return A.length?wt.createElement("ol",{key:X,dir:x==="auto"?mR():x,tabIndex:-1,ref:le,className:u,"data-sonner-toaster":!0,"data-sonner-theme":F,"data-y-position":we,"data-lifted":V&&A.length>1&&!o,"data-x-position":fe,style:{"--front-toast-height":`${((be=N[0])==null?void 0:be.height)||0}px`,"--width":`${wW}px`,"--gap":`${S}px`,...v,...CW(c,f)},onBlur:Me=>{te.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(te.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||te.current||(te.current=!0,Q.current=Me.relatedTarget)},onMouseEnter:()=>J(!0),onMouseMove:()=>J(!0),onMouseLeave:()=>{P||J(!1)},onDragEnd:()=>J(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},A.filter(Me=>!Me.position&&ae===0||Me.position===X).map((Me,Pe)=>{var Oe,Ae;return wt.createElement(kW,{key:Me.id,icons:E,index:Pe,toast:Me,defaultRichColors:m,duration:(Oe=_==null?void 0:_.duration)!=null?Oe:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:w,closeButton:(Ae=_==null?void 0:_.closeButton)!=null?Ae:s,interacting:P,position:X,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:G,toasts:A.filter($e=>$e.position==Me.position),heights:N.filter($e=>$e.position==Me.position),setHeights:U,expandByDefault:o,gap:S,expanded:V,swipeDirections:t.swipeDirections})})):null}))}),qp=new Map,TW=5*60*1e3;async function RW(e,t){const n=`${e.id}-${e.baseURL||""}`,r=qp.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,u,c;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":{if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break}case"openrouter":{if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break}case"ollama":{const f=((u=e.baseURL)==null?void 0:u.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",f).toString(),delete o.Authorization;break}case"openai-compatible":{if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const f=Vj(e.baseURL);i=new URL("models",f.endsWith("/")?f:f+"/").toString();break}case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(f){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,f),ct.error(`Invalid Base URL for ${e.name}: ${f instanceof Error?f.message:String(f)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const f=await fetch(i,{headers:o});if(!f.ok){let g=`(${f.status} ${f.statusText})`;try{const v=await f.text();try{const w=JSON.parse(v);g=((c=w==null?void 0:w.error)==null?void 0:c.message)||(w==null?void 0:w.message)||v||g}catch{g=v||g}}catch(v){console.warn("[ModelFetcher] Failed to read error response body:",v)}throw new Error(`API Error: ${g}`)}const h=await f.json();let m=[];if(e.type==="ollama")h.models&&Array.isArray(h.models)?m=h.models.map(g=>({id:g.name,name:g.name,metadata:g.details??{}})):console.warn(`[ModelFetcher] Unexpected response structure from Ollama for ${e.name}:`,h);else if(e.type==="openrouter"){const g=h.data||h;Array.isArray(g)?m=g.map(v=>{const{id:w,name:_,...x}=v;return{id:w,name:_||w,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}else{const g=h.data||h;Array.isArray(g)?m=g.map(v=>{const{id:w,name:_,...x}=v;return{id:w,name:_||w,metadata:x}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}return m.sort((g,v)=>(g.name||g.id).localeCompare(v.name||v.id)),console.log(`[ModelFetcher] Fetched ${m.length} models for ${e.name}`),m}catch(f){const h=f instanceof Error?f.message:String(f);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),ct.error(`Failed to fetch models for ${e.name}: ${h}`),qp.delete(n),[]}})();return qp.set(n,a),setTimeout(()=>{qp.get(n)===a&&(qp.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},TW),a}const X_="provider:lastModelSelection",gR="provider:globalModelSortOrder",fi=Go(Wo((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Ht.saveSetting("enableApiKeyManagement",n)},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Ht.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Ht.loadProviderConfigs(),Ht.loadApiKeys(),Ht.loadSetting(gR,[]),Ht.loadSetting(X_,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{m.push(Af(g.id,v))}),m),[]),u=new Set(s),c=i.filter(m=>u.has(m));let f=o;f&&u.has(f)||(f=c[0]??null,f||(f=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${f}`)),e({globalModelSortOrder:c,selectedModelId:f,isLoading:!1}),await Ht.saveSetting(X_,f)}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),ct.error("Failed to load provider data")}},selectModel:n=>{e({selectedModelId:n}),Ht.saveSetting(X_,n)},addApiKey:async(n,r,a)=>{const i=$o(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Ht.saveApiKey(s),e(u=>{u.dbApiKeys.push(s)}),ct.success(`API Key "${n}" added.`),i}catch(u){throw console.error("ProviderStore: Error adding API key",u),ct.error(`Failed to add API Key: ${u instanceof Error?u.message:String(u)}`),u}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Ht.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),ct.success(`API Key "${r}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting API key",i),ct.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=$o(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Ht.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),ct.success(`Provider "${n.name}" added.`),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),ct.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Ht.saveProviderConfig(i),e(m=>{const g=m.dbProviderConfigs.findIndex(v=>v.id===n);g!==-1&&(m.dbProviderConfigs[g]=i)});const o=t().globalModelSortOrder,s=t().dbProviderConfigs;let u=[...o],c=!1;const f=s.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{m.push(Af(g.id,v))}),m),[]),h=new Set(f);u=o.filter(m=>h.has(m)),h.forEach(m=>{u.includes(m)||u.push(m)}),c=!0,(JSON.stringify(u)!==JSON.stringify(o)||c)&&await t().setGlobalModelSortOrder(u)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),ct.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Ht.deleteProviderConfig(n),e(f=>{f.dbProviderConfigs=f.dbProviderConfigs.filter(h=>h.id!==n)});const o=t().dbProviderConfigs.reduce((f,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(m=>{f.push(Af(h.id,m))}),f),[]),s=new Set(o),c=t().globalModelSortOrder.filter(f=>s.has(f));await t().setGlobalModelSortOrder(c),ct.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),ct.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){ct.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(u=>u.id===i))==null?void 0:a.value,s=await RW(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),ct.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Ht.saveSetting(gR,r);const a=t().selectedModelId,o=t().dbProviderConfigs.reduce((u,c)=>(c.isEnabled&&c.enabledModels&&c.enabledModels.forEach(f=>{u.push(Af(c.id,f))}),u),[]),s=new Set(o);if(a&&!s.has(a)){const u=r.find(c=>s.has(c))??o.find(c=>r.includes(c))??o[0]??null;console.log(`[ProviderStore] Selection ${a} invalidated by order change. Selecting ${u}`),t().selectModel(u)}else if(!a&&r.length>0){const u=r.find(c=>s.has(c))??o[0]??null;console.log(`[ProviderStore] No selection, selecting first from new order: ${u}`),t().selectModel(u)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=d0(n);if(!i||!o)return;const s=r.find(c=>c.id===i);if(!s)return;const u=a.find(c=>c.id===s.apiKeyId);return eW(s,o,u==null?void 0:u.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=n.type,a=[...n.fetchedModels??(g2[r]||[])];return{id:n.id,name:n.name,type:n.type,allAvailableModels:a}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return[];const a=r.type;return[...r.fetchedModels??(g2[a]||[])].map(i=>({...i}))}}))),vy="system",yR="You are a helpful AI assistant.",bR=.7,vR=null,wR=null,_R=null,xR=0,SR=0,ER=!0,wy=!0,_y=30,xy=10,kR=null,CR=null,AR=5,Sy=null,zr=Go(Wo(e=>({theme:vy,globalSystemPrompt:yR,temperature:bR,maxTokens:vR,topP:wR,topK:_R,presencePenalty:xR,frequencyPenalty:SR,enableAdvancedSettings:ER,enableStreamingMarkdown:wy,streamingRenderFPS:_y,streamingCodeRenderFPS:xy,gitUserName:kR,gitUserEmail:CR,toolMaxSteps:AR,prismThemeUrl:Sy,setTheme:t=>{e({theme:t}),Ht.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Ht.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Ht.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Ht.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Ht.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Ht.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Ht.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Ht.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Ht.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Ht.saveSetting("enableStreamingMarkdown",t)},setStreamingRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingRenderFPS:n}),Ht.saveSetting("streamingRenderFPS",n)},setStreamingCodeRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingCodeRenderFPS:n}),Ht.saveSetting("streamingCodeRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Ht.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Ht.saveSetting("gitUserEmail",n)},setToolMaxSteps:t=>{const n=Math.max(1,Math.min(20,t));e({toolMaxSteps:n}),Ht.saveSetting("toolMaxSteps",n)},setPrismThemeUrl:t=>{const n=(t==null?void 0:t.trim())||null;e({prismThemeUrl:n}),Ht.saveSetting("prismThemeUrl",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,u,c,f,h,m,g,v,w,_]=await Promise.all([Ht.loadSetting("theme",vy),Ht.loadSetting("temperature",bR),Ht.loadSetting("maxTokens",vR),Ht.loadSetting("topP",wR),Ht.loadSetting("topK",_R),Ht.loadSetting("presencePenalty",xR),Ht.loadSetting("frequencyPenalty",SR),Ht.loadSetting("globalSystemPrompt",yR),Ht.loadSetting("enableAdvancedSettings",ER),Ht.loadSetting("enableStreamingMarkdown",wy),Ht.loadSetting("streamingRenderFPS",_y),Ht.loadSetting("streamingCodeRenderFPS",xy),Ht.loadSetting("gitUserName",kR),Ht.loadSetting("gitUserEmail",CR),Ht.loadSetting("toolMaxSteps",AR),Ht.loadSetting("prismThemeUrl",Sy)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:u,enableAdvancedSettings:c,enableStreamingMarkdown:f,streamingRenderFPS:h,streamingCodeRenderFPS:m,gitUserName:g,gitUserEmail:v,toolMaxSteps:w,prismThemeUrl:_})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:vy,enableStreamingMarkdown:wy,streamingRenderFPS:_y,streamingCodeRenderFPS:xy,prismThemeUrl:Sy}),await Promise.all([Ht.saveSetting("theme",vy),Ht.saveSetting("enableStreamingMarkdown",wy),Ht.saveSetting("streamingRenderFPS",_y),Ht.saveSetting("streamingCodeRenderFPS",xy),Ht.saveSetting("prismThemeUrl",Sy)]),ct.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),ct.error("Failed to reset general settings.")}}})));async function b2(e,t){const n=Qr.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}function NW(){const e=er.getState(),t=fi.getState(),n=zr.getState(),{providerId:r}=d0(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function IW(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}const OW=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1",".gitignore",".env",".log",".csv",".tsv",".ini",".cfg",".conf"],Wj=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"?!0:OW.some(r=>n.endsWith(r))};function TR(e){try{const t=e.type||"application/octet-stream",n=Wj(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:IW(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),ct.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function RR(e){return e.flatMap(t=>{var r,a,i,o,s,u;const n=[];if((r=t.prompt)!=null&&r.content&&typeof t.prompt.content=="string"?n.push({role:"user",content:t.prompt.content}):(i=(a=t.prompt)==null?void 0:a.metadata)!=null&&i.attachedFiles&&t.prompt.metadata.attachedFiles.length>0&&((o=t.prompt)!=null&&o.content),t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(s=t.metadata)!=null&&s.toolCalls&&Array.isArray(t.metadata.toolCalls)){const c=[];t.metadata.toolCalls.forEach(f=>{try{const h=JSON.parse(f);h&&h.type==="tool-call"&&h.toolCallId&&h.toolName&&h.args!==void 0?c.push(h):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",f)}catch(h){console.error("[AIService] buildHistory: Failed to parse tool call string:",f,h)}}),c.length>0&&n.push({role:"assistant",content:c})}if((u=t.metadata)!=null&&u.toolResults&&Array.isArray(t.metadata.toolResults)){const c=[];t.metadata.toolResults.forEach(f=>{try{const h=JSON.parse(f);h&&h.type==="tool-result"&&h.toolCallId&&h.toolName&&h.result!==void 0?c.push(h):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",f)}catch(h){console.error("[AIService] buildHistory: Failed to parse tool result string:",f,h)}}),c.length>0&&n.push({role:"tool",content:c})}return n})}const NR=e=>Symbol.iterator in e,IR=e=>"entries"in e,OR=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},jW=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function DW(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!NR(e)||!NR(t)?OR({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):IR(e)&&IR(t)?OR(e,t):jW(e,t)}function In(e){const t=wt.useRef(void 0);return n=>{const r=e(n);return DW(t.current,r)?t.current:t.current=r}}const MW=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message..."})=>{var x;const a=B.useRef(null),[i,o]=B.useState(!1),s=Qr(In(S=>S.promptControls)),u=er(In(S=>S.status==="streaming")),{focusInputOnNextRender:c,setFocusInputFlag:f}=Ka(In(S=>({focusInputOnNextRender:S.focusInputOnNextRender,setFocusInputFlag:S.setFocusInputFlag}))),{attachedFilesMetadata:h,clearAttachedFiles:m}=lm(In(S=>({attachedFilesMetadata:S.attachedFilesMetadata,clearAttachedFiles:S.clearAttachedFiles})));B.useEffect(()=>{c&&a.current&&(a.current.focus(),f(!1))},[c,f]);const g=B.useMemo(()=>Object.values(s).filter(S=>S.show?S.show():!0).sort((S,E)=>(S.order??1/0)-(E.order??1/0)),[s]),v=B.useMemo(()=>g.filter(S=>S.renderer),[g]),w=B.useMemo(()=>g.filter(S=>S.triggerRenderer),[g]),_=B.useCallback(async()=>{var C;const E=(((C=a.current)==null?void 0:C.getValue())??"").trim();if(!(!E&&h.length===0)&&!(u||i)){o(!0);try{let A={},O={};for(const V of g){if(V.getParameters){const J=await V.getParameters();J&&(A={...A,...J})}if(V.getMetadata){const J=await V.getMetadata();J&&(O={...O,...J})}}h.length>0&&(O.attachedFiles=[...h]);let j={id:$o(),content:E,parameters:A,metadata:O};Ei.emit("prompt:submitted",{turnData:j});const N=await b2("middleware:prompt:turnFinalize",{turnData:j});if(N===!1){console.log("Prompt submission cancelled by middleware."),o(!1);return}const U=N&&typeof N=="object"?N.turnData:j;await t(U),m(),g.forEach(V=>{V.clearOnSubmit&&V.clearOnSubmit()}),f(!0)}catch(A){console.error("Error during prompt submission:",A),ct.error(`Failed to send message: ${A instanceof Error?A.message:String(A)}`)}finally{o(!1)}}},[u,i,g,t,h,m,f]);return y.jsxs("div",{className:Ut("p-4 space-y-3",n),children:[v.length>0&&y.jsx(M3,{controls:v,area:"panel",className:"flex flex-wrap gap-2 items-start mb-2"}),y.jsx(e,{ref:a,onSubmit:_,disabled:u||i,placeholder:r}),y.jsxs("div",{className:"flex items-center justify-between gap-2 mt-2",children:[y.jsx(M3,{controls:w,area:"trigger",className:"flex items-center gap-1 flex-shrink-0"}),y.jsx("div",{className:"flex-grow"}),y.jsx(Lt,{type:"button",size:"icon",onClick:_,disabled:u||i||(((x=a.current)==null?void 0:x.getValue())??"").trim().length===0&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(e7,{className:"h-4 w-4"})})]})]})};function zt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function PW(e,t){const n=B.createContext(t),r=i=>{const{children:o,...s}=i,u=B.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function a(i){const o=B.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Ri(e,t=[]){let n=[];function r(i,o){const s=B.createContext(o),u=n.length;n=[...n,o];const c=h=>{var x;const{scope:m,children:g,...v}=h,w=((x=m==null?void 0:m[e])==null?void 0:x[u])||s,_=B.useMemo(()=>v,Object.values(v));return y.jsx(w.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,m){var w;const g=((w=m==null?void 0:m[e])==null?void 0:w[u])||s,v=B.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const a=()=>{const i=n.map(o=>B.createContext(o));return function(s){const u=(s==null?void 0:s[e])||i;return B.useMemo(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return a.scopeName=e,[r,FW(a,...t)]}function FW(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...s,...h}},{});return B.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var LW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],an=LW.reduce((e,t)=>{const n=Iu(`Primitive.${t}`),r=B.forwardRef((a,i)=>{const{asChild:o,...s}=a,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Kj(e,t){e&&f0.flushSync(()=>e.dispatchEvent(t))}function Ea(e){const t=B.useRef(e);return B.useEffect(()=>{t.current=e}),B.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function $W(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e);B.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var BW="DismissableLayer",v2="dismissableLayer.update",zW="dismissableLayer.pointerDownOutside",UW="dismissableLayer.focusOutside",jR,Zj=B.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ph=B.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...u}=e,c=B.useContext(Zj),[f,h]=B.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=B.useState({}),v=xn(t,j=>h(j)),w=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=w.indexOf(_),S=f?w.indexOf(f):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,A=VW(j=>{const N=j.target,U=[...c.branches].some(V=>V.contains(N));!C||U||(a==null||a(j),o==null||o(j),j.defaultPrevented||s==null||s())},m),O=GW(j=>{const N=j.target;[...c.branches].some(V=>V.contains(N))||(i==null||i(j),o==null||o(j),j.defaultPrevented||s==null||s())},m);return $W(j=>{S===c.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&s&&(j.preventDefault(),s()))},m),B.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(jR=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),DR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=jR)}},[f,m,n,c]),B.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),DR())},[f,c]),B.useEffect(()=>{const j=()=>g({});return document.addEventListener(v2,j),()=>document.removeEventListener(v2,j)},[]),y.jsx(an.div,{...u,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:zt(e.onFocusCapture,O.onFocusCapture),onBlurCapture:zt(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:zt(e.onPointerDownCapture,A.onPointerDownCapture)})});ph.displayName=BW;var qW="DismissableLayerBranch",HW=B.forwardRef((e,t)=>{const n=B.useContext(Zj),r=B.useRef(null),a=xn(t,r);return B.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(an.div,{...e,ref:a})});HW.displayName=qW;function VW(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e),r=B.useRef(!1),a=B.useRef(()=>{});return B.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let u=function(){Yj(zW,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function GW(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e),r=B.useRef(!1);return B.useEffect(()=>{const a=i=>{i.target&&!r.current&&Yj(UW,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function DR(){const e=new CustomEvent(v2);document.dispatchEvent(e)}function Yj(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?Kj(a,i):a.dispatchEvent(i)}var Fa=globalThis!=null&&globalThis.document?B.useLayoutEffect:()=>{},WW=Z4[" useId ".trim().toString()]||(()=>{}),KW=0;function Ts(e){const[t,n]=B.useState(WW());return Fa(()=>{n(r=>r??String(KW++))},[e]),t?`radix-${t}`:""}const ZW=["top","right","bottom","left"],Bu=Math.min,qi=Math.max,Ib=Math.round,Ey=Math.floor,Rs=e=>({x:e,y:e}),YW={left:"right",right:"left",bottom:"top",top:"bottom"},XW={start:"end",end:"start"};function w2(e,t,n){return qi(e,Bu(t,n))}function Tl(e,t){return typeof e=="function"?e(t):e}function Rl(e){return e.split("-")[0]}function mh(e){return e.split("-")[1]}function TE(e){return e==="x"?"y":"x"}function RE(e){return e==="y"?"height":"width"}function zu(e){return["top","bottom"].includes(Rl(e))?"y":"x"}function NE(e){return TE(zu(e))}function JW(e,t,n){n===void 0&&(n=!1);const r=mh(e),a=NE(e),i=RE(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ob(o)),[o,Ob(o)]}function QW(e){const t=Ob(e);return[_2(e),t,_2(t)]}function _2(e){return e.replace(/start|end/g,t=>XW[t])}function eK(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function tK(e,t,n,r){const a=mh(e);let i=eK(Rl(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(_2)))),i}function Ob(e){return e.replace(/left|right|bottom|top/g,t=>YW[t])}function nK(e){return{top:0,right:0,bottom:0,left:0,...e}}function Xj(e){return typeof e!="number"?nK(e):{top:e,right:e,bottom:e,left:e}}function jb(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function MR(e,t,n){let{reference:r,floating:a}=e;const i=zu(t),o=NE(t),s=RE(o),u=Rl(t),c=i==="y",f=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[s]/2-a[s]/2;let g;switch(u){case"top":g={x:f,y:r.y-a.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(mh(t)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const rK=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=MR(c,r,u),m=r,g={},v=0;for(let w=0;w<s.length;w++){const{name:_,fn:x}=s[w],{x:S,y:E,data:C,reset:A}=await x({x:f,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});f=S??f,h=E??h,g={...g,[_]:{...g[_],...C}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):A.rects),{x:f,y:h}=MR(c,m,u)),w=-1)}return{x:f,y:h,placement:m,strategy:a,middlewareData:g}};async function xm(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Tl(t,e),v=Xj(g),_=s[m?h==="floating"?"reference":"floating":h],x=jb(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:u})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},A=jb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:u}):S);return{top:(x.top-A.top+v.top)/C.y,bottom:(A.bottom-x.bottom+v.bottom)/C.y,left:(x.left-A.left+v.left)/C.x,right:(A.right-x.right+v.right)/C.x}}const aK=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:u}=t,{element:c,padding:f=0}=Tl(e,t)||{};if(c==null)return{};const h=Xj(f),m={x:n,y:r},g=NE(a),v=RE(g),w=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-m[g]-i.floating[v],A=m[g]-i.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let j=O?O[E]:0;(!j||!await(o.isElement==null?void 0:o.isElement(O)))&&(j=s.floating[E]||i.floating[v]);const N=C/2-A/2,U=j/2-w[v]/2-1,V=Bu(h[x],U),J=Bu(h[S],U),P=V,Z=j-w[v]-J,F=j/2-w[v]/2+N,ue=w2(P,F,Z),le=!u.arrow&&mh(a)!=null&&F!==ue&&i.reference[v]/2-(F<P?V:J)-w[v]/2<0,ne=le?F<P?F-P:F-Z:0;return{[g]:m[g]+ne,data:{[g]:ue,centerOffset:F-ue-ne,...le&&{alignmentOffset:ne}},reset:le}}}),iK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:u,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:w=!0,..._}=Tl(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Rl(a),S=zu(s),E=Rl(s)===s,C=await(u.isRTL==null?void 0:u.isRTL(c.floating)),A=m||(E||!w?[Ob(s)]:QW(s)),O=v!=="none";!m&&O&&A.push(...tK(s,w,v,C));const j=[s,...A],N=await xm(t,_),U=[];let V=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&U.push(N[x]),h){const F=JW(a,o,C);U.push(N[F[0]],N[F[1]])}if(V=[...V,{placement:a,overflows:U}],!U.every(F=>F<=0)){var J,P;const F=(((J=i.flip)==null?void 0:J.index)||0)+1,ue=j[F];if(ue)return{data:{index:F,overflows:V},reset:{placement:ue}};let le=(P=V.filter(ne=>ne.overflows[0]<=0).sort((ne,Q)=>ne.overflows[1]-Q.overflows[1])[0])==null?void 0:P.placement;if(!le)switch(g){case"bestFit":{var Z;const ne=(Z=V.filter(Q=>{if(O){const te=zu(Q.placement);return te===S||te==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(te=>te>0).reduce((te,G)=>te+G,0)]).sort((Q,te)=>Q[1]-te[1])[0])==null?void 0:Z[0];ne&&(le=ne);break}case"initialPlacement":le=s;break}if(a!==le)return{reset:{placement:le}}}return{}}}};function PR(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function FR(e){return ZW.some(t=>e[t]>=0)}const oK=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Tl(e,t);switch(r){case"referenceHidden":{const i=await xm(t,{...a,elementContext:"reference"}),o=PR(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:FR(o)}}}case"escaped":{const i=await xm(t,{...a,altBoundary:!0}),o=PR(i,n.floating);return{data:{escapedOffsets:o,escaped:FR(o)}}}default:return{}}}}};async function sK(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Rl(n),s=mh(n),u=zu(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&u?-1:1,h=Tl(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof v=="number"&&(g=s==="end"?v*-1:v),u?{x:g*f,y:m*c}:{x:m*c,y:g*f}}const lK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,u=await sK(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},uK=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...u}=Tl(e,t),c={x:n,y:r},f=await xm(t,u),h=zu(Rl(a)),m=TE(h);let g=c[m],v=c[h];if(i){const _=m==="y"?"top":"left",x=m==="y"?"bottom":"right",S=g+f[_],E=g-f[x];g=w2(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=v+f[_],E=v-f[x];v=w2(S,v,E)}const w=s.fn({...t,[m]:g,[h]:v});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[m]:i,[h]:o}}}}}},cK=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:u=!0,crossAxis:c=!0}=Tl(e,t),f={x:n,y:r},h=zu(a),m=TE(h);let g=f[m],v=f[h];const w=Tl(s,t),_=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(u){const E=m==="y"?"height":"width",C=i.reference[m]-i.floating[E]+_.mainAxis,A=i.reference[m]+i.reference[E]-_.mainAxis;g<C?g=C:g>A&&(g=A)}if(c){var x,S;const E=m==="y"?"width":"height",C=["top","left"].includes(Rl(a)),A=i.reference[h]-i.floating[E]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:_.crossAxis),O=i.reference[h]+i.reference[E]+(C?0:((S=o.offset)==null?void 0:S[h])||0)-(C?_.crossAxis:0);v<A?v=A:v>O&&(v=O)}return{[m]:g,[h]:v}}}},dK=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:u=()=>{},...c}=Tl(e,t),f=await xm(t,c),h=Rl(a),m=mh(a),g=zu(a)==="y",{width:v,height:w}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=m===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=m==="end"?"top":"bottom");const S=w-f.top-f.bottom,E=v-f.left-f.right,C=Bu(w-f[_],S),A=Bu(v-f[x],E),O=!t.middlewareData.shift;let j=C,N=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(j=S),O&&!m){const V=qi(f.left,0),J=qi(f.right,0),P=qi(f.top,0),Z=qi(f.bottom,0);g?N=v-2*(V!==0||J!==0?V+J:qi(f.left,f.right)):j=w-2*(P!==0||Z!==0?P+Z:qi(f.top,f.bottom))}await u({...t,availableWidth:N,availableHeight:j});const U=await o.getDimensions(s.floating);return v!==U.width||w!==U.height?{reset:{rects:!0}}:{}}}};function Nv(){return typeof window<"u"}function gh(e){return Jj(e)?(e.nodeName||"").toLowerCase():"#document"}function Vi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ps(e){var t;return(t=(Jj(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Jj(e){return Nv()?e instanceof Node||e instanceof Vi(e).Node:!1}function Uo(e){return Nv()?e instanceof Element||e instanceof Vi(e).Element:!1}function js(e){return Nv()?e instanceof HTMLElement||e instanceof Vi(e).HTMLElement:!1}function LR(e){return!Nv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Vi(e).ShadowRoot}function h0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=qo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function fK(e){return["table","td","th"].includes(gh(e))}function Iv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function IE(e){const t=OE(),n=Uo(e)?qo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function hK(e){let t=Uu(e);for(;js(t)&&!Wf(t);){if(IE(t))return t;if(Iv(t))return null;t=Uu(t)}return null}function OE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Wf(e){return["html","body","#document"].includes(gh(e))}function qo(e){return Vi(e).getComputedStyle(e)}function Ov(e){return Uo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Uu(e){if(gh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||LR(e)&&e.host||Ps(e);return LR(t)?t.host:t}function Qj(e){const t=Uu(e);return Wf(t)?e.ownerDocument?e.ownerDocument.body:e.body:js(t)&&h0(t)?t:Qj(t)}function Sm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=Qj(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Vi(a);if(i){const s=x2(o);return t.concat(o,o.visualViewport||[],h0(a)?a:[],s&&n?Sm(s):[])}return t.concat(a,Sm(a,[],n))}function x2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eD(e){const t=qo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=js(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Ib(n)!==i||Ib(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function jE(e){return Uo(e)?e:e.contextElement}function Df(e){const t=jE(e);if(!js(t))return Rs(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=eD(t);let o=(i?Ib(n.width):n.width)/r,s=(i?Ib(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const pK=Rs(0);function tD(e){const t=Vi(e);return!OE()||!t.visualViewport?pK:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mK(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Vi(e)?!1:t}function ed(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=jE(e);let o=Rs(1);t&&(r?Uo(r)&&(o=Df(r)):o=Df(e));const s=mK(i,n,r)?tD(i):Rs(0);let u=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,f=a.width/o.x,h=a.height/o.y;if(i){const m=Vi(i),g=r&&Uo(r)?Vi(r):r;let v=m,w=x2(v);for(;w&&r&&g!==v;){const _=Df(w),x=w.getBoundingClientRect(),S=qo(w),E=x.left+(w.clientLeft+parseFloat(S.paddingLeft))*_.x,C=x.top+(w.clientTop+parseFloat(S.paddingTop))*_.y;u*=_.x,c*=_.y,f*=_.x,h*=_.y,u+=E,c+=C,v=Vi(w),w=x2(v)}}return jb({width:f,height:h,x:u,y:c})}function DE(e,t){const n=Ov(e).scrollLeft;return t?t.left+n:ed(Ps(e)).left+n}function nD(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:DE(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function gK(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Ps(r),s=t?Iv(t.floating):!1;if(r===o||s&&i)return n;let u={scrollLeft:0,scrollTop:0},c=Rs(1);const f=Rs(0),h=js(r);if((h||!h&&!i)&&((gh(r)!=="body"||h0(o))&&(u=Ov(r)),js(r))){const g=ed(r);c=Df(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const m=o&&!h&&!i?nD(o,u,!0):Rs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+f.x+m.x,y:n.y*c.y-u.scrollTop*c.y+f.y+m.y}}function yK(e){return Array.from(e.getClientRects())}function bK(e){const t=Ps(e),n=Ov(e),r=e.ownerDocument.body,a=qi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=qi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+DE(e);const s=-n.scrollTop;return qo(r).direction==="rtl"&&(o+=qi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function vK(e,t){const n=Vi(e),r=Ps(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;const c=OE();(!c||c&&t==="fixed")&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s,y:u}}function wK(e,t){const n=ed(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=js(e)?Df(e):Rs(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,u=a*i.x,c=r*i.y;return{width:o,height:s,x:u,y:c}}function $R(e,t,n){let r;if(t==="viewport")r=vK(e,n);else if(t==="document")r=bK(Ps(e));else if(Uo(t))r=wK(t,n);else{const a=tD(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return jb(r)}function rD(e,t){const n=Uu(e);return n===t||!Uo(n)||Wf(n)?!1:qo(n).position==="fixed"||rD(n,t)}function _K(e,t){const n=t.get(e);if(n)return n;let r=Sm(e,[],!1).filter(s=>Uo(s)&&gh(s)!=="body"),a=null;const i=qo(e).position==="fixed";let o=i?Uu(e):e;for(;Uo(o)&&!Wf(o);){const s=qo(o),u=IE(o);!u&&s.position==="fixed"&&(a=null),(i?!u&&!a:!u&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||h0(o)&&!u&&rD(e,o))?r=r.filter(f=>f!==o):a=s,o=Uu(o)}return t.set(e,r),r}function xK(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Iv(t)?[]:_K(t,this._c):[].concat(n),r],s=o[0],u=o.reduce((c,f)=>{const h=$R(t,f,a);return c.top=qi(h.top,c.top),c.right=Bu(h.right,c.right),c.bottom=Bu(h.bottom,c.bottom),c.left=qi(h.left,c.left),c},$R(t,s,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function SK(e){const{width:t,height:n}=eD(e);return{width:t,height:n}}function EK(e,t,n){const r=js(t),a=Ps(t),i=n==="fixed",o=ed(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=Rs(0);if(r||!r&&!i)if((gh(t)!=="body"||h0(a))&&(s=Ov(t)),r){const m=ed(t,!0,i,t);u.x=m.x+t.clientLeft,u.y=m.y+t.clientTop}else a&&(u.x=DE(a));const c=a&&!r&&!i?nD(a,s):Rs(0),f=o.left+s.scrollLeft-u.x-c.x,h=o.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function J_(e){return qo(e).position==="static"}function BR(e,t){if(!js(e)||qo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ps(e)===n&&(n=n.ownerDocument.body),n}function aD(e,t){const n=Vi(e);if(Iv(e))return n;if(!js(e)){let a=Uu(e);for(;a&&!Wf(a);){if(Uo(a)&&!J_(a))return a;a=Uu(a)}return n}let r=BR(e,t);for(;r&&fK(r)&&J_(r);)r=BR(r,t);return r&&Wf(r)&&J_(r)&&!IE(r)?n:r||hK(e)||n}const kK=async function(e){const t=this.getOffsetParent||aD,n=this.getDimensions,r=await n(e.floating);return{reference:EK(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function CK(e){return qo(e).direction==="rtl"}const AK={convertOffsetParentRelativeRectToViewportRelativeRect:gK,getDocumentElement:Ps,getClippingRect:xK,getOffsetParent:aD,getElementRects:kK,getClientRects:yK,getDimensions:SK,getScale:Df,isElement:Uo,isRTL:CK};function iD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function TK(e,t){let n=null,r;const a=Ps(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=c;if(s||t(),!m||!g)return;const v=Ey(h),w=Ey(a.clientWidth-(f+m)),_=Ey(a.clientHeight-(h+g)),x=Ey(f),E={rootMargin:-v+"px "+-w+"px "+-_+"px "+-x+"px",threshold:qi(0,Bu(1,u))||1};let C=!0;function A(O){const j=O[0].intersectionRatio;if(j!==u){if(!C)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!iD(c,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(A,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(A,E)}n.observe(e)}return o(!0),i}function RK(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=jE(e),f=a||i?[...c?Sm(c):[],...Sm(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&s?TK(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!u&&g.observe(c),g.observe(t));let v,w=u?ed(e):null;u&&_();function _(){const x=ed(e);w&&!iD(w,x)&&n(),w=x,v=requestAnimationFrame(_)}return n(),()=>{var x;f.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,u&&cancelAnimationFrame(v)}}const NK=lK,IK=uK,OK=iK,jK=dK,DK=oK,zR=aK,MK=cK,PK=(e,t,n)=>{const r=new Map,a={platform:AK,...n},i={...a.platform,_c:r};return rK(e,t,{...a,platform:i})};var Xy=typeof document<"u"?B.useLayoutEffect:B.useEffect;function Db(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Db(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Db(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function oD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function UR(e,t){const n=oD(e);return Math.round(t*n)/n}function Q_(e){const t=B.useRef(e);return Xy(()=>{t.current=e}),t}function FK(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:u,open:c}=e,[f,h]=B.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=B.useState(r);Db(m,r)||g(r);const[v,w]=B.useState(null),[_,x]=B.useState(null),S=B.useCallback(Q=>{Q!==O.current&&(O.current=Q,w(Q))},[]),E=B.useCallback(Q=>{Q!==j.current&&(j.current=Q,x(Q))},[]),C=i||v,A=o||_,O=B.useRef(null),j=B.useRef(null),N=B.useRef(f),U=u!=null,V=Q_(u),J=Q_(a),P=Q_(c),Z=B.useCallback(()=>{if(!O.current||!j.current)return;const Q={placement:t,strategy:n,middleware:m};J.current&&(Q.platform=J.current),PK(O.current,j.current,Q).then(te=>{const G={...te,isPositioned:P.current!==!1};F.current&&!Db(N.current,G)&&(N.current=G,f0.flushSync(()=>{h(G)}))})},[m,t,n,J,P]);Xy(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(Q=>({...Q,isPositioned:!1})))},[c]);const F=B.useRef(!1);Xy(()=>(F.current=!0,()=>{F.current=!1}),[]),Xy(()=>{if(C&&(O.current=C),A&&(j.current=A),C&&A){if(V.current)return V.current(C,A,Z);Z()}},[C,A,Z,V,U]);const ue=B.useMemo(()=>({reference:O,floating:j,setReference:S,setFloating:E}),[S,E]),le=B.useMemo(()=>({reference:C,floating:A}),[C,A]),ne=B.useMemo(()=>{const Q={position:n,left:0,top:0};if(!le.floating)return Q;const te=UR(le.floating,f.x),G=UR(le.floating,f.y);return s?{...Q,transform:"translate("+te+"px, "+G+"px)",...oD(le.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:G}},[n,s,le.floating,f.x,f.y]);return B.useMemo(()=>({...f,update:Z,refs:ue,elements:le,floatingStyles:ne}),[f,Z,ue,le,ne])}const LK=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?zR({element:r.current,padding:a}).fn(n):{}:r?zR({element:r,padding:a}).fn(n):{}}}},$K=(e,t)=>({...NK(e),options:[e,t]}),BK=(e,t)=>({...IK(e),options:[e,t]}),zK=(e,t)=>({...MK(e),options:[e,t]}),UK=(e,t)=>({...OK(e),options:[e,t]}),qK=(e,t)=>({...jK(e),options:[e,t]}),HK=(e,t)=>({...DK(e),options:[e,t]}),VK=(e,t)=>({...LK(e),options:[e,t]});var GK="Arrow",sD=B.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(an.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});sD.displayName=GK;var WK=sD;function jv(e){const[t,n]=B.useState(void 0);return Fa(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var ME="Popper",[lD,Xu]=Ri(ME),[KK,uD]=lD(ME),cD=e=>{const{__scopePopper:t,children:n}=e,[r,a]=B.useState(null);return y.jsx(KK,{scope:t,anchor:r,onAnchorChange:a,children:n})};cD.displayName=ME;var dD="PopperAnchor",fD=B.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=uD(dD,n),o=B.useRef(null),s=xn(t,o);return B.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(an.div,{...a,ref:s})});fD.displayName=dD;var PE="PopperContent",[ZK,YK]=lD(PE),hD=B.forwardRef((e,t)=>{var Pe,Oe,Ae,$e,qe,Fe;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...w}=e,_=uD(PE,n),[x,S]=B.useState(null),E=xn(t,Ne=>S(Ne)),[C,A]=B.useState(null),O=jv(C),j=(O==null?void 0:O.width)??0,N=(O==null?void 0:O.height)??0,U=r+(i!=="center"?"-"+i:""),V=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},J=Array.isArray(c)?c:[c],P=J.length>0,Z={padding:V,boundary:J.filter(JK),altBoundary:P},{refs:F,floatingStyles:ue,placement:le,isPositioned:ne,middlewareData:Q}=FK({strategy:"fixed",placement:U,whileElementsMounted:(...Ne)=>RK(...Ne,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[$K({mainAxis:a+N,alignmentAxis:o}),u&&BK({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?zK():void 0,...Z}),u&&UK({...Z}),qK({...Z,apply:({elements:Ne,rects:$,availableWidth:Se,availableHeight:ke})=>{const{width:ce,height:ie}=$.reference,Y=Ne.floating.style;Y.setProperty("--radix-popper-available-width",`${Se}px`),Y.setProperty("--radix-popper-available-height",`${ke}px`),Y.setProperty("--radix-popper-anchor-width",`${ce}px`),Y.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),C&&VK({element:C,padding:s}),QK({arrowWidth:j,arrowHeight:N}),m&&HK({strategy:"referenceHidden",...Z})]}),[te,G]=gD(le),X=Ea(v);Fa(()=>{ne&&(X==null||X())},[ne,X]);const ae=(Pe=Q.arrow)==null?void 0:Pe.x,be=(Oe=Q.arrow)==null?void 0:Oe.y,we=((Ae=Q.arrow)==null?void 0:Ae.centerOffset)!==0,[fe,Me]=B.useState();return Fa(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ne?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:fe,"--radix-popper-transform-origin":[($e=Q.transformOrigin)==null?void 0:$e.x,(qe=Q.transformOrigin)==null?void 0:qe.y].join(" "),...((Fe=Q.hide)==null?void 0:Fe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(ZK,{scope:n,placedSide:te,onArrowChange:A,arrowX:ae,arrowY:be,shouldHideArrow:we,children:y.jsx(an.div,{"data-side":te,"data-align":G,...w,ref:E,style:{...w.style,animation:ne?void 0:"none"}})})})});hD.displayName=PE;var pD="PopperArrow",XK={top:"bottom",right:"left",bottom:"top",left:"right"},mD=B.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=YK(pD,r),o=XK[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(WK,{...a,ref:n,style:{...a.style,display:"block"}})})});mD.displayName=pD;function JK(e){return e!==null}var QK=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[c,f]=gD(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+u/2;let v="",w="";return c==="bottom"?(v=o?h:`${m}px`,w=`${-u}px`):c==="top"?(v=o?h:`${m}px`,w=`${r.floating.height+u}px`):c==="right"?(v=`${-u}px`,w=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+u}px`,w=o?h:`${g}px`),{data:{x:v,y:w}}}});function gD(e){const[t,n="center"]=e.split("-");return[t,n]}var Dv=cD,p0=fD,Mv=hD,Pv=mD,eZ="Portal",yh=B.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=B.useState(!1);Fa(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?Gj.createPortal(y.jsx(an.div,{...r,ref:t}),o):null});yh.displayName=eZ;function tZ(e,t){return B.useReducer((n,r)=>t[n][r]??n,e)}var Na=e=>{const{present:t,children:n}=e,r=nZ(t),a=typeof n=="function"?n({present:r.isPresent}):B.Children.only(n),i=xn(r.ref,rZ(a));return typeof n=="function"||r.isPresent?B.cloneElement(a,{ref:i}):null};Na.displayName="Presence";function nZ(e){const[t,n]=B.useState(),r=B.useRef(null),a=B.useRef(e),i=B.useRef("none"),o=e?"mounted":"unmounted",[s,u]=tZ(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return B.useEffect(()=>{const c=ky(r.current);i.current=s==="mounted"?c:"none"},[s]),Fa(()=>{const c=r.current,f=a.current;if(f!==e){const m=i.current,g=ky(c);e?u("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),Fa(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const w=ky(r.current).includes(g.animationName);if(g.target===t&&w&&(u("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},m=g=>{g.target===t&&(i.current=ky(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:B.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function ky(e){return(e==null?void 0:e.animationName)||"none"}function rZ(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var aZ=Z4[" useInsertionEffect ".trim().toString()]||Fa;function Ds({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=iZ({defaultProp:t,onChange:n}),s=e!==void 0,u=s?e:a;{const f=B.useRef(e!==void 0);B.useEffect(()=>{const h=f.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=s},[s,r])}const c=B.useCallback(f=>{var h;if(s){const m=oZ(f)?f(e):f;m!==e&&((h=o.current)==null||h.call(o,m))}else i(f)},[s,e,i,o]);return[u,c]}function iZ({defaultProp:e,onChange:t}){const[n,r]=B.useState(e),a=B.useRef(n),i=B.useRef(t);return aZ(()=>{i.current=t},[t]),B.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function oZ(e){return typeof e=="function"}var yD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sZ="VisuallyHidden",bD=B.forwardRef((e,t)=>y.jsx(an.span,{...e,ref:t,style:{...yD,...e.style}}));bD.displayName=sZ;var lZ=bD,[Fv,xge]=Ri("Tooltip",[Xu]),Lv=Xu(),vD="TooltipProvider",uZ=700,S2="tooltip.open",[cZ,FE]=Fv(vD),wD=e=>{const{__scopeTooltip:t,delayDuration:n=uZ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=B.useRef(!0),s=B.useRef(!1),u=B.useRef(0);return B.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),y.jsx(cZ,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:B.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:B.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:B.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};wD.displayName=vD;var Em="Tooltip",[dZ,m0]=Fv(Em),_D=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,u=FE(Em,e.__scopeTooltip),c=Lv(t),[f,h]=B.useState(null),m=Ts(),g=B.useRef(0),v=o??u.disableHoverableContent,w=s??u.delayDuration,_=B.useRef(!1),[x,S]=Ds({prop:r,defaultProp:a??!1,onChange:j=>{j?(u.onOpen(),document.dispatchEvent(new CustomEvent(S2))):u.onClose(),i==null||i(j)},caller:Em}),E=B.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),C=B.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),A=B.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),O=B.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},w)},[w,S]);return B.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(Dv,{...c,children:y.jsx(dZ,{scope:t,contentId:m,open:x,stateAttribute:E,trigger:f,onTriggerChange:h,onTriggerEnter:B.useCallback(()=>{u.isOpenDelayedRef.current?O():C()},[u.isOpenDelayedRef,O,C]),onTriggerLeave:B.useCallback(()=>{v?A():(window.clearTimeout(g.current),g.current=0)},[A,v]),onOpen:C,onClose:A,disableHoverableContent:v,children:n})})};_D.displayName=Em;var E2="TooltipTrigger",xD=B.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=m0(E2,n),i=FE(E2,n),o=Lv(n),s=B.useRef(null),u=xn(t,s,a.onTriggerChange),c=B.useRef(!1),f=B.useRef(!1),h=B.useCallback(()=>c.current=!1,[]);return B.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(p0,{asChild:!0,...o,children:y.jsx(an.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:u,onPointerMove:zt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:zt(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:zt(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:zt(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:zt(e.onBlur,a.onClose),onClick:zt(e.onClick,a.onClose)})})});xD.displayName=E2;var LE="TooltipPortal",[fZ,hZ]=Fv(LE,{forceMount:void 0}),SD=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=m0(LE,t);return y.jsx(fZ,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(yh,{asChild:!0,container:a,children:r})})})};SD.displayName=LE;var Kf="TooltipContent",ED=B.forwardRef((e,t)=>{const n=hZ(Kf,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=m0(Kf,e.__scopeTooltip);return y.jsx(Na,{present:r||o.open,children:o.disableHoverableContent?y.jsx(kD,{side:a,...i,ref:t}):y.jsx(pZ,{side:a,...i,ref:t})})}),pZ=B.forwardRef((e,t)=>{const n=m0(Kf,e.__scopeTooltip),r=FE(Kf,e.__scopeTooltip),a=B.useRef(null),i=xn(t,a),[o,s]=B.useState(null),{trigger:u,onClose:c}=n,f=a.current,{onPointerInTransitChange:h}=r,m=B.useCallback(()=>{s(null),h(!1)},[h]),g=B.useCallback((v,w)=>{const _=v.currentTarget,x={x:v.clientX,y:v.clientY},S=bZ(x,_.getBoundingClientRect()),E=vZ(x,S),C=wZ(w.getBoundingClientRect()),A=xZ([...E,...C]);s(A),h(!0)},[h]);return B.useEffect(()=>()=>m(),[m]),B.useEffect(()=>{if(u&&f){const v=_=>g(_,f),w=_=>g(_,u);return u.addEventListener("pointerleave",v),f.addEventListener("pointerleave",w),()=>{u.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",w)}}},[u,f,g,m]),B.useEffect(()=>{if(o){const v=w=>{const _=w.target,x={x:w.clientX,y:w.clientY},S=(u==null?void 0:u.contains(_))||(f==null?void 0:f.contains(_)),E=!_Z(x,o);S?m():E&&(m(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,f,o,c,m]),y.jsx(kD,{...e,ref:i})}),[mZ,gZ]=Fv(Em,{isInside:!1}),yZ=Q$("TooltipContent"),kD=B.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,u=m0(Kf,n),c=Lv(n),{onClose:f}=u;return B.useEffect(()=>(document.addEventListener(S2,f),()=>document.removeEventListener(S2,f)),[f]),B.useEffect(()=>{if(u.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),y.jsx(ph,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:y.jsxs(Mv,{"data-state":u.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(yZ,{children:r}),y.jsx(mZ,{scope:n,isInside:!0,children:y.jsx(lZ,{id:u.contentId,role:"tooltip",children:a||r})})]})})});ED.displayName=Kf;var CD="TooltipArrow",AD=B.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Lv(n);return gZ(CD,n).isInside?null:y.jsx(Pv,{...a,...r,ref:t})});AD.displayName=CD;function bZ(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vZ(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function wZ(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function _Z(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function xZ(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),SZ(t)}function SZ(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var EZ=wD,kZ=_D,CZ=xD,AZ=SD,TZ=ED,RZ=AD;function On({delayDuration:e=0,...t}){return y.jsx(EZ,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Tn({...e}){return y.jsx(On,{children:y.jsx(kZ,{"data-slot":"tooltip",...e})})}function Rn({...e}){return y.jsx(CZ,{"data-slot":"tooltip-trigger",...e})}function Nn({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(AZ,{children:y.jsxs(TZ,{"data-slot":"tooltip-content",sideOffset:t,className:Ut("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(RZ,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var ex={exports:{}},qR;function NZ(){return qR||(qR=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof u?new u(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var A,O;switch(s.util.type(E)){case"Object":if(O=s.util.objId(E),C[O])return C[O];A={},C[O]=A;for(var j in E)E.hasOwnProperty(j)&&(A[j]=S(E[j],C));return A;case"Array":return O=s.util.objId(E),C[O]?C[O]:(A=[],C[O]=A,E.forEach(function(N,U){A[U]=S(N,C)}),A);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var A="no-"+E;S;){var O=S.classList;if(O.contains(E))return!0;if(O.contains(A))return!1;S=S.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var C=s.util.clone(s.languages[S]);for(var A in E)C[A]=E[A];return C},insertBefore:function(S,E,C,A){A=A||s.languages;var O=A[S],j={};for(var N in O)if(O.hasOwnProperty(N)){if(N==E)for(var U in C)C.hasOwnProperty(U)&&(j[U]=C[U]);C.hasOwnProperty(N)||(j[N]=O[N])}var V=A[S];return A[S]=j,s.languages.DFS(s.languages,function(J,P){P===V&&J!=S&&(this[J]=j)}),j},DFS:function S(E,C,A,O){O=O||{};var j=s.util.objId;for(var N in E)if(E.hasOwnProperty(N)){C.call(E,N,E[N],A||N);var U=E[N],V=s.util.type(U);V==="Object"&&!O[j(U)]?(O[j(U)]=!0,S(U,C,null,O)):V==="Array"&&!O[j(U)]&&(O[j(U)]=!0,S(U,C,N,O))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var A={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),s.hooks.run("before-all-elements-highlight",A);for(var O=0,j;j=A.elements[O++];)s.highlightElement(j,E===!0,A.callback)},highlightElement:function(S,E,C){var A=s.util.getLanguage(S),O=s.languages[A];s.util.setLanguage(S,A);var j=S.parentElement;j&&j.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(j,A);var N=S.textContent,U={element:S,language:A,grammar:O,code:N};function V(P){U.highlightedCode=P,s.hooks.run("before-insert",U),U.element.innerHTML=U.highlightedCode,s.hooks.run("after-highlight",U),s.hooks.run("complete",U),C&&C.call(U.element)}if(s.hooks.run("before-sanity-check",U),j=U.element.parentElement,j&&j.nodeName.toLowerCase()==="pre"&&!j.hasAttribute("tabindex")&&j.setAttribute("tabindex","0"),!U.code){s.hooks.run("complete",U),C&&C.call(U.element);return}if(s.hooks.run("before-highlight",U),!U.grammar){V(s.util.encode(U.code));return}if(E&&r.Worker){var J=new Worker(s.filename);J.onmessage=function(P){V(P.data)},J.postMessage(JSON.stringify({language:U.language,code:U.code,immediateClose:!0}))}else V(s.highlight(U.code,U.grammar,U.language))},highlight:function(S,E,C){var A={code:S,grammar:E,language:C};if(s.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=s.tokenize(A.code,A.grammar),s.hooks.run("after-tokenize",A),u.stringify(s.util.encode(A.tokens),A.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var A in C)E[A]=C[A];delete E.rest}var O=new h;return m(O,O.head,S),f(S,O,E,O.head,0),v(O)},hooks:{all:{},add:function(S,E){var C=s.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=s.hooks.all[S];if(!(!C||!C.length))for(var A=0,O;O=C[A++];)O(E)}},Token:u};r.Prism=s;function u(S,E,C,A){this.type=S,this.content=E,this.alias=C,this.length=(A||"").length|0}u.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var A="";return E.forEach(function(V){A+=S(V,C)}),A}var O={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},j=E.alias;j&&(Array.isArray(j)?Array.prototype.push.apply(O.classes,j):O.classes.push(j)),s.hooks.run("wrap",O);var N="";for(var U in O.attributes)N+=" "+U+'="'+(O.attributes[U]||"").replace(/"/g,"&quot;")+'"';return"<"+O.tag+' class="'+O.classes.join(" ")+'"'+N+">"+O.content+"</"+O.tag+">"};function c(S,E,C,A){S.lastIndex=E;var O=S.exec(C);if(O&&A&&O[1]){var j=O[1].length;O.index+=j,O[0]=O[0].slice(j)}return O}function f(S,E,C,A,O,j){for(var N in C)if(!(!C.hasOwnProperty(N)||!C[N])){var U=C[N];U=Array.isArray(U)?U:[U];for(var V=0;V<U.length;++V){if(j&&j.cause==N+","+V)return;var J=U[V],P=J.inside,Z=!!J.lookbehind,F=!!J.greedy,ue=J.alias;if(F&&!J.pattern.global){var le=J.pattern.toString().match(/[imsuy]*$/)[0];J.pattern=RegExp(J.pattern.source,le+"g")}for(var ne=J.pattern||J,Q=A.next,te=O;Q!==E.tail&&!(j&&te>=j.reach);te+=Q.value.length,Q=Q.next){var G=Q.value;if(E.length>S.length)return;if(!(G instanceof u)){var X=1,ae;if(F){if(ae=c(ne,te,S,Z),!ae||ae.index>=S.length)break;var Me=ae.index,be=ae.index+ae[0].length,we=te;for(we+=Q.value.length;Me>=we;)Q=Q.next,we+=Q.value.length;if(we-=Q.value.length,te=we,Q.value instanceof u)continue;for(var fe=Q;fe!==E.tail&&(we<be||typeof fe.value=="string");fe=fe.next)X++,we+=fe.value.length;X--,G=S.slice(te,we),ae.index-=te}else if(ae=c(ne,0,G,Z),!ae)continue;var Me=ae.index,Pe=ae[0],Oe=G.slice(0,Me),Ae=G.slice(Me+Pe.length),$e=te+G.length;j&&$e>j.reach&&(j.reach=$e);var qe=Q.prev;Oe&&(qe=m(E,qe,Oe),te+=Oe.length),g(E,qe,X);var Fe=new u(N,P?s.tokenize(Pe,P):Pe,ue,Pe);if(Q=m(E,qe,Fe),Ae&&m(E,Q,Ae),X>1){var Ne={cause:N+","+V,reach:$e};f(S,E,C,Q.prev,te,Ne),j&&Ne.reach>j.reach&&(j.reach=Ne.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function m(S,E,C){var A=E.next,O={value:C,prev:E,next:A};return E.next=O,A.prev=O,S.length++,O}function g(S,E,C){for(var A=E.next,O=0;O<C&&A!==S.tail;O++)A=A.next;E.next=A,A.prev=E,S.length-=O}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,A=E.code,O=E.immediateClose;r.postMessage(s.highlight(A,s.languages[C],C)),O&&r.close()},!1)),s;var w=s.util.currentScript();w&&(s.filename=w.src,w.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&w&&w.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof qc<"u"&&(qc.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading…",a=function(w,_){return"✖ Error "+w+" while fetching file: "+_},i="✖ Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",c="loaded",f="failed",h="pre[data-src]:not(["+s+'="'+c+'"]):not(['+s+'="'+u+'"])';function m(w,_,x){var S=new XMLHttpRequest;S.open("GET",w,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(w){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(w||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(w){w.selector+=", "+h}),n.hooks.add("before-sanity-check",function(w){var _=w.element;if(_.matches(h)){w.code="",_.setAttribute(s,u);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=w.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var A=n.plugins.autoloader;A&&A.loadLanguages(E),m(S,function(O){_.setAttribute(s,c);var j=g(_.getAttribute("data-range"));if(j){var N=O.split(/\r\n?|\n/g),U=j[0],V=j[1]==null?N.length:j[1];U<0&&(U+=N.length),U=Math.max(0,Math.min(U-1,N.length)),V<0&&(V+=N.length),V=Math.max(0,Math.min(V,N.length)),O=N.slice(U,V).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(U+1))}x.textContent=O,n.highlightElement(x)},function(O){_.setAttribute(s,f),x.textContent=O})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(ex)),ex.exports}var IZ=NZ();const OZ=Qa(IZ);var HR={},VR;function jZ(){return VR||(VR=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),HR}jZ();var GR={},WR;function DZ(){return WR||(WR=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),GR}DZ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(h){f!==h&&(e.languages.markdown[f].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,v=m.length;g<v;g++){var w=m[g];if(w.type!=="code"){h(w.content);continue}var _=w.content[1],x=w.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var h="",m=0,g=f.classes.length;m<g;m++){var v=f.classes[m],w=/language-(.+)/.exec(v);if(w){h=w[1];break}}var _=e.languages[h];if(_)f.content=e.highlight(c(f.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(f){var h=f.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),u(v)}else{var w=s[g];return w||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var KR={},ZR;function MZ(){return ZR||(ZR=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),KR}MZ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const YR="prism-theme-link",tx="prism-default-light-theme-link",nx="prism-default-dark-theme-link",PZ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-material-light.min.css",FZ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-coldark-dark.min.css",XR=e=>e.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),TD=({lang:e,code:t})=>{const[n,r]=B.useState(!1),[a,i]=B.useState(!1),o=B.useRef(null),{prismThemeUrl:s,theme:u}=zr(In(_=>({prismThemeUrl:_.prismThemeUrl,theme:_.theme}))),c=B.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),f=u==="system"?c:u;B.useEffect(()=>{const _=(S,E)=>{const C=document.getElementById(E);if(C)C.href!==S&&(C.href=S);else{const A=document.createElement("link");A.id=E,A.rel="stylesheet",A.href=S,document.head.appendChild(A)}},x=S=>{const E=document.getElementById(S);E&&E.remove()};return s?(_(s,YR),x(tx),x(nx)):(x(YR),f==="dark"?(_(XR(FZ),nx),x(tx)):(_(XR(PZ),tx),x(nx))),()=>{}},[s,f]);const h=B.useCallback(()=>{if(o.current&&t)try{o.current.textContent=t,OZ.highlightElement(o.current)}catch(_){console.error("Prism highlight error:",_),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);B.useEffect(()=>{a||h()},[t,e,a,h]);const m=async()=>{try{await navigator.clipboard.writeText(t),r(!0),ct.success("Code copied to clipboard!"),setTimeout(()=>r(!1),1500)}catch(_){ct.error("Failed to copy code."),console.error("Clipboard copy failed:",_)}},g=()=>{const _=a;i(x=>!x),_&&setTimeout(h,0)},v=e?`language-${e}`:"language-plaintext",w=B.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container my-4",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:e||"code"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":a?"Unfold code":"Fold code",children:y.jsx(f6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:a?"Unfold":"Fold"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:m,"aria-label":"Copy code",children:n?y.jsx(od,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(ez,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Copy"})]})})]})]}),!a&&y.jsx("pre",{className:"code-block-content",children:y.jsx("code",{ref:o,className:v,children:t})}),a&&y.jsx("div",{className:"folded-content-preview p-4 pt-0",onClick:g,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:w})})]})};var ot;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(ot||(ot={}));const JR={[ot.EPERM]:"Operation not permitted",[ot.ENOENT]:"No such file or directory",[ot.EINTR]:"Interrupted system call",[ot.EIO]:"Input/output error",[ot.ENXIO]:"No such device or address",[ot.EBADF]:"Bad file descriptor",[ot.EAGAIN]:"Resource temporarily unavailable",[ot.ENOMEM]:"Cannot allocate memory",[ot.EACCES]:"Permission denied",[ot.EFAULT]:"Bad address",[ot.ENOTBLK]:"Block device required",[ot.EBUSY]:"Resource busy or locked",[ot.EEXIST]:"File exists",[ot.EXDEV]:"Invalid cross-device link",[ot.ENODEV]:"No such device",[ot.ENOTDIR]:"File is not a directory",[ot.EISDIR]:"File is a directory",[ot.EINVAL]:"Invalid argument",[ot.ENFILE]:"Too many open files in system",[ot.EMFILE]:"Too many open files",[ot.ETXTBSY]:"Text file busy",[ot.EFBIG]:"File is too big",[ot.ENOSPC]:"No space left on disk",[ot.ESPIPE]:"Illegal seek",[ot.EROFS]:"Cannot modify a read-only file system",[ot.EMLINK]:"Too many links",[ot.EPIPE]:"Broken pipe",[ot.EDOM]:"Numerical argument out of domain",[ot.ERANGE]:"Numerical result out of range",[ot.EDEADLK]:"Resource deadlock would occur",[ot.ENAMETOOLONG]:"File name too long",[ot.ENOLCK]:"No locks available",[ot.ENOSYS]:"Function not implemented",[ot.ENOTEMPTY]:"Directory is not empty",[ot.ELOOP]:"Too many levels of symbolic links",[ot.ENOMSG]:"No message of desired type",[ot.EBADE]:"Invalid exchange",[ot.EBADR]:"Invalid request descriptor",[ot.EXFULL]:"Exchange full",[ot.ENOANO]:"No anode",[ot.EBADRQC]:"Invalid request code",[ot.ENOSTR]:"Device not a stream",[ot.ENODATA]:"No data available",[ot.ETIME]:"Timer expired",[ot.ENOSR]:"Out of streams resources",[ot.ENONET]:"Machine is not on the network",[ot.EREMOTE]:"Object is remote",[ot.ENOLINK]:"Link has been severed",[ot.ECOMM]:"Communication error on send",[ot.EPROTO]:"Protocol error",[ot.EBADMSG]:"Bad message",[ot.EOVERFLOW]:"Value too large for defined data type",[ot.EBADFD]:"File descriptor in bad state",[ot.ESTRPIPE]:"Streams pipe error",[ot.ENOTSOCK]:"Socket operation on non-socket",[ot.EDESTADDRREQ]:"Destination address required",[ot.EMSGSIZE]:"Message too long",[ot.EPROTOTYPE]:"Protocol wrong type for socket",[ot.ENOPROTOOPT]:"Protocol not available",[ot.EPROTONOSUPPORT]:"Protocol not supported",[ot.ESOCKTNOSUPPORT]:"Socket type not supported",[ot.ENOTSUP]:"Operation is not supported",[ot.ENETDOWN]:"Network is down",[ot.ENETUNREACH]:"Network is unreachable",[ot.ENETRESET]:"Network dropped connection on reset",[ot.ETIMEDOUT]:"Connection timed out",[ot.ECONNREFUSED]:"Connection refused",[ot.EHOSTDOWN]:"Host is down",[ot.EHOSTUNREACH]:"No route to host",[ot.EALREADY]:"Operation already in progress",[ot.EINPROGRESS]:"Operation now in progress",[ot.ESTALE]:"Stale file handle",[ot.EREMOTEIO]:"Remote I/O error",[ot.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(ot[t],JR[ot[t]],n,r)}constructor(t,n=JR[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=ot[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var rx={exports:{}},QR;function LZ(){return QR||(QR=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function i(u,c,f,h,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||u,m),v=n?n+c:c;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)t.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,v=new Array(g);m<g;m++)v[m]=h[m].fn;return v},s.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},s.prototype.emit=function(c,f,h,m,g,v){var w=n?n+c:c;if(!this._events[w])return!1;var _=this._events[w],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,h),!0;case 4:return _.fn.call(_.context,f,h,m),!0;case 5:return _.fn.call(_.context,f,h,m,g),!0;case 6:return _.fn.call(_.context,f,h,m,g,v),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var C=_.length,A;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,h);break;case 4:_[E].fn.call(_[E].context,f,h,m);break;default:if(!S)for(A=1,S=new Array(x-1);A<x;A++)S[A-1]=arguments[A];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},s.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},s.prototype.removeListener=function(c,f,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!m||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var w=0,_=[],x=v.length;w<x;w++)(v[w].fn!==f||m&&!v[w].once||h&&v[w].context!==h)&&_.push(v[w]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(rx)),rx.exports}var $Z=LZ();const $E=Qa($Z);var H4;let BZ=class extends $E{constructor(n){super();Ua(this,H4,"List");Ua(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(H4=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function eN(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function ur(e){throw e}const tN=Intl.NumberFormat("en",{notation:"compact"});tN.format.bind(tN);function ud(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function zZ(e){try{return JSON.parse(e),!0}catch{return!1}}function k2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function BE(e){return e.at(0).toUpperCase()+e.slice(1)}const UZ=new TextEncoder;function zc(e){return UZ.encode(e)}const nN=new TextDecoder;function zE(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return nN.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),nN.decode(t)}function km(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=km(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function qZ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var HZ={};let VZ="process"in globalThis&&"env"in globalThis.process&&HZ.U_DEBUG=="true";function Cm(...e){VZ&&console.debug("[U]",...e)}const rN=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],GZ=[...rN,...rN.map(e=>BE(e)),"char"],UE=/^(u?int|float)(8|16|32|64|128)$/i;function RD(e){return e=="char"?"uint8":e.toLowerCase()}function qE(e){return UE.test(e.toString())}function C2(e){return e=="char"||UE.test(e.toString().toLowerCase())}function WZ(e){if(!C2(e))throw new TypeError("Not a valid primitive type: "+e)}const aN=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function ND(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function KZ(e){return e!=null&&typeof e=="object"&&"struct"in e}function $v(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Fo(e){return typeof e=="function"&&Symbol.metadata in e&&KZ(e[Symbol.metadata])}function g0(e){return e!=null&&typeof e=="object"&&Fo(e.constructor)}function ID(e){if(!g0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function HE(e){return g0(e)||Fo(e)}function OD(e){if(!HE(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function VE(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function jr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=jr(e[i]);return a}if(typeof e=="string")return WZ(e),+RD(e).match(UE)[2]/8;if(VE(e))return e[Symbol.size];OD(e);const t=Fo(e)?e:e.constructor;$v(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Fo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(g0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,jr(i)):r+=jr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=jr(HE(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function ZZ(e,t){var i;OD(e);const n=Fo(e)?e:e.constructor;$v(n);const{struct:r}=n[Symbol.metadata];if(Fo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??ur(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=jr(HE(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function YZ(e,t){return Math.ceil(e/t)*t}function cd(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:u,length:c}of ND(r)){if(!C2(u)&&!Fo(u))throw new TypeError("Not a valid type: "+u);if(typeof c=="string"){const m=a.get(c);if(!m)throw new Error(`"${c}" is undefined or declared after "${s}"`);if(!qE(m.type))throw new Error(`"${c}" is not a number and cannot be used to count "${s}"`)}let f=`${typeof u=="string"?u:u.name} ${s}`;c!==void 0&&(f+=`[${c}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:C2(u)?RD(u):u,length:c,decl:f});const h=typeof c=="string"||Fo(u)&&u[Symbol.metadata].struct.isDynamic?0:jr(u)*(c||1);o||(o=Fo(u)?u[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=YZ(i,e.align||1),Cm("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function Am(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return ND(r).push({name:a,type:e,length:t}),n}}function jD(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:ur(new Error("Array lengths must be natural numbers"))}function Ma(e){if(VE(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();ID(e),$v(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=jr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Cm("serialize",e.constructor.name);let o=0,s=0;for(const u of n.values()){const c=jD(e,u);Cm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name][f]:e[u.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=g0(h)?jr(h):jr(u.type),!qE(u.type)){a.set(h?Ma(h):new Uint8Array(jr(u.type)),o);continue}const m=`set${BE(u.type)}`;if(m=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&aN,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&aN,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](o,Number(h),!t.bigEndian)}}return a}function Bv(e,t){const n=qZ(t);if(VE(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);ID(e),$v(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Cm("deserialize",e.constructor.name);let o=0,s=0;for(const u of a.values()){const c=jD(e,u);Cm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name]:e;const m=c!=-1?f:u.name,g=h[m]===null||h[m]===void 0,v=g&&Fo(u.type)&&u.type[Symbol.metadata].struct.isDynamic;if(o=s,!g0(h[m])&&!v&&(s+=jr(u.type)),typeof e[u.name]=="string"){e[u.name]=e[u.name].slice(0,f)+String.fromCharCode(i.getUint8(o))+e[u.name].slice(f+1);continue}if(!qE(u.type)){if(v&&Fo(u.type))h[m]??(h[m]=new u.type);else if(g)continue;Bv(h[m],new Uint8Array(n.subarray(o))),s+=jr(h[m]);continue}c&&c!=-1&&(h||(h=[]));const w=`get${BE(u.type)}`;if(w=="getInt64"){h[m]=i.getBigInt64(o,!r.bigEndian);continue}if(w=="getUint64"){h[m]=i.getBigUint64(o,!r.bigEndian);continue}if(w=="getInt128"){h[m]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(w=="getUint128"){h[m]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(w=="getFloat128"){h[m]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[w](o,!r.bigEndian)}}}function XZ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Am(e,n):Am(e)(n,r)}return t}const yn=Object.fromEntries(GZ.map(e=>[e,XZ(e)]));function JZ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Zo={root:"/",pwd:"/",credentials:JZ({uid:0,gid:0}),descriptors:new Map};function DD(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const u=n.lastIndexOf("/");u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function Nl(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Zo.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=DD(n,!r),r?`/${n}`:n.length?n:"/"}function QZ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=DD(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function tr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?QZ(t):"."}function MD(e,t){if(e===t||(e=Nl.call(this,e),t=Nl.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let u=-1,c=0;for(;c<s;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(u=c)}if(c===s)if(o>s){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>s&&(e[n+c]==="/"?u=c:c===0&&(u=0));let f="";for(c=n+u+1;c<=r;++c)(c===r||e[c]==="/")&&(f+=f.length===0?"..":"/..");return`${f}${t.slice(i+u)}`}function Zn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Zf(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function ys(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,u=e.length-1,c=0;for(;u>=r;--u){if(e[u]==="/"){if(!s){i=u+1;break}continue}o===-1&&(s=!1,o=u+1),e[u]==="."?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}if(o!==-1){const f=i===0&&t?1:i;a===-1||c===0||c===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(f,o):(n.name=e.slice(f,a),n.base=e.slice(f,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var mn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(mn||(mn={}));mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";const eY=new BZ;function tY(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};eY.add(n),uY(n)}function nY(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+tr(i,e.path)}function Ju(e){return function(t,n={}){return tY(e,nY(t,n)),t}}Ju(mn.EMERG);const rY=Ju(mn.ALERT),zv=Ju(mn.CRIT),xi=Ju(mn.ERR),Wa=Ju(mn.WARN),GE=Ju(mn.NOTICE),PD=Ju(mn.INFO),tm=Ju(mn.DEBUG);function aY(e,t){return`\x1B[${t}m${e}\x1B[0m`}function iY(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[aY(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"",mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"",mn.EMERG+"",mn.ALERT+"",mn.CRIT+"",mn.ERR+"",mn.WARN+"",mn.NOTICE+"",mn.INFO+"",mn.DEBUG+"";let oY=e=>[...iY(e),e.message];function sY(e){const t=oY(e);return typeof t=="string"?[t]:Array.from(t)}let lY=console.error;function uY(e){e.level>cY||lY(...sY(e))}let cY=mn.ALERT;function WE(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function dY(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function fY(e,t){if(typeof t!="object"||t===null)throw xi(new Ue(ot.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){tm("Using default for option: "+n);continue}throw xi(new Ue(ot.EINVAL,"Missing required option: "+n))}const i=(c,f=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,u=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw xi(new Ue(ot.EINVAL,`Incorrect type for "${n}": ${o} (expected ${u})`))}}function FD(e){return e!=null&&typeof e=="object"&&"backend"in e&&WE(e.backend)}const KE=0,pa=4,Gr=2,Jy=1,ZE=1,hY=2,pY=4,LD=0,Va=1,xl=2,Uv=64,qv=128,mY=256,Hv=512,td=1024,gY=65536,yY=262144,bY=131072,Vv=1052672,vY=4096,wY=32768,_Y=16384,xY=2048,br=61440,dd=49152,Pl=40960,Lo=32768,fd=24576,oa=16384,hd=8192,pd=4096,y0=2048,b0=1024,SY=512,EY=448,$D=256,BD=128,zD=64,kY=56,UD=32,qD=16,HD=8,CY=7,VD=4,GD=2,WD=1,AY=0,hi=4294967295,KD=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:ZE,COPYFILE_FICLONE:hY,COPYFILE_FICLONE_FORCE:pY,F_OK:KE,O_APPEND:td,O_CREAT:Uv,O_DIRECT:_Y,O_DIRECTORY:gY,O_DSYNC:vY,O_EXCL:qv,O_NOATIME:yY,O_NOCTTY:mY,O_NOFOLLOW:bY,O_NONBLOCK:xY,O_RDONLY:LD,O_RDWR:xl,O_SYMLINK:wY,O_SYNC:Vv,O_TRUNC:Hv,O_WRONLY:Va,R_OK:pa,S_IFBLK:fd,S_IFCHR:hd,S_IFDIR:oa,S_IFIFO:pd,S_IFLNK:Pl,S_IFMT:br,S_IFREG:Lo,S_IFSOCK:dd,S_IRGRP:UD,S_IROTH:VD,S_IRUSR:$D,S_IRWXG:kY,S_IRWXO:CY,S_IRWXU:EY,S_ISGID:b0,S_ISUID:y0,S_ISVTX:SY,S_IWGRP:qD,S_IWOTH:GD,S_IWUSR:BD,S_IXGRP:HD,S_IXOTH:WD,S_IXUSR:zD,UV_FS_O_FILEMAP:AY,W_OK:Gr,X_OK:Jy,size_max:hi},Symbol.toStringTag,{value:"Module"})),Cy=BigInt(1e3);class ZD{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:u,ino:c,...f}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(c??0),this.mode=this._convert(u??420&Lo),(this.mode&br)==0&&(this.mode=this.mode|this._convert(Lo)),Object.assign(this,f)}isFile(){return(this.mode&br)===Lo}isDirectory(){return(this.mode&br)===oa}isSymbolicLink(){return(this.mode&br)===Pl}isSocket(){return(this.mode&br)===dd}isBlockDevice(){return(this.mode&br)===fd}isCharacterDevice(){return(this.mode&br)===hd}isFIFO(){return(this.mode&br)===pd}toJSON(){return ud(this,A2)}hasAccess(t,n){return ir(n,this._isBigint?new Fl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*Cy}get mtimeNs(){return BigInt(this.mtimeMs)*Cy}get ctimeNs(){return BigInt(this.ctimeMs)*Cy}get birthtimeNs(){return BigInt(this.birthtimeMs)*Cy}}function YD(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<hi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<hi?e.gid=n:r=!1,r}class Fl extends ZD{constructor(){super(...arguments),this._isBigint=!1}}class md extends ZD{constructor(){super(...arguments),this._isBigint=!0}}function TY(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class RY{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=hi,this.ffree=hi}}class NY{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(hi),this.ffree=BigInt(hi)}}var kr=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},pn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},YE=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const $i=0,IY=1024;let iN=(()=>{var e,t;let n=[cd()],r,a=[],i,o,s=[],u=[],c,f=[],h=[],m,g=[],v=[],w,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=pn(this,s,0),this.valueSize=(pn(this,u),pn(this,f,0)),this._key=(pn(this,h),pn(this,g,"")),this._value=(pn(this,v),pn(this,_,new Uint8Array(IY))),pn(this,x),S&&(this.key=S),E&&(this.value=E)}},YE(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=yn).uint32.bind(e)],c=[(t=yn).uint32.bind(t)],m=[yn.char("keySize")],w=[yn.uint8("valueSize")],kr(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},s,u),kr(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},f,h),kr(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,v),kr(null,null,w,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},_,x),kr(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),pn(i,a)})(),i})(),qu=(()=>{var e;let t=[cd()],n,r=[],a,i,o=[],s=[],u,c=[],f=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new iN(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=pn(this,o,0),this.data=(pn(this,s),pn(this,c,[])),pn(this,f)}},YE(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=yn).uint32.bind(e)],u=[Am(iN,"size")],kr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},o,s),kr(null,null,u,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},c,f),kr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),pn(a,r)})(),a})();const A2=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],OY=4;var Si;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Si||(Si={}));let ia=(()=>{var e,t,n,r,a,i,o,s,u,c,f,h,m,g,v,w;let _=[cd()],x,S=[],E,C,A=[],O=[],j,N=[],U=[],V,J=[],P=[],Z,F=[],ue=[],le,ne=[],Q=[],te,G=[],X=[],ae,be=[],we=[],fe,Me=[],Pe=[],Oe,Ae=[],$e=[],qe,Fe=[],Ne=[],$,Se=[],ke=[],ce,ie=[],Y=[],_e,De=[],Ee=[],Ze,Et=[],at=[],_t,Nt=[],Rt=[],Kt,pe=[],R=[],H,de=[],Re=[],ye,Ce=[],oe=[];var ft=E=class{constructor(vt){if(this.data=pn(this,A,k2(0,hi)),this.__data_old=(pn(this,O),pn(this,N,0)),this.size=(pn(this,U),pn(this,J,0)),this.mode=(pn(this,P),pn(this,F,0)),this.nlink=(pn(this,ue),pn(this,ne,1)),this.uid=(pn(this,Q),pn(this,G,0)),this.gid=(pn(this,X),pn(this,be,0)),this.atimeMs=(pn(this,we),pn(this,Me,Date.now())),this.birthtimeMs=(pn(this,Pe),pn(this,Ae,Date.now())),this.mtimeMs=(pn(this,$e),pn(this,Fe,Date.now())),this.ctimeMs=(pn(this,Ne),pn(this,Se,Date.now())),this.ino=(pn(this,ke),pn(this,ie,k2(0,hi))),this.__ino_old=(pn(this,Y),pn(this,De,0)),this.flags=(pn(this,Ee),pn(this,Et,0)),this.__after_flags=(pn(this,at),pn(this,Nt,0)),this.version=(pn(this,Rt),pn(this,pe,0)),this.__padding=(pn(this,R),pn(this,de,[])),this.attributes=(pn(this,Re),pn(this,Ce,new qu)),pn(this,oe),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<jr(ft))throw zv(new Ue(ot.EIO,"Buffer is too small to create an inode"));Bv(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...ud(this,A2),attributes:this.attributes}}toStats(){return new Fl(this)}update(vt){if(!vt)return!1;let D=!1;for(const Be of A2)vt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==vt[Be]&&(Be=="atimeMs"&&this.flags&Si.NoAtime||(this[Be]=vt[Be],D=!0)));return vt.attributes&&(this.attributes=vt.attributes,D=!0),D&&(this.ctimeMs=Date.now()),D}};return YE(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=yn).uint32.bind(e)],j=[(t=yn).uint32.bind(t)],V=[(n=yn).uint32.bind(n)],Z=[(r=yn).uint16.bind(r)],le=[(a=yn).uint32.bind(a)],te=[(i=yn).uint32.bind(i)],ae=[(o=yn).uint32.bind(o)],fe=[(s=yn).float64.bind(s)],Oe=[(u=yn).float64.bind(u)],qe=[(c=yn).float64.bind(c)],$=[(f=yn).float64.bind(f)],ce=[(h=yn).uint32.bind(h)],_e=[(m=yn).uint32.bind(m)],Ze=[(g=yn).uint32.bind(g)],_t=[(v=yn).uint16.bind(v)],Kt=[(w=yn).uint32.bind(w)],H=[yn.uint8(48)],ye=[Am(qu)],kr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:D=>"data"in D,get:D=>D.data,set:(D,Be)=>{D.data=Be}},metadata:vt},A,O),kr(null,null,j,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:D=>"__data_old"in D,get:D=>D.__data_old,set:(D,Be)=>{D.__data_old=Be}},metadata:vt},N,U),kr(null,null,V,{kind:"field",name:"size",static:!1,private:!1,access:{has:D=>"size"in D,get:D=>D.size,set:(D,Be)=>{D.size=Be}},metadata:vt},J,P),kr(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:D=>"mode"in D,get:D=>D.mode,set:(D,Be)=>{D.mode=Be}},metadata:vt},F,ue),kr(null,null,le,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:D=>"nlink"in D,get:D=>D.nlink,set:(D,Be)=>{D.nlink=Be}},metadata:vt},ne,Q),kr(null,null,te,{kind:"field",name:"uid",static:!1,private:!1,access:{has:D=>"uid"in D,get:D=>D.uid,set:(D,Be)=>{D.uid=Be}},metadata:vt},G,X),kr(null,null,ae,{kind:"field",name:"gid",static:!1,private:!1,access:{has:D=>"gid"in D,get:D=>D.gid,set:(D,Be)=>{D.gid=Be}},metadata:vt},be,we),kr(null,null,fe,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:D=>"atimeMs"in D,get:D=>D.atimeMs,set:(D,Be)=>{D.atimeMs=Be}},metadata:vt},Me,Pe),kr(null,null,Oe,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:D=>"birthtimeMs"in D,get:D=>D.birthtimeMs,set:(D,Be)=>{D.birthtimeMs=Be}},metadata:vt},Ae,$e),kr(null,null,qe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:D=>"mtimeMs"in D,get:D=>D.mtimeMs,set:(D,Be)=>{D.mtimeMs=Be}},metadata:vt},Fe,Ne),kr(null,null,$,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:D=>"ctimeMs"in D,get:D=>D.ctimeMs,set:(D,Be)=>{D.ctimeMs=Be}},metadata:vt},Se,ke),kr(null,null,ce,{kind:"field",name:"ino",static:!1,private:!1,access:{has:D=>"ino"in D,get:D=>D.ino,set:(D,Be)=>{D.ino=Be}},metadata:vt},ie,Y),kr(null,null,_e,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:D=>"__ino_old"in D,get:D=>D.__ino_old,set:(D,Be)=>{D.__ino_old=Be}},metadata:vt},De,Ee),kr(null,null,Ze,{kind:"field",name:"flags",static:!1,private:!1,access:{has:D=>"flags"in D,get:D=>D.flags,set:(D,Be)=>{D.flags=Be}},metadata:vt},Et,at),kr(null,null,_t,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:D=>"__after_flags"in D,get:D=>D.__after_flags,set:(D,Be)=>{D.__after_flags=Be}},metadata:vt},Nt,Rt),kr(null,null,Kt,{kind:"field",name:"version",static:!1,private:!1,access:{has:D=>"version"in D,get:D=>D.version,set:(D,Be)=>{D.version=Be}},metadata:vt},pe,R),kr(null,null,H,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:D=>"__padding"in D,get:D=>D.__padding,set:(D,Be)=>{D.__padding=Be}},metadata:vt},de,Re),kr(null,null,ye,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:D=>"attributes"in D,get:D=>D.attributes,set:(D,Be)=>{D.attributes=Be}},metadata:vt},Ce,oe),kr(null,x={value:E},_,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=x.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),pn(E,S)})(),ft=E})();function jY(e){return(e.mode&br)===Lo}function Ho(e){return(e.mode&br)===oa}function Yf(e){return(e.mode&br)===Pl}function DY(e){return(e.mode&br)===dd}function Tm(e){return(e.mode&br)===fd}function Rm(e){return(e.mode&br)===hd}function MY(e){return(e.mode&br)===pd}function ir(e,t,n){const r=(e==null?void 0:e.credentials)||Zo.credentials;if(Yf(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&$D&&(a|=pa),t.mode&BD&&(a|=Gr),t.mode&zD&&(a|=Jy)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&UD&&(a|=pa),t.mode&qD&&(a|=Gr),t.mode&HD&&(a|=Jy)),t.mode&VD&&(a|=pa),t.mode&GD&&(a|=Gr),t.mode&WD&&(a|=Jy),(a&n)===n}const oN=1;class Mb extends Map{constructor(){super(...arguments),this.maxSize=hi}toJSON(){return{version:oN,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*jr(ia);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&br)!=oa)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())Zn(a)==t&&a!=t&&(r[Zf(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&br)!=oa)continue;const a={};for(const i of this.keys())Zn(i)==n&&i!=n&&(a[Zf(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=oN)throw new Ue(ot.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=k2(1,hi)),r=="/"&&(a.ino=0),this.set(r,new ia(a));return this}static parse(t){if(!zZ(t))throw new Ue(ot.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Mb;return r.fromJSON(n),r}}const ax=4096;let XE=class T2{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===T2.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===T2.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=ax){const u=s+ax>o?o-s:ax,c=new Uint8Array(u);await this.read(t,c,s,s+u).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const u=f=>{s=!0,o.error(f)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(u),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(u))}})}};function oi(e){return JSON.parse(zE(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function so(e){return zc(JSON.stringify(e))}function Qu(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(ot.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Pb(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(ot.EINVAL,"Invalid time.")}}function ln(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(ot.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(ot.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(ot.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Nl(e)}function Sl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:Qu("mode"in e?e==null?void 0:e.mode:null,r)}}class PY{constructor(t,n,r,a){Ua(this,"id");Ua(this,"_size");Ua(this,"options");Ua(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=km(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=km(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,u)=>s.start-u.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var ix,ox,sx;(ix=Promise.withResolvers)!==null&&ix!==void 0||(Promise.withResolvers=(Wa("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(ox=Symbol.dispose)!==null&&ox!==void 0||(Symbol.dispose=(Wa("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(sx=Symbol.asyncDispose)!==null&&sx!==void 0||(Symbol.asyncDispose=(Wa("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class XD{constructor(t){this.store=t}}class FY extends XD{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class R2 extends XD{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new PY(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:u,end:c}of o)this.async(this.get(t,u,c));if(o.length)throw xi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){Wa("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class LY{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof R2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,await this.raw.get(t,u.start,u.end),u.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof R2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,u.start,u.end),u.start)}}}var Sr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Er=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class JD extends XE{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=MD(t,a);if(o.startsWith(".."))continue;let s=tr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){Wa("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,tm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sr(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,Ma(o)),a.has(i)&&await r.set(o.data,so(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Er(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sr(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,Ma(o)),a.has(i)&&r.setSync(o.data,so(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Er(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Mb,a=Sr(n,this.transaction(),!0),i=[["/",0]],o=eN(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new ia(await a.get(u));if(r.set(s,c),c.mode&oa){const f=oi((t=await a.get(c.data))!==null&&t!==void 0?t:ur(Ue.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([tr(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Er(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Mb,a=Sr(n,this.transaction(),!1),i=[["/",0]],o=eN(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new ia(a.getSync(u));if(r.set(s,c),c.mode&oa){const f=oi((t=a.getSync(c.data))!==null&&t!==void 0?t:ur(Ue.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([tr(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Er(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Sr(o,this.transaction(),!0),u=ys(t),c=ys(n),f=await this.findInode(s,u.dir,"rename"),h=oi((r=await s.get(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&xi(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(ot.EBUSY,u.dir);const g=c.dir==u.dir,v=g?f:await this.findInode(s,c.dir,"rename"),w=g?h:oi((a=await s.get(v.data))!==null&&a!==void 0?a:ur(Ue.With("ENODATA",c.dir,"rename")));if(w[c.base]){const _=new ia((i=await s.get(w[c.base]))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(w[c.base])}w[c.base]=m,await s.set(f.data,so(h)),await s.set(v.data,so(w)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Er(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Sr(o,this.transaction(),!1),u=ys(t),c=ys(n),f=this.findInodeSync(s,u.dir,"rename"),h=oi((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&xi(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(ot.EBUSY,u.dir);const g=c.dir===u.dir,v=g?f:this.findInodeSync(s,c.dir,"rename"),w=g?h:oi((a=s.getSync(v.data))!==null&&a!==void 0?a:ur(Ue.With("ENODATA",c.dir,"rename")));if(w[c.base]){const _=new ia((i=s.getSync(w[c.base]))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(w[c.base])}w[c.base]=m,s.setSync(f.data,so(h)),s.setSync(v.data,so(w)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Er(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Er(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Er(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Sr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ma(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Er(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Sr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ma(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Er(r)}}async createFile(t,n){return n.mode|=Lo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Lo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=oa,await this.commitNew(t,n,zc("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=oa,this.commitNewSync(t,n,zc("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Sr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(oi((n=await a.get(i.data))!==null&&n!==void 0?n:ur(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Er(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Sr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(oi((n=a.getSync(i.data))!==null&&n!==void 0?n:ur(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Er(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Sr(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,Ma(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Er(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Sr(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,Ma(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Er(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Sr(a,this.transaction(),!0),o=Zn(n),s=await this.findInode(i,o,"link"),u=oi((r=await i.get(s.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",o,"link"))),c=await this.findInode(i,t,"link");c.nlink++,u[Zf(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,Ma(c)),await i.set(s.data,so(u)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Er(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Sr(a,this.transaction(),!1),o=Zn(n),s=this.findInodeSync(i,o,"link"),u=oi((r=i.getSync(s.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",o,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,u[Zf(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,Ma(c)),i.setSync(s.data,so(u)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Er(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Sr(o,this.transaction(),!0),u=await this.findInode(s,t,"read");if(u.size==0)return;const c=(i=await s.get(u.data,r,a))!==null&&i!==void 0?i:ur(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&xi(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{const s=Er(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Sr(o,this.transaction(),!1),u=this.findInodeSync(s,t,"read");if(u.size==0)return;const c=(i=s.getSync(u.data,r,a))!==null&&i!==void 0?i:ur(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&xi(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{Er(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Sr(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let u=n;o.flag("partial")||(u=km((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),await o.set(s.data,u,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Er(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Sr(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let u=n;o.flag("partial")||(u=km((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),o.setSync(s.data,u,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Er(i)}}transaction(){return new LY(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Sr(t,this.transaction(),!0);if(await n.get($i))return;const r=new ia({ino:$i,data:1,mode:511|oa});await n.set(r.data,zc("{}")),this._add($i,"/"),await n.set($i,Ma(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Er(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Sr(t,this.transaction(),!1);if(n.getSync($i))return;const r=new ia({ino:$i,data:1,mode:511|oa});n.setSync(r.data,zc("{}")),this._add($i,"/"),n.setSync($i,Ma(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Er(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Wa("Attempted to populate tables after initialization");return}tm("Populating tables with existing store metadata");const n=Sr(t,this.transaction(),!0),r=await n.get($i);if(!r){GE("Store does not have a root inode");const s=new ia({ino:$i,data:1,mode:511|oa});await n.set(s.data,zc("{}")),this._add($i,"/"),await n.set($i,Ma(s)),await n.commit();return}if(r.length<jr(ia)){zv("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",$i]];for(;o.length>0;){i++;const[s,u]=o.shift();this._add(u,s);const c=await n.get(u);if(!c){Wa("Store is missing data for inode: "+u);continue}if(c.length<jr(ia)){Wa(`Invalid inode size for ino ${u}: ${c.length}`);continue}const f=new ia(c);if((f.mode&oa)!=oa||a.has(u))continue;a.add(u);const h=await n.get(f.data);if(!h){Wa("Store is missing directory data: "+f.data);continue}const m=oi(h);for(const[g,v]of Object.entries(m))o.push([tr(s,g),v])}tm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Er(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ia((a=await t.get(i))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ia((a=t.getSync(i))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>hi)throw xi(new Ue(ot.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Sr(o,this.transaction(),!0),{dir:u,base:c}=ys(t),f=await this.findInode(s,u,a),h=oi((i=await s.get(f.data))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new ia({...n,ino:m,data:m+1,size:r.byteLength});return await s.set(g.ino,Ma(g)),await s.set(g.data,r),h[c]=g.ino,await s.set(f.data,so(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Er(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Sr(o,this.transaction(),!1),{dir:u,base:c}=ys(t),f=this.findInodeSync(s,u,a),h=oi((i=s.getSync(f.data))!==null&&i!==void 0?i:ur(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new ia({...n,ino:m,data:m+1,size:r.byteLength});return s.setSync(g.ino,Ma(g)),s.setSync(g.data,r),h[c]=g.ino,s.setSync(f.data,so(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Er(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Sr(i,this.transaction(),!0),{dir:u,base:c}=ys(t),f=await this.findInode(s,u,o),h=oi((r=await s.get(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",u,o)));if(!h[c])throw Ue.With("ENOENT",t,o);const m=h[c],g=new ia((a=await s.get(m))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Ho(g))throw Ue.With("EISDIR",t,o);await s.set(f.data,so(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,Ma(g))):(await s.remove(g.data),await s.remove(m),this._remove(m)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Er(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Sr(i,this.transaction(),!1),{dir:u,base:c}=ys(t),f=this.findInodeSync(s,u,o),h=oi((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(Ue.With("ENOENT",u,o))),m=h[c];if(!m)throw Ue.With("ENOENT",t,o);const g=new ia((a=s.getSync(m))!==null&&a!==void 0?a:ur(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Ho(g))throw Ue.With("EISDIR",t,o);s.setSync(f.data,so(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,Ma(g))):(s.removeSync(g.data),s.removeSync(m),this._remove(m)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Er(i)}}}class $Y extends FY{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class BY extends Map{constructor(t=hi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new $Y(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const zY={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new JD(new BY(e,t));return n.checkRootSync(),n}},UY=zY;let ma=!0;class sN extends $E{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;lo(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;lo(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);Ay(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);Ay(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,lo(this.output,-a.length,0),lo(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;lo(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(lo(this.output,-this._cursor,0),lo(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);Ay(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,lo(this.output,-r.length,0),lo(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(Ay(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Wa("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Wa("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function qY(e,t,n,r){return"input"in e?new sN(e.input,e.output,e.completer,e.terminal):new sN(e,t,n,r)}function Ay(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function lo(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Fb{get position(){return this.flag&td?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&Vv||this.inode.flags&Si.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Va||this.flag&xl))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&Va||this.flag&xl))throw new Ue(ot.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Rm(this.inode)&&!Tm(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Va)throw new Ue(ot.EPERM,"File not opened with a readable mode");this.inode.flags&Si.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Rm(this.inode)&&!Tm(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>br?-61441:br)|t,(this._isSync||t>br)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,YD(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Lb(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Zo.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function ei(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Zo.descriptors).get(t);if(!a)throw new Ue(ot.EBADF);return a}function QD(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Zo.descriptors).delete(t)}const HY=/[rwasx]{1,2}\+?/;function El(e){if(typeof e=="number")return e;if(!HY.test(e))throw new Ue(ot.EINVAL,"Invalid flag string: "+e);return VY(e)}function VY(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(ot.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?LD:Uv;return e.includes("w")&&(t|=Hv),e.includes("a")&&(t|=td),e.includes("+")?t|=xl:e.includes("r")||(t|=Va),e.includes("s")&&(t|=Vv),e.includes("x")&&(t|=qv),t}function e8(e){let t=0;return e&Va||(t|=pa),(e&Va||e&xl)&&(t|=Gr),t}const Nm=new Map;JE("/",UY.create({label:"root"}));function JE(e,t){if(e[0]!="/"&&(e="/"+e),e=Nl.call(this,e),Nm.has(e))throw xi(new Ue(ot.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Nm.set(e,t),PD(`Mounted ${t.name} on ${e}`),tm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function t8(e){if(e[0]!="/"&&(e="/"+e),e=Nl.call(this,e),!Nm.has(e)){Wa(e+" is already unmounted");return}Nm.delete(e),GE("Unmounted "+e)}function Fn(e,t){const n=(t==null?void 0:t.root)||Zo.root;e=ln(tr(n,e));const r=[...Nm].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(WY(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw rY(new Ue(ot.EIO,"No file system",e))}function lx(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function or(e,t){typeof e.stack=="string"&&(e.stack=lx(e.stack,t));try{e.message=lx(e.message,t)}catch{}return e.path&&(e.path=lx(e.path,t)),e}function n8(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||hi),files:(t?BigInt:Number)(n.totalNodes||hi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function GY(e){var t,n,r,a,i,o,s;const u=this!==null&&this!==void 0?this:Zo;if(((t=u.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=u.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=u.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=u.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(ot.EPERM,"Can not chroot() as non-root user");(i=u.root)!==null&&i!==void 0||(u.root="/");const c=tr(u.root,e);for(const f of(s=(o=u.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!f.path.startsWith(u.root))throw Ue.With("EBUSY",f.path,"chroot");f.path=f.path.slice(u.root.length)}if(c.length>u.root.length)throw new Ue(ot.EPERM,"Can not chroot() outside of current root");u.root=c}function WY(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class r8 extends $E{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class a8 extends r8{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?tr(t.root,n):n,ZY(this.realpath,this)}close(){super.emit("close"),YY(this.realpath,this)}[Symbol.dispose](){this.close()}}class KY extends r8{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Hu(this.path);TY(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Hu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Au=new Map;function ZY(e,t){const n=ln(e);Au.has(n)||Au.set(n,new Set),Au.get(n).add(t)}function YY(e,t){const n=ln(e);Au.has(n)&&(Au.get(n).delete(t),Au.get(n).size===0&&Au.delete(n))}function Pa(e,t,n){var r;e&&(n=tr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=ln(n);for(let a=n;a!="/";a=Zn(a)){const i=Au.get(a);if(i)for(const o of i)o.emit("change",t,MD.call(o._context,a,n)||Zf(n))}}var v0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},w0=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function XY(e,t){e=ln(e),t=ln(t);const n=Fn(e,this),r=Fn(t,this);if(!Hu.call(this,Zn(e)).hasAccess(Gr,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Pa(this,"rename",e.toString()),Pa(this,"change",t.toString());return}rk.call(this,t,nk(e)),tk.call(this,e),Pa(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}function QE(e){e=ln(e);try{const{fs:t,path:n}=Fn(ec.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==ot.ENOENT)return!1;throw t}}function Hu(e,t){e=ln(e);const{fs:n,path:r}=Fn(ec.call(this,e),this);try{const a=n.statSync(r);if(ma&&!ir(this,a,pa))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new md(a):new Fl(a)}catch(a){throw or(a,{[r]:e})}}function ek(e,t){e=ln(e);const{fs:n,path:r}=Fn(e,this);try{const a=n.statSync(r);if(ma&&!ir(this,a,pa))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new md(a):new Fl(a)}catch(a){throw or(a,{[r]:e})}}function JY(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=v0(n,gd.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(ot.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{w0(n)}}function tk(e){e=ln(e);const{fs:t,path:n}=Fn(e,this);try{if(ma&&!ir(this,t.statSync(n),Gr))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function gd(e,t){var n;e=ln(e);const r=Qu(t.mode,420),a=El(t.flag);e=t.preserveSymlinks?e:ec.call(this,e);const{fs:i,path:o}=Fn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&Uv))throw Ue.With("ENOENT",e,"_open");const c=i.statSync(Zn(o));if(!ir(this,c,Gr))throw Ue.With("EACCES",Zn(e),"_open");if(!Ho(c))throw Ue.With("ENOTDIR",Zn(e),"_open");if(!t.allowDirectory&&r&oa)throw Ue.With("EISDIR",e,"_open");if(!ir(this,c,Gr))throw Ue.With("EACCES",Zn(o),"_open");const{euid:f,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Zo.credentials,m=i.createFileSync(o,{mode:r,uid:c.mode&y0?c.uid:f,gid:c.mode&b0?c.gid:h});return new Fb(this,e,i,o,a,m)}if(!ir(this,s,r)||!ir(this,s,e8(a)))throw Ue.With("EACCES",e,"_open");if(a&qv)throw Ue.With("EEXIST",e,"_open");const u=new Fb(this,e,i,o,a,s);if(a&Hv&&u.truncate(0),!t.allowDirectory&&s.mode&oa)throw Ue.With("EISDIR",e,"_open");return u}function Gv(e,t,n=KE){return Lb(gd.call(this,e,{flag:t,mode:n}))}function Wv(e,t,n){return Lb(gd.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function i8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=v0(r,typeof e=="number"?ei(this,e):gd.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{w0(r)}}function nk(e,t={}){const n=Sl(t,null,"r",420);if(El(n.flag)&Va)throw new Ue(ot.EINVAL,"Flag passed to readFile must allow for reading");const a=Ar.from(i8.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function rk(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Sl(n,"utf8","w+",420),i=El(a.flag);if(!(i&Va||i&xl))throw new Ue(ot.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new Ue(ot.EINVAL,"Data not specified");v0(r,typeof e=="number"?ei(this,e):gd.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),Pa(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{w0(r)}}function QY(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Sl(n,"utf8","a+",420),i=El(a.flag);if(!(i&td))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);v0(r,gd.call(this,typeof e=="number"?ei(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{w0(r)}}function eX(e,t){const n=ei(this,e).stat();return t!=null&&t.bigint?new md(n):new Fl(n)}function yd(e){ei(this,e).close(),QD(this,e)}function tX(e,t=0){if(t||(t=0),t<0)throw new Ue(ot.EINVAL);ei(this,e).truncate(t)}function nX(e){ei(this,e).sync()}function rX(e){ei(this,e).datasync()}function aX(e,t,n,r,a){let i,o,s,u;if(typeof t=="string"){u=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Ar.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,u=typeof a=="number"?a:null;const c=ei(this,e);u??(u=c.position);const f=c.write(i,o,s,u);return Pa(this,"change",c.path),f}function iX(e,t,n,r,a){const i=ei(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function ak(e,t,n){ei(this,e).chown(t,n)}function ik(e,t){const n=Qu(t,-1);if(n<0)throw new Ue(ot.EINVAL,"Invalid mode.");ei(this,e).chmod(n)}function ok(e,t,n){ei(this,e).utimes(Pb(t),Pb(n))}function o8(e){e=ln(e);const{fs:t,path:n}=Fn(ec.call(this,e),this);try{const r=t.statSync(n);if(!Ho(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ma&&!ir(this,r,Gr))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function sk(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Zo.credentials;t=typeof t=="object"?t:{mode:t};const o=Qu(t==null?void 0:t.mode,511);e=ec.call(this,e);const{fs:s,path:u,root:c}=Fn(e,this),f={[u]:e},h=(m,g)=>{if(!ir(this,g,Gr))throw Ue.With("EACCES",Zn(m),"mkdir");const v=s.mkdirSync(m,{mode:o,uid:g.mode&y0?g.uid:a,gid:g.mode&b0?g.gid:i});return Pa(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){h(u,s.statSync(Zn(u)));return}const m=[];for(let v=u,w=e;!s.existsSync(v);v=Zn(v),w=Zn(w))m.unshift(v),f[v]=w;if(!m.length)return;const g=[s.statSync(Zn(m[0]))];for(const[v,w]of m.entries())g.push(h(w,g[v]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw or(m,f)}}function bh(e,t){t=typeof t=="object"?t:{encoding:t},e=ln(e);const{fs:n,path:r}=Fn(ec.call(this,e),this);let a;try{const o=n.statSync(r);if(ma&&!ir(this,o,pa))throw Ue.With("EACCES",r,"readdir");if(!Ho(o))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw or(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(tr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new Im(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Ar.from(o)):i.push(o),!(!Ho(s)||!(t!=null&&t.recursive)))for(const u of bh.call(this,tr(e,o),t))u instanceof Im?(u.path=tr(o,u.path),i.push(u)):Ar.isBuffer(u)?i.push(Ar.from(tr(o,zE(u)))):i.push(tr(o,u))}return i}function oX(e,t){if(e=ln(e),!Hu(Zn(e)).hasAccess(pa,this))throw Ue.With("EACCES",Zn(e),"link");if(t=ln(t),!Hu(Zn(t)).hasAccess(Gr,this))throw Ue.With("EACCES",Zn(t),"link");const{fs:n,path:r}=Fn(e,this),a=Fn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ma&&!ir(this,n.statSync(r),pa))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw or(i,{[r]:e,[a.path]:t})}}function sX(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(ot.EINVAL,"Invalid type: "+n);t=ln(t);const a=v0(r,gd.call(this,t,{flag:"wx",mode:420}),!1);a.write(zc(ln(e,!0))),a.chmod(Pl)}catch(a){r.error=a,r.hasError=!0}finally{w0(r)}}function N2(e,t){const n=Ar.from(i8.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function lX(e,t,n){const r=Gv.call(this,e,"r+");ak.call(this,r,t,n),yd.call(this,r)}function uX(e,t,n){const r=Wv.call(this,e,"r+");ak.call(this,r,t,n),yd.call(this,r)}function cX(e,t){const n=Gv.call(this,e,"r+");ik.call(this,n,t),yd.call(this,n)}function dX(e,t){const n=Wv.call(this,e,"r+");ik.call(this,n,t),yd.call(this,n)}function s8(e,t,n){const r=Gv.call(this,e,"r+");ok.call(this,r,t,n),yd.call(this,r)}function fX(e,t,n){const r=Wv.call(this,e,"r+");ok.call(this,r,t,n),yd.call(this,r)}function I2(e,t,n){try{const u=Fn(t,e),c=u.fs.statSync(u.path);if(!Yf(c))return{...u,fullPath:t,stats:c};const f=Nl.call(e,Zn(t),N2.call(e,t).toString());return I2(e,f)}catch{}const{base:r,dir:a}=ys(t),i=a=="/"?"/":ec.call(e,a),o=tr(i,r),s=Fn(o,e);try{const u=s.fs.statSync(s.path);if(!Yf(u))return{...s,fullPath:o,stats:u};const c=Nl.call(e,i,N2.call(e,o).toString());return I2(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}function ec(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=I2(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Ar.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function hX(e,t=384){if(!ir(this,Hu.call(this,e),t))throw new Ue(ot.EACCES)}function l8(e,t){e=ln(e);let n;try{n=ek.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&br){case oa:if(t!=null&&t.recursive)for(const r of bh.call(this,e))l8.call(this,tr(e,r),t);o8.call(this,e);break;case Lo:case Pl:case fd:case hd:tk.call(this,e);break;case pd:case dd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}}function pX(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return sk.call(this,a),n=="buffer"?Ar.from(a):a}function u8(e,t,n){if(e=ln(e),t=ln(t),n&&n&ZE&&QE(t))throw new Ue(ot.EEXIST,"Destination file already exists",t,"copyFile");rk.call(this,t,nk(e)),Pa(this,"rename",t.toString())}function mX(e,t,n){const r=ei(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function gX(e,t,n){const r=ei(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function yX(e,t){return e=ln(e),new lk(e,this)}function c8(e,t,n){e=ln(e),t=ln(t);const r=ek.call(this,e);if(n!=null&&n.errorOnExist&&QE.call(this,t))throw new Ue(ot.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&br){case oa:if(!(n!=null&&n.recursive))throw new Ue(ot.EISDIR,e+" is a directory (not copied)",e,"cp");sk.call(this,t,{recursive:!0});for(const a of bh.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(tr(e,a.name),tr(t,a.name))||c8.call(this,tr(e,a.name),tr(t,a.name),n);break;case Lo:case Pl:u8.call(this,e,t);break;case fd:case hd:case pd:case dd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&s8.call(this,t,r.atime,r.mtime)}function bX(e,t){e=ln(e);const{fs:n}=Fn(e,this);return n8(n,t==null?void 0:t.bigint)}function vX(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(u=>(u=u.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${u}$`))),o=[];function s(u){const c=bh(u,{withFileTypes:r,encoding:"utf8"});for(const f of c){const h=r?f.path:u+"/"+f;a(r?f:h)||(Hu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&s(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&o.push(r?f.path:h.replace(/^\/+/g,"")))}}return s(n),o}class Im{get name(){return Zf(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return jY(this.stats)}isDirectory(){return Ho(this.stats)}isBlockDevice(){return Tm(this.stats)}isCharacterDevice(){return Rm(this.stats)}isSymbolicLink(){return Yf(this.stats)}isFIFO(){return MY(this.stats)}isSocket(){return DY(this.stats)}}class lk{checkClosed(){if(this.closed)throw new Ue(ot.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await rc.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=bh.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var ux={exports:{}},cx={exports:{}},dx={},lN;function tc(){return lN||(lN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=f,n.toByteArray=m,n.fromByteArray=w;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function c(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var A=C===E?0:4-C%4;return[C,A]}function f(S){var E=c(S),C=E[0],A=E[1];return(C+A)*3/4-A}function h(S,E,C){return(E+C)*3/4-C}function m(S){var E,C=c(S),A=C[0],O=C[1],j=new i(h(S,A,O)),N=0,U=O>0?A-4:A,V;for(V=0;V<U;V+=4)E=a[S.charCodeAt(V)]<<18|a[S.charCodeAt(V+1)]<<12|a[S.charCodeAt(V+2)]<<6|a[S.charCodeAt(V+3)],j[N++]=E>>16&255,j[N++]=E>>8&255,j[N++]=E&255;return O===2&&(E=a[S.charCodeAt(V)]<<2|a[S.charCodeAt(V+1)]>>4,j[N++]=E&255),O===1&&(E=a[S.charCodeAt(V)]<<10|a[S.charCodeAt(V+1)]<<4|a[S.charCodeAt(V+2)]>>2,j[N++]=E>>8&255,j[N++]=E&255),j}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var A,O=[],j=E;j<C;j+=3)A=(S[j]<<16&16711680)+(S[j+1]<<8&65280)+(S[j+2]&255),O.push(g(A));return O.join("")}function w(S){for(var E,C=S.length,A=C%3,O=[],j=16383,N=0,U=C-A;N<U;N+=j)O.push(v(S,N,N+j>U?U:N+j));return A===1?(E=S[C-1],O.push(r[E>>2]+r[E<<4&63]+"==")):A===2&&(E=(S[C-2]<<8)+S[C-1],O.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),O.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,C,A,O){var j,N,U=O*8-A-1,V=(1<<U)-1,J=V>>1,P=-7,Z=C?O-1:0,F=C?-1:1,ue=S[E+Z];for(Z+=F,j=ue&(1<<-P)-1,ue>>=-P,P+=U;P>0;j=j*256+S[E+Z],Z+=F,P-=8);for(N=j&(1<<-P)-1,j>>=-P,P+=A;P>0;N=N*256+S[E+Z],Z+=F,P-=8);if(j===0)j=1-J;else{if(j===V)return N?NaN:(ue?-1:1)*(1/0);N=N+Math.pow(2,A),j=j-J}return(ue?-1:1)*N*Math.pow(2,j-A)},_.write=function(S,E,C,A,O,j){var N,U,V,J=j*8-O-1,P=(1<<J)-1,Z=P>>1,F=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=A?0:j-1,le=A?1:-1,ne=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(U=isNaN(E)?1:0,N=P):(N=Math.floor(Math.log(E)/Math.LN2),E*(V=Math.pow(2,-N))<1&&(N--,V*=2),N+Z>=1?E+=F/V:E+=F*Math.pow(2,1-Z),E*V>=2&&(N++,V/=2),N+Z>=P?(U=0,N=P):N+Z>=1?(U=(E*V-1)*Math.pow(2,O),N=N+Z):(U=E*Math.pow(2,Z-1)*Math.pow(2,O),N=0));O>=8;S[C+ue]=U&255,ue+=le,U/=256,O-=8);for(N=N<<O|U,J+=O;J>0;S[C+ue]=N&255,ue+=le,N/=256,J-=8);S[C+ue-le]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=_,A=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=P,S.SlowBuffer=be,S.INSPECT_MAX_BYTES=50;const O=2147483647;S.kMaxLength=O;const{Uint8Array:j,ArrayBuffer:N,SharedArrayBuffer:U}=globalThis;P.TYPED_ARRAY_SUPPORT=V(),!P.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function V(){try{const q=new j(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,j.prototype),Object.setPrototypeOf(q,z),q.foo()===42}catch{return!1}}Object.defineProperty(P.prototype,"parent",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.buffer}}),Object.defineProperty(P.prototype,"offset",{enumerable:!0,get:function(){if(P.isBuffer(this))return this.byteOffset}});function J(q){if(q>O)throw new RangeError('The value "'+q+'" is invalid for option "size"');const z=new j(q);return Object.setPrototypeOf(z,P.prototype),z}function P(q,z,W){if(typeof q=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return le(q)}return Z(q,z,W)}P.poolSize=8192;function Z(q,z,W){if(typeof q=="string")return ne(q,z);if(N.isView(q))return te(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(ge(q,N)||q&&ge(q.buffer,N)||typeof U<"u"&&(ge(q,U)||q&&ge(q.buffer,U)))return G(q,z,W);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=q.valueOf&&q.valueOf();if(he!=null&&he!==q)return P.from(he,z,W);const Te=X(q);if(Te)return Te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return P.from(q[Symbol.toPrimitive]("string"),z,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}P.from=function(q,z,W){return Z(q,z,W)},Object.setPrototypeOf(P.prototype,j.prototype),Object.setPrototypeOf(P,j);function F(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function ue(q,z,W){return F(q),q<=0?J(q):z!==void 0?typeof W=="string"?J(q).fill(z,W):J(q).fill(z):J(q)}P.alloc=function(q,z,W){return ue(q,z,W)};function le(q){return F(q),J(q<0?0:ae(q)|0)}P.allocUnsafe=function(q){return le(q)},P.allocUnsafeSlow=function(q){return le(q)};function ne(q,z){if((typeof z!="string"||z==="")&&(z="utf8"),!P.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const W=we(q,z)|0;let he=J(W);const Te=he.write(q,z);return Te!==W&&(he=he.slice(0,Te)),he}function Q(q){const z=q.length<0?0:ae(q.length)|0,W=J(z);for(let he=0;he<z;he+=1)W[he]=q[he]&255;return W}function te(q){if(ge(q,j)){const z=new j(q);return G(z.buffer,z.byteOffset,z.byteLength)}return Q(q)}function G(q,z,W){if(z<0||q.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<z+(W||0))throw new RangeError('"length" is outside of buffer bounds');let he;return z===void 0&&W===void 0?he=new j(q):W===void 0?he=new j(q,z):he=new j(q,z,W),Object.setPrototypeOf(he,P.prototype),he}function X(q){if(P.isBuffer(q)){const z=ae(q.length)|0,W=J(z);return W.length===0||q.copy(W,0,0,z),W}if(q.length!==void 0)return typeof q.length!="number"||je(q.length)?J(0):Q(q);if(q.type==="Buffer"&&Array.isArray(q.data))return Q(q.data)}function ae(q){if(q>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return q|0}function be(q){return+q!=q&&(q=0),P.alloc(+q)}P.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==P.prototype},P.compare=function(z,W){if(ge(z,j)&&(z=P.from(z,z.offset,z.byteLength)),ge(W,j)&&(W=P.from(W,W.offset,W.byteLength)),!P.isBuffer(z)||!P.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===W)return 0;let he=z.length,Te=W.length;for(let Ve=0,gt=Math.min(he,Te);Ve<gt;++Ve)if(z[Ve]!==W[Ve]){he=z[Ve],Te=W[Ve];break}return he<Te?-1:Te<he?1:0},P.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},P.concat=function(z,W){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return P.alloc(0);let he;if(W===void 0)for(W=0,he=0;he<z.length;++he)W+=z[he].length;const Te=P.allocUnsafe(W);let Ve=0;for(he=0;he<z.length;++he){let gt=z[he];if(ge(gt,j))Ve+gt.length>Te.length?(P.isBuffer(gt)||(gt=P.from(gt)),gt.copy(Te,Ve)):j.prototype.set.call(Te,gt,Ve);else if(P.isBuffer(gt))gt.copy(Te,Ve);else throw new TypeError('"list" argument must be an Array of Buffers');Ve+=gt.length}return Te};function we(q,z){if(P.isBuffer(q))return q.length;if(N.isView(q)||ge(q,N))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);const W=q.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&W===0)return 0;let Te=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ft(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return Be(q).length;default:if(Te)return he?-1:ft(q).length;z=(""+z).toLowerCase(),Te=!0}}P.byteLength=we;function fe(q,z,W){let he=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,z>>>=0,W<=z))return"";for(q||(q="utf8");;)switch(q){case"hex":return _e(this,z,W);case"utf8":case"utf-8":return Se(this,z,W);case"ascii":return ie(this,z,W);case"latin1":case"binary":return Y(this,z,W);case"base64":return $(this,z,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,z,W);default:if(he)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),he=!0}}P.prototype._isBuffer=!0;function Me(q,z,W){const he=q[z];q[z]=q[W],q[W]=he}P.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<z;W+=2)Me(this,W,W+1);return this},P.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<z;W+=4)Me(this,W,W+3),Me(this,W+1,W+2);return this},P.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<z;W+=8)Me(this,W,W+7),Me(this,W+1,W+6),Me(this,W+2,W+5),Me(this,W+3,W+4);return this},P.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?Se(this,0,z):fe.apply(this,arguments)},P.prototype.toLocaleString=P.prototype.toString,P.prototype.equals=function(z){if(!P.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:P.compare(this,z)===0},P.prototype.inspect=function(){let z="";const W=S.INSPECT_MAX_BYTES;return z=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(z+=" ... "),"<Buffer "+z+">"},A&&(P.prototype[A]=P.prototype.inspect),P.prototype.compare=function(z,W,he,Te,Ve){if(ge(z,j)&&(z=P.from(z,z.offset,z.byteLength)),!P.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(W===void 0&&(W=0),he===void 0&&(he=z?z.length:0),Te===void 0&&(Te=0),Ve===void 0&&(Ve=this.length),W<0||he>z.length||Te<0||Ve>this.length)throw new RangeError("out of range index");if(Te>=Ve&&W>=he)return 0;if(Te>=Ve)return-1;if(W>=he)return 1;if(W>>>=0,he>>>=0,Te>>>=0,Ve>>>=0,this===z)return 0;let gt=Ve-Te,Gt=he-W;const ht=Math.min(gt,Gt),Ct=this.slice(Te,Ve),Ot=z.slice(W,he);for(let Zt=0;Zt<ht;++Zt)if(Ct[Zt]!==Ot[Zt]){gt=Ct[Zt],Gt=Ot[Zt];break}return gt<Gt?-1:Gt<gt?1:0};function Pe(q,z,W,he,Te){if(q.length===0)return-1;if(typeof W=="string"?(he=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,je(W)&&(W=Te?0:q.length-1),W<0&&(W=q.length+W),W>=q.length){if(Te)return-1;W=q.length-1}else if(W<0)if(Te)W=0;else return-1;if(typeof z=="string"&&(z=P.from(z,he)),P.isBuffer(z))return z.length===0?-1:Oe(q,z,W,he,Te);if(typeof z=="number")return z=z&255,typeof j.prototype.indexOf=="function"?Te?j.prototype.indexOf.call(q,z,W):j.prototype.lastIndexOf.call(q,z,W):Oe(q,[z],W,he,Te);throw new TypeError("val must be string, number or Buffer")}function Oe(q,z,W,he,Te){let Ve=1,gt=q.length,Gt=z.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(q.length<2||z.length<2)return-1;Ve=2,gt/=2,Gt/=2,W/=2}function ht(Ot,Zt){return Ve===1?Ot[Zt]:Ot.readUInt16BE(Zt*Ve)}let Ct;if(Te){let Ot=-1;for(Ct=W;Ct<gt;Ct++)if(ht(q,Ct)===ht(z,Ot===-1?0:Ct-Ot)){if(Ot===-1&&(Ot=Ct),Ct-Ot+1===Gt)return Ot*Ve}else Ot!==-1&&(Ct-=Ct-Ot),Ot=-1}else for(W+Gt>gt&&(W=gt-Gt),Ct=W;Ct>=0;Ct--){let Ot=!0;for(let Zt=0;Zt<Gt;Zt++)if(ht(q,Ct+Zt)!==ht(z,Zt)){Ot=!1;break}if(Ot)return Ct}return-1}P.prototype.includes=function(z,W,he){return this.indexOf(z,W,he)!==-1},P.prototype.indexOf=function(z,W,he){return Pe(this,z,W,he,!0)},P.prototype.lastIndexOf=function(z,W,he){return Pe(this,z,W,he,!1)};function Ae(q,z,W,he){W=Number(W)||0;const Te=q.length-W;he?(he=Number(he),he>Te&&(he=Te)):he=Te;const Ve=z.length;he>Ve/2&&(he=Ve/2);let gt;for(gt=0;gt<he;++gt){const Gt=parseInt(z.substr(gt*2,2),16);if(je(Gt))return gt;q[W+gt]=Gt}return gt}function $e(q,z,W,he){return st(ft(z,q.length-W),q,W,he)}function qe(q,z,W,he){return st(vt(z),q,W,he)}function Fe(q,z,W,he){return st(Be(z),q,W,he)}function Ne(q,z,W,he){return st(D(z,q.length-W),q,W,he)}P.prototype.write=function(z,W,he,Te){if(W===void 0)Te="utf8",he=this.length,W=0;else if(he===void 0&&typeof W=="string")Te=W,he=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(he)?(he=he>>>0,Te===void 0&&(Te="utf8")):(Te=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ve=this.length-W;if((he===void 0||he>Ve)&&(he=Ve),z.length>0&&(he<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Te||(Te="utf8");let gt=!1;for(;;)switch(Te){case"hex":return Ae(this,z,W,he);case"utf8":case"utf-8":return $e(this,z,W,he);case"ascii":case"latin1":case"binary":return qe(this,z,W,he);case"base64":return Fe(this,z,W,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,z,W,he);default:if(gt)throw new TypeError("Unknown encoding: "+Te);Te=(""+Te).toLowerCase(),gt=!0}},P.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(q,z,W){return z===0&&W===q.length?E.fromByteArray(q):E.fromByteArray(q.slice(z,W))}function Se(q,z,W){W=Math.min(q.length,W);const he=[];let Te=z;for(;Te<W;){const Ve=q[Te];let gt=null,Gt=Ve>239?4:Ve>223?3:Ve>191?2:1;if(Te+Gt<=W){let ht,Ct,Ot,Zt;switch(Gt){case 1:Ve<128&&(gt=Ve);break;case 2:ht=q[Te+1],(ht&192)===128&&(Zt=(Ve&31)<<6|ht&63,Zt>127&&(gt=Zt));break;case 3:ht=q[Te+1],Ct=q[Te+2],(ht&192)===128&&(Ct&192)===128&&(Zt=(Ve&15)<<12|(ht&63)<<6|Ct&63,Zt>2047&&(Zt<55296||Zt>57343)&&(gt=Zt));break;case 4:ht=q[Te+1],Ct=q[Te+2],Ot=q[Te+3],(ht&192)===128&&(Ct&192)===128&&(Ot&192)===128&&(Zt=(Ve&15)<<18|(ht&63)<<12|(Ct&63)<<6|Ot&63,Zt>65535&&Zt<1114112&&(gt=Zt))}}gt===null?(gt=65533,Gt=1):gt>65535&&(gt-=65536,he.push(gt>>>10&1023|55296),gt=56320|gt&1023),he.push(gt),Te+=Gt}return ce(he)}const ke=4096;function ce(q){const z=q.length;if(z<=ke)return String.fromCharCode.apply(String,q);let W="",he=0;for(;he<z;)W+=String.fromCharCode.apply(String,q.slice(he,he+=ke));return W}function ie(q,z,W){let he="";W=Math.min(q.length,W);for(let Te=z;Te<W;++Te)he+=String.fromCharCode(q[Te]&127);return he}function Y(q,z,W){let he="";W=Math.min(q.length,W);for(let Te=z;Te<W;++Te)he+=String.fromCharCode(q[Te]);return he}function _e(q,z,W){const he=q.length;(!z||z<0)&&(z=0),(!W||W<0||W>he)&&(W=he);let Te="";for(let Ve=z;Ve<W;++Ve)Te+=Je[q[Ve]];return Te}function De(q,z,W){const he=q.slice(z,W);let Te="";for(let Ve=0;Ve<he.length-1;Ve+=2)Te+=String.fromCharCode(he[Ve]+he[Ve+1]*256);return Te}P.prototype.slice=function(z,W){const he=this.length;z=~~z,W=W===void 0?he:~~W,z<0?(z+=he,z<0&&(z=0)):z>he&&(z=he),W<0?(W+=he,W<0&&(W=0)):W>he&&(W=he),W<z&&(W=z);const Te=this.subarray(z,W);return Object.setPrototypeOf(Te,P.prototype),Te};function Ee(q,z,W){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+z>W)throw new RangeError("Trying to access beyond buffer length")}P.prototype.readUintLE=P.prototype.readUIntLE=function(z,W,he){z=z>>>0,W=W>>>0,he||Ee(z,W,this.length);let Te=this[z],Ve=1,gt=0;for(;++gt<W&&(Ve*=256);)Te+=this[z+gt]*Ve;return Te},P.prototype.readUintBE=P.prototype.readUIntBE=function(z,W,he){z=z>>>0,W=W>>>0,he||Ee(z,W,this.length);let Te=this[z+--W],Ve=1;for(;W>0&&(Ve*=256);)Te+=this[z+--W]*Ve;return Te},P.prototype.readUint8=P.prototype.readUInt8=function(z,W){return z=z>>>0,W||Ee(z,1,this.length),this[z]},P.prototype.readUint16LE=P.prototype.readUInt16LE=function(z,W){return z=z>>>0,W||Ee(z,2,this.length),this[z]|this[z+1]<<8},P.prototype.readUint16BE=P.prototype.readUInt16BE=function(z,W){return z=z>>>0,W||Ee(z,2,this.length),this[z]<<8|this[z+1]},P.prototype.readUint32LE=P.prototype.readUInt32LE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},P.prototype.readUint32BE=P.prototype.readUInt32BE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},P.prototype.readBigUInt64LE=It(function(z){z=z>>>0,Re(z,"offset");const W=this[z],he=this[z+7];(W===void 0||he===void 0)&&ye(z,this.length-8);const Te=W+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,Ve=this[++z]+this[++z]*2**8+this[++z]*2**16+he*2**24;return BigInt(Te)+(BigInt(Ve)<<BigInt(32))}),P.prototype.readBigUInt64BE=It(function(z){z=z>>>0,Re(z,"offset");const W=this[z],he=this[z+7];(W===void 0||he===void 0)&&ye(z,this.length-8);const Te=W*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],Ve=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+he;return(BigInt(Te)<<BigInt(32))+BigInt(Ve)}),P.prototype.readIntLE=function(z,W,he){z=z>>>0,W=W>>>0,he||Ee(z,W,this.length);let Te=this[z],Ve=1,gt=0;for(;++gt<W&&(Ve*=256);)Te+=this[z+gt]*Ve;return Ve*=128,Te>=Ve&&(Te-=Math.pow(2,8*W)),Te},P.prototype.readIntBE=function(z,W,he){z=z>>>0,W=W>>>0,he||Ee(z,W,this.length);let Te=W,Ve=1,gt=this[z+--Te];for(;Te>0&&(Ve*=256);)gt+=this[z+--Te]*Ve;return Ve*=128,gt>=Ve&&(gt-=Math.pow(2,8*W)),gt},P.prototype.readInt8=function(z,W){return z=z>>>0,W||Ee(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},P.prototype.readInt16LE=function(z,W){z=z>>>0,W||Ee(z,2,this.length);const he=this[z]|this[z+1]<<8;return he&32768?he|4294901760:he},P.prototype.readInt16BE=function(z,W){z=z>>>0,W||Ee(z,2,this.length);const he=this[z+1]|this[z]<<8;return he&32768?he|4294901760:he},P.prototype.readInt32LE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},P.prototype.readInt32BE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},P.prototype.readBigInt64LE=It(function(z){z=z>>>0,Re(z,"offset");const W=this[z],he=this[z+7];(W===void 0||he===void 0)&&ye(z,this.length-8);const Te=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(he<<24);return(BigInt(Te)<<BigInt(32))+BigInt(W+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),P.prototype.readBigInt64BE=It(function(z){z=z>>>0,Re(z,"offset");const W=this[z],he=this[z+7];(W===void 0||he===void 0)&&ye(z,this.length-8);const Te=(W<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(Te)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+he)}),P.prototype.readFloatLE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),C.read(this,z,!0,23,4)},P.prototype.readFloatBE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),C.read(this,z,!1,23,4)},P.prototype.readDoubleLE=function(z,W){return z=z>>>0,W||Ee(z,8,this.length),C.read(this,z,!0,52,8)},P.prototype.readDoubleBE=function(z,W){return z=z>>>0,W||Ee(z,8,this.length),C.read(this,z,!1,52,8)};function Ze(q,z,W,he,Te,Ve){if(!P.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Te||z<Ve)throw new RangeError('"value" argument is out of bounds');if(W+he>q.length)throw new RangeError("Index out of range")}P.prototype.writeUintLE=P.prototype.writeUIntLE=function(z,W,he,Te){if(z=+z,W=W>>>0,he=he>>>0,!Te){const Gt=Math.pow(2,8*he)-1;Ze(this,z,W,he,Gt,0)}let Ve=1,gt=0;for(this[W]=z&255;++gt<he&&(Ve*=256);)this[W+gt]=z/Ve&255;return W+he},P.prototype.writeUintBE=P.prototype.writeUIntBE=function(z,W,he,Te){if(z=+z,W=W>>>0,he=he>>>0,!Te){const Gt=Math.pow(2,8*he)-1;Ze(this,z,W,he,Gt,0)}let Ve=he-1,gt=1;for(this[W+Ve]=z&255;--Ve>=0&&(gt*=256);)this[W+Ve]=z/gt&255;return W+he},P.prototype.writeUint8=P.prototype.writeUInt8=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,1,255,0),this[W]=z&255,W+1},P.prototype.writeUint16LE=P.prototype.writeUInt16LE=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,2,65535,0),this[W]=z&255,this[W+1]=z>>>8,W+2},P.prototype.writeUint16BE=P.prototype.writeUInt16BE=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,2,65535,0),this[W]=z>>>8,this[W+1]=z&255,W+2},P.prototype.writeUint32LE=P.prototype.writeUInt32LE=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,4,4294967295,0),this[W+3]=z>>>24,this[W+2]=z>>>16,this[W+1]=z>>>8,this[W]=z&255,W+4},P.prototype.writeUint32BE=P.prototype.writeUInt32BE=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,4,4294967295,0),this[W]=z>>>24,this[W+1]=z>>>16,this[W+2]=z>>>8,this[W+3]=z&255,W+4};function Et(q,z,W,he,Te){de(z,he,Te,q,W,7);let Ve=Number(z&BigInt(4294967295));q[W++]=Ve,Ve=Ve>>8,q[W++]=Ve,Ve=Ve>>8,q[W++]=Ve,Ve=Ve>>8,q[W++]=Ve;let gt=Number(z>>BigInt(32)&BigInt(4294967295));return q[W++]=gt,gt=gt>>8,q[W++]=gt,gt=gt>>8,q[W++]=gt,gt=gt>>8,q[W++]=gt,W}function at(q,z,W,he,Te){de(z,he,Te,q,W,7);let Ve=Number(z&BigInt(4294967295));q[W+7]=Ve,Ve=Ve>>8,q[W+6]=Ve,Ve=Ve>>8,q[W+5]=Ve,Ve=Ve>>8,q[W+4]=Ve;let gt=Number(z>>BigInt(32)&BigInt(4294967295));return q[W+3]=gt,gt=gt>>8,q[W+2]=gt,gt=gt>>8,q[W+1]=gt,gt=gt>>8,q[W]=gt,W+8}P.prototype.writeBigUInt64LE=It(function(z,W=0){return Et(this,z,W,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeBigUInt64BE=It(function(z,W=0){return at(this,z,W,BigInt(0),BigInt("0xffffffffffffffff"))}),P.prototype.writeIntLE=function(z,W,he,Te){if(z=+z,W=W>>>0,!Te){const ht=Math.pow(2,8*he-1);Ze(this,z,W,he,ht-1,-ht)}let Ve=0,gt=1,Gt=0;for(this[W]=z&255;++Ve<he&&(gt*=256);)z<0&&Gt===0&&this[W+Ve-1]!==0&&(Gt=1),this[W+Ve]=(z/gt>>0)-Gt&255;return W+he},P.prototype.writeIntBE=function(z,W,he,Te){if(z=+z,W=W>>>0,!Te){const ht=Math.pow(2,8*he-1);Ze(this,z,W,he,ht-1,-ht)}let Ve=he-1,gt=1,Gt=0;for(this[W+Ve]=z&255;--Ve>=0&&(gt*=256);)z<0&&Gt===0&&this[W+Ve+1]!==0&&(Gt=1),this[W+Ve]=(z/gt>>0)-Gt&255;return W+he},P.prototype.writeInt8=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,1,127,-128),z<0&&(z=255+z+1),this[W]=z&255,W+1},P.prototype.writeInt16LE=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,2,32767,-32768),this[W]=z&255,this[W+1]=z>>>8,W+2},P.prototype.writeInt16BE=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,2,32767,-32768),this[W]=z>>>8,this[W+1]=z&255,W+2},P.prototype.writeInt32LE=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,4,2147483647,-2147483648),this[W]=z&255,this[W+1]=z>>>8,this[W+2]=z>>>16,this[W+3]=z>>>24,W+4},P.prototype.writeInt32BE=function(z,W,he){return z=+z,W=W>>>0,he||Ze(this,z,W,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[W]=z>>>24,this[W+1]=z>>>16,this[W+2]=z>>>8,this[W+3]=z&255,W+4},P.prototype.writeBigInt64LE=It(function(z,W=0){return Et(this,z,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),P.prototype.writeBigInt64BE=It(function(z,W=0){return at(this,z,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(q,z,W,he,Te,Ve){if(W+he>q.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Nt(q,z,W,he,Te){return z=+z,W=W>>>0,Te||_t(q,z,W,4),C.write(q,z,W,he,23,4),W+4}P.prototype.writeFloatLE=function(z,W,he){return Nt(this,z,W,!0,he)},P.prototype.writeFloatBE=function(z,W,he){return Nt(this,z,W,!1,he)};function Rt(q,z,W,he,Te){return z=+z,W=W>>>0,Te||_t(q,z,W,8),C.write(q,z,W,he,52,8),W+8}P.prototype.writeDoubleLE=function(z,W,he){return Rt(this,z,W,!0,he)},P.prototype.writeDoubleBE=function(z,W,he){return Rt(this,z,W,!1,he)},P.prototype.copy=function(z,W,he,Te){if(!P.isBuffer(z))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Te&&Te!==0&&(Te=this.length),W>=z.length&&(W=z.length),W||(W=0),Te>0&&Te<he&&(Te=he),Te===he||z.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Te<0)throw new RangeError("sourceEnd out of bounds");Te>this.length&&(Te=this.length),z.length-W<Te-he&&(Te=z.length-W+he);const Ve=Te-he;return this===z&&typeof j.prototype.copyWithin=="function"?this.copyWithin(W,he,Te):j.prototype.set.call(z,this.subarray(he,Te),W),Ve},P.prototype.fill=function(z,W,he,Te){if(typeof z=="string"){if(typeof W=="string"?(Te=W,W=0,he=this.length):typeof he=="string"&&(Te=he,he=this.length),Te!==void 0&&typeof Te!="string")throw new TypeError("encoding must be a string");if(typeof Te=="string"&&!P.isEncoding(Te))throw new TypeError("Unknown encoding: "+Te);if(z.length===1){const gt=z.charCodeAt(0);(Te==="utf8"&&gt<128||Te==="latin1")&&(z=gt)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(W<0||this.length<W||this.length<he)throw new RangeError("Out of range index");if(he<=W)return this;W=W>>>0,he=he===void 0?this.length:he>>>0,z||(z=0);let Ve;if(typeof z=="number")for(Ve=W;Ve<he;++Ve)this[Ve]=z;else{const gt=P.isBuffer(z)?z:P.from(z,Te),Gt=gt.length;if(Gt===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(Ve=0;Ve<he-W;++Ve)this[Ve+W]=gt[Ve%Gt]}return this};const Kt={};function pe(q,z,W){Kt[q]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(Te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Te,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(q){return q?`${q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(q,z){return`The "${q}" argument must be of type number. Received type ${typeof z}`},TypeError),pe("ERR_OUT_OF_RANGE",function(q,z,W){let he=`The value of "${q}" is out of range.`,Te=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Te=R(String(W)):typeof W=="bigint"&&(Te=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Te=R(Te)),Te+="n"),he+=` It must be ${z}. Received ${Te}`,he},RangeError);function R(q){let z="",W=q.length;const he=q[0]==="-"?1:0;for(;W>=he+4;W-=3)z=`_${q.slice(W-3,W)}${z}`;return`${q.slice(0,W)}${z}`}function H(q,z,W){Re(z,"offset"),(q[z]===void 0||q[z+W]===void 0)&&ye(z,q.length-(W+1))}function de(q,z,W,he,Te,Ve){if(q>W||q<z){const gt=typeof z=="bigint"?"n":"";let Gt;throw z===0||z===BigInt(0)?Gt=`>= 0${gt} and < 2${gt} ** ${(Ve+1)*8}${gt}`:Gt=`>= -(2${gt} ** ${(Ve+1)*8-1}${gt}) and < 2 ** ${(Ve+1)*8-1}${gt}`,new Kt.ERR_OUT_OF_RANGE("value",Gt,q)}H(he,Te,Ve)}function Re(q,z){if(typeof q!="number")throw new Kt.ERR_INVALID_ARG_TYPE(z,"number",q)}function ye(q,z,W){throw Math.floor(q)!==q?(Re(q,W),new Kt.ERR_OUT_OF_RANGE("offset","an integer",q)):z<0?new Kt.ERR_BUFFER_OUT_OF_BOUNDS:new Kt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${z}`,q)}const Ce=/[^+/0-9A-Za-z-_]/g;function oe(q){if(q=q.split("=")[0],q=q.trim().replace(Ce,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function ft(q,z){z=z||1/0;let W;const he=q.length;let Te=null;const Ve=[];for(let gt=0;gt<he;++gt){if(W=q.charCodeAt(gt),W>55295&&W<57344){if(!Te){if(W>56319){(z-=3)>-1&&Ve.push(239,191,189);continue}else if(gt+1===he){(z-=3)>-1&&Ve.push(239,191,189);continue}Te=W;continue}if(W<56320){(z-=3)>-1&&Ve.push(239,191,189),Te=W;continue}W=(Te-55296<<10|W-56320)+65536}else Te&&(z-=3)>-1&&Ve.push(239,191,189);if(Te=null,W<128){if((z-=1)<0)break;Ve.push(W)}else if(W<2048){if((z-=2)<0)break;Ve.push(W>>6|192,W&63|128)}else if(W<65536){if((z-=3)<0)break;Ve.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((z-=4)<0)break;Ve.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return Ve}function vt(q){const z=[];for(let W=0;W<q.length;++W)z.push(q.charCodeAt(W)&255);return z}function D(q,z){let W,he,Te;const Ve=[];for(let gt=0;gt<q.length&&!((z-=2)<0);++gt)W=q.charCodeAt(gt),he=W>>8,Te=W%256,Ve.push(Te),Ve.push(he);return Ve}function Be(q){return E.toByteArray(oe(q))}function st(q,z,W,he){let Te;for(Te=0;Te<he&&!(Te+W>=z.length||Te>=q.length);++Te)z[Te+W]=q[Te];return Te}function ge(q,z){return q instanceof z||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===z.name}function je(q){return q!==q}const Je=function(){const q="0123456789abcdef",z=new Array(256);for(let W=0;W<16;++W){const he=W*16;for(let Te=0;Te<16;++Te)z[he+Te]=q[W]+q[Te]}return z}();function It(q){return typeof BigInt>"u"?me:q}function me(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(dx)),dx}var fx,uN;function Ur(){if(uN)return fx;uN=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return fx={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},fx}var hx={exports:{}},px,cN;function d8(){return cN||(cN=1,px={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),px}var mx,dN;function pi(){if(dN)return mx;dN=1;const{format:e,inspect:t}=d8(),{AggregateError:n}=Ur(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function c(_,x){if(!_)throw new u.ERR_INTERNAL_ASSERTION(x)}function f(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return c(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return c(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function m(_,x,S){S||(S=Error);class E extends S{constructor(...A){super(h(_,x,A))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,u[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function v(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class w extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(_,x,S)=>{c(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],A=[],O=[];for(const N of x)c(typeof N=="string","All expected entries have to be of type string"),i.includes(N)?C.push(N.toLowerCase()):o.test(N)?A.push(N):(c(N!=="object",'The value "object" should be written as "Object"'),O.push(N));if(A.length>0){const N=C.indexOf("object");N!==-1&&(C.splice(C,N,1),A.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const N=C.pop();E+=`one of type ${C.join(", ")}, or ${N}`}}(A.length>0||O.length>0)&&(E+=" or ")}if(A.length>0){switch(A.length){case 1:E+=`an instance of ${A[0]}`;break;case 2:E+=`an instance of ${A[0]} or ${A[1]}`;break;default:{const N=A.pop();E+=`an instance of ${A.join(", ")}, or ${N}`}}O.length>0&&(E+=" or ")}switch(O.length){case 0:break;case 1:O[0].toLowerCase()!==O[0]&&(E+="an "),E+=`${O[0]}`;break;case 2:E+=`one of ${O[0]} or ${O[1]}`;break;default:{const N=O.pop();E+=`one of ${O.join(", ")}, or ${N}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var j;if((j=S.constructor)!==null&&j!==void 0&&j.name)E+=`. Received an instance of ${S.constructor.name}`;else{const N=t(S,{depth:-1});E+=`. Received ${N}`}}else{let N=t(S,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),E+=`. Received type ${typeof S} (${N})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(..._)=>{c(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(_,x,S)=>{c(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=f(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=f(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),mx={AbortError:w,aggregateTwoErrors:g(v),hideStackFrames:g,codes:u},mx}var Hp={exports:{}},fN;function Om(){if(fN)return Hp.exports;fN=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Hp.exports=e,Hp.exports.AbortSignal=t,Hp.exports.default=e,Hp.exports}var Ty={exports:{}},hN;function Kv(){if(hN)return Ty.exports;hN=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(A,O,j){return Function.prototype.apply.call(A,O,j)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:n=function(A){return Object.getOwnPropertyNames(A)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(A){return A!==A};function i(){i.init.call(this)}Ty.exports=i,Ty.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(A){for(var O=[],j=1;j<arguments.length;j++)O.push(arguments[j]);var N=A==="error",U=this._events;if(U!==void 0)N=N&&U.error===void 0;else if(!N)return!1;if(N){var V;if(O.length>0&&(V=O[0]),V instanceof Error)throw V;var J=new Error("Unhandled error."+(V?" ("+V.message+")":""));throw J.context=V,J}var P=U[A];if(P===void 0)return!1;if(typeof P=="function")t(P,this,O);else for(var Z=P.length,F=v(P,Z),j=0;j<Z;++j)t(F[j],this,O);return!0};function c(C,A,O,j){var N,U,V;if(s(O),U=C._events,U===void 0?(U=C._events=Object.create(null),C._eventsCount=0):(U.newListener!==void 0&&(C.emit("newListener",A,O.listener?O.listener:O),U=C._events),V=U[A]),V===void 0)V=U[A]=O,++C._eventsCount;else if(typeof V=="function"?V=U[A]=j?[O,V]:[V,O]:j?V.unshift(O):V.push(O),N=u(C),N>0&&V.length>N&&!V.warned){V.warned=!0;var J=new Error("Possible EventEmitter memory leak detected. "+V.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");J.name="MaxListenersExceededWarning",J.emitter=C,J.type=A,J.count=V.length,r(J)}return C}i.prototype.addListener=function(A,O){return c(this,A,O,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(A,O){return c(this,A,O,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,A,O){var j={fired:!1,wrapFn:void 0,target:C,type:A,listener:O},N=f.bind(j);return N.listener=O,j.wrapFn=N,N}i.prototype.once=function(A,O){return s(O),this.on(A,h(this,A,O)),this},i.prototype.prependOnceListener=function(A,O){return s(O),this.prependListener(A,h(this,A,O)),this},i.prototype.removeListener=function(A,O){var j,N,U,V,J;if(s(O),N=this._events,N===void 0)return this;if(j=N[A],j===void 0)return this;if(j===O||j.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete N[A],N.removeListener&&this.emit("removeListener",A,j.listener||O));else if(typeof j!="function"){for(U=-1,V=j.length-1;V>=0;V--)if(j[V]===O||j[V].listener===O){J=j[V].listener,U=V;break}if(U<0)return this;U===0?j.shift():w(j,U),j.length===1&&(N[A]=j[0]),N.removeListener!==void 0&&this.emit("removeListener",A,J||O)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(A){var O,j,N;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[A]),this;if(arguments.length===0){var U=Object.keys(j),V;for(N=0;N<U.length;++N)V=U[N],V!=="removeListener"&&this.removeAllListeners(V);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=j[A],typeof O=="function")this.removeListener(A,O);else if(O!==void 0)for(N=O.length-1;N>=0;N--)this.removeListener(A,O[N]);return this};function m(C,A,O){var j=C._events;if(j===void 0)return[];var N=j[A];return N===void 0?[]:typeof N=="function"?O?[N.listener||N]:[N]:O?_(N):v(N,N.length)}i.prototype.listeners=function(A){return m(this,A,!0)},i.prototype.rawListeners=function(A){return m(this,A,!1)},i.listenerCount=function(C,A){return typeof C.listenerCount=="function"?C.listenerCount(A):g.call(C,A)},i.prototype.listenerCount=g;function g(C){var A=this._events;if(A!==void 0){var O=A[C];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,A){for(var O=new Array(A),j=0;j<A;++j)O[j]=C[j];return O}function w(C,A){for(;A+1<C.length;A++)C[A]=C[A+1];C.pop()}function _(C){for(var A=new Array(C.length),O=0;O<A.length;++O)A[O]=C[O].listener||C[O];return A}function x(C,A){return new Promise(function(O,j){function N(V){C.removeListener(A,U),j(V)}function U(){typeof C.removeListener=="function"&&C.removeListener("error",N),O([].slice.call(arguments))}E(C,A,U,{once:!0}),A!=="error"&&S(C,N,{once:!0})})}function S(C,A,O){typeof C.on=="function"&&E(C,"error",A,O)}function E(C,A,O,j){if(typeof C.on=="function")j.once?C.once(A,O):C.on(A,O);else if(typeof C.addEventListener=="function")C.addEventListener(A,function N(U){j.once&&C.removeEventListener(A,N),O(U)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return Ty.exports}var pN;function ki(){return pN||(pN=1,function(e){const t=tc(),{format:n,inspect:r}=d8(),{codes:{ERR_INVALID_ARG_TYPE:a}}=pi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Ur(),u=globalThis.AbortSignal||Om().AbortSignal,c=globalThis.AbortController||Om().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(w,_)=>{if(w!==void 0&&(w===null||typeof w!="object"||!("aborted"in w)))throw new a(_,"AbortSignal",w)},v=(w,_)=>{if(typeof w!="function")throw new a(_,"Function",w)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(w){let _=!1;return function(...x){_||(_=!0,w.apply(this,x))}},createDeferredPromise:function(){let w,_;return{promise:new Promise((S,E)=>{w=S,_=E}),resolve:w,reject:_}},promisify(w){return new Promise((_,x)=>{w((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(w){return w instanceof f},isArrayBufferView(w){return ArrayBuffer.isView(w)}},isBlob:m,deprecate(w,_){return w},addAbortListener:Kv().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),v(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:u.any||function(_){if(_.length===1)return _[0];const x=new c,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(hx)),hx.exports}var Ry={},gx,mN;function _0(){if(mN)return gx;mN=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=Ur(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:w,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=pi(),{normalizeEncoding:C}=ki(),{isAsyncFunction:A,isArrayBufferView:O}=ki().types,j={};function N(Y){return Y===(Y|0)}function U(Y){return Y===Y>>>0}const V=/^[0-7]+$/,J="must be a 32-bit unsigned integer or an octal string";function P(Y,_e,De){if(typeof Y>"u"&&(Y=De),typeof Y=="string"){if(f(V,Y)===null)throw new x(_e,Y,J);Y=u(Y,8)}return ue(Y,_e),Y}const Z=v((Y,_e,De=s,Ee=o)=>{if(typeof Y!="number")throw new _(_e,"number",Y);if(!a(Y))throw new S(_e,"an integer",Y);if(Y<De||Y>Ee)throw new S(_e,`>= ${De} && <= ${Ee}`,Y)}),F=v((Y,_e,De=-2147483648,Ee=2147483647)=>{if(typeof Y!="number")throw new _(_e,"number",Y);if(!a(Y))throw new S(_e,"an integer",Y);if(Y<De||Y>Ee)throw new S(_e,`>= ${De} && <= ${Ee}`,Y)}),ue=v((Y,_e,De=!1)=>{if(typeof Y!="number")throw new _(_e,"number",Y);if(!a(Y))throw new S(_e,"an integer",Y);const Ee=De?1:0,Ze=4294967295;if(Y<Ee||Y>Ze)throw new S(_e,`>= ${Ee} && <= ${Ze}`,Y)});function le(Y,_e){if(typeof Y!="string")throw new _(_e,"string",Y)}function ne(Y,_e,De=void 0,Ee){if(typeof Y!="number")throw new _(_e,"number",Y);if(De!=null&&Y<De||Ee!=null&&Y>Ee||(De!=null||Ee!=null)&&i(Y))throw new S(_e,`${De!=null?`>= ${De}`:""}${De!=null&&Ee!=null?" && ":""}${Ee!=null?`<= ${Ee}`:""}`,Y)}const Q=v((Y,_e,De)=>{if(!t(De,Y)){const Ze="must be one of: "+n(r(De,Et=>typeof Et=="string"?`'${Et}'`:h(Et)),", ");throw new x(_e,Y,Ze)}});function te(Y,_e){if(typeof Y!="boolean")throw new _(_e,"boolean",Y)}function G(Y,_e,De){return Y==null||!c(Y,_e)?De:Y[_e]}const X=v((Y,_e,De=null)=>{const Ee=G(De,"allowArray",!1),Ze=G(De,"allowFunction",!1);if(!G(De,"nullable",!1)&&Y===null||!Ee&&e(Y)||typeof Y!="object"&&(!Ze||typeof Y!="function"))throw new _(_e,"Object",Y)}),ae=v((Y,_e)=>{if(Y!=null&&typeof Y!="object"&&typeof Y!="function")throw new _(_e,"a dictionary",Y)}),be=v((Y,_e,De=0)=>{if(!e(Y))throw new _(_e,"Array",Y);if(Y.length<De){const Ee=`must be longer than ${De}`;throw new x(_e,Y,Ee)}});function we(Y,_e){be(Y,_e);for(let De=0;De<Y.length;De++)le(Y[De],`${_e}[${De}]`)}function fe(Y,_e){be(Y,_e);for(let De=0;De<Y.length;De++)te(Y[De],`${_e}[${De}]`)}function Me(Y,_e){be(Y,_e);for(let De=0;De<Y.length;De++){const Ee=Y[De],Ze=`${_e}[${De}]`;if(Ee==null)throw new _(Ze,"AbortSignal",Ee);qe(Ee,Ze)}}function Pe(Y,_e="signal"){if(le(Y,_e),j[Y]===void 0)throw j[m(Y)]!==void 0?new E(Y+" (signals must use all capital letters)"):new E(Y)}const Oe=v((Y,_e="buffer")=>{if(!O(Y))throw new _(_e,["Buffer","TypedArray","DataView"],Y)});function Ae(Y,_e){const De=C(_e),Ee=Y.length;if(De==="hex"&&Ee%2!==0)throw new x("encoding",_e,`is invalid for data of length ${Ee}`)}function $e(Y,_e="Port",De=!0){if(typeof Y!="number"&&typeof Y!="string"||typeof Y=="string"&&g(Y).length===0||+Y!==+Y>>>0||Y>65535||Y===0&&!De)throw new w(_e,Y,De);return Y|0}const qe=v((Y,_e)=>{if(Y!==void 0&&(Y===null||typeof Y!="object"||!("aborted"in Y)))throw new _(_e,"AbortSignal",Y)}),Fe=v((Y,_e)=>{if(typeof Y!="function")throw new _(_e,"Function",Y)}),Ne=v((Y,_e)=>{if(typeof Y!="function"||A(Y))throw new _(_e,"Function",Y)}),$=v((Y,_e)=>{if(Y!==void 0)throw new _(_e,"undefined",Y)});function Se(Y,_e,De){if(!t(De,Y))throw new _(_e,`('${n(De,"|")}')`,Y)}const ke=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(Y,_e){if(typeof Y>"u"||!f(ke,Y))throw new x(_e,Y,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(Y){if(typeof Y=="string")return ce(Y,"hints"),Y;if(e(Y)){const _e=Y.length;let De="";if(_e===0)return De;for(let Ee=0;Ee<_e;Ee++){const Ze=Y[Ee];ce(Ze,"hints"),De+=Ze,Ee!==_e-1&&(De+=", ")}return De}throw new x("hints",Y,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return gx={isInt32:N,isUint32:U,parseFileMode:P,validateArray:be,validateStringArray:we,validateBooleanArray:fe,validateAbortSignalArray:Me,validateBoolean:te,validateBuffer:Oe,validateDictionary:ae,validateEncoding:Ae,validateFunction:Fe,validateInt32:F,validateInteger:Z,validateNumber:ne,validateObject:X,validateOneOf:Q,validatePlainFunction:Ne,validatePort:$e,validateSignalName:Pe,validateString:le,validateUint32:ue,validateUndefined:$,validateUnion:Se,validateAbortSignal:qe,validateLinkHeaderValue:ie},gx}var Ny={exports:{}},yx={},gN;function bd(){return gN||(gN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function u(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var f=[],h=!1,m,g=-1;function v(){!h||!m||(h=!1,m.length?f=m.concat(f):g=-1,f.length&&w())}function w(){if(!h){var C=u(v);h=!0;for(var A=f.length;A;){for(m=f,f=[];++g<A;)m&&m[g].run();g=-1,A=f.length}m=null,h=!1,c(C)}}r.nextTick=function(C){var A=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)A[O-1]=arguments[O];f.push(new _(C,A)),f.length===1&&!h&&u(w)};function _(C,A){this.fun=C,this.array=A}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(yx)),yx}var bx,yN;function Ll(){if(yN)return bx;yN=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Ur(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function f(G,X=!1){var ae;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!X||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((ae=G._readableState)===null||ae===void 0?void 0:ae.readable)!==!1)&&(!G._writableState||G._readableState))}function h(G){var X;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((X=G._writableState)===null||X===void 0?void 0:X.writable)!==!1))}function m(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function g(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function v(G){return!!(G&&!g(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function w(G){return!!(G&&!g(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function _(G){return!!(G&&!g(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function x(G){return v(G)||w(G)||_(G)}function S(G,X){return G==null?!1:X===!0?typeof G[e]=="function":X===!1?typeof G[t]=="function":typeof G[e]=="function"||typeof G[t]=="function"}function E(G){if(!g(G))return null;const X=G._writableState,ae=G._readableState,be=X||ae;return!!(G.destroyed||G[r]||be!=null&&be.destroyed)}function C(G){if(!h(G))return null;if(G.writableEnded===!0)return!0;const X=G._writableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function A(G,X){if(!h(G))return null;if(G.writableFinished===!0)return!0;const ae=G._writableState;return ae!=null&&ae.errored?!1:typeof(ae==null?void 0:ae.finished)!="boolean"?null:!!(ae.finished||X===!1&&ae.ended===!0&&ae.length===0)}function O(G){if(!f(G))return null;if(G.readableEnded===!0)return!0;const X=G._readableState;return!X||X.errored?!1:typeof(X==null?void 0:X.ended)!="boolean"?null:X.ended}function j(G,X){if(!f(G))return null;const ae=G._readableState;return ae!=null&&ae.errored?!1:typeof(ae==null?void 0:ae.endEmitted)!="boolean"?null:!!(ae.endEmitted||X===!1&&ae.ended===!0&&ae.length===0)}function N(G){return G&&G[i]!=null?G[i]:typeof(G==null?void 0:G.readable)!="boolean"?null:E(G)?!1:f(G)&&G.readable&&!j(G)}function U(G){return G&&G[o]!=null?G[o]:typeof(G==null?void 0:G.writable)!="boolean"?null:E(G)?!1:h(G)&&G.writable&&!C(G)}function V(G,X){return g(G)?E(G)?!0:!((X==null?void 0:X.readable)!==!1&&N(G)||(X==null?void 0:X.writable)!==!1&&U(G)):null}function J(G){var X,ae;return g(G)?G.writableErrored?G.writableErrored:(X=(ae=G._writableState)===null||ae===void 0?void 0:ae.errored)!==null&&X!==void 0?X:null:null}function P(G){var X,ae;return g(G)?G.readableErrored?G.readableErrored:(X=(ae=G._readableState)===null||ae===void 0?void 0:ae.errored)!==null&&X!==void 0?X:null:null}function Z(G){if(!g(G))return null;if(typeof G.closed=="boolean")return G.closed;const X=G._writableState,ae=G._readableState;return typeof(X==null?void 0:X.closed)=="boolean"||typeof(ae==null?void 0:ae.closed)=="boolean"?(X==null?void 0:X.closed)||(ae==null?void 0:ae.closed):typeof G._closed=="boolean"&&F(G)?G._closed:null}function F(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function ue(G){return typeof G._sent100=="boolean"&&F(G)}function le(G){var X;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((X=G.req)===null||X===void 0?void 0:X.upgradeOrConnect)===void 0}function ne(G){if(!g(G))return null;const X=G._writableState,ae=G._readableState,be=X||ae;return!be&&ue(G)||!!(be&&be.autoDestroy&&be.emitClose&&be.closed===!1)}function Q(G){var X;return!!(G&&((X=G[s])!==null&&X!==void 0?X:G.readableDidRead||G.readableAborted))}function te(G){var X,ae,be,we,fe,Me,Pe,Oe,Ae,$e;return!!(G&&((X=(ae=(be=(we=(fe=(Me=G[a])!==null&&Me!==void 0?Me:G.readableErrored)!==null&&fe!==void 0?fe:G.writableErrored)!==null&&we!==void 0?we:(Pe=G._readableState)===null||Pe===void 0?void 0:Pe.errorEmitted)!==null&&be!==void 0?be:(Oe=G._writableState)===null||Oe===void 0?void 0:Oe.errorEmitted)!==null&&ae!==void 0?ae:(Ae=G._readableState)===null||Ae===void 0?void 0:Ae.errored)!==null&&X!==void 0?X:!(($e=G._writableState)===null||$e===void 0)&&$e.errored))}return bx={isDestroyed:E,kIsDestroyed:r,isDisturbed:Q,kIsDisturbed:s,isErrored:te,kIsErrored:a,isReadable:N,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:o,isClosed:Z,isDuplexNodeStream:m,isFinished:V,isIterable:S,isReadableNodeStream:f,isReadableStream:v,isReadableEnded:O,isReadableFinished:j,isReadableErrored:P,isNodeStream:g,isWebStream:x,isWritable:U,isWritableNodeStream:h,isWritableStream:w,isWritableEnded:C,isWritableFinished:A,isWritableErrored:J,isServerRequest:le,isServerResponse:ue,willEmitClose:ne,isTransformStream:_},bx}var bN;function nc(){if(bN)return Ny.exports;bN=1;const e=bd(),{AbortError:t,codes:n}=pi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=ki(),{validateAbortSignal:s,validateFunction:u,validateObject:c,validateBoolean:f}=_0(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=Ur(),{isClosed:v,isReadable:w,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:A,isWritableStream:O,isWritableFinished:j,isWritableErrored:N,isNodeStream:U,willEmitClose:V,kIsClosedPromise:J}=Ll();let P;function Z(Q){return Q.setHeader&&typeof Q.abort=="function"}const F=()=>{};function ue(Q,te,G){var X,ae;if(arguments.length===2?(G=te,te=i):te==null?te=i:c(te,"options"),u(G,"callback"),s(te.signal,"options.signal"),G=o(G),x(Q)||O(Q))return le(Q,te,G);if(!U(Q))throw new r("stream",["ReadableStream","WritableStream","Stream"],Q);const be=(X=te.readable)!==null&&X!==void 0?X:_(Q),we=(ae=te.writable)!==null&&ae!==void 0?ae:A(Q),fe=Q._writableState,Me=Q._readableState,Pe=()=>{Q.writable||$e()};let Oe=V(Q)&&_(Q)===be&&A(Q)===we,Ae=j(Q,!1);const $e=()=>{Ae=!0,Q.destroyed&&(Oe=!1),!(Oe&&(!Q.readable||be))&&(!be||qe)&&G.call(Q)};let qe=S(Q,!1);const Fe=()=>{qe=!0,Q.destroyed&&(Oe=!1),!(Oe&&(!Q.writable||we))&&(!we||Ae)&&G.call(Q)},Ne=Y=>{G.call(Q,Y)};let $=v(Q);const Se=()=>{$=!0;const Y=N(Q)||E(Q);if(Y&&typeof Y!="boolean")return G.call(Q,Y);if(be&&!qe&&_(Q,!0)&&!S(Q,!1))return G.call(Q,new a);if(we&&!Ae&&!j(Q,!1))return G.call(Q,new a);G.call(Q)},ke=()=>{$=!0;const Y=N(Q)||E(Q);if(Y&&typeof Y!="boolean")return G.call(Q,Y);G.call(Q)},ce=()=>{Q.req.on("finish",$e)};Z(Q)?(Q.on("complete",$e),Oe||Q.on("abort",Se),Q.req?ce():Q.on("request",ce)):we&&!fe&&(Q.on("end",Pe),Q.on("close",Pe)),!Oe&&typeof Q.aborted=="boolean"&&Q.on("aborted",Se),Q.on("end",Fe),Q.on("finish",$e),te.error!==!1&&Q.on("error",Ne),Q.on("close",Se),$?e.nextTick(Se):fe!=null&&fe.errorEmitted||Me!=null&&Me.errorEmitted?Oe||e.nextTick(ke):(!be&&(!Oe||w(Q))&&(Ae||C(Q)===!1)||!we&&(!Oe||C(Q))&&(qe||w(Q)===!1)||Me&&Q.req&&Q.aborted)&&e.nextTick(ke);const ie=()=>{G=F,Q.removeListener("aborted",Se),Q.removeListener("complete",$e),Q.removeListener("abort",Se),Q.removeListener("request",ce),Q.req&&Q.req.removeListener("finish",$e),Q.removeListener("end",Pe),Q.removeListener("close",Pe),Q.removeListener("finish",$e),Q.removeListener("end",Fe),Q.removeListener("error",Ne),Q.removeListener("close",Se)};if(te.signal&&!$){const Y=()=>{const _e=G;ie(),_e.call(Q,new t(void 0,{cause:te.signal.reason}))};if(te.signal.aborted)e.nextTick(Y);else{P=P||ki().addAbortListener;const _e=P(te.signal,Y),De=G;G=o((...Ee)=>{_e[g](),De.apply(Q,Ee)})}}return ie}function le(Q,te,G){let X=!1,ae=F;if(te.signal)if(ae=()=>{X=!0,G.call(Q,new t(void 0,{cause:te.signal.reason}))},te.signal.aborted)e.nextTick(ae);else{P=P||ki().addAbortListener;const we=P(te.signal,ae),fe=G;G=o((...Me)=>{we[g](),fe.apply(Q,Me)})}const be=(...we)=>{X||e.nextTick(()=>G.apply(Q,we))};return m(Q[J].promise,be,be),F}function ne(Q,te){var G;let X=!1;return te===null&&(te=i),(G=te)!==null&&G!==void 0&&G.cleanup&&(f(te.cleanup,"cleanup"),X=te.cleanup),new h((ae,be)=>{const we=ue(Q,te,fe=>{X&&we(),fe?be(fe):ae()})})}return Ny.exports=ue,Ny.exports.finished=ne,Ny.exports}var vx,vN;function vh(){if(vN)return vx;vN=1;const e=bd(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=pi(),{Symbol:a}=Ur(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:u}=Ll(),c=a("kDestroy"),f=a("kConstruct");function h(V,J,P){V&&(V.stack,J&&!J.errored&&(J.errored=V),P&&!P.errored&&(P.errored=V))}function m(V,J){const P=this._readableState,Z=this._writableState,F=Z||P;return Z!=null&&Z.destroyed||P!=null&&P.destroyed?(typeof J=="function"&&J(),this):(h(V,Z,P),Z&&(Z.destroyed=!0),P&&(P.destroyed=!0),F.constructed?g(this,V,J):this.once(c,function(ue){g(this,t(ue,V),J)}),this)}function g(V,J,P){let Z=!1;function F(ue){if(Z)return;Z=!0;const le=V._readableState,ne=V._writableState;h(ue,ne,le),ne&&(ne.closed=!0),le&&(le.closed=!0),typeof P=="function"&&P(ue),ue?e.nextTick(v,V,ue):e.nextTick(w,V)}try{V._destroy(J||null,F)}catch(ue){F(ue)}}function v(V,J){_(V,J),w(V)}function w(V){const J=V._readableState,P=V._writableState;P&&(P.closeEmitted=!0),J&&(J.closeEmitted=!0),(P!=null&&P.emitClose||J!=null&&J.emitClose)&&V.emit("close")}function _(V,J){const P=V._readableState,Z=V._writableState;Z!=null&&Z.errorEmitted||P!=null&&P.errorEmitted||(Z&&(Z.errorEmitted=!0),P&&(P.errorEmitted=!0),V.emit("error",J))}function x(){const V=this._readableState,J=this._writableState;V&&(V.constructed=!0,V.closed=!1,V.closeEmitted=!1,V.destroyed=!1,V.errored=null,V.errorEmitted=!1,V.reading=!1,V.ended=V.readable===!1,V.endEmitted=V.readable===!1),J&&(J.constructed=!0,J.destroyed=!1,J.closed=!1,J.closeEmitted=!1,J.errored=null,J.errorEmitted=!1,J.finalCalled=!1,J.prefinished=!1,J.ended=J.writable===!1,J.ending=J.writable===!1,J.finished=J.writable===!1)}function S(V,J,P){const Z=V._readableState,F=V._writableState;if(F!=null&&F.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||F!=null&&F.autoDestroy?V.destroy(J):J&&(J.stack,F&&!F.errored&&(F.errored=J),Z&&!Z.errored&&(Z.errored=J),P?e.nextTick(_,V,J):_(V,J))}function E(V,J){if(typeof V._construct!="function")return;const P=V._readableState,Z=V._writableState;P&&(P.constructed=!1),Z&&(Z.constructed=!1),V.once(f,J),!(V.listenerCount(f)>1)&&e.nextTick(C,V)}function C(V){let J=!1;function P(Z){if(J){S(V,Z??new n);return}J=!0;const F=V._readableState,ue=V._writableState,le=ue||F;F&&(F.constructed=!0),ue&&(ue.constructed=!0),le.destroyed?V.emit(c,Z):Z?S(V,Z,!0):e.nextTick(A,V)}try{V._construct(Z=>{e.nextTick(P,Z)})}catch(Z){e.nextTick(P,Z)}}function A(V){V.emit(f)}function O(V){return(V==null?void 0:V.setHeader)&&typeof V.abort=="function"}function j(V){V.emit("close")}function N(V,J){V.emit("error",J),e.nextTick(j,V)}function U(V,J){!V||o(V)||(!J&&!s(V)&&(J=new r),u(V)?(V.socket=null,V.destroy(J)):O(V)?V.abort():O(V.req)?V.req.abort():typeof V.destroy=="function"?V.destroy(J):typeof V.close=="function"?V.close():J?e.nextTick(N,V,J):e.nextTick(j,V),V.destroyed||(V[i]=!0))}return vx={construct:E,destroyer:U,destroy:m,undestroy:x,errorOrDestroy:S},vx}var wx,wN;function uk(){if(wN)return wx;wN=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Ur(),{EventEmitter:n}=Kv();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function u(w){i.writable&&i.write(w)===!1&&s.pause&&s.pause()}s.on("data",u);function c(){s.readable&&s.resume&&s.resume()}i.on("drain",c),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",m));let f=!1;function h(){f||(f=!0,i.end())}function m(){f||(f=!0,typeof i.destroy=="function"&&i.destroy())}function g(w){v(),n.listenerCount(this,"error")===0&&this.emit("error",w)}a(s,"error",g),a(i,"error",g);function v(){s.removeListener("data",u),i.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",m),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",v),s.removeListener("close",v),i.removeListener("close",v)}return s.on("end",v),s.on("close",v),i.on("close",v),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return wx={Stream:r,prependListener:a},wx}var _x={exports:{}},_N;function Zv(){return _N||(_N=1,function(e){const{SymbolDispose:t}=Ur(),{AbortError:n,codes:r}=pi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Ll(),s=nc(),{ERR_INVALID_ARG_TYPE:u}=r;let c;const f=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new u(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(f(m,"signal"),!a(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||ki().addAbortListener;const v=c(h,g);s(m,v[t])}return m}}(_x)),_x.exports}var xx,xN;function wX(){if(xN)return xx;xN=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Ur(),{Buffer:a}=tc(),{inspect:i}=ki();return xx=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=s+u.data;return c}concat(s){if(this.length===0)return a.alloc(0);const u=a.allocUnsafe(s>>>0);let c=this.head,f=0;for(;c;)n(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(s,u){const c=this.head.data;if(s<c.length){const f=c.slice(0,s);return this.head.data=c.slice(s),f}return s===c.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",c=this.head,f=0;do{const h=c.data;if(s>h.length)u+=h,s-=h.length;else{s===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=e(h,0,s),this.head=c,c.data=e(h,s));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(s){const u=a.allocUnsafe(s),c=s;let f=this.head,h=0;do{const m=f.data;if(s>m.length)n(u,m,c-s),s-=m.length;else{s===m.length?(n(u,m,c-s),++h,f.next?this.head=f.next:this.head=this.tail=null):(n(u,new r(m.buffer,m.byteOffset,s),c-s),this.head=f,f.data=m.slice(s));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},xx}var Sx,SN;function Yv(){if(SN)return Sx;SN=1;const{MathFloor:e,NumberIsInteger:t}=Ur(),{validateInteger:n}=_0(),{ERR_INVALID_ARG_VALUE:r}=pi().codes;let a=16*1024,i=16;function o(f,h,m){return f.highWaterMark!=null?f.highWaterMark:h?f[m]:null}function s(f){return f?i:a}function u(f,h){n(h,"value",0),f?i=h:a=h}function c(f,h,m,g){const v=o(h,g,m);if(v!=null){if(!t(v)||v<0){const w=g?`options.${m}`:"options.highWaterMark";throw new r(w,v)}return e(v)}return s(f.objectMode)}return Sx={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},Sx}var Ex={},Iy={exports:{}},EN;function ck(){return EN||(EN=1,function(e,t){var n=tc(),r=n.Buffer;function a(o,s){for(var u in o)s[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,u){return r(o,s,u)}a(r,i),i.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,u)},i.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(Iy,Iy.exports)),Iy.exports}var kN;function _X(){if(kN)return Ex;kN=1;var e=ck().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}Ex.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=m,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=g,this.end=v,S=3;break;default:this.write=w,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var C=S.length-1;if(C<E)return 0;var A=i(S[C]);return A>=0?(A>0&&(x.lastNeed=A-1),A):--C<E||A===-2?0:(A=i(S[C]),A>=0?(A>0&&(x.lastNeed=A-2),A):--C<E||A===-2?0:(A=i(S[C]),A>=0?(A>0&&(A===2?A=0:x.lastNeed=A-3),A):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"�";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"�";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,"�"}}function u(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function c(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function f(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"�":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function m(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function v(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function w(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return Ex}var kx,CN;function f8(){if(CN)return kx;CN=1;const e=bd(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Ur(),{Buffer:a}=tc(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=pi().codes;function s(u,c,f){let h;if(typeof c=="string"||c instanceof a)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let m;if(c&&c[n])m=!0,h=c[n]();else if(c&&c[r])m=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new u({objectMode:!0,highWaterMark:1,...f});let v=!1;g._read=function(){v||(v=!0,_())},g._destroy=function(x,S){t(w(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function w(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:A}=await h.throw(x);if(await C,A)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:x,done:S}=m?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new o;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return kx=s,kx}var Cx,AN;function Xv(){if(AN)return Cx;AN=1;const e=bd(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:m}=Ur();Cx=Ee,Ee.ReadableState=De;const{EventEmitter:g}=Kv(),{Stream:v,prependListener:w}=uk(),{Buffer:_}=tc(),{addAbortSignal:x}=Zv(),S=nc();let E=ki().debuglog("stream",me=>{E=me});const C=wX(),A=vh(),{getHighWaterMark:O,getDefaultHighWaterMark:j}=Yv(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:U,ERR_METHOD_NOT_IMPLEMENTED:V,ERR_OUT_OF_RANGE:J,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:F}=pi(),{validateObject:ue}=_0(),le=m("kPaused"),{StringDecoder:ne}=_X(),Q=f8();s(Ee.prototype,v.prototype),s(Ee,v);const te=()=>{},{errorOrDestroy:G}=A,X=1,ae=2,be=4,we=8,fe=16,Me=32,Pe=64,Oe=128,Ae=256,$e=512,qe=1024,Fe=2048,Ne=4096,$=8192,Se=16384,ke=32768,ce=65536,ie=1<<17,Y=1<<18;function _e(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(q){q?this.state|=me:this.state&=~me}}}i(De.prototype,{objectMode:_e(X),ended:_e(ae),endEmitted:_e(be),reading:_e(we),constructed:_e(fe),sync:_e(Me),needReadable:_e(Pe),emittedReadable:_e(Oe),readableListening:_e(Ae),resumeScheduled:_e($e),errorEmitted:_e(qe),emitClose:_e(Fe),autoDestroy:_e(Ne),destroyed:_e($),closed:_e(Se),closeEmitted:_e(ke),multiAwaitDrain:_e(ce),readingMore:_e(ie),dataEmitted:_e(Y)});function De(me,q,z){typeof z!="boolean"&&(z=q instanceof Il()),this.state=Fe|Ne|fe|Me,me&&me.objectMode&&(this.state|=X),z&&me&&me.readableObjectMode&&(this.state|=X),this.highWaterMark=me?O(this,me,"readableHighWaterMark",z):j(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[le]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new ne(me.encoding),this.encoding=me.encoding)}function Ee(me){if(!(this instanceof Ee))return new Ee(me);const q=this instanceof Il();this._readableState=new De(me,this,q),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!q&&x(me.signal,this)),v.call(this,me),A.construct(this,()=>{this._readableState.needReadable&&R(this,this._readableState)})}Ee.prototype.destroy=A.destroy,Ee.prototype._undestroy=A.undestroy,Ee.prototype._destroy=function(me,q){q(me)},Ee.prototype[g.captureRejectionSymbol]=function(me){this.destroy(me)},Ee.prototype[f]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new F,this.destroy(me)),new u((q,z)=>S(this,W=>W&&W!==me?z(W):q(null)))},Ee.prototype.push=function(me,q){return Ze(this,me,q,!1)},Ee.prototype.unshift=function(me,q){return Ze(this,me,q,!0)};function Ze(me,q,z,W){E("readableAddChunk",q);const he=me._readableState;let Te;if((he.state&X)===0&&(typeof q=="string"?(z=z||he.defaultEncoding,he.encoding!==z&&(W&&he.encoding?q=_.from(q,z).toString(he.encoding):(q=_.from(q,z),z=""))):q instanceof _?z="":v._isUint8Array(q)?(q=v._uint8ArrayToBuffer(q),z=""):q!=null&&(Te=new U("chunk",["string","Buffer","Uint8Array"],q))),Te)G(me,Te);else if(q===null)he.state&=-9,Rt(me,he);else if((he.state&X)!==0||q&&q.length>0)if(W)if((he.state&be)!==0)G(me,new Z);else{if(he.destroyed||he.errored)return!1;Et(me,he,q,!0)}else if(he.ended)G(me,new P);else{if(he.destroyed||he.errored)return!1;he.state&=-9,he.decoder&&!z?(q=he.decoder.write(q),he.objectMode||q.length!==0?Et(me,he,q,!1):R(me,he)):Et(me,he,q,!1)}else W||(he.state&=-9,R(me,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function Et(me,q,z,W){q.flowing&&q.length===0&&!q.sync&&me.listenerCount("data")>0?((q.state&ce)!==0?q.awaitDrainWriters.clear():q.awaitDrainWriters=null,q.dataEmitted=!0,me.emit("data",z)):(q.length+=q.objectMode?1:z.length,W?q.buffer.unshift(z):q.buffer.push(z),(q.state&Pe)!==0&&Kt(me)),R(me,q)}Ee.prototype.isPaused=function(){const me=this._readableState;return me[le]===!0||me.flowing===!1},Ee.prototype.setEncoding=function(me){const q=new ne(me);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;const z=this._readableState.buffer;let W="";for(const he of z)W+=q.write(he);return z.clear(),W!==""&&z.push(W),this._readableState.length=W.length,this};const at=1073741824;function _t(me){if(me>at)throw new J("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function Nt(me,q){return me<=0||q.length===0&&q.ended?0:(q.state&X)!==0?1:r(me)?q.flowing&&q.length?q.buffer.first().length:q.length:me<=q.length?me:q.ended?q.length:0}Ee.prototype.read=function(me){E("read",me),me===void 0?me=NaN:n(me)||(me=a(me,10));const q=this._readableState,z=me;if(me>q.highWaterMark&&(q.highWaterMark=_t(me)),me!==0&&(q.state&=-129),me===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return E("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?st(this):Kt(this),null;if(me=Nt(me,q),me===0&&q.ended)return q.length===0&&st(this),null;let W=(q.state&Pe)!==0;if(E("need readable",W),(q.length===0||q.length-me<q.highWaterMark)&&(W=!0,E("length less than watermark",W)),q.ended||q.reading||q.destroyed||q.errored||!q.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),q.state|=we|Me,q.length===0&&(q.state|=Pe);try{this._read(q.highWaterMark)}catch(Te){G(this,Te)}q.state&=-33,q.reading||(me=Nt(z,q))}let he;return me>0?he=Be(me,q):he=null,he===null?(q.needReadable=q.length<=q.highWaterMark,me=0):(q.length-=me,q.multiAwaitDrain?q.awaitDrainWriters.clear():q.awaitDrainWriters=null),q.length===0&&(q.ended||(q.needReadable=!0),z!==me&&q.ended&&st(this)),he!==null&&!q.errorEmitted&&!q.closeEmitted&&(q.dataEmitted=!0,this.emit("data",he)),he};function Rt(me,q){if(E("onEofChunk"),!q.ended){if(q.decoder){const z=q.decoder.end();z&&z.length&&(q.buffer.push(z),q.length+=q.objectMode?1:z.length)}q.ended=!0,q.sync?Kt(me):(q.needReadable=!1,q.emittedReadable=!0,pe(me))}}function Kt(me){const q=me._readableState;E("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(E("emitReadable",q.flowing),q.emittedReadable=!0,e.nextTick(pe,me))}function pe(me){const q=me._readableState;E("emitReadable_",q.destroyed,q.length,q.ended),!q.destroyed&&!q.errored&&(q.length||q.ended)&&(me.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,ft(me)}function R(me,q){!q.readingMore&&q.constructed&&(q.readingMore=!0,e.nextTick(H,me,q))}function H(me,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){const z=q.length;if(E("maybeReadMore read 0"),me.read(0),z===q.length)break}q.readingMore=!1}Ee.prototype._read=function(me){throw new V("_read()")},Ee.prototype.pipe=function(me,q){const z=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new c(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(me),E("pipe count=%d opts=%j",W.pipes.length,q);const Te=(!q||q.end!==!1)&&me!==e.stdout&&me!==e.stderr?gt:pr;W.endEmitted?e.nextTick(Te):z.once("end",Te),me.on("unpipe",Ve);function Ve(Mn,ti){E("onunpipe"),Mn===z&&ti&&ti.hasUnpiped===!1&&(ti.hasUnpiped=!0,Ct())}function gt(){E("onend"),me.end()}let Gt,ht=!1;function Ct(){E("cleanup"),me.removeListener("close",zn),me.removeListener("finish",hr),Gt&&me.removeListener("drain",Gt),me.removeListener("error",En),me.removeListener("unpipe",Ve),z.removeListener("end",gt),z.removeListener("end",pr),z.removeListener("data",Zt),ht=!0,Gt&&W.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Gt()}function Ot(){ht||(W.pipes.length===1&&W.pipes[0]===me?(E("false write response, pause",0),W.awaitDrainWriters=me,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(me)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(me)),z.pause()),Gt||(Gt=de(z,me),me.on("drain",Gt))}z.on("data",Zt);function Zt(Mn){E("ondata");const ti=me.write(Mn);E("dest.write",ti),ti===!1&&Ot()}function En(Mn){if(E("onerror",Mn),pr(),me.removeListener("error",En),me.listenerCount("error")===0){const ti=me._writableState||me._readableState;ti&&!ti.errorEmitted?G(me,Mn):me.emit("error",Mn)}}w(me,"error",En);function zn(){me.removeListener("finish",hr),pr()}me.once("close",zn);function hr(){E("onfinish"),me.removeListener("close",zn),pr()}me.once("finish",hr);function pr(){E("unpipe"),z.unpipe(me)}return me.emit("pipe",z),me.writableNeedDrain===!0?Ot():W.flowing||(E("pipe resume"),z.resume()),me};function de(me,q){return function(){const W=me._readableState;W.awaitDrainWriters===q?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(q)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}Ee.prototype.unpipe=function(me){const q=this._readableState,z={hasUnpiped:!1};if(q.pipes.length===0)return this;if(!me){const he=q.pipes;q.pipes=[],this.pause();for(let Te=0;Te<he.length;Te++)he[Te].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(q.pipes,me);return W===-1?this:(q.pipes.splice(W,1),q.pipes.length===0&&this.pause(),me.emit("unpipe",this,z),this)},Ee.prototype.on=function(me,q){const z=v.prototype.on.call(this,me,q),W=this._readableState;return me==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):me==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Kt(this):W.reading||e.nextTick(ye,this)),z},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.removeListener=function(me,q){const z=v.prototype.removeListener.call(this,me,q);return me==="readable"&&e.nextTick(Re,this),z},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.removeAllListeners=function(me){const q=v.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(Re,this),q};function Re(me){const q=me._readableState;q.readableListening=me.listenerCount("readable")>0,q.resumeScheduled&&q[le]===!1?q.flowing=!0:me.listenerCount("data")>0?me.resume():q.readableListening||(q.flowing=null)}function ye(me){E("readable nexttick read 0"),me.read(0)}Ee.prototype.resume=function(){const me=this._readableState;return me.flowing||(E("resume"),me.flowing=!me.readableListening,Ce(this,me)),me[le]=!1,this};function Ce(me,q){q.resumeScheduled||(q.resumeScheduled=!0,e.nextTick(oe,me,q))}function oe(me,q){E("resume",q.reading),q.reading||me.read(0),q.resumeScheduled=!1,me.emit("resume"),ft(me),q.flowing&&!q.reading&&me.read(0)}Ee.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[le]=!0,this};function ft(me){const q=me._readableState;for(E("flow",q.flowing);q.flowing&&me.read()!==null;);}Ee.prototype.wrap=function(me){let q=!1;me.on("data",W=>{!this.push(W)&&me.pause&&(q=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",W=>{G(this,W)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{q&&me.resume&&(q=!1,me.resume())};const z=o(me);for(let W=1;W<z.length;W++){const he=z[W];this[he]===void 0&&typeof me[he]=="function"&&(this[he]=me[he].bind(me))}return this},Ee.prototype[h]=function(){return vt(this)},Ee.prototype.iterator=function(me){return me!==void 0&&ue(me,"options"),vt(this,me)};function vt(me,q){typeof me.read!="function"&&(me=Ee.wrap(me,{objectMode:!0}));const z=D(me,q);return z.stream=me,z}async function*D(me,q){let z=te;function W(Ve){this===me?(z(),z=te):z=Ve}me.on("readable",W);let he;const Te=S(me,{writable:!1},Ve=>{he=Ve?N(he,Ve):null,z(),z=te});try{for(;;){const Ve=me.destroyed?null:me.read();if(Ve!==null)yield Ve;else{if(he)throw he;if(he===null)return;await new u(W)}}}catch(Ve){throw he=N(he,Ve),he}finally{(he||(q==null?void 0:q.destroyOnReturn)!==!1)&&(he===void 0||me._readableState.autoDestroy)?A.destroyer(me,null):(me.off("readable",W),Te())}}i(Ee.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(De.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[le]!==!1},set(me){this[le]=!!me}}}),Ee._fromList=Be;function Be(me,q){if(q.length===0)return null;let z;return q.objectMode?z=q.buffer.shift():!me||me>=q.length?(q.decoder?z=q.buffer.join(""):q.buffer.length===1?z=q.buffer.first():z=q.buffer.concat(q.length),q.buffer.clear()):z=q.buffer.consume(me,q.decoder),z}function st(me){const q=me._readableState;E("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,e.nextTick(ge,q,me))}function ge(me,q){if(E("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,q.emit("end"),q.writable&&q.allowHalfOpen===!1)e.nextTick(je,q);else if(me.autoDestroy){const z=q._writableState;(!z||z.autoDestroy&&(z.finished||z.writable===!1))&&q.destroy()}}}function je(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}Ee.from=function(me,q){return Q(Ee,me,q)};let Je;function It(){return Je===void 0&&(Je={}),Je}return Ee.fromWeb=function(me,q){return It().newStreamReadableFromReadableStream(me,q)},Ee.toWeb=function(me,q){return It().newReadableStreamFromStreamReadable(me,q)},Ee.wrap=function(me,q){var z,W;return new Ee({objectMode:(z=(W=me.readableObjectMode)!==null&&W!==void 0?W:me.objectMode)!==null&&z!==void 0?z:!0,...q,destroy(he,Te){A.destroyer(me,he),Te(he)}}).wrap(me)},Cx}var Ax,TN;function dk(){if(TN)return Ax;TN=1;const e=bd(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:c}=Ur();Ax=ue,ue.WritableState=Z;const{EventEmitter:f}=Kv(),h=uk().Stream,{Buffer:m}=tc(),g=vh(),{addAbortSignal:v}=Zv(),{getHighWaterMark:w,getDefaultHighWaterMark:_}=Yv(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:O,ERR_STREAM_NULL_VALUES:j,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:U}=pi().codes,{errorOrDestroy:V}=g;o(ue.prototype,h.prototype),o(ue,h);function J(){}const P=u("kOnFinished");function Z(Ne,$,Se){typeof Se!="boolean"&&(Se=$ instanceof Il()),this.objectMode=!!(Ne&&Ne.objectMode),Se&&(this.objectMode=this.objectMode||!!(Ne&&Ne.writableObjectMode)),this.highWaterMark=Ne?w(this,Ne,"writableHighWaterMark",Se):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ke=!!(Ne&&Ne.decodeStrings===!1);this.decodeStrings=!ke,this.defaultEncoding=Ne&&Ne.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,$),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,F(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ne||Ne.emitClose!==!1,this.autoDestroy=!Ne||Ne.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function F(Ne){Ne.buffered=[],Ne.bufferedIndex=0,Ne.allBuffers=!0,Ne.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ue(Ne){const $=this instanceof Il();if(!$&&!r(ue,this))return new ue(Ne);this._writableState=new Z(Ne,this,$),Ne&&(typeof Ne.write=="function"&&(this._write=Ne.write),typeof Ne.writev=="function"&&(this._writev=Ne.writev),typeof Ne.destroy=="function"&&(this._destroy=Ne.destroy),typeof Ne.final=="function"&&(this._final=Ne.final),typeof Ne.construct=="function"&&(this._construct=Ne.construct),Ne.signal&&v(Ne.signal,this)),h.call(this,Ne),g.construct(this,()=>{const Se=this._writableState;Se.writing||we(this,Se),Oe(this,Se)})}a(ue,c,{__proto__:null,value:function(Ne){return r(this,Ne)?!0:this!==ue?!1:Ne&&Ne._writableState instanceof Z}}),ue.prototype.pipe=function(){V(this,new C)};function le(Ne,$,Se,ke){const ce=Ne._writableState;if(typeof Se=="function")ke=Se,Se=ce.defaultEncoding;else{if(!Se)Se=ce.defaultEncoding;else if(Se!=="buffer"&&!m.isEncoding(Se))throw new U(Se);typeof ke!="function"&&(ke=J)}if($===null)throw new j;if(!ce.objectMode)if(typeof $=="string")ce.decodeStrings!==!1&&($=m.from($,Se),Se="buffer");else if($ instanceof m)Se="buffer";else if(h._isUint8Array($))$=h._uint8ArrayToBuffer($),Se="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],$);let ie;return ce.ending?ie=new N:ce.destroyed&&(ie=new A("write")),ie?(e.nextTick(ke,ie),V(Ne,ie,!0),ie):(ce.pendingcb++,ne(Ne,ce,$,Se,ke))}ue.prototype.write=function(Ne,$,Se){return le(this,Ne,$,Se)===!0},ue.prototype.cork=function(){this._writableState.corked++},ue.prototype.uncork=function(){const Ne=this._writableState;Ne.corked&&(Ne.corked--,Ne.writing||we(this,Ne))},ue.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=s($)),!m.isEncoding($))throw new U($);return this._writableState.defaultEncoding=$,this};function ne(Ne,$,Se,ke,ce){const ie=$.objectMode?1:Se.length;$.length+=ie;const Y=$.length<$.highWaterMark;return Y||($.needDrain=!0),$.writing||$.corked||$.errored||!$.constructed?($.buffered.push({chunk:Se,encoding:ke,callback:ce}),$.allBuffers&&ke!=="buffer"&&($.allBuffers=!1),$.allNoop&&ce!==J&&($.allNoop=!1)):($.writelen=ie,$.writecb=ce,$.writing=!0,$.sync=!0,Ne._write(Se,ke,$.onwrite),$.sync=!1),Y&&!$.errored&&!$.destroyed}function Q(Ne,$,Se,ke,ce,ie,Y){$.writelen=ke,$.writecb=Y,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new A("write")):Se?Ne._writev(ce,$.onwrite):Ne._write(ce,ie,$.onwrite),$.sync=!1}function te(Ne,$,Se,ke){--$.pendingcb,ke(Se),be($),V(Ne,Se)}function G(Ne,$){const Se=Ne._writableState,ke=Se.sync,ce=Se.writecb;if(typeof ce!="function"){V(Ne,new E);return}Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0,$?($.stack,Se.errored||(Se.errored=$),Ne._readableState&&!Ne._readableState.errored&&(Ne._readableState.errored=$),ke?e.nextTick(te,Ne,Se,$,ce):te(Ne,Se,$,ce)):(Se.buffered.length>Se.bufferedIndex&&we(Ne,Se),ke?Se.afterWriteTickInfo!==null&&Se.afterWriteTickInfo.cb===ce?Se.afterWriteTickInfo.count++:(Se.afterWriteTickInfo={count:1,cb:ce,stream:Ne,state:Se},e.nextTick(X,Se.afterWriteTickInfo)):ae(Ne,Se,1,ce))}function X({stream:Ne,state:$,count:Se,cb:ke}){return $.afterWriteTickInfo=null,ae(Ne,$,Se,ke)}function ae(Ne,$,Se,ke){for(!$.ending&&!Ne.destroyed&&$.length===0&&$.needDrain&&($.needDrain=!1,Ne.emit("drain"));Se-- >0;)$.pendingcb--,ke();$.destroyed&&be($),Oe(Ne,$)}function be(Ne){if(Ne.writing)return;for(let ce=Ne.bufferedIndex;ce<Ne.buffered.length;++ce){var $;const{chunk:ie,callback:Y}=Ne.buffered[ce],_e=Ne.objectMode?1:ie.length;Ne.length-=_e,Y(($=Ne.errored)!==null&&$!==void 0?$:new A("write"))}const Se=Ne[P].splice(0);for(let ce=0;ce<Se.length;ce++){var ke;Se[ce]((ke=Ne.errored)!==null&&ke!==void 0?ke:new A("end"))}F(Ne)}function we(Ne,$){if($.corked||$.bufferProcessing||$.destroyed||!$.constructed)return;const{buffered:Se,bufferedIndex:ke,objectMode:ce}=$,ie=Se.length-ke;if(!ie)return;let Y=ke;if($.bufferProcessing=!0,ie>1&&Ne._writev){$.pendingcb-=ie-1;const _e=$.allNoop?J:Ee=>{for(let Ze=Y;Ze<Se.length;++Ze)Se[Ze].callback(Ee)},De=$.allNoop&&Y===0?Se:t(Se,Y);De.allBuffers=$.allBuffers,Q(Ne,$,!0,$.length,De,"",_e),F($)}else{do{const{chunk:_e,encoding:De,callback:Ee}=Se[Y];Se[Y++]=null;const Ze=ce?1:_e.length;Q(Ne,$,!1,Ze,_e,De,Ee)}while(Y<Se.length&&!$.writing);Y===Se.length?F($):Y>256?(Se.splice(0,Y),$.bufferedIndex=0):$.bufferedIndex=Y}$.bufferProcessing=!1}ue.prototype._write=function(Ne,$,Se){if(this._writev)this._writev([{chunk:Ne,encoding:$}],Se);else throw new S("_write()")},ue.prototype._writev=null,ue.prototype.end=function(Ne,$,Se){const ke=this._writableState;typeof Ne=="function"?(Se=Ne,Ne=null,$=null):typeof $=="function"&&(Se=$,$=null);let ce;if(Ne!=null){const ie=le(this,Ne,$);ie instanceof n&&(ce=ie)}return ke.corked&&(ke.corked=1,this.uncork()),ce||(!ke.errored&&!ke.ending?(ke.ending=!0,Oe(this,ke,!0),ke.ended=!0):ke.finished?ce=new O("end"):ke.destroyed&&(ce=new A("end"))),typeof Se=="function"&&(ce||ke.finished?e.nextTick(Se,ce):ke[P].push(Se)),this};function fe(Ne){return Ne.ending&&!Ne.destroyed&&Ne.constructed&&Ne.length===0&&!Ne.errored&&Ne.buffered.length===0&&!Ne.finished&&!Ne.writing&&!Ne.errorEmitted&&!Ne.closeEmitted}function Me(Ne,$){let Se=!1;function ke(ce){if(Se){V(Ne,ce??E());return}if(Se=!0,$.pendingcb--,ce){const ie=$[P].splice(0);for(let Y=0;Y<ie.length;Y++)ie[Y](ce);V(Ne,ce,$.sync)}else fe($)&&($.prefinished=!0,Ne.emit("prefinish"),$.pendingcb++,e.nextTick(Ae,Ne,$))}$.sync=!0,$.pendingcb++;try{Ne._final(ke)}catch(ce){ke(ce)}$.sync=!1}function Pe(Ne,$){!$.prefinished&&!$.finalCalled&&(typeof Ne._final=="function"&&!$.destroyed?($.finalCalled=!0,Me(Ne,$)):($.prefinished=!0,Ne.emit("prefinish")))}function Oe(Ne,$,Se){fe($)&&(Pe(Ne,$),$.pendingcb===0&&(Se?($.pendingcb++,e.nextTick((ke,ce)=>{fe(ce)?Ae(ke,ce):ce.pendingcb--},Ne,$)):fe($)&&($.pendingcb++,Ae(Ne,$))))}function Ae(Ne,$){$.pendingcb--,$.finished=!0;const Se=$[P].splice(0);for(let ke=0;ke<Se.length;ke++)Se[ke]();if(Ne.emit("finish"),$.autoDestroy){const ke=Ne._readableState;(!ke||ke.autoDestroy&&(ke.endEmitted||ke.readable===!1))&&Ne.destroy()}}i(ue.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ne){this._writableState&&(this._writableState.destroyed=Ne)}},writable:{__proto__:null,get(){const Ne=this._writableState;return!!Ne&&Ne.writable!==!1&&!Ne.destroyed&&!Ne.errored&&!Ne.ending&&!Ne.ended},set(Ne){this._writableState&&(this._writableState.writable=!!Ne)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ne=this._writableState;return Ne?!Ne.destroyed&&!Ne.ending&&Ne.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const $e=g.destroy;ue.prototype.destroy=function(Ne,$){const Se=this._writableState;return!Se.destroyed&&(Se.bufferedIndex<Se.buffered.length||Se[P].length)&&e.nextTick(be,Se),$e.call(this,Ne,$),this},ue.prototype._undestroy=g.undestroy,ue.prototype._destroy=function(Ne,$){$(Ne)},ue.prototype[f.captureRejectionSymbol]=function(Ne){this.destroy(Ne)};let qe;function Fe(){return qe===void 0&&(qe={}),qe}return ue.fromWeb=function(Ne,$){return Fe().newStreamWritableFromWritableStream(Ne,$)},ue.toWeb=function(Ne){return Fe().newWritableStreamFromStreamWritable(Ne)},Ax}var Tx,RN;function xX(){if(RN)return Tx;RN=1;const e=bd(),t=tc(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=Ll(),h=nc(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=pi(),{destroyer:w}=vh(),_=Il(),x=Xv(),S=dk(),{createDeferredPromise:E}=ki(),C=f8(),A=globalThis.Blob||t.Blob,O=typeof A<"u"?function(Z){return Z instanceof A}:function(Z){return!1},j=globalThis.AbortController||Om().AbortController,{FunctionPrototypeCall:N}=Ur();class U extends _{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Tx=function P(Z,F){if(u(Z))return Z;if(o(Z))return J({readable:Z});if(s(Z))return J({writable:Z});if(i(Z))return J({writable:!1,readable:!1});if(c(Z))return J({readable:x.fromWeb(Z)});if(f(Z))return J({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:le,write:ne,final:Q,destroy:te}=V(Z);if(a(le))return C(U,le,{objectMode:!0,write:ne,final:Q,destroy:te});const G=le==null?void 0:le.then;if(typeof G=="function"){let X;const ae=N(G,le,be=>{if(be!=null)throw new v("nully","body",be)},be=>{w(X,be)});return X=new U({objectMode:!0,readable:!1,write:ne,final(be){Q(async()=>{try{await ae,e.nextTick(be,null)}catch(we){e.nextTick(be,we)}})},destroy:te})}throw new v("Iterable, AsyncIterable or AsyncFunction",F,le)}if(O(Z))return P(Z.arrayBuffer());if(a(Z))return C(U,Z,{objectMode:!0,writable:!1});if(c(Z==null?void 0:Z.readable)&&f(Z==null?void 0:Z.writable))return U.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const le=Z!=null&&Z.readable?o(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:P(Z.readable):void 0,ne=Z!=null&&Z.writable?s(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:P(Z.writable):void 0;return J({readable:le,writable:ne})}const ue=Z==null?void 0:Z.then;if(typeof ue=="function"){let le;return N(ue,Z,ne=>{ne!=null&&le.push(ne),le.push(null)},ne=>{w(le,ne)}),le=new U({objectMode:!0,writable:!1,read(){}})}throw new g(F,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function V(P){let{promise:Z,resolve:F}=E();const ue=new j,le=ue.signal;return{value:P(async function*(){for(;;){const Q=Z;Z=null;const{chunk:te,done:G,cb:X}=await Q;if(e.nextTick(X),G)return;if(le.aborted)throw new m(void 0,{cause:le.reason});({promise:Z,resolve:F}=E()),yield te}}(),{signal:le}),write(Q,te,G){const X=F;F=null,X({chunk:Q,done:!1,cb:G})},final(Q){const te=F;F=null,te({done:!0,cb:Q})},destroy(Q,te){ue.abort(),te(Q)}}}function J(P){const Z=P.readable&&typeof P.readable.read!="function"?x.wrap(P.readable):P.readable,F=P.writable;let ue=!!n(Z),le=!!r(F),ne,Q,te,G,X;function ae(be){const we=G;G=null,we?we(be):be&&X.destroy(be)}return X=new U({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(F!=null&&F.writableObjectMode),readable:ue,writable:le}),le&&(h(F,be=>{le=!1,be&&w(Z,be),ae(be)}),X._write=function(be,we,fe){F.write(be,we)?fe():ne=fe},X._final=function(be){F.end(),Q=be},F.on("drain",function(){if(ne){const be=ne;ne=null,be()}}),F.on("finish",function(){if(Q){const be=Q;Q=null,be()}})),ue&&(h(Z,be=>{ue=!1,be&&w(Z,be),ae(be)}),Z.on("readable",function(){if(te){const be=te;te=null,be()}}),Z.on("end",function(){X.push(null)}),X._read=function(){for(;;){const be=Z.read();if(be===null){te=X._read;return}if(!X.push(be))return}}),X._destroy=function(be,we){!be&&G!==null&&(be=new m),te=null,ne=null,Q=null,G===null?we(be):(G=we,w(F,be),w(Z,be))},X}return Tx}var Rx,NN;function Il(){if(NN)return Rx;NN=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Ur();Rx=o;const a=Xv(),i=dk();r(o.prototype,a.prototype),r(o,a);{const f=n(i.prototype);for(let h=0;h<f.length;h++){const m=f[h];o.prototype[m]||(o.prototype[m]=i.prototype[m])}}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},o.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return o.from=function(f){return c||(c=xX()),c(f,"body")},Rx}var Nx,IN;function h8(){if(IN)return Nx;IN=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Ur();Nx=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=pi().codes,r=Il(),{getHighWaterMark:a}=Yv();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const f=c?a(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,f,h){throw new n("_transform()")},o.prototype._write=function(c,f,h){const m=this._readableState,g=this._writableState,v=m.length;this._transform(c,f,(w,_)=>{if(w){h(w);return}_!=null&&this.push(_),g.ended||v===m.length||m.length<m.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},Nx}var Ix,ON;function p8(){if(ON)return Ix;ON=1;const{ObjectSetPrototypeOf:e}=Ur();Ix=n;const t=h8();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},Ix}var Ox,jN;function fk(){if(jN)return Ox;jN=1;const e=bd(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Ur(),i=nc(),{once:o}=ki(),s=vh(),u=Il(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:w}=pi(),{validateFunction:_,validateAbortSignal:x}=_0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:A,isTransformStream:O,isWebStream:j,isReadableStream:N,isReadableFinished:U}=Ll(),V=globalThis.AbortController||Om().AbortController;let J,P,Z;function F(be,we,fe){let Me=!1;be.on("close",()=>{Me=!0});const Pe=i(be,{readable:we,writable:fe},Oe=>{Me=!Oe});return{destroy:Oe=>{Me||(Me=!0,s.destroyer(be,Oe||new g("pipe")))},cleanup:Pe}}function ue(be){return _(be[be.length-1],"streams[stream.length - 1]"),be.pop()}function le(be){if(S(be))return be;if(C(be))return ne(be);throw new f("val",["Readable","Iterable","AsyncIterable"],be)}async function*ne(be){P||(P=Xv()),yield*P.prototype[r].call(be)}async function Q(be,we,fe,{end:Me}){let Pe,Oe=null;const Ae=Fe=>{if(Fe&&(Pe=Fe),Oe){const Ne=Oe;Oe=null,Ne()}},$e=()=>new n((Fe,Ne)=>{Pe?Ne(Pe):Oe=()=>{Pe?Ne(Pe):Fe()}});we.on("drain",Ae);const qe=i(we,{readable:!1},Ae);try{we.writableNeedDrain&&await $e();for await(const Fe of be)we.write(Fe)||await $e();Me&&(we.end(),await $e()),fe()}catch(Fe){fe(Pe!==Fe?c(Pe,Fe):Fe)}finally{qe(),we.off("drain",Ae)}}async function te(be,we,fe,{end:Me}){O(we)&&(we=we.writable);const Pe=we.getWriter();try{for await(const Oe of be)await Pe.ready,Pe.write(Oe).catch(()=>{});await Pe.ready,Me&&await Pe.close(),fe()}catch(Oe){try{await Pe.abort(Oe),fe(Oe)}catch(Ae){fe(Ae)}}}function G(...be){return X(be,o(ue(be)))}function X(be,we,fe){if(be.length===1&&t(be[0])&&(be=be[0]),be.length<2)throw new m("streams");const Me=new V,Pe=Me.signal,Oe=fe==null?void 0:fe.signal,Ae=[];x(Oe,"options.signal");function $e(){ce(new w)}Z=Z||ki().addAbortListener;let qe;Oe&&(qe=Z(Oe,$e));let Fe,Ne;const $=[];let Se=0;function ke(Ee){ce(Ee,--Se===0)}function ce(Ee,Ze){var Et;if(Ee&&(!Fe||Fe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Fe=Ee),!(!Fe&&!Ze)){for(;$.length;)$.shift()(Fe);(Et=qe)===null||Et===void 0||Et[a](),Me.abort(),Ze&&(Fe||Ae.forEach(at=>at()),e.nextTick(we,Fe,Ne))}}let ie;for(let Ee=0;Ee<be.length;Ee++){const Ze=be[Ee],Et=Ee<be.length-1,at=Ee>0,_t=Et||(fe==null?void 0:fe.end)!==!1,Nt=Ee===be.length-1;if(A(Ze)){let Rt=function(Kt){Kt&&Kt.name!=="AbortError"&&Kt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&ke(Kt)};var De=Rt;if(_t){const{destroy:Kt,cleanup:pe}=F(Ze,Et,at);$.push(Kt),E(Ze)&&Nt&&Ae.push(pe)}Ze.on("error",Rt),E(Ze)&&Nt&&Ae.push(()=>{Ze.removeListener("error",Rt)})}if(Ee===0)if(typeof Ze=="function"){if(ie=Ze({signal:Pe}),!S(ie))throw new h("Iterable, AsyncIterable or Stream","source",ie)}else S(Ze)||C(Ze)||O(Ze)?ie=Ze:ie=u.from(Ze);else if(typeof Ze=="function"){if(O(ie)){var Y;ie=le((Y=ie)===null||Y===void 0?void 0:Y.readable)}else ie=le(ie);if(ie=Ze(ie,{signal:Pe}),Et){if(!S(ie,!0))throw new h("AsyncIterable",`transform[${Ee-1}]`,ie)}else{var _e;J||(J=p8());const Rt=new J({objectMode:!0}),Kt=(_e=ie)===null||_e===void 0?void 0:_e.then;if(typeof Kt=="function")Se++,Kt.call(ie,H=>{Ne=H,H!=null&&Rt.write(H),_t&&Rt.end(),e.nextTick(ke)},H=>{Rt.destroy(H),e.nextTick(ke,H)});else if(S(ie,!0))Se++,Q(ie,Rt,ke,{end:_t});else if(N(ie)||O(ie)){const H=ie.readable||ie;Se++,Q(H,Rt,ke,{end:_t})}else throw new h("AsyncIterable or Promise","destination",ie);ie=Rt;const{destroy:pe,cleanup:R}=F(ie,!1,!0);$.push(pe),Nt&&Ae.push(R)}}else if(A(Ze)){if(C(ie)){Se+=2;const Rt=ae(ie,Ze,ke,{end:_t});E(Ze)&&Nt&&Ae.push(Rt)}else if(O(ie)||N(ie)){const Rt=ie.readable||ie;Se++,Q(Rt,Ze,ke,{end:_t})}else if(S(ie))Se++,Q(ie,Ze,ke,{end:_t});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ze}else if(j(Ze)){if(C(ie))Se++,te(le(ie),Ze,ke,{end:_t});else if(N(ie)||S(ie))Se++,te(ie,Ze,ke,{end:_t});else if(O(ie))Se++,te(ie.readable,Ze,ke,{end:_t});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ze}else ie=u.from(Ze)}return(Pe!=null&&Pe.aborted||Oe!=null&&Oe.aborted)&&e.nextTick($e),ie}function ae(be,we,fe,{end:Me}){let Pe=!1;if(we.on("close",()=>{Pe||fe(new v)}),be.pipe(we,{end:!1}),Me){let Ae=function(){Pe=!0,we.end()};var Oe=Ae;U(be)?e.nextTick(Ae):be.once("end",Ae)}else fe();return i(be,{readable:!0,writable:!1},Ae=>{const $e=be._readableState;Ae&&Ae.code==="ERR_STREAM_PREMATURE_CLOSE"&&$e&&$e.ended&&!$e.errored&&!$e.errorEmitted?be.once("end",fe).once("error",fe):fe(Ae)}),i(we,{readable:!1,writable:!0},fe)}return Ox={pipelineImpl:X,pipeline:G},Ox}var jx,DN;function m8(){if(DN)return jx;DN=1;const{pipeline:e}=fk(),t=Il(),{destroyer:n}=vh(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:c}=Ll(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=pi(),g=nc();return jx=function(...w){if(w.length===0)throw new m("streams");if(w.length===1)return t.from(w[0]);const _=[...w];if(typeof w[0]=="function"&&(w[0]=t.from(w[0])),typeof w[w.length-1]=="function"){const J=w.length-1;w[J]=t.from(w[J])}for(let J=0;J<w.length;++J)if(!(!r(w[J])&&!o(w[J]))){if(J<w.length-1&&!(a(w[J])||c(w[J])||s(w[J])))throw new h(`streams[${J}]`,_[J],"must be readable");if(J>0&&!(i(w[J])||u(w[J])||s(w[J])))throw new h(`streams[${J}]`,_[J],"must be writable")}let x,S,E,C,A;function O(J){const P=C;C=null,P?P(J):J?A.destroy(J):!V&&!U&&A.destroy()}const j=w[0],N=e(w,O),U=!!(i(j)||u(j)||s(j)),V=!!(a(N)||c(N)||s(N));if(A=new t({writableObjectMode:!!(j!=null&&j.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:U,readable:V}),U){if(r(j))A._write=function(P,Z,F){j.write(P,Z)?F():x=F},A._final=function(P){j.end(),S=P},j.on("drain",function(){if(x){const P=x;x=null,P()}});else if(o(j)){const Z=(s(j)?j.writable:j).getWriter();A._write=async function(F,ue,le){try{await Z.ready,Z.write(F).catch(()=>{}),le()}catch(ne){le(ne)}},A._final=async function(F){try{await Z.ready,Z.close().catch(()=>{}),S=F}catch(ue){F(ue)}}}const J=s(N)?N.readable:N;g(J,()=>{if(S){const P=S;S=null,P()}})}if(V){if(r(N))N.on("readable",function(){if(E){const J=E;E=null,J()}}),N.on("end",function(){A.push(null)}),A._read=function(){for(;;){const J=N.read();if(J===null){E=A._read;return}if(!A.push(J))return}};else if(o(N)){const P=(s(N)?N.readable:N).getReader();A._read=async function(){for(;;)try{const{value:Z,done:F}=await P.read();if(!A.push(Z))return;if(F){A.push(null);return}}catch{return}}}}return A._destroy=function(J,P){!J&&C!==null&&(J=new f),E=null,x=null,S=null,C===null?P(J):(C=P,r(N)&&n(N,J))},A},jx}var MN;function SX(){if(MN)return Ry;MN=1;const e=globalThis.AbortController||Om().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=pi(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=_0(),c=Ur().Symbol("kWeak"),f=Ur().Symbol("kResistStopPropagation"),{finished:h}=nc(),m=m8(),{addAbortSignalNoValidate:g}=Zv(),{isWritable:v,isNodeStream:w}=Ll(),{deprecate:_}=ki(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:A,Promise:O,PromiseReject:j,PromiseResolve:N,PromisePrototypeThen:U,Symbol:V}=Ur(),J=V("kEmpty"),P=V("kEof");function Z(Oe,Ae){if(Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal"),w(Oe)&&!v(Oe))throw new t("stream",Oe,"must be writable");const $e=m(this,Oe);return Ae!=null&&Ae.signal&&g(Ae.signal,$e),$e}function F(Oe,Ae){if(typeof Oe!="function")throw new n("fn",["Function","AsyncFunction"],Oe);Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal");let $e=1;(Ae==null?void 0:Ae.concurrency)!=null&&($e=E(Ae.concurrency));let qe=$e-1;return(Ae==null?void 0:Ae.highWaterMark)!=null&&(qe=E(Ae.highWaterMark)),s($e,"options.concurrency",1),s(qe,"options.highWaterMark",0),qe+=$e,(async function*(){const Ne=ki().AbortSignalAny([Ae==null?void 0:Ae.signal].filter(S)),$=this,Se=[],ke={signal:Ne};let ce,ie,Y=!1,_e=0;function De(){Y=!0,Ee()}function Ee(){_e-=1,Ze()}function Ze(){ie&&!Y&&_e<$e&&Se.length<qe&&(ie(),ie=null)}async function Et(){try{for await(let at of $){if(Y)return;if(Ne.aborted)throw new i;try{if(at=Oe(at,ke),at===J)continue;at=N(at)}catch(_t){at=j(_t)}_e+=1,U(at,Ee,De),Se.push(at),ce&&(ce(),ce=null),!Y&&(Se.length>=qe||_e>=$e)&&await new O(_t=>{ie=_t})}Se.push(P)}catch(at){const _t=j(at);U(_t,Ee,De),Se.push(_t)}finally{Y=!0,ce&&(ce(),ce=null)}}Et();try{for(;;){for(;Se.length>0;){const at=await Se[0];if(at===P)return;if(Ne.aborted)throw new i;at!==J&&(yield at),Se.shift(),Ze()}await new O(at=>{ce=at})}}finally{Y=!0,ie&&(ie(),ie=null)}}).call(this)}function ue(Oe=void 0){return Oe!=null&&u(Oe,"options"),(Oe==null?void 0:Oe.signal)!=null&&o(Oe.signal,"options.signal"),(async function*(){let $e=0;for await(const Fe of this){var qe;if(Oe!=null&&(qe=Oe.signal)!==null&&qe!==void 0&&qe.aborted)throw new i({cause:Oe.signal.reason});yield[$e++,Fe]}}).call(this)}async function le(Oe,Ae=void 0){for await(const $e of G.call(this,Oe,Ae))return!0;return!1}async function ne(Oe,Ae=void 0){if(typeof Oe!="function")throw new n("fn",["Function","AsyncFunction"],Oe);return!await le.call(this,async(...$e)=>!await Oe(...$e),Ae)}async function Q(Oe,Ae){for await(const $e of G.call(this,Oe,Ae))return $e}async function te(Oe,Ae){if(typeof Oe!="function")throw new n("fn",["Function","AsyncFunction"],Oe);async function $e(qe,Fe){return await Oe(qe,Fe),J}for await(const qe of F.call(this,$e,Ae));}function G(Oe,Ae){if(typeof Oe!="function")throw new n("fn",["Function","AsyncFunction"],Oe);async function $e(qe,Fe){return await Oe(qe,Fe)?qe:J}return F.call(this,$e,Ae)}class X extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ae(Oe,Ae,$e){var qe;if(typeof Oe!="function")throw new n("reducer",["Function","AsyncFunction"],Oe);$e!=null&&u($e,"options"),($e==null?void 0:$e.signal)!=null&&o($e.signal,"options.signal");let Fe=arguments.length>1;if($e!=null&&(qe=$e.signal)!==null&&qe!==void 0&&qe.aborted){const ce=new i(void 0,{cause:$e.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ce)),ce}const Ne=new e,$=Ne.signal;if($e!=null&&$e.signal){const ce={once:!0,[c]:this,[f]:!0};$e.signal.addEventListener("abort",()=>Ne.abort(),ce)}let Se=!1;try{for await(const ce of this){var ke;if(Se=!0,$e!=null&&(ke=$e.signal)!==null&&ke!==void 0&&ke.aborted)throw new i;Fe?Ae=await Oe(Ae,ce,{signal:$}):(Ae=ce,Fe=!0)}if(!Se&&!Fe)throw new X}finally{Ne.abort()}return Ae}async function be(Oe){Oe!=null&&u(Oe,"options"),(Oe==null?void 0:Oe.signal)!=null&&o(Oe.signal,"options.signal");const Ae=[];for await(const qe of this){var $e;if(Oe!=null&&($e=Oe.signal)!==null&&$e!==void 0&&$e.aborted)throw new i(void 0,{cause:Oe.signal.reason});x(Ae,qe)}return Ae}function we(Oe,Ae){const $e=F.call(this,Oe,Ae);return(async function*(){for await(const Fe of $e)yield*Fe}).call(this)}function fe(Oe){if(Oe=C(Oe),A(Oe))return 0;if(Oe<0)throw new a("number",">= 0",Oe);return Oe}function Me(Oe,Ae=void 0){return Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal"),Oe=fe(Oe),(async function*(){var qe;if(Ae!=null&&(qe=Ae.signal)!==null&&qe!==void 0&&qe.aborted)throw new i;for await(const Ne of this){var Fe;if(Ae!=null&&(Fe=Ae.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new i;Oe--<=0&&(yield Ne)}}).call(this)}function Pe(Oe,Ae=void 0){return Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal"),Oe=fe(Oe),(async function*(){var qe;if(Ae!=null&&(qe=Ae.signal)!==null&&qe!==void 0&&qe.aborted)throw new i;for await(const Ne of this){var Fe;if(Ae!=null&&(Fe=Ae.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new i;if(Oe-- >0&&(yield Ne),Oe<=0)return}}).call(this)}return Ry.streamReturningOperators={asIndexedPairs:_(ue,"readable.asIndexedPairs will be removed in a future version."),drop:Me,filter:G,flatMap:we,map:F,take:Pe,compose:Z},Ry.promiseReturningOperators={every:ne,forEach:te,reduce:ae,toArray:be,some:le,find:Q},Ry}var Dx,PN;function g8(){if(PN)return Dx;PN=1;const{ArrayPrototypePop:e,Promise:t}=Ur(),{isIterable:n,isNodeStream:r,isWebStream:a}=Ll(),{pipelineImpl:i}=fk(),{finished:o}=nc();y8();function s(...u){return new t((c,f)=>{let h,m;const g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(u);h=v.signal,m=v.end}i(u,(v,w)=>{v?f(v):c(w)},{signal:h,end:m})})}return Dx={finished:o,pipeline:s},Dx}var FN;function y8(){if(FN)return cx.exports;FN=1;const{Buffer:e}=tc(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Ur(),{promisify:{custom:a}}=ki(),{streamReturningOperators:i,promiseReturningOperators:o}=SX(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=pi(),u=m8(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=Yv(),{pipeline:h}=fk(),{destroyer:m}=vh(),g=nc(),v=g8(),w=Ll(),_=cx.exports=uk().Stream;_.isDestroyed=w.isDestroyed,_.isDisturbed=w.isDisturbed,_.isErrored=w.isErrored,_.isReadable=w.isReadable,_.isWritable=w.isWritable,_.Readable=Xv();for(const E of n(i)){let A=function(...O){if(new.target)throw s();return _.Readable.from(r(C,this,O))};var S=A;const C=i[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let A=function(...j){if(new.target)throw s();return r(C,this,j)};var S=A;const C=o[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}_.Writable=dk(),_.Duplex=Il(),_.Transform=h8(),_.PassThrough=p8(),_.pipeline=h;const{addAbortSignal:x}=Zv();return _.addAbortSignal=x,_.finished=g,_.destroy=m,_.compose=u,_.setDefaultHighWaterMark=c,_.getDefaultHighWaterMark=f,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},cx.exports}var LN;function EX(){return LN||(LN=1,function(e){const t=y8(),n=g8(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(ux)),ux.exports}var b8=EX();class hk extends b8.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(ot.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(ot.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class pk extends b8.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Wa(new Ue(ot.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Wa(new Ue(ot.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(ot.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(ot.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(ot.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var bo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},vo=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Xa{get position(){return this.flag&td?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=ei(t,n);Object.assign(this,ud(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&Vv||this.inode.flags&Si.Sync)}_emitChange(){Pa(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,YD(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=Qu(t,-1);if(n<0)throw new Ue(ot.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>br?-61441:br)|n,(this._isSync||n>br)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(ot.EINVAL);if(this.dirty=!0,!(this.flag&Va||this.flag&xl))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Pb(t),this.inode.mtimeMs=Pb(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Sl(n,"utf8","a",420);if(!(El(r.flag)&td))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const i=typeof t=="string"?Ar.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Va)throw new Ue(ot.EPERM,"File not opened with a readable mode");this.inode.flags&Si.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Rm(this.inode)&&!Tm(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Sl(t,null,"r",292);if(El(n.flag)&Va)throw new Ue(ot.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Ar.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Va)throw Ue.With("EBADF",this.path,"readLines");return qY({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!ir(this.context,this.inode,pa))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new md(this.inode):new Fl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Va||this.flag&xl))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Rm(this.inode)&&!Tm(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Ar.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const u=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:u}}async writeFile(t,n={}){const r=Sl(n,"utf8","w",420),a=El(r.flag);if(!(a&Va||a&xl))throw new Ue(ot.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const i=typeof t=="string"?Ar.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),QD(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Va)throw Ue.With("EBADF",this.path,"createReadStream");return new hk(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Si.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"createWriteStream");return new pk(t,this)}}async function mk(e,t){e=ln(e),t=ln(t);const n=Fn(e,this),r=Fn(t,this);if(!(await Zi.call(this,Zn(e))).hasAccess(Gr,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Pa(this,"rename",e.toString()),Pa(this,"change",t.toString());return}await k0.call(this,t,await E0(e)),await S0.call(this,e),Pa(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}async function x0(e){try{const{fs:t,path:n}=Fn(await ac.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function Zi(e,t){e=ln(e);const{fs:n,path:r}=Fn(await ac.call(this,e),this);try{const a=await n.stat(r);if(ma&&!ir(this,a,pa))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new md(a):new Fl(a)}catch(a){throw or(a,{[r]:e})}}async function Jv(e,t){e=ln(e);const{fs:n,path:r}=Fn(e,this);try{const a=await n.stat(r);if(ma&&!ir(this,a,pa))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new md(a):new Fl(a)}catch(a){throw or(a,{[r]:e})}}async function v8(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await wo.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function S0(e){e=ln(e);const{fs:t,path:n}=Fn(e,this);try{if(ma&&!ir(this,await t.stat(n),Gr))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function wh(e,t,n){var r;t=ln(t);const a=Qu(n.mode,420),i=El(n.flag),{fullPath:o,fs:s,path:u,stats:c}=await Bb(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&Uv))throw Ue.With("ENOENT",o,"_open");const h=await s.stat(Zn(u));if(!ir(e,h,Gr))throw Ue.With("EACCES",Zn(o),"_open");if(!Ho(h))throw Ue.With("ENOTDIR",Zn(o),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Zo.credentials,v=await s.createFile(u,{mode:a,uid:h.mode&y0?h.uid:m,gid:h.mode&b0?h.gid:g});return new Xa(e,Lb(new Fb(e,t,s,u,i,v)))}if(!ir(e,c,e8(i)))throw Ue.With("EACCES",o,"_open");if(i&qv)throw Ue.With("EEXIST",o,"_open");const f=new Xa(e,Lb(new Fb(e,t,s,u,i,c)));return i&Hv&&await f.truncate(0),f}async function wo(e,t="r",n=420){return await wh(this,e,{flag:t,mode:n})}async function E0(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Sl(t,null,"r",292);return await bo(n,typeof e=="object"&&"fd"in e?e:await wo.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function k0(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Sl(n,"utf8","w+",420),i=bo(r,e instanceof Xa?e:await wo.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Ue(ot.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function w8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Sl(n,"utf8","a",420);if(!(El(a.flag)&td))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Ar.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await bo(r,typeof e=="object"&&"fd"in e?e:await wo.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function gk(e){e=await ac.call(this,e);const{fs:t,path:n}=Fn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!Ho(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ma&&!ir(this,r,Gr))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),Pa(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function _h(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Zo.credentials;t=typeof t=="object"?t:{mode:t};const o=Qu(t==null?void 0:t.mode,511);e=await ac.call(this,e);const{fs:s,path:u,root:c}=Fn(e,this),f={[u]:e},h=async(m,g)=>{if(!ir(this,g,Gr))throw Ue.With("EACCES",Zn(m),"mkdir");const v=await s.mkdir(m,{mode:o,uid:g.mode&y0?g.uid:a,gid:g.mode&b0?g.gid:i});return Pa(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){await h(u,await s.stat(Zn(u)));return}const m=[];for(let v=u,w=e;!await s.exists(v);v=Zn(v),w=Zn(w))m.unshift(v),f[v]=w;if(!m.length)return;const g=[await s.stat(Zn(m[0]))];for(const[v,w]of m.entries())g.push(await h(w,g[v]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw or(m,f)}}async function rc(e,t){t=typeof t=="object"?t:{encoding:t},e=await ac.call(this,e);const{fs:n,path:r}=Fn(e,this),a=await n.stat(r).catch(u=>ur(or(u,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!ir(this,a,pa))throw Ue.With("EACCES",e,"readdir");if(!Ho(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(u=>ur(or(u,{[r]:e}))),o=[],s=async u=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(tr(r,u)).catch(f=>{if(f.code!="ENOENT")throw or(f,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?o.push(new Im(u,c)):(t==null?void 0:t.encoding)=="buffer"?o.push(Ar.from(u)):o.push(u),!(!(t!=null&&t.recursive)||!Ho(c))))for(const f of await rc.call(this,tr(e,u),t))f instanceof Im?(f.path=tr(u,f.path),o.push(f)):Ar.isBuffer(f)?o.push(Ar.from(tr(u,zE(f)))):o.push(tr(u,f))};return await Promise.all(i.map(s)),o}async function _8(e,t){e=ln(e),t=ln(t);const{fs:n,path:r}=Fn(e,this),a=Fn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ma&&!ir(this,await n.stat(Zn(r)),pa))throw Ue.With("EACCES",Zn(r),"link");if(ma&&!(await Zi.call(this,Zn(t))).hasAccess(Gr,this))throw Ue.With("EACCES",Zn(t),"link");if(ma&&!ir(this,await n.stat(r),pa))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw or(i,{[a.path]:t,[r]:e})}}async function x8(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(ot.EINVAL,"Invalid symlink type: "+n);if(t=ln(t),await x0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=bo(r,await wh(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(ln(e,!0)),await a.chmod(Pl)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function $b(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await bo(n,await wh(this,ln(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function S8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await wo.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function E8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await wh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function k8(e,t){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await wo.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function C8(e,t){const n={stack:[],error:void 0,hasError:!1};try{await bo(n,await wh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=vo(n);r&&await r}}async function yk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await wo.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function A8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await bo(r,await wh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=vo(r);a&&await a}}async function Bb(e,t,n){if(n){const u=Fn(t,e),c=await u.fs.stat(u.path).catch(()=>{});return{...u,fullPath:t,stats:c}}try{const u=Fn(t,e),c=await u.fs.stat(u.path);if(!Yf(c))return{...u,fullPath:t,stats:c};const f=Nl.call(e,Zn(t),(await $b.call(e,t)).toString());return await Bb(e,f)}catch{}const{base:r,dir:a}=ys(t),i=a=="/"?"/":await ac.call(e,a),o=tr(i,r),s=Fn(o,e);try{const u=await s.fs.stat(s.path);if(!Yf(u))return{...s,fullPath:o,stats:u};const c=Nl.call(e,i,(await $b.call(e,o)).toString());return await Bb(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}async function ac(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=await Bb(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Ar.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function kX(e,t={}){const n=new a8(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var u;(u=r.shift())===null||u===void 0||u({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function T8(e,t=KE){if(!(await Zi.call(this,e)).hasAccess(t,this))throw new Ue(ot.EACCES)}async function C0(e,t){e=ln(e);const n=await Jv.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&br){case oa:if(t!=null&&t.recursive)for(const r of await rc.call(this,e))await C0.call(this,tr(e,r),t);await gk.call(this,e);break;case Lo:case Pl:case fd:case hd:await S0.call(this,e);break;case pd:case dd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}}async function R8(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await _h.call(this,a),n=="buffer"?Ar.from(a):a}async function bk(e,t,n){if(e=ln(e),t=ln(t),n&&n&ZE&&await x0.call(this,t))throw new Ue(ot.EEXIST,"Destination file already exists",t,"copyFile");await k0.call(this,t,await E0.call(this,e)),Pa(this,"rename",t.toString())}function N8(e,t){return e=ln(e),Promise.resolve(new lk(e,this))}async function vk(e,t,n){e=ln(e),t=ln(t);const r=await Jv.call(this,e);if(n!=null&&n.errorOnExist&&await x0.call(this,t))throw new Ue(ot.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&br){case oa:{if(!(n!=null&&n.recursive))throw new Ue(ot.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([rc.call(this,e,{withFileTypes:!0}),_h.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(tr(e,o.name),tr(t,o.name))||await vk.call(this,tr(e,o.name),tr(t,o.name),n)};await Promise.all(a.map(i));break}case Lo:case Pl:await bk.call(this,e,t);break;case fd:case hd:case pd:case dd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await yk.call(this,t,r.atime,r.mtime)}async function I8(e,t){e=ln(e);const{fs:n}=Fn(e,this);return Promise.resolve(n8(n,t==null?void 0:t.bigint))}function O8(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const u=await rc(s,{withFileTypes:r,encoding:"utf8"});for(const c of u){const f=r?c.path:s+"/"+c;a(r?c:f)||((await Zi(f)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(f)),i.some(h=>h.test(f.replace(/^\/+/g,"")))&&(yield r?c:f.replace(/^\/+/g,"")))}}return o(n)}const CX=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Xa,access:T8,appendFile:w8,chmod:k8,chown:S8,constants:KD,copyFile:bk,cp:vk,exists:x0,glob:O8,lchmod:C8,lchown:E8,link:_8,lstat:Jv,lutimes:A8,mkdir:_h,mkdtemp:R8,open:wo,opendir:N8,readFile:E0,readdir:rc,readlink:$b,realpath:ac,rename:mk,rm:C0,rmdir:gk,stat:Zi,statfs:I8,symlink:x8,truncate:v8,unlink:S0,utimes:yk,watch:kX,writeFile:k0},Symbol.toStringTag,{value:"Module"})),Cn=()=>{};async function AX(e){const t=[];for await(const n of e)t.push(n);return t}function TX(e,t,n=Cn){mk.call(this,e,t).then(()=>n()).catch(n)}function RX(e,t=Cn){x0.call(this,e).then(t).catch(()=>t(!1))}function NX(e,t,n=Cn){n=typeof t=="function"?t:n,Zi.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function IX(e,t,n=Cn){n=typeof t=="function"?t:n,Jv.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function OX(e,t=0,n=Cn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;v8.call(this,e,r).then(()=>n()).catch(n)}function jX(e,t=Cn){S0.call(this,e).then(()=>t()).catch(t)}function DX(e,t,n,r=Cn){const a=Qu(n,420);r=typeof n=="function"?n:r,wo.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function MX(e,t,n=Cn){n=typeof t=="function"?t:n,E0.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function PX(e,t,n,r=Cn){r=typeof n=="function"?n:r,k0.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function FX(e,t,n,r=Cn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,w8.call(this,e,t,a).then(()=>r()).catch(r)}function LX(e,t,n=Cn){n=typeof t=="function"?t:n,new Xa(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new md(r):r)).catch(n)}function $X(e,t=Cn){new Xa(this,e).close().then(()=>t()).catch(t)}function BX(e,t,n=Cn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new Xa(this,e);if(r<0)throw new Ue(ot.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function zX(e,t=Cn){new Xa(this,e).sync().then(()=>t()).catch(t)}function UX(e,t=Cn){new Xa(this,e).datasync().then(()=>t()).catch(t)}function qX(e,t,n,r,a,i=Cn){let o,s,u,c,f;const h=new Xa(this,e);if(typeof t=="string"){switch(f="utf8",typeof n){case"function":i=n;break;case"number":c=n,f=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(ot.EINVAL,"Invalid arguments"));return}o=Ar.from(t),s=0,u=o.length;const m=i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o.toString(f))).catch(m)}else{o=Ar.from(t.buffer),s=n,u=r,c=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o)).catch(m)}}function HX(e,t,n,r,a,i=Cn){new Xa(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function VX(e,t,n,r=Cn){new Xa(this,e).chown(t,n).then(()=>r()).catch(r)}function GX(e,t,n){new Xa(this,e).chmod(t).then(()=>n()).catch(n)}function WX(e,t,n,r=Cn){new Xa(this,e).utimes(t,n).then(()=>r()).catch(r)}function KX(e,t=Cn){gk.call(this,e).then(()=>t()).catch(t)}function ZX(e,t,n=Cn){_h.call(this,e,t).then(()=>n()).catch(n)}function YX(e,t,n=Cn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};rc.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function XX(e,t,n=Cn){_8.call(this,e,t).then(()=>n()).catch(n)}function JX(e,t,n,r=Cn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,x8.call(this,e,t,a).then(()=>r()).catch(r)}function QX(e,t,n=Cn){n=typeof t=="function"?t:n,$b.call(this,e).then(r=>n(void 0,r)).catch(n)}function eJ(e,t,n,r=Cn){S8.call(this,e,t,n).then(()=>r()).catch(r)}function tJ(e,t,n,r=Cn){E8.call(this,e,t,n).then(()=>r()).catch(r)}function nJ(e,t,n=Cn){k8.call(this,e,t).then(()=>n()).catch(n)}function rJ(e,t,n=Cn){C8.call(this,e,t).then(()=>n()).catch(n)}function aJ(e,t,n,r=Cn){yk.call(this,e,t,n).then(()=>r()).catch(r)}function iJ(e,t,n,r=Cn){A8.call(this,e,t,n).then(()=>r()).catch(r)}function oJ(e,t,n=Cn){n=typeof t=="function"?t:n,ac.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function sJ(e,t,n=Cn){const r=typeof t=="number"?t:pa;n=typeof t=="function"?t:n,T8.call(this,e,r).then(()=>n()).catch(n)}const Tf=new Map;function lJ(e,t,n){const r=ln(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(ot.EINVAL,"No listener specified",e.toString(),"watchFile");if(Tf.has(r)){const o=Tf.get(r);o&&o.listeners.add(n);return}const i=new KY(this,r,a);i.on("change",(o,s)=>{const u=Tf.get(r);if(u)for(const c of u.listeners)c(o,s)}),Tf.set(r,{watcher:i,listeners:new Set})}function uJ(e,t=Cn){const n=ln(e),r=Tf.get(n);r&&(t&&t!==Cn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Tf.delete(n)))}function cJ(e,t,n){const r=new a8(this,ln(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Cn),r}function dJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=wo.call(this,e,"r",t==null?void 0:t.mode);return new hk({...t,autoClose:!0},n)}function fJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=wo.call(this,e,"w",t==null?void 0:t.mode);return new pk(t,n)}function hJ(e,t,n=Cn){n=typeof t=="function"?t:n,C0.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function pJ(e,t,n=Cn){n=typeof t=="function"?t:n,R8.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function mJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,bk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function gJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,new Xa(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function yJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,new Xa(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function bJ(e,t,n=Cn){n=typeof t=="function"?t:n,N8.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function vJ(e,t,n,r=Cn){r=typeof n=="function"?n:r,vk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function wJ(e,t,n=Cn){n=typeof t=="function"?t:n,I8.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function _J(e,t){const n=await wo.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function xJ(e,t,n=Cn){n=typeof t=="function"?t:n;const r=O8.call(this,e,typeof t=="function"?void 0:t);AX(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Mc=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},Bi=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},SJ=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},zb;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(zb||(zb={}));let j8=(()=>{var e,t,n,r,a;let i=[cd()],o,s=[],u,c,f=[],h=[],m,g=[],v=[],w,_=[],x=[],S,E=[],C=[],A,O=[],j=[],N,U=[],V=[];return u=class{constructor(J=ur(new Ue(ot.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Bi(this,f,0),this.extsize=(Bi(this,h),Bi(this,g,0)),this.nextents=(Bi(this,v),Bi(this,_,0)),this.projid=(Bi(this,x),Bi(this,E,0)),this.cowextsize=(Bi(this,C),Bi(this,O,0)),this.pad=(Bi(this,j),Bi(this,U,[])),Bi(this,V),this.extsize=J.size,this.nextents=1,this.projid=J.uid,this.cowextsize=J.size;for(const P of Object.keys(Si))J.flags&Si[P]&&P in zb&&(this.xflags|=zb[P])}},SJ(u,"fsxattr"),(()=>{const J=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=yn).uint32.bind(e)],m=[(t=yn).uint32.bind(t)],w=[(n=yn).uint32.bind(n)],S=[(r=yn).uint32.bind(r)],A=[(a=yn).uint32.bind(a)],N=[yn.char(8)],Mc(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:P=>"xflags"in P,get:P=>P.xflags,set:(P,Z)=>{P.xflags=Z}},metadata:J},f,h),Mc(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:P=>"extsize"in P,get:P=>P.extsize,set:(P,Z)=>{P.extsize=Z}},metadata:J},g,v),Mc(null,null,w,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:P=>"nextents"in P,get:P=>P.nextents,set:(P,Z)=>{P.nextents=Z}},metadata:J},_,x),Mc(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:P=>"projid"in P,get:P=>P.projid,set:(P,Z)=>{P.projid=Z}},metadata:J},E,C),Mc(null,null,A,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:P=>"cowextsize"in P,get:P=>P.cowextsize,set:(P,Z)=>{P.cowextsize=Z}},metadata:J},O,j),Mc(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:P=>"pad"in P,get:P=>P.pad,set:(P,Z)=>{P.pad=Z}},metadata:J},U,V),Mc(null,o={value:u},i,{kind:"class",name:u.name,metadata:J},null,s),u=o.value,J&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:J}),Bi(u,s)})(),u})();var Or;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Or||(Or={}));var Do;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Do||(Do={}));async function EJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Fn(e,this);try{const i=new ia(await r.stat(a));switch(t){case Or.GetFlags:case Do.GetFlags:return i.flags;case Or.SetFlags:case Do.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Or.GetVersion:case Do.GetVersion:return i.version;case Or.SetVersion:case Do.SetVersion:i.version=n[0],await r.touch(a,i);return;case Or.Fiemap:break;case Or.GetXattr:return new j8(i);case Or.SetXattr:break;case Or.GetLabel:return r.label;case Or.SetLabel:r.label=n[0];return;case Or.GetUUID:return r.uuid;case Or.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new Ue(ot.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function kJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Fn(e,this);try{const i=new ia(r.statSync(a));switch(t){case Or.GetFlags:case Do.GetFlags:return i.flags;case Or.SetFlags:case Do.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Or.GetVersion:case Do.GetVersion:return i.version;case Or.SetVersion:case Do.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Or.Fiemap:break;case Or.GetXattr:return new j8(i);case Or.SetXattr:break;case Or.GetLabel:return r.label;case Or.SetLabel:r.label=n[0];return;case Or.GetUUID:return r.uuid;case Or.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new Ue(ot.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const CJ=[];function xh(e,t,n,r){if(!t.startsWith("user.")&&!CJ.includes(t))throw new Ue(ot.EPERM,"Only attributes in the user namespace are supported",n,r)}async function AJ(e,t,n={}){var r;e=ln(e);const{fs:a,path:i}=Fn(e,this);xh(this,t,e,"xattr.get");try{const o=await a.stat(i);if(ma&&!ir(this,o,pa))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new qu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Ar.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}function TJ(e,t,n={}){var r;e=ln(e),xh(this,t,e,"xattr.get");const{fs:a,path:i}=Fn(e,this);try{const o=a.statSync(i);if(ma&&!ir(this,o,pa))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new qu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Ar.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}async function RJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Fn(e,this);xh(this,t,e,"xattr.set");try{const s=await i.stat(o);if(ma&&!ir(this,s,Gr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new qu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Ar.from(n)),await i.touch(o,ud(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}function NJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Fn(e,this);xh(this,t,e,"xattr.set");try{const s=i.statSync(o);if(ma&&!ir(this,s,Gr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new qu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Ar.from(n)),i.touchSync(o,ud(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}async function IJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Fn(e,this);xh(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(ma&&!ir(this,i,Gr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new qu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,ud(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}function OJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Fn(e,this);xh(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(ma&&!ir(this,i,Gr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new qu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,ud(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}async function jJ(e){e=ln(e);const{fs:t,path:n}=Fn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}function DJ(e){e=ln(e);const{fs:t,path:n}=Fn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}const MJ=Object.freeze(Object.defineProperty({__proto__:null,get:AJ,getSync:TJ,list:jJ,listSync:DJ,remove:IJ,removeSync:OJ,set:RJ,setSync:NJ},Symbol.toStringTag,{value:"Module"})),Jr=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:NY,Dir:lk,Dirent:Im,get IOC(){return Or},get IOC32(){return Do},ReadStream:hk,Stats:Fl,StatsFs:RY,WriteStream:pk,access:sJ,accessSync:hX,appendFile:FX,appendFileSync:QY,chmod:nJ,chmodSync:cX,chown:eJ,chownSync:lX,chroot:GY,close:$X,closeSync:yd,constants:KD,copyFile:mJ,copyFileSync:u8,cp:vJ,cpSync:c8,createReadStream:dJ,createWriteStream:fJ,exists:RX,existsSync:QE,fchmod:GX,fchmodSync:ik,fchown:VX,fchownSync:ak,fdatasync:UX,fdatasyncSync:rX,fstat:LX,fstatSync:eX,fsync:zX,fsyncSync:nX,ftruncate:BX,ftruncateSync:tX,futimes:WX,futimesSync:ok,glob:xJ,globSync:vX,ioctl:EJ,ioctlSync:kJ,lchmod:rJ,lchmodSync:dX,lchown:tJ,lchownSync:uX,link:XX,linkSync:oX,lopenSync:Wv,lstat:IX,lstatSync:ek,lutimes:iJ,lutimesSync:fX,mkdir:ZX,mkdirSync:sk,mkdtemp:pJ,mkdtempSync:pX,mount:JE,open:DX,openAsBlob:_J,openSync:Gv,opendir:bJ,opendirSync:yX,promises:CX,read:HX,readFile:MX,readFileSync:nk,readSync:iX,readdir:YX,readdirSync:bh,readlink:QX,readlinkSync:N2,readv:gJ,readvSync:mX,realpath:oJ,realpathSync:ec,rename:TX,renameSync:XY,rm:hJ,rmSync:l8,rmdir:KX,rmdirSync:o8,stat:NX,statSync:Hu,statfs:wJ,statfsSync:bX,symlink:JX,symlinkSync:sX,truncate:OX,truncateSync:JY,umount:t8,unlink:jX,unlinkSync:tk,unwatchFile:uJ,utimes:aJ,utimesSync:s8,watch:cJ,watchFile:lJ,write:qX,writeFile:PX,writeFileSync:rk,writeSync:aX,writev:yJ,writevSync:gX,xattr:MJ},Symbol.toStringTag,{value:"Module"}));function $N(e){return FD(e)||WE(e)||e instanceof XE}async function D8(e,t=0){if(typeof e!="object"||e==null)throw xi(new Ue(ot.EINVAL,"Invalid options on mount configuration"));if(!$N(e))throw xi(new Ue(ot.EINVAL,"Invalid mount configuration"));if(e instanceof XE)return await e.ready(),e;WE(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&$N(i)){if(PD("Resolving nested mount configuration: "+a),t>10)throw xi(new Ue(ot.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await D8(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw xi(new Ue(ot.EPERM,"Backend not available: "+n.name));fY(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function PJ(e){if(!FD(e))throw new TypeError("Invalid single mount point configuration");const t=await D8(e);t8("/"),JE("/",t)}const FJ=["delete"];Math.max(...FJ.map(e=>e.length));dY("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const M8=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;M8[e]=t}function LJ(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^M8[(t^e[n])&255];return(t^4294967295)>>>0}var Ir=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},_n=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},wk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let BN=(()=>{var e,t,n,r;let a=[cd()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],v,w=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=_n(this,c,0),this.offset_=(_n(this,f),_n(this,m,0)),this.offset=(_n(this,g),_n(this,w,0)),this.size=(_n(this,_),_n(this,S,0)),_n(this,E)}},wk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=yn).uint32.bind(e)],h=[(t=yn).uint32.bind(t)],v=[(n=yn).uint32.bind(n)],x=[(r=yn).uint32.bind(r)],Ir(null,null,u,{kind:"field",name:"id",static:!1,private:!1,access:{has:A=>"id"in A,get:A=>A.id,set:(A,O)=>{A.id=O}},metadata:C},c,f),Ir(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:A=>"offset_"in A,get:A=>A.offset_,set:(A,O)=>{A.offset_=O}},metadata:C},m,g),Ir(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:A=>"offset"in A,get:A=>A.offset,set:(A,O)=>{A.offset=O}},metadata:C},w,_),Ir(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:A=>"size"in A,get:A=>A.size,set:(A,O)=>{A.size=O}},metadata:C},S,E),Ir(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),_n(s,o)})(),s})();const zN=255;let Pc=(()=>{var e,t,n,r;let a=[cd()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],v,w=[],_=[],x,S=[],E=[],C,A=[],O=[];var j=s=class{constructor(N=ur(new Ue(ot.EINVAL,"Metadata block must be initialized with a superblock")),U=0){if(this.superblock=N,this.offset=U,this.checksum=_n(this,c,0),this.timestamp=(_n(this,f),_n(this,m,Date.now())),this.previous_offset_=(_n(this,g),_n(this,w,0)),this.previous_offset=(_n(this,_),_n(this,S,0)),this._previous=_n(this,E),this.entries=_n(this,A,Array.from({length:zN},()=>new BN)),_n(this,O),this.superblock=N,this.offset=U,!!U&&(Bv(this,N.store._buffer.subarray(U,U+jr(j))),!P8(this)))throw zv(new Ue(ot.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+U.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new j(this.superblock,this.previous_offset)),this._previous}};return wk(s,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=yn).uint32.bind(e)],h=[(t=yn).uint32.bind(t)],v=[(n=yn).uint32.bind(n)],x=[(r=yn).uint32.bind(r)],C=[Am(BN,zN)],Ir(null,null,u,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:U=>"checksum"in U,get:U=>U.checksum,set:(U,V)=>{U.checksum=V}},metadata:N},c,f),Ir(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:U=>"timestamp"in U,get:U=>U.timestamp,set:(U,V)=>{U.timestamp=V}},metadata:N},m,g),Ir(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:U=>"previous_offset_"in U,get:U=>U.previous_offset_,set:(U,V)=>{U.previous_offset_=V}},metadata:N},w,_),Ir(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:U=>"previous_offset"in U,get:U=>U.previous_offset,set:(U,V)=>{U.previous_offset=V}},metadata:N},S,E),Ir(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:U=>"entries"in U,get:U=>U.entries,set:(U,V)=>{U.entries=V}},metadata:N},A,O),Ir(null,i={value:s},a,{kind:"class",name:s.name,metadata:N},null,o),j=s=i.value,N&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),_n(s,o)})(),j=s})();const UN=2049864546;(()=>{var e,t,n,r,a,i,o,s,u,c,f;let h=[cd()],m,g=[],v,w,_=[],x=[],S,E=[],C=[],A,O=[],j=[],N,U=[],V=[],J,P=[],Z=[],F,ue=[],le=[],ne,Q=[],te=[],G,X=[],ae=[],be,we=[],fe=[],Me,Pe=[],Oe=[],Ae,$e=[],qe=[],Fe,Ne=[],$=[],Se,ke=[],ce=[];var ie=v=class{constructor(Y=ur(new Ue(ot.EINVAL,"Super block must be initialized with a store"))){if(this.store=Y,this.checksum=_n(this,_,0),this.magic=(_n(this,x),_n(this,E,UN)),this.version=(_n(this,C),_n(this,O,1)),this.inode_format=(_n(this,j),_n(this,U,OY)),this.flags=(_n(this,V),_n(this,P,0)),this.used_bytes=(_n(this,Z),_n(this,ue,BigInt(0))),this.total_bytes=(_n(this,le),_n(this,Q,BigInt(0))),this.uuid=(_n(this,te),_n(this,X,BigInt(0))),this.metadata_block_size=(_n(this,ae),_n(this,we,jr(Pc))),this.metadata_offset_=(_n(this,fe),_n(this,Pe,0)),this.metadata_offset=(_n(this,Oe),_n(this,$e,0)),this.metadata=_n(this,qe),this.label=_n(this,Ne,""),this._padding=(_n(this,$),_n(this,ke,new Array(132).fill(0))),_n(this,ce),this.store=Y,Y._view.getUint32(ZZ(ie,"magic"),!0)!=UN){Wa("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Pc(this),this.metadata.offset=jr(ie),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(jr(ie)+jr(Pc)),this.total_bytes=BigInt(Y._buffer.byteLength),Y._write(this),Y._write(this.metadata);return}if(Bv(this,Y._buffer.subarray(0,jr(ie))),!P8(this))throw zv(new Ue(ot.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Pc(this,this.metadata_offset)}rotateMetadata(){const Y=new Pc(this);return Y.offset=Number(this.used_bytes),Y.previous_offset=this.metadata_offset,this.metadata=Y,this.metadata_offset=Y.offset,this.store._write(Y),this.used_bytes+=BigInt(jr(Pc)),this.store._write(this),Y}isUnused(Y,_e){if(!_e)return!0;if(Y+_e>this.total_bytes||Y<jr(ie))return!1;for(let De=this.metadata;De;De=De.previous){if(Y<De.offset+jr(Pc)&&Y+_e>De.offset)return!1;for(const Ee of De.entries)if(Ee.offset&&(Y>=Ee.offset&&Y<Ee.offset+Ee.size||Y+_e>Ee.offset&&Y+_e<=Ee.offset+Ee.size||Y<=Ee.offset&&Y+_e>=Ee.offset+Ee.size))return!1}return!0}};return wk(v,"SuperBlock"),(()=>{const Y=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;w=[(e=yn).uint32.bind(e)],S=[(t=yn).uint32.bind(t)],A=[(n=yn).uint16.bind(n)],N=[(r=yn).uint16.bind(r)],J=[(a=yn).uint32.bind(a)],F=[(i=yn).uint64.bind(i)],ne=[(o=yn).uint64.bind(o)],G=[(s=yn).uint128.bind(s)],be=[(u=yn).uint32.bind(u)],Me=[(c=yn).uint32.bind(c)],Ae=[(f=yn).uint32.bind(f)],Fe=[yn.char(64)],Se=[yn.char(132)],Ir(null,null,w,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:_e=>"checksum"in _e,get:_e=>_e.checksum,set:(_e,De)=>{_e.checksum=De}},metadata:Y},_,x),Ir(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:_e=>"magic"in _e,get:_e=>_e.magic,set:(_e,De)=>{_e.magic=De}},metadata:Y},E,C),Ir(null,null,A,{kind:"field",name:"version",static:!1,private:!1,access:{has:_e=>"version"in _e,get:_e=>_e.version,set:(_e,De)=>{_e.version=De}},metadata:Y},O,j),Ir(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:_e=>"inode_format"in _e,get:_e=>_e.inode_format,set:(_e,De)=>{_e.inode_format=De}},metadata:Y},U,V),Ir(null,null,J,{kind:"field",name:"flags",static:!1,private:!1,access:{has:_e=>"flags"in _e,get:_e=>_e.flags,set:(_e,De)=>{_e.flags=De}},metadata:Y},P,Z),Ir(null,null,F,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:_e=>"used_bytes"in _e,get:_e=>_e.used_bytes,set:(_e,De)=>{_e.used_bytes=De}},metadata:Y},ue,le),Ir(null,null,ne,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:_e=>"total_bytes"in _e,get:_e=>_e.total_bytes,set:(_e,De)=>{_e.total_bytes=De}},metadata:Y},Q,te),Ir(null,null,G,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:_e=>"uuid"in _e,get:_e=>_e.uuid,set:(_e,De)=>{_e.uuid=De}},metadata:Y},X,ae),Ir(null,null,be,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:_e=>"metadata_block_size"in _e,get:_e=>_e.metadata_block_size,set:(_e,De)=>{_e.metadata_block_size=De}},metadata:Y},we,fe),Ir(null,null,Me,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:_e=>"metadata_offset_"in _e,get:_e=>_e.metadata_offset_,set:(_e,De)=>{_e.metadata_offset_=De}},metadata:Y},Pe,Oe),Ir(null,null,Ae,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:_e=>"metadata_offset"in _e,get:_e=>_e.metadata_offset,set:(_e,De)=>{_e.metadata_offset=De}},metadata:Y},$e,qe),Ir(null,null,Fe,{kind:"field",name:"label",static:!1,private:!1,access:{has:_e=>"label"in _e,get:_e=>_e.label,set:(_e,De)=>{_e.label=De}},metadata:Y},Ne,$),Ir(null,null,Se,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:_e=>"_padding"in _e,get:_e=>_e._padding,set:(_e,De)=>{_e._padding=De}},metadata:Y},ke,ce),Ir(null,m={value:v},h,{kind:"class",name:v.name,metadata:Y},null,g),ie=v=m.value,Y&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Y}),_n(v,g)})(),ie=v})();function P8(e){const t=Ma(e),n=LJ(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Jr;function $J(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function O2(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?ot[$J(e)]:ot.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Rf(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(O2(e.error))}})}class BJ extends R2{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Rf(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Rf(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Rf(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Rf(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(O2(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(O2(this.tx.error)),this.tx.abort(),t}}async function zJ(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Wa("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Rf(n)}class UJ{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new BJ(t,this)}}const qJ={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Rf(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await zJ(e.storeName||"zenfs",e.idbFactory),n=new UJ(t),r=new JD(n);if(e!=null&&e.disableAsyncCache)return GE("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},HJ=qJ,Ub={APP_LOADED:"app:loaded",APP_ERROR:"app:error",CONVERSATION_SELECTED:"conversation:selected",CONVERSATION_CREATED:"conversation:created",CONVERSATION_DELETED:"conversation:deleted",CONVERSATION_RENAMED:"conversation:renamed",INTERACTION_STARTED:"interaction:started",INTERACTION_STREAM_CHUNK:"interaction:stream_chunk",INTERACTION_COMPLETED:"interaction:completed",PROMPT_SUBMITTED:"prompt:submitted",PROMPT_FINALISED:"prompt:finalised",SETTINGS_OPENED:"settings:opened",SETTINGS_CLOSED:"settings:closed",MOD_LOADED:"mod:loaded",MOD_ERROR:"mod:error",VFS_FILE_READ:"vfs:file:read",VFS_FILE_WRITTEN:"vfs:file:written",VFS_FILE_DELETED:"vfs:file:deleted"};function Oy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mx={exports:{}},qN;function VJ(){return qN||(qN=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(c,f){if(!a[c]){if(!r[c]){var h=typeof Oy=="function"&&Oy;if(!f&&h)return h(c,!0);if(s)return s(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(v){var w=r[c][1][v];return o(w||v)},g,g.exports,n,r,a,i)}return a[c].exports}for(var s=typeof Oy=="function"&&Oy,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,f,h,m,g,v,w,_=[],x=0,S=u.length,E=S,C=i.getTypeOf(u)!=="string";x<u.length;)E=S-x,h=C?(c=u[x++],f=x<S?u[x++]:0,x<S?u[x++]:0):(c=u.charCodeAt(x++),f=x<S?u.charCodeAt(x++):0,x<S?u.charCodeAt(x++):0),m=c>>2,g=(3&c)<<4|f>>4,v=1<E?(15&f)<<2|h>>6:64,w=2<E?63&h:64,_.push(s.charAt(m)+s.charAt(g)+s.charAt(v)+s.charAt(w));return _.join("")},a.decode=function(u){var c,f,h,m,g,v,w=0,_=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&E--,u.charAt(u.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);w<u.length;)c=s.indexOf(u.charAt(w++))<<2|(m=s.indexOf(u.charAt(w++)))>>4,f=(15&m)<<4|(g=s.indexOf(u.charAt(w++)))>>2,h=(3&g)<<6|(v=s.indexOf(u.charAt(w++))),S[_++]=c,g!==64&&(S[_++]=f),v!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(f,h,m,g,v){this.compressedSize=f,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=v}c.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,h,m){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,f,h,m){var g=o,v=m+h;c^=-1;for(var w=m;w<v;w++)c=c>>>8^g[255&(c^f[w])];return-1^c}(0|u,s,s.length,0):function(c,f,h,m){var g=o,v=m+h;c^=-1;for(var w=m;w<v;w++)c=c>>>8^g[255&(c^f.charCodeAt(w))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(h,m){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new f("Deflate",h)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var w,_="";for(w=0;w<v;w++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,w,_,x,S){var E,C,A=g.file,O=g.compression,j=S!==c.utf8encode,N=s.transformTo("string",S(A.name)),U=s.transformTo("string",c.utf8encode(A.name)),V=A.comment,J=s.transformTo("string",S(V)),P=s.transformTo("string",c.utf8encode(V)),Z=U.length!==A.name.length,F=P.length!==V.length,ue="",le="",ne="",Q=A.dir,te=A.date,G={crc32:0,compressedSize:0,uncompressedSize:0};v&&!w||(G.crc32=g.crc32,G.compressedSize=g.compressedSize,G.uncompressedSize=g.uncompressedSize);var X=0;v&&(X|=8),j||!Z&&!F||(X|=2048);var ae=0,be=0;Q&&(ae|=16),x==="UNIX"?(be=798,ae|=function(fe,Me){var Pe=fe;return fe||(Pe=Me?16893:33204),(65535&Pe)<<16}(A.unixPermissions,Q)):(be=20,ae|=function(fe){return 63&(fe||0)}(A.dosPermissions)),E=te.getUTCHours(),E<<=6,E|=te.getUTCMinutes(),E<<=5,E|=te.getUTCSeconds()/2,C=te.getUTCFullYear()-1980,C<<=4,C|=te.getUTCMonth()+1,C<<=5,C|=te.getUTCDate(),Z&&(le=i(1,1)+i(f(N),4)+U,ue+="up"+i(le.length,2)+le),F&&(ne=i(1,1)+i(f(J),4)+P,ue+="uc"+i(ne.length,2)+ne);var we="";return we+=`
\0`,we+=i(X,2),we+=O.magic,we+=i(E,2),we+=i(C,2),we+=i(G.crc32,4),we+=i(G.compressedSize,4),we+=i(G.uncompressedSize,4),we+=i(N.length,2),we+=i(ue.length,2),{fileRecord:h.LOCAL_FILE_HEADER+we+N+ue,dirRecord:h.CENTRAL_FILE_HEADER+i(be,2)+we+i(J.length,2)+"\0\0\0\0"+i(ae,4)+i(_,4)+N+ue+J}}var s=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),h=n("../signature");function m(g,v,w,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=w,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(m,u),m.prototype.push=function(g){var v=g.meta.percent||0,w=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(v+100*(w-_-1))/w:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var w=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,w=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),v)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var w=this.bytesWritten-g,_=function(x,S,E,C,A){var O=s.transformTo("string",A(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(O.length,2)+O}(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(w){v.processChunk(w)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(w){v.error(w)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var w=0;w<v.length;w++)try{v[w].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,u,c){var f=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{s.forEach(function(m,g){h++;var v=function(S,E){var C=S||E,A=i[C];if(!A)throw new Error(C+" is not a valid compression method !");return A}(g.options.compression,u.compression),w=g.options.compressionOptions||u.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(v,w).withStreamInfo("file",{name:m,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(m){f.error(m)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(m){return new o.Promise(function(g,v){var w=m.decompressed.getContentWorker().pipe(new c);w.on("error",function(_){v(_)}).on("end",function(){w.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(w){var _=new u(g);return _.load(w),_}).then(function(w){var _=[o.Promise.resolve(w)],x=w.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(w){for(var _=w.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,A=i.resolve(E.fileNameStr);v.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(A).unsafeOriginalName=C)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,o),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,u,c){i.call(this,u),this._helper=s;var f=this;s.on("data",function(h,m){f.push(h)||f._helper.pause(),c&&c(m)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Wt<"u",newBufferFrom:function(i,o){if(Wt.from&&Wt.from!==Uint8Array.from)return Wt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Wt(i,o)},allocBuffer:function(i){if(Wt.alloc)return Wt.alloc(i);var o=new Wt(i);return o.fill(0),o},isBuffer:function(i){return Wt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(A,O,j){var N,U=s.getTypeOf(O),V=s.extend(j||{},f);V.date=V.date||new Date,V.compression!==null&&(V.compression=V.compression.toUpperCase()),typeof V.unixPermissions=="string"&&(V.unixPermissions=parseInt(V.unixPermissions,8)),V.unixPermissions&&16384&V.unixPermissions&&(V.dir=!0),V.dosPermissions&&16&V.dosPermissions&&(V.dir=!0),V.dir&&(A=x(A)),V.createFolders&&(N=_(A))&&S.call(this,N,!0);var J=U==="string"&&V.binary===!1&&V.base64===!1;j&&j.binary!==void 0||(V.binary=!J),(O instanceof h&&O.uncompressedSize===0||V.dir||!O||O.length===0)&&(V.base64=!1,V.binary=!0,O="",V.compression="STORE",U="string");var P=null;P=O instanceof h||O instanceof u?O:v.isNode&&v.isStream(O)?new w(A,O):s.prepareContent(A,O,V.binary,V.optimizedBinaryString,V.base64);var Z=new m(A,P,V);this.files[A]=Z}var o=n("./utf8"),s=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),w=n("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var O=A.lastIndexOf("/");return 0<O?A.substring(0,O):""},x=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},S=function(A,O){return O=O!==void 0?O:f.createFolders,A=x(A),this.files[A]||i.call(this,A,null,{dir:!0,createFolders:O}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var O,j,N;for(O in this.files)N=this.files[O],(j=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&A(j,N)},filter:function(A){var O=[];return this.forEach(function(j,N){A(j,N)&&O.push(N)}),O},file:function(A,O,j){if(arguments.length!==1)return A=this.root+A,i.call(this,A,O,j),this;if(E(A)){var N=A;return this.filter(function(V,J){return!J.dir&&N.test(V)})}var U=this.files[this.root+A];return U&&!U.dir?U:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(U,V){return V.dir&&A.test(U)});var O=this.root+A,j=S.call(this,O),N=this.clone();return N.root=j.name,N},remove:function(A){A=this.root+A;var O=this.files[A];if(O||(A.slice(-1)!=="/"&&(A+="/"),O=this.files[A]),O&&!O.dir)delete this.files[A];else for(var j=this.filter(function(U,V){return V.name.slice(0,A.length)===A}),N=0;N<j.length;N++)delete this.files[j[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var O,j={};try{if((j=s.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");s.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var N=j.comment||this.comment||"";O=g.generateWorker(this,j,N)}catch(U){(O=new u("error")).error(U)}return new c(O,j.type||"string",j.mimeType)},generateAsync:function(A,O){return this.generateInternalStream(A).accumulate(O)},generateNodeStream:function(A,O){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(O)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===c&&this.data[m+2]===f&&this.data[m+3]===h)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.readData(4);return u===m[0]&&c===m[1]&&f===m[2]&&h===m[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new c(h):o.uint8array?new f(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),u=n("../base64"),c=n("../support"),f=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,w){return new f.Promise(function(_,x){var S=[],E=v._internalType,C=v._outputType,A=v._mimeType;v.on("data",function(O,j){S.push(O),w&&w(j)}).on("error",function(O){S=[],x(O)}).on("end",function(){try{var O=function(j,N,U){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),U);case"base64":return u.encode(N);default:return i.transformTo(j,N)}}(C,function(j,N){var U,V=0,J=null,P=0;for(U=0;U<N.length;U++)P+=N[U].length;switch(j){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(J=new Uint8Array(P),U=0;U<N.length;U++)J.set(N[U],V),V+=N[U].length;return J;case"nodebuffer":return Wt.concat(N);default:throw new Error("concat : unsupported type '"+j+"'")}}(E,S),A);_(O)}catch(j){x(j)}S=[]}).resume()})}function g(v,w,_){var x=w;switch(w){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=w,this._mimeType=_,i.checkSupport(x),this._worker=v.pipe(new o(x)),v.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,w){var _=this;return v==="data"?this._worker.on(v,function(x){w.call(_,x.data,x.meta)}):this._worker.on(v,function(){i.delay(w,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Wt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(v){var w,_,x,S,E,C=v.length,A=0;for(S=0;S<C;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),A+=_<128?1:_<2048?2:_<65536?3:4;for(w=o.uint8array?new Uint8Array(A):new Array(A),S=E=0;E<A;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?w[E++]=_:(_<2048?w[E++]=192|_>>>6:(_<65536?w[E++]=224|_>>>12:(w[E++]=240|_>>>18,w[E++]=128|_>>>12&63),w[E++]=128|_>>>6&63),w[E++]=128|63&_);return w}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var w,_,x,S,E=v.length,C=new Array(2*E);for(w=_=0;w<E;)if((x=v[w++])<128)C[_++]=x;else if(4<(S=c[x]))C[_++]=65533,w+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&w<E;)x=x<<6|63&v[w++],S--;1<S?C[_++]=65533:x<65536?C[_++]=x:(x-=65536,C[_++]=55296|x>>10&1023,C[_++]=56320|1023&x)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,u),h.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=v;(v=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),v.set(w,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+c[S[C]]>E?C:E}(v),x=v;_!==v.length&&(o.uint8array?(x=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(x=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),u=n("./external");function c(w){return w}function f(w,_){for(var x=0;x<w.length;++x)_[x]=255&w.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(w,_){a.checkSupport("blob");try{return new Blob([w],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(w),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(w,_,x){var S=[],E=0,C=w.length;if(C<=x)return String.fromCharCode.apply(null,w);for(;E<C;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,w.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,w.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(w){for(var _="",x=0;x<w.length;x++)_+=String.fromCharCode(w[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function m(w){var _=65536,x=a.getTypeOf(w),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(w,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(w)}function g(w,_){for(var x=0;x<w.length;x++)_[x]=w[x];return _}a.applyFromCharCode=m;var v={};v.string={string:c,array:function(w){return f(w,new Array(w.length))},arraybuffer:function(w){return v.string.uint8array(w).buffer},uint8array:function(w){return f(w,new Uint8Array(w.length))},nodebuffer:function(w){return f(w,s.allocBuffer(w.length))}},v.array={string:m,array:c,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(w)}},v.arraybuffer={string:function(w){return m(new Uint8Array(w))},array:function(w){return g(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:c,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return s.newBufferFrom(new Uint8Array(w))}},v.uint8array={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:c,nodebuffer:function(w){return s.newBufferFrom(w)}},v.nodebuffer={string:m,array:function(w){return g(w,new Array(w.length))},arraybuffer:function(w){return v.nodebuffer.uint8array(w).buffer},uint8array:function(w){return g(w,new Uint8Array(w.length))},nodebuffer:c},a.transformTo=function(w,_){if(_=_||"",!w)return _;a.checkSupport(w);var x=a.getTypeOf(_);return v[x][w](_)},a.resolve=function(w){for(var _=w.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(w)?"nodebuffer":i.uint8array&&w instanceof Uint8Array?"uint8array":i.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(w){if(!i[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(w){var _,x,S="";for(x=0;x<(w||"").length;x++)S+="\\x"+((_=w.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(w,_,x){setImmediate(function(){w.apply(x||null,_||[])})},a.inherits=function(w,_){function x(){}x.prototype=_.prototype,w.prototype=new x},a.extend=function(){var w,_,x={};for(w=0;w<arguments.length;w++)for(_ in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],_)&&x[_]===void 0&&(x[_]=arguments[w][_]);return x},a.prepareContent=function(w,_,x,S,E){return u.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(A,O){var j=new FileReader;j.onload=function(N){A(N.target.result)},j.onerror=function(N){O(N.target.error)},j.readAsArrayBuffer(C)}):C}).then(function(C){var A=a.getTypeOf(C);return A?(A==="arraybuffer"?C=a.transformTo("uint8array",C):A==="string"&&(E?C=o.decode(C):x&&S!==!0&&(C=function(O){return f(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),u=n("./zipEntry"),c=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=c.uint8array?"uint8array":"array",g=o.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),f=n("./compressions"),h=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,w;if(g.skip(22),this.fileNameLength=g.readInt(2),w=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===_)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,w,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),w=g.readInt(2),_=g.readData(w),this.extraFields[v]={id:v,length:w,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var w=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,w,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=w,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var w=null,_="string";try{if(!v)throw new Error("No output type specified.");var x=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),w=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(w=w.pipe(new u.Utf8EncodeWorker)),!S&&x&&(w=w.pipe(new u.Utf8DecodeWorker))}catch(E){(w=new f("error")).error(E)}return new o(w,_,"")},async:function(v,w){return this.internalStream(v).accumulate(w)},nodeStream:function(v,w){return this.internalStream(v||"nodebuffer").toNodejsStream(w)},_compressWorker:function(v,w){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,v,w)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,f=new u(v),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var w=i.document.createElement("script");w.onreadystatechange=function(){v(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},i.document.documentElement.appendChild(w)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,o=function(){m.port2.postMessage(0)}}var g=[];function v(){var w,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],w=-1;++w<x;)_[w]();x=g.length}s=!1}r.exports=function(w){g.push(w)!==1||s||o()}}).call(this,typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},u=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==o&&w(this,x)}function m(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var C;try{C=S(E)}catch(A){return s.reject(x,A)}C===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,C)})}function v(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function w(x,S){var E=!1;function C(j){E||(E=!0,s.reject(x,j))}function A(j){E||(E=!0,s.resolve(x,j))}var O=_(function(){S(A,C)});O.status==="error"&&C(O.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==f?g(E,this.state===c?x:S,this.outcome):this.queue.push(new m(E,x,S)),E},m.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){s.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(v,S);if(E.status==="error")return s.reject(x,E.value);var C=E.value;if(C)w(x,C);else{x.state=c,x.outcome=S;for(var A=-1,O=x.queue.length;++A<O;)x.queue[A].callFulfilled(S)}return x},s.reject=function(x,S){x.state=u,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var A=new Array(E),O=0,j=-1,N=new this(o);++j<E;)U(x[j],j);return N;function U(V,J){S.resolve(V).then(function(P){A[J]=P,++O!==E||C||(C=!0,s.resolve(N,A))},function(P){C||(C=!0,s.reject(N,P))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var A=-1,O=new this(o);++A<E;)j=x[A],S.resolve(j).then(function(N){C||(C=!0,s.resolve(O,N))},function(N){C||(C=!0,s.reject(O,N))});var j;return O}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,h=0,m=-1,g=0,v=8;function w(x){if(!(this instanceof w))return new w(x);this.options=o.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(u[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?s.string2buf(S.dictionary):f.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(u[E]);this._dict_set=!0}}function _(x,S){var E=new w(S);if(E.push(x,!0),E.err)throw E.msg||u[E.err];return E.result}w.prototype.push=function(x,S){var E,C,A=this.strm,O=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?A.input=s.string2buf(x):f.call(x)==="[object ArrayBuffer]"?A.input=new Uint8Array(x):A.input=x,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(O),A.next_out=0,A.avail_out=O),(E=i.deflate(A,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(A.avail_out=0))},w.prototype.onData=function(x){this.chunks.push(x)},w.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=w,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(w){if(!(this instanceof g))return new g(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||w&&w.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==u.Z_OK)throw new Error(c[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(w,_){var x=new g(_);if(x.push(w,!0),x.err)throw x.msg||c[x.err];return x.result}g.prototype.push=function(w,_){var x,S,E,C,A,O,j=this.strm,N=this.options.chunkSize,U=this.options.dictionary,V=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof w=="string"?j.input=s.binstring2buf(w):m.call(w)==="[object ArrayBuffer]"?j.input=new Uint8Array(w):j.input=w,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new o.Buf8(N),j.next_out=0,j.avail_out=N),(x=i.inflate(j,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&U&&(O=typeof U=="string"?s.string2buf(U):m.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,x=i.inflateSetDictionary(this.strm,O)),x===u.Z_BUF_ERROR&&V===!0&&(x=u.Z_OK,V=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&x!==u.Z_STREAM_END&&(j.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(j.output,j.next_out),C=j.next_out-E,A=s.buf2string(j.output,E),j.next_out=C,j.avail_out=N-C,C&&o.arraySet(j.output,j.output,E,C,0),this.onData(A)):this.onData(o.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(V=!0)}while((0<j.avail_in||j.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(j.avail_out=0))},g.prototype.onData=function(w){this.chunks.push(w)},g.prototype.onEnd=function(w){w===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(w,_){return(_=_||{}).raw=!0,v(w,_)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,f,h,m){if(c.subarray&&u.subarray)u.set(c.subarray(f,f+h),m);else for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){var c,f,h,m,g,v;for(c=h=0,f=u.length;c<f;c++)h+=u[c].length;for(v=new Uint8Array(h),c=m=0,f=u.length;c<f;c++)g=u[c],v.set(g,m),m+=g.length;return v}},s={arraySet:function(u,c,f,h,m){for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(h,m){if(m<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(h[v]);return g}u[254]=u[254]=1,a.string2buf=function(h){var m,g,v,w,_,x=h.length,S=0;for(w=0;w<x;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),S+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(S),w=_=0;_<S;w++)(64512&(g=h.charCodeAt(w)))==55296&&w+1<x&&(64512&(v=h.charCodeAt(w+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),w++),g<128?m[_++]=g:(g<2048?m[_++]=192|g>>>6:(g<65536?m[_++]=224|g>>>12:(m[_++]=240|g>>>18,m[_++]=128|g>>>12&63),m[_++]=128|g>>>6&63),m[_++]=128|63&g);return m},a.buf2binstring=function(h){return f(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,v=m.length;g<v;g++)m[g]=h.charCodeAt(g);return m},a.buf2string=function(h,m){var g,v,w,_,x=m||h.length,S=new Array(2*x);for(g=v=0;g<x;)if((w=h[g++])<128)S[v++]=w;else if(4<(_=u[w]))S[v++]=65533,g+=_-1;else{for(w&=_===2?31:_===3?15:7;1<_&&g<x;)w=w<<6|63&h[g++],_--;1<_?S[v++]=65533:w<65536?S[v++]=w:(w-=65536,S[v++]=55296|w>>10&1023,S[v++]=56320|1023&w)}return f(S,v)},a.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+u[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,u){for(var c=65535&i|0,f=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;f=f+(c=c+o[u++]|0)|0,--h;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,c){var f=i,h=c+u;o^=-1;for(var m=c;m<h;m++)o=o>>>8^f[255&(o^s[m])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),u=n("./adler32"),c=n("./crc32"),f=n("./messages"),h=0,m=4,g=0,v=-2,w=-1,_=4,x=2,S=8,E=9,C=286,A=30,O=19,j=2*C+1,N=15,U=3,V=258,J=V+U+1,P=42,Z=113,F=1,ue=2,le=3,ne=4;function Q($,Se){return $.msg=f[Se],Se}function te($){return($<<1)-(4<$?9:0)}function G($){for(var Se=$.length;0<=--Se;)$[Se]=0}function X($){var Se=$.state,ke=Se.pending;ke>$.avail_out&&(ke=$.avail_out),ke!==0&&(o.arraySet($.output,Se.pending_buf,Se.pending_out,ke,$.next_out),$.next_out+=ke,Se.pending_out+=ke,$.total_out+=ke,$.avail_out-=ke,Se.pending-=ke,Se.pending===0&&(Se.pending_out=0))}function ae($,Se){s._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,Se),$.block_start=$.strstart,X($.strm)}function be($,Se){$.pending_buf[$.pending++]=Se}function we($,Se){$.pending_buf[$.pending++]=Se>>>8&255,$.pending_buf[$.pending++]=255&Se}function fe($,Se){var ke,ce,ie=$.max_chain_length,Y=$.strstart,_e=$.prev_length,De=$.nice_match,Ee=$.strstart>$.w_size-J?$.strstart-($.w_size-J):0,Ze=$.window,Et=$.w_mask,at=$.prev,_t=$.strstart+V,Nt=Ze[Y+_e-1],Rt=Ze[Y+_e];$.prev_length>=$.good_match&&(ie>>=2),De>$.lookahead&&(De=$.lookahead);do if(Ze[(ke=Se)+_e]===Rt&&Ze[ke+_e-1]===Nt&&Ze[ke]===Ze[Y]&&Ze[++ke]===Ze[Y+1]){Y+=2,ke++;do;while(Ze[++Y]===Ze[++ke]&&Ze[++Y]===Ze[++ke]&&Ze[++Y]===Ze[++ke]&&Ze[++Y]===Ze[++ke]&&Ze[++Y]===Ze[++ke]&&Ze[++Y]===Ze[++ke]&&Ze[++Y]===Ze[++ke]&&Ze[++Y]===Ze[++ke]&&Y<_t);if(ce=V-(_t-Y),Y=_t-V,_e<ce){if($.match_start=Se,De<=(_e=ce))break;Nt=Ze[Y+_e-1],Rt=Ze[Y+_e]}}while((Se=at[Se&Et])>Ee&&--ie!=0);return _e<=$.lookahead?_e:$.lookahead}function Me($){var Se,ke,ce,ie,Y,_e,De,Ee,Ze,Et,at=$.w_size;do{if(ie=$.window_size-$.lookahead-$.strstart,$.strstart>=at+(at-J)){for(o.arraySet($.window,$.window,at,at,0),$.match_start-=at,$.strstart-=at,$.block_start-=at,Se=ke=$.hash_size;ce=$.head[--Se],$.head[Se]=at<=ce?ce-at:0,--ke;);for(Se=ke=at;ce=$.prev[--Se],$.prev[Se]=at<=ce?ce-at:0,--ke;);ie+=at}if($.strm.avail_in===0)break;if(_e=$.strm,De=$.window,Ee=$.strstart+$.lookahead,Ze=ie,Et=void 0,Et=_e.avail_in,Ze<Et&&(Et=Ze),ke=Et===0?0:(_e.avail_in-=Et,o.arraySet(De,_e.input,_e.next_in,Et,Ee),_e.state.wrap===1?_e.adler=u(_e.adler,De,Et,Ee):_e.state.wrap===2&&(_e.adler=c(_e.adler,De,Et,Ee)),_e.next_in+=Et,_e.total_in+=Et,Et),$.lookahead+=ke,$.lookahead+$.insert>=U)for(Y=$.strstart-$.insert,$.ins_h=$.window[Y],$.ins_h=($.ins_h<<$.hash_shift^$.window[Y+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[Y+U-1])&$.hash_mask,$.prev[Y&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=Y,Y++,$.insert--,!($.lookahead+$.insert<U)););}while($.lookahead<J&&$.strm.avail_in!==0)}function Pe($,Se){for(var ke,ce;;){if($.lookahead<J){if(Me($),$.lookahead<J&&Se===h)return F;if($.lookahead===0)break}if(ke=0,$.lookahead>=U&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+U-1])&$.hash_mask,ke=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),ke!==0&&$.strstart-ke<=$.w_size-J&&($.match_length=fe($,ke)),$.match_length>=U)if(ce=s._tr_tally($,$.strstart-$.match_start,$.match_length-U),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=U){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+U-1])&$.hash_mask,ke=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else ce=s._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(ce&&(ae($,!1),$.strm.avail_out===0))return F}return $.insert=$.strstart<U-1?$.strstart:U-1,Se===m?(ae($,!0),$.strm.avail_out===0?le:ne):$.last_lit&&(ae($,!1),$.strm.avail_out===0)?F:ue}function Oe($,Se){for(var ke,ce,ie;;){if($.lookahead<J){if(Me($),$.lookahead<J&&Se===h)return F;if($.lookahead===0)break}if(ke=0,$.lookahead>=U&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+U-1])&$.hash_mask,ke=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=U-1,ke!==0&&$.prev_length<$.max_lazy_match&&$.strstart-ke<=$.w_size-J&&($.match_length=fe($,ke),$.match_length<=5&&($.strategy===1||$.match_length===U&&4096<$.strstart-$.match_start)&&($.match_length=U-1)),$.prev_length>=U&&$.match_length<=$.prev_length){for(ie=$.strstart+$.lookahead-U,ce=s._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-U),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=ie&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+U-1])&$.hash_mask,ke=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=U-1,$.strstart++,ce&&(ae($,!1),$.strm.avail_out===0))return F}else if($.match_available){if((ce=s._tr_tally($,0,$.window[$.strstart-1]))&&ae($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return F}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(ce=s._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<U-1?$.strstart:U-1,Se===m?(ae($,!0),$.strm.avail_out===0?le:ne):$.last_lit&&(ae($,!1),$.strm.avail_out===0)?F:ue}function Ae($,Se,ke,ce,ie){this.good_length=$,this.max_lazy=Se,this.nice_length=ke,this.max_chain=ce,this.func=ie}function $e(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*j),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*C+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function qe($){var Se;return $&&$.state?($.total_in=$.total_out=0,$.data_type=x,(Se=$.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?P:Z,$.adler=Se.wrap===2?0:1,Se.last_flush=h,s._tr_init(Se),g):Q($,v)}function Fe($){var Se=qe($);return Se===g&&function(ke){ke.window_size=2*ke.w_size,G(ke.head),ke.max_lazy_match=i[ke.level].max_lazy,ke.good_match=i[ke.level].good_length,ke.nice_match=i[ke.level].nice_length,ke.max_chain_length=i[ke.level].max_chain,ke.strstart=0,ke.block_start=0,ke.lookahead=0,ke.insert=0,ke.match_length=ke.prev_length=U-1,ke.match_available=0,ke.ins_h=0}($.state),Se}function Ne($,Se,ke,ce,ie,Y){if(!$)return v;var _e=1;if(Se===w&&(Se=6),ce<0?(_e=0,ce=-ce):15<ce&&(_e=2,ce-=16),ie<1||E<ie||ke!==S||ce<8||15<ce||Se<0||9<Se||Y<0||_<Y)return Q($,v);ce===8&&(ce=9);var De=new $e;return($.state=De).strm=$,De.wrap=_e,De.gzhead=null,De.w_bits=ce,De.w_size=1<<De.w_bits,De.w_mask=De.w_size-1,De.hash_bits=ie+7,De.hash_size=1<<De.hash_bits,De.hash_mask=De.hash_size-1,De.hash_shift=~~((De.hash_bits+U-1)/U),De.window=new o.Buf8(2*De.w_size),De.head=new o.Buf16(De.hash_size),De.prev=new o.Buf16(De.w_size),De.lit_bufsize=1<<ie+6,De.pending_buf_size=4*De.lit_bufsize,De.pending_buf=new o.Buf8(De.pending_buf_size),De.d_buf=1*De.lit_bufsize,De.l_buf=3*De.lit_bufsize,De.level=Se,De.strategy=Y,De.method=ke,Fe($)}i=[new Ae(0,0,0,0,function($,Se){var ke=65535;for(ke>$.pending_buf_size-5&&(ke=$.pending_buf_size-5);;){if($.lookahead<=1){if(Me($),$.lookahead===0&&Se===h)return F;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var ce=$.block_start+ke;if(($.strstart===0||$.strstart>=ce)&&($.lookahead=$.strstart-ce,$.strstart=ce,ae($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-J&&(ae($,!1),$.strm.avail_out===0))return F}return $.insert=0,Se===m?(ae($,!0),$.strm.avail_out===0?le:ne):($.strstart>$.block_start&&(ae($,!1),$.strm.avail_out),F)}),new Ae(4,4,8,4,Pe),new Ae(4,5,16,8,Pe),new Ae(4,6,32,32,Pe),new Ae(4,4,16,16,Oe),new Ae(8,16,32,32,Oe),new Ae(8,16,128,128,Oe),new Ae(8,32,128,256,Oe),new Ae(32,128,258,1024,Oe),new Ae(32,258,258,4096,Oe)],a.deflateInit=function($,Se){return Ne($,Se,S,15,8,0)},a.deflateInit2=Ne,a.deflateReset=Fe,a.deflateResetKeep=qe,a.deflateSetHeader=function($,Se){return $&&$.state?$.state.wrap!==2?v:($.state.gzhead=Se,g):v},a.deflate=function($,Se){var ke,ce,ie,Y;if(!$||!$.state||5<Se||Se<0)return $?Q($,v):v;if(ce=$.state,!$.output||!$.input&&$.avail_in!==0||ce.status===666&&Se!==m)return Q($,$.avail_out===0?-5:v);if(ce.strm=$,ke=ce.last_flush,ce.last_flush=Se,ce.status===P)if(ce.wrap===2)$.adler=0,be(ce,31),be(ce,139),be(ce,8),ce.gzhead?(be(ce,(ce.gzhead.text?1:0)+(ce.gzhead.hcrc?2:0)+(ce.gzhead.extra?4:0)+(ce.gzhead.name?8:0)+(ce.gzhead.comment?16:0)),be(ce,255&ce.gzhead.time),be(ce,ce.gzhead.time>>8&255),be(ce,ce.gzhead.time>>16&255),be(ce,ce.gzhead.time>>24&255),be(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),be(ce,255&ce.gzhead.os),ce.gzhead.extra&&ce.gzhead.extra.length&&(be(ce,255&ce.gzhead.extra.length),be(ce,ce.gzhead.extra.length>>8&255)),ce.gzhead.hcrc&&($.adler=c($.adler,ce.pending_buf,ce.pending,0)),ce.gzindex=0,ce.status=69):(be(ce,0),be(ce,0),be(ce,0),be(ce,0),be(ce,0),be(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),be(ce,3),ce.status=Z);else{var _e=S+(ce.w_bits-8<<4)<<8;_e|=(2<=ce.strategy||ce.level<2?0:ce.level<6?1:ce.level===6?2:3)<<6,ce.strstart!==0&&(_e|=32),_e+=31-_e%31,ce.status=Z,we(ce,_e),ce.strstart!==0&&(we(ce,$.adler>>>16),we(ce,65535&$.adler)),$.adler=1}if(ce.status===69)if(ce.gzhead.extra){for(ie=ce.pending;ce.gzindex<(65535&ce.gzhead.extra.length)&&(ce.pending!==ce.pending_buf_size||(ce.gzhead.hcrc&&ce.pending>ie&&($.adler=c($.adler,ce.pending_buf,ce.pending-ie,ie)),X($),ie=ce.pending,ce.pending!==ce.pending_buf_size));)be(ce,255&ce.gzhead.extra[ce.gzindex]),ce.gzindex++;ce.gzhead.hcrc&&ce.pending>ie&&($.adler=c($.adler,ce.pending_buf,ce.pending-ie,ie)),ce.gzindex===ce.gzhead.extra.length&&(ce.gzindex=0,ce.status=73)}else ce.status=73;if(ce.status===73)if(ce.gzhead.name){ie=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ie&&($.adler=c($.adler,ce.pending_buf,ce.pending-ie,ie)),X($),ie=ce.pending,ce.pending===ce.pending_buf_size)){Y=1;break}Y=ce.gzindex<ce.gzhead.name.length?255&ce.gzhead.name.charCodeAt(ce.gzindex++):0,be(ce,Y)}while(Y!==0);ce.gzhead.hcrc&&ce.pending>ie&&($.adler=c($.adler,ce.pending_buf,ce.pending-ie,ie)),Y===0&&(ce.gzindex=0,ce.status=91)}else ce.status=91;if(ce.status===91)if(ce.gzhead.comment){ie=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ie&&($.adler=c($.adler,ce.pending_buf,ce.pending-ie,ie)),X($),ie=ce.pending,ce.pending===ce.pending_buf_size)){Y=1;break}Y=ce.gzindex<ce.gzhead.comment.length?255&ce.gzhead.comment.charCodeAt(ce.gzindex++):0,be(ce,Y)}while(Y!==0);ce.gzhead.hcrc&&ce.pending>ie&&($.adler=c($.adler,ce.pending_buf,ce.pending-ie,ie)),Y===0&&(ce.status=103)}else ce.status=103;if(ce.status===103&&(ce.gzhead.hcrc?(ce.pending+2>ce.pending_buf_size&&X($),ce.pending+2<=ce.pending_buf_size&&(be(ce,255&$.adler),be(ce,$.adler>>8&255),$.adler=0,ce.status=Z)):ce.status=Z),ce.pending!==0){if(X($),$.avail_out===0)return ce.last_flush=-1,g}else if($.avail_in===0&&te(Se)<=te(ke)&&Se!==m)return Q($,-5);if(ce.status===666&&$.avail_in!==0)return Q($,-5);if($.avail_in!==0||ce.lookahead!==0||Se!==h&&ce.status!==666){var De=ce.strategy===2?function(Ee,Ze){for(var Et;;){if(Ee.lookahead===0&&(Me(Ee),Ee.lookahead===0)){if(Ze===h)return F;break}if(Ee.match_length=0,Et=s._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++,Et&&(ae(Ee,!1),Ee.strm.avail_out===0))return F}return Ee.insert=0,Ze===m?(ae(Ee,!0),Ee.strm.avail_out===0?le:ne):Ee.last_lit&&(ae(Ee,!1),Ee.strm.avail_out===0)?F:ue}(ce,Se):ce.strategy===3?function(Ee,Ze){for(var Et,at,_t,Nt,Rt=Ee.window;;){if(Ee.lookahead<=V){if(Me(Ee),Ee.lookahead<=V&&Ze===h)return F;if(Ee.lookahead===0)break}if(Ee.match_length=0,Ee.lookahead>=U&&0<Ee.strstart&&(at=Rt[_t=Ee.strstart-1])===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]){Nt=Ee.strstart+V;do;while(at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&at===Rt[++_t]&&_t<Nt);Ee.match_length=V-(Nt-_t),Ee.match_length>Ee.lookahead&&(Ee.match_length=Ee.lookahead)}if(Ee.match_length>=U?(Et=s._tr_tally(Ee,1,Ee.match_length-U),Ee.lookahead-=Ee.match_length,Ee.strstart+=Ee.match_length,Ee.match_length=0):(Et=s._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++),Et&&(ae(Ee,!1),Ee.strm.avail_out===0))return F}return Ee.insert=0,Ze===m?(ae(Ee,!0),Ee.strm.avail_out===0?le:ne):Ee.last_lit&&(ae(Ee,!1),Ee.strm.avail_out===0)?F:ue}(ce,Se):i[ce.level].func(ce,Se);if(De!==le&&De!==ne||(ce.status=666),De===F||De===le)return $.avail_out===0&&(ce.last_flush=-1),g;if(De===ue&&(Se===1?s._tr_align(ce):Se!==5&&(s._tr_stored_block(ce,0,0,!1),Se===3&&(G(ce.head),ce.lookahead===0&&(ce.strstart=0,ce.block_start=0,ce.insert=0))),X($),$.avail_out===0))return ce.last_flush=-1,g}return Se!==m?g:ce.wrap<=0?1:(ce.wrap===2?(be(ce,255&$.adler),be(ce,$.adler>>8&255),be(ce,$.adler>>16&255),be(ce,$.adler>>24&255),be(ce,255&$.total_in),be(ce,$.total_in>>8&255),be(ce,$.total_in>>16&255),be(ce,$.total_in>>24&255)):(we(ce,$.adler>>>16),we(ce,65535&$.adler)),X($),0<ce.wrap&&(ce.wrap=-ce.wrap),ce.pending!==0?g:1)},a.deflateEnd=function($){var Se;return $&&$.state?(Se=$.state.status)!==P&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==Z&&Se!==666?Q($,v):($.state=null,Se===Z?Q($,-3):g):v},a.deflateSetDictionary=function($,Se){var ke,ce,ie,Y,_e,De,Ee,Ze,Et=Se.length;if(!$||!$.state||(Y=(ke=$.state).wrap)===2||Y===1&&ke.status!==P||ke.lookahead)return v;for(Y===1&&($.adler=u($.adler,Se,Et,0)),ke.wrap=0,Et>=ke.w_size&&(Y===0&&(G(ke.head),ke.strstart=0,ke.block_start=0,ke.insert=0),Ze=new o.Buf8(ke.w_size),o.arraySet(Ze,Se,Et-ke.w_size,ke.w_size,0),Se=Ze,Et=ke.w_size),_e=$.avail_in,De=$.next_in,Ee=$.input,$.avail_in=Et,$.next_in=0,$.input=Se,Me(ke);ke.lookahead>=U;){for(ce=ke.strstart,ie=ke.lookahead-(U-1);ke.ins_h=(ke.ins_h<<ke.hash_shift^ke.window[ce+U-1])&ke.hash_mask,ke.prev[ce&ke.w_mask]=ke.head[ke.ins_h],ke.head[ke.ins_h]=ce,ce++,--ie;);ke.strstart=ce,ke.lookahead=U-1,Me(ke)}return ke.strstart+=ke.lookahead,ke.block_start=ke.strstart,ke.insert=ke.lookahead,ke.lookahead=0,ke.match_length=ke.prev_length=U-1,ke.match_available=0,$.next_in=De,$.input=Ee,$.avail_in=_e,ke.wrap=Y,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,u,c,f,h,m,g,v,w,_,x,S,E,C,A,O,j,N,U,V,J,P,Z,F,ue;s=i.state,u=i.next_in,F=i.input,c=u+(i.avail_in-5),f=i.next_out,ue=i.output,h=f-(o-i.avail_out),m=f+(i.avail_out-257),g=s.dmax,v=s.wsize,w=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,C=s.lencode,A=s.distcode,O=(1<<s.lenbits)-1,j=(1<<s.distbits)-1;e:do{E<15&&(S+=F[u++]<<E,E+=8,S+=F[u++]<<E,E+=8),N=C[S&O];t:for(;;){if(S>>>=U=N>>>24,E-=U,(U=N>>>16&255)===0)ue[f++]=65535&N;else{if(!(16&U)){if((64&U)==0){N=C[(65535&N)+(S&(1<<U)-1)];continue t}if(32&U){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}V=65535&N,(U&=15)&&(E<U&&(S+=F[u++]<<E,E+=8),V+=S&(1<<U)-1,S>>>=U,E-=U),E<15&&(S+=F[u++]<<E,E+=8,S+=F[u++]<<E,E+=8),N=A[S&j];n:for(;;){if(S>>>=U=N>>>24,E-=U,!(16&(U=N>>>16&255))){if((64&U)==0){N=A[(65535&N)+(S&(1<<U)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(J=65535&N,E<(U&=15)&&(S+=F[u++]<<E,(E+=8)<U&&(S+=F[u++]<<E,E+=8)),g<(J+=S&(1<<U)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=U,E-=U,(U=f-h)<J){if(w<(U=J-U)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(Z=x,(P=0)===_){if(P+=v-U,U<V){for(V-=U;ue[f++]=x[P++],--U;);P=f-J,Z=ue}}else if(_<U){if(P+=v+_-U,(U-=_)<V){for(V-=U;ue[f++]=x[P++],--U;);if(P=0,_<V){for(V-=U=_;ue[f++]=x[P++],--U;);P=f-J,Z=ue}}}else if(P+=_-U,U<V){for(V-=U;ue[f++]=x[P++],--U;);P=f-J,Z=ue}for(;2<V;)ue[f++]=Z[P++],ue[f++]=Z[P++],ue[f++]=Z[P++],V-=3;V&&(ue[f++]=Z[P++],1<V&&(ue[f++]=Z[P++]))}else{for(P=f-J;ue[f++]=ue[P++],ue[f++]=ue[P++],ue[f++]=ue[P++],2<(V-=3););V&&(ue[f++]=ue[P++],1<V&&(ue[f++]=ue[P++]))}break}}break}}while(u<c&&f<m);u-=V=E>>3,S&=(1<<(E-=V<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=f<m?m-f+257:257-(f-m),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),f=1,h=2,m=0,g=-2,v=1,w=852,_=592;function x(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(P){var Z;return P&&P.state?(Z=P.state,P.total_in=P.total_out=Z.total=0,P.msg="",Z.wrap&&(P.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(w),Z.distcode=Z.distdyn=new i.Buf32(_),Z.sane=1,Z.back=-1,m):g}function C(P){var Z;return P&&P.state?((Z=P.state).wsize=0,Z.whave=0,Z.wnext=0,E(P)):g}function A(P,Z){var F,ue;return P&&P.state?(ue=P.state,Z<0?(F=0,Z=-Z):(F=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(ue.window!==null&&ue.wbits!==Z&&(ue.window=null),ue.wrap=F,ue.wbits=Z,C(P))):g}function O(P,Z){var F,ue;return P?(ue=new S,(P.state=ue).window=null,(F=A(P,Z))!==m&&(P.state=null),F):g}var j,N,U=!0;function V(P){if(U){var Z;for(j=new i.Buf32(512),N=new i.Buf32(32),Z=0;Z<144;)P.lens[Z++]=8;for(;Z<256;)P.lens[Z++]=9;for(;Z<280;)P.lens[Z++]=7;for(;Z<288;)P.lens[Z++]=8;for(c(f,P.lens,0,288,j,0,P.work,{bits:9}),Z=0;Z<32;)P.lens[Z++]=5;c(h,P.lens,0,32,N,0,P.work,{bits:5}),U=!1}P.lencode=j,P.lenbits=9,P.distcode=N,P.distbits=5}function J(P,Z,F,ue){var le,ne=P.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),ue>=ne.wsize?(i.arraySet(ne.window,Z,F-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(ue<(le=ne.wsize-ne.wnext)&&(le=ue),i.arraySet(ne.window,Z,F-ue,le,ne.wnext),(ue-=le)?(i.arraySet(ne.window,Z,F-ue,ue,0),ne.wnext=ue,ne.whave=ne.wsize):(ne.wnext+=le,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=le))),0}a.inflateReset=C,a.inflateReset2=A,a.inflateResetKeep=E,a.inflateInit=function(P){return O(P,15)},a.inflateInit2=O,a.inflate=function(P,Z){var F,ue,le,ne,Q,te,G,X,ae,be,we,fe,Me,Pe,Oe,Ae,$e,qe,Fe,Ne,$,Se,ke,ce,ie=0,Y=new i.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return g;(F=P.state).mode===12&&(F.mode=13),Q=P.next_out,le=P.output,G=P.avail_out,ne=P.next_in,ue=P.input,te=P.avail_in,X=F.hold,ae=F.bits,be=te,we=G,Se=m;e:for(;;)switch(F.mode){case v:if(F.wrap===0){F.mode=13;break}for(;ae<16;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if(2&F.wrap&&X===35615){Y[F.check=0]=255&X,Y[1]=X>>>8&255,F.check=s(F.check,Y,2,0),ae=X=0,F.mode=2;break}if(F.flags=0,F.head&&(F.head.done=!1),!(1&F.wrap)||(((255&X)<<8)+(X>>8))%31){P.msg="incorrect header check",F.mode=30;break}if((15&X)!=8){P.msg="unknown compression method",F.mode=30;break}if(ae-=4,$=8+(15&(X>>>=4)),F.wbits===0)F.wbits=$;else if($>F.wbits){P.msg="invalid window size",F.mode=30;break}F.dmax=1<<$,P.adler=F.check=1,F.mode=512&X?10:12,ae=X=0;break;case 2:for(;ae<16;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if(F.flags=X,(255&F.flags)!=8){P.msg="unknown compression method",F.mode=30;break}if(57344&F.flags){P.msg="unknown header flags set",F.mode=30;break}F.head&&(F.head.text=X>>8&1),512&F.flags&&(Y[0]=255&X,Y[1]=X>>>8&255,F.check=s(F.check,Y,2,0)),ae=X=0,F.mode=3;case 3:for(;ae<32;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}F.head&&(F.head.time=X),512&F.flags&&(Y[0]=255&X,Y[1]=X>>>8&255,Y[2]=X>>>16&255,Y[3]=X>>>24&255,F.check=s(F.check,Y,4,0)),ae=X=0,F.mode=4;case 4:for(;ae<16;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}F.head&&(F.head.xflags=255&X,F.head.os=X>>8),512&F.flags&&(Y[0]=255&X,Y[1]=X>>>8&255,F.check=s(F.check,Y,2,0)),ae=X=0,F.mode=5;case 5:if(1024&F.flags){for(;ae<16;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}F.length=X,F.head&&(F.head.extra_len=X),512&F.flags&&(Y[0]=255&X,Y[1]=X>>>8&255,F.check=s(F.check,Y,2,0)),ae=X=0}else F.head&&(F.head.extra=null);F.mode=6;case 6:if(1024&F.flags&&(te<(fe=F.length)&&(fe=te),fe&&(F.head&&($=F.head.extra_len-F.length,F.head.extra||(F.head.extra=new Array(F.head.extra_len)),i.arraySet(F.head.extra,ue,ne,fe,$)),512&F.flags&&(F.check=s(F.check,ue,fe,ne)),te-=fe,ne+=fe,F.length-=fe),F.length))break e;F.length=0,F.mode=7;case 7:if(2048&F.flags){if(te===0)break e;for(fe=0;$=ue[ne+fe++],F.head&&$&&F.length<65536&&(F.head.name+=String.fromCharCode($)),$&&fe<te;);if(512&F.flags&&(F.check=s(F.check,ue,fe,ne)),te-=fe,ne+=fe,$)break e}else F.head&&(F.head.name=null);F.length=0,F.mode=8;case 8:if(4096&F.flags){if(te===0)break e;for(fe=0;$=ue[ne+fe++],F.head&&$&&F.length<65536&&(F.head.comment+=String.fromCharCode($)),$&&fe<te;);if(512&F.flags&&(F.check=s(F.check,ue,fe,ne)),te-=fe,ne+=fe,$)break e}else F.head&&(F.head.comment=null);F.mode=9;case 9:if(512&F.flags){for(;ae<16;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if(X!==(65535&F.check)){P.msg="header crc mismatch",F.mode=30;break}ae=X=0}F.head&&(F.head.hcrc=F.flags>>9&1,F.head.done=!0),P.adler=F.check=0,F.mode=12;break;case 10:for(;ae<32;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}P.adler=F.check=x(X),ae=X=0,F.mode=11;case 11:if(F.havedict===0)return P.next_out=Q,P.avail_out=G,P.next_in=ne,P.avail_in=te,F.hold=X,F.bits=ae,2;P.adler=F.check=1,F.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(F.last){X>>>=7&ae,ae-=7&ae,F.mode=27;break}for(;ae<3;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}switch(F.last=1&X,ae-=1,3&(X>>>=1)){case 0:F.mode=14;break;case 1:if(V(F),F.mode=20,Z!==6)break;X>>>=2,ae-=2;break e;case 2:F.mode=17;break;case 3:P.msg="invalid block type",F.mode=30}X>>>=2,ae-=2;break;case 14:for(X>>>=7&ae,ae-=7&ae;ae<32;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if((65535&X)!=(X>>>16^65535)){P.msg="invalid stored block lengths",F.mode=30;break}if(F.length=65535&X,ae=X=0,F.mode=15,Z===6)break e;case 15:F.mode=16;case 16:if(fe=F.length){if(te<fe&&(fe=te),G<fe&&(fe=G),fe===0)break e;i.arraySet(le,ue,ne,fe,Q),te-=fe,ne+=fe,G-=fe,Q+=fe,F.length-=fe;break}F.mode=12;break;case 17:for(;ae<14;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if(F.nlen=257+(31&X),X>>>=5,ae-=5,F.ndist=1+(31&X),X>>>=5,ae-=5,F.ncode=4+(15&X),X>>>=4,ae-=4,286<F.nlen||30<F.ndist){P.msg="too many length or distance symbols",F.mode=30;break}F.have=0,F.mode=18;case 18:for(;F.have<F.ncode;){for(;ae<3;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}F.lens[_e[F.have++]]=7&X,X>>>=3,ae-=3}for(;F.have<19;)F.lens[_e[F.have++]]=0;if(F.lencode=F.lendyn,F.lenbits=7,ke={bits:F.lenbits},Se=c(0,F.lens,0,19,F.lencode,0,F.work,ke),F.lenbits=ke.bits,Se){P.msg="invalid code lengths set",F.mode=30;break}F.have=0,F.mode=19;case 19:for(;F.have<F.nlen+F.ndist;){for(;Ae=(ie=F.lencode[X&(1<<F.lenbits)-1])>>>16&255,$e=65535&ie,!((Oe=ie>>>24)<=ae);){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if($e<16)X>>>=Oe,ae-=Oe,F.lens[F.have++]=$e;else{if($e===16){for(ce=Oe+2;ae<ce;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if(X>>>=Oe,ae-=Oe,F.have===0){P.msg="invalid bit length repeat",F.mode=30;break}$=F.lens[F.have-1],fe=3+(3&X),X>>>=2,ae-=2}else if($e===17){for(ce=Oe+3;ae<ce;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}ae-=Oe,$=0,fe=3+(7&(X>>>=Oe)),X>>>=3,ae-=3}else{for(ce=Oe+7;ae<ce;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}ae-=Oe,$=0,fe=11+(127&(X>>>=Oe)),X>>>=7,ae-=7}if(F.have+fe>F.nlen+F.ndist){P.msg="invalid bit length repeat",F.mode=30;break}for(;fe--;)F.lens[F.have++]=$}}if(F.mode===30)break;if(F.lens[256]===0){P.msg="invalid code -- missing end-of-block",F.mode=30;break}if(F.lenbits=9,ke={bits:F.lenbits},Se=c(f,F.lens,0,F.nlen,F.lencode,0,F.work,ke),F.lenbits=ke.bits,Se){P.msg="invalid literal/lengths set",F.mode=30;break}if(F.distbits=6,F.distcode=F.distdyn,ke={bits:F.distbits},Se=c(h,F.lens,F.nlen,F.ndist,F.distcode,0,F.work,ke),F.distbits=ke.bits,Se){P.msg="invalid distances set",F.mode=30;break}if(F.mode=20,Z===6)break e;case 20:F.mode=21;case 21:if(6<=te&&258<=G){P.next_out=Q,P.avail_out=G,P.next_in=ne,P.avail_in=te,F.hold=X,F.bits=ae,u(P,we),Q=P.next_out,le=P.output,G=P.avail_out,ne=P.next_in,ue=P.input,te=P.avail_in,X=F.hold,ae=F.bits,F.mode===12&&(F.back=-1);break}for(F.back=0;Ae=(ie=F.lencode[X&(1<<F.lenbits)-1])>>>16&255,$e=65535&ie,!((Oe=ie>>>24)<=ae);){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if(Ae&&(240&Ae)==0){for(qe=Oe,Fe=Ae,Ne=$e;Ae=(ie=F.lencode[Ne+((X&(1<<qe+Fe)-1)>>qe)])>>>16&255,$e=65535&ie,!(qe+(Oe=ie>>>24)<=ae);){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}X>>>=qe,ae-=qe,F.back+=qe}if(X>>>=Oe,ae-=Oe,F.back+=Oe,F.length=$e,Ae===0){F.mode=26;break}if(32&Ae){F.back=-1,F.mode=12;break}if(64&Ae){P.msg="invalid literal/length code",F.mode=30;break}F.extra=15&Ae,F.mode=22;case 22:if(F.extra){for(ce=F.extra;ae<ce;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}F.length+=X&(1<<F.extra)-1,X>>>=F.extra,ae-=F.extra,F.back+=F.extra}F.was=F.length,F.mode=23;case 23:for(;Ae=(ie=F.distcode[X&(1<<F.distbits)-1])>>>16&255,$e=65535&ie,!((Oe=ie>>>24)<=ae);){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if((240&Ae)==0){for(qe=Oe,Fe=Ae,Ne=$e;Ae=(ie=F.distcode[Ne+((X&(1<<qe+Fe)-1)>>qe)])>>>16&255,$e=65535&ie,!(qe+(Oe=ie>>>24)<=ae);){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}X>>>=qe,ae-=qe,F.back+=qe}if(X>>>=Oe,ae-=Oe,F.back+=Oe,64&Ae){P.msg="invalid distance code",F.mode=30;break}F.offset=$e,F.extra=15&Ae,F.mode=24;case 24:if(F.extra){for(ce=F.extra;ae<ce;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}F.offset+=X&(1<<F.extra)-1,X>>>=F.extra,ae-=F.extra,F.back+=F.extra}if(F.offset>F.dmax){P.msg="invalid distance too far back",F.mode=30;break}F.mode=25;case 25:if(G===0)break e;if(fe=we-G,F.offset>fe){if((fe=F.offset-fe)>F.whave&&F.sane){P.msg="invalid distance too far back",F.mode=30;break}Me=fe>F.wnext?(fe-=F.wnext,F.wsize-fe):F.wnext-fe,fe>F.length&&(fe=F.length),Pe=F.window}else Pe=le,Me=Q-F.offset,fe=F.length;for(G<fe&&(fe=G),G-=fe,F.length-=fe;le[Q++]=Pe[Me++],--fe;);F.length===0&&(F.mode=21);break;case 26:if(G===0)break e;le[Q++]=F.length,G--,F.mode=21;break;case 27:if(F.wrap){for(;ae<32;){if(te===0)break e;te--,X|=ue[ne++]<<ae,ae+=8}if(we-=G,P.total_out+=we,F.total+=we,we&&(P.adler=F.check=F.flags?s(F.check,le,we,Q-we):o(F.check,le,we,Q-we)),we=G,(F.flags?X:x(X))!==F.check){P.msg="incorrect data check",F.mode=30;break}ae=X=0}F.mode=28;case 28:if(F.wrap&&F.flags){for(;ae<32;){if(te===0)break e;te--,X+=ue[ne++]<<ae,ae+=8}if(X!==(4294967295&F.total)){P.msg="incorrect length check",F.mode=30;break}ae=X=0}F.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return g}return P.next_out=Q,P.avail_out=G,P.next_in=ne,P.avail_in=te,F.hold=X,F.bits=ae,(F.wsize||we!==P.avail_out&&F.mode<30&&(F.mode<27||Z!==4))&&J(P,P.output,P.next_out,we-P.avail_out)?(F.mode=31,-4):(be-=P.avail_in,we-=P.avail_out,P.total_in+=be,P.total_out+=we,F.total+=we,F.wrap&&we&&(P.adler=F.check=F.flags?s(F.check,le,we,P.next_out-we):o(F.check,le,we,P.next_out-we)),P.data_type=F.bits+(F.last?64:0)+(F.mode===12?128:0)+(F.mode===20||F.mode===15?256:0),(be==0&&we===0||Z===4)&&Se===m&&(Se=-5),Se)},a.inflateEnd=function(P){if(!P||!P.state)return g;var Z=P.state;return Z.window&&(Z.window=null),P.state=null,m},a.inflateGetHeader=function(P,Z){var F;return P&&P.state?(2&(F=P.state).wrap)==0?g:((F.head=Z).done=!1,m):g},a.inflateSetDictionary=function(P,Z){var F,ue=Z.length;return P&&P.state?(F=P.state).wrap!==0&&F.mode!==11?g:F.mode===11&&o(1,Z,ue,0)!==F.check?-3:J(P,Z,ue,ue)?(F.mode=31,-4):(F.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,m,g,v,w,_,x){var S,E,C,A,O,j,N,U,V,J=x.bits,P=0,Z=0,F=0,ue=0,le=0,ne=0,Q=0,te=0,G=0,X=0,ae=null,be=0,we=new i.Buf16(16),fe=new i.Buf16(16),Me=null,Pe=0;for(P=0;P<=15;P++)we[P]=0;for(Z=0;Z<g;Z++)we[h[m+Z]]++;for(le=J,ue=15;1<=ue&&we[ue]===0;ue--);if(ue<le&&(le=ue),ue===0)return v[w++]=20971520,v[w++]=20971520,x.bits=1,0;for(F=1;F<ue&&we[F]===0;F++);for(le<F&&(le=F),P=te=1;P<=15;P++)if(te<<=1,(te-=we[P])<0)return-1;if(0<te&&(f===0||ue!==1))return-1;for(fe[1]=0,P=1;P<15;P++)fe[P+1]=fe[P]+we[P];for(Z=0;Z<g;Z++)h[m+Z]!==0&&(_[fe[h[m+Z]]++]=Z);if(j=f===0?(ae=Me=_,19):f===1?(ae=o,be-=257,Me=s,Pe-=257,256):(ae=u,Me=c,-1),P=F,O=w,Q=Z=X=0,C=-1,A=(G=1<<(ne=le))-1,f===1&&852<G||f===2&&592<G)return 1;for(;;){for(N=P-Q,V=_[Z]<j?(U=0,_[Z]):_[Z]>j?(U=Me[Pe+_[Z]],ae[be+_[Z]]):(U=96,0),S=1<<P-Q,F=E=1<<ne;v[O+(X>>Q)+(E-=S)]=N<<24|U<<16|V|0,E!==0;);for(S=1<<P-1;X&S;)S>>=1;if(S!==0?(X&=S-1,X+=S):X=0,Z++,--we[P]==0){if(P===ue)break;P=h[m+_[Z]]}if(le<P&&(X&A)!==C){for(Q===0&&(Q=le),O+=F,te=1<<(ne=P-Q);ne+Q<ue&&!((te-=we[ne+Q])<=0);)ne++,te<<=1;if(G+=1<<ne,f===1&&852<G||f===2&&592<G)return 1;v[C=X&A]=le<<24|ne<<16|O-w|0}}return X!==0&&(v[O+X]=P-Q<<24|64<<16|0),x.bits=le,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function u(ie){for(var Y=ie.length;0<=--Y;)ie[Y]=0}var c=0,f=29,h=256,m=h+1+f,g=30,v=19,w=2*m+1,_=15,x=16,S=7,E=256,C=16,A=17,O=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=new Array(2*(m+2));u(J);var P=new Array(2*g);u(P);var Z=new Array(512);u(Z);var F=new Array(256);u(F);var ue=new Array(f);u(ue);var le,ne,Q,te=new Array(g);function G(ie,Y,_e,De,Ee){this.static_tree=ie,this.extra_bits=Y,this.extra_base=_e,this.elems=De,this.max_length=Ee,this.has_stree=ie&&ie.length}function X(ie,Y){this.dyn_tree=ie,this.max_code=0,this.stat_desc=Y}function ae(ie){return ie<256?Z[ie]:Z[256+(ie>>>7)]}function be(ie,Y){ie.pending_buf[ie.pending++]=255&Y,ie.pending_buf[ie.pending++]=Y>>>8&255}function we(ie,Y,_e){ie.bi_valid>x-_e?(ie.bi_buf|=Y<<ie.bi_valid&65535,be(ie,ie.bi_buf),ie.bi_buf=Y>>x-ie.bi_valid,ie.bi_valid+=_e-x):(ie.bi_buf|=Y<<ie.bi_valid&65535,ie.bi_valid+=_e)}function fe(ie,Y,_e){we(ie,_e[2*Y],_e[2*Y+1])}function Me(ie,Y){for(var _e=0;_e|=1&ie,ie>>>=1,_e<<=1,0<--Y;);return _e>>>1}function Pe(ie,Y,_e){var De,Ee,Ze=new Array(_+1),Et=0;for(De=1;De<=_;De++)Ze[De]=Et=Et+_e[De-1]<<1;for(Ee=0;Ee<=Y;Ee++){var at=ie[2*Ee+1];at!==0&&(ie[2*Ee]=Me(Ze[at]++,at))}}function Oe(ie){var Y;for(Y=0;Y<m;Y++)ie.dyn_ltree[2*Y]=0;for(Y=0;Y<g;Y++)ie.dyn_dtree[2*Y]=0;for(Y=0;Y<v;Y++)ie.bl_tree[2*Y]=0;ie.dyn_ltree[2*E]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Ae(ie){8<ie.bi_valid?be(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function $e(ie,Y,_e,De){var Ee=2*Y,Ze=2*_e;return ie[Ee]<ie[Ze]||ie[Ee]===ie[Ze]&&De[Y]<=De[_e]}function qe(ie,Y,_e){for(var De=ie.heap[_e],Ee=_e<<1;Ee<=ie.heap_len&&(Ee<ie.heap_len&&$e(Y,ie.heap[Ee+1],ie.heap[Ee],ie.depth)&&Ee++,!$e(Y,De,ie.heap[Ee],ie.depth));)ie.heap[_e]=ie.heap[Ee],_e=Ee,Ee<<=1;ie.heap[_e]=De}function Fe(ie,Y,_e){var De,Ee,Ze,Et,at=0;if(ie.last_lit!==0)for(;De=ie.pending_buf[ie.d_buf+2*at]<<8|ie.pending_buf[ie.d_buf+2*at+1],Ee=ie.pending_buf[ie.l_buf+at],at++,De===0?fe(ie,Ee,Y):(fe(ie,(Ze=F[Ee])+h+1,Y),(Et=j[Ze])!==0&&we(ie,Ee-=ue[Ze],Et),fe(ie,Ze=ae(--De),_e),(Et=N[Ze])!==0&&we(ie,De-=te[Ze],Et)),at<ie.last_lit;);fe(ie,E,Y)}function Ne(ie,Y){var _e,De,Ee,Ze=Y.dyn_tree,Et=Y.stat_desc.static_tree,at=Y.stat_desc.has_stree,_t=Y.stat_desc.elems,Nt=-1;for(ie.heap_len=0,ie.heap_max=w,_e=0;_e<_t;_e++)Ze[2*_e]!==0?(ie.heap[++ie.heap_len]=Nt=_e,ie.depth[_e]=0):Ze[2*_e+1]=0;for(;ie.heap_len<2;)Ze[2*(Ee=ie.heap[++ie.heap_len]=Nt<2?++Nt:0)]=1,ie.depth[Ee]=0,ie.opt_len--,at&&(ie.static_len-=Et[2*Ee+1]);for(Y.max_code=Nt,_e=ie.heap_len>>1;1<=_e;_e--)qe(ie,Ze,_e);for(Ee=_t;_e=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],qe(ie,Ze,1),De=ie.heap[1],ie.heap[--ie.heap_max]=_e,ie.heap[--ie.heap_max]=De,Ze[2*Ee]=Ze[2*_e]+Ze[2*De],ie.depth[Ee]=(ie.depth[_e]>=ie.depth[De]?ie.depth[_e]:ie.depth[De])+1,Ze[2*_e+1]=Ze[2*De+1]=Ee,ie.heap[1]=Ee++,qe(ie,Ze,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(Rt,Kt){var pe,R,H,de,Re,ye,Ce=Kt.dyn_tree,oe=Kt.max_code,ft=Kt.stat_desc.static_tree,vt=Kt.stat_desc.has_stree,D=Kt.stat_desc.extra_bits,Be=Kt.stat_desc.extra_base,st=Kt.stat_desc.max_length,ge=0;for(de=0;de<=_;de++)Rt.bl_count[de]=0;for(Ce[2*Rt.heap[Rt.heap_max]+1]=0,pe=Rt.heap_max+1;pe<w;pe++)st<(de=Ce[2*Ce[2*(R=Rt.heap[pe])+1]+1]+1)&&(de=st,ge++),Ce[2*R+1]=de,oe<R||(Rt.bl_count[de]++,Re=0,Be<=R&&(Re=D[R-Be]),ye=Ce[2*R],Rt.opt_len+=ye*(de+Re),vt&&(Rt.static_len+=ye*(ft[2*R+1]+Re)));if(ge!==0){do{for(de=st-1;Rt.bl_count[de]===0;)de--;Rt.bl_count[de]--,Rt.bl_count[de+1]+=2,Rt.bl_count[st]--,ge-=2}while(0<ge);for(de=st;de!==0;de--)for(R=Rt.bl_count[de];R!==0;)oe<(H=Rt.heap[--pe])||(Ce[2*H+1]!==de&&(Rt.opt_len+=(de-Ce[2*H+1])*Ce[2*H],Ce[2*H+1]=de),R--)}}(ie,Y),Pe(Ze,Nt,ie.bl_count)}function $(ie,Y,_e){var De,Ee,Ze=-1,Et=Y[1],at=0,_t=7,Nt=4;for(Et===0&&(_t=138,Nt=3),Y[2*(_e+1)+1]=65535,De=0;De<=_e;De++)Ee=Et,Et=Y[2*(De+1)+1],++at<_t&&Ee===Et||(at<Nt?ie.bl_tree[2*Ee]+=at:Ee!==0?(Ee!==Ze&&ie.bl_tree[2*Ee]++,ie.bl_tree[2*C]++):at<=10?ie.bl_tree[2*A]++:ie.bl_tree[2*O]++,Ze=Ee,Nt=(at=0)===Et?(_t=138,3):Ee===Et?(_t=6,3):(_t=7,4))}function Se(ie,Y,_e){var De,Ee,Ze=-1,Et=Y[1],at=0,_t=7,Nt=4;for(Et===0&&(_t=138,Nt=3),De=0;De<=_e;De++)if(Ee=Et,Et=Y[2*(De+1)+1],!(++at<_t&&Ee===Et)){if(at<Nt)for(;fe(ie,Ee,ie.bl_tree),--at!=0;);else Ee!==0?(Ee!==Ze&&(fe(ie,Ee,ie.bl_tree),at--),fe(ie,C,ie.bl_tree),we(ie,at-3,2)):at<=10?(fe(ie,A,ie.bl_tree),we(ie,at-3,3)):(fe(ie,O,ie.bl_tree),we(ie,at-11,7));Ze=Ee,Nt=(at=0)===Et?(_t=138,3):Ee===Et?(_t=6,3):(_t=7,4)}}u(te);var ke=!1;function ce(ie,Y,_e,De){we(ie,(c<<1)+(De?1:0),3),function(Ee,Ze,Et,at){Ae(Ee),be(Ee,Et),be(Ee,~Et),i.arraySet(Ee.pending_buf,Ee.window,Ze,Et,Ee.pending),Ee.pending+=Et}(ie,Y,_e)}a._tr_init=function(ie){ke||(function(){var Y,_e,De,Ee,Ze,Et=new Array(_+1);for(Ee=De=0;Ee<f-1;Ee++)for(ue[Ee]=De,Y=0;Y<1<<j[Ee];Y++)F[De++]=Ee;for(F[De-1]=Ee,Ee=Ze=0;Ee<16;Ee++)for(te[Ee]=Ze,Y=0;Y<1<<N[Ee];Y++)Z[Ze++]=Ee;for(Ze>>=7;Ee<g;Ee++)for(te[Ee]=Ze<<7,Y=0;Y<1<<N[Ee]-7;Y++)Z[256+Ze++]=Ee;for(_e=0;_e<=_;_e++)Et[_e]=0;for(Y=0;Y<=143;)J[2*Y+1]=8,Y++,Et[8]++;for(;Y<=255;)J[2*Y+1]=9,Y++,Et[9]++;for(;Y<=279;)J[2*Y+1]=7,Y++,Et[7]++;for(;Y<=287;)J[2*Y+1]=8,Y++,Et[8]++;for(Pe(J,m+1,Et),Y=0;Y<g;Y++)P[2*Y+1]=5,P[2*Y]=Me(Y,5);le=new G(J,j,h+1,m,_),ne=new G(P,N,0,g,_),Q=new G(new Array(0),U,0,v,S)}(),ke=!0),ie.l_desc=new X(ie.dyn_ltree,le),ie.d_desc=new X(ie.dyn_dtree,ne),ie.bl_desc=new X(ie.bl_tree,Q),ie.bi_buf=0,ie.bi_valid=0,Oe(ie)},a._tr_stored_block=ce,a._tr_flush_block=function(ie,Y,_e,De){var Ee,Ze,Et=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=function(at){var _t,Nt=4093624447;for(_t=0;_t<=31;_t++,Nt>>>=1)if(1&Nt&&at.dyn_ltree[2*_t]!==0)return o;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return s;for(_t=32;_t<h;_t++)if(at.dyn_ltree[2*_t]!==0)return s;return o}(ie)),Ne(ie,ie.l_desc),Ne(ie,ie.d_desc),Et=function(at){var _t;for($(at,at.dyn_ltree,at.l_desc.max_code),$(at,at.dyn_dtree,at.d_desc.max_code),Ne(at,at.bl_desc),_t=v-1;3<=_t&&at.bl_tree[2*V[_t]+1]===0;_t--);return at.opt_len+=3*(_t+1)+5+5+4,_t}(ie),Ee=ie.opt_len+3+7>>>3,(Ze=ie.static_len+3+7>>>3)<=Ee&&(Ee=Ze)):Ee=Ze=_e+5,_e+4<=Ee&&Y!==-1?ce(ie,Y,_e,De):ie.strategy===4||Ze===Ee?(we(ie,2+(De?1:0),3),Fe(ie,J,P)):(we(ie,4+(De?1:0),3),function(at,_t,Nt,Rt){var Kt;for(we(at,_t-257,5),we(at,Nt-1,5),we(at,Rt-4,4),Kt=0;Kt<Rt;Kt++)we(at,at.bl_tree[2*V[Kt]+1],3);Se(at,at.dyn_ltree,_t-1),Se(at,at.dyn_dtree,Nt-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,Et+1),Fe(ie,ie.dyn_ltree,ie.dyn_dtree)),Oe(ie),De&&Ae(ie)},a._tr_tally=function(ie,Y,_e){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=Y>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&Y,ie.pending_buf[ie.l_buf+ie.last_lit]=255&_e,ie.last_lit++,Y===0?ie.dyn_ltree[2*_e]++:(ie.matches++,Y--,ie.dyn_ltree[2*(F[_e]+h+1)]++,ie.dyn_dtree[2*ae(Y)]++),ie.last_lit===ie.lit_bufsize-1},a._tr_align=function(ie){we(ie,2,3),fe(ie,E,J),function(Y){Y.bi_valid===16?(be(Y,Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0):8<=Y.bi_valid&&(Y.pending_buf[Y.pending++]=255&Y.bi_buf,Y.bi_buf>>=8,Y.bi_valid-=8)}(ie)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var u,c,f,h,m=1,g={},v=!1,w=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(C){Vr.nextTick(function(){S(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,A=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=A,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){f.port2.postMessage(C)}):w&&"onreadystatechange"in w.createElement("script")?(c=w.documentElement,function(C){var A=w.createElement("script");A.onreadystatechange=function(){S(C),A.onreadystatechange=null,c.removeChild(A),A=null},c.appendChild(A)}):function(C){setTimeout(S,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var A=new Array(arguments.length-1),O=0;O<A.length;O++)A[O]=arguments[O+1];var j={callback:C,args:A};return g[m]=j,u(m),m++},_.clearImmediate=x}function x(C){delete g[C]}function S(C){if(v)setTimeout(S,0,C);else{var A=g[C];if(A){v=!0;try{(function(O){var j=O.callback,N=O.args;switch(N.length){case 0:j();break;case 1:j(N[0]);break;case 2:j(N[0],N[1]);break;case 3:j(N[0],N[1],N[2]);break;default:j.apply(s,N)}})(A)}finally{x(C),v=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Mx)),Mx.exports}var GJ=VJ();const F8=Qa(GJ),qb=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},Wn=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Ms=(...e)=>Wn(e.map(t=>t.trim()).filter(Boolean).join("/")),Qv=e=>{const t=Wn(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},sa=e=>{const t=Wn(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},jm=(e,t)=>Wn(e==="/"?`/${t}`:`${e}/${t}`);var Px,HN;function WJ(){if(HN)return Px;HN=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Vr>"u"||typeof Vr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var u=!1,c=null,f=null,h=null,m=this,g=function(E,C,A){f&&(clearTimeout(f),f=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),u||(s?C?o(C):i(A):typeof r=="function"&&r(C,A),u=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},v=function(E){if(u)return g(E);c&&(clearTimeout(c),c=null),m.domainReentrant&&E&&(m.domains[t]=Vr.domain);var C=a.maxExecutionTime||m.maxExecutionTime;if(C&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var A=!1;try{n(function(O,j){A||(A=!0,g(E,O,j))})}catch(O){A||(A=!0,g(E,O))}}else m._promiseTry(function(){return n()}).then(function(O){g(E,void 0,O)},function(O){g(E,O)})};m.domainReentrant&&Vr.domain&&(v=Vr.domain.bind(v));var w=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],v(!0);else if(m.domainReentrant&&Vr.domain&&Vr.domain===m.domains[t])v(!1);else if(m.queues[t].length>=w)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){v(!0)};a.skipQueue?m.queues[t].unshift(_):m.queues[t].push(_);var x=a.timeout||m.timeout;x&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||m.maxOccupationTime;if(S&&(f=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(u,c){return function(f){i.acquire(u,c,f,a)}},s=t.reduceRight(function(u,c){return o(c,u)},n);if(typeof r=="function")s(r);else return new this.Promise(function(u,c){s.length===1?s(function(f,h){f?c(f):u(h)}):u(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},Px=e,Px}var Fx,VN;function KJ(){return VN||(VN=1,Fx=WJ()),Fx}var ZJ=KJ();const Dm=Qa(ZJ);var jy={exports:{}},GN;function YJ(){return GN||(GN=1,typeof Object.create=="function"?jy.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:jy.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),jy.exports}var Lx,WN;function XJ(){if(WN)return Lx;WN=1;var e=ck().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,u=0;u<o;){for(var c=s%i,f=Math.min(o-u,i-c),h=0;h<f;h++)a[c+h]=n[u+h];s+=f,u+=f,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Lx=t,Lx}var $x,KN;function JJ(){if(KN)return $x;KN=1;var e=YJ(),t=XJ(),n=ck().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function c(f,h,m,g){return f===0?h&m|~h&g:f===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(f){for(var h=this._w,m=this._a|0,g=this._b|0,v=this._c|0,w=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=f.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=s(m)+c(E,g,v,w)+_+h[S]+r[E]|0;_=w,w=v,v=u(g),g=m,m=C}this._a=m+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=w+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var f=n.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},$x=i,$x}var QJ=JJ();const L8=Qa(QJ);var Bx,ZN;function eQ(){if(ZN)return Bx;ZN=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,u=-1,c=0,f,h=0;h<=a.length;++h){if(h<a.length)f=a.charCodeAt(h);else{if(f===47)break;f=47}if(f===47){if(!(u===h-1||c===1))if(u!==h-1&&c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var m=o.lastIndexOf("/");if(m!==o.length-1){m===-1?(o="",s=0):(o=o.slice(0,m),s=o.length-1-o.lastIndexOf("/")),u=h,c=0;continue}}else if(o.length===2||o.length===1){o="",s=0,u=h,c=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(u+1,h):o=a.slice(u+1,h),s=h-u-1;u=h,c=0}else f===46&&c!==-1?++c:c=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,u=arguments.length-1;u>=-1&&!o;u--){var c;u>=0?c=arguments[u]:(s===void 0&&(s=Vr.cwd()),c=s),e(c),c.length!==0&&(i=c+"/"+i,o=c.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var u=i.length,c=u-s,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var h=o.length,m=h-f,g=c<m?c:m,v=-1,w=0;w<=g;++w){if(w===g){if(m>g){if(o.charCodeAt(f+w)===47)return o.slice(f+w+1);if(w===0)return o.slice(f+w)}else c>g&&(i.charCodeAt(s+w)===47?v=w:w===0&&(v=0));break}var _=i.charCodeAt(s+w),x=o.charCodeAt(f+w);if(_!==x)break;_===47&&(v=w)}var S="";for(w=s+v+1;w<=u;++w)(w===u||i.charCodeAt(w)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(f+v):(f+=v,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,u=-1,c=!0,f=i.length-1;f>=1;--f)if(o=i.charCodeAt(f),o===47){if(!c){u=f;break}}else c=!1;return u===-1?s?"/":".":s&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,u=-1,c=!0,f;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,m=-1;for(f=i.length-1;f>=0;--f){var g=i.charCodeAt(f);if(g===47){if(!c){s=f+1;break}}else m===-1&&(c=!1,m=f+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(u=f):(h=-1,u=m))}return s===u?u=m:u===-1&&(u=i.length),i.slice(s,u)}else{for(f=i.length-1;f>=0;--f)if(i.charCodeAt(f)===47){if(!c){s=f+1;break}}else u===-1&&(c=!1,u=f+1);return u===-1?"":i.slice(s,u)}},extname:function(i){e(i);for(var o=-1,s=0,u=-1,c=!0,f=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!c){s=h+1;break}continue}u===-1&&(c=!1,u=h+1),m===46?o===-1?o=h:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||u===-1||f===0||f===1&&o===u-1&&o===s+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),u=s===47,c;u?(o.root="/",c=1):c=0;for(var f=-1,h=0,m=-1,g=!0,v=i.length-1,w=0;v>=c;--v){if(s=i.charCodeAt(v),s===47){if(!g){h=v+1;break}continue}m===-1&&(g=!1,m=v+1),s===46?f===-1?f=v:w!==1&&(w=1):f!==-1&&(w=-1)}return f===-1||m===-1||w===0||w===1&&f===m-1&&f===h+1?m!==-1&&(h===0&&u?o.base=o.name=i.slice(1,m):o.base=o.name=i.slice(h,m)):(h===0&&u?(o.name=i.slice(1,f),o.base=i.slice(1,m)):(o.name=i.slice(h,f),o.base=i.slice(h,m)),o.ext=i.slice(f,m)),h>0?o.dir=i.slice(0,h-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,Bx=r,Bx}var Tt=eQ(),zx={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var YN;function tQ(){return YN||(YN=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,U=new Array(256),V=0;V!=256;++V)N=V,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,U[V]=N;return typeof Int32Array<"u"?new Int32Array(U):U}var r=n();function a(N){var U=0,V=0,J=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(J=0;J!=256;++J)P[J]=N[J];for(J=0;J!=256;++J)for(V=N[J],U=256+J;U<4096;U+=256)V=P[U]=V>>>8^N[V&255];var Z=[];for(J=1;J!=16;++J)Z[J-1]=typeof Int32Array<"u"?P.subarray(J*256,J*256+256):P.slice(J*256,J*256+256);return Z}var i=a(r),o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],h=i[5],m=i[6],g=i[7],v=i[8],w=i[9],_=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function A(N,U){for(var V=U^-1,J=0,P=N.length;J<P;)V=V>>>8^r[(V^N.charCodeAt(J++))&255];return~V}function O(N,U){for(var V=U^-1,J=N.length-15,P=0;P<J;)V=C[N[P++]^V&255]^E[N[P++]^V>>8&255]^S[N[P++]^V>>16&255]^x[N[P++]^V>>>24]^_[N[P++]]^w[N[P++]]^v[N[P++]]^g[N[P++]]^m[N[P++]]^h[N[P++]]^f[N[P++]]^c[N[P++]]^u[N[P++]]^s[N[P++]]^o[N[P++]]^r[N[P++]];for(J+=15;P<J;)V=V>>>8^r[(V^N[P++])&255];return~V}function j(N,U){for(var V=U^-1,J=0,P=N.length,Z=0,F=0;J<P;)Z=N.charCodeAt(J++),Z<128?V=V>>>8^r[(V^Z)&255]:Z<2048?(V=V>>>8^r[(V^(192|Z>>6&31))&255],V=V>>>8^r[(V^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,F=N.charCodeAt(J++)&1023,V=V>>>8^r[(V^(240|Z>>8&7))&255],V=V>>>8^r[(V^(128|Z>>2&63))&255],V=V>>>8^r[(V^(128|F>>6&15|(Z&3)<<4))&255],V=V>>>8^r[(V^(128|F&63))&255]):(V=V>>>8^r[(V^(224|Z>>12&15))&255],V=V>>>8^r[(V^(128|Z>>6&63))&255],V=V>>>8^r[(V^(128|Z&63))&255]);return~V}t.table=r,t.bstr=A,t.buf=O,t.str=j})}(zx)),zx}var nQ=tQ();const rQ=Qa(nQ);var Ux={},XN;function ic(){return XN||(XN=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(i[u]=s[u])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,u,c){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+u),c);return}for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){var o,s,u,c,f,h;for(u=0,o=0,s=i.length;o<s;o++)u+=i[o].length;for(h=new Uint8Array(u),c=0,o=0,s=i.length;o<s;o++)f=i[o],h.set(f,c),c+=f.length;return h}},a={arraySet:function(i,o,s,u,c){for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(Ux)),Ux}var bf={},Ao={},Fc={},JN;function aQ(){if(JN)return Fc;JN=1;var e=ic(),t=4,n=0,r=1,a=2;function i(R){for(var H=R.length;--H>=0;)R[H]=0}var o=0,s=1,u=2,c=3,f=258,h=29,m=256,g=m+1+h,v=30,w=19,_=2*g+1,x=15,S=16,E=7,C=256,A=16,O=17,j=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],U=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],P=512,Z=new Array((g+2)*2);i(Z);var F=new Array(v*2);i(F);var ue=new Array(P);i(ue);var le=new Array(f-c+1);i(le);var ne=new Array(h);i(ne);var Q=new Array(v);i(Q);function te(R,H,de,Re,ye){this.static_tree=R,this.extra_bits=H,this.extra_base=de,this.elems=Re,this.max_length=ye,this.has_stree=R&&R.length}var G,X,ae;function be(R,H){this.dyn_tree=R,this.max_code=0,this.stat_desc=H}function we(R){return R<256?ue[R]:ue[256+(R>>>7)]}function fe(R,H){R.pending_buf[R.pending++]=H&255,R.pending_buf[R.pending++]=H>>>8&255}function Me(R,H,de){R.bi_valid>S-de?(R.bi_buf|=H<<R.bi_valid&65535,fe(R,R.bi_buf),R.bi_buf=H>>S-R.bi_valid,R.bi_valid+=de-S):(R.bi_buf|=H<<R.bi_valid&65535,R.bi_valid+=de)}function Pe(R,H,de){Me(R,de[H*2],de[H*2+1])}function Oe(R,H){var de=0;do de|=R&1,R>>>=1,de<<=1;while(--H>0);return de>>>1}function Ae(R){R.bi_valid===16?(fe(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):R.bi_valid>=8&&(R.pending_buf[R.pending++]=R.bi_buf&255,R.bi_buf>>=8,R.bi_valid-=8)}function $e(R,H){var de=H.dyn_tree,Re=H.max_code,ye=H.stat_desc.static_tree,Ce=H.stat_desc.has_stree,oe=H.stat_desc.extra_bits,ft=H.stat_desc.extra_base,vt=H.stat_desc.max_length,D,Be,st,ge,je,Je,It=0;for(ge=0;ge<=x;ge++)R.bl_count[ge]=0;for(de[R.heap[R.heap_max]*2+1]=0,D=R.heap_max+1;D<_;D++)Be=R.heap[D],ge=de[de[Be*2+1]*2+1]+1,ge>vt&&(ge=vt,It++),de[Be*2+1]=ge,!(Be>Re)&&(R.bl_count[ge]++,je=0,Be>=ft&&(je=oe[Be-ft]),Je=de[Be*2],R.opt_len+=Je*(ge+je),Ce&&(R.static_len+=Je*(ye[Be*2+1]+je)));if(It!==0){do{for(ge=vt-1;R.bl_count[ge]===0;)ge--;R.bl_count[ge]--,R.bl_count[ge+1]+=2,R.bl_count[vt]--,It-=2}while(It>0);for(ge=vt;ge!==0;ge--)for(Be=R.bl_count[ge];Be!==0;)st=R.heap[--D],!(st>Re)&&(de[st*2+1]!==ge&&(R.opt_len+=(ge-de[st*2+1])*de[st*2],de[st*2+1]=ge),Be--)}}function qe(R,H,de){var Re=new Array(x+1),ye=0,Ce,oe;for(Ce=1;Ce<=x;Ce++)Re[Ce]=ye=ye+de[Ce-1]<<1;for(oe=0;oe<=H;oe++){var ft=R[oe*2+1];ft!==0&&(R[oe*2]=Oe(Re[ft]++,ft))}}function Fe(){var R,H,de,Re,ye,Ce=new Array(x+1);for(de=0,Re=0;Re<h-1;Re++)for(ne[Re]=de,R=0;R<1<<N[Re];R++)le[de++]=Re;for(le[de-1]=Re,ye=0,Re=0;Re<16;Re++)for(Q[Re]=ye,R=0;R<1<<U[Re];R++)ue[ye++]=Re;for(ye>>=7;Re<v;Re++)for(Q[Re]=ye<<7,R=0;R<1<<U[Re]-7;R++)ue[256+ye++]=Re;for(H=0;H<=x;H++)Ce[H]=0;for(R=0;R<=143;)Z[R*2+1]=8,R++,Ce[8]++;for(;R<=255;)Z[R*2+1]=9,R++,Ce[9]++;for(;R<=279;)Z[R*2+1]=7,R++,Ce[7]++;for(;R<=287;)Z[R*2+1]=8,R++,Ce[8]++;for(qe(Z,g+1,Ce),R=0;R<v;R++)F[R*2+1]=5,F[R*2]=Oe(R,5);G=new te(Z,N,m+1,g,x),X=new te(F,U,0,v,x),ae=new te(new Array(0),V,0,w,E)}function Ne(R){var H;for(H=0;H<g;H++)R.dyn_ltree[H*2]=0;for(H=0;H<v;H++)R.dyn_dtree[H*2]=0;for(H=0;H<w;H++)R.bl_tree[H*2]=0;R.dyn_ltree[C*2]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function $(R){R.bi_valid>8?fe(R,R.bi_buf):R.bi_valid>0&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function Se(R,H,de,Re){$(R),fe(R,de),fe(R,~de),e.arraySet(R.pending_buf,R.window,H,de,R.pending),R.pending+=de}function ke(R,H,de,Re){var ye=H*2,Ce=de*2;return R[ye]<R[Ce]||R[ye]===R[Ce]&&Re[H]<=Re[de]}function ce(R,H,de){for(var Re=R.heap[de],ye=de<<1;ye<=R.heap_len&&(ye<R.heap_len&&ke(H,R.heap[ye+1],R.heap[ye],R.depth)&&ye++,!ke(H,Re,R.heap[ye],R.depth));)R.heap[de]=R.heap[ye],de=ye,ye<<=1;R.heap[de]=Re}function ie(R,H,de){var Re,ye,Ce=0,oe,ft;if(R.last_lit!==0)do Re=R.pending_buf[R.d_buf+Ce*2]<<8|R.pending_buf[R.d_buf+Ce*2+1],ye=R.pending_buf[R.l_buf+Ce],Ce++,Re===0?Pe(R,ye,H):(oe=le[ye],Pe(R,oe+m+1,H),ft=N[oe],ft!==0&&(ye-=ne[oe],Me(R,ye,ft)),Re--,oe=we(Re),Pe(R,oe,de),ft=U[oe],ft!==0&&(Re-=Q[oe],Me(R,Re,ft)));while(Ce<R.last_lit);Pe(R,C,H)}function Y(R,H){var de=H.dyn_tree,Re=H.stat_desc.static_tree,ye=H.stat_desc.has_stree,Ce=H.stat_desc.elems,oe,ft,vt=-1,D;for(R.heap_len=0,R.heap_max=_,oe=0;oe<Ce;oe++)de[oe*2]!==0?(R.heap[++R.heap_len]=vt=oe,R.depth[oe]=0):de[oe*2+1]=0;for(;R.heap_len<2;)D=R.heap[++R.heap_len]=vt<2?++vt:0,de[D*2]=1,R.depth[D]=0,R.opt_len--,ye&&(R.static_len-=Re[D*2+1]);for(H.max_code=vt,oe=R.heap_len>>1;oe>=1;oe--)ce(R,de,oe);D=Ce;do oe=R.heap[1],R.heap[1]=R.heap[R.heap_len--],ce(R,de,1),ft=R.heap[1],R.heap[--R.heap_max]=oe,R.heap[--R.heap_max]=ft,de[D*2]=de[oe*2]+de[ft*2],R.depth[D]=(R.depth[oe]>=R.depth[ft]?R.depth[oe]:R.depth[ft])+1,de[oe*2+1]=de[ft*2+1]=D,R.heap[1]=D++,ce(R,de,1);while(R.heap_len>=2);R.heap[--R.heap_max]=R.heap[1],$e(R,H),qe(de,vt,R.bl_count)}function _e(R,H,de){var Re,ye=-1,Ce,oe=H[0*2+1],ft=0,vt=7,D=4;for(oe===0&&(vt=138,D=3),H[(de+1)*2+1]=65535,Re=0;Re<=de;Re++)Ce=oe,oe=H[(Re+1)*2+1],!(++ft<vt&&Ce===oe)&&(ft<D?R.bl_tree[Ce*2]+=ft:Ce!==0?(Ce!==ye&&R.bl_tree[Ce*2]++,R.bl_tree[A*2]++):ft<=10?R.bl_tree[O*2]++:R.bl_tree[j*2]++,ft=0,ye=Ce,oe===0?(vt=138,D=3):Ce===oe?(vt=6,D=3):(vt=7,D=4))}function De(R,H,de){var Re,ye=-1,Ce,oe=H[0*2+1],ft=0,vt=7,D=4;for(oe===0&&(vt=138,D=3),Re=0;Re<=de;Re++)if(Ce=oe,oe=H[(Re+1)*2+1],!(++ft<vt&&Ce===oe)){if(ft<D)do Pe(R,Ce,R.bl_tree);while(--ft!==0);else Ce!==0?(Ce!==ye&&(Pe(R,Ce,R.bl_tree),ft--),Pe(R,A,R.bl_tree),Me(R,ft-3,2)):ft<=10?(Pe(R,O,R.bl_tree),Me(R,ft-3,3)):(Pe(R,j,R.bl_tree),Me(R,ft-11,7));ft=0,ye=Ce,oe===0?(vt=138,D=3):Ce===oe?(vt=6,D=3):(vt=7,D=4)}}function Ee(R){var H;for(_e(R,R.dyn_ltree,R.l_desc.max_code),_e(R,R.dyn_dtree,R.d_desc.max_code),Y(R,R.bl_desc),H=w-1;H>=3&&R.bl_tree[J[H]*2+1]===0;H--);return R.opt_len+=3*(H+1)+5+5+4,H}function Ze(R,H,de,Re){var ye;for(Me(R,H-257,5),Me(R,de-1,5),Me(R,Re-4,4),ye=0;ye<Re;ye++)Me(R,R.bl_tree[J[ye]*2+1],3);De(R,R.dyn_ltree,H-1),De(R,R.dyn_dtree,de-1)}function Et(R){var H=4093624447,de;for(de=0;de<=31;de++,H>>>=1)if(H&1&&R.dyn_ltree[de*2]!==0)return n;if(R.dyn_ltree[9*2]!==0||R.dyn_ltree[10*2]!==0||R.dyn_ltree[13*2]!==0)return r;for(de=32;de<m;de++)if(R.dyn_ltree[de*2]!==0)return r;return n}var at=!1;function _t(R){at||(Fe(),at=!0),R.l_desc=new be(R.dyn_ltree,G),R.d_desc=new be(R.dyn_dtree,X),R.bl_desc=new be(R.bl_tree,ae),R.bi_buf=0,R.bi_valid=0,Ne(R)}function Nt(R,H,de,Re){Me(R,(o<<1)+(Re?1:0),3),Se(R,H,de)}function Rt(R){Me(R,s<<1,3),Pe(R,C,Z),Ae(R)}function Kt(R,H,de,Re){var ye,Ce,oe=0;R.level>0?(R.strm.data_type===a&&(R.strm.data_type=Et(R)),Y(R,R.l_desc),Y(R,R.d_desc),oe=Ee(R),ye=R.opt_len+3+7>>>3,Ce=R.static_len+3+7>>>3,Ce<=ye&&(ye=Ce)):ye=Ce=de+5,de+4<=ye&&H!==-1?Nt(R,H,de,Re):R.strategy===t||Ce===ye?(Me(R,(s<<1)+(Re?1:0),3),ie(R,Z,F)):(Me(R,(u<<1)+(Re?1:0),3),Ze(R,R.l_desc.max_code+1,R.d_desc.max_code+1,oe+1),ie(R,R.dyn_ltree,R.dyn_dtree)),Ne(R),Re&&$(R)}function pe(R,H,de){return R.pending_buf[R.d_buf+R.last_lit*2]=H>>>8&255,R.pending_buf[R.d_buf+R.last_lit*2+1]=H&255,R.pending_buf[R.l_buf+R.last_lit]=de&255,R.last_lit++,H===0?R.dyn_ltree[de*2]++:(R.matches++,H--,R.dyn_ltree[(le[de]+m+1)*2]++,R.dyn_dtree[we(H)*2]++),R.last_lit===R.lit_bufsize-1}return Fc._tr_init=_t,Fc._tr_stored_block=Nt,Fc._tr_flush_block=Kt,Fc._tr_tally=pe,Fc._tr_align=Rt,Fc}var qx,QN;function $8(){if(QN)return qx;QN=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return qx=e,qx}var Hx,eI;function B8(){if(eI)return Hx;eI=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,u=o+i;r^=-1;for(var c=o;c<u;c++)r=r>>>8^s[(r^a[c])&255];return r^-1}return Hx=n,Hx}var Vx,tI;function _k(){return tI||(tI=1,Vx={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),Vx}var nI;function iQ(){if(nI)return Ao;nI=1;var e=ic(),t=aQ(),n=$8(),r=B8(),a=_k(),i=0,o=1,s=3,u=4,c=5,f=0,h=1,m=-2,g=-3,v=-5,w=-1,_=1,x=2,S=3,E=4,C=0,A=2,O=8,j=9,N=15,U=8,V=29,J=256,P=J+1+V,Z=30,F=19,ue=2*P+1,le=15,ne=3,Q=258,te=Q+ne+1,G=32,X=42,ae=69,be=73,we=91,fe=103,Me=113,Pe=666,Oe=1,Ae=2,$e=3,qe=4,Fe=3;function Ne(D,Be){return D.msg=a[Be],Be}function $(D){return(D<<1)-(D>4?9:0)}function Se(D){for(var Be=D.length;--Be>=0;)D[Be]=0}function ke(D){var Be=D.state,st=Be.pending;st>D.avail_out&&(st=D.avail_out),st!==0&&(e.arraySet(D.output,Be.pending_buf,Be.pending_out,st,D.next_out),D.next_out+=st,Be.pending_out+=st,D.total_out+=st,D.avail_out-=st,Be.pending-=st,Be.pending===0&&(Be.pending_out=0))}function ce(D,Be){t._tr_flush_block(D,D.block_start>=0?D.block_start:-1,D.strstart-D.block_start,Be),D.block_start=D.strstart,ke(D.strm)}function ie(D,Be){D.pending_buf[D.pending++]=Be}function Y(D,Be){D.pending_buf[D.pending++]=Be>>>8&255,D.pending_buf[D.pending++]=Be&255}function _e(D,Be,st,ge){var je=D.avail_in;return je>ge&&(je=ge),je===0?0:(D.avail_in-=je,e.arraySet(Be,D.input,D.next_in,je,st),D.state.wrap===1?D.adler=n(D.adler,Be,je,st):D.state.wrap===2&&(D.adler=r(D.adler,Be,je,st)),D.next_in+=je,D.total_in+=je,je)}function De(D,Be){var st=D.max_chain_length,ge=D.strstart,je,Je,It=D.prev_length,me=D.nice_match,q=D.strstart>D.w_size-te?D.strstart-(D.w_size-te):0,z=D.window,W=D.w_mask,he=D.prev,Te=D.strstart+Q,Ve=z[ge+It-1],gt=z[ge+It];D.prev_length>=D.good_match&&(st>>=2),me>D.lookahead&&(me=D.lookahead);do if(je=Be,!(z[je+It]!==gt||z[je+It-1]!==Ve||z[je]!==z[ge]||z[++je]!==z[ge+1])){ge+=2,je++;do;while(z[++ge]===z[++je]&&z[++ge]===z[++je]&&z[++ge]===z[++je]&&z[++ge]===z[++je]&&z[++ge]===z[++je]&&z[++ge]===z[++je]&&z[++ge]===z[++je]&&z[++ge]===z[++je]&&ge<Te);if(Je=Q-(Te-ge),ge=Te-Q,Je>It){if(D.match_start=Be,It=Je,Je>=me)break;Ve=z[ge+It-1],gt=z[ge+It]}}while((Be=he[Be&W])>q&&--st!==0);return It<=D.lookahead?It:D.lookahead}function Ee(D){var Be=D.w_size,st,ge,je,Je,It;do{if(Je=D.window_size-D.lookahead-D.strstart,D.strstart>=Be+(Be-te)){e.arraySet(D.window,D.window,Be,Be,0),D.match_start-=Be,D.strstart-=Be,D.block_start-=Be,ge=D.hash_size,st=ge;do je=D.head[--st],D.head[st]=je>=Be?je-Be:0;while(--ge);ge=Be,st=ge;do je=D.prev[--st],D.prev[st]=je>=Be?je-Be:0;while(--ge);Je+=Be}if(D.strm.avail_in===0)break;if(ge=_e(D.strm,D.window,D.strstart+D.lookahead,Je),D.lookahead+=ge,D.lookahead+D.insert>=ne)for(It=D.strstart-D.insert,D.ins_h=D.window[It],D.ins_h=(D.ins_h<<D.hash_shift^D.window[It+1])&D.hash_mask;D.insert&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[It+ne-1])&D.hash_mask,D.prev[It&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=It,It++,D.insert--,!(D.lookahead+D.insert<ne)););}while(D.lookahead<te&&D.strm.avail_in!==0)}function Ze(D,Be){var st=65535;for(st>D.pending_buf_size-5&&(st=D.pending_buf_size-5);;){if(D.lookahead<=1){if(Ee(D),D.lookahead===0&&Be===i)return Oe;if(D.lookahead===0)break}D.strstart+=D.lookahead,D.lookahead=0;var ge=D.block_start+st;if((D.strstart===0||D.strstart>=ge)&&(D.lookahead=D.strstart-ge,D.strstart=ge,ce(D,!1),D.strm.avail_out===0)||D.strstart-D.block_start>=D.w_size-te&&(ce(D,!1),D.strm.avail_out===0))return Oe}return D.insert=0,Be===u?(ce(D,!0),D.strm.avail_out===0?$e:qe):(D.strstart>D.block_start&&(ce(D,!1),D.strm.avail_out===0),Oe)}function Et(D,Be){for(var st,ge;;){if(D.lookahead<te){if(Ee(D),D.lookahead<te&&Be===i)return Oe;if(D.lookahead===0)break}if(st=0,D.lookahead>=ne&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+ne-1])&D.hash_mask,st=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),st!==0&&D.strstart-st<=D.w_size-te&&(D.match_length=De(D,st)),D.match_length>=ne)if(ge=t._tr_tally(D,D.strstart-D.match_start,D.match_length-ne),D.lookahead-=D.match_length,D.match_length<=D.max_lazy_match&&D.lookahead>=ne){D.match_length--;do D.strstart++,D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+ne-1])&D.hash_mask,st=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart;while(--D.match_length!==0);D.strstart++}else D.strstart+=D.match_length,D.match_length=0,D.ins_h=D.window[D.strstart],D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+1])&D.hash_mask;else ge=t._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++;if(ge&&(ce(D,!1),D.strm.avail_out===0))return Oe}return D.insert=D.strstart<ne-1?D.strstart:ne-1,Be===u?(ce(D,!0),D.strm.avail_out===0?$e:qe):D.last_lit&&(ce(D,!1),D.strm.avail_out===0)?Oe:Ae}function at(D,Be){for(var st,ge,je;;){if(D.lookahead<te){if(Ee(D),D.lookahead<te&&Be===i)return Oe;if(D.lookahead===0)break}if(st=0,D.lookahead>=ne&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+ne-1])&D.hash_mask,st=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart),D.prev_length=D.match_length,D.prev_match=D.match_start,D.match_length=ne-1,st!==0&&D.prev_length<D.max_lazy_match&&D.strstart-st<=D.w_size-te&&(D.match_length=De(D,st),D.match_length<=5&&(D.strategy===_||D.match_length===ne&&D.strstart-D.match_start>4096)&&(D.match_length=ne-1)),D.prev_length>=ne&&D.match_length<=D.prev_length){je=D.strstart+D.lookahead-ne,ge=t._tr_tally(D,D.strstart-1-D.prev_match,D.prev_length-ne),D.lookahead-=D.prev_length-1,D.prev_length-=2;do++D.strstart<=je&&(D.ins_h=(D.ins_h<<D.hash_shift^D.window[D.strstart+ne-1])&D.hash_mask,st=D.prev[D.strstart&D.w_mask]=D.head[D.ins_h],D.head[D.ins_h]=D.strstart);while(--D.prev_length!==0);if(D.match_available=0,D.match_length=ne-1,D.strstart++,ge&&(ce(D,!1),D.strm.avail_out===0))return Oe}else if(D.match_available){if(ge=t._tr_tally(D,0,D.window[D.strstart-1]),ge&&ce(D,!1),D.strstart++,D.lookahead--,D.strm.avail_out===0)return Oe}else D.match_available=1,D.strstart++,D.lookahead--}return D.match_available&&(ge=t._tr_tally(D,0,D.window[D.strstart-1]),D.match_available=0),D.insert=D.strstart<ne-1?D.strstart:ne-1,Be===u?(ce(D,!0),D.strm.avail_out===0?$e:qe):D.last_lit&&(ce(D,!1),D.strm.avail_out===0)?Oe:Ae}function _t(D,Be){for(var st,ge,je,Je,It=D.window;;){if(D.lookahead<=Q){if(Ee(D),D.lookahead<=Q&&Be===i)return Oe;if(D.lookahead===0)break}if(D.match_length=0,D.lookahead>=ne&&D.strstart>0&&(je=D.strstart-1,ge=It[je],ge===It[++je]&&ge===It[++je]&&ge===It[++je])){Je=D.strstart+Q;do;while(ge===It[++je]&&ge===It[++je]&&ge===It[++je]&&ge===It[++je]&&ge===It[++je]&&ge===It[++je]&&ge===It[++je]&&ge===It[++je]&&je<Je);D.match_length=Q-(Je-je),D.match_length>D.lookahead&&(D.match_length=D.lookahead)}if(D.match_length>=ne?(st=t._tr_tally(D,1,D.match_length-ne),D.lookahead-=D.match_length,D.strstart+=D.match_length,D.match_length=0):(st=t._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++),st&&(ce(D,!1),D.strm.avail_out===0))return Oe}return D.insert=0,Be===u?(ce(D,!0),D.strm.avail_out===0?$e:qe):D.last_lit&&(ce(D,!1),D.strm.avail_out===0)?Oe:Ae}function Nt(D,Be){for(var st;;){if(D.lookahead===0&&(Ee(D),D.lookahead===0)){if(Be===i)return Oe;break}if(D.match_length=0,st=t._tr_tally(D,0,D.window[D.strstart]),D.lookahead--,D.strstart++,st&&(ce(D,!1),D.strm.avail_out===0))return Oe}return D.insert=0,Be===u?(ce(D,!0),D.strm.avail_out===0?$e:qe):D.last_lit&&(ce(D,!1),D.strm.avail_out===0)?Oe:Ae}function Rt(D,Be,st,ge,je){this.good_length=D,this.max_lazy=Be,this.nice_length=st,this.max_chain=ge,this.func=je}var Kt;Kt=[new Rt(0,0,0,0,Ze),new Rt(4,4,8,4,Et),new Rt(4,5,16,8,Et),new Rt(4,6,32,32,Et),new Rt(4,4,16,16,at),new Rt(8,16,32,32,at),new Rt(8,16,128,128,at),new Rt(8,32,128,256,at),new Rt(32,128,258,1024,at),new Rt(32,258,258,4096,at)];function pe(D){D.window_size=2*D.w_size,Se(D.head),D.max_lazy_match=Kt[D.level].max_lazy,D.good_match=Kt[D.level].good_length,D.nice_match=Kt[D.level].nice_length,D.max_chain_length=Kt[D.level].max_chain,D.strstart=0,D.block_start=0,D.lookahead=0,D.insert=0,D.match_length=D.prev_length=ne-1,D.match_available=0,D.ins_h=0}function R(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(ue*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*F+1)*2),Se(this.dyn_ltree),Se(this.dyn_dtree),Se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(le+1),this.heap=new e.Buf16(2*P+1),Se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*P+1),Se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(D){var Be;return!D||!D.state?Ne(D,m):(D.total_in=D.total_out=0,D.data_type=A,Be=D.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?X:Me,D.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),f)}function de(D){var Be=H(D);return Be===f&&pe(D.state),Be}function Re(D,Be){return!D||!D.state||D.state.wrap!==2?m:(D.state.gzhead=Be,f)}function ye(D,Be,st,ge,je,Je){if(!D)return m;var It=1;if(Be===w&&(Be=6),ge<0?(It=0,ge=-ge):ge>15&&(It=2,ge-=16),je<1||je>j||st!==O||ge<8||ge>15||Be<0||Be>9||Je<0||Je>E)return Ne(D,m);ge===8&&(ge=9);var me=new R;return D.state=me,me.strm=D,me.wrap=It,me.gzhead=null,me.w_bits=ge,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=je+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+ne-1)/ne),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<je+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=Be,me.strategy=Je,me.method=st,de(D)}function Ce(D,Be){return ye(D,Be,O,N,U,C)}function oe(D,Be){var st,ge,je,Je;if(!D||!D.state||Be>c||Be<0)return D?Ne(D,m):m;if(ge=D.state,!D.output||!D.input&&D.avail_in!==0||ge.status===Pe&&Be!==u)return Ne(D,D.avail_out===0?v:m);if(ge.strm=D,st=ge.last_flush,ge.last_flush=Be,ge.status===X)if(ge.wrap===2)D.adler=0,ie(ge,31),ie(ge,139),ie(ge,8),ge.gzhead?(ie(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),ie(ge,ge.gzhead.time&255),ie(ge,ge.gzhead.time>>8&255),ie(ge,ge.gzhead.time>>16&255),ie(ge,ge.gzhead.time>>24&255),ie(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),ie(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(ie(ge,ge.gzhead.extra.length&255),ie(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(D.adler=r(D.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=ae):(ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,0),ie(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),ie(ge,Fe),ge.status=Me);else{var It=O+(ge.w_bits-8<<4)<<8,me=-1;ge.strategy>=x||ge.level<2?me=0:ge.level<6?me=1:ge.level===6?me=2:me=3,It|=me<<6,ge.strstart!==0&&(It|=G),It+=31-It%31,ge.status=Me,Y(ge,It),ge.strstart!==0&&(Y(ge,D.adler>>>16),Y(ge,D.adler&65535)),D.adler=1}if(ge.status===ae)if(ge.gzhead.extra){for(je=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>je&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-je,je)),ke(D),je=ge.pending,ge.pending===ge.pending_buf_size));)ie(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>je&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-je,je)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=be)}else ge.status=be;if(ge.status===be)if(ge.gzhead.name){je=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>je&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-je,je)),ke(D),je=ge.pending,ge.pending===ge.pending_buf_size)){Je=1;break}ge.gzindex<ge.gzhead.name.length?Je=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Je=0,ie(ge,Je)}while(Je!==0);ge.gzhead.hcrc&&ge.pending>je&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-je,je)),Je===0&&(ge.gzindex=0,ge.status=we)}else ge.status=we;if(ge.status===we)if(ge.gzhead.comment){je=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>je&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-je,je)),ke(D),je=ge.pending,ge.pending===ge.pending_buf_size)){Je=1;break}ge.gzindex<ge.gzhead.comment.length?Je=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Je=0,ie(ge,Je)}while(Je!==0);ge.gzhead.hcrc&&ge.pending>je&&(D.adler=r(D.adler,ge.pending_buf,ge.pending-je,je)),Je===0&&(ge.status=fe)}else ge.status=fe;if(ge.status===fe&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&ke(D),ge.pending+2<=ge.pending_buf_size&&(ie(ge,D.adler&255),ie(ge,D.adler>>8&255),D.adler=0,ge.status=Me)):ge.status=Me),ge.pending!==0){if(ke(D),D.avail_out===0)return ge.last_flush=-1,f}else if(D.avail_in===0&&$(Be)<=$(st)&&Be!==u)return Ne(D,v);if(ge.status===Pe&&D.avail_in!==0)return Ne(D,v);if(D.avail_in!==0||ge.lookahead!==0||Be!==i&&ge.status!==Pe){var q=ge.strategy===x?Nt(ge,Be):ge.strategy===S?_t(ge,Be):Kt[ge.level].func(ge,Be);if((q===$e||q===qe)&&(ge.status=Pe),q===Oe||q===$e)return D.avail_out===0&&(ge.last_flush=-1),f;if(q===Ae&&(Be===o?t._tr_align(ge):Be!==c&&(t._tr_stored_block(ge,0,0,!1),Be===s&&(Se(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),ke(D),D.avail_out===0))return ge.last_flush=-1,f}return Be!==u?f:ge.wrap<=0?h:(ge.wrap===2?(ie(ge,D.adler&255),ie(ge,D.adler>>8&255),ie(ge,D.adler>>16&255),ie(ge,D.adler>>24&255),ie(ge,D.total_in&255),ie(ge,D.total_in>>8&255),ie(ge,D.total_in>>16&255),ie(ge,D.total_in>>24&255)):(Y(ge,D.adler>>>16),Y(ge,D.adler&65535)),ke(D),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?f:h)}function ft(D){var Be;return!D||!D.state?m:(Be=D.state.status,Be!==X&&Be!==ae&&Be!==be&&Be!==we&&Be!==fe&&Be!==Me&&Be!==Pe?Ne(D,m):(D.state=null,Be===Me?Ne(D,g):f))}function vt(D,Be){var st=Be.length,ge,je,Je,It,me,q,z,W;if(!D||!D.state||(ge=D.state,It=ge.wrap,It===2||It===1&&ge.status!==X||ge.lookahead))return m;for(It===1&&(D.adler=n(D.adler,Be,st,0)),ge.wrap=0,st>=ge.w_size&&(It===0&&(Se(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),W=new e.Buf8(ge.w_size),e.arraySet(W,Be,st-ge.w_size,ge.w_size,0),Be=W,st=ge.w_size),me=D.avail_in,q=D.next_in,z=D.input,D.avail_in=st,D.next_in=0,D.input=Be,Ee(ge);ge.lookahead>=ne;){je=ge.strstart,Je=ge.lookahead-(ne-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[je+ne-1])&ge.hash_mask,ge.prev[je&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=je,je++;while(--Je);ge.strstart=je,ge.lookahead=ne-1,Ee(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=ne-1,ge.match_available=0,D.next_in=q,D.input=z,D.avail_in=me,ge.wrap=It,f}return Ao.deflateInit=Ce,Ao.deflateInit2=ye,Ao.deflateReset=de,Ao.deflateResetKeep=H,Ao.deflateSetHeader=Re,Ao.deflate=oe,Ao.deflateEnd=ft,Ao.deflateSetDictionary=vt,Ao.deflateInfo="pako deflate (from Nodeca project)",Ao}var Lc={},rI;function z8(){if(rI)return Lc;rI=1;var e=ic(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Lc.string2buf=function(o){var s,u,c,f,h,m=o.length,g=0;for(f=0;f<m;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(s=new e.Buf8(g),h=0,f=0;h<g;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?s[h++]=u:u<2048?(s[h++]=192|u>>>6,s[h++]=128|u&63):u<65536?(s[h++]=224|u>>>12,s[h++]=128|u>>>6&63,s[h++]=128|u&63):(s[h++]=240|u>>>18,s[h++]=128|u>>>12&63,s[h++]=128|u>>>6&63,s[h++]=128|u&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var u="",c=0;c<s;c++)u+=String.fromCharCode(o[c]);return u}return Lc.buf2binstring=function(o){return i(o,o.length)},Lc.binstring2buf=function(o){for(var s=new e.Buf8(o.length),u=0,c=s.length;u<c;u++)s[u]=o.charCodeAt(u);return s},Lc.buf2string=function(o,s){var u,c,f,h,m=s||o.length,g=new Array(m*2);for(c=0,u=0;u<m;){if(f=o[u++],f<128){g[c++]=f;continue}if(h=r[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<m;)f=f<<6|o[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return i(g,c)},Lc.utf8border=function(o,s){var u;for(s=s||o.length,s>o.length&&(s=o.length),u=s-1;u>=0&&(o[u]&192)===128;)u--;return u<0||u===0?s:u+r[o[u]]>s?u:s},Lc}var Gx,aI;function U8(){if(aI)return Gx;aI=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return Gx=e,Gx}var iI;function oQ(){if(iI)return bf;iI=1;var e=iQ(),t=ic(),n=z8(),r=_k(),a=U8(),i=Object.prototype.toString,o=0,s=4,u=0,c=1,f=2,h=-1,m=0,g=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==u)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var A;if(typeof E.dictionary=="string"?A=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?A=new Uint8Array(E.dictionary):A=E.dictionary,C=e.deflateSetDictionary(this.strm,A),C!==u)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,A=this.options.chunkSize,O,j;if(this.ended)return!1;j=E===~~E?E:E===!0?s:o,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(A),C.next_out=0,C.avail_out=A),O=e.deflate(C,j),O!==c&&O!==u)return this.onEnd(O),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(j===s||j===f))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&O!==c);return j===s?(O=e.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===u):(j===f&&(this.onEnd(u),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function w(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function _(S,E){return E=E||{},E.raw=!0,w(S,E)}function x(S,E){return E=E||{},E.gzip=!0,w(S,E)}return bf.Deflate=v,bf.deflate=w,bf.deflateRaw=_,bf.gzip=x,bf}var vf={},uo={},Wx,oI;function sQ(){if(oI)return Wx;oI=1;var e=30,t=12;return Wx=function(r,a){var i,o,s,u,c,f,h,m,g,v,w,_,x,S,E,C,A,O,j,N,U,V,J,P,Z;i=r.state,o=r.next_in,P=r.input,s=o+(r.avail_in-5),u=r.next_out,Z=r.output,c=u-(a-r.avail_out),f=u+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,v=i.wnext,w=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,A=(1<<i.distbits)-1;e:do{x<15&&(_+=P[o++]<<x,x+=8,_+=P[o++]<<x,x+=8),O=S[_&C];t:for(;;){if(j=O>>>24,_>>>=j,x-=j,j=O>>>16&255,j===0)Z[u++]=O&65535;else if(j&16){N=O&65535,j&=15,j&&(x<j&&(_+=P[o++]<<x,x+=8),N+=_&(1<<j)-1,_>>>=j,x-=j),x<15&&(_+=P[o++]<<x,x+=8,_+=P[o++]<<x,x+=8),O=E[_&A];n:for(;;){if(j=O>>>24,_>>>=j,x-=j,j=O>>>16&255,j&16){if(U=O&65535,j&=15,x<j&&(_+=P[o++]<<x,x+=8,x<j&&(_+=P[o++]<<x,x+=8)),U+=_&(1<<j)-1,U>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=j,x-=j,j=u-c,U>j){if(j=U-j,j>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(V=0,J=w,v===0){if(V+=m-j,j<N){N-=j;do Z[u++]=w[V++];while(--j);V=u-U,J=Z}}else if(v<j){if(V+=m+v-j,j-=v,j<N){N-=j;do Z[u++]=w[V++];while(--j);if(V=0,v<N){j=v,N-=j;do Z[u++]=w[V++];while(--j);V=u-U,J=Z}}}else if(V+=v-j,j<N){N-=j;do Z[u++]=w[V++];while(--j);V=u-U,J=Z}for(;N>2;)Z[u++]=J[V++],Z[u++]=J[V++],Z[u++]=J[V++],N-=3;N&&(Z[u++]=J[V++],N>1&&(Z[u++]=J[V++]))}else{V=u-U;do Z[u++]=Z[V++],Z[u++]=Z[V++],Z[u++]=Z[V++],N-=3;while(N>2);N&&(Z[u++]=Z[V++],N>1&&(Z[u++]=Z[V++]))}}else if((j&64)===0){O=E[(O&65535)+(_&(1<<j)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((j&64)===0){O=S[(O&65535)+(_&(1<<j)-1)];continue t}else if(j&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&u<f);N=x>>3,o-=N,x-=N<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=u,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=u<f?257+(f-u):257-(u-f),i.hold=_,i.bits=x},Wx}var Kx,sI;function lQ(){if(sI)return Kx;sI=1;var e=ic(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return Kx=function(m,g,v,w,_,x,S,E){var C=E.bits,A=0,O=0,j=0,N=0,U=0,V=0,J=0,P=0,Z=0,F=0,ue,le,ne,Q,te,G=null,X=0,ae,be=new e.Buf16(t+1),we=new e.Buf16(t+1),fe=null,Me=0,Pe,Oe,Ae;for(A=0;A<=t;A++)be[A]=0;for(O=0;O<w;O++)be[g[v+O]]++;for(U=C,N=t;N>=1&&be[N]===0;N--);if(U>N&&(U=N),N===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(j=1;j<N&&be[j]===0;j++);for(U<j&&(U=j),P=1,A=1;A<=t;A++)if(P<<=1,P-=be[A],P<0)return-1;if(P>0&&(m===a||N!==1))return-1;for(we[1]=0,A=1;A<t;A++)we[A+1]=we[A]+be[A];for(O=0;O<w;O++)g[v+O]!==0&&(S[we[g[v+O]]++]=O);if(m===a?(G=fe=S,ae=19):m===i?(G=s,X-=257,fe=u,Me-=257,ae=256):(G=c,fe=f,ae=-1),F=0,O=0,A=j,te=x,V=U,J=0,ne=-1,Z=1<<U,Q=Z-1,m===i&&Z>n||m===o&&Z>r)return 1;for(;;){Pe=A-J,S[O]<ae?(Oe=0,Ae=S[O]):S[O]>ae?(Oe=fe[Me+S[O]],Ae=G[X+S[O]]):(Oe=96,Ae=0),ue=1<<A-J,le=1<<V,j=le;do le-=ue,_[te+(F>>J)+le]=Pe<<24|Oe<<16|Ae|0;while(le!==0);for(ue=1<<A-1;F&ue;)ue>>=1;if(ue!==0?(F&=ue-1,F+=ue):F=0,O++,--be[A]===0){if(A===N)break;A=g[v+S[O]]}if(A>U&&(F&Q)!==ne){for(J===0&&(J=U),te+=j,V=A-J,P=1<<V;V+J<N&&(P-=be[V+J],!(P<=0));)V++,P<<=1;if(Z+=1<<V,m===i&&Z>n||m===o&&Z>r)return 1;ne=F&Q,_[ne]=U<<24|V<<16|te-x|0}}return F!==0&&(_[te+F]=A-J<<24|64<<16|0),E.bits=U,0},Kx}var lI;function uQ(){if(lI)return uo;lI=1;var e=ic(),t=$8(),n=B8(),r=sQ(),a=lQ(),i=0,o=1,s=2,u=4,c=5,f=6,h=0,m=1,g=2,v=-2,w=-3,_=-4,x=-5,S=8,E=1,C=2,A=3,O=4,j=5,N=6,U=7,V=8,J=9,P=10,Z=11,F=12,ue=13,le=14,ne=15,Q=16,te=17,G=18,X=19,ae=20,be=21,we=22,fe=23,Me=24,Pe=25,Oe=26,Ae=27,$e=28,qe=29,Fe=30,Ne=31,$=32,Se=852,ke=592,ce=15,ie=ce;function Y(ye){return(ye>>>24&255)+(ye>>>8&65280)+((ye&65280)<<8)+((ye&255)<<24)}function _e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function De(ye){var Ce;return!ye||!ye.state?v:(Ce=ye.state,ye.total_in=ye.total_out=Ce.total=0,ye.msg="",Ce.wrap&&(ye.adler=Ce.wrap&1),Ce.mode=E,Ce.last=0,Ce.havedict=0,Ce.dmax=32768,Ce.head=null,Ce.hold=0,Ce.bits=0,Ce.lencode=Ce.lendyn=new e.Buf32(Se),Ce.distcode=Ce.distdyn=new e.Buf32(ke),Ce.sane=1,Ce.back=-1,h)}function Ee(ye){var Ce;return!ye||!ye.state?v:(Ce=ye.state,Ce.wsize=0,Ce.whave=0,Ce.wnext=0,De(ye))}function Ze(ye,Ce){var oe,ft;return!ye||!ye.state||(ft=ye.state,Ce<0?(oe=0,Ce=-Ce):(oe=(Ce>>4)+1,Ce<48&&(Ce&=15)),Ce&&(Ce<8||Ce>15))?v:(ft.window!==null&&ft.wbits!==Ce&&(ft.window=null),ft.wrap=oe,ft.wbits=Ce,Ee(ye))}function Et(ye,Ce){var oe,ft;return ye?(ft=new _e,ye.state=ft,ft.window=null,oe=Ze(ye,Ce),oe!==h&&(ye.state=null),oe):v}function at(ye){return Et(ye,ie)}var _t=!0,Nt,Rt;function Kt(ye){if(_t){var Ce;for(Nt=new e.Buf32(512),Rt=new e.Buf32(32),Ce=0;Ce<144;)ye.lens[Ce++]=8;for(;Ce<256;)ye.lens[Ce++]=9;for(;Ce<280;)ye.lens[Ce++]=7;for(;Ce<288;)ye.lens[Ce++]=8;for(a(o,ye.lens,0,288,Nt,0,ye.work,{bits:9}),Ce=0;Ce<32;)ye.lens[Ce++]=5;a(s,ye.lens,0,32,Rt,0,ye.work,{bits:5}),_t=!1}ye.lencode=Nt,ye.lenbits=9,ye.distcode=Rt,ye.distbits=5}function pe(ye,Ce,oe,ft){var vt,D=ye.state;return D.window===null&&(D.wsize=1<<D.wbits,D.wnext=0,D.whave=0,D.window=new e.Buf8(D.wsize)),ft>=D.wsize?(e.arraySet(D.window,Ce,oe-D.wsize,D.wsize,0),D.wnext=0,D.whave=D.wsize):(vt=D.wsize-D.wnext,vt>ft&&(vt=ft),e.arraySet(D.window,Ce,oe-ft,vt,D.wnext),ft-=vt,ft?(e.arraySet(D.window,Ce,oe-ft,ft,0),D.wnext=ft,D.whave=D.wsize):(D.wnext+=vt,D.wnext===D.wsize&&(D.wnext=0),D.whave<D.wsize&&(D.whave+=vt))),0}function R(ye,Ce){var oe,ft,vt,D,Be,st,ge,je,Je,It,me,q,z,W,he=0,Te,Ve,gt,Gt,ht,Ct,Ot,Zt,En=new e.Buf8(4),zn,hr,pr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ye||!ye.state||!ye.output||!ye.input&&ye.avail_in!==0)return v;oe=ye.state,oe.mode===F&&(oe.mode=ue),Be=ye.next_out,vt=ye.output,ge=ye.avail_out,D=ye.next_in,ft=ye.input,st=ye.avail_in,je=oe.hold,Je=oe.bits,It=st,me=ge,Zt=h;e:for(;;)switch(oe.mode){case E:if(oe.wrap===0){oe.mode=ue;break}for(;Je<16;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if(oe.wrap&2&&je===35615){oe.check=0,En[0]=je&255,En[1]=je>>>8&255,oe.check=n(oe.check,En,2,0),je=0,Je=0,oe.mode=C;break}if(oe.flags=0,oe.head&&(oe.head.done=!1),!(oe.wrap&1)||(((je&255)<<8)+(je>>8))%31){ye.msg="incorrect header check",oe.mode=Fe;break}if((je&15)!==S){ye.msg="unknown compression method",oe.mode=Fe;break}if(je>>>=4,Je-=4,Ot=(je&15)+8,oe.wbits===0)oe.wbits=Ot;else if(Ot>oe.wbits){ye.msg="invalid window size",oe.mode=Fe;break}oe.dmax=1<<Ot,ye.adler=oe.check=1,oe.mode=je&512?P:F,je=0,Je=0;break;case C:for(;Je<16;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if(oe.flags=je,(oe.flags&255)!==S){ye.msg="unknown compression method",oe.mode=Fe;break}if(oe.flags&57344){ye.msg="unknown header flags set",oe.mode=Fe;break}oe.head&&(oe.head.text=je>>8&1),oe.flags&512&&(En[0]=je&255,En[1]=je>>>8&255,oe.check=n(oe.check,En,2,0)),je=0,Je=0,oe.mode=A;case A:for(;Je<32;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}oe.head&&(oe.head.time=je),oe.flags&512&&(En[0]=je&255,En[1]=je>>>8&255,En[2]=je>>>16&255,En[3]=je>>>24&255,oe.check=n(oe.check,En,4,0)),je=0,Je=0,oe.mode=O;case O:for(;Je<16;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}oe.head&&(oe.head.xflags=je&255,oe.head.os=je>>8),oe.flags&512&&(En[0]=je&255,En[1]=je>>>8&255,oe.check=n(oe.check,En,2,0)),je=0,Je=0,oe.mode=j;case j:if(oe.flags&1024){for(;Je<16;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}oe.length=je,oe.head&&(oe.head.extra_len=je),oe.flags&512&&(En[0]=je&255,En[1]=je>>>8&255,oe.check=n(oe.check,En,2,0)),je=0,Je=0}else oe.head&&(oe.head.extra=null);oe.mode=N;case N:if(oe.flags&1024&&(q=oe.length,q>st&&(q=st),q&&(oe.head&&(Ot=oe.head.extra_len-oe.length,oe.head.extra||(oe.head.extra=new Array(oe.head.extra_len)),e.arraySet(oe.head.extra,ft,D,q,Ot)),oe.flags&512&&(oe.check=n(oe.check,ft,q,D)),st-=q,D+=q,oe.length-=q),oe.length))break e;oe.length=0,oe.mode=U;case U:if(oe.flags&2048){if(st===0)break e;q=0;do Ot=ft[D+q++],oe.head&&Ot&&oe.length<65536&&(oe.head.name+=String.fromCharCode(Ot));while(Ot&&q<st);if(oe.flags&512&&(oe.check=n(oe.check,ft,q,D)),st-=q,D+=q,Ot)break e}else oe.head&&(oe.head.name=null);oe.length=0,oe.mode=V;case V:if(oe.flags&4096){if(st===0)break e;q=0;do Ot=ft[D+q++],oe.head&&Ot&&oe.length<65536&&(oe.head.comment+=String.fromCharCode(Ot));while(Ot&&q<st);if(oe.flags&512&&(oe.check=n(oe.check,ft,q,D)),st-=q,D+=q,Ot)break e}else oe.head&&(oe.head.comment=null);oe.mode=J;case J:if(oe.flags&512){for(;Je<16;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if(je!==(oe.check&65535)){ye.msg="header crc mismatch",oe.mode=Fe;break}je=0,Je=0}oe.head&&(oe.head.hcrc=oe.flags>>9&1,oe.head.done=!0),ye.adler=oe.check=0,oe.mode=F;break;case P:for(;Je<32;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}ye.adler=oe.check=Y(je),je=0,Je=0,oe.mode=Z;case Z:if(oe.havedict===0)return ye.next_out=Be,ye.avail_out=ge,ye.next_in=D,ye.avail_in=st,oe.hold=je,oe.bits=Je,g;ye.adler=oe.check=1,oe.mode=F;case F:if(Ce===c||Ce===f)break e;case ue:if(oe.last){je>>>=Je&7,Je-=Je&7,oe.mode=Ae;break}for(;Je<3;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}switch(oe.last=je&1,je>>>=1,Je-=1,je&3){case 0:oe.mode=le;break;case 1:if(Kt(oe),oe.mode=ae,Ce===f){je>>>=2,Je-=2;break e}break;case 2:oe.mode=te;break;case 3:ye.msg="invalid block type",oe.mode=Fe}je>>>=2,Je-=2;break;case le:for(je>>>=Je&7,Je-=Je&7;Je<32;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if((je&65535)!==(je>>>16^65535)){ye.msg="invalid stored block lengths",oe.mode=Fe;break}if(oe.length=je&65535,je=0,Je=0,oe.mode=ne,Ce===f)break e;case ne:oe.mode=Q;case Q:if(q=oe.length,q){if(q>st&&(q=st),q>ge&&(q=ge),q===0)break e;e.arraySet(vt,ft,D,q,Be),st-=q,D+=q,ge-=q,Be+=q,oe.length-=q;break}oe.mode=F;break;case te:for(;Je<14;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if(oe.nlen=(je&31)+257,je>>>=5,Je-=5,oe.ndist=(je&31)+1,je>>>=5,Je-=5,oe.ncode=(je&15)+4,je>>>=4,Je-=4,oe.nlen>286||oe.ndist>30){ye.msg="too many length or distance symbols",oe.mode=Fe;break}oe.have=0,oe.mode=G;case G:for(;oe.have<oe.ncode;){for(;Je<3;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}oe.lens[pr[oe.have++]]=je&7,je>>>=3,Je-=3}for(;oe.have<19;)oe.lens[pr[oe.have++]]=0;if(oe.lencode=oe.lendyn,oe.lenbits=7,zn={bits:oe.lenbits},Zt=a(i,oe.lens,0,19,oe.lencode,0,oe.work,zn),oe.lenbits=zn.bits,Zt){ye.msg="invalid code lengths set",oe.mode=Fe;break}oe.have=0,oe.mode=X;case X:for(;oe.have<oe.nlen+oe.ndist;){for(;he=oe.lencode[je&(1<<oe.lenbits)-1],Te=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Te<=Je);){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if(gt<16)je>>>=Te,Je-=Te,oe.lens[oe.have++]=gt;else{if(gt===16){for(hr=Te+2;Je<hr;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if(je>>>=Te,Je-=Te,oe.have===0){ye.msg="invalid bit length repeat",oe.mode=Fe;break}Ot=oe.lens[oe.have-1],q=3+(je&3),je>>>=2,Je-=2}else if(gt===17){for(hr=Te+3;Je<hr;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}je>>>=Te,Je-=Te,Ot=0,q=3+(je&7),je>>>=3,Je-=3}else{for(hr=Te+7;Je<hr;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}je>>>=Te,Je-=Te,Ot=0,q=11+(je&127),je>>>=7,Je-=7}if(oe.have+q>oe.nlen+oe.ndist){ye.msg="invalid bit length repeat",oe.mode=Fe;break}for(;q--;)oe.lens[oe.have++]=Ot}}if(oe.mode===Fe)break;if(oe.lens[256]===0){ye.msg="invalid code -- missing end-of-block",oe.mode=Fe;break}if(oe.lenbits=9,zn={bits:oe.lenbits},Zt=a(o,oe.lens,0,oe.nlen,oe.lencode,0,oe.work,zn),oe.lenbits=zn.bits,Zt){ye.msg="invalid literal/lengths set",oe.mode=Fe;break}if(oe.distbits=6,oe.distcode=oe.distdyn,zn={bits:oe.distbits},Zt=a(s,oe.lens,oe.nlen,oe.ndist,oe.distcode,0,oe.work,zn),oe.distbits=zn.bits,Zt){ye.msg="invalid distances set",oe.mode=Fe;break}if(oe.mode=ae,Ce===f)break e;case ae:oe.mode=be;case be:if(st>=6&&ge>=258){ye.next_out=Be,ye.avail_out=ge,ye.next_in=D,ye.avail_in=st,oe.hold=je,oe.bits=Je,r(ye,me),Be=ye.next_out,vt=ye.output,ge=ye.avail_out,D=ye.next_in,ft=ye.input,st=ye.avail_in,je=oe.hold,Je=oe.bits,oe.mode===F&&(oe.back=-1);break}for(oe.back=0;he=oe.lencode[je&(1<<oe.lenbits)-1],Te=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Te<=Je);){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if(Ve&&(Ve&240)===0){for(Gt=Te,ht=Ve,Ct=gt;he=oe.lencode[Ct+((je&(1<<Gt+ht)-1)>>Gt)],Te=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Gt+Te<=Je);){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}je>>>=Gt,Je-=Gt,oe.back+=Gt}if(je>>>=Te,Je-=Te,oe.back+=Te,oe.length=gt,Ve===0){oe.mode=Oe;break}if(Ve&32){oe.back=-1,oe.mode=F;break}if(Ve&64){ye.msg="invalid literal/length code",oe.mode=Fe;break}oe.extra=Ve&15,oe.mode=we;case we:if(oe.extra){for(hr=oe.extra;Je<hr;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}oe.length+=je&(1<<oe.extra)-1,je>>>=oe.extra,Je-=oe.extra,oe.back+=oe.extra}oe.was=oe.length,oe.mode=fe;case fe:for(;he=oe.distcode[je&(1<<oe.distbits)-1],Te=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Te<=Je);){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if((Ve&240)===0){for(Gt=Te,ht=Ve,Ct=gt;he=oe.distcode[Ct+((je&(1<<Gt+ht)-1)>>Gt)],Te=he>>>24,Ve=he>>>16&255,gt=he&65535,!(Gt+Te<=Je);){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}je>>>=Gt,Je-=Gt,oe.back+=Gt}if(je>>>=Te,Je-=Te,oe.back+=Te,Ve&64){ye.msg="invalid distance code",oe.mode=Fe;break}oe.offset=gt,oe.extra=Ve&15,oe.mode=Me;case Me:if(oe.extra){for(hr=oe.extra;Je<hr;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}oe.offset+=je&(1<<oe.extra)-1,je>>>=oe.extra,Je-=oe.extra,oe.back+=oe.extra}if(oe.offset>oe.dmax){ye.msg="invalid distance too far back",oe.mode=Fe;break}oe.mode=Pe;case Pe:if(ge===0)break e;if(q=me-ge,oe.offset>q){if(q=oe.offset-q,q>oe.whave&&oe.sane){ye.msg="invalid distance too far back",oe.mode=Fe;break}q>oe.wnext?(q-=oe.wnext,z=oe.wsize-q):z=oe.wnext-q,q>oe.length&&(q=oe.length),W=oe.window}else W=vt,z=Be-oe.offset,q=oe.length;q>ge&&(q=ge),ge-=q,oe.length-=q;do vt[Be++]=W[z++];while(--q);oe.length===0&&(oe.mode=be);break;case Oe:if(ge===0)break e;vt[Be++]=oe.length,ge--,oe.mode=be;break;case Ae:if(oe.wrap){for(;Je<32;){if(st===0)break e;st--,je|=ft[D++]<<Je,Je+=8}if(me-=ge,ye.total_out+=me,oe.total+=me,me&&(ye.adler=oe.check=oe.flags?n(oe.check,vt,me,Be-me):t(oe.check,vt,me,Be-me)),me=ge,(oe.flags?je:Y(je))!==oe.check){ye.msg="incorrect data check",oe.mode=Fe;break}je=0,Je=0}oe.mode=$e;case $e:if(oe.wrap&&oe.flags){for(;Je<32;){if(st===0)break e;st--,je+=ft[D++]<<Je,Je+=8}if(je!==(oe.total&4294967295)){ye.msg="incorrect length check",oe.mode=Fe;break}je=0,Je=0}oe.mode=qe;case qe:Zt=m;break e;case Fe:Zt=w;break e;case Ne:return _;case $:default:return v}return ye.next_out=Be,ye.avail_out=ge,ye.next_in=D,ye.avail_in=st,oe.hold=je,oe.bits=Je,(oe.wsize||me!==ye.avail_out&&oe.mode<Fe&&(oe.mode<Ae||Ce!==u))&&pe(ye,ye.output,ye.next_out,me-ye.avail_out),It-=ye.avail_in,me-=ye.avail_out,ye.total_in+=It,ye.total_out+=me,oe.total+=me,oe.wrap&&me&&(ye.adler=oe.check=oe.flags?n(oe.check,vt,me,ye.next_out-me):t(oe.check,vt,me,ye.next_out-me)),ye.data_type=oe.bits+(oe.last?64:0)+(oe.mode===F?128:0)+(oe.mode===ae||oe.mode===ne?256:0),(It===0&&me===0||Ce===u)&&Zt===h&&(Zt=x),Zt}function H(ye){if(!ye||!ye.state)return v;var Ce=ye.state;return Ce.window&&(Ce.window=null),ye.state=null,h}function de(ye,Ce){var oe;return!ye||!ye.state||(oe=ye.state,(oe.wrap&2)===0)?v:(oe.head=Ce,Ce.done=!1,h)}function Re(ye,Ce){var oe=Ce.length,ft,vt,D;return!ye||!ye.state||(ft=ye.state,ft.wrap!==0&&ft.mode!==Z)?v:ft.mode===Z&&(vt=1,vt=t(vt,Ce,oe,0),vt!==ft.check)?w:(D=pe(ye,Ce,oe,oe),D?(ft.mode=Ne,_):(ft.havedict=1,h))}return uo.inflateReset=Ee,uo.inflateReset2=Ze,uo.inflateResetKeep=De,uo.inflateInit=at,uo.inflateInit2=Et,uo.inflate=R,uo.inflateEnd=H,uo.inflateGetHeader=de,uo.inflateSetDictionary=Re,uo.inflateInfo="pako inflate (from Nodeca project)",uo}var Zx,uI;function q8(){return uI||(uI=1,Zx={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),Zx}var Yx,cI;function cQ(){if(cI)return Yx;cI=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return Yx=e,Yx}var dI;function dQ(){if(dI)return vf;dI=1;var e=uQ(),t=ic(),n=z8(),r=q8(),a=_k(),i=U8(),o=cQ(),s=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):s.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(a[g])}u.prototype.push=function(h,m){var g=this.strm,v=this.options.chunkSize,w=this.options.dictionary,_,x,S,E,C,A=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&w&&(_=e.inflateSetDictionary(this.strm,w)),_===r.Z_BUF_ERROR&&A===!0&&(_=r.Z_OK,A=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(A=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,m){var g=new u(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function f(h,m){return m=m||{},m.raw=!0,c(h,m)}return vf.Inflate=u,vf.inflate=c,vf.inflateRaw=f,vf.ungzip=c,vf}var Xx,fI;function fQ(){if(fI)return Xx;fI=1;var e=ic().assign,t=oQ(),n=dQ(),r=q8(),a={};return e(a,t,n,r),Xx=a,Xx}var hQ=fQ();const xk=Qa(hQ);var Jx,hI;function pQ(){if(hI)return Jx;hI=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,u)=>{s?o(s):i(u)}):r.push(i),t.apply(this,r)})};return Jx=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=u=>typeof u=="string"?o===u:u.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},Jx}var mQ=pQ();const Qx=Qa(mQ);var eS,pI;function gQ(){if(pI)return eS;pI=1;var e={};function t(ne){return Array.isArray(ne)?ne:[ne]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,u=/^\\#/,c=/\r?\n/g,f=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,v=(ne,Q,te)=>Object.defineProperty(ne,Q,{value:te}),w=/([0-z])-([0-z])/g,_=()=>!1,x=ne=>ne.replace(w,(Q,te,G)=>te.charCodeAt(0)<=G.charCodeAt(0)?Q:n),S=ne=>{const{length:Q}=ne;return ne.slice(0,Q-Q%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ne,Q,te)=>Q+(te.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(ne,Q)=>{const{length:te}=Q;return Q.slice(0,te-te%2)+r}],[/[\\$.|*+(){^]/g,ne=>`\\${ne}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ne,Q,te)=>Q+6<te.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ne,Q,te)=>{const G=te.replace(/\\\*/g,"[^\\/]*");return Q+G}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ne,Q,te,G,X)=>Q===a?`\\[${te}${S(G)}${X}`:X==="]"&&G.length%2===0?`[${x(te)}${G}]`:"[]"],[/(?:[^*])$/,ne=>/\/$/.test(ne)?`${ne}$`:`${ne}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ne,Q)=>`${Q?`${Q}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),A=(ne,Q)=>{let te=C[ne];return te||(te=E.reduce((G,[X,ae])=>G.replace(X,ae.bind(ne)),ne),C[ne]=te),Q?new RegExp(te,"i"):new RegExp(te)},O=ne=>typeof ne=="string",j=ne=>ne&&O(ne)&&!i.test(ne)&&!o.test(ne)&&ne.indexOf("#")!==0,N=ne=>ne.split(c);class U{constructor(Q,te,G,X){this.origin=Q,this.pattern=te,this.negative=G,this.regex=X}}const V=(ne,Q)=>{const te=ne;let G=!1;ne.indexOf("!")===0&&(G=!0,ne=ne.substr(1)),ne=ne.replace(s,"!").replace(u,"#");const X=A(ne,Q);return new U(te,ne,G,X)},J=(ne,Q)=>{throw new Q(ne)},P=(ne,Q,te)=>O(ne)?ne?P.isNotRelative(ne)?te(`path should be a \`path.relative()\`d string, but got "${Q}"`,RangeError):!0:te("path must not be empty",TypeError):te(`path must be a string, but got \`${Q}\``,TypeError),Z=ne=>f.test(ne);P.isNotRelative=Z,P.convert=ne=>ne;class F{constructor({ignorecase:Q=!0,ignoreCase:te=Q,allowRelativePaths:G=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=te,this._allowRelativePaths=G,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(Q){if(Q&&Q[g]){this._rules=this._rules.concat(Q._rules),this._added=!0;return}if(j(Q)){const te=V(Q,this._ignoreCase);this._added=!0,this._rules.push(te)}}add(Q){return this._added=!1,t(O(Q)?N(Q):Q).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(Q){return this.add(Q)}_testOne(Q,te){let G=!1,X=!1;return this._rules.forEach(ae=>{const{negative:be}=ae;if(X===be&&G!==X||be&&!G&&!X&&!te)return;ae.regex.test(Q)&&(G=!be,X=be)}),{ignored:G,unignored:X}}_test(Q,te,G,X){const ae=Q&&P.convert(Q);return P(ae,Q,this._allowRelativePaths?_:J),this._t(ae,te,G,X)}_t(Q,te,G,X){if(Q in te)return te[Q];if(X||(X=Q.split(h)),X.pop(),!X.length)return te[Q]=this._testOne(Q,G);const ae=this._t(X.join(h)+h,te,G,X);return te[Q]=ae.ignored?ae:this._testOne(Q,G)}ignores(Q){return this._test(Q,this._ignoreCache,!1).ignored}createFilter(){return Q=>!this.ignores(Q)}filter(Q){return t(Q).filter(this.createFilter())}test(Q){return this._test(Q,this._testCache,!0)}}const ue=ne=>new F(ne),le=ne=>P(ne&&P.convert(ne),ne,_);if(ue.isPathValid=le,ue.default=ue,eS=ue,typeof Vr<"u"&&(e&&e.IGNORE_TEST_WIN32||Vr.platform==="win32")){const ne=te=>/^\\\\\?\\/.test(te)||/["<>|\u0000-\u001F]+/u.test(te)?te:te.replace(/\\/g,"/");P.convert=ne;const Q=/^[a-z]:\//i;P.isNotRelative=te=>Q.test(te)||Z(te)}return eS}var yQ=gQ();const bQ=Qa(yQ);var tS,mI;function vQ(){if(mI)return tS;mI=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return tS=n,tS}var wQ=vQ();const Es=Qa(wQ);var nS,gI;function _Q(){return gI||(gI=1,nS=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,u=a+1,c=[],f=[],h=[],m="",g=-1,v=0,w=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,u=a+1)},E=function(j,N,U){return{x:j,y:N,k:U}},C=function(j,N){return{elem:j,t:N}},A=function(j,N,U){var V,J,P;for(N>U?V=c[j-1+u]:V=c[j+1+u],P=Math.max(N,U),J=P-j;J<a&&P<i&&n[J]===r[P];)++J,++P;return c[j+u]=f.length,f[f.length]=new E(J,P,V),P},O=function(j){var N,U,V;for(N=U=0,V=j.length-1;V>=0;--V)for(;N<j[V].x||U<j[V].y;)j[V].y-j[V].x>U-N?(o?h[h.length]=new C(r[U],g):h[h.length]=new C(r[U],w),++U):j[V].y-j[V].x<U-N?(o?h[h.length]=new C(n[N],w):h[h.length]=new C(n[N],g),++N):(h[h.length]=new C(n[N],v),m+=n[N],++N,++U)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return m},getses:function(){return h},compose:function(){var j,N,U,V,J,P,Z,F;for(j=i-a,N=a+i+3,U={},Z=0;Z<N;++Z)U[Z]=-1,c[Z]=-1;V=-1;do{for(++V,F=-V;F<=j-1;++F)U[F+u]=A(F,U[F-1+u]+1,U[F+1+u]);for(F=j+V;F>=j+1;--F)U[F+u]=A(F,U[F-1+u]+1,U[F+1+u]);U[j+u]=A(j,U[j-1+u]+1,U[j+1+u])}while(U[j+u]!==i);for(s=j+2*V,J=c[j+u],P=[];J!==-1;)P[P.length]=new E(f[J].x,f[J].y,null),J=f[J].k;O(P)}}}),nS}var rS,yI;function xQ(){if(yI)return rS;yI=1;var e=_Q();function t(i,o){var s=new e(i,o);s.compose();for(var u=s.getses(),c,f,h=i.length-1,m=o.length-1,g=u.length-1;g>=0;--g)u[g].t===s.SES_COMMON?(f?(f.chain={file1index:h,file2index:m,chain:null},f=f.chain):(c={file1index:h,file2index:m,chain:null},f=c),h--,m--):u[g].t===s.SES_DELETE?h--:u[g].t===s.SES_ADD&&m--;var v={file1index:-1,file2index:-1,chain:null};return f?(f.chain=v,c):v}function n(i,o){for(var s=[],u=i.length,c=o.length,f=t(i,o);f!==null;f=f.chain){var h=u-f.file1index-1,m=c-f.file2index-1;u=f.file1index,c=f.file2index,(h||m)&&s.push({file1:[u+1,h],file2:[c+1,m]})}return s.reverse(),s}function r(i,o,s){var u,c=n(o,i),f=n(o,s),h=[];function m(Q,te){h.push([Q.file1[0],te,Q.file1[1],Q.file2[0],Q.file2[1]])}for(u=0;u<c.length;u++)m(c[u],0);for(u=0;u<f.length;u++)m(f[u],2);h.sort(function(Q,te){return Q[0]-te[0]});var g=[],v=0;function w(Q){Q>v&&(g.push([1,v,Q-v]),v=Q)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],C=E+S[2];_<h.length-1;){var A=h[_+1],O=A[0];if(O>C)break;C=Math.max(C,O+A[2]),_++}if(w(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var j={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(u=x;u<=_;u++){S=h[u];var N=S[1],U=j[N],V=S[0],J=V+S[2],P=S[3],Z=P+S[4];U[0]=Math.min(P,U[0]),U[1]=Math.max(Z,U[1]),U[2]=Math.min(V,U[2]),U[3]=Math.max(J,U[3])}var F=j[0][0]+(E-j[0][2]),ue=j[0][1]+(C-j[0][3]),le=j[2][0]+(E-j[2][2]),ne=j[2][1]+(C-j[2][3]);g.push([-1,F,ue-F,E,C-E,le,ne-le])}v=C}return w(o.length),g}function a(i,o,s){var u=[],c=[i,o,s],f=r(i,o,s),h=[];function m(){h.length&&u.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],A=0;A<S[2];A++)if(i[A+E]!=s[A+C])return!0;return!1}for(var w=0;w<f.length;w++){var _=f[w],x=_[0];x==-1?v(_)?(m(),u.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(c[0].slice(_[1],_[1]+_[2])):g(c[x].slice(_[1],_[1]+_[2]))}return m(),u}return rS=a,rS}var SQ=xQ();const EQ=Qa(SQ);class Yn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Yn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class A0 extends Yn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=A0.code,this.data={filepaths:t}}}A0.code="UnmergedPathsError";class An extends Yn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=An.code,this.data={message:t}}}An.code="InternalError";class Sh extends Yn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Sh.code,this.data={filepath:t}}}Sh.code="UnsafeFilepathError";class xs{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function ew(e,t){return-(e<t)||+(e>t)}function H8(e,t){return ew(e.path,t.path)}function V8(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const gs=2**32;function bI(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Xf(e){const[t,n]=bI(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=bI(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%gs,ctimeNanoseconds:n%gs,mtimeSeconds:r%gs,mtimeNanoseconds:a%gs,dev:e.dev%gs,ino:e.ino%gs,mode:V8(e.mode%gs),uid:e.uid%gs,gid:e.gid%gs,size:e.size>-1?e.size%gs:0}}function kQ(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let aS=null;async function Ol(e){return aS===null&&(aS=await AQ()),aS?G8(e):CQ(e)}function CQ(e){return new L8().update(e).digest("hex")}async function G8(e){const t=await crypto.subtle.digest("SHA-1",e);return kQ(t)}async function AQ(){try{if(await G8(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function TQ(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function RQ(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Wt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Uc{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Wt.isBuffer(t))return Uc.fromBuffer(t);if(t===null)return new Uc(null);throw new An("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new An("Index file is empty (.git/index)");const n=new Uc,r=new xs(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new An(`Invalid dircache magic file number: ${a}`);const i=await Ol(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new An(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new An(`Unsupported dircache version: ${s}`);const u=r.readUInt32BE();let c=0;for(;!r.eof()&&c<u;){const f={};f.ctimeSeconds=r.readUInt32BE(),f.ctimeNanoseconds=r.readUInt32BE(),f.mtimeSeconds=r.readUInt32BE(),f.mtimeNanoseconds=r.readUInt32BE(),f.dev=r.readUInt32BE(),f.ino=r.readUInt32BE(),f.mode=r.readUInt32BE(),f.uid=r.readUInt32BE(),f.gid=r.readUInt32BE(),f.size=r.readUInt32BE(),f.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();f.flags=TQ(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new An(`Got a path length of: ${m}`);if(f.path=r.toString("utf8",m),f.path.includes("..\\")||f.path.includes("../"))throw new Sh(f.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new An(`Expected 1-8 null characters but got '${v}' after ${f.path}`);if(r.eof())throw new An("Unexpected end of file")}f.stages=[],n._addEntry(f),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(H8)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Xf(n);const i=Wt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Wt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Wt.alloc(r),i=new xs(a),o=Xf(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(RQ(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Wt.alloc(12),n=new xs(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(Uc._entryToBuffer(s)),s.stages.length>1)for(const u of s.stages)u&&u!==s&&r.push(Uc._entryToBuffer(u));r=await Promise.all(r);const a=Wt.concat(r),i=Wt.concat([t,a]),o=await Ol(i);return Wt.concat([i,Wt.from(o,"hex")])}}function Hb(e,t,n=!0,r=!0){const a=Xf(e),i=Xf(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let iS=null;const oS=Symbol("IndexCache");function NQ(){return{map:new Map,stats:new Map}}async function IQ(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Uc.from(a);n.map.set(t,i),n.stats.set(t,r)}async function OQ(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Hb(r,a)}class Ca{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[oS]||(r[oS]=NQ());const o=`${n}/index`;iS===null&&(iS=new Dm({maxPending:1/0}));let s,u=[];return await iS.acquire(o,async()=>{const c=r[oS];await OQ(t,o,c)&&await IQ(t,o,c);const f=c.map.get(o);if(u=f.unmergedPaths,u.length&&!a)throw new A0(u);if(s=await i(f),f._dirty){const h=await f.toObject();await t.write(o,h),c.stats.set(o,await t.lstat(o)),f._dirty=!1}}),s}}function Vb(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Jf(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function W8(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Vb(a),metadata:{},children:[]};t.set(a,i),i.parent=n(Jf(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:Vb(a),metadata:i,parent:n(Jf(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function jQ(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new An(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class DQ{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ca.acquire({fs:t,gitdir:n,cache:r},async function(i){return W8(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(ew),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Xf(r.metadata);t._type=r.type==="tree"?"tree":jQ(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const tw=Symbol("GitWalkSymbol");function Eh(){const e=Object.create(null);return Object.defineProperty(e,tw,{value:function({fs:t,gitdir:n,cache:r}){return new DQ({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class wr extends Yn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=wr.code,this.data={what:t}}}wr.code="NotFoundError";class mi extends Yn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=mi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}mi.code="ObjectTypeError";class Vu extends Yn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Vu.code,this.data={value:t}}}Vu.code="InvalidOidError";class T0 extends Yn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=T0.code,this.data={remote:t}}}T0.code="NoRefspecError";class Gb{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Gb(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Wb{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",u=a==="*";if(u!==(o==="*"))throw new An("Invalid refspec");return new Wb({remotePath:r,localPath:i,force:s,matchPrefix:u})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class Sk{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Wb.from(r));return new Sk(n)}add(t){const n=Wb.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function MQ(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const PQ=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Vp=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},vI={core:{filemode:Vp,bare:Vp,logallrefupdates:Vp,symlinks:Vp,ignorecase:Vp,bigFileThreshold:PQ}},FQ=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,LQ=/^[A-Za-z0-9-.]+$/,$Q=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,BQ=/^[A-Za-z][A-Za-z-]*$/,zQ=/^(.*?)( *[#;].*)$/,UQ=e=>{const t=FQ.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},qQ=e=>{const t=$Q.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=HQ(r),i=VQ(a);return[n,i]}return null},HQ=e=>{const t=zQ.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return wI(n)&&wI(r)?`${n}${r}`:n},wI=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,VQ=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),_I=e=>e!=null?e.toLowerCase():null,j2=(e,t,n)=>[_I(e),t,_I(n)].filter(r=>r!=null).join("."),xI=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:j2(n,a,r),sectionPath:j2(n,a,null),isSection:!!n}},GQ=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class Ek{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),u=UQ(s),c=u!=null;if(c)[n,r]=u;else{const h=qQ(s);h!=null&&([i,o]=h)}const f=j2(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:o,path:f}}):[]}static from(t){return new Ek(t)}async get(t,n=!1){const r=xI(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const u=vI[i]&&vI[i][o];return u?u(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:u,isSection:c}=xI(t),f=GQ(this.parsedConfig,h=>h.path===s);if(n==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){const h=this.parsedConfig[f],m=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(f+1,0,m):this.parsedConfig[f]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===u),m={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(LQ.test(a)&&BQ.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:u};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class la{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return Ek.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Dy=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],WQ=["config","description","index","shallow","commondir"];let sS;async function xu(e,t){return sS===void 0&&(sS=new Dm),sS.acquire(e,t)}class Pt{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:u=!1,pruneTags:c=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new Vu(_);const f=await la.get({fs:t,gitdir:n});if(!s){if(s=await f.getall(`remote.${r}.fetch`),s.length===0)throw new T0(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=Sk.from(s),m=new Map;if(c){const _=await Pt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Pt.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await Pt.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);m.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);m.set(x,S)}const v=h.translate([...i.keys()]);for(const[_,x]of v){const S=i.get(_),E=h.translateOne(S);E&&m.set(x,`ref: ${E}`)}const w=[];if(u){for(const _ of h.localNamespaces()){const x=(await Pt.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)m.has(S)||w.push(S)}w.length>0&&await Pt.deleteRefs({fs:t,gitdir:n,refs:w})}for(const[_,x]of m)await xu(_,async()=>t.write(Tt.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:w}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Vu(a);await xu(r,async()=>t.write(Tt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await xu(r,async()=>t.write(Tt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Pt.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(Tt.join(n,s))));let a=await xu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Gb.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await xu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Pt.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Pt.packedRefs({fs:t,gitdir:n}),o=Dy(r).filter(s=>!WQ.includes(s));for(const s of o){const u=await xu(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(u)return Pt.resolve({fs:t,gitdir:n,ref:u.trim(),depth:a})}throw new wr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Pt.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Pt.packedRefs({fs:t,gitdir:n}),i=Dy(r);for(const o of i)if(await xu(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new wr(r)}static async expandAgainstMap({ref:t,map:n}){const r=Dy(t);for(const a of r)if(await n.has(a))return a;throw new wr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Pt.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=Dy(t);for(const o of i){const s=a.get(o);if(s)return Pt.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new wr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await xu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Gb.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Pt.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(MQ),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Pt.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Pt.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Pt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function KQ(e,t){return ew(SI(e),SI(t))}function SI(e){return e.mode==="040000"?e.path+"/":e.path}function K8(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new An(`Unexpected GitTree entry mode: ${e}`)}function ZQ(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new An(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new An(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=K8(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new Sh(s);const u=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:u,type:o})}return t}function YQ(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new An(`Could not understand file mode: ${e}`)}function XQ(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=YQ(e.mode),e.type||(e.type=K8(e.mode)),e}class Ai{constructor(t){if(Wt.isBuffer(t))this._entries=ZQ(t);else if(Array.isArray(t))this._entries=t.map(XQ);else throw new An("invalid type passed to GitTree constructor");this._entries.sort(H8)}static from(t){return new Ai(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(KQ),Wt.concat(t.map(n=>{const r=Wt.from(n.mode.replace(/^0/,"")),a=Wt.from(" "),i=Wt.from(n.path,"utf8"),o=Wt.from([0]),s=Wt.from(n.oid,"hex");return Wt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class kh{static wrap({type:t,object:n}){return Wt.concat([Wt.from(`${t} ${n.byteLength.toString()}\0`),Wt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new An(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Wt.from(t.slice(r+1))}}}async function Z8({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function JQ(e,t){const n=new xs(e),r=EI(n);if(r!==t.byteLength)throw new An(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=EI(n);let i;const o=CI(n,t);if(o.byteLength===a)i=o;else{i=Wt.alloc(a);const s=new xs(i);for(s.copy(o);!n.eof();)s.copy(CI(n,t));const u=s.tell();if(a!==u)throw new An(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${u} bytes`)}return i}function EI(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function kI(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function CI(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=kI(e,n&a,4);let s=kI(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function QQ(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Y8(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:QQ(e)}class X8{constructor(t){if(typeof Wt>"u")throw new Error("Missing Buffer dependency");this.stream=Y8(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Wt.alloc(0):(n&&(n=Wt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>eee(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Wt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function eee(e){return e.reduce((t,n)=>t+n.length,0)}async function tee(e,t){const n=new X8(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new An(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new An(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:u,ofs:c,reference:f}=await nee(n),h=new xk.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new An(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==u)throw new An("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:f,ofs:c})}}}}async function nee(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Wt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function J8(e){return xk.inflate(e)}function ree(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function aee(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Qf{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new xs(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new An(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new An("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let f=0;f<o;f++){const h=r.slice(20).toString("hex");s[f]=h}r.seek(r.tell()+4*o);const u=new Map;for(let f=0;f<o;f++)u.set(s[f],r.readUInt32BE());const c=r.slice(20).toString("hex");return new Qf({hashes:s,crcs:{},offsets:u,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],u={},c=new Map;let f=null,h=null;await tee([t],async({data:_,type:x,reference:S,offset:E,num:C})=>{f===null&&(f=C);const A=Math.floor((f-C)*100/f);A!==h&&r&&await r({phase:"Receiving objects",loaded:f-C,total:f}),h=A,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const m=Object.keys(i).map(Number);for(const[_,x]of m.entries()){const S=_+1===m.length?t.byteLength-20:m[_+1],E=i[x],C=rQ.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const g=new Qf({pack:Promise.resolve(t),packfileSha:o,crcs:u,hashes:s,offsets:c,getExternalRefDelta:n});h=null;let v=0;const w=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(v*100/f);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:f}),v++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});w[g.readDepth]+=1;const A=await Ol(kh.wrap({type:E,object:C}));S.oid=A,s.push(A),c.set(A,_),u[A]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(c,f)=>{t.push(Wt.from(c,f))};n("ff744f63","hex"),n("00000002","hex");const r=new xs(Wt.alloc(256*4));for(let c=0;c<256;c++){let f=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&f++;r.writeUInt32BE(f)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new xs(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new xs(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const o=Wt.concat(t),s=await Ol(o),u=Wt.alloc(20);return u.write(s,"hex"),Wt.concat([o,u])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new An(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new An("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new xs(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new An("Unrecognized type: 0b"+o.toString(2));const u=i&15;let c=u;i&128&&(c=aee(a,u));let h=null,m=null;if(s==="ofs_delta"){const v=ree(a),w=t-v;({object:h,type:s}=await this.readSlice({start:w}))}if(s==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:v}))}const g=r.slice(a.tell());if(m=Wt.from(await J8(g)),m.byteLength!==c)throw new An(`Packfile told us object would have length ${c} but it had length ${m.byteLength}`);return h&&(m=Wt.from(JQ(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:m}),{type:s,format:"content",object:m}}}const My=Symbol("PackfileCache");async function iee({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Qf.fromIdx({idx:i,getExternalRefDelta:n})}function kk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[My]||(t[My]=new Map);let o=t[My].get(n);return o||(o=iee({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[My].set(n,o)),o}async function oee({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(Tt.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await kk({fs:e,cache:t,filename:u,getExternalRefDelta:i});if(c.error)throw new An(c.error);if(c.offsets.has(r)){if(!c.pack){const h=u.replace(/idx$/,"pack");c.pack=e.read(h)}const f=await c.read({oid:r,getExternalRefDelta:i});return f.format="content",f.source=`objects/pack/${s.replace(/idx$/,"pack")}`,f}}return null}async function Fr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=f=>Fr({fs:e,cache:t,gitdir:n,oid:f});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Wt.from("tree 0\0")}),o||(o=await Z8({fs:e,gitdir:n,oid:r})),!o){if(o=await oee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new wr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Wt.from(await J8(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Ol(o.object);if(s!==r)throw new An(`SHA check failed! Expected ${r}, computed ${s}`);const{object:u,type:c}=kh.unwrap(o.object);if(o.type=c,o.object=u,o.format="content",a==="content")return o;throw new An(`invalid requested format "${a}"`)}class Yo extends Yn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Yo.code,this.data={noun:t,where:n,canForce:r}}}Yo.code="AlreadyExistsError";class R0 extends Yn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=R0.code,this.data={nouns:t,short:n,matches:r}}}R0.code="AmbiguousError";class N0 extends Yn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=N0.code,this.data={filepaths:t}}}N0.code="CheckoutConflictError";class I0 extends Yn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=I0.code,this.data={ref:t,oid:n}}}I0.code="CommitNotFetchedError";class O0 extends Yn{constructor(){super("Empty response from git server."),this.code=this.name=O0.code,this.data={}}}O0.code="EmptyServerResponseError";class j0 extends Yn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=j0.code,this.data={}}}j0.code="FastForwardError";class D0 extends Yn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=D0.code,this.data={prettyDetails:t,result:n}}}D0.code="GitPushError";class eh extends Yn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=eh.code,this.data={statusCode:t,statusMessage:n,response:r}}}eh.code="HttpError";class Gu extends Yn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Gu.code,this.data={reason:t}}}Gu.code="InvalidFilepathError";class Vo extends Yn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Vo.code,this.data={ref:t,suggestion:n}}}Vo.code="InvalidRefNameError";class M0 extends Yn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=M0.code,this.data={depth:t}}}M0.code="MaxDepthError";class Ch extends Yn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Ch.code,this.data={}}}Ch.code="MergeNotSupportedError";class Ah extends Yn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Ah.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Ah.code="MergeConflictError";class Ja extends Yn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Ja.code,this.data={role:t}}}Ja.code="MissingNameError";class Ci extends Yn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Ci.code,this.data={parameter:t}}}Ci.code="MissingParameterError";class P0 extends Yn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=P0.code,this.data={errors:t},this.errors=t}}P0.code="MultipleGitError";class vd extends Yn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=vd.code,this.data={expected:t,actual:n}}}vd.code="ParseError";class th extends Yn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=th.code,this.data={reason:t}}}th.code="PushRejectedError";class Tu extends Yn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Tu.code,this.data={capability:t,parameter:n}}}Tu.code="RemoteCapabilityError";class F0 extends Yn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=F0.code,this.data={preview:t,response:n}}}F0.code="SmartHttpError";class L0 extends Yn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=L0.code,this.data={url:t,transport:n,suggestion:r}}}L0.code="UnknownTransportError";class $0 extends Yn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=$0.code,this.data={url:t}}}$0.code="UrlParseError";class Th extends Yn{constructor(){super("The operation was canceled."),this.code=this.name=Th.code,this.data={}}}Th.code="UserCanceledError";class B0 extends Yn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=B0.code,this.data={filepath:t}}}B0.code="IndexResetError";class z0 extends Yn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=z0.code,this.data={ref:t}}}z0.code="NoCommitError";var see=Object.freeze({__proto__:null,AlreadyExistsError:Yo,AmbiguousError:R0,CheckoutConflictError:N0,CommitNotFetchedError:I0,EmptyServerResponseError:O0,FastForwardError:j0,GitPushError:D0,HttpError:eh,InternalError:An,InvalidFilepathError:Gu,InvalidOidError:Vu,InvalidRefNameError:Vo,MaxDepthError:M0,MergeNotSupportedError:Ch,MergeConflictError:Ah,MissingNameError:Ja,MissingParameterError:Ci,MultipleGitError:P0,NoRefspecError:T0,NotFoundError:wr,ObjectTypeError:mi,ParseError:vd,PushRejectedError:th,RemoteCapabilityError:Tu,SmartHttpError:F0,UnknownTransportError:L0,UnsafeFilepathError:Sh,UrlParseError:$0,UserCanceledError:Th,UnmergedPathsError:A0,IndexResetError:B0,NoCommitError:z0});function D2({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=lee(r),`${e} <${t}> ${n} ${r}`}function lee(e){const t=uee(cee(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function uee(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function cee(e){return e===0?e:-e}function yl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Kb(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:dee(a)}}function dee(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),fee(r)}function fee(e){return e===0?e:-e}class ci{constructor(t){if(typeof t=="string")this._tag=t;else if(Wt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=ci.render(t);else throw new An("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new ci(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${D2(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=Kb(r.tagger)),r.committer&&(r.committer=Kb(r.committer)),r}withoutSignature(){const t=yl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return yl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Wt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=yl(i);const o=a+i;return ci.from(o)}}function lS(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function hee(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Mr{constructor(t){if(typeof t=="string")this._commit=t;else if(Wt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Mr.render(t);else throw new An("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Mr.justHeaders(t),a=Mr.justMessage(t),i=yl(r+`
gpgsig`+lS(n)+`
`+a);return new Mr(i)}static from(t){return new Mr(t)}toObject(){return Wt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Mr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return yl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Mr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=Kb(r.author)),r.committer&&(r.committer=Kb(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new An("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${D2(r)}
`;const a=t.committer||t.author;return n+=`committer ${D2(a)}
`,t.gpgsig&&(n+="gpgsig"+lS(t.gpgsig)),n}static render(t){return Mr.renderHeaders(t)+`
`+yl(t.message)}render(){return this._commit}withoutSignature(){const t=yl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return yl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return hee(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Mr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=yl(o);const u=Mr.justHeaders(t._commit)+`
gpgsig`+lS(o)+`
`+i;return Mr.from(u)}}async function nh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ai.from([]),oid:r};const{type:a,object:i}=await Fr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,nh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Mr.from(i).parse().tree,nh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new mi(r,a,"tree");return{tree:Ai.from(i),oid:r}}class pee{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await Pt.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof wr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const u=await nh({fs:t,cache:this.cache,gitdir:n,oid:s});return u.type="tree",u.mode="40000",o.set(".",u),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const u=s.oid;if(!u)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:c,object:f}=await Fr({fs:r,cache:a,gitdir:i,oid:u});if(c!==s.type)throw new mi(u,c,s.type);const h=Ai.from(f);for(const m of h)o.set(Tt.join(n,m.path),m);return h.entries().map(m=>Tt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=V8(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:u,object:c}=await Fr({fs:r,cache:a,gitdir:i,oid:s});u!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function mo({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,tw,{value:function({fs:n,gitdir:r,cache:a}){return new pee({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class mee{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Tt.join(a,n));return i===null?null:i.map(o=>Tt.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Xf(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Ca.acquire({fs:r,gitdir:a,cache:i},async function(s){const u=s.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof Vr<"u"?Vr.platform!=="win32":!0;if(!u||Hb(c,u,h,m)){const g=await t.content();g===void 0?o=void 0:(o=await Ol(kh.wrap({type:"blob",object:g})),u&&o===u.oid&&(!h||c.mode===u.mode)&&Hb(c,u,h,m)&&s.insert({filepath:t._fullpath,stats:c,oid:o}))}else o=u.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await la.get({fs:t,gitdir:n}),this.config)}}function U0(){const e=Object.create(null);return Object.defineProperty(e,tw,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new mee({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function gee(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const Q8=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class yee{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*bee(e){const t=new yee;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function Wu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(u,c)=>c,reduce:o=async(u,c)=>{const f=Q8(c);return u!==void 0&&f.unshift(u),f},iterate:s=(u,c)=>Promise.all([...c].map(u))}){const u=a.map(g=>g[tw]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(u.length).fill("."),f=gee(0,u.length),h=async g=>{f.map(_=>{const x=g[_];g[_]=x&&new u[_].ConstructEntry(x)});const w=(await Promise.all(f.map(_=>{const x=g[_];return x?u[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:bee(w)}},m=async g=>{const{entries:v,children:w}=await h(g),_=v.find(S=>S&&S._fullpath)._fullpath,x=await i(_,v);if(x!==null){let S=await s(m,w);return S=S.filter(E=>E!==void 0),o(x,S)}};return m(c)}async function M2(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Tt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?M2(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function vee(e){return wee(e)&&AI(e.then)&&AI(e.catch)}function wee(e){return e&&typeof e=="object"}function AI(e){return typeof e=="function"}function TI(e){return vee((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const RI=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function NI(e,t){if(TI(t))for(const n of RI)e[`_${n}`]=t[n].bind(t);else for(const n of RI)e[`_${n}`]=Qx(t[n].bind(t));TI(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=M2.bind(null,e):t.rm?e._rm=Qx(t.rm.bind(t)):t.rmdir.length>2?e._rm=Qx(t.rmdir.bind(t)):e._rm=M2.bind(null,e)}class nn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?NI(this,t.promises):NI(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Wt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Jf(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=Jf(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(ew),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Wt.isBuffer(r)?r:Wt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Qe(e,t){if(t===void 0)throw new Ci(e)}async function Zb(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function _ee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n);const i=new nn(e),o=[mo({ref:r}),U0(),Eh()];let s=[];await Ca.acquire({fs:i,gitdir:n,cache:a},async function(c){s=c.unmergedPaths});const u=await Wu({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(c,[f,h,m]){const g=!await Zb(h,m),v=s.includes(c),w=!await Zb(m,f);if(g||v)return f?{path:c,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(w)return!1;throw new B0(c)}});await Ca.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const f of u)if(f!==!1){if(!f){await i.rmdir(`${t}/${f.path}`,{recursive:!0}),c.delete({filepath:f.path});continue}if(f.type==="blob"){const h=new TextDecoder().decode(f.content);await i.write(`${t}/${f.path}`,h,{mode:f.mode}),c.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class Rh{static async isIgnored({fs:t,dir:n,gitdir:r=Tt.join(n,".git"),filepath:a}){if(Vb(a)===".git")return!0;if(a===".")return!1;let i="";const o=Tt.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:Tt.join(n,".gitignore"),filepath:a}],u=a.split("/").filter(Boolean);for(let f=1;f<u.length;f++){const h=u.slice(0,f).join("/"),m=u.slice(f).join("/");s.push({gitignore:Tt.join(n,h,".gitignore"),filepath:m})}let c=!1;for(const f of s){let h;try{h=await t.read(f.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const m=bQ().add(i);m.add(h);const g=Jf(f.filepath);if(g!=="."&&m.ignores(g))return!0;c?c=!m.test(f.filepath).unignored:c=m.test(f.filepath).ignored}return c}}async function xee({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let uS=null;async function eM(e){return uS===null&&(uS=Eee()),uS?See(e):xk.deflate(e)}async function See(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function Eee(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Ni({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=kh.wrap({type:n,object:r})),i=await Ol(r),r=Wt.from(await eM(r))),o||await xee({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function tM(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function kee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r);const s=new nn(e);await Ca.acquire({fs:s,gitdir:n,cache:a},async u=>{const f=await(await la.get({fs:s,gitdir:n})).get("core.autocrlf");return P2({dir:t,gitdir:n,fs:s,filepath:r,index:u,force:i,parallel:o,autocrlf:f})})}catch(s){throw s.caller="git.add",s}}async function P2({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const u=r.map(async m=>{if(!i&&await Rh.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(Tt.join(e,m));if(!g)throw new wr(m);if(g.isDirectory()){const v=await n.readdir(Tt.join(e,m));if(o){const w=v.map(_=>P2({dir:e,gitdir:t,fs:n,filepath:[Tt.join(m,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(w)}else for(const w of v)await P2({dir:e,gitdir:t,fs:n,filepath:[Tt.join(m,w)],index:a,force:i,parallel:o,autocrlf:s})}else{const v=g.isSymbolicLink()?await n.readlink(Tt.join(e,m)).then(tM):await n.read(Tt.join(e,m),{autocrlf:s});if(v===null)throw new wr(m);const w=await Ni({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:m,stats:g,oid:w})}}),c=await Promise.allSettled(u),f=c.filter(m=>m.status==="rejected").map(m=>m.reason);if(f.length>1)throw new P0(f);if(f.length===1)throw f[0];return c.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function Mm({fs:e,gitdir:t,path:n}){return(await la.get({fs:e,gitdir:t})).get(n)}function nM(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Ku({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await Mm({fs:e,gitdir:t,path:"user.name"}),email:await Mm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=nM({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function rh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await Mm({fs:e,gitdir:t,path:"user.name"}),email:await Mm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=nM({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function rM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Fr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,rM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new mi(r,a,"commit");return{commit:Mr.from(i),oid:r}}async function ah({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await rM({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function nw({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g}){let v=!1;h||(h=await Pt.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let w,_;try{w=await Pt.resolve({fs:e,gitdir:r,ref:h}),_=await ah({fs:e,gitdir:r,oid:w,cache:{}})}catch{v=!0}if(u&&v)throw new z0(h);const x=u?await Ku({fs:e,gitdir:r,author:i,commit:_.commit}):await Ku({fs:e,gitdir:r,author:i});if(!x)throw new Ja("author");const S=u?await rh({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await rh({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new Ja("committer");return Ca.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const A=W8(E.entries).get(".");if(g||(g=await aM({fs:e,gitdir:r,inode:A,dryRun:c})),m?m=await Promise.all(m.map(N=>Pt.resolve({fs:e,gitdir:r,ref:N}))):u?m=_.commit.parent:m=w?[w]:[],!a)if(u)a=_.commit.message;else throw new Ci("message");let O=Mr.from({tree:g,parent:m,author:x,committer:S,message:a});s&&(O=await Mr.sign(O,n,s));const j=await Ni({fs:e,gitdir:r,type:"commit",object:O.toObject(),dryRun:c});return!f&&!c&&await Pt.writeRef({fs:e,gitdir:r,ref:h,value:j}),j})}async function aM({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const u of a)u.type==="tree"&&(u.metadata.mode="040000",u.metadata.oid=await aM({fs:e,gitdir:t,inode:u,dryRun:r}));const i=a.map(u=>({mode:u.metadata.mode,path:u.basename,oid:u.metadata.oid,type:u.type})),o=Ai.from(i);return await Ni({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function q0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Gu("leading-slash");if(a.endsWith("/"))throw new Gu("trailing-slash");const i=r,o=await nh({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const u=a.split("/");r=await iM({fs:e,cache:t,gitdir:n,tree:s,pathArray:u,oid:i,filepath:a})}return r}async function iM({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const u of r)if(u.path===s){if(a.length===0)return u.oid;{const{type:c,object:f}=await Fr({fs:e,cache:t,gitdir:n,oid:u.oid});if(c!=="tree")throw new mi(i,c,"tree",o);return r=Ai.from(f),iM({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new wr(`file or directory found at "${i}:${o}"`)}async function Nh({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await q0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await nh({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function H0({fs:e,gitdir:t,tree:n}){const r=Ai.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function Cee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:u,committer:c,signingKey:f}){let h;try{h=await Pt.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof wr))throw x}let g=(await Nh({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new Yo("note",i);typeof o=="string"&&(o=Wt.from(o,"utf8"));const v=await Ni({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const w=await H0({fs:e,gitdir:r,tree:g});return await nw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:w,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:u,committer:c,signingKey:f})}async function Aee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:u,committer:c,signingKey:f,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i),Qe("note",o),f&&Qe("onSign",t);const m=new nn(e),g=await Ku({fs:m,gitdir:r,author:u});if(!g)throw new Ja("author");const v=await rh({fs:m,gitdir:r,author:g,committer:c});if(!v)throw new Ja("committer");return await Cee({fs:new nn(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:v,signingKey:f})}catch(m){throw m.caller="git.addNote",m}}async function oM({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==Es.clean(n))throw new Vo(n,Es.clean(n));const i=await la.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new Yo("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await la.save({fs:e,gitdir:t,config:i})}async function Tee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("remote",r),Qe("url",a),await oM({fs:new nn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function Ree({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!f&&await Pt.exists({fs:e,gitdir:r,ref:a}))throw new Yo("tag",a);const h=await Pt.resolve({fs:e,gitdir:r,ref:u||"HEAD"}),{type:m}=await Fr({fs:e,cache:t,gitdir:r,oid:h});let g=ci.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});c&&(g=await ci.sign(g,n,c));const v=await Ni({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Pt.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function Nee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("ref",a),c&&Qe("onSign",t);const m=new nn(e),g=await Ku({fs:m,gitdir:r,author:i});if(!g)throw new Ja("tagger");return await Ree({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:u,signingKey:c,force:f})}catch(m){throw m.caller="git.annotatedTag",m}}async function Iee({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==Es.clean(n))throw new Vo(n,Es.clean(n));const o=`refs/heads/${n}`;if(!i&&await Pt.exists({fs:e,gitdir:t,ref:o}))throw new Yo("branch",n,!1);let s;try{s=await Pt.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await Pt.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await Pt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Oee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Iee({fs:new nn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const sM=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function Ck({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:u,noCheckout:c,noUpdateHead:f,dryRun:h,force:m,track:g=!0}){let v;if(r)try{v=await Pt.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let w;try{w=await Pt.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(w=await Pt.resolve({fs:e,gitdir:i,ref:x}),g){const S=await la.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await la.save({fs:e,gitdir:i,config:S})}await Pt.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:w})}if(!c){let _;try{_=await jee({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:m,filepaths:u})}catch(A){throw A instanceof wr&&A.data.what===w?new I0(s,w):A}const x=_.filter(([A])=>A==="conflict").map(([A,O])=>O);if(x.length>0)throw new N0(x);const S=_.filter(([A])=>A==="error").map(([A,O])=>O);if(S.length>0)throw new An(S.join(", "));if(h){r&&await r({previousHead:v,newHead:w,type:u!=null&&u.length>0?"file":"branch"});return}let E=0;const C=_.length;await Ca.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([O])=>O==="delete"||O==="delete-index").map(async function([O,j]){const N=`${a}/${j}`;O==="delete"&&await e.rm(N),A.delete({filepath:j}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ca.acquire({fs:e,gitdir:i,cache:t},async function(A){for(const[O,j]of _)if(O==="rmdir"||O==="rmdir-index"){const N=`${a}/${j}`;try{O==="rmdir-index"&&A.delete({filepath:j}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(U){if(U.code==="ENOTEMPTY")console.log(`Did not delete ${j} because directory is not empty`);else throw U}}}),await Promise.all(_.filter(([A])=>A==="mkdir"||A==="mkdir-index").map(async function([A,O]){const j=`${a}/${O}`;await e.mkdir(j),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ca.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([O])=>O==="create"||O==="create-index"||O==="update"||O==="mkdir-index").map(async function([O,j,N,U,V]){const J=`${a}/${j}`;try{if(O!=="create-index"&&O!=="mkdir-index"){const{object:Z}=await Fr({fs:e,cache:t,gitdir:i,oid:N});if(V&&await e.rm(J),U===33188)await e.write(J,Z);else if(U===33261)await e.write(J,Z,{mode:511});else if(U===40960)await e.writelink(J,Z);else throw new An(`Invalid mode 0o${U.toString(8)} detected in blob ${N}`)}const P=await e.lstat(J);U===33261&&(P.mode=493),O==="mkdir-index"&&(P.mode=57344),A.insert({filepath:j,stats:P,oid:N}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(P){console.log(P)}}))}),r&&await r({previousHead:v,newHead:w,type:u!=null&&u.length>0?"file":"branch"})}if(!f){const _=await Pt.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await Pt.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await Pt.writeRef({fs:e,gitdir:i,ref:"HEAD",value:w})}}async function jee({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let u=0;return Wu({fs:e,cache:t,dir:r,gitdir:a,trees:[mo({ref:i}),U0(),Eh()],map:async function(c,[f,h,m]){if(c===".")return;if(s&&!s.some(v=>sM(c,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++u}),[!!m,!!f,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(c)?["delete",c]:void 0;case"010":switch(await f.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await f.oid(),await f.mode()];case"commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`new entry Unhandled type ${await f.type()}`]}case"011":switch(`${await f.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await f.oid()!==await h.oid()?o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]:await f.mode()!==await h.mode()?o?["update",c,await f.oid(),await f.mode(),!0]:["conflict",c]:["create-index",c,await f.oid(),await f.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${f.type}`]}case"100":return["delete-index",c];case"101":switch(await m.type()){case"tree":return["rmdir",c];case"blob":return await m.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await f.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await f.oid()&&await m.mode()===await f.mode()&&!o)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await f.oid())return o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await f.oid(),await f.mode(),await f.mode()!==await m.mode()];return await f.mode()!==await m.mode()?["update",c,await f.oid(),await f.mode(),!0]:await f.oid()!==await m.oid()?["update",c,await f.oid(),await f.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await f.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await f.type()}`]}}},reduce:async function(c,f){return f=Q8(f),c?c&&c[0]==="rmdir"?(f.push(c),f):(f.unshift(c),f):f}})}async function lM({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Tt.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:u=!1,noUpdateHead:c=o===void 0,dryRun:f=!1,force:h=!1,track:m=!0,cache:g={}}){try{Qe("fs",e),Qe("dir",r),Qe("gitdir",a);const v=o||"HEAD";return await Ck({fs:new nn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:s,noCheckout:u,noUpdateHead:c,dryRun:f,force:h,track:m})}catch(v){throw v.caller="git.checkout",v}}const Dee=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function Vc(e){const t=Dee.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function oc({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Pt.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Pt.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:Vc(a)}function Mee(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function uM({username:e="",password:t=""}){return`Basic ${Wt.from(`${e}:${t}`).toString("base64")}`}async function V0(e,t){const n=Y8(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Yb(e){let t=0;const n=[];await V0(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function II(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function F2(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class Xr{static flush(){return Wt.from("0000","utf8")}static delim(){return Wt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Wt.from(t));const n=t.length+4,r=F2(4,n);return Wt.concat([Wt.from(r,"utf8"),t])}static streamReader(t){const n=new X8(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function OI(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function jI(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=Xr.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new O0;if(o.includes("version 2"))return OI(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new vd(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return OI(i);const[u,c]=cS(s,"\0","\\x00");if(c.split(" ").map(f=>n.add(f)),u!=="0000000000000000000000000000000000000000 capabilities^{}"){const[f,h]=cS(u," "," ");for(r.set(h,f);;){const m=await i();if(m===!0)break;if(m!==null){const[g,v]=cS(m.toString("utf8")," "," ");r.set(v,g)}}}for(const f of n)if(f.startsWith("symref=")){const h=f.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function cS(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new vd(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const DI=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,MI=(e,t)=>{(t.username||t.password)&&(e.Authorization=uM(t)),t.headers&&Object.assign(e,t.headers)},dS=async e=>{try{const t=Wt.from(await Yb(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Xb{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:u,headers:c,protocolVersion:f}){let{url:h,auth:m}=II(u);const g=o?DI(o,h):h;(m.username||m.password)&&(c.Authorization=uM(m)),f===2&&(c["Git-Protocol"]="version=2");let v,w,_=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:c}),w=!1,v.statusCode===401||v.statusCode===203){const x=_?i:r;if(x){if(m=await x(h,{...m,headers:{...c}}),m&&m.cancel)throw new Th;m&&(MI(c,m),_=!0,w=!0)}}else v.statusCode===200&&_&&a&&await a(h,m);while(w);if(v.statusCode!==200){const{response:x}=await dS(v);throw new eh(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${s}-advertisement`){const x=await jI(v.body,{service:s});return x.auth=m,x}else{const{preview:x,response:S,data:E}=await dS(v);try{const C=await jI([E],{service:s});return C.auth=m,C}catch{throw new F0(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:u}){const c=II(i);c&&(i=c.url),r&&(i=DI(r,i)),u["content-type"]=`application/x-${a}-request`,u.accept=`application/x-${a}-result`,MI(u,o);const f=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:u});if(f.statusCode!==200){const{response:h}=dS(f);throw new eh(f.statusCode,f.statusMessage,h)}return f}}function Pee({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class rw{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Xb),n.set("https",Xb);const r=Pee({url:t});if(!r)throw new $0(t);if(n.has(r.transport))return n.get(r.transport);throw new L0(t,r.transport,r.transport==="ssh"?Mee(t):void 0)}}let $c=null;class Pm{static async read({fs:t,gitdir:n}){$c===null&&($c=new Dm);const r=Tt.join(n,"shallow"),a=new Set;return await $c.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){$c===null&&($c=new Dm);const a=Tt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await $c.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await $c.acquire(a,async function(){await t.rm(a)})}}async function Fee({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Lee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Tt.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,u=await kk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(u.error)throw new An(u.error);if(u.offsets.has(r))return!0}return!1}async function PI({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>Fr({fs:e,cache:t,gitdir:n,oid:s});let o=await Fee({fs:e,gitdir:n,oid:r});return o||(o=await Lee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function $ee(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function cM(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const aw={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Qy{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Bee(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function dM(e){const t=new Qy;let n="";return(async()=>(await V0(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Bee(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class fM{static demux(t){const n=Xr.streamReader(t),r=new Qy,a=new Qy,i=new Qy,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const u=s.slice(1);i.write(u),r.end(),i.end(),a.destroy(new Error(u.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function zee(e){const{packetlines:t,packfile:n,progress:r}=fM.demux(e),a=[],i=[],o=[];let s=!1,u=!1;return new Promise((c,f)=>{V0(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Vu(g)),a.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Vu(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,v]=m.split(" ");o.push({oid:g,status:v}),v||(u=!0)}else m.startsWith("NAK")?(s=!0,u=!0):(u=!0,s=!0);u&&(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{u||(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Uee({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let u=` ${e.join(" ")}`;for(const c of t)s.push(Xr.encode(`want ${c}${u}
`)),u="";for(const c of r)s.push(Xr.encode(`shallow ${c}
`));a!==null&&s.push(Xr.encode(`deepen ${a}
`)),i!==null&&s.push(Xr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)s.push(Xr.encode(`deepen-not ${c}
`));s.push(Xr.flush());for(const c of n)s.push(Xr.encode(`have ${c}
`));return s.push(Xr.encode(`done
`)),s}async function Ak({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,ref:c,remoteRef:f,remote:h,url:m,corsProxy:g,depth:v=null,since:w=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:O=!1}){const j=c||await oc({fs:e,gitdir:u,test:!0}),N=await la.get({fs:e,gitdir:u}),U=h||j&&await N.get(`branch.${j}.remote`)||"origin",V=m||await N.get(`remote.${U}.url`);if(typeof V>"u")throw new Ci("remote OR url");const J=f||j&&await N.get(`branch.${j}.merge`)||c||"HEAD";g===void 0&&(g=await N.get("http.corsProxy"));const P=rw.getRemoteHelperFor({url:V}),Z=await P.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:V,headers:C,protocolVersion:1}),F=Z.auth,ue=Z.refs;if(ue.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new Tu("shallow","depth");if(w!==null&&!Z.capabilities.has("deepen-since"))throw new Tu("deepen-since","since");if(_.length>0&&!Z.capabilities.has("deepen-not"))throw new Tu("deepen-not","exclude");if(x===!0&&!Z.capabilities.has("deepen-relative"))throw new Tu("deepen-relative","relative");const{oid:le,fullref:ne}=Pt.resolveAgainstMap({ref:J,map:ue});for(const Fe of ue.keys())Fe===ne||Fe==="HEAD"||Fe.startsWith("refs/heads/")||S&&Fe.startsWith("refs/tags/")||ue.delete(Fe);const Q=cM([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${aw.agent}`]);x&&Q.push("deepen-relative");const te=E?[le]:ue.values(),G=E?[j]:await Pt.listRefs({fs:e,gitdir:u,filepath:"refs"});let X=[];for(let Fe of G)try{Fe=await Pt.expand({fs:e,gitdir:u,ref:Fe});const Ne=await Pt.resolve({fs:e,gitdir:u,ref:Fe});await PI({fs:e,cache:t,gitdir:u,oid:Ne})&&X.push(Ne)}catch{}X=[...new Set(X)];const ae=await Pm.read({fs:e,gitdir:u}),be=Z.capabilities.has("shallow")?[...ae]:[],we=Uee({capabilities:Q,wants:te,haves:X,shallows:be,depth:v,since:w,exclude:_}),fe=Wt.from(await Yb(we)),Me=await P.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:V,auth:F,body:[fe],headers:C}),Pe=await zee(Me.body);Me.headers&&(Pe.headers=Me.headers);for(const Fe of Pe.shallows)if(!ae.has(Fe))try{const{object:Ne}=await Fr({fs:e,cache:t,gitdir:u,oid:Fe}),$=new Mr(Ne),Se=await Promise.all($.headers().parent.map(ce=>PI({fs:e,cache:t,gitdir:u,oid:ce})));Se.length===0||Se.every(ce=>ce)||ae.add(Fe)}catch{ae.add(Fe)}for(const Fe of Pe.unshallows)ae.delete(Fe);if(await Pm.write({fs:e,gitdir:u,oids:ae}),E){const Fe=new Map([[ne,le]]),Ne=new Map;let $=10,Se=ne;for(;$--;){const ie=Z.symrefs.get(Se);if(ie===void 0)break;Ne.set(Se,ie),Se=ie}const ke=ue.get(Se);ke&&Fe.set(Se,ke);const{pruned:ce}=await Pt.updateRemoteRefs({fs:e,gitdir:u,remote:U,refs:Fe,symrefs:Ne,tags:S,prune:A});A&&(Pe.pruned=ce)}else{const{pruned:Fe}=await Pt.updateRemoteRefs({fs:e,gitdir:u,remote:U,refs:ue,symrefs:Z.symrefs,tags:S,prune:A,pruneTags:O});A&&(Pe.pruned=Fe)}if(Pe.HEAD=Z.symrefs.get("HEAD"),Pe.HEAD===void 0){const{oid:Fe}=Pt.resolveAgainstMap({ref:"HEAD",map:ue});for(const[Ne,$]of ue.entries())if(Ne!=="HEAD"&&$===Fe){Pe.HEAD=Ne;break}}const Oe=ne.startsWith("refs/tags")?"tag":"branch";if(Pe.FETCH_HEAD={oid:le,description:`${Oe} '${Vc(ne)}' of ${V}`},r||a){const Fe=dM(Pe.progress);V0(Fe,async Ne=>{if(a&&await a(Ne),r){const $=Ne.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);$&&await r({phase:$[1].trim(),loaded:parseInt($[2],10),total:parseInt($[3],10)})}})}const Ae=Wt.from(await Yb(Pe.packfile));if(Me.body.error)throw Me.body.error;const $e=Ae.slice(-20).toString("hex"),qe={defaultBranch:Pe.HEAD,fetchHead:Pe.FETCH_HEAD.oid,fetchHeadDescription:Pe.FETCH_HEAD.description};if(Pe.headers&&(qe.headers=Pe.headers),A&&(qe.pruned=Pe.pruned),$e!==""&&!$ee(Ae)){qe.packfile=`objects/pack/pack-${$e}.pack`;const Fe=Tt.join(u,qe.packfile);await e.write(Fe,Ae);const Ne=Se=>Fr({fs:e,cache:t,gitdir:u,oid:Se}),$=await Qf.fromPack({pack:Ae,getExternalRefDelta:Ne,onProgress:r});await e.write(Fe.replace(/\.pack$/,".idx"),await $.toBuffer())}return qe}async function hM({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Tt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function qee({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:u,dir:c,gitdir:f,url:h,corsProxy:m,ref:g,remote:v,depth:w,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:A,headers:O}){try{if(await hM({fs:e,gitdir:f}),await oM({fs:e,gitdir:f,remote:v,url:h,force:!1}),m){const U=await la.get({fs:e,gitdir:f});await U.set("http.corsProxy",m),await la.save({fs:e,gitdir:f,config:U})}const{defaultBranch:j,fetchHead:N}=await Ak({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:f,ref:g,remote:v,corsProxy:m,depth:w,since:_,exclude:x,relative:S,singleBranch:E,headers:O,tags:!A});if(N===null)return;g=g||j,g=g.replace("refs/heads/",""),await Ck({fs:e,cache:t,onProgress:r,onPostCheckout:u,dir:c,gitdir:f,ref:g,remote:v,noCheckout:C})}catch(j){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),j}}async function Hee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c=Tt.join(u,".git"),url:f,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:v=void 0,since:w=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:A={},cache:O={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",c),E||Qe("dir",u),Qe("url",f),await qee({fs:new nn(e),cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c,url:f,corsProxy:h,ref:m,remote:g,depth:v,since:w,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:A})}catch(j){throw j.caller="git.clone",j}}async function Vee({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g,cache:v={}}){try{Qe("fs",e),u||Qe("message",a),s&&Qe("onSign",t);const w=new nn(e);return await nw({fs:w,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u,dryRun:c,noUpdateBranch:f,ref:h,parent:m,tree:g})}catch(w){throw w.caller="git.commit",w}}async function Gee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Qe("fs",e),Qe("gitdir",n),await oc({fs:new nn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Wee({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Pt.exists({fs:e,gitdir:t,ref:n}))throw new wr(n);const a=await Pt.expand({fs:e,gitdir:t,ref:n}),i=await oc({fs:e,gitdir:t,fullname:!0});if(a===i){const u=await Pt.resolve({fs:e,gitdir:t,ref:a});await Pt.writeRef({fs:e,gitdir:t,ref:"HEAD",value:u})}await Pt.deleteRef({fs:e,gitdir:t,ref:a});const o=Vc(n),s=await la.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await la.save({fs:e,gitdir:t,config:s})}async function Kee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Wee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Zee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{Qe("fs",e),Qe("ref",r),await Pt.deleteRef({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Yee({fs:e,gitdir:t,remote:n}){const r=await la.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await la.save({fs:e,gitdir:t,config:r})}async function Xee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("remote",r),await Yee({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Jee({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Pt.deleteRef({fs:e,gitdir:t,ref:n})}async function Qee({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Jee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function ete({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function tte({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(Tt.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await kk({fs:e,cache:t,filename:u,getExternalRefDelta:a});if(c.error)throw new An(c.error);for(const f of c.offsets.keys())f.startsWith(r)&&i.push(f)}return i}async function nte({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>Fr({fs:e,cache:t,gitdir:n,oid:s}),i=await ete({fs:e,gitdir:n,oid:r}),o=await tte({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new R0("oids",r,i):new wr(`an object matching "${r}"`)}async function rte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await nte({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function ate({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Pt.expand({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function Tk({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,u)=>({index:u,oid:s}));for(;o.length;){const s=new Set;for(const{oid:c,index:f}of o)a[c]||(a[c]=new Set),a[c].add(f),a[c].size===i&&s.add(c);if(s.size>0)return[...s];const u=new Map;for(const{oid:c,index:f}of o)try{const{object:h}=await Fr({fs:e,cache:t,gitdir:n,oid:c}),m=Mr.from(h),{parent:g}=m.parseHeaders();for(const v of g)(!a[v]||!a[v].has(f))&&u.set(v+":"+f,{oid:v,index:f})}catch{}o=Array.from(u.values())}return[]}const fS=/^.*(\r?\n|$)/gm;function ite({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(fS),u=a.match(fS),c=o.match(fS),f=EQ(s,u,c),h=7;let m="",g=!0;for(const v of f)v.ok&&(m+=v.ok.join("")),v.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=v.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=v.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function ote({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:u="ours",baseName:c="base",theirName:f="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const v=mo({ref:i}),w=mo({ref:o}),_=mo({ref:s}),x=[],S=[],E=[],C=[],A=await Wu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,w,_],map:async function(O,[j,N,U]){const V=Vb(O),J=await Zb(j,N),P=await Zb(U,N);switch(`${J}-${P}`){case"false-false":return{mode:await N.mode(),path:V,oid:await N.oid(),type:await N.type()};case"false-true":return U?{mode:await U.mode(),path:V,oid:await U.oid(),type:await U.type()}:void 0;case"true-false":return j?{mode:await j.mode(),path:V,oid:await j.oid(),type:await j.type()}:void 0;case"true-true":{if(j&&N&&U&&await j.type()==="blob"&&await N.type()==="blob"&&await U.type()==="blob")return ste({fs:e,gitdir:r,path:V,ours:j,base:N,theirs:U,ourName:u,baseName:c,theirName:f,mergeDriver:g}).then(async Z=>{if(Z.cleanMerge)m||a.insert({filepath:O,oid:Z.mergeResult.oid,stage:0});else if(x.push(O),S.push(O),!m){const F=await N.oid(),ue=await j.oid(),le=await U.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:F,stage:1}),a.insert({filepath:O,oid:ue,stage:2}),a.insert({filepath:O,oid:le,stage:3})}return Z.mergeResult});if(N&&!j&&U&&await N.type()==="blob"&&await U.type()==="blob"){if(x.push(O),E.push(O),!m){const Z=await N.oid(),F=await U.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:Z,stage:1}),a.insert({filepath:O,oid:F,stage:3})}return{mode:await U.mode(),oid:await U.oid(),type:"blob",path:V}}if(N&&j&&!U&&await N.type()==="blob"&&await j.type()==="blob"){if(x.push(O),C.push(O),!m){const Z=await N.oid(),F=await j.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:Z,stage:1}),a.insert({filepath:O,oid:F,stage:2})}return{mode:await j.mode(),oid:await j.oid(),type:"blob",path:V}}if(N&&!j&&!U&&await N.type()==="blob")return;throw new Ch}}},reduce:x.length!==0&&(!n||m)?void 0:async(O,j)=>{const N=j.filter(Boolean);if(O&&!(O&&O.type==="tree"&&N.length===0)){if(N.length>0){const V=new Ai(N).toObject(),J=await Ni({fs:e,gitdir:r,type:"tree",object:V,dryRun:h});O.oid=J}return O}}});return x.length!==0?(n&&!m&&await Wu({fs:e,cache:t,dir:n,gitdir:r,trees:[mo({ref:A.oid})],map:async function(O,[j]){const N=`${n}/${O}`;if(await j.type()==="blob"){const U=await j.mode(),V=new TextDecoder().decode(await j.content());await e.write(N,V,{mode:U})}return!0}}),new Ah(x,S,E,C)):A.oid}async function ste({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:u,dryRun:c,mergeDriver:f=ite}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Wt.from(await r.content()).toString("utf8"),v=Wt.from(await a.content()).toString("utf8"),w=Wt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await f({branches:[u,o,s],contents:[v,g,w],path:n}),S=await Ni({fs:e,gitdir:t,type:"blob",object:Wt.from(_,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:m,path:n,oid:S,type:h}}}async function pM({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:v,onSign:w,mergeDriver:_}){a===void 0&&(a=await oc({fs:e,gitdir:r,fullname:!0})),a=await Pt.expand({fs:e,gitdir:r,ref:a}),i=await Pt.expand({fs:e,gitdir:r,ref:i});const x=await Pt.resolve({fs:e,gitdir:r,ref:a}),S=await Pt.resolve({fs:e,gitdir:r,ref:i}),E=await Tk({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new Ch;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(o&&C===x)return!u&&!c&&await Pt.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new j0;const A=await Ca.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async j=>ote({fs:e,cache:t,dir:n,gitdir:r,index:j,ourOid:x,theirOid:S,baseOid:C,ourName:Vc(a),baseName:"base",theirName:Vc(i),dryRun:u,abortOnConflict:f,mergeDriver:_}));if(A instanceof Ah)throw A;return h||(h=`Merge branch '${Vc(i)}' into ${Vc(a)}`),{oid:await nw({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:A,parent:[x,S],author:m,committer:g,signingKey:v,onSign:w,dryRun:u,noUpdateBranch:c}),tree:A,mergeCommit:!0}}}async function mM({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:u,gitdir:c,ref:f,url:h,remote:m,remoteRef:g,prune:v,pruneTags:w,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:A,committer:O,signingKey:j}){try{if(!f){const V=await oc({fs:e,gitdir:c});if(!V)throw new Ci("ref");f=V}const{fetchHead:N,fetchHeadDescription:U}=await Ak({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:S,ref:f,url:h,remote:m,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:w});await pM({fs:e,cache:t,gitdir:c,ours:f,theirs:N,fastForward:_,fastForwardOnly:x,message:`Merge ${U}`,author:A,committer:O,signingKey:j,dryRun:!1,noUpdateBranch:!1}),await Ck({fs:e,cache:t,onProgress:r,dir:u,gitdir:c,ref:f,remote:m,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function lte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,corsProxy:g,singleBranch:v,headers:w={},cache:_={}}){try{Qe("fs",e),Qe("http",t),Qe("gitdir",u);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await mM({fs:new nn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:w,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function ute({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:v=null,since:w=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:O=!1,cache:j={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",u),await Ak({fs:new nn(e),cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:u,ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:v,since:w,exclude:_,relative:x,tags:S,singleBranch:E,headers:C,prune:A,pruneTags:O})}catch(N){throw N.caller="git.fetch",N}}async function cte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oids:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await Tk({fs:new nn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function gM({fs:e,filepath:t}){if(await e.exists(Tt.join(t,".git")))return t;{const n=Jf(t);if(n===t)throw new wr(`git root for ${t}`);return gM({fs:e,filepath:n})}}async function dte({fs:e,filepath:t}){try{return Qe("fs",e),Qe("filepath",t),await gM({fs:new nn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function fte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await Mm({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function hte({fs:e,gitdir:t,path:n}){return(await la.get({fs:e,gitdir:t})).getall(n)}async function pte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await hte({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function mte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Qe("http",e),Qe("url",i);const c=await rw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),f={capabilities:[...c.capabilities]};for(const[h,m]of c.refs){const g=h.split("/"),v=g.pop();let w=f;for(const _ of g)w[_]=w[_]||{},w=w[_];w[v]=m}for(const[h,m]of c.symrefs){const g=h.split("/"),v=g.pop();let w=f;for(const _ of g)w[_]=w[_]||{},w=w[_];w[v]=m}return f}catch(u){throw u.caller="git.getRemoteInfo",u}}function yM(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const u=i.replace("^{}",""),c=a[a.length-1],f=c.ref===u?c:a.find(h=>h.ref===u);if(f===void 0)throw new Error("I did not expect this to happen");f.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function gte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2}){try{Qe("http",e),Qe("url",i);const f=await rw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(f.protocolVersion===2)return{protocolVersion:f.protocolVersion,capabilities:f.capabilities2};const h={};for(const m of f.capabilities){const[g,v]=m.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:yM(f,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function yte({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=kh.wrap({type:e,object:t})),r=await Ol(t)),{oid:r,object:t}}async function bte({object:e}){try{Qe("object",e),typeof e=="string"?e=Wt.from(e,"utf8"):e=Wt.from(e);const t="blob",{oid:n,object:r}=await yte({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function vte({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Tt.join(r,i);const o=await e.read(i),s=c=>Fr({fs:e,cache:t,gitdir:a,oid:c}),u=await Qf.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await u.toBuffer()),{oids:[...u.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function wte({fs:e,onProgress:t,dir:n,gitdir:r=Tt.join(n,".git"),filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("dir",n),Qe("gitdir",n),Qe("filepath",a),await vte({fs:new nn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function _te({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Tt.join(n,".git"),defaultBranch:a="master"}){try{return Qe("fs",e),Qe("gitdir",r),t||Qe("dir",n),await hM({fs:new nn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function bM({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await Pm.read({fs:e,gitdir:n});if(!r)throw new Ci("oid");if(!a)throw new Ci("ancestor");if(r===a)return!1;const s=[r],u=new Set;let c=0;for(;s.length;){if(c++===i)throw new M0(i);const f=s.shift(),{type:h,object:m}=await Fr({fs:e,cache:t,gitdir:n,oid:f});if(h!=="commit")throw new mi(f,h,"commit");const g=Mr.from(m).parse();for(const v of g.parent)if(v===a)return!0;if(!o.has(f))for(const v of g.parent)u.has(v)||(s.push(v),u.add(v))}return!1}async function xte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),Qe("ancestor",a),await bM({fs:new nn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function Ste({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r),Rh.isIgnored({fs:new nn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function Ete({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listBranches({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function kte({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Pt.resolve({gitdir:t,fs:e,ref:n}),i=[];return await vM({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ca.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function vM({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await Nh({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await vM({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:Tt.join(i,s.path)}):a.push(Tt.join(i,s.path))}async function Cte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),await kte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function Ate({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Pt.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof wr)return[]}return(await Nh({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function Tte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Ate({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Rte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listRefs({fs:new nn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function Nte({fs:e,gitdir:t}){const n=await la.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function Ite({fs:e,dir:t,gitdir:n=Tt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),await Nte({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Ote(e){const t=Xr.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const u of o){const[c,f]=u.split(":");c==="symref-target"?s.target=f:c==="peeled"&&(s.peeled=f)}n.push(s)}return n}async function jte({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(Xr.encode(`command=ls-refs
`)),r.push(Xr.encode(`agent=${aw.agent}
`)),(n||t||e)&&r.push(Xr.delim()),n&&r.push(Xr.encode("peel")),t&&r.push(Xr.encode("symrefs")),e&&r.push(Xr.encode(`ref-prefix ${e}`)),r.push(Xr.flush()),r}async function Dte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2,prefix:c,symrefs:f,peelTags:h}){try{Qe("http",e),Qe("url",i);const m=await Xb.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(m.protocolVersion===1)return yM(m,c,f,h);const g=await jte({prefix:c,symrefs:f,peelTags:h}),v=await Xb.connect({http:e,auth:m.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return Ote(v.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function Mte({fs:e,dir:t,gitdir:n=Tt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),Pt.listTags({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Pte(e,t){return e.committer.timestamp-t.committer.timestamp}const Fte="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function FI({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Fte)return;const i=r;let o;const s=await nh({fs:e,cache:t,gitdir:n,oid:r}),u=s.tree;return a===s.oid?o=s.path:(o=await wM({fs:e,cache:t,gitdir:n,tree:u,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function wM({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const u=r.entries().map(function(c){let f;return c.oid===a?(f=Tt.join(s,c.path),o.push(f)):c.type==="tree"&&(f=Fr({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return wM({fs:e,cache:t,gitdir:n,tree:Ai.from(h),fileId:a,oid:i,filepaths:o,parentPath:Tt.join(s,c.path)})})),f});return await Promise.all(u),o}async function Lte({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),f=[],h=await Pm.read({fs:e,gitdir:n}),m=await Pt.resolve({fs:e,gitdir:n,ref:a}),g=[await ah({fs:e,cache:t,gitdir:n,oid:m})];let v,w,_;function x(S){_&&r&&f.push(S)}for(;g.length>0;){const S=g.pop();if(c!==void 0&&S.commit.committer.timestamp<=c)break;if(r){let E;try{E=await q0({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),w&&v!==E&&f.push(w),v=E,w=S,_=!0}catch(C){if(C instanceof wr){let A=u&&v;if(A&&(A=await FI({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),A))if(Array.isArray(A)){if(w){const O=await FI({fs:e,cache:t,gitdir:n,oid:w.commit.tree,fileId:v});if(Array.isArray(O))if(A=A.filter(j=>O.indexOf(j)===-1),A.length===1)A=A[0],r=A,w&&f.push(w);else{A=!1,w&&f.push(w);break}}}else r=A,w&&f.push(w);if(!A){if(_&&v&&(f.push(w),!s))break;if(!s&&!u)throw C}w=S,_=!1}else throw C}}else f.push(S);if(i!==void 0&&f.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await ah({fs:e,cache:t,gitdir:n,oid:E});g.map(A=>A.oid).includes(C.oid)||g.push(C)}g.length===0&&x(S),g.sort((E,C)=>Pte(E.commit,C.commit))}return f}async function $te({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:u,cache:c={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",a),await Lte({fs:new nn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u})}catch(f){throw f.caller="git.log",f}}async function Bte({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:v,cache:w={},mergeDriver:_}){try{Qe("fs",e),v&&Qe("onSign",t);const x=new nn(e),S=await Ku({fs:x,gitdir:r,author:m});if(!S&&(!s||!o))throw new Ja("author");const E=await rh({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new Ja("committer");return await pM({fs:x,cache:w,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:u,noUpdateBranch:c,abortOnConflict:f,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const zte={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function _M({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),oids:a}){const i=new L8,o=[];function s(f,h){const m=Wt.from(f,h);o.push(m),i.update(m)}async function u({stype:f,object:h}){const m=zte[f];let g=h.length,v=g>15?128:0;const w=g&15;g=g>>>4;let _=(v|m|w).toString(16);for(s(_,"hex");v;)v=g>127?128:0,_=v|g&127,s(F2(2,_),"hex"),g=g>>>7;s(Wt.from(await eM(h)))}s("PACK"),s("00000002","hex"),s(F2(8,a.length),"hex");for(const f of a){const{type:h,object:m}=await Fr({fs:e,cache:t,gitdir:r,oid:f});await u({object:m,stype:h})}const c=i.digest();return o.push(c),o}async function Ute({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await _M({fs:e,cache:t,gitdir:n,oids:r}),o=Wt.from(await Yb(i)),u=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(Tt.join(n,`objects/pack/${u}`),o),{filename:u}):{filename:u,packfile:new Uint8Array(o)}}async function qte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await Ute({fs:new nn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function Hte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=Tt.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,prune:g=!1,pruneTags:v=!1,fastForward:w=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:A,signingKey:O,cache:j={}}){try{Qe("fs",e),Qe("gitdir",u);const N=new nn(e),U=await Ku({fs:N,gitdir:u,author:C});if(!U)throw new Ja("author");const V=await rh({fs:N,gitdir:u,author:U,committer:A});if(!V)throw new Ja("committer");return await mM({fs:N,cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForward:w,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:U,committer:V,signingKey:O,prune:g,pruneTags:v})}catch(N){throw N.caller="git.pull",N}}async function Vte({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),start:a,finish:i}){const o=await Pm.read({fs:e,gitdir:r}),s=new Set,u=new Set;for(const h of a)s.add(await Pt.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Pt.resolve({fs:e,gitdir:r,ref:h});u.add(m)}catch{}const c=new Set;async function f(h){c.add(h);const{type:m,object:g}=await Fr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const w=ci.from(g).headers().object;return f(w)}if(m!=="commit")throw new mi(h,m,"commit");if(!o.has(h)){const w=Mr.from(g).headers().parent;for(h of w)!u.has(h)&&!c.has(h)&&await f(h)}}for(const h of s)await f(h);return c}async function hS({fs:e,cache:t,dir:n,gitdir:r=Tt.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:u,object:c}=await Fr({fs:e,cache:t,gitdir:r,oid:s});if(u==="tag"){const h=ci.from(c).headers().object;await o(h)}else if(u==="commit"){const h=Mr.from(c).headers().tree;await o(h)}else if(u==="tree"){const f=Ai.from(c);for(const h of f)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function Gte(e){const t={};let n="";const r=Xr.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new vd('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),u=o.slice(3);let c=u.indexOf(" ");c===-1&&(c=u.length);const f=u.slice(0,c),h=u.slice(c+1);t.refs[f]={ok:s==="ok",error:h}}return t}async function Wte({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(Xr.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(Xr.flush()),n}async function Kte({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:u,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:v=!1,delete:w=!1,corsProxy:_,headers:x={}}){const S=f||await oc({fs:e,gitdir:c});if(typeof S>"u")throw new Ci("ref");const E=await la.get({fs:e,gitdir:c});m=m||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof C>"u")throw new Ci("remote OR url");const A=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Ci("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const O=await Pt.expand({fs:e,gitdir:c,ref:S}),j=w?"0000000000000000000000000000000000000000":await Pt.resolve({fs:e,gitdir:c,ref:O}),N=rw.getRemoteHelperFor({url:C}),U=await N.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),V=U.auth;let J;if(!A)J=O;else try{J=await Pt.expandAgainstMap({ref:A,map:U.refs})}catch(ae){if(ae instanceof wr)J=A.startsWith("refs/")?A:`refs/heads/${A}`;else throw ae}const P=U.refs.get(J)||"0000000000000000000000000000000000000000";if(u&&!await u({remote:m,url:C,localRef:{ref:w?"(delete)":O,oid:j},remoteRef:{ref:J,oid:P}}))throw new Th;const Z=!U.capabilities.has("no-thin");let F=new Set;if(!w){const ae=[...U.refs.values()];let be=new Set;if(P!=="0000000000000000000000000000000000000000"){const we=await Tk({fs:e,cache:t,gitdir:c,oids:[j,P]});for(const fe of we)ae.push(fe);Z&&(be=await hS({fs:e,cache:t,gitdir:c,oids:we}))}if(!ae.includes(j)){const we=await Vte({fs:e,cache:t,gitdir:c,start:[j],finish:ae});F=await hS({fs:e,cache:t,gitdir:c,oids:we})}if(Z){try{const we=await Pt.resolve({fs:e,gitdir:c,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:fe}=await Pt.resolveAgainstMap({ref:we.replace(`refs/remotes/${m}/`,""),fullref:we,map:U.refs}),Me=[fe];for(const Pe of await hS({fs:e,cache:t,gitdir:c,oids:Me}))be.add(Pe)}catch{}for(const we of be)F.delete(we)}if(j===P&&(v=!0),!v){if(O.startsWith("refs/tags")&&P!=="0000000000000000000000000000000000000000")throw new th("tag-exists");if(j!=="0000000000000000000000000000000000000000"&&P!=="0000000000000000000000000000000000000000"&&!await bM({fs:e,cache:t,gitdir:c,oid:j,ancestor:P,depth:-1}))throw new th("not-fast-forward")}}const ue=cM([...U.capabilities],["report-status","side-band-64k",`agent=${aw.agent}`]),le=await Wte({capabilities:ue,triplets:[{oldoid:P,oid:j,fullRef:J}]}),ne=w?[]:await _M({fs:e,cache:t,gitdir:c,oids:[...F]}),Q=await N.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:V,headers:x,body:[...le,...ne]}),{packfile:te,progress:G}=await fM.demux(Q.body);if(a){const ae=dM(G);V0(ae,async be=>{await a(be)})}const X=await Gte(te);if(Q.headers&&(X.headers=Q.headers),m&&X.ok&&X.refs[J].ok&&!O.startsWith("refs/tags")){const ae=`refs/remotes/${m}/${J.replace("refs/heads","")}`;w?await Pt.deleteRef({fs:e,gitdir:c,ref:ae}):await Pt.writeRef({fs:e,gitdir:c,ref:ae,value:j})}if(X.ok&&Object.values(X.refs).every(ae=>ae.ok))return X;{const ae=Object.entries(X.refs).filter(([be,we])=>!we.ok).map(([be,we])=>`
  - ${be}: ${we.error}`).join("");throw new D0(ae,X)}}async function Zte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:u,gitdir:c=Tt.join(u,".git"),ref:f,remoteRef:h,remote:m="origin",url:g,force:v=!1,delete:w=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",c),await Kte({fs:new nn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:v,delete:w,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function xM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Fr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ci.from(i).parse().object,xM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new mi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function SM({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await q0({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await xM({fs:e,cache:t,gitdir:n,oid:r})}async function Yte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await SM({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function EM({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await ah({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Xte({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Pt.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await SM({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function Jte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oid",a),await Xte({fs:new nn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function Qte({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("oid",r);const u=new nn(e);i!==void 0&&(r=await q0({fs:u,cache:s,gitdir:n,oid:r,filepath:i}));const f=await Fr({fs:u,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(f.oid=r,a==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=Mr.from(f.object).parse();break;case"tree":f.object=Ai.from(f.object).entries();break;case"blob":o?f.object=f.object.toString(o):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=ci.from(f.object).parse();break;default:throw new mi(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(u){throw u.caller="git.readObject",u}}async function ene({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Fr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new mi(r,a,"tag");const o=ci.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function tne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await ene({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function nne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Nh({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function rne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r),await Ca.acquire({fs:new nn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function ane({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u}){let c;try{c=await Pt.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof wr))throw v}let h=(await Nh({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const m=await H0({fs:e,gitdir:r,tree:h});return await nw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:u})}async function ine({fs:e,onSign:t,dir:n,gitdir:r=Tt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u,cache:c={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i);const f=new nn(e),h=await Ku({fs:f,gitdir:r,author:o});if(!h)throw new Ja("author");const m=await rh({fs:f,gitdir:r,author:h,committer:s});if(!m)throw new Ja("committer");return await ane({fs:f,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:u})}catch(f){throw f.caller="git.removeNote",f}}async function one({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==Es.clean(r))throw new Vo(r,Es.clean(r));if(n!==Es.clean(n))throw new Vo(n,Es.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await Pt.exists({fs:e,gitdir:t,ref:o}))throw new Yo("branch",r,!1);const u=await Pt.resolve({fs:e,gitdir:t,ref:i,depth:1});await Pt.writeRef({fs:e,gitdir:t,ref:o,value:u}),await Pt.deleteRef({fs:e,gitdir:t,ref:i});const f=await oc({fs:e,gitdir:t,fullname:!0})===i;(a||f)&&await Pt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function sne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oldref",a),await one({fs:new nn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function kM({gitdir:e,type:t,object:n}){return Ol(kh.wrap({type:t,object:n}))}async function lne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const o=new nn(e);let s,u;try{s=await Pt.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await q0({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const f=t&&await o.read(Tt.join(t,r));f&&(u=await kM({gitdir:n,type:"blob",object:f}),s===u&&(c=await o.lstat(Tt.join(t,r)))),await Ca.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:c,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function une({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,depth:a}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Pt.resolve({fs:new nn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function cne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),path:r,value:a,append:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("path",r);const o=new nn(e),s=await la.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await la.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function CM({fs:e,gitdir:t,commit:n}){const r=Mr.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Jb{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=Jb.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const dne={stage:Eh,workdir:U0};let pS;async function ih(e,t){return pS===void 0&&(pS=new Dm),pS.acquire(e,t)}async function fne(e,t,n,r,a=null){const i=Tt.join(n,r),o=await e.lstat(i);if(!o)throw new wr(i);if(o.isDirectory())throw new An(`${i}: file expected, but found directory`);const s=a?await Z8({fs:e,gitdir:t,oid:a}):void 0;let u=s?a:void 0;return s||await ih({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await e.readlink(i).then(tM):await e.read(i);if(c===null)throw new wr(i);u=await Ni({fs:e,gitdir:t,type:"blob",object:c})}),u}async function hne({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await H0({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await fne(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function LI({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?dne[g]():g),o=[],f=await Wu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,w])=>{if(!(g==="."||await Rh.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&w)return(!v||await v.oid()!==await w.oid()&&await w.oid()!==void 0)&&o.push([v,w]),{mode:await w.mode(),path:g,oid:await w.oid(),type:await w.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const w=[];for(const _ of v){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?w.push(_):o.push([null,S])):x&&(S?w.push(_):o.push([x,null]))}return w.length?Promise.all(w.map(g)):[]}});if(o.length===0||f.length===0)return null;const m=(await hne({fs:e,dir:t,gitdir:n,entries:f})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return H0({fs:e,gitdir:n,tree:m})}async function pne({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],u=await Wu({fs:e,cache:{},dir:t,gitdir:n,trees:[mo({ref:a}),mo({ref:r})],map:async(c,[f,h])=>{if(c==="."||await Rh.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const m=h?await h.type():await f.type();if(m!=="tree"&&m!=="blob")return;if(!h&&f){const v=m==="tree"?"rmdir":"rm";return m==="tree"&&o.push(c),m==="blob"&&i&&s.push({filepath:c,oid:await f.oid()}),{method:v,filepath:c}}const g=await h.oid();if(!f||await f.oid()!==g)return m==="tree"?{method:"mkdir",filepath:c}:(i&&s.push({filepath:c,oid:g,stats:await e.lstat(Tt.join(t,c))}),{method:"write",filepath:c,oid:g})}});await ih({fs:e,gitdir:n,dirRemoved:o,ops:u},async()=>{for(const c of u){const f=Tt.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(f);break;case"mkdir":await e.mkdir(f);break;case"rm":await e.rm(f);break;case"write":if(!o.some(h=>f.startsWith(h))){const{object:h}=await Fr({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(f)&&await e.rm(f),await e.write(f,h)}break}}}),await Ca.acquire({fs:e,gitdir:n,cache:{}},async c=>{s.forEach(({filepath:f,stats:h,oid:m})=>{c.insert({filepath:f,stats:h,oid:m})})})}class kl{constructor({fs:t,dir:n,gitdir:r=Tt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Tt.join(this.gitdir,kl.refStash)}get refLogsStashPath(){return Tt.join(this.gitdir,kl.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Ku({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Ja("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return CM({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Vo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?ah({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Pt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:kl.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Jb.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await ih({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Jb.getStashReflogEntry(r,t)}}async function mne({fs:e,dir:t,gitdir:n,message:r=""}){const a=new kl({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await oc({fs:e,gitdir:n,fullname:!1}),o=await Pt.resolve({fs:e,gitdir:n,ref:"HEAD"}),u=(await EM({fs:e,dir:t,gitdir:n,oid:o})).commit.message,c=[o];let f=null,h=mo({ref:"HEAD"});const m=await LI({fs:e,dir:t,gitdir:n,treePair:[mo({ref:"HEAD"}),"stage"]});if(m){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:c});c.push(_),f=m,h=Eh()}const g=await LI({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(_),f=g}if(!f||!m&&!g)throw new wr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${u}`,w=await a.writeStashCommit({message:v,tree:f,parent:c});return await a.writeStashRef(w),await a.writeStashReflogEntry({stashCommit:w,message:v}),await lM({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),w}async function AM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new kl({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const c=(await ah({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await pne({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:c})}}async function TM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new kl({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await ih(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const u=a.refLogsStashPath;await ih({reflogEntries:s,stashReflogPath:u,stashMgr:a},async()=>{if(s.length){await e.write(u,s.join(`
`),"utf8");const c=s[s.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(u)})}async function gne({fs:e,dir:t,gitdir:n}){return new kl({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function yne({fs:e,dir:t,gitdir:n}){const r=new kl({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await ih(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function bne({fs:e,dir:t,gitdir:n,refIdx:r=0}){await AM({fs:e,dir:t,gitdir:n,refIdx:r}),await TM({fs:e,dir:t,gitdir:n,refIdx:r})}async function vne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("op",r);const o={push:mne,apply:AM,drop:TM,list:gne,clear:yne,pop:bne},s=["apply","drop","pop"];try{const u=new nn(e);["refs","logs","logs/refs"].map(h=>Tt.join(n,h)).forEach(async h=>{await u.exists(h)||await u.mkdir(h)});const f=o[r];if(f){if(s.includes(r)&&i<0)throw new Vo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await f({fs:u,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(u){throw u.caller="git.stash",u}}async function wne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const i=new nn(e);if(await Rh.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await _ne({fs:i,cache:a,gitdir:n}),u=await RM({fs:i,cache:a,gitdir:n,tree:s,path:r}),c=await Ca.acquire({fs:i,gitdir:n,cache:a},async function(w){for(const _ of w)if(_.path===r)return _;return null}),f=await i.lstat(Tt.join(t,r)),h=u!==null,m=c!==null,g=f!==null,v=async()=>{if(m&&!Hb(c,f))return c.oid;{const w=await i.read(Tt.join(t,r)),_=await kM({gitdir:n,type:"blob",object:w});return m&&c.oid===_&&f.size!==-1&&Ca.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:f,oid:_})}),_}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await v()===c.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return u===c.oid,"*deleted";if(h&&g&&!m)return await v()===u?"*undeleted":"*undeletemodified";if(h&&g&&m){const w=await v();return w===u?w===c.oid?"unmodified":"*unmodified":w===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function RM({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:u}=await Fr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const c=Ai.from(u);return RM({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(s==="blob")throw new mi(o.oid,s,"blob",a.join("/"))}return null}async function _ne({fs:e,cache:t,gitdir:n}){let r;try{r=await Pt.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof wr)return[]}const{tree:a}=await Nh({fs:e,cache:t,gitdir:n,oid:r});return a}async function xne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const u=new nn(e);return await Wu({fs:u,cache:o,dir:t,gitdir:n,trees:[mo({ref:r}),U0(),Eh()],map:async function(c,[f,h,m]){if(!f&&!m&&h&&!s&&await Rh.isIgnored({fs:u,dir:t,filepath:c})||!a.some(O=>sM(c,O)))return null;if(i&&!i(c))return;const[g,v,w]=await Promise.all([f&&f.type(),h&&h.type(),m&&m.type()]),_=[g,v,w].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!_)return;if(w==="commit")return null;if((w==="tree"||w==="special")&&!_)return;const x=g==="blob"?await f.oid():void 0,S=w==="blob"?await m.oid():void 0;let E;g!=="blob"&&v==="blob"&&w!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],A=C.map(O=>C.indexOf(O));return A.shift(),[c,...A]}})}catch(u){throw u.caller="git.statusMatrix",u}}async function Sne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,object:a,force:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const o=new nn(e);if(r===void 0)throw new Ci("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await Pt.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await Pt.exists({fs:o,gitdir:n,ref:r}))throw new Yo("tag",r);await Pt.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function Ene({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:u,force:c}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",a);const f=new nn(e);if(u)return await Ca.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!c){const g=await f.lstat(Tt.join(t,a));if(g){if(g.isDirectory())throw new Gu("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await f.lstat(Tt.join(t,a)),!h)throw new wr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Gu("directory")}return await Ca.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!s&&!m.has({filepath:a}))throw new wr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await f.readlink(Tt.join(t,a)):await f.read(Tt.join(t,a));i=await Ni({fs:f,gitdir:n,type:"blob",format:"content",object:v})}return m.insert({filepath:a,oid:i,stats:g}),i})}catch(f){throw f.caller="git.updateIndex",f}}function kne(){try{return aw.version}catch(e){throw e.caller="git.version",e}}async function Cne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("trees",r),await Wu({fs:new nn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(u){throw u.caller="git.walk",u}}async function Ane({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),blob:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("blob",r),await Ni({fs:new nn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function Tne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),commit:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("commit",r),await CM({fs:new nn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Rne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const u=new nn(e);if(i==="parsed"){switch(r){case"commit":a=Mr.from(a).toObject();break;case"tree":a=Ai.from(a).toObject();break;case"blob":a=Wt.from(a,s);break;case"tag":a=ci.from(a).toObject();break;default:throw new mi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Ni({fs:u,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(u){throw u.caller="git.writeObject",u}}async function Nne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("value",a);const s=new nn(e);if(r!==Es.clean(r))throw new Vo(r,Es.clean(r));if(!i&&await Pt.exists({fs:s,gitdir:n,ref:r}))throw new Yo("ref",r);o?await Pt.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await Pt.resolve({fs:s,gitdir:n,ref:a}),await Pt.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function Ine({fs:e,gitdir:t,tag:n}){const r=ci.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function One({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),tag:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tag",r),await Ine({fs:new nn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function jne({fs:e,dir:t,gitdir:n=Tt.join(t,".git"),tree:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tree",r),await H0({fs:new nn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var ha={Errors:see,STAGE:Eh,TREE:mo,WORKDIR:U0,add:kee,abortMerge:_ee,addNote:Aee,addRemote:Tee,annotatedTag:Nee,branch:Oee,checkout:lM,clone:Hee,commit:Vee,getConfig:fte,getConfigAll:pte,setConfig:cne,currentBranch:Gee,deleteBranch:Kee,deleteRef:Zee,deleteRemote:Xee,deleteTag:Qee,expandOid:rte,expandRef:ate,fastForward:lte,fetch:ute,findMergeBase:cte,findRoot:dte,getRemoteInfo:mte,getRemoteInfo2:gte,hashBlob:bte,indexPack:wte,init:_te,isDescendent:xte,isIgnored:Ste,listBranches:Ete,listFiles:Cte,listNotes:Tte,listRefs:Rte,listRemotes:Ite,listServerRefs:Dte,listTags:Mte,log:$te,merge:Bte,packObjects:qte,pull:Hte,push:Zte,readBlob:Yte,readCommit:EM,readNote:Jte,readObject:Qte,readTag:tne,readTree:nne,remove:rne,removeNote:ine,renameBranch:sne,resetIndex:lne,updateIndex:Ene,resolveRef:une,status:wne,statusMatrix:xne,tag:Sne,version:kne,walk:Cne,writeBlob:Ane,writeCommit:Tne,writeObject:Rne,writeRef:Nne,writeTag:One,writeTree:jne,stash:vne};function Dne(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Mne(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Dne(e)}async function Pne(e,t){const n=Mne(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Fne(e){let t=0;const n=[];await Pne(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Lne(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function $ne({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Fne(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?Lne(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,u]of i.headers.entries())r[s]=u;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var Fm={request:$ne};const Lm="https://cors.isomorphic-git.org",oh=new Map,NM=async e=>{const{gitUserName:t,gitUserEmail:n}=zr.getState();if(!t||!n)return ct.error("Git user name and email must be configured in Settings before committing."),!1;try{const r=await ha.getConfig({fs:Jr,dir:e,path:"user.name"}).catch(()=>null),a=await ha.getConfig({fs:Jr,dir:e,path:"user.email"}).catch(()=>null);return r!==t&&await ha.setConfig({fs:Jr,dir:e,path:"user.name",value:t}),a!==n&&await ha.setConfig({fs:Jr,dir:e,path:"user.email",value:n}),!0}catch(r){return console.error("[VFS Git Op] Error checking/setting Git config:",r),ct.error(`Failed to configure Git user: ${r instanceof Error?r.message:String(r)}`),!1}},$m=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=oh.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return ct.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(oh.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(ct.error("Authentication cancelled: Password/token not provided."),null)},Bm=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),oh.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),oh.delete(n)),null},zm=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!oh.has(n)&&t.username&&t.password&&(oh.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},Mf=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},Bne=async e=>{const t=Wn(e),n=Ms(t,".git");try{return(await Zi(n)).isDirectory()}catch(r){return r instanceof Error&&r.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${t}:`,r),!1}},IM=async(e,t,n,r)=>{var i;const a=Wn(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${a}`);try{let o=!1;try{await Zi(Ms(a,".git")),o=!0}catch(f){if(f.code!=="ENOENT")throw f}if(o)throw console.warn(`[VFS Git Op] Clone target ${a} already contains a .git directory.`),new Error(`Repository already cloned at ${a}.`);const s=Qv(a);if(s!=="/")try{await _h(s,{recursive:!0})}catch(f){if(f.code!=="EEXIST")throw f}let u=n;if(!u)try{if(u=(i=(await ha.getRemoteInfo({http:Fm,url:t,corsProxy:Lm,onAuth:h=>$m(h,r),onAuthFailure:Bm,onAuthSuccess:zm})).HEAD)==null?void 0:i.replace("refs/heads/",""),!u)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${u}`)}catch(f){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",f),new Error(`Failed to determine default branch: ${Mf(f)}`)}await ha.clone({fs:Jr,http:Fm,dir:a,corsProxy:Lm,url:t,ref:u,singleBranch:!0,depth:10,onAuth:f=>$m(f,r),onAuthFailure:Bm,onAuthSuccess:zm,onProgress:f=>{f.phase==="counting objects"&&f.total?console.log(`Clone progress: ${f.phase} ${f.loaded}/${f.total}`):f.phase==="receiving objects"&&f.total?console.log(`Clone progress: ${f.phase} ${f.loaded}/${f.total}`):console.log(`Clone progress: ${f.phase}`)}}),await Zi(Ms(a,".git"));const c=await ha.currentBranch({fs:Jr,dir:a,fullname:!1}).catch(()=>null);c!==u&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${c}, expected ${u}. Checking out...`),await ha.checkout({fs:Jr,dir:a,ref:u})),ct.success(`Repository cloned successfully into ${a} (branch: ${u}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(o){console.error(`[VFS Git Op] Git clone failed for ${t}:`,o);const s=Mf(o);if(o instanceof Error&&o.message.includes("already cloned")||ct.error(`Git clone failed: ${s}`),!(o instanceof Error&&o.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${a}`),await C0(a,{recursive:!0,force:!0})}catch(u){console.warn("[VFS Git Op] Failed cleanup after clone error:",u)}throw o}},OM=async e=>{const t=Wn(e);try{await ha.init({fs:Jr,dir:t}),ct.success(`Initialized empty Git repository in "${sa(t)}"`)}catch(n){throw console.error(`[VFS Git Op] Git init failed for ${t}:`,n),ct.error(`Git init failed: ${n instanceof Error?n.message:String(n)}`),n}},Rk=async(e,t)=>{const n=Wn(e);try{if(!await NM(n))throw new Error("Git user configuration is missing or invalid.");if(await ha.add({fs:Jr,dir:n,filepath:"."}),!(await ha.statusMatrix({fs:Jr,dir:n})).some(([,,s])=>s!==0)){ct.info("No changes detected to commit.");return}const o=await ha.commit({fs:Jr,dir:n,message:t,author:{name:zr.getState().gitUserName,email:zr.getState().gitUserEmail}});ct.success(`Changes committed: ${o.substring(0,7)}`)}catch(r){throw console.error(`[VFS Git Op] Git commit failed for ${n}:`,r),ct.error(`Git commit failed: ${r instanceof Error?r.message:String(r)}`),r}},iw=async(e,t,n)=>{const r=Wn(e);try{if(!await NM(r))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${r}`);const i=await ha.currentBranch({fs:Jr,dir:r,fullname:!1}).catch(()=>null);if(i!==t){console.log(`[VFS Git Op] Current branch is ${i}, switching to ${t} before pull...`);try{await ha.checkout({fs:Jr,dir:r,ref:t})}catch(o){if(o.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await ha.fetch({fs:Jr,http:Fm,dir:r,corsProxy:Lm,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:s=>$m(s,n),onAuthFailure:Bm,onAuthSuccess:zm}),await ha.branch({fs:Jr,dir:r,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(s){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,s),new Error(`Failed to switch to or create local branch "${t}": ${Mf(s)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,o),new Error(`Failed to checkout branch "${t}": ${Mf(o)}`)}}await ha.pull({fs:Jr,http:Fm,dir:r,ref:t,singleBranch:!0,author:{name:zr.getState().gitUserName,email:zr.getState().gitUserEmail},corsProxy:Lm,onAuth:o=>$m(o,n),onAuthFailure:Bm,onAuthSuccess:zm}),ct.success(`Pulled changes successfully for "${sa(r)}"`),console.log(`[VFS Git Op] Pull successful for ${r}`)}catch(a){if(console.error(`[VFS Git Op] Git pull failed for ${r}:`,a),a instanceof Error&&a.message.toLowerCase().includes("already up-to-date")?ct.info(`Branch "${t}" is already up-to-date.`):ct.error(`Git pull failed: ${Mf(a)}`),!(a instanceof Error&&a.message.toLowerCase().includes("already up-to-date")))throw a}},Nk=async(e,t,n)=>{var a,i;const r=Wn(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${r}`);const o=await ha.push({fs:Jr,http:Fm,dir:r,corsProxy:Lm,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:s=>$m(s,n),onAuthFailure:Bm,onAuthSuccess:zm});if(o!=null&&o.ok)ct.success(`Pushed changes successfully for "${sa(r)}"`);else if((a=o==null?void 0:o.error)!=null&&a.includes("up-to-date"))ct.info(`Branch "${t}" already up-to-date on remote.`);else throw(i=o==null?void 0:o.error)!=null&&i.includes("rejected")?(ct.error(`Push rejected for "${sa(r)}". Pull changes first.`),new Error(o.error)):new Error((o==null?void 0:o.error)||"Push rejected by remote")}catch(o){throw console.error(`[VFS Git Op] Git push failed for ${r}:`,o),o instanceof Error&&o.message.includes("rejected")||ct.error(`Git push failed: ${Mf(o)}`),o}},jM=async e=>{const t=Wn(e);console.log(`[VFS Git Op] Git Status on ${t}`);try{const n=await ha.statusMatrix({fs:Jr,dir:t});console.log("Git Status Matrix:",n);const r=n.map(([a,i,o,s])=>{let u="";return s===2&&(u+="INDEX_Modified "),s===3&&(u+="INDEX_Added "),i===0&&o===2?u+="WT_New":i===1&&o===2?u+="WT_Modified":i===1&&o===0?u+="WT_Deleted":i===1&&o===1&&s===0&&(u="Unmodified"),(!u||u==="INDEX_Unmodified ")&&(u=`h:${i} w:${o} s:${s}`),`${a}: ${u.trim()}`}).filter(a=>!a.endsWith("Unmodified")).join(`
`);ct.info(`Git Status for "${sa(t)}":
${r||"No changes"}`,{duration:15e3})}catch(n){throw console.error(`[VFS Git Op] Git status failed for ${t}:`,n),ct.error(`Git status failed: ${n instanceof Error?n.message:String(n)}`),n}},nd=async e=>{const t=Wn(e);if(t!=="/")try{await _h(t,{recursive:!0})}catch(n){if(n instanceof Error&&n.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${t}`);return}throw console.error(`[VFS Op] Failed to create directory ${t}:`,n),ct.error(`Error creating directory "${sa(t)}": ${n instanceof Error?n.message:String(n)}`),n}},DM=async e=>{try{const t={backend:HJ,name:`litechat_vfs_${e}`};return await PJ(t),Jr}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),ct.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},Ik=async e=>{const t=Wn(e);try{try{await Zi(t)}catch(o){if(o.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${t}`),await nd(t),[];throw o}const r=(await rc(t)).map(async o=>{const s=Ms(t,o);try{const u=await Zi(s);return{name:o,path:s,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${s}:`,u),null}});return(await Promise.all(r)).filter(o=>o!==null)}catch(n){throw console.error(`[VFS Op] Failed to list directory ${t}:`,n),ct.error(`Error listing files: ${n instanceof Error?n.message:String(n)}`),n}},Ih=async e=>{const t=Wn(e);try{const n=await E0(t);return Ei.emit(Ub.VFS_FILE_READ,{path:t}),n}catch(n){throw console.error(`[VFS Op] Failed to read file ${t}:`,n),ct.error(`Error reading file "${sa(t)}": ${n instanceof Error?n.message:String(n)}`),n}},ow=async(e,t)=>{const n=Wn(e),r=Qv(n);try{r!=="/"&&await nd(r),await k0(n,t),Ei.emit(Ub.VFS_FILE_WRITTEN,{path:n})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${n}:`,a),ct.error(`Error writing file "${sa(n)}": ${a instanceof Error?a.message:String(a)}`)),a}},Ok=async(e,t=!1)=>{const n=Wn(e);if(n==="/")throw ct.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await Zi(n)).isDirectory()?(await C0(n,{recursive:t}),Ei.emit(Ub.VFS_FILE_DELETED,{path:n})):(await S0(n),Ei.emit(Ub.VFS_FILE_DELETED,{path:n})),ct.success(`"${sa(n)}" deleted.`)}catch(r){if(r instanceof Error&&r.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${n}`);return}throw console.error(`[VFS Op] Failed to delete ${n}:`,r),ct.error(`Error deleting "${sa(n)}": ${r instanceof Error?r.message:String(r)}`),r}},MM=async e=>{await nd(e)},zne=async(e,t)=>{try{const n=await Ih(e),r=new Blob([n]),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a;const o=Wn(e);i.download=t||sa(o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(n){console.error(`[VFS Op] Failed to initiate download for ${e}:`,n),n instanceof Error&&n.message.includes("Error reading file")||ct.error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}},PM=async(e,t)=>{const n=Wn(t);let r=0,a=0;const i=Array.from(e);try{await nd(n);for(const o of i){const s=Ms(n,o.name);try{const u=await o.arrayBuffer();await ow(s,new Uint8Array(u)),r++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${o.name}:`,u)}}}catch(o){a=i.length,console.error(`[VFS Op] Failed to prepare target directory ${n} for upload:`,o)}finally{a>0&&r>0?ct.warning(`Upload complete with issues. ${r} succeeded, ${a} failed.`):a===0&&r>0&&ct.success(`Successfully uploaded ${r} file(s) to ${n==="/"?"root":sa(n)}.`)}},Une=async(e,t)=>{if(!e.name.toLowerCase().endsWith(".zip")){ct.error("Please select a valid ZIP file.");return}const n=Wn(t);let r;try{await nd(n),r=await F8.loadAsync(e);const a=Object.values(r.files),i=await Promise.allSettled(a.map(async c=>{const f=Ms(n,c.name);if(c.dir)await nd(f);else{const h=await c.async("uint8array");await ow(f,h)}return{name:c.name,isDir:c.dir}}));let o=0,s=0,u=0;i.forEach(c=>{c.status==="fulfilled"&&c.value?c.value.isDir?s++:o++:c.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",c.reason))}),u>0?ct.warning(`Finished extracting "${e.name}". ${o+s} items succeeded, ${u} failed.`):ct.success(`Successfully extracted ${o} files and ${s} folders from "${e.name}" to ${n==="/"?"root":sa(n)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),ct.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},$I=async(e,t="/")=>{const n=new F8,r=Wn(t),a=sa(r)||"root";try{try{if(!(await Zi(r)).isDirectory()){ct.error(`Cannot export: "${a}" is not a directory.`);return}}catch(f){f instanceof Error&&f.code==="ENOENT"?ct.error(`Cannot export: Path "${a}" not found.`):ct.error(`Cannot export: Error accessing path "${a}". ${f instanceof Error?f.message:String(f)}`);return}const i=async(f,h)=>{const m=await Ik(f);for(const g of m)if(g.isDirectory){if(g.name===".git")continue;const v=h.folder(g.name);if(v)await i(g.path,v);else throw new Error(`Failed to create subfolder ${g.name} in zip.`)}else{const v=await Ih(g.path);h.file(g.name,v)}};await i(r,n);const o=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s;const c=`vfs_${a}_export.zip`;u.download=e||c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),ct.success(`"${a}" exported as ${u.download}.`)}catch(i){console.error("[VFS Op] Failed to download all as zip:",i),i instanceof Error&&(i.message.includes("Error listing files")||i.message.includes("Error reading file")||i.message.includes("Cannot export"))||ct.error(`ZIP export failed: ${i instanceof Error?i.message:String(i)}`)}},FM=async(e,t)=>{const n=Wn(e),r=Wn(t);if(n==="/"||r==="/")throw ct.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(n!==r)try{const a=Qv(r);a!=="/"&&await nd(a),await mk(n,r),ct.success(`Renamed "${sa(n)}" to "${sa(r)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||ct.error(`Rename failed: Original item "${sa(n)}" not found.`):a instanceof Error&&a.code==="EEXIST"?ct.error(`Rename failed: An item named "${sa(r)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||ct.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${n} to ${r}:`,a),a}},BI=Jr,qne=1024*5,Hne=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},Vne=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},Gne=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],Wne=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:Gne.some(r=>n.endsWith(r))},LM=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=B.useState(null),[i,o]=B.useState(null),[s,u]=B.useState(!1),[c,f]=B.useState(!0),h=e.type||"application/octet-stream",m=Wne(e.name,h),g=h.startsWith("image/"),v=h.startsWith("audio/"),w=h.startsWith("video/"),_=e.source==="vfs";B.useEffect(()=>{let O=null;return o(null),e.source==="direct"&&!m&&e.contentBase64?(O=Hne(e.contentBase64,h),O||o("Failed to decode file content for preview."),a(O)):a(null),e.source==="direct"&&m&&e.contentText&&e.contentText.length>qne?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&m&&e.contentText===void 0&&o("Text content missing from metadata."),()=>{O&&(URL.revokeObjectURL(O),a(null))}},[e.id,e.source,e.contentBase64,e.contentText,h,m]);const x=async()=>{if(e.source==="vfs"){ct.info("File is already in VFS.");return}const O=Vne(e);if(!O){ct.error("Cannot add to VFS: Failed to reconstruct file data.");return}u(!0);try{await PM([O],"/"),ct.success(`"${e.name}" added to VFS root.`)}catch(j){console.error("Failed to add file to VFS:",j),ct.error(`Failed to add "${e.name}" to VFS.`)}finally{u(!1)}},S=()=>f(O=>!O),E=()=>_?y.jsx(g6,{className:"h-5 w-5 text-cyan-500"}):m?y.jsx(fz,{className:"h-5 w-5 text-blue-500"}):g?y.jsx(Iz,{className:"h-5 w-5 text-purple-500"}):v?y.jsx(Bz,{className:"h-5 w-5 text-green-500"}):w?y.jsx(p7,{className:"h-5 w-5 text-orange-500"}):y.jsx(cz,{className:"h-5 w-5 text-muted-foreground"}),C=()=>_?y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(Lf,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):m&&e.contentText!==void 0?y.jsx(TD,{lang:h==="text/markdown"?"markdown":"text",code:e.contentText}):g&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):v&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):w&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),A=B.useMemo(()=>{let O="File";return _?O="VFS File":m?O="Text":g?O="Image":v?O="Audio":w&&(O="Video"),`${O} (${qb(e.size)})`},[_,m,g,v,w,e.size]);return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[E(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",qb(e.size),")"]}),_&&e.path&&y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(Nn,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:S,"aria-label":c?"Unfold preview":"Fold preview",children:y.jsx(f6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:c?"Unfold":"Fold"})]})}),!n&&t&&y.jsxs(y.Fragment,{children:[e.source==="direct"&&y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:x,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Xn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(p6,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{children:"Add to VFS"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(Yu,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{children:"Remove from Prompt"})]})})]})]})]}),c?y.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:S,children:A}):y.jsx("div",{className:Ut("p-2 max-h-80 overflow-y-auto"),children:C()})]})},$M=6048e5,Kne=864e5,Py=43200,zI=1440,UI=Symbol.for("constructDateFrom");function jl(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&UI in e?e[UI](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ra(e,t){return jl(t||e,e)}let Zne={};function G0(){return Zne}function Um(e,t){var s,u,c,f;const n=G0(),r=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,a=Ra(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Qb(e,t){return Um(e,{...t,weekStartsOn:1})}function BM(e,t){const n=Ra(e,t==null?void 0:t.in),r=n.getFullYear(),a=jl(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Qb(a),o=jl(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=Qb(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function ev(e){const t=Ra(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function sw(e,...t){const n=jl.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function qI(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Yne(e,t,n){const[r,a]=sw(n==null?void 0:n.in,e,t),i=qI(r),o=qI(a),s=+i-ev(i),u=+o-ev(o);return Math.round((s-u)/Kne)}function Xne(e,t){const n=BM(e,t),r=jl(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Qb(r)}function eb(e,t){const n=+Ra(e)-+Ra(t);return n<0?-1:n>0?1:n}function Jne(e){return jl(e,Date.now())}function Qne(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ere(e){return!(!Qne(e)&&typeof e!="number"||isNaN(+Ra(e)))}function tre(e,t,n){const[r,a]=sw(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function nre(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function rre(e,t){return+Ra(e)-+Ra(t)}function are(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function ire(e,t){const n=Ra(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function ore(e,t){const n=Ra(e,t==null?void 0:t.in);return+are(n,t)==+ire(n,t)}function sre(e,t,n){const[r,a,i]=sw(n==null?void 0:n.in,e,e,t),o=eb(a,i),s=Math.abs(tre(a,i));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*s);let u=eb(a,i)===-o;ore(r)&&s===1&&eb(r,i)===1&&(u=!1);const c=o*(s-+u);return c===0?0:c}function lre(e,t,n){const r=rre(e,t)/1e3;return nre(n==null?void 0:n.roundingMethod)(r)}function ure(e,t){const n=Ra(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const cre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dre=(e,t,n)=>{let r;const a=cre[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function mS(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const fre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mre={date:mS({formats:fre,defaultWidth:"full"}),time:mS({formats:hre,defaultWidth:"full"}),dateTime:mS({formats:pre,defaultWidth:"full"})},gre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},yre=(e,t,n,r)=>gre[e];function Gp(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const bre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_re={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},xre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Sre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ere=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},kre={ordinalNumber:Ere,era:Gp({values:bre,defaultWidth:"wide"}),quarter:Gp({values:vre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Gp({values:wre,defaultWidth:"wide"}),day:Gp({values:_re,defaultWidth:"wide"}),dayPeriod:Gp({values:xre,defaultWidth:"wide",formattingValues:Sre,defaultFormattingWidth:"wide"})};function Wp(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?Are(s,h=>h.test(o)):Cre(s,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(o.length);return{value:c,rest:f}}}function Cre(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Are(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Tre(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const Rre=/^(\d+)(th|st|nd|rd)?/i,Nre=/\d+/i,Ire={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ore={any:[/^b/i,/^(a|c)/i]},jre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dre={any:[/1/i,/2/i,/3/i,/4/i]},Mre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Fre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Lre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$re={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Bre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},zre={ordinalNumber:Tre({matchPattern:Rre,parsePattern:Nre,valueCallback:e=>parseInt(e,10)}),era:Wp({matchPatterns:Ire,defaultMatchWidth:"wide",parsePatterns:Ore,defaultParseWidth:"any"}),quarter:Wp({matchPatterns:jre,defaultMatchWidth:"wide",parsePatterns:Dre,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Wp({matchPatterns:Mre,defaultMatchWidth:"wide",parsePatterns:Pre,defaultParseWidth:"any"}),day:Wp({matchPatterns:Fre,defaultMatchWidth:"wide",parsePatterns:Lre,defaultParseWidth:"any"}),dayPeriod:Wp({matchPatterns:$re,defaultMatchWidth:"any",parsePatterns:Bre,defaultParseWidth:"any"})},zM={code:"en-US",formatDistance:dre,formatLong:mre,formatRelative:yre,localize:kre,match:zre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ure(e,t){const n=Ra(e,t==null?void 0:t.in);return Yne(n,ure(n))+1}function qre(e,t){const n=Ra(e,t==null?void 0:t.in),r=+Qb(n)-+Xne(n);return Math.round(r/$M)+1}function UM(e,t){var f,h,m,g;const n=Ra(e,t==null?void 0:t.in),r=n.getFullYear(),a=G0(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=jl((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=Um(o,t),u=jl((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=Um(u,t);return+n>=+s?r+1:+n>=+c?r:r-1}function Hre(e,t){var s,u,c,f;const n=G0(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,a=UM(e,t),i=jl((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Um(i,t)}function Vre(e,t){const n=Ra(e,t==null?void 0:t.in),r=+Um(n,t)-+Hre(n,t);return Math.round(r/$M)+1}function cr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Su={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return cr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):cr(n+1,2)},d(e,t){return cr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return cr(e.getHours()%12||12,t.length)},H(e,t){return cr(e.getHours(),t.length)},m(e,t){return cr(e.getMinutes(),t.length)},s(e,t){return cr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return cr(a,t.length)}},wf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},HI={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Su.y(e,t)},Y:function(e,t,n,r){const a=UM(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return cr(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):cr(i,t.length)},R:function(e,t){const n=BM(e);return cr(n,t.length)},u:function(e,t){const n=e.getFullYear();return cr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return cr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return cr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Su.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return cr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Vre(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):cr(a,t.length)},I:function(e,t,n){const r=qre(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):cr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Su.d(e,t)},D:function(e,t,n){const r=Ure(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):cr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return cr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return cr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return cr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=wf.noon:r===0?a=wf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=wf.evening:r>=12?a=wf.afternoon:r>=4?a=wf.morning:a=wf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Su.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Su.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Su.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Su.s(e,t)},S:function(e,t){return Su.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return GI(r);case"XXXX":case"XX":return Bc(r);case"XXXXX":case"XXX":default:return Bc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return GI(r);case"xxxx":case"xx":return Bc(r);case"xxxxx":case"xxx":default:return Bc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+VI(r,":");case"OOOO":default:return"GMT"+Bc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+VI(r,":");case"zzzz":default:return"GMT"+Bc(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return cr(r,t.length)},T:function(e,t,n){return cr(+e,t.length)}};function VI(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+cr(i,2)}function GI(e,t){return e%60===0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):Bc(e,t)}function Bc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=cr(Math.trunc(r/60),2),i=cr(r%60,2);return n+a+t+i}const WI=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},qM=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Gre=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return WI(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",WI(r,t)).replace("{{time}}",qM(a,t))},Wre={p:qM,P:Gre},Kre=/^D+$/,Zre=/^Y+$/,Yre=["D","DD","YY","YYYY"];function Xre(e){return Kre.test(e)}function Jre(e){return Zre.test(e)}function Qre(e,t,n){const r=eae(e,t,n);if(console.warn(r),Yre.includes(e))throw new RangeError(r)}function eae(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const tae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,nae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,rae=/^'([^]*?)'?$/,aae=/''/g,iae=/[a-zA-Z]/;function KI(e,t,n){var f,h,m,g;const r=G0(),a=r.locale??zM,i=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,s=Ra(e,n==null?void 0:n.in);if(!ere(s))throw new RangeError("Invalid time value");let u=t.match(nae).map(v=>{const w=v[0];if(w==="p"||w==="P"){const _=Wre[w];return _(v,a.formatLong)}return v}).join("").match(tae).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:oae(v)};if(HI[w])return{isToken:!0,value:v};if(w.match(iae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(u=a.localize.preprocessor(s,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(v=>{if(!v.isToken)return v.value;const w=v.value;(Jre(w)||Xre(w))&&Qre(w,t,String(e));const _=HI[w[0]];return _(s,w,a.localize,c)}).join("")}function oae(e){const t=e.match(rae);return t?t[1].replace(aae,"'"):e}function sae(e,t,n){const r=G0(),a=(n==null?void 0:n.locale)??r.locale??zM,i=2520,o=eb(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,c]=sw(n==null?void 0:n.in,...o>0?[t,e]:[e,t]),f=lre(c,u),h=(ev(c)-ev(u))/1e3,m=Math.round((f-h)/60);let g;if(m<2)return n!=null&&n.includeSeconds?f<5?a.formatDistance("lessThanXSeconds",5,s):f<10?a.formatDistance("lessThanXSeconds",10,s):f<20?a.formatDistance("lessThanXSeconds",20,s):f<40?a.formatDistance("halfAMinute",0,s):f<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):m===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",m,s);if(m<45)return a.formatDistance("xMinutes",m,s);if(m<90)return a.formatDistance("aboutXHours",1,s);if(m<zI){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,s)}else{if(m<i)return a.formatDistance("xDays",1,s);if(m<Py){const v=Math.round(m/zI);return a.formatDistance("xDays",v,s)}else if(m<Py*2)return g=Math.round(m/Py),a.formatDistance("aboutXMonths",g,s)}if(g=sre(c,u),g<12){const v=Math.round(m/Py);return a.formatDistance("xMonths",v,s)}else{const v=g%12,w=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",w,s):v<9?a.formatDistance("overXYears",w,s):a.formatDistance("almostXYears",w+1,s)}}function HM(e,t){return sae(e,Jne(e),t)}const jk=wt.memo(({turnData:e,timestamp:t,className:n})=>{var o,s;const r=t?HM(new Date(t),{addSuffix:!0}):"Sending...",a=((o=e.metadata)==null?void 0:o.attachedFiles)&&e.metadata.attachedFiles.length>0,i=e.content&&e.content.trim().length>0;return y.jsxs("div",{className:Ut("user-prompt",n),children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"User"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:r})]}),a&&y.jsx("div",{className:"mb-2 space-y-1",children:(s=e.metadata.attachedFiles)==null?void 0:s.map(u=>y.jsx(LM,{fileMeta:u,isReadOnly:!0},u.id))}),i&&y.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]})});jk.displayName="UserPromptDisplay";const ZI={};function lae(e){let t=ZI[e];if(t)return t;t=ZI[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function sh(e,t){typeof t!="string"&&(t=sh.defaultChars);const n=lae(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=s<<6&1984|u&63;c<128?a+="��":a+=String.fromCharCode(c),i+=3;continue}}if((s&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const f=s<<12&61440|u<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="���":a+=String.fromCharCode(f),i+=6;continue}}if((s&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),f=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(f&192)===128){let h=s<<18&1835008|u<<12&258048|c<<6&4032|f&63;h<65536||h>1114111?a+="����":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+="�"}return a})}sh.defaultChars=";/?:@&=+$,#";sh.componentChars="";const YI={};function uae(e){let t=YI[e];if(t)return t;t=YI[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function W0(e,t,n){typeof t!="string"&&(n=t,t=W0.defaultChars),typeof n>"u"&&(n=!0);const r=uae(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const u=e.charCodeAt(i+1);if(u>=56320&&u<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}W0.defaultChars=";/?:@&=+$,-_.!~*'()#";W0.componentChars="-_.!~*'()";function Dk(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function tv(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const cae=/^([a-z0-9.+-]+:)/i,dae=/:[0-9]*$/,fae=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,hae=["<",">",'"',"`"," ","\r",`
`,"	"],pae=["{","}","|","\\","^","`"].concat(hae),mae=["'"].concat(pae),XI=["%","/","?",";","#"].concat(mae),JI=["/","?","#"],gae=255,QI=/^[+a-z0-9A-Z_-]{0,63}$/,yae=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,e4={javascript:!0,"javascript:":!0},t4={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Mk(e,t){if(e&&e instanceof tv)return e;const n=new tv;return n.parse(e,t),n}tv.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=fae.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=cae.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&e4[o])&&(i=i.substr(2),this.slashes=!0)),!e4[o]&&(a||o&&!t4[o])){let c=-1;for(let v=0;v<JI.length;v++)r=i.indexOf(JI[v]),r!==-1&&(c===-1||r<c)&&(c=r);let f,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(f=i.slice(0,h),i=i.slice(h+1),this.auth=f),c=-1;for(let v=0;v<XI.length;v++)r=i.indexOf(XI[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const m=i.slice(0,c);i=i.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let w=0,_=v.length;w<_;w++){const x=v[w];if(x&&!x.match(QI)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(QI)){const E=v.slice(0,w),C=v.slice(w+1),A=x.match(yae);A&&(E.push(A[1]),C.unshift(A[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>gae&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),t4[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};tv.prototype.parseHost=function(e){let t=dae.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const bae=Object.freeze(Object.defineProperty({__proto__:null,decode:sh,encode:W0,format:Dk,parse:Mk},Symbol.toStringTag,{value:"Module"})),VM=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,GM=/[\0-\x1F\x7F-\x9F]/,vae=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Pk=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,WM=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,KM=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,wae=Object.freeze(Object.defineProperty({__proto__:null,Any:VM,Cc:GM,Cf:vae,P:Pk,S:WM,Z:KM},Symbol.toStringTag,{value:"Module"})),_ae=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),xae=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(e=>e.charCodeAt(0)));var gS;const Sae=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Eae=(gS=String.fromCodePoint)!==null&&gS!==void 0?gS:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function kae(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Sae.get(e))!==null&&t!==void 0?t:e}var ka;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ka||(ka={}));const Cae=32;var Ru;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Ru||(Ru={}));function L2(e){return e>=ka.ZERO&&e<=ka.NINE}function Aae(e){return e>=ka.UPPER_A&&e<=ka.UPPER_F||e>=ka.LOWER_A&&e<=ka.LOWER_F}function Tae(e){return e>=ka.UPPER_A&&e<=ka.UPPER_Z||e>=ka.LOWER_A&&e<=ka.LOWER_Z||L2(e)}function Rae(e){return e===ka.EQUALS||Tae(e)}var xa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(xa||(xa={}));var Cu;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Cu||(Cu={}));class Nae{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=xa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Cu.Strict}startEntity(t){this.decodeMode=t,this.state=xa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case xa.EntityStart:return t.charCodeAt(n)===ka.NUM?(this.state=xa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=xa.NamedEntity,this.stateNamedEntity(t,n));case xa.NumericStart:return this.stateNumericStart(t,n);case xa.NumericDecimal:return this.stateNumericDecimal(t,n);case xa.NumericHex:return this.stateNumericHex(t,n);case xa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Cae)===ka.LOWER_X?(this.state=xa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=xa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(L2(a)||Aae(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(L2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ka.SEMI)this.consumed+=1;else if(this.decodeMode===Cu.Strict)return 0;return this.emitCodePoint(kae(this.result),this.consumed),this.errors&&(t!==ka.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Ru.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Iae(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Cu.Attribute&&(i===0||Rae(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Ru.VALUE_LENGTH)>>14,i!==0){if(o===ka.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Cu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Ru.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Ru.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case xa.NamedEntity:return this.result!==0&&(this.decodeMode!==Cu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case xa.NumericDecimal:return this.emitNumericEntity(0,2);case xa.NumericHex:return this.emitNumericEntity(0,3);case xa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case xa.EntityStart:return 0}}}function ZM(e){let t="";const n=new Nae(e,r=>t+=Eae(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const c=n.write(a,s+1);if(c<0){o=s+n.end();break}o=s+c,s=c===0?o+1:o}const u=t+a.slice(o);return t="",u}}function Iae(e,t,n,r){const a=(t&Ru.BRANCH_LENGTH)>>7,i=t&Ru.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=a?-1:e[n+u]-1}let o=n,s=o+a-1;for(;o<=s;){const u=o+s>>>1,c=e[u];if(c<r)o=u+1;else if(c>r)s=u-1;else return e[u+a]}return-1}const Oae=ZM(_ae);ZM(xae);function YM(e,t=Cu.Legacy){return Oae(e,t)}function jae(e){return Object.prototype.toString.call(e)}function Fk(e){return jae(e)==="[object String]"}const Dae=Object.prototype.hasOwnProperty;function Mae(e,t){return Dae.call(e,t)}function lw(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function XM(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function Lk(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function nv(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const JM=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Pae=/&([a-z#][a-z0-9]{1,31});/gi,Fae=new RegExp(JM.source+"|"+Pae.source,"gi"),Lae=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function $ae(e,t){if(t.charCodeAt(0)===35&&Lae.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Lk(r)?nv(r):e}const n=YM(e);return n!==e?n:e}function Bae(e){return e.indexOf("\\")<0?e:e.replace(JM,"$1")}function lh(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Fae,function(t,n,r){return n||$ae(t,r)})}const zae=/[&<>"]/,Uae=/[&<>"]/g,qae={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Hae(e){return qae[e]}function Zu(e){return zae.test(e)?e.replace(Uae,Hae):e}const Vae=/[.?*+^$[\]\\(){}|-]/g;function Gae(e){return e.replace(Vae,"\\$&")}function Tr(e){switch(e){case 9:case 32:return!0}return!1}function qm(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Hm(e){return Pk.test(e)||WM.test(e)}function Vm(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function uw(e){return e=e.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(e=e.replace(/ẞ/g,"ß")),e.toLowerCase().toUpperCase()}const Wae={mdurl:bae,ucmicro:wae},Kae=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:XM,assign:lw,escapeHtml:Zu,escapeRE:Gae,fromCodePoint:nv,has:Mae,isMdAsciiPunct:Vm,isPunctChar:Hm,isSpace:Tr,isString:Fk,isValidEntityCode:Lk,isWhiteSpace:qm,lib:Wae,normalizeReference:uw,unescapeAll:lh,unescapeMd:Bae},Symbol.toStringTag,{value:"Module"}));function Zae(e,t,n){let r,a,i,o;const s=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=u,-1}}let c=-1;return a&&(c=e.pos),e.pos=u,c}function Yae(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=lh(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=lh(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Xae(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=lh(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=lh(e.slice(t,i)),o}const Jae=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Yae,parseLinkLabel:Zae,parseLinkTitle:Xae},Symbol.toStringTag,{value:"Module"})),Fs={};Fs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Zu(i.content)+"</code>"};Fs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Zu(e[t].content)+`</code></pre>
`};Fs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?lh(i.info).trim():"";let s="",u="";if(o){const f=o.split(/(\s+)/g);s=f[0],u=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,s,u)||Zu(i.content):c=Zu(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];f<0?h.push(["class",n.langPrefix+s]):(h[f]=h[f].slice(),h[f][1]+=" "+n.langPrefix+s);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};Fs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Fs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Fs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Fs.text=function(e,t){return Zu(e[t].content)};Fs.html_block=function(e,t){return e[t].content};Fs.html_inline=function(e,t){return e[t].content};function Oh(){this.rules=lw({},Fs)}Oh.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Zu(t.attrs[n][0])+'="'+Zu(t.attrs[n][1])+'"';return a};Oh.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};Oh.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Oh.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Oh.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ti(){this.__rules__=[],this.__cache__=null}Ti.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ti.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ti.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ti.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ti.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ti.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ti.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ti.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Xo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Xo.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};Xo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Xo.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};Xo.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Xo.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function QM(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}QM.prototype.Token=Xo;const Qae=/\r\n?|\n/g,eie=/\0/g;function tie(e){let t;t=e.src.replace(Qae,`
`),t=t.replace(eie,"�"),e.src=t}function nie(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function rie(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function aie(e){return/^<a[>\s]/i.test(e)}function iie(e){return/^<\/a\s*>/i.test(e)}function oie(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(aie(s.content)&&i>0&&i--,iie(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const u=s.content;let c=e.md.linkify.match(u);const f=[];let h=s.level,m=0;c.length>0&&c[0].index===0&&o>0&&a[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,w=e.md.normalizeLink(v);if(!e.md.validateLink(w))continue;let _=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=c[g].index;if(x>m){const A=new e.Token("text","",0);A.content=u.slice(m,x),A.level=h,f.push(A)}const S=new e.Token("link_open","a",1);S.attrs=[["href",w]],S.level=h++,S.markup="linkify",S.info="auto",f.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,f.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",f.push(C),m=c[g].lastIndex}if(m<u.length){const g=new e.Token("text","",0);g.content=u.slice(m),g.level=h,f.push(g)}t[n].children=a=XM(a,o,f)}}}}const eP=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,sie=/\((c|tm|r)\)/i,lie=/\((c|tm|r)\)/ig,uie={c:"©",r:"®",tm:"™"};function cie(e,t){return uie[t.toLowerCase()]}function die(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(lie,cie)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function fie(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&eP.test(r.content)&&(r.content=r.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function hie(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(sie.test(e.tokens[t].content)&&die(e.tokens[t].children),eP.test(e.tokens[t].content)&&fie(e.tokens[t].children))}const pie=/['"]/,n4=/['"]/g,r4="’";function Fy(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function mie(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,u=0,c=s.length;e:for(;u<c;){n4.lastIndex=u;const f=n4.exec(s);if(!f)break;let h=!0,m=!0;u=f.index+1;const g=f[0]==="'";let v=32;if(f.index-1>=0)v=s.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let w=32;if(u<c)w=s.charCodeAt(u);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){w=e[n].content.charCodeAt(0);break}const _=Vm(v)||Hm(String.fromCharCode(v)),x=Vm(w)||Hm(String.fromCharCode(w)),S=qm(v),E=qm(w);if(E?h=!1:x&&(S||_||(h=!1)),S?m=!1:_&&(E||x||(m=!1)),w===34&&f[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=_,m=x),!h&&!m){g&&(i.content=Fy(i.content,f.index,r4));continue}if(m)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let A,O;g?(A=t.md.options.quotes[2],O=t.md.options.quotes[3]):(A=t.md.options.quotes[0],O=t.md.options.quotes[1]),i.content=Fy(i.content,f.index,O),e[C.token].content=Fy(e[C.token].content,C.pos,A),u+=O.length-1,C.token===a&&(u+=A.length-1),s=i.content,c=s.length,r.length=n;continue e}}h?r.push({token:a,pos:f.index,single:g,level:o}):m&&g&&(i.content=Fy(i.content,f.index,r4))}}}function gie(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!pie.test(e.tokens[t].content)||mie(e.tokens[t].children,e)}function yie(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const yS=[["normalize",tie],["block",nie],["inline",rie],["linkify",oie],["replacements",hie],["smartquotes",gie],["text_join",yie]];function $k(){this.ruler=new Ti;for(let e=0;e<yS.length;e++)this.ruler.push(yS[e][0],yS[e][1])}$k.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};$k.prototype.State=QM;function Ls(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,u=0,c=a.length,f=!1;o<c;o++){const h=a.charCodeAt(o);if(!f)if(Tr(h)){s++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(u),this.bsCount.push(0),f=!1,s=0,u=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ls.prototype.push=function(e,t,n){const r=new Xo(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Ls.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Ls.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Ls.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Tr(r))break}return t};Ls.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Tr(this.src.charCodeAt(--t)))return t+1;return t};Ls.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Ls.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Ls.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let u=0;const c=this.bMarks[s];let f=c,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];f<h&&u<r;){const m=this.src.charCodeAt(f);if(Tr(m))m===9?u+=4-(u+this.bsCount[s])%4:u++;else if(f-c<this.tShift[s])u++;else break;f++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(f,h):i[o]=this.src.slice(f,h)}return i.join("")};Ls.prototype.Token=Xo;const bie=65536;function bS(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function a4(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function vie(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Tr(s)||o===45&&Tr(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Tr(C))return!1;i++}let u=bS(e,t+1),c=u.split("|");const f=[];for(let C=0;C<c.length;C++){const A=c[C].trim();if(!A){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=bS(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=a4(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==f.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),w=[t,0];v.map=w;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<c.length;C++){const A=e.push("th_open","th",1);f[C]&&(A.attrs=[["style","text-align:"+f[C]]]);const O=e.push("inline","",0);O.content=c[C].trim(),O.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let O=0,j=g.length;O<j;O++)if(g[O](e,a,n,!0)){C=!0;break}if(C||(u=bS(e,a).trim(),!u)||e.sCount[a]-e.blkIndent>=4||(c=a4(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>bie))break;if(a===t+2){const O=e.push("tbody_open","tbody",1);O.map=S=[t+2,0]}const A=e.push("tr_open","tr",1);A.map=[a,a+1];for(let O=0;O<h;O++){const j=e.push("td_open","td",1);f[O]&&(j.attrs=[["style","text-align:"+f[O]]]);const N=e.push("inline","",0);N.content=c[O]?c[O].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),w[1]=a,e.parentType=m,e.line=a,!0}function wie(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function _ie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let u=a-s;if(u<3)return!1;const c=e.src.slice(s,a),f=e.src.slice(a,i);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<u)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}u=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=f,g.content=e.getLines(t+1,h,u,!0),g.markup=c,g.map=[t,e.line],!0}function xie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],u=[],c=[],f=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let A=e.sCount[v]+1,O,j;e.src.charCodeAt(a)===32?(a++,A++,j=!1,O=!0):e.src.charCodeAt(a)===9?(O=!0,(e.bsCount[v]+A)%4===3?(a++,A++,j=!1):j=!0):O=!1;let N=A;for(s.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const U=e.src.charCodeAt(a);if(Tr(U))U===9?N+=4-(N+e.bsCount[v]+(j?1:0))%4:N++;else break;a++}g=a>=i,u.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(O?1:0),c.push(e.sCount[v]),e.sCount[v]=N-A,f.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let A=0,O=h.length;A<O;A++)if(h[A](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const w=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=m,x[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=u[E];return e.blkIndent=w,!0}function Sie(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==o&&!Tr(c))return!1;c===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(s+1).join(String.fromCharCode(o)),!0}function i4(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Tr(i))return-1}return r}function o4(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Tr(i))?-1:a}function Eie(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function kie(e,t,n,r){let a,i,o,s,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(f=!0);let h,m,g;if((g=o4(e,u))>=0){if(h=!0,o=e.bMarks[u]+e.tShift[u],m=Number(e.src.slice(o,g-1)),f&&m!==1)return!1}else if((g=i4(e,u))>=0)h=!1;else return!1;if(f&&e.skipSpaces(g)>=e.eMarks[u])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),w=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),m!==1&&(s.attrs=[["start",m]])):s=e.push("bullet_list_open","ul",1);const _=[u,0];s.map=_,s.markup=String.fromCharCode(v);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";u<n;){i=g,a=e.eMarks[u];const C=e.sCount[u]+g-(e.bMarks[u]+e.tShift[u]);let A=C;for(;i<a;){const ue=e.src.charCodeAt(i);if(ue===9)A+=4-(A+e.bsCount[u])%4;else if(ue===32)A++;else break;i++}const O=i;let j;O>=a?j=1:j=A-C,j>4&&(j=1);const N=C+j;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(v);const U=[u,0];s.map=U,h&&(s.info=e.src.slice(o,g-1));const V=e.tight,J=e.tShift[u],P=e.sCount[u],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[u]=O-e.bMarks[u],e.sCount[u]=A,O>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,u,n,!0),(!e.tight||x)&&(c=!1),x=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[u]=J,e.sCount[u]=P,e.tight=V,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(v),u=e.line,U[1]=u,u>=n||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let F=!1;for(let ue=0,le=S.length;ue<le;ue++)if(S[ue](e,u,n,!0)){F=!0;break}if(F)break;if(h){if(g=o4(e,u),g<0)break;o=e.bMarks[u]+e.tShift[u]}else if(g=i4(e,u),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(v),_[1]=u,e.line=u,e.parentType=E,c&&Eie(e,w),!0}function Cie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const j=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let U=!1;for(let V=0,J=j.length;V<J;V++)if(j[V](e,S,E,!0)){U=!0;break}if(e.parentType=N,U)return null}const A=e.bMarks[S]+e.tShift[S],O=e.eMarks[S];return e.src.slice(A,O+1)}let u=e.src.slice(a,i+1);i=u.length;let c=-1;for(a=1;a<i;a++){const S=u.charCodeAt(a);if(S===91)return!1;if(S===93){c=a;break}else if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(S===92&&(a++,a<i&&u.charCodeAt(a)===10)){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}const f=e.md.helpers.parseLinkDestination(u,a,i);if(!f.ok)return!1;const h=e.md.normalizeLink(f.str);if(!e.md.validateLink(h))return!1;a=f.pos;const m=a,g=o,v=a;for(;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(S))break}let w=e.md.helpers.parseLinkTitle(u,a,i);for(;w.can_continue;){const S=s(o);if(S===null)break;u+=S,a=i,i=u.length,o++,w=e.md.helpers.parseLinkTitle(u,a,i,w)}let _;for(a<i&&v!==a&&w.ok?(_=w.str,a=w.pos):(_="",a=m,o=g);a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10&&_)for(_="",a=m,o=g;a<i;){const S=u.charCodeAt(a);if(!Tr(S))break;a++}if(a<i&&u.charCodeAt(a)!==10)return!1;const x=uw(u.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const Aie=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Tie="[a-zA-Z_:][a-zA-Z0-9:._-]*",Rie="[^\"'=<>`\\x00-\\x20]+",Nie="'[^']*'",Iie='"[^"]*"',Oie="(?:"+Rie+"|"+Nie+"|"+Iie+")",jie="(?:\\s+"+Tie+"(?:\\s*=\\s*"+Oie+")?)",tP="<[A-Za-z][A-Za-z0-9\\-]*"+jie+"*\\s*\\/?>",nP="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",Die="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Mie="<[?][\\s\\S]*?[?]>",Pie="<![A-Za-z][^>]*>",Fie="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Lie=new RegExp("^(?:"+tP+"|"+nP+"|"+Die+"|"+Mie+"|"+Pie+"|"+Fie+")"),$ie=new RegExp("^(?:"+tP+"|"+nP+")"),_f=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+Aie.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp($ie.source+"\\s*$"),/^$/,!1]];function Bie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<_f.length&&!_f[s][0].test(o);s++);if(s===_f.length)return!1;if(r)return _f[s][2];let u=t+1;if(!_f[s][1].test(o)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],i=e.eMarks[u],o=e.src.slice(a,i),_f[s][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function zie(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Tr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const u=e.skipCharsBack(i,35,a);u>a&&Tr(e.src.charCodeAt(u-1))&&(i=u),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,i).trim(),f.map=[t,e.line],f.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function Uie(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const v=e.eMarks[s];if(g<v&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let m=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,s,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const u=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=u,f.map=[t,e.line-1],f.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function qie(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const Ly=[["table",vie,["paragraph","reference"]],["code",wie],["fence",_ie,["paragraph","reference","blockquote","list"]],["blockquote",xie,["paragraph","reference","blockquote","list"]],["hr",Sie,["paragraph","reference","blockquote","list"]],["list",kie,["paragraph","reference","blockquote"]],["reference",Cie],["html_block",Bie,["paragraph","reference","blockquote"]],["heading",zie,["paragraph","reference","blockquote"]],["lheading",Uie],["paragraph",qie]];function cw(){this.ruler=new Ti;for(let e=0;e<Ly.length;e++)this.ruler.push(Ly[e][0],Ly[e][1],{alt:(Ly[e][2]||[]).slice()})}cw.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const u=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,o,n,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};cw.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};cw.prototype.State=Ls;function K0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}K0.prototype.pushPending=function(){const e=new Xo("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};K0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Xo(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};K0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,u=Vm(a)||Hm(String.fromCharCode(a)),c=Vm(s)||Hm(String.fromCharCode(s)),f=qm(a),h=qm(s),m=!h&&(!c||f||u),g=!f&&(!u||h||c);return{can_open:m&&(t||!g||u),can_close:g&&(t||!m||c),length:o}};K0.prototype.Token=Xo;function Hie(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Vie(e,t){let n=e.pos;for(;n<e.posMax&&!Hie(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const Gie=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Wie(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(Gie);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const u=e.md.normalizeLink(s);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function Kie(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Tr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const Bk=[];for(let e=0;e<256;e++)Bk.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Bk[e.charCodeAt(0)]=1});function Zie(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Tr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&Bk[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function Yie(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let u=n,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&e.src.charCodeAt(u)===96;)u++;const f=u-c;if(f===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function Xie(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let u=0;u<i;u+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function s4(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function Jie(e){const t=e.tokens_meta,n=e.tokens_meta.length;s4(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&s4(e,t[r].delimiters)}const rP={tokenize:Xie,postProcess:Jie};function Qie(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function l4(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),u=e.tokens[a.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?s+s:s,u.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?s+s:s,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function eoe(e){const t=e.tokens_meta,n=e.tokens_meta.length;l4(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&l4(e,t[r].delimiters)}const aP={tokenize:Qie,postProcess:eoe};function toe(e,t){let n,r,a,i,o="",s="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(v>=h)return!1;if(u=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?v=a.pos:o="",u=v;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&u!==v&&a.ok)for(s=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(u=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(u,v++):v=g+1):v=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[uw(r)],!i)return e.pos=f,!1;o=i.href,s=i.title}if(!t){e.pos=m,e.posMax=g;const w=e.push("link_open","a",1),_=[["href",o]];w.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function noe(e,t){let n,r,a,i,o,s,u,c,f="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(i>=m)return!1;for(c=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(f=e.md.normalizeLink(s.str),e.md.validateLink(f)?i=s.pos:f=""),c=i;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&c!==i&&s.ok)for(u=s.str,i=s.pos;i<m&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);else u="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),o=e.env.references[uw(a)],!o)return e.pos=h,!1;f=o.href,u=o.title}if(!t){r=e.src.slice(g,v);const w=[];e.md.inline.parse(r,e.md,e.env,w);const _=e.push("image","img",0),x=[["src",f],["alt",""]];_.attrs=x,_.children=w,_.content=r,u&&x.push(["title",u])}return e.pos=i,e.posMax=m,!0}const roe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,aoe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function ioe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(aoe.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(roe.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function ooe(e){return/^<a[>\s]/i.test(e)}function soe(e){return/^<\/a\s*>/i.test(e)}function loe(e){const t=e|32;return t>=97&&t<=122}function uoe(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!loe(a))return!1;const i=e.src.slice(r).match(Lie);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],ooe(o.content)&&e.linkLevel++,soe(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const coe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,doe=/^&([a-z][a-z0-9]{1,31});/i;function foe(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(coe);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=Lk(o)?nv(o):nv(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(doe);if(i){const o=YM(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function u4(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[s.marker][(s.open?3:0)+s.length%3];let c=r-i[r]-1,f=c;for(;c>u;c-=i[c]+1){const h=e[c];if(h.marker===s.marker&&h.open&&h.end<0){let m=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(m=!0),!m){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,s.open=!1,h.end=o,h.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=f)}}function hoe(e){const t=e.tokens_meta,n=e.tokens_meta.length;u4(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&u4(t[r].delimiters)}function poe(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const vS=[["text",Vie],["linkify",Wie],["newline",Kie],["escape",Zie],["backticks",Yie],["strikethrough",rP.tokenize],["emphasis",aP.tokenize],["link",toe],["image",noe],["autolink",ioe],["html_inline",uoe],["entity",foe]],wS=[["balance_pairs",hoe],["strikethrough",rP.postProcess],["emphasis",aP.postProcess],["fragments_join",poe]];function Z0(){this.ruler=new Ti;for(let e=0;e<vS.length;e++)this.ruler.push(vS[e][0],vS[e][1]);this.ruler2=new Ti;for(let e=0;e<wS.length;e++)this.ruler2.push(wS[e][0],wS[e][1])}Z0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};Z0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Z0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};Z0.prototype.State=K0;function moe(e){const t={};e=e||{},t.src_Any=VM.source,t.src_Cc=GM.source,t.src_Z=KM.source,t.src_P=Pk.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><｜]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function $2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function dw(e){return Object.prototype.toString.call(e)}function goe(e){return dw(e)==="[object String]"}function yoe(e){return dw(e)==="[object Object]"}function boe(e){return dw(e)==="[object RegExp]"}function c4(e){return dw(e)==="[object Function]"}function voe(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const iP={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function woe(e){return Object.keys(e||{}).reduce(function(t,n){return t||iP.hasOwnProperty(n)},!1)}const _oe={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},xoe="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",Soe="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function Eoe(e){e.__index__=-1,e.__text_cache__=""}function koe(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function d4(){return function(e,t){t.normalize(e)}}function rv(e){const t=e.re=moe(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(xoe),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,u){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+u)}Object.keys(e.__schemas__).forEach(function(s){const u=e.__schemas__[s];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,yoe(u)){boe(u.validate)?c.validate=koe(u.validate):c4(u.validate)?c.validate=u.validate:i(s,u),c4(u.normalize)?c.normalize=u.normalize:u.normalize?i(s,u):c.normalize=d4();return}if(goe(u)){a.push(s);return}i(s,u)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:d4()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(voe).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),Eoe(e)}function Coe(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function B2(e,t){const n=new Coe(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Yi(e,t){if(!(this instanceof Yi))return new Yi(e,t);t||woe(e)&&(t=e,e={}),this.__opts__=$2({},iP,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=$2({},_oe,e),this.__compiled__={},this.__tlds__=Soe,this.__tlds_replaced__=!1,this.re={},rv(this)}Yi.prototype.add=function(t,n){return this.__schemas__[t]=n,rv(this),this};Yi.prototype.set=function(t){return this.__opts__=$2(this.__opts__,t),this};Yi.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,u,c,f;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};Yi.prototype.pretest=function(t){return this.re.pretest.test(t)};Yi.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Yi.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(B2(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(B2(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Yi.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,B2(this,0)):null};Yi.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),rv(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,rv(this),this)};Yi.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Yi.prototype.onCompile=function(){};const Pf=2147483647,ks=36,zk=1,Gm=26,Aoe=38,Toe=700,oP=72,sP=128,lP="-",Roe=/^xn--/,Noe=/[^\0-\x7F]/,Ioe=/[\x2E\u3002\uFF0E\uFF61]/g,Ooe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_S=ks-zk,Cs=Math.floor,xS=String.fromCharCode;function ku(e){throw new RangeError(Ooe[e])}function joe(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function uP(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(Ioe,".");const a=e.split("."),i=joe(a,t).join(".");return r+i}function cP(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const Doe=e=>String.fromCodePoint(...e),Moe=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:ks},f4=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},dP=function(e,t,n){let r=0;for(e=n?Cs(e/Toe):e>>1,e+=Cs(e/t);e>_S*Gm>>1;r+=ks)e=Cs(e/_S);return Cs(r+(_S+1)*e/(e+Aoe))},fP=function(e){const t=[],n=e.length;let r=0,a=sP,i=oP,o=e.lastIndexOf(lP);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&ku("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const u=r;for(let f=1,h=ks;;h+=ks){s>=n&&ku("invalid-input");const m=Moe(e.charCodeAt(s++));m>=ks&&ku("invalid-input"),m>Cs((Pf-r)/f)&&ku("overflow"),r+=m*f;const g=h<=i?zk:h>=i+Gm?Gm:h-i;if(m<g)break;const v=ks-g;f>Cs(Pf/v)&&ku("overflow"),f*=v}const c=t.length+1;i=dP(r-u,c,u==0),Cs(r/c)>Pf-a&&ku("overflow"),a+=Cs(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},hP=function(e){const t=[];e=cP(e);const n=e.length;let r=sP,a=0,i=oP;for(const u of e)u<128&&t.push(xS(u));const o=t.length;let s=o;for(o&&t.push(lP);s<n;){let u=Pf;for(const f of e)f>=r&&f<u&&(u=f);const c=s+1;u-r>Cs((Pf-a)/c)&&ku("overflow"),a+=(u-r)*c,r=u;for(const f of e)if(f<r&&++a>Pf&&ku("overflow"),f===r){let h=a;for(let m=ks;;m+=ks){const g=m<=i?zk:m>=i+Gm?Gm:m-i;if(h<g)break;const v=h-g,w=ks-g;t.push(xS(f4(g+v%w,0))),h=Cs(v/w)}t.push(xS(f4(h,0))),i=dP(a,c,s===o),a=0,++s}++a,++r}return t.join("")},Poe=function(e){return uP(e,function(t){return Roe.test(t)?fP(t.slice(4).toLowerCase()):t})},Foe=function(e){return uP(e,function(t){return Noe.test(t)?"xn--"+hP(t):t})},pP={version:"2.3.1",ucs2:{decode:cP,encode:Doe},decode:fP,encode:hP,toASCII:Foe,toUnicode:Poe},Loe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},$oe={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Boe={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},zoe={default:Loe,zero:$oe,commonmark:Boe},Uoe=/^(vbscript|javascript|file|data):/,qoe=/^data:image\/(gif|png|jpeg|webp);/;function Hoe(e){const t=e.trim().toLowerCase();return Uoe.test(t)?qoe.test(t):!0}const mP=["http:","https:","mailto:"];function Voe(e){const t=Mk(e,!0);if(t.hostname&&(!t.protocol||mP.indexOf(t.protocol)>=0))try{t.hostname=pP.toASCII(t.hostname)}catch{}return W0(Dk(t))}function Goe(e){const t=Mk(e,!0);if(t.hostname&&(!t.protocol||mP.indexOf(t.protocol)>=0))try{t.hostname=pP.toUnicode(t.hostname)}catch{}return sh(Dk(t),sh.defaultChars+"%")}function yo(e,t){if(!(this instanceof yo))return new yo(e,t);t||Fk(e)||(t=e||{},e="default"),this.inline=new Z0,this.block=new cw,this.core=new $k,this.renderer=new Oh,this.linkify=new Yi,this.validateLink=Hoe,this.normalizeLink=Voe,this.normalizeLinkText=Goe,this.utils=Kae,this.helpers=lw({},Jae),this.options={},this.configure(e),t&&this.set(t)}yo.prototype.set=function(e){return lw(this.options,e),this};yo.prototype.configure=function(e){const t=this;if(Fk(e)){const n=e;if(e=zoe[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};yo.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};yo.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};yo.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};yo.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};yo.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};yo.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};yo.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const SS=new yo({html:!1,linkify:!0,breaks:!0});function Woe(e){return B.useMemo(()=>{var n;if(!e)return[];try{const r=SS.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const u=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:u,code:s.content}),o++}else{const u=[];for(;o<r.length&&r[o].type!=="fence";)u.push(r[o]),o++;u.length>0&&(i+=SS.renderer.render(u,SS.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const gP=({markdownContent:e,isStreaming:t=!1,className:n})=>{const r=zr(o=>o.enableStreamingMarkdown),a=Woe(e),i=B.useMemo(()=>a.map((o,s)=>{if(typeof o=="string")return y.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:o}},`html-${s}`);if(o.type==="code"){const u=o;return y.jsx(TD,{lang:u.lang,code:u.code},`code-${s}`)}return null}),[a,t]);return e!=null&&e.trim()?t&&!r?y.jsx("pre",{className:Ut("whitespace-pre-wrap text-sm",n),children:e}):y.jsx("div",{className:Ut(n),children:i}):y.jsx("div",{className:Ut("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."})},yP=wt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var v,w;const{dbProviderConfigs:i,getAllAvailableModelDefsForProvider:o}=fi(In(_=>({dbProviderConfigs:_.dbProviderConfigs,getAllAvailableModelDefsForProvider:_.getAllAvailableModelDefsForProvider}))),s=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},u=()=>{t&&t(e.id)},c=()=>{r&&r(e.id)},f=e.endedAt?HM(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=B.useMemo(()=>{var j;const _=(j=e.metadata)==null?void 0:j.modelId;if(!_)return"Unknown Model";const{providerId:x,modelId:S}=d0(_);if(!x||!S)return _;const E=i.find(N=>N.id===x),C=(E==null?void 0:E.name)??x,O=o(x).find(N=>N.id===S);return`${(O==null?void 0:O.name)??S} (${C})`},[(v=e.metadata)==null?void 0:v.modelId,i,o]),m=e.status==="COMPLETED"||e.status==="ERROR",g=e.status==="ERROR";return y.jsxs("div",{className:Ut("group relative rounded-lg border bg-card p-4 shadow-sm transition-colors hover:bg-muted/50",g?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&y.jsx(jk,{turnData:e.prompt,timestamp:e.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",h,")"]}),y.jsx("span",{className:"text-xs text-muted-foreground",children:f})]}),g&&((w=e.metadata)==null?void 0:w.error)&&y.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[y.jsx("p",{className:"font-semibold",children:"Error:"}),y.jsx("p",{children:e.metadata.error})]}),y.jsx(gP,{markdownContent:e.response,isStreaming:!1})]}),m&&y.jsx("div",{className:"absolute bottom-1 right-1 flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 bg-card/80 backdrop-blur-sm p-0.5 rounded",children:y.jsxs(On,{delayDuration:100,children:[r&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:c,"aria-label":"Edit User Prompt",children:y.jsx(WS,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]}),t&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:u,"aria-label":"Regenerate Response",children:y.jsx(yv,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Regenerate"})]}),n&&y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:s,"aria-label":"Delete Interaction",children:y.jsx(Ou,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})]})})]})});yP.displayName="InteractionCard";const Koe=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:r,size:n,onClick:e,className:t,"aria-label":a,children:y.jsx(s7,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Stop"})]})}),z2=wt.memo(({interactionId:e,onStop:t,className:n})=>{var c;const{interaction:r,bufferedContent:a}=er(In(f=>({interaction:f.interactions.find(m=>m.id===e),bufferedContent:f.activeStreamBuffers[e]??""}))),{dbProviderConfigs:i,getAllAvailableModelDefsForProvider:o}=fi(In(f=>({dbProviderConfigs:f.dbProviderConfigs,getAllAvailableModelDefsForProvider:f.getAllAvailableModelDefsForProvider}))),s=B.useMemo(()=>{var x;const f=(x=r==null?void 0:r.metadata)==null?void 0:x.modelId;if(!f)return"Loading Model...";const{providerId:h,modelId:m}=d0(f);if(!h||!m)return f;const g=i.find(S=>S.id===h),v=(g==null?void 0:g.name)??h,_=o(h).find(S=>S.id===m);return`${(_==null?void 0:_.name)??m} (${v})`},[(c=r==null?void 0:r.metadata)==null?void 0:c.modelId,i,o]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),y.jsxs("div",{className:Ut("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[y.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const u=()=>{t&&t(e)};return y.jsxs("div",{className:Ut("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&y.jsx(jk,{turnData:r.prompt,timestamp:r.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",s,")"]}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx(gP,{markdownContent:a,isStreaming:!0})]}),t&&y.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:y.jsx(Koe,{onStop:u,"aria-label":"Stop Generation"})})]})});z2.displayName="StreamingInteractionCard";var Zoe=B.createContext(void 0);function jh(e){const t=B.useContext(Zoe);return e||t||"ltr"}function Wm(e,[t,n]){return Math.min(n,Math.max(t,e))}function Yoe(e,t){return B.useReducer((n,r)=>t[n][r]??n,e)}var Uk="ScrollArea",[bP,Rge]=Ri(Uk),[Xoe,_o]=bP(Uk),vP=B.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,u]=B.useState(null),[c,f]=B.useState(null),[h,m]=B.useState(null),[g,v]=B.useState(null),[w,_]=B.useState(null),[x,S]=B.useState(0),[E,C]=B.useState(0),[A,O]=B.useState(!1),[j,N]=B.useState(!1),U=xn(t,J=>u(J)),V=jh(a);return y.jsx(Xoe,{scope:n,type:r,dir:V,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:f,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:O,scrollbarY:w,onScrollbarYChange:_,scrollbarYEnabled:j,onScrollbarYEnabledChange:N,onCornerWidthChange:S,onCornerHeightChange:C,children:y.jsx(an.div,{dir:V,...o,ref:U,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});vP.displayName=Uk;var wP="ScrollAreaViewport",_P=B.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=_o(wP,n),s=B.useRef(null),u=xn(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(an.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});_P.displayName=wP;var $s="ScrollAreaScrollbar",xP=B.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return B.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(Joe,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(Qoe,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(SP,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(qk,{...r,ref:t}):null});xP.displayName=$s;var Joe=B.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),[i,o]=B.useState(!1);return B.useEffect(()=>{const s=a.scrollArea;let u=0;if(s){const c=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Na,{present:n||i,children:y.jsx(SP,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Qoe=B.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=_o($s,e.__scopeScrollArea),i=e.orientation==="horizontal",o=hw(()=>u("SCROLL_END"),100),[s,u]=Yoe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return B.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,u]),B.useEffect(()=>{const c=a.viewport,f=i?"scrollLeft":"scrollTop";if(c){let h=c[f];const m=()=>{const g=c[f];h!==g&&(u("SCROLL"),o()),h=g};return c.addEventListener("scroll",m),()=>c.removeEventListener("scroll",m)}},[a.viewport,i,u,o]),y.jsx(Na,{present:n||s!=="hidden",children:y.jsx(qk,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:zt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:zt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),SP=B.forwardRef((e,t)=>{const n=_o($s,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=B.useState(!1),s=e.orientation==="horizontal",u=hw(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?c:f)}},10);return uh(n.viewport,u),uh(n.content,u),y.jsx(Na,{present:r||i,children:y.jsx(qk,{"data-state":i?"visible":"hidden",...a,ref:t})})}),qk=B.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=_o($s,e.__scopeScrollArea),i=B.useRef(null),o=B.useRef(0),[s,u]=B.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=TP(s.viewport,s.content),f={...r,sizes:s,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return ise(m,o.current,s,g)}return n==="horizontal"?y.jsx(ese,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=h4(m,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?y.jsx(tse,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=h4(m,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),ese=B.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=_o($s,e.__scopeScrollArea),[o,s]=B.useState(),u=B.useRef(null),c=xn(t,u,i.onScrollbarXChange);return B.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(kP,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),NP(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:iv(o.paddingLeft),paddingEnd:iv(o.paddingRight)}})}})}),tse=B.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=_o($s,e.__scopeScrollArea),[o,s]=B.useState(),u=B.useRef(null),c=xn(t,u,i.onScrollbarYChange);return B.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(kP,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),NP(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:iv(o.paddingTop),paddingEnd:iv(o.paddingBottom)}})}})}),[nse,EP]=bP($s),kP=B.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:f,onResize:h,...m}=e,g=_o($s,n),[v,w]=B.useState(null),_=xn(t,U=>w(U)),x=B.useRef(null),S=B.useRef(""),E=g.viewport,C=r.content-r.viewport,A=Ea(f),O=Ea(u),j=hw(h,10);function N(U){if(x.current){const V=U.clientX-x.current.left,J=U.clientY-x.current.top;c({x:V,y:J})}}return B.useEffect(()=>{const U=V=>{const J=V.target;(v==null?void 0:v.contains(J))&&A(V,C)};return document.addEventListener("wheel",U,{passive:!1}),()=>document.removeEventListener("wheel",U,{passive:!1})},[E,v,C,A]),B.useEffect(O,[r,O]),uh(v,j),uh(g.content,j),y.jsx(nse,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ea(i),onThumbPointerUp:Ea(o),onThumbPositionChange:O,onThumbPointerDown:Ea(s),children:y.jsx(an.div,{...m,ref:_,style:{position:"absolute",...m.style},onPointerDown:zt(e.onPointerDown,U=>{U.button===0&&(U.target.setPointerCapture(U.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),N(U))}),onPointerMove:zt(e.onPointerMove,N),onPointerUp:zt(e.onPointerUp,U=>{const V=U.target;V.hasPointerCapture(U.pointerId)&&V.releasePointerCapture(U.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),av="ScrollAreaThumb",CP=B.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=EP(av,e.__scopeScrollArea);return y.jsx(Na,{present:n||a.hasThumb,children:y.jsx(rse,{ref:t,...r})})}),rse=B.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=_o(av,n),o=EP(av,n),{onThumbPositionChange:s}=o,u=xn(t,h=>o.onThumbChange(h)),c=B.useRef(void 0),f=hw(()=>{c.current&&(c.current(),c.current=void 0)},100);return B.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(f(),!c.current){const g=ose(h,s);c.current=g,s()}};return s(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,f,s]),y.jsx(an.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:zt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,w=h.clientY-g.top;o.onThumbPointerDown({x:v,y:w})}),onPointerUp:zt(e.onPointerUp,o.onThumbPointerUp)})});CP.displayName=av;var Hk="ScrollAreaCorner",AP=B.forwardRef((e,t)=>{const n=_o(Hk,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(ase,{...e,ref:t}):null});AP.displayName=Hk;var ase=B.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=_o(Hk,n),[i,o]=B.useState(0),[s,u]=B.useState(0),c=!!(i&&s);return uh(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),uh(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),c?y.jsx(an.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function iv(e){return e?parseInt(e,10):0}function TP(e,t){const n=e/t;return isNaN(n)?0:n}function fw(e){const t=TP(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ise(e,t,n,r="ltr"){const a=fw(n),i=a/2,o=t||i,s=a-o,u=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return RP([u,c],h)(e)}function h4(e,t,n="ltr"){const r=fw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,u=n==="ltr"?[0,o]:[o*-1,0],c=Wm(e,u);return RP([0,o],[0,s])(c)}function RP(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function NP(e,t){return e>0&&e<t}var ose=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function hw(e,t){const n=Ea(e),r=B.useRef(0);return B.useEffect(()=>()=>window.clearTimeout(r.current),[]),B.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function uh(e,t){const n=Ea(t);Fa(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var sse=vP,lse=_P,use=AP;function pw({className:e,children:t,...n}){return y.jsxs(sse,{"data-slot":"scroll-area",className:Ut("relative",e),...n,children:[y.jsx(lse,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(cse,{}),y.jsx(use,{})]})}function cse({className:e,orientation:t="vertical",...n}){return y.jsx(xP,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Ut("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(CP,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Aa({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:Ut("bg-accent animate-pulse rounded-md",e),...t})}const dse=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:o})=>{const s=B.useRef(null),u=er(h=>h.streamingInteractionIds),c=B.useMemo(()=>{const h=[],m=new Set;return[...t].sort((v,w)=>v.index-w.index).forEach(v=>{if(m.has(v.id))return;const w=[v];m.add(v.id),h.push(w)}),h},[t]);B.useEffect(()=>{var m;const h=(m=s.current)==null?void 0:m.querySelector("[data-radix-scroll-area-viewport]");if(h){const{scrollHeight:g,clientHeight:v,scrollTop:w}=h,_=g-v<=w+100,x=n==="streaming"&&u.length>0;(_||x)&&h.scrollTo({top:g,behavior:"smooth"})}},[t,n,u]);const f=()=>n==="loading"?y.jsxs("div",{className:"space-y-4 p-4",children:[y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-32 w-full"}),y.jsx(Aa,{className:"h-20 w-full"})]}):e?t.length===0&&n!=="streaming"?y.jsx("div",{className:"flex h-full items-center justify-center",children:y.jsx("p",{className:"text-muted-foreground",children:"No messages yet."})}):y.jsxs("div",{className:"space-y-4 p-4",children:[c.map(h=>{const m=h[0];return u.includes(m.id)?y.jsx(z2,{interactionId:m.id,onStop:o},`${m.id}-streaming`):y.jsx(yP,{interaction:m,onEdit:i,onRegenerate:a,onDelete:m.type==="message.user_assistant"?er.getState().deleteInteraction:void 0},m.id)}),n==="streaming"&&u.filter(h=>!t.some(m=>m.id===h)).map(h=>y.jsx(z2,{interactionId:h,onStop:o},`${h}-streaming-new`))]}):y.jsx("div",{className:"flex h-full items-center justify-center",children:y.jsx("p",{className:"text-muted-foreground",children:"Select a conversation or start a new one."})});return y.jsx(pw,{className:Ut("flex-grow",r),ref:s,children:f()})},Kp=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0)).sort((i,o)=>(i.order??1/0)-(o.order??1/0));return a.length===0?null:y.jsx("div",{className:Ut(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(wt.Fragment,{children:o?o():null},i.id)})})},fse=".litechat/conversations",IP="/synced_repos";async function hse(e,t,n){n(t.id,"syncing");const r=Wn(`${IP}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let o=!1;try{await e.promises.stat(Ms(r,".git")),o=!0}catch(s){if(s.code==="ENOENT")o=!1;else throw s}o?(ct.info(`Pulling latest changes for "${t.name}"...`),await iw(r,i,a),ct.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(ct.info(`Cloning repository "${t.name}"...`),await IM(r,t.remoteUrl,i,a),ct.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(o){console.error(`Failed to initialize/sync repository ${t.name}:`,o),n(t.id,"error")}}async function pse(e,t,n,r,a,i,o){var h,m;r(t.id,"syncing");const s=Wn(`${IP}/${n.id}`),u=Ms(s,fse,`${t.id}.json`),c={username:n.username,password:n.password},f=n.branch||"main";try{try{await e.promises.stat(Ms(s,".git"))}catch(x){if(x.code==="ENOENT"){ct.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}ct.info(`Pulling latest changes for "${n.name}"...`),await iw(s,f,c);let g=null,v=null;try{const x=await Ih(u),S=new TextDecoder().decode(x);g=JSON.parse(S),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${u} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),ct.warning(`Could not read remote version of conversation: ${x.message}`))}const w=t.updatedAt.getTime(),_=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!g||w>(v??0)||w>_&&w>=(v??0)){ct.info("Local changes detected. Pushing to remote...");const x=await Ht.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:x},null,2);await ow(u,C),await Rk(s,`Sync conversation: ${t.title} (${t.id})`),await Nk(s,f,c),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),ct.success("Conversation synced successfully (pushed).")}else if(v&&v>w){ct.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await Ht.saveConversation(x),await Ht.deleteInteractionsForConversation(t.id);const S=g.interactions.map(E=>Ht.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&o()==="conversation"&&await er.getState().loadInteractions(t.id),r(t.id,"idle"),ct.success("Conversation synced successfully (pulled).")}else ct.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const _l=Go(Wo((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await Ht.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed load projects",isLoading:!1})}},addProject:async n=>{const r=n.parentId??null,a=t().getProjectById(r),i=a?a.path:"/",o=n.name.trim(),s=jm(i,o),u=$o(),c=new Date,f={id:u,path:s,createdAt:c,updatedAt:c,name:o,parentId:r,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(h=>{h.projects.push(f)});try{const h=t().getProjectById(u);if(h){const m=JSON.parse(JSON.stringify(h));await Ht.saveProject(m)}else throw new Error("Failed to retrieve newly added project state");return u}catch(h){throw console.error("ProjectStore: Error adding project",h),h.name==="ConstraintError"?ct.error(`A project or folder named "${o}" already exists in this location.`):ct.error("Failed to save new project."),e(m=>({error:"Failed to save new project",projects:m.projects.filter(g=>g.id!==u)})),h}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found.`);return}let i=a.path,o=a.name;if(r.name!==void 0&&r.name!==a.name){o=r.name.trim();const u=t().getProjectById(a.parentId),c=u?u.path:"/";i=jm(c,o)}e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&Object.assign(u.projects[c],{...r,name:o,path:i,updatedAt:new Date})});const s=t().getProjectById(n);if(s)try{const u=JSON.parse(JSON.stringify(s));await Ht.saveProject(u)}catch(u){throw console.error("ProjectStore: Error updating project",u),u.name==="ConstraintError"?ct.error(`A project or folder named "${o}" already exists in this location.`):ct.error("Failed to save project update."),e(c=>{const f=c.projects.findIndex(h=>h.id===n);f!==-1&&(c.projects[f]=a),c.error="Failed to save project update"}),u}else console.error("ProjectStore: Failed to retrieve updated project state after update."),e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&(u.projects[c]=a),u.error="Failed to save project update (state error)"})},deleteProject:async n=>{if(!t().projects.find(o=>o.id===n))return;const a=new Set,i=o=>{a.add(o),t().projects.filter(s=>s.parentId===o).forEach(s=>i(s.id))};i(n),e(o=>({projects:o.projects.filter(s=>!a.has(s.id))})),dr.getState()._unlinkConversationsFromProjects(Array.from(a));try{await Ht.deleteProject(n)}catch(o){throw console.error("ProjectStore: Error deleting project",o),e({error:"Failed to delete project. Please reload."}),o}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getEffectiveProjectSettings:n=>{const r=zr.getState(),a=fi.getState(),i={systemPrompt:r.globalSystemPrompt,modelId:a.selectedModelId,temperature:r.temperature,maxTokens:r.maxTokens,topP:r.topP,topK:r.topK,presencePenalty:r.presencePenalty,frequencyPenalty:r.frequencyPenalty};if(!n)return i;const o=[];let s=n;for(;s;){const c=t().getProjectById(s);c?(o.unshift(c),s=c.parentId):s=null}return o.reduce((c,f)=>({systemPrompt:f.systemPrompt!==void 0&&f.systemPrompt!==null?f.systemPrompt:c.systemPrompt,modelId:f.modelId!==void 0&&f.modelId!==null?f.modelId:c.modelId,temperature:f.temperature!==void 0&&f.temperature!==null?f.temperature:c.temperature,maxTokens:f.maxTokens!==void 0&&f.maxTokens!==null?f.maxTokens:c.maxTokens,topP:f.topP!==void 0&&f.topP!==null?f.topP:c.topP,topK:f.topK!==void 0&&f.topK!==null?f.topK:c.topK,presencePenalty:f.presencePenalty!==void 0&&f.presencePenalty!==null?f.presencePenalty:c.presencePenalty,frequencyPenalty:f.frequencyPenalty!==void 0&&f.frequencyPenalty!==null?f.frequencyPenalty:c.frequencyPenalty}),i)},getTopLevelProjectId:n=>{if(!n)return null;let r=t().getProjectById(n);for(;r!=null&&r.parentId;){const a=t().getProjectById(r.parentId);if(!a)return r.id;r=a}return(r==null?void 0:r.id)??null}}))),ES=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},mse=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${KI(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${KI(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,u,c,f,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(u=r.prompt.metadata)!=null&&u.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${qb(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((f=r.metadata)!=null&&f.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class $y{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const o=i.conversation,s=i.interactions;if(!o.id||!o.title||!o.createdAt||!o.updatedAt)throw new Error("Invalid conversation data in import file.");const u=await n({title:o.title||"Imported Chat",metadata:o.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),c=s.map(f=>Ht.saveInteraction({...f,conversationId:u,id:$o()}));await Promise.all(c),await r(u,"conversation"),ct.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),ct.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=dr.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await Ht.loadInteractionsForConversation(t);let i,o;const s=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const c=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([c],{type:"application/json"}),o=`litechat_conversation_${s}_${t.substring(0,6)}.json`}else if(n==="md"){const u=mse(r,a);i=new Blob([u],{type:"text/markdown"}),o=`litechat_conversation_${s}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");ES(i,o),ct.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),ct.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=_l.getState(),{conversations:a}=dr.getState(),i=r(t);if(!i)throw new Error("Project not found.");const o=async m=>{const g=n.find(x=>x.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const v=n.filter(x=>x.parentId===m),w=a.filter(x=>x.projectId===m),_=[];for(const x of v)_.push(await o(x.id));for(const x of w){const S=await Ht.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(t),u=JSON.stringify(s,null,2),c=new Blob([u],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;ES(c,h),ct.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),ct.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=dr.getState().conversations,n=[];for(const o of t){const s=await Ht.loadInteractionsForConversation(o.id);n.push({conversation:o,interactions:s})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;ES(a,i),ct.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),ct.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}}const kS="sync_repos",Gi=Go(Wo((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&ct.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(u=>u.parentId===a).map(u=>u.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null})},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),n!==null?t().initializeVFS(n):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async n=>{if(!n){console.warn("[VfsStore] initializeVFS called without a valid vfsKey.");return}if(t().vfsKey!==n){console.warn(`[VfsStore] Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`);return}if(t().initializingKey!==null){console.warn(`[VfsStore] Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`);return}if(t().configuredVfsKey===n&&t().fs){console.log(`[VfsStore] Initialization skipped for key "${n}" (already configured).`),e({loading:!1});return}const{_setLoading:r,_setError:a,_addNodes:i,_setFsInstance:o,_setConfiguredVfsKey:s}=t();console.log(`[VfsStore] Initializing VFS with key: ${n}`),e({initializingKey:n}),r(!0),a(null);try{const u=await DM(n);if(!u)throw new Error("Filesystem backend initialization failed.");if(t().vfsKey!==n){console.warn(`[VfsStore] Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`),e({initializingKey:null,loading:!1});return}o(u),s(n),console.log(`[VfsStore] VFS instance configured for key: ${n}`);const c="vfs-root";let f=t().nodes[c];try{await u.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(h){if(h.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw h}if(!f||f.path!=="/"){const h=Date.now();f={id:c,parentId:null,name:"",path:"/",type:"folder",createdAt:h,lastModified:h},i([f]),console.log("[VfsStore] Root node added/updated in state.")}e(h=>{h.rootId=f.id,h.currentParentId=f.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${f.id}`),await t().fetchNodes(f.id)}catch(u){console.error(`Failed to initialize VFS for key ${n}:`,u),t().initializingKey===n&&(a(`Failed to initialize VFS (${n}).`),o(null),s(null))}finally{t().initializingKey===n&&e({initializingKey:null,loading:!1})}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:u,configuredVfsKey:c,vfsKey:f,initializingKey:h}=t();if(!o||c!==f||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!o}, Match: ${c===f}, Init: ${h}`);return}r(!0);try{const m=n?s[n]:s[u||""],g=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${c})`);const v=await Ik(g);console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const w=n??u??"",_=new Set(v.map(A=>A.path)),E=(t().childrenMap[w]||[]).map(A=>t().nodes[A]).filter(Boolean).filter(A=>!_.has(A.path)).map(A=>A.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(A=>{const O=Object.values(t().nodes).find(N=>N.path===A.path),j=Date.now();return{id:(O==null?void 0:O.id)||$o(),parentId:n,name:A.name,path:A.path,type:A.isDirectory?"folder":"file",size:A.size,createdAt:(O==null?void 0:O.createdAt)??j,lastModified:A.lastModified.getTime(),mimeType:A.isDirectory?void 0:A.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(A=>{const O=C.map(j=>j.id);(!A.childrenMap[w]||JSON.stringify(A.childrenMap[w].sort())!==JSON.stringify(O.sort()))&&(A.childrenMap[w]=O,console.log(`[VfsStore] Updated childrenMap for parent: ${w}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Wn(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:o}=t();if(!o||t().vfsKey!==t().configuredVfsKey)return;const s=Wn(n),u=r(s);u&&u.type==="folder"?(e(c=>{c.currentParentId=u.id}),t().childrenMap[u.id]||await a(u.id)):s==="/"&&i?(e(c=>{c.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,_addNodes:c,configuredVfsKey:f,vfsKey:h}=t();if(!o||f!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const m=n?s[n]:s[u||""],g=m?m.path:"/",v=jm(g,r.trim());try{throw await o.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await MM(v);const w=Date.now(),x={id:$o(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:w,lastModified:w};c([x])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,configuredVfsKey:c,vfsKey:f}=t();if(!o||c!==f){i("Filesystem not ready.");return}a(!0);try{const h=n?s[n]:s[u||""],m=h?h.path:"/";await PM(Array.from(r),m),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o,configuredVfsKey:s,vfsKey:u}=t();if(!o||s!==u){a("Filesystem not ready.");return}r(!0);try{const c=n.map(f=>t().nodes[f]).filter(Boolean);for(const f of c)await Ok(f.path,f.type==="folder");i(n)}catch(c){console.error("Failed to delete nodes:",c),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:u,rootId:c,configuredVfsKey:f,vfsKey:h}=t();if(!u||f!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=s[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){a(!0);try{const g=m.parentId?s[m.parentId]:s[c||""],v=g?g.path:"/",w=jm(v,r.trim());try{throw await u.promises.stat(w),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await FM(m.path,w);const _={name:r.trim(),path:w,lastModified:Date.now()};o(n,_)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:o,vfsKey:s}=t();if(!a||o!==s)return i("Filesystem not ready."),null;const u=r[n];if(!u||u.type!=="file")return i("File not found."),null;try{const c=await Ih(u.path),f=u.mimeType||"application/octet-stream",h=new Blob([c],{type:f});return{name:u.name,blob:h}}catch(c){return console.error("Failed to download file:",c),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),gse="/synced_repos",dr=Go(Wo((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{const n=Gi.getState();if(n.fs&&n.configuredVfsKey===kS&&!n.loading)return n.fs;console.log(`[ConversationStore] Sync VFS not ready (key: ${n.configuredVfsKey}, fs: ${!!n.fs}, loading: ${n.loading}). Initializing...`);try{await n.initializeVFS(kS);const r=Gi.getState();if(r.fs&&r.configuredVfsKey===kS)return console.log("[ConversationStore] Sync VFS initialized successfully."),r.fs;throw new Error("VFS initialization did not complete successfully.")}catch(r){return console.error("[ConversationStore] Failed to ensure Sync VFS:",r),ct.error(`Filesystem error for sync: ${r instanceof Error?r.message:String(r)}`),null}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await _l.getState().loadProjects();const[n,r]=await Promise.all([Ht.loadConversations(),Ht.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const o=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,s=i.updatedAt instanceof Date?i.updatedAt.getTime():null;o?s&&s>o?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=$o(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const o=t().getConversationById(r);if(o)await Ht.saveConversation(o);else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(u=>u.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([u])=>u!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){const u=o.conversations[s].metadata??{},c=r.metadata??{},f={...u,...c};Object.assign(o.conversations[s],{...r,metadata:f,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),m=o.conversations[s].lastSyncedAt instanceof Date?o.conversations[s].lastSyncedAt.getTime():null,g=o.conversations[s].updatedAt.getTime();"syncRepoId"in r?o.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(!m||g>m)&&(o.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Ht.saveConversation(o)}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const u=s.conversations.findIndex(c=>c.id===n);if(u!==-1){s.conversations[u]=a;const c=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,f=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&c&&f<=c?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){o.conversations[s]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,c=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&c<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Ht.deleteConversation(n),await Ht.deleteInteractionsForConversation(n),r===n&&a==="conversation"&&await er.getState().setCurrentConversationId(null)}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{if(i){s.conversations.push(i);const u=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,c=i.updatedAt.getTime();s.conversationSyncStatus[n]=i.syncRepoId&&u&&c<=u?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await er.getState().setCurrentConversationId(r==="conversation"?n:null)):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await $y.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await $y.exportConversation(n,r)},exportProject:async n=>{await $y.exportProject(n)},exportAllConversations:async()=>{await $y.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Ht.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=$o(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Ht.saveSyncRepo(s)}else throw new Error("Failed to retrieve newly added sync repo state");return ct.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(u=>u.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,branch:r.branch||o.syncRepos[s].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Ht.saveSyncRepo(o),ct.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const u=s.syncRepos.findIndex(c=>c.id===n);u!==-1&&(s.syncRepos[u]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(o=>o.id===n);if(!r)return;const a=Wn(`${gse}/${n}`);if(!await t()._ensureSyncVfsReady()){ct.error("Filesystem not ready, cannot delete repository folder.");return}e(o=>({syncRepos:o.syncRepos.filter(s=>s.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(o.repoInitializationStatus).filter(([s])=>s!==n))}));try{await Ht.deleteSyncRepo(n),ct.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await Ok(a,!0),ct.info(`Removed local sync folder for "${r.name}".`)}catch(o){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,o),o.code!=="ENOENT"&&ct.warning(`Failed to remove local sync folder: ${o.message}`)}}catch(o){throw console.error("ConversationStore: Error deleting sync repo",o),e(s=>{r&&s.syncRepos.push(r),s.error="Failed to delete sync repository"}),o}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),ct.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){ct.error("Sync repository configuration not found.");return}const a=await t()._ensureSyncVfsReady();if(!a){t()._setRepoInitializationStatus(n,"error");return}await hse(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){ct.error("Conversation not found for syncing.");return}if(!r.syncRepoId){ct.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(s=>s.id===r.syncRepoId);if(!a){ct.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}const i=await t()._ensureSyncVfsReady();if(!i){t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await pse(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const o=t().getConversationById(n);o&&e(s=>{const u=s.conversations.findIndex(c=>c.id===n);u!==-1&&(s.conversations[u]=o)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const o=t().getConversationById(r);if(!o){console.warn("Cannot update tool settings: Selected conversation not found.");return}const s=o.metadata??{},u={...s};n.enabledTools!==void 0&&(u.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(u.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(u)!==JSON.stringify(s)||!o.metadata)&&await i(r,{metadata:u})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}}))),yse=Symbol("Let zodToJsonSchema decide on which parser to use"),p4={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},bse=e=>typeof e=="string"?{...p4,name:e}:{...p4,...e},vse=e=>{const t=bse(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function OP(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function fr(e,t,n,r,a){e[t]=n,OP(e,t,r,a)}function wse(){return{}}function _se(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==$t.ZodAny&&(n.items=rr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&fr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&fr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(fr(n,"minItems",e.exactLength.value,e.exactLength.message,t),fr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function xse(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?fr(n,"minimum",r.value,r.message,t):fr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),fr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?fr(n,"maximum",r.value,r.message,t):fr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),fr(n,"maximum",r.value,r.message,t));break;case"multipleOf":fr(n,"multipleOf",r.value,r.message,t);break}return n}function Sse(){return{type:"boolean"}}function jP(e,t){return rr(e.type._def,t)}const Ese=(e,t)=>rr(e.innerType._def,t);function DP(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>DP(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return kse(e,t)}}const kse=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":fr(n,"minimum",r.value,r.message,t);break;case"max":fr(n,"maximum",r.value,r.message,t);break}return n};function Cse(e,t){return{...rr(e.innerType._def,t),default:e.defaultValue()}}function Ase(e,t){return t.effectStrategy==="input"?rr(e.schema._def,t):{}}function Tse(e){return{type:"string",enum:Array.from(e.values)}}const Rse=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Nse(e,t){const n=[rr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),rr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(Rse(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...u}=i;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function Ise(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let CS;const To={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(CS===void 0&&(CS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),CS),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function MP(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":fr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":fr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ro(n,"email",r.message,t);break;case"format:idn-email":Ro(n,"idn-email",r.message,t);break;case"pattern:zod":si(n,To.email,r.message,t);break}break;case"url":Ro(n,"uri",r.message,t);break;case"uuid":Ro(n,"uuid",r.message,t);break;case"regex":si(n,r.regex,r.message,t);break;case"cuid":si(n,To.cuid,r.message,t);break;case"cuid2":si(n,To.cuid2,r.message,t);break;case"startsWith":si(n,RegExp(`^${AS(r.value,t)}`),r.message,t);break;case"endsWith":si(n,RegExp(`${AS(r.value,t)}$`),r.message,t);break;case"datetime":Ro(n,"date-time",r.message,t);break;case"date":Ro(n,"date",r.message,t);break;case"time":Ro(n,"time",r.message,t);break;case"duration":Ro(n,"duration",r.message,t);break;case"length":fr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),fr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{si(n,RegExp(AS(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Ro(n,"ipv4",r.message,t),r.version!=="v4"&&Ro(n,"ipv6",r.message,t);break}case"base64url":si(n,To.base64url,r.message,t);break;case"jwt":si(n,To.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&si(n,To.ipv4Cidr,r.message,t),r.version!=="v4"&&si(n,To.ipv6Cidr,r.message,t);break}case"emoji":si(n,To.emoji(),r.message,t);break;case"ulid":{si(n,To.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Ro(n,"binary",r.message,t);break}case"contentEncoding:base64":{fr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{si(n,To.base64,r.message,t);break}}break}case"nanoid":si(n,To.nanoid,r.message,t)}return n}function AS(e,t){return t.patternStrategy==="escape"?jse(e):e}const Ose=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function jse(e){let t="";for(let n=0;n<e.length;n++)Ose.has(e[n])||(t+="\\"),t+=e[n];return t}function Ro(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):fr(e,"format",t,n,r)}function si(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:m4(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):fr(e,"pattern",m4(t,r),n,r)}function m4(e,t){var u;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){s?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),s=!1):r[c+1]==="-"&&((u=r[c+2])!=null&&u.match(/[a-z]/))?(a+=r[c],s=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function PP(e,t){var r,a,i,o,s,u;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===$t.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,f)=>({...c,[f]:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",f]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===$t.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...f}=MP(e.keyType._def,t);return{...n,propertyNames:f}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===$t.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===$t.ZodBranded&&e.keyType._def.type._def.typeName===$t.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=jP(e.keyType._def,t);return{...n,propertyNames:f}}}return n}function Dse(e,t){if(t.mapStrategy==="record")return PP(e,t);const n=rr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Mse(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Pse(){return{not:{}}}function Fse(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const ov={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Lse(e,t){if(t.target==="openApi3")return g4(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in ov&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=ov[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return g4(e,t)}const g4=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>rr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function $se(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:ov[e.innerType._def.typeName],nullable:!0}:{type:[ov[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=rr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=rr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Bse(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",OP(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?fr(n,"minimum",r.value,r.message,t):fr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),fr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?fr(n,"maximum",r.value,r.message,t):fr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),fr(n,"maximum",r.value,r.message,t));break;case"multipleOf":fr(n,"multipleOf",r.value,r.message,t);break}return n}function zse(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let u=i[s];if(u===void 0||u._def===void 0)continue;let c=qse(u);c&&n&&(u instanceof Po&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),c=!1);const f=rr(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});f!==void 0&&(r.properties[s]=f,c||a.push(s))}a.length&&(r.required=a);const o=Use(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Use(e,t){if(e.catchall._def.typeName!=="ZodNever")return rr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function qse(e){try{return e.isOptional()}catch{return!0}}const Hse=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return rr(e.innerType._def,t);const n=rr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Vse=(e,t)=>{if(t.pipeStrategy==="input")return rr(e.in._def,t);if(t.pipeStrategy==="output")return rr(e.out._def,t);const n=rr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=rr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Gse(e,t){return rr(e.type._def,t)}function Wse(e,t){const r={type:"array",uniqueItems:!0,items:rr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&fr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&fr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Kse(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>rr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:rr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>rr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Zse(){return{not:{}}}function Yse(){return{}}const Xse=(e,t)=>rr(e.innerType._def,t),Jse=(e,t,n)=>{switch(t){case $t.ZodString:return MP(e,n);case $t.ZodNumber:return Bse(e,n);case $t.ZodObject:return zse(e,n);case $t.ZodBigInt:return xse(e,n);case $t.ZodBoolean:return Sse();case $t.ZodDate:return DP(e,n);case $t.ZodUndefined:return Zse();case $t.ZodNull:return Fse(n);case $t.ZodArray:return _se(e,n);case $t.ZodUnion:case $t.ZodDiscriminatedUnion:return Lse(e,n);case $t.ZodIntersection:return Nse(e,n);case $t.ZodTuple:return Kse(e,n);case $t.ZodRecord:return PP(e,n);case $t.ZodLiteral:return Ise(e,n);case $t.ZodEnum:return Tse(e);case $t.ZodNativeEnum:return Mse(e);case $t.ZodNullable:return $se(e,n);case $t.ZodOptional:return Hse(e,n);case $t.ZodMap:return Dse(e,n);case $t.ZodSet:return Wse(e,n);case $t.ZodLazy:return()=>e.getter()._def;case $t.ZodPromise:return Gse(e,n);case $t.ZodNaN:case $t.ZodNever:return Pse();case $t.ZodEffects:return Ase(e,n);case $t.ZodAny:return wse();case $t.ZodUnknown:return Yse();case $t.ZodDefault:return Cse(e,n);case $t.ZodBranded:return jP(e,n);case $t.ZodReadonly:return Xse(e,n);case $t.ZodCatch:return Ese(e,n);case $t.ZodPipeline:return Vse(e,n);case $t.ZodFunction:case $t.ZodVoid:case $t.ZodSymbol:return;default:return(r=>{})()}};function rr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(u!==yse)return u}if(r&&!n){const u=Qse(r,t);if(u!==void 0)return u}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Jse(e,e.typeName,t),o=typeof i=="function"?rr(i(),t):i;if(o&&tle(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return a.jsonSchema=o,u}return a.jsonSchema=o,o}const Qse=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:ele(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},ele=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},tle=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),nle=(e,t)=>{const n=vse(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,f])=>({...u,[c]:rr(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=rr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var Km={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Zm={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Ym={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},Xm={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},Jm={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},rle=[Km,Zm,Ym,Xm,Jm];Km.code+"",Zm.code+"",Ym.code+"",Xm.code+"",Jm.code+"";Km.name+"",Km.code,Zm.name+"",Zm.code,Ym.name+"",Ym.code,Xm.name+"",Xm.code,Jm.name+"",Jm.code;rle.map(e=>e.code);function ale(e){const t=["ROOT"];let n=-1,r=null;function a(u,c,f){switch(u){case'"':{n=c,t.pop(),t.push(f),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START");break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function o(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":a(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=u,t.pop();break}default:{n=u,a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}default:{n=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,u+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u)):n=u;break}}}let s=e.slice(0,n+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?s+="true".slice(f.length):"false".startsWith(f)?s+="false".slice(f.length):"null".startsWith(f)&&(s+="null".slice(f.length))}}return s}function ile(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Yc({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Yc({text:ale(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var ole={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},sle={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},lle={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ule={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},cle={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},dle={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},fle={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},hle={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},ple={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},mle={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},gle={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},yle={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},ble={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},vle={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},wle={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},_le={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},mw=[ole,sle,lle,ule,cle,dle,fle,hle,ple,mle,gle,yle,ble,vle,wle,_le];Object.fromEntries(mw.map(e=>[e.code,e]));Object.fromEntries(mw.map(e=>[e.name,e.code]));mw.map(e=>e.code);function Ha(e,t){const n=mw.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function xle(e,t){var n;const r=(n=void 0)!=null?n:!1;return Sle(nle(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var U2=Symbol.for("vercel.ai.schema");function Sle(e,{validate:t}={}){return{[U2]:!0,_type:void 0,[ub]:!0,jsonSchema:e,validate:t}}function Ele(e){return typeof e=="object"&&e!==null&&U2 in e&&e[U2]===!0&&"jsonSchema"in e&&"validate"in e}function gw(e){return Ele(e)?e:xle(e)}const y4=globalThis||void 0||self;var kle=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof y4=="object"?y4:{},Gc="1.9.0",b4=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Cle(e){var t=new Set([e]),n=new Set,r=e.match(b4);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(u){return u===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(b4);if(!c)return i(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||a.major!==f.major?i(u):a.major===0?a.minor===f.minor&&a.patch<=f.patch?o(u):i(u):a.minor<=f.minor?o(u):i(u)}}var Ale=Cle(Gc),Tle=Gc.split(".")[0],Qm=Symbol.for("opentelemetry.js.api."+Tle),e0=kle;function Vk(e,t,n,r){var a;r===void 0&&(r=!1);var i=e0[Qm]=(a=e0[Qm])!==null&&a!==void 0?a:{version:Gc};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==Gc){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Gc);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Gc+"."),!0}function t0(e){var t,n,r=(t=e0[Qm])===null||t===void 0?void 0:t.version;if(!(!r||!Ale(r)))return(n=e0[Qm])===null||n===void 0?void 0:n[e]}function Gk(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Gc+".");var n=e0[Qm];n&&delete n[e]}var Rle=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Nle=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ile=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zp("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zp("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zp("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zp("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zp("verbose",this._namespace,t)},e}();function Zp(e,t,n){var r=t0("diag");if(r)return n.unshift(t),r[e].apply(r,Nle([],Rle(n),!1))}var zi;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(zi||(zi={}));function Ole(e,t){e<zi.NONE?e=zi.NONE:e>zi.ALL&&(e=zi.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",zi.ERROR),warn:n("warn",zi.WARN),info:n("info",zi.INFO),debug:n("debug",zi.DEBUG),verbose:n("verbose",zi.VERBOSE)}}var jle=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Dle=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Mle="diag",sv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=t0("diag");if(s)return s[a].apply(s,Dle([],jle(i),!1))}}var n=this,r=function(a,i){var o,s,u;if(i===void 0&&(i={logLevel:zi.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var f=t0("diag"),h=Ole((s=i.logLevel)!==null&&s!==void 0?s:zi.INFO,a);if(f&&!i.suppressOverrideMessage){var m=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return Vk("diag",h,n,!0)};n.setLogger=r,n.disable=function(){Gk(Mle,n)},n.createComponentLogger=function(a){return new Ile(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Ple(e){return Symbol.for(e)}var Fle=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Lle=new Fle,$le=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Ble=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},zle=function(){function e(){}return e.prototype.active=function(){return Lle},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Ble([r],$le(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Ule=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},qle=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},TS="context",Hle=new zle,FP=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Vk(TS,t,sv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,qle([t,n,r],Ule(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return t0(TS)||Hle},e.prototype.disable=function(){this._getContextManager().disable(),Gk(TS,sv.instance())},e}(),q2;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(q2||(q2={}));var LP="0000000000000000",$P="00000000000000000000000000000000",Vle={traceId:$P,spanId:LP,traceFlags:q2.NONE},nm=function(){function e(t){t===void 0&&(t=Vle),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),Wk=Ple("OpenTelemetry Context Key SPAN");function Kk(e){return e.getValue(Wk)||void 0}function Gle(){return Kk(FP.getInstance().active())}function Zk(e,t){return e.setValue(Wk,t)}function Wle(e){return e.deleteValue(Wk)}function Kle(e,t){return Zk(e,new nm(t))}function BP(e){var t;return(t=Kk(e))===null||t===void 0?void 0:t.spanContext()}var Zle=/^([0-9a-f]{32})$/i,Yle=/^[0-9a-f]{16}$/i;function Xle(e){return Zle.test(e)&&e!==$P}function Jle(e){return Yle.test(e)&&e!==LP}function zP(e){return Xle(e.traceId)&&Jle(e.spanId)}function Qle(e){return new nm(e)}var RS=FP.getInstance(),UP=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=RS.active());var a=!!(n!=null&&n.root);if(a)return new nm;var i=r&&BP(r);return eue(i)&&zP(i)?new nm(i):new nm},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var u=o??RS.active(),c=this.startSpan(t,i,u),f=Zk(u,c);return RS.with(f,s,void 0,c)}},e}();function eue(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var tue=new UP,nue=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):tue},e}(),rue=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new UP},e}(),aue=new rue,v4=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new nue(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:aue},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),lv;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(lv||(lv={}));var NS="trace",iue=function(){function e(){this._proxyTracerProvider=new v4,this.wrapSpanContext=Qle,this.isSpanContextValid=zP,this.deleteSpan=Wle,this.getSpan=Kk,this.getActiveSpan=Gle,this.getSpanContext=BP,this.setSpan=Zk,this.setSpanContext=Kle}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Vk(NS,this._proxyTracerProvider,sv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return t0(NS)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Gk(NS,sv.instance()),this._proxyTracerProvider=new v4},e}(),oue=iue.getInstance(),sue=Object.defineProperty,Yk=(e,t)=>{for(var n in t)sue(e,n,{get:t[n],enumerable:!0})};function uv(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function w4(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function _4({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:u}=await i.read();if(s)break;e.write(u)}}catch(s){throw s}finally{e.end()}})()}var qP="AI_InvalidArgumentError",HP=`vercel.ai.error.${qP}`,lue=Symbol.for(HP),VP,Io=class extends Sn{constructor({parameter:e,value:t,message:n}){super({name:qP,message:`Invalid argument for parameter ${e}: ${n}`}),this[VP]=!0,this.parameter=e,this.value=t}static isInstance(e){return Sn.hasMarker(e,HP)}};VP=lue;var GP="AI_RetryError",WP=`vercel.ai.error.${GP}`,uue=Symbol.for(WP),KP,x4=class extends Sn{constructor({message:e,reason:t,errors:n}){super({name:GP,message:e}),this[KP]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Sn.hasMarker(e,WP)}};KP=uue;var cue=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>ZP(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function ZP(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Ky(i)||t===0)throw i;const o=mU(i),s=[...a,i],u=s.length;if(u>t)throw new x4({message:`Failed after ${u} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&fa.isInstance(i)&&i.isRetryable===!0&&u<=t)return await fU(n),ZP(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw u===1?i:new x4({message:`Failed after ${u} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function due({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Io({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Io({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:cue({maxRetries:t})}}function H2({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function fue({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var hue={startSpan(){return By},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(By);if(typeof n=="function")return n(By);if(typeof r=="function")return r(By)}},By={spanContext(){return pue},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},pue={traceId:"",spanId:"",traceFlags:0};function mue({isEnabled:e=!1,tracer:t}={}){return e?t||oue.getTracer("ai"):hue}function V2({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:lv.ERROR,message:o.message})):i.setStatus({code:lv.ERROR})}finally{i.end()}throw o}})}function Nf({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var gue=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=zf(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=iO(this.base64Data)),this.uint8ArrayData}},yue=class extends gue{constructor(e){super(e),this.type="file"}},bue=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function vue(e){for(const t of bue)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var YP="AI_NoObjectGeneratedError",XP=`vercel.ai.error.${YP}`,wue=Symbol.for(XP),JP,S4=class extends Sn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:YP,message:e,cause:t}),this[JP]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return Sn.hasMarker(e,XP)}};JP=wue;var QP="AI_DownloadError",e5=`vercel.ai.error.${QP}`,_ue=Symbol.for(e5),t5,IS=class extends Sn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:QP,message:a,cause:r}),this[t5]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Sn.hasMarker(e,e5)}};t5=_ue;async function xue({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new IS({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw IS.isInstance(a)?a:new IS({url:r,cause:a})}}var n5="AI_InvalidDataContentError",r5=`vercel.ai.error.${n5}`,Sue=Symbol.for(r5),a5,E4=class extends Sn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:n5,message:n,cause:t}),this[a5]=!0,this.content=e}static isInstance(e){return Sn.hasMarker(e,r5)}};a5=Sue;var i5=L.union([L.string(),L.instanceof(Uint8Array),L.instanceof(ArrayBuffer),L.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function o5(e){return typeof e=="string"?e:e instanceof ArrayBuffer?zf(new Uint8Array(e)):zf(e)}function cv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return iO(e)}catch(t){throw new E4({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new E4({content:e})}function Eue(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var s5="AI_InvalidMessageRoleError",l5=`vercel.ai.error.${s5}`,kue=Symbol.for(l5),u5,Cue=class extends Sn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:s5,message:t}),this[u5]=!0,this.role=e}static isInstance(e){return Sn.hasMarker(e,l5)}};u5=kue;function Aue(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function Tue({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=xue}){const a=await Nue(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>Rue(i,a))]}function Rue(e,t){var n,r,a,i,o,s;const u=e.role;switch(u){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>Iue(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var f;const h=(f=c.providerOptions)!=null?f:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:o5(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var f;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(f=c.providerOptions)!=null?f:c.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const c=u;throw new Cue({role:c})}}}async function Nue(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function Iue(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,u,c;const f=e.type;switch(f){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${f}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){const{mimeType:h,base64Content:m}=Aue(u.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${f}`);o=h,c=cv(m)}else{const h=t[u.toString()];h?(c=h.data,o??(o=h.mimeType)):c=u}else c=cv(u);switch(f){case"image":return c instanceof Uint8Array&&(o=(r=vue(c))!=null?r:o),{type:"image",image:c,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?o5(c):c,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function Oue({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new Io({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Io({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Io({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Io({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Io({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Io({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Io({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Io({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function k4(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,u,c;try{[s,u]=i.url.split(","),c=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||u==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:cv(u)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:Eue(cv(u))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:u,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var c5="AI_MessageConversionError",d5=`vercel.ai.error.${c5}`,jue=Symbol.for(d5),f5,OS=class extends Sn{constructor({originalMessage:e,message:t}){super({name:c5,message:t}),this[f5]=!0,this.originalMessage=e}static isInstance(e){return Sn.hasMarker(e,d5)}};f5=jue;function Due(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],u=o===e.length-1,{role:c,content:f,experimental_attachments:h}=s;switch(c){case"system":{i.push({role:"system",content:f});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:f},...k4(h)]:f});else{const m=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,...k4(h)]:m})}break}case"assistant":{if(s.parts!=null){let v=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const A of C.details)switch(A.type){case"text":S.push({type:"reasoning",text:A.text,signature:A.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:A.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const A=C;throw new Error(`Unsupported part: ${A}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new OS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:A,toolName:O,result:j}=C,N=a[O];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:A,toolName:O,result:N.experimental_toToolResultContent(j),experimental_content:N.experimental_toToolResultContent(j)}:{type:"tool-result",toolCallId:A,toolName:O,result:j}})}),x=[],_=!1,w++},w=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&v(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==w&&v(),x.push(S),_=!0;break}}v();break}const m=s.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:f});break}const g=m.reduce((v,w)=>{var _;return Math.max(v,(_=w.step)!=null?_:0)},0);for(let v=0;v<=g;v++){const w=m.filter(_=>{var x;return((x=_.step)!=null?x:0)===v});w.length!==0&&(i.push({role:"assistant",content:[...u&&f&&v===0?[{type:"text",text:f}]:[],...w.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:w.map(_=>{if(!("result"in _))throw new OS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}f&&!u&&i.push({role:"assistant",content:f});break}case"data":break;default:{const m=c;throw new OS({originalMessage:s,message:`Unsupported role: ${m}`})}}}return i}function Mue(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Pue);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Pue(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var G2=L.lazy(()=>L.union([L.null(),L.string(),L.number(),L.boolean(),L.record(L.string(),G2),L.array(G2)])),Wr=L.record(L.string(),L.record(L.string(),G2)),Fue=L.array(L.union([L.object({type:L.literal("text"),text:L.string()}),L.object({type:L.literal("image"),data:L.string(),mimeType:L.string().optional()})])),h5=L.object({type:L.literal("text"),text:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Lue=L.object({type:L.literal("image"),image:L.union([i5,L.instanceof(URL)]),mimeType:L.string().optional(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),p5=L.object({type:L.literal("file"),data:L.union([i5,L.instanceof(URL)]),filename:L.string().optional(),mimeType:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),$ue=L.object({type:L.literal("reasoning"),text:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Bue=L.object({type:L.literal("redacted-reasoning"),data:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),zue=L.object({type:L.literal("tool-call"),toolCallId:L.string(),toolName:L.string(),args:L.unknown(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Uue=L.object({type:L.literal("tool-result"),toolCallId:L.string(),toolName:L.string(),result:L.unknown(),content:Fue.optional(),isError:L.boolean().optional(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),que=L.object({role:L.literal("system"),content:L.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Hue=L.object({role:L.literal("user"),content:L.union([L.string(),L.array(L.union([h5,Lue,p5]))]),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Vue=L.object({role:L.literal("assistant"),content:L.union([L.string(),L.array(L.union([h5,p5,$ue,Bue,zue]))]),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Gue=L.object({role:L.literal("tool"),content:L.array(Uue),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Wue=L.union([que,Hue,Vue,Gue]);function Kue({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new pl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new pl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new pl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new pl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Mue(e.messages);if(n==="other")throw new pl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?Due(e.messages,{tools:t}):e.messages;if(r.length===0)throw new pl({prompt:e,message:"messages must not be empty"});const a=hh({value:r,schema:L.array(Wue)});if(!a.success)throw new pl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Zue({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Yue(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Xue="JSON schema:",Jue="You MUST answer with a JSON object that matches the JSON schema above.",Que="You MUST answer with JSON.";function ece({prompt:e,schema:t,schemaPrefix:n=t!=null?Xue:void 0,schemaSuffix:r=t!=null?Jue:Que}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function jS(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}sd({prefix:"aiobj",size:24});var wi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function C4(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function tce(){let e=[],t=null,n=!1,r=C4();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=C4(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function nce(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}sd({prefix:"aiobj",size:24});var m5="AI_NoOutputSpecifiedError",g5=`vercel.ai.error.${m5}`,rce=Symbol.for(g5),y5,ace=class extends Sn{constructor({message:e="No output specified."}={}){super({name:m5,message:e}),this[y5]=!0}static isInstance(e){return Sn.hasMarker(e,g5)}};y5=rce;var b5="AI_ToolExecutionError",v5=`vercel.ai.error.${b5}`,ice=Symbol.for(v5),w5,oce=class extends Sn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${l0(r)}`}){super({name:b5,message:a,cause:r}),this[w5]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Sn.hasMarker(e,v5)}};w5=ice;function sce(e){return e!=null&&Object.keys(e).length>0}function lce({tools:e,toolChoice:t,activeTools:n}){return sce(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:gw(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var uce=/^([\s\S]*?)(\s+)(\S*)$/;function cce(e){const t=e.match(uce);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var _5="AI_InvalidToolArgumentsError",x5=`vercel.ai.error.${_5}`,dce=Symbol.for(x5),S5,E5=class extends Sn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${l0(n)}`}){super({name:_5,message:r,cause:n}),this[S5]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Sn.hasMarker(e,x5)}};S5=dce;var k5="AI_NoSuchToolError",C5=`vercel.ai.error.${k5}`,fce=Symbol.for(C5),A5,W2=class extends Sn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:k5,message:n}),this[A5]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Sn.hasMarker(e,C5)}};A5=fce;var T5="AI_ToolCallRepairError",R5=`vercel.ai.error.${T5}`,hce=Symbol.for(R5),N5,pce=class extends Sn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${l0(e)}`}){super({name:T5,message:n,cause:e}),this[N5]=!0,this.originalError=t}static isInstance(e){return Sn.hasMarker(e,R5)}};N5=hce;async function mce({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new W2({toolName:e.toolName});try{return await A4({toolCall:e,tools:t})}catch(i){if(n==null||!(W2.isInstance(i)||E5.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>gw(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new pce({cause:s,originalError:i})}if(o==null)throw i;return await A4({toolCall:o,tools:t})}}async function A4({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new W2({toolName:e.toolName,availableTools:Object.keys(t)});const a=gw(r.parameters),i=e.args.trim()===""?hh({value:{},schema:a}):Yc({text:e.args,schema:a});if(i.success===!1)throw new E5({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function gce(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function T4({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const u=[];return u.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&u.push({role:"tool",id:s(),content:i.map(c=>{const f=r[c.toolName];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:f.experimental_toToolResultContent(c.result),experimental_content:f.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),u}sd({prefix:"aitxt",size:24});sd({prefix:"msg",size:24});var yce={};Yk(yce,{object:()=>_ce,text:()=>wce});var I5="AI_InvalidStreamPartError",O5=`vercel.ai.error.${I5}`,bce=Symbol.for(O5),j5,vce=class extends Sn{constructor({chunk:e,message:t}){super({name:I5,message:t}),this[j5]=!0,this.chunk=e}static isInstance(e){return Sn.hasMarker(e,O5)}};j5=bce;var wce=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),_ce=({schema:e})=>{const t=gw(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:ece({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=ile(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=Yc({text:n});if(!a.success)throw new S4({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=hh({value:a.value,schema:t});if(!i.success)throw new S4({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function xce(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Xk(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function u(f){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}async function c(f){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}return new ReadableStream({async pull(f){try{if(o){await c(f);return}if(s){await u(f);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||f.enqueue(h.value),m===n?(a=void 0,h.done&&(await c(f),o=!0)):(i=void 0,h.done&&(s=!0,await u(f)))}catch(h){f.error(h)}},cancel(){n.cancel(),r.cancel()}})}function Sce({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:u}){let c=null;const f=new ReadableStream({start(x){c=x}}),h={},m=new Set;let g=!1,v;function w(){g&&m.size===0&&(v!=null&&c.enqueue(v),c.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new yue({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await mce({toolCall:x,tools:e,repairToolCall:u,system:i,messages:o});S.enqueue(C);const A=e[C.toolName];if(A.execute!=null){const O=_s();m.add(O),V2({name:"ai.toolCall",attributes:Nf({telemetry:a,attributes:{...H2({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async j=>A.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(N=>{c.enqueue({...C,type:"tool-result",result:N}),m.delete(O),w();try{j.setAttributes(Nf({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{c.enqueue({type:"error",error:new oce({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:N})}),m.delete(O),w()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:Zue(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,w()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),f.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var Ece=sd({prefix:"aitxt",size:24}),kce=sd({prefix:"msg",size:24});function Cce({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:u,maxSteps:c=1,experimental_generateMessageId:f=kce,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:w=v,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:A,onError:O,onFinish:j,onStepFinish:N,_internal:{now:U=nce,generateId:V=Ece,currentDate:J=()=>new Date}={},...P}){return new Tce({model:e,telemetry:g,headers:u,settings:P,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:xce(C),activeTools:S,repairToolCall:E,maxSteps:c,output:h,continueSteps:m,providerOptions:w,onChunk:A,onError:O,onFinish:j,onStepFinish:N,now:U,currentDate:J,generateId:V,generateMessageId:f})}function Ace(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const u=JSON.stringify(s.partial);u!==r&&(a({controller:o,partialOutput:s.partial}),r=u)}},flush(i){n.length>0&&a({controller:i})}})}var Tce=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:u,tools:c,toolChoice:f,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:v,maxSteps:w,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:A,generateMessageId:O,onChunk:j,onError:N,onFinish:U,onStepFinish:V}){this.warningsPromise=new wi,this.usagePromise=new wi,this.finishReasonPromise=new wi,this.providerMetadataPromise=new wi,this.textPromise=new wi,this.reasoningPromise=new wi,this.reasoningDetailsPromise=new wi,this.sourcesPromise=new wi,this.filesPromise=new wi,this.toolCallsPromise=new wi,this.toolResultsPromise=new wi,this.requestPromise=new wi,this.responsePromise=new wi,this.stepsPromise=new wi;var J;if(w<1)throw new Io({parameter:"maxSteps",value:w,message:"maxSteps must be at least 1"});this.output=_;let P="",Z="",F="",ue=[],le=[],ne,Q=[];const te=[],G={id:A(),timestamp:C(),modelId:e.modelId,messages:[]};let X=[],ae=[],be,we,fe="initial";const Me=[];let Pe;const Oe=new TransformStream({async transform(ce,ie){ie.enqueue(ce);const{part:Y}=ce;if((Y.type==="text-delta"||Y.type==="reasoning"||Y.type==="source"||Y.type==="tool-call"||Y.type==="tool-result"||Y.type==="tool-call-streaming-start"||Y.type==="tool-call-delta")&&await(j==null?void 0:j({chunk:Y})),Y.type==="error"&&await(N==null?void 0:N({error:Y.error})),Y.type==="text-delta"&&(P+=Y.textDelta,Z+=Y.textDelta,F+=Y.textDelta),Y.type==="reasoning"&&(ne==null?(ne={type:"text",text:Y.textDelta},ue.push(ne)):ne.text+=Y.textDelta),Y.type==="reasoning-signature"){if(ne==null)throw new Sn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});ne.signature=Y.signature,ne=void 0}if(Y.type==="redacted-reasoning"&&ue.push({type:"redacted",data:Y.data}),Y.type==="file"&&le.push(Y),Y.type==="source"&&(te.push(Y.source),Q.push(Y.source)),Y.type==="tool-call"&&X.push(Y),Y.type==="tool-result"&&ae.push(Y),Y.type==="step-finish"){const _e=T4({text:Z,files:le,reasoning:ue,tools:c??{},toolCalls:X,toolResults:ae,messageId:Y.messageId,generateMessageId:O}),De=Me.length;let Ee="done";De+1<w&&(x&&Y.finishReason==="length"&&X.length===0?Ee="continue":X.length>0&&ae.length===X.length&&(Ee="tool-result"));const Ze={stepType:fe,text:P,reasoning:gce(ue),reasoningDetails:ue,files:le,sources:Q,toolCalls:X,toolResults:ae,finishReason:Y.finishReason,usage:Y.usage,warnings:Y.warnings,logprobs:Y.logprobs,request:Y.request,response:{...Y.response,messages:[...G.messages,..._e]},providerMetadata:Y.experimental_providerMetadata,experimental_providerMetadata:Y.experimental_providerMetadata,isContinued:Y.isContinued};await(V==null?void 0:V(Ze)),Me.push(Ze),X=[],ae=[],P="",Q=[],ue=[],le=[],ne=void 0,Ee!=="done"&&(fe=Ee),Ee!=="continue"&&(G.messages.push(..._e),Z="")}Y.type==="finish"&&(G.id=Y.response.id,G.timestamp=Y.response.timestamp,G.modelId=Y.response.modelId,G.headers=Y.response.headers,we=Y.usage,be=Y.finishReason)},async flush(ce){var ie;try{if(Me.length===0)return;const Y=Me[Me.length-1];ke.warningsPromise.resolve(Y.warnings),ke.requestPromise.resolve(Y.request),ke.responsePromise.resolve(Y.response),ke.toolCallsPromise.resolve(Y.toolCalls),ke.toolResultsPromise.resolve(Y.toolResults),ke.providerMetadataPromise.resolve(Y.experimental_providerMetadata),ke.reasoningPromise.resolve(Y.reasoning),ke.reasoningDetailsPromise.resolve(Y.reasoningDetails);const _e=be??"unknown",De=we??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};ke.finishReasonPromise.resolve(_e),ke.usagePromise.resolve(De),ke.textPromise.resolve(F),ke.sourcesPromise.resolve(te),ke.filesPromise.resolve(Y.files),ke.stepsPromise.resolve(Me),await(U==null?void 0:U({finishReason:_e,logprobs:void 0,usage:De,text:F,reasoning:Y.reasoning,reasoningDetails:Y.reasoningDetails,files:Y.files,sources:Y.sources,toolCalls:Y.toolCalls,toolResults:Y.toolResults,request:(ie=Y.request)!=null?ie:{},response:Y.response,warnings:Y.warnings,providerMetadata:Y.providerMetadata,experimental_providerMetadata:Y.experimental_providerMetadata,steps:Me})),Pe.setAttributes(Nf({telemetry:t,attributes:{"ai.response.finishReason":_e,"ai.response.text":{output:()=>F},"ai.response.toolCalls":{output:()=>{var Ee;return(Ee=Y.toolCalls)!=null&&Ee.length?JSON.stringify(Y.toolCalls):void 0}},"ai.usage.promptTokens":De.promptTokens,"ai.usage.completionTokens":De.completionTokens}}))}catch(Y){ce.error(Y)}finally{Pe.end()}}}),Ae=tce();this.addStream=Ae.addStream,this.closeStream=Ae.close;let $e=Ae.stream;for(const ce of m)$e=$e.pipeThrough(ce({tools:c,stopStream(){Ae.terminate()}}));this.baseStream=$e.pipeThrough(Ace(_)).pipeThrough(Oe);const{maxRetries:qe,retry:Fe}=due({maxRetries:a}),Ne=mue(t),$=fue({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:qe}}),Se=Kue({prompt:{system:(J=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?J:o,prompt:s,messages:u},tools:c}),ke=this;V2({name:"ai.streamText",attributes:Nf({telemetry:t,attributes:{...H2({operationId:"ai.streamText",telemetry:t}),...$,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:u})},"ai.settings.maxSteps":w}}),tracer:Ne,endWhenDone:!1,fn:async ce=>{Pe=ce;async function ie({currentStep:Y,responseMessages:_e,usage:De,stepType:Ee,previousStepText:Ze,hasLeadingWhitespace:Et,messageId:at}){var _t;const Nt=_e.length===0?Se.type:"messages",Rt=[...Se.messages,..._e],Kt=await Tue({prompt:{type:Nt,system:Se.system,messages:Rt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(_t=e.supportsUrl)==null?void 0:_t.bind(e)}),pe={type:"regular",...lce({tools:c,toolChoice:f,activeTools:g})},{result:{stream:R,warnings:H,rawResponse:de,request:Re},doStreamSpan:ye,startTimestampMs:Ce}=await Fe(()=>V2({name:"ai.streamText.doStream",attributes:Nf({telemetry:t,attributes:{...H2({operationId:"ai.streamText.doStream",telemetry:t}),...$,"ai.prompt.format":{input:()=>Nt},"ai.prompt.messages":{input:()=>JSON.stringify(Kt)},"ai.prompt.tools":{input:()=>{var Ct;return(Ct=pe.tools)==null?void 0:Ct.map(Ot=>JSON.stringify(Ot))}},"ai.prompt.toolChoice":{input:()=>pe.toolChoice!=null?JSON.stringify(pe.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ne,endWhenDone:!1,fn:async Ct=>({startTimestampMs:E(),doStreamSpan:Ct,result:await e.doStream({mode:pe,...Oue(r),inputFormat:Nt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:Kt,providerMetadata:S,abortSignal:i,headers:n})})})),oe=Sce({tools:c,generatorStream:R,toolCallStreaming:h,tracer:Ne,telemetry:t,system:o,messages:Rt,repairToolCall:v,abortSignal:i}),ft=Re??{},vt=[],D=[],Be=[],st=[];let ge,je="unknown",Je={promptTokens:0,completionTokens:0,totalTokens:0},It,me=!0,q="",z=Ee==="continue"?Ze:"",W,he={id:A(),timestamp:C(),modelId:e.modelId},Te="",Ve=!1,gt=!0,Gt=!1;async function ht({controller:Ct,chunk:Ot}){Ct.enqueue(Ot),q+=Ot.textDelta,z+=Ot.textDelta,Ve=!0,Gt=Ot.textDelta.trimEnd()!==Ot.textDelta}ke.addStream(oe.pipeThrough(new TransformStream({async transform(Ct,Ot){var Zt,En,zn;if(me){const pr=E()-Ce;me=!1,ye.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":pr}),ye.setAttributes({"ai.response.msToFirstChunk":pr}),Ot.enqueue({type:"step-start",messageId:at,request:ft,warnings:H??[]})}if(Ct.type==="text-delta"&&Ct.textDelta.length===0)return;const hr=Ct.type;switch(hr){case"text-delta":{if(x){const pr=gt&&Et?Ct.textDelta.trimStart():Ct.textDelta;if(pr.length===0)break;gt=!1,Te+=pr;const Mn=cce(Te);Mn!=null&&(Te=Mn.suffix,await ht({controller:Ot,chunk:{type:"text-delta",textDelta:Mn.prefix+Mn.whitespace}}))}else await ht({controller:Ot,chunk:Ct});break}case"reasoning":{Ot.enqueue(Ct),ge==null?(ge={type:"text",text:Ct.textDelta},Be.push(ge)):ge.text+=Ct.textDelta;break}case"reasoning-signature":{if(Ot.enqueue(Ct),ge==null)throw new vce({chunk:Ct,message:"reasoning-signature without reasoning"});ge.signature=Ct.signature,ge=void 0;break}case"redacted-reasoning":{Ot.enqueue(Ct),Be.push({type:"redacted",data:Ct.data});break}case"tool-call":{Ot.enqueue(Ct),vt.push(Ct);break}case"tool-result":{Ot.enqueue(Ct),D.push(Ct);break}case"response-metadata":{he={id:(Zt=Ct.id)!=null?Zt:he.id,timestamp:(En=Ct.timestamp)!=null?En:he.timestamp,modelId:(zn=Ct.modelId)!=null?zn:he.modelId};break}case"finish":{Je=Ct.usage,je=Ct.finishReason,It=Ct.experimental_providerMetadata,W=Ct.logprobs;const pr=E()-Ce;ye.addEvent("ai.stream.finish"),ye.setAttributes({"ai.response.msToFinish":pr,"ai.response.avgCompletionTokensPerSecond":1e3*Je.completionTokens/pr});break}case"file":{st.push(Ct),Ot.enqueue(Ct);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Ot.enqueue(Ct);break}case"error":{Ot.enqueue(Ct),je="error";break}default:{const pr=hr;throw new Error(`Unknown chunk type: ${pr}`)}}},async flush(Ct){const Ot=vt.length>0?JSON.stringify(vt):void 0;let Zt="done";Y+1<w&&(x&&je==="length"&&vt.length===0?Zt="continue":vt.length>0&&D.length===vt.length&&(Zt="tool-result")),x&&Te.length>0&&(Zt!=="continue"||Ee==="continue"&&!Ve)&&(await ht({controller:Ct,chunk:{type:"text-delta",textDelta:Te}}),Te="");try{ye.setAttributes(Nf({telemetry:t,attributes:{"ai.response.finishReason":je,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>Ot},"ai.response.id":he.id,"ai.response.model":he.modelId,"ai.response.timestamp":he.timestamp.toISOString(),"ai.usage.promptTokens":Je.promptTokens,"ai.usage.completionTokens":Je.completionTokens,"gen_ai.response.finish_reasons":[je],"gen_ai.response.id":he.id,"gen_ai.response.model":he.modelId,"gen_ai.usage.input_tokens":Je.promptTokens,"gen_ai.usage.output_tokens":Je.completionTokens}}))}catch{}finally{ye.end()}Ct.enqueue({type:"step-finish",finishReason:je,usage:Je,providerMetadata:It,experimental_providerMetadata:It,logprobs:W,request:ft,response:{...he,headers:de==null?void 0:de.headers},warnings:H,isContinued:Zt==="continue",messageId:at});const En=Yue(De,Je);if(Zt==="done")Ct.enqueue({type:"finish",finishReason:je,usage:En,providerMetadata:It,experimental_providerMetadata:It,logprobs:W,response:{...he,headers:de==null?void 0:de.headers}}),ke.closeStream();else{if(Ee==="continue"){const zn=_e[_e.length-1];typeof zn.content=="string"?zn.content+=q:zn.content.push({text:q,type:"text"})}else _e.push(...T4({text:q,files:st,reasoning:Be,tools:c??{},toolCalls:vt,toolResults:D,messageId:at,generateMessageId:O}));await ie({currentStep:Y+1,responseMessages:_e,usage:En,stepType:Zt,previousStepText:z,hasLeadingWhitespace:Gt,messageId:Zt==="continue"?at:O()})}}})))}await ie({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:O()})}}).catch(ce=>{ke.addStream(new ReadableStream({start(ie){ie.enqueue({type:"error",error:ce}),ie.close()}})),ke.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return jS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return jS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new ace;return jS(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Ha("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Ha("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Ha("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Ha("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Ha("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Ha("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Ha("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Ha("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Ha("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Ha("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Ha("error",e(i.error)));break}case"step-start":{o.enqueue(Ha("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Ha("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Ha("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const u=s;throw new Error(`Unknown chunk type: ${u}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c}={}){_4({response:e,status:t,statusText:n,headers:w4(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){_4({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:w4(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?Xk(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}),{status:t,statusText:n,headers:uv(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:uv(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},Rce=L.object({name:L.string(),version:L.string()}).passthrough(),Jk=L.object({_meta:L.optional(L.object({}).passthrough())}).passthrough(),n0=Jk,Nce=L.object({method:L.string(),params:L.optional(Jk)}),Ice=L.object({experimental:L.optional(L.object({}).passthrough()),logging:L.optional(L.object({}).passthrough()),prompts:L.optional(L.object({listChanged:L.optional(L.boolean())}).passthrough()),resources:L.optional(L.object({subscribe:L.optional(L.boolean()),listChanged:L.optional(L.boolean())}).passthrough()),tools:L.optional(L.object({listChanged:L.optional(L.boolean())}).passthrough())}).passthrough();n0.extend({protocolVersion:L.string(),capabilities:Ice,serverInfo:Rce,instructions:L.optional(L.string())});var Oce=n0.extend({nextCursor:L.optional(L.string())}),jce=L.object({name:L.string(),description:L.optional(L.string()),inputSchema:L.object({type:L.literal("object"),properties:L.optional(L.object({}).passthrough())}).passthrough()}).passthrough();Oce.extend({tools:L.array(jce)});var Dce=L.object({type:L.literal("text"),text:L.string()}).passthrough(),Mce=L.object({type:L.literal("image"),data:L.string().base64(),mimeType:L.string()}).passthrough(),D5=L.object({uri:L.string(),mimeType:L.optional(L.string())}).passthrough(),Pce=D5.extend({text:L.string()}),Fce=D5.extend({blob:L.string().base64()}),Lce=L.object({type:L.literal("resource"),resource:L.union([Pce,Fce])}).passthrough();n0.extend({content:L.array(L.union([Dce,Mce,Lce])),isError:L.boolean().default(!1).optional()}).or(n0.extend({toolResult:L.unknown()}));var yw="2.0",$ce=L.object({jsonrpc:L.literal(yw),id:L.union([L.string(),L.number().int()])}).merge(Nce).strict(),Bce=L.object({jsonrpc:L.literal(yw),id:L.union([L.string(),L.number().int()]),result:n0}).strict(),zce=L.object({jsonrpc:L.literal(yw),id:L.union([L.string(),L.number().int()]),error:L.object({code:L.number().int(),message:L.string(),data:L.optional(L.unknown())})}).strict(),Uce=L.object({jsonrpc:L.literal(yw)}).merge(L.object({method:L.string(),params:L.optional(Jk)})).strict();L.union([$ce,Uce,Bce,zce]);var qce={};Yk(qce,{mergeIntoDataStream:()=>Gce,toDataStream:()=>Hce,toDataStreamResponse:()=>Vce});function M5(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function Qk(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&R4((a=n.data)==null?void 0:a.chunk,r);return}R4(n,r)}})).pipeThrough(M5(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Ha("text",n))}}))}function Hce(e,t){return Qk(e,t).pipeThrough(new TextEncoderStream)}function Vce(e,t){var n;const r=Qk(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?Xk(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:uv(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Gce(e,t){t.dataStream.merge(Qk(e,t.callbacks))}function R4(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Wce={};Yk(Wce,{mergeIntoDataStream:()=>Yce,toDataStream:()=>Kce,toDataStreamResponse:()=>Zce});function eC(e,t){const n=Xce();return dU(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(M5(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Ha("text",r))}}))}function Kce(e,t){return eC(e,t).pipeThrough(new TextEncoderStream)}function Zce(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=eC(e,i).pipeThrough(new TextEncoderStream),s=a?Xk(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:uv(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Yce(e,t){t.dataStream.merge(eC(e,t.callbacks))}function Xce(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class tb{static async startInteraction(t,n){var V,J,P,Z,F,ue,le,ne,Q;const r=er.getState(),a=dr.getState(),i=r.currentConversationId;if(!i)return r.setError("No active conversation."),ct.error("Cannot start interaction: No active conversation."),null;const o=await b2("middleware:interaction:beforeStart",{prompt:t,conversationId:i});if(o===!1)return console.log("AIService: Interaction start cancelled by middleware."),null;const s=o&&typeof o=="object"?o.prompt:t,u=$o(),c=new AbortController;this.activeStreams.set(u,c);const h=r.interactions.filter(te=>te.conversationId===i),m=h.reduce((te,G)=>Math.max(te,G.index),-1)+1,g=h.length>0?h[h.length-1].id:null,v=[...s.messages];let w=-1;for(let te=v.length-1;te>=0;te--)if(v[te].role==="user"){w=te;break}const _=((V=n.metadata)==null?void 0:V.attachedFiles)??[];if(w!==-1&&_.length>0){const te=v[w],G=[];let X=null,ae=null;if(_.some(fe=>fe.source==="vfs")){const fe=a.getConversationById(i);ae=(fe==null?void 0:fe.projectId)??"orphan",console.log(`[AIService] VFS files detected. Target VFS key: ${ae}`);const Me=Gi.getState().configuredVfsKey;if(BI&&Me===ae)console.log(`[AIService] Using existing VFS instance for key: ${ae}`),X=BI;else{console.log(`[AIService] Existing VFS instance mismatch or unavailable (Configured: ${Me}, Needed: ${ae}). Attempting direct initialization...`);try{if(X=await DM(ae),!X)throw new Error(`Direct VFS initialization failed for key ${ae}.`);console.log(`[AIService] Direct VFS initialization successful for key ${ae}.`)}catch(Pe){console.error(`[AIService] Failed to ensure VFS ready for key ${ae} via direct init:`,Pe),ct.error(`Filesystem error: Could not access files for key ${ae}.`),X=null}}}for(const fe of _){let Me=null;try{if(fe.source==="direct")Me=TR(fe);else if(fe.source==="vfs"&&X&&fe.path){console.log(`[AIService] Fetching VFS file: ${fe.path}`);const Pe=await Ih(fe.path);Me=TR({...fe,contentBytes:Pe,contentText:void 0,contentBase64:void 0})}else fe.source==="vfs"&&(console.warn(`[AIService] Skipping VFS file ${fe.name} as VFS instance for key ${ae} could not be obtained.`),Me={type:"text",text:`[Skipped VFS file: ${fe.name} - Filesystem unavailable]`});Me&&G.push(Me)}catch(Pe){console.error(`[AIService] Error processing file ${fe.name}:`,Pe),G.push({type:"text",text:`[Error processing file: ${fe.name}]`})}}let we=[];typeof te.content=="string"?te.content.trim()&&we.push({type:"text",text:te.content}):Array.isArray(te.content)&&(we=te.content.filter(fe=>fe&&typeof fe=="object"&&"type"in fe&&(fe.type==="text"||fe.type==="image"))),v[w]={...te,content:[...G,...we]},console.log(`AIService: Added ${G.length} file part(s) to user message content.`)}const x={id:u,conversationId:i,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...s.metadata,attachedFiles:(J=n.metadata.attachedFiles)==null?void 0:J.map(({contentBase64:te,contentText:G,...X})=>X),toolCalls:[],toolResults:[]},index:m,parentId:g};r._addInteractionToState(x),r._addStreamingId(u),Ht.saveInteraction({...x}).catch(te=>{console.error(`AIService: Failed initial persistence for ${u}`,te)}),Ei.emit("interaction:started",{interactionId:u,conversationId:i,type:x.type});let S,E="ERROR",C,A,O,j;const N=[],U=[];try{const te=(P=fi.getState().getSelectedModel())==null?void 0:P.instance;if(!te)throw new Error("Selected model instance not available.");const G=Qr.getState().getRegisteredTools(),ae=(((Z=s.metadata)==null?void 0:Z.enabledTools)??[]).reduce((fe,Me)=>{const Pe=G[Me];if(Pe){const Oe={...Pe.definition};Pe.implementation&&(Oe.execute=async Ae=>{try{const $e=NW(),qe=Pe.definition.parameters.parse(Ae),Fe=Pe.implementation;return await Fe(qe,$e)}catch($e){console.error(`[AIService] Error executing tool ${Me} via SDK:`,$e);const qe=$e instanceof Error?$e.message:String($e);return $e instanceof L.ZodError?{_isError:!0,error:`Invalid arguments: ${$e.errors.map(Fe=>`${Fe.path.join(".")} (${Fe.message})`).join(", ")}`}:{_isError:!0,error:qe}}}),fe[Me]=Oe}return fe},{}),be=((F=s.parameters)==null?void 0:F.maxSteps)??zr.getState().toolMaxSteps,we={model:te,messages:v,abortSignal:c.signal,maxSteps:be};Object.keys(ae).length>0&&(we.tools=ae),we.toolChoice=s.toolChoice??(Object.keys(ae).length>0?"auto":"none"),s.system&&(we.system=s.system),s.parameters&&(s.parameters.temperature!==void 0&&(we.temperature=s.parameters.temperature),s.parameters.max_tokens!==void 0&&(we.maxTokens=s.parameters.max_tokens),s.parameters.top_p!==void 0&&(we.topP=s.parameters.top_p),s.parameters.top_k!==void 0&&(we.topK=s.parameters.top_k),s.parameters.presence_penalty!==void 0&&(we.presencePenalty=s.parameters.presence_penalty),s.parameters.frequency_penalty!==void 0&&(we.frequencyPenalty=s.parameters.frequency_penalty)),console.log(`AIService: Calling streamText with options for ${u}:`,{modelId:(ue=s.metadata)==null?void 0:ue.modelId,system:!!we.system,messageCount:(le=we==null?void 0:we.messages)==null?void 0:le.length,temperature:we.temperature,maxTokens:we.maxTokens,toolChoice:we.toolChoice,tools:we.tools?Object.keys(we.tools):void 0,maxSteps:we.maxSteps}),S=await Cce(we);for await(const fe of S.fullStream){if(c.signal.aborted)throw console.log(`AIService: Stream ${u} aborted by signal.`),j="stop",new Error("Stream aborted by user.");switch(fe.type){case"text-delta":{const Me={interactionId:u,chunk:fe.textDelta},Pe=await b2("middleware:interaction:processChunk",Me);if(Pe!==!1){const Oe=Pe&&typeof Pe=="object"&&"chunk"in Pe?Pe.chunk:fe.textDelta;er.getState().appendInteractionResponseChunk(u,Oe),Ei.emit("interaction:stream_chunk",{interactionId:u,chunk:Oe})}break}case"tool-call":{const Me=JSON.stringify(fe);N.push(Me),er.getState()._updateInteractionInState(u,{metadata:{toolCalls:[...N]}}),console.log(`[AIService] Tool call observed: ${fe.toolName}`,fe.args);break}case"tool-result":{const Me=JSON.stringify(fe);U.push(Me),er.getState()._updateInteractionInState(u,{metadata:{toolResults:[...U]}}),console.log(`[AIService] Tool result observed for ${fe.toolName} (Call ID: ${fe.toolCallId})`,fe.result);break}case"finish":console.log("[AIService] Stream finish part received:",fe),j=fe.finishReason,A=fe.usage,O=fe.providerMetadata;break;case"error":throw console.error("[AIService] Stream error part:",fe.error),j="error",new Error(`AI Stream Error: ${fe.error instanceof Error?fe.error.message:fe.error}`);case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"file":case"tool-call-streaming-start":case"tool-call-delta":case"step-start":case"step-finish":break}}if(c.signal.aborted)throw j="stop",new Error("Stream aborted by user.");if(j===void 0){console.warn(`[AIService] Stream loop finished for ${u} without receiving a 'finish' part. Inferring reason.`);const fe=er.getState().activeStreamBuffers[u]||"";N.length>0?j="tool-calls":fe.trim()?j="stop":j="other"}}catch(te){console.error(`AIService: Error during interaction ${u}:`,te);const G=te instanceof Error&&te.message==="Stream aborted by user.";j=j??(G?"stop":"error"),C=G?void 0:te instanceof Error?te.message:String(te),G?(console.log(`AIService: Interaction ${u} cancelled.`),ct.info("Interaction cancelled.")):ct.error(`AI Interaction Error: ${C}`)}finally{this.activeStreams.delete(u);const te=er.getState().activeStreamBuffers[u]||"";switch(j){case"stop":case"length":case"tool-calls":E="COMPLETED";break;case"error":E="ERROR";break;case"other":default:te.trim()||N.length>0?(E="COMPLETED",console.warn(`[AIService] Interaction ${u} finished with reason '${j||"unknown"}', but content/tools exist. Marking COMPLETED.`)):(E="WARNING",C=C??"Stream ended unexpectedly without output.",console.warn(`[AIService] Interaction ${u} finished with reason '${j||"unknown"}' and no content/tools. Marking WARNING.`));break}const G=((ne=er.getState().interactions.find(fe=>fe.id===u))==null?void 0:ne.metadata)||x.metadata,X={status:E,endedAt:new Date,response:te,metadata:{...G,...A&&{promptTokens:A.promptTokens,completionTokens:A.completionTokens,totalTokens:A.totalTokens},...O&&{providerMetadata:O},...(E==="ERROR"||E==="WARNING")&&{error:C},toolCalls:N,toolResults:U,attachedFiles:(Q=x.metadata.attachedFiles)==null?void 0:Q.map(({contentBase64:fe,contentText:Me,...Pe})=>Pe)}};er.getState()._updateInteractionInState(u,X),er.getState()._removeStreamingId(u);const ae=er.getState().interactions.find(fe=>fe.id===u);ae?er.getState().updateInteractionAndPersist({...ae}).catch(fe=>{console.error(`AIService: Failed final persistence for ${u}`,fe)}):console.error(`AIService: CRITICAL - Could not find final state for interaction ${u} to persist after updates. State might be inconsistent.`);let be=[],we=[];try{be=N.map(fe=>JSON.parse(fe)),we=U.map(fe=>JSON.parse(fe))}catch(fe){console.error("[AIService] Failed to parse tool strings for event emitter:",fe)}Ei.emit("interaction:completed",{interactionId:u,status:E,error:C??void 0,toolCalls:be,toolResults:we}),console.log(`AIService: Finalized interaction ${u} with status ${E}.`)}return u}static stopInteraction(t){const n=this.activeStreams.get(t),r=er.getState();if(n&&!n.signal.aborted)console.log(`AIService: Aborting interaction ${t}...`),n.abort();else{console.log(`AIService: No active controller found or already aborted for interaction ${t}. Attempting store cleanup if needed.`);const a=r.interactions.find(i=>i.id===t);if(a&&a.status==="STREAMING"){console.warn(`AIService: Forcing CANCELLED status for interaction ${t} found in STREAMING state without active controller.`);const i=r.activeStreamBuffers[t]||"",o={status:"CANCELLED",endedAt:new Date,response:i,metadata:{...a.metadata||{},error:"Manually stopped (controller missing)"}};r._updateInteractionInState(t,o),r._removeStreamingId(t);const s=er.getState().interactions.find(u=>u.id===t);s&&r.updateInteractionAndPersist({...s}).catch(u=>{console.error(`AIService: Failed persistence for forced cancel of ${t}`,u)})}}}}Ua(tb,"activeStreams",new Map);const r0=Go(Wo((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Ht.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),ct.error(r)}},addDbMod:async n=>{const r=$o(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Ht.saveMod(a),ct.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(u=>u.id!==r),s.error=o}),ct.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(u=>u.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Ht.saveMod(o),ct.success(`Mod "${o.name}" updated.`)}catch(s){const u="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(c=>{const f=c.dbMods.findIndex(h=>h.id===n);f!==-1&&a&&(c.dbMods[f]=a,c.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),c.error=u}),ct.error(u),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Ht.deleteMod(n),ct.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder),s.error=o}),ct.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function N4(e){const t=e.id,n=e.name,r=Qr.getState(),a=r0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>r.registerChatControl(o),registerTool:(o,s,u)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,u)),on:(o,s)=>(Ei.on(o,s),()=>Ei.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=er.getState(),s=dr.getState(),u=zr.getState(),c=fi.getState(),{providerId:f}=d0(c.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:o.status==="streaming",selectedProviderId:f,selectedModelId:c.selectedModelId,activeSystemPrompt:u.globalSystemPrompt,temperature:u.temperature,maxTokens:u.maxTokens,theme:u.theme})},showToast:(o,s)=>{ct[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function Jce(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=N4(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(u){o=u instanceof Error?u:String(u),console.error(`[ModLoader] Error loading mod "${r.name}":`,u),ct.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=N4(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ei.emit(s.error?"mod:error":"mod:loaded",{id:r.id,name:r.name,error:s.error}),s}));return Ei.emit("app:loaded",void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var Qce=(e,t,n,r,a,i,o,s)=>{let u=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(v=>{let w=v==="class",_=w&&i?a.map(x=>i[x]||x):a;w?(u.classList.remove(..._),u.classList.add(i&&i[g]?i[g]:g)):u.setAttribute(v,g)}),h(g)}function h(g){s&&c.includes(g)&&(u.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?m():g;f(v)}catch{}},ede=B.createContext(void 0),tde={setTheme:e=>{},themes:[]},nde=()=>{var e;return(e=B.useContext(ede))!=null?e:tde};B.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:u,scriptProps:c})=>{let f=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return B.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Qce.toString()})(${f})`}})});const rde=({...e})=>{const{theme:t="system"}=nde();return y.jsx(AW,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function bw({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:Ut("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const P5=B.memo(B.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,...i},o)=>{const s=B.useRef(null),[u,c]=B.useState(e);B.useImperativeHandle(o,()=>({getValue:()=>u,focus:()=>{var v;return(v=s.current)==null?void 0:v.focus()}}));const{focusInputOnNextRender:f,setFocusInputFlag:h}=Ka(In(v=>({focusInputOnNextRender:v.focusInputOnNextRender,setFocusInputFlag:v.setFocusInputFlag})));B.useEffect(()=>{f&&s.current&&(h(!1),requestAnimationFrame(()=>{var v;(v=s.current)==null||v.focus()}))},[f,h]);const m=v=>{if(v.key==="Enter"&&!v.shiftKey&&!n){v.preventDefault();const w=lm.getState().attachedFilesMetadata.length>0;(u.trim().length>0||w)&&(t(),c(""))}},g=v=>{c(v.target.value)};return B.useEffect(()=>{const v=s.current;if(v){v.style.height="auto";const w=v.scrollHeight,_=250;v.style.height=`${Math.min(w,_)}px`,v.style.overflowY=w>_?"auto":"hidden"}},[u]),B.useEffect(()=>{c(e)},[e]),y.jsx(bw,{ref:s,value:u,onChange:g,onKeyDown:m,disabled:n,placeholder:r,rows:1,className:Ut("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...i})}));P5.displayName="InputArea";function nr({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:Ut("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const F5=(e,t)=>{if(!t)return null;let n=rm,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Xn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Lf,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=hE,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=h6,r="text-green-500",a=`Synced with ${t}`;break;default:n=rm,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(n,{className:Ut("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(Nn,{side:"right",children:a})]})})},dv=B.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:j})=>{const N=e.id===n,U=e.itemType==="project",V=e.id===v&&e.itemType===w,J=U&&f.has(e.id),{projects:P,conversations:Z}=U?m(e.id,g):{projects:[],conversations:[]},F=P.length>0||Z.length>0,ue=!U&&e.syncRepoId?r[e.id]:void 0,le=!U&&e.syncRepoId?a.get(e.syncRepoId):void 0,ne=!U&&le?F5(ue,le):null,Q=Ka(fe=>fe.openProjectSettingsModal),te=()=>{V||(U&&F&&h(e.id),i(e.id,e.itemType))},G=fe=>{fe.stopPropagation(),U?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,fe):o(e.id,fe)},X=fe=>{fe.stopPropagation(),E(e)},ae=fe=>{fe.stopPropagation(),U&&(console.log(`Opening project settings for: ${e.id}`),Q(e.id))},be=fe=>{fe.key==="Enter"?(fe.preventDefault(),C()):fe.key==="Escape"&&A(U&&_==="New Project")};B.useEffect(()=>{var fe,Me;V&&((fe=j.current)==null||fe.focus(),(Me=j.current)==null||Me.select())},[V,j]);const we=U?e.name:e.title;return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:Ut("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!V&&"hover:bg-muted/50 hover:text-primary/80",N&&!V?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",V&&"bg-muted ring-1 ring-primary",!V&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:te,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[U&&F&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:fe=>{fe.stopPropagation(),h(e.id)},children:J?y.jsx(uE,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(WB,{className:"h-3 w-3 text-muted-foreground"})}),U&&!F&&y.jsx("span",{className:"w-3 flex-shrink-0"}),U?y.jsx(s0,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(Lz,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),V?y.jsx(nr,{ref:j,value:x,onChange:fe=>S(fe.target.value),onKeyDown:be,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:fe=>fe.stopPropagation(),disabled:O}):y.jsx("span",{className:"truncate pr-1",children:we}),ne]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:V?y.jsxs(y.Fragment,{children:[y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-green-500 hover:text-green-600",onClick:fe=>{fe.stopPropagation(),C()},disabled:O||!x.trim()||x.trim()===_,"aria-label":"Save changes",children:O?y.jsx(Xn,{className:"h-3 w-3 animate-spin"}):y.jsx(od,{className:"h-3 w-3"})}),y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:fe=>{fe.stopPropagation(),A(U&&_==="New Project")},disabled:O,"aria-label":"Cancel edit",children:y.jsx(Yu,{className:"h-3 w-3"})})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[U&&y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:ae,"aria-label":`Settings for ${we}`,children:y.jsx(rz,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Project Settings"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:X,"aria-label":`Edit ${we}`,children:y.jsx(dE,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),U?y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:fe=>c(e.id,fe),"aria-label":`Export project ${we}`,children:y.jsx(lz,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Export Project (JSON)"})]})}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx("div",{className:"p-1 rounded hover:bg-muted cursor-pointer","aria-label":`Export ${we}`,children:y.jsx(ab,{className:"h-3 w-3 text-muted-foreground group-hover/export:text-foreground"})})}),y.jsx(Nn,{side:"top",children:"Export Conversation"})]})}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:fe=>fe.stopPropagation(),children:[y.jsx(Lt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:fe=>u(e.id,"json",fe),children:"JSON"}),y.jsx(Lt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:fe=>u(e.id,"md",fe),children:"MD"})]})]}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:G,"aria-label":`Delete ${we}`,children:y.jsx(Ou,{className:"h-3 w-3"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})})]},e.id),U&&J&&y.jsxs(y.Fragment,{children:[P.sort((fe,Me)=>Me.updatedAt.getTime()-fe.updatedAt.getTime()).map(fe=>y.jsx(dv,{item:{...fe,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:j},fe.id)),Z.sort((fe,Me)=>Me.updatedAt.getTime()-fe.updatedAt.getTime()).map(fe=>y.jsx(dv,{item:{...fe,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:w,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:j},fe.id))]})]})});dv.displayName="ConversationItemRenderer";function ade({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=B.useState(null),[i,o]=B.useState(null),[s,u]=B.useState(""),[c,f]=B.useState(""),[h,m]=B.useState(!1),g=B.useRef(null),v=B.useCallback(x=>{a(x.id),o(x.itemType);const S=x.itemType==="project"?x.name:x.title;u(S),f(S),m(!1)},[]),w=B.useCallback((x=!1)=>{const S=r;a(null),o(null),u(""),f(""),m(!1),x&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(E=>{console.error("Failed to delete new project on cancel:",E),ct.error("Failed to clean up cancelled new project.")}))},[r,n]),_=B.useCallback(async()=>{if(!r||!i||h)return;const x=c.trim();if(!x||x===s){w(i==="project"&&s==="New Project");return}m(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),ct.success("Item renamed successfully."),a(null),o(null),u(""),f("")}catch(S){console.error("Failed to save item name:",S)}finally{m(!1)}},[r,i,c,s,h,e,t,w]);return{editingItemId:r,editingItemType:i,editingName:s,localEditingName:c,setLocalEditingName:f,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:_,handleCancelEdit:w}}const K2=(e,t,n,r,a,i,o,s,u)=>{if(!n)return!0;const c=`${t}-${e}`;if(u[c]!==void 0)return u[c];let f=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))f=!0;else{const m=s.get(e)||[],g=o.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){f=!0;break}if(!f){for(const v of m)if(K2(v.id,"project",n,r,a,i,o,s,u)){f=!0;break}}}}return u[c]=f,f},ide=()=>{const{conversations:e,selectItem:t,selectedItemId:n,selectedItemType:r,addConversation:a,updateConversation:i,deleteConversation:o,exportConversation:s,exportProject:u,isLoading:c,syncRepos:f,conversationSyncStatus:h,getConversationById:m}=dr(In($=>({conversations:$.conversations,selectItem:$.selectItem,selectedItemId:$.selectedItemId,selectedItemType:$.selectedItemType,addConversation:$.addConversation,updateConversation:$.updateConversation,deleteConversation:$.deleteConversation,exportConversation:$.exportConversation,exportProject:$.exportProject,isLoading:$.isLoading,syncRepos:$.syncRepos,conversationSyncStatus:$.conversationSyncStatus,getConversationById:$.getConversationById}))),{projects:g,addProject:v,updateProject:w,deleteProject:_,getProjectById:x,isLoading:S}=_l(In($=>({projects:$.projects,addProject:$.addProject,updateProject:$.updateProject,deleteProject:$.deleteProject,getProjectById:$.getProjectById,isLoading:$.isLoading}))),E=Ka($=>$.setFocusInputFlag),[C,A]=wt.useState(new Set),[O,j]=B.useState(""),N=c||S,{editingItemId:U,editingItemType:V,editingName:J,localEditingName:P,setLocalEditingName:Z,isSavingEdit:F,editInputRef:ue,handleStartEditing:le,handleSaveEdit:ne,handleCancelEdit:Q}=ade({updateProject:w,updateConversation:i,deleteProject:_,getProjectById:x,getConversationById:m}),te=B.useCallback($=>{A(Se=>{const ke=new Set(Se);return ke.has($)?ke.delete($):ke.add($),ke})},[]),G=B.useCallback(()=>{if(r==="project")return n;if(r==="conversation"&&n){const $=m(n);return($==null?void 0:$.projectId)??null}return null},[n,r,m]),X=B.useCallback(async()=>{if(!U)try{const $=G(),Se=await a({title:"New Chat",projectId:$});t(Se,"conversation"),setTimeout(()=>E(!0),0)}catch($){console.error("Failed to create new chat:",$),ct.error("Failed to create new chat.")}},[U,G,a,t,E]),ae=B.useCallback(async()=>{if(!U)try{const $=G(),Se=await v({name:"New Project",parentId:$});t(Se,"project"),$&&A(ke=>new Set(ke).add($)),setTimeout(()=>{const ke=x(Se);ke?le({...ke,itemType:"project"}):(console.warn("New project data not found immediately, using fallback for edit start"),le({id:Se,itemType:"project",name:"New Project",parentId:$,createdAt:new Date,updatedAt:new Date,path:"/New Project"}))},50)}catch($){console.error("Failed to create new project:",$)}},[U,G,v,t,x,le]),be=B.useCallback(($,Se)=>{$!==U&&(U&&$!==U&&(P.trim()&&P.trim()!==J?ne():Q(V==="project"&&J==="New Project")),($!==n||Se!==r)&&(t($,Se),Se==="conversation"&&setTimeout(()=>E(!0),0)))},[U,V,J,P,n,r,ne,Q,t,E]),we=B.useCallback(($,Se)=>{Se.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&o($).catch(ke=>{console.error("Failed to delete conversation:",ke),ct.error("Failed to delete conversation.")})},[o]),fe=B.useCallback(($,Se)=>{Se.stopPropagation(),_($).catch(ke=>{console.error("Failed to delete project:",ke),ct.error("Failed to delete project.")})},[_]),Me=B.useCallback(async($,Se,ke)=>{ke.stopPropagation();try{await s($,Se)}catch(ce){console.error(`Failed to export conversation as ${Se}:`,ce)}},[s]),Pe=B.useCallback(async($,Se)=>{Se.stopPropagation();try{await u($)}catch(ke){console.error("Failed to export project:",ke)}},[u]),Oe=B.useMemo(()=>new Map((f||[]).map($=>[$.id,$.name])),[f]),{projectsById:Ae,conversationsByProjectId:$e,projectsByParentId:qe}=B.useMemo(()=>{const $=new Map(g.map(ce=>[ce.id,ce])),Se=new Map;e.forEach(ce=>{const ie=ce.projectId??null;Se.has(ie)||Se.set(ie,[]),Se.get(ie).push(ce)});const ke=new Map;return g.forEach(ce=>{const ie=ce.parentId??null;ke.has(ie)||ke.set(ie,[]),ke.get(ie).push(ce)}),{projectsById:$,conversationsByProjectId:Se,projectsByParentId:ke}},[g,e]),Fe=B.useCallback(($,Se)=>{const ke=Se.toLowerCase(),ce={},ie=(qe.get($)||[]).filter(_e=>K2(_e.id,"project",ke,g,e,Ae,$e,qe,ce)),Y=($e.get($)||[]).filter(_e=>_e.title.toLowerCase().includes(ke));return ie.sort((_e,De)=>De.updatedAt.getTime()-_e.updatedAt.getTime()),Y.sort((_e,De)=>De.updatedAt.getTime()-_e.updatedAt.getTime()),{projects:ie,conversations:Y}},[g,e,Ae,$e,qe]),Ne=B.useMemo(()=>{const $=O.toLowerCase(),Se={},ke=(qe.get(null)||[]).filter(Y=>K2(Y.id,"project",$,g,e,Ae,$e,qe,Se)),ce=($e.get(null)||[]).filter(Y=>Y.title.toLowerCase().includes($)),ie=[...ke.map(Y=>({...Y,itemType:"project"})),...ce.map(Y=>({...Y,itemType:"conversation"}))];return ie.sort((Y,_e)=>_e.updatedAt.getTime()-Y.updatedAt.getTime()),ie},[g,e,O,Ae,$e,qe]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{size:"sm",variant:"ghost",onClick:ae,"aria-label":"New Project",disabled:N||!!U,className:"h-7 w-7 p-0",children:y.jsx(cE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"New Project"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{size:"sm",variant:"ghost",onClick:X,"aria-label":"New Chat",disabled:N||!!U,className:"h-7 w-7 p-0",children:y.jsx(gv,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(b6,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(nr,{type:"search",placeholder:"Filter...",value:O,onChange:$=>j($.target.value),className:"h-8 text-xs pl-8",disabled:N})]}),y.jsx(pw,{className:"flex-grow",children:N?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"})]}):Ne.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:O.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:Ne.map($=>y.jsx(dv,{item:$,level:0,selectedItemId:n,conversationSyncStatus:h,repoNameMap:Oe,onSelectItem:be,onDeleteConversation:we,onDeleteProject:fe,onExportConversation:Me,onExportProject:Pe,expandedProjects:C,toggleProjectExpansion:te,getChildren:Fe,filterText:O,editingItemId:U,editingItemType:V,editingName:J,localEditingName:P,setLocalEditingName:Z,handleStartEditing:le,handleSaveEdit:ne,handleCancelEdit:Q,isSavingEdit:F,editInputRef:ue},$.id))})})]})},ode=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=dr(In(c=>({addConversation:c.addConversation,selectItem:c.selectItem,selectedItemId:c.selectedItemId,selectedItemType:c.selectedItemType,getConversationById:c.getConversationById}))),{addProject:a}=_l(In(c=>({addProject:c.addProject,getProjectById:c.getProjectById}))),i=Ka(c=>c.setFocusInputFlag),o=()=>{if(r==="project")return n;if(r==="conversation"&&n){const c=dr.getState().getConversationById(n);return(c==null?void 0:c.projectId)??null}return null},s=async()=>{try{const c=o(),f=await e({title:"New Chat",projectId:c});t(f,"conversation"),setTimeout(()=>i(!0),0)}catch(c){console.error("Failed to create new chat:",c)}},u=async()=>{try{const c=o(),f=await a({name:"New Project",parentId:c});t(f,"project")}catch(c){console.error("Failed to create new project:",c)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(cE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"right",children:"New Project"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(gv,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"right",children:"New Chat"})]})})]})};function sde(){const e=Qr.getState().registerChatControl,t=dr.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",order:10,status:()=>t?"loading":"ready",renderer:()=>wt.createElement(ide),iconRenderer:()=>wt.createElement(ode),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var DS="focusScope.autoFocusOnMount",MS="focusScope.autoFocusOnUnmount",I4={bubbles:!1,cancelable:!0},lde="FocusScope",Y0=B.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,u]=B.useState(null),c=Ea(a),f=Ea(i),h=B.useRef(null),m=xn(t,w=>u(w)),g=B.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;B.useEffect(()=>{if(r){let w=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:Eu(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||Eu(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const A of E)A.removedNodes.length>0&&Eu(s)};document.addEventListener("focusin",w),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),B.useEffect(()=>{if(s){j4.add(g);const w=document.activeElement;if(!s.contains(w)){const x=new CustomEvent(DS,I4);s.addEventListener(DS,c),s.dispatchEvent(x),x.defaultPrevented||(ude(pde(L5(s)),{select:!0}),document.activeElement===w&&Eu(s))}return()=>{s.removeEventListener(DS,c),setTimeout(()=>{const x=new CustomEvent(MS,I4);s.addEventListener(MS,f),s.dispatchEvent(x),x.defaultPrevented||Eu(w??document.body,{select:!0}),s.removeEventListener(MS,f),j4.remove(g)},0)}}},[s,c,f,g]);const v=B.useCallback(w=>{if(!n&&!r||g.paused)return;const _=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,x=document.activeElement;if(_&&x){const S=w.currentTarget,[E,C]=cde(S);E&&C?!w.shiftKey&&x===C?(w.preventDefault(),n&&Eu(E,{select:!0})):w.shiftKey&&x===E&&(w.preventDefault(),n&&Eu(C,{select:!0})):x===S&&w.preventDefault()}},[n,r,g.paused]);return y.jsx(an.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});Y0.displayName=lde;function ude(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Eu(r,{select:t}),document.activeElement!==n)return}function cde(e){const t=L5(e),n=O4(t,e),r=O4(t.reverse(),e);return[n,r]}function L5(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function O4(e,t){for(const n of e)if(!dde(n,{upTo:t}))return n}function dde(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function fde(e){return e instanceof HTMLInputElement&&"select"in e}function Eu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&fde(e)&&t&&e.select()}}var j4=hde();function hde(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=D4(e,t),e.unshift(t)},remove(t){var n;e=D4(e,t),(n=e[0])==null||n.resume()}}}function D4(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function pde(e){return e.filter(t=>t.tagName!=="A")}var PS=0;function vw(){B.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??M4()),document.body.insertAdjacentElement("beforeend",e[1]??M4()),PS++,()=>{PS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),PS--}},[])}function M4(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ss=function(){return Ss=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ss.apply(this,arguments)};function $5(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function mde(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var nb="right-scroll-bar-position",rb="width-before-scroll-bar",gde="with-scroll-bars-hidden",yde="--removed-body-scroll-bar-size";function FS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function bde(e,t){var n=B.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var vde=typeof window<"u"?B.useLayoutEffect:B.useEffect,P4=new WeakMap;function wde(e,t){var n=bde(null,function(r){return e.forEach(function(a){return FS(a,r)})});return vde(function(){var r=P4.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||FS(s,null)}),i.forEach(function(s){a.has(s)||FS(s,o)})}P4.set(n,e)},[e]),n}function _de(e){return e}function xde(e,t){t===void 0&&(t=_de);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var u=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return a}function Sde(e){e===void 0&&(e={});var t=xde(null);return t.options=Ss({async:!0,ssr:!1},e),t}var B5=function(e){var t=e.sideCar,n=$5(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return B.createElement(r,Ss({},n))};B5.isSideCarExport=!0;function Ede(e,t){return e.useMedium(t),B5}var z5=Sde(),LS=function(){},ww=B.forwardRef(function(e,t){var n=B.useRef(null),r=B.useState({onScrollCapture:LS,onWheelCapture:LS,onTouchMoveCapture:LS}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,v=e.inert,w=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=$5(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,A=wde([n,t]),O=Ss(Ss({},E),a);return B.createElement(B.Fragment,null,f&&B.createElement(C,{sideCar:z5,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!w,lockRef:n,gapMode:S}),o?B.cloneElement(B.Children.only(s),Ss(Ss({},O),{ref:A})):B.createElement(x,Ss({},O,{className:u,ref:A}),s))});ww.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ww.classNames={fullWidth:rb,zeroRight:nb};var kde=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Cde(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kde();return t&&e.setAttribute("nonce",t),e}function Ade(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Tde(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Rde=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Cde())&&(Ade(t,n),Tde(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Nde=function(){var e=Rde();return function(t,n){B.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},U5=function(){var e=Nde(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Ide={left:0,top:0,right:0,gap:0},$S=function(e){return parseInt(e||"",10)||0},Ode=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[$S(n),$S(r),$S(a)]},jde=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Ide;var t=Ode(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Dde=U5(),Ff="data-scroll-locked",Mde=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(gde,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Ff,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(nb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(rb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(nb," .").concat(nb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(rb," .").concat(rb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ff,`] {
    `).concat(yde,": ").concat(s,`px;
  }
`)},F4=function(){var e=parseInt(document.body.getAttribute(Ff)||"0",10);return isFinite(e)?e:0},Pde=function(){B.useEffect(function(){return document.body.setAttribute(Ff,(F4()+1).toString()),function(){var e=F4()-1;e<=0?document.body.removeAttribute(Ff):document.body.setAttribute(Ff,e.toString())}},[])},Fde=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Pde();var i=B.useMemo(function(){return jde(a)},[a]);return B.createElement(Dde,{styles:Mde(i,!t,a,n?"":"!important")})},Z2=!1;if(typeof window<"u")try{var zy=Object.defineProperty({},"passive",{get:function(){return Z2=!0,!0}});window.addEventListener("test",zy,zy),window.removeEventListener("test",zy,zy)}catch{Z2=!1}var xf=Z2?{passive:!1}:!1,Lde=function(e){return e.tagName==="TEXTAREA"},q5=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Lde(e)&&n[t]==="visible")},$de=function(e){return q5(e,"overflowY")},Bde=function(e){return q5(e,"overflowX")},L4=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=H5(e,r);if(a){var i=V5(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},zde=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Ude=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},H5=function(e,t){return e==="v"?$de(t):Bde(t)},V5=function(e,t){return e==="v"?zde(t):Ude(t)},qde=function(e,t){return e==="h"&&t==="rtl"?-1:1},Hde=function(e,t,n,r,a){var i=qde(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),c=!1,f=o>0,h=0,m=0;do{var g=V5(e,s),v=g[0],w=g[1],_=g[2],x=w-_-i*v;(v||x)&&H5(e,s)&&(h+=x,m+=v),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(c=!0),c},Uy=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$4=function(e){return[e.deltaX,e.deltaY]},B4=function(e){return e&&"current"in e?e.current:e},Vde=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Gde=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Wde=0,Sf=[];function Kde(e){var t=B.useRef([]),n=B.useRef([0,0]),r=B.useRef(),a=B.useState(Wde++)[0],i=B.useState(U5)[0],o=B.useRef(e);B.useEffect(function(){o.current=e},[e]),B.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var w=mde([e.lockRef.current],(e.shards||[]).map(B4),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=B.useCallback(function(w,_){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var x=Uy(w),S=n.current,E="deltaX"in w?w.deltaX:S[0]-x[0],C="deltaY"in w?w.deltaY:S[1]-x[1],A,O=w.target,j=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in w&&j==="h"&&O.type==="range")return!1;var N=L4(j,O);if(!N)return!0;if(N?A=j:(A=j==="v"?"h":"v",N=L4(j,O)),!N)return!1;if(!r.current&&"changedTouches"in w&&(E||C)&&(r.current=A),!A)return!0;var U=r.current||A;return Hde(U,_,w,U==="h"?E:C)},[]),u=B.useCallback(function(w){var _=w;if(!(!Sf.length||Sf[Sf.length-1]!==i)){var x="deltaY"in _?$4(_):Uy(_),S=t.current.filter(function(A){return A.name===_.type&&(A.target===_.target||_.target===A.shadowParent)&&Vde(A.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(B4).filter(Boolean).filter(function(A){return A.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),c=B.useCallback(function(w,_,x,S){var E={name:w,delta:_,target:x,should:S,shadowParent:Zde(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),f=B.useCallback(function(w){n.current=Uy(w),r.current=void 0},[]),h=B.useCallback(function(w){c(w.type,$4(w),w.target,s(w,e.lockRef.current))},[]),m=B.useCallback(function(w){c(w.type,Uy(w),w.target,s(w,e.lockRef.current))},[]);B.useEffect(function(){return Sf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",u,xf),document.addEventListener("touchmove",u,xf),document.addEventListener("touchstart",f,xf),function(){Sf=Sf.filter(function(w){return w!==i}),document.removeEventListener("wheel",u,xf),document.removeEventListener("touchmove",u,xf),document.removeEventListener("touchstart",f,xf)}},[]);var g=e.removeScrollBar,v=e.inert;return B.createElement(B.Fragment,null,v?B.createElement(i,{styles:Gde(a)}):null,g?B.createElement(Fde,{gapMode:e.gapMode}):null)}function Zde(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Yde=Ede(z5,Kde);var X0=B.forwardRef(function(e,t){return B.createElement(ww,Ss({},e,{ref:t,sideCar:Yde}))});X0.classNames=ww.classNames;var Xde=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ef=new WeakMap,qy=new WeakMap,Hy={},BS=0,G5=function(e){return e&&(e.host||G5(e.parentNode))},Jde=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=G5(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Qde=function(e,t,n,r){var a=Jde(t,Array.isArray(e)?e:[e]);Hy[n]||(Hy[n]=new WeakMap);var i=Hy[n],o=[],s=new Set,u=new Set(a),c=function(h){!h||s.has(h)||(s.add(h),c(h.parentNode))};a.forEach(c);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(m){if(s.has(m))f(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",w=(Ef.get(m)||0)+1,_=(i.get(m)||0)+1;Ef.set(m,w),i.set(m,_),o.push(m),w===1&&v&&qy.set(m,!0),_===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return f(t),s.clear(),BS++,function(){o.forEach(function(h){var m=Ef.get(h)-1,g=i.get(h)-1;Ef.set(h,m),i.set(h,g),m||(qy.has(h)||h.removeAttribute(r),qy.delete(h)),g||h.removeAttribute(n)}),BS--,BS||(Ef=new WeakMap,Ef=new WeakMap,qy=new WeakMap,Hy={})}},_w=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Xde(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Qde(r,a,n,"aria-hidden")):function(){return null}},xw="Dialog",[W5,Nge]=Ri(xw),[efe,Jo]=W5(xw),K5=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=B.useRef(null),u=B.useRef(null),[c,f]=Ds({prop:r,defaultProp:a??!1,onChange:i,caller:xw});return y.jsx(efe,{scope:t,triggerRef:s,contentRef:u,contentId:Ts(),titleId:Ts(),descriptionId:Ts(),open:c,onOpenChange:f,onOpenToggle:B.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};K5.displayName=xw;var Z5="DialogTrigger",tfe=B.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Jo(Z5,n),i=xn(t,a.triggerRef);return y.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":rC(a.open),...r,ref:i,onClick:zt(e.onClick,a.onOpenToggle)})});tfe.displayName=Z5;var tC="DialogPortal",[nfe,Y5]=W5(tC,{forceMount:void 0}),X5=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Jo(tC,t);return y.jsx(nfe,{scope:t,forceMount:n,children:B.Children.map(r,o=>y.jsx(Na,{present:n||i.open,children:y.jsx(yh,{asChild:!0,container:a,children:o})}))})};X5.displayName=tC;var fv="DialogOverlay",J5=B.forwardRef((e,t)=>{const n=Y5(fv,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Jo(fv,e.__scopeDialog);return i.modal?y.jsx(Na,{present:r||i.open,children:y.jsx(afe,{...a,ref:t})}):null});J5.displayName=fv;var rfe=Iu("DialogOverlay.RemoveScroll"),afe=B.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Jo(fv,n);return y.jsx(X0,{as:rfe,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(an.div,{"data-state":rC(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),rd="DialogContent",Q5=B.forwardRef((e,t)=>{const n=Y5(rd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Jo(rd,e.__scopeDialog);return y.jsx(Na,{present:r||i.open,children:i.modal?y.jsx(ife,{...a,ref:t}):y.jsx(ofe,{...a,ref:t})})});Q5.displayName=rd;var ife=B.forwardRef((e,t)=>{const n=Jo(rd,e.__scopeDialog),r=B.useRef(null),a=xn(t,n.contentRef,r);return B.useEffect(()=>{const i=r.current;if(i)return _w(i)},[]),y.jsx(eF,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:zt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:zt(e.onFocusOutside,i=>i.preventDefault())})}),ofe=B.forwardRef((e,t)=>{const n=Jo(rd,e.__scopeDialog),r=B.useRef(!1),a=B.useRef(!1);return y.jsx(eF,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),eF=B.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=Jo(rd,n),u=B.useRef(null),c=xn(t,u);return vw(),y.jsxs(y.Fragment,{children:[y.jsx(Y0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(ph,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":rC(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(sfe,{titleId:s.titleId}),y.jsx(ufe,{contentRef:u,descriptionId:s.descriptionId})]})]})}),nC="DialogTitle",tF=B.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Jo(nC,n);return y.jsx(an.h2,{id:a.titleId,...r,ref:t})});tF.displayName=nC;var nF="DialogDescription",rF=B.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Jo(nF,n);return y.jsx(an.p,{id:a.descriptionId,...r,ref:t})});rF.displayName=nF;var aF="DialogClose",iF=B.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Jo(aF,n);return y.jsx(an.button,{type:"button",...r,ref:t,onClick:zt(e.onClick,()=>a.onOpenChange(!1))})});iF.displayName=aF;function rC(e){return e?"open":"closed"}var oF="DialogTitleWarning",[Ige,sF]=PW(oF,{contentName:rd,titleName:nC,docsSlug:"dialog"}),sfe=({titleId:e})=>{const t=sF(oF),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return B.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},lfe="DialogDescriptionWarning",ufe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${sF(lfe).contentName}}.`;return B.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},cfe=K5,dfe=X5,ffe=J5,hfe=Q5,pfe=tF,mfe=rF,gfe=iF;function Sw({...e}){return y.jsx(cfe,{"data-slot":"dialog",...e})}function yfe({...e}){return y.jsx(dfe,{"data-slot":"dialog-portal",...e})}function bfe({className:e,...t}){return y.jsx(ffe,{"data-slot":"dialog-overlay",className:Ut("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Ew({className:e,children:t,...n}){return y.jsxs(yfe,{"data-slot":"dialog-portal",children:[y.jsx(bfe,{}),y.jsxs(hfe,{"data-slot":"dialog-content",className:Ut("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(gfe,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(Yu,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function kw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:Ut("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Cw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:Ut("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Aw({className:e,...t}){return y.jsx(pfe,{"data-slot":"dialog-title",className:Ut("text-lg leading-none font-semibold",e),...t})}function Tw({className:e,...t}){return y.jsx(mfe,{"data-slot":"dialog-description",className:Ut("text-muted-foreground text-sm",e),...t})}function Rw(e){const t=e+"CollectionProvider",[n,r]=Ri(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:_,children:x}=w,S=wt.useRef(null),E=wt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",u=Iu(s),c=wt.forwardRef((w,_)=>{const{scope:x,children:S}=w,E=i(s,x),C=xn(_,E.collectionRef);return y.jsx(u,{ref:C,children:S})});c.displayName=s;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=Iu(f),g=wt.forwardRef((w,_)=>{const{scope:x,children:S,...E}=w,C=wt.useRef(null),A=xn(_,C),O=i(f,x);return wt.useEffect(()=>(O.itemMap.set(C,{ref:C,...E}),()=>void O.itemMap.delete(C))),y.jsx(m,{[h]:"",ref:A,children:S})});g.displayName=f;function v(w){const _=i(e+"CollectionConsumer",w);return wt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((O,j)=>E.indexOf(O.ref.current)-E.indexOf(j.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var zS="rovingFocusGroup.onEntryFocus",vfe={bubbles:!1,cancelable:!0},J0="RovingFocusGroup",[Y2,lF,wfe]=Rw(J0),[_fe,Nw]=Ri(J0,[wfe]),[xfe,Sfe]=_fe(J0),uF=B.forwardRef((e,t)=>y.jsx(Y2.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(Y2.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(Efe,{...e,ref:t})})}));uF.displayName=J0;var Efe=B.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,m=B.useRef(null),g=xn(t,m),v=jh(i),[w,_]=Ds({prop:o,defaultProp:s??null,onChange:u,caller:J0}),[x,S]=B.useState(!1),E=Ea(c),C=lF(n),A=B.useRef(!1),[O,j]=B.useState(0);return B.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(zS,E),()=>N.removeEventListener(zS,E)},[E]),y.jsx(xfe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:w,onItemFocus:B.useCallback(N=>_(N),[_]),onItemShiftTab:B.useCallback(()=>S(!0),[]),onFocusableItemAdd:B.useCallback(()=>j(N=>N+1),[]),onFocusableItemRemove:B.useCallback(()=>j(N=>N-1),[]),children:y.jsx(an.div,{tabIndex:x||O===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:zt(e.onMouseDown,()=>{A.current=!0}),onFocus:zt(e.onFocus,N=>{const U=!A.current;if(N.target===N.currentTarget&&U&&!x){const V=new CustomEvent(zS,vfe);if(N.currentTarget.dispatchEvent(V),!V.defaultPrevented){const J=C().filter(le=>le.focusable),P=J.find(le=>le.active),Z=J.find(le=>le.id===w),ue=[P,Z,...J].filter(Boolean).map(le=>le.ref.current);fF(ue,f)}}A.current=!1}),onBlur:zt(e.onBlur,()=>S(!1))})})}),cF="RovingFocusGroupItem",dF=B.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,u=Ts(),c=i||u,f=Sfe(cF,n),h=f.currentTabStopId===c,m=lF(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:w}=f;return B.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),y.jsx(Y2.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:y.jsx(an.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:zt(e.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:zt(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:zt(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=Afe(_,f.orientation,f.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=m().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=f.loop?Tfe(E,C+1):E.slice(C+1)}setTimeout(()=>fF(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:w!=null}):o})})});dF.displayName=cF;var kfe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cfe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Afe(e,t,n){const r=Cfe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return kfe[r]}function fF(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Tfe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var hF=uF,pF=dF,Iw="Tabs",[Rfe,Oge]=Ri(Iw,[Nw]),mF=Nw(),[Nfe,aC]=Rfe(Iw),gF=B.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:u="automatic",...c}=e,f=jh(s),[h,m]=Ds({prop:r,onChange:a,defaultProp:i??"",caller:Iw});return y.jsx(Nfe,{scope:n,baseId:Ts(),value:h,onValueChange:m,orientation:o,dir:f,activationMode:u,children:y.jsx(an.div,{dir:f,"data-orientation":o,...c,ref:t})})});gF.displayName=Iw;var yF="TabsList",bF=B.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=aC(yF,n),o=mF(n);return y.jsx(hF,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(an.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});bF.displayName=yF;var vF="TabsTrigger",wF=B.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=aC(vF,n),s=mF(n),u=SF(o.baseId,r),c=EF(o.baseId,r),f=r===o.value;return y.jsx(pF,{asChild:!0,...s,focusable:!a,active:f,children:y.jsx(an.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:zt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:zt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:zt(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!a&&h&&o.onValueChange(r)})})})});wF.displayName=vF;var _F="TabsContent",xF=B.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=aC(_F,n),u=SF(s.baseId,r),c=EF(s.baseId,r),f=r===s.value,h=B.useRef(f);return B.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),y.jsx(Na,{present:a||f,children:({present:m})=>y.jsx(an.div,{"data-state":f?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!m,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});xF.displayName=_F;function SF(e,t){return`${e}-trigger-${t}`}function EF(e,t){return`${e}-content-${t}`}var Ife=gF,Ofe=bF,jfe=wF,Dfe=xF;function Ow({className:e,...t}){return y.jsx(Ife,{"data-slot":"tabs",className:Ut("flex flex-col gap-2",e),...t})}function jw({className:e,...t}){return y.jsx(Ofe,{"data-slot":"tabs-list",className:Ut("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function li({className:e,...t}){return y.jsx(jfe,{"data-slot":"tabs-trigger",className:Ut("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function ui({className:e,...t}){return y.jsx(Dfe,{"data-slot":"tabs-content",className:Ut("flex-1 outline-none",e),...t})}var Mfe="Label",kF=B.forwardRef((e,t)=>y.jsx(an.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));kF.displayName=Mfe;var Pfe=kF;function dn({className:e,...t}){return y.jsx(Pfe,{"data-slot":"label",className:Ut("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Dw(e){const t=B.useRef({value:e,previous:e});return B.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Mw="Switch",[Ffe,jge]=Ri(Mw),[Lfe,$fe]=Ffe(Mw),CF=B.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=B.useState(null),v=xn(t,E=>g(E)),w=B.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Ds({prop:a,defaultProp:i??!1,onChange:c,caller:Mw});return y.jsxs(Lfe,{scope:n,checked:x,disabled:s,children:[y.jsx(an.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":NF(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onClick:zt(e.onClick,E=>{S(C=>!C),_&&(w.current=E.isPropagationStopped(),w.current||E.stopPropagation())})}),_&&y.jsx(RF,{control:m,bubbles:!w.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"}})]})});CF.displayName=Mw;var AF="SwitchThumb",TF=B.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=$fe(AF,n);return y.jsx(an.span,{"data-state":NF(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});TF.displayName=AF;var Bfe="SwitchBubbleInput",RF=B.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=B.useRef(null),s=xn(o,i),u=Dw(n),c=jv(t);return B.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&g){const v=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(v)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});RF.displayName=Bfe;function NF(e){return e?"checked":"unchecked"}var zfe=CF,Ufe=TF;function Dl({className:e,...t}){return y.jsx(zfe,{"data-slot":"switch",className:Ut("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Ufe,{"data-slot":"switch-thumb",className:Ut("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var qfe=[" ","Enter","ArrowUp","ArrowDown"],Hfe=[" ","Enter"],ad="Select",[Pw,Fw,Vfe]=Rw(ad),[Dh,Dge]=Ri(ad,[Vfe,Xu]),Lw=Xu(),[Gfe,sc]=Dh(ad),[Wfe,Kfe]=Dh(ad),IF=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:u,dir:c,name:f,autoComplete:h,disabled:m,required:g,form:v}=e,w=Lw(t),[_,x]=B.useState(null),[S,E]=B.useState(null),[C,A]=B.useState(!1),O=jh(c),[j,N]=Ds({prop:r,defaultProp:a??!1,onChange:i,caller:ad}),[U,V]=Ds({prop:o,defaultProp:s,onChange:u,caller:ad}),J=B.useRef(null),P=_?v||!!_.closest("form"):!0,[Z,F]=B.useState(new Set),ue=Array.from(Z).map(le=>le.props.value).join(";");return y.jsx(Dv,{...w,children:y.jsxs(Gfe,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:A,contentId:Ts(),value:U,onValueChange:V,open:j,onOpenChange:N,dir:O,triggerPointerDownPosRef:J,disabled:m,children:[y.jsx(Pw.Provider,{scope:t,children:y.jsx(Wfe,{scope:e.__scopeSelect,onNativeOptionAdd:B.useCallback(le=>{F(ne=>new Set(ne).add(le))},[]),onNativeOptionRemove:B.useCallback(le=>{F(ne=>{const Q=new Set(ne);return Q.delete(le),Q})},[]),children:n})}),P?y.jsxs(QF,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:U,onChange:le=>V(le.target.value),disabled:m,form:v,children:[U===void 0?y.jsx("option",{value:""}):null,Array.from(Z)]},ue):null]})})};IF.displayName=ad;var OF="SelectTrigger",jF=B.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Lw(n),o=sc(OF,n),s=o.disabled||r,u=xn(t,o.onTriggerChange),c=Fw(n),f=B.useRef("touch"),[h,m,g]=tL(w=>{const _=c().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=nL(_,w,x);S!==void 0&&o.onValueChange(S.value)}),v=w=>{s||(o.onOpenChange(!0),g()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return y.jsx(p0,{asChild:!0,...i,children:y.jsx(an.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":eL(o.value)?"":void 0,...a,ref:u,onClick:zt(a.onClick,w=>{w.currentTarget.focus(),f.current!=="mouse"&&v(w)}),onPointerDown:zt(a.onPointerDown,w=>{f.current=w.pointerType;const _=w.target;_.hasPointerCapture(w.pointerId)&&_.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(v(w),w.preventDefault())}),onKeyDown:zt(a.onKeyDown,w=>{const _=h.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&m(w.key),!(_&&w.key===" ")&&qfe.includes(w.key)&&(v(),w.preventDefault())})})})});jF.displayName=OF;var DF="SelectValue",MF=B.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,u=sc(DF,n),{onValueNodeHasChildrenChange:c}=u,f=i!==void 0,h=xn(t,u.onValueNodeChange);return Fa(()=>{c(f)},[c,f]),y.jsx(an.span,{...s,ref:h,style:{pointerEvents:"none"},children:eL(u.value)?y.jsx(y.Fragment,{children:o}):i})});MF.displayName=DF;var Zfe="SelectIcon",PF=B.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(an.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});PF.displayName=Zfe;var Yfe="SelectPortal",FF=e=>y.jsx(yh,{asChild:!0,...e});FF.displayName=Yfe;var id="SelectContent",LF=B.forwardRef((e,t)=>{const n=sc(id,e.__scopeSelect),[r,a]=B.useState();if(Fa(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?f0.createPortal(y.jsx($F,{scope:e.__scopeSelect,children:y.jsx(Pw.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(BF,{...e,ref:t})});LF.displayName=id;var No=10,[$F,lc]=Dh(id),Xfe="SelectContentImpl",Jfe=Iu("SelectContent.RemoveScroll"),BF=B.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:w,avoidCollisions:_,...x}=e,S=sc(id,n),[E,C]=B.useState(null),[A,O]=B.useState(null),j=xn(t,Pe=>C(Pe)),[N,U]=B.useState(null),[V,J]=B.useState(null),P=Fw(n),[Z,F]=B.useState(!1),ue=B.useRef(!1);B.useEffect(()=>{if(E)return _w(E)},[E]),vw();const le=B.useCallback(Pe=>{const[Oe,...Ae]=P().map(Fe=>Fe.ref.current),[$e]=Ae.slice(-1),qe=document.activeElement;for(const Fe of Pe)if(Fe===qe||(Fe==null||Fe.scrollIntoView({block:"nearest"}),Fe===Oe&&A&&(A.scrollTop=0),Fe===$e&&A&&(A.scrollTop=A.scrollHeight),Fe==null||Fe.focus(),document.activeElement!==qe))return},[P,A]),ne=B.useCallback(()=>le([N,E]),[le,N,E]);B.useEffect(()=>{Z&&ne()},[Z,ne]);const{onOpenChange:Q,triggerPointerDownPosRef:te}=S;B.useEffect(()=>{if(E){let Pe={x:0,y:0};const Oe=$e=>{var qe,Fe;Pe={x:Math.abs(Math.round($e.pageX)-(((qe=te.current)==null?void 0:qe.x)??0)),y:Math.abs(Math.round($e.pageY)-(((Fe=te.current)==null?void 0:Fe.y)??0))}},Ae=$e=>{Pe.x<=10&&Pe.y<=10?$e.preventDefault():E.contains($e.target)||Q(!1),document.removeEventListener("pointermove",Oe),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Oe),document.addEventListener("pointerup",Ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Oe),document.removeEventListener("pointerup",Ae,{capture:!0})}}},[E,Q,te]),B.useEffect(()=>{const Pe=()=>Q(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[Q]);const[G,X]=tL(Pe=>{const Oe=P().filter(qe=>!qe.disabled),Ae=Oe.find(qe=>qe.ref.current===document.activeElement),$e=nL(Oe,Pe,Ae);$e&&setTimeout(()=>$e.ref.current.focus())}),ae=B.useCallback((Pe,Oe,Ae)=>{const $e=!ue.current&&!Ae;(S.value!==void 0&&S.value===Oe||$e)&&(U(Pe),$e&&(ue.current=!0))},[S.value]),be=B.useCallback(()=>E==null?void 0:E.focus(),[E]),we=B.useCallback((Pe,Oe,Ae)=>{const $e=!ue.current&&!Ae;(S.value!==void 0&&S.value===Oe||$e)&&J(Pe)},[S.value]),fe=r==="popper"?X2:zF,Me=fe===X2?{side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:w,avoidCollisions:_}:{};return y.jsx($F,{scope:n,content:E,viewport:A,onViewportChange:O,itemRefCallback:ae,selectedItem:N,onItemLeave:be,itemTextRefCallback:we,focusSelectedItem:ne,selectedItemText:V,position:r,isPositioned:Z,searchRef:G,children:y.jsx(X0,{as:Jfe,allowPinchZoom:!0,children:y.jsx(Y0,{asChild:!0,trapped:S.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:zt(a,Pe=>{var Oe;(Oe=S.trigger)==null||Oe.focus({preventScroll:!0}),Pe.preventDefault()}),children:y.jsx(ph,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(fe,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Pe=>Pe.preventDefault(),...x,...Me,onPlaced:()=>F(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:zt(x.onKeyDown,Pe=>{const Oe=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Oe&&Pe.key.length===1&&X(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let $e=P().filter(qe=>!qe.disabled).map(qe=>qe.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&($e=$e.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const qe=Pe.target,Fe=$e.indexOf(qe);$e=$e.slice(Fe+1)}setTimeout(()=>le($e)),Pe.preventDefault()}})})})})})})});BF.displayName=Xfe;var Qfe="SelectItemAlignedPosition",zF=B.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=sc(id,n),o=lc(id,n),[s,u]=B.useState(null),[c,f]=B.useState(null),h=xn(t,j=>f(j)),m=Fw(n),g=B.useRef(!1),v=B.useRef(!0),{viewport:w,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=B.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&w&&_&&x){const j=i.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),U=i.valueNode.getBoundingClientRect(),V=x.getBoundingClientRect();if(i.dir!=="rtl"){const qe=V.left-N.left,Fe=U.left-qe,Ne=j.left-Fe,$=j.width+Ne,Se=Math.max($,N.width),ke=window.innerWidth-No,ce=Wm(Fe,[No,Math.max(No,ke-Se)]);s.style.minWidth=$+"px",s.style.left=ce+"px"}else{const qe=N.right-V.right,Fe=window.innerWidth-U.right-qe,Ne=window.innerWidth-j.right-Fe,$=j.width+Ne,Se=Math.max($,N.width),ke=window.innerWidth-No,ce=Wm(Fe,[No,Math.max(No,ke-Se)]);s.style.minWidth=$+"px",s.style.right=ce+"px"}const J=m(),P=window.innerHeight-No*2,Z=w.scrollHeight,F=window.getComputedStyle(c),ue=parseInt(F.borderTopWidth,10),le=parseInt(F.paddingTop,10),ne=parseInt(F.borderBottomWidth,10),Q=parseInt(F.paddingBottom,10),te=ue+le+Z+Q+ne,G=Math.min(_.offsetHeight*5,te),X=window.getComputedStyle(w),ae=parseInt(X.paddingTop,10),be=parseInt(X.paddingBottom,10),we=j.top+j.height/2-No,fe=P-we,Me=_.offsetHeight/2,Pe=_.offsetTop+Me,Oe=ue+le+Pe,Ae=te-Oe;if(Oe<=we){const qe=J.length>0&&_===J[J.length-1].ref.current;s.style.bottom="0px";const Fe=c.clientHeight-w.offsetTop-w.offsetHeight,Ne=Math.max(fe,Me+(qe?be:0)+Fe+ne),$=Oe+Ne;s.style.height=$+"px"}else{const qe=J.length>0&&_===J[0].ref.current;s.style.top="0px";const Ne=Math.max(we,ue+w.offsetTop+(qe?ae:0)+Me)+Ae;s.style.height=Ne+"px",w.scrollTop=Oe-we+w.offsetTop}s.style.margin=`${No}px 0`,s.style.minHeight=G+"px",s.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,s,c,w,_,x,i.dir,r]);Fa(()=>E(),[E]);const[C,A]=B.useState();Fa(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const O=B.useCallback(j=>{j&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return y.jsx(the,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(an.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});zF.displayName=Qfe;var ehe="SelectPopperPosition",X2=B.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=No,...i}=e,o=Lw(n);return y.jsx(Mv,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});X2.displayName=ehe;var[the,iC]=Dh(id,{}),J2="SelectViewport",UF=B.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=lc(J2,n),o=iC(J2,n),s=xn(t,i.onViewportChange),u=B.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(Pw.Slot,{scope:n,children:y.jsx(an.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:zt(a.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(u.current-f.scrollTop);if(g>0){const v=window.innerHeight-No*2,w=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(w,_);if(x<v){const S=x+g,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});UF.displayName=J2;var qF="SelectGroup",[nhe,rhe]=Dh(qF),ahe=B.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ts();return y.jsx(nhe,{scope:n,id:a,children:y.jsx(an.div,{role:"group","aria-labelledby":a,...r,ref:t})})});ahe.displayName=qF;var HF="SelectLabel",ihe=B.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=rhe(HF,n);return y.jsx(an.div,{id:a.id,...r,ref:t})});ihe.displayName=HF;var hv="SelectItem",[ohe,VF]=Dh(hv),GF=B.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=sc(hv,n),u=lc(hv,n),c=s.value===r,[f,h]=B.useState(i??""),[m,g]=B.useState(!1),v=xn(t,S=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,S,r,a)}),w=Ts(),_=B.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(ohe,{scope:n,value:r,disabled:a,textId:w,isSelected:c,onItemTextChange:B.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(Pw.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:y.jsx(an.div,{role:"option","aria-labelledby":w,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:zt(o.onFocus,()=>g(!0)),onBlur:zt(o.onBlur,()=>g(!1)),onClick:zt(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:zt(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:zt(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:zt(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=u.onItemLeave)==null||E.call(u):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:zt(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:zt(o.onKeyDown,S=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(Hfe.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});GF.displayName=hv;var Jp="SelectItemText",WF=B.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=sc(Jp,n),s=lc(Jp,n),u=VF(Jp,n),c=Kfe(Jp,n),[f,h]=B.useState(null),m=xn(t,x=>h(x),u.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,u.value,u.disabled)}),g=f==null?void 0:f.textContent,v=B.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:w,onNativeOptionRemove:_}=c;return Fa(()=>(w(v),()=>_(v)),[w,_,v]),y.jsxs(y.Fragment,{children:[y.jsx(an.span,{id:u.textId,...i,ref:m}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?f0.createPortal(i.children,o.valueNode):null]})});WF.displayName=Jp;var KF="SelectItemIndicator",ZF=B.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return VF(KF,n).isSelected?y.jsx(an.span,{"aria-hidden":!0,...r,ref:t}):null});ZF.displayName=KF;var Q2="SelectScrollUpButton",YF=B.forwardRef((e,t)=>{const n=lc(Q2,e.__scopeSelect),r=iC(Q2,e.__scopeSelect),[a,i]=B.useState(!1),o=xn(t,r.onScrollButtonChange);return Fa(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollTop>0;i(c)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(JF,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});YF.displayName=Q2;var eE="SelectScrollDownButton",XF=B.forwardRef((e,t)=>{const n=lc(eE,e.__scopeSelect),r=iC(eE,e.__scopeSelect),[a,i]=B.useState(!1),o=xn(t,r.onScrollButtonChange);return Fa(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<c;i(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(JF,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});XF.displayName=eE;var JF=B.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=lc("SelectScrollButton",n),o=B.useRef(null),s=Fw(n),u=B.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return B.useEffect(()=>()=>u(),[u]),Fa(()=>{var f;const c=s().find(h=>h.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),y.jsx(an.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:zt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:zt(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:zt(a.onPointerLeave,()=>{u()})})}),she="SelectSeparator",lhe=B.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(an.div,{"aria-hidden":!0,...r,ref:t})});lhe.displayName=she;var tE="SelectArrow",uhe=B.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Lw(n),i=sc(tE,n),o=lc(tE,n);return i.open&&o.position==="popper"?y.jsx(Pv,{...a,...r,ref:t}):null});uhe.displayName=tE;var che="SelectBubbleInput",QF=B.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=B.useRef(null),i=xn(r,a),o=Dw(t);return B.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(an.select,{...n,style:{...yD,...n.style},ref:i,defaultValue:t})});QF.displayName=che;function eL(e){return e===""||e===void 0}function tL(e){const t=Ea(e),n=B.useRef(""),r=B.useRef(0),a=B.useCallback(o=>{const s=n.current+o;t(s),function u(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(s)},[t]),i=B.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return B.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function nL(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=dhe(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function dhe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var fhe=IF,hhe=jF,phe=MF,mhe=PF,ghe=FF,yhe=LF,bhe=UF,vhe=GF,whe=WF,_he=ZF,xhe=YF,She=XF;function wd({...e}){return y.jsx(fhe,{"data-slot":"select",...e})}function _d({...e}){return y.jsx(phe,{"data-slot":"select-value",...e})}function xd({className:e,size:t="default",children:n,...r}){return y.jsxs(hhe,{"data-slot":"select-trigger","data-size":t,className:Ut("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(mhe,{asChild:!0,children:y.jsx(uE,{className:"size-4 opacity-50"})})]})}function Sd({className:e,children:t,position:n="popper",...r}){return y.jsx(ghe,{children:y.jsxs(yhe,{"data-slot":"select-content",className:Ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(Ehe,{}),y.jsx(bhe,{className:Ut("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(khe,{})]})})}function Wi({className:e,children:t,...n}){return y.jsxs(vhe,{"data-slot":"select-item",className:Ut("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(_he,{children:y.jsx(od,{className:"size-4"})})}),y.jsx(whe,{children:t})]})}function Ehe({className:e,...t}){return y.jsx(xhe,{"data-slot":"select-scroll-up-button",className:Ut("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(ZB,{className:"size-4"})})}function khe({className:e,...t}){return y.jsx(She,{"data-slot":"select-scroll-down-button",className:Ut("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(uE,{className:"size-4"})})}var rL=["PageUp","PageDown"],aL=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],iL={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Mh="Slider",[nE,Che,Ahe]=Rw(Mh),[oL,Mge]=Ri(Mh,[Ahe]),[The,$w]=oL(Mh),sL=B.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...w}=e,_=B.useRef(new Set),x=B.useRef(0),E=o==="horizontal"?Rhe:Nhe,[C=[],A]=Ds({prop:f,defaultProp:c,onChange:J=>{var Z;(Z=[..._.current][x.current])==null||Z.focus(),h(J)}}),O=B.useRef(C);function j(J){const P=Mhe(C,J);V(J,P)}function N(J){V(J,x.current)}function U(){const J=O.current[x.current];C[x.current]!==J&&m(C)}function V(J,P,{commit:Z}={commit:!1}){const F=$he(i),ue=Bhe(Math.round((J-r)/i)*i+r,F),le=Wm(ue,[r,a]);A((ne=[])=>{const Q=jhe(ne,le,P);if(Lhe(Q,u*i)){x.current=Q.indexOf(le);const te=String(Q)!==String(ne);return te&&Z&&m(Q),te?Q:ne}else return ne})}return y.jsx(The,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:C,orientation:o,form:v,children:y.jsx(nE.Provider,{scope:e.__scopeSlider,children:y.jsx(nE.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...w,ref:t,onPointerDown:zt(w.onPointerDown,()=>{s||(O.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:j,onSlideMove:s?void 0:N,onSlideEnd:s?void 0:U,onHomeKeyDown:()=>!s&&V(r,0,{commit:!0}),onEndKeyDown:()=>!s&&V(a,C.length-1,{commit:!0}),onStepKeyDown:({event:J,direction:P})=>{if(!s){const ue=rL.includes(J.key)||J.shiftKey&&aL.includes(J.key)?10:1,le=x.current,ne=C[le],Q=i*ue*P;V(ne+Q,le,{commit:!0})}}})})})})});sL.displayName=Mh;var[lL,uL]=oL(Mh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Rhe=B.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:u,onStepKeyDown:c,...f}=e,[h,m]=B.useState(null),g=xn(t,E=>m(E)),v=B.useRef(void 0),w=jh(a),_=w==="ltr",x=_&&!i||!_&&i;function S(E){const C=v.current||h.getBoundingClientRect(),A=[0,C.width],j=oC(A,x?[n,r]:[r,n]);return v.current=C,j(E-C.left)}return y.jsx(lL,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(cL,{dir:w,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);s==null||s(C)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:E=>{const A=iL[x?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:A?-1:1})}})})}),Nhe=B.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:u,...c}=e,f=B.useRef(null),h=xn(t,f),m=B.useRef(void 0),g=!a;function v(w){const _=m.current||f.current.getBoundingClientRect(),x=[0,_.height],E=oC(x,g?[r,n]:[n,r]);return m.current=_,E(w-_.top)}return y.jsx(lL,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(cL,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const _=v(w.clientY);i==null||i(_)},onSlideMove:w=>{const _=v(w.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,s==null||s()},onStepKeyDown:w=>{const x=iL[g?"from-bottom":"from-top"].includes(w.key);u==null||u({event:w,direction:x?-1:1})}})})}),cL=B.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:u,...c}=e,f=$w(Mh,n);return y.jsx(an.span,{...c,ref:t,onKeyDown:zt(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):rL.concat(aL).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:zt(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:zt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:zt(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),dL="SliderTrack",fL=B.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=$w(dL,n);return y.jsx(an.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});fL.displayName=dL;var rE="SliderRange",hL=B.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=$w(rE,n),i=uL(rE,n),o=B.useRef(null),s=xn(t,o),u=a.values.length,c=a.values.map(m=>gL(m,a.min,a.max)),f=u>1?Math.min(...c):0,h=100-Math.max(...c);return y.jsx(an.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});hL.displayName=rE;var aE="SliderThumb",pL=B.forwardRef((e,t)=>{const n=Che(e.__scopeSlider),[r,a]=B.useState(null),i=xn(t,s=>a(s)),o=B.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(Ihe,{...e,ref:i,index:o})}),Ihe=B.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=$w(aE,n),s=uL(aE,n),[u,c]=B.useState(null),f=xn(t,S=>c(S)),h=u?o.form||!!u.closest("form"):!0,m=jv(u),g=o.values[r],v=g===void 0?0:gL(g,o.min,o.max),w=Dhe(r,o.values.length),_=m==null?void 0:m[s.size],x=_?Phe(_,v,s.direction):0;return B.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${x}px)`},children:[y.jsx(nE.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(an.span,{role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:zt(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(mL,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});pL.displayName=aE;var Ohe="RadioBubbleInput",mL=B.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=B.useRef(null),i=xn(a,r),o=Dw(t);return B.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("input",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(an.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});mL.displayName=Ohe;function jhe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function gL(e,t,n){const i=100/(n-t)*(e-t);return Wm(i,[0,100])}function Dhe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Mhe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function Phe(e,t,n){const r=e/2,i=oC([0,50],[0,r]);return(r-i(t)*n)*n}function Fhe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Lhe(e,t){if(t>0){const n=Fhe(e);return Math.min(...n)>=t}return!0}function oC(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function $he(e){return(String(e).split(".")[1]||"").length}function Bhe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var zhe=sL,Uhe=fL,qhe=hL,Hhe=pL;function As({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=B.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs(zhe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:Ut("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(Uhe,{"data-slot":"slider-track",className:Ut("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(qhe,{"data-slot":"slider-range",className:Ut("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,u)=>y.jsx(Hhe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}var Vhe="Separator",z4="horizontal",Ghe=["horizontal","vertical"],yL=B.forwardRef((e,t)=>{const{decorative:n,orientation:r=z4,...a}=e,i=Whe(r)?r:z4,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(an.div,{"data-orientation":i,...s,...a,ref:t})});yL.displayName=Vhe;function Whe(e){return Ghe.includes(e)}var Khe=yL;function a0({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(Khe,{"data-slot":"separator-root",decorative:n,orientation:t,className:Ut("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const Zhe=()=>{const{theme:e,setTheme:t,enableAdvancedSettings:n,setEnableAdvancedSettings:r,enableStreamingMarkdown:a,setEnableStreamingMarkdown:i,streamingRenderFPS:o,setStreamingRenderFPS:s,streamingCodeRenderFPS:u,setStreamingCodeRenderFPS:c,prismThemeUrl:f,setPrismThemeUrl:h,resetGeneralSettings:m}=zr(In(N=>({theme:N.theme,setTheme:N.setTheme,enableAdvancedSettings:N.enableAdvancedSettings,setEnableAdvancedSettings:N.setEnableAdvancedSettings,enableStreamingMarkdown:N.enableStreamingMarkdown,setEnableStreamingMarkdown:N.setEnableStreamingMarkdown,streamingRenderFPS:N.streamingRenderFPS,setStreamingRenderFPS:N.setStreamingRenderFPS,streamingCodeRenderFPS:N.streamingCodeRenderFPS,setStreamingCodeRenderFPS:N.setStreamingCodeRenderFPS,prismThemeUrl:N.prismThemeUrl,setPrismThemeUrl:N.setPrismThemeUrl,resetGeneralSettings:N.resetGeneralSettings}))),[g,v]=B.useState(o),[w,_]=B.useState(u),x=B.useCallback(N=>{v(N[0])},[]),S=B.useCallback(N=>{s(N[0])},[s]),E=B.useCallback(N=>{const U=N.target.value,V=U===""?30:parseInt(U.replace(/[^0-9]/g,""),10);if(!isNaN(V)){const J=Math.max(1,Math.min(60,V));s(J),v(J)}},[s]),C=B.useCallback(N=>{_(N[0])},[]),A=B.useCallback(N=>{c(N[0])},[c]),O=B.useCallback(N=>{const U=N.target.value,V=U===""?10:parseInt(U.replace(/[^0-9]/g,""),10);if(!isNaN(V)){const J=Math.max(1,Math.min(60,V));c(J),_(J)}},[c]);B.useEffect(()=>{v(o)},[o]),B.useEffect(()=>{_(u)},[u]);const j=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&m()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(dn,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(wd,{value:e??"system",onValueChange:N=>t(N),children:[y.jsx(xd,{id:"theme-select",className:"w-[180px]",children:y.jsx(_d,{placeholder:"Select theme"})}),y.jsxs(Sd,{children:[y.jsx(Wi,{value:"light",children:"Light"}),y.jsx(Wi,{value:"dark",children:"Dark"}),y.jsx(Wi,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-1.5",children:[y.jsx(dn,{htmlFor:"prism-theme-url",className:"font-medium",children:"Code Block Theme URL (Optional)"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use the default themes."}),y.jsx(nr,{id:"prism-theme-url",type:"url",placeholder:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",value:f??"",onChange:N=>h(N.target.value)})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(Dl,{id:"streaming-markdown-switch",checked:a??!0,onCheckedChange:i})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(dn,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["General Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how smoothly streaming text appears. (Default: 30)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(As,{id:"streaming-fps-slider",min:1,max:60,step:1,value:[g],onValueChange:x,onValueCommit:S,className:"flex-grow"}),y.jsx(nr,{type:"number",min:1,max:60,step:1,value:g,onChange:E,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(dn,{htmlFor:"streaming-code-fps-slider",className:"font-medium",children:["Code Block Streaming Update Rate (",w," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Specific update rate when code blocks are streaming (lower values reduce lag). (Default: 10)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(As,{id:"streaming-code-fps-slider",min:1,max:60,step:1,value:[w],onValueChange:C,onValueCommit:A,className:"flex-grow"}),y.jsx(nr,{type:"number",min:1,max:60,step:1,value:w,onChange:O,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(a0,{}),y.jsxs("div",{className:"space-y-2 hidden",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"advanced-settings-switch",className:"font-medium",children:"Enable Advanced Controls"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Show controls for AI parameters (temperature, etc.) and Assistant settings tab."})]}),y.jsx(Dl,{id:"advanced-settings-switch",checked:n??!1,onCheckedChange:r})]})]}),y.jsx(a0,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Lt,{variant:"outline",size:"sm",onClick:j,children:[y.jsx(Yz,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},Yhe=wt.memo(Zhe),bL=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:o,setTopK:s,presencePenalty:u,setPresencePenalty:c,frequencyPenalty:f,setFrequencyPenalty:h,defaultTemperature:m=.7,defaultTopP:g=null,defaultMaxTokens:v=null,defaultTopK:w=null,defaultPresencePenalty:_=0,defaultFrequencyPenalty:x=0,className:S})=>{const[E,C]=B.useState(e??m),[A,O]=B.useState(n??g??1),[j,N]=B.useState(u??_??0),[U,V]=B.useState(f??x??0);B.useEffect(()=>{C(e??m)},[e,m]),B.useEffect(()=>{O(n??g??1)},[n,g]),B.useEffect(()=>{N(u??_??0)},[u,_]),B.useEffect(()=>{V(f??x??0)},[f,x]);const J=B.useCallback((ue,le)=>{const ne=le.target.value,Q=ne===""?null:parseInt(ne,10);(ne===""||!isNaN(Q)&&Q!==null)&&ue(Q)},[]),P=B.useCallback((ue,le)=>{ue(le[0])},[]),Z=B.useCallback(ue=>{ue(null)},[]),F=m!==void 0||g!==void 0||v!==void 0||w!==void 0||_!==void 0||x!==void 0;return y.jsxs("div",{className:Ut("space-y-4 p-4",S),children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",E.toFixed(2),")"]}),y.jsx(As,{id:"param-temperature",min:0,max:1,step:.01,value:[E],onValueChange:ue=>C(ue[0]),onValueCommit:ue=>P(t,ue)}),F&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(t),disabled:e===null,children:["Use Default (",(m==null?void 0:m.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(A??0).toFixed(2),") "]}),y.jsx(As,{id:"param-top-p",min:0,max:1,step:.01,value:[A??1],onValueChange:ue=>O(ue[0]),onValueCommit:ue=>P(r,ue)}),F&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(nr,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:ue=>J(i,ue),min:"1",className:"h-8 text-xs"}),F&&y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(i),disabled:a===null,children:"Use Default"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),y.jsx(nr,{id:"param-top-k",type:"number",placeholder:`Default: ${w??"None"}`,value:o??"",onChange:ue=>J(s,ue),min:"1",className:"h-8 text-xs"}),F&&y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(s),disabled:o===null,children:"Use Default"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(j??0).toFixed(2),")"," "]}),y.jsx(As,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[j??0],onValueChange:ue=>N(ue[0]),onValueCommit:ue=>P(c,ue)}),F&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(c),disabled:u===null,children:["Use Default (",(_==null?void 0:_.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(U??0).toFixed(2),")"," "]}),y.jsx(As,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[U??0],onValueChange:ue=>V(ue[0]),onValueCommit:ue=>P(h,ue)}),F&&y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>Z(h),disabled:f===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]})]})},Xhe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:o,setTopP:s,maxTokens:u,setMaxTokens:c,topK:f,setTopK:h,presencePenalty:m,setPresencePenalty:g,frequencyPenalty:v,setFrequencyPenalty:w}=zr(In(A=>({globalSystemPrompt:A.globalSystemPrompt,setGlobalSystemPrompt:A.setGlobalSystemPrompt,toolMaxSteps:A.toolMaxSteps,setToolMaxSteps:A.setToolMaxSteps,temperature:A.temperature,setTemperature:A.setTemperature,topP:A.topP,setTopP:A.setTopP,maxTokens:A.maxTokens,setMaxTokens:A.setMaxTokens,topK:A.topK,setTopK:A.setTopK,presencePenalty:A.presencePenalty,setPresencePenalty:A.setPresencePenalty,frequencyPenalty:A.frequencyPenalty,setFrequencyPenalty:A.setFrequencyPenalty}))),_=A=>{const O=A.target.value,j=O===""?5:parseInt(O,10);isNaN(j)||r(j)},x=A=>{A!==null&&i(A)},S=A=>{A!==null&&s(A)},E=A=>{A!==null&&g(A)},C=A=>{A!==null&&w(A)};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),y.jsx(dn,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),y.jsx(bw,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:A=>t(A.target.value),rows:4})]}),y.jsx(a0,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),y.jsx(bL,{temperature:a,setTemperature:x,topP:o,setTopP:S,maxTokens:u,setMaxTokens:c,topK:f,setTopK:h,presencePenalty:m,setPresencePenalty:E,frequencyPenalty:v,setFrequencyPenalty:C,className:"p-0 w-full"})]}),y.jsx(a0,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),y.jsx(dn,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),y.jsx(nr,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:_,className:"w-24"})]})]})},Jhe=wt.memo(Xhe),Qhe=()=>{const{importConversation:e,exportAllConversations:t}=dr(In(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=B.useRef(null),[r,a]=B.useState(!1),[i,o]=B.useState(!1),[s,u]=B.useState(!1),c=()=>{var g;(g=n.current)==null||g.click()},f=B.useCallback(async g=>{var w;const v=(w=g.target.files)==null?void 0:w[0];if(v){a(!0);try{await e(v)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=B.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),m=B.useCallback(async()=>{if(window.confirm(`🚨 ARE YOU ABSOLUTELY SURE? 🚨

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await Ht.clearAllData(),ct.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const v="Failed to clear all data";console.error(v,g),ct.error(`${v}: ${g instanceof Error?g.message:String(g)}`),u(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:f,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Lt,{onClick:c,variant:"outline",disabled:r,children:[r?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(d7,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Lt,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(ab,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Lt,{onClick:m,variant:"destructive",disabled:s,children:[s?y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Ou,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},epe=wt.memo(Qhe),tpe=e6("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function vL({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Ut(tpe({variant:t}),e),...n})}function wL({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:Ut("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function _L({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:Ut("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function sC({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:Ut("w-full caption-bottom text-sm",e),...t})})}function lC({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:Ut("[&_tr]:border-b",e),...t})}function uC({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:Ut("[&_tr:last-child]:border-0",e),...t})}function Oo({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:Ut("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Ga({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:Ut("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Pr({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:Ut("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const npe=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=r0(In(O=>({loadedMods:O.loadedMods,addDbMod:O.addDbMod,updateDbMod:O.updateDbMod,deleteDbMod:O.deleteDbMod,dbMods:O.dbMods,isLoading:O.isLoading}))),[o,s]=B.useState(""),[u,c]=B.useState(""),[f,h]=B.useState(""),[m,g]=B.useState(!1),[v,w]=B.useState({}),[_,x]=B.useState({}),S=B.useCallback(async()=>{if(!o.trim()){ct.error("Mod name cannot be empty.");return}if(!u.trim()&&!f.trim()){ct.error("Either Mod URL or Script Content must be provided.");return}if(u.trim()&&f.trim()){ct.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const O={name:o.trim(),sourceUrl:u.trim()||null,scriptContent:f.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(O),s(""),c(""),h(""),ct.info("Mod added. Reload required for changes to take effect.")}catch(O){console.error("Failed to add mod (from component):",O)}finally{g(!1)}},[o,u,f,t,a==null?void 0:a.length]),E=B.useCallback(async O=>{w(j=>({...j,[O.id]:!0}));try{await n(O.id,{enabled:!O.enabled}),ct.info(`Mod "${O.name}" ${O.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(j){console.error("Failed to update mod (from component):",j)}finally{w(j=>({...j,[O.id]:!1}))}},[n]),C=B.useCallback(async O=>{if(window.confirm(`Are you sure you want to delete the mod "${O.name}"? This cannot be undone.`)){x(j=>({...j,[O.id]:!0}));try{await r(O.id),ct.info("Mod deleted. Reload required for changes to take effect.")}catch(j){console.error("Failed to delete mod (from component):",j)}finally{x(j=>({...j,[O.id]:!1}))}}},[r]),A=B.useCallback(O=>{const j=e.find(U=>U.id===O);if(j)if(j.error){const U=j.error instanceof Error?j.error.message:String(j.error);return{status:"Error",error:j.error,tooltip:U}}else return{status:"Loaded"};const N=(a||[]).find(U=>U.id===O);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(vL,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(hE,{className:"h-4 w-4"}),y.jsx(wL,{children:"Security Warning"}),y.jsx(_L,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(nr,{id:"mod-name",value:o,onChange:O=>s(O.target.value),placeholder:"My Awesome Mod",disabled:m})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(nr,{id:"mod-url",type:"url",value:u,onChange:O=>c(O.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!f.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(dn,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(bw,{id:"mod-script",value:f,onChange:O=>h(O.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!u.trim()})]}),y.jsxs(Lt,{onClick:S,disabled:m,children:[m&&y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(On,{delayDuration:100,children:y.jsxs(sC,{children:[y.jsx(lC,{children:y.jsxs(Oo,{children:[y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{children:"Source"}),y.jsx(Ga,{children:"Status"}),y.jsx(Ga,{className:"text-center",children:"Enabled"}),y.jsx(Ga,{className:"text-right",children:"Actions"})]})}),y.jsx(uC,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Oo,{children:y.jsx(Pr,{colSpan:5,children:y.jsx(Aa,{className:"h-10 w-full"})})}),y.jsx(Oo,{children:y.jsx(Pr,{colSpan:5,children:y.jsx(Aa,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Oo,{children:y.jsx(Pr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(O=>{const{status:j,error:N,tooltip:U}=A(O.id),V=O.sourceUrl?new URL(O.sourceUrl).hostname:"Direct Script",J=v[O.id],P=_[O.id],Z=J||P,F=j==="Error";return y.jsxs(Oo,{children:[y.jsx(Pr,{className:"font-medium",children:O.name}),y.jsx(Pr,{className:"text-muted-foreground",children:V}),y.jsxs(Pr,{children:[y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx("span",{className:F?"text-destructive font-semibold cursor-help":"",children:j})}),U&&y.jsx(Nn,{className:"max-w-xs break-words",children:y.jsx("p",{children:U})})]}),F&&N&&y.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),y.jsxs(Pr,{className:"text-center",children:[y.jsx(Dl,{checked:O.enabled??!1,onCheckedChange:()=>E(O),disabled:Z,"aria-label":`Enable ${O.name}`}),J&&y.jsx(Xn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(Pr,{className:"text-right",children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>C(O),disabled:Z,"aria-label":`Delete ${O.name}`,className:"text-destructive hover:text-destructive/80",children:P?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ou,{className:"h-4 w-4"})})})]},O.id)})})]})})})]})]})},rpe=wt.memo(npe),xL=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48"})=>{const[s,u]=B.useState(""),c=B.useMemo(()=>{if(!s)return t;const f=s.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.id.toLowerCase().includes(f))},[t,s]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"}),y.jsx(Aa,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(nr,{value:s,onChange:f=>u(f.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(pw,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:c.map(f=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(dn,{htmlFor:`enable-model-${e}-${f.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:f.name||f.id,children:f.name||f.id}),y.jsx(Dl,{id:`enable-model-${e}-${f.id}`,checked:n.has(f.id),onCheckedChange:h=>r(f.id,h),className:"flex-shrink-0",disabled:i,"aria-label":`Enable model ${f.name||f.id}`})]},f.id))})})]})},ape=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s})=>{var C;const u=CE(e.type),c=AE(e.type),f=em(e.type),h=o==="fetching"||s,m=s||o==="fetching",g=s||o==="fetching",w=fi(A=>A.getAllAvailableModelDefsForProvider)(e.id),_=B.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),x=e.apiKeyId?t.some(A=>A.id===e.apiKeyId):!1,S=u&&!x,E=B.useCallback(async(A,O)=>{const j=new Set(e.enabledModels??[]);O?j.add(A):j.delete(A);const N=Array.from(j);try{await i(e.id,{enabledModels:N})}catch(U){ct.error("Failed to update model status."),console.error("Failed to save model toggle:",U)}},[e.enabledModels,e.id,i]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{children:y.jsx("span",{className:Ut("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(Nn,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{children:y.jsx(Lf,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(Nn,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:n,disabled:m,"aria-label":"Edit provider",className:"h-8 w-8",children:y.jsx(dE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:r,disabled:g,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",children:s?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ou,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[u&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?x?y.jsx("span",{className:"text-green-400",children:((C=t.find(A=>A.id===e.apiKeyId))==null?void 0:C.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),c&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),f&&y.jsx("div",{className:"pt-1",children:y.jsxs(Lt,{variant:"outline",size:"sm",onClick:a,disabled:h,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Xn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(od,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(Lf,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(yv,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"font-medium text-card-foreground text-sm",children:"Model Enablement (Saves Immediately):"}),y.jsx(xL,{providerId:e.id,allAvailableModels:w,enabledModelIds:_,onToggleModel:E,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64"})]})]})},ipe=wt.memo(ape),SL=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const o=f=>{r(f==="none"?null:f)},s=(c=a.find(f=>f.id===n))==null?void 0:c.name,u=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(wd,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(xd,{className:Ut("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(_d,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(Mz,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):u]})]})})}),y.jsxs(Sd,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(Wi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(f=>y.jsx(Wi,{value:f.id,children:f.name||`Key ID: ${f.id.substring(0,6)}...`},f.id))]})]})},ope=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const u=CE(t.type??null),c=AE(t.type??null),f=em(t.type??null),h=t.isEnabled??!1,m=t.autoFetchModels??!1,g=B.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=B.useCallback((w,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(w):x.delete(w);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(nr,{id:`edit-name-${e}`,value:t.name||"",onChange:w=>s("name",w.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(wd,{value:t.type??"",onValueChange:w=>s("type",w),disabled:a,children:[y.jsx(xd,{id:`edit-type-${e}`,children:y.jsx(_d,{placeholder:"Select Type"})}),y.jsx(Sd,{children:Hj.map(w=>y.jsx(Wi,{value:w.value,children:w.label},w.value))})]})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{children:"API Key"}),y.jsx(SL,{selectedKeyId:t.apiKeyId??null,onKeySelected:w=>s("apiKeyId",w),apiKeys:n,disabled:a})]}),c&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(dn,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(nr,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:w=>s("baseURL",w.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(Dl,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:w=>s("isEnabled",w),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(dn,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Dl,{id:`edit-autofetch-${e}`,checked:m,onCheckedChange:w=>s("autoFetchModels",w),disabled:!f||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(dn,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:f?"":"text-muted-foreground",children:["Auto-fetch models ",f?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(xL,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(a0,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(Yu,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(fE,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},spe=wt.memo(ope),lpe=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i})=>{const[o,s]=B.useState(!1),[u,c]=B.useState(!1),[f,h]=B.useState(!1),[m,g]=B.useState({}),v=fi(N=>N.getAllAvailableModelDefsForProvider),[w,_]=B.useState([]),x=B.useMemo(()=>[...w].sort((N,U)=>(N.name||N.id).localeCompare(U.name||U.id)),[w]);B.useEffect(()=>{if(o){const N=v(e.id);_(N),g({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else _([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,e.fetchedModels,v]);const S=()=>s(!0),E=()=>{s(!1),g({}),c(!1)},C=B.useCallback(async()=>{c(!0);try{const N=m.enabledModels&&m.enabledModels.length>0?m.enabledModels:null,U={name:m.name,type:m.type,isEnabled:m.isEnabled,apiKeyId:m.apiKeyId,baseURL:m.baseURL,autoFetchModels:m.autoFetchModels,enabledModels:N};Object.keys(U).forEach(V=>{U[V]===void 0&&delete U[V]}),await n(e.id,U),s(!1),g({}),ct.success(`Provider "${U.name||e.name}" updated.`)}catch(N){console.error("Failed to save provider update:",N),ct.error("Failed to save provider configuration.")}finally{c(!1)}},[m,n,e.id,e.name]),A=B.useCallback((N,U)=>{g(V=>({...V,[N]:U}))},[]),O=B.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(N){console.error("Failed to delete provider:",N),h(!1)}}},[r,e.id,e.name]),j=B.useCallback(async()=>{if(await a(e.id),o){const N=v(e.id);_(N)}},[a,e.id,o,v]);return y.jsx("div",{className:"border-b border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?y.jsx(spe,{providerId:e.id,editData:m,apiKeys:t,allAvailableModels:x,isSaving:u,onCancel:E,onSave:C,onChange:A,onUpdate:n}):y.jsx(ipe,{provider:e,apiKeys:t,onEdit:S,onDelete:O,onFetchModels:j,onUpdate:n,fetchStatus:i,isDeleting:f})})},upe=wt.memo(lpe),cpe=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=B.useState(!1),[i,o]=B.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!0,fetchedModels:null,modelsLastFetchedAt:null}),s=B.useCallback((m,g)=>{o(v=>{const w={...v,[m]:g};if(m==="type"){const _=g;w.apiKeyId=null,w.baseURL=null,w.autoFetchModels=em(_),w.enabledModels=null}return(m==="isEnabled"||m==="autoFetchModels")&&(w[m]=!!g),w})},[]),u=B.useCallback(async()=>{if(!i.name||!i.type){ct.error("Provider Name and Type are required.");return}a(!0);try{const m=i.type,g=i.autoFetchModels??em(m),v={name:i.name,type:m,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(m){console.error("Failed to add provider (from form component):",m)}finally{a(!1)}},[i,t,n]),c=CE(i.type??null),f=AE(i.type??null),h=em(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(nr,{value:i.name||"",onChange:m=>s("name",m.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(wd,{value:i.type??"openai",onValueChange:m=>s("type",m),disabled:r,children:[y.jsx(xd,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(_d,{placeholder:"Select Type"})}),y.jsx(Sd,{children:Hj.map(m=>y.jsx(Wi,{value:m.value,children:m.label},m.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Dl,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:m=>s("isEnabled",m),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(dn,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(c||f)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[c&&y.jsx(SL,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:m=>s("apiKeyId",m),apiKeys:e||[],className:"flex-grow",disabled:r}),f&&y.jsx(nr,{value:i.baseURL||"",onChange:m=>s("baseURL",m.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Dl,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:m=>s("autoFetchModels",m),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(dn,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(Yu,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:u,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(fE,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})},dpe=()=>{const{addDbProviderConfig:e,updateDbProviderConfig:t,deleteDbProviderConfig:n,fetchModels:r,providerFetchStatus:a,dbProviderConfigs:i,apiKeys:o,isLoading:s}=fi(In(v=>({addDbProviderConfig:v.addProviderConfig,updateDbProviderConfig:v.updateProviderConfig,deleteDbProviderConfig:v.deleteProviderConfig,fetchModels:v.fetchModels,providerFetchStatus:v.providerFetchStatus,dbProviderConfigs:v.dbProviderConfigs,apiKeys:v.dbApiKeys,isLoading:v.isLoading}))),[u,c]=B.useState(!1),f=()=>c(!0),h=B.useCallback(()=>c(!1),[]),m=B.useCallback(async v=>{await r(v)},[r]),g=B.useMemo(()=>i||[],[i]);return y.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(cpe,{apiKeys:o||[],onAddProvider:e,onCancel:h}):y.jsxs(Lt,{onClick:f,variant:"outline",className:"w-full",disabled:s,children:[y.jsx(gv,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow overflow-hidden border-t border-border pt-4 mt-4",children:y.jsxs("div",{className:"space-y-2",children:[s&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-24 w-full"}),y.jsx(Aa,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:g.map(v=>y.jsx(upe,{provider:v,apiKeys:o||[],onUpdate:t,onDelete:n,onFetchModels:m,fetchStatus:a[v.id]||"idle"},v.id))}),!s&&g.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},fpe=wt.memo(dpe),hpe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=zr(In(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Git User Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set your user name and email for Git commits made within the VFS. This is required for committing changes."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 rounded-lg border p-4 shadow-sm bg-card",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(nr,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(nr,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})]})})},ppe=wt.memo(hpe),mpe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:o}=dr(In(N=>({syncRepos:N.syncRepos,addSyncRepo:N.addSyncRepo,updateSyncRepo:N.updateSyncRepo,deleteSyncRepo:N.deleteSyncRepo,initializeOrSyncRepo:N.initializeOrSyncRepo,repoInitializationStatus:N.repoInitializationStatus,isLoading:N.isLoading}))),[s,u]=B.useState(!1),[c,f]=B.useState(null),[h,m]=B.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=B.useState(!1),[w,_]=B.useState({}),x=B.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),u(!1),f(null),v(!1)},[]),S=B.useCallback((N,U)=>{m(V=>({...V,[N]:U}))},[]),E=B.useCallback(async()=>{var N,U,V,J;if(!((N=h.name)!=null&&N.trim())||!((U=h.remoteUrl)!=null&&U.trim())){ct.error("Repository Name and Remote URL are required.");return}v(!0);try{const P={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((V=h.branch)==null?void 0:V.trim())||"main",username:((J=h.username)==null?void 0:J.trim())||null,password:h.password||null};c?await n(c,P):await t(P),x()}catch(P){console.error("Failed to save sync repo:",P)}finally{v(!1)}},[h,c,t,n,x]),C=N=>{f(N.id),m({name:N.name,remoteUrl:N.remoteUrl,branch:N.branch||"main",username:N.username??"",password:N.password??""}),u(!1)},A=B.useCallback(async(N,U)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${U}"? This will unlink it from any conversations and remove the local copy.`)){_(V=>({...V,[N]:!0}));try{await r(N),c===N&&x()}catch(V){console.error("Failed to delete sync repo:",V)}finally{_(V=>({...V,[N]:!1}))}}},[r,c,x]),O=B.useCallback(async N=>{await a(N)},[a]),j=()=>{var N,U;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:c?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-name",children:"Name"}),y.jsx(nr,{id:"repo-name",value:h.name||"",onChange:V=>S("name",V.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(nr,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:V=>S("remoteUrl",V.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(nr,{id:"repo-branch",value:h.branch||"",onChange:V=>S("branch",V.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),y.jsxs("div",{className:"pt-2",children:[y.jsx(dn,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),y.jsxs(vL,{variant:"destructive",className:"mt-2 mb-3",children:[y.jsx(hE,{className:"h-4 w-4"}),y.jsx(wL,{children:"Security Warning"}),y.jsx(_L,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-username",children:"Username"}),y.jsx(nr,{id:"repo-username",value:h.username||"",onChange:V=>S("username",V.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"repo-password",children:"Password / Token"}),y.jsx(nr,{id:"repo-password",type:"password",value:h.password||"",onChange:V=>S("password",V.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Lt,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[y.jsx(Yu,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Lt,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((N=h.name)!=null&&N.trim())||!((U=h.remoteUrl)!=null&&U.trim()),type:"button",children:[g&&y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(fE,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!s&&!c&&y.jsxs(Lt,{onClick:()=>u(!0),variant:"outline",className:"w-full mb-4",disabled:o,children:[y.jsx(gv,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(s||c)&&j(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),o&&!s&&!c?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Aa,{className:"h-10 w-full"}),y.jsx(Aa,{className:"h-10 w-full"}),y.jsx(Aa,{className:"h-10 w-full"})]}):e.length===0&&!s&&!c?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(sC,{children:[y.jsx(lC,{children:y.jsxs(Oo,{children:[y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{children:"Remote URL"}),y.jsx(Ga,{children:"Branch"}),y.jsx(Ga,{children:"Auth"}),y.jsx(Ga,{className:"text-right",children:"Actions"})]})}),y.jsx(uC,{children:e.map(N=>{const U=w[N.id],V=c===N.id,J=!!N.username||!!N.password,P=i[N.id]||"idle",F=U||g||!!c||P==="syncing";let ue=null,le="Initialize/Sync Repository";return P==="syncing"?(ue=y.jsx(Xn,{className:"h-4 w-4 animate-spin mr-1"}),le="Initializing/Syncing..."):P==="idle"?(ue=y.jsx(h6,{className:"h-4 w-4 text-green-500 mr-1"}),le="Sync Successful / Ready"):P==="error"?(ue=y.jsx(Lf,{className:"h-4 w-4 text-destructive mr-1"}),le="Sync Failed"):ue=y.jsx(yv,{className:"h-4 w-4 mr-1"}),y.jsxs(Oo,{className:Ut(V?"bg-muted/50":"",F&&!V?"opacity-70":""),children:[y.jsx(Pr,{className:"font-medium",children:N.name}),y.jsx(Pr,{className:"text-xs truncate max-w-xs",children:N.remoteUrl}),y.jsx(Pr,{children:N.branch||"main"}),y.jsx(Pr,{className:"text-xs",children:J?"Configured":"None"}),y.jsxs(Pr,{className:"text-right space-x-1",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"outline",size:"icon",onClick:()=>O(N.id),className:"h-8 w-8","aria-label":`Initialize or Sync repo ${N.name}`,disabled:F,children:ue})}),y.jsx(Nn,{side:"top",children:le})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>C(N),className:"h-8 w-8","aria-label":`Edit repo ${N.name}`,disabled:F,children:y.jsx(dE,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Edit"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>A(N.id,N.name),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete repo ${N.name}`,disabled:F,children:U?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ou,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})]},N.id)})})]})})]})]})},gpe=wt.memo(mpe),ype=()=>{const e=Ut("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsxs(Ow,{defaultValue:"config",className:"flex flex-col h-full",children:[y.jsxs(jw,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(li,{value:"config",className:e,children:"User Config"}),y.jsx(li,{value:"sync",className:e,children:"Sync Repositories"})]}),y.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto",children:[y.jsx(ui,{value:"config",children:y.jsx(ppe,{})}),y.jsx(ui,{value:"sync",children:y.jsx(gpe,{})})]})]})},bpe=wt.memo(ype),EL=B.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=zr(In(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=r0(In(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=Ka(In(h=>({initialSettingsTab:h.initialSettingsTab,initialSettingsSubTab:h.initialSettingsSubTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[o,s]=B.useState(a||"general");B.useEffect(()=>{e&&s(a||"general")},[e,a]);const u=h=>{h||(t(),i())},c=h=>{s(h)},f=Ut("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(Sw,{open:e,onOpenChange:u,children:y.jsxs(Ew,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(kw,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(Aw,{children:"Settings"}),y.jsx(Tw,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsxs(Ow,{value:o,onValueChange:c,className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(jw,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(li,{value:"general",className:f,children:"General"}),y.jsx(li,{value:"providers",className:f,children:"Providers & Models"}),n&&y.jsx(li,{value:"assistant",className:f,children:"Assistant"}),y.jsx(li,{value:"git",className:f,children:"Git"}),y.jsx(li,{value:"data",className:f,children:"Data"}),y.jsx(li,{value:"mods",className:f,children:"Mods"}),r.map(h=>y.jsx(li,{value:h.id,className:f,children:h.title},h.id))]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(ui,{value:"general",children:y.jsx(Yhe,{})}),y.jsx(ui,{value:"providers",className:"data-[state=inactive]:hidden",children:y.jsx(fpe,{})}),n&&y.jsx(ui,{value:"assistant",children:y.jsx(Jhe,{})}),y.jsx(ui,{value:"git",className:"h-full",children:y.jsx(bpe,{})}),y.jsx(ui,{value:"data",children:y.jsx(epe,{})}),y.jsx(ui,{value:"mods",children:y.jsx(rpe,{})}),r.map(h=>y.jsx(ui,{value:h.id,children:wt.isValidElement(h.component)?h.component:typeof h.component=="function"?y.jsx(h.component,{}):null},h.id))]})]}),y.jsx(Cw,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Lt,{variant:"outline",onClick:()=>u(!1),children:"Close"})})]})})});EL.displayName="SettingsModalComponent";const vpe=EL;function wpe(){const e=Qr.getState().registerChatControl,t=Ka.getState().toggleChatControlPanel,n=Ka.getState().setInitialSettingsTabs,r=()=>{const i=(o,s)=>{n(null,null),t("settingsModal",!0)};return y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(n7,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:"Settings"})]})})},a=()=>{const i=Ka.getState().isChatControlPanelOpen.settingsModal??!1,o=()=>t("settingsModal",!1);return y.jsx(vpe,{isOpen:i,onClose:o})};e({id:"core-settings-trigger",panel:"header",order:1e3,status:()=>"ready",renderer:()=>wt.createElement(r),settingsRenderer:()=>wt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function _pe(){const e=Qr.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=Ka.getState();return y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?y.jsx(Hz,{className:"h-4 w-4"}):y.jsx(Uz,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"bottom",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"header",order:10,status:()=>"ready",renderer:()=>wt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}var Bw="Popover",[kL,Pge]=Ri(Bw,[Xu]),Q0=Xu(),[xpe,uc]=kL(Bw),CL=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=Q0(t),u=B.useRef(null),[c,f]=B.useState(!1),[h,m]=Ds({prop:r,defaultProp:a??!1,onChange:i,caller:Bw});return y.jsx(Dv,{...s,children:y.jsx(xpe,{scope:t,contentId:Ts(),triggerRef:u,open:h,onOpenChange:m,onOpenToggle:B.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:B.useCallback(()=>f(!0),[]),onCustomAnchorRemove:B.useCallback(()=>f(!1),[]),modal:o,children:n})})};CL.displayName=Bw;var AL="PopoverAnchor",Spe=B.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=uc(AL,n),i=Q0(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return B.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(p0,{...i,...r,ref:t})});Spe.displayName=AL;var TL="PopoverTrigger",RL=B.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=uc(TL,n),i=Q0(n),o=xn(t,a.triggerRef),s=y.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":DL(a.open),...r,ref:o,onClick:zt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(p0,{asChild:!0,...i,children:s})});RL.displayName=TL;var cC="PopoverPortal",[Epe,kpe]=kL(cC,{forceMount:void 0}),NL=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=uc(cC,t);return y.jsx(Epe,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(yh,{asChild:!0,container:a,children:r})})})};NL.displayName=cC;var ch="PopoverContent",IL=B.forwardRef((e,t)=>{const n=kpe(ch,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=uc(ch,e.__scopePopover);return y.jsx(Na,{present:r||i.open,children:i.modal?y.jsx(Ape,{...a,ref:t}):y.jsx(Tpe,{...a,ref:t})})});IL.displayName=ch;var Cpe=Iu("PopoverContent.RemoveScroll"),Ape=B.forwardRef((e,t)=>{const n=uc(ch,e.__scopePopover),r=B.useRef(null),a=xn(t,r),i=B.useRef(!1);return B.useEffect(()=>{const o=r.current;if(o)return _w(o)},[]),y.jsx(X0,{as:Cpe,allowPinchZoom:!0,children:y.jsx(OL,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:zt(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:zt(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,c=s.button===2||u;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:zt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Tpe=B.forwardRef((e,t)=>{const n=uc(ch,e.__scopePopover),r=B.useRef(!1),a=B.useRef(!1);return y.jsx(OL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),OL=B.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:f,...h}=e,m=uc(ch,n),g=Q0(n);return vw(),y.jsx(Y0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(ph,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:y.jsx(Mv,{"data-state":DL(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),jL="PopoverClose",Rpe=B.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=uc(jL,n);return y.jsx(an.button,{type:"button",...r,ref:t,onClick:zt(e.onClick,()=>a.onOpenChange(!1))})});Rpe.displayName=jL;var Npe="PopoverArrow",Ipe=B.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Q0(n);return y.jsx(Pv,{...a,...r,ref:t})});Ipe.displayName=Npe;function DL(e){return e?"open":"closed"}var Ope=CL,jpe=RL,Dpe=NL,Mpe=IL;function dC({...e}){return y.jsx(Ope,{"data-slot":"popover",...e})}function fC({...e}){return y.jsx(jpe,{"data-slot":"popover-trigger",...e})}function hC({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(Dpe,{children:y.jsx(Mpe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const Kc=Go(Wo(e=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,setModelId:t=>e({modelId:t}),setTemperature:t=>e({temperature:t}),setMaxTokens:t=>e({maxTokens:t}),setTopP:t=>e({topP:t}),setTopK:t=>e({topK:t}),setPresencePenalty:t=>e({presencePenalty:t}),setFrequencyPenalty:t=>e({frequencyPenalty:t}),initializePromptState:t=>{console.log("[PromptStateStore] Initializing with:",t),e({modelId:t.modelId,temperature:t.temperature,maxTokens:t.maxTokens,topP:t.topP,topK:t.topK,presencePenalty:t.presencePenalty,frequencyPenalty:t.frequencyPenalty})},resetPromptState:()=>{console.log("[PromptStateStore] Resetting state."),e({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null})}})));function Ppe(){const e=Qr.getState().registerPromptControl,t=()=>{const{temperature:r,setTemperature:a,topP:i,setTopP:o,maxTokens:s,setMaxTokens:u,topK:c,setTopK:f,presencePenalty:h,setPresencePenalty:m,frequencyPenalty:g,setFrequencyPenalty:v}=Kc.getState(),w=zr.getState(),_={temperature:r,setTemperature:a,topP:i,setTopP:o,maxTokens:s,setMaxTokens:u,topK:c,setTopK:f,presencePenalty:h,setPresencePenalty:m,frequencyPenalty:g,setFrequencyPenalty:v,defaultTemperature:w.temperature,defaultTopP:w.topP,defaultMaxTokens:w.maxTokens,defaultTopK:w.topK,defaultPresencePenalty:w.presencePenalty,defaultFrequencyPenalty:w.frequencyPenalty};return y.jsx(bL,{..._})},n=()=>{const r=er.getState().status==="streaming",{temperature:a,topP:i,maxTokens:o,topK:s,presencePenalty:u,frequencyPenalty:c}=Kc.getState(),f=zr.getState(),h=a!==f.temperature||i!==f.topP||o!==f.maxTokens||s!==f.topK||u!==f.presencePenalty||c!==f.frequencyPenalty;return y.jsxs(dC,{children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(fC,{asChild:!0,children:y.jsx(Lt,{variant:h?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:r,"aria-label":"Adjust Parameters",children:y.jsx(a7,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:"Parameters"})]})}),y.jsx(hC,{className:"w-auto p-0",align:"start",children:y.jsx(t,{})})]})};e({id:"core-parameters",order:30,status:()=>"ready",triggerRenderer:()=>wt.createElement(n),getParameters:()=>{const{temperature:r,topP:a,maxTokens:i,topK:o,presencePenalty:s,frequencyPenalty:u}=Kc.getState();return{...r!==null&&{temperature:r},...a!==null&&{top_p:a},...i!==null&&{max_tokens:i},...o!==null&&{top_k:o},...s!==null&&{presence_penalty:s},...u!==null&&{frequency_penalty:u}}},show:()=>zr.getState().enableAdvancedSettings}),console.log("[Function] Registered Core Parameter Control")}const ML=20,Fpe=ML*1024*1024;function Lpe(){const e=Qr.getState().registerPromptControl,t=()=>{const r=B.useRef(null),a=lm.getState().addAttachedFile,i=er.getState().status==="streaming",o=B.useCallback(async u=>{const c=u.target.files;if(c){for(const f of Array.from(c)){if(f.size>Fpe){ct.error(`File "${f.name}" exceeds the ${ML}MB limit.`);continue}try{let h={};const m=Wj(f.name,f.type),g=f.type.startsWith("image/");if(m)h.contentText=await f.text();else if(g){const v=new FileReader,w=new Promise((x,S)=>{v.onload=()=>x(v.result),v.onerror=E=>S(E)});v.readAsDataURL(f);const _=await w;_&&_.includes(",")?h.contentBase64=_.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${f.name}`)}else console.log(`File type ${f.type} (Name: ${f.name}) not directly processed for content storage in InputStore.`);a({source:"direct",name:f.name,type:f.type||"application/octet-stream",size:f.size,...h})}catch(h){console.error(`Error processing file ${f.name}:`,h),ct.error(`Failed to process file "${f.name}": ${h instanceof Error?h.message:String(h)}`)}}u.target&&(u.target.value="")}},[a]),s=()=>{var u;(u=r.current)==null||u.click()};return y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:r,onChange:o,multiple:!0,className:"hidden",disabled:i}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{type:"button",variant:"ghost",size:"icon",onClick:s,disabled:i,className:"h-8 w-8","aria-label":"Attach Files",children:y.jsx(y6,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Attach Files"})]})})]})},n=()=>{const{attachedFilesMetadata:r,removeAttachedFile:a}=lm.getState(),i=er.getState().status==="streaming";return r.length===0?null:y.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:r.map(o=>y.jsx(LM,{fileMeta:o,onRemove:a,isReadOnly:i},o.id))})};e({id:"core-file-attachment",order:20,triggerRenderer:()=>wt.createElement(t),renderer:()=>wt.createElement(n),clearOnSubmit:()=>{},show:()=>!0}),console.log("[Function] Registered Core File Attachment Control")}const $pe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Oo,{className:"bg-muted/30",children:[y.jsx(Pr,{className:"px-2 py-1"}),y.jsx(Pr,{className:"px-2 py-1",children:y.jsx(s0,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(Pr,{className:"py-1 px-2",colSpan:3,children:y.jsx(nr,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(Pr,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(od,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Create (Enter)"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(Yu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var zw="Checkbox",[Bpe,Fge]=Ri(zw),[zpe,Upe]=Bpe(zw),PL=B.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=B.useState(null),v=xn(t,C=>g(C)),w=B.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Ds({prop:a,defaultProp:i??!1,onChange:c,caller:zw}),E=B.useRef(x);return B.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const A=()=>S(E.current);return C.addEventListener("reset",A),()=>C.removeEventListener("reset",A)}},[m,S]),y.jsxs(zpe,{scope:n,state:x,disabled:s,children:[y.jsx(an.button,{type:"button",role:"checkbox","aria-checked":Nu(x)?"mixed":x,"aria-required":o,"data-state":BL(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onKeyDown:zt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:zt(e.onClick,C=>{S(A=>Nu(A)?!0:!A),_&&(w.current=C.isPropagationStopped(),w.current||C.stopPropagation())})}),_&&y.jsx($L,{control:m,bubbles:!w.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Nu(i)?!1:i})]})});PL.displayName=zw;var FL="CheckboxIndicator",LL=B.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Upe(FL,n);return y.jsx(Na,{present:r||Nu(i.state)||i.state===!0,children:y.jsx(an.span,{"data-state":BL(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});LL.displayName=FL;var qpe="CheckboxBubbleInput",$L=B.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=B.useRef(null),u=xn(s,o),c=Dw(n),f=jv(t);B.useEffect(()=>{const m=s.current;if(!m)return;const g=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&w){const _=new Event("click",{bubbles:r});m.indeterminate=Nu(n),w.call(m,Nu(n)?!1:n),m.dispatchEvent(_)}},[c,n,r]);const h=B.useRef(Nu(n)?!1:n);return y.jsx(an.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});$L.displayName=qpe;function Nu(e){return e==="indeterminate"}function BL(e){return Nu(e)?"indeterminate":e?"checked":"unchecked"}var Hpe=PL,Vpe=LL;function Gpe({className:e,...t}){return y.jsx(Hpe,{"data-slot":"checkbox",className:Ut("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Vpe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(od,{className:"size-3.5"})})})}var iE=["Enter"," "],Wpe=["ArrowDown","PageUp","Home"],zL=["ArrowUp","PageDown","End"],Kpe=[...Wpe,...zL],Zpe={ltr:[...iE,"ArrowRight"],rtl:[...iE,"ArrowLeft"]},Ype={ltr:["ArrowLeft"],rtl:["ArrowRight"]},eg="Menu",[i0,Xpe,Jpe]=Rw(eg),[Ed,UL]=Ri(eg,[Jpe,Xu,Nw]),Uw=Xu(),qL=Nw(),[Qpe,kd]=Ed(eg),[eme,tg]=Ed(eg),HL=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=Uw(t),[u,c]=B.useState(null),f=B.useRef(!1),h=Ea(i),m=jh(a);return B.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),y.jsx(Dv,{...s,children:y.jsx(Qpe,{scope:t,open:n,onOpenChange:h,content:u,onContentChange:c,children:y.jsx(eme,{scope:t,onClose:B.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};HL.displayName=eg;var tme="MenuAnchor",pC=B.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Uw(n);return y.jsx(p0,{...a,...r,ref:t})});pC.displayName=tme;var mC="MenuPortal",[nme,VL]=Ed(mC,{forceMount:void 0}),GL=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=kd(mC,t);return y.jsx(nme,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(yh,{asChild:!0,container:a,children:r})})})};GL.displayName=mC;var go="MenuContent",[rme,gC]=Ed(go),WL=B.forwardRef((e,t)=>{const n=VL(go,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=kd(go,e.__scopeMenu),o=tg(go,e.__scopeMenu);return y.jsx(i0.Provider,{scope:e.__scopeMenu,children:y.jsx(Na,{present:r||i.open,children:y.jsx(i0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(ame,{...a,ref:t}):y.jsx(ime,{...a,ref:t})})})})}),ame=B.forwardRef((e,t)=>{const n=kd(go,e.__scopeMenu),r=B.useRef(null),a=xn(t,r);return B.useEffect(()=>{const i=r.current;if(i)return _w(i)},[]),y.jsx(yC,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:zt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ime=B.forwardRef((e,t)=>{const n=kd(go,e.__scopeMenu);return y.jsx(yC,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ome=Iu("MenuContent.ScrollLock"),yC=B.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...w}=e,_=kd(go,n),x=tg(go,n),S=Uw(n),E=qL(n),C=Xpe(n),[A,O]=B.useState(null),j=B.useRef(null),N=xn(t,j,_.onContentChange),U=B.useRef(0),V=B.useRef(""),J=B.useRef(0),P=B.useRef(null),Z=B.useRef("right"),F=B.useRef(0),ue=v?X0:B.Fragment,le=v?{as:ome,allowPinchZoom:!0}:void 0,ne=te=>{var Pe,Oe;const G=V.current+te,X=C().filter(Ae=>!Ae.disabled),ae=document.activeElement,be=(Pe=X.find(Ae=>Ae.ref.current===ae))==null?void 0:Pe.textValue,we=X.map(Ae=>Ae.textValue),fe=bme(we,G,be),Me=(Oe=X.find(Ae=>Ae.textValue===fe))==null?void 0:Oe.ref.current;(function Ae($e){V.current=$e,window.clearTimeout(U.current),$e!==""&&(U.current=window.setTimeout(()=>Ae(""),1e3))})(G),Me&&setTimeout(()=>Me.focus())};B.useEffect(()=>()=>window.clearTimeout(U.current),[]),vw();const Q=B.useCallback(te=>{var X,ae;return Z.current===((X=P.current)==null?void 0:X.side)&&wme(te,(ae=P.current)==null?void 0:ae.area)},[]);return y.jsx(rme,{scope:n,searchRef:V,onItemEnter:B.useCallback(te=>{Q(te)&&te.preventDefault()},[Q]),onItemLeave:B.useCallback(te=>{var G;Q(te)||((G=j.current)==null||G.focus(),O(null))},[Q]),onTriggerLeave:B.useCallback(te=>{Q(te)&&te.preventDefault()},[Q]),pointerGraceTimerRef:J,onPointerGraceIntentChange:B.useCallback(te=>{P.current=te},[]),children:y.jsx(ue,{...le,children:y.jsx(Y0,{asChild:!0,trapped:a,onMountAutoFocus:zt(i,te=>{var G;te.preventDefault(),(G=j.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(ph,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:y.jsx(hF,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:O,onEntryFocus:zt(u,te=>{x.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(Mv,{role:"menu","aria-orientation":"vertical","data-state":u9(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...w,ref:N,style:{outline:"none",...w.style},onKeyDown:zt(w.onKeyDown,te=>{const X=te.target.closest("[data-radix-menu-content]")===te.currentTarget,ae=te.ctrlKey||te.altKey||te.metaKey,be=te.key.length===1;X&&(te.key==="Tab"&&te.preventDefault(),!ae&&be&&ne(te.key));const we=j.current;if(te.target!==we||!Kpe.includes(te.key))return;te.preventDefault();const Me=C().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);zL.includes(te.key)&&Me.reverse(),gme(Me)}),onBlur:zt(e.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(U.current),V.current="")}),onPointerMove:zt(e.onPointerMove,o0(te=>{const G=te.target,X=F.current!==te.clientX;if(te.currentTarget.contains(G)&&X){const ae=te.clientX>F.current?"right":"left";Z.current=ae,F.current=te.clientX}}))})})})})})})});WL.displayName=go;var sme="MenuGroup",bC=B.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{role:"group",...r,ref:t})});bC.displayName=sme;var lme="MenuLabel",KL=B.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{...r,ref:t})});KL.displayName=lme;var pv="MenuItem",U4="menu.itemSelect",qw=B.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=B.useRef(null),o=tg(pv,e.__scopeMenu),s=gC(pv,e.__scopeMenu),u=xn(t,i),c=B.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(U4,{bubbles:!0,cancelable:!0});h.addEventListener(U4,g=>r==null?void 0:r(g),{once:!0}),Kj(h,m),m.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(ZL,{...a,ref:u,disabled:n,onClick:zt(e.onClick,f),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),c.current=!0},onPointerUp:zt(e.onPointerUp,h=>{var m;c.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:zt(e.onKeyDown,h=>{const m=s.searchRef.current!=="";n||m&&h.key===" "||iE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});qw.displayName=pv;var ZL=B.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=gC(pv,n),s=qL(n),u=B.useRef(null),c=xn(t,u),[f,h]=B.useState(!1),[m,g]=B.useState("");return B.useEffect(()=>{const v=u.current;v&&g((v.textContent??"").trim())},[i.children]),y.jsx(i0.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:y.jsx(pF,{asChild:!0,...s,focusable:!r,children:y.jsx(an.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:zt(e.onPointerMove,o0(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:zt(e.onPointerLeave,o0(v=>o.onItemLeave(v))),onFocus:zt(e.onFocus,()=>h(!0)),onBlur:zt(e.onBlur,()=>h(!1))})})})}),ume="MenuCheckboxItem",YL=B.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(t9,{scope:e.__scopeMenu,checked:n,children:y.jsx(qw,{role:"menuitemcheckbox","aria-checked":mv(n)?"mixed":n,...a,ref:t,"data-state":wC(n),onSelect:zt(a.onSelect,()=>r==null?void 0:r(mv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});YL.displayName=ume;var XL="MenuRadioGroup",[cme,dme]=Ed(XL,{value:void 0,onValueChange:()=>{}}),JL=B.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ea(r);return y.jsx(cme,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(bC,{...a,ref:t})})});JL.displayName=XL;var QL="MenuRadioItem",e9=B.forwardRef((e,t)=>{const{value:n,...r}=e,a=dme(QL,e.__scopeMenu),i=n===a.value;return y.jsx(t9,{scope:e.__scopeMenu,checked:i,children:y.jsx(qw,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":wC(i),onSelect:zt(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});e9.displayName=QL;var vC="MenuItemIndicator",[t9,fme]=Ed(vC,{checked:!1}),n9=B.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=fme(vC,n);return y.jsx(Na,{present:r||mv(i.checked)||i.checked===!0,children:y.jsx(an.span,{...a,ref:t,"data-state":wC(i.checked)})})});n9.displayName=vC;var hme="MenuSeparator",r9=B.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(an.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});r9.displayName=hme;var pme="MenuArrow",a9=B.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Uw(n);return y.jsx(Pv,{...a,...r,ref:t})});a9.displayName=pme;var mme="MenuSub",[Lge,i9]=Ed(mme),Qp="MenuSubTrigger",o9=B.forwardRef((e,t)=>{const n=kd(Qp,e.__scopeMenu),r=tg(Qp,e.__scopeMenu),a=i9(Qp,e.__scopeMenu),i=gC(Qp,e.__scopeMenu),o=B.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,c={__scopeMenu:e.__scopeMenu},f=B.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return B.useEffect(()=>f,[f]),B.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),u(null)}},[s,u]),y.jsx(pC,{asChild:!0,...c,children:y.jsx(ZL,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":u9(n.open),...e,ref:sE(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:zt(e.onPointerMove,o0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:zt(e.onPointerLeave,o0(h=>{var g,v;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const w=(v=n.content)==null?void 0:v.dataset.side,_=w==="right",x=_?-5:5,S=m[_?"left":"right"],E=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:S,y:m.bottom}],side:w}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:zt(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Zpe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});o9.displayName=Qp;var s9="MenuSubContent",l9=B.forwardRef((e,t)=>{const n=VL(go,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=kd(go,e.__scopeMenu),o=tg(go,e.__scopeMenu),s=i9(s9,e.__scopeMenu),u=B.useRef(null),c=xn(t,u);return y.jsx(i0.Provider,{scope:e.__scopeMenu,children:y.jsx(Na,{present:r||i.open,children:y.jsx(i0.Slot,{scope:e.__scopeMenu,children:y.jsx(yC,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=u.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:zt(e.onFocusOutside,f=>{f.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:zt(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:zt(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),m=Ype[o.dir].includes(f.key);h&&m&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),f.preventDefault())})})})})})});l9.displayName=s9;function u9(e){return e?"open":"closed"}function mv(e){return e==="indeterminate"}function wC(e){return mv(e)?"indeterminate":e?"checked":"unchecked"}function gme(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function yme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function bme(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=yme(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function vme(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function wme(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return vme(n,t)}function o0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var _me=HL,xme=pC,Sme=GL,Eme=WL,kme=bC,Cme=KL,Ame=qw,Tme=YL,Rme=JL,Nme=e9,Ime=n9,Ome=r9,jme=a9,Dme=o9,Mme=l9,_C="ContextMenu",[Pme,$ge]=Ri(_C,[UL]),gi=UL(),[Fme,c9]=Pme(_C),d9=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=B.useState(!1),u=gi(t),c=Ea(r),f=B.useCallback(h=>{s(h),c(h)},[c]);return y.jsx(Fme,{scope:t,open:o,onOpenChange:f,modal:i,children:y.jsx(_me,{...u,dir:a,open:o,onOpenChange:f,modal:i,children:n})})};d9.displayName=_C;var f9="ContextMenuTrigger",h9=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=c9(f9,n),o=gi(n),s=B.useRef({x:0,y:0}),u=B.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),c=B.useRef(0),f=B.useCallback(()=>window.clearTimeout(c.current),[]),h=m=>{s.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return B.useEffect(()=>f,[f]),B.useEffect(()=>void(r&&f()),[r,f]),y.jsxs(y.Fragment,{children:[y.jsx(xme,{...o,virtualRef:u}),y.jsx(an.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:zt(e.onContextMenu,m=>{f(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:zt(e.onPointerDown,Vy(m=>{f(),c.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:zt(e.onPointerMove,Vy(f)),onPointerCancel:r?e.onPointerCancel:zt(e.onPointerCancel,Vy(f)),onPointerUp:r?e.onPointerUp:zt(e.onPointerUp,Vy(f))})]})});h9.displayName=f9;var Lme="ContextMenuPortal",p9=e=>{const{__scopeContextMenu:t,...n}=e,r=gi(t);return y.jsx(Sme,{...r,...n})};p9.displayName=Lme;var m9="ContextMenuContent",g9=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=c9(m9,n),i=gi(n),o=B.useRef(!1);return y.jsx(Eme,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var u;(u=e.onInteractOutside)==null||u.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});g9.displayName=m9;var $me="ContextMenuGroup",Bme=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(kme,{...a,...r,ref:t})});Bme.displayName=$me;var zme="ContextMenuLabel",Ume=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Cme,{...a,...r,ref:t})});Ume.displayName=zme;var qme="ContextMenuItem",y9=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Ame,{...a,...r,ref:t})});y9.displayName=qme;var Hme="ContextMenuCheckboxItem",Vme=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Tme,{...a,...r,ref:t})});Vme.displayName=Hme;var Gme="ContextMenuRadioGroup",Wme=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Rme,{...a,...r,ref:t})});Wme.displayName=Gme;var Kme="ContextMenuRadioItem",Zme=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Nme,{...a,...r,ref:t})});Zme.displayName=Kme;var Yme="ContextMenuItemIndicator",Xme=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Ime,{...a,...r,ref:t})});Xme.displayName=Yme;var Jme="ContextMenuSeparator",b9=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Ome,{...a,...r,ref:t})});b9.displayName=Jme;var Qme="ContextMenuArrow",e0e=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(jme,{...a,...r,ref:t})});e0e.displayName=Qme;var t0e="ContextMenuSubTrigger",n0e=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Dme,{...a,...r,ref:t})});n0e.displayName=t0e;var r0e="ContextMenuSubContent",a0e=B.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gi(n);return y.jsx(Mme,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a0e.displayName=r0e;function Vy(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var i0e=d9,o0e=h9,s0e=p9,l0e=g9,u0e=y9,c0e=b9;function d0e({...e}){return y.jsx(i0e,{"data-slot":"context-menu",...e})}function f0e({...e}){return y.jsx(o0e,{"data-slot":"context-menu-trigger",...e})}function h0e({className:e,...t}){return y.jsx(s0e,{children:y.jsx(l0e,{"data-slot":"context-menu-content",className:Ut("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function fl({className:e,inset:t,variant:n="default",...r}){return y.jsx(u0e,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Ut("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function q4({className:e,...t}){return y.jsx(c0e,{"data-slot":"context-menu-separator",className:Ut("bg-border -mx-1 my-1 h-px",e),...t})}const p0e=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:m,handleDelete:g,setNewName:v,renameInputRef:w,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const A=J=>{J.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},O=J=>{J.key==="Enter"?h():J.key==="Escape"&&f()},j=e.type==="folder",N=j?r?gz:s0:pz,U=j?r?"text-green-400":"text-yellow-400":"text-blue-400",V=y.jsxs(Oo,{className:Ut("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:A,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(Pr,{className:"px-2 py-1",children:y.jsx(Gpe,{checked:n,onCheckedChange:J=>u(!!J,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||j})}),y.jsx(Pr,{className:"px-2 py-1",children:y.jsx(N,{className:Ut("h-5 w-5",U)})}),y.jsx(Pr,{className:"py-1 px-2",children:t?y.jsx(nr,{ref:w,value:a,onChange:J=>v(J.target.value),onBlur:h,onKeyDown:O,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:J=>J.stopPropagation(),disabled:i}):y.jsx("span",{className:Ut("truncate",j&&"cursor-pointer hover:underline"),title:e.name,onClick:J=>{j&&(J.stopPropagation(),s(e))},children:e.name})}),y.jsx(Pr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?qb(e.size):""}),y.jsx(Pr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(Pr,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:Ut("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:J=>{J.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),children:i?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(od,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Save (Enter)"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:J=>{J.stopPropagation(),f()},"aria-label":"Cancel edit",disabled:i,children:y.jsx(Yu,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Cancel (Esc)"})]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:J=>{J.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||o,children:y.jsx(WS,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Rename"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:J=>{J.stopPropagation(),m(e)},"aria-label":j?"Download folder as ZIP":"Download file",disabled:i,children:y.jsx(ab,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:j?"Download folder (.zip)":"Download file"})]})}),y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:J=>{J.stopPropagation(),g(e)},"aria-label":`Delete ${j?"folder":"file"}`,disabled:i,children:y.jsx(Ou,{className:"h-3.5 w-3.5"})})}),y.jsx(Nn,{side:"top",children:"Delete"})]})})]})})})]},e.id);return j?y.jsxs(d0e,{children:[y.jsx(f0e,{disabled:t||i,asChild:!0,children:V}),y.jsxs(h0e,{children:[y.jsx(fl,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(q4,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(fl,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(kz,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(fl,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(Sz,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(fl,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(m6,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(fl,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(jz,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(fl,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(rm,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(q4,{}),y.jsxs(fl,{onSelect:()=>c(e),disabled:i,children:[y.jsx(WS,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(fl,{onSelect:()=>m(e),disabled:i,children:[y.jsx(ab,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(fl,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(Ou,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):V},m0e=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:w,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:A,handleGitPull:O,handleGitCommit:j,handleGitPush:N,handleGitStatus:U})=>{const V=B.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx("div",{className:"relative h-full",children:y.jsxs(sC,{className:"w-full text-sm",children:[y.jsx(lC,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Oo,{className:"hover:bg-card",children:[y.jsx(Ga,{className:"w-[40px] px-2"}),y.jsx(Ga,{className:"w-[40px] px-2"}),y.jsx(Ga,{children:"Name"}),y.jsx(Ga,{className:"w-[100px] text-right",children:"Size"}),y.jsx(Ga,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(Ga,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(uC,{children:[r&&y.jsx($pe,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:o}),V.map(J=>{const P=t===J.path,Z=i.has(J.id),F=C[J.path]??!1;return y.jsx(p0e,{entry:J,isEditingThis:P,isChecked:Z,isGitRepo:F,newName:P?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:v,handleDelete:w,setNewName:_,renameInputRef:S,handleGitInit:A,handleGitPull:O,handleGitCommit:j,handleGitPush:N,handleGitStatus:U},J.id)}),e.length===0&&!r&&!o&&y.jsx(Oo,{children:y.jsx(Pr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},g0e=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:u,startCreatingFolder:c,handleUploadClick:f,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:v,fileInputRef:w,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:w,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(Rz,{className:"h-4 w-4"})}),y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(vz,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Lt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(yv,{className:"h-4 w-4"})}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(cE,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),f()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(p6,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(s0,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(oz,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(rm,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Lt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(qB,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),y0e=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:u})=>y.jsx(Sw,{open:e,onOpenChange:t,children:y.jsxs(Ew,{children:[y.jsxs(kw,{children:[y.jsx(Aw,{children:"Clone Git Repository"}),y.jsxs(Tw,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:u}),"."]})]}),y.jsxs("div",{className:"grid gap-4 py-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(nr,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(nr,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]}),y.jsxs(Cw,{children:[y.jsx(Lt,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),y.jsx(Lt,{onClick:s,disabled:o||!n.trim(),children:o?y.jsxs(y.Fragment,{children:[y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Cloning..."]}):"Clone"})]})]})}),b0e=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(Sw,{open:e,onOpenChange:t,children:y.jsxs(Ew,{children:[y.jsxs(kw,{children:[y.jsx(Aw,{children:"Commit Changes"}),y.jsxs(Tw,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]})]}),y.jsx("div",{className:"grid gap-4 py-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(dn,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(nr,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})}),y.jsxs(Cw,{children:[y.jsx(Lt,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),y.jsx(Lt,{onClick:o,disabled:i||!r.trim(),children:i?y.jsxs(y.Fragment,{children:[y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Committing..."]}):"Commit"})]})]})}),xC=B.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:o,createDirectory:s,uploadFiles:u,deleteNodes:c,renameNode:f,setCurrentPath:h,rootId:m,selectFile:g,deselectFile:v,selectedFileIds:w,vfsKey:_,configuredVfsKey:x,initializingKey:S,_setError:E,_setOperationLoading:C,findNodeByPath:A,initializeVFS:O}=Gi(In(ht=>({nodes:ht.nodes,childrenMap:ht.childrenMap,currentParentId:ht.currentParentId,selectedFileIds:ht.selectedFileIds,loading:ht.loading,operationLoading:ht.operationLoading,error:ht.error,fetchNodes:ht.fetchNodes,createDirectory:ht.createDirectory,uploadFiles:ht.uploadFiles,deleteNodes:ht.deleteNodes,renameNode:ht.renameNode,selectFile:ht.selectFile,deselectFile:ht.deselectFile,setCurrentPath:ht.setCurrentPath,rootId:ht.rootId,vfsKey:ht.vfsKey,configuredVfsKey:ht.configuredVfsKey,initializingKey:ht.initializingKey,_setError:ht._setError,_setOperationLoading:ht._setOperationLoading,findNodeByPath:ht.findNodeByPath,initializeVFS:ht.initializeVFS}))),[j,N]=B.useState(""),[U,V]=B.useState(null),[J,P]=B.useState(!1),[Z,F]=B.useState(""),[ue,le]=B.useState({}),[ne,Q]=B.useState(!1),[te,G]=B.useState(""),[X,ae]=B.useState(""),[be,we]=B.useState(!1),[fe,Me]=B.useState(!1),[Pe,Oe]=B.useState(null),[Ae,$e]=B.useState(""),[qe,Fe]=B.useState(!1),[Ne,$]=B.useState({}),Se=B.useRef(null),ke=B.useRef(null),ce=B.useRef(null),ie=B.useRef(null),Y=B.useRef(null),_e=n?e[n]:null,De=_e?_e.path:"/",Ze=(t[n||m||""]||[]).map(ht=>e[ht]).filter(ht=>!!ht).sort((ht,Ct)=>ht.type==="folder"&&Ct.type==="file"?-1:ht.type==="file"&&Ct.type==="folder"?1:ht.name.localeCompare(Ct.name)),Et=B.useMemo(()=>Ze.filter(ht=>ht.type==="folder").map(ht=>ht.path),[Ze]),at=r||S!==null||_!==x,_t=a||be||qe||Object.values(Ne).some(Boolean);B.useEffect(()=>{n!==null&&!t[n]&&!at&&x===_?o(n):n===null&&m&&!t[m]&&!at&&x===_&&o(m)},[n,t,m,at,o,x,_]),B.useEffect(()=>{var ht,Ct;U&&((ht=ie.current)==null||ht.focus(),(Ct=ie.current)==null||Ct.select())},[U]),B.useEffect(()=>{var ht;J&&((ht=Y.current)==null||ht.focus())},[J]),B.useEffect(()=>{(async()=>{if(at||Et.length===0)return;const Ct={};let Ot=!1;for(const Zt of Et)try{const En=await Bne(Zt);ue[Zt]!==En&&(Ct[Zt]=En,Ot=!0)}catch(En){console.error(`Error checking git status for ${Zt}:`,En),ue[Zt]!==!1&&(Ct[Zt]=!1,Ot=!0)}Ot&&le(Zt=>({...Zt,...Ct}))})()},[Et,at,ue]);const Nt=B.useCallback(async(ht,Ct)=>{if(!(_t||at)){Ct!==!1&&C(!0),E(null);try{await ht()}catch(Ot){console.error("[FileManager Operation Error]:",Ot)}finally{Ct!==!1&&C(!1)}}},[_t,at,E,C]),Rt=B.useCallback(ht=>{_t||at||U||ht.type==="folder"&&Nt(()=>h(ht.path),!1)},[_t,at,U,h,Nt]),Kt=B.useCallback(()=>{if(_t||at||De==="/")return;const ht=Qv(De);Nt(()=>h(ht),!1)},[_t,at,De,h,Nt]),pe=B.useCallback(()=>{_t||at||De==="/"||Nt(()=>h("/"),!1)},[_t,at,De,h,Nt]),R=B.useCallback(()=>{at||Nt(()=>o(n),!1)},[Nt,o,n,at]),H=B.useCallback((ht,Ct)=>{const Ot=e[Ct];Ot&&Ot.type==="file"?ht?g(Ct):v(Ct):Ot&&Ot.type==="folder"&&ct.info("Folders cannot be attached to the prompt.")},[g,v,e]),de=B.useCallback(ht=>{_t||at||J||(V(ht.path),N(ht.name),P(!1))},[_t,at,J]),Re=B.useCallback(()=>{V(null),N("")},[]),ye=B.useCallback(async()=>{if(!U||!j.trim()){Re();return}const ht=A(U);ht&&ht.name!==j.trim()&&await Nt(()=>f(ht.id,j.trim())),Re()},[U,j,f,Re,A,Nt]),Ce=B.useCallback(()=>{_t||at||U||(P(!0),F(""),V(null))},[_t,at,U]),oe=B.useCallback(()=>{P(!1),F("")},[]),ft=B.useCallback(async()=>{if(!Z.trim()){oe();return}await Nt(()=>s(n,Z.trim())),oe()},[Z,s,n,oe,Nt]),vt=()=>{var ht;return(ht=Se.current)==null?void 0:ht.click()},D=()=>{var ht;return(ht=ke.current)==null?void 0:ht.click()},Be=()=>{var ht;return(ht=ce.current)==null?void 0:ht.click()},st=B.useCallback(async ht=>{const Ct=ht.target.files;Ct&&Ct.length>0&&(await Nt(()=>u(n,Ct)),ht.target&&(ht.target.value=""))},[u,n,Nt]),ge=B.useCallback(async ht=>{var Ot;const Ct=(Ot=ht.target.files)==null?void 0:Ot[0];Ct&&(await Nt(async()=>{await Une(Ct,De),await o(n)}),ht.target&&(ht.target.value=""))},[De,o,n,Nt]),je=B.useCallback(async ht=>{window.confirm(`Delete ${ht.type} "${ht.name}"?${ht.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Nt(()=>c([ht.id]))},[c,Nt]),Je=B.useCallback(async ht=>{await Nt(async()=>{ht.type==="file"?await zne(ht.path):await $I(`${ht.name}.zip`,ht.path)})},[Nt]),It=B.useCallback(async()=>{Ze.length!==0&&await Nt(async()=>{const ht=sa(De)||"root";await $I(`${ht}_export.zip`,De)})},[De,Ze.length,Nt]),me=B.useCallback(async(ht,Ct)=>{if(!(Ne[ht]||at||a)){$(Ot=>({...Ot,[ht]:!0})),E(null);try{await Ct()}catch(Ot){console.error(`[FileManager Git Op Error @ ${ht}]:`,Ot)}finally{$(Ot=>({...Ot,[ht]:!1}))}}},[E,Ne,at,a]),q=B.useCallback(ht=>{me(ht,async()=>{await OM(ht),le(Ct=>({...Ct,[ht]:!0}))})},[me]),z=B.useCallback(ht=>{ct.info("Pulling default branch (auth not implemented yet)..."),me(ht,()=>iw(ht,"main"))},[me]),W=B.useCallback(ht=>{Oe(ht),$e(""),Me(!0)},[]),he=B.useCallback(ht=>{ct.info("Pushing default branch (auth not implemented yet)..."),me(ht,()=>Nk(ht,"main"))},[me]),Te=B.useCallback(ht=>{me(ht,()=>jM(ht))},[me]),Ve=B.useCallback(()=>{G(""),ae(""),Q(!0)},[]),gt=B.useCallback(async()=>{if(!te.trim()){ct.error("Repository URL cannot be empty.");return}we(!0),E(null);try{const ht=sa(te.trim().replace(/\.git$/,""))||"cloned_repo",Ct=jm(De,ht);await IM(Ct,te.trim(),X.trim()||void 0),Q(!1),await R()}catch{}finally{we(!1)}},[te,X,De,E,R]),Gt=B.useCallback(async()=>{if(!Pe||!Ae.trim()){ct.error("Commit message cannot be empty.");return}Fe(!0),E(null);try{await Rk(Pe,Ae.trim()),Me(!1)}catch{}finally{Fe(!1)}},[Pe,Ae,E]);return at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[y.jsx(Xn,{className:"h-8 w-8 animate-spin mb-2"}),y.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&y.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[y.jsxs("p",{children:["Error loading filesystem: ",i]}),y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>O(_||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):y.jsxs("div",{className:Ut("flex h-full flex-col bg-card text-card-foreground"),children:[y.jsx(g0e,{currentPath:De,isAnyLoading:_t||at,isOperationLoading:a,entries:Ze,editingPath:U,creatingFolder:J,handleNavigateHome:pe,handleNavigateUp:Kt,handleRefresh:R,startCreatingFolder:Ce,handleUploadClick:vt,handleFolderUploadClick:D,handleArchiveUploadClick:Be,handleDownloadAll:It,handleCloneClick:Ve,fileInputRef:Se,folderInputRef:ke,archiveInputRef:ce,handleFileChange:st,handleArchiveChange:ge}),y.jsx("div",{className:"flex-grow overflow-auto",children:y.jsx(m0e,{entries:Ze,editingPath:U,newName:j,creatingFolder:J,newFolderName:Z,selectedFileIds:w,isOperationLoading:_t,handleNavigate:Rt,handleCheckboxChange:H,startEditing:de,cancelEditing:Re,handleRename:ye,cancelCreatingFolder:oe,handleCreateFolder:ft,handleDownload:Je,handleDelete:je,setNewName:N,setNewFolderName:F,renameInputRef:ie,newFolderInputRef:Y,gitRepoStatus:ue,handleGitInit:q,handleGitPull:z,handleGitCommit:W,handleGitPush:he,handleGitStatus:Te})}),y.jsx(y0e,{isOpen:ne,onOpenChange:Q,cloneRepoUrl:te,setCloneRepoUrl:G,cloneBranch:X,setCloneBranch:ae,isCloning:be,onSubmitClone:gt,currentPath:De}),y.jsx(b0e,{isOpen:fe,onOpenChange:Me,commitPath:Pe,commitMessage:Ae,setCommitMessage:$e,isCommitting:qe,onSubmitCommit:Gt})]})});xC.displayName="FileManager";const v0e=({vfsKey:e,selectedItemType:t})=>e==="orphan"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(D3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Shared VFS:"})," All chats ",y.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(D3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(s0,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null;function w0e(){const e=Qr.getState().registerPromptControl,t=Qr.getState().registerChatControl,n=lm.getState().addAttachedFile,r=()=>{const{toggleChatControlPanel:i,isChatControlPanelOpen:o}=Ka(In(g=>({toggleChatControlPanel:g.toggleChatControlPanel,isChatControlPanelOpen:g.isChatControlPanelOpen}))),{enableVfs:s,selectedFileIds:u,nodes:c,clearSelection:f}=Gi(In(g=>({enableVfs:g.enableVfs,selectedFileIds:g.selectedFileIds,nodes:g.nodes,clearSelection:g.clearSelection}))),h=o.vfs??!1,m=()=>{if(u.size===0){ct.info("No files selected in VFS to attach.");return}let g=0;u.forEach(v=>{const w=c[v];w&&w.type==="file"&&(n({source:"vfs",name:w.name,type:w.mimeType||"application/octet-stream",size:w.size,path:w.path}),g++)}),g>0&&(ct.success(`Attached ${g} file(s) from VFS to the next prompt.`),f())};return s?y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(Lt,{variant:"ghost",size:"icon",className:Ut("h-8 w-8",h&&"bg-muted text-primary"),onClick:()=>i("vfs"),"aria-label":"Toggle Virtual File System",children:y.jsx(g6,{className:"h-4 w-4"})})}),y.jsx(Nn,{side:"top",children:"Virtual Filesystem"})]})}),u.size>0&&y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsxs(Lt,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:m,"aria-label":`Attach ${u.size} selected VFS file(s)`,children:[y.jsx(y6,{className:"h-4 w-4 mr-1"})," ","Attach (",u.size,")"]})}),y.jsx(Nn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},a=()=>{const i=Gi(s=>s.vfsKey),o=dr(s=>s.selectedItemType);return y.jsxs("div",{className:"flex flex-col h-full w-[450px] border-l border-border bg-card",children:[y.jsx(v0e,{vfsKey:i,selectedItemType:o}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(xC,{})})]})};e({id:"core-vfs-prompt-trigger",order:25,show:()=>Gi.getState().enableVfs,triggerRenderer:()=>wt.createElement(r),getParameters:void 0,getMetadata:void 0,clearOnSubmit:void 0}),t({id:"core-vfs-panel-trigger",panel:"drawer_right",order:10,show:()=>Ka.getState().isChatControlPanelOpen.vfs??!1,renderer:()=>wt.createElement(a),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control")}function _0e(){const e=Qr.getState().registerPromptControl,t=()=>{const{selectedItemId:n,selectedItemType:r,getConversationById:a,syncRepos:i,linkConversationToRepo:o,syncConversation:s,conversationSyncStatus:u}=dr(In(j=>({selectedItemId:j.selectedItemId,selectedItemType:j.selectedItemType,getConversationById:j.getConversationById,syncRepos:j.syncRepos,linkConversationToRepo:j.linkConversationToRepo,syncConversation:j.syncConversation,conversationSyncStatus:j.conversationSyncStatus}))),c=er.getState().status==="streaming",[f,h]=B.useState(!1),[m,g]=B.useState(!1),v=r==="conversation"&&n?a(n):null,w=(v==null?void 0:v.syncRepoId)??null,_=v?u[v.id]:"idle",x=wt.useMemo(()=>new Map(i.map(j=>[j.id,j.name])),[i]),S=w?x.get(w):void 0,E=B.useCallback(async j=>{if(!v)return;h(!0);const N=j==="none"?null:j;await o(v.id,N),h(!1)},[v,o]),C=B.useCallback(async()=>{!v||!w||(g(!0),await s(v.id),g(!1))},[v,w,s]),A=F5(_,S),O=!w||m||f||c||_==="syncing";return r!=="conversation"?null:y.jsxs(dC,{children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(fC,{asChild:!0,children:y.jsx(Lt,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:c||f||m,"aria-label":"Configure Git Sync",children:_==="syncing"||m||f?y.jsx(Xn,{className:"h-4 w-4 animate-spin"}):y.jsx(rm,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:w?`Sync Status: ${_}`:"Link to Sync Repo"})]})}),y.jsxs(hC,{className:"w-64 p-4 space-y-3",align:"start",children:[y.jsx(dn,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),y.jsxs(wd,{value:w??"none",onValueChange:E,disabled:f||m||c,children:[y.jsx(xd,{id:"sync-repo-select",className:"w-full h-9",children:y.jsx(_d,{placeholder:"Select repository..."})}),y.jsxs(Sd,{children:[y.jsx(Wi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),i.map(j=>y.jsx(Wi,{value:j.id,children:j.name},j.id))]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",A||"Not Linked"]}),y.jsxs(Lt,{size:"sm",variant:"outline",onClick:C,disabled:O,className:"h-8",children:[m||_==="syncing"?y.jsx(Xn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(m6,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};e({id:"core-git-sync",order:40,triggerRenderer:()=>wt.createElement(t),show:()=>dr.getState().syncRepos.length>0}),console.log("[Function] Registered Core Git Sync Control")}const x0e=L.object({path:L.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),S0e=L.object({path:L.string().describe("The path of the file to read within the VFS."),encoding:L.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),E0e=L.object({path:L.string().describe("The path where the file should be written."),content:L.string().describe("The content to write to the file."),encoding:L.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),k0e=L.object({path:L.string().describe("The path of the file or directory to delete."),recursive:L.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),C0e=L.object({path:L.string().describe("The path of the directory to create (including parents).")}),A0e=L.object({oldPath:L.string().describe("The current path of the item to rename."),newName:L.string().describe("The new name for the item.")});function T0e(){const e=Qr.getState().registerTool,t=()=>{const u=Gi.getState().currentParentId,c=Gi.getState().nodes,f=Gi.getState().rootId,h=u?c[u]:c[f||""];return h?h.path:"/"};console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:x0e},async({path:u})=>{const c=Wn(u||t());try{const f=await Ik(c);return{success:!0,path:c,entries:f.map(h=>({name:h.name,type:h.isDirectory?"folder":"file",size:h.size,lastModified:h.lastModified.toISOString()}))}}catch(f){return{success:!1,path:c,error:f.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:S0e},async({path:u,encoding:c})=>{const f=Wn(u);try{const h=await Ih(f);let m;return c==="base64"?m=btoa(String.fromCharCode(...h)):m=new TextDecoder().decode(h),{success:!0,path:f,content:m,encoding:c}}catch(h){return{success:!1,path:f,error:h.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:E0e},async({path:u,content:c,encoding:f})=>{const h=Wn(u);try{let m;if(f==="base64"){const g=atob(c),v=g.length,w=new Uint8Array(v);for(let _=0;_<v;_++)w[_]=g.charCodeAt(_);m=w}else m=c;return await ow(h,m),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:k0e},async({path:u,recursive:c})=>{const f=Wn(u);try{return await Ok(f,c),{success:!0,path:f}}catch(h){return{success:!1,path:f,error:h.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:C0e},async({path:u})=>{const c=Wn(u);try{return await MM(c),{success:!0,path:c}}catch(f){return{success:!1,path:c,error:f.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:A0e},async({oldPath:u,newName:c})=>{const f=Wn(u),h=Wn(f.substring(0,f.lastIndexOf("/"))||"/"),m=Ms(h,c);try{return await FM(f,m),{success:!0,oldPath:f,newPath:m}}catch(g){return{success:!1,oldPath:f,newName:c,error:g.message}}}),console.log("[Function] Core VFS Tools Registered.")}const R0e=L.object({path:L.string().describe("The directory path within the VFS to initialize as a Git repository.")}),N0e=L.object({path:L.string().describe("The directory path of the Git repository within the VFS to commit."),message:L.string().describe("The commit message.")}),I0e=L.object({path:L.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:L.string().optional().describe("The branch name to pull.")}),O0e=L.object({path:L.string().describe("The directory path of the Git repository within the VFS to push."),branch:L.string().optional().describe("The branch name to push.")}),j0e=L.object({path:L.string().describe("The directory path of the Git repository within the VFS to check status.")});function D0e(){const e=Qr.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:R0e},async({path:o})=>{try{return await OM(o),{success:!0,message:`Repository initialized at ${o}`}}catch(s){return{success:!1,error:s.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:N0e},async({path:o,message:s})=>{const u=zr.getState();if(!u.gitUserName||!u.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await Rk(o,s),{success:!0,message:`Changes committed in ${o}`}}catch(c){return{success:!1,error:c.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:I0e},async({path:o,branch:s})=>{try{return await iw(o,s||"main"),{success:!0,message:`Pulled changes for ${o}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:O0e},async({path:o,branch:s})=>{try{return await Nk(o,s||"main"),{success:!0,message:`Pushed changes for ${o}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:j0e},async({path:o})=>{try{return await jM(o),{success:!0,message:`Status checked for ${o}`}}catch(s){return{success:!1,error:s.message}}}),console.log("[Function] Core Git Tools Registered.")}const M0e=({className:e,localMaxSteps:t,setLocalMaxSteps:n})=>{const{selectedItemId:r,selectedItemType:a,getConversationById:i,updateCurrentConversationToolSettings:o}=dr(In(E=>({selectedItemId:E.selectedItemId,selectedItemType:E.selectedItemType,getConversationById:E.getConversationById,updateCurrentConversationToolSettings:E.updateCurrentConversationToolSettings}))),s=Qr(E=>E.tools),[u,c]=B.useState(""),[f,h]=B.useState(new Set);B.useEffect(()=>{var E;if(a==="conversation"&&r){const C=i(r),A=new Set(((E=C==null?void 0:C.metadata)==null?void 0:E.enabledTools)??[]);h(A)}else h(new Set)},[r,a,i]);const m=B.useMemo(()=>Object.entries(s).map(([E,{definition:C,modId:A}])=>({name:E,description:C.description??"No description provided.",modId:A})).sort((E,C)=>E.name.localeCompare(C.name)),[s]),g=B.useMemo(()=>{const E=u.trim().toLowerCase();return E?m.filter(C=>C.name.toLowerCase().includes(E)||C.description.toLowerCase().includes(E)||C.modId.toLowerCase().includes(E)):m},[m,u]),v=B.useCallback((E,C)=>{h(O=>{const j=new Set(O);return C?j.add(E):j.delete(E),j});const A=new Set(f);C?A.add(E):A.delete(E),o({enabledTools:Array.from(A)})},[f,o]),w=B.useCallback(E=>{const C=E?new Set(m.map(A=>A.name)):new Set;h(C),o({enabledTools:Array.from(C)})},[m,o]),_=E=>{const C=E.target.value;if(C===""){n(null);return}const A=parseInt(C,10);isNaN(A)?n(null):n(A)},x=t===null?"":String(t),S=a!=="conversation"||!r;return y.jsxs("div",{className:Ut("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(b6,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(nr,{type:"search",placeholder:"Filter tools...",value:u,onChange:E=>c(E.target.value),className:"pl-8 h-9",disabled:S})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(dn,{className:"text-xs text-muted-foreground",children:[g.length," tools shown (",f.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>w(!0),disabled:S||m.length===0,children:"Enable All"}),y.jsx(Lt,{variant:"outline",size:"sm",onClick:()=>w(!1),disabled:S||m.length===0||f.size===0,children:"Disable All"})]})]}),y.jsx(pw,{className:"h-56 border rounded-md p-2 bg-background/50",children:S?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):m.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):g.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:g.map(E=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx(Dl,{id:`tool-switch-${E.name}`,checked:f.has(E.name),onCheckedChange:C=>v(E.name,C),className:"flex-shrink-0",disabled:S}),y.jsxs(dn,{htmlFor:`tool-switch-${E.name}`,className:Ut("text-sm font-normal flex-grow pl-2 space-y-0.5",S?"cursor-not-allowed":"cursor-pointer"),title:`${E.name} (from ${E.modId})`,children:[y.jsx("span",{className:"block font-medium",children:E.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:E.description})]})]},E.name))})}),y.jsxs("div",{className:"pt-2",children:[y.jsx(dn,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),y.jsx(nr,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:_,className:"w-20 h-8 text-xs mt-1",placeholder:String(zr.getState().toolMaxSteps??5),disabled:S}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20)."})]})]})};function P0e(){const e=Qr.getState().registerPromptControl,t=()=>{var v,w,_;const{selectedItemId:n,selectedItemType:r,getConversationById:a}=dr(In(x=>({selectedItemId:x.selectedItemId,selectedItemType:x.selectedItemType,getConversationById:x.getConversationById}))),i=er.getState().status==="streaming",o=Object.keys(Qr.getState().tools).length,s=r==="conversation"&&n?a(n):null,u=((w=(v=s==null?void 0:s.metadata)==null?void 0:v.enabledTools)==null?void 0:w.length)??0,c=((_=s==null?void 0:s.metadata)==null?void 0:_.toolMaxStepsOverride)??null,[f,h]=B.useState(c);wt.useEffect(()=>{h(c)},[c]);const m=u>0||c!==null,g=i||o===0||r!=="conversation";return y.jsxs(dC,{onOpenChange:x=>{x||dr.getState().updateCurrentConversationToolSettings({toolMaxStepsOverride:f})},children:[y.jsx(On,{delayDuration:100,children:y.jsxs(Tn,{children:[y.jsx(Rn,{asChild:!0,children:y.jsx(fC,{asChild:!0,children:y.jsx(Lt,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:g,"aria-label":"Configure Tools",children:y.jsx(g7,{className:"h-4 w-4"})})})}),y.jsx(Nn,{side:"top",children:g?"Tools unavailable (select conversation)":`Tools (${u} enabled)`})]})}),y.jsx(hC,{className:"w-auto p-0",align:"start",children:y.jsx(M0e,{localMaxSteps:f,setLocalMaxSteps:h})})]})};e({id:"core-tool-selector",order:50,triggerRenderer:()=>wt.createElement(t),getMetadata:()=>{var o,s,u;const{selectedItemId:n,selectedItemType:r,getConversationById:a}=dr.getState(),i=r==="conversation"&&n?a(n):null;return{enabledTools:((o=i==null?void 0:i.metadata)==null?void 0:o.enabledTools)??[],...((s=i==null?void 0:i.metadata)==null?void 0:s.toolMaxStepsOverride)!==null&&{maxSteps:(u=i==null?void 0:i.metadata)==null?void 0:u.toolMaxStepsOverride}}},show:()=>Object.keys(Qr.getState().tools).length>0}),console.log("[Function] Registered Core Tool Selector Control")}const SC=wt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const{dbProviderConfigs:a,globalModelSortOrder:i,isLoading:o}=fi(In(c=>({dbProviderConfigs:c.dbProviderConfigs,globalModelSortOrder:c.globalModelSortOrder,isLoading:c.isLoading}))),s=B.useMemo(()=>{const c=new Map,f=new Set;a.forEach(g=>{if(!g.isEnabled||!g.enabledModels)return;const v=g.fetchedModels??(g.type?fi.getState().getAllAvailableModelDefsForProvider(g.id):[]),w=new Map(v.map(_=>[_.id,_]));g.enabledModels.forEach(_=>{const x=Af(g.id,_),S=w.get(_);S&&(f.add(x),c.set(x,{name:S.name||_,providerName:g.name}))})});const h=[],m=new Set;return i.forEach(g=>{if(f.has(g)){const v=c.get(g);v&&!m.has(g)&&(h.push({id:g,...v}),m.add(g))}}),f.forEach(g=>{if(!m.has(g)){const v=c.get(g);v&&h.push({id:g,...v})}}),h},[a,i]),u=B.useMemo(()=>s.find(c=>c.id===e),[s,e]);return o?y.jsx(Aa,{className:Ut("h-9 w-[200px]",r)}):y.jsxs(wd,{value:e??"none",onValueChange:c=>t(c==="none"?null:c),disabled:n||s.length===0,children:[y.jsx(xd,{className:Ut("w-auto h-9 text-sm",r),"aria-label":"Select AI Model",children:y.jsx(_d,{placeholder:"Select Model...",children:u?y.jsxs("span",{className:"truncate",children:[u.name," (",u.providerName,")"]}):y.jsx("span",{className:"text-muted-foreground",children:"Select Model..."})})}),y.jsx(Sd,{children:s.length===0?y.jsx(Wi,{value:"none",disabled:!0,children:"No models enabled"}):s.map(c=>y.jsxs(Wi,{value:c.id,children:[c.name," (",c.providerName,")"]},c.id))})]})});SC.displayName="GlobalModelSelector";const F0e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:o})=>y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),y.jsx(bw,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:s=>t(s.target.value||null),rows:6,disabled:o,className:"mt-1"}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:o||e===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{children:[y.jsx(dn,{children:"Default Model (Overrides Parent/Global)"}),y.jsx(SC,{value:n??i,onChange:r,disabled:o}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:o||n===null,children:"Use Inherited/Default"})]})]}),L0e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:o,setTopK:s,presencePenalty:u,setPresencePenalty:c,frequencyPenalty:f,setFrequencyPenalty:h,localTemp:m,setLocalTemp:g,localTopP:v,setLocalTopP:w,localPresence:_,setLocalPresence:x,localFrequency:S,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:A,effectiveTopP:O,effectiveTopK:j,effectivePresencePenalty:N,effectiveFrequencyPenalty:U,isSaving:V})=>{const J=B.useCallback((Z,F)=>{const ue=F.target.value,le=ue===""?null:parseInt(ue,10);(ue===""||!isNaN(le)&&le!==null)&&Z(le)},[]),P=B.useCallback((Z,F)=>{Z(F[0])},[]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),y.jsx(As,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:Z=>g(Z[0]),onValueCommit:Z=>P(t,Z),disabled:V}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:V||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),y.jsx(As,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:Z=>w(Z[0]),onValueCommit:Z=>P(i,Z),disabled:V}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:V||a===null,children:["Use Inherited/Default (",(O==null?void 0:O.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(nr,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${A??"Default"}`,value:n??"",onChange:Z=>J(r,Z),min:"1",className:"h-8 text-xs",disabled:V}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:V||n===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(dn,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),y.jsx(nr,{id:"project-top-k",type:"number",placeholder:`Inherited: ${j??"Default"}`,value:o??"",onChange:Z=>J(s,Z),min:"1",className:"h-8 text-xs",disabled:V}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>s(null),disabled:V||o===null,children:"Use Inherited/Default"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",_.toFixed(2),")"]}),y.jsx(As,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:Z=>x(Z[0]),onValueCommit:Z=>P(c,Z),disabled:V}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>c(null),disabled:V||u===null,children:["Use Inherited/Default (",(N==null?void 0:N.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(dn,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),y.jsx(As,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:Z=>E(Z[0]),onValueCommit:Z=>P(h,Z),disabled:V}),y.jsxs(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:V||f===null,children:["Use Inherited/Default (",(U==null?void 0:U.toFixed(2))??"N/A",")"]})]})]})},$0e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var o;const i=((o=r.find(s=>s.id===n))==null?void 0:o.name)??"None";return y.jsx("div",{className:"space-y-4",children:y.jsxs("div",{children:[y.jsx(dn,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),y.jsxs(wd,{value:e??"none",onValueChange:s=>t(s==="none"?null:s),disabled:a||r.length===0,children:[y.jsx(xd,{id:"project-sync-repo",children:y.jsx(_d,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),y.jsxs(Sd,{children:[y.jsx(Wi,{value:"none",children:y.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(s=>y.jsx(Wi,{value:s.id,children:s.name},s.id))]})]}),y.jsx(Lt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},B0e=({projectId:e,projectName:t,isSaving:n})=>{const r=()=>{ct.info(`VFS clearing for project "${t}" is not yet implemented.`)},a=Ut("px-2.5 py-1 text-xs font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary/50","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx("div",{className:"flex flex-col h-full",children:y.jsxs(Ow,{defaultValue:"manage",className:"flex-grow flex flex-col",children:[y.jsxs(jw,{className:"flex-shrink-0 gap-1 p-1 mb-3 h-auto justify-start bg-muted/50 rounded-md",children:[y.jsx(li,{value:"manage",className:a,children:"Manage Files"}),y.jsx(li,{value:"settings",className:a,children:"Settings & Danger Zone"})]}),y.jsx(ui,{value:"manage",className:"flex-grow flex flex-col overflow-hidden data-[state=inactive]:hidden",children:y.jsx("div",{className:"flex-grow border rounded-md overflow-hidden",children:e?y.jsx(xC,{}):y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})}),y.jsxs(ui,{value:"settings",className:"space-y-4 data-[state=inactive]:hidden",children:[y.jsxs("div",{children:[y.jsx(dn,{children:"Project Filesystem Info"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),y.jsx("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2",children:y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",y.jsx("code",{className:"text-xs",children:e||"N/A"})]})})]}),y.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[y.jsx(dn,{className:"text-destructive",children:"Danger Zone"}),y.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."}),y.jsxs(Lt,{variant:"destructive",size:"sm",onClick:r,disabled:n||!e,children:[y.jsx(Lf,{className:"h-4 w-4 mr-1"}),"Clear Project VFS (Not Implemented)"]})]})]})]})})},z0e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a,getEffectiveProjectSettings:i}=_l(In($e=>({getProjectById:$e.getProjectById,updateProject:$e.updateProject,getEffectiveProjectSettings:$e.getEffectiveProjectSettings}))),o=dr($e=>$e.syncRepos),s=zr(In($e=>({globalSystemPrompt:$e.globalSystemPrompt,temperature:$e.temperature,maxTokens:$e.maxTokens,topP:$e.topP,topK:$e.topK,presencePenalty:$e.presencePenalty,frequencyPenalty:$e.frequencyPenalty}))),u=fi($e=>$e.selectedModelId),c=Gi($e=>$e.setVfsKey),[f,h]=B.useState(null),[m,g]=B.useState(null),[v,w]=B.useState(null),[_,x]=B.useState(null),[S,E]=B.useState(null),[C,A]=B.useState(null),[O,j]=B.useState(null),[N,U]=B.useState(null),[V,J]=B.useState(null),[P,Z]=B.useState(.7),[F,ue]=B.useState(1),[le,ne]=B.useState(0),[Q,te]=B.useState(0),[G,X]=B.useState(!1),[ae,be]=B.useState("prompt"),we=n?r(n):null,fe=n?i(n):null,Me=B.useCallback($e=>{var Fe;if(!$e)return null;const qe=r($e);return qe?((Fe=qe.metadata)==null?void 0:Fe.syncRepoId)!==void 0?qe.metadata.syncRepoId:Me(qe.parentId):null},[r]),Pe=n?Me(n):null;B.useEffect(()=>{var $e;if(e&&n){console.log(`[ProjectSettingsModal] Opening for ${n}. Setting VFS key.`),c(n);const qe=r(n),Fe=i(n);h((qe==null?void 0:qe.systemPrompt)??null),g((qe==null?void 0:qe.modelId)??null),w((qe==null?void 0:qe.temperature)??null),x((qe==null?void 0:qe.maxTokens)??null),E((qe==null?void 0:qe.topP)??null),A((qe==null?void 0:qe.topK)??null),j((qe==null?void 0:qe.presencePenalty)??null),U((qe==null?void 0:qe.frequencyPenalty)??null),J((($e=qe==null?void 0:qe.metadata)==null?void 0:$e.syncRepoId)??null),Z((Fe==null?void 0:Fe.temperature)??s.temperature),ue((Fe==null?void 0:Fe.topP)??s.topP??1),ne((Fe==null?void 0:Fe.presencePenalty)??s.presencePenalty??0),te((Fe==null?void 0:Fe.frequencyPenalty)??s.frequencyPenalty??0)}else e||(console.log("[ProjectSettingsModal] Closing. Setting VFS key to null."),c(null),h(null),g(null),w(null),x(null),E(null),A(null),j(null),U(null),J(null))},[e,n,r,i,s,c]),B.useEffect(()=>Z(v??(fe==null?void 0:fe.temperature)??s.temperature),[v,fe,s.temperature]),B.useEffect(()=>ue(S??(fe==null?void 0:fe.topP)??s.topP??1),[S,fe,s.topP]),B.useEffect(()=>ne(O??(fe==null?void 0:fe.presencePenalty)??s.presencePenalty??0),[O,fe,s.presencePenalty]),B.useEffect(()=>te(N??(fe==null?void 0:fe.frequencyPenalty)??s.frequencyPenalty??0),[N,fe,s.frequencyPenalty]);const Oe=async()=>{if(n){X(!0);try{const $e=we!=null&&we.parentId?i(we.parentId):{systemPrompt:s.globalSystemPrompt,modelId:u,temperature:s.temperature,maxTokens:s.maxTokens,topP:s.topP,topK:s.topK,presencePenalty:s.presencePenalty,frequencyPenalty:s.frequencyPenalty},qe=we!=null&&we.parentId?Me(we.parentId):null,Fe={},Ne={...(we==null?void 0:we.metadata)??{}};f!==$e.systemPrompt?Fe.systemPrompt=f:Fe.systemPrompt=void 0,m!==$e.modelId?Fe.modelId=m:Fe.modelId=void 0,v!==$e.temperature?Fe.temperature=v:Fe.temperature=void 0,_!==$e.maxTokens?Fe.maxTokens=_:Fe.maxTokens=void 0,S!==$e.topP?Fe.topP=S:Fe.topP=void 0,C!==$e.topK?Fe.topK=C:Fe.topK=void 0,O!==$e.presencePenalty?Fe.presencePenalty=O:Fe.presencePenalty=void 0,N!==$e.frequencyPenalty?Fe.frequencyPenalty=N:Fe.frequencyPenalty=void 0,V!==qe?Ne.syncRepoId=V:delete Ne.syncRepoId,Fe.metadata=Ne,await a(n,Fe),ct.success(`Project "${we==null?void 0:we.name}" settings updated.`),t()}catch($e){ct.error("Failed to save project settings."),console.error("Failed to save project settings:",$e)}finally{X(!1)}}},Ae=Ut("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(Sw,{open:e,onOpenChange:t,children:y.jsxs(Ew,{className:"sm:max-w-[800px] w-[90vw] h-[70vh] min-h-[500px] max-h-[80vh] flex flex-col p-0",children:[y.jsxs(kw,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsxs(Aw,{children:["Project Settings: ",we==null?void 0:we.name]}),y.jsx(Tw,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),y.jsxs(Ow,{value:ae,onValueChange:be,className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(jw,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(li,{value:"prompt",className:Ae,children:"Prompt & Model"}),y.jsx(li,{value:"params",className:Ae,children:"Parameters"}),y.jsx(li,{value:"sync",className:Ae,children:"Sync"}),y.jsx(li,{value:"vfs",className:Ae,children:"Filesystem"})]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(ui,{value:"prompt",children:y.jsx(F0e,{systemPrompt:f,setSystemPrompt:h,modelId:m,setModelId:g,effectiveSystemPrompt:(fe==null?void 0:fe.systemPrompt)??s.globalSystemPrompt,effectiveModelId:(fe==null?void 0:fe.modelId)??u,isSaving:G})}),y.jsx(ui,{value:"params",children:y.jsx(L0e,{temperature:v,setTemperature:w,maxTokens:_,setMaxTokens:x,topP:S,setTopP:E,topK:C,setTopK:A,presencePenalty:O,setPresencePenalty:j,frequencyPenalty:N,setFrequencyPenalty:U,localTemp:P,setLocalTemp:Z,localTopP:F,setLocalTopP:ue,localPresence:le,setLocalPresence:ne,localFrequency:Q,setLocalFrequency:te,effectiveTemperature:(fe==null?void 0:fe.temperature)??s.temperature,effectiveMaxTokens:(fe==null?void 0:fe.maxTokens)??s.maxTokens,effectiveTopP:(fe==null?void 0:fe.topP)??s.topP,effectiveTopK:(fe==null?void 0:fe.topK)??s.topK,effectivePresencePenalty:(fe==null?void 0:fe.presencePenalty)??s.presencePenalty,effectiveFrequencyPenalty:(fe==null?void 0:fe.frequencyPenalty)??s.frequencyPenalty,isSaving:G})}),y.jsx(ui,{value:"sync",children:y.jsx($0e,{syncRepoId:V,setSyncRepoId:J,effectiveSyncRepoId:Pe,syncRepos:o,isSaving:G})}),y.jsx(ui,{value:"vfs",className:"h-full",children:y.jsx(B0e,{projectId:n,projectName:(we==null?void 0:we.name)??null,isSaving:G})})]})]}),y.jsxs(Cw,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:[y.jsx(Lt,{variant:"outline",onClick:t,disabled:G,children:"Cancel"}),y.jsxs(Lt,{onClick:Oe,disabled:G,children:[G&&y.jsx(Xn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function U0e(){const e=Qr.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=Ka.getState();return y.jsx(z0e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>wt.createElement(t),order:1e3,status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}function q0e(){const e=Qr.getState().registerPromptControl,t=()=>{const{selectModel:n}=fi.getState(),r=er.getState().status==="streaming",{modelId:a}=Kc.getState();return y.jsx(SC,{value:a,onChange:n,disabled:r})};e({id:"core-global-model-selector",order:10,status:()=>fi.getState().isLoading?"loading":"ready",triggerRenderer:()=>wt.createElement(t),getParameters:void 0,getMetadata:void 0,show:()=>!0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const H0e=()=>{const[e,t]=B.useState(!0),{selectedItemId:n,selectedItemType:r,loadSidebarItems:a}=dr(In(F=>({selectedItemId:F.selectedItemId,selectedItemType:F.selectedItemType,loadSidebarItems:F.loadSidebarItems,getConversationById:F.getConversationById}))),{getEffectiveProjectSettings:i}=_l(In(F=>({getProjectById:F.getProjectById,getEffectiveProjectSettings:F.getEffectiveProjectSettings}))),{interactions:o,status:s}=er(In(F=>({interactions:F.interactions,status:F.status}))),{globalError:u,isSidebarCollapsed:c,isChatControlPanelOpen:f,isProjectSettingsModalOpen:h}=Ka(In(F=>({globalError:F.globalError,isSidebarCollapsed:F.isSidebarCollapsed,isChatControlPanelOpen:F.isChatControlPanelOpen,isProjectSettingsModalOpen:F.isProjectSettingsModalOpen}))),m=f.vfs??!1,g=Qr(In(F=>Object.values(F.chatControls))),{loadDbMods:v,setLoadedMods:w}=r0(In(F=>({loadDbMods:F.loadDbMods,setLoadedMods:F.setLoadedMods}))),{loadInitialData:_}=fi(In(F=>({loadInitialData:F.loadInitialData}))),{loadSettings:x}=zr(In(F=>({loadSettings:F.loadSettings}))),{setVfsKey:S}=Gi(In(F=>({setVfsKey:F.setVfsKey}))),{initializePromptState:E,resetPromptState:C}=Kc(In(F=>({initializePromptState:F.initializePromptState,resetPromptState:F.resetPromptState})));B.useEffect(()=>{let F=!0;return(async()=>{var le;console.log("LiteChat: Starting initialization..."),t(!0);try{if(console.log("LiteChat: Loading core data..."),await x(),!F||(console.log("LiteChat: Settings loaded."),await _(),!F)||(console.log("LiteChat: Provider data loaded."),await a(),!F)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),sde(),wpe(),_pe(),q0e(),Ppe(),Lpe(),_0e(),T0e(),D0e(),P0e(),w0e(),U0e(),console.log("LiteChat: Core controls and tools registered."),!F)||(console.log("LiteChat: Loading mods..."),await v(),!F))return;console.log("LiteChat: DB Mods loaded.");const ne=r0.getState().dbMods;console.log(`LiteChat: Processing ${ne.length} mods...`);const Q=await Jce(ne);if(!F)return;w(Q),console.log(`LiteChat: ${Q.length} mods processed.`);const te=dr.getState().selectedItemId,G=dr.getState().selectedItemType,X=G==="project"?te:G==="conversation"?((le=dr.getState().getConversationById(te))==null?void 0:le.projectId)??null:null,ae=_l.getState().getEffectiveProjectSettings(X);E(ae),console.log("LiteChat: Initial prompt state initialized.",ae)}catch(ne){console.error("LiteChat: Initialization failed:",ne),ct.error(`Initialization failed: ${ne instanceof Error?ne.message:String(ne)}`),Ka.getState().setGlobalError("Initialization failed.")}finally{F&&(console.log("LiteChat: Initialization complete."),t(!1))}})(),()=>{F=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[]),B.useEffect(()=>{var le;if(e)return;const F=r==="project"?n:r==="conversation"?((le=dr.getState().getConversationById(n))==null?void 0:le.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${n}, Type: ${r}). Calculating effective settings for Project ID: ${F}`);const ue=i(F);E(ue),console.log("[LiteChat Effect] Prompt state updated based on context change.",ue)},[n,r,i,E,e]),B.useEffect(()=>{let F=null;if(m){if(r==="project")F=n;else if(r==="conversation"){const ue=dr.getState().getConversationById(n);F=(ue==null?void 0:ue.projectId)??"orphan"}else F="orphan";console.log(`[LiteChat Effect] VFS Panel Opened/Context Changed. Setting target key: ${F}`)}else F=null,console.log("[LiteChat Effect] VFS Panel Closed. Setting target key: null");Gi.getState().vfsKey!==F&&S(F)},[m,n,r,S]);const A=B.useCallback(async F=>{var Oe,Ae,$e;const ue=dr.getState(),le=_l.getState(),ne=Ka.getState(),Q=Kc.getState();let te=ue.selectedItemType==="conversation"?ue.selectedItemId:null;const G=ue.selectedItemType==="project"?ue.selectedItemId:ue.selectedItemType==="conversation"?((Oe=ue.getConversationById(ue.selectedItemId))==null?void 0:Oe.projectId)??null:null,X=Q.modelId,ae=le.getEffectiveProjectSettings(G).systemPrompt??void 0;if(!X){ct.error("Please select a model before sending a message.");return}if(!te){console.log("LiteChat: No conversation selected, creating new one...");try{const qe=await ue.addConversation({title:"New Chat",projectId:G});await ue.selectItem(qe,"conversation"),te=dr.getState().selectedItemId,te!==qe&&(console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),te=qe),console.log(`LiteChat: New conversation created (${te}), selected, and InteractionStore synced.`),setTimeout(()=>ne.setFocusInputFlag(!0),0)}catch(qe){console.error("LiteChat: Failed to create new conversation",qe),ct.error("Failed to start new chat.");return}}const we=er.getState().interactions.filter(qe=>qe.status==="COMPLETED"&&qe.type==="message.user_assistant"),fe=RR(we);if(F.content)fe.push({role:"user",content:F.content});else if(($e=(Ae=F.metadata)==null?void 0:Ae.attachedFiles)!=null&&$e.length)fe.push({role:"user",content:""});else{console.error("LiteChat: Attempting to submit with no content."),ct.error("Cannot send an empty message.");return}const Me={temperature:Q.temperature,max_tokens:Q.maxTokens,top_p:Q.topP,top_k:Q.topK,presence_penalty:Q.presencePenalty,frequency_penalty:Q.frequencyPenalty,...F.parameters??{}};Object.keys(Me).forEach(qe=>{(Me[qe]===null||Me[qe]===void 0)&&delete Me[qe]});const Pe={system:ae,messages:fe,parameters:Me,metadata:{...F.metadata,modelId:X}};Ei.emit("prompt:finalised",{prompt:Pe}),console.log("LiteChat: Submitting prompt to AIService:",Pe);try{await tb.startInteraction(Pe,F),console.log("LiteChat: AIService interaction started."),C();const qe=le.getEffectiveProjectSettings(G);E(qe)}catch(qe){console.error("LiteChat: Error starting AI interaction:",qe),ct.error(`Failed to start AI interaction: ${qe instanceof Error?qe.message:String(qe)}`)}},[E,C]),O=B.useCallback(async F=>{var qe,Fe,Ne,$,Se;console.log(`LiteChat: Regenerating interaction ${F}`);const ue=er.getState(),le=dr.getState(),ne=_l.getState(),Q=Kc.getState(),te=ue.interactions.find(ke=>ke.id===F);if(!te||!te.prompt){console.error(`LiteChat: Cannot regenerate - interaction ${F} or its prompt not found.`),ct.error("Cannot regenerate: Original interaction data missing.");return}if(te.type!=="message.user_assistant"){console.error(`LiteChat: Cannot regenerate non-user_assistant interaction: ${F}`),ct.error("Can only regenerate from a user message interaction.");return}const G=le.getConversationById(te.conversationId),X=(G==null?void 0:G.projectId)??null,ae=Q.modelId,be=ne.getEffectiveProjectSettings(X).systemPrompt??void 0;if(!ae){ct.error("Please select a model before regenerating.");return}const we=te.index,fe=ue.interactions.filter(ke=>ke.conversationId===te.conversationId&&ke.index<we&&ke.status==="COMPLETED"&&ke.type==="message.user_assistant").sort((ke,ce)=>ke.index-ce.index),Me=RR(fe);if((qe=te.prompt)!=null&&qe.content&&typeof te.prompt.content=="string")Me.push({role:"user",content:te.prompt.content});else if(($=(Ne=(Fe=te.prompt)==null?void 0:Fe.metadata)==null?void 0:Ne.attachedFiles)!=null&&$.length)Me.push({role:"user",content:""});else{console.error(`LiteChat: Cannot regenerate - missing or invalid user prompt content in interaction ${F}.`),ct.error("Cannot regenerate: Original user prompt missing.");return}const Pe={temperature:Q.temperature,max_tokens:Q.maxTokens,top_p:Q.topP,top_k:Q.topK,presence_penalty:Q.presencePenalty,frequency_penalty:Q.frequencyPenalty,...te.prompt.parameters??{}};Object.keys(Pe).forEach(ke=>{(Pe[ke]===null||Pe[ke]===void 0)&&delete Pe[ke]});const Oe=((Se=te.prompt.metadata)==null?void 0:Se.enabledTools)??[],Ae={...te.prompt.metadata,regeneratedFromId:F,modelId:ae,attachedFiles:void 0,enabledTools:Oe},$e={system:be,messages:Me,parameters:Pe,metadata:Ae};Ei.emit("prompt:finalised",{prompt:$e}),console.log(`LiteChat: Submitting regeneration request for ${F}:`,$e);try{await tb.startInteraction($e,te.prompt),console.log(`LiteChat: AIService regeneration interaction started for ${F}.`)}catch(ke){console.error(`LiteChat: Error starting regeneration for ${F}:`,ke),ct.error("Failed to start regeneration.")}},[]),j=B.useCallback(F=>{console.log(`LiteChat: Stopping interaction ${F}`),tb.stopInteraction(F)},[]),N=B.useMemo(()=>g.filter(F=>(F.panel??"main")==="sidebar"&&(F.show?F.show():!0)).sort((F,ue)=>(F.order??1/0)-(ue.order??1/0)),[g]),U=B.useMemo(()=>g.filter(F=>F.panel==="sidebar-footer"&&(F.show?F.show():!0)).sort((F,ue)=>(F.order??1/0)-(ue.order??1/0)),[g]),V=B.useMemo(()=>g.filter(F=>F.panel==="header"&&(F.show?F.show():!0)).sort((F,ue)=>(F.order??1/0)-(ue.order??1/0)),[g]),J=B.useMemo(()=>{var F;return(F=g.find(ue=>ue.id==="core-settings-trigger"))==null?void 0:F.settingsRenderer},[g]),P=B.useMemo(()=>{var F;return(F=g.find(ue=>ue.id==="core-project-settings-trigger"))==null?void 0:F.settingsRenderer},[g]),Z=r==="conversation"?n:null;return e?y.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(Xn,{className:"h-12 w-12 animate-spin text-primary"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Ut("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:Ut("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",c?"w-16":"w-64"),children:[y.jsxs("div",{className:Ut("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:Ut(c?"hidden":"block"),children:y.jsx(Kp,{controls:N,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:Ut(c?"block":"hidden"),children:y.jsx(Kp,{controls:N,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:Ut("flex-shrink-0 border-t border-[--border] p-2",c?"flex flex-col items-center gap-2":"flex items-center justify-between"),children:y.jsx(Kp,{controls:U,panelId:"sidebar-footer",renderMode:c?"icon":"full",className:Ut("flex",c?"flex-col gap-2":"items-center gap-1")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Kp,{controls:V,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(dse,{conversationId:Z,interactions:o,onRegenerateInteraction:O,onStopInteraction:j,status:s,className:"flex-grow overflow-y-hidden p-4 space-y-4"}),u&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",u]}),y.jsx(MW,{InputAreaRenderer:P5,onSubmit:A,className:"border-t border-[--border] bg-card flex-shrink-0"})]}),y.jsx(Kp,{controls:g,panelId:"drawer_right",renderMode:"full"})]}),f.settingsModal&&J&&J(),h&&P&&P(),y.jsx(rde,{richColors:!0,position:"bottom-left",closeButton:!0})]})};function V0e(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(H0e,{})})})}I7();function G0e({children:e}){const t=zr(n=>n.theme);return B.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}Y$.createRoot(document.getElementById("root")).render(y.jsx(wt.StrictMode,{children:y.jsx(G0e,{children:y.jsx(V0e,{})})}));
