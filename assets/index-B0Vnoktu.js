var X7=Object.defineProperty;var J7=(e,t,n)=>t in e?X7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ha=(e,t,n)=>J7(e,typeof t!="symbol"?t+"":t,n);function Q7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fx={exports:{}},Yp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ER;function ez(){if(ER)return Yp;ER=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Yp.Fragment=t,Yp.jsx=n,Yp.jsxs=n,Yp}var CR;function tz(){return CR||(CR=1,fx.exports=ez()),fx.exports}var y=tz(),hx={exports:{}};function nz(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pO={exports:{}},Qr=pO.exports={},Cs,ks;function R2(){throw new Error("setTimeout has not been defined")}function N2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Cs=setTimeout:Cs=R2}catch{Cs=R2}try{typeof clearTimeout=="function"?ks=clearTimeout:ks=N2}catch{ks=N2}})();function mO(e){if(Cs===setTimeout)return setTimeout(e,0);if((Cs===R2||!Cs)&&setTimeout)return Cs=setTimeout,setTimeout(e,0);try{return Cs(e,0)}catch{try{return Cs.call(null,e,0)}catch{return Cs.call(this,e,0)}}}function rz(e){if(ks===clearTimeout)return clearTimeout(e);if((ks===N2||!ks)&&clearTimeout)return ks=clearTimeout,clearTimeout(e);try{return ks(e)}catch{try{return ks.call(null,e)}catch{return ks.call(this,e)}}}var Tl=[],Bf=!1,nd,db=-1;function az(){!Bf||!nd||(Bf=!1,nd.length?Tl=nd.concat(Tl):db=-1,Tl.length&&gO())}function gO(){if(!Bf){var e=mO(az);Bf=!0;for(var t=Tl.length;t;){for(nd=Tl,Tl=[];++db<t;)nd&&nd[db].run();db=-1,t=Tl.length}nd=null,Bf=!1,rz(e)}}Qr.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Tl.push(new yO(e,t)),Tl.length===1&&!Bf&&mO(gO)};function yO(e,t){this.fun=e,this.array=t}yO.prototype.run=function(){this.fun.apply(null,this.array)};Qr.title="browser";Qr.browser=!0;Qr.env={};Qr.argv=[];Qr.version="";Qr.versions={};function Ul(){}Qr.on=Ul;Qr.addListener=Ul;Qr.once=Ul;Qr.off=Ul;Qr.removeListener=Ul;Qr.removeAllListeners=Ul;Qr.emit=Ul;Qr.prependListener=Ul;Qr.prependOnceListener=Ul;Qr.listeners=function(e){return[]};Qr.binding=function(e){throw new Error("process.binding is not supported")};Qr.cwd=function(){return"/"};Qr.chdir=function(e){throw new Error("process.chdir is not supported")};Qr.umask=function(){return 0};var iz=pO.exports;const Gr=nz(iz);var On={},kR;function oz(){if(kR)return On;kR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function _(G,Q,Y){this.props=G,this.context=Q,this.refs=b,this.updater=Y||g}_.prototype.isReactComponent={},_.prototype.setState=function(G,Q){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Q,"setState")},_.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function S(){}S.prototype=_.prototype;function x(G,Q,Y){this.props=G,this.context=Q,this.refs=b,this.updater=Y||g}var E=x.prototype=new S;E.constructor=x,v(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(G,Q,Y,re,be,_e){return Y=_e.ref,{$$typeof:e,type:G,key:Q,ref:Y!==void 0?Y:null,props:_e}}function D(G,Q){return I(G.type,Q,void 0,void 0,void 0,G.props)}function z(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function W(G){var Q={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Y){return Q[Y]})}var ee=/\/+/g;function F(G,Q){return typeof G=="object"&&G!==null&&G.key!=null?W(""+G.key):Q.toString(36)}function Z(){}function V(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(Z,Z):(G.status="pending",G.then(function(Q){G.status==="pending"&&(G.status="fulfilled",G.value=Q)},function(Q){G.status==="pending"&&(G.status="rejected",G.reason=Q)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function ae(G,Q,Y,re,be){var _e=typeof G;(_e==="undefined"||_e==="boolean")&&(G=null);var Ie=!1;if(G===null)Ie=!0;else switch(_e){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(G.$$typeof){case e:case t:Ie=!0;break;case f:return Ie=G._init,ae(Ie(G._payload),Q,Y,re,be)}}if(Ie)return be=be(G),Ie=re===""?"."+F(G,0):re,C(be)?(Y="",Ie!=null&&(Y=Ie.replace(ee,"$&/")+"/"),ae(be,Q,Y,"",function(ke){return ke})):be!=null&&(z(be)&&(be=D(be,Y+(be.key==null||G&&G.key===be.key?"":(""+be.key).replace(ee,"$&/")+"/")+Ie)),Q.push(be)),1;Ie=0;var Pe=re===""?".":re+":";if(C(G))for(var Re=0;Re<G.length;Re++)re=G[Re],_e=Pe+F(re,Re),Ie+=ae(re,Q,Y,_e,be);else if(Re=p(G),typeof Re=="function")for(G=Re.call(G),Re=0;!(re=G.next()).done;)re=re.value,_e=Pe+F(re,Re++),Ie+=ae(re,Q,Y,_e,be);else if(_e==="object"){if(typeof G.then=="function")return ae(V(G),Q,Y,re,be);throw Q=String(G),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function ie(G,Q,Y){if(G==null)return G;var re=[],be=0;return ae(G,re,"","",function(_e){return Q.call(Y,_e,be++)}),re}function te(G){if(G._status===-1){var Q=G._result;Q=Q(),Q.then(function(Y){(G._status===0||G._status===-1)&&(G._status=1,G._result=Y)},function(Y){(G._status===0||G._status===-1)&&(G._status=2,G._result=Y)}),G._status===-1&&(G._status=0,G._result=Q)}if(G._status===1)return G._result.default;throw G._result}var X=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Q))return}else if(typeof Gr=="object"&&typeof Gr.emit=="function"){Gr.emit("uncaughtException",G);return}console.error(G)};function ce(){}return On.Children={map:ie,forEach:function(G,Q,Y){ie(G,function(){Q.apply(this,arguments)},Y)},count:function(G){var Q=0;return ie(G,function(){Q++}),Q},toArray:function(G){return ie(G,function(Q){return Q})||[]},only:function(G){if(!z(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},On.Component=_,On.Fragment=n,On.Profiler=a,On.PureComponent=x,On.StrictMode=r,On.Suspense=u,On.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,On.__COMPILER_RUNTIME={__proto__:null,c:function(G){return A.H.useMemoCache(G)}},On.cache=function(G){return function(){return G.apply(null,arguments)}},On.cloneElement=function(G,Q,Y){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var re=v({},G.props),be=G.key,_e=void 0;if(Q!=null)for(Ie in Q.ref!==void 0&&(_e=void 0),Q.key!==void 0&&(be=""+Q.key),Q)!O.call(Q,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&Q.ref===void 0||(re[Ie]=Q[Ie]);var Ie=arguments.length-2;if(Ie===1)re.children=Y;else if(1<Ie){for(var Pe=Array(Ie),Re=0;Re<Ie;Re++)Pe[Re]=arguments[Re+2];re.children=Pe}return I(G.type,be,void 0,void 0,_e,re)},On.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:i,_context:G},G},On.createElement=function(G,Q,Y){var re,be={},_e=null;if(Q!=null)for(re in Q.key!==void 0&&(_e=""+Q.key),Q)O.call(Q,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(be[re]=Q[re]);var Ie=arguments.length-2;if(Ie===1)be.children=Y;else if(1<Ie){for(var Pe=Array(Ie),Re=0;Re<Ie;Re++)Pe[Re]=arguments[Re+2];be.children=Pe}if(G&&G.defaultProps)for(re in Ie=G.defaultProps,Ie)be[re]===void 0&&(be[re]=Ie[re]);return I(G,_e,void 0,void 0,null,be)},On.createRef=function(){return{current:null}},On.forwardRef=function(G){return{$$typeof:s,render:G}},On.isValidElement=z,On.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:te}},On.memo=function(G,Q){return{$$typeof:c,type:G,compare:Q===void 0?null:Q}},On.startTransition=function(G){var Q=A.T,Y={};A.T=Y;try{var re=G(),be=A.S;be!==null&&be(Y,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ce,X)}catch(_e){X(_e)}finally{A.T=Q}},On.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},On.use=function(G){return A.H.use(G)},On.useActionState=function(G,Q,Y){return A.H.useActionState(G,Q,Y)},On.useCallback=function(G,Q){return A.H.useCallback(G,Q)},On.useContext=function(G){return A.H.useContext(G)},On.useDebugValue=function(){},On.useDeferredValue=function(G,Q){return A.H.useDeferredValue(G,Q)},On.useEffect=function(G,Q,Y){var re=A.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(G,Q)},On.useId=function(){return A.H.useId()},On.useImperativeHandle=function(G,Q,Y){return A.H.useImperativeHandle(G,Q,Y)},On.useInsertionEffect=function(G,Q){return A.H.useInsertionEffect(G,Q)},On.useLayoutEffect=function(G,Q){return A.H.useLayoutEffect(G,Q)},On.useMemo=function(G,Q){return A.H.useMemo(G,Q)},On.useOptimistic=function(G,Q){return A.H.useOptimistic(G,Q)},On.useReducer=function(G,Q,Y){return A.H.useReducer(G,Q,Y)},On.useRef=function(G){return A.H.useRef(G)},On.useState=function(G){return A.H.useState(G)},On.useSyncExternalStore=function(G,Q,Y){return A.H.useSyncExternalStore(G,Q,Y)},On.useTransition=function(){return A.H.useTransition()},On.version="19.1.0",On}var AR;function eC(){return AR||(AR=1,hx.exports=oz()),hx.exports}var R=eC();const vt=Qa(R),bO=Q7({__proto__:null,default:vt},[R]);var px={exports:{}},Xp={},mx={exports:{}},gx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TR;function sz(){return TR||(TR=1,function(e){function t(ie,te){var X=ie.length;ie.push(te);e:for(;0<X;){var ce=X-1>>>1,G=ie[ce];if(0<a(G,te))ie[ce]=te,ie[X]=G,X=ce;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var te=ie[0],X=ie.pop();if(X!==te){ie[0]=X;e:for(var ce=0,G=ie.length,Q=G>>>1;ce<Q;){var Y=2*(ce+1)-1,re=ie[Y],be=Y+1,_e=ie[be];if(0>a(re,X))be<G&&0>a(_e,re)?(ie[ce]=_e,ie[be]=X,ce=be):(ie[ce]=re,ie[Y]=X,ce=Y);else if(be<G&&0>a(_e,X))ie[ce]=_e,ie[be]=X,ce=be;else break e}}return te}function a(ie,te){var X=ie.sortIndex-te.sortIndex;return X!==0?X:ie.id-te.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],c=[],f=1,h=null,p=3,g=!1,v=!1,b=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ie){for(var te=n(c);te!==null;){if(te.callback===null)r(c);else if(te.startTime<=ie)r(c),te.sortIndex=te.expirationTime,t(u,te);else break;te=n(c)}}function A(ie){if(b=!1,C(ie),!v)if(n(u)!==null)v=!0,O||(O=!0,F());else{var te=n(c);te!==null&&ae(A,te.startTime-ie)}}var O=!1,I=-1,D=5,z=-1;function W(){return _?!0:!(e.unstable_now()-z<D)}function ee(){if(_=!1,O){var ie=e.unstable_now();z=ie;var te=!0;try{e:{v=!1,b&&(b=!1,x(I),I=-1),g=!0;var X=p;try{t:{for(C(ie),h=n(u);h!==null&&!(h.expirationTime>ie&&W());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,p=h.priorityLevel;var G=ce(h.expirationTime<=ie);if(ie=e.unstable_now(),typeof G=="function"){h.callback=G,C(ie),te=!0;break t}h===n(u)&&r(u),C(ie)}else r(u);h=n(u)}if(h!==null)te=!0;else{var Q=n(c);Q!==null&&ae(A,Q.startTime-ie),te=!1}}break e}finally{h=null,p=X,g=!1}te=void 0}}finally{te?F():O=!1}}}var F;if(typeof E=="function")F=function(){E(ee)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,V=Z.port2;Z.port1.onmessage=ee,F=function(){V.postMessage(null)}}else F=function(){S(ee,0)};function ae(ie,te){I=S(function(){ie(e.unstable_now())},te)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(ie){switch(p){case 1:case 2:case 3:var te=3;break;default:te=p}var X=p;p=te;try{return ie()}finally{p=X}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(ie,te){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var X=p;p=ie;try{return te()}finally{p=X}},e.unstable_scheduleCallback=function(ie,te,X){var ce=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,ie){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=X+G,ie={id:f++,callback:te,priorityLevel:ie,startTime:X,expirationTime:G,sortIndex:-1},X>ce?(ie.sortIndex=X,t(c,ie),n(u)===null&&ie===n(c)&&(b?(x(I),I=-1):b=!0,ae(A,X-ce))):(ie.sortIndex=G,t(u,ie),v||g||(v=!0,O||(O=!0,F()))),ie},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(ie){var te=p;return function(){var X=p;p=te;try{return ie.apply(this,arguments)}finally{p=X}}}}(gx)),gx}var RR;function lz(){return RR||(RR=1,mx.exports=sz()),mx.exports}var yx={exports:{}},Va={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR;function uz(){if(NR)return Va;NR=1;var e=eC();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Va.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Va.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},Va.flushSync=function(u){var c=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=c,r.p=f,r.d.f()}},Va.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},Va.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Va.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin),p=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Va.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=s(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},Va.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Va.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=s(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},Va.requestFormReset=function(u){r.d.r(u)},Va.unstable_batchedUpdates=function(u,c){return u(c)},Va.useFormState=function(u,c,f){return o.H.useFormState(u,c,f)},Va.useFormStatus=function(){return o.H.useHostTransitionStatus()},Va.version="19.1.0",Va}var IR;function vO(){if(IR)return yx.exports;IR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yx.exports=uz(),yx.exports}var OR;function cz(){if(OR)return Xp;OR=1;var e=lz(),t=eC(),n=vO();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,m=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(m=d.return),l=d.return;while(l)}return d.tag===3?m:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(i(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var m=l,w=d;;){var T=m.return;if(T===null)break;var P=T.alternate;if(P===null){if(w=T.return,w!==null){m=w;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===m)return s(T),l;if(P===w)return s(T),d;P=P.sibling}throw Error(r(188))}if(m.return!==w.return)m=T,w=P;else{for(var se=!1,Ee=T.child;Ee;){if(Ee===m){se=!0,m=T,w=P;break}if(Ee===w){se=!0,w=T,m=P;break}Ee=Ee.sibling}if(!se){for(Ee=P.child;Ee;){if(Ee===m){se=!0,m=P,w=T;break}if(Ee===w){se=!0,w=P,m=T;break}Ee=Ee.sibling}if(!se)throw Error(r(189))}}if(m.alternate!==w)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function F(l){return l===null||typeof l!="object"?null:(l=ee&&l[ee]||l["@@iterator"],typeof l=="function"?l:null)}var Z=Symbol.for("react.client.reference");function V(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Z?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case _:return"Profiler";case b:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList";case z:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case E:return(l.displayName||"Context")+".Provider";case x:return(l._context.displayName||"Context")+".Consumer";case C:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case I:return d=l.displayName||null,d!==null?d:V(l.type)||"Memo";case D:d=l._payload,l=l._init;try{return V(l(d))}catch{}}return null}var ae=Array.isArray,ie=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ce=[],G=-1;function Q(l){return{current:l}}function Y(l){0>G||(l.current=ce[G],ce[G]=null,G--)}function re(l,d){G++,ce[G]=l.current,l.current=d}var be=Q(null),_e=Q(null),Ie=Q(null),Pe=Q(null);function Re(l,d){switch(re(Ie,d),re(_e,l),re(be,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?J3(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=J3(d),l=Q3(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Y(be),re(be,l)}function ke(){Y(be),Y(_e),Y(Ie)}function ze(l){l.memoizedState!==null&&re(Pe,l);var d=be.current,m=Q3(d,l.type);d!==m&&(re(_e,l),re(be,m))}function it(l){_e.current===l&&(Y(be),Y(_e)),Pe.current===l&&(Y(Pe),Vp._currentValue=X)}var Oe=Object.prototype.hasOwnProperty,Te=e.unstable_scheduleCallback,B=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,Ne=e.unstable_requestPaint,de=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,J=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Le=e.unstable_NormalPriority,Se=e.unstable_LowPriority,Ve=e.unstable_IdlePriority,xt=e.log,ht=e.unstable_setDisableYieldValue,Et=null,Lt=null;function Tt(l){if(typeof xt=="function"&&ht(l),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(Et,l)}catch{}}var Ut=Math.clz32?Math.clz32:q,ge=Math.log,N=Math.LN2;function q(l){return l>>>=0,l===0?32:31-(ge(l)/N|0)|0}var he=256,De=4194304;function ve(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ae(l,d,m){var w=l.pendingLanes;if(w===0)return 0;var T=0,P=l.suspendedLanes,se=l.pingedLanes;l=l.warmLanes;var Ee=w&134217727;return Ee!==0?(w=Ee&~P,w!==0?T=ve(w):(se&=Ee,se!==0?T=ve(se):m||(m=Ee&~l,m!==0&&(T=ve(m))))):(Ee=w&~P,Ee!==0?T=ve(Ee):se!==0?T=ve(se):m||(m=w&~l,m!==0&&(T=ve(m)))),T===0?0:d!==0&&d!==T&&(d&P)===0&&(P=T&-T,m=d&-d,P>=m||P===32&&(m&4194048)!==0)?d:T}function le(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ct(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var l=he;return he<<=1,(he&4194048)===0&&(he=256),l}function M(){var l=De;return De<<=1,(De&62914560)===0&&(De=4194304),l}function Be(l){for(var d=[],m=0;31>m;m++)d.push(l);return d}function et(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function me(l,d,m,w,T,P){var se=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var Ee=l.entanglements,Ue=l.expirationTimes,ut=l.hiddenUpdates;for(m=se&~m;0<m;){var _t=31-Ut(m),kt=1<<_t;Ee[_t]=0,Ue[_t]=-1;var pt=ut[_t];if(pt!==null)for(ut[_t]=null,_t=0;_t<pt.length;_t++){var mt=pt[_t];mt!==null&&(mt.lane&=-536870913)}m&=~kt}w!==0&&je(l,w,0),P!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=P&~(se&~d))}function je(l,d,m){l.pendingLanes|=d,l.suspendedLanes&=~d;var w=31-Ut(d);l.entangledLanes|=d,l.entanglements[w]=l.entanglements[w]|1073741824|m&4194090}function Ke(l,d){var m=l.entangledLanes|=d;for(l=l.entanglements;m;){var w=31-Ut(m),T=1<<w;T&d|l[w]&d&&(l[w]|=d),m&=~T}}function Ct(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ye(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function U(){var l=te.p;return l!==0?l:(l=window.event,l===void 0?32:bR(l.type))}function $(l,d){var m=te.p;try{return te.p=l,d()}finally{te.p=m}}var H=Math.random().toString(36).slice(2),pe="__reactFiber$"+H,fe="__reactProps$"+H,Fe="__reactContainer$"+H,ot="__reactEvents$"+H,jt="__reactListeners$"+H,un="__reactHandles$"+H,Bt="__reactResources$"+H,Vt="__reactMarker$"+H;function Xt(l){delete l[pe],delete l[fe],delete l[ot],delete l[jt],delete l[un]}function In(l){var d=l[pe];if(d)return d;for(var m=l.parentNode;m;){if(d=m[Fe]||m[pe]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(l=rR(l);l!==null;){if(m=l[pe])return m;l=rR(l)}return d}l=m,m=l.parentNode}return null}function zn(l){if(l=l[pe]||l[Fe]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function hr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function pr(l){var d=l[Bt];return d||(d=l[Bt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function jn(l){l[Vt]=!0}var ti=new Set,os={};function ss(l,d){ls(l,d),ls(l+"Capture",d)}function ls(l,d){for(os[l]=d,l=0;l<d.length;l++)ti.add(d[l])}var $r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},Xi={};function _g(l){return Oe.call(Xi,l)?!0:Oe.call(us,l)?!1:$r.test(l)?Xi[l]=!0:(us[l]=!0,!1)}function To(l,d,m){if(_g(d))if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var w=d.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+m)}}function Ws(l,d,m){if(m===null)l.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+m)}}function Oi(l,d,m,w){if(w===null)l.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(d,m,""+w)}}var Sc,cs;function Ks(l){if(Sc===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);Sc=d&&d[1]||"",cs=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Sc+l+cs}var Kl=!1;function Id(l,d){if(!l||Kl)return"";Kl=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(d){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(mt){var pt=mt}Reflect.construct(l,[],kt)}else{try{kt.call()}catch(mt){pt=mt}l.call(kt.prototype)}}else{try{throw Error()}catch(mt){pt=mt}(kt=l())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(mt){if(mt&&pt&&typeof mt.stack=="string")return[mt.stack,pt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=w.DetermineComponentFrameRoot(),se=P[0],Ee=P[1];if(se&&Ee){var Ue=se.split(`
`),ut=Ee.split(`
`);for(T=w=0;w<Ue.length&&!Ue[w].includes("DetermineComponentFrameRoot");)w++;for(;T<ut.length&&!ut[T].includes("DetermineComponentFrameRoot");)T++;if(w===Ue.length||T===ut.length)for(w=Ue.length-1,T=ut.length-1;1<=w&&0<=T&&Ue[w]!==ut[T];)T--;for(;1<=w&&0<=T;w--,T--)if(Ue[w]!==ut[T]){if(w!==1||T!==1)do if(w--,T--,0>T||Ue[w]!==ut[T]){var _t=`
`+Ue[w].replace(" at new "," at ");return l.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",l.displayName)),_t}while(1<=w&&0<=T);break}}}finally{Kl=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?Ks(m):""}function Un(l){switch(l.tag){case 26:case 27:case 5:return Ks(l.type);case 16:return Ks("Lazy");case 13:return Ks("Suspense");case 19:return Ks("SuspenseList");case 0:case 15:return Id(l.type,!1);case 11:return Id(l.type.render,!1);case 1:return Id(l.type,!0);case 31:return Ks("Activity");default:return""}}function Wh(l){try{var d="";do d+=Un(l),l=l.return;while(l);return d}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ni(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Kh(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function xr(l){var d=Kh(l)?"checked":"value",m=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),w=""+l[d];if(!l.hasOwnProperty(d)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,P=m.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(se){w=""+se,P.call(this,se)}}),Object.defineProperty(l,d,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(se){w=""+se},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function ds(l){l._valueTracker||(l._valueTracker=xr(l))}function Zl(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var m=d.getValue(),w="";return l&&(w=Kh(l)?l.checked?"true":"false":l.value),l=w,l!==m?(d.setValue(l),!0):!1}function Ro(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Zh=/[\n"\\]/g;function Ba(l){return l.replace(Zh,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Yl(l,d,m,w,T,P,se,Ee){l.name="",se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?l.type=se:l.removeAttribute("type"),d!=null?se==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ni(d)):l.value!==""+ni(d)&&(l.value=""+ni(d)):se!=="submit"&&se!=="reset"||l.removeAttribute("value"),d!=null?Xl(l,se,ni(d)):m!=null?Xl(l,se,ni(m)):w!=null&&l.removeAttribute("value"),T==null&&P!=null&&(l.defaultChecked=!!P),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"?l.name=""+ni(Ee):l.removeAttribute("name")}function Yh(l,d,m,w,T,P,se,Ee){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(l.type=P),d!=null||m!=null){if(!(P!=="submit"&&P!=="reset"||d!=null))return;m=m!=null?""+ni(m):"",d=d!=null?""+ni(d):m,Ee||d===l.value||(l.value=d),l.defaultValue=d}w=w??T,w=typeof w!="function"&&typeof w!="symbol"&&!!w,l.checked=Ee?l.checked:!!w,l.defaultChecked=!!w,se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(l.name=se)}function Xl(l,d,m){d==="number"&&Ro(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function Zs(l,d,m,w){if(l=l.options,d){d={};for(var T=0;T<m.length;T++)d["$"+m[T]]=!0;for(m=0;m<l.length;m++)T=d.hasOwnProperty("$"+l[m].value),l[m].selected!==T&&(l[m].selected=T),T&&w&&(l[m].defaultSelected=!0)}else{for(m=""+ni(m),d=null,T=0;T<l.length;T++){if(l[T].value===m){l[T].selected=!0,w&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function Jl(l,d,m){if(d!=null&&(d=""+ni(d),d!==l.value&&(l.value=d),m==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=m!=null?""+ni(m):""}function Xh(l,d,m,w){if(d==null){if(w!=null){if(m!=null)throw Error(r(92));if(ae(w)){if(1<w.length)throw Error(r(93));w=w[0]}m=w}m==null&&(m=""),d=m}m=ni(d),l.defaultValue=m,w=l.textContent,w===m&&w!==""&&w!==null&&(l.value=w)}function Ql(l,d){if(d){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=d;return}}l.textContent=d}var Wn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Od(l,d,m){var w=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?w?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":w?l.setProperty(d,m):typeof m!="number"||m===0||Wn.has(d)?d==="float"?l.cssFloat=m:l[d]=(""+m).trim():l[d]=m+"px"}function xg(l,d,m){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,m!=null){for(var w in m)!m.hasOwnProperty(w)||d!=null&&d.hasOwnProperty(w)||(w.indexOf("--")===0?l.setProperty(w,""):w==="float"?l.cssFloat="":l[w]="");for(var T in d)w=d[T],d.hasOwnProperty(T)&&m[T]!==w&&Od(l,T,w)}else for(var P in d)d.hasOwnProperty(P)&&Od(l,P,d[P])}function Jh(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ri=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),eu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ys(l){return eu.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Ji=null;function Dd(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Xs=null,Nr=null;function Di(l){var d=zn(l);if(d&&(l=d.stateNode)){var m=l[fe]||null;e:switch(l=d.stateNode,d.type){case"input":if(Yl(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Ba(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var w=m[d];if(w!==l&&w.form===l.form){var T=w[fe]||null;if(!T)throw Error(r(90));Yl(w,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<m.length;d++)w=m[d],w.form===l.form&&Zl(w)}break e;case"textarea":Jl(l,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&Zs(l,!!m.multiple,d,!1)}}}var Js=!1;function tu(l,d,m){if(Js)return l(d,m);Js=!0;try{var w=l(d);return w}finally{if(Js=!1,(Xs!==null||Nr!==null)&&(cy(),Xs&&(d=Xs,l=Nr,Nr=Xs=null,Di(d),l)))for(d=0;d<l.length;d++)Di(l[d])}}function Qs(l,d){var m=l.stateNode;if(m===null)return null;var w=m[fe]||null;if(w===null)return null;m=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(l=l.type,w=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!w;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(r(231,d,typeof m));return m}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=!1;if(ga)try{var za={};Object.defineProperty(za,"passive",{get:function(){Qh=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{Qh=!1}var Qi=null,jd=null,nu=null;function ru(){if(nu)return nu;var l,d=jd,m=d.length,w,T="value"in Qi?Qi.value:Qi.textContent,P=T.length;for(l=0;l<m&&d[l]===T[l];l++);var se=m-l;for(w=1;w<=se&&d[m-w]===T[P-w];w++);return nu=T.slice(l,1<w?1-w:void 0)}function au(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function Ec(){return!0}function Sg(){return!1}function ea(l){function d(m,w,T,P,se){this._reactName=m,this._targetInst=T,this.type=w,this.nativeEvent=P,this.target=se,this.currentTarget=null;for(var Ee in l)l.hasOwnProperty(Ee)&&(m=l[Ee],this[Ee]=m?m(P):P[Ee]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ec:Sg,this.isPropagationStopped=Sg,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ec)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ec)},persist:function(){},isPersistent:Ec}),d}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Md=ea(el),fs=f({},el,{view:0,detail:0}),Pd=ea(fs),Cc,ep,kc,Fd=f({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tl,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==kc&&(kc&&l.type==="mousemove"?(Cc=l.screenX-kc.screenX,ep=l.screenY-kc.screenY):ep=Cc=0,kc=l),Cc)},movementY:function(l){return"movementY"in l?l.movementY:ep}}),Ld=ea(Fd),tp=f({},Fd,{dataTransfer:0}),Eg=ea(tp),$d=f({},fs,{relatedTarget:0}),iu=ea($d),Bd=f({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),Cg=ea(Bd),k1=f({},el,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),zd=ea(k1),np=f({},el,{data:0}),Ud=ea(np),rp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ap={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ya={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ac(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=ya[l])?!!d[l]:!1}function tl(){return Ac}var kg=f({},fs,{key:function(l){if(l.key){var d=rp[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=au(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?ap[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tl,charCode:function(l){return l.type==="keypress"?au(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?au(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),qd=ea(kg),Ag=f({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ip=ea(Ag),Hd=f({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tl}),op=ea(Hd),nl=f({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),sp=ea(nl),lp=f({},Fd,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Vd=ea(lp),up=f({},el,{newState:0,oldState:0}),Tg=ea(up),A1=[9,13,27,32],Tc=ga&&"CompositionEvent"in window,hs=null;ga&&"documentMode"in document&&(hs=document.documentMode);var T1=ga&&"TextEvent"in window&&!hs,Gd=ga&&(!Tc||hs&&8<hs&&11>=hs),Wd=" ",Rg=!1;function cp(l,d){switch(l){case"keyup":return A1.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ng(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var rl=!1;function Ig(l,d){switch(l){case"compositionend":return Ng(d);case"keypress":return d.which!==32?null:(Rg=!0,Wd);case"textInput":return l=d.data,l===Wd&&Rg?null:l;default:return null}}function R1(l,d){if(rl)return l==="compositionend"||!Tc&&cp(l,d)?(l=ru(),nu=jd=Qi=null,rl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Gd&&d.locale!=="ko"?null:d.data;default:return null}}var Og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Og[l.type]:d==="textarea"}function dp(l,d,m,w){Xs?Nr?Nr.push(w):Nr=[w]:Xs=w,d=gy(d,"onChange"),0<d.length&&(m=new Md("onChange","change",null,m,w),l.push({event:m,listeners:d}))}var ou=null,Rc=null;function N1(l){W3(l,0)}function Zd(l){var d=hr(l);if(Zl(d))return l}function Nc(l,d){if(l==="change")return d}var eo=!1;if(ga){var Ir;if(ga){var su="oninput"in document;if(!su){var ai=document.createElement("div");ai.setAttribute("oninput","return;"),su=typeof ai.oninput=="function"}Ir=su}else Ir=!1;eo=Ir&&(!document.documentMode||9<document.documentMode)}function Dg(){ou&&(ou.detachEvent("onpropertychange",Yd),Rc=ou=null)}function Yd(l){if(l.propertyName==="value"&&Zd(Rc)){var d=[];dp(d,Rc,l,Dd(l)),tu(N1,d)}}function jg(l,d,m){l==="focusin"?(Dg(),ou=d,Rc=m,ou.attachEvent("onpropertychange",Yd)):l==="focusout"&&Dg()}function al(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Zd(Rc)}function fp(l,d){if(l==="click")return Zd(d)}function lu(l,d){if(l==="input"||l==="change")return Zd(d)}function ps(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var Ua=typeof Object.is=="function"?Object.is:ps;function k(l,d){if(Ua(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var m=Object.keys(l),w=Object.keys(d);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var T=m[w];if(!Oe.call(d,T)||!Ua(l[T],d[T]))return!1}return!0}function j(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function K(l,d){var m=j(l);l=0;for(var w;m;){if(m.nodeType===3){if(w=l+m.textContent.length,l<=d&&w>=d)return{node:m,offset:d-l};l=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=j(m)}}function ne(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?ne(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function ue(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=Ro(l.document);d instanceof l.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)l=d.contentWindow;else break;d=Ro(l.document)}return d}function we(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var Me=ga&&"documentMode"in document&&11>=document.documentMode,$e=null,We=null,Ye=null,tt=!1;function He(l,d,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;tt||$e==null||$e!==Ro(w)||(w=$e,"selectionStart"in w&&we(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ye&&k(Ye,w)||(Ye=w,w=gy(We,"onSelect"),0<w.length&&(d=new Md("onSelect","select",null,d,m),l.push({event:d,listeners:w}),d.target=$e)))}function rt(l,d){var m={};return m[l.toLowerCase()]=d.toLowerCase(),m["Webkit"+l]="webkit"+d,m["Moz"+l]="moz"+d,m}var Ge={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionrun:rt("Transition","TransitionRun"),transitionstart:rt("Transition","TransitionStart"),transitioncancel:rt("Transition","TransitionCancel"),transitionend:rt("Transition","TransitionEnd")},Qe={},at={};ga&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Xe(l){if(Qe[l])return Qe[l];if(!Ge[l])return l;var d=Ge[l],m;for(m in d)if(d.hasOwnProperty(m)&&m in at)return Qe[l]=d[m];return l}var ft=Xe("animationend"),gt=Xe("animationiteration"),bt=Xe("animationstart"),wt=Xe("transitionrun"),Mt=Xe("transitionstart"),qt=Xe("transitioncancel"),It=Xe("transitionend"),$t=new Map,Ht="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ht.push("scrollEnd");function Ot(l,d){$t.set(l,d),ss(d,[l])}var Zt=new WeakMap;function cn(l,d){if(typeof l=="object"&&l!==null){var m=Zt.get(l);return m!==void 0?m:(d={value:l,source:d,stack:Wh(d)},Zt.set(l,d),d)}return{value:l,source:d,stack:Wh(d)}}var dn=[],Sn=0,Oa=0;function yn(){for(var l=Sn,d=Oa=Sn=0;d<l;){var m=dn[d];dn[d++]=null;var w=dn[d];dn[d++]=null;var T=dn[d];dn[d++]=null;var P=dn[d];if(dn[d++]=null,w!==null&&T!==null){var se=w.pending;se===null?T.next=T:(T.next=se.next,se.next=T),w.pending=T}P!==0&&ba(m,T,P)}}function Zr(l,d,m,w){dn[Sn++]=l,dn[Sn++]=d,dn[Sn++]=m,dn[Sn++]=w,Oa|=w,l.lanes|=w,l=l.alternate,l!==null&&(l.lanes|=w)}function ta(l,d,m,w){return Zr(l,d,m,w),to(l)}function No(l,d){return Zr(l,null,null,d),to(l)}function ba(l,d,m){l.lanes|=m;var w=l.alternate;w!==null&&(w.lanes|=m);for(var T=!1,P=l.return;P!==null;)P.childLanes|=m,w=P.alternate,w!==null&&(w.childLanes|=m),P.tag===22&&(l=P.stateNode,l===null||l._visibility&1||(T=!0)),l=P,P=P.return;return l.tag===3?(P=l.stateNode,T&&d!==null&&(T=31-Ut(m),l=P.hiddenUpdates,w=l[T],w===null?l[T]=[d]:w.push(d),d.lane=m|536870912),P):null}function to(l){if(50<Fp)throw Fp=0,P_=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var ms={};function PB(l,d,m,w){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(l,d,m,w){return new PB(l,d,m,w)}function I1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function il(l,d){var m=l.alternate;return m===null?(m=ji(l.tag,d,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=d,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,d=l.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function OA(l,d){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,d=m.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Mg(l,d,m,w,T,P){var se=0;if(w=l,typeof l=="function")I1(l)&&(se=1);else if(typeof l=="string")se=L7(l,m,be.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case z:return l=ji(31,m,d,T),l.elementType=z,l.lanes=P,l;case v:return Ic(m.children,T,P,d);case b:se=8,T|=24;break;case _:return l=ji(12,m,d,T|2),l.elementType=_,l.lanes=P,l;case A:return l=ji(13,m,d,T),l.elementType=A,l.lanes=P,l;case O:return l=ji(19,m,d,T),l.elementType=O,l.lanes=P,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:case E:se=10;break e;case x:se=9;break e;case C:se=11;break e;case I:se=14;break e;case D:se=16,w=null;break e}se=29,m=Error(r(130,l===null?"null":typeof l,"")),w=null}return d=ji(se,m,d,T),d.elementType=l,d.type=w,d.lanes=P,d}function Ic(l,d,m,w){return l=ji(7,l,w,d),l.lanes=m,l}function O1(l,d,m){return l=ji(6,l,null,d),l.lanes=m,l}function D1(l,d,m){return d=ji(4,l.children!==null?l.children:[],l.key,d),d.lanes=m,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Xd=[],Jd=0,Pg=null,Fg=0,no=[],ro=0,Oc=null,ol=1,sl="";function Dc(l,d){Xd[Jd++]=Fg,Xd[Jd++]=Pg,Pg=l,Fg=d}function DA(l,d,m){no[ro++]=ol,no[ro++]=sl,no[ro++]=Oc,Oc=l;var w=ol;l=sl;var T=32-Ut(w)-1;w&=~(1<<T),m+=1;var P=32-Ut(d)+T;if(30<P){var se=T-T%5;P=(w&(1<<se)-1).toString(32),w>>=se,T-=se,ol=1<<32-Ut(d)+T|m<<T|w,sl=P+l}else ol=1<<P|m<<T|w,sl=l}function j1(l){l.return!==null&&(Dc(l,1),DA(l,1,0))}function M1(l){for(;l===Pg;)Pg=Xd[--Jd],Xd[Jd]=null,Fg=Xd[--Jd],Xd[Jd]=null;for(;l===Oc;)Oc=no[--ro],no[ro]=null,sl=no[--ro],no[ro]=null,ol=no[--ro],no[ro]=null}var ii=null,Hr=null,er=!1,jc=null,gs=!1,P1=Error(r(519));function Mc(l){var d=Error(r(418,""));throw mp(cn(d,l)),P1}function jA(l){var d=l.stateNode,m=l.type,w=l.memoizedProps;switch(d[pe]=l,d[fe]=w,m){case"dialog":Hn("cancel",d),Hn("close",d);break;case"iframe":case"object":case"embed":Hn("load",d);break;case"video":case"audio":for(m=0;m<$p.length;m++)Hn($p[m],d);break;case"source":Hn("error",d);break;case"img":case"image":case"link":Hn("error",d),Hn("load",d);break;case"details":Hn("toggle",d);break;case"input":Hn("invalid",d),Yh(d,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),ds(d);break;case"select":Hn("invalid",d);break;case"textarea":Hn("invalid",d),Xh(d,w.value,w.defaultValue,w.children),ds(d)}m=w.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||w.suppressHydrationWarning===!0||X3(d.textContent,m)?(w.popover!=null&&(Hn("beforetoggle",d),Hn("toggle",d)),w.onScroll!=null&&Hn("scroll",d),w.onScrollEnd!=null&&Hn("scrollend",d),w.onClick!=null&&(d.onclick=yy),d=!0):d=!1,d||Mc(l)}function MA(l){for(ii=l.return;ii;)switch(ii.tag){case 5:case 13:gs=!1;return;case 27:case 3:gs=!0;return;default:ii=ii.return}}function hp(l){if(l!==ii)return!1;if(!er)return MA(l),er=!0,!1;var d=l.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||J_(l.type,l.memoizedProps)),m=!m),m&&Hr&&Mc(l),MA(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(m=l.data,m==="/$"){if(d===0){Hr=Oo(l.nextSibling);break e}d--}else m!=="$"&&m!=="$!"&&m!=="$?"||d++;l=l.nextSibling}Hr=null}}else d===27?(d=Hr,Eu(l.type)?(l=nx,nx=null,Hr=l):Hr=d):Hr=ii?Oo(l.stateNode.nextSibling):null;return!0}function pp(){Hr=ii=null,er=!1}function PA(){var l=jc;return l!==null&&(bi===null?bi=l:bi.push.apply(bi,l),jc=null),l}function mp(l){jc===null?jc=[l]:jc.push(l)}var F1=Q(null),Pc=null,ll=null;function uu(l,d,m){re(F1,d._currentValue),d._currentValue=m}function ul(l){l._currentValue=F1.current,Y(F1)}function L1(l,d,m){for(;l!==null;){var w=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),l===m)break;l=l.return}}function $1(l,d,m,w){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var P=T.dependencies;if(P!==null){var se=T.child;P=P.firstContext;e:for(;P!==null;){var Ee=P;P=T;for(var Ue=0;Ue<d.length;Ue++)if(Ee.context===d[Ue]){P.lanes|=m,Ee=P.alternate,Ee!==null&&(Ee.lanes|=m),L1(P.return,m,l),w||(se=null);break e}P=Ee.next}}else if(T.tag===18){if(se=T.return,se===null)throw Error(r(341));se.lanes|=m,P=se.alternate,P!==null&&(P.lanes|=m),L1(se,m,l),se=null}else se=T.child;if(se!==null)se.return=T;else for(se=T;se!==null;){if(se===l){se=null;break}if(T=se.sibling,T!==null){T.return=se.return,se=T;break}se=se.return}T=se}}function gp(l,d,m,w){l=null;for(var T=d,P=!1;T!==null;){if(!P){if((T.flags&524288)!==0)P=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var se=T.alternate;if(se===null)throw Error(r(387));if(se=se.memoizedProps,se!==null){var Ee=T.type;Ua(T.pendingProps.value,se.value)||(l!==null?l.push(Ee):l=[Ee])}}else if(T===Pe.current){if(se=T.alternate,se===null)throw Error(r(387));se.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Vp):l=[Vp])}T=T.return}l!==null&&$1(d,l,m,w),d.flags|=262144}function Lg(l){for(l=l.firstContext;l!==null;){if(!Ua(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Fc(l){Pc=l,ll=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function qa(l){return FA(Pc,l)}function $g(l,d){return Pc===null&&Fc(l),FA(l,d)}function FA(l,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},ll===null){if(l===null)throw Error(r(308));ll=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else ll=ll.next=d;return m}var FB=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(m,w){l.push(w)}};this.abort=function(){d.aborted=!0,l.forEach(function(m){return m()})}},LB=e.unstable_scheduleCallback,$B=e.unstable_NormalPriority,ua={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B1(){return{controller:new FB,data:new Map,refCount:0}}function yp(l){l.refCount--,l.refCount===0&&LB($B,function(){l.controller.abort()})}var bp=null,z1=0,Qd=0,ef=null;function BB(l,d){if(bp===null){var m=bp=[];z1=0,Qd=q_(),ef={status:"pending",value:void 0,then:function(w){m.push(w)}}}return z1++,d.then(LA,LA),d}function LA(){if(--z1===0&&bp!==null){ef!==null&&(ef.status="fulfilled");var l=bp;bp=null,Qd=0,ef=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function zB(l,d){var m=[],w={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return l.then(function(){w.status="fulfilled",w.value=d;for(var T=0;T<m.length;T++)(0,m[T])(d)},function(T){for(w.status="rejected",w.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),w}var $A=ie.S;ie.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&BB(l,d),$A!==null&&$A(l,d)};var Lc=Q(null);function U1(){var l=Lc.current;return l!==null?l:Ar.pooledCache}function Bg(l,d){d===null?re(Lc,Lc.current):re(Lc,d.pool)}function BA(){var l=U1();return l===null?null:{parent:ua._currentValue,pool:l}}var vp=Error(r(460)),zA=Error(r(474)),zg=Error(r(542)),q1={then:function(){}};function UA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Ug(){}function qA(l,d,m){switch(m=l[m],m===void 0?l.push(d):m!==d&&(d.then(Ug,Ug),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,VA(l),l;default:if(typeof d.status=="string")d.then(Ug,Ug);else{if(l=Ar,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(w){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=w}},function(w){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=w}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,VA(l),l}throw wp=d,vp}}var wp=null;function HA(){if(wp===null)throw Error(r(459));var l=wp;return wp=null,l}function VA(l){if(l===vp||l===zg)throw Error(r(483))}var cu=!1;function H1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function V1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function du(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function fu(l,d,m){var w=l.updateQueue;if(w===null)return null;if(w=w.shared,(sr&2)!==0){var T=w.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),w.pending=d,d=to(l),ba(l,null,m),d}return Zr(l,w,d,m),to(l)}function _p(l,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var w=d.lanes;w&=l.pendingLanes,m|=w,d.lanes=m,Ke(l,m)}}function G1(l,d){var m=l.updateQueue,w=l.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var T=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var se={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};P===null?T=P=se:P=P.next=se,m=m.next}while(m!==null);P===null?T=P=d:P=P.next=d}else T=P=d;m={baseState:w.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:w.shared,callbacks:w.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=d}var W1=!1;function xp(){if(W1){var l=ef;if(l!==null)throw l}}function Sp(l,d,m,w){W1=!1;var T=l.updateQueue;cu=!1;var P=T.firstBaseUpdate,se=T.lastBaseUpdate,Ee=T.shared.pending;if(Ee!==null){T.shared.pending=null;var Ue=Ee,ut=Ue.next;Ue.next=null,se===null?P=ut:se.next=ut,se=Ue;var _t=l.alternate;_t!==null&&(_t=_t.updateQueue,Ee=_t.lastBaseUpdate,Ee!==se&&(Ee===null?_t.firstBaseUpdate=ut:Ee.next=ut,_t.lastBaseUpdate=Ue))}if(P!==null){var kt=T.baseState;se=0,_t=ut=Ue=null,Ee=P;do{var pt=Ee.lane&-536870913,mt=pt!==Ee.lane;if(mt?(Kn&pt)===pt:(w&pt)===pt){pt!==0&&pt===Qd&&(W1=!0),_t!==null&&(_t=_t.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var bn=l,fn=Ee;pt=d;var yr=m;switch(fn.tag){case 1:if(bn=fn.payload,typeof bn=="function"){kt=bn.call(yr,kt,pt);break e}kt=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=fn.payload,pt=typeof bn=="function"?bn.call(yr,kt,pt):bn,pt==null)break e;kt=f({},kt,pt);break e;case 2:cu=!0}}pt=Ee.callback,pt!==null&&(l.flags|=64,mt&&(l.flags|=8192),mt=T.callbacks,mt===null?T.callbacks=[pt]:mt.push(pt))}else mt={lane:pt,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},_t===null?(ut=_t=mt,Ue=kt):_t=_t.next=mt,se|=pt;if(Ee=Ee.next,Ee===null){if(Ee=T.shared.pending,Ee===null)break;mt=Ee,Ee=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);_t===null&&(Ue=kt),T.baseState=Ue,T.firstBaseUpdate=ut,T.lastBaseUpdate=_t,P===null&&(T.shared.lanes=0),wu|=se,l.lanes=se,l.memoizedState=kt}}function GA(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function WA(l,d){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)GA(m[l],d)}var tf=Q(null),qg=Q(0);function KA(l,d){l=gl,re(qg,l),re(tf,d),gl=l|d.baseLanes}function K1(){re(qg,gl),re(tf,tf.current)}function Z1(){gl=qg.current,Y(tf),Y(qg)}var hu=0,Fn=null,mr=null,na=null,Hg=!1,nf=!1,$c=!1,Vg=0,Ep=0,rf=null,UB=0;function Yr(){throw Error(r(321))}function Y1(l,d){if(d===null)return!1;for(var m=0;m<d.length&&m<l.length;m++)if(!Ua(l[m],d[m]))return!1;return!0}function X1(l,d,m,w,T,P){return hu=P,Fn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,ie.H=l===null||l.memoizedState===null?IT:OT,$c=!1,P=m(w,T),$c=!1,nf&&(P=YA(d,m,w,T)),ZA(l),P}function ZA(l){ie.H=Xg;var d=mr!==null&&mr.next!==null;if(hu=0,na=mr=Fn=null,Hg=!1,Ep=0,rf=null,d)throw Error(r(300));l===null||va||(l=l.dependencies,l!==null&&Lg(l)&&(va=!0))}function YA(l,d,m,w){Fn=l;var T=0;do{if(nf&&(rf=null),Ep=0,nf=!1,25<=T)throw Error(r(301));if(T+=1,na=mr=null,l.updateQueue!=null){var P=l.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}ie.H=ZB,P=d(m,w)}while(nf);return P}function qB(){var l=ie.H,d=l.useState()[0];return d=typeof d.then=="function"?Cp(d):d,l=l.useState()[0],(mr!==null?mr.memoizedState:null)!==l&&(Fn.flags|=1024),d}function J1(){var l=Vg!==0;return Vg=0,l}function Q1(l,d,m){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~m}function e_(l){if(Hg){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Hg=!1}hu=0,na=mr=Fn=null,nf=!1,Ep=Vg=0,rf=null}function gi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return na===null?Fn.memoizedState=na=l:na=na.next=l,na}function ra(){if(mr===null){var l=Fn.alternate;l=l!==null?l.memoizedState:null}else l=mr.next;var d=na===null?Fn.memoizedState:na.next;if(d!==null)na=d,mr=l;else{if(l===null)throw Fn.alternate===null?Error(r(467)):Error(r(310));mr=l,l={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},na===null?Fn.memoizedState=na=l:na=na.next=l}return na}function t_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cp(l){var d=Ep;return Ep+=1,rf===null&&(rf=[]),l=qA(rf,l,d),d=Fn,(na===null?d.memoizedState:na.next)===null&&(d=d.alternate,ie.H=d===null||d.memoizedState===null?IT:OT),l}function Gg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return Cp(l);if(l.$$typeof===E)return qa(l)}throw Error(r(438,String(l)))}function n_(l){var d=null,m=Fn.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var w=Fn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(d={data:w.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=t_(),Fn.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(l),w=0;w<l;w++)m[w]=W;return d.index++,m}function cl(l,d){return typeof d=="function"?d(l):d}function Wg(l){var d=ra();return r_(d,mr,l)}function r_(l,d,m){var w=l.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=m;var T=l.baseQueue,P=w.pending;if(P!==null){if(T!==null){var se=T.next;T.next=P.next,P.next=se}d.baseQueue=T=P,w.pending=null}if(P=l.baseState,T===null)l.memoizedState=P;else{d=T.next;var Ee=se=null,Ue=null,ut=d,_t=!1;do{var kt=ut.lane&-536870913;if(kt!==ut.lane?(Kn&kt)===kt:(hu&kt)===kt){var pt=ut.revertLane;if(pt===0)Ue!==null&&(Ue=Ue.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),kt===Qd&&(_t=!0);else if((hu&pt)===pt){ut=ut.next,pt===Qd&&(_t=!0);continue}else kt={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},Ue===null?(Ee=Ue=kt,se=P):Ue=Ue.next=kt,Fn.lanes|=pt,wu|=pt;kt=ut.action,$c&&m(P,kt),P=ut.hasEagerState?ut.eagerState:m(P,kt)}else pt={lane:kt,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},Ue===null?(Ee=Ue=pt,se=P):Ue=Ue.next=pt,Fn.lanes|=kt,wu|=kt;ut=ut.next}while(ut!==null&&ut!==d);if(Ue===null?se=P:Ue.next=Ee,!Ua(P,l.memoizedState)&&(va=!0,_t&&(m=ef,m!==null)))throw m;l.memoizedState=P,l.baseState=se,l.baseQueue=Ue,w.lastRenderedState=P}return T===null&&(w.lanes=0),[l.memoizedState,w.dispatch]}function a_(l){var d=ra(),m=d.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var w=m.dispatch,T=m.pending,P=d.memoizedState;if(T!==null){m.pending=null;var se=T=T.next;do P=l(P,se.action),se=se.next;while(se!==T);Ua(P,d.memoizedState)||(va=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),m.lastRenderedState=P}return[P,w]}function XA(l,d,m){var w=Fn,T=ra(),P=er;if(P){if(m===void 0)throw Error(r(407));m=m()}else m=d();var se=!Ua((mr||T).memoizedState,m);se&&(T.memoizedState=m,va=!0),T=T.queue;var Ee=eT.bind(null,w,T,l);if(kp(2048,8,Ee,[l]),T.getSnapshot!==d||se||na!==null&&na.memoizedState.tag&1){if(w.flags|=2048,af(9,Kg(),QA.bind(null,w,T,m,d),null),Ar===null)throw Error(r(349));P||(hu&124)!==0||JA(w,d,m)}return m}function JA(l,d,m){l.flags|=16384,l={getSnapshot:d,value:m},d=Fn.updateQueue,d===null?(d=t_(),Fn.updateQueue=d,d.stores=[l]):(m=d.stores,m===null?d.stores=[l]:m.push(l))}function QA(l,d,m,w){d.value=m,d.getSnapshot=w,tT(d)&&nT(l)}function eT(l,d,m){return m(function(){tT(d)&&nT(l)})}function tT(l){var d=l.getSnapshot;l=l.value;try{var m=d();return!Ua(l,m)}catch{return!0}}function nT(l){var d=No(l,2);d!==null&&$i(d,l,2)}function i_(l){var d=gi();if(typeof l=="function"){var m=l;if(l=m(),$c){Tt(!0);try{m()}finally{Tt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:l},d}function rT(l,d,m,w){return l.baseState=m,r_(l,mr,typeof w=="function"?w:cl)}function HB(l,d,m,w,T){if(Yg(l))throw Error(r(485));if(l=d.action,l!==null){var P={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(se){P.listeners.push(se)}};ie.T!==null?m(!0):P.isTransition=!1,w(P),m=d.pending,m===null?(P.next=d.pending=P,aT(d,P)):(P.next=m.next,d.pending=m.next=P)}}function aT(l,d){var m=d.action,w=d.payload,T=l.state;if(d.isTransition){var P=ie.T,se={};ie.T=se;try{var Ee=m(T,w),Ue=ie.S;Ue!==null&&Ue(se,Ee),iT(l,d,Ee)}catch(ut){o_(l,d,ut)}finally{ie.T=P}}else try{P=m(T,w),iT(l,d,P)}catch(ut){o_(l,d,ut)}}function iT(l,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(w){oT(l,d,w)},function(w){return o_(l,d,w)}):oT(l,d,m)}function oT(l,d,m){d.status="fulfilled",d.value=m,sT(d),l.state=m,d=l.pending,d!==null&&(m=d.next,m===d?l.pending=null:(m=m.next,d.next=m,aT(l,m)))}function o_(l,d,m){var w=l.pending;if(l.pending=null,w!==null){w=w.next;do d.status="rejected",d.reason=m,sT(d),d=d.next;while(d!==w)}l.action=null}function sT(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function lT(l,d){return d}function uT(l,d){if(er){var m=Ar.formState;if(m!==null){e:{var w=Fn;if(er){if(Hr){t:{for(var T=Hr,P=gs;T.nodeType!==8;){if(!P){T=null;break t}if(T=Oo(T.nextSibling),T===null){T=null;break t}}P=T.data,T=P==="F!"||P==="F"?T:null}if(T){Hr=Oo(T.nextSibling),w=T.data==="F!";break e}}Mc(w)}w=!1}w&&(d=m[0])}}return m=gi(),m.memoizedState=m.baseState=d,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lT,lastRenderedState:d},m.queue=w,m=TT.bind(null,Fn,w),w.dispatch=m,w=i_(!1),P=d_.bind(null,Fn,!1,w.queue),w=gi(),T={state:d,dispatch:null,action:l,pending:null},w.queue=T,m=HB.bind(null,Fn,T,P,m),T.dispatch=m,w.memoizedState=l,[d,m,!1]}function cT(l){var d=ra();return dT(d,mr,l)}function dT(l,d,m){if(d=r_(l,d,lT)[0],l=Wg(cl)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var w=Cp(d)}catch(se){throw se===vp?zg:se}else w=d;d=ra();var T=d.queue,P=T.dispatch;return m!==d.memoizedState&&(Fn.flags|=2048,af(9,Kg(),VB.bind(null,T,m),null)),[w,P,l]}function VB(l,d){l.action=d}function fT(l){var d=ra(),m=mr;if(m!==null)return dT(d,m,l);ra(),d=d.memoizedState,m=ra();var w=m.queue.dispatch;return m.memoizedState=l,[d,w,!1]}function af(l,d,m,w){return l={tag:l,create:m,deps:w,inst:d,next:null},d=Fn.updateQueue,d===null&&(d=t_(),Fn.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=l.next=l:(w=m.next,m.next=l,l.next=w,d.lastEffect=l),l}function Kg(){return{destroy:void 0,resource:void 0}}function hT(){return ra().memoizedState}function Zg(l,d,m,w){var T=gi();w=w===void 0?null:w,Fn.flags|=l,T.memoizedState=af(1|d,Kg(),m,w)}function kp(l,d,m,w){var T=ra();w=w===void 0?null:w;var P=T.memoizedState.inst;mr!==null&&w!==null&&Y1(w,mr.memoizedState.deps)?T.memoizedState=af(d,P,m,w):(Fn.flags|=l,T.memoizedState=af(1|d,P,m,w))}function pT(l,d){Zg(8390656,8,l,d)}function mT(l,d){kp(2048,8,l,d)}function gT(l,d){return kp(4,2,l,d)}function yT(l,d){return kp(4,4,l,d)}function bT(l,d){if(typeof d=="function"){l=l();var m=d(l);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function vT(l,d,m){m=m!=null?m.concat([l]):null,kp(4,4,bT.bind(null,d,l),m)}function s_(){}function wT(l,d){var m=ra();d=d===void 0?null:d;var w=m.memoizedState;return d!==null&&Y1(d,w[1])?w[0]:(m.memoizedState=[l,d],l)}function _T(l,d){var m=ra();d=d===void 0?null:d;var w=m.memoizedState;if(d!==null&&Y1(d,w[1]))return w[0];if(w=l(),$c){Tt(!0);try{l()}finally{Tt(!1)}}return m.memoizedState=[w,d],w}function l_(l,d,m){return m===void 0||(hu&1073741824)!==0?l.memoizedState=d:(l.memoizedState=m,l=E3(),Fn.lanes|=l,wu|=l,m)}function xT(l,d,m,w){return Ua(m,d)?m:tf.current!==null?(l=l_(l,m,w),Ua(l,d)||(va=!0),l):(hu&42)===0?(va=!0,l.memoizedState=m):(l=E3(),Fn.lanes|=l,wu|=l,d)}function ST(l,d,m,w,T){var P=te.p;te.p=P!==0&&8>P?P:8;var se=ie.T,Ee={};ie.T=Ee,d_(l,!1,d,m);try{var Ue=T(),ut=ie.S;if(ut!==null&&ut(Ee,Ue),Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var _t=zB(Ue,w);Ap(l,d,_t,Li(l))}else Ap(l,d,w,Li(l))}catch(kt){Ap(l,d,{then:function(){},status:"rejected",reason:kt},Li())}finally{te.p=P,ie.T=se}}function GB(){}function u_(l,d,m,w){if(l.tag!==5)throw Error(r(476));var T=ET(l).queue;ST(l,T,d,X,m===null?GB:function(){return CT(l),m(w)})}function ET(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:X},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:m},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function CT(l){var d=ET(l).next.queue;Ap(l,d,{},Li())}function c_(){return qa(Vp)}function kT(){return ra().memoizedState}function AT(){return ra().memoizedState}function WB(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var m=Li();l=du(m);var w=fu(d,l,m);w!==null&&($i(w,d,m),_p(w,d,m)),d={cache:B1()},l.payload=d;return}d=d.return}}function KB(l,d,m){var w=Li();m={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Yg(l)?RT(d,m):(m=ta(l,d,m,w),m!==null&&($i(m,l,w),NT(m,d,w)))}function TT(l,d,m){var w=Li();Ap(l,d,m,w)}function Ap(l,d,m,w){var T={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Yg(l))RT(d,T);else{var P=l.alternate;if(l.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var se=d.lastRenderedState,Ee=P(se,m);if(T.hasEagerState=!0,T.eagerState=Ee,Ua(Ee,se))return Zr(l,d,T,0),Ar===null&&yn(),!1}catch{}finally{}if(m=ta(l,d,T,w),m!==null)return $i(m,l,w),NT(m,d,w),!0}return!1}function d_(l,d,m,w){if(w={lane:2,revertLane:q_(),action:w,hasEagerState:!1,eagerState:null,next:null},Yg(l)){if(d)throw Error(r(479))}else d=ta(l,m,w,2),d!==null&&$i(d,l,2)}function Yg(l){var d=l.alternate;return l===Fn||d!==null&&d===Fn}function RT(l,d){nf=Hg=!0;var m=l.pending;m===null?d.next=d:(d.next=m.next,m.next=d),l.pending=d}function NT(l,d,m){if((m&4194048)!==0){var w=d.lanes;w&=l.pendingLanes,m|=w,d.lanes=m,Ke(l,m)}}var Xg={readContext:qa,use:Gg,useCallback:Yr,useContext:Yr,useEffect:Yr,useImperativeHandle:Yr,useLayoutEffect:Yr,useInsertionEffect:Yr,useMemo:Yr,useReducer:Yr,useRef:Yr,useState:Yr,useDebugValue:Yr,useDeferredValue:Yr,useTransition:Yr,useSyncExternalStore:Yr,useId:Yr,useHostTransitionStatus:Yr,useFormState:Yr,useActionState:Yr,useOptimistic:Yr,useMemoCache:Yr,useCacheRefresh:Yr},IT={readContext:qa,use:Gg,useCallback:function(l,d){return gi().memoizedState=[l,d===void 0?null:d],l},useContext:qa,useEffect:pT,useImperativeHandle:function(l,d,m){m=m!=null?m.concat([l]):null,Zg(4194308,4,bT.bind(null,d,l),m)},useLayoutEffect:function(l,d){return Zg(4194308,4,l,d)},useInsertionEffect:function(l,d){Zg(4,2,l,d)},useMemo:function(l,d){var m=gi();d=d===void 0?null:d;var w=l();if($c){Tt(!0);try{l()}finally{Tt(!1)}}return m.memoizedState=[w,d],w},useReducer:function(l,d,m){var w=gi();if(m!==void 0){var T=m(d);if($c){Tt(!0);try{m(d)}finally{Tt(!1)}}}else T=d;return w.memoizedState=w.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},w.queue=l,l=l.dispatch=KB.bind(null,Fn,l),[w.memoizedState,l]},useRef:function(l){var d=gi();return l={current:l},d.memoizedState=l},useState:function(l){l=i_(l);var d=l.queue,m=TT.bind(null,Fn,d);return d.dispatch=m,[l.memoizedState,m]},useDebugValue:s_,useDeferredValue:function(l,d){var m=gi();return l_(m,l,d)},useTransition:function(){var l=i_(!1);return l=ST.bind(null,Fn,l.queue,!0,!1),gi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,m){var w=Fn,T=gi();if(er){if(m===void 0)throw Error(r(407));m=m()}else{if(m=d(),Ar===null)throw Error(r(349));(Kn&124)!==0||JA(w,d,m)}T.memoizedState=m;var P={value:m,getSnapshot:d};return T.queue=P,pT(eT.bind(null,w,P,l),[l]),w.flags|=2048,af(9,Kg(),QA.bind(null,w,P,m,d),null),m},useId:function(){var l=gi(),d=Ar.identifierPrefix;if(er){var m=sl,w=ol;m=(w&~(1<<32-Ut(w)-1)).toString(32)+m,d=""+d+"R"+m,m=Vg++,0<m&&(d+="H"+m.toString(32)),d+=""}else m=UB++,d=""+d+"r"+m.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:c_,useFormState:uT,useActionState:uT,useOptimistic:function(l){var d=gi();d.memoizedState=d.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=d_.bind(null,Fn,!0,m),m.dispatch=d,[l,d]},useMemoCache:n_,useCacheRefresh:function(){return gi().memoizedState=WB.bind(null,Fn)}},OT={readContext:qa,use:Gg,useCallback:wT,useContext:qa,useEffect:mT,useImperativeHandle:vT,useInsertionEffect:gT,useLayoutEffect:yT,useMemo:_T,useReducer:Wg,useRef:hT,useState:function(){return Wg(cl)},useDebugValue:s_,useDeferredValue:function(l,d){var m=ra();return xT(m,mr.memoizedState,l,d)},useTransition:function(){var l=Wg(cl)[0],d=ra().memoizedState;return[typeof l=="boolean"?l:Cp(l),d]},useSyncExternalStore:XA,useId:kT,useHostTransitionStatus:c_,useFormState:cT,useActionState:cT,useOptimistic:function(l,d){var m=ra();return rT(m,mr,l,d)},useMemoCache:n_,useCacheRefresh:AT},ZB={readContext:qa,use:Gg,useCallback:wT,useContext:qa,useEffect:mT,useImperativeHandle:vT,useInsertionEffect:gT,useLayoutEffect:yT,useMemo:_T,useReducer:a_,useRef:hT,useState:function(){return a_(cl)},useDebugValue:s_,useDeferredValue:function(l,d){var m=ra();return mr===null?l_(m,l,d):xT(m,mr.memoizedState,l,d)},useTransition:function(){var l=a_(cl)[0],d=ra().memoizedState;return[typeof l=="boolean"?l:Cp(l),d]},useSyncExternalStore:XA,useId:kT,useHostTransitionStatus:c_,useFormState:fT,useActionState:fT,useOptimistic:function(l,d){var m=ra();return mr!==null?rT(m,mr,l,d):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:n_,useCacheRefresh:AT},of=null,Tp=0;function Jg(l){var d=Tp;return Tp+=1,of===null&&(of=[]),qA(of,l,d)}function Rp(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Qg(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function DT(l){var d=l._init;return d(l._payload)}function jT(l){function d(nt,Ze){if(l){var lt=nt.deletions;lt===null?(nt.deletions=[Ze],nt.flags|=16):lt.push(Ze)}}function m(nt,Ze){if(!l)return null;for(;Ze!==null;)d(nt,Ze),Ze=Ze.sibling;return null}function w(nt){for(var Ze=new Map;nt!==null;)nt.key!==null?Ze.set(nt.key,nt):Ze.set(nt.index,nt),nt=nt.sibling;return Ze}function T(nt,Ze){return nt=il(nt,Ze),nt.index=0,nt.sibling=null,nt}function P(nt,Ze,lt){return nt.index=lt,l?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<Ze?(nt.flags|=67108866,Ze):lt):(nt.flags|=67108866,Ze)):(nt.flags|=1048576,Ze)}function se(nt){return l&&nt.alternate===null&&(nt.flags|=67108866),nt}function Ee(nt,Ze,lt,St){return Ze===null||Ze.tag!==6?(Ze=O1(lt,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,lt),Ze.return=nt,Ze)}function Ue(nt,Ze,lt,St){var Qt=lt.type;return Qt===v?_t(nt,Ze,lt.props.children,St,lt.key):Ze!==null&&(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&DT(Qt)===Ze.type)?(Ze=T(Ze,lt.props),Rp(Ze,lt),Ze.return=nt,Ze):(Ze=Mg(lt.type,lt.key,lt.props,null,nt.mode,St),Rp(Ze,lt),Ze.return=nt,Ze)}function ut(nt,Ze,lt,St){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==lt.containerInfo||Ze.stateNode.implementation!==lt.implementation?(Ze=D1(lt,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,lt.children||[]),Ze.return=nt,Ze)}function _t(nt,Ze,lt,St,Qt){return Ze===null||Ze.tag!==7?(Ze=Ic(lt,nt.mode,St,Qt),Ze.return=nt,Ze):(Ze=T(Ze,lt),Ze.return=nt,Ze)}function kt(nt,Ze,lt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=O1(""+Ze,nt.mode,lt),Ze.return=nt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case p:return lt=Mg(Ze.type,Ze.key,Ze.props,null,nt.mode,lt),Rp(lt,Ze),lt.return=nt,lt;case g:return Ze=D1(Ze,nt.mode,lt),Ze.return=nt,Ze;case D:var St=Ze._init;return Ze=St(Ze._payload),kt(nt,Ze,lt)}if(ae(Ze)||F(Ze))return Ze=Ic(Ze,nt.mode,lt,null),Ze.return=nt,Ze;if(typeof Ze.then=="function")return kt(nt,Jg(Ze),lt);if(Ze.$$typeof===E)return kt(nt,$g(nt,Ze),lt);Qg(nt,Ze)}return null}function pt(nt,Ze,lt,St){var Qt=Ze!==null?Ze.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Qt!==null?null:Ee(nt,Ze,""+lt,St);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case p:return lt.key===Qt?Ue(nt,Ze,lt,St):null;case g:return lt.key===Qt?ut(nt,Ze,lt,St):null;case D:return Qt=lt._init,lt=Qt(lt._payload),pt(nt,Ze,lt,St)}if(ae(lt)||F(lt))return Qt!==null?null:_t(nt,Ze,lt,St,null);if(typeof lt.then=="function")return pt(nt,Ze,Jg(lt),St);if(lt.$$typeof===E)return pt(nt,Ze,$g(nt,lt),St);Qg(nt,lt)}return null}function mt(nt,Ze,lt,St,Qt){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return nt=nt.get(lt)||null,Ee(Ze,nt,""+St,Qt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case p:return nt=nt.get(St.key===null?lt:St.key)||null,Ue(Ze,nt,St,Qt);case g:return nt=nt.get(St.key===null?lt:St.key)||null,ut(Ze,nt,St,Qt);case D:var $n=St._init;return St=$n(St._payload),mt(nt,Ze,lt,St,Qt)}if(ae(St)||F(St))return nt=nt.get(lt)||null,_t(Ze,nt,St,Qt,null);if(typeof St.then=="function")return mt(nt,Ze,lt,Jg(St),Qt);if(St.$$typeof===E)return mt(nt,Ze,lt,$g(Ze,St),Qt);Qg(Ze,St)}return null}function bn(nt,Ze,lt,St){for(var Qt=null,$n=null,on=Ze,mn=Ze=0,_a=null;on!==null&&mn<lt.length;mn++){on.index>mn?(_a=on,on=null):_a=on.sibling;var Qn=pt(nt,on,lt[mn],St);if(Qn===null){on===null&&(on=_a);break}l&&on&&Qn.alternate===null&&d(nt,on),Ze=P(Qn,Ze,mn),$n===null?Qt=Qn:$n.sibling=Qn,$n=Qn,on=_a}if(mn===lt.length)return m(nt,on),er&&Dc(nt,mn),Qt;if(on===null){for(;mn<lt.length;mn++)on=kt(nt,lt[mn],St),on!==null&&(Ze=P(on,Ze,mn),$n===null?Qt=on:$n.sibling=on,$n=on);return er&&Dc(nt,mn),Qt}for(on=w(on);mn<lt.length;mn++)_a=mt(on,nt,mn,lt[mn],St),_a!==null&&(l&&_a.alternate!==null&&on.delete(_a.key===null?mn:_a.key),Ze=P(_a,Ze,mn),$n===null?Qt=_a:$n.sibling=_a,$n=_a);return l&&on.forEach(function(Ru){return d(nt,Ru)}),er&&Dc(nt,mn),Qt}function fn(nt,Ze,lt,St){if(lt==null)throw Error(r(151));for(var Qt=null,$n=null,on=Ze,mn=Ze=0,_a=null,Qn=lt.next();on!==null&&!Qn.done;mn++,Qn=lt.next()){on.index>mn?(_a=on,on=null):_a=on.sibling;var Ru=pt(nt,on,Qn.value,St);if(Ru===null){on===null&&(on=_a);break}l&&on&&Ru.alternate===null&&d(nt,on),Ze=P(Ru,Ze,mn),$n===null?Qt=Ru:$n.sibling=Ru,$n=Ru,on=_a}if(Qn.done)return m(nt,on),er&&Dc(nt,mn),Qt;if(on===null){for(;!Qn.done;mn++,Qn=lt.next())Qn=kt(nt,Qn.value,St),Qn!==null&&(Ze=P(Qn,Ze,mn),$n===null?Qt=Qn:$n.sibling=Qn,$n=Qn);return er&&Dc(nt,mn),Qt}for(on=w(on);!Qn.done;mn++,Qn=lt.next())Qn=mt(on,nt,mn,Qn.value,St),Qn!==null&&(l&&Qn.alternate!==null&&on.delete(Qn.key===null?mn:Qn.key),Ze=P(Qn,Ze,mn),$n===null?Qt=Qn:$n.sibling=Qn,$n=Qn);return l&&on.forEach(function(Y7){return d(nt,Y7)}),er&&Dc(nt,mn),Qt}function yr(nt,Ze,lt,St){if(typeof lt=="object"&&lt!==null&&lt.type===v&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case p:e:{for(var Qt=lt.key;Ze!==null;){if(Ze.key===Qt){if(Qt=lt.type,Qt===v){if(Ze.tag===7){m(nt,Ze.sibling),St=T(Ze,lt.props.children),St.return=nt,nt=St;break e}}else if(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&DT(Qt)===Ze.type){m(nt,Ze.sibling),St=T(Ze,lt.props),Rp(St,lt),St.return=nt,nt=St;break e}m(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}lt.type===v?(St=Ic(lt.props.children,nt.mode,St,lt.key),St.return=nt,nt=St):(St=Mg(lt.type,lt.key,lt.props,null,nt.mode,St),Rp(St,lt),St.return=nt,nt=St)}return se(nt);case g:e:{for(Qt=lt.key;Ze!==null;){if(Ze.key===Qt)if(Ze.tag===4&&Ze.stateNode.containerInfo===lt.containerInfo&&Ze.stateNode.implementation===lt.implementation){m(nt,Ze.sibling),St=T(Ze,lt.children||[]),St.return=nt,nt=St;break e}else{m(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}St=D1(lt,nt.mode,St),St.return=nt,nt=St}return se(nt);case D:return Qt=lt._init,lt=Qt(lt._payload),yr(nt,Ze,lt,St)}if(ae(lt))return bn(nt,Ze,lt,St);if(F(lt)){if(Qt=F(lt),typeof Qt!="function")throw Error(r(150));return lt=Qt.call(lt),fn(nt,Ze,lt,St)}if(typeof lt.then=="function")return yr(nt,Ze,Jg(lt),St);if(lt.$$typeof===E)return yr(nt,Ze,$g(nt,lt),St);Qg(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ze!==null&&Ze.tag===6?(m(nt,Ze.sibling),St=T(Ze,lt),St.return=nt,nt=St):(m(nt,Ze),St=O1(lt,nt.mode,St),St.return=nt,nt=St),se(nt)):m(nt,Ze)}return function(nt,Ze,lt,St){try{Tp=0;var Qt=yr(nt,Ze,lt,St);return of=null,Qt}catch(on){if(on===vp||on===zg)throw on;var $n=ji(29,on,null,nt.mode);return $n.lanes=St,$n.return=nt,$n}finally{}}}var sf=jT(!0),MT=jT(!1),ao=Q(null),ys=null;function pu(l){var d=l.alternate;re(ca,ca.current&1),re(ao,l),ys===null&&(d===null||tf.current!==null||d.memoizedState!==null)&&(ys=l)}function PT(l){if(l.tag===22){if(re(ca,ca.current),re(ao,l),ys===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(ys=l)}}else mu()}function mu(){re(ca,ca.current),re(ao,ao.current)}function dl(l){Y(ao),ys===l&&(ys=null),Y(ca)}var ca=Q(0);function ey(l){for(var d=l;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||tx(m)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function f_(l,d,m,w){d=l.memoizedState,m=m(w,d),m=m==null?d:f({},d,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var h_={enqueueSetState:function(l,d,m){l=l._reactInternals;var w=Li(),T=du(w);T.payload=d,m!=null&&(T.callback=m),d=fu(l,T,w),d!==null&&($i(d,l,w),_p(d,l,w))},enqueueReplaceState:function(l,d,m){l=l._reactInternals;var w=Li(),T=du(w);T.tag=1,T.payload=d,m!=null&&(T.callback=m),d=fu(l,T,w),d!==null&&($i(d,l,w),_p(d,l,w))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var m=Li(),w=du(m);w.tag=2,d!=null&&(w.callback=d),d=fu(l,w,m),d!==null&&($i(d,l,m),_p(d,l,m))}};function FT(l,d,m,w,T,P,se){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(w,P,se):d.prototype&&d.prototype.isPureReactComponent?!k(m,w)||!k(T,P):!0}function LT(l,d,m,w){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,w),d.state!==l&&h_.enqueueReplaceState(d,d.state,null)}function Bc(l,d){var m=d;if("ref"in d){m={};for(var w in d)w!=="ref"&&(m[w]=d[w])}if(l=l.defaultProps){m===d&&(m=f({},m));for(var T in l)m[T]===void 0&&(m[T]=l[T])}return m}var ty=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Gr=="object"&&typeof Gr.emit=="function"){Gr.emit("uncaughtException",l);return}console.error(l)};function $T(l){ty(l)}function BT(l){console.error(l)}function zT(l){ty(l)}function ny(l,d){try{var m=l.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(w){setTimeout(function(){throw w})}}function UT(l,d,m){try{var w=l.onCaughtError;w(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function p_(l,d,m){return m=du(m),m.tag=3,m.payload={element:null},m.callback=function(){ny(l,d)},m}function qT(l){return l=du(l),l.tag=3,l}function HT(l,d,m,w){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var P=w.value;l.payload=function(){return T(P)},l.callback=function(){UT(d,m,w)}}var se=m.stateNode;se!==null&&typeof se.componentDidCatch=="function"&&(l.callback=function(){UT(d,m,w),typeof T!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var Ee=w.stack;this.componentDidCatch(w.value,{componentStack:Ee!==null?Ee:""})})}function YB(l,d,m,w,T){if(m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(d=m.alternate,d!==null&&gp(d,m,T,!0),m=ao.current,m!==null){switch(m.tag){case 13:return ys===null?L_():m.alternate===null&&Vr===0&&(Vr=3),m.flags&=-257,m.flags|=65536,m.lanes=T,w===q1?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([w]):d.add(w),B_(l,w,T)),!1;case 22:return m.flags|=65536,w===q1?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([w])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([w]):m.add(w)),B_(l,w,T)),!1}throw Error(r(435,m.tag))}return B_(l,w,T),L_(),!1}if(er)return d=ao.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,w!==P1&&(l=Error(r(422),{cause:w}),mp(cn(l,m)))):(w!==P1&&(d=Error(r(423),{cause:w}),mp(cn(d,m))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,w=cn(w,m),T=p_(l.stateNode,w,T),G1(l,T),Vr!==4&&(Vr=2)),!1;var P=Error(r(520),{cause:w});if(P=cn(P,m),Pp===null?Pp=[P]:Pp.push(P),Vr!==4&&(Vr=2),d===null)return!0;w=cn(w,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,l=T&-T,m.lanes|=l,l=p_(m.stateNode,w,l),G1(m,l),!1;case 1:if(d=m.type,P=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(_u===null||!_u.has(P))))return m.flags|=65536,T&=-T,m.lanes|=T,T=qT(T),HT(T,l,m,w),G1(m,T),!1}m=m.return}while(m!==null);return!1}var VT=Error(r(461)),va=!1;function Da(l,d,m,w){d.child=l===null?MT(d,null,m,w):sf(d,l.child,m,w)}function GT(l,d,m,w,T){m=m.render;var P=d.ref;if("ref"in w){var se={};for(var Ee in w)Ee!=="ref"&&(se[Ee]=w[Ee])}else se=w;return Fc(d),w=X1(l,d,m,se,P,T),Ee=J1(),l!==null&&!va?(Q1(l,d,T),fl(l,d,T)):(er&&Ee&&j1(d),d.flags|=1,Da(l,d,w,T),d.child)}function WT(l,d,m,w,T){if(l===null){var P=m.type;return typeof P=="function"&&!I1(P)&&P.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=P,KT(l,d,P,w,T)):(l=Mg(m.type,null,w,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(P=l.child,!x_(l,T)){var se=P.memoizedProps;if(m=m.compare,m=m!==null?m:k,m(se,w)&&l.ref===d.ref)return fl(l,d,T)}return d.flags|=1,l=il(P,w),l.ref=d.ref,l.return=d,d.child=l}function KT(l,d,m,w,T){if(l!==null){var P=l.memoizedProps;if(k(P,w)&&l.ref===d.ref)if(va=!1,d.pendingProps=w=P,x_(l,T))(l.flags&131072)!==0&&(va=!0);else return d.lanes=l.lanes,fl(l,d,T)}return m_(l,d,m,w,T)}function ZT(l,d,m){var w=d.pendingProps,T=w.children,P=l!==null?l.memoizedState:null;if(w.mode==="hidden"){if((d.flags&128)!==0){if(w=P!==null?P.baseLanes|m:m,l!==null){for(T=d.child=l.child,P=0;T!==null;)P=P|T.lanes|T.childLanes,T=T.sibling;d.childLanes=P&~w}else d.childLanes=0,d.child=null;return YT(l,d,w,m)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Bg(d,P!==null?P.cachePool:null),P!==null?KA(d,P):K1(),PT(d);else return d.lanes=d.childLanes=536870912,YT(l,d,P!==null?P.baseLanes|m:m,m)}else P!==null?(Bg(d,P.cachePool),KA(d,P),mu(),d.memoizedState=null):(l!==null&&Bg(d,null),K1(),mu());return Da(l,d,T,m),d.child}function YT(l,d,m,w){var T=U1();return T=T===null?null:{parent:ua._currentValue,pool:T},d.memoizedState={baseLanes:m,cachePool:T},l!==null&&Bg(d,null),K1(),PT(d),l!==null&&gp(l,d,w,!0),null}function ry(l,d){var m=d.ref;if(m===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(l===null||l.ref!==m)&&(d.flags|=4194816)}}function m_(l,d,m,w,T){return Fc(d),m=X1(l,d,m,w,void 0,T),w=J1(),l!==null&&!va?(Q1(l,d,T),fl(l,d,T)):(er&&w&&j1(d),d.flags|=1,Da(l,d,m,T),d.child)}function XT(l,d,m,w,T,P){return Fc(d),d.updateQueue=null,m=YA(d,w,m,T),ZA(l),w=J1(),l!==null&&!va?(Q1(l,d,P),fl(l,d,P)):(er&&w&&j1(d),d.flags|=1,Da(l,d,m,P),d.child)}function JT(l,d,m,w,T){if(Fc(d),d.stateNode===null){var P=ms,se=m.contextType;typeof se=="object"&&se!==null&&(P=qa(se)),P=new m(w,P),d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=h_,d.stateNode=P,P._reactInternals=d,P=d.stateNode,P.props=w,P.state=d.memoizedState,P.refs={},H1(d),se=m.contextType,P.context=typeof se=="object"&&se!==null?qa(se):ms,P.state=d.memoizedState,se=m.getDerivedStateFromProps,typeof se=="function"&&(f_(d,m,se,w),P.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(se=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),se!==P.state&&h_.enqueueReplaceState(P,P.state,null),Sp(d,w,P,T),xp(),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308),w=!0}else if(l===null){P=d.stateNode;var Ee=d.memoizedProps,Ue=Bc(m,Ee);P.props=Ue;var ut=P.context,_t=m.contextType;se=ms,typeof _t=="object"&&_t!==null&&(se=qa(_t));var kt=m.getDerivedStateFromProps;_t=typeof kt=="function"||typeof P.getSnapshotBeforeUpdate=="function",Ee=d.pendingProps!==Ee,_t||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Ee||ut!==se)&&LT(d,P,w,se),cu=!1;var pt=d.memoizedState;P.state=pt,Sp(d,w,P,T),xp(),ut=d.memoizedState,Ee||pt!==ut||cu?(typeof kt=="function"&&(f_(d,m,kt,w),ut=d.memoizedState),(Ue=cu||FT(d,m,Ue,w,pt,ut,se))?(_t||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(d.flags|=4194308)):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=ut),P.props=w,P.state=ut,P.context=se,w=Ue):(typeof P.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{P=d.stateNode,V1(l,d),se=d.memoizedProps,_t=Bc(m,se),P.props=_t,kt=d.pendingProps,pt=P.context,ut=m.contextType,Ue=ms,typeof ut=="object"&&ut!==null&&(Ue=qa(ut)),Ee=m.getDerivedStateFromProps,(ut=typeof Ee=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(se!==kt||pt!==Ue)&&LT(d,P,w,Ue),cu=!1,pt=d.memoizedState,P.state=pt,Sp(d,w,P,T),xp();var mt=d.memoizedState;se!==kt||pt!==mt||cu||l!==null&&l.dependencies!==null&&Lg(l.dependencies)?(typeof Ee=="function"&&(f_(d,m,Ee,w),mt=d.memoizedState),(_t=cu||FT(d,m,_t,w,pt,mt,Ue)||l!==null&&l.dependencies!==null&&Lg(l.dependencies))?(ut||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(w,mt,Ue),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(w,mt,Ue)),typeof P.componentDidUpdate=="function"&&(d.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof P.componentDidUpdate!="function"||se===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||se===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=mt),P.props=w,P.state=mt,P.context=Ue,w=_t):(typeof P.componentDidUpdate!="function"||se===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||se===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),w=!1)}return P=w,ry(l,d),w=(d.flags&128)!==0,P||w?(P=d.stateNode,m=w&&typeof m.getDerivedStateFromError!="function"?null:P.render(),d.flags|=1,l!==null&&w?(d.child=sf(d,l.child,null,T),d.child=sf(d,null,m,T)):Da(l,d,m,T),d.memoizedState=P.state,l=d.child):l=fl(l,d,T),l}function QT(l,d,m,w){return pp(),d.flags|=256,Da(l,d,m,w),d.child}var g_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function y_(l){return{baseLanes:l,cachePool:BA()}}function b_(l,d,m){return l=l!==null?l.childLanes&~m:0,d&&(l|=io),l}function e3(l,d,m){var w=d.pendingProps,T=!1,P=(d.flags&128)!==0,se;if((se=P)||(se=l!==null&&l.memoizedState===null?!1:(ca.current&2)!==0),se&&(T=!0,d.flags&=-129),se=(d.flags&32)!==0,d.flags&=-33,l===null){if(er){if(T?pu(d):mu(),er){var Ee=Hr,Ue;if(Ue=Ee){e:{for(Ue=Ee,Ee=gs;Ue.nodeType!==8;){if(!Ee){Ee=null;break e}if(Ue=Oo(Ue.nextSibling),Ue===null){Ee=null;break e}}Ee=Ue}Ee!==null?(d.memoizedState={dehydrated:Ee,treeContext:Oc!==null?{id:ol,overflow:sl}:null,retryLane:536870912,hydrationErrors:null},Ue=ji(18,null,null,0),Ue.stateNode=Ee,Ue.return=d,d.child=Ue,ii=d,Hr=null,Ue=!0):Ue=!1}Ue||Mc(d)}if(Ee=d.memoizedState,Ee!==null&&(Ee=Ee.dehydrated,Ee!==null))return tx(Ee)?d.lanes=32:d.lanes=536870912,null;dl(d)}return Ee=w.children,w=w.fallback,T?(mu(),T=d.mode,Ee=ay({mode:"hidden",children:Ee},T),w=Ic(w,T,m,null),Ee.return=d,w.return=d,Ee.sibling=w,d.child=Ee,T=d.child,T.memoizedState=y_(m),T.childLanes=b_(l,se,m),d.memoizedState=g_,w):(pu(d),v_(d,Ee))}if(Ue=l.memoizedState,Ue!==null&&(Ee=Ue.dehydrated,Ee!==null)){if(P)d.flags&256?(pu(d),d.flags&=-257,d=w_(l,d,m)):d.memoizedState!==null?(mu(),d.child=l.child,d.flags|=128,d=null):(mu(),T=w.fallback,Ee=d.mode,w=ay({mode:"visible",children:w.children},Ee),T=Ic(T,Ee,m,null),T.flags|=2,w.return=d,T.return=d,w.sibling=T,d.child=w,sf(d,l.child,null,m),w=d.child,w.memoizedState=y_(m),w.childLanes=b_(l,se,m),d.memoizedState=g_,d=T);else if(pu(d),tx(Ee)){if(se=Ee.nextSibling&&Ee.nextSibling.dataset,se)var ut=se.dgst;se=ut,w=Error(r(419)),w.stack="",w.digest=se,mp({value:w,source:null,stack:null}),d=w_(l,d,m)}else if(va||gp(l,d,m,!1),se=(m&l.childLanes)!==0,va||se){if(se=Ar,se!==null&&(w=m&-m,w=(w&42)!==0?1:Ct(w),w=(w&(se.suspendedLanes|m))!==0?0:w,w!==0&&w!==Ue.retryLane))throw Ue.retryLane=w,No(l,w),$i(se,l,w),VT;Ee.data==="$?"||L_(),d=w_(l,d,m)}else Ee.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=Ue.treeContext,Hr=Oo(Ee.nextSibling),ii=d,er=!0,jc=null,gs=!1,l!==null&&(no[ro++]=ol,no[ro++]=sl,no[ro++]=Oc,ol=l.id,sl=l.overflow,Oc=d),d=v_(d,w.children),d.flags|=4096);return d}return T?(mu(),T=w.fallback,Ee=d.mode,Ue=l.child,ut=Ue.sibling,w=il(Ue,{mode:"hidden",children:w.children}),w.subtreeFlags=Ue.subtreeFlags&65011712,ut!==null?T=il(ut,T):(T=Ic(T,Ee,m,null),T.flags|=2),T.return=d,w.return=d,w.sibling=T,d.child=w,w=T,T=d.child,Ee=l.child.memoizedState,Ee===null?Ee=y_(m):(Ue=Ee.cachePool,Ue!==null?(ut=ua._currentValue,Ue=Ue.parent!==ut?{parent:ut,pool:ut}:Ue):Ue=BA(),Ee={baseLanes:Ee.baseLanes|m,cachePool:Ue}),T.memoizedState=Ee,T.childLanes=b_(l,se,m),d.memoizedState=g_,w):(pu(d),m=l.child,l=m.sibling,m=il(m,{mode:"visible",children:w.children}),m.return=d,m.sibling=null,l!==null&&(se=d.deletions,se===null?(d.deletions=[l],d.flags|=16):se.push(l)),d.child=m,d.memoizedState=null,m)}function v_(l,d){return d=ay({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function ay(l,d){return l=ji(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function w_(l,d,m){return sf(d,l.child,null,m),l=v_(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function t3(l,d,m){l.lanes|=d;var w=l.alternate;w!==null&&(w.lanes|=d),L1(l.return,d,m)}function __(l,d,m,w,T){var P=l.memoizedState;P===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:T}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=m,P.tailMode=T)}function n3(l,d,m){var w=d.pendingProps,T=w.revealOrder,P=w.tail;if(Da(l,d,w.children,m),w=ca.current,(w&2)!==0)w=w&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&t3(l,m,d);else if(l.tag===19)t3(l,m,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}w&=1}switch(re(ca,w),T){case"forwards":for(m=d.child,T=null;m!==null;)l=m.alternate,l!==null&&ey(l)===null&&(T=m),m=m.sibling;m=T,m===null?(T=d.child,d.child=null):(T=m.sibling,m.sibling=null),__(d,!1,T,m,P);break;case"backwards":for(m=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&ey(l)===null){d.child=T;break}l=T.sibling,T.sibling=m,m=T,T=l}__(d,!0,m,null,P);break;case"together":__(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function fl(l,d,m){if(l!==null&&(d.dependencies=l.dependencies),wu|=d.lanes,(m&d.childLanes)===0)if(l!==null){if(gp(l,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,m=il(l,l.pendingProps),d.child=m,m.return=d;l.sibling!==null;)l=l.sibling,m=m.sibling=il(l,l.pendingProps),m.return=d;m.sibling=null}return d.child}function x_(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Lg(l)))}function XB(l,d,m){switch(d.tag){case 3:Re(d,d.stateNode.containerInfo),uu(d,ua,l.memoizedState.cache),pp();break;case 27:case 5:ze(d);break;case 4:Re(d,d.stateNode.containerInfo);break;case 10:uu(d,d.type,d.memoizedProps.value);break;case 13:var w=d.memoizedState;if(w!==null)return w.dehydrated!==null?(pu(d),d.flags|=128,null):(m&d.child.childLanes)!==0?e3(l,d,m):(pu(d),l=fl(l,d,m),l!==null?l.sibling:null);pu(d);break;case 19:var T=(l.flags&128)!==0;if(w=(m&d.childLanes)!==0,w||(gp(l,d,m,!1),w=(m&d.childLanes)!==0),T){if(w)return n3(l,d,m);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),re(ca,ca.current),w)break;return null;case 22:case 23:return d.lanes=0,ZT(l,d,m);case 24:uu(d,ua,l.memoizedState.cache)}return fl(l,d,m)}function r3(l,d,m){if(l!==null)if(l.memoizedProps!==d.pendingProps)va=!0;else{if(!x_(l,m)&&(d.flags&128)===0)return va=!1,XB(l,d,m);va=(l.flags&131072)!==0}else va=!1,er&&(d.flags&1048576)!==0&&DA(d,Fg,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var w=d.elementType,T=w._init;if(w=T(w._payload),d.type=w,typeof w=="function")I1(w)?(l=Bc(w,l),d.tag=1,d=JT(null,d,w,l,m)):(d.tag=0,d=m_(null,d,w,l,m));else{if(w!=null){if(T=w.$$typeof,T===C){d.tag=11,d=GT(null,d,w,l,m);break e}else if(T===I){d.tag=14,d=WT(null,d,w,l,m);break e}}throw d=V(w)||w,Error(r(306,d,""))}}return d;case 0:return m_(l,d,d.type,d.pendingProps,m);case 1:return w=d.type,T=Bc(w,d.pendingProps),JT(l,d,w,T,m);case 3:e:{if(Re(d,d.stateNode.containerInfo),l===null)throw Error(r(387));w=d.pendingProps;var P=d.memoizedState;T=P.element,V1(l,d),Sp(d,w,null,m);var se=d.memoizedState;if(w=se.cache,uu(d,ua,w),w!==P.cache&&$1(d,[ua],m,!0),xp(),w=se.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:se.cache},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){d=QT(l,d,w,m);break e}else if(w!==T){T=cn(Error(r(424)),d),mp(T),d=QT(l,d,w,m);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Hr=Oo(l.firstChild),ii=d,er=!0,jc=null,gs=!0,m=MT(d,null,w,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(pp(),w===T){d=fl(l,d,m);break e}Da(l,d,w,m)}d=d.child}return d;case 26:return ry(l,d),l===null?(m=sR(d.type,null,d.pendingProps,null))?d.memoizedState=m:er||(m=d.type,l=d.pendingProps,w=by(Ie.current).createElement(m),w[pe]=d,w[fe]=l,Ma(w,m,l),jn(w),d.stateNode=w):d.memoizedState=sR(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return ze(d),l===null&&er&&(w=d.stateNode=aR(d.type,d.pendingProps,Ie.current),ii=d,gs=!0,T=Hr,Eu(d.type)?(nx=T,Hr=Oo(w.firstChild)):Hr=T),Da(l,d,d.pendingProps.children,m),ry(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&er&&((T=w=Hr)&&(w=C7(w,d.type,d.pendingProps,gs),w!==null?(d.stateNode=w,ii=d,Hr=Oo(w.firstChild),gs=!1,T=!0):T=!1),T||Mc(d)),ze(d),T=d.type,P=d.pendingProps,se=l!==null?l.memoizedProps:null,w=P.children,J_(T,P)?w=null:se!==null&&J_(T,se)&&(d.flags|=32),d.memoizedState!==null&&(T=X1(l,d,qB,null,null,m),Vp._currentValue=T),ry(l,d),Da(l,d,w,m),d.child;case 6:return l===null&&er&&((l=m=Hr)&&(m=k7(m,d.pendingProps,gs),m!==null?(d.stateNode=m,ii=d,Hr=null,l=!0):l=!1),l||Mc(d)),null;case 13:return e3(l,d,m);case 4:return Re(d,d.stateNode.containerInfo),w=d.pendingProps,l===null?d.child=sf(d,null,w,m):Da(l,d,w,m),d.child;case 11:return GT(l,d,d.type,d.pendingProps,m);case 7:return Da(l,d,d.pendingProps,m),d.child;case 8:return Da(l,d,d.pendingProps.children,m),d.child;case 12:return Da(l,d,d.pendingProps.children,m),d.child;case 10:return w=d.pendingProps,uu(d,d.type,w.value),Da(l,d,w.children,m),d.child;case 9:return T=d.type._context,w=d.pendingProps.children,Fc(d),T=qa(T),w=w(T),d.flags|=1,Da(l,d,w,m),d.child;case 14:return WT(l,d,d.type,d.pendingProps,m);case 15:return KT(l,d,d.type,d.pendingProps,m);case 19:return n3(l,d,m);case 31:return w=d.pendingProps,m=d.mode,w={mode:w.mode,children:w.children},l===null?(m=ay(w,m),m.ref=d.ref,d.child=m,m.return=d,d=m):(m=il(l.child,w),m.ref=d.ref,d.child=m,m.return=d,d=m),d;case 22:return ZT(l,d,m);case 24:return Fc(d),w=qa(ua),l===null?(T=U1(),T===null&&(T=Ar,P=B1(),T.pooledCache=P,P.refCount++,P!==null&&(T.pooledCacheLanes|=m),T=P),d.memoizedState={parent:w,cache:T},H1(d),uu(d,ua,T)):((l.lanes&m)!==0&&(V1(l,d),Sp(d,null,null,m),xp()),T=l.memoizedState,P=d.memoizedState,T.parent!==w?(T={parent:w,cache:w},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),uu(d,ua,w)):(w=P.cache,uu(d,ua,w),w!==T.cache&&$1(d,[ua],m,!0))),Da(l,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function hl(l){l.flags|=4}function a3(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!fR(d)){if(d=ao.current,d!==null&&((Kn&4194048)===Kn?ys!==null:(Kn&62914560)!==Kn&&(Kn&536870912)===0||d!==ys))throw wp=q1,zA;l.flags|=8192}}function iy(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?M():536870912,l.lanes|=d,df|=d)}function Np(l,d){if(!er)switch(l.tailMode){case"hidden":d=l.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:w.sibling=null}}function Br(l){var d=l.alternate!==null&&l.alternate.child===l.child,m=0,w=0;if(d)for(var T=l.child;T!==null;)m|=T.lanes|T.childLanes,w|=T.subtreeFlags&65011712,w|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)m|=T.lanes|T.childLanes,w|=T.subtreeFlags,w|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=w,l.childLanes=m,d}function JB(l,d,m){var w=d.pendingProps;switch(M1(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(d),null;case 1:return Br(d),null;case 3:return m=d.stateNode,w=null,l!==null&&(w=l.memoizedState.cache),d.memoizedState.cache!==w&&(d.flags|=2048),ul(ua),ke(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(hp(d)?hl(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,PA())),Br(d),null;case 26:return m=d.memoizedState,l===null?(hl(d),m!==null?(Br(d),a3(d,m)):(Br(d),d.flags&=-16777217)):m?m!==l.memoizedState?(hl(d),Br(d),a3(d,m)):(Br(d),d.flags&=-16777217):(l.memoizedProps!==w&&hl(d),Br(d),d.flags&=-16777217),null;case 27:it(d),m=Ie.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==w&&hl(d);else{if(!w){if(d.stateNode===null)throw Error(r(166));return Br(d),null}l=be.current,hp(d)?jA(d):(l=aR(T,w,m),d.stateNode=l,hl(d))}return Br(d),null;case 5:if(it(d),m=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==w&&hl(d);else{if(!w){if(d.stateNode===null)throw Error(r(166));return Br(d),null}if(l=be.current,hp(d))jA(d);else{switch(T=by(Ie.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof w.is=="string"?T.createElement("select",{is:w.is}):T.createElement("select"),w.multiple?l.multiple=!0:w.size&&(l.size=w.size);break;default:l=typeof w.is=="string"?T.createElement(m,{is:w.is}):T.createElement(m)}}l[pe]=d,l[fe]=w;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(Ma(l,m,w),m){case"button":case"input":case"select":case"textarea":l=!!w.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&hl(d)}}return Br(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==w&&hl(d);else{if(typeof w!="string"&&d.stateNode===null)throw Error(r(166));if(l=Ie.current,hp(d)){if(l=d.stateNode,m=d.memoizedProps,w=null,T=ii,T!==null)switch(T.tag){case 27:case 5:w=T.memoizedProps}l[pe]=d,l=!!(l.nodeValue===m||w!==null&&w.suppressHydrationWarning===!0||X3(l.nodeValue,m)),l||Mc(d)}else l=by(l).createTextNode(w),l[pe]=d,d.stateNode=l}return Br(d),null;case 13:if(w=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=hp(d),w!==null&&w.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[pe]=d}else pp(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Br(d),T=!1}else T=PA(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(dl(d),d):(dl(d),null)}if(dl(d),(d.flags&128)!==0)return d.lanes=m,d;if(m=w!==null,l=l!==null&&l.memoizedState!==null,m){w=d.child,T=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(T=w.alternate.memoizedState.cachePool.pool);var P=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(P=w.memoizedState.cachePool.pool),P!==T&&(w.flags|=2048)}return m!==l&&m&&(d.child.flags|=8192),iy(d,d.updateQueue),Br(d),null;case 4:return ke(),l===null&&W_(d.stateNode.containerInfo),Br(d),null;case 10:return ul(d.type),Br(d),null;case 19:if(Y(ca),T=d.memoizedState,T===null)return Br(d),null;if(w=(d.flags&128)!==0,P=T.rendering,P===null)if(w)Np(T,!1);else{if(Vr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(P=ey(l),P!==null){for(d.flags|=128,Np(T,!1),l=P.updateQueue,d.updateQueue=l,iy(d,l),d.subtreeFlags=0,l=m,m=d.child;m!==null;)OA(m,l),m=m.sibling;return re(ca,ca.current&1|2),d.child}l=l.sibling}T.tail!==null&&de()>ly&&(d.flags|=128,w=!0,Np(T,!1),d.lanes=4194304)}else{if(!w)if(l=ey(P),l!==null){if(d.flags|=128,w=!0,l=l.updateQueue,d.updateQueue=l,iy(d,l),Np(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!er)return Br(d),null}else 2*de()-T.renderingStartTime>ly&&m!==536870912&&(d.flags|=128,w=!0,Np(T,!1),d.lanes=4194304);T.isBackwards?(P.sibling=d.child,d.child=P):(l=T.last,l!==null?l.sibling=P:d.child=P,T.last=P)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=de(),d.sibling=null,l=ca.current,re(ca,w?l&1|2:l&1),d):(Br(d),null);case 22:case 23:return dl(d),Z1(),w=d.memoizedState!==null,l!==null?l.memoizedState!==null!==w&&(d.flags|=8192):w&&(d.flags|=8192),w?(m&536870912)!==0&&(d.flags&128)===0&&(Br(d),d.subtreeFlags&6&&(d.flags|=8192)):Br(d),m=d.updateQueue,m!==null&&iy(d,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==m&&(d.flags|=2048),l!==null&&Y(Lc),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),ul(ua),Br(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function QB(l,d){switch(M1(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return ul(ua),ke(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return it(d),null;case 13:if(dl(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));pp()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return Y(ca),null;case 4:return ke(),null;case 10:return ul(d.type),null;case 22:case 23:return dl(d),Z1(),l!==null&&Y(Lc),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return ul(ua),null;case 25:return null;default:return null}}function i3(l,d){switch(M1(d),d.tag){case 3:ul(ua),ke();break;case 26:case 27:case 5:it(d);break;case 4:ke();break;case 13:dl(d);break;case 19:Y(ca);break;case 10:ul(d.type);break;case 22:case 23:dl(d),Z1(),l!==null&&Y(Lc);break;case 24:ul(ua)}}function Ip(l,d){try{var m=d.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var T=w.next;m=T;do{if((m.tag&l)===l){w=void 0;var P=m.create,se=m.inst;w=P(),se.destroy=w}m=m.next}while(m!==T)}}catch(Ee){Sr(d,d.return,Ee)}}function gu(l,d,m){try{var w=d.updateQueue,T=w!==null?w.lastEffect:null;if(T!==null){var P=T.next;w=P;do{if((w.tag&l)===l){var se=w.inst,Ee=se.destroy;if(Ee!==void 0){se.destroy=void 0,T=d;var Ue=m,ut=Ee;try{ut()}catch(_t){Sr(T,Ue,_t)}}}w=w.next}while(w!==P)}}catch(_t){Sr(d,d.return,_t)}}function o3(l){var d=l.updateQueue;if(d!==null){var m=l.stateNode;try{WA(d,m)}catch(w){Sr(l,l.return,w)}}}function s3(l,d,m){m.props=Bc(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(w){Sr(l,d,w)}}function Op(l,d){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var w=l.stateNode;break;case 30:w=l.stateNode;break;default:w=l.stateNode}typeof m=="function"?l.refCleanup=m(w):m.current=w}}catch(T){Sr(l,d,T)}}function bs(l,d){var m=l.ref,w=l.refCleanup;if(m!==null)if(typeof w=="function")try{w()}catch(T){Sr(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){Sr(l,d,T)}else m.current=null}function l3(l){var d=l.type,m=l.memoizedProps,w=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&w.focus();break e;case"img":m.src?w.src=m.src:m.srcSet&&(w.srcset=m.srcSet)}}catch(T){Sr(l,l.return,T)}}function S_(l,d,m){try{var w=l.stateNode;w7(w,l.type,m,d),w[fe]=d}catch(T){Sr(l,l.return,T)}}function u3(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Eu(l.type)||l.tag===4}function E_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||u3(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Eu(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function C_(l,d,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(l),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=yy));else if(w!==4&&(w===27&&Eu(l.type)&&(m=l.stateNode,d=null),l=l.child,l!==null))for(C_(l,d,m),l=l.sibling;l!==null;)C_(l,d,m),l=l.sibling}function oy(l,d,m){var w=l.tag;if(w===5||w===6)l=l.stateNode,d?m.insertBefore(l,d):m.appendChild(l);else if(w!==4&&(w===27&&Eu(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(oy(l,d,m),l=l.sibling;l!==null;)oy(l,d,m),l=l.sibling}function c3(l){var d=l.stateNode,m=l.memoizedProps;try{for(var w=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);Ma(d,w,m),d[pe]=l,d[fe]=m}catch(P){Sr(l,l.return,P)}}var pl=!1,Xr=!1,k_=!1,d3=typeof WeakSet=="function"?WeakSet:Set,wa=null;function e7(l,d){if(l=l.containerInfo,Y_=Ey,l=ue(l),we(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var T=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{m.nodeType,P.nodeType}catch{m=null;break e}var se=0,Ee=-1,Ue=-1,ut=0,_t=0,kt=l,pt=null;t:for(;;){for(var mt;kt!==m||T!==0&&kt.nodeType!==3||(Ee=se+T),kt!==P||w!==0&&kt.nodeType!==3||(Ue=se+w),kt.nodeType===3&&(se+=kt.nodeValue.length),(mt=kt.firstChild)!==null;)pt=kt,kt=mt;for(;;){if(kt===l)break t;if(pt===m&&++ut===T&&(Ee=se),pt===P&&++_t===w&&(Ue=se),(mt=kt.nextSibling)!==null)break;kt=pt,pt=kt.parentNode}kt=mt}m=Ee===-1||Ue===-1?null:{start:Ee,end:Ue}}else m=null}m=m||{start:0,end:0}}else m=null;for(X_={focusedElem:l,selectionRange:m},Ey=!1,wa=d;wa!==null;)if(d=wa,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,wa=l;else for(;wa!==null;){switch(d=wa,P=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&P!==null){l=void 0,m=d,T=P.memoizedProps,P=P.memoizedState,w=m.stateNode;try{var bn=Bc(m.type,T,m.elementType===m.type);l=w.getSnapshotBeforeUpdate(bn,P),w.__reactInternalSnapshotBeforeUpdate=l}catch(fn){Sr(m,m.return,fn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,m=l.nodeType,m===9)ex(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":ex(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,wa=l;break}wa=d.return}}function f3(l,d,m){var w=m.flags;switch(m.tag){case 0:case 11:case 15:yu(l,m),w&4&&Ip(5,m);break;case 1:if(yu(l,m),w&4)if(l=m.stateNode,d===null)try{l.componentDidMount()}catch(se){Sr(m,m.return,se)}else{var T=Bc(m.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(se){Sr(m,m.return,se)}}w&64&&o3(m),w&512&&Op(m,m.return);break;case 3:if(yu(l,m),w&64&&(l=m.updateQueue,l!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{WA(l,d)}catch(se){Sr(m,m.return,se)}}break;case 27:d===null&&w&4&&c3(m);case 26:case 5:yu(l,m),d===null&&w&4&&l3(m),w&512&&Op(m,m.return);break;case 12:yu(l,m);break;case 13:yu(l,m),w&4&&m3(l,m),w&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=u7.bind(null,m),A7(l,m))));break;case 22:if(w=m.memoizedState!==null||pl,!w){d=d!==null&&d.memoizedState!==null||Xr,T=pl;var P=Xr;pl=w,(Xr=d)&&!P?bu(l,m,(m.subtreeFlags&8772)!==0):yu(l,m),pl=T,Xr=P}break;case 30:break;default:yu(l,m)}}function h3(l){var d=l.alternate;d!==null&&(l.alternate=null,h3(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Xt(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Pr=null,yi=!1;function ml(l,d,m){for(m=m.child;m!==null;)p3(l,d,m),m=m.sibling}function p3(l,d,m){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Et,m)}catch{}switch(m.tag){case 26:Xr||bs(m,d),ml(l,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:Xr||bs(m,d);var w=Pr,T=yi;Eu(m.type)&&(Pr=m.stateNode,yi=!1),ml(l,d,m),zp(m.stateNode),Pr=w,yi=T;break;case 5:Xr||bs(m,d);case 6:if(w=Pr,T=yi,Pr=null,ml(l,d,m),Pr=w,yi=T,Pr!==null)if(yi)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild(m.stateNode)}catch(P){Sr(m,d,P)}else try{Pr.removeChild(m.stateNode)}catch(P){Sr(m,d,P)}break;case 18:Pr!==null&&(yi?(l=Pr,nR(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),Zp(l)):nR(Pr,m.stateNode));break;case 4:w=Pr,T=yi,Pr=m.stateNode.containerInfo,yi=!0,ml(l,d,m),Pr=w,yi=T;break;case 0:case 11:case 14:case 15:Xr||gu(2,m,d),Xr||gu(4,m,d),ml(l,d,m);break;case 1:Xr||(bs(m,d),w=m.stateNode,typeof w.componentWillUnmount=="function"&&s3(m,d,w)),ml(l,d,m);break;case 21:ml(l,d,m);break;case 22:Xr=(w=Xr)||m.memoizedState!==null,ml(l,d,m),Xr=w;break;default:ml(l,d,m)}}function m3(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Zp(l)}catch(m){Sr(d,d.return,m)}}function t7(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new d3),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new d3),d;default:throw Error(r(435,l.tag))}}function A_(l,d){var m=t7(l);d.forEach(function(w){var T=c7.bind(null,l,w);m.has(w)||(m.add(w),w.then(T,T))})}function Mi(l,d){var m=d.deletions;if(m!==null)for(var w=0;w<m.length;w++){var T=m[w],P=l,se=d,Ee=se;e:for(;Ee!==null;){switch(Ee.tag){case 27:if(Eu(Ee.type)){Pr=Ee.stateNode,yi=!1;break e}break;case 5:Pr=Ee.stateNode,yi=!1;break e;case 3:case 4:Pr=Ee.stateNode.containerInfo,yi=!0;break e}Ee=Ee.return}if(Pr===null)throw Error(r(160));p3(P,se,T),Pr=null,yi=!1,P=T.alternate,P!==null&&(P.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)g3(d,l),d=d.sibling}var Io=null;function g3(l,d){var m=l.alternate,w=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Mi(d,l),Pi(l),w&4&&(gu(3,l,l.return),Ip(3,l),gu(5,l,l.return));break;case 1:Mi(d,l),Pi(l),w&512&&(Xr||m===null||bs(m,m.return)),w&64&&pl&&(l=l.updateQueue,l!==null&&(w=l.callbacks,w!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?w:m.concat(w))));break;case 26:var T=Io;if(Mi(d,l),Pi(l),w&512&&(Xr||m===null||bs(m,m.return)),w&4){var P=m!==null?m.memoizedState:null;if(w=l.memoizedState,m===null)if(w===null)if(l.stateNode===null){e:{w=l.type,m=l.memoizedProps,T=T.ownerDocument||T;t:switch(w){case"title":P=T.getElementsByTagName("title")[0],(!P||P[Vt]||P[pe]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=T.createElement(w),T.head.insertBefore(P,T.querySelector("head > title"))),Ma(P,w,m),P[pe]=l,jn(P),w=P;break e;case"link":var se=cR("link","href",T).get(w+(m.href||""));if(se){for(var Ee=0;Ee<se.length;Ee++)if(P=se[Ee],P.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&P.getAttribute("rel")===(m.rel==null?null:m.rel)&&P.getAttribute("title")===(m.title==null?null:m.title)&&P.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){se.splice(Ee,1);break t}}P=T.createElement(w),Ma(P,w,m),T.head.appendChild(P);break;case"meta":if(se=cR("meta","content",T).get(w+(m.content||""))){for(Ee=0;Ee<se.length;Ee++)if(P=se[Ee],P.getAttribute("content")===(m.content==null?null:""+m.content)&&P.getAttribute("name")===(m.name==null?null:m.name)&&P.getAttribute("property")===(m.property==null?null:m.property)&&P.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&P.getAttribute("charset")===(m.charSet==null?null:m.charSet)){se.splice(Ee,1);break t}}P=T.createElement(w),Ma(P,w,m),T.head.appendChild(P);break;default:throw Error(r(468,w))}P[pe]=l,jn(P),w=P}l.stateNode=w}else dR(T,l.type,l.stateNode);else l.stateNode=uR(T,w,l.memoizedProps);else P!==w?(P===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):P.count--,w===null?dR(T,l.type,l.stateNode):uR(T,w,l.memoizedProps)):w===null&&l.stateNode!==null&&S_(l,l.memoizedProps,m.memoizedProps)}break;case 27:Mi(d,l),Pi(l),w&512&&(Xr||m===null||bs(m,m.return)),m!==null&&w&4&&S_(l,l.memoizedProps,m.memoizedProps);break;case 5:if(Mi(d,l),Pi(l),w&512&&(Xr||m===null||bs(m,m.return)),l.flags&32){T=l.stateNode;try{Ql(T,"")}catch(mt){Sr(l,l.return,mt)}}w&4&&l.stateNode!=null&&(T=l.memoizedProps,S_(l,T,m!==null?m.memoizedProps:T)),w&1024&&(k_=!0);break;case 6:if(Mi(d,l),Pi(l),w&4){if(l.stateNode===null)throw Error(r(162));w=l.memoizedProps,m=l.stateNode;try{m.nodeValue=w}catch(mt){Sr(l,l.return,mt)}}break;case 3:if(_y=null,T=Io,Io=vy(d.containerInfo),Mi(d,l),Io=T,Pi(l),w&4&&m!==null&&m.memoizedState.isDehydrated)try{Zp(d.containerInfo)}catch(mt){Sr(l,l.return,mt)}k_&&(k_=!1,y3(l));break;case 4:w=Io,Io=vy(l.stateNode.containerInfo),Mi(d,l),Pi(l),Io=w;break;case 12:Mi(d,l),Pi(l);break;case 13:Mi(d,l),Pi(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(D_=de()),w&4&&(w=l.updateQueue,w!==null&&(l.updateQueue=null,A_(l,w)));break;case 22:T=l.memoizedState!==null;var Ue=m!==null&&m.memoizedState!==null,ut=pl,_t=Xr;if(pl=ut||T,Xr=_t||Ue,Mi(d,l),Xr=_t,pl=ut,Pi(l),w&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(m===null||Ue||pl||Xr||zc(l)),m=null,d=l;;){if(d.tag===5||d.tag===26){if(m===null){Ue=m=d;try{if(P=Ue.stateNode,T)se=P.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{Ee=Ue.stateNode;var kt=Ue.memoizedProps.style,pt=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;Ee.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(mt){Sr(Ue,Ue.return,mt)}}}else if(d.tag===6){if(m===null){Ue=d;try{Ue.stateNode.nodeValue=T?"":Ue.memoizedProps}catch(mt){Sr(Ue,Ue.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}w&4&&(w=l.updateQueue,w!==null&&(m=w.retryQueue,m!==null&&(w.retryQueue=null,A_(l,m))));break;case 19:Mi(d,l),Pi(l),w&4&&(w=l.updateQueue,w!==null&&(l.updateQueue=null,A_(l,w)));break;case 30:break;case 21:break;default:Mi(d,l),Pi(l)}}function Pi(l){var d=l.flags;if(d&2){try{for(var m,w=l.return;w!==null;){if(u3(w)){m=w;break}w=w.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var T=m.stateNode,P=E_(l);oy(l,P,T);break;case 5:var se=m.stateNode;m.flags&32&&(Ql(se,""),m.flags&=-33);var Ee=E_(l);oy(l,Ee,se);break;case 3:case 4:var Ue=m.stateNode.containerInfo,ut=E_(l);C_(l,ut,Ue);break;default:throw Error(r(161))}}catch(_t){Sr(l,l.return,_t)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function y3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;y3(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function yu(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)f3(l,d.alternate,d),d=d.sibling}function zc(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:gu(4,d,d.return),zc(d);break;case 1:bs(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&s3(d,d.return,m),zc(d);break;case 27:zp(d.stateNode);case 26:case 5:bs(d,d.return),zc(d);break;case 22:d.memoizedState===null&&zc(d);break;case 30:zc(d);break;default:zc(d)}l=l.sibling}}function bu(l,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var w=d.alternate,T=l,P=d,se=P.flags;switch(P.tag){case 0:case 11:case 15:bu(T,P,m),Ip(4,P);break;case 1:if(bu(T,P,m),w=P,T=w.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ut){Sr(w,w.return,ut)}if(w=P,T=w.updateQueue,T!==null){var Ee=w.stateNode;try{var Ue=T.shared.hiddenCallbacks;if(Ue!==null)for(T.shared.hiddenCallbacks=null,T=0;T<Ue.length;T++)GA(Ue[T],Ee)}catch(ut){Sr(w,w.return,ut)}}m&&se&64&&o3(P),Op(P,P.return);break;case 27:c3(P);case 26:case 5:bu(T,P,m),m&&w===null&&se&4&&l3(P),Op(P,P.return);break;case 12:bu(T,P,m);break;case 13:bu(T,P,m),m&&se&4&&m3(T,P);break;case 22:P.memoizedState===null&&bu(T,P,m),Op(P,P.return);break;case 30:break;default:bu(T,P,m)}d=d.sibling}}function T_(l,d){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&yp(m))}function R_(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&yp(l))}function vs(l,d,m,w){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)b3(l,d,m,w),d=d.sibling}function b3(l,d,m,w){var T=d.flags;switch(d.tag){case 0:case 11:case 15:vs(l,d,m,w),T&2048&&Ip(9,d);break;case 1:vs(l,d,m,w);break;case 3:vs(l,d,m,w),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&yp(l)));break;case 12:if(T&2048){vs(l,d,m,w),l=d.stateNode;try{var P=d.memoizedProps,se=P.id,Ee=P.onPostCommit;typeof Ee=="function"&&Ee(se,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Ue){Sr(d,d.return,Ue)}}else vs(l,d,m,w);break;case 13:vs(l,d,m,w);break;case 23:break;case 22:P=d.stateNode,se=d.alternate,d.memoizedState!==null?P._visibility&2?vs(l,d,m,w):Dp(l,d):P._visibility&2?vs(l,d,m,w):(P._visibility|=2,lf(l,d,m,w,(d.subtreeFlags&10256)!==0)),T&2048&&T_(se,d);break;case 24:vs(l,d,m,w),T&2048&&R_(d.alternate,d);break;default:vs(l,d,m,w)}}function lf(l,d,m,w,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var P=l,se=d,Ee=m,Ue=w,ut=se.flags;switch(se.tag){case 0:case 11:case 15:lf(P,se,Ee,Ue,T),Ip(8,se);break;case 23:break;case 22:var _t=se.stateNode;se.memoizedState!==null?_t._visibility&2?lf(P,se,Ee,Ue,T):Dp(P,se):(_t._visibility|=2,lf(P,se,Ee,Ue,T)),T&&ut&2048&&T_(se.alternate,se);break;case 24:lf(P,se,Ee,Ue,T),T&&ut&2048&&R_(se.alternate,se);break;default:lf(P,se,Ee,Ue,T)}d=d.sibling}}function Dp(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=l,w=d,T=w.flags;switch(w.tag){case 22:Dp(m,w),T&2048&&T_(w.alternate,w);break;case 24:Dp(m,w),T&2048&&R_(w.alternate,w);break;default:Dp(m,w)}d=d.sibling}}var jp=8192;function uf(l){if(l.subtreeFlags&jp)for(l=l.child;l!==null;)v3(l),l=l.sibling}function v3(l){switch(l.tag){case 26:uf(l),l.flags&jp&&l.memoizedState!==null&&B7(Io,l.memoizedState,l.memoizedProps);break;case 5:uf(l);break;case 3:case 4:var d=Io;Io=vy(l.stateNode.containerInfo),uf(l),Io=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=jp,jp=16777216,uf(l),jp=d):uf(l));break;default:uf(l)}}function w3(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Mp(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var w=d[m];wa=w,x3(w,l)}w3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)_3(l),l=l.sibling}function _3(l){switch(l.tag){case 0:case 11:case 15:Mp(l),l.flags&2048&&gu(9,l,l.return);break;case 3:Mp(l);break;case 12:Mp(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,sy(l)):Mp(l);break;default:Mp(l)}}function sy(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var w=d[m];wa=w,x3(w,l)}w3(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:gu(8,d,d.return),sy(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,sy(d));break;default:sy(d)}l=l.sibling}}function x3(l,d){for(;wa!==null;){var m=wa;switch(m.tag){case 0:case 11:case 15:gu(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var w=m.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:yp(m.memoizedState.cache)}if(w=m.child,w!==null)w.return=m,wa=w;else e:for(m=l;wa!==null;){w=wa;var T=w.sibling,P=w.return;if(h3(w),w===m){wa=null;break e}if(T!==null){T.return=P,wa=T;break e}wa=P}}}var n7={getCacheForType:function(l){var d=qa(ua),m=d.data.get(l);return m===void 0&&(m=l(),d.data.set(l,m)),m}},r7=typeof WeakMap=="function"?WeakMap:Map,sr=0,Ar=null,qn=null,Kn=0,lr=0,Fi=null,vu=!1,cf=!1,N_=!1,gl=0,Vr=0,wu=0,Uc=0,I_=0,io=0,df=0,Pp=null,bi=null,O_=!1,D_=0,ly=1/0,uy=null,_u=null,ja=0,xu=null,ff=null,hf=0,j_=0,M_=null,S3=null,Fp=0,P_=null;function Li(){if((sr&2)!==0&&Kn!==0)return Kn&-Kn;if(ie.T!==null){var l=Qd;return l!==0?l:q_()}return U()}function E3(){io===0&&(io=(Kn&536870912)===0||er?yt():536870912);var l=ao.current;return l!==null&&(l.flags|=32),io}function $i(l,d,m){(l===Ar&&(lr===2||lr===9)||l.cancelPendingCommit!==null)&&(pf(l,0),Su(l,Kn,io,!1)),et(l,m),((sr&2)===0||l!==Ar)&&(l===Ar&&((sr&2)===0&&(Uc|=m),Vr===4&&Su(l,Kn,io,!1)),ws(l))}function C3(l,d,m){if((sr&6)!==0)throw Error(r(327));var w=!m&&(d&124)===0&&(d&l.expiredLanes)===0||le(l,d),T=w?o7(l,d):$_(l,d,!0),P=w;do{if(T===0){cf&&!w&&Su(l,d,0,!1);break}else{if(m=l.current.alternate,P&&!a7(m)){T=$_(l,d,!1),P=!1;continue}if(T===2){if(P=d,l.errorRecoveryDisabledLanes&P)var se=0;else se=l.pendingLanes&-536870913,se=se!==0?se:se&536870912?536870912:0;if(se!==0){d=se;e:{var Ee=l;T=Pp;var Ue=Ee.current.memoizedState.isDehydrated;if(Ue&&(pf(Ee,se).flags|=256),se=$_(Ee,se,!1),se!==2){if(N_&&!Ue){Ee.errorRecoveryDisabledLanes|=P,Uc|=P,T=4;break e}P=bi,bi=T,P!==null&&(bi===null?bi=P:bi.push.apply(bi,P))}T=se}if(P=!1,T!==2)continue}}if(T===1){pf(l,0),Su(l,d,0,!0);break}e:{switch(w=l,P=T,P){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:Su(w,d,io,!vu);break e;case 2:bi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=D_+300-de(),10<T)){if(Su(w,d,io,!vu),Ae(w,0,!0)!==0)break e;w.timeoutHandle=eR(k3.bind(null,w,m,bi,uy,O_,d,io,Uc,df,vu,P,2,-0,0),T);break e}k3(w,m,bi,uy,O_,d,io,Uc,df,vu,P,0,-0,0)}}break}while(!0);ws(l)}function k3(l,d,m,w,T,P,se,Ee,Ue,ut,_t,kt,pt,mt){if(l.timeoutHandle=-1,kt=d.subtreeFlags,(kt&8192||(kt&16785408)===16785408)&&(Hp={stylesheets:null,count:0,unsuspend:$7},v3(d),kt=z7(),kt!==null)){l.cancelPendingCommit=kt(D3.bind(null,l,d,P,m,w,T,se,Ee,Ue,_t,1,pt,mt)),Su(l,P,se,!ut);return}D3(l,d,P,m,w,T,se,Ee,Ue)}function a7(l){for(var d=l;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var w=0;w<m.length;w++){var T=m[w],P=T.getSnapshot;T=T.value;try{if(!Ua(P(),T))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Su(l,d,m,w){d&=~I_,d&=~Uc,l.suspendedLanes|=d,l.pingedLanes&=~d,w&&(l.warmLanes|=d),w=l.expirationTimes;for(var T=d;0<T;){var P=31-Ut(T),se=1<<P;w[P]=-1,T&=~se}m!==0&&je(l,m,d)}function cy(){return(sr&6)===0?(Lp(0),!1):!0}function F_(){if(qn!==null){if(lr===0)var l=qn.return;else l=qn,ll=Pc=null,e_(l),of=null,Tp=0,l=qn;for(;l!==null;)i3(l.alternate,l),l=l.return;qn=null}}function pf(l,d){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,x7(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),F_(),Ar=l,qn=m=il(l.current,null),Kn=d,lr=0,Fi=null,vu=!1,cf=le(l,d),N_=!1,df=io=I_=Uc=wu=Vr=0,bi=Pp=null,O_=!1,(d&8)!==0&&(d|=d&32);var w=l.entangledLanes;if(w!==0)for(l=l.entanglements,w&=d;0<w;){var T=31-Ut(w),P=1<<T;d|=l[T],w&=~P}return gl=d,yn(),m}function A3(l,d){Fn=null,ie.H=Xg,d===vp||d===zg?(d=HA(),lr=3):d===zA?(d=HA(),lr=4):lr=d===VT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Fi=d,qn===null&&(Vr=1,ny(l,cn(d,l.current)))}function T3(){var l=ie.H;return ie.H=Xg,l===null?Xg:l}function R3(){var l=ie.A;return ie.A=n7,l}function L_(){Vr=4,vu||(Kn&4194048)!==Kn&&ao.current!==null||(cf=!0),(wu&134217727)===0&&(Uc&134217727)===0||Ar===null||Su(Ar,Kn,io,!1)}function $_(l,d,m){var w=sr;sr|=2;var T=T3(),P=R3();(Ar!==l||Kn!==d)&&(uy=null,pf(l,d)),d=!1;var se=Vr;e:do try{if(lr!==0&&qn!==null){var Ee=qn,Ue=Fi;switch(lr){case 8:F_(),se=6;break e;case 3:case 2:case 9:case 6:ao.current===null&&(d=!0);var ut=lr;if(lr=0,Fi=null,mf(l,Ee,Ue,ut),m&&cf){se=0;break e}break;default:ut=lr,lr=0,Fi=null,mf(l,Ee,Ue,ut)}}i7(),se=Vr;break}catch(_t){A3(l,_t)}while(!0);return d&&l.shellSuspendCounter++,ll=Pc=null,sr=w,ie.H=T,ie.A=P,qn===null&&(Ar=null,Kn=0,yn()),se}function i7(){for(;qn!==null;)N3(qn)}function o7(l,d){var m=sr;sr|=2;var w=T3(),T=R3();Ar!==l||Kn!==d?(uy=null,ly=de()+500,pf(l,d)):cf=le(l,d);e:do try{if(lr!==0&&qn!==null){d=qn;var P=Fi;t:switch(lr){case 1:lr=0,Fi=null,mf(l,d,P,1);break;case 2:case 9:if(UA(P)){lr=0,Fi=null,I3(d);break}d=function(){lr!==2&&lr!==9||Ar!==l||(lr=7),ws(l)},P.then(d,d);break e;case 3:lr=7;break e;case 4:lr=5;break e;case 7:UA(P)?(lr=0,Fi=null,I3(d)):(lr=0,Fi=null,mf(l,d,P,7));break;case 5:var se=null;switch(qn.tag){case 26:se=qn.memoizedState;case 5:case 27:var Ee=qn;if(!se||fR(se)){lr=0,Fi=null;var Ue=Ee.sibling;if(Ue!==null)qn=Ue;else{var ut=Ee.return;ut!==null?(qn=ut,dy(ut)):qn=null}break t}}lr=0,Fi=null,mf(l,d,P,5);break;case 6:lr=0,Fi=null,mf(l,d,P,6);break;case 8:F_(),Vr=6;break e;default:throw Error(r(462))}}s7();break}catch(_t){A3(l,_t)}while(!0);return ll=Pc=null,ie.H=w,ie.A=T,sr=m,qn!==null?0:(Ar=null,Kn=0,yn(),Vr)}function s7(){for(;qn!==null&&!Ce();)N3(qn)}function N3(l){var d=r3(l.alternate,l,gl);l.memoizedProps=l.pendingProps,d===null?dy(l):qn=d}function I3(l){var d=l,m=d.alternate;switch(d.tag){case 15:case 0:d=XT(m,d,d.pendingProps,d.type,void 0,Kn);break;case 11:d=XT(m,d,d.pendingProps,d.type.render,d.ref,Kn);break;case 5:e_(d);default:i3(m,d),d=qn=OA(d,gl),d=r3(m,d,gl)}l.memoizedProps=l.pendingProps,d===null?dy(l):qn=d}function mf(l,d,m,w){ll=Pc=null,e_(d),of=null,Tp=0;var T=d.return;try{if(YB(l,T,d,m,Kn)){Vr=1,ny(l,cn(m,l.current)),qn=null;return}}catch(P){if(T!==null)throw qn=T,P;Vr=1,ny(l,cn(m,l.current)),qn=null;return}d.flags&32768?(er||w===1?l=!0:cf||(Kn&536870912)!==0?l=!1:(vu=l=!0,(w===2||w===9||w===3||w===6)&&(w=ao.current,w!==null&&w.tag===13&&(w.flags|=16384))),O3(d,l)):dy(d)}function dy(l){var d=l;do{if((d.flags&32768)!==0){O3(d,vu);return}l=d.return;var m=JB(d.alternate,d,gl);if(m!==null){qn=m;return}if(d=d.sibling,d!==null){qn=d;return}qn=d=l}while(d!==null);Vr===0&&(Vr=5)}function O3(l,d){do{var m=QB(l.alternate,l);if(m!==null){m.flags&=32767,qn=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(l=l.sibling,l!==null)){qn=l;return}qn=l=m}while(l!==null);Vr=6,qn=null}function D3(l,d,m,w,T,P,se,Ee,Ue){l.cancelPendingCommit=null;do fy();while(ja!==0);if((sr&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(P=d.lanes|d.childLanes,P|=Oa,me(l,m,P,se,Ee,Ue),l===Ar&&(qn=Ar=null,Kn=0),ff=d,xu=l,hf=m,j_=P,M_=T,S3=w,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,d7(Le,function(){return L3(),null})):(l.callbackNode=null,l.callbackPriority=0),w=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||w){w=ie.T,ie.T=null,T=te.p,te.p=2,se=sr,sr|=4;try{e7(l,d,m)}finally{sr=se,te.p=T,ie.T=w}}ja=1,j3(),M3(),P3()}}function j3(){if(ja===1){ja=0;var l=xu,d=ff,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=ie.T,ie.T=null;var w=te.p;te.p=2;var T=sr;sr|=4;try{g3(d,l);var P=X_,se=ue(l.containerInfo),Ee=P.focusedElem,Ue=P.selectionRange;if(se!==Ee&&Ee&&Ee.ownerDocument&&ne(Ee.ownerDocument.documentElement,Ee)){if(Ue!==null&&we(Ee)){var ut=Ue.start,_t=Ue.end;if(_t===void 0&&(_t=ut),"selectionStart"in Ee)Ee.selectionStart=ut,Ee.selectionEnd=Math.min(_t,Ee.value.length);else{var kt=Ee.ownerDocument||document,pt=kt&&kt.defaultView||window;if(pt.getSelection){var mt=pt.getSelection(),bn=Ee.textContent.length,fn=Math.min(Ue.start,bn),yr=Ue.end===void 0?fn:Math.min(Ue.end,bn);!mt.extend&&fn>yr&&(se=yr,yr=fn,fn=se);var nt=K(Ee,fn),Ze=K(Ee,yr);if(nt&&Ze&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==Ze.node||mt.focusOffset!==Ze.offset)){var lt=kt.createRange();lt.setStart(nt.node,nt.offset),mt.removeAllRanges(),fn>yr?(mt.addRange(lt),mt.extend(Ze.node,Ze.offset)):(lt.setEnd(Ze.node,Ze.offset),mt.addRange(lt))}}}}for(kt=[],mt=Ee;mt=mt.parentNode;)mt.nodeType===1&&kt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof Ee.focus=="function"&&Ee.focus(),Ee=0;Ee<kt.length;Ee++){var St=kt[Ee];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}Ey=!!Y_,X_=Y_=null}finally{sr=T,te.p=w,ie.T=m}}l.current=d,ja=2}}function M3(){if(ja===2){ja=0;var l=xu,d=ff,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=ie.T,ie.T=null;var w=te.p;te.p=2;var T=sr;sr|=4;try{f3(l,d.alternate,d)}finally{sr=T,te.p=w,ie.T=m}}ja=3}}function P3(){if(ja===4||ja===3){ja=0,Ne();var l=xu,d=ff,m=hf,w=S3;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?ja=5:(ja=0,ff=xu=null,F3(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(_u=null),ye(m),d=d.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Et,d,void 0,(d.current.flags&128)===128)}catch{}if(w!==null){d=ie.T,T=te.p,te.p=2,ie.T=null;try{for(var P=l.onRecoverableError,se=0;se<w.length;se++){var Ee=w[se];P(Ee.value,{componentStack:Ee.stack})}}finally{ie.T=d,te.p=T}}(hf&3)!==0&&fy(),ws(l),T=l.pendingLanes,(m&4194090)!==0&&(T&42)!==0?l===P_?Fp++:(Fp=0,P_=l):Fp=0,Lp(0)}}function F3(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,yp(d)))}function fy(l){return j3(),M3(),P3(),L3()}function L3(){if(ja!==5)return!1;var l=xu,d=j_;j_=0;var m=ye(hf),w=ie.T,T=te.p;try{te.p=32>m?32:m,ie.T=null,m=M_,M_=null;var P=xu,se=hf;if(ja=0,ff=xu=null,hf=0,(sr&6)!==0)throw Error(r(331));var Ee=sr;if(sr|=4,_3(P.current),b3(P,P.current,se,m),sr=Ee,Lp(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Et,P)}catch{}return!0}finally{te.p=T,ie.T=w,F3(l,d)}}function $3(l,d,m){d=cn(m,d),d=p_(l.stateNode,d,2),l=fu(l,d,2),l!==null&&(et(l,2),ws(l))}function Sr(l,d,m){if(l.tag===3)$3(l,l,m);else for(;d!==null;){if(d.tag===3){$3(d,l,m);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(_u===null||!_u.has(w))){l=cn(m,l),m=qT(2),w=fu(d,m,2),w!==null&&(HT(m,w,d,l),et(w,2),ws(w));break}}d=d.return}}function B_(l,d,m){var w=l.pingCache;if(w===null){w=l.pingCache=new r7;var T=new Set;w.set(d,T)}else T=w.get(d),T===void 0&&(T=new Set,w.set(d,T));T.has(m)||(N_=!0,T.add(m),l=l7.bind(null,l,d,m),d.then(l,l))}function l7(l,d,m){var w=l.pingCache;w!==null&&w.delete(d),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,Ar===l&&(Kn&m)===m&&(Vr===4||Vr===3&&(Kn&62914560)===Kn&&300>de()-D_?(sr&2)===0&&pf(l,0):I_|=m,df===Kn&&(df=0)),ws(l)}function B3(l,d){d===0&&(d=M()),l=No(l,d),l!==null&&(et(l,d),ws(l))}function u7(l){var d=l.memoizedState,m=0;d!==null&&(m=d.retryLane),B3(l,m)}function c7(l,d){var m=0;switch(l.tag){case 13:var w=l.stateNode,T=l.memoizedState;T!==null&&(m=T.retryLane);break;case 19:w=l.stateNode;break;case 22:w=l.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(d),B3(l,m)}function d7(l,d){return Te(l,d)}var hy=null,gf=null,z_=!1,py=!1,U_=!1,qc=0;function ws(l){l!==gf&&l.next===null&&(gf===null?hy=gf=l:gf=gf.next=l),py=!0,z_||(z_=!0,h7())}function Lp(l,d){if(!U_&&py){U_=!0;do for(var m=!1,w=hy;w!==null;){if(l!==0){var T=w.pendingLanes;if(T===0)var P=0;else{var se=w.suspendedLanes,Ee=w.pingedLanes;P=(1<<31-Ut(42|l)+1)-1,P&=T&~(se&~Ee),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(m=!0,H3(w,P))}else P=Kn,P=Ae(w,w===Ar?P:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(P&3)===0||le(w,P)||(m=!0,H3(w,P));w=w.next}while(m);U_=!1}}function f7(){z3()}function z3(){py=z_=!1;var l=0;qc!==0&&(_7()&&(l=qc),qc=0);for(var d=de(),m=null,w=hy;w!==null;){var T=w.next,P=U3(w,d);P===0?(w.next=null,m===null?hy=T:m.next=T,T===null&&(gf=m)):(m=w,(l!==0||(P&3)!==0)&&(py=!0)),w=T}Lp(l)}function U3(l,d){for(var m=l.suspendedLanes,w=l.pingedLanes,T=l.expirationTimes,P=l.pendingLanes&-62914561;0<P;){var se=31-Ut(P),Ee=1<<se,Ue=T[se];Ue===-1?((Ee&m)===0||(Ee&w)!==0)&&(T[se]=ct(Ee,d)):Ue<=d&&(l.expiredLanes|=Ee),P&=~Ee}if(d=Ar,m=Kn,m=Ae(l,l===d?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),w=l.callbackNode,m===0||l===d&&(lr===2||lr===9)||l.cancelPendingCommit!==null)return w!==null&&w!==null&&B(w),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||le(l,m)){if(d=m&-m,d===l.callbackPriority)return d;switch(w!==null&&B(w),ye(m)){case 2:case 8:m=xe;break;case 32:m=Le;break;case 268435456:m=Ve;break;default:m=Le}return w=q3.bind(null,l),m=Te(m,w),l.callbackPriority=d,l.callbackNode=m,d}return w!==null&&w!==null&&B(w),l.callbackPriority=2,l.callbackNode=null,2}function q3(l,d){if(ja!==0&&ja!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(fy()&&l.callbackNode!==m)return null;var w=Kn;return w=Ae(l,l===Ar?w:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),w===0?null:(C3(l,w,d),U3(l,de()),l.callbackNode!=null&&l.callbackNode===m?q3.bind(null,l):null)}function H3(l,d){if(fy())return null;C3(l,d,!0)}function h7(){S7(function(){(sr&6)!==0?Te(J,f7):z3()})}function q_(){return qc===0&&(qc=yt()),qc}function V3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Ys(""+l)}function G3(l,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,l.id&&m.setAttribute("form",l.id),d.parentNode.insertBefore(m,d),l=new FormData(l),m.parentNode.removeChild(m),l}function p7(l,d,m,w,T){if(d==="submit"&&m&&m.stateNode===T){var P=V3((T[fe]||null).action),se=w.submitter;se&&(d=(d=se[fe]||null)?V3(d.formAction):se.getAttribute("formAction"),d!==null&&(P=d,se=null));var Ee=new Md("action","action",null,w,T);l.push({event:Ee,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(qc!==0){var Ue=se?G3(T,se):new FormData(T);u_(m,{pending:!0,data:Ue,method:T.method,action:P},null,Ue)}}else typeof P=="function"&&(Ee.preventDefault(),Ue=se?G3(T,se):new FormData(T),u_(m,{pending:!0,data:Ue,method:T.method,action:P},P,Ue))},currentTarget:T}]})}}for(var H_=0;H_<Ht.length;H_++){var V_=Ht[H_],m7=V_.toLowerCase(),g7=V_[0].toUpperCase()+V_.slice(1);Ot(m7,"on"+g7)}Ot(ft,"onAnimationEnd"),Ot(gt,"onAnimationIteration"),Ot(bt,"onAnimationStart"),Ot("dblclick","onDoubleClick"),Ot("focusin","onFocus"),Ot("focusout","onBlur"),Ot(wt,"onTransitionRun"),Ot(Mt,"onTransitionStart"),Ot(qt,"onTransitionCancel"),Ot(It,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $p="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($p));function W3(l,d){d=(d&4)!==0;for(var m=0;m<l.length;m++){var w=l[m],T=w.event;w=w.listeners;e:{var P=void 0;if(d)for(var se=w.length-1;0<=se;se--){var Ee=w[se],Ue=Ee.instance,ut=Ee.currentTarget;if(Ee=Ee.listener,Ue!==P&&T.isPropagationStopped())break e;P=Ee,T.currentTarget=ut;try{P(T)}catch(_t){ty(_t)}T.currentTarget=null,P=Ue}else for(se=0;se<w.length;se++){if(Ee=w[se],Ue=Ee.instance,ut=Ee.currentTarget,Ee=Ee.listener,Ue!==P&&T.isPropagationStopped())break e;P=Ee,T.currentTarget=ut;try{P(T)}catch(_t){ty(_t)}T.currentTarget=null,P=Ue}}}}function Hn(l,d){var m=d[ot];m===void 0&&(m=d[ot]=new Set);var w=l+"__bubble";m.has(w)||(K3(d,l,2,!1),m.add(w))}function G_(l,d,m){var w=0;d&&(w|=4),K3(m,l,w,d)}var my="_reactListening"+Math.random().toString(36).slice(2);function W_(l){if(!l[my]){l[my]=!0,ti.forEach(function(m){m!=="selectionchange"&&(y7.has(m)||G_(m,!1,l),G_(m,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[my]||(d[my]=!0,G_("selectionchange",!1,d))}}function K3(l,d,m,w){switch(bR(d)){case 2:var T=H7;break;case 8:T=V7;break;default:T=sx}m=T.bind(null,d,m,l),T=void 0,!Qh||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),w?T!==void 0?l.addEventListener(d,m,{capture:!0,passive:T}):l.addEventListener(d,m,!0):T!==void 0?l.addEventListener(d,m,{passive:T}):l.addEventListener(d,m,!1)}function K_(l,d,m,w,T){var P=w;if((d&1)===0&&(d&2)===0&&w!==null)e:for(;;){if(w===null)return;var se=w.tag;if(se===3||se===4){var Ee=w.stateNode.containerInfo;if(Ee===T)break;if(se===4)for(se=w.return;se!==null;){var Ue=se.tag;if((Ue===3||Ue===4)&&se.stateNode.containerInfo===T)return;se=se.return}for(;Ee!==null;){if(se=In(Ee),se===null)return;if(Ue=se.tag,Ue===5||Ue===6||Ue===26||Ue===27){w=P=se;continue e}Ee=Ee.parentNode}}w=w.return}tu(function(){var ut=P,_t=Dd(m),kt=[];e:{var pt=$t.get(l);if(pt!==void 0){var mt=Md,bn=l;switch(l){case"keypress":if(au(m)===0)break e;case"keydown":case"keyup":mt=qd;break;case"focusin":bn="focus",mt=iu;break;case"focusout":bn="blur",mt=iu;break;case"beforeblur":case"afterblur":mt=iu;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=Eg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=op;break;case ft:case gt:case bt:mt=Cg;break;case It:mt=sp;break;case"scroll":case"scrollend":mt=Pd;break;case"wheel":mt=Vd;break;case"copy":case"cut":case"paste":mt=zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=ip;break;case"toggle":case"beforetoggle":mt=Tg}var fn=(d&4)!==0,yr=!fn&&(l==="scroll"||l==="scrollend"),nt=fn?pt!==null?pt+"Capture":null:pt;fn=[];for(var Ze=ut,lt;Ze!==null;){var St=Ze;if(lt=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||lt===null||nt===null||(St=Qs(Ze,nt),St!=null&&fn.push(Bp(Ze,St,lt))),yr)break;Ze=Ze.return}0<fn.length&&(pt=new mt(pt,bn,null,m,_t),kt.push({event:pt,listeners:fn}))}}if((d&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",pt&&m!==Ji&&(bn=m.relatedTarget||m.fromElement)&&(In(bn)||bn[Fe]))break e;if((mt||pt)&&(pt=_t.window===_t?_t:(pt=_t.ownerDocument)?pt.defaultView||pt.parentWindow:window,mt?(bn=m.relatedTarget||m.toElement,mt=ut,bn=bn?In(bn):null,bn!==null&&(yr=i(bn),fn=bn.tag,bn!==yr||fn!==5&&fn!==27&&fn!==6)&&(bn=null)):(mt=null,bn=ut),mt!==bn)){if(fn=Ld,St="onMouseLeave",nt="onMouseEnter",Ze="mouse",(l==="pointerout"||l==="pointerover")&&(fn=ip,St="onPointerLeave",nt="onPointerEnter",Ze="pointer"),yr=mt==null?pt:hr(mt),lt=bn==null?pt:hr(bn),pt=new fn(St,Ze+"leave",mt,m,_t),pt.target=yr,pt.relatedTarget=lt,St=null,In(_t)===ut&&(fn=new fn(nt,Ze+"enter",bn,m,_t),fn.target=lt,fn.relatedTarget=yr,St=fn),yr=St,mt&&bn)t:{for(fn=mt,nt=bn,Ze=0,lt=fn;lt;lt=yf(lt))Ze++;for(lt=0,St=nt;St;St=yf(St))lt++;for(;0<Ze-lt;)fn=yf(fn),Ze--;for(;0<lt-Ze;)nt=yf(nt),lt--;for(;Ze--;){if(fn===nt||nt!==null&&fn===nt.alternate)break t;fn=yf(fn),nt=yf(nt)}fn=null}else fn=null;mt!==null&&Z3(kt,pt,mt,fn,!1),bn!==null&&yr!==null&&Z3(kt,yr,bn,fn,!0)}}e:{if(pt=ut?hr(ut):window,mt=pt.nodeName&&pt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&pt.type==="file")var Qt=Nc;else if(Kd(pt))if(eo)Qt=lu;else{Qt=al;var $n=jg}else mt=pt.nodeName,!mt||mt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?ut&&Jh(ut.elementType)&&(Qt=Nc):Qt=fp;if(Qt&&(Qt=Qt(l,ut))){dp(kt,Qt,m,_t);break e}$n&&$n(l,pt,ut),l==="focusout"&&ut&&pt.type==="number"&&ut.memoizedProps.value!=null&&Xl(pt,"number",pt.value)}switch($n=ut?hr(ut):window,l){case"focusin":(Kd($n)||$n.contentEditable==="true")&&($e=$n,We=ut,Ye=null);break;case"focusout":Ye=We=$e=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,He(kt,m,_t);break;case"selectionchange":if(Me)break;case"keydown":case"keyup":He(kt,m,_t)}var on;if(Tc)e:{switch(l){case"compositionstart":var mn="onCompositionStart";break e;case"compositionend":mn="onCompositionEnd";break e;case"compositionupdate":mn="onCompositionUpdate";break e}mn=void 0}else rl?cp(l,m)&&(mn="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(mn="onCompositionStart");mn&&(Gd&&m.locale!=="ko"&&(rl||mn!=="onCompositionStart"?mn==="onCompositionEnd"&&rl&&(on=ru()):(Qi=_t,jd="value"in Qi?Qi.value:Qi.textContent,rl=!0)),$n=gy(ut,mn),0<$n.length&&(mn=new Ud(mn,l,null,m,_t),kt.push({event:mn,listeners:$n}),on?mn.data=on:(on=Ng(m),on!==null&&(mn.data=on)))),(on=T1?Ig(l,m):R1(l,m))&&(mn=gy(ut,"onBeforeInput"),0<mn.length&&($n=new Ud("onBeforeInput","beforeinput",null,m,_t),kt.push({event:$n,listeners:mn}),$n.data=on)),p7(kt,l,ut,m,_t)}W3(kt,d)})}function Bp(l,d,m){return{instance:l,listener:d,currentTarget:m}}function gy(l,d){for(var m=d+"Capture",w=[];l!==null;){var T=l,P=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||P===null||(T=Qs(l,m),T!=null&&w.unshift(Bp(l,T,P)),T=Qs(l,d),T!=null&&w.push(Bp(l,T,P))),l.tag===3)return w;l=l.return}return[]}function yf(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Z3(l,d,m,w,T){for(var P=d._reactName,se=[];m!==null&&m!==w;){var Ee=m,Ue=Ee.alternate,ut=Ee.stateNode;if(Ee=Ee.tag,Ue!==null&&Ue===w)break;Ee!==5&&Ee!==26&&Ee!==27||ut===null||(Ue=ut,T?(ut=Qs(m,P),ut!=null&&se.unshift(Bp(m,ut,Ue))):T||(ut=Qs(m,P),ut!=null&&se.push(Bp(m,ut,Ue)))),m=m.return}se.length!==0&&l.push({event:d,listeners:se})}var b7=/\r\n?/g,v7=/\u0000|\uFFFD/g;function Y3(l){return(typeof l=="string"?l:""+l).replace(b7,`
`).replace(v7,"")}function X3(l,d){return d=Y3(d),Y3(l)===d}function yy(){}function gr(l,d,m,w,T,P){switch(m){case"children":typeof w=="string"?d==="body"||d==="textarea"&&w===""||Ql(l,w):(typeof w=="number"||typeof w=="bigint")&&d!=="body"&&Ql(l,""+w);break;case"className":Ws(l,"class",w);break;case"tabIndex":Ws(l,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Ws(l,m,w);break;case"style":xg(l,w,P);break;case"data":if(d!=="object"){Ws(l,"data",w);break}case"src":case"href":if(w===""&&(d!=="a"||m!=="href")){l.removeAttribute(m);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){l.removeAttribute(m);break}w=Ys(""+w),l.setAttribute(m,w);break;case"action":case"formAction":if(typeof w=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(m==="formAction"?(d!=="input"&&gr(l,d,"name",T.name,T,null),gr(l,d,"formEncType",T.formEncType,T,null),gr(l,d,"formMethod",T.formMethod,T,null),gr(l,d,"formTarget",T.formTarget,T,null)):(gr(l,d,"encType",T.encType,T,null),gr(l,d,"method",T.method,T,null),gr(l,d,"target",T.target,T,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){l.removeAttribute(m);break}w=Ys(""+w),l.setAttribute(m,w);break;case"onClick":w!=null&&(l.onclick=yy);break;case"onScroll":w!=null&&Hn("scroll",l);break;case"onScrollEnd":w!=null&&Hn("scrollend",l);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"multiple":l.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":l.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){l.removeAttribute("xlink:href");break}m=Ys(""+w),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,""+w):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":w===!0?l.setAttribute(m,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?l.setAttribute(m,w):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?l.setAttribute(m,w):l.removeAttribute(m);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?l.removeAttribute(m):l.setAttribute(m,w);break;case"popover":Hn("beforetoggle",l),Hn("toggle",l),To(l,"popover",w);break;case"xlinkActuate":Oi(l,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Oi(l,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Oi(l,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Oi(l,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Oi(l,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Oi(l,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":To(l,"is",w);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=ri.get(m)||m,To(l,m,w))}}function Z_(l,d,m,w,T,P){switch(m){case"style":xg(l,w,P);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"children":typeof w=="string"?Ql(l,w):(typeof w=="number"||typeof w=="bigint")&&Ql(l,""+w);break;case"onScroll":w!=null&&Hn("scroll",l);break;case"onScrollEnd":w!=null&&Hn("scrollend",l);break;case"onClick":w!=null&&(l.onclick=yy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!os.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),d=m.slice(2,T?m.length-7:void 0),P=l[fe]||null,P=P!=null?P[m]:null,typeof P=="function"&&l.removeEventListener(d,P,T),typeof w=="function")){typeof P!="function"&&P!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(d,w,T);break e}m in l?l[m]=w:w===!0?l.setAttribute(m,""):To(l,m,w)}}}function Ma(l,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Hn("error",l),Hn("load",l);var w=!1,T=!1,P;for(P in m)if(m.hasOwnProperty(P)){var se=m[P];if(se!=null)switch(P){case"src":w=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:gr(l,d,P,se,m,null)}}T&&gr(l,d,"srcSet",m.srcSet,m,null),w&&gr(l,d,"src",m.src,m,null);return;case"input":Hn("invalid",l);var Ee=P=se=T=null,Ue=null,ut=null;for(w in m)if(m.hasOwnProperty(w)){var _t=m[w];if(_t!=null)switch(w){case"name":T=_t;break;case"type":se=_t;break;case"checked":Ue=_t;break;case"defaultChecked":ut=_t;break;case"value":P=_t;break;case"defaultValue":Ee=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,d));break;default:gr(l,d,w,_t,m,null)}}Yh(l,P,Ee,Ue,ut,se,T,!1),ds(l);return;case"select":Hn("invalid",l),w=se=P=null;for(T in m)if(m.hasOwnProperty(T)&&(Ee=m[T],Ee!=null))switch(T){case"value":P=Ee;break;case"defaultValue":se=Ee;break;case"multiple":w=Ee;default:gr(l,d,T,Ee,m,null)}d=P,m=se,l.multiple=!!w,d!=null?Zs(l,!!w,d,!1):m!=null&&Zs(l,!!w,m,!0);return;case"textarea":Hn("invalid",l),P=T=w=null;for(se in m)if(m.hasOwnProperty(se)&&(Ee=m[se],Ee!=null))switch(se){case"value":w=Ee;break;case"defaultValue":T=Ee;break;case"children":P=Ee;break;case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(r(91));break;default:gr(l,d,se,Ee,m,null)}Xh(l,w,T,P),ds(l);return;case"option":for(Ue in m)if(m.hasOwnProperty(Ue)&&(w=m[Ue],w!=null))switch(Ue){case"selected":l.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:gr(l,d,Ue,w,m,null)}return;case"dialog":Hn("beforetoggle",l),Hn("toggle",l),Hn("cancel",l),Hn("close",l);break;case"iframe":case"object":Hn("load",l);break;case"video":case"audio":for(w=0;w<$p.length;w++)Hn($p[w],l);break;case"image":Hn("error",l),Hn("load",l);break;case"details":Hn("toggle",l);break;case"embed":case"source":case"link":Hn("error",l),Hn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in m)if(m.hasOwnProperty(ut)&&(w=m[ut],w!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:gr(l,d,ut,w,m,null)}return;default:if(Jh(d)){for(_t in m)m.hasOwnProperty(_t)&&(w=m[_t],w!==void 0&&Z_(l,d,_t,w,m,void 0));return}}for(Ee in m)m.hasOwnProperty(Ee)&&(w=m[Ee],w!=null&&gr(l,d,Ee,w,m,null))}function w7(l,d,m,w){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,P=null,se=null,Ee=null,Ue=null,ut=null,_t=null;for(mt in m){var kt=m[mt];if(m.hasOwnProperty(mt)&&kt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":Ue=kt;default:w.hasOwnProperty(mt)||gr(l,d,mt,null,w,kt)}}for(var pt in w){var mt=w[pt];if(kt=m[pt],w.hasOwnProperty(pt)&&(mt!=null||kt!=null))switch(pt){case"type":P=mt;break;case"name":T=mt;break;case"checked":ut=mt;break;case"defaultChecked":_t=mt;break;case"value":se=mt;break;case"defaultValue":Ee=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,d));break;default:mt!==kt&&gr(l,d,pt,mt,w,kt)}}Yl(l,se,Ee,Ue,ut,_t,P,T);return;case"select":mt=se=Ee=pt=null;for(P in m)if(Ue=m[P],m.hasOwnProperty(P)&&Ue!=null)switch(P){case"value":break;case"multiple":mt=Ue;default:w.hasOwnProperty(P)||gr(l,d,P,null,w,Ue)}for(T in w)if(P=w[T],Ue=m[T],w.hasOwnProperty(T)&&(P!=null||Ue!=null))switch(T){case"value":pt=P;break;case"defaultValue":Ee=P;break;case"multiple":se=P;default:P!==Ue&&gr(l,d,T,P,w,Ue)}d=Ee,m=se,w=mt,pt!=null?Zs(l,!!m,pt,!1):!!w!=!!m&&(d!=null?Zs(l,!!m,d,!0):Zs(l,!!m,m?[]:"",!1));return;case"textarea":mt=pt=null;for(Ee in m)if(T=m[Ee],m.hasOwnProperty(Ee)&&T!=null&&!w.hasOwnProperty(Ee))switch(Ee){case"value":break;case"children":break;default:gr(l,d,Ee,null,w,T)}for(se in w)if(T=w[se],P=m[se],w.hasOwnProperty(se)&&(T!=null||P!=null))switch(se){case"value":pt=T;break;case"defaultValue":mt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==P&&gr(l,d,se,T,w,P)}Jl(l,pt,mt);return;case"option":for(var bn in m)if(pt=m[bn],m.hasOwnProperty(bn)&&pt!=null&&!w.hasOwnProperty(bn))switch(bn){case"selected":l.selected=!1;break;default:gr(l,d,bn,null,w,pt)}for(Ue in w)if(pt=w[Ue],mt=m[Ue],w.hasOwnProperty(Ue)&&pt!==mt&&(pt!=null||mt!=null))switch(Ue){case"selected":l.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:gr(l,d,Ue,pt,w,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in m)pt=m[fn],m.hasOwnProperty(fn)&&pt!=null&&!w.hasOwnProperty(fn)&&gr(l,d,fn,null,w,pt);for(ut in w)if(pt=w[ut],mt=m[ut],w.hasOwnProperty(ut)&&pt!==mt&&(pt!=null||mt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,d));break;default:gr(l,d,ut,pt,w,mt)}return;default:if(Jh(d)){for(var yr in m)pt=m[yr],m.hasOwnProperty(yr)&&pt!==void 0&&!w.hasOwnProperty(yr)&&Z_(l,d,yr,void 0,w,pt);for(_t in w)pt=w[_t],mt=m[_t],!w.hasOwnProperty(_t)||pt===mt||pt===void 0&&mt===void 0||Z_(l,d,_t,pt,w,mt);return}}for(var nt in m)pt=m[nt],m.hasOwnProperty(nt)&&pt!=null&&!w.hasOwnProperty(nt)&&gr(l,d,nt,null,w,pt);for(kt in w)pt=w[kt],mt=m[kt],!w.hasOwnProperty(kt)||pt===mt||pt==null&&mt==null||gr(l,d,kt,pt,w,mt)}var Y_=null,X_=null;function by(l){return l.nodeType===9?l:l.ownerDocument}function J3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Q3(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function J_(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Q_=null;function _7(){var l=window.event;return l&&l.type==="popstate"?l===Q_?!1:(Q_=l,!0):(Q_=null,!1)}var eR=typeof setTimeout=="function"?setTimeout:void 0,x7=typeof clearTimeout=="function"?clearTimeout:void 0,tR=typeof Promise=="function"?Promise:void 0,S7=typeof queueMicrotask=="function"?queueMicrotask:typeof tR<"u"?function(l){return tR.resolve(null).then(l).catch(E7)}:eR;function E7(l){setTimeout(function(){throw l})}function Eu(l){return l==="head"}function nR(l,d){var m=d,w=0,T=0;do{var P=m.nextSibling;if(l.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(0<w&&8>w){m=w;var se=l.ownerDocument;if(m&1&&zp(se.documentElement),m&2&&zp(se.body),m&4)for(m=se.head,zp(m),se=m.firstChild;se;){var Ee=se.nextSibling,Ue=se.nodeName;se[Vt]||Ue==="SCRIPT"||Ue==="STYLE"||Ue==="LINK"&&se.rel.toLowerCase()==="stylesheet"||m.removeChild(se),se=Ee}}if(T===0){l.removeChild(P),Zp(d);return}T--}else m==="$"||m==="$?"||m==="$!"?T++:w=m.charCodeAt(0)-48;else w=0;m=P}while(m);Zp(d)}function ex(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":ex(m),Xt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function C7(l,d,m,w){for(;l.nodeType===1;){var T=m;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!w&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(w){if(!l[Vt])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(P=l.getAttribute("rel"),P==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(P!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(P=l.getAttribute("src"),(P!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&P&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var P=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===P)return l}else return l;if(l=Oo(l.nextSibling),l===null)break}return null}function k7(l,d,m){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=Oo(l.nextSibling),l===null))return null;return l}function tx(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function A7(l,d){var m=l.ownerDocument;if(l.data!=="$?"||m.readyState==="complete")d();else{var w=function(){d(),m.removeEventListener("DOMContentLoaded",w)};m.addEventListener("DOMContentLoaded",w),l._reactRetry=w}}function Oo(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var nx=null;function rR(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"){if(d===0)return l;d--}else m==="/$"&&d++}l=l.previousSibling}return null}function aR(l,d,m){switch(d=by(m),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function zp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Xt(l)}var oo=new Map,iR=new Set;function vy(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var yl=te.d;te.d={f:T7,r:R7,D:N7,C:I7,L:O7,m:D7,X:M7,S:j7,M:P7};function T7(){var l=yl.f(),d=cy();return l||d}function R7(l){var d=zn(l);d!==null&&d.tag===5&&d.type==="form"?CT(d):yl.r(l)}var bf=typeof document>"u"?null:document;function oR(l,d,m){var w=bf;if(w&&typeof d=="string"&&d){var T=Ba(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),iR.has(T)||(iR.add(T),l={rel:l,crossOrigin:m,href:d},w.querySelector(T)===null&&(d=w.createElement("link"),Ma(d,"link",l),jn(d),w.head.appendChild(d)))}}function N7(l){yl.D(l),oR("dns-prefetch",l,null)}function I7(l,d){yl.C(l,d),oR("preconnect",l,d)}function O7(l,d,m){yl.L(l,d,m);var w=bf;if(w&&l&&d){var T='link[rel="preload"][as="'+Ba(d)+'"]';d==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+Ba(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+Ba(m.imageSizes)+'"]')):T+='[href="'+Ba(l)+'"]';var P=T;switch(d){case"style":P=vf(l);break;case"script":P=wf(l)}oo.has(P)||(l=f({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:l,as:d},m),oo.set(P,l),w.querySelector(T)!==null||d==="style"&&w.querySelector(Up(P))||d==="script"&&w.querySelector(qp(P))||(d=w.createElement("link"),Ma(d,"link",l),jn(d),w.head.appendChild(d)))}}function D7(l,d){yl.m(l,d);var m=bf;if(m&&l){var w=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+Ba(w)+'"][href="'+Ba(l)+'"]',P=T;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=wf(l)}if(!oo.has(P)&&(l=f({rel:"modulepreload",href:l},d),oo.set(P,l),m.querySelector(T)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(qp(P)))return}w=m.createElement("link"),Ma(w,"link",l),jn(w),m.head.appendChild(w)}}}function j7(l,d,m){yl.S(l,d,m);var w=bf;if(w&&l){var T=pr(w).hoistableStyles,P=vf(l);d=d||"default";var se=T.get(P);if(!se){var Ee={loading:0,preload:null};if(se=w.querySelector(Up(P)))Ee.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},m),(m=oo.get(P))&&rx(l,m);var Ue=se=w.createElement("link");jn(Ue),Ma(Ue,"link",l),Ue._p=new Promise(function(ut,_t){Ue.onload=ut,Ue.onerror=_t}),Ue.addEventListener("load",function(){Ee.loading|=1}),Ue.addEventListener("error",function(){Ee.loading|=2}),Ee.loading|=4,wy(se,d,w)}se={type:"stylesheet",instance:se,count:1,state:Ee},T.set(P,se)}}}function M7(l,d){yl.X(l,d);var m=bf;if(m&&l){var w=pr(m).hoistableScripts,T=wf(l),P=w.get(T);P||(P=m.querySelector(qp(T)),P||(l=f({src:l,async:!0},d),(d=oo.get(T))&&ax(l,d),P=m.createElement("script"),jn(P),Ma(P,"link",l),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(T,P))}}function P7(l,d){yl.M(l,d);var m=bf;if(m&&l){var w=pr(m).hoistableScripts,T=wf(l),P=w.get(T);P||(P=m.querySelector(qp(T)),P||(l=f({src:l,async:!0,type:"module"},d),(d=oo.get(T))&&ax(l,d),P=m.createElement("script"),jn(P),Ma(P,"link",l),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(T,P))}}function sR(l,d,m,w){var T=(T=Ie.current)?vy(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=vf(m.href),m=pr(T).hoistableStyles,w=m.get(d),w||(w={type:"style",instance:null,count:0,state:null},m.set(d,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=vf(m.href);var P=pr(T).hoistableStyles,se=P.get(l);if(se||(T=T.ownerDocument||T,se={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(l,se),(P=T.querySelector(Up(l)))&&!P._p&&(se.instance=P,se.state.loading=5),oo.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},oo.set(l,m),P||F7(T,l,m,se.state))),d&&w===null)throw Error(r(528,""));return se}if(d&&w!==null)throw Error(r(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=wf(m),m=pr(T).hoistableScripts,w=m.get(d),w||(w={type:"script",instance:null,count:0,state:null},m.set(d,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function vf(l){return'href="'+Ba(l)+'"'}function Up(l){return'link[rel="stylesheet"]['+l+"]"}function lR(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function F7(l,d,m,w){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?w.loading=1:(d=l.createElement("link"),w.preload=d,d.addEventListener("load",function(){return w.loading|=1}),d.addEventListener("error",function(){return w.loading|=2}),Ma(d,"link",m),jn(d),l.head.appendChild(d))}function wf(l){return'[src="'+Ba(l)+'"]'}function qp(l){return"script[async]"+l}function uR(l,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var w=l.querySelector('style[data-href~="'+Ba(m.href)+'"]');if(w)return d.instance=w,jn(w),w;var T=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return w=(l.ownerDocument||l).createElement("style"),jn(w),Ma(w,"style",T),wy(w,m.precedence,l),d.instance=w;case"stylesheet":T=vf(m.href);var P=l.querySelector(Up(T));if(P)return d.state.loading|=4,d.instance=P,jn(P),P;w=lR(m),(T=oo.get(T))&&rx(w,T),P=(l.ownerDocument||l).createElement("link"),jn(P);var se=P;return se._p=new Promise(function(Ee,Ue){se.onload=Ee,se.onerror=Ue}),Ma(P,"link",w),d.state.loading|=4,wy(P,m.precedence,l),d.instance=P;case"script":return P=wf(m.src),(T=l.querySelector(qp(P)))?(d.instance=T,jn(T),T):(w=m,(T=oo.get(P))&&(w=f({},m),ax(w,T)),l=l.ownerDocument||l,T=l.createElement("script"),jn(T),Ma(T,"link",w),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(w=d.instance,d.state.loading|=4,wy(w,m.precedence,l));return d.instance}function wy(l,d,m){for(var w=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=w.length?w[w.length-1]:null,P=T,se=0;se<w.length;se++){var Ee=w[se];if(Ee.dataset.precedence===d)P=Ee;else if(P!==T)break}P?P.parentNode.insertBefore(l,P.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(l,d.firstChild))}function rx(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function ax(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var _y=null;function cR(l,d,m){if(_y===null){var w=new Map,T=_y=new Map;T.set(m,w)}else T=_y,w=T.get(m),w||(w=new Map,T.set(m,w));if(w.has(l))return w;for(w.set(l,null),m=m.getElementsByTagName(l),T=0;T<m.length;T++){var P=m[T];if(!(P[Vt]||P[pe]||l==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var se=P.getAttribute(d)||"";se=l+se;var Ee=w.get(se);Ee?Ee.push(P):w.set(se,[P])}}return w}function dR(l,d,m){l=l.ownerDocument||l,l.head.insertBefore(m,d==="title"?l.querySelector("head > title"):null)}function L7(l,d,m){if(m===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function fR(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Hp=null;function $7(){}function B7(l,d,m){if(Hp===null)throw Error(r(475));var w=Hp;if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=vf(m.href),P=l.querySelector(Up(T));if(P){l=P._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(w.count++,w=xy.bind(w),l.then(w,w)),d.state.loading|=4,d.instance=P,jn(P);return}P=l.ownerDocument||l,m=lR(m),(T=oo.get(T))&&rx(m,T),P=P.createElement("link"),jn(P);var se=P;se._p=new Promise(function(Ee,Ue){se.onload=Ee,se.onerror=Ue}),Ma(P,"link",m),d.instance=P}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(w.count++,d=xy.bind(w),l.addEventListener("load",d),l.addEventListener("error",d))}}function z7(){if(Hp===null)throw Error(r(475));var l=Hp;return l.stylesheets&&l.count===0&&ix(l,l.stylesheets),0<l.count?function(d){var m=setTimeout(function(){if(l.stylesheets&&ix(l,l.stylesheets),l.unsuspend){var w=l.unsuspend;l.unsuspend=null,w()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(m)}}:null}function xy(){if(this.count--,this.count===0){if(this.stylesheets)ix(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Sy=null;function ix(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Sy=new Map,d.forEach(U7,l),Sy=null,xy.call(l))}function U7(l,d){if(!(d.state.loading&4)){var m=Sy.get(l);if(m)var w=m.get(null);else{m=new Map,Sy.set(l,m);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<T.length;P++){var se=T[P];(se.nodeName==="LINK"||se.getAttribute("media")!=="not all")&&(m.set(se.dataset.precedence,se),w=se)}w&&m.set(null,w)}T=d.instance,se=T.getAttribute("data-precedence"),P=m.get(se)||w,P===w&&m.set(null,T),m.set(se,T),this.count++,w=xy.bind(this),T.addEventListener("load",w),T.addEventListener("error",w),P?P.parentNode.insertBefore(T,P.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var Vp={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function q7(l,d,m,w,T,P,se,Ee){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=w,this.onUncaughtError=T,this.onCaughtError=P,this.onRecoverableError=se,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function hR(l,d,m,w,T,P,se,Ee,Ue,ut,_t,kt){return l=new q7(l,d,m,se,Ee,Ue,ut,kt),d=1,P===!0&&(d|=24),P=ji(3,null,null,d),l.current=P,P.stateNode=l,d=B1(),d.refCount++,l.pooledCache=d,d.refCount++,P.memoizedState={element:w,isDehydrated:m,cache:d},H1(P),l}function pR(l){return l?(l=ms,l):ms}function mR(l,d,m,w,T,P){T=pR(T),w.context===null?w.context=T:w.pendingContext=T,w=du(d),w.payload={element:m},P=P===void 0?null:P,P!==null&&(w.callback=P),m=fu(l,w,d),m!==null&&($i(m,l,d),_p(m,l,d))}function gR(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<d?m:d}}function ox(l,d){gR(l,d),(l=l.alternate)&&gR(l,d)}function yR(l){if(l.tag===13){var d=No(l,67108864);d!==null&&$i(d,l,67108864),ox(l,67108864)}}var Ey=!0;function H7(l,d,m,w){var T=ie.T;ie.T=null;var P=te.p;try{te.p=2,sx(l,d,m,w)}finally{te.p=P,ie.T=T}}function V7(l,d,m,w){var T=ie.T;ie.T=null;var P=te.p;try{te.p=8,sx(l,d,m,w)}finally{te.p=P,ie.T=T}}function sx(l,d,m,w){if(Ey){var T=lx(w);if(T===null)K_(l,d,w,Cy,m),vR(l,w);else if(W7(T,l,d,m,w))w.stopPropagation();else if(vR(l,w),d&4&&-1<G7.indexOf(l)){for(;T!==null;){var P=zn(T);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var se=ve(P.pendingLanes);if(se!==0){var Ee=P;for(Ee.pendingLanes|=2,Ee.entangledLanes|=2;se;){var Ue=1<<31-Ut(se);Ee.entanglements[1]|=Ue,se&=~Ue}ws(P),(sr&6)===0&&(ly=de()+500,Lp(0))}}break;case 13:Ee=No(P,2),Ee!==null&&$i(Ee,P,2),cy(),ox(P,2)}if(P=lx(w),P===null&&K_(l,d,w,Cy,m),P===T)break;T=P}T!==null&&w.stopPropagation()}else K_(l,d,w,null,m)}}function lx(l){return l=Dd(l),ux(l)}var Cy=null;function ux(l){if(Cy=null,l=In(l),l!==null){var d=i(l);if(d===null)l=null;else{var m=d.tag;if(m===13){if(l=o(d),l!==null)return l;l=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return Cy=l,null}function bR(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case J:return 2;case xe:return 8;case Le:case Se:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var cx=!1,Cu=null,ku=null,Au=null,Gp=new Map,Wp=new Map,Tu=[],G7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vR(l,d){switch(l){case"focusin":case"focusout":Cu=null;break;case"dragenter":case"dragleave":ku=null;break;case"mouseover":case"mouseout":Au=null;break;case"pointerover":case"pointerout":Gp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wp.delete(d.pointerId)}}function Kp(l,d,m,w,T,P){return l===null||l.nativeEvent!==P?(l={blockedOn:d,domEventName:m,eventSystemFlags:w,nativeEvent:P,targetContainers:[T]},d!==null&&(d=zn(d),d!==null&&yR(d)),l):(l.eventSystemFlags|=w,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function W7(l,d,m,w,T){switch(d){case"focusin":return Cu=Kp(Cu,l,d,m,w,T),!0;case"dragenter":return ku=Kp(ku,l,d,m,w,T),!0;case"mouseover":return Au=Kp(Au,l,d,m,w,T),!0;case"pointerover":var P=T.pointerId;return Gp.set(P,Kp(Gp.get(P)||null,l,d,m,w,T)),!0;case"gotpointercapture":return P=T.pointerId,Wp.set(P,Kp(Wp.get(P)||null,l,d,m,w,T)),!0}return!1}function wR(l){var d=In(l.target);if(d!==null){var m=i(d);if(m!==null){if(d=m.tag,d===13){if(d=o(m),d!==null){l.blockedOn=d,$(l.priority,function(){if(m.tag===13){var w=Li();w=Ct(w);var T=No(m,w);T!==null&&$i(T,m,w),ox(m,w)}});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function ky(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var m=lx(l.nativeEvent);if(m===null){m=l.nativeEvent;var w=new m.constructor(m.type,m);Ji=w,m.target.dispatchEvent(w),Ji=null}else return d=zn(m),d!==null&&yR(d),l.blockedOn=m,!1;d.shift()}return!0}function _R(l,d,m){ky(l)&&m.delete(d)}function K7(){cx=!1,Cu!==null&&ky(Cu)&&(Cu=null),ku!==null&&ky(ku)&&(ku=null),Au!==null&&ky(Au)&&(Au=null),Gp.forEach(_R),Wp.forEach(_R)}function Ay(l,d){l.blockedOn===d&&(l.blockedOn=null,cx||(cx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,K7)))}var Ty=null;function xR(l){Ty!==l&&(Ty=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ty===l&&(Ty=null);for(var d=0;d<l.length;d+=3){var m=l[d],w=l[d+1],T=l[d+2];if(typeof w!="function"){if(ux(w||m)===null)continue;break}var P=zn(m);P!==null&&(l.splice(d,3),d-=3,u_(P,{pending:!0,data:T,method:m.method,action:w},w,T))}}))}function Zp(l){function d(Ue){return Ay(Ue,l)}Cu!==null&&Ay(Cu,l),ku!==null&&Ay(ku,l),Au!==null&&Ay(Au,l),Gp.forEach(d),Wp.forEach(d);for(var m=0;m<Tu.length;m++){var w=Tu[m];w.blockedOn===l&&(w.blockedOn=null)}for(;0<Tu.length&&(m=Tu[0],m.blockedOn===null);)wR(m),m.blockedOn===null&&Tu.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(w=0;w<m.length;w+=3){var T=m[w],P=m[w+1],se=T[fe]||null;if(typeof P=="function")se||xR(m);else if(se){var Ee=null;if(P&&P.hasAttribute("formAction")){if(T=P,se=P[fe]||null)Ee=se.formAction;else if(ux(T)!==null)continue}else Ee=se.action;typeof Ee=="function"?m[w+1]=Ee:(m.splice(w,3),w-=3),xR(m)}}}function dx(l){this._internalRoot=l}Ry.prototype.render=dx.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var m=d.current,w=Li();mR(m,w,l,d,null,null)},Ry.prototype.unmount=dx.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;mR(l.current,2,null,l,null,null),cy(),d[Fe]=null}};function Ry(l){this._internalRoot=l}Ry.prototype.unstable_scheduleHydration=function(l){if(l){var d=U();l={blockedOn:null,target:l,priority:d};for(var m=0;m<Tu.length&&d!==0&&d<Tu[m].priority;m++);Tu.splice(m,0,l),m===0&&wR(l)}};var SR=t.version;if(SR!=="19.1.0")throw Error(r(527,SR,"19.1.0"));te.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var Z7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ny=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ny.isDisabled&&Ny.supportsFiber)try{Et=Ny.inject(Z7),Lt=Ny}catch{}}return Xp.createRoot=function(l,d){if(!a(l))throw Error(r(299));var m=!1,w="",T=$T,P=BT,se=zT,Ee=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(P=d.onCaughtError),d.onRecoverableError!==void 0&&(se=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Ee=d.unstable_transitionCallbacks)),d=hR(l,1,!1,null,null,m,w,T,P,se,Ee,null),l[Fe]=d.current,W_(l),new dx(d)},Xp.hydrateRoot=function(l,d,m){if(!a(l))throw Error(r(299));var w=!1,T="",P=$T,se=BT,Ee=zT,Ue=null,ut=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(P=m.onUncaughtError),m.onCaughtError!==void 0&&(se=m.onCaughtError),m.onRecoverableError!==void 0&&(Ee=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Ue=m.unstable_transitionCallbacks),m.formState!==void 0&&(ut=m.formState)),d=hR(l,1,!0,d,m??null,w,T,P,se,Ee,Ue,ut),d.context=pR(null),m=d.current,w=Li(),w=Ct(w),T=du(w),T.callback=null,fu(m,T,w),m=w,d.current.lanes=m,et(d,m),ws(d),l[Fe]=d.current,W_(l),new Ry(d)},Xp.version="19.1.0",Xp}var DR;function dz(){if(DR)return px.exports;DR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),px.exports=cz(),px.exports}var fz=dz();const hz=Qa(fz);function wO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=wO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function _O(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=wO(e))&&(r&&(r+=" "),r+=t);return r}const tC="-",pz=e=>{const t=gz(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(tC);return s[0]===""&&s.length!==1&&s.shift(),xO(s,t)||mz(o)},getConflictingClassGroupIds:(o,s)=>{const u=n[o]||[];return s&&r[o]?[...u,...r[o]]:u}}},xO=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?xO(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(tC);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},jR=/^\[(.+)\]$/,mz=e=>{if(jR.test(e)){const t=jR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},gz=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)I2(n[a],r,a,t);return r},I2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:MR(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(yz(a)){I2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{I2(o,MR(t,i),n,r)})})},MR=(e,t)=>{let n=e;return t.split(tC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},yz=e=>e.isThemeGetter,bz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},O2="!",D2=":",vz=D2.length,wz=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,u=0,c;for(let v=0;v<a.length;v++){let b=a[v];if(o===0&&s===0){if(b===D2){i.push(a.slice(u,v)),u=v+vz;continue}if(b==="/"){c=v;continue}}b==="["?o++:b==="]"?o--:b==="("?s++:b===")"&&s--}const f=i.length===0?a:a.substring(u),h=_z(f),p=h!==f,g=c&&c>u?c-u:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+D2,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},_z=e=>e.endsWith(O2)?e.substring(0,e.length-1):e.startsWith(O2)?e.substring(1):e,xz=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},Sz=e=>({cache:bz(e.cacheSize),parseClassName:wz(e),sortModifiers:xz(e),...pz(e)}),Ez=/\s+/,Cz=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(Ez);let u="";for(let c=s.length-1;c>=0;c-=1){const f=s[c],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(f);if(h){u=f+(u.length>0?" "+u:u);continue}let _=!!b,S=r(_?v.substring(0,b):v);if(!S){if(!_){u=f+(u.length>0?" "+u:u);continue}if(S=r(v),!S){u=f+(u.length>0?" "+u:u);continue}_=!1}const x=i(p).join(":"),E=g?x+O2:x,C=E+S;if(o.includes(C))continue;o.push(C);const A=a(S,_);for(let O=0;O<A.length;++O){const I=A[O];o.push(E+I)}u=f+(u.length>0?" "+u:u)}return u};function kz(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=SO(t))&&(r&&(r+=" "),r+=n);return r}const SO=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=SO(e[r]))&&(n&&(n+=" "),n+=t);return n};function Az(e,...t){let n,r,a,i=o;function o(u){const c=t.reduce((f,h)=>h(f),e());return n=Sz(c),r=n.cache.get,a=n.cache.set,i=s,s(u)}function s(u){const c=r(u);if(c)return c;const f=Cz(u,n);return a(u,f),f}return function(){return i(kz.apply(null,arguments))}}const da=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},EO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,CO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Tz=/^\d+\/\d+$/,Rz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Nz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Iz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Oz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Dz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_f=e=>Tz.test(e),Ln=e=>!!e&&!Number.isNaN(Number(e)),Nu=e=>!!e&&Number.isInteger(Number(e)),bx=e=>e.endsWith("%")&&Ln(e.slice(0,-1)),bl=e=>Rz.test(e),jz=()=>!0,Mz=e=>Nz.test(e)&&!Iz.test(e),kO=()=>!1,Pz=e=>Oz.test(e),Fz=e=>Dz.test(e),Lz=e=>!en(e)&&!tn(e),$z=e=>bh(e,RO,kO),en=e=>EO.test(e),Hc=e=>bh(e,NO,Mz),vx=e=>bh(e,Hz,Ln),PR=e=>bh(e,AO,kO),Bz=e=>bh(e,TO,Fz),Iy=e=>bh(e,IO,Pz),tn=e=>CO.test(e),Jp=e=>vh(e,NO),zz=e=>vh(e,Vz),FR=e=>vh(e,AO),Uz=e=>vh(e,RO),qz=e=>vh(e,TO),Oy=e=>vh(e,IO,!0),bh=(e,t,n)=>{const r=EO.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},vh=(e,t,n=!1)=>{const r=CO.exec(e);return r?r[1]?t(r[1]):n:!1},AO=e=>e==="position"||e==="percentage",TO=e=>e==="image"||e==="url",RO=e=>e==="length"||e==="size"||e==="bg-size",NO=e=>e==="length",Hz=e=>e==="number",Vz=e=>e==="family-name",IO=e=>e==="shadow",Gz=()=>{const e=da("color"),t=da("font"),n=da("text"),r=da("font-weight"),a=da("tracking"),i=da("leading"),o=da("breakpoint"),s=da("container"),u=da("spacing"),c=da("radius"),f=da("shadow"),h=da("inset-shadow"),p=da("text-shadow"),g=da("drop-shadow"),v=da("blur"),b=da("perspective"),_=da("aspect"),S=da("ease"),x=da("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...C(),tn,en],O=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],D=()=>[tn,en,u],z=()=>[_f,"full","auto",...D()],W=()=>[Nu,"none","subgrid",tn,en],ee=()=>["auto",{span:["full",Nu,tn,en]},Nu,tn,en],F=()=>[Nu,"auto",tn,en],Z=()=>["auto","min","max","fr",tn,en],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ae=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...D()],te=()=>[_f,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],X=()=>[e,tn,en],ce=()=>[...C(),FR,PR,{position:[tn,en]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",Uz,$z,{size:[tn,en]}],Y=()=>[bx,Jp,Hc],re=()=>["","none","full",c,tn,en],be=()=>["",Ln,Jp,Hc],_e=()=>["solid","dashed","dotted","double"],Ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[Ln,bx,FR,PR],Re=()=>["","none",v,tn,en],ke=()=>["none",Ln,tn,en],ze=()=>["none",Ln,tn,en],it=()=>[Ln,tn,en],Oe=()=>[_f,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[bl],breakpoint:[bl],color:[jz],container:[bl],"drop-shadow":[bl],ease:["in","out","in-out"],font:[Lz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[bl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[bl],shadow:[bl],spacing:["px",Ln],text:[bl],"text-shadow":[bl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",_f,en,tn,_]}],container:["container"],columns:[{columns:[Ln,en,tn,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:z()}],"inset-x":[{"inset-x":z()}],"inset-y":[{"inset-y":z()}],start:[{start:z()}],end:[{end:z()}],top:[{top:z()}],right:[{right:z()}],bottom:[{bottom:z()}],left:[{left:z()}],visibility:["visible","invisible","collapse"],z:[{z:[Nu,"auto",tn,en]}],basis:[{basis:[_f,"full","auto",s,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ln,_f,"auto","initial","none",en]}],grow:[{grow:["",Ln,tn,en]}],shrink:[{shrink:["",Ln,tn,en]}],order:[{order:[Nu,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":W()}],"col-start-end":[{col:ee()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":W()}],"row-start-end":[{row:ee()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...ae()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...ae(),"baseline"]}],"place-self":[{"place-self":["auto",...ae()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[s,"screen",...te()]}],"min-w":[{"min-w":[s,"screen","none",...te()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...te()]}],h:[{h:["screen",...te()]}],"min-h":[{"min-h":["screen","none",...te()]}],"max-h":[{"max-h":["screen",...te()]}],"font-size":[{text:["base",n,Jp,Hc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tn,vx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bx,en]}],"font-family":[{font:[zz,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tn,en]}],"line-clamp":[{"line-clamp":[Ln,"none",tn,vx]}],leading:[{leading:[i,...D()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._e(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ln,"from-font","auto",tn,Hc]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[Ln,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ce()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Nu,tn,en],radial:["",tn,en],conic:[Nu,tn,en]},qz,Bz]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:Y()}],"gradient-via-pos":[{via:Y()}],"gradient-to-pos":[{to:Y()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[..._e(),"hidden","none"]}],"divide-style":[{divide:[..._e(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[..._e(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ln,tn,en]}],"outline-w":[{outline:["",Ln,Jp,Hc]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",f,Oy,Iy]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,Oy,Iy]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[Ln,Hc]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",p,Oy,Iy]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[Ln,tn,en]}],"mix-blend":[{"mix-blend":[...Ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ln]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Ln]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ce()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:Re()}],brightness:[{brightness:[Ln,tn,en]}],contrast:[{contrast:[Ln,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",g,Oy,Iy]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",Ln,tn,en]}],"hue-rotate":[{"hue-rotate":[Ln,tn,en]}],invert:[{invert:["",Ln,tn,en]}],saturate:[{saturate:[Ln,tn,en]}],sepia:[{sepia:["",Ln,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Ln,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[Ln,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ln,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ln,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",Ln,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[Ln,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[Ln,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",Ln,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ln,"initial",tn,en]}],ease:[{ease:["linear","initial",S,tn,en]}],delay:[{delay:[Ln,tn,en]}],animate:[{animate:["none",x,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,tn,en]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:ke()}],"rotate-x":[{"rotate-x":ke()}],"rotate-y":[{"rotate-y":ke()}],"rotate-z":[{"rotate-z":ke()}],scale:[{scale:ze()}],"scale-x":[{"scale-x":ze()}],"scale-y":[{"scale-y":ze()}],"scale-z":[{"scale-z":ze()}],"scale-3d":["scale-3d"],skew:[{skew:it()}],"skew-x":[{"skew-x":it()}],"skew-y":[{"skew-y":it()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Oe()}],"translate-x":[{"translate-x":Oe()}],"translate-y":[{"translate-y":Oe()}],"translate-z":[{"translate-z":Oe()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[Ln,Jp,Hc,vx]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Wz=Az(Gz);function Nt(...e){return Wz(_O(e))}const LR=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:Nt(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(vt.Fragment,{children:i},a.id):null})})};function $R(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Dl(...e){return t=>{let n=!1;const r=e.map(a=>{const i=$R(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():$R(e[a],null)}}}}function _n(...e){return R.useCallback(Dl(...e),e)}function Uu(e){const t=Kz(e),n=R.forwardRef((r,a)=>{const{children:i,...o}=r,s=R.Children.toArray(i),u=s.find(Yz);if(u){const c=u.props.children,f=s.map(h=>h===u?R.Children.count(c)>1?R.Children.only(null):R.isValidElement(c)?c.props.children:null:h);return y.jsx(t,{...o,ref:a,children:R.isValidElement(c)?R.cloneElement(c,void 0,f):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var OO=Uu("Slot");function Kz(e){const t=R.forwardRef((n,r)=>{const{children:a,...i}=n;if(R.isValidElement(a)){const o=Jz(a),s=Xz(i,a.props);return a.type!==R.Fragment&&(s.ref=r?Dl(r,o):o),R.cloneElement(a,s)}return R.Children.count(a)>1?R.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var DO=Symbol("radix.slottable");function Zz(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=DO,t}function Yz(e){return R.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===DO}function Xz(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Jz(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const BR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,zR=_O,nC=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return zR(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const p=BR(f)||BR(h);return a[c][p]}),s=n&&Object.entries(n).reduce((c,f)=>{let[h,p]=f;return p===void 0||(c[h]=p),c},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:p,...g}=f;return Object.entries(g).every(v=>{let[b,_]=v;return Array.isArray(_)?_.includes({...i,...s}[b]):{...i,...s}[b]===_})?[...c,h,p]:c},[]);return zR(e,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},Qz=nC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function zt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?OO:"button";return y.jsx(i,{"data-slot":"button",className:Nt(Qz({variant:t,size:n,className:e})),...a})}const UR=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,p))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,a,s);return s},eU=e=>e?UR(e):UR,tU=e=>e;function nU(e,t=tU){const n=vt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return vt.useDebugValue(n),n}const qR=e=>{const t=eU(e),n=r=>nU(t,r);return Object.assign(n,t),n},ql=e=>e?qR(e):qR;var jO=Symbol.for("immer-nothing"),HR=Symbol.for("immer-draftable"),rr=Symbol.for("immer-state");function yo(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wf=Object.getPrototypeOf;function Kf(e){return!!e&&!!e[rr]}function jl(e){var t;return e?MO(e)||Array.isArray(e)||!!e[HR]||!!((t=e.constructor)!=null&&t[HR])||qv(e)||Hv(e):!1}var rU=Object.prototype.constructor.toString();function MO(e){if(!e||typeof e!="object")return!1;const t=Wf(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===rU}function wm(e,t){Uv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Uv(e){const t=e[rr];return t?t.type_:Array.isArray(e)?1:qv(e)?2:Hv(e)?3:0}function j2(e,t){return Uv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function PO(e,t,n){const r=Uv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function aU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function qv(e){return e instanceof Map}function Hv(e){return e instanceof Set}function Sa(e){return e.copy_||e.base_}function M2(e,t){if(qv(e))return new Map(e);if(Hv(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=MO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[rr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Wf(e),r)}else{const r=Wf(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function rC(e,t=!1){return Vv(e)||Kf(e)||!jl(e)||(Uv(e)>1&&(e.set=e.add=e.clear=e.delete=iU),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>rC(r,!0))),e}function iU(){yo(2)}function Vv(e){return Object.isFrozen(e)}var P2={};function od(e){const t=P2[e];return t||yo(0,e),t}function oU(e,t){P2[e]||(P2[e]=t)}var _m;function Sb(){return _m}function sU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function VR(e,t){t&&(od("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function F2(e){L2(e),e.drafts_.forEach(lU),e.drafts_=null}function L2(e){e===_m&&(_m=e.parent_)}function GR(e){return _m=sU(_m,e)}function lU(e){const t=e[rr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function WR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[rr].modified_&&(F2(t),yo(4)),jl(e)&&(e=Eb(t,e),t.parent_||Cb(t,e)),t.patches_&&od("Patches").generateReplacementPatches_(n[rr].base_,e,t.patches_,t.inversePatches_)):e=Eb(t,n,[]),F2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jO?e:void 0}function Eb(e,t,n){if(Vv(t))return t;const r=t[rr];if(!r)return wm(t,(a,i)=>KR(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Cb(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),wm(i,(s,u)=>KR(e,r,a,s,u,n,o)),Cb(e,a,!1),n&&e.patches_&&od("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function KR(e,t,n,r,a,i,o){if(Kf(a)){const s=i&&t&&t.type_!==3&&!j2(t.assigned_,r)?i.concat(r):void 0,u=Eb(e,a,s);if(PO(n,r,u),Kf(u))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(jl(a)&&!Vv(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Eb(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Cb(e,a)}}function Cb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rC(t,n)}function uU(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Sb(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=aC;n&&(a=[r],i=xm);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var aC={get(e,t){if(t===rr)return e;const n=Sa(e);if(!j2(n,t))return cU(e,n,t);const r=n[t];return e.finalized_||!jl(r)?r:r===wx(e.base_,t)?(_x(e),e.copy_[t]=Sm(r,e)):r},has(e,t){return t in Sa(e)},ownKeys(e){return Reflect.ownKeys(Sa(e))},set(e,t,n){const r=FO(Sa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=wx(Sa(e),t),i=a==null?void 0:a[rr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(aU(n,a)&&(n!==void 0||j2(e.base_,t)))return!0;_x(e),xl(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return wx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_x(e),xl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Sa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){yo(11)},getPrototypeOf(e){return Wf(e.base_)},setPrototypeOf(){yo(12)}},xm={};wm(aC,(e,t)=>{xm[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});xm.deleteProperty=function(e,t){return xm.set.call(this,e,t,void 0)};xm.set=function(e,t,n){return aC.set.call(this,e[0],t,n,e[0])};function wx(e,t){const n=e[rr];return(n?Sa(n):e)[t]}function cU(e,t,n){var a;const r=FO(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function FO(e,t){if(!(t in e))return;let n=Wf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Wf(n)}}function xl(e){e.modified_||(e.modified_=!0,e.parent_&&xl(e.parent_))}function _x(e){e.copy_||(e.copy_=M2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var dU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(u=i,...c){return o.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&yo(6),r!==void 0&&typeof r!="function"&&yo(7);let a;if(jl(t)){const i=GR(this),o=Sm(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?F2(i):L2(i)}return VR(i,r),WR(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===jO&&(a=void 0),this.autoFreeze_&&rC(a,!0),r){const i=[],o=[];od("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else yo(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,u=>t(u,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){jl(e)||yo(8),Kf(e)&&(e=fU(e));const t=GR(this),n=Sm(e,void 0);return n[rr].isManual_=!0,L2(t),n}finishDraft(e,t){const n=e&&e[rr];(!n||!n.isManual_)&&yo(9);const{scope_:r}=n;return VR(r,t),WR(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=od("Patches").applyPatches_;return Kf(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Sm(e,t){const n=qv(e)?od("MapSet").proxyMap_(e,t):Hv(e)?od("MapSet").proxySet_(e,t):uU(e,t);return(t?t.scope_:Sb()).drafts_.push(n),n}function fU(e){return Kf(e)||yo(10,e),LO(e)}function LO(e){if(!jl(e)||Vv(e))return e;const t=e[rr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=M2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=M2(e,!0);return wm(n,(r,a)=>{PO(n,r,LO(a))}),t&&(t.finalized_=!1),n}function hU(){class e extends Map{constructor(u,c){super(),this[rr]={type_:2,parent_:c,scope_:c?c.scope_:Sb(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Sa(this[rr]).size}has(u){return Sa(this[rr]).has(u)}set(u,c){const f=this[rr];return o(f),(!Sa(f).has(u)||Sa(f).get(u)!==c)&&(n(f),xl(f),f.assigned_.set(u,!0),f.copy_.set(u,c),f.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[rr];return o(c),n(c),xl(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[rr];o(u),Sa(u).size&&(n(u),xl(u),u.assigned_=new Map,wm(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const f=this[rr];Sa(f).forEach((h,p,g)=>{u.call(c,this.get(p),p,this)})}get(u){const c=this[rr];o(c);const f=Sa(c).get(u);if(c.finalized_||!jl(f)||f!==c.base_.get(u))return f;const h=Sm(f,c);return n(c),c.copy_.set(u,h),h}keys(){return Sa(this[rr]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const f=this.get(c.value);return{done:!1,value:[c.value,f]}}}}[Symbol.iterator](){return this.entries()}}function t(s,u){return new e(s,u)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(u,c){super(),this[rr]={type_:3,parent_:c,scope_:c?c.scope_:Sb(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Sa(this[rr]).size}has(u){const c=this[rr];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[rr];return o(c),this.has(u)||(i(c),xl(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[rr];return o(c),i(c),xl(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[rr];o(u),Sa(u).size&&(i(u),xl(u),u.copy_.clear())}values(){const u=this[rr];return o(u),i(u),u.copy_.values()}entries(){const u=this[rr];return o(u),i(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const f=this.values();let h=f.next();for(;!h.done;)u.call(c,h.value,h.value,this),h=f.next()}}function a(s,u){return new r(s,u)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(u=>{if(jl(u)){const c=Sm(u,s);s.drafts_.set(u,c),s.copy_.add(c)}else s.copy_.add(u)}))}function o(s){s.revoked_&&yo(3,JSON.stringify(Sa(s)))}oU("MapSet",{proxyMap_:t,proxySet_:a})}var Zi=new dU,pU=Zi.produce;Zi.produceWithPatches.bind(Zi);Zi.setAutoFreeze.bind(Zi);Zi.setUseStrictShallowCopy.bind(Zi);Zi.applyPatches.bind(Zi);Zi.createDraft.bind(Zi);Zi.finishDraft.bind(Zi);const mU=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?pU(a):a;return t(s,i,...o)},e(r.setState,n,r)),Hl=mU,Na=ql(Hl((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((u,c)=>(u.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var fb={exports:{}},gU=fb.exports,ZR;function yU(){return ZR||(ZR=1,function(e,t){(function(n,r){e.exports=r()})(gU,function(){var n=function(k,j){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,ne){K.__proto__=ne}||function(K,ne){for(var ue in ne)Object.prototype.hasOwnProperty.call(ne,ue)&&(K[ue]=ne[ue])})(k,j)},r=function(){return(r=Object.assign||function(k){for(var j,K=1,ne=arguments.length;K<ne;K++)for(var ue in j=arguments[K])Object.prototype.hasOwnProperty.call(j,ue)&&(k[ue]=j[ue]);return k}).apply(this,arguments)};function a(k,j,K){for(var ne,ue=0,we=j.length;ue<we;ue++)!ne&&ue in j||((ne=ne||Array.prototype.slice.call(j,0,ue))[ue]=j[ue]);return k.concat(ne||Array.prototype.slice.call(j))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:td,o=Object.keys,s=Array.isArray;function u(k,j){return typeof j!="object"||o(j).forEach(function(K){k[K]=j[K]}),k}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(k,j){return f.call(k,j)}function p(k,j){typeof j=="function"&&(j=j(c(k))),(typeof Reflect>"u"?o:Reflect.ownKeys)(j).forEach(function(K){v(k,K,j[K])})}var g=Object.defineProperty;function v(k,j,K,ne){g(k,j,u(K&&h(K,"get")&&typeof K.get=="function"?{get:K.get,set:K.set,configurable:!0}:{value:K,configurable:!0,writable:!0},ne))}function b(k){return{from:function(j){return k.prototype=Object.create(j.prototype),v(k.prototype,"constructor",k),{extend:p.bind(null,k.prototype)}}}}var _=Object.getOwnPropertyDescriptor,S=[].slice;function x(k,j,K){return S.call(k,j,K)}function E(k,j){return j(k)}function C(k){if(!k)throw new Error("Assertion Failed")}function A(k){i.setImmediate?setImmediate(k):setTimeout(k,0)}function O(k,j){if(typeof j=="string"&&h(k,j))return k[j];if(!j)return k;if(typeof j!="string"){for(var K=[],ne=0,ue=j.length;ne<ue;++ne){var we=O(k,j[ne]);K.push(we)}return K}var Me=j.indexOf(".");if(Me!==-1){var $e=k[j.substr(0,Me)];return $e==null?void 0:O($e,j.substr(Me+1))}}function I(k,j,K){if(k&&j!==void 0&&!("isFrozen"in Object&&Object.isFrozen(k)))if(typeof j!="string"&&"length"in j){C(typeof K!="string"&&"length"in K);for(var ne=0,ue=j.length;ne<ue;++ne)I(k,j[ne],K[ne])}else{var we,Me,$e=j.indexOf(".");$e!==-1?(we=j.substr(0,$e),(Me=j.substr($e+1))===""?K===void 0?s(k)&&!isNaN(parseInt(we))?k.splice(we,1):delete k[we]:k[we]=K:I($e=!($e=k[we])||!h(k,we)?k[we]={}:$e,Me,K)):K===void 0?s(k)&&!isNaN(parseInt(j))?k.splice(j,1):delete k[j]:k[j]=K}}function D(k){var j,K={};for(j in k)h(k,j)&&(K[j]=k[j]);return K}var z=[].concat;function W(k){return z.apply([],k)}var Et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(k){return["Int","Uint","Float"].map(function(j){return j+k+"Array"})}))).filter(function(k){return i[k]}),ee=new Set(Et.map(function(k){return i[k]})),F=null;function Z(k){return F=new WeakMap,k=function j(K){if(!K||typeof K!="object")return K;var ne=F.get(K);if(ne)return ne;if(s(K)){ne=[],F.set(K,ne);for(var ue=0,we=K.length;ue<we;++ue)ne.push(j(K[ue]))}else if(ee.has(K.constructor))ne=K;else{var Me,$e=c(K);for(Me in ne=$e===Object.prototype?{}:Object.create($e),F.set(K,ne),K)h(K,Me)&&(ne[Me]=j(K[Me]))}return ne}(k),F=null,k}var V={}.toString;function ae(k){return V.call(k).slice(8,-1)}var ie=typeof Symbol<"u"?Symbol.iterator:"@@iterator",te=typeof ie=="symbol"?function(k){var j;return k!=null&&(j=k[ie])&&j.apply(k)}:function(){return null};function X(k,j){return j=k.indexOf(j),0<=j&&k.splice(j,1),0<=j}var ce={};function G(k){var j,K,ne,ue;if(arguments.length===1){if(s(k))return k.slice();if(this===ce&&typeof k=="string")return[k];if(ue=te(k)){for(K=[];!(ne=ue.next()).done;)K.push(ne.value);return K}if(k==null)return[k];if(typeof(j=k.length)!="number")return[k];for(K=new Array(j);j--;)K[j]=k[j];return K}for(j=arguments.length,K=new Array(j);j--;)K[j]=arguments[j];return K}var Q=typeof Symbol<"u"?function(k){return k[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ht=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ai=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ht),Y={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function re(k,j){this.name=k,this.message=j}function be(k,j){return k+". Errors: "+Object.keys(j).map(function(K){return j[K].toString()}).filter(function(K,ne,ue){return ue.indexOf(K)===ne}).join(`
`)}function _e(k,j,K,ne){this.failures=j,this.failedKeys=ne,this.successCount=K,this.message=be(k,j)}function Ie(k,j){this.name="BulkError",this.failures=Object.keys(j).map(function(K){return j[K]}),this.failuresByPos=j,this.message=be(k,this.failures)}b(re).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(_e).from(re),b(Ie).from(re);var Pe=ai.reduce(function(k,j){return k[j]=j+"Error",k},{}),Re=re,ke=ai.reduce(function(k,j){var K=j+"Error";function ne(ue,we){this.name=K,ue?typeof ue=="string"?(this.message="".concat(ue).concat(we?`
 `+we:""),this.inner=we||null):typeof ue=="object"&&(this.message="".concat(ue.name," ").concat(ue.message),this.inner=ue):(this.message=Y[j]||K,this.inner=null)}return b(ne).from(Re),k[j]=ne,k},{});ke.Syntax=SyntaxError,ke.Type=TypeError,ke.Range=RangeError;var ze=ht.reduce(function(k,j){return k[j+"Error"]=ke[j],k},{}),it=ai.reduce(function(k,j){return["Syntax","Type","Range"].indexOf(j)===-1&&(k[j+"Error"]=ke[j]),k},{});function Oe(){}function Te(k){return k}function B(k,j){return k==null||k===Te?j:function(K){return j(k(K))}}function Ce(k,j){return function(){k.apply(this,arguments),j.apply(this,arguments)}}function Ne(k,j){return k===Oe?j:function(){var K=k.apply(this,arguments);K!==void 0&&(arguments[0]=K);var ne=this.onsuccess,ue=this.onerror;this.onsuccess=null,this.onerror=null;var we=j.apply(this,arguments);return ne&&(this.onsuccess=this.onsuccess?Ce(ne,this.onsuccess):ne),ue&&(this.onerror=this.onerror?Ce(ue,this.onerror):ue),we!==void 0?we:K}}function de(k,j){return k===Oe?j:function(){k.apply(this,arguments);var K=this.onsuccess,ne=this.onerror;this.onsuccess=this.onerror=null,j.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?Ce(K,this.onsuccess):K),ne&&(this.onerror=this.onerror?Ce(ne,this.onerror):ne)}}function oe(k,j){return k===Oe?j:function(K){var ne=k.apply(this,arguments);u(K,ne);var ue=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,K=j.apply(this,arguments),ue&&(this.onsuccess=this.onsuccess?Ce(ue,this.onsuccess):ue),we&&(this.onerror=this.onerror?Ce(we,this.onerror):we),ne===void 0?K===void 0?void 0:K:u(ne,K)}}function J(k,j){return k===Oe?j:function(){return j.apply(this,arguments)!==!1&&k.apply(this,arguments)}}function xe(k,j){return k===Oe?j:function(){var K=k.apply(this,arguments);if(K&&typeof K.then=="function"){for(var ne=this,ue=arguments.length,we=new Array(ue);ue--;)we[ue]=arguments[ue];return K.then(function(){return j.apply(ne,we)})}return j.apply(this,arguments)}}it.ModifyError=_e,it.DexieError=re,it.BulkError=Ie;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Se(k){Le=k}var Ve={},xt=100,Et=typeof Promise>"u"?[]:function(){var k=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[k,c(k),k];var j=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[j,c(j),k]}(),ht=Et[0],ai=Et[1],Et=Et[2],ai=ai&&ai.then,Lt=ht&&ht.constructor,Tt=!!Et,Ut=function(k,j){le.push([k,j]),N&&(queueMicrotask(ye),N=!1)},ge=!0,N=!0,q=[],he=[],De=Te,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Oe,pgp:!1,env:{},finalize:Oe},Ae=ve,le=[],ct=0,yt=[];function M(k){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var j=this._PSD=Ae;if(typeof k!="function"){if(k!==Ve)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&me(this,this._value))}this._state=null,this._value=null,++j.ref,function K(ne,ue){try{ue(function(we){if(ne._state===null){if(we===ne)throw new TypeError("A promise cannot be resolved with itself.");var Me=ne._lib&&U();we&&typeof we.then=="function"?K(ne,function($e,We){we instanceof M?we._then($e,We):we.then($e,We)}):(ne._state=!0,ne._value=we,je(ne)),Me&&$()}},me.bind(null,ne))}catch(we){me(ne,we)}}(this,k)}var Be={get:function(){var k=Ae,j=Bt;function K(ne,ue){var we=this,Me=!k.global&&(k!==Ae||j!==Bt),$e=Me&&!zn(),We=new M(function(Ye,tt){Ke(we,new et(ss(ne,k,Me,$e),ss(ue,k,Me,$e),Ye,tt,k))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return K.prototype=Ve,K},set:function(k){v(this,"then",k&&k.prototype===Ve?Be:{get:function(){return k},set:Be.set})}};function et(k,j,K,ne,ue){this.onFulfilled=typeof k=="function"?k:null,this.onRejected=typeof j=="function"?j:null,this.resolve=K,this.reject=ne,this.psd=ue}function me(k,j){var K,ne;he.push(j),k._state===null&&(K=k._lib&&U(),j=De(j),k._state=!1,k._value=j,ne=k,q.some(function(ue){return ue._value===ne._value})||q.push(ne),je(k),K&&$())}function je(k){var j=k._listeners;k._listeners=[];for(var K=0,ne=j.length;K<ne;++K)Ke(k,j[K]);var ue=k._PSD;--ue.ref||ue.finalize(),ct===0&&(++ct,Ut(function(){--ct==0&&H()},[]))}function Ke(k,j){if(k._state!==null){var K=k._state?j.onFulfilled:j.onRejected;if(K===null)return(k._state?j.resolve:j.reject)(k._value);++j.psd.ref,++ct,Ut(Ct,[K,k,j])}else k._listeners.push(j)}function Ct(k,j,K){try{var ne,ue=j._value;!j._state&&he.length&&(he=[]),ne=Le&&j._consoleTask?j._consoleTask.run(function(){return k(ue)}):k(ue),j._state||he.indexOf(ue)!==-1||function(we){for(var Me=q.length;Me;)if(q[--Me]._value===we._value)return q.splice(Me,1)}(j),K.resolve(ne)}catch(we){K.reject(we)}finally{--ct==0&&H(),--K.psd.ref||K.psd.finalize()}}function ye(){os(ve,function(){U()&&$()})}function U(){var k=ge;return N=ge=!1,k}function $(){var k,j,K;do for(;0<le.length;)for(k=le,le=[],K=k.length,j=0;j<K;++j){var ne=k[j];ne[0].apply(null,ne[1])}while(0<le.length);N=ge=!0}function H(){var k=q;q=[],k.forEach(function(ne){ne._PSD.onunhandled.call(null,ne._value,ne)});for(var j=yt.slice(0),K=j.length;K;)j[--K]()}function pe(k){return new M(Ve,!1,k)}function fe(k,j){var K=Ae;return function(){var ne=U(),ue=Ae;try{return jn(K,!0),k.apply(this,arguments)}catch(we){j&&j(we)}finally{jn(ue,!1),ne&&$()}}}p(M.prototype,{then:Be,_then:function(k,j){Ke(this,new et(null,null,k,j,Ae))},catch:function(k){if(arguments.length===1)return this.then(null,k);var j=k,K=arguments[1];return typeof j=="function"?this.then(null,function(ne){return(ne instanceof j?K:pe)(ne)}):this.then(null,function(ne){return(ne&&ne.name===j?K:pe)(ne)})},finally:function(k){return this.then(function(j){return M.resolve(k()).then(function(){return j})},function(j){return M.resolve(k()).then(function(){return pe(j)})})},timeout:function(k,j){var K=this;return k<1/0?new M(function(ne,ue){var we=setTimeout(function(){return ue(new ke.Timeout(j))},k);K.then(ne,ue).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(M.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=ti(),p(M,{all:function(){var k=G.apply(null,arguments).map(hr);return new M(function(j,K){k.length===0&&j([]);var ne=k.length;k.forEach(function(ue,we){return M.resolve(ue).then(function(Me){k[we]=Me,--ne||j(k)},K)})})},resolve:function(k){return k instanceof M?k:k&&typeof k.then=="function"?new M(function(j,K){k.then(j,K)}):new M(Ve,!0,k)},reject:pe,race:function(){var k=G.apply(null,arguments).map(hr);return new M(function(j,K){k.map(function(ne){return M.resolve(ne).then(j,K)})})},PSD:{get:function(){return Ae},set:function(k){return Ae=k}},totalEchoes:{get:function(){return Bt}},newPSD:Xt,usePSD:os,scheduler:{get:function(){return Ut},set:function(k){Ut=k}},rejectionMapper:{get:function(){return De},set:function(k){De=k}},follow:function(k,j){return new M(function(K,ne){return Xt(function(ue,we){var Me=Ae;Me.unhandleds=[],Me.onunhandled=we,Me.finalize=Ce(function(){var $e,We=this;$e=function(){We.unhandleds.length===0?ue():we(We.unhandleds[0])},yt.push(function Ye(){$e(),yt.splice(yt.indexOf(Ye),1)}),++ct,Ut(function(){--ct==0&&H()},[])},Me.finalize),k()},j,K,ne)})}}),Lt&&(Lt.allSettled&&v(M,"allSettled",function(){var k=G.apply(null,arguments).map(hr);return new M(function(j){k.length===0&&j([]);var K=k.length,ne=new Array(K);k.forEach(function(ue,we){return M.resolve(ue).then(function(Me){return ne[we]={status:"fulfilled",value:Me}},function(Me){return ne[we]={status:"rejected",reason:Me}}).then(function(){return--K||j(ne)})})})}),Lt.any&&typeof AggregateError<"u"&&v(M,"any",function(){var k=G.apply(null,arguments).map(hr);return new M(function(j,K){k.length===0&&K(new AggregateError([]));var ne=k.length,ue=new Array(ne);k.forEach(function(we,Me){return M.resolve(we).then(function($e){return j($e)},function($e){ue[Me]=$e,--ne||K(new AggregateError(ue))})})})}),Lt.withResolvers&&(M.withResolvers=Lt.withResolvers));var Fe={awaits:0,echoes:0,id:0},ot=0,jt=[],un=0,Bt=0,Vt=0;function Xt(k,j,K,ne){var ue=Ae,we=Object.create(ue);return we.parent=ue,we.ref=0,we.global=!1,we.id=++Vt,ve.env,we.env=Tt?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},j&&u(we,j),++ue.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},ne=os(we,k,K,ne),we.ref===0&&we.finalize(),ne}function In(){return Fe.id||(Fe.id=++ot),++Fe.awaits,Fe.echoes+=xt,Fe.id}function zn(){return!!Fe.awaits&&(--Fe.awaits==0&&(Fe.id=0),Fe.echoes=Fe.awaits*xt,!0)}function hr(k){return Fe.echoes&&k&&k.constructor===Lt?(In(),k.then(function(j){return zn(),j},function(j){return zn(),$r(j)})):k}function pr(){var k=jt[jt.length-1];jt.pop(),jn(k,!1)}function jn(k,j){var K,ne=Ae;(j?!Fe.echoes||un++&&k===Ae:!un||--un&&k===Ae)||queueMicrotask(j?(function(ue){++Bt,Fe.echoes&&--Fe.echoes!=0||(Fe.echoes=Fe.awaits=Fe.id=0),jt.push(Ae),jn(ue,!0)}).bind(null,k):pr),k!==Ae&&(Ae=k,ne===ve&&(ve.env=ti()),Tt&&(K=ve.env.Promise,j=k.env,(ne.global||k.global)&&(Object.defineProperty(i,"Promise",j.PromiseProp),K.all=j.all,K.race=j.race,K.resolve=j.resolve,K.reject=j.reject,j.allSettled&&(K.allSettled=j.allSettled),j.any&&(K.any=j.any))))}function ti(){var k=i.Promise;return Tt?{Promise:k,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject}:{}}function os(k,j,K,ne,ue){var we=Ae;try{return jn(k,!0),j(K,ne,ue)}finally{jn(we,!1)}}function ss(k,j,K,ne){return typeof k!="function"?k:function(){var ue=Ae;K&&In(),jn(j,!0);try{return k.apply(this,arguments)}finally{jn(ue,!1),ne&&queueMicrotask(zn)}}}function ls(k){Promise===Lt&&Fe.echoes===0?un===0?k():enqueueNativeMicroTask(k):setTimeout(k,0)}(""+ai).indexOf("[native code]")===-1&&(In=zn=Oe);var $r=M.reject,us="",Xi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",_g="String expected.",To=[],Ws="__dbnames",Oi="readonly",Sc="readwrite";function cs(k,j){return k?j?function(){return k.apply(this,arguments)&&j.apply(this,arguments)}:k:j}var Ks={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Kl(k){return typeof k!="string"||/\./.test(k)?function(j){return j}:function(j){return j[k]===void 0&&k in j&&delete(j=Z(j))[k],j}}function Id(){throw ke.Type()}function Un(k,j){try{var K=Wh(k),ne=Wh(j);if(K!==ne)return K==="Array"?1:ne==="Array"?-1:K==="binary"?1:ne==="binary"?-1:K==="string"?1:ne==="string"?-1:K==="Date"?1:ne!=="Date"?NaN:-1;switch(K){case"number":case"Date":case"string":return j<k?1:k<j?-1:0;case"binary":return function(ue,we){for(var Me=ue.length,$e=we.length,We=Me<$e?Me:$e,Ye=0;Ye<We;++Ye)if(ue[Ye]!==we[Ye])return ue[Ye]<we[Ye]?-1:1;return Me===$e?0:Me<$e?-1:1}(ni(k),ni(j));case"Array":return function(ue,we){for(var Me=ue.length,$e=we.length,We=Me<$e?Me:$e,Ye=0;Ye<We;++Ye){var tt=Un(ue[Ye],we[Ye]);if(tt!==0)return tt}return Me===$e?0:Me<$e?-1:1}(k,j)}}catch{}return NaN}function Wh(k){var j=typeof k;return j!="object"?j:ArrayBuffer.isView(k)?"binary":(k=ae(k),k==="ArrayBuffer"?"binary":k)}function ni(k){return k instanceof Uint8Array?k:ArrayBuffer.isView(k)?new Uint8Array(k.buffer,k.byteOffset,k.byteLength):new Uint8Array(k)}var Kh=(xr.prototype._trans=function(k,j,K){var ne=this._tx||Ae.trans,ue=this.name,we=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(k==="readonly"?"read":"write"," ").concat(this.name));function Me(Ye,tt,He){if(!He.schema[ue])throw new ke.NotFound("Table "+ue+" not part of transaction");return j(He.idbtrans,He)}var $e=U();try{var We=ne&&ne.db._novip===this.db._novip?ne===Ae.trans?ne._promise(k,Me,K):Xt(function(){return ne._promise(k,Me,K)},{trans:ne,transless:Ae.transless||Ae}):function Ye(tt,He,rt,Ge){if(tt.idbdb&&(tt._state.openComplete||Ae.letThrough||tt._vip)){var Qe=tt._createTransaction(He,rt,tt._dbSchema);try{Qe.create(),tt._state.PR1398_maxLoop=3}catch(at){return at.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,He,rt,Ge)})):$r(at)}return Qe._promise(He,function(at,Xe){return Xt(function(){return Ae.trans=Qe,Ge(at,Xe,Qe)})}).then(function(at){if(He==="readwrite")try{Qe.idbtrans.commit()}catch{}return He==="readonly"?at:Qe._completion.then(function(){return at})})}if(tt._state.openComplete)return $r(new ke.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return $r(new ke.DatabaseClosed);tt.open().catch(Oe)}return tt._state.dbReadyPromise.then(function(){return Ye(tt,He,rt,Ge)})}(this.db,k,[this.name],Me);return we&&(We._consoleTask=we,We=We.catch(function(Ye){return console.trace(Ye),$r(Ye)})),We}finally{$e&&$()}},xr.prototype.get=function(k,j){var K=this;return k&&k.constructor===Object?this.where(k).first(j):k==null?$r(new ke.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ne){return K.core.get({trans:ne,key:k}).then(function(ue){return K.hook.reading.fire(ue)})}).then(j)},xr.prototype.where=function(k){if(typeof k=="string")return new this.db.WhereClause(this,k);if(s(k))return new this.db.WhereClause(this,"[".concat(k.join("+"),"]"));var j=o(k);if(j.length===1)return this.where(j[0]).equals(k[j[0]]);var K=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&j.every(function(Ye){return 0<=$e.keyPath.indexOf(Ye)})){for(var We=0;We<j.length;++We)if(j.indexOf($e.keyPath[We])===-1)return!1;return!0}return!1}).sort(function($e,We){return $e.keyPath.length-We.keyPath.length})[0];if(K&&this.db._maxKey!==us){var we=K.keyPath.slice(0,j.length);return this.where(we).equals(we.map(function(We){return k[We]}))}!K&&Le&&console.warn("The query ".concat(JSON.stringify(k)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(j.join("+"),"]"));var ne=this.schema.idxByName;function ue($e,We){return Un($e,We)===0}var Me=j.reduce(function(He,We){var Ye=He[0],tt=He[1],He=ne[We],rt=k[We];return[Ye||He,Ye||!He?cs(tt,He&&He.multi?function(Ge){return Ge=O(Ge,We),s(Ge)&&Ge.some(function(Qe){return ue(rt,Qe)})}:function(Ge){return ue(rt,O(Ge,We))}):tt]},[null,null]),we=Me[0],Me=Me[1];return we?this.where(we.name).equals(k[we.keyPath]).filter(Me):K?this.filter(Me):this.where(j).equals("")},xr.prototype.filter=function(k){return this.toCollection().and(k)},xr.prototype.count=function(k){return this.toCollection().count(k)},xr.prototype.offset=function(k){return this.toCollection().offset(k)},xr.prototype.limit=function(k){return this.toCollection().limit(k)},xr.prototype.each=function(k){return this.toCollection().each(k)},xr.prototype.toArray=function(k){return this.toCollection().toArray(k)},xr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xr.prototype.orderBy=function(k){return new this.db.Collection(new this.db.WhereClause(this,s(k)?"[".concat(k.join("+"),"]"):k))},xr.prototype.reverse=function(){return this.toCollection().reverse()},xr.prototype.mapToClass=function(k){var j,K=this.db,ne=this.name;function ue(){return j!==null&&j.apply(this,arguments)||this}(this.schema.mappedClass=k).prototype instanceof Id&&(function(We,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function tt(){this.constructor=We}n(We,Ye),We.prototype=Ye===null?Object.create(Ye):(tt.prototype=Ye.prototype,new tt)}(ue,j=k),Object.defineProperty(ue.prototype,"db",{get:function(){return K},enumerable:!1,configurable:!0}),ue.prototype.table=function(){return ne},k=ue);for(var we=new Set,Me=k.prototype;Me;Me=c(Me))Object.getOwnPropertyNames(Me).forEach(function(We){return we.add(We)});function $e(We){if(!We)return We;var Ye,tt=Object.create(k.prototype);for(Ye in We)if(!we.has(Ye))try{tt[Ye]=We[Ye]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),k},xr.prototype.defineClass=function(){return this.mapToClass(function(k){u(this,k)})},xr.prototype.add=function(k,j){var K=this,ne=this.schema.primKey,ue=ne.auto,we=ne.keyPath,Me=k;return we&&ue&&(Me=Kl(we)(k)),this._trans("readwrite",function($e){return K.core.mutate({trans:$e,type:"add",keys:j!=null?[j]:null,values:[Me]})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{I(k,we,$e)}catch{}return $e})},xr.prototype.update=function(k,j){return typeof k!="object"||s(k)?this.where(":id").equals(k).modify(j):(k=O(k,this.schema.primKey.keyPath),k===void 0?$r(new ke.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(k).modify(j))},xr.prototype.put=function(k,j){var K=this,ne=this.schema.primKey,ue=ne.auto,we=ne.keyPath,Me=k;return we&&ue&&(Me=Kl(we)(k)),this._trans("readwrite",function($e){return K.core.mutate({trans:$e,type:"put",values:[Me],keys:j!=null?[j]:null})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{I(k,we,$e)}catch{}return $e})},xr.prototype.delete=function(k){var j=this;return this._trans("readwrite",function(K){return j.core.mutate({trans:K,type:"delete",keys:[k]})}).then(function(K){return K.numFailures?M.reject(K.failures[0]):void 0})},xr.prototype.clear=function(){var k=this;return this._trans("readwrite",function(j){return k.core.mutate({trans:j,type:"deleteRange",range:Ks})}).then(function(j){return j.numFailures?M.reject(j.failures[0]):void 0})},xr.prototype.bulkGet=function(k){var j=this;return this._trans("readonly",function(K){return j.core.getMany({keys:k,trans:K}).then(function(ne){return ne.map(function(ue){return j.hook.reading.fire(ue)})})})},xr.prototype.bulkAdd=function(k,j,K){var ne=this,ue=Array.isArray(j)?j:void 0,we=(K=K||(ue?void 0:j))?K.allKeys:void 0;return this._trans("readwrite",function(Me){var Ye=ne.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new ke.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==k.length)throw new ke.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&$e?k.map(Kl(Ye)):k;return ne.core.mutate({trans:Me,type:"add",keys:ue,values:Ye,wantResults:we}).then(function(Qe){var He=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(He===0)return we?rt:Ge;throw new Ie("".concat(ne.name,".bulkAdd(): ").concat(He," of ").concat(We," operations failed"),Qe)})})},xr.prototype.bulkPut=function(k,j,K){var ne=this,ue=Array.isArray(j)?j:void 0,we=(K=K||(ue?void 0:j))?K.allKeys:void 0;return this._trans("readwrite",function(Me){var Ye=ne.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new ke.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==k.length)throw new ke.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&$e?k.map(Kl(Ye)):k;return ne.core.mutate({trans:Me,type:"put",keys:ue,values:Ye,wantResults:we}).then(function(Qe){var He=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(He===0)return we?rt:Ge;throw new Ie("".concat(ne.name,".bulkPut(): ").concat(He," of ").concat(We," operations failed"),Qe)})})},xr.prototype.bulkUpdate=function(k){var j=this,K=this.core,ne=k.map(function(Me){return Me.key}),ue=k.map(function(Me){return Me.changes}),we=[];return this._trans("readwrite",function(Me){return K.getMany({trans:Me,keys:ne,cache:"clone"}).then(function($e){var We=[],Ye=[];k.forEach(function(He,rt){var Ge=He.key,Qe=He.changes,at=$e[rt];if(at){for(var Xe=0,ft=Object.keys(Qe);Xe<ft.length;Xe++){var gt=ft[Xe],bt=Qe[gt];if(gt===j.schema.primKey.keyPath){if(Un(bt,Ge)!==0)throw new ke.Constraint("Cannot update primary key in bulkUpdate()")}else I(at,gt,bt)}we.push(rt),We.push(Ge),Ye.push(at)}});var tt=We.length;return K.mutate({trans:Me,type:"put",keys:We,values:Ye,updates:{keys:ne,changeSpecs:ue}}).then(function(He){var rt=He.numFailures,Ge=He.failures;if(rt===0)return tt;for(var Qe=0,at=Object.keys(Ge);Qe<at.length;Qe++){var Xe,ft=at[Qe],gt=we[Number(ft)];gt!=null&&(Xe=Ge[ft],delete Ge[ft],Ge[gt]=Xe)}throw new Ie("".concat(j.name,".bulkUpdate(): ").concat(rt," of ").concat(tt," operations failed"),Ge)})})})},xr.prototype.bulkDelete=function(k){var j=this,K=k.length;return this._trans("readwrite",function(ne){return j.core.mutate({trans:ne,type:"delete",keys:k})}).then(function(Me){var ue=Me.numFailures,we=Me.lastResult,Me=Me.failures;if(ue===0)return we;throw new Ie("".concat(j.name,".bulkDelete(): ").concat(ue," of ").concat(K," operations failed"),Me)})},xr);function xr(){}function ds(k){function j(Me,$e){if($e){for(var We=arguments.length,Ye=new Array(We-1);--We;)Ye[We-1]=arguments[We];return K[Me].subscribe.apply(null,Ye),k}if(typeof Me=="string")return K[Me]}var K={};j.addEventType=we;for(var ne=1,ue=arguments.length;ne<ue;++ne)we(arguments[ne]);return j;function we(Me,$e,We){if(typeof Me!="object"){var Ye;$e=$e||J;var tt={subscribers:[],fire:We=We||Oe,subscribe:function(He){tt.subscribers.indexOf(He)===-1&&(tt.subscribers.push(He),tt.fire=$e(tt.fire,He))},unsubscribe:function(He){tt.subscribers=tt.subscribers.filter(function(rt){return rt!==He}),tt.fire=tt.subscribers.reduce($e,We)}};return K[Me]=j[Me]=tt}o(Ye=Me).forEach(function(He){var rt=Ye[He];if(s(rt))we(He,Ye[He][0],Ye[He][1]);else{if(rt!=="asap")throw new ke.InvalidArgument("Invalid event config");var Ge=we(He,Te,function(){for(var Qe=arguments.length,at=new Array(Qe);Qe--;)at[Qe]=arguments[Qe];Ge.subscribers.forEach(function(Xe){A(function(){Xe.apply(null,at)})})})}})}}function Zl(k,j){return b(j).from({prototype:k}),j}function Ro(k,j){return!(k.filter||k.algorithm||k.or)&&(j?k.justLimit:!k.replayFilter)}function Zh(k,j){k.filter=cs(k.filter,j)}function Ba(k,j,K){var ne=k.replayFilter;k.replayFilter=ne?function(){return cs(ne(),j())}:j,k.justLimit=K&&!ne}function Yl(k,j){if(k.isPrimKey)return j.primaryKey;var K=j.getIndexByKeyPath(k.index);if(!K)throw new ke.Schema("KeyPath "+k.index+" on object store "+j.name+" is not indexed");return K}function Yh(k,j,K){var ne=Yl(k,j.schema);return j.openCursor({trans:K,values:!k.keysOnly,reverse:k.dir==="prev",unique:!!k.unique,query:{index:ne,range:k.range}})}function Xl(k,j,K,ne){var ue=k.replayFilter?cs(k.filter,k.replayFilter()):k.filter;if(k.or){var we={},Me=function($e,We,Ye){var tt,He;ue&&!ue(We,Ye,function(rt){return We.stop(rt)},function(rt){return We.fail(rt)})||((He=""+(tt=We.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(tt)),h(we,He)||(we[He]=!0,j($e,We,Ye)))};return Promise.all([k.or._iterate(Me,K),Zs(Yh(k,ne,K),k.algorithm,Me,!k.keysOnly&&k.valueMapper)])}return Zs(Yh(k,ne,K),cs(k.algorithm,ue),j,!k.keysOnly&&k.valueMapper)}function Zs(k,j,K,ne){var ue=fe(ne?function(we,Me,$e){return K(ne(we),Me,$e)}:K);return k.then(function(we){if(we)return we.start(function(){var Me=function(){return we.continue()};j&&!j(we,function($e){return Me=$e},function($e){we.stop($e),Me=Oe},function($e){we.fail($e),Me=Oe})||ue(we.value,we,function($e){return Me=$e}),Me()})})}var Jl=(Xh.prototype.execute=function(k){var j=this["@@propmod"];if(j.add!==void 0){var K=j.add;if(s(K))return a(a([],s(k)?k:[],!0),K).sort();if(typeof K=="number")return(Number(k)||0)+K;if(typeof K=="bigint")try{return BigInt(k)+K}catch{return BigInt(0)+K}throw new TypeError("Invalid term ".concat(K))}if(j.remove!==void 0){var ne=j.remove;if(s(ne))return s(k)?k.filter(function(ue){return!ne.includes(ue)}).sort():[];if(typeof ne=="number")return Number(k)-ne;if(typeof ne=="bigint")try{return BigInt(k)-ne}catch{return BigInt(0)-ne}throw new TypeError("Invalid subtrahend ".concat(ne))}return K=(K=j.replacePrefix)===null||K===void 0?void 0:K[0],K&&typeof k=="string"&&k.startsWith(K)?j.replacePrefix[1]+k.substring(K.length):k},Xh);function Xh(k){this["@@propmod"]=k}var Ql=(Wn.prototype._read=function(k,j){var K=this._ctx;return K.error?K.table._trans(null,$r.bind(null,K.error)):K.table._trans("readonly",k).then(j)},Wn.prototype._write=function(k){var j=this._ctx;return j.error?j.table._trans(null,$r.bind(null,j.error)):j.table._trans("readwrite",k,"locked")},Wn.prototype._addAlgorithm=function(k){var j=this._ctx;j.algorithm=cs(j.algorithm,k)},Wn.prototype._iterate=function(k,j){return Xl(this._ctx,k,j,this._ctx.table.core)},Wn.prototype.clone=function(k){var j=Object.create(this.constructor.prototype),K=Object.create(this._ctx);return k&&u(K,k),j._ctx=K,j},Wn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Wn.prototype.each=function(k){var j=this._ctx;return this._read(function(K){return Xl(j,k,K,j.table.core)})},Wn.prototype.count=function(k){var j=this;return this._read(function(K){var ne=j._ctx,ue=ne.table.core;if(Ro(ne,!0))return ue.count({trans:K,query:{index:Yl(ne,ue.schema),range:ne.range}}).then(function(Me){return Math.min(Me,ne.limit)});var we=0;return Xl(ne,function(){return++we,!1},K,ue).then(function(){return we})}).then(k)},Wn.prototype.sortBy=function(k,j){var K=k.split(".").reverse(),ne=K[0],ue=K.length-1;function we(We,Ye){return Ye?we(We[K[Ye]],Ye-1):We[ne]}var Me=this._ctx.dir==="next"?1:-1;function $e(We,Ye){return Un(we(We,ue),we(Ye,ue))*Me}return this.toArray(function(We){return We.sort($e)}).then(j)},Wn.prototype.toArray=function(k){var j=this;return this._read(function(K){var ne=j._ctx;if(ne.dir==="next"&&Ro(ne,!0)&&0<ne.limit){var ue=ne.valueMapper,we=Yl(ne,ne.table.core.schema);return ne.table.core.query({trans:K,limit:ne.limit,values:!0,query:{index:we,range:ne.range}}).then(function($e){return $e=$e.result,ue?$e.map(ue):$e})}var Me=[];return Xl(ne,function($e){return Me.push($e)},K,ne.table.core).then(function(){return Me})},k)},Wn.prototype.offset=function(k){var j=this._ctx;return k<=0||(j.offset+=k,Ro(j)?Ba(j,function(){var K=k;return function(ne,ue){return K===0||(K===1?--K:ue(function(){ne.advance(K),K=0}),!1)}}):Ba(j,function(){var K=k;return function(){return--K<0}})),this},Wn.prototype.limit=function(k){return this._ctx.limit=Math.min(this._ctx.limit,k),Ba(this._ctx,function(){var j=k;return function(K,ne,ue){return--j<=0&&ne(ue),0<=j}},!0),this},Wn.prototype.until=function(k,j){return Zh(this._ctx,function(K,ne,ue){return!k(K.value)||(ne(ue),j)}),this},Wn.prototype.first=function(k){return this.limit(1).toArray(function(j){return j[0]}).then(k)},Wn.prototype.last=function(k){return this.reverse().first(k)},Wn.prototype.filter=function(k){var j;return Zh(this._ctx,function(K){return k(K.value)}),(j=this._ctx).isMatch=cs(j.isMatch,k),this},Wn.prototype.and=function(k){return this.filter(k)},Wn.prototype.or=function(k){return new this.db.WhereClause(this._ctx.table,k,this)},Wn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Wn.prototype.desc=function(){return this.reverse()},Wn.prototype.eachKey=function(k){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(K,ne){k(ne.key,ne)})},Wn.prototype.eachUniqueKey=function(k){return this._ctx.unique="unique",this.eachKey(k)},Wn.prototype.eachPrimaryKey=function(k){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(K,ne){k(ne.primaryKey,ne)})},Wn.prototype.keys=function(k){var j=this._ctx;j.keysOnly=!j.isMatch;var K=[];return this.each(function(ne,ue){K.push(ue.key)}).then(function(){return K}).then(k)},Wn.prototype.primaryKeys=function(k){var j=this._ctx;if(j.dir==="next"&&Ro(j,!0)&&0<j.limit)return this._read(function(ne){var ue=Yl(j,j.table.core.schema);return j.table.core.query({trans:ne,values:!1,limit:j.limit,query:{index:ue,range:j.range}})}).then(function(ne){return ne.result}).then(k);j.keysOnly=!j.isMatch;var K=[];return this.each(function(ne,ue){K.push(ue.primaryKey)}).then(function(){return K}).then(k)},Wn.prototype.uniqueKeys=function(k){return this._ctx.unique="unique",this.keys(k)},Wn.prototype.firstKey=function(k){return this.limit(1).keys(function(j){return j[0]}).then(k)},Wn.prototype.lastKey=function(k){return this.reverse().firstKey(k)},Wn.prototype.distinct=function(){var k=this._ctx,k=k.index&&k.table.schema.idxByName[k.index];if(!k||!k.multi)return this;var j={};return Zh(this._ctx,function(ue){var ne=ue.primaryKey.toString(),ue=h(j,ne);return j[ne]=!0,!ue}),this},Wn.prototype.modify=function(k){var j=this,K=this._ctx;return this._write(function(ne){var ue,we,Me;Me=typeof k=="function"?k:(ue=o(k),we=ue.length,function(Xe){for(var ft=!1,gt=0;gt<we;++gt){var bt=ue[gt],wt=k[bt],Mt=O(Xe,bt);wt instanceof Jl?(I(Xe,bt,wt.execute(Mt)),ft=!0):Mt!==wt&&(I(Xe,bt,wt),ft=!0)}return ft});var $e=K.table.core,He=$e.schema.primaryKey,We=He.outbound,Ye=He.extractKey,tt=200,He=j.db._options.modifyChunkSize;He&&(tt=typeof He=="object"?He[$e.name]||He["*"]||200:He);function rt(Xe,bt){var gt=bt.failures,bt=bt.numFailures;Qe+=Xe-bt;for(var wt=0,Mt=o(gt);wt<Mt.length;wt++){var qt=Mt[wt];Ge.push(gt[qt])}}var Ge=[],Qe=0,at=[];return j.clone().primaryKeys().then(function(Xe){function ft(bt){var wt=Math.min(tt,Xe.length-bt);return $e.getMany({trans:ne,keys:Xe.slice(bt,bt+wt),cache:"immutable"}).then(function(Mt){for(var qt=[],It=[],$t=We?[]:null,Ht=[],Ot=0;Ot<wt;++Ot){var Zt=Mt[Ot],cn={value:Z(Zt),primKey:Xe[bt+Ot]};Me.call(cn,cn.value,cn)!==!1&&(cn.value==null?Ht.push(Xe[bt+Ot]):We||Un(Ye(Zt),Ye(cn.value))===0?(It.push(cn.value),We&&$t.push(Xe[bt+Ot])):(Ht.push(Xe[bt+Ot]),qt.push(cn.value)))}return Promise.resolve(0<qt.length&&$e.mutate({trans:ne,type:"add",values:qt}).then(function(dn){for(var Sn in dn.failures)Ht.splice(parseInt(Sn),1);rt(qt.length,dn)})).then(function(){return(0<It.length||gt&&typeof k=="object")&&$e.mutate({trans:ne,type:"put",keys:$t,values:It,criteria:gt,changeSpec:typeof k!="function"&&k,isAdditionalChunk:0<bt}).then(function(dn){return rt(It.length,dn)})}).then(function(){return(0<Ht.length||gt&&k===Od)&&$e.mutate({trans:ne,type:"delete",keys:Ht,criteria:gt,isAdditionalChunk:0<bt}).then(function(dn){return rt(Ht.length,dn)})}).then(function(){return Xe.length>bt+wt&&ft(bt+tt)})})}var gt=Ro(K)&&K.limit===1/0&&(typeof k!="function"||k===Od)&&{index:K.index,range:K.range};return ft(0).then(function(){if(0<Ge.length)throw new _e("Error modifying one or more objects",Ge,Qe,at);return Xe.length})})})},Wn.prototype.delete=function(){var k=this._ctx,j=k.range;return Ro(k)&&(k.isPrimKey||j.type===3)?this._write(function(K){var ne=k.table.core.schema.primaryKey,ue=j;return k.table.core.count({trans:K,query:{index:ne,range:ue}}).then(function(we){return k.table.core.mutate({trans:K,type:"deleteRange",range:ue}).then(function(Me){var $e=Me.failures;if(Me.lastResult,Me.results,Me=Me.numFailures,Me)throw new _e("Could not delete some values",Object.keys($e).map(function(We){return $e[We]}),we-Me);return we-Me})})}):this.modify(Od)},Wn);function Wn(){}var Od=function(k,j){return j.value=null};function xg(k,j){return k<j?-1:k===j?0:1}function Jh(k,j){return j<k?-1:k===j?0:1}function ri(k,j,K){return k=k instanceof Xs?new k.Collection(k):k,k._ctx.error=new(K||TypeError)(j),k}function eu(k){return new k.Collection(k,function(){return Dd("")}).limit(0)}function Ys(k,j,K,ne){var ue,we,Me,$e,We,Ye,tt,He=K.length;if(!K.every(function(Qe){return typeof Qe=="string"}))return ri(k,_g);function rt(Qe){ue=Qe==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},we=Qe==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},Me=Qe==="next"?xg:Jh;var at=K.map(function(Xe){return{lower:we(Xe),upper:ue(Xe)}}).sort(function(Xe,ft){return Me(Xe.lower,ft.lower)});$e=at.map(function(Xe){return Xe.upper}),We=at.map(function(Xe){return Xe.lower}),tt=(Ye=Qe)==="next"?"":ne}rt("next"),k=new k.Collection(k,function(){return Ji($e[0],We[He-1]+ne)}),k._ondirectionchange=function(Qe){rt(Qe)};var Ge=0;return k._addAlgorithm(function(Qe,at,Xe){var ft=Qe.key;if(typeof ft!="string")return!1;var gt=we(ft);if(j(gt,We,Ge))return!0;for(var bt=null,wt=Ge;wt<He;++wt){var Mt=function(qt,It,$t,Ht,Ot,Zt){for(var cn=Math.min(qt.length,Ht.length),dn=-1,Sn=0;Sn<cn;++Sn){var Oa=It[Sn];if(Oa!==Ht[Sn])return Ot(qt[Sn],$t[Sn])<0?qt.substr(0,Sn)+$t[Sn]+$t.substr(Sn+1):Ot(qt[Sn],Ht[Sn])<0?qt.substr(0,Sn)+Ht[Sn]+$t.substr(Sn+1):0<=dn?qt.substr(0,dn)+It[dn]+$t.substr(dn+1):null;Ot(qt[Sn],Oa)<0&&(dn=Sn)}return cn<Ht.length&&Zt==="next"?qt+$t.substr(qt.length):cn<qt.length&&Zt==="prev"?qt.substr(0,$t.length):dn<0?null:qt.substr(0,dn)+Ht[dn]+$t.substr(dn+1)}(ft,gt,$e[wt],We[wt],Me,Ye);Mt===null&&bt===null?Ge=wt+1:(bt===null||0<Me(bt,Mt))&&(bt=Mt)}return at(bt!==null?function(){Qe.continue(bt+tt)}:Xe),!1}),k}function Ji(k,j,K,ne){return{type:2,lower:k,upper:j,lowerOpen:K,upperOpen:ne}}function Dd(k){return{type:1,lower:k,upper:k}}var Xs=(Object.defineProperty(Nr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Nr.prototype.between=function(k,j,K,ne){K=K!==!1,ne=ne===!0;try{return 0<this._cmp(k,j)||this._cmp(k,j)===0&&(K||ne)&&(!K||!ne)?eu(this):new this.Collection(this,function(){return Ji(k,j,!K,!ne)})}catch{return ri(this,Xi)}},Nr.prototype.equals=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Dd(k)})},Nr.prototype.above=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(k,void 0,!0)})},Nr.prototype.aboveOrEqual=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(k,void 0,!1)})},Nr.prototype.below=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(void 0,k,!1,!0)})},Nr.prototype.belowOrEqual=function(k){return k==null?ri(this,Xi):new this.Collection(this,function(){return Ji(void 0,k)})},Nr.prototype.startsWith=function(k){return typeof k!="string"?ri(this,_g):this.between(k,k+us,!0,!0)},Nr.prototype.startsWithIgnoreCase=function(k){return k===""?this.startsWith(k):Ys(this,function(j,K){return j.indexOf(K[0])===0},[k],us)},Nr.prototype.equalsIgnoreCase=function(k){return Ys(this,function(j,K){return j===K[0]},[k],"")},Nr.prototype.anyOfIgnoreCase=function(){var k=G.apply(ce,arguments);return k.length===0?eu(this):Ys(this,function(j,K){return K.indexOf(j)!==-1},k,"")},Nr.prototype.startsWithAnyOfIgnoreCase=function(){var k=G.apply(ce,arguments);return k.length===0?eu(this):Ys(this,function(j,K){return K.some(function(ne){return j.indexOf(ne)===0})},k,us)},Nr.prototype.anyOf=function(){var k=this,j=G.apply(ce,arguments),K=this._cmp;try{j.sort(K)}catch{return ri(this,Xi)}if(j.length===0)return eu(this);var ne=new this.Collection(this,function(){return Ji(j[0],j[j.length-1])});ne._ondirectionchange=function(we){K=we==="next"?k._ascending:k._descending,j.sort(K)};var ue=0;return ne._addAlgorithm(function(we,Me,$e){for(var We=we.key;0<K(We,j[ue]);)if(++ue===j.length)return Me($e),!1;return K(We,j[ue])===0||(Me(function(){we.continue(j[ue])}),!1)}),ne},Nr.prototype.notEqual=function(k){return this.inAnyRange([[-1/0,k],[k,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Nr.prototype.noneOf=function(){var k=G.apply(ce,arguments);if(k.length===0)return new this.Collection(this);try{k.sort(this._ascending)}catch{return ri(this,Xi)}var j=k.reduce(function(K,ne){return K?K.concat([[K[K.length-1][1],ne]]):[[-1/0,ne]]},null);return j.push([k[k.length-1],this.db._maxKey]),this.inAnyRange(j,{includeLowers:!1,includeUppers:!1})},Nr.prototype.inAnyRange=function(ft,j){var K=this,ne=this._cmp,ue=this._ascending,we=this._descending,Me=this._min,$e=this._max;if(ft.length===0)return eu(this);if(!ft.every(function(gt){return gt[0]!==void 0&&gt[1]!==void 0&&ue(gt[0],gt[1])<=0}))return ri(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ke.InvalidArgument);var We=!j||j.includeLowers!==!1,Ye=j&&j.includeUppers===!0,tt,He=ue;function rt(gt,bt){return He(gt[0],bt[0])}try{(tt=ft.reduce(function(gt,bt){for(var wt=0,Mt=gt.length;wt<Mt;++wt){var qt=gt[wt];if(ne(bt[0],qt[1])<0&&0<ne(bt[1],qt[0])){qt[0]=Me(qt[0],bt[0]),qt[1]=$e(qt[1],bt[1]);break}}return wt===Mt&&gt.push(bt),gt},[])).sort(rt)}catch{return ri(this,Xi)}var Ge=0,Qe=Ye?function(gt){return 0<ue(gt,tt[Ge][1])}:function(gt){return 0<=ue(gt,tt[Ge][1])},at=We?function(gt){return 0<we(gt,tt[Ge][0])}:function(gt){return 0<=we(gt,tt[Ge][0])},Xe=Qe,ft=new this.Collection(this,function(){return Ji(tt[0][0],tt[tt.length-1][1],!We,!Ye)});return ft._ondirectionchange=function(gt){He=gt==="next"?(Xe=Qe,ue):(Xe=at,we),tt.sort(rt)},ft._addAlgorithm(function(gt,bt,wt){for(var Mt,qt=gt.key;Xe(qt);)if(++Ge===tt.length)return bt(wt),!1;return!Qe(Mt=qt)&&!at(Mt)||(K._cmp(qt,tt[Ge][1])===0||K._cmp(qt,tt[Ge][0])===0||bt(function(){He===ue?gt.continue(tt[Ge][0]):gt.continue(tt[Ge][1])}),!1)}),ft},Nr.prototype.startsWithAnyOf=function(){var k=G.apply(ce,arguments);return k.every(function(j){return typeof j=="string"})?k.length===0?eu(this):this.inAnyRange(k.map(function(j){return[j,j+us]})):ri(this,"startsWithAnyOf() only works with strings")},Nr);function Nr(){}function Di(k){return fe(function(j){return Js(j),k(j.target.error),!1})}function Js(k){k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault()}var tu="storagemutated",Qs="x-storagemutated-1",ga=ds(null,tu),Qh=(za.prototype._lock=function(){return C(!Ae.global),++this._reculock,this._reculock!==1||Ae.global||(Ae.lockOwnerFor=this),this},za.prototype._unlock=function(){if(C(!Ae.global),--this._reculock==0)for(Ae.global||(Ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var k=this._blockedFuncs.shift();try{os(k[1],k[0])}catch{}}return this},za.prototype._locked=function(){return this._reculock&&Ae.lockOwnerFor!==this},za.prototype.create=function(k){var j=this;if(!this.mode)return this;var K=this.db.idbdb,ne=this.db._state.dbOpenError;if(C(!this.idbtrans),!k&&!K)switch(ne&&ne.name){case"DatabaseClosedError":throw new ke.DatabaseClosed(ne);case"MissingAPIError":throw new ke.MissingAPI(ne.message,ne);default:throw new ke.OpenFailed(ne)}if(!this.active)throw new ke.TransactionInactive;return C(this._completion._state===null),(k=this.idbtrans=k||(this.db.core||K).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=fe(function(ue){Js(ue),j._reject(k.error)}),k.onabort=fe(function(ue){Js(ue),j.active&&j._reject(new ke.Abort(k.error)),j.active=!1,j.on("abort").fire(ue)}),k.oncomplete=fe(function(){j.active=!1,j._resolve(),"mutatedParts"in k&&ga.storagemutated.fire(k.mutatedParts)}),this},za.prototype._promise=function(k,j,K){var ne=this;if(k==="readwrite"&&this.mode!=="readwrite")return $r(new ke.ReadOnly("Transaction is readonly"));if(!this.active)return $r(new ke.TransactionInactive);if(this._locked())return new M(function(we,Me){ne._blockedFuncs.push([function(){ne._promise(k,j,K).then(we,Me)},Ae])});if(K)return Xt(function(){var we=new M(function(Me,$e){ne._lock();var We=j(Me,$e,ne);We&&We.then&&We.then(Me,$e)});return we.finally(function(){return ne._unlock()}),we._lib=!0,we});var ue=new M(function(we,Me){var $e=j(we,Me,ne);$e&&$e.then&&$e.then(we,Me)});return ue._lib=!0,ue},za.prototype._root=function(){return this.parent?this.parent._root():this},za.prototype.waitFor=function(k){var j,K=this._root(),ne=M.resolve(k);K._waitingFor?K._waitingFor=K._waitingFor.then(function(){return ne}):(K._waitingFor=ne,K._waitingQueue=[],j=K.idbtrans.objectStore(K.storeNames[0]),function we(){for(++K._spinCount;K._waitingQueue.length;)K._waitingQueue.shift()();K._waitingFor&&(j.get(-1/0).onsuccess=we)}());var ue=K._waitingFor;return new M(function(we,Me){ne.then(function($e){return K._waitingQueue.push(fe(we.bind(null,$e)))},function($e){return K._waitingQueue.push(fe(Me.bind(null,$e)))}).finally(function(){K._waitingFor===ue&&(K._waitingFor=null)})})},za.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ke.Abort))},za.prototype.table=function(k){var j=this._memoizedTables||(this._memoizedTables={});if(h(j,k))return j[k];var K=this.schema[k];if(!K)throw new ke.NotFound("Table "+k+" not part of transaction");return K=new this.db.Table(k,K,this),K.core=this.db.core.table(k),j[k]=K},za);function za(){}function Qi(k,j,K,ne,ue,we,Me){return{name:k,keyPath:j,unique:K,multi:ne,auto:ue,compound:we,src:(K&&!Me?"&":"")+(ne?"*":"")+(ue?"++":"")+jd(j)}}function jd(k){return typeof k=="string"?k:k?"["+[].join.call(k,"+")+"]":""}function nu(k,j,K){return{name:k,primKey:j,indexes:K,mappedClass:null,idxByName:(ne=function(ue){return[ue.name,ue]},K.reduce(function(ue,we,Me){return Me=ne(we,Me),Me&&(ue[Me[0]]=Me[1]),ue},{}))};var ne}var ru=function(k){try{return k.only([[]]),ru=function(){return[[]]},[[]]}catch{return ru=function(){return us},us}};function au(k){return k==null?function(){}:typeof k=="string"?(j=k).split(".").length===1?function(K){return K[j]}:function(K){return O(K,j)}:function(K){return O(K,k)};var j}function Ec(k){return[].slice.call(k)}var Sg=0;function ea(k){return k==null?":id":typeof k=="string"?k:"[".concat(k.join("+"),"]")}function el(k,j,We){function ne(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Xe.lower,Qe=Xe.upper,at=Xe.lowerOpen,Xe=Xe.upperOpen;return Ge===void 0?Qe===void 0?null:j.upperBound(Qe,!!Xe):Qe===void 0?j.lowerBound(Ge,!!at):j.bound(Ge,Qe,!!at,!!Xe)}function ue(rt){var Ge,Qe=rt.name;return{name:Qe,schema:rt,mutate:function(at){var Xe=at.trans,ft=at.type,gt=at.keys,bt=at.values,wt=at.range;return new Promise(function(Mt,qt){Mt=fe(Mt);var It=Xe.objectStore(Qe),$t=It.keyPath==null,Ht=ft==="put"||ft==="add";if(!Ht&&ft!=="delete"&&ft!=="deleteRange")throw new Error("Invalid operation type: "+ft);var Ot,Zt=(gt||bt||{length:1}).length;if(gt&&bt&&gt.length!==bt.length)throw new Error("Given keys array must have same length as given values array.");if(Zt===0)return Mt({numFailures:0,failures:{},results:[],lastResult:void 0});function cn(ba){++Oa,Js(ba)}var dn=[],Sn=[],Oa=0;if(ft==="deleteRange"){if(wt.type===4)return Mt({numFailures:Oa,failures:Sn,results:[],lastResult:void 0});wt.type===3?dn.push(Ot=It.clear()):dn.push(Ot=It.delete(ne(wt)))}else{var $t=Ht?$t?[bt,gt]:[bt,null]:[gt,null],yn=$t[0],Zr=$t[1];if(Ht)for(var ta=0;ta<Zt;++ta)dn.push(Ot=Zr&&Zr[ta]!==void 0?It[ft](yn[ta],Zr[ta]):It[ft](yn[ta])),Ot.onerror=cn;else for(ta=0;ta<Zt;++ta)dn.push(Ot=It[ft](yn[ta])),Ot.onerror=cn}function No(ba){ba=ba.target.result,dn.forEach(function(to,ms){return to.error!=null&&(Sn[ms]=to.error)}),Mt({numFailures:Oa,failures:Sn,results:ft==="delete"?gt:dn.map(function(to){return to.result}),lastResult:ba})}Ot.onerror=function(ba){cn(ba),No(ba)},Ot.onsuccess=No})},getMany:function(at){var Xe=at.trans,ft=at.keys;return new Promise(function(gt,bt){gt=fe(gt);for(var wt,Mt=Xe.objectStore(Qe),qt=ft.length,It=new Array(qt),$t=0,Ht=0,Ot=function(dn){dn=dn.target,It[dn._pos]=dn.result,++Ht===$t&&gt(It)},Zt=Di(bt),cn=0;cn<qt;++cn)ft[cn]!=null&&((wt=Mt.get(ft[cn]))._pos=cn,wt.onsuccess=Ot,wt.onerror=Zt,++$t);$t===0&&gt(It)})},get:function(at){var Xe=at.trans,ft=at.key;return new Promise(function(gt,bt){gt=fe(gt);var wt=Xe.objectStore(Qe).get(ft);wt.onsuccess=function(Mt){return gt(Mt.target.result)},wt.onerror=Di(bt)})},query:(Ge=Ye,function(at){return new Promise(function(Xe,ft){Xe=fe(Xe);var gt,bt,wt,$t=at.trans,Mt=at.values,qt=at.limit,Ot=at.query,It=qt===1/0?void 0:qt,Ht=Ot.index,Ot=Ot.range,$t=$t.objectStore(Qe),Ht=Ht.isPrimaryKey?$t:$t.index(Ht.name),Ot=ne(Ot);if(qt===0)return Xe({result:[]});Ge?((It=Mt?Ht.getAll(Ot,It):Ht.getAllKeys(Ot,It)).onsuccess=function(Zt){return Xe({result:Zt.target.result})},It.onerror=Di(ft)):(gt=0,bt=!Mt&&"openKeyCursor"in Ht?Ht.openKeyCursor(Ot):Ht.openCursor(Ot),wt=[],bt.onsuccess=function(Zt){var cn=bt.result;return cn?(wt.push(Mt?cn.value:cn.primaryKey),++gt===qt?Xe({result:wt}):void cn.continue()):Xe({result:wt})},bt.onerror=Di(ft))})}),openCursor:function(at){var Xe=at.trans,ft=at.values,gt=at.query,bt=at.reverse,wt=at.unique;return new Promise(function(Mt,qt){Mt=fe(Mt);var Ht=gt.index,It=gt.range,$t=Xe.objectStore(Qe),$t=Ht.isPrimaryKey?$t:$t.index(Ht.name),Ht=bt?wt?"prevunique":"prev":wt?"nextunique":"next",Ot=!ft&&"openKeyCursor"in $t?$t.openKeyCursor(ne(It),Ht):$t.openCursor(ne(It),Ht);Ot.onerror=Di(qt),Ot.onsuccess=fe(function(Zt){var cn,dn,Sn,Oa,yn=Ot.result;yn?(yn.___id=++Sg,yn.done=!1,cn=yn.continue.bind(yn),dn=(dn=yn.continuePrimaryKey)&&dn.bind(yn),Sn=yn.advance.bind(yn),Oa=function(){throw new Error("Cursor not stopped")},yn.trans=Xe,yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=function(){throw new Error("Cursor not started")},yn.fail=fe(qt),yn.next=function(){var Zr=this,ta=1;return this.start(function(){return ta--?Zr.continue():Zr.stop()}).then(function(){return Zr})},yn.start=function(Zr){function ta(){if(Ot.result)try{Zr()}catch(ba){yn.fail(ba)}else yn.done=!0,yn.start=function(){throw new Error("Cursor behind last entry")},yn.stop()}var No=new Promise(function(ba,to){ba=fe(ba),Ot.onerror=Di(to),yn.fail=to,yn.stop=function(ms){yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=Oa,ba(ms)}});return Ot.onsuccess=fe(function(ba){Ot.onsuccess=ta,ta()}),yn.continue=cn,yn.continuePrimaryKey=dn,yn.advance=Sn,ta(),No},Mt(yn)):Mt(null)},qt)})},count:function(at){var Xe=at.query,ft=at.trans,gt=Xe.index,bt=Xe.range;return new Promise(function(wt,Mt){var qt=ft.objectStore(Qe),It=gt.isPrimaryKey?qt:qt.index(gt.name),qt=ne(bt),It=qt?It.count(qt):It.count();It.onsuccess=fe(function($t){return wt($t.target.result)}),It.onerror=Di(Mt)})}}}var we,Me,$e,tt=(Me=We,$e=Ec((we=k).objectStoreNames),{schema:{name:we.name,tables:$e.map(function(rt){return Me.objectStore(rt)}).map(function(rt){var Ge=rt.keyPath,Xe=rt.autoIncrement,Qe=s(Ge),at={},Xe={name:rt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:Qe,keyPath:Ge,autoIncrement:Xe,unique:!0,extractKey:au(Ge)},indexes:Ec(rt.indexNames).map(function(ft){return rt.index(ft)}).map(function(wt){var gt=wt.name,bt=wt.unique,Mt=wt.multiEntry,wt=wt.keyPath,Mt={name:gt,compound:s(wt),keyPath:wt,unique:bt,multiEntry:Mt,extractKey:au(wt)};return at[ea(wt)]=Mt}),getIndexByKeyPath:function(ft){return at[ea(ft)]}};return at[":id"]=Xe.primaryKey,Ge!=null&&(at[ea(Ge)]=Xe.primaryKey),Xe})},hasGetAll:0<$e.length&&"getAll"in Me.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=tt.schema,Ye=tt.hasGetAll,tt=We.tables.map(ue),He={};return tt.forEach(function(rt){return He[rt.name]=rt}),{stack:"dbcore",transaction:k.transaction.bind(k),table:function(rt){if(!He[rt])throw new Error("Table '".concat(rt,"' not found"));return He[rt]},MIN_KEY:-1/0,MAX_KEY:ru(j),schema:We}}function Md(k,j,K,ne){var ue=K.IDBKeyRange;return K.indexedDB,{dbcore:(ne=el(j,ue,ne),k.dbcore.reduce(function(we,Me){return Me=Me.create,r(r({},we),Me(we))},ne))}}function fs(k,ne){var K=ne.db,ne=Md(k._middlewares,K,k._deps,ne);k.core=ne.dbcore,k.tables.forEach(function(ue){var we=ue.name;k.core.schema.tables.some(function(Me){return Me.name===we})&&(ue.core=k.core.table(we),k[we]instanceof k.Table&&(k[we].core=ue.core))})}function Pd(k,j,K,ne){K.forEach(function(ue){var we=ne[ue];j.forEach(function(Me){var $e=function We(Ye,tt){return _(Ye,tt)||(Ye=c(Ye))&&We(Ye,tt)}(Me,ue);(!$e||"value"in $e&&$e.value===void 0)&&(Me===k.Transaction.prototype||Me instanceof k.Transaction?v(Me,ue,{get:function(){return this.table(ue)},set:function(We){g(this,ue,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):Me[ue]=new k.Table(ue,we))})})}function Cc(k,j){j.forEach(function(K){for(var ne in K)K[ne]instanceof k.Table&&delete K[ne]})}function ep(k,j){return k._cfg.version-j._cfg.version}function kc(k,j,K,ne){var ue=k._dbSchema;K.objectStoreNames.contains("$meta")&&!ue.$meta&&(ue.$meta=nu("$meta",Cg("")[0],[]),k._storeNames.push("$meta"));var we=k._createTransaction("readwrite",k._storeNames,ue);we.create(K),we._completion.catch(ne);var Me=we._reject.bind(we),$e=Ae.transless||Ae;Xt(function(){return Ae.trans=we,Ae.transless=$e,j!==0?(fs(k,K),Ye=j,((We=we).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(tt){return tt??Ye}):M.resolve(Ye)).then(function(tt){return rt=tt,Ge=we,Qe=K,at=[],tt=(He=k)._versions,Xe=He._dbSchema=iu(0,He.idbdb,Qe),(tt=tt.filter(function(ft){return ft._cfg.version>=rt})).length!==0?(tt.forEach(function(ft){at.push(function(){var gt=Xe,bt=ft._cfg.dbschema;Bd(He,gt,Qe),Bd(He,bt,Qe),Xe=He._dbSchema=bt;var wt=Ld(gt,bt);wt.add.forEach(function(Ht){tp(Qe,Ht[0],Ht[1].primKey,Ht[1].indexes)}),wt.change.forEach(function(Ht){if(Ht.recreate)throw new ke.Upgrade("Not yet support for changing primary key");var Ot=Qe.objectStore(Ht.name);Ht.add.forEach(function(Zt){return $d(Ot,Zt)}),Ht.change.forEach(function(Zt){Ot.deleteIndex(Zt.name),$d(Ot,Zt)}),Ht.del.forEach(function(Zt){return Ot.deleteIndex(Zt)})});var Mt=ft._cfg.contentUpgrade;if(Mt&&ft._cfg.version>rt){fs(He,Qe),Ge._memoizedTables={};var qt=D(bt);wt.del.forEach(function(Ht){qt[Ht]=gt[Ht]}),Cc(He,[He.Transaction.prototype]),Pd(He,[He.Transaction.prototype],o(qt),qt),Ge.schema=qt;var It,$t=Q(Mt);return $t&&In(),wt=M.follow(function(){var Ht;(It=Mt(Ge))&&$t&&(Ht=zn.bind(null,null),It.then(Ht,Ht))}),It&&typeof It.then=="function"?M.resolve(It):wt.then(function(){return It})}}),at.push(function(gt){var bt,wt,Mt=ft._cfg.dbschema;bt=Mt,wt=gt,[].slice.call(wt.db.objectStoreNames).forEach(function(qt){return bt[qt]==null&&wt.db.deleteObjectStore(qt)}),Cc(He,[He.Transaction.prototype]),Pd(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),Ge.schema=He._dbSchema}),at.push(function(gt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===ft._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(bt){return bt!=="$meta"})):gt.objectStore("$meta").put(ft._cfg.version,"version"))})}),function ft(){return at.length?M.resolve(at.shift()(Ge.idbtrans)).then(ft):M.resolve()}().then(function(){Eg(Xe,Qe)})):M.resolve();var He,rt,Ge,Qe,at,Xe}).catch(Me)):(o(ue).forEach(function(tt){tp(K,tt,ue[tt].primKey,ue[tt].indexes)}),fs(k,K),void M.follow(function(){return k.on.populate.fire(we)}).catch(Me));var We,Ye})}function Fd(k,j){Eg(k._dbSchema,j),j.db.version%10!=0||j.objectStoreNames.contains("$meta")||j.db.createObjectStore("$meta").add(Math.ceil(j.db.version/10-1),"version");var K=iu(0,k.idbdb,j);Bd(k,k._dbSchema,j);for(var ne=0,ue=Ld(K,k._dbSchema).change;ne<ue.length;ne++){var we=function(Me){if(Me.change.length||Me.recreate)return console.warn("Unable to patch indexes of table ".concat(Me.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=j.objectStore(Me.name);Me.add.forEach(function(We){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Me.name,".").concat(We.src)),$d($e,We)})}(ue[ne]);if(typeof we=="object")return we.value}}function Ld(k,j){var K,ne={del:[],add:[],change:[]};for(K in k)j[K]||ne.del.push(K);for(K in j){var ue=k[K],we=j[K];if(ue){var Me={name:K,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ue.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ue.primKey.auto!==we.primKey.auto)Me.recreate=!0,ne.change.push(Me);else{var $e=ue.idxByName,We=we.idxByName,Ye=void 0;for(Ye in $e)We[Ye]||Me.del.push(Ye);for(Ye in We){var tt=$e[Ye],He=We[Ye];tt?tt.src!==He.src&&Me.change.push(He):Me.add.push(He)}(0<Me.del.length||0<Me.add.length||0<Me.change.length)&&ne.change.push(Me)}}else ne.add.push([K,we])}return ne}function tp(k,j,K,ne){var ue=k.db.createObjectStore(j,K.keyPath?{keyPath:K.keyPath,autoIncrement:K.auto}:{autoIncrement:K.auto});return ne.forEach(function(we){return $d(ue,we)}),ue}function Eg(k,j){o(k).forEach(function(K){j.db.objectStoreNames.contains(K)||(Le&&console.debug("Dexie: Creating missing table",K),tp(j,K,k[K].primKey,k[K].indexes))})}function $d(k,j){k.createIndex(j.name,j.keyPath,{unique:j.unique,multiEntry:j.multi})}function iu(k,j,K){var ne={};return x(j.objectStoreNames,0).forEach(function(ue){for(var we=K.objectStore(ue),Me=Qi(jd(Ye=we.keyPath),Ye||"",!0,!1,!!we.autoIncrement,Ye&&typeof Ye!="string",!0),$e=[],We=0;We<we.indexNames.length;++We){var tt=we.index(we.indexNames[We]),Ye=tt.keyPath,tt=Qi(tt.name,Ye,!!tt.unique,!!tt.multiEntry,!1,Ye&&typeof Ye!="string",!1);$e.push(tt)}ne[ue]=nu(ue,Me,$e)}),ne}function Bd(k,j,K){for(var ne=K.db.objectStoreNames,ue=0;ue<ne.length;++ue){var we=ne[ue],Me=K.objectStore(we);k._hasGetAll="getAll"in Me;for(var $e=0;$e<Me.indexNames.length;++$e){var We=Me.indexNames[$e],Ye=Me.index(We).keyPath,tt=typeof Ye=="string"?Ye:"["+x(Ye).join("+")+"]";!j[we]||(Ye=j[we].idxByName[tt])&&(Ye.name=We,delete j[we].idxByName[tt],j[we].idxByName[We]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(k._hasGetAll=!1)}function Cg(k){return k.split(",").map(function(j,K){var ne=(j=j.trim()).replace(/([&*]|\+\+)/g,""),ue=/^\[/.test(ne)?ne.match(/^\[(.*)\]$/)[1].split("+"):ne;return Qi(ne,ue||null,/\&/.test(j),/\*/.test(j),/\+\+/.test(j),s(ue),K===0)})}var k1=(zd.prototype._parseStoresSpec=function(k,j){o(k).forEach(function(K){if(k[K]!==null){var ne=Cg(k[K]),ue=ne.shift();if(ue.unique=!0,ue.multi)throw new ke.Schema("Primary key cannot be multi-valued");ne.forEach(function(we){if(we.auto)throw new ke.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new ke.Schema("Index must have a name and cannot be an empty string")}),j[K]=nu(K,ue,ne)}})},zd.prototype.stores=function(K){var j=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,K):K;var K=j._versions,ne={},ue={};return K.forEach(function(we){u(ne,we._cfg.storesSource),ue=we._cfg.dbschema={},we._parseStoresSpec(ne,ue)}),j._dbSchema=ue,Cc(j,[j._allTables,j,j.Transaction.prototype]),Pd(j,[j._allTables,j,j.Transaction.prototype,this._cfg.tables],o(ue),ue),j._storeNames=o(ue),this},zd.prototype.upgrade=function(k){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Oe,k),this},zd);function zd(){}function np(k,j){var K=k._dbNamesDB;return K||(K=k._dbNamesDB=new eo(Ws,{addons:[],indexedDB:k,IDBKeyRange:j})).version(1).stores({dbnames:"name"}),K.table("dbnames")}function Ud(k){return k&&typeof k.databases=="function"}function rp(k){return Xt(function(){return Ae.letThrough=!0,k()})}function ap(k){return!("from"in k)}var ya=function(k,j){if(!this){var K=new ya;return k&&"d"in k&&u(K,k),K}u(this,arguments.length?{d:1,from:k,to:1<arguments.length?j:k}:{d:0})};function Ac(k,j,K){var ne=Un(j,K);if(!isNaN(ne)){if(0<ne)throw RangeError();if(ap(k))return u(k,{from:j,to:K,d:1});var ue=k.l,ne=k.r;if(Un(K,k.from)<0)return ue?Ac(ue,j,K):k.l={from:j,to:K,d:1,l:null,r:null},Ag(k);if(0<Un(j,k.to))return ne?Ac(ne,j,K):k.r={from:j,to:K,d:1,l:null,r:null},Ag(k);Un(j,k.from)<0&&(k.from=j,k.l=null,k.d=ne?ne.d+1:1),0<Un(K,k.to)&&(k.to=K,k.r=null,k.d=k.l?k.l.d+1:1),K=!k.r,ue&&!k.l&&tl(k,ue),ne&&K&&tl(k,ne)}}function tl(k,j){ap(j)||function K(ne,We){var we=We.from,Me=We.to,$e=We.l,We=We.r;Ac(ne,we,Me),$e&&K(ne,$e),We&&K(ne,We)}(k,j)}function kg(k,j){var K=qd(j),ne=K.next();if(ne.done)return!1;for(var ue=ne.value,we=qd(k),Me=we.next(ue.from),$e=Me.value;!ne.done&&!Me.done;){if(Un($e.from,ue.to)<=0&&0<=Un($e.to,ue.from))return!0;Un(ue.from,$e.from)<0?ue=(ne=K.next($e.from)).value:$e=(Me=we.next(ue.from)).value}return!1}function qd(k){var j=ap(k)?null:{s:0,n:k};return{next:function(K){for(var ne=0<arguments.length;j;)switch(j.s){case 0:if(j.s=1,ne)for(;j.n.l&&Un(K,j.n.from)<0;)j={up:j,n:j.n.l,s:1};else for(;j.n.l;)j={up:j,n:j.n.l,s:1};case 1:if(j.s=2,!ne||Un(K,j.n.to)<=0)return{value:j.n,done:!1};case 2:if(j.n.r){j.s=3,j={up:j,n:j.n.r,s:0};continue}case 3:j=j.up}return{done:!0}}}}function Ag(k){var j,K,ne=(((j=k.r)===null||j===void 0?void 0:j.d)||0)-(((K=k.l)===null||K===void 0?void 0:K.d)||0),ue=1<ne?"r":ne<-1?"l":"";ue&&(j=ue=="r"?"l":"r",K=r({},k),ne=k[ue],k.from=ne.from,k.to=ne.to,k[ue]=ne[ue],K[ue]=ne[j],(k[j]=K).d=ip(K)),k.d=ip(k)}function ip(K){var j=K.r,K=K.l;return(j?K?Math.max(j.d,K.d):j.d:K?K.d:0)+1}function Hd(k,j){return o(j).forEach(function(K){k[K]?tl(k[K],j[K]):k[K]=function ne(ue){var we,Me,$e={};for(we in ue)h(ue,we)&&(Me=ue[we],$e[we]=!Me||typeof Me!="object"||ee.has(Me.constructor)?Me:ne(Me));return $e}(j[K])}),k}function op(k,j){return k.all||j.all||Object.keys(k).some(function(K){return j[K]&&kg(j[K],k[K])})}p(ya.prototype,((ai={add:function(k){return tl(this,k),this},addKey:function(k){return Ac(this,k,k),this},addKeys:function(k){var j=this;return k.forEach(function(K){return Ac(j,K,K)}),this},hasKey:function(k){var j=qd(this).next(k).value;return j&&Un(j.from,k)<=0&&0<=Un(j.to,k)}})[ie]=function(){return qd(this)},ai));var nl={},sp={},lp=!1;function Vd(k){Hd(sp,k),lp||(lp=!0,setTimeout(function(){lp=!1,up(sp,!(sp={}))},0))}function up(k,j){j===void 0&&(j=!1);var K=new Set;if(k.all)for(var ne=0,ue=Object.values(nl);ne<ue.length;ne++)Tg(Me=ue[ne],k,K,j);else for(var we in k){var Me,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(we);$e&&(we=$e[1],$e=$e[2],(Me=nl["idb://".concat(we,"/").concat($e)])&&Tg(Me,k,K,j))}K.forEach(function(We){return We()})}function Tg(k,j,K,ne){for(var ue=[],we=0,Me=Object.entries(k.queries.query);we<Me.length;we++){for(var $e=Me[we],We=$e[0],Ye=[],tt=0,He=$e[1];tt<He.length;tt++){var rt=He[tt];op(j,rt.obsSet)?rt.subscribers.forEach(function(Xe){return K.add(Xe)}):ne&&Ye.push(rt)}ne&&ue.push([We,Ye])}if(ne)for(var Ge=0,Qe=ue;Ge<Qe.length;Ge++){var at=Qe[Ge],We=at[0],Ye=at[1];k.queries.query[We]=Ye}}function A1(k){var j=k._state,K=k._deps.indexedDB;if(j.isBeingOpened||k.idbdb)return j.dbReadyPromise.then(function(){return j.dbOpenError?$r(j.dbOpenError):k});j.isBeingOpened=!0,j.dbOpenError=null,j.openComplete=!1;var ne=j.openCanceller,ue=Math.round(10*k.verno),we=!1;function Me(){if(j.openCanceller!==ne)throw new ke.DatabaseClosed("db.open() was cancelled")}function $e(){return new M(function(rt,Ge){if(Me(),!K)throw new ke.MissingAPI;var Qe=k.name,at=j.autoSchema||!ue?K.open(Qe):K.open(Qe,ue);if(!at)throw new ke.MissingAPI;at.onerror=Di(Ge),at.onblocked=fe(k._fireOnBlocked),at.onupgradeneeded=fe(function(Xe){var ft;tt=at.transaction,j.autoSchema&&!k._options.allowEmptyDB?(at.onerror=Js,tt.abort(),at.result.close(),(ft=K.deleteDatabase(Qe)).onsuccess=ft.onerror=fe(function(){Ge(new ke.NoSuchDatabase("Database ".concat(Qe," doesnt exist")))})):(tt.onerror=Di(Ge),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,He=Xe<1,k.idbdb=at.result,we&&Fd(k,tt),kc(k,Xe/10,tt,Ge))},Ge),at.onsuccess=fe(function(){tt=null;var Xe,ft,gt,bt,wt,Mt=k.idbdb=at.result,qt=x(Mt.objectStoreNames);if(0<qt.length)try{var It=Mt.transaction((bt=qt).length===1?bt[0]:bt,"readonly");if(j.autoSchema)ft=Mt,gt=It,(Xe=k).verno=ft.version/10,gt=Xe._dbSchema=iu(0,ft,gt),Xe._storeNames=x(ft.objectStoreNames,0),Pd(Xe,[Xe._allTables],o(gt),gt);else if(Bd(k,k._dbSchema,It),((wt=Ld(iu(0,(wt=k).idbdb,It),wt._dbSchema)).add.length||wt.change.some(function($t){return $t.add.length||$t.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Mt.close(),ue=Mt.version+1,we=!0,rt($e());fs(k,It)}catch{}To.push(k),Mt.onversionchange=fe(function($t){j.vcFired=!0,k.on("versionchange").fire($t)}),Mt.onclose=fe(function($t){k.on("close").fire($t)}),He&&(wt=k._deps,It=Qe,Mt=wt.indexedDB,wt=wt.IDBKeyRange,Ud(Mt)||It===Ws||np(Mt,wt).put({name:It}).catch(Oe)),rt()},Ge)}).catch(function(rt){switch(rt==null?void 0:rt.name){case"UnknownError":if(0<j.PR1398_maxLoop)return j.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ue)return ue=0,$e()}return M.reject(rt)})}var We,Ye=j.dbReadyResolve,tt=null,He=!1;return M.race([ne,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(rt){function Ge(){return indexedDB.databases().finally(rt)}We=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then($e)]).then(function(){return Me(),j.onReadyBeingFired=[],M.resolve(rp(function(){return k.on.ready.fire(k.vip)})).then(function rt(){if(0<j.onReadyBeingFired.length){var Ge=j.onReadyBeingFired.reduce(xe,Oe);return j.onReadyBeingFired=[],M.resolve(rp(function(){return Ge(k.vip)})).then(rt)}})}).finally(function(){j.openCanceller===ne&&(j.onReadyBeingFired=null,j.isBeingOpened=!1)}).catch(function(rt){j.dbOpenError=rt;try{tt&&tt.abort()}catch{}return ne===j.openCanceller&&k._close(),$r(rt)}).finally(function(){j.openComplete=!0,Ye()}).then(function(){var rt;return He&&(rt={},k.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(Qe){Qe.name&&(rt["idb://".concat(k.name,"/").concat(Ge.name,"/").concat(Qe.name)]=new ya(-1/0,[[[]]]))}),rt["idb://".concat(k.name,"/").concat(Ge.name,"/")]=rt["idb://".concat(k.name,"/").concat(Ge.name,"/:dels")]=new ya(-1/0,[[[]]])}),ga(tu).fire(rt),up(rt,!0)),k})}function Tc(k){function j(we){return k.next(we)}var K=ue(j),ne=ue(function(we){return k.throw(we)});function ue(we){return function(We){var $e=we(We),We=$e.value;return $e.done?We:We&&typeof We.then=="function"?We.then(K,ne):s(We)?Promise.all(We).then(K,ne):K(We)}}return ue(j)()}function hs(k,j,K){for(var ne=s(k)?k.slice():[k],ue=0;ue<K;++ue)ne.push(j);return ne}var T1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(k){return r(r({},k),{table:function(j){var K=k.table(j),ne=K.schema,ue={},we=[];function Me(He,rt,Ge){var Qe=ea(He),at=ue[Qe]=ue[Qe]||[],Xe=He==null?0:typeof He=="string"?1:He.length,ft=0<rt,ft=r(r({},Ge),{name:ft?"".concat(Qe,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:ft,keyTail:rt,keyLength:Xe,extractKey:au(He),unique:!ft&&Ge.unique});return at.push(ft),ft.isPrimaryKey||we.push(ft),1<Xe&&Me(Xe===2?He[0]:He.slice(0,Xe-1),rt+1,Ge),at.sort(function(gt,bt){return gt.keyTail-bt.keyTail}),ft}j=Me(ne.primaryKey.keyPath,0,ne.primaryKey),ue[":id"]=[j];for(var $e=0,We=ne.indexes;$e<We.length;$e++){var Ye=We[$e];Me(Ye.keyPath,0,Ye)}function tt(He){var rt,Ge=He.query.index;return Ge.isVirtual?r(r({},He),{query:{index:Ge.lowLevelIndex,range:(rt=He.query.range,Ge=Ge.keyTail,{type:rt.type===1?2:rt.type,lower:hs(rt.lower,rt.lowerOpen?k.MAX_KEY:k.MIN_KEY,Ge),lowerOpen:!0,upper:hs(rt.upper,rt.upperOpen?k.MIN_KEY:k.MAX_KEY,Ge),upperOpen:!0})}}):He}return r(r({},K),{schema:r(r({},ne),{primaryKey:j,indexes:we,getIndexByKeyPath:function(He){return(He=ue[ea(He)])&&He[0]}}),count:function(He){return K.count(tt(He))},query:function(He){return K.query(tt(He))},openCursor:function(He){var rt=He.query.index,Ge=rt.keyTail,Qe=rt.isVirtual,at=rt.keyLength;return Qe?K.openCursor(tt(He)).then(function(ft){return ft&&Xe(ft)}):K.openCursor(He);function Xe(ft){return Object.create(ft,{continue:{value:function(gt){gt!=null?ft.continue(hs(gt,He.reverse?k.MAX_KEY:k.MIN_KEY,Ge)):He.unique?ft.continue(ft.key.slice(0,at).concat(He.reverse?k.MIN_KEY:k.MAX_KEY,Ge)):ft.continue()}},continuePrimaryKey:{value:function(gt,bt){ft.continuePrimaryKey(hs(gt,k.MAX_KEY,Ge),bt)}},primaryKey:{get:function(){return ft.primaryKey}},key:{get:function(){var gt=ft.key;return at===1?gt[0]:gt.slice(0,at)}},value:{get:function(){return ft.value}}})}}})}})}};function Gd(k,j,K,ne){return K=K||{},ne=ne||"",o(k).forEach(function(ue){var we,Me,$e;h(j,ue)?(we=k[ue],Me=j[ue],typeof we=="object"&&typeof Me=="object"&&we&&Me?($e=ae(we))!==ae(Me)?K[ne+ue]=j[ue]:$e==="Object"?Gd(we,Me,K,ne+ue+"."):we!==Me&&(K[ne+ue]=j[ue]):we!==Me&&(K[ne+ue]=j[ue])):K[ne+ue]=void 0}),o(j).forEach(function(ue){h(k,ue)||(K[ne+ue]=j[ue])}),K}function Wd(k,j){return j.type==="delete"?j.keys:j.keys||j.values.map(k.extractKey)}var Rg={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(k){return r(r({},k),{table:function(j){var K=k.table(j),ne=K.schema.primaryKey;return r(r({},K),{mutate:function(ue){var we=Ae.trans,Me=we.table(j).hook,$e=Me.deleting,We=Me.creating,Ye=Me.updating;switch(ue.type){case"add":if(We.fire===Oe)break;return we._promise("readwrite",function(){return tt(ue)},!0);case"put":if(We.fire===Oe&&Ye.fire===Oe)break;return we._promise("readwrite",function(){return tt(ue)},!0);case"delete":if($e.fire===Oe)break;return we._promise("readwrite",function(){return tt(ue)},!0);case"deleteRange":if($e.fire===Oe)break;return we._promise("readwrite",function(){return function He(rt,Ge,Qe){return K.query({trans:rt,values:!1,query:{index:ne,range:Ge},limit:Qe}).then(function(at){var Xe=at.result;return tt({type:"delete",keys:Xe,trans:rt}).then(function(ft){return 0<ft.numFailures?Promise.reject(ft.failures[0]):Xe.length<Qe?{failures:[],numFailures:0,lastResult:void 0}:He(rt,r(r({},Ge),{lower:Xe[Xe.length-1],lowerOpen:!0}),Qe)})})}(ue.trans,ue.range,1e4)},!0)}return K.mutate(ue);function tt(He){var rt,Ge,Qe,at=Ae.trans,Xe=He.keys||Wd(ne,He);if(!Xe)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Xe}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),rt=K,Qe=Xe,((Ge=He).type==="add"?Promise.resolve([]):rt.getMany({trans:Ge.trans,keys:Qe,cache:"immutable"})).then(function(ft){var gt=Xe.map(function(bt,wt){var Mt,qt,It,$t=ft[wt],Ht={onerror:null,onsuccess:null};return He.type==="delete"?$e.fire.call(Ht,bt,$t,at):He.type==="add"||$t===void 0?(Mt=We.fire.call(Ht,bt,He.values[wt],at),bt==null&&Mt!=null&&(He.keys[wt]=bt=Mt,ne.outbound||I(He.values[wt],ne.keyPath,bt))):(Mt=Gd($t,He.values[wt]),(qt=Ye.fire.call(Ht,Mt,bt,$t,at))&&(It=He.values[wt],Object.keys(qt).forEach(function(Ot){h(It,Ot)?It[Ot]=qt[Ot]:I(It,Ot,qt[Ot])}))),Ht});return K.mutate(He).then(function(bt){for(var wt=bt.failures,Mt=bt.results,qt=bt.numFailures,bt=bt.lastResult,It=0;It<Xe.length;++It){var $t=(Mt||Xe)[It],Ht=gt[It];$t==null?Ht.onerror&&Ht.onerror(wt[It]):Ht.onsuccess&&Ht.onsuccess(He.type==="put"&&ft[It]?He.values[It]:$t)}return{failures:wt,results:Mt,numFailures:qt,lastResult:bt}}).catch(function(bt){return gt.forEach(function(wt){return wt.onerror&&wt.onerror(bt)}),Promise.reject(bt)})})}}})}})}};function cp(k,j,K){try{if(!j||j.keys.length<k.length)return null;for(var ne=[],ue=0,we=0;ue<j.keys.length&&we<k.length;++ue)Un(j.keys[ue],k[we])===0&&(ne.push(K?Z(j.values[ue]):j.values[ue]),++we);return ne.length===k.length?ne:null}catch{return null}}var Ng={stack:"dbcore",level:-1,create:function(k){return{table:function(j){var K=k.table(j);return r(r({},K),{getMany:function(ne){if(!ne.cache)return K.getMany(ne);var ue=cp(ne.keys,ne.trans._cache,ne.cache==="clone");return ue?M.resolve(ue):K.getMany(ne).then(function(we){return ne.trans._cache={keys:ne.keys,values:ne.cache==="clone"?Z(we):we},we})},mutate:function(ne){return ne.type!=="add"&&(ne.trans._cache=null),K.mutate(ne)}})}}}};function rl(k,j){return k.trans.mode==="readonly"&&!!k.subscr&&!k.trans.explicit&&k.trans.db._options.cache!=="disabled"&&!j.schema.primaryKey.outbound}function Ig(k,j){switch(k){case"query":return j.values&&!j.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var R1={stack:"dbcore",level:0,name:"Observability",create:function(k){var j=k.schema.name,K=new ya(k.MIN_KEY,k.MAX_KEY);return r(r({},k),{transaction:function(ne,ue,we){if(Ae.subscr&&ue!=="readonly")throw new ke.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ae.querier));return k.transaction(ne,ue,we)},table:function(ne){var ue=k.table(ne),we=ue.schema,Me=we.primaryKey,He=we.indexes,$e=Me.extractKey,We=Me.outbound,Ye=Me.autoIncrement&&He.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(Me.keyPath)}),tt=r(r({},ue),{mutate:function(Ge){function Qe(Ot){return Ot="idb://".concat(j,"/").concat(ne,"/").concat(Ot),bt[Ot]||(bt[Ot]=new ya)}var at,Xe,ft,gt=Ge.trans,bt=Ge.mutatedParts||(Ge.mutatedParts={}),wt=Qe(""),Mt=Qe(":dels"),qt=Ge.type,Ht=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[Wd(Me,Ge).filter(function(Ot){return Ot}),Ge.values]:[],It=Ht[0],$t=Ht[1],Ht=Ge.trans._cache;return s(It)?(wt.addKeys(It),(Ht=qt==="delete"||It.length===$t.length?cp(It,Ht):null)||Mt.addKeys(It),(Ht||$t)&&(at=Qe,Xe=Ht,ft=$t,we.indexes.forEach(function(Ot){var Zt=at(Ot.name||"");function cn(Sn){return Sn!=null?Ot.extractKey(Sn):null}function dn(Sn){return Ot.multiEntry&&s(Sn)?Sn.forEach(function(Oa){return Zt.addKey(Oa)}):Zt.addKey(Sn)}(Xe||ft).forEach(function(Sn,Zr){var yn=Xe&&cn(Xe[Zr]),Zr=ft&&cn(ft[Zr]);Un(yn,Zr)!==0&&(yn!=null&&dn(yn),Zr!=null&&dn(Zr))})}))):It?($t={from:($t=It.lower)!==null&&$t!==void 0?$t:k.MIN_KEY,to:($t=It.upper)!==null&&$t!==void 0?$t:k.MAX_KEY},Mt.add($t),wt.add($t)):(wt.add(K),Mt.add(K),we.indexes.forEach(function(Ot){return Qe(Ot.name).add(K)})),ue.mutate(Ge).then(function(Ot){return!It||Ge.type!=="add"&&Ge.type!=="put"||(wt.addKeys(Ot.results),Ye&&Ye.forEach(function(Zt){for(var cn=Ge.values.map(function(yn){return Zt.extractKey(yn)}),dn=Zt.keyPath.findIndex(function(yn){return yn===Me.keyPath}),Sn=0,Oa=Ot.results.length;Sn<Oa;++Sn)cn[Sn][dn]=Ot.results[Sn];Qe(Zt.name).addKeys(cn)})),gt.mutatedParts=Hd(gt.mutatedParts||{},bt),Ot})}}),He=function(Qe){var at=Qe.query,Qe=at.index,at=at.range;return[Qe,new ya((Qe=at.lower)!==null&&Qe!==void 0?Qe:k.MIN_KEY,(at=at.upper)!==null&&at!==void 0?at:k.MAX_KEY)]},rt={get:function(Ge){return[Me,new ya(Ge.key)]},getMany:function(Ge){return[Me,new ya().addKeys(Ge.keys)]},count:He,query:He,openCursor:He};return o(rt).forEach(function(Ge){tt[Ge]=function(Qe){var at=Ae.subscr,Xe=!!at,ft=rl(Ae,ue)&&Ig(Ge,Qe)?Qe.obsSet={}:at;if(Xe){var gt=function($t){return $t="idb://".concat(j,"/").concat(ne,"/").concat($t),ft[$t]||(ft[$t]=new ya)},bt=gt(""),wt=gt(":dels"),at=rt[Ge](Qe),Xe=at[0],at=at[1];if((Ge==="query"&&Xe.isPrimaryKey&&!Qe.values?wt:gt(Xe.name||"")).add(at),!Xe.isPrimaryKey){if(Ge!=="count"){var Mt=Ge==="query"&&We&&Qe.values&&ue.query(r(r({},Qe),{values:!1}));return ue[Ge].apply(this,arguments).then(function($t){if(Ge==="query"){if(We&&Qe.values)return Mt.then(function(cn){return cn=cn.result,bt.addKeys(cn),$t});var Ht=Qe.values?$t.result.map($e):$t.result;(Qe.values?bt:wt).addKeys(Ht)}else if(Ge==="openCursor"){var Ot=$t,Zt=Qe.values;return Ot&&Object.create(Ot,{key:{get:function(){return wt.addKey(Ot.primaryKey),Ot.key}},primaryKey:{get:function(){var cn=Ot.primaryKey;return wt.addKey(cn),cn}},value:{get:function(){return Zt&&bt.addKey(Ot.primaryKey),Ot.value}}})}return $t})}wt.add(K)}}return ue[Ge].apply(this,arguments)}}),tt}})}};function Og(k,j,K){if(K.numFailures===0)return j;if(j.type==="deleteRange")return null;var ne=j.keys?j.keys.length:"values"in j&&j.values?j.values.length:1;return K.numFailures===ne?null:(j=r({},j),s(j.keys)&&(j.keys=j.keys.filter(function(ue,we){return!(we in K.failures)})),"values"in j&&s(j.values)&&(j.values=j.values.filter(function(ue,we){return!(we in K.failures)})),j)}function Kd(k,j){return K=k,((ne=j).lower===void 0||(ne.lowerOpen?0<Un(K,ne.lower):0<=Un(K,ne.lower)))&&(k=k,(j=j).upper===void 0||(j.upperOpen?Un(k,j.upper)<0:Un(k,j.upper)<=0));var K,ne}function dp(k,j,rt,ne,ue,we){if(!rt||rt.length===0)return k;var Me=j.query.index,$e=Me.multiEntry,We=j.query.range,Ye=ne.schema.primaryKey.extractKey,tt=Me.extractKey,He=(Me.lowLevelIndex||Me).extractKey,rt=rt.reduce(function(Ge,Qe){var at=Ge,Xe=[];if(Qe.type==="add"||Qe.type==="put")for(var ft=new ya,gt=Qe.values.length-1;0<=gt;--gt){var bt,wt=Qe.values[gt],Mt=Ye(wt);ft.hasKey(Mt)||(bt=tt(wt),($e&&s(bt)?bt.some(function(Ot){return Kd(Ot,We)}):Kd(bt,We))&&(ft.addKey(Mt),Xe.push(wt)))}switch(Qe.type){case"add":var qt=new ya().addKeys(j.values?Ge.map(function(Zt){return Ye(Zt)}):Ge),at=Ge.concat(j.values?Xe.filter(function(Zt){return Zt=Ye(Zt),!qt.hasKey(Zt)&&(qt.addKey(Zt),!0)}):Xe.map(function(Zt){return Ye(Zt)}).filter(function(Zt){return!qt.hasKey(Zt)&&(qt.addKey(Zt),!0)}));break;case"put":var It=new ya().addKeys(Qe.values.map(function(Zt){return Ye(Zt)}));at=Ge.filter(function(Zt){return!It.hasKey(j.values?Ye(Zt):Zt)}).concat(j.values?Xe:Xe.map(function(Zt){return Ye(Zt)}));break;case"delete":var $t=new ya().addKeys(Qe.keys);at=Ge.filter(function(Zt){return!$t.hasKey(j.values?Ye(Zt):Zt)});break;case"deleteRange":var Ht=Qe.range;at=Ge.filter(function(Zt){return!Kd(Ye(Zt),Ht)})}return at},k);return rt===k?k:(rt.sort(function(Ge,Qe){return Un(He(Ge),He(Qe))||Un(Ye(Ge),Ye(Qe))}),j.limit&&j.limit<1/0&&(rt.length>j.limit?rt.length=j.limit:k.length===j.limit&&rt.length<j.limit&&(ue.dirty=!0)),we?Object.freeze(rt):rt)}function ou(k,j){return Un(k.lower,j.lower)===0&&Un(k.upper,j.upper)===0&&!!k.lowerOpen==!!j.lowerOpen&&!!k.upperOpen==!!j.upperOpen}function Rc(k,j){return function(K,ne,ue,we){if(K===void 0)return ne!==void 0?-1:0;if(ne===void 0)return 1;if((ne=Un(K,ne))===0){if(ue&&we)return 0;if(ue)return 1;if(we)return-1}return ne}(k.lower,j.lower,k.lowerOpen,j.lowerOpen)<=0&&0<=function(K,ne,ue,we){if(K===void 0)return ne!==void 0?1:0;if(ne===void 0)return-1;if((ne=Un(K,ne))===0){if(ue&&we)return 0;if(ue)return-1;if(we)return 1}return ne}(k.upper,j.upper,k.upperOpen,j.upperOpen)}function N1(k,j,K,ne){k.subscribers.add(K),ne.addEventListener("abort",function(){var ue,we;k.subscribers.delete(K),k.subscribers.size===0&&(ue=k,we=j,setTimeout(function(){ue.subscribers.size===0&&X(we,ue)},3e3))})}var Zd={stack:"dbcore",level:0,name:"Cache",create:function(k){var j=k.schema.name;return r(r({},k),{transaction:function(K,ne,ue){var we,Me,$e=k.transaction(K,ne,ue);return ne==="readwrite"&&(Me=(we=new AbortController).signal,ue=function(We){return function(){if(we.abort(),ne==="readwrite"){for(var Ye=new Set,tt=0,He=K;tt<He.length;tt++){var rt=He[tt],Ge=nl["idb://".concat(j,"/").concat(rt)];if(Ge){var Qe=k.table(rt),at=Ge.optimisticOps.filter(function(Zt){return Zt.trans===$e});if($e._explicit&&We&&$e.mutatedParts)for(var Xe=0,ft=Object.values(Ge.queries.query);Xe<ft.length;Xe++)for(var gt=0,bt=(qt=ft[Xe]).slice();gt<bt.length;gt++)op((It=bt[gt]).obsSet,$e.mutatedParts)&&(X(qt,It),It.subscribers.forEach(function(Zt){return Ye.add(Zt)}));else if(0<at.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(Zt){return Zt.trans!==$e});for(var wt=0,Mt=Object.values(Ge.queries.query);wt<Mt.length;wt++)for(var qt,It,$t,Ht=0,Ot=(qt=Mt[wt]).slice();Ht<Ot.length;Ht++)(It=Ot[Ht]).res!=null&&$e.mutatedParts&&(We&&!It.dirty?($t=Object.isFrozen(It.res),$t=dp(It.res,It.req,at,Qe,It,$t),It.dirty?(X(qt,It),It.subscribers.forEach(function(Zt){return Ye.add(Zt)})):$t!==It.res&&(It.res=$t,It.promise=M.resolve({result:$t}))):(It.dirty&&X(qt,It),It.subscribers.forEach(function(Zt){return Ye.add(Zt)})))}}}Ye.forEach(function(Zt){return Zt()})}}},$e.addEventListener("abort",ue(!1),{signal:Me}),$e.addEventListener("error",ue(!1),{signal:Me}),$e.addEventListener("complete",ue(!0),{signal:Me})),$e},table:function(K){var ne=k.table(K),ue=ne.schema.primaryKey;return r(r({},ne),{mutate:function(we){var Me=Ae.trans;if(ue.outbound||Me.db._options.cache==="disabled"||Me.explicit||Me.idbtrans.mode!=="readwrite")return ne.mutate(we);var $e=nl["idb://".concat(j,"/").concat(K)];return $e?(Me=ne.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||Wd(ue,we).some(function(We){return We==null}))?($e.optimisticOps.push(we),we.mutatedParts&&Vd(we.mutatedParts),Me.then(function(We){0<We.numFailures&&(X($e.optimisticOps,we),(We=Og(0,we,We))&&$e.optimisticOps.push(We),we.mutatedParts&&Vd(we.mutatedParts))}),Me.catch(function(){X($e.optimisticOps,we),we.mutatedParts&&Vd(we.mutatedParts)})):Me.then(function(We){var Ye=Og(0,r(r({},we),{values:we.values.map(function(tt,He){var rt;return We.failures[He]?tt:(tt=(rt=ue.keyPath)!==null&&rt!==void 0&&rt.includes(".")?Z(tt):r({},tt),I(tt,ue.keyPath,We.results[He]),tt)})}),We);$e.optimisticOps.push(Ye),queueMicrotask(function(){return we.mutatedParts&&Vd(we.mutatedParts)})}),Me):ne.mutate(we)},query:function(we){if(!rl(Ae,ne)||!Ig("query",we))return ne.query(we);var Me=((Ye=Ae.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",He=Ae,$e=He.requery,We=He.signal,Ye=function(Qe,at,Xe,ft){var gt=nl["idb://".concat(Qe,"/").concat(at)];if(!gt)return[];if(!(at=gt.queries[Xe]))return[null,!1,gt,null];var bt=at[(ft.query?ft.query.index.name:null)||""];if(!bt)return[null,!1,gt,null];switch(Xe){case"query":var wt=bt.find(function(Mt){return Mt.req.limit===ft.limit&&Mt.req.values===ft.values&&ou(Mt.req.query.range,ft.query.range)});return wt?[wt,!0,gt,bt]:[bt.find(function(Mt){return("limit"in Mt.req?Mt.req.limit:1/0)>=ft.limit&&(!ft.values||Mt.req.values)&&Rc(Mt.req.query.range,ft.query.range)}),!1,gt,bt];case"count":return wt=bt.find(function(Mt){return ou(Mt.req.query.range,ft.query.range)}),[wt,!!wt,gt,bt]}}(j,K,"query",we),tt=Ye[0],He=Ye[1],rt=Ye[2],Ge=Ye[3];return tt&&He?tt.obsSet=we.obsSet:(He=ne.query(we).then(function(Qe){var at=Qe.result;if(tt&&(tt.res=at),Me){for(var Xe=0,ft=at.length;Xe<ft;++Xe)Object.freeze(at[Xe]);Object.freeze(at)}else Qe.result=Z(at);return Qe}).catch(function(Qe){return Ge&&tt&&X(Ge,tt),Promise.reject(Qe)}),tt={obsSet:we.obsSet,promise:He,subscribers:new Set,type:"query",req:we,dirty:!1},Ge?Ge.push(tt):(Ge=[tt],(rt=rt||(nl["idb://".concat(j,"/").concat(K)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=Ge)),N1(tt,Ge,$e,We),tt.promise.then(function(Qe){return{result:dp(Qe.result,we,rt==null?void 0:rt.optimisticOps,ne,tt,Me)}})}})}})}};function Nc(k,j){return new Proxy(k,{get:function(K,ne,ue){return ne==="db"?j:Reflect.get(K,ne,ue)}})}var eo=(Ir.prototype.version=function(k){if(isNaN(k)||k<.1)throw new ke.Type("Given version is not a positive number");if(k=Math.round(10*k)/10,this.idbdb||this._state.isBeingOpened)throw new ke.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,k);var j=this._versions,K=j.filter(function(ne){return ne._cfg.version===k})[0];return K||(K=new this.Version(k),j.push(K),j.sort(ep),K.stores({}),this._state.autoSchema=!1,K)},Ir.prototype._whenReady=function(k){var j=this;return this.idbdb&&(this._state.openComplete||Ae.letThrough||this._vip)?k():new M(function(K,ne){if(j._state.openComplete)return ne(new ke.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return void ne(new ke.DatabaseClosed);j.open().catch(Oe)}j._state.dbReadyPromise.then(K,ne)}).then(k)},Ir.prototype.use=function(k){var j=k.stack,K=k.create,ne=k.level,ue=k.name;return ue&&this.unuse({stack:j,name:ue}),k=this._middlewares[j]||(this._middlewares[j]=[]),k.push({stack:j,create:K,level:ne??10,name:ue}),k.sort(function(we,Me){return we.level-Me.level}),this},Ir.prototype.unuse=function(k){var j=k.stack,K=k.name,ne=k.create;return j&&this._middlewares[j]&&(this._middlewares[j]=this._middlewares[j].filter(function(ue){return ne?ue.create!==ne:!!K&&ue.name!==K})),this},Ir.prototype.open=function(){var k=this;return os(ve,function(){return A1(k)})},Ir.prototype._close=function(){var k=this._state,j=To.indexOf(this);if(0<=j&&To.splice(j,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}k.isBeingOpened||(k.dbReadyPromise=new M(function(K){k.dbReadyResolve=K}),k.openCanceller=new M(function(K,ne){k.cancelOpen=ne}))},Ir.prototype.close=function(K){var j=(K===void 0?{disableAutoOpen:!0}:K).disableAutoOpen,K=this._state;j?(K.isBeingOpened&&K.cancelOpen(new ke.DatabaseClosed),this._close(),K.autoOpen=!1,K.dbOpenError=new ke.DatabaseClosed):(this._close(),K.autoOpen=this._options.autoOpen||K.isBeingOpened,K.openComplete=!1,K.dbOpenError=null)},Ir.prototype.delete=function(k){var j=this;k===void 0&&(k={disableAutoOpen:!0});var K=0<arguments.length&&typeof arguments[0]!="object",ne=this._state;return new M(function(ue,we){function Me(){j.close(k);var $e=j._deps.indexedDB.deleteDatabase(j.name);$e.onsuccess=fe(function(){var We,Ye,tt;We=j._deps,Ye=j.name,tt=We.indexedDB,We=We.IDBKeyRange,Ud(tt)||Ye===Ws||np(tt,We).delete(Ye).catch(Oe),ue()}),$e.onerror=Di(we),$e.onblocked=j._fireOnBlocked}if(K)throw new ke.InvalidArgument("Invalid closeOptions argument to db.delete()");ne.isBeingOpened?ne.dbReadyPromise.then(Me):Me()})},Ir.prototype.backendDB=function(){return this.idbdb},Ir.prototype.isOpen=function(){return this.idbdb!==null},Ir.prototype.hasBeenClosed=function(){var k=this._state.dbOpenError;return k&&k.name==="DatabaseClosed"},Ir.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ir.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ir.prototype,"tables",{get:function(){var k=this;return o(this._allTables).map(function(j){return k._allTables[j]})},enumerable:!1,configurable:!0}),Ir.prototype.transaction=function(){var k=(function(j,K,ne){var ue=arguments.length;if(ue<2)throw new ke.InvalidArgument("Too few arguments");for(var we=new Array(ue-1);--ue;)we[ue-1]=arguments[ue];return ne=we.pop(),[j,W(we),ne]}).apply(this,arguments);return this._transaction.apply(this,k)},Ir.prototype._transaction=function(k,j,K){var ne=this,ue=Ae.trans;ue&&ue.db===this&&k.indexOf("!")===-1||(ue=null);var we,Me,$e=k.indexOf("?")!==-1;k=k.replace("!","").replace("?","");try{if(Me=j.map(function(Ye){if(Ye=Ye instanceof ne.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),k=="r"||k===Oi)we=Oi;else{if(k!="rw"&&k!=Sc)throw new ke.InvalidArgument("Invalid transaction mode: "+k);we=Sc}if(ue){if(ue.mode===Oi&&we===Sc){if(!$e)throw new ke.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ue=null}ue&&Me.forEach(function(Ye){if(ue&&ue.storeNames.indexOf(Ye)===-1){if(!$e)throw new ke.SubTransaction("Table "+Ye+" not included in parent transaction.");ue=null}}),$e&&ue&&!ue.active&&(ue=null)}}catch(Ye){return ue?ue._promise(null,function(tt,He){He(Ye)}):$r(Ye)}var We=(function Ye(tt,He,rt,Ge,Qe){return M.resolve().then(function(){var at=Ae.transless||Ae,Xe=tt._createTransaction(He,rt,tt._dbSchema,Ge);if(Xe.explicit=!0,at={trans:Xe,transless:at},Ge)Xe.idbtrans=Ge.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(bt){return bt.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,He,rt,null,Qe)})):$r(bt)}var ft,gt=Q(Qe);return gt&&In(),at=M.follow(function(){var bt;(ft=Qe.call(Xe,Xe))&&(gt?(bt=zn.bind(null,null),ft.then(bt,bt)):typeof ft.next=="function"&&typeof ft.throw=="function"&&(ft=Tc(ft)))},at),(ft&&typeof ft.then=="function"?M.resolve(ft).then(function(bt){return Xe.active?bt:$r(new ke.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):at.then(function(){return ft})).then(function(bt){return Ge&&Xe._resolve(),Xe._completion.then(function(){return bt})}).catch(function(bt){return Xe._reject(bt),$r(bt)})})}).bind(null,this,we,Me,ue,K);return ue?ue._promise(we,We,"lock"):Ae.trans?os(Ae.transless,function(){return ne._whenReady(We)}):this._whenReady(We)},Ir.prototype.table=function(k){if(!h(this._allTables,k))throw new ke.InvalidTable("Table ".concat(k," does not exist"));return this._allTables[k]},Ir);function Ir(k,j){var K=this;this._middlewares={},this.verno=0;var ne=Ir.dependencies;this._options=j=r({addons:Ir.addons,autoOpen:!0,indexedDB:ne.indexedDB,IDBKeyRange:ne.IDBKeyRange,cache:"cloned"},j),this._deps={indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange},ne=j.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ue,we,Me,$e,We,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Oe,dbReadyPromise:null,cancelOpen:Oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:j.autoOpen};Ye.dbReadyPromise=new M(function(He){Ye.dbReadyResolve=He}),Ye.openCanceller=new M(function(He,rt){Ye.cancelOpen=rt}),this._state=Ye,this.name=k,this.on=ds(this,"populate","blocked","versionchange","close",{ready:[xe,Oe]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(rt,Ge){Ir.vip(function(){var Qe,at=K._state;at.openComplete?(at.dbOpenError||M.resolve().then(rt),Ge&&He(rt)):at.onReadyBeingFired?(at.onReadyBeingFired.push(rt),Ge&&He(rt)):(He(rt),Qe=K,Ge||He(function Xe(){Qe.on.ready.unsubscribe(rt),Qe.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(ue=this,Zl(Ql.prototype,function(ft,Xe){this.db=ue;var Ge=Ks,Qe=null;if(Xe)try{Ge=Xe()}catch(gt){Qe=gt}var at=ft._ctx,Xe=at.table,ft=Xe.hook.reading.fire;this._ctx={table:Xe,index:at.index,isPrimKey:!at.index||Xe.schema.primKey.keyPath&&at.index===Xe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Qe,or:at.or,valueMapper:ft!==Te?ft:null}})),this.Table=(we=this,Zl(Kh.prototype,function(He,rt,Ge){this.db=we,this._tx=Ge,this.name=He,this.schema=rt,this.hook=we._allTables[He]?we._allTables[He].hook:ds(null,{creating:[Ne,Oe],reading:[B,Te],updating:[oe,Oe],deleting:[de,Oe]})})),this.Transaction=(Me=this,Zl(Qh.prototype,function(He,rt,Ge,Qe,at){var Xe=this;this.db=Me,this.mode=He,this.storeNames=rt,this.schema=Ge,this.chromeTransactionDurability=Qe,this.idbtrans=null,this.on=ds(this,"complete","error","abort"),this.parent=at||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(ft,gt){Xe._resolve=ft,Xe._reject=gt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(ft){var gt=Xe.active;return Xe.active=!1,Xe.on.error.fire(ft),Xe.parent?Xe.parent._reject(ft):gt&&Xe.idbtrans&&Xe.idbtrans.abort(),$r(ft)})})),this.Version=($e=this,Zl(k1.prototype,function(He){this.db=$e,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,Zl(Xs.prototype,function(He,rt,Ge){if(this.db=We,this._ctx={table:He,index:rt===":id"?null:rt,or:Ge},this._cmp=this._ascending=Un,this._descending=function(Qe,at){return Un(at,Qe)},this._max=function(Qe,at){return 0<Un(Qe,at)?Qe:at},this._min=function(Qe,at){return Un(Qe,at)<0?Qe:at},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new ke.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(K.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(K.name,"'. Closing db now to resume the delete request.")),K.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(K.name,"') was blocked")):console.warn("Upgrade '".concat(K.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=ru(j.IDBKeyRange),this._createTransaction=function(He,rt,Ge,Qe){return new K.Transaction(He,rt,Ge,K._options.chromeTransactionDurability,Qe)},this._fireOnBlocked=function(He){K.on("blocked").fire(He),To.filter(function(rt){return rt.name===K.name&&rt!==K&&!rt._state.vcFired}).map(function(rt){return rt.on("versionchange").fire(He)})},this.use(Ng),this.use(Zd),this.use(R1),this.use(T1),this.use(Rg);var tt=new Proxy(this,{get:function(He,rt,Ge){if(rt==="_vip")return!0;if(rt==="table")return function(at){return Nc(K.table(at),tt)};var Qe=Reflect.get(He,rt,Ge);return Qe instanceof Kh?Nc(Qe,tt):rt==="tables"?Qe.map(function(at){return Nc(at,tt)}):rt==="_createTransaction"?function(){return Nc(Qe.apply(this,arguments),tt)}:Qe}});this.vip=tt,ne.forEach(function(He){return He(K)})}var su,ai=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Dg=(Yd.prototype.subscribe=function(k,j,K){return this._subscribe(k&&typeof k!="function"?k:{next:k,error:j,complete:K})},Yd.prototype[ai]=function(){return this},Yd);function Yd(k){this._subscribe=k}try{su={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{su={indexedDB:null,IDBKeyRange:null}}function jg(k){var j,K=!1,ne=new Dg(function(ue){var we=Q(k),Me,$e=!1,We={},Ye={},tt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,Me&&Me.abort(),He&&ga.storagemutated.unsubscribe(Ge))}};ue.start&&ue.start(tt);var He=!1,rt=function(){return ls(Qe)},Ge=function(at){Hd(We,at),op(Ye,We)&&rt()},Qe=function(){var at,Xe,ft;!$e&&su.indexedDB&&(We={},at={},Me&&Me.abort(),Me=new AbortController,ft=function(gt){var bt=U();try{we&&In();var wt=Xt(k,gt);return wt=we?wt.finally(zn):wt}finally{bt&&$()}}(Xe={subscr:at,signal:Me.signal,requery:rt,querier:k,trans:null}),Promise.resolve(ft).then(function(gt){K=!0,j=gt,$e||Xe.signal.aborted||(We={},function(bt){for(var wt in bt)if(h(bt,wt))return;return 1}(Ye=at)||He||(ga(tu,Ge),He=!0),ls(function(){return!$e&&ue.next&&ue.next(gt)}))},function(gt){K=!1,["DatabaseClosedError","AbortError"].includes(gt==null?void 0:gt.name)||$e||ls(function(){$e||ue.error&&ue.error(gt)})}))};return setTimeout(rt,0),tt});return ne.hasValue=function(){return K},ne.getValue=function(){return j},ne}var al=eo;function fp(k){var j=ps;try{ps=!0,ga.storagemutated.fire(k),up(k,!0)}finally{ps=j}}p(al,r(r({},it),{delete:function(k){return new al(k,{addons:[]}).delete()},exists:function(k){return new al(k,{addons:[]}).open().then(function(j){return j.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(k){try{return j=al.dependencies,K=j.indexedDB,j=j.IDBKeyRange,(Ud(K)?Promise.resolve(K.databases()).then(function(ne){return ne.map(function(ue){return ue.name}).filter(function(ue){return ue!==Ws})}):np(K,j).toCollection().primaryKeys()).then(k)}catch{return $r(new ke.MissingAPI)}var j,K},defineClass:function(){return function(k){u(this,k)}},ignoreTransaction:function(k){return Ae.trans?os(Ae.transless,k):k()},vip:rp,async:function(k){return function(){try{var j=Tc(k.apply(this,arguments));return j&&typeof j.then=="function"?j:M.resolve(j)}catch(K){return $r(K)}}},spawn:function(k,j,K){try{var ne=Tc(k.apply(K,j||[]));return ne&&typeof ne.then=="function"?ne:M.resolve(ne)}catch(ue){return $r(ue)}},currentTransaction:{get:function(){return Ae.trans||null}},waitFor:function(k,j){return j=M.resolve(typeof k=="function"?al.ignoreTransaction(k):k).timeout(j||6e4),Ae.trans?Ae.trans.waitFor(j):j},Promise:M,debug:{get:function(){return Le},set:function(k){Se(k)}},derive:b,extend:u,props:p,override:E,Events:ds,on:ga,liveQuery:jg,extendObservabilitySet:Hd,getByKeyPath:O,setByKeyPath:I,delByKeyPath:function(k,j){typeof j=="string"?I(k,j,void 0):"length"in j&&[].map.call(j,function(K){I(k,K,void 0)})},shallowClone:D,deepClone:Z,getObjectDiff:Gd,cmp:Un,asap:A,minKey:-1/0,addons:[],connections:To,errnames:Pe,dependencies:su,cache:nl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(k){return parseInt(k)}).reduce(function(k,j,K){return k+j/Math.pow(10,2*K)})})),al.maxKey=ru(al.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ga(tu,function(k){ps||(k=new CustomEvent(Qs,{detail:k}),ps=!0,dispatchEvent(k),ps=!1)}),addEventListener(Qs,function(k){k=k.detail,ps||fp(k)}));var lu,ps=!1,Ua=function(){};return typeof BroadcastChannel<"u"&&((Ua=function(){(lu=new BroadcastChannel(Qs)).onmessage=function(k){return k.data&&fp(k.data)}})(),typeof lu.unref=="function"&&lu.unref(),ga(tu,function(k){ps||lu.postMessage(k)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(k){if(!eo.disableBfCache&&k.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),lu!=null&&lu.close();for(var j=0,K=To;j<K.length;j++)K[j].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(k){!eo.disableBfCache&&k.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),Ua(),fp({all:new ya(-1/0,[[]])}))})),M.rejectionMapper=function(k,j){return!k||k instanceof re||k instanceof TypeError||k instanceof SyntaxError||!k.name||!ze[k.name]?k:(j=new ze[k.name](j||k.message,k),"stack"in k&&v(j,"stack",{get:function(){return this.inner.stack}}),j)},Se(Le),r(eo,Object.freeze({__proto__:null,Dexie:eo,liveQuery:jg,Entity:Id,cmp:Un,PropModification:Jl,replacePrefix:function(k,j){return new Jl({replacePrefix:[k,j]})},add:function(k){return new Jl({add:k})},remove:function(k){return new Jl({remove:k})},default:eo,RangeSet:ya,mergeRanges:tl,rangesOverlap:kg}),{default:eo}),eo})}(fb)),fb.exports}var bU=yU();const $2=Qa(bU),YR=Symbol.for("Dexie"),kb=globalThis[YR]||(globalThis[YR]=$2);if($2.semVer!==kb.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${$2.semVer} and ${kb.semVer}`);const{liveQuery:b1e,mergeRanges:v1e,rangesOverlap:w1e,RangeSet:_1e,cmp:x1e,Entity:S1e,PropModification:E1e,replacePrefix:C1e,add:k1e,remove:A1e}=kb,Gv=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},Gn=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Bu=(...e)=>Gn(e.map(t=>t.trim()).filter(Boolean).join("/")),Wv=e=>{const t=Gn(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},sa=e=>{const t=Gn(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Ab=(e,t)=>Gn(e==="/"?`/${t}`:`${e}/${t}`);class vU extends kb{constructor(){super("LiteChatDatabase_Rewrite_v1");Ha(this,"conversations");Ha(this,"interactions");Ha(this,"mods");Ha(this,"appState");Ha(this,"providerConfigs");Ha(this,"apiKeys");Ha(this,"syncRepos");Ha(this,"projects");this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}).upgrade(async n=>{console.log("Upgrading DB to version 5, adding unique path to projects.");const r=n.table("projects"),a=await r.toArray(),i=[],o=new Map(a.map(u=>[u.id,u])),s=(u,c)=>{if(!u.parentId)return Gn(`/${u.name}`);const f=c.get(u.parentId);if(!f)return console.error(`Upgrade Error: Parent project ${u.parentId} not found for project ${u.id}. Defaulting path.`),Gn(`/__ORPHANED__/${u.name}`);const h=s(f,c);return Gn(`${h}/${u.name}`)};for(const u of a)if(!u.path){const c=s(u,o);i.push(r.update(u.id,{path:c}))}await Promise.all(i),console.log(`Updated paths for ${i.length} projects.`)}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const sn=new vU,Qp=e=>({...e,...e.createdAt&&{createdAt:new Date(e.createdAt)},...e.updatedAt&&{updatedAt:new Date(e.updatedAt)}});class Gt{static async loadConversations(){try{return(await sn.conversations.orderBy("updatedAt").reverse().toArray()).map(Qp)}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await sn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await sn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await sn.interactions.where({conversationId:t}).sortBy("index")).map(r=>({...r,...r.startedAt&&{startedAt:new Date(r.startedAt)},...r.endedAt&&{endedAt:new Date(r.endedAt)}}))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await sn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await sn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await sn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await sn.mods.orderBy("loadOrder").toArray()).map(n=>({...n,...n.createdAt&&{createdAt:new Date(n.createdAt)}}))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await sn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await sn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await sn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await sn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=sn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>({...Qp(r),...r.modelsLastFetchedAt&&{modelsLastFetchedAt:new Date(r.modelsLastFetchedAt)}}))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await sn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await sn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=sn.apiKeys)==null?void 0:t.toArray())??[]).map(Qp)}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await sn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await sn.transaction("rw",[sn.apiKeys,sn.providerConfigs],async()=>{const n=await sn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await sn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await sn.syncRepos.toArray()).map(n=>({...Qp(n),...n.lastPulledAt&&{lastPulledAt:new Date(n.lastPulledAt)},...n.lastPushedAt&&{lastPushedAt:new Date(n.lastPushedAt)}}))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await sn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await sn.transaction("rw",[sn.syncRepos,sn.conversations],async()=>{const n=await sn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await sn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await sn.projects.orderBy("updatedAt").reverse().toArray()).map(Qp)}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await sn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await sn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await sn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>sn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await sn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await sn.transaction("rw",[sn.projects,sn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await sn.transaction("rw",[sn.conversations,sn.interactions,sn.mods,sn.appState,sn.providerConfigs,sn.apiKeys,sn.syncRepos,sn.projects],async()=>{await sn.interactions.clear(),await sn.conversations.clear(),await sn.projects.clear(),await sn.mods.clear(),await sn.appState.clear(),await sn.providerConfigs.clear(),await sn.apiKeys.clear(),await sn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const ar=ql(Hl((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n});try{const r=await Gt.loadInteractionsForConversation(n);r.sort((a,i)=>a.index-i.index),e({interactions:r,status:"idle"})}catch(r){console.error("InteractionStore: Error loading interactions",r),e({error:"Failed load interactions",status:"error"})}},_addInteractionToState:n=>{const r=t().interactions;if(r.some(a=>a.id===n.id))console.warn(`InteractionStore: Interaction ${n.id} already exists in state.`);else{const a=[...r,n];a.sort((i,o)=>i.index-o.index),e({interactions:a})}},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&(s.toolResults=[...r.metadata.toolResults])),Object.assign(o,{...r,metadata:void 0}),o.metadata=s}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)?a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r:console.warn(`InteractionStore: Tried to append chunk to non-streaming interaction buffer ${n}.`)})},_removeInteractionFromState:n=>{const a=t().interactions.filter(i=>i.id!==n);e({interactions:a})},addInteractionAndPersist:async n=>{const a=t().interactions.filter(u=>u.conversationId===n.conversationId),i=a.reduce((u,c)=>Math.max(u,c.index),-1)+1,o=a.length>0?a[a.length-1].id:null,s={...n,index:i,parentId:o};t()._addInteractionToState(s);try{return await Gt.saveInteraction(s),s}catch(u){throw console.error("InteractionStore: Error persisting added interaction",u),t()._removeInteractionFromState(s.id),e({error:"Failed to save interaction"}),u}},updateInteractionAndPersist:async n=>{try{await Gt.saveInteraction({...n})}catch(r){throw console.error(`InteractionStore: Error persisting final update for ${n.id}`,r),e({error:"Failed to save final interaction state"}),r}},deleteInteraction:async n=>{const r=t().interactions.find(i=>i.id===n);if(!r)return;const a={...r};t()._removeInteractionFromState(n),t()._removeStreamingId(n);try{await Gt.deleteInteraction(n)}catch(i){throw console.error("InteractionStore: Error deleting interaction",i),t()._addInteractionToState(a),a.status==="STREAMING"&&t()._addStreamingId(n),e({error:"Failed to delete interaction"}),i}},setCurrentConversationId:n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions."),e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null})},setError:n=>{e(r=>{r.error=n,n?r.status="error":r.status==="error"&&(r.status=r.streamingInteractionIds.length>0?"streaming":"idle")})},setStatus:n=>{t().status!==n&&e({status:n})},_addStreamingId:n=>{e(r=>{r.streamingInteractionIds.includes(n)||(r.streamingInteractionIds.push(n),r.activeStreamBuffers[n]="",r.streamingInteractionIds.length===1&&(r.status="streaming"),r.error=null)})},_removeStreamingId:n=>{e(r=>{const a=r.streamingInteractionIds.indexOf(n);a!==-1&&(r.streamingInteractionIds.splice(a,1),delete r.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),r.streamingInteractionIds.length===0&&r.status==="streaming"&&(r.status=r.error?"error":"idle"))})}})));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_U=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),XR=e=>{const t=_U(e);return t.charAt(0).toUpperCase()+t.slice(1)},$O=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},u)=>R.createElement("svg",{ref:u,...xU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:$O("lucide",a),...s},[...o.map(([c,f])=>R.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=(e,t)=>{const n=R.forwardRef(({className:r,...a},i)=>R.createElement(SU,{ref:i,iconNode:t,className:$O(`lucide-${wU(XR(e))}`,`lucide-${e}`,r),...a}));return n.displayName=XR(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],CU=rn("archive",EU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],AU=rn("arrow-down",kU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],wo=rn("check",TU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Kv=rn("chevron-down",RU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],IU=rn("chevron-left",NU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],iC=rn("chevron-right",OU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jU=rn("chevron-up",DU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Zv=rn("chevrons-up-down",MU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ps=rn("circle-alert",PU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Tb=rn("circle-check",FU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],oC=rn("clipboard",LU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],BO=rn("cloud-upload",$U);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],zO=rn("copy",BU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Rb=rn("download",zU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qU=rn("eye-off",UU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],VU=rn("eye",HU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],WU=rn("file-archive",GU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],ZU=rn("file-json",KU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],XU=rn("file-question",YU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],QU=rn("file-text",JU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],tq=rn("file",eq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],rq=rn("folder-git",nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],iq=rn("folder-open",aq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],sC=rn("folder-plus",oq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sq=[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]],lq=rn("folder-sync",sq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],cq=rn("folder-up",uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Yv=rn("folder",dq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],lC=rn("git-branch",fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],pq=rn("git-commit-horizontal",hq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],gq=rn("git-merge",mq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],bq=rn("git-pull-request",yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],wq=rn("grip-vertical",vq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],xq=rn("house",_q);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Eq=rn("image",Sq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],UO=rn("info",Cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Aq=rn("key",kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Zn=rn("loader-circle",Tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Nq=rn("message-square",Rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Oq=rn("music",Iq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],jq=rn("panel-left-close",Dq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Pq=rn("panel-right-close",Mq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Lq=rn("paperclip",Fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],uC=rn("pen",$q);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Xv=rn("plus",Bq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jv=rn("refresh-cw",zq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],qq=rn("rotate-ccw",Uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cC=rn("save",Hq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Qv=rn("search",Vq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],Wq=rn("send-horizontal",Gq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Zq=rn("settings-2",Kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],qO=rn("settings",Yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],Jq=rn("sliders-horizontal",Xq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],B2=rn("square-pen",Qq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],tH=rn("square",eH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],qu=rn("trash-2",nH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],aH=rn("triangle-alert",rH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],oH=rn("upload",iH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lH=rn("user",sH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],cH=rn("video",uH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],Nb=rn("wrench",dH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Us=rn("x",fH),hH="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Lo=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=hH[n[e]&63];return t};function pH(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ei=pH(),Ib=ql(Hl(e=>({attachedFilesMetadata:[],enabledTools:new Set,addAttachedFile:t=>{e(n=>{if(n.attachedFilesMetadata.some(a=>a.source==="direct"&&t.source==="direct"?a.name===t.name:a.source==="vfs"&&t.source==="vfs"?a.path===t.path:!1))console.warn(`InputStore: File "${t.name}" (source: ${t.source}) already attached. Skipping.`);else{const a={id:crypto.randomUUID(),...t};n.attachedFilesMetadata.push(a)}})},removeAttachedFile:t=>{e(n=>{n.attachedFilesMetadata=n.attachedFilesMetadata.filter(r=>r.id!==t)})},clearAttachedFiles:()=>{e({attachedFilesMetadata:[],enabledTools:new Set})},setEnabledTools:t=>{e(n=>{n.enabledTools=t(n.enabledTools)})}}))),mH=nC("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function gH({className:e,variant:t,asChild:n=!1,...r}){const a=n?OO:"span";return y.jsx(a,{"data-slot":"badge",className:Nt(mH({variant:t}),e),...r})}var Is=vO();const HO=Qa(Is);function yH(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const bH=e=>{switch(e){case"success":return _H;case"info":return SH;case"warning":return xH;case"error":return EH;default:return null}},vH=Array(12).fill(0),wH=({visible:e,className:t})=>vt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},vt.createElement("div",{className:"sonner-spinner"},vH.map((n,r)=>vt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),_H=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),xH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),SH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),EH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),CH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},vt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),vt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),kH=()=>{const[e,t]=vt.useState(document.hidden);return vt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let z2=1;class AH{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:z2++,o=this.toasts.find(u=>u.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:r}),{...u,...t,id:i,dismissible:s,title:r}):u):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async c=>{if(o=["resolve",c],vt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(RH(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,p=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,p=typeof n.description=="function"?await n.description(c):n.description,v=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...v})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof f=="object"&&!vt.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((c,f)=>s.then(()=>o[0]==="reject"?f(o[1]):c(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||z2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const wi=new AH,TH=(e,t)=>{const n=(t==null?void 0:t.id)||z2++;return wi.addToast({title:e,...t,id:n}),n},RH=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",NH=TH,IH=()=>wi.toasts,OH=()=>wi.getActiveToasts(),dt=Object.assign(NH,{success:wi.success,info:wi.info,warning:wi.warning,error:wi.error,custom:wi.custom,message:wi.message,promise:wi.promise,dismiss:wi.dismiss,loading:wi.loading},{getHistory:IH,getToasts:OH});yH("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Dy(e){return e.label!==void 0}const DH=3,jH="24px",MH="16px",JR=4e3,PH=356,FH=14,LH=45,$H=200;function _s(...e){return e.filter(Boolean).join(" ")}function BH(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const zH=e=>{var t,n,r,a,i,o,s,u,c;const{invert:f,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:b,heights:_,index:S,toasts:x,expanded:E,removeToast:C,defaultRichColors:A,closeButton:O,style:I,cancelButtonStyle:D,actionButtonStyle:z,className:W="",descriptionClassName:ee="",duration:F,position:Z,gap:V,expandByDefault:ae,classNames:ie,icons:te,closeButtonAriaLabel:X="Close toast"}=e,[ce,G]=vt.useState(null),[Q,Y]=vt.useState(null),[re,be]=vt.useState(!1),[_e,Ie]=vt.useState(!1),[Pe,Re]=vt.useState(!1),[ke,ze]=vt.useState(!1),[it,Oe]=vt.useState(!1),[Te,B]=vt.useState(0),[Ce,Ne]=vt.useState(0),de=vt.useRef(h.duration||F||JR),oe=vt.useRef(null),J=vt.useRef(null),xe=S===0,Le=S+1<=b,Se=h.type,Ve=h.dismissible!==!1,xt=h.className||"",ht=h.descriptionClassName||"",Et=vt.useMemo(()=>_.findIndex(je=>je.toastId===h.id)||0,[_,h.id]),Lt=vt.useMemo(()=>{var je;return(je=h.closeButton)!=null?je:O},[h.closeButton,O]),Tt=vt.useMemo(()=>h.duration||F||JR,[h.duration,F]),Ut=vt.useRef(0),ge=vt.useRef(0),N=vt.useRef(0),q=vt.useRef(null),[he,De]=Z.split("-"),ve=vt.useMemo(()=>_.reduce((je,Ke,Ct)=>Ct>=Et?je:je+Ke.height,0),[_,Et]),Ae=kH(),le=h.invert||f,ct=Se==="loading";ge.current=vt.useMemo(()=>Et*V+ve,[Et,ve]),vt.useEffect(()=>{de.current=Tt},[Tt]),vt.useEffect(()=>{be(!0)},[]),vt.useEffect(()=>{const je=J.current;if(je){const Ke=je.getBoundingClientRect().height;return Ne(Ke),v(Ct=>[{toastId:h.id,height:Ke,position:h.position},...Ct]),()=>v(Ct=>Ct.filter(ye=>ye.toastId!==h.id))}},[v,h.id]),vt.useLayoutEffect(()=>{if(!re)return;const je=J.current,Ke=je.style.height;je.style.height="auto";const Ct=je.getBoundingClientRect().height;je.style.height=Ke,Ne(Ct),v(ye=>ye.find($=>$.toastId===h.id)?ye.map($=>$.toastId===h.id?{...$,height:Ct}:$):[{toastId:h.id,height:Ct,position:h.position},...ye])},[re,h.title,h.description,v,h.id]);const yt=vt.useCallback(()=>{Ie(!0),B(ge.current),v(je=>je.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},$H)},[h,C,v,ge]);vt.useEffect(()=>{if(h.promise&&Se==="loading"||h.duration===1/0||h.type==="loading")return;let je;return E||g||Ae?(()=>{if(N.current<Ut.current){const ye=new Date().getTime()-Ut.current;de.current=de.current-ye}N.current=new Date().getTime()})():(()=>{de.current!==1/0&&(Ut.current=new Date().getTime(),je=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),yt()},de.current))})(),()=>clearTimeout(je)},[E,g,h,Se,Ae,yt]),vt.useEffect(()=>{h.delete&&yt()},[yt,h.delete]);function M(){var je;if(te!=null&&te.loading){var Ke;return vt.createElement("div",{className:_s(ie==null?void 0:ie.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Se==="loading"},te.loading)}return vt.createElement(wH,{className:_s(ie==null?void 0:ie.loader,h==null||(je=h.classNames)==null?void 0:je.loader),visible:Se==="loading"})}const Be=h.icon||(te==null?void 0:te[Se])||bH(Se);var et,me;return vt.createElement("li",{tabIndex:0,ref:J,className:_s(W,xt,ie==null?void 0:ie.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ie==null?void 0:ie.default,ie==null?void 0:ie[Se],h==null||(n=h.classNames)==null?void 0:n[Se]),"data-sonner-toast":"","data-rich-colors":(et=h.richColors)!=null?et:A,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":re,"data-promise":!!h.promise,"data-swiped":it,"data-removed":_e,"data-visible":Le,"data-y-position":he,"data-x-position":De,"data-index":S,"data-front":xe,"data-swiping":Pe,"data-dismissible":Ve,"data-type":Se,"data-invert":le,"data-swipe-out":ke,"data-swipe-direction":Q,"data-expanded":!!(E||ae&&re),style:{"--index":S,"--toasts-before":S,"--z-index":x.length-S,"--offset":`${_e?Te:ge.current}px`,"--initial-height":ae?"auto":`${Ce}px`,...I,...h.style},onDragEnd:()=>{Re(!1),G(null),q.current=null},onPointerDown:je=>{ct||!Ve||(oe.current=new Date,B(ge.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(Re(!0),q.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,Ke,Ct;if(ke||!Ve)return;q.current=null;const ye=Number(((je=J.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),U=Number(((Ke=J.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$=new Date().getTime()-((Ct=oe.current)==null?void 0:Ct.getTime()),H=ce==="x"?ye:U,pe=Math.abs(H)/$;if(Math.abs(H)>=LH||pe>.11){B(ge.current),h.onDismiss==null||h.onDismiss.call(h,h),Y(ce==="x"?ye>0?"right":"left":U>0?"down":"up"),yt(),ze(!0);return}else{var fe,Fe;(fe=J.current)==null||fe.style.setProperty("--swipe-amount-x","0px"),(Fe=J.current)==null||Fe.style.setProperty("--swipe-amount-y","0px")}Oe(!1),Re(!1),G(null)},onPointerMove:je=>{var Ke,Ct,ye;if(!q.current||!Ve||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const $=je.clientY-q.current.y,H=je.clientX-q.current.x;var pe;const fe=(pe=e.swipeDirections)!=null?pe:BH(Z);!ce&&(Math.abs(H)>1||Math.abs($)>1)&&G(Math.abs(H)>Math.abs($)?"x":"y");let Fe={x:0,y:0};const ot=jt=>1/(1.5+Math.abs(jt)/20);if(ce==="y"){if(fe.includes("top")||fe.includes("bottom"))if(fe.includes("top")&&$<0||fe.includes("bottom")&&$>0)Fe.y=$;else{const jt=$*ot($);Fe.y=Math.abs(jt)<Math.abs($)?jt:$}}else if(ce==="x"&&(fe.includes("left")||fe.includes("right")))if(fe.includes("left")&&H<0||fe.includes("right")&&H>0)Fe.x=H;else{const jt=H*ot(H);Fe.x=Math.abs(jt)<Math.abs(H)?jt:H}(Math.abs(Fe.x)>0||Math.abs(Fe.y)>0)&&Oe(!0),(Ct=J.current)==null||Ct.style.setProperty("--swipe-amount-x",`${Fe.x}px`),(ye=J.current)==null||ye.style.setProperty("--swipe-amount-y",`${Fe.y}px`)}},Lt&&!h.jsx&&Se!=="loading"?vt.createElement("button",{"aria-label":X,"data-disabled":ct,"data-close-button":!0,onClick:ct||!Ve?()=>{}:()=>{yt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:_s(ie==null?void 0:ie.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(me=te==null?void 0:te.close)!=null?me:CH):null,(Se||h.icon||h.promise)&&h.icon!==null&&((te==null?void 0:te[Se])!==null||h.icon)?vt.createElement("div",{"data-icon":"",className:_s(ie==null?void 0:ie.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||M():null,h.type!=="loading"?Be:null):null,vt.createElement("div",{"data-content":"",className:_s(ie==null?void 0:ie.content,h==null||(i=h.classNames)==null?void 0:i.content)},vt.createElement("div",{"data-title":"",className:_s(ie==null?void 0:ie.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?vt.createElement("div",{"data-description":"",className:_s(ee,ht,ie==null?void 0:ie.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),vt.isValidElement(h.cancel)?h.cancel:h.cancel&&Dy(h.cancel)?vt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||D,onClick:je=>{Dy(h.cancel)&&Ve&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,je),yt())},className:_s(ie==null?void 0:ie.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,vt.isValidElement(h.action)?h.action:h.action&&Dy(h.action)?vt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||z,onClick:je=>{Dy(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,je),!je.defaultPrevented&&yt())},className:_s(ie==null?void 0:ie.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function QR(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function UH(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?MH:jH;function u(c){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):u(s)}),n}const qH=vt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:u,offset:c,mobileOffset:f,theme:h="light",richColors:p,duration:g,style:v,visibleToasts:b=DH,toastOptions:_,dir:S=QR(),gap:x=FH,icons:E,containerAriaLabel:C="Notifications"}=t,[A,O]=vt.useState([]),I=vt.useMemo(()=>Array.from(new Set([a].concat(A.filter(Q=>Q.position).map(Q=>Q.position)))),[A,a]),[D,z]=vt.useState([]),[W,ee]=vt.useState(!1),[F,Z]=vt.useState(!1),[V,ae]=vt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ie=vt.useRef(null),te=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=vt.useRef(null),ce=vt.useRef(!1),G=vt.useCallback(Q=>{O(Y=>{var re;return(re=Y.find(be=>be.id===Q.id))!=null&&re.delete||wi.dismiss(Q.id),Y.filter(({id:be})=>be!==Q.id)})},[]);return vt.useEffect(()=>wi.subscribe(Q=>{if(Q.dismiss){requestAnimationFrame(()=>{O(Y=>Y.map(re=>re.id===Q.id?{...re,delete:!0}:re))});return}setTimeout(()=>{HO.flushSync(()=>{O(Y=>{const re=Y.findIndex(be=>be.id===Q.id);return re!==-1?[...Y.slice(0,re),{...Y[re],...Q},...Y.slice(re+1)]:[Q,...Y]})})})}),[A]),vt.useEffect(()=>{if(h!=="system"){ae(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ae("dark"):ae("light")),typeof window>"u")return;const Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:Y})=>{ae(Y?"dark":"light")})}catch{Q.addListener(({matches:re})=>{try{ae(re?"dark":"light")}catch(be){console.error(be)}})}},[h]),vt.useEffect(()=>{A.length<=1&&ee(!1)},[A]),vt.useEffect(()=>{const Q=Y=>{var re;if(i.every(Ie=>Y[Ie]||Y.code===Ie)){var _e;ee(!0),(_e=ie.current)==null||_e.focus()}Y.code==="Escape"&&(document.activeElement===ie.current||(re=ie.current)!=null&&re.contains(document.activeElement))&&ee(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[i]),vt.useEffect(()=>{if(ie.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,ce.current=!1)}},[ie.current]),vt.createElement("section",{ref:n,"aria-label":`${C} ${te}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((Q,Y)=>{var re;const[be,_e]=Q.split("-");return A.length?vt.createElement("ol",{key:Q,dir:S==="auto"?QR():S,tabIndex:-1,ref:ie,className:u,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":be,"data-lifted":W&&A.length>1&&!o,"data-x-position":_e,style:{"--front-toast-height":`${((re=D[0])==null?void 0:re.height)||0}px`,"--width":`${PH}px`,"--gap":`${x}px`,...v,...UH(c,f)},onBlur:Ie=>{ce.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(ce.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||ce.current||(ce.current=!0,X.current=Ie.relatedTarget)},onMouseEnter:()=>ee(!0),onMouseMove:()=>ee(!0),onMouseLeave:()=>{F||ee(!1)},onDragEnd:()=>ee(!1),onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},A.filter(Ie=>!Ie.position&&Y===0||Ie.position===Q).map((Ie,Pe)=>{var Re,ke;return vt.createElement(zH,{key:Ie.id,icons:E,index:Pe,toast:Ie,defaultRichColors:p,duration:(Re=_==null?void 0:_.duration)!=null?Re:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:b,closeButton:(ke=_==null?void 0:_.closeButton)!=null?ke:s,interacting:F,position:Q,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:G,toasts:A.filter(ze=>ze.position==Ie.position),heights:D.filter(ze=>ze.position==Ie.position),setHeights:z,expandByDefault:o,gap:x,expanded:W,swipeDirections:t.swipeDirections})})):null}))});async function HH(e,t){const n=Na.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const VH=({InputAreaRenderer:e,onSubmit:t,className:n})=>{const r=R.useRef(null),{attachedFilesMetadata:a,clearAttachedFiles:i,removeAttachedFile:o}=Ib(),[s,u]=R.useState(!1),c=Na(x=>x.promptControls),f=ar(x=>x.status==="streaming"),h=R.useMemo(()=>Object.values(c).filter(x=>x.show?x.show():!0).sort((x,E)=>(x.order??1/0)-(E.order??1/0)),[c]),p=R.useCallback(()=>{i(),h.forEach(x=>{x.clearOnSubmit&&x.clearOnSubmit()})},[h,i]),g=R.useCallback(async x=>{var ee;x==null||x.preventDefault();const C=(((ee=r.current)==null?void 0:ee.getValue())??"").trim();if(f){console.warn("Submit prevented: AI is currently streaming.");return}const A=Ib.getState().attachedFilesMetadata;if(!(C||A.length>0)){console.warn("Submit prevented: No content provided.");return}u(!0);const I=JSON.parse(JSON.stringify(A));let D={id:Lo(),content:C,parameters:{},metadata:{attachedFiles:I}};for(const F of h){if(F.getParameters)try{const Z=await F.getParameters();Z&&typeof Z=="object"&&(D.parameters={...D.parameters,...Z})}catch(Z){console.error(`Error getting parameters from control ${F.id}:`,Z)}if(F.getMetadata)try{const Z=await F.getMetadata();if(Z&&typeof Z=="object"){const{attachedFiles:V,...ae}=Z;V&&console.warn(`Control ${F.id} tried to overwrite attachedFiles metadata. Ignoring.`),D.metadata={...D.metadata,...ae,attachedFiles:D.metadata.attachedFiles}}}catch(Z){console.error(`Error getting metadata from control ${F.id}:`,Z)}}Ei.emit("prompt:submitted",{turnData:D});const z=await HH("middleware:prompt:turnFinalize",{turnData:D});if(z===!1){console.log("Submission cancelled by middleware:prompt:turnFinalize."),u(!1);return}const W=z&&typeof z=="object"?z.turnData:D;try{await t(W),p()}catch(F){console.error("Error during final prompt submission:",F),dt.error(`Submission failed: ${F instanceof Error?F.message:String(F)}`)}finally{u(!1)}},[t,f,p,h]),v=R.useCallback(()=>{g()},[g]),b=h.some(x=>!!x.renderer),_=h.some(x=>!!x.triggerRenderer);R.useEffect(()=>()=>{i()},[i]);const S=s||f||a.length===0;return y.jsxs("form",{onSubmit:g,className:Nt("flex flex-col border-t border-[--border] bg-background",n),children:[b&&y.jsx("div",{className:"p-2 border-b border-[--border] bg-muted/30",children:y.jsx(LR,{controls:h,area:"panel"})}),a.length>0&&y.jsx("div",{className:"px-3 md:px-4 pt-2 border-b border-border/50 max-h-24 overflow-y-auto",children:y.jsx("div",{className:"flex flex-wrap gap-1.5 pb-1.5",children:a.map(x=>y.jsxs(gH,{variant:"secondary",className:"flex items-center gap-1.5 pl-1.5 pr-0.5 py-0.5 text-xs",children:[y.jsx("span",{className:"truncate max-w-[150px]",title:x.name,children:x.name}),y.jsxs("span",{className:"text-muted-foreground/80",children:["(",Gv(x.size),")"]}),y.jsx(zt,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>o(x.id),"aria-label":`Remove ${x.name}`,disabled:s||f,children:y.jsx(Us,{className:"h-3 w-3"})})]},x.id))})}),y.jsxs("div",{className:"p-3 md:p-4 flex items-end gap-2",children:[y.jsx("div",{className:"flex-grow",children:y.jsx(e,{ref:r,onSubmit:v,disabled:s||f,initialValue:""})}),y.jsx("div",{className:"flex-shrink-0",children:y.jsx(zt,{type:"submit",disabled:S,size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Send message",children:y.jsx(Wq,{className:"h-5 w-5"})})})]}),_&&y.jsx("div",{className:"px-3 md:px-4 pb-2 pt-1 flex-grow",children:y.jsx(LR,{controls:h,area:"trigger",className:"flex flex-wrap items-center gap-1 [&>*]:flex-shrink-0"})})]})};function Ft(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function GH(e,t){const n=R.createContext(t),r=i=>{const{children:o,...s}=i,u=R.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function a(i){const o=R.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function di(e,t=[]){let n=[];function r(i,o){const s=R.createContext(o),u=n.length;n=[...n,o];const c=h=>{var S;const{scope:p,children:g,...v}=h,b=((S=p==null?void 0:p[e])==null?void 0:S[u])||s,_=R.useMemo(()=>v,Object.values(v));return y.jsx(b.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,p){var b;const g=((b=p==null?void 0:p[e])==null?void 0:b[u])||s,v=R.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const a=()=>{const i=n.map(o=>R.createContext(o));return function(s){const u=(s==null?void 0:s[e])||i;return R.useMemo(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return a.scopeName=e,[r,WH(a,...t)]}function WH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...s,...h}},{});return R.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var KH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jt=KH.reduce((e,t)=>{const n=Uu(`Primitive.${t}`),r=R.forwardRef((a,i)=>{const{asChild:o,...s}=a,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function VO(e,t){e&&Is.flushSync(()=>e.dispatchEvent(t))}function Ca(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e}),R.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function ZH(e,t=globalThis==null?void 0:globalThis.document){const n=Ca(e);R.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var YH="DismissableLayer",U2="dismissableLayer.update",XH="dismissableLayer.pointerDownOutside",JH="dismissableLayer.focusOutside",eN,GO=R.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wh=R.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...u}=e,c=R.useContext(GO),[f,h]=R.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=R.useState({}),v=_n(t,I=>h(I)),b=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),S=b.indexOf(_),x=f?b.indexOf(f):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=x>=S,A=tV(I=>{const D=I.target,z=[...c.branches].some(W=>W.contains(D));!C||z||(a==null||a(I),o==null||o(I),I.defaultPrevented||s==null||s())},p),O=nV(I=>{const D=I.target;[...c.branches].some(W=>W.contains(D))||(i==null||i(I),o==null||o(I),I.defaultPrevented||s==null||s())},p);return ZH(I=>{x===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&s&&(I.preventDefault(),s()))},p),R.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(eN=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),tN(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=eN)}},[f,p,n,c]),R.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),tN())},[f,c]),R.useEffect(()=>{const I=()=>g({});return document.addEventListener(U2,I),()=>document.removeEventListener(U2,I)},[]),y.jsx(Jt.div,{...u,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:Ft(e.onFocusCapture,O.onFocusCapture),onBlurCapture:Ft(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ft(e.onPointerDownCapture,A.onPointerDownCapture)})});wh.displayName=YH;var QH="DismissableLayerBranch",eV=R.forwardRef((e,t)=>{const n=R.useContext(GO),r=R.useRef(null),a=_n(t,r);return R.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Jt.div,{...e,ref:a})});eV.displayName=QH;function tV(e,t=globalThis==null?void 0:globalThis.document){const n=Ca(e),r=R.useRef(!1),a=R.useRef(()=>{});return R.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let u=function(){WO(XH,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function nV(e,t=globalThis==null?void 0:globalThis.document){const n=Ca(e),r=R.useRef(!1);return R.useEffect(()=>{const a=i=>{i.target&&!r.current&&WO(JH,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tN(){const e=new CustomEvent(U2);document.dispatchEvent(e)}function WO(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?VO(a,i):a.dispatchEvent(i)}var $a=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},rV=bO[" useId ".trim().toString()]||(()=>{}),aV=0;function Aa(e){const[t,n]=R.useState(rV());return $a(()=>{n(r=>r??String(aV++))},[e]),t?`radix-${t}`:""}const iV=["top","right","bottom","left"],Hu=Math.min,Hi=Math.max,Ob=Math.round,jy=Math.floor,Ms=e=>({x:e,y:e}),oV={left:"right",right:"left",bottom:"top",top:"bottom"},sV={start:"end",end:"start"};function q2(e,t,n){return Hi(e,Hu(t,n))}function Ml(e,t){return typeof e=="function"?e(t):e}function Pl(e){return e.split("-")[0]}function _h(e){return e.split("-")[1]}function dC(e){return e==="x"?"y":"x"}function fC(e){return e==="y"?"height":"width"}function Vu(e){return["top","bottom"].includes(Pl(e))?"y":"x"}function hC(e){return dC(Vu(e))}function lV(e,t,n){n===void 0&&(n=!1);const r=_h(e),a=hC(e),i=fC(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Db(o)),[o,Db(o)]}function uV(e){const t=Db(e);return[H2(e),t,H2(t)]}function H2(e){return e.replace(/start|end/g,t=>sV[t])}function cV(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function dV(e,t,n,r){const a=_h(e);let i=cV(Pl(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(H2)))),i}function Db(e){return e.replace(/left|right|bottom|top/g,t=>oV[t])}function fV(e){return{top:0,right:0,bottom:0,left:0,...e}}function KO(e){return typeof e!="number"?fV(e):{top:e,right:e,bottom:e,left:e}}function jb(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function nN(e,t,n){let{reference:r,floating:a}=e;const i=Vu(t),o=hC(t),s=fC(o),u=Pl(t),c=i==="y",f=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,p=r[s]/2-a[s]/2;let g;switch(u){case"top":g={x:f,y:r.y-a.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(_h(t)){case"start":g[o]-=p*(n&&c?-1:1);break;case"end":g[o]+=p*(n&&c?-1:1);break}return g}const hV=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=nN(c,r,u),p=r,g={},v=0;for(let b=0;b<s.length;b++){const{name:_,fn:S}=s[b],{x,y:E,data:C,reset:A}=await S({x:f,y:h,initialPlacement:r,placement:p,strategy:a,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});f=x??f,h=E??h,g={...g,[_]:{...g[_],...C}},A&&v<=50&&(v++,typeof A=="object"&&(A.placement&&(p=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):A.rects),{x:f,y:h}=nN(c,p,u)),b=-1)}return{x:f,y:h,placement:p,strategy:a,middlewareData:g}};async function Em(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=Ml(t,e),v=KO(g),_=s[p?h==="floating"?"reference":"floating":h],S=jb(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:u})),x=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},A=jb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:x,offsetParent:E,strategy:u}):x);return{top:(S.top-A.top+v.top)/C.y,bottom:(A.bottom-S.bottom+v.bottom)/C.y,left:(S.left-A.left+v.left)/C.x,right:(A.right-S.right+v.right)/C.x}}const pV=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:u}=t,{element:c,padding:f=0}=Ml(e,t)||{};if(c==null)return{};const h=KO(f),p={x:n,y:r},g=hC(a),v=fC(g),b=await o.getDimensions(c),_=g==="y",S=_?"top":"left",x=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-p[g]-i.floating[v],A=p[g]-i.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=O?O[E]:0;(!I||!await(o.isElement==null?void 0:o.isElement(O)))&&(I=s.floating[E]||i.floating[v]);const D=C/2-A/2,z=I/2-b[v]/2-1,W=Hu(h[S],z),ee=Hu(h[x],z),F=W,Z=I-b[v]-ee,V=I/2-b[v]/2+D,ae=q2(F,V,Z),ie=!u.arrow&&_h(a)!=null&&V!==ae&&i.reference[v]/2-(V<F?W:ee)-b[v]/2<0,te=ie?V<F?V-F:V-Z:0;return{[g]:p[g]+te,data:{[g]:ae,centerOffset:V-ae-te,...ie&&{alignmentOffset:te}},reset:ie}}}),mV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:u,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,..._}=Ml(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const S=Pl(a),x=Vu(s),E=Pl(s)===s,C=await(u.isRTL==null?void 0:u.isRTL(c.floating)),A=p||(E||!b?[Db(s)]:uV(s)),O=v!=="none";!p&&O&&A.push(...dV(s,b,v,C));const I=[s,...A],D=await Em(t,_),z=[];let W=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&z.push(D[S]),h){const V=lV(a,o,C);z.push(D[V[0]],D[V[1]])}if(W=[...W,{placement:a,overflows:z}],!z.every(V=>V<=0)){var ee,F;const V=(((ee=i.flip)==null?void 0:ee.index)||0)+1,ae=I[V];if(ae)return{data:{index:V,overflows:W},reset:{placement:ae}};let ie=(F=W.filter(te=>te.overflows[0]<=0).sort((te,X)=>te.overflows[1]-X.overflows[1])[0])==null?void 0:F.placement;if(!ie)switch(g){case"bestFit":{var Z;const te=(Z=W.filter(X=>{if(O){const ce=Vu(X.placement);return ce===x||ce==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ce=>ce>0).reduce((ce,G)=>ce+G,0)]).sort((X,ce)=>X[1]-ce[1])[0])==null?void 0:Z[0];te&&(ie=te);break}case"initialPlacement":ie=s;break}if(a!==ie)return{reset:{placement:ie}}}return{}}}};function rN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function aN(e){return iV.some(t=>e[t]>=0)}const gV=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Ml(e,t);switch(r){case"referenceHidden":{const i=await Em(t,{...a,elementContext:"reference"}),o=rN(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:aN(o)}}}case"escaped":{const i=await Em(t,{...a,altBoundary:!0}),o=rN(i,n.floating);return{data:{escapedOffsets:o,escaped:aN(o)}}}default:return{}}}}};async function yV(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Pl(n),s=_h(n),u=Vu(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&u?-1:1,h=Ml(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof v=="number"&&(g=s==="end"?v*-1:v),u?{x:g*f,y:p*c}:{x:p*c,y:g*f}}const bV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,u=await yV(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},vV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x:S,y:x}=_;return{x:S,y:x}}},...u}=Ml(e,t),c={x:n,y:r},f=await Em(t,u),h=Vu(Pl(a)),p=dC(h);let g=c[p],v=c[h];if(i){const _=p==="y"?"top":"left",S=p==="y"?"bottom":"right",x=g+f[_],E=g-f[S];g=q2(x,g,E)}if(o){const _=h==="y"?"top":"left",S=h==="y"?"bottom":"right",x=v+f[_],E=v-f[S];v=q2(x,v,E)}const b=s.fn({...t,[p]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[h]:o}}}}}},wV=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:u=!0,crossAxis:c=!0}=Ml(e,t),f={x:n,y:r},h=Vu(a),p=dC(h);let g=f[p],v=f[h];const b=Ml(s,t),_=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(u){const E=p==="y"?"height":"width",C=i.reference[p]-i.floating[E]+_.mainAxis,A=i.reference[p]+i.reference[E]-_.mainAxis;g<C?g=C:g>A&&(g=A)}if(c){var S,x;const E=p==="y"?"width":"height",C=["top","left"].includes(Pl(a)),A=i.reference[h]-i.floating[E]+(C&&((S=o.offset)==null?void 0:S[h])||0)+(C?0:_.crossAxis),O=i.reference[h]+i.reference[E]+(C?0:((x=o.offset)==null?void 0:x[h])||0)-(C?_.crossAxis:0);v<A?v=A:v>O&&(v=O)}return{[p]:g,[h]:v}}}},_V=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:u=()=>{},...c}=Ml(e,t),f=await Em(t,c),h=Pl(a),p=_h(a),g=Vu(a)==="y",{width:v,height:b}=i.floating;let _,S;h==="top"||h==="bottom"?(_=h,S=p===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(S=h,_=p==="end"?"top":"bottom");const x=b-f.top-f.bottom,E=v-f.left-f.right,C=Hu(b-f[_],x),A=Hu(v-f[S],E),O=!t.middlewareData.shift;let I=C,D=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(D=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=x),O&&!p){const W=Hi(f.left,0),ee=Hi(f.right,0),F=Hi(f.top,0),Z=Hi(f.bottom,0);g?D=v-2*(W!==0||ee!==0?W+ee:Hi(f.left,f.right)):I=b-2*(F!==0||Z!==0?F+Z:Hi(f.top,f.bottom))}await u({...t,availableWidth:D,availableHeight:I});const z=await o.getDimensions(s.floating);return v!==z.width||b!==z.height?{reset:{rects:!0}}:{}}}};function ew(){return typeof window<"u"}function xh(e){return ZO(e)?(e.nodeName||"").toLowerCase():"#document"}function Gi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qs(e){var t;return(t=(ZO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ZO(e){return ew()?e instanceof Node||e instanceof Gi(e).Node:!1}function Go(e){return ew()?e instanceof Element||e instanceof Gi(e).Element:!1}function Fs(e){return ew()?e instanceof HTMLElement||e instanceof Gi(e).HTMLElement:!1}function iN(e){return!ew()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gi(e).ShadowRoot}function v0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Wo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function xV(e){return["table","td","th"].includes(xh(e))}function tw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function pC(e){const t=mC(),n=Go(e)?Wo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function SV(e){let t=Gu(e);for(;Fs(t)&&!Zf(t);){if(pC(t))return t;if(tw(t))return null;t=Gu(t)}return null}function mC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Zf(e){return["html","body","#document"].includes(xh(e))}function Wo(e){return Gi(e).getComputedStyle(e)}function nw(e){return Go(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gu(e){if(xh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||iN(e)&&e.host||qs(e);return iN(t)?t.host:t}function YO(e){const t=Gu(e);return Zf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Fs(t)&&v0(t)?t:YO(t)}function Cm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=YO(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Gi(a);if(i){const s=V2(o);return t.concat(o,o.visualViewport||[],v0(a)?a:[],s&&n?Cm(s):[])}return t.concat(a,Cm(a,[],n))}function V2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function XO(e){const t=Wo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Fs(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Ob(n)!==i||Ob(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function gC(e){return Go(e)?e:e.contextElement}function zf(e){const t=gC(e);if(!Fs(t))return Ms(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=XO(t);let o=(i?Ob(n.width):n.width)/r,s=(i?Ob(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const EV=Ms(0);function JO(e){const t=Gi(e);return!mC()||!t.visualViewport?EV:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function CV(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gi(e)?!1:t}function sd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=gC(e);let o=Ms(1);t&&(r?Go(r)&&(o=zf(r)):o=zf(e));const s=CV(i,n,r)?JO(i):Ms(0);let u=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,f=a.width/o.x,h=a.height/o.y;if(i){const p=Gi(i),g=r&&Go(r)?Gi(r):r;let v=p,b=V2(v);for(;b&&r&&g!==v;){const _=zf(b),S=b.getBoundingClientRect(),x=Wo(b),E=S.left+(b.clientLeft+parseFloat(x.paddingLeft))*_.x,C=S.top+(b.clientTop+parseFloat(x.paddingTop))*_.y;u*=_.x,c*=_.y,f*=_.x,h*=_.y,u+=E,c+=C,v=Gi(b),b=V2(v)}}return jb({width:f,height:h,x:u,y:c})}function yC(e,t){const n=nw(e).scrollLeft;return t?t.left+n:sd(qs(e)).left+n}function QO(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:yC(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function kV(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=qs(r),s=t?tw(t.floating):!1;if(r===o||s&&i)return n;let u={scrollLeft:0,scrollTop:0},c=Ms(1);const f=Ms(0),h=Fs(r);if((h||!h&&!i)&&((xh(r)!=="body"||v0(o))&&(u=nw(r)),Fs(r))){const g=sd(r);c=zf(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const p=o&&!h&&!i?QO(o,u,!0):Ms(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+f.x+p.x,y:n.y*c.y-u.scrollTop*c.y+f.y+p.y}}function AV(e){return Array.from(e.getClientRects())}function TV(e){const t=qs(e),n=nw(e),r=e.ownerDocument.body,a=Hi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Hi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+yC(e);const s=-n.scrollTop;return Wo(r).direction==="rtl"&&(o+=Hi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function RV(e,t){const n=Gi(e),r=qs(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;const c=mC();(!c||c&&t==="fixed")&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s,y:u}}function NV(e,t){const n=sd(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Fs(e)?zf(e):Ms(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,u=a*i.x,c=r*i.y;return{width:o,height:s,x:u,y:c}}function oN(e,t,n){let r;if(t==="viewport")r=RV(e,n);else if(t==="document")r=TV(qs(e));else if(Go(t))r=NV(t,n);else{const a=JO(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return jb(r)}function eD(e,t){const n=Gu(e);return n===t||!Go(n)||Zf(n)?!1:Wo(n).position==="fixed"||eD(n,t)}function IV(e,t){const n=t.get(e);if(n)return n;let r=Cm(e,[],!1).filter(s=>Go(s)&&xh(s)!=="body"),a=null;const i=Wo(e).position==="fixed";let o=i?Gu(e):e;for(;Go(o)&&!Zf(o);){const s=Wo(o),u=pC(o);!u&&s.position==="fixed"&&(a=null),(i?!u&&!a:!u&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||v0(o)&&!u&&eD(e,o))?r=r.filter(f=>f!==o):a=s,o=Gu(o)}return t.set(e,r),r}function OV(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?tw(t)?[]:IV(t,this._c):[].concat(n),r],s=o[0],u=o.reduce((c,f)=>{const h=oN(t,f,a);return c.top=Hi(h.top,c.top),c.right=Hu(h.right,c.right),c.bottom=Hu(h.bottom,c.bottom),c.left=Hi(h.left,c.left),c},oN(t,s,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function DV(e){const{width:t,height:n}=XO(e);return{width:t,height:n}}function jV(e,t,n){const r=Fs(t),a=qs(t),i=n==="fixed",o=sd(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=Ms(0);if(r||!r&&!i)if((xh(t)!=="body"||v0(a))&&(s=nw(t)),r){const p=sd(t,!0,i,t);u.x=p.x+t.clientLeft,u.y=p.y+t.clientTop}else a&&(u.x=yC(a));const c=a&&!r&&!i?QO(a,s):Ms(0),f=o.left+s.scrollLeft-u.x-c.x,h=o.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function xx(e){return Wo(e).position==="static"}function sN(e,t){if(!Fs(e)||Wo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return qs(e)===n&&(n=n.ownerDocument.body),n}function tD(e,t){const n=Gi(e);if(tw(e))return n;if(!Fs(e)){let a=Gu(e);for(;a&&!Zf(a);){if(Go(a)&&!xx(a))return a;a=Gu(a)}return n}let r=sN(e,t);for(;r&&xV(r)&&xx(r);)r=sN(r,t);return r&&Zf(r)&&xx(r)&&!pC(r)?n:r||SV(e)||n}const MV=async function(e){const t=this.getOffsetParent||tD,n=this.getDimensions,r=await n(e.floating);return{reference:jV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function PV(e){return Wo(e).direction==="rtl"}const FV={convertOffsetParentRelativeRectToViewportRelativeRect:kV,getDocumentElement:qs,getClippingRect:OV,getOffsetParent:tD,getElementRects:MV,getClientRects:AV,getDimensions:DV,getScale:zf,isElement:Go,isRTL:PV};function nD(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function LV(e,t){let n=null,r;const a=qs(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:p,height:g}=c;if(s||t(),!p||!g)return;const v=jy(h),b=jy(a.clientWidth-(f+p)),_=jy(a.clientHeight-(h+g)),S=jy(f),E={rootMargin:-v+"px "+-b+"px "+-_+"px "+-S+"px",threshold:Hi(0,Hu(1,u))||1};let C=!0;function A(O){const I=O[0].intersectionRatio;if(I!==u){if(!C)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!nD(c,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(A,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(A,E)}n.observe(e)}return o(!0),i}function $V(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=gC(e),f=a||i?[...c?Cm(c):[],...Cm(t)]:[];f.forEach(S=>{a&&S.addEventListener("scroll",n,{passive:!0}),i&&S.addEventListener("resize",n)});const h=c&&s?LV(c,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(S=>{let[x]=S;x&&x.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!u&&g.observe(c),g.observe(t));let v,b=u?sd(e):null;u&&_();function _(){const S=sd(e);b&&!nD(b,S)&&n(),b=S,v=requestAnimationFrame(_)}return n(),()=>{var S;f.forEach(x=>{a&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),h==null||h(),(S=g)==null||S.disconnect(),g=null,u&&cancelAnimationFrame(v)}}const BV=bV,zV=vV,UV=mV,qV=_V,HV=gV,lN=pV,VV=wV,GV=(e,t,n)=>{const r=new Map,a={platform:FV,...n},i={...a.platform,_c:r};return hV(e,t,{...a,platform:i})};var hb=typeof document<"u"?R.useLayoutEffect:R.useEffect;function Mb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Mb(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Mb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function rD(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function uN(e,t){const n=rD(e);return Math.round(t*n)/n}function Sx(e){const t=R.useRef(e);return hb(()=>{t.current=e}),t}function WV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:u,open:c}=e,[f,h]=R.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=R.useState(r);Mb(p,r)||g(r);const[v,b]=R.useState(null),[_,S]=R.useState(null),x=R.useCallback(X=>{X!==O.current&&(O.current=X,b(X))},[]),E=R.useCallback(X=>{X!==I.current&&(I.current=X,S(X))},[]),C=i||v,A=o||_,O=R.useRef(null),I=R.useRef(null),D=R.useRef(f),z=u!=null,W=Sx(u),ee=Sx(a),F=Sx(c),Z=R.useCallback(()=>{if(!O.current||!I.current)return;const X={placement:t,strategy:n,middleware:p};ee.current&&(X.platform=ee.current),GV(O.current,I.current,X).then(ce=>{const G={...ce,isPositioned:F.current!==!1};V.current&&!Mb(D.current,G)&&(D.current=G,Is.flushSync(()=>{h(G)}))})},[p,t,n,ee,F]);hb(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[c]);const V=R.useRef(!1);hb(()=>(V.current=!0,()=>{V.current=!1}),[]),hb(()=>{if(C&&(O.current=C),A&&(I.current=A),C&&A){if(W.current)return W.current(C,A,Z);Z()}},[C,A,Z,W,z]);const ae=R.useMemo(()=>({reference:O,floating:I,setReference:x,setFloating:E}),[x,E]),ie=R.useMemo(()=>({reference:C,floating:A}),[C,A]),te=R.useMemo(()=>{const X={position:n,left:0,top:0};if(!ie.floating)return X;const ce=uN(ie.floating,f.x),G=uN(ie.floating,f.y);return s?{...X,transform:"translate("+ce+"px, "+G+"px)",...rD(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ce,top:G}},[n,s,ie.floating,f.x,f.y]);return R.useMemo(()=>({...f,update:Z,refs:ae,elements:ie,floatingStyles:te}),[f,Z,ae,ie,te])}const KV=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?lN({element:r.current,padding:a}).fn(n):{}:r?lN({element:r,padding:a}).fn(n):{}}}},ZV=(e,t)=>({...BV(e),options:[e,t]}),YV=(e,t)=>({...zV(e),options:[e,t]}),XV=(e,t)=>({...VV(e),options:[e,t]}),JV=(e,t)=>({...UV(e),options:[e,t]}),QV=(e,t)=>({...qV(e),options:[e,t]}),eG=(e,t)=>({...HV(e),options:[e,t]}),tG=(e,t)=>({...KV(e),options:[e,t]});var nG="Arrow",aD=R.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(Jt.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});aD.displayName=nG;var rG=aD;function rw(e){const[t,n]=R.useState(void 0);return $a(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var bC="Popper",[iD,cc]=di(bC),[aG,oD]=iD(bC),sD=e=>{const{__scopePopper:t,children:n}=e,[r,a]=R.useState(null);return y.jsx(aG,{scope:t,anchor:r,onAnchorChange:a,children:n})};sD.displayName=bC;var lD="PopperAnchor",uD=R.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=oD(lD,n),o=R.useRef(null),s=_n(t,o);return R.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(Jt.div,{...a,ref:s})});uD.displayName=lD;var vC="PopperContent",[iG,oG]=iD(vC),cD=R.forwardRef((e,t)=>{var Pe,Re,ke,ze,it,Oe;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,_=oD(vC,n),[S,x]=R.useState(null),E=_n(t,Te=>x(Te)),[C,A]=R.useState(null),O=rw(C),I=(O==null?void 0:O.width)??0,D=(O==null?void 0:O.height)??0,z=r+(i!=="center"?"-"+i:""),W=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},ee=Array.isArray(c)?c:[c],F=ee.length>0,Z={padding:W,boundary:ee.filter(lG),altBoundary:F},{refs:V,floatingStyles:ae,placement:ie,isPositioned:te,middlewareData:X}=WV({strategy:"fixed",placement:z,whileElementsMounted:(...Te)=>$V(...Te,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[ZV({mainAxis:a+D,alignmentAxis:o}),u&&YV({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?XV():void 0,...Z}),u&&JV({...Z}),QV({...Z,apply:({elements:Te,rects:B,availableWidth:Ce,availableHeight:Ne})=>{const{width:de,height:oe}=B.reference,J=Te.floating.style;J.setProperty("--radix-popper-available-width",`${Ce}px`),J.setProperty("--radix-popper-available-height",`${Ne}px`),J.setProperty("--radix-popper-anchor-width",`${de}px`),J.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),C&&tG({element:C,padding:s}),uG({arrowWidth:I,arrowHeight:D}),p&&eG({strategy:"referenceHidden",...Z})]}),[ce,G]=hD(ie),Q=Ca(v);$a(()=>{te&&(Q==null||Q())},[te,Q]);const Y=(Pe=X.arrow)==null?void 0:Pe.x,re=(Re=X.arrow)==null?void 0:Re.y,be=((ke=X.arrow)==null?void 0:ke.centerOffset)!==0,[_e,Ie]=R.useState();return $a(()=>{S&&Ie(window.getComputedStyle(S).zIndex)},[S]),y.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:te?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(ze=X.transformOrigin)==null?void 0:ze.x,(it=X.transformOrigin)==null?void 0:it.y].join(" "),...((Oe=X.hide)==null?void 0:Oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(iG,{scope:n,placedSide:ce,onArrowChange:A,arrowX:Y,arrowY:re,shouldHideArrow:be,children:y.jsx(Jt.div,{"data-side":ce,"data-align":G,...b,ref:E,style:{...b.style,animation:te?void 0:"none"}})})})});cD.displayName=vC;var dD="PopperArrow",sG={top:"bottom",right:"left",bottom:"top",left:"right"},fD=R.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=oG(dD,r),o=sG[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(rG,{...a,ref:n,style:{...a.style,display:"block"}})})});fD.displayName=dD;function lG(e){return e!==null}var uG=e=>({name:"transformOrigin",options:e,fn(t){var _,S,x;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[c,f]=hD(n),h={start:"0%",center:"50%",end:"100%"}[f],p=(((S=a.arrow)==null?void 0:S.x)??0)+s/2,g=(((x=a.arrow)==null?void 0:x.y)??0)+u/2;let v="",b="";return c==="bottom"?(v=o?h:`${p}px`,b=`${-u}px`):c==="top"?(v=o?h:`${p}px`,b=`${r.floating.height+u}px`):c==="right"?(v=`${-u}px`,b=o?h:`${g}px`):c==="left"&&(v=`${r.floating.width+u}px`,b=o?h:`${g}px`),{data:{x:v,y:b}}}});function hD(e){const[t,n="center"]=e.split("-");return[t,n]}var aw=sD,w0=uD,iw=cD,ow=fD,cG="Portal",Sh=R.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=R.useState(!1);$a(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?HO.createPortal(y.jsx(Jt.div,{...r,ref:t}),o):null});Sh.displayName=cG;function dG(e,t){return R.useReducer((n,r)=>t[n][r]??n,e)}var Ia=e=>{const{present:t,children:n}=e,r=fG(t),a=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),i=_n(r.ref,hG(a));return typeof n=="function"||r.isPresent?R.cloneElement(a,{ref:i}):null};Ia.displayName="Presence";function fG(e){const[t,n]=R.useState(),r=R.useRef(null),a=R.useRef(e),i=R.useRef("none"),o=e?"mounted":"unmounted",[s,u]=dG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const c=My(r.current);i.current=s==="mounted"?c:"none"},[s]),$a(()=>{const c=r.current,f=a.current;if(f!==e){const p=i.current,g=My(c);e?u("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(f&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),$a(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const b=My(r.current).includes(g.animationName);if(g.target===t&&b&&(u("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},p=g=>{g.target===t&&(i.current=My(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:R.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function My(e){return(e==null?void 0:e.animationName)||"none"}function hG(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var pG=bO[" useInsertionEffect ".trim().toString()]||$a;function Ko({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=mG({defaultProp:t,onChange:n}),s=e!==void 0,u=s?e:a;{const f=R.useRef(e!==void 0);R.useEffect(()=>{const h=f.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=s},[s,r])}const c=R.useCallback(f=>{var h;if(s){const p=gG(f)?f(e):f;p!==e&&((h=o.current)==null||h.call(o,p))}else i(f)},[s,e,i,o]);return[u,c]}function mG({defaultProp:e,onChange:t}){const[n,r]=R.useState(e),a=R.useRef(n),i=R.useRef(t);return pG(()=>{i.current=t},[t]),R.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function gG(e){return typeof e=="function"}var pD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yG="VisuallyHidden",mD=R.forwardRef((e,t)=>y.jsx(Jt.span,{...e,ref:t,style:{...pD,...e.style}}));mD.displayName=yG;var bG=mD,[sw,T1e]=di("Tooltip",[cc]),lw=cc(),gD="TooltipProvider",vG=700,G2="tooltip.open",[wG,wC]=sw(gD),yD=e=>{const{__scopeTooltip:t,delayDuration:n=vG,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=R.useRef(!0),s=R.useRef(!1),u=R.useRef(0);return R.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),y.jsx(wG,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:R.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:R.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:R.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};yD.displayName=gD;var km="Tooltip",[_G,_0]=sw(km),bD=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,u=wC(km,e.__scopeTooltip),c=lw(t),[f,h]=R.useState(null),p=Aa(),g=R.useRef(0),v=o??u.disableHoverableContent,b=s??u.delayDuration,_=R.useRef(!1),[S,x]=Ko({prop:r,defaultProp:a??!1,onChange:I=>{I?(u.onOpen(),document.dispatchEvent(new CustomEvent(G2))):u.onClose(),i==null||i(I)},caller:km}),E=R.useMemo(()=>S?_.current?"delayed-open":"instant-open":"closed",[S]),C=R.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,x(!0)},[x]),A=R.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x(!1)},[x]),O=R.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,x(!0),g.current=0},b)},[b,x]);return R.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(aw,{...c,children:y.jsx(_G,{scope:t,contentId:p,open:S,stateAttribute:E,trigger:f,onTriggerChange:h,onTriggerEnter:R.useCallback(()=>{u.isOpenDelayedRef.current?O():C()},[u.isOpenDelayedRef,O,C]),onTriggerLeave:R.useCallback(()=>{v?A():(window.clearTimeout(g.current),g.current=0)},[A,v]),onOpen:C,onClose:A,disableHoverableContent:v,children:n})})};bD.displayName=km;var W2="TooltipTrigger",vD=R.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=_0(W2,n),i=wC(W2,n),o=lw(n),s=R.useRef(null),u=_n(t,s,a.onTriggerChange),c=R.useRef(!1),f=R.useRef(!1),h=R.useCallback(()=>c.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(w0,{asChild:!0,...o,children:y.jsx(Jt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:u,onPointerMove:Ft(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ft(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Ft(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ft(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:Ft(e.onBlur,a.onClose),onClick:Ft(e.onClick,a.onClose)})})});vD.displayName=W2;var _C="TooltipPortal",[xG,SG]=sw(_C,{forceMount:void 0}),wD=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=_0(_C,t);return y.jsx(xG,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(Sh,{asChild:!0,container:a,children:r})})})};wD.displayName=_C;var Yf="TooltipContent",_D=R.forwardRef((e,t)=>{const n=SG(Yf,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=_0(Yf,e.__scopeTooltip);return y.jsx(Ia,{present:r||o.open,children:o.disableHoverableContent?y.jsx(xD,{side:a,...i,ref:t}):y.jsx(EG,{side:a,...i,ref:t})})}),EG=R.forwardRef((e,t)=>{const n=_0(Yf,e.__scopeTooltip),r=wC(Yf,e.__scopeTooltip),a=R.useRef(null),i=_n(t,a),[o,s]=R.useState(null),{trigger:u,onClose:c}=n,f=a.current,{onPointerInTransitChange:h}=r,p=R.useCallback(()=>{s(null),h(!1)},[h]),g=R.useCallback((v,b)=>{const _=v.currentTarget,S={x:v.clientX,y:v.clientY},x=TG(S,_.getBoundingClientRect()),E=RG(S,x),C=NG(b.getBoundingClientRect()),A=OG([...E,...C]);s(A),h(!0)},[h]);return R.useEffect(()=>()=>p(),[p]),R.useEffect(()=>{if(u&&f){const v=_=>g(_,f),b=_=>g(_,u);return u.addEventListener("pointerleave",v),f.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",v),f.removeEventListener("pointerleave",b)}}},[u,f,g,p]),R.useEffect(()=>{if(o){const v=b=>{const _=b.target,S={x:b.clientX,y:b.clientY},x=(u==null?void 0:u.contains(_))||(f==null?void 0:f.contains(_)),E=!IG(S,o);x?p():E&&(p(),c())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[u,f,o,c,p]),y.jsx(xD,{...e,ref:i})}),[CG,kG]=sw(km,{isInside:!1}),AG=Zz("TooltipContent"),xD=R.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,u=_0(Yf,n),c=lw(n),{onClose:f}=u;return R.useEffect(()=>(document.addEventListener(G2,f),()=>document.removeEventListener(G2,f)),[f]),R.useEffect(()=>{if(u.trigger){const h=p=>{const g=p.target;g!=null&&g.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),y.jsx(wh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:y.jsxs(iw,{"data-state":u.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(AG,{children:r}),y.jsx(CG,{scope:n,isInside:!0,children:y.jsx(bG,{id:u.contentId,role:"tooltip",children:a||r})})]})})});_D.displayName=Yf;var SD="TooltipArrow",ED=R.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=lw(n);return kG(SD,n).isInside?null:y.jsx(ow,{...a,...r,ref:t})});ED.displayName=SD;function TG(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function RG(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function NG(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function IG(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,p=u.y;f>r!=p>r&&n<(h-c)*(r-f)/(p-f)+c&&(a=!a)}return a}function OG(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),DG(t)}function DG(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var jG=yD,MG=bD,PG=vD,FG=wD,LG=_D,$G=ED;function kn({delayDuration:e=0,...t}){return y.jsx(jG,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function An({...e}){return y.jsx(kn,{children:y.jsx(MG,{"data-slot":"tooltip",...e})})}function Tn({...e}){return y.jsx(PG,{"data-slot":"tooltip-trigger",...e})}function Rn({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(FG,{children:y.jsxs(LG,{"data-slot":"tooltip-content",sideOffset:t,className:Nt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx($G,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const cN={};function BG(e){let t=cN[e];if(t)return t;t=cN[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Xf(e,t){typeof t!="string"&&(t=Xf.defaultChars);const n=BG(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=s<<6&1984|u&63;c<128?a+="":a+=String.fromCharCode(c),i+=3;continue}}if((s&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const f=s<<12&61440|u<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="":a+=String.fromCharCode(f),i+=6;continue}}if((s&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),f=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(f&192)===128){let h=s<<18&1835008|u<<12&258048|c<<6&4032|f&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Xf.defaultChars=";/?:@&=+$,#";Xf.componentChars="";const dN={};function zG(e){let t=dN[e];if(t)return t;t=dN[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function x0(e,t,n){typeof t!="string"&&(n=t,t=x0.defaultChars),typeof n>"u"&&(n=!0);const r=zG(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const u=e.charCodeAt(i+1);if(u>=56320&&u<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}x0.defaultChars=";/?:@&=+$,-_.!~*'()#";x0.componentChars="-_.!~*'()";function xC(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Pb(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const UG=/^([a-z0-9.+-]+:)/i,qG=/:[0-9]*$/,HG=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,VG=["<",">",'"',"`"," ","\r",`
`,"	"],GG=["{","}","|","\\","^","`"].concat(VG),WG=["'"].concat(GG),fN=["%","/","?",";","#"].concat(WG),hN=["/","?","#"],KG=255,pN=/^[+a-z0-9A-Z_-]{0,63}$/,ZG=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,mN={javascript:!0,"javascript:":!0},gN={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function SC(e,t){if(e&&e instanceof Pb)return e;const n=new Pb;return n.parse(e,t),n}Pb.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=HG.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=UG.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&mN[o])&&(i=i.substr(2),this.slashes=!0)),!mN[o]&&(a||o&&!gN[o])){let c=-1;for(let v=0;v<hN.length;v++)r=i.indexOf(hN[v]),r!==-1&&(c===-1||r<c)&&(c=r);let f,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(f=i.slice(0,h),i=i.slice(h+1),this.auth=f),c=-1;for(let v=0;v<fN.length;v++)r=i.indexOf(fN[v]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const p=i.slice(0,c);i=i.slice(c),this.parseHost(p),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,_=v.length;b<_;b++){const S=v[b];if(S&&!S.match(pN)){let x="";for(let E=0,C=S.length;E<C;E++)S.charCodeAt(E)>127?x+="x":x+=S[E];if(!x.match(pN)){const E=v.slice(0,b),C=v.slice(b+1),A=S.match(ZG);A&&(E.push(A[1]),C.unshift(A[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>KG&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),gN[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Pb.prototype.parseHost=function(e){let t=qG.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const YG=Object.freeze(Object.defineProperty({__proto__:null,decode:Xf,encode:x0,format:xC,parse:SC},Symbol.toStringTag,{value:"Module"})),CD=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kD=/[\0-\x1F\x7F-\x9F]/,XG=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,EC=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,AD=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,TD=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,JG=Object.freeze(Object.defineProperty({__proto__:null,Any:CD,Cc:kD,Cf:XG,P:EC,S:AD,Z:TD},Symbol.toStringTag,{value:"Module"})),QG=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),eW=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Ex;const tW=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),nW=(Ex=String.fromCodePoint)!==null&&Ex!==void 0?Ex:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function rW(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=tW.get(e))!==null&&t!==void 0?t:e}var ka;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ka||(ka={}));const aW=32;var Fu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Fu||(Fu={}));function K2(e){return e>=ka.ZERO&&e<=ka.NINE}function iW(e){return e>=ka.UPPER_A&&e<=ka.UPPER_F||e>=ka.LOWER_A&&e<=ka.LOWER_F}function oW(e){return e>=ka.UPPER_A&&e<=ka.UPPER_Z||e>=ka.LOWER_A&&e<=ka.LOWER_Z||K2(e)}function sW(e){return e===ka.EQUALS||oW(e)}var xa;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(xa||(xa={}));var Pu;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Pu||(Pu={}));class lW{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=xa.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Pu.Strict}startEntity(t){this.decodeMode=t,this.state=xa.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case xa.EntityStart:return t.charCodeAt(n)===ka.NUM?(this.state=xa.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=xa.NamedEntity,this.stateNamedEntity(t,n));case xa.NumericStart:return this.stateNumericStart(t,n);case xa.NumericDecimal:return this.stateNumericDecimal(t,n);case xa.NumericHex:return this.stateNumericHex(t,n);case xa.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|aW)===ka.LOWER_X?(this.state=xa.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=xa.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(K2(a)||iW(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(K2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ka.SEMI)this.consumed+=1;else if(this.decodeMode===Pu.Strict)return 0;return this.emitCodePoint(rW(this.result),this.consumed),this.errors&&(t!==ka.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Fu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=uW(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Pu.Attribute&&(i===0||sW(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Fu.VALUE_LENGTH)>>14,i!==0){if(o===ka.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Pu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Fu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Fu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case xa.NamedEntity:return this.result!==0&&(this.decodeMode!==Pu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case xa.NumericDecimal:return this.emitNumericEntity(0,2);case xa.NumericHex:return this.emitNumericEntity(0,3);case xa.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case xa.EntityStart:return 0}}}function RD(e){let t="";const n=new lW(e,r=>t+=nW(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const c=n.write(a,s+1);if(c<0){o=s+n.end();break}o=s+c,s=c===0?o+1:o}const u=t+a.slice(o);return t="",u}}function uW(e,t,n,r){const a=(t&Fu.BRANCH_LENGTH)>>7,i=t&Fu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=a?-1:e[n+u]-1}let o=n,s=o+a-1;for(;o<=s;){const u=o+s>>>1,c=e[u];if(c<r)o=u+1;else if(c>r)s=u-1;else return e[u+a]}return-1}const cW=RD(QG);RD(eW);function ND(e,t=Pu.Legacy){return cW(e,t)}function dW(e){return Object.prototype.toString.call(e)}function CC(e){return dW(e)==="[object String]"}const fW=Object.prototype.hasOwnProperty;function hW(e,t){return fW.call(e,t)}function uw(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function ID(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function kC(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Fb(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const OD=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,pW=/&([a-z#][a-z0-9]{1,31});/gi,mW=new RegExp(OD.source+"|"+pW.source,"gi"),gW=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function yW(e,t){if(t.charCodeAt(0)===35&&gW.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return kC(r)?Fb(r):e}const n=ND(e);return n!==e?n:e}function bW(e){return e.indexOf("\\")<0?e:e.replace(OD,"$1")}function Jf(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(mW,function(t,n,r){return n||yW(t,r)})}const vW=/[&<>"]/,wW=/[&<>"]/g,_W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function xW(e){return _W[e]}function Wu(e){return vW.test(e)?e.replace(wW,xW):e}const SW=/[.?*+^$[\]\\(){}|-]/g;function EW(e){return e.replace(SW,"\\$&")}function Tr(e){switch(e){case 9:case 32:return!0}return!1}function Am(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Tm(e){return EC.test(e)||AD.test(e)}function Rm(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function cw(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const CW={mdurl:YG,ucmicro:JG},kW=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:ID,assign:uw,escapeHtml:Wu,escapeRE:EW,fromCodePoint:Fb,has:hW,isMdAsciiPunct:Rm,isPunctChar:Tm,isSpace:Tr,isString:CC,isValidEntityCode:kC,isWhiteSpace:Am,lib:CW,normalizeReference:cw,unescapeAll:Jf,unescapeMd:bW},Symbol.toStringTag,{value:"Module"}));function AW(e,t,n){let r,a,i,o;const s=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=u,-1}}let c=-1;return a&&(c=e.pos),e.pos=u,c}function TW(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Jf(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=Jf(e.slice(t,a)),i.pos=a,i.ok=!0),i}function RW(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=Jf(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=Jf(e.slice(t,i)),o}const NW=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:TW,parseLinkLabel:AW,parseLinkTitle:RW},Symbol.toStringTag,{value:"Module"})),Hs={};Hs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Wu(i.content)+"</code>"};Hs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Wu(e[t].content)+`</code></pre>
`};Hs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?Jf(i.info).trim():"";let s="",u="";if(o){const f=o.split(/(\s+)/g);s=f[0],u=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,s,u)||Wu(i.content):c=Wu(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];f<0?h.push(["class",n.langPrefix+s]):(h[f]=h[f].slice(),h[f][1]+=" "+n.langPrefix+s);const p={attrs:h};return`<pre><code${a.renderAttrs(p)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};Hs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Hs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Hs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Hs.text=function(e,t){return Wu(e[t].content)};Hs.html_block=function(e,t){return e[t].content};Hs.html_inline=function(e,t){return e[t].content};function Eh(){this.rules=uw({},Hs)}Eh.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Wu(t.attrs[n][0])+'="'+Wu(t.attrs[n][1])+'"';return a};Eh.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};Eh.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Eh.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Eh.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ti(){this.__rules__=[],this.__cache__=null}Ti.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ti.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ti.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ti.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ti.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ti.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ti.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ti.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ti.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function es(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}es.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};es.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};es.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};es.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};es.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function DD(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}DD.prototype.Token=es;const IW=/\r\n?|\n/g,OW=/\0/g;function DW(e){let t;t=e.src.replace(IW,`
`),t=t.replace(OW,""),e.src=t}function jW(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function MW(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function PW(e){return/^<a[>\s]/i.test(e)}function FW(e){return/^<\/a\s*>/i.test(e)}function LW(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(PW(s.content)&&i>0&&i--,FW(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const u=s.content;let c=e.md.linkify.match(u);const f=[];let h=s.level,p=0;c.length>0&&c[0].index===0&&o>0&&a[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const v=c[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let _=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const S=c[g].index;if(S>p){const A=new e.Token("text","",0);A.content=u.slice(p,S),A.level=h,f.push(A)}const x=new e.Token("link_open","a",1);x.attrs=[["href",b]],x.level=h++,x.markup="linkify",x.info="auto",f.push(x);const E=new e.Token("text","",0);E.content=_,E.level=h,f.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",f.push(C),p=c[g].lastIndex}if(p<u.length){const g=new e.Token("text","",0);g.content=u.slice(p),g.level=h,f.push(g)}t[n].children=a=ID(a,o,f)}}}}const jD=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,$W=/\((c|tm|r)\)/i,BW=/\((c|tm|r)\)/ig,zW={c:"",r:"",tm:""};function UW(e,t){return zW[t.toLowerCase()]}function qW(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(BW,UW)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function HW(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&jD.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function VW(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&($W.test(e.tokens[t].content)&&qW(e.tokens[t].children),jD.test(e.tokens[t].content)&&HW(e.tokens[t].children))}const GW=/['"]/,yN=/['"]/g,bN="";function Py(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function WW(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,u=0,c=s.length;e:for(;u<c;){yN.lastIndex=u;const f=yN.exec(s);if(!f)break;let h=!0,p=!0;u=f.index+1;const g=f[0]==="'";let v=32;if(f.index-1>=0)v=s.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(u<c)b=s.charCodeAt(u);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const _=Rm(v)||Tm(String.fromCharCode(v)),S=Rm(b)||Tm(String.fromCharCode(b)),x=Am(v),E=Am(b);if(E?h=!1:S&&(x||_||(h=!1)),x?p=!1:_&&(E||S||(p=!1)),b===34&&f[0]==='"'&&v>=48&&v<=57&&(p=h=!1),h&&p&&(h=_,p=S),!h&&!p){g&&(i.content=Py(i.content,f.index,bN));continue}if(p)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let A,O;g?(A=t.md.options.quotes[2],O=t.md.options.quotes[3]):(A=t.md.options.quotes[0],O=t.md.options.quotes[1]),i.content=Py(i.content,f.index,O),e[C.token].content=Py(e[C.token].content,C.pos,A),u+=O.length-1,C.token===a&&(u+=A.length-1),s=i.content,c=s.length,r.length=n;continue e}}h?r.push({token:a,pos:f.index,single:g,level:o}):p&&g&&(i.content=Py(i.content,f.index,bN))}}}function KW(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!GW.test(e.tokens[t].content)||WW(e.tokens[t].children,e)}function ZW(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const Cx=[["normalize",DW],["block",jW],["inline",MW],["linkify",LW],["replacements",VW],["smartquotes",KW],["text_join",ZW]];function AC(){this.ruler=new Ti;for(let e=0;e<Cx.length;e++)this.ruler.push(Cx[e][0],Cx[e][1])}AC.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};AC.prototype.State=DD;function Vs(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,u=0,c=a.length,f=!1;o<c;o++){const h=a.charCodeAt(o);if(!f)if(Tr(h)){s++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(u),this.bsCount.push(0),f=!1,s=0,u=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Vs.prototype.push=function(e,t,n){const r=new es(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Vs.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Vs.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Vs.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Tr(r))break}return t};Vs.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Tr(this.src.charCodeAt(--t)))return t+1;return t};Vs.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Vs.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Vs.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let u=0;const c=this.bMarks[s];let f=c,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];f<h&&u<r;){const p=this.src.charCodeAt(f);if(Tr(p))p===9?u+=4-(u+this.bsCount[s])%4:u++;else if(f-c<this.tShift[s])u++;else break;f++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(f,h):i[o]=this.src.slice(f,h)}return i.join("")};Vs.prototype.Token=es;const YW=65536;function kx(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function vN(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function XW(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Tr(s)||o===45&&Tr(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Tr(C))return!1;i++}let u=kx(e,t+1),c=u.split("|");const f=[];for(let C=0;C<c.length;C++){const A=c[C].trim();if(!A){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=kx(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=vN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==f.length)return!1;if(r)return!0;const p=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const S=e.push("tr_open","tr",1);S.map=[t,t+1];for(let C=0;C<c.length;C++){const A=e.push("th_open","th",1);f[C]&&(A.attrs=[["style","text-align:"+f[C]]]);const O=e.push("inline","",0);O.content=c[C].trim(),O.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let x,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let O=0,I=g.length;O<I;O++)if(g[O](e,a,n,!0)){C=!0;break}if(C||(u=kx(e,a).trim(),!u)||e.sCount[a]-e.blkIndent>=4||(c=vN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>YW))break;if(a===t+2){const O=e.push("tbody_open","tbody",1);O.map=x=[t+2,0]}const A=e.push("tr_open","tr",1);A.map=[a,a+1];for(let O=0;O<h;O++){const I=e.push("td_open","td",1);f[O]&&(I.attrs=[["style","text-align:"+f[O]]]);const D=e.push("inline","",0);D.content=c[O]?c[O].trim():"",D.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return x&&(e.push("tbody_close","tbody",-1),x[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=p,e.line=a,!0}function JW(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function QW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let u=a-s;if(u<3)return!1;const c=e.src.slice(s,a),f=e.src.slice(a,i);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,p=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<u)&&(a=e.skipSpaces(a),!(a<i)))){p=!0;break}u=e.sCount[t],e.line=h+(p?1:0);const g=e.push("fence","code",0);return g.info=f,g.content=e.getLines(t+1,h,u,!0),g.markup=c,g.map=[t,e.line],!0}function eK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],u=[],c=[],f=[],h=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let A=e.sCount[v]+1,O,I;e.src.charCodeAt(a)===32?(a++,A++,I=!1,O=!0):e.src.charCodeAt(a)===9?(O=!0,(e.bsCount[v]+A)%4===3?(a++,A++,I=!1):I=!0):O=!1;let D=A;for(s.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const z=e.src.charCodeAt(a);if(Tr(z))z===9?D+=4-(D+e.bsCount[v]+(I?1:0))%4:D++;else break;a++}g=a>=i,u.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(O?1:0),c.push(e.sCount[v]),e.sCount[v]=D-A,f.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let A=0,O=h.length;A<O;A++)if(h[A](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}s.push(e.bMarks[v]),u.push(e.bsCount[v]),f.push(e.tShift[v]),c.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const S=[t,0];_.map=S,e.md.block.tokenize(e,t,v);const x=e.push("blockquote_close","blockquote",-1);x.markup=">",e.lineMax=o,e.parentType=p,S[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=u[E];return e.blkIndent=b,!0}function tK(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==o&&!Tr(c))return!1;c===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(s+1).join(String.fromCharCode(o)),!0}function wN(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Tr(i))return-1}return r}function _N(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Tr(i))?-1:a}function nK(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function rK(e,t,n,r){let a,i,o,s,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(f=!0);let h,p,g;if((g=_N(e,u))>=0){if(h=!0,o=e.bMarks[u]+e.tShift[u],p=Number(e.src.slice(o,g-1)),f&&p!==1)return!1}else if((g=wN(e,u))>=0)h=!1;else return!1;if(f&&e.skipSpaces(g)>=e.eMarks[u])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),p!==1&&(s.attrs=[["start",p]])):s=e.push("bullet_list_open","ul",1);const _=[u,0];s.map=_,s.markup=String.fromCharCode(v);let S=!1;const x=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";u<n;){i=g,a=e.eMarks[u];const C=e.sCount[u]+g-(e.bMarks[u]+e.tShift[u]);let A=C;for(;i<a;){const ae=e.src.charCodeAt(i);if(ae===9)A+=4-(A+e.bsCount[u])%4;else if(ae===32)A++;else break;i++}const O=i;let I;O>=a?I=1:I=A-C,I>4&&(I=1);const D=C+I;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(v);const z=[u,0];s.map=z,h&&(s.info=e.src.slice(o,g-1));const W=e.tight,ee=e.tShift[u],F=e.sCount[u],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=D,e.tight=!0,e.tShift[u]=O-e.bMarks[u],e.sCount[u]=A,O>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,u,n,!0),(!e.tight||S)&&(c=!1),S=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[u]=ee,e.sCount[u]=F,e.tight=W,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(v),u=e.line,z[1]=u,u>=n||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let V=!1;for(let ae=0,ie=x.length;ae<ie;ae++)if(x[ae](e,u,n,!0)){V=!0;break}if(V)break;if(h){if(g=_N(e,u),g<0)break;o=e.bMarks[u]+e.tShift[u]}else if(g=wN(e,u),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(v),_[1]=u,e.line=u,e.parentType=E,c&&nK(e,b),!0}function aK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(x){const E=e.lineMax;if(x>=E||e.isEmpty(x))return null;let C=!1;if(e.sCount[x]-e.blkIndent>3&&(C=!0),e.sCount[x]<0&&(C=!0),!C){const I=e.md.block.ruler.getRules("reference"),D=e.parentType;e.parentType="reference";let z=!1;for(let W=0,ee=I.length;W<ee;W++)if(I[W](e,x,E,!0)){z=!0;break}if(e.parentType=D,z)return null}const A=e.bMarks[x]+e.tShift[x],O=e.eMarks[x];return e.src.slice(A,O+1)}let u=e.src.slice(a,i+1);i=u.length;let c=-1;for(a=1;a<i;a++){const x=u.charCodeAt(a);if(x===91)return!1;if(x===93){c=a;break}else if(x===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(x===92&&(a++,a<i&&u.charCodeAt(a)===10)){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const x=u.charCodeAt(a);if(x===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(x))break}const f=e.md.helpers.parseLinkDestination(u,a,i);if(!f.ok)return!1;const h=e.md.normalizeLink(f.str);if(!e.md.validateLink(h))return!1;a=f.pos;const p=a,g=o,v=a;for(;a<i;a++){const x=u.charCodeAt(a);if(x===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Tr(x))break}let b=e.md.helpers.parseLinkTitle(u,a,i);for(;b.can_continue;){const x=s(o);if(x===null)break;u+=x,a=i,i=u.length,o++,b=e.md.helpers.parseLinkTitle(u,a,i,b)}let _;for(a<i&&v!==a&&b.ok?(_=b.str,a=b.pos):(_="",a=p,o=g);a<i;){const x=u.charCodeAt(a);if(!Tr(x))break;a++}if(a<i&&u.charCodeAt(a)!==10&&_)for(_="",a=p,o=g;a<i;){const x=u.charCodeAt(a);if(!Tr(x))break;a++}if(a<i&&u.charCodeAt(a)!==10)return!1;const S=cw(u.slice(1,c));return S?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[S]>"u"&&(e.env.references[S]={title:_,href:h}),e.line=o),!0):!1}const iK=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],oK="[a-zA-Z_:][a-zA-Z0-9:._-]*",sK="[^\"'=<>`\\x00-\\x20]+",lK="'[^']*'",uK='"[^"]*"',cK="(?:"+sK+"|"+lK+"|"+uK+")",dK="(?:\\s+"+oK+"(?:\\s*=\\s*"+cK+")?)",MD="<[A-Za-z][A-Za-z0-9\\-]*"+dK+"*\\s*\\/?>",PD="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",fK="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",hK="<[?][\\s\\S]*?[?]>",pK="<![A-Za-z][^>]*>",mK="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",gK=new RegExp("^(?:"+MD+"|"+PD+"|"+fK+"|"+hK+"|"+pK+"|"+mK+")"),yK=new RegExp("^(?:"+MD+"|"+PD+")"),xf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+iK.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(yK.source+"\\s*$"),/^$/,!1]];function bK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<xf.length&&!xf[s][0].test(o);s++);if(s===xf.length)return!1;if(r)return xf[s][2];let u=t+1;if(!xf[s][1].test(o)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],i=e.eMarks[u],o=e.src.slice(a,i),xf[s][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function vK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Tr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const u=e.skipCharsBack(i,35,a);u>a&&Tr(e.src.charCodeAt(u-1))&&(i=u),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,i).trim(),f.map=[t,e.line],f.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function wK(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const v=e.eMarks[s];if(g<v&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let p=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,s,n,!0)){p=!0;break}if(p)break}if(!i)return!1;const u=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=u,f.map=[t,e.line-1],f.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function _K(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const Fy=[["table",XW,["paragraph","reference"]],["code",JW],["fence",QW,["paragraph","reference","blockquote","list"]],["blockquote",eK,["paragraph","reference","blockquote","list"]],["hr",tK,["paragraph","reference","blockquote","list"]],["list",rK,["paragraph","reference","blockquote"]],["reference",aK],["html_block",bK,["paragraph","reference","blockquote"]],["heading",vK,["paragraph","reference","blockquote"]],["lheading",wK],["paragraph",_K]];function dw(){this.ruler=new Ti;for(let e=0;e<Fy.length;e++)this.ruler.push(Fy[e][0],Fy[e][1],{alt:(Fy[e][2]||[]).slice()})}dw.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const u=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,o,n,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};dw.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};dw.prototype.State=Vs;function S0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}S0.prototype.pushPending=function(){const e=new es("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};S0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new es(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};S0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,u=Rm(a)||Tm(String.fromCharCode(a)),c=Rm(s)||Tm(String.fromCharCode(s)),f=Am(a),h=Am(s),p=!h&&(!c||f||u),g=!f&&(!u||h||c);return{can_open:p&&(t||!g||u),can_close:g&&(t||!p||c),length:o}};S0.prototype.Token=es;function xK(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function SK(e,t){let n=e.pos;for(;n<e.posMax&&!xK(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const EK=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function CK(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(EK);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const u=e.md.normalizeLink(s);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function kK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Tr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const TC=[];for(let e=0;e<256;e++)TC.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){TC[e.charCodeAt(0)]=1});function AK(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Tr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&TC[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function TK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let u=n,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&e.src.charCodeAt(u)===96;)u++;const f=u-c;if(f===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function RK(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let u=0;u<i;u+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function xN(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function NK(e){const t=e.tokens_meta,n=e.tokens_meta.length;xN(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&xN(e,t[r].delimiters)}const FD={tokenize:RK,postProcess:NK};function IK(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function SN(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),u=e.tokens[a.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?s+s:s,u.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?s+s:s,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function OK(e){const t=e.tokens_meta,n=e.tokens_meta.length;SN(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&SN(e,t[r].delimiters)}const LD={tokenize:IK,postProcess:OK};function DK(e,t){let n,r,a,i,o="",s="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,h=e.posMax,p=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(c=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(v>=h)return!1;if(u=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?v=a.pos:o="",u=v;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&u!==v&&a.ok)for(s=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Tr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(c=!0),v++}if(c){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(u=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(u,v++):v=g+1):v=g+1,r||(r=e.src.slice(p,g)),i=e.env.references[cw(r)],!i)return e.pos=f,!1;o=i.href,s=i.title}if(!t){e.pos=p,e.posMax=g;const b=e.push("link_open","a",1),_=[["href",o]];b.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function jK(e,t){let n,r,a,i,o,s,u,c,f="";const h=e.pos,p=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<p&&e.src.charCodeAt(i)===40){for(i++;i<p&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(i>=p)return!1;for(c=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(f=e.md.normalizeLink(s.str),e.md.validateLink(f)?i=s.pos:f=""),c=i;i<p&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<p&&c!==i&&s.ok)for(u=s.str,i=s.pos;i<p&&(n=e.src.charCodeAt(i),!(!Tr(n)&&n!==10));i++);else u="";if(i>=p||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<p&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),o=e.env.references[cw(a)],!o)return e.pos=h,!1;f=o.href,u=o.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const _=e.push("image","img",0),S=[["src",f],["alt",""]];_.attrs=S,_.children=b,_.content=r,u&&S.push(["title",u])}return e.pos=i,e.posMax=p,!0}const MK=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,PK=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function FK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(PK.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(MK.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function LK(e){return/^<a[>\s]/i.test(e)}function $K(e){return/^<\/a\s*>/i.test(e)}function BK(e){const t=e|32;return t>=97&&t<=122}function zK(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!BK(a))return!1;const i=e.src.slice(r).match(gK);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],LK(o.content)&&e.linkLevel++,$K(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const UK=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,qK=/^&([a-z][a-z0-9]{1,31});/i;function HK(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(UK);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=kC(o)?Fb(o):Fb(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(qK);if(i){const o=ND(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function EN(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[s.marker][(s.open?3:0)+s.length%3];let c=r-i[r]-1,f=c;for(;c>u;c-=i[c]+1){const h=e[c];if(h.marker===s.marker&&h.open&&h.end<0){let p=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(p=!0),!p){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,s.open=!1,h.end=o,h.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=f)}}function VK(e){const t=e.tokens_meta,n=e.tokens_meta.length;EN(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&EN(t[r].delimiters)}function GK(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const Ax=[["text",SK],["linkify",CK],["newline",kK],["escape",AK],["backticks",TK],["strikethrough",FD.tokenize],["emphasis",LD.tokenize],["link",DK],["image",jK],["autolink",FK],["html_inline",zK],["entity",HK]],Tx=[["balance_pairs",VK],["strikethrough",FD.postProcess],["emphasis",LD.postProcess],["fragments_join",GK]];function E0(){this.ruler=new Ti;for(let e=0;e<Ax.length;e++)this.ruler.push(Ax[e][0],Ax[e][1]);this.ruler2=new Ti;for(let e=0;e<Tx.length;e++)this.ruler2.push(Tx[e][0],Tx[e][1])}E0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};E0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};E0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};E0.prototype.State=S0;function WK(e){const t={};e=e||{},t.src_Any=CD.source,t.src_Cc=kD.source,t.src_Z=TD.source,t.src_P=EC.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Z2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function fw(e){return Object.prototype.toString.call(e)}function KK(e){return fw(e)==="[object String]"}function ZK(e){return fw(e)==="[object Object]"}function YK(e){return fw(e)==="[object RegExp]"}function CN(e){return fw(e)==="[object Function]"}function XK(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const $D={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function JK(e){return Object.keys(e||{}).reduce(function(t,n){return t||$D.hasOwnProperty(n)},!1)}const QK={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},eZ="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",tZ="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function nZ(e){e.__index__=-1,e.__text_cache__=""}function rZ(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function kN(){return function(e,t){t.normalize(e)}}function Lb(e){const t=e.re=WK(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(eZ),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,u){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+u)}Object.keys(e.__schemas__).forEach(function(s){const u=e.__schemas__[s];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,ZK(u)){YK(u.validate)?c.validate=rZ(u.validate):CN(u.validate)?c.validate=u.validate:i(s,u),CN(u.normalize)?c.normalize=u.normalize:u.normalize?i(s,u):c.normalize=kN();return}if(KK(u)){a.push(s);return}i(s,u)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:kN()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(XK).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),nZ(e)}function aZ(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function Y2(e,t){const n=new aZ(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Yi(e,t){if(!(this instanceof Yi))return new Yi(e,t);t||JK(e)&&(t=e,e={}),this.__opts__=Z2({},$D,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Z2({},QK,e),this.__compiled__={},this.__tlds__=tZ,this.__tlds_replaced__=!1,this.re={},Lb(this)}Yi.prototype.add=function(t,n){return this.__schemas__[t]=n,Lb(this),this};Yi.prototype.set=function(t){return this.__opts__=Z2(this.__opts__,t),this};Yi.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,u,c,f;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};Yi.prototype.pretest=function(t){return this.re.pretest.test(t)};Yi.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Yi.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Y2(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(Y2(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Yi.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Y2(this,0)):null};Yi.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Lb(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Lb(this),this)};Yi.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Yi.prototype.onCompile=function(){};const Uf=2147483647,Os=36,RC=1,Nm=26,iZ=38,oZ=700,BD=72,zD=128,UD="-",sZ=/^xn--/,lZ=/[^\0-\x7F]/,uZ=/[\x2E\u3002\uFF0E\uFF61]/g,cZ={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Rx=Os-RC,Ds=Math.floor,Nx=String.fromCharCode;function ju(e){throw new RangeError(cZ[e])}function dZ(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function qD(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(uZ,".");const a=e.split("."),i=dZ(a,t).join(".");return r+i}function HD(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const fZ=e=>String.fromCodePoint(...e),hZ=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Os},AN=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},VD=function(e,t,n){let r=0;for(e=n?Ds(e/oZ):e>>1,e+=Ds(e/t);e>Rx*Nm>>1;r+=Os)e=Ds(e/Rx);return Ds(r+(Rx+1)*e/(e+iZ))},GD=function(e){const t=[],n=e.length;let r=0,a=zD,i=BD,o=e.lastIndexOf(UD);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&ju("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const u=r;for(let f=1,h=Os;;h+=Os){s>=n&&ju("invalid-input");const p=hZ(e.charCodeAt(s++));p>=Os&&ju("invalid-input"),p>Ds((Uf-r)/f)&&ju("overflow"),r+=p*f;const g=h<=i?RC:h>=i+Nm?Nm:h-i;if(p<g)break;const v=Os-g;f>Ds(Uf/v)&&ju("overflow"),f*=v}const c=t.length+1;i=VD(r-u,c,u==0),Ds(r/c)>Uf-a&&ju("overflow"),a+=Ds(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},WD=function(e){const t=[];e=HD(e);const n=e.length;let r=zD,a=0,i=BD;for(const u of e)u<128&&t.push(Nx(u));const o=t.length;let s=o;for(o&&t.push(UD);s<n;){let u=Uf;for(const f of e)f>=r&&f<u&&(u=f);const c=s+1;u-r>Ds((Uf-a)/c)&&ju("overflow"),a+=(u-r)*c,r=u;for(const f of e)if(f<r&&++a>Uf&&ju("overflow"),f===r){let h=a;for(let p=Os;;p+=Os){const g=p<=i?RC:p>=i+Nm?Nm:p-i;if(h<g)break;const v=h-g,b=Os-g;t.push(Nx(AN(g+v%b,0))),h=Ds(v/b)}t.push(Nx(AN(h,0))),i=VD(a,c,s===o),a=0,++s}++a,++r}return t.join("")},pZ=function(e){return qD(e,function(t){return sZ.test(t)?GD(t.slice(4).toLowerCase()):t})},mZ=function(e){return qD(e,function(t){return lZ.test(t)?"xn--"+WD(t):t})},KD={version:"2.3.1",ucs2:{decode:HD,encode:fZ},decode:GD,encode:WD,toASCII:mZ,toUnicode:pZ},gZ={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},yZ={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},bZ={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},vZ={default:gZ,zero:yZ,commonmark:bZ},wZ=/^(vbscript|javascript|file|data):/,_Z=/^data:image\/(gif|png|jpeg|webp);/;function xZ(e){const t=e.trim().toLowerCase();return wZ.test(t)?_Z.test(t):!0}const ZD=["http:","https:","mailto:"];function SZ(e){const t=SC(e,!0);if(t.hostname&&(!t.protocol||ZD.indexOf(t.protocol)>=0))try{t.hostname=KD.toASCII(t.hostname)}catch{}return x0(xC(t))}function EZ(e){const t=SC(e,!0);if(t.hostname&&(!t.protocol||ZD.indexOf(t.protocol)>=0))try{t.hostname=KD.toUnicode(t.hostname)}catch{}return Xf(xC(t),Xf.defaultChars+"%")}function _o(e,t){if(!(this instanceof _o))return new _o(e,t);t||CC(e)||(t=e||{},e="default"),this.inline=new E0,this.block=new dw,this.core=new AC,this.renderer=new Eh,this.linkify=new Yi,this.validateLink=xZ,this.normalizeLink=SZ,this.normalizeLinkText=EZ,this.utils=kW,this.helpers=uw({},NW),this.options={},this.configure(e),t&&this.set(t)}_o.prototype.set=function(e){return uw(this.options,e),this};_o.prototype.configure=function(e){const t=this;if(CC(e)){const n=e;if(e=vZ[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};_o.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};_o.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};_o.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};_o.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};_o.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};_o.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};_o.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const Ix=new _o({html:!1,linkify:!0,breaks:!0});function YD(e){return R.useMemo(()=>{var n;if(!e)return[];try{const r=Ix.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const u=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:u,code:s.content}),o++}else{const u=[];for(;o<r.length&&r[o].type!=="fence";)u.push(r[o]),o++;u.length>0&&(i+=Ix.renderer.render(u,Ix.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}var Ox={exports:{}},TN;function CZ(){return TN||(TN=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function x(E){return E instanceof u?new u(E.type,x(E.content),E.alias):Array.isArray(E)?E.map(x):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(x){return Object.prototype.toString.call(x).slice(8,-1)},objId:function(x){return x.__id||Object.defineProperty(x,"__id",{value:++i}),x.__id},clone:function x(E,C){C=C||{};var A,O;switch(s.util.type(E)){case"Object":if(O=s.util.objId(E),C[O])return C[O];A={},C[O]=A;for(var I in E)E.hasOwnProperty(I)&&(A[I]=x(E[I],C));return A;case"Array":return O=s.util.objId(E),C[O]?C[O]:(A=[],C[O]=A,E.forEach(function(D,z){A[z]=x(D,C)}),A);default:return E}},getLanguage:function(x){for(;x;){var E=a.exec(x.className);if(E)return E[1].toLowerCase();x=x.parentElement}return"none"},setLanguage:function(x,E){x.className=x.className.replace(RegExp(a,"gi"),""),x.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var x=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(x){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==x)return E[C]}return null}},isActive:function(x,E,C){for(var A="no-"+E;x;){var O=x.classList;if(O.contains(E))return!0;if(O.contains(A))return!1;x=x.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(x,E){var C=s.util.clone(s.languages[x]);for(var A in E)C[A]=E[A];return C},insertBefore:function(x,E,C,A){A=A||s.languages;var O=A[x],I={};for(var D in O)if(O.hasOwnProperty(D)){if(D==E)for(var z in C)C.hasOwnProperty(z)&&(I[z]=C[z]);C.hasOwnProperty(D)||(I[D]=O[D])}var W=A[x];return A[x]=I,s.languages.DFS(s.languages,function(ee,F){F===W&&ee!=x&&(this[ee]=I)}),I},DFS:function x(E,C,A,O){O=O||{};var I=s.util.objId;for(var D in E)if(E.hasOwnProperty(D)){C.call(E,D,E[D],A||D);var z=E[D],W=s.util.type(z);W==="Object"&&!O[I(z)]?(O[I(z)]=!0,x(z,C,null,O)):W==="Array"&&!O[I(z)]&&(O[I(z)]=!0,x(z,C,D,O))}}},plugins:{},highlightAll:function(x,E){s.highlightAllUnder(document,x,E)},highlightAllUnder:function(x,E,C){var A={callback:C,container:x,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),s.hooks.run("before-all-elements-highlight",A);for(var O=0,I;I=A.elements[O++];)s.highlightElement(I,E===!0,A.callback)},highlightElement:function(x,E,C){var A=s.util.getLanguage(x),O=s.languages[A];s.util.setLanguage(x,A);var I=x.parentElement;I&&I.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(I,A);var D=x.textContent,z={element:x,language:A,grammar:O,code:D};function W(F){z.highlightedCode=F,s.hooks.run("before-insert",z),z.element.innerHTML=z.highlightedCode,s.hooks.run("after-highlight",z),s.hooks.run("complete",z),C&&C.call(z.element)}if(s.hooks.run("before-sanity-check",z),I=z.element.parentElement,I&&I.nodeName.toLowerCase()==="pre"&&!I.hasAttribute("tabindex")&&I.setAttribute("tabindex","0"),!z.code){s.hooks.run("complete",z),C&&C.call(z.element);return}if(s.hooks.run("before-highlight",z),!z.grammar){W(s.util.encode(z.code));return}if(E&&r.Worker){var ee=new Worker(s.filename);ee.onmessage=function(F){W(F.data)},ee.postMessage(JSON.stringify({language:z.language,code:z.code,immediateClose:!0}))}else W(s.highlight(z.code,z.grammar,z.language))},highlight:function(x,E,C){var A={code:x,grammar:E,language:C};if(s.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=s.tokenize(A.code,A.grammar),s.hooks.run("after-tokenize",A),u.stringify(s.util.encode(A.tokens),A.language)},tokenize:function(x,E){var C=E.rest;if(C){for(var A in C)E[A]=C[A];delete E.rest}var O=new h;return p(O,O.head,x),f(x,O,E,O.head,0),v(O)},hooks:{all:{},add:function(x,E){var C=s.hooks.all;C[x]=C[x]||[],C[x].push(E)},run:function(x,E){var C=s.hooks.all[x];if(!(!C||!C.length))for(var A=0,O;O=C[A++];)O(E)}},Token:u};r.Prism=s;function u(x,E,C,A){this.type=x,this.content=E,this.alias=C,this.length=(A||"").length|0}u.stringify=function x(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var A="";return E.forEach(function(W){A+=x(W,C)}),A}var O={type:E.type,content:x(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},I=E.alias;I&&(Array.isArray(I)?Array.prototype.push.apply(O.classes,I):O.classes.push(I)),s.hooks.run("wrap",O);var D="";for(var z in O.attributes)D+=" "+z+'="'+(O.attributes[z]||"").replace(/"/g,"&quot;")+'"';return"<"+O.tag+' class="'+O.classes.join(" ")+'"'+D+">"+O.content+"</"+O.tag+">"};function c(x,E,C,A){x.lastIndex=E;var O=x.exec(C);if(O&&A&&O[1]){var I=O[1].length;O.index+=I,O[0]=O[0].slice(I)}return O}function f(x,E,C,A,O,I){for(var D in C)if(!(!C.hasOwnProperty(D)||!C[D])){var z=C[D];z=Array.isArray(z)?z:[z];for(var W=0;W<z.length;++W){if(I&&I.cause==D+","+W)return;var ee=z[W],F=ee.inside,Z=!!ee.lookbehind,V=!!ee.greedy,ae=ee.alias;if(V&&!ee.pattern.global){var ie=ee.pattern.toString().match(/[imsuy]*$/)[0];ee.pattern=RegExp(ee.pattern.source,ie+"g")}for(var te=ee.pattern||ee,X=A.next,ce=O;X!==E.tail&&!(I&&ce>=I.reach);ce+=X.value.length,X=X.next){var G=X.value;if(E.length>x.length)return;if(!(G instanceof u)){var Q=1,Y;if(V){if(Y=c(te,ce,x,Z),!Y||Y.index>=x.length)break;var Ie=Y.index,re=Y.index+Y[0].length,be=ce;for(be+=X.value.length;Ie>=be;)X=X.next,be+=X.value.length;if(be-=X.value.length,ce=be,X.value instanceof u)continue;for(var _e=X;_e!==E.tail&&(be<re||typeof _e.value=="string");_e=_e.next)Q++,be+=_e.value.length;Q--,G=x.slice(ce,be),Y.index-=ce}else if(Y=c(te,0,G,Z),!Y)continue;var Ie=Y.index,Pe=Y[0],Re=G.slice(0,Ie),ke=G.slice(Ie+Pe.length),ze=ce+G.length;I&&ze>I.reach&&(I.reach=ze);var it=X.prev;Re&&(it=p(E,it,Re),ce+=Re.length),g(E,it,Q);var Oe=new u(D,F?s.tokenize(Pe,F):Pe,ae,Pe);if(X=p(E,it,Oe),ke&&p(E,X,ke),Q>1){var Te={cause:D+","+W,reach:ze};f(x,E,C,X.prev,ce,Te),I&&Te.reach>I.reach&&(I.reach=Te.reach)}}}}}}function h(){var x={value:null,prev:null,next:null},E={value:null,prev:x,next:null};x.next=E,this.head=x,this.tail=E,this.length=0}function p(x,E,C){var A=E.next,O={value:C,prev:E,next:A};return E.next=O,A.prev=O,x.length++,O}function g(x,E,C){for(var A=E.next,O=0;O<C&&A!==x.tail;O++)A=A.next;E.next=A,A.prev=E,x.length-=O}function v(x){for(var E=[],C=x.head.next;C!==x.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(x){var E=JSON.parse(x.data),C=E.language,A=E.code,O=E.immediateClose;r.postMessage(s.highlight(A,s.languages[C],C)),O&&r.close()},!1)),s;var b=s.util.currentScript();b&&(s.filename=b.src,b.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var S=document.readyState;S==="loading"||S==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof td<"u"&&(td.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,_){return" Error "+b+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",c="loaded",f="failed",h="pre[data-src]:not(["+s+'="'+c+'"]):not(['+s+'="'+u+'"])';function p(b,_,S){var x=new XMLHttpRequest;x.open("GET",b,!0),x.onreadystatechange=function(){x.readyState==4&&(x.status<400&&x.responseText?_(x.responseText):x.status>=400?S(a(x.status,x.statusText)):S(i))},x.send(null)}function g(b){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(_){var S=Number(_[1]),x=_[2],E=_[3];return x?E?[S,Number(E)]:[S,void 0]:[S,S]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var _=b.element;if(_.matches(h)){b.code="",_.setAttribute(s,u);var S=_.appendChild(document.createElement("CODE"));S.textContent=r;var x=_.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(x)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(S,E),n.util.setLanguage(_,E);var A=n.plugins.autoloader;A&&A.loadLanguages(E),p(x,function(O){_.setAttribute(s,c);var I=g(_.getAttribute("data-range"));if(I){var D=O.split(/\r\n?|\n/g),z=I[0],W=I[1]==null?D.length:I[1];z<0&&(z+=D.length),z=Math.max(0,Math.min(z-1,D.length)),W<0&&(W+=D.length),W=Math.max(0,Math.min(W,D.length)),O=D.slice(z,W).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(z+1))}S.textContent=O,n.highlightElement(S)},function(O){_.setAttribute(s,f),S.textContent=O})}}),n.plugins.fileHighlight={highlight:function(_){for(var S=(_||document).querySelectorAll(h),x=0,E;E=S[x++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(Ox)),Ox.exports}var kZ=CZ();const AZ=Qa(kZ);var RN={},NN;function TZ(){return NN||(NN=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),RN}TZ();var IN={},ON;function RZ(){return ON||(ON=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),IN}RZ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(h){f!==h&&(e.languages.markdown[f].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function h(p){if(!(!p||typeof p=="string"))for(var g=0,v=p.length;g<v;g++){var b=p[g];if(b.type!=="code"){h(b.content);continue}var _=b.content[1],S=b.content[3];if(_&&S&&_.type==="code-language"&&S.type==="code-block"&&typeof _.content=="string"){var x=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");x=(/[a-z][\w-]*/i.exec(x)||[""])[0].toLowerCase();var E="language-"+x;S.alias?typeof S.alias=="string"?S.alias=[S.alias,E]:S.alias.push(E):S.alias=[E]}}}h(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var h="",p=0,g=f.classes.length;p<g;p++){var v=f.classes[p],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var _=e.languages[h];if(_)f.content=e.highlight(c(f.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var S="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=S,e.plugins.autoloader.loadLanguages(h,function(){var x=document.getElementById(S);x&&(x.innerHTML=e.highlight(x.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(f){var h=f.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),u(v)}else{var b=s[g];return b||p}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var DN={},jN;function NZ(){return jN||(jN=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),DN}NZ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const NC=({lang:e,code:t})=>{const[n,r]=R.useState(!1),[a,i]=R.useState(!1),o=R.useRef(null),s=R.useCallback(()=>{if(o.current&&t)try{o.current.textContent=t,AZ.highlightElement(o.current)}catch(p){console.error("Prism highlight error:",p),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);R.useEffect(()=>{a||s()},[t,e,a,s]);const u=async()=>{try{await navigator.clipboard.writeText(t),r(!0),dt.success("Code copied to clipboard!"),setTimeout(()=>r(!1),1500)}catch(p){dt.error("Failed to copy code."),console.error("Clipboard copy failed:",p)}},c=()=>{const p=a;i(g=>!g),p&&setTimeout(s,0)},f=e?`language-${e}`:"language-plaintext",h=R.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container my-4",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:e||"code"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:c,"aria-label":a?"Unfold code":"Fold code",children:y.jsx(Zv,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:a?"Unfold":"Fold"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:u,"aria-label":"Copy code",children:n?y.jsx(wo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(oC,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Copy"})]})})]})]}),!a&&y.jsx("pre",{className:Nt("code-block-content"),children:y.jsx("code",{ref:o,className:Nt(f),children:t})}),a&&y.jsx("div",{className:"folded-content-preview p-4 pt-0",onClick:c,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:h})})]})},IZ=({toolCallStrings:e,toolResultStrings:t})=>{const[n,r]=R.useState(new Set),[a,i]=R.useState([]),[o,s]=R.useState([]),[u,c]=R.useState(new Map);R.useEffect(()=>{const h=[],p=[],g=new Set;(e??[]).forEach(v=>{try{const b=JSON.parse(v);b&&b.type==="tool-call"&&b.toolCallId&&b.toolName&&b.args!==void 0?(h.push(b),g.add(b.toolCallId)):console.warn("Skipping invalid tool call string:",v)}catch(b){console.error("Failed to parse tool call string for display:",v,b)}}),(t??[]).forEach(v=>{try{const b=JSON.parse(v);b&&b.type==="tool-result"&&b.toolCallId&&b.toolName&&b.result!==void 0?p.push(b):console.warn("Skipping invalid tool result string:",v)}catch(b){console.error("Failed to parse tool result string for display:",v,b)}}),i(h),s(p),c(new Map(p.map(v=>[v.toolCallId,v]))),r(g)},[e,t]);const f=h=>{r(p=>{const g=new Set(p);return g.has(h)?g.delete(h):g.add(h),g})};return a.length===0?null:y.jsxs("div",{className:"mt-2 space-y-2 border-t border-border/50 pt-2",children:[y.jsx("div",{className:"flex items-center justify-between mb-1",children:y.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-medium text-muted-foreground",children:[y.jsx(Nb,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Tool Activity (",a.length," calls)"]})]})}),a.map((h,p)=>{const g=n.has(h.toolCallId),v=u.get(h.toolCallId),b=v&&typeof v.result=="object"&&v.result!==null&&v.result._isError===!0,_=b?String(v.result.error):null,S=v?b?"error":"completed":"pending",x=v?b?`Error: ${_}`:JSON.stringify(v.result,null,2):"Waiting for result...";return y.jsxs("div",{className:"p-2 border rounded bg-muted/30 text-xs",children:[y.jsxs("div",{className:"flex items-center justify-between gap-1.5 font-medium mb-1",children:[y.jsxs("div",{className:"flex items-center gap-1.5",children:[S==="pending"&&y.jsx(Zn,{className:"h-3.5 w-3.5 animate-spin text-blue-500"}),S==="completed"&&y.jsx(Tb,{className:"h-3.5 w-3.5 text-green-500"}),S==="error"&&y.jsx(Ps,{className:"h-3.5 w-3.5 text-destructive"}),y.jsx(Nb,{className:"h-3.5 w-3.5 text-muted-foreground"}),y.jsxs("span",{children:["Tool Call #",p+1,": ",h.toolName]})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>f(h.toolCallId),"aria-label":g?"Expand tool call":"Collapse tool call",children:g?y.jsx(iC,{className:"h-3.5 w-3.5"}):y.jsx(Kv,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:g?"Expand":"Collapse"})]})})]}),!g&&y.jsxs("div",{className:"pl-5 space-y-1 mt-1",children:[y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"Args:"}),y.jsx("pre",{className:"text-[11px] bg-background/50 p-1 rounded mt-0.5 whitespace-pre-wrap break-words",children:JSON.stringify(h.args,null,2)})]}),y.jsxs("div",{children:[y.jsx("span",{className:"font-semibold",children:"Result:"}),y.jsx("pre",{className:Nt("text-[11px] p-1 rounded mt-0.5 whitespace-pre-wrap break-words",b?"bg-destructive/10 text-destructive":"bg-background/50"),children:x})]})]})]},h.toolCallId)})]})},OZ=({interaction:e,allInteractionsInGroup:t,onRegenerate:n,className:r})=>{var F,Z,V,ae,ie,te,X,ce,G,Q,Y,re,be;const[a,i]=R.useState(0),[o,s]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=R.useState(!1),p=R.useMemo(()=>t.filter(_e=>_e.type==="message.user_assistant"&&_e.status==="COMPLETED"&&_e.prompt===null).sort((_e,Ie)=>{var Pe,Re;return(((Pe=Ie.startedAt)==null?void 0:Pe.getTime())??0)-(((Re=_e.startedAt)==null?void 0:Re.getTime())??0)}),[t]),g=p.length>0?p[a]:e,v=typeof g.response=="string"?g.response:null,b=YD(v),_=e.prompt&&g.status==="COMPLETED"&&typeof n=="function"&&a===0,S=_e=>{_e.stopPropagation(),n&&e.prompt?n(e.id):console.error("Could not regenerate: No callback or prompt data found in the original interaction.",e)},x=_e=>{i(Ie=>_e==="prev"?Math.min(Ie+1,p.length-1):Math.max(Ie-1,0))},E=R.useCallback(async()=>{if(v)try{await navigator.clipboard.writeText(v),c(!0),dt.success("Response copied to clipboard!"),setTimeout(()=>c(!1),1500)}catch(_e){dt.error("Failed to copy response."),console.error("Clipboard copy failed:",_e)}},[v]),C=R.useCallback(async()=>{try{await navigator.clipboard.writeText(g.id),h(!0),dt.success("Interaction ID copied to clipboard!"),setTimeout(()=>h(!1),1500)}catch(_e){dt.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",_e)}},[g.id]),A=()=>s(_e=>!_e),O=p.length>1,I=a<p.length-1,D=a>0,z=R.useMemo(()=>v?v.split(`
`).slice(0,3).join(`
`):"",[v]),W=R.useMemo(()=>g.startedAt&&g.endedAt?((g.endedAt.getTime()-g.startedAt.getTime())/1e3).toFixed(2):null,[g.startedAt,g.endedAt]),ee=(((Z=(F=g.metadata)==null?void 0:F.toolCalls)==null?void 0:Z.length)??0)>0;return y.jsxs("div",{className:Nt("p-3 my-2 border rounded-md shadow-sm bg-card relative group",r),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{children:["Assistant | ",g.status,((V=g.metadata)==null?void 0:V.modelId)&&y.jsxs("span",{className:"ml-2 text-blue-400",children:["(",g.metadata.modelId,")"]})]}),y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:A,"aria-label":o?"Unfold response":"Fold response",children:y.jsx(Zv,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:o?"Unfold":"Fold"})]})}),O&&y.jsxs("div",{className:"flex items-center border border-border rounded bg-background/50",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>x("prev"),disabled:!I,"aria-label":"Previous revision",children:y.jsx(IU,{className:"h-3 w-3"})})}),y.jsx(Rn,{side:"top",children:"Previous Revision"})]})}),y.jsxs("span",{className:"text-[10px] px-1 text-muted-foreground select-none",children:[a+1,"/",p.length]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>x("next"),disabled:!D,"aria-label":"Next revision",children:y.jsx(iC,{className:"h-3 w-3"})})}),y.jsx(Rn,{side:"top",children:"Next Revision"})]})})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:C,"aria-label":"Copy interaction ID",children:f?y.jsx(wo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(zO,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Copy ID"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:E,"aria-label":"Copy response",disabled:!v,children:u?y.jsx(wo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(oC,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Copy"})]})}),_&&y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:S,"aria-label":"Regenerate response",children:y.jsx(Jv,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Regenerate"})]})})]})]}),y.jsx("div",{className:"text-sm markdown-content",children:o?y.jsx("div",{className:"folded-content-preview cursor-pointer",onClick:A,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:z||(ee?"[Tool Activity]":"")})}):y.jsxs(y.Fragment,{children:[b.map((_e,Ie)=>typeof _e=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:_e}},Ie):_e.type==="code"?y.jsx(NC,{lang:_e.lang,code:_e.code},Ie):null),y.jsx(IZ,{toolCallStrings:(ae=g.metadata)==null?void 0:ae.toolCalls,toolResultStrings:(ie=g.metadata)==null?void 0:ie.toolResults})]})}),!o&&(((te=g.metadata)==null?void 0:te.promptTokens)||((X=g.metadata)==null?void 0:X.completionTokens)||W)&&y.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50 text-xs text-muted-foreground flex justify-start gap-3",children:[W&&y.jsxs("span",{children:["Time: ",W,"s"]}),(((ce=g.metadata)==null?void 0:ce.promptTokens)||((G=g.metadata)==null?void 0:G.completionTokens))&&y.jsxs("span",{children:["Tokens: ",((Q=g.metadata)==null?void 0:Q.promptTokens)??"?"," ","(in) / ",((Y=g.metadata)==null?void 0:Y.completionTokens)??"?"," ","(out)"]})]}),g.status==="ERROR"&&((re=g.metadata)==null?void 0:re.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-destructive",children:[y.jsx(Ps,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]}),g.status==="WARNING"&&((be=g.metadata)==null?void 0:be.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-accent",children:[y.jsx(Ps,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]})]})},DZ=R.memo(OZ);var st;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(st||(st={}));const MN={[st.EPERM]:"Operation not permitted",[st.ENOENT]:"No such file or directory",[st.EINTR]:"Interrupted system call",[st.EIO]:"Input/output error",[st.ENXIO]:"No such device or address",[st.EBADF]:"Bad file descriptor",[st.EAGAIN]:"Resource temporarily unavailable",[st.ENOMEM]:"Cannot allocate memory",[st.EACCES]:"Permission denied",[st.EFAULT]:"Bad address",[st.ENOTBLK]:"Block device required",[st.EBUSY]:"Resource busy or locked",[st.EEXIST]:"File exists",[st.EXDEV]:"Invalid cross-device link",[st.ENODEV]:"No such device",[st.ENOTDIR]:"File is not a directory",[st.EISDIR]:"File is a directory",[st.EINVAL]:"Invalid argument",[st.ENFILE]:"Too many open files in system",[st.EMFILE]:"Too many open files",[st.ETXTBSY]:"Text file busy",[st.EFBIG]:"File is too big",[st.ENOSPC]:"No space left on disk",[st.ESPIPE]:"Illegal seek",[st.EROFS]:"Cannot modify a read-only file system",[st.EMLINK]:"Too many links",[st.EPIPE]:"Broken pipe",[st.EDOM]:"Numerical argument out of domain",[st.ERANGE]:"Numerical result out of range",[st.EDEADLK]:"Resource deadlock would occur",[st.ENAMETOOLONG]:"File name too long",[st.ENOLCK]:"No locks available",[st.ENOSYS]:"Function not implemented",[st.ENOTEMPTY]:"Directory is not empty",[st.ELOOP]:"Too many levels of symbolic links",[st.ENOMSG]:"No message of desired type",[st.EBADE]:"Invalid exchange",[st.EBADR]:"Invalid request descriptor",[st.EXFULL]:"Exchange full",[st.ENOANO]:"No anode",[st.EBADRQC]:"Invalid request code",[st.ENOSTR]:"Device not a stream",[st.ENODATA]:"No data available",[st.ETIME]:"Timer expired",[st.ENOSR]:"Out of streams resources",[st.ENONET]:"Machine is not on the network",[st.EREMOTE]:"Object is remote",[st.ENOLINK]:"Link has been severed",[st.ECOMM]:"Communication error on send",[st.EPROTO]:"Protocol error",[st.EBADMSG]:"Bad message",[st.EOVERFLOW]:"Value too large for defined data type",[st.EBADFD]:"File descriptor in bad state",[st.ESTRPIPE]:"Streams pipe error",[st.ENOTSOCK]:"Socket operation on non-socket",[st.EDESTADDRREQ]:"Destination address required",[st.EMSGSIZE]:"Message too long",[st.EPROTOTYPE]:"Protocol wrong type for socket",[st.ENOPROTOOPT]:"Protocol not available",[st.EPROTONOSUPPORT]:"Protocol not supported",[st.ESOCKTNOSUPPORT]:"Socket type not supported",[st.ENOTSUP]:"Operation is not supported",[st.ENETDOWN]:"Network is down",[st.ENETUNREACH]:"Network is unreachable",[st.ENETRESET]:"Network dropped connection on reset",[st.ETIMEDOUT]:"Connection timed out",[st.ECONNREFUSED]:"Connection refused",[st.EHOSTDOWN]:"Host is down",[st.EHOSTUNREACH]:"No route to host",[st.EALREADY]:"Operation already in progress",[st.EINPROGRESS]:"Operation now in progress",[st.ESTALE]:"Stale file handle",[st.EREMOTEIO]:"Remote I/O error",[st.EDQUOT]:"Disk quota exceeded"};class qe extends Error{static fromJSON(t){const n=new qe(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new qe(st[t],MN[st[t]],n,r)}constructor(t,n=MN[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=st[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var Dx={exports:{}},PN;function jZ(){return PN||(PN=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function i(u,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||u,p),v=n?n+c:c;return u._events[v]?u._events[v].fn?u._events[v]=[u._events[v],g]:u._events[v].push(g):(u._events[v]=g,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)t.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,v=new Array(g);p<g;p++)v[p]=h[p].fn;return v},s.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},s.prototype.emit=function(c,f,h,p,g,v){var b=n?n+c:c;if(!this._events[b])return!1;var _=this._events[b],S=arguments.length,x,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),S){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,h),!0;case 4:return _.fn.call(_.context,f,h,p),!0;case 5:return _.fn.call(_.context,f,h,p,g),!0;case 6:return _.fn.call(_.context,f,h,p,g,v),!0}for(E=1,x=new Array(S-1);E<S;E++)x[E-1]=arguments[E];_.fn.apply(_.context,x)}else{var C=_.length,A;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),S){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,h);break;case 4:_[E].fn.call(_[E].context,f,h,p);break;default:if(!x)for(A=1,x=new Array(S-1);A<S;A++)x[A-1]=arguments[A];_[E].fn.apply(_[E].context,x)}}return!0},s.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},s.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},s.prototype.removeListener=function(c,f,h,p){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===f&&(!p||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var b=0,_=[],S=v.length;b<S;b++)(v[b].fn!==f||p&&!v[b].once||h&&v[b].context!==h)&&_.push(v[b]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Dx)),Dx.exports}var MZ=jZ();const IC=Qa(MZ);var hO;let PZ=class extends IC{constructor(n){super();Ha(this,hO,"List");Ha(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(hO=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function FN(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function ur(e){throw e}const LN=Intl.NumberFormat("en",{notation:"compact"});LN.format.bind(LN);function yd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function FZ(e){try{return JSON.parse(e),!0}catch{return!1}}function X2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function OC(e){return e.at(0).toUpperCase()+e.slice(1)}const LZ=new TextEncoder;function Qc(e){return LZ.encode(e)}const $N=new TextDecoder;function DC(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return $N.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),$N.decode(t)}function Im(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Im(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function $Z(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var BZ={};let zZ="process"in globalThis&&"env"in globalThis.process&&BZ.U_DEBUG=="true";function Om(...e){zZ&&console.debug("[U]",...e)}const BN=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],UZ=[...BN,...BN.map(e=>OC(e)),"char"],jC=/^(u?int|float)(8|16|32|64|128)$/i;function XD(e){return e=="char"?"uint8":e.toLowerCase()}function MC(e){return jC.test(e.toString())}function J2(e){return e=="char"||jC.test(e.toString().toLowerCase())}function qZ(e){if(!J2(e))throw new TypeError("Not a valid primitive type: "+e)}const zN=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function JD(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function HZ(e){return e!=null&&typeof e=="object"&&"struct"in e}function hw(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function Uo(e){return typeof e=="function"&&Symbol.metadata in e&&HZ(e[Symbol.metadata])}function C0(e){return e!=null&&typeof e=="object"&&Uo(e.constructor)}function QD(e){if(!C0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function PC(e){return C0(e)||Uo(e)}function ej(e){if(!PC(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function FC(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function jr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=jr(e[i]);return a}if(typeof e=="string")return qZ(e),+XD(e).match(jC)[2]/8;if(FC(e))return e[Symbol.size];ej(e);const t=Uo(e)?e:e.constructor;hw(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(Uo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(C0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,jr(i)):r+=jr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=jr(PC(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function VZ(e,t){var i;ej(e);const n=Uo(e)?e:e.constructor;hw(n);const{struct:r}=n[Symbol.metadata];if(Uo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??ur(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=jr(PC(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function GZ(e,t){return Math.ceil(e/t)*t}function bd(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:u,length:c}of JD(r)){if(!J2(u)&&!Uo(u))throw new TypeError("Not a valid type: "+u);if(typeof c=="string"){const p=a.get(c);if(!p)throw new Error(`"${c}" is undefined or declared after "${s}"`);if(!MC(p.type))throw new Error(`"${c}" is not a number and cannot be used to count "${s}"`)}let f=`${typeof u=="string"?u:u.name} ${s}`;c!==void 0&&(f+=`[${c}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:J2(u)?XD(u):u,length:c,decl:f});const h=typeof c=="string"||Uo(u)&&u[Symbol.metadata].struct.isDynamic?0:jr(u)*(c||1);o||(o=Uo(u)?u[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=GZ(i,e.align||1),Om("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function Dm(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return JD(r).push({name:a,type:e,length:t}),n}}function tj(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:ur(new Error("Array lengths must be natural numbers"))}function Pa(e){if(FC(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();QD(e),hw(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=jr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Om("serialize",e.constructor.name);let o=0,s=0;for(const u of n.values()){const c=tj(e,u);Om("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name][f]:e[u.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=C0(h)?jr(h):jr(u.type),!MC(u.type)){a.set(h?Pa(h):new Uint8Array(jr(u.type)),o);continue}const p=`set${OC(u.type)}`;if(p=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(p=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(p=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&zN,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&zN,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[p](o,Number(h),!t.bigEndian)}}return a}function pw(e,t){const n=$Z(t);if(FC(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);QD(e),hw(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Om("deserialize",e.constructor.name);let o=0,s=0;for(const u of a.values()){const c=tj(e,u);Om("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name]:e;const p=c!=-1?f:u.name,g=h[p]===null||h[p]===void 0,v=g&&Uo(u.type)&&u.type[Symbol.metadata].struct.isDynamic;if(o=s,!C0(h[p])&&!v&&(s+=jr(u.type)),typeof e[u.name]=="string"){e[u.name]=e[u.name].slice(0,f)+String.fromCharCode(i.getUint8(o))+e[u.name].slice(f+1);continue}if(!MC(u.type)){if(v&&Uo(u.type))h[p]??(h[p]=new u.type);else if(g)continue;pw(h[p],new Uint8Array(n.subarray(o))),s+=jr(h[p]);continue}c&&c!=-1&&(h||(h=[]));const b=`get${OC(u.type)}`;if(b=="getInt64"){h[p]=i.getBigInt64(o,!r.bigEndian);continue}if(b=="getUint64"){h[p]=i.getBigUint64(o,!r.bigEndian);continue}if(b=="getInt128"){h[p]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[p]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[p]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[p]=i[b](o,!r.bigEndian)}}}function WZ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Dm(e,n):Dm(e)(n,r)}return t}const gn=Object.fromEntries(UZ.map(e=>[e,WZ(e)]));function KZ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const ts={root:"/",pwd:"/",credentials:KZ({uid:0,gid:0}),descriptors:new Map};function nj(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const u=n.lastIndexOf("/");u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function Fl(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:ts.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=nj(n,!r),r?`/${n}`:n.length?n:"/"}function ZZ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=nj(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function tr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?ZZ(t):"."}function rj(e,t){if(e===t||(e=Fl.call(this,e),t=Fl.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let u=-1,c=0;for(;c<s;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(u=c)}if(c===s)if(o>s){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>s&&(e[n+c]==="/"?u=c:c===0&&(u=0));let f="";for(c=n+u+1;c<=r;++c)(c===r||e[c]==="/")&&(f+=f.length===0?"..":"/..");return`${f}${t.slice(i+u)}`}function Xn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Qf(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Es(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,u=e.length-1,c=0;for(;u>=r;--u){if(e[u]==="/"){if(!s){i=u+1;break}continue}o===-1&&(s=!1,o=u+1),e[u]==="."?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}if(o!==-1){const f=i===0&&t?1:i;a===-1||c===0||c===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(f,o):(n.name=e.slice(f,a),n.base=e.slice(f,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var pn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(pn||(pn={}));pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";const YZ=new PZ;function XZ(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};YZ.add(n),iY(n)}function JZ(e,t){var n,r;if(!(e instanceof qe))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+tr(i,e.path)}function dc(e){return function(t,n={}){return XZ(e,JZ(t,n)),t}}dc(pn.EMERG);const QZ=dc(pn.ALERT),mw=dc(pn.CRIT),_i=dc(pn.ERR),Ka=dc(pn.WARN),LC=dc(pn.NOTICE),aj=dc(pn.INFO),pm=dc(pn.DEBUG);function eY(e,t){return`\x1B[${t}m${e}\x1B[0m`}function tY(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[eY(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";let nY=e=>[...tY(e),e.message];function rY(e){const t=nY(e);return typeof t=="string"?[t]:Array.from(t)}let aY=console.error;function iY(e){e.level>oY||aY(...rY(e))}let oY=pn.ALERT;function $C(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function sY(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function lY(e,t){if(typeof t!="object"||t===null)throw _i(new qe(st.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){pm("Using default for option: "+n);continue}throw _i(new qe(st.EINVAL,"Missing required option: "+n))}const i=(c,f=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,u=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw _i(new qe(st.EINVAL,`Incorrect type for "${n}": ${o} (expected ${u})`))}}function ij(e){return e!=null&&typeof e=="object"&&"backend"in e&&$C(e.backend)}const BC=0,pa=4,Wr=2,pb=1,zC=1,uY=2,cY=4,oj=0,Wa=1,Rl=2,gw=64,yw=128,dY=256,bw=512,ld=1024,fY=65536,hY=262144,pY=131072,vw=1052672,mY=4096,gY=32768,yY=16384,bY=2048,br=61440,vd=49152,Vl=40960,qo=32768,wd=24576,ia=16384,_d=8192,xd=4096,k0=2048,A0=1024,vY=512,wY=448,sj=256,lj=128,uj=64,_Y=56,cj=32,dj=16,fj=8,xY=7,hj=4,pj=2,mj=1,SY=0,ui=4294967295,gj=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:zC,COPYFILE_FICLONE:uY,COPYFILE_FICLONE_FORCE:cY,F_OK:BC,O_APPEND:ld,O_CREAT:gw,O_DIRECT:yY,O_DIRECTORY:fY,O_DSYNC:mY,O_EXCL:yw,O_NOATIME:hY,O_NOCTTY:dY,O_NOFOLLOW:pY,O_NONBLOCK:bY,O_RDONLY:oj,O_RDWR:Rl,O_SYMLINK:gY,O_SYNC:vw,O_TRUNC:bw,O_WRONLY:Wa,R_OK:pa,S_IFBLK:wd,S_IFCHR:_d,S_IFDIR:ia,S_IFIFO:xd,S_IFLNK:Vl,S_IFMT:br,S_IFREG:qo,S_IFSOCK:vd,S_IRGRP:cj,S_IROTH:hj,S_IRUSR:sj,S_IRWXG:_Y,S_IRWXO:xY,S_IRWXU:wY,S_ISGID:A0,S_ISUID:k0,S_ISVTX:vY,S_IWGRP:dj,S_IWOTH:pj,S_IWUSR:lj,S_IXGRP:fj,S_IXOTH:mj,S_IXUSR:uj,UV_FS_O_FILEMAP:SY,W_OK:Wr,X_OK:pb,size_max:ui},Symbol.toStringTag,{value:"Module"})),Ly=BigInt(1e3);class yj{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:u,ino:c,...f}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(c??0),this.mode=this._convert(u??420&qo),(this.mode&br)==0&&(this.mode=this.mode|this._convert(qo)),Object.assign(this,f)}isFile(){return(this.mode&br)===qo}isDirectory(){return(this.mode&br)===ia}isSymbolicLink(){return(this.mode&br)===Vl}isSocket(){return(this.mode&br)===vd}isBlockDevice(){return(this.mode&br)===wd}isCharacterDevice(){return(this.mode&br)===_d}isFIFO(){return(this.mode&br)===xd}toJSON(){return yd(this,Q2)}hasAccess(t,n){return ir(n,this._isBigint?new Gl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*Ly}get mtimeNs(){return BigInt(this.mtimeMs)*Ly}get ctimeNs(){return BigInt(this.ctimeMs)*Ly}get birthtimeNs(){return BigInt(this.birthtimeMs)*Ly}}function bj(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<ui?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<ui?e.gid=n:r=!1,r}class Gl extends yj{constructor(){super(...arguments),this._isBigint=!1}}class Sd extends yj{constructor(){super(...arguments),this._isBigint=!0}}function EY(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class CY{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=ui,this.ffree=ui}}class kY{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(ui),this.ffree=BigInt(ui)}}var kr=function(e,t,n,r,a,i){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(S){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(S||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},hn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},UC=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Bi=0,AY=1024;let UN=(()=>{var e,t;let n=[bd()],r,a=[],i,o,s=[],u=[],c,f=[],h=[],p,g=[],v=[],b,_=[],S=[];return i=class{get key(){return this._key}set key(x){this._key=x,this.keySize=x.length}get value(){return this._value.subarray(0,this.valueSize)}set value(x){this._value=x,this.valueSize=x.length}constructor(x,E){this.keySize=hn(this,s,0),this.valueSize=(hn(this,u),hn(this,f,0)),this._key=(hn(this,h),hn(this,g,"")),this._value=(hn(this,v),hn(this,_,new Uint8Array(AY))),hn(this,S),x&&(this.key=x),E&&(this.value=E)}},UC(i,"Attribute"),(()=>{const x=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=gn).uint32.bind(e)],c=[(t=gn).uint32.bind(t)],p=[gn.char("keySize")],b=[gn.uint8("valueSize")],kr(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:x},s,u),kr(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:x},f,h),kr(null,null,p,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:x},g,v),kr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:x},_,S),kr(null,r={value:i},n,{kind:"class",name:i.name,metadata:x},null,a),i=r.value,x&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:x}),hn(i,a)})(),i})(),Ku=(()=>{var e;let t=[bd()],n,r=[],a,i,o=[],s=[],u,c=[],f=[];return a=class{has(h){return this.data.some(p=>p.key==h)}get(h){return this.data.find(p=>p.key==h)}set(h,p){const g=this.get(h);if(g){g.value=p;return}this.data.push(new UN(h,p)),this.size++}remove(h){const p=this.data.findIndex(g=>g.key==h);return p===-1?!1:(this.data.splice(p,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=hn(this,o,0),this.data=(hn(this,s),hn(this,c,[])),hn(this,f)}},UC(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=gn).uint32.bind(e)],u=[Dm(UN,"size")],kr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:p=>"size"in p,get:p=>p.size,set:(p,g)=>{p.size=g}},metadata:h},o,s),kr(null,null,u,{kind:"field",name:"data",static:!1,private:!1,access:{has:p=>"data"in p,get:p=>p.data,set:(p,g)=>{p.data=g}},metadata:h},c,f),kr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),hn(a,r)})(),a})();const Q2=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],TY=4;var xi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(xi||(xi={}));let aa=(()=>{var e,t,n,r,a,i,o,s,u,c,f,h,p,g,v,b;let _=[bd()],S,x=[],E,C,A=[],O=[],I,D=[],z=[],W,ee=[],F=[],Z,V=[],ae=[],ie,te=[],X=[],ce,G=[],Q=[],Y,re=[],be=[],_e,Ie=[],Pe=[],Re,ke=[],ze=[],it,Oe=[],Te=[],B,Ce=[],Ne=[],de,oe=[],J=[],xe,Le=[],Se=[],Ve,xt=[],ht=[],Et,Lt=[],Tt=[],Ut,ge=[],N=[],q,he=[],De=[],ve,Ae=[],le=[];var ct=E=class{constructor(yt){if(this.data=hn(this,A,X2(0,ui)),this.__data_old=(hn(this,O),hn(this,D,0)),this.size=(hn(this,z),hn(this,ee,0)),this.mode=(hn(this,F),hn(this,V,0)),this.nlink=(hn(this,ae),hn(this,te,1)),this.uid=(hn(this,X),hn(this,G,0)),this.gid=(hn(this,Q),hn(this,re,0)),this.atimeMs=(hn(this,be),hn(this,Ie,Date.now())),this.birthtimeMs=(hn(this,Pe),hn(this,ke,Date.now())),this.mtimeMs=(hn(this,ze),hn(this,Oe,Date.now())),this.ctimeMs=(hn(this,Te),hn(this,Ce,Date.now())),this.ino=(hn(this,Ne),hn(this,oe,X2(0,ui))),this.__ino_old=(hn(this,J),hn(this,Le,0)),this.flags=(hn(this,Se),hn(this,xt,0)),this.__after_flags=(hn(this,ht),hn(this,Lt,0)),this.version=(hn(this,Tt),hn(this,ge,0)),this.__padding=(hn(this,N),hn(this,he,[])),this.attributes=(hn(this,De),hn(this,Ae,new Ku)),hn(this,le),!!yt){if(!("byteLength"in yt)){Object.assign(this,yt);return}if(yt.byteLength<jr(ct))throw mw(new qe(st.EIO,"Buffer is too small to create an inode"));pw(this,yt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...yd(this,Q2),attributes:this.attributes}}toStats(){return new Gl(this)}update(yt){if(!yt)return!1;let M=!1;for(const Be of Q2)yt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==yt[Be]&&(Be=="atimeMs"&&this.flags&xi.NoAtime||(this[Be]=yt[Be],M=!0)));return yt.attributes&&(this.attributes=yt.attributes,M=!0),M&&(this.ctimeMs=Date.now()),M}};return UC(E,"Inode"),(()=>{const yt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=gn).uint32.bind(e)],I=[(t=gn).uint32.bind(t)],W=[(n=gn).uint32.bind(n)],Z=[(r=gn).uint16.bind(r)],ie=[(a=gn).uint32.bind(a)],ce=[(i=gn).uint32.bind(i)],Y=[(o=gn).uint32.bind(o)],_e=[(s=gn).float64.bind(s)],Re=[(u=gn).float64.bind(u)],it=[(c=gn).float64.bind(c)],B=[(f=gn).float64.bind(f)],de=[(h=gn).uint32.bind(h)],xe=[(p=gn).uint32.bind(p)],Ve=[(g=gn).uint32.bind(g)],Et=[(v=gn).uint16.bind(v)],Ut=[(b=gn).uint32.bind(b)],q=[gn.uint8(48)],ve=[Dm(Ku)],kr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:M=>"data"in M,get:M=>M.data,set:(M,Be)=>{M.data=Be}},metadata:yt},A,O),kr(null,null,I,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:M=>"__data_old"in M,get:M=>M.__data_old,set:(M,Be)=>{M.__data_old=Be}},metadata:yt},D,z),kr(null,null,W,{kind:"field",name:"size",static:!1,private:!1,access:{has:M=>"size"in M,get:M=>M.size,set:(M,Be)=>{M.size=Be}},metadata:yt},ee,F),kr(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:M=>"mode"in M,get:M=>M.mode,set:(M,Be)=>{M.mode=Be}},metadata:yt},V,ae),kr(null,null,ie,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:M=>"nlink"in M,get:M=>M.nlink,set:(M,Be)=>{M.nlink=Be}},metadata:yt},te,X),kr(null,null,ce,{kind:"field",name:"uid",static:!1,private:!1,access:{has:M=>"uid"in M,get:M=>M.uid,set:(M,Be)=>{M.uid=Be}},metadata:yt},G,Q),kr(null,null,Y,{kind:"field",name:"gid",static:!1,private:!1,access:{has:M=>"gid"in M,get:M=>M.gid,set:(M,Be)=>{M.gid=Be}},metadata:yt},re,be),kr(null,null,_e,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:M=>"atimeMs"in M,get:M=>M.atimeMs,set:(M,Be)=>{M.atimeMs=Be}},metadata:yt},Ie,Pe),kr(null,null,Re,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:M=>"birthtimeMs"in M,get:M=>M.birthtimeMs,set:(M,Be)=>{M.birthtimeMs=Be}},metadata:yt},ke,ze),kr(null,null,it,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:M=>"mtimeMs"in M,get:M=>M.mtimeMs,set:(M,Be)=>{M.mtimeMs=Be}},metadata:yt},Oe,Te),kr(null,null,B,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:M=>"ctimeMs"in M,get:M=>M.ctimeMs,set:(M,Be)=>{M.ctimeMs=Be}},metadata:yt},Ce,Ne),kr(null,null,de,{kind:"field",name:"ino",static:!1,private:!1,access:{has:M=>"ino"in M,get:M=>M.ino,set:(M,Be)=>{M.ino=Be}},metadata:yt},oe,J),kr(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:M=>"__ino_old"in M,get:M=>M.__ino_old,set:(M,Be)=>{M.__ino_old=Be}},metadata:yt},Le,Se),kr(null,null,Ve,{kind:"field",name:"flags",static:!1,private:!1,access:{has:M=>"flags"in M,get:M=>M.flags,set:(M,Be)=>{M.flags=Be}},metadata:yt},xt,ht),kr(null,null,Et,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:M=>"__after_flags"in M,get:M=>M.__after_flags,set:(M,Be)=>{M.__after_flags=Be}},metadata:yt},Lt,Tt),kr(null,null,Ut,{kind:"field",name:"version",static:!1,private:!1,access:{has:M=>"version"in M,get:M=>M.version,set:(M,Be)=>{M.version=Be}},metadata:yt},ge,N),kr(null,null,q,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:M=>"__padding"in M,get:M=>M.__padding,set:(M,Be)=>{M.__padding=Be}},metadata:yt},he,De),kr(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:M=>"attributes"in M,get:M=>M.attributes,set:(M,Be)=>{M.attributes=Be}},metadata:yt},Ae,le),kr(null,S={value:E},_,{kind:"class",name:E.name,metadata:yt},null,x),ct=E=S.value,yt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:yt}),hn(E,x)})(),ct=E})();function RY(e){return(e.mode&br)===qo}function Zo(e){return(e.mode&br)===ia}function eh(e){return(e.mode&br)===Vl}function NY(e){return(e.mode&br)===vd}function jm(e){return(e.mode&br)===wd}function Mm(e){return(e.mode&br)===_d}function IY(e){return(e.mode&br)===xd}function ir(e,t,n){const r=(e==null?void 0:e.credentials)||ts.credentials;if(eh(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&sj&&(a|=pa),t.mode&lj&&(a|=Wr),t.mode&uj&&(a|=pb)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&cj&&(a|=pa),t.mode&dj&&(a|=Wr),t.mode&fj&&(a|=pb)),t.mode&hj&&(a|=pa),t.mode&pj&&(a|=Wr),t.mode&mj&&(a|=pb),(a&n)===n}const qN=1;class $b extends Map{constructor(){super(...arguments),this.maxSize=ui}toJSON(){return{version:qN,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*jr(aa);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw qe.With("ENOENT",t);if((n.mode&br)!=ia)throw qe.With("ENOTDIR",t);const r={};for(const a of this.keys())Xn(a)==t&&a!=t&&(r[Qf(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&br)!=ia)continue;const a={};for(const i of this.keys())Xn(i)==n&&i!=n&&(a[Qf(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=qN)throw new qe(st.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=X2(1,ui)),r=="/"&&(a.ino=0),this.set(r,new aa(a));return this}static parse(t){if(!FZ(t))throw new qe(st.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new $b;return r.fromJSON(n),r}}const jx=4096;let qC=class eE{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===eE.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===eE.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=jx){const u=s+jx>o?o-s:jx,c=new Uint8Array(u);await this.read(t,c,s,s+u).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const u=f=>{s=!0,o.error(f)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(u),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(u))}})}};function oi(e){return JSON.parse(DC(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function so(e){return Qc(JSON.stringify(e))}function fc(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new qe(st.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Bb(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new qe(st.EINVAL,"Invalid time.")}}function ln(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new qe(st.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new qe(st.EINVAL,"Path can not contain null character");if(e.length==0)throw new qe(st.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Fl(e)}function Nl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:fc("mode"in e?e==null?void 0:e.mode:null,r)}}class OY{constructor(t,n,r,a){Ha(this,"id");Ha(this,"_size");Ha(this,"options");Ha(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=Im(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Im(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,u)=>s.start-u.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var Mx,Px,Fx;(Mx=Promise.withResolvers)!==null&&Mx!==void 0||(Promise.withResolvers=(Ka("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(Px=Symbol.dispose)!==null&&Px!==void 0||(Symbol.dispose=(Ka("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(Fx=Symbol.asyncDispose)!==null&&Fx!==void 0||(Symbol.asyncDispose=(Ka("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class vj{constructor(t){this.store=t}}class DY extends vj{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class tE extends vj{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new OY(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:u,end:c}of o)this.async(this.get(t,u,c));if(o.length)throw _i(qe.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){Ka("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class jY{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof tE))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,await this.raw.get(t,u.start,u.end),u.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof tE))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,u.start,u.end),u.start)}}}var Er=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Cr=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class wj extends qC{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=rj(t,a);if(o.startsWith(".."))continue;let s=tr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){Ka("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,pm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Er(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,Pa(o)),a.has(i)&&await r.set(o.data,so(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Cr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Er(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,Pa(o)),a.has(i)&&r.setSync(o.data,so(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Cr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new $b,a=Er(n,this.transaction(),!0),i=[["/",0]],o=FN(qe.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new aa(await a.get(u));if(r.set(s,c),c.mode&ia){const f=oi((t=await a.get(c.data))!==null&&t!==void 0?t:ur(qe.With("ENODATA",s)));for(const[h,p]of Object.entries(f))i.push([tr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Cr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new $b,a=Er(n,this.transaction(),!1),i=[["/",0]],o=FN(qe.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new aa(a.getSync(u));if(r.set(s,c),c.mode&ia){const f=oi((t=a.getSync(c.data))!==null&&t!==void 0?t:ur(qe.With("ENODATA",s)));for(const[h,p]of Object.entries(f))i.push([tr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Cr(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Er(o,this.transaction(),!0),u=Es(t),c=Es(n),f=await this.findInode(s,u.dir,"rename"),h=oi((r=await s.get(f.data))!==null&&r!==void 0?r:ur(qe.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw qe.With("ENOENT",t,"rename");const p=h[u.base];if(p!=this._ids.get(t)&&_i(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new qe(st.EBUSY,u.dir);const g=c.dir==u.dir,v=g?f:await this.findInode(s,c.dir,"rename"),b=g?h:oi((a=await s.get(v.data))!==null&&a!==void 0?a:ur(qe.With("ENODATA",c.dir,"rename")));if(b[c.base]){const _=new aa((i=await s.get(b[c.base]))!==null&&i!==void 0?i:ur(qe.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw qe.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(b[c.base])}b[c.base]=p,await s.set(f.data,so(h)),await s.set(v.data,so(b)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Cr(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Er(o,this.transaction(),!1),u=Es(t),c=Es(n),f=this.findInodeSync(s,u.dir,"rename"),h=oi((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(qe.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw qe.With("ENOENT",t,"rename");const p=h[u.base];if(p!=this._ids.get(t)&&_i(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new qe(st.EBUSY,u.dir);const g=c.dir===u.dir,v=g?f:this.findInodeSync(s,c.dir,"rename"),b=g?h:oi((a=s.getSync(v.data))!==null&&a!==void 0?a:ur(qe.With("ENODATA",c.dir,"rename")));if(b[c.base]){const _=new aa((i=s.getSync(b[c.base]))!==null&&i!==void 0?i:ur(qe.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw qe.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(b[c.base])}b[c.base]=p,s.setSync(f.data,so(h)),s.setSync(v.data,so(b)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Cr(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Er(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Cr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Er(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Cr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Er(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Pa(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Cr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Er(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Pa(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Cr(r)}}async createFile(t,n){return n.mode|=qo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=qo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw qe.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw qe.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=ia,await this.commitNew(t,n,Qc("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=ia,this.commitNewSync(t,n,Qc("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Er(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(oi((n=await a.get(i.data))!==null&&n!==void 0?n:ur(qe.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Cr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Er(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(oi((n=a.getSync(i.data))!==null&&n!==void 0?n:ur(qe.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Cr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Er(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,Pa(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Cr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Er(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,Pa(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Cr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Er(a,this.transaction(),!0),o=Xn(n),s=await this.findInode(i,o,"link"),u=oi((r=await i.get(s.data))!==null&&r!==void 0?r:ur(qe.With("ENOENT",o,"link"))),c=await this.findInode(i,t,"link");c.nlink++,u[Qf(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,Pa(c)),await i.set(s.data,so(u)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Cr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Er(a,this.transaction(),!1),o=Xn(n),s=this.findInodeSync(i,o,"link"),u=oi((r=i.getSync(s.data))!==null&&r!==void 0?r:ur(qe.With("ENOENT",o,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,u[Qf(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,Pa(c)),i.setSync(s.data,so(u)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Cr(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Er(o,this.transaction(),!0),u=await this.findInode(s,t,"read");if(u.size==0)return;const c=(i=await s.get(u.data,r,a))!==null&&i!==void 0?i:ur(qe.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&_i(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{const s=Cr(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Er(o,this.transaction(),!1),u=this.findInodeSync(s,t,"read");if(u.size==0)return;const c=(i=s.getSync(u.data,r,a))!==null&&i!==void 0?i:ur(qe.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&_i(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{Cr(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Er(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let u=n;o.flag("partial")||(u=Im((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),await o.set(s.data,u,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Cr(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Er(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let u=n;o.flag("partial")||(u=Im((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),o.setSync(s.data,u,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Cr(i)}}transaction(){return new jY(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Er(t,this.transaction(),!0);if(await n.get(Bi))return;const r=new aa({ino:Bi,data:1,mode:511|ia});await n.set(r.data,Qc("{}")),this._add(Bi,"/"),await n.set(Bi,Pa(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Cr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Er(t,this.transaction(),!1);if(n.getSync(Bi))return;const r=new aa({ino:Bi,data:1,mode:511|ia});n.setSync(r.data,Qc("{}")),this._add(Bi,"/"),n.setSync(Bi,Pa(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Cr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Ka("Attempted to populate tables after initialization");return}pm("Populating tables with existing store metadata");const n=Er(t,this.transaction(),!0),r=await n.get(Bi);if(!r){LC("Store does not have a root inode");const s=new aa({ino:Bi,data:1,mode:511|ia});await n.set(s.data,Qc("{}")),this._add(Bi,"/"),await n.set(Bi,Pa(s)),await n.commit();return}if(r.length<jr(aa)){mw("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",Bi]];for(;o.length>0;){i++;const[s,u]=o.shift();this._add(u,s);const c=await n.get(u);if(!c){Ka("Store is missing data for inode: "+u);continue}if(c.length<jr(aa)){Ka(`Invalid inode size for ino ${u}: ${c.length}`);continue}const f=new aa(c);if((f.mode&ia)!=ia||a.has(u))continue;a.add(u);const h=await n.get(f.data);if(!h){Ka("Store is missing directory data: "+f.data);continue}const p=oi(h);for(const[g,v]of Object.entries(p))o.push([tr(s,g),v])}pm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Cr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw qe.With("ENOENT",n,r);return new aa((a=await t.get(i))!==null&&a!==void 0?a:ur(qe.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw qe.With("ENOENT",n,r);return new aa((a=t.getSync(i))!==null&&a!==void 0?a:ur(qe.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>ui)throw _i(new qe(st.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw qe.With("EEXIST",t,a);const s=Er(o,this.transaction(),!0),{dir:u,base:c}=Es(t),f=await this.findInode(s,u,a),h=oi((i=await s.get(f.data))!==null&&i!==void 0?i:ur(qe.With("ENOENT",u,a)));if(h[c])throw qe.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new aa({...n,ino:p,data:p+1,size:r.byteLength});return await s.set(g.ino,Pa(g)),await s.set(g.data,r),h[c]=g.ino,await s.set(f.data,so(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Cr(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw qe.With("EEXIST",t,a);const s=Er(o,this.transaction(),!1),{dir:u,base:c}=Es(t),f=this.findInodeSync(s,u,a),h=oi((i=s.getSync(f.data))!==null&&i!==void 0?i:ur(qe.With("ENOENT",u,a)));if(h[c])throw qe.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new aa({...n,ino:p,data:p+1,size:r.byteLength});return s.setSync(g.ino,Pa(g)),s.setSync(g.data,r),h[c]=g.ino,s.setSync(f.data,so(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Cr(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Er(i,this.transaction(),!0),{dir:u,base:c}=Es(t),f=await this.findInode(s,u,o),h=oi((r=await s.get(f.data))!==null&&r!==void 0?r:ur(qe.With("ENOENT",u,o)));if(!h[c])throw qe.With("ENOENT",t,o);const p=h[c],g=new aa((a=await s.get(p))!==null&&a!==void 0?a:ur(qe.With("ENOENT",t,o)));if(delete h[c],!n&&Zo(g))throw qe.With("EISDIR",t,o);await s.set(f.data,so(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,Pa(g))):(await s.remove(g.data),await s.remove(p),this._remove(p)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Cr(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Er(i,this.transaction(),!1),{dir:u,base:c}=Es(t),f=this.findInodeSync(s,u,o),h=oi((r=s.getSync(f.data))!==null&&r!==void 0?r:ur(qe.With("ENOENT",u,o))),p=h[c];if(!p)throw qe.With("ENOENT",t,o);const g=new aa((a=s.getSync(p))!==null&&a!==void 0?a:ur(qe.With("ENOENT",t,o)));if(delete h[c],!n&&Zo(g))throw qe.With("EISDIR",t,o);s.setSync(f.data,so(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,Pa(g))):(s.removeSync(g.data),s.removeSync(p),this._remove(p)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Cr(i)}}}class MY extends DY{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class PY extends Map{constructor(t=ui,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new MY(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const FY={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new wj(new PY(e,t));return n.checkRootSync(),n}},LY=FY;let ma=!0;var HC={},ww={};ww.byteLength=zY;ww.toByteArray=qY;ww.fromByteArray=GY;var As=[],ho=[],$Y=typeof Uint8Array<"u"?Uint8Array:Array,Lx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Sf=0,BY=Lx.length;Sf<BY;++Sf)As[Sf]=Lx[Sf],ho[Lx.charCodeAt(Sf)]=Sf;ho[45]=62;ho[95]=63;function _j(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function zY(e){var t=_j(e),n=t[0],r=t[1];return(n+r)*3/4-r}function UY(e,t,n){return(t+n)*3/4-n}function qY(e){var t,n=_j(e),r=n[0],a=n[1],i=new $Y(UY(e,r,a)),o=0,s=a>0?r-4:r,u;for(u=0;u<s;u+=4)t=ho[e.charCodeAt(u)]<<18|ho[e.charCodeAt(u+1)]<<12|ho[e.charCodeAt(u+2)]<<6|ho[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=ho[e.charCodeAt(u)]<<2|ho[e.charCodeAt(u+1)]>>4,i[o++]=t&255),a===1&&(t=ho[e.charCodeAt(u)]<<10|ho[e.charCodeAt(u+1)]<<4|ho[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function HY(e){return As[e>>18&63]+As[e>>12&63]+As[e>>6&63]+As[e&63]}function VY(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(HY(r));return a.join("")}function GY(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(VY(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(As[t>>2]+As[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(As[t>>10]+As[t>>4&63]+As[t<<2&63]+"=")),a.join("")}var VC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */VC.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,u=(1<<s)-1,c=u>>1,f=-7,h=n?a-1:0,p=n?-1:1,g=e[t+h];for(h+=p,i=g&(1<<-f)-1,g>>=-f,f+=s;f>0;i=i*256+e[t+h],h+=p,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+h],h+=p,f-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};VC.write=function(e,t,n,r,a,i){var o,s,u,c=i*8-a-1,f=(1<<c)-1,h=f>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=p/u:t+=p*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=v,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+g]=o&255,g+=v,o/=256,c-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=ww,n=VC,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;f.TYPED_ARRAY_SUPPORT=u(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const ge=new i(1),N={foo:function(){return 42}};return Object.setPrototypeOf(N,i.prototype),Object.setPrototypeOf(ge,N),ge.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(ge){if(ge>a)throw new RangeError('The value "'+ge+'" is invalid for option "size"');const N=new i(ge);return Object.setPrototypeOf(N,f.prototype),N}function f(ge,N,q){if(typeof ge=="number"){if(typeof N=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ge)}return h(ge,N,q)}f.poolSize=8192;function h(ge,N,q){if(typeof ge=="string")return b(ge,N);if(o.isView(ge))return S(ge);if(ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge);if(ht(ge,o)||ge&&ht(ge.buffer,o)||typeof s<"u"&&(ht(ge,s)||ge&&ht(ge.buffer,s)))return x(ge,N,q);if(typeof ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=ge.valueOf&&ge.valueOf();if(he!=null&&he!==ge)return f.from(he,N,q);const De=E(ge);if(De)return De;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ge[Symbol.toPrimitive]=="function")return f.from(ge[Symbol.toPrimitive]("string"),N,q);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge)}f.from=function(ge,N,q){return h(ge,N,q)},Object.setPrototypeOf(f.prototype,i.prototype),Object.setPrototypeOf(f,i);function p(ge){if(typeof ge!="number")throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function g(ge,N,q){return p(ge),ge<=0?c(ge):N!==void 0?typeof q=="string"?c(ge).fill(N,q):c(ge).fill(N):c(ge)}f.alloc=function(ge,N,q){return g(ge,N,q)};function v(ge){return p(ge),c(ge<0?0:C(ge)|0)}f.allocUnsafe=function(ge){return v(ge)},f.allocUnsafeSlow=function(ge){return v(ge)};function b(ge,N){if((typeof N!="string"||N==="")&&(N="utf8"),!f.isEncoding(N))throw new TypeError("Unknown encoding: "+N);const q=O(ge,N)|0;let he=c(q);const De=he.write(ge,N);return De!==q&&(he=he.slice(0,De)),he}function _(ge){const N=ge.length<0?0:C(ge.length)|0,q=c(N);for(let he=0;he<N;he+=1)q[he]=ge[he]&255;return q}function S(ge){if(ht(ge,i)){const N=new i(ge);return x(N.buffer,N.byteOffset,N.byteLength)}return _(ge)}function x(ge,N,q){if(N<0||ge.byteLength<N)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<N+(q||0))throw new RangeError('"length" is outside of buffer bounds');let he;return N===void 0&&q===void 0?he=new i(ge):q===void 0?he=new i(ge,N):he=new i(ge,N,q),Object.setPrototypeOf(he,f.prototype),he}function E(ge){if(f.isBuffer(ge)){const N=C(ge.length)|0,q=c(N);return q.length===0||ge.copy(q,0,0,N),q}if(ge.length!==void 0)return typeof ge.length!="number"||Et(ge.length)?c(0):_(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return _(ge.data)}function C(ge){if(ge>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ge|0}function A(ge){return+ge!=ge&&(ge=0),f.alloc(+ge)}f.isBuffer=function(N){return N!=null&&N._isBuffer===!0&&N!==f.prototype},f.compare=function(N,q){if(ht(N,i)&&(N=f.from(N,N.offset,N.byteLength)),ht(q,i)&&(q=f.from(q,q.offset,q.byteLength)),!f.isBuffer(N)||!f.isBuffer(q))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(N===q)return 0;let he=N.length,De=q.length;for(let ve=0,Ae=Math.min(he,De);ve<Ae;++ve)if(N[ve]!==q[ve]){he=N[ve],De=q[ve];break}return he<De?-1:De<he?1:0},f.isEncoding=function(N){switch(String(N).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(N,q){if(!Array.isArray(N))throw new TypeError('"list" argument must be an Array of Buffers');if(N.length===0)return f.alloc(0);let he;if(q===void 0)for(q=0,he=0;he<N.length;++he)q+=N[he].length;const De=f.allocUnsafe(q);let ve=0;for(he=0;he<N.length;++he){let Ae=N[he];if(ht(Ae,i))ve+Ae.length>De.length?(f.isBuffer(Ae)||(Ae=f.from(Ae)),Ae.copy(De,ve)):i.prototype.set.call(De,Ae,ve);else if(f.isBuffer(Ae))Ae.copy(De,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=Ae.length}return De};function O(ge,N){if(f.isBuffer(ge))return ge.length;if(o.isView(ge)||ht(ge,o))return ge.byteLength;if(typeof ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ge);const q=ge.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&q===0)return 0;let De=!1;for(;;)switch(N){case"ascii":case"latin1":case"binary":return q;case"utf8":case"utf-8":return xe(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q*2;case"hex":return q>>>1;case"base64":return Ve(ge).length;default:if(De)return he?-1:xe(ge).length;N=(""+N).toLowerCase(),De=!0}}f.byteLength=O;function I(ge,N,q){let he=!1;if((N===void 0||N<0)&&(N=0),N>this.length||((q===void 0||q>this.length)&&(q=this.length),q<=0)||(q>>>=0,N>>>=0,q<=N))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return Y(this,N,q);case"utf8":case"utf-8":return te(this,N,q);case"ascii":return G(this,N,q);case"latin1":case"binary":return Q(this,N,q);case"base64":return ie(this,N,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,N,q);default:if(he)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),he=!0}}f.prototype._isBuffer=!0;function D(ge,N,q){const he=ge[N];ge[N]=ge[q],ge[q]=he}f.prototype.swap16=function(){const N=this.length;if(N%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let q=0;q<N;q+=2)D(this,q,q+1);return this},f.prototype.swap32=function(){const N=this.length;if(N%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let q=0;q<N;q+=4)D(this,q,q+3),D(this,q+1,q+2);return this},f.prototype.swap64=function(){const N=this.length;if(N%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let q=0;q<N;q+=8)D(this,q,q+7),D(this,q+1,q+6),D(this,q+2,q+5),D(this,q+3,q+4);return this},f.prototype.toString=function(){const N=this.length;return N===0?"":arguments.length===0?te(this,0,N):I.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(N){if(!f.isBuffer(N))throw new TypeError("Argument must be a Buffer");return this===N?!0:f.compare(this,N)===0},f.prototype.inspect=function(){let N="";const q=e.INSPECT_MAX_BYTES;return N=this.toString("hex",0,q).replace(/(.{2})/g,"$1 ").trim(),this.length>q&&(N+=" ... "),"<Buffer "+N+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(N,q,he,De,ve){if(ht(N,i)&&(N=f.from(N,N.offset,N.byteLength)),!f.isBuffer(N))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof N);if(q===void 0&&(q=0),he===void 0&&(he=N?N.length:0),De===void 0&&(De=0),ve===void 0&&(ve=this.length),q<0||he>N.length||De<0||ve>this.length)throw new RangeError("out of range index");if(De>=ve&&q>=he)return 0;if(De>=ve)return-1;if(q>=he)return 1;if(q>>>=0,he>>>=0,De>>>=0,ve>>>=0,this===N)return 0;let Ae=ve-De,le=he-q;const ct=Math.min(Ae,le),yt=this.slice(De,ve),M=N.slice(q,he);for(let Be=0;Be<ct;++Be)if(yt[Be]!==M[Be]){Ae=yt[Be],le=M[Be];break}return Ae<le?-1:le<Ae?1:0};function z(ge,N,q,he,De){if(ge.length===0)return-1;if(typeof q=="string"?(he=q,q=0):q>2147483647?q=2147483647:q<-2147483648&&(q=-2147483648),q=+q,Et(q)&&(q=De?0:ge.length-1),q<0&&(q=ge.length+q),q>=ge.length){if(De)return-1;q=ge.length-1}else if(q<0)if(De)q=0;else return-1;if(typeof N=="string"&&(N=f.from(N,he)),f.isBuffer(N))return N.length===0?-1:W(ge,N,q,he,De);if(typeof N=="number")return N=N&255,typeof i.prototype.indexOf=="function"?De?i.prototype.indexOf.call(ge,N,q):i.prototype.lastIndexOf.call(ge,N,q):W(ge,[N],q,he,De);throw new TypeError("val must be string, number or Buffer")}function W(ge,N,q,he,De){let ve=1,Ae=ge.length,le=N.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(ge.length<2||N.length<2)return-1;ve=2,Ae/=2,le/=2,q/=2}function ct(M,Be){return ve===1?M[Be]:M.readUInt16BE(Be*ve)}let yt;if(De){let M=-1;for(yt=q;yt<Ae;yt++)if(ct(ge,yt)===ct(N,M===-1?0:yt-M)){if(M===-1&&(M=yt),yt-M+1===le)return M*ve}else M!==-1&&(yt-=yt-M),M=-1}else for(q+le>Ae&&(q=Ae-le),yt=q;yt>=0;yt--){let M=!0;for(let Be=0;Be<le;Be++)if(ct(ge,yt+Be)!==ct(N,Be)){M=!1;break}if(M)return yt}return-1}f.prototype.includes=function(N,q,he){return this.indexOf(N,q,he)!==-1},f.prototype.indexOf=function(N,q,he){return z(this,N,q,he,!0)},f.prototype.lastIndexOf=function(N,q,he){return z(this,N,q,he,!1)};function ee(ge,N,q,he){q=Number(q)||0;const De=ge.length-q;he?(he=Number(he),he>De&&(he=De)):he=De;const ve=N.length;he>ve/2&&(he=ve/2);let Ae;for(Ae=0;Ae<he;++Ae){const le=parseInt(N.substr(Ae*2,2),16);if(Et(le))return Ae;ge[q+Ae]=le}return Ae}function F(ge,N,q,he){return xt(xe(N,ge.length-q),ge,q,he)}function Z(ge,N,q,he){return xt(Le(N),ge,q,he)}function V(ge,N,q,he){return xt(Ve(N),ge,q,he)}function ae(ge,N,q,he){return xt(Se(N,ge.length-q),ge,q,he)}f.prototype.write=function(N,q,he,De){if(q===void 0)De="utf8",he=this.length,q=0;else if(he===void 0&&typeof q=="string")De=q,he=this.length,q=0;else if(isFinite(q))q=q>>>0,isFinite(he)?(he=he>>>0,De===void 0&&(De="utf8")):(De=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-q;if((he===void 0||he>ve)&&(he=ve),N.length>0&&(he<0||q<0)||q>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");let Ae=!1;for(;;)switch(De){case"hex":return ee(this,N,q,he);case"utf8":case"utf-8":return F(this,N,q,he);case"ascii":case"latin1":case"binary":return Z(this,N,q,he);case"base64":return V(this,N,q,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,N,q,he);default:if(Ae)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Ae=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(ge,N,q){return N===0&&q===ge.length?t.fromByteArray(ge):t.fromByteArray(ge.slice(N,q))}function te(ge,N,q){q=Math.min(ge.length,q);const he=[];let De=N;for(;De<q;){const ve=ge[De];let Ae=null,le=ve>239?4:ve>223?3:ve>191?2:1;if(De+le<=q){let ct,yt,M,Be;switch(le){case 1:ve<128&&(Ae=ve);break;case 2:ct=ge[De+1],(ct&192)===128&&(Be=(ve&31)<<6|ct&63,Be>127&&(Ae=Be));break;case 3:ct=ge[De+1],yt=ge[De+2],(ct&192)===128&&(yt&192)===128&&(Be=(ve&15)<<12|(ct&63)<<6|yt&63,Be>2047&&(Be<55296||Be>57343)&&(Ae=Be));break;case 4:ct=ge[De+1],yt=ge[De+2],M=ge[De+3],(ct&192)===128&&(yt&192)===128&&(M&192)===128&&(Be=(ve&15)<<18|(ct&63)<<12|(yt&63)<<6|M&63,Be>65535&&Be<1114112&&(Ae=Be))}}Ae===null?(Ae=65533,le=1):Ae>65535&&(Ae-=65536,he.push(Ae>>>10&1023|55296),Ae=56320|Ae&1023),he.push(Ae),De+=le}return ce(he)}const X=4096;function ce(ge){const N=ge.length;if(N<=X)return String.fromCharCode.apply(String,ge);let q="",he=0;for(;he<N;)q+=String.fromCharCode.apply(String,ge.slice(he,he+=X));return q}function G(ge,N,q){let he="";q=Math.min(ge.length,q);for(let De=N;De<q;++De)he+=String.fromCharCode(ge[De]&127);return he}function Q(ge,N,q){let he="";q=Math.min(ge.length,q);for(let De=N;De<q;++De)he+=String.fromCharCode(ge[De]);return he}function Y(ge,N,q){const he=ge.length;(!N||N<0)&&(N=0),(!q||q<0||q>he)&&(q=he);let De="";for(let ve=N;ve<q;++ve)De+=Lt[ge[ve]];return De}function re(ge,N,q){const he=ge.slice(N,q);let De="";for(let ve=0;ve<he.length-1;ve+=2)De+=String.fromCharCode(he[ve]+he[ve+1]*256);return De}f.prototype.slice=function(N,q){const he=this.length;N=~~N,q=q===void 0?he:~~q,N<0?(N+=he,N<0&&(N=0)):N>he&&(N=he),q<0?(q+=he,q<0&&(q=0)):q>he&&(q=he),q<N&&(q=N);const De=this.subarray(N,q);return Object.setPrototypeOf(De,f.prototype),De};function be(ge,N,q){if(ge%1!==0||ge<0)throw new RangeError("offset is not uint");if(ge+N>q)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(N,q,he){N=N>>>0,q=q>>>0,he||be(N,q,this.length);let De=this[N],ve=1,Ae=0;for(;++Ae<q&&(ve*=256);)De+=this[N+Ae]*ve;return De},f.prototype.readUintBE=f.prototype.readUIntBE=function(N,q,he){N=N>>>0,q=q>>>0,he||be(N,q,this.length);let De=this[N+--q],ve=1;for(;q>0&&(ve*=256);)De+=this[N+--q]*ve;return De},f.prototype.readUint8=f.prototype.readUInt8=function(N,q){return N=N>>>0,q||be(N,1,this.length),this[N]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(N,q){return N=N>>>0,q||be(N,2,this.length),this[N]|this[N+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(N,q){return N=N>>>0,q||be(N,2,this.length),this[N]<<8|this[N+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(N,q){return N=N>>>0,q||be(N,4,this.length),(this[N]|this[N+1]<<8|this[N+2]<<16)+this[N+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(N,q){return N=N>>>0,q||be(N,4,this.length),this[N]*16777216+(this[N+1]<<16|this[N+2]<<8|this[N+3])},f.prototype.readBigUInt64LE=Tt(function(N){N=N>>>0,Ne(N,"offset");const q=this[N],he=this[N+7];(q===void 0||he===void 0)&&de(N,this.length-8);const De=q+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24,ve=this[++N]+this[++N]*2**8+this[++N]*2**16+he*2**24;return BigInt(De)+(BigInt(ve)<<BigInt(32))}),f.prototype.readBigUInt64BE=Tt(function(N){N=N>>>0,Ne(N,"offset");const q=this[N],he=this[N+7];(q===void 0||he===void 0)&&de(N,this.length-8);const De=q*2**24+this[++N]*2**16+this[++N]*2**8+this[++N],ve=this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+he;return(BigInt(De)<<BigInt(32))+BigInt(ve)}),f.prototype.readIntLE=function(N,q,he){N=N>>>0,q=q>>>0,he||be(N,q,this.length);let De=this[N],ve=1,Ae=0;for(;++Ae<q&&(ve*=256);)De+=this[N+Ae]*ve;return ve*=128,De>=ve&&(De-=Math.pow(2,8*q)),De},f.prototype.readIntBE=function(N,q,he){N=N>>>0,q=q>>>0,he||be(N,q,this.length);let De=q,ve=1,Ae=this[N+--De];for(;De>0&&(ve*=256);)Ae+=this[N+--De]*ve;return ve*=128,Ae>=ve&&(Ae-=Math.pow(2,8*q)),Ae},f.prototype.readInt8=function(N,q){return N=N>>>0,q||be(N,1,this.length),this[N]&128?(255-this[N]+1)*-1:this[N]},f.prototype.readInt16LE=function(N,q){N=N>>>0,q||be(N,2,this.length);const he=this[N]|this[N+1]<<8;return he&32768?he|4294901760:he},f.prototype.readInt16BE=function(N,q){N=N>>>0,q||be(N,2,this.length);const he=this[N+1]|this[N]<<8;return he&32768?he|4294901760:he},f.prototype.readInt32LE=function(N,q){return N=N>>>0,q||be(N,4,this.length),this[N]|this[N+1]<<8|this[N+2]<<16|this[N+3]<<24},f.prototype.readInt32BE=function(N,q){return N=N>>>0,q||be(N,4,this.length),this[N]<<24|this[N+1]<<16|this[N+2]<<8|this[N+3]},f.prototype.readBigInt64LE=Tt(function(N){N=N>>>0,Ne(N,"offset");const q=this[N],he=this[N+7];(q===void 0||he===void 0)&&de(N,this.length-8);const De=this[N+4]+this[N+5]*2**8+this[N+6]*2**16+(he<<24);return(BigInt(De)<<BigInt(32))+BigInt(q+this[++N]*2**8+this[++N]*2**16+this[++N]*2**24)}),f.prototype.readBigInt64BE=Tt(function(N){N=N>>>0,Ne(N,"offset");const q=this[N],he=this[N+7];(q===void 0||he===void 0)&&de(N,this.length-8);const De=(q<<24)+this[++N]*2**16+this[++N]*2**8+this[++N];return(BigInt(De)<<BigInt(32))+BigInt(this[++N]*2**24+this[++N]*2**16+this[++N]*2**8+he)}),f.prototype.readFloatLE=function(N,q){return N=N>>>0,q||be(N,4,this.length),n.read(this,N,!0,23,4)},f.prototype.readFloatBE=function(N,q){return N=N>>>0,q||be(N,4,this.length),n.read(this,N,!1,23,4)},f.prototype.readDoubleLE=function(N,q){return N=N>>>0,q||be(N,8,this.length),n.read(this,N,!0,52,8)},f.prototype.readDoubleBE=function(N,q){return N=N>>>0,q||be(N,8,this.length),n.read(this,N,!1,52,8)};function _e(ge,N,q,he,De,ve){if(!f.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(N>De||N<ve)throw new RangeError('"value" argument is out of bounds');if(q+he>ge.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(N,q,he,De){if(N=+N,q=q>>>0,he=he>>>0,!De){const le=Math.pow(2,8*he)-1;_e(this,N,q,he,le,0)}let ve=1,Ae=0;for(this[q]=N&255;++Ae<he&&(ve*=256);)this[q+Ae]=N/ve&255;return q+he},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(N,q,he,De){if(N=+N,q=q>>>0,he=he>>>0,!De){const le=Math.pow(2,8*he)-1;_e(this,N,q,he,le,0)}let ve=he-1,Ae=1;for(this[q+ve]=N&255;--ve>=0&&(Ae*=256);)this[q+ve]=N/Ae&255;return q+he},f.prototype.writeUint8=f.prototype.writeUInt8=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,1,255,0),this[q]=N&255,q+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,2,65535,0),this[q]=N&255,this[q+1]=N>>>8,q+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,2,65535,0),this[q]=N>>>8,this[q+1]=N&255,q+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,4,4294967295,0),this[q+3]=N>>>24,this[q+2]=N>>>16,this[q+1]=N>>>8,this[q]=N&255,q+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,4,4294967295,0),this[q]=N>>>24,this[q+1]=N>>>16,this[q+2]=N>>>8,this[q+3]=N&255,q+4};function Ie(ge,N,q,he,De){Ce(N,he,De,ge,q,7);let ve=Number(N&BigInt(4294967295));ge[q++]=ve,ve=ve>>8,ge[q++]=ve,ve=ve>>8,ge[q++]=ve,ve=ve>>8,ge[q++]=ve;let Ae=Number(N>>BigInt(32)&BigInt(4294967295));return ge[q++]=Ae,Ae=Ae>>8,ge[q++]=Ae,Ae=Ae>>8,ge[q++]=Ae,Ae=Ae>>8,ge[q++]=Ae,q}function Pe(ge,N,q,he,De){Ce(N,he,De,ge,q,7);let ve=Number(N&BigInt(4294967295));ge[q+7]=ve,ve=ve>>8,ge[q+6]=ve,ve=ve>>8,ge[q+5]=ve,ve=ve>>8,ge[q+4]=ve;let Ae=Number(N>>BigInt(32)&BigInt(4294967295));return ge[q+3]=Ae,Ae=Ae>>8,ge[q+2]=Ae,Ae=Ae>>8,ge[q+1]=Ae,Ae=Ae>>8,ge[q]=Ae,q+8}f.prototype.writeBigUInt64LE=Tt(function(N,q=0){return Ie(this,N,q,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Tt(function(N,q=0){return Pe(this,N,q,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(N,q,he,De){if(N=+N,q=q>>>0,!De){const ct=Math.pow(2,8*he-1);_e(this,N,q,he,ct-1,-ct)}let ve=0,Ae=1,le=0;for(this[q]=N&255;++ve<he&&(Ae*=256);)N<0&&le===0&&this[q+ve-1]!==0&&(le=1),this[q+ve]=(N/Ae>>0)-le&255;return q+he},f.prototype.writeIntBE=function(N,q,he,De){if(N=+N,q=q>>>0,!De){const ct=Math.pow(2,8*he-1);_e(this,N,q,he,ct-1,-ct)}let ve=he-1,Ae=1,le=0;for(this[q+ve]=N&255;--ve>=0&&(Ae*=256);)N<0&&le===0&&this[q+ve+1]!==0&&(le=1),this[q+ve]=(N/Ae>>0)-le&255;return q+he},f.prototype.writeInt8=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,1,127,-128),N<0&&(N=255+N+1),this[q]=N&255,q+1},f.prototype.writeInt16LE=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,2,32767,-32768),this[q]=N&255,this[q+1]=N>>>8,q+2},f.prototype.writeInt16BE=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,2,32767,-32768),this[q]=N>>>8,this[q+1]=N&255,q+2},f.prototype.writeInt32LE=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,4,2147483647,-2147483648),this[q]=N&255,this[q+1]=N>>>8,this[q+2]=N>>>16,this[q+3]=N>>>24,q+4},f.prototype.writeInt32BE=function(N,q,he){return N=+N,q=q>>>0,he||_e(this,N,q,4,2147483647,-2147483648),N<0&&(N=4294967295+N+1),this[q]=N>>>24,this[q+1]=N>>>16,this[q+2]=N>>>8,this[q+3]=N&255,q+4},f.prototype.writeBigInt64LE=Tt(function(N,q=0){return Ie(this,N,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Tt(function(N,q=0){return Pe(this,N,q,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(ge,N,q,he,De,ve){if(q+he>ge.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("Index out of range")}function ke(ge,N,q,he,De){return N=+N,q=q>>>0,De||Re(ge,N,q,4),n.write(ge,N,q,he,23,4),q+4}f.prototype.writeFloatLE=function(N,q,he){return ke(this,N,q,!0,he)},f.prototype.writeFloatBE=function(N,q,he){return ke(this,N,q,!1,he)};function ze(ge,N,q,he,De){return N=+N,q=q>>>0,De||Re(ge,N,q,8),n.write(ge,N,q,he,52,8),q+8}f.prototype.writeDoubleLE=function(N,q,he){return ze(this,N,q,!0,he)},f.prototype.writeDoubleBE=function(N,q,he){return ze(this,N,q,!1,he)},f.prototype.copy=function(N,q,he,De){if(!f.isBuffer(N))throw new TypeError("argument should be a Buffer");if(he||(he=0),!De&&De!==0&&(De=this.length),q>=N.length&&(q=N.length),q||(q=0),De>0&&De<he&&(De=he),De===he||N.length===0||this.length===0)return 0;if(q<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),N.length-q<De-he&&(De=N.length-q+he);const ve=De-he;return this===N&&typeof i.prototype.copyWithin=="function"?this.copyWithin(q,he,De):i.prototype.set.call(N,this.subarray(he,De),q),ve},f.prototype.fill=function(N,q,he,De){if(typeof N=="string"){if(typeof q=="string"?(De=q,q=0,he=this.length):typeof he=="string"&&(De=he,he=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!f.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(N.length===1){const Ae=N.charCodeAt(0);(De==="utf8"&&Ae<128||De==="latin1")&&(N=Ae)}}else typeof N=="number"?N=N&255:typeof N=="boolean"&&(N=Number(N));if(q<0||this.length<q||this.length<he)throw new RangeError("Out of range index");if(he<=q)return this;q=q>>>0,he=he===void 0?this.length:he>>>0,N||(N=0);let ve;if(typeof N=="number")for(ve=q;ve<he;++ve)this[ve]=N;else{const Ae=f.isBuffer(N)?N:f.from(N,De),le=Ae.length;if(le===0)throw new TypeError('The value "'+N+'" is invalid for argument "value"');for(ve=0;ve<he-q;++ve)this[ve+q]=Ae[ve%le]}return this};const it={};function Oe(ge,N,q){it[ge]=class extends q{constructor(){super(),Object.defineProperty(this,"message",{value:N.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ge}]`,this.stack,delete this.name}get code(){return ge}set code(De){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:De,writable:!0})}toString(){return`${this.name} [${ge}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?`${ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(ge,N){return`The "${ge}" argument must be of type number. Received type ${typeof N}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(ge,N,q){let he=`The value of "${ge}" is out of range.`,De=q;return Number.isInteger(q)&&Math.abs(q)>2**32?De=Te(String(q)):typeof q=="bigint"&&(De=String(q),(q>BigInt(2)**BigInt(32)||q<-(BigInt(2)**BigInt(32)))&&(De=Te(De)),De+="n"),he+=` It must be ${N}. Received ${De}`,he},RangeError);function Te(ge){let N="",q=ge.length;const he=ge[0]==="-"?1:0;for(;q>=he+4;q-=3)N=`_${ge.slice(q-3,q)}${N}`;return`${ge.slice(0,q)}${N}`}function B(ge,N,q){Ne(N,"offset"),(ge[N]===void 0||ge[N+q]===void 0)&&de(N,ge.length-(q+1))}function Ce(ge,N,q,he,De,ve){if(ge>q||ge<N){const Ae=typeof N=="bigint"?"n":"";let le;throw N===0||N===BigInt(0)?le=`>= 0${Ae} and < 2${Ae} ** ${(ve+1)*8}${Ae}`:le=`>= -(2${Ae} ** ${(ve+1)*8-1}${Ae}) and < 2 ** ${(ve+1)*8-1}${Ae}`,new it.ERR_OUT_OF_RANGE("value",le,ge)}B(he,De,ve)}function Ne(ge,N){if(typeof ge!="number")throw new it.ERR_INVALID_ARG_TYPE(N,"number",ge)}function de(ge,N,q){throw Math.floor(ge)!==ge?(Ne(ge,q),new it.ERR_OUT_OF_RANGE("offset","an integer",ge)):N<0?new it.ERR_BUFFER_OUT_OF_BOUNDS:new it.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${N}`,ge)}const oe=/[^+/0-9A-Za-z-_]/g;function J(ge){if(ge=ge.split("=")[0],ge=ge.trim().replace(oe,""),ge.length<2)return"";for(;ge.length%4!==0;)ge=ge+"=";return ge}function xe(ge,N){N=N||1/0;let q;const he=ge.length;let De=null;const ve=[];for(let Ae=0;Ae<he;++Ae){if(q=ge.charCodeAt(Ae),q>55295&&q<57344){if(!De){if(q>56319){(N-=3)>-1&&ve.push(239,191,189);continue}else if(Ae+1===he){(N-=3)>-1&&ve.push(239,191,189);continue}De=q;continue}if(q<56320){(N-=3)>-1&&ve.push(239,191,189),De=q;continue}q=(De-55296<<10|q-56320)+65536}else De&&(N-=3)>-1&&ve.push(239,191,189);if(De=null,q<128){if((N-=1)<0)break;ve.push(q)}else if(q<2048){if((N-=2)<0)break;ve.push(q>>6|192,q&63|128)}else if(q<65536){if((N-=3)<0)break;ve.push(q>>12|224,q>>6&63|128,q&63|128)}else if(q<1114112){if((N-=4)<0)break;ve.push(q>>18|240,q>>12&63|128,q>>6&63|128,q&63|128)}else throw new Error("Invalid code point")}return ve}function Le(ge){const N=[];for(let q=0;q<ge.length;++q)N.push(ge.charCodeAt(q)&255);return N}function Se(ge,N){let q,he,De;const ve=[];for(let Ae=0;Ae<ge.length&&!((N-=2)<0);++Ae)q=ge.charCodeAt(Ae),he=q>>8,De=q%256,ve.push(De),ve.push(he);return ve}function Ve(ge){return t.toByteArray(J(ge))}function xt(ge,N,q,he){let De;for(De=0;De<he&&!(De+q>=N.length||De>=ge.length);++De)N[De+q]=ge[De];return De}function ht(ge,N){return ge instanceof N||ge!=null&&ge.constructor!=null&&ge.constructor.name!=null&&ge.constructor.name===N.name}function Et(ge){return ge!==ge}const Lt=function(){const ge="0123456789abcdef",N=new Array(256);for(let q=0;q<16;++q){const he=q*16;for(let De=0;De<16;++De)N[he+De]=ge[q]+ge[De]}return N}();function Tt(ge){return typeof BigInt>"u"?Ut:ge}function Ut(){throw new Error("BigInt not supported")}})(HC);const Wt=HC.Buffer,Rr=HC.Buffer;class HN extends IC{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;lo(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;lo(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);$y(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);$y(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,lo(this.output,-a.length,0),lo(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;lo(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(lo(this.output,-this._cursor,0),lo(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);$y(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,lo(this.output,-r.length,0),lo(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&($y(this.output,0),lo(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Ka("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Ka("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function WY(e,t,n,r){return"input"in e?new HN(e.input,e.output,e.completer,e.terminal):new HN(e,t,n,r)}function $y(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function lo(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class zb{get position(){return this.flag&ld?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&vw||this.inode.flags&xi.Sync)}sync(){if(this.closed)throw qe.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw qe.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw qe.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw qe.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw qe.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw qe.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Wa||this.flag&Rl))throw new qe(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw qe.With("EBADF",this.path,"write");if(!(this.flag&Wa||this.flag&Rl))throw new qe(st.EPERM,"File not opened with a writeable mode");if(this.inode.flags&xi.Immutable)throw new qe(st.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Mm(this.inode)&&!jm(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw qe.With("EBADF",this.path,"read");if(this.flag&Wa)throw new qe(st.EPERM,"File not opened with a readable mode");this.inode.flags&xi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Mm(this.inode)&&!jm(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw qe.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>br?-61441:br)|t,(this._isSync||t>br)&&this.sync()}chown(t,n){if(this.closed)throw qe.With("EBADF",this.path,"chown");this.dirty=!0,bj(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw qe.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw qe.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw qe.With("EBADF",this.path,"streamWrite");if(this.inode.flags&xi.Immutable)throw new qe(st.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Ub(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:ts.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function ei(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:ts.descriptors).get(t);if(!a)throw new qe(st.EBADF);return a}function xj(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:ts.descriptors).delete(t)}const KY=/[rwasx]{1,2}\+?/;function Il(e){if(typeof e=="number")return e;if(!KY.test(e))throw new qe(st.EINVAL,"Invalid flag string: "+e);return ZY(e)}function ZY(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new qe(st.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?oj:gw;return e.includes("w")&&(t|=bw),e.includes("a")&&(t|=ld),e.includes("+")?t|=Rl:e.includes("r")||(t|=Wa),e.includes("s")&&(t|=vw),e.includes("x")&&(t|=yw),t}function Sj(e){let t=0;return e&Wa||(t|=pa),(e&Wa||e&Rl)&&(t|=Wr),t}const Pm=new Map;GC("/",LY.create({label:"root"}));function GC(e,t){if(e[0]!="/"&&(e="/"+e),e=Fl.call(this,e),Pm.has(e))throw _i(new qe(st.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Pm.set(e,t),aj(`Mounted ${t.name} on ${e}`),pm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function Ej(e){if(e[0]!="/"&&(e="/"+e),e=Fl.call(this,e),!Pm.has(e)){Ka(e+" is already unmounted");return}Pm.delete(e),LC("Unmounted "+e)}function Mn(e,t){const n=(t==null?void 0:t.root)||ts.root;e=ln(tr(n,e));const r=[...Pm].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(XY(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw QZ(new qe(st.EIO,"No file system",e))}function $x(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function or(e,t){typeof e.stack=="string"&&(e.stack=$x(e.stack,t));try{e.message=$x(e.message,t)}catch{}return e.path&&(e.path=$x(e.path,t)),e}function Cj(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||ui),files:(t?BigInt:Number)(n.totalNodes||ui),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function YY(e){var t,n,r,a,i,o,s;const u=this!==null&&this!==void 0?this:ts;if(((t=u.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=u.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=u.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=u.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new qe(st.EPERM,"Can not chroot() as non-root user");(i=u.root)!==null&&i!==void 0||(u.root="/");const c=tr(u.root,e);for(const f of(s=(o=u.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!f.path.startsWith(u.root))throw qe.With("EBUSY",f.path,"chroot");f.path=f.path.slice(u.root.length)}if(c.length>u.root.length)throw new qe(st.EPERM,"Can not chroot() outside of current root");u.root=c}function XY(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class kj extends IC{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw qe.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw qe.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw qe.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw qe.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw qe.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class Aj extends kj{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?tr(t.root,n):n,QY(this.realpath,this)}close(){super.emit("close"),eX(this.realpath,this)}[Symbol.dispose](){this.close()}}class JY extends kj{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Zu(this.path);EY(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Zu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Lu=new Map;function QY(e,t){const n=ln(e);Lu.has(n)||Lu.set(n,new Set),Lu.get(n).add(t)}function eX(e,t){const n=ln(e);Lu.has(n)&&(Lu.get(n).delete(t),Lu.get(n).size===0&&Lu.delete(n))}function La(e,t,n){var r;e&&(n=tr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=ln(n);for(let a=n;a!="/";a=Xn(a)){const i=Lu.get(a);if(i)for(const o of i)o.emit("change",t,rj.call(o._context,a,n)||Qf(n))}}var T0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},R0=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function tX(e,t){e=ln(e),t=ln(t);const n=Mn(e,this),r=Mn(t,this);if(!Zu.call(this,Xn(e)).hasAccess(Wr,this))throw qe.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),La(this,"rename",e.toString()),La(this,"change",t.toString());return}XC.call(this,t,YC(e)),ZC.call(this,e),La(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}function WC(e){e=ln(e);try{const{fs:t,path:n}=Mn(hc.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==st.ENOENT)return!1;throw t}}function Zu(e,t){e=ln(e);const{fs:n,path:r}=Mn(hc.call(this,e),this);try{const a=n.statSync(r);if(ma&&!ir(this,a,pa))throw qe.With("EACCES",r,"stat");return t!=null&&t.bigint?new Sd(a):new Gl(a)}catch(a){throw or(a,{[r]:e})}}function KC(e,t){e=ln(e);const{fs:n,path:r}=Mn(e,this);try{const a=n.statSync(r);if(ma&&!ir(this,a,pa))throw qe.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Sd(a):new Gl(a)}catch(a){throw or(a,{[r]:e})}}function nX(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=T0(n,Ed.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new qe(st.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{R0(n)}}function ZC(e){e=ln(e);const{fs:t,path:n}=Mn(e,this);try{if(ma&&!ir(this,t.statSync(n),Wr))throw qe.With("EACCES",n,"unlink");t.unlinkSync(n),La(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function Ed(e,t){var n;e=ln(e);const r=fc(t.mode,420),a=Il(t.flag);e=t.preserveSymlinks?e:hc.call(this,e);const{fs:i,path:o}=Mn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&gw))throw qe.With("ENOENT",e,"_open");const c=i.statSync(Xn(o));if(!ir(this,c,Wr))throw qe.With("EACCES",Xn(e),"_open");if(!Zo(c))throw qe.With("ENOTDIR",Xn(e),"_open");if(!t.allowDirectory&&r&ia)throw qe.With("EISDIR",e,"_open");if(!ir(this,c,Wr))throw qe.With("EACCES",Xn(o),"_open");const{euid:f,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ts.credentials,p=i.createFileSync(o,{mode:r,uid:c.mode&k0?c.uid:f,gid:c.mode&A0?c.gid:h});return new zb(this,e,i,o,a,p)}if(!ir(this,s,r)||!ir(this,s,Sj(a)))throw qe.With("EACCES",e,"_open");if(a&yw)throw qe.With("EEXIST",e,"_open");const u=new zb(this,e,i,o,a,s);if(a&bw&&u.truncate(0),!t.allowDirectory&&s.mode&ia)throw qe.With("EISDIR",e,"_open");return u}function _w(e,t,n=BC){return Ub(Ed.call(this,e,{flag:t,mode:n}))}function xw(e,t,n){return Ub(Ed.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function Tj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=T0(r,typeof e=="number"?ei(this,e):Ed.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{R0(r)}}function YC(e,t={}){const n=Nl(t,null,"r",420);if(Il(n.flag)&Wa)throw new qe(st.EINVAL,"Flag passed to readFile must allow for reading");const a=Rr.from(Tj.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function XC(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Nl(n,"utf8","w+",420),i=Il(a.flag);if(!(i&Wa||i&Rl))throw new qe(st.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new qe(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new qe(st.EINVAL,"Data not specified");T0(r,typeof e=="number"?ei(this,e):Ed.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),La(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{R0(r)}}function rX(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Nl(n,"utf8","a+",420),i=Il(a.flag);if(!(i&ld))throw new qe(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new qe(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);T0(r,Ed.call(this,typeof e=="number"?ei(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{R0(r)}}function aX(e,t){const n=ei(this,e).stat();return t!=null&&t.bigint?new Sd(n):new Gl(n)}function Cd(e){ei(this,e).close(),xj(this,e)}function iX(e,t=0){if(t||(t=0),t<0)throw new qe(st.EINVAL);ei(this,e).truncate(t)}function oX(e){ei(this,e).sync()}function sX(e){ei(this,e).datasync()}function lX(e,t,n,r,a){let i,o,s,u;if(typeof t=="string"){u=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Rr.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,u=typeof a=="number"?a:null;const c=ei(this,e);u??(u=c.position);const f=c.write(i,o,s,u);return La(this,"change",c.path),f}function uX(e,t,n,r,a){const i=ei(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function JC(e,t,n){ei(this,e).chown(t,n)}function QC(e,t){const n=fc(t,-1);if(n<0)throw new qe(st.EINVAL,"Invalid mode.");ei(this,e).chmod(n)}function ek(e,t,n){ei(this,e).utimes(Bb(t),Bb(n))}function Rj(e){e=ln(e);const{fs:t,path:n}=Mn(hc.call(this,e),this);try{const r=t.statSync(n);if(!Zo(r))throw qe.With("ENOTDIR",n,"rmdir");if(ma&&!ir(this,r,Wr))throw qe.With("EACCES",n,"rmdir");t.rmdirSync(n),La(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}function tk(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ts.credentials;t=typeof t=="object"?t:{mode:t};const o=fc(t==null?void 0:t.mode,511);e=hc.call(this,e);const{fs:s,path:u,root:c}=Mn(e,this),f={[u]:e},h=(p,g)=>{if(!ir(this,g,Wr))throw qe.With("EACCES",Xn(p),"mkdir");const v=s.mkdirSync(p,{mode:o,uid:g.mode&k0?g.uid:a,gid:g.mode&A0?g.gid:i});return La(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){h(u,s.statSync(Xn(u)));return}const p=[];for(let v=u,b=e;!s.existsSync(v);v=Xn(v),b=Xn(b))p.unshift(v),f[v]=b;if(!p.length)return;const g=[s.statSync(Xn(p[0]))];for(const[v,b]of p.entries())g.push(h(b,g[v]));return c.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(c.length)}catch(p){throw or(p,f)}}function Ch(e,t){t=typeof t=="object"?t:{encoding:t},e=ln(e);const{fs:n,path:r}=Mn(hc.call(this,e),this);let a;try{const o=n.statSync(r);if(ma&&!ir(this,o,pa))throw qe.With("EACCES",r,"readdir");if(!Zo(o))throw qe.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw or(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(tr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new Fm(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Rr.from(o)):i.push(o),!(!Zo(s)||!(t!=null&&t.recursive)))for(const u of Ch.call(this,tr(e,o),t))u instanceof Fm?(u.path=tr(o,u.path),i.push(u)):Rr.isBuffer(u)?i.push(Rr.from(tr(o,DC(u)))):i.push(tr(o,u))}return i}function cX(e,t){if(e=ln(e),!Zu(Xn(e)).hasAccess(pa,this))throw qe.With("EACCES",Xn(e),"link");if(t=ln(t),!Zu(Xn(t)).hasAccess(Wr,this))throw qe.With("EACCES",Xn(t),"link");const{fs:n,path:r}=Mn(e,this),a=Mn(t,this);if(n!=a.fs)throw qe.With("EXDEV",t,"link");try{if(ma&&!ir(this,n.statSync(r),pa))throw qe.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw or(i,{[r]:e,[a.path]:t})}}function dX(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new qe(st.EINVAL,"Invalid type: "+n);t=ln(t);const a=T0(r,Ed.call(this,t,{flag:"wx",mode:420}),!1);a.write(Qc(ln(e,!0))),a.chmod(Vl)}catch(a){r.error=a,r.hasError=!0}finally{R0(r)}}function nE(e,t){const n=Rr.from(Tj.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function fX(e,t,n){const r=_w.call(this,e,"r+");JC.call(this,r,t,n),Cd.call(this,r)}function hX(e,t,n){const r=xw.call(this,e,"r+");JC.call(this,r,t,n),Cd.call(this,r)}function pX(e,t){const n=_w.call(this,e,"r+");QC.call(this,n,t),Cd.call(this,n)}function mX(e,t){const n=xw.call(this,e,"r+");QC.call(this,n,t),Cd.call(this,n)}function Nj(e,t,n){const r=_w.call(this,e,"r+");ek.call(this,r,t,n),Cd.call(this,r)}function gX(e,t,n){const r=xw.call(this,e,"r+");ek.call(this,r,t,n),Cd.call(this,r)}function rE(e,t,n){try{const u=Mn(t,e),c=u.fs.statSync(u.path);if(!eh(c))return{...u,fullPath:t,stats:c};const f=Fl.call(e,Xn(t),nE.call(e,t).toString());return rE(e,f)}catch{}const{base:r,dir:a}=Es(t),i=a=="/"?"/":hc.call(e,a),o=tr(i,r),s=Mn(o,e);try{const u=s.fs.statSync(s.path);if(!eh(u))return{...s,fullPath:o,stats:u};const c=Fl.call(e,i,nE.call(e,o).toString());return rE(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}function hc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=rE(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Rr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function yX(e,t=384){if(!ir(this,Zu.call(this,e),t))throw new qe(st.EACCES)}function Ij(e,t){e=ln(e);let n;try{n=KC.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&br){case ia:if(t!=null&&t.recursive)for(const r of Ch.call(this,e))Ij.call(this,tr(e,r),t);Rj.call(this,e);break;case qo:case Vl:case wd:case _d:ZC.call(this,e);break;case xd:case vd:default:throw new qe(st.EPERM,"File type not supported",e,"rm")}}function bX(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return tk.call(this,a),n=="buffer"?Rr.from(a):a}function Oj(e,t,n){if(e=ln(e),t=ln(t),n&&n&zC&&WC(t))throw new qe(st.EEXIST,"Destination file already exists",t,"copyFile");XC.call(this,t,YC(e)),La(this,"rename",t.toString())}function vX(e,t,n){const r=ei(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function wX(e,t,n){const r=ei(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function _X(e,t){return e=ln(e),new nk(e,this)}function Dj(e,t,n){e=ln(e),t=ln(t);const r=KC.call(this,e);if(n!=null&&n.errorOnExist&&WC.call(this,t))throw new qe(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&br){case ia:if(!(n!=null&&n.recursive))throw new qe(st.EISDIR,e+" is a directory (not copied)",e,"cp");tk.call(this,t,{recursive:!0});for(const a of Ch.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(tr(e,a.name),tr(t,a.name))||Dj.call(this,tr(e,a.name),tr(t,a.name),n);break;case qo:case Vl:Oj.call(this,e,t);break;case wd:case _d:case xd:case vd:default:throw new qe(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&Nj.call(this,t,r.atime,r.mtime)}function xX(e,t){e=ln(e);const{fs:n}=Mn(e,this);return Cj(n,t==null?void 0:t.bigint)}function SX(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(u=>(u=u.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${u}$`))),o=[];function s(u){const c=Ch(u,{withFileTypes:r,encoding:"utf8"});for(const f of c){const h=r?f.path:u+"/"+f;a(r?f:h)||(Zu(h).isDirectory()&&i.some(p=>p.source.includes(".*"))&&s(h),i.some(p=>p.test(h.replace(/^\/+/g,"")))&&o.push(r?f.path:h.replace(/^\/+/g,"")))}}return s(n),o}class Fm{get name(){return Qf(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return RY(this.stats)}isDirectory(){return Zo(this.stats)}isBlockDevice(){return jm(this.stats)}isCharacterDevice(){return Mm(this.stats)}isSymbolicLink(){return eh(this.stats)}isFIFO(){return IY(this.stats)}isSocket(){return NY(this.stats)}}class nk{checkClosed(){if(this.closed)throw new qe(st.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await gc.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Ch.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var Bx={exports:{}},zx={exports:{}},Ux={},VN;function pc(){return VN||(VN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=f,n.toByteArray=p,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function c(x){var E=x.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=x.indexOf("=");C===-1&&(C=E);var A=C===E?0:4-C%4;return[C,A]}function f(x){var E=c(x),C=E[0],A=E[1];return(C+A)*3/4-A}function h(x,E,C){return(E+C)*3/4-C}function p(x){var E,C=c(x),A=C[0],O=C[1],I=new i(h(x,A,O)),D=0,z=O>0?A-4:A,W;for(W=0;W<z;W+=4)E=a[x.charCodeAt(W)]<<18|a[x.charCodeAt(W+1)]<<12|a[x.charCodeAt(W+2)]<<6|a[x.charCodeAt(W+3)],I[D++]=E>>16&255,I[D++]=E>>8&255,I[D++]=E&255;return O===2&&(E=a[x.charCodeAt(W)]<<2|a[x.charCodeAt(W+1)]>>4,I[D++]=E&255),O===1&&(E=a[x.charCodeAt(W)]<<10|a[x.charCodeAt(W+1)]<<4|a[x.charCodeAt(W+2)]>>2,I[D++]=E>>8&255,I[D++]=E&255),I}function g(x){return r[x>>18&63]+r[x>>12&63]+r[x>>6&63]+r[x&63]}function v(x,E,C){for(var A,O=[],I=E;I<C;I+=3)A=(x[I]<<16&16711680)+(x[I+1]<<8&65280)+(x[I+2]&255),O.push(g(A));return O.join("")}function b(x){for(var E,C=x.length,A=C%3,O=[],I=16383,D=0,z=C-A;D<z;D+=I)O.push(v(x,D,D+I>z?z:D+I));return A===1?(E=x[C-1],O.push(r[E>>2]+r[E<<4&63]+"==")):A===2&&(E=(x[C-2]<<8)+x[C-1],O.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),O.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(x,E,C,A,O){var I,D,z=O*8-A-1,W=(1<<z)-1,ee=W>>1,F=-7,Z=C?O-1:0,V=C?-1:1,ae=x[E+Z];for(Z+=V,I=ae&(1<<-F)-1,ae>>=-F,F+=z;F>0;I=I*256+x[E+Z],Z+=V,F-=8);for(D=I&(1<<-F)-1,I>>=-F,F+=A;F>0;D=D*256+x[E+Z],Z+=V,F-=8);if(I===0)I=1-ee;else{if(I===W)return D?NaN:(ae?-1:1)*(1/0);D=D+Math.pow(2,A),I=I-ee}return(ae?-1:1)*D*Math.pow(2,I-A)},_.write=function(x,E,C,A,O,I){var D,z,W,ee=I*8-O-1,F=(1<<ee)-1,Z=F>>1,V=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,ae=A?0:I-1,ie=A?1:-1,te=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(z=isNaN(E)?1:0,D=F):(D=Math.floor(Math.log(E)/Math.LN2),E*(W=Math.pow(2,-D))<1&&(D--,W*=2),D+Z>=1?E+=V/W:E+=V*Math.pow(2,1-Z),E*W>=2&&(D++,W/=2),D+Z>=F?(z=0,D=F):D+Z>=1?(z=(E*W-1)*Math.pow(2,O),D=D+Z):(z=E*Math.pow(2,Z-1)*Math.pow(2,O),D=0));O>=8;x[C+ae]=z&255,ae+=ie,z/=256,O-=8);for(D=D<<O|z,ee+=O;ee>0;x[C+ae]=D&255,ae+=ie,D/=256,ee-=8);x[C+ae-ie]|=te*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(x){const E=n,C=_,A=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;x.Buffer=F,x.SlowBuffer=re,x.INSPECT_MAX_BYTES=50;const O=2147483647;x.kMaxLength=O;const{Uint8Array:I,ArrayBuffer:D,SharedArrayBuffer:z}=globalThis;F.TYPED_ARRAY_SUPPORT=W(),!F.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function W(){try{const U=new I(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,I.prototype),Object.setPrototypeOf(U,$),U.foo()===42}catch{return!1}}Object.defineProperty(F.prototype,"parent",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.buffer}}),Object.defineProperty(F.prototype,"offset",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.byteOffset}});function ee(U){if(U>O)throw new RangeError('The value "'+U+'" is invalid for option "size"');const $=new I(U);return Object.setPrototypeOf($,F.prototype),$}function F(U,$,H){if(typeof U=="number"){if(typeof $=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ie(U)}return Z(U,$,H)}F.poolSize=8192;function Z(U,$,H){if(typeof U=="string")return te(U,$);if(D.isView(U))return ce(U);if(U==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U);if(me(U,D)||U&&me(U.buffer,D)||typeof z<"u"&&(me(U,z)||U&&me(U.buffer,z)))return G(U,$,H);if(typeof U=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=U.valueOf&&U.valueOf();if(pe!=null&&pe!==U)return F.from(pe,$,H);const fe=Q(U);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof U[Symbol.toPrimitive]=="function")return F.from(U[Symbol.toPrimitive]("string"),$,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof U)}F.from=function(U,$,H){return Z(U,$,H)},Object.setPrototypeOf(F.prototype,I.prototype),Object.setPrototypeOf(F,I);function V(U){if(typeof U!="number")throw new TypeError('"size" argument must be of type number');if(U<0)throw new RangeError('The value "'+U+'" is invalid for option "size"')}function ae(U,$,H){return V(U),U<=0?ee(U):$!==void 0?typeof H=="string"?ee(U).fill($,H):ee(U).fill($):ee(U)}F.alloc=function(U,$,H){return ae(U,$,H)};function ie(U){return V(U),ee(U<0?0:Y(U)|0)}F.allocUnsafe=function(U){return ie(U)},F.allocUnsafeSlow=function(U){return ie(U)};function te(U,$){if((typeof $!="string"||$==="")&&($="utf8"),!F.isEncoding($))throw new TypeError("Unknown encoding: "+$);const H=be(U,$)|0;let pe=ee(H);const fe=pe.write(U,$);return fe!==H&&(pe=pe.slice(0,fe)),pe}function X(U){const $=U.length<0?0:Y(U.length)|0,H=ee($);for(let pe=0;pe<$;pe+=1)H[pe]=U[pe]&255;return H}function ce(U){if(me(U,I)){const $=new I(U);return G($.buffer,$.byteOffset,$.byteLength)}return X(U)}function G(U,$,H){if($<0||U.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(U.byteLength<$+(H||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return $===void 0&&H===void 0?pe=new I(U):H===void 0?pe=new I(U,$):pe=new I(U,$,H),Object.setPrototypeOf(pe,F.prototype),pe}function Q(U){if(F.isBuffer(U)){const $=Y(U.length)|0,H=ee($);return H.length===0||U.copy(H,0,0,$),H}if(U.length!==void 0)return typeof U.length!="number"||je(U.length)?ee(0):X(U);if(U.type==="Buffer"&&Array.isArray(U.data))return X(U.data)}function Y(U){if(U>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return U|0}function re(U){return+U!=U&&(U=0),F.alloc(+U)}F.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==F.prototype},F.compare=function($,H){if(me($,I)&&($=F.from($,$.offset,$.byteLength)),me(H,I)&&(H=F.from(H,H.offset,H.byteLength)),!F.isBuffer($)||!F.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===H)return 0;let pe=$.length,fe=H.length;for(let Fe=0,ot=Math.min(pe,fe);Fe<ot;++Fe)if($[Fe]!==H[Fe]){pe=$[Fe],fe=H[Fe];break}return pe<fe?-1:fe<pe?1:0},F.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},F.concat=function($,H){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return F.alloc(0);let pe;if(H===void 0)for(H=0,pe=0;pe<$.length;++pe)H+=$[pe].length;const fe=F.allocUnsafe(H);let Fe=0;for(pe=0;pe<$.length;++pe){let ot=$[pe];if(me(ot,I))Fe+ot.length>fe.length?(F.isBuffer(ot)||(ot=F.from(ot)),ot.copy(fe,Fe)):I.prototype.set.call(fe,ot,Fe);else if(F.isBuffer(ot))ot.copy(fe,Fe);else throw new TypeError('"list" argument must be an Array of Buffers');Fe+=ot.length}return fe};function be(U,$){if(F.isBuffer(U))return U.length;if(D.isView(U)||me(U,D))return U.byteLength;if(typeof U!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof U);const H=U.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&H===0)return 0;let fe=!1;for(;;)switch($){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return ct(U).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return Be(U).length;default:if(fe)return pe?-1:ct(U).length;$=(""+$).toLowerCase(),fe=!0}}F.byteLength=be;function _e(U,$,H){let pe=!1;if(($===void 0||$<0)&&($=0),$>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,$>>>=0,H<=$))return"";for(U||(U="utf8");;)switch(U){case"hex":return xe(this,$,H);case"utf8":case"utf-8":return Ce(this,$,H);case"ascii":return oe(this,$,H);case"latin1":case"binary":return J(this,$,H);case"base64":return B(this,$,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,$,H);default:if(pe)throw new TypeError("Unknown encoding: "+U);U=(U+"").toLowerCase(),pe=!0}}F.prototype._isBuffer=!0;function Ie(U,$,H){const pe=U[$];U[$]=U[H],U[H]=pe}F.prototype.swap16=function(){const $=this.length;if($%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let H=0;H<$;H+=2)Ie(this,H,H+1);return this},F.prototype.swap32=function(){const $=this.length;if($%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let H=0;H<$;H+=4)Ie(this,H,H+3),Ie(this,H+1,H+2);return this},F.prototype.swap64=function(){const $=this.length;if($%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let H=0;H<$;H+=8)Ie(this,H,H+7),Ie(this,H+1,H+6),Ie(this,H+2,H+5),Ie(this,H+3,H+4);return this},F.prototype.toString=function(){const $=this.length;return $===0?"":arguments.length===0?Ce(this,0,$):_e.apply(this,arguments)},F.prototype.toLocaleString=F.prototype.toString,F.prototype.equals=function($){if(!F.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$?!0:F.compare(this,$)===0},F.prototype.inspect=function(){let $="";const H=x.INSPECT_MAX_BYTES;return $=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&($+=" ... "),"<Buffer "+$+">"},A&&(F.prototype[A]=F.prototype.inspect),F.prototype.compare=function($,H,pe,fe,Fe){if(me($,I)&&($=F.from($,$.offset,$.byteLength)),!F.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(H===void 0&&(H=0),pe===void 0&&(pe=$?$.length:0),fe===void 0&&(fe=0),Fe===void 0&&(Fe=this.length),H<0||pe>$.length||fe<0||Fe>this.length)throw new RangeError("out of range index");if(fe>=Fe&&H>=pe)return 0;if(fe>=Fe)return-1;if(H>=pe)return 1;if(H>>>=0,pe>>>=0,fe>>>=0,Fe>>>=0,this===$)return 0;let ot=Fe-fe,jt=pe-H;const un=Math.min(ot,jt),Bt=this.slice(fe,Fe),Vt=$.slice(H,pe);for(let Xt=0;Xt<un;++Xt)if(Bt[Xt]!==Vt[Xt]){ot=Bt[Xt],jt=Vt[Xt];break}return ot<jt?-1:jt<ot?1:0};function Pe(U,$,H,pe,fe){if(U.length===0)return-1;if(typeof H=="string"?(pe=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,je(H)&&(H=fe?0:U.length-1),H<0&&(H=U.length+H),H>=U.length){if(fe)return-1;H=U.length-1}else if(H<0)if(fe)H=0;else return-1;if(typeof $=="string"&&($=F.from($,pe)),F.isBuffer($))return $.length===0?-1:Re(U,$,H,pe,fe);if(typeof $=="number")return $=$&255,typeof I.prototype.indexOf=="function"?fe?I.prototype.indexOf.call(U,$,H):I.prototype.lastIndexOf.call(U,$,H):Re(U,[$],H,pe,fe);throw new TypeError("val must be string, number or Buffer")}function Re(U,$,H,pe,fe){let Fe=1,ot=U.length,jt=$.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(U.length<2||$.length<2)return-1;Fe=2,ot/=2,jt/=2,H/=2}function un(Vt,Xt){return Fe===1?Vt[Xt]:Vt.readUInt16BE(Xt*Fe)}let Bt;if(fe){let Vt=-1;for(Bt=H;Bt<ot;Bt++)if(un(U,Bt)===un($,Vt===-1?0:Bt-Vt)){if(Vt===-1&&(Vt=Bt),Bt-Vt+1===jt)return Vt*Fe}else Vt!==-1&&(Bt-=Bt-Vt),Vt=-1}else for(H+jt>ot&&(H=ot-jt),Bt=H;Bt>=0;Bt--){let Vt=!0;for(let Xt=0;Xt<jt;Xt++)if(un(U,Bt+Xt)!==un($,Xt)){Vt=!1;break}if(Vt)return Bt}return-1}F.prototype.includes=function($,H,pe){return this.indexOf($,H,pe)!==-1},F.prototype.indexOf=function($,H,pe){return Pe(this,$,H,pe,!0)},F.prototype.lastIndexOf=function($,H,pe){return Pe(this,$,H,pe,!1)};function ke(U,$,H,pe){H=Number(H)||0;const fe=U.length-H;pe?(pe=Number(pe),pe>fe&&(pe=fe)):pe=fe;const Fe=$.length;pe>Fe/2&&(pe=Fe/2);let ot;for(ot=0;ot<pe;++ot){const jt=parseInt($.substr(ot*2,2),16);if(je(jt))return ot;U[H+ot]=jt}return ot}function ze(U,$,H,pe){return et(ct($,U.length-H),U,H,pe)}function it(U,$,H,pe){return et(yt($),U,H,pe)}function Oe(U,$,H,pe){return et(Be($),U,H,pe)}function Te(U,$,H,pe){return et(M($,U.length-H),U,H,pe)}F.prototype.write=function($,H,pe,fe){if(H===void 0)fe="utf8",pe=this.length,H=0;else if(pe===void 0&&typeof H=="string")fe=H,pe=this.length,H=0;else if(isFinite(H))H=H>>>0,isFinite(pe)?(pe=pe>>>0,fe===void 0&&(fe="utf8")):(fe=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Fe=this.length-H;if((pe===void 0||pe>Fe)&&(pe=Fe),$.length>0&&(pe<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");let ot=!1;for(;;)switch(fe){case"hex":return ke(this,$,H,pe);case"utf8":case"utf-8":return ze(this,$,H,pe);case"ascii":case"latin1":case"binary":return it(this,$,H,pe);case"base64":return Oe(this,$,H,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,$,H,pe);default:if(ot)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),ot=!0}},F.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(U,$,H){return $===0&&H===U.length?E.fromByteArray(U):E.fromByteArray(U.slice($,H))}function Ce(U,$,H){H=Math.min(U.length,H);const pe=[];let fe=$;for(;fe<H;){const Fe=U[fe];let ot=null,jt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(fe+jt<=H){let un,Bt,Vt,Xt;switch(jt){case 1:Fe<128&&(ot=Fe);break;case 2:un=U[fe+1],(un&192)===128&&(Xt=(Fe&31)<<6|un&63,Xt>127&&(ot=Xt));break;case 3:un=U[fe+1],Bt=U[fe+2],(un&192)===128&&(Bt&192)===128&&(Xt=(Fe&15)<<12|(un&63)<<6|Bt&63,Xt>2047&&(Xt<55296||Xt>57343)&&(ot=Xt));break;case 4:un=U[fe+1],Bt=U[fe+2],Vt=U[fe+3],(un&192)===128&&(Bt&192)===128&&(Vt&192)===128&&(Xt=(Fe&15)<<18|(un&63)<<12|(Bt&63)<<6|Vt&63,Xt>65535&&Xt<1114112&&(ot=Xt))}}ot===null?(ot=65533,jt=1):ot>65535&&(ot-=65536,pe.push(ot>>>10&1023|55296),ot=56320|ot&1023),pe.push(ot),fe+=jt}return de(pe)}const Ne=4096;function de(U){const $=U.length;if($<=Ne)return String.fromCharCode.apply(String,U);let H="",pe=0;for(;pe<$;)H+=String.fromCharCode.apply(String,U.slice(pe,pe+=Ne));return H}function oe(U,$,H){let pe="";H=Math.min(U.length,H);for(let fe=$;fe<H;++fe)pe+=String.fromCharCode(U[fe]&127);return pe}function J(U,$,H){let pe="";H=Math.min(U.length,H);for(let fe=$;fe<H;++fe)pe+=String.fromCharCode(U[fe]);return pe}function xe(U,$,H){const pe=U.length;(!$||$<0)&&($=0),(!H||H<0||H>pe)&&(H=pe);let fe="";for(let Fe=$;Fe<H;++Fe)fe+=Ke[U[Fe]];return fe}function Le(U,$,H){const pe=U.slice($,H);let fe="";for(let Fe=0;Fe<pe.length-1;Fe+=2)fe+=String.fromCharCode(pe[Fe]+pe[Fe+1]*256);return fe}F.prototype.slice=function($,H){const pe=this.length;$=~~$,H=H===void 0?pe:~~H,$<0?($+=pe,$<0&&($=0)):$>pe&&($=pe),H<0?(H+=pe,H<0&&(H=0)):H>pe&&(H=pe),H<$&&(H=$);const fe=this.subarray($,H);return Object.setPrototypeOf(fe,F.prototype),fe};function Se(U,$,H){if(U%1!==0||U<0)throw new RangeError("offset is not uint");if(U+$>H)throw new RangeError("Trying to access beyond buffer length")}F.prototype.readUintLE=F.prototype.readUIntLE=function($,H,pe){$=$>>>0,H=H>>>0,pe||Se($,H,this.length);let fe=this[$],Fe=1,ot=0;for(;++ot<H&&(Fe*=256);)fe+=this[$+ot]*Fe;return fe},F.prototype.readUintBE=F.prototype.readUIntBE=function($,H,pe){$=$>>>0,H=H>>>0,pe||Se($,H,this.length);let fe=this[$+--H],Fe=1;for(;H>0&&(Fe*=256);)fe+=this[$+--H]*Fe;return fe},F.prototype.readUint8=F.prototype.readUInt8=function($,H){return $=$>>>0,H||Se($,1,this.length),this[$]},F.prototype.readUint16LE=F.prototype.readUInt16LE=function($,H){return $=$>>>0,H||Se($,2,this.length),this[$]|this[$+1]<<8},F.prototype.readUint16BE=F.prototype.readUInt16BE=function($,H){return $=$>>>0,H||Se($,2,this.length),this[$]<<8|this[$+1]},F.prototype.readUint32LE=F.prototype.readUInt32LE=function($,H){return $=$>>>0,H||Se($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+this[$+3]*16777216},F.prototype.readUint32BE=F.prototype.readUInt32BE=function($,H){return $=$>>>0,H||Se($,4,this.length),this[$]*16777216+(this[$+1]<<16|this[$+2]<<8|this[$+3])},F.prototype.readBigUInt64LE=Ct(function($){$=$>>>0,De($,"offset");const H=this[$],pe=this[$+7];(H===void 0||pe===void 0)&&ve($,this.length-8);const fe=H+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24,Fe=this[++$]+this[++$]*2**8+this[++$]*2**16+pe*2**24;return BigInt(fe)+(BigInt(Fe)<<BigInt(32))}),F.prototype.readBigUInt64BE=Ct(function($){$=$>>>0,De($,"offset");const H=this[$],pe=this[$+7];(H===void 0||pe===void 0)&&ve($,this.length-8);const fe=H*2**24+this[++$]*2**16+this[++$]*2**8+this[++$],Fe=this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+pe;return(BigInt(fe)<<BigInt(32))+BigInt(Fe)}),F.prototype.readIntLE=function($,H,pe){$=$>>>0,H=H>>>0,pe||Se($,H,this.length);let fe=this[$],Fe=1,ot=0;for(;++ot<H&&(Fe*=256);)fe+=this[$+ot]*Fe;return Fe*=128,fe>=Fe&&(fe-=Math.pow(2,8*H)),fe},F.prototype.readIntBE=function($,H,pe){$=$>>>0,H=H>>>0,pe||Se($,H,this.length);let fe=H,Fe=1,ot=this[$+--fe];for(;fe>0&&(Fe*=256);)ot+=this[$+--fe]*Fe;return Fe*=128,ot>=Fe&&(ot-=Math.pow(2,8*H)),ot},F.prototype.readInt8=function($,H){return $=$>>>0,H||Se($,1,this.length),this[$]&128?(255-this[$]+1)*-1:this[$]},F.prototype.readInt16LE=function($,H){$=$>>>0,H||Se($,2,this.length);const pe=this[$]|this[$+1]<<8;return pe&32768?pe|4294901760:pe},F.prototype.readInt16BE=function($,H){$=$>>>0,H||Se($,2,this.length);const pe=this[$+1]|this[$]<<8;return pe&32768?pe|4294901760:pe},F.prototype.readInt32LE=function($,H){return $=$>>>0,H||Se($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},F.prototype.readInt32BE=function($,H){return $=$>>>0,H||Se($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},F.prototype.readBigInt64LE=Ct(function($){$=$>>>0,De($,"offset");const H=this[$],pe=this[$+7];(H===void 0||pe===void 0)&&ve($,this.length-8);const fe=this[$+4]+this[$+5]*2**8+this[$+6]*2**16+(pe<<24);return(BigInt(fe)<<BigInt(32))+BigInt(H+this[++$]*2**8+this[++$]*2**16+this[++$]*2**24)}),F.prototype.readBigInt64BE=Ct(function($){$=$>>>0,De($,"offset");const H=this[$],pe=this[$+7];(H===void 0||pe===void 0)&&ve($,this.length-8);const fe=(H<<24)+this[++$]*2**16+this[++$]*2**8+this[++$];return(BigInt(fe)<<BigInt(32))+BigInt(this[++$]*2**24+this[++$]*2**16+this[++$]*2**8+pe)}),F.prototype.readFloatLE=function($,H){return $=$>>>0,H||Se($,4,this.length),C.read(this,$,!0,23,4)},F.prototype.readFloatBE=function($,H){return $=$>>>0,H||Se($,4,this.length),C.read(this,$,!1,23,4)},F.prototype.readDoubleLE=function($,H){return $=$>>>0,H||Se($,8,this.length),C.read(this,$,!0,52,8)},F.prototype.readDoubleBE=function($,H){return $=$>>>0,H||Se($,8,this.length),C.read(this,$,!1,52,8)};function Ve(U,$,H,pe,fe,Fe){if(!F.isBuffer(U))throw new TypeError('"buffer" argument must be a Buffer instance');if($>fe||$<Fe)throw new RangeError('"value" argument is out of bounds');if(H+pe>U.length)throw new RangeError("Index out of range")}F.prototype.writeUintLE=F.prototype.writeUIntLE=function($,H,pe,fe){if($=+$,H=H>>>0,pe=pe>>>0,!fe){const jt=Math.pow(2,8*pe)-1;Ve(this,$,H,pe,jt,0)}let Fe=1,ot=0;for(this[H]=$&255;++ot<pe&&(Fe*=256);)this[H+ot]=$/Fe&255;return H+pe},F.prototype.writeUintBE=F.prototype.writeUIntBE=function($,H,pe,fe){if($=+$,H=H>>>0,pe=pe>>>0,!fe){const jt=Math.pow(2,8*pe)-1;Ve(this,$,H,pe,jt,0)}let Fe=pe-1,ot=1;for(this[H+Fe]=$&255;--Fe>=0&&(ot*=256);)this[H+Fe]=$/ot&255;return H+pe},F.prototype.writeUint8=F.prototype.writeUInt8=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,1,255,0),this[H]=$&255,H+1},F.prototype.writeUint16LE=F.prototype.writeUInt16LE=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,2,65535,0),this[H]=$&255,this[H+1]=$>>>8,H+2},F.prototype.writeUint16BE=F.prototype.writeUInt16BE=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,2,65535,0),this[H]=$>>>8,this[H+1]=$&255,H+2},F.prototype.writeUint32LE=F.prototype.writeUInt32LE=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,4,4294967295,0),this[H+3]=$>>>24,this[H+2]=$>>>16,this[H+1]=$>>>8,this[H]=$&255,H+4},F.prototype.writeUint32BE=F.prototype.writeUInt32BE=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,4,4294967295,0),this[H]=$>>>24,this[H+1]=$>>>16,this[H+2]=$>>>8,this[H+3]=$&255,H+4};function xt(U,$,H,pe,fe){he($,pe,fe,U,H,7);let Fe=Number($&BigInt(4294967295));U[H++]=Fe,Fe=Fe>>8,U[H++]=Fe,Fe=Fe>>8,U[H++]=Fe,Fe=Fe>>8,U[H++]=Fe;let ot=Number($>>BigInt(32)&BigInt(4294967295));return U[H++]=ot,ot=ot>>8,U[H++]=ot,ot=ot>>8,U[H++]=ot,ot=ot>>8,U[H++]=ot,H}function ht(U,$,H,pe,fe){he($,pe,fe,U,H,7);let Fe=Number($&BigInt(4294967295));U[H+7]=Fe,Fe=Fe>>8,U[H+6]=Fe,Fe=Fe>>8,U[H+5]=Fe,Fe=Fe>>8,U[H+4]=Fe;let ot=Number($>>BigInt(32)&BigInt(4294967295));return U[H+3]=ot,ot=ot>>8,U[H+2]=ot,ot=ot>>8,U[H+1]=ot,ot=ot>>8,U[H]=ot,H+8}F.prototype.writeBigUInt64LE=Ct(function($,H=0){return xt(this,$,H,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeBigUInt64BE=Ct(function($,H=0){return ht(this,$,H,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeIntLE=function($,H,pe,fe){if($=+$,H=H>>>0,!fe){const un=Math.pow(2,8*pe-1);Ve(this,$,H,pe,un-1,-un)}let Fe=0,ot=1,jt=0;for(this[H]=$&255;++Fe<pe&&(ot*=256);)$<0&&jt===0&&this[H+Fe-1]!==0&&(jt=1),this[H+Fe]=($/ot>>0)-jt&255;return H+pe},F.prototype.writeIntBE=function($,H,pe,fe){if($=+$,H=H>>>0,!fe){const un=Math.pow(2,8*pe-1);Ve(this,$,H,pe,un-1,-un)}let Fe=pe-1,ot=1,jt=0;for(this[H+Fe]=$&255;--Fe>=0&&(ot*=256);)$<0&&jt===0&&this[H+Fe+1]!==0&&(jt=1),this[H+Fe]=($/ot>>0)-jt&255;return H+pe},F.prototype.writeInt8=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,1,127,-128),$<0&&($=255+$+1),this[H]=$&255,H+1},F.prototype.writeInt16LE=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,2,32767,-32768),this[H]=$&255,this[H+1]=$>>>8,H+2},F.prototype.writeInt16BE=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,2,32767,-32768),this[H]=$>>>8,this[H+1]=$&255,H+2},F.prototype.writeInt32LE=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,4,2147483647,-2147483648),this[H]=$&255,this[H+1]=$>>>8,this[H+2]=$>>>16,this[H+3]=$>>>24,H+4},F.prototype.writeInt32BE=function($,H,pe){return $=+$,H=H>>>0,pe||Ve(this,$,H,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[H]=$>>>24,this[H+1]=$>>>16,this[H+2]=$>>>8,this[H+3]=$&255,H+4},F.prototype.writeBigInt64LE=Ct(function($,H=0){return xt(this,$,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),F.prototype.writeBigInt64BE=Ct(function($,H=0){return ht(this,$,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(U,$,H,pe,fe,Fe){if(H+pe>U.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function Lt(U,$,H,pe,fe){return $=+$,H=H>>>0,fe||Et(U,$,H,4),C.write(U,$,H,pe,23,4),H+4}F.prototype.writeFloatLE=function($,H,pe){return Lt(this,$,H,!0,pe)},F.prototype.writeFloatBE=function($,H,pe){return Lt(this,$,H,!1,pe)};function Tt(U,$,H,pe,fe){return $=+$,H=H>>>0,fe||Et(U,$,H,8),C.write(U,$,H,pe,52,8),H+8}F.prototype.writeDoubleLE=function($,H,pe){return Tt(this,$,H,!0,pe)},F.prototype.writeDoubleBE=function($,H,pe){return Tt(this,$,H,!1,pe)},F.prototype.copy=function($,H,pe,fe){if(!F.isBuffer($))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!fe&&fe!==0&&(fe=this.length),H>=$.length&&(H=$.length),H||(H=0),fe>0&&fe<pe&&(fe=pe),fe===pe||$.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),$.length-H<fe-pe&&(fe=$.length-H+pe);const Fe=fe-pe;return this===$&&typeof I.prototype.copyWithin=="function"?this.copyWithin(H,pe,fe):I.prototype.set.call($,this.subarray(pe,fe),H),Fe},F.prototype.fill=function($,H,pe,fe){if(typeof $=="string"){if(typeof H=="string"?(fe=H,H=0,pe=this.length):typeof pe=="string"&&(fe=pe,pe=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!F.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if($.length===1){const ot=$.charCodeAt(0);(fe==="utf8"&&ot<128||fe==="latin1")&&($=ot)}}else typeof $=="number"?$=$&255:typeof $=="boolean"&&($=Number($));if(H<0||this.length<H||this.length<pe)throw new RangeError("Out of range index");if(pe<=H)return this;H=H>>>0,pe=pe===void 0?this.length:pe>>>0,$||($=0);let Fe;if(typeof $=="number")for(Fe=H;Fe<pe;++Fe)this[Fe]=$;else{const ot=F.isBuffer($)?$:F.from($,fe),jt=ot.length;if(jt===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(Fe=0;Fe<pe-H;++Fe)this[Fe+H]=ot[Fe%jt]}return this};const Ut={};function ge(U,$,H){Ut[U]=class extends H{constructor(){super(),Object.defineProperty(this,"message",{value:$.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${U}]`,this.stack,delete this.name}get code(){return U}set code(fe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:fe,writable:!0})}toString(){return`${this.name} [${U}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(U){return U?`${U} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(U,$){return`The "${U}" argument must be of type number. Received type ${typeof $}`},TypeError),ge("ERR_OUT_OF_RANGE",function(U,$,H){let pe=`The value of "${U}" is out of range.`,fe=H;return Number.isInteger(H)&&Math.abs(H)>2**32?fe=N(String(H)):typeof H=="bigint"&&(fe=String(H),(H>BigInt(2)**BigInt(32)||H<-(BigInt(2)**BigInt(32)))&&(fe=N(fe)),fe+="n"),pe+=` It must be ${$}. Received ${fe}`,pe},RangeError);function N(U){let $="",H=U.length;const pe=U[0]==="-"?1:0;for(;H>=pe+4;H-=3)$=`_${U.slice(H-3,H)}${$}`;return`${U.slice(0,H)}${$}`}function q(U,$,H){De($,"offset"),(U[$]===void 0||U[$+H]===void 0)&&ve($,U.length-(H+1))}function he(U,$,H,pe,fe,Fe){if(U>H||U<$){const ot=typeof $=="bigint"?"n":"";let jt;throw $===0||$===BigInt(0)?jt=`>= 0${ot} and < 2${ot} ** ${(Fe+1)*8}${ot}`:jt=`>= -(2${ot} ** ${(Fe+1)*8-1}${ot}) and < 2 ** ${(Fe+1)*8-1}${ot}`,new Ut.ERR_OUT_OF_RANGE("value",jt,U)}q(pe,fe,Fe)}function De(U,$){if(typeof U!="number")throw new Ut.ERR_INVALID_ARG_TYPE($,"number",U)}function ve(U,$,H){throw Math.floor(U)!==U?(De(U,H),new Ut.ERR_OUT_OF_RANGE("offset","an integer",U)):$<0?new Ut.ERR_BUFFER_OUT_OF_BOUNDS:new Ut.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${$}`,U)}const Ae=/[^+/0-9A-Za-z-_]/g;function le(U){if(U=U.split("=")[0],U=U.trim().replace(Ae,""),U.length<2)return"";for(;U.length%4!==0;)U=U+"=";return U}function ct(U,$){$=$||1/0;let H;const pe=U.length;let fe=null;const Fe=[];for(let ot=0;ot<pe;++ot){if(H=U.charCodeAt(ot),H>55295&&H<57344){if(!fe){if(H>56319){($-=3)>-1&&Fe.push(239,191,189);continue}else if(ot+1===pe){($-=3)>-1&&Fe.push(239,191,189);continue}fe=H;continue}if(H<56320){($-=3)>-1&&Fe.push(239,191,189),fe=H;continue}H=(fe-55296<<10|H-56320)+65536}else fe&&($-=3)>-1&&Fe.push(239,191,189);if(fe=null,H<128){if(($-=1)<0)break;Fe.push(H)}else if(H<2048){if(($-=2)<0)break;Fe.push(H>>6|192,H&63|128)}else if(H<65536){if(($-=3)<0)break;Fe.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if(($-=4)<0)break;Fe.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return Fe}function yt(U){const $=[];for(let H=0;H<U.length;++H)$.push(U.charCodeAt(H)&255);return $}function M(U,$){let H,pe,fe;const Fe=[];for(let ot=0;ot<U.length&&!(($-=2)<0);++ot)H=U.charCodeAt(ot),pe=H>>8,fe=H%256,Fe.push(fe),Fe.push(pe);return Fe}function Be(U){return E.toByteArray(le(U))}function et(U,$,H,pe){let fe;for(fe=0;fe<pe&&!(fe+H>=$.length||fe>=U.length);++fe)$[fe+H]=U[fe];return fe}function me(U,$){return U instanceof $||U!=null&&U.constructor!=null&&U.constructor.name!=null&&U.constructor.name===$.name}function je(U){return U!==U}const Ke=function(){const U="0123456789abcdef",$=new Array(256);for(let H=0;H<16;++H){const pe=H*16;for(let fe=0;fe<16;++fe)$[pe+fe]=U[H]+U[fe]}return $}();function Ct(U){return typeof BigInt>"u"?ye:U}function ye(){throw new Error("BigInt not supported")}})(t);const S=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=S,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(Ux)),Ux}var qx,GN;function Ur(){if(GN)return qx;GN=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return qx={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},qx}var Hx={exports:{}},Vx,WN;function jj(){return WN||(WN=1,Vx={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),Vx}var Gx,KN;function fi(){if(KN)return Gx;KN=1;const{format:e,inspect:t}=jj(),{AggregateError:n}=Ur(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function c(_,S){if(!_)throw new u.ERR_INTERNAL_ASSERTION(S)}function f(_){let S="",x=_.length;const E=_[0]==="-"?1:0;for(;x>=E+4;x-=3)S=`_${_.slice(x-3,x)}${S}`;return`${_.slice(0,x)}${S}`}function h(_,S,x){if(typeof S=="function")return c(S.length<=x.length,`Code: ${_}; The provided arguments length (${x.length}) does not match the required ones (${S.length}).`),S(...x);const E=(S.match(/%[dfijoOs]/g)||[]).length;return c(E===x.length,`Code: ${_}; The provided arguments length (${x.length}) does not match the required ones (${E}).`),x.length===0?S:e(S,...x)}function p(_,S,x){x||(x=Error);class E extends x{constructor(...A){super(h(_,S,A))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:x.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,u[_]=E}function g(_){const S=s+_.name;return Object.defineProperty(_,"name",{value:S}),_}function v(_,S){if(_&&S&&_!==S){if(Array.isArray(S.errors))return S.errors.push(_),S;const x=new r([S,_],S.message);return x.code=S.code,x}return _||S}class b extends Error{constructor(S="The operation was aborted",x=void 0){if(x!==void 0&&typeof x!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",x);super(S,x),this.code="ABORT_ERR",this.name="AbortError"}}return p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(_,S,x)=>{c(typeof _=="string","'name' must be a string"),Array.isArray(S)||(S=[S]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],A=[],O=[];for(const D of S)c(typeof D=="string","All expected entries have to be of type string"),i.includes(D)?C.push(D.toLowerCase()):o.test(D)?A.push(D):(c(D!=="object",'The value "object" should be written as "Object"'),O.push(D));if(A.length>0){const D=C.indexOf("object");D!==-1&&(C.splice(C,D,1),A.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const D=C.pop();E+=`one of type ${C.join(", ")}, or ${D}`}}(A.length>0||O.length>0)&&(E+=" or ")}if(A.length>0){switch(A.length){case 1:E+=`an instance of ${A[0]}`;break;case 2:E+=`an instance of ${A[0]} or ${A[1]}`;break;default:{const D=A.pop();E+=`an instance of ${A.join(", ")}, or ${D}`}}O.length>0&&(E+=" or ")}switch(O.length){case 0:break;case 1:O[0].toLowerCase()!==O[0]&&(E+="an "),E+=`${O[0]}`;break;case 2:E+=`one of ${O[0]} or ${O[1]}`;break;default:{const D=O.pop();E+=`one of ${O.join(", ")}, or ${D}`}}if(x==null)E+=`. Received ${x}`;else if(typeof x=="function"&&x.name)E+=`. Received function ${x.name}`;else if(typeof x=="object"){var I;if((I=x.constructor)!==null&&I!==void 0&&I.name)E+=`. Received an instance of ${x.constructor.name}`;else{const D=t(x,{depth:-1});E+=`. Received ${D}`}}else{let D=t(x,{colors:!1});D.length>25&&(D=`${D.slice(0,25)}...`),E+=`. Received type ${typeof x} (${D})`}return E},TypeError),p("ERR_INVALID_ARG_VALUE",(_,S,x="is invalid")=>{let E=t(S);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${x}. Received ${E}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(_,S,x)=>{var E;const C=x!=null&&(E=x.constructor)!==null&&E!==void 0&&E.name?`instance of ${x.constructor.name}`:`type ${typeof x}`;return`Expected ${_} to be returned from the "${S}" function but got ${C}.`},TypeError),p("ERR_MISSING_ARGS",(..._)=>{c(_.length>0,"At least one arg needs to be specified");let S;const x=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),x){case 1:S+=`The ${_[0]} argument`;break;case 2:S+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();S+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${S} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(_,S,x)=>{c(S,'Missing "range" argument');let E;if(Number.isInteger(x)&&Math.abs(x)>2**32)E=f(String(x));else if(typeof x=="bigint"){E=String(x);const C=BigInt(2)**BigInt(32);(x>C||x<-C)&&(E=f(E)),E+="n"}else E=t(x);return`The value of "${_}" is out of range. It must be ${S}. Received ${E}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Gx={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:u},Gx}var em={exports:{}},ZN;function Lm(){if(ZN)return em.exports;ZN=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return em.exports=e,em.exports.AbortSignal=t,em.exports.default=e,em.exports}var By={exports:{}},YN;function Sw(){if(YN)return By.exports;YN=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(A,O,I){return Function.prototype.apply.call(A,O,I)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:n=function(A){return Object.getOwnPropertyNames(A)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(A){return A!==A};function i(){i.init.call(this)}By.exports=i,By.exports.once=S,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(A){for(var O=[],I=1;I<arguments.length;I++)O.push(arguments[I]);var D=A==="error",z=this._events;if(z!==void 0)D=D&&z.error===void 0;else if(!D)return!1;if(D){var W;if(O.length>0&&(W=O[0]),W instanceof Error)throw W;var ee=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw ee.context=W,ee}var F=z[A];if(F===void 0)return!1;if(typeof F=="function")t(F,this,O);else for(var Z=F.length,V=v(F,Z),I=0;I<Z;++I)t(V[I],this,O);return!0};function c(C,A,O,I){var D,z,W;if(s(O),z=C._events,z===void 0?(z=C._events=Object.create(null),C._eventsCount=0):(z.newListener!==void 0&&(C.emit("newListener",A,O.listener?O.listener:O),z=C._events),W=z[A]),W===void 0)W=z[A]=O,++C._eventsCount;else if(typeof W=="function"?W=z[A]=I?[O,W]:[W,O]:I?W.unshift(O):W.push(O),D=u(C),D>0&&W.length>D&&!W.warned){W.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=C,ee.type=A,ee.count=W.length,r(ee)}return C}i.prototype.addListener=function(A,O){return c(this,A,O,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(A,O){return c(this,A,O,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,A,O){var I={fired:!1,wrapFn:void 0,target:C,type:A,listener:O},D=f.bind(I);return D.listener=O,I.wrapFn=D,D}i.prototype.once=function(A,O){return s(O),this.on(A,h(this,A,O)),this},i.prototype.prependOnceListener=function(A,O){return s(O),this.prependListener(A,h(this,A,O)),this},i.prototype.removeListener=function(A,O){var I,D,z,W,ee;if(s(O),D=this._events,D===void 0)return this;if(I=D[A],I===void 0)return this;if(I===O||I.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete D[A],D.removeListener&&this.emit("removeListener",A,I.listener||O));else if(typeof I!="function"){for(z=-1,W=I.length-1;W>=0;W--)if(I[W]===O||I[W].listener===O){ee=I[W].listener,z=W;break}if(z<0)return this;z===0?I.shift():b(I,z),I.length===1&&(D[A]=I[0]),D.removeListener!==void 0&&this.emit("removeListener",A,ee||O)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(A){var O,I,D;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[A]),this;if(arguments.length===0){var z=Object.keys(I),W;for(D=0;D<z.length;++D)W=z[D],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=I[A],typeof O=="function")this.removeListener(A,O);else if(O!==void 0)for(D=O.length-1;D>=0;D--)this.removeListener(A,O[D]);return this};function p(C,A,O){var I=C._events;if(I===void 0)return[];var D=I[A];return D===void 0?[]:typeof D=="function"?O?[D.listener||D]:[D]:O?_(D):v(D,D.length)}i.prototype.listeners=function(A){return p(this,A,!0)},i.prototype.rawListeners=function(A){return p(this,A,!1)},i.listenerCount=function(C,A){return typeof C.listenerCount=="function"?C.listenerCount(A):g.call(C,A)},i.prototype.listenerCount=g;function g(C){var A=this._events;if(A!==void 0){var O=A[C];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,A){for(var O=new Array(A),I=0;I<A;++I)O[I]=C[I];return O}function b(C,A){for(;A+1<C.length;A++)C[A]=C[A+1];C.pop()}function _(C){for(var A=new Array(C.length),O=0;O<A.length;++O)A[O]=C[O].listener||C[O];return A}function S(C,A){return new Promise(function(O,I){function D(W){C.removeListener(A,z),I(W)}function z(){typeof C.removeListener=="function"&&C.removeListener("error",D),O([].slice.call(arguments))}E(C,A,z,{once:!0}),A!=="error"&&x(C,D,{once:!0})})}function x(C,A,O){typeof C.on=="function"&&E(C,"error",A,O)}function E(C,A,O,I){if(typeof C.on=="function")I.once?C.once(A,O):C.on(A,O);else if(typeof C.addEventListener=="function")C.addEventListener(A,function D(z){I.once&&C.removeEventListener(A,D),O(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return By.exports}var XN;function Ci(){return XN||(XN=1,function(e){const t=pc(),{format:n,inspect:r}=jj(),{codes:{ERR_INVALID_ARG_TYPE:a}}=fi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Ur(),u=globalThis.AbortSignal||Lm().AbortSignal,c=globalThis.AbortController||Lm().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,p=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(b,_)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(_,"AbortSignal",b)},v=(b,_)=>{if(typeof b!="function")throw new a(_,"Function",b)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(b){let _=!1;return function(...S){_||(_=!0,b.apply(this,S))}},createDeferredPromise:function(){let b,_;return{promise:new Promise((x,E)=>{b=x,_=E}),resolve:b,reject:_}},promisify(b){return new Promise((_,S)=>{b((x,...E)=>x?S(x):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof f},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:p,deprecate(b,_){return b},addAbortListener:Sw().addAbortListener||function(_,S){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),v(S,"listener");let x;return _.aborted?queueMicrotask(()=>S()):(_.addEventListener("abort",S,{__proto__:null,once:!0,[i]:!0}),x=()=>{_.removeEventListener("abort",S)}),{__proto__:null,[s](){var E;(E=x)===null||E===void 0||E()}}},AbortSignalAny:u.any||function(_){if(_.length===1)return _[0];const S=new c,x=()=>S.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",x,{once:!0})}),S.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",x))},{once:!0}),S.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Hx)),Hx.exports}var zy={},Wx,JN;function N0(){if(JN)return Wx;JN=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=Ur(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:S,ERR_OUT_OF_RANGE:x,ERR_UNKNOWN_SIGNAL:E}}=fi(),{normalizeEncoding:C}=Ci(),{isAsyncFunction:A,isArrayBufferView:O}=Ci().types,I={};function D(J){return J===(J|0)}function z(J){return J===J>>>0}const W=/^[0-7]+$/,ee="must be a 32-bit unsigned integer or an octal string";function F(J,xe,Le){if(typeof J>"u"&&(J=Le),typeof J=="string"){if(f(W,J)===null)throw new S(xe,J,ee);J=u(J,8)}return ae(J,xe),J}const Z=v((J,xe,Le=s,Se=o)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new x(xe,"an integer",J);if(J<Le||J>Se)throw new x(xe,`>= ${Le} && <= ${Se}`,J)}),V=v((J,xe,Le=-2147483648,Se=2147483647)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new x(xe,"an integer",J);if(J<Le||J>Se)throw new x(xe,`>= ${Le} && <= ${Se}`,J)}),ae=v((J,xe,Le=!1)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new x(xe,"an integer",J);const Se=Le?1:0,Ve=4294967295;if(J<Se||J>Ve)throw new x(xe,`>= ${Se} && <= ${Ve}`,J)});function ie(J,xe){if(typeof J!="string")throw new _(xe,"string",J)}function te(J,xe,Le=void 0,Se){if(typeof J!="number")throw new _(xe,"number",J);if(Le!=null&&J<Le||Se!=null&&J>Se||(Le!=null||Se!=null)&&i(J))throw new x(xe,`${Le!=null?`>= ${Le}`:""}${Le!=null&&Se!=null?" && ":""}${Se!=null?`<= ${Se}`:""}`,J)}const X=v((J,xe,Le)=>{if(!t(Le,J)){const Ve="must be one of: "+n(r(Le,xt=>typeof xt=="string"?`'${xt}'`:h(xt)),", ");throw new S(xe,J,Ve)}});function ce(J,xe){if(typeof J!="boolean")throw new _(xe,"boolean",J)}function G(J,xe,Le){return J==null||!c(J,xe)?Le:J[xe]}const Q=v((J,xe,Le=null)=>{const Se=G(Le,"allowArray",!1),Ve=G(Le,"allowFunction",!1);if(!G(Le,"nullable",!1)&&J===null||!Se&&e(J)||typeof J!="object"&&(!Ve||typeof J!="function"))throw new _(xe,"Object",J)}),Y=v((J,xe)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new _(xe,"a dictionary",J)}),re=v((J,xe,Le=0)=>{if(!e(J))throw new _(xe,"Array",J);if(J.length<Le){const Se=`must be longer than ${Le}`;throw new S(xe,J,Se)}});function be(J,xe){re(J,xe);for(let Le=0;Le<J.length;Le++)ie(J[Le],`${xe}[${Le}]`)}function _e(J,xe){re(J,xe);for(let Le=0;Le<J.length;Le++)ce(J[Le],`${xe}[${Le}]`)}function Ie(J,xe){re(J,xe);for(let Le=0;Le<J.length;Le++){const Se=J[Le],Ve=`${xe}[${Le}]`;if(Se==null)throw new _(Ve,"AbortSignal",Se);it(Se,Ve)}}function Pe(J,xe="signal"){if(ie(J,xe),I[J]===void 0)throw I[p(J)]!==void 0?new E(J+" (signals must use all capital letters)"):new E(J)}const Re=v((J,xe="buffer")=>{if(!O(J))throw new _(xe,["Buffer","TypedArray","DataView"],J)});function ke(J,xe){const Le=C(xe),Se=J.length;if(Le==="hex"&&Se%2!==0)throw new S("encoding",xe,`is invalid for data of length ${Se}`)}function ze(J,xe="Port",Le=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&g(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Le)throw new b(xe,J,Le);return J|0}const it=v((J,xe)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new _(xe,"AbortSignal",J)}),Oe=v((J,xe)=>{if(typeof J!="function")throw new _(xe,"Function",J)}),Te=v((J,xe)=>{if(typeof J!="function"||A(J))throw new _(xe,"Function",J)}),B=v((J,xe)=>{if(J!==void 0)throw new _(xe,"undefined",J)});function Ce(J,xe,Le){if(!t(Le,J))throw new _(xe,`('${n(Le,"|")}')`,J)}const Ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function de(J,xe){if(typeof J>"u"||!f(Ne,J))throw new S(xe,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oe(J){if(typeof J=="string")return de(J,"hints"),J;if(e(J)){const xe=J.length;let Le="";if(xe===0)return Le;for(let Se=0;Se<xe;Se++){const Ve=J[Se];de(Ve,"hints"),Le+=Ve,Se!==xe-1&&(Le+=", ")}return Le}throw new S("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Wx={isInt32:D,isUint32:z,parseFileMode:F,validateArray:re,validateStringArray:be,validateBooleanArray:_e,validateAbortSignalArray:Ie,validateBoolean:ce,validateBuffer:Re,validateDictionary:Y,validateEncoding:ke,validateFunction:Oe,validateInt32:V,validateInteger:Z,validateNumber:te,validateObject:Q,validateOneOf:X,validatePlainFunction:Te,validatePort:ze,validateSignalName:Pe,validateString:ie,validateUint32:ae,validateUndefined:B,validateUnion:Ce,validateAbortSignal:it,validateLinkHeaderValue:oe},Wx}var Uy={exports:{}},Kx={},QN;function kd(){return QN||(QN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function u(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var f=[],h=!1,p,g=-1;function v(){!h||!p||(h=!1,p.length?f=p.concat(f):g=-1,f.length&&b())}function b(){if(!h){var C=u(v);h=!0;for(var A=f.length;A;){for(p=f,f=[];++g<A;)p&&p[g].run();g=-1,A=f.length}p=null,h=!1,c(C)}}r.nextTick=function(C){var A=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)A[O-1]=arguments[O];f.push(new _(C,A)),f.length===1&&!h&&u(b)};function _(C,A){this.fun=C,this.array=A}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function S(){}r.on=S,r.addListener=S,r.once=S,r.off=S,r.removeListener=S,r.removeAllListeners=S,r.emit=S,r.prependListener=S,r.prependOnceListener=S,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var x=n.exports;const E=t(x);e.default=E,e.process=E}(Kx)),Kx}var Zx,eI;function Wl(){if(eI)return Zx;eI=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Ur(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function f(G,Q=!1){var Y;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!Q||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((Y=G._readableState)===null||Y===void 0?void 0:Y.readable)!==!1)&&(!G._writableState||G._readableState))}function h(G){var Q;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((Q=G._writableState)===null||Q===void 0?void 0:Q.writable)!==!1))}function p(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function g(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function v(G){return!!(G&&!g(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function b(G){return!!(G&&!g(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function _(G){return!!(G&&!g(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function S(G){return v(G)||b(G)||_(G)}function x(G,Q){return G==null?!1:Q===!0?typeof G[e]=="function":Q===!1?typeof G[t]=="function":typeof G[e]=="function"||typeof G[t]=="function"}function E(G){if(!g(G))return null;const Q=G._writableState,Y=G._readableState,re=Q||Y;return!!(G.destroyed||G[r]||re!=null&&re.destroyed)}function C(G){if(!h(G))return null;if(G.writableEnded===!0)return!0;const Q=G._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.ended)!="boolean"?null:Q.ended}function A(G,Q){if(!h(G))return null;if(G.writableFinished===!0)return!0;const Y=G._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.finished)!="boolean"?null:!!(Y.finished||Q===!1&&Y.ended===!0&&Y.length===0)}function O(G){if(!f(G))return null;if(G.readableEnded===!0)return!0;const Q=G._readableState;return!Q||Q.errored?!1:typeof(Q==null?void 0:Q.ended)!="boolean"?null:Q.ended}function I(G,Q){if(!f(G))return null;const Y=G._readableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.endEmitted)!="boolean"?null:!!(Y.endEmitted||Q===!1&&Y.ended===!0&&Y.length===0)}function D(G){return G&&G[i]!=null?G[i]:typeof(G==null?void 0:G.readable)!="boolean"?null:E(G)?!1:f(G)&&G.readable&&!I(G)}function z(G){return G&&G[o]!=null?G[o]:typeof(G==null?void 0:G.writable)!="boolean"?null:E(G)?!1:h(G)&&G.writable&&!C(G)}function W(G,Q){return g(G)?E(G)?!0:!((Q==null?void 0:Q.readable)!==!1&&D(G)||(Q==null?void 0:Q.writable)!==!1&&z(G)):null}function ee(G){var Q,Y;return g(G)?G.writableErrored?G.writableErrored:(Q=(Y=G._writableState)===null||Y===void 0?void 0:Y.errored)!==null&&Q!==void 0?Q:null:null}function F(G){var Q,Y;return g(G)?G.readableErrored?G.readableErrored:(Q=(Y=G._readableState)===null||Y===void 0?void 0:Y.errored)!==null&&Q!==void 0?Q:null:null}function Z(G){if(!g(G))return null;if(typeof G.closed=="boolean")return G.closed;const Q=G._writableState,Y=G._readableState;return typeof(Q==null?void 0:Q.closed)=="boolean"||typeof(Y==null?void 0:Y.closed)=="boolean"?(Q==null?void 0:Q.closed)||(Y==null?void 0:Y.closed):typeof G._closed=="boolean"&&V(G)?G._closed:null}function V(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function ae(G){return typeof G._sent100=="boolean"&&V(G)}function ie(G){var Q;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((Q=G.req)===null||Q===void 0?void 0:Q.upgradeOrConnect)===void 0}function te(G){if(!g(G))return null;const Q=G._writableState,Y=G._readableState,re=Q||Y;return!re&&ae(G)||!!(re&&re.autoDestroy&&re.emitClose&&re.closed===!1)}function X(G){var Q;return!!(G&&((Q=G[s])!==null&&Q!==void 0?Q:G.readableDidRead||G.readableAborted))}function ce(G){var Q,Y,re,be,_e,Ie,Pe,Re,ke,ze;return!!(G&&((Q=(Y=(re=(be=(_e=(Ie=G[a])!==null&&Ie!==void 0?Ie:G.readableErrored)!==null&&_e!==void 0?_e:G.writableErrored)!==null&&be!==void 0?be:(Pe=G._readableState)===null||Pe===void 0?void 0:Pe.errorEmitted)!==null&&re!==void 0?re:(Re=G._writableState)===null||Re===void 0?void 0:Re.errorEmitted)!==null&&Y!==void 0?Y:(ke=G._readableState)===null||ke===void 0?void 0:ke.errored)!==null&&Q!==void 0?Q:!((ze=G._writableState)===null||ze===void 0)&&ze.errored))}return Zx={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:s,isErrored:ce,kIsErrored:a,isReadable:D,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:o,isClosed:Z,isDuplexNodeStream:p,isFinished:W,isIterable:x,isReadableNodeStream:f,isReadableStream:v,isReadableEnded:O,isReadableFinished:I,isReadableErrored:F,isNodeStream:g,isWebStream:S,isWritable:z,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:A,isWritableErrored:ee,isServerRequest:ie,isServerResponse:ae,willEmitClose:te,isTransformStream:_},Zx}var tI;function mc(){if(tI)return Uy.exports;tI=1;const e=kd(),{AbortError:t,codes:n}=fi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=Ci(),{validateAbortSignal:s,validateFunction:u,validateObject:c,validateBoolean:f}=N0(),{Promise:h,PromisePrototypeThen:p,SymbolDispose:g}=Ur(),{isClosed:v,isReadable:b,isReadableNodeStream:_,isReadableStream:S,isReadableFinished:x,isReadableErrored:E,isWritable:C,isWritableNodeStream:A,isWritableStream:O,isWritableFinished:I,isWritableErrored:D,isNodeStream:z,willEmitClose:W,kIsClosedPromise:ee}=Wl();let F;function Z(X){return X.setHeader&&typeof X.abort=="function"}const V=()=>{};function ae(X,ce,G){var Q,Y;if(arguments.length===2?(G=ce,ce=i):ce==null?ce=i:c(ce,"options"),u(G,"callback"),s(ce.signal,"options.signal"),G=o(G),S(X)||O(X))return ie(X,ce,G);if(!z(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const re=(Q=ce.readable)!==null&&Q!==void 0?Q:_(X),be=(Y=ce.writable)!==null&&Y!==void 0?Y:A(X),_e=X._writableState,Ie=X._readableState,Pe=()=>{X.writable||ze()};let Re=W(X)&&_(X)===re&&A(X)===be,ke=I(X,!1);const ze=()=>{ke=!0,X.destroyed&&(Re=!1),!(Re&&(!X.readable||re))&&(!re||it)&&G.call(X)};let it=x(X,!1);const Oe=()=>{it=!0,X.destroyed&&(Re=!1),!(Re&&(!X.writable||be))&&(!be||ke)&&G.call(X)},Te=J=>{G.call(X,J)};let B=v(X);const Ce=()=>{B=!0;const J=D(X)||E(X);if(J&&typeof J!="boolean")return G.call(X,J);if(re&&!it&&_(X,!0)&&!x(X,!1))return G.call(X,new a);if(be&&!ke&&!I(X,!1))return G.call(X,new a);G.call(X)},Ne=()=>{B=!0;const J=D(X)||E(X);if(J&&typeof J!="boolean")return G.call(X,J);G.call(X)},de=()=>{X.req.on("finish",ze)};Z(X)?(X.on("complete",ze),Re||X.on("abort",Ce),X.req?de():X.on("request",de)):be&&!_e&&(X.on("end",Pe),X.on("close",Pe)),!Re&&typeof X.aborted=="boolean"&&X.on("aborted",Ce),X.on("end",Oe),X.on("finish",ze),ce.error!==!1&&X.on("error",Te),X.on("close",Ce),B?e.nextTick(Ce):_e!=null&&_e.errorEmitted||Ie!=null&&Ie.errorEmitted?Re||e.nextTick(Ne):(!re&&(!Re||b(X))&&(ke||C(X)===!1)||!be&&(!Re||C(X))&&(it||b(X)===!1)||Ie&&X.req&&X.aborted)&&e.nextTick(Ne);const oe=()=>{G=V,X.removeListener("aborted",Ce),X.removeListener("complete",ze),X.removeListener("abort",Ce),X.removeListener("request",de),X.req&&X.req.removeListener("finish",ze),X.removeListener("end",Pe),X.removeListener("close",Pe),X.removeListener("finish",ze),X.removeListener("end",Oe),X.removeListener("error",Te),X.removeListener("close",Ce)};if(ce.signal&&!B){const J=()=>{const xe=G;oe(),xe.call(X,new t(void 0,{cause:ce.signal.reason}))};if(ce.signal.aborted)e.nextTick(J);else{F=F||Ci().addAbortListener;const xe=F(ce.signal,J),Le=G;G=o((...Se)=>{xe[g](),Le.apply(X,Se)})}}return oe}function ie(X,ce,G){let Q=!1,Y=V;if(ce.signal)if(Y=()=>{Q=!0,G.call(X,new t(void 0,{cause:ce.signal.reason}))},ce.signal.aborted)e.nextTick(Y);else{F=F||Ci().addAbortListener;const be=F(ce.signal,Y),_e=G;G=o((...Ie)=>{be[g](),_e.apply(X,Ie)})}const re=(...be)=>{Q||e.nextTick(()=>G.apply(X,be))};return p(X[ee].promise,re,re),V}function te(X,ce){var G;let Q=!1;return ce===null&&(ce=i),(G=ce)!==null&&G!==void 0&&G.cleanup&&(f(ce.cleanup,"cleanup"),Q=ce.cleanup),new h((Y,re)=>{const be=ae(X,ce,_e=>{Q&&be(),_e?re(_e):Y()})})}return Uy.exports=ae,Uy.exports.finished=te,Uy.exports}var Yx,nI;function kh(){if(nI)return Yx;nI=1;const e=kd(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=fi(),{Symbol:a}=Ur(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:u}=Wl(),c=a("kDestroy"),f=a("kConstruct");function h(W,ee,F){W&&(W.stack,ee&&!ee.errored&&(ee.errored=W),F&&!F.errored&&(F.errored=W))}function p(W,ee){const F=this._readableState,Z=this._writableState,V=Z||F;return Z!=null&&Z.destroyed||F!=null&&F.destroyed?(typeof ee=="function"&&ee(),this):(h(W,Z,F),Z&&(Z.destroyed=!0),F&&(F.destroyed=!0),V.constructed?g(this,W,ee):this.once(c,function(ae){g(this,t(ae,W),ee)}),this)}function g(W,ee,F){let Z=!1;function V(ae){if(Z)return;Z=!0;const ie=W._readableState,te=W._writableState;h(ae,te,ie),te&&(te.closed=!0),ie&&(ie.closed=!0),typeof F=="function"&&F(ae),ae?e.nextTick(v,W,ae):e.nextTick(b,W)}try{W._destroy(ee||null,V)}catch(ae){V(ae)}}function v(W,ee){_(W,ee),b(W)}function b(W){const ee=W._readableState,F=W._writableState;F&&(F.closeEmitted=!0),ee&&(ee.closeEmitted=!0),(F!=null&&F.emitClose||ee!=null&&ee.emitClose)&&W.emit("close")}function _(W,ee){const F=W._readableState,Z=W._writableState;Z!=null&&Z.errorEmitted||F!=null&&F.errorEmitted||(Z&&(Z.errorEmitted=!0),F&&(F.errorEmitted=!0),W.emit("error",ee))}function S(){const W=this._readableState,ee=this._writableState;W&&(W.constructed=!0,W.closed=!1,W.closeEmitted=!1,W.destroyed=!1,W.errored=null,W.errorEmitted=!1,W.reading=!1,W.ended=W.readable===!1,W.endEmitted=W.readable===!1),ee&&(ee.constructed=!0,ee.destroyed=!1,ee.closed=!1,ee.closeEmitted=!1,ee.errored=null,ee.errorEmitted=!1,ee.finalCalled=!1,ee.prefinished=!1,ee.ended=ee.writable===!1,ee.ending=ee.writable===!1,ee.finished=ee.writable===!1)}function x(W,ee,F){const Z=W._readableState,V=W._writableState;if(V!=null&&V.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||V!=null&&V.autoDestroy?W.destroy(ee):ee&&(ee.stack,V&&!V.errored&&(V.errored=ee),Z&&!Z.errored&&(Z.errored=ee),F?e.nextTick(_,W,ee):_(W,ee))}function E(W,ee){if(typeof W._construct!="function")return;const F=W._readableState,Z=W._writableState;F&&(F.constructed=!1),Z&&(Z.constructed=!1),W.once(f,ee),!(W.listenerCount(f)>1)&&e.nextTick(C,W)}function C(W){let ee=!1;function F(Z){if(ee){x(W,Z??new n);return}ee=!0;const V=W._readableState,ae=W._writableState,ie=ae||V;V&&(V.constructed=!0),ae&&(ae.constructed=!0),ie.destroyed?W.emit(c,Z):Z?x(W,Z,!0):e.nextTick(A,W)}try{W._construct(Z=>{e.nextTick(F,Z)})}catch(Z){e.nextTick(F,Z)}}function A(W){W.emit(f)}function O(W){return(W==null?void 0:W.setHeader)&&typeof W.abort=="function"}function I(W){W.emit("close")}function D(W,ee){W.emit("error",ee),e.nextTick(I,W)}function z(W,ee){!W||o(W)||(!ee&&!s(W)&&(ee=new r),u(W)?(W.socket=null,W.destroy(ee)):O(W)?W.abort():O(W.req)?W.req.abort():typeof W.destroy=="function"?W.destroy(ee):typeof W.close=="function"?W.close():ee?e.nextTick(D,W,ee):e.nextTick(I,W),W.destroyed||(W[i]=!0))}return Yx={construct:E,destroyer:z,destroy:p,undestroy:S,errorOrDestroy:x},Yx}var Xx,rI;function rk(){if(rI)return Xx;rI=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Ur(),{EventEmitter:n}=Sw();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function u(b){i.writable&&i.write(b)===!1&&s.pause&&s.pause()}s.on("data",u);function c(){s.readable&&s.resume&&s.resume()}i.on("drain",c),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",p));let f=!1;function h(){f||(f=!0,i.end())}function p(){f||(f=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(s,"error",g),a(i,"error",g);function v(){s.removeListener("data",u),i.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",p),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",v),s.removeListener("close",v),i.removeListener("close",v)}return s.on("end",v),s.on("close",v),i.on("close",v),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return Xx={Stream:r,prependListener:a},Xx}var Jx={exports:{}},aI;function Ew(){return aI||(aI=1,function(e){const{SymbolDispose:t}=Ur(),{AbortError:n,codes:r}=fi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Wl(),s=mc(),{ERR_INVALID_ARG_TYPE:u}=r;let c;const f=(h,p)=>{if(typeof h!="object"||!("aborted"in h))throw new u(p,"AbortSignal",h)};e.exports.addAbortSignal=function(p,g){if(f(p,"signal"),!a(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(h,p){if(typeof h!="object"||!("aborted"in h))return p;const g=a(p)?()=>{p.destroy(new n(void 0,{cause:h.reason}))}:()=>{p[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||Ci().addAbortListener;const v=c(h,g);s(p,v[t])}return p}}(Jx)),Jx.exports}var Qx,iI;function EX(){if(iI)return Qx;iI=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Ur(),{Buffer:a}=pc(),{inspect:i}=Ci();return Qx=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=s+u.data;return c}concat(s){if(this.length===0)return a.alloc(0);const u=a.allocUnsafe(s>>>0);let c=this.head,f=0;for(;c;)n(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(s,u){const c=this.head.data;if(s<c.length){const f=c.slice(0,s);return this.head.data=c.slice(s),f}return s===c.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",c=this.head,f=0;do{const h=c.data;if(s>h.length)u+=h,s-=h.length;else{s===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=e(h,0,s),this.head=c,c.data=e(h,s));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(s){const u=a.allocUnsafe(s),c=s;let f=this.head,h=0;do{const p=f.data;if(s>p.length)n(u,p,c-s),s-=p.length;else{s===p.length?(n(u,p,c-s),++h,f.next?this.head=f.next:this.head=this.tail=null):(n(u,new r(p.buffer,p.byteOffset,s),c-s),this.head=f,f.data=p.slice(s));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},Qx}var eS,oI;function Cw(){if(oI)return eS;oI=1;const{MathFloor:e,NumberIsInteger:t}=Ur(),{validateInteger:n}=N0(),{ERR_INVALID_ARG_VALUE:r}=fi().codes;let a=16*1024,i=16;function o(f,h,p){return f.highWaterMark!=null?f.highWaterMark:h?f[p]:null}function s(f){return f?i:a}function u(f,h){n(h,"value",0),f?i=h:a=h}function c(f,h,p,g){const v=o(h,g,p);if(v!=null){if(!t(v)||v<0){const b=g?`options.${p}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return s(f.objectMode)}return eS={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},eS}var tS={},qy={exports:{}},sI;function ak(){return sI||(sI=1,function(e,t){var n=pc(),r=n.Buffer;function a(o,s){for(var u in o)s[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,u){return r(o,s,u)}a(r,i),i.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,u)},i.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(qy,qy.exports)),qy.exports}var lI;function CX(){if(lI)return tS;lI=1;var e=ak().Buffer,t=e.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(S){if(!S)return"utf8";for(var x;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(x)return;S=(""+S).toLowerCase(),x=!0}}function r(S){var x=n(S);if(typeof x!="string"&&(e.isEncoding===t||!t(S)))throw new Error("Unknown encoding: "+S);return x||S}tS.StringDecoder=a;function a(S){this.encoding=r(S);var x;switch(this.encoding){case"utf16le":this.text=h,this.end=p,x=4;break;case"utf8":this.fillLast=u,x=4;break;case"base64":this.text=g,this.end=v,x=3;break;default:this.write=b,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(x)}a.prototype.write=function(S){if(S.length===0)return"";var x,E;if(this.lastNeed){if(x=this.fillLast(S),x===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<S.length?x?x+this.text(S,E):this.text(S,E):x||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function i(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function o(S,x,E){var C=x.length-1;if(C<E)return 0;var A=i(x[C]);return A>=0?(A>0&&(S.lastNeed=A-1),A):--C<E||A===-2?0:(A=i(x[C]),A>=0?(A>0&&(S.lastNeed=A-2),A):--C<E||A===-2?0:(A=i(x[C]),A>=0?(A>0&&(A===2?A=0:S.lastNeed=A-3),A):0))}function s(S,x,E){if((x[0]&192)!==128)return S.lastNeed=0,"";if(S.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return S.lastNeed=1,"";if(S.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return S.lastNeed=2,""}}function u(S){var x=this.lastTotal-this.lastNeed,E=s(this,S);if(E!==void 0)return E;if(this.lastNeed<=S.length)return S.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,x,0,S.length),this.lastNeed-=S.length}function c(S,x){var E=o(this,S,x);if(!this.lastNeed)return S.toString("utf8",x);this.lastTotal=E;var C=S.length-(E-this.lastNeed);return S.copy(this.lastChar,0,C),S.toString("utf8",x,C)}function f(S){var x=S&&S.length?this.write(S):"";return this.lastNeed?x+"":x}function h(S,x){if((S.length-x)%2===0){var E=S.toString("utf16le",x);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",x,S.length-1)}function p(S){var x=S&&S.length?this.write(S):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,E)}return x}function g(S,x){var E=(S.length-x)%3;return E===0?S.toString("base64",x):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",x,S.length-E))}function v(S){var x=S&&S.length?this.write(S):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function b(S){return S.toString(this.encoding)}function _(S){return S&&S.length?this.write(S):""}return tS}var nS,uI;function Mj(){if(uI)return nS;uI=1;const e=kd(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Ur(),{Buffer:a}=pc(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=fi().codes;function s(u,c,f){let h;if(typeof c=="string"||c instanceof a)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let p;if(c&&c[n])p=!0,h=c[n]();else if(c&&c[r])p=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new u({objectMode:!0,highWaterMark:1,...f});let v=!1;g._read=function(){v||(v=!0,_())},g._destroy=function(S,x){t(b(S),()=>e.nextTick(x,S),E=>e.nextTick(x,E||S))};async function b(S){const x=S!=null,E=typeof h.throw=="function";if(x&&E){const{value:C,done:A}=await h.throw(S);if(await C,A)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:S,done:x}=p?await h.next():h.next();if(x)g.push(null);else{const E=S&&typeof S.then=="function"?await S:S;if(E===null)throw v=!1,new o;if(g.push(E))continue;v=!1}}catch(S){g.destroy(S)}break}}return g}return nS=s,nS}var rS,cI;function kw(){if(cI)return rS;cI=1;const e=kd(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:p}=Ur();rS=Se,Se.ReadableState=Le;const{EventEmitter:g}=Sw(),{Stream:v,prependListener:b}=rk(),{Buffer:_}=pc(),{addAbortSignal:S}=Ew(),x=mc();let E=Ci().debuglog("stream",ye=>{E=ye});const C=EX(),A=kh(),{getHighWaterMark:O,getDefaultHighWaterMark:I}=Cw(),{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:z,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_OUT_OF_RANGE:ee,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:V}=fi(),{validateObject:ae}=N0(),ie=p("kPaused"),{StringDecoder:te}=CX(),X=Mj();s(Se.prototype,v.prototype),s(Se,v);const ce=()=>{},{errorOrDestroy:G}=A,Q=1,Y=2,re=4,be=8,_e=16,Ie=32,Pe=64,Re=128,ke=256,ze=512,it=1024,Oe=2048,Te=4096,B=8192,Ce=16384,Ne=32768,de=65536,oe=1<<17,J=1<<18;function xe(ye){return{enumerable:!1,get(){return(this.state&ye)!==0},set(U){U?this.state|=ye:this.state&=~ye}}}i(Le.prototype,{objectMode:xe(Q),ended:xe(Y),endEmitted:xe(re),reading:xe(be),constructed:xe(_e),sync:xe(Ie),needReadable:xe(Pe),emittedReadable:xe(Re),readableListening:xe(ke),resumeScheduled:xe(ze),errorEmitted:xe(it),emitClose:xe(Oe),autoDestroy:xe(Te),destroyed:xe(B),closed:xe(Ce),closeEmitted:xe(Ne),multiAwaitDrain:xe(de),readingMore:xe(oe),dataEmitted:xe(J)});function Le(ye,U,$){typeof $!="boolean"&&($=U instanceof Ll()),this.state=Oe|Te|_e|Ie,ye&&ye.objectMode&&(this.state|=Q),$&&ye&&ye.readableObjectMode&&(this.state|=Q),this.highWaterMark=ye?O(this,ye,"readableHighWaterMark",$):I(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ie]=null,ye&&ye.emitClose===!1&&(this.state&=-2049),ye&&ye.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ye&&ye.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ye&&ye.encoding&&(this.decoder=new te(ye.encoding),this.encoding=ye.encoding)}function Se(ye){if(!(this instanceof Se))return new Se(ye);const U=this instanceof Ll();this._readableState=new Le(ye,this,U),ye&&(typeof ye.read=="function"&&(this._read=ye.read),typeof ye.destroy=="function"&&(this._destroy=ye.destroy),typeof ye.construct=="function"&&(this._construct=ye.construct),ye.signal&&!U&&S(ye.signal,this)),v.call(this,ye),A.construct(this,()=>{this._readableState.needReadable&&N(this,this._readableState)})}Se.prototype.destroy=A.destroy,Se.prototype._undestroy=A.undestroy,Se.prototype._destroy=function(ye,U){U(ye)},Se.prototype[g.captureRejectionSymbol]=function(ye){this.destroy(ye)},Se.prototype[f]=function(){let ye;return this.destroyed||(ye=this.readableEnded?null:new V,this.destroy(ye)),new u((U,$)=>x(this,H=>H&&H!==ye?$(H):U(null)))},Se.prototype.push=function(ye,U){return Ve(this,ye,U,!1)},Se.prototype.unshift=function(ye,U){return Ve(this,ye,U,!0)};function Ve(ye,U,$,H){E("readableAddChunk",U);const pe=ye._readableState;let fe;if((pe.state&Q)===0&&(typeof U=="string"?($=$||pe.defaultEncoding,pe.encoding!==$&&(H&&pe.encoding?U=_.from(U,$).toString(pe.encoding):(U=_.from(U,$),$=""))):U instanceof _?$="":v._isUint8Array(U)?(U=v._uint8ArrayToBuffer(U),$=""):U!=null&&(fe=new z("chunk",["string","Buffer","Uint8Array"],U))),fe)G(ye,fe);else if(U===null)pe.state&=-9,Tt(ye,pe);else if((pe.state&Q)!==0||U&&U.length>0)if(H)if((pe.state&re)!==0)G(ye,new Z);else{if(pe.destroyed||pe.errored)return!1;xt(ye,pe,U,!0)}else if(pe.ended)G(ye,new F);else{if(pe.destroyed||pe.errored)return!1;pe.state&=-9,pe.decoder&&!$?(U=pe.decoder.write(U),pe.objectMode||U.length!==0?xt(ye,pe,U,!1):N(ye,pe)):xt(ye,pe,U,!1)}else H||(pe.state&=-9,N(ye,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function xt(ye,U,$,H){U.flowing&&U.length===0&&!U.sync&&ye.listenerCount("data")>0?((U.state&de)!==0?U.awaitDrainWriters.clear():U.awaitDrainWriters=null,U.dataEmitted=!0,ye.emit("data",$)):(U.length+=U.objectMode?1:$.length,H?U.buffer.unshift($):U.buffer.push($),(U.state&Pe)!==0&&Ut(ye)),N(ye,U)}Se.prototype.isPaused=function(){const ye=this._readableState;return ye[ie]===!0||ye.flowing===!1},Se.prototype.setEncoding=function(ye){const U=new te(ye);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;const $=this._readableState.buffer;let H="";for(const pe of $)H+=U.write(pe);return $.clear(),H!==""&&$.push(H),this._readableState.length=H.length,this};const ht=1073741824;function Et(ye){if(ye>ht)throw new ee("size","<= 1GiB",ye);return ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++,ye}function Lt(ye,U){return ye<=0||U.length===0&&U.ended?0:(U.state&Q)!==0?1:r(ye)?U.flowing&&U.length?U.buffer.first().length:U.length:ye<=U.length?ye:U.ended?U.length:0}Se.prototype.read=function(ye){E("read",ye),ye===void 0?ye=NaN:n(ye)||(ye=a(ye,10));const U=this._readableState,$=ye;if(ye>U.highWaterMark&&(U.highWaterMark=Et(ye)),ye!==0&&(U.state&=-129),ye===0&&U.needReadable&&((U.highWaterMark!==0?U.length>=U.highWaterMark:U.length>0)||U.ended))return E("read: emitReadable",U.length,U.ended),U.length===0&&U.ended?et(this):Ut(this),null;if(ye=Lt(ye,U),ye===0&&U.ended)return U.length===0&&et(this),null;let H=(U.state&Pe)!==0;if(E("need readable",H),(U.length===0||U.length-ye<U.highWaterMark)&&(H=!0,E("length less than watermark",H)),U.ended||U.reading||U.destroyed||U.errored||!U.constructed)H=!1,E("reading, ended or constructing",H);else if(H){E("do read"),U.state|=be|Ie,U.length===0&&(U.state|=Pe);try{this._read(U.highWaterMark)}catch(fe){G(this,fe)}U.state&=-33,U.reading||(ye=Lt($,U))}let pe;return ye>0?pe=Be(ye,U):pe=null,pe===null?(U.needReadable=U.length<=U.highWaterMark,ye=0):(U.length-=ye,U.multiAwaitDrain?U.awaitDrainWriters.clear():U.awaitDrainWriters=null),U.length===0&&(U.ended||(U.needReadable=!0),$!==ye&&U.ended&&et(this)),pe!==null&&!U.errorEmitted&&!U.closeEmitted&&(U.dataEmitted=!0,this.emit("data",pe)),pe};function Tt(ye,U){if(E("onEofChunk"),!U.ended){if(U.decoder){const $=U.decoder.end();$&&$.length&&(U.buffer.push($),U.length+=U.objectMode?1:$.length)}U.ended=!0,U.sync?Ut(ye):(U.needReadable=!1,U.emittedReadable=!0,ge(ye))}}function Ut(ye){const U=ye._readableState;E("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(E("emitReadable",U.flowing),U.emittedReadable=!0,e.nextTick(ge,ye))}function ge(ye){const U=ye._readableState;E("emitReadable_",U.destroyed,U.length,U.ended),!U.destroyed&&!U.errored&&(U.length||U.ended)&&(ye.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,ct(ye)}function N(ye,U){!U.readingMore&&U.constructed&&(U.readingMore=!0,e.nextTick(q,ye,U))}function q(ye,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&U.length===0);){const $=U.length;if(E("maybeReadMore read 0"),ye.read(0),$===U.length)break}U.readingMore=!1}Se.prototype._read=function(ye){throw new W("_read()")},Se.prototype.pipe=function(ye,U){const $=this,H=this._readableState;H.pipes.length===1&&(H.multiAwaitDrain||(H.multiAwaitDrain=!0,H.awaitDrainWriters=new c(H.awaitDrainWriters?[H.awaitDrainWriters]:[]))),H.pipes.push(ye),E("pipe count=%d opts=%j",H.pipes.length,U);const fe=(!U||U.end!==!1)&&ye!==e.stdout&&ye!==e.stderr?ot:pr;H.endEmitted?e.nextTick(fe):$.once("end",fe),ye.on("unpipe",Fe);function Fe(jn,ti){E("onunpipe"),jn===$&&ti&&ti.hasUnpiped===!1&&(ti.hasUnpiped=!0,Bt())}function ot(){E("onend"),ye.end()}let jt,un=!1;function Bt(){E("cleanup"),ye.removeListener("close",zn),ye.removeListener("finish",hr),jt&&ye.removeListener("drain",jt),ye.removeListener("error",In),ye.removeListener("unpipe",Fe),$.removeListener("end",ot),$.removeListener("end",pr),$.removeListener("data",Xt),un=!0,jt&&H.awaitDrainWriters&&(!ye._writableState||ye._writableState.needDrain)&&jt()}function Vt(){un||(H.pipes.length===1&&H.pipes[0]===ye?(E("false write response, pause",0),H.awaitDrainWriters=ye,H.multiAwaitDrain=!1):H.pipes.length>1&&H.pipes.includes(ye)&&(E("false write response, pause",H.awaitDrainWriters.size),H.awaitDrainWriters.add(ye)),$.pause()),jt||(jt=he($,ye),ye.on("drain",jt))}$.on("data",Xt);function Xt(jn){E("ondata");const ti=ye.write(jn);E("dest.write",ti),ti===!1&&Vt()}function In(jn){if(E("onerror",jn),pr(),ye.removeListener("error",In),ye.listenerCount("error")===0){const ti=ye._writableState||ye._readableState;ti&&!ti.errorEmitted?G(ye,jn):ye.emit("error",jn)}}b(ye,"error",In);function zn(){ye.removeListener("finish",hr),pr()}ye.once("close",zn);function hr(){E("onfinish"),ye.removeListener("close",zn),pr()}ye.once("finish",hr);function pr(){E("unpipe"),$.unpipe(ye)}return ye.emit("pipe",$),ye.writableNeedDrain===!0?Vt():H.flowing||(E("pipe resume"),$.resume()),ye};function he(ye,U){return function(){const H=ye._readableState;H.awaitDrainWriters===U?(E("pipeOnDrain",1),H.awaitDrainWriters=null):H.multiAwaitDrain&&(E("pipeOnDrain",H.awaitDrainWriters.size),H.awaitDrainWriters.delete(U)),(!H.awaitDrainWriters||H.awaitDrainWriters.size===0)&&ye.listenerCount("data")&&ye.resume()}}Se.prototype.unpipe=function(ye){const U=this._readableState,$={hasUnpiped:!1};if(U.pipes.length===0)return this;if(!ye){const pe=U.pipes;U.pipes=[],this.pause();for(let fe=0;fe<pe.length;fe++)pe[fe].emit("unpipe",this,{hasUnpiped:!1});return this}const H=t(U.pipes,ye);return H===-1?this:(U.pipes.splice(H,1),U.pipes.length===0&&this.pause(),ye.emit("unpipe",this,$),this)},Se.prototype.on=function(ye,U){const $=v.prototype.on.call(this,ye,U),H=this._readableState;return ye==="data"?(H.readableListening=this.listenerCount("readable")>0,H.flowing!==!1&&this.resume()):ye==="readable"&&!H.endEmitted&&!H.readableListening&&(H.readableListening=H.needReadable=!0,H.flowing=!1,H.emittedReadable=!1,E("on readable",H.length,H.reading),H.length?Ut(this):H.reading||e.nextTick(ve,this)),$},Se.prototype.addListener=Se.prototype.on,Se.prototype.removeListener=function(ye,U){const $=v.prototype.removeListener.call(this,ye,U);return ye==="readable"&&e.nextTick(De,this),$},Se.prototype.off=Se.prototype.removeListener,Se.prototype.removeAllListeners=function(ye){const U=v.prototype.removeAllListeners.apply(this,arguments);return(ye==="readable"||ye===void 0)&&e.nextTick(De,this),U};function De(ye){const U=ye._readableState;U.readableListening=ye.listenerCount("readable")>0,U.resumeScheduled&&U[ie]===!1?U.flowing=!0:ye.listenerCount("data")>0?ye.resume():U.readableListening||(U.flowing=null)}function ve(ye){E("readable nexttick read 0"),ye.read(0)}Se.prototype.resume=function(){const ye=this._readableState;return ye.flowing||(E("resume"),ye.flowing=!ye.readableListening,Ae(this,ye)),ye[ie]=!1,this};function Ae(ye,U){U.resumeScheduled||(U.resumeScheduled=!0,e.nextTick(le,ye,U))}function le(ye,U){E("resume",U.reading),U.reading||ye.read(0),U.resumeScheduled=!1,ye.emit("resume"),ct(ye),U.flowing&&!U.reading&&ye.read(0)}Se.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ie]=!0,this};function ct(ye){const U=ye._readableState;for(E("flow",U.flowing);U.flowing&&ye.read()!==null;);}Se.prototype.wrap=function(ye){let U=!1;ye.on("data",H=>{!this.push(H)&&ye.pause&&(U=!0,ye.pause())}),ye.on("end",()=>{this.push(null)}),ye.on("error",H=>{G(this,H)}),ye.on("close",()=>{this.destroy()}),ye.on("destroy",()=>{this.destroy()}),this._read=()=>{U&&ye.resume&&(U=!1,ye.resume())};const $=o(ye);for(let H=1;H<$.length;H++){const pe=$[H];this[pe]===void 0&&typeof ye[pe]=="function"&&(this[pe]=ye[pe].bind(ye))}return this},Se.prototype[h]=function(){return yt(this)},Se.prototype.iterator=function(ye){return ye!==void 0&&ae(ye,"options"),yt(this,ye)};function yt(ye,U){typeof ye.read!="function"&&(ye=Se.wrap(ye,{objectMode:!0}));const $=M(ye,U);return $.stream=ye,$}async function*M(ye,U){let $=ce;function H(Fe){this===ye?($(),$=ce):$=Fe}ye.on("readable",H);let pe;const fe=x(ye,{writable:!1},Fe=>{pe=Fe?D(pe,Fe):null,$(),$=ce});try{for(;;){const Fe=ye.destroyed?null:ye.read();if(Fe!==null)yield Fe;else{if(pe)throw pe;if(pe===null)return;await new u(H)}}}catch(Fe){throw pe=D(pe,Fe),pe}finally{(pe||(U==null?void 0:U.destroyOnReturn)!==!1)&&(pe===void 0||ye._readableState.autoDestroy)?A.destroyer(ye,null):(ye.off("readable",H),fe())}}i(Se.prototype,{readable:{__proto__:null,get(){const ye=this._readableState;return!!ye&&ye.readable!==!1&&!ye.destroyed&&!ye.errorEmitted&&!ye.endEmitted},set(ye){this._readableState&&(this._readableState.readable=!!ye)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ye){this._readableState&&(this._readableState.flowing=ye)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ye){this._readableState&&(this._readableState.destroyed=ye)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Le.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ie]!==!1},set(ye){this[ie]=!!ye}}}),Se._fromList=Be;function Be(ye,U){if(U.length===0)return null;let $;return U.objectMode?$=U.buffer.shift():!ye||ye>=U.length?(U.decoder?$=U.buffer.join(""):U.buffer.length===1?$=U.buffer.first():$=U.buffer.concat(U.length),U.buffer.clear()):$=U.buffer.consume(ye,U.decoder),$}function et(ye){const U=ye._readableState;E("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,e.nextTick(me,U,ye))}function me(ye,U){if(E("endReadableNT",ye.endEmitted,ye.length),!ye.errored&&!ye.closeEmitted&&!ye.endEmitted&&ye.length===0){if(ye.endEmitted=!0,U.emit("end"),U.writable&&U.allowHalfOpen===!1)e.nextTick(je,U);else if(ye.autoDestroy){const $=U._writableState;(!$||$.autoDestroy&&($.finished||$.writable===!1))&&U.destroy()}}}function je(ye){ye.writable&&!ye.writableEnded&&!ye.destroyed&&ye.end()}Se.from=function(ye,U){return X(Se,ye,U)};let Ke;function Ct(){return Ke===void 0&&(Ke={}),Ke}return Se.fromWeb=function(ye,U){return Ct().newStreamReadableFromReadableStream(ye,U)},Se.toWeb=function(ye,U){return Ct().newReadableStreamFromStreamReadable(ye,U)},Se.wrap=function(ye,U){var $,H;return new Se({objectMode:($=(H=ye.readableObjectMode)!==null&&H!==void 0?H:ye.objectMode)!==null&&$!==void 0?$:!0,...U,destroy(pe,fe){A.destroyer(ye,pe),fe(pe)}}).wrap(ye)},rS}var aS,dI;function ik(){if(dI)return aS;dI=1;const e=kd(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:c}=Ur();aS=ae,ae.WritableState=Z;const{EventEmitter:f}=Sw(),h=rk().Stream,{Buffer:p}=pc(),g=kh(),{addAbortSignal:v}=Ew(),{getHighWaterMark:b,getDefaultHighWaterMark:_}=Cw(),{ERR_INVALID_ARG_TYPE:S,ERR_METHOD_NOT_IMPLEMENTED:x,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:O,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:D,ERR_UNKNOWN_ENCODING:z}=fi().codes,{errorOrDestroy:W}=g;o(ae.prototype,h.prototype),o(ae,h);function ee(){}const F=u("kOnFinished");function Z(Te,B,Ce){typeof Ce!="boolean"&&(Ce=B instanceof Ll()),this.objectMode=!!(Te&&Te.objectMode),Ce&&(this.objectMode=this.objectMode||!!(Te&&Te.writableObjectMode)),this.highWaterMark=Te?b(this,Te,"writableHighWaterMark",Ce):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ne=!!(Te&&Te.decodeStrings===!1);this.decodeStrings=!Ne,this.defaultEncoding=Te&&Te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,B),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Te||Te.emitClose!==!1,this.autoDestroy=!Te||Te.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[F]=[]}function V(Te){Te.buffered=[],Te.bufferedIndex=0,Te.allBuffers=!0,Te.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ae(Te){const B=this instanceof Ll();if(!B&&!r(ae,this))return new ae(Te);this._writableState=new Z(Te,this,B),Te&&(typeof Te.write=="function"&&(this._write=Te.write),typeof Te.writev=="function"&&(this._writev=Te.writev),typeof Te.destroy=="function"&&(this._destroy=Te.destroy),typeof Te.final=="function"&&(this._final=Te.final),typeof Te.construct=="function"&&(this._construct=Te.construct),Te.signal&&v(Te.signal,this)),h.call(this,Te),g.construct(this,()=>{const Ce=this._writableState;Ce.writing||be(this,Ce),Re(this,Ce)})}a(ae,c,{__proto__:null,value:function(Te){return r(this,Te)?!0:this!==ae?!1:Te&&Te._writableState instanceof Z}}),ae.prototype.pipe=function(){W(this,new C)};function ie(Te,B,Ce,Ne){const de=Te._writableState;if(typeof Ce=="function")Ne=Ce,Ce=de.defaultEncoding;else{if(!Ce)Ce=de.defaultEncoding;else if(Ce!=="buffer"&&!p.isEncoding(Ce))throw new z(Ce);typeof Ne!="function"&&(Ne=ee)}if(B===null)throw new I;if(!de.objectMode)if(typeof B=="string")de.decodeStrings!==!1&&(B=p.from(B,Ce),Ce="buffer");else if(B instanceof p)Ce="buffer";else if(h._isUint8Array(B))B=h._uint8ArrayToBuffer(B),Ce="buffer";else throw new S("chunk",["string","Buffer","Uint8Array"],B);let oe;return de.ending?oe=new D:de.destroyed&&(oe=new A("write")),oe?(e.nextTick(Ne,oe),W(Te,oe,!0),oe):(de.pendingcb++,te(Te,de,B,Ce,Ne))}ae.prototype.write=function(Te,B,Ce){return ie(this,Te,B,Ce)===!0},ae.prototype.cork=function(){this._writableState.corked++},ae.prototype.uncork=function(){const Te=this._writableState;Te.corked&&(Te.corked--,Te.writing||be(this,Te))},ae.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=s(B)),!p.isEncoding(B))throw new z(B);return this._writableState.defaultEncoding=B,this};function te(Te,B,Ce,Ne,de){const oe=B.objectMode?1:Ce.length;B.length+=oe;const J=B.length<B.highWaterMark;return J||(B.needDrain=!0),B.writing||B.corked||B.errored||!B.constructed?(B.buffered.push({chunk:Ce,encoding:Ne,callback:de}),B.allBuffers&&Ne!=="buffer"&&(B.allBuffers=!1),B.allNoop&&de!==ee&&(B.allNoop=!1)):(B.writelen=oe,B.writecb=de,B.writing=!0,B.sync=!0,Te._write(Ce,Ne,B.onwrite),B.sync=!1),J&&!B.errored&&!B.destroyed}function X(Te,B,Ce,Ne,de,oe,J){B.writelen=Ne,B.writecb=J,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new A("write")):Ce?Te._writev(de,B.onwrite):Te._write(de,oe,B.onwrite),B.sync=!1}function ce(Te,B,Ce,Ne){--B.pendingcb,Ne(Ce),re(B),W(Te,Ce)}function G(Te,B){const Ce=Te._writableState,Ne=Ce.sync,de=Ce.writecb;if(typeof de!="function"){W(Te,new E);return}Ce.writing=!1,Ce.writecb=null,Ce.length-=Ce.writelen,Ce.writelen=0,B?(B.stack,Ce.errored||(Ce.errored=B),Te._readableState&&!Te._readableState.errored&&(Te._readableState.errored=B),Ne?e.nextTick(ce,Te,Ce,B,de):ce(Te,Ce,B,de)):(Ce.buffered.length>Ce.bufferedIndex&&be(Te,Ce),Ne?Ce.afterWriteTickInfo!==null&&Ce.afterWriteTickInfo.cb===de?Ce.afterWriteTickInfo.count++:(Ce.afterWriteTickInfo={count:1,cb:de,stream:Te,state:Ce},e.nextTick(Q,Ce.afterWriteTickInfo)):Y(Te,Ce,1,de))}function Q({stream:Te,state:B,count:Ce,cb:Ne}){return B.afterWriteTickInfo=null,Y(Te,B,Ce,Ne)}function Y(Te,B,Ce,Ne){for(!B.ending&&!Te.destroyed&&B.length===0&&B.needDrain&&(B.needDrain=!1,Te.emit("drain"));Ce-- >0;)B.pendingcb--,Ne();B.destroyed&&re(B),Re(Te,B)}function re(Te){if(Te.writing)return;for(let de=Te.bufferedIndex;de<Te.buffered.length;++de){var B;const{chunk:oe,callback:J}=Te.buffered[de],xe=Te.objectMode?1:oe.length;Te.length-=xe,J((B=Te.errored)!==null&&B!==void 0?B:new A("write"))}const Ce=Te[F].splice(0);for(let de=0;de<Ce.length;de++){var Ne;Ce[de]((Ne=Te.errored)!==null&&Ne!==void 0?Ne:new A("end"))}V(Te)}function be(Te,B){if(B.corked||B.bufferProcessing||B.destroyed||!B.constructed)return;const{buffered:Ce,bufferedIndex:Ne,objectMode:de}=B,oe=Ce.length-Ne;if(!oe)return;let J=Ne;if(B.bufferProcessing=!0,oe>1&&Te._writev){B.pendingcb-=oe-1;const xe=B.allNoop?ee:Se=>{for(let Ve=J;Ve<Ce.length;++Ve)Ce[Ve].callback(Se)},Le=B.allNoop&&J===0?Ce:t(Ce,J);Le.allBuffers=B.allBuffers,X(Te,B,!0,B.length,Le,"",xe),V(B)}else{do{const{chunk:xe,encoding:Le,callback:Se}=Ce[J];Ce[J++]=null;const Ve=de?1:xe.length;X(Te,B,!1,Ve,xe,Le,Se)}while(J<Ce.length&&!B.writing);J===Ce.length?V(B):J>256?(Ce.splice(0,J),B.bufferedIndex=0):B.bufferedIndex=J}B.bufferProcessing=!1}ae.prototype._write=function(Te,B,Ce){if(this._writev)this._writev([{chunk:Te,encoding:B}],Ce);else throw new x("_write()")},ae.prototype._writev=null,ae.prototype.end=function(Te,B,Ce){const Ne=this._writableState;typeof Te=="function"?(Ce=Te,Te=null,B=null):typeof B=="function"&&(Ce=B,B=null);let de;if(Te!=null){const oe=ie(this,Te,B);oe instanceof n&&(de=oe)}return Ne.corked&&(Ne.corked=1,this.uncork()),de||(!Ne.errored&&!Ne.ending?(Ne.ending=!0,Re(this,Ne,!0),Ne.ended=!0):Ne.finished?de=new O("end"):Ne.destroyed&&(de=new A("end"))),typeof Ce=="function"&&(de||Ne.finished?e.nextTick(Ce,de):Ne[F].push(Ce)),this};function _e(Te){return Te.ending&&!Te.destroyed&&Te.constructed&&Te.length===0&&!Te.errored&&Te.buffered.length===0&&!Te.finished&&!Te.writing&&!Te.errorEmitted&&!Te.closeEmitted}function Ie(Te,B){let Ce=!1;function Ne(de){if(Ce){W(Te,de??E());return}if(Ce=!0,B.pendingcb--,de){const oe=B[F].splice(0);for(let J=0;J<oe.length;J++)oe[J](de);W(Te,de,B.sync)}else _e(B)&&(B.prefinished=!0,Te.emit("prefinish"),B.pendingcb++,e.nextTick(ke,Te,B))}B.sync=!0,B.pendingcb++;try{Te._final(Ne)}catch(de){Ne(de)}B.sync=!1}function Pe(Te,B){!B.prefinished&&!B.finalCalled&&(typeof Te._final=="function"&&!B.destroyed?(B.finalCalled=!0,Ie(Te,B)):(B.prefinished=!0,Te.emit("prefinish")))}function Re(Te,B,Ce){_e(B)&&(Pe(Te,B),B.pendingcb===0&&(Ce?(B.pendingcb++,e.nextTick((Ne,de)=>{_e(de)?ke(Ne,de):de.pendingcb--},Te,B)):_e(B)&&(B.pendingcb++,ke(Te,B))))}function ke(Te,B){B.pendingcb--,B.finished=!0;const Ce=B[F].splice(0);for(let Ne=0;Ne<Ce.length;Ne++)Ce[Ne]();if(Te.emit("finish"),B.autoDestroy){const Ne=Te._readableState;(!Ne||Ne.autoDestroy&&(Ne.endEmitted||Ne.readable===!1))&&Te.destroy()}}i(ae.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Te){this._writableState&&(this._writableState.destroyed=Te)}},writable:{__proto__:null,get(){const Te=this._writableState;return!!Te&&Te.writable!==!1&&!Te.destroyed&&!Te.errored&&!Te.ending&&!Te.ended},set(Te){this._writableState&&(this._writableState.writable=!!Te)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Te=this._writableState;return Te?!Te.destroyed&&!Te.ending&&Te.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ze=g.destroy;ae.prototype.destroy=function(Te,B){const Ce=this._writableState;return!Ce.destroyed&&(Ce.bufferedIndex<Ce.buffered.length||Ce[F].length)&&e.nextTick(re,Ce),ze.call(this,Te,B),this},ae.prototype._undestroy=g.undestroy,ae.prototype._destroy=function(Te,B){B(Te)},ae.prototype[f.captureRejectionSymbol]=function(Te){this.destroy(Te)};let it;function Oe(){return it===void 0&&(it={}),it}return ae.fromWeb=function(Te,B){return Oe().newStreamWritableFromWritableStream(Te,B)},ae.toWeb=function(Te){return Oe().newWritableStreamFromStreamWritable(Te)},aS}var iS,fI;function kX(){if(fI)return iS;fI=1;const e=kd(),t=pc(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=Wl(),h=mc(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=fi(),{destroyer:b}=kh(),_=Ll(),S=kw(),x=ik(),{createDeferredPromise:E}=Ci(),C=Mj(),A=globalThis.Blob||t.Blob,O=typeof A<"u"?function(Z){return Z instanceof A}:function(Z){return!1},I=globalThis.AbortController||Lm().AbortController,{FunctionPrototypeCall:D}=Ur();class z extends _{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}iS=function F(Z,V){if(u(Z))return Z;if(o(Z))return ee({readable:Z});if(s(Z))return ee({writable:Z});if(i(Z))return ee({writable:!1,readable:!1});if(c(Z))return ee({readable:S.fromWeb(Z)});if(f(Z))return ee({writable:x.fromWeb(Z)});if(typeof Z=="function"){const{value:ie,write:te,final:X,destroy:ce}=W(Z);if(a(ie))return C(z,ie,{objectMode:!0,write:te,final:X,destroy:ce});const G=ie==null?void 0:ie.then;if(typeof G=="function"){let Q;const Y=D(G,ie,re=>{if(re!=null)throw new v("nully","body",re)},re=>{b(Q,re)});return Q=new z({objectMode:!0,readable:!1,write:te,final(re){X(async()=>{try{await Y,e.nextTick(re,null)}catch(be){e.nextTick(re,be)}})},destroy:ce})}throw new v("Iterable, AsyncIterable or AsyncFunction",V,ie)}if(O(Z))return F(Z.arrayBuffer());if(a(Z))return C(z,Z,{objectMode:!0,writable:!1});if(c(Z==null?void 0:Z.readable)&&f(Z==null?void 0:Z.writable))return z.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ie=Z!=null&&Z.readable?o(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:F(Z.readable):void 0,te=Z!=null&&Z.writable?s(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:F(Z.writable):void 0;return ee({readable:ie,writable:te})}const ae=Z==null?void 0:Z.then;if(typeof ae=="function"){let ie;return D(ae,Z,te=>{te!=null&&ie.push(te),ie.push(null)},te=>{b(ie,te)}),ie=new z({objectMode:!0,writable:!1,read(){}})}throw new g(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function W(F){let{promise:Z,resolve:V}=E();const ae=new I,ie=ae.signal;return{value:F(async function*(){for(;;){const X=Z;Z=null;const{chunk:ce,done:G,cb:Q}=await X;if(e.nextTick(Q),G)return;if(ie.aborted)throw new p(void 0,{cause:ie.reason});({promise:Z,resolve:V}=E()),yield ce}}(),{signal:ie}),write(X,ce,G){const Q=V;V=null,Q({chunk:X,done:!1,cb:G})},final(X){const ce=V;V=null,ce({done:!0,cb:X})},destroy(X,ce){ae.abort(),ce(X)}}}function ee(F){const Z=F.readable&&typeof F.readable.read!="function"?S.wrap(F.readable):F.readable,V=F.writable;let ae=!!n(Z),ie=!!r(V),te,X,ce,G,Q;function Y(re){const be=G;G=null,be?be(re):re&&Q.destroy(re)}return Q=new z({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:ae,writable:ie}),ie&&(h(V,re=>{ie=!1,re&&b(Z,re),Y(re)}),Q._write=function(re,be,_e){V.write(re,be)?_e():te=_e},Q._final=function(re){V.end(),X=re},V.on("drain",function(){if(te){const re=te;te=null,re()}}),V.on("finish",function(){if(X){const re=X;X=null,re()}})),ae&&(h(Z,re=>{ae=!1,re&&b(Z,re),Y(re)}),Z.on("readable",function(){if(ce){const re=ce;ce=null,re()}}),Z.on("end",function(){Q.push(null)}),Q._read=function(){for(;;){const re=Z.read();if(re===null){ce=Q._read;return}if(!Q.push(re))return}}),Q._destroy=function(re,be){!re&&G!==null&&(re=new p),ce=null,te=null,X=null,G===null?be(re):(G=be,b(V,re),b(Z,re))},Q}return iS}var oS,hI;function Ll(){if(hI)return oS;hI=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Ur();oS=o;const a=kw(),i=ik();r(o.prototype,a.prototype),r(o,a);{const f=n(i.prototype);for(let h=0;h<f.length;h++){const p=f[h];o.prototype[p]||(o.prototype[p]=i.prototype[p])}}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},o.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return o.from=function(f){return c||(c=kX()),c(f,"body")},oS}var sS,pI;function Pj(){if(pI)return sS;pI=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Ur();sS=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=fi().codes,r=Ll(),{getHighWaterMark:a}=Cw();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const f=c?a(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,f,h){throw new n("_transform()")},o.prototype._write=function(c,f,h){const p=this._readableState,g=this._writableState,v=p.length;this._transform(c,f,(b,_)=>{if(b){h(b);return}_!=null&&this.push(_),g.ended||v===p.length||p.length<p.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},sS}var lS,mI;function Fj(){if(mI)return lS;mI=1;const{ObjectSetPrototypeOf:e}=Ur();lS=n;const t=Pj();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},lS}var uS,gI;function ok(){if(gI)return uS;gI=1;const e=kd(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Ur(),i=mc(),{once:o}=Ci(),s=kh(),u=Ll(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=fi(),{validateFunction:_,validateAbortSignal:S}=N0(),{isIterable:x,isReadable:E,isReadableNodeStream:C,isNodeStream:A,isTransformStream:O,isWebStream:I,isReadableStream:D,isReadableFinished:z}=Wl(),W=globalThis.AbortController||Lm().AbortController;let ee,F,Z;function V(re,be,_e){let Ie=!1;re.on("close",()=>{Ie=!0});const Pe=i(re,{readable:be,writable:_e},Re=>{Ie=!Re});return{destroy:Re=>{Ie||(Ie=!0,s.destroyer(re,Re||new g("pipe")))},cleanup:Pe}}function ae(re){return _(re[re.length-1],"streams[stream.length - 1]"),re.pop()}function ie(re){if(x(re))return re;if(C(re))return te(re);throw new f("val",["Readable","Iterable","AsyncIterable"],re)}async function*te(re){F||(F=kw()),yield*F.prototype[r].call(re)}async function X(re,be,_e,{end:Ie}){let Pe,Re=null;const ke=Oe=>{if(Oe&&(Pe=Oe),Re){const Te=Re;Re=null,Te()}},ze=()=>new n((Oe,Te)=>{Pe?Te(Pe):Re=()=>{Pe?Te(Pe):Oe()}});be.on("drain",ke);const it=i(be,{readable:!1},ke);try{be.writableNeedDrain&&await ze();for await(const Oe of re)be.write(Oe)||await ze();Ie&&(be.end(),await ze()),_e()}catch(Oe){_e(Pe!==Oe?c(Pe,Oe):Oe)}finally{it(),be.off("drain",ke)}}async function ce(re,be,_e,{end:Ie}){O(be)&&(be=be.writable);const Pe=be.getWriter();try{for await(const Re of re)await Pe.ready,Pe.write(Re).catch(()=>{});await Pe.ready,Ie&&await Pe.close(),_e()}catch(Re){try{await Pe.abort(Re),_e(Re)}catch(ke){_e(ke)}}}function G(...re){return Q(re,o(ae(re)))}function Q(re,be,_e){if(re.length===1&&t(re[0])&&(re=re[0]),re.length<2)throw new p("streams");const Ie=new W,Pe=Ie.signal,Re=_e==null?void 0:_e.signal,ke=[];S(Re,"options.signal");function ze(){de(new b)}Z=Z||Ci().addAbortListener;let it;Re&&(it=Z(Re,ze));let Oe,Te;const B=[];let Ce=0;function Ne(Se){de(Se,--Ce===0)}function de(Se,Ve){var xt;if(Se&&(!Oe||Oe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Oe=Se),!(!Oe&&!Ve)){for(;B.length;)B.shift()(Oe);(xt=it)===null||xt===void 0||xt[a](),Ie.abort(),Ve&&(Oe||ke.forEach(ht=>ht()),e.nextTick(be,Oe,Te))}}let oe;for(let Se=0;Se<re.length;Se++){const Ve=re[Se],xt=Se<re.length-1,ht=Se>0,Et=xt||(_e==null?void 0:_e.end)!==!1,Lt=Se===re.length-1;if(A(Ve)){let Tt=function(Ut){Ut&&Ut.name!=="AbortError"&&Ut.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ne(Ut)};var Le=Tt;if(Et){const{destroy:Ut,cleanup:ge}=V(Ve,xt,ht);B.push(Ut),E(Ve)&&Lt&&ke.push(ge)}Ve.on("error",Tt),E(Ve)&&Lt&&ke.push(()=>{Ve.removeListener("error",Tt)})}if(Se===0)if(typeof Ve=="function"){if(oe=Ve({signal:Pe}),!x(oe))throw new h("Iterable, AsyncIterable or Stream","source",oe)}else x(Ve)||C(Ve)||O(Ve)?oe=Ve:oe=u.from(Ve);else if(typeof Ve=="function"){if(O(oe)){var J;oe=ie((J=oe)===null||J===void 0?void 0:J.readable)}else oe=ie(oe);if(oe=Ve(oe,{signal:Pe}),xt){if(!x(oe,!0))throw new h("AsyncIterable",`transform[${Se-1}]`,oe)}else{var xe;ee||(ee=Fj());const Tt=new ee({objectMode:!0}),Ut=(xe=oe)===null||xe===void 0?void 0:xe.then;if(typeof Ut=="function")Ce++,Ut.call(oe,q=>{Te=q,q!=null&&Tt.write(q),Et&&Tt.end(),e.nextTick(Ne)},q=>{Tt.destroy(q),e.nextTick(Ne,q)});else if(x(oe,!0))Ce++,X(oe,Tt,Ne,{end:Et});else if(D(oe)||O(oe)){const q=oe.readable||oe;Ce++,X(q,Tt,Ne,{end:Et})}else throw new h("AsyncIterable or Promise","destination",oe);oe=Tt;const{destroy:ge,cleanup:N}=V(oe,!1,!0);B.push(ge),Lt&&ke.push(N)}}else if(A(Ve)){if(C(oe)){Ce+=2;const Tt=Y(oe,Ve,Ne,{end:Et});E(Ve)&&Lt&&ke.push(Tt)}else if(O(oe)||D(oe)){const Tt=oe.readable||oe;Ce++,X(Tt,Ve,Ne,{end:Et})}else if(x(oe))Ce++,X(oe,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=Ve}else if(I(Ve)){if(C(oe))Ce++,ce(ie(oe),Ve,Ne,{end:Et});else if(D(oe)||x(oe))Ce++,ce(oe,Ve,Ne,{end:Et});else if(O(oe))Ce++,ce(oe.readable,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=Ve}else oe=u.from(Ve)}return(Pe!=null&&Pe.aborted||Re!=null&&Re.aborted)&&e.nextTick(ze),oe}function Y(re,be,_e,{end:Ie}){let Pe=!1;if(be.on("close",()=>{Pe||_e(new v)}),re.pipe(be,{end:!1}),Ie){let ke=function(){Pe=!0,be.end()};var Re=ke;z(re)?e.nextTick(ke):re.once("end",ke)}else _e();return i(re,{readable:!0,writable:!1},ke=>{const ze=re._readableState;ke&&ke.code==="ERR_STREAM_PREMATURE_CLOSE"&&ze&&ze.ended&&!ze.errored&&!ze.errorEmitted?re.once("end",_e).once("error",_e):_e(ke)}),i(be,{readable:!1,writable:!0},_e)}return uS={pipelineImpl:Q,pipeline:G},uS}var cS,yI;function Lj(){if(yI)return cS;yI=1;const{pipeline:e}=ok(),t=Ll(),{destroyer:n}=kh(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:c}=Wl(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:p}}=fi(),g=mc();return cS=function(...b){if(b.length===0)throw new p("streams");if(b.length===1)return t.from(b[0]);const _=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const ee=b.length-1;b[ee]=t.from(b[ee])}for(let ee=0;ee<b.length;++ee)if(!(!r(b[ee])&&!o(b[ee]))){if(ee<b.length-1&&!(a(b[ee])||c(b[ee])||s(b[ee])))throw new h(`streams[${ee}]`,_[ee],"must be readable");if(ee>0&&!(i(b[ee])||u(b[ee])||s(b[ee])))throw new h(`streams[${ee}]`,_[ee],"must be writable")}let S,x,E,C,A;function O(ee){const F=C;C=null,F?F(ee):ee?A.destroy(ee):!W&&!z&&A.destroy()}const I=b[0],D=e(b,O),z=!!(i(I)||u(I)||s(I)),W=!!(a(D)||c(D)||s(D));if(A=new t({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(D!=null&&D.readableObjectMode),writable:z,readable:W}),z){if(r(I))A._write=function(F,Z,V){I.write(F,Z)?V():S=V},A._final=function(F){I.end(),x=F},I.on("drain",function(){if(S){const F=S;S=null,F()}});else if(o(I)){const Z=(s(I)?I.writable:I).getWriter();A._write=async function(V,ae,ie){try{await Z.ready,Z.write(V).catch(()=>{}),ie()}catch(te){ie(te)}},A._final=async function(V){try{await Z.ready,Z.close().catch(()=>{}),x=V}catch(ae){V(ae)}}}const ee=s(D)?D.readable:D;g(ee,()=>{if(x){const F=x;x=null,F()}})}if(W){if(r(D))D.on("readable",function(){if(E){const ee=E;E=null,ee()}}),D.on("end",function(){A.push(null)}),A._read=function(){for(;;){const ee=D.read();if(ee===null){E=A._read;return}if(!A.push(ee))return}};else if(o(D)){const F=(s(D)?D.readable:D).getReader();A._read=async function(){for(;;)try{const{value:Z,done:V}=await F.read();if(!A.push(Z))return;if(V){A.push(null);return}}catch{return}}}}return A._destroy=function(ee,F){!ee&&C!==null&&(ee=new f),E=null,S=null,x=null,C===null?F(ee):(C=F,r(D)&&n(D,ee))},A},cS}var bI;function AX(){if(bI)return zy;bI=1;const e=globalThis.AbortController||Lm().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=fi(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=N0(),c=Ur().Symbol("kWeak"),f=Ur().Symbol("kResistStopPropagation"),{finished:h}=mc(),p=Lj(),{addAbortSignalNoValidate:g}=Ew(),{isWritable:v,isNodeStream:b}=Wl(),{deprecate:_}=Ci(),{ArrayPrototypePush:S,Boolean:x,MathFloor:E,Number:C,NumberIsNaN:A,Promise:O,PromiseReject:I,PromiseResolve:D,PromisePrototypeThen:z,Symbol:W}=Ur(),ee=W("kEmpty"),F=W("kEof");function Z(Re,ke){if(ke!=null&&u(ke,"options"),(ke==null?void 0:ke.signal)!=null&&o(ke.signal,"options.signal"),b(Re)&&!v(Re))throw new t("stream",Re,"must be writable");const ze=p(this,Re);return ke!=null&&ke.signal&&g(ke.signal,ze),ze}function V(Re,ke){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);ke!=null&&u(ke,"options"),(ke==null?void 0:ke.signal)!=null&&o(ke.signal,"options.signal");let ze=1;(ke==null?void 0:ke.concurrency)!=null&&(ze=E(ke.concurrency));let it=ze-1;return(ke==null?void 0:ke.highWaterMark)!=null&&(it=E(ke.highWaterMark)),s(ze,"options.concurrency",1),s(it,"options.highWaterMark",0),it+=ze,(async function*(){const Te=Ci().AbortSignalAny([ke==null?void 0:ke.signal].filter(x)),B=this,Ce=[],Ne={signal:Te};let de,oe,J=!1,xe=0;function Le(){J=!0,Se()}function Se(){xe-=1,Ve()}function Ve(){oe&&!J&&xe<ze&&Ce.length<it&&(oe(),oe=null)}async function xt(){try{for await(let ht of B){if(J)return;if(Te.aborted)throw new i;try{if(ht=Re(ht,Ne),ht===ee)continue;ht=D(ht)}catch(Et){ht=I(Et)}xe+=1,z(ht,Se,Le),Ce.push(ht),de&&(de(),de=null),!J&&(Ce.length>=it||xe>=ze)&&await new O(Et=>{oe=Et})}Ce.push(F)}catch(ht){const Et=I(ht);z(Et,Se,Le),Ce.push(Et)}finally{J=!0,de&&(de(),de=null)}}xt();try{for(;;){for(;Ce.length>0;){const ht=await Ce[0];if(ht===F)return;if(Te.aborted)throw new i;ht!==ee&&(yield ht),Ce.shift(),Ve()}await new O(ht=>{de=ht})}}finally{J=!0,oe&&(oe(),oe=null)}}).call(this)}function ae(Re=void 0){return Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal"),(async function*(){let ze=0;for await(const Oe of this){var it;if(Re!=null&&(it=Re.signal)!==null&&it!==void 0&&it.aborted)throw new i({cause:Re.signal.reason});yield[ze++,Oe]}}).call(this)}async function ie(Re,ke=void 0){for await(const ze of G.call(this,Re,ke))return!0;return!1}async function te(Re,ke=void 0){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);return!await ie.call(this,async(...ze)=>!await Re(...ze),ke)}async function X(Re,ke){for await(const ze of G.call(this,Re,ke))return ze}async function ce(Re,ke){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function ze(it,Oe){return await Re(it,Oe),ee}for await(const it of V.call(this,ze,ke));}function G(Re,ke){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function ze(it,Oe){return await Re(it,Oe)?it:ee}return V.call(this,ze,ke)}class Q extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Y(Re,ke,ze){var it;if(typeof Re!="function")throw new n("reducer",["Function","AsyncFunction"],Re);ze!=null&&u(ze,"options"),(ze==null?void 0:ze.signal)!=null&&o(ze.signal,"options.signal");let Oe=arguments.length>1;if(ze!=null&&(it=ze.signal)!==null&&it!==void 0&&it.aborted){const de=new i(void 0,{cause:ze.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(de)),de}const Te=new e,B=Te.signal;if(ze!=null&&ze.signal){const de={once:!0,[c]:this,[f]:!0};ze.signal.addEventListener("abort",()=>Te.abort(),de)}let Ce=!1;try{for await(const de of this){var Ne;if(Ce=!0,ze!=null&&(Ne=ze.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new i;Oe?ke=await Re(ke,de,{signal:B}):(ke=de,Oe=!0)}if(!Ce&&!Oe)throw new Q}finally{Te.abort()}return ke}async function re(Re){Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal");const ke=[];for await(const it of this){var ze;if(Re!=null&&(ze=Re.signal)!==null&&ze!==void 0&&ze.aborted)throw new i(void 0,{cause:Re.signal.reason});S(ke,it)}return ke}function be(Re,ke){const ze=V.call(this,Re,ke);return(async function*(){for await(const Oe of ze)yield*Oe}).call(this)}function _e(Re){if(Re=C(Re),A(Re))return 0;if(Re<0)throw new a("number",">= 0",Re);return Re}function Ie(Re,ke=void 0){return ke!=null&&u(ke,"options"),(ke==null?void 0:ke.signal)!=null&&o(ke.signal,"options.signal"),Re=_e(Re),(async function*(){var it;if(ke!=null&&(it=ke.signal)!==null&&it!==void 0&&it.aborted)throw new i;for await(const Te of this){var Oe;if(ke!=null&&(Oe=ke.signal)!==null&&Oe!==void 0&&Oe.aborted)throw new i;Re--<=0&&(yield Te)}}).call(this)}function Pe(Re,ke=void 0){return ke!=null&&u(ke,"options"),(ke==null?void 0:ke.signal)!=null&&o(ke.signal,"options.signal"),Re=_e(Re),(async function*(){var it;if(ke!=null&&(it=ke.signal)!==null&&it!==void 0&&it.aborted)throw new i;for await(const Te of this){var Oe;if(ke!=null&&(Oe=ke.signal)!==null&&Oe!==void 0&&Oe.aborted)throw new i;if(Re-- >0&&(yield Te),Re<=0)return}}).call(this)}return zy.streamReturningOperators={asIndexedPairs:_(ae,"readable.asIndexedPairs will be removed in a future version."),drop:Ie,filter:G,flatMap:be,map:V,take:Pe,compose:Z},zy.promiseReturningOperators={every:te,forEach:ce,reduce:Y,toArray:re,some:ie,find:X},zy}var dS,vI;function $j(){if(vI)return dS;vI=1;const{ArrayPrototypePop:e,Promise:t}=Ur(),{isIterable:n,isNodeStream:r,isWebStream:a}=Wl(),{pipelineImpl:i}=ok(),{finished:o}=mc();Bj();function s(...u){return new t((c,f)=>{let h,p;const g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(u);h=v.signal,p=v.end}i(u,(v,b)=>{v?f(v):c(b)},{signal:h,end:p})})}return dS={finished:o,pipeline:s},dS}var wI;function Bj(){if(wI)return zx.exports;wI=1;const{Buffer:e}=pc(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Ur(),{promisify:{custom:a}}=Ci(),{streamReturningOperators:i,promiseReturningOperators:o}=AX(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=fi(),u=Lj(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=Cw(),{pipeline:h}=ok(),{destroyer:p}=kh(),g=mc(),v=$j(),b=Wl(),_=zx.exports=rk().Stream;_.isDestroyed=b.isDestroyed,_.isDisturbed=b.isDisturbed,_.isErrored=b.isErrored,_.isReadable=b.isReadable,_.isWritable=b.isWritable,_.Readable=kw();for(const E of n(i)){let A=function(...O){if(new.target)throw s();return _.Readable.from(r(C,this,O))};var x=A;const C=i[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let A=function(...I){if(new.target)throw s();return r(C,this,I)};var x=A;const C=o[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}_.Writable=ik(),_.Duplex=Ll(),_.Transform=Pj(),_.PassThrough=Fj(),_.pipeline=h;const{addAbortSignal:S}=Ew();return _.addAbortSignal=S,_.finished=g,_.destroy=p,_.compose=u,_.setDefaultHighWaterMark=c,_.getDefaultHighWaterMark=f,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},zx.exports}var _I;function TX(){return _I||(_I=1,function(e){const t=Bj(),n=$j(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(Bx)),Bx.exports}var zj=TX();class sk extends zj.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new qe(st.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new qe(st.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class lk extends zj.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Ka(new qe(st.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Ka(new qe(st.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new qe(st.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new qe(st.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new qe(st.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Eo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Co=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Za{get position(){return this.flag&ld?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=ei(t,n);Object.assign(this,yd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&vw||this.inode.flags&xi.Sync)}_emitChange(){La(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw qe.With("EBADF",this.path,"chown");this.dirty=!0,bj(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=fc(t,-1);if(n<0)throw new qe(st.EINVAL,"Invalid mode");if(this.closed)throw qe.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>br?-61441:br)|n,(this._isSync||n>br)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw qe.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw qe.With("EBADF",this.path,"truncate");if(t<0)throw new qe(st.EINVAL);if(this.dirty=!0,!(this.flag&Wa||this.flag&Rl))throw new qe(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw qe.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Bb(t),this.inode.mtimeMs=Bb(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Nl(n,"utf8","a",420);if(!(Il(r.flag)&ld))throw new qe(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new qe(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Rr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw qe.With("EBADF",this.path,"read");if(this.flag&Wa)throw new qe(st.EPERM,"File not opened with a readable mode");this.inode.flags&xi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Mm(this.inode)&&!jm(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Nl(t,null,"r",292);if(Il(n.flag)&Wa)throw new qe(st.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Rr.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw qe.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw qe.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&xi.Immutable)throw new qe(st.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Wa)throw qe.With("EBADF",this.path,"readLines");return WY({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw qe.With("EBADF",this.path,"stat");if(!ir(this.context,this.inode,pa))throw qe.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Sd(this.inode):new Gl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw qe.With("EBADF",this.path,"write");if(this.inode.flags&xi.Immutable)throw new qe(st.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Wa||this.flag&Rl))throw new qe(st.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Mm(this.inode)&&!jm(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Rr.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const u=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:u}}async writeFile(t,n={}){const r=Nl(n,"utf8","w",420),a=Il(r.flag);if(!(a&Wa||a&Rl))throw new qe(st.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new qe(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Rr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw qe.With("EBADF",this.path,"close");await this.sync(),this.dispose(),xj(this.context,this.fd)}dispose(t){if(this.closed)throw qe.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw qe.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Wa)throw qe.With("EBADF",this.path,"createReadStream");return new sk(t,this)}createWriteStream(t={}){if(this.closed)throw qe.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&xi.Immutable)throw new qe(st.EPERM,"File is immutable",this.path,"createWriteStream");return new lk(t,this)}}async function uk(e,t){e=ln(e),t=ln(t);const n=Mn(e,this),r=Mn(t,this);if(!(await xo.call(this,Xn(e))).hasAccess(Wr,this))throw qe.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),La(this,"rename",e.toString()),La(this,"change",t.toString());return}await j0.call(this,t,await D0(e)),await O0.call(this,e),La(this,"rename",e.toString())}catch(a){throw or(a,{[n.path]:e,[r.path]:t})}}async function I0(e){try{const{fs:t,path:n}=Mn(await yc.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof qe&&t.code=="ENOENT")return!1;throw t}}async function xo(e,t){e=ln(e);const{fs:n,path:r}=Mn(await yc.call(this,e),this);try{const a=await n.stat(r);if(ma&&!ir(this,a,pa))throw qe.With("EACCES",r,"stat");return t!=null&&t.bigint?new Sd(a):new Gl(a)}catch(a){throw or(a,{[r]:e})}}async function Aw(e,t){e=ln(e);const{fs:n,path:r}=Mn(e,this);try{const a=await n.stat(r);if(ma&&!ir(this,a,pa))throw qe.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Sd(a):new Gl(a)}catch(a){throw or(a,{[r]:e})}}async function Uj(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await ko.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function O0(e){e=ln(e);const{fs:t,path:n}=Mn(e,this);try{if(ma&&!ir(this,await t.stat(n),Wr))throw qe.With("EACCES",n,"unlink");await t.unlink(n),La(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function Ah(e,t,n){var r;t=ln(t);const a=fc(n.mode,420),i=Il(n.flag),{fullPath:o,fs:s,path:u,stats:c}=await Hb(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&gw))throw qe.With("ENOENT",o,"_open");const h=await s.stat(Xn(u));if(!ir(e,h,Wr))throw qe.With("EACCES",Xn(o),"_open");if(!Zo(h))throw qe.With("ENOTDIR",Xn(o),"_open");const{euid:p,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:ts.credentials,v=await s.createFile(u,{mode:a,uid:h.mode&k0?h.uid:p,gid:h.mode&A0?h.gid:g});return new Za(e,Ub(new zb(e,t,s,u,i,v)))}if(!ir(e,c,Sj(i)))throw qe.With("EACCES",o,"_open");if(i&yw)throw qe.With("EEXIST",o,"_open");const f=new Za(e,Ub(new zb(e,t,s,u,i,c)));return i&bw&&await f.truncate(0),f}async function ko(e,t="r",n=420){return await Ah(this,e,{flag:t,mode:n})}async function D0(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nl(t,null,"r",292);return await Eo(n,typeof e=="object"&&"fd"in e?e:await ko.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function j0(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Nl(n,"utf8","w+",420),i=Eo(r,e instanceof Za?e:await ko.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new qe(st.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function qj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Nl(n,"utf8","a",420);if(!(Il(a.flag)&ld))throw new qe(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new qe(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Rr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Eo(r,typeof e=="object"&&"fd"in e?e:await ko.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function ck(e){e=await yc.call(this,e);const{fs:t,path:n}=Mn(e,this);try{const r=await t.stat(n);if(!r)throw qe.With("ENOENT",e,"rmdir");if(!Zo(r))throw qe.With("ENOTDIR",n,"rmdir");if(ma&&!ir(this,r,Wr))throw qe.With("EACCES",n,"rmdir");await t.rmdir(n),La(this,"rename",e.toString())}catch(r){throw or(r,{[n]:e})}}async function M0(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:ts.credentials;t=typeof t=="object"?t:{mode:t};const o=fc(t==null?void 0:t.mode,511);e=await yc.call(this,e);const{fs:s,path:u,root:c}=Mn(e,this),f={[u]:e},h=async(p,g)=>{if(!ir(this,g,Wr))throw qe.With("EACCES",Xn(p),"mkdir");const v=await s.mkdir(p,{mode:o,uid:g.mode&k0?g.uid:a,gid:g.mode&A0?g.gid:i});return La(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){await h(u,await s.stat(Xn(u)));return}const p=[];for(let v=u,b=e;!await s.exists(v);v=Xn(v),b=Xn(b))p.unshift(v),f[v]=b;if(!p.length)return;const g=[await s.stat(Xn(p[0]))];for(const[v,b]of p.entries())g.push(await h(b,g[v]));return c.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(c.length)}catch(p){throw or(p,f)}}async function gc(e,t){t=typeof t=="object"?t:{encoding:t},e=await yc.call(this,e);const{fs:n,path:r}=Mn(e,this),a=await n.stat(r).catch(u=>ur(or(u,{[r]:e})));if(!a)throw qe.With("ENOENT",e,"readdir");if(!ir(this,a,pa))throw qe.With("EACCES",e,"readdir");if(!Zo(a))throw qe.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(u=>ur(or(u,{[r]:e}))),o=[],s=async u=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(tr(r,u)).catch(f=>{if(f.code!="ENOENT")throw or(f,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?o.push(new Fm(u,c)):(t==null?void 0:t.encoding)=="buffer"?o.push(Rr.from(u)):o.push(u),!(!(t!=null&&t.recursive)||!Zo(c))))for(const f of await gc.call(this,tr(e,u),t))f instanceof Fm?(f.path=tr(u,f.path),o.push(f)):Rr.isBuffer(f)?o.push(Rr.from(tr(u,DC(f)))):o.push(tr(u,f))};return await Promise.all(i.map(s)),o}async function Hj(e,t){e=ln(e),t=ln(t);const{fs:n,path:r}=Mn(e,this),a=Mn(t,this);if(n!=a.fs)throw qe.With("EXDEV",t,"link");try{if(ma&&!ir(this,await n.stat(Xn(r)),pa))throw qe.With("EACCES",Xn(r),"link");if(ma&&!(await xo.call(this,Xn(t))).hasAccess(Wr,this))throw qe.With("EACCES",Xn(t),"link");if(ma&&!ir(this,await n.stat(r),pa))throw qe.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw or(i,{[a.path]:t,[r]:e})}}async function Vj(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new qe(st.EINVAL,"Invalid symlink type: "+n);if(t=ln(t),await I0.call(this,t))throw qe.With("EEXIST",t,"symlink");const a=Eo(r,await Ah(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(ln(e,!0)),await a.chmod(Vl)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function qb(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Eo(n,await Ah(this,ln(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function Gj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await ko.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function Wj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await Ah(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function Kj(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await ko.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function Zj(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Eo(n,await Ah(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Co(n);r&&await r}}async function dk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await ko.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function Yj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Eo(r,await Ah(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Co(r);a&&await a}}async function Hb(e,t,n){if(n){const u=Mn(t,e),c=await u.fs.stat(u.path).catch(()=>{});return{...u,fullPath:t,stats:c}}try{const u=Mn(t,e),c=await u.fs.stat(u.path);if(!eh(c))return{...u,fullPath:t,stats:c};const f=Fl.call(e,Xn(t),(await qb.call(e,t)).toString());return await Hb(e,f)}catch{}const{base:r,dir:a}=Es(t),i=a=="/"?"/":await yc.call(e,a),o=tr(i,r),s=Mn(o,e);try{const u=await s.fs.stat(s.path);if(!eh(u))return{...s,fullPath:o,stats:u};const c=Fl.call(e,i,(await qb.call(e,o)).toString());return await Hb(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw or(u,{[s.path]:o})}}async function yc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=await Hb(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Rr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function RX(e,t={}){const n=new Aj(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var u;(u=r.shift())===null||u===void 0||u({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function Xj(e,t=BC){if(!(await xo.call(this,e)).hasAccess(t,this))throw new qe(st.EACCES)}async function P0(e,t){e=ln(e);const n=await Aw.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&br){case ia:if(t!=null&&t.recursive)for(const r of await gc.call(this,e))await P0.call(this,tr(e,r),t);await ck.call(this,e);break;case qo:case Vl:case wd:case _d:await O0.call(this,e);break;case xd:case vd:default:throw new qe(st.EPERM,"File type not supported",e,"rm")}}async function Jj(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await M0.call(this,a),n=="buffer"?Rr.from(a):a}async function fk(e,t,n){if(e=ln(e),t=ln(t),n&&n&zC&&await I0.call(this,t))throw new qe(st.EEXIST,"Destination file already exists",t,"copyFile");await j0.call(this,t,await D0.call(this,e)),La(this,"rename",t.toString())}function Qj(e,t){return e=ln(e),Promise.resolve(new nk(e,this))}async function hk(e,t,n){e=ln(e),t=ln(t);const r=await Aw.call(this,e);if(n!=null&&n.errorOnExist&&await I0.call(this,t))throw new qe(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&br){case ia:{if(!(n!=null&&n.recursive))throw new qe(st.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([gc.call(this,e,{withFileTypes:!0}),M0.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(tr(e,o.name),tr(t,o.name))||await hk.call(this,tr(e,o.name),tr(t,o.name),n)};await Promise.all(a.map(i));break}case qo:case Vl:await fk.call(this,e,t);break;case wd:case _d:case xd:case vd:default:throw new qe(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await dk.call(this,t,r.atime,r.mtime)}async function eM(e,t){e=ln(e);const{fs:n}=Mn(e,this);return Promise.resolve(Cj(n,t==null?void 0:t.bigint))}function tM(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const u=await gc(s,{withFileTypes:r,encoding:"utf8"});for(const c of u){const f=r?c.path:s+"/"+c;a(r?c:f)||((await xo(f)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(f)),i.some(h=>h.test(f.replace(/^\/+/g,"")))&&(yield r?c:f.replace(/^\/+/g,"")))}}return o(n)}const NX=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Za,access:Xj,appendFile:qj,chmod:Kj,chown:Gj,constants:gj,copyFile:fk,cp:hk,exists:I0,glob:tM,lchmod:Zj,lchown:Wj,link:Hj,lstat:Aw,lutimes:Yj,mkdir:M0,mkdtemp:Jj,open:ko,opendir:Qj,readFile:D0,readdir:gc,readlink:qb,realpath:yc,rename:uk,rm:P0,rmdir:ck,stat:xo,statfs:eM,symlink:Vj,truncate:Uj,unlink:O0,utimes:dk,watch:RX,writeFile:j0},Symbol.toStringTag,{value:"Module"})),En=()=>{};async function IX(e){const t=[];for await(const n of e)t.push(n);return t}function OX(e,t,n=En){uk.call(this,e,t).then(()=>n()).catch(n)}function DX(e,t=En){I0.call(this,e).then(t).catch(()=>t(!1))}function jX(e,t,n=En){n=typeof t=="function"?t:n,xo.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function MX(e,t,n=En){n=typeof t=="function"?t:n,Aw.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function PX(e,t=0,n=En){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;Uj.call(this,e,r).then(()=>n()).catch(n)}function FX(e,t=En){O0.call(this,e).then(()=>t()).catch(t)}function LX(e,t,n,r=En){const a=fc(n,420);r=typeof n=="function"?n:r,ko.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function $X(e,t,n=En){n=typeof t=="function"?t:n,D0.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function BX(e,t,n,r=En){r=typeof n=="function"?n:r,j0.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function zX(e,t,n,r=En){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,qj.call(this,e,t,a).then(()=>r()).catch(r)}function UX(e,t,n=En){n=typeof t=="function"?t:n,new Za(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Sd(r):r)).catch(n)}function qX(e,t=En){new Za(this,e).close().then(()=>t()).catch(t)}function HX(e,t,n=En){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new Za(this,e);if(r<0)throw new qe(st.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function VX(e,t=En){new Za(this,e).sync().then(()=>t()).catch(t)}function GX(e,t=En){new Za(this,e).datasync().then(()=>t()).catch(t)}function WX(e,t,n,r,a,i=En){let o,s,u,c,f;const h=new Za(this,e);if(typeof t=="string"){switch(f="utf8",typeof n){case"function":i=n;break;case"number":c=n,f=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new qe(st.EINVAL,"Invalid arguments"));return}o=Rr.from(t),s=0,u=o.length;const p=i;h.write(o,s,u,c).then(({bytesWritten:g})=>p(void 0,g,o.toString(f))).catch(p)}else{o=Rr.from(t.buffer),s=n,u=r,c=typeof a=="number"?a:null;const p=typeof a=="function"?a:i;h.write(o,s,u,c).then(({bytesWritten:g})=>p(void 0,g,o)).catch(p)}}function KX(e,t,n,r,a,i=En){new Za(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function ZX(e,t,n,r=En){new Za(this,e).chown(t,n).then(()=>r()).catch(r)}function YX(e,t,n){new Za(this,e).chmod(t).then(()=>n()).catch(n)}function XX(e,t,n,r=En){new Za(this,e).utimes(t,n).then(()=>r()).catch(r)}function JX(e,t=En){ck.call(this,e).then(()=>t()).catch(t)}function QX(e,t,n=En){M0.call(this,e,t).then(()=>n()).catch(n)}function eJ(e,t,n=En){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};gc.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function tJ(e,t,n=En){Hj.call(this,e,t).then(()=>n()).catch(n)}function nJ(e,t,n,r=En){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,Vj.call(this,e,t,a).then(()=>r()).catch(r)}function rJ(e,t,n=En){n=typeof t=="function"?t:n,qb.call(this,e).then(r=>n(void 0,r)).catch(n)}function aJ(e,t,n,r=En){Gj.call(this,e,t,n).then(()=>r()).catch(r)}function iJ(e,t,n,r=En){Wj.call(this,e,t,n).then(()=>r()).catch(r)}function oJ(e,t,n=En){Kj.call(this,e,t).then(()=>n()).catch(n)}function sJ(e,t,n=En){Zj.call(this,e,t).then(()=>n()).catch(n)}function lJ(e,t,n,r=En){dk.call(this,e,t,n).then(()=>r()).catch(r)}function uJ(e,t,n,r=En){Yj.call(this,e,t,n).then(()=>r()).catch(r)}function cJ(e,t,n=En){n=typeof t=="function"?t:n,yc.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function dJ(e,t,n=En){const r=typeof t=="number"?t:pa;n=typeof t=="function"?t:n,Xj.call(this,e,r).then(()=>n()).catch(n)}const Mf=new Map;function fJ(e,t,n){const r=ln(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new qe(st.EINVAL,"No listener specified",e.toString(),"watchFile");if(Mf.has(r)){const o=Mf.get(r);o&&o.listeners.add(n);return}const i=new JY(this,r,a);i.on("change",(o,s)=>{const u=Mf.get(r);if(u)for(const c of u.listeners)c(o,s)}),Mf.set(r,{watcher:i,listeners:new Set})}function hJ(e,t=En){const n=ln(e),r=Mf.get(n);r&&(t&&t!==En?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Mf.delete(n)))}function pJ(e,t,n){const r=new Aj(this,ln(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||En),r}function mJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=ko.call(this,e,"r",t==null?void 0:t.mode);return new sk({...t,autoClose:!0},n)}function gJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=ko.call(this,e,"w",t==null?void 0:t.mode);return new lk(t,n)}function yJ(e,t,n=En){n=typeof t=="function"?t:n,P0.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function bJ(e,t,n=En){n=typeof t=="function"?t:n,Jj.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function vJ(e,t,n,r=En){r=typeof n=="function"?n:r,fk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function wJ(e,t,n,r=En){r=typeof n=="function"?n:r,new Za(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function _J(e,t,n,r=En){r=typeof n=="function"?n:r,new Za(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function xJ(e,t,n=En){n=typeof t=="function"?t:n,Qj.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function SJ(e,t,n,r=En){r=typeof n=="function"?n:r,hk.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function EJ(e,t,n=En){n=typeof t=="function"?t:n,eM.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function CJ(e,t){const n=await ko.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function kJ(e,t,n=En){n=typeof t=="function"?t:n;const r=tM.call(this,e,typeof t=="function"?void 0:t);IX(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Vc=function(e,t,n,r,a,i){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(S){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(S||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},zi=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},AJ=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Vb;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Vb||(Vb={}));let nM=(()=>{var e,t,n,r,a;let i=[bd()],o,s=[],u,c,f=[],h=[],p,g=[],v=[],b,_=[],S=[],x,E=[],C=[],A,O=[],I=[],D,z=[],W=[];return u=class{constructor(ee=ur(new qe(st.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=zi(this,f,0),this.extsize=(zi(this,h),zi(this,g,0)),this.nextents=(zi(this,v),zi(this,_,0)),this.projid=(zi(this,S),zi(this,E,0)),this.cowextsize=(zi(this,C),zi(this,O,0)),this.pad=(zi(this,I),zi(this,z,[])),zi(this,W),this.extsize=ee.size,this.nextents=1,this.projid=ee.uid,this.cowextsize=ee.size;for(const F of Object.keys(xi))ee.flags&xi[F]&&F in Vb&&(this.xflags|=Vb[F])}},AJ(u,"fsxattr"),(()=>{const ee=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=gn).uint32.bind(e)],p=[(t=gn).uint32.bind(t)],b=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],A=[(a=gn).uint32.bind(a)],D=[gn.char(8)],Vc(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:F=>"xflags"in F,get:F=>F.xflags,set:(F,Z)=>{F.xflags=Z}},metadata:ee},f,h),Vc(null,null,p,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:F=>"extsize"in F,get:F=>F.extsize,set:(F,Z)=>{F.extsize=Z}},metadata:ee},g,v),Vc(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:F=>"nextents"in F,get:F=>F.nextents,set:(F,Z)=>{F.nextents=Z}},metadata:ee},_,S),Vc(null,null,x,{kind:"field",name:"projid",static:!1,private:!1,access:{has:F=>"projid"in F,get:F=>F.projid,set:(F,Z)=>{F.projid=Z}},metadata:ee},E,C),Vc(null,null,A,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:F=>"cowextsize"in F,get:F=>F.cowextsize,set:(F,Z)=>{F.cowextsize=Z}},metadata:ee},O,I),Vc(null,null,D,{kind:"field",name:"pad",static:!1,private:!1,access:{has:F=>"pad"in F,get:F=>F.pad,set:(F,Z)=>{F.pad=Z}},metadata:ee},z,W),Vc(null,o={value:u},i,{kind:"class",name:u.name,metadata:ee},null,s),u=o.value,ee&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ee}),zi(u,s)})(),u})();var Dr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Dr||(Dr={}));var $o;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})($o||($o={}));async function TJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Mn(e,this);try{const i=new aa(await r.stat(a));switch(t){case Dr.GetFlags:case $o.GetFlags:return i.flags;case Dr.SetFlags:case $o.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Dr.GetVersion:case $o.GetVersion:return i.version;case Dr.SetVersion:case $o.SetVersion:i.version=n[0],await r.touch(a,i);return;case Dr.Fiemap:break;case Dr.GetXattr:return new nM(i);case Dr.SetXattr:break;case Dr.GetLabel:return r.label;case Dr.SetLabel:r.label=n[0];return;case Dr.GetUUID:return r.uuid;case Dr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new qe(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function RJ(e,t,...n){e=ln(e);const{fs:r,path:a}=Mn(e,this);try{const i=new aa(r.statSync(a));switch(t){case Dr.GetFlags:case $o.GetFlags:return i.flags;case Dr.SetFlags:case $o.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Dr.GetVersion:case $o.GetVersion:return i.version;case Dr.SetVersion:case $o.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Dr.Fiemap:break;case Dr.GetXattr:return new nM(i);case Dr.SetXattr:break;case Dr.GetLabel:return r.label;case Dr.SetLabel:r.label=n[0];return;case Dr.GetUUID:return r.uuid;case Dr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw or(i,{[a]:e})}throw new qe(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const NJ=[];function Th(e,t,n,r){if(!t.startsWith("user.")&&!NJ.includes(t))throw new qe(st.EPERM,"Only attributes in the user namespace are supported",n,r)}async function IJ(e,t,n={}){var r;e=ln(e);const{fs:a,path:i}=Mn(e,this);Th(this,t,e,"xattr.get");try{const o=await a.stat(i);if(ma&&!ir(this,o,pa))throw qe.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Ku);const s=o.attributes.get(t);if(!s)throw qe.With("ENODATA",i,"xattr.get");const u=Rr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}function OJ(e,t,n={}){var r;e=ln(e),Th(this,t,e,"xattr.get");const{fs:a,path:i}=Mn(e,this);try{const o=a.statSync(i);if(ma&&!ir(this,o,pa))throw qe.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Ku);const s=o.attributes.get(t);if(!s)throw qe.With("ENODATA",i,"xattr.get");const u=Rr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw or(o,{[i]:e})}}async function DJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Mn(e,this);Th(this,t,e,"xattr.set");try{const s=await i.stat(o);if(ma&&!ir(this,s,Wr))throw qe.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Ku);const u=s.attributes.get(t);if(r.create&&u)throw qe.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw qe.With("ENODATA",o,"xattr.set");s.attributes.set(t,Rr.from(n)),await i.touch(o,yd(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}function jJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=Mn(e,this);Th(this,t,e,"xattr.set");try{const s=i.statSync(o);if(ma&&!ir(this,s,Wr))throw qe.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Ku);const u=s.attributes.get(t);if(r.create&&u)throw qe.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw qe.With("ENODATA",o,"xattr.set");s.attributes.set(t,Rr.from(n)),i.touchSync(o,yd(s,"attributes"))}catch(s){throw or(s,{[o]:e})}}async function MJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Mn(e,this);Th(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(ma&&!ir(this,i,Wr))throw qe.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Ku),!i.attributes.get(t))throw qe.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,yd(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}function PJ(e,t){var n;e=ln(e);const{fs:r,path:a}=Mn(e,this);Th(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(ma&&!ir(this,i,Wr))throw qe.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Ku),!i.attributes.get(t))throw qe.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,yd(i,"attributes"))}catch(i){throw or(i,{[a]:e})}}async function FJ(e){e=ln(e);const{fs:t,path:n}=Mn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}function LJ(e){e=ln(e);const{fs:t,path:n}=Mn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw or(r,{[n]:e})}}const $J=Object.freeze(Object.defineProperty({__proto__:null,get:IJ,getSync:OJ,list:FJ,listSync:LJ,remove:MJ,removeSync:PJ,set:DJ,setSync:jJ},Symbol.toStringTag,{value:"Module"})),Fa=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:kY,Dir:nk,Dirent:Fm,get IOC(){return Dr},get IOC32(){return $o},ReadStream:sk,Stats:Gl,StatsFs:CY,WriteStream:lk,access:dJ,accessSync:yX,appendFile:zX,appendFileSync:rX,chmod:oJ,chmodSync:pX,chown:aJ,chownSync:fX,chroot:YY,close:qX,closeSync:Cd,constants:gj,copyFile:vJ,copyFileSync:Oj,cp:SJ,cpSync:Dj,createReadStream:mJ,createWriteStream:gJ,exists:DX,existsSync:WC,fchmod:YX,fchmodSync:QC,fchown:ZX,fchownSync:JC,fdatasync:GX,fdatasyncSync:sX,fstat:UX,fstatSync:aX,fsync:VX,fsyncSync:oX,ftruncate:HX,ftruncateSync:iX,futimes:XX,futimesSync:ek,glob:kJ,globSync:SX,ioctl:TJ,ioctlSync:RJ,lchmod:sJ,lchmodSync:mX,lchown:iJ,lchownSync:hX,link:tJ,linkSync:cX,lopenSync:xw,lstat:MX,lstatSync:KC,lutimes:uJ,lutimesSync:gX,mkdir:QX,mkdirSync:tk,mkdtemp:bJ,mkdtempSync:bX,mount:GC,open:LX,openAsBlob:CJ,openSync:_w,opendir:xJ,opendirSync:_X,promises:NX,read:KX,readFile:$X,readFileSync:YC,readSync:uX,readdir:eJ,readdirSync:Ch,readlink:rJ,readlinkSync:nE,readv:wJ,readvSync:vX,realpath:cJ,realpathSync:hc,rename:OX,renameSync:tX,rm:yJ,rmSync:Ij,rmdir:JX,rmdirSync:Rj,stat:jX,statSync:Zu,statfs:EJ,statfsSync:xX,symlink:nJ,symlinkSync:dX,truncate:PX,truncateSync:nX,umount:Ej,unlink:FX,unlinkSync:ZC,unwatchFile:hJ,utimes:lJ,utimesSync:Nj,watch:pJ,watchFile:fJ,write:WX,writeFile:BX,writeFileSync:XC,writeSync:lX,writev:_J,writevSync:wX,xattr:$J},Symbol.toStringTag,{value:"Module"}));function xI(e){return ij(e)||$C(e)||e instanceof qC}async function rM(e,t=0){if(typeof e!="object"||e==null)throw _i(new qe(st.EINVAL,"Invalid options on mount configuration"));if(!xI(e))throw _i(new qe(st.EINVAL,"Invalid mount configuration"));if(e instanceof qC)return await e.ready(),e;$C(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&xI(i)){if(aj("Resolving nested mount configuration: "+a),t>10)throw _i(new qe(st.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await rM(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw _i(new qe(st.EPERM,"Backend not available: "+n.name));lY(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function BJ(e){if(!ij(e))throw new TypeError("Invalid single mount point configuration");const t=await rM(e);Ej("/"),GC("/",t)}const zJ=["delete"];Math.max(...zJ.map(e=>e.length));sY("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const aM=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;aM[e]=t}function UJ(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^aM[(t^e[n])&255];return(t^4294967295)>>>0}var Or=function(e,t,n,r,a,i){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(S){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(S||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),p=!0},wn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},pk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let SI=(()=>{var e,t,n,r;let a=[bd()],i,o=[],s,u,c=[],f=[],h,p=[],g=[],v,b=[],_=[],S,x=[],E=[];return s=class{constructor(){this.id=wn(this,c,0),this.offset_=(wn(this,f),wn(this,p,0)),this.offset=(wn(this,g),wn(this,b,0)),this.size=(wn(this,_),wn(this,x,0)),wn(this,E)}},pk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],v=[(n=gn).uint32.bind(n)],S=[(r=gn).uint32.bind(r)],Or(null,null,u,{kind:"field",name:"id",static:!1,private:!1,access:{has:A=>"id"in A,get:A=>A.id,set:(A,O)=>{A.id=O}},metadata:C},c,f),Or(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:A=>"offset_"in A,get:A=>A.offset_,set:(A,O)=>{A.offset_=O}},metadata:C},p,g),Or(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:A=>"offset"in A,get:A=>A.offset,set:(A,O)=>{A.offset=O}},metadata:C},b,_),Or(null,null,S,{kind:"field",name:"size",static:!1,private:!1,access:{has:A=>"size"in A,get:A=>A.size,set:(A,O)=>{A.size=O}},metadata:C},x,E),Or(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),wn(s,o)})(),s})();const EI=255;let Gc=(()=>{var e,t,n,r;let a=[bd()],i,o=[],s,u,c=[],f=[],h,p=[],g=[],v,b=[],_=[],S,x=[],E=[],C,A=[],O=[];var I=s=class{constructor(D=ur(new qe(st.EINVAL,"Metadata block must be initialized with a superblock")),z=0){if(this.superblock=D,this.offset=z,this.checksum=wn(this,c,0),this.timestamp=(wn(this,f),wn(this,p,Date.now())),this.previous_offset_=(wn(this,g),wn(this,b,0)),this.previous_offset=(wn(this,_),wn(this,x,0)),this._previous=wn(this,E),this.entries=wn(this,A,Array.from({length:EI},()=>new SI)),wn(this,O),this.superblock=D,this.offset=z,!!z&&(pw(this,D.store._buffer.subarray(z,z+jr(I))),!iM(this)))throw mw(new qe(st.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+z.toString(16)))}get previous(){var D;if(this.previous_offset)return(D=this._previous)!==null&&D!==void 0||(this._previous=new I(this.superblock,this.previous_offset)),this._previous}};return pk(s,"MetadataBlock"),(()=>{const D=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],v=[(n=gn).uint32.bind(n)],S=[(r=gn).uint32.bind(r)],C=[Dm(SI,EI)],Or(null,null,u,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:z=>"checksum"in z,get:z=>z.checksum,set:(z,W)=>{z.checksum=W}},metadata:D},c,f),Or(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:z=>"timestamp"in z,get:z=>z.timestamp,set:(z,W)=>{z.timestamp=W}},metadata:D},p,g),Or(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:z=>"previous_offset_"in z,get:z=>z.previous_offset_,set:(z,W)=>{z.previous_offset_=W}},metadata:D},b,_),Or(null,null,S,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:z=>"previous_offset"in z,get:z=>z.previous_offset,set:(z,W)=>{z.previous_offset=W}},metadata:D},x,E),Or(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:z=>"entries"in z,get:z=>z.entries,set:(z,W)=>{z.entries=W}},metadata:D},A,O),Or(null,i={value:s},a,{kind:"class",name:s.name,metadata:D},null,o),I=s=i.value,D&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:D}),wn(s,o)})(),I=s})();const CI=2049864546;(()=>{var e,t,n,r,a,i,o,s,u,c,f;let h=[bd()],p,g=[],v,b,_=[],S=[],x,E=[],C=[],A,O=[],I=[],D,z=[],W=[],ee,F=[],Z=[],V,ae=[],ie=[],te,X=[],ce=[],G,Q=[],Y=[],re,be=[],_e=[],Ie,Pe=[],Re=[],ke,ze=[],it=[],Oe,Te=[],B=[],Ce,Ne=[],de=[];var oe=v=class{constructor(J=ur(new qe(st.EINVAL,"Super block must be initialized with a store"))){if(this.store=J,this.checksum=wn(this,_,0),this.magic=(wn(this,S),wn(this,E,CI)),this.version=(wn(this,C),wn(this,O,1)),this.inode_format=(wn(this,I),wn(this,z,TY)),this.flags=(wn(this,W),wn(this,F,0)),this.used_bytes=(wn(this,Z),wn(this,ae,BigInt(0))),this.total_bytes=(wn(this,ie),wn(this,X,BigInt(0))),this.uuid=(wn(this,ce),wn(this,Q,BigInt(0))),this.metadata_block_size=(wn(this,Y),wn(this,be,jr(Gc))),this.metadata_offset_=(wn(this,_e),wn(this,Pe,0)),this.metadata_offset=(wn(this,Re),wn(this,ze,0)),this.metadata=wn(this,it),this.label=wn(this,Te,""),this._padding=(wn(this,B),wn(this,Ne,new Array(132).fill(0))),wn(this,de),this.store=J,J._view.getUint32(VZ(oe,"magic"),!0)!=CI){Ka("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Gc(this),this.metadata.offset=jr(oe),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(jr(oe)+jr(Gc)),this.total_bytes=BigInt(J._buffer.byteLength),J._write(this),J._write(this.metadata);return}if(pw(this,J._buffer.subarray(0,jr(oe))),!iM(this))throw mw(new qe(st.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Gc(this,this.metadata_offset)}rotateMetadata(){const J=new Gc(this);return J.offset=Number(this.used_bytes),J.previous_offset=this.metadata_offset,this.metadata=J,this.metadata_offset=J.offset,this.store._write(J),this.used_bytes+=BigInt(jr(Gc)),this.store._write(this),J}isUnused(J,xe){if(!xe)return!0;if(J+xe>this.total_bytes||J<jr(oe))return!1;for(let Le=this.metadata;Le;Le=Le.previous){if(J<Le.offset+jr(Gc)&&J+xe>Le.offset)return!1;for(const Se of Le.entries)if(Se.offset&&(J>=Se.offset&&J<Se.offset+Se.size||J+xe>Se.offset&&J+xe<=Se.offset+Se.size||J<=Se.offset&&J+xe>=Se.offset+Se.size))return!1}return!0}};return pk(v,"SuperBlock"),(()=>{const J=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=gn).uint32.bind(e)],x=[(t=gn).uint32.bind(t)],A=[(n=gn).uint16.bind(n)],D=[(r=gn).uint16.bind(r)],ee=[(a=gn).uint32.bind(a)],V=[(i=gn).uint64.bind(i)],te=[(o=gn).uint64.bind(o)],G=[(s=gn).uint128.bind(s)],re=[(u=gn).uint32.bind(u)],Ie=[(c=gn).uint32.bind(c)],ke=[(f=gn).uint32.bind(f)],Oe=[gn.char(64)],Ce=[gn.char(132)],Or(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Le)=>{xe.checksum=Le}},metadata:J},_,S),Or(null,null,x,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Le)=>{xe.magic=Le}},metadata:J},E,C),Or(null,null,A,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Le)=>{xe.version=Le}},metadata:J},O,I),Or(null,null,D,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Le)=>{xe.inode_format=Le}},metadata:J},z,W),Or(null,null,ee,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Le)=>{xe.flags=Le}},metadata:J},F,Z),Or(null,null,V,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Le)=>{xe.used_bytes=Le}},metadata:J},ae,ie),Or(null,null,te,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Le)=>{xe.total_bytes=Le}},metadata:J},X,ce),Or(null,null,G,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Le)=>{xe.uuid=Le}},metadata:J},Q,Y),Or(null,null,re,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Le)=>{xe.metadata_block_size=Le}},metadata:J},be,_e),Or(null,null,Ie,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Le)=>{xe.metadata_offset_=Le}},metadata:J},Pe,Re),Or(null,null,ke,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Le)=>{xe.metadata_offset=Le}},metadata:J},ze,it),Or(null,null,Oe,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Le)=>{xe.label=Le}},metadata:J},Te,B),Or(null,null,Ce,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Le)=>{xe._padding=Le}},metadata:J},Ne,de),Or(null,p={value:v},h,{kind:"class",name:v.name,metadata:J},null,g),oe=v=p.value,J&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:J}),wn(v,g)})(),oe=v})();function iM(e){const t=Pa(e),n=UJ(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Fa;function qJ(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function aE(e,t,n){if(e instanceof qe)return e;const r=e instanceof DOMException?st[qJ(e)]:st.EIO,a=new qe(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Pf(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(aE(e.error))}})}class HJ extends tE{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Pf(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Pf(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Pf(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Pf(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(aE(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(aE(this.tx.error)),this.tx.abort(),t}}async function VJ(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Ka("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Pf(n)}class GJ{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new HJ(t,this)}}const WJ={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Pf(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await VJ(e.storeName||"zenfs",e.idbFactory),n=new GJ(t),r=new wj(n);if(e!=null&&e.disableAsyncCache)return LC("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},KJ=WJ,Gb={APP_LOADED:"app:loaded",APP_ERROR:"app:error",CONVERSATION_SELECTED:"conversation:selected",CONVERSATION_CREATED:"conversation:created",CONVERSATION_DELETED:"conversation:deleted",CONVERSATION_RENAMED:"conversation:renamed",INTERACTION_STARTED:"interaction:started",INTERACTION_STREAM_CHUNK:"interaction:stream_chunk",INTERACTION_COMPLETED:"interaction:completed",PROMPT_SUBMITTED:"prompt:submitted",PROMPT_FINALISED:"prompt:finalised",SETTINGS_OPENED:"settings:opened",SETTINGS_CLOSED:"settings:closed",MOD_LOADED:"mod:loaded",MOD_ERROR:"mod:error",VFS_FILE_READ:"vfs:file:read",VFS_FILE_WRITTEN:"vfs:file:written",VFS_FILE_DELETED:"vfs:file:deleted"};function Hy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fS={exports:{}},kI;function ZJ(){return kI||(kI=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(c,f){if(!a[c]){if(!r[c]){var h=typeof Hy=="function"&&Hy;if(!f&&h)return h(c,!0);if(s)return s(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(v){var b=r[c][1][v];return o(b||v)},g,g.exports,n,r,a,i)}return a[c].exports}for(var s=typeof Hy=="function"&&Hy,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,f,h,p,g,v,b,_=[],S=0,x=u.length,E=x,C=i.getTypeOf(u)!=="string";S<u.length;)E=x-S,h=C?(c=u[S++],f=S<x?u[S++]:0,S<x?u[S++]:0):(c=u.charCodeAt(S++),f=S<x?u.charCodeAt(S++):0,S<x?u.charCodeAt(S++):0),p=c>>2,g=(3&c)<<4|f>>4,v=1<E?(15&f)<<2|h>>6:64,b=2<E?63&h:64,_.push(s.charAt(p)+s.charAt(g)+s.charAt(v)+s.charAt(b));return _.join("")},a.decode=function(u){var c,f,h,p,g,v,b=0,_=0,S="data:";if(u.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var x,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&E--,u.charAt(u.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|E):new Array(0|E);b<u.length;)c=s.indexOf(u.charAt(b++))<<2|(p=s.indexOf(u.charAt(b++)))>>4,f=(15&p)<<4|(g=s.indexOf(u.charAt(b++)))>>2,h=(3&g)<<6|(v=s.indexOf(u.charAt(b++))),x[_++]=c,g!==64&&(x[_++]=f),v!==64&&(x[_++]=h);return x}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(f,h,p,g,v){this.compressedSize=f,this.uncompressedSize=h,this.crc32=p,this.compression=g,this.compressedContent=v}c.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,h,p){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,f,h,p){var g=o,v=p+h;c^=-1;for(var b=p;b<v;b++)c=c>>>8^g[255&(c^f[b])];return-1^c}(0|u,s,s.length,0):function(c,f,h,p){var g=o,v=p+h;c^=-1;for(var b=p;b<v;b++)c=c>>>8^g[255&(c^f.charCodeAt(b))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(h,p){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new f("Deflate",h)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var b,_="";for(b=0;b<v;b++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,b,_,S,x){var E,C,A=g.file,O=g.compression,I=x!==c.utf8encode,D=s.transformTo("string",x(A.name)),z=s.transformTo("string",c.utf8encode(A.name)),W=A.comment,ee=s.transformTo("string",x(W)),F=s.transformTo("string",c.utf8encode(W)),Z=z.length!==A.name.length,V=F.length!==W.length,ae="",ie="",te="",X=A.dir,ce=A.date,G={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(G.crc32=g.crc32,G.compressedSize=g.compressedSize,G.uncompressedSize=g.uncompressedSize);var Q=0;v&&(Q|=8),I||!Z&&!V||(Q|=2048);var Y=0,re=0;X&&(Y|=16),S==="UNIX"?(re=798,Y|=function(_e,Ie){var Pe=_e;return _e||(Pe=Ie?16893:33204),(65535&Pe)<<16}(A.unixPermissions,X)):(re=20,Y|=function(_e){return 63&(_e||0)}(A.dosPermissions)),E=ce.getUTCHours(),E<<=6,E|=ce.getUTCMinutes(),E<<=5,E|=ce.getUTCSeconds()/2,C=ce.getUTCFullYear()-1980,C<<=4,C|=ce.getUTCMonth()+1,C<<=5,C|=ce.getUTCDate(),Z&&(ie=i(1,1)+i(f(D),4)+z,ae+="up"+i(ie.length,2)+ie),V&&(te=i(1,1)+i(f(ee),4)+F,ae+="uc"+i(te.length,2)+te);var be="";return be+=`
\0`,be+=i(Q,2),be+=O.magic,be+=i(E,2),be+=i(C,2),be+=i(G.crc32,4),be+=i(G.compressedSize,4),be+=i(G.uncompressedSize,4),be+=i(D.length,2),be+=i(ae.length,2),{fileRecord:h.LOCAL_FILE_HEADER+be+D+ae,dirRecord:h.CENTRAL_FILE_HEADER+i(re,2)+be+i(ee.length,2)+"\0\0\0\0"+i(Y,4)+i(_,4)+D+ae+ee}}var s=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),h=n("../signature");function p(g,v,b,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(p,u),p.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-_-1))/b:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,_=function(S,x,E,C,A){var O=s.transformTo("string",A(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(S,2)+i(S,2)+i(x,4)+i(E,4)+i(O.length,2)+O}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},p.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var v=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},p.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,u,c){var f=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{s.forEach(function(p,g){h++;var v=function(x,E){var C=x||E,A=i[C];if(!A)throw new Error(C+" is not a valid compression method !");return A}(g.options.compression,u.compression),b=g.options.compressionOptions||u.compressionOptions||{},_=g.dir,S=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:p,dir:_,date:S,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(p){f.error(p)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(p){return new o.Promise(function(g,v){var b=p.decompressed.getContentWorker().pipe(new c);b.on("error",function(_){v(_)}).on("end",function(){b.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(p,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(b){var _=new u(g);return _.load(b),_}).then(function(b){var _=[o.Promise.resolve(b)],S=b.files;if(g.checkCRC32)for(var x=0;x<S.length;x++)_.push(h(S[x]));return o.Promise.all(_)}).then(function(b){for(var _=b.shift(),S=_.files,x=0;x<S.length;x++){var E=S[x],C=E.fileNameStr,A=i.resolve(E.fileNameStr);v.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(A).unsafeOriginalName=C)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,o),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,u,c){i.call(this,u),this._helper=s;var f=this;s.on("data",function(h,p){f.push(h)||f._helper.pause(),c&&c(p)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Wt<"u",newBufferFrom:function(i,o){if(Wt.from&&Wt.from!==Uint8Array.from)return Wt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Wt(i,o)},allocBuffer:function(i){if(Wt.alloc)return Wt.alloc(i);var o=new Wt(i);return o.fill(0),o},isBuffer:function(i){return Wt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(A,O,I){var D,z=s.getTypeOf(O),W=s.extend(I||{},f);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(A=S(A)),W.createFolders&&(D=_(A))&&x.call(this,D,!0);var ee=z==="string"&&W.binary===!1&&W.base64===!1;I&&I.binary!==void 0||(W.binary=!ee),(O instanceof h&&O.uncompressedSize===0||W.dir||!O||O.length===0)&&(W.base64=!1,W.binary=!0,O="",W.compression="STORE",z="string");var F=null;F=O instanceof h||O instanceof u?O:v.isNode&&v.isStream(O)?new b(A,O):s.prepareContent(A,O,W.binary,W.optimizedBinaryString,W.base64);var Z=new p(A,F,W);this.files[A]=Z}var o=n("./utf8"),s=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var O=A.lastIndexOf("/");return 0<O?A.substring(0,O):""},S=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},x=function(A,O){return O=O!==void 0?O:f.createFolders,A=S(A),this.files[A]||i.call(this,A,null,{dir:!0,createFolders:O}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var O,I,D;for(O in this.files)D=this.files[O],(I=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&A(I,D)},filter:function(A){var O=[];return this.forEach(function(I,D){A(I,D)&&O.push(D)}),O},file:function(A,O,I){if(arguments.length!==1)return A=this.root+A,i.call(this,A,O,I),this;if(E(A)){var D=A;return this.filter(function(W,ee){return!ee.dir&&D.test(W)})}var z=this.files[this.root+A];return z&&!z.dir?z:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(z,W){return W.dir&&A.test(z)});var O=this.root+A,I=x.call(this,O),D=this.clone();return D.root=I.name,D},remove:function(A){A=this.root+A;var O=this.files[A];if(O||(A.slice(-1)!=="/"&&(A+="/"),O=this.files[A]),O&&!O.dir)delete this.files[A];else for(var I=this.filter(function(z,W){return W.name.slice(0,A.length)===A}),D=0;D<I.length;D++)delete this.files[I[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var O,I={};try{if((I=s.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");s.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var D=I.comment||this.comment||"";O=g.generateWorker(this,I,D)}catch(z){(O=new u("error")).error(z)}return new c(O,I.type||"string",I.mimeType)},generateAsync:function(A,O){return this.generateInternalStream(A).accumulate(O)},generateNodeStream:function(A,O){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(O)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===u&&this.data[p+1]===c&&this.data[p+2]===f&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),p=this.readData(4);return u===p[0]&&c===p[1]&&f===p[2]&&h===p[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new c(h):o.uint8array?new f(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),u=n("../base64"),c=n("../support"),f=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,b){return new f.Promise(function(_,S){var x=[],E=v._internalType,C=v._outputType,A=v._mimeType;v.on("data",function(O,I){x.push(O),b&&b(I)}).on("error",function(O){x=[],S(O)}).on("end",function(){try{var O=function(I,D,z){switch(I){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),z);case"base64":return u.encode(D);default:return i.transformTo(I,D)}}(C,function(I,D){var z,W=0,ee=null,F=0;for(z=0;z<D.length;z++)F+=D[z].length;switch(I){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(ee=new Uint8Array(F),z=0;z<D.length;z++)ee.set(D[z],W),W+=D[z].length;return ee;case"nodebuffer":return Wt.concat(D);default:throw new Error("concat : unsupported type '"+I+"'")}}(E,x),A);_(O)}catch(I){S(I)}x=[]}).resume()})}function g(v,b,_){var S=b;switch(b){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=b,this._mimeType=_,i.checkSupport(S),this._worker=v.pipe(new o(S)),v.lock()}catch(x){this._worker=new s("error"),this._worker.error(x)}}g.prototype={accumulate:function(v){return p(this,v)},on:function(v,b){var _=this;return v==="data"?this._worker.on(v,function(S){b.call(_,S.data,S.meta)}):this._worker.on(v,function(){i.delay(b,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Wt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function p(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(v){var b,_,S,x,E,C=v.length,A=0;for(x=0;x<C;x++)(64512&(_=v.charCodeAt(x)))==55296&&x+1<C&&(64512&(S=v.charCodeAt(x+1)))==56320&&(_=65536+(_-55296<<10)+(S-56320),x++),A+=_<128?1:_<2048?2:_<65536?3:4;for(b=o.uint8array?new Uint8Array(A):new Array(A),x=E=0;E<A;x++)(64512&(_=v.charCodeAt(x)))==55296&&x+1<C&&(64512&(S=v.charCodeAt(x+1)))==56320&&(_=65536+(_-55296<<10)+(S-56320),x++),_<128?b[E++]=_:(_<2048?b[E++]=192|_>>>6:(_<65536?b[E++]=224|_>>>12:(b[E++]=240|_>>>18,b[E++]=128|_>>>12&63),b[E++]=128|_>>>6&63),b[E++]=128|63&_);return b}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,_,S,x,E=v.length,C=new Array(2*E);for(b=_=0;b<E;)if((S=v[b++])<128)C[_++]=S;else if(4<(x=c[S]))C[_++]=65533,b+=x-1;else{for(S&=x===2?31:x===3?15:7;1<x&&b<E;)S=S<<6|63&v[b++],x--;1<x?C[_++]=65533:S<65536?C[_++]=S:(S-=65536,C[_++]=55296|S>>10&1023,C[_++]=56320|1023&S)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,u),h.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(x,E){var C;for((E=E||x.length)>x.length&&(E=x.length),C=E-1;0<=C&&(192&x[C])==128;)C--;return C<0||C===0?E:C+c[x[C]]>E?C:E}(v),S=v;_!==v.length&&(o.uint8array?(S=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(S=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:a.utf8decode(S),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,u),p.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),u=n("./external");function c(b){return b}function f(b,_){for(var S=0;S<b.length;++S)_[S]=255&b.charCodeAt(S);return _}n("setimmediate"),a.newBlob=function(b,_){a.checkSupport("blob");try{return new Blob([b],{type:_})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(b),S.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,_,S){var x=[],E=0,C=b.length;if(C<=S)return String.fromCharCode.apply(null,b);for(;E<C;)_==="array"||_==="nodebuffer"?x.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+S,C)))):x.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+S,C)))),E+=S;return x.join("")},stringifyByChar:function(b){for(var _="",S=0;S<b.length;S++)_+=String.fromCharCode(b[S]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function p(b){var _=65536,S=a.getTypeOf(b),x=!0;if(S==="uint8array"?x=h.applyCanBeUsed.uint8array:S==="nodebuffer"&&(x=h.applyCanBeUsed.nodebuffer),x)for(;1<_;)try{return h.stringifyByChunk(b,S,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(b)}function g(b,_){for(var S=0;S<b.length;S++)_[S]=b[S];return _}a.applyFromCharCode=p;var v={};v.string={string:c,array:function(b){return f(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return f(b,new Uint8Array(b.length))},nodebuffer:function(b){return f(b,s.allocBuffer(b.length))}},v.array={string:p,array:c,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(b)}},v.arraybuffer={string:function(b){return p(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:c,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:c,nodebuffer:function(b){return s.newBufferFrom(b)}},v.nodebuffer={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:c},a.transformTo=function(b,_){if(_=_||"",!b)return _;a.checkSupport(b);var S=a.getTypeOf(_);return v[S][b](_)},a.resolve=function(b){for(var _=b.split("/"),S=[],x=0;x<_.length;x++){var E=_[x];E==="."||E===""&&x!==0&&x!==_.length-1||(E===".."?S.pop():S.push(E))}return S.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var _,S,x="";for(S=0;S<(b||"").length;S++)x+="\\x"+((_=b.charCodeAt(S))<16?"0":"")+_.toString(16).toUpperCase();return x},a.delay=function(b,_,S){setImmediate(function(){b.apply(S||null,_||[])})},a.inherits=function(b,_){function S(){}S.prototype=_.prototype,b.prototype=new S},a.extend=function(){var b,_,S={};for(b=0;b<arguments.length;b++)for(_ in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],_)&&S[_]===void 0&&(S[_]=arguments[b][_]);return S},a.prepareContent=function(b,_,S,x,E){return u.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(A,O){var I=new FileReader;I.onload=function(D){A(D.target.result)},I.onerror=function(D){O(D.target.error)},I.readAsArrayBuffer(C)}):C}).then(function(C){var A=a.getTypeOf(C);return A?(A==="arraybuffer"?C=a.transformTo("uint8array",C):A==="string"&&(E?C=o.decode(C):S&&x!==!0&&(C=function(O){return f(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),u=n("./zipEntry"),c=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(h)+")")}},isSignature:function(h,p){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===p;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=c.uint8array?"uint8array":"array",g=o.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=p-g;if(0<v)this.isSignature(p,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),f=n("./compressions"),h=n("./support");function p(g,v){this.options=g,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var S in f)if(Object.prototype.hasOwnProperty.call(f,S)&&f[S].magic===_)return f[S];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,_,S=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<S;)v=g.readInt(2),b=g.readInt(2),_=g.readData(b),this.extraFields[v]={id:v,length:b,value:_};g.setIndex(S)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var S=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileName)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||u(this.fileComment)!==v.readInt(4)?null:c.utf8decode(v.readData(g.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=b,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,_="string";try{if(!v)throw new Error("No output type specified.");var S=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),b=this._decompressWorker();var x=!this._dataBinary;x&&!S&&(b=b.pipe(new u.Utf8EncodeWorker)),!x&&S&&(b=b.pipe(new u.Utf8DecodeWorker))}catch(E){(b=new f("error")).error(E)}return new o(b,_,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof c&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,v,b)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,f=new u(v),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var p=new i.MessageChannel;p.port1.onmessage=v,o=function(){p.port2.postMessage(0)}}var g=[];function v(){var b,_;s=!0;for(var S=g.length;S;){for(_=g,g=[],b=-1;++b<S;)_[b]();S=g.length}s=!1}r.exports=function(b){g.push(b)!==1||s||o()}}).call(this,typeof td<"u"?td:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},u=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function h(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,S!==o&&b(this,S)}function p(S,x,E){this.promise=S,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(S,x,E){i(function(){var C;try{C=x(E)}catch(A){return s.reject(S,A)}C===S?s.reject(S,new TypeError("Cannot resolve promise with itself")):s.resolve(S,C)})}function v(S){var x=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof x=="function")return function(){x.apply(S,arguments)}}function b(S,x){var E=!1;function C(I){E||(E=!0,s.reject(S,I))}function A(I){E||(E=!0,s.resolve(S,I))}var O=_(function(){x(A,C)});O.status==="error"&&C(O.value)}function _(S,x){var E={};try{E.value=S(x),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(S){if(typeof S!="function")return this;var x=this.constructor;return this.then(function(E){return x.resolve(S()).then(function(){return E})},function(E){return x.resolve(S()).then(function(){throw E})})},h.prototype.catch=function(S){return this.then(null,S)},h.prototype.then=function(S,x){if(typeof S!="function"&&this.state===c||typeof x!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==f?g(E,this.state===c?S:x,this.outcome):this.queue.push(new p(E,S,x)),E},p.prototype.callFulfilled=function(S){s.resolve(this.promise,S)},p.prototype.otherCallFulfilled=function(S){g(this.promise,this.onFulfilled,S)},p.prototype.callRejected=function(S){s.reject(this.promise,S)},p.prototype.otherCallRejected=function(S){g(this.promise,this.onRejected,S)},s.resolve=function(S,x){var E=_(v,x);if(E.status==="error")return s.reject(S,E.value);var C=E.value;if(C)b(S,C);else{S.state=c,S.outcome=x;for(var A=-1,O=S.queue.length;++A<O;)S.queue[A].callFulfilled(x)}return S},s.reject=function(S,x){S.state=u,S.outcome=x;for(var E=-1,C=S.queue.length;++E<C;)S.queue[E].callRejected(x);return S},h.resolve=function(S){return S instanceof this?S:s.resolve(new this(o),S)},h.reject=function(S){var x=new this(o);return s.reject(x,S)},h.all=function(S){var x=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=S.length,C=!1;if(!E)return this.resolve([]);for(var A=new Array(E),O=0,I=-1,D=new this(o);++I<E;)z(S[I],I);return D;function z(W,ee){x.resolve(W).then(function(F){A[ee]=F,++O!==E||C||(C=!0,s.resolve(D,A))},function(F){C||(C=!0,s.reject(D,F))})}},h.race=function(S){var x=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=S.length,C=!1;if(!E)return this.resolve([]);for(var A=-1,O=new this(o);++A<E;)I=S[A],x.resolve(I).then(function(D){C||(C=!0,s.resolve(O,D))},function(D){C||(C=!0,s.reject(O,D))});var I;return O}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,h=0,p=-1,g=0,v=8;function b(S){if(!(this instanceof b))return new b(S);this.options=o.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},S||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(E!==h)throw new Error(u[E]);if(x.header&&i.deflateSetHeader(this.strm,x.header),x.dictionary){var C;if(C=typeof x.dictionary=="string"?s.string2buf(x.dictionary):f.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(u[E]);this._dict_set=!0}}function _(S,x){var E=new b(x);if(E.push(S,!0),E.err)throw E.msg||u[E.err];return E.result}b.prototype.push=function(S,x){var E,C,A=this.strm,O=this.options.chunkSize;if(this.ended)return!1;C=x===~~x?x:x===!0?4:0,typeof S=="string"?A.input=s.string2buf(S):f.call(S)==="[object ArrayBuffer]"?A.input=new Uint8Array(S):A.input=S,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(O),A.next_out=0,A.avail_out=O),(E=i.deflate(A,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(A.avail_out=0))},b.prototype.onData=function(S){this.chunks.push(S)},b.prototype.onEnd=function(S){S===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},a.Deflate=b,a.deflate=_,a.deflateRaw=function(S,x){return(x=x||{}).raw=!0,_(S,x)},a.gzip=function(S,x){return(x=x||{}).gzip=!0,_(S,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||b&&b.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var S=i.inflateInit2(this.strm,_.windowBits);if(S!==u.Z_OK)throw new Error(c[S]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,_){var S=new g(_);if(S.push(b,!0),S.err)throw S.msg||c[S.err];return S.result}g.prototype.push=function(b,_){var S,x,E,C,A,O,I=this.strm,D=this.options.chunkSize,z=this.options.dictionary,W=!1;if(this.ended)return!1;x=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof b=="string"?I.input=s.binstring2buf(b):p.call(b)==="[object ArrayBuffer]"?I.input=new Uint8Array(b):I.input=b,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(D),I.next_out=0,I.avail_out=D),(S=i.inflate(I,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&z&&(O=typeof z=="string"?s.string2buf(z):p.call(z)==="[object ArrayBuffer]"?new Uint8Array(z):z,S=i.inflateSetDictionary(this.strm,O)),S===u.Z_BUF_ERROR&&W===!0&&(S=u.Z_OK,W=!1),S!==u.Z_STREAM_END&&S!==u.Z_OK)return this.onEnd(S),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&S!==u.Z_STREAM_END&&(I.avail_in!==0||x!==u.Z_FINISH&&x!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(I.output,I.next_out),C=I.next_out-E,A=s.buf2string(I.output,E),I.next_out=C,I.avail_out=D-C,C&&o.arraySet(I.output,I.output,E,C,0),this.onData(A)):this.onData(o.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(W=!0)}while((0<I.avail_in||I.avail_out===0)&&S!==u.Z_STREAM_END);return S===u.Z_STREAM_END&&(x=u.Z_FINISH),x===u.Z_FINISH?(S=i.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===u.Z_OK):x!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(I.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(b,_){return(_=_||{}).raw=!0,v(b,_)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,f,h,p){if(c.subarray&&u.subarray)u.set(c.subarray(f,f+h),p);else for(var g=0;g<h;g++)u[p+g]=c[f+g]},flattenChunks:function(u){var c,f,h,p,g,v;for(c=h=0,f=u.length;c<f;c++)h+=u[c].length;for(v=new Uint8Array(h),c=p=0,f=u.length;c<f;c++)g=u[c],v.set(g,p),p+=g.length;return v}},s={arraySet:function(u,c,f,h,p){for(var g=0;g<h;g++)u[p+g]=c[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(h,p){if(p<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var g="",v=0;v<p;v++)g+=String.fromCharCode(h[v]);return g}u[254]=u[254]=1,a.string2buf=function(h){var p,g,v,b,_,S=h.length,x=0;for(b=0;b<S;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<S&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),x+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(x),b=_=0;_<x;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<S&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?p[_++]=g:(g<2048?p[_++]=192|g>>>6:(g<65536?p[_++]=224|g>>>12:(p[_++]=240|g>>>18,p[_++]=128|g>>>12&63),p[_++]=128|g>>>6&63),p[_++]=128|63&g);return p},a.buf2binstring=function(h){return f(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),g=0,v=p.length;g<v;g++)p[g]=h.charCodeAt(g);return p},a.buf2string=function(h,p){var g,v,b,_,S=p||h.length,x=new Array(2*S);for(g=v=0;g<S;)if((b=h[g++])<128)x[v++]=b;else if(4<(_=u[b]))x[v++]=65533,g+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&g<S;)b=b<<6|63&h[g++],_--;1<_?x[v++]=65533:b<65536?x[v++]=b:(b-=65536,x[v++]=55296|b>>10&1023,x[v++]=56320|1023&b)}return f(x,v)},a.utf8border=function(h,p){var g;for((p=p||h.length)>h.length&&(p=h.length),g=p-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?p:g+u[h[g]]>p?g:p}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,u){for(var c=65535&i|0,f=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;f=f+(c=c+o[u++]|0)|0,--h;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,c){var f=i,h=c+u;o^=-1;for(var p=c;p<h;p++)o=o>>>8^f[255&(o^s[p])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),u=n("./adler32"),c=n("./crc32"),f=n("./messages"),h=0,p=4,g=0,v=-2,b=-1,_=4,S=2,x=8,E=9,C=286,A=30,O=19,I=2*C+1,D=15,z=3,W=258,ee=W+z+1,F=42,Z=113,V=1,ae=2,ie=3,te=4;function X(B,Ce){return B.msg=f[Ce],Ce}function ce(B){return(B<<1)-(4<B?9:0)}function G(B){for(var Ce=B.length;0<=--Ce;)B[Ce]=0}function Q(B){var Ce=B.state,Ne=Ce.pending;Ne>B.avail_out&&(Ne=B.avail_out),Ne!==0&&(o.arraySet(B.output,Ce.pending_buf,Ce.pending_out,Ne,B.next_out),B.next_out+=Ne,Ce.pending_out+=Ne,B.total_out+=Ne,B.avail_out-=Ne,Ce.pending-=Ne,Ce.pending===0&&(Ce.pending_out=0))}function Y(B,Ce){s._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,Ce),B.block_start=B.strstart,Q(B.strm)}function re(B,Ce){B.pending_buf[B.pending++]=Ce}function be(B,Ce){B.pending_buf[B.pending++]=Ce>>>8&255,B.pending_buf[B.pending++]=255&Ce}function _e(B,Ce){var Ne,de,oe=B.max_chain_length,J=B.strstart,xe=B.prev_length,Le=B.nice_match,Se=B.strstart>B.w_size-ee?B.strstart-(B.w_size-ee):0,Ve=B.window,xt=B.w_mask,ht=B.prev,Et=B.strstart+W,Lt=Ve[J+xe-1],Tt=Ve[J+xe];B.prev_length>=B.good_match&&(oe>>=2),Le>B.lookahead&&(Le=B.lookahead);do if(Ve[(Ne=Ce)+xe]===Tt&&Ve[Ne+xe-1]===Lt&&Ve[Ne]===Ve[J]&&Ve[++Ne]===Ve[J+1]){J+=2,Ne++;do;while(Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&Ve[++J]===Ve[++Ne]&&J<Et);if(de=W-(Et-J),J=Et-W,xe<de){if(B.match_start=Ce,Le<=(xe=de))break;Lt=Ve[J+xe-1],Tt=Ve[J+xe]}}while((Ce=ht[Ce&xt])>Se&&--oe!=0);return xe<=B.lookahead?xe:B.lookahead}function Ie(B){var Ce,Ne,de,oe,J,xe,Le,Se,Ve,xt,ht=B.w_size;do{if(oe=B.window_size-B.lookahead-B.strstart,B.strstart>=ht+(ht-ee)){for(o.arraySet(B.window,B.window,ht,ht,0),B.match_start-=ht,B.strstart-=ht,B.block_start-=ht,Ce=Ne=B.hash_size;de=B.head[--Ce],B.head[Ce]=ht<=de?de-ht:0,--Ne;);for(Ce=Ne=ht;de=B.prev[--Ce],B.prev[Ce]=ht<=de?de-ht:0,--Ne;);oe+=ht}if(B.strm.avail_in===0)break;if(xe=B.strm,Le=B.window,Se=B.strstart+B.lookahead,Ve=oe,xt=void 0,xt=xe.avail_in,Ve<xt&&(xt=Ve),Ne=xt===0?0:(xe.avail_in-=xt,o.arraySet(Le,xe.input,xe.next_in,xt,Se),xe.state.wrap===1?xe.adler=u(xe.adler,Le,xt,Se):xe.state.wrap===2&&(xe.adler=c(xe.adler,Le,xt,Se)),xe.next_in+=xt,xe.total_in+=xt,xt),B.lookahead+=Ne,B.lookahead+B.insert>=z)for(J=B.strstart-B.insert,B.ins_h=B.window[J],B.ins_h=(B.ins_h<<B.hash_shift^B.window[J+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[J+z-1])&B.hash_mask,B.prev[J&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=J,J++,B.insert--,!(B.lookahead+B.insert<z)););}while(B.lookahead<ee&&B.strm.avail_in!==0)}function Pe(B,Ce){for(var Ne,de;;){if(B.lookahead<ee){if(Ie(B),B.lookahead<ee&&Ce===h)return V;if(B.lookahead===0)break}if(Ne=0,B.lookahead>=z&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Ne=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),Ne!==0&&B.strstart-Ne<=B.w_size-ee&&(B.match_length=_e(B,Ne)),B.match_length>=z)if(de=s._tr_tally(B,B.strstart-B.match_start,B.match_length-z),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=z){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Ne=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else de=s._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(de&&(Y(B,!1),B.strm.avail_out===0))return V}return B.insert=B.strstart<z-1?B.strstart:z-1,Ce===p?(Y(B,!0),B.strm.avail_out===0?ie:te):B.last_lit&&(Y(B,!1),B.strm.avail_out===0)?V:ae}function Re(B,Ce){for(var Ne,de,oe;;){if(B.lookahead<ee){if(Ie(B),B.lookahead<ee&&Ce===h)return V;if(B.lookahead===0)break}if(Ne=0,B.lookahead>=z&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Ne=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=z-1,Ne!==0&&B.prev_length<B.max_lazy_match&&B.strstart-Ne<=B.w_size-ee&&(B.match_length=_e(B,Ne),B.match_length<=5&&(B.strategy===1||B.match_length===z&&4096<B.strstart-B.match_start)&&(B.match_length=z-1)),B.prev_length>=z&&B.match_length<=B.prev_length){for(oe=B.strstart+B.lookahead-z,de=s._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-z),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=oe&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+z-1])&B.hash_mask,Ne=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=z-1,B.strstart++,de&&(Y(B,!1),B.strm.avail_out===0))return V}else if(B.match_available){if((de=s._tr_tally(B,0,B.window[B.strstart-1]))&&Y(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return V}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(de=s._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<z-1?B.strstart:z-1,Ce===p?(Y(B,!0),B.strm.avail_out===0?ie:te):B.last_lit&&(Y(B,!1),B.strm.avail_out===0)?V:ae}function ke(B,Ce,Ne,de,oe){this.good_length=B,this.max_lazy=Ce,this.nice_length=Ne,this.max_chain=de,this.func=oe}function ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*I),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(D+1),this.heap=new o.Buf16(2*C+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function it(B){var Ce;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=S,(Ce=B.state).pending=0,Ce.pending_out=0,Ce.wrap<0&&(Ce.wrap=-Ce.wrap),Ce.status=Ce.wrap?F:Z,B.adler=Ce.wrap===2?0:1,Ce.last_flush=h,s._tr_init(Ce),g):X(B,v)}function Oe(B){var Ce=it(B);return Ce===g&&function(Ne){Ne.window_size=2*Ne.w_size,G(Ne.head),Ne.max_lazy_match=i[Ne.level].max_lazy,Ne.good_match=i[Ne.level].good_length,Ne.nice_match=i[Ne.level].nice_length,Ne.max_chain_length=i[Ne.level].max_chain,Ne.strstart=0,Ne.block_start=0,Ne.lookahead=0,Ne.insert=0,Ne.match_length=Ne.prev_length=z-1,Ne.match_available=0,Ne.ins_h=0}(B.state),Ce}function Te(B,Ce,Ne,de,oe,J){if(!B)return v;var xe=1;if(Ce===b&&(Ce=6),de<0?(xe=0,de=-de):15<de&&(xe=2,de-=16),oe<1||E<oe||Ne!==x||de<8||15<de||Ce<0||9<Ce||J<0||_<J)return X(B,v);de===8&&(de=9);var Le=new ze;return(B.state=Le).strm=B,Le.wrap=xe,Le.gzhead=null,Le.w_bits=de,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=oe+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+z-1)/z),Le.window=new o.Buf8(2*Le.w_size),Le.head=new o.Buf16(Le.hash_size),Le.prev=new o.Buf16(Le.w_size),Le.lit_bufsize=1<<oe+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new o.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=Ce,Le.strategy=J,Le.method=Ne,Oe(B)}i=[new ke(0,0,0,0,function(B,Ce){var Ne=65535;for(Ne>B.pending_buf_size-5&&(Ne=B.pending_buf_size-5);;){if(B.lookahead<=1){if(Ie(B),B.lookahead===0&&Ce===h)return V;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var de=B.block_start+Ne;if((B.strstart===0||B.strstart>=de)&&(B.lookahead=B.strstart-de,B.strstart=de,Y(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-ee&&(Y(B,!1),B.strm.avail_out===0))return V}return B.insert=0,Ce===p?(Y(B,!0),B.strm.avail_out===0?ie:te):(B.strstart>B.block_start&&(Y(B,!1),B.strm.avail_out),V)}),new ke(4,4,8,4,Pe),new ke(4,5,16,8,Pe),new ke(4,6,32,32,Pe),new ke(4,4,16,16,Re),new ke(8,16,32,32,Re),new ke(8,16,128,128,Re),new ke(8,32,128,256,Re),new ke(32,128,258,1024,Re),new ke(32,258,258,4096,Re)],a.deflateInit=function(B,Ce){return Te(B,Ce,x,15,8,0)},a.deflateInit2=Te,a.deflateReset=Oe,a.deflateResetKeep=it,a.deflateSetHeader=function(B,Ce){return B&&B.state?B.state.wrap!==2?v:(B.state.gzhead=Ce,g):v},a.deflate=function(B,Ce){var Ne,de,oe,J;if(!B||!B.state||5<Ce||Ce<0)return B?X(B,v):v;if(de=B.state,!B.output||!B.input&&B.avail_in!==0||de.status===666&&Ce!==p)return X(B,B.avail_out===0?-5:v);if(de.strm=B,Ne=de.last_flush,de.last_flush=Ce,de.status===F)if(de.wrap===2)B.adler=0,re(de,31),re(de,139),re(de,8),de.gzhead?(re(de,(de.gzhead.text?1:0)+(de.gzhead.hcrc?2:0)+(de.gzhead.extra?4:0)+(de.gzhead.name?8:0)+(de.gzhead.comment?16:0)),re(de,255&de.gzhead.time),re(de,de.gzhead.time>>8&255),re(de,de.gzhead.time>>16&255),re(de,de.gzhead.time>>24&255),re(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),re(de,255&de.gzhead.os),de.gzhead.extra&&de.gzhead.extra.length&&(re(de,255&de.gzhead.extra.length),re(de,de.gzhead.extra.length>>8&255)),de.gzhead.hcrc&&(B.adler=c(B.adler,de.pending_buf,de.pending,0)),de.gzindex=0,de.status=69):(re(de,0),re(de,0),re(de,0),re(de,0),re(de,0),re(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),re(de,3),de.status=Z);else{var xe=x+(de.w_bits-8<<4)<<8;xe|=(2<=de.strategy||de.level<2?0:de.level<6?1:de.level===6?2:3)<<6,de.strstart!==0&&(xe|=32),xe+=31-xe%31,de.status=Z,be(de,xe),de.strstart!==0&&(be(de,B.adler>>>16),be(de,65535&B.adler)),B.adler=1}if(de.status===69)if(de.gzhead.extra){for(oe=de.pending;de.gzindex<(65535&de.gzhead.extra.length)&&(de.pending!==de.pending_buf_size||(de.gzhead.hcrc&&de.pending>oe&&(B.adler=c(B.adler,de.pending_buf,de.pending-oe,oe)),Q(B),oe=de.pending,de.pending!==de.pending_buf_size));)re(de,255&de.gzhead.extra[de.gzindex]),de.gzindex++;de.gzhead.hcrc&&de.pending>oe&&(B.adler=c(B.adler,de.pending_buf,de.pending-oe,oe)),de.gzindex===de.gzhead.extra.length&&(de.gzindex=0,de.status=73)}else de.status=73;if(de.status===73)if(de.gzhead.name){oe=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>oe&&(B.adler=c(B.adler,de.pending_buf,de.pending-oe,oe)),Q(B),oe=de.pending,de.pending===de.pending_buf_size)){J=1;break}J=de.gzindex<de.gzhead.name.length?255&de.gzhead.name.charCodeAt(de.gzindex++):0,re(de,J)}while(J!==0);de.gzhead.hcrc&&de.pending>oe&&(B.adler=c(B.adler,de.pending_buf,de.pending-oe,oe)),J===0&&(de.gzindex=0,de.status=91)}else de.status=91;if(de.status===91)if(de.gzhead.comment){oe=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>oe&&(B.adler=c(B.adler,de.pending_buf,de.pending-oe,oe)),Q(B),oe=de.pending,de.pending===de.pending_buf_size)){J=1;break}J=de.gzindex<de.gzhead.comment.length?255&de.gzhead.comment.charCodeAt(de.gzindex++):0,re(de,J)}while(J!==0);de.gzhead.hcrc&&de.pending>oe&&(B.adler=c(B.adler,de.pending_buf,de.pending-oe,oe)),J===0&&(de.status=103)}else de.status=103;if(de.status===103&&(de.gzhead.hcrc?(de.pending+2>de.pending_buf_size&&Q(B),de.pending+2<=de.pending_buf_size&&(re(de,255&B.adler),re(de,B.adler>>8&255),B.adler=0,de.status=Z)):de.status=Z),de.pending!==0){if(Q(B),B.avail_out===0)return de.last_flush=-1,g}else if(B.avail_in===0&&ce(Ce)<=ce(Ne)&&Ce!==p)return X(B,-5);if(de.status===666&&B.avail_in!==0)return X(B,-5);if(B.avail_in!==0||de.lookahead!==0||Ce!==h&&de.status!==666){var Le=de.strategy===2?function(Se,Ve){for(var xt;;){if(Se.lookahead===0&&(Ie(Se),Se.lookahead===0)){if(Ve===h)return V;break}if(Se.match_length=0,xt=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++,xt&&(Y(Se,!1),Se.strm.avail_out===0))return V}return Se.insert=0,Ve===p?(Y(Se,!0),Se.strm.avail_out===0?ie:te):Se.last_lit&&(Y(Se,!1),Se.strm.avail_out===0)?V:ae}(de,Ce):de.strategy===3?function(Se,Ve){for(var xt,ht,Et,Lt,Tt=Se.window;;){if(Se.lookahead<=W){if(Ie(Se),Se.lookahead<=W&&Ve===h)return V;if(Se.lookahead===0)break}if(Se.match_length=0,Se.lookahead>=z&&0<Se.strstart&&(ht=Tt[Et=Se.strstart-1])===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]){Lt=Se.strstart+W;do;while(ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&ht===Tt[++Et]&&Et<Lt);Se.match_length=W-(Lt-Et),Se.match_length>Se.lookahead&&(Se.match_length=Se.lookahead)}if(Se.match_length>=z?(xt=s._tr_tally(Se,1,Se.match_length-z),Se.lookahead-=Se.match_length,Se.strstart+=Se.match_length,Se.match_length=0):(xt=s._tr_tally(Se,0,Se.window[Se.strstart]),Se.lookahead--,Se.strstart++),xt&&(Y(Se,!1),Se.strm.avail_out===0))return V}return Se.insert=0,Ve===p?(Y(Se,!0),Se.strm.avail_out===0?ie:te):Se.last_lit&&(Y(Se,!1),Se.strm.avail_out===0)?V:ae}(de,Ce):i[de.level].func(de,Ce);if(Le!==ie&&Le!==te||(de.status=666),Le===V||Le===ie)return B.avail_out===0&&(de.last_flush=-1),g;if(Le===ae&&(Ce===1?s._tr_align(de):Ce!==5&&(s._tr_stored_block(de,0,0,!1),Ce===3&&(G(de.head),de.lookahead===0&&(de.strstart=0,de.block_start=0,de.insert=0))),Q(B),B.avail_out===0))return de.last_flush=-1,g}return Ce!==p?g:de.wrap<=0?1:(de.wrap===2?(re(de,255&B.adler),re(de,B.adler>>8&255),re(de,B.adler>>16&255),re(de,B.adler>>24&255),re(de,255&B.total_in),re(de,B.total_in>>8&255),re(de,B.total_in>>16&255),re(de,B.total_in>>24&255)):(be(de,B.adler>>>16),be(de,65535&B.adler)),Q(B),0<de.wrap&&(de.wrap=-de.wrap),de.pending!==0?g:1)},a.deflateEnd=function(B){var Ce;return B&&B.state?(Ce=B.state.status)!==F&&Ce!==69&&Ce!==73&&Ce!==91&&Ce!==103&&Ce!==Z&&Ce!==666?X(B,v):(B.state=null,Ce===Z?X(B,-3):g):v},a.deflateSetDictionary=function(B,Ce){var Ne,de,oe,J,xe,Le,Se,Ve,xt=Ce.length;if(!B||!B.state||(J=(Ne=B.state).wrap)===2||J===1&&Ne.status!==F||Ne.lookahead)return v;for(J===1&&(B.adler=u(B.adler,Ce,xt,0)),Ne.wrap=0,xt>=Ne.w_size&&(J===0&&(G(Ne.head),Ne.strstart=0,Ne.block_start=0,Ne.insert=0),Ve=new o.Buf8(Ne.w_size),o.arraySet(Ve,Ce,xt-Ne.w_size,Ne.w_size,0),Ce=Ve,xt=Ne.w_size),xe=B.avail_in,Le=B.next_in,Se=B.input,B.avail_in=xt,B.next_in=0,B.input=Ce,Ie(Ne);Ne.lookahead>=z;){for(de=Ne.strstart,oe=Ne.lookahead-(z-1);Ne.ins_h=(Ne.ins_h<<Ne.hash_shift^Ne.window[de+z-1])&Ne.hash_mask,Ne.prev[de&Ne.w_mask]=Ne.head[Ne.ins_h],Ne.head[Ne.ins_h]=de,de++,--oe;);Ne.strstart=de,Ne.lookahead=z-1,Ie(Ne)}return Ne.strstart+=Ne.lookahead,Ne.block_start=Ne.strstart,Ne.insert=Ne.lookahead,Ne.lookahead=0,Ne.match_length=Ne.prev_length=z-1,Ne.match_available=0,B.next_in=Le,B.input=Se,B.avail_in=xe,Ne.wrap=J,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,u,c,f,h,p,g,v,b,_,S,x,E,C,A,O,I,D,z,W,ee,F,Z,V,ae;s=i.state,u=i.next_in,V=i.input,c=u+(i.avail_in-5),f=i.next_out,ae=i.output,h=f-(o-i.avail_out),p=f+(i.avail_out-257),g=s.dmax,v=s.wsize,b=s.whave,_=s.wnext,S=s.window,x=s.hold,E=s.bits,C=s.lencode,A=s.distcode,O=(1<<s.lenbits)-1,I=(1<<s.distbits)-1;e:do{E<15&&(x+=V[u++]<<E,E+=8,x+=V[u++]<<E,E+=8),D=C[x&O];t:for(;;){if(x>>>=z=D>>>24,E-=z,(z=D>>>16&255)===0)ae[f++]=65535&D;else{if(!(16&z)){if((64&z)==0){D=C[(65535&D)+(x&(1<<z)-1)];continue t}if(32&z){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}W=65535&D,(z&=15)&&(E<z&&(x+=V[u++]<<E,E+=8),W+=x&(1<<z)-1,x>>>=z,E-=z),E<15&&(x+=V[u++]<<E,E+=8,x+=V[u++]<<E,E+=8),D=A[x&I];n:for(;;){if(x>>>=z=D>>>24,E-=z,!(16&(z=D>>>16&255))){if((64&z)==0){D=A[(65535&D)+(x&(1<<z)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(ee=65535&D,E<(z&=15)&&(x+=V[u++]<<E,(E+=8)<z&&(x+=V[u++]<<E,E+=8)),g<(ee+=x&(1<<z)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(x>>>=z,E-=z,(z=f-h)<ee){if(b<(z=ee-z)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(Z=S,(F=0)===_){if(F+=v-z,z<W){for(W-=z;ae[f++]=S[F++],--z;);F=f-ee,Z=ae}}else if(_<z){if(F+=v+_-z,(z-=_)<W){for(W-=z;ae[f++]=S[F++],--z;);if(F=0,_<W){for(W-=z=_;ae[f++]=S[F++],--z;);F=f-ee,Z=ae}}}else if(F+=_-z,z<W){for(W-=z;ae[f++]=S[F++],--z;);F=f-ee,Z=ae}for(;2<W;)ae[f++]=Z[F++],ae[f++]=Z[F++],ae[f++]=Z[F++],W-=3;W&&(ae[f++]=Z[F++],1<W&&(ae[f++]=Z[F++]))}else{for(F=f-ee;ae[f++]=ae[F++],ae[f++]=ae[F++],ae[f++]=ae[F++],2<(W-=3););W&&(ae[f++]=ae[F++],1<W&&(ae[f++]=ae[F++]))}break}}break}}while(u<c&&f<p);u-=W=E>>3,x&=(1<<(E-=W<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=f<p?p-f+257:257-(f-p),s.hold=x,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),f=1,h=2,p=0,g=-2,v=1,b=852,_=592;function S(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(F){var Z;return F&&F.state?(Z=F.state,F.total_in=F.total_out=Z.total=0,F.msg="",Z.wrap&&(F.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(b),Z.distcode=Z.distdyn=new i.Buf32(_),Z.sane=1,Z.back=-1,p):g}function C(F){var Z;return F&&F.state?((Z=F.state).wsize=0,Z.whave=0,Z.wnext=0,E(F)):g}function A(F,Z){var V,ae;return F&&F.state?(ae=F.state,Z<0?(V=0,Z=-Z):(V=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(ae.window!==null&&ae.wbits!==Z&&(ae.window=null),ae.wrap=V,ae.wbits=Z,C(F))):g}function O(F,Z){var V,ae;return F?(ae=new x,(F.state=ae).window=null,(V=A(F,Z))!==p&&(F.state=null),V):g}var I,D,z=!0;function W(F){if(z){var Z;for(I=new i.Buf32(512),D=new i.Buf32(32),Z=0;Z<144;)F.lens[Z++]=8;for(;Z<256;)F.lens[Z++]=9;for(;Z<280;)F.lens[Z++]=7;for(;Z<288;)F.lens[Z++]=8;for(c(f,F.lens,0,288,I,0,F.work,{bits:9}),Z=0;Z<32;)F.lens[Z++]=5;c(h,F.lens,0,32,D,0,F.work,{bits:5}),z=!1}F.lencode=I,F.lenbits=9,F.distcode=D,F.distbits=5}function ee(F,Z,V,ae){var ie,te=F.state;return te.window===null&&(te.wsize=1<<te.wbits,te.wnext=0,te.whave=0,te.window=new i.Buf8(te.wsize)),ae>=te.wsize?(i.arraySet(te.window,Z,V-te.wsize,te.wsize,0),te.wnext=0,te.whave=te.wsize):(ae<(ie=te.wsize-te.wnext)&&(ie=ae),i.arraySet(te.window,Z,V-ae,ie,te.wnext),(ae-=ie)?(i.arraySet(te.window,Z,V-ae,ae,0),te.wnext=ae,te.whave=te.wsize):(te.wnext+=ie,te.wnext===te.wsize&&(te.wnext=0),te.whave<te.wsize&&(te.whave+=ie))),0}a.inflateReset=C,a.inflateReset2=A,a.inflateResetKeep=E,a.inflateInit=function(F){return O(F,15)},a.inflateInit2=O,a.inflate=function(F,Z){var V,ae,ie,te,X,ce,G,Q,Y,re,be,_e,Ie,Pe,Re,ke,ze,it,Oe,Te,B,Ce,Ne,de,oe=0,J=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return g;(V=F.state).mode===12&&(V.mode=13),X=F.next_out,ie=F.output,G=F.avail_out,te=F.next_in,ae=F.input,ce=F.avail_in,Q=V.hold,Y=V.bits,re=ce,be=G,Ce=p;e:for(;;)switch(V.mode){case v:if(V.wrap===0){V.mode=13;break}for(;Y<16;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if(2&V.wrap&&Q===35615){J[V.check=0]=255&Q,J[1]=Q>>>8&255,V.check=s(V.check,J,2,0),Y=Q=0,V.mode=2;break}if(V.flags=0,V.head&&(V.head.done=!1),!(1&V.wrap)||(((255&Q)<<8)+(Q>>8))%31){F.msg="incorrect header check",V.mode=30;break}if((15&Q)!=8){F.msg="unknown compression method",V.mode=30;break}if(Y-=4,B=8+(15&(Q>>>=4)),V.wbits===0)V.wbits=B;else if(B>V.wbits){F.msg="invalid window size",V.mode=30;break}V.dmax=1<<B,F.adler=V.check=1,V.mode=512&Q?10:12,Y=Q=0;break;case 2:for(;Y<16;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if(V.flags=Q,(255&V.flags)!=8){F.msg="unknown compression method",V.mode=30;break}if(57344&V.flags){F.msg="unknown header flags set",V.mode=30;break}V.head&&(V.head.text=Q>>8&1),512&V.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,V.check=s(V.check,J,2,0)),Y=Q=0,V.mode=3;case 3:for(;Y<32;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}V.head&&(V.head.time=Q),512&V.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,J[2]=Q>>>16&255,J[3]=Q>>>24&255,V.check=s(V.check,J,4,0)),Y=Q=0,V.mode=4;case 4:for(;Y<16;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}V.head&&(V.head.xflags=255&Q,V.head.os=Q>>8),512&V.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,V.check=s(V.check,J,2,0)),Y=Q=0,V.mode=5;case 5:if(1024&V.flags){for(;Y<16;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}V.length=Q,V.head&&(V.head.extra_len=Q),512&V.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,V.check=s(V.check,J,2,0)),Y=Q=0}else V.head&&(V.head.extra=null);V.mode=6;case 6:if(1024&V.flags&&(ce<(_e=V.length)&&(_e=ce),_e&&(V.head&&(B=V.head.extra_len-V.length,V.head.extra||(V.head.extra=new Array(V.head.extra_len)),i.arraySet(V.head.extra,ae,te,_e,B)),512&V.flags&&(V.check=s(V.check,ae,_e,te)),ce-=_e,te+=_e,V.length-=_e),V.length))break e;V.length=0,V.mode=7;case 7:if(2048&V.flags){if(ce===0)break e;for(_e=0;B=ae[te+_e++],V.head&&B&&V.length<65536&&(V.head.name+=String.fromCharCode(B)),B&&_e<ce;);if(512&V.flags&&(V.check=s(V.check,ae,_e,te)),ce-=_e,te+=_e,B)break e}else V.head&&(V.head.name=null);V.length=0,V.mode=8;case 8:if(4096&V.flags){if(ce===0)break e;for(_e=0;B=ae[te+_e++],V.head&&B&&V.length<65536&&(V.head.comment+=String.fromCharCode(B)),B&&_e<ce;);if(512&V.flags&&(V.check=s(V.check,ae,_e,te)),ce-=_e,te+=_e,B)break e}else V.head&&(V.head.comment=null);V.mode=9;case 9:if(512&V.flags){for(;Y<16;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if(Q!==(65535&V.check)){F.msg="header crc mismatch",V.mode=30;break}Y=Q=0}V.head&&(V.head.hcrc=V.flags>>9&1,V.head.done=!0),F.adler=V.check=0,V.mode=12;break;case 10:for(;Y<32;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}F.adler=V.check=S(Q),Y=Q=0,V.mode=11;case 11:if(V.havedict===0)return F.next_out=X,F.avail_out=G,F.next_in=te,F.avail_in=ce,V.hold=Q,V.bits=Y,2;F.adler=V.check=1,V.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(V.last){Q>>>=7&Y,Y-=7&Y,V.mode=27;break}for(;Y<3;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}switch(V.last=1&Q,Y-=1,3&(Q>>>=1)){case 0:V.mode=14;break;case 1:if(W(V),V.mode=20,Z!==6)break;Q>>>=2,Y-=2;break e;case 2:V.mode=17;break;case 3:F.msg="invalid block type",V.mode=30}Q>>>=2,Y-=2;break;case 14:for(Q>>>=7&Y,Y-=7&Y;Y<32;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if((65535&Q)!=(Q>>>16^65535)){F.msg="invalid stored block lengths",V.mode=30;break}if(V.length=65535&Q,Y=Q=0,V.mode=15,Z===6)break e;case 15:V.mode=16;case 16:if(_e=V.length){if(ce<_e&&(_e=ce),G<_e&&(_e=G),_e===0)break e;i.arraySet(ie,ae,te,_e,X),ce-=_e,te+=_e,G-=_e,X+=_e,V.length-=_e;break}V.mode=12;break;case 17:for(;Y<14;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if(V.nlen=257+(31&Q),Q>>>=5,Y-=5,V.ndist=1+(31&Q),Q>>>=5,Y-=5,V.ncode=4+(15&Q),Q>>>=4,Y-=4,286<V.nlen||30<V.ndist){F.msg="too many length or distance symbols",V.mode=30;break}V.have=0,V.mode=18;case 18:for(;V.have<V.ncode;){for(;Y<3;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}V.lens[xe[V.have++]]=7&Q,Q>>>=3,Y-=3}for(;V.have<19;)V.lens[xe[V.have++]]=0;if(V.lencode=V.lendyn,V.lenbits=7,Ne={bits:V.lenbits},Ce=c(0,V.lens,0,19,V.lencode,0,V.work,Ne),V.lenbits=Ne.bits,Ce){F.msg="invalid code lengths set",V.mode=30;break}V.have=0,V.mode=19;case 19:for(;V.have<V.nlen+V.ndist;){for(;ke=(oe=V.lencode[Q&(1<<V.lenbits)-1])>>>16&255,ze=65535&oe,!((Re=oe>>>24)<=Y);){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if(ze<16)Q>>>=Re,Y-=Re,V.lens[V.have++]=ze;else{if(ze===16){for(de=Re+2;Y<de;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if(Q>>>=Re,Y-=Re,V.have===0){F.msg="invalid bit length repeat",V.mode=30;break}B=V.lens[V.have-1],_e=3+(3&Q),Q>>>=2,Y-=2}else if(ze===17){for(de=Re+3;Y<de;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}Y-=Re,B=0,_e=3+(7&(Q>>>=Re)),Q>>>=3,Y-=3}else{for(de=Re+7;Y<de;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}Y-=Re,B=0,_e=11+(127&(Q>>>=Re)),Q>>>=7,Y-=7}if(V.have+_e>V.nlen+V.ndist){F.msg="invalid bit length repeat",V.mode=30;break}for(;_e--;)V.lens[V.have++]=B}}if(V.mode===30)break;if(V.lens[256]===0){F.msg="invalid code -- missing end-of-block",V.mode=30;break}if(V.lenbits=9,Ne={bits:V.lenbits},Ce=c(f,V.lens,0,V.nlen,V.lencode,0,V.work,Ne),V.lenbits=Ne.bits,Ce){F.msg="invalid literal/lengths set",V.mode=30;break}if(V.distbits=6,V.distcode=V.distdyn,Ne={bits:V.distbits},Ce=c(h,V.lens,V.nlen,V.ndist,V.distcode,0,V.work,Ne),V.distbits=Ne.bits,Ce){F.msg="invalid distances set",V.mode=30;break}if(V.mode=20,Z===6)break e;case 20:V.mode=21;case 21:if(6<=ce&&258<=G){F.next_out=X,F.avail_out=G,F.next_in=te,F.avail_in=ce,V.hold=Q,V.bits=Y,u(F,be),X=F.next_out,ie=F.output,G=F.avail_out,te=F.next_in,ae=F.input,ce=F.avail_in,Q=V.hold,Y=V.bits,V.mode===12&&(V.back=-1);break}for(V.back=0;ke=(oe=V.lencode[Q&(1<<V.lenbits)-1])>>>16&255,ze=65535&oe,!((Re=oe>>>24)<=Y);){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if(ke&&(240&ke)==0){for(it=Re,Oe=ke,Te=ze;ke=(oe=V.lencode[Te+((Q&(1<<it+Oe)-1)>>it)])>>>16&255,ze=65535&oe,!(it+(Re=oe>>>24)<=Y);){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}Q>>>=it,Y-=it,V.back+=it}if(Q>>>=Re,Y-=Re,V.back+=Re,V.length=ze,ke===0){V.mode=26;break}if(32&ke){V.back=-1,V.mode=12;break}if(64&ke){F.msg="invalid literal/length code",V.mode=30;break}V.extra=15&ke,V.mode=22;case 22:if(V.extra){for(de=V.extra;Y<de;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}V.length+=Q&(1<<V.extra)-1,Q>>>=V.extra,Y-=V.extra,V.back+=V.extra}V.was=V.length,V.mode=23;case 23:for(;ke=(oe=V.distcode[Q&(1<<V.distbits)-1])>>>16&255,ze=65535&oe,!((Re=oe>>>24)<=Y);){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if((240&ke)==0){for(it=Re,Oe=ke,Te=ze;ke=(oe=V.distcode[Te+((Q&(1<<it+Oe)-1)>>it)])>>>16&255,ze=65535&oe,!(it+(Re=oe>>>24)<=Y);){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}Q>>>=it,Y-=it,V.back+=it}if(Q>>>=Re,Y-=Re,V.back+=Re,64&ke){F.msg="invalid distance code",V.mode=30;break}V.offset=ze,V.extra=15&ke,V.mode=24;case 24:if(V.extra){for(de=V.extra;Y<de;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}V.offset+=Q&(1<<V.extra)-1,Q>>>=V.extra,Y-=V.extra,V.back+=V.extra}if(V.offset>V.dmax){F.msg="invalid distance too far back",V.mode=30;break}V.mode=25;case 25:if(G===0)break e;if(_e=be-G,V.offset>_e){if((_e=V.offset-_e)>V.whave&&V.sane){F.msg="invalid distance too far back",V.mode=30;break}Ie=_e>V.wnext?(_e-=V.wnext,V.wsize-_e):V.wnext-_e,_e>V.length&&(_e=V.length),Pe=V.window}else Pe=ie,Ie=X-V.offset,_e=V.length;for(G<_e&&(_e=G),G-=_e,V.length-=_e;ie[X++]=Pe[Ie++],--_e;);V.length===0&&(V.mode=21);break;case 26:if(G===0)break e;ie[X++]=V.length,G--,V.mode=21;break;case 27:if(V.wrap){for(;Y<32;){if(ce===0)break e;ce--,Q|=ae[te++]<<Y,Y+=8}if(be-=G,F.total_out+=be,V.total+=be,be&&(F.adler=V.check=V.flags?s(V.check,ie,be,X-be):o(V.check,ie,be,X-be)),be=G,(V.flags?Q:S(Q))!==V.check){F.msg="incorrect data check",V.mode=30;break}Y=Q=0}V.mode=28;case 28:if(V.wrap&&V.flags){for(;Y<32;){if(ce===0)break e;ce--,Q+=ae[te++]<<Y,Y+=8}if(Q!==(4294967295&V.total)){F.msg="incorrect length check",V.mode=30;break}Y=Q=0}V.mode=29;case 29:Ce=1;break e;case 30:Ce=-3;break e;case 31:return-4;case 32:default:return g}return F.next_out=X,F.avail_out=G,F.next_in=te,F.avail_in=ce,V.hold=Q,V.bits=Y,(V.wsize||be!==F.avail_out&&V.mode<30&&(V.mode<27||Z!==4))&&ee(F,F.output,F.next_out,be-F.avail_out)?(V.mode=31,-4):(re-=F.avail_in,be-=F.avail_out,F.total_in+=re,F.total_out+=be,V.total+=be,V.wrap&&be&&(F.adler=V.check=V.flags?s(V.check,ie,be,F.next_out-be):o(V.check,ie,be,F.next_out-be)),F.data_type=V.bits+(V.last?64:0)+(V.mode===12?128:0)+(V.mode===20||V.mode===15?256:0),(re==0&&be===0||Z===4)&&Ce===p&&(Ce=-5),Ce)},a.inflateEnd=function(F){if(!F||!F.state)return g;var Z=F.state;return Z.window&&(Z.window=null),F.state=null,p},a.inflateGetHeader=function(F,Z){var V;return F&&F.state?(2&(V=F.state).wrap)==0?g:((V.head=Z).done=!1,p):g},a.inflateSetDictionary=function(F,Z){var V,ae=Z.length;return F&&F.state?(V=F.state).wrap!==0&&V.mode!==11?g:V.mode===11&&o(1,Z,ae,0)!==V.check?-3:ee(F,Z,ae,ae)?(V.mode=31,-4):(V.havedict=1,p):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,p,g,v,b,_,S){var x,E,C,A,O,I,D,z,W,ee=S.bits,F=0,Z=0,V=0,ae=0,ie=0,te=0,X=0,ce=0,G=0,Q=0,Y=null,re=0,be=new i.Buf16(16),_e=new i.Buf16(16),Ie=null,Pe=0;for(F=0;F<=15;F++)be[F]=0;for(Z=0;Z<g;Z++)be[h[p+Z]]++;for(ie=ee,ae=15;1<=ae&&be[ae]===0;ae--);if(ae<ie&&(ie=ae),ae===0)return v[b++]=20971520,v[b++]=20971520,S.bits=1,0;for(V=1;V<ae&&be[V]===0;V++);for(ie<V&&(ie=V),F=ce=1;F<=15;F++)if(ce<<=1,(ce-=be[F])<0)return-1;if(0<ce&&(f===0||ae!==1))return-1;for(_e[1]=0,F=1;F<15;F++)_e[F+1]=_e[F]+be[F];for(Z=0;Z<g;Z++)h[p+Z]!==0&&(_[_e[h[p+Z]]++]=Z);if(I=f===0?(Y=Ie=_,19):f===1?(Y=o,re-=257,Ie=s,Pe-=257,256):(Y=u,Ie=c,-1),F=V,O=b,X=Z=Q=0,C=-1,A=(G=1<<(te=ie))-1,f===1&&852<G||f===2&&592<G)return 1;for(;;){for(D=F-X,W=_[Z]<I?(z=0,_[Z]):_[Z]>I?(z=Ie[Pe+_[Z]],Y[re+_[Z]]):(z=96,0),x=1<<F-X,V=E=1<<te;v[O+(Q>>X)+(E-=x)]=D<<24|z<<16|W|0,E!==0;);for(x=1<<F-1;Q&x;)x>>=1;if(x!==0?(Q&=x-1,Q+=x):Q=0,Z++,--be[F]==0){if(F===ae)break;F=h[p+_[Z]]}if(ie<F&&(Q&A)!==C){for(X===0&&(X=ie),O+=V,ce=1<<(te=F-X);te+X<ae&&!((ce-=be[te+X])<=0);)te++,ce<<=1;if(G+=1<<te,f===1&&852<G||f===2&&592<G)return 1;v[C=Q&A]=ie<<24|te<<16|O-b|0}}return Q!==0&&(v[O+Q]=F-X<<24|64<<16|0),S.bits=ie,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function u(oe){for(var J=oe.length;0<=--J;)oe[J]=0}var c=0,f=29,h=256,p=h+1+f,g=30,v=19,b=2*p+1,_=15,S=16,x=7,E=256,C=16,A=17,O=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=new Array(2*(p+2));u(ee);var F=new Array(2*g);u(F);var Z=new Array(512);u(Z);var V=new Array(256);u(V);var ae=new Array(f);u(ae);var ie,te,X,ce=new Array(g);function G(oe,J,xe,Le,Se){this.static_tree=oe,this.extra_bits=J,this.extra_base=xe,this.elems=Le,this.max_length=Se,this.has_stree=oe&&oe.length}function Q(oe,J){this.dyn_tree=oe,this.max_code=0,this.stat_desc=J}function Y(oe){return oe<256?Z[oe]:Z[256+(oe>>>7)]}function re(oe,J){oe.pending_buf[oe.pending++]=255&J,oe.pending_buf[oe.pending++]=J>>>8&255}function be(oe,J,xe){oe.bi_valid>S-xe?(oe.bi_buf|=J<<oe.bi_valid&65535,re(oe,oe.bi_buf),oe.bi_buf=J>>S-oe.bi_valid,oe.bi_valid+=xe-S):(oe.bi_buf|=J<<oe.bi_valid&65535,oe.bi_valid+=xe)}function _e(oe,J,xe){be(oe,xe[2*J],xe[2*J+1])}function Ie(oe,J){for(var xe=0;xe|=1&oe,oe>>>=1,xe<<=1,0<--J;);return xe>>>1}function Pe(oe,J,xe){var Le,Se,Ve=new Array(_+1),xt=0;for(Le=1;Le<=_;Le++)Ve[Le]=xt=xt+xe[Le-1]<<1;for(Se=0;Se<=J;Se++){var ht=oe[2*Se+1];ht!==0&&(oe[2*Se]=Ie(Ve[ht]++,ht))}}function Re(oe){var J;for(J=0;J<p;J++)oe.dyn_ltree[2*J]=0;for(J=0;J<g;J++)oe.dyn_dtree[2*J]=0;for(J=0;J<v;J++)oe.bl_tree[2*J]=0;oe.dyn_ltree[2*E]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function ke(oe){8<oe.bi_valid?re(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function ze(oe,J,xe,Le){var Se=2*J,Ve=2*xe;return oe[Se]<oe[Ve]||oe[Se]===oe[Ve]&&Le[J]<=Le[xe]}function it(oe,J,xe){for(var Le=oe.heap[xe],Se=xe<<1;Se<=oe.heap_len&&(Se<oe.heap_len&&ze(J,oe.heap[Se+1],oe.heap[Se],oe.depth)&&Se++,!ze(J,Le,oe.heap[Se],oe.depth));)oe.heap[xe]=oe.heap[Se],xe=Se,Se<<=1;oe.heap[xe]=Le}function Oe(oe,J,xe){var Le,Se,Ve,xt,ht=0;if(oe.last_lit!==0)for(;Le=oe.pending_buf[oe.d_buf+2*ht]<<8|oe.pending_buf[oe.d_buf+2*ht+1],Se=oe.pending_buf[oe.l_buf+ht],ht++,Le===0?_e(oe,Se,J):(_e(oe,(Ve=V[Se])+h+1,J),(xt=I[Ve])!==0&&be(oe,Se-=ae[Ve],xt),_e(oe,Ve=Y(--Le),xe),(xt=D[Ve])!==0&&be(oe,Le-=ce[Ve],xt)),ht<oe.last_lit;);_e(oe,E,J)}function Te(oe,J){var xe,Le,Se,Ve=J.dyn_tree,xt=J.stat_desc.static_tree,ht=J.stat_desc.has_stree,Et=J.stat_desc.elems,Lt=-1;for(oe.heap_len=0,oe.heap_max=b,xe=0;xe<Et;xe++)Ve[2*xe]!==0?(oe.heap[++oe.heap_len]=Lt=xe,oe.depth[xe]=0):Ve[2*xe+1]=0;for(;oe.heap_len<2;)Ve[2*(Se=oe.heap[++oe.heap_len]=Lt<2?++Lt:0)]=1,oe.depth[Se]=0,oe.opt_len--,ht&&(oe.static_len-=xt[2*Se+1]);for(J.max_code=Lt,xe=oe.heap_len>>1;1<=xe;xe--)it(oe,Ve,xe);for(Se=Et;xe=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],it(oe,Ve,1),Le=oe.heap[1],oe.heap[--oe.heap_max]=xe,oe.heap[--oe.heap_max]=Le,Ve[2*Se]=Ve[2*xe]+Ve[2*Le],oe.depth[Se]=(oe.depth[xe]>=oe.depth[Le]?oe.depth[xe]:oe.depth[Le])+1,Ve[2*xe+1]=Ve[2*Le+1]=Se,oe.heap[1]=Se++,it(oe,Ve,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],function(Tt,Ut){var ge,N,q,he,De,ve,Ae=Ut.dyn_tree,le=Ut.max_code,ct=Ut.stat_desc.static_tree,yt=Ut.stat_desc.has_stree,M=Ut.stat_desc.extra_bits,Be=Ut.stat_desc.extra_base,et=Ut.stat_desc.max_length,me=0;for(he=0;he<=_;he++)Tt.bl_count[he]=0;for(Ae[2*Tt.heap[Tt.heap_max]+1]=0,ge=Tt.heap_max+1;ge<b;ge++)et<(he=Ae[2*Ae[2*(N=Tt.heap[ge])+1]+1]+1)&&(he=et,me++),Ae[2*N+1]=he,le<N||(Tt.bl_count[he]++,De=0,Be<=N&&(De=M[N-Be]),ve=Ae[2*N],Tt.opt_len+=ve*(he+De),yt&&(Tt.static_len+=ve*(ct[2*N+1]+De)));if(me!==0){do{for(he=et-1;Tt.bl_count[he]===0;)he--;Tt.bl_count[he]--,Tt.bl_count[he+1]+=2,Tt.bl_count[et]--,me-=2}while(0<me);for(he=et;he!==0;he--)for(N=Tt.bl_count[he];N!==0;)le<(q=Tt.heap[--ge])||(Ae[2*q+1]!==he&&(Tt.opt_len+=(he-Ae[2*q+1])*Ae[2*q],Ae[2*q+1]=he),N--)}}(oe,J),Pe(Ve,Lt,oe.bl_count)}function B(oe,J,xe){var Le,Se,Ve=-1,xt=J[1],ht=0,Et=7,Lt=4;for(xt===0&&(Et=138,Lt=3),J[2*(xe+1)+1]=65535,Le=0;Le<=xe;Le++)Se=xt,xt=J[2*(Le+1)+1],++ht<Et&&Se===xt||(ht<Lt?oe.bl_tree[2*Se]+=ht:Se!==0?(Se!==Ve&&oe.bl_tree[2*Se]++,oe.bl_tree[2*C]++):ht<=10?oe.bl_tree[2*A]++:oe.bl_tree[2*O]++,Ve=Se,Lt=(ht=0)===xt?(Et=138,3):Se===xt?(Et=6,3):(Et=7,4))}function Ce(oe,J,xe){var Le,Se,Ve=-1,xt=J[1],ht=0,Et=7,Lt=4;for(xt===0&&(Et=138,Lt=3),Le=0;Le<=xe;Le++)if(Se=xt,xt=J[2*(Le+1)+1],!(++ht<Et&&Se===xt)){if(ht<Lt)for(;_e(oe,Se,oe.bl_tree),--ht!=0;);else Se!==0?(Se!==Ve&&(_e(oe,Se,oe.bl_tree),ht--),_e(oe,C,oe.bl_tree),be(oe,ht-3,2)):ht<=10?(_e(oe,A,oe.bl_tree),be(oe,ht-3,3)):(_e(oe,O,oe.bl_tree),be(oe,ht-11,7));Ve=Se,Lt=(ht=0)===xt?(Et=138,3):Se===xt?(Et=6,3):(Et=7,4)}}u(ce);var Ne=!1;function de(oe,J,xe,Le){be(oe,(c<<1)+(Le?1:0),3),function(Se,Ve,xt,ht){ke(Se),re(Se,xt),re(Se,~xt),i.arraySet(Se.pending_buf,Se.window,Ve,xt,Se.pending),Se.pending+=xt}(oe,J,xe)}a._tr_init=function(oe){Ne||(function(){var J,xe,Le,Se,Ve,xt=new Array(_+1);for(Se=Le=0;Se<f-1;Se++)for(ae[Se]=Le,J=0;J<1<<I[Se];J++)V[Le++]=Se;for(V[Le-1]=Se,Se=Ve=0;Se<16;Se++)for(ce[Se]=Ve,J=0;J<1<<D[Se];J++)Z[Ve++]=Se;for(Ve>>=7;Se<g;Se++)for(ce[Se]=Ve<<7,J=0;J<1<<D[Se]-7;J++)Z[256+Ve++]=Se;for(xe=0;xe<=_;xe++)xt[xe]=0;for(J=0;J<=143;)ee[2*J+1]=8,J++,xt[8]++;for(;J<=255;)ee[2*J+1]=9,J++,xt[9]++;for(;J<=279;)ee[2*J+1]=7,J++,xt[7]++;for(;J<=287;)ee[2*J+1]=8,J++,xt[8]++;for(Pe(ee,p+1,xt),J=0;J<g;J++)F[2*J+1]=5,F[2*J]=Ie(J,5);ie=new G(ee,I,h+1,p,_),te=new G(F,D,0,g,_),X=new G(new Array(0),z,0,v,x)}(),Ne=!0),oe.l_desc=new Q(oe.dyn_ltree,ie),oe.d_desc=new Q(oe.dyn_dtree,te),oe.bl_desc=new Q(oe.bl_tree,X),oe.bi_buf=0,oe.bi_valid=0,Re(oe)},a._tr_stored_block=de,a._tr_flush_block=function(oe,J,xe,Le){var Se,Ve,xt=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=function(ht){var Et,Lt=4093624447;for(Et=0;Et<=31;Et++,Lt>>>=1)if(1&Lt&&ht.dyn_ltree[2*Et]!==0)return o;if(ht.dyn_ltree[18]!==0||ht.dyn_ltree[20]!==0||ht.dyn_ltree[26]!==0)return s;for(Et=32;Et<h;Et++)if(ht.dyn_ltree[2*Et]!==0)return s;return o}(oe)),Te(oe,oe.l_desc),Te(oe,oe.d_desc),xt=function(ht){var Et;for(B(ht,ht.dyn_ltree,ht.l_desc.max_code),B(ht,ht.dyn_dtree,ht.d_desc.max_code),Te(ht,ht.bl_desc),Et=v-1;3<=Et&&ht.bl_tree[2*W[Et]+1]===0;Et--);return ht.opt_len+=3*(Et+1)+5+5+4,Et}(oe),Se=oe.opt_len+3+7>>>3,(Ve=oe.static_len+3+7>>>3)<=Se&&(Se=Ve)):Se=Ve=xe+5,xe+4<=Se&&J!==-1?de(oe,J,xe,Le):oe.strategy===4||Ve===Se?(be(oe,2+(Le?1:0),3),Oe(oe,ee,F)):(be(oe,4+(Le?1:0),3),function(ht,Et,Lt,Tt){var Ut;for(be(ht,Et-257,5),be(ht,Lt-1,5),be(ht,Tt-4,4),Ut=0;Ut<Tt;Ut++)be(ht,ht.bl_tree[2*W[Ut]+1],3);Ce(ht,ht.dyn_ltree,Et-1),Ce(ht,ht.dyn_dtree,Lt-1)}(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,xt+1),Oe(oe,oe.dyn_ltree,oe.dyn_dtree)),Re(oe),Le&&ke(oe)},a._tr_tally=function(oe,J,xe){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=J>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&J,oe.pending_buf[oe.l_buf+oe.last_lit]=255&xe,oe.last_lit++,J===0?oe.dyn_ltree[2*xe]++:(oe.matches++,J--,oe.dyn_ltree[2*(V[xe]+h+1)]++,oe.dyn_dtree[2*Y(J)]++),oe.last_lit===oe.lit_bufsize-1},a._tr_align=function(oe){be(oe,2,3),_e(oe,E,ee),function(J){J.bi_valid===16?(re(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(oe)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var u,c,f,h,p=1,g={},v=!1,b=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(C){Gr.nextTick(function(){x(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,A=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=A,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){x(C.data)},function(C){f.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(c=b.documentElement,function(C){var A=b.createElement("script");A.onreadystatechange=function(){x(C),A.onreadystatechange=null,c.removeChild(A),A=null},c.appendChild(A)}):function(C){setTimeout(x,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var A=new Array(arguments.length-1),O=0;O<A.length;O++)A[O]=arguments[O+1];var I={callback:C,args:A};return g[p]=I,u(p),p++},_.clearImmediate=S}function S(C){delete g[C]}function x(C){if(v)setTimeout(x,0,C);else{var A=g[C];if(A){v=!0;try{(function(O){var I=O.callback,D=O.args;switch(D.length){case 0:I();break;case 1:I(D[0]);break;case 2:I(D[0],D[1]);break;case 3:I(D[0],D[1],D[2]);break;default:I.apply(s,D)}})(A)}finally{S(C),v=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&x(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof td<"u"?td:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(fS)),fS.exports}var YJ=ZJ();const oM=Qa(YJ);var hS,AI;function XJ(){if(AI)return hS;AI=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Gr>"u"||typeof Gr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var u=!1,c=null,f=null,h=null,p=this,g=function(E,C,A){f&&(clearTimeout(f),f=null),h&&(clearTimeout(h),h=null),E&&(p.queues[t]&&p.queues[t].length===0&&delete p.queues[t],p.domainReentrant&&delete p.domains[t]),u||(s?C?o(C):i(A):typeof r=="function"&&r(C,A),u=!0),E&&p.queues[t]&&p.queues[t].length>0&&p.queues[t].shift()()},v=function(E){if(u)return g(E);c&&(clearTimeout(c),c=null),p.domainReentrant&&E&&(p.domains[t]=Gr.domain);var C=a.maxExecutionTime||p.maxExecutionTime;if(C&&(h=setTimeout(function(){p.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var A=!1;try{n(function(O,I){A||(A=!0,g(E,O,I))})}catch(O){A||(A=!0,g(E,O))}}else p._promiseTry(function(){return n()}).then(function(O){g(E,void 0,O)},function(O){g(E,O)})};p.domainReentrant&&Gr.domain&&(v=Gr.domain.bind(v));var b=a.maxPending||p.maxPending;if(!p.queues[t])p.queues[t]=[],v(!0);else if(p.domainReentrant&&Gr.domain&&Gr.domain===p.domains[t])v(!1);else if(p.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){v(!0)};a.skipQueue?p.queues[t].unshift(_):p.queues[t].push(_);var S=a.timeout||p.timeout;S&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},S))}var x=a.maxOccupationTime||p.maxOccupationTime;if(x&&(f=setTimeout(function(){p.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},x)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(u,c){return function(f){i.acquire(u,c,f,a)}},s=t.reduceRight(function(u,c){return o(c,u)},n);if(typeof r=="function")s(r);else return new this.Promise(function(u,c){s.length===1?s(function(f,h){f?c(f):u(h)}):u(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},hS=e,hS}var pS,TI;function JJ(){return TI||(TI=1,pS=XJ()),pS}var QJ=JJ();const $m=Qa(QJ);var Vy={exports:{}},RI;function eQ(){return RI||(RI=1,typeof Object.create=="function"?Vy.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Vy.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Vy.exports}var mS,NI;function tQ(){if(NI)return mS;NI=1;var e=ak().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,u=0;u<o;){for(var c=s%i,f=Math.min(o-u,i-c),h=0;h<f;h++)a[c+h]=n[u+h];s+=f,u+=f,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},mS=t,mS}var gS,II;function nQ(){if(II)return gS;II=1;var e=eQ(),t=tQ(),n=ak().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function c(f,h,p,g){return f===0?h&p|~h&g:f===2?h&p|h&g|p&g:h^p^g}return i.prototype._update=function(f){for(var h=this._w,p=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,_=this._e|0,S=0;S<16;++S)h[S]=f.readInt32BE(S*4);for(;S<80;++S)h[S]=o(h[S-3]^h[S-8]^h[S-14]^h[S-16]);for(var x=0;x<80;++x){var E=~~(x/20),C=s(p)+c(E,g,v,b)+_+h[x]+r[E]|0;_=b,b=v,v=u(g),g=p,p=C}this._a=p+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var f=n.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},gS=i,gS}var rQ=nQ();const sM=Qa(rQ);var yS,OI;function aQ(){if(OI)return yS;OI=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,u=-1,c=0,f,h=0;h<=a.length;++h){if(h<a.length)f=a.charCodeAt(h);else{if(f===47)break;f=47}if(f===47){if(!(u===h-1||c===1))if(u!==h-1&&c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var p=o.lastIndexOf("/");if(p!==o.length-1){p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf("/")),u=h,c=0;continue}}else if(o.length===2||o.length===1){o="",s=0,u=h,c=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(u+1,h):o=a.slice(u+1,h),s=h-u-1;u=h,c=0}else f===46&&c!==-1?++c:c=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,u=arguments.length-1;u>=-1&&!o;u--){var c;u>=0?c=arguments[u]:(s===void 0&&(s=Gr.cwd()),c=s),e(c),c.length!==0&&(i=c+"/"+i,o=c.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var u=i.length,c=u-s,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var h=o.length,p=h-f,g=c<p?c:p,v=-1,b=0;b<=g;++b){if(b===g){if(p>g){if(o.charCodeAt(f+b)===47)return o.slice(f+b+1);if(b===0)return o.slice(f+b)}else c>g&&(i.charCodeAt(s+b)===47?v=b:b===0&&(v=0));break}var _=i.charCodeAt(s+b),S=o.charCodeAt(f+b);if(_!==S)break;_===47&&(v=b)}var x="";for(b=s+v+1;b<=u;++b)(b===u||i.charCodeAt(b)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+o.slice(f+v):(f+=v,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,u=-1,c=!0,f=i.length-1;f>=1;--f)if(o=i.charCodeAt(f),o===47){if(!c){u=f;break}}else c=!1;return u===-1?s?"/":".":s&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,u=-1,c=!0,f;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,p=-1;for(f=i.length-1;f>=0;--f){var g=i.charCodeAt(f);if(g===47){if(!c){s=f+1;break}}else p===-1&&(c=!1,p=f+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(u=f):(h=-1,u=p))}return s===u?u=p:u===-1&&(u=i.length),i.slice(s,u)}else{for(f=i.length-1;f>=0;--f)if(i.charCodeAt(f)===47){if(!c){s=f+1;break}}else u===-1&&(c=!1,u=f+1);return u===-1?"":i.slice(s,u)}},extname:function(i){e(i);for(var o=-1,s=0,u=-1,c=!0,f=0,h=i.length-1;h>=0;--h){var p=i.charCodeAt(h);if(p===47){if(!c){s=h+1;break}continue}u===-1&&(c=!1,u=h+1),p===46?o===-1?o=h:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||u===-1||f===0||f===1&&o===u-1&&o===s+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),u=s===47,c;u?(o.root="/",c=1):c=0;for(var f=-1,h=0,p=-1,g=!0,v=i.length-1,b=0;v>=c;--v){if(s=i.charCodeAt(v),s===47){if(!g){h=v+1;break}continue}p===-1&&(g=!1,p=v+1),s===46?f===-1?f=v:b!==1&&(b=1):f!==-1&&(b=-1)}return f===-1||p===-1||b===0||b===1&&f===p-1&&f===h+1?p!==-1&&(h===0&&u?o.base=o.name=i.slice(1,p):o.base=o.name=i.slice(h,p)):(h===0&&u?(o.name=i.slice(1,f),o.base=i.slice(1,p)):(o.name=i.slice(h,f),o.base=i.slice(h,p)),o.ext=i.slice(f,p)),h>0?o.dir=i.slice(0,h-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,yS=r,yS}var At=aQ(),bS={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var DI;function iQ(){return DI||(DI=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var D=0,z=new Array(256),W=0;W!=256;++W)D=W,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,z[W]=D;return typeof Int32Array<"u"?new Int32Array(z):z}var r=n();function a(D){var z=0,W=0,ee=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(ee=0;ee!=256;++ee)F[ee]=D[ee];for(ee=0;ee!=256;++ee)for(W=D[ee],z=256+ee;z<4096;z+=256)W=F[z]=W>>>8^D[W&255];var Z=[];for(ee=1;ee!=16;++ee)Z[ee-1]=typeof Int32Array<"u"?F.subarray(ee*256,ee*256+256):F.slice(ee*256,ee*256+256);return Z}var i=a(r),o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],h=i[5],p=i[6],g=i[7],v=i[8],b=i[9],_=i[10],S=i[11],x=i[12],E=i[13],C=i[14];function A(D,z){for(var W=z^-1,ee=0,F=D.length;ee<F;)W=W>>>8^r[(W^D.charCodeAt(ee++))&255];return~W}function O(D,z){for(var W=z^-1,ee=D.length-15,F=0;F<ee;)W=C[D[F++]^W&255]^E[D[F++]^W>>8&255]^x[D[F++]^W>>16&255]^S[D[F++]^W>>>24]^_[D[F++]]^b[D[F++]]^v[D[F++]]^g[D[F++]]^p[D[F++]]^h[D[F++]]^f[D[F++]]^c[D[F++]]^u[D[F++]]^s[D[F++]]^o[D[F++]]^r[D[F++]];for(ee+=15;F<ee;)W=W>>>8^r[(W^D[F++])&255];return~W}function I(D,z){for(var W=z^-1,ee=0,F=D.length,Z=0,V=0;ee<F;)Z=D.charCodeAt(ee++),Z<128?W=W>>>8^r[(W^Z)&255]:Z<2048?(W=W>>>8^r[(W^(192|Z>>6&31))&255],W=W>>>8^r[(W^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,V=D.charCodeAt(ee++)&1023,W=W>>>8^r[(W^(240|Z>>8&7))&255],W=W>>>8^r[(W^(128|Z>>2&63))&255],W=W>>>8^r[(W^(128|V>>6&15|(Z&3)<<4))&255],W=W>>>8^r[(W^(128|V&63))&255]):(W=W>>>8^r[(W^(224|Z>>12&15))&255],W=W>>>8^r[(W^(128|Z>>6&63))&255],W=W>>>8^r[(W^(128|Z&63))&255]);return~W}t.table=r,t.bstr=A,t.buf=O,t.str=I})}(bS)),bS}var oQ=iQ();const sQ=Qa(oQ);var vS={},jI;function bc(){return jI||(jI=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(i[u]=s[u])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,u,c){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+u),c);return}for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){var o,s,u,c,f,h;for(u=0,o=0,s=i.length;o<s;o++)u+=i[o].length;for(h=new Uint8Array(u),c=0,o=0,s=i.length;o<s;o++)f=i[o],h.set(f,c),c+=f.length;return h}},a={arraySet:function(i,o,s,u,c){for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(vS)),vS}var Ef={},Do={},Wc={},MI;function lQ(){if(MI)return Wc;MI=1;var e=bc(),t=4,n=0,r=1,a=2;function i(N){for(var q=N.length;--q>=0;)N[q]=0}var o=0,s=1,u=2,c=3,f=258,h=29,p=256,g=p+1+h,v=30,b=19,_=2*g+1,S=15,x=16,E=7,C=256,A=16,O=17,I=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=512,Z=new Array((g+2)*2);i(Z);var V=new Array(v*2);i(V);var ae=new Array(F);i(ae);var ie=new Array(f-c+1);i(ie);var te=new Array(h);i(te);var X=new Array(v);i(X);function ce(N,q,he,De,ve){this.static_tree=N,this.extra_bits=q,this.extra_base=he,this.elems=De,this.max_length=ve,this.has_stree=N&&N.length}var G,Q,Y;function re(N,q){this.dyn_tree=N,this.max_code=0,this.stat_desc=q}function be(N){return N<256?ae[N]:ae[256+(N>>>7)]}function _e(N,q){N.pending_buf[N.pending++]=q&255,N.pending_buf[N.pending++]=q>>>8&255}function Ie(N,q,he){N.bi_valid>x-he?(N.bi_buf|=q<<N.bi_valid&65535,_e(N,N.bi_buf),N.bi_buf=q>>x-N.bi_valid,N.bi_valid+=he-x):(N.bi_buf|=q<<N.bi_valid&65535,N.bi_valid+=he)}function Pe(N,q,he){Ie(N,he[q*2],he[q*2+1])}function Re(N,q){var he=0;do he|=N&1,N>>>=1,he<<=1;while(--q>0);return he>>>1}function ke(N){N.bi_valid===16?(_e(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):N.bi_valid>=8&&(N.pending_buf[N.pending++]=N.bi_buf&255,N.bi_buf>>=8,N.bi_valid-=8)}function ze(N,q){var he=q.dyn_tree,De=q.max_code,ve=q.stat_desc.static_tree,Ae=q.stat_desc.has_stree,le=q.stat_desc.extra_bits,ct=q.stat_desc.extra_base,yt=q.stat_desc.max_length,M,Be,et,me,je,Ke,Ct=0;for(me=0;me<=S;me++)N.bl_count[me]=0;for(he[N.heap[N.heap_max]*2+1]=0,M=N.heap_max+1;M<_;M++)Be=N.heap[M],me=he[he[Be*2+1]*2+1]+1,me>yt&&(me=yt,Ct++),he[Be*2+1]=me,!(Be>De)&&(N.bl_count[me]++,je=0,Be>=ct&&(je=le[Be-ct]),Ke=he[Be*2],N.opt_len+=Ke*(me+je),Ae&&(N.static_len+=Ke*(ve[Be*2+1]+je)));if(Ct!==0){do{for(me=yt-1;N.bl_count[me]===0;)me--;N.bl_count[me]--,N.bl_count[me+1]+=2,N.bl_count[yt]--,Ct-=2}while(Ct>0);for(me=yt;me!==0;me--)for(Be=N.bl_count[me];Be!==0;)et=N.heap[--M],!(et>De)&&(he[et*2+1]!==me&&(N.opt_len+=(me-he[et*2+1])*he[et*2],he[et*2+1]=me),Be--)}}function it(N,q,he){var De=new Array(S+1),ve=0,Ae,le;for(Ae=1;Ae<=S;Ae++)De[Ae]=ve=ve+he[Ae-1]<<1;for(le=0;le<=q;le++){var ct=N[le*2+1];ct!==0&&(N[le*2]=Re(De[ct]++,ct))}}function Oe(){var N,q,he,De,ve,Ae=new Array(S+1);for(he=0,De=0;De<h-1;De++)for(te[De]=he,N=0;N<1<<D[De];N++)ie[he++]=De;for(ie[he-1]=De,ve=0,De=0;De<16;De++)for(X[De]=ve,N=0;N<1<<z[De];N++)ae[ve++]=De;for(ve>>=7;De<v;De++)for(X[De]=ve<<7,N=0;N<1<<z[De]-7;N++)ae[256+ve++]=De;for(q=0;q<=S;q++)Ae[q]=0;for(N=0;N<=143;)Z[N*2+1]=8,N++,Ae[8]++;for(;N<=255;)Z[N*2+1]=9,N++,Ae[9]++;for(;N<=279;)Z[N*2+1]=7,N++,Ae[7]++;for(;N<=287;)Z[N*2+1]=8,N++,Ae[8]++;for(it(Z,g+1,Ae),N=0;N<v;N++)V[N*2+1]=5,V[N*2]=Re(N,5);G=new ce(Z,D,p+1,g,S),Q=new ce(V,z,0,v,S),Y=new ce(new Array(0),W,0,b,E)}function Te(N){var q;for(q=0;q<g;q++)N.dyn_ltree[q*2]=0;for(q=0;q<v;q++)N.dyn_dtree[q*2]=0;for(q=0;q<b;q++)N.bl_tree[q*2]=0;N.dyn_ltree[C*2]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function B(N){N.bi_valid>8?_e(N,N.bi_buf):N.bi_valid>0&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function Ce(N,q,he,De){B(N),_e(N,he),_e(N,~he),e.arraySet(N.pending_buf,N.window,q,he,N.pending),N.pending+=he}function Ne(N,q,he,De){var ve=q*2,Ae=he*2;return N[ve]<N[Ae]||N[ve]===N[Ae]&&De[q]<=De[he]}function de(N,q,he){for(var De=N.heap[he],ve=he<<1;ve<=N.heap_len&&(ve<N.heap_len&&Ne(q,N.heap[ve+1],N.heap[ve],N.depth)&&ve++,!Ne(q,De,N.heap[ve],N.depth));)N.heap[he]=N.heap[ve],he=ve,ve<<=1;N.heap[he]=De}function oe(N,q,he){var De,ve,Ae=0,le,ct;if(N.last_lit!==0)do De=N.pending_buf[N.d_buf+Ae*2]<<8|N.pending_buf[N.d_buf+Ae*2+1],ve=N.pending_buf[N.l_buf+Ae],Ae++,De===0?Pe(N,ve,q):(le=ie[ve],Pe(N,le+p+1,q),ct=D[le],ct!==0&&(ve-=te[le],Ie(N,ve,ct)),De--,le=be(De),Pe(N,le,he),ct=z[le],ct!==0&&(De-=X[le],Ie(N,De,ct)));while(Ae<N.last_lit);Pe(N,C,q)}function J(N,q){var he=q.dyn_tree,De=q.stat_desc.static_tree,ve=q.stat_desc.has_stree,Ae=q.stat_desc.elems,le,ct,yt=-1,M;for(N.heap_len=0,N.heap_max=_,le=0;le<Ae;le++)he[le*2]!==0?(N.heap[++N.heap_len]=yt=le,N.depth[le]=0):he[le*2+1]=0;for(;N.heap_len<2;)M=N.heap[++N.heap_len]=yt<2?++yt:0,he[M*2]=1,N.depth[M]=0,N.opt_len--,ve&&(N.static_len-=De[M*2+1]);for(q.max_code=yt,le=N.heap_len>>1;le>=1;le--)de(N,he,le);M=Ae;do le=N.heap[1],N.heap[1]=N.heap[N.heap_len--],de(N,he,1),ct=N.heap[1],N.heap[--N.heap_max]=le,N.heap[--N.heap_max]=ct,he[M*2]=he[le*2]+he[ct*2],N.depth[M]=(N.depth[le]>=N.depth[ct]?N.depth[le]:N.depth[ct])+1,he[le*2+1]=he[ct*2+1]=M,N.heap[1]=M++,de(N,he,1);while(N.heap_len>=2);N.heap[--N.heap_max]=N.heap[1],ze(N,q),it(he,yt,N.bl_count)}function xe(N,q,he){var De,ve=-1,Ae,le=q[0*2+1],ct=0,yt=7,M=4;for(le===0&&(yt=138,M=3),q[(he+1)*2+1]=65535,De=0;De<=he;De++)Ae=le,le=q[(De+1)*2+1],!(++ct<yt&&Ae===le)&&(ct<M?N.bl_tree[Ae*2]+=ct:Ae!==0?(Ae!==ve&&N.bl_tree[Ae*2]++,N.bl_tree[A*2]++):ct<=10?N.bl_tree[O*2]++:N.bl_tree[I*2]++,ct=0,ve=Ae,le===0?(yt=138,M=3):Ae===le?(yt=6,M=3):(yt=7,M=4))}function Le(N,q,he){var De,ve=-1,Ae,le=q[0*2+1],ct=0,yt=7,M=4;for(le===0&&(yt=138,M=3),De=0;De<=he;De++)if(Ae=le,le=q[(De+1)*2+1],!(++ct<yt&&Ae===le)){if(ct<M)do Pe(N,Ae,N.bl_tree);while(--ct!==0);else Ae!==0?(Ae!==ve&&(Pe(N,Ae,N.bl_tree),ct--),Pe(N,A,N.bl_tree),Ie(N,ct-3,2)):ct<=10?(Pe(N,O,N.bl_tree),Ie(N,ct-3,3)):(Pe(N,I,N.bl_tree),Ie(N,ct-11,7));ct=0,ve=Ae,le===0?(yt=138,M=3):Ae===le?(yt=6,M=3):(yt=7,M=4)}}function Se(N){var q;for(xe(N,N.dyn_ltree,N.l_desc.max_code),xe(N,N.dyn_dtree,N.d_desc.max_code),J(N,N.bl_desc),q=b-1;q>=3&&N.bl_tree[ee[q]*2+1]===0;q--);return N.opt_len+=3*(q+1)+5+5+4,q}function Ve(N,q,he,De){var ve;for(Ie(N,q-257,5),Ie(N,he-1,5),Ie(N,De-4,4),ve=0;ve<De;ve++)Ie(N,N.bl_tree[ee[ve]*2+1],3);Le(N,N.dyn_ltree,q-1),Le(N,N.dyn_dtree,he-1)}function xt(N){var q=4093624447,he;for(he=0;he<=31;he++,q>>>=1)if(q&1&&N.dyn_ltree[he*2]!==0)return n;if(N.dyn_ltree[9*2]!==0||N.dyn_ltree[10*2]!==0||N.dyn_ltree[13*2]!==0)return r;for(he=32;he<p;he++)if(N.dyn_ltree[he*2]!==0)return r;return n}var ht=!1;function Et(N){ht||(Oe(),ht=!0),N.l_desc=new re(N.dyn_ltree,G),N.d_desc=new re(N.dyn_dtree,Q),N.bl_desc=new re(N.bl_tree,Y),N.bi_buf=0,N.bi_valid=0,Te(N)}function Lt(N,q,he,De){Ie(N,(o<<1)+(De?1:0),3),Ce(N,q,he)}function Tt(N){Ie(N,s<<1,3),Pe(N,C,Z),ke(N)}function Ut(N,q,he,De){var ve,Ae,le=0;N.level>0?(N.strm.data_type===a&&(N.strm.data_type=xt(N)),J(N,N.l_desc),J(N,N.d_desc),le=Se(N),ve=N.opt_len+3+7>>>3,Ae=N.static_len+3+7>>>3,Ae<=ve&&(ve=Ae)):ve=Ae=he+5,he+4<=ve&&q!==-1?Lt(N,q,he,De):N.strategy===t||Ae===ve?(Ie(N,(s<<1)+(De?1:0),3),oe(N,Z,V)):(Ie(N,(u<<1)+(De?1:0),3),Ve(N,N.l_desc.max_code+1,N.d_desc.max_code+1,le+1),oe(N,N.dyn_ltree,N.dyn_dtree)),Te(N),De&&B(N)}function ge(N,q,he){return N.pending_buf[N.d_buf+N.last_lit*2]=q>>>8&255,N.pending_buf[N.d_buf+N.last_lit*2+1]=q&255,N.pending_buf[N.l_buf+N.last_lit]=he&255,N.last_lit++,q===0?N.dyn_ltree[he*2]++:(N.matches++,q--,N.dyn_ltree[(ie[he]+p+1)*2]++,N.dyn_dtree[be(q)*2]++),N.last_lit===N.lit_bufsize-1}return Wc._tr_init=Et,Wc._tr_stored_block=Lt,Wc._tr_flush_block=Ut,Wc._tr_tally=ge,Wc._tr_align=Tt,Wc}var wS,PI;function lM(){if(PI)return wS;PI=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return wS=e,wS}var _S,FI;function uM(){if(FI)return _S;FI=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,u=o+i;r^=-1;for(var c=o;c<u;c++)r=r>>>8^s[(r^a[c])&255];return r^-1}return _S=n,_S}var xS,LI;function mk(){return LI||(LI=1,xS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),xS}var $I;function uQ(){if($I)return Do;$I=1;var e=bc(),t=lQ(),n=lM(),r=uM(),a=mk(),i=0,o=1,s=3,u=4,c=5,f=0,h=1,p=-2,g=-3,v=-5,b=-1,_=1,S=2,x=3,E=4,C=0,A=2,O=8,I=9,D=15,z=8,W=29,ee=256,F=ee+1+W,Z=30,V=19,ae=2*F+1,ie=15,te=3,X=258,ce=X+te+1,G=32,Q=42,Y=69,re=73,be=91,_e=103,Ie=113,Pe=666,Re=1,ke=2,ze=3,it=4,Oe=3;function Te(M,Be){return M.msg=a[Be],Be}function B(M){return(M<<1)-(M>4?9:0)}function Ce(M){for(var Be=M.length;--Be>=0;)M[Be]=0}function Ne(M){var Be=M.state,et=Be.pending;et>M.avail_out&&(et=M.avail_out),et!==0&&(e.arraySet(M.output,Be.pending_buf,Be.pending_out,et,M.next_out),M.next_out+=et,Be.pending_out+=et,M.total_out+=et,M.avail_out-=et,Be.pending-=et,Be.pending===0&&(Be.pending_out=0))}function de(M,Be){t._tr_flush_block(M,M.block_start>=0?M.block_start:-1,M.strstart-M.block_start,Be),M.block_start=M.strstart,Ne(M.strm)}function oe(M,Be){M.pending_buf[M.pending++]=Be}function J(M,Be){M.pending_buf[M.pending++]=Be>>>8&255,M.pending_buf[M.pending++]=Be&255}function xe(M,Be,et,me){var je=M.avail_in;return je>me&&(je=me),je===0?0:(M.avail_in-=je,e.arraySet(Be,M.input,M.next_in,je,et),M.state.wrap===1?M.adler=n(M.adler,Be,je,et):M.state.wrap===2&&(M.adler=r(M.adler,Be,je,et)),M.next_in+=je,M.total_in+=je,je)}function Le(M,Be){var et=M.max_chain_length,me=M.strstart,je,Ke,Ct=M.prev_length,ye=M.nice_match,U=M.strstart>M.w_size-ce?M.strstart-(M.w_size-ce):0,$=M.window,H=M.w_mask,pe=M.prev,fe=M.strstart+X,Fe=$[me+Ct-1],ot=$[me+Ct];M.prev_length>=M.good_match&&(et>>=2),ye>M.lookahead&&(ye=M.lookahead);do if(je=Be,!($[je+Ct]!==ot||$[je+Ct-1]!==Fe||$[je]!==$[me]||$[++je]!==$[me+1])){me+=2,je++;do;while($[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&$[++me]===$[++je]&&me<fe);if(Ke=X-(fe-me),me=fe-X,Ke>Ct){if(M.match_start=Be,Ct=Ke,Ke>=ye)break;Fe=$[me+Ct-1],ot=$[me+Ct]}}while((Be=pe[Be&H])>U&&--et!==0);return Ct<=M.lookahead?Ct:M.lookahead}function Se(M){var Be=M.w_size,et,me,je,Ke,Ct;do{if(Ke=M.window_size-M.lookahead-M.strstart,M.strstart>=Be+(Be-ce)){e.arraySet(M.window,M.window,Be,Be,0),M.match_start-=Be,M.strstart-=Be,M.block_start-=Be,me=M.hash_size,et=me;do je=M.head[--et],M.head[et]=je>=Be?je-Be:0;while(--me);me=Be,et=me;do je=M.prev[--et],M.prev[et]=je>=Be?je-Be:0;while(--me);Ke+=Be}if(M.strm.avail_in===0)break;if(me=xe(M.strm,M.window,M.strstart+M.lookahead,Ke),M.lookahead+=me,M.lookahead+M.insert>=te)for(Ct=M.strstart-M.insert,M.ins_h=M.window[Ct],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Ct+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Ct+te-1])&M.hash_mask,M.prev[Ct&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Ct,Ct++,M.insert--,!(M.lookahead+M.insert<te)););}while(M.lookahead<ce&&M.strm.avail_in!==0)}function Ve(M,Be){var et=65535;for(et>M.pending_buf_size-5&&(et=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Se(M),M.lookahead===0&&Be===i)return Re;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var me=M.block_start+et;if((M.strstart===0||M.strstart>=me)&&(M.lookahead=M.strstart-me,M.strstart=me,de(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-ce&&(de(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===u?(de(M,!0),M.strm.avail_out===0?ze:it):(M.strstart>M.block_start&&(de(M,!1),M.strm.avail_out===0),Re)}function xt(M,Be){for(var et,me;;){if(M.lookahead<ce){if(Se(M),M.lookahead<ce&&Be===i)return Re;if(M.lookahead===0)break}if(et=0,M.lookahead>=te&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+te-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),et!==0&&M.strstart-et<=M.w_size-ce&&(M.match_length=Le(M,et)),M.match_length>=te)if(me=t._tr_tally(M,M.strstart-M.match_start,M.match_length-te),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=te){M.match_length--;do M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+te-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart;while(--M.match_length!==0);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else me=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(me&&(de(M,!1),M.strm.avail_out===0))return Re}return M.insert=M.strstart<te-1?M.strstart:te-1,Be===u?(de(M,!0),M.strm.avail_out===0?ze:it):M.last_lit&&(de(M,!1),M.strm.avail_out===0)?Re:ke}function ht(M,Be){for(var et,me,je;;){if(M.lookahead<ce){if(Se(M),M.lookahead<ce&&Be===i)return Re;if(M.lookahead===0)break}if(et=0,M.lookahead>=te&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+te-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=te-1,et!==0&&M.prev_length<M.max_lazy_match&&M.strstart-et<=M.w_size-ce&&(M.match_length=Le(M,et),M.match_length<=5&&(M.strategy===_||M.match_length===te&&M.strstart-M.match_start>4096)&&(M.match_length=te-1)),M.prev_length>=te&&M.match_length<=M.prev_length){je=M.strstart+M.lookahead-te,me=t._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-te),M.lookahead-=M.prev_length-1,M.prev_length-=2;do++M.strstart<=je&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+te-1])&M.hash_mask,et=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart);while(--M.prev_length!==0);if(M.match_available=0,M.match_length=te-1,M.strstart++,me&&(de(M,!1),M.strm.avail_out===0))return Re}else if(M.match_available){if(me=t._tr_tally(M,0,M.window[M.strstart-1]),me&&de(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return Re}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(me=t._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<te-1?M.strstart:te-1,Be===u?(de(M,!0),M.strm.avail_out===0?ze:it):M.last_lit&&(de(M,!1),M.strm.avail_out===0)?Re:ke}function Et(M,Be){for(var et,me,je,Ke,Ct=M.window;;){if(M.lookahead<=X){if(Se(M),M.lookahead<=X&&Be===i)return Re;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=te&&M.strstart>0&&(je=M.strstart-1,me=Ct[je],me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je])){Ke=M.strstart+X;do;while(me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&me===Ct[++je]&&je<Ke);M.match_length=X-(Ke-je),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=te?(et=t._tr_tally(M,1,M.match_length-te),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(et=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),et&&(de(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===u?(de(M,!0),M.strm.avail_out===0?ze:it):M.last_lit&&(de(M,!1),M.strm.avail_out===0)?Re:ke}function Lt(M,Be){for(var et;;){if(M.lookahead===0&&(Se(M),M.lookahead===0)){if(Be===i)return Re;break}if(M.match_length=0,et=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,et&&(de(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===u?(de(M,!0),M.strm.avail_out===0?ze:it):M.last_lit&&(de(M,!1),M.strm.avail_out===0)?Re:ke}function Tt(M,Be,et,me,je){this.good_length=M,this.max_lazy=Be,this.nice_length=et,this.max_chain=me,this.func=je}var Ut;Ut=[new Tt(0,0,0,0,Ve),new Tt(4,4,8,4,xt),new Tt(4,5,16,8,xt),new Tt(4,6,32,32,xt),new Tt(4,4,16,16,ht),new Tt(8,16,32,32,ht),new Tt(8,16,128,128,ht),new Tt(8,32,128,256,ht),new Tt(32,128,258,1024,ht),new Tt(32,258,258,4096,ht)];function ge(M){M.window_size=2*M.w_size,Ce(M.head),M.max_lazy_match=Ut[M.level].max_lazy,M.good_match=Ut[M.level].good_length,M.nice_match=Ut[M.level].nice_length,M.max_chain_length=Ut[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=te-1,M.match_available=0,M.ins_h=0}function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(ae*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*V+1)*2),Ce(this.dyn_ltree),Ce(this.dyn_dtree),Ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ie+1),this.heap=new e.Buf16(2*F+1),Ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*F+1),Ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(M){var Be;return!M||!M.state?Te(M,p):(M.total_in=M.total_out=0,M.data_type=A,Be=M.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?Q:Ie,M.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),f)}function he(M){var Be=q(M);return Be===f&&ge(M.state),Be}function De(M,Be){return!M||!M.state||M.state.wrap!==2?p:(M.state.gzhead=Be,f)}function ve(M,Be,et,me,je,Ke){if(!M)return p;var Ct=1;if(Be===b&&(Be=6),me<0?(Ct=0,me=-me):me>15&&(Ct=2,me-=16),je<1||je>I||et!==O||me<8||me>15||Be<0||Be>9||Ke<0||Ke>E)return Te(M,p);me===8&&(me=9);var ye=new N;return M.state=ye,ye.strm=M,ye.wrap=Ct,ye.gzhead=null,ye.w_bits=me,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=je+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+te-1)/te),ye.window=new e.Buf8(ye.w_size*2),ye.head=new e.Buf16(ye.hash_size),ye.prev=new e.Buf16(ye.w_size),ye.lit_bufsize=1<<je+6,ye.pending_buf_size=ye.lit_bufsize*4,ye.pending_buf=new e.Buf8(ye.pending_buf_size),ye.d_buf=1*ye.lit_bufsize,ye.l_buf=3*ye.lit_bufsize,ye.level=Be,ye.strategy=Ke,ye.method=et,he(M)}function Ae(M,Be){return ve(M,Be,O,D,z,C)}function le(M,Be){var et,me,je,Ke;if(!M||!M.state||Be>c||Be<0)return M?Te(M,p):p;if(me=M.state,!M.output||!M.input&&M.avail_in!==0||me.status===Pe&&Be!==u)return Te(M,M.avail_out===0?v:p);if(me.strm=M,et=me.last_flush,me.last_flush=Be,me.status===Q)if(me.wrap===2)M.adler=0,oe(me,31),oe(me,139),oe(me,8),me.gzhead?(oe(me,(me.gzhead.text?1:0)+(me.gzhead.hcrc?2:0)+(me.gzhead.extra?4:0)+(me.gzhead.name?8:0)+(me.gzhead.comment?16:0)),oe(me,me.gzhead.time&255),oe(me,me.gzhead.time>>8&255),oe(me,me.gzhead.time>>16&255),oe(me,me.gzhead.time>>24&255),oe(me,me.level===9?2:me.strategy>=S||me.level<2?4:0),oe(me,me.gzhead.os&255),me.gzhead.extra&&me.gzhead.extra.length&&(oe(me,me.gzhead.extra.length&255),oe(me,me.gzhead.extra.length>>8&255)),me.gzhead.hcrc&&(M.adler=r(M.adler,me.pending_buf,me.pending,0)),me.gzindex=0,me.status=Y):(oe(me,0),oe(me,0),oe(me,0),oe(me,0),oe(me,0),oe(me,me.level===9?2:me.strategy>=S||me.level<2?4:0),oe(me,Oe),me.status=Ie);else{var Ct=O+(me.w_bits-8<<4)<<8,ye=-1;me.strategy>=S||me.level<2?ye=0:me.level<6?ye=1:me.level===6?ye=2:ye=3,Ct|=ye<<6,me.strstart!==0&&(Ct|=G),Ct+=31-Ct%31,me.status=Ie,J(me,Ct),me.strstart!==0&&(J(me,M.adler>>>16),J(me,M.adler&65535)),M.adler=1}if(me.status===Y)if(me.gzhead.extra){for(je=me.pending;me.gzindex<(me.gzhead.extra.length&65535)&&!(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ne(M),je=me.pending,me.pending===me.pending_buf_size));)oe(me,me.gzhead.extra[me.gzindex]&255),me.gzindex++;me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),me.gzindex===me.gzhead.extra.length&&(me.gzindex=0,me.status=re)}else me.status=re;if(me.status===re)if(me.gzhead.name){je=me.pending;do{if(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ne(M),je=me.pending,me.pending===me.pending_buf_size)){Ke=1;break}me.gzindex<me.gzhead.name.length?Ke=me.gzhead.name.charCodeAt(me.gzindex++)&255:Ke=0,oe(me,Ke)}while(Ke!==0);me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ke===0&&(me.gzindex=0,me.status=be)}else me.status=be;if(me.status===be)if(me.gzhead.comment){je=me.pending;do{if(me.pending===me.pending_buf_size&&(me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ne(M),je=me.pending,me.pending===me.pending_buf_size)){Ke=1;break}me.gzindex<me.gzhead.comment.length?Ke=me.gzhead.comment.charCodeAt(me.gzindex++)&255:Ke=0,oe(me,Ke)}while(Ke!==0);me.gzhead.hcrc&&me.pending>je&&(M.adler=r(M.adler,me.pending_buf,me.pending-je,je)),Ke===0&&(me.status=_e)}else me.status=_e;if(me.status===_e&&(me.gzhead.hcrc?(me.pending+2>me.pending_buf_size&&Ne(M),me.pending+2<=me.pending_buf_size&&(oe(me,M.adler&255),oe(me,M.adler>>8&255),M.adler=0,me.status=Ie)):me.status=Ie),me.pending!==0){if(Ne(M),M.avail_out===0)return me.last_flush=-1,f}else if(M.avail_in===0&&B(Be)<=B(et)&&Be!==u)return Te(M,v);if(me.status===Pe&&M.avail_in!==0)return Te(M,v);if(M.avail_in!==0||me.lookahead!==0||Be!==i&&me.status!==Pe){var U=me.strategy===S?Lt(me,Be):me.strategy===x?Et(me,Be):Ut[me.level].func(me,Be);if((U===ze||U===it)&&(me.status=Pe),U===Re||U===ze)return M.avail_out===0&&(me.last_flush=-1),f;if(U===ke&&(Be===o?t._tr_align(me):Be!==c&&(t._tr_stored_block(me,0,0,!1),Be===s&&(Ce(me.head),me.lookahead===0&&(me.strstart=0,me.block_start=0,me.insert=0))),Ne(M),M.avail_out===0))return me.last_flush=-1,f}return Be!==u?f:me.wrap<=0?h:(me.wrap===2?(oe(me,M.adler&255),oe(me,M.adler>>8&255),oe(me,M.adler>>16&255),oe(me,M.adler>>24&255),oe(me,M.total_in&255),oe(me,M.total_in>>8&255),oe(me,M.total_in>>16&255),oe(me,M.total_in>>24&255)):(J(me,M.adler>>>16),J(me,M.adler&65535)),Ne(M),me.wrap>0&&(me.wrap=-me.wrap),me.pending!==0?f:h)}function ct(M){var Be;return!M||!M.state?p:(Be=M.state.status,Be!==Q&&Be!==Y&&Be!==re&&Be!==be&&Be!==_e&&Be!==Ie&&Be!==Pe?Te(M,p):(M.state=null,Be===Ie?Te(M,g):f))}function yt(M,Be){var et=Be.length,me,je,Ke,Ct,ye,U,$,H;if(!M||!M.state||(me=M.state,Ct=me.wrap,Ct===2||Ct===1&&me.status!==Q||me.lookahead))return p;for(Ct===1&&(M.adler=n(M.adler,Be,et,0)),me.wrap=0,et>=me.w_size&&(Ct===0&&(Ce(me.head),me.strstart=0,me.block_start=0,me.insert=0),H=new e.Buf8(me.w_size),e.arraySet(H,Be,et-me.w_size,me.w_size,0),Be=H,et=me.w_size),ye=M.avail_in,U=M.next_in,$=M.input,M.avail_in=et,M.next_in=0,M.input=Be,Se(me);me.lookahead>=te;){je=me.strstart,Ke=me.lookahead-(te-1);do me.ins_h=(me.ins_h<<me.hash_shift^me.window[je+te-1])&me.hash_mask,me.prev[je&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=je,je++;while(--Ke);me.strstart=je,me.lookahead=te-1,Se(me)}return me.strstart+=me.lookahead,me.block_start=me.strstart,me.insert=me.lookahead,me.lookahead=0,me.match_length=me.prev_length=te-1,me.match_available=0,M.next_in=U,M.input=$,M.avail_in=ye,me.wrap=Ct,f}return Do.deflateInit=Ae,Do.deflateInit2=ve,Do.deflateReset=he,Do.deflateResetKeep=q,Do.deflateSetHeader=De,Do.deflate=le,Do.deflateEnd=ct,Do.deflateSetDictionary=yt,Do.deflateInfo="pako deflate (from Nodeca project)",Do}var Kc={},BI;function cM(){if(BI)return Kc;BI=1;var e=bc(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Kc.string2buf=function(o){var s,u,c,f,h,p=o.length,g=0;for(f=0;f<p;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<p&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(s=new e.Buf8(g),h=0,f=0;h<g;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<p&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?s[h++]=u:u<2048?(s[h++]=192|u>>>6,s[h++]=128|u&63):u<65536?(s[h++]=224|u>>>12,s[h++]=128|u>>>6&63,s[h++]=128|u&63):(s[h++]=240|u>>>18,s[h++]=128|u>>>12&63,s[h++]=128|u>>>6&63,s[h++]=128|u&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var u="",c=0;c<s;c++)u+=String.fromCharCode(o[c]);return u}return Kc.buf2binstring=function(o){return i(o,o.length)},Kc.binstring2buf=function(o){for(var s=new e.Buf8(o.length),u=0,c=s.length;u<c;u++)s[u]=o.charCodeAt(u);return s},Kc.buf2string=function(o,s){var u,c,f,h,p=s||o.length,g=new Array(p*2);for(c=0,u=0;u<p;){if(f=o[u++],f<128){g[c++]=f;continue}if(h=r[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<p;)f=f<<6|o[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return i(g,c)},Kc.utf8border=function(o,s){var u;for(s=s||o.length,s>o.length&&(s=o.length),u=s-1;u>=0&&(o[u]&192)===128;)u--;return u<0||u===0?s:u+r[o[u]]>s?u:s},Kc}var SS,zI;function dM(){if(zI)return SS;zI=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return SS=e,SS}var UI;function cQ(){if(UI)return Ef;UI=1;var e=uQ(),t=bc(),n=cM(),r=mk(),a=dM(),i=Object.prototype.toString,o=0,s=4,u=0,c=1,f=2,h=-1,p=0,g=8;function v(x){if(!(this instanceof v))return new v(x);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},x||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==u)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var A;if(typeof E.dictionary=="string"?A=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?A=new Uint8Array(E.dictionary):A=E.dictionary,C=e.deflateSetDictionary(this.strm,A),C!==u)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(x,E){var C=this.strm,A=this.options.chunkSize,O,I;if(this.ended)return!1;I=E===~~E?E:E===!0?s:o,typeof x=="string"?C.input=n.string2buf(x):i.call(x)==="[object ArrayBuffer]"?C.input=new Uint8Array(x):C.input=x,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(A),C.next_out=0,C.avail_out=A),O=e.deflate(C,I),O!==c&&O!==u)return this.onEnd(O),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(I===s||I===f))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&O!==c);return I===s?(O=e.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===u):(I===f&&(this.onEnd(u),C.avail_out=0),!0)},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg};function b(x,E){var C=new v(E);if(C.push(x,!0),C.err)throw C.msg||r[C.err];return C.result}function _(x,E){return E=E||{},E.raw=!0,b(x,E)}function S(x,E){return E=E||{},E.gzip=!0,b(x,E)}return Ef.Deflate=v,Ef.deflate=b,Ef.deflateRaw=_,Ef.gzip=S,Ef}var Cf={},uo={},ES,qI;function dQ(){if(qI)return ES;qI=1;var e=30,t=12;return ES=function(r,a){var i,o,s,u,c,f,h,p,g,v,b,_,S,x,E,C,A,O,I,D,z,W,ee,F,Z;i=r.state,o=r.next_in,F=r.input,s=o+(r.avail_in-5),u=r.next_out,Z=r.output,c=u-(a-r.avail_out),f=u+(r.avail_out-257),h=i.dmax,p=i.wsize,g=i.whave,v=i.wnext,b=i.window,_=i.hold,S=i.bits,x=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,A=(1<<i.distbits)-1;e:do{S<15&&(_+=F[o++]<<S,S+=8,_+=F[o++]<<S,S+=8),O=x[_&C];t:for(;;){if(I=O>>>24,_>>>=I,S-=I,I=O>>>16&255,I===0)Z[u++]=O&65535;else if(I&16){D=O&65535,I&=15,I&&(S<I&&(_+=F[o++]<<S,S+=8),D+=_&(1<<I)-1,_>>>=I,S-=I),S<15&&(_+=F[o++]<<S,S+=8,_+=F[o++]<<S,S+=8),O=E[_&A];n:for(;;){if(I=O>>>24,_>>>=I,S-=I,I=O>>>16&255,I&16){if(z=O&65535,I&=15,S<I&&(_+=F[o++]<<S,S+=8,S<I&&(_+=F[o++]<<S,S+=8)),z+=_&(1<<I)-1,z>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=I,S-=I,I=u-c,z>I){if(I=z-I,I>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(W=0,ee=b,v===0){if(W+=p-I,I<D){D-=I;do Z[u++]=b[W++];while(--I);W=u-z,ee=Z}}else if(v<I){if(W+=p+v-I,I-=v,I<D){D-=I;do Z[u++]=b[W++];while(--I);if(W=0,v<D){I=v,D-=I;do Z[u++]=b[W++];while(--I);W=u-z,ee=Z}}}else if(W+=v-I,I<D){D-=I;do Z[u++]=b[W++];while(--I);W=u-z,ee=Z}for(;D>2;)Z[u++]=ee[W++],Z[u++]=ee[W++],Z[u++]=ee[W++],D-=3;D&&(Z[u++]=ee[W++],D>1&&(Z[u++]=ee[W++]))}else{W=u-z;do Z[u++]=Z[W++],Z[u++]=Z[W++],Z[u++]=Z[W++],D-=3;while(D>2);D&&(Z[u++]=Z[W++],D>1&&(Z[u++]=Z[W++]))}}else if((I&64)===0){O=E[(O&65535)+(_&(1<<I)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((I&64)===0){O=x[(O&65535)+(_&(1<<I)-1)];continue t}else if(I&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&u<f);D=S>>3,o-=D,S-=D<<3,_&=(1<<S)-1,r.next_in=o,r.next_out=u,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=u<f?257+(f-u):257-(u-f),i.hold=_,i.bits=S},ES}var CS,HI;function fQ(){if(HI)return CS;HI=1;var e=bc(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return CS=function(p,g,v,b,_,S,x,E){var C=E.bits,A=0,O=0,I=0,D=0,z=0,W=0,ee=0,F=0,Z=0,V=0,ae,ie,te,X,ce,G=null,Q=0,Y,re=new e.Buf16(t+1),be=new e.Buf16(t+1),_e=null,Ie=0,Pe,Re,ke;for(A=0;A<=t;A++)re[A]=0;for(O=0;O<b;O++)re[g[v+O]]++;for(z=C,D=t;D>=1&&re[D]===0;D--);if(z>D&&(z=D),D===0)return _[S++]=1<<24|64<<16|0,_[S++]=1<<24|64<<16|0,E.bits=1,0;for(I=1;I<D&&re[I]===0;I++);for(z<I&&(z=I),F=1,A=1;A<=t;A++)if(F<<=1,F-=re[A],F<0)return-1;if(F>0&&(p===a||D!==1))return-1;for(be[1]=0,A=1;A<t;A++)be[A+1]=be[A]+re[A];for(O=0;O<b;O++)g[v+O]!==0&&(x[be[g[v+O]]++]=O);if(p===a?(G=_e=x,Y=19):p===i?(G=s,Q-=257,_e=u,Ie-=257,Y=256):(G=c,_e=f,Y=-1),V=0,O=0,A=I,ce=S,W=z,ee=0,te=-1,Z=1<<z,X=Z-1,p===i&&Z>n||p===o&&Z>r)return 1;for(;;){Pe=A-ee,x[O]<Y?(Re=0,ke=x[O]):x[O]>Y?(Re=_e[Ie+x[O]],ke=G[Q+x[O]]):(Re=96,ke=0),ae=1<<A-ee,ie=1<<W,I=ie;do ie-=ae,_[ce+(V>>ee)+ie]=Pe<<24|Re<<16|ke|0;while(ie!==0);for(ae=1<<A-1;V&ae;)ae>>=1;if(ae!==0?(V&=ae-1,V+=ae):V=0,O++,--re[A]===0){if(A===D)break;A=g[v+x[O]]}if(A>z&&(V&X)!==te){for(ee===0&&(ee=z),ce+=I,W=A-ee,F=1<<W;W+ee<D&&(F-=re[W+ee],!(F<=0));)W++,F<<=1;if(Z+=1<<W,p===i&&Z>n||p===o&&Z>r)return 1;te=V&X,_[te]=z<<24|W<<16|ce-S|0}}return V!==0&&(_[ce+V]=A-ee<<24|64<<16|0),E.bits=z,0},CS}var VI;function hQ(){if(VI)return uo;VI=1;var e=bc(),t=lM(),n=uM(),r=dQ(),a=fQ(),i=0,o=1,s=2,u=4,c=5,f=6,h=0,p=1,g=2,v=-2,b=-3,_=-4,S=-5,x=8,E=1,C=2,A=3,O=4,I=5,D=6,z=7,W=8,ee=9,F=10,Z=11,V=12,ae=13,ie=14,te=15,X=16,ce=17,G=18,Q=19,Y=20,re=21,be=22,_e=23,Ie=24,Pe=25,Re=26,ke=27,ze=28,it=29,Oe=30,Te=31,B=32,Ce=852,Ne=592,de=15,oe=de;function J(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Le(ve){var Ae;return!ve||!ve.state?v:(Ae=ve.state,ve.total_in=ve.total_out=Ae.total=0,ve.msg="",Ae.wrap&&(ve.adler=Ae.wrap&1),Ae.mode=E,Ae.last=0,Ae.havedict=0,Ae.dmax=32768,Ae.head=null,Ae.hold=0,Ae.bits=0,Ae.lencode=Ae.lendyn=new e.Buf32(Ce),Ae.distcode=Ae.distdyn=new e.Buf32(Ne),Ae.sane=1,Ae.back=-1,h)}function Se(ve){var Ae;return!ve||!ve.state?v:(Ae=ve.state,Ae.wsize=0,Ae.whave=0,Ae.wnext=0,Le(ve))}function Ve(ve,Ae){var le,ct;return!ve||!ve.state||(ct=ve.state,Ae<0?(le=0,Ae=-Ae):(le=(Ae>>4)+1,Ae<48&&(Ae&=15)),Ae&&(Ae<8||Ae>15))?v:(ct.window!==null&&ct.wbits!==Ae&&(ct.window=null),ct.wrap=le,ct.wbits=Ae,Se(ve))}function xt(ve,Ae){var le,ct;return ve?(ct=new xe,ve.state=ct,ct.window=null,le=Ve(ve,Ae),le!==h&&(ve.state=null),le):v}function ht(ve){return xt(ve,oe)}var Et=!0,Lt,Tt;function Ut(ve){if(Et){var Ae;for(Lt=new e.Buf32(512),Tt=new e.Buf32(32),Ae=0;Ae<144;)ve.lens[Ae++]=8;for(;Ae<256;)ve.lens[Ae++]=9;for(;Ae<280;)ve.lens[Ae++]=7;for(;Ae<288;)ve.lens[Ae++]=8;for(a(o,ve.lens,0,288,Lt,0,ve.work,{bits:9}),Ae=0;Ae<32;)ve.lens[Ae++]=5;a(s,ve.lens,0,32,Tt,0,ve.work,{bits:5}),Et=!1}ve.lencode=Lt,ve.lenbits=9,ve.distcode=Tt,ve.distbits=5}function ge(ve,Ae,le,ct){var yt,M=ve.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new e.Buf8(M.wsize)),ct>=M.wsize?(e.arraySet(M.window,Ae,le-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(yt=M.wsize-M.wnext,yt>ct&&(yt=ct),e.arraySet(M.window,Ae,le-ct,yt,M.wnext),ct-=yt,ct?(e.arraySet(M.window,Ae,le-ct,ct,0),M.wnext=ct,M.whave=M.wsize):(M.wnext+=yt,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=yt))),0}function N(ve,Ae){var le,ct,yt,M,Be,et,me,je,Ke,Ct,ye,U,$,H,pe=0,fe,Fe,ot,jt,un,Bt,Vt,Xt,In=new e.Buf8(4),zn,hr,pr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return v;le=ve.state,le.mode===V&&(le.mode=ae),Be=ve.next_out,yt=ve.output,me=ve.avail_out,M=ve.next_in,ct=ve.input,et=ve.avail_in,je=le.hold,Ke=le.bits,Ct=et,ye=me,Xt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=ae;break}for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(le.wrap&2&&je===35615){le.check=0,In[0]=je&255,In[1]=je>>>8&255,le.check=n(le.check,In,2,0),je=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((je&255)<<8)+(je>>8))%31){ve.msg="incorrect header check",le.mode=Oe;break}if((je&15)!==x){ve.msg="unknown compression method",le.mode=Oe;break}if(je>>>=4,Ke-=4,Vt=(je&15)+8,le.wbits===0)le.wbits=Vt;else if(Vt>le.wbits){ve.msg="invalid window size",le.mode=Oe;break}le.dmax=1<<Vt,ve.adler=le.check=1,le.mode=je&512?F:V,je=0,Ke=0;break;case C:for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(le.flags=je,(le.flags&255)!==x){ve.msg="unknown compression method",le.mode=Oe;break}if(le.flags&57344){ve.msg="unknown header flags set",le.mode=Oe;break}le.head&&(le.head.text=je>>8&1),le.flags&512&&(In[0]=je&255,In[1]=je>>>8&255,le.check=n(le.check,In,2,0)),je=0,Ke=0,le.mode=A;case A:for(;Ke<32;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.head&&(le.head.time=je),le.flags&512&&(In[0]=je&255,In[1]=je>>>8&255,In[2]=je>>>16&255,In[3]=je>>>24&255,le.check=n(le.check,In,4,0)),je=0,Ke=0,le.mode=O;case O:for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.head&&(le.head.xflags=je&255,le.head.os=je>>8),le.flags&512&&(In[0]=je&255,In[1]=je>>>8&255,le.check=n(le.check,In,2,0)),je=0,Ke=0,le.mode=I;case I:if(le.flags&1024){for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.length=je,le.head&&(le.head.extra_len=je),le.flags&512&&(In[0]=je&255,In[1]=je>>>8&255,le.check=n(le.check,In,2,0)),je=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=D;case D:if(le.flags&1024&&(U=le.length,U>et&&(U=et),U&&(le.head&&(Vt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ct,M,U,Vt)),le.flags&512&&(le.check=n(le.check,ct,U,M)),et-=U,M+=U,le.length-=U),le.length))break e;le.length=0,le.mode=z;case z:if(le.flags&2048){if(et===0)break e;U=0;do Vt=ct[M+U++],le.head&&Vt&&le.length<65536&&(le.head.name+=String.fromCharCode(Vt));while(Vt&&U<et);if(le.flags&512&&(le.check=n(le.check,ct,U,M)),et-=U,M+=U,Vt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=W;case W:if(le.flags&4096){if(et===0)break e;U=0;do Vt=ct[M+U++],le.head&&Vt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Vt));while(Vt&&U<et);if(le.flags&512&&(le.check=n(le.check,ct,U,M)),et-=U,M+=U,Vt)break e}else le.head&&(le.head.comment=null);le.mode=ee;case ee:if(le.flags&512){for(;Ke<16;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(je!==(le.check&65535)){ve.msg="header crc mismatch",le.mode=Oe;break}je=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),ve.adler=le.check=0,le.mode=V;break;case F:for(;Ke<32;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}ve.adler=le.check=J(je),je=0,Ke=0,le.mode=Z;case Z:if(le.havedict===0)return ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=je,le.bits=Ke,g;ve.adler=le.check=1,le.mode=V;case V:if(Ae===c||Ae===f)break e;case ae:if(le.last){je>>>=Ke&7,Ke-=Ke&7,le.mode=ke;break}for(;Ke<3;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}switch(le.last=je&1,je>>>=1,Ke-=1,je&3){case 0:le.mode=ie;break;case 1:if(Ut(le),le.mode=Y,Ae===f){je>>>=2,Ke-=2;break e}break;case 2:le.mode=ce;break;case 3:ve.msg="invalid block type",le.mode=Oe}je>>>=2,Ke-=2;break;case ie:for(je>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if((je&65535)!==(je>>>16^65535)){ve.msg="invalid stored block lengths",le.mode=Oe;break}if(le.length=je&65535,je=0,Ke=0,le.mode=te,Ae===f)break e;case te:le.mode=X;case X:if(U=le.length,U){if(U>et&&(U=et),U>me&&(U=me),U===0)break e;e.arraySet(yt,ct,M,U,Be),et-=U,M+=U,me-=U,Be+=U,le.length-=U;break}le.mode=V;break;case ce:for(;Ke<14;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(le.nlen=(je&31)+257,je>>>=5,Ke-=5,le.ndist=(je&31)+1,je>>>=5,Ke-=5,le.ncode=(je&15)+4,je>>>=4,Ke-=4,le.nlen>286||le.ndist>30){ve.msg="too many length or distance symbols",le.mode=Oe;break}le.have=0,le.mode=G;case G:for(;le.have<le.ncode;){for(;Ke<3;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.lens[pr[le.have++]]=je&7,je>>>=3,Ke-=3}for(;le.have<19;)le.lens[pr[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,zn={bits:le.lenbits},Xt=a(i,le.lens,0,19,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Xt){ve.msg="invalid code lengths set",le.mode=Oe;break}le.have=0,le.mode=Q;case Q:for(;le.have<le.nlen+le.ndist;){for(;pe=le.lencode[je&(1<<le.lenbits)-1],fe=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(fe<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(ot<16)je>>>=fe,Ke-=fe,le.lens[le.have++]=ot;else{if(ot===16){for(hr=fe+2;Ke<hr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(je>>>=fe,Ke-=fe,le.have===0){ve.msg="invalid bit length repeat",le.mode=Oe;break}Vt=le.lens[le.have-1],U=3+(je&3),je>>>=2,Ke-=2}else if(ot===17){for(hr=fe+3;Ke<hr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}je>>>=fe,Ke-=fe,Vt=0,U=3+(je&7),je>>>=3,Ke-=3}else{for(hr=fe+7;Ke<hr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}je>>>=fe,Ke-=fe,Vt=0,U=11+(je&127),je>>>=7,Ke-=7}if(le.have+U>le.nlen+le.ndist){ve.msg="invalid bit length repeat",le.mode=Oe;break}for(;U--;)le.lens[le.have++]=Vt}}if(le.mode===Oe)break;if(le.lens[256]===0){ve.msg="invalid code -- missing end-of-block",le.mode=Oe;break}if(le.lenbits=9,zn={bits:le.lenbits},Xt=a(o,le.lens,0,le.nlen,le.lencode,0,le.work,zn),le.lenbits=zn.bits,Xt){ve.msg="invalid literal/lengths set",le.mode=Oe;break}if(le.distbits=6,le.distcode=le.distdyn,zn={bits:le.distbits},Xt=a(s,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,zn),le.distbits=zn.bits,Xt){ve.msg="invalid distances set",le.mode=Oe;break}if(le.mode=Y,Ae===f)break e;case Y:le.mode=re;case re:if(et>=6&&me>=258){ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=je,le.bits=Ke,r(ve,ye),Be=ve.next_out,yt=ve.output,me=ve.avail_out,M=ve.next_in,ct=ve.input,et=ve.avail_in,je=le.hold,Ke=le.bits,le.mode===V&&(le.back=-1);break}for(le.back=0;pe=le.lencode[je&(1<<le.lenbits)-1],fe=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(fe<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(Fe&&(Fe&240)===0){for(jt=fe,un=Fe,Bt=ot;pe=le.lencode[Bt+((je&(1<<jt+un)-1)>>jt)],fe=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(jt+fe<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}je>>>=jt,Ke-=jt,le.back+=jt}if(je>>>=fe,Ke-=fe,le.back+=fe,le.length=ot,Fe===0){le.mode=Re;break}if(Fe&32){le.back=-1,le.mode=V;break}if(Fe&64){ve.msg="invalid literal/length code",le.mode=Oe;break}le.extra=Fe&15,le.mode=be;case be:if(le.extra){for(hr=le.extra;Ke<hr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.length+=je&(1<<le.extra)-1,je>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=_e;case _e:for(;pe=le.distcode[je&(1<<le.distbits)-1],fe=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(fe<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if((Fe&240)===0){for(jt=fe,un=Fe,Bt=ot;pe=le.distcode[Bt+((je&(1<<jt+un)-1)>>jt)],fe=pe>>>24,Fe=pe>>>16&255,ot=pe&65535,!(jt+fe<=Ke);){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}je>>>=jt,Ke-=jt,le.back+=jt}if(je>>>=fe,Ke-=fe,le.back+=fe,Fe&64){ve.msg="invalid distance code",le.mode=Oe;break}le.offset=ot,le.extra=Fe&15,le.mode=Ie;case Ie:if(le.extra){for(hr=le.extra;Ke<hr;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}le.offset+=je&(1<<le.extra)-1,je>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){ve.msg="invalid distance too far back",le.mode=Oe;break}le.mode=Pe;case Pe:if(me===0)break e;if(U=ye-me,le.offset>U){if(U=le.offset-U,U>le.whave&&le.sane){ve.msg="invalid distance too far back",le.mode=Oe;break}U>le.wnext?(U-=le.wnext,$=le.wsize-U):$=le.wnext-U,U>le.length&&(U=le.length),H=le.window}else H=yt,$=Be-le.offset,U=le.length;U>me&&(U=me),me-=U,le.length-=U;do yt[Be++]=H[$++];while(--U);le.length===0&&(le.mode=re);break;case Re:if(me===0)break e;yt[Be++]=le.length,me--,le.mode=re;break;case ke:if(le.wrap){for(;Ke<32;){if(et===0)break e;et--,je|=ct[M++]<<Ke,Ke+=8}if(ye-=me,ve.total_out+=ye,le.total+=ye,ye&&(ve.adler=le.check=le.flags?n(le.check,yt,ye,Be-ye):t(le.check,yt,ye,Be-ye)),ye=me,(le.flags?je:J(je))!==le.check){ve.msg="incorrect data check",le.mode=Oe;break}je=0,Ke=0}le.mode=ze;case ze:if(le.wrap&&le.flags){for(;Ke<32;){if(et===0)break e;et--,je+=ct[M++]<<Ke,Ke+=8}if(je!==(le.total&4294967295)){ve.msg="incorrect length check",le.mode=Oe;break}je=0,Ke=0}le.mode=it;case it:Xt=p;break e;case Oe:Xt=b;break e;case Te:return _;case B:default:return v}return ve.next_out=Be,ve.avail_out=me,ve.next_in=M,ve.avail_in=et,le.hold=je,le.bits=Ke,(le.wsize||ye!==ve.avail_out&&le.mode<Oe&&(le.mode<ke||Ae!==u))&&ge(ve,ve.output,ve.next_out,ye-ve.avail_out),Ct-=ve.avail_in,ye-=ve.avail_out,ve.total_in+=Ct,ve.total_out+=ye,le.total+=ye,le.wrap&&ye&&(ve.adler=le.check=le.flags?n(le.check,yt,ye,ve.next_out-ye):t(le.check,yt,ye,ve.next_out-ye)),ve.data_type=le.bits+(le.last?64:0)+(le.mode===V?128:0)+(le.mode===Y||le.mode===te?256:0),(Ct===0&&ye===0||Ae===u)&&Xt===h&&(Xt=S),Xt}function q(ve){if(!ve||!ve.state)return v;var Ae=ve.state;return Ae.window&&(Ae.window=null),ve.state=null,h}function he(ve,Ae){var le;return!ve||!ve.state||(le=ve.state,(le.wrap&2)===0)?v:(le.head=Ae,Ae.done=!1,h)}function De(ve,Ae){var le=Ae.length,ct,yt,M;return!ve||!ve.state||(ct=ve.state,ct.wrap!==0&&ct.mode!==Z)?v:ct.mode===Z&&(yt=1,yt=t(yt,Ae,le,0),yt!==ct.check)?b:(M=ge(ve,Ae,le,le),M?(ct.mode=Te,_):(ct.havedict=1,h))}return uo.inflateReset=Se,uo.inflateReset2=Ve,uo.inflateResetKeep=Le,uo.inflateInit=ht,uo.inflateInit2=xt,uo.inflate=N,uo.inflateEnd=q,uo.inflateGetHeader=he,uo.inflateSetDictionary=De,uo.inflateInfo="pako inflate (from Nodeca project)",uo}var kS,GI;function fM(){return GI||(GI=1,kS={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),kS}var AS,WI;function pQ(){if(WI)return AS;WI=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return AS=e,AS}var KI;function mQ(){if(KI)return Cf;KI=1;var e=hQ(),t=bc(),n=cM(),r=fM(),a=mk(),i=dM(),o=pQ(),s=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(h&&h.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15)===0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,p.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=n.string2buf(p.dictionary):s.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(g=e.inflateSetDictionary(this.strm,p.dictionary),g!==r.Z_OK)))throw new Error(a[g])}u.prototype.push=function(h,p){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,_,S,x,E,C,A=!1;if(this.ended)return!1;S=p===~~p?p:p===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&b&&(_=e.inflateSetDictionary(this.strm,b)),_===r.Z_BUF_ERROR&&A===!0&&(_=r.Z_OK,A=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(S===r.Z_FINISH||S===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(x=n.utf8border(g.output,g.next_out),E=g.next_out-x,C=n.buf2string(g.output,x),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,x,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(A=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(S=r.Z_FINISH),S===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(S===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,p){var g=new u(p);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function f(h,p){return p=p||{},p.raw=!0,c(h,p)}return Cf.Inflate=u,Cf.inflate=c,Cf.inflateRaw=f,Cf.ungzip=c,Cf}var TS,ZI;function gQ(){if(ZI)return TS;ZI=1;var e=bc().assign,t=cQ(),n=mQ(),r=fM(),a={};return e(a,t,n,r),TS=a,TS}var yQ=gQ();const gk=Qa(yQ);var RS,YI;function bQ(){if(YI)return RS;YI=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,u)=>{s?o(s):i(u)}):r.push(i),t.apply(this,r)})};return RS=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=u=>typeof u=="string"?o===u:u.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},RS}var vQ=bQ();const NS=Qa(vQ);var IS,XI;function wQ(){if(XI)return IS;XI=1;var e={};function t(te){return Array.isArray(te)?te:[te]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,u=/^\\#/,c=/\r?\n/g,f=/^\.*\/|^\.+$/,h="/";let p="node-ignore";typeof Symbol<"u"&&(p=Symbol.for("node-ignore"));const g=p,v=(te,X,ce)=>Object.defineProperty(te,X,{value:ce}),b=/([0-z])-([0-z])/g,_=()=>!1,S=te=>te.replace(b,(X,ce,G)=>ce.charCodeAt(0)<=G.charCodeAt(0)?X:n),x=te=>{const{length:X}=te;return te.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(te,X,ce)=>X+(ce.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(te,X)=>{const{length:ce}=X;return X.slice(0,ce-ce%2)+r}],[/[\\$.|*+(){^]/g,te=>`\\${te}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(te,X,ce)=>X+6<ce.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(te,X,ce)=>{const G=ce.replace(/\\\*/g,"[^\\/]*");return X+G}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(te,X,ce,G,Q)=>X===a?`\\[${ce}${x(G)}${Q}`:Q==="]"&&G.length%2===0?`[${S(ce)}${G}]`:"[]"],[/(?:[^*])$/,te=>/\/$/.test(te)?`${te}$`:`${te}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(te,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),A=(te,X)=>{let ce=C[te];return ce||(ce=E.reduce((G,[Q,Y])=>G.replace(Q,Y.bind(te)),te),C[te]=ce),X?new RegExp(ce,"i"):new RegExp(ce)},O=te=>typeof te=="string",I=te=>te&&O(te)&&!i.test(te)&&!o.test(te)&&te.indexOf("#")!==0,D=te=>te.split(c);class z{constructor(X,ce,G,Q){this.origin=X,this.pattern=ce,this.negative=G,this.regex=Q}}const W=(te,X)=>{const ce=te;let G=!1;te.indexOf("!")===0&&(G=!0,te=te.substr(1)),te=te.replace(s,"!").replace(u,"#");const Q=A(te,X);return new z(ce,te,G,Q)},ee=(te,X)=>{throw new X(te)},F=(te,X,ce)=>O(te)?te?F.isNotRelative(te)?ce(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:ce("path must not be empty",TypeError):ce(`path must be a string, but got \`${X}\``,TypeError),Z=te=>f.test(te);F.isNotRelative=Z,F.convert=te=>te;class V{constructor({ignorecase:X=!0,ignoreCase:ce=X,allowRelativePaths:G=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=ce,this._allowRelativePaths=G,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[g]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(I(X)){const ce=W(X,this._ignoreCase);this._added=!0,this._rules.push(ce)}}add(X){return this._added=!1,t(O(X)?D(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,ce){let G=!1,Q=!1;return this._rules.forEach(Y=>{const{negative:re}=Y;if(Q===re&&G!==Q||re&&!G&&!Q&&!ce)return;Y.regex.test(X)&&(G=!re,Q=re)}),{ignored:G,unignored:Q}}_test(X,ce,G,Q){const Y=X&&F.convert(X);return F(Y,X,this._allowRelativePaths?_:ee),this._t(Y,ce,G,Q)}_t(X,ce,G,Q){if(X in ce)return ce[X];if(Q||(Q=X.split(h)),Q.pop(),!Q.length)return ce[X]=this._testOne(X,G);const Y=this._t(Q.join(h)+h,ce,G,Q);return ce[X]=Y.ignored?Y:this._testOne(X,G)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const ae=te=>new V(te),ie=te=>F(te&&F.convert(te),te,_);if(ae.isPathValid=ie,ae.default=ae,IS=ae,typeof Gr<"u"&&(e&&e.IGNORE_TEST_WIN32||Gr.platform==="win32")){const te=ce=>/^\\\\\?\\/.test(ce)||/["<>|\u0000-\u001F]+/u.test(ce)?ce:ce.replace(/\\/g,"/");F.convert=te;const X=/^[a-z]:\//i;F.isNotRelative=ce=>X.test(ce)||Z(ce)}return IS}var _Q=wQ();const xQ=Qa(_Q);var OS,JI;function SQ(){if(JI)return OS;JI=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return OS=n,OS}var EQ=SQ();const js=Qa(EQ);var DS,QI;function CQ(){return QI||(QI=1,DS=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,u=a+1,c=[],f=[],h=[],p="",g=-1,v=0,b=1,_,S,x=function(){a>=i&&(_=n,S=a,n=r,r=_,a=i,i=S,o=!0,u=a+1)},E=function(I,D,z){return{x:I,y:D,k:z}},C=function(I,D){return{elem:I,t:D}},A=function(I,D,z){var W,ee,F;for(D>z?W=c[I-1+u]:W=c[I+1+u],F=Math.max(D,z),ee=F-I;ee<a&&F<i&&n[ee]===r[F];)++ee,++F;return c[I+u]=f.length,f[f.length]=new E(ee,F,W),F},O=function(I){var D,z,W;for(D=z=0,W=I.length-1;W>=0;--W)for(;D<I[W].x||z<I[W].y;)I[W].y-I[W].x>z-D?(o?h[h.length]=new C(r[z],g):h[h.length]=new C(r[z],b),++z):I[W].y-I[W].x<z-D?(o?h[h.length]=new C(n[D],b):h[h.length]=new C(n[D],g),++D):(h[h.length]=new C(n[D],v),p+=n[D],++D,++z)};return x(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return p},getses:function(){return h},compose:function(){var I,D,z,W,ee,F,Z,V;for(I=i-a,D=a+i+3,z={},Z=0;Z<D;++Z)z[Z]=-1,c[Z]=-1;W=-1;do{for(++W,V=-W;V<=I-1;++V)z[V+u]=A(V,z[V-1+u]+1,z[V+1+u]);for(V=I+W;V>=I+1;--V)z[V+u]=A(V,z[V-1+u]+1,z[V+1+u]);z[I+u]=A(I,z[I-1+u]+1,z[I+1+u])}while(z[I+u]!==i);for(s=I+2*W,ee=c[I+u],F=[];ee!==-1;)F[F.length]=new E(f[ee].x,f[ee].y,null),ee=f[ee].k;O(F)}}}),DS}var jS,e4;function kQ(){if(e4)return jS;e4=1;var e=CQ();function t(i,o){var s=new e(i,o);s.compose();for(var u=s.getses(),c,f,h=i.length-1,p=o.length-1,g=u.length-1;g>=0;--g)u[g].t===s.SES_COMMON?(f?(f.chain={file1index:h,file2index:p,chain:null},f=f.chain):(c={file1index:h,file2index:p,chain:null},f=c),h--,p--):u[g].t===s.SES_DELETE?h--:u[g].t===s.SES_ADD&&p--;var v={file1index:-1,file2index:-1,chain:null};return f?(f.chain=v,c):v}function n(i,o){for(var s=[],u=i.length,c=o.length,f=t(i,o);f!==null;f=f.chain){var h=u-f.file1index-1,p=c-f.file2index-1;u=f.file1index,c=f.file2index,(h||p)&&s.push({file1:[u+1,h],file2:[c+1,p]})}return s.reverse(),s}function r(i,o,s){var u,c=n(o,i),f=n(o,s),h=[];function p(X,ce){h.push([X.file1[0],ce,X.file1[1],X.file2[0],X.file2[1]])}for(u=0;u<c.length;u++)p(c[u],0);for(u=0;u<f.length;u++)p(f[u],2);h.sort(function(X,ce){return X[0]-ce[0]});var g=[],v=0;function b(X){X>v&&(g.push([1,v,X-v]),v=X)}for(var _=0;_<h.length;_++){for(var S=_,x=h[_],E=x[0],C=E+x[2];_<h.length-1;){var A=h[_+1],O=A[0];if(O>C)break;C=Math.max(C,O+A[2]),_++}if(b(E),S==_)x[4]>0&&g.push([x[1],x[3],x[4]]);else{var I={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(u=S;u<=_;u++){x=h[u];var D=x[1],z=I[D],W=x[0],ee=W+x[2],F=x[3],Z=F+x[4];z[0]=Math.min(F,z[0]),z[1]=Math.max(Z,z[1]),z[2]=Math.min(W,z[2]),z[3]=Math.max(ee,z[3])}var V=I[0][0]+(E-I[0][2]),ae=I[0][1]+(C-I[0][3]),ie=I[2][0]+(E-I[2][2]),te=I[2][1]+(C-I[2][3]);g.push([-1,V,ae-V,E,C-E,ie,te-ie])}v=C}return b(o.length),g}function a(i,o,s){var u=[],c=[i,o,s],f=r(i,o,s),h=[];function p(){h.length&&u.push({ok:h}),h=[]}function g(x){for(var E=0;E<x.length;E++)h.push(x[E])}function v(x){if(x[2]!=x[6])return!0;for(var E=x[1],C=x[5],A=0;A<x[2];A++)if(i[A+E]!=s[A+C])return!0;return!1}for(var b=0;b<f.length;b++){var _=f[b],S=_[0];S==-1?v(_)?(p(),u.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(c[0].slice(_[1],_[1]+_[2])):g(c[S].slice(_[1],_[1]+_[2]))}return p(),u}return jS=a,jS}var AQ=kQ();const TQ=Qa(AQ);class Jn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Jn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class F0 extends Jn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=F0.code,this.data={filepaths:t}}}F0.code="UnmergedPathsError";class Cn extends Jn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Cn.code,this.data={message:t}}}Cn.code="InternalError";class Rh extends Jn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Rh.code,this.data={filepath:t}}}Rh.code="UnsafeFilepathError";class Ts{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function Tw(e,t){return-(e<t)||+(e>t)}function hM(e,t){return Tw(e.path,t.path)}function pM(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const xs=2**32;function t4(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function th(e){const[t,n]=t4(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=t4(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%xs,ctimeNanoseconds:n%xs,mtimeSeconds:r%xs,mtimeNanoseconds:a%xs,dev:e.dev%xs,ino:e.ino%xs,mode:pM(e.mode%xs),uid:e.uid%xs,gid:e.gid%xs,size:e.size>-1?e.size%xs:0}}function RQ(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let MS=null;async function $l(e){return MS===null&&(MS=await IQ()),MS?mM(e):NQ(e)}function NQ(e){return new sM().update(e).digest("hex")}async function mM(e){const t=await crypto.subtle.digest("SHA-1",e);return RQ(t)}async function IQ(){try{if(await mM(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function OQ(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function DQ(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Wt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class ed{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Wt.isBuffer(t))return ed.fromBuffer(t);if(t===null)return new ed(null);throw new Cn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Cn("Index file is empty (.git/index)");const n=new ed,r=new Ts(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new Cn(`Invalid dircache magic file number: ${a}`);const i=await $l(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new Cn(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new Cn(`Unsupported dircache version: ${s}`);const u=r.readUInt32BE();let c=0;for(;!r.eof()&&c<u;){const f={};f.ctimeSeconds=r.readUInt32BE(),f.ctimeNanoseconds=r.readUInt32BE(),f.mtimeSeconds=r.readUInt32BE(),f.mtimeNanoseconds=r.readUInt32BE(),f.dev=r.readUInt32BE(),f.ino=r.readUInt32BE(),f.mode=r.readUInt32BE(),f.uid=r.readUInt32BE(),f.gid=r.readUInt32BE(),f.size=r.readUInt32BE(),f.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();f.flags=OQ(h);const p=t.indexOf(0,r.tell()+1)-r.tell();if(p<1)throw new Cn(`Got a path length of: ${p}`);if(f.path=r.toString("utf8",p),f.path.includes("..\\")||f.path.includes("../"))throw new Rh(f.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new Cn(`Expected 1-8 null characters but got '${v}' after ${f.path}`);if(r.eof())throw new Cn("Unexpected end of file")}f.stages=[],n._addEntry(f),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(hM)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=th(n);const i=Wt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Wt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Wt.alloc(r),i=new Ts(a),o=th(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(DQ(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Wt.alloc(12),n=new Ts(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(ed._entryToBuffer(s)),s.stages.length>1)for(const u of s.stages)u&&u!==s&&r.push(ed._entryToBuffer(u));r=await Promise.all(r);const a=Wt.concat(r),i=Wt.concat([t,a]),o=await $l(i);return Wt.concat([i,Wt.from(o,"hex")])}}function Wb(e,t,n=!0,r=!0){const a=th(e),i=th(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let PS=null;const FS=Symbol("IndexCache");function jQ(){return{map:new Map,stats:new Map}}async function MQ(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await ed.from(a);n.map.set(t,i),n.stats.set(t,r)}async function PQ(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Wb(r,a)}class Ta{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[FS]||(r[FS]=jQ());const o=`${n}/index`;PS===null&&(PS=new $m({maxPending:1/0}));let s,u=[];return await PS.acquire(o,async()=>{const c=r[FS];await PQ(t,o,c)&&await MQ(t,o,c);const f=c.map.get(o);if(u=f.unmergedPaths,u.length&&!a)throw new F0(u);if(s=await i(f),f._dirty){const h=await f.toObject();await t.write(o,h),c.stats.set(o,await t.lstat(o)),f._dirty=!1}}),s}}function Kb(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function nh(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function gM(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Kb(a),metadata:{},children:[]};t.set(a,i),i.parent=n(nh(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:Kb(a),metadata:i,parent:n(nh(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function FQ(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Cn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class LQ{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ta.acquire({fs:t,gitdir:n,cache:r},async function(i){return gM(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(Tw),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:th(r.metadata);t._type=r.type==="tree"?"tree":FQ(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const Rw=Symbol("GitWalkSymbol");function Nh(){const e=Object.create(null);return Object.defineProperty(e,Rw,{value:function({fs:t,gitdir:n,cache:r}){return new LQ({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class wr extends Jn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=wr.code,this.data={what:t}}}wr.code="NotFoundError";class hi extends Jn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=hi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}hi.code="ObjectTypeError";class Yu extends Jn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Yu.code,this.data={value:t}}}Yu.code="InvalidOidError";class L0 extends Jn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=L0.code,this.data={remote:t}}}L0.code="NoRefspecError";class Zb{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Zb(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Yb{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",u=a==="*";if(u!==(o==="*"))throw new Cn("Invalid refspec");return new Yb({remotePath:r,localPath:i,force:s,matchPrefix:u})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class yk{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Yb.from(r));return new yk(n)}add(t){const n=Yb.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function $Q(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const BQ=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},tm=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},n4={core:{filemode:tm,bare:tm,logallrefupdates:tm,symlinks:tm,ignorecase:tm,bigFileThreshold:BQ}},zQ=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,UQ=/^[A-Za-z0-9-.]+$/,qQ=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,HQ=/^[A-Za-z][A-Za-z-]*$/,VQ=/^(.*?)( *[#;].*)$/,GQ=e=>{const t=zQ.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},WQ=e=>{const t=qQ.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=KQ(r),i=ZQ(a);return[n,i]}return null},KQ=e=>{const t=VQ.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return r4(n)&&r4(r)?`${n}${r}`:n},r4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,ZQ=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),a4=e=>e!=null?e.toLowerCase():null,iE=(e,t,n)=>[a4(e),t,a4(n)].filter(r=>r!=null).join("."),i4=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:iE(n,a,r),sectionPath:iE(n,a,null),isSection:!!n}},YQ=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class bk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),u=GQ(s),c=u!=null;if(c)[n,r]=u;else{const h=WQ(s);h!=null&&([i,o]=h)}const f=iE(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:o,path:f}}):[]}static from(t){return new bk(t)}async get(t,n=!1){const r=i4(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const u=n4[i]&&n4[i][o];return u?u(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:u,isSection:c}=i4(t),f=YQ(this.parsedConfig,h=>h.path===s);if(n==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){const h=this.parsedConfig[f],p=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(f+1,0,p):this.parsedConfig[f]=p}else{const h=this.parsedConfig.findIndex(g=>g.path===u),p={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(UQ.test(a)&&HQ.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,p);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:u};this.parsedConfig.push(g,p)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class la{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return bk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Gy=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],XQ=["config","description","index","shallow","commondir"];let LS;async function Iu(e,t){return LS===void 0&&(LS=new $m),LS.acquire(e,t)}class Dt{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:u=!1,pruneTags:c=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new Yu(_);const f=await la.get({fs:t,gitdir:n});if(!s){if(s=await f.getall(`remote.${r}.fetch`),s.length===0)throw new L0(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=yk.from(s),p=new Map;if(c){const _=await Dt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Dt.deleteRefs({fs:t,gitdir:n,refs:_.map(S=>`refs/tags/${S}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await Dt.exists({fs:t,gitdir:n,ref:_})){const S=a.get(_);p.set(_,S)}}const g=h.translate([...a.keys()]);for(const[_,S]of g){const x=a.get(_);p.set(S,x)}const v=h.translate([...i.keys()]);for(const[_,S]of v){const x=i.get(_),E=h.translateOne(x);E&&p.set(S,`ref: ${E}`)}const b=[];if(u){for(const _ of h.localNamespaces()){const S=(await Dt.listRefs({fs:t,gitdir:n,filepath:_})).map(x=>`${_}/${x}`);for(const x of S)p.has(x)||b.push(x)}b.length>0&&await Dt.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[_,S]of p)await Iu(_,async()=>t.write(At.join(n,_),`${S.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Yu(a);await Iu(r,async()=>t.write(At.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Iu(r,async()=>t.write(At.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Dt.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(At.join(n,s))));let a=await Iu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Zb.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await Iu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Dt.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Dt.packedRefs({fs:t,gitdir:n}),o=Gy(r).filter(s=>!XQ.includes(s));for(const s of o){const u=await Iu(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(u)return Dt.resolve({fs:t,gitdir:n,ref:u.trim(),depth:a})}throw new wr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Dt.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Dt.packedRefs({fs:t,gitdir:n}),i=Gy(r);for(const o of i)if(await Iu(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new wr(r)}static async expandAgainstMap({ref:t,map:n}){const r=Gy(t);for(const a of r)if(await n.has(a))return a;throw new wr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Dt.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=Gy(t);for(const o of i){const s=a.get(o);if(s)return Dt.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new wr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Iu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Zb.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Dt.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort($Q),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Dt.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Dt.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Dt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function JQ(e,t){return Tw(o4(e),o4(t))}function o4(e){return e.mode==="040000"?e.path+"/":e.path}function yM(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Cn(`Unexpected GitTree entry mode: ${e}`)}function QQ(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Cn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new Cn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=yM(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new Rh(s);const u=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:u,type:o})}return t}function eee(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Cn(`Could not understand file mode: ${e}`)}function tee(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=eee(e.mode),e.type||(e.type=yM(e.mode)),e}class Ri{constructor(t){if(Wt.isBuffer(t))this._entries=QQ(t);else if(Array.isArray(t))this._entries=t.map(tee);else throw new Cn("invalid type passed to GitTree constructor");this._entries.sort(hM)}static from(t){return new Ri(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(JQ),Wt.concat(t.map(n=>{const r=Wt.from(n.mode.replace(/^0/,"")),a=Wt.from(" "),i=Wt.from(n.path,"utf8"),o=Wt.from([0]),s=Wt.from(n.oid,"hex");return Wt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Ih{static wrap({type:t,object:n}){return Wt.concat([Wt.from(`${t} ${n.byteLength.toString()}\0`),Wt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new Cn(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Wt.from(t.slice(r+1))}}}async function bM({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function nee(e,t){const n=new Ts(e),r=s4(n);if(r!==t.byteLength)throw new Cn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=s4(n);let i;const o=u4(n,t);if(o.byteLength===a)i=o;else{i=Wt.alloc(a);const s=new Ts(i);for(s.copy(o);!n.eof();)s.copy(u4(n,t));const u=s.tell();if(a!==u)throw new Cn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${u} bytes`)}return i}function s4(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function l4(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function u4(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=l4(e,n&a,4);let s=l4(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function ree(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function vM(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:ree(e)}class wM{constructor(t){if(typeof Wt>"u")throw new Error("Missing Buffer dependency");this.stream=vM(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Wt.alloc(0):(n&&(n=Wt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>aee(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Wt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function aee(e){return e.reduce((t,n)=>t+n.length,0)}async function iee(e,t){const n=new wM(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Cn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new Cn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:u,ofs:c,reference:f}=await oee(n),h=new gk.Inflate;for(;!h.result;){const p=await n.chunk();if(!p)break;if(h.push(p,!1),h.err)throw new Cn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==u)throw new Cn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(p.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:f,ofs:c})}}}}async function oee(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Wt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function _M(e){return gk.inflate(e)}function see(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function lee(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class rh{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new Ts(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Cn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Cn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let f=0;f<o;f++){const h=r.slice(20).toString("hex");s[f]=h}r.seek(r.tell()+4*o);const u=new Map;for(let f=0;f<o;f++)u.set(s[f],r.readUInt32BE());const c=r.slice(20).toString("hex");return new rh({hashes:s,crcs:{},offsets:u,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],u={},c=new Map;let f=null,h=null;await iee([t],async({data:_,type:S,reference:x,offset:E,num:C})=>{f===null&&(f=C);const A=Math.floor((f-C)*100/f);A!==h&&r&&await r({phase:"Receiving objects",loaded:f-C,total:f}),h=A,S=a[S],["commit","tree","blob","tag"].includes(S)?i[E]={type:S,offset:E}:S==="ofs-delta"?i[E]={type:S,offset:E}:S==="ref-delta"&&(i[E]={type:S,offset:E})});const p=Object.keys(i).map(Number);for(const[_,S]of p.entries()){const x=_+1===p.length?t.byteLength-20:p[_+1],E=i[S],C=sQ.buf(t.slice(S,x))>>>0;E.end=x,E.crc=C}const g=new rh({pack:Promise.resolve(t),packfileSha:o,crcs:u,hashes:s,offsets:c,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const S=Math.floor(v*100/f);S!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:f}),v++,h=S;const x=i[_];if(!x.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});b[g.readDepth]+=1;const A=await $l(Ih.wrap({type:E,object:C}));x.oid=A,s.push(A),c.set(A,_),u[A]=x.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(c,f)=>{t.push(Wt.from(c,f))};n("ff744f63","hex"),n("00000002","hex");const r=new Ts(Wt.alloc(256*4));for(let c=0;c<256;c++){let f=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&f++;r.writeUInt32BE(f)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new Ts(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new Ts(Wt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const o=Wt.concat(t),s=await $l(o),u=Wt.alloc(20);return u.write(s,"hex"),Wt.concat([o,u])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Cn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Cn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new Ts(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new Cn("Unrecognized type: 0b"+o.toString(2));const u=i&15;let c=u;i&128&&(c=lee(a,u));let h=null,p=null;if(s==="ofs_delta"){const v=see(a),b=t-v;({object:h,type:s}=await this.readSlice({start:b}))}if(s==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:v}))}const g=r.slice(a.tell());if(p=Wt.from(await _M(g)),p.byteLength!==c)throw new Cn(`Packfile told us object would have length ${c} but it had length ${p.byteLength}`);return h&&(p=Wt.from(nee(p,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:p}),{type:s,format:"content",object:p}}}const Wy=Symbol("PackfileCache");async function uee({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return rh.fromIdx({idx:i,getExternalRefDelta:n})}function vk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[Wy]||(t[Wy]=new Map);let o=t[Wy].get(n);return o||(o=uee({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[Wy].set(n,o)),o}async function cee({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await vk({fs:e,cache:t,filename:u,getExternalRefDelta:i});if(c.error)throw new Cn(c.error);if(c.offsets.has(r)){if(!c.pack){const h=u.replace(/idx$/,"pack");c.pack=e.read(h)}const f=await c.read({oid:r,getExternalRefDelta:i});return f.format="content",f.source=`objects/pack/${s.replace(/idx$/,"pack")}`,f}}return null}async function Lr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=f=>Lr({fs:e,cache:t,gitdir:n,oid:f});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Wt.from("tree 0\0")}),o||(o=await bM({fs:e,gitdir:n,oid:r})),!o){if(o=await cee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new wr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Wt.from(await _M(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await $l(o.object);if(s!==r)throw new Cn(`SHA check failed! Expected ${r}, computed ${s}`);const{object:u,type:c}=Ih.unwrap(o.object);if(o.type=c,o.object=u,o.format="content",a==="content")return o;throw new Cn(`invalid requested format "${a}"`)}class ns extends Jn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=ns.code,this.data={noun:t,where:n,canForce:r}}}ns.code="AlreadyExistsError";class $0 extends Jn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=$0.code,this.data={nouns:t,short:n,matches:r}}}$0.code="AmbiguousError";class B0 extends Jn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=B0.code,this.data={filepaths:t}}}B0.code="CheckoutConflictError";class z0 extends Jn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=z0.code,this.data={ref:t,oid:n}}}z0.code="CommitNotFetchedError";class U0 extends Jn{constructor(){super("Empty response from git server."),this.code=this.name=U0.code,this.data={}}}U0.code="EmptyServerResponseError";class q0 extends Jn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=q0.code,this.data={}}}q0.code="FastForwardError";class H0 extends Jn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=H0.code,this.data={prettyDetails:t,result:n}}}H0.code="GitPushError";class ah extends Jn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=ah.code,this.data={statusCode:t,statusMessage:n,response:r}}}ah.code="HttpError";class Xu extends Jn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Xu.code,this.data={reason:t}}}Xu.code="InvalidFilepathError";class Yo extends Jn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Yo.code,this.data={ref:t,suggestion:n}}}Yo.code="InvalidRefNameError";class V0 extends Jn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=V0.code,this.data={depth:t}}}V0.code="MaxDepthError";class Oh extends Jn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Oh.code,this.data={}}}Oh.code="MergeNotSupportedError";class Dh extends Jn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Dh.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Dh.code="MergeConflictError";class Ya extends Jn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Ya.code,this.data={role:t}}}Ya.code="MissingNameError";class ki extends Jn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=ki.code,this.data={parameter:t}}}ki.code="MissingParameterError";class G0 extends Jn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=G0.code,this.data={errors:t},this.errors=t}}G0.code="MultipleGitError";let W0=class xM extends Jn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=xM.code,this.data={expected:t,actual:n}}};W0.code="ParseError";class ih extends Jn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=ih.code,this.data={reason:t}}}ih.code="PushRejectedError";class $u extends Jn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=$u.code,this.data={capability:t,parameter:n}}}$u.code="RemoteCapabilityError";class K0 extends Jn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=K0.code,this.data={preview:t,response:n}}}K0.code="SmartHttpError";class Z0 extends Jn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Z0.code,this.data={url:t,transport:n,suggestion:r}}}Z0.code="UnknownTransportError";class Y0 extends Jn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=Y0.code,this.data={url:t}}}Y0.code="UrlParseError";class jh extends Jn{constructor(){super("The operation was canceled."),this.code=this.name=jh.code,this.data={}}}jh.code="UserCanceledError";class X0 extends Jn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=X0.code,this.data={filepath:t}}}X0.code="IndexResetError";class J0 extends Jn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=J0.code,this.data={ref:t}}}J0.code="NoCommitError";var dee=Object.freeze({__proto__:null,AlreadyExistsError:ns,AmbiguousError:$0,CheckoutConflictError:B0,CommitNotFetchedError:z0,EmptyServerResponseError:U0,FastForwardError:q0,GitPushError:H0,HttpError:ah,InternalError:Cn,InvalidFilepathError:Xu,InvalidOidError:Yu,InvalidRefNameError:Yo,MaxDepthError:V0,MergeNotSupportedError:Oh,MergeConflictError:Dh,MissingNameError:Ya,MissingParameterError:ki,MultipleGitError:G0,NoRefspecError:L0,NotFoundError:wr,ObjectTypeError:hi,ParseError:W0,PushRejectedError:ih,RemoteCapabilityError:$u,SmartHttpError:K0,UnknownTransportError:Z0,UnsafeFilepathError:Rh,UrlParseError:Y0,UserCanceledError:jh,UnmergedPathsError:F0,IndexResetError:X0,NoCommitError:J0});function oE({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=fee(r),`${e} <${t}> ${n} ${r}`}function fee(e){const t=hee(pee(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function hee(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function pee(e){return e===0?e:-e}function Sl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Xb(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:mee(a)}}function mee(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),gee(r)}function gee(e){return e===0?e:-e}class li{constructor(t){if(typeof t=="string")this._tag=t;else if(Wt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=li.render(t);else throw new Cn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new li(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${oE(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=Xb(r.tagger)),r.committer&&(r.committer=Xb(r.committer)),r}withoutSignature(){const t=Sl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Sl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Wt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=Sl(i);const o=a+i;return li.from(o)}}function $S(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function yee(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Fr{constructor(t){if(typeof t=="string")this._commit=t;else if(Wt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Fr.render(t);else throw new Cn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Fr.justHeaders(t),a=Fr.justMessage(t),i=Sl(r+`
gpgsig`+$S(n)+`
`+a);return new Fr(i)}static from(t){return new Fr(t)}toObject(){return Wt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Fr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return Sl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Fr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=Xb(r.author)),r.committer&&(r.committer=Xb(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Cn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${oE(r)}
`;const a=t.committer||t.author;return n+=`committer ${oE(a)}
`,t.gpgsig&&(n+="gpgsig"+$S(t.gpgsig)),n}static render(t){return Fr.renderHeaders(t)+`
`+Sl(t.message)}render(){return this._commit}withoutSignature(){const t=Sl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Sl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return yee(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Fr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=Sl(o);const u=Fr.justHeaders(t._commit)+`
gpgsig`+$S(o)+`
`+i;return Fr.from(u)}}async function oh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ri.from([]),oid:r};const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=li.from(i).parse().object,oh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Fr.from(i).parse().tree,oh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new hi(r,a,"tree");return{tree:Ri.from(i),oid:r}}class bee{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await Dt.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof wr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const u=await oh({fs:t,cache:this.cache,gitdir:n,oid:s});return u.type="tree",u.mode="40000",o.set(".",u),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const u=s.oid;if(!u)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:c,object:f}=await Lr({fs:r,cache:a,gitdir:i,oid:u});if(c!==s.type)throw new hi(u,c,s.type);const h=Ri.from(f);for(const p of h)o.set(At.join(n,p.path),p);return h.entries().map(p=>At.join(n,p.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=pM(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:u,object:c}=await Lr({fs:r,cache:a,gitdir:i,oid:s});u!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function bo({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,Rw,{value:function({fs:n,gitdir:r,cache:a}){return new bee({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class vee{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(At.join(a,n));return i===null?null:i.map(o=>At.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=th(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Ta.acquire({fs:r,gitdir:a,cache:i},async function(s){const u=s.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),p=typeof Gr<"u"?Gr.platform!=="win32":!0;if(!u||Wb(c,u,h,p)){const g=await t.content();g===void 0?o=void 0:(o=await $l(Ih.wrap({type:"blob",object:g})),u&&o===u.oid&&(!h||c.mode===u.mode)&&Wb(c,u,h,p)&&s.insert({filepath:t._fullpath,stats:c,oid:o}))}else o=u.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await la.get({fs:t,gitdir:n}),this.config)}}function Q0(){const e=Object.create(null);return Object.defineProperty(e,Rw,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new vee({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function wee(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const SM=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class _ee{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*xee(e){const t=new _ee;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function Ju({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(u,c)=>c,reduce:o=async(u,c)=>{const f=SM(c);return u!==void 0&&f.unshift(u),f},iterate:s=(u,c)=>Promise.all([...c].map(u))}){const u=a.map(g=>g[Rw]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(u.length).fill("."),f=wee(0,u.length),h=async g=>{f.map(_=>{const S=g[_];g[_]=S&&new u[_].ConstructEntry(S)});const b=(await Promise.all(f.map(_=>{const S=g[_];return S?u[_].readdir(S):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:xee(b)}},p=async g=>{const{entries:v,children:b}=await h(g),_=v.find(x=>x&&x._fullpath)._fullpath,S=await i(_,v);if(S!==null){let x=await s(p,b);return x=x.filter(E=>E!==void 0),o(S,x)}};return p(c)}async function sE(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=At.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?sE(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function See(e){return Eee(e)&&c4(e.then)&&c4(e.catch)}function Eee(e){return e&&typeof e=="object"}function c4(e){return typeof e=="function"}function d4(e){return See((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const f4=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function h4(e,t){if(d4(t))for(const n of f4)e[`_${n}`]=t[n].bind(t);else for(const n of f4)e[`_${n}`]=NS(t[n].bind(t));d4(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=sE.bind(null,e):t.rm?e._rm=NS(t.rm.bind(t)):t.rmdir.length>2?e._rm=NS(t.rmdir.bind(t)):e._rm=sE.bind(null,e)}class nn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?h4(this,t.promises):h4(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Wt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(nh(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=nh(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(Tw),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Wt.isBuffer(r)?r:Wt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Je(e,t){if(t===void 0)throw new ki(e)}async function Jb(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function Cee({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Je("fs",e),Je("dir",t),Je("gitdir",n);const i=new nn(e),o=[bo({ref:r}),Q0(),Nh()];let s=[];await Ta.acquire({fs:i,gitdir:n,cache:a},async function(c){s=c.unmergedPaths});const u=await Ju({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(c,[f,h,p]){const g=!await Jb(h,p),v=s.includes(c),b=!await Jb(p,f);if(g||v)return f?{path:c,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(b)return!1;throw new X0(c)}});await Ta.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const f of u)if(f!==!1){if(!f){await i.rmdir(`${t}/${f.path}`,{recursive:!0}),c.delete({filepath:f.path});continue}if(f.type==="blob"){const h=new TextDecoder().decode(f.content);await i.write(`${t}/${f.path}`,h,{mode:f.mode}),c.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class Mh{static async isIgnored({fs:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a}){if(Kb(a)===".git")return!0;if(a===".")return!1;let i="";const o=At.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:At.join(n,".gitignore"),filepath:a}],u=a.split("/").filter(Boolean);for(let f=1;f<u.length;f++){const h=u.slice(0,f).join("/"),p=u.slice(f).join("/");s.push({gitignore:At.join(n,h,".gitignore"),filepath:p})}let c=!1;for(const f of s){let h;try{h=await t.read(f.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const p=xQ().add(i);p.add(h);const g=nh(f.filepath);if(g!=="."&&p.ignores(g))return!0;c?c=!p.test(f.filepath).unignored:c=p.test(f.filepath).ignored}return c}}async function kee({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let BS=null;async function EM(e){return BS===null&&(BS=Tee()),BS?Aee(e):gk.deflate(e)}async function Aee(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function Tee(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Ni({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Ih.wrap({type:n,object:r})),i=await $l(r),r=Wt.from(await EM(r))),o||await kee({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function CM(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function Ree({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r);const s=new nn(e);await Ta.acquire({fs:s,gitdir:n,cache:a},async u=>{const f=await(await la.get({fs:s,gitdir:n})).get("core.autocrlf");return lE({dir:t,gitdir:n,fs:s,filepath:r,index:u,force:i,parallel:o,autocrlf:f})})}catch(s){throw s.caller="git.add",s}}async function lE({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const u=r.map(async p=>{if(!i&&await Mh.isIgnored({fs:n,dir:e,gitdir:t,filepath:p}))return;const g=await n.lstat(At.join(e,p));if(!g)throw new wr(p);if(g.isDirectory()){const v=await n.readdir(At.join(e,p));if(o){const b=v.map(_=>lE({dir:e,gitdir:t,fs:n,filepath:[At.join(p,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(b)}else for(const b of v)await lE({dir:e,gitdir:t,fs:n,filepath:[At.join(p,b)],index:a,force:i,parallel:o,autocrlf:s})}else{const v=g.isSymbolicLink()?await n.readlink(At.join(e,p)).then(CM):await n.read(At.join(e,p),{autocrlf:s});if(v===null)throw new wr(p);const b=await Ni({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:p,stats:g,oid:b})}}),c=await Promise.allSettled(u),f=c.filter(p=>p.status==="rejected").map(p=>p.reason);if(f.length>1)throw new G0(f);if(f.length===1)throw f[0];return c.filter(p=>p.status==="fulfilled"&&p.value).map(p=>p.value)}async function Bm({fs:e,gitdir:t,path:n}){return(await la.get({fs:e,gitdir:t})).get(n)}function kM(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Qu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await Bm({fs:e,gitdir:t,path:"user.name"}),email:await Bm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=kM({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function sh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await Bm({fs:e,gitdir:t,path:"user.name"}),email:await Bm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=kM({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function AM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=li.from(i).parse().object,AM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new hi(r,a,"commit");return{commit:Fr.from(i),oid:r}}async function lh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await AM({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function Nw({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:p,tree:g}){let v=!1;h||(h=await Dt.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,_;try{b=await Dt.resolve({fs:e,gitdir:r,ref:h}),_=await lh({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(u&&v)throw new J0(h);const S=u?await Qu({fs:e,gitdir:r,author:i,commit:_.commit}):await Qu({fs:e,gitdir:r,author:i});if(!S)throw new Ya("author");const x=u?await sh({fs:e,gitdir:r,author:S,committer:o,commit:_.commit}):await sh({fs:e,gitdir:r,author:S,committer:o});if(!x)throw new Ya("committer");return Ta.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const A=gM(E.entries).get(".");if(g||(g=await TM({fs:e,gitdir:r,inode:A,dryRun:c})),p?p=await Promise.all(p.map(D=>Dt.resolve({fs:e,gitdir:r,ref:D}))):u?p=_.commit.parent:p=b?[b]:[],!a)if(u)a=_.commit.message;else throw new ki("message");let O=Fr.from({tree:g,parent:p,author:S,committer:x,message:a});s&&(O=await Fr.sign(O,n,s));const I=await Ni({fs:e,gitdir:r,type:"commit",object:O.toObject(),dryRun:c});return!f&&!c&&await Dt.writeRef({fs:e,gitdir:r,ref:h,value:I}),I})}async function TM({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const u of a)u.type==="tree"&&(u.metadata.mode="040000",u.metadata.oid=await TM({fs:e,gitdir:t,inode:u,dryRun:r}));const i=a.map(u=>({mode:u.metadata.mode,path:u.basename,oid:u.metadata.oid,type:u.type})),o=Ri.from(i);return await Ni({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function eg({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Xu("leading-slash");if(a.endsWith("/"))throw new Xu("trailing-slash");const i=r,o=await oh({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const u=a.split("/");r=await RM({fs:e,cache:t,gitdir:n,tree:s,pathArray:u,oid:i,filepath:a})}return r}async function RM({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const u of r)if(u.path===s){if(a.length===0)return u.oid;{const{type:c,object:f}=await Lr({fs:e,cache:t,gitdir:n,oid:u.oid});if(c!=="tree")throw new hi(i,c,"tree",o);return r=Ri.from(f),RM({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new wr(`file or directory found at "${i}:${o}"`)}async function Ph({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await eg({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await oh({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function tg({fs:e,gitdir:t,tree:n}){const r=Ri.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function Nee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:u,committer:c,signingKey:f}){let h;try{h=await Dt.resolve({gitdir:r,fs:e,ref:a})}catch(S){if(!(S instanceof wr))throw S}let g=(await Ph({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(S=>S.path!==i);else for(const S of g)if(S.path===i)throw new ns("note",i);typeof o=="string"&&(o=Wt.from(o,"utf8"));const v=await Ni({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await tg({fs:e,gitdir:r,tree:g});return await Nw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:u,committer:c,signingKey:f})}async function Iee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:u,committer:c,signingKey:f,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i),Je("note",o),f&&Je("onSign",t);const p=new nn(e),g=await Qu({fs:p,gitdir:r,author:u});if(!g)throw new Ya("author");const v=await sh({fs:p,gitdir:r,author:g,committer:c});if(!v)throw new Ya("committer");return await Nee({fs:new nn(p),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:v,signingKey:f})}catch(p){throw p.caller="git.addNote",p}}async function NM({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==js.clean(n))throw new Yo(n,js.clean(n));const i=await la.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new ns("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await la.save({fs:e,gitdir:t,config:i})}async function Oee({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("remote",r),Je("url",a),await NM({fs:new nn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function Dee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!f&&await Dt.exists({fs:e,gitdir:r,ref:a}))throw new ns("tag",a);const h=await Dt.resolve({fs:e,gitdir:r,ref:u||"HEAD"}),{type:p}=await Lr({fs:e,cache:t,gitdir:r,oid:h});let g=li.from({object:h,type:p,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});c&&(g=await li.sign(g,n,c));const v=await Ni({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Dt.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function jee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("ref",a),c&&Je("onSign",t);const p=new nn(e),g=await Qu({fs:p,gitdir:r,author:i});if(!g)throw new Ya("tagger");return await Dee({fs:p,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:u,signingKey:c,force:f})}catch(p){throw p.caller="git.annotatedTag",p}}async function Mee({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==js.clean(n))throw new Yo(n,js.clean(n));const o=`refs/heads/${n}`;if(!i&&await Dt.exists({fs:e,gitdir:t,ref:o}))throw new ns("branch",n,!1);let s;try{s=await Dt.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await Dt.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await Dt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Pee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Mee({fs:new nn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const IM=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function wk({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:u,noCheckout:c,noUpdateHead:f,dryRun:h,force:p,track:g=!0}){let v;if(r)try{v=await Dt.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Dt.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const S=`${o}/${s}`;if(b=await Dt.resolve({fs:e,gitdir:i,ref:S}),g){const x=await la.get({fs:e,gitdir:i});await x.set(`branch.${s}.remote`,o),await x.set(`branch.${s}.merge`,`refs/heads/${s}`),await la.save({fs:e,gitdir:i,config:x})}await Dt.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:b})}if(!c){let _;try{_=await Fee({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:p,filepaths:u})}catch(A){throw A instanceof wr&&A.data.what===b?new z0(s,b):A}const S=_.filter(([A])=>A==="conflict").map(([A,O])=>O);if(S.length>0)throw new B0(S);const x=_.filter(([A])=>A==="error").map(([A,O])=>O);if(x.length>0)throw new Cn(x.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:u!=null&&u.length>0?"file":"branch"});return}let E=0;const C=_.length;await Ta.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([O])=>O==="delete"||O==="delete-index").map(async function([O,I]){const D=`${a}/${I}`;O==="delete"&&await e.rm(D),A.delete({filepath:I}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ta.acquire({fs:e,gitdir:i,cache:t},async function(A){for(const[O,I]of _)if(O==="rmdir"||O==="rmdir-index"){const D=`${a}/${I}`;try{O==="rmdir-index"&&A.delete({filepath:I}),await e.rmdir(D),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(z){if(z.code==="ENOTEMPTY")console.log(`Did not delete ${I} because directory is not empty`);else throw z}}}),await Promise.all(_.filter(([A])=>A==="mkdir"||A==="mkdir-index").map(async function([A,O]){const I=`${a}/${O}`;await e.mkdir(I),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ta.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([O])=>O==="create"||O==="create-index"||O==="update"||O==="mkdir-index").map(async function([O,I,D,z,W]){const ee=`${a}/${I}`;try{if(O!=="create-index"&&O!=="mkdir-index"){const{object:Z}=await Lr({fs:e,cache:t,gitdir:i,oid:D});if(W&&await e.rm(ee),z===33188)await e.write(ee,Z);else if(z===33261)await e.write(ee,Z,{mode:511});else if(z===40960)await e.writelink(ee,Z);else throw new Cn(`Invalid mode 0o${z.toString(8)} detected in blob ${D}`)}const F=await e.lstat(ee);z===33261&&(F.mode=493),O==="mkdir-index"&&(F.mode=57344),A.insert({filepath:I,stats:F,oid:D}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(F){console.log(F)}}))}),r&&await r({previousHead:v,newHead:b,type:u!=null&&u.length>0?"file":"branch"})}if(!f){const _=await Dt.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await Dt.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await Dt.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function Fee({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let u=0;return Ju({fs:e,cache:t,dir:r,gitdir:a,trees:[bo({ref:i}),Q0(),Nh()],map:async function(c,[f,h,p]){if(c===".")return;if(s&&!s.some(v=>IM(c,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++u}),[!!p,!!f,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(c)?["delete",c]:void 0;case"010":switch(await f.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await f.oid(),await f.mode()];case"commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`new entry Unhandled type ${await f.type()}`]}case"011":switch(`${await f.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await f.oid()!==await h.oid()?o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]:await f.mode()!==await h.mode()?o?["update",c,await f.oid(),await f.mode(),!0]:["conflict",c]:["create-index",c,await f.oid(),await f.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${f.type}`]}case"100":return["delete-index",c];case"101":switch(await p.type()){case"tree":return["rmdir",c];case"blob":return await p.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await p.type()}`]}case"110":case"111":switch(`${await p.type()}-${await f.type()}`){case"tree-tree":return;case"blob-blob":{if(await p.oid()===await f.oid()&&await p.mode()===await f.mode()&&!o)return;if(h){if(await h.oid()!==await p.oid()&&await h.oid()!==await f.oid())return o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await f.oid(),await f.mode(),await f.mode()!==await p.mode()];return await f.mode()!==await p.mode()?["update",c,await f.oid(),await f.mode(),!0]:await f.oid()!==await p.oid()?["update",c,await f.oid(),await f.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await f.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`update entry Unhandled type ${await p.type()}-${await f.type()}`]}}},reduce:async function(c,f){return f=SM(f),c?c&&c[0]==="rmdir"?(f.push(c),f):(f.unshift(c),f):f}})}async function OM({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=At.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:u=!1,noUpdateHead:c=o===void 0,dryRun:f=!1,force:h=!1,track:p=!0,cache:g={}}){try{Je("fs",e),Je("dir",r),Je("gitdir",a);const v=o||"HEAD";return await wk({fs:new nn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:s,noCheckout:u,noUpdateHead:c,dryRun:f,force:h,track:p})}catch(v){throw v.caller="git.checkout",v}}const Lee=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function rd(e){const t=Lee.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function vc({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Dt.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Dt.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:rd(a)}function $ee(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function DM({username:e="",password:t=""}){return`Basic ${Wt.from(`${e}:${t}`).toString("base64")}`}async function ng(e,t){const n=vM(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Qb(e){let t=0;const n=[];await ng(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function p4(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function uE(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class Jr{static flush(){return Wt.from("0000","utf8")}static delim(){return Wt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Wt.from(t));const n=t.length+4,r=uE(4,n);return Wt.concat([Wt.from(r,"utf8"),t])}static streamReader(t){const n=new wM(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function m4(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function g4(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=Jr.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new U0;if(o.includes("version 2"))return m4(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new W0(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return m4(i);const[u,c]=zS(s,"\0","\\x00");if(c.split(" ").map(f=>n.add(f)),u!=="0000000000000000000000000000000000000000 capabilities^{}"){const[f,h]=zS(u," "," ");for(r.set(h,f);;){const p=await i();if(p===!0)break;if(p!==null){const[g,v]=zS(p.toString("utf8")," "," ");r.set(v,g)}}}for(const f of n)if(f.startsWith("symref=")){const h=f.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function zS(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new W0(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const y4=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,b4=(e,t)=>{(t.username||t.password)&&(e.Authorization=DM(t)),t.headers&&Object.assign(e,t.headers)},US=async e=>{try{const t=Wt.from(await Qb(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class ev{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:u,headers:c,protocolVersion:f}){let{url:h,auth:p}=p4(u);const g=o?y4(o,h):h;(p.username||p.password)&&(c.Authorization=DM(p)),f===2&&(c["Git-Protocol"]="version=2");let v,b,_=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:c}),b=!1,v.statusCode===401||v.statusCode===203){const S=_?i:r;if(S){if(p=await S(h,{...p,headers:{...c}}),p&&p.cancel)throw new jh;p&&(b4(c,p),_=!0,b=!0)}}else v.statusCode===200&&_&&a&&await a(h,p);while(b);if(v.statusCode!==200){const{response:S}=await US(v);throw new ah(v.statusCode,v.statusMessage,S)}if(v.headers["content-type"]===`application/x-${s}-advertisement`){const S=await g4(v.body,{service:s});return S.auth=p,S}else{const{preview:S,response:x,data:E}=await US(v);try{const C=await g4([E],{service:s});return C.auth=p,C}catch{throw new K0(S,x)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:u}){const c=p4(i);c&&(i=c.url),r&&(i=y4(r,i)),u["content-type"]=`application/x-${a}-request`,u.accept=`application/x-${a}-result`,b4(u,o);const f=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:u});if(f.statusCode!==200){const{response:h}=US(f);throw new ah(f.statusCode,f.statusMessage,h)}return f}}function Bee({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class Iw{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",ev),n.set("https",ev);const r=Bee({url:t});if(!r)throw new Y0(t);if(n.has(r.transport))return n.get(r.transport);throw new Z0(t,r.transport,r.transport==="ssh"?$ee(t):void 0)}}let Zc=null;class zm{static async read({fs:t,gitdir:n}){Zc===null&&(Zc=new $m);const r=At.join(n,"shallow"),a=new Set;return await Zc.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){Zc===null&&(Zc=new $m);const a=At.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Zc.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Zc.acquire(a,async function(){await t.rm(a)})}}async function zee({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Uee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(At.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,u=await vk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(u.error)throw new Cn(u.error);if(u.offsets.has(r))return!0}return!1}async function v4({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>Lr({fs:e,cache:t,gitdir:n,oid:s});let o=await zee({fs:e,gitdir:n,oid:r});return o||(o=await Uee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function qee(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function jM(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const Ow={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class mb{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Hee(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function MM(e){const t=new mb;let n="";return(async()=>(await ng(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Hee(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class PM{static demux(t){const n=Jr.streamReader(t),r=new mb,a=new mb,i=new mb,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const u=s.slice(1);i.write(u),r.end(),i.end(),a.destroy(new Error(u.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function Vee(e){const{packetlines:t,packfile:n,progress:r}=PM.demux(e),a=[],i=[],o=[];let s=!1,u=!1;return new Promise((c,f)=>{ng(t,h=>{const p=h.toString("utf8").trim();if(p.startsWith("shallow")){const g=p.slice(-41).trim();g.length!==40&&f(new Yu(g)),a.push(g)}else if(p.startsWith("unshallow")){const g=p.slice(-41).trim();g.length!==40&&f(new Yu(g)),i.push(g)}else if(p.startsWith("ACK")){const[,g,v]=p.split(" ");o.push({oid:g,status:v}),v||(u=!0)}else p.startsWith("NAK")?(s=!0,u=!0):(u=!0,s=!0);u&&(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{u||(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Gee({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let u=` ${e.join(" ")}`;for(const c of t)s.push(Jr.encode(`want ${c}${u}
`)),u="";for(const c of r)s.push(Jr.encode(`shallow ${c}
`));a!==null&&s.push(Jr.encode(`deepen ${a}
`)),i!==null&&s.push(Jr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)s.push(Jr.encode(`deepen-not ${c}
`));s.push(Jr.flush());for(const c of n)s.push(Jr.encode(`have ${c}
`));return s.push(Jr.encode(`done
`)),s}async function _k({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,ref:c,remoteRef:f,remote:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:S=!1,tags:x=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:O=!1}){const I=c||await vc({fs:e,gitdir:u,test:!0}),D=await la.get({fs:e,gitdir:u}),z=h||I&&await D.get(`branch.${I}.remote`)||"origin",W=p||await D.get(`remote.${z}.url`);if(typeof W>"u")throw new ki("remote OR url");const ee=f||I&&await D.get(`branch.${I}.merge`)||c||"HEAD";g===void 0&&(g=await D.get("http.corsProxy"));const F=Iw.getRemoteHelperFor({url:W}),Z=await F.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:W,headers:C,protocolVersion:1}),V=Z.auth,ae=Z.refs;if(ae.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new $u("shallow","depth");if(b!==null&&!Z.capabilities.has("deepen-since"))throw new $u("deepen-since","since");if(_.length>0&&!Z.capabilities.has("deepen-not"))throw new $u("deepen-not","exclude");if(S===!0&&!Z.capabilities.has("deepen-relative"))throw new $u("deepen-relative","relative");const{oid:ie,fullref:te}=Dt.resolveAgainstMap({ref:ee,map:ae});for(const Oe of ae.keys())Oe===te||Oe==="HEAD"||Oe.startsWith("refs/heads/")||x&&Oe.startsWith("refs/tags/")||ae.delete(Oe);const X=jM([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Ow.agent}`]);S&&X.push("deepen-relative");const ce=E?[ie]:ae.values(),G=E?[I]:await Dt.listRefs({fs:e,gitdir:u,filepath:"refs"});let Q=[];for(let Oe of G)try{Oe=await Dt.expand({fs:e,gitdir:u,ref:Oe});const Te=await Dt.resolve({fs:e,gitdir:u,ref:Oe});await v4({fs:e,cache:t,gitdir:u,oid:Te})&&Q.push(Te)}catch{}Q=[...new Set(Q)];const Y=await zm.read({fs:e,gitdir:u}),re=Z.capabilities.has("shallow")?[...Y]:[],be=Gee({capabilities:X,wants:ce,haves:Q,shallows:re,depth:v,since:b,exclude:_}),_e=Wt.from(await Qb(be)),Ie=await F.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:W,auth:V,body:[_e],headers:C}),Pe=await Vee(Ie.body);Ie.headers&&(Pe.headers=Ie.headers);for(const Oe of Pe.shallows)if(!Y.has(Oe))try{const{object:Te}=await Lr({fs:e,cache:t,gitdir:u,oid:Oe}),B=new Fr(Te),Ce=await Promise.all(B.headers().parent.map(de=>v4({fs:e,cache:t,gitdir:u,oid:de})));Ce.length===0||Ce.every(de=>de)||Y.add(Oe)}catch{Y.add(Oe)}for(const Oe of Pe.unshallows)Y.delete(Oe);if(await zm.write({fs:e,gitdir:u,oids:Y}),E){const Oe=new Map([[te,ie]]),Te=new Map;let B=10,Ce=te;for(;B--;){const oe=Z.symrefs.get(Ce);if(oe===void 0)break;Te.set(Ce,oe),Ce=oe}const Ne=ae.get(Ce);Ne&&Oe.set(Ce,Ne);const{pruned:de}=await Dt.updateRemoteRefs({fs:e,gitdir:u,remote:z,refs:Oe,symrefs:Te,tags:x,prune:A});A&&(Pe.pruned=de)}else{const{pruned:Oe}=await Dt.updateRemoteRefs({fs:e,gitdir:u,remote:z,refs:ae,symrefs:Z.symrefs,tags:x,prune:A,pruneTags:O});A&&(Pe.pruned=Oe)}if(Pe.HEAD=Z.symrefs.get("HEAD"),Pe.HEAD===void 0){const{oid:Oe}=Dt.resolveAgainstMap({ref:"HEAD",map:ae});for(const[Te,B]of ae.entries())if(Te!=="HEAD"&&B===Oe){Pe.HEAD=Te;break}}const Re=te.startsWith("refs/tags")?"tag":"branch";if(Pe.FETCH_HEAD={oid:ie,description:`${Re} '${rd(te)}' of ${W}`},r||a){const Oe=MM(Pe.progress);ng(Oe,async Te=>{if(a&&await a(Te),r){const B=Te.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);B&&await r({phase:B[1].trim(),loaded:parseInt(B[2],10),total:parseInt(B[3],10)})}})}const ke=Wt.from(await Qb(Pe.packfile));if(Ie.body.error)throw Ie.body.error;const ze=ke.slice(-20).toString("hex"),it={defaultBranch:Pe.HEAD,fetchHead:Pe.FETCH_HEAD.oid,fetchHeadDescription:Pe.FETCH_HEAD.description};if(Pe.headers&&(it.headers=Pe.headers),A&&(it.pruned=Pe.pruned),ze!==""&&!qee(ke)){it.packfile=`objects/pack/pack-${ze}.pack`;const Oe=At.join(u,it.packfile);await e.write(Oe,ke);const Te=Ce=>Lr({fs:e,cache:t,gitdir:u,oid:Ce}),B=await rh.fromPack({pack:ke,getExternalRefDelta:Te,onProgress:r});await e.write(Oe.replace(/\.pack$/,".idx"),await B.toBuffer())}return it}async function FM({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function Wee({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:u,dir:c,gitdir:f,url:h,corsProxy:p,ref:g,remote:v,depth:b,since:_,exclude:S,relative:x,singleBranch:E,noCheckout:C,noTags:A,headers:O}){try{if(await FM({fs:e,gitdir:f}),await NM({fs:e,gitdir:f,remote:v,url:h,force:!1}),p){const z=await la.get({fs:e,gitdir:f});await z.set("http.corsProxy",p),await la.save({fs:e,gitdir:f,config:z})}const{defaultBranch:I,fetchHead:D}=await _k({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:f,ref:g,remote:v,corsProxy:p,depth:b,since:_,exclude:S,relative:x,singleBranch:E,headers:O,tags:!A});if(D===null)return;g=g||I,g=g.replace("refs/heads/",""),await wk({fs:e,cache:t,onProgress:r,onPostCheckout:u,dir:c,gitdir:f,ref:g,remote:v,noCheckout:C})}catch(I){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),I}}async function Kee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c=At.join(u,".git"),url:f,corsProxy:h=void 0,ref:p=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:_=[],relative:S=!1,singleBranch:x=!1,noCheckout:E=!1,noTags:C=!1,headers:A={},cache:O={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),E||Je("dir",u),Je("url",f),await Wee({fs:new nn(e),cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c,url:f,corsProxy:h,ref:p,remote:g,depth:v,since:b,exclude:_,relative:S,singleBranch:x,noCheckout:E,noTags:C,headers:A})}catch(I){throw I.caller="git.clone",I}}async function Zee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:p,tree:g,cache:v={}}){try{Je("fs",e),u||Je("message",a),s&&Je("onSign",t);const b=new nn(e);return await Nw({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u,dryRun:c,noUpdateBranch:f,ref:h,parent:p,tree:g})}catch(b){throw b.caller="git.commit",b}}async function Yee({fs:e,dir:t,gitdir:n=At.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Je("fs",e),Je("gitdir",n),await vc({fs:new nn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Xee({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Dt.exists({fs:e,gitdir:t,ref:n}))throw new wr(n);const a=await Dt.expand({fs:e,gitdir:t,ref:n}),i=await vc({fs:e,gitdir:t,fullname:!0});if(a===i){const u=await Dt.resolve({fs:e,gitdir:t,ref:a});await Dt.writeRef({fs:e,gitdir:t,ref:"HEAD",value:u})}await Dt.deleteRef({fs:e,gitdir:t,ref:a});const o=rd(n),s=await la.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await la.save({fs:e,gitdir:t,config:s})}async function Jee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Xee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Qee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{Je("fs",e),Je("ref",r),await Dt.deleteRef({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function ete({fs:e,gitdir:t,remote:n}){const r=await la.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await la.save({fs:e,gitdir:t,config:r})}async function tte({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("remote",r),await ete({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function nte({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Dt.deleteRef({fs:e,gitdir:t,ref:n})}async function rte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await nte({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function ate({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function ite({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await vk({fs:e,cache:t,filename:u,getExternalRefDelta:a});if(c.error)throw new Cn(c.error);for(const f of c.offsets.keys())f.startsWith(r)&&i.push(f)}return i}async function ote({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>Lr({fs:e,cache:t,gitdir:n,oid:s}),i=await ate({fs:e,gitdir:n,oid:r}),o=await ite({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new $0("oids",r,i):new wr(`an object matching "${r}"`)}async function ste({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await ote({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function lte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Dt.expand({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function xk({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,u)=>({index:u,oid:s}));for(;o.length;){const s=new Set;for(const{oid:c,index:f}of o)a[c]||(a[c]=new Set),a[c].add(f),a[c].size===i&&s.add(c);if(s.size>0)return[...s];const u=new Map;for(const{oid:c,index:f}of o)try{const{object:h}=await Lr({fs:e,cache:t,gitdir:n,oid:c}),p=Fr.from(h),{parent:g}=p.parseHeaders();for(const v of g)(!a[v]||!a[v].has(f))&&u.set(v+":"+f,{oid:v,index:f})}catch{}o=Array.from(u.values())}return[]}const qS=/^.*(\r?\n|$)/gm;function ute({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(qS),u=a.match(qS),c=o.match(qS),f=TQ(s,u,c),h=7;let p="",g=!0;for(const v of f)v.ok&&(p+=v.ok.join("")),v.conflict&&(g=!1,p+=`${"<".repeat(h)} ${n}
`,p+=v.conflict.a.join(""),p+=`${"=".repeat(h)}
`,p+=v.conflict.b.join(""),p+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:p}}async function cte({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:u="ours",baseName:c="base",theirName:f="theirs",dryRun:h=!1,abortOnConflict:p=!0,mergeDriver:g}){const v=bo({ref:i}),b=bo({ref:o}),_=bo({ref:s}),S=[],x=[],E=[],C=[],A=await Ju({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,_],map:async function(O,[I,D,z]){const W=Kb(O),ee=await Jb(I,D),F=await Jb(z,D);switch(`${ee}-${F}`){case"false-false":return{mode:await D.mode(),path:W,oid:await D.oid(),type:await D.type()};case"false-true":return z?{mode:await z.mode(),path:W,oid:await z.oid(),type:await z.type()}:void 0;case"true-false":return I?{mode:await I.mode(),path:W,oid:await I.oid(),type:await I.type()}:void 0;case"true-true":{if(I&&D&&z&&await I.type()==="blob"&&await D.type()==="blob"&&await z.type()==="blob")return dte({fs:e,gitdir:r,path:W,ours:I,base:D,theirs:z,ourName:u,baseName:c,theirName:f,mergeDriver:g}).then(async Z=>{if(Z.cleanMerge)p||a.insert({filepath:O,oid:Z.mergeResult.oid,stage:0});else if(S.push(O),x.push(O),!p){const V=await D.oid(),ae=await I.oid(),ie=await z.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:V,stage:1}),a.insert({filepath:O,oid:ae,stage:2}),a.insert({filepath:O,oid:ie,stage:3})}return Z.mergeResult});if(D&&!I&&z&&await D.type()==="blob"&&await z.type()==="blob"){if(S.push(O),E.push(O),!p){const Z=await D.oid(),V=await z.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:Z,stage:1}),a.insert({filepath:O,oid:V,stage:3})}return{mode:await z.mode(),oid:await z.oid(),type:"blob",path:W}}if(D&&I&&!z&&await D.type()==="blob"&&await I.type()==="blob"){if(S.push(O),C.push(O),!p){const Z=await D.oid(),V=await I.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:Z,stage:1}),a.insert({filepath:O,oid:V,stage:2})}return{mode:await I.mode(),oid:await I.oid(),type:"blob",path:W}}if(D&&!I&&!z&&await D.type()==="blob")return;throw new Oh}}},reduce:S.length!==0&&(!n||p)?void 0:async(O,I)=>{const D=I.filter(Boolean);if(O&&!(O&&O.type==="tree"&&D.length===0)){if(D.length>0){const W=new Ri(D).toObject(),ee=await Ni({fs:e,gitdir:r,type:"tree",object:W,dryRun:h});O.oid=ee}return O}}});return S.length!==0?(n&&!p&&await Ju({fs:e,cache:t,dir:n,gitdir:r,trees:[bo({ref:A.oid})],map:async function(O,[I]){const D=`${n}/${O}`;if(await I.type()==="blob"){const z=await I.mode(),W=new TextDecoder().decode(await I.content());await e.write(D,W,{mode:z})}return!0}}),new Dh(S,x,E,C)):A.oid}async function dte({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:u,dryRun:c,mergeDriver:f=ute}){const h="blob",p=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};const g=Wt.from(await r.content()).toString("utf8"),v=Wt.from(await a.content()).toString("utf8"),b=Wt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:S}=await f({branches:[u,o,s],contents:[v,g,b],path:n}),x=await Ni({fs:e,gitdir:t,type:"blob",object:Wt.from(_,"utf8"),dryRun:c});return{cleanMerge:S,mergeResult:{mode:p,path:n,oid:x,type:h}}}async function LM({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:p,committer:g,signingKey:v,onSign:b,mergeDriver:_}){a===void 0&&(a=await vc({fs:e,gitdir:r,fullname:!0})),a=await Dt.expand({fs:e,gitdir:r,ref:a}),i=await Dt.expand({fs:e,gitdir:r,ref:i});const S=await Dt.resolve({fs:e,gitdir:r,ref:a}),x=await Dt.resolve({fs:e,gitdir:r,ref:i}),E=await xk({fs:e,cache:t,gitdir:r,oids:[S,x]});if(E.length!==1)throw new Oh;const C=E[0];if(C===x)return{oid:S,alreadyMerged:!0};if(o&&C===S)return!u&&!c&&await Dt.writeRef({fs:e,gitdir:r,ref:a,value:x}),{oid:x,fastForward:!0};{if(s)throw new q0;const A=await Ta.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async I=>cte({fs:e,cache:t,dir:n,gitdir:r,index:I,ourOid:S,theirOid:x,baseOid:C,ourName:rd(a),baseName:"base",theirName:rd(i),dryRun:u,abortOnConflict:f,mergeDriver:_}));if(A instanceof Dh)throw A;return h||(h=`Merge branch '${rd(i)}' into ${rd(a)}`),{oid:await Nw({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:A,parent:[S,x],author:p,committer:g,signingKey:v,onSign:b,dryRun:u,noUpdateBranch:c}),tree:A,mergeCommit:!0}}}async function $M({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:u,gitdir:c,ref:f,url:h,remote:p,remoteRef:g,prune:v,pruneTags:b,fastForward:_,fastForwardOnly:S,corsProxy:x,singleBranch:E,headers:C,author:A,committer:O,signingKey:I}){try{if(!f){const W=await vc({fs:e,gitdir:c});if(!W)throw new ki("ref");f=W}const{fetchHead:D,fetchHeadDescription:z}=await _k({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:x,ref:f,url:h,remote:p,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:b});await LM({fs:e,cache:t,gitdir:c,ours:f,theirs:D,fastForward:_,fastForwardOnly:S,message:`Merge ${z}`,author:A,committer:O,signingKey:I,dryRun:!1,noUpdateBranch:!1}),await wk({fs:e,cache:t,onProgress:r,dir:u,gitdir:c,ref:f,remote:p,noCheckout:!1})}catch(D){throw D.caller="git.pull",D}}async function fte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:p,corsProxy:g,singleBranch:v,headers:b={},cache:_={}}){try{Je("fs",e),Je("http",t),Je("gitdir",u);const S={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await $M({fs:new nn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:p,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:S,committer:S})}catch(S){throw S.caller="git.fastForward",S}}async function hte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,remote:f,remoteRef:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:S=!1,tags:x=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:O=!1,cache:I={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),await _k({fs:new nn(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:u,ref:c,remote:f,remoteRef:h,url:p,corsProxy:g,depth:v,since:b,exclude:_,relative:S,tags:x,singleBranch:E,headers:C,prune:A,pruneTags:O})}catch(D){throw D.caller="git.fetch",D}}async function pte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await xk({fs:new nn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function BM({fs:e,filepath:t}){if(await e.exists(At.join(t,".git")))return t;{const n=nh(t);if(n===t)throw new wr(`git root for ${t}`);return BM({fs:e,filepath:n})}}async function mte({fs:e,filepath:t}){try{return Je("fs",e),Je("filepath",t),await BM({fs:new nn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function gte({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await Bm({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function yte({fs:e,gitdir:t,path:n}){return(await la.get({fs:e,gitdir:t})).getall(n)}async function bte({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await yte({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function vte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Je("http",e),Je("url",i);const c=await Iw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),f={capabilities:[...c.capabilities]};for(const[h,p]of c.refs){const g=h.split("/"),v=g.pop();let b=f;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}for(const[h,p]of c.symrefs){const g=h.split("/"),v=g.pop();let b=f;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}return f}catch(u){throw u.caller="git.getRemoteInfo",u}}function zM(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const u=i.replace("^{}",""),c=a[a.length-1],f=c.ref===u?c:a.find(h=>h.ref===u);if(f===void 0)throw new Error("I did not expect this to happen");f.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function wte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2}){try{Je("http",e),Je("url",i);const f=await Iw.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(f.protocolVersion===2)return{protocolVersion:f.protocolVersion,capabilities:f.capabilities2};const h={};for(const p of f.capabilities){const[g,v]=p.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:zM(f,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function _te({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Ih.wrap({type:e,object:t})),r=await $l(t)),{oid:r,object:t}}async function xte({object:e}){try{Je("object",e),typeof e=="string"?e=Wt.from(e,"utf8"):e=Wt.from(e);const t="blob",{oid:n,object:r}=await _te({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function Ste({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=At.join(r,i);const o=await e.read(i),s=c=>Lr({fs:e,cache:t,gitdir:a,oid:c}),u=await rh.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await u.toBuffer()),{oids:[...u.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function Ete({fs:e,onProgress:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a,cache:i={}}){try{return Je("fs",e),Je("dir",n),Je("gitdir",n),Je("filepath",a),await Ste({fs:new nn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function Cte({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){try{return Je("fs",e),Je("gitdir",r),t||Je("dir",n),await FM({fs:new nn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function UM({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await zm.read({fs:e,gitdir:n});if(!r)throw new ki("oid");if(!a)throw new ki("ancestor");if(r===a)return!1;const s=[r],u=new Set;let c=0;for(;s.length;){if(c++===i)throw new V0(i);const f=s.shift(),{type:h,object:p}=await Lr({fs:e,cache:t,gitdir:n,oid:f});if(h!=="commit")throw new hi(f,h,"commit");const g=Fr.from(p).parse();for(const v of g.parent)if(v===a)return!0;if(!o.has(f))for(const v of g.parent)u.has(v)||(s.push(v),u.add(v))}return!1}async function kte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),Je("ancestor",a),await UM({fs:new nn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function Ate({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r),Mh.isIgnored({fs:new nn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function Tte({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("gitdir",n),Dt.listBranches({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function Rte({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Dt.resolve({gitdir:t,fs:e,ref:n}),i=[];return await qM({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ta.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function qM({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await Ph({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await qM({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:At.join(i,s.path)}):a.push(At.join(i,s.path))}async function Nte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),await Rte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function Ite({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Dt.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof wr)return[]}return(await Ph({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function Ote({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ite({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function Dte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("gitdir",n),Dt.listRefs({fs:new nn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function jte({fs:e,gitdir:t}){const n=await la.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function Mte({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),await jte({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Pte(e){const t=Jr.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const u of o){const[c,f]=u.split(":");c==="symref-target"?s.target=f:c==="peeled"&&(s.peeled=f)}n.push(s)}return n}async function Fte({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(Jr.encode(`command=ls-refs
`)),r.push(Jr.encode(`agent=${Ow.agent}
`)),(n||t||e)&&r.push(Jr.delim()),n&&r.push(Jr.encode("peel")),t&&r.push(Jr.encode("symrefs")),e&&r.push(Jr.encode(`ref-prefix ${e}`)),r.push(Jr.flush()),r}async function Lte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2,prefix:c,symrefs:f,peelTags:h}){try{Je("http",e),Je("url",i);const p=await ev.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(p.protocolVersion===1)return zM(p,c,f,h);const g=await Fte({prefix:c,symrefs:f,peelTags:h}),v=await ev.connect({http:e,auth:p.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return Pte(v.body)}catch(p){throw p.caller="git.listServerRefs",p}}async function $te({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),Dt.listTags({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Bte(e,t){return e.committer.timestamp-t.committer.timestamp}const zte="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function w4({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===zte)return;const i=r;let o;const s=await oh({fs:e,cache:t,gitdir:n,oid:r}),u=s.tree;return a===s.oid?o=s.path:(o=await HM({fs:e,cache:t,gitdir:n,tree:u,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function HM({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const u=r.entries().map(function(c){let f;return c.oid===a?(f=At.join(s,c.path),o.push(f)):c.type==="tree"&&(f=Lr({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return HM({fs:e,cache:t,gitdir:n,tree:Ri.from(h),fileId:a,oid:i,filepaths:o,parentPath:At.join(s,c.path)})})),f});return await Promise.all(u),o}async function Ute({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),f=[],h=await zm.read({fs:e,gitdir:n}),p=await Dt.resolve({fs:e,gitdir:n,ref:a}),g=[await lh({fs:e,cache:t,gitdir:n,oid:p})];let v,b,_;function S(x){_&&r&&f.push(x)}for(;g.length>0;){const x=g.pop();if(c!==void 0&&x.commit.committer.timestamp<=c)break;if(r){let E;try{E=await eg({fs:e,cache:t,gitdir:n,oid:x.commit.tree,filepath:r}),b&&v!==E&&f.push(b),v=E,b=x,_=!0}catch(C){if(C instanceof wr){let A=u&&v;if(A&&(A=await w4({fs:e,cache:t,gitdir:n,oid:x.commit.tree,fileId:v}),A))if(Array.isArray(A)){if(b){const O=await w4({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(O))if(A=A.filter(I=>O.indexOf(I)===-1),A.length===1)A=A[0],r=A,b&&f.push(b);else{A=!1,b&&f.push(b);break}}}else r=A,b&&f.push(b);if(!A){if(_&&v&&(f.push(b),!s))break;if(!s&&!u)throw C}b=x,_=!1}else throw C}}else f.push(x);if(i!==void 0&&f.length===i){S(x);break}if(!h.has(x.oid))for(const E of x.commit.parent){const C=await lh({fs:e,cache:t,gitdir:n,oid:E});g.map(A=>A.oid).includes(C.oid)||g.push(C)}g.length===0&&S(x),g.sort((E,C)=>Bte(E.commit,C.commit))}return f}async function qte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:u,cache:c={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",a),await Ute({fs:new nn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u})}catch(f){throw f.caller="git.log",f}}async function Hte({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:p,committer:g,signingKey:v,cache:b={},mergeDriver:_}){try{Je("fs",e),v&&Je("onSign",t);const S=new nn(e),x=await Qu({fs:S,gitdir:r,author:p});if(!x&&(!s||!o))throw new Ya("author");const E=await sh({fs:S,gitdir:r,author:x,committer:g});if(!E&&(!s||!o))throw new Ya("committer");return await LM({fs:S,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:u,noUpdateBranch:c,abortOnConflict:f,message:h,author:x,committer:E,signingKey:v,onSign:t,mergeDriver:_})}catch(S){throw S.caller="git.merge",S}}const Vte={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function VM({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new sM,o=[];function s(f,h){const p=Wt.from(f,h);o.push(p),i.update(p)}async function u({stype:f,object:h}){const p=Vte[f];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let _=(v|p|b).toString(16);for(s(_,"hex");v;)v=g>127?128:0,_=v|g&127,s(uE(2,_),"hex"),g=g>>>7;s(Wt.from(await EM(h)))}s("PACK"),s("00000002","hex"),s(uE(8,a.length),"hex");for(const f of a){const{type:h,object:p}=await Lr({fs:e,cache:t,gitdir:r,oid:f});await u({object:p,stype:h})}const c=i.digest();return o.push(c),o}async function Gte({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await VM({fs:e,cache:t,gitdir:n,oids:r}),o=Wt.from(await Qb(i)),u=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(At.join(n,`objects/pack/${u}`),o),{filename:u}):{filename:u,packfile:new Uint8Array(o)}}async function Wte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Gte({fs:new nn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function Kte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:p,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:_=!1,corsProxy:S,singleBranch:x,headers:E={},author:C,committer:A,signingKey:O,cache:I={}}){try{Je("fs",e),Je("gitdir",u);const D=new nn(e),z=await Qu({fs:D,gitdir:u,author:C});if(!z)throw new Ya("author");const W=await sh({fs:D,gitdir:u,author:z,committer:A});if(!W)throw new Ya("committer");return await $M({fs:D,cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:p,fastForward:b,fastForwardOnly:_,corsProxy:S,singleBranch:x,headers:E,author:z,committer:W,signingKey:O,prune:g,pruneTags:v})}catch(D){throw D.caller="git.pull",D}}async function Zte({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),start:a,finish:i}){const o=await zm.read({fs:e,gitdir:r}),s=new Set,u=new Set;for(const h of a)s.add(await Dt.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const p=await Dt.resolve({fs:e,gitdir:r,ref:h});u.add(p)}catch{}const c=new Set;async function f(h){c.add(h);const{type:p,object:g}=await Lr({fs:e,cache:t,gitdir:r,oid:h});if(p==="tag"){const b=li.from(g).headers().object;return f(b)}if(p!=="commit")throw new hi(h,p,"commit");if(!o.has(h)){const b=Fr.from(g).headers().parent;for(h of b)!u.has(h)&&!c.has(h)&&await f(h)}}for(const h of s)await f(h);return c}async function HS({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:u,object:c}=await Lr({fs:e,cache:t,gitdir:r,oid:s});if(u==="tag"){const h=li.from(c).headers().object;await o(h)}else if(u==="commit"){const h=Fr.from(c).headers().tree;await o(h)}else if(u==="tree"){const f=Ri.from(c);for(const h of f)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function Yte(e){const t={};let n="";const r=Jr.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new W0('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),u=o.slice(3);let c=u.indexOf(" ");c===-1&&(c=u.length);const f=u.slice(0,c),h=u.slice(c+1);t.refs[f]={ok:s==="ok",error:h}}return t}async function Xte({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(Jr.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(Jr.flush()),n}async function Jte({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:u,gitdir:c,ref:f,remoteRef:h,remote:p,url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:S={}}){const x=f||await vc({fs:e,gitdir:c});if(typeof x>"u")throw new ki("ref");const E=await la.get({fs:e,gitdir:c});p=p||await E.get(`branch.${x}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${x}.remote`)||"origin";const C=g||await E.get(`remote.${p}.pushurl`)||await E.get(`remote.${p}.url`);if(typeof C>"u")throw new ki("remote OR url");const A=h||await E.get(`branch.${x}.merge`);if(typeof C>"u")throw new ki("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const O=await Dt.expand({fs:e,gitdir:c,ref:x}),I=b?"0000000000000000000000000000000000000000":await Dt.resolve({fs:e,gitdir:c,ref:O}),D=Iw.getRemoteHelperFor({url:C}),z=await D.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:S,protocolVersion:1}),W=z.auth;let ee;if(!A)ee=O;else try{ee=await Dt.expandAgainstMap({ref:A,map:z.refs})}catch(Y){if(Y instanceof wr)ee=A.startsWith("refs/")?A:`refs/heads/${A}`;else throw Y}const F=z.refs.get(ee)||"0000000000000000000000000000000000000000";if(u&&!await u({remote:p,url:C,localRef:{ref:b?"(delete)":O,oid:I},remoteRef:{ref:ee,oid:F}}))throw new jh;const Z=!z.capabilities.has("no-thin");let V=new Set;if(!b){const Y=[...z.refs.values()];let re=new Set;if(F!=="0000000000000000000000000000000000000000"){const be=await xk({fs:e,cache:t,gitdir:c,oids:[I,F]});for(const _e of be)Y.push(_e);Z&&(re=await HS({fs:e,cache:t,gitdir:c,oids:be}))}if(!Y.includes(I)){const be=await Zte({fs:e,cache:t,gitdir:c,start:[I],finish:Y});V=await HS({fs:e,cache:t,gitdir:c,oids:be})}if(Z){try{const be=await Dt.resolve({fs:e,gitdir:c,ref:`refs/remotes/${p}/HEAD`,depth:2}),{oid:_e}=await Dt.resolveAgainstMap({ref:be.replace(`refs/remotes/${p}/`,""),fullref:be,map:z.refs}),Ie=[_e];for(const Pe of await HS({fs:e,cache:t,gitdir:c,oids:Ie}))re.add(Pe)}catch{}for(const be of re)V.delete(be)}if(I===F&&(v=!0),!v){if(O.startsWith("refs/tags")&&F!=="0000000000000000000000000000000000000000")throw new ih("tag-exists");if(I!=="0000000000000000000000000000000000000000"&&F!=="0000000000000000000000000000000000000000"&&!await UM({fs:e,cache:t,gitdir:c,oid:I,ancestor:F,depth:-1}))throw new ih("not-fast-forward")}}const ae=jM([...z.capabilities],["report-status","side-band-64k",`agent=${Ow.agent}`]),ie=await Xte({capabilities:ae,triplets:[{oldoid:F,oid:I,fullRef:ee}]}),te=b?[]:await VM({fs:e,cache:t,gitdir:c,oids:[...V]}),X=await D.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:W,headers:S,body:[...ie,...te]}),{packfile:ce,progress:G}=await PM.demux(X.body);if(a){const Y=MM(G);ng(Y,async re=>{await a(re)})}const Q=await Yte(ce);if(X.headers&&(Q.headers=X.headers),p&&Q.ok&&Q.refs[ee].ok&&!O.startsWith("refs/tags")){const Y=`refs/remotes/${p}/${ee.replace("refs/heads","")}`;b?await Dt.deleteRef({fs:e,gitdir:c,ref:Y}):await Dt.writeRef({fs:e,gitdir:c,ref:Y,value:I})}if(Q.ok&&Object.values(Q.refs).every(Y=>Y.ok))return Q;{const Y=Object.entries(Q.refs).filter(([re,be])=>!be.ok).map(([re,be])=>`
  - ${re}: ${be.error}`).join("");throw new H0(Y,Q)}}async function Qte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:u,gitdir:c=At.join(u,".git"),ref:f,remoteRef:h,remote:p="origin",url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:S={},cache:x={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),await Jte({fs:new nn(e),cache:x,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:c,ref:f,remoteRef:h,remote:p,url:g,force:v,delete:b,corsProxy:_,headers:S})}catch(E){throw E.caller="git.push",E}}async function GM({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=li.from(i).parse().object,GM({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new hi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function WM({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await eg({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await GM({fs:e,cache:t,gitdir:n,oid:r})}async function ene({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await WM({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function KM({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await lh({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function tne({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Dt.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await WM({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function nne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oid",a),await tne({fs:new nn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function rne({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Je("fs",e),Je("gitdir",n),Je("oid",r);const u=new nn(e);i!==void 0&&(r=await eg({fs:u,cache:s,gitdir:n,oid:r,filepath:i}));const f=await Lr({fs:u,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(f.oid=r,a==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=Fr.from(f.object).parse();break;case"tree":f.object=Ri.from(f.object).entries();break;case"blob":o?f.object=f.object.toString(o):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=li.from(f.object).parse();break;default:throw new hi(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(u){throw u.caller="git.readObject",u}}async function ane({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new hi(r,a,"tag");const o=li.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function ine({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await ane({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function one({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Ph({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function sne({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r),await Ta.acquire({fs:new nn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function lne({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u}){let c;try{c=await Dt.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof wr))throw v}let h=(await Ph({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const p=await tg({fs:e,gitdir:r,tree:h});return await Nw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:p,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:u})}async function une({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u,cache:c={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i);const f=new nn(e),h=await Qu({fs:f,gitdir:r,author:o});if(!h)throw new Ya("author");const p=await sh({fs:f,gitdir:r,author:h,committer:s});if(!p)throw new Ya("committer");return await lne({fs:f,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:p,signingKey:u})}catch(f){throw f.caller="git.removeNote",f}}async function cne({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==js.clean(r))throw new Yo(r,js.clean(r));if(n!==js.clean(n))throw new Yo(n,js.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await Dt.exists({fs:e,gitdir:t,ref:o}))throw new ns("branch",r,!1);const u=await Dt.resolve({fs:e,gitdir:t,ref:i,depth:1});await Dt.writeRef({fs:e,gitdir:t,ref:o,value:u}),await Dt.deleteRef({fs:e,gitdir:t,ref:i});const f=await vc({fs:e,gitdir:t,fullname:!0})===i;(a||f)&&await Dt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function dne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oldref",a),await cne({fs:new nn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function ZM({gitdir:e,type:t,object:n}){return $l(Ih.wrap({type:t,object:n}))}async function fne({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const o=new nn(e);let s,u;try{s=await Dt.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await eg({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const f=t&&await o.read(At.join(t,r));f&&(u=await ZM({gitdir:n,type:"blob",object:f}),s===u&&(c=await o.lstat(At.join(t,r)))),await Ta.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:c,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function hne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,depth:a}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Dt.resolve({fs:new nn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function pne({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r,value:a,append:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("path",r);const o=new nn(e),s=await la.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await la.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function YM({fs:e,gitdir:t,commit:n}){const r=Fr.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class tv{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=tv.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const mne={stage:Nh,workdir:Q0};let VS;async function uh(e,t){return VS===void 0&&(VS=new $m),VS.acquire(e,t)}async function gne(e,t,n,r,a=null){const i=At.join(n,r),o=await e.lstat(i);if(!o)throw new wr(i);if(o.isDirectory())throw new Cn(`${i}: file expected, but found directory`);const s=a?await bM({fs:e,gitdir:t,oid:a}):void 0;let u=s?a:void 0;return s||await uh({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await e.readlink(i).then(CM):await e.read(i);if(c===null)throw new wr(i);u=await Ni({fs:e,gitdir:t,type:"blob",object:c})}),u}async function yne({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await tg({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await gne(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function _4({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?mne[g]():g),o=[],f=await Ju({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await Mh.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&o.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const _ of v){const[S,x]=_;a?x&&(await e.exists(`${t}/${x.toString()}`)?b.push(_):o.push([null,x])):S&&(x?b.push(_):o.push([S,null]))}return b.length?Promise.all(b.map(g)):[]}});if(o.length===0||f.length===0)return null;const p=(await yne({fs:e,dir:t,gitdir:n,entries:f})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return tg({fs:e,gitdir:n,tree:p})}async function bne({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],u=await Ju({fs:e,cache:{},dir:t,gitdir:n,trees:[bo({ref:a}),bo({ref:r})],map:async(c,[f,h])=>{if(c==="."||await Mh.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const p=h?await h.type():await f.type();if(p!=="tree"&&p!=="blob")return;if(!h&&f){const v=p==="tree"?"rmdir":"rm";return p==="tree"&&o.push(c),p==="blob"&&i&&s.push({filepath:c,oid:await f.oid()}),{method:v,filepath:c}}const g=await h.oid();if(!f||await f.oid()!==g)return p==="tree"?{method:"mkdir",filepath:c}:(i&&s.push({filepath:c,oid:g,stats:await e.lstat(At.join(t,c))}),{method:"write",filepath:c,oid:g})}});await uh({fs:e,gitdir:n,dirRemoved:o,ops:u},async()=>{for(const c of u){const f=At.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(f);break;case"mkdir":await e.mkdir(f);break;case"rm":await e.rm(f);break;case"write":if(!o.some(h=>f.startsWith(h))){const{object:h}=await Lr({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(f)&&await e.rm(f),await e.write(f,h)}break}}}),await Ta.acquire({fs:e,gitdir:n,cache:{}},async c=>{s.forEach(({filepath:f,stats:h,oid:p})=>{c.insert({filepath:f,stats:h,oid:p})})})}class Ol{constructor({fs:t,dir:n,gitdir:r=At.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return At.join(this.gitdir,Ol.refStash)}get refLogsStashPath(){return At.join(this.gitdir,Ol.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Qu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Ya("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return YM({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Yo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?lh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Dt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Ol.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=tv.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await uh({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return tv.getStashReflogEntry(r,t)}}async function vne({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Ol({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await vc({fs:e,gitdir:n,fullname:!1}),o=await Dt.resolve({fs:e,gitdir:n,ref:"HEAD"}),u=(await KM({fs:e,dir:t,gitdir:n,oid:o})).commit.message,c=[o];let f=null,h=bo({ref:"HEAD"});const p=await _4({fs:e,dir:t,gitdir:n,treePair:[bo({ref:"HEAD"}),"stage"]});if(p){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:p,parent:c});c.push(_),f=p,h=Nh()}const g=await _4({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(_),f=g}if(!f||!p&&!g)throw new wr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${u}`,b=await a.writeStashCommit({message:v,tree:f,parent:c});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await OM({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function XM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Ol({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const c=(await lh({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await bne({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:c})}}async function JM({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Ol({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await uh(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const u=a.refLogsStashPath;await uh({reflogEntries:s,stashReflogPath:u,stashMgr:a},async()=>{if(s.length){await e.write(u,s.join(`
`),"utf8");const c=s[s.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(u)})}async function wne({fs:e,dir:t,gitdir:n}){return new Ol({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function _ne({fs:e,dir:t,gitdir:n}){const r=new Ol({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await uh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function xne({fs:e,dir:t,gitdir:n,refIdx:r=0}){await XM({fs:e,dir:t,gitdir:n,refIdx:r}),await JM({fs:e,dir:t,gitdir:n,refIdx:r})}async function Sne({fs:e,dir:t,gitdir:n=At.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Je("fs",e),Je("dir",t),Je("gitdir",n),Je("op",r);const o={push:vne,apply:XM,drop:JM,list:wne,clear:_ne,pop:xne},s=["apply","drop","pop"];try{const u=new nn(e);["refs","logs","logs/refs"].map(h=>At.join(n,h)).forEach(async h=>{await u.exists(h)||await u.mkdir(h)});const f=o[r];if(f){if(s.includes(r)&&i<0)throw new Yo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await f({fs:u,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(u){throw u.caller="git.stash",u}}async function Ene({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const i=new nn(e);if(await Mh.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await Cne({fs:i,cache:a,gitdir:n}),u=await QM({fs:i,cache:a,gitdir:n,tree:s,path:r}),c=await Ta.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const _ of b)if(_.path===r)return _;return null}),f=await i.lstat(At.join(t,r)),h=u!==null,p=c!==null,g=f!==null,v=async()=>{if(p&&!Wb(c,f))return c.oid;{const b=await i.read(At.join(t,r)),_=await ZM({gitdir:n,type:"blob",object:b});return p&&c.oid===_&&f.size!==-1&&Ta.acquire({fs:i,gitdir:n,cache:a},async function(S){S.insert({filepath:r,stats:f,oid:_})}),_}};if(!h&&!g&&!p)return"absent";if(!h&&!g&&p)return"*absent";if(!h&&g&&!p)return"*added";if(!h&&g&&p)return await v()===c.oid?"added":"*added";if(h&&!g&&!p)return"deleted";if(h&&!g&&p)return u===c.oid,"*deleted";if(h&&g&&!p)return await v()===u?"*undeleted":"*undeletemodified";if(h&&g&&p){const b=await v();return b===u?b===c.oid?"unmodified":"*unmodified":b===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function QM({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:u}=await Lr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const c=Ri.from(u);return QM({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(s==="blob")throw new hi(o.oid,s,"blob",a.join("/"))}return null}async function Cne({fs:e,cache:t,gitdir:n}){let r;try{r=await Dt.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof wr)return[]}const{tree:a}=await Ph({fs:e,cache:t,gitdir:n,oid:r});return a}async function kne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const u=new nn(e);return await Ju({fs:u,cache:o,dir:t,gitdir:n,trees:[bo({ref:r}),Q0(),Nh()],map:async function(c,[f,h,p]){if(!f&&!p&&h&&!s&&await Mh.isIgnored({fs:u,dir:t,filepath:c})||!a.some(O=>IM(c,O)))return null;if(i&&!i(c))return;const[g,v,b]=await Promise.all([f&&f.type(),h&&h.type(),p&&p.type()]),_=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!_)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!_)return;const S=g==="blob"?await f.oid():void 0,x=b==="blob"?await p.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,S,E,x],A=C.map(O=>C.indexOf(O));return A.shift(),[c,...A]}})}catch(u){throw u.caller="git.statusMatrix",u}}async function Ane({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,force:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const o=new nn(e);if(r===void 0)throw new ki("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await Dt.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await Dt.exists({fs:o,gitdir:n,ref:r}))throw new ns("tag",r);await Dt.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function Tne({fs:e,dir:t,gitdir:n=At.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:u,force:c}){try{Je("fs",e),Je("gitdir",n),Je("filepath",a);const f=new nn(e);if(u)return await Ta.acquire({fs:f,gitdir:n,cache:r},async function(p){if(!c){const g=await f.lstat(At.join(t,a));if(g){if(g.isDirectory())throw new Xu("directory");return}}p.has({filepath:a})&&p.delete({filepath:a})});let h;if(!i){if(h=await f.lstat(At.join(t,a)),!h)throw new wr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Xu("directory")}return await Ta.acquire({fs:f,gitdir:n,cache:r},async function(p){if(!s&&!p.has({filepath:a}))throw new wr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await f.readlink(At.join(t,a)):await f.read(At.join(t,a));i=await Ni({fs:f,gitdir:n,type:"blob",format:"content",object:v})}return p.insert({filepath:a,oid:i,stats:g}),i})}catch(f){throw f.caller="git.updateIndex",f}}function Rne(){try{return Ow.version}catch(e){throw e.caller="git.version",e}}async function Nne({fs:e,dir:t,gitdir:n=At.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Je("fs",e),Je("gitdir",n),Je("trees",r),await Ju({fs:new nn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(u){throw u.caller="git.walk",u}}async function Ine({fs:e,dir:t,gitdir:n=At.join(t,".git"),blob:r}){try{return Je("fs",e),Je("gitdir",n),Je("blob",r),await Ni({fs:new nn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function One({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r}){try{return Je("fs",e),Je("gitdir",n),Je("commit",r),await YM({fs:new nn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function Dne({fs:e,dir:t,gitdir:n=At.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const u=new nn(e);if(i==="parsed"){switch(r){case"commit":a=Fr.from(a).toObject();break;case"tree":a=Ri.from(a).toObject();break;case"blob":a=Wt.from(a,s);break;case"tag":a=li.from(a).toObject();break;default:throw new hi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Ni({fs:u,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(u){throw u.caller="git.writeObject",u}}async function jne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r),Je("value",a);const s=new nn(e);if(r!==js.clean(r))throw new Yo(r,js.clean(r));if(!i&&await Dt.exists({fs:s,gitdir:n,ref:r}))throw new ns("ref",r);o?await Dt.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await Dt.resolve({fs:s,gitdir:n,ref:a}),await Dt.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function Mne({fs:e,gitdir:t,tag:n}){const r=li.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Pne({fs:e,dir:t,gitdir:n=At.join(t,".git"),tag:r}){try{return Je("fs",e),Je("gitdir",n),Je("tag",r),await Mne({fs:new nn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function Fne({fs:e,dir:t,gitdir:n=At.join(t,".git"),tree:r}){try{return Je("fs",e),Je("gitdir",n),Je("tree",r),await tg({fs:new nn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Si={Errors:dee,STAGE:Nh,TREE:bo,WORKDIR:Q0,add:Ree,abortMerge:Cee,addNote:Iee,addRemote:Oee,annotatedTag:jee,branch:Pee,checkout:OM,clone:Kee,commit:Zee,getConfig:gte,getConfigAll:bte,setConfig:pne,currentBranch:Yee,deleteBranch:Jee,deleteRef:Qee,deleteRemote:tte,deleteTag:rte,expandOid:ste,expandRef:lte,fastForward:fte,fetch:hte,findMergeBase:pte,findRoot:mte,getRemoteInfo:vte,getRemoteInfo2:wte,hashBlob:xte,indexPack:Ete,init:Cte,isDescendent:kte,isIgnored:Ate,listBranches:Tte,listFiles:Nte,listNotes:Ote,listRefs:Dte,listRemotes:Mte,listServerRefs:Lte,listTags:$te,log:qte,merge:Hte,packObjects:Wte,pull:Kte,push:Qte,readBlob:ene,readCommit:KM,readNote:nne,readObject:rne,readTag:ine,readTree:one,remove:sne,removeNote:une,renameBranch:dne,resetIndex:fne,updateIndex:Tne,resolveRef:hne,status:Ene,statusMatrix:kne,tag:Ane,version:Rne,walk:Nne,writeBlob:Ine,writeCommit:One,writeObject:Dne,writeRef:jne,writeTag:Pne,writeTree:Fne,stash:Sne};function Lne(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function $ne(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Lne(e)}async function Bne(e,t){const n=$ne(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function zne(e){let t=0;const n=[];await Bne(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Une(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function qne({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await zne(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?Une(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,u]of i.headers.entries())r[s]=u;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var Sk={request:qne};const Ky="system",x4="You are a helpful AI assistant.",S4=.7,E4=null,C4=null,k4=null,A4=0,T4=0,R4=!0,Zy=!0,Yy=30,Xy=10,N4=null,I4=null,O4=5,qr=ql(Hl(e=>({theme:Ky,globalSystemPrompt:x4,temperature:S4,maxTokens:E4,topP:C4,topK:k4,presencePenalty:A4,frequencyPenalty:T4,enableAdvancedSettings:R4,enableStreamingMarkdown:Zy,streamingRenderFPS:Yy,streamingCodeRenderFPS:Xy,gitUserName:N4,gitUserEmail:I4,toolMaxSteps:O4,setTheme:t=>{e({theme:t}),Gt.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Gt.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Gt.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Gt.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Gt.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Gt.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Gt.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Gt.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Gt.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Gt.saveSetting("enableStreamingMarkdown",t)},setStreamingRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingRenderFPS:n}),Gt.saveSetting("streamingRenderFPS",n)},setStreamingCodeRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingCodeRenderFPS:n}),Gt.saveSetting("streamingCodeRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Gt.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Gt.saveSetting("gitUserEmail",n)},setToolMaxSteps:t=>{const n=Math.max(1,Math.min(20,t));e({toolMaxSteps:n}),Gt.saveSetting("toolMaxSteps",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,u,c,f,h,p,g,v,b]=await Promise.all([Gt.loadSetting("theme",Ky),Gt.loadSetting("temperature",S4),Gt.loadSetting("maxTokens",E4),Gt.loadSetting("topP",C4),Gt.loadSetting("topK",k4),Gt.loadSetting("presencePenalty",A4),Gt.loadSetting("frequencyPenalty",T4),Gt.loadSetting("globalSystemPrompt",x4),Gt.loadSetting("enableAdvancedSettings",R4),Gt.loadSetting("enableStreamingMarkdown",Zy),Gt.loadSetting("streamingRenderFPS",Yy),Gt.loadSetting("streamingCodeRenderFPS",Xy),Gt.loadSetting("gitUserName",N4),Gt.loadSetting("gitUserEmail",I4),Gt.loadSetting("toolMaxSteps",O4)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:u,enableAdvancedSettings:c,enableStreamingMarkdown:f,streamingRenderFPS:h,streamingCodeRenderFPS:p,gitUserName:g,gitUserEmail:v,toolMaxSteps:b})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:Ky,enableStreamingMarkdown:Zy,streamingRenderFPS:Yy,streamingCodeRenderFPS:Xy}),await Promise.all([Gt.saveSetting("theme",Ky),Gt.saveSetting("enableStreamingMarkdown",Zy),Gt.saveSetting("streamingRenderFPS",Yy),Gt.saveSetting("streamingCodeRenderFPS",Xy)]),dt.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),dt.error("Failed to reset general settings.")}}}))),Ek="https://cors.isomorphic-git.org",ec=async e=>{const t=Gn(e);if(t!=="/")try{await M0(t,{recursive:!0})}catch(n){if(n instanceof Error&&n.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${t}`);return}throw console.error(`[VFS Op] Failed to create directory ${t}:`,n),dt.error(`Error creating directory "${sa(t)}": ${n instanceof Error?n.message:String(n)}`),n}},e8=async e=>{const{gitUserName:t,gitUserEmail:n}=qr.getState();if(!t||!n)return dt.error("Git user name and email must be configured in Settings before committing."),!1;try{const r=await Si.getConfig({fs:Fa,dir:e,path:"user.name"}),a=await Si.getConfig({fs:Fa,dir:e,path:"user.email"});return r!==t&&await Si.setConfig({fs:Fa,dir:e,path:"user.name",value:t}),a!==n&&await Si.setConfig({fs:Fa,dir:e,path:"user.email",value:n}),!0}catch(r){return console.error("[VFS Op] Error checking/setting Git config:",r),dt.error(`Failed to configure Git user: ${r instanceof Error?r.message:String(r)}`),!1}},Ck=e=>(console.warn(`[VFS Op] Git Auth requested for ${e}. No credentials configured.`),null),kk=(e,t)=>(console.error(`[VFS Op] Git Auth FAILED for ${e}`,t),dt.error(`Authentication failed for ${e}`),null),Ak=(e,t)=>{console.log(`[VFS Op] Git Auth SUCCESS for ${e}`,t)},Hne=async e=>{try{const t={backend:KJ,name:`litechat_vfs_${e}`};return await BJ(t),Fa}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),dt.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},Tk=async e=>{const t=Gn(e);try{try{await xo(t)}catch(o){if(o.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${t}`),await ec(t),[];throw o}const r=(await gc(t)).map(async o=>{const s=Bu(t,o);try{const u=await xo(s);return{name:o,path:s,isDirectory:u.isDirectory(),size:u.size,lastModified:u.mtime}}catch(u){return console.error(`[VFS Op] Failed to stat ${s}:`,u),null}});return(await Promise.all(r)).filter(o=>o!==null)}catch(n){throw console.error(`[VFS Op] Failed to list directory ${t}:`,n),dt.error(`Error listing files: ${n instanceof Error?n.message:String(n)}`),n}},Fh=async e=>{const t=Gn(e);try{const n=await D0(t);return Ei.emit(Gb.VFS_FILE_READ,{path:t}),n}catch(n){throw console.error(`[VFS Op] Failed to read file ${t}:`,n),dt.error(`Error reading file "${sa(t)}": ${n instanceof Error?n.message:String(n)}`),n}},Dw=async(e,t)=>{const n=Gn(e),r=Wv(n);try{r!=="/"&&await ec(r),await j0(n,t),Ei.emit(Gb.VFS_FILE_WRITTEN,{path:n})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${n}:`,a),dt.error(`Error writing file "${sa(n)}": ${a instanceof Error?a.message:String(a)}`)),a}},Rk=async(e,t=!1)=>{const n=Gn(e);if(n==="/")throw dt.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await xo(n)).isDirectory()?(await P0(n,{recursive:t}),Ei.emit(Gb.VFS_FILE_DELETED,{path:n})):(await O0(n),Ei.emit(Gb.VFS_FILE_DELETED,{path:n})),dt.success(`"${sa(n)}" deleted.`)}catch(r){if(r instanceof Error&&r.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${n}`);return}throw console.error(`[VFS Op] Failed to delete ${n}:`,r),dt.error(`Error deleting "${sa(n)}": ${r instanceof Error?r.message:String(r)}`),r}},t8=async e=>{await ec(e)},Vne=async(e,t)=>{try{const n=await Fh(e),r=new Blob([n]),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a;const o=Gn(e);i.download=t||sa(o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(n){console.error(`[VFS Op] Failed to initiate download for ${e}:`,n),n instanceof Error&&n.message.includes("Error reading file")||dt.error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}},n8=async(e,t)=>{const n=Gn(t);let r=0,a=0;const i=Array.from(e);try{await ec(n);for(const o of i){const s=Bu(n,o.name);try{const u=await o.arrayBuffer();await Dw(s,new Uint8Array(u)),r++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${o.name}:`,u)}}}catch(o){a=i.length,console.error(`[VFS Op] Failed to prepare target directory ${n} for upload:`,o)}finally{a>0&&r>0?dt.warning(`Upload complete with issues. ${r} succeeded, ${a} failed.`):a===0&&r>0?dt.success(`Successfully uploaded ${r} file(s) to ${n==="/"?"root":sa(n)}.`):a>0&&r===0&&dt.error("Upload failed. Could not upload any files.")}},Gne=async(e,t)=>{if(!e.name.toLowerCase().endsWith(".zip")){dt.error("Please select a valid ZIP file.");return}const n=Gn(t);let r;try{await ec(n),r=await oM.loadAsync(e);const a=Object.values(r.files),i=await Promise.allSettled(a.map(async c=>{const f=Bu(n,c.name);if(c.dir)await ec(f);else{const h=await c.async("uint8array");await Dw(f,h)}return{name:c.name,isDir:c.dir}}));let o=0,s=0,u=0;i.forEach(c=>{c.status==="fulfilled"&&c.value?c.value.isDir?s++:o++:c.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",c.reason))}),u>0?dt.warning(`Finished extracting "${e.name}". ${o+s} items succeeded, ${u} failed.`):dt.success(`Successfully extracted ${o} files and ${s} folders from "${e.name}" to ${n==="/"?"root":sa(n)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),dt.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},D4=async(e,t="/")=>{const n=new oM,r=Gn(t),a=sa(r)||"root";try{try{if(!(await xo(r)).isDirectory()){dt.error(`Cannot export: "${a}" is not a directory.`);return}}catch(f){f instanceof Error&&f.code==="ENOENT"?dt.error(`Cannot export: Path "${a}" not found.`):dt.error(`Cannot export: Error accessing path "${a}". ${f instanceof Error?f.message:String(f)}`);return}const i=async(f,h)=>{const p=await Tk(f);for(const g of p)if(g.isDirectory){if(g.name===".git")continue;const v=h.folder(g.name);if(v)await i(g.path,v);else throw new Error(`Failed to create subfolder ${g.name} in zip.`)}else{const v=await Fh(g.path);h.file(g.name,v)}};await i(r,n);const o=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s;const c=`vfs_${a}_export.zip`;u.download=e||c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),dt.success(`"${a}" exported as ${u.download}.`)}catch(i){console.error("[VFS Op] Failed to download all as zip:",i),i instanceof Error&&(i.message.includes("Error listing files")||i.message.includes("Error reading file")||i.message.includes("Cannot export"))||dt.error(`ZIP export failed: ${i instanceof Error?i.message:String(i)}`)}},Wne=async(e,t)=>{const n=Gn(e),r=Gn(t);if(n==="/"||r==="/")throw dt.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(n!==r)try{const a=Wv(r);a!=="/"&&await ec(a),await uk(n,r),dt.success(`Renamed "${sa(n)}" to "${sa(r)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||dt.error(`Rename failed: Original item "${sa(n)}" not found.`):a instanceof Error&&a.code==="EEXIST"?dt.error(`Rename failed: An item named "${sa(r)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||dt.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${n} to ${r}:`,a),a}},Kne=async e=>{const t=Gn(e),n=Bu(t,".git");try{return(await xo(n)).isDirectory()}catch(r){return r instanceof Error&&r.code==="ENOENT"||console.error(`[VFS Op] Error checking for .git in ${t}:`,r),!1}},Nk=async(e,t,n)=>{const r=Gn(e),a=sa(t.replace(/\/$/,"").replace(/\.git$/,"")),i=Bu(r,a);try{try{await xo(i),dt.error(`Directory "${a}" already exists in target location.`);return}catch(o){if(o.code!=="ENOENT")throw o}await ec(r),await Si.clone({fs:Fa,http:Sk,dir:i,corsProxy:Ek,url:t,ref:n||void 0,singleBranch:!!n,depth:10,onAuth:Ck,onAuthFailure:kk,onAuthSuccess:Ak,onProgress:o=>{o.phase==="counting objects"&&o.total?console.log(`Clone progress: ${o.phase} ${o.loaded}/${o.total}`):o.phase==="receiving objects"&&o.total?console.log(`Clone progress: ${o.phase} ${o.loaded}/${o.total}`):console.log(`Clone progress: ${o.phase}`)}}),dt.success(`Repository "${a}" cloned successfully into ${i}.`)}catch(o){console.error(`[VFS Op] Git clone failed for ${t}:`,o),dt.error(`Git clone failed: ${o instanceof Error?o.message:String(o)}`);try{await P0(i,{recursive:!0,force:!0})}catch(s){console.warn(`[VFS Op] Failed cleanup ${i}:`,s)}throw o}},r8=async e=>{const t=Gn(e);try{await Si.init({fs:Fa,dir:t}),dt.success(`Initialized empty Git repository in "${sa(t)}"`)}catch(n){throw console.error(`[VFS Op] Git init failed for ${t}:`,n),dt.error(`Git init failed: ${n instanceof Error?n.message:String(n)}`),n}},Ik=async(e,t)=>{const n=Gn(e);try{if(!await e8(n))throw new Error("Git user configuration is missing or invalid.");const a=await Si.statusMatrix({fs:Fa,dir:n});let i=!1;for(const[s,u,c]of a)c===2&&(await Si.add({fs:Fa,dir:n,filepath:s}),i=!0),u!==0&&c===0&&(await Si.remove({fs:Fa,dir:n,filepath:s}),i=!0);if(!i){dt.info("No changes detected to commit.");return}const o=await Si.commit({fs:Fa,dir:n,message:t,author:{name:qr.getState().gitUserName,email:qr.getState().gitUserEmail}});dt.success(`Changes committed: ${o.substring(0,7)}`)}catch(r){throw console.error(`[VFS Op] Git commit failed for ${n}:`,r),dt.error(`Git commit failed: ${r instanceof Error?r.message:String(r)}`),r}},Ok=async e=>{const t=Gn(e);try{if(!await e8(t))throw new Error("Git user configuration is missing or invalid.");const r=await Si.currentBranch({fs:Fa,dir:t});if(!r)throw new Error("Current branch not found.");await Si.pull({fs:Fa,http:Sk,dir:t,corsProxy:Ek,ref:r,singleBranch:!0,author:{name:qr.getState().gitUserName,email:qr.getState().gitUserEmail},onAuth:Ck,onAuthFailure:kk,onAuthSuccess:Ak}),dt.success(`Pulled latest changes for "${sa(t)}"`)}catch(n){throw console.error(`[VFS Op] Git pull failed for ${t}:`,n),dt.error(`Git pull failed: ${n instanceof Error?n.message:String(n)}`),n}},Dk=async e=>{const t=Gn(e);try{const n=await Si.push({fs:Fa,http:Sk,dir:t,corsProxy:Ek,onAuth:Ck,onAuthFailure:kk,onAuthSuccess:Ak});if(n.ok)dt.success(`Pushed changes successfully for "${sa(t)}"`);else throw new Error(n.error||"Push failed")}catch(n){throw console.error(`[VFS Op] Git push failed for ${t}:`,n),dt.error(`Git push failed: ${n instanceof Error?n.message:String(n)}`),n}},a8=async e=>{const t=Gn(e);console.log(`[VFS Op] Git Status on ${t}`);try{const n=await Si.statusMatrix({fs:Fa,dir:t});console.log("Git Status:",n);const r=n.map(([a,i,o,s])=>{let u="";return o===0?u="deleted":i===0&&o===2?u="new file":i===1&&o===2?u="modified":i===1&&o===1?u="unmodified":u=`h:${i} w:${o} s:${s}`,`${a}: ${u}`}).join(`
`);dt.info(`Git Status for "${sa(t)}":
${r||"No changes"}`,{duration:15e3})}catch(n){throw console.error(`[VFS Op] Git status failed for ${t}:`,n),dt.error(`Git status failed: ${n instanceof Error?n.message:String(n)}`),n}},cE=Fa,Zne=1024*5,Yne=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},Xne=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},Jne=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],Qne=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:Jne.some(r=>n.endsWith(r))},ere=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=R.useState(null),[i,o]=R.useState(null),[s,u]=R.useState(!1),c=e.type||"application/octet-stream",f=Qne(e.name,c),h=c.startsWith("image/"),p=c.startsWith("audio/"),g=c.startsWith("video/");R.useEffect(()=>{let S=null;return o(null),!f&&e.contentBase64?(S=Yne(e.contentBase64,c),S||o("Failed to decode file content for preview."),a(S)):a(null),()=>{S&&(URL.revokeObjectURL(S),a(null))}},[e.contentBase64,c,f]),R.useEffect(()=>{f&&e.contentText&&e.contentText.length>Zne?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):f&&e.contentText===void 0&&o("Text content missing from metadata.")},[e.contentText,e.size,f]);const v=async()=>{if(e.source==="vfs"){dt.info("File is already in VFS.");return}const S=Xne(e);if(!S){dt.error("Cannot add to VFS: Failed to reconstruct file data.");return}u(!0);try{await n8([S],"/"),dt.success(`"${e.name}" added to VFS root.`)}catch(x){console.error("Failed to add file to VFS:",x),dt.error(`Failed to add "${e.name}" to VFS.`)}finally{u(!1)}},b=()=>f?y.jsx(QU,{className:"h-5 w-5 text-blue-500"}):h?y.jsx(Eq,{className:"h-5 w-5 text-purple-500"}):p?y.jsx(Oq,{className:"h-5 w-5 text-green-500"}):g?y.jsx(cH,{className:"h-5 w-5 text-orange-500"}):y.jsx(XU,{className:"h-5 w-5 text-muted-foreground"}),_=()=>i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(Ps,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):f&&e.contentText!==void 0?y.jsx(NC,{lang:c==="text/markdown"?"markdown":"text",code:e.contentText}):h&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):p&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):g&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."});return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-2",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[b(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",Gv(e.size),")"]}),e.source==="vfs"&&e.path&&y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-blue-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(Rn,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),!n&&t&&y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.source==="direct"&&y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:v,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Zn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(BO,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{children:"Add to VFS"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(Us,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{children:"Remove from Prompt"})]})})]})]}),y.jsx("div",{className:Nt("p-2 max-h-80 overflow-y-auto"),children:_()})]})},tre=({interaction:e,className:t})=>{var b,_,S;const[n,r]=R.useState(!1),[a,i]=R.useState(!1),[o,s]=R.useState(!1),u=(b=e.prompt)!=null&&b.content&&typeof e.prompt.content=="string"?e.prompt.content:"",c=((S=(_=e.prompt)==null?void 0:_.metadata)==null?void 0:S.attachedFiles)||[],f=u||c.length>0,h=R.useCallback(async()=>{if(u)try{await navigator.clipboard.writeText(u),i(!0),dt.success("Prompt text copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(x){dt.error("Failed to copy prompt text."),console.error("Clipboard copy failed:",x)}},[u]),p=R.useCallback(async()=>{try{await navigator.clipboard.writeText(e.id),s(!0),dt.success("Interaction ID copied to clipboard!"),setTimeout(()=>s(!1),1500)}catch(x){dt.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",x)}},[e.id]),g=()=>r(x=>!x),v=R.useMemo(()=>u?u.split(`
`).slice(0,3).join(`
`):"",[u]);return y.jsxs("div",{className:Nt("flex items-start gap-3 my-2 group",t),children:[y.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary/20 text-primary flex items-center justify-center mt-1",children:y.jsx(lH,{className:"h-5 w-5"})}),y.jsxs("div",{className:"p-3 border rounded-md shadow-sm bg-muted/50 flex-grow min-w-0 relative",children:[y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":n?"Unfold prompt":"Fold prompt",disabled:!f,children:y.jsx(Zv,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:n?"Unfold":"Fold"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:p,"aria-label":"Copy interaction ID",children:o?y.jsx(wo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(zO,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Copy ID"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":"Copy prompt text",disabled:!u,children:a?y.jsx(wo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(oC,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Copy Text"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:()=>dt.info("Edit functionality coming soon!"),"aria-label":"Edit prompt (coming soon)",children:y.jsx(B2,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Edit (Soon)"})]})})]}),y.jsx("div",{className:"text-sm",children:n?y.jsxs("div",{className:"folded-content-preview cursor-pointer",onClick:g,children:[u?y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:v}):y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),c.length>0&&y.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(+",c.length," file(s))"]})]}):y.jsxs(y.Fragment,{children:[u?y.jsx("pre",{className:"whitespace-pre-wrap break-words mb-2",children:u}):!c.length&&y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),c.length>0&&y.jsx("div",{className:"mt-2 space-y-2",children:c.map(x=>y.jsx(ere,{fileMeta:x,isReadOnly:!0},x.id))})]})})]})]})},j4=e=>Symbol.iterator in e,M4=e=>"entries"in e,P4=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},nre=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function rre(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!j4(e)||!j4(t)?P4({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):M4(e)&&M4(t)?P4(e,t):nre(e,t)}function Bn(e){const t=vt.useRef(void 0);return n=>{const r=e(n);return rre(t.current,r)?t.current:t.current=r}}const are=({interactionId:e,onStop:t,className:n})=>{const r=a=>{a.stopPropagation(),t(e)};return y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"destructive",size:"icon",className:Nt("h-6 w-6",n),onClick:r,"aria-label":"Stop generation",children:y.jsx(tH,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:y.jsx("p",{children:"Stop Generation"})})]})})};function F4(e,t){let n,r,a;return function(){n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-a>=t&&(e(),a=Date.now())},t-(Date.now()-a))):(e(),a=Date.now(),n=!0)}}const L4=e=>/```/.test(e),i8=R.memo(({interactionId:e})=>{const t=ar(p=>p.activeStreamBuffers[e]),{enableStreamingMarkdown:n,streamingRenderFPS:r,streamingCodeRenderFPS:a}=qr(Bn(p=>({enableStreamingMarkdown:p.enableStreamingMarkdown,streamingRenderFPS:p.streamingRenderFPS,streamingCodeRenderFPS:p.streamingCodeRenderFPS}))),[i,o]=R.useState(""),s=R.useRef(""),u=R.useRef(void 0),c=R.useRef(100),f=R.useRef(!1);R.useEffect(()=>{s.current=t??"",f.current=!0},[t]),R.useEffect(()=>{var b;const g=L4(s.current)?a:r,v=g>0?1e3/g:100;v!==c.current&&(c.current=v,u.current=F4(()=>{i!==s.current&&o(s.current),f.current=!1},v)),f.current&&((b=u.current)==null||b.call(u))},[t,r,a,i]),R.useEffect(()=>{const p=ar.getState().activeStreamBuffers[e]??"";s.current=p;const v=L4(p)?a:r,b=v>0?1e3/v:100;c.current=b,u.current=F4(()=>{i!==s.current&&o(s.current),f.current=!1},b),o(p),f.current=!1},[e,r,a]);const h=YD(n?i:null);return n?y.jsx("div",{className:"text-sm markdown-content",children:h.map((p,g)=>typeof p=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:p}},g):p.type==="code"?y.jsx(NC,{lang:p.lang,code:p.code},g):null)}):y.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:i})});i8.displayName="StreamingContentView";const o8=R.memo(({interactionId:e,onStop:t})=>{const n=ar(Bn(u=>{var p,g,v;const c=u.interactions.find(b=>b.id===e),f=(((g=(p=c==null?void 0:c.metadata)==null?void 0:p.toolCalls)==null?void 0:g.length)??0)>0,h=!u.activeStreamBuffers[e];return c&&c.status==="STREAMING"?{index:c.index,type:c.type,modelId:(v=c.metadata)==null?void 0:v.modelId,hasToolCalls:f,showToolPlaceholder:f&&h}:null}));if(!n)return console.log(`[StreamingInteractionCard] Shell data not found or not streaming for ${e}, rendering null.`),null;const{index:r,type:a,modelId:i,hasToolCalls:o,showToolPlaceholder:s}=n;return y.jsxs("div",{className:Nt("p-3 my-2 border rounded-md shadow-sm bg-card border-dashed relative group"),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{className:"flex items-center gap-1.5",children:["Idx:",r," | ",a," | Streaming",y.jsxs("span",{className:"relative flex h-2 w-2",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-sky-500"})]}),i&&y.jsxs("span",{className:"ml-1 text-blue-400",children:["(",i,")"]}),o&&y.jsxs("span",{className:"ml-2 flex items-center gap-1 text-orange-400",children:[y.jsx(Nb,{className:"h-3 w-3"}),"(Using Tools...)"]})]}),y.jsx("div",{className:"interaction-card-actions-sticky",children:y.jsx(are,{interactionId:e,onStop:t})})]}),y.jsx(i8,{interactionId:e}),s&&y.jsxs("div",{className:"mt-2 text-xs text-muted-foreground italic flex items-center gap-1",children:[y.jsx(Zn,{className:"h-3 w-3 animate-spin"}),"Executing tools..."]})]},e)});o8.displayName="StreamingInteractionCard";function Mr({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:Nt("bg-accent animate-pulse rounded-md",e),...t})}const ire=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onStopInteraction:i})=>{const o=R.useRef(null),[s,u]=R.useState(!1),c=ar(Bn(g=>new Set(g.streamingInteractionIds))),f=t.reduce((g,v)=>{if(v.type==="message.user_assistant"){const b=v.index??-1;(g[b]=g[b]||[]).push(v)}return g},{}),h=Object.keys(f).map(Number).filter(g=>!isNaN(g)&&g>=0).sort((g,v)=>g-v),p=R.useCallback((g="smooth")=>{o.current&&o.current.scrollTo({top:o.current.scrollHeight,behavior:g})},[]);return R.useEffect(()=>{const g=o.current;g&&g.scrollHeight-g.scrollTop-g.clientHeight<150&&p("smooth")},[t.length,n,p]),R.useEffect(()=>{const g=o.current;if(!g)return;const v=()=>{const b=g.scrollHeight-g.scrollTop-g.clientHeight<150;u(!b)};return g.addEventListener("scroll",v),v(),()=>g.removeEventListener("scroll",v)},[]),y.jsxs("div",{className:Nt("relative",r),children:[y.jsxs("div",{ref:o,className:"h-full overflow-y-auto pr-2",children:[h.map(g=>{const v=f[g]||[],b=v.sort((_,S)=>{var x,E;return(((x=S.startedAt)==null?void 0:x.getTime())??0)-(((E=_.startedAt)==null?void 0:E.getTime())??0)})[0];return b?y.jsxs(vt.Fragment,{children:[b.prompt&&y.jsx(tre,{interaction:b}),(b.response!==null||b.status==="STREAMING")&&(c.has(b.id)?y.jsx(o8,{interactionId:b.id,onStop:i}):y.jsx(DZ,{interaction:b,allInteractionsInGroup:v,onRegenerate:a}))]},`${g}-${b.id}`):null}),n==="loading"&&y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsx(Mr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Mr,{className:"h-12 w-3/4 mr-auto rounded-md"}),y.jsx(Mr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Mr,{className:"h-12 w-3/4 mr-auto rounded-md"})]}),t.length===0&&n==="idle"&&!e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select or start a new conversation."}),t.length===0&&n==="idle"&&e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Send a message to start chatting."})]}),s&&y.jsx(zt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 h-10 w-10 rounded-full shadow-lg bg-card/80 backdrop-blur-sm hover:bg-muted",onClick:()=>p("smooth"),"aria-label":"Scroll to bottom",children:y.jsx(AU,{className:"h-5 w-5"})})]})},Jy=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0)).sort((i,o)=>(i.order??1/0)-(o.order??1/0));return a.length===0?null:y.jsx("div",{className:Nt(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(vt.Fragment,{children:o?o():null},i.id)})})},s8=6048e5,ore=864e5,$4=Symbol.for("constructDateFrom");function tc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&$4 in e?e[$4](t):e instanceof Date?new e.constructor(t):new Date(t)}function rs(e,t){return tc(t||e,e)}let sre={};function jw(){return sre}function Um(e,t){var s,u,c,f;const n=jw(),r=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,a=rs(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function nv(e,t){return Um(e,{...t,weekStartsOn:1})}function l8(e,t){const n=rs(e,t==null?void 0:t.in),r=n.getFullYear(),a=tc(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=nv(a),o=tc(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=nv(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function B4(e){const t=rs(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function lre(e,...t){const n=tc.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function z4(e,t){const n=rs(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function ure(e,t,n){const[r,a]=lre(n==null?void 0:n.in,e,t),i=z4(r),o=z4(a),s=+i-B4(i),u=+o-B4(o);return Math.round((s-u)/ore)}function cre(e,t){const n=l8(e,t),r=tc(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),nv(r)}function dre(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function fre(e){return!(!dre(e)&&typeof e!="number"||isNaN(+rs(e)))}function hre(e,t){const n=rs(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const pre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},mre=(e,t,n)=>{let r;const a=pre[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function GS(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const gre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},bre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},vre={date:GS({formats:gre,defaultWidth:"full"}),time:GS({formats:yre,defaultWidth:"full"}),dateTime:GS({formats:bre,defaultWidth:"full"})},wre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_re=(e,t,n,r)=>wre[e];function nm(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const xre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Sre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ere={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Cre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},kre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Are={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Tre=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Rre={ordinalNumber:Tre,era:nm({values:xre,defaultWidth:"wide"}),quarter:nm({values:Sre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:nm({values:Ere,defaultWidth:"wide"}),day:nm({values:Cre,defaultWidth:"wide"}),dayPeriod:nm({values:kre,defaultWidth:"wide",formattingValues:Are,defaultFormattingWidth:"wide"})};function rm(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?Ire(s,h=>h.test(o)):Nre(s,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(o.length);return{value:c,rest:f}}}function Nre(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Ire(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Ore(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const Dre=/^(\d+)(th|st|nd|rd)?/i,jre=/\d+/i,Mre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Pre={any:[/^b/i,/^(a|c)/i]},Fre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Lre={any:[/1/i,/2/i,/3/i,/4/i]},$re={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Bre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},zre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ure={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Hre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vre={ordinalNumber:Ore({matchPattern:Dre,parsePattern:jre,valueCallback:e=>parseInt(e,10)}),era:rm({matchPatterns:Mre,defaultMatchWidth:"wide",parsePatterns:Pre,defaultParseWidth:"any"}),quarter:rm({matchPatterns:Fre,defaultMatchWidth:"wide",parsePatterns:Lre,defaultParseWidth:"any",valueCallback:e=>e+1}),month:rm({matchPatterns:$re,defaultMatchWidth:"wide",parsePatterns:Bre,defaultParseWidth:"any"}),day:rm({matchPatterns:zre,defaultMatchWidth:"wide",parsePatterns:Ure,defaultParseWidth:"any"}),dayPeriod:rm({matchPatterns:qre,defaultMatchWidth:"any",parsePatterns:Hre,defaultParseWidth:"any"})},Gre={code:"en-US",formatDistance:mre,formatLong:vre,formatRelative:_re,localize:Rre,match:Vre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Wre(e,t){const n=rs(e,t==null?void 0:t.in);return ure(n,hre(n))+1}function Kre(e,t){const n=rs(e,t==null?void 0:t.in),r=+nv(n)-+cre(n);return Math.round(r/s8)+1}function u8(e,t){var f,h,p,g;const n=rs(e,t==null?void 0:t.in),r=n.getFullYear(),a=jw(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(p=a.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=tc((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=Um(o,t),u=tc((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=Um(u,t);return+n>=+s?r+1:+n>=+c?r:r-1}function Zre(e,t){var s,u,c,f;const n=jw(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,a=u8(e,t),i=tc((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Um(i,t)}function Yre(e,t){const n=rs(e,t==null?void 0:t.in),r=+Um(n,t)-+Zre(n,t);return Math.round(r/s8)+1}function cr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ou={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return cr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):cr(n+1,2)},d(e,t){return cr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return cr(e.getHours()%12||12,t.length)},H(e,t){return cr(e.getHours(),t.length)},m(e,t){return cr(e.getMinutes(),t.length)},s(e,t){return cr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return cr(a,t.length)}},kf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},U4={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Ou.y(e,t)},Y:function(e,t,n,r){const a=u8(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return cr(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):cr(i,t.length)},R:function(e,t){const n=l8(e);return cr(n,t.length)},u:function(e,t){const n=e.getFullYear();return cr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return cr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return cr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ou.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return cr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Yre(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):cr(a,t.length)},I:function(e,t,n){const r=Kre(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):cr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ou.d(e,t)},D:function(e,t,n){const r=Wre(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):cr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return cr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return cr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return cr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=kf.noon:r===0?a=kf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=kf.evening:r>=12?a=kf.afternoon:r>=4?a=kf.morning:a=kf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ou.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ou.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):cr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ou.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ou.s(e,t)},S:function(e,t){return Ou.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return H4(r);case"XXXX":case"XX":return Jc(r);case"XXXXX":case"XXX":default:return Jc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return H4(r);case"xxxx":case"xx":return Jc(r);case"xxxxx":case"xxx":default:return Jc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+q4(r,":");case"OOOO":default:return"GMT"+Jc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+q4(r,":");case"zzzz":default:return"GMT"+Jc(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return cr(r,t.length)},T:function(e,t,n){return cr(+e,t.length)}};function q4(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+cr(i,2)}function H4(e,t){return e%60===0?(e>0?"-":"+")+cr(Math.abs(e)/60,2):Jc(e,t)}function Jc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=cr(Math.trunc(r/60),2),i=cr(r%60,2);return n+a+t+i}const V4=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},c8=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Xre=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return V4(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",V4(r,t)).replace("{{time}}",c8(a,t))},Jre={p:c8,P:Xre},Qre=/^D+$/,eae=/^Y+$/,tae=["D","DD","YY","YYYY"];function nae(e){return Qre.test(e)}function rae(e){return eae.test(e)}function aae(e,t,n){const r=iae(e,t,n);if(console.warn(r),tae.includes(e))throw new RangeError(r)}function iae(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const oae=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sae=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lae=/^'([^]*?)'?$/,uae=/''/g,cae=/[a-zA-Z]/;function G4(e,t,n){var f,h,p,g;const r=jw(),a=r.locale??Gre,i=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,s=rs(e,n==null?void 0:n.in);if(!fre(s))throw new RangeError("Invalid time value");let u=t.match(sae).map(v=>{const b=v[0];if(b==="p"||b==="P"){const _=Jre[b];return _(v,a.formatLong)}return v}).join("").match(oae).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:dae(v)};if(U4[b])return{isToken:!0,value:v};if(b.match(cae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(u=a.localize.preprocessor(s,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(v=>{if(!v.isToken)return v.value;const b=v.value;(rae(b)||nae(b))&&aae(b,t,String(e));const _=U4[b[0]];return _(s,b,a.localize,c)}).join("")}function dae(e){const t=e.match(lae);return t?t[1].replace(uae,"'"):e}const fae=".litechat/conversations",hae=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${G4(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${G4(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,u,c,f,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(u=r.prompt.metadata)!=null&&u.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(p=>{n+=`- ${p.name} (${p.type}, ${Gv(p.size)}) ${p.source==="vfs"?`(VFS: ${p.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((f=r.metadata)!=null&&f.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n},WS=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},So=ql(Hl((e,t)=>({conversations:[],projects:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},isLoading:!1,error:null,loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([Gt.loadConversations(),Gt.loadProjects(),Gt.loadSyncRepos()]),i={};n.forEach(o=>{i[o.id]="idle"}),e({conversations:n,projects:r,syncRepos:a,conversationSyncStatus:i,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=Lo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]="idle")});try{const o=t().getConversationById(r);if(o)await Gt.saveConversation(o);else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(u=>u.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([u])=>u!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(u=>u.id===n);if(s!==-1){const u=o.conversations[s].metadata??{},c=r.metadata??{},f={...u,...c};Object.assign(o.conversations[s],{...r,metadata:f,updatedAt:new Date}),["title","metadata","syncRepoId","projectId"].some(p=>p in r)&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(o.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Gt.saveConversation(o)}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const u=s.conversations.findIndex(c=>c.id===n);u!==-1&&(s.conversations[u]=a),s.conversationSyncStatus[n]==="needs-sync"&&(s.conversationSyncStatus[n]="idle"),s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(u=>u.id===n);s!==-1&&(o.conversations[s]=a),o.conversationSyncStatus[n]==="needs-sync"&&(o.conversationSyncStatus[n]="idle"),o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Gt.deleteConversation(n),await Gt.deleteInteractionsForConversation(n),r===n&&a==="conversation"&&ar.getState().setCurrentConversationId(null)}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{i&&(s.conversations.push(i),s.conversationSyncStatus[n]="idle"),r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},addProject:async n=>{const r=n.parentId??null,a=t().getProjectById(r),i=a?a.path:"/",o=n.name.trim(),s=Ab(i,o),u=Lo(),c=new Date,f={id:u,path:s,createdAt:c,updatedAt:c,name:o,parentId:r,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,metadata:n.metadata??{}};e(h=>{h.projects.push(f)});try{const h=t().getProjectById(u);if(h){const p=JSON.parse(JSON.stringify(h));await Gt.saveProject(p)}else throw new Error("Failed to retrieve newly added project state");return u}catch(h){throw console.error("ConversationStore: Error adding project",h),h.name==="ConstraintError"?dt.error(`A project or folder named "${o}" already exists in this location.`):dt.error("Failed to save new project."),e(p=>({error:"Failed to save new project",projects:p.projects.filter(g=>g.id!==u)})),h}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ConversationStore: Project ${n} not found.`);return}let i=a.path,o=a.name;if(r.name!==void 0&&r.name!==a.name){o=r.name.trim();const u=t().getProjectById(a.parentId),c=u?u.path:"/";i=Ab(c,o)}e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&Object.assign(u.projects[c],{...r,name:o,path:i,updatedAt:new Date})});const s=t().getProjectById(n);if(s)try{const u=JSON.parse(JSON.stringify(s));await Gt.saveProject(u)}catch(u){throw console.error("ConversationStore: Error updating project",u),u.name==="ConstraintError"?dt.error(`A project or folder named "${o}" already exists in this location.`):dt.error("Failed to save project update."),e(c=>{const f=c.projects.findIndex(h=>h.id===n);f!==-1&&(c.projects[f]=a),c.error="Failed to save project update"}),u}else console.error("ConversationStore: Failed to retrieve updated project state after update."),e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&(u.projects[c]=a),u.error="Failed to save project update (state error)"})},deleteProject:async n=>{const r=t().selectedItemId,a=t().selectedItemType;if(!t().projects.find(c=>c.id===n))return;const o=new Set,s=new Set,u=c=>{o.add(c),t().projects.filter(f=>f.parentId===c).forEach(f=>u(f.id)),t().conversations.filter(f=>f.projectId===c).forEach(f=>s.add(f.id))};u(n),e(c=>({projects:c.projects.filter(f=>!o.has(f.id)),conversations:c.conversations.map(f=>s.has(f.id)?{...f,projectId:null}:f),selectedItemId:o.has(r??"")?null:r,selectedItemType:o.has(r??"")?null:a}));try{await Gt.deleteProject(n),o.has(r??"")&&ar.getState().setCurrentConversationId(null)}catch(c){throw console.error("ConversationStore: Error deleting project",c),e({error:"Failed to delete project. Please reload."}),c}},selectItem:(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),r==="conversation"?ar.getState().setCurrentConversationId(n):ar.getState().setCurrentConversationId(null)):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{try{const r=await n.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.conversation||!Array.isArray(a.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const i=a.conversation,o=a.interactions;if(!i.id||!i.title||!i.createdAt||!i.updatedAt)throw new Error("Invalid conversation data in import file.");const s=await t().addConversation({title:i.title||"Imported Chat",metadata:i.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(c=>Gt.saveInteraction({...c,conversationId:s,id:Lo()}));await Promise.all(u),t().selectItem(s,"conversation"),dt.success("Conversation imported successfully.")}catch(r){throw console.error("ConversationStore: Error importing conversation",r),dt.error(`Import failed: ${r instanceof Error?r.message:String(r)}`),r}},exportConversation:async(n,r)=>{try{const a=t().conversations.find(c=>c.id===n);if(!a)throw new Error("Conversation not found.");const i=await Gt.loadInteractionsForConversation(n);let o,s;const u=a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(r==="json"){const f=JSON.stringify({conversation:a,interactions:i},null,2);o=new Blob([f],{type:"application/json"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.json`}else if(r==="md"){const c=hae(a,i);o=new Blob([c],{type:"text/markdown"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");WS(o,s),dt.success(`Conversation exported as ${r.toUpperCase()}.`)}catch(a){throw console.error("ConversationStore: Error exporting conversation",a),dt.error(`Export failed: ${a instanceof Error?a.message:String(a)}`),a}},exportProject:async n=>{try{const r=t().getProjectById(n);if(!r)throw new Error("Project not found.");const a=t().projects,i=t().conversations,o=async p=>{const g=a.find(S=>S.id===p);if(!g)throw new Error(`Project ${p} not found in state.`);const v=a.filter(S=>S.parentId===p),b=i.filter(S=>S.projectId===p),_=[];for(const S of v)_.push(await o(S.id));for(const S of b){const x=await Gt.loadInteractionsForConversation(S.id);_.push({conversation:S,interactions:x})}return{project:g,children:_}},s=await o(n),u=JSON.stringify(s,null,2),c=new Blob([u],{type:"application/json"}),h=`litechat_project_${r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${n.substring(0,6)}.json`;WS(c,h),dt.success(`Project "${r.name}" exported.`)}catch(r){throw console.error("ConversationStore: Error exporting project",r),dt.error(`Project export failed: ${r instanceof Error?r.message:String(r)}`),r}},exportAllConversations:async()=>{try{const n=t().conversations,r=[];for(const s of n){const u=await Gt.loadInteractionsForConversation(s.id);r.push({conversation:s,interactions:u})}const a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),o=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;WS(i,o),dt.success("All conversations exported.")}catch(n){throw console.error("ConversationStore: Error exporting conversations",n),dt.error(`Export failed: ${n instanceof Error?n.message:String(n)}`),n}},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Gt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=Lo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Gt.saveSyncRepo(s)}else throw new Error("Failed to retrieve newly added sync repo state");return dt.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(u=>u.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Gt.saveSyncRepo(o),dt.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const u=s.syncRepos.findIndex(c=>c.id===n);u!==-1&&(s.syncRepos[u]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(a=>a.id===n);if(r){e(a=>({syncRepos:a.syncRepos.filter(i=>i.id!==n)}));try{await Gt.deleteSyncRepo(n),dt.success(`Sync repository "${r.name}" deleted.`)}catch(a){throw console.error("ConversationStore: Error deleting sync repo",a),e(i=>{r&&i.syncRepos.push(r),i.error="Failed to delete sync repository"}),a}}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,"idle"),dt.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)})},syncConversation:async n=>{var h,p;const{conversations:r,syncRepos:a,_setConversationSyncStatus:i,updateConversation:o}=t(),s=r.find(g=>g.id===n);if(!s){dt.error("Conversation not found for syncing.");return}if(!s.syncRepoId){dt.info("Conversation not linked to a sync repository.");return}const u=a.find(g=>g.id===s.syncRepoId);if(!u){dt.error("Sync repository configuration not found."),i(n,"error","Repo not found");return}i(n,"syncing");const c=Gn(`/synced_convos/${u.id}`),f=Bu(c,fae,`${n}.json`);try{let g=!1;try{await cE.promises.stat(Bu(c,".git")),g=!0}catch(x){if(x.code!=="ENOENT")throw x}if(g)dt.info(`Pulling latest changes for "${u.name}"...`),await Ok(c);else{dt.info(`Cloning repository "${u.name}" for first sync...`),await Nk(Wv(c),u.remoteUrl,u.branch);try{await cE.promises.stat(Bu(c,".git"))}catch{throw new Error(`Clone seemed successful but repo dir "${c}" not found.`)}}let v=null,b=null;try{const x=await Fh(f),E=new TextDecoder().decode(x);v=JSON.parse(E),b=(h=v==null?void 0:v.conversation)!=null&&h.updatedAt?new Date(v.conversation.updatedAt).getTime():null}catch(x){if(x.code==="ENOENT")console.log(`Conversation file ${f} not found in repo. Will push local version.`);else throw new Error(`Failed to read remote conversation file: ${x.message}`)}const _=s.updatedAt.getTime(),S=((p=s.lastSyncedAt)==null?void 0:p.getTime())??0;if(!v||_>(b??0)||_>S){dt.info("Local changes detected. Pushing to remote...");const x=await Gt.loadInteractionsForConversation(n),E={...s,lastSyncedAt:null},C=JSON.stringify({conversation:E,interactions:x},null,2);await Dw(f,C),await Ik(c,`Sync conversation: ${s.title} (${n})`),await Dk(c),await o(n,{lastSyncedAt:new Date}),i(n,"idle"),dt.success("Conversation synced successfully (pushed).")}else if(b&&b>_){dt.info("Remote changes detected. Updating local conversation...");const x={...v.conversation,lastSyncedAt:new Date};await Gt.saveConversation(x),await Gt.deleteInteractionsForConversation(n);const E=v.interactions.map(C=>Gt.saveInteraction({...C,conversationId:n}));await Promise.all(E),e(C=>{const A=C.conversations.findIndex(O=>O.id===n);A!==-1&&(C.conversations[A]=x)}),t().selectedItemId===n&&t().selectedItemType==="conversation"&&ar.getState().loadInteractions(n),i(n,"idle"),dt.success("Conversation synced successfully (pulled).")}else dt.info("Conversation already up-to-date."),await o(n,{lastSyncedAt:new Date}),i(n,"idle")}catch(g){console.error(`Sync failed for conversation ${n}:`,g);const v=g instanceof Error?g.message:String(g);dt.error(`Sync failed: ${v}`),i(n,"error",v)}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},getTopLevelProjectId:(n,r)=>{if(!n||!r)return null;if(r==="conversation"){const i=t().getConversationById(n);n=(i==null?void 0:i.projectId)??null,r="project"}if(r!=="project"||!n)return null;let a=t().getProjectById(n);for(;a!=null&&a.parentId;){const i=t().getProjectById(a.parentId);if(!i)return a.id;a=i}return(a==null?void 0:a.id)??null},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const o=t().getConversationById(r);if(!o){console.warn("Cannot update tool settings: Selected conversation not found.");return}const s=o.metadata??{},u={...s};n.enabledTools!==void 0&&(u.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(u.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(u)!==JSON.stringify(s)||!o.metadata)&&await i(r,{metadata:u})}}))),Wi=ql(Hl(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t]})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})}})));var d8="vercel.ai.error",pae=Symbol.for(d8),f8,mae=class h8 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[f8]=!0,this.name=t,this.cause=r}static isInstance(t){return h8.hasMarker(t,d8)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};f8=pae;var xn=mae,p8="AI_APICallError",m8=`vercel.ai.error.${p8}`,gae=Symbol.for(m8),g8,ha=class extends xn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:p8,message:t,cause:s}),this[g8]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return xn.hasMarker(t,m8)}};g8=gae;var y8="AI_EmptyResponseBodyError",b8=`vercel.ai.error.${y8}`,yae=Symbol.for(b8),v8,jk=class extends xn{constructor({message:t="Empty response body"}={}){super({name:y8,message:t}),this[v8]=!0}static isInstance(t){return xn.hasMarker(t,b8)}};v8=yae;function rg(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var w8="AI_InvalidArgumentError",_8=`vercel.ai.error.${w8}`,bae=Symbol.for(_8),x8,Mk=class extends xn{constructor({message:t,cause:n,argument:r}){super({name:w8,message:t,cause:n}),this[x8]=!0,this.argument=r}static isInstance(t){return xn.hasMarker(t,_8)}};x8=bae;var S8="AI_InvalidPromptError",E8=`vercel.ai.error.${S8}`,vae=Symbol.for(E8),C8,_l=class extends xn{constructor({prompt:t,message:n,cause:r}){super({name:S8,message:`Invalid prompt: ${n}`,cause:r}),this[C8]=!0,this.prompt=t}static isInstance(t){return xn.hasMarker(t,E8)}};C8=vae;var k8="AI_InvalidResponseDataError",A8=`vercel.ai.error.${k8}`,wae=Symbol.for(A8),T8,qf=class extends xn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:k8,message:n}),this[T8]=!0,this.data=t}static isInstance(t){return xn.hasMarker(t,A8)}};T8=wae;var R8="AI_JSONParseError",N8=`vercel.ai.error.${R8}`,_ae=Symbol.for(N8),I8,nc=class extends xn{constructor({text:t,cause:n}){super({name:R8,message:`JSON parsing failed: Text: ${t}.
Error message: ${rg(n)}`,cause:n}),this[I8]=!0,this.text=t}static isInstance(t){return xn.hasMarker(t,N8)}};I8=_ae;var O8="AI_LoadAPIKeyError",D8=`vercel.ai.error.${O8}`,xae=Symbol.for(D8),j8,Qy=class extends xn{constructor({message:t}){super({name:O8,message:t}),this[j8]=!0}static isInstance(t){return xn.hasMarker(t,D8)}};j8=xae;var M8="AI_TooManyEmbeddingValuesForCallError",P8=`vercel.ai.error.${M8}`,Sae=Symbol.for(P8),F8,Pk=class extends xn{constructor(t){super({name:M8,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[F8]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return xn.hasMarker(t,P8)}};F8=Sae;var L8="AI_TypeValidationError",$8=`vercel.ai.error.${L8}`,Eae=Symbol.for($8),B8,Cae=class dE extends xn{constructor({value:t,cause:n}){super({name:L8,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${rg(n)}`,cause:n}),this[B8]=!0,this.value=t}static isInstance(t){return xn.hasMarker(t,$8)}static wrap({value:t,cause:n}){return dE.isInstance(n)&&n.value===t?n:new dE({value:t,cause:n})}};B8=Eae;var rc=Cae,z8="AI_UnsupportedFunctionalityError",U8=`vercel.ai.error.${z8}`,kae=Symbol.for(U8),q8,_r=class extends xn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:z8,message:n}),this[q8]=!0,this.functionality=t}static isInstance(t){return xn.hasMarker(t,U8)}};q8=kae;let Aae=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Yc={exports:{}},W4;function Tae(){if(W4)return Yc.exports;W4=1;const e=typeof Wt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Wt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const f=JSON.parse(s,u);if(f===null||typeof f!="object")return f;const h=c&&c.protoAction||"error",p=c&&c.constructorAction||"error";if(h==="ignore"&&p==="ignore")return f;if(h!=="ignore"&&p!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return f}else if(h!=="ignore"&&p==="ignore"){if(t.test(s)===!1)return f}else if(n.test(s)===!1)return f;return a(f,{protoAction:h,constructorAction:p,safe:c&&c.safe})}function a(s,{protoAction:u="error",constructorAction:c="error",safe:f}={}){let h=[s];for(;h.length;){const p=h;h=[];for(const g of p){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(f===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return s}function i(s,u,c){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,c)}finally{Error.stackTraceLimit=f}}function o(s,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Yc.exports=i,Yc.exports.default=i,Yc.exports.parse=i,Yc.exports.safeParse=o,Yc.exports.scan=a,Yc.exports}var Rae=Tae();const as=Qa(Rae);var Nae={};function Ls(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Iae(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function Oae(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function Dae(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=jae(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function jae(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function ag(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Ad=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Aae(n,t);if(e==null)return a;if(n.includes(r))throw new Mk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Rs=Ad();function Mae(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function Pae(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function gb(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Fae({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Qy({message:`${r} API key must be a string.`});if(typeof Gr>"u")throw new Qy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Nae[t],e==null)throw new Qy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Qy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var rv=Symbol.for("vercel.ai.validator");function Lae(e){return{[rv]:!0,validate:e}}function $ae(e){return typeof e=="object"&&e!==null&&rv in e&&e[rv]===!0&&"validate"in e}function Bae(e){return $ae(e)?e:zae(e)}function zae(e){return Lae(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Uae({value:e,schema:t}){const n=Lh({value:e,schema:t});if(!n.success)throw rc.wrap({value:e,cause:n.error});return n.value}function Lh({value:e,schema:t}){const n=Bae(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:rc.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:rc.wrap({value:e,cause:r})}}}function qae({text:e,schema:t}){try{const n=as.parse(e);return t==null?n:Uae({value:n,schema:t})}catch(n){throw nc.isInstance(n)||rc.isInstance(n)?n:new nc({text:e,cause:n})}}function ud({text:e,schema:t}){try{const n=as.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Lh({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:nc.isInstance(n)?n:new nc({text:e,cause:n})}}}function K4(e){try{return as.parse(e),!0}catch{return!1}}function Hae({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Lh({value:t[e],schema:n});if(!r.success)throw new Mk({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Vae=()=>globalThis.fetch,Xo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Gae({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Gae=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Vae()})=>{try{const s=await o(e,{method:"POST",headers:Pae(t),body:n.content,signal:i}),u=ag(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw gb(f)||ha.isInstance(f)?f:new ha({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(gb(c)||ha.isInstance(c))?c:new ha({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(gb(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new ha({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},H8=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=ag(r);if(o.trim()==="")return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=qae({text:o,schema:e});return{responseHeaders:s,value:new ha({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Fk=e=>async({response:t})=>{const n=ag(t);if(t.body==null)throw new jk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(Dae()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(ud({text:r,schema:e}))}}))}},Td=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=ud({text:a,schema:e}),o=ag(t);if(!i.success)throw new ha({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Wae,atob:Kae}=globalThis;function V8(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=Kae(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function ch(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Wae(t)}function G8(e){return e==null?void 0:e.replace(/\/$/,"")}const Zae=Symbol("Let zodToJsonSchema decide on which parser to use"),Z4={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Yae=e=>typeof e=="string"?{...Z4,name:e}:{...Z4,...e},Xae=e=>{const t=Yae(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function W8(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function dr(e,t,n,r,a){e[t]=n,W8(e,t,r,a)}var Yn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Yn||(Yn={}));var fE;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(fE||(fE={}));const Yt=Yn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),El=e=>{switch(typeof e){case"undefined":return Yt.undefined;case"string":return Yt.string;case"number":return isNaN(e)?Yt.nan:Yt.number;case"boolean":return Yt.boolean;case"function":return Yt.function;case"bigint":return Yt.bigint;case"symbol":return Yt.symbol;case"object":return Array.isArray(e)?Yt.array:e===null?Yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Yt.promise:typeof Map<"u"&&e instanceof Map?Yt.map:typeof Set<"u"&&e instanceof Set?Yt.set:typeof Date<"u"&&e instanceof Date?Yt.date:Yt.object;default:return Yt.unknown}},Rt=Yn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Jae=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ki extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(n(o))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return a(this),r}static assert(t){if(!(t instanceof Ki))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Ki.create=e=>new Ki(e);const dh=(e,t)=>{let n;switch(e.code){case Rt.invalid_type:e.received===Yt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Rt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Yn.jsonStringifyReplacer)}`;break;case Rt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Yn.joinValues(e.keys,", ")}`;break;case Rt.invalid_union:n="Invalid input";break;case Rt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Yn.joinValues(e.options)}`;break;case Rt.invalid_enum_value:n=`Invalid enum value. Expected ${Yn.joinValues(e.options)}, received '${e.received}'`;break;case Rt.invalid_arguments:n="Invalid function arguments";break;case Rt.invalid_return_type:n="Invalid function return type";break;case Rt.invalid_date:n="Invalid date";break;case Rt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Yn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Rt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Rt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Rt.custom:n="Invalid input";break;case Rt.invalid_intersection_types:n="Intersection results could not be merged";break;case Rt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Rt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Yn.assertNever(e)}return{message:n}};let K8=dh;function Qae(e){K8=e}function av(){return K8}const iv=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},eie=[];function Kt(e,t){const n=av(),r=iv({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===dh?void 0:dh].filter(a=>!!a)});e.common.issues.push(r)}class Xa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return vn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Xa.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return vn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const vn=Object.freeze({status:"aborted"}),Ff=e=>({status:"dirty",value:e}),ci=e=>({status:"valid",value:e}),hE=e=>e.status==="aborted",pE=e=>e.status==="dirty",cd=e=>e.status==="valid",qm=e=>typeof Promise<"u"&&e instanceof Promise;function ov(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Z8(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var an;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(an||(an={}));var cm,dm;class $s{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Y4=(e,t)=>{if(cd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Ki(e.common.issues);return this._error=n,this._error}}};function Nn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var u,c;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:s.defaultError}},description:a}}class Pn{get description(){return this._def.description}_getType(t){return El(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:El(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Xa,ctx:{common:t.parent.common,data:t.data,parsedType:El(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(qm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:El(t)},i=this._parseSync({data:t,path:a.path,parent:a});return Y4(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:El(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return cd(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>cd(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:El(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(qm(a)?a:Promise.resolve(a));return Y4(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:Rt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Jo({schema:this,typeName:Pt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Vo.create(this,this._def)}nullable(){return sc.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ho.create(this)}promise(){return hh.create(this,this._def)}or(t){return Wm.create([this,t],this._def)}and(t){return Km.create(this,t,this._def)}transform(t){return new Jo({...Nn(this._def),schema:this,typeName:Pt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Qm({...Nn(this._def),innerType:this,defaultValue:n,typeName:Pt.ZodDefault})}brand(){return new Lk({typeName:Pt.ZodBranded,type:this,...Nn(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new e0({...Nn(this._def),innerType:this,catchValue:n,typeName:Pt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return ig.create(this,t)}readonly(){return t0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tie=/^c[^\s-]{8,}$/i,nie=/^[0-9a-z]+$/,rie=/^[0-9A-HJKMNP-TV-Z]{26}$/i,aie=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iie=/^[a-z0-9_-]{21}$/i,oie=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sie=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,lie=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,uie="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let KS;const cie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,die=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,fie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,hie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pie=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,mie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Y8="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",gie=new RegExp(`^${Y8}$`);function X8(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function yie(e){return new RegExp(`^${X8(e)}$`)}function J8(e){let t=`${Y8}T${X8(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function bie(e,t){return!!((t==="v4"||!t)&&cie.test(e)||(t==="v6"||!t)&&fie.test(e))}function vie(e,t){if(!oie.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function wie(e,t){return!!((t==="v4"||!t)&&die.test(e)||(t==="v6"||!t)&&hie.test(e))}class Bo extends Pn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Yt.string){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.string,received:i.parsedType}),vn}const r=new Xa;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")lie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"email",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")KS||(KS=new RegExp(uie,"u")),KS.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"emoji",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")aie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"uuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")iie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"nanoid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")tie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")nie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid2",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")rie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ulid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Kt(a,{validation:"url",code:Rt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"regex",code:Rt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?J8(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?gie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?yie(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?sie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"duration",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?bie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ip",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?vie(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"jwt",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?wie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cidr",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?pie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?mie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64url",code:Rt.invalid_string,message:i.message}),r.dirty()):Yn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Rt.invalid_string,...an.errToObj(r)})}_addCheck(t){return new Bo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...an.errToObj(t)})}url(t){return this._addCheck({kind:"url",...an.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...an.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...an.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...an.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...an.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...an.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...an.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...an.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...an.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...an.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...an.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...an.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...an.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...an.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...an.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...an.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...an.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...an.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...an.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...an.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...an.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...an.errToObj(n)})}nonempty(t){return this.min(1,an.errToObj(t))}trim(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Bo.create=e=>{var t;return new Bo({checks:[],typeName:Pt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Nn(e)})};function _ie(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class ac extends Pn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Yt.number){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.number,received:i.parsedType}),vn}let r;const a=new Xa;for(const i of this._def.checks)i.kind==="int"?Yn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?_ie(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_finite,message:i.message}),a.dirty()):Yn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,an.toString(n))}gt(t,n){return this.setLimit("min",t,!1,an.toString(n))}lte(t,n){return this.setLimit("max",t,!0,an.toString(n))}lt(t,n){return this.setLimit("max",t,!1,an.toString(n))}setLimit(t,n,r,a){return new ac({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:an.toString(a)}]})}_addCheck(t){return new ac({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:an.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:an.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:an.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:an.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:an.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:an.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:an.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:an.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:an.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Yn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}ac.create=e=>new ac({checks:[],typeName:Pt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Nn(e)});class ic extends Pn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Yt.bigint)return this._getInvalidInput(t);let r;const a=new Xa;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Yn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.bigint,received:n.parsedType}),vn}gte(t,n){return this.setLimit("min",t,!0,an.toString(n))}gt(t,n){return this.setLimit("min",t,!1,an.toString(n))}lte(t,n){return this.setLimit("max",t,!0,an.toString(n))}lt(t,n){return this.setLimit("max",t,!1,an.toString(n))}setLimit(t,n,r,a){return new ic({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:an.toString(a)}]})}_addCheck(t){return new ic({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:an.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:an.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:an.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:an.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:an.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ic.create=e=>{var t;return new ic({checks:[],typeName:Pt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Nn(e)})};class Hm extends Pn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Yt.boolean){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.boolean,received:r.parsedType}),vn}return ci(t.data)}}Hm.create=e=>new Hm({typeName:Pt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Nn(e)});class dd extends Pn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Yt.date){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.date,received:i.parsedType}),vn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_date}),vn}const r=new Xa;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Yn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new dd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:an.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:an.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}dd.create=e=>new dd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Pt.ZodDate,...Nn(e)});class sv extends Pn{_parse(t){if(this._getType(t)!==Yt.symbol){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.symbol,received:r.parsedType}),vn}return ci(t.data)}}sv.create=e=>new sv({typeName:Pt.ZodSymbol,...Nn(e)});class Vm extends Pn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.undefined,received:r.parsedType}),vn}return ci(t.data)}}Vm.create=e=>new Vm({typeName:Pt.ZodUndefined,...Nn(e)});class Gm extends Pn{_parse(t){if(this._getType(t)!==Yt.null){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.null,received:r.parsedType}),vn}return ci(t.data)}}Gm.create=e=>new Gm({typeName:Pt.ZodNull,...Nn(e)});class fh extends Pn{constructor(){super(...arguments),this._any=!0}_parse(t){return ci(t.data)}}fh.create=e=>new fh({typeName:Pt.ZodAny,...Nn(e)});class id extends Pn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ci(t.data)}}id.create=e=>new id({typeName:Pt.ZodUnknown,...Nn(e)});class Bl extends Pn{_parse(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.never,received:n.parsedType}),vn}}Bl.create=e=>new Bl({typeName:Pt.ZodNever,...Nn(e)});class lv extends Pn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.void,received:r.parsedType}),vn}return ci(t.data)}}lv.create=e=>new lv({typeName:Pt.ZodVoid,...Nn(e)});class Ho extends Pn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Yt.array)return Kt(n,{code:Rt.invalid_type,expected:Yt.array,received:n.parsedType}),vn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Kt(n,{code:o?Rt.too_big:Rt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Kt(n,{code:Rt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Kt(n,{code:Rt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new $s(n,o,n.path,s)))).then(o=>Xa.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new $s(n,o,n.path,s)));return Xa.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Ho({...this._def,minLength:{value:t,message:an.toString(n)}})}max(t,n){return new Ho({...this._def,maxLength:{value:t,message:an.toString(n)}})}length(t,n){return new Ho({...this._def,exactLength:{value:t,message:an.toString(n)}})}nonempty(t){return this.min(1,t)}}Ho.create=(e,t)=>new Ho({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pt.ZodArray,...Nn(t)});function If(e){if(e instanceof zr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Vo.create(If(r))}return new zr({...e._def,shape:()=>t})}else return e instanceof Ho?new Ho({...e._def,type:If(e.element)}):e instanceof Vo?Vo.create(If(e.unwrap())):e instanceof sc?sc.create(If(e.unwrap())):e instanceof Bs?Bs.create(e.items.map(t=>If(t))):e}class zr extends Pn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Yn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Yt.object){const c=this._getOrReturnCtx(t);return Kt(c,{code:Rt.invalid_type,expected:Yt.object,received:c.parsedType}),vn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Bl&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||s.push(c);const u=[];for(const c of o){const f=i[c],h=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new $s(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Bl){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")s.length>0&&(Kt(a,{code:Rt.unrecognized_keys,keys:s}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of s){const h=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new $s(a,h,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const h=await f.key,p=await f.value;c.push({key:h,value:p,alwaysSet:f.alwaysSet})}return c}).then(c=>Xa.mergeObjectSync(r,c)):Xa.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return an.errToObj,new zr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const u=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=an.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new zr({...this._def,unknownKeys:"strip"})}passthrough(){return new zr({...this._def,unknownKeys:"passthrough"})}extend(t){return new zr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new zr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Pt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new zr({...this._def,catchall:t})}pick(t){const n={};return Yn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}omit(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}deepPartial(){return If(this)}partial(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new zr({...this._def,shape:()=>n})}required(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Vo;)i=i._def.innerType;n[r]=i}}),new zr({...this._def,shape:()=>n})}keyof(){return Q8(Yn.objectKeys(this.shape))}}zr.create=(e,t)=>new zr({shape:()=>e,unknownKeys:"strip",catchall:Bl.create(),typeName:Pt.ZodObject,...Nn(t)});zr.strictCreate=(e,t)=>new zr({shape:()=>e,unknownKeys:"strict",catchall:Bl.create(),typeName:Pt.ZodObject,...Nn(t)});zr.lazycreate=(e,t)=>new zr({shape:e,unknownKeys:"strip",catchall:Bl.create(),typeName:Pt.ZodObject,...Nn(t)});class Wm extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Ki(s.ctx.common.issues));return Kt(n,{code:Rt.invalid_union,unionErrors:o}),vn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(u=>new Ki(u));return Kt(n,{code:Rt.invalid_union,unionErrors:s}),vn}}get options(){return this._def.options}}Wm.create=(e,t)=>new Wm({options:e,typeName:Pt.ZodUnion,...Nn(t)});const wl=e=>e instanceof Ym?wl(e.schema):e instanceof Jo?wl(e.innerType()):e instanceof Xm?[e.value]:e instanceof oc?e.options:e instanceof Jm?Yn.objectValues(e.enum):e instanceof Qm?wl(e._def.innerType):e instanceof Vm?[void 0]:e instanceof Gm?[null]:e instanceof Vo?[void 0,...wl(e.unwrap())]:e instanceof sc?[null,...wl(e.unwrap())]:e instanceof Lk||e instanceof t0?wl(e.unwrap()):e instanceof e0?wl(e._def.innerType):[];class Mw extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.object)return Kt(n,{code:Rt.invalid_type,expected:Yt.object,received:n.parsedType}),vn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Kt(n,{code:Rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),vn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=wl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new Mw({typeName:Pt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Nn(r)})}}function mE(e,t){const n=El(e),r=El(t);if(e===t)return{valid:!0,data:e};if(n===Yt.object&&r===Yt.object){const a=Yn.objectKeys(t),i=Yn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const u=mE(e[s],t[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(n===Yt.array&&r===Yt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],u=mE(o,s);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===Yt.date&&r===Yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Km extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(hE(i)||hE(o))return vn;const s=mE(i.value,o.value);return s.valid?((pE(i)||pE(o))&&n.dirty(),{status:n.value,value:s.data}):(Kt(r,{code:Rt.invalid_intersection_types}),vn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Km.create=(e,t,n)=>new Km({left:e,right:t,typeName:Pt.ZodIntersection,...Nn(n)});class Bs extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.array)return Kt(r,{code:Rt.invalid_type,expected:Yt.array,received:r.parsedType}),vn;if(r.data.length<this._def.items.length)return Kt(r,{code:Rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),vn;!this._def.rest&&r.data.length>this._def.items.length&&(Kt(r,{code:Rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new $s(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Xa.mergeArray(n,o)):Xa.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Bs({...this._def,rest:t})}}Bs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Bs({items:e,typeName:Pt.ZodTuple,rest:null,...Nn(t)})};class Zm extends Pn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.object)return Kt(r,{code:Rt.invalid_type,expected:Yt.object,received:r.parsedType}),vn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new $s(r,s,r.path,s)),value:o._parse(new $s(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Xa.mergeObjectAsync(n,a):Xa.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Pn?new Zm({keyType:t,valueType:n,typeName:Pt.ZodRecord,...Nn(r)}):new Zm({keyType:Bo.create(),valueType:t,typeName:Pt.ZodRecord,...Nn(n)})}}class uv extends Pn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.map)return Kt(r,{code:Rt.invalid_type,expected:Yt.map,received:r.parsedType}),vn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,u],c)=>({key:a._parse(new $s(r,s,r.path,[c,"key"])),value:i._parse(new $s(r,u,r.path,[c,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of o){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}}}}uv.create=(e,t,n)=>new uv({valueType:t,keyType:e,typeName:Pt.ZodMap,...Nn(n)});class fd extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.set)return Kt(r,{code:Rt.invalid_type,expected:Yt.set,received:r.parsedType}),vn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Kt(r,{code:Rt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Kt(r,{code:Rt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const c=new Set;for(const f of u){if(f.status==="aborted")return vn;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const s=[...r.data.values()].map((u,c)=>i._parse(new $s(r,u,r.path,c)));return r.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(t,n){return new fd({...this._def,minSize:{value:t,message:an.toString(n)}})}max(t,n){return new fd({...this._def,maxSize:{value:t,message:an.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}fd.create=(e,t)=>new fd({valueType:e,minSize:null,maxSize:null,typeName:Pt.ZodSet,...Nn(t)});class Hf extends Pn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.function)return Kt(n,{code:Rt.invalid_type,expected:Yt.function,received:n.parsedType}),vn;function r(s,u){return iv({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,av(),dh].filter(c=>!!c),issueData:{code:Rt.invalid_arguments,argumentsError:u}})}function a(s,u){return iv({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,av(),dh].filter(c=>!!c),issueData:{code:Rt.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof hh){const s=this;return ci(async function(...u){const c=new Ki([]),f=await s._def.args.parseAsync(u,i).catch(g=>{throw c.addIssue(r(u,g)),c}),h=await Reflect.apply(o,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const s=this;return ci(function(...u){const c=s._def.args.safeParse(u,i);if(!c.success)throw new Ki([r(u,c.error)]);const f=Reflect.apply(o,this,c.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new Ki([a(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Hf({...this._def,args:Bs.create(t).rest(id.create())})}returns(t){return new Hf({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Hf({args:t||Bs.create([]).rest(id.create()),returns:n||id.create(),typeName:Pt.ZodFunction,...Nn(r)})}}class Ym extends Pn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ym.create=(e,t)=>new Ym({getter:e,typeName:Pt.ZodLazy,...Nn(t)});class Xm extends Pn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Kt(n,{received:n.data,code:Rt.invalid_literal,expected:this._def.value}),vn}return{status:"valid",value:t.data}}get value(){return this._def.value}}Xm.create=(e,t)=>new Xm({value:e,typeName:Pt.ZodLiteral,...Nn(t)});function Q8(e,t){return new oc({values:e,typeName:Pt.ZodEnum,...Nn(t)})}class oc extends Pn{constructor(){super(...arguments),cm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{expected:Yn.joinValues(r),received:n.parsedType,code:Rt.invalid_type}),vn}if(ov(this,cm)||Z8(this,cm,new Set(this._def.values)),!ov(this,cm).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{received:n.data,code:Rt.invalid_enum_value,options:r}),vn}return ci(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return oc.create(t,{...this._def,...n})}exclude(t,n=this._def){return oc.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}cm=new WeakMap;oc.create=Q8;class Jm extends Pn{constructor(){super(...arguments),dm.set(this,void 0)}_parse(t){const n=Yn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Yt.string&&r.parsedType!==Yt.number){const a=Yn.objectValues(n);return Kt(r,{expected:Yn.joinValues(a),received:r.parsedType,code:Rt.invalid_type}),vn}if(ov(this,dm)||Z8(this,dm,new Set(Yn.getValidEnumValues(this._def.values))),!ov(this,dm).has(t.data)){const a=Yn.objectValues(n);return Kt(r,{received:r.data,code:Rt.invalid_enum_value,options:a}),vn}return ci(t.data)}get enum(){return this._def.values}}dm=new WeakMap;Jm.create=(e,t)=>new Jm({values:e,typeName:Pt.ZodNativeEnum,...Nn(t)});class hh extends Pn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.promise&&n.common.async===!1)return Kt(n,{code:Rt.invalid_type,expected:Yt.promise,received:n.parsedType}),vn;const r=n.parsedType===Yt.promise?n.data:Promise.resolve(n.data);return ci(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}hh.create=(e,t)=>new hh({type:e,typeName:Pt.ZodPromise,...Nn(t)});class Jo extends Pn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Kt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return vn;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?vn:u.status==="dirty"||n.value==="dirty"?Ff(u.value):u});{if(n.value==="aborted")return vn;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?vn:s.status==="dirty"||n.value==="dirty"?Ff(s.value):s}}if(a.type==="refinement"){const o=s=>{const u=a.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!cd(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>cd(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Yn.assertNever(a)}}Jo.create=(e,t,n)=>new Jo({schema:e,typeName:Pt.ZodEffects,effect:t,...Nn(n)});Jo.createWithPreprocess=(e,t,n)=>new Jo({schema:t,effect:{type:"preprocess",transform:e},typeName:Pt.ZodEffects,...Nn(n)});class Vo extends Pn{_parse(t){return this._getType(t)===Yt.undefined?ci(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Vo.create=(e,t)=>new Vo({innerType:e,typeName:Pt.ZodOptional,...Nn(t)});class sc extends Pn{_parse(t){return this._getType(t)===Yt.null?ci(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}sc.create=(e,t)=>new sc({innerType:e,typeName:Pt.ZodNullable,...Nn(t)});class Qm extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Yt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Qm.create=(e,t)=>new Qm({innerType:e,typeName:Pt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Nn(t)});class e0 extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return qm(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ki(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ki(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}e0.create=(e,t)=>new e0({innerType:e,typeName:Pt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Nn(t)});class cv extends Pn{_parse(t){if(this._getType(t)!==Yt.nan){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.nan,received:r.parsedType}),vn}return{status:"valid",value:t.data}}}cv.create=e=>new cv({typeName:Pt.ZodNaN,...Nn(e)});const xie=Symbol("zod_brand");class Lk extends Pn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class ig extends Pn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?vn:i.status==="dirty"?(n.dirty(),Ff(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?vn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new ig({in:t,out:n,typeName:Pt.ZodPipeline})}}class t0 extends Pn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(cd(a)&&(a.value=Object.freeze(a.value)),a);return qm(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}t0.create=(e,t)=>new t0({innerType:e,typeName:Pt.ZodReadonly,...Nn(t)});function X4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function e5(e,t={},n){return e?fh.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(u=>{var c,f;if(!u){const h=X4(t,r),p=(f=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...h,fatal:p})}});if(!s){const u=X4(t,r),c=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:c})}}):fh.create()}const Sie={object:zr.lazycreate};var Pt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Pt||(Pt={}));const Eie=(e,t={message:`Input not instance of ${e.name}`})=>e5(n=>n instanceof e,t),t5=Bo.create,n5=ac.create,Cie=cv.create,kie=ic.create,r5=Hm.create,Aie=dd.create,Tie=sv.create,Rie=Vm.create,Nie=Gm.create,Iie=fh.create,Oie=id.create,Die=Bl.create,jie=lv.create,Mie=Ho.create,Pie=zr.create,Fie=zr.strictCreate,Lie=Wm.create,$ie=Mw.create,Bie=Km.create,zie=Bs.create,Uie=Zm.create,qie=uv.create,Hie=fd.create,Vie=Hf.create,Gie=Ym.create,Wie=Xm.create,Kie=oc.create,Zie=Jm.create,Yie=hh.create,J4=Jo.create,Xie=Vo.create,Jie=sc.create,Qie=Jo.createWithPreprocess,eoe=ig.create,toe=()=>t5().optional(),noe=()=>n5().optional(),roe=()=>r5().optional(),aoe={string:e=>Bo.create({...e,coerce:!0}),number:e=>ac.create({...e,coerce:!0}),boolean:e=>Hm.create({...e,coerce:!0}),bigint:e=>ic.create({...e,coerce:!0}),date:e=>dd.create({...e,coerce:!0})},ioe=vn;var L=Object.freeze({__proto__:null,defaultErrorMap:dh,setErrorMap:Qae,getErrorMap:av,makeIssue:iv,EMPTY_PATH:eie,addIssueToContext:Kt,ParseStatus:Xa,INVALID:vn,DIRTY:Ff,OK:ci,isAborted:hE,isDirty:pE,isValid:cd,isAsync:qm,get util(){return Yn},get objectUtil(){return fE},ZodParsedType:Yt,getParsedType:El,ZodType:Pn,datetimeRegex:J8,ZodString:Bo,ZodNumber:ac,ZodBigInt:ic,ZodBoolean:Hm,ZodDate:dd,ZodSymbol:sv,ZodUndefined:Vm,ZodNull:Gm,ZodAny:fh,ZodUnknown:id,ZodNever:Bl,ZodVoid:lv,ZodArray:Ho,ZodObject:zr,ZodUnion:Wm,ZodDiscriminatedUnion:Mw,ZodIntersection:Km,ZodTuple:Bs,ZodRecord:Zm,ZodMap:uv,ZodSet:fd,ZodFunction:Hf,ZodLazy:Ym,ZodLiteral:Xm,ZodEnum:oc,ZodNativeEnum:Jm,ZodPromise:hh,ZodEffects:Jo,ZodTransformer:Jo,ZodOptional:Vo,ZodNullable:sc,ZodDefault:Qm,ZodCatch:e0,ZodNaN:cv,BRAND:xie,ZodBranded:Lk,ZodPipeline:ig,ZodReadonly:t0,custom:e5,Schema:Pn,ZodSchema:Pn,late:Sie,get ZodFirstPartyTypeKind(){return Pt},coerce:aoe,any:Iie,array:Mie,bigint:kie,boolean:r5,date:Aie,discriminatedUnion:$ie,effect:J4,enum:Kie,function:Vie,instanceof:Eie,intersection:Bie,lazy:Gie,literal:Wie,map:qie,nan:Cie,nativeEnum:Zie,never:Die,null:Nie,nullable:Jie,number:n5,object:Pie,oboolean:roe,onumber:noe,optional:Xie,ostring:toe,pipeline:eoe,preprocess:Qie,promise:Yie,record:Uie,set:Hie,strictObject:Fie,string:t5,symbol:Tie,transformer:J4,tuple:zie,undefined:Rie,union:Lie,unknown:Oie,void:jie,NEVER:ioe,ZodIssueCode:Rt,quotelessJson:Jae,ZodError:Ki});function ooe(){return{}}function soe(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Pt.ZodAny&&(n.items=nr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&dr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&dr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(dr(n,"minItems",e.exactLength.value,e.exactLength.message,t),dr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function loe(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function uoe(){return{type:"boolean"}}function a5(e,t){return nr(e.type._def,t)}const coe=(e,t)=>nr(e.innerType._def,t);function i5(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>i5(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return doe(e,t)}}const doe=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":dr(n,"minimum",r.value,r.message,t);break;case"max":dr(n,"maximum",r.value,r.message,t);break}return n};function foe(e,t){return{...nr(e.innerType._def,t),default:e.defaultValue()}}function hoe(e,t){return t.effectStrategy==="input"?nr(e.schema._def,t):{}}function poe(e){return{type:"string",enum:Array.from(e.values)}}const moe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function goe(e,t){const n=[nr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),nr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(moe(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...u}=i;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function yoe(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let ZS;const jo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(ZS===void 0&&(ZS=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ZS),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function o5(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Mo(n,"email",r.message,t);break;case"format:idn-email":Mo(n,"idn-email",r.message,t);break;case"pattern:zod":si(n,jo.email,r.message,t);break}break;case"url":Mo(n,"uri",r.message,t);break;case"uuid":Mo(n,"uuid",r.message,t);break;case"regex":si(n,r.regex,r.message,t);break;case"cuid":si(n,jo.cuid,r.message,t);break;case"cuid2":si(n,jo.cuid2,r.message,t);break;case"startsWith":si(n,RegExp(`^${YS(r.value,t)}`),r.message,t);break;case"endsWith":si(n,RegExp(`${YS(r.value,t)}$`),r.message,t);break;case"datetime":Mo(n,"date-time",r.message,t);break;case"date":Mo(n,"date",r.message,t);break;case"time":Mo(n,"time",r.message,t);break;case"duration":Mo(n,"duration",r.message,t);break;case"length":dr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),dr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{si(n,RegExp(YS(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Mo(n,"ipv4",r.message,t),r.version!=="v4"&&Mo(n,"ipv6",r.message,t);break}case"base64url":si(n,jo.base64url,r.message,t);break;case"jwt":si(n,jo.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&si(n,jo.ipv4Cidr,r.message,t),r.version!=="v4"&&si(n,jo.ipv6Cidr,r.message,t);break}case"emoji":si(n,jo.emoji(),r.message,t);break;case"ulid":{si(n,jo.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Mo(n,"binary",r.message,t);break}case"contentEncoding:base64":{dr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{si(n,jo.base64,r.message,t);break}}break}case"nanoid":si(n,jo.nanoid,r.message,t)}return n}function YS(e,t){return t.patternStrategy==="escape"?voe(e):e}const boe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function voe(e){let t="";for(let n=0;n<e.length;n++)boe.has(e[n])||(t+="\\"),t+=e[n];return t}function Mo(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):dr(e,"format",t,n,r)}function si(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:Q4(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):dr(e,"pattern",Q4(t,r),n,r)}function Q4(e,t){var u;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){s?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),s=!1):r[c+1]==="-"&&((u=r[c+2])!=null&&u.match(/[a-z]/))?(a+=r[c],s=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function s5(e,t){var r,a,i,o,s,u;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Pt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,f)=>({...c,[f]:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",f]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Pt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...f}=o5(e.keyType._def,t);return{...n,propertyNames:f}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===Pt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===Pt.ZodBranded&&e.keyType._def.type._def.typeName===Pt.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=a5(e.keyType._def,t);return{...n,propertyNames:f}}}return n}function woe(e,t){if(t.mapStrategy==="record")return s5(e,t);const n=nr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function _oe(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function xoe(){return{not:{}}}function Soe(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const dv={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Eoe(e,t){if(t.target==="openApi3")return e6(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in dv&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=dv[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return e6(e,t)}const e6=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>nr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Coe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:dv[e.innerType._def.typeName],nullable:!0}:{type:[dv[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=nr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=nr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function koe(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",W8(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?dr(n,"minimum",r.value,r.message,t):dr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),dr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?dr(n,"maximum",r.value,r.message,t):dr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),dr(n,"maximum",r.value,r.message,t));break;case"multipleOf":dr(n,"multipleOf",r.value,r.message,t);break}return n}function Aoe(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let u=i[s];if(u===void 0||u._def===void 0)continue;let c=Roe(u);c&&n&&(u instanceof Vo&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),c=!1);const f=nr(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});f!==void 0&&(r.properties[s]=f,c||a.push(s))}a.length&&(r.required=a);const o=Toe(e,t);return o!==void 0&&(r.additionalProperties=o),r}function Toe(e,t){if(e.catchall._def.typeName!=="ZodNever")return nr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Roe(e){try{return e.isOptional()}catch{return!0}}const Noe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return nr(e.innerType._def,t);const n=nr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Ioe=(e,t)=>{if(t.pipeStrategy==="input")return nr(e.in._def,t);if(t.pipeStrategy==="output")return nr(e.out._def,t);const n=nr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=nr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Ooe(e,t){return nr(e.type._def,t)}function Doe(e,t){const r={type:"array",uniqueItems:!0,items:nr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&dr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&dr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function joe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>nr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:nr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>nr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function Moe(){return{not:{}}}function Poe(){return{}}const Foe=(e,t)=>nr(e.innerType._def,t),Loe=(e,t,n)=>{switch(t){case Pt.ZodString:return o5(e,n);case Pt.ZodNumber:return koe(e,n);case Pt.ZodObject:return Aoe(e,n);case Pt.ZodBigInt:return loe(e,n);case Pt.ZodBoolean:return uoe();case Pt.ZodDate:return i5(e,n);case Pt.ZodUndefined:return Moe();case Pt.ZodNull:return Soe(n);case Pt.ZodArray:return soe(e,n);case Pt.ZodUnion:case Pt.ZodDiscriminatedUnion:return Eoe(e,n);case Pt.ZodIntersection:return goe(e,n);case Pt.ZodTuple:return joe(e,n);case Pt.ZodRecord:return s5(e,n);case Pt.ZodLiteral:return yoe(e,n);case Pt.ZodEnum:return poe(e);case Pt.ZodNativeEnum:return _oe(e);case Pt.ZodNullable:return Coe(e,n);case Pt.ZodOptional:return Noe(e,n);case Pt.ZodMap:return woe(e,n);case Pt.ZodSet:return Doe(e,n);case Pt.ZodLazy:return()=>e.getter()._def;case Pt.ZodPromise:return Ooe(e,n);case Pt.ZodNaN:case Pt.ZodNever:return xoe();case Pt.ZodEffects:return hoe(e,n);case Pt.ZodAny:return ooe();case Pt.ZodUnknown:return Poe();case Pt.ZodDefault:return foe(e,n);case Pt.ZodBranded:return a5(e,n);case Pt.ZodReadonly:return Foe(e,n);case Pt.ZodCatch:return coe(e,n);case Pt.ZodPipeline:return Ioe(e,n);case Pt.ZodFunction:case Pt.ZodVoid:case Pt.ZodSymbol:return;default:return(r=>{})()}};function nr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(u!==Zae)return u}if(r&&!n){const u=$oe(r,t);if(u!==void 0)return u}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Loe(e,e.typeName,t),o=typeof i=="function"?nr(i(),t):i;if(o&&zoe(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return a.jsonSchema=o,u}return a.jsonSchema=o,o}const $oe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Boe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Boe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},zoe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Uoe=(e,t)=>{const n=Xae(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,f])=>({...u,[c]:nr(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=nr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var n0={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},r0={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},a0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},i0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},o0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},qoe=[n0,r0,a0,i0,o0];n0.code+"",r0.code+"",a0.code+"",i0.code+"",o0.code+"";n0.name+"",n0.code,r0.name+"",r0.code,a0.name+"",a0.code,i0.name+"",i0.code,o0.name+"",o0.code;qoe.map(e=>e.code);function Hoe(e){const t=["ROOT"];let n=-1,r=null;function a(u,c,f){switch(u){case'"':{n=c,t.pop(),t.push(f),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START");break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function o(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":a(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=u,t.pop();break}default:{n=u,a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}default:{n=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,u+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u)):n=u;break}}}let s=e.slice(0,n+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?s+="true".slice(f.length):"false".startsWith(f)?s+="false".slice(f.length):"null".startsWith(f)&&(s+="null".slice(f.length))}}return s}function Voe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=ud({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=ud({text:Hoe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Goe={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Woe={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Koe={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Zoe={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Yoe={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Xoe={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Joe={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Qoe={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},ese={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},tse={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},nse={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},rse={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},ase={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},ise={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},ose={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},sse={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},Pw=[Goe,Woe,Koe,Zoe,Yoe,Xoe,Joe,Qoe,ese,tse,nse,rse,ase,ise,ose,sse];Object.fromEntries(Pw.map(e=>[e.code,e]));Object.fromEntries(Pw.map(e=>[e.name,e.code]));Pw.map(e=>e.code);function Ga(e,t){const n=Pw.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function lse(e,t){var n;const r=(n=void 0)!=null?n:!1;return use(Uoe(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var gE=Symbol.for("vercel.ai.schema");function use(e,{validate:t}={}){return{[gE]:!0,_type:void 0,[rv]:!0,jsonSchema:e,validate:t}}function cse(e){return typeof e=="object"&&e!==null&&gE in e&&e[gE]===!0&&"jsonSchema"in e&&"validate"in e}function Fw(e){return cse(e)?e:lse(e)}const t6=globalThis||void 0||self;var dse=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof t6=="object"?t6:{},ad="1.9.0",n6=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function fse(e){var t=new Set([e]),n=new Set,r=e.match(n6);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(u){return u===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(n6);if(!c)return i(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||a.major!==f.major?i(u):a.major===0?a.minor===f.minor&&a.patch<=f.patch?o(u):i(u):a.minor<=f.minor?o(u):i(u)}}var hse=fse(ad),pse=ad.split(".")[0],s0=Symbol.for("opentelemetry.js.api."+pse),l0=dse;function $k(e,t,n,r){var a;r===void 0&&(r=!1);var i=l0[s0]=(a=l0[s0])!==null&&a!==void 0?a:{version:ad};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==ad){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+ad);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+ad+"."),!0}function u0(e){var t,n,r=(t=l0[s0])===null||t===void 0?void 0:t.version;if(!(!r||!hse(r)))return(n=l0[s0])===null||n===void 0?void 0:n[e]}function Bk(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+ad+".");var n=l0[s0];n&&delete n[e]}var mse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},gse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},yse=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return am("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return am("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return am("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return am("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return am("verbose",this._namespace,t)},e}();function am(e,t,n){var r=u0("diag");if(r)return n.unshift(t),r[e].apply(r,gse([],mse(n),!1))}var Ui;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ui||(Ui={}));function bse(e,t){e<Ui.NONE?e=Ui.NONE:e>Ui.ALL&&(e=Ui.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",Ui.ERROR),warn:n("warn",Ui.WARN),info:n("info",Ui.INFO),debug:n("debug",Ui.DEBUG),verbose:n("verbose",Ui.VERBOSE)}}var vse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},wse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},_se="diag",fv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=u0("diag");if(s)return s[a].apply(s,wse([],vse(i),!1))}}var n=this,r=function(a,i){var o,s,u;if(i===void 0&&(i={logLevel:Ui.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var f=u0("diag"),h=bse((s=i.logLevel)!==null&&s!==void 0?s:Ui.INFO,a);if(f&&!i.suppressOverrideMessage){var p=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+p),h.warn("Current logger will overwrite one already registered from "+p)}return $k("diag",h,n,!0)};n.setLogger=r,n.disable=function(){Bk(_se,n)},n.createComponentLogger=function(a){return new yse(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function xse(e){return Symbol.for(e)}var Sse=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Ese=new Sse,Cse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},kse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Ase=function(){function e(){}return e.prototype.active=function(){return Ese},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,kse([r],Cse(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),Tse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Rse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},XS="context",Nse=new Ase,l5=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return $k(XS,t,fv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,Rse([t,n,r],Tse(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return u0(XS)||Nse},e.prototype.disable=function(){this._getContextManager().disable(),Bk(XS,fv.instance())},e}(),yE;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(yE||(yE={}));var u5="0000000000000000",c5="00000000000000000000000000000000",Ise={traceId:c5,spanId:u5,traceFlags:yE.NONE},mm=function(){function e(t){t===void 0&&(t=Ise),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),zk=xse("OpenTelemetry Context Key SPAN");function Uk(e){return e.getValue(zk)||void 0}function Ose(){return Uk(l5.getInstance().active())}function qk(e,t){return e.setValue(zk,t)}function Dse(e){return e.deleteValue(zk)}function jse(e,t){return qk(e,new mm(t))}function d5(e){var t;return(t=Uk(e))===null||t===void 0?void 0:t.spanContext()}var Mse=/^([0-9a-f]{32})$/i,Pse=/^[0-9a-f]{16}$/i;function Fse(e){return Mse.test(e)&&e!==c5}function Lse(e){return Pse.test(e)&&e!==u5}function f5(e){return Fse(e.traceId)&&Lse(e.spanId)}function $se(e){return new mm(e)}var JS=l5.getInstance(),h5=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=JS.active());var a=!!(n!=null&&n.root);if(a)return new mm;var i=r&&d5(r);return Bse(i)&&f5(i)?new mm(i):new mm},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var u=o??JS.active(),c=this.startSpan(t,i,u),f=qk(u,c);return JS.with(f,s,void 0,c)}},e}();function Bse(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var zse=new h5,Use=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):zse},e}(),qse=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new h5},e}(),Hse=new qse,r6=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Use(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Hse},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),hv;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(hv||(hv={}));var QS="trace",Vse=function(){function e(){this._proxyTracerProvider=new r6,this.wrapSpanContext=$se,this.isSpanContextValid=f5,this.deleteSpan=Dse,this.getSpan=Uk,this.getActiveSpan=Ose,this.getSpanContext=d5,this.setSpan=qk,this.setSpanContext=jse}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=$k(QS,this._proxyTracerProvider,fv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return u0(QS)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Bk(QS,fv.instance()),this._proxyTracerProvider=new r6},e}(),Gse=Vse.getInstance(),Wse=Object.defineProperty,Hk=(e,t)=>{for(var n in t)Wse(e,n,{get:t[n],enumerable:!0})};function pv(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function a6(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function i6({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:u}=await i.read();if(s)break;e.write(u)}}catch(s){throw s}finally{e.end()}})()}var p5="AI_InvalidArgumentError",m5=`vercel.ai.error.${p5}`,Kse=Symbol.for(m5),g5,Fo=class extends xn{constructor({parameter:t,value:n,message:r}){super({name:p5,message:`Invalid argument for parameter ${t}: ${r}`}),this[g5]=!0,this.parameter=t,this.value=n}static isInstance(t){return xn.hasMarker(t,m5)}};g5=Kse;var y5="AI_RetryError",b5=`vercel.ai.error.${y5}`,Zse=Symbol.for(b5),v5,o6=class extends xn{constructor({message:e,reason:t,errors:n}){super({name:y5,message:e}),this[v5]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return xn.hasMarker(e,b5)}};v5=Zse;var Yse=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>w5(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function w5(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(gb(i)||t===0)throw i;const o=Mae(i),s=[...a,i],u=s.length;if(u>t)throw new o6({message:`Failed after ${u} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&ha.isInstance(i)&&i.isRetryable===!0&&u<=t)return await Oae(n),w5(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw u===1?i:new o6({message:`Failed after ${u} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function Xse({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Fo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Fo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:Yse({maxRetries:t})}}function bE({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Jse({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var Qse={startSpan(){return eb},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(eb);if(typeof n=="function")return n(eb);if(typeof r=="function")return r(eb)}},eb={spanContext(){return ele},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},ele={traceId:"",spanId:"",traceFlags:0};function tle({isEnabled:e=!1,tracer:t}={}){return e?t||Gse.getTracer("ai"):Qse}function vE({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:hv.ERROR,message:o.message})):i.setStatus({code:hv.ERROR})}finally{i.end()}throw o}})}function Lf({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var nle=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=ch(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=V8(this.base64Data)),this.uint8ArrayData}},rle=class extends nle{constructor(e){super(e),this.type="file"}},ale=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function ile(e){for(const t of ale)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var _5="AI_NoObjectGeneratedError",x5=`vercel.ai.error.${_5}`,ole=Symbol.for(x5),S5,s6=class extends xn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:_5,message:e,cause:t}),this[S5]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return xn.hasMarker(e,x5)}};S5=ole;var E5="AI_DownloadError",C5=`vercel.ai.error.${E5}`,sle=Symbol.for(C5),k5,e2=class extends xn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:E5,message:a,cause:r}),this[k5]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return xn.hasMarker(e,C5)}};k5=sle;async function lle({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new e2({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw e2.isInstance(a)?a:new e2({url:r,cause:a})}}var A5="AI_InvalidDataContentError",T5=`vercel.ai.error.${A5}`,ule=Symbol.for(T5),R5,l6=class extends xn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:A5,message:n,cause:t}),this[R5]=!0,this.content=e}static isInstance(e){return xn.hasMarker(e,T5)}};R5=ule;var N5=L.union([L.string(),L.instanceof(Uint8Array),L.instanceof(ArrayBuffer),L.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function I5(e){return typeof e=="string"?e:e instanceof ArrayBuffer?ch(new Uint8Array(e)):ch(e)}function mv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return V8(e)}catch(t){throw new l6({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new l6({content:e})}function cle(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var O5="AI_InvalidMessageRoleError",D5=`vercel.ai.error.${O5}`,dle=Symbol.for(D5),j5,fle=class extends xn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:O5,message:t}),this[j5]=!0,this.role=e}static isInstance(e){return xn.hasMarker(e,D5)}};j5=dle;function hle(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function ple({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=lle}){const a=await gle(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>mle(i,a))]}function mle(e,t){var n,r,a,i,o,s;const u=e.role;switch(u){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>yle(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var f;const h=(f=c.providerOptions)!=null?f:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:I5(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var f;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(f=c.providerOptions)!=null?f:c.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const c=u;throw new fle({role:c})}}}async function gle(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function yle(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,u,c;const f=e.type;switch(f){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${f}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){const{mimeType:h,base64Content:p}=hle(u.toString());if(h==null||p==null)throw new Error(`Invalid data URL format in part ${f}`);o=h,c=mv(p)}else{const h=t[u.toString()];h?(c=h.data,o??(o=h.mimeType)):c=u}else c=mv(u);switch(f){case"image":return c instanceof Uint8Array&&(o=(r=ile(c))!=null?r:o),{type:"image",image:c,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?I5(c):c,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function ble({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new Fo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Fo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Fo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Fo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Fo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Fo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Fo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new Fo({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function u6(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,u,c;try{[s,u]=i.url.split(","),c=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||u==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:mv(u)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:cle(mv(u))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:u,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var M5="AI_MessageConversionError",P5=`vercel.ai.error.${M5}`,vle=Symbol.for(P5),F5,t2=class extends xn{constructor({originalMessage:e,message:t}){super({name:M5,message:t}),this[F5]=!0,this.originalMessage=e}static isInstance(e){return xn.hasMarker(e,P5)}};F5=vle;function wle(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],u=o===e.length-1,{role:c,content:f,experimental_attachments:h}=s;switch(c){case"system":{i.push({role:"system",content:f});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:f},...u6(h)]:f});else{const p=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...p,...u6(h)]:p})}break}case"assistant":{if(s.parts!=null){let v=function(){const x=[];for(const C of S)switch(C.type){case"file":case"text":{x.push(C);break}case"reasoning":{for(const A of C.details)switch(A.type){case"text":x.push({type:"reasoning",text:A.text,signature:A.signature});break;case"redacted":x.push({type:"redacted-reasoning",data:A.data});break}break}case"tool-invocation":x.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const A=C;throw new Error(`Unsupported part: ${A}`)}}i.push({role:"assistant",content:x});const E=S.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new t2({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:A,toolName:O,result:I}=C,D=a[O];return(D==null?void 0:D.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:A,toolName:O,result:D.experimental_toToolResultContent(I),experimental_content:D.experimental_toToolResultContent(I)}:{type:"tool-result",toolCallId:A,toolName:O,result:I}})}),S=[],_=!1,b++},b=0,_=!1,S=[];for(const x of s.parts)switch(x.type){case"text":{_&&v(),S.push(x);break}case"file":case"reasoning":{S.push(x);break}case"tool-invocation":{((r=x.toolInvocation.step)!=null?r:0)!==b&&v(),S.push(x),_=!0;break}}v();break}const p=s.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:f});break}const g=p.reduce((v,b)=>{var _;return Math.max(v,(_=b.step)!=null?_:0)},0);for(let v=0;v<=g;v++){const b=p.filter(_=>{var S;return((S=_.step)!=null?S:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...u&&f&&v===0?[{type:"text",text:f}]:[],...b.map(({toolCallId:_,toolName:S,args:x})=>({type:"tool-call",toolCallId:_,toolName:S,args:x}))]}),i.push({role:"tool",content:b.map(_=>{if(!("result"in _))throw new t2({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:S,toolName:x,result:E}=_,C=a[x];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:S,toolName:x,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:S,toolName:x,result:E}})}))}f&&!u&&i.push({role:"assistant",content:f});break}case"data":break;default:{const p=c;throw new t2({originalMessage:s,message:`Unsupported role: ${p}`})}}}return i}function _le(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(xle);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function xle(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var wE=L.lazy(()=>L.union([L.null(),L.string(),L.number(),L.boolean(),L.record(L.string(),wE),L.array(wE)])),Kr=L.record(L.string(),L.record(L.string(),wE)),Sle=L.array(L.union([L.object({type:L.literal("text"),text:L.string()}),L.object({type:L.literal("image"),data:L.string(),mimeType:L.string().optional()})])),L5=L.object({type:L.literal("text"),text:L.string(),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Ele=L.object({type:L.literal("image"),image:L.union([N5,L.instanceof(URL)]),mimeType:L.string().optional(),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),$5=L.object({type:L.literal("file"),data:L.union([N5,L.instanceof(URL)]),filename:L.string().optional(),mimeType:L.string(),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Cle=L.object({type:L.literal("reasoning"),text:L.string(),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),kle=L.object({type:L.literal("redacted-reasoning"),data:L.string(),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Ale=L.object({type:L.literal("tool-call"),toolCallId:L.string(),toolName:L.string(),args:L.unknown(),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Tle=L.object({type:L.literal("tool-result"),toolCallId:L.string(),toolName:L.string(),result:L.unknown(),content:Sle.optional(),isError:L.boolean().optional(),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Rle=L.object({role:L.literal("system"),content:L.string(),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Nle=L.object({role:L.literal("user"),content:L.union([L.string(),L.array(L.union([L5,Ele,$5]))]),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Ile=L.object({role:L.literal("assistant"),content:L.union([L.string(),L.array(L.union([L5,$5,Cle,kle,Ale]))]),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Ole=L.object({role:L.literal("tool"),content:L.array(Tle),providerOptions:Kr.optional(),experimental_providerMetadata:Kr.optional()}),Dle=L.union([Rle,Nle,Ile,Ole]);function jle({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new _l({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new _l({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new _l({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new _l({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=_le(e.messages);if(n==="other")throw new _l({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?wle(e.messages,{tools:t}):e.messages;if(r.length===0)throw new _l({prompt:e,message:"messages must not be empty"});const a=Lh({value:r,schema:L.array(Dle)});if(!a.success)throw new _l({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function Mle({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Ple(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Fle="JSON schema:",Lle="You MUST answer with a JSON object that matches the JSON schema above.",$le="You MUST answer with JSON.";function Ble({prompt:e,schema:t,schemaPrefix:n=t!=null?Fle:void 0,schemaSuffix:r=t!=null?Lle:$le}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function n2(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Ad({prefix:"aiobj",size:24});var vi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function c6(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function zle(){let e=[],t=null,n=!1,r=c6();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=c6(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Ule(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Ad({prefix:"aiobj",size:24});var B5="AI_NoOutputSpecifiedError",z5=`vercel.ai.error.${B5}`,qle=Symbol.for(z5),U5,Hle=class extends xn{constructor({message:e="No output specified."}={}){super({name:B5,message:e}),this[U5]=!0}static isInstance(e){return xn.hasMarker(e,z5)}};U5=qle;var q5="AI_ToolExecutionError",H5=`vercel.ai.error.${q5}`,Vle=Symbol.for(H5),V5,Gle=class extends xn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${rg(r)}`}){super({name:q5,message:a,cause:r}),this[V5]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return xn.hasMarker(e,H5)}};V5=Vle;function Wle(e){return e!=null&&Object.keys(e).length>0}function Kle({tools:e,toolChoice:t,activeTools:n}){return Wle(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:Fw(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var Zle=/^([\s\S]*?)(\s+)(\S*)$/;function Yle(e){const t=e.match(Zle);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var G5="AI_InvalidToolArgumentsError",W5=`vercel.ai.error.${G5}`,Xle=Symbol.for(W5),K5,Z5=class extends xn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${rg(n)}`}){super({name:G5,message:r,cause:n}),this[K5]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return xn.hasMarker(e,W5)}};K5=Xle;var Y5="AI_NoSuchToolError",X5=`vercel.ai.error.${Y5}`,Jle=Symbol.for(X5),J5,_E=class extends xn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:Y5,message:n}),this[J5]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return xn.hasMarker(e,X5)}};J5=Jle;var Q5="AI_ToolCallRepairError",eP=`vercel.ai.error.${Q5}`,Qle=Symbol.for(eP),tP,eue=class extends xn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${rg(e)}`}){super({name:Q5,message:n,cause:e}),this[tP]=!0,this.originalError=t}static isInstance(e){return xn.hasMarker(e,eP)}};tP=Qle;async function tue({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new _E({toolName:e.toolName});try{return await d6({toolCall:e,tools:t})}catch(i){if(n==null||!(_E.isInstance(i)||Z5.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>Fw(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new eue({cause:s,originalError:i})}if(o==null)throw i;return await d6({toolCall:o,tools:t})}}async function d6({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new _E({toolName:e.toolName,availableTools:Object.keys(t)});const a=Fw(r.parameters),i=e.args.trim()===""?Lh({value:{},schema:a}):ud({text:e.args,schema:a});if(i.success===!1)throw new Z5({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function nue(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function f6({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const u=[];return u.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&u.push({role:"tool",id:s(),content:i.map(c=>{const f=r[c.toolName];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:f.experimental_toToolResultContent(c.result),experimental_content:f.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),u}Ad({prefix:"aitxt",size:24});Ad({prefix:"msg",size:24});var rue={};Hk(rue,{object:()=>sue,text:()=>oue});var nP="AI_InvalidStreamPartError",rP=`vercel.ai.error.${nP}`,aue=Symbol.for(rP),aP,iue=class extends xn{constructor({chunk:e,message:t}){super({name:nP,message:t}),this[aP]=!0,this.chunk=e}static isInstance(e){return xn.hasMarker(e,rP)}};aP=aue;var oue=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),sue=({schema:e})=>{const t=Fw(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Ble({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=Voe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=ud({text:n});if(!a.success)throw new s6({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=Lh({value:a.value,schema:t});if(!i.success)throw new s6({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function lue(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Vk(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function u(f){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}async function c(f){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}return new ReadableStream({async pull(f){try{if(o){await c(f);return}if(s){await u(f);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:p}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||f.enqueue(h.value),p===n?(a=void 0,h.done&&(await c(f),o=!0)):(i=void 0,h.done&&(s=!0,await u(f)))}catch(h){f.error(h)}},cancel(){n.cancel(),r.cancel()}})}function uue({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:u}){let c=null;const f=new ReadableStream({start(S){c=S}}),h={},p=new Set;let g=!1,v;function b(){g&&p.size===0&&(v!=null&&c.enqueue(v),c.close())}const _=new TransformStream({async transform(S,x){const E=S.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{x.enqueue(S);break}case"file":{x.enqueue(new rle({data:S.data,mimeType:S.mimeType}));break}case"tool-call-delta":{n&&(h[S.toolCallId]||(x.enqueue({type:"tool-call-streaming-start",toolCallId:S.toolCallId,toolName:S.toolName}),h[S.toolCallId]=!0),x.enqueue({type:"tool-call-delta",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.argsTextDelta}));break}case"tool-call":{try{const C=await tue({toolCall:S,tools:e,repairToolCall:u,system:i,messages:o});x.enqueue(C);const A=e[C.toolName];if(A.execute!=null){const O=Rs();p.add(O),vE({name:"ai.toolCall",attributes:Lf({telemetry:a,attributes:{...bE({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async I=>A.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(D=>{c.enqueue({...C,type:"tool-result",result:D}),p.delete(O),b();try{I.setAttributes(Lf({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(D)}}}))}catch{}},D=>{c.enqueue({type:"error",error:new Gle({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:D})}),p.delete(O),b()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:S.finishReason,logprobs:S.logprobs,usage:Mle(S.usage),experimental_providerMetadata:S.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(S){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(x){S.enqueue(x)},close(){}})),f.pipeTo(new WritableStream({write(x){S.enqueue(x)},close(){S.close()}}))])}})}var cue=Ad({prefix:"aitxt",size:24}),due=Ad({prefix:"msg",size:24});function fue({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:u,maxSteps:c=1,experimental_generateMessageId:f=due,experimental_output:h,experimental_continueSteps:p=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:_=!1,toolCallStreaming:S=_,experimental_activeTools:x,experimental_repairToolCall:E,experimental_transform:C,onChunk:A,onError:O,onFinish:I,onStepFinish:D,_internal:{now:z=Ule,generateId:W=cue,currentDate:ee=()=>new Date}={},...F}){return new pue({model:e,telemetry:g,headers:u,settings:F,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:S,transforms:lue(C),activeTools:x,repairToolCall:E,maxSteps:c,output:h,continueSteps:p,providerOptions:b,onChunk:A,onError:O,onFinish:I,onStepFinish:D,now:z,currentDate:ee,generateId:W,generateMessageId:f})}function hue(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const u=JSON.stringify(s.partial);u!==r&&(a({controller:o,partialOutput:s.partial}),r=u)}},flush(i){n.length>0&&a({controller:i})}})}var pue=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:u,tools:c,toolChoice:f,toolCallStreaming:h,transforms:p,activeTools:g,repairToolCall:v,maxSteps:b,output:_,continueSteps:S,providerOptions:x,now:E,currentDate:C,generateId:A,generateMessageId:O,onChunk:I,onError:D,onFinish:z,onStepFinish:W}){this.warningsPromise=new vi,this.usagePromise=new vi,this.finishReasonPromise=new vi,this.providerMetadataPromise=new vi,this.textPromise=new vi,this.reasoningPromise=new vi,this.reasoningDetailsPromise=new vi,this.sourcesPromise=new vi,this.filesPromise=new vi,this.toolCallsPromise=new vi,this.toolResultsPromise=new vi,this.requestPromise=new vi,this.responsePromise=new vi,this.stepsPromise=new vi;var ee;if(b<1)throw new Fo({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=_;let F="",Z="",V="",ae=[],ie=[],te,X=[];const ce=[],G={id:A(),timestamp:C(),modelId:e.modelId,messages:[]};let Q=[],Y=[],re,be,_e="initial";const Ie=[];let Pe;const Re=new TransformStream({async transform(de,oe){oe.enqueue(de);const{part:J}=de;if((J.type==="text-delta"||J.type==="reasoning"||J.type==="source"||J.type==="tool-call"||J.type==="tool-result"||J.type==="tool-call-streaming-start"||J.type==="tool-call-delta")&&await(I==null?void 0:I({chunk:J})),J.type==="error"&&await(D==null?void 0:D({error:J.error})),J.type==="text-delta"&&(F+=J.textDelta,Z+=J.textDelta,V+=J.textDelta),J.type==="reasoning"&&(te==null?(te={type:"text",text:J.textDelta},ae.push(te)):te.text+=J.textDelta),J.type==="reasoning-signature"){if(te==null)throw new xn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});te.signature=J.signature,te=void 0}if(J.type==="redacted-reasoning"&&ae.push({type:"redacted",data:J.data}),J.type==="file"&&ie.push(J),J.type==="source"&&(ce.push(J.source),X.push(J.source)),J.type==="tool-call"&&Q.push(J),J.type==="tool-result"&&Y.push(J),J.type==="step-finish"){const xe=f6({text:Z,files:ie,reasoning:ae,tools:c??{},toolCalls:Q,toolResults:Y,messageId:J.messageId,generateMessageId:O}),Le=Ie.length;let Se="done";Le+1<b&&(S&&J.finishReason==="length"&&Q.length===0?Se="continue":Q.length>0&&Y.length===Q.length&&(Se="tool-result"));const Ve={stepType:_e,text:F,reasoning:nue(ae),reasoningDetails:ae,files:ie,sources:X,toolCalls:Q,toolResults:Y,finishReason:J.finishReason,usage:J.usage,warnings:J.warnings,logprobs:J.logprobs,request:J.request,response:{...J.response,messages:[...G.messages,...xe]},providerMetadata:J.experimental_providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,isContinued:J.isContinued};await(W==null?void 0:W(Ve)),Ie.push(Ve),Q=[],Y=[],F="",X=[],ae=[],ie=[],te=void 0,Se!=="done"&&(_e=Se),Se!=="continue"&&(G.messages.push(...xe),Z="")}J.type==="finish"&&(G.id=J.response.id,G.timestamp=J.response.timestamp,G.modelId=J.response.modelId,G.headers=J.response.headers,be=J.usage,re=J.finishReason)},async flush(de){var oe;try{if(Ie.length===0)return;const J=Ie[Ie.length-1];Ne.warningsPromise.resolve(J.warnings),Ne.requestPromise.resolve(J.request),Ne.responsePromise.resolve(J.response),Ne.toolCallsPromise.resolve(J.toolCalls),Ne.toolResultsPromise.resolve(J.toolResults),Ne.providerMetadataPromise.resolve(J.experimental_providerMetadata),Ne.reasoningPromise.resolve(J.reasoning),Ne.reasoningDetailsPromise.resolve(J.reasoningDetails);const xe=re??"unknown",Le=be??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ne.finishReasonPromise.resolve(xe),Ne.usagePromise.resolve(Le),Ne.textPromise.resolve(V),Ne.sourcesPromise.resolve(ce),Ne.filesPromise.resolve(J.files),Ne.stepsPromise.resolve(Ie),await(z==null?void 0:z({finishReason:xe,logprobs:void 0,usage:Le,text:V,reasoning:J.reasoning,reasoningDetails:J.reasoningDetails,files:J.files,sources:J.sources,toolCalls:J.toolCalls,toolResults:J.toolResults,request:(oe=J.request)!=null?oe:{},response:J.response,warnings:J.warnings,providerMetadata:J.providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,steps:Ie})),Pe.setAttributes(Lf({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>V},"ai.response.toolCalls":{output:()=>{var Se;return(Se=J.toolCalls)!=null&&Se.length?JSON.stringify(J.toolCalls):void 0}},"ai.usage.promptTokens":Le.promptTokens,"ai.usage.completionTokens":Le.completionTokens}}))}catch(J){de.error(J)}finally{Pe.end()}}}),ke=zle();this.addStream=ke.addStream,this.closeStream=ke.close;let ze=ke.stream;for(const de of p)ze=ze.pipeThrough(de({tools:c,stopStream(){ke.terminate()}}));this.baseStream=ze.pipeThrough(hue(_)).pipeThrough(Re);const{maxRetries:it,retry:Oe}=Xse({maxRetries:a}),Te=tle(t),B=Jse({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:it}}),Ce=jle({prompt:{system:(ee=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?ee:o,prompt:s,messages:u},tools:c}),Ne=this;vE({name:"ai.streamText",attributes:Lf({telemetry:t,attributes:{...bE({operationId:"ai.streamText",telemetry:t}),...B,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:u})},"ai.settings.maxSteps":b}}),tracer:Te,endWhenDone:!1,fn:async de=>{Pe=de;async function oe({currentStep:J,responseMessages:xe,usage:Le,stepType:Se,previousStepText:Ve,hasLeadingWhitespace:xt,messageId:ht}){var Et;const Lt=xe.length===0?Ce.type:"messages",Tt=[...Ce.messages,...xe],Ut=await ple({prompt:{type:Lt,system:Ce.system,messages:Tt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Et=e.supportsUrl)==null?void 0:Et.bind(e)}),ge={type:"regular",...Kle({tools:c,toolChoice:f,activeTools:g})},{result:{stream:N,warnings:q,rawResponse:he,request:De},doStreamSpan:ve,startTimestampMs:Ae}=await Oe(()=>vE({name:"ai.streamText.doStream",attributes:Lf({telemetry:t,attributes:{...bE({operationId:"ai.streamText.doStream",telemetry:t}),...B,"ai.prompt.format":{input:()=>Lt},"ai.prompt.messages":{input:()=>JSON.stringify(Ut)},"ai.prompt.tools":{input:()=>{var Bt;return(Bt=ge.tools)==null?void 0:Bt.map(Vt=>JSON.stringify(Vt))}},"ai.prompt.toolChoice":{input:()=>ge.toolChoice!=null?JSON.stringify(ge.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Te,endWhenDone:!1,fn:async Bt=>({startTimestampMs:E(),doStreamSpan:Bt,result:await e.doStream({mode:ge,...ble(r),inputFormat:Lt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:Ut,providerMetadata:x,abortSignal:i,headers:n})})})),le=uue({tools:c,generatorStream:N,toolCallStreaming:h,tracer:Te,telemetry:t,system:o,messages:Tt,repairToolCall:v,abortSignal:i}),ct=De??{},yt=[],M=[],Be=[],et=[];let me,je="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Ct,ye=!0,U="",$=Se==="continue"?Ve:"",H,pe={id:A(),timestamp:C(),modelId:e.modelId},fe="",Fe=!1,ot=!0,jt=!1;async function un({controller:Bt,chunk:Vt}){Bt.enqueue(Vt),U+=Vt.textDelta,$+=Vt.textDelta,Fe=!0,jt=Vt.textDelta.trimEnd()!==Vt.textDelta}Ne.addStream(le.pipeThrough(new TransformStream({async transform(Bt,Vt){var Xt,In,zn;if(ye){const pr=E()-Ae;ye=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":pr}),ve.setAttributes({"ai.response.msToFirstChunk":pr}),Vt.enqueue({type:"step-start",messageId:ht,request:ct,warnings:q??[]})}if(Bt.type==="text-delta"&&Bt.textDelta.length===0)return;const hr=Bt.type;switch(hr){case"text-delta":{if(S){const pr=ot&&xt?Bt.textDelta.trimStart():Bt.textDelta;if(pr.length===0)break;ot=!1,fe+=pr;const jn=Yle(fe);jn!=null&&(fe=jn.suffix,await un({controller:Vt,chunk:{type:"text-delta",textDelta:jn.prefix+jn.whitespace}}))}else await un({controller:Vt,chunk:Bt});break}case"reasoning":{Vt.enqueue(Bt),me==null?(me={type:"text",text:Bt.textDelta},Be.push(me)):me.text+=Bt.textDelta;break}case"reasoning-signature":{if(Vt.enqueue(Bt),me==null)throw new iue({chunk:Bt,message:"reasoning-signature without reasoning"});me.signature=Bt.signature,me=void 0;break}case"redacted-reasoning":{Vt.enqueue(Bt),Be.push({type:"redacted",data:Bt.data});break}case"tool-call":{Vt.enqueue(Bt),yt.push(Bt);break}case"tool-result":{Vt.enqueue(Bt),M.push(Bt);break}case"response-metadata":{pe={id:(Xt=Bt.id)!=null?Xt:pe.id,timestamp:(In=Bt.timestamp)!=null?In:pe.timestamp,modelId:(zn=Bt.modelId)!=null?zn:pe.modelId};break}case"finish":{Ke=Bt.usage,je=Bt.finishReason,Ct=Bt.experimental_providerMetadata,H=Bt.logprobs;const pr=E()-Ae;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":pr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/pr});break}case"file":{et.push(Bt),Vt.enqueue(Bt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Vt.enqueue(Bt);break}case"error":{Vt.enqueue(Bt),je="error";break}default:{const pr=hr;throw new Error(`Unknown chunk type: ${pr}`)}}},async flush(Bt){const Vt=yt.length>0?JSON.stringify(yt):void 0;let Xt="done";J+1<b&&(S&&je==="length"&&yt.length===0?Xt="continue":yt.length>0&&M.length===yt.length&&(Xt="tool-result")),S&&fe.length>0&&(Xt!=="continue"||Se==="continue"&&!Fe)&&(await un({controller:Bt,chunk:{type:"text-delta",textDelta:fe}}),fe="");try{ve.setAttributes(Lf({telemetry:t,attributes:{"ai.response.finishReason":je,"ai.response.text":{output:()=>U},"ai.response.toolCalls":{output:()=>Vt},"ai.response.id":pe.id,"ai.response.model":pe.modelId,"ai.response.timestamp":pe.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[je],"gen_ai.response.id":pe.id,"gen_ai.response.model":pe.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{ve.end()}Bt.enqueue({type:"step-finish",finishReason:je,usage:Ke,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:H,request:ct,response:{...pe,headers:he==null?void 0:he.headers},warnings:q,isContinued:Xt==="continue",messageId:ht});const In=Ple(Le,Ke);if(Xt==="done")Bt.enqueue({type:"finish",finishReason:je,usage:In,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:H,response:{...pe,headers:he==null?void 0:he.headers}}),Ne.closeStream();else{if(Se==="continue"){const zn=xe[xe.length-1];typeof zn.content=="string"?zn.content+=U:zn.content.push({text:U,type:"text"})}else xe.push(...f6({text:U,files:et,reasoning:Be,tools:c??{},toolCalls:yt,toolResults:M,messageId:ht,generateMessageId:O}));await oe({currentStep:J+1,responseMessages:xe,usage:In,stepType:Xt,previousStepText:$,hasLeadingWhitespace:jt,messageId:Xt==="continue"?ht:O()})}}})))}await oe({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:O()})}}).catch(de=>{Ne.addStream(new ReadableStream({start(oe){oe.enqueue({type:"error",error:de}),oe.close()}})),Ne.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return n2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return n2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new Hle;return n2(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Ga("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Ga("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Ga("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Ga("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Ga("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Ga("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Ga("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Ga("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Ga("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Ga("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Ga("error",e(i.error)));break}case"step-start":{o.enqueue(Ga("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Ga("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Ga("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const u=s;throw new Error(`Unknown chunk type: ${u}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c}={}){i6({response:e,status:t,statusText:n,headers:a6(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){i6({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:a6(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?Vk(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}),{status:t,statusText:n,headers:pv(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:pv(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};var mue=L.object({name:L.string(),version:L.string()}).passthrough(),Gk=L.object({_meta:L.optional(L.object({}).passthrough())}).passthrough(),c0=Gk,gue=L.object({method:L.string(),params:L.optional(Gk)}),yue=L.object({experimental:L.optional(L.object({}).passthrough()),logging:L.optional(L.object({}).passthrough()),prompts:L.optional(L.object({listChanged:L.optional(L.boolean())}).passthrough()),resources:L.optional(L.object({subscribe:L.optional(L.boolean()),listChanged:L.optional(L.boolean())}).passthrough()),tools:L.optional(L.object({listChanged:L.optional(L.boolean())}).passthrough())}).passthrough();c0.extend({protocolVersion:L.string(),capabilities:yue,serverInfo:mue,instructions:L.optional(L.string())});var bue=c0.extend({nextCursor:L.optional(L.string())}),vue=L.object({name:L.string(),description:L.optional(L.string()),inputSchema:L.object({type:L.literal("object"),properties:L.optional(L.object({}).passthrough())}).passthrough()}).passthrough();bue.extend({tools:L.array(vue)});var wue=L.object({type:L.literal("text"),text:L.string()}).passthrough(),_ue=L.object({type:L.literal("image"),data:L.string().base64(),mimeType:L.string()}).passthrough(),iP=L.object({uri:L.string(),mimeType:L.optional(L.string())}).passthrough(),xue=iP.extend({text:L.string()}),Sue=iP.extend({blob:L.string().base64()}),Eue=L.object({type:L.literal("resource"),resource:L.union([xue,Sue])}).passthrough();c0.extend({content:L.array(L.union([wue,_ue,Eue])),isError:L.boolean().default(!1).optional()}).or(c0.extend({toolResult:L.unknown()}));var Lw="2.0",Cue=L.object({jsonrpc:L.literal(Lw),id:L.union([L.string(),L.number().int()])}).merge(gue).strict(),kue=L.object({jsonrpc:L.literal(Lw),id:L.union([L.string(),L.number().int()]),result:c0}).strict(),Aue=L.object({jsonrpc:L.literal(Lw),id:L.union([L.string(),L.number().int()]),error:L.object({code:L.number().int(),message:L.string(),data:L.optional(L.unknown())})}).strict(),Tue=L.object({jsonrpc:L.literal(Lw)}).merge(L.object({method:L.string(),params:L.optional(Gk)})).strict();L.union([Cue,Tue,kue,Aue]);var Rue={};Hk(Rue,{mergeIntoDataStream:()=>Oue,toDataStream:()=>Nue,toDataStreamResponse:()=>Iue});function oP(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function Wk(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&h6((a=n.data)==null?void 0:a.chunk,r);return}h6(n,r)}})).pipeThrough(oP(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Ga("text",n))}}))}function Nue(e,t){return Wk(e,t).pipeThrough(new TextEncoderStream)}function Iue(e,t){var n;const r=Wk(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?Vk(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:pv(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Oue(e,t){t.dataStream.merge(Wk(e,t.callbacks))}function h6(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Due={};Hk(Due,{mergeIntoDataStream:()=>Pue,toDataStream:()=>jue,toDataStreamResponse:()=>Mue});function Kk(e,t){const n=Fue();return Iae(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(oP(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Ga("text",r))}}))}function jue(e,t){return Kk(e,t).pipeThrough(new TextEncoderStream)}function Mue(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=Kk(e,i).pipeThrough(new TextEncoderStream),s=a?Vk(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:pv(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Pue(e,t){t.dataStream.merge(Kk(e,t.callbacks))}function Fue(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}function Lue({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,u)=>{var c,f,h,p;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(c=s.mimeType)!=null?c:"image/jpeg"};base64,${ch(s.image)}`,detail:(h=(f=s.providerMetadata)==null?void 0:f.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new _r({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(p=s.filename)!=null?p:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new _r({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const u=[];for(const c of o)switch(c.type){case"text":{s+=c.text;break}case"tool-call":{u.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(u.length>1)throw new _r({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:u.length>0?u[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:u.length>0?u:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function p6(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function gv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Zk=L.object({error:L.object({message:L.string(),type:L.string().nullish(),param:L.any().nullish(),code:L.union([L.string(),L.number()]).nullish()})}),lc=H8({errorSchema:Zk,errorToMessage:e=>e.error.message});function yv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function $ue({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new _r({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):s.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const u=o.type;switch(u){case"auto":case"none":case"required":return{tools:s,tool_choice:u,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=u;throw new _r({functionality:`Unsupported tool choice type: ${c}`})}}}var Bue=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:xE(this.modelId)}get defaultObjectGenerationMode(){return que(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var p,g,v,b,_,S,x,E;const C=e.type,A=[];i!=null&&A.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&A.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const O=this.settings.useLegacyFunctionCalling;if(O&&this.settings.parallelToolCalls===!0)throw new _r({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(O&&this.supportsStructuredOutputs)throw new _r({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:I,warnings:D}=Lue({prompt:t,useLegacyFunctionCalling:O,systemMessageMode:Hue(this.modelId)});A.push(...D);const z={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(p=c.name)!=null?p:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:f,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(x=(S=h==null?void 0:h.openai)==null?void 0:S.reasoningEffort)!=null?x:this.settings.reasoningEffort,messages:I};switch(xE(this.modelId)&&(z.temperature!=null&&(z.temperature=void 0,A.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),z.top_p!=null&&(z.top_p=void 0,A.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),z.frequency_penalty!=null&&(z.frequency_penalty=void 0,A.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),z.presence_penalty!=null&&(z.presence_penalty=void 0,A.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),z.logit_bias!=null&&(z.logit_bias=void 0,A.push({type:"other",message:"logitBias is not supported for reasoning models"})),z.logprobs!=null&&(z.logprobs=void 0,A.push({type:"other",message:"logprobs is not supported for reasoning models"})),z.top_logprobs!=null&&(z.top_logprobs=void 0,A.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),z.max_tokens!=null&&(z.max_completion_tokens==null&&(z.max_completion_tokens=z.max_tokens),z.max_tokens=void 0)),C){case"regular":{const{tools:W,tool_choice:ee,functions:F,function_call:Z,toolWarnings:V}=$ue({mode:e,useLegacyFunctionCalling:O,structuredOutputs:this.supportsStructuredOutputs});return{args:{...z,tools:W,tool_choice:ee,functions:F,function_call:Z},warnings:[...A,...V]}}case"object-json":return{args:{...z,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:A};case"object-tool":return{args:O?{...z,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...z,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:A};default:{const W=C;throw new Error(`Unsupported type: ${W}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u;const{args:c,warnings:f}=this.getArgs(e),{responseHeaders:h,value:p,rawValue:g}=await Xo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ls(this.config.headers(),e.headers),body:c,failedResponseHandler:lc,successfulResponseHandler:Td(zue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=c,_=p.choices[0],S=(t=p.usage)==null?void 0:t.completion_tokens_details,x=(n=p.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(S==null?void 0:S.reasoning_tokens)!=null&&(E.openai.reasoningTokens=S==null?void 0:S.reasoning_tokens),(S==null?void 0:S.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=S==null?void 0:S.accepted_prediction_tokens),(S==null?void 0:S.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=S==null?void 0:S.rejected_prediction_tokens),(x==null?void 0:x.cached_tokens)!=null&&(E.openai.cachedPromptTokens=x==null?void 0:x.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:Rs(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:Rs(),toolName:C.function.name,args:C.function.arguments}}),finishReason:gv(_.finish_reason),usage:{promptTokens:(o=(i=p.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(u=(s=p.usage)==null?void 0:s.completion_tokens)!=null?u:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:yv(p),warnings:f,logprobs:p6(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(S){if(S.enqueue({type:"response-metadata",...b.response}),b.text&&S.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const x of b.toolCalls)S.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.args}),S.enqueue({type:"tool-call",...x});S.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),S.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Xo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ls(this.config.headers(),e.headers),body:r,failedResponseHandler:lc,successfulResponseHandler:Fk(Uue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,u=[];let c="unknown",f={promptTokens:void 0,completionTokens:void 0},h,p=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,_){var S,x,E,C,A,O,I,D,z,W,ee,F;if(!b.success){c="error",_.enqueue({type:"error",error:b.error});return}const Z=b.value;if("error"in Z){c="error",_.enqueue({type:"error",error:Z.error});return}if(p&&(p=!1,_.enqueue({type:"response-metadata",...yv(Z)})),Z.usage!=null){const{prompt_tokens:X,completion_tokens:ce,prompt_tokens_details:G,completion_tokens_details:Q}=Z.usage;f={promptTokens:X??void 0,completionTokens:ce??void 0},(Q==null?void 0:Q.reasoning_tokens)!=null&&(v.openai.reasoningTokens=Q==null?void 0:Q.reasoning_tokens),(Q==null?void 0:Q.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=Q==null?void 0:Q.accepted_prediction_tokens),(Q==null?void 0:Q.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=Q==null?void 0:Q.rejected_prediction_tokens),(G==null?void 0:G.cached_tokens)!=null&&(v.openai.cachedPromptTokens=G==null?void 0:G.cached_tokens)}const V=Z.choices[0];if((V==null?void 0:V.finish_reason)!=null&&(c=gv(V.finish_reason)),(V==null?void 0:V.delta)==null)return;const ae=V.delta;ae.content!=null&&_.enqueue({type:"text-delta",textDelta:ae.content});const ie=p6(V==null?void 0:V.logprobs);ie!=null&&ie.length&&(h===void 0&&(h=[]),h.push(...ie));const te=g&&ae.function_call!=null?[{type:"function",id:Rs(),function:ae.function_call,index:0}]:ae.tool_calls;if(te!=null)for(const X of te){const ce=X.index;if(u[ce]==null){if(X.type!=="function")throw new qf({data:X,message:"Expected 'function' type."});if(X.id==null)throw new qf({data:X,message:"Expected 'id' to be a string."});if(((S=X.function)==null?void 0:S.name)==null)throw new qf({data:X,message:"Expected 'function.name' to be a string."});u[ce]={id:X.id,type:"function",function:{name:X.function.name,arguments:(x=X.function.arguments)!=null?x:""},hasFinished:!1};const Q=u[ce];((E=Q.function)==null?void 0:E.name)!=null&&((C=Q.function)==null?void 0:C.arguments)!=null&&(Q.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Q.id,toolName:Q.function.name,argsTextDelta:Q.function.arguments}),K4(Q.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(A=Q.id)!=null?A:Rs(),toolName:Q.function.name,args:Q.function.arguments}),Q.hasFinished=!0));continue}const G=u[ce];G.hasFinished||(((O=X.function)==null?void 0:O.arguments)!=null&&(G.function.arguments+=(D=(I=X.function)==null?void 0:I.arguments)!=null?D:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:(z=X.function.arguments)!=null?z:""}),((W=G.function)==null?void 0:W.name)!=null&&((ee=G.function)==null?void 0:ee.arguments)!=null&&K4(G.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(F=G.id)!=null?F:Rs(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0))}},flush(b){var _,S;b.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(_=f.promptTokens)!=null?_:NaN,completionTokens:(S=f.completionTokens)!=null?S:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},sP=L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish(),prompt_tokens_details:L.object({cached_tokens:L.number().nullish()}).nullish(),completion_tokens_details:L.object({reasoning_tokens:L.number().nullish(),accepted_prediction_tokens:L.number().nullish(),rejected_prediction_tokens:L.number().nullish()}).nullish()}).nullish(),zue=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({message:L.object({role:L.literal("assistant").nullish(),content:L.string().nullish(),function_call:L.object({arguments:L.string(),name:L.string()}).nullish(),tool_calls:L.array(L.object({id:L.string().nullish(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).nullish()}),index:L.number(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullish()})),usage:sP}),Uue=L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).nullish(),content:L.string().nullish(),function_call:L.object({name:L.string().optional(),arguments:L.string().optional()}).nullish(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullable().optional(),index:L.number()})),usage:sP}),Zk]);function xE(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function que(e){return e.startsWith("gpt-4o-audio-preview")}function Hue(e){var t,n;return xE(e)?(n=(t=Vue[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var Vue={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function Gue({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new _l({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new _r({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new _r({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new _r({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function m6(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var Wue=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h}){var p;const g=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:_}=Gue({prompt:n,inputFormat:t}),S=[..._??[],...c??[]],x={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,prompt:b,stop:S.length>0?S:void 0};switch(g){case"regular":{if((p=e.tools)!=null&&p.length)throw new _r({functionality:"tools"});if(e.toolChoice)throw new _r({functionality:"toolChoice"});return{args:x,warnings:v}}case"object-json":throw new _r({functionality:"object-json mode"});case"object-tool":throw new _r({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Xo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ls(this.config.headers(),e.headers),body:t,failedResponseHandler:lc,successfulResponseHandler:Td(Kue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,u=a.choices[0];return{text:u.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:gv(u.finish_reason),logprobs:m6(u.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:yv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Xo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ls(this.config.headers(),e.headers),body:r,failedResponseHandler:lc,successfulResponseHandler:Fk(Zue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(p,g){if(!p.success){u="error",g.enqueue({type:"error",error:p.error});return}const v=p.value;if("error"in v){u="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...yv(v)})),v.usage!=null&&(c={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(u=gv(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const _=m6(b==null?void 0:b.logprobs);_!=null&&_.length&&(f===void 0&&(f=[]),f.push(..._))},flush(p){p.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Kue=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullish()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()})}),Zue=L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string().nullish(),index:L.number(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullish()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),Zk]),Yue=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Pk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Xo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ls(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:lc,successfulResponseHandler:Td(Xue),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Xue=L.object({data:L.array(L.object({embedding:L.array(L.number())})),usage:L.object({prompt_tokens:L.number()}).nullish()}),Jue={"dall-e-3":1,"dall-e-2":10},Que=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:Jue[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h;const p=[];r!=null&&p.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&p.push({type:"unsupported-setting",setting:"seed"});const g=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:v,responseHeaders:b}=await Xo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ls(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:lc,successfulResponseHandler:Td(ece),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(_=>_.b64_json),warnings:p,response:{timestamp:g,modelId:this.modelId,headers:b}}}},ece=L.object({data:L.array(L.object({b64_json:L.string()}))});function tce({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var u,c,f,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${ch(o.image)}`,detail:(f=(c=o.providerMetadata)==null?void 0:c.openai)==null?void 0:f.imageDetail};case"file":{if(o.data instanceof URL)throw new _r({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new _r({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function g6({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function nce({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)switch(u.type){case"function":o.push({type:"function",name:u.name,description:u.description,parameters:u.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(u.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:u.args.searchContextSize,user_location:u.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:u});break}break;default:a.push({type:"unsupported-tool",tool:u});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const u=s;throw new _r({functionality:`Unsupported tool choice type: ${u}`})}}}var rce=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:u,prompt:c,providerMetadata:f,responseFormat:h}){var p,g,v;const b=[],_=vce(this.modelId),S=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),u!=null&&b.push({type:"unsupported-setting",setting:"seed"}),o!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:x,warnings:E}=tce({prompt:c,systemMessageMode:_.systemMessageMode});b.push(...E);const C=Hae({provider:"openai",providerOptions:f,schema:wce}),A=(p=C==null?void 0:C.strictSchemas)!=null?p:!0,O={model:this.modelId,input:x,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:A,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(O.temperature!=null&&(O.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),O.top_p!=null&&(O.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),S){case"regular":{const{tools:I,tool_choice:D,toolWarnings:z}=nce({mode:e,strict:A});return{args:{...O,tools:I,tool_choice:D},warnings:[...b,...z]}}case"object-json":return{args:{...O,text:{format:e.schema!=null?{type:"json_schema",strict:A,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...O,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:A}]},warnings:b};default:{const I=S;throw new Error(`Unsupported type: ${I}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:u,value:c,rawValue:f}=await Xo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ls(this.config.headers(),e.headers),body:o,failedResponseHandler:lc,successfulResponseHandler:Td(L.object({id:L.string(),created_at:L.number(),model:L.string(),output:L.array(L.discriminatedUnion("type",[L.object({type:L.literal("message"),role:L.literal("assistant"),content:L.array(L.object({type:L.literal("output_text"),text:L.string(),annotations:L.array(L.object({type:L.literal("url_citation"),start_index:L.number(),end_index:L.number(),url:L.string(),title:L.string()}))}))}),L.object({type:L.literal("function_call"),call_id:L.string(),name:L.string(),arguments:L.string()}),L.object({type:L.literal("web_search_call")}),L.object({type:L.literal("computer_call")}),L.object({type:L.literal("reasoning")})])),incomplete_details:L.object({reason:L.string()}).nullable(),usage:lP})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),p=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var b,_,S;return{sourceType:"url",id:(S=(_=(b=this.config).generateId)==null?void 0:_.call(b))!=null?S:Rs(),url:v.url,title:v.title}})),finishReason:g6({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:p.length>0}),toolCalls:p.length>0?p:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:f},request:{body:JSON.stringify(o)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Xo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Ls(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:lc,successfulResponseHandler:Fk(dce),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,u=NaN,c=null,f=null,h=null;const p={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var _,S,x,E,C,A,O,I;if(!v.success){o="error",b.enqueue({type:"error",error:v.error});return}const D=v.value;if(yce(D))D.item.type==="function_call"&&(p[D.output_index]={toolName:D.item.name,toolCallId:D.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:D.item.call_id,toolName:D.item.name,argsTextDelta:D.item.arguments}));else if(gce(D)){const z=p[D.output_index];z!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:z.toolCallId,toolName:z.toolName,argsTextDelta:D.delta})}else mce(D)?(h=D.response.id,b.enqueue({type:"response-metadata",id:D.response.id,timestamp:new Date(D.response.created_at*1e3),modelId:D.response.model})):fce(D)?b.enqueue({type:"text-delta",textDelta:D.delta}):hce(D)&&D.item.type==="function_call"?(p[D.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:D.item.call_id,toolName:D.item.name,args:D.item.arguments})):pce(D)?(o=g6({finishReason:(_=D.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=D.response.usage.input_tokens,u=D.response.usage.output_tokens,c=(x=(S=D.response.usage.input_tokens_details)==null?void 0:S.cached_tokens)!=null?x:c,f=(C=(E=D.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:f):bce(D)&&b.enqueue({type:"source",source:{sourceType:"url",id:(I=(O=(A=i.config).generateId)==null?void 0:O.call(A))!=null?I:Rs(),url:D.annotation.url,title:D.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:u},...(c!=null||f!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:f}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},lP=L.object({input_tokens:L.number(),input_tokens_details:L.object({cached_tokens:L.number().nullish()}).nullish(),output_tokens:L.number(),output_tokens_details:L.object({reasoning_tokens:L.number().nullish()}).nullish()}),ace=L.object({type:L.literal("response.output_text.delta"),delta:L.string()}),ice=L.object({type:L.enum(["response.completed","response.incomplete"]),response:L.object({incomplete_details:L.object({reason:L.string()}).nullish(),usage:lP})}),oce=L.object({type:L.literal("response.created"),response:L.object({id:L.string(),created_at:L.number(),model:L.string()})}),sce=L.object({type:L.literal("response.output_item.done"),output_index:L.number(),item:L.discriminatedUnion("type",[L.object({type:L.literal("message")}),L.object({type:L.literal("function_call"),id:L.string(),call_id:L.string(),name:L.string(),arguments:L.string(),status:L.literal("completed")})])}),lce=L.object({type:L.literal("response.function_call_arguments.delta"),item_id:L.string(),output_index:L.number(),delta:L.string()}),uce=L.object({type:L.literal("response.output_item.added"),output_index:L.number(),item:L.discriminatedUnion("type",[L.object({type:L.literal("message")}),L.object({type:L.literal("function_call"),id:L.string(),call_id:L.string(),name:L.string(),arguments:L.string()})])}),cce=L.object({type:L.literal("response.output_text.annotation.added"),annotation:L.object({type:L.literal("url_citation"),url:L.string(),title:L.string()})}),dce=L.union([ace,ice,oce,sce,lce,uce,cce,L.object({type:L.string()}).passthrough()]);function fce(e){return e.type==="response.output_text.delta"}function hce(e){return e.type==="response.output_item.done"}function pce(e){return e.type==="response.completed"||e.type==="response.incomplete"}function mce(e){return e.type==="response.created"}function gce(e){return e.type==="response.function_call_arguments.delta"}function yce(e){return e.type==="response.output_item.added"}function bce(e){return e.type==="response.output_text.annotation.added"}function vce(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var wce=L.object({metadata:L.any().nullish(),parallelToolCalls:L.boolean().nullish(),previousResponseId:L.string().nullish(),store:L.boolean().nullish(),user:L.string().nullish(),reasoningEffort:L.string().nullish(),strictSchemas:L.boolean().nullish(),instructions:L.string().nullish()}),_ce=L.object({});function xce({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:_ce}}var Sce={webSearchPreview:xce};function uP(e={}){var t,n,r;const a=(t=G8(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${Fae({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(b,_={})=>new Bue(b,_,{provider:`${o}.chat`,url:({path:S})=>`${a}${S}`,headers:s,compatibility:i,fetch:e.fetch}),c=(b,_={})=>new Wue(b,_,{provider:`${o}.completion`,url:({path:S})=>`${a}${S}`,headers:s,compatibility:i,fetch:e.fetch}),f=(b,_={})=>new Yue(b,_,{provider:`${o}.embedding`,url:({path:S})=>`${a}${S}`,headers:s,fetch:e.fetch}),h=(b,_={})=>new Que(b,_,{provider:`${o}.image`,url:({path:S})=>`${a}${S}`,headers:s,fetch:e.fetch}),p=(b,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?c(b,_):u(b,_)},g=b=>new rce(b,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),v=function(b,_){return p(b,_)};return v.languageModel=p,v.chat=u,v.completion=c,v.responses=g,v.embedding=f,v.textEmbedding=f,v.textEmbeddingModel=f,v.image=h,v.imageModel=h,v.tools=Sce,v}uP({compatibility:"strict"});var cP="vercel.ai.error",Ece=Symbol.for(cP),dP,Cce=class fP extends Error{constructor({name:t,message:n,cause:r}){super(n),this[dP]=!0,this.name=t,this.cause=r}static isInstance(t){return fP.hasMarker(t,cP)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};dP=Ece;var Ja=Cce,hP="AI_APICallError",pP=`vercel.ai.error.${hP}`,kce=Symbol.for(pP),mP,Cl=class extends Ja{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:hP,message:t,cause:s}),this[mP]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Ja.hasMarker(t,pP)}};mP=kce;var gP="AI_EmptyResponseBodyError",yP=`vercel.ai.error.${gP}`,Ace=Symbol.for(yP),bP,Tce=class extends Ja{constructor({message:t="Empty response body"}={}){super({name:gP,message:t}),this[bP]=!0}static isInstance(t){return Ja.hasMarker(t,yP)}};bP=Ace;function vP(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var wP="AI_InvalidArgumentError",_P=`vercel.ai.error.${wP}`,Rce=Symbol.for(_P),xP,SP=class extends Ja{constructor({message:t,cause:n,argument:r}){super({name:wP,message:t,cause:n}),this[xP]=!0,this.argument=r}static isInstance(t){return Ja.hasMarker(t,_P)}};xP=Rce;var EP="AI_JSONParseError",CP=`vercel.ai.error.${EP}`,Nce=Symbol.for(CP),kP,bv=class extends Ja{constructor({text:t,cause:n}){super({name:EP,message:`JSON parsing failed: Text: ${t}.
Error message: ${vP(n)}`,cause:n}),this[kP]=!0,this.text=t}static isInstance(t){return Ja.hasMarker(t,CP)}};kP=Nce;var AP="AI_LoadAPIKeyError",TP=`vercel.ai.error.${AP}`,Ice=Symbol.for(TP),RP,tb=class extends Ja{constructor({message:t}){super({name:AP,message:t}),this[RP]=!0}static isInstance(t){return Ja.hasMarker(t,TP)}};RP=Ice;var NP="AI_TooManyEmbeddingValuesForCallError",IP=`vercel.ai.error.${NP}`,Oce=Symbol.for(IP),OP,Dce=class extends Ja{constructor(e){super({name:NP,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[OP]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Ja.hasMarker(e,IP)}};OP=Oce;var DP="AI_TypeValidationError",jP=`vercel.ai.error.${DP}`,jce=Symbol.for(jP),MP,Mce=class SE extends Ja{constructor({value:t,cause:n}){super({name:DP,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${vP(n)}`,cause:n}),this[MP]=!0,this.value=t}static isInstance(t){return Ja.hasMarker(t,jP)}static wrap({value:t,cause:n}){return SE.isInstance(n)&&n.value===t?n:new SE({value:t,cause:n})}};MP=jce;var vv=Mce,PP="AI_UnsupportedFunctionalityError",FP=`vercel.ai.error.${PP}`,Pce=Symbol.for(FP),LP,yb=class extends Ja{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:PP,message:n}),this[LP]=!0,this.functionality=t}static isInstance(t){return Ja.hasMarker(t,FP)}};LP=Pce;let Fce=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Lce={};function EE(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function $ce(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=Bce(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function Bce(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function $w(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var zce=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Fce(n,t);if(e==null)return a;if(n.includes(r))throw new SP({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Uce=zce();function qce(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function r2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Hce({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new tb({message:`${r} API key must be a string.`});if(typeof Gr>"u")throw new tb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Lce[t],e==null)throw new tb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new tb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var CE=Symbol.for("vercel.ai.validator");function Vce(e){return{[CE]:!0,validate:e}}function Gce(e){return typeof e=="object"&&e!==null&&CE in e&&e[CE]===!0&&"validate"in e}function Wce(e){return Gce(e)?e:Kce(e)}function Kce(e){return Vce(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Zce({value:e,schema:t}){const n=Yk({value:e,schema:t});if(!n.success)throw vv.wrap({value:e,cause:n.error});return n.value}function Yk({value:e,schema:t}){const n=Wce(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:vv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:vv.wrap({value:e,cause:r})}}}function Yce({text:e,schema:t}){try{const n=as.parse(e);return t==null?n:Zce({value:n,schema:t})}catch(n){throw bv.isInstance(n)||vv.isInstance(n)?n:new bv({text:e,cause:n})}}function $P({text:e,schema:t}){try{const n=as.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Yk({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:bv.isInstance(n)?n:new bv({text:e,cause:n})}}}function Xce({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Yk({value:t[e],schema:n});if(!r.success)throw new SP({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Jce=()=>globalThis.fetch,kE=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Qce({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Qce=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Jce()})=>{try{const s=await o(e,{method:"POST",headers:qce(t),body:n.content,signal:i}),u=$w(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw r2(f)||Cl.isInstance(f)?f:new Cl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(r2(c)||Cl.isInstance(c))?c:new Cl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(r2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new Cl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function AE(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var ede=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=$w(r);if(o.trim()==="")return{responseHeaders:s,value:new Cl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=Yce({text:o,schema:e});return{responseHeaders:s,value:new Cl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new Cl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},tde=e=>async({response:t})=>{const n=$w(t);if(t.body==null)throw new Tce({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough($ce()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue($P({text:r,schema:e}))}}))}},BP=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=$P({text:a,schema:e}),o=$w(t);if(!i.success)throw new Cl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:nde}=globalThis;function rde(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return nde(t)}function ade(e){return e==null?void 0:e.replace(/\/$/,"")}function po(e){if(ide(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:u,format:c,const:f,minLength:h,enum:p}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),f!==void 0&&(g.enum=[f]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),p!==void 0&&(g.enum=p),a!=null&&(g.properties=Object.entries(a).reduce((v,[b,_])=>(v[b]=po(_),v),{})),i&&(g.items=Array.isArray(i)?i.map(po):po(i)),o&&(g.allOf=o.map(po)),s)if(s.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=s.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=po(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(po),g.nullable=!0}else g.anyOf=s.map(po);return u&&(g.oneOf=u.map(po)),h!==void 0&&(g.minLength=h),g}function ide(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function ode(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new yb({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const u=[];for(const c of s)switch(c.type){case"text":{u.push({text:c.text});break}case"image":{u.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:rde(c.image)}});break}case"file":{u.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:u});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(u=>{switch(u.type){case"text":return u.text.length===0?void 0:{text:u.text};case"file":{if(u.mimeType!=="image/png")throw new yb({functionality:"Only PNG images are supported in assistant messages"});if(u.data instanceof URL)throw new yb({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:u.mimeType,data:u.data}}}case"tool-call":return{functionCall:{name:u.toolName,args:u.args}}}}).filter(u=>u!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(u=>({functionResponse:{name:u.toolName,response:{name:u.toolName,content:u.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function y6(e){return e.includes("/")?e:`models/${e}`}var sde=L.object({error:L.object({code:L.number().nullable(),message:L.string(),status:L.string()})}),TE=ede({errorSchema:sde,errorToMessage:e=>e.error.message});function lde(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],u=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:u?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const f=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):f.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:po(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:s};const p=h.type;switch(p){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=p;throw new yb({functionality:`Unsupported tool choice type: ${g}`})}}}function b6({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var ude=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var p,g;const v=e.type,b=[],_=Xce({provider:"google",providerOptions:h,schema:hde}),S={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:u,seed:f,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?po(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:x,systemInstruction:E}=ode(t);switch(v){case"regular":{const{tools:C,toolConfig:A,toolWarnings:O}=lde(e,(p=this.settings.useSearchGrounding)!=null?p:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:S,contents:x,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:A,cachedContent:this.settings.cachedContent},warnings:[...b,...O]}}case"object-json":return{args:{generationConfig:{...S,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?po(e.schema):void 0},contents:x,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:S,contents:x,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:po(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),u=JSON.stringify(o),c=EE(await AE(this.config.headers),e.headers),{responseHeaders:f,value:h,rawValue:p}=await kE({url:`${this.config.baseURL}/${y6(this.modelId)}:generateContent`,headers:c,body:o,failedResponseHandler:TE,successfulResponseHandler:BP(dde),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=o,b=h.candidates[0],_=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,S=v6({parts:_,generateId:this.config.generateId}),x=h.usageMetadata;return{text:w6(_),files:(t=_6(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:S,finishReason:b6({finishReason:b.finishReason,hasToolCalls:S!=null&&S.length>0}),usage:{promptTokens:(n=x==null?void 0:x.promptTokenCount)!=null?n:NaN,completionTokens:(r=x==null?void 0:x.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:f,body:p},warnings:s,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:x6({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:u}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=EE(await AE(this.config.headers),e.headers),{responseHeaders:i,value:o}=await kE({url:`${this.config.baseURL}/${y6(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:TE,successfulResponseHandler:tde(fde),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...u}=t;let c="unknown",f={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const p=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var _,S,x,E,C,A;if(!v.success){b.enqueue({type:"error",error:v.error});return}const O=v.value,I=O.usageMetadata;I!=null&&(f={promptTokens:(_=I.promptTokenCount)!=null?_:NaN,completionTokens:(S=I.candidatesTokenCount)!=null?S:NaN});const D=(x=O.candidates)==null?void 0:x[0];if(D==null)return;const z=D.content;if(z!=null){const W=w6(z.parts);W!=null&&b.enqueue({type:"text-delta",textDelta:W});const ee=_6(z.parts);if(ee!=null)for(const Z of ee)b.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const F=v6({parts:z.parts,generateId:p});if(F!=null)for(const Z of F)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),g=!0}if(D.finishReason!=null){c=b6({finishReason:D.finishReason,hasToolCalls:g});const W=(E=x6({groundingMetadata:D.groundingMetadata,generateId:p}))!=null?E:[];for(const ee of W)b.enqueue({type:"source",source:ee});h={google:{groundingMetadata:(C=D.groundingMetadata)!=null?C:null,safetyRatings:(A=D.safetyRatings)!=null?A:null}}}},flush(v){v.enqueue({type:"finish",finishReason:c,usage:f,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:u},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function v6({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function w6(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function _6(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function x6({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var zP=L.object({role:L.string(),parts:L.array(L.union([L.object({text:L.string()}),L.object({functionCall:L.object({name:L.string(),args:L.unknown()})}),L.object({inlineData:L.object({mimeType:L.string(),data:L.string()})})])).nullish()}),cde=L.object({web:L.object({uri:L.string(),title:L.string()}).nullish(),retrievedContext:L.object({uri:L.string(),title:L.string()}).nullish()}),UP=L.object({webSearchQueries:L.array(L.string()).nullish(),retrievalQueries:L.array(L.string()).nullish(),searchEntryPoint:L.object({renderedContent:L.string()}).nullish(),groundingChunks:L.array(cde).nullish(),groundingSupports:L.array(L.object({segment:L.object({startIndex:L.number().nullish(),endIndex:L.number().nullish(),text:L.string().nullish()}),segment_text:L.string().nullish(),groundingChunkIndices:L.array(L.number()).nullish(),supportChunkIndices:L.array(L.number()).nullish(),confidenceScores:L.array(L.number()).nullish(),confidenceScore:L.array(L.number()).nullish()})).nullish(),retrievalMetadata:L.union([L.object({webDynamicRetrievalScore:L.number()}),L.object({})]).nullish()}),qP=L.object({category:L.string(),probability:L.string(),probabilityScore:L.number().nullish(),severity:L.string().nullish(),severityScore:L.number().nullish(),blocked:L.boolean().nullish()}),dde=L.object({candidates:L.array(L.object({content:zP.nullish().or(L.object({}).strict()),finishReason:L.string().nullish(),safetyRatings:L.array(qP).nullish(),groundingMetadata:UP.nullish()})),usageMetadata:L.object({promptTokenCount:L.number().nullish(),candidatesTokenCount:L.number().nullish(),totalTokenCount:L.number().nullish()}).nullish()}),fde=L.object({candidates:L.array(L.object({content:zP.nullish(),finishReason:L.string().nullish(),safetyRatings:L.array(qP).nullish(),groundingMetadata:UP.nullish()})).nullish(),usageMetadata:L.object({promptTokenCount:L.number().nullish(),candidatesTokenCount:L.number().nullish(),totalTokenCount:L.number().nullish()}).nullish()}),hde=L.object({responseModalities:L.array(L.enum(["TEXT","IMAGE"])).nullish()}),pde=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Dce({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=EE(await AE(this.config.headers),t),{responseHeaders:a,value:i}=await kE({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:TE,successfulResponseHandler:BP(mde),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},mde=L.object({embeddings:L.array(L.object({values:L.array(L.number())}))});function gde(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function HP(e={}){var t;const n=(t=ade(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":Hce({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,u={})=>{var c;return new ude(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:Uce,isSupportedUrl:gde,fetch:e.fetch})},i=(s,u={})=>new pde(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,u)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}HP();var VP="vercel.ai.error",yde=Symbol.for(VP),GP,bde=class WP extends Error{constructor({name:t,message:n,cause:r}){super(n),this[GP]=!0,this.name=t,this.cause=r}static isInstance(t){return WP.hasMarker(t,VP)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};GP=yde;var Ra=bde,KP="AI_APICallError",ZP=`vercel.ai.error.${KP}`,vde=Symbol.for(ZP),YP,kl=class extends Ra{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:u}){super({name:KP,message:e,cause:o}),this[YP]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=u}static isInstance(e){return Ra.hasMarker(e,ZP)}};YP=vde;var XP="AI_EmptyResponseBodyError",JP=`vercel.ai.error.${XP}`,wde=Symbol.for(JP),QP,_de=class extends Ra{constructor({message:e="Empty response body"}={}){super({name:XP,message:e}),this[QP]=!0}static isInstance(e){return Ra.hasMarker(e,JP)}};QP=wde;function eF(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var tF="AI_InvalidArgumentError",nF=`vercel.ai.error.${tF}`,xde=Symbol.for(nF),rF,Sde=class extends Ra{constructor({message:e,cause:t,argument:n}){super({name:tF,message:e,cause:t}),this[rF]=!0,this.argument=n}static isInstance(e){return Ra.hasMarker(e,nF)}};rF=xde;var aF="AI_InvalidPromptError",iF=`vercel.ai.error.${aF}`,Ede=Symbol.for(iF),oF,Cde=class extends Ra{constructor({prompt:e,message:t,cause:n}){super({name:aF,message:`Invalid prompt: ${t}`,cause:n}),this[oF]=!0,this.prompt=e}static isInstance(e){return Ra.hasMarker(e,iF)}};oF=Ede;var sF="AI_InvalidResponseDataError",lF=`vercel.ai.error.${sF}`,kde=Symbol.for(lF),uF,a2=class extends Ra{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:sF,message:t}),this[uF]=!0,this.data=e}static isInstance(e){return Ra.hasMarker(e,lF)}};uF=kde;var cF="AI_JSONParseError",dF=`vercel.ai.error.${cF}`,Ade=Symbol.for(dF),fF,wv=class extends Ra{constructor({text:e,cause:t}){super({name:cF,message:`JSON parsing failed: Text: ${e}.
Error message: ${eF(t)}`,cause:t}),this[fF]=!0,this.text=e}static isInstance(e){return Ra.hasMarker(e,dF)}};fF=Ade;var hF="AI_LoadAPIKeyError",pF=`vercel.ai.error.${hF}`,Tde=Symbol.for(pF),mF,nb=class extends Ra{constructor({message:e}){super({name:hF,message:e}),this[mF]=!0}static isInstance(e){return Ra.hasMarker(e,pF)}};mF=Tde;var gF="AI_TypeValidationError",yF=`vercel.ai.error.${gF}`,Rde=Symbol.for(yF),bF,Nde=class RE extends Ra{constructor({value:t,cause:n}){super({name:gF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${eF(n)}`,cause:n}),this[bF]=!0,this.value=t}static isInstance(t){return Ra.hasMarker(t,yF)}static wrap({value:t,cause:n}){return RE.isInstance(n)&&n.value===t?n:new RE({value:t,cause:n})}};bF=Rde;var _v=Nde,vF="AI_UnsupportedFunctionalityError",wF=`vercel.ai.error.${vF}`,Ide=Symbol.for(wF),_F,go=class extends Ra{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:vF,message:t}),this[_F]=!0,this.functionality=e}static isInstance(e){return Ra.hasMarker(e,wF)}};_F=Ide;let Ode=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};class S6 extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function i2(e){}function Dde(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=i2,onError:n=i2,onRetry:r=i2,onComment:a}=e;let i="",o=!0,s,u="",c="";function f(b){const _=o?b.replace(/^\xEF\xBB\xBF/,""):b,[S,x]=jde(`${i}${_}`);for(const E of S)h(E);i=x,o=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const _=b.indexOf(":");if(_!==-1){const S=b.slice(0,_),x=b[_+1]===" "?2:1,E=b.slice(_+x);p(S,E,b);return}p(b,"",b)}function p(b,_,S){switch(b){case"event":c=_;break;case"data":u=`${u}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new S6(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:S}));break;default:n(new S6(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:_,line:S}));break}}function g(){u.length>0&&t({id:s,event:c||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",c=""}function v(b={}){i&&b.consume&&h(i),o=!0,s=void 0,u="",c="",i=""}return{feed:f,reset:v}}function jde(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class Mde extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=Dde({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var Pde={};function xv(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Bw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Fde=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Ode(n,t);if(e==null)return a;if(n.includes(r))throw new Sde({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},rb=Fde();function Lde(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function o2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function $de({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new nb({message:`${r} API key must be a string.`});if(typeof Gr>"u")throw new nb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Pde[t],e==null)throw new nb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new nb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var NE=Symbol.for("vercel.ai.validator");function Bde(e){return{[NE]:!0,validate:e}}function zde(e){return typeof e=="object"&&e!==null&&NE in e&&e[NE]===!0&&"validate"in e}function Ude(e){return zde(e)?e:qde(e)}function qde(e){return Bde(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Hde({value:e,schema:t}){const n=xF({value:e,schema:t});if(!n.success)throw _v.wrap({value:e,cause:n.error});return n.value}function xF({value:e,schema:t}){const n=Ude(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:_v.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:_v.wrap({value:e,cause:r})}}}function Vde({text:e,schema:t}){try{const n=as.parse(e);return t==null?n:Hde({value:n,schema:t})}catch(n){throw wv.isInstance(n)||_v.isInstance(n)?n:new wv({text:e,cause:n})}}function SF({text:e,schema:t}){try{const n=as.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=xF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:wv.isInstance(n)?n:new wv({text:e,cause:n})}}}function s2(e){try{return as.parse(e),!0}catch{return!1}}var Gde=()=>globalThis.fetch,Sv=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Wde({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Wde=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Gde()})=>{try{const s=await o(e,{method:"POST",headers:Lde(t),body:n.content,signal:i}),u=Bw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw o2(f)||kl.isInstance(f)?f:new kl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(o2(c)||kl.isInstance(c))?c:new kl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(o2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new kl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},Kde=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Bw(r);if(o.trim()==="")return{responseHeaders:s,value:new kl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=Vde({text:o,schema:e});return{responseHeaders:s,value:new kl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new kl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},EF=e=>async({response:t})=>{const n=Bw(t);if(t.body==null)throw new _de({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Mde).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(SF({text:r,schema:e}))}}))}},CF=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=SF({text:a,schema:e}),o=Bw(t);if(!i.success)throw new kl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Zde}=globalThis;function Yde(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Zde(t)}function Xde(e){return e==null?void 0:e.replace(/\/$/,"")}var Jde=Object.defineProperty,Qde=Object.defineProperties,efe=Object.getOwnPropertyDescriptors,Ev=Object.getOwnPropertySymbols,kF=Object.prototype.hasOwnProperty,AF=Object.prototype.propertyIsEnumerable,E6=(e,t,n)=>t in e?Jde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qi=(e,t)=>{for(var n in t||(t={}))kF.call(t,n)&&E6(e,n,t[n]);if(Ev)for(var n of Ev(t))AF.call(t,n)&&E6(e,n,t[n]);return e},bb=(e,t)=>Qde(e,efe(t)),Cv=(e,t)=>{var n={};for(var r in e)kF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ev)for(var r of Ev(e))t.indexOf(r)<0&&AF.call(e,r)&&(n[r]=e[r]);return n};function Ss(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function tfe(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:Ss(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=Ss(s))!=null?n:Ss(o[0].providerMetadata)});break}const u=Ss(s),c=o.map(f=>{var h,p,g,v;switch(f.type){case"text":return{type:"text",text:f.text,cache_control:(h=Ss(f.providerMetadata))!=null?h:u};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(p=f.mimeType)!=null?p:"image/jpeg"};base64,${Yde(f.image)}`},cache_control:(g=Ss(f.providerMetadata))!=null?g:u};case"file":return{type:"text",text:f.data instanceof URL?f.data.toString():f.data,cache_control:(v=Ss(f.providerMetadata))!=null?v:u};default:{const b=f;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:c});break}case"assistant":{let u="";const c=[];for(const f of o)switch(f.type){case"text":{u+=f.text;break}case"tool-call":{c.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=f;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,cache_control:Ss(s)});break}case"tool":{for(const u of o)a.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),cache_control:(r=Ss(s))!=null?r:Ss(u.providerMetadata)});break}default:{const u=i;throw new Error(`Unsupported role: ${u}`)}}return a}function C6(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function kv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Xk=L.object({error:L.object({message:L.string(),type:L.string(),param:L.any().nullable(),code:L.string().nullable()})}),Av=Kde({errorSchema:Xk,errorToMessage:e=>e.error.message});function nfe(e){return"parameters"in e}var rfe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:u,responseFormat:c,topK:f,providerMetadata:h}){var p;const g=e.type,v=(p=h==null?void 0:h.openrouter)!=null?p:{},b=qi(qi(qi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:u,response_format:c,top_k:f,messages:tfe(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return qi(qi({},b),ofe(e));case"object-json":return bb(qi({},b),{response_format:{type:"json_object"}});case"object-tool":return bb(qi({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new go({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const u=this.getArgs(e),{responseHeaders:c,value:f}=await Sv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xv(this.config.headers(),e.headers),body:u,failedResponseHandler:Av,successfulResponseHandler:CF(afe),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u,{messages:p}=h,g=Cv(h,["messages"]),v=f.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:f.id,modelId:f.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var _;return{toolCallType:"function",toolCallId:(_=b.id)!=null?_:rb(),toolName:b.function.name,args:b.function.arguments}}),finishReason:kv(v.finish_reason),usage:{promptTokens:(i=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=f.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:p,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:C6(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Sv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:xv(this.config.headers(),e.headers),body:bb(qi({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Av,successfulResponseHandler:EF(ife),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=Cv(a,["messages"]),s=[];let u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f;return{stream:r.pipeThrough(new TransformStream({transform(h,p){var g,v,b,_,S,x,E,C,A,O,I,D;if(!h.success){u="error",p.enqueue({type:"error",error:h.error});return}const z=h.value;if("error"in z){u="error",p.enqueue({type:"error",error:z.error});return}z.id&&p.enqueue({type:"response-metadata",id:z.id}),z.model&&p.enqueue({type:"response-metadata",modelId:z.model}),z.usage!=null&&(c={promptTokens:z.usage.prompt_tokens,completionTokens:z.usage.completion_tokens});const W=z.choices[0];if((W==null?void 0:W.finish_reason)!=null&&(u=kv(W.finish_reason)),(W==null?void 0:W.delta)==null)return;const ee=W.delta;ee.content!=null&&p.enqueue({type:"text-delta",textDelta:ee.content}),ee.reasoning!=null&&p.enqueue({type:"reasoning",textDelta:ee.reasoning});const F=C6(W==null?void 0:W.logprobs);if(F!=null&&F.length&&(f===void 0&&(f=[]),f.push(...F)),ee.tool_calls!=null)for(const Z of ee.tool_calls){const V=Z.index;if(s[V]==null){if(Z.type!=="function")throw new a2({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new a2({data:Z,message:"Expected 'id' to be a string."});if(((g=Z.function)==null?void 0:g.name)==null)throw new a2({data:Z,message:"Expected 'function.name' to be a string."});s[V]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ie=s[V];if(ie==null)throw new Error("Tool call is missing");((b=ie.function)==null?void 0:b.name)!=null&&((_=ie.function)==null?void 0:_.arguments)!=null&&s2(ie.function.arguments)&&(p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:ie.function.arguments}),p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(S=ie.id)!=null?S:rb(),toolName:ie.function.name,args:ie.function.arguments}),ie.sent=!0);continue}const ae=s[V];if(ae==null)throw new Error("Tool call is missing");((x=Z.function)==null?void 0:x.arguments)!=null&&(ae.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:(A=Z.function.arguments)!=null?A:""}),((O=ae.function)==null?void 0:O.name)!=null&&((I=ae.function)==null?void 0:I.arguments)!=null&&s2(ae.function.arguments)&&(p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(D=ae.id)!=null?D:rb(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0)}},flush(h){var p;if(u==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(p=g.id)!=null?p:rb(),toolName:g.function.name,args:s2(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},TF=L.object({id:L.string().optional(),model:L.string().optional(),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number(),total_tokens:L.number()}).nullish()}),afe=TF.extend({choices:L.array(L.object({message:L.object({role:L.literal("assistant"),content:L.string().nullable().optional(),reasoning:L.string().nullable().optional(),tool_calls:L.array(L.object({id:L.string().optional().nullable(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).optional()}),index:L.number(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullable().optional(),finish_reason:L.string().optional().nullable()}))}),ife=L.union([TF.extend({choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).optional(),content:L.string().nullish(),reasoning:L.string().nullish().optional(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),logprobs:L.object({content:L.array(L.object({token:L.string(),logprob:L.number(),top_logprobs:L.array(L.object({token:L.string(),logprob:L.number()}))})).nullable()}).nullish(),finish_reason:L.string().nullable().optional(),index:L.number()}))}),Xk]);function ofe(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>nfe(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function sfe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new Cde({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new go({functionality:"images"});case"file":throw new go({functionality:"file attachments"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new go({functionality:"tool-call messages"});case"reasoning":throw new go({functionality:"reasoning messages"});case"redacted-reasoning":throw new go({functionality:"redacted reasoning messages"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new go({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function k6(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var lfe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:u,responseFormat:c,topK:f,stopSequences:h,providerMetadata:p}){var g,v;const b=e.type,_=(g=p==null?void 0:p.openrouter)!=null?g:{},{prompt:S}=sfe({prompt:n,inputFormat:t}),x=qi(qi(qi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:u,stop:h,response_format:c,top_k:f,prompt:S,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new go({functionality:"tools"});if(e.toolChoice)throw new go({functionality:"toolChoice"});return x}case"object-json":throw new go({functionality:"object-json mode"});case"object-tool":throw new go({functionality:"object-tool mode"});default:{const E=b;throw new go({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:u}=await Sv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:xv(this.config.headers(),e.headers),body:o,failedResponseHandler:Av,successfulResponseHandler:CF(A6),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o,{prompt:f}=c,h=Cv(c,["prompt"]);if("error"in u)throw new Error(`${u.error.message}`);const p=u.choices[0];if(!p)throw new Error("No choice in OpenRouter completion response");return{response:{id:u.id,modelId:u.model},text:(t=p.text)!=null?t:"",reasoning:p.reasoning||void 0,usage:{promptTokens:(r=(n=u.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=u.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:kv(p.finish_reason),logprobs:k6(p.logprobs),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await Sv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:xv(this.config.headers(),e.headers),body:bb(qi({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:Av,successfulResponseHandler:EF(A6),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=Cv(a,["prompt"]);let s="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(f,h){if(!f.success){s="error",h.enqueue({type:"error",error:f.error});return}const p=f.value;if("error"in p){s="error",h.enqueue({type:"error",error:p.error});return}p.usage!=null&&(u={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens});const g=p.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=kv(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=k6(g==null?void 0:g.logprobs);v!=null&&v.length&&(c===void 0&&(c=[]),c.push(...v))},flush(f){f.enqueue({type:"finish",finishReason:s,logprobs:c,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},A6=L.union([L.object({id:L.string().optional(),model:L.string().optional(),choices:L.array(L.object({text:L.string(),reasoning:L.string().nullish().optional(),finish_reason:L.string().nullish(),index:L.number(),logprobs:L.object({tokens:L.array(L.string()),token_logprobs:L.array(L.number()),top_logprobs:L.array(L.record(L.string(),L.number())).nullable()}).nullable().optional()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).optional().nullable()}),Xk]);function RF(e={}){var t,n,r;const a=(n=Xde((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>qi({Authorization:`Bearer ${$de({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,p={})=>new rfe(h,p,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,p={})=>new lfe(h,p,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,p)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?u(h,p):s(h,p)},f=function(h,p){return c(h,p)};return f.languageModel=c,f.chat=s,f.completion=u,f}RF({compatibility:"strict"});var Xc={},l2={},T6;function R6(){return T6||(T6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(l2)),l2}var N6;function ufe(){return N6||(N6=1,function(e){var t=Xc&&Xc.__createBinding||(Object.create?function(c,f,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,p,g)}:function(c,f,h,p){p===void 0&&(p=h),c[p]=f[h]}),n=Xc&&Xc.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=R6();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(R6(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return s(c.trim(),f)}e.parseJSON=o;const s=(c,f)=>{const h=c.length;let p=0;const g=A=>{throw new a(`${A} at position ${p}`)},v=A=>{throw new i(`${A} at position ${p}`)},b=()=>(C(),p>=h&&g("Unexpected end of input"),c[p]==='"'?_():c[p]==="{"?S():c[p]==="["?x():c.substring(p,p+4)==="null"||r.Allow.NULL&f&&h-p<4&&"null".startsWith(c.substring(p))?(p+=4,null):c.substring(p,p+4)==="true"||r.Allow.BOOL&f&&h-p<4&&"true".startsWith(c.substring(p))?(p+=4,!0):c.substring(p,p+5)==="false"||r.Allow.BOOL&f&&h-p<5&&"false".startsWith(c.substring(p))?(p+=5,!1):c.substring(p,p+8)==="Infinity"||r.Allow.INFINITY&f&&h-p<8&&"Infinity".startsWith(c.substring(p))?(p+=8,1/0):c.substring(p,p+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-p&&h-p<9&&"-Infinity".startsWith(c.substring(p))?(p+=9,-1/0):c.substring(p,p+3)==="NaN"||r.Allow.NAN&f&&h-p<3&&"NaN".startsWith(c.substring(p))?(p+=3,NaN):E()),_=()=>{const A=p;let O=!1;for(p++;p<h&&(c[p]!=='"'||O&&c[p-1]==="\\");)O=c[p]==="\\"?!O:!1,p++;if(c.charAt(p)=='"')try{return JSON.parse(c.substring(A,++p-Number(O)))}catch(I){v(String(I))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(A,p-Number(O))+'"')}catch{return JSON.parse(c.substring(A,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},S=()=>{p++,C();const A={};try{for(;c[p]!=="}";){if(C(),p>=h&&r.Allow.OBJ&f)return A;const O=_();C(),p++;try{const I=b();A[O]=I}catch(I){if(r.Allow.OBJ&f)return A;throw I}C(),c[p]===","&&p++}}catch{if(r.Allow.OBJ&f)return A;g("Expected '}' at end of object")}return p++,A},x=()=>{p++;const A=[];try{for(;c[p]!=="]";)A.push(b()),C(),c[p]===","&&p++}catch{if(r.Allow.ARR&f)return A;g("Expected ']' at end of array")}return p++,A},E=()=>{if(p===0){c==="-"&&v("Not sure what '-' is");try{return JSON.parse(c)}catch(O){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}v(String(O))}}const A=p;for(c[p]==="-"&&p++;c[p]&&",]}".indexOf(c[p])===-1;)p++;p==h&&!(r.Allow.NUM&f)&&g("Unterminated number literal");try{return JSON.parse(c.substring(A,p))}catch{c.substring(A,p)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(A,c.lastIndexOf("e")))}catch(I){v(String(I))}}},C=()=>{for(;p<h&&` 
\r	`.includes(c[p]);)p++};return b()},u=o;e.parse=u}(Xc)),Xc}var cfe=ufe();function u2(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new _r({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(ch(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var dfe=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=cfe.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:Rs(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function ffe({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var hfe=L.object({error:L.object({code:L.string().nullable(),message:L.string(),param:L.any().nullable(),type:L.string()})}),IE=H8({errorSchema:hfe,errorToMessage:e=>e.error.message});function pfe({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new _r({functionality:`Unsupported tool choice type: ${s}`})}}}function mfe(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var gfe=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},yfe=e=>async({response:t})=>{const n=ag(t);if(t.body===null)throw new jk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new gfe).pipeThrough(new TransformStream({transform(r,a){a.enqueue(ud({schema:e,text:r}))}}))}},bfe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:u,topK:c,topP:f}){const h=n.type,p=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&p.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:mfe({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:u,tfs_z:this.settings.tfsZ,top_k:c,top_p:f,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=pfe({mode:n});return{args:{...g,messages:u2(a),tools:v},type:h,warnings:[...p,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:u2(a)},type:h,warnings:p};case"object-tool":return{args:{...g,messages:u2(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:p};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Xo({abortSignal:e.abortSignal,body:i,failedResponseHandler:IE,fetch:this.config.fetch,headers:Ls(this.config.headers(),e.headers),successfulResponseHandler:Td(vfe),url:`${this.config.baseURL}/chat`}),{messages:u,...c}=i,f=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var p;return{args:JSON.stringify(h.function.arguments),toolCallId:(p=h.id)!=null?p:Rs(),toolCallType:"function",toolName:h.function.name}});return{finishReason:ffe({finishReason:s.done_reason,hasToolCalls:f!==void 0&&f.length>0}),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:f,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)b.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",..._});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Xo({abortSignal:e.abortSignal,body:t,failedResponseHandler:IE,fetch:this.config.fetch,headers:Ls(this.config.headers(),e.headers),successfulResponseHandler:yfe(wfe),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,u=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new dfe({tools:u,type:n});let f="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:p=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:f,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){f=c.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}p&&c.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},vfe=L.object({created_at:L.string(),done:L.literal(!0),done_reason:L.string().optional().nullable(),eval_count:L.number(),eval_duration:L.number(),load_duration:L.number().optional(),message:L.object({content:L.string(),role:L.string(),tool_calls:L.array(L.object({function:L.object({arguments:L.record(L.any()),name:L.string()}),id:L.string().optional()})).optional().nullable()}),model:L.string(),prompt_eval_count:L.number().optional(),prompt_eval_duration:L.number().optional(),total_duration:L.number()}),wfe=L.discriminatedUnion("done",[L.object({created_at:L.string(),done:L.literal(!1),message:L.object({content:L.string(),role:L.string()}),model:L.string()}),L.object({created_at:L.string(),done:L.literal(!0),eval_count:L.number(),eval_duration:L.number(),load_duration:L.number().optional(),model:L.string(),prompt_eval_count:L.number().optional(),prompt_eval_duration:L.number().optional(),total_duration:L.number()})]),_fe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new Pk({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Xo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:IE,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Td(xfe),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},xfe=L.object({embeddings:L.array(L.array(L.number())),prompt_eval_count:L.number().nullable()});function NF(e={}){var t;const n=(t=G8(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,u={})=>new bfe(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,u={})=>new _fe(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,u){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,u)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}NF();let Sfe=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function ph(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Efe(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),p=f+1,g=p<u.length&&u[p]===" "?u.slice(p+1):u.slice(p);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=Cfe(e,u);e=h;for(let p=0;p<f.length;p++)i(f[p],c)},flush(u){i(e,u),o(u)}})}function Cfe(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function zw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var kfe=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Sfe(n,t);if(e==null)return a;if(n.includes(r))throw new Mk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},c2=kfe();function Afe(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function d2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var OE=Symbol.for("vercel.ai.validator");function Tfe(e){return{[OE]:!0,validate:e}}function Rfe(e){return typeof e=="object"&&e!==null&&OE in e&&e[OE]===!0&&"validate"in e}function Nfe(e){return Rfe(e)?e:Ife(e)}function Ife(e){return Tfe(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Ofe({value:e,schema:t}){const n=IF({value:e,schema:t});if(!n.success)throw rc.wrap({value:e,cause:n.error});return n.value}function IF({value:e,schema:t}){const n=Nfe(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:rc.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:rc.wrap({value:e,cause:r})}}}function Dfe({text:e,schema:t}){try{const n=as.parse(e);return t==null?n:Ofe({value:n,schema:t})}catch(n){throw nc.isInstance(n)||rc.isInstance(n)?n:new nc({text:e,cause:n})}}function OF({text:e,schema:t}){try{const n=as.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=IF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:nc.isInstance(n)?n:new nc({text:e,cause:n})}}}function I6(e){try{return as.parse(e),!0}catch{return!1}}var jfe=()=>globalThis.fetch,mh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Mfe({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Mfe=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=jfe()})=>{try{const s=await o(e,{method:"POST",headers:Afe(t),body:n.content,signal:i}),u=zw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw d2(f)||ha.isInstance(f)?f:new ha({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(d2(c)||ha.isInstance(c))?c:new ha({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(d2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new ha({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},Uw=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=zw(r);if(o.trim()==="")return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=Dfe({text:o,schema:e});return{responseHeaders:s,value:new ha({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new ha({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},DF=e=>async({response:t})=>{const n=zw(t);if(t.body==null)throw new jk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(Efe()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(OF({text:r,schema:e}))}}))}},qw=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=OF({text:a,schema:e}),o=zw(t);if(!i.success)throw new ha({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Pfe}=globalThis;function Ffe(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Pfe(t)}function Lfe(e){return e==null?void 0:e.replace(/\/$/,"")}function im(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function $fe(e){const t=[];for(const{role:n,content:r,...a}of e){const i=im({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...im(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const u=im(o);switch(o.type){case"text":return{type:"text",text:o.text,...u};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${Ffe(o.image)}`},...u};case"file":throw new _r({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const u of r){const c=im(u);switch(u.type){case"text":{o+=u.text;break}case"tool-call":{s.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)},...c});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=im(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function Tv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Rv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Bfe=L.object({error:L.object({message:L.string(),type:L.string().nullish(),param:L.any().nullish(),code:L.union([L.string(),L.number()]).nullish()})}),Hw={errorSchema:Bfe,errorToMessage:e=>e.error.message};function zfe({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)u.type==="provider-defined"?a.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const u=s;throw new _r({functionality:`Unsupported tool choice type: ${u}`})}}}var Ufe=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Hw;this.chunkSchema=Hfe(i.errorSchema),this.failedResponseHandler=Uw(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:u,stopSequences:c,responseFormat:f,seed:h}){var p,g;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(f==null?void 0:f.type)==="json"&&f.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(f==null?void 0:f.type)==="json"?this.supportsStructuredOutputs===!0&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,name:(p=f.name)!=null?p:"response",description:f.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...u==null?void 0:u[this.providerOptionsName],messages:$fe(t)};switch(v){case"regular":{const{tools:S,tool_choice:x,toolWarnings:E}=zfe({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:S,tool_choice:x},warnings:[...b,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const S=v;throw new Error(`Unsupported type: ${S}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u,c;const{args:f,warnings:h}=this.getArgs({...e}),p=JSON.stringify(f),{responseHeaders:g,value:v,rawValue:b}=await mh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ph(this.config.headers(),e.headers),body:f,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:qw(qfe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...S}=f,x=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=x.message.content)!=null?r:void 0,reasoning:(a=x.message.reasoning_content)!=null?a:void 0,toolCalls:(i=x.message.tool_calls)==null?void 0:i.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:c2(),toolName:C.function.name,args:C.function.arguments}}),finishReason:Rv(x.finish_reason),usage:{promptTokens:(s=(o=v.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(c=(u=v.usage)==null?void 0:u.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:S},rawResponse:{headers:g,body:b},response:Tv(v),warnings:h,request:{body:p}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const S of v.reasoning)S.type==="text"&&_.enqueue({type:"reasoning",textDelta:S.text});else _.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&_.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const S of v.toolCalls)_.enqueue({type:"tool-call",...S});_.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),_.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await mh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ph(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:DF(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=n,f=[];let h="unknown",p={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var _,S,x,E,C,A,O,I,D,z,W,ee,F,Z;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const V=v.value;if(i==null||i.processChunk(v.rawValue),"error"in V){h="error",b.enqueue({type:"error",error:V.error.message});return}g&&(g=!1,b.enqueue({type:"response-metadata",...Tv(V)})),V.usage!=null&&(p={promptTokens:(_=V.usage.prompt_tokens)!=null?_:void 0,completionTokens:(S=V.usage.completion_tokens)!=null?S:void 0});const ae=V.choices[0];if((ae==null?void 0:ae.finish_reason)!=null&&(h=Rv(ae.finish_reason)),(ae==null?void 0:ae.delta)==null)return;const ie=ae.delta;if(ie.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:ie.reasoning_content}),ie.content!=null&&b.enqueue({type:"text-delta",textDelta:ie.content}),ie.tool_calls!=null)for(const te of ie.tool_calls){const X=te.index;if(f[X]==null){if(te.type!=="function")throw new qf({data:te,message:"Expected 'function' type."});if(te.id==null)throw new qf({data:te,message:"Expected 'id' to be a string."});if(((x=te.function)==null?void 0:x.name)==null)throw new qf({data:te,message:"Expected 'function.name' to be a string."});f[X]={id:te.id,type:"function",function:{name:te.function.name,arguments:(E=te.function.arguments)!=null?E:""},hasFinished:!1};const G=f[X];((C=G.function)==null?void 0:C.name)!=null&&((A=G.function)==null?void 0:A.arguments)!=null&&(G.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:G.function.arguments}),I6(G.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=G.id)!=null?O:c2(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0));continue}const ce=f[X];ce.hasFinished||(((I=te.function)==null?void 0:I.arguments)!=null&&(ce.function.arguments+=(z=(D=te.function)==null?void 0:D.arguments)!=null?z:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ce.id,toolName:ce.function.name,argsTextDelta:(W=te.function.arguments)!=null?W:""}),((ee=ce.function)==null?void 0:ee.name)!=null&&((F=ce.function)==null?void 0:F.arguments)!=null&&I6(ce.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=ce.id)!=null?Z:c2(),toolName:ce.function.name,args:ce.function.arguments}),ce.hasFinished=!0))}},flush(v){var b,_;const S=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=p.promptTokens)!=null?b:NaN,completionTokens:(_=p.completionTokens)!=null?_:NaN},...S&&{providerMetadata:S}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:a}}}},qfe=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({message:L.object({role:L.literal("assistant").nullish(),content:L.string().nullish(),reasoning_content:L.string().nullish(),tool_calls:L.array(L.object({id:L.string().nullish(),type:L.literal("function"),function:L.object({name:L.string(),arguments:L.string()})})).nullish()}),finish_reason:L.string().nullish()})),usage:L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish()}).nullish()}),Hfe=e=>L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({delta:L.object({role:L.enum(["assistant"]).nullish(),content:L.string().nullish(),reasoning_content:L.string().nullish(),tool_calls:L.array(L.object({index:L.number(),id:L.string().nullish(),type:L.literal("function").optional(),function:L.object({name:L.string().nullish(),arguments:L.string().nullish()})})).nullish()}).nullish(),finish_reason:L.string().nullish()})),usage:L.object({prompt_tokens:L.number().nullish(),completion_tokens:L.number().nullish()}).nullish()}),e]);function Vfe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new _l({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new _r({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new _r({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new _r({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var Gfe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Hw;this.chunkSchema=Kfe(a.errorSchema),this.failedResponseHandler=Uw(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,providerMetadata:p}){var g;const v=e.type,b=[];o!=null&&b.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:S}=Vfe({prompt:n,inputFormat:t}),x=[...S??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,...p==null?void 0:p[this.providerOptionsName],prompt:_,stop:x.length>0?x:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new _r({functionality:"tools"});if(e.toolChoice)throw new _r({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new _r({functionality:"object-json mode"});case"object-tool":throw new _r({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await mh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ph(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:qw(Wfe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:f,...h}=i,p=u.choices[0];return{text:p.text,usage:{promptTokens:(n=(t=u.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=u.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:Rv(p.finish_reason),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s,body:c},response:Tv(u),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await mh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ph(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:DF(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,p){if(!h.success){u="error",p.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){u="error",p.enqueue({type:"error",error:g.error});return}f&&(f=!1,p.enqueue({type:"response-metadata",...Tv(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(u=Rv(v.finish_reason)),(v==null?void 0:v.text)!=null&&p.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Wfe=L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),Kfe=e=>L.union([L.object({id:L.string().nullish(),created:L.number().nullish(),model:L.string().nullish(),choices:L.array(L.object({text:L.string(),finish_reason:L.string().nullish(),index:L.number()})),usage:L.object({prompt_tokens:L.number(),completion_tokens:L.number()}).nullish()}),e]),Zfe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new Pk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await mh({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:ph(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Uw((r=this.config.errorStructure)!=null?r:Hw),successfulResponseHandler:qw(Yfe),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},Yfe=L.object({data:L.array(L.object({embedding:L.array(L.number())})),usage:L.object({prompt_tokens:L.number()}).nullish()}),Xfe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h,p;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:b,responseHeaders:_}=await mh({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:ph(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:Uw((p=this.config.errorStructure)!=null?p:Hw),successfulResponseHandler:qw(Jfe),abortSignal:s,fetch:this.config.fetch});return{images:b.data.map(S=>S.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:_}}}},Jfe=L.object({data:L.array(L.object({b64_json:L.string()}))});function Qfe(e){const t=Lfe(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:p})=>{const g=new URL(`${t}${p}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,p={})=>o(h,p),o=(h,p={})=>new Ufe(h,p,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,p={})=>new Gfe(h,p,a("completion")),u=(h,p={})=>new Zfe(h,p,a("embedding")),c=(h,p={})=>new Xfe(h,p,a("image")),f=(h,p)=>i(h,p);return f.languageModel=i,f.chatModel=o,f.completionModel=s,f.textEmbeddingModel=u,f.imageModel=c,f}const Jk=e=>e==="openai"||e==="openrouter"||e==="google",Qk=e=>e==="ollama"||e==="openai-compatible",gm=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",jF=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],Of={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},MF=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function ehe(e,t,n){try{switch(e.type){case"openai":return uP({apiKey:n})(t);case"google":return HP({apiKey:n})(t);case"openrouter":return RF({apiKey:n})(t);case"ollama":return NF({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return Qfe({baseURL:MF(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function the(e,t,n){const r=e.type,i=(e.fetchedModels&&e.fetchedModels.length>0?e.fetchedModels:Of[r]||[]).find(c=>c.id===t);if(!i)return;const o=ehe(e,t,n);if(!o)return;const s=e.type==="openai",u=["openai","google","openrouter"].includes(e.type);return{id:`${e.id}:${t}`,name:i.name,providerId:e.id,providerName:e.name,instance:o,supportsImageGeneration:s,supportsToolCalling:u,metadata:i.metadata}}const om=new Map,nhe=5*60*1e3;async function rhe(e,t){const n=`${e.id}-${e.baseURL||""}`,r=om.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,u,c;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":{if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break}case"openrouter":{if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break}case"ollama":{const f=((u=e.baseURL)==null?void 0:u.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",f).toString(),delete o.Authorization;break}case"openai-compatible":{if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const f=MF(e.baseURL);i=new URL("models",f.endsWith("/")?f:f+"/").toString();break}case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(f){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,f),dt.error(`Invalid Base URL for ${e.name}: ${f instanceof Error?f.message:String(f)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const f=await fetch(i,{headers:o});if(!f.ok){let g=`(${f.status} ${f.statusText})`;try{const v=await f.text();try{const b=JSON.parse(v);g=((c=b==null?void 0:b.error)==null?void 0:c.message)||(b==null?void 0:b.message)||v||g}catch{g=v||g}}catch(v){console.warn("[ModelFetcher] Failed to read error response body:",v)}throw new Error(`API Error: ${g}`)}const h=await f.json();let p=[];if(e.type==="ollama")h.models&&Array.isArray(h.models)?p=h.models.map(g=>({id:g.name,name:g.name,metadata:g.details??{}})):console.warn(`[ModelFetcher] Unexpected response structure from Ollama for ${e.name}:`,h);else if(e.type==="openrouter"){const g=h.data||h;Array.isArray(g)?p=g.map(v=>{const{id:b,name:_,...S}=v;return{id:b,name:_||b,metadata:S}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}else{const g=h.data||h;Array.isArray(g)?p=g.map(v=>{const{id:b,name:_,...S}=v;return{id:b,name:_||b,metadata:S}}):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}return p.sort((g,v)=>(g.name||g.id).localeCompare(v.name||v.id)),console.log(`[ModelFetcher] Fetched ${p.length} models for ${e.name}`),p}catch(f){const h=f instanceof Error?f.message:String(f);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),dt.error(`Failed to fetch models for ${e.name}: ${h}`),om.delete(n),[]}})();return om.set(n,a),setTimeout(()=>{om.get(n)===a&&(om.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},nhe),a}const f2="provider:lastModelSelection",O6="provider:globalModelSortOrder",sm=(e,t)=>`${e}:${t}`,ahe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Ai=ql(Hl((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Gt.saveSetting("enableApiKeyManagement",n)},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Gt.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Gt.loadProviderConfigs(),Gt.loadApiKeys(),Gt.loadSetting(O6,[]),Gt.loadSetting(f2,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((p,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{p.push(sm(g.id,v))}),p),[]),u=new Set(s),c=i.filter(p=>u.has(p));e({globalModelSortOrder:c});let f=o;f&&u.has(f)||(f=c[0]??null,f||(f=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${f}`)),e({selectedModelId:f,isLoading:!1}),await Gt.saveSetting(f2,f)}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),dt.error("Failed to load provider data")}},selectModel:n=>{e({selectedModelId:n}),Gt.saveSetting(f2,n)},addApiKey:async(n,r,a)=>{const i=Lo(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Gt.saveApiKey(s),e(u=>{u.dbApiKeys.push(s)}),dt.success(`API Key "${n}" added.`),i}catch(u){throw console.error("ProviderStore: Error adding API key",u),dt.error(`Failed to add API Key: ${u instanceof Error?u.message:String(u)}`),u}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Gt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),dt.success(`API Key "${r}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting API key",i),dt.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=Lo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Gt.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),dt.success(`Provider "${n.name}" added.`),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),dt.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Gt.saveProviderConfig(i),e(h=>{const p=h.dbProviderConfigs.findIndex(g=>g.id===n);p!==-1&&(h.dbProviderConfigs[p]=i)});const o=t().globalModelSortOrder;let s=[...o],u=!1;const c=(i.fetchedModels??Of[i.type]??[]).map(h=>sm(n,h.id)),f=new Set((i.enabledModels??[]).map(h=>sm(n,h)));r.isEnabled===!1?(s=s.filter(h=>!c.includes(h)),u=!0):(r.isEnabled===!0||r.enabledModels)&&(s=s.filter(h=>!c.includes(h)||f.has(h)),f.forEach(h=>{s.includes(h)||s.push(h)}),u=!0),(JSON.stringify(s)!==JSON.stringify(o)||u)&&await t().setGlobalModelSortOrder(s)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),dt.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Gt.deleteProviderConfig(n);const i=(r.fetchedModels??Of[r.type]??[]).map(u=>sm(n,u.id)),s=t().globalModelSortOrder.filter(u=>!i.includes(u));e(u=>{u.dbProviderConfigs=u.dbProviderConfigs.filter(c=>c.id!==n)}),await t().setGlobalModelSortOrder(s),dt.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),dt.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){dt.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(u=>u.id===i))==null?void 0:a.value,s=await rhe(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),dt.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{var s,u;const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Gt.saveSetting(O6,r);const a=t().selectedModelId,i=t().getGloballyEnabledAndOrderedModels(),o=new Set(i.map(c=>c.id));if(a&&!o.has(a)){const c=r.find(f=>o.has(f))??((s=i[0])==null?void 0:s.id)??null;console.log(`[ProviderStore] Selection ${a} invalidated by order change. Selecting ${c}`),t().selectModel(c)}else if(!a&&r.length>0){const c=r.find(f=>o.has(f))??((u=i[0])==null?void 0:u.id)??null;console.log(`[ProviderStore] No selection, selecting first from new order: ${c}`),t().selectModel(c)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=ahe(n);if(!i||!o)return;const s=r.find(c=>c.id===i);if(!s)return;const u=a.find(c=>c.id===s.apiKeyId);return the(s,o,u==null?void 0:u.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=n.type,a=[...n.fetchedModels??(Of[r]||[])];return{id:n.id,name:n.name,type:n.type,allAvailableModels:a}}),getGloballyEnabledAndOrderedModels:()=>{const{dbProviderConfigs:n,globalModelSortOrder:r}=t(),a=new Map,i=new Set;n.forEach(c=>{if(!c.isEnabled||!c.enabledModels)return;const f=c.type,h=c.fetchedModels??Of[f]??[],p=new Map(h.map(g=>[g.id,g]));c.enabledModels.forEach(g=>{const v=sm(c.id,g),b=p.get(g);b&&(i.add(v),a.set(v,{id:v,name:b.name||g,providerId:c.id,providerName:c.name,metadata:b.metadata}))})});const o=[],s=new Set;r.forEach(c=>{if(i.has(c)){const f=a.get(c);f&&!s.has(c)&&(o.push(f),s.add(c))}});const u=Array.from(i).filter(c=>!s.has(c)).map(c=>a.get(c)).filter(c=>!!c).sort((c,f)=>c.name.localeCompare(f.name));return[...o,...u]},getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return[];const a=r.type;return[...r.fetchedModels??(Of[a]||[])].map(i=>({...i}))}})));async function D6(e,t){const n=Na.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const ihe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}};function ohe(){const e=ar.getState(),t=Ai.getState(),n=qr.getState(),{providerId:r}=ihe(t.selectedModelId);return{selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme}}function she(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}const lhe=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"];function uhe(e){try{const t=e.type||"application/octet-stream",n=e.name.toLowerCase(),r=t.startsWith("text/")||t==="application/json"||lhe.some(i=>n.endsWith(i)),a=t.startsWith("image/");if(r&&e.contentText!==void 0)return{type:"text",text:e.contentText};if(a&&e.contentBase64!==void 0)return{type:"image",image:she(e.contentBase64),mimeType:t};if(!r&&e.contentBase64!==void 0)return console.warn(`AIService: Unsupported file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw new Error(`Missing content or unable to determine type for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),dt.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}class vb{static async startInteraction(t,n){var D,z,W,ee,F,Z,V,ae,ie;const r=ar.getState(),a=r.currentConversationId;if(!a)return r.setError("No active conversation."),dt.error("Cannot start interaction: No active conversation."),null;const i=await D6("middleware:interaction:beforeStart",{prompt:t,conversationId:a});if(i===!1)return console.log("AIService: Interaction start cancelled by middleware."),null;const o=i&&typeof i=="object"?i.prompt:t,s=Lo(),u=new AbortController;this.activeStreams.set(s,u);const f=r.interactions.filter(te=>te.conversationId===a),h=f.reduce((te,X)=>Math.max(te,X.index),-1)+1,p=f.length>0?f[f.length-1].id:null,g=[...o.messages];let v=-1;for(let te=g.length-1;te>=0;te--)if(g[te].role==="user"){v=te;break}if(v!==-1&&((D=n.metadata)!=null&&D.attachedFiles)&&n.metadata.attachedFiles.length>0){const te=g[v],X=n.metadata.attachedFiles.map(uhe).filter(G=>G!==null);let ce=[];typeof te.content=="string"?te.content.trim()&&ce.push({type:"text",text:te.content}):Array.isArray(te.content)&&(ce=te.content.filter(G=>G&&typeof G=="object"&&"type"in G&&(G.type==="text"||G.type==="image"))),g[v]={...te,content:[...X,...ce]},console.log(`AIService: Added ${X.length} file(s) to user message content.`)}const b={id:s,conversationId:a,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...o.metadata,attachedFiles:(z=n.metadata.attachedFiles)==null?void 0:z.map(({contentBase64:te,contentText:X,...ce})=>ce),toolCalls:[],toolResults:[]},index:h,parentId:p};r._addInteractionToState(b),r._addStreamingId(s),Gt.saveInteraction({...b}).catch(te=>{console.error(`AIService: Failed initial persistence for ${s}`,te)}),Ei.emit("interaction:started",{interactionId:s,conversationId:a,type:b.type});let _,S="ERROR",x,E,C,A;const O=[],I=[];try{const te=(W=Ai.getState().getSelectedModel())==null?void 0:W.instance;if(!te)throw new Error("Selected model instance not available.");const X=Na.getState().getRegisteredTools(),G=(((ee=o.metadata)==null?void 0:ee.enabledTools)??[]).reduce((re,be)=>{const _e=X[be];if(_e){const Ie={..._e.definition};_e.implementation&&(Ie.execute=async Pe=>{try{const Re=ohe(),ke=_e.definition.parameters.parse(Pe),ze=_e.implementation;return await ze(ke,Re)}catch(Re){console.error(`[AIService] Error executing tool ${be} via SDK:`,Re);const ke=Re instanceof Error?Re.message:String(Re);return Re instanceof L.ZodError?{_isError:!0,error:`Invalid arguments: ${Re.errors.map(ze=>`${ze.path.join(".")} (${ze.message})`).join(", ")}`}:{_isError:!0,error:ke}}}),re[be]=Ie}return re},{}),Q=((F=o.parameters)==null?void 0:F.maxSteps)??qr.getState().toolMaxSteps,Y={model:te,messages:g,abortSignal:u.signal,maxSteps:Q};Object.keys(G).length>0&&(Y.tools=G),Y.toolChoice=o.toolChoice??(Object.keys(G).length>0?"auto":"none"),o.system&&(Y.system=o.system),o.parameters&&(o.parameters.temperature!==void 0&&(Y.temperature=o.parameters.temperature),o.parameters.max_tokens!==void 0&&(Y.maxTokens=o.parameters.max_tokens),o.parameters.top_p!==void 0&&(Y.topP=o.parameters.top_p),o.parameters.top_k!==void 0&&(Y.topK=o.parameters.top_k),o.parameters.presence_penalty!==void 0&&(Y.presencePenalty=o.parameters.presence_penalty),o.parameters.frequency_penalty!==void 0&&(Y.frequencyPenalty=o.parameters.frequency_penalty)),console.log(`AIService: Calling streamText with options for ${s}:`,{model:Y.model,messages:JSON.stringify(Y.messages),system:Y.system,temperature:Y.temperature,maxTokens:Y.maxTokens,topP:Y.topP,topK:Y.topK,presencePenalty:Y.presencePenalty,frequencyPenalty:Y.frequencyPenalty,toolChoice:Y.toolChoice,tools:Y.tools?Object.keys(Y.tools):void 0,maxSteps:Y.maxSteps}),_=await fue(Y);for await(const re of _.fullStream){if(u.signal.aborted)throw console.log(`AIService: Stream ${s} aborted by signal.`),A="stop",new Error("Stream aborted by user.");switch(re.type){case"text-delta":{const be={interactionId:s,chunk:re.textDelta},_e=await D6("middleware:interaction:processChunk",be);if(_e!==!1){const Ie=_e&&typeof _e=="object"&&"chunk"in _e?_e.chunk:re.textDelta;ar.getState().appendInteractionResponseChunk(s,Ie),Ei.emit("interaction:stream_chunk",{interactionId:s,chunk:Ie})}break}case"tool-call":{const be=JSON.stringify(re);O.push(be),ar.getState()._updateInteractionInState(s,{metadata:{...(Z=ar.getState().interactions.find(_e=>_e.id===s))==null?void 0:Z.metadata,toolCalls:[...O]}}),console.log(`[AIService] Tool call observed: ${re.toolName}`,re.args);break}case"tool-result":{const be=JSON.stringify(re);I.push(be),ar.getState()._updateInteractionInState(s,{metadata:{...(V=ar.getState().interactions.find(_e=>_e.id===s))==null?void 0:V.metadata,toolResults:[...I]}}),console.log(`[AIService] Tool result observed for ${re.toolName} (Call ID: ${re.toolCallId})`,re.result);break}case"finish":console.log("[AIService] Stream finish part received:",re),A=re.finishReason,E=re.usage,C=re.providerMetadata;break;case"error":throw console.error("[AIService] Stream error part:",re.error),A="error",new Error(`AI Stream Error: ${re.error instanceof Error?re.error.message:re.error}`);case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"file":case"tool-call-streaming-start":case"tool-call-delta":case"step-start":case"step-finish":break}}if(u.signal.aborted)throw A="stop",new Error("Stream aborted by user.");A===void 0&&(console.warn(`[AIService] Stream loop finished for ${s} without receiving a 'finish' part.`),A="other")}catch(te){console.error(`AIService: Error during interaction ${s}:`,te);const X=te instanceof Error&&te.message==="Stream aborted by user.";A=A??(X?"stop":"error"),x=X?void 0:te instanceof Error?te.message:String(te),X?(console.log(`AIService: Interaction ${s} cancelled.`),dt.info("Interaction cancelled.")):dt.error(`AI Interaction Error: ${x}`)}finally{this.activeStreams.delete(s);const te=ar.getState().activeStreamBuffers[s]||"";switch(A){case"stop":case"length":case"tool-calls":S="COMPLETED";break;case"error":S="ERROR";break;case"other":default:te.trim()||O.length>0?(S="COMPLETED",console.warn(`[AIService] Interaction ${s} finished with reason '${A||"unknown"}', but content exists. Marking COMPLETED.`)):(S="WARNING",x=x??"Stream ended unexpectedly without output.",console.warn(`[AIService] Interaction ${s} finished with reason '${A||"unknown"}' and no content. Marking WARNING.`));break}const X=((ae=ar.getState().interactions.find(re=>re.id===s))==null?void 0:ae.metadata)||b.metadata,ce={status:S,endedAt:new Date,response:te,metadata:{...X,...E&&{promptTokens:E.promptTokens,completionTokens:E.completionTokens,totalTokens:E.totalTokens},...C&&{providerMetadata:C},...(S==="ERROR"||S==="WARNING")&&{error:x},toolCalls:O,toolResults:I,attachedFiles:(ie=b.metadata.attachedFiles)==null?void 0:ie.map(({contentBase64:re,contentText:be,..._e})=>_e)}};ar.getState()._updateInteractionInState(s,ce),ar.getState()._removeStreamingId(s);const G=ar.getState().interactions.find(re=>re.id===s);G?ar.getState().updateInteractionAndPersist({...G}).catch(re=>{console.error(`AIService: Failed final persistence for ${s}`,re)}):console.error(`AIService: CRITICAL - Could not find final state for interaction ${s} to persist after updates. State might be inconsistent.`);let Q=[],Y=[];try{Q=O.map(re=>JSON.parse(re)),Y=I.map(re=>JSON.parse(re))}catch(re){console.error("[AIService] Failed to parse tool strings for event emitter:",re)}Ei.emit("interaction:completed",{interactionId:s,status:S,error:x??void 0,toolCalls:Q,toolResults:Y}),console.log(`AIService: Finalized interaction ${s} with status ${S}.`)}return s}static stopInteraction(t){const n=this.activeStreams.get(t),r=ar.getState();if(n&&!n.signal.aborted)console.log(`AIService: Aborting interaction ${t}...`),n.abort();else{console.log(`AIService: No active controller found or already aborted for interaction ${t}. Attempting store cleanup if needed.`);const a=r.interactions.find(i=>i.id===t);if(a&&a.status==="STREAMING"&&(!n||n.signal.aborted)){console.warn(`AIService: Forcing CANCELLED status for interaction ${t} without active controller or already aborted.`);const i=r.activeStreamBuffers[t]||"",o={status:"CANCELLED",endedAt:new Date,response:i};r._updateInteractionInState(t,o),r._removeStreamingId(t);const s=ar.getState().interactions.find(u=>u.id===t);s&&r.updateInteractionAndPersist({...s}).catch(u=>{console.error(`AIService: Failed persistence for forced cancel of ${t}`,u)})}}}}Ha(vb,"activeStreams",new Map);const d0=ql(Hl((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Gt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),dt.error(r)}},addDbMod:async n=>{const r=Lo(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Gt.saveMod(a),dt.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(u=>u.id!==r),s.error=o}),dt.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(u=>u.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Gt.saveMod(o),dt.success(`Mod "${o.name}" updated.`)}catch(s){const u="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(c=>{const f=c.dbMods.findIndex(h=>h.id===n);f!==-1&&a&&(c.dbMods[f]=a,c.dbMods.sort((h,p)=>h.loadOrder-p.loadOrder)),c.error=u}),dt.error(u),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Gt.deleteMod(n),dt.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder),s.error=o}),dt.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}}))),che=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}};function j6(e){const t=e.id,n=e.name,r=Na.getState(),a=d0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>r.registerChatControl(o),registerTool:(o,s,u)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,u)),on:(o,s)=>(Ei.on(o,s),()=>Ei.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=ar.getState(),s=So.getState(),u=qr.getState(),c=Ai.getState(),{providerId:f}=che(c.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(p=>Object.freeze({...p})):[]),isStreaming:o.status==="streaming",selectedProviderId:f,selectedModelId:c.selectedModelId,activeSystemPrompt:u.globalSystemPrompt,temperature:u.temperature,maxTokens:u.maxTokens,theme:u.theme})},showToast:(o,s)=>{dt[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function dhe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=j6(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(u){o=u instanceof Error?u:String(u),console.error(`[ModLoader] Error loading mod "${r.name}":`,u),dt.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=j6(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ei.emit(s.error?"mod:error":"mod:loaded",{id:r.id,name:r.name,error:s.error}),s}));return Ei.emit("app:loaded",void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var fhe=(e,t,n,r,a,i,o,s)=>{let u=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",_=b&&i?a.map(S=>i[S]||S):a;b?(u.classList.remove(..._),u.classList.add(i&&i[g]?i[g]:g)):u.setAttribute(v,g)}),h(g)}function h(g){s&&c.includes(g)&&(u.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?p():g;f(v)}catch{}},hhe=R.createContext(void 0),phe={setTheme:e=>{},themes:[]},mhe=()=>{var e;return(e=R.useContext(hhe))!=null?e:phe};R.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:u,scriptProps:c})=>{let f=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return R.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${fhe.toString()})(${f})`}})});const ghe=({...e})=>{const{theme:t="system"}=mhe();return y.jsx(qH,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function eA({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:Nt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const PF=R.memo(R.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)"},a)=>{const i=R.useRef(null),[o,s]=R.useState(e);R.useImperativeHandle(a,()=>({getValue:()=>o,focus:()=>{var p;return(p=i.current)==null?void 0:p.focus()}}));const{focusInputOnNextRender:u,setFocusInputFlag:c}=Wi(Bn(p=>({focusInputOnNextRender:p.focusInputOnNextRender,setFocusInputFlag:p.setFocusInputFlag})));R.useEffect(()=>{u&&i.current&&(c(!1),requestAnimationFrame(()=>{var p;(p=i.current)==null||p.focus()}))},[u,c]);const f=p=>{p.key==="Enter"&&!p.shiftKey&&!n&&(p.preventDefault(),t())},h=p=>{s(p.target.value)};return R.useEffect(()=>{const p=i.current;if(p){p.style.height="auto";const g=p.scrollHeight,v=250;p.style.height=`${Math.min(g,v)}px`}},[o]),R.useEffect(()=>{s(e)},[e]),y.jsx(eA,{ref:i,value:o,onChange:h,onKeyDown:f,disabled:n,placeholder:r,rows:3,className:Nt("w-full p-3 border border-[--border] rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-[--primary] outline-none disabled:opacity-50 overflow-y-auto","min-h-[80px] max-h-[250px]"),"aria-label":"Chat input"})}));PF.displayName="InputArea";var yhe=R.createContext(void 0);function $h(e){const t=R.useContext(yhe);return e||t||"ltr"}function f0(e,[t,n]){return Math.min(n,Math.max(t,e))}function bhe(e,t){return R.useReducer((n,r)=>t[n][r]??n,e)}var tA="ScrollArea",[FF,J1e]=di(tA),[vhe,Ao]=FF(tA),LF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,u]=R.useState(null),[c,f]=R.useState(null),[h,p]=R.useState(null),[g,v]=R.useState(null),[b,_]=R.useState(null),[S,x]=R.useState(0),[E,C]=R.useState(0),[A,O]=R.useState(!1),[I,D]=R.useState(!1),z=_n(t,ee=>u(ee)),W=$h(a);return y.jsx(vhe,{scope:n,type:r,dir:W,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:f,content:h,onContentChange:p,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:A,onScrollbarXEnabledChange:O,scrollbarY:b,onScrollbarYChange:_,scrollbarYEnabled:I,onScrollbarYEnabledChange:D,onCornerWidthChange:x,onCornerHeightChange:C,children:y.jsx(Jt.div,{dir:W,...o,ref:z,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});LF.displayName=tA;var $F="ScrollAreaViewport",BF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Ao($F,n),s=R.useRef(null),u=_n(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(Jt.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});BF.displayName=$F;var Gs="ScrollAreaScrollbar",zF=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Gs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return R.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(whe,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(_he,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(UF,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(nA,{...r,ref:t}):null});zF.displayName=Gs;var whe=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Gs,e.__scopeScrollArea),[i,o]=R.useState(!1);return R.useEffect(()=>{const s=a.scrollArea;let u=0;if(s){const c=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Ia,{present:n||i,children:y.jsx(UF,{"data-state":i?"visible":"hidden",...r,ref:t})})}),_he=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Ao(Gs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Gw(()=>u("SCROLL_END"),100),[s,u]=bhe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return R.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,u]),R.useEffect(()=>{const c=a.viewport,f=i?"scrollLeft":"scrollTop";if(c){let h=c[f];const p=()=>{const g=c[f];h!==g&&(u("SCROLL"),o()),h=g};return c.addEventListener("scroll",p),()=>c.removeEventListener("scroll",p)}},[a.viewport,i,u,o]),y.jsx(Ia,{present:n||s!=="hidden",children:y.jsx(nA,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ft(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ft(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),UF=R.forwardRef((e,t)=>{const n=Ao(Gs,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=R.useState(!1),s=e.orientation==="horizontal",u=Gw(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?c:f)}},10);return gh(n.viewport,u),gh(n.content,u),y.jsx(Ia,{present:r||i,children:y.jsx(nA,{"data-state":i?"visible":"hidden",...a,ref:t})})}),nA=R.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Ao(Gs,e.__scopeScrollArea),i=R.useRef(null),o=R.useRef(0),[s,u]=R.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=WF(s.viewport,s.content),f={...r,sizes:s,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,g){return Ahe(p,o.current,s,g)}return n==="horizontal"?y.jsx(xhe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollLeft,g=M6(p,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=h(p,a.dir))}}):n==="vertical"?y.jsx(She,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollTop,g=M6(p,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=h(p))}}):null}),xhe=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ao(Gs,e.__scopeScrollArea),[o,s]=R.useState(),u=R.useRef(null),c=_n(t,u,i.onScrollbarXChange);return R.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(HF,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Vw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),ZF(p,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Iv(o.paddingLeft),paddingEnd:Iv(o.paddingRight)}})}})}),She=R.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Ao(Gs,e.__scopeScrollArea),[o,s]=R.useState(),u=R.useRef(null),c=_n(t,u,i.onScrollbarYChange);return R.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(HF,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Vw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const p=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),ZF(p,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Iv(o.paddingTop),paddingEnd:Iv(o.paddingBottom)}})}})}),[Ehe,qF]=FF(Gs),HF=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:f,onResize:h,...p}=e,g=Ao(Gs,n),[v,b]=R.useState(null),_=_n(t,z=>b(z)),S=R.useRef(null),x=R.useRef(""),E=g.viewport,C=r.content-r.viewport,A=Ca(f),O=Ca(u),I=Gw(h,10);function D(z){if(S.current){const W=z.clientX-S.current.left,ee=z.clientY-S.current.top;c({x:W,y:ee})}}return R.useEffect(()=>{const z=W=>{const ee=W.target;(v==null?void 0:v.contains(ee))&&A(W,C)};return document.addEventListener("wheel",z,{passive:!1}),()=>document.removeEventListener("wheel",z,{passive:!1})},[E,v,C,A]),R.useEffect(O,[r,O]),gh(v,I),gh(g.content,I),y.jsx(Ehe,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ca(i),onThumbPointerUp:Ca(o),onThumbPositionChange:O,onThumbPointerDown:Ca(s),children:y.jsx(Jt.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:Ft(e.onPointerDown,z=>{z.button===0&&(z.target.setPointerCapture(z.pointerId),S.current=v.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),D(z))}),onPointerMove:Ft(e.onPointerMove,D),onPointerUp:Ft(e.onPointerUp,z=>{const W=z.target;W.hasPointerCapture(z.pointerId)&&W.releasePointerCapture(z.pointerId),document.body.style.webkitUserSelect=x.current,g.viewport&&(g.viewport.style.scrollBehavior=""),S.current=null})})})}),Nv="ScrollAreaThumb",VF=R.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=qF(Nv,e.__scopeScrollArea);return y.jsx(Ia,{present:n||a.hasThumb,children:y.jsx(Che,{ref:t,...r})})}),Che=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Ao(Nv,n),o=qF(Nv,n),{onThumbPositionChange:s}=o,u=_n(t,h=>o.onThumbChange(h)),c=R.useRef(void 0),f=Gw(()=>{c.current&&(c.current(),c.current=void 0)},100);return R.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(f(),!c.current){const g=The(h,s);c.current=g,s()}};return s(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,f,s]),y.jsx(Jt.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ft(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;o.onThumbPointerDown({x:v,y:b})}),onPointerUp:Ft(e.onPointerUp,o.onThumbPointerUp)})});VF.displayName=Nv;var rA="ScrollAreaCorner",GF=R.forwardRef((e,t)=>{const n=Ao(rA,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(khe,{...e,ref:t}):null});GF.displayName=rA;var khe=R.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Ao(rA,n),[i,o]=R.useState(0),[s,u]=R.useState(0),c=!!(i&&s);return gh(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),gh(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),c?y.jsx(Jt.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Iv(e){return e?parseInt(e,10):0}function WF(e,t){const n=e/t;return isNaN(n)?0:n}function Vw(e){const t=WF(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Ahe(e,t,n,r="ltr"){const a=Vw(n),i=a/2,o=t||i,s=a-o,u=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return KF([u,c],h)(e)}function M6(e,t,n="ltr"){const r=Vw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,u=n==="ltr"?[0,o]:[o*-1,0],c=f0(e,u);return KF([0,o],[0,s])(c)}function KF(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function ZF(e,t){return e>0&&e<t}var The=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Gw(e,t){const n=Ca(e),r=R.useRef(0);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),R.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function gh(e,t){const n=Ca(t);$a(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Rhe=LF,Nhe=BF,Ihe=GF;function og({className:e,children:t,...n}){return y.jsxs(Rhe,{"data-slot":"scroll-area",className:Nt("relative",e),...n,children:[y.jsx(Nhe,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(Ohe,{}),y.jsx(Ihe,{})]})}function Ohe({className:e,orientation:t="vertical",...n}){return y.jsx(zF,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Nt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(VF,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function fr({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:Nt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const Dhe=(e,t)=>{if(!t)return null;let n=lC,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Zn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Ps,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=Ps,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=Tb,r="text-green-500",a=`Synced with ${t}`;break}return y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(n,{className:Nt("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(Rn,{side:"right",children:a})]})})},Ov=R.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:S,setLocalEditingName:x,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I})=>{const D=e.id===n,z=e.itemType==="project",W=e.id===v&&e.itemType===b,ee=z&&f.has(e.id),{projects:F,conversations:Z}=z?p(e.id,g):{projects:[],conversations:[]},V=F.length>0||Z.length>0,ae=!z&&e.syncRepoId?r[e.id]:void 0,ie=!z&&e.syncRepoId?a.get(e.syncRepoId):void 0,te=!z&&ie?Dhe(ae,ie):null,X=()=>{W||(z&&V&&h(e.id),i(e.id,e.itemType))},ce=re=>{re.stopPropagation(),z?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,re):o(e.id,re)},G=re=>{re.stopPropagation(),E(e)},Q=re=>{re.key==="Enter"?(re.preventDefault(),C()):re.key==="Escape"&&A(z&&_==="New Project")};R.useEffect(()=>{var re,be;W&&((re=I.current)==null||re.focus(),(be=I.current)==null||be.select())},[W,I]);const Y=z?e.name:e.title;return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:Nt("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!W&&"hover:bg-muted/50 hover:text-primary/80",D&&!W?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",W&&"bg-muted ring-1 ring-primary",!W&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:X,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[z&&V&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:re=>{re.stopPropagation(),h(e.id)},children:ee?y.jsx(Kv,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(iC,{className:"h-3 w-3 text-muted-foreground"})}),z&&!V&&y.jsx("span",{className:"w-3 flex-shrink-0"}),z?y.jsx(Yv,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(Nq,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),W?y.jsx(fr,{ref:I,value:S,onChange:re=>x(re.target.value),onKeyDown:Q,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:re=>re.stopPropagation(),disabled:O}):y.jsx("span",{className:"truncate pr-1",children:Y}),te]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:W?y.jsxs(y.Fragment,{children:[y.jsx(zt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-green-500 hover:text-green-600",onClick:re=>{re.stopPropagation(),C()},disabled:O||!S.trim()||S.trim()===_,"aria-label":"Save changes",children:O?y.jsx(Zn,{className:"h-3 w-3 animate-spin"}):y.jsx(wo,{className:"h-3 w-3"})}),y.jsx(zt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:re=>{re.stopPropagation(),A(z&&_==="New Project")},disabled:O,"aria-label":"Cancel edit",children:y.jsx(Us,{className:"h-3 w-3"})})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:G,"aria-label":`Edit ${Y}`,children:y.jsx(uC,{className:"h-3 w-3"})})}),y.jsx(Rn,{side:"top",children:"Edit"})]})}),z?y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:re=>c(e.id,re),"aria-label":`Export project ${Y}`,children:y.jsx(ZU,{className:"h-3 w-3"})})}),y.jsx(Rn,{side:"top",children:"Export Project (JSON)"})]})}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx("div",{className:"p-1 rounded hover:bg-muted cursor-pointer","aria-label":`Export ${Y}`,children:y.jsx(Rb,{className:"h-3 w-3 text-muted-foreground group-hover/export:text-foreground"})})}),y.jsx(Rn,{side:"top",children:"Export Conversation"})]})}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:re=>re.stopPropagation(),children:[y.jsx(zt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:re=>u(e.id,"json",re),children:"JSON"}),y.jsx(zt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:re=>u(e.id,"md",re),children:"MD"})]})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:ce,"aria-label":`Delete ${Y}`,children:y.jsx(qu,{className:"h-3 w-3"})})}),y.jsx(Rn,{side:"top",children:"Delete"})]})})]})})]},e.id),z&&ee&&y.jsxs(y.Fragment,{children:[F.sort((re,be)=>be.updatedAt.getTime()-re.updatedAt.getTime()).map(re=>y.jsx(Ov,{item:{...re,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:S,setLocalEditingName:x,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I},re.id)),Z.sort((re,be)=>be.updatedAt.getTime()-re.updatedAt.getTime()).map(re=>y.jsx(Ov,{item:{...re,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,editingName:_,localEditingName:S,setLocalEditingName:x,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I},re.id))]})]})});Ov.displayName="ConversationItemRenderer";const jhe=({updateProject:e,updateConversation:t,deleteProject:n})=>{const[r,a]=R.useState(null),[i,o]=R.useState(null),[s,u]=R.useState(""),[c,f]=R.useState(""),[h,p]=R.useState(!1),g=R.useRef(null),v=R.useCallback(x=>{a(x.id),o(x.itemType);const E=x.itemType==="project"?x.name:x.title;u(E),f(E),p(!1)},[]),b=R.useCallback(()=>{a(null),o(null),u(""),f(""),p(!1)},[]),_=R.useCallback(async()=>{if(!r||!i||h)return;const x=c.trim();if(!x||x===s){x||dt.error("Name cannot be empty."),b();return}p(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),b()}catch(E){console.error("Failed to save edit:",E),p(!1)}},[r,i,c,s,h,e,t,b]),S=R.useCallback((x=!1)=>{x&&i==="project"&&s==="New Project"&&r&&n(r).catch(E=>{console.error("Failed to delete new project on cancel:",E),dt.error("Failed to clean up new project.")}),b()},[r,i,s,n,b]);return{editingItemId:r,editingItemType:i,editingName:s,localEditingName:c,setLocalEditingName:f,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:_,handleCancelEdit:S}},DE=(e,t,n,r,a,i,o,s,u)=>{if(!n)return!0;const c=`${t}-${e}`;if(u[c]!==void 0)return u[c];let f=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))f=!0;else{const p=s.get(e)||[],g=o.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){f=!0;break}if(!f){for(const v of p)if(DE(v.id,"project",n,r,a,i,o,s,u)){f=!0;break}}}}return u[c]=f,f},Mhe=()=>{const{conversations:e,projects:t,selectItem:n,selectedItemId:r,selectedItemType:a,addConversation:i,updateConversation:o,deleteConversation:s,addProject:u,updateProject:c,deleteProject:f,exportConversation:h,exportProject:p,isLoading:g,syncRepos:v,conversationSyncStatus:b,getConversationById:_,getProjectById:S}=So(Bn(Oe=>({conversations:Oe.conversations,projects:Oe.projects,selectItem:Oe.selectItem,selectedItemId:Oe.selectedItemId,selectedItemType:Oe.selectedItemType,addConversation:Oe.addConversation,updateConversation:Oe.updateConversation,deleteConversation:Oe.deleteConversation,addProject:Oe.addProject,updateProject:Oe.updateProject,deleteProject:Oe.deleteProject,exportConversation:Oe.exportConversation,exportProject:Oe.exportProject,isLoading:Oe.isLoading,syncRepos:Oe.syncRepos,conversationSyncStatus:Oe.conversationSyncStatus,getConversationById:Oe.getConversationById,getProjectById:Oe.getProjectById}))),x=Wi(Oe=>Oe.setFocusInputFlag),[E,C]=vt.useState(new Set),[A,O]=R.useState(""),{editingItemId:I,editingItemType:D,editingName:z,localEditingName:W,setLocalEditingName:ee,isSavingEdit:F,editInputRef:Z,handleStartEditing:V,handleSaveEdit:ae,handleCancelEdit:ie}=jhe({updateProject:c,updateConversation:o,deleteProject:f,getProjectById:S,getConversationById:_}),te=R.useCallback(Oe=>{C(Te=>{const B=new Set(Te);return B.has(Oe)?B.delete(Oe):B.add(Oe),B})},[]),X=R.useCallback(()=>{if(a==="project")return r;if(a==="conversation"&&r){const Oe=_(r);return(Oe==null?void 0:Oe.projectId)??null}return null},[r,a,_]),ce=R.useCallback(async()=>{if(!I)try{const Oe=X(),Te=await i({title:"New Chat",projectId:Oe});n(Te,"conversation"),setTimeout(()=>x(!0),0)}catch(Oe){console.error("Failed to create new chat:",Oe),dt.error("Failed to create new chat.")}},[I,X,i,n,x]),G=R.useCallback(async()=>{if(!I)try{const Oe=X(),Te=await u({name:"New Project",parentId:Oe});n(Te,"project"),C(B=>new Set(B).add(Te)),setTimeout(()=>{const B=S(Te);B?V({...B,itemType:"project"}):(console.warn("New project data not found immediately, using fallback"),V({id:Te,itemType:"project",name:"New Project",parentId:Oe,createdAt:new Date,updatedAt:new Date,path:"/New Project"}))},50)}catch(Oe){console.error("Failed to create new project:",Oe)}},[I,X,u,n,S,V]),Q=R.useCallback((Oe,Te)=>{Oe!==I&&(I&&Oe!==I&&(W.trim()&&W.trim()!==z?ae():ie(D==="project"&&z==="New Project")),!(Oe===r&&Te===a)&&(n(Oe,Te),Te==="conversation"&&setTimeout(()=>x(!0),0)))},[I,D,z,W,r,a,ae,ie,n,x]),Y=R.useCallback((Oe,Te)=>{Te.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&s(Oe).catch(B=>{console.error("Failed to delete conversation:",B),dt.error("Failed to delete conversation.")})},[s]),re=R.useCallback((Oe,Te)=>{Te.stopPropagation(),f(Oe).catch(B=>{console.error("Failed to delete project:",B),dt.error("Failed to delete project.")})},[f]),be=R.useCallback(async(Oe,Te,B)=>{B.stopPropagation();try{await h(Oe,Te)}catch(Ce){console.error(`Failed to export conversation as ${Te}:`,Ce)}},[h]),_e=R.useCallback(async(Oe,Te)=>{Te.stopPropagation();try{await p(Oe)}catch(B){console.error("Failed to export project:",B)}},[p]),Ie=R.useMemo(()=>new Map(v.map(Oe=>[Oe.id,Oe.name])),[v]),{projectsById:Pe,conversationsByProjectId:Re,projectsByParentId:ke}=R.useMemo(()=>{const Oe=new Map(t.map(Ce=>[Ce.id,Ce])),Te=new Map;e.forEach(Ce=>{const Ne=Ce.projectId??null;Te.has(Ne)||Te.set(Ne,[]),Te.get(Ne).push(Ce)});const B=new Map;return t.forEach(Ce=>{const Ne=Ce.parentId??null;B.has(Ne)||B.set(Ne,[]),B.get(Ne).push(Ce)}),{projectsById:Oe,conversationsByProjectId:Te,projectsByParentId:B}},[t,e]),ze=R.useCallback((Oe,Te)=>{const B=Te.toLowerCase(),Ce={},Ne=(ke.get(Oe)||[]).filter(oe=>DE(oe.id,"project",B,t,e,Pe,Re,ke,Ce)),de=(Re.get(Oe)||[]).filter(oe=>oe.title.toLowerCase().includes(B));return Ne.sort((oe,J)=>J.updatedAt.getTime()-oe.updatedAt.getTime()),de.sort((oe,J)=>J.updatedAt.getTime()-oe.updatedAt.getTime()),{projects:Ne,conversations:de}},[t,e,Pe,Re,ke]),it=R.useMemo(()=>{const Oe=A.toLowerCase(),Te={},B=(ke.get(null)||[]).filter(de=>DE(de.id,"project",Oe,t,e,Pe,Re,ke,Te)),Ce=(Re.get(null)||[]).filter(de=>de.title.toLowerCase().includes(Oe)),Ne=[...B.map(de=>({...de,itemType:"project"})),...Ce.map(de=>({...de,itemType:"conversation"}))];return Ne.sort((de,oe)=>oe.updatedAt.getTime()-de.updatedAt.getTime()),Ne},[t,e,A,Pe,Re,ke]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{size:"sm",variant:"ghost",onClick:G,"aria-label":"New Project",disabled:g||!!I,className:"h-7 w-7 p-0",children:y.jsx(sC,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"bottom",children:"New Project"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{size:"sm",variant:"ghost",onClick:ce,"aria-label":"New Chat",disabled:g||!!I,className:"h-7 w-7 p-0",children:y.jsx(Xv,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(Qv,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(fr,{type:"search",placeholder:"Filter...",value:A,onChange:Oe=>O(Oe.target.value),className:"h-8 text-xs pl-8",disabled:g})]}),y.jsx(og,{className:"flex-grow",children:g?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"})]}):it.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:A.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:it.map(Oe=>y.jsx(Ov,{item:Oe,level:0,selectedItemId:r,conversationSyncStatus:b,repoNameMap:Ie,onSelectItem:Q,onDeleteConversation:Y,onDeleteProject:re,onExportConversation:be,onExportProject:_e,expandedProjects:E,toggleProjectExpansion:te,getChildren:ze,filterText:A,editingItemId:I,editingItemType:D,editingName:z,localEditingName:W,setLocalEditingName:ee,handleStartEditing:V,handleSaveEdit:ae,handleCancelEdit:ie,isSavingEdit:F,editInputRef:Z},Oe.id))})})]})},Phe=()=>{const{addConversation:e,addProject:t,selectItem:n,selectedItemId:r,selectedItemType:a,getConversationById:i}=So(Bn(f=>({addConversation:f.addConversation,addProject:f.addProject,selectItem:f.selectItem,selectedItemId:f.selectedItemId,selectedItemType:f.selectedItemType,getConversationById:f.getConversationById}))),o=Wi(f=>f.setFocusInputFlag),s=()=>{if(a==="project")return r;if(a==="conversation"&&r){const f=i(r);return(f==null?void 0:f.projectId)??null}return null},u=async()=>{try{const f=s(),h=await e({title:"New Chat",projectId:f});n(h,"conversation"),setTimeout(()=>o(!0),0)}catch(f){console.error("Failed to create new chat:",f)}},c=async()=>{try{const f=s(),h=await t({name:"New Project",parentId:f});n(h,"project")}catch(f){console.error("Failed to create new project:",f)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(sC,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"right",children:"New Project"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(Xv,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"right",children:"New Chat"})]})})]})},Fhe=()=>{const e=Na(n=>n.registerChatControl),t=So(n=>n.isLoading);return vt.useEffect(()=>e({id:"core-conversation-list",status:()=>t?"loading":"ready",panel:"sidebar",renderer:()=>y.jsx(Mhe,{}),iconRenderer:()=>y.jsx(Phe,{}),show:()=>!0,order:10}),[e,t]),null};var h2="focusScope.autoFocusOnMount",p2="focusScope.autoFocusOnUnmount",P6={bubbles:!1,cancelable:!0},Lhe="FocusScope",sg=R.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,u]=R.useState(null),c=Ca(a),f=Ca(i),h=R.useRef(null),p=_n(t,b=>u(b)),g=R.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;R.useEffect(()=>{if(r){let b=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:Du(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||Du(h.current,{select:!0}))},S=function(E){if(document.activeElement===document.body)for(const A of E)A.removedNodes.length>0&&Du(s)};document.addEventListener("focusin",b),document.addEventListener("focusout",_);const x=new MutationObserver(S);return s&&x.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",_),x.disconnect()}}},[r,s,g.paused]),R.useEffect(()=>{if(s){L6.add(g);const b=document.activeElement;if(!s.contains(b)){const S=new CustomEvent(h2,P6);s.addEventListener(h2,c),s.dispatchEvent(S),S.defaultPrevented||($he(Hhe(YF(s)),{select:!0}),document.activeElement===b&&Du(s))}return()=>{s.removeEventListener(h2,c),setTimeout(()=>{const S=new CustomEvent(p2,P6);s.addEventListener(p2,f),s.dispatchEvent(S),S.defaultPrevented||Du(b??document.body,{select:!0}),s.removeEventListener(p2,f),L6.remove(g)},0)}}},[s,c,f,g]);const v=R.useCallback(b=>{if(!n&&!r||g.paused)return;const _=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,S=document.activeElement;if(_&&S){const x=b.currentTarget,[E,C]=Bhe(x);E&&C?!b.shiftKey&&S===C?(b.preventDefault(),n&&Du(E,{select:!0})):b.shiftKey&&S===E&&(b.preventDefault(),n&&Du(C,{select:!0})):S===x&&b.preventDefault()}},[n,r,g.paused]);return y.jsx(Jt.div,{tabIndex:-1,...o,ref:p,onKeyDown:v})});sg.displayName=Lhe;function $he(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Du(r,{select:t}),document.activeElement!==n)return}function Bhe(e){const t=YF(e),n=F6(t,e),r=F6(t.reverse(),e);return[n,r]}function YF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function F6(e,t){for(const n of e)if(!zhe(n,{upTo:t}))return n}function zhe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Uhe(e){return e instanceof HTMLInputElement&&"select"in e}function Du(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Uhe(e)&&t&&e.select()}}var L6=qhe();function qhe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=$6(e,t),e.unshift(t)},remove(t){var n;e=$6(e,t),(n=e[0])==null||n.resume()}}}function $6(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Hhe(e){return e.filter(t=>t.tagName!=="A")}var m2=0;function Ww(){R.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??B6()),document.body.insertAdjacentElement("beforeend",e[1]??B6()),m2++,()=>{m2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),m2--}},[])}function B6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ns=function(){return Ns=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ns.apply(this,arguments)};function XF(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Vhe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var wb="right-scroll-bar-position",_b="width-before-scroll-bar",Ghe="with-scroll-bars-hidden",Whe="--removed-body-scroll-bar-size";function g2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Khe(e,t){var n=R.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Zhe=typeof window<"u"?R.useLayoutEffect:R.useEffect,z6=new WeakMap;function Yhe(e,t){var n=Khe(null,function(r){return e.forEach(function(a){return g2(a,r)})});return Zhe(function(){var r=z6.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||g2(s,null)}),i.forEach(function(s){a.has(s)||g2(s,o)})}z6.set(n,e)},[e]),n}function Xhe(e){return e}function Jhe(e,t){t===void 0&&(t=Xhe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var u=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return a}function Qhe(e){e===void 0&&(e={});var t=Jhe(null);return t.options=Ns({async:!0,ssr:!1},e),t}var JF=function(e){var t=e.sideCar,n=XF(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return R.createElement(r,Ns({},n))};JF.isSideCarExport=!0;function epe(e,t){return e.useMedium(t),JF}var QF=Qhe(),y2=function(){},Kw=R.forwardRef(function(e,t){var n=R.useRef(null),r=R.useState({onScrollCapture:y2,onWheelCapture:y2,onTouchMoveCapture:y2}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,p=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,_=e.as,S=_===void 0?"div":_,x=e.gapMode,E=XF(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,A=Yhe([n,t]),O=Ns(Ns({},E),a);return R.createElement(R.Fragment,null,f&&R.createElement(C,{sideCar:QF,removeScrollBar:c,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:x}),o?R.cloneElement(R.Children.only(s),Ns(Ns({},O),{ref:A})):R.createElement(S,Ns({},O,{className:u,ref:A}),s))});Kw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kw.classNames={fullWidth:_b,zeroRight:wb};var tpe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function npe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=tpe();return t&&e.setAttribute("nonce",t),e}function rpe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ape(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ipe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=npe())&&(rpe(t,n),ape(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ope=function(){var e=ipe();return function(t,n){R.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},eL=function(){var e=ope(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},spe={left:0,top:0,right:0,gap:0},b2=function(e){return parseInt(e||"",10)||0},lpe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[b2(n),b2(r),b2(a)]},upe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return spe;var t=lpe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},cpe=eL(),Vf="data-scroll-locked",dpe=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ghe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Vf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(wb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(_b,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(wb," .").concat(wb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(_b," .").concat(_b,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Vf,`] {
    `).concat(Whe,": ").concat(s,`px;
  }
`)},U6=function(){var e=parseInt(document.body.getAttribute(Vf)||"0",10);return isFinite(e)?e:0},fpe=function(){R.useEffect(function(){return document.body.setAttribute(Vf,(U6()+1).toString()),function(){var e=U6()-1;e<=0?document.body.removeAttribute(Vf):document.body.setAttribute(Vf,e.toString())}},[])},hpe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;fpe();var i=R.useMemo(function(){return upe(a)},[a]);return R.createElement(cpe,{styles:dpe(i,!t,a,n?"":"!important")})},jE=!1;if(typeof window<"u")try{var ab=Object.defineProperty({},"passive",{get:function(){return jE=!0,!0}});window.addEventListener("test",ab,ab),window.removeEventListener("test",ab,ab)}catch{jE=!1}var Af=jE?{passive:!1}:!1,ppe=function(e){return e.tagName==="TEXTAREA"},tL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ppe(e)&&n[t]==="visible")},mpe=function(e){return tL(e,"overflowY")},gpe=function(e){return tL(e,"overflowX")},q6=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=nL(e,r);if(a){var i=rL(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ype=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},bpe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},nL=function(e,t){return e==="v"?mpe(t):gpe(t)},rL=function(e,t){return e==="v"?ype(t):bpe(t)},vpe=function(e,t){return e==="h"&&t==="rtl"?-1:1},wpe=function(e,t,n,r,a){var i=vpe(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),c=!1,f=o>0,h=0,p=0;do{var g=rL(e,s),v=g[0],b=g[1],_=g[2],S=b-_-i*v;(v||S)&&nL(e,s)&&(h+=S,p+=v),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(f&&Math.abs(h)<1||!f&&Math.abs(p)<1)&&(c=!0),c},ib=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},H6=function(e){return[e.deltaX,e.deltaY]},V6=function(e){return e&&"current"in e?e.current:e},_pe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},xpe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Spe=0,Tf=[];function Epe(e){var t=R.useRef([]),n=R.useRef([0,0]),r=R.useRef(),a=R.useState(Spe++)[0],i=R.useState(eL)[0],o=R.useRef(e);R.useEffect(function(){o.current=e},[e]),R.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=Vhe([e.lockRef.current],(e.shards||[]).map(V6),!0).filter(Boolean);return b.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=R.useCallback(function(b,_){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var S=ib(b),x=n.current,E="deltaX"in b?b.deltaX:x[0]-S[0],C="deltaY"in b?b.deltaY:x[1]-S[1],A,O=b.target,I=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&I==="h"&&O.type==="range")return!1;var D=q6(I,O);if(!D)return!0;if(D?A=I:(A=I==="v"?"h":"v",D=q6(I,O)),!D)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=A),!A)return!0;var z=r.current||A;return wpe(z,_,b,z==="h"?E:C)},[]),u=R.useCallback(function(b){var _=b;if(!(!Tf.length||Tf[Tf.length-1]!==i)){var S="deltaY"in _?H6(_):ib(_),x=t.current.filter(function(A){return A.name===_.type&&(A.target===_.target||_.target===A.shadowParent)&&_pe(A.delta,S)})[0];if(x&&x.should){_.cancelable&&_.preventDefault();return}if(!x){var E=(o.current.shards||[]).map(V6).filter(Boolean).filter(function(A){return A.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),c=R.useCallback(function(b,_,S,x){var E={name:b,delta:_,target:S,should:x,shadowParent:Cpe(S)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),f=R.useCallback(function(b){n.current=ib(b),r.current=void 0},[]),h=R.useCallback(function(b){c(b.type,H6(b),b.target,s(b,e.lockRef.current))},[]),p=R.useCallback(function(b){c(b.type,ib(b),b.target,s(b,e.lockRef.current))},[]);R.useEffect(function(){return Tf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",u,Af),document.addEventListener("touchmove",u,Af),document.addEventListener("touchstart",f,Af),function(){Tf=Tf.filter(function(b){return b!==i}),document.removeEventListener("wheel",u,Af),document.removeEventListener("touchmove",u,Af),document.removeEventListener("touchstart",f,Af)}},[]);var g=e.removeScrollBar,v=e.inert;return R.createElement(R.Fragment,null,v?R.createElement(i,{styles:xpe(a)}):null,g?R.createElement(hpe,{gapMode:e.gapMode}):null)}function Cpe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const kpe=epe(QF,Epe);var lg=R.forwardRef(function(e,t){return R.createElement(Kw,Ns({},e,{ref:t,sideCar:kpe}))});lg.classNames=Kw.classNames;var Ape=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Rf=new WeakMap,ob=new WeakMap,sb={},v2=0,aL=function(e){return e&&(e.host||aL(e.parentNode))},Tpe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=aL(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Rpe=function(e,t,n,r){var a=Tpe(t,Array.isArray(e)?e:[e]);sb[n]||(sb[n]=new WeakMap);var i=sb[n],o=[],s=new Set,u=new Set(a),c=function(h){!h||s.has(h)||(s.add(h),c(h.parentNode))};a.forEach(c);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(p){if(s.has(p))f(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",b=(Rf.get(p)||0)+1,_=(i.get(p)||0)+1;Rf.set(p,b),i.set(p,_),o.push(p),b===1&&v&&ob.set(p,!0),_===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(S){console.error("aria-hidden: cannot operate on ",p,S)}})};return f(t),s.clear(),v2++,function(){o.forEach(function(h){var p=Rf.get(h)-1,g=i.get(h)-1;Rf.set(h,p),i.set(h,g),p||(ob.has(h)||h.removeAttribute(r),ob.delete(h)),g||h.removeAttribute(n)}),v2--,v2||(Rf=new WeakMap,Rf=new WeakMap,ob=new WeakMap,sb={})}},Zw=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Ape(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Rpe(r,a,n,"aria-hidden")):function(){return null}},Yw="Dialog",[iL,Q1e]=di(Yw),[Npe,is]=iL(Yw),oL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=R.useRef(null),u=R.useRef(null),[c,f]=Ko({prop:r,defaultProp:a??!1,onChange:i,caller:Yw});return y.jsx(Npe,{scope:t,triggerRef:s,contentRef:u,contentId:Aa(),titleId:Aa(),descriptionId:Aa(),open:c,onOpenChange:f,onOpenToggle:R.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};oL.displayName=Yw;var sL="DialogTrigger",lL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(sL,n),i=_n(t,a.triggerRef);return y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":oA(a.open),...r,ref:i,onClick:Ft(e.onClick,a.onOpenToggle)})});lL.displayName=sL;var aA="DialogPortal",[Ipe,uL]=iL(aA,{forceMount:void 0}),cL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=is(aA,t);return y.jsx(Ipe,{scope:t,forceMount:n,children:R.Children.map(r,o=>y.jsx(Ia,{present:n||i.open,children:y.jsx(Sh,{asChild:!0,container:a,children:o})}))})};cL.displayName=aA;var Dv="DialogOverlay",dL=R.forwardRef((e,t)=>{const n=uL(Dv,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=is(Dv,e.__scopeDialog);return i.modal?y.jsx(Ia,{present:r||i.open,children:y.jsx(Dpe,{...a,ref:t})}):null});dL.displayName=Dv;var Ope=Uu("DialogOverlay.RemoveScroll"),Dpe=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(Dv,n);return y.jsx(lg,{as:Ope,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(Jt.div,{"data-state":oA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),hd="DialogContent",fL=R.forwardRef((e,t)=>{const n=uL(hd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=is(hd,e.__scopeDialog);return y.jsx(Ia,{present:r||i.open,children:i.modal?y.jsx(jpe,{...a,ref:t}):y.jsx(Mpe,{...a,ref:t})})});fL.displayName=hd;var jpe=R.forwardRef((e,t)=>{const n=is(hd,e.__scopeDialog),r=R.useRef(null),a=_n(t,n.contentRef,r);return R.useEffect(()=>{const i=r.current;if(i)return Zw(i)},[]),y.jsx(hL,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:Ft(e.onFocusOutside,i=>i.preventDefault())})}),Mpe=R.forwardRef((e,t)=>{const n=is(hd,e.__scopeDialog),r=R.useRef(!1),a=R.useRef(!1);return y.jsx(hL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),hL=R.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=is(hd,n),u=R.useRef(null),c=_n(t,u);return Ww(),y.jsxs(y.Fragment,{children:[y.jsx(sg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(wh,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":oA(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(Ppe,{titleId:s.titleId}),y.jsx(Lpe,{contentRef:u,descriptionId:s.descriptionId})]})]})}),iA="DialogTitle",pL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(iA,n);return y.jsx(Jt.h2,{id:a.titleId,...r,ref:t})});pL.displayName=iA;var mL="DialogDescription",gL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(mL,n);return y.jsx(Jt.p,{id:a.descriptionId,...r,ref:t})});gL.displayName=mL;var yL="DialogClose",bL=R.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(yL,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>a.onOpenChange(!1))})});bL.displayName=yL;function oA(e){return e?"open":"closed"}var vL="DialogTitleWarning",[e_e,wL]=GH(vL,{contentName:hd,titleName:iA,docsSlug:"dialog"}),Ppe=({titleId:e})=>{const t=wL(vL),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return R.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Fpe="DialogDescriptionWarning",Lpe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${wL(Fpe).contentName}}.`;return R.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},_L=oL,$pe=lL,xL=cL,SL=dL,EL=fL,Bpe=pL,zpe=gL,CL=bL;function Xw({...e}){return y.jsx(_L,{"data-slot":"dialog",...e})}function Upe({...e}){return y.jsx($pe,{"data-slot":"dialog-trigger",...e})}function qpe({...e}){return y.jsx(xL,{"data-slot":"dialog-portal",...e})}function Hpe({...e}){return y.jsx(CL,{"data-slot":"dialog-close",...e})}function Vpe({className:e,...t}){return y.jsx(SL,{"data-slot":"dialog-overlay",className:Nt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Jw({className:e,children:t,...n}){return y.jsxs(qpe,{"data-slot":"dialog-portal",children:[y.jsx(Vpe,{}),y.jsxs(EL,{"data-slot":"dialog-content",className:Nt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(CL,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(Us,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Qw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:Nt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function e1({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:Nt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function t1({className:e,...t}){return y.jsx(Bpe,{"data-slot":"dialog-title",className:Nt("text-lg leading-none font-semibold",e),...t})}function n1({className:e,...t}){return y.jsx(zpe,{"data-slot":"dialog-description",className:Nt("text-muted-foreground text-sm",e),...t})}function r1(e){const t=e+"CollectionProvider",[n,r]=di(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:_,children:S}=b,x=vt.useRef(null),E=vt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:x,children:S})};o.displayName=t;const s=e+"CollectionSlot",u=Uu(s),c=vt.forwardRef((b,_)=>{const{scope:S,children:x}=b,E=i(s,S),C=_n(_,E.collectionRef);return y.jsx(u,{ref:C,children:x})});c.displayName=s;const f=e+"CollectionItemSlot",h="data-radix-collection-item",p=Uu(f),g=vt.forwardRef((b,_)=>{const{scope:S,children:x,...E}=b,C=vt.useRef(null),A=_n(_,C),O=i(f,S);return vt.useEffect(()=>(O.itemMap.set(C,{ref:C,...E}),()=>void O.itemMap.delete(C))),y.jsx(p,{[h]:"",ref:A,children:x})});g.displayName=f;function v(b){const _=i(e+"CollectionConsumer",b);return vt.useCallback(()=>{const x=_.collectionRef.current;if(!x)return[];const E=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((O,I)=>E.indexOf(O.ref.current)-E.indexOf(I.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},v,r]}var w2="rovingFocusGroup.onEntryFocus",Gpe={bubbles:!1,cancelable:!0},ug="RovingFocusGroup",[ME,kL,Wpe]=r1(ug),[Kpe,a1]=di(ug,[Wpe]),[Zpe,Ype]=Kpe(ug),AL=R.forwardRef((e,t)=>y.jsx(ME.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(ME.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(Xpe,{...e,ref:t})})}));AL.displayName=ug;var Xpe=R.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,p=R.useRef(null),g=_n(t,p),v=$h(i),[b,_]=Ko({prop:o,defaultProp:s??null,onChange:u,caller:ug}),[S,x]=R.useState(!1),E=Ca(c),C=kL(n),A=R.useRef(!1),[O,I]=R.useState(0);return R.useEffect(()=>{const D=p.current;if(D)return D.addEventListener(w2,E),()=>D.removeEventListener(w2,E)},[E]),y.jsx(Zpe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:R.useCallback(D=>_(D),[_]),onItemShiftTab:R.useCallback(()=>x(!0),[]),onFocusableItemAdd:R.useCallback(()=>I(D=>D+1),[]),onFocusableItemRemove:R.useCallback(()=>I(D=>D-1),[]),children:y.jsx(Jt.div,{tabIndex:S||O===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Ft(e.onMouseDown,()=>{A.current=!0}),onFocus:Ft(e.onFocus,D=>{const z=!A.current;if(D.target===D.currentTarget&&z&&!S){const W=new CustomEvent(w2,Gpe);if(D.currentTarget.dispatchEvent(W),!W.defaultPrevented){const ee=C().filter(ie=>ie.focusable),F=ee.find(ie=>ie.active),Z=ee.find(ie=>ie.id===b),ae=[F,Z,...ee].filter(Boolean).map(ie=>ie.ref.current);NL(ae,f)}}A.current=!1}),onBlur:Ft(e.onBlur,()=>x(!1))})})}),TL="RovingFocusGroupItem",RL=R.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,u=Aa(),c=i||u,f=Ype(TL,n),h=f.currentTabStopId===c,p=kL(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=f;return R.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),y.jsx(ME.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:y.jsx(Jt.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:Ft(e.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:Ft(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:Ft(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const S=eme(_,f.orientation,f.dir);if(S!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=p().filter(C=>C.focusable).map(C=>C.ref.current);if(S==="last")E.reverse();else if(S==="prev"||S==="next"){S==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=f.loop?tme(E,C+1):E.slice(C+1)}setTimeout(()=>NL(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:b!=null}):o})})});RL.displayName=TL;var Jpe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Qpe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function eme(e,t,n){const r=Qpe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Jpe[r]}function NL(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function tme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var IL=AL,OL=RL,i1="Tabs",[nme,t_e]=di(i1,[a1]),DL=a1(),[rme,sA]=nme(i1),jL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:u="automatic",...c}=e,f=$h(s),[h,p]=Ko({prop:r,onChange:a,defaultProp:i??"",caller:i1});return y.jsx(rme,{scope:n,baseId:Aa(),value:h,onValueChange:p,orientation:o,dir:f,activationMode:u,children:y.jsx(Jt.div,{dir:f,"data-orientation":o,...c,ref:t})})});jL.displayName=i1;var ML="TabsList",PL=R.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=sA(ML,n),o=DL(n);return y.jsx(IL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(Jt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});PL.displayName=ML;var FL="TabsTrigger",LL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=sA(FL,n),s=DL(n),u=zL(o.baseId,r),c=UL(o.baseId,r),f=r===o.value;return y.jsx(OL,{asChild:!0,...s,focusable:!a,active:f,children:y.jsx(Jt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:Ft(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Ft(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Ft(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!a&&h&&o.onValueChange(r)})})})});LL.displayName=FL;var $L="TabsContent",BL=R.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=sA($L,n),u=zL(s.baseId,r),c=UL(s.baseId,r),f=r===s.value,h=R.useRef(f);return R.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),y.jsx(Ia,{present:a||f,children:({present:p})=>y.jsx(Jt.div,{"data-state":f?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!p,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});BL.displayName=$L;function zL(e,t){return`${e}-trigger-${t}`}function UL(e,t){return`${e}-content-${t}`}var ame=jL,ime=PL,ome=LL,sme=BL;function PE({className:e,...t}){return y.jsx(ame,{"data-slot":"tabs",className:Nt("flex flex-col gap-2",e),...t})}function FE({className:e,...t}){return y.jsx(ime,{"data-slot":"tabs-list",className:Nt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function co({className:e,...t}){return y.jsx(ome,{"data-slot":"tabs-trigger",className:Nt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function fo({className:e,...t}){return y.jsx(sme,{"data-slot":"tabs-content",className:Nt("flex-1 outline-none",e),...t})}var lme="Label",qL=R.forwardRef((e,t)=>y.jsx(Jt.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));qL.displayName=lme;var ume=qL;function Dn({className:e,...t}){return y.jsx(ume,{"data-slot":"label",className:Nt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function o1(e){const t=R.useRef({value:e,previous:e});return R.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var s1="Switch",[cme,n_e]=di(s1),[dme,fme]=cme(s1),HL=R.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[p,g]=R.useState(null),v=_n(t,E=>g(E)),b=R.useRef(!1),_=p?f||!!p.closest("form"):!0,[S,x]=Ko({prop:a,defaultProp:i??!1,onChange:c,caller:s1});return y.jsxs(dme,{scope:n,checked:S,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"switch","aria-checked":S,"aria-required":o,"data-state":KL(S),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onClick:Ft(e.onClick,E=>{x(C=>!C),_&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),_&&y.jsx(WL,{control:p,bubbles:!b.current,name:r,value:u,checked:S,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"}})]})});HL.displayName=s1;var VL="SwitchThumb",GL=R.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=fme(VL,n);return y.jsx(Jt.span,{"data-state":KL(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});GL.displayName=VL;var hme="SwitchBubbleInput",WL=R.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=R.useRef(null),s=_n(o,i),u=o1(n),c=rw(t);return R.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&g){const v=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(v)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});WL.displayName=hme;function KL(e){return e?"checked":"unchecked"}var pme=HL,mme=GL;function zl({className:e,...t}){return y.jsx(pme,{"data-slot":"switch",className:Nt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(mme,{"data-slot":"switch-thumb",className:Nt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var gme=[" ","Enter","ArrowUp","ArrowDown"],yme=[" ","Enter"],pd="Select",[l1,u1,bme]=r1(pd),[Bh,r_e]=di(pd,[bme,cc]),c1=cc(),[vme,wc]=Bh(pd),[wme,_me]=Bh(pd),ZL=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:u,dir:c,name:f,autoComplete:h,disabled:p,required:g,form:v}=e,b=c1(t),[_,S]=R.useState(null),[x,E]=R.useState(null),[C,A]=R.useState(!1),O=$h(c),[I,D]=Ko({prop:r,defaultProp:a??!1,onChange:i,caller:pd}),[z,W]=Ko({prop:o,defaultProp:s,onChange:u,caller:pd}),ee=R.useRef(null),F=_?v||!!_.closest("form"):!0,[Z,V]=R.useState(new Set),ae=Array.from(Z).map(ie=>ie.props.value).join(";");return y.jsx(aw,{...b,children:y.jsxs(vme,{required:g,scope:t,trigger:_,onTriggerChange:S,valueNode:x,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:A,contentId:Aa(),value:z,onValueChange:W,open:I,onOpenChange:D,dir:O,triggerPointerDownPosRef:ee,disabled:p,children:[y.jsx(l1.Provider,{scope:t,children:y.jsx(wme,{scope:e.__scopeSelect,onNativeOptionAdd:R.useCallback(ie=>{V(te=>new Set(te).add(ie))},[]),onNativeOptionRemove:R.useCallback(ie=>{V(te=>{const X=new Set(te);return X.delete(ie),X})},[]),children:n})}),F?y.jsxs(y9,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:z,onChange:ie=>W(ie.target.value),disabled:p,form:v,children:[z===void 0?y.jsx("option",{value:""}):null,Array.from(Z)]},ae):null]})})};ZL.displayName=pd;var YL="SelectTrigger",XL=R.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=c1(n),o=wc(YL,n),s=o.disabled||r,u=_n(t,o.onTriggerChange),c=u1(n),f=R.useRef("touch"),[h,p,g]=v9(b=>{const _=c().filter(E=>!E.disabled),S=_.find(E=>E.value===o.value),x=w9(_,b,S);x!==void 0&&o.onValueChange(x.value)}),v=b=>{s||(o.onOpenChange(!0),g()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return y.jsx(w0,{asChild:!0,...i,children:y.jsx(Jt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":b9(o.value)?"":void 0,...a,ref:u,onClick:Ft(a.onClick,b=>{b.currentTarget.focus(),f.current!=="mouse"&&v(b)}),onPointerDown:Ft(a.onPointerDown,b=>{f.current=b.pointerType;const _=b.target;_.hasPointerCapture(b.pointerId)&&_.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:Ft(a.onKeyDown,b=>{const _=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(_&&b.key===" ")&&gme.includes(b.key)&&(v(),b.preventDefault())})})})});XL.displayName=YL;var JL="SelectValue",QL=R.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,u=wc(JL,n),{onValueNodeHasChildrenChange:c}=u,f=i!==void 0,h=_n(t,u.onValueNodeChange);return $a(()=>{c(f)},[c,f]),y.jsx(Jt.span,{...s,ref:h,style:{pointerEvents:"none"},children:b9(u.value)?y.jsx(y.Fragment,{children:o}):i})});QL.displayName=JL;var xme="SelectIcon",e9=R.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(Jt.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});e9.displayName=xme;var Sme="SelectPortal",t9=e=>y.jsx(Sh,{asChild:!0,...e});t9.displayName=Sme;var md="SelectContent",n9=R.forwardRef((e,t)=>{const n=wc(md,e.__scopeSelect),[r,a]=R.useState();if($a(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Is.createPortal(y.jsx(r9,{scope:e.__scopeSelect,children:y.jsx(l1.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(a9,{...e,ref:t})});n9.displayName=md;var Po=10,[r9,_c]=Bh(md),Eme="SelectContentImpl",Cme=Uu("SelectContent.RemoveScroll"),a9=R.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_,...S}=e,x=wc(md,n),[E,C]=R.useState(null),[A,O]=R.useState(null),I=_n(t,Pe=>C(Pe)),[D,z]=R.useState(null),[W,ee]=R.useState(null),F=u1(n),[Z,V]=R.useState(!1),ae=R.useRef(!1);R.useEffect(()=>{if(E)return Zw(E)},[E]),Ww();const ie=R.useCallback(Pe=>{const[Re,...ke]=F().map(Oe=>Oe.ref.current),[ze]=ke.slice(-1),it=document.activeElement;for(const Oe of Pe)if(Oe===it||(Oe==null||Oe.scrollIntoView({block:"nearest"}),Oe===Re&&A&&(A.scrollTop=0),Oe===ze&&A&&(A.scrollTop=A.scrollHeight),Oe==null||Oe.focus(),document.activeElement!==it))return},[F,A]),te=R.useCallback(()=>ie([D,E]),[ie,D,E]);R.useEffect(()=>{Z&&te()},[Z,te]);const{onOpenChange:X,triggerPointerDownPosRef:ce}=x;R.useEffect(()=>{if(E){let Pe={x:0,y:0};const Re=ze=>{var it,Oe;Pe={x:Math.abs(Math.round(ze.pageX)-(((it=ce.current)==null?void 0:it.x)??0)),y:Math.abs(Math.round(ze.pageY)-(((Oe=ce.current)==null?void 0:Oe.y)??0))}},ke=ze=>{Pe.x<=10&&Pe.y<=10?ze.preventDefault():E.contains(ze.target)||X(!1),document.removeEventListener("pointermove",Re),ce.current=null};return ce.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",ke,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",ke,{capture:!0})}}},[E,X,ce]),R.useEffect(()=>{const Pe=()=>X(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[X]);const[G,Q]=v9(Pe=>{const Re=F().filter(it=>!it.disabled),ke=Re.find(it=>it.ref.current===document.activeElement),ze=w9(Re,Pe,ke);ze&&setTimeout(()=>ze.ref.current.focus())}),Y=R.useCallback((Pe,Re,ke)=>{const ze=!ae.current&&!ke;(x.value!==void 0&&x.value===Re||ze)&&(z(Pe),ze&&(ae.current=!0))},[x.value]),re=R.useCallback(()=>E==null?void 0:E.focus(),[E]),be=R.useCallback((Pe,Re,ke)=>{const ze=!ae.current&&!ke;(x.value!==void 0&&x.value===Re||ze)&&ee(Pe)},[x.value]),_e=r==="popper"?LE:i9,Ie=_e===LE?{side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_}:{};return y.jsx(r9,{scope:n,content:E,viewport:A,onViewportChange:O,itemRefCallback:Y,selectedItem:D,onItemLeave:re,itemTextRefCallback:be,focusSelectedItem:te,selectedItemText:W,position:r,isPositioned:Z,searchRef:G,children:y.jsx(lg,{as:Cme,allowPinchZoom:!0,children:y.jsx(sg,{asChild:!0,trapped:x.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:Ft(a,Pe=>{var Re;(Re=x.trigger)==null||Re.focus({preventScroll:!0}),Pe.preventDefault()}),children:y.jsx(wh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:y.jsx(_e,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Pe=>Pe.preventDefault(),...S,...Ie,onPlaced:()=>V(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:Ft(S.onKeyDown,Pe=>{const Re=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Re&&Pe.key.length===1&&Q(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let ze=F().filter(it=>!it.disabled).map(it=>it.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(ze=ze.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const it=Pe.target,Oe=ze.indexOf(it);ze=ze.slice(Oe+1)}setTimeout(()=>ie(ze)),Pe.preventDefault()}})})})})})})});a9.displayName=Eme;var kme="SelectItemAlignedPosition",i9=R.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=wc(md,n),o=_c(md,n),[s,u]=R.useState(null),[c,f]=R.useState(null),h=_n(t,I=>f(I)),p=u1(n),g=R.useRef(!1),v=R.useRef(!0),{viewport:b,selectedItem:_,selectedItemText:S,focusSelectedItem:x}=o,E=R.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&b&&_&&S){const I=i.trigger.getBoundingClientRect(),D=c.getBoundingClientRect(),z=i.valueNode.getBoundingClientRect(),W=S.getBoundingClientRect();if(i.dir!=="rtl"){const it=W.left-D.left,Oe=z.left-it,Te=I.left-Oe,B=I.width+Te,Ce=Math.max(B,D.width),Ne=window.innerWidth-Po,de=f0(Oe,[Po,Math.max(Po,Ne-Ce)]);s.style.minWidth=B+"px",s.style.left=de+"px"}else{const it=D.right-W.right,Oe=window.innerWidth-z.right-it,Te=window.innerWidth-I.right-Oe,B=I.width+Te,Ce=Math.max(B,D.width),Ne=window.innerWidth-Po,de=f0(Oe,[Po,Math.max(Po,Ne-Ce)]);s.style.minWidth=B+"px",s.style.right=de+"px"}const ee=p(),F=window.innerHeight-Po*2,Z=b.scrollHeight,V=window.getComputedStyle(c),ae=parseInt(V.borderTopWidth,10),ie=parseInt(V.paddingTop,10),te=parseInt(V.borderBottomWidth,10),X=parseInt(V.paddingBottom,10),ce=ae+ie+Z+X+te,G=Math.min(_.offsetHeight*5,ce),Q=window.getComputedStyle(b),Y=parseInt(Q.paddingTop,10),re=parseInt(Q.paddingBottom,10),be=I.top+I.height/2-Po,_e=F-be,Ie=_.offsetHeight/2,Pe=_.offsetTop+Ie,Re=ae+ie+Pe,ke=ce-Re;if(Re<=be){const it=ee.length>0&&_===ee[ee.length-1].ref.current;s.style.bottom="0px";const Oe=c.clientHeight-b.offsetTop-b.offsetHeight,Te=Math.max(_e,Ie+(it?re:0)+Oe+te),B=Re+Te;s.style.height=B+"px"}else{const it=ee.length>0&&_===ee[0].ref.current;s.style.top="0px";const Te=Math.max(be,ae+b.offsetTop+(it?Y:0)+Ie)+ke;s.style.height=Te+"px",b.scrollTop=Re-be+b.offsetTop}s.style.margin=`${Po}px 0`,s.style.minHeight=G+"px",s.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,s,c,b,_,S,i.dir,r]);$a(()=>E(),[E]);const[C,A]=R.useState();$a(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const O=R.useCallback(I=>{I&&v.current===!0&&(E(),x==null||x(),v.current=!1)},[E,x]);return y.jsx(Tme,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(Jt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});i9.displayName=kme;var Ame="SelectPopperPosition",LE=R.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Po,...i}=e,o=c1(n);return y.jsx(iw,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});LE.displayName=Ame;var[Tme,lA]=Bh(md,{}),$E="SelectViewport",o9=R.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=_c($E,n),o=lA($E,n),s=_n(t,i.onViewportChange),u=R.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(l1.Slot,{scope:n,children:y.jsx(Jt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ft(a.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const g=Math.abs(u.current-f.scrollTop);if(g>0){const v=window.innerHeight-Po*2,b=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),S=Math.max(b,_);if(S<v){const x=S+g,E=Math.min(v,x),C=x-E;h.style.height=E+"px",h.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});o9.displayName=$E;var s9="SelectGroup",[Rme,Nme]=Bh(s9),Ime=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Aa();return y.jsx(Rme,{scope:n,id:a,children:y.jsx(Jt.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Ime.displayName=s9;var l9="SelectLabel",Ome=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Nme(l9,n);return y.jsx(Jt.div,{id:a.id,...r,ref:t})});Ome.displayName=l9;var jv="SelectItem",[Dme,u9]=Bh(jv),c9=R.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=wc(jv,n),u=_c(jv,n),c=s.value===r,[f,h]=R.useState(i??""),[p,g]=R.useState(!1),v=_n(t,x=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,x,r,a)}),b=Aa(),_=R.useRef("touch"),S=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(Dme,{scope:n,value:r,disabled:a,textId:b,isSelected:c,onItemTextChange:R.useCallback(x=>{h(E=>E||((x==null?void 0:x.textContent)??"").trim())},[]),children:y.jsx(l1.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:y.jsx(Jt.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:Ft(o.onFocus,()=>g(!0)),onBlur:Ft(o.onBlur,()=>g(!1)),onClick:Ft(o.onClick,()=>{_.current!=="mouse"&&S()}),onPointerUp:Ft(o.onPointerUp,()=>{_.current==="mouse"&&S()}),onPointerDown:Ft(o.onPointerDown,x=>{_.current=x.pointerType}),onPointerMove:Ft(o.onPointerMove,x=>{var E;_.current=x.pointerType,a?(E=u.onItemLeave)==null||E.call(u):_.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ft(o.onPointerLeave,x=>{var E;x.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Ft(o.onKeyDown,x=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&x.key===" "||(yme.includes(x.key)&&S(),x.key===" "&&x.preventDefault())})})})})});c9.displayName=jv;var fm="SelectItemText",d9=R.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=wc(fm,n),s=_c(fm,n),u=u9(fm,n),c=_me(fm,n),[f,h]=R.useState(null),p=_n(t,S=>h(S),u.onItemTextChange,S=>{var x;return(x=s.itemTextRefCallback)==null?void 0:x.call(s,S,u.value,u.disabled)}),g=f==null?void 0:f.textContent,v=R.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:_}=c;return $a(()=>(b(v),()=>_(v)),[b,_,v]),y.jsxs(y.Fragment,{children:[y.jsx(Jt.span,{id:u.textId,...i,ref:p}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Is.createPortal(i.children,o.valueNode):null]})});d9.displayName=fm;var f9="SelectItemIndicator",h9=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return u9(f9,n).isSelected?y.jsx(Jt.span,{"aria-hidden":!0,...r,ref:t}):null});h9.displayName=f9;var BE="SelectScrollUpButton",p9=R.forwardRef((e,t)=>{const n=_c(BE,e.__scopeSelect),r=lA(BE,e.__scopeSelect),[a,i]=R.useState(!1),o=_n(t,r.onScrollButtonChange);return $a(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollTop>0;i(c)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(g9,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});p9.displayName=BE;var zE="SelectScrollDownButton",m9=R.forwardRef((e,t)=>{const n=_c(zE,e.__scopeSelect),r=lA(zE,e.__scopeSelect),[a,i]=R.useState(!1),o=_n(t,r.onScrollButtonChange);return $a(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<c;i(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(g9,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});m9.displayName=zE;var g9=R.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=_c("SelectScrollButton",n),o=R.useRef(null),s=u1(n),u=R.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return R.useEffect(()=>()=>u(),[u]),$a(()=>{var f;const c=s().find(h=>h.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),y.jsx(Jt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ft(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ft(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ft(a.onPointerLeave,()=>{u()})})}),jme="SelectSeparator",Mme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(Jt.div,{"aria-hidden":!0,...r,ref:t})});Mme.displayName=jme;var UE="SelectArrow",Pme=R.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=c1(n),i=wc(UE,n),o=_c(UE,n);return i.open&&o.position==="popper"?y.jsx(ow,{...a,...r,ref:t}):null});Pme.displayName=UE;var Fme="SelectBubbleInput",y9=R.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=R.useRef(null),i=_n(r,a),o=o1(t);return R.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.select,{...n,style:{...pD,...n.style},ref:i,defaultValue:t})});y9.displayName=Fme;function b9(e){return e===""||e===void 0}function v9(e){const t=Ca(e),n=R.useRef(""),r=R.useRef(0),a=R.useCallback(o=>{const s=n.current+o;t(s),function u(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(s)},[t]),i=R.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return R.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function w9(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Lme(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function Lme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $me=ZL,Bme=XL,zme=QL,Ume=e9,qme=t9,Hme=n9,Vme=o9,Gme=c9,Wme=d9,Kme=h9,Zme=p9,Yme=m9;function cg({...e}){return y.jsx($me,{"data-slot":"select",...e})}function dg({...e}){return y.jsx(zme,{"data-slot":"select-value",...e})}function fg({className:e,size:t="default",children:n,...r}){return y.jsxs(Bme,{"data-slot":"select-trigger","data-size":t,className:Nt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(Ume,{asChild:!0,children:y.jsx(Kv,{className:"size-4 opacity-50"})})]})}function hg({className:e,children:t,position:n="popper",...r}){return y.jsx(qme,{children:y.jsxs(Hme,{"data-slot":"select-content",className:Nt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(Xme,{}),y.jsx(Vme,{className:Nt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(Jme,{})]})})}function zo({className:e,children:t,...n}){return y.jsxs(Gme,{"data-slot":"select-item",className:Nt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(Kme,{children:y.jsx(wo,{className:"size-4"})})}),y.jsx(Wme,{children:t})]})}function Xme({className:e,...t}){return y.jsx(Zme,{"data-slot":"select-scroll-up-button",className:Nt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(jU,{className:"size-4"})})}function Jme({className:e,...t}){return y.jsx(Yme,{"data-slot":"select-scroll-down-button",className:Nt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(Kv,{className:"size-4"})})}var _9=["PageUp","PageDown"],x9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},zh="Slider",[qE,Qme,e0e]=r1(zh),[E9,a_e]=di(zh,[e0e]),[t0e,d1]=E9(zh),C9=R.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:v,...b}=e,_=R.useRef(new Set),S=R.useRef(0),E=o==="horizontal"?n0e:r0e,[C=[],A]=Ko({prop:f,defaultProp:c,onChange:ee=>{var Z;(Z=[..._.current][S.current])==null||Z.focus(),h(ee)}}),O=R.useRef(C);function I(ee){const F=l0e(C,ee);W(ee,F)}function D(ee){W(ee,S.current)}function z(){const ee=O.current[S.current];C[S.current]!==ee&&p(C)}function W(ee,F,{commit:Z}={commit:!1}){const V=f0e(i),ae=h0e(Math.round((ee-r)/i)*i+r,V),ie=f0(ae,[r,a]);A((te=[])=>{const X=o0e(te,ie,F);if(d0e(X,u*i)){S.current=X.indexOf(ie);const ce=String(X)!==String(te);return ce&&Z&&p(X),ce?X:te}else return te})}return y.jsx(t0e,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:S,thumbs:_.current,values:C,orientation:o,form:v,children:y.jsx(qE.Provider,{scope:e.__scopeSlider,children:y.jsx(qE.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...b,ref:t,onPointerDown:Ft(b.onPointerDown,()=>{s||(O.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:I,onSlideMove:s?void 0:D,onSlideEnd:s?void 0:z,onHomeKeyDown:()=>!s&&W(r,0,{commit:!0}),onEndKeyDown:()=>!s&&W(a,C.length-1,{commit:!0}),onStepKeyDown:({event:ee,direction:F})=>{if(!s){const ae=_9.includes(ee.key)||ee.shiftKey&&x9.includes(ee.key)?10:1,ie=S.current,te=C[ie],X=i*ae*F;W(te+X,ie,{commit:!0})}}})})})})});C9.displayName=zh;var[k9,A9]=E9(zh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),n0e=R.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:u,onStepKeyDown:c,...f}=e,[h,p]=R.useState(null),g=_n(t,E=>p(E)),v=R.useRef(void 0),b=$h(a),_=b==="ltr",S=_&&!i||!_&&i;function x(E){const C=v.current||h.getBoundingClientRect(),A=[0,C.width],I=uA(A,S?[n,r]:[r,n]);return v.current=C,I(E-C.left)}return y.jsx(k9,{scope:e.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:y.jsx(T9,{dir:b,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=x(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=x(E.clientX);s==null||s(C)},onSlideEnd:()=>{v.current=void 0,u==null||u()},onStepKeyDown:E=>{const A=S9[S?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:A?-1:1})}})})}),r0e=R.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:u,...c}=e,f=R.useRef(null),h=_n(t,f),p=R.useRef(void 0),g=!a;function v(b){const _=p.current||f.current.getBoundingClientRect(),S=[0,_.height],E=uA(S,g?[r,n]:[n,r]);return p.current=_,E(b-_.top)}return y.jsx(k9,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(T9,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const _=v(b.clientY);i==null||i(_)},onSlideMove:b=>{const _=v(b.clientY);o==null||o(_)},onSlideEnd:()=>{p.current=void 0,s==null||s()},onStepKeyDown:b=>{const S=S9[g?"from-bottom":"from-top"].includes(b.key);u==null||u({event:b,direction:S?-1:1})}})})}),T9=R.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:u,...c}=e,f=d1(zh,n);return y.jsx(Jt.span,{...c,ref:t,onKeyDown:Ft(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):_9.concat(x9).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:Ft(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(p)?p.focus():r(h)}),onPointerMove:Ft(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Ft(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),R9="SliderTrack",N9=R.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=d1(R9,n);return y.jsx(Jt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});N9.displayName=R9;var HE="SliderRange",I9=R.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=d1(HE,n),i=A9(HE,n),o=R.useRef(null),s=_n(t,o),u=a.values.length,c=a.values.map(p=>j9(p,a.min,a.max)),f=u>1?Math.min(...c):0,h=100-Math.max(...c);return y.jsx(Jt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});I9.displayName=HE;var VE="SliderThumb",O9=R.forwardRef((e,t)=>{const n=Qme(e.__scopeSlider),[r,a]=R.useState(null),i=_n(t,s=>a(s)),o=R.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(a0e,{...e,ref:i,index:o})}),a0e=R.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=d1(VE,n),s=A9(VE,n),[u,c]=R.useState(null),f=_n(t,x=>c(x)),h=u?o.form||!!u.closest("form"):!0,p=rw(u),g=o.values[r],v=g===void 0?0:j9(g,o.min,o.max),b=s0e(r,o.values.length),_=p==null?void 0:p[s.size],S=_?u0e(_,v,s.direction):0;return R.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${S}px)`},children:[y.jsx(qE.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(Jt.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:Ft(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(D9,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});O9.displayName=VE;var i0e="RadioBubbleInput",D9=R.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=R.useRef(null),i=_n(a,r),o=o1(t);return R.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("input",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});D9.displayName=i0e;function o0e(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function j9(e,t,n){const i=100/(n-t)*(e-t);return f0(i,[0,100])}function s0e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function l0e(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function u0e(e,t,n){const r=e/2,i=uA([0,50],[0,r]);return(r-i(t)*n)*n}function c0e(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function d0e(e,t){if(t>0){const n=c0e(e);return Math.min(...n)>=t}return!0}function uA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function f0e(e){return(String(e).split(".")[1]||"").length}function h0e(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var p0e=C9,m0e=N9,g0e=I9,y0e=O9;function $f({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=R.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs(p0e,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:Nt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(m0e,{"data-slot":"slider-track",className:Nt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(g0e,{"data-slot":"slider-range",className:Nt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,u)=>y.jsx(y0e,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}var b0e="Separator",G6="horizontal",v0e=["horizontal","vertical"],M9=R.forwardRef((e,t)=>{const{decorative:n,orientation:r=G6,...a}=e,i=w0e(r)?r:G6,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(Jt.div,{"data-orientation":i,...s,...a,ref:t})});M9.displayName=b0e;function w0e(e){return v0e.includes(e)}var _0e=M9;function Mv({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(_0e,{"data-slot":"separator-root",decorative:n,orientation:t,className:Nt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const x0e=()=>{const{theme:e,setTheme:t,enableAdvancedSettings:n,setEnableAdvancedSettings:r,enableStreamingMarkdown:a,setEnableStreamingMarkdown:i,streamingRenderFPS:o,setStreamingRenderFPS:s,streamingCodeRenderFPS:u,setStreamingCodeRenderFPS:c,resetGeneralSettings:f}=qr(Bn(O=>({theme:O.theme,setTheme:O.setTheme,enableAdvancedSettings:O.enableAdvancedSettings,setEnableAdvancedSettings:O.setEnableAdvancedSettings,enableStreamingMarkdown:O.enableStreamingMarkdown,setEnableStreamingMarkdown:O.setEnableStreamingMarkdown,streamingRenderFPS:O.streamingRenderFPS,setStreamingRenderFPS:O.setStreamingRenderFPS,streamingCodeRenderFPS:O.streamingCodeRenderFPS,setStreamingCodeRenderFPS:O.setStreamingCodeRenderFPS,resetGeneralSettings:O.resetGeneralSettings}))),[h,p]=R.useState(o),[g,v]=R.useState(u),b=R.useCallback(O=>{p(O[0])},[]),_=R.useCallback(O=>{s(O[0])},[s]),S=R.useCallback(O=>{const I=O.target.value,D=I===""?30:parseInt(I.replace(/[^0-9]/g,""),10);if(!isNaN(D)){const z=Math.max(1,Math.min(60,D));s(z),p(z)}},[s]),x=R.useCallback(O=>{v(O[0])},[]),E=R.useCallback(O=>{c(O[0])},[c]),C=R.useCallback(O=>{const I=O.target.value,D=I===""?10:parseInt(I.replace(/[^0-9]/g,""),10);if(!isNaN(D)){const z=Math.max(1,Math.min(60,D));c(z),v(z)}},[c]);R.useEffect(()=>{p(o)},[o]),R.useEffect(()=>{v(u)},[u]);const A=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&f()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(Dn,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(cg,{value:e??"system",onValueChange:O=>t(O),children:[y.jsx(fg,{id:"theme-select",className:"w-[180px]",children:y.jsx(dg,{placeholder:"Select theme"})}),y.jsxs(hg,{children:[y.jsx(zo,{value:"light",children:"Light"}),y.jsx(zo,{value:"dark",children:"Dark"}),y.jsx(zo,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(Dn,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(zl,{id:"streaming-markdown-switch",checked:a??!0,onCheckedChange:i})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(Dn,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["General Streaming Update Rate (",h," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how smoothly streaming text appears. (Default: 30)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx($f,{id:"streaming-fps-slider",min:1,max:60,step:1,value:[h],onValueChange:b,onValueCommit:_,className:"flex-grow"}),y.jsx(fr,{type:"number",min:1,max:60,step:1,value:h,onChange:S,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2 hidden",children:[y.jsxs("div",{children:[y.jsxs(Dn,{htmlFor:"streaming-code-fps-slider",className:"font-medium",children:["Code Block Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Specific update rate when code blocks are streaming (lower values reduce lag). (Default: 10)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx($f,{id:"streaming-code-fps-slider",min:1,max:60,step:1,value:[g],onValueChange:x,onValueCommit:E,className:"flex-grow"}),y.jsx(fr,{type:"number",min:1,max:60,step:1,value:g,onChange:C,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(Mv,{}),y.jsxs("div",{className:"space-y-2 hidden",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(Dn,{htmlFor:"advanced-settings-switch",className:"font-medium",children:"Enable Advanced Controls"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Show controls for AI parameters (temperature, etc.) and Assistant settings tab."})]}),y.jsx(zl,{id:"advanced-settings-switch",checked:n??!1,onCheckedChange:r})]})]}),y.jsx(Mv,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(zt,{variant:"outline",size:"sm",onClick:A,children:[y.jsx(qq,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},S0e=vt.memo(x0e),E0e=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r}=qr(Bn(i=>({globalSystemPrompt:i.globalSystemPrompt,setGlobalSystemPrompt:i.setGlobalSystemPrompt,toolMaxSteps:i.toolMaxSteps,setToolMaxSteps:i.setToolMaxSteps}))),a=i=>{const o=i.target.value,s=o===""?5:parseInt(o,10);isNaN(s)||r(s)};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),y.jsx(Dn,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),y.jsx(eA,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:i=>t(i.target.value),rows:4})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),y.jsx(Dn,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),y.jsx(fr,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:a,className:"w-24"})]})]})},C0e=vt.memo(E0e);function f1({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:Nt("w-full caption-bottom text-sm",e),...t})})}function h1({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:Nt("[&_tr]:border-b",e),...t})}function p1({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:Nt("[&_tr:last-child]:border-0",e),...t})}function Vi({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:Nt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function oa({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:Nt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function vr({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:Nt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const k0e=()=>{const{addApiKey:e,deleteApiKey:t,enableApiKeyManagement:n,dbApiKeys:r,dbProviderConfigs:a,isLoading:i}=Ai(Bn(I=>({addApiKey:I.addApiKey,deleteApiKey:I.deleteApiKey,enableApiKeyManagement:I.enableApiKeyManagement,dbApiKeys:I.dbApiKeys,dbProviderConfigs:I.dbProviderConfigs,isLoading:I.isLoading}))),[o,s]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),[p,g]=R.useState(!1),[v,b]=R.useState({}),[_,S]=R.useState({}),x=R.useCallback(async I=>{if(I.preventDefault(),!o.trim()||!u.trim()||!f){dt.error("Please fill in all fields for the API key.");return}g(!0);try{await e(o.trim(),f,u.trim()),s(""),c(""),h("")}catch(D){console.error("Failed to add API key (from component):",D)}finally{g(!1)}},[e,o,u,f]),E=R.useCallback(async(I,D)=>{if(window.confirm(`Are you sure you want to delete the API key "${D}"? This will also unlink it from any providers using it. This action cannot be undone.`)){b(z=>({...z,[I]:!0}));try{await t(I),S(z=>{const W={...z};return delete W[I],W})}catch(z){console.error("Failed to delete API key (from component):",z)}finally{b(z=>({...z,[I]:!1}))}}},[t]),C=R.useMemo(()=>{const I=new Map;return(r||[]).forEach(D=>{const z=(a||[]).filter(W=>W.apiKeyId===D.id);I.set(D.id,z.length===0?"Not linked":z.map(W=>W.name).join(", "))}),I},[r,a]);if(!n)return y.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400 flex items-center justify-center gap-2 bg-gray-800/30 rounded-md border border-dashed border-gray-700 min-h-[200px]",children:[y.jsx(UO,{className:"h-5 w-5"}),"API Key Management is disabled in the configuration."]});const A=I=>{S(D=>({...D,[I]:!D[I]}))},O=I=>({openai:"OpenAI",google:"Google",openrouter:"OpenRouter","openai-compatible":"OpenAI-Compatible"})[I]||"Unknown/Custom";return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("form",{onSubmit:x,className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Add New API Key"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(Dn,{htmlFor:"new-key-name",children:"Name"}),y.jsx(fr,{id:"new-key-name",value:o,onChange:I=>s(I.target.value),placeholder:"e.g., My Personal Key",required:!0,className:"mt-1",disabled:p})]}),y.jsxs("div",{children:[y.jsx(Dn,{htmlFor:"new-key-provider-type",children:"Intended Provider Type"}),y.jsxs(cg,{value:f,onValueChange:h,required:!0,disabled:p,children:[y.jsx(fg,{id:"new-key-provider-type",className:"mt-1",children:y.jsx(dg,{placeholder:"Select Type..."})}),y.jsxs(hg,{children:[y.jsx(zo,{value:"openai",children:"OpenAI"}),y.jsx(zo,{value:"google",children:"Google"}),y.jsx(zo,{value:"openrouter",children:"OpenRouter"}),y.jsx(zo,{value:"openai-compatible",children:"OpenAI-Compatible"})]})]})]}),y.jsxs("div",{children:[y.jsx(Dn,{htmlFor:"new-key-value",children:"API Key Value"}),y.jsx(fr,{id:"new-key-value",type:"password",value:u,onChange:I=>c(I.target.value),placeholder:"Paste your API key here",required:!0,className:"mt-1",disabled:p})]})]}),y.jsxs(zt,{type:"submit",disabled:p,children:[p&&y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Key"]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Stored API Keys"}),i?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"})]}):(r||[]).length===0?y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No API keys stored yet. Add one above. Link keys to providers in the 'Providers' tab."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(f1,{children:[y.jsx(h1,{children:y.jsxs(Vi,{children:[y.jsx(oa,{children:"Name"}),y.jsx(oa,{children:"Type"}),y.jsx(oa,{children:"Linked To"}),y.jsx(oa,{children:"Key Value"}),y.jsx(oa,{className:"text-right",children:"Actions"})]})}),y.jsx(p1,{children:(r||[]).map(I=>{const D=v[I.id];return y.jsxs(Vi,{children:[y.jsx(vr,{className:"font-medium",children:I.name}),y.jsx(vr,{children:O(I.providerId)}),y.jsx(vr,{className:"text-xs text-muted-foreground",children:C.get(I.id)??"Not linked"}),y.jsx(vr,{children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-mono text-xs",children:_[I.id]?I.value:""}),y.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>A(I.id),className:"h-6 w-6","aria-label":_[I.id]?"Hide key":"Show key",disabled:D,children:_[I.id]?y.jsx(qU,{className:"h-4 w-4"}):y.jsx(VU,{className:"h-4 w-4"})})]})}),y.jsx(vr,{className:"text-right",children:y.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>E(I.id,I.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete key ${I.name}`,disabled:D,children:D?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(qu,{className:"h-4 w-4"})})})]},I.id)})})]})})]})]})},A0e=vt.memo(k0e),T0e=()=>{const{importConversation:e,exportAllConversations:t}=So(Bn(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=R.useRef(null),[r,a]=R.useState(!1),[i,o]=R.useState(!1),[s,u]=R.useState(!1),c=()=>{var g;(g=n.current)==null||g.click()},f=R.useCallback(async g=>{var b;const v=(b=g.target.files)==null?void 0:b[0];if(v){a(!0);try{await e(v)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=R.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),p=R.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await Gt.clearAllData(),dt.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const v="Failed to clear all data";console.error(v,g),dt.error(`${v}: ${g instanceof Error?g.message:String(g)}`),u(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:f,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(zt,{onClick:c,variant:"outline",disabled:r,children:[r?y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(oH,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(zt,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Rb,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(zt,{onClick:p,variant:"destructive",disabled:s,children:[s?y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(qu,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},R0e=vt.memo(T0e),N0e=nC("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function I0e({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Nt(N0e({variant:t}),e),...n})}function O0e({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:Nt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function D0e({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:Nt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const j0e=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=d0(Bn(O=>({loadedMods:O.loadedMods,addDbMod:O.addDbMod,updateDbMod:O.updateDbMod,deleteDbMod:O.deleteDbMod,dbMods:O.dbMods,isLoading:O.isLoading}))),[o,s]=R.useState(""),[u,c]=R.useState(""),[f,h]=R.useState(""),[p,g]=R.useState(!1),[v,b]=R.useState({}),[_,S]=R.useState({}),x=R.useCallback(async()=>{if(!o.trim()){dt.error("Mod name cannot be empty.");return}if(!u.trim()&&!f.trim()){dt.error("Either Mod URL or Script Content must be provided.");return}if(u.trim()&&f.trim()){dt.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const O={name:o.trim(),sourceUrl:u.trim()||null,scriptContent:f.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(O),s(""),c(""),h(""),dt.info("Mod added. Reload required for changes to take effect.")}catch(O){console.error("Failed to add mod (from component):",O)}finally{g(!1)}},[o,u,f,t,a==null?void 0:a.length]),E=R.useCallback(async O=>{b(I=>({...I,[O.id]:!0}));try{await n(O.id,{enabled:!O.enabled}),dt.info(`Mod "${O.name}" ${O.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(I){console.error("Failed to update mod (from component):",I)}finally{b(I=>({...I,[O.id]:!1}))}},[n]),C=R.useCallback(async O=>{if(window.confirm(`Are you sure you want to delete the mod "${O.name}"? This cannot be undone.`)){S(I=>({...I,[O.id]:!0}));try{await r(O.id),dt.info("Mod deleted. Reload required for changes to take effect.")}catch(I){console.error("Failed to delete mod (from component):",I)}finally{S(I=>({...I,[O.id]:!1}))}}},[r]),A=R.useCallback(O=>{const I=e.find(z=>z.id===O);if(I)if(I.error){const z=I.error instanceof Error?I.error.message:String(I.error);return{status:"Error",error:I.error,tooltip:z}}else return{status:"Loaded"};const D=(a||[]).find(z=>z.id===O);return D?D.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(I0e,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(aH,{className:"h-4 w-4"}),y.jsx(O0e,{children:"Security Warning"}),y.jsx(D0e,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(Dn,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(fr,{id:"mod-name",value:o,onChange:O=>s(O.target.value),placeholder:"My Awesome Mod",disabled:p})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(Dn,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(fr,{id:"mod-url",type:"url",value:u,onChange:O=>c(O.target.value),placeholder:"https://example.com/my-mod.js",disabled:p||!!f.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(Dn,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(eA,{id:"mod-script",value:f,onChange:O=>h(O.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:p||!!u.trim()})]}),y.jsxs(zt,{onClick:x,disabled:p,children:[p&&y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(kn,{delayDuration:100,children:y.jsxs(f1,{children:[y.jsx(h1,{children:y.jsxs(Vi,{children:[y.jsx(oa,{children:"Name"}),y.jsx(oa,{children:"Source"}),y.jsx(oa,{children:"Status"}),y.jsx(oa,{className:"text-center",children:"Enabled"}),y.jsx(oa,{className:"text-right",children:"Actions"})]})}),y.jsx(p1,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Vi,{children:y.jsx(vr,{colSpan:5,children:y.jsx(Mr,{className:"h-10 w-full"})})}),y.jsx(Vi,{children:y.jsx(vr,{colSpan:5,children:y.jsx(Mr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Vi,{children:y.jsx(vr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(O=>{const{status:I,error:D,tooltip:z}=A(O.id),W=O.sourceUrl?new URL(O.sourceUrl).hostname:"Direct Script",ee=v[O.id],F=_[O.id],Z=ee||F,V=I==="Error";return y.jsxs(Vi,{children:[y.jsx(vr,{className:"font-medium",children:O.name}),y.jsx(vr,{className:"text-muted-foreground",children:W}),y.jsxs(vr,{children:[y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx("span",{className:V?"text-destructive font-semibold cursor-help":"",children:I})}),z&&y.jsx(Rn,{className:"max-w-xs break-words",children:y.jsx("p",{children:z})})]}),V&&D&&y.jsx("p",{className:"text-xs text-destructive truncate",children:D instanceof Error?D.message:String(D)})]}),y.jsxs(vr,{className:"text-center",children:[y.jsx(zl,{checked:O.enabled??!1,onCheckedChange:()=>E(O),disabled:Z,"aria-label":`Enable ${O.name}`}),ee&&y.jsx(Zn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(vr,{className:"text-right",children:y.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>C(O),disabled:Z,"aria-label":`Delete ${O.name}`,className:"text-destructive hover:text-destructive/80",children:F?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(qu,{className:"h-4 w-4"})})})]},O.id)})})]})})})]})]})},M0e=vt.memo(j0e),P9=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48"})=>{const[s,u]=R.useState(""),c=R.useMemo(()=>{if(!s)return t;const f=s.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.id.toLowerCase().includes(f))},[t,s]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(fr,{value:s,onChange:f=>u(f.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(og,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:c.map(f=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(Dn,{htmlFor:`enable-model-${e}-${f.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:f.name||f.id,children:f.name||f.id}),y.jsx(zl,{id:`enable-model-${e}-${f.id}`,checked:n.has(f.id),onCheckedChange:h=>r(f.id,h),className:"flex-shrink-0",disabled:i,"aria-label":`Enable model ${f.name||f.id}`})]},f.id))})})]})},P0e=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s})=>{var C;const u=Jk(e.type),c=Qk(e.type),f=gm(e.type),h=o==="fetching"||s,p=s||o==="fetching",g=s||o==="fetching",b=Ai(A=>A.getAllAvailableModelDefsForProvider)(e.id),_=R.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),S=e.apiKeyId?t.some(A=>A.id===e.apiKeyId):!1,x=u&&!S,E=R.useCallback(async(A,O)=>{const I=new Set(e.enabledModels??[]);O?I.add(A):I.delete(A);const D=Array.from(I);try{await i(e.id,{enabledModels:D})}catch(z){dt.error("Failed to update model status."),console.error("Failed to save model toggle:",z)}},[e.enabledModels,e.id,i]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{children:y.jsx("span",{className:Nt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(Rn,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),x&&y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{children:y.jsx(Ps,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(Rn,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",onClick:n,disabled:p,"aria-label":"Edit provider",className:"h-8 w-8",children:y.jsx(uC,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"top",children:"Edit"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",onClick:r,disabled:g,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",children:s?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(qu,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"top",children:"Delete"})]})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[u&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?S?y.jsx("span",{className:"text-green-400",children:((C=t.find(A=>A.id===e.apiKeyId))==null?void 0:C.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),c&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),f&&y.jsx("div",{className:"pt-1",children:y.jsxs(zt,{variant:"outline",size:"sm",onClick:a,disabled:h,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Zn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(wo,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(Ps,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(Jv,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"font-medium text-card-foreground text-sm",children:"Model Enablement (Saves Immediately):"}),y.jsx(P9,{providerId:e.id,allAvailableModels:b,enabledModelIds:_,onToggleModel:E,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64"})]})]})},F0e=vt.memo(P0e),F9=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const o=f=>{r(f==="none"?null:f)},s=(c=a.find(f=>f.id===n))==null?void 0:c.name,u=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(cg,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(fg,{className:Nt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(dg,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(Aq,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):u]})]})})}),y.jsxs(hg,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(zo,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(f=>y.jsx(zo,{value:f.id,children:f.name||`Key ID: ${f.id.substring(0,6)}...`},f.id))]})]})},L0e=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const u=Jk(t.type??null),c=Qk(t.type??null),f=gm(t.type??null),h=t.isEnabled??!1,p=t.autoFetchModels??!1,g=R.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=R.useCallback((b,_)=>{const S=new Set(t.enabledModels??[]);_?S.add(b):S.delete(b);const x=Array.from(S);s("enabledModels",x)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(Dn,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(fr,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>s("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(Dn,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(cg,{value:t.type??"",onValueChange:b=>s("type",b),disabled:a,children:[y.jsx(fg,{id:`edit-type-${e}`,children:y.jsx(dg,{placeholder:"Select Type"})}),y.jsx(hg,{children:jF.map(b=>y.jsx(zo,{value:b.value,children:b.label},b.value))})]})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(Dn,{children:"API Key"}),y.jsx(F9,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>s("apiKeyId",b),apiKeys:n,disabled:a})]}),c&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(Dn,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(fr,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>s("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(zl,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>s("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(Dn,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(zl,{id:`edit-autofetch-${e}`,checked:p,onCheckedChange:b=>s("autoFetchModels",b),disabled:!f||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(Dn,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:f?"":"text-muted-foreground",children:["Auto-fetch models ",f?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(P9,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(Mv,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(zt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(Us,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(zt,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cC,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},$0e=vt.memo(L0e),B0e=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i})=>{const[o,s]=R.useState(!1),[u,c]=R.useState(!1),[f,h]=R.useState(!1),[p,g]=R.useState({}),v=Ai(D=>D.getAllAvailableModelDefsForProvider),[b,_]=R.useState([]),S=R.useMemo(()=>[...b].sort((D,z)=>(D.name||D.id).localeCompare(z.name||z.id)),[b]);R.useEffect(()=>{if(o){const D=v(e.id);_(D),g({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else _([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,e.fetchedModels,v]);const x=()=>s(!0),E=()=>{s(!1),g({}),c(!1)},C=R.useCallback(async()=>{c(!0);try{const D=p.enabledModels&&p.enabledModels.length>0?p.enabledModels:null,z={name:p.name,type:p.type,isEnabled:p.isEnabled,apiKeyId:p.apiKeyId,baseURL:p.baseURL,autoFetchModels:p.autoFetchModels,enabledModels:D};Object.keys(z).forEach(W=>{z[W]===void 0&&delete z[W]}),await n(e.id,z),s(!1),g({}),dt.success(`Provider "${z.name||e.name}" updated.`)}catch(D){console.error("Failed to save provider update:",D),dt.error("Failed to save provider configuration.")}finally{c(!1)}},[p,n,e.id,e.name]),A=R.useCallback((D,z)=>{g(W=>({...W,[D]:z}))},[]),O=R.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(D){console.error("Failed to delete provider:",D),h(!1)}}},[r,e.id,e.name]),I=R.useCallback(async()=>{if(await a(e.id),o){const D=v(e.id);_(D)}},[a,e.id,o,v]);return y.jsx("div",{className:"border-b border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?y.jsx($0e,{providerId:e.id,editData:p,apiKeys:t,allAvailableModels:S,isSaving:u,onCancel:E,onSave:C,onChange:A,onUpdate:n}):y.jsx(F0e,{provider:e,apiKeys:t,onEdit:x,onDelete:O,onFetchModels:I,onUpdate:n,fetchStatus:i,isDeleting:f})})},z0e=vt.memo(B0e),U0e=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=R.useState(!1),[i,o]=R.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!0,fetchedModels:null,modelsLastFetchedAt:null}),s=R.useCallback((p,g)=>{o(v=>{const b={...v,[p]:g};if(p==="type"){const _=g;b.apiKeyId=null,b.baseURL=null,b.autoFetchModels=gm(_),b.enabledModels=null}return(p==="isEnabled"||p==="autoFetchModels")&&(b[p]=!!g),b})},[]),u=R.useCallback(async()=>{if(!i.name||!i.type){dt.error("Provider Name and Type are required.");return}a(!0);try{const p=i.type,g=i.autoFetchModels??gm(p),v={name:i.name,type:p,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(p){console.error("Failed to add provider (from form component):",p)}finally{a(!1)}},[i,t,n]),c=Jk(i.type??null),f=Qk(i.type??null),h=gm(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(fr,{value:i.name||"",onChange:p=>s("name",p.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(cg,{value:i.type??"openai",onValueChange:p=>s("type",p),disabled:r,children:[y.jsx(fg,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(dg,{placeholder:"Select Type"})}),y.jsx(hg,{children:jF.map(p=>y.jsx(zo,{value:p.value,children:p.label},p.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(zl,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:p=>s("isEnabled",p),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(Dn,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(c||f)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[c&&y.jsx(F9,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:p=>s("apiKeyId",p),apiKeys:e||[],className:"flex-grow",disabled:r}),f&&y.jsx(fr,{value:i.baseURL||"",onChange:p=>s("baseURL",p.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(zl,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:p=>s("autoFetchModels",p),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(Dn,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(zt,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(Us,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(zt,{variant:"secondary",size:"sm",onClick:u,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cC,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})},q0e=()=>{const{addDbProviderConfig:e,updateDbProviderConfig:t,deleteDbProviderConfig:n,fetchModels:r,providerFetchStatus:a,dbProviderConfigs:i,apiKeys:o,isLoading:s}=Ai(Bn(v=>({addDbProviderConfig:v.addProviderConfig,updateDbProviderConfig:v.updateProviderConfig,deleteDbProviderConfig:v.deleteProviderConfig,fetchModels:v.fetchModels,providerFetchStatus:v.providerFetchStatus,dbProviderConfigs:v.dbProviderConfigs,apiKeys:v.dbApiKeys,isLoading:v.isLoading}))),[u,c]=R.useState(!1),f=()=>c(!0),h=R.useCallback(()=>c(!1),[]),p=R.useCallback(async v=>{await r(v)},[r]),g=R.useMemo(()=>i||[],[i]);return y.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(U0e,{apiKeys:o||[],onAddProvider:e,onCancel:h}):y.jsxs(zt,{onClick:f,variant:"outline",className:"w-full",disabled:s,children:[y.jsx(Xv,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow overflow-hidden border-t border-border pt-4 mt-4",children:y.jsxs("div",{className:"space-y-2",children:[s&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Mr,{className:"h-24 w-full"}),y.jsx(Mr,{className:"h-24 w-full"}),y.jsx(Mr,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:g.map(v=>y.jsx(z0e,{provider:v,apiKeys:o||[],onUpdate:t,onDelete:n,onFetchModels:p,fetchStatus:a[v.id]||"idle"},v.id))}),!s&&g.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},H0e=vt.memo(q0e);function V0e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const m1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Uh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function cA(e){return"nodeType"in e}function Ii(e){var t,n;return e?Uh(e)?e:cA(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function dA(e){const{Document:t}=Ii(e);return e instanceof t}function pg(e){return Uh(e)?!1:e instanceof Ii(e).HTMLElement}function L9(e){return e instanceof Ii(e).SVGElement}function qh(e){return e?Uh(e)?e.document:cA(e)?dA(e)?e:pg(e)||L9(e)?e.ownerDocument:document:document:document}const zs=m1?R.useLayoutEffect:R.useEffect;function fA(e){const t=R.useRef(e);return zs(()=>{t.current=e}),R.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function G0e(){const e=R.useRef(null),t=R.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=R.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function h0(e,t){t===void 0&&(t=[e]);const n=R.useRef(e);return zs(()=>{n.current!==e&&(n.current=e)},t),n}function mg(e,t){const n=R.useRef();return R.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Pv(e){const t=fA(e),n=R.useRef(null),r=R.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function GE(e){const t=R.useRef();return R.useEffect(()=>{t.current=e},[e]),t.current}let _2={};function gg(e,t){return R.useMemo(()=>{if(t)return t;const n=_2[e]==null?0:_2[e]+1;return _2[e]=n,e+"-"+n},[e,t])}function $9(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[u,c]of s){const f=i[u];f!=null&&(i[u]=f+e*c)}return i},{...t})}}const Gf=$9(1),p0=$9(-1);function W0e(e){return"clientX"in e&&"clientY"in e}function hA(e){if(!e)return!1;const{KeyboardEvent:t}=Ii(e.target);return t&&e instanceof t}function K0e(e){if(!e)return!1;const{TouchEvent:t}=Ii(e.target);return t&&e instanceof t}function WE(e){if(K0e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return W0e(e)?{x:e.clientX,y:e.clientY}:null}const m0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[m0.Translate.toString(e),m0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),W6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Z0e(e){return e.matches(W6)?e:e.querySelector(W6)}const Y0e={display:"none"};function X0e(e){let{id:t,value:n}=e;return vt.createElement("div",{id:t,style:Y0e},n)}function J0e(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function Q0e(){const[e,t]=R.useState("");return{announce:R.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const B9=R.createContext(null);function ege(e){const t=R.useContext(B9);R.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function tge(){const[e]=R.useState(()=>new Set),t=R.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[R.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var s;return(s=o[a])==null?void 0:s.call(o,i)})},[e]),t]}const nge={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},rge={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function age(e){let{announcements:t=rge,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=nge}=e;const{announce:i,announcement:o}=Q0e(),s=gg("DndLiveRegion"),[u,c]=R.useState(!1);if(R.useEffect(()=>{c(!0)},[]),ege(R.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:g}=h;t.onDragMove&&i(t.onDragMove({active:p,over:g}))},onDragOver(h){let{active:p,over:g}=h;i(t.onDragOver({active:p,over:g}))},onDragEnd(h){let{active:p,over:g}=h;i(t.onDragEnd({active:p,over:g}))},onDragCancel(h){let{active:p,over:g}=h;i(t.onDragCancel({active:p,over:g}))}}),[i,t])),!u)return null;const f=vt.createElement(vt.Fragment,null,vt.createElement(X0e,{id:r,value:a.draggable}),vt.createElement(J0e,{id:s,announcement:o}));return n?Is.createPortal(f,n):f}var fa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(fa||(fa={}));function Fv(){}function K6(e,t){return R.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ige(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Qo=Object.freeze({x:0,y:0});function z9(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function U9(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function oge(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Z6(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function q9(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Y6(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const sge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Y6(t,t.left,t.top),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=z9(Y6(u),a);i.push({id:s,data:{droppableContainer:o,value:c}})}}return i.sort(U9)},lge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Z6(t),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=Z6(u),f=a.reduce((p,g,v)=>p+z9(c[v],g),0),h=Number((f/4).toFixed(4));i.push({id:s,data:{droppableContainer:o,value:h}})}}return i.sort(U9)};function uge(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-r,s=i-n;if(r<a&&n<i){const u=t.width*t.height,c=e.width*e.height,f=o*s,h=f/(u+c-f);return Number(h.toFixed(4))}return 0}const cge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const u=uge(s,t);u>0&&a.push({id:o,data:{droppableContainer:i,value:u}})}}return a.sort(oge)};function dge(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function H9(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Qo}function fge(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,s)=>({...o,top:o.top+e*s.y,bottom:o.bottom+e*s.y,left:o.left+e*s.x,right:o.right+e*s.x}),{...n})}}const hge=fge(1);function pge(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function mge(e,t,n){const r=pge(t);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:s}=r,u=e.left-o-(1-a)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:f,height:h,top:c,right:u+f,bottom:c+h,left:u}}const gge={ignoreTransform:!1};function Hh(e,t){t===void 0&&(t=gge);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:f}=Ii(e).getComputedStyle(e);c&&(n=mge(n,c,f))}const{top:r,left:a,width:i,height:o,bottom:s,right:u}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:u}}function X6(e){return Hh(e,{ignoreTransform:!0})}function yge(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function bge(e,t){return t===void 0&&(t=Ii(e).getComputedStyle(e)),t.position==="fixed"}function vge(e,t){t===void 0&&(t=Ii(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function g1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(dA(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!pg(a)||L9(a)||n.includes(a))return n;const i=Ii(e).getComputedStyle(a);return a!==e&&vge(a,i)&&n.push(a),bge(a,i)?n:r(a.parentNode)}return e?r(e):n}function V9(e){const[t]=g1(e,1);return t??null}function x2(e){return!m1||!e?null:Uh(e)?e:cA(e)?dA(e)||e===qh(e).scrollingElement?window:pg(e)?e:null:null}function G9(e){return Uh(e)?e.scrollX:e.scrollLeft}function W9(e){return Uh(e)?e.scrollY:e.scrollTop}function KE(e){return{x:G9(e),y:W9(e)}}var Ea;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ea||(Ea={}));function K9(e){return!m1||!e?!1:e===document.scrollingElement}function Z9(e){const t={x:0,y:0},n=K9(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,s=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:t}}const wge={x:.2,y:.2};function _ge(e,t,n,r,a){let{top:i,left:o,right:s,bottom:u}=n;r===void 0&&(r=10),a===void 0&&(a=wge);const{isTop:c,isBottom:f,isLeft:h,isRight:p}=Z9(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+b.height?(g.y=Ea.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!f&&u>=t.bottom-b.height&&(g.y=Ea.Forward,v.y=r*Math.abs((t.bottom-b.height-u)/b.height)),!p&&s>=t.right-b.width?(g.x=Ea.Forward,v.x=r*Math.abs((t.right-b.width-s)/b.width)):!h&&o<=t.left+b.width&&(g.x=Ea.Backward,v.x=r*Math.abs((t.left+b.width-o)/b.width)),{direction:g,speed:v}}function xge(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Y9(e){return e.reduce((t,n)=>Gf(t,KE(n)),Qo)}function Sge(e){return e.reduce((t,n)=>t+G9(n),0)}function Ege(e){return e.reduce((t,n)=>t+W9(n),0)}function Cge(e,t){if(t===void 0&&(t=Hh),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);V9(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const kge=[["x",["left","right"],Sge],["y",["top","bottom"],Ege]];class pA{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=g1(n),a=Y9(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,s]of kge)for(const u of o)Object.defineProperty(this,u,{get:()=>{const c=s(r),f=a[i]-c;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ym{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Age(e){const{EventTarget:t}=Ii(e);return e instanceof t?e:qh(e)}function S2(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var mo;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(mo||(mo={}));function J6(e){e.preventDefault()}function Tge(e){e.stopPropagation()}var Vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Vn||(Vn={}));const X9={start:[Vn.Space,Vn.Enter],cancel:[Vn.Esc],end:[Vn.Space,Vn.Enter,Vn.Tab]},Rge=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Vn.Right:return{...n,x:n.x+25};case Vn.Left:return{...n,x:n.x-25};case Vn.Down:return{...n,y:n.y+25};case Vn.Up:return{...n,y:n.y-25}}};class mA{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ym(qh(n)),this.windowListeners=new ym(Ii(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(mo.Resize,this.handleCancel),this.windowListeners.add(mo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(mo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Cge(r),n(Qo)}handleKeyDown(t){if(hA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=X9,coordinateGetter:o=Rge,scrollBehavior:s="smooth"}=a,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,f=c?{x:c.left,y:c.top}:Qo;this.referenceCoordinates||(this.referenceCoordinates=f);const h=o(t,{active:n,context:r.current,currentCoordinates:f});if(h){const p=p0(h,f),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const _=t.code,{isTop:S,isRight:x,isLeft:E,isBottom:C,maxScroll:A,minScroll:O}=Z9(b),I=xge(b),D={x:Math.min(_===Vn.Right?I.right-I.width/2:I.right,Math.max(_===Vn.Right?I.left:I.left+I.width/2,h.x)),y:Math.min(_===Vn.Down?I.bottom-I.height/2:I.bottom,Math.max(_===Vn.Down?I.top:I.top+I.height/2,h.y))},z=_===Vn.Right&&!x||_===Vn.Left&&!E,W=_===Vn.Down&&!C||_===Vn.Up&&!S;if(z&&D.x!==h.x){const ee=b.scrollLeft+p.x,F=_===Vn.Right&&ee<=A.x||_===Vn.Left&&ee>=O.x;if(F&&!p.y){b.scrollTo({left:ee,behavior:s});return}F?g.x=b.scrollLeft-ee:g.x=_===Vn.Right?b.scrollLeft-A.x:b.scrollLeft-O.x,g.x&&b.scrollBy({left:-g.x,behavior:s});break}else if(W&&D.y!==h.y){const ee=b.scrollTop+p.y,F=_===Vn.Down&&ee<=A.y||_===Vn.Up&&ee>=O.y;if(F&&!p.x){b.scrollTo({top:ee,behavior:s});return}F?g.y=b.scrollTop-ee:g.y=_===Vn.Down?b.scrollTop-A.y:b.scrollTop-O.y,g.y&&b.scrollBy({top:-g.y,behavior:s});break}}this.handleMove(t,Gf(p0(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}mA.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=X9,onActivation:a}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Q6(e){return!!(e&&"distance"in e)}function eO(e){return!!(e&&"delay"in e)}class gA{constructor(t,n,r){var a;r===void 0&&(r=Age(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=qh(o),this.documentListeners=new ym(this.document),this.listeners=new ym(r),this.windowListeners=new ym(Ii(o)),this.initialCoordinates=(a=WE(i))!=null?a:Qo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(mo.Resize,this.handleCancel),this.windowListeners.add(mo.DragStart,J6),this.windowListeners.add(mo.VisibilityChange,this.handleCancel),this.windowListeners.add(mo.ContextMenu,J6),this.documentListeners.add(mo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eO(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Q6(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(mo.Click,Tge,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(mo.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const u=(n=WE(t))!=null?n:Qo,c=p0(a,u);if(!r&&s){if(Q6(s)){if(s.tolerance!=null&&S2(c,s.tolerance))return this.handleCancel();if(S2(c,s.distance))return this.handleStart()}if(eO(s)&&S2(c,s.tolerance))return this.handleCancel();this.handlePending(s,c);return}t.cancelable&&t.preventDefault(),o(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Nge={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class yA extends gA{constructor(t){const{event:n}=t,r=qh(n.target);super(t,Nge,r)}}yA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Ige={move:{name:"mousemove"},end:{name:"mouseup"}};var ZE;(function(e){e[e.RightClick=2]="RightClick"})(ZE||(ZE={}));class Oge extends gA{constructor(t){super(t,Ige,qh(t.event.target))}}Oge.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===ZE.RightClick?!1:(r==null||r({event:n}),!0)}}];const E2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Dge extends gA{constructor(t){super(t,E2)}static setup(){return window.addEventListener(E2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(E2.move.name,t)};function t(){}}}Dge.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var bm;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(bm||(bm={}));var Lv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Lv||(Lv={}));function jge(e){let{acceleration:t,activator:n=bm.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=Lv.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:f,delta:h,threshold:p}=e;const g=Pge({delta:h,disabled:!i}),[v,b]=G0e(),_=R.useRef({x:0,y:0}),S=R.useRef({x:0,y:0}),x=R.useMemo(()=>{switch(n){case bm.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case bm.DraggableRect:return a}},[n,a,u]),E=R.useRef(null),C=R.useCallback(()=>{const O=E.current;if(!O)return;const I=_.current.x*S.current.x,D=_.current.y*S.current.y;O.scrollBy(I,D)},[]),A=R.useMemo(()=>s===Lv.TreeOrder?[...c].reverse():c,[s,c]);R.useEffect(()=>{if(!i||!c.length||!x){b();return}for(const O of A){if((r==null?void 0:r(O))===!1)continue;const I=c.indexOf(O),D=f[I];if(!D)continue;const{direction:z,speed:W}=_ge(O,D,x,t,p);for(const ee of["x","y"])g[ee][z[ee]]||(W[ee]=0,z[ee]=0);if(W.x>0||W.y>0){b(),E.current=O,v(C,o),_.current=W,S.current=z;return}}_.current={x:0,y:0},S.current={x:0,y:0},b()},[t,C,r,b,i,o,JSON.stringify(x),JSON.stringify(g),v,c,A,f,JSON.stringify(p)])}const Mge={x:{[Ea.Backward]:!1,[Ea.Forward]:!1},y:{[Ea.Backward]:!1,[Ea.Forward]:!1}};function Pge(e){let{delta:t,disabled:n}=e;const r=GE(t);return mg(a=>{if(n||!r||!a)return Mge;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ea.Backward]:a.x[Ea.Backward]||i.x===-1,[Ea.Forward]:a.x[Ea.Forward]||i.x===1},y:{[Ea.Backward]:a.y[Ea.Backward]||i.y===-1,[Ea.Forward]:a.y[Ea.Forward]||i.y===1}}},[n,t,r])}function Fge(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return mg(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function Lge(e,t){return R.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var g0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(g0||(g0={}));var YE;(function(e){e.Optimized="optimized"})(YE||(YE={}));const tO=new Map;function $ge(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=R.useState(null),{frequency:s,measure:u,strategy:c}=a,f=R.useRef(e),h=_(),p=h0(h),g=R.useCallback(function(S){S===void 0&&(S=[]),!p.current&&o(x=>x===null?S:x.concat(S.filter(E=>!x.includes(E))))},[p]),v=R.useRef(null),b=mg(S=>{if(h&&!n)return tO;if(!S||S===tO||f.current!==e||i!=null){const x=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){x.set(E.id,E.rect.current);continue}const C=E.node.current,A=C?new pA(u(C),C):null;E.rect.current=A,A&&x.set(E.id,A)}return x}return S},[e,i,n,h,u]);return R.useEffect(()=>{f.current=e},[e]),R.useEffect(()=>{h||g()},[n,h]),R.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),R.useEffect(()=>{h||typeof s!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},s))},[s,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(c){case g0.Always:return!1;case g0.BeforeDragging:return n;default:return!n}}}function J9(e,t){return mg(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Bge(e,t){return J9(e,t)}function zge(e){let{callback:t,disabled:n}=e;const r=fA(t),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return R.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function y1(e){let{callback:t,disabled:n}=e;const r=fA(t),a=R.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return R.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Uge(e){return new pA(Hh(e),e)}function nO(e,t,n){t===void 0&&(t=Uge);const[r,a]=R.useState(null);function i(){a(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=zge({callback(u){if(e)for(const c of u){const{type:f,target:h}=c;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),s=y1({callback:i});return zs(()=>{i(),e?(s==null||s.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),o==null||o.disconnect())},[e]),r}function qge(e){const t=J9(e);return H9(e,t)}const rO=[];function Hge(e){const t=R.useRef(e),n=mg(r=>e?r&&r!==rO&&e&&t.current&&e.parentNode===t.current.parentNode?r:g1(e):rO,[e]);return R.useEffect(()=>{t.current=e},[e]),n}function Vge(e){const[t,n]=R.useState(null),r=R.useRef(e),a=R.useCallback(i=>{const o=x2(i.target);o&&n(s=>s?(s.set(o,KE(o)),new Map(s)):null)},[]);return R.useEffect(()=>{const i=r.current;if(e!==i){o(i);const s=e.map(u=>{const c=x2(u);return c?(c.addEventListener("scroll",a,{passive:!0}),[c,KE(c)]):null}).filter(u=>u!=null);n(s.length?new Map(s):null),r.current=e}return()=>{o(e),o(i)};function o(s){s.forEach(u=>{const c=x2(u);c==null||c.removeEventListener("scroll",a)})}},[a,e]),R.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>Gf(i,o),Qo):Y9(e):Qo,[e,t])}function aO(e,t){t===void 0&&(t=[]);const n=R.useRef(null);return R.useEffect(()=>{n.current=null},t),R.useEffect(()=>{const r=e!==Qo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?p0(e,n.current):Qo}function Gge(e){R.useEffect(()=>{if(!m1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Wge(e,t){return R.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,t)},n},{}),[e,t])}function Q9(e){return R.useMemo(()=>e?yge(e):null,[e])}const iO=[];function Kge(e,t){t===void 0&&(t=Hh);const[n]=e,r=Q9(n?Ii(n):null),[a,i]=R.useState(iO);function o(){i(()=>e.length?e.map(u=>K9(u)?r:new pA(t(u),u)):iO)}const s=y1({callback:o});return zs(()=>{s==null||s.disconnect(),o(),e.forEach(u=>s==null?void 0:s.observe(u))},[e]),a}function Zge(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return pg(t)?t:e}function Yge(e){let{measure:t}=e;const[n,r]=R.useState(null),a=R.useCallback(c=>{for(const{target:f}of c)if(pg(f)){r(h=>{const p=t(f);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=y1({callback:a}),o=R.useCallback(c=>{const f=Zge(c);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?t(f):null)},[t,i]),[s,u]=Pv(o);return R.useMemo(()=>({nodeRef:s,rect:n,setRef:u}),[n,s,u])}const Xge=[{sensor:yA,options:{}},{sensor:mA,options:{}}],Jge={current:{}},xb={draggable:{measure:X6},droppable:{measure:X6,strategy:g0.WhileDragging,frequency:YE.Optimized},dragOverlay:{measure:Hh}};class vm extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Qge={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new vm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fv},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xb,measureDroppableContainers:Fv,windowRect:null,measuringScheduled:!1},eye={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fv,draggableNodes:new Map,over:null,measureDroppableContainers:Fv},b1=R.createContext(eye),e$=R.createContext(Qge);function tye(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new vm}}}function nye(e,t){switch(t.type){case fa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case fa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case fa.DragEnd:case fa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case fa.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new vm(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case fa.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new vm(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case fa.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new vm(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function rye(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=R.useContext(b1),i=GE(r),o=GE(n==null?void 0:n.id);return R.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!hA(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:u,node:c}=s;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[u.current,c.current]){if(!f)continue;const h=Z0e(f);if(h){h.focus();break}}})}},[r,t,a,o,i]),null}function aye(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function iye(e){return R.useMemo(()=>({draggable:{...xb.draggable,...e==null?void 0:e.draggable},droppable:{...xb.droppable,...e==null?void 0:e.droppable},dragOverlay:{...xb.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function oye(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=R.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;zs(()=>{if(!o&&!s||!t){i.current=!1;return}if(i.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const f=n(c),h=H9(f,r);if(o||(h.x=0),s||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=V9(c);p&&p.scrollBy({top:h.y,left:h.x})}},[t,o,s,r,n])}const t$=R.createContext({...Qo,scaleX:1,scaleY:1});var Mu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Mu||(Mu={}));const sye=R.memo(function(t){var n,r,a,i;let{id:o,accessibility:s,autoScroll:u=!0,children:c,sensors:f=Xge,collisionDetection:h=cge,measuring:p,modifiers:g,...v}=t;const b=R.useReducer(nye,void 0,tye),[_,S]=b,[x,E]=tge(),[C,A]=R.useState(Mu.Uninitialized),O=C===Mu.Initialized,{draggable:{active:I,nodes:D,translate:z},droppable:{containers:W}}=_,ee=I!=null?D.get(I):null,F=R.useRef({initial:null,translated:null}),Z=R.useMemo(()=>{var et;return I!=null?{id:I,data:(et=ee==null?void 0:ee.data)!=null?et:Jge,rect:F}:null},[I,ee]),V=R.useRef(null),[ae,ie]=R.useState(null),[te,X]=R.useState(null),ce=h0(v,Object.values(v)),G=gg("DndDescribedBy",o),Q=R.useMemo(()=>W.getEnabled(),[W]),Y=iye(p),{droppableRects:re,measureDroppableContainers:be,measuringScheduled:_e}=$ge(Q,{dragging:O,dependencies:[z.x,z.y],config:Y.droppable}),Ie=Fge(D,I),Pe=R.useMemo(()=>te?WE(te):null,[te]),Re=Be(),ke=Bge(Ie,Y.draggable.measure);oye({activeNode:I!=null?D.get(I):null,config:Re.layoutShiftCompensation,initialRect:ke,measure:Y.draggable.measure});const ze=nO(Ie,Y.draggable.measure,ke),it=nO(Ie?Ie.parentElement:null),Oe=R.useRef({activatorEvent:null,active:null,activeNode:Ie,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=W.getNodeFor((n=Oe.current.over)==null?void 0:n.id),B=Yge({measure:Y.dragOverlay.measure}),Ce=(r=B.nodeRef.current)!=null?r:Ie,Ne=O?(a=B.rect)!=null?a:ze:null,de=!!(B.nodeRef.current&&B.rect),oe=qge(de?null:ze),J=Q9(Ce?Ii(Ce):null),xe=Hge(O?Te??Ie:null),Le=Kge(xe),Se=aye(g,{transform:{x:z.x-oe.x,y:z.y-oe.y,scaleX:1,scaleY:1},activatorEvent:te,active:Z,activeNodeRect:ze,containerNodeRect:it,draggingNodeRect:Ne,over:Oe.current.over,overlayNodeRect:B.rect,scrollableAncestors:xe,scrollableAncestorRects:Le,windowRect:J}),Ve=Pe?Gf(Pe,z):null,xt=Vge(xe),ht=aO(xt),Et=aO(xt,[ze]),Lt=Gf(Se,ht),Tt=Ne?hge(Ne,Se):null,Ut=Z&&Tt?h({active:Z,collisionRect:Tt,droppableRects:re,droppableContainers:Q,pointerCoordinates:Ve}):null,ge=q9(Ut,"id"),[N,q]=R.useState(null),he=de?Se:Gf(Se,Et),De=dge(he,(i=N==null?void 0:N.rect)!=null?i:null,ze),ve=R.useRef(null),Ae=R.useCallback((et,me)=>{let{sensor:je,options:Ke}=me;if(V.current==null)return;const Ct=D.get(V.current);if(!Ct)return;const ye=et.nativeEvent,U=new je({active:V.current,activeNode:Ct,event:ye,options:Ke,context:Oe,onAbort(H){if(!D.get(H))return;const{onDragAbort:fe}=ce.current,Fe={id:H};fe==null||fe(Fe),x({type:"onDragAbort",event:Fe})},onPending(H,pe,fe,Fe){if(!D.get(H))return;const{onDragPending:jt}=ce.current,un={id:H,constraint:pe,initialCoordinates:fe,offset:Fe};jt==null||jt(un),x({type:"onDragPending",event:un})},onStart(H){const pe=V.current;if(pe==null)return;const fe=D.get(pe);if(!fe)return;const{onDragStart:Fe}=ce.current,ot={activatorEvent:ye,active:{id:pe,data:fe.data,rect:F}};Is.unstable_batchedUpdates(()=>{Fe==null||Fe(ot),A(Mu.Initializing),S({type:fa.DragStart,initialCoordinates:H,active:pe}),x({type:"onDragStart",event:ot}),ie(ve.current),X(ye)})},onMove(H){S({type:fa.DragMove,coordinates:H})},onEnd:$(fa.DragEnd),onCancel:$(fa.DragCancel)});ve.current=U;function $(H){return async function(){const{active:fe,collisions:Fe,over:ot,scrollAdjustedTranslate:jt}=Oe.current;let un=null;if(fe&&jt){const{cancelDrop:Bt}=ce.current;un={activatorEvent:ye,active:fe,collisions:Fe,delta:jt,over:ot},H===fa.DragEnd&&typeof Bt=="function"&&await Promise.resolve(Bt(un))&&(H=fa.DragCancel)}V.current=null,Is.unstable_batchedUpdates(()=>{S({type:H}),A(Mu.Uninitialized),q(null),ie(null),X(null),ve.current=null;const Bt=H===fa.DragEnd?"onDragEnd":"onDragCancel";if(un){const Vt=ce.current[Bt];Vt==null||Vt(un),x({type:Bt,event:un})}})}}},[D]),le=R.useCallback((et,me)=>(je,Ke)=>{const Ct=je.nativeEvent,ye=D.get(Ke);if(V.current!==null||!ye||Ct.dndKit||Ct.defaultPrevented)return;const U={active:ye};et(je,me.options,U)===!0&&(Ct.dndKit={capturedBy:me.sensor},V.current=Ke,Ae(je,me))},[D,Ae]),ct=Lge(f,le);Gge(f),zs(()=>{ze&&C===Mu.Initializing&&A(Mu.Initialized)},[ze,C]),R.useEffect(()=>{const{onDragMove:et}=ce.current,{active:me,activatorEvent:je,collisions:Ke,over:Ct}=Oe.current;if(!me||!je)return;const ye={active:me,activatorEvent:je,collisions:Ke,delta:{x:Lt.x,y:Lt.y},over:Ct};Is.unstable_batchedUpdates(()=>{et==null||et(ye),x({type:"onDragMove",event:ye})})},[Lt.x,Lt.y]),R.useEffect(()=>{const{active:et,activatorEvent:me,collisions:je,droppableContainers:Ke,scrollAdjustedTranslate:Ct}=Oe.current;if(!et||V.current==null||!me||!Ct)return;const{onDragOver:ye}=ce.current,U=Ke.get(ge),$=U&&U.rect.current?{id:U.id,rect:U.rect.current,data:U.data,disabled:U.disabled}:null,H={active:et,activatorEvent:me,collisions:je,delta:{x:Ct.x,y:Ct.y},over:$};Is.unstable_batchedUpdates(()=>{q($),ye==null||ye(H),x({type:"onDragOver",event:H})})},[ge]),zs(()=>{Oe.current={activatorEvent:te,active:Z,activeNode:Ie,collisionRect:Tt,collisions:Ut,droppableRects:re,draggableNodes:D,draggingNode:Ce,draggingNodeRect:Ne,droppableContainers:W,over:N,scrollableAncestors:xe,scrollAdjustedTranslate:Lt},F.current={initial:Ne,translated:Tt}},[Z,Ie,Ut,Tt,D,Ce,Ne,re,W,N,xe,Lt]),jge({...Re,delta:z,draggingRect:Tt,pointerCoordinates:Ve,scrollableAncestors:xe,scrollableAncestorRects:Le});const yt=R.useMemo(()=>({active:Z,activeNode:Ie,activeNodeRect:ze,activatorEvent:te,collisions:Ut,containerNodeRect:it,dragOverlay:B,draggableNodes:D,droppableContainers:W,droppableRects:re,over:N,measureDroppableContainers:be,scrollableAncestors:xe,scrollableAncestorRects:Le,measuringConfiguration:Y,measuringScheduled:_e,windowRect:J}),[Z,Ie,ze,te,Ut,it,B,D,W,re,N,be,xe,Le,Y,_e,J]),M=R.useMemo(()=>({activatorEvent:te,activators:ct,active:Z,activeNodeRect:ze,ariaDescribedById:{draggable:G},dispatch:S,draggableNodes:D,over:N,measureDroppableContainers:be}),[te,ct,Z,ze,S,G,D,N,be]);return vt.createElement(B9.Provider,{value:E},vt.createElement(b1.Provider,{value:M},vt.createElement(e$.Provider,{value:yt},vt.createElement(t$.Provider,{value:De},c)),vt.createElement(rye,{disabled:(s==null?void 0:s.restoreFocus)===!1})),vt.createElement(age,{...s,hiddenTextDescribedById:G}));function Be(){const et=(ae==null?void 0:ae.autoScrollEnabled)===!1,me=typeof u=="object"?u.enabled===!1:u===!1,je=O&&!et&&!me;return typeof u=="object"?{...u,enabled:je}:{enabled:je}}}),lye=R.createContext(null),oO="button",uye="Draggable";function cye(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=gg(uye),{activators:o,activatorEvent:s,active:u,activeNodeRect:c,ariaDescribedById:f,draggableNodes:h,over:p}=R.useContext(b1),{role:g=oO,roleDescription:v="draggable",tabIndex:b=0}=a??{},_=(u==null?void 0:u.id)===t,S=R.useContext(_?t$:lye),[x,E]=Pv(),[C,A]=Pv(),O=Wge(o,t),I=h0(n);zs(()=>(h.set(t,{id:t,key:i,node:x,activatorNode:C,data:I}),()=>{const z=h.get(t);z&&z.key===i&&h.delete(t)}),[h,t]);const D=R.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":_&&g===oO?!0:void 0,"aria-roledescription":v,"aria-describedby":f.draggable}),[r,g,b,_,v,f.draggable]);return{active:u,activatorEvent:s,activeNodeRect:c,attributes:D,isDragging:_,listeners:r?void 0:O,node:x,over:p,setNodeRef:E,setActivatorNodeRef:A,transform:S}}function dye(){return R.useContext(e$)}const fye="Droppable",hye={timeout:25};function pye(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=gg(fye),{active:o,dispatch:s,over:u,measureDroppableContainers:c}=R.useContext(b1),f=R.useRef({disabled:n}),h=R.useRef(!1),p=R.useRef(null),g=R.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:_}={...hye,...a},S=h0(b??r),x=R.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(S.current)?S.current:[S.current]),g.current=null},_)},[_]),E=y1({callback:x,disabled:v||!o}),C=R.useCallback((D,z)=>{E&&(z&&(E.unobserve(z),h.current=!1),D&&E.observe(D))},[E]),[A,O]=Pv(C),I=h0(t);return R.useEffect(()=>{!E||!A.current||(E.disconnect(),h.current=!1,E.observe(A.current))},[A,E]),R.useEffect(()=>(s({type:fa.RegisterDroppable,element:{id:r,key:i,disabled:n,node:A,rect:p,data:I}}),()=>s({type:fa.UnregisterDroppable,key:i,id:r})),[r]),R.useEffect(()=>{n!==f.current.disabled&&(s({type:fa.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,s]),{active:o,rect:p,isOver:(u==null?void 0:u.id)===r,node:A,over:u,setNodeRef:O}}function bA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function mye(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function lb(e){return e!==null&&e>=0}function gye(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function yye(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const n$=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=bA(t,r,n),o=t[a],s=i[a];return!s||!o?null:{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}},ub={scaleX:1,scaleY:1},bye=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:o}=e;const s=(t=i[n])!=null?t:r;if(!s)return null;if(a===n){const c=i[o];return c?{x:0,y:n<o?c.top+c.height-(s.top+s.height):c.top-s.top,...ub}:null}const u=vye(i,a,n);return a>n&&a<=o?{x:0,y:-s.height-u,...ub}:a<n&&a>=o?{x:0,y:s.height+u,...ub}:{x:0,y:0,...ub}};function vye(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const r$="Sortable",a$=vt.createContext({activeIndex:-1,containerId:r$,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:n$,disabled:{draggable:!1,droppable:!1}});function wye(e){let{children:t,id:n,items:r,strategy:a=n$,disabled:i=!1}=e;const{active:o,dragOverlay:s,droppableRects:u,over:c,measureDroppableContainers:f}=dye(),h=gg(r$,n),p=s.rect!==null,g=R.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),v=o!=null,b=o?g.indexOf(o.id):-1,_=c?g.indexOf(c.id):-1,S=R.useRef(g),x=!gye(g,S.current),E=_!==-1&&b===-1||x,C=yye(i);zs(()=>{x&&v&&f(g)},[x,g,v,f]),R.useEffect(()=>{S.current=g},[g]);const A=R.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:_,useDragOverlay:p,sortedRects:mye(g,u),strategy:a}),[b,h,C.draggable,C.droppable,E,g,_,u,p,a]);return vt.createElement(a$.Provider,{value:A},t)}const _ye=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return bA(n,r,a).indexOf(t)},xye=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:s,previousContainerId:u,transition:c}=e;return!c||!r||s!==i&&a===o?!1:n?!0:o!==a&&t===u},Sye={duration:200,easing:"ease"},i$="transform",Eye=m0.Transition.toString({property:i$,duration:0,easing:"linear"}),Cye={roleDescription:"sortable"};function kye(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=R.useState(null),s=R.useRef(n);return zs(()=>{if(!t&&n!==s.current&&r.current){const u=a.current;if(u){const c=Hh(r.current,{ignoreTransform:!0}),f={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(f.x||f.y)&&o(f)}}n!==s.current&&(s.current=n)},[t,n,r,a]),R.useEffect(()=>{i&&o(null)},[i]),i}function Aye(e){let{animateLayoutChanges:t=xye,attributes:n,disabled:r,data:a,getNewIndex:i=_ye,id:o,strategy:s,resizeObserverConfig:u,transition:c=Sye}=e;const{items:f,containerId:h,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:b,overIndex:_,useDragOverlay:S,strategy:x}=R.useContext(a$),E=Tye(r,g),C=f.indexOf(o),A=R.useMemo(()=>({sortable:{containerId:h,index:C,items:f},...a}),[h,a,C,f]),O=R.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:I,node:D,isOver:z,setNodeRef:W}=pye({id:o,data:A,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...u}}),{active:ee,activatorEvent:F,activeNodeRect:Z,attributes:V,setNodeRef:ae,listeners:ie,isDragging:te,over:X,setActivatorNodeRef:ce,transform:G}=cye({id:o,data:A,attributes:{...Cye,...n},disabled:E.draggable}),Q=V0e(W,ae),Y=!!ee,re=Y&&!v&&lb(p)&&lb(_),be=!S&&te,_e=be&&re?G:null,Pe=re?_e??(s??x)({rects:b,activeNodeRect:Z,activeIndex:p,overIndex:_,index:C}):null,Re=lb(p)&&lb(_)?i({id:o,items:f,activeIndex:p,overIndex:_}):C,ke=ee==null?void 0:ee.id,ze=R.useRef({activeId:ke,items:f,newIndex:Re,containerId:h}),it=f!==ze.current.items,Oe=t({active:ee,containerId:h,isDragging:te,isSorting:Y,id:o,index:C,items:f,newIndex:ze.current.newIndex,previousItems:ze.current.items,previousContainerId:ze.current.containerId,transition:c,wasDragging:ze.current.activeId!=null}),Te=kye({disabled:!Oe,index:C,node:D,rect:I});return R.useEffect(()=>{Y&&ze.current.newIndex!==Re&&(ze.current.newIndex=Re),h!==ze.current.containerId&&(ze.current.containerId=h),f!==ze.current.items&&(ze.current.items=f)},[Y,Re,h,f]),R.useEffect(()=>{if(ke===ze.current.activeId)return;if(ke!=null&&ze.current.activeId==null){ze.current.activeId=ke;return}const Ce=setTimeout(()=>{ze.current.activeId=ke},50);return()=>clearTimeout(Ce)},[ke]),{active:ee,activeIndex:p,attributes:V,data:A,rect:I,index:C,newIndex:Re,items:f,isOver:z,isSorting:Y,isDragging:te,listeners:ie,node:D,overIndex:_,over:X,setNodeRef:Q,setActivatorNodeRef:ce,setDroppableNodeRef:W,setDraggableNodeRef:ae,transform:Te??Pe,transition:B()};function B(){if(Te||it&&ze.current.newIndex===C)return Eye;if(!(be&&!hA(F)||!c)&&(Y||Oe))return m0.Transition.toString({...c,property:i$})}}function Tye(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function $v(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Rye=[Vn.Down,Vn.Right,Vn.Up,Vn.Left],Nye=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:s}}=t;if(Rye.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(e.code){case Vn.Down:r.top<p.top&&u.push(h);break;case Vn.Up:r.top>p.top&&u.push(h);break;case Vn.Left:r.left>p.left&&u.push(h);break;case Vn.Right:r.left<p.left&&u.push(h);break}});const c=lge({collisionRect:r,droppableRects:a,droppableContainers:u});let f=q9(c,"id");if(f===(o==null?void 0:o.id)&&c.length>1&&(f=c[1].id),f!=null){const h=i.get(n.id),p=i.get(f),g=p?a.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&g&&h&&p){const _=g1(v).some((O,I)=>s[I]!==O),S=o$(h,p),x=Iye(h,p),E=_||!S?{x:0,y:0}:{x:x?r.width-g.width:0,y:x?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:p0(C,E)}}}};function o$(e,t){return!$v(e)||!$v(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Iye(e,t){return!$v(e)||!$v(t)||!o$(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Oye=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:o,transition:s,isDragging:u}=Aye({id:e,disabled:n}),c={transform:m0.Transform.toString(o),transition:s,zIndex:u?10:void 0,opacity:n?.5:1};return y.jsxs("div",{ref:i,style:c,...r,...a,className:Nt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",u&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[y.jsx(wq,{className:Nt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),y.jsx(Dn,{className:Nt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},Dye=()=>{const{setGlobalModelSortOrder:e,getGloballyEnabledAndOrderedModels:t,dbProviderConfigs:n,globalModelSortOrder:r,isLoading:a}=Ai(Bn(p=>({setGlobalModelSortOrder:p.setGlobalModelSortOrder,getGloballyEnabledAndOrderedModels:p.getGloballyEnabledAndOrderedModels,dbProviderConfigs:p.dbProviderConfigs,globalModelSortOrder:p.globalModelSortOrder,isLoading:p.isLoading}))),[i,o]=R.useState(""),s=R.useMemo(()=>t?t():[],[t,n,r]),u=R.useMemo(()=>{if(!i.trim())return s;const p=i.toLowerCase();return s.filter(g=>g.name.toLowerCase().includes(p)||g.providerName.toLowerCase().includes(p)||g.id.toLowerCase().includes(p))},[s,i]),c=R.useMemo(()=>u.map(p=>p.id),[u]),f=R.useCallback(p=>{const{active:g,over:v}=p;if(v&&g.id!==v.id){const b=s.map(C=>C.id),_=g.id,S=v.id,x=b.indexOf(_),E=b.indexOf(S);if(x!==-1&&E!==-1){const C=bA(b,x,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[s,e]),h=ige(K6(yA),K6(mA,{coordinateGetter:Nye}));return a?y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx(Mr,{className:"h-8 w-1/3"}),y.jsx(Mr,{className:"h-6 w-1/2"}),y.jsx(Mr,{className:"h-64 w-full"})]}):y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),y.jsx(Mv,{}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(Dn,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),y.jsxs("div",{className:"relative",children:[y.jsx(Qv,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(fr,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:p=>o(p.target.value),className:"pl-8 w-full",disabled:a})]}),y.jsx(og,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:u.length>0?y.jsx(sye,{sensors:h,collisionDetection:sge,onDragEnd:f,children:y.jsx(wye,{items:c,strategy:bye,children:u.map(p=>y.jsx(Oye,{id:p.id,name:`${p.name} (${p.providerName})`},p.id))})}):y.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},jye=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=qr(Bn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Git User Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set your user name and email for Git commits made within the VFS. This is required for committing changes."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 rounded-lg border p-4 shadow-sm bg-card",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(Dn,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(fr,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(Dn,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(fr,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})]})})},Mye=vt.memo(jye),Pye=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,isLoading:a}=So(Bn(A=>({syncRepos:A.syncRepos,addSyncRepo:A.addSyncRepo,updateSyncRepo:A.updateSyncRepo,deleteSyncRepo:A.deleteSyncRepo,isLoading:A.isLoading}))),[i,o]=R.useState(!1),[s,u]=R.useState(null),[c,f]=R.useState({name:"",remoteUrl:"",branch:"main"}),[h,p]=R.useState(!1),[g,v]=R.useState({}),b=R.useCallback(()=>{f({name:"",remoteUrl:"",branch:"main"}),o(!1),u(null),p(!1)},[]),_=R.useCallback((A,O)=>{f(I=>({...I,[A]:O}))},[]),S=R.useCallback(async()=>{var A,O,I,D;if(!((A=c.name)!=null&&A.trim())||!((O=c.remoteUrl)!=null&&O.trim())){dt.error("Repository Name and Remote URL are required.");return}p(!0);try{s?await n(s,{name:c.name.trim(),remoteUrl:c.remoteUrl.trim(),branch:((I=c.branch)==null?void 0:I.trim())||"main"}):await t({name:c.name.trim(),remoteUrl:c.remoteUrl.trim(),branch:((D=c.branch)==null?void 0:D.trim())||"main"}),b()}catch(z){console.error("Failed to save sync repo:",z)}finally{p(!1)}},[c,s,t,n,b]),x=A=>{u(A.id),f({name:A.name,remoteUrl:A.remoteUrl,branch:A.branch}),o(!1)},E=R.useCallback(async(A,O)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${O}"? This will unlink it from any conversations.`)){v(I=>({...I,[A]:!0}));try{await r(A),s===A&&b()}catch(I){console.error("Failed to delete sync repo:",I)}finally{v(I=>({...I,[A]:!1}))}}},[r,s,b]),C=()=>{var A,O;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:s?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(Dn,{htmlFor:"repo-name",children:"Name"}),y.jsx(fr,{id:"repo-name",value:c.name||"",onChange:I=>_("name",I.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:h})]}),y.jsxs("div",{children:[y.jsx(Dn,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(fr,{id:"repo-url",type:"url",value:c.remoteUrl||"",onChange:I=>_("remoteUrl",I.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:h})]}),y.jsxs("div",{children:[y.jsx(Dn,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(fr,{id:"repo-branch",value:c.branch||"",onChange:I=>_("branch",I.target.value),placeholder:"main",required:!0,className:"mt-1",disabled:h})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(zt,{variant:"ghost",size:"sm",onClick:b,disabled:h,type:"button",children:[y.jsx(Us,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(zt,{variant:"secondary",size:"sm",onClick:S,disabled:h||!((A=c.name)!=null&&A.trim())||!((O=c.remoteUrl)!=null&&O.trim()),type:"button",children:[h&&y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(cC,{className:"h-4 w-4 mr-1"})," ",h?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area."})]}),!i&&!s&&y.jsxs(zt,{onClick:()=>o(!0),variant:"outline",className:"w-full mb-4",disabled:a,children:[y.jsx(Xv,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(i||s)&&C(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),a&&!i&&!s?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"})]}):e.length===0&&!i&&!s?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(f1,{children:[y.jsx(h1,{children:y.jsxs(Vi,{children:[y.jsx(oa,{children:"Name"}),y.jsx(oa,{children:"Remote URL"}),y.jsx(oa,{children:"Branch"}),y.jsx(oa,{className:"text-right",children:"Actions"})]})}),y.jsx(p1,{children:e.map(A=>{const O=g[A.id],I=s===A.id;return y.jsxs(Vi,{className:I?"bg-muted/50":"",children:[y.jsx(vr,{className:"font-medium",children:A.name}),y.jsx(vr,{className:"text-xs truncate max-w-xs",children:A.remoteUrl}),y.jsx(vr,{children:A.branch}),y.jsxs(vr,{className:"text-right",children:[y.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>x(A),className:"h-8 w-8 mr-1","aria-label":`Edit repo ${A.name}`,disabled:O||h||!!s,children:y.jsx(uC,{className:"h-4 w-4"})}),y.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>E(A.id,A.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete repo ${A.name}`,disabled:O||h,children:O?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(qu,{className:"h-4 w-4"})})]})]},A.id)})})]})})]})]})},Fye=vt.memo(Pye),Lye=()=>{const e=Nt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsxs(PE,{defaultValue:"config",className:"flex flex-col h-full",children:[y.jsxs(FE,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(co,{value:"config",className:e,children:"User Config"}),y.jsx(co,{value:"sync",className:e,children:"Sync Repositories"})]}),y.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto",children:[y.jsx(fo,{value:"config",children:y.jsx(Mye,{})}),y.jsx(fo,{value:"sync",children:y.jsx(Fye,{})})]})]})},$ye=vt.memo(Lye),s$=R.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=qr(Bn(s=>({enableAdvancedSettings:s.enableAdvancedSettings}))),{enableApiKeyManagement:r}=Ai(Bn(s=>({enableApiKeyManagement:s.enableApiKeyManagement}))),{customSettingsTabs:a}=d0(Bn(s=>({customSettingsTabs:s.modSettingsTabs||[]}))),i=s=>{s||t()},o=Nt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(Xw,{open:e,onOpenChange:i,children:y.jsxs(Jw,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(Qw,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(t1,{children:"Settings"}),y.jsx(n1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsxs(PE,{defaultValue:"general",className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(FE,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(co,{value:"general",className:o,children:"General"}),y.jsx(co,{value:"providers",className:o,children:"Providers & Models"}),n&&y.jsx(co,{value:"assistant",className:o,children:"Assistant"}),y.jsx(co,{value:"git",className:o,children:"Git"}),y.jsx(co,{value:"data",className:o,children:"Data"}),y.jsx(co,{value:"mods",className:o,children:"Mods"}),a.map(s=>y.jsx(co,{value:s.id,className:o,children:s.title},s.id))]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(fo,{value:"general",children:y.jsx(S0e,{})}),y.jsx(fo,{value:"providers",className:"flex flex-col data-[state=inactive]:hidden",children:y.jsxs(PE,{defaultValue:"model-order",className:"flex flex-col",children:[y.jsxs(FE,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(co,{value:"model-order",className:o,children:"Global Model Order"}),y.jsx(co,{value:"provider-list",className:o,children:"Provider List & Config"}),r&&y.jsx(co,{value:"api-keys",className:o,children:"API Keys"})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx(fo,{value:"model-order",children:y.jsx(Dye,{})}),y.jsx(fo,{value:"provider-list",children:y.jsx(H0e,{})}),r&&y.jsx(fo,{value:"api-keys",children:y.jsx(A0e,{})})]})]})}),n&&y.jsx(fo,{value:"assistant",children:y.jsx(C0e,{})}),y.jsx(fo,{value:"git",className:"h-full",children:y.jsx($ye,{})}),y.jsx(fo,{value:"data",children:y.jsx(R0e,{})}),y.jsx(fo,{value:"mods",children:y.jsx(M0e,{})}),a.map(s=>y.jsx(fo,{value:s.id,children:vt.isValidElement(s.component)?s.component:typeof s.component=="function"?y.jsx(s.component,{}):null},s.id))]})]}),y.jsx(e1,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(zt,{variant:"outline",onClick:()=>i(!1),children:"Close"})})]})})});s$.displayName="SettingsModalComponent";const Bye=s$,zye=()=>{const e=Wi(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(zt,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Open Settings",className:"h-8 w-8",children:y.jsx(qO,{className:"h-4 w-4"})})},Uye=()=>{const e=Wi(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(qO,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"right",children:"Settings"})]})})},qye=()=>{const e=Na(r=>r.registerChatControl),{isModalOpen:t,toggleModal:n}=Wi(Bn(r=>({isModalOpen:r.isChatControlPanelOpen.settingsModal??!1,toggleModal:r.toggleChatControlPanel})));return vt.useEffect(()=>e({id:"core-settings-trigger",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(zye,{}),iconRenderer:()=>y.jsx(Uye,{}),show:()=>!0,order:100,settingsConfig:{tabId:"mainSettingsModal",title:"Settings"},settingsRenderer:()=>t?y.jsx(Bye,{isOpen:t,onClose:()=>n("settingsModal",!1)}):null}),[e,t,n]),null},l$=({isCollapsed:e,onClick:t})=>y.jsx(zt,{variant:"ghost",size:"icon",onClick:()=>t(),className:"h-8 w-8","aria-label":e?"Open sidebar":"Close sidebar",children:e?y.jsx(Pq,{className:"h-4 w-4"}):y.jsx(jq,{className:"h-4 w-4"})}),Hye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=Wi(Bn(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(l$,{isCollapsed:e,onClick:t})},Vye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=Wi(Bn(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(l$,{isCollapsed:e,onClick:t})}),y.jsx(Rn,{side:"right",children:e?"Open Sidebar":"Close Sidebar"})]})})},Gye=()=>{const e=Na(t=>t.registerChatControl);return vt.useEffect(()=>e({id:"core-sidebar-toggle",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(Hye,{}),iconRenderer:()=>y.jsx(Vye,{}),show:()=>!0,order:10}),[e]),null};var sO=1,Wye=.9,Kye=.8,Zye=.17,C2=.1,k2=.999,Yye=.9999,Xye=.99,Jye=/[\\\/_+.#"@\[\(\{&]/,Qye=/[\\\/_+.#"@\[\(\{&]/g,ebe=/[\s-]/,u$=/[\s-]/g;function XE(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?sO:Xye;var s=`${a},${i}`;if(o[s]!==void 0)return o[s];for(var u=r.charAt(i),c=n.indexOf(u,a),f=0,h,p,g,v;c>=0;)h=XE(e,t,n,r,c+1,i+1,o),h>f&&(c===a?h*=sO:Jye.test(e.charAt(c-1))?(h*=Kye,g=e.slice(a,c-1).match(Qye),g&&a>0&&(h*=Math.pow(k2,g.length))):ebe.test(e.charAt(c-1))?(h*=Wye,v=e.slice(a,c-1).match(u$),v&&a>0&&(h*=Math.pow(k2,v.length))):(h*=Zye,a>0&&(h*=Math.pow(k2,c-a))),e.charAt(c)!==t.charAt(i)&&(h*=Yye)),(h<C2&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(p=XE(e,t,n,r,c+1,i+2,o),p*C2>h&&(h=p*C2)),h>f&&(f=h),c=n.indexOf(u,c+1);return o[s]=f,f}function lO(e){return e.toLowerCase().replace(u$," ")}function tbe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,XE(e,t,lO(e),lO(t),0,0,{})}var lm='[cmdk-group=""]',A2='[cmdk-group-items=""]',nbe='[cmdk-group-heading=""]',c$='[cmdk-item=""]',uO=`${c$}:not([aria-disabled="true"])`,JE="cmdk-item-select",Df="data-value",rbe=(e,t,n)=>tbe(e,t,n),d$=R.createContext(void 0),yg=()=>R.useContext(d$),f$=R.createContext(void 0),vA=()=>R.useContext(f$),h$=R.createContext(void 0),p$=R.forwardRef((e,t)=>{let n=jf(()=>{var Y,re;return{search:"",value:(re=(Y=e.value)!=null?Y:e.defaultValue)!=null?re:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=jf(()=>new Set),a=jf(()=>new Map),i=jf(()=>new Map),o=jf(()=>new Set),s=m$(e),{label:u,children:c,value:f,onValueChange:h,filter:p,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:_=!0,...S}=e,x=Aa(),E=Aa(),C=Aa(),A=R.useRef(null),O=pbe();gd(()=>{if(f!==void 0){let Y=f.trim();n.current.value=Y,I.emit()}},[f]),gd(()=>{O(6,Z)},[]);let I=R.useMemo(()=>({subscribe:Y=>(o.current.add(Y),()=>o.current.delete(Y)),snapshot:()=>n.current,setState:(Y,re,be)=>{var _e,Ie,Pe,Re;if(!Object.is(n.current[Y],re)){if(n.current[Y]=re,Y==="search")F(),W(),O(1,ee);else if(Y==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ke=document.getElementById(C);ke?ke.focus():(_e=document.getElementById(x))==null||_e.focus()}if(O(7,()=>{var ke;n.current.selectedItemId=(ke=V())==null?void 0:ke.id,I.emit()}),be||O(5,Z),((Ie=s.current)==null?void 0:Ie.value)!==void 0){let ke=re??"";(Re=(Pe=s.current).onValueChange)==null||Re.call(Pe,ke);return}}I.emit()}},emit:()=>{o.current.forEach(Y=>Y())}}),[]),D=R.useMemo(()=>({value:(Y,re,be)=>{var _e;re!==((_e=i.current.get(Y))==null?void 0:_e.value)&&(i.current.set(Y,{value:re,keywords:be}),n.current.filtered.items.set(Y,z(re,be)),O(2,()=>{W(),I.emit()}))},item:(Y,re)=>(r.current.add(Y),re&&(a.current.has(re)?a.current.get(re).add(Y):a.current.set(re,new Set([Y]))),O(3,()=>{F(),W(),n.current.value||ee(),I.emit()}),()=>{i.current.delete(Y),r.current.delete(Y),n.current.filtered.items.delete(Y);let be=V();O(4,()=>{F(),(be==null?void 0:be.getAttribute("id"))===Y&&ee(),I.emit()})}),group:Y=>(a.current.has(Y)||a.current.set(Y,new Set),()=>{i.current.delete(Y),a.current.delete(Y)}),filter:()=>s.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:x,inputId:C,labelId:E,listInnerRef:A}),[]);function z(Y,re){var be,_e;let Ie=(_e=(be=s.current)==null?void 0:be.filter)!=null?_e:rbe;return Y?Ie(Y,n.current.search,re):0}function W(){if(!n.current.search||s.current.shouldFilter===!1)return;let Y=n.current.filtered.items,re=[];n.current.filtered.groups.forEach(_e=>{let Ie=a.current.get(_e),Pe=0;Ie.forEach(Re=>{let ke=Y.get(Re);Pe=Math.max(ke,Pe)}),re.push([_e,Pe])});let be=A.current;ae().sort((_e,Ie)=>{var Pe,Re;let ke=_e.getAttribute("id"),ze=Ie.getAttribute("id");return((Pe=Y.get(ze))!=null?Pe:0)-((Re=Y.get(ke))!=null?Re:0)}).forEach(_e=>{let Ie=_e.closest(A2);Ie?Ie.appendChild(_e.parentElement===Ie?_e:_e.closest(`${A2} > *`)):be.appendChild(_e.parentElement===be?_e:_e.closest(`${A2} > *`))}),re.sort((_e,Ie)=>Ie[1]-_e[1]).forEach(_e=>{var Ie;let Pe=(Ie=A.current)==null?void 0:Ie.querySelector(`${lm}[${Df}="${encodeURIComponent(_e[0])}"]`);Pe==null||Pe.parentElement.appendChild(Pe)})}function ee(){let Y=ae().find(be=>be.getAttribute("aria-disabled")!=="true"),re=Y==null?void 0:Y.getAttribute(Df);I.setState("value",re||void 0)}function F(){var Y,re,be,_e;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Ie=0;for(let Pe of r.current){let Re=(re=(Y=i.current.get(Pe))==null?void 0:Y.value)!=null?re:"",ke=(_e=(be=i.current.get(Pe))==null?void 0:be.keywords)!=null?_e:[],ze=z(Re,ke);n.current.filtered.items.set(Pe,ze),ze>0&&Ie++}for(let[Pe,Re]of a.current)for(let ke of Re)if(n.current.filtered.items.get(ke)>0){n.current.filtered.groups.add(Pe);break}n.current.filtered.count=Ie}function Z(){var Y,re,be;let _e=V();_e&&(((Y=_e.parentElement)==null?void 0:Y.firstChild)===_e&&((be=(re=_e.closest(lm))==null?void 0:re.querySelector(nbe))==null||be.scrollIntoView({block:"nearest"})),_e.scrollIntoView({block:"nearest"}))}function V(){var Y;return(Y=A.current)==null?void 0:Y.querySelector(`${c$}[aria-selected="true"]`)}function ae(){var Y;return Array.from(((Y=A.current)==null?void 0:Y.querySelectorAll(uO))||[])}function ie(Y){let re=ae()[Y];re&&I.setState("value",re.getAttribute(Df))}function te(Y){var re;let be=V(),_e=ae(),Ie=_e.findIndex(Re=>Re===be),Pe=_e[Ie+Y];(re=s.current)!=null&&re.loop&&(Pe=Ie+Y<0?_e[_e.length-1]:Ie+Y===_e.length?_e[0]:_e[Ie+Y]),Pe&&I.setState("value",Pe.getAttribute(Df))}function X(Y){let re=V(),be=re==null?void 0:re.closest(lm),_e;for(;be&&!_e;)be=Y>0?fbe(be,lm):hbe(be,lm),_e=be==null?void 0:be.querySelector(uO);_e?I.setState("value",_e.getAttribute(Df)):te(Y)}let ce=()=>ie(ae().length-1),G=Y=>{Y.preventDefault(),Y.metaKey?ce():Y.altKey?X(1):te(1)},Q=Y=>{Y.preventDefault(),Y.metaKey?ie(0):Y.altKey?X(-1):te(-1)};return R.createElement(Jt.div,{ref:t,tabIndex:-1,...S,"cmdk-root":"",onKeyDown:Y=>{var re;(re=S.onKeyDown)==null||re.call(S,Y);let be=Y.nativeEvent.isComposing||Y.keyCode===229;if(!(Y.defaultPrevented||be))switch(Y.key){case"n":case"j":{_&&Y.ctrlKey&&G(Y);break}case"ArrowDown":{G(Y);break}case"p":case"k":{_&&Y.ctrlKey&&Q(Y);break}case"ArrowUp":{Q(Y);break}case"Home":{Y.preventDefault(),ie(0);break}case"End":{Y.preventDefault(),ce();break}case"Enter":{Y.preventDefault();let _e=V();if(_e){let Ie=new Event(JE);_e.dispatchEvent(Ie)}}}}},R.createElement("label",{"cmdk-label":"",htmlFor:D.inputId,id:D.labelId,style:gbe},u),v1(e,Y=>R.createElement(f$.Provider,{value:I},R.createElement(d$.Provider,{value:D},Y))))}),abe=R.forwardRef((e,t)=>{var n,r;let a=Aa(),i=R.useRef(null),o=R.useContext(h$),s=yg(),u=m$(e),c=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;gd(()=>{if(!c)return s.item(a,o==null?void 0:o.id)},[c]);let f=g$(a,i,[e.value,e.children,i],e.keywords),h=vA(),p=uc(O=>O.value&&O.value===f.current),g=uc(O=>c||s.filter()===!1?!0:O.search?O.filtered.items.get(a)>0:!0);R.useEffect(()=>{let O=i.current;if(!(!O||e.disabled))return O.addEventListener(JE,v),()=>O.removeEventListener(JE,v)},[g,e.onSelect,e.disabled]);function v(){var O,I;b(),(I=(O=u.current).onSelect)==null||I.call(O,f.current)}function b(){h.setState("value",f.current,!0)}if(!g)return null;let{disabled:_,value:S,onSelect:x,forceMount:E,keywords:C,...A}=e;return R.createElement(Jt.div,{ref:Dl(i,t),...A,id:a,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!p,"data-disabled":!!_,"data-selected":!!p,onPointerMove:_||s.getDisablePointerSelection()?void 0:b,onClick:_?void 0:v},e.children)}),ibe=R.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=Aa(),s=R.useRef(null),u=R.useRef(null),c=Aa(),f=yg(),h=uc(g=>a||f.filter()===!1?!0:g.search?g.filtered.groups.has(o):!0);gd(()=>f.group(o),[]),g$(o,s,[e.value,e.heading,u]);let p=R.useMemo(()=>({id:o,forceMount:a}),[a]);return R.createElement(Jt.div,{ref:Dl(s,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&R.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),v1(e,g=>R.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},R.createElement(h$.Provider,{value:p},g))))}),obe=R.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=R.useRef(null),i=uc(o=>!o.search);return!n&&!i?null:R.createElement(Jt.div,{ref:Dl(a,t),...r,"cmdk-separator":"",role:"separator"})}),sbe=R.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=vA(),o=uc(c=>c.search),s=uc(c=>c.selectedItemId),u=yg();return R.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),R.createElement(Jt.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":s,id:u.inputId,type:"text",value:a?e.value:o,onChange:c=>{a||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),lbe=R.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=R.useRef(null),o=R.useRef(null),s=uc(c=>c.selectedItemId),u=yg();return R.useEffect(()=>{if(o.current&&i.current){let c=o.current,f=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;f.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(c),()=>{cancelAnimationFrame(h),p.unobserve(c)}}},[]),R.createElement(Jt.div,{ref:Dl(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:u.listId},v1(e,c=>R.createElement("div",{ref:Dl(o,u.listInnerRef),"cmdk-list-sizer":""},c)))}),ube=R.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...s}=e;return R.createElement(_L,{open:n,onOpenChange:r},R.createElement(xL,{container:o},R.createElement(SL,{"cmdk-overlay":"",className:a}),R.createElement(EL,{"aria-label":e.label,"cmdk-dialog":"",className:i},R.createElement(p$,{ref:t,...s}))))}),cbe=R.forwardRef((e,t)=>uc(n=>n.filtered.count===0)?R.createElement(Jt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),dbe=R.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return R.createElement(Jt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},v1(e,o=>R.createElement("div",{"aria-hidden":!0},o)))}),Vh=Object.assign(p$,{List:lbe,Item:abe,Input:sbe,Group:ibe,Separator:obe,Dialog:ube,Empty:cbe,Loading:dbe});function fbe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function hbe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function m$(e){let t=R.useRef(e);return gd(()=>{t.current=e}),t}var gd=typeof window>"u"?R.useEffect:R.useLayoutEffect;function jf(e){let t=R.useRef();return t.current===void 0&&(t.current=e()),t}function uc(e){let t=vA(),n=()=>e(t.snapshot());return R.useSyncExternalStore(t.subscribe,n,n)}function g$(e,t,n,r=[]){let a=R.useRef(),i=yg();return gd(()=>{var o;let s=(()=>{var c;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():a.current}})(),u=r.map(c=>c.trim());i.value(e,s,u),(o=t.current)==null||o.setAttribute(Df,s),a.current=s}),a}var pbe=()=>{let[e,t]=R.useState(),n=jf(()=>new Map);return gd(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function mbe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function v1({asChild:e,children:t},n){return e&&R.isValidElement(t)?R.cloneElement(mbe(t),{ref:t.ref},n(t.props.children)):n(t)}var gbe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function ybe({className:e,...t}){return y.jsx(Vh,{"data-slot":"command",className:Nt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function bbe({className:e,...t}){return y.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[y.jsx(Qv,{className:"size-4 shrink-0 opacity-50"}),y.jsx(Vh.Input,{"data-slot":"command-input",className:Nt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function vbe({className:e,...t}){return y.jsx(Vh.List,{"data-slot":"command-list",className:Nt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function wbe({...e}){return y.jsx(Vh.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function _be({className:e,...t}){return y.jsx(Vh.Group,{"data-slot":"command-group",className:Nt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function xbe({className:e,...t}){return y.jsx(Vh.Item,{"data-slot":"command-item",className:Nt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}var w1="Popover",[y$,i_e]=di(w1,[cc]),bg=cc(),[Sbe,xc]=y$(w1),b$=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=bg(t),u=R.useRef(null),[c,f]=R.useState(!1),[h,p]=Ko({prop:r,defaultProp:a??!1,onChange:i,caller:w1});return y.jsx(aw,{...s,children:y.jsx(Sbe,{scope:t,contentId:Aa(),triggerRef:u,open:h,onOpenChange:p,onOpenToggle:R.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:c,onCustomAnchorAdd:R.useCallback(()=>f(!0),[]),onCustomAnchorRemove:R.useCallback(()=>f(!1),[]),modal:o,children:n})})};b$.displayName=w1;var v$="PopoverAnchor",Ebe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=xc(v$,n),i=bg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return R.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(w0,{...i,...r,ref:t})});Ebe.displayName=v$;var w$="PopoverTrigger",_$=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=xc(w$,n),i=bg(n),o=_n(t,a.triggerRef),s=y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":k$(a.open),...r,ref:o,onClick:Ft(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(w0,{asChild:!0,...i,children:s})});_$.displayName=w$;var wA="PopoverPortal",[Cbe,kbe]=y$(wA,{forceMount:void 0}),x$=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=xc(wA,t);return y.jsx(Cbe,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(Sh,{asChild:!0,container:a,children:r})})})};x$.displayName=wA;var yh="PopoverContent",S$=R.forwardRef((e,t)=>{const n=kbe(yh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=xc(yh,e.__scopePopover);return y.jsx(Ia,{present:r||i.open,children:i.modal?y.jsx(Tbe,{...a,ref:t}):y.jsx(Rbe,{...a,ref:t})})});S$.displayName=yh;var Abe=Uu("PopoverContent.RemoveScroll"),Tbe=R.forwardRef((e,t)=>{const n=xc(yh,e.__scopePopover),r=R.useRef(null),a=_n(t,r),i=R.useRef(!1);return R.useEffect(()=>{const o=r.current;if(o)return Zw(o)},[]),y.jsx(lg,{as:Abe,allowPinchZoom:!0,children:y.jsx(E$,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,c=s.button===2||u;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ft(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Rbe=R.forwardRef((e,t)=>{const n=xc(yh,e.__scopePopover),r=R.useRef(!1),a=R.useRef(!1);return y.jsx(E$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),E$=R.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:f,...h}=e,p=xc(yh,n),g=bg(n);return Ww(),y.jsx(sg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(wh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>p.onOpenChange(!1),children:y.jsx(iw,{"data-state":k$(p.open),role:"dialog",id:p.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),C$="PopoverClose",Nbe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=xc(C$,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>a.onOpenChange(!1))})});Nbe.displayName=C$;var Ibe="PopoverArrow",Obe=R.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=bg(n);return y.jsx(ow,{...a,...r,ref:t})});Obe.displayName=Ibe;function k$(e){return e?"open":"closed"}var Dbe=b$,jbe=_$,Mbe=x$,Pbe=S$;function _A({...e}){return y.jsx(Dbe,{"data-slot":"popover",...e})}function xA({...e}){return y.jsx(jbe,{"data-slot":"popover-trigger",...e})}function SA({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(Mbe,{children:y.jsx(Pbe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Nt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function Fbe({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",emptyText:i="Nothing found.",triggerClassName:o,contentClassName:s,disabled:u=!1}){var p;const[c,f]=R.useState(!1),h=(p=e.find(g=>g.value===t))==null?void 0:p.label;return y.jsxs(_A,{open:c,onOpenChange:f,children:[y.jsx(xA,{asChild:!0,children:y.jsxs(zt,{variant:"outline",role:"combobox","aria-expanded":c,className:Nt("w-[200px] justify-between",o),disabled:u,children:[h||r,y.jsx(Zv,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),y.jsx(SA,{className:Nt("w-[200px] p-0",s),children:y.jsxs(ybe,{children:[y.jsx(bbe,{placeholder:a}),y.jsxs(vbe,{children:[y.jsx(wbe,{children:i}),y.jsx(_be,{children:e.map(g=>y.jsxs(xbe,{value:g.value,onSelect:v=>{n(v===t?"":v),f(!1)},children:[y.jsx(wo,{className:Nt("mr-2 h-4 w-4",t===g.value?"opacity-100":"opacity-0")}),g.label]},g.value))})]})]})})]})}const Lbe=()=>{const{selectedModelId:e,selectModel:t,getGloballyEnabledAndOrderedModels:n,dbProviderConfigs:r,globalModelSortOrder:a,isLoading:i}=Ai(Bn(u=>({selectedModelId:u.selectedModelId,selectModel:u.selectModel,getGloballyEnabledAndOrderedModels:u.getGloballyEnabledAndOrderedModels,dbProviderConfigs:u.dbProviderConfigs,globalModelSortOrder:u.globalModelSortOrder,isLoading:u.isLoading}))),o=R.useMemo(()=>n?n():[],[n,r,a]),s=vt.useMemo(()=>o.map(u=>({value:u.id,label:`${u.name} (${u.providerName})`})),[o]);return i?y.jsx(Mr,{className:"h-10 w-[250px]"}):y.jsx(Fbe,{options:s,value:e??"",onChange:u=>t(u||null),placeholder:"Select Model...",searchPlaceholder:"Search models...",emptyText:"No models enabled.",triggerClassName:"h-10 w-full min-w-[200px] max-w-[300px] text-xs",contentClassName:"w-[--radix-popover-trigger-width]",disabled:i||s.length===0})},$be=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Bbe=()=>{const e=Na(n=>n.registerPromptControl),t=Ai(Bn(n=>({isLoading:n.isLoading,selectedModelId:n.selectedModelId})));return vt.useEffect(()=>e({id:"core-global-model-selector",triggerRenderer:()=>y.jsx(Lbe,{}),show:()=>!0,getMetadata:()=>{const a=t.selectedModelId,{providerId:i,modelId:o}=$be(a);return{providerId:i,modelId:o}},order:10}),[e,t.isLoading,t.selectedModelId]),null},zbe=({className:e})=>{const{temperature:t,setTemperature:n,topP:r,setTopP:a,maxTokens:i,setMaxTokens:o,topK:s,setTopK:u,presencePenalty:c,setPresencePenalty:f,frequencyPenalty:h,setFrequencyPenalty:p}=qr(Bn(D=>({temperature:D.temperature,setTemperature:D.setTemperature,topP:D.topP,setTopP:D.setTopP,maxTokens:D.maxTokens,setMaxTokens:D.setMaxTokens,topK:D.topK,setTopK:D.setTopK,presencePenalty:D.presencePenalty,setPresencePenalty:D.setPresencePenalty,frequencyPenalty:D.frequencyPenalty,setFrequencyPenalty:D.setFrequencyPenalty}))),[g,v]=R.useState(t),[b,_]=R.useState(r??1),[S,x]=R.useState(c??0),[E,C]=R.useState(h??0);R.useEffect(()=>v(t),[t]),R.useEffect(()=>_(r??1),[r]),R.useEffect(()=>x(c??0),[c]),R.useEffect(()=>C(h??0),[h]);const A=R.useCallback((D,z)=>{const W=z.target.value,ee=W===""?null:parseInt(W,10);(W===""||!isNaN(ee)&&ee!==null)&&D(ee)},[]),O=R.useCallback((D,z)=>{D(z[0])},[]),I=R.useCallback((D,z)=>{D(z[0])},[]);return y.jsxs("div",{className:Nt("space-y-4 p-4 w-80",e),children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(Dn,{htmlFor:"popover-temperature",className:"text-xs",children:["Temperature (",g.toFixed(2),")"]}),y.jsx($f,{id:"popover-temperature",min:0,max:1,step:.01,value:[g],onValueChange:D=>O(v,D),onValueCommit:D=>I(n,D)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(Dn,{htmlFor:"popover-top-p",className:"text-xs",children:["Top P (",b.toFixed(2),")"]}),y.jsx($f,{id:"popover-top-p",min:0,max:1,step:.01,value:[b],onValueChange:D=>O(_,D),onValueCommit:D=>I(a,D)})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(Dn,{htmlFor:"popover-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(fr,{id:"popover-max-tokens",type:"number",placeholder:"Default",value:i??"",onChange:D=>A(o,D),min:"1",className:"h-8 text-xs"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(Dn,{htmlFor:"popover-top-k",className:"text-xs",children:"Top K"}),y.jsx(fr,{id:"popover-top-k",type:"number",placeholder:"Default",value:s??"",onChange:D=>A(u,D),min:"1",className:"h-8 text-xs"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(Dn,{htmlFor:"popover-presence-penalty",className:"text-xs",children:["Presence Penalty (",S.toFixed(2),")"]}),y.jsx($f,{id:"popover-presence-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:D=>O(x,D),onValueCommit:D=>I(f,D)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(Dn,{htmlFor:"popover-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",E.toFixed(2),")"]}),y.jsx($f,{id:"popover-frequency-penalty",min:-2,max:2,step:.01,value:[E],onValueChange:D=>O(C,D),onValueCommit:D=>I(p,D)})]})]})},Ube=()=>{const e=Na(u=>u.registerPromptControl),{enableAdvancedSettings:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s}=qr(Bn(u=>({enableAdvancedSettings:u.enableAdvancedSettings,temperature:u.temperature,maxTokens:u.maxTokens,topP:u.topP,topK:u.topK,presencePenalty:u.presencePenalty,frequencyPenalty:u.frequencyPenalty})));return vt.useEffect(()=>e({id:"core-parameter-control",triggerRenderer:()=>y.jsxs(_A,{children:[y.jsx(xA,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Adjust AI Parameters",children:y.jsx(Jq,{className:"h-5 w-5"})})}),y.jsx(SA,{className:"w-auto p-0",side:"top",align:"end",children:y.jsx(zbe,{})})]}),show:()=>t,getParameters:()=>{const f=qr.getState(),h={};return f.temperature!==.7&&(h.temperature=f.temperature),f.maxTokens!==null&&(h.max_tokens=f.maxTokens),f.topP!==null&&(h.top_p=f.topP),f.topK!==null&&(h.top_k=f.topK),f.presencePenalty!==0&&(h.presence_penalty=f.presencePenalty),f.frequencyPenalty!==0&&(h.frequency_penalty=f.frequencyPenalty),Object.keys(h).length>0?h:void 0},order:20}),[e,t,n,r,a,i,o,s]),null},A$=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],qbe=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{if(typeof r.result=="string"){const a=r.result.split(",")[1];a?t(a):n(new Error("Failed to extract base64 content from data URL."))}else n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsDataURL(e)}),Hbe=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?t(r.result):n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsText(e)}),Vbe=()=>{const e=Na(i=>i.registerPromptControl),t=Ib(i=>i.addAttachedFile),n=R.useRef(null),r=R.useCallback(()=>{var i;(i=n.current)==null||i.click()},[]),a=R.useCallback(async i=>{const o=i.target.files;if(o){const s=Array.from(o).map(async u=>{try{const c=u.type||"application/octet-stream",f=u.name.toLowerCase();if(c.startsWith("text/")||c==="application/json"||A$.some(p=>f.endsWith(p))){const p=await Hbe(u);t({source:"direct",name:u.name,type:c,size:u.size,contentText:p})}else{const p=await qbe(u);t({source:"direct",name:u.name,type:c,size:u.size,contentBase64:p})}}catch(c){console.error(`Error reading file ${u.name}:`,c),dt.error(`Failed to read file "${u.name}": ${c instanceof Error?c.message:"Unknown error"}`)}});await Promise.all(s),i.target&&(i.target.value="")}},[t]);return vt.useEffect(()=>e({id:"core-file-control",triggerRenderer:()=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",multiple:!0}),y.jsx(zt,{type:"button",variant:"ghost",size:"icon",onClick:r,className:"h-10 w-10 rounded-full","aria-label":"Attach file(s)",children:y.jsx(Lq,{className:"h-5 w-5"})})]}),show:()=>!0,order:30}),[e,t,r,a]),null},Al=ql(Hl((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,isVfsEnabledForItem:!1,vfsKey:null,configuredVfsKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,n&&dt.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(u=>u.parentId===a).map(u=>u.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1})},setIsVfsEnabledForItem:n=>{console.log(`[VfsStore] Setting isVfsEnabledForItem to: ${n}`),e({isVfsEnabledForItem:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):(t().clearSelection(),t().vfsKey===t().configuredVfsKey&&e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}))},setVfsKey:n=>{const r=t().configuredVfsKey;console.log(`[VfsStore] Setting vfsKey to: ${n} (Current configured: ${r})`),e({vfsKey:n}),n!==r?(console.log("[VfsStore] vfsKey changed. Resetting VFS state."),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}),t().initializeVFS(n||"default_fallback_key")):n===r&&!t().fs&&(console.log("[VfsStore] vfsKey matches configured key, but fs not ready. Retrying initialization."),t().initializeVFS(n||"default_fallback_key"))},setConfiguredVfsKey:n=>{e({configuredVfsKey:n})},initializeVFS:async(n=t().vfsKey||"default_fallback_key")=>{if(!n){console.warn("[VfsStore] initializeVFS called without a valid vfsKey.");return}if(t().configuredVfsKey===n&&t().fs||t().loading){console.log(`[VfsStore] Initialization skipped for key "${n}" (already initialized or loading).`);return}const{_setLoading:r,_setError:a,_addNodes:i,_setFsInstance:o,setConfiguredVfsKey:s}=t();r(!0),a(null),o(null),console.log(`[VfsStore] Initializing VFS with key: ${n}`);try{const u=await Hne(n);if(!u)throw new Error("Filesystem backend initialization failed.");o(u),s(n),console.log(`[VfsStore] VFS instance set for key: ${n}`);const c="vfs-root";let f=t().nodes[c];try{await u.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(h){if(h.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw h}if(!f||f.path!=="/"){const h=Date.now();f={id:c,parentId:null,name:"",path:"/",type:"folder",createdAt:h,lastModified:h},i([f]),console.log("[VfsStore] Root node added/updated in state.")}e(h=>{h.rootId=f.id,h.currentParentId=f.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${f.id}`),await t().fetchNodes(f.id)}catch(u){console.error("Failed to initialize VFS:",u),a("Failed to initialize VFS."),o(null),s(null)}finally{r(!1)}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:u}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${f}`);const h=await Tk(f);console.log(`[VfsStore] Fetched ${h.length} entries for ${f}`);const p=n??u??"",g=new Set(h.map(_=>_.path)),v=Object.values(s).filter(_=>_.parentId===n&&!g.has(_.path)).map(_=>_.id);v.length>0&&(console.log(`[VfsStore] Removing ${v.length} nodes.`),t()._removeNodes(v));const b=h.map(_=>{const S=Object.values(s).find(E=>E.path===_.path),x=Date.now();return{id:(S==null?void 0:S.id)||Lo(),parentId:n,name:_.name,path:_.path,type:_.isDirectory?"folder":"file",size:_.size,createdAt:(S==null?void 0:S.createdAt)??x,lastModified:_.lastModified.getTime(),mimeType:_.isDirectory?void 0:_.mimeType}});b.length>0&&(console.log(`[VfsStore] Adding/Updating ${b.length} nodes.`),i(b)),e(_=>{const S=b.map(x=>x.id);(!_.childrenMap[p]||JSON.stringify(_.childrenMap[p].sort())!==JSON.stringify(S.sort()))&&(_.childrenMap[p]=S,console.log(`[VfsStore] Updated childrenMap for parent: ${p}`))})}catch(c){console.error("Failed to fetch VFS nodes:",c),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Gn(n);if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i}=t(),o=Gn(n),s=r(o);s&&s.type==="folder"?(e(u=>{u.currentParentId=s.id}),t().childrenMap[s.id]||await a(s.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,_addNodes:c}=t();if(!o){i("Filesystem not initialized.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const f=n?s[n]:s[u||""],h=f?f.path:"/",p=Ab(h,r.trim());try{throw await o.promises.stat(p),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await t8(p);const g=Date.now(),b={id:Lo(),parentId:n,name:r.trim(),path:p,type:"folder",createdAt:g,lastModified:g};c([b])}catch(f){console.error("Failed to create directory:",f),i(f.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u}=t();if(!o){i("Filesystem not initialized.");return}a(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";await n8(Array.from(r),f),await t().fetchNodes(n)}catch(c){console.error("Failed to upload files:",c),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{for(const s of n){const u=t().nodes[s];u&&await Rk(u.path,u.type==="folder")}i(n)}catch(s){console.error("Failed to delete nodes:",s),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:u,rootId:c}=t();if(!u){i("Filesystem not initialized.");return}if(!r.trim()){i("Name cannot be empty.");return}const f=s[n];if(!f){i("Item not found.");return}if(f.name!==r.trim()){a(!0);try{const h=f.parentId?s[f.parentId]:s[c||""],p=h?h.path:"/",g=Ab(p,r.trim());try{throw await u.promises.stat(g),new Error(`"${r.trim()}" already exists.`)}catch(b){if(b.code!=="ENOENT")throw b}await Wne(f.path,g);const v={name:r.trim(),path:g,lastModified:Date.now()};o(n,v),await t().fetchNodes(f.parentId)}catch(h){console.error("Failed to rename item:",h),i(h.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i}=t();if(!a)return i("Filesystem not initialized."),null;const o=r[n];if(!o||o.type!=="file")return i("File not found."),null;try{const s=await Fh(o.path),u=o.mimeType||"application/octet-stream",c=new Blob([s],{type:u});return{name:o.name,blob:c}}catch(s){return console.error("Failed to download file:",s),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),Gbe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Vi,{className:"bg-muted/30",children:[y.jsx(vr,{className:"px-2 py-1"}),y.jsx(vr,{className:"px-2 py-1",children:y.jsx(Yv,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(vr,{className:"py-1 px-2",colSpan:3,children:y.jsx(fr,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(vr,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(wo,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"top",children:"Create (Enter)"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(Us,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var _1="Checkbox",[Wbe,o_e]=di(_1),[Kbe,Zbe]=Wbe(_1),T$=R.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[p,g]=R.useState(null),v=_n(t,C=>g(C)),b=R.useRef(!1),_=p?f||!!p.closest("form"):!0,[S,x]=Ko({prop:a,defaultProp:i??!1,onChange:c,caller:_1}),E=R.useRef(S);return R.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const A=()=>x(E.current);return C.addEventListener("reset",A),()=>C.removeEventListener("reset",A)}},[p,x]),y.jsxs(Kbe,{scope:n,state:S,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"checkbox","aria-checked":zu(S)?"mixed":S,"aria-required":o,"data-state":O$(S),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:v,onKeyDown:Ft(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Ft(e.onClick,C=>{x(A=>zu(A)?!0:!A),_&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),_&&y.jsx(I$,{control:p,bubbles:!b.current,name:r,value:u,checked:S,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"},defaultChecked:zu(i)?!1:i})]})});T$.displayName=_1;var R$="CheckboxIndicator",N$=R.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Zbe(R$,n);return y.jsx(Ia,{present:r||zu(i.state)||i.state===!0,children:y.jsx(Jt.span,{"data-state":O$(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});N$.displayName=R$;var Ybe="CheckboxBubbleInput",I$=R.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=R.useRef(null),u=_n(s,o),c=o1(n),f=rw(t);R.useEffect(()=>{const p=s.current;if(!p)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&b){const _=new Event("click",{bubbles:r});p.indeterminate=zu(n),b.call(p,zu(n)?!1:n),p.dispatchEvent(_)}},[c,n,r]);const h=R.useRef(zu(n)?!1:n);return y.jsx(Jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});I$.displayName=Ybe;function zu(e){return e==="indeterminate"}function O$(e){return zu(e)?"indeterminate":e?"checked":"unchecked"}var Xbe=T$,Jbe=N$;function Qbe({className:e,...t}){return y.jsx(Xbe,{"data-slot":"checkbox",className:Nt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Jbe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(wo,{className:"size-3.5"})})})}var QE=["Enter"," "],eve=["ArrowDown","PageUp","Home"],D$=["ArrowUp","PageDown","End"],tve=[...eve,...D$],nve={ltr:[...QE,"ArrowRight"],rtl:[...QE,"ArrowLeft"]},rve={ltr:["ArrowLeft"],rtl:["ArrowRight"]},vg="Menu",[y0,ave,ive]=r1(vg),[Rd,x1]=di(vg,[ive,cc,a1]),S1=cc(),j$=a1(),[ove,Nd]=Rd(vg),[sve,wg]=Rd(vg),M$=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=S1(t),[u,c]=R.useState(null),f=R.useRef(!1),h=Ca(i),p=$h(a);return R.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),y.jsx(aw,{...s,children:y.jsx(ove,{scope:t,open:n,onOpenChange:h,content:u,onContentChange:c,children:y.jsx(sve,{scope:t,onClose:R.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:p,modal:o,children:r})})})};M$.displayName=vg;var lve="MenuAnchor",EA=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=S1(n);return y.jsx(w0,{...a,...r,ref:t})});EA.displayName=lve;var CA="MenuPortal",[uve,P$]=Rd(CA,{forceMount:void 0}),F$=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Nd(CA,t);return y.jsx(uve,{scope:t,forceMount:n,children:y.jsx(Ia,{present:n||i.open,children:y.jsx(Sh,{asChild:!0,container:a,children:r})})})};F$.displayName=CA;var vo="MenuContent",[cve,kA]=Rd(vo),L$=R.forwardRef((e,t)=>{const n=P$(vo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Nd(vo,e.__scopeMenu),o=wg(vo,e.__scopeMenu);return y.jsx(y0.Provider,{scope:e.__scopeMenu,children:y.jsx(Ia,{present:r||i.open,children:y.jsx(y0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(dve,{...a,ref:t}):y.jsx(fve,{...a,ref:t})})})})}),dve=R.forwardRef((e,t)=>{const n=Nd(vo,e.__scopeMenu),r=R.useRef(null),a=_n(t,r);return R.useEffect(()=>{const i=r.current;if(i)return Zw(i)},[]),y.jsx(AA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ft(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),fve=R.forwardRef((e,t)=>{const n=Nd(vo,e.__scopeMenu);return y.jsx(AA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),hve=Uu("MenuContent.ScrollLock"),AA=R.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...b}=e,_=Nd(vo,n),S=wg(vo,n),x=S1(n),E=j$(n),C=ave(n),[A,O]=R.useState(null),I=R.useRef(null),D=_n(t,I,_.onContentChange),z=R.useRef(0),W=R.useRef(""),ee=R.useRef(0),F=R.useRef(null),Z=R.useRef("right"),V=R.useRef(0),ae=v?lg:R.Fragment,ie=v?{as:hve,allowPinchZoom:!0}:void 0,te=ce=>{var Pe,Re;const G=W.current+ce,Q=C().filter(ke=>!ke.disabled),Y=document.activeElement,re=(Pe=Q.find(ke=>ke.ref.current===Y))==null?void 0:Pe.textValue,be=Q.map(ke=>ke.textValue),_e=Cve(be,G,re),Ie=(Re=Q.find(ke=>ke.textValue===_e))==null?void 0:Re.ref.current;(function ke(ze){W.current=ze,window.clearTimeout(z.current),ze!==""&&(z.current=window.setTimeout(()=>ke(""),1e3))})(G),Ie&&setTimeout(()=>Ie.focus())};R.useEffect(()=>()=>window.clearTimeout(z.current),[]),Ww();const X=R.useCallback(ce=>{var Q,Y;return Z.current===((Q=F.current)==null?void 0:Q.side)&&Ave(ce,(Y=F.current)==null?void 0:Y.area)},[]);return y.jsx(cve,{scope:n,searchRef:W,onItemEnter:R.useCallback(ce=>{X(ce)&&ce.preventDefault()},[X]),onItemLeave:R.useCallback(ce=>{var G;X(ce)||((G=I.current)==null||G.focus(),O(null))},[X]),onTriggerLeave:R.useCallback(ce=>{X(ce)&&ce.preventDefault()},[X]),pointerGraceTimerRef:ee,onPointerGraceIntentChange:R.useCallback(ce=>{F.current=ce},[]),children:y.jsx(ae,{...ie,children:y.jsx(sg,{asChild:!0,trapped:a,onMountAutoFocus:Ft(i,ce=>{var G;ce.preventDefault(),(G=I.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(wh,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:y.jsx(IL,{asChild:!0,...E,dir:S.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:O,onEntryFocus:Ft(u,ce=>{S.isUsingKeyboardRef.current||ce.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(iw,{role:"menu","aria-orientation":"vertical","data-state":eB(_.open),"data-radix-menu-content":"",dir:S.dir,...x,...b,ref:D,style:{outline:"none",...b.style},onKeyDown:Ft(b.onKeyDown,ce=>{const Q=ce.target.closest("[data-radix-menu-content]")===ce.currentTarget,Y=ce.ctrlKey||ce.altKey||ce.metaKey,re=ce.key.length===1;Q&&(ce.key==="Tab"&&ce.preventDefault(),!Y&&re&&te(ce.key));const be=I.current;if(ce.target!==be||!tve.includes(ce.key))return;ce.preventDefault();const Ie=C().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);D$.includes(ce.key)&&Ie.reverse(),Sve(Ie)}),onBlur:Ft(e.onBlur,ce=>{ce.currentTarget.contains(ce.target)||(window.clearTimeout(z.current),W.current="")}),onPointerMove:Ft(e.onPointerMove,b0(ce=>{const G=ce.target,Q=V.current!==ce.clientX;if(ce.currentTarget.contains(G)&&Q){const Y=ce.clientX>V.current?"right":"left";Z.current=Y,V.current=ce.clientX}}))})})})})})})});L$.displayName=vo;var pve="MenuGroup",TA=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"group",...r,ref:t})});TA.displayName=pve;var mve="MenuLabel",$$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{...r,ref:t})});$$.displayName=mve;var Bv="MenuItem",cO="menu.itemSelect",E1=R.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=R.useRef(null),o=wg(Bv,e.__scopeMenu),s=kA(Bv,e.__scopeMenu),u=_n(t,i),c=R.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(cO,{bubbles:!0,cancelable:!0});h.addEventListener(cO,g=>r==null?void 0:r(g),{once:!0}),VO(h,p),p.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(B$,{...a,ref:u,disabled:n,onClick:Ft(e.onClick,f),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),c.current=!0},onPointerUp:Ft(e.onPointerUp,h=>{var p;c.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:Ft(e.onKeyDown,h=>{const p=s.searchRef.current!=="";n||p&&h.key===" "||QE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});E1.displayName=Bv;var B$=R.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=kA(Bv,n),s=j$(n),u=R.useRef(null),c=_n(t,u),[f,h]=R.useState(!1),[p,g]=R.useState("");return R.useEffect(()=>{const v=u.current;v&&g((v.textContent??"").trim())},[i.children]),y.jsx(y0.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:y.jsx(OL,{asChild:!0,...s,focusable:!r,children:y.jsx(Jt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Ft(e.onPointerMove,b0(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ft(e.onPointerLeave,b0(v=>o.onItemLeave(v))),onFocus:Ft(e.onFocus,()=>h(!0)),onBlur:Ft(e.onBlur,()=>h(!1))})})})}),gve="MenuCheckboxItem",z$=R.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(G$,{scope:e.__scopeMenu,checked:n,children:y.jsx(E1,{role:"menuitemcheckbox","aria-checked":zv(n)?"mixed":n,...a,ref:t,"data-state":NA(n),onSelect:Ft(a.onSelect,()=>r==null?void 0:r(zv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});z$.displayName=gve;var U$="MenuRadioGroup",[yve,bve]=Rd(U$,{value:void 0,onValueChange:()=>{}}),q$=R.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ca(r);return y.jsx(yve,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(TA,{...a,ref:t})})});q$.displayName=U$;var H$="MenuRadioItem",V$=R.forwardRef((e,t)=>{const{value:n,...r}=e,a=bve(H$,e.__scopeMenu),i=n===a.value;return y.jsx(G$,{scope:e.__scopeMenu,checked:i,children:y.jsx(E1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":NA(i),onSelect:Ft(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});V$.displayName=H$;var RA="MenuItemIndicator",[G$,vve]=Rd(RA,{checked:!1}),W$=R.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=vve(RA,n);return y.jsx(Ia,{present:r||zv(i.checked)||i.checked===!0,children:y.jsx(Jt.span,{...a,ref:t,"data-state":NA(i.checked)})})});W$.displayName=RA;var wve="MenuSeparator",K$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});K$.displayName=wve;var _ve="MenuArrow",Z$=R.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=S1(n);return y.jsx(ow,{...a,...r,ref:t})});Z$.displayName=_ve;var xve="MenuSub",[s_e,Y$]=Rd(xve),hm="MenuSubTrigger",X$=R.forwardRef((e,t)=>{const n=Nd(hm,e.__scopeMenu),r=wg(hm,e.__scopeMenu),a=Y$(hm,e.__scopeMenu),i=kA(hm,e.__scopeMenu),o=R.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,c={__scopeMenu:e.__scopeMenu},f=R.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return R.useEffect(()=>f,[f]),R.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),u(null)}},[s,u]),y.jsx(EA,{asChild:!0,...c,children:y.jsx(B$,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":eB(n.open),...e,ref:Dl(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ft(e.onPointerMove,b0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ft(e.onPointerLeave,b0(h=>{var g,v;f();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const b=(v=n.content)==null?void 0:v.dataset.side,_=b==="right",S=_?-5:5,x=p[_?"left":"right"],E=p[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+S,y:h.clientY},{x,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x,y:p.bottom}],side:b}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ft(e.onKeyDown,h=>{var g;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||nve[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});X$.displayName=hm;var J$="MenuSubContent",Q$=R.forwardRef((e,t)=>{const n=P$(vo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Nd(vo,e.__scopeMenu),o=wg(vo,e.__scopeMenu),s=Y$(J$,e.__scopeMenu),u=R.useRef(null),c=_n(t,u);return y.jsx(y0.Provider,{scope:e.__scopeMenu,children:y.jsx(Ia,{present:r||i.open,children:y.jsx(y0.Slot,{scope:e.__scopeMenu,children:y.jsx(AA,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=u.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ft(e.onFocusOutside,f=>{f.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ft(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ft(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),p=rve[o.dir].includes(f.key);h&&p&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),f.preventDefault())})})})})})});Q$.displayName=J$;function eB(e){return e?"open":"closed"}function zv(e){return e==="indeterminate"}function NA(e){return zv(e)?"indeterminate":e?"checked":"unchecked"}function Sve(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Eve(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Cve(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Eve(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function kve(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,p=u.y;f>r!=p>r&&n<(h-c)*(r-f)/(p-f)+c&&(a=!a)}return a}function Ave(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return kve(n,t)}function b0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var tB=M$,nB=EA,rB=F$,aB=L$,iB=TA,oB=$$,sB=E1,lB=z$,uB=q$,cB=V$,dB=W$,fB=K$,hB=Z$,pB=X$,mB=Q$,IA="ContextMenu",[Tve,l_e]=di(IA,[x1]),pi=x1(),[Rve,gB]=Tve(IA),yB=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=R.useState(!1),u=pi(t),c=Ca(r),f=R.useCallback(h=>{s(h),c(h)},[c]);return y.jsx(Rve,{scope:t,open:o,onOpenChange:f,modal:i,children:y.jsx(tB,{...u,dir:a,open:o,onOpenChange:f,modal:i,children:n})})};yB.displayName=IA;var bB="ContextMenuTrigger",vB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=gB(bB,n),o=pi(n),s=R.useRef({x:0,y:0}),u=R.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),c=R.useRef(0),f=R.useCallback(()=>window.clearTimeout(c.current),[]),h=p=>{s.current={x:p.clientX,y:p.clientY},i.onOpenChange(!0)};return R.useEffect(()=>f,[f]),R.useEffect(()=>void(r&&f()),[r,f]),y.jsxs(y.Fragment,{children:[y.jsx(nB,{...o,virtualRef:u}),y.jsx(Jt.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Ft(e.onContextMenu,p=>{f(),h(p),p.preventDefault()}),onPointerDown:r?e.onPointerDown:Ft(e.onPointerDown,cb(p=>{f(),c.current=window.setTimeout(()=>h(p),700)})),onPointerMove:r?e.onPointerMove:Ft(e.onPointerMove,cb(f)),onPointerCancel:r?e.onPointerCancel:Ft(e.onPointerCancel,cb(f)),onPointerUp:r?e.onPointerUp:Ft(e.onPointerUp,cb(f))})]})});vB.displayName=bB;var Nve="ContextMenuPortal",wB=e=>{const{__scopeContextMenu:t,...n}=e,r=pi(t);return y.jsx(rB,{...r,...n})};wB.displayName=Nve;var _B="ContextMenuContent",xB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=gB(_B,n),i=pi(n),o=R.useRef(!1);return y.jsx(aB,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var u;(u=e.onInteractOutside)==null||u.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xB.displayName=_B;var Ive="ContextMenuGroup",Ove=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(iB,{...a,...r,ref:t})});Ove.displayName=Ive;var Dve="ContextMenuLabel",jve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(oB,{...a,...r,ref:t})});jve.displayName=Dve;var Mve="ContextMenuItem",SB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(sB,{...a,...r,ref:t})});SB.displayName=Mve;var Pve="ContextMenuCheckboxItem",Fve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(lB,{...a,...r,ref:t})});Fve.displayName=Pve;var Lve="ContextMenuRadioGroup",$ve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(uB,{...a,...r,ref:t})});$ve.displayName=Lve;var Bve="ContextMenuRadioItem",zve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(cB,{...a,...r,ref:t})});zve.displayName=Bve;var Uve="ContextMenuItemIndicator",qve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(dB,{...a,...r,ref:t})});qve.displayName=Uve;var Hve="ContextMenuSeparator",EB=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(fB,{...a,...r,ref:t})});EB.displayName=Hve;var Vve="ContextMenuArrow",Gve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(hB,{...a,...r,ref:t})});Gve.displayName=Vve;var Wve="ContextMenuSubTrigger",Kve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(pB,{...a,...r,ref:t})});Kve.displayName=Wve;var Zve="ContextMenuSubContent",Yve=R.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=pi(n);return y.jsx(mB,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Yve.displayName=Zve;function cb(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Xve=yB,Jve=vB,Qve=wB,ewe=xB,twe=SB,nwe=EB;function rwe({...e}){return y.jsx(Xve,{"data-slot":"context-menu",...e})}function awe({...e}){return y.jsx(Jve,{"data-slot":"context-menu-trigger",...e})}function iwe({className:e,...t}){return y.jsx(Qve,{children:y.jsx(ewe,{"data-slot":"context-menu-content",className:Nt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function vl({className:e,inset:t,variant:n="default",...r}){return y.jsx(twe,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Nt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function dO({className:e,...t}){return y.jsx(nwe,{"data-slot":"context-menu-separator",className:Nt("bg-border -mx-1 my-1 h-px",e),...t})}const owe=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:p,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:_,handleGitPull:S,handleGitCommit:x,handleGitPush:E,handleGitStatus:C})=>{const A=ee=>{ee.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},O=ee=>{ee.key==="Enter"?h():ee.key==="Escape"&&f()},I=e.type==="folder",D=I?r?rq:Yv:tq,z=I?r?"text-green-400":"text-yellow-400":"text-blue-400",W=y.jsxs(Vi,{className:Nt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:A,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(vr,{className:"px-2 py-1",children:y.jsx(Qbe,{checked:n,onCheckedChange:ee=>u(!!ee,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||I})}),y.jsx(vr,{className:"px-2 py-1",children:y.jsx(D,{className:Nt("h-5 w-5",z)})}),y.jsx(vr,{className:"py-1 px-2",children:t?y.jsx(fr,{ref:b,value:a,onChange:ee=>v(ee.target.value),onBlur:h,onKeyDown:O,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:ee=>ee.stopPropagation(),disabled:i}):y.jsx("span",{className:Nt("truncate",I&&"cursor-pointer hover:underline"),title:e.name,onClick:ee=>{I&&(ee.stopPropagation(),s(e))},children:e.name})}),y.jsx(vr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?Gv(e.size):""}),y.jsx(vr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(vr,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:Nt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:ee=>{ee.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),children:i?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(wo,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"top",children:"Save (Enter)"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:ee=>{ee.stopPropagation(),f()},"aria-label":"Cancel edit",disabled:i,children:y.jsx(Us,{className:"h-4 w-4"})})}),y.jsx(Rn,{side:"top",children:"Cancel (Esc)"})]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:ee=>{ee.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||o,children:y.jsx(B2,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Rename"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:ee=>{ee.stopPropagation(),p(e)},"aria-label":I?"Download folder as ZIP":"Download file",disabled:i,children:y.jsx(Rb,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:I?"Download folder (.zip)":"Download file"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(zt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:ee=>{ee.stopPropagation(),g(e)},"aria-label":`Delete ${I?"folder":"file"}`,disabled:i,children:y.jsx(qu,{className:"h-3.5 w-3.5"})})}),y.jsx(Rn,{side:"top",children:"Delete"})]})})]})})})]},e.id);return I?y.jsxs(rwe,{children:[y.jsx(awe,{disabled:t||i,asChild:!0,children:W}),y.jsxs(iwe,{children:[y.jsx(vl,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(dO,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(vl,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(gq,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(vl,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(pq,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(vl,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(bq,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(vl,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(UO,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(vl,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(lC,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(dO,{}),y.jsxs(vl,{onSelect:()=>c(e),disabled:i,children:[y.jsx(B2,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(vl,{onSelect:()=>p(e),disabled:i,children:[y.jsx(Rb,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(vl,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(qu,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):W},swe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,cancelCreatingFolder:p,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:_,setNewFolderName:S,renameInputRef:x,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:A,handleGitPull:O,handleGitCommit:I,handleGitPush:D,handleGitStatus:z})=>{const W=R.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx(og,{className:"flex-grow h-0 border-t border-border",children:y.jsxs(f1,{className:"w-full text-sm",children:[y.jsx(h1,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Vi,{className:"hover:bg-card",children:[y.jsx(oa,{className:"w-[40px] px-2"}),y.jsx(oa,{className:"w-[40px] px-2"}),y.jsx(oa,{children:"Name"}),y.jsx(oa,{className:"w-[100px] text-right",children:"Size"}),y.jsx(oa,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(oa,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(p1,{children:[r&&y.jsx(Gbe,{newFolderName:a,setNewFolderName:S,handleCreateFolder:g,cancelCreatingFolder:p,newFolderInputRef:E,isOperationLoading:o}),W.map(ee=>{const F=t===ee.path,Z=i.has(ee.id),V=C[ee.path]??!1;return y.jsx(owe,{entry:ee,isEditingThis:F,isChecked:Z,isGitRepo:V,newName:F?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:v,handleDelete:b,setNewName:_,renameInputRef:x,handleGitInit:A,handleGitPull:O,handleGitCommit:I,handleGitPush:D,handleGitStatus:z},ee.id)}),e.length===0&&!r&&!o&&y.jsx(Vi,{children:y.jsx(vr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},lwe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:u,startCreatingFolder:c,handleUploadClick:f,handleFolderUploadClick:h,handleArchiveUploadClick:p,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:_,archiveInputRef:S,handleFileChange:x,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:b,onChange:x,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:x,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:S,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(zt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(xq,{className:"h-4 w-4"})}),y.jsx(zt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(cq,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(zt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Zn,{className:"h-4 w-4 animate-spin"}):y.jsx(Jv,{className:"h-4 w-4"})}),y.jsxs(zt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(sC,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(zt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),f()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(BO,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(zt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Yv,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(zt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),p()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(WU,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(zt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(lC,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(zt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Zn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(CU,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),uwe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:u})=>y.jsx(Xw,{open:e,onOpenChange:t,children:y.jsxs(Jw,{children:[y.jsxs(Qw,{children:[y.jsx(t1,{children:"Clone Git Repository"}),y.jsxs(n1,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:u}),"."]})]}),y.jsxs("div",{className:"grid gap-4 py-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(Dn,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(fr,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(Dn,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(fr,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]}),y.jsxs(e1,{children:[y.jsx(zt,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),y.jsx(zt,{onClick:s,disabled:o||!n.trim(),children:o?y.jsxs(y.Fragment,{children:[y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),"Cloning..."]}):"Clone"})]})]})}),cwe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(Xw,{open:e,onOpenChange:t,children:y.jsxs(Jw,{children:[y.jsxs(Qw,{children:[y.jsx(t1,{children:"Commit Changes"}),y.jsxs(n1,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]})]}),y.jsx("div",{className:"grid gap-4 py-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(Dn,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(fr,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})}),y.jsxs(e1,{children:[y.jsx(zt,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),y.jsx(zt,{onClick:o,disabled:i||!r.trim(),children:i?y.jsxs(y.Fragment,{children:[y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),"Committing..."]}):"Commit"})]})]})}),CB=R.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,error:a,fetchNodes:i,createDirectory:o,uploadFiles:s,deleteNodes:u,renameNode:c,setCurrentPath:f,initializeVFS:h,rootId:p,fs:g,_setError:v,selectFile:b,deselectFile:_,selectedFileIds:S}=Al(Bn(fe=>({nodes:fe.nodes,childrenMap:fe.childrenMap,currentParentId:fe.currentParentId,selectedFileIds:fe.selectedFileIds,loading:fe.loading,error:fe.error,fetchNodes:fe.fetchNodes,createDirectory:fe.createDirectory,uploadFiles:fe.uploadFiles,deleteNodes:fe.deleteNodes,renameNode:fe.renameNode,selectFile:fe.selectFile,deselectFile:fe.deselectFile,setCurrentPath:fe.setCurrentPath,initializeVFS:fe.initializeVFS,rootId:fe.rootId,fs:fe.fs,_setOperationLoading:fe._setOperationLoading,_setError:fe._setError,_addNodes:fe._addNodes,_removeNodes:fe._removeNodes}))),[x,E]=R.useState(""),[C,A]=R.useState(null),[O,I]=R.useState(!1),[D,z]=R.useState(""),[W,ee]=R.useState(!1),[F,Z]=R.useState({}),[V,ae]=R.useState(!1),[ie,te]=R.useState(""),[X,ce]=R.useState(""),[G,Q]=R.useState(!1),[Y,re]=R.useState(!1),[be,_e]=R.useState(null),[Ie,Pe]=R.useState(""),[Re,ke]=R.useState(!1),[ze,it]=R.useState({}),Oe=R.useRef(null),Te=R.useRef(null),B=R.useRef(null),Ce=R.useRef(null),Ne=R.useRef(null),de=n?e[n]:null,oe=de?de.path:"/",xe=(t[n||p||""]||[]).map(fe=>e[fe]).filter(fe=>!!fe).sort((fe,Fe)=>fe.type==="folder"&&Fe.type==="file"?-1:fe.type==="file"&&Fe.type==="folder"?1:fe.name.localeCompare(Fe.name)),Le=R.useMemo(()=>xe.filter(fe=>fe.type==="folder").map(fe=>fe.path),[xe]),Se=r||W||G||Re;R.useEffect(()=>{!p&&!r&&h("default_vfs_key")},[p,h,r]),R.useEffect(()=>{n!==null&&!t[n]&&!r&&g?i(n):n===null&&p&&!t[p]&&!r&&g&&i(p)},[n,i,t,p,r,g]),R.useEffect(()=>{var fe,Fe;C&&((fe=Ce.current)==null||fe.focus(),(Fe=Ce.current)==null||Fe.select())},[C]),R.useEffect(()=>{var fe;O&&((fe=Ne.current)==null||fe.focus())},[O]),R.useEffect(()=>{(async()=>{if(!g||Le.length===0)return;const Fe={};let ot=!1;for(const jt of Le)try{const un=await Kne(jt);F[jt]!==un&&(Fe[jt]=un,ot=!0)}catch(un){console.error(`Error checking git status for ${jt}:`,un),F[jt]!==!1&&(Fe[jt]=!1,ot=!0)}ot&&Z(jt=>({...jt,...Fe}))})()},[Le,g,F]);const Ve=R.useCallback(async(fe,Fe=!0)=>{if(!Se){Fe&&ee(!0),v(null);try{await fe()}catch(ot){console.error("[FileManager Operation Error]:",ot)}finally{Fe&&ee(!1)}}},[Se,v]),xt=R.useCallback(fe=>{Se||C||fe.type==="folder"&&Ve(()=>f(fe.path),!1)},[Se,C,f,Ve]),ht=R.useCallback(()=>{if(Se||oe==="/")return;const fe=Wv(oe);Ve(()=>f(fe),!1)},[Se,oe,f,Ve]),Et=R.useCallback(()=>{Se||oe==="/"||Ve(()=>f("/"),!1)},[Se,oe,f,Ve]),Lt=R.useCallback(()=>{Ve(()=>i(n))},[Ve,i,n]),Tt=R.useCallback((fe,Fe)=>{const ot=e[Fe];ot&&ot.type==="file"?fe?b(Fe):_(Fe):ot&&ot.type==="folder"&&dt.info("Folders cannot be attached to the prompt.")},[b,_,e]),Ut=R.useCallback(fe=>{Se||O||(A(fe.path),E(fe.name),I(!1))},[Se,O]),ge=R.useCallback(()=>{A(null),E("")},[]),N=R.useCallback(async()=>{if(!C||!x.trim()){ge();return}const fe=Object.values(e).find(Fe=>Fe.path===C);fe&&fe.name!==x.trim()&&await Ve(()=>c(fe.id,x.trim())),ge()},[C,x,c,ge,e,Ve]),q=R.useCallback(()=>{Se||C||(I(!0),z(""),A(null))},[Se,C]),he=R.useCallback(()=>{I(!1),z("")},[]),De=R.useCallback(async()=>{if(!D.trim()){he();return}await Ve(()=>o(n,D.trim())),he()},[D,o,n,he,Ve]),ve=()=>{var fe;return(fe=Oe.current)==null?void 0:fe.click()},Ae=()=>{var fe;return(fe=Te.current)==null?void 0:fe.click()},le=()=>{var fe;return(fe=B.current)==null?void 0:fe.click()},ct=R.useCallback(async fe=>{const Fe=fe.target.files;Fe&&Fe.length>0&&(await Ve(()=>s(n,Fe)),fe.target&&(fe.target.value=""))},[s,n,Ve]),yt=R.useCallback(async fe=>{var ot;const Fe=(ot=fe.target.files)==null?void 0:ot[0];Fe&&(await Ve(async()=>{await Gne(Fe,oe),await i(n)}),fe.target&&(fe.target.value=""))},[oe,i,n,Ve]),M=R.useCallback(async fe=>{window.confirm(`Delete ${fe.type} "${fe.name}"?${fe.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ve(()=>u([fe.id]))},[u,Ve]),Be=R.useCallback(async fe=>{await Ve(async()=>{fe.type==="file"?await Vne(fe.path):await D4(`${fe.name}.zip`,fe.path)})},[Ve]),et=R.useCallback(async()=>{xe.length!==0&&await Ve(async()=>{const fe=sa(oe)||"root";await D4(`${fe}_export.zip`,oe)})},[oe,xe.length,Ve]),me=R.useCallback(async(fe,Fe)=>{if(!ze[fe]){it(ot=>({...ot,[fe]:!0})),v(null);try{await Fe()}catch(ot){console.error(`[FileManager Git Op Error @ ${fe}]:`,ot)}finally{it(ot=>({...ot,[fe]:!1}))}}},[v,ze]),je=R.useCallback(fe=>{me(fe,async()=>{await r8(fe),Z(Fe=>({...Fe,[fe]:!0}))})},[me]),Ke=R.useCallback(fe=>{me(fe,()=>Ok(fe))},[me]),Ct=R.useCallback(fe=>{_e(fe),Pe(""),re(!0)},[]),ye=R.useCallback(fe=>{me(fe,()=>Dk(fe))},[me]),U=R.useCallback(fe=>{me(fe,()=>a8(fe))},[me]),$=R.useCallback(()=>{te(""),ce(""),ae(!0)},[]),H=R.useCallback(async()=>{if(!ie.trim()){dt.error("Repository URL cannot be empty.");return}Q(!0),v(null);try{await Nk(oe,ie.trim(),X.trim()||void 0),ae(!1),await Lt()}catch{}finally{Q(!1)}},[ie,X,oe,v,Lt]),pe=R.useCallback(async()=>{if(!be||!Ie.trim()){dt.error("Commit message cannot be empty.");return}ke(!0),v(null);try{await Ik(be,Ie.trim()),re(!1)}catch{}finally{ke(!1)}},[be,Ie,v]);return y.jsxs("div",{className:"flex h-full flex-col bg-card text-card-foreground rounded-lg border border-border shadow-sm overflow-hidden",children:[y.jsx(lwe,{currentPath:oe,isAnyLoading:Se,isOperationLoading:W,entries:xe,editingPath:C,creatingFolder:O,handleNavigateHome:Et,handleNavigateUp:ht,handleRefresh:Lt,startCreatingFolder:q,handleUploadClick:ve,handleFolderUploadClick:Ae,handleArchiveUploadClick:le,handleDownloadAll:et,handleCloneClick:$,fileInputRef:Oe,folderInputRef:Te,archiveInputRef:B,handleFileChange:ct,handleArchiveChange:yt}),a&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-xs text-center flex-shrink-0",children:["Error: ",a]}),y.jsx(swe,{entries:xe,editingPath:C,newName:x,creatingFolder:O,newFolderName:D,selectedFileIds:S,isOperationLoading:W||Object.values(ze).some(Boolean),handleNavigate:xt,handleCheckboxChange:Tt,startEditing:Ut,cancelEditing:ge,handleRename:N,cancelCreatingFolder:he,handleCreateFolder:De,handleDownload:Be,handleDelete:M,setNewName:E,setNewFolderName:z,renameInputRef:Ce,newFolderInputRef:Ne,gitRepoStatus:F,handleGitInit:je,handleGitPull:Ke,handleGitCommit:Ct,handleGitPush:ye,handleGitStatus:U}),y.jsx(uwe,{isOpen:V,onOpenChange:ae,cloneRepoUrl:ie,setCloneRepoUrl:te,cloneBranch:X,setCloneBranch:ce,isCloning:G,onSubmitClone:H,currentPath:oe}),y.jsx(cwe,{isOpen:Y,onOpenChange:re,commitPath:be,commitMessage:Ie,setCommitMessage:Pe,isCommitting:Re,onSubmitCommit:pe})]})});CB.displayName="FileManager";const dwe="core-vfs-control",fwe=e=>{let t="";const n=new Uint8Array(e),r=n.byteLength;for(let a=0;a<r;a++)t+=String.fromCharCode(n[a]);return btoa(t)},hwe=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:A$.some(r=>n.endsWith(r))},pwe=()=>{const[e,t]=R.useState(!1),[n,r]=R.useState(!1),{nodes:a,selectedFileIds:i,clearSelection:o,uploadFiles:s}=Al(Bn(x=>({nodes:x.nodes,selectedFileIds:x.selectedFileIds,clearSelection:x.clearSelection,uploadFiles:x.uploadFiles,currentParentId:x.currentParentId}))),{addAttachedFile:u,attachedFilesMetadata:c}=Ib(Bn(x=>({addAttachedFile:x.addAttachedFile,attachedFilesMetadata:x.attachedFilesMetadata}))),f=vt.useMemo(()=>Array.from(i).map(x=>a[x]).filter(x=>!!x&&x.type==="file"),[i,a]),h=R.useCallback(async()=>{if(f.length===0||n)return;r(!0);let x=0,E=0;const C=f.map(async A=>{try{const O=await Fh(A.path),I=A.mimeType||"application/octet-stream",D=hwe(A.name,I),z={source:"vfs",name:A.name,type:I,size:A.size,path:A.path};D?z.contentText=new TextDecoder().decode(O):z.contentBase64=fwe(O),u(z),x++}catch(O){E++,console.error(`Failed to read VFS file ${A.path}:`,O),dt.error(`Failed to attach "${A.name}": ${O instanceof Error?O.message:"Read error"}`)}});await Promise.all(C),x>0&&dt.success(`${x} file(s) attached from VFS.`),E>0&&dt.warning(`${E} file(s) could not be attached.`),o(),r(!1),t(!1)},[f,u,o,n]),p=R.useCallback(x=>{x?t(!0):(i.size>0&&o(),t(!1))},[o,i.size]),g=Al.getState().currentParentId,v=R.useCallback(()=>{const x=g?Al.getState().nodes[g]:Al.getState().nodes[Al.getState().rootId||""];return(x==null?void 0:x.path)||"/"},[g]),b=R.useCallback(async x=>{x.preventDefault(),x.stopPropagation();const E=x.dataTransfer.files;if(E&&E.length>0)try{await s(g,E),dt.success(`${E.length} file(s) added to VFS at ${v()}. Select them in the manager.`)}catch(C){console.error("Error adding files via drop:",C),dt.error("Failed to add dropped files.")}},[s,g,v]),_=R.useCallback(x=>{x.preventDefault(),x.stopPropagation()},[]),S=c.filter(x=>x.source==="vfs").length;return y.jsxs(Xw,{open:e,onOpenChange:p,children:[y.jsx(kn,{children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx("div",{onDrop:b,onDragOver:_,className:"inline-block",children:y.jsx(Upe,{asChild:!0,children:y.jsxs(zt,{variant:"ghost",size:"icon",className:Nt("relative h-10 w-10 rounded-full",S>0&&"text-blue-500 hover:text-blue-600"),"aria-label":`Attach files from VFS (${S} selected)`,children:[y.jsx(iq,{className:"h-5 w-5"}),S>0&&y.jsx("span",{className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-blue-500 text-xs text-white",children:S})]})})})}),y.jsxs(Rn,{children:[y.jsxs("p",{children:["Attach files from VFS (",S," selected)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag & drop enabled"})]})]})}),y.jsxs(Jw,{className:"max-w-[1200px] h-[85vh] sm:max-w-4xl flex flex-col",children:[y.jsxs(Qw,{children:[y.jsx(t1,{children:"File Manager"}),y.jsx(n1,{children:'Manage files in the virtual filesystem. Select files and click "Attach Selected" to add them to your prompt.'})]}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(CB,{})}),y.jsxs(e1,{children:[y.jsx(Hpe,{asChild:!0,children:y.jsx(zt,{variant:"outline",onClick:()=>p(!1),children:"Cancel"})}),y.jsxs(zt,{onClick:h,disabled:f.length===0||n,children:[n&&y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Attaching...":`Attach Selected (${f.length})`]})]})]})]})},mwe=()=>{const e=Na(n=>n.registerPromptControl),{enableVfs:t}=Al(Bn(n=>({enableVfs:n.enableVfs})));return R.useEffect(()=>e({id:dwe,triggerRenderer:()=>y.jsx(pwe,{}),show:()=>t,order:40}),[e,t]),null};var C1="DropdownMenu",[gwe,u_e]=di(C1,[x1]),mi=x1(),[ywe,kB]=gwe(C1),AB=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,u=mi(t),c=R.useRef(null),[f,h]=Ko({prop:a,defaultProp:i??!1,onChange:o,caller:C1});return y.jsx(ywe,{scope:t,triggerId:Aa(),triggerRef:c,contentId:Aa(),open:f,onOpenChange:h,onOpenToggle:R.useCallback(()=>h(p=>!p),[h]),modal:s,children:y.jsx(tB,{...u,open:f,onOpenChange:h,dir:r,modal:s,children:n})})};AB.displayName=C1;var TB="DropdownMenuTrigger",RB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=kB(TB,n),o=mi(n);return y.jsx(nB,{asChild:!0,...o,children:y.jsx(Jt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Dl(t,i.triggerRef),onPointerDown:Ft(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(i.onOpenToggle(),i.open||s.preventDefault())}),onKeyDown:Ft(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&i.onOpenToggle(),s.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});RB.displayName=TB;var bwe="DropdownMenuPortal",NB=e=>{const{__scopeDropdownMenu:t,...n}=e,r=mi(t);return y.jsx(rB,{...r,...n})};NB.displayName=bwe;var IB="DropdownMenuContent",OB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=kB(IB,n),i=mi(n),o=R.useRef(!1);return y.jsx(aB,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Ft(e.onCloseAutoFocus,s=>{var u;o.current||(u=a.triggerRef.current)==null||u.focus(),o.current=!1,s.preventDefault()}),onInteractOutside:Ft(e.onInteractOutside,s=>{const u=s.detail.originalEvent,c=u.button===0&&u.ctrlKey===!0,f=u.button===2||c;(!a.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});OB.displayName=IB;var vwe="DropdownMenuGroup",wwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(iB,{...a,...r,ref:t})});wwe.displayName=vwe;var _we="DropdownMenuLabel",DB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(oB,{...a,...r,ref:t})});DB.displayName=_we;var xwe="DropdownMenuItem",jB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(sB,{...a,...r,ref:t})});jB.displayName=xwe;var Swe="DropdownMenuCheckboxItem",Ewe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(lB,{...a,...r,ref:t})});Ewe.displayName=Swe;var Cwe="DropdownMenuRadioGroup",kwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(uB,{...a,...r,ref:t})});kwe.displayName=Cwe;var Awe="DropdownMenuRadioItem",Twe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(cB,{...a,...r,ref:t})});Twe.displayName=Awe;var Rwe="DropdownMenuItemIndicator",Nwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(dB,{...a,...r,ref:t})});Nwe.displayName=Rwe;var Iwe="DropdownMenuSeparator",MB=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(fB,{...a,...r,ref:t})});MB.displayName=Iwe;var Owe="DropdownMenuArrow",Dwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(hB,{...a,...r,ref:t})});Dwe.displayName=Owe;var jwe="DropdownMenuSubTrigger",Mwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(pB,{...a,...r,ref:t})});Mwe.displayName=jwe;var Pwe="DropdownMenuSubContent",Fwe=R.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=mi(n);return y.jsx(mB,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Fwe.displayName=Pwe;var Lwe=AB,$we=RB,Bwe=NB,zwe=OB,Uwe=DB,qwe=jB,Hwe=MB;function Vwe({...e}){return y.jsx(Lwe,{"data-slot":"dropdown-menu",...e})}function Gwe({...e}){return y.jsx($we,{"data-slot":"dropdown-menu-trigger",...e})}function Wwe({className:e,sideOffset:t=4,...n}){return y.jsx(Bwe,{children:y.jsx(zwe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Nt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function um({className:e,inset:t,variant:n="default",...r}){return y.jsx(qwe,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Nt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function Kwe({className:e,inset:t,...n}){return y.jsx(Uwe,{"data-slot":"dropdown-menu-label","data-inset":t,className:Nt("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function fO({className:e,...t}){return y.jsx(Hwe,{"data-slot":"dropdown-menu-separator",className:Nt("bg-border -mx-1 my-1 h-px",e),...t})}const Zwe=()=>{const{selectedItemId:e,selectedItemType:t,conversations:n,syncRepos:r,conversationSyncStatus:a,linkConversationToRepo:i,syncConversation:o}=So(Bn(x=>({selectedItemId:x.selectedItemId,selectedItemType:x.selectedItemType,conversations:x.conversations,syncRepos:x.syncRepos,conversationSyncStatus:x.conversationSyncStatus,linkConversationToRepo:x.linkConversationToRepo,syncConversation:x.syncConversation}))),s=t==="conversation"?e:null,u=n.find(x=>x.id===s),c=u==null?void 0:u.syncRepoId,f=r.find(x=>x.id===c),h=s?a[s]??"idle":"idle",p=x=>{s&&i(s,x)},g=()=>{s&&c&&o(s)},v=()=>{alert("Please go to Settings -> Git -> Sync Repositories to configure sync.")},_=f?(()=>{switch(h){case"syncing":return{icon:y.jsx(Zn,{className:"h-3 w-3 animate-spin text-blue-500"}),tooltip:`Syncing with ${f==null?void 0:f.name}...`,colorClass:"text-blue-500"};case"error":return{icon:y.jsx(Ps,{className:"h-3 w-3 text-destructive fill-destructive/30"}),tooltip:`Sync error with ${f==null?void 0:f.name}. Check console/logs.`,colorClass:"text-destructive"};case"needs-sync":return{icon:y.jsx(Ps,{className:"h-3 w-3 text-orange-500 fill-orange-300"}),tooltip:`Local changes need sync with ${f==null?void 0:f.name}.`,colorClass:"text-orange-500"};case"idle":default:return{icon:y.jsx(Tb,{className:"h-3 w-3 text-green-500"}),tooltip:`Synced with ${f==null?void 0:f.name}.`,colorClass:"text-green-500"}}})():null,S=!s;return y.jsxs(Vwe,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(An,{children:[y.jsx(Tn,{asChild:!0,children:y.jsx(Gwe,{asChild:!0,disabled:S,children:y.jsxs(zt,{type:"button",variant:"ghost",size:"icon",className:Nt("h-10 w-10 rounded-full relative",!f&&"text-muted-foreground hover:text-foreground",_==null?void 0:_.colorClass,S&&"opacity-50 cursor-not-allowed"),"aria-label":"Conversation Git Sync Status",children:[y.jsx(lq,{className:"h-5 w-5"}),_&&y.jsx("span",{className:"absolute top-0 right-0",children:_.icon})]})})}),y.jsx(Rn,{side:"top",children:S?"Select a conversation to manage sync":f?_==null?void 0:_.tooltip:"Link conversation to sync repository"})]})}),y.jsxs(Wwe,{align:"end",children:[y.jsx(Kwe,{children:"Conversation Sync"}),y.jsx(fO,{}),r.map(x=>y.jsxs(um,{onClick:()=>p(x.id),disabled:!s||h==="syncing",children:[c===x.id&&y.jsx(Tb,{className:"mr-2 h-4 w-4 text-green-500"}),"Link to: ",x.name]},x.id)),c&&y.jsxs(um,{onClick:()=>p(null),disabled:!s||h==="syncing",children:[y.jsx(Us,{className:"mr-2 h-4 w-4 text-muted-foreground"}),"Unlink Repository"]}),r.length===0&&y.jsx(um,{disabled:!0,children:"No sync repos configured"}),y.jsx(fO,{}),y.jsxs(um,{onClick:g,disabled:!s||!c||h==="syncing",children:[h==="syncing"?y.jsx(Zn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Jv,{className:"mr-2 h-4 w-4"}),"Sync Now"]}),y.jsxs(um,{onClick:v,children:[y.jsx(Zq,{className:"mr-2 h-4 w-4"}),"Configure Repositories..."]})]})]})},Ywe=()=>{const e=Na(n=>n.registerPromptControl),t=So(n=>n.syncRepos.length);return vt.useEffect(()=>e({id:"core-git-sync-control",triggerRenderer:()=>y.jsx(Zwe,{}),show:()=>!0,order:50}),[e,t]),null};async function Gh(e){const{fs:t,initializeVFS:n,vfsKey:r}=Al.getState();if(t)return t;console.log(`[${e}] VFS not ready. Attempting initialization with key: ${r||"default_fallback_key"}...`),dt.info(`Initializing filesystem for ${e}...`);try{await n(r||"default_fallback_key");const{fs:a}=Al.getState();if(a)return console.log(`[${e}] VFS initialization successful.`),dt.success(`Filesystem ready for ${e}.`),a;throw new Error("VFS initialization failed after attempt.")}catch(a){return console.error(`[${e}] Failed to ensure VFS readiness:`,a),dt.error(`Filesystem unavailable for ${e}: ${a instanceof Error?a.message:String(a)}`),null}}const Xwe={description:"Lists files and folders within a specified directory in the Virtual File System (VFS). Use '/' for the root directory.",parameters:L.object({path:L.string().describe("The absolute path of the directory to list (e.g., '/', '/documents', '/project/code').")})},Jwe={description:"Reads the content of a specified file from the Virtual File System (VFS). Returns the content as a string.",parameters:L.object({path:L.string().describe("The absolute path of the file to read (e.g., '/documents/notes.txt', '/project/code/main.py').")})},Qwe={description:"Writes or overwrites a file with the given content in the Virtual File System (VFS). Creates parent directories if they don't exist.",parameters:L.object({path:L.string().describe("The absolute path where the file should be written (e.g., '/documents/new_notes.txt', '/project/data.json')."),content:L.string().describe("The text content to write into the file.")})},e1e={description:"Creates a new directory (and any necessary parent directories) at the specified path in the Virtual File System (VFS).",parameters:L.object({path:L.string().describe("The absolute path of the directory to create (e.g., '/new_folder', '/project/assets/images').")})},t1e={description:"Deletes a file or an empty directory from the Virtual File System (VFS). Use with caution.",parameters:L.object({path:L.string().describe("The absolute path of the file or empty directory to delete (e.g., '/documents/old_notes.txt', '/temp_folder').")})},n1e={description:"Deletes a directory and ALL its contents (files and subdirectories) recursively from the Virtual File System (VFS). VERY DANGEROUS - USE WITH EXTREME CAUTION.",parameters:L.object({path:L.string().describe("The absolute path of the directory to delete recursively (e.g., '/project_to_delete', '/old_backups'). Cannot be '/'.")})},r1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_list_directory called for path: ${e.path}`),!await Gh("vfs_list_directory"))return{status:"error",error:"Filesystem not available."};console.log("[VFS Tool Execute] VfsOps.VFS instance state:",cE);try{const r=await Tk(e.path);return{status:"success",isEmpty:r.length===0,content:r.map(a=>({name:a.name,type:a.isDirectory?"folder":"file",size:a.size,lastModified:a.lastModified.toISOString()}))}}catch(r){return{status:"error",error:`Failed to list directory: ${r.message}`}}},a1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_read_file called for path: ${e.path}`),!await Gh("vfs_read_file"))return{status:"error",error:"Filesystem not available."};try{const r=await Fh(e.path);return{status:"success",content:new TextDecoder().decode(r)}}catch(r){return{status:"error",error:`Failed to read file: ${r.message}`}}},i1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_write_file called for path: ${e.path}`),!await Gh("vfs_write_file"))return{status:"error",error:"Filesystem not available."};try{return await Dw(e.path,e.content),{status:"success"}}catch(r){return{status:"error",error:`Failed to write file: ${r.message}`}}},o1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_create_directory called for path: ${e.path}`),!await Gh("vfs_create_directory"))return{status:"error",error:"Filesystem not available."};try{return await t8(e.path),{status:"success"}}catch(r){return{status:"error",error:`Failed to create directory: ${r.message}`}}},s1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_delete called for path: ${e.path}`),!await Gh("vfs_delete"))return{status:"error",error:"Filesystem not available."};if(e.path==="/")return{status:"error",error:"Cannot delete the root directory."};try{return await Rk(e.path,!1),{status:"success"}}catch(r){return{status:"error",error:`Failed to delete item: ${r.message}`}}},l1e=async(e,t)=>{if(console.log(`[VFS Tool Execute] vfs_delete_recursive called for path: ${e.path}`),!await Gh("vfs_delete_recursive"))return{status:"error",error:"Filesystem not available."};if(e.path==="/")return{status:"error",error:"Cannot delete the root directory."};try{return await Rk(e.path,!0),{status:"success"}}catch(r){return{status:"error",error:`Failed to delete directory recursively: ${r.message}`}}},u1e=()=>{const{registerTool:e}=Na();R.useEffect(()=>{const t=[],n=(r,a,i)=>{const o=async(s,u)=>i(s,u);t.push(e("core",r,a,o))};return n("vfs_list_directory",Xwe,r1e),n("vfs_read_file",Jwe,a1e),n("vfs_write_file",Qwe,i1e),n("vfs_create_directory",e1e,o1e),n("vfs_delete",t1e,s1e),n("vfs_delete_recursive",n1e,l1e),()=>{console.log("[useVfsToolsRegistration] VFS tools unregistered"),t.forEach(r=>r())}},[e])},Nf="core-git-tools";function c1e(){const{registerTool:e,unregisterTool:t}=Na.getState();R.useEffect(()=>{const n=[],r=()=>{const{gitUserName:f,gitUserEmail:h}=qr.getState();return!f||!h?(dt.error("Git user name and email must be configured in Settings before using Git tools."),!1):!0},a={description:"Clones a remote Git repository into a specified parent directory within the VFS. Creates a new folder named after the repository.",parameters:L.object({parentPath:L.string().describe("The absolute path of the directory *where* the new repository folder should be created (e.g., '/', '/projects')."),repoUrl:L.string().url().describe("The HTTPS URL of the remote Git repository to clone."),branch:L.string().optional().describe("Optional specific branch to clone (defaults to the repository's default branch).")}),execute:async({parentPath:f,repoUrl:h,branch:p})=>{const g=Gn(f);try{await Nk(g,h,p);const v=sa(h.replace(/\/$/,"").replace(/\.git$/,""));return{status:"success",path:Gn(`${g}/${v}`)}}catch(v){return{status:"error",message:v.message||"An unknown error occurred during clone."}}}};n.push(e(Nf,"git_clone",a));const i={description:"Pulls the latest changes from the remote repository for a specified local Git repository path within the VFS.",parameters:L.object({path:L.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{if(!r())return{status:"error",message:"Git user config missing."};const h=Gn(f);try{return await Ok(h),{status:"success",path:h}}catch(p){return{status:"error",message:p.message||"An unknown error occurred during pull."}}}};n.push(e(Nf,"git_pull",i));const o={description:"Pushes local commits from a specified local Git repository path within the VFS to its configured remote repository.",parameters:L.object({path:L.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{const h=Gn(f);try{return await Dk(h),{status:"success",path:h}}catch(p){return{status:"error",message:p.message||"An unknown error occurred during push."}}}};n.push(e(Nf,"git_push",o));const s={description:"Stages all changes (new, modified, deleted files) and commits them with a message to the specified local Git repository path within the VFS.",parameters:L.object({path:L.string().describe("The absolute path of the local Git repository directory in the VFS."),message:L.string().describe("The commit message.")}),execute:async({path:f,message:h})=>{if(!r())return{status:"error",message:"Git user config missing."};const p=Gn(f);if(!h.trim())return{status:"error",message:"Commit message cannot be empty."};try{return await Ik(p,h),{status:"success",path:p}}catch(g){return{status:"error",message:g.message||"An unknown error occurred during commit."}}}};n.push(e(Nf,"git_commit",s));const u={description:"Shows the working tree status (changes not staged for commit) for a specified local Git repository path within the VFS.",parameters:L.object({path:L.string().describe("The absolute path of the local Git repository directory in the VFS.")}),execute:async({path:f})=>{const h=Gn(f);try{return await a8(h),{status:"success",path:h}}catch(p){return{status:"error",message:p.message||"An unknown error occurred checking status."}}}};n.push(e(Nf,"git_status",u));const c={description:"Initializes a new, empty Git repository at the specified directory path within the VFS.",parameters:L.object({path:L.string().describe("The absolute path of the directory to initialize as a Git repository.")}),execute:async({path:f})=>{const h=Gn(f);try{return await r8(h),{status:"success",path:h}}catch(p){return{status:"error",message:p.message||"An unknown error occurred during git init."}}}};return n.push(e(Nf,"git_init",c)),()=>{n.forEach(f=>f()),console.log("[useGitToolsRegistration] Git tools unregistered")}},[e,t])}const d1e=({className:e,localMaxSteps:t,setLocalMaxSteps:n})=>{const{selectedItemId:r,selectedItemType:a,getConversationById:i,updateCurrentConversationToolSettings:o}=So(Bn(x=>({selectedItemId:x.selectedItemId,selectedItemType:x.selectedItemType,getConversationById:x.getConversationById,updateCurrentConversationToolSettings:x.updateCurrentConversationToolSettings}))),s=Na(x=>x.tools),[u,c]=R.useState(""),f=R.useMemo(()=>{var x;if(a==="conversation"&&r){const E=i(r);return new Set(((x=E==null?void 0:E.metadata)==null?void 0:x.enabledTools)??[])}return new Set},[r,a,i]),h=R.useMemo(()=>Object.entries(s).map(([x,{definition:E,modId:C}])=>({name:x,description:E.description??"No description provided.",modId:C})).sort((x,E)=>x.name.localeCompare(E.name)),[s]),p=R.useMemo(()=>{const x=u.trim().toLowerCase();return x?h.filter(E=>E.name.toLowerCase().includes(x)||E.description.toLowerCase().includes(x)||E.modId.toLowerCase().includes(x)):h},[h,u]),g=R.useCallback((x,E)=>{const C=new Set(f);E?C.add(x):C.delete(x),o({enabledTools:Array.from(C)})},[f,o]),v=R.useCallback(x=>{const E=x?h.map(C=>C.name):[];o({enabledTools:E})},[h,o]),b=x=>{const E=x.target.value;if(E===""){n(null);return}const C=parseInt(E,10);isNaN(C)?n(null):n(C)},_=t===null?"":String(t),S=a!=="conversation"||!r;return y.jsxs("div",{className:Nt("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[" ",y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(Qv,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(fr,{type:"search",placeholder:"Filter tools...",value:u,onChange:x=>c(x.target.value),className:"pl-8 h-9",disabled:S})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(Dn,{className:"text-xs text-muted-foreground",children:[p.length," tools shown (",f.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(zt,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:S||h.length===0,children:"Enable All"}),y.jsx(zt,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:S||h.length===0||f.size===0,children:"Disable All"})]})]}),y.jsx(og,{className:"h-56 border rounded-md p-2 bg-background/50",children:S?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):p.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:p.map(x=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx(zl,{id:`tool-switch-${x.name}`,checked:f.has(x.name),onCheckedChange:E=>g(x.name,E),className:"flex-shrink-0",disabled:S}),y.jsxs(Dn,{htmlFor:`tool-switch-${x.name}`,className:Nt("text-sm font-normal flex-grow pl-2 space-y-0.5",S?"cursor-not-allowed":"cursor-pointer"),title:`${x.name} (from ${x.modId})`,children:[y.jsx("span",{className:"block font-medium",children:x.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:x.description})]})]},x.name))})}),y.jsxs("div",{className:"pt-2",children:[y.jsx(Dn,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),y.jsx(fr,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:_,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(qr.getState().toolMaxSteps??5),disabled:S}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20)."})]})]})},T2="core-tool-selector";function f1e(){const e=Na(h=>h.registerPromptControl),t=Wi(h=>h.isPromptControlPanelOpen[T2]??!1),n=Wi(h=>h.togglePromptControlPanel),{selectedItemId:r,selectedItemType:a,getConversationById:i}=So(Bn(h=>({selectedItemId:h.selectedItemId,selectedItemType:h.selectedItemType,getConversationById:h.getConversationById}))),o=qr(h=>h.toolMaxSteps),[s,u]=R.useState(null),c=R.useRef(null);R.useEffect(()=>{t?(u(o),c.current=null):(u(null),c.current=null)},[t,o]);const f=R.useCallback(h=>{if(u(h),h===null||isNaN(h))c.current=null;else{const p=Math.max(1,Math.min(20,h));c.current=p}},[]);R.useEffect(()=>e({id:T2,order:30,show:()=>!0,triggerRenderer:()=>{var b,_;const p=a==="conversation"&&r?i(r):null,g=((_=(b=p==null?void 0:p.metadata)==null?void 0:b.enabledTools)==null?void 0:_.length)??0,v=a==="conversation"&&!!r;return y.jsxs(_A,{open:t&&v,onOpenChange:S=>{v&&n(T2,S)},children:[y.jsx(xA,{asChild:!0,children:y.jsxs(zt,{variant:"outline",size:"sm",className:"h-8 px-2 text-xs",disabled:!v,"aria-label":"Select Tools",children:[y.jsx(Nb,{className:"h-3.5 w-3.5 mr-1"}),"Tools ",g>0?`(${g})`:""]})}),y.jsx(SA,{className:"w-auto p-0",side:"top",align:"start",onOpenAutoFocus:S=>S.preventDefault(),children:y.jsx(d1e,{localMaxSteps:s||5,setLocalMaxSteps:f})})]})},getMetadata:()=>{var _,S;const p=So.getState(),g=qr.getState(),v={};if(p.selectedItemType==="conversation"&&p.selectedItemId){const x=p.getConversationById(p.selectedItemId);(S=(_=x==null?void 0:x.metadata)==null?void 0:_.enabledTools)!=null&&S.length&&(v.enabledTools=[...x.metadata.enabledTools])}const b=c.current;return b!==null&&b!==g.toolMaxSteps&&(v.maxSteps=b),v},clearOnSubmit:()=>{c.current=null}}),[e,t,n,r,a,i,s,f,o])}const h1e=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},p1e=()=>{const[e,t]=R.useState(!0),{selectedItemId:n,selectedItemType:r,loadSidebarItems:a,addConversation:i,selectItem:o,getProjectById:s,getConversationById:u}=So(Bn(ae=>({selectedItemId:ae.selectedItemId,selectedItemType:ae.selectedItemType,loadSidebarItems:ae.loadSidebarItems,addConversation:ae.addConversation,selectItem:ae.selectItem,getProjectById:ae.getProjectById,getConversationById:ae.getConversationById,isLoading:ae.isLoading}))),{interactions:c,status:f,setCurrentConversationId:h}=ar(Bn(ae=>({interactions:ae.interactions,status:ae.status,setCurrentConversationId:ae.setCurrentConversationId}))),{globalError:p,isSidebarCollapsed:g}=Wi(Bn(ae=>({globalError:ae.globalError,isSidebarCollapsed:ae.isSidebarCollapsed}))),v=Wi(ae=>ae.isChatControlPanelOpen.settingsModal??!1),b=Na(ae=>ae.chatControls),_=R.useMemo(()=>Object.values(b),[b]),{loadDbMods:S,setLoadedMods:x}=d0(Bn(ae=>({loadDbMods:ae.loadDbMods,setLoadedMods:ae.setLoadedMods,isLoading:ae.isLoading}))),{loadInitialData:E}=Ai(Bn(ae=>({loadInitialData:ae.loadInitialData,isLoading:ae.isLoading}))),{loadSettings:C,globalSystemPrompt:A}=qr(Bn(ae=>({loadSettings:ae.loadSettings,globalSystemPrompt:ae.globalSystemPrompt})));Fhe(),qye(),Gye(),Bbe(),Ube(),Vbe(),mwe(),Ywe(),u1e(),c1e(),f1e(),R.useEffect(()=>{let ae=!0;return(async()=>{if(console.log("LiteChat: Starting initialization..."),t(!0),!!ae&&(await C(),console.log("LiteChat: Settings loaded."),!!ae&&(await E(),console.log("LiteChat: Provider data loaded."),!!ae&&(await a(),console.log("LiteChat: Sidebar items loaded."),!!ae&&(await S(),console.log("LiteChat: DB Mods loaded."),!!ae))))){try{const te=d0.getState().dbMods;if(console.log(`LiteChat: Loading ${te.length} mods...`),!ae)return;const X=await dhe(te);ae&&(x(X),console.log(`LiteChat: ${X.length} mods processed.`))}catch(te){console.error("LiteChat: Failed to load mods:",te)}ae&&(console.log("LiteChat: Initialization complete."),t(!1))}})(),()=>{ae=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[C,E,a,S,x]);const O=R.useCallback(ae=>ae.flatMap(ie=>{var X,ce,G,Q,Y,re;const te=[];if((X=ie.prompt)!=null&&X.content&&typeof ie.prompt.content=="string"?te.push({role:"user",content:ie.prompt.content}):(G=(ce=ie.prompt)==null?void 0:ce.metadata)!=null&&G.attachedFiles&&ie.prompt.metadata.attachedFiles.length>0&&((Q=ie.prompt)!=null&&Q.content),ie.response&&typeof ie.response=="string"&&te.push({role:"assistant",content:ie.response}),(Y=ie.metadata)!=null&&Y.toolCalls&&Array.isArray(ie.metadata.toolCalls)){const be=[];ie.metadata.toolCalls.forEach(_e=>{try{const Ie=JSON.parse(_e);Ie&&Ie.type==="tool-call"&&Ie.toolCallId&&Ie.toolName&&Ie.args!==void 0?be.push(Ie):console.warn("[LiteChat] buildHistory: Invalid tool call structure after parsing:",_e)}catch(Ie){console.error("[LiteChat] buildHistory: Failed to parse tool call string:",_e,Ie)}}),be.length>0&&te.push({role:"assistant",content:be})}if((re=ie.metadata)!=null&&re.toolResults&&Array.isArray(ie.metadata.toolResults)){const be=[];ie.metadata.toolResults.forEach(_e=>{try{const Ie=JSON.parse(_e);Ie&&Ie.type==="tool-result"&&Ie.toolCallId&&Ie.toolName&&Ie.result!==void 0?be.push(Ie):console.warn("[LiteChat] buildHistory: Invalid tool result structure after parsing:",_e)}catch(Ie){console.error("[LiteChat] buildHistory: Failed to parse tool result string:",_e,Ie)}}),be.length>0&&te.push({role:"tool",content:be})}return te}),[]),I=R.useCallback(async ae=>{var Pe,Re,ke;let ie=r==="conversation"?n:null;const te=r==="project"?n:r==="conversation"?((Pe=u(n))==null?void 0:Pe.projectId)??null:null,X=Wi.getState().setFocusInputFlag;if(!Ai.getState().selectedModelId){dt.error("Please select a model before sending a message.");return}if(!ie){console.log("LiteChat: No conversation selected, creating new one...");try{ie=await i({title:"New Chat",projectId:te}),o(ie,"conversation"),setTimeout(()=>X(!0),0),await new Promise(ze=>setTimeout(ze,0)),console.log(`LiteChat: New conversation created and selected: ${ie}`)}catch(ze){console.error("LiteChat: Failed to create new conversation",ze),dt.error("Failed to start new chat.");return}}ar.getState().currentConversationId!==ie&&(console.log(`LiteChat: Syncing InteractionStore to conversation ${ie}`),h(ie),setTimeout(()=>X(!0),0),await new Promise(ze=>setTimeout(ze,0)));const Y=ar.getState().interactions.filter(ze=>ze.status==="COMPLETED"&&ze.type==="message.user_assistant"),re=O(Y);if(ae.content)re.push({role:"user",content:ae.content});else if((ke=(Re=ae.metadata)==null?void 0:Re.attachedFiles)!=null&&ke.length)re.push({role:"user",content:""});else{console.error("LiteChat: Attempting to submit with no content."),dt.error("Cannot send an empty message.");return}const be=s(te),Ie={system:(be==null?void 0:be.systemPrompt)??A??void 0,messages:re,parameters:ae.parameters,metadata:ae.metadata};Ei.emit("prompt:finalised",{prompt:Ie}),console.log("LiteChat: Submitting prompt to AIService:",Ie);try{await vb.startInteraction(Ie,ae),console.log("LiteChat: AIService interaction started.")}catch(ze){console.error("LiteChat: Error starting AI interaction:",ze),dt.error(`Failed to start AI interaction: ${ze instanceof Error?ze.message:String(ze)}`)}},[n,r,i,o,h,A,O,s,u]),D=R.useCallback(async ae=>{var ze,it,Oe,Te,B;console.log(`LiteChat: Regenerating interaction ${ae}`);const ie=ar.getState(),te=ie.interactions.find(Ce=>Ce.id===ae);if(!te||!te.prompt){console.error(`LiteChat: Cannot regenerate - interaction ${ae} or its prompt not found.`),dt.error("Cannot regenerate: Original interaction data missing.");return}if(te.type!=="message.user_assistant"){console.error(`LiteChat: Cannot regenerate non-user_assistant interaction: ${ae}`),dt.error("Can only regenerate from a user message interaction.");return}const X=u(te.conversationId),ce=(X==null?void 0:X.projectId)??null,G=s(ce),Q=Ai.getState().selectedModelId;if(!Q){dt.error("Please select a model before regenerating.");return}const{providerId:Y,modelId:re}=h1e(Q);if(!Y||!re){dt.error("Invalid model selection for regeneration.");return}const be=te.index,_e=ie.interactions.filter(Ce=>Ce.conversationId===te.conversationId&&Ce.index<be&&Ce.status==="COMPLETED"&&Ce.type==="message.user_assistant").sort((Ce,Ne)=>Ce.index-Ne.index),Ie=O(_e);if((ze=te.prompt)!=null&&ze.content&&typeof te.prompt.content=="string")Ie.push({role:"user",content:te.prompt.content});else if((Te=(Oe=(it=te.prompt)==null?void 0:it.metadata)==null?void 0:Oe.attachedFiles)!=null&&Te.length)Ie.push({role:"user",content:""});else{console.error(`LiteChat: Cannot regenerate - missing or invalid user prompt content in interaction ${ae}.`),dt.error("Cannot regenerate: Original user prompt missing.");return}const Pe=(G==null?void 0:G.systemPrompt)??qr.getState().globalSystemPrompt??void 0,Re={...te.prompt.metadata,regeneratedFromId:ae,providerId:Y,modelId:re,attachedFiles:void 0,enabledTools:(B=te.prompt.metadata)==null?void 0:B.enabledTools},ke={system:Pe,messages:Ie,parameters:te.prompt.parameters,metadata:Re};Ei.emit("prompt:finalised",{prompt:ke}),console.log(`LiteChat: Submitting regeneration request for ${ae}:`,ke);try{await vb.startInteraction(ke,te.prompt),console.log(`LiteChat: AIService regeneration interaction started for ${ae}.`)}catch(Ce){console.error(`LiteChat: Error starting regeneration for ${ae}:`,Ce),dt.error("Failed to start regeneration.")}},[O,s,u]),z=R.useCallback(ae=>{console.log(`LiteChat: Stopping interaction ${ae}`),vb.stopInteraction(ae)},[]),W=R.useMemo(()=>_.filter(ae=>(ae.panel??"main")==="sidebar"&&(ae.show?ae.show():!0)).sort((ae,ie)=>(ae.order??1/0)-(ie.order??1/0)),[_]),ee=R.useMemo(()=>_.filter(ae=>ae.panel==="sidebar-footer"&&(ae.show?ae.show():!0)).sort((ae,ie)=>(ae.order??1/0)-(ie.order??1/0)),[_]),F=R.useMemo(()=>_.filter(ae=>ae.panel==="header"&&(ae.show?ae.show():!0)).sort((ae,ie)=>(ae.order??1/0)-(ie.order??1/0)),[_]),Z=R.useMemo(()=>{var ae;return(ae=_.find(ie=>ie.id==="core-settings-trigger"))==null?void 0:ae.settingsRenderer},[_]),V=r==="conversation"?n:null;return e?y.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(Zn,{className:"h-12 w-12 animate-spin text-primary"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Nt("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:Nt("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",g?"w-16":"w-64"),children:[y.jsxs("div",{className:Nt("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:Nt(g?"hidden":"block"),children:y.jsx(Jy,{controls:W,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:Nt(g?"block":"hidden"),children:y.jsx(Jy,{controls:W,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:Nt("flex-shrink-0 border-t border-[--border] p-2",g?"flex flex-col items-center gap-2":"flex items-center justify-between"),children:y.jsx(Jy,{controls:ee,panelId:"sidebar-footer",renderMode:g?"icon":"full",className:Nt("flex",g?"flex-col gap-2":"items-center gap-1")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Jy,{controls:F,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(ire,{conversationId:V,interactions:c,onRegenerateInteraction:D,onStopInteraction:z,status:f,className:"flex-grow overflow-y-auto p-4 space-y-4"}),p&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",p]}),y.jsx(VH,{InputAreaRenderer:PF,onSubmit:I,className:"border-t border-[--border] bg-card flex-shrink-0"})]})]}),v&&Z&&Z(),y.jsx(ghe,{richColors:!0,position:"top-right"})]})};function m1e(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(p1e,{})})})}hU();function g1e({children:e}){const t=qr(n=>n.theme);return R.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}hz.createRoot(document.getElementById("root")).render(y.jsx(vt.StrictMode,{children:y.jsx(g1e,{children:y.jsx(m1e,{})})}));
