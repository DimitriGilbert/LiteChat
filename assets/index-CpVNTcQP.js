var CW=Object.defineProperty;var TW=(e,t,n)=>t in e?CW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var va=(e,t,n)=>TW(e,typeof t!="symbol"?t+"":t,n);function kW(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var U2={exports:{}},Cg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s4;function AW(){if(s4)return Cg;s4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:s,ref:a!==void 0?a:null,props:i}}return Cg.Fragment=t,Cg.jsx=n,Cg.jsxs=n,Cg}var o4;function NW(){return o4||(o4=1,U2.exports=AW()),U2.exports}var p=NW(),V2={exports:{}};function RW(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var g8={exports:{}},pa=g8.exports={},tl,nl;function gT(){throw new Error("setTimeout has not been defined")}function yT(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?tl=setTimeout:tl=gT}catch{tl=gT}try{typeof clearTimeout=="function"?nl=clearTimeout:nl=yT}catch{nl=yT}})();function y8(e){if(tl===setTimeout)return setTimeout(e,0);if((tl===gT||!tl)&&setTimeout)return tl=setTimeout,setTimeout(e,0);try{return tl(e,0)}catch{try{return tl.call(null,e,0)}catch{return tl.call(this,e,0)}}}function IW(e){if(nl===clearTimeout)return clearTimeout(e);if((nl===yT||!nl)&&clearTimeout)return nl=clearTimeout,clearTimeout(e);try{return nl(e)}catch{try{return nl.call(null,e)}catch{return nl.call(this,e)}}}var sc=[],sp=!1,tf,Iw=-1;function jW(){!sp||!tf||(sp=!1,tf.length?sc=tf.concat(sc):Iw=-1,sc.length&&b8())}function b8(){if(!sp){var e=y8(jW);sp=!0;for(var t=sc.length;t;){for(tf=sc,sc=[];++Iw<t;)tf&&tf[Iw].run();Iw=-1,t=sc.length}tf=null,sp=!1,IW(e)}}pa.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];sc.push(new v8(e,t)),sc.length===1&&!sp&&y8(b8)};function v8(e,t){this.fun=e,this.array=t}v8.prototype.run=function(){this.fun.apply(null,this.array)};pa.title="browser";pa.browser=!0;pa.env={};pa.argv=[];pa.version="";pa.versions={};function Nc(){}pa.on=Nc;pa.addListener=Nc;pa.once=Nc;pa.off=Nc;pa.removeListener=Nc;pa.removeAllListeners=Nc;pa.emit=Nc;pa.prependListener=Nc;pa.prependOnceListener=Nc;pa.listeners=function(e){return[]};pa.binding=function(e){throw new Error("process.binding is not supported")};pa.cwd=function(){return"/"};pa.chdir=function(e){throw new Error("process.chdir is not supported")};pa.umask=function(){return 0};var DW=g8.exports;const da=RW(DW);var Bn={},l4;function MW(){if(l4)return Bn;l4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(q){return q===null||typeof q!="object"?null:(q=h&&q[h]||q["@@iterator"],typeof q=="function"?q:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(q,J,Q){this.props=q,this.context=J,this.refs=b,this.updater=Q||g}w.prototype.isReactComponent={},w.prototype.setState=function(q,J){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,J,"setState")},w.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function x(){}x.prototype=w.prototype;function _(q,J,Q){this.props=q,this.context=J,this.refs=b,this.updater=Q||g}var E=_.prototype=new x;E.constructor=_,v(E,w.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function j(q,J,Q,te,ue,ge){return Q=ge.ref,{$$typeof:e,type:q,key:J,ref:Q!==void 0?Q:null,props:ge}}function N(q,J){return j(q.type,J,void 0,void 0,void 0,q.props)}function P(q){return typeof q=="object"&&q!==null&&q.$$typeof===e}function L(q){var J={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Q){return J[Q]})}var H=/\/+/g;function M(q,J){return typeof q=="object"&&q!==null&&q.key!=null?L(""+q.key):J.toString(36)}function K(){}function U(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(K,K):(q.status="pending",q.then(function(J){q.status==="pending"&&(q.status="fulfilled",q.value=J)},function(J){q.status==="pending"&&(q.status="rejected",q.reason=J)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function se(q,J,Q,te,ue){var ge=typeof q;(ge==="undefined"||ge==="boolean")&&(q=null);var Ie=!1;if(q===null)Ie=!0;else switch(ge){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(q.$$typeof){case e:case t:Ie=!0;break;case d:return Ie=q._init,se(Ie(q._payload),J,Q,te,ue)}}if(Ie)return ue=ue(q),Ie=te===""?"."+M(q,0):te,C(ue)?(Q="",Ie!=null&&(Q=Ie.replace(H,"$&/")+"/"),se(ue,J,Q,"",function(ve){return ve})):ue!=null&&(P(ue)&&(ue=N(ue,Q+(ue.key==null||q&&q.key===ue.key?"":(""+ue.key).replace(H,"$&/")+"/")+Ie)),J.push(ue)),1;Ie=0;var Ae=te===""?".":te+":";if(C(q))for(var _e=0;_e<q.length;_e++)te=q[_e],ge=Ae+M(te,_e),Ie+=se(te,J,Q,ge,ue);else if(_e=m(q),typeof _e=="function")for(q=_e.call(q),_e=0;!(te=q.next()).done;)te=te.value,ge=Ae+M(te,_e++),Ie+=se(te,J,Q,ge,ue);else if(ge==="object"){if(typeof q.then=="function")return se(U(q),J,Q,te,ue);throw J=String(q),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function ie(q,J,Q){if(q==null)return q;var te=[],ue=0;return se(q,te,"","",function(ge){return J.call(Q,ge,ue++)}),te}function re(q){if(q._status===-1){var J=q._result;J=J(),J.then(function(Q){(q._status===0||q._status===-1)&&(q._status=1,q._result=Q)},function(Q){(q._status===0||q._status===-1)&&(q._status=2,q._result=Q)}),q._status===-1&&(q._status=0,q._result=J)}if(q._status===1)return q._result.default;throw q._result}var X=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(J))return}else if(typeof da=="object"&&typeof da.emit=="function"){da.emit("uncaughtException",q);return}console.error(q)};function ne(){}return Bn.Children={map:ie,forEach:function(q,J,Q){ie(q,function(){J.apply(this,arguments)},Q)},count:function(q){var J=0;return ie(q,function(){J++}),J},toArray:function(q){return ie(q,function(J){return J})||[]},only:function(q){if(!P(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Bn.Component=w,Bn.Fragment=n,Bn.Profiler=a,Bn.PureComponent=_,Bn.StrictMode=r,Bn.Suspense=l,Bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Bn.__COMPILER_RUNTIME={__proto__:null,c:function(q){return k.H.useMemoCache(q)}},Bn.cache=function(q){return function(){return q.apply(null,arguments)}},Bn.cloneElement=function(q,J,Q){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var te=v({},q.props),ue=q.key,ge=void 0;if(J!=null)for(Ie in J.ref!==void 0&&(ge=void 0),J.key!==void 0&&(ue=""+J.key),J)!I.call(J,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&J.ref===void 0||(te[Ie]=J[Ie]);var Ie=arguments.length-2;if(Ie===1)te.children=Q;else if(1<Ie){for(var Ae=Array(Ie),_e=0;_e<Ie;_e++)Ae[_e]=arguments[_e+2];te.children=Ae}return j(q.type,ue,void 0,void 0,ge,te)},Bn.createContext=function(q){return q={$$typeof:s,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:i,_context:q},q},Bn.createElement=function(q,J,Q){var te,ue={},ge=null;if(J!=null)for(te in J.key!==void 0&&(ge=""+J.key),J)I.call(J,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ue[te]=J[te]);var Ie=arguments.length-2;if(Ie===1)ue.children=Q;else if(1<Ie){for(var Ae=Array(Ie),_e=0;_e<Ie;_e++)Ae[_e]=arguments[_e+2];ue.children=Ae}if(q&&q.defaultProps)for(te in Ie=q.defaultProps,Ie)ue[te]===void 0&&(ue[te]=Ie[te]);return j(q,ge,void 0,void 0,null,ue)},Bn.createRef=function(){return{current:null}},Bn.forwardRef=function(q){return{$$typeof:o,render:q}},Bn.isValidElement=P,Bn.lazy=function(q){return{$$typeof:d,_payload:{_status:-1,_result:q},_init:re}},Bn.memo=function(q,J){return{$$typeof:u,type:q,compare:J===void 0?null:J}},Bn.startTransition=function(q){var J=k.T,Q={};k.T=Q;try{var te=q(),ue=k.S;ue!==null&&ue(Q,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(ne,X)}catch(ge){X(ge)}finally{k.T=J}},Bn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Bn.use=function(q){return k.H.use(q)},Bn.useActionState=function(q,J,Q){return k.H.useActionState(q,J,Q)},Bn.useCallback=function(q,J){return k.H.useCallback(q,J)},Bn.useContext=function(q){return k.H.useContext(q)},Bn.useDebugValue=function(){},Bn.useDeferredValue=function(q,J){return k.H.useDeferredValue(q,J)},Bn.useEffect=function(q,J,Q){var te=k.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(q,J)},Bn.useId=function(){return k.H.useId()},Bn.useImperativeHandle=function(q,J,Q){return k.H.useImperativeHandle(q,J,Q)},Bn.useInsertionEffect=function(q,J){return k.H.useInsertionEffect(q,J)},Bn.useLayoutEffect=function(q,J){return k.H.useLayoutEffect(q,J)},Bn.useMemo=function(q,J){return k.H.useMemo(q,J)},Bn.useOptimistic=function(q,J){return k.H.useOptimistic(q,J)},Bn.useReducer=function(q,J,Q){return k.H.useReducer(q,J,Q)},Bn.useRef=function(q){return k.H.useRef(q)},Bn.useState=function(q){return k.H.useState(q)},Bn.useSyncExternalStore=function(q,J,Q){return k.H.useSyncExternalStore(q,J,Q)},Bn.useTransition=function(){return k.H.useTransition()},Bn.version="19.1.0",Bn}var c4;function lA(){return c4||(c4=1,V2.exports=MW()),V2.exports}var T=lA();const gt=vi(T),w8=kW({__proto__:null,default:gt},[T]);var H2={exports:{}},Tg={},q2={exports:{}},G2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4;function OW(){return u4||(u4=1,function(e){function t(ie,re){var X=ie.length;ie.push(re);e:for(;0<X;){var ne=X-1>>>1,q=ie[ne];if(0<a(q,re))ie[ne]=re,ie[X]=q,X=ne;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var re=ie[0],X=ie.pop();if(X!==re){ie[0]=X;e:for(var ne=0,q=ie.length,J=q>>>1;ne<J;){var Q=2*(ne+1)-1,te=ie[Q],ue=Q+1,ge=ie[ue];if(0>a(te,X))ue<q&&0>a(ge,te)?(ie[ne]=ge,ie[ue]=X,ne=ue):(ie[ne]=te,ie[Q]=X,ne=Q);else if(ue<q&&0>a(ge,X))ie[ne]=ge,ie[ue]=X,ne=ue;else break e}}return re}function a(ie,re){var X=ie.sortIndex-re.sortIndex;return X!==0?X:ie.id-re.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,h=null,m=3,g=!1,v=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ie){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=ie)r(u),re.sortIndex=re.expirationTime,t(l,re);else break;re=n(u)}}function k(ie){if(b=!1,C(ie),!v)if(n(l)!==null)v=!0,I||(I=!0,M());else{var re=n(u);re!==null&&se(k,re.startTime-ie)}}var I=!1,j=-1,N=5,P=-1;function L(){return w?!0:!(e.unstable_now()-P<N)}function H(){if(w=!1,I){var ie=e.unstable_now();P=ie;var re=!0;try{e:{v=!1,b&&(b=!1,_(j),j=-1),g=!0;var X=m;try{t:{for(C(ie),h=n(l);h!==null&&!(h.expirationTime>ie&&L());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,m=h.priorityLevel;var q=ne(h.expirationTime<=ie);if(ie=e.unstable_now(),typeof q=="function"){h.callback=q,C(ie),re=!0;break t}h===n(l)&&r(l),C(ie)}else r(l);h=n(l)}if(h!==null)re=!0;else{var J=n(u);J!==null&&se(k,J.startTime-ie),re=!1}}break e}finally{h=null,m=X,g=!1}re=void 0}}finally{re?M():I=!1}}}var M;if(typeof E=="function")M=function(){E(H)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,U=K.port2;K.port1.onmessage=H,M=function(){U.postMessage(null)}}else M=function(){x(H,0)};function se(ie,re){j=x(function(){ie(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ie){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var X=m;m=re;try{return ie()}finally{m=X}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(ie,re){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var X=m;m=ie;try{return re()}finally{m=X}},e.unstable_scheduleCallback=function(ie,re,X){var ne=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ne+X:ne):X=ne,ie){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=X+q,ie={id:d++,callback:re,priorityLevel:ie,startTime:X,expirationTime:q,sortIndex:-1},X>ne?(ie.sortIndex=X,t(u,ie),n(l)===null&&ie===n(u)&&(b?(_(j),j=-1):b=!0,se(k,X-ne))):(ie.sortIndex=q,t(l,ie),v||g||(v=!0,I||(I=!0,M()))),ie},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(ie){var re=m;return function(){var X=m;m=re;try{return ie.apply(this,arguments)}finally{m=X}}}}(G2)),G2}var d4;function PW(){return d4||(d4=1,q2.exports=OW()),q2.exports}var W2={exports:{}},ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f4;function FW(){if(f4)return ci;f4=1;var e=lA();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ci.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(l,u,null,d)},ci.flushSync=function(l){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=u,r.p=d,r.d.f()}},ci.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},ci.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ci.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ci.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},ci.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ci.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},ci.requestFormReset=function(l){r.d.r(l)},ci.unstable_batchedUpdates=function(l,u){return l(u)},ci.useFormState=function(l,u,d){return s.H.useFormState(l,u,d)},ci.useFormStatus=function(){return s.H.useHostTransitionStatus()},ci.version="19.1.0",ci}var h4;function x8(){if(h4)return W2.exports;h4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),W2.exports=FW(),W2.exports}var p4;function LW(){if(p4)return Tg;p4=1;var e=PW(),t=lA(),n=x8();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function s(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(i(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=i(c),f===null)throw Error(r(188));return f!==c?null:c}for(var y=c,S=f;;){var R=y.return;if(R===null)break;var B=R.alternate;if(B===null){if(S=R.return,S!==null){y=S;continue}break}if(R.child===B.child){for(B=R.child;B;){if(B===y)return o(R),c;if(B===S)return o(R),f;B=B.sibling}throw Error(r(188))}if(y.return!==S.return)y=R,S=B;else{for(var le=!1,Ce=R.child;Ce;){if(Ce===y){le=!0,y=R,S=B;break}if(Ce===S){le=!0,S=R,y=B;break}Ce=Ce.sibling}if(!le){for(Ce=B.child;Ce;){if(Ce===y){le=!0,y=B,S=R;break}if(Ce===S){le=!0,S=B,y=R;break}Ce=Ce.sibling}if(!le)throw Error(r(189))}}if(y.alternate!==S)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function M(c){return c===null||typeof c!="object"?null:(c=H&&c[H]||c["@@iterator"],typeof c=="function"?c:null)}var K=Symbol.for("react.client.reference");function U(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===K?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case P:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case E:return(c.displayName||"Context")+".Provider";case _:return(c._context.displayName||"Context")+".Consumer";case C:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case j:return f=c.displayName||null,f!==null?f:U(c.type)||"Memo";case N:f=c._payload,c=c._init;try{return U(c(f))}catch{}}return null}var se=Array.isArray,ie=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ne=[],q=-1;function J(c){return{current:c}}function Q(c){0>q||(c.current=ne[q],ne[q]=null,q--)}function te(c,f){q++,ne[q]=c.current,c.current=f}var ue=J(null),ge=J(null),Ie=J(null),Ae=J(null);function _e(c,f){switch(te(Ie,f),te(ge,c),te(ue,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?Mj(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=Mj(f),c=Oj(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Q(ue),te(ue,c)}function ve(){Q(ue),Q(ge),Q(Ie)}function Be(c){c.memoizedState!==null&&te(Ae,c);var f=ue.current,y=Oj(f,c.type);f!==y&&(te(ge,c),te(ue,y))}function nt(c){ge.current===c&&(Q(ue),Q(ge)),Ae.current===c&&(Q(Ae),wg._currentValue=X)}var Ve=Object.prototype.hasOwnProperty,De=e.unstable_scheduleCallback,$=e.unstable_cancelCallback,Ee=e.unstable_shouldYield,Te=e.unstable_requestPaint,fe=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,ee=e.unstable_ImmediatePriority,Se=e.unstable_UserBlockingPriority,Pe=e.unstable_NormalPriority,ke=e.unstable_LowPriority,We=e.unstable_IdlePriority,Nt=e.log,it=e.unstable_setDisableYieldValue,Et=null,Ft=null;function Mt(c){if(typeof Nt=="function"&&it(c),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Et,c)}catch{}}var Yt=Math.clz32?Math.clz32:W,be=Math.log,D=Math.LN2;function W(c){return c>>>=0,c===0?32:31-(be(c)/D|0)|0}var he=256,je=4194304;function we(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Ne(c,f,y){var S=c.pendingLanes;if(S===0)return 0;var R=0,B=c.suspendedLanes,le=c.pingedLanes;c=c.warmLanes;var Ce=S&134217727;return Ce!==0?(S=Ce&~B,S!==0?R=we(S):(le&=Ce,le!==0?R=we(le):y||(y=Ce&~c,y!==0&&(R=we(y))))):(Ce=S&~B,Ce!==0?R=we(Ce):le!==0?R=we(le):y||(y=S&~c,y!==0&&(R=we(y)))),R===0?0:f!==0&&f!==R&&(f&B)===0&&(B=R&-R,y=f&-f,B>=y||B===32&&(y&4194048)!==0)?f:R}function ce(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function ft(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var c=he;return he<<=1,(he&4194048)===0&&(he=256),c}function F(){var c=je;return je<<=1,(je&62914560)===0&&(je=4194304),c}function Le(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function tt(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ye(c,f,y,S,R,B){var le=c.pendingLanes;c.pendingLanes=y,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=y,c.entangledLanes&=y,c.errorRecoveryDisabledLanes&=y,c.shellSuspendCounter=0;var Ce=c.entanglements,$e=c.expirationTimes,dt=c.hiddenUpdates;for(y=le&~y;0<y;){var At=31-Yt(y),Ot=1<<At;Ce[At]=0,$e[At]=-1;var mt=dt[At];if(mt!==null)for(dt[At]=null,At=0;At<mt.length;At++){var yt=mt[At];yt!==null&&(yt.lane&=-536870913)}y&=~Ot}S!==0&&Me(c,S,0),B!==0&&R===0&&c.tag!==0&&(c.suspendedLanes|=B&~(le&~f))}function Me(c,f,y){c.pendingLanes|=f,c.suspendedLanes&=~f;var S=31-Yt(f);c.entangledLanes|=f,c.entanglements[S]=c.entanglements[S]|1073741824|y&4194090}function Ke(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var S=31-Yt(y),R=1<<S;R&f|c[S]&f&&(c[S]|=f),y&=~R}}function Dt(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function me(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function G(){var c=re.p;return c!==0?c:(c=window.event,c===void 0?32:e4(c.type))}function V(c,f){var y=re.p;try{return re.p=c,f()}finally{re.p=y}}var Z=Math.random().toString(36).slice(2),pe="__reactFiber$"+Z,Re="__reactProps$"+Z,Ue="__reactContainer$"+Z,pt="__reactEvents$"+Z,Zt="__reactListeners$"+Z,ut="__reactHandles$"+Z,Rt="__reactResources$"+Z,Lt="__reactMarker$"+Z;function en(c){delete c[pe],delete c[Re],delete c[pt],delete c[Zt],delete c[ut]}function In(c){var f=c[pe];if(f)return f;for(var y=c.parentNode;y;){if(f=y[Ue]||y[pe]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(c=Bj(c);c!==null;){if(y=c[pe])return y;c=Bj(c)}return f}c=y,y=c.parentNode}return null}function Xn(c){if(c=c[pe]||c[Ue]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function Sr(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function Er(c){var f=c[Rt];return f||(f=c[Rt]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function $n(c){c[Lt]=!0}var _i=new Set,Mo={};function Oo(c,f){Po(c,f),Po(c+"Capture",f)}function Po(c,f){for(Mo[c]=f,c=0;c<f.length;c++)_i.add(f[c])}var Zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fo={},Ss={};function gb(c){return Ve.call(Ss,c)?!0:Ve.call(Fo,c)?!1:Zr.test(c)?Ss[c]=!0:(Fo[c]=!0,!1)}function no(c,f,y){if(gb(f))if(y===null)c.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+y)}}function kl(c,f,y){if(y===null)c.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+y)}}function is(c,f,y,S){if(S===null)c.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(y);return}c.setAttributeNS(f,y,""+S)}}var vd,Lo;function Al(c){if(vd===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);vd=f&&f[1]||"",Lo=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vd+c+Lo}var Lc=!1;function Kf(c,f){if(!c||Lc)return"";Lc=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(yt){var mt=yt}Reflect.construct(c,[],Ot)}else{try{Ot.call()}catch(yt){mt=yt}c.call(Ot.prototype)}}else{try{throw Error()}catch(yt){mt=yt}(Ot=c())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(yt){if(yt&&mt&&typeof yt.stack=="string")return[yt.stack,mt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var B=S.DetermineComponentFrameRoot(),le=B[0],Ce=B[1];if(le&&Ce){var $e=le.split(`
`),dt=Ce.split(`
`);for(R=S=0;S<$e.length&&!$e[S].includes("DetermineComponentFrameRoot");)S++;for(;R<dt.length&&!dt[R].includes("DetermineComponentFrameRoot");)R++;if(S===$e.length||R===dt.length)for(S=$e.length-1,R=dt.length-1;1<=S&&0<=R&&$e[S]!==dt[R];)R--;for(;1<=S&&0<=R;S--,R--)if($e[S]!==dt[R]){if(S!==1||R!==1)do if(S--,R--,0>R||$e[S]!==dt[R]){var At=`
`+$e[S].replace(" at new "," at ");return c.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",c.displayName)),At}while(1<=S&&0<=R);break}}}finally{Lc=!1,Error.prepareStackTrace=y}return(y=c?c.displayName||c.name:"")?Al(y):""}function Jn(c){switch(c.tag){case 26:case 27:case 5:return Al(c.type);case 16:return Al("Lazy");case 13:return Al("Suspense");case 19:return Al("SuspenseList");case 0:case 15:return Kf(c.type,!1);case 11:return Kf(c.type.render,!1);case 1:return Kf(c.type,!0);case 31:return Al("Activity");default:return""}}function _m(c){try{var f="";do f+=Jn(c),c=c.return;while(c);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Si(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Sm(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function jr(c){var f=Sm(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),S=""+c[f];if(!c.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var R=y.get,B=y.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return R.call(this)},set:function(le){S=""+le,B.call(this,le)}}),Object.defineProperty(c,f,{enumerable:y.enumerable}),{getValue:function(){return S},setValue:function(le){S=""+le},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function Bo(c){c._valueTracker||(c._valueTracker=jr(c))}function Bc(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var y=f.getValue(),S="";return c&&(S=Sm(c)?c.checked?"true":"false":c.value),c=S,c!==y?(f.setValue(c),!0):!1}function ro(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Em=/[\n"\\]/g;function ii(c){return c.replace(Em,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function $c(c,f,y,S,R,B,le,Ce){c.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?c.type=le:c.removeAttribute("type"),f!=null?le==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+Si(f)):c.value!==""+Si(f)&&(c.value=""+Si(f)):le!=="submit"&&le!=="reset"||c.removeAttribute("value"),f!=null?zc(c,le,Si(f)):y!=null?zc(c,le,Si(y)):S!=null&&c.removeAttribute("value"),R==null&&B!=null&&(c.defaultChecked=!!B),R!=null&&(c.checked=R&&typeof R!="function"&&typeof R!="symbol"),Ce!=null&&typeof Ce!="function"&&typeof Ce!="symbol"&&typeof Ce!="boolean"?c.name=""+Si(Ce):c.removeAttribute("name")}function Cm(c,f,y,S,R,B,le,Ce){if(B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"&&(c.type=B),f!=null||y!=null){if(!(B!=="submit"&&B!=="reset"||f!=null))return;y=y!=null?""+Si(y):"",f=f!=null?""+Si(f):y,Ce||f===c.value||(c.value=f),c.defaultValue=f}S=S??R,S=typeof S!="function"&&typeof S!="symbol"&&!!S,c.checked=Ce?c.checked:!!S,c.defaultChecked=!!S,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(c.name=le)}function zc(c,f,y){f==="number"&&ro(c.ownerDocument)===c||c.defaultValue===""+y||(c.defaultValue=""+y)}function Nl(c,f,y,S){if(c=c.options,f){f={};for(var R=0;R<y.length;R++)f["$"+y[R]]=!0;for(y=0;y<c.length;y++)R=f.hasOwnProperty("$"+c[y].value),c[y].selected!==R&&(c[y].selected=R),R&&S&&(c[y].defaultSelected=!0)}else{for(y=""+Si(y),f=null,R=0;R<c.length;R++){if(c[R].value===y){c[R].selected=!0,S&&(c[R].defaultSelected=!0);return}f!==null||c[R].disabled||(f=c[R])}f!==null&&(f.selected=!0)}}function Uc(c,f,y){if(f!=null&&(f=""+Si(f),f!==c.value&&(c.value=f),y==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=y!=null?""+Si(y):""}function Tm(c,f,y,S){if(f==null){if(S!=null){if(y!=null)throw Error(r(92));if(se(S)){if(1<S.length)throw Error(r(93));S=S[0]}y=S}y==null&&(y=""),f=y}y=Si(f),c.defaultValue=y,S=c.textContent,S===y&&S!==""&&S!==null&&(c.value=S)}function Vc(c,f){if(f){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=f;return}}c.textContent=f}var ar=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zf(c,f,y){var S=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":S?c.setProperty(f,y):typeof y!="number"||y===0||ar.has(f)?f==="float"?c.cssFloat=y:c[f]=(""+y).trim():c[f]=y+"px"}function yb(c,f,y){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?c.setProperty(S,""):S==="float"?c.cssFloat="":c[S]="");for(var R in f)S=f[R],f.hasOwnProperty(R)&&y[R]!==S&&Zf(c,R,S)}else for(var B in f)f.hasOwnProperty(B)&&Zf(c,B,f[B])}function km(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ei=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rl(c){return Hc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Es=null;function Yf(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Il=null,$r=null;function ss(c){var f=Xn(c);if(f&&(c=f.stateNode)){var y=c[Re]||null;e:switch(c=f.stateNode,f.type){case"input":if($c(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+ii(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var S=y[f];if(S!==c&&S.form===c.form){var R=S[Re]||null;if(!R)throw Error(r(90));$c(S,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(f=0;f<y.length;f++)S=y[f],S.form===c.form&&Bc(S)}break e;case"textarea":Uc(c,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&Nl(c,!!y.multiple,f,!1)}}}var jl=!1;function qc(c,f,y){if(jl)return c(f,y);jl=!0;try{var S=c(f);return S}finally{if(jl=!1,(Il!==null||$r!==null)&&(iv(),Il&&(f=Il,c=$r,$r=Il=null,ss(f),c)))for(f=0;f<c.length;f++)ss(c[f])}}function Dl(c,f){var y=c.stateNode;if(y===null)return null;var S=y[Re]||null;if(S===null)return null;y=S[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(c=c.type,S=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!S;break e;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(r(231,f,typeof y));return y}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Am=!1;if(ja)try{var si={};Object.defineProperty(si,"passive",{get:function(){Am=!0}}),window.addEventListener("test",si,si),window.removeEventListener("test",si,si)}catch{Am=!1}var Cs=null,Xf=null,Gc=null;function Wc(){if(Gc)return Gc;var c,f=Xf,y=f.length,S,R="value"in Cs?Cs.value:Cs.textContent,B=R.length;for(c=0;c<y&&f[c]===R[c];c++);var le=y-c;for(S=1;S<=le&&f[y-S]===R[B-S];S++);return Gc=R.slice(c,1<S?1-S:void 0)}function Kc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function wd(){return!0}function bb(){return!1}function ma(c){function f(y,S,R,B,le){this._reactName=y,this._targetInst=R,this.type=S,this.nativeEvent=B,this.target=le,this.currentTarget=null;for(var Ce in c)c.hasOwnProperty(Ce)&&(y=c[Ce],this[Ce]=y?y(B):B[Ce]);return this.isDefaultPrevented=(B.defaultPrevented!=null?B.defaultPrevented:B.returnValue===!1)?wd:bb,this.isPropagationStopped=bb,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=wd)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=wd)},persist:function(){},isPersistent:wd}),f}var Ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jf=ma(Ml),$o=d({},Ml,{view:0,detail:0}),Qf=ma($o),xd,Nm,_d,eh=d({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==_d&&(_d&&c.type==="mousemove"?(xd=c.screenX-_d.screenX,Nm=c.screenY-_d.screenY):Nm=xd=0,_d=c),xd)},movementY:function(c){return"movementY"in c?c.movementY:Nm}}),th=ma(eh),Rm=d({},eh,{dataTransfer:0}),vb=ma(Rm),nh=d({},$o,{relatedTarget:0}),Zc=ma(nh),rh=d({},Ml,{animationName:0,elapsedTime:0,pseudoElement:0}),wb=ma(rh),nS=d({},Ml,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),ah=ma(nS),Im=d({},Ml,{data:0}),ih=ma(Im),jm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sd(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Da[c])?!!f[c]:!1}function Ol(){return Sd}var xb=d({},$o,{key:function(c){if(c.key){var f=jm[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Kc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Dm[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(c){return c.type==="keypress"?Kc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Kc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),sh=ma(xb),_b=d({},eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mm=ma(_b),oh=d({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),Om=ma(oh),Pl=d({},Ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pm=ma(Pl),Fm=d({},eh,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),lh=ma(Fm),Lm=d({},Ml,{newState:0,oldState:0}),Sb=ma(Lm),rS=[9,13,27,32],Ed=ja&&"CompositionEvent"in window,zo=null;ja&&"documentMode"in document&&(zo=document.documentMode);var aS=ja&&"TextEvent"in window&&!zo,ch=ja&&(!Ed||zo&&8<zo&&11>=zo),uh=" ",Eb=!1;function Bm(c,f){switch(c){case"keyup":return rS.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cb(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Fl=!1;function Tb(c,f){switch(c){case"compositionend":return Cb(f);case"keypress":return f.which!==32?null:(Eb=!0,uh);case"textInput":return c=f.data,c===uh&&Eb?null:c;default:return null}}function iS(c,f){if(Fl)return c==="compositionend"||!Ed&&Bm(c,f)?(c=Wc(),Gc=Xf=Cs=null,Fl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return ch&&f.locale!=="ko"?null:f.data;default:return null}}var kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dh(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!kb[c.type]:f==="textarea"}function $m(c,f,y,S){Il?$r?$r.push(S):$r=[S]:Il=S,f=dv(f,"onChange"),0<f.length&&(y=new Jf("onChange","change",null,y,S),c.push({event:y,listeners:f}))}var Yc=null,Cd=null;function sS(c){Nj(c,0)}function fh(c){var f=Sr(c);if(Bc(f))return c}function Td(c,f){if(c==="change")return f}var Ts=!1;if(ja){var zr;if(ja){var Xc="oninput"in document;if(!Xc){var Ci=document.createElement("div");Ci.setAttribute("oninput","return;"),Xc=typeof Ci.oninput=="function"}zr=Xc}else zr=!1;Ts=zr&&(!document.documentMode||9<document.documentMode)}function Ab(){Yc&&(Yc.detachEvent("onpropertychange",hh),Cd=Yc=null)}function hh(c){if(c.propertyName==="value"&&fh(Cd)){var f=[];$m(f,Cd,c,Yf(c)),qc(sS,f)}}function Nb(c,f,y){c==="focusin"?(Ab(),Yc=f,Cd=y,Yc.attachEvent("onpropertychange",hh)):c==="focusout"&&Ab()}function Ll(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return fh(Cd)}function zm(c,f){if(c==="click")return fh(f)}function Jc(c,f){if(c==="input"||c==="change")return fh(f)}function Uo(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var oi=typeof Object.is=="function"?Object.is:Uo;function A(c,f){if(oi(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),S=Object.keys(f);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var R=y[S];if(!Ve.call(f,R)||!oi(c[R],f[R]))return!1}return!0}function O(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Y(c,f){var y=O(c);c=0;for(var S;y;){if(y.nodeType===3){if(S=c+y.textContent.length,c<=f&&S>=f)return{node:y,offset:f-c};c=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=O(y)}}function ae(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?ae(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function de(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=ro(c.document);f instanceof c.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)c=f.contentWindow;else break;f=ro(c.document)}return f}function xe(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var Oe=ja&&"documentMode"in document&&11>=document.documentMode,Fe=null,Ze=null,Xe=null,rt=!1;function He(c,f,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;rt||Fe==null||Fe!==ro(S)||(S=Fe,"selectionStart"in S&&xe(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Xe&&A(Xe,S)||(Xe=S,S=dv(Ze,"onSelect"),0<S.length&&(f=new Jf("onSelect","select",null,f,y),c.push({event:f,listeners:S}),f.target=Fe)))}function st(c,f){var y={};return y[c.toLowerCase()]=f.toLowerCase(),y["Webkit"+c]="webkit"+f,y["Moz"+c]="moz"+f,y}var Ge={animationend:st("Animation","AnimationEnd"),animationiteration:st("Animation","AnimationIteration"),animationstart:st("Animation","AnimationStart"),transitionrun:st("Transition","TransitionRun"),transitionstart:st("Transition","TransitionStart"),transitioncancel:st("Transition","TransitionCancel"),transitionend:st("Transition","TransitionEnd")},et={},ot={};ja&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Je(c){if(et[c])return et[c];if(!Ge[c])return c;var f=Ge[c],y;for(y in f)if(f.hasOwnProperty(y)&&y in ot)return et[c]=f[y];return c}var ht=Je("animationend"),bt=Je("animationiteration"),wt=Je("animationstart"),kt=Je("transitionrun"),Vt=Je("transitionstart"),Xt=Je("transitioncancel"),$t=Je("transitionend"),Gt=new Map,Jt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jt.push("scrollEnd");function zt(c,f){Gt.set(c,f),Oo(f,[c])}var nn=new WeakMap;function pn(c,f){if(typeof c=="object"&&c!==null){var y=nn.get(c);return y!==void 0?y:(f={value:c,source:f,stack:_m(f)},nn.set(c,f),f)}return{value:c,source:f,stack:_m(f)}}var gn=[],jn=0,Xa=0;function _n(){for(var c=jn,f=Xa=jn=0;f<c;){var y=gn[f];gn[f++]=null;var S=gn[f];gn[f++]=null;var R=gn[f];gn[f++]=null;var B=gn[f];if(gn[f++]=null,S!==null&&R!==null){var le=S.pending;le===null?R.next=R:(R.next=le.next,le.next=R),S.pending=R}B!==0&&Ma(y,R,B)}}function sa(c,f,y,S){gn[jn++]=c,gn[jn++]=f,gn[jn++]=y,gn[jn++]=S,Xa|=S,c.lanes|=S,c=c.alternate,c!==null&&(c.lanes|=S)}function ga(c,f,y,S){return sa(c,f,y,S),ks(c)}function ao(c,f){return sa(c,null,null,f),ks(c)}function Ma(c,f,y){c.lanes|=y;var S=c.alternate;S!==null&&(S.lanes|=y);for(var R=!1,B=c.return;B!==null;)B.childLanes|=y,S=B.alternate,S!==null&&(S.childLanes|=y),B.tag===22&&(c=B.stateNode,c===null||c._visibility&1||(R=!0)),c=B,B=B.return;return c.tag===3?(B=c.stateNode,R&&f!==null&&(R=31-Yt(y),c=B.hiddenUpdates,S=c[R],S===null?c[R]=[f]:S.push(f),f.lane=y|536870912),B):null}function ks(c){if(50<fg)throw fg=0,f2=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var Vo={};function uG(c,f,y,S){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(c,f,y,S){return new uG(c,f,y,S)}function oS(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Bl(c,f){var y=c.alternate;return y===null?(y=os(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&65011712,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y.refCleanup=c.refCleanup,y}function p3(c,f){c.flags&=65011714;var y=c.alternate;return y===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=y.childLanes,c.lanes=y.lanes,c.child=y.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=y.memoizedProps,c.memoizedState=y.memoizedState,c.updateQueue=y.updateQueue,c.type=y.type,f=y.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Rb(c,f,y,S,R,B){var le=0;if(S=c,typeof c=="function")oS(c)&&(le=1);else if(typeof c=="string")le=fW(c,y,ue.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case P:return c=os(31,y,f,R),c.elementType=P,c.lanes=B,c;case v:return kd(y.children,R,B,f);case b:le=8,R|=24;break;case w:return c=os(12,y,f,R|2),c.elementType=w,c.lanes=B,c;case k:return c=os(13,y,f,R),c.elementType=k,c.lanes=B,c;case I:return c=os(19,y,f,R),c.elementType=I,c.lanes=B,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:case E:le=10;break e;case _:le=9;break e;case C:le=11;break e;case j:le=14;break e;case N:le=16,S=null;break e}le=29,y=Error(r(130,c===null?"null":typeof c,"")),S=null}return f=os(le,y,f,R),f.elementType=c,f.type=S,f.lanes=B,f}function kd(c,f,y,S){return c=os(7,c,S,f),c.lanes=y,c}function lS(c,f,y){return c=os(6,c,null,f),c.lanes=y,c}function cS(c,f,y){return f=os(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var ph=[],mh=0,Ib=null,jb=0,As=[],Ns=0,Ad=null,$l=1,zl="";function Nd(c,f){ph[mh++]=jb,ph[mh++]=Ib,Ib=c,jb=f}function m3(c,f,y){As[Ns++]=$l,As[Ns++]=zl,As[Ns++]=Ad,Ad=c;var S=$l;c=zl;var R=32-Yt(S)-1;S&=~(1<<R),y+=1;var B=32-Yt(f)+R;if(30<B){var le=R-R%5;B=(S&(1<<le)-1).toString(32),S>>=le,R-=le,$l=1<<32-Yt(f)+R|y<<R|S,zl=B+c}else $l=1<<B|y<<R|S,zl=c}function uS(c){c.return!==null&&(Nd(c,1),m3(c,1,0))}function dS(c){for(;c===Ib;)Ib=ph[--mh],ph[mh]=null,jb=ph[--mh],ph[mh]=null;for(;c===Ad;)Ad=As[--Ns],As[Ns]=null,zl=As[--Ns],As[Ns]=null,$l=As[--Ns],As[Ns]=null}var Ti=null,ta=null,fr=!1,Rd=null,Ho=!1,fS=Error(r(519));function Id(c){var f=Error(r(418,""));throw Hm(pn(f,c)),fS}function g3(c){var f=c.stateNode,y=c.type,S=c.memoizedProps;switch(f[pe]=c,f[Re]=S,y){case"dialog":er("cancel",f),er("close",f);break;case"iframe":case"object":case"embed":er("load",f);break;case"video":case"audio":for(y=0;y<pg.length;y++)er(pg[y],f);break;case"source":er("error",f);break;case"img":case"image":case"link":er("error",f),er("load",f);break;case"details":er("toggle",f);break;case"input":er("invalid",f),Cm(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),Bo(f);break;case"select":er("invalid",f);break;case"textarea":er("invalid",f),Tm(f,S.value,S.defaultValue,S.children),Bo(f)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||S.suppressHydrationWarning===!0||Dj(f.textContent,y)?(S.popover!=null&&(er("beforetoggle",f),er("toggle",f)),S.onScroll!=null&&er("scroll",f),S.onScrollEnd!=null&&er("scrollend",f),S.onClick!=null&&(f.onclick=fv),f=!0):f=!1,f||Id(c)}function y3(c){for(Ti=c.return;Ti;)switch(Ti.tag){case 5:case 13:Ho=!1;return;case 27:case 3:Ho=!0;return;default:Ti=Ti.return}}function Um(c){if(c!==Ti)return!1;if(!fr)return y3(c),fr=!0,!1;var f=c.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=c.type,y=!(y!=="form"&&y!=="button")||A2(c.type,c.memoizedProps)),y=!y),y&&ta&&Id(c),y3(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(y=c.data,y==="/$"){if(f===0){ta=so(c.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++;c=c.nextSibling}ta=null}}else f===27?(f=ta,pu(c.type)?(c=j2,j2=null,ta=c):ta=f):ta=Ti?so(c.stateNode.nextSibling):null;return!0}function Vm(){ta=Ti=null,fr=!1}function b3(){var c=Rd;return c!==null&&(Ui===null?Ui=c:Ui.push.apply(Ui,c),Rd=null),c}function Hm(c){Rd===null?Rd=[c]:Rd.push(c)}var hS=J(null),jd=null,Ul=null;function Qc(c,f,y){te(hS,f._currentValue),f._currentValue=y}function Vl(c){c._currentValue=hS.current,Q(hS)}function pS(c,f,y){for(;c!==null;){var S=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),c===y)break;c=c.return}}function mS(c,f,y,S){var R=c.child;for(R!==null&&(R.return=c);R!==null;){var B=R.dependencies;if(B!==null){var le=R.child;B=B.firstContext;e:for(;B!==null;){var Ce=B;B=R;for(var $e=0;$e<f.length;$e++)if(Ce.context===f[$e]){B.lanes|=y,Ce=B.alternate,Ce!==null&&(Ce.lanes|=y),pS(B.return,y,c),S||(le=null);break e}B=Ce.next}}else if(R.tag===18){if(le=R.return,le===null)throw Error(r(341));le.lanes|=y,B=le.alternate,B!==null&&(B.lanes|=y),pS(le,y,c),le=null}else le=R.child;if(le!==null)le.return=R;else for(le=R;le!==null;){if(le===c){le=null;break}if(R=le.sibling,R!==null){R.return=le.return,le=R;break}le=le.return}R=le}}function qm(c,f,y,S){c=null;for(var R=f,B=!1;R!==null;){if(!B){if((R.flags&524288)!==0)B=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var le=R.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var Ce=R.type;oi(R.pendingProps.value,le.value)||(c!==null?c.push(Ce):c=[Ce])}}else if(R===Ae.current){if(le=R.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(c!==null?c.push(wg):c=[wg])}R=R.return}c!==null&&mS(f,c,y,S),f.flags|=262144}function Db(c){for(c=c.firstContext;c!==null;){if(!oi(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Dd(c){jd=c,Ul=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function li(c){return v3(jd,c)}function Mb(c,f){return jd===null&&Dd(c),v3(c,f)}function v3(c,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},Ul===null){if(c===null)throw Error(r(308));Ul=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Ul=Ul.next=f;return y}var dG=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(y,S){c.push(S)}};this.abort=function(){f.aborted=!0,c.forEach(function(y){return y()})}},fG=e.unstable_scheduleCallback,hG=e.unstable_NormalPriority,Ca={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gS(){return{controller:new dG,data:new Map,refCount:0}}function Gm(c){c.refCount--,c.refCount===0&&fG(hG,function(){c.controller.abort()})}var Wm=null,yS=0,gh=0,yh=null;function pG(c,f){if(Wm===null){var y=Wm=[];yS=0,gh=v2(),yh={status:"pending",value:void 0,then:function(S){y.push(S)}}}return yS++,f.then(w3,w3),f}function w3(){if(--yS===0&&Wm!==null){yh!==null&&(yh.status="fulfilled");var c=Wm;Wm=null,gh=0,yh=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function mG(c,f){var y=[],S={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return c.then(function(){S.status="fulfilled",S.value=f;for(var R=0;R<y.length;R++)(0,y[R])(f)},function(R){for(S.status="rejected",S.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),S}var x3=ie.S;ie.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&pG(c,f),x3!==null&&x3(c,f)};var Md=J(null);function bS(){var c=Md.current;return c!==null?c:Fr.pooledCache}function Ob(c,f){f===null?te(Md,Md.current):te(Md,f.pool)}function _3(){var c=bS();return c===null?null:{parent:Ca._currentValue,pool:c}}var Km=Error(r(460)),S3=Error(r(474)),Pb=Error(r(542)),vS={then:function(){}};function E3(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Fb(){}function C3(c,f,y){switch(y=c[y],y===void 0?c.push(f):y!==f&&(f.then(Fb,Fb),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,k3(c),c;default:if(typeof f.status=="string")f.then(Fb,Fb);else{if(c=Fr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(S){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=S}},function(S){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,k3(c),c}throw Zm=f,Km}}var Zm=null;function T3(){if(Zm===null)throw Error(r(459));var c=Zm;return Zm=null,c}function k3(c){if(c===Km||c===Pb)throw Error(r(483))}var eu=!1;function wS(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xS(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function tu(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function nu(c,f,y){var S=c.updateQueue;if(S===null)return null;if(S=S.shared,(br&2)!==0){var R=S.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),S.pending=f,f=ks(c),Ma(c,null,y),f}return sa(c,S,f,y),ks(c)}function Ym(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var S=f.lanes;S&=c.pendingLanes,y|=S,f.lanes=y,Ke(c,y)}}function _S(c,f){var y=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var R=null,B=null;if(y=y.firstBaseUpdate,y!==null){do{var le={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};B===null?R=B=le:B=B.next=le,y=y.next}while(y!==null);B===null?R=B=f:B=B.next=f}else R=B=f;y={baseState:S.baseState,firstBaseUpdate:R,lastBaseUpdate:B,shared:S.shared,callbacks:S.callbacks},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}var SS=!1;function Xm(){if(SS){var c=yh;if(c!==null)throw c}}function Jm(c,f,y,S){SS=!1;var R=c.updateQueue;eu=!1;var B=R.firstBaseUpdate,le=R.lastBaseUpdate,Ce=R.shared.pending;if(Ce!==null){R.shared.pending=null;var $e=Ce,dt=$e.next;$e.next=null,le===null?B=dt:le.next=dt,le=$e;var At=c.alternate;At!==null&&(At=At.updateQueue,Ce=At.lastBaseUpdate,Ce!==le&&(Ce===null?At.firstBaseUpdate=dt:Ce.next=dt,At.lastBaseUpdate=$e))}if(B!==null){var Ot=R.baseState;le=0,At=dt=$e=null,Ce=B;do{var mt=Ce.lane&-536870913,yt=mt!==Ce.lane;if(yt?(ir&mt)===mt:(S&mt)===mt){mt!==0&&mt===gh&&(SS=!0),At!==null&&(At=At.next={lane:0,tag:Ce.tag,payload:Ce.payload,callback:null,next:null});e:{var Sn=c,yn=Ce;mt=f;var kr=y;switch(yn.tag){case 1:if(Sn=yn.payload,typeof Sn=="function"){Ot=Sn.call(kr,Ot,mt);break e}Ot=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=yn.payload,mt=typeof Sn=="function"?Sn.call(kr,Ot,mt):Sn,mt==null)break e;Ot=d({},Ot,mt);break e;case 2:eu=!0}}mt=Ce.callback,mt!==null&&(c.flags|=64,yt&&(c.flags|=8192),yt=R.callbacks,yt===null?R.callbacks=[mt]:yt.push(mt))}else yt={lane:mt,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},At===null?(dt=At=yt,$e=Ot):At=At.next=yt,le|=mt;if(Ce=Ce.next,Ce===null){if(Ce=R.shared.pending,Ce===null)break;yt=Ce,Ce=yt.next,yt.next=null,R.lastBaseUpdate=yt,R.shared.pending=null}}while(!0);At===null&&($e=Ot),R.baseState=$e,R.firstBaseUpdate=dt,R.lastBaseUpdate=At,B===null&&(R.shared.lanes=0),uu|=le,c.lanes=le,c.memoizedState=Ot}}function A3(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function N3(c,f){var y=c.callbacks;if(y!==null)for(c.callbacks=null,c=0;c<y.length;c++)A3(y[c],f)}var bh=J(null),Lb=J(0);function R3(c,f){c=Yl,te(Lb,c),te(bh,f),Yl=c|f.baseLanes}function ES(){te(Lb,Yl),te(bh,bh.current)}function CS(){Yl=Lb.current,Q(bh),Q(Lb)}var ru=0,Hn=null,Cr=null,ya=null,Bb=!1,vh=!1,Od=!1,$b=0,Qm=0,wh=null,gG=0;function oa(){throw Error(r(321))}function TS(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!oi(c[y],f[y]))return!1;return!0}function kS(c,f,y,S,R,B){return ru=B,Hn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ie.H=c===null||c.memoizedState===null?hI:pI,Od=!1,B=y(S,R),Od=!1,vh&&(B=j3(f,y,S,R)),I3(c),B}function I3(c){ie.H=Gb;var f=Cr!==null&&Cr.next!==null;if(ru=0,ya=Cr=Hn=null,Bb=!1,Qm=0,wh=null,f)throw Error(r(300));c===null||Oa||(c=c.dependencies,c!==null&&Db(c)&&(Oa=!0))}function j3(c,f,y,S){Hn=c;var R=0;do{if(vh&&(wh=null),Qm=0,vh=!1,25<=R)throw Error(r(301));if(R+=1,ya=Cr=null,c.updateQueue!=null){var B=c.updateQueue;B.lastEffect=null,B.events=null,B.stores=null,B.memoCache!=null&&(B.memoCache.index=0)}ie.H=SG,B=f(y,S)}while(vh);return B}function yG(){var c=ie.H,f=c.useState()[0];return f=typeof f.then=="function"?eg(f):f,c=c.useState()[0],(Cr!==null?Cr.memoizedState:null)!==c&&(Hn.flags|=1024),f}function AS(){var c=$b!==0;return $b=0,c}function NS(c,f,y){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~y}function RS(c){if(Bb){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Bb=!1}ru=0,ya=Cr=Hn=null,vh=!1,Qm=$b=0,wh=null}function $i(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ya===null?Hn.memoizedState=ya=c:ya=ya.next=c,ya}function ba(){if(Cr===null){var c=Hn.alternate;c=c!==null?c.memoizedState:null}else c=Cr.next;var f=ya===null?Hn.memoizedState:ya.next;if(f!==null)ya=f,Cr=c;else{if(c===null)throw Hn.alternate===null?Error(r(467)):Error(r(310));Cr=c,c={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},ya===null?Hn.memoizedState=ya=c:ya=ya.next=c}return ya}function IS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eg(c){var f=Qm;return Qm+=1,wh===null&&(wh=[]),c=C3(wh,c,f),f=Hn,(ya===null?f.memoizedState:ya.next)===null&&(f=f.alternate,ie.H=f===null||f.memoizedState===null?hI:pI),c}function zb(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return eg(c);if(c.$$typeof===E)return li(c)}throw Error(r(438,String(c)))}function jS(c){var f=null,y=Hn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var S=Hn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=IS(),Hn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(c),S=0;S<c;S++)y[S]=L;return f.index++,y}function Hl(c,f){return typeof f=="function"?f(c):f}function Ub(c){var f=ba();return DS(f,Cr,c)}function DS(c,f,y){var S=c.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=y;var R=c.baseQueue,B=S.pending;if(B!==null){if(R!==null){var le=R.next;R.next=B.next,B.next=le}f.baseQueue=R=B,S.pending=null}if(B=c.baseState,R===null)c.memoizedState=B;else{f=R.next;var Ce=le=null,$e=null,dt=f,At=!1;do{var Ot=dt.lane&-536870913;if(Ot!==dt.lane?(ir&Ot)===Ot:(ru&Ot)===Ot){var mt=dt.revertLane;if(mt===0)$e!==null&&($e=$e.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Ot===gh&&(At=!0);else if((ru&mt)===mt){dt=dt.next,mt===gh&&(At=!0);continue}else Ot={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},$e===null?(Ce=$e=Ot,le=B):$e=$e.next=Ot,Hn.lanes|=mt,uu|=mt;Ot=dt.action,Od&&y(B,Ot),B=dt.hasEagerState?dt.eagerState:y(B,Ot)}else mt={lane:Ot,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},$e===null?(Ce=$e=mt,le=B):$e=$e.next=mt,Hn.lanes|=Ot,uu|=Ot;dt=dt.next}while(dt!==null&&dt!==f);if($e===null?le=B:$e.next=Ce,!oi(B,c.memoizedState)&&(Oa=!0,At&&(y=yh,y!==null)))throw y;c.memoizedState=B,c.baseState=le,c.baseQueue=$e,S.lastRenderedState=B}return R===null&&(S.lanes=0),[c.memoizedState,S.dispatch]}function MS(c){var f=ba(),y=f.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=c;var S=y.dispatch,R=y.pending,B=f.memoizedState;if(R!==null){y.pending=null;var le=R=R.next;do B=c(B,le.action),le=le.next;while(le!==R);oi(B,f.memoizedState)||(Oa=!0),f.memoizedState=B,f.baseQueue===null&&(f.baseState=B),y.lastRenderedState=B}return[B,S]}function D3(c,f,y){var S=Hn,R=ba(),B=fr;if(B){if(y===void 0)throw Error(r(407));y=y()}else y=f();var le=!oi((Cr||R).memoizedState,y);le&&(R.memoizedState=y,Oa=!0),R=R.queue;var Ce=P3.bind(null,S,R,c);if(tg(2048,8,Ce,[c]),R.getSnapshot!==f||le||ya!==null&&ya.memoizedState.tag&1){if(S.flags|=2048,xh(9,Vb(),O3.bind(null,S,R,y,f),null),Fr===null)throw Error(r(349));B||(ru&124)!==0||M3(S,f,y)}return y}function M3(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=Hn.updateQueue,f===null?(f=IS(),Hn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function O3(c,f,y,S){f.value=y,f.getSnapshot=S,F3(f)&&L3(c)}function P3(c,f,y){return y(function(){F3(f)&&L3(c)})}function F3(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!oi(c,y)}catch{return!0}}function L3(c){var f=ao(c,2);f!==null&&fs(f,c,2)}function OS(c){var f=$i();if(typeof c=="function"){var y=c;if(c=y(),Od){Mt(!0);try{y()}finally{Mt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:c},f}function B3(c,f,y,S){return c.baseState=y,DS(c,Cr,typeof S=="function"?S:Hl)}function bG(c,f,y,S,R){if(qb(c))throw Error(r(485));if(c=f.action,c!==null){var B={payload:R,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){B.listeners.push(le)}};ie.T!==null?y(!0):B.isTransition=!1,S(B),y=f.pending,y===null?(B.next=f.pending=B,$3(f,B)):(B.next=y.next,f.pending=y.next=B)}}function $3(c,f){var y=f.action,S=f.payload,R=c.state;if(f.isTransition){var B=ie.T,le={};ie.T=le;try{var Ce=y(R,S),$e=ie.S;$e!==null&&$e(le,Ce),z3(c,f,Ce)}catch(dt){PS(c,f,dt)}finally{ie.T=B}}else try{B=y(R,S),z3(c,f,B)}catch(dt){PS(c,f,dt)}}function z3(c,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){U3(c,f,S)},function(S){return PS(c,f,S)}):U3(c,f,y)}function U3(c,f,y){f.status="fulfilled",f.value=y,V3(f),c.state=y,f=c.pending,f!==null&&(y=f.next,y===f?c.pending=null:(y=y.next,f.next=y,$3(c,y)))}function PS(c,f,y){var S=c.pending;if(c.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=y,V3(f),f=f.next;while(f!==S)}c.action=null}function V3(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function H3(c,f){return f}function q3(c,f){if(fr){var y=Fr.formState;if(y!==null){e:{var S=Hn;if(fr){if(ta){t:{for(var R=ta,B=Ho;R.nodeType!==8;){if(!B){R=null;break t}if(R=so(R.nextSibling),R===null){R=null;break t}}B=R.data,R=B==="F!"||B==="F"?R:null}if(R){ta=so(R.nextSibling),S=R.data==="F!";break e}}Id(S)}S=!1}S&&(f=y[0])}}return y=$i(),y.memoizedState=y.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:H3,lastRenderedState:f},y.queue=S,y=uI.bind(null,Hn,S),S.dispatch=y,S=OS(!1),B=zS.bind(null,Hn,!1,S.queue),S=$i(),R={state:f,dispatch:null,action:c,pending:null},S.queue=R,y=bG.bind(null,Hn,R,B,y),R.dispatch=y,S.memoizedState=c,[f,y,!1]}function G3(c){var f=ba();return W3(f,Cr,c)}function W3(c,f,y){if(f=DS(c,f,H3)[0],c=Ub(Hl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=eg(f)}catch(le){throw le===Km?Pb:le}else S=f;f=ba();var R=f.queue,B=R.dispatch;return y!==f.memoizedState&&(Hn.flags|=2048,xh(9,Vb(),vG.bind(null,R,y),null)),[S,B,c]}function vG(c,f){c.action=f}function K3(c){var f=ba(),y=Cr;if(y!==null)return W3(f,y,c);ba(),f=f.memoizedState,y=ba();var S=y.queue.dispatch;return y.memoizedState=c,[f,S,!1]}function xh(c,f,y,S){return c={tag:c,create:y,deps:S,inst:f,next:null},f=Hn.updateQueue,f===null&&(f=IS(),Hn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=c.next=c:(S=y.next,y.next=c,c.next=S,f.lastEffect=c),c}function Vb(){return{destroy:void 0,resource:void 0}}function Z3(){return ba().memoizedState}function Hb(c,f,y,S){var R=$i();S=S===void 0?null:S,Hn.flags|=c,R.memoizedState=xh(1|f,Vb(),y,S)}function tg(c,f,y,S){var R=ba();S=S===void 0?null:S;var B=R.memoizedState.inst;Cr!==null&&S!==null&&TS(S,Cr.memoizedState.deps)?R.memoizedState=xh(f,B,y,S):(Hn.flags|=c,R.memoizedState=xh(1|f,B,y,S))}function Y3(c,f){Hb(8390656,8,c,f)}function X3(c,f){tg(2048,8,c,f)}function J3(c,f){return tg(4,2,c,f)}function Q3(c,f){return tg(4,4,c,f)}function eI(c,f){if(typeof f=="function"){c=c();var y=f(c);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function tI(c,f,y){y=y!=null?y.concat([c]):null,tg(4,4,eI.bind(null,f,c),y)}function FS(){}function nI(c,f){var y=ba();f=f===void 0?null:f;var S=y.memoizedState;return f!==null&&TS(f,S[1])?S[0]:(y.memoizedState=[c,f],c)}function rI(c,f){var y=ba();f=f===void 0?null:f;var S=y.memoizedState;if(f!==null&&TS(f,S[1]))return S[0];if(S=c(),Od){Mt(!0);try{c()}finally{Mt(!1)}}return y.memoizedState=[S,f],S}function LS(c,f,y){return y===void 0||(ru&1073741824)!==0?c.memoizedState=f:(c.memoizedState=y,c=sj(),Hn.lanes|=c,uu|=c,y)}function aI(c,f,y,S){return oi(y,f)?y:bh.current!==null?(c=LS(c,y,S),oi(c,f)||(Oa=!0),c):(ru&42)===0?(Oa=!0,c.memoizedState=y):(c=sj(),Hn.lanes|=c,uu|=c,f)}function iI(c,f,y,S,R){var B=re.p;re.p=B!==0&&8>B?B:8;var le=ie.T,Ce={};ie.T=Ce,zS(c,!1,f,y);try{var $e=R(),dt=ie.S;if(dt!==null&&dt(Ce,$e),$e!==null&&typeof $e=="object"&&typeof $e.then=="function"){var At=mG($e,S);ng(c,f,At,ds(c))}else ng(c,f,S,ds(c))}catch(Ot){ng(c,f,{then:function(){},status:"rejected",reason:Ot},ds())}finally{re.p=B,ie.T=le}}function wG(){}function BS(c,f,y,S){if(c.tag!==5)throw Error(r(476));var R=sI(c).queue;iI(c,R,f,X,y===null?wG:function(){return oI(c),y(S)})}function sI(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:X},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hl,lastRenderedState:y},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function oI(c){var f=sI(c).next.queue;ng(c,f,{},ds())}function $S(){return li(wg)}function lI(){return ba().memoizedState}function cI(){return ba().memoizedState}function xG(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var y=ds();c=tu(y);var S=nu(f,c,y);S!==null&&(fs(S,f,y),Ym(S,f,y)),f={cache:gS()},c.payload=f;return}f=f.return}}function _G(c,f,y){var S=ds();y={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},qb(c)?dI(f,y):(y=ga(c,f,y,S),y!==null&&(fs(y,c,S),fI(y,f,S)))}function uI(c,f,y){var S=ds();ng(c,f,y,S)}function ng(c,f,y,S){var R={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(qb(c))dI(f,R);else{var B=c.alternate;if(c.lanes===0&&(B===null||B.lanes===0)&&(B=f.lastRenderedReducer,B!==null))try{var le=f.lastRenderedState,Ce=B(le,y);if(R.hasEagerState=!0,R.eagerState=Ce,oi(Ce,le))return sa(c,f,R,0),Fr===null&&_n(),!1}catch{}finally{}if(y=ga(c,f,R,S),y!==null)return fs(y,c,S),fI(y,f,S),!0}return!1}function zS(c,f,y,S){if(S={lane:2,revertLane:v2(),action:S,hasEagerState:!1,eagerState:null,next:null},qb(c)){if(f)throw Error(r(479))}else f=ga(c,y,S,2),f!==null&&fs(f,c,2)}function qb(c){var f=c.alternate;return c===Hn||f!==null&&f===Hn}function dI(c,f){vh=Bb=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function fI(c,f,y){if((y&4194048)!==0){var S=f.lanes;S&=c.pendingLanes,y|=S,f.lanes=y,Ke(c,y)}}var Gb={readContext:li,use:zb,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useInsertionEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useSyncExternalStore:oa,useId:oa,useHostTransitionStatus:oa,useFormState:oa,useActionState:oa,useOptimistic:oa,useMemoCache:oa,useCacheRefresh:oa},hI={readContext:li,use:zb,useCallback:function(c,f){return $i().memoizedState=[c,f===void 0?null:f],c},useContext:li,useEffect:Y3,useImperativeHandle:function(c,f,y){y=y!=null?y.concat([c]):null,Hb(4194308,4,eI.bind(null,f,c),y)},useLayoutEffect:function(c,f){return Hb(4194308,4,c,f)},useInsertionEffect:function(c,f){Hb(4,2,c,f)},useMemo:function(c,f){var y=$i();f=f===void 0?null:f;var S=c();if(Od){Mt(!0);try{c()}finally{Mt(!1)}}return y.memoizedState=[S,f],S},useReducer:function(c,f,y){var S=$i();if(y!==void 0){var R=y(f);if(Od){Mt(!0);try{y(f)}finally{Mt(!1)}}}else R=f;return S.memoizedState=S.baseState=R,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:R},S.queue=c,c=c.dispatch=_G.bind(null,Hn,c),[S.memoizedState,c]},useRef:function(c){var f=$i();return c={current:c},f.memoizedState=c},useState:function(c){c=OS(c);var f=c.queue,y=uI.bind(null,Hn,f);return f.dispatch=y,[c.memoizedState,y]},useDebugValue:FS,useDeferredValue:function(c,f){var y=$i();return LS(y,c,f)},useTransition:function(){var c=OS(!1);return c=iI.bind(null,Hn,c.queue,!0,!1),$i().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,y){var S=Hn,R=$i();if(fr){if(y===void 0)throw Error(r(407));y=y()}else{if(y=f(),Fr===null)throw Error(r(349));(ir&124)!==0||M3(S,f,y)}R.memoizedState=y;var B={value:y,getSnapshot:f};return R.queue=B,Y3(P3.bind(null,S,B,c),[c]),S.flags|=2048,xh(9,Vb(),O3.bind(null,S,B,y,f),null),y},useId:function(){var c=$i(),f=Fr.identifierPrefix;if(fr){var y=zl,S=$l;y=(S&~(1<<32-Yt(S)-1)).toString(32)+y,f=""+f+"R"+y,y=$b++,0<y&&(f+="H"+y.toString(32)),f+=""}else y=gG++,f=""+f+"r"+y.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:$S,useFormState:q3,useActionState:q3,useOptimistic:function(c){var f=$i();f.memoizedState=f.baseState=c;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=zS.bind(null,Hn,!0,y),y.dispatch=f,[c,f]},useMemoCache:jS,useCacheRefresh:function(){return $i().memoizedState=xG.bind(null,Hn)}},pI={readContext:li,use:zb,useCallback:nI,useContext:li,useEffect:X3,useImperativeHandle:tI,useInsertionEffect:J3,useLayoutEffect:Q3,useMemo:rI,useReducer:Ub,useRef:Z3,useState:function(){return Ub(Hl)},useDebugValue:FS,useDeferredValue:function(c,f){var y=ba();return aI(y,Cr.memoizedState,c,f)},useTransition:function(){var c=Ub(Hl)[0],f=ba().memoizedState;return[typeof c=="boolean"?c:eg(c),f]},useSyncExternalStore:D3,useId:lI,useHostTransitionStatus:$S,useFormState:G3,useActionState:G3,useOptimistic:function(c,f){var y=ba();return B3(y,Cr,c,f)},useMemoCache:jS,useCacheRefresh:cI},SG={readContext:li,use:zb,useCallback:nI,useContext:li,useEffect:X3,useImperativeHandle:tI,useInsertionEffect:J3,useLayoutEffect:Q3,useMemo:rI,useReducer:MS,useRef:Z3,useState:function(){return MS(Hl)},useDebugValue:FS,useDeferredValue:function(c,f){var y=ba();return Cr===null?LS(y,c,f):aI(y,Cr.memoizedState,c,f)},useTransition:function(){var c=MS(Hl)[0],f=ba().memoizedState;return[typeof c=="boolean"?c:eg(c),f]},useSyncExternalStore:D3,useId:lI,useHostTransitionStatus:$S,useFormState:K3,useActionState:K3,useOptimistic:function(c,f){var y=ba();return Cr!==null?B3(y,Cr,c,f):(y.baseState=c,[c,y.queue.dispatch])},useMemoCache:jS,useCacheRefresh:cI},_h=null,rg=0;function Wb(c){var f=rg;return rg+=1,_h===null&&(_h=[]),C3(_h,c,f)}function ag(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Kb(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function mI(c){var f=c._init;return f(c._payload)}function gI(c){function f(at,Ye){if(c){var ct=at.deletions;ct===null?(at.deletions=[Ye],at.flags|=16):ct.push(Ye)}}function y(at,Ye){if(!c)return null;for(;Ye!==null;)f(at,Ye),Ye=Ye.sibling;return null}function S(at){for(var Ye=new Map;at!==null;)at.key!==null?Ye.set(at.key,at):Ye.set(at.index,at),at=at.sibling;return Ye}function R(at,Ye){return at=Bl(at,Ye),at.index=0,at.sibling=null,at}function B(at,Ye,ct){return at.index=ct,c?(ct=at.alternate,ct!==null?(ct=ct.index,ct<Ye?(at.flags|=67108866,Ye):ct):(at.flags|=67108866,Ye)):(at.flags|=1048576,Ye)}function le(at){return c&&at.alternate===null&&(at.flags|=67108866),at}function Ce(at,Ye,ct,jt){return Ye===null||Ye.tag!==6?(Ye=lS(ct,at.mode,jt),Ye.return=at,Ye):(Ye=R(Ye,ct),Ye.return=at,Ye)}function $e(at,Ye,ct,jt){var on=ct.type;return on===v?At(at,Ye,ct.props.children,jt,ct.key):Ye!==null&&(Ye.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===N&&mI(on)===Ye.type)?(Ye=R(Ye,ct.props),ag(Ye,ct),Ye.return=at,Ye):(Ye=Rb(ct.type,ct.key,ct.props,null,at.mode,jt),ag(Ye,ct),Ye.return=at,Ye)}function dt(at,Ye,ct,jt){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==ct.containerInfo||Ye.stateNode.implementation!==ct.implementation?(Ye=cS(ct,at.mode,jt),Ye.return=at,Ye):(Ye=R(Ye,ct.children||[]),Ye.return=at,Ye)}function At(at,Ye,ct,jt,on){return Ye===null||Ye.tag!==7?(Ye=kd(ct,at.mode,jt,on),Ye.return=at,Ye):(Ye=R(Ye,ct),Ye.return=at,Ye)}function Ot(at,Ye,ct){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=lS(""+Ye,at.mode,ct),Ye.return=at,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case m:return ct=Rb(Ye.type,Ye.key,Ye.props,null,at.mode,ct),ag(ct,Ye),ct.return=at,ct;case g:return Ye=cS(Ye,at.mode,ct),Ye.return=at,Ye;case N:var jt=Ye._init;return Ye=jt(Ye._payload),Ot(at,Ye,ct)}if(se(Ye)||M(Ye))return Ye=kd(Ye,at.mode,ct,null),Ye.return=at,Ye;if(typeof Ye.then=="function")return Ot(at,Wb(Ye),ct);if(Ye.$$typeof===E)return Ot(at,Mb(at,Ye),ct);Kb(at,Ye)}return null}function mt(at,Ye,ct,jt){var on=Ye!==null?Ye.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return on!==null?null:Ce(at,Ye,""+ct,jt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:return ct.key===on?$e(at,Ye,ct,jt):null;case g:return ct.key===on?dt(at,Ye,ct,jt):null;case N:return on=ct._init,ct=on(ct._payload),mt(at,Ye,ct,jt)}if(se(ct)||M(ct))return on!==null?null:At(at,Ye,ct,jt,null);if(typeof ct.then=="function")return mt(at,Ye,Wb(ct),jt);if(ct.$$typeof===E)return mt(at,Ye,Mb(at,ct),jt);Kb(at,ct)}return null}function yt(at,Ye,ct,jt,on){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return at=at.get(ct)||null,Ce(Ye,at,""+jt,on);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case m:return at=at.get(jt.key===null?ct:jt.key)||null,$e(Ye,at,jt,on);case g:return at=at.get(jt.key===null?ct:jt.key)||null,dt(Ye,at,jt,on);case N:var Wn=jt._init;return jt=Wn(jt._payload),yt(at,Ye,ct,jt,on)}if(se(jt)||M(jt))return at=at.get(ct)||null,At(Ye,at,jt,on,null);if(typeof jt.then=="function")return yt(at,Ye,ct,Wb(jt),on);if(jt.$$typeof===E)return yt(at,Ye,ct,Mb(Ye,jt),on);Kb(Ye,jt)}return null}function Sn(at,Ye,ct,jt){for(var on=null,Wn=null,fn=Ye,wn=Ye=0,Fa=null;fn!==null&&wn<ct.length;wn++){fn.index>wn?(Fa=fn,fn=null):Fa=fn.sibling;var ur=mt(at,fn,ct[wn],jt);if(ur===null){fn===null&&(fn=Fa);break}c&&fn&&ur.alternate===null&&f(at,fn),Ye=B(ur,Ye,wn),Wn===null?on=ur:Wn.sibling=ur,Wn=ur,fn=Fa}if(wn===ct.length)return y(at,fn),fr&&Nd(at,wn),on;if(fn===null){for(;wn<ct.length;wn++)fn=Ot(at,ct[wn],jt),fn!==null&&(Ye=B(fn,Ye,wn),Wn===null?on=fn:Wn.sibling=fn,Wn=fn);return fr&&Nd(at,wn),on}for(fn=S(fn);wn<ct.length;wn++)Fa=yt(fn,at,wn,ct[wn],jt),Fa!==null&&(c&&Fa.alternate!==null&&fn.delete(Fa.key===null?wn:Fa.key),Ye=B(Fa,Ye,wn),Wn===null?on=Fa:Wn.sibling=Fa,Wn=Fa);return c&&fn.forEach(function(vu){return f(at,vu)}),fr&&Nd(at,wn),on}function yn(at,Ye,ct,jt){if(ct==null)throw Error(r(151));for(var on=null,Wn=null,fn=Ye,wn=Ye=0,Fa=null,ur=ct.next();fn!==null&&!ur.done;wn++,ur=ct.next()){fn.index>wn?(Fa=fn,fn=null):Fa=fn.sibling;var vu=mt(at,fn,ur.value,jt);if(vu===null){fn===null&&(fn=Fa);break}c&&fn&&vu.alternate===null&&f(at,fn),Ye=B(vu,Ye,wn),Wn===null?on=vu:Wn.sibling=vu,Wn=vu,fn=Fa}if(ur.done)return y(at,fn),fr&&Nd(at,wn),on;if(fn===null){for(;!ur.done;wn++,ur=ct.next())ur=Ot(at,ur.value,jt),ur!==null&&(Ye=B(ur,Ye,wn),Wn===null?on=ur:Wn.sibling=ur,Wn=ur);return fr&&Nd(at,wn),on}for(fn=S(fn);!ur.done;wn++,ur=ct.next())ur=yt(fn,at,wn,ur.value,jt),ur!==null&&(c&&ur.alternate!==null&&fn.delete(ur.key===null?wn:ur.key),Ye=B(ur,Ye,wn),Wn===null?on=ur:Wn.sibling=ur,Wn=ur);return c&&fn.forEach(function(EW){return f(at,EW)}),fr&&Nd(at,wn),on}function kr(at,Ye,ct,jt){if(typeof ct=="object"&&ct!==null&&ct.type===v&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:e:{for(var on=ct.key;Ye!==null;){if(Ye.key===on){if(on=ct.type,on===v){if(Ye.tag===7){y(at,Ye.sibling),jt=R(Ye,ct.props.children),jt.return=at,at=jt;break e}}else if(Ye.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===N&&mI(on)===Ye.type){y(at,Ye.sibling),jt=R(Ye,ct.props),ag(jt,ct),jt.return=at,at=jt;break e}y(at,Ye);break}else f(at,Ye);Ye=Ye.sibling}ct.type===v?(jt=kd(ct.props.children,at.mode,jt,ct.key),jt.return=at,at=jt):(jt=Rb(ct.type,ct.key,ct.props,null,at.mode,jt),ag(jt,ct),jt.return=at,at=jt)}return le(at);case g:e:{for(on=ct.key;Ye!==null;){if(Ye.key===on)if(Ye.tag===4&&Ye.stateNode.containerInfo===ct.containerInfo&&Ye.stateNode.implementation===ct.implementation){y(at,Ye.sibling),jt=R(Ye,ct.children||[]),jt.return=at,at=jt;break e}else{y(at,Ye);break}else f(at,Ye);Ye=Ye.sibling}jt=cS(ct,at.mode,jt),jt.return=at,at=jt}return le(at);case N:return on=ct._init,ct=on(ct._payload),kr(at,Ye,ct,jt)}if(se(ct))return Sn(at,Ye,ct,jt);if(M(ct)){if(on=M(ct),typeof on!="function")throw Error(r(150));return ct=on.call(ct),yn(at,Ye,ct,jt)}if(typeof ct.then=="function")return kr(at,Ye,Wb(ct),jt);if(ct.$$typeof===E)return kr(at,Ye,Mb(at,ct),jt);Kb(at,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ye!==null&&Ye.tag===6?(y(at,Ye.sibling),jt=R(Ye,ct),jt.return=at,at=jt):(y(at,Ye),jt=lS(ct,at.mode,jt),jt.return=at,at=jt),le(at)):y(at,Ye)}return function(at,Ye,ct,jt){try{rg=0;var on=kr(at,Ye,ct,jt);return _h=null,on}catch(fn){if(fn===Km||fn===Pb)throw fn;var Wn=os(29,fn,null,at.mode);return Wn.lanes=jt,Wn.return=at,Wn}finally{}}}var Sh=gI(!0),yI=gI(!1),Rs=J(null),qo=null;function au(c){var f=c.alternate;te(Ta,Ta.current&1),te(Rs,c),qo===null&&(f===null||bh.current!==null||f.memoizedState!==null)&&(qo=c)}function bI(c){if(c.tag===22){if(te(Ta,Ta.current),te(Rs,c),qo===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(qo=c)}}else iu()}function iu(){te(Ta,Ta.current),te(Rs,Rs.current)}function ql(c){Q(Rs),qo===c&&(qo=null),Q(Ta)}var Ta=J(0);function Zb(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||I2(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function US(c,f,y,S){f=c.memoizedState,y=y(S,f),y=y==null?f:d({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var VS={enqueueSetState:function(c,f,y){c=c._reactInternals;var S=ds(),R=tu(S);R.payload=f,y!=null&&(R.callback=y),f=nu(c,R,S),f!==null&&(fs(f,c,S),Ym(f,c,S))},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var S=ds(),R=tu(S);R.tag=1,R.payload=f,y!=null&&(R.callback=y),f=nu(c,R,S),f!==null&&(fs(f,c,S),Ym(f,c,S))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=ds(),S=tu(y);S.tag=2,f!=null&&(S.callback=f),f=nu(c,S,y),f!==null&&(fs(f,c,y),Ym(f,c,y))}};function vI(c,f,y,S,R,B,le){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,B,le):f.prototype&&f.prototype.isPureReactComponent?!A(y,S)||!A(R,B):!0}function wI(c,f,y,S){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,S),f.state!==c&&VS.enqueueReplaceState(f,f.state,null)}function Pd(c,f){var y=f;if("ref"in f){y={};for(var S in f)S!=="ref"&&(y[S]=f[S])}if(c=c.defaultProps){y===f&&(y=d({},y));for(var R in c)y[R]===void 0&&(y[R]=c[R])}return y}var Yb=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof da=="object"&&typeof da.emit=="function"){da.emit("uncaughtException",c);return}console.error(c)};function xI(c){Yb(c)}function _I(c){console.error(c)}function SI(c){Yb(c)}function Xb(c,f){try{var y=c.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function EI(c,f,y){try{var S=c.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function HS(c,f,y){return y=tu(y),y.tag=3,y.payload={element:null},y.callback=function(){Xb(c,f)},y}function CI(c){return c=tu(c),c.tag=3,c}function TI(c,f,y,S){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var B=S.value;c.payload=function(){return R(B)},c.callback=function(){EI(f,y,S)}}var le=y.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(c.callback=function(){EI(f,y,S),typeof R!="function"&&(du===null?du=new Set([this]):du.add(this));var Ce=S.stack;this.componentDidCatch(S.value,{componentStack:Ce!==null?Ce:""})})}function EG(c,f,y,S,R){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=y.alternate,f!==null&&qm(f,y,R,!0),y=Rs.current,y!==null){switch(y.tag){case 13:return qo===null?p2():y.alternate===null&&na===0&&(na=3),y.flags&=-257,y.flags|=65536,y.lanes=R,S===vS?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([S]):f.add(S),g2(c,S,R)),!1;case 22:return y.flags|=65536,S===vS?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([S]):y.add(S)),g2(c,S,R)),!1}throw Error(r(435,y.tag))}return g2(c,S,R),p2(),!1}if(fr)return f=Rs.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,S!==fS&&(c=Error(r(422),{cause:S}),Hm(pn(c,y)))):(S!==fS&&(f=Error(r(423),{cause:S}),Hm(pn(f,y))),c=c.current.alternate,c.flags|=65536,R&=-R,c.lanes|=R,S=pn(S,y),R=HS(c.stateNode,S,R),_S(c,R),na!==4&&(na=2)),!1;var B=Error(r(520),{cause:S});if(B=pn(B,y),dg===null?dg=[B]:dg.push(B),na!==4&&(na=2),f===null)return!0;S=pn(S,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,c=R&-R,y.lanes|=c,c=HS(y.stateNode,S,c),_S(y,c),!1;case 1:if(f=y.type,B=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(du===null||!du.has(B))))return y.flags|=65536,R&=-R,y.lanes|=R,R=CI(R),TI(R,c,y,S),_S(y,R),!1}y=y.return}while(y!==null);return!1}var kI=Error(r(461)),Oa=!1;function Ja(c,f,y,S){f.child=c===null?yI(f,null,y,S):Sh(f,c.child,y,S)}function AI(c,f,y,S,R){y=y.render;var B=f.ref;if("ref"in S){var le={};for(var Ce in S)Ce!=="ref"&&(le[Ce]=S[Ce])}else le=S;return Dd(f),S=kS(c,f,y,le,B,R),Ce=AS(),c!==null&&!Oa?(NS(c,f,R),Gl(c,f,R)):(fr&&Ce&&uS(f),f.flags|=1,Ja(c,f,S,R),f.child)}function NI(c,f,y,S,R){if(c===null){var B=y.type;return typeof B=="function"&&!oS(B)&&B.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=B,RI(c,f,B,S,R)):(c=Rb(y.type,null,S,f,f.mode,R),c.ref=f.ref,c.return=f,f.child=c)}if(B=c.child,!JS(c,R)){var le=B.memoizedProps;if(y=y.compare,y=y!==null?y:A,y(le,S)&&c.ref===f.ref)return Gl(c,f,R)}return f.flags|=1,c=Bl(B,S),c.ref=f.ref,c.return=f,f.child=c}function RI(c,f,y,S,R){if(c!==null){var B=c.memoizedProps;if(A(B,S)&&c.ref===f.ref)if(Oa=!1,f.pendingProps=S=B,JS(c,R))(c.flags&131072)!==0&&(Oa=!0);else return f.lanes=c.lanes,Gl(c,f,R)}return qS(c,f,y,S,R)}function II(c,f,y){var S=f.pendingProps,R=S.children,B=c!==null?c.memoizedState:null;if(S.mode==="hidden"){if((f.flags&128)!==0){if(S=B!==null?B.baseLanes|y:y,c!==null){for(R=f.child=c.child,B=0;R!==null;)B=B|R.lanes|R.childLanes,R=R.sibling;f.childLanes=B&~S}else f.childLanes=0,f.child=null;return jI(c,f,S,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Ob(f,B!==null?B.cachePool:null),B!==null?R3(f,B):ES(),bI(f);else return f.lanes=f.childLanes=536870912,jI(c,f,B!==null?B.baseLanes|y:y,y)}else B!==null?(Ob(f,B.cachePool),R3(f,B),iu(),f.memoizedState=null):(c!==null&&Ob(f,null),ES(),iu());return Ja(c,f,R,y),f.child}function jI(c,f,y,S){var R=bS();return R=R===null?null:{parent:Ca._currentValue,pool:R},f.memoizedState={baseLanes:y,cachePool:R},c!==null&&Ob(f,null),ES(),bI(f),c!==null&&qm(c,f,S,!0),null}function Jb(c,f){var y=f.ref;if(y===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(c===null||c.ref!==y)&&(f.flags|=4194816)}}function qS(c,f,y,S,R){return Dd(f),y=kS(c,f,y,S,void 0,R),S=AS(),c!==null&&!Oa?(NS(c,f,R),Gl(c,f,R)):(fr&&S&&uS(f),f.flags|=1,Ja(c,f,y,R),f.child)}function DI(c,f,y,S,R,B){return Dd(f),f.updateQueue=null,y=j3(f,S,y,R),I3(c),S=AS(),c!==null&&!Oa?(NS(c,f,B),Gl(c,f,B)):(fr&&S&&uS(f),f.flags|=1,Ja(c,f,y,B),f.child)}function MI(c,f,y,S,R){if(Dd(f),f.stateNode===null){var B=Vo,le=y.contextType;typeof le=="object"&&le!==null&&(B=li(le)),B=new y(S,B),f.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,B.updater=VS,f.stateNode=B,B._reactInternals=f,B=f.stateNode,B.props=S,B.state=f.memoizedState,B.refs={},wS(f),le=y.contextType,B.context=typeof le=="object"&&le!==null?li(le):Vo,B.state=f.memoizedState,le=y.getDerivedStateFromProps,typeof le=="function"&&(US(f,y,le,S),B.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(le=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),le!==B.state&&VS.enqueueReplaceState(B,B.state,null),Jm(f,S,B,R),Xm(),B.state=f.memoizedState),typeof B.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(c===null){B=f.stateNode;var Ce=f.memoizedProps,$e=Pd(y,Ce);B.props=$e;var dt=B.context,At=y.contextType;le=Vo,typeof At=="object"&&At!==null&&(le=li(At));var Ot=y.getDerivedStateFromProps;At=typeof Ot=="function"||typeof B.getSnapshotBeforeUpdate=="function",Ce=f.pendingProps!==Ce,At||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(Ce||dt!==le)&&wI(f,B,S,le),eu=!1;var mt=f.memoizedState;B.state=mt,Jm(f,S,B,R),Xm(),dt=f.memoizedState,Ce||mt!==dt||eu?(typeof Ot=="function"&&(US(f,y,Ot,S),dt=f.memoizedState),($e=eu||vI(f,y,$e,S,mt,dt,le))?(At||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount()),typeof B.componentDidMount=="function"&&(f.flags|=4194308)):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=dt),B.props=S,B.state=dt,B.context=le,S=$e):(typeof B.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{B=f.stateNode,xS(c,f),le=f.memoizedProps,At=Pd(y,le),B.props=At,Ot=f.pendingProps,mt=B.context,dt=y.contextType,$e=Vo,typeof dt=="object"&&dt!==null&&($e=li(dt)),Ce=y.getDerivedStateFromProps,(dt=typeof Ce=="function"||typeof B.getSnapshotBeforeUpdate=="function")||typeof B.UNSAFE_componentWillReceiveProps!="function"&&typeof B.componentWillReceiveProps!="function"||(le!==Ot||mt!==$e)&&wI(f,B,S,$e),eu=!1,mt=f.memoizedState,B.state=mt,Jm(f,S,B,R),Xm();var yt=f.memoizedState;le!==Ot||mt!==yt||eu||c!==null&&c.dependencies!==null&&Db(c.dependencies)?(typeof Ce=="function"&&(US(f,y,Ce,S),yt=f.memoizedState),(At=eu||vI(f,y,At,S,mt,yt,$e)||c!==null&&c.dependencies!==null&&Db(c.dependencies))?(dt||typeof B.UNSAFE_componentWillUpdate!="function"&&typeof B.componentWillUpdate!="function"||(typeof B.componentWillUpdate=="function"&&B.componentWillUpdate(S,yt,$e),typeof B.UNSAFE_componentWillUpdate=="function"&&B.UNSAFE_componentWillUpdate(S,yt,$e)),typeof B.componentDidUpdate=="function"&&(f.flags|=4),typeof B.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof B.componentDidUpdate!="function"||le===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||le===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=yt),B.props=S,B.state=yt,B.context=$e,S=At):(typeof B.componentDidUpdate!="function"||le===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof B.getSnapshotBeforeUpdate!="function"||le===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),S=!1)}return B=S,Jb(c,f),S=(f.flags&128)!==0,B||S?(B=f.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:B.render(),f.flags|=1,c!==null&&S?(f.child=Sh(f,c.child,null,R),f.child=Sh(f,null,y,R)):Ja(c,f,y,R),f.memoizedState=B.state,c=f.child):c=Gl(c,f,R),c}function OI(c,f,y,S){return Vm(),f.flags|=256,Ja(c,f,y,S),f.child}var GS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function WS(c){return{baseLanes:c,cachePool:_3()}}function KS(c,f,y){return c=c!==null?c.childLanes&~y:0,f&&(c|=Is),c}function PI(c,f,y){var S=f.pendingProps,R=!1,B=(f.flags&128)!==0,le;if((le=B)||(le=c!==null&&c.memoizedState===null?!1:(Ta.current&2)!==0),le&&(R=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,c===null){if(fr){if(R?au(f):iu(),fr){var Ce=ta,$e;if($e=Ce){e:{for($e=Ce,Ce=Ho;$e.nodeType!==8;){if(!Ce){Ce=null;break e}if($e=so($e.nextSibling),$e===null){Ce=null;break e}}Ce=$e}Ce!==null?(f.memoizedState={dehydrated:Ce,treeContext:Ad!==null?{id:$l,overflow:zl}:null,retryLane:536870912,hydrationErrors:null},$e=os(18,null,null,0),$e.stateNode=Ce,$e.return=f,f.child=$e,Ti=f,ta=null,$e=!0):$e=!1}$e||Id(f)}if(Ce=f.memoizedState,Ce!==null&&(Ce=Ce.dehydrated,Ce!==null))return I2(Ce)?f.lanes=32:f.lanes=536870912,null;ql(f)}return Ce=S.children,S=S.fallback,R?(iu(),R=f.mode,Ce=Qb({mode:"hidden",children:Ce},R),S=kd(S,R,y,null),Ce.return=f,S.return=f,Ce.sibling=S,f.child=Ce,R=f.child,R.memoizedState=WS(y),R.childLanes=KS(c,le,y),f.memoizedState=GS,S):(au(f),ZS(f,Ce))}if($e=c.memoizedState,$e!==null&&(Ce=$e.dehydrated,Ce!==null)){if(B)f.flags&256?(au(f),f.flags&=-257,f=YS(c,f,y)):f.memoizedState!==null?(iu(),f.child=c.child,f.flags|=128,f=null):(iu(),R=S.fallback,Ce=f.mode,S=Qb({mode:"visible",children:S.children},Ce),R=kd(R,Ce,y,null),R.flags|=2,S.return=f,R.return=f,S.sibling=R,f.child=S,Sh(f,c.child,null,y),S=f.child,S.memoizedState=WS(y),S.childLanes=KS(c,le,y),f.memoizedState=GS,f=R);else if(au(f),I2(Ce)){if(le=Ce.nextSibling&&Ce.nextSibling.dataset,le)var dt=le.dgst;le=dt,S=Error(r(419)),S.stack="",S.digest=le,Hm({value:S,source:null,stack:null}),f=YS(c,f,y)}else if(Oa||qm(c,f,y,!1),le=(y&c.childLanes)!==0,Oa||le){if(le=Fr,le!==null&&(S=y&-y,S=(S&42)!==0?1:Dt(S),S=(S&(le.suspendedLanes|y))!==0?0:S,S!==0&&S!==$e.retryLane))throw $e.retryLane=S,ao(c,S),fs(le,c,S),kI;Ce.data==="$?"||p2(),f=YS(c,f,y)}else Ce.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=$e.treeContext,ta=so(Ce.nextSibling),Ti=f,fr=!0,Rd=null,Ho=!1,c!==null&&(As[Ns++]=$l,As[Ns++]=zl,As[Ns++]=Ad,$l=c.id,zl=c.overflow,Ad=f),f=ZS(f,S.children),f.flags|=4096);return f}return R?(iu(),R=S.fallback,Ce=f.mode,$e=c.child,dt=$e.sibling,S=Bl($e,{mode:"hidden",children:S.children}),S.subtreeFlags=$e.subtreeFlags&65011712,dt!==null?R=Bl(dt,R):(R=kd(R,Ce,y,null),R.flags|=2),R.return=f,S.return=f,S.sibling=R,f.child=S,S=R,R=f.child,Ce=c.child.memoizedState,Ce===null?Ce=WS(y):($e=Ce.cachePool,$e!==null?(dt=Ca._currentValue,$e=$e.parent!==dt?{parent:dt,pool:dt}:$e):$e=_3(),Ce={baseLanes:Ce.baseLanes|y,cachePool:$e}),R.memoizedState=Ce,R.childLanes=KS(c,le,y),f.memoizedState=GS,S):(au(f),y=c.child,c=y.sibling,y=Bl(y,{mode:"visible",children:S.children}),y.return=f,y.sibling=null,c!==null&&(le=f.deletions,le===null?(f.deletions=[c],f.flags|=16):le.push(c)),f.child=y,f.memoizedState=null,y)}function ZS(c,f){return f=Qb({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Qb(c,f){return c=os(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function YS(c,f,y){return Sh(f,c.child,null,y),c=ZS(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function FI(c,f,y){c.lanes|=f;var S=c.alternate;S!==null&&(S.lanes|=f),pS(c.return,f,y)}function XS(c,f,y,S,R){var B=c.memoizedState;B===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:R}:(B.isBackwards=f,B.rendering=null,B.renderingStartTime=0,B.last=S,B.tail=y,B.tailMode=R)}function LI(c,f,y){var S=f.pendingProps,R=S.revealOrder,B=S.tail;if(Ja(c,f,S.children,y),S=Ta.current,(S&2)!==0)S=S&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&FI(c,y,f);else if(c.tag===19)FI(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}switch(te(Ta,S),R){case"forwards":for(y=f.child,R=null;y!==null;)c=y.alternate,c!==null&&Zb(c)===null&&(R=y),y=y.sibling;y=R,y===null?(R=f.child,f.child=null):(R=y.sibling,y.sibling=null),XS(f,!1,R,y,B);break;case"backwards":for(y=null,R=f.child,f.child=null;R!==null;){if(c=R.alternate,c!==null&&Zb(c)===null){f.child=R;break}c=R.sibling,R.sibling=y,y=R,R=c}XS(f,!0,y,null,B);break;case"together":XS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Gl(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),uu|=f.lanes,(y&f.childLanes)===0)if(c!==null){if(qm(c,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,y=Bl(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=Bl(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function JS(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Db(c)))}function CG(c,f,y){switch(f.tag){case 3:_e(f,f.stateNode.containerInfo),Qc(f,Ca,c.memoizedState.cache),Vm();break;case 27:case 5:Be(f);break;case 4:_e(f,f.stateNode.containerInfo);break;case 10:Qc(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(au(f),f.flags|=128,null):(y&f.child.childLanes)!==0?PI(c,f,y):(au(f),c=Gl(c,f,y),c!==null?c.sibling:null);au(f);break;case 19:var R=(c.flags&128)!==0;if(S=(y&f.childLanes)!==0,S||(qm(c,f,y,!1),S=(y&f.childLanes)!==0),R){if(S)return LI(c,f,y);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),te(Ta,Ta.current),S)break;return null;case 22:case 23:return f.lanes=0,II(c,f,y);case 24:Qc(f,Ca,c.memoizedState.cache)}return Gl(c,f,y)}function BI(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps)Oa=!0;else{if(!JS(c,y)&&(f.flags&128)===0)return Oa=!1,CG(c,f,y);Oa=(c.flags&131072)!==0}else Oa=!1,fr&&(f.flags&1048576)!==0&&m3(f,jb,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var S=f.elementType,R=S._init;if(S=R(S._payload),f.type=S,typeof S=="function")oS(S)?(c=Pd(S,c),f.tag=1,f=MI(null,f,S,c,y)):(f.tag=0,f=qS(null,f,S,c,y));else{if(S!=null){if(R=S.$$typeof,R===C){f.tag=11,f=AI(null,f,S,c,y);break e}else if(R===j){f.tag=14,f=NI(null,f,S,c,y);break e}}throw f=U(S)||S,Error(r(306,f,""))}}return f;case 0:return qS(c,f,f.type,f.pendingProps,y);case 1:return S=f.type,R=Pd(S,f.pendingProps),MI(c,f,S,R,y);case 3:e:{if(_e(f,f.stateNode.containerInfo),c===null)throw Error(r(387));S=f.pendingProps;var B=f.memoizedState;R=B.element,xS(c,f),Jm(f,S,null,y);var le=f.memoizedState;if(S=le.cache,Qc(f,Ca,S),S!==B.cache&&mS(f,[Ca],y,!0),Xm(),S=le.element,B.isDehydrated)if(B={element:S,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=B,f.memoizedState=B,f.flags&256){f=OI(c,f,S,y);break e}else if(S!==R){R=pn(Error(r(424)),f),Hm(R),f=OI(c,f,S,y);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(ta=so(c.firstChild),Ti=f,fr=!0,Rd=null,Ho=!0,y=yI(f,null,S,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Vm(),S===R){f=Gl(c,f,y);break e}Ja(c,f,S,y)}f=f.child}return f;case 26:return Jb(c,f),c===null?(y=Vj(f.type,null,f.pendingProps,null))?f.memoizedState=y:fr||(y=f.type,c=f.pendingProps,S=hv(Ie.current).createElement(y),S[pe]=f,S[Re]=c,ei(S,y,c),$n(S),f.stateNode=S):f.memoizedState=Vj(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Be(f),c===null&&fr&&(S=f.stateNode=$j(f.type,f.pendingProps,Ie.current),Ti=f,Ho=!0,R=ta,pu(f.type)?(j2=R,ta=so(S.firstChild)):ta=R),Ja(c,f,f.pendingProps.children,y),Jb(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&fr&&((R=S=ta)&&(S=QG(S,f.type,f.pendingProps,Ho),S!==null?(f.stateNode=S,Ti=f,ta=so(S.firstChild),Ho=!1,R=!0):R=!1),R||Id(f)),Be(f),R=f.type,B=f.pendingProps,le=c!==null?c.memoizedProps:null,S=B.children,A2(R,B)?S=null:le!==null&&A2(R,le)&&(f.flags|=32),f.memoizedState!==null&&(R=kS(c,f,yG,null,null,y),wg._currentValue=R),Jb(c,f),Ja(c,f,S,y),f.child;case 6:return c===null&&fr&&((c=y=ta)&&(y=eW(y,f.pendingProps,Ho),y!==null?(f.stateNode=y,Ti=f,ta=null,c=!0):c=!1),c||Id(f)),null;case 13:return PI(c,f,y);case 4:return _e(f,f.stateNode.containerInfo),S=f.pendingProps,c===null?f.child=Sh(f,null,S,y):Ja(c,f,S,y),f.child;case 11:return AI(c,f,f.type,f.pendingProps,y);case 7:return Ja(c,f,f.pendingProps,y),f.child;case 8:return Ja(c,f,f.pendingProps.children,y),f.child;case 12:return Ja(c,f,f.pendingProps.children,y),f.child;case 10:return S=f.pendingProps,Qc(f,f.type,S.value),Ja(c,f,S.children,y),f.child;case 9:return R=f.type._context,S=f.pendingProps.children,Dd(f),R=li(R),S=S(R),f.flags|=1,Ja(c,f,S,y),f.child;case 14:return NI(c,f,f.type,f.pendingProps,y);case 15:return RI(c,f,f.type,f.pendingProps,y);case 19:return LI(c,f,y);case 31:return S=f.pendingProps,y=f.mode,S={mode:S.mode,children:S.children},c===null?(y=Qb(S,y),y.ref=f.ref,f.child=y,y.return=f,f=y):(y=Bl(c.child,S),y.ref=f.ref,f.child=y,y.return=f,f=y),f;case 22:return II(c,f,y);case 24:return Dd(f),S=li(Ca),c===null?(R=bS(),R===null&&(R=Fr,B=gS(),R.pooledCache=B,B.refCount++,B!==null&&(R.pooledCacheLanes|=y),R=B),f.memoizedState={parent:S,cache:R},wS(f),Qc(f,Ca,R)):((c.lanes&y)!==0&&(xS(c,f),Jm(f,null,null,y),Xm()),R=c.memoizedState,B=f.memoizedState,R.parent!==S?(R={parent:S,cache:S},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),Qc(f,Ca,S)):(S=B.cache,Qc(f,Ca,S),S!==R.cache&&mS(f,[Ca],y,!0))),Ja(c,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Wl(c){c.flags|=4}function $I(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!Kj(f)){if(f=Rs.current,f!==null&&((ir&4194048)===ir?qo!==null:(ir&62914560)!==ir&&(ir&536870912)===0||f!==qo))throw Zm=vS,S3;c.flags|=8192}}function ev(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?F():536870912,c.lanes|=f,kh|=f)}function ig(c,f){if(!fr)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function Yr(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,S=0;if(f)for(var R=c.child;R!==null;)y|=R.lanes|R.childLanes,S|=R.subtreeFlags&65011712,S|=R.flags&65011712,R.return=c,R=R.sibling;else for(R=c.child;R!==null;)y|=R.lanes|R.childLanes,S|=R.subtreeFlags,S|=R.flags,R.return=c,R=R.sibling;return c.subtreeFlags|=S,c.childLanes=y,f}function TG(c,f,y){var S=f.pendingProps;switch(dS(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(f),null;case 1:return Yr(f),null;case 3:return y=f.stateNode,S=null,c!==null&&(S=c.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),Vl(Ca),ve(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(Um(f)?Wl(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,b3())),Yr(f),null;case 26:return y=f.memoizedState,c===null?(Wl(f),y!==null?(Yr(f),$I(f,y)):(Yr(f),f.flags&=-16777217)):y?y!==c.memoizedState?(Wl(f),Yr(f),$I(f,y)):(Yr(f),f.flags&=-16777217):(c.memoizedProps!==S&&Wl(f),Yr(f),f.flags&=-16777217),null;case 27:nt(f),y=Ie.current;var R=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==S&&Wl(f);else{if(!S){if(f.stateNode===null)throw Error(r(166));return Yr(f),null}c=ue.current,Um(f)?g3(f):(c=$j(R,S,y),f.stateNode=c,Wl(f))}return Yr(f),null;case 5:if(nt(f),y=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==S&&Wl(f);else{if(!S){if(f.stateNode===null)throw Error(r(166));return Yr(f),null}if(c=ue.current,Um(f))g3(f);else{switch(R=hv(Ie.current),c){case 1:c=R.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:c=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":c=R.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":c=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":c=R.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof S.is=="string"?R.createElement("select",{is:S.is}):R.createElement("select"),S.multiple?c.multiple=!0:S.size&&(c.size=S.size);break;default:c=typeof S.is=="string"?R.createElement(y,{is:S.is}):R.createElement(y)}}c[pe]=f,c[Re]=S;e:for(R=f.child;R!==null;){if(R.tag===5||R.tag===6)c.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===f)break e;for(;R.sibling===null;){if(R.return===null||R.return===f)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}f.stateNode=c;e:switch(ei(c,y,S),y){case"button":case"input":case"select":case"textarea":c=!!S.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Wl(f)}}return Yr(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==S&&Wl(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(r(166));if(c=Ie.current,Um(f)){if(c=f.stateNode,y=f.memoizedProps,S=null,R=Ti,R!==null)switch(R.tag){case 27:case 5:S=R.memoizedProps}c[pe]=f,c=!!(c.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||Dj(c.nodeValue,y)),c||Id(f)}else c=hv(c).createTextNode(S),c[pe]=f,f.stateNode=c}return Yr(f),null;case 13:if(S=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(R=Um(f),S!==null&&S.dehydrated!==null){if(c===null){if(!R)throw Error(r(318));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(r(317));R[pe]=f}else Vm(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Yr(f),R=!1}else R=b3(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=R),R=!0;if(!R)return f.flags&256?(ql(f),f):(ql(f),null)}if(ql(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=S!==null,c=c!==null&&c.memoizedState!==null,y){S=f.child,R=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(R=S.alternate.memoizedState.cachePool.pool);var B=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(B=S.memoizedState.cachePool.pool),B!==R&&(S.flags|=2048)}return y!==c&&y&&(f.child.flags|=8192),ev(f,f.updateQueue),Yr(f),null;case 4:return ve(),c===null&&S2(f.stateNode.containerInfo),Yr(f),null;case 10:return Vl(f.type),Yr(f),null;case 19:if(Q(Ta),R=f.memoizedState,R===null)return Yr(f),null;if(S=(f.flags&128)!==0,B=R.rendering,B===null)if(S)ig(R,!1);else{if(na!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(B=Zb(c),B!==null){for(f.flags|=128,ig(R,!1),c=B.updateQueue,f.updateQueue=c,ev(f,c),f.subtreeFlags=0,c=y,y=f.child;y!==null;)p3(y,c),y=y.sibling;return te(Ta,Ta.current&1|2),f.child}c=c.sibling}R.tail!==null&&fe()>rv&&(f.flags|=128,S=!0,ig(R,!1),f.lanes=4194304)}else{if(!S)if(c=Zb(B),c!==null){if(f.flags|=128,S=!0,c=c.updateQueue,f.updateQueue=c,ev(f,c),ig(R,!0),R.tail===null&&R.tailMode==="hidden"&&!B.alternate&&!fr)return Yr(f),null}else 2*fe()-R.renderingStartTime>rv&&y!==536870912&&(f.flags|=128,S=!0,ig(R,!1),f.lanes=4194304);R.isBackwards?(B.sibling=f.child,f.child=B):(c=R.last,c!==null?c.sibling=B:f.child=B,R.last=B)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=fe(),f.sibling=null,c=Ta.current,te(Ta,S?c&1|2:c&1),f):(Yr(f),null);case 22:case 23:return ql(f),CS(),S=f.memoizedState!==null,c!==null?c.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(y&536870912)!==0&&(f.flags&128)===0&&(Yr(f),f.subtreeFlags&6&&(f.flags|=8192)):Yr(f),y=f.updateQueue,y!==null&&ev(f,y.retryQueue),y=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048),c!==null&&Q(Md),null;case 24:return y=null,c!==null&&(y=c.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),Vl(Ca),Yr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function kG(c,f){switch(dS(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Vl(Ca),ve(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return nt(f),null;case 13:if(ql(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Vm()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Q(Ta),null;case 4:return ve(),null;case 10:return Vl(f.type),null;case 22:case 23:return ql(f),CS(),c!==null&&Q(Md),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return Vl(Ca),null;case 25:return null;default:return null}}function zI(c,f){switch(dS(f),f.tag){case 3:Vl(Ca),ve();break;case 26:case 27:case 5:nt(f);break;case 4:ve();break;case 13:ql(f);break;case 19:Q(Ta);break;case 10:Vl(f.type);break;case 22:case 23:ql(f),CS(),c!==null&&Q(Md);break;case 24:Vl(Ca)}}function sg(c,f){try{var y=f.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var R=S.next;y=R;do{if((y.tag&c)===c){S=void 0;var B=y.create,le=y.inst;S=B(),le.destroy=S}y=y.next}while(y!==R)}}catch(Ce){Dr(f,f.return,Ce)}}function su(c,f,y){try{var S=f.updateQueue,R=S!==null?S.lastEffect:null;if(R!==null){var B=R.next;S=B;do{if((S.tag&c)===c){var le=S.inst,Ce=le.destroy;if(Ce!==void 0){le.destroy=void 0,R=f;var $e=y,dt=Ce;try{dt()}catch(At){Dr(R,$e,At)}}}S=S.next}while(S!==B)}}catch(At){Dr(f,f.return,At)}}function UI(c){var f=c.updateQueue;if(f!==null){var y=c.stateNode;try{N3(f,y)}catch(S){Dr(c,c.return,S)}}}function VI(c,f,y){y.props=Pd(c.type,c.memoizedProps),y.state=c.memoizedState;try{y.componentWillUnmount()}catch(S){Dr(c,f,S)}}function og(c,f){try{var y=c.ref;if(y!==null){switch(c.tag){case 26:case 27:case 5:var S=c.stateNode;break;case 30:S=c.stateNode;break;default:S=c.stateNode}typeof y=="function"?c.refCleanup=y(S):y.current=S}}catch(R){Dr(c,f,R)}}function Go(c,f){var y=c.ref,S=c.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(R){Dr(c,f,R)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){Dr(c,f,R)}else y.current=null}function HI(c){var f=c.type,y=c.memoizedProps,S=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(R){Dr(c,c.return,R)}}function QS(c,f,y){try{var S=c.stateNode;KG(S,c.type,y,f),S[Re]=f}catch(R){Dr(c,c.return,R)}}function qI(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&pu(c.type)||c.tag===4}function e2(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||qI(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&pu(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function t2(c,f,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(c,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(c),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=fv));else if(S!==4&&(S===27&&pu(c.type)&&(y=c.stateNode,f=null),c=c.child,c!==null))for(t2(c,f,y),c=c.sibling;c!==null;)t2(c,f,y),c=c.sibling}function tv(c,f,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?y.insertBefore(c,f):y.appendChild(c);else if(S!==4&&(S===27&&pu(c.type)&&(y=c.stateNode),c=c.child,c!==null))for(tv(c,f,y),c=c.sibling;c!==null;)tv(c,f,y),c=c.sibling}function GI(c){var f=c.stateNode,y=c.memoizedProps;try{for(var S=c.type,R=f.attributes;R.length;)f.removeAttributeNode(R[0]);ei(f,S,y),f[pe]=c,f[Re]=y}catch(B){Dr(c,c.return,B)}}var Kl=!1,la=!1,n2=!1,WI=typeof WeakSet=="function"?WeakSet:Set,Pa=null;function AG(c,f){if(c=c.containerInfo,T2=vv,c=de(c),xe(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else e:{y=(y=c.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var R=S.anchorOffset,B=S.focusNode;S=S.focusOffset;try{y.nodeType,B.nodeType}catch{y=null;break e}var le=0,Ce=-1,$e=-1,dt=0,At=0,Ot=c,mt=null;t:for(;;){for(var yt;Ot!==y||R!==0&&Ot.nodeType!==3||(Ce=le+R),Ot!==B||S!==0&&Ot.nodeType!==3||($e=le+S),Ot.nodeType===3&&(le+=Ot.nodeValue.length),(yt=Ot.firstChild)!==null;)mt=Ot,Ot=yt;for(;;){if(Ot===c)break t;if(mt===y&&++dt===R&&(Ce=le),mt===B&&++At===S&&($e=le),(yt=Ot.nextSibling)!==null)break;Ot=mt,mt=Ot.parentNode}Ot=yt}y=Ce===-1||$e===-1?null:{start:Ce,end:$e}}else y=null}y=y||{start:0,end:0}}else y=null;for(k2={focusedElem:c,selectionRange:y},vv=!1,Pa=f;Pa!==null;)if(f=Pa,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,Pa=c;else for(;Pa!==null;){switch(f=Pa,B=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&B!==null){c=void 0,y=f,R=B.memoizedProps,B=B.memoizedState,S=y.stateNode;try{var Sn=Pd(y.type,R,y.elementType===y.type);c=S.getSnapshotBeforeUpdate(Sn,B),S.__reactInternalSnapshotBeforeUpdate=c}catch(yn){Dr(y,y.return,yn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,y=c.nodeType,y===9)R2(c);else if(y===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":R2(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,Pa=c;break}Pa=f.return}}function KI(c,f,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:ou(c,y),S&4&&sg(5,y);break;case 1:if(ou(c,y),S&4)if(c=y.stateNode,f===null)try{c.componentDidMount()}catch(le){Dr(y,y.return,le)}else{var R=Pd(y.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(R,f,c.__reactInternalSnapshotBeforeUpdate)}catch(le){Dr(y,y.return,le)}}S&64&&UI(y),S&512&&og(y,y.return);break;case 3:if(ou(c,y),S&64&&(c=y.updateQueue,c!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{N3(c,f)}catch(le){Dr(y,y.return,le)}}break;case 27:f===null&&S&4&&GI(y);case 26:case 5:ou(c,y),f===null&&S&4&&HI(y),S&512&&og(y,y.return);break;case 12:ou(c,y);break;case 13:ou(c,y),S&4&&XI(c,y),S&64&&(c=y.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(y=FG.bind(null,y),tW(c,y))));break;case 22:if(S=y.memoizedState!==null||Kl,!S){f=f!==null&&f.memoizedState!==null||la,R=Kl;var B=la;Kl=S,(la=f)&&!B?lu(c,y,(y.subtreeFlags&8772)!==0):ou(c,y),Kl=R,la=B}break;case 30:break;default:ou(c,y)}}function ZI(c){var f=c.alternate;f!==null&&(c.alternate=null,ZI(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&en(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var qr=null,zi=!1;function Zl(c,f,y){for(y=y.child;y!==null;)YI(c,f,y),y=y.sibling}function YI(c,f,y){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Et,y)}catch{}switch(y.tag){case 26:la||Go(y,f),Zl(c,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:la||Go(y,f);var S=qr,R=zi;pu(y.type)&&(qr=y.stateNode,zi=!1),Zl(c,f,y),gg(y.stateNode),qr=S,zi=R;break;case 5:la||Go(y,f);case 6:if(S=qr,R=zi,qr=null,Zl(c,f,y),qr=S,zi=R,qr!==null)if(zi)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(y.stateNode)}catch(B){Dr(y,f,B)}else try{qr.removeChild(y.stateNode)}catch(B){Dr(y,f,B)}break;case 18:qr!==null&&(zi?(c=qr,Lj(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,y.stateNode),Eg(c)):Lj(qr,y.stateNode));break;case 4:S=qr,R=zi,qr=y.stateNode.containerInfo,zi=!0,Zl(c,f,y),qr=S,zi=R;break;case 0:case 11:case 14:case 15:la||su(2,y,f),la||su(4,y,f),Zl(c,f,y);break;case 1:la||(Go(y,f),S=y.stateNode,typeof S.componentWillUnmount=="function"&&VI(y,f,S)),Zl(c,f,y);break;case 21:Zl(c,f,y);break;case 22:la=(S=la)||y.memoizedState!==null,Zl(c,f,y),la=S;break;default:Zl(c,f,y)}}function XI(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Eg(c)}catch(y){Dr(f,f.return,y)}}function NG(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new WI),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new WI),f;default:throw Error(r(435,c.tag))}}function r2(c,f){var y=NG(c);f.forEach(function(S){var R=LG.bind(null,c,S);y.has(S)||(y.add(S),S.then(R,R))})}function ls(c,f){var y=f.deletions;if(y!==null)for(var S=0;S<y.length;S++){var R=y[S],B=c,le=f,Ce=le;e:for(;Ce!==null;){switch(Ce.tag){case 27:if(pu(Ce.type)){qr=Ce.stateNode,zi=!1;break e}break;case 5:qr=Ce.stateNode,zi=!1;break e;case 3:case 4:qr=Ce.stateNode.containerInfo,zi=!0;break e}Ce=Ce.return}if(qr===null)throw Error(r(160));YI(B,le,R),qr=null,zi=!1,B=R.alternate,B!==null&&(B.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)JI(f,c),f=f.sibling}var io=null;function JI(c,f){var y=c.alternate,S=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:ls(f,c),cs(c),S&4&&(su(3,c,c.return),sg(3,c),su(5,c,c.return));break;case 1:ls(f,c),cs(c),S&512&&(la||y===null||Go(y,y.return)),S&64&&Kl&&(c=c.updateQueue,c!==null&&(S=c.callbacks,S!==null&&(y=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var R=io;if(ls(f,c),cs(c),S&512&&(la||y===null||Go(y,y.return)),S&4){var B=y!==null?y.memoizedState:null;if(S=c.memoizedState,y===null)if(S===null)if(c.stateNode===null){e:{S=c.type,y=c.memoizedProps,R=R.ownerDocument||R;t:switch(S){case"title":B=R.getElementsByTagName("title")[0],(!B||B[Lt]||B[pe]||B.namespaceURI==="http://www.w3.org/2000/svg"||B.hasAttribute("itemprop"))&&(B=R.createElement(S),R.head.insertBefore(B,R.querySelector("head > title"))),ei(B,S,y),B[pe]=c,$n(B),S=B;break e;case"link":var le=Gj("link","href",R).get(S+(y.href||""));if(le){for(var Ce=0;Ce<le.length;Ce++)if(B=le[Ce],B.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&B.getAttribute("rel")===(y.rel==null?null:y.rel)&&B.getAttribute("title")===(y.title==null?null:y.title)&&B.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){le.splice(Ce,1);break t}}B=R.createElement(S),ei(B,S,y),R.head.appendChild(B);break;case"meta":if(le=Gj("meta","content",R).get(S+(y.content||""))){for(Ce=0;Ce<le.length;Ce++)if(B=le[Ce],B.getAttribute("content")===(y.content==null?null:""+y.content)&&B.getAttribute("name")===(y.name==null?null:y.name)&&B.getAttribute("property")===(y.property==null?null:y.property)&&B.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&B.getAttribute("charset")===(y.charSet==null?null:y.charSet)){le.splice(Ce,1);break t}}B=R.createElement(S),ei(B,S,y),R.head.appendChild(B);break;default:throw Error(r(468,S))}B[pe]=c,$n(B),S=B}c.stateNode=S}else Wj(R,c.type,c.stateNode);else c.stateNode=qj(R,S,c.memoizedProps);else B!==S?(B===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):B.count--,S===null?Wj(R,c.type,c.stateNode):qj(R,S,c.memoizedProps)):S===null&&c.stateNode!==null&&QS(c,c.memoizedProps,y.memoizedProps)}break;case 27:ls(f,c),cs(c),S&512&&(la||y===null||Go(y,y.return)),y!==null&&S&4&&QS(c,c.memoizedProps,y.memoizedProps);break;case 5:if(ls(f,c),cs(c),S&512&&(la||y===null||Go(y,y.return)),c.flags&32){R=c.stateNode;try{Vc(R,"")}catch(yt){Dr(c,c.return,yt)}}S&4&&c.stateNode!=null&&(R=c.memoizedProps,QS(c,R,y!==null?y.memoizedProps:R)),S&1024&&(n2=!0);break;case 6:if(ls(f,c),cs(c),S&4){if(c.stateNode===null)throw Error(r(162));S=c.memoizedProps,y=c.stateNode;try{y.nodeValue=S}catch(yt){Dr(c,c.return,yt)}}break;case 3:if(gv=null,R=io,io=pv(f.containerInfo),ls(f,c),io=R,cs(c),S&4&&y!==null&&y.memoizedState.isDehydrated)try{Eg(f.containerInfo)}catch(yt){Dr(c,c.return,yt)}n2&&(n2=!1,QI(c));break;case 4:S=io,io=pv(c.stateNode.containerInfo),ls(f,c),cs(c),io=S;break;case 12:ls(f,c),cs(c);break;case 13:ls(f,c),cs(c),c.child.flags&8192&&c.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(c2=fe()),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,r2(c,S)));break;case 22:R=c.memoizedState!==null;var $e=y!==null&&y.memoizedState!==null,dt=Kl,At=la;if(Kl=dt||R,la=At||$e,ls(f,c),la=At,Kl=dt,cs(c),S&8192)e:for(f=c.stateNode,f._visibility=R?f._visibility&-2:f._visibility|1,R&&(y===null||$e||Kl||la||Fd(c)),y=null,f=c;;){if(f.tag===5||f.tag===26){if(y===null){$e=y=f;try{if(B=$e.stateNode,R)le=B.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{Ce=$e.stateNode;var Ot=$e.memoizedProps.style,mt=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;Ce.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(yt){Dr($e,$e.return,yt)}}}else if(f.tag===6){if(y===null){$e=f;try{$e.stateNode.nodeValue=R?"":$e.memoizedProps}catch(yt){Dr($e,$e.return,yt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=c.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,r2(c,y))));break;case 19:ls(f,c),cs(c),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,r2(c,S)));break;case 30:break;case 21:break;default:ls(f,c),cs(c)}}function cs(c){var f=c.flags;if(f&2){try{for(var y,S=c.return;S!==null;){if(qI(S)){y=S;break}S=S.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var R=y.stateNode,B=e2(c);tv(c,B,R);break;case 5:var le=y.stateNode;y.flags&32&&(Vc(le,""),y.flags&=-33);var Ce=e2(c);tv(c,Ce,le);break;case 3:case 4:var $e=y.stateNode.containerInfo,dt=e2(c);t2(c,dt,$e);break;default:throw Error(r(161))}}catch(At){Dr(c,c.return,At)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function QI(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;QI(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function ou(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)KI(c,f.alternate,f),f=f.sibling}function Fd(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:su(4,f,f.return),Fd(f);break;case 1:Go(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&VI(f,f.return,y),Fd(f);break;case 27:gg(f.stateNode);case 26:case 5:Go(f,f.return),Fd(f);break;case 22:f.memoizedState===null&&Fd(f);break;case 30:Fd(f);break;default:Fd(f)}c=c.sibling}}function lu(c,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,R=c,B=f,le=B.flags;switch(B.tag){case 0:case 11:case 15:lu(R,B,y),sg(4,B);break;case 1:if(lu(R,B,y),S=B,R=S.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(dt){Dr(S,S.return,dt)}if(S=B,R=S.updateQueue,R!==null){var Ce=S.stateNode;try{var $e=R.shared.hiddenCallbacks;if($e!==null)for(R.shared.hiddenCallbacks=null,R=0;R<$e.length;R++)A3($e[R],Ce)}catch(dt){Dr(S,S.return,dt)}}y&&le&64&&UI(B),og(B,B.return);break;case 27:GI(B);case 26:case 5:lu(R,B,y),y&&S===null&&le&4&&HI(B),og(B,B.return);break;case 12:lu(R,B,y);break;case 13:lu(R,B,y),y&&le&4&&XI(R,B);break;case 22:B.memoizedState===null&&lu(R,B,y),og(B,B.return);break;case 30:break;default:lu(R,B,y)}f=f.sibling}}function a2(c,f){var y=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==y&&(c!=null&&c.refCount++,y!=null&&Gm(y))}function i2(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Gm(c))}function Wo(c,f,y,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)ej(c,f,y,S),f=f.sibling}function ej(c,f,y,S){var R=f.flags;switch(f.tag){case 0:case 11:case 15:Wo(c,f,y,S),R&2048&&sg(9,f);break;case 1:Wo(c,f,y,S);break;case 3:Wo(c,f,y,S),R&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Gm(c)));break;case 12:if(R&2048){Wo(c,f,y,S),c=f.stateNode;try{var B=f.memoizedProps,le=B.id,Ce=B.onPostCommit;typeof Ce=="function"&&Ce(le,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch($e){Dr(f,f.return,$e)}}else Wo(c,f,y,S);break;case 13:Wo(c,f,y,S);break;case 23:break;case 22:B=f.stateNode,le=f.alternate,f.memoizedState!==null?B._visibility&2?Wo(c,f,y,S):lg(c,f):B._visibility&2?Wo(c,f,y,S):(B._visibility|=2,Eh(c,f,y,S,(f.subtreeFlags&10256)!==0)),R&2048&&a2(le,f);break;case 24:Wo(c,f,y,S),R&2048&&i2(f.alternate,f);break;default:Wo(c,f,y,S)}}function Eh(c,f,y,S,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var B=c,le=f,Ce=y,$e=S,dt=le.flags;switch(le.tag){case 0:case 11:case 15:Eh(B,le,Ce,$e,R),sg(8,le);break;case 23:break;case 22:var At=le.stateNode;le.memoizedState!==null?At._visibility&2?Eh(B,le,Ce,$e,R):lg(B,le):(At._visibility|=2,Eh(B,le,Ce,$e,R)),R&&dt&2048&&a2(le.alternate,le);break;case 24:Eh(B,le,Ce,$e,R),R&&dt&2048&&i2(le.alternate,le);break;default:Eh(B,le,Ce,$e,R)}f=f.sibling}}function lg(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=c,S=f,R=S.flags;switch(S.tag){case 22:lg(y,S),R&2048&&a2(S.alternate,S);break;case 24:lg(y,S),R&2048&&i2(S.alternate,S);break;default:lg(y,S)}f=f.sibling}}var cg=8192;function Ch(c){if(c.subtreeFlags&cg)for(c=c.child;c!==null;)tj(c),c=c.sibling}function tj(c){switch(c.tag){case 26:Ch(c),c.flags&cg&&c.memoizedState!==null&&pW(io,c.memoizedState,c.memoizedProps);break;case 5:Ch(c);break;case 3:case 4:var f=io;io=pv(c.stateNode.containerInfo),Ch(c),io=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=cg,cg=16777216,Ch(c),cg=f):Ch(c));break;default:Ch(c)}}function nj(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function ug(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Pa=S,aj(S,c)}nj(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)rj(c),c=c.sibling}function rj(c){switch(c.tag){case 0:case 11:case 15:ug(c),c.flags&2048&&su(9,c,c.return);break;case 3:ug(c);break;case 12:ug(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,nv(c)):ug(c);break;default:ug(c)}}function nv(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Pa=S,aj(S,c)}nj(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:su(8,f,f.return),nv(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,nv(f));break;default:nv(f)}c=c.sibling}}function aj(c,f){for(;Pa!==null;){var y=Pa;switch(y.tag){case 0:case 11:case 15:su(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Gm(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,Pa=S;else e:for(y=c;Pa!==null;){S=Pa;var R=S.sibling,B=S.return;if(ZI(S),S===y){Pa=null;break e}if(R!==null){R.return=B,Pa=R;break e}Pa=B}}}var RG={getCacheForType:function(c){var f=li(Ca),y=f.data.get(c);return y===void 0&&(y=c(),f.data.set(c,y)),y}},IG=typeof WeakMap=="function"?WeakMap:Map,br=0,Fr=null,Qn=null,ir=0,vr=0,us=null,cu=!1,Th=!1,s2=!1,Yl=0,na=0,uu=0,Ld=0,o2=0,Is=0,kh=0,dg=null,Ui=null,l2=!1,c2=0,rv=1/0,av=null,du=null,Qa=0,fu=null,Ah=null,Nh=0,u2=0,d2=null,ij=null,fg=0,f2=null;function ds(){if((br&2)!==0&&ir!==0)return ir&-ir;if(ie.T!==null){var c=gh;return c!==0?c:v2()}return G()}function sj(){Is===0&&(Is=(ir&536870912)===0||fr?vt():536870912);var c=Rs.current;return c!==null&&(c.flags|=32),Is}function fs(c,f,y){(c===Fr&&(vr===2||vr===9)||c.cancelPendingCommit!==null)&&(Rh(c,0),hu(c,ir,Is,!1)),tt(c,y),((br&2)===0||c!==Fr)&&(c===Fr&&((br&2)===0&&(Ld|=y),na===4&&hu(c,ir,Is,!1)),Ko(c))}function oj(c,f,y){if((br&6)!==0)throw Error(r(327));var S=!y&&(f&124)===0&&(f&c.expiredLanes)===0||ce(c,f),R=S?MG(c,f):m2(c,f,!0),B=S;do{if(R===0){Th&&!S&&hu(c,f,0,!1);break}else{if(y=c.current.alternate,B&&!jG(y)){R=m2(c,f,!1),B=!1;continue}if(R===2){if(B=f,c.errorRecoveryDisabledLanes&B)var le=0;else le=c.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var Ce=c;R=dg;var $e=Ce.current.memoizedState.isDehydrated;if($e&&(Rh(Ce,le).flags|=256),le=m2(Ce,le,!1),le!==2){if(s2&&!$e){Ce.errorRecoveryDisabledLanes|=B,Ld|=B,R=4;break e}B=Ui,Ui=R,B!==null&&(Ui===null?Ui=B:Ui.push.apply(Ui,B))}R=le}if(B=!1,R!==2)continue}}if(R===1){Rh(c,0),hu(c,f,0,!0);break}e:{switch(S=c,B=R,B){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:hu(S,f,Is,!cu);break e;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(R=c2+300-fe(),10<R)){if(hu(S,f,Is,!cu),Ne(S,0,!0)!==0)break e;S.timeoutHandle=Pj(lj.bind(null,S,y,Ui,av,l2,f,Is,Ld,kh,cu,B,2,-0,0),R);break e}lj(S,y,Ui,av,l2,f,Is,Ld,kh,cu,B,0,-0,0)}}break}while(!0);Ko(c)}function lj(c,f,y,S,R,B,le,Ce,$e,dt,At,Ot,mt,yt){if(c.timeoutHandle=-1,Ot=f.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(vg={stylesheets:null,count:0,unsuspend:hW},tj(f),Ot=mW(),Ot!==null)){c.cancelPendingCommit=Ot(mj.bind(null,c,f,B,y,S,R,le,Ce,$e,At,1,mt,yt)),hu(c,B,le,!dt);return}mj(c,f,B,y,S,R,le,Ce,$e)}function jG(c){for(var f=c;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var R=y[S],B=R.getSnapshot;R=R.value;try{if(!oi(B(),R))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function hu(c,f,y,S){f&=~o2,f&=~Ld,c.suspendedLanes|=f,c.pingedLanes&=~f,S&&(c.warmLanes|=f),S=c.expirationTimes;for(var R=f;0<R;){var B=31-Yt(R),le=1<<B;S[B]=-1,R&=~le}y!==0&&Me(c,y,f)}function iv(){return(br&6)===0?(hg(0),!1):!0}function h2(){if(Qn!==null){if(vr===0)var c=Qn.return;else c=Qn,Ul=jd=null,RS(c),_h=null,rg=0,c=Qn;for(;c!==null;)zI(c.alternate,c),c=c.return;Qn=null}}function Rh(c,f){var y=c.timeoutHandle;y!==-1&&(c.timeoutHandle=-1,YG(y)),y=c.cancelPendingCommit,y!==null&&(c.cancelPendingCommit=null,y()),h2(),Fr=c,Qn=y=Bl(c.current,null),ir=f,vr=0,us=null,cu=!1,Th=ce(c,f),s2=!1,kh=Is=o2=Ld=uu=na=0,Ui=dg=null,l2=!1,(f&8)!==0&&(f|=f&32);var S=c.entangledLanes;if(S!==0)for(c=c.entanglements,S&=f;0<S;){var R=31-Yt(S),B=1<<R;f|=c[R],S&=~B}return Yl=f,_n(),y}function cj(c,f){Hn=null,ie.H=Gb,f===Km||f===Pb?(f=T3(),vr=3):f===S3?(f=T3(),vr=4):vr=f===kI?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,us=f,Qn===null&&(na=1,Xb(c,pn(f,c.current)))}function uj(){var c=ie.H;return ie.H=Gb,c===null?Gb:c}function dj(){var c=ie.A;return ie.A=RG,c}function p2(){na=4,cu||(ir&4194048)!==ir&&Rs.current!==null||(Th=!0),(uu&134217727)===0&&(Ld&134217727)===0||Fr===null||hu(Fr,ir,Is,!1)}function m2(c,f,y){var S=br;br|=2;var R=uj(),B=dj();(Fr!==c||ir!==f)&&(av=null,Rh(c,f)),f=!1;var le=na;e:do try{if(vr!==0&&Qn!==null){var Ce=Qn,$e=us;switch(vr){case 8:h2(),le=6;break e;case 3:case 2:case 9:case 6:Rs.current===null&&(f=!0);var dt=vr;if(vr=0,us=null,Ih(c,Ce,$e,dt),y&&Th){le=0;break e}break;default:dt=vr,vr=0,us=null,Ih(c,Ce,$e,dt)}}DG(),le=na;break}catch(At){cj(c,At)}while(!0);return f&&c.shellSuspendCounter++,Ul=jd=null,br=S,ie.H=R,ie.A=B,Qn===null&&(Fr=null,ir=0,_n()),le}function DG(){for(;Qn!==null;)fj(Qn)}function MG(c,f){var y=br;br|=2;var S=uj(),R=dj();Fr!==c||ir!==f?(av=null,rv=fe()+500,Rh(c,f)):Th=ce(c,f);e:do try{if(vr!==0&&Qn!==null){f=Qn;var B=us;t:switch(vr){case 1:vr=0,us=null,Ih(c,f,B,1);break;case 2:case 9:if(E3(B)){vr=0,us=null,hj(f);break}f=function(){vr!==2&&vr!==9||Fr!==c||(vr=7),Ko(c)},B.then(f,f);break e;case 3:vr=7;break e;case 4:vr=5;break e;case 7:E3(B)?(vr=0,us=null,hj(f)):(vr=0,us=null,Ih(c,f,B,7));break;case 5:var le=null;switch(Qn.tag){case 26:le=Qn.memoizedState;case 5:case 27:var Ce=Qn;if(!le||Kj(le)){vr=0,us=null;var $e=Ce.sibling;if($e!==null)Qn=$e;else{var dt=Ce.return;dt!==null?(Qn=dt,sv(dt)):Qn=null}break t}}vr=0,us=null,Ih(c,f,B,5);break;case 6:vr=0,us=null,Ih(c,f,B,6);break;case 8:h2(),na=6;break e;default:throw Error(r(462))}}OG();break}catch(At){cj(c,At)}while(!0);return Ul=jd=null,ie.H=S,ie.A=R,br=y,Qn!==null?0:(Fr=null,ir=0,_n(),na)}function OG(){for(;Qn!==null&&!Ee();)fj(Qn)}function fj(c){var f=BI(c.alternate,c,Yl);c.memoizedProps=c.pendingProps,f===null?sv(c):Qn=f}function hj(c){var f=c,y=f.alternate;switch(f.tag){case 15:case 0:f=DI(y,f,f.pendingProps,f.type,void 0,ir);break;case 11:f=DI(y,f,f.pendingProps,f.type.render,f.ref,ir);break;case 5:RS(f);default:zI(y,f),f=Qn=p3(f,Yl),f=BI(y,f,Yl)}c.memoizedProps=c.pendingProps,f===null?sv(c):Qn=f}function Ih(c,f,y,S){Ul=jd=null,RS(f),_h=null,rg=0;var R=f.return;try{if(EG(c,R,f,y,ir)){na=1,Xb(c,pn(y,c.current)),Qn=null;return}}catch(B){if(R!==null)throw Qn=R,B;na=1,Xb(c,pn(y,c.current)),Qn=null;return}f.flags&32768?(fr||S===1?c=!0:Th||(ir&536870912)!==0?c=!1:(cu=c=!0,(S===2||S===9||S===3||S===6)&&(S=Rs.current,S!==null&&S.tag===13&&(S.flags|=16384))),pj(f,c)):sv(f)}function sv(c){var f=c;do{if((f.flags&32768)!==0){pj(f,cu);return}c=f.return;var y=TG(f.alternate,f,Yl);if(y!==null){Qn=y;return}if(f=f.sibling,f!==null){Qn=f;return}Qn=f=c}while(f!==null);na===0&&(na=5)}function pj(c,f){do{var y=kG(c.alternate,c);if(y!==null){y.flags&=32767,Qn=y;return}if(y=c.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(c=c.sibling,c!==null)){Qn=c;return}Qn=c=y}while(c!==null);na=6,Qn=null}function mj(c,f,y,S,R,B,le,Ce,$e){c.cancelPendingCommit=null;do ov();while(Qa!==0);if((br&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(B=f.lanes|f.childLanes,B|=Xa,ye(c,y,B,le,Ce,$e),c===Fr&&(Qn=Fr=null,ir=0),Ah=f,fu=c,Nh=y,u2=B,d2=R,ij=S,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,BG(Pe,function(){return wj(),null})):(c.callbackNode=null,c.callbackPriority=0),S=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||S){S=ie.T,ie.T=null,R=re.p,re.p=2,le=br,br|=4;try{AG(c,f,y)}finally{br=le,re.p=R,ie.T=S}}Qa=1,gj(),yj(),bj()}}function gj(){if(Qa===1){Qa=0;var c=fu,f=Ah,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=ie.T,ie.T=null;var S=re.p;re.p=2;var R=br;br|=4;try{JI(f,c);var B=k2,le=de(c.containerInfo),Ce=B.focusedElem,$e=B.selectionRange;if(le!==Ce&&Ce&&Ce.ownerDocument&&ae(Ce.ownerDocument.documentElement,Ce)){if($e!==null&&xe(Ce)){var dt=$e.start,At=$e.end;if(At===void 0&&(At=dt),"selectionStart"in Ce)Ce.selectionStart=dt,Ce.selectionEnd=Math.min(At,Ce.value.length);else{var Ot=Ce.ownerDocument||document,mt=Ot&&Ot.defaultView||window;if(mt.getSelection){var yt=mt.getSelection(),Sn=Ce.textContent.length,yn=Math.min($e.start,Sn),kr=$e.end===void 0?yn:Math.min($e.end,Sn);!yt.extend&&yn>kr&&(le=kr,kr=yn,yn=le);var at=Y(Ce,yn),Ye=Y(Ce,kr);if(at&&Ye&&(yt.rangeCount!==1||yt.anchorNode!==at.node||yt.anchorOffset!==at.offset||yt.focusNode!==Ye.node||yt.focusOffset!==Ye.offset)){var ct=Ot.createRange();ct.setStart(at.node,at.offset),yt.removeAllRanges(),yn>kr?(yt.addRange(ct),yt.extend(Ye.node,Ye.offset)):(ct.setEnd(Ye.node,Ye.offset),yt.addRange(ct))}}}}for(Ot=[],yt=Ce;yt=yt.parentNode;)yt.nodeType===1&&Ot.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof Ce.focus=="function"&&Ce.focus(),Ce=0;Ce<Ot.length;Ce++){var jt=Ot[Ce];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}vv=!!T2,k2=T2=null}finally{br=R,re.p=S,ie.T=y}}c.current=f,Qa=2}}function yj(){if(Qa===2){Qa=0;var c=fu,f=Ah,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=ie.T,ie.T=null;var S=re.p;re.p=2;var R=br;br|=4;try{KI(c,f.alternate,f)}finally{br=R,re.p=S,ie.T=y}}Qa=3}}function bj(){if(Qa===4||Qa===3){Qa=0,Te();var c=fu,f=Ah,y=Nh,S=ij;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Qa=5:(Qa=0,Ah=fu=null,vj(c,c.pendingLanes));var R=c.pendingLanes;if(R===0&&(du=null),me(y),f=f.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Et,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=ie.T,R=re.p,re.p=2,ie.T=null;try{for(var B=c.onRecoverableError,le=0;le<S.length;le++){var Ce=S[le];B(Ce.value,{componentStack:Ce.stack})}}finally{ie.T=f,re.p=R}}(Nh&3)!==0&&ov(),Ko(c),R=c.pendingLanes,(y&4194090)!==0&&(R&42)!==0?c===f2?fg++:(fg=0,f2=c):fg=0,hg(0)}}function vj(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Gm(f)))}function ov(c){return gj(),yj(),bj(),wj()}function wj(){if(Qa!==5)return!1;var c=fu,f=u2;u2=0;var y=me(Nh),S=ie.T,R=re.p;try{re.p=32>y?32:y,ie.T=null,y=d2,d2=null;var B=fu,le=Nh;if(Qa=0,Ah=fu=null,Nh=0,(br&6)!==0)throw Error(r(331));var Ce=br;if(br|=4,rj(B.current),ej(B,B.current,le,y),br=Ce,hg(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Et,B)}catch{}return!0}finally{re.p=R,ie.T=S,vj(c,f)}}function xj(c,f,y){f=pn(y,f),f=HS(c.stateNode,f,2),c=nu(c,f,2),c!==null&&(tt(c,2),Ko(c))}function Dr(c,f,y){if(c.tag===3)xj(c,c,y);else for(;f!==null;){if(f.tag===3){xj(f,c,y);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(du===null||!du.has(S))){c=pn(y,c),y=CI(2),S=nu(f,y,2),S!==null&&(TI(y,S,f,c),tt(S,2),Ko(S));break}}f=f.return}}function g2(c,f,y){var S=c.pingCache;if(S===null){S=c.pingCache=new IG;var R=new Set;S.set(f,R)}else R=S.get(f),R===void 0&&(R=new Set,S.set(f,R));R.has(y)||(s2=!0,R.add(y),c=PG.bind(null,c,f,y),f.then(c,c))}function PG(c,f,y){var S=c.pingCache;S!==null&&S.delete(f),c.pingedLanes|=c.suspendedLanes&y,c.warmLanes&=~y,Fr===c&&(ir&y)===y&&(na===4||na===3&&(ir&62914560)===ir&&300>fe()-c2?(br&2)===0&&Rh(c,0):o2|=y,kh===ir&&(kh=0)),Ko(c)}function _j(c,f){f===0&&(f=F()),c=ao(c,f),c!==null&&(tt(c,f),Ko(c))}function FG(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),_j(c,y)}function LG(c,f){var y=0;switch(c.tag){case 13:var S=c.stateNode,R=c.memoizedState;R!==null&&(y=R.retryLane);break;case 19:S=c.stateNode;break;case 22:S=c.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(f),_j(c,y)}function BG(c,f){return De(c,f)}var lv=null,jh=null,y2=!1,cv=!1,b2=!1,Bd=0;function Ko(c){c!==jh&&c.next===null&&(jh===null?lv=jh=c:jh=jh.next=c),cv=!0,y2||(y2=!0,zG())}function hg(c,f){if(!b2&&cv){b2=!0;do for(var y=!1,S=lv;S!==null;){if(c!==0){var R=S.pendingLanes;if(R===0)var B=0;else{var le=S.suspendedLanes,Ce=S.pingedLanes;B=(1<<31-Yt(42|c)+1)-1,B&=R&~(le&~Ce),B=B&201326741?B&201326741|1:B?B|2:0}B!==0&&(y=!0,Tj(S,B))}else B=ir,B=Ne(S,S===Fr?B:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(B&3)===0||ce(S,B)||(y=!0,Tj(S,B));S=S.next}while(y);b2=!1}}function $G(){Sj()}function Sj(){cv=y2=!1;var c=0;Bd!==0&&(ZG()&&(c=Bd),Bd=0);for(var f=fe(),y=null,S=lv;S!==null;){var R=S.next,B=Ej(S,f);B===0?(S.next=null,y===null?lv=R:y.next=R,R===null&&(jh=y)):(y=S,(c!==0||(B&3)!==0)&&(cv=!0)),S=R}hg(c)}function Ej(c,f){for(var y=c.suspendedLanes,S=c.pingedLanes,R=c.expirationTimes,B=c.pendingLanes&-62914561;0<B;){var le=31-Yt(B),Ce=1<<le,$e=R[le];$e===-1?((Ce&y)===0||(Ce&S)!==0)&&(R[le]=ft(Ce,f)):$e<=f&&(c.expiredLanes|=Ce),B&=~Ce}if(f=Fr,y=ir,y=Ne(c,c===f?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),S=c.callbackNode,y===0||c===f&&(vr===2||vr===9)||c.cancelPendingCommit!==null)return S!==null&&S!==null&&$(S),c.callbackNode=null,c.callbackPriority=0;if((y&3)===0||ce(c,y)){if(f=y&-y,f===c.callbackPriority)return f;switch(S!==null&&$(S),me(y)){case 2:case 8:y=Se;break;case 32:y=Pe;break;case 268435456:y=We;break;default:y=Pe}return S=Cj.bind(null,c),y=De(y,S),c.callbackPriority=f,c.callbackNode=y,f}return S!==null&&S!==null&&$(S),c.callbackPriority=2,c.callbackNode=null,2}function Cj(c,f){if(Qa!==0&&Qa!==5)return c.callbackNode=null,c.callbackPriority=0,null;var y=c.callbackNode;if(ov()&&c.callbackNode!==y)return null;var S=ir;return S=Ne(c,c===Fr?S:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),S===0?null:(oj(c,S,f),Ej(c,fe()),c.callbackNode!=null&&c.callbackNode===y?Cj.bind(null,c):null)}function Tj(c,f){if(ov())return null;oj(c,f,!0)}function zG(){XG(function(){(br&6)!==0?De(ee,$G):Sj()})}function v2(){return Bd===0&&(Bd=vt()),Bd}function kj(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Rl(""+c)}function Aj(c,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,c.id&&y.setAttribute("form",c.id),f.parentNode.insertBefore(y,f),c=new FormData(c),y.parentNode.removeChild(y),c}function UG(c,f,y,S,R){if(f==="submit"&&y&&y.stateNode===R){var B=kj((R[Re]||null).action),le=S.submitter;le&&(f=(f=le[Re]||null)?kj(f.formAction):le.getAttribute("formAction"),f!==null&&(B=f,le=null));var Ce=new Jf("action","action",null,S,R);c.push({event:Ce,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Bd!==0){var $e=le?Aj(R,le):new FormData(R);BS(y,{pending:!0,data:$e,method:R.method,action:B},null,$e)}}else typeof B=="function"&&(Ce.preventDefault(),$e=le?Aj(R,le):new FormData(R),BS(y,{pending:!0,data:$e,method:R.method,action:B},B,$e))},currentTarget:R}]})}}for(var w2=0;w2<Jt.length;w2++){var x2=Jt[w2],VG=x2.toLowerCase(),HG=x2[0].toUpperCase()+x2.slice(1);zt(VG,"on"+HG)}zt(ht,"onAnimationEnd"),zt(bt,"onAnimationIteration"),zt(wt,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(kt,"onTransitionRun"),zt(Vt,"onTransitionStart"),zt(Xt,"onTransitionCancel"),zt($t,"onTransitionEnd"),Po("onMouseEnter",["mouseout","mouseover"]),Po("onMouseLeave",["mouseout","mouseover"]),Po("onPointerEnter",["pointerout","pointerover"]),Po("onPointerLeave",["pointerout","pointerover"]),Oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Oo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pg));function Nj(c,f){f=(f&4)!==0;for(var y=0;y<c.length;y++){var S=c[y],R=S.event;S=S.listeners;e:{var B=void 0;if(f)for(var le=S.length-1;0<=le;le--){var Ce=S[le],$e=Ce.instance,dt=Ce.currentTarget;if(Ce=Ce.listener,$e!==B&&R.isPropagationStopped())break e;B=Ce,R.currentTarget=dt;try{B(R)}catch(At){Yb(At)}R.currentTarget=null,B=$e}else for(le=0;le<S.length;le++){if(Ce=S[le],$e=Ce.instance,dt=Ce.currentTarget,Ce=Ce.listener,$e!==B&&R.isPropagationStopped())break e;B=Ce,R.currentTarget=dt;try{B(R)}catch(At){Yb(At)}R.currentTarget=null,B=$e}}}}function er(c,f){var y=f[pt];y===void 0&&(y=f[pt]=new Set);var S=c+"__bubble";y.has(S)||(Rj(f,c,2,!1),y.add(S))}function _2(c,f,y){var S=0;f&&(S|=4),Rj(y,c,S,f)}var uv="_reactListening"+Math.random().toString(36).slice(2);function S2(c){if(!c[uv]){c[uv]=!0,_i.forEach(function(y){y!=="selectionchange"&&(qG.has(y)||_2(y,!1,c),_2(y,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[uv]||(f[uv]=!0,_2("selectionchange",!1,f))}}function Rj(c,f,y,S){switch(e4(f)){case 2:var R=bW;break;case 8:R=vW;break;default:R=F2}y=R.bind(null,f,y,c),R=void 0,!Am||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(R=!0),S?R!==void 0?c.addEventListener(f,y,{capture:!0,passive:R}):c.addEventListener(f,y,!0):R!==void 0?c.addEventListener(f,y,{passive:R}):c.addEventListener(f,y,!1)}function E2(c,f,y,S,R){var B=S;if((f&1)===0&&(f&2)===0&&S!==null)e:for(;;){if(S===null)return;var le=S.tag;if(le===3||le===4){var Ce=S.stateNode.containerInfo;if(Ce===R)break;if(le===4)for(le=S.return;le!==null;){var $e=le.tag;if(($e===3||$e===4)&&le.stateNode.containerInfo===R)return;le=le.return}for(;Ce!==null;){if(le=In(Ce),le===null)return;if($e=le.tag,$e===5||$e===6||$e===26||$e===27){S=B=le;continue e}Ce=Ce.parentNode}}S=S.return}qc(function(){var dt=B,At=Yf(y),Ot=[];e:{var mt=Gt.get(c);if(mt!==void 0){var yt=Jf,Sn=c;switch(c){case"keypress":if(Kc(y)===0)break e;case"keydown":case"keyup":yt=sh;break;case"focusin":Sn="focus",yt=Zc;break;case"focusout":Sn="blur",yt=Zc;break;case"beforeblur":case"afterblur":yt=Zc;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Om;break;case ht:case bt:case wt:yt=wb;break;case $t:yt=Pm;break;case"scroll":case"scrollend":yt=Qf;break;case"wheel":yt=lh;break;case"copy":case"cut":case"paste":yt=ah;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Mm;break;case"toggle":case"beforetoggle":yt=Sb}var yn=(f&4)!==0,kr=!yn&&(c==="scroll"||c==="scrollend"),at=yn?mt!==null?mt+"Capture":null:mt;yn=[];for(var Ye=dt,ct;Ye!==null;){var jt=Ye;if(ct=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||ct===null||at===null||(jt=Dl(Ye,at),jt!=null&&yn.push(mg(Ye,jt,ct))),kr)break;Ye=Ye.return}0<yn.length&&(mt=new yt(mt,Sn,null,y,At),Ot.push({event:mt,listeners:yn}))}}if((f&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",yt=c==="mouseout"||c==="pointerout",mt&&y!==Es&&(Sn=y.relatedTarget||y.fromElement)&&(In(Sn)||Sn[Ue]))break e;if((yt||mt)&&(mt=At.window===At?At:(mt=At.ownerDocument)?mt.defaultView||mt.parentWindow:window,yt?(Sn=y.relatedTarget||y.toElement,yt=dt,Sn=Sn?In(Sn):null,Sn!==null&&(kr=i(Sn),yn=Sn.tag,Sn!==kr||yn!==5&&yn!==27&&yn!==6)&&(Sn=null)):(yt=null,Sn=dt),yt!==Sn)){if(yn=th,jt="onMouseLeave",at="onMouseEnter",Ye="mouse",(c==="pointerout"||c==="pointerover")&&(yn=Mm,jt="onPointerLeave",at="onPointerEnter",Ye="pointer"),kr=yt==null?mt:Sr(yt),ct=Sn==null?mt:Sr(Sn),mt=new yn(jt,Ye+"leave",yt,y,At),mt.target=kr,mt.relatedTarget=ct,jt=null,In(At)===dt&&(yn=new yn(at,Ye+"enter",Sn,y,At),yn.target=ct,yn.relatedTarget=kr,jt=yn),kr=jt,yt&&Sn)t:{for(yn=yt,at=Sn,Ye=0,ct=yn;ct;ct=Dh(ct))Ye++;for(ct=0,jt=at;jt;jt=Dh(jt))ct++;for(;0<Ye-ct;)yn=Dh(yn),Ye--;for(;0<ct-Ye;)at=Dh(at),ct--;for(;Ye--;){if(yn===at||at!==null&&yn===at.alternate)break t;yn=Dh(yn),at=Dh(at)}yn=null}else yn=null;yt!==null&&Ij(Ot,mt,yt,yn,!1),Sn!==null&&kr!==null&&Ij(Ot,kr,Sn,yn,!0)}}e:{if(mt=dt?Sr(dt):window,yt=mt.nodeName&&mt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&mt.type==="file")var on=Td;else if(dh(mt))if(Ts)on=Jc;else{on=Ll;var Wn=Nb}else yt=mt.nodeName,!yt||yt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&km(dt.elementType)&&(on=Td):on=zm;if(on&&(on=on(c,dt))){$m(Ot,on,y,At);break e}Wn&&Wn(c,mt,dt),c==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&zc(mt,"number",mt.value)}switch(Wn=dt?Sr(dt):window,c){case"focusin":(dh(Wn)||Wn.contentEditable==="true")&&(Fe=Wn,Ze=dt,Xe=null);break;case"focusout":Xe=Ze=Fe=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,He(Ot,y,At);break;case"selectionchange":if(Oe)break;case"keydown":case"keyup":He(Ot,y,At)}var fn;if(Ed)e:{switch(c){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else Fl?Bm(c,y)&&(wn="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(wn="onCompositionStart");wn&&(ch&&y.locale!=="ko"&&(Fl||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&Fl&&(fn=Wc()):(Cs=At,Xf="value"in Cs?Cs.value:Cs.textContent,Fl=!0)),Wn=dv(dt,wn),0<Wn.length&&(wn=new ih(wn,c,null,y,At),Ot.push({event:wn,listeners:Wn}),fn?wn.data=fn:(fn=Cb(y),fn!==null&&(wn.data=fn)))),(fn=aS?Tb(c,y):iS(c,y))&&(wn=dv(dt,"onBeforeInput"),0<wn.length&&(Wn=new ih("onBeforeInput","beforeinput",null,y,At),Ot.push({event:Wn,listeners:wn}),Wn.data=fn)),UG(Ot,c,dt,y,At)}Nj(Ot,f)})}function mg(c,f,y){return{instance:c,listener:f,currentTarget:y}}function dv(c,f){for(var y=f+"Capture",S=[];c!==null;){var R=c,B=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||B===null||(R=Dl(c,y),R!=null&&S.unshift(mg(c,R,B)),R=Dl(c,f),R!=null&&S.push(mg(c,R,B))),c.tag===3)return S;c=c.return}return[]}function Dh(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function Ij(c,f,y,S,R){for(var B=f._reactName,le=[];y!==null&&y!==S;){var Ce=y,$e=Ce.alternate,dt=Ce.stateNode;if(Ce=Ce.tag,$e!==null&&$e===S)break;Ce!==5&&Ce!==26&&Ce!==27||dt===null||($e=dt,R?(dt=Dl(y,B),dt!=null&&le.unshift(mg(y,dt,$e))):R||(dt=Dl(y,B),dt!=null&&le.push(mg(y,dt,$e)))),y=y.return}le.length!==0&&c.push({event:f,listeners:le})}var GG=/\r\n?/g,WG=/\u0000|\uFFFD/g;function jj(c){return(typeof c=="string"?c:""+c).replace(GG,`
`).replace(WG,"")}function Dj(c,f){return f=jj(f),jj(c)===f}function fv(){}function Tr(c,f,y,S,R,B){switch(y){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||Vc(c,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&Vc(c,""+S);break;case"className":kl(c,"class",S);break;case"tabIndex":kl(c,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":kl(c,y,S);break;case"style":yb(c,S,B);break;case"data":if(f!=="object"){kl(c,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||y!=="href")){c.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){c.removeAttribute(y);break}S=Rl(""+S),c.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){c.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof B=="function"&&(y==="formAction"?(f!=="input"&&Tr(c,f,"name",R.name,R,null),Tr(c,f,"formEncType",R.formEncType,R,null),Tr(c,f,"formMethod",R.formMethod,R,null),Tr(c,f,"formTarget",R.formTarget,R,null)):(Tr(c,f,"encType",R.encType,R,null),Tr(c,f,"method",R.method,R,null),Tr(c,f,"target",R.target,R,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){c.removeAttribute(y);break}S=Rl(""+S),c.setAttribute(y,S);break;case"onClick":S!=null&&(c.onclick=fv);break;case"onScroll":S!=null&&er("scroll",c);break;case"onScrollEnd":S!=null&&er("scrollend",c);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=y}}break;case"multiple":c.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":c.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){c.removeAttribute("xlink:href");break}y=Rl(""+S),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,""+S):c.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,""):c.removeAttribute(y);break;case"capture":case"download":S===!0?c.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,S):c.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?c.setAttribute(y,S):c.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?c.removeAttribute(y):c.setAttribute(y,S);break;case"popover":er("beforetoggle",c),er("toggle",c),no(c,"popover",S);break;case"xlinkActuate":is(c,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":is(c,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":is(c,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":is(c,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":is(c,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":is(c,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":is(c,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":is(c,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":is(c,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":no(c,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Ei.get(y)||y,no(c,y,S))}}function C2(c,f,y,S,R,B){switch(y){case"style":yb(c,S,B);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(R.children!=null)throw Error(r(60));c.innerHTML=y}}break;case"children":typeof S=="string"?Vc(c,S):(typeof S=="number"||typeof S=="bigint")&&Vc(c,""+S);break;case"onScroll":S!=null&&er("scroll",c);break;case"onScrollEnd":S!=null&&er("scrollend",c);break;case"onClick":S!=null&&(c.onclick=fv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mo.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(R=y.endsWith("Capture"),f=y.slice(2,R?y.length-7:void 0),B=c[Re]||null,B=B!=null?B[y]:null,typeof B=="function"&&c.removeEventListener(f,B,R),typeof S=="function")){typeof B!="function"&&B!==null&&(y in c?c[y]=null:c.hasAttribute(y)&&c.removeAttribute(y)),c.addEventListener(f,S,R);break e}y in c?c[y]=S:S===!0?c.setAttribute(y,""):no(c,y,S)}}}function ei(c,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":er("error",c),er("load",c);var S=!1,R=!1,B;for(B in y)if(y.hasOwnProperty(B)){var le=y[B];if(le!=null)switch(B){case"src":S=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Tr(c,f,B,le,y,null)}}R&&Tr(c,f,"srcSet",y.srcSet,y,null),S&&Tr(c,f,"src",y.src,y,null);return;case"input":er("invalid",c);var Ce=B=le=R=null,$e=null,dt=null;for(S in y)if(y.hasOwnProperty(S)){var At=y[S];if(At!=null)switch(S){case"name":R=At;break;case"type":le=At;break;case"checked":$e=At;break;case"defaultChecked":dt=At;break;case"value":B=At;break;case"defaultValue":Ce=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,f));break;default:Tr(c,f,S,At,y,null)}}Cm(c,B,Ce,$e,dt,le,R,!1),Bo(c);return;case"select":er("invalid",c),S=le=B=null;for(R in y)if(y.hasOwnProperty(R)&&(Ce=y[R],Ce!=null))switch(R){case"value":B=Ce;break;case"defaultValue":le=Ce;break;case"multiple":S=Ce;default:Tr(c,f,R,Ce,y,null)}f=B,y=le,c.multiple=!!S,f!=null?Nl(c,!!S,f,!1):y!=null&&Nl(c,!!S,y,!0);return;case"textarea":er("invalid",c),B=R=S=null;for(le in y)if(y.hasOwnProperty(le)&&(Ce=y[le],Ce!=null))switch(le){case"value":S=Ce;break;case"defaultValue":R=Ce;break;case"children":B=Ce;break;case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(r(91));break;default:Tr(c,f,le,Ce,y,null)}Tm(c,S,R,B),Bo(c);return;case"option":for($e in y)if(y.hasOwnProperty($e)&&(S=y[$e],S!=null))switch($e){case"selected":c.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:Tr(c,f,$e,S,y,null)}return;case"dialog":er("beforetoggle",c),er("toggle",c),er("cancel",c),er("close",c);break;case"iframe":case"object":er("load",c);break;case"video":case"audio":for(S=0;S<pg.length;S++)er(pg[S],c);break;case"image":er("error",c),er("load",c);break;case"details":er("toggle",c);break;case"embed":case"source":case"link":er("error",c),er("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in y)if(y.hasOwnProperty(dt)&&(S=y[dt],S!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Tr(c,f,dt,S,y,null)}return;default:if(km(f)){for(At in y)y.hasOwnProperty(At)&&(S=y[At],S!==void 0&&C2(c,f,At,S,y,void 0));return}}for(Ce in y)y.hasOwnProperty(Ce)&&(S=y[Ce],S!=null&&Tr(c,f,Ce,S,y,null))}function KG(c,f,y,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,B=null,le=null,Ce=null,$e=null,dt=null,At=null;for(yt in y){var Ot=y[yt];if(y.hasOwnProperty(yt)&&Ot!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":$e=Ot;default:S.hasOwnProperty(yt)||Tr(c,f,yt,null,S,Ot)}}for(var mt in S){var yt=S[mt];if(Ot=y[mt],S.hasOwnProperty(mt)&&(yt!=null||Ot!=null))switch(mt){case"type":B=yt;break;case"name":R=yt;break;case"checked":dt=yt;break;case"defaultChecked":At=yt;break;case"value":le=yt;break;case"defaultValue":Ce=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,f));break;default:yt!==Ot&&Tr(c,f,mt,yt,S,Ot)}}$c(c,le,Ce,$e,dt,At,B,R);return;case"select":yt=le=Ce=mt=null;for(B in y)if($e=y[B],y.hasOwnProperty(B)&&$e!=null)switch(B){case"value":break;case"multiple":yt=$e;default:S.hasOwnProperty(B)||Tr(c,f,B,null,S,$e)}for(R in S)if(B=S[R],$e=y[R],S.hasOwnProperty(R)&&(B!=null||$e!=null))switch(R){case"value":mt=B;break;case"defaultValue":Ce=B;break;case"multiple":le=B;default:B!==$e&&Tr(c,f,R,B,S,$e)}f=Ce,y=le,S=yt,mt!=null?Nl(c,!!y,mt,!1):!!S!=!!y&&(f!=null?Nl(c,!!y,f,!0):Nl(c,!!y,y?[]:"",!1));return;case"textarea":yt=mt=null;for(Ce in y)if(R=y[Ce],y.hasOwnProperty(Ce)&&R!=null&&!S.hasOwnProperty(Ce))switch(Ce){case"value":break;case"children":break;default:Tr(c,f,Ce,null,S,R)}for(le in S)if(R=S[le],B=y[le],S.hasOwnProperty(le)&&(R!=null||B!=null))switch(le){case"value":mt=R;break;case"defaultValue":yt=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(r(91));break;default:R!==B&&Tr(c,f,le,R,S,B)}Uc(c,mt,yt);return;case"option":for(var Sn in y)if(mt=y[Sn],y.hasOwnProperty(Sn)&&mt!=null&&!S.hasOwnProperty(Sn))switch(Sn){case"selected":c.selected=!1;break;default:Tr(c,f,Sn,null,S,mt)}for($e in S)if(mt=S[$e],yt=y[$e],S.hasOwnProperty($e)&&mt!==yt&&(mt!=null||yt!=null))switch($e){case"selected":c.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:Tr(c,f,$e,mt,S,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in y)mt=y[yn],y.hasOwnProperty(yn)&&mt!=null&&!S.hasOwnProperty(yn)&&Tr(c,f,yn,null,S,mt);for(dt in S)if(mt=S[dt],yt=y[dt],S.hasOwnProperty(dt)&&mt!==yt&&(mt!=null||yt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:Tr(c,f,dt,mt,S,yt)}return;default:if(km(f)){for(var kr in y)mt=y[kr],y.hasOwnProperty(kr)&&mt!==void 0&&!S.hasOwnProperty(kr)&&C2(c,f,kr,void 0,S,mt);for(At in S)mt=S[At],yt=y[At],!S.hasOwnProperty(At)||mt===yt||mt===void 0&&yt===void 0||C2(c,f,At,mt,S,yt);return}}for(var at in y)mt=y[at],y.hasOwnProperty(at)&&mt!=null&&!S.hasOwnProperty(at)&&Tr(c,f,at,null,S,mt);for(Ot in S)mt=S[Ot],yt=y[Ot],!S.hasOwnProperty(Ot)||mt===yt||mt==null&&yt==null||Tr(c,f,Ot,mt,S,yt)}var T2=null,k2=null;function hv(c){return c.nodeType===9?c:c.ownerDocument}function Mj(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Oj(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function A2(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var N2=null;function ZG(){var c=window.event;return c&&c.type==="popstate"?c===N2?!1:(N2=c,!0):(N2=null,!1)}var Pj=typeof setTimeout=="function"?setTimeout:void 0,YG=typeof clearTimeout=="function"?clearTimeout:void 0,Fj=typeof Promise=="function"?Promise:void 0,XG=typeof queueMicrotask=="function"?queueMicrotask:typeof Fj<"u"?function(c){return Fj.resolve(null).then(c).catch(JG)}:Pj;function JG(c){setTimeout(function(){throw c})}function pu(c){return c==="head"}function Lj(c,f){var y=f,S=0,R=0;do{var B=y.nextSibling;if(c.removeChild(y),B&&B.nodeType===8)if(y=B.data,y==="/$"){if(0<S&&8>S){y=S;var le=c.ownerDocument;if(y&1&&gg(le.documentElement),y&2&&gg(le.body),y&4)for(y=le.head,gg(y),le=y.firstChild;le;){var Ce=le.nextSibling,$e=le.nodeName;le[Lt]||$e==="SCRIPT"||$e==="STYLE"||$e==="LINK"&&le.rel.toLowerCase()==="stylesheet"||y.removeChild(le),le=Ce}}if(R===0){c.removeChild(B),Eg(f);return}R--}else y==="$"||y==="$?"||y==="$!"?R++:S=y.charCodeAt(0)-48;else S=0;y=B}while(y);Eg(f)}function R2(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":R2(y),en(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}c.removeChild(y)}}function QG(c,f,y,S){for(;c.nodeType===1;){var R=y;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(S){if(!c[Lt])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(B=c.getAttribute("rel"),B==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(B!==R.rel||c.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||c.getAttribute("title")!==(R.title==null?null:R.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(B=c.getAttribute("src"),(B!==(R.src==null?null:R.src)||c.getAttribute("type")!==(R.type==null?null:R.type)||c.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&B&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var B=R.name==null?null:""+R.name;if(R.type==="hidden"&&c.getAttribute("name")===B)return c}else return c;if(c=so(c.nextSibling),c===null)break}return null}function eW(c,f,y){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!y||(c=so(c.nextSibling),c===null))return null;return c}function I2(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function tW(c,f){var y=c.ownerDocument;if(c.data!=="$?"||y.readyState==="complete")f();else{var S=function(){f(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),c._reactRetry=S}}function so(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var j2=null;function Bj(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return c;f--}else y==="/$"&&f++}c=c.previousSibling}return null}function $j(c,f,y){switch(f=hv(y),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function gg(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);en(c)}var js=new Map,zj=new Set;function pv(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Xl=re.d;re.d={f:nW,r:rW,D:aW,C:iW,L:sW,m:oW,X:cW,S:lW,M:uW};function nW(){var c=Xl.f(),f=iv();return c||f}function rW(c){var f=Xn(c);f!==null&&f.tag===5&&f.type==="form"?oI(f):Xl.r(c)}var Mh=typeof document>"u"?null:document;function Uj(c,f,y){var S=Mh;if(S&&typeof f=="string"&&f){var R=ii(f);R='link[rel="'+c+'"][href="'+R+'"]',typeof y=="string"&&(R+='[crossorigin="'+y+'"]'),zj.has(R)||(zj.add(R),c={rel:c,crossOrigin:y,href:f},S.querySelector(R)===null&&(f=S.createElement("link"),ei(f,"link",c),$n(f),S.head.appendChild(f)))}}function aW(c){Xl.D(c),Uj("dns-prefetch",c,null)}function iW(c,f){Xl.C(c,f),Uj("preconnect",c,f)}function sW(c,f,y){Xl.L(c,f,y);var S=Mh;if(S&&c&&f){var R='link[rel="preload"][as="'+ii(f)+'"]';f==="image"&&y&&y.imageSrcSet?(R+='[imagesrcset="'+ii(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(R+='[imagesizes="'+ii(y.imageSizes)+'"]')):R+='[href="'+ii(c)+'"]';var B=R;switch(f){case"style":B=Oh(c);break;case"script":B=Ph(c)}js.has(B)||(c=d({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:c,as:f},y),js.set(B,c),S.querySelector(R)!==null||f==="style"&&S.querySelector(yg(B))||f==="script"&&S.querySelector(bg(B))||(f=S.createElement("link"),ei(f,"link",c),$n(f),S.head.appendChild(f)))}}function oW(c,f){Xl.m(c,f);var y=Mh;if(y&&c){var S=f&&typeof f.as=="string"?f.as:"script",R='link[rel="modulepreload"][as="'+ii(S)+'"][href="'+ii(c)+'"]',B=R;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":B=Ph(c)}if(!js.has(B)&&(c=d({rel:"modulepreload",href:c},f),js.set(B,c),y.querySelector(R)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(bg(B)))return}S=y.createElement("link"),ei(S,"link",c),$n(S),y.head.appendChild(S)}}}function lW(c,f,y){Xl.S(c,f,y);var S=Mh;if(S&&c){var R=Er(S).hoistableStyles,B=Oh(c);f=f||"default";var le=R.get(B);if(!le){var Ce={loading:0,preload:null};if(le=S.querySelector(yg(B)))Ce.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},y),(y=js.get(B))&&D2(c,y);var $e=le=S.createElement("link");$n($e),ei($e,"link",c),$e._p=new Promise(function(dt,At){$e.onload=dt,$e.onerror=At}),$e.addEventListener("load",function(){Ce.loading|=1}),$e.addEventListener("error",function(){Ce.loading|=2}),Ce.loading|=4,mv(le,f,S)}le={type:"stylesheet",instance:le,count:1,state:Ce},R.set(B,le)}}}function cW(c,f){Xl.X(c,f);var y=Mh;if(y&&c){var S=Er(y).hoistableScripts,R=Ph(c),B=S.get(R);B||(B=y.querySelector(bg(R)),B||(c=d({src:c,async:!0},f),(f=js.get(R))&&M2(c,f),B=y.createElement("script"),$n(B),ei(B,"link",c),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},S.set(R,B))}}function uW(c,f){Xl.M(c,f);var y=Mh;if(y&&c){var S=Er(y).hoistableScripts,R=Ph(c),B=S.get(R);B||(B=y.querySelector(bg(R)),B||(c=d({src:c,async:!0,type:"module"},f),(f=js.get(R))&&M2(c,f),B=y.createElement("script"),$n(B),ei(B,"link",c),y.head.appendChild(B)),B={type:"script",instance:B,count:1,state:null},S.set(R,B))}}function Vj(c,f,y,S){var R=(R=Ie.current)?pv(R):null;if(!R)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=Oh(y.href),y=Er(R).hoistableStyles,S=y.get(f),S||(S={type:"style",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){c=Oh(y.href);var B=Er(R).hoistableStyles,le=B.get(c);if(le||(R=R.ownerDocument||R,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},B.set(c,le),(B=R.querySelector(yg(c)))&&!B._p&&(le.instance=B,le.state.loading=5),js.has(c)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},js.set(c,y),B||dW(R,c,y,le.state))),f&&S===null)throw Error(r(528,""));return le}if(f&&S!==null)throw Error(r(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Ph(y),y=Er(R).hoistableScripts,S=y.get(f),S||(S={type:"script",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Oh(c){return'href="'+ii(c)+'"'}function yg(c){return'link[rel="stylesheet"]['+c+"]"}function Hj(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function dW(c,f,y,S){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=c.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),ei(f,"link",y),$n(f),c.head.appendChild(f))}function Ph(c){return'[src="'+ii(c)+'"]'}function bg(c){return"script[async]"+c}function qj(c,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var S=c.querySelector('style[data-href~="'+ii(y.href)+'"]');if(S)return f.instance=S,$n(S),S;var R=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(c.ownerDocument||c).createElement("style"),$n(S),ei(S,"style",R),mv(S,y.precedence,c),f.instance=S;case"stylesheet":R=Oh(y.href);var B=c.querySelector(yg(R));if(B)return f.state.loading|=4,f.instance=B,$n(B),B;S=Hj(y),(R=js.get(R))&&D2(S,R),B=(c.ownerDocument||c).createElement("link"),$n(B);var le=B;return le._p=new Promise(function(Ce,$e){le.onload=Ce,le.onerror=$e}),ei(B,"link",S),f.state.loading|=4,mv(B,y.precedence,c),f.instance=B;case"script":return B=Ph(y.src),(R=c.querySelector(bg(B)))?(f.instance=R,$n(R),R):(S=y,(R=js.get(B))&&(S=d({},y),M2(S,R)),c=c.ownerDocument||c,R=c.createElement("script"),$n(R),ei(R,"link",S),c.head.appendChild(R),f.instance=R);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(S=f.instance,f.state.loading|=4,mv(S,y.precedence,c));return f.instance}function mv(c,f,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=S.length?S[S.length-1]:null,B=R,le=0;le<S.length;le++){var Ce=S[le];if(Ce.dataset.precedence===f)B=Ce;else if(B!==R)break}B?B.parentNode.insertBefore(c,B.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(c,f.firstChild))}function D2(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function M2(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var gv=null;function Gj(c,f,y){if(gv===null){var S=new Map,R=gv=new Map;R.set(y,S)}else R=gv,S=R.get(y),S||(S=new Map,R.set(y,S));if(S.has(c))return S;for(S.set(c,null),y=y.getElementsByTagName(c),R=0;R<y.length;R++){var B=y[R];if(!(B[Lt]||B[pe]||c==="link"&&B.getAttribute("rel")==="stylesheet")&&B.namespaceURI!=="http://www.w3.org/2000/svg"){var le=B.getAttribute(f)||"";le=c+le;var Ce=S.get(le);Ce?Ce.push(B):S.set(le,[B])}}return S}function Wj(c,f,y){c=c.ownerDocument||c,c.head.insertBefore(y,f==="title"?c.querySelector("head > title"):null)}function fW(c,f,y){if(y===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function Kj(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var vg=null;function hW(){}function pW(c,f,y){if(vg===null)throw Error(r(475));var S=vg;if(f.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var R=Oh(y.href),B=c.querySelector(yg(R));if(B){c=B._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(S.count++,S=yv.bind(S),c.then(S,S)),f.state.loading|=4,f.instance=B,$n(B);return}B=c.ownerDocument||c,y=Hj(y),(R=js.get(R))&&D2(y,R),B=B.createElement("link"),$n(B);var le=B;le._p=new Promise(function(Ce,$e){le.onload=Ce,le.onerror=$e}),ei(B,"link",y),f.instance=B}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(S.count++,f=yv.bind(S),c.addEventListener("load",f),c.addEventListener("error",f))}}function mW(){if(vg===null)throw Error(r(475));var c=vg;return c.stylesheets&&c.count===0&&O2(c,c.stylesheets),0<c.count?function(f){var y=setTimeout(function(){if(c.stylesheets&&O2(c,c.stylesheets),c.unsuspend){var S=c.unsuspend;c.unsuspend=null,S()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(y)}}:null}function yv(){if(this.count--,this.count===0){if(this.stylesheets)O2(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var bv=null;function O2(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,bv=new Map,f.forEach(gW,c),bv=null,yv.call(c))}function gW(c,f){if(!(f.state.loading&4)){var y=bv.get(c);if(y)var S=y.get(null);else{y=new Map,bv.set(c,y);for(var R=c.querySelectorAll("link[data-precedence],style[data-precedence]"),B=0;B<R.length;B++){var le=R[B];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(y.set(le.dataset.precedence,le),S=le)}S&&y.set(null,S)}R=f.instance,le=R.getAttribute("data-precedence"),B=y.get(le)||S,B===S&&y.set(null,R),y.set(le,R),this.count++,S=yv.bind(this),R.addEventListener("load",S),R.addEventListener("error",S),B?B.parentNode.insertBefore(R,B.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(R,c.firstChild)),f.state.loading|=4}}var wg={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function yW(c,f,y,S,R,B,le,Ce){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=S,this.onUncaughtError=R,this.onCaughtError=B,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ce,this.incompleteTransitions=new Map}function Zj(c,f,y,S,R,B,le,Ce,$e,dt,At,Ot){return c=new yW(c,f,y,le,Ce,$e,dt,Ot),f=1,B===!0&&(f|=24),B=os(3,null,null,f),c.current=B,B.stateNode=c,f=gS(),f.refCount++,c.pooledCache=f,f.refCount++,B.memoizedState={element:S,isDehydrated:y,cache:f},wS(B),c}function Yj(c){return c?(c=Vo,c):Vo}function Xj(c,f,y,S,R,B){R=Yj(R),S.context===null?S.context=R:S.pendingContext=R,S=tu(f),S.payload={element:y},B=B===void 0?null:B,B!==null&&(S.callback=B),y=nu(c,S,f),y!==null&&(fs(y,c,f),Ym(y,c,f))}function Jj(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function P2(c,f){Jj(c,f),(c=c.alternate)&&Jj(c,f)}function Qj(c){if(c.tag===13){var f=ao(c,67108864);f!==null&&fs(f,c,67108864),P2(c,67108864)}}var vv=!0;function bW(c,f,y,S){var R=ie.T;ie.T=null;var B=re.p;try{re.p=2,F2(c,f,y,S)}finally{re.p=B,ie.T=R}}function vW(c,f,y,S){var R=ie.T;ie.T=null;var B=re.p;try{re.p=8,F2(c,f,y,S)}finally{re.p=B,ie.T=R}}function F2(c,f,y,S){if(vv){var R=L2(S);if(R===null)E2(c,f,S,wv,y),t4(c,S);else if(xW(R,c,f,y,S))S.stopPropagation();else if(t4(c,S),f&4&&-1<wW.indexOf(c)){for(;R!==null;){var B=Xn(R);if(B!==null)switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var le=we(B.pendingLanes);if(le!==0){var Ce=B;for(Ce.pendingLanes|=2,Ce.entangledLanes|=2;le;){var $e=1<<31-Yt(le);Ce.entanglements[1]|=$e,le&=~$e}Ko(B),(br&6)===0&&(rv=fe()+500,hg(0))}}break;case 13:Ce=ao(B,2),Ce!==null&&fs(Ce,B,2),iv(),P2(B,2)}if(B=L2(S),B===null&&E2(c,f,S,wv,y),B===R)break;R=B}R!==null&&S.stopPropagation()}else E2(c,f,S,null,y)}}function L2(c){return c=Yf(c),B2(c)}var wv=null;function B2(c){if(wv=null,c=In(c),c!==null){var f=i(c);if(f===null)c=null;else{var y=f.tag;if(y===13){if(c=s(f),c!==null)return c;c=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return wv=c,null}function e4(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case ee:return 2;case Se:return 8;case Pe:case ke:return 32;case We:return 268435456;default:return 32}default:return 32}}var $2=!1,mu=null,gu=null,yu=null,xg=new Map,_g=new Map,bu=[],wW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function t4(c,f){switch(c){case"focusin":case"focusout":mu=null;break;case"dragenter":case"dragleave":gu=null;break;case"mouseover":case"mouseout":yu=null;break;case"pointerover":case"pointerout":xg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":_g.delete(f.pointerId)}}function Sg(c,f,y,S,R,B){return c===null||c.nativeEvent!==B?(c={blockedOn:f,domEventName:y,eventSystemFlags:S,nativeEvent:B,targetContainers:[R]},f!==null&&(f=Xn(f),f!==null&&Qj(f)),c):(c.eventSystemFlags|=S,f=c.targetContainers,R!==null&&f.indexOf(R)===-1&&f.push(R),c)}function xW(c,f,y,S,R){switch(f){case"focusin":return mu=Sg(mu,c,f,y,S,R),!0;case"dragenter":return gu=Sg(gu,c,f,y,S,R),!0;case"mouseover":return yu=Sg(yu,c,f,y,S,R),!0;case"pointerover":var B=R.pointerId;return xg.set(B,Sg(xg.get(B)||null,c,f,y,S,R)),!0;case"gotpointercapture":return B=R.pointerId,_g.set(B,Sg(_g.get(B)||null,c,f,y,S,R)),!0}return!1}function n4(c){var f=In(c.target);if(f!==null){var y=i(f);if(y!==null){if(f=y.tag,f===13){if(f=s(y),f!==null){c.blockedOn=f,V(c.priority,function(){if(y.tag===13){var S=ds();S=Dt(S);var R=ao(y,S);R!==null&&fs(R,y,S),P2(y,S)}});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function xv(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var y=L2(c.nativeEvent);if(y===null){y=c.nativeEvent;var S=new y.constructor(y.type,y);Es=S,y.target.dispatchEvent(S),Es=null}else return f=Xn(y),f!==null&&Qj(f),c.blockedOn=y,!1;f.shift()}return!0}function r4(c,f,y){xv(c)&&y.delete(f)}function _W(){$2=!1,mu!==null&&xv(mu)&&(mu=null),gu!==null&&xv(gu)&&(gu=null),yu!==null&&xv(yu)&&(yu=null),xg.forEach(r4),_g.forEach(r4)}function _v(c,f){c.blockedOn===f&&(c.blockedOn=null,$2||($2=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_W)))}var Sv=null;function a4(c){Sv!==c&&(Sv=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Sv===c&&(Sv=null);for(var f=0;f<c.length;f+=3){var y=c[f],S=c[f+1],R=c[f+2];if(typeof S!="function"){if(B2(S||y)===null)continue;break}var B=Xn(y);B!==null&&(c.splice(f,3),f-=3,BS(B,{pending:!0,data:R,method:y.method,action:S},S,R))}}))}function Eg(c){function f($e){return _v($e,c)}mu!==null&&_v(mu,c),gu!==null&&_v(gu,c),yu!==null&&_v(yu,c),xg.forEach(f),_g.forEach(f);for(var y=0;y<bu.length;y++){var S=bu[y];S.blockedOn===c&&(S.blockedOn=null)}for(;0<bu.length&&(y=bu[0],y.blockedOn===null);)n4(y),y.blockedOn===null&&bu.shift();if(y=(c.ownerDocument||c).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var R=y[S],B=y[S+1],le=R[Re]||null;if(typeof B=="function")le||a4(y);else if(le){var Ce=null;if(B&&B.hasAttribute("formAction")){if(R=B,le=B[Re]||null)Ce=le.formAction;else if(B2(R)!==null)continue}else Ce=le.action;typeof Ce=="function"?y[S+1]=Ce:(y.splice(S,3),S-=3),a4(y)}}}function z2(c){this._internalRoot=c}Ev.prototype.render=z2.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var y=f.current,S=ds();Xj(y,S,c,f,null,null)},Ev.prototype.unmount=z2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;Xj(c.current,2,null,c,null,null),iv(),f[Ue]=null}};function Ev(c){this._internalRoot=c}Ev.prototype.unstable_scheduleHydration=function(c){if(c){var f=G();c={blockedOn:null,target:c,priority:f};for(var y=0;y<bu.length&&f!==0&&f<bu[y].priority;y++);bu.splice(y,0,c),y===0&&n4(c)}};var i4=t.version;if(i4!=="19.1.0")throw Error(r(527,i4,"19.1.0"));re.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var SW={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cv.isDisabled&&Cv.supportsFiber)try{Et=Cv.inject(SW),Ft=Cv}catch{}}return Tg.createRoot=function(c,f){if(!a(c))throw Error(r(299));var y=!1,S="",R=xI,B=_I,le=SI,Ce=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(R=f.onUncaughtError),f.onCaughtError!==void 0&&(B=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Ce=f.unstable_transitionCallbacks)),f=Zj(c,1,!1,null,null,y,S,R,B,le,Ce,null),c[Ue]=f.current,S2(c),new z2(f)},Tg.hydrateRoot=function(c,f,y){if(!a(c))throw Error(r(299));var S=!1,R="",B=xI,le=_I,Ce=SI,$e=null,dt=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(R=y.identifierPrefix),y.onUncaughtError!==void 0&&(B=y.onUncaughtError),y.onCaughtError!==void 0&&(le=y.onCaughtError),y.onRecoverableError!==void 0&&(Ce=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&($e=y.unstable_transitionCallbacks),y.formState!==void 0&&(dt=y.formState)),f=Zj(c,1,!0,f,y??null,S,R,B,le,Ce,$e,dt),f.context=Yj(null),y=f.current,S=ds(),S=Dt(S),R=tu(S),R.callback=null,nu(y,R,S),y=S,f.current.lanes=y,tt(f,y),Ko(f),c[Ue]=f.current,S2(c),new Ev(f)},Tg.version="19.1.0",Tg}var m4;function BW(){if(m4)return H2.exports;m4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),H2.exports=LW(),H2.exports}var $W=BW();const zW=vi($W);function g4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function gc(...e){return t=>{let n=!1;const r=e.map(a=>{const i=g4(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():g4(e[a],null)}}}}function Nn(...e){return T.useCallback(gc(...e),e)}function Mu(e){const t=UW(e),n=T.forwardRef((r,a)=>{const{children:i,...s}=r,o=T.Children.toArray(i),l=o.find(HW);if(l){const u=l.props.children,d=o.map(h=>h===l?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return p.jsx(t,{...s,ref:a,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return p.jsx(t,{...s,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var _8=Mu("Slot");function UW(e){const t=T.forwardRef((n,r)=>{const{children:a,...i}=n;if(T.isValidElement(a)){const s=GW(a),o=qW(i,a.props);return a.type!==T.Fragment&&(o.ref=r?gc(r,s):s),T.cloneElement(a,o)}return T.Children.count(a)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var S8=Symbol("radix.slottable");function VW(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=S8,t}function HW(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===S8}function qW(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{i(...o),a(...o)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function GW(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function E8(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=E8(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function C8(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=E8(e))&&(r&&(r+=" "),r+=t);return r}const y4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,b4=C8,cA=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return b4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=y4(d)||y4(h);return a[u][m]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(v=>{let[b,w]=v;return Array.isArray(w)?w.includes({...i,...o}[b]):{...i,...o}[b]===w})?[...u,h,m]:u},[]);return b4(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},uA="-",WW=e=>{const t=ZW(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const o=s.split(uA);return o[0]===""&&o.length!==1&&o.shift(),T8(o,t)||KW(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},T8=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?T8(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(uA);return(s=t.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},v4=/^\[(.+)\]$/,KW=e=>{if(v4.test(e)){const t=v4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},ZW=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)bT(n[a],r,a,t);return r},bT=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:w4(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(YW(a)){bT(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,s])=>{bT(s,w4(t,i),n,r)})})},w4=(e,t)=>{let n=e;return t.split(uA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},YW=e=>e.isThemeGetter,XW=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return a(i,s),s},set(i,s){n.has(i)?n.set(i,s):a(i,s)}}},vT="!",wT=":",JW=wT.length,QW=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let s=0,o=0,l=0,u;for(let v=0;v<a.length;v++){let b=a[v];if(s===0&&o===0){if(b===wT){i.push(a.slice(l,v)),l=v+JW;continue}if(b==="/"){u=v;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const d=i.length===0?a:a.substring(l),h=eK(d),m=h!==d,g=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+wT,i=r;r=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},eK=e=>e.endsWith(vT)?e.substring(0,e.length-1):e.startsWith(vT)?e.substring(1):e,tK=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},nK=e=>({cache:XW(e.cacheSize),parseClassName:QW(e),sortModifiers:tK(e),...WW(e)}),rK=/\s+/,aK=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,s=[],o=e.trim().split(rK);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let w=!!b,x=r(w?v.substring(0,b):v);if(!x){if(!w){l=d+(l.length>0?" "+l:l);continue}if(x=r(v),!x){l=d+(l.length>0?" "+l:l);continue}w=!1}const _=i(m).join(":"),E=g?_+vT:_,C=E+x;if(s.includes(C))continue;s.push(C);const k=a(x,w);for(let I=0;I<k.length;++I){const j=k[I];s.push(E+j)}l=d+(l.length>0?" "+l:l)}return l};function iK(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=k8(t))&&(r&&(r+=" "),r+=n);return r}const k8=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=k8(e[r]))&&(n&&(n+=" "),n+=t);return n};function sK(e,...t){let n,r,a,i=s;function s(l){const u=t.reduce((d,h)=>h(d),e());return n=nK(u),r=n.cache.get,a=n.cache.set,i=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=aK(l,n);return a(l,d),d}return function(){return i(iK.apply(null,arguments))}}const ka=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},A8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,N8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,oK=/^\d+\/\d+$/,lK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,cK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,uK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,dK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Fh=e=>oK.test(e),qn=e=>!!e&&!Number.isNaN(Number(e)),wu=e=>!!e&&Number.isInteger(Number(e)),K2=e=>e.endsWith("%")&&qn(e.slice(0,-1)),Jl=e=>lK.test(e),hK=()=>!0,pK=e=>cK.test(e)&&!uK.test(e),R8=()=>!1,mK=e=>dK.test(e),gK=e=>fK.test(e),yK=e=>!ln(e)&&!cn(e),bK=e=>zp(e,D8,R8),ln=e=>A8.test(e),$d=e=>zp(e,M8,pK),Z2=e=>zp(e,SK,qn),x4=e=>zp(e,I8,R8),vK=e=>zp(e,j8,gK),Tv=e=>zp(e,O8,mK),cn=e=>N8.test(e),kg=e=>Up(e,M8),wK=e=>Up(e,EK),_4=e=>Up(e,I8),xK=e=>Up(e,D8),_K=e=>Up(e,j8),kv=e=>Up(e,O8,!0),zp=(e,t,n)=>{const r=A8.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Up=(e,t,n=!1)=>{const r=N8.exec(e);return r?r[1]?t(r[1]):n:!1},I8=e=>e==="position"||e==="percentage",j8=e=>e==="image"||e==="url",D8=e=>e==="length"||e==="size"||e==="bg-size",M8=e=>e==="length",SK=e=>e==="number",EK=e=>e==="family-name",O8=e=>e==="shadow",CK=()=>{const e=ka("color"),t=ka("font"),n=ka("text"),r=ka("font-weight"),a=ka("tracking"),i=ka("leading"),s=ka("breakpoint"),o=ka("container"),l=ka("spacing"),u=ka("radius"),d=ka("shadow"),h=ka("inset-shadow"),m=ka("text-shadow"),g=ka("drop-shadow"),v=ka("blur"),b=ka("perspective"),w=ka("aspect"),x=ka("ease"),_=ka("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),cn,ln],I=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],N=()=>[cn,ln,l],P=()=>[Fh,"full","auto",...N()],L=()=>[wu,"none","subgrid",cn,ln],H=()=>["auto",{span:["full",wu,cn,ln]},wu,cn,ln],M=()=>[wu,"auto",cn,ln],K=()=>["auto","min","max","fr",cn,ln],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],se=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...N()],re=()=>[Fh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],X=()=>[e,cn,ln],ne=()=>[...C(),_4,x4,{position:[cn,ln]}],q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",xK,bK,{size:[cn,ln]}],Q=()=>[K2,kg,$d],te=()=>["","none","full",u,cn,ln],ue=()=>["",qn,kg,$d],ge=()=>["solid","dashed","dotted","double"],Ie=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>[qn,K2,_4,x4],_e=()=>["","none",v,cn,ln],ve=()=>["none",qn,cn,ln],Be=()=>["none",qn,cn,ln],nt=()=>[qn,cn,ln],Ve=()=>[Fh,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Jl],breakpoint:[Jl],color:[hK],container:[Jl],"drop-shadow":[Jl],ease:["in","out","in-out"],font:[yK],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Jl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Jl],shadow:[Jl],spacing:["px",qn],text:[Jl],"text-shadow":[Jl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Fh,ln,cn,w]}],container:["container"],columns:[{columns:[qn,ln,cn,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[wu,"auto",cn,ln]}],basis:[{basis:[Fh,"full","auto",o,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qn,Fh,"auto","initial","none",ln]}],grow:[{grow:["",qn,cn,ln]}],shrink:[{shrink:["",qn,cn,ln]}],order:[{order:[wu,"first","last","none",cn,ln]}],"grid-cols":[{"grid-cols":L()}],"col-start-end":[{col:H()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":L()}],"row-start-end":[{row:H()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...se(),"normal"]}],"justify-self":[{"justify-self":["auto",...se()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...se(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...se(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...se(),"baseline"]}],"place-self":[{"place-self":["auto",...se()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[o,"screen",...re()]}],"min-w":[{"min-w":[o,"screen","none",...re()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...re()]}],h:[{h:["screen",...re()]}],"min-h":[{"min-h":["screen","none",...re()]}],"max-h":[{"max-h":["screen",...re()]}],"font-size":[{text:["base",n,kg,$d]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,cn,Z2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",K2,ln]}],"font-family":[{font:[wK,ln,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,cn,ln]}],"line-clamp":[{"line-clamp":[qn,"none",cn,Z2]}],leading:[{leading:[i,...N()]}],"list-image":[{"list-image":["none",cn,ln]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",cn,ln]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[qn,"from-font","auto",cn,$d]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[qn,"auto",cn,ln]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",cn,ln]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",cn,ln]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ne()}],"bg-repeat":[{bg:q()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},wu,cn,ln],radial:["",cn,ln],conic:[wu,cn,ln]},_K,vK]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qn,cn,ln]}],"outline-w":[{outline:["",qn,kg,$d]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",d,kv,Tv]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,kv,Tv]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[qn,$d]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",m,kv,Tv]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[qn,cn,ln]}],"mix-blend":[{"mix-blend":[...Ie(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ie()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ae()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Ae()}],"mask-image-t-to-pos":[{"mask-t-to":Ae()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Ae()}],"mask-image-r-to-pos":[{"mask-r-to":Ae()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Ae()}],"mask-image-b-to-pos":[{"mask-b-to":Ae()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Ae()}],"mask-image-l-to-pos":[{"mask-l-to":Ae()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Ae()}],"mask-image-x-to-pos":[{"mask-x-to":Ae()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Ae()}],"mask-image-y-to-pos":[{"mask-y-to":Ae()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[cn,ln]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ae()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[qn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ae()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ne()}],"mask-repeat":[{mask:q()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",cn,ln]}],filter:[{filter:["","none",cn,ln]}],blur:[{blur:_e()}],brightness:[{brightness:[qn,cn,ln]}],contrast:[{contrast:[qn,cn,ln]}],"drop-shadow":[{"drop-shadow":["","none",g,kv,Tv]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",qn,cn,ln]}],"hue-rotate":[{"hue-rotate":[qn,cn,ln]}],invert:[{invert:["",qn,cn,ln]}],saturate:[{saturate:[qn,cn,ln]}],sepia:[{sepia:["",qn,cn,ln]}],"backdrop-filter":[{"backdrop-filter":["","none",cn,ln]}],"backdrop-blur":[{"backdrop-blur":_e()}],"backdrop-brightness":[{"backdrop-brightness":[qn,cn,ln]}],"backdrop-contrast":[{"backdrop-contrast":[qn,cn,ln]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qn,cn,ln]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qn,cn,ln]}],"backdrop-invert":[{"backdrop-invert":["",qn,cn,ln]}],"backdrop-opacity":[{"backdrop-opacity":[qn,cn,ln]}],"backdrop-saturate":[{"backdrop-saturate":[qn,cn,ln]}],"backdrop-sepia":[{"backdrop-sepia":["",qn,cn,ln]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",cn,ln]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qn,"initial",cn,ln]}],ease:[{ease:["linear","initial",x,cn,ln]}],delay:[{delay:[qn,cn,ln]}],animate:[{animate:["none",_,cn,ln]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,cn,ln]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:ve()}],"rotate-x":[{"rotate-x":ve()}],"rotate-y":[{"rotate-y":ve()}],"rotate-z":[{"rotate-z":ve()}],scale:[{scale:Be()}],"scale-x":[{"scale-x":Be()}],"scale-y":[{"scale-y":Be()}],"scale-z":[{"scale-z":Be()}],"scale-3d":["scale-3d"],skew:[{skew:nt()}],"skew-x":[{"skew-x":nt()}],"skew-y":[{"skew-y":nt()}],transform:[{transform:[cn,ln,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ve()}],"translate-x":[{"translate-x":Ve()}],"translate-y":[{"translate-y":Ve()}],"translate-z":[{"translate-z":Ve()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",cn,ln]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",cn,ln]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[qn,kg,$d,Z2]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},TK=sK(CK);function xt(...e){return TK(C8(e))}const kK=cA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function It({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?_8:"button";return p.jsx(i,{"data-slot":"button",className:xt(kK({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AK=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NK=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),S4=e=>{const t=NK(e);return t.charAt(0).toUpperCase()+t.slice(1)},P8=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IK=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>T.createElement("svg",{ref:l,...RK,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:P8("lucide",a),...o},[...s.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=(e,t)=>{const n=T.forwardRef(({className:r,...a},i)=>T.createElement(IK,{ref:i,iconNode:t,className:P8(`lucide-${AK(S4(e))}`,`lucide-${e}`,r),...a}));return n.displayName=S4(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jK=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],DK=Kt("archive",jK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],OK=Kt("arrow-down",MK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],FK=Kt("arrow-right",PK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],BK=Kt("ban",LK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],F8=Kt("bot",$K);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zK=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Af=Kt("brain-circuit",zK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ga=Kt("check",UK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_o=Kt("chevron-down",VK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],L8=Kt("chevron-right",HK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],yc=Kt("chevron-up",qK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],m1=Kt("chevrons-up-down",GK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ou=Kt("circle-alert",WK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],dA=Kt("circle-check",KK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],YK=Kt("circle",ZK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],gp=Kt("clipboard",XK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],QK=Kt("clock",JK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],B8=Kt("cloud-upload",eZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],$8=Kt("code",tZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],rZ=Kt("cog",nZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],iZ=Kt("coins",aZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],oZ=Kt("copy",sZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jw=Kt("dollar-sign",lZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],uf=Kt("download",cZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],dZ=Kt("ellipsis-vertical",uZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],hZ=Kt("file-archive",fZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],mZ=Kt("file-down",pZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],yZ=Kt("file-json",gZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],vZ=Kt("file-question",bZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xT=Kt("file-text",wZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],_Z=Kt("file-up",xZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],z8=Kt("file",SZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],U8=Kt("folder-git",EZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],fA=Kt("folder-plus",CZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],E4=Kt("folder-tree",TZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],AZ=Kt("folder-up",kZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],pf=Kt("folder",NZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],IZ=Kt("funnel",RZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Pu=Kt("git-branch",jZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],V8=Kt("git-commit-horizontal",DZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],H8=Kt("git-merge",MZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],hA=Kt("git-pull-request",OZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],FZ=Kt("grip-vertical",PZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],pA=Kt("hard-drive",LZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],$Z=Kt("house",BZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],op=Kt("image",zZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mA=Kt("info",UZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],i0=Kt("key",VZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],qZ=Kt("languages",HZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fn=Kt("loader-circle",GZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],KZ=Kt("maximize",WZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZZ=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],YZ=Kt("menu",ZZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],JZ=Kt("message-square-plus",XZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],_T=Kt("message-square",QZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],tY=Kt("music",eY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],rY=Kt("palette",nY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],iY=Kt("panel-left-close",aY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],oY=Kt("panel-right-close",sY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],gA=Kt("paperclip",lY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],wy=Kt("pen",cY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Nf=Kt("plus",uY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],ST=Kt("puzzle",dY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],g1=Kt("refresh-cw",fY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],pY=Kt("rocket",hY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yA=Kt("rotate-ccw",mY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Rf=Kt("save",gY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Qi=Kt("search",yY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bY=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],vY=Kt("send-horizontal",bY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Ww=Kt("server",wY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],_Y=Kt("settings-2",xY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ET=Kt("settings",SY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],CY=Kt("shield-alert",EY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],kY=Kt("sliders-horizontal",TY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],q8=Kt("sparkles",AY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Kg=Kt("square-pen",NY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],IY=Kt("square",RY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],DY=Kt("star",jY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],OY=Kt("tag",MY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],CT=Kt("tags",PY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],LY=Kt("text",FY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Zi=Kt("trash-2",BY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bA=Kt("triangle-alert",$Y);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],UY=Kt("upload",zY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],HY=Kt("user",VY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],TT=Kt("users",qY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],WY=Kt("video",GY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KY=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],vA=Kt("wrench",KY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ii=Kt("x",ZY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],XY=Kt("zap",YY),C4=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:p.jsx("div",{className:xt(n),children:r.map(a=>{var s,o;const i=t==="trigger"?(s=a.triggerRenderer)==null?void 0:s.call(a):(o=a.renderer)==null?void 0:o.call(a);return i?p.jsx(gt.Fragment,{children:i},a.id):null})})},T4=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,a,o);return o},JY=e=>e?T4(e):T4,QY=e=>e;function eX(e,t=QY){const n=gt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return gt.useDebugValue(n),n}const k4=e=>{const t=JY(e),n=r=>eX(t,r);return Object.assign(n,t),n},Ys=e=>e?k4(e):k4;var G8=Symbol.for("immer-nothing"),A4=Symbol.for("immer-draftable"),mr=Symbol.for("immer-state");function Us(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var yp=Object.getPrototypeOf;function bp(e){return!!e&&!!e[mr]}function bc(e){var t;return e?W8(e)||Array.isArray(e)||!!e[A4]||!!((t=e.constructor)!=null&&t[A4])||b1(e)||v1(e):!1}var tX=Object.prototype.constructor.toString();function W8(e){if(!e||typeof e!="object")return!1;const t=yp(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===tX}function s0(e,t){y1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function y1(e){const t=e[mr];return t?t.type_:Array.isArray(e)?1:b1(e)?2:v1(e)?3:0}function kT(e,t){return y1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function K8(e,t,n){const r=y1(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function nX(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function b1(e){return e instanceof Map}function v1(e){return e instanceof Set}function $a(e){return e.copy_||e.base_}function AT(e,t){if(b1(e))return new Map(e);if(v1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=W8(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[mr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(yp(e),r)}else{const r=yp(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function wA(e,t=!1){return w1(e)||bp(e)||!bc(e)||(y1(e)>1&&(e.set=e.add=e.clear=e.delete=rX),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>wA(r,!0))),e}function rX(){Us(2)}function w1(e){return Object.isFrozen(e)}var NT={};function mf(e){const t=NT[e];return t||Us(0,e),t}function aX(e,t){NT[e]||(NT[e]=t)}var o0;function Kw(){return o0}function iX(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function N4(e,t){t&&(mf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function RT(e){IT(e),e.drafts_.forEach(sX),e.drafts_=null}function IT(e){e===o0&&(o0=e.parent_)}function R4(e){return o0=iX(o0,e)}function sX(e){const t=e[mr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function I4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[mr].modified_&&(RT(t),Us(4)),bc(e)&&(e=Zw(t,e),t.parent_||Yw(t,e)),t.patches_&&mf("Patches").generateReplacementPatches_(n[mr].base_,e,t.patches_,t.inversePatches_)):e=Zw(t,n,[]),RT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==G8?e:void 0}function Zw(e,t,n){if(w1(t))return t;const r=t[mr];if(!r)return s0(t,(a,i)=>j4(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Yw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,s=!1;r.type_===3&&(i=new Set(a),a.clear(),s=!0),s0(i,(o,l)=>j4(e,r,a,o,l,n,s)),Yw(e,a,!1),n&&e.patches_&&mf("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function j4(e,t,n,r,a,i,s){if(bp(a)){const o=i&&t&&t.type_!==3&&!kT(t.assigned_,r)?i.concat(r):void 0,l=Zw(e,a,o);if(K8(n,r,l),bp(l))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(bc(a)&&!w1(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Zw(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Yw(e,a)}}function Yw(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wA(t,n)}function oX(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Kw(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=xA;n&&(a=[r],i=l0);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}var xA={get(e,t){if(t===mr)return e;const n=$a(e);if(!kT(n,t))return lX(e,n,t);const r=n[t];return e.finalized_||!bc(r)?r:r===Y2(e.base_,t)?(X2(e),e.copy_[t]=c0(r,e)):r},has(e,t){return t in $a(e)},ownKeys(e){return Reflect.ownKeys($a(e))},set(e,t,n){const r=Z8($a(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=Y2($a(e),t),i=a==null?void 0:a[mr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(nX(n,a)&&(n!==void 0||kT(e.base_,t)))return!0;X2(e),tc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Y2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,X2(e),tc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$a(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Us(11)},getPrototypeOf(e){return yp(e.base_)},setPrototypeOf(){Us(12)}},l0={};s0(xA,(e,t)=>{l0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});l0.deleteProperty=function(e,t){return l0.set.call(this,e,t,void 0)};l0.set=function(e,t,n){return xA.set.call(this,e[0],t,n,e[0])};function Y2(e,t){const n=e[mr];return(n?$a(n):e)[t]}function lX(e,t,n){var a;const r=Z8(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function Z8(e,t){if(!(t in e))return;let n=yp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=yp(n)}}function tc(e){e.modified_||(e.modified_=!0,e.parent_&&tc(e.parent_))}function X2(e){e.copy_||(e.copy_=AT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cX=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...u){return s.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&Us(6),r!==void 0&&typeof r!="function"&&Us(7);let a;if(bc(t)){const i=R4(this),s=c0(t,void 0);let o=!0;try{a=n(s),o=!1}finally{o?RT(i):IT(i)}return N4(i,r),I4(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===G8&&(a=void 0),this.autoFreeze_&&wA(a,!0),r){const i=[],s=[];mf("Patches").generateReplacementPatches_(t,a,i,s),r(i,s)}return a}else Us(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let r,a;return[this.produce(t,n,(s,o)=>{r=s,a=o}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){bc(e)||Us(8),bp(e)&&(e=uX(e));const t=R4(this),n=c0(e,void 0);return n[mr].isManual_=!0,IT(t),n}finishDraft(e,t){const n=e&&e[mr];(!n||!n.isManual_)&&Us(9);const{scope_:r}=n;return N4(r,t),I4(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=mf("Patches").applyPatches_;return bp(e)?r(e,t):this.produce(e,a=>r(a,t))}};function c0(e,t){const n=b1(e)?mf("MapSet").proxyMap_(e,t):v1(e)?mf("MapSet").proxySet_(e,t):oX(e,t);return(t?t.scope_:Kw()).drafts_.push(n),n}function uX(e){return bp(e)||Us(10,e),Y8(e)}function Y8(e){if(!bc(e)||w1(e))return e;const t=e[mr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=AT(e,t.scope_.immer_.useStrictShallowCopy_)}else n=AT(e,!0);return s0(n,(r,a)=>{K8(n,r,Y8(a))}),t&&(t.finalized_=!1),n}function dX(){class e extends Map{constructor(l,u){super(),this[mr]={type_:2,parent_:u,scope_:u?u.scope_:Kw(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return $a(this[mr]).size}has(l){return $a(this[mr]).has(l)}set(l,u){const d=this[mr];return s(d),(!$a(d).has(l)||$a(d).get(l)!==u)&&(n(d),tc(d),d.assigned_.set(l,!0),d.copy_.set(l,u),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const u=this[mr];return s(u),n(u),tc(u),u.base_.has(l)?u.assigned_.set(l,!1):u.assigned_.delete(l),u.copy_.delete(l),!0}clear(){const l=this[mr];s(l),$a(l).size&&(n(l),tc(l),l.assigned_=new Map,s0(l.base_,u=>{l.assigned_.set(u,!1)}),l.copy_.clear())}forEach(l,u){const d=this[mr];$a(d).forEach((h,m,g)=>{l.call(u,this.get(m),m,this)})}get(l){const u=this[mr];s(u);const d=$a(u).get(l);if(u.finalized_||!bc(d)||d!==u.base_.get(l))return d;const h=c0(d,u);return n(u),u.copy_.set(l,h),h}keys(){return $a(this[mr]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=l.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=l.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,u){super(),this[mr]={type_:3,parent_:u,scope_:u?u.scope_:Kw(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return $a(this[mr]).size}has(l){const u=this[mr];return s(u),u.copy_?!!(u.copy_.has(l)||u.drafts_.has(l)&&u.copy_.has(u.drafts_.get(l))):u.base_.has(l)}add(l){const u=this[mr];return s(u),this.has(l)||(i(u),tc(u),u.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const u=this[mr];return s(u),i(u),tc(u),u.copy_.delete(l)||(u.drafts_.has(l)?u.copy_.delete(u.drafts_.get(l)):!1)}clear(){const l=this[mr];s(l),$a(l).size&&(i(l),tc(l),l.copy_.clear())}values(){const l=this[mr];return s(l),i(l),l.copy_.values()}entries(){const l=this[mr];return s(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,u){const d=this.values();let h=d.next();for(;!h.done;)l.call(u,h.value,h.value,this),h=d.next()}}function a(o,l){return new r(o,l)}function i(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(bc(l)){const u=c0(l,o);o.drafts_.set(l,u),o.copy_.add(u)}else o.copy_.add(l)}))}function s(o){o.revoked_&&Us(3,JSON.stringify($a(o)))}aX("MapSet",{proxyMap_:t,proxySet_:a})}var xs=new cX,fX=xs.produce;xs.produceWithPatches.bind(xs);xs.setAutoFreeze.bind(xs);xs.setUseStrictShallowCopy.bind(xs);xs.applyPatches.bind(xs);xs.createDraft.bind(xs);xs.finishDraft.bind(xs);const hX=e=>(t,n,r)=>(r.setState=(a,i,...s)=>{const o=typeof a=="function"?fX(a):a;return t(o,i,...s)},e(r.setState,n,r)),Xs=hX,Ir=Ys(Xs((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const s={modId:r,callback:a,order:i};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(s),o.middlewareRegistry[n].sort((l,u)=>(l.order??0)-(u.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var s;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===a)),((s=i.middlewareRegistry[n])==null?void 0:s.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(s=>{s.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${s.tools[r].modId}". Overwriting with registration from mod "${n}".`),s.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Dw={exports:{}},pX=Dw.exports,D4;function mX(){return D4||(D4=1,function(e,t){(function(n,r){e.exports=r()})(pX,function(){var n=function(A,O){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ae){Y.__proto__=ae}||function(Y,ae){for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&(Y[de]=ae[de])})(A,O)},r=function(){return(r=Object.assign||function(A){for(var O,Y=1,ae=arguments.length;Y<ae;Y++)for(var de in O=arguments[Y])Object.prototype.hasOwnProperty.call(O,de)&&(A[de]=O[de]);return A}).apply(this,arguments)};function a(A,O,Y){for(var ae,de=0,xe=O.length;de<xe;de++)!ae&&de in O||((ae=ae||Array.prototype.slice.call(O,0,de))[de]=O[de]);return A.concat(ae||Array.prototype.slice.call(O))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ef,s=Object.keys,o=Array.isArray;function l(A,O){return typeof O!="object"||s(O).forEach(function(Y){A[Y]=O[Y]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,O){return d.call(A,O)}function m(A,O){typeof O=="function"&&(O=O(u(A))),(typeof Reflect>"u"?s:Reflect.ownKeys)(O).forEach(function(Y){v(A,Y,O[Y])})}var g=Object.defineProperty;function v(A,O,Y,ae){g(A,O,l(Y&&h(Y,"get")&&typeof Y.get=="function"?{get:Y.get,set:Y.set,configurable:!0}:{value:Y,configurable:!0,writable:!0},ae))}function b(A){return{from:function(O){return A.prototype=Object.create(O.prototype),v(A.prototype,"constructor",A),{extend:m.bind(null,A.prototype)}}}}var w=Object.getOwnPropertyDescriptor,x=[].slice;function _(A,O,Y){return x.call(A,O,Y)}function E(A,O){return O(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function I(A,O){if(typeof O=="string"&&h(A,O))return A[O];if(!O)return A;if(typeof O!="string"){for(var Y=[],ae=0,de=O.length;ae<de;++ae){var xe=I(A,O[ae]);Y.push(xe)}return Y}var Oe=O.indexOf(".");if(Oe!==-1){var Fe=A[O.substr(0,Oe)];return Fe==null?void 0:I(Fe,O.substr(Oe+1))}}function j(A,O,Y){if(A&&O!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof O!="string"&&"length"in O){C(typeof Y!="string"&&"length"in Y);for(var ae=0,de=O.length;ae<de;++ae)j(A,O[ae],Y[ae])}else{var xe,Oe,Fe=O.indexOf(".");Fe!==-1?(xe=O.substr(0,Fe),(Oe=O.substr(Fe+1))===""?Y===void 0?o(A)&&!isNaN(parseInt(xe))?A.splice(xe,1):delete A[xe]:A[xe]=Y:j(Fe=!(Fe=A[xe])||!h(A,xe)?A[xe]={}:Fe,Oe,Y)):Y===void 0?o(A)&&!isNaN(parseInt(O))?A.splice(O,1):delete A[O]:A[O]=Y}}function N(A){var O,Y={};for(O in A)h(A,O)&&(Y[O]=A[O]);return Y}var P=[].concat;function L(A){return P.apply([],A)}var Et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(O){return O+A+"Array"})}))).filter(function(A){return i[A]}),H=new Set(Et.map(function(A){return i[A]})),M=null;function K(A){return M=new WeakMap,A=function O(Y){if(!Y||typeof Y!="object")return Y;var ae=M.get(Y);if(ae)return ae;if(o(Y)){ae=[],M.set(Y,ae);for(var de=0,xe=Y.length;de<xe;++de)ae.push(O(Y[de]))}else if(H.has(Y.constructor))ae=Y;else{var Oe,Fe=u(Y);for(Oe in ae=Fe===Object.prototype?{}:Object.create(Fe),M.set(Y,ae),Y)h(Y,Oe)&&(ae[Oe]=O(Y[Oe]))}return ae}(A),M=null,A}var U={}.toString;function se(A){return U.call(A).slice(8,-1)}var ie=typeof Symbol<"u"?Symbol.iterator:"@@iterator",re=typeof ie=="symbol"?function(A){var O;return A!=null&&(O=A[ie])&&O.apply(A)}:function(){return null};function X(A,O){return O=A.indexOf(O),0<=O&&A.splice(O,1),0<=O}var ne={};function q(A){var O,Y,ae,de;if(arguments.length===1){if(o(A))return A.slice();if(this===ne&&typeof A=="string")return[A];if(de=re(A)){for(Y=[];!(ae=de.next()).done;)Y.push(ae.value);return Y}if(A==null)return[A];if(typeof(O=A.length)!="number")return[A];for(Y=new Array(O);O--;)Y[O]=A[O];return Y}for(O=arguments.length,Y=new Array(O);O--;)Y[O]=arguments[O];return Y}var J=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},it=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ci=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(it),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function te(A,O){this.name=A,this.message=O}function ue(A,O){return A+". Errors: "+Object.keys(O).map(function(Y){return O[Y].toString()}).filter(function(Y,ae,de){return de.indexOf(Y)===ae}).join(`
`)}function ge(A,O,Y,ae){this.failures=O,this.failedKeys=ae,this.successCount=Y,this.message=ue(A,O)}function Ie(A,O){this.name="BulkError",this.failures=Object.keys(O).map(function(Y){return O[Y]}),this.failuresByPos=O,this.message=ue(A,this.failures)}b(te).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ge).from(te),b(Ie).from(te);var Ae=Ci.reduce(function(A,O){return A[O]=O+"Error",A},{}),_e=te,ve=Ci.reduce(function(A,O){var Y=O+"Error";function ae(de,xe){this.name=Y,de?typeof de=="string"?(this.message="".concat(de).concat(xe?`
 `+xe:""),this.inner=xe||null):typeof de=="object"&&(this.message="".concat(de.name," ").concat(de.message),this.inner=de):(this.message=Q[O]||Y,this.inner=null)}return b(ae).from(_e),A[O]=ae,A},{});ve.Syntax=SyntaxError,ve.Type=TypeError,ve.Range=RangeError;var Be=it.reduce(function(A,O){return A[O+"Error"]=ve[O],A},{}),nt=Ci.reduce(function(A,O){return["Syntax","Type","Range"].indexOf(O)===-1&&(A[O+"Error"]=ve[O]),A},{});function Ve(){}function De(A){return A}function $(A,O){return A==null||A===De?O:function(Y){return O(A(Y))}}function Ee(A,O){return function(){A.apply(this,arguments),O.apply(this,arguments)}}function Te(A,O){return A===Ve?O:function(){var Y=A.apply(this,arguments);Y!==void 0&&(arguments[0]=Y);var ae=this.onsuccess,de=this.onerror;this.onsuccess=null,this.onerror=null;var xe=O.apply(this,arguments);return ae&&(this.onsuccess=this.onsuccess?Ee(ae,this.onsuccess):ae),de&&(this.onerror=this.onerror?Ee(de,this.onerror):de),xe!==void 0?xe:Y}}function fe(A,O){return A===Ve?O:function(){A.apply(this,arguments);var Y=this.onsuccess,ae=this.onerror;this.onsuccess=this.onerror=null,O.apply(this,arguments),Y&&(this.onsuccess=this.onsuccess?Ee(Y,this.onsuccess):Y),ae&&(this.onerror=this.onerror?Ee(ae,this.onerror):ae)}}function oe(A,O){return A===Ve?O:function(Y){var ae=A.apply(this,arguments);l(Y,ae);var de=this.onsuccess,xe=this.onerror;return this.onsuccess=null,this.onerror=null,Y=O.apply(this,arguments),de&&(this.onsuccess=this.onsuccess?Ee(de,this.onsuccess):de),xe&&(this.onerror=this.onerror?Ee(xe,this.onerror):xe),ae===void 0?Y===void 0?void 0:Y:l(ae,Y)}}function ee(A,O){return A===Ve?O:function(){return O.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function Se(A,O){return A===Ve?O:function(){var Y=A.apply(this,arguments);if(Y&&typeof Y.then=="function"){for(var ae=this,de=arguments.length,xe=new Array(de);de--;)xe[de]=arguments[de];return Y.then(function(){return O.apply(ae,xe)})}return O.apply(this,arguments)}}nt.ModifyError=ge,nt.DexieError=te,nt.BulkError=Ie;var Pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ke(A){Pe=A}var We={},Nt=100,Et=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,u(A),A];var O=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[O,u(O),A]}(),it=Et[0],Ci=Et[1],Et=Et[2],Ci=Ci&&Ci.then,Ft=it&&it.constructor,Mt=!!Et,Yt=function(A,O){ce.push([A,O]),D&&(queueMicrotask(me),D=!1)},be=!0,D=!0,W=[],he=[],je=De,we={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ve,pgp:!1,env:{},finalize:Ve},Ne=we,ce=[],ft=0,vt=[];function F(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var O=this._PSD=Ne;if(typeof A!="function"){if(A!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ye(this,this._value))}this._state=null,this._value=null,++O.ref,function Y(ae,de){try{de(function(xe){if(ae._state===null){if(xe===ae)throw new TypeError("A promise cannot be resolved with itself.");var Oe=ae._lib&&G();xe&&typeof xe.then=="function"?Y(ae,function(Fe,Ze){xe instanceof F?xe._then(Fe,Ze):xe.then(Fe,Ze)}):(ae._state=!0,ae._value=xe,Me(ae)),Oe&&V()}},ye.bind(null,ae))}catch(xe){ye(ae,xe)}}(this,A)}var Le={get:function(){var A=Ne,O=Rt;function Y(ae,de){var xe=this,Oe=!A.global&&(A!==Ne||O!==Rt),Fe=Oe&&!Xn(),Ze=new F(function(Xe,rt){Ke(xe,new tt(Oo(ae,A,Oe,Fe),Oo(de,A,Oe,Fe),Xe,rt,A))});return this._consoleTask&&(Ze._consoleTask=this._consoleTask),Ze}return Y.prototype=We,Y},set:function(A){v(this,"then",A&&A.prototype===We?Le:{get:function(){return A},set:Le.set})}};function tt(A,O,Y,ae,de){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof O=="function"?O:null,this.resolve=Y,this.reject=ae,this.psd=de}function ye(A,O){var Y,ae;he.push(O),A._state===null&&(Y=A._lib&&G(),O=je(O),A._state=!1,A._value=O,ae=A,W.some(function(de){return de._value===ae._value})||W.push(ae),Me(A),Y&&V())}function Me(A){var O=A._listeners;A._listeners=[];for(var Y=0,ae=O.length;Y<ae;++Y)Ke(A,O[Y]);var de=A._PSD;--de.ref||de.finalize(),ft===0&&(++ft,Yt(function(){--ft==0&&Z()},[]))}function Ke(A,O){if(A._state!==null){var Y=A._state?O.onFulfilled:O.onRejected;if(Y===null)return(A._state?O.resolve:O.reject)(A._value);++O.psd.ref,++ft,Yt(Dt,[Y,A,O])}else A._listeners.push(O)}function Dt(A,O,Y){try{var ae,de=O._value;!O._state&&he.length&&(he=[]),ae=Pe&&O._consoleTask?O._consoleTask.run(function(){return A(de)}):A(de),O._state||he.indexOf(de)!==-1||function(xe){for(var Oe=W.length;Oe;)if(W[--Oe]._value===xe._value)return W.splice(Oe,1)}(O),Y.resolve(ae)}catch(xe){Y.reject(xe)}finally{--ft==0&&Z(),--Y.psd.ref||Y.psd.finalize()}}function me(){Mo(we,function(){G()&&V()})}function G(){var A=be;return D=be=!1,A}function V(){var A,O,Y;do for(;0<ce.length;)for(A=ce,ce=[],Y=A.length,O=0;O<Y;++O){var ae=A[O];ae[0].apply(null,ae[1])}while(0<ce.length);D=be=!0}function Z(){var A=W;W=[],A.forEach(function(ae){ae._PSD.onunhandled.call(null,ae._value,ae)});for(var O=vt.slice(0),Y=O.length;Y;)O[--Y]()}function pe(A){return new F(We,!1,A)}function Re(A,O){var Y=Ne;return function(){var ae=G(),de=Ne;try{return $n(Y,!0),A.apply(this,arguments)}catch(xe){O&&O(xe)}finally{$n(de,!1),ae&&V()}}}m(F.prototype,{then:Le,_then:function(A,O){Ke(this,new tt(null,null,A,O,Ne))},catch:function(A){if(arguments.length===1)return this.then(null,A);var O=A,Y=arguments[1];return typeof O=="function"?this.then(null,function(ae){return(ae instanceof O?Y:pe)(ae)}):this.then(null,function(ae){return(ae&&ae.name===O?Y:pe)(ae)})},finally:function(A){return this.then(function(O){return F.resolve(A()).then(function(){return O})},function(O){return F.resolve(A()).then(function(){return pe(O)})})},timeout:function(A,O){var Y=this;return A<1/0?new F(function(ae,de){var xe=setTimeout(function(){return de(new ve.Timeout(O))},A);Y.then(ae,de).finally(clearTimeout.bind(null,xe))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(F.prototype,Symbol.toStringTag,"Dexie.Promise"),we.env=_i(),m(F,{all:function(){var A=q.apply(null,arguments).map(Sr);return new F(function(O,Y){A.length===0&&O([]);var ae=A.length;A.forEach(function(de,xe){return F.resolve(de).then(function(Oe){A[xe]=Oe,--ae||O(A)},Y)})})},resolve:function(A){return A instanceof F?A:A&&typeof A.then=="function"?new F(function(O,Y){A.then(O,Y)}):new F(We,!0,A)},reject:pe,race:function(){var A=q.apply(null,arguments).map(Sr);return new F(function(O,Y){A.map(function(ae){return F.resolve(ae).then(O,Y)})})},PSD:{get:function(){return Ne},set:function(A){return Ne=A}},totalEchoes:{get:function(){return Rt}},newPSD:en,usePSD:Mo,scheduler:{get:function(){return Yt},set:function(A){Yt=A}},rejectionMapper:{get:function(){return je},set:function(A){je=A}},follow:function(A,O){return new F(function(Y,ae){return en(function(de,xe){var Oe=Ne;Oe.unhandleds=[],Oe.onunhandled=xe,Oe.finalize=Ee(function(){var Fe,Ze=this;Fe=function(){Ze.unhandleds.length===0?de():xe(Ze.unhandleds[0])},vt.push(function Xe(){Fe(),vt.splice(vt.indexOf(Xe),1)}),++ft,Yt(function(){--ft==0&&Z()},[])},Oe.finalize),A()},O,Y,ae)})}}),Ft&&(Ft.allSettled&&v(F,"allSettled",function(){var A=q.apply(null,arguments).map(Sr);return new F(function(O){A.length===0&&O([]);var Y=A.length,ae=new Array(Y);A.forEach(function(de,xe){return F.resolve(de).then(function(Oe){return ae[xe]={status:"fulfilled",value:Oe}},function(Oe){return ae[xe]={status:"rejected",reason:Oe}}).then(function(){return--Y||O(ae)})})})}),Ft.any&&typeof AggregateError<"u"&&v(F,"any",function(){var A=q.apply(null,arguments).map(Sr);return new F(function(O,Y){A.length===0&&Y(new AggregateError([]));var ae=A.length,de=new Array(ae);A.forEach(function(xe,Oe){return F.resolve(xe).then(function(Fe){return O(Fe)},function(Fe){de[Oe]=Fe,--ae||Y(new AggregateError(de))})})})}),Ft.withResolvers&&(F.withResolvers=Ft.withResolvers));var Ue={awaits:0,echoes:0,id:0},pt=0,Zt=[],ut=0,Rt=0,Lt=0;function en(A,O,Y,ae){var de=Ne,xe=Object.create(de);return xe.parent=de,xe.ref=0,xe.global=!1,xe.id=++Lt,we.env,xe.env=Mt?{Promise:F,PromiseProp:{value:F,configurable:!0,writable:!0},all:F.all,race:F.race,allSettled:F.allSettled,any:F.any,resolve:F.resolve,reject:F.reject}:{},O&&l(xe,O),++de.ref,xe.finalize=function(){--this.parent.ref||this.parent.finalize()},ae=Mo(xe,A,Y,ae),xe.ref===0&&xe.finalize(),ae}function In(){return Ue.id||(Ue.id=++pt),++Ue.awaits,Ue.echoes+=Nt,Ue.id}function Xn(){return!!Ue.awaits&&(--Ue.awaits==0&&(Ue.id=0),Ue.echoes=Ue.awaits*Nt,!0)}function Sr(A){return Ue.echoes&&A&&A.constructor===Ft?(In(),A.then(function(O){return Xn(),O},function(O){return Xn(),Zr(O)})):A}function Er(){var A=Zt[Zt.length-1];Zt.pop(),$n(A,!1)}function $n(A,O){var Y,ae=Ne;(O?!Ue.echoes||ut++&&A===Ne:!ut||--ut&&A===Ne)||queueMicrotask(O?(function(de){++Rt,Ue.echoes&&--Ue.echoes!=0||(Ue.echoes=Ue.awaits=Ue.id=0),Zt.push(Ne),$n(de,!0)}).bind(null,A):Er),A!==Ne&&(Ne=A,ae===we&&(we.env=_i()),Mt&&(Y=we.env.Promise,O=A.env,(ae.global||A.global)&&(Object.defineProperty(i,"Promise",O.PromiseProp),Y.all=O.all,Y.race=O.race,Y.resolve=O.resolve,Y.reject=O.reject,O.allSettled&&(Y.allSettled=O.allSettled),O.any&&(Y.any=O.any))))}function _i(){var A=i.Promise;return Mt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function Mo(A,O,Y,ae,de){var xe=Ne;try{return $n(A,!0),O(Y,ae,de)}finally{$n(xe,!1)}}function Oo(A,O,Y,ae){return typeof A!="function"?A:function(){var de=Ne;Y&&In(),$n(O,!0);try{return A.apply(this,arguments)}finally{$n(de,!1),ae&&queueMicrotask(Xn)}}}function Po(A){Promise===Ft&&Ue.echoes===0?ut===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+Ci).indexOf("[native code]")===-1&&(In=Xn=Ve);var Zr=F.reject,Fo="",Ss="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gb="String expected.",no=[],kl="__dbnames",is="readonly",vd="readwrite";function Lo(A,O){return A?O?function(){return A.apply(this,arguments)&&O.apply(this,arguments)}:A:O}var Al={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Lc(A){return typeof A!="string"||/\./.test(A)?function(O){return O}:function(O){return O[A]===void 0&&A in O&&delete(O=K(O))[A],O}}function Kf(){throw ve.Type()}function Jn(A,O){try{var Y=_m(A),ae=_m(O);if(Y!==ae)return Y==="Array"?1:ae==="Array"?-1:Y==="binary"?1:ae==="binary"?-1:Y==="string"?1:ae==="string"?-1:Y==="Date"?1:ae!=="Date"?NaN:-1;switch(Y){case"number":case"Date":case"string":return O<A?1:A<O?-1:0;case"binary":return function(de,xe){for(var Oe=de.length,Fe=xe.length,Ze=Oe<Fe?Oe:Fe,Xe=0;Xe<Ze;++Xe)if(de[Xe]!==xe[Xe])return de[Xe]<xe[Xe]?-1:1;return Oe===Fe?0:Oe<Fe?-1:1}(Si(A),Si(O));case"Array":return function(de,xe){for(var Oe=de.length,Fe=xe.length,Ze=Oe<Fe?Oe:Fe,Xe=0;Xe<Ze;++Xe){var rt=Jn(de[Xe],xe[Xe]);if(rt!==0)return rt}return Oe===Fe?0:Oe<Fe?-1:1}(A,O)}}catch{}return NaN}function _m(A){var O=typeof A;return O!="object"?O:ArrayBuffer.isView(A)?"binary":(A=se(A),A==="ArrayBuffer"?"binary":A)}function Si(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var Sm=(jr.prototype._trans=function(A,O,Y){var ae=this._tx||Ne.trans,de=this.name,xe=Pe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function Oe(Xe,rt,He){if(!He.schema[de])throw new ve.NotFound("Table "+de+" not part of transaction");return O(He.idbtrans,He)}var Fe=G();try{var Ze=ae&&ae.db._novip===this.db._novip?ae===Ne.trans?ae._promise(A,Oe,Y):en(function(){return ae._promise(A,Oe,Y)},{trans:ae,transless:Ne.transless||Ne}):function Xe(rt,He,st,Ge){if(rt.idbdb&&(rt._state.openComplete||Ne.letThrough||rt._vip)){var et=rt._createTransaction(He,st,rt._dbSchema);try{et.create(),rt._state.PR1398_maxLoop=3}catch(ot){return ot.name===Ae.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,He,st,Ge)})):Zr(ot)}return et._promise(He,function(ot,Je){return en(function(){return Ne.trans=et,Ge(ot,Je,et)})}).then(function(ot){if(He==="readwrite")try{et.idbtrans.commit()}catch{}return He==="readonly"?ot:et._completion.then(function(){return ot})})}if(rt._state.openComplete)return Zr(new ve.DatabaseClosed(rt._state.dbOpenError));if(!rt._state.isBeingOpened){if(!rt._state.autoOpen)return Zr(new ve.DatabaseClosed);rt.open().catch(Ve)}return rt._state.dbReadyPromise.then(function(){return Xe(rt,He,st,Ge)})}(this.db,A,[this.name],Oe);return xe&&(Ze._consoleTask=xe,Ze=Ze.catch(function(Xe){return console.trace(Xe),Zr(Xe)})),Ze}finally{Fe&&V()}},jr.prototype.get=function(A,O){var Y=this;return A&&A.constructor===Object?this.where(A).first(O):A==null?Zr(new ve.Type("Invalid argument to Table.get()")):this._trans("readonly",function(ae){return Y.core.get({trans:ae,key:A}).then(function(de){return Y.hook.reading.fire(de)})}).then(O)},jr.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(o(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var O=s(A);if(O.length===1)return this.where(O[0]).equals(A[O[0]]);var Y=this.schema.indexes.concat(this.schema.primKey).filter(function(Fe){if(Fe.compound&&O.every(function(Xe){return 0<=Fe.keyPath.indexOf(Xe)})){for(var Ze=0;Ze<O.length;++Ze)if(O.indexOf(Fe.keyPath[Ze])===-1)return!1;return!0}return!1}).sort(function(Fe,Ze){return Fe.keyPath.length-Ze.keyPath.length})[0];if(Y&&this.db._maxKey!==Fo){var xe=Y.keyPath.slice(0,O.length);return this.where(xe).equals(xe.map(function(Ze){return A[Ze]}))}!Y&&Pe&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(O.join("+"),"]"));var ae=this.schema.idxByName;function de(Fe,Ze){return Jn(Fe,Ze)===0}var Oe=O.reduce(function(He,Ze){var Xe=He[0],rt=He[1],He=ae[Ze],st=A[Ze];return[Xe||He,Xe||!He?Lo(rt,He&&He.multi?function(Ge){return Ge=I(Ge,Ze),o(Ge)&&Ge.some(function(et){return de(st,et)})}:function(Ge){return de(st,I(Ge,Ze))}):rt]},[null,null]),xe=Oe[0],Oe=Oe[1];return xe?this.where(xe.name).equals(A[xe.keyPath]).filter(Oe):Y?this.filter(Oe):this.where(O).equals("")},jr.prototype.filter=function(A){return this.toCollection().and(A)},jr.prototype.count=function(A){return this.toCollection().count(A)},jr.prototype.offset=function(A){return this.toCollection().offset(A)},jr.prototype.limit=function(A){return this.toCollection().limit(A)},jr.prototype.each=function(A){return this.toCollection().each(A)},jr.prototype.toArray=function(A){return this.toCollection().toArray(A)},jr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},jr.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,o(A)?"[".concat(A.join("+"),"]"):A))},jr.prototype.reverse=function(){return this.toCollection().reverse()},jr.prototype.mapToClass=function(A){var O,Y=this.db,ae=this.name;function de(){return O!==null&&O.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof Kf&&(function(Ze,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function rt(){this.constructor=Ze}n(Ze,Xe),Ze.prototype=Xe===null?Object.create(Xe):(rt.prototype=Xe.prototype,new rt)}(de,O=A),Object.defineProperty(de.prototype,"db",{get:function(){return Y},enumerable:!1,configurable:!0}),de.prototype.table=function(){return ae},A=de);for(var xe=new Set,Oe=A.prototype;Oe;Oe=u(Oe))Object.getOwnPropertyNames(Oe).forEach(function(Ze){return xe.add(Ze)});function Fe(Ze){if(!Ze)return Ze;var Xe,rt=Object.create(A.prototype);for(Xe in Ze)if(!xe.has(Xe))try{rt[Xe]=Ze[Xe]}catch{}return rt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Fe,this.hook("reading",Fe),A},jr.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},jr.prototype.add=function(A,O){var Y=this,ae=this.schema.primKey,de=ae.auto,xe=ae.keyPath,Oe=A;return xe&&de&&(Oe=Lc(xe)(A)),this._trans("readwrite",function(Fe){return Y.core.mutate({trans:Fe,type:"add",keys:O!=null?[O]:null,values:[Oe]})}).then(function(Fe){return Fe.numFailures?F.reject(Fe.failures[0]):Fe.lastResult}).then(function(Fe){if(xe)try{j(A,xe,Fe)}catch{}return Fe})},jr.prototype.update=function(A,O){return typeof A!="object"||o(A)?this.where(":id").equals(A).modify(O):(A=I(A,this.schema.primKey.keyPath),A===void 0?Zr(new ve.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(O))},jr.prototype.put=function(A,O){var Y=this,ae=this.schema.primKey,de=ae.auto,xe=ae.keyPath,Oe=A;return xe&&de&&(Oe=Lc(xe)(A)),this._trans("readwrite",function(Fe){return Y.core.mutate({trans:Fe,type:"put",values:[Oe],keys:O!=null?[O]:null})}).then(function(Fe){return Fe.numFailures?F.reject(Fe.failures[0]):Fe.lastResult}).then(function(Fe){if(xe)try{j(A,xe,Fe)}catch{}return Fe})},jr.prototype.delete=function(A){var O=this;return this._trans("readwrite",function(Y){return O.core.mutate({trans:Y,type:"delete",keys:[A]})}).then(function(Y){return Y.numFailures?F.reject(Y.failures[0]):void 0})},jr.prototype.clear=function(){var A=this;return this._trans("readwrite",function(O){return A.core.mutate({trans:O,type:"deleteRange",range:Al})}).then(function(O){return O.numFailures?F.reject(O.failures[0]):void 0})},jr.prototype.bulkGet=function(A){var O=this;return this._trans("readonly",function(Y){return O.core.getMany({keys:A,trans:Y}).then(function(ae){return ae.map(function(de){return O.hook.reading.fire(de)})})})},jr.prototype.bulkAdd=function(A,O,Y){var ae=this,de=Array.isArray(O)?O:void 0,xe=(Y=Y||(de?void 0:O))?Y.allKeys:void 0;return this._trans("readwrite",function(Oe){var Xe=ae.schema.primKey,Fe=Xe.auto,Xe=Xe.keyPath;if(Xe&&de)throw new ve.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(de&&de.length!==A.length)throw new ve.InvalidArgument("Arguments objects and keys must have the same length");var Ze=A.length,Xe=Xe&&Fe?A.map(Lc(Xe)):A;return ae.core.mutate({trans:Oe,type:"add",keys:de,values:Xe,wantResults:xe}).then(function(et){var He=et.numFailures,st=et.results,Ge=et.lastResult,et=et.failures;if(He===0)return xe?st:Ge;throw new Ie("".concat(ae.name,".bulkAdd(): ").concat(He," of ").concat(Ze," operations failed"),et)})})},jr.prototype.bulkPut=function(A,O,Y){var ae=this,de=Array.isArray(O)?O:void 0,xe=(Y=Y||(de?void 0:O))?Y.allKeys:void 0;return this._trans("readwrite",function(Oe){var Xe=ae.schema.primKey,Fe=Xe.auto,Xe=Xe.keyPath;if(Xe&&de)throw new ve.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(de&&de.length!==A.length)throw new ve.InvalidArgument("Arguments objects and keys must have the same length");var Ze=A.length,Xe=Xe&&Fe?A.map(Lc(Xe)):A;return ae.core.mutate({trans:Oe,type:"put",keys:de,values:Xe,wantResults:xe}).then(function(et){var He=et.numFailures,st=et.results,Ge=et.lastResult,et=et.failures;if(He===0)return xe?st:Ge;throw new Ie("".concat(ae.name,".bulkPut(): ").concat(He," of ").concat(Ze," operations failed"),et)})})},jr.prototype.bulkUpdate=function(A){var O=this,Y=this.core,ae=A.map(function(Oe){return Oe.key}),de=A.map(function(Oe){return Oe.changes}),xe=[];return this._trans("readwrite",function(Oe){return Y.getMany({trans:Oe,keys:ae,cache:"clone"}).then(function(Fe){var Ze=[],Xe=[];A.forEach(function(He,st){var Ge=He.key,et=He.changes,ot=Fe[st];if(ot){for(var Je=0,ht=Object.keys(et);Je<ht.length;Je++){var bt=ht[Je],wt=et[bt];if(bt===O.schema.primKey.keyPath){if(Jn(wt,Ge)!==0)throw new ve.Constraint("Cannot update primary key in bulkUpdate()")}else j(ot,bt,wt)}xe.push(st),Ze.push(Ge),Xe.push(ot)}});var rt=Ze.length;return Y.mutate({trans:Oe,type:"put",keys:Ze,values:Xe,updates:{keys:ae,changeSpecs:de}}).then(function(He){var st=He.numFailures,Ge=He.failures;if(st===0)return rt;for(var et=0,ot=Object.keys(Ge);et<ot.length;et++){var Je,ht=ot[et],bt=xe[Number(ht)];bt!=null&&(Je=Ge[ht],delete Ge[ht],Ge[bt]=Je)}throw new Ie("".concat(O.name,".bulkUpdate(): ").concat(st," of ").concat(rt," operations failed"),Ge)})})})},jr.prototype.bulkDelete=function(A){var O=this,Y=A.length;return this._trans("readwrite",function(ae){return O.core.mutate({trans:ae,type:"delete",keys:A})}).then(function(Oe){var de=Oe.numFailures,xe=Oe.lastResult,Oe=Oe.failures;if(de===0)return xe;throw new Ie("".concat(O.name,".bulkDelete(): ").concat(de," of ").concat(Y," operations failed"),Oe)})},jr);function jr(){}function Bo(A){function O(Oe,Fe){if(Fe){for(var Ze=arguments.length,Xe=new Array(Ze-1);--Ze;)Xe[Ze-1]=arguments[Ze];return Y[Oe].subscribe.apply(null,Xe),A}if(typeof Oe=="string")return Y[Oe]}var Y={};O.addEventType=xe;for(var ae=1,de=arguments.length;ae<de;++ae)xe(arguments[ae]);return O;function xe(Oe,Fe,Ze){if(typeof Oe!="object"){var Xe;Fe=Fe||ee;var rt={subscribers:[],fire:Ze=Ze||Ve,subscribe:function(He){rt.subscribers.indexOf(He)===-1&&(rt.subscribers.push(He),rt.fire=Fe(rt.fire,He))},unsubscribe:function(He){rt.subscribers=rt.subscribers.filter(function(st){return st!==He}),rt.fire=rt.subscribers.reduce(Fe,Ze)}};return Y[Oe]=O[Oe]=rt}s(Xe=Oe).forEach(function(He){var st=Xe[He];if(o(st))xe(He,Xe[He][0],Xe[He][1]);else{if(st!=="asap")throw new ve.InvalidArgument("Invalid event config");var Ge=xe(He,De,function(){for(var et=arguments.length,ot=new Array(et);et--;)ot[et]=arguments[et];Ge.subscribers.forEach(function(Je){k(function(){Je.apply(null,ot)})})})}})}}function Bc(A,O){return b(O).from({prototype:A}),O}function ro(A,O){return!(A.filter||A.algorithm||A.or)&&(O?A.justLimit:!A.replayFilter)}function Em(A,O){A.filter=Lo(A.filter,O)}function ii(A,O,Y){var ae=A.replayFilter;A.replayFilter=ae?function(){return Lo(ae(),O())}:O,A.justLimit=Y&&!ae}function $c(A,O){if(A.isPrimKey)return O.primaryKey;var Y=O.getIndexByKeyPath(A.index);if(!Y)throw new ve.Schema("KeyPath "+A.index+" on object store "+O.name+" is not indexed");return Y}function Cm(A,O,Y){var ae=$c(A,O.schema);return O.openCursor({trans:Y,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:ae,range:A.range}})}function zc(A,O,Y,ae){var de=A.replayFilter?Lo(A.filter,A.replayFilter()):A.filter;if(A.or){var xe={},Oe=function(Fe,Ze,Xe){var rt,He;de&&!de(Ze,Xe,function(st){return Ze.stop(st)},function(st){return Ze.fail(st)})||((He=""+(rt=Ze.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(rt)),h(xe,He)||(xe[He]=!0,O(Fe,Ze,Xe)))};return Promise.all([A.or._iterate(Oe,Y),Nl(Cm(A,ae,Y),A.algorithm,Oe,!A.keysOnly&&A.valueMapper)])}return Nl(Cm(A,ae,Y),Lo(A.algorithm,de),O,!A.keysOnly&&A.valueMapper)}function Nl(A,O,Y,ae){var de=Re(ae?function(xe,Oe,Fe){return Y(ae(xe),Oe,Fe)}:Y);return A.then(function(xe){if(xe)return xe.start(function(){var Oe=function(){return xe.continue()};O&&!O(xe,function(Fe){return Oe=Fe},function(Fe){xe.stop(Fe),Oe=Ve},function(Fe){xe.fail(Fe),Oe=Ve})||de(xe.value,xe,function(Fe){return Oe=Fe}),Oe()})})}var Uc=(Tm.prototype.execute=function(A){var O=this["@@propmod"];if(O.add!==void 0){var Y=O.add;if(o(Y))return a(a([],o(A)?A:[],!0),Y).sort();if(typeof Y=="number")return(Number(A)||0)+Y;if(typeof Y=="bigint")try{return BigInt(A)+Y}catch{return BigInt(0)+Y}throw new TypeError("Invalid term ".concat(Y))}if(O.remove!==void 0){var ae=O.remove;if(o(ae))return o(A)?A.filter(function(de){return!ae.includes(de)}).sort():[];if(typeof ae=="number")return Number(A)-ae;if(typeof ae=="bigint")try{return BigInt(A)-ae}catch{return BigInt(0)-ae}throw new TypeError("Invalid subtrahend ".concat(ae))}return Y=(Y=O.replacePrefix)===null||Y===void 0?void 0:Y[0],Y&&typeof A=="string"&&A.startsWith(Y)?O.replacePrefix[1]+A.substring(Y.length):A},Tm);function Tm(A){this["@@propmod"]=A}var Vc=(ar.prototype._read=function(A,O){var Y=this._ctx;return Y.error?Y.table._trans(null,Zr.bind(null,Y.error)):Y.table._trans("readonly",A).then(O)},ar.prototype._write=function(A){var O=this._ctx;return O.error?O.table._trans(null,Zr.bind(null,O.error)):O.table._trans("readwrite",A,"locked")},ar.prototype._addAlgorithm=function(A){var O=this._ctx;O.algorithm=Lo(O.algorithm,A)},ar.prototype._iterate=function(A,O){return zc(this._ctx,A,O,this._ctx.table.core)},ar.prototype.clone=function(A){var O=Object.create(this.constructor.prototype),Y=Object.create(this._ctx);return A&&l(Y,A),O._ctx=Y,O},ar.prototype.raw=function(){return this._ctx.valueMapper=null,this},ar.prototype.each=function(A){var O=this._ctx;return this._read(function(Y){return zc(O,A,Y,O.table.core)})},ar.prototype.count=function(A){var O=this;return this._read(function(Y){var ae=O._ctx,de=ae.table.core;if(ro(ae,!0))return de.count({trans:Y,query:{index:$c(ae,de.schema),range:ae.range}}).then(function(Oe){return Math.min(Oe,ae.limit)});var xe=0;return zc(ae,function(){return++xe,!1},Y,de).then(function(){return xe})}).then(A)},ar.prototype.sortBy=function(A,O){var Y=A.split(".").reverse(),ae=Y[0],de=Y.length-1;function xe(Ze,Xe){return Xe?xe(Ze[Y[Xe]],Xe-1):Ze[ae]}var Oe=this._ctx.dir==="next"?1:-1;function Fe(Ze,Xe){return Jn(xe(Ze,de),xe(Xe,de))*Oe}return this.toArray(function(Ze){return Ze.sort(Fe)}).then(O)},ar.prototype.toArray=function(A){var O=this;return this._read(function(Y){var ae=O._ctx;if(ae.dir==="next"&&ro(ae,!0)&&0<ae.limit){var de=ae.valueMapper,xe=$c(ae,ae.table.core.schema);return ae.table.core.query({trans:Y,limit:ae.limit,values:!0,query:{index:xe,range:ae.range}}).then(function(Fe){return Fe=Fe.result,de?Fe.map(de):Fe})}var Oe=[];return zc(ae,function(Fe){return Oe.push(Fe)},Y,ae.table.core).then(function(){return Oe})},A)},ar.prototype.offset=function(A){var O=this._ctx;return A<=0||(O.offset+=A,ro(O)?ii(O,function(){var Y=A;return function(ae,de){return Y===0||(Y===1?--Y:de(function(){ae.advance(Y),Y=0}),!1)}}):ii(O,function(){var Y=A;return function(){return--Y<0}})),this},ar.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),ii(this._ctx,function(){var O=A;return function(Y,ae,de){return--O<=0&&ae(de),0<=O}},!0),this},ar.prototype.until=function(A,O){return Em(this._ctx,function(Y,ae,de){return!A(Y.value)||(ae(de),O)}),this},ar.prototype.first=function(A){return this.limit(1).toArray(function(O){return O[0]}).then(A)},ar.prototype.last=function(A){return this.reverse().first(A)},ar.prototype.filter=function(A){var O;return Em(this._ctx,function(Y){return A(Y.value)}),(O=this._ctx).isMatch=Lo(O.isMatch,A),this},ar.prototype.and=function(A){return this.filter(A)},ar.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},ar.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ar.prototype.desc=function(){return this.reverse()},ar.prototype.eachKey=function(A){var O=this._ctx;return O.keysOnly=!O.isMatch,this.each(function(Y,ae){A(ae.key,ae)})},ar.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},ar.prototype.eachPrimaryKey=function(A){var O=this._ctx;return O.keysOnly=!O.isMatch,this.each(function(Y,ae){A(ae.primaryKey,ae)})},ar.prototype.keys=function(A){var O=this._ctx;O.keysOnly=!O.isMatch;var Y=[];return this.each(function(ae,de){Y.push(de.key)}).then(function(){return Y}).then(A)},ar.prototype.primaryKeys=function(A){var O=this._ctx;if(O.dir==="next"&&ro(O,!0)&&0<O.limit)return this._read(function(ae){var de=$c(O,O.table.core.schema);return O.table.core.query({trans:ae,values:!1,limit:O.limit,query:{index:de,range:O.range}})}).then(function(ae){return ae.result}).then(A);O.keysOnly=!O.isMatch;var Y=[];return this.each(function(ae,de){Y.push(de.primaryKey)}).then(function(){return Y}).then(A)},ar.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},ar.prototype.firstKey=function(A){return this.limit(1).keys(function(O){return O[0]}).then(A)},ar.prototype.lastKey=function(A){return this.reverse().firstKey(A)},ar.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var O={};return Em(this._ctx,function(de){var ae=de.primaryKey.toString(),de=h(O,ae);return O[ae]=!0,!de}),this},ar.prototype.modify=function(A){var O=this,Y=this._ctx;return this._write(function(ae){var de,xe,Oe;Oe=typeof A=="function"?A:(de=s(A),xe=de.length,function(Je){for(var ht=!1,bt=0;bt<xe;++bt){var wt=de[bt],kt=A[wt],Vt=I(Je,wt);kt instanceof Uc?(j(Je,wt,kt.execute(Vt)),ht=!0):Vt!==kt&&(j(Je,wt,kt),ht=!0)}return ht});var Fe=Y.table.core,He=Fe.schema.primaryKey,Ze=He.outbound,Xe=He.extractKey,rt=200,He=O.db._options.modifyChunkSize;He&&(rt=typeof He=="object"?He[Fe.name]||He["*"]||200:He);function st(Je,wt){var bt=wt.failures,wt=wt.numFailures;et+=Je-wt;for(var kt=0,Vt=s(bt);kt<Vt.length;kt++){var Xt=Vt[kt];Ge.push(bt[Xt])}}var Ge=[],et=0,ot=[];return O.clone().primaryKeys().then(function(Je){function ht(wt){var kt=Math.min(rt,Je.length-wt);return Fe.getMany({trans:ae,keys:Je.slice(wt,wt+kt),cache:"immutable"}).then(function(Vt){for(var Xt=[],$t=[],Gt=Ze?[]:null,Jt=[],zt=0;zt<kt;++zt){var nn=Vt[zt],pn={value:K(nn),primKey:Je[wt+zt]};Oe.call(pn,pn.value,pn)!==!1&&(pn.value==null?Jt.push(Je[wt+zt]):Ze||Jn(Xe(nn),Xe(pn.value))===0?($t.push(pn.value),Ze&&Gt.push(Je[wt+zt])):(Jt.push(Je[wt+zt]),Xt.push(pn.value)))}return Promise.resolve(0<Xt.length&&Fe.mutate({trans:ae,type:"add",values:Xt}).then(function(gn){for(var jn in gn.failures)Jt.splice(parseInt(jn),1);st(Xt.length,gn)})).then(function(){return(0<$t.length||bt&&typeof A=="object")&&Fe.mutate({trans:ae,type:"put",keys:Gt,values:$t,criteria:bt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<wt}).then(function(gn){return st($t.length,gn)})}).then(function(){return(0<Jt.length||bt&&A===Zf)&&Fe.mutate({trans:ae,type:"delete",keys:Jt,criteria:bt,isAdditionalChunk:0<wt}).then(function(gn){return st(Jt.length,gn)})}).then(function(){return Je.length>wt+kt&&ht(wt+rt)})})}var bt=ro(Y)&&Y.limit===1/0&&(typeof A!="function"||A===Zf)&&{index:Y.index,range:Y.range};return ht(0).then(function(){if(0<Ge.length)throw new ge("Error modifying one or more objects",Ge,et,ot);return Je.length})})})},ar.prototype.delete=function(){var A=this._ctx,O=A.range;return ro(A)&&(A.isPrimKey||O.type===3)?this._write(function(Y){var ae=A.table.core.schema.primaryKey,de=O;return A.table.core.count({trans:Y,query:{index:ae,range:de}}).then(function(xe){return A.table.core.mutate({trans:Y,type:"deleteRange",range:de}).then(function(Oe){var Fe=Oe.failures;if(Oe.lastResult,Oe.results,Oe=Oe.numFailures,Oe)throw new ge("Could not delete some values",Object.keys(Fe).map(function(Ze){return Fe[Ze]}),xe-Oe);return xe-Oe})})}):this.modify(Zf)},ar);function ar(){}var Zf=function(A,O){return O.value=null};function yb(A,O){return A<O?-1:A===O?0:1}function km(A,O){return O<A?-1:A===O?0:1}function Ei(A,O,Y){return A=A instanceof Il?new A.Collection(A):A,A._ctx.error=new(Y||TypeError)(O),A}function Hc(A){return new A.Collection(A,function(){return Yf("")}).limit(0)}function Rl(A,O,Y,ae){var de,xe,Oe,Fe,Ze,Xe,rt,He=Y.length;if(!Y.every(function(et){return typeof et=="string"}))return Ei(A,gb);function st(et){de=et==="next"?function(Je){return Je.toUpperCase()}:function(Je){return Je.toLowerCase()},xe=et==="next"?function(Je){return Je.toLowerCase()}:function(Je){return Je.toUpperCase()},Oe=et==="next"?yb:km;var ot=Y.map(function(Je){return{lower:xe(Je),upper:de(Je)}}).sort(function(Je,ht){return Oe(Je.lower,ht.lower)});Fe=ot.map(function(Je){return Je.upper}),Ze=ot.map(function(Je){return Je.lower}),rt=(Xe=et)==="next"?"":ae}st("next"),A=new A.Collection(A,function(){return Es(Fe[0],Ze[He-1]+ae)}),A._ondirectionchange=function(et){st(et)};var Ge=0;return A._addAlgorithm(function(et,ot,Je){var ht=et.key;if(typeof ht!="string")return!1;var bt=xe(ht);if(O(bt,Ze,Ge))return!0;for(var wt=null,kt=Ge;kt<He;++kt){var Vt=function(Xt,$t,Gt,Jt,zt,nn){for(var pn=Math.min(Xt.length,Jt.length),gn=-1,jn=0;jn<pn;++jn){var Xa=$t[jn];if(Xa!==Jt[jn])return zt(Xt[jn],Gt[jn])<0?Xt.substr(0,jn)+Gt[jn]+Gt.substr(jn+1):zt(Xt[jn],Jt[jn])<0?Xt.substr(0,jn)+Jt[jn]+Gt.substr(jn+1):0<=gn?Xt.substr(0,gn)+$t[gn]+Gt.substr(gn+1):null;zt(Xt[jn],Xa)<0&&(gn=jn)}return pn<Jt.length&&nn==="next"?Xt+Gt.substr(Xt.length):pn<Xt.length&&nn==="prev"?Xt.substr(0,Gt.length):gn<0?null:Xt.substr(0,gn)+Jt[gn]+Gt.substr(gn+1)}(ht,bt,Fe[kt],Ze[kt],Oe,Xe);Vt===null&&wt===null?Ge=kt+1:(wt===null||0<Oe(wt,Vt))&&(wt=Vt)}return ot(wt!==null?function(){et.continue(wt+rt)}:Je),!1}),A}function Es(A,O,Y,ae){return{type:2,lower:A,upper:O,lowerOpen:Y,upperOpen:ae}}function Yf(A){return{type:1,lower:A,upper:A}}var Il=(Object.defineProperty($r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$r.prototype.between=function(A,O,Y,ae){Y=Y!==!1,ae=ae===!0;try{return 0<this._cmp(A,O)||this._cmp(A,O)===0&&(Y||ae)&&(!Y||!ae)?Hc(this):new this.Collection(this,function(){return Es(A,O,!Y,!ae)})}catch{return Ei(this,Ss)}},$r.prototype.equals=function(A){return A==null?Ei(this,Ss):new this.Collection(this,function(){return Yf(A)})},$r.prototype.above=function(A){return A==null?Ei(this,Ss):new this.Collection(this,function(){return Es(A,void 0,!0)})},$r.prototype.aboveOrEqual=function(A){return A==null?Ei(this,Ss):new this.Collection(this,function(){return Es(A,void 0,!1)})},$r.prototype.below=function(A){return A==null?Ei(this,Ss):new this.Collection(this,function(){return Es(void 0,A,!1,!0)})},$r.prototype.belowOrEqual=function(A){return A==null?Ei(this,Ss):new this.Collection(this,function(){return Es(void 0,A)})},$r.prototype.startsWith=function(A){return typeof A!="string"?Ei(this,gb):this.between(A,A+Fo,!0,!0)},$r.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):Rl(this,function(O,Y){return O.indexOf(Y[0])===0},[A],Fo)},$r.prototype.equalsIgnoreCase=function(A){return Rl(this,function(O,Y){return O===Y[0]},[A],"")},$r.prototype.anyOfIgnoreCase=function(){var A=q.apply(ne,arguments);return A.length===0?Hc(this):Rl(this,function(O,Y){return Y.indexOf(O)!==-1},A,"")},$r.prototype.startsWithAnyOfIgnoreCase=function(){var A=q.apply(ne,arguments);return A.length===0?Hc(this):Rl(this,function(O,Y){return Y.some(function(ae){return O.indexOf(ae)===0})},A,Fo)},$r.prototype.anyOf=function(){var A=this,O=q.apply(ne,arguments),Y=this._cmp;try{O.sort(Y)}catch{return Ei(this,Ss)}if(O.length===0)return Hc(this);var ae=new this.Collection(this,function(){return Es(O[0],O[O.length-1])});ae._ondirectionchange=function(xe){Y=xe==="next"?A._ascending:A._descending,O.sort(Y)};var de=0;return ae._addAlgorithm(function(xe,Oe,Fe){for(var Ze=xe.key;0<Y(Ze,O[de]);)if(++de===O.length)return Oe(Fe),!1;return Y(Ze,O[de])===0||(Oe(function(){xe.continue(O[de])}),!1)}),ae},$r.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$r.prototype.noneOf=function(){var A=q.apply(ne,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return Ei(this,Ss)}var O=A.reduce(function(Y,ae){return Y?Y.concat([[Y[Y.length-1][1],ae]]):[[-1/0,ae]]},null);return O.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(O,{includeLowers:!1,includeUppers:!1})},$r.prototype.inAnyRange=function(ht,O){var Y=this,ae=this._cmp,de=this._ascending,xe=this._descending,Oe=this._min,Fe=this._max;if(ht.length===0)return Hc(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&de(bt[0],bt[1])<=0}))return Ei(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ve.InvalidArgument);var Ze=!O||O.includeLowers!==!1,Xe=O&&O.includeUppers===!0,rt,He=de;function st(bt,wt){return He(bt[0],wt[0])}try{(rt=ht.reduce(function(bt,wt){for(var kt=0,Vt=bt.length;kt<Vt;++kt){var Xt=bt[kt];if(ae(wt[0],Xt[1])<0&&0<ae(wt[1],Xt[0])){Xt[0]=Oe(Xt[0],wt[0]),Xt[1]=Fe(Xt[1],wt[1]);break}}return kt===Vt&&bt.push(wt),bt},[])).sort(st)}catch{return Ei(this,Ss)}var Ge=0,et=Xe?function(bt){return 0<de(bt,rt[Ge][1])}:function(bt){return 0<=de(bt,rt[Ge][1])},ot=Ze?function(bt){return 0<xe(bt,rt[Ge][0])}:function(bt){return 0<=xe(bt,rt[Ge][0])},Je=et,ht=new this.Collection(this,function(){return Es(rt[0][0],rt[rt.length-1][1],!Ze,!Xe)});return ht._ondirectionchange=function(bt){He=bt==="next"?(Je=et,de):(Je=ot,xe),rt.sort(st)},ht._addAlgorithm(function(bt,wt,kt){for(var Vt,Xt=bt.key;Je(Xt);)if(++Ge===rt.length)return wt(kt),!1;return!et(Vt=Xt)&&!ot(Vt)||(Y._cmp(Xt,rt[Ge][1])===0||Y._cmp(Xt,rt[Ge][0])===0||wt(function(){He===de?bt.continue(rt[Ge][0]):bt.continue(rt[Ge][1])}),!1)}),ht},$r.prototype.startsWithAnyOf=function(){var A=q.apply(ne,arguments);return A.every(function(O){return typeof O=="string"})?A.length===0?Hc(this):this.inAnyRange(A.map(function(O){return[O,O+Fo]})):Ei(this,"startsWithAnyOf() only works with strings")},$r);function $r(){}function ss(A){return Re(function(O){return jl(O),A(O.target.error),!1})}function jl(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var qc="storagemutated",Dl="x-storagemutated-1",ja=Bo(null,qc),Am=(si.prototype._lock=function(){return C(!Ne.global),++this._reculock,this._reculock!==1||Ne.global||(Ne.lockOwnerFor=this),this},si.prototype._unlock=function(){if(C(!Ne.global),--this._reculock==0)for(Ne.global||(Ne.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{Mo(A[1],A[0])}catch{}}return this},si.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},si.prototype.create=function(A){var O=this;if(!this.mode)return this;var Y=this.db.idbdb,ae=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!Y)switch(ae&&ae.name){case"DatabaseClosedError":throw new ve.DatabaseClosed(ae);case"MissingAPIError":throw new ve.MissingAPI(ae.message,ae);default:throw new ve.OpenFailed(ae)}if(!this.active)throw new ve.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||Y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(de){jl(de),O._reject(A.error)}),A.onabort=Re(function(de){jl(de),O.active&&O._reject(new ve.Abort(A.error)),O.active=!1,O.on("abort").fire(de)}),A.oncomplete=Re(function(){O.active=!1,O._resolve(),"mutatedParts"in A&&ja.storagemutated.fire(A.mutatedParts)}),this},si.prototype._promise=function(A,O,Y){var ae=this;if(A==="readwrite"&&this.mode!=="readwrite")return Zr(new ve.ReadOnly("Transaction is readonly"));if(!this.active)return Zr(new ve.TransactionInactive);if(this._locked())return new F(function(xe,Oe){ae._blockedFuncs.push([function(){ae._promise(A,O,Y).then(xe,Oe)},Ne])});if(Y)return en(function(){var xe=new F(function(Oe,Fe){ae._lock();var Ze=O(Oe,Fe,ae);Ze&&Ze.then&&Ze.then(Oe,Fe)});return xe.finally(function(){return ae._unlock()}),xe._lib=!0,xe});var de=new F(function(xe,Oe){var Fe=O(xe,Oe,ae);Fe&&Fe.then&&Fe.then(xe,Oe)});return de._lib=!0,de},si.prototype._root=function(){return this.parent?this.parent._root():this},si.prototype.waitFor=function(A){var O,Y=this._root(),ae=F.resolve(A);Y._waitingFor?Y._waitingFor=Y._waitingFor.then(function(){return ae}):(Y._waitingFor=ae,Y._waitingQueue=[],O=Y.idbtrans.objectStore(Y.storeNames[0]),function xe(){for(++Y._spinCount;Y._waitingQueue.length;)Y._waitingQueue.shift()();Y._waitingFor&&(O.get(-1/0).onsuccess=xe)}());var de=Y._waitingFor;return new F(function(xe,Oe){ae.then(function(Fe){return Y._waitingQueue.push(Re(xe.bind(null,Fe)))},function(Fe){return Y._waitingQueue.push(Re(Oe.bind(null,Fe)))}).finally(function(){Y._waitingFor===de&&(Y._waitingFor=null)})})},si.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ve.Abort))},si.prototype.table=function(A){var O=this._memoizedTables||(this._memoizedTables={});if(h(O,A))return O[A];var Y=this.schema[A];if(!Y)throw new ve.NotFound("Table "+A+" not part of transaction");return Y=new this.db.Table(A,Y,this),Y.core=this.db.core.table(A),O[A]=Y},si);function si(){}function Cs(A,O,Y,ae,de,xe,Oe){return{name:A,keyPath:O,unique:Y,multi:ae,auto:de,compound:xe,src:(Y&&!Oe?"&":"")+(ae?"*":"")+(de?"++":"")+Xf(O)}}function Xf(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function Gc(A,O,Y){return{name:A,primKey:O,indexes:Y,mappedClass:null,idxByName:(ae=function(de){return[de.name,de]},Y.reduce(function(de,xe,Oe){return Oe=ae(xe,Oe),Oe&&(de[Oe[0]]=Oe[1]),de},{}))};var ae}var Wc=function(A){try{return A.only([[]]),Wc=function(){return[[]]},[[]]}catch{return Wc=function(){return Fo},Fo}};function Kc(A){return A==null?function(){}:typeof A=="string"?(O=A).split(".").length===1?function(Y){return Y[O]}:function(Y){return I(Y,O)}:function(Y){return I(Y,A)};var O}function wd(A){return[].slice.call(A)}var bb=0;function ma(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function Ml(A,O,Ze){function ae(Je){if(Je.type===3)return null;if(Je.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Je.lower,et=Je.upper,ot=Je.lowerOpen,Je=Je.upperOpen;return Ge===void 0?et===void 0?null:O.upperBound(et,!!Je):et===void 0?O.lowerBound(Ge,!!ot):O.bound(Ge,et,!!ot,!!Je)}function de(st){var Ge,et=st.name;return{name:et,schema:st,mutate:function(ot){var Je=ot.trans,ht=ot.type,bt=ot.keys,wt=ot.values,kt=ot.range;return new Promise(function(Vt,Xt){Vt=Re(Vt);var $t=Je.objectStore(et),Gt=$t.keyPath==null,Jt=ht==="put"||ht==="add";if(!Jt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var zt,nn=(bt||wt||{length:1}).length;if(bt&&wt&&bt.length!==wt.length)throw new Error("Given keys array must have same length as given values array.");if(nn===0)return Vt({numFailures:0,failures:{},results:[],lastResult:void 0});function pn(Ma){++Xa,jl(Ma)}var gn=[],jn=[],Xa=0;if(ht==="deleteRange"){if(kt.type===4)return Vt({numFailures:Xa,failures:jn,results:[],lastResult:void 0});kt.type===3?gn.push(zt=$t.clear()):gn.push(zt=$t.delete(ae(kt)))}else{var Gt=Jt?Gt?[wt,bt]:[wt,null]:[bt,null],_n=Gt[0],sa=Gt[1];if(Jt)for(var ga=0;ga<nn;++ga)gn.push(zt=sa&&sa[ga]!==void 0?$t[ht](_n[ga],sa[ga]):$t[ht](_n[ga])),zt.onerror=pn;else for(ga=0;ga<nn;++ga)gn.push(zt=$t[ht](_n[ga])),zt.onerror=pn}function ao(Ma){Ma=Ma.target.result,gn.forEach(function(ks,Vo){return ks.error!=null&&(jn[Vo]=ks.error)}),Vt({numFailures:Xa,failures:jn,results:ht==="delete"?bt:gn.map(function(ks){return ks.result}),lastResult:Ma})}zt.onerror=function(Ma){pn(Ma),ao(Ma)},zt.onsuccess=ao})},getMany:function(ot){var Je=ot.trans,ht=ot.keys;return new Promise(function(bt,wt){bt=Re(bt);for(var kt,Vt=Je.objectStore(et),Xt=ht.length,$t=new Array(Xt),Gt=0,Jt=0,zt=function(gn){gn=gn.target,$t[gn._pos]=gn.result,++Jt===Gt&&bt($t)},nn=ss(wt),pn=0;pn<Xt;++pn)ht[pn]!=null&&((kt=Vt.get(ht[pn]))._pos=pn,kt.onsuccess=zt,kt.onerror=nn,++Gt);Gt===0&&bt($t)})},get:function(ot){var Je=ot.trans,ht=ot.key;return new Promise(function(bt,wt){bt=Re(bt);var kt=Je.objectStore(et).get(ht);kt.onsuccess=function(Vt){return bt(Vt.target.result)},kt.onerror=ss(wt)})},query:(Ge=Xe,function(ot){return new Promise(function(Je,ht){Je=Re(Je);var bt,wt,kt,Gt=ot.trans,Vt=ot.values,Xt=ot.limit,zt=ot.query,$t=Xt===1/0?void 0:Xt,Jt=zt.index,zt=zt.range,Gt=Gt.objectStore(et),Jt=Jt.isPrimaryKey?Gt:Gt.index(Jt.name),zt=ae(zt);if(Xt===0)return Je({result:[]});Ge?(($t=Vt?Jt.getAll(zt,$t):Jt.getAllKeys(zt,$t)).onsuccess=function(nn){return Je({result:nn.target.result})},$t.onerror=ss(ht)):(bt=0,wt=!Vt&&"openKeyCursor"in Jt?Jt.openKeyCursor(zt):Jt.openCursor(zt),kt=[],wt.onsuccess=function(nn){var pn=wt.result;return pn?(kt.push(Vt?pn.value:pn.primaryKey),++bt===Xt?Je({result:kt}):void pn.continue()):Je({result:kt})},wt.onerror=ss(ht))})}),openCursor:function(ot){var Je=ot.trans,ht=ot.values,bt=ot.query,wt=ot.reverse,kt=ot.unique;return new Promise(function(Vt,Xt){Vt=Re(Vt);var Jt=bt.index,$t=bt.range,Gt=Je.objectStore(et),Gt=Jt.isPrimaryKey?Gt:Gt.index(Jt.name),Jt=wt?kt?"prevunique":"prev":kt?"nextunique":"next",zt=!ht&&"openKeyCursor"in Gt?Gt.openKeyCursor(ae($t),Jt):Gt.openCursor(ae($t),Jt);zt.onerror=ss(Xt),zt.onsuccess=Re(function(nn){var pn,gn,jn,Xa,_n=zt.result;_n?(_n.___id=++bb,_n.done=!1,pn=_n.continue.bind(_n),gn=(gn=_n.continuePrimaryKey)&&gn.bind(_n),jn=_n.advance.bind(_n),Xa=function(){throw new Error("Cursor not stopped")},_n.trans=Je,_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=function(){throw new Error("Cursor not started")},_n.fail=Re(Xt),_n.next=function(){var sa=this,ga=1;return this.start(function(){return ga--?sa.continue():sa.stop()}).then(function(){return sa})},_n.start=function(sa){function ga(){if(zt.result)try{sa()}catch(Ma){_n.fail(Ma)}else _n.done=!0,_n.start=function(){throw new Error("Cursor behind last entry")},_n.stop()}var ao=new Promise(function(Ma,ks){Ma=Re(Ma),zt.onerror=ss(ks),_n.fail=ks,_n.stop=function(Vo){_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=Xa,Ma(Vo)}});return zt.onsuccess=Re(function(Ma){zt.onsuccess=ga,ga()}),_n.continue=pn,_n.continuePrimaryKey=gn,_n.advance=jn,ga(),ao},Vt(_n)):Vt(null)},Xt)})},count:function(ot){var Je=ot.query,ht=ot.trans,bt=Je.index,wt=Je.range;return new Promise(function(kt,Vt){var Xt=ht.objectStore(et),$t=bt.isPrimaryKey?Xt:Xt.index(bt.name),Xt=ae(wt),$t=Xt?$t.count(Xt):$t.count();$t.onsuccess=Re(function(Gt){return kt(Gt.target.result)}),$t.onerror=ss(Vt)})}}}var xe,Oe,Fe,rt=(Oe=Ze,Fe=wd((xe=A).objectStoreNames),{schema:{name:xe.name,tables:Fe.map(function(st){return Oe.objectStore(st)}).map(function(st){var Ge=st.keyPath,Je=st.autoIncrement,et=o(Ge),ot={},Je={name:st.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:et,keyPath:Ge,autoIncrement:Je,unique:!0,extractKey:Kc(Ge)},indexes:wd(st.indexNames).map(function(ht){return st.index(ht)}).map(function(kt){var bt=kt.name,wt=kt.unique,Vt=kt.multiEntry,kt=kt.keyPath,Vt={name:bt,compound:o(kt),keyPath:kt,unique:wt,multiEntry:Vt,extractKey:Kc(kt)};return ot[ma(kt)]=Vt}),getIndexByKeyPath:function(ht){return ot[ma(ht)]}};return ot[":id"]=Je.primaryKey,Ge!=null&&(ot[ma(Ge)]=Je.primaryKey),Je})},hasGetAll:0<Fe.length&&"getAll"in Oe.objectStore(Fe[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ze=rt.schema,Xe=rt.hasGetAll,rt=Ze.tables.map(de),He={};return rt.forEach(function(st){return He[st.name]=st}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(st){if(!He[st])throw new Error("Table '".concat(st,"' not found"));return He[st]},MIN_KEY:-1/0,MAX_KEY:Wc(O),schema:Ze}}function Jf(A,O,Y,ae){var de=Y.IDBKeyRange;return Y.indexedDB,{dbcore:(ae=Ml(O,de,ae),A.dbcore.reduce(function(xe,Oe){return Oe=Oe.create,r(r({},xe),Oe(xe))},ae))}}function $o(A,ae){var Y=ae.db,ae=Jf(A._middlewares,Y,A._deps,ae);A.core=ae.dbcore,A.tables.forEach(function(de){var xe=de.name;A.core.schema.tables.some(function(Oe){return Oe.name===xe})&&(de.core=A.core.table(xe),A[xe]instanceof A.Table&&(A[xe].core=de.core))})}function Qf(A,O,Y,ae){Y.forEach(function(de){var xe=ae[de];O.forEach(function(Oe){var Fe=function Ze(Xe,rt){return w(Xe,rt)||(Xe=u(Xe))&&Ze(Xe,rt)}(Oe,de);(!Fe||"value"in Fe&&Fe.value===void 0)&&(Oe===A.Transaction.prototype||Oe instanceof A.Transaction?v(Oe,de,{get:function(){return this.table(de)},set:function(Ze){g(this,de,{value:Ze,writable:!0,configurable:!0,enumerable:!0})}}):Oe[de]=new A.Table(de,xe))})})}function xd(A,O){O.forEach(function(Y){for(var ae in Y)Y[ae]instanceof A.Table&&delete Y[ae]})}function Nm(A,O){return A._cfg.version-O._cfg.version}function _d(A,O,Y,ae){var de=A._dbSchema;Y.objectStoreNames.contains("$meta")&&!de.$meta&&(de.$meta=Gc("$meta",wb("")[0],[]),A._storeNames.push("$meta"));var xe=A._createTransaction("readwrite",A._storeNames,de);xe.create(Y),xe._completion.catch(ae);var Oe=xe._reject.bind(xe),Fe=Ne.transless||Ne;en(function(){return Ne.trans=xe,Ne.transless=Fe,O!==0?($o(A,Y),Xe=O,((Ze=xe).storeNames.includes("$meta")?Ze.table("$meta").get("version").then(function(rt){return rt??Xe}):F.resolve(Xe)).then(function(rt){return st=rt,Ge=xe,et=Y,ot=[],rt=(He=A)._versions,Je=He._dbSchema=Zc(0,He.idbdb,et),(rt=rt.filter(function(ht){return ht._cfg.version>=st})).length!==0?(rt.forEach(function(ht){ot.push(function(){var bt=Je,wt=ht._cfg.dbschema;rh(He,bt,et),rh(He,wt,et),Je=He._dbSchema=wt;var kt=th(bt,wt);kt.add.forEach(function(Jt){Rm(et,Jt[0],Jt[1].primKey,Jt[1].indexes)}),kt.change.forEach(function(Jt){if(Jt.recreate)throw new ve.Upgrade("Not yet support for changing primary key");var zt=et.objectStore(Jt.name);Jt.add.forEach(function(nn){return nh(zt,nn)}),Jt.change.forEach(function(nn){zt.deleteIndex(nn.name),nh(zt,nn)}),Jt.del.forEach(function(nn){return zt.deleteIndex(nn)})});var Vt=ht._cfg.contentUpgrade;if(Vt&&ht._cfg.version>st){$o(He,et),Ge._memoizedTables={};var Xt=N(wt);kt.del.forEach(function(Jt){Xt[Jt]=bt[Jt]}),xd(He,[He.Transaction.prototype]),Qf(He,[He.Transaction.prototype],s(Xt),Xt),Ge.schema=Xt;var $t,Gt=J(Vt);return Gt&&In(),kt=F.follow(function(){var Jt;($t=Vt(Ge))&&Gt&&(Jt=Xn.bind(null,null),$t.then(Jt,Jt))}),$t&&typeof $t.then=="function"?F.resolve($t):kt.then(function(){return $t})}}),ot.push(function(bt){var wt,kt,Vt=ht._cfg.dbschema;wt=Vt,kt=bt,[].slice.call(kt.db.objectStoreNames).forEach(function(Xt){return wt[Xt]==null&&kt.db.deleteObjectStore(Xt)}),xd(He,[He.Transaction.prototype]),Qf(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),Ge.schema=He._dbSchema}),ot.push(function(bt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===ht._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(wt){return wt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?F.resolve(ot.shift()(Ge.idbtrans)).then(ht):F.resolve()}().then(function(){vb(Je,et)})):F.resolve();var He,st,Ge,et,ot,Je}).catch(Oe)):(s(de).forEach(function(rt){Rm(Y,rt,de[rt].primKey,de[rt].indexes)}),$o(A,Y),void F.follow(function(){return A.on.populate.fire(xe)}).catch(Oe));var Ze,Xe})}function eh(A,O){vb(A._dbSchema,O),O.db.version%10!=0||O.objectStoreNames.contains("$meta")||O.db.createObjectStore("$meta").add(Math.ceil(O.db.version/10-1),"version");var Y=Zc(0,A.idbdb,O);rh(A,A._dbSchema,O);for(var ae=0,de=th(Y,A._dbSchema).change;ae<de.length;ae++){var xe=function(Oe){if(Oe.change.length||Oe.recreate)return console.warn("Unable to patch indexes of table ".concat(Oe.name," because it has changes on the type of index or primary key.")),{value:void 0};var Fe=O.objectStore(Oe.name);Oe.add.forEach(function(Ze){Pe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Oe.name,".").concat(Ze.src)),nh(Fe,Ze)})}(de[ae]);if(typeof xe=="object")return xe.value}}function th(A,O){var Y,ae={del:[],add:[],change:[]};for(Y in A)O[Y]||ae.del.push(Y);for(Y in O){var de=A[Y],xe=O[Y];if(de){var Oe={name:Y,def:xe,recreate:!1,del:[],add:[],change:[]};if(""+(de.primKey.keyPath||"")!=""+(xe.primKey.keyPath||"")||de.primKey.auto!==xe.primKey.auto)Oe.recreate=!0,ae.change.push(Oe);else{var Fe=de.idxByName,Ze=xe.idxByName,Xe=void 0;for(Xe in Fe)Ze[Xe]||Oe.del.push(Xe);for(Xe in Ze){var rt=Fe[Xe],He=Ze[Xe];rt?rt.src!==He.src&&Oe.change.push(He):Oe.add.push(He)}(0<Oe.del.length||0<Oe.add.length||0<Oe.change.length)&&ae.change.push(Oe)}}else ae.add.push([Y,xe])}return ae}function Rm(A,O,Y,ae){var de=A.db.createObjectStore(O,Y.keyPath?{keyPath:Y.keyPath,autoIncrement:Y.auto}:{autoIncrement:Y.auto});return ae.forEach(function(xe){return nh(de,xe)}),de}function vb(A,O){s(A).forEach(function(Y){O.db.objectStoreNames.contains(Y)||(Pe&&console.debug("Dexie: Creating missing table",Y),Rm(O,Y,A[Y].primKey,A[Y].indexes))})}function nh(A,O){A.createIndex(O.name,O.keyPath,{unique:O.unique,multiEntry:O.multi})}function Zc(A,O,Y){var ae={};return _(O.objectStoreNames,0).forEach(function(de){for(var xe=Y.objectStore(de),Oe=Cs(Xf(Xe=xe.keyPath),Xe||"",!0,!1,!!xe.autoIncrement,Xe&&typeof Xe!="string",!0),Fe=[],Ze=0;Ze<xe.indexNames.length;++Ze){var rt=xe.index(xe.indexNames[Ze]),Xe=rt.keyPath,rt=Cs(rt.name,Xe,!!rt.unique,!!rt.multiEntry,!1,Xe&&typeof Xe!="string",!1);Fe.push(rt)}ae[de]=Gc(de,Oe,Fe)}),ae}function rh(A,O,Y){for(var ae=Y.db.objectStoreNames,de=0;de<ae.length;++de){var xe=ae[de],Oe=Y.objectStore(xe);A._hasGetAll="getAll"in Oe;for(var Fe=0;Fe<Oe.indexNames.length;++Fe){var Ze=Oe.indexNames[Fe],Xe=Oe.index(Ze).keyPath,rt=typeof Xe=="string"?Xe:"["+_(Xe).join("+")+"]";!O[xe]||(Xe=O[xe].idxByName[rt])&&(Xe.name=Ze,delete O[xe].idxByName[rt],O[xe].idxByName[Ze]=Xe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function wb(A){return A.split(",").map(function(O,Y){var ae=(O=O.trim()).replace(/([&*]|\+\+)/g,""),de=/^\[/.test(ae)?ae.match(/^\[(.*)\]$/)[1].split("+"):ae;return Cs(ae,de||null,/\&/.test(O),/\*/.test(O),/\+\+/.test(O),o(de),Y===0)})}var nS=(ah.prototype._parseStoresSpec=function(A,O){s(A).forEach(function(Y){if(A[Y]!==null){var ae=wb(A[Y]),de=ae.shift();if(de.unique=!0,de.multi)throw new ve.Schema("Primary key cannot be multi-valued");ae.forEach(function(xe){if(xe.auto)throw new ve.Schema("Only primary key can be marked as autoIncrement (++)");if(!xe.keyPath)throw new ve.Schema("Index must have a name and cannot be an empty string")}),O[Y]=Gc(Y,de,ae)}})},ah.prototype.stores=function(Y){var O=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Y):Y;var Y=O._versions,ae={},de={};return Y.forEach(function(xe){l(ae,xe._cfg.storesSource),de=xe._cfg.dbschema={},xe._parseStoresSpec(ae,de)}),O._dbSchema=de,xd(O,[O._allTables,O,O.Transaction.prototype]),Qf(O,[O._allTables,O,O.Transaction.prototype,this._cfg.tables],s(de),de),O._storeNames=s(de),this},ah.prototype.upgrade=function(A){return this._cfg.contentUpgrade=Se(this._cfg.contentUpgrade||Ve,A),this},ah);function ah(){}function Im(A,O){var Y=A._dbNamesDB;return Y||(Y=A._dbNamesDB=new Ts(kl,{addons:[],indexedDB:A,IDBKeyRange:O})).version(1).stores({dbnames:"name"}),Y.table("dbnames")}function ih(A){return A&&typeof A.databases=="function"}function jm(A){return en(function(){return Ne.letThrough=!0,A()})}function Dm(A){return!("from"in A)}var Da=function(A,O){if(!this){var Y=new Da;return A&&"d"in A&&l(Y,A),Y}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?O:A}:{d:0})};function Sd(A,O,Y){var ae=Jn(O,Y);if(!isNaN(ae)){if(0<ae)throw RangeError();if(Dm(A))return l(A,{from:O,to:Y,d:1});var de=A.l,ae=A.r;if(Jn(Y,A.from)<0)return de?Sd(de,O,Y):A.l={from:O,to:Y,d:1,l:null,r:null},_b(A);if(0<Jn(O,A.to))return ae?Sd(ae,O,Y):A.r={from:O,to:Y,d:1,l:null,r:null},_b(A);Jn(O,A.from)<0&&(A.from=O,A.l=null,A.d=ae?ae.d+1:1),0<Jn(Y,A.to)&&(A.to=Y,A.r=null,A.d=A.l?A.l.d+1:1),Y=!A.r,de&&!A.l&&Ol(A,de),ae&&Y&&Ol(A,ae)}}function Ol(A,O){Dm(O)||function Y(ae,Ze){var xe=Ze.from,Oe=Ze.to,Fe=Ze.l,Ze=Ze.r;Sd(ae,xe,Oe),Fe&&Y(ae,Fe),Ze&&Y(ae,Ze)}(A,O)}function xb(A,O){var Y=sh(O),ae=Y.next();if(ae.done)return!1;for(var de=ae.value,xe=sh(A),Oe=xe.next(de.from),Fe=Oe.value;!ae.done&&!Oe.done;){if(Jn(Fe.from,de.to)<=0&&0<=Jn(Fe.to,de.from))return!0;Jn(de.from,Fe.from)<0?de=(ae=Y.next(Fe.from)).value:Fe=(Oe=xe.next(de.from)).value}return!1}function sh(A){var O=Dm(A)?null:{s:0,n:A};return{next:function(Y){for(var ae=0<arguments.length;O;)switch(O.s){case 0:if(O.s=1,ae)for(;O.n.l&&Jn(Y,O.n.from)<0;)O={up:O,n:O.n.l,s:1};else for(;O.n.l;)O={up:O,n:O.n.l,s:1};case 1:if(O.s=2,!ae||Jn(Y,O.n.to)<=0)return{value:O.n,done:!1};case 2:if(O.n.r){O.s=3,O={up:O,n:O.n.r,s:0};continue}case 3:O=O.up}return{done:!0}}}}function _b(A){var O,Y,ae=(((O=A.r)===null||O===void 0?void 0:O.d)||0)-(((Y=A.l)===null||Y===void 0?void 0:Y.d)||0),de=1<ae?"r":ae<-1?"l":"";de&&(O=de=="r"?"l":"r",Y=r({},A),ae=A[de],A.from=ae.from,A.to=ae.to,A[de]=ae[de],Y[de]=ae[O],(A[O]=Y).d=Mm(Y)),A.d=Mm(A)}function Mm(Y){var O=Y.r,Y=Y.l;return(O?Y?Math.max(O.d,Y.d):O.d:Y?Y.d:0)+1}function oh(A,O){return s(O).forEach(function(Y){A[Y]?Ol(A[Y],O[Y]):A[Y]=function ae(de){var xe,Oe,Fe={};for(xe in de)h(de,xe)&&(Oe=de[xe],Fe[xe]=!Oe||typeof Oe!="object"||H.has(Oe.constructor)?Oe:ae(Oe));return Fe}(O[Y])}),A}function Om(A,O){return A.all||O.all||Object.keys(A).some(function(Y){return O[Y]&&xb(O[Y],A[Y])})}m(Da.prototype,((Ci={add:function(A){return Ol(this,A),this},addKey:function(A){return Sd(this,A,A),this},addKeys:function(A){var O=this;return A.forEach(function(Y){return Sd(O,Y,Y)}),this},hasKey:function(A){var O=sh(this).next(A).value;return O&&Jn(O.from,A)<=0&&0<=Jn(O.to,A)}})[ie]=function(){return sh(this)},Ci));var Pl={},Pm={},Fm=!1;function lh(A){oh(Pm,A),Fm||(Fm=!0,setTimeout(function(){Fm=!1,Lm(Pm,!(Pm={}))},0))}function Lm(A,O){O===void 0&&(O=!1);var Y=new Set;if(A.all)for(var ae=0,de=Object.values(Pl);ae<de.length;ae++)Sb(Oe=de[ae],A,Y,O);else for(var xe in A){var Oe,Fe=/^idb\:\/\/(.*)\/(.*)\//.exec(xe);Fe&&(xe=Fe[1],Fe=Fe[2],(Oe=Pl["idb://".concat(xe,"/").concat(Fe)])&&Sb(Oe,A,Y,O))}Y.forEach(function(Ze){return Ze()})}function Sb(A,O,Y,ae){for(var de=[],xe=0,Oe=Object.entries(A.queries.query);xe<Oe.length;xe++){for(var Fe=Oe[xe],Ze=Fe[0],Xe=[],rt=0,He=Fe[1];rt<He.length;rt++){var st=He[rt];Om(O,st.obsSet)?st.subscribers.forEach(function(Je){return Y.add(Je)}):ae&&Xe.push(st)}ae&&de.push([Ze,Xe])}if(ae)for(var Ge=0,et=de;Ge<et.length;Ge++){var ot=et[Ge],Ze=ot[0],Xe=ot[1];A.queries.query[Ze]=Xe}}function rS(A){var O=A._state,Y=A._deps.indexedDB;if(O.isBeingOpened||A.idbdb)return O.dbReadyPromise.then(function(){return O.dbOpenError?Zr(O.dbOpenError):A});O.isBeingOpened=!0,O.dbOpenError=null,O.openComplete=!1;var ae=O.openCanceller,de=Math.round(10*A.verno),xe=!1;function Oe(){if(O.openCanceller!==ae)throw new ve.DatabaseClosed("db.open() was cancelled")}function Fe(){return new F(function(st,Ge){if(Oe(),!Y)throw new ve.MissingAPI;var et=A.name,ot=O.autoSchema||!de?Y.open(et):Y.open(et,de);if(!ot)throw new ve.MissingAPI;ot.onerror=ss(Ge),ot.onblocked=Re(A._fireOnBlocked),ot.onupgradeneeded=Re(function(Je){var ht;rt=ot.transaction,O.autoSchema&&!A._options.allowEmptyDB?(ot.onerror=jl,rt.abort(),ot.result.close(),(ht=Y.deleteDatabase(et)).onsuccess=ht.onerror=Re(function(){Ge(new ve.NoSuchDatabase("Database ".concat(et," doesnt exist")))})):(rt.onerror=ss(Ge),Je=Je.oldVersion>Math.pow(2,62)?0:Je.oldVersion,He=Je<1,A.idbdb=ot.result,xe&&eh(A,rt),_d(A,Je/10,rt,Ge))},Ge),ot.onsuccess=Re(function(){rt=null;var Je,ht,bt,wt,kt,Vt=A.idbdb=ot.result,Xt=_(Vt.objectStoreNames);if(0<Xt.length)try{var $t=Vt.transaction((wt=Xt).length===1?wt[0]:wt,"readonly");if(O.autoSchema)ht=Vt,bt=$t,(Je=A).verno=ht.version/10,bt=Je._dbSchema=Zc(0,ht,bt),Je._storeNames=_(ht.objectStoreNames,0),Qf(Je,[Je._allTables],s(bt),bt);else if(rh(A,A._dbSchema,$t),((kt=th(Zc(0,(kt=A).idbdb,$t),kt._dbSchema)).add.length||kt.change.some(function(Gt){return Gt.add.length||Gt.change.length}))&&!xe)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Vt.close(),de=Vt.version+1,xe=!0,st(Fe());$o(A,$t)}catch{}no.push(A),Vt.onversionchange=Re(function(Gt){O.vcFired=!0,A.on("versionchange").fire(Gt)}),Vt.onclose=Re(function(Gt){A.on("close").fire(Gt)}),He&&(kt=A._deps,$t=et,Vt=kt.indexedDB,kt=kt.IDBKeyRange,ih(Vt)||$t===kl||Im(Vt,kt).put({name:$t}).catch(Ve)),st()},Ge)}).catch(function(st){switch(st==null?void 0:st.name){case"UnknownError":if(0<O.PR1398_maxLoop)return O.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Fe();break;case"VersionError":if(0<de)return de=0,Fe()}return F.reject(st)})}var Ze,Xe=O.dbReadyResolve,rt=null,He=!1;return F.race([ae,(typeof navigator>"u"?F.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(st){function Ge(){return indexedDB.databases().finally(st)}Ze=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(Ze)}):Promise.resolve()).then(Fe)]).then(function(){return Oe(),O.onReadyBeingFired=[],F.resolve(jm(function(){return A.on.ready.fire(A.vip)})).then(function st(){if(0<O.onReadyBeingFired.length){var Ge=O.onReadyBeingFired.reduce(Se,Ve);return O.onReadyBeingFired=[],F.resolve(jm(function(){return Ge(A.vip)})).then(st)}})}).finally(function(){O.openCanceller===ae&&(O.onReadyBeingFired=null,O.isBeingOpened=!1)}).catch(function(st){O.dbOpenError=st;try{rt&&rt.abort()}catch{}return ae===O.openCanceller&&A._close(),Zr(st)}).finally(function(){O.openComplete=!0,Xe()}).then(function(){var st;return He&&(st={},A.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(et){et.name&&(st["idb://".concat(A.name,"/").concat(Ge.name,"/").concat(et.name)]=new Da(-1/0,[[[]]]))}),st["idb://".concat(A.name,"/").concat(Ge.name,"/")]=st["idb://".concat(A.name,"/").concat(Ge.name,"/:dels")]=new Da(-1/0,[[[]]])}),ja(qc).fire(st),Lm(st,!0)),A})}function Ed(A){function O(xe){return A.next(xe)}var Y=de(O),ae=de(function(xe){return A.throw(xe)});function de(xe){return function(Ze){var Fe=xe(Ze),Ze=Fe.value;return Fe.done?Ze:Ze&&typeof Ze.then=="function"?Ze.then(Y,ae):o(Ze)?Promise.all(Ze).then(Y,ae):Y(Ze)}}return de(O)()}function zo(A,O,Y){for(var ae=o(A)?A.slice():[A],de=0;de<Y;++de)ae.push(O);return ae}var aS={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(O){var Y=A.table(O),ae=Y.schema,de={},xe=[];function Oe(He,st,Ge){var et=ma(He),ot=de[et]=de[et]||[],Je=He==null?0:typeof He=="string"?1:He.length,ht=0<st,ht=r(r({},Ge),{name:ht?"".concat(et,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:ht,keyTail:st,keyLength:Je,extractKey:Kc(He),unique:!ht&&Ge.unique});return ot.push(ht),ht.isPrimaryKey||xe.push(ht),1<Je&&Oe(Je===2?He[0]:He.slice(0,Je-1),st+1,Ge),ot.sort(function(bt,wt){return bt.keyTail-wt.keyTail}),ht}O=Oe(ae.primaryKey.keyPath,0,ae.primaryKey),de[":id"]=[O];for(var Fe=0,Ze=ae.indexes;Fe<Ze.length;Fe++){var Xe=Ze[Fe];Oe(Xe.keyPath,0,Xe)}function rt(He){var st,Ge=He.query.index;return Ge.isVirtual?r(r({},He),{query:{index:Ge.lowLevelIndex,range:(st=He.query.range,Ge=Ge.keyTail,{type:st.type===1?2:st.type,lower:zo(st.lower,st.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ge),lowerOpen:!0,upper:zo(st.upper,st.upperOpen?A.MIN_KEY:A.MAX_KEY,Ge),upperOpen:!0})}}):He}return r(r({},Y),{schema:r(r({},ae),{primaryKey:O,indexes:xe,getIndexByKeyPath:function(He){return(He=de[ma(He)])&&He[0]}}),count:function(He){return Y.count(rt(He))},query:function(He){return Y.query(rt(He))},openCursor:function(He){var st=He.query.index,Ge=st.keyTail,et=st.isVirtual,ot=st.keyLength;return et?Y.openCursor(rt(He)).then(function(ht){return ht&&Je(ht)}):Y.openCursor(He);function Je(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue(zo(bt,He.reverse?A.MAX_KEY:A.MIN_KEY,Ge)):He.unique?ht.continue(ht.key.slice(0,ot).concat(He.reverse?A.MIN_KEY:A.MAX_KEY,Ge)):ht.continue()}},continuePrimaryKey:{value:function(bt,wt){ht.continuePrimaryKey(zo(bt,A.MAX_KEY,Ge),wt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function ch(A,O,Y,ae){return Y=Y||{},ae=ae||"",s(A).forEach(function(de){var xe,Oe,Fe;h(O,de)?(xe=A[de],Oe=O[de],typeof xe=="object"&&typeof Oe=="object"&&xe&&Oe?(Fe=se(xe))!==se(Oe)?Y[ae+de]=O[de]:Fe==="Object"?ch(xe,Oe,Y,ae+de+"."):xe!==Oe&&(Y[ae+de]=O[de]):xe!==Oe&&(Y[ae+de]=O[de])):Y[ae+de]=void 0}),s(O).forEach(function(de){h(A,de)||(Y[ae+de]=O[de])}),Y}function uh(A,O){return O.type==="delete"?O.keys:O.keys||O.values.map(A.extractKey)}var Eb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(O){var Y=A.table(O),ae=Y.schema.primaryKey;return r(r({},Y),{mutate:function(de){var xe=Ne.trans,Oe=xe.table(O).hook,Fe=Oe.deleting,Ze=Oe.creating,Xe=Oe.updating;switch(de.type){case"add":if(Ze.fire===Ve)break;return xe._promise("readwrite",function(){return rt(de)},!0);case"put":if(Ze.fire===Ve&&Xe.fire===Ve)break;return xe._promise("readwrite",function(){return rt(de)},!0);case"delete":if(Fe.fire===Ve)break;return xe._promise("readwrite",function(){return rt(de)},!0);case"deleteRange":if(Fe.fire===Ve)break;return xe._promise("readwrite",function(){return function He(st,Ge,et){return Y.query({trans:st,values:!1,query:{index:ae,range:Ge},limit:et}).then(function(ot){var Je=ot.result;return rt({type:"delete",keys:Je,trans:st}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Je.length<et?{failures:[],numFailures:0,lastResult:void 0}:He(st,r(r({},Ge),{lower:Je[Je.length-1],lowerOpen:!0}),et)})})}(de.trans,de.range,1e4)},!0)}return Y.mutate(de);function rt(He){var st,Ge,et,ot=Ne.trans,Je=He.keys||uh(ae,He);if(!Je)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Je}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),st=Y,et=Je,((Ge=He).type==="add"?Promise.resolve([]):st.getMany({trans:Ge.trans,keys:et,cache:"immutable"})).then(function(ht){var bt=Je.map(function(wt,kt){var Vt,Xt,$t,Gt=ht[kt],Jt={onerror:null,onsuccess:null};return He.type==="delete"?Fe.fire.call(Jt,wt,Gt,ot):He.type==="add"||Gt===void 0?(Vt=Ze.fire.call(Jt,wt,He.values[kt],ot),wt==null&&Vt!=null&&(He.keys[kt]=wt=Vt,ae.outbound||j(He.values[kt],ae.keyPath,wt))):(Vt=ch(Gt,He.values[kt]),(Xt=Xe.fire.call(Jt,Vt,wt,Gt,ot))&&($t=He.values[kt],Object.keys(Xt).forEach(function(zt){h($t,zt)?$t[zt]=Xt[zt]:j($t,zt,Xt[zt])}))),Jt});return Y.mutate(He).then(function(wt){for(var kt=wt.failures,Vt=wt.results,Xt=wt.numFailures,wt=wt.lastResult,$t=0;$t<Je.length;++$t){var Gt=(Vt||Je)[$t],Jt=bt[$t];Gt==null?Jt.onerror&&Jt.onerror(kt[$t]):Jt.onsuccess&&Jt.onsuccess(He.type==="put"&&ht[$t]?He.values[$t]:Gt)}return{failures:kt,results:Vt,numFailures:Xt,lastResult:wt}}).catch(function(wt){return bt.forEach(function(kt){return kt.onerror&&kt.onerror(wt)}),Promise.reject(wt)})})}}})}})}};function Bm(A,O,Y){try{if(!O||O.keys.length<A.length)return null;for(var ae=[],de=0,xe=0;de<O.keys.length&&xe<A.length;++de)Jn(O.keys[de],A[xe])===0&&(ae.push(Y?K(O.values[de]):O.values[de]),++xe);return ae.length===A.length?ae:null}catch{return null}}var Cb={stack:"dbcore",level:-1,create:function(A){return{table:function(O){var Y=A.table(O);return r(r({},Y),{getMany:function(ae){if(!ae.cache)return Y.getMany(ae);var de=Bm(ae.keys,ae.trans._cache,ae.cache==="clone");return de?F.resolve(de):Y.getMany(ae).then(function(xe){return ae.trans._cache={keys:ae.keys,values:ae.cache==="clone"?K(xe):xe},xe})},mutate:function(ae){return ae.type!=="add"&&(ae.trans._cache=null),Y.mutate(ae)}})}}}};function Fl(A,O){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!O.schema.primaryKey.outbound}function Tb(A,O){switch(A){case"query":return O.values&&!O.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var iS={stack:"dbcore",level:0,name:"Observability",create:function(A){var O=A.schema.name,Y=new Da(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(ae,de,xe){if(Ne.subscr&&de!=="readonly")throw new ve.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return A.transaction(ae,de,xe)},table:function(ae){var de=A.table(ae),xe=de.schema,Oe=xe.primaryKey,He=xe.indexes,Fe=Oe.extractKey,Ze=Oe.outbound,Xe=Oe.autoIncrement&&He.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(Oe.keyPath)}),rt=r(r({},de),{mutate:function(Ge){function et(zt){return zt="idb://".concat(O,"/").concat(ae,"/").concat(zt),wt[zt]||(wt[zt]=new Da)}var ot,Je,ht,bt=Ge.trans,wt=Ge.mutatedParts||(Ge.mutatedParts={}),kt=et(""),Vt=et(":dels"),Xt=Ge.type,Jt=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[uh(Oe,Ge).filter(function(zt){return zt}),Ge.values]:[],$t=Jt[0],Gt=Jt[1],Jt=Ge.trans._cache;return o($t)?(kt.addKeys($t),(Jt=Xt==="delete"||$t.length===Gt.length?Bm($t,Jt):null)||Vt.addKeys($t),(Jt||Gt)&&(ot=et,Je=Jt,ht=Gt,xe.indexes.forEach(function(zt){var nn=ot(zt.name||"");function pn(jn){return jn!=null?zt.extractKey(jn):null}function gn(jn){return zt.multiEntry&&o(jn)?jn.forEach(function(Xa){return nn.addKey(Xa)}):nn.addKey(jn)}(Je||ht).forEach(function(jn,sa){var _n=Je&&pn(Je[sa]),sa=ht&&pn(ht[sa]);Jn(_n,sa)!==0&&(_n!=null&&gn(_n),sa!=null&&gn(sa))})}))):$t?(Gt={from:(Gt=$t.lower)!==null&&Gt!==void 0?Gt:A.MIN_KEY,to:(Gt=$t.upper)!==null&&Gt!==void 0?Gt:A.MAX_KEY},Vt.add(Gt),kt.add(Gt)):(kt.add(Y),Vt.add(Y),xe.indexes.forEach(function(zt){return et(zt.name).add(Y)})),de.mutate(Ge).then(function(zt){return!$t||Ge.type!=="add"&&Ge.type!=="put"||(kt.addKeys(zt.results),Xe&&Xe.forEach(function(nn){for(var pn=Ge.values.map(function(_n){return nn.extractKey(_n)}),gn=nn.keyPath.findIndex(function(_n){return _n===Oe.keyPath}),jn=0,Xa=zt.results.length;jn<Xa;++jn)pn[jn][gn]=zt.results[jn];et(nn.name).addKeys(pn)})),bt.mutatedParts=oh(bt.mutatedParts||{},wt),zt})}}),He=function(et){var ot=et.query,et=ot.index,ot=ot.range;return[et,new Da((et=ot.lower)!==null&&et!==void 0?et:A.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:A.MAX_KEY)]},st={get:function(Ge){return[Oe,new Da(Ge.key)]},getMany:function(Ge){return[Oe,new Da().addKeys(Ge.keys)]},count:He,query:He,openCursor:He};return s(st).forEach(function(Ge){rt[Ge]=function(et){var ot=Ne.subscr,Je=!!ot,ht=Fl(Ne,de)&&Tb(Ge,et)?et.obsSet={}:ot;if(Je){var bt=function(Gt){return Gt="idb://".concat(O,"/").concat(ae,"/").concat(Gt),ht[Gt]||(ht[Gt]=new Da)},wt=bt(""),kt=bt(":dels"),ot=st[Ge](et),Je=ot[0],ot=ot[1];if((Ge==="query"&&Je.isPrimaryKey&&!et.values?kt:bt(Je.name||"")).add(ot),!Je.isPrimaryKey){if(Ge!=="count"){var Vt=Ge==="query"&&Ze&&et.values&&de.query(r(r({},et),{values:!1}));return de[Ge].apply(this,arguments).then(function(Gt){if(Ge==="query"){if(Ze&&et.values)return Vt.then(function(pn){return pn=pn.result,wt.addKeys(pn),Gt});var Jt=et.values?Gt.result.map(Fe):Gt.result;(et.values?wt:kt).addKeys(Jt)}else if(Ge==="openCursor"){var zt=Gt,nn=et.values;return zt&&Object.create(zt,{key:{get:function(){return kt.addKey(zt.primaryKey),zt.key}},primaryKey:{get:function(){var pn=zt.primaryKey;return kt.addKey(pn),pn}},value:{get:function(){return nn&&wt.addKey(zt.primaryKey),zt.value}}})}return Gt})}kt.add(Y)}}return de[Ge].apply(this,arguments)}}),rt}})}};function kb(A,O,Y){if(Y.numFailures===0)return O;if(O.type==="deleteRange")return null;var ae=O.keys?O.keys.length:"values"in O&&O.values?O.values.length:1;return Y.numFailures===ae?null:(O=r({},O),o(O.keys)&&(O.keys=O.keys.filter(function(de,xe){return!(xe in Y.failures)})),"values"in O&&o(O.values)&&(O.values=O.values.filter(function(de,xe){return!(xe in Y.failures)})),O)}function dh(A,O){return Y=A,((ae=O).lower===void 0||(ae.lowerOpen?0<Jn(Y,ae.lower):0<=Jn(Y,ae.lower)))&&(A=A,(O=O).upper===void 0||(O.upperOpen?Jn(A,O.upper)<0:Jn(A,O.upper)<=0));var Y,ae}function $m(A,O,st,ae,de,xe){if(!st||st.length===0)return A;var Oe=O.query.index,Fe=Oe.multiEntry,Ze=O.query.range,Xe=ae.schema.primaryKey.extractKey,rt=Oe.extractKey,He=(Oe.lowLevelIndex||Oe).extractKey,st=st.reduce(function(Ge,et){var ot=Ge,Je=[];if(et.type==="add"||et.type==="put")for(var ht=new Da,bt=et.values.length-1;0<=bt;--bt){var wt,kt=et.values[bt],Vt=Xe(kt);ht.hasKey(Vt)||(wt=rt(kt),(Fe&&o(wt)?wt.some(function(zt){return dh(zt,Ze)}):dh(wt,Ze))&&(ht.addKey(Vt),Je.push(kt)))}switch(et.type){case"add":var Xt=new Da().addKeys(O.values?Ge.map(function(nn){return Xe(nn)}):Ge),ot=Ge.concat(O.values?Je.filter(function(nn){return nn=Xe(nn),!Xt.hasKey(nn)&&(Xt.addKey(nn),!0)}):Je.map(function(nn){return Xe(nn)}).filter(function(nn){return!Xt.hasKey(nn)&&(Xt.addKey(nn),!0)}));break;case"put":var $t=new Da().addKeys(et.values.map(function(nn){return Xe(nn)}));ot=Ge.filter(function(nn){return!$t.hasKey(O.values?Xe(nn):nn)}).concat(O.values?Je:Je.map(function(nn){return Xe(nn)}));break;case"delete":var Gt=new Da().addKeys(et.keys);ot=Ge.filter(function(nn){return!Gt.hasKey(O.values?Xe(nn):nn)});break;case"deleteRange":var Jt=et.range;ot=Ge.filter(function(nn){return!dh(Xe(nn),Jt)})}return ot},A);return st===A?A:(st.sort(function(Ge,et){return Jn(He(Ge),He(et))||Jn(Xe(Ge),Xe(et))}),O.limit&&O.limit<1/0&&(st.length>O.limit?st.length=O.limit:A.length===O.limit&&st.length<O.limit&&(de.dirty=!0)),xe?Object.freeze(st):st)}function Yc(A,O){return Jn(A.lower,O.lower)===0&&Jn(A.upper,O.upper)===0&&!!A.lowerOpen==!!O.lowerOpen&&!!A.upperOpen==!!O.upperOpen}function Cd(A,O){return function(Y,ae,de,xe){if(Y===void 0)return ae!==void 0?-1:0;if(ae===void 0)return 1;if((ae=Jn(Y,ae))===0){if(de&&xe)return 0;if(de)return 1;if(xe)return-1}return ae}(A.lower,O.lower,A.lowerOpen,O.lowerOpen)<=0&&0<=function(Y,ae,de,xe){if(Y===void 0)return ae!==void 0?1:0;if(ae===void 0)return-1;if((ae=Jn(Y,ae))===0){if(de&&xe)return 0;if(de)return-1;if(xe)return 1}return ae}(A.upper,O.upper,A.upperOpen,O.upperOpen)}function sS(A,O,Y,ae){A.subscribers.add(Y),ae.addEventListener("abort",function(){var de,xe;A.subscribers.delete(Y),A.subscribers.size===0&&(de=A,xe=O,setTimeout(function(){de.subscribers.size===0&&X(xe,de)},3e3))})}var fh={stack:"dbcore",level:0,name:"Cache",create:function(A){var O=A.schema.name;return r(r({},A),{transaction:function(Y,ae,de){var xe,Oe,Fe=A.transaction(Y,ae,de);return ae==="readwrite"&&(Oe=(xe=new AbortController).signal,de=function(Ze){return function(){if(xe.abort(),ae==="readwrite"){for(var Xe=new Set,rt=0,He=Y;rt<He.length;rt++){var st=He[rt],Ge=Pl["idb://".concat(O,"/").concat(st)];if(Ge){var et=A.table(st),ot=Ge.optimisticOps.filter(function(nn){return nn.trans===Fe});if(Fe._explicit&&Ze&&Fe.mutatedParts)for(var Je=0,ht=Object.values(Ge.queries.query);Je<ht.length;Je++)for(var bt=0,wt=(Xt=ht[Je]).slice();bt<wt.length;bt++)Om(($t=wt[bt]).obsSet,Fe.mutatedParts)&&(X(Xt,$t),$t.subscribers.forEach(function(nn){return Xe.add(nn)}));else if(0<ot.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(nn){return nn.trans!==Fe});for(var kt=0,Vt=Object.values(Ge.queries.query);kt<Vt.length;kt++)for(var Xt,$t,Gt,Jt=0,zt=(Xt=Vt[kt]).slice();Jt<zt.length;Jt++)($t=zt[Jt]).res!=null&&Fe.mutatedParts&&(Ze&&!$t.dirty?(Gt=Object.isFrozen($t.res),Gt=$m($t.res,$t.req,ot,et,$t,Gt),$t.dirty?(X(Xt,$t),$t.subscribers.forEach(function(nn){return Xe.add(nn)})):Gt!==$t.res&&($t.res=Gt,$t.promise=F.resolve({result:Gt}))):($t.dirty&&X(Xt,$t),$t.subscribers.forEach(function(nn){return Xe.add(nn)})))}}}Xe.forEach(function(nn){return nn()})}}},Fe.addEventListener("abort",de(!1),{signal:Oe}),Fe.addEventListener("error",de(!1),{signal:Oe}),Fe.addEventListener("complete",de(!0),{signal:Oe})),Fe},table:function(Y){var ae=A.table(Y),de=ae.schema.primaryKey;return r(r({},ae),{mutate:function(xe){var Oe=Ne.trans;if(de.outbound||Oe.db._options.cache==="disabled"||Oe.explicit||Oe.idbtrans.mode!=="readwrite")return ae.mutate(xe);var Fe=Pl["idb://".concat(O,"/").concat(Y)];return Fe?(Oe=ae.mutate(xe),xe.type!=="add"&&xe.type!=="put"||!(50<=xe.values.length||uh(de,xe).some(function(Ze){return Ze==null}))?(Fe.optimisticOps.push(xe),xe.mutatedParts&&lh(xe.mutatedParts),Oe.then(function(Ze){0<Ze.numFailures&&(X(Fe.optimisticOps,xe),(Ze=kb(0,xe,Ze))&&Fe.optimisticOps.push(Ze),xe.mutatedParts&&lh(xe.mutatedParts))}),Oe.catch(function(){X(Fe.optimisticOps,xe),xe.mutatedParts&&lh(xe.mutatedParts)})):Oe.then(function(Ze){var Xe=kb(0,r(r({},xe),{values:xe.values.map(function(rt,He){var st;return Ze.failures[He]?rt:(rt=(st=de.keyPath)!==null&&st!==void 0&&st.includes(".")?K(rt):r({},rt),j(rt,de.keyPath,Ze.results[He]),rt)})}),Ze);Fe.optimisticOps.push(Xe),queueMicrotask(function(){return xe.mutatedParts&&lh(xe.mutatedParts)})}),Oe):ae.mutate(xe)},query:function(xe){if(!Fl(Ne,ae)||!Tb("query",xe))return ae.query(xe);var Oe=((Xe=Ne.trans)===null||Xe===void 0?void 0:Xe.db._options.cache)==="immutable",He=Ne,Fe=He.requery,Ze=He.signal,Xe=function(et,ot,Je,ht){var bt=Pl["idb://".concat(et,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Je]))return[null,!1,bt,null];var wt=ot[(ht.query?ht.query.index.name:null)||""];if(!wt)return[null,!1,bt,null];switch(Je){case"query":var kt=wt.find(function(Vt){return Vt.req.limit===ht.limit&&Vt.req.values===ht.values&&Yc(Vt.req.query.range,ht.query.range)});return kt?[kt,!0,bt,wt]:[wt.find(function(Vt){return("limit"in Vt.req?Vt.req.limit:1/0)>=ht.limit&&(!ht.values||Vt.req.values)&&Cd(Vt.req.query.range,ht.query.range)}),!1,bt,wt];case"count":return kt=wt.find(function(Vt){return Yc(Vt.req.query.range,ht.query.range)}),[kt,!!kt,bt,wt]}}(O,Y,"query",xe),rt=Xe[0],He=Xe[1],st=Xe[2],Ge=Xe[3];return rt&&He?rt.obsSet=xe.obsSet:(He=ae.query(xe).then(function(et){var ot=et.result;if(rt&&(rt.res=ot),Oe){for(var Je=0,ht=ot.length;Je<ht;++Je)Object.freeze(ot[Je]);Object.freeze(ot)}else et.result=K(ot);return et}).catch(function(et){return Ge&&rt&&X(Ge,rt),Promise.reject(et)}),rt={obsSet:xe.obsSet,promise:He,subscribers:new Set,type:"query",req:xe,dirty:!1},Ge?Ge.push(rt):(Ge=[rt],(st=st||(Pl["idb://".concat(O,"/").concat(Y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[xe.query.index.name||""]=Ge)),sS(rt,Ge,Fe,Ze),rt.promise.then(function(et){return{result:$m(et.result,xe,st==null?void 0:st.optimisticOps,ae,rt,Oe)}})}})}})}};function Td(A,O){return new Proxy(A,{get:function(Y,ae,de){return ae==="db"?O:Reflect.get(Y,ae,de)}})}var Ts=(zr.prototype.version=function(A){if(isNaN(A)||A<.1)throw new ve.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new ve.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var O=this._versions,Y=O.filter(function(ae){return ae._cfg.version===A})[0];return Y||(Y=new this.Version(A),O.push(Y),O.sort(Nm),Y.stores({}),this._state.autoSchema=!1,Y)},zr.prototype._whenReady=function(A){var O=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?A():new F(function(Y,ae){if(O._state.openComplete)return ae(new ve.DatabaseClosed(O._state.dbOpenError));if(!O._state.isBeingOpened){if(!O._state.autoOpen)return void ae(new ve.DatabaseClosed);O.open().catch(Ve)}O._state.dbReadyPromise.then(Y,ae)}).then(A)},zr.prototype.use=function(A){var O=A.stack,Y=A.create,ae=A.level,de=A.name;return de&&this.unuse({stack:O,name:de}),A=this._middlewares[O]||(this._middlewares[O]=[]),A.push({stack:O,create:Y,level:ae??10,name:de}),A.sort(function(xe,Oe){return xe.level-Oe.level}),this},zr.prototype.unuse=function(A){var O=A.stack,Y=A.name,ae=A.create;return O&&this._middlewares[O]&&(this._middlewares[O]=this._middlewares[O].filter(function(de){return ae?de.create!==ae:!!Y&&de.name!==Y})),this},zr.prototype.open=function(){var A=this;return Mo(we,function(){return rS(A)})},zr.prototype._close=function(){var A=this._state,O=no.indexOf(this);if(0<=O&&no.splice(O,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new F(function(Y){A.dbReadyResolve=Y}),A.openCanceller=new F(function(Y,ae){A.cancelOpen=ae}))},zr.prototype.close=function(Y){var O=(Y===void 0?{disableAutoOpen:!0}:Y).disableAutoOpen,Y=this._state;O?(Y.isBeingOpened&&Y.cancelOpen(new ve.DatabaseClosed),this._close(),Y.autoOpen=!1,Y.dbOpenError=new ve.DatabaseClosed):(this._close(),Y.autoOpen=this._options.autoOpen||Y.isBeingOpened,Y.openComplete=!1,Y.dbOpenError=null)},zr.prototype.delete=function(A){var O=this;A===void 0&&(A={disableAutoOpen:!0});var Y=0<arguments.length&&typeof arguments[0]!="object",ae=this._state;return new F(function(de,xe){function Oe(){O.close(A);var Fe=O._deps.indexedDB.deleteDatabase(O.name);Fe.onsuccess=Re(function(){var Ze,Xe,rt;Ze=O._deps,Xe=O.name,rt=Ze.indexedDB,Ze=Ze.IDBKeyRange,ih(rt)||Xe===kl||Im(rt,Ze).delete(Xe).catch(Ve),de()}),Fe.onerror=ss(xe),Fe.onblocked=O._fireOnBlocked}if(Y)throw new ve.InvalidArgument("Invalid closeOptions argument to db.delete()");ae.isBeingOpened?ae.dbReadyPromise.then(Oe):Oe()})},zr.prototype.backendDB=function(){return this.idbdb},zr.prototype.isOpen=function(){return this.idbdb!==null},zr.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},zr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},zr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(zr.prototype,"tables",{get:function(){var A=this;return s(this._allTables).map(function(O){return A._allTables[O]})},enumerable:!1,configurable:!0}),zr.prototype.transaction=function(){var A=(function(O,Y,ae){var de=arguments.length;if(de<2)throw new ve.InvalidArgument("Too few arguments");for(var xe=new Array(de-1);--de;)xe[de-1]=arguments[de];return ae=xe.pop(),[O,L(xe),ae]}).apply(this,arguments);return this._transaction.apply(this,A)},zr.prototype._transaction=function(A,O,Y){var ae=this,de=Ne.trans;de&&de.db===this&&A.indexOf("!")===-1||(de=null);var xe,Oe,Fe=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(Oe=O.map(function(Xe){if(Xe=Xe instanceof ae.Table?Xe.name:Xe,typeof Xe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Xe}),A=="r"||A===is)xe=is;else{if(A!="rw"&&A!=vd)throw new ve.InvalidArgument("Invalid transaction mode: "+A);xe=vd}if(de){if(de.mode===is&&xe===vd){if(!Fe)throw new ve.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");de=null}de&&Oe.forEach(function(Xe){if(de&&de.storeNames.indexOf(Xe)===-1){if(!Fe)throw new ve.SubTransaction("Table "+Xe+" not included in parent transaction.");de=null}}),Fe&&de&&!de.active&&(de=null)}}catch(Xe){return de?de._promise(null,function(rt,He){He(Xe)}):Zr(Xe)}var Ze=(function Xe(rt,He,st,Ge,et){return F.resolve().then(function(){var ot=Ne.transless||Ne,Je=rt._createTransaction(He,st,rt._dbSchema,Ge);if(Je.explicit=!0,ot={trans:Je,transless:ot},Ge)Je.idbtrans=Ge.idbtrans;else try{Je.create(),Je.idbtrans._explicit=!0,rt._state.PR1398_maxLoop=3}catch(wt){return wt.name===Ae.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,He,st,null,et)})):Zr(wt)}var ht,bt=J(et);return bt&&In(),ot=F.follow(function(){var wt;(ht=et.call(Je,Je))&&(bt?(wt=Xn.bind(null,null),ht.then(wt,wt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=Ed(ht)))},ot),(ht&&typeof ht.then=="function"?F.resolve(ht).then(function(wt){return Je.active?wt:Zr(new ve.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(wt){return Ge&&Je._resolve(),Je._completion.then(function(){return wt})}).catch(function(wt){return Je._reject(wt),Zr(wt)})})}).bind(null,this,xe,Oe,de,Y);return de?de._promise(xe,Ze,"lock"):Ne.trans?Mo(Ne.transless,function(){return ae._whenReady(Ze)}):this._whenReady(Ze)},zr.prototype.table=function(A){if(!h(this._allTables,A))throw new ve.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},zr);function zr(A,O){var Y=this;this._middlewares={},this.verno=0;var ae=zr.dependencies;this._options=O=r({addons:zr.addons,autoOpen:!0,indexedDB:ae.indexedDB,IDBKeyRange:ae.IDBKeyRange,cache:"cloned"},O),this._deps={indexedDB:O.indexedDB,IDBKeyRange:O.IDBKeyRange},ae=O.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var de,xe,Oe,Fe,Ze,Xe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ve,dbReadyPromise:null,cancelOpen:Ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:O.autoOpen};Xe.dbReadyPromise=new F(function(He){Xe.dbReadyResolve=He}),Xe.openCanceller=new F(function(He,st){Xe.cancelOpen=st}),this._state=Xe,this.name=A,this.on=Bo(this,"populate","blocked","versionchange","close",{ready:[Se,Ve]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(st,Ge){zr.vip(function(){var et,ot=Y._state;ot.openComplete?(ot.dbOpenError||F.resolve().then(st),Ge&&He(st)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(st),Ge&&He(st)):(He(st),et=Y,Ge||He(function Je(){et.on.ready.unsubscribe(st),et.on.ready.unsubscribe(Je)}))})}}),this.Collection=(de=this,Bc(Vc.prototype,function(ht,Je){this.db=de;var Ge=Al,et=null;if(Je)try{Ge=Je()}catch(bt){et=bt}var ot=ht._ctx,Je=ot.table,ht=Je.hook.reading.fire;this._ctx={table:Je,index:ot.index,isPrimKey:!ot.index||Je.schema.primKey.keyPath&&ot.index===Je.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:et,or:ot.or,valueMapper:ht!==De?ht:null}})),this.Table=(xe=this,Bc(Sm.prototype,function(He,st,Ge){this.db=xe,this._tx=Ge,this.name=He,this.schema=st,this.hook=xe._allTables[He]?xe._allTables[He].hook:Bo(null,{creating:[Te,Ve],reading:[$,De],updating:[oe,Ve],deleting:[fe,Ve]})})),this.Transaction=(Oe=this,Bc(Am.prototype,function(He,st,Ge,et,ot){var Je=this;this.db=Oe,this.mode=He,this.storeNames=st,this.schema=Ge,this.chromeTransactionDurability=et,this.idbtrans=null,this.on=Bo(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new F(function(ht,bt){Je._resolve=ht,Je._reject=bt}),this._completion.then(function(){Je.active=!1,Je.on.complete.fire()},function(ht){var bt=Je.active;return Je.active=!1,Je.on.error.fire(ht),Je.parent?Je.parent._reject(ht):bt&&Je.idbtrans&&Je.idbtrans.abort(),Zr(ht)})})),this.Version=(Fe=this,Bc(nS.prototype,function(He){this.db=Fe,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ze=this,Bc(Il.prototype,function(He,st,Ge){if(this.db=Ze,this._ctx={table:He,index:st===":id"?null:st,or:Ge},this._cmp=this._ascending=Jn,this._descending=function(et,ot){return Jn(ot,et)},this._max=function(et,ot){return 0<Jn(et,ot)?et:ot},this._min=function(et,ot){return Jn(et,ot)<0?et:ot},this._IDBKeyRange=Ze._deps.IDBKeyRange,!this._IDBKeyRange)throw new ve.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(Y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Y.name,"'. Closing db now to resume the delete request.")),Y.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(Y.name,"') was blocked")):console.warn("Upgrade '".concat(Y.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=Wc(O.IDBKeyRange),this._createTransaction=function(He,st,Ge,et){return new Y.Transaction(He,st,Ge,Y._options.chromeTransactionDurability,et)},this._fireOnBlocked=function(He){Y.on("blocked").fire(He),no.filter(function(st){return st.name===Y.name&&st!==Y&&!st._state.vcFired}).map(function(st){return st.on("versionchange").fire(He)})},this.use(Cb),this.use(fh),this.use(iS),this.use(aS),this.use(Eb);var rt=new Proxy(this,{get:function(He,st,Ge){if(st==="_vip")return!0;if(st==="table")return function(ot){return Td(Y.table(ot),rt)};var et=Reflect.get(He,st,Ge);return et instanceof Sm?Td(et,rt):st==="tables"?et.map(function(ot){return Td(ot,rt)}):st==="_createTransaction"?function(){return Td(et.apply(this,arguments),rt)}:et}});this.vip=rt,ae.forEach(function(He){return He(Y)})}var Xc,Ci=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ab=(hh.prototype.subscribe=function(A,O,Y){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:O,complete:Y})},hh.prototype[Ci]=function(){return this},hh);function hh(A){this._subscribe=A}try{Xc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Xc={indexedDB:null,IDBKeyRange:null}}function Nb(A){var O,Y=!1,ae=new Ab(function(de){var xe=J(A),Oe,Fe=!1,Ze={},Xe={},rt={get closed(){return Fe},unsubscribe:function(){Fe||(Fe=!0,Oe&&Oe.abort(),He&&ja.storagemutated.unsubscribe(Ge))}};de.start&&de.start(rt);var He=!1,st=function(){return Po(et)},Ge=function(ot){oh(Ze,ot),Om(Xe,Ze)&&st()},et=function(){var ot,Je,ht;!Fe&&Xc.indexedDB&&(Ze={},ot={},Oe&&Oe.abort(),Oe=new AbortController,ht=function(bt){var wt=G();try{xe&&In();var kt=en(A,bt);return kt=xe?kt.finally(Xn):kt}finally{wt&&V()}}(Je={subscr:ot,signal:Oe.signal,requery:st,querier:A,trans:null}),Promise.resolve(ht).then(function(bt){Y=!0,O=bt,Fe||Je.signal.aborted||(Ze={},function(wt){for(var kt in wt)if(h(wt,kt))return;return 1}(Xe=ot)||He||(ja(qc,Ge),He=!0),Po(function(){return!Fe&&de.next&&de.next(bt)}))},function(bt){Y=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||Fe||Po(function(){Fe||de.error&&de.error(bt)})}))};return setTimeout(st,0),rt});return ae.hasValue=function(){return Y},ae.getValue=function(){return O},ae}var Ll=Ts;function zm(A){var O=Uo;try{Uo=!0,ja.storagemutated.fire(A),Lm(A,!0)}finally{Uo=O}}m(Ll,r(r({},nt),{delete:function(A){return new Ll(A,{addons:[]}).delete()},exists:function(A){return new Ll(A,{addons:[]}).open().then(function(O){return O.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return O=Ll.dependencies,Y=O.indexedDB,O=O.IDBKeyRange,(ih(Y)?Promise.resolve(Y.databases()).then(function(ae){return ae.map(function(de){return de.name}).filter(function(de){return de!==kl})}):Im(Y,O).toCollection().primaryKeys()).then(A)}catch{return Zr(new ve.MissingAPI)}var O,Y},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return Ne.trans?Mo(Ne.transless,A):A()},vip:jm,async:function(A){return function(){try{var O=Ed(A.apply(this,arguments));return O&&typeof O.then=="function"?O:F.resolve(O)}catch(Y){return Zr(Y)}}},spawn:function(A,O,Y){try{var ae=Ed(A.apply(Y,O||[]));return ae&&typeof ae.then=="function"?ae:F.resolve(ae)}catch(de){return Zr(de)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(A,O){return O=F.resolve(typeof A=="function"?Ll.ignoreTransaction(A):A).timeout(O||6e4),Ne.trans?Ne.trans.waitFor(O):O},Promise:F,debug:{get:function(){return Pe},set:function(A){ke(A)}},derive:b,extend:l,props:m,override:E,Events:Bo,on:ja,liveQuery:Nb,extendObservabilitySet:oh,getByKeyPath:I,setByKeyPath:j,delByKeyPath:function(A,O){typeof O=="string"?j(A,O,void 0):"length"in O&&[].map.call(O,function(Y){j(A,Y,void 0)})},shallowClone:N,deepClone:K,getObjectDiff:ch,cmp:Jn,asap:k,minKey:-1/0,addons:[],connections:no,errnames:Ae,dependencies:Xc,cache:Pl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,O,Y){return A+O/Math.pow(10,2*Y)})})),Ll.maxKey=Wc(Ll.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ja(qc,function(A){Uo||(A=new CustomEvent(Dl,{detail:A}),Uo=!0,dispatchEvent(A),Uo=!1)}),addEventListener(Dl,function(A){A=A.detail,Uo||zm(A)}));var Jc,Uo=!1,oi=function(){};return typeof BroadcastChannel<"u"&&((oi=function(){(Jc=new BroadcastChannel(Dl)).onmessage=function(A){return A.data&&zm(A.data)}})(),typeof Jc.unref=="function"&&Jc.unref(),ja(qc,function(A){Uo||Jc.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!Ts.disableBfCache&&A.persisted){Pe&&console.debug("Dexie: handling persisted pagehide"),Jc!=null&&Jc.close();for(var O=0,Y=no;O<Y.length;O++)Y[O].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!Ts.disableBfCache&&A.persisted&&(Pe&&console.debug("Dexie: handling persisted pageshow"),oi(),zm({all:new Da(-1/0,[[]])}))})),F.rejectionMapper=function(A,O){return!A||A instanceof te||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Be[A.name]?A:(O=new Be[A.name](O||A.message,A),"stack"in A&&v(O,"stack",{get:function(){return this.inner.stack}}),O)},ke(Pe),r(Ts,Object.freeze({__proto__:null,Dexie:Ts,liveQuery:Nb,Entity:Kf,cmp:Jn,PropModification:Uc,replacePrefix:function(A,O){return new Uc({replacePrefix:[A,O]})},add:function(A){return new Uc({add:A})},remove:function(A){return new Uc({remove:A})},default:Ts,RangeSet:Da,mergeRanges:Ol,rangesOverlap:xb}),{default:Ts}),Ts})}(Dw)),Dw.exports}var gX=mX();const jT=vi(gX),M4=Symbol.for("Dexie"),Xw=globalThis[M4]||(globalThis[M4]=jT);if(jT.semVer!==Xw.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${jT.semVer} and ${Xw.semVer}`);const{liveQuery:x3e,mergeRanges:_3e,rangesOverlap:S3e,RangeSet:E3e,cmp:C3e,Entity:T3e,PropModification:k3e,replacePrefix:A3e,add:N3e,remove:R3e}=Xw;class yX extends Xw{constructor(){super("LiteChatDatabase_Rewrite_v1");va(this,"conversations");va(this,"interactions");va(this,"mods");va(this,"appState");va(this,"providerConfigs");va(this,"apiKeys");va(this,"syncRepos");va(this,"projects");va(this,"rules");va(this,"tags");va(this,"tagRuleLinks");this.version(8).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Tt=new yX,La=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class _t{static async loadConversations(){try{return(await Tt.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>La(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Tt.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Tt.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Tt.interactions.where({conversationId:t}).sortBy("index")).map(r=>La(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Tt.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Tt.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Tt.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Tt.mods.orderBy("loadOrder").toArray()).map(n=>La(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Tt.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Tt.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Tt.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Tt.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Tt.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>La(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Tt.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Tt.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Tt.apiKeys)==null?void 0:t.toArray())??[]).map(r=>La(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Tt.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Tt.transaction("rw",[Tt.apiKeys,Tt.providerConfigs],async()=>{const n=await Tt.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Tt.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Tt.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Tt.syncRepos.toArray()).map(n=>La(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Tt.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Tt.transaction("rw",[Tt.syncRepos,Tt.conversations],async()=>{const n=await Tt.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Tt.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Tt.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Tt.projects.orderBy("updatedAt").reverse().toArray()).map(n=>La(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,metadata:t.metadata?{...t.metadata}:{}};return await Tt.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await Tt.projects.where("parentId").equals(r).toArray();for(const s of a)await n(s.id);const i=await Tt.conversations.where("projectId").equals(r).toArray();if(i.length>0){const s=i.map(o=>Tt.conversations.update(o.id,{projectId:null}));await Promise.all(s),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await Tt.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Tt.transaction("rw",[Tt.projects,Tt.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Tt.rules.orderBy("name").toArray()).map(n=>La(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Tt.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Tt.transaction("rw",[Tt.rules,Tt.tagRuleLinks],async()=>{await Tt.tagRuleLinks.where("ruleId").equals(t).delete(),await Tt.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Tt.tags.orderBy("name").toArray()).map(n=>La(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Tt.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Tt.transaction("rw",[Tt.tags,Tt.tagRuleLinks],async()=>{await Tt.tagRuleLinks.where("tagId").equals(t).delete(),await Tt.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Tt.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Tt.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Tt.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Tt.appState.toArray();n.settings={},r.forEach(a=>{a.key.startsWith("settings:")&&(n.settings[a.key.substring(9)]=a.value)})}return t.importApiKeys&&(n.apiKeys=await Tt.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Tt.providerConfigs.toArray()),t.importProjects&&(n.projects=await Tt.projects.toArray()),t.importConversations&&(n.conversations=await Tt.conversations.toArray(),n.interactions=await Tt.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Tt.rules.toArray(),n.tags=await Tt.tags.toArray(),n.tagRuleLinks=await Tt.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Tt.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Tt.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Tt.transaction("rw",[Tt.appState,Tt.apiKeys,Tt.providerConfigs,Tt.projects,Tt.conversations,Tt.interactions,Tt.rules,Tt.tags,Tt.tagRuleLinks,Tt.mods,Tt.syncRepos],async()=>{if(n.importSettings&&await Tt.appState.clear(),n.importApiKeys&&await Tt.apiKeys.clear(),n.importProviderConfigs&&await Tt.providerConfigs.clear(),n.importProjects&&await Tt.projects.clear(),n.importConversations&&(await Tt.conversations.clear(),await Tt.interactions.clear()),n.importRulesAndTags&&(await Tt.rules.clear(),await Tt.tags.clear(),await Tt.tagRuleLinks.clear()),n.importMods&&await Tt.mods.clear(),n.importSyncRepos&&await Tt.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([a,i])=>({key:`settings:${a}`,value:i}));await Tt.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Tt.apiKeys.bulkPut(t.apiKeys.map(r=>La(r))),n.importProviderConfigs&&t.providerConfigs&&await Tt.providerConfigs.bulkPut(t.providerConfigs.map(r=>La(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Tt.projects.bulkPut(t.projects.map(r=>La(r))),n.importConversations&&t.conversations&&(await Tt.conversations.bulkPut(t.conversations.map(r=>La(r,["lastSyncedAt"]))),t.interactions&&await Tt.interactions.bulkPut(t.interactions.map(r=>La(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Tt.rules.bulkPut(t.rules.map(r=>La(r))),t.tags&&await Tt.tags.bulkPut(t.tags.map(r=>La(r))),t.tagRuleLinks&&await Tt.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Tt.mods.bulkPut(t.mods.map(r=>La(r))),n.importSyncRepos&&t.syncRepos&&await Tt.syncRepos.bulkPut(t.syncRepos.map(r=>La(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Tt.transaction("rw",[Tt.conversations,Tt.interactions,Tt.mods,Tt.appState,Tt.providerConfigs,Tt.apiKeys,Tt.syncRepos,Tt.projects,Tt.rules,Tt.tags,Tt.tagRuleLinks],async()=>{await Tt.interactions.clear(),await Tt.conversations.clear(),await Tt.projects.clear(),await Tt.mods.clear(),await Tt.appState.clear(),await Tt.providerConfigs.clear(),await Tt.apiKeys.clear(),await Tt.syncRepos.clear(),await Tt.rules.clear(),await Tt.tags.clear(),await Tt.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function bX(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ct=bX();var St=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(St||{}),Jw=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))(Jw||{}),sl=x8();const X8=vi(sl);function vX(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const wX=e=>{switch(e){case"success":return SX;case"info":return CX;case"warning":return EX;case"error":return TX;default:return null}},xX=Array(12).fill(0),_X=({visible:e,className:t})=>gt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},gt.createElement("div",{className:"sonner-spinner"},xX.map((n,r)=>gt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),SX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),EX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),CX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),TX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},gt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),gt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),AX=()=>{const[e,t]=gt.useState(document.hidden);return gt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let DT=1;class NX{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:DT++,s=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...a,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,s;const o=a.then(async u=>{if(s=["resolve",u],gt.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(IX(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,m=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,m=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...v})}}).catch(async u=>{if(s=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof d=="object"&&!gt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>o.then(()=>s[0]==="reject"?d(s[1]):u(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||DT++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Hi=new NX,RX=(e,t)=>{const n=(t==null?void 0:t.id)||DT++;return Hi.addToast({title:e,...t,id:n}),n},IX=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",jX=RX,DX=()=>Hi.toasts,MX=()=>Hi.getActiveToasts(),qe=Object.assign(jX,{success:Hi.success,info:Hi.info,warning:Hi.warning,error:Hi.error,custom:Hi.custom,message:Hi.message,promise:Hi.promise,dismiss:Hi.dismiss,loading:Hi.loading},{getHistory:DX,getToasts:MX});vX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Av(e){return e.label!==void 0}const OX=3,PX="24px",FX="16px",O4=4e3,LX=356,BX=14,$X=45,zX=200;function Zo(...e){return e.filter(Boolean).join(" ")}function UX(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const VX=e=>{var t,n,r,a,i,s,o,l,u;const{invert:d,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:b,heights:w,index:x,toasts:_,expanded:E,removeToast:C,defaultRichColors:k,closeButton:I,style:j,cancelButtonStyle:N,actionButtonStyle:P,className:L="",descriptionClassName:H="",duration:M,position:K,gap:U,expandByDefault:se,classNames:ie,icons:re,closeButtonAriaLabel:X="Close toast"}=e,[ne,q]=gt.useState(null),[J,Q]=gt.useState(null),[te,ue]=gt.useState(!1),[ge,Ie]=gt.useState(!1),[Ae,_e]=gt.useState(!1),[ve,Be]=gt.useState(!1),[nt,Ve]=gt.useState(!1),[De,$]=gt.useState(0),[Ee,Te]=gt.useState(0),fe=gt.useRef(h.duration||M||O4),oe=gt.useRef(null),ee=gt.useRef(null),Se=x===0,Pe=x+1<=b,ke=h.type,We=h.dismissible!==!1,Nt=h.className||"",it=h.descriptionClassName||"",Et=gt.useMemo(()=>w.findIndex(Me=>Me.toastId===h.id)||0,[w,h.id]),Ft=gt.useMemo(()=>{var Me;return(Me=h.closeButton)!=null?Me:I},[h.closeButton,I]),Mt=gt.useMemo(()=>h.duration||M||O4,[h.duration,M]),Yt=gt.useRef(0),be=gt.useRef(0),D=gt.useRef(0),W=gt.useRef(null),[he,je]=K.split("-"),we=gt.useMemo(()=>w.reduce((Me,Ke,Dt)=>Dt>=Et?Me:Me+Ke.height,0),[w,Et]),Ne=AX(),ce=h.invert||d,ft=ke==="loading";be.current=gt.useMemo(()=>Et*U+we,[Et,we]),gt.useEffect(()=>{fe.current=Mt},[Mt]),gt.useEffect(()=>{ue(!0)},[]),gt.useEffect(()=>{const Me=ee.current;if(Me){const Ke=Me.getBoundingClientRect().height;return Te(Ke),v(Dt=>[{toastId:h.id,height:Ke,position:h.position},...Dt]),()=>v(Dt=>Dt.filter(me=>me.toastId!==h.id))}},[v,h.id]),gt.useLayoutEffect(()=>{if(!te)return;const Me=ee.current,Ke=Me.style.height;Me.style.height="auto";const Dt=Me.getBoundingClientRect().height;Me.style.height=Ke,Te(Dt),v(me=>me.find(V=>V.toastId===h.id)?me.map(V=>V.toastId===h.id?{...V,height:Dt}:V):[{toastId:h.id,height:Dt,position:h.position},...me])},[te,h.title,h.description,v,h.id]);const vt=gt.useCallback(()=>{Ie(!0),$(be.current),v(Me=>Me.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},zX)},[h,C,v,be]);gt.useEffect(()=>{if(h.promise&&ke==="loading"||h.duration===1/0||h.type==="loading")return;let Me;return E||g||Ne?(()=>{if(D.current<Yt.current){const me=new Date().getTime()-Yt.current;fe.current=fe.current-me}D.current=new Date().getTime()})():(()=>{fe.current!==1/0&&(Yt.current=new Date().getTime(),Me=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},fe.current))})(),()=>clearTimeout(Me)},[E,g,h,ke,Ne,vt]),gt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function F(){var Me;if(re!=null&&re.loading){var Ke;return gt.createElement("div",{className:Zo(ie==null?void 0:ie.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":ke==="loading"},re.loading)}return gt.createElement(_X,{className:Zo(ie==null?void 0:ie.loader,h==null||(Me=h.classNames)==null?void 0:Me.loader),visible:ke==="loading"})}const Le=h.icon||(re==null?void 0:re[ke])||wX(ke);var tt,ye;return gt.createElement("li",{tabIndex:0,ref:ee,className:Zo(L,Nt,ie==null?void 0:ie.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ie==null?void 0:ie.default,ie==null?void 0:ie[ke],h==null||(n=h.classNames)==null?void 0:n[ke]),"data-sonner-toast":"","data-rich-colors":(tt=h.richColors)!=null?tt:k,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":te,"data-promise":!!h.promise,"data-swiped":nt,"data-removed":ge,"data-visible":Pe,"data-y-position":he,"data-x-position":je,"data-index":x,"data-front":Se,"data-swiping":Ae,"data-dismissible":We,"data-type":ke,"data-invert":ce,"data-swipe-out":ve,"data-swipe-direction":J,"data-expanded":!!(E||se&&te),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${ge?De:be.current}px`,"--initial-height":se?"auto":`${Ee}px`,...j,...h.style},onDragEnd:()=>{_e(!1),q(null),W.current=null},onPointerDown:Me=>{ft||!We||(oe.current=new Date,$(be.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(_e(!0),W.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,Ke,Dt;if(ve||!We)return;W.current=null;const me=Number(((Me=ee.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),G=Number(((Ke=ee.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),V=new Date().getTime()-((Dt=oe.current)==null?void 0:Dt.getTime()),Z=ne==="x"?me:G,pe=Math.abs(Z)/V;if(Math.abs(Z)>=$X||pe>.11){$(be.current),h.onDismiss==null||h.onDismiss.call(h,h),Q(ne==="x"?me>0?"right":"left":G>0?"down":"up"),vt(),Be(!0);return}else{var Re,Ue;(Re=ee.current)==null||Re.style.setProperty("--swipe-amount-x","0px"),(Ue=ee.current)==null||Ue.style.setProperty("--swipe-amount-y","0px")}Ve(!1),_e(!1),q(null)},onPointerMove:Me=>{var Ke,Dt,me;if(!W.current||!We||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const V=Me.clientY-W.current.y,Z=Me.clientX-W.current.x;var pe;const Re=(pe=e.swipeDirections)!=null?pe:UX(K);!ne&&(Math.abs(Z)>1||Math.abs(V)>1)&&q(Math.abs(Z)>Math.abs(V)?"x":"y");let Ue={x:0,y:0};const pt=Zt=>1/(1.5+Math.abs(Zt)/20);if(ne==="y"){if(Re.includes("top")||Re.includes("bottom"))if(Re.includes("top")&&V<0||Re.includes("bottom")&&V>0)Ue.y=V;else{const Zt=V*pt(V);Ue.y=Math.abs(Zt)<Math.abs(V)?Zt:V}}else if(ne==="x"&&(Re.includes("left")||Re.includes("right")))if(Re.includes("left")&&Z<0||Re.includes("right")&&Z>0)Ue.x=Z;else{const Zt=Z*pt(Z);Ue.x=Math.abs(Zt)<Math.abs(Z)?Zt:Z}(Math.abs(Ue.x)>0||Math.abs(Ue.y)>0)&&Ve(!0),(Dt=ee.current)==null||Dt.style.setProperty("--swipe-amount-x",`${Ue.x}px`),(me=ee.current)==null||me.style.setProperty("--swipe-amount-y",`${Ue.y}px`)}},Ft&&!h.jsx&&ke!=="loading"?gt.createElement("button",{"aria-label":X,"data-disabled":ft,"data-close-button":!0,onClick:ft||!We?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Zo(ie==null?void 0:ie.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ye=re==null?void 0:re.close)!=null?ye:kX):null,(ke||h.icon||h.promise)&&h.icon!==null&&((re==null?void 0:re[ke])!==null||h.icon)?gt.createElement("div",{"data-icon":"",className:Zo(ie==null?void 0:ie.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||F():null,h.type!=="loading"?Le:null):null,gt.createElement("div",{"data-content":"",className:Zo(ie==null?void 0:ie.content,h==null||(i=h.classNames)==null?void 0:i.content)},gt.createElement("div",{"data-title":"",className:Zo(ie==null?void 0:ie.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?gt.createElement("div",{"data-description":"",className:Zo(H,it,ie==null?void 0:ie.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),gt.isValidElement(h.cancel)?h.cancel:h.cancel&&Av(h.cancel)?gt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||N,onClick:Me=>{Av(h.cancel)&&We&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Me),vt())},className:Zo(ie==null?void 0:ie.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,gt.isValidElement(h.action)?h.action:h.action&&Av(h.action)?gt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:Me=>{Av(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Me),!Me.defaultPrevented&&vt())},className:Zo(ie==null?void 0:ie.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function P4(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function HX(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,s=i?"--mobile-offset":"--offset",o=i?FX:PX;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=o:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),n}const qX=gt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:u,mobileOffset:d,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:b=OX,toastOptions:w,dir:x=P4(),gap:_=BX,icons:E,containerAriaLabel:C="Notifications"}=t,[k,I]=gt.useState([]),j=gt.useMemo(()=>Array.from(new Set([a].concat(k.filter(J=>J.position).map(J=>J.position)))),[k,a]),[N,P]=gt.useState([]),[L,H]=gt.useState(!1),[M,K]=gt.useState(!1),[U,se]=gt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ie=gt.useRef(null),re=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=gt.useRef(null),ne=gt.useRef(!1),q=gt.useCallback(J=>{I(Q=>{var te;return(te=Q.find(ue=>ue.id===J.id))!=null&&te.delete||Hi.dismiss(J.id),Q.filter(({id:ue})=>ue!==J.id)})},[]);return gt.useEffect(()=>Hi.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{I(Q=>Q.map(te=>te.id===J.id?{...te,delete:!0}:te))});return}setTimeout(()=>{X8.flushSync(()=>{I(Q=>{const te=Q.findIndex(ue=>ue.id===J.id);return te!==-1?[...Q.slice(0,te),{...Q[te],...J},...Q.slice(te+1)]:[J,...Q]})})})}),[k]),gt.useEffect(()=>{if(h!=="system"){se(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:Q})=>{se(Q?"dark":"light")})}catch{J.addListener(({matches:te})=>{try{se(te?"dark":"light")}catch(ue){console.error(ue)}})}},[h]),gt.useEffect(()=>{k.length<=1&&H(!1)},[k]),gt.useEffect(()=>{const J=Q=>{var te;if(i.every(Ie=>Q[Ie]||Q.code===Ie)){var ge;H(!0),(ge=ie.current)==null||ge.focus()}Q.code==="Escape"&&(document.activeElement===ie.current||(te=ie.current)!=null&&te.contains(document.activeElement))&&H(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),gt.useEffect(()=>{if(ie.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,ne.current=!1)}},[ie.current]),gt.createElement("section",{ref:n,"aria-label":`${C} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((J,Q)=>{var te;const[ue,ge]=J.split("-");return k.length?gt.createElement("ol",{key:J,dir:x==="auto"?P4():x,tabIndex:-1,ref:ie,className:l,"data-sonner-toaster":!0,"data-sonner-theme":U,"data-y-position":ue,"data-lifted":L&&k.length>1&&!s,"data-x-position":ge,style:{"--front-toast-height":`${((te=N[0])==null?void 0:te.height)||0}px`,"--width":`${LX}px`,"--gap":`${_}px`,...v,...HX(u,d)},onBlur:Ie=>{ne.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(ne.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,X.current=Ie.relatedTarget)},onMouseEnter:()=>H(!0),onMouseMove:()=>H(!0),onMouseLeave:()=>{M||H(!1)},onDragEnd:()=>H(!1),onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},k.filter(Ie=>!Ie.position&&Q===0||Ie.position===J).map((Ie,Ae)=>{var _e,ve;return gt.createElement(VX,{key:Ie.id,icons:E,index:Ae,toast:Ie,defaultRichColors:m,duration:(_e=w==null?void 0:w.duration)!=null?_e:g,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:r,visibleToasts:b,closeButton:(ve=w==null?void 0:w.closeButton)!=null?ve:o,interacting:M,position:J,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,closeButtonAriaLabel:w==null?void 0:w.closeButtonAriaLabel,removeToast:q,toasts:k.filter(Be=>Be.position==Ie.position),heights:N.filter(Be=>Be.position==Ie.position),setHeights:P,expandByDefault:s,gap:_,expanded:L,swipeDirections:t.swipeDirections})})):null}))}),On=Ys(Xs((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},currentConversationId:n}),r!=="loading"&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await _t.loadInteractionsForConversation(n);a.sort((i,s)=>i.index-s.index),e({interactions:a,status:"idle"}),Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(s=>s.id===n);if(i!==-1){const s=a.interactions[i];let o={...s.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]),r.metadata.reasoning!==void 0&&(o.reasoning=r.metadata.reasoning));const l={...s,...r,metadata:o};"response"in r&&(l.response=r.response),"rating"in r&&(l.rating=r.rating),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},appendReasoningChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeReasoningBuffers[n]=(a.activeReasoningBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},rateInteraction:async(n,r)=>{const a=t().interactions.find(i=>i.id===n);if(!a){console.error(`InteractionStore: Interaction ${n} not found for rating.`);return}t()._updateInteractionInState(n,{rating:r});try{await _t.saveInteraction({...a,rating:r})}catch(i){console.error(`InteractionStore: Failed to persist rating for ${n}`,i),t()._updateInteractionInState(n,{rating:a.rating}),qe.error("Failed to save rating.")}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.activeReasoningBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],delete a.activeReasoningBuffers[n],console.log(`InteractionStore: Cleaned up buffers for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&Ct.emit(St.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),GX="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let ji=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=GX[n[e]&63];return t};const vc=Ys(Xs((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(s=>s.source==="direct"&&n.source==="direct"?s.name===n.name&&s.size===n.size:s.source==="vfs"&&n.source==="vfs"?s.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const s={id:ji(),...n};a.attachedFilesMetadata.push(s),r=!0}}),r&&Ct.emit(St.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(s=>s.id!==n),r=a.attachedFilesMetadata.length<i}),r&&Ct.emit(St.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Ct.emit(St.ATTACHED_FILES_CHANGED,{files:[]})}}))),J8=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(J8);const _A=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return J8.has(r)};var Q8="vercel.ai.error",WX=Symbol.for(Q8),e5,KX=class t5 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[e5]=!0,this.name=t,this.cause=r}static isInstance(t){return t5.hasMarker(t,Q8)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};e5=WX;var Rn=KX,n5="AI_APICallError",r5=`vercel.ai.error.${n5}`,ZX=Symbol.for(r5),a5,Vs=class extends Rn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:n5,message:t,cause:o}),this[a5]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return Rn.hasMarker(t,r5)}};a5=ZX;var i5="AI_EmptyResponseBodyError",s5=`vercel.ai.error.${i5}`,YX=Symbol.for(s5),o5,l5=class extends Rn{constructor({message:t="Empty response body"}={}){super({name:i5,message:t}),this[o5]=!0}static isInstance(t){return Rn.hasMarker(t,s5)}};o5=YX;function xy(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var c5="AI_InvalidArgumentError",u5=`vercel.ai.error.${c5}`,XX=Symbol.for(u5),d5,f5=class extends Rn{constructor({message:t,cause:n,argument:r}){super({name:c5,message:t,cause:n}),this[d5]=!0,this.argument=r}static isInstance(t){return Rn.hasMarker(t,u5)}};d5=XX;var h5="AI_InvalidPromptError",p5=`vercel.ai.error.${h5}`,JX=Symbol.for(p5),m5,ec=class extends Rn{constructor({prompt:t,message:n,cause:r}){super({name:h5,message:`Invalid prompt: ${n}`,cause:r}),this[m5]=!0,this.prompt=t}static isInstance(t){return Rn.hasMarker(t,p5)}};m5=JX;var g5="AI_InvalidResponseDataError",y5=`vercel.ai.error.${g5}`,QX=Symbol.for(y5),b5,lp=class extends Rn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:g5,message:n}),this[b5]=!0,this.data=t}static isInstance(t){return Rn.hasMarker(t,y5)}};b5=QX;var v5="AI_JSONParseError",w5=`vercel.ai.error.${v5}`,eJ=Symbol.for(w5),x5,Qw=class extends Rn{constructor({text:t,cause:n}){super({name:v5,message:`JSON parsing failed: Text: ${t}.
Error message: ${xy(n)}`,cause:n}),this[x5]=!0,this.text=t}static isInstance(t){return Rn.hasMarker(t,w5)}};x5=eJ;var _5="AI_LoadAPIKeyError",S5=`vercel.ai.error.${_5}`,tJ=Symbol.for(S5),E5,Nv=class extends Rn{constructor({message:t}){super({name:_5,message:t}),this[E5]=!0}static isInstance(t){return Rn.hasMarker(t,S5)}};E5=tJ;var C5="AI_TooManyEmbeddingValuesForCallError",T5=`vercel.ai.error.${C5}`,nJ=Symbol.for(T5),k5,x1=class extends Rn{constructor(e){super({name:C5,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[k5]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Rn.hasMarker(e,T5)}};k5=nJ;var A5="AI_TypeValidationError",N5=`vercel.ai.error.${A5}`,rJ=Symbol.for(N5),R5,aJ=class MT extends Rn{constructor({value:t,cause:n}){super({name:A5,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${xy(n)}`,cause:n}),this[R5]=!0,this.value=t}static isInstance(t){return Rn.hasMarker(t,N5)}static wrap({value:t,cause:n}){return MT.isInstance(n)&&n.value===t?n:new MT({value:t,cause:n})}};R5=rJ;var ex=aJ,I5="AI_UnsupportedFunctionalityError",j5=`vercel.ai.error.${I5}`,iJ=Symbol.for(j5),D5,dr=class extends Rn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:I5,message:n}),this[D5]=!0,this.functionality=t}static isInstance(t){return Rn.hasMarker(t,j5)}};D5=iJ;let sJ=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var SA={},_1={};_1.byteLength=cJ;_1.toByteArray=dJ;_1.fromByteArray=pJ;var rl=[],Ls=[],oJ=typeof Uint8Array<"u"?Uint8Array:Array,J2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Lh=0,lJ=J2.length;Lh<lJ;++Lh)rl[Lh]=J2[Lh],Ls[J2.charCodeAt(Lh)]=Lh;Ls[45]=62;Ls[95]=63;function M5(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function cJ(e){var t=M5(e),n=t[0],r=t[1];return(n+r)*3/4-r}function uJ(e,t,n){return(t+n)*3/4-n}function dJ(e){var t,n=M5(e),r=n[0],a=n[1],i=new oJ(uJ(e,r,a)),s=0,o=a>0?r-4:r,l;for(l=0;l<o;l+=4)t=Ls[e.charCodeAt(l)]<<18|Ls[e.charCodeAt(l+1)]<<12|Ls[e.charCodeAt(l+2)]<<6|Ls[e.charCodeAt(l+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return a===2&&(t=Ls[e.charCodeAt(l)]<<2|Ls[e.charCodeAt(l+1)]>>4,i[s++]=t&255),a===1&&(t=Ls[e.charCodeAt(l)]<<10|Ls[e.charCodeAt(l+1)]<<4|Ls[e.charCodeAt(l+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function fJ(e){return rl[e>>18&63]+rl[e>>12&63]+rl[e>>6&63]+rl[e&63]}function hJ(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(fJ(r));return a.join("")}function pJ(e){for(var t,n=e.length,r=n%3,a=[],i=16383,s=0,o=n-r;s<o;s+=i)a.push(hJ(e,s,s+i>o?o:s+i));return r===1?(t=e[n-1],a.push(rl[t>>2]+rl[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(rl[t>>10]+rl[t>>4&63]+rl[t<<2&63]+"=")),a.join("")}var EA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */EA.read=function(e,t,n,r,a){var i,s,o=a*8-r-1,l=(1<<o)-1,u=l>>1,d=-7,h=n?a-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-d)-1,g>>=-d,d+=o;d>0;i=i*256+e[t+h],h+=m,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=r;d>0;s=s*256+e[t+h],h+=m,d-=8);if(i===0)i=1-u;else{if(i===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-u}return(g?-1:1)*s*Math.pow(2,i-r)};EA.write=function(e,t,n,r,a,i){var s,o,l,u=i*8-a-1,d=(1<<u)-1,h=d>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=m/l:t+=m*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*l-1)*Math.pow(2,a),s=s+h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),s=0));a>=8;e[n+g]=o&255,g+=v,o/=256,a-=8);for(s=s<<a|o,u+=a;u>0;e[n+g]=s&255,g+=v,s/=256,u-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=_1,n=EA,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:s,SharedArrayBuffer:o}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const be=new i(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,i.prototype),Object.setPrototypeOf(be,D),be.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(be){if(be>a)throw new RangeError('The value "'+be+'" is invalid for option "size"');const D=new i(be);return Object.setPrototypeOf(D,d.prototype),D}function d(be,D,W){if(typeof be=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(be)}return h(be,D,W)}d.poolSize=8192;function h(be,D,W){if(typeof be=="string")return b(be,D);if(s.isView(be))return x(be);if(be==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(it(be,s)||be&&it(be.buffer,s)||typeof o<"u"&&(it(be,o)||be&&it(be.buffer,o)))return _(be,D,W);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=be.valueOf&&be.valueOf();if(he!=null&&he!==be)return d.from(he,D,W);const je=E(be);if(je)return je;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return d.from(be[Symbol.toPrimitive]("string"),D,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}d.from=function(be,D,W){return h(be,D,W)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function m(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function g(be,D,W){return m(be),be<=0?u(be):D!==void 0?typeof W=="string"?u(be).fill(D,W):u(be).fill(D):u(be)}d.alloc=function(be,D,W){return g(be,D,W)};function v(be){return m(be),u(be<0?0:C(be)|0)}d.allocUnsafe=function(be){return v(be)},d.allocUnsafeSlow=function(be){return v(be)};function b(be,D){if((typeof D!="string"||D==="")&&(D="utf8"),!d.isEncoding(D))throw new TypeError("Unknown encoding: "+D);const W=I(be,D)|0;let he=u(W);const je=he.write(be,D);return je!==W&&(he=he.slice(0,je)),he}function w(be){const D=be.length<0?0:C(be.length)|0,W=u(D);for(let he=0;he<D;he+=1)W[he]=be[he]&255;return W}function x(be){if(it(be,i)){const D=new i(be);return _(D.buffer,D.byteOffset,D.byteLength)}return w(be)}function _(be,D,W){if(D<0||be.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<D+(W||0))throw new RangeError('"length" is outside of buffer bounds');let he;return D===void 0&&W===void 0?he=new i(be):W===void 0?he=new i(be,D):he=new i(be,D,W),Object.setPrototypeOf(he,d.prototype),he}function E(be){if(d.isBuffer(be)){const D=C(be.length)|0,W=u(D);return W.length===0||be.copy(W,0,0,D),W}if(be.length!==void 0)return typeof be.length!="number"||Et(be.length)?u(0):w(be);if(be.type==="Buffer"&&Array.isArray(be.data))return w(be.data)}function C(be){if(be>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return be|0}function k(be){return+be!=be&&(be=0),d.alloc(+be)}d.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==d.prototype},d.compare=function(D,W){if(it(D,i)&&(D=d.from(D,D.offset,D.byteLength)),it(W,i)&&(W=d.from(W,W.offset,W.byteLength)),!d.isBuffer(D)||!d.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===W)return 0;let he=D.length,je=W.length;for(let we=0,Ne=Math.min(he,je);we<Ne;++we)if(D[we]!==W[we]){he=D[we],je=W[we];break}return he<je?-1:je<he?1:0},d.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(D,W){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return d.alloc(0);let he;if(W===void 0)for(W=0,he=0;he<D.length;++he)W+=D[he].length;const je=d.allocUnsafe(W);let we=0;for(he=0;he<D.length;++he){let Ne=D[he];if(it(Ne,i))we+Ne.length>je.length?(d.isBuffer(Ne)||(Ne=d.from(Ne)),Ne.copy(je,we)):i.prototype.set.call(je,Ne,we);else if(d.isBuffer(Ne))Ne.copy(je,we);else throw new TypeError('"list" argument must be an Array of Buffers');we+=Ne.length}return je};function I(be,D){if(d.isBuffer(be))return be.length;if(s.isView(be)||it(be,s))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);const W=be.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&W===0)return 0;let je=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return Se(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return We(be).length;default:if(je)return he?-1:Se(be).length;D=(""+D).toLowerCase(),je=!0}}d.byteLength=I;function j(be,D,W){let he=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,D>>>=0,W<=D))return"";for(be||(be="utf8");;)switch(be){case"hex":return Q(this,D,W);case"utf8":case"utf-8":return re(this,D,W);case"ascii":return q(this,D,W);case"latin1":case"binary":return J(this,D,W);case"base64":return ie(this,D,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,D,W);default:if(he)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),he=!0}}d.prototype._isBuffer=!0;function N(be,D,W){const he=be[D];be[D]=be[W],be[W]=he}d.prototype.swap16=function(){const D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<D;W+=2)N(this,W,W+1);return this},d.prototype.swap32=function(){const D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<D;W+=4)N(this,W,W+3),N(this,W+1,W+2);return this},d.prototype.swap64=function(){const D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<D;W+=8)N(this,W,W+7),N(this,W+1,W+6),N(this,W+2,W+5),N(this,W+3,W+4);return this},d.prototype.toString=function(){const D=this.length;return D===0?"":arguments.length===0?re(this,0,D):j.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(D){if(!d.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:d.compare(this,D)===0},d.prototype.inspect=function(){let D="";const W=e.INSPECT_MAX_BYTES;return D=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(D+=" ... "),"<Buffer "+D+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(D,W,he,je,we){if(it(D,i)&&(D=d.from(D,D.offset,D.byteLength)),!d.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(W===void 0&&(W=0),he===void 0&&(he=D?D.length:0),je===void 0&&(je=0),we===void 0&&(we=this.length),W<0||he>D.length||je<0||we>this.length)throw new RangeError("out of range index");if(je>=we&&W>=he)return 0;if(je>=we)return-1;if(W>=he)return 1;if(W>>>=0,he>>>=0,je>>>=0,we>>>=0,this===D)return 0;let Ne=we-je,ce=he-W;const ft=Math.min(Ne,ce),vt=this.slice(je,we),F=D.slice(W,he);for(let Le=0;Le<ft;++Le)if(vt[Le]!==F[Le]){Ne=vt[Le],ce=F[Le];break}return Ne<ce?-1:ce<Ne?1:0};function P(be,D,W,he,je){if(be.length===0)return-1;if(typeof W=="string"?(he=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,Et(W)&&(W=je?0:be.length-1),W<0&&(W=be.length+W),W>=be.length){if(je)return-1;W=be.length-1}else if(W<0)if(je)W=0;else return-1;if(typeof D=="string"&&(D=d.from(D,he)),d.isBuffer(D))return D.length===0?-1:L(be,D,W,he,je);if(typeof D=="number")return D=D&255,typeof i.prototype.indexOf=="function"?je?i.prototype.indexOf.call(be,D,W):i.prototype.lastIndexOf.call(be,D,W):L(be,[D],W,he,je);throw new TypeError("val must be string, number or Buffer")}function L(be,D,W,he,je){let we=1,Ne=be.length,ce=D.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(be.length<2||D.length<2)return-1;we=2,Ne/=2,ce/=2,W/=2}function ft(F,Le){return we===1?F[Le]:F.readUInt16BE(Le*we)}let vt;if(je){let F=-1;for(vt=W;vt<Ne;vt++)if(ft(be,vt)===ft(D,F===-1?0:vt-F)){if(F===-1&&(F=vt),vt-F+1===ce)return F*we}else F!==-1&&(vt-=vt-F),F=-1}else for(W+ce>Ne&&(W=Ne-ce),vt=W;vt>=0;vt--){let F=!0;for(let Le=0;Le<ce;Le++)if(ft(be,vt+Le)!==ft(D,Le)){F=!1;break}if(F)return vt}return-1}d.prototype.includes=function(D,W,he){return this.indexOf(D,W,he)!==-1},d.prototype.indexOf=function(D,W,he){return P(this,D,W,he,!0)},d.prototype.lastIndexOf=function(D,W,he){return P(this,D,W,he,!1)};function H(be,D,W,he){W=Number(W)||0;const je=be.length-W;he?(he=Number(he),he>je&&(he=je)):he=je;const we=D.length;he>we/2&&(he=we/2);let Ne;for(Ne=0;Ne<he;++Ne){const ce=parseInt(D.substr(Ne*2,2),16);if(Et(ce))return Ne;be[W+Ne]=ce}return Ne}function M(be,D,W,he){return Nt(Se(D,be.length-W),be,W,he)}function K(be,D,W,he){return Nt(Pe(D),be,W,he)}function U(be,D,W,he){return Nt(We(D),be,W,he)}function se(be,D,W,he){return Nt(ke(D,be.length-W),be,W,he)}d.prototype.write=function(D,W,he,je){if(W===void 0)je="utf8",he=this.length,W=0;else if(he===void 0&&typeof W=="string")je=W,he=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(he)?(he=he>>>0,je===void 0&&(je="utf8")):(je=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const we=this.length-W;if((he===void 0||he>we)&&(he=we),D.length>0&&(he<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");je||(je="utf8");let Ne=!1;for(;;)switch(je){case"hex":return H(this,D,W,he);case"utf8":case"utf-8":return M(this,D,W,he);case"ascii":case"latin1":case"binary":return K(this,D,W,he);case"base64":return U(this,D,W,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,D,W,he);default:if(Ne)throw new TypeError("Unknown encoding: "+je);je=(""+je).toLowerCase(),Ne=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(be,D,W){return D===0&&W===be.length?t.fromByteArray(be):t.fromByteArray(be.slice(D,W))}function re(be,D,W){W=Math.min(be.length,W);const he=[];let je=D;for(;je<W;){const we=be[je];let Ne=null,ce=we>239?4:we>223?3:we>191?2:1;if(je+ce<=W){let ft,vt,F,Le;switch(ce){case 1:we<128&&(Ne=we);break;case 2:ft=be[je+1],(ft&192)===128&&(Le=(we&31)<<6|ft&63,Le>127&&(Ne=Le));break;case 3:ft=be[je+1],vt=be[je+2],(ft&192)===128&&(vt&192)===128&&(Le=(we&15)<<12|(ft&63)<<6|vt&63,Le>2047&&(Le<55296||Le>57343)&&(Ne=Le));break;case 4:ft=be[je+1],vt=be[je+2],F=be[je+3],(ft&192)===128&&(vt&192)===128&&(F&192)===128&&(Le=(we&15)<<18|(ft&63)<<12|(vt&63)<<6|F&63,Le>65535&&Le<1114112&&(Ne=Le))}}Ne===null?(Ne=65533,ce=1):Ne>65535&&(Ne-=65536,he.push(Ne>>>10&1023|55296),Ne=56320|Ne&1023),he.push(Ne),je+=ce}return ne(he)}const X=4096;function ne(be){const D=be.length;if(D<=X)return String.fromCharCode.apply(String,be);let W="",he=0;for(;he<D;)W+=String.fromCharCode.apply(String,be.slice(he,he+=X));return W}function q(be,D,W){let he="";W=Math.min(be.length,W);for(let je=D;je<W;++je)he+=String.fromCharCode(be[je]&127);return he}function J(be,D,W){let he="";W=Math.min(be.length,W);for(let je=D;je<W;++je)he+=String.fromCharCode(be[je]);return he}function Q(be,D,W){const he=be.length;(!D||D<0)&&(D=0),(!W||W<0||W>he)&&(W=he);let je="";for(let we=D;we<W;++we)je+=Ft[be[we]];return je}function te(be,D,W){const he=be.slice(D,W);let je="";for(let we=0;we<he.length-1;we+=2)je+=String.fromCharCode(he[we]+he[we+1]*256);return je}d.prototype.slice=function(D,W){const he=this.length;D=~~D,W=W===void 0?he:~~W,D<0?(D+=he,D<0&&(D=0)):D>he&&(D=he),W<0?(W+=he,W<0&&(W=0)):W>he&&(W=he),W<D&&(W=D);const je=this.subarray(D,W);return Object.setPrototypeOf(je,d.prototype),je};function ue(be,D,W){if(be%1!==0||be<0)throw new RangeError("offset is not uint");if(be+D>W)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(D,W,he){D=D>>>0,W=W>>>0,he||ue(D,W,this.length);let je=this[D],we=1,Ne=0;for(;++Ne<W&&(we*=256);)je+=this[D+Ne]*we;return je},d.prototype.readUintBE=d.prototype.readUIntBE=function(D,W,he){D=D>>>0,W=W>>>0,he||ue(D,W,this.length);let je=this[D+--W],we=1;for(;W>0&&(we*=256);)je+=this[D+--W]*we;return je},d.prototype.readUint8=d.prototype.readUInt8=function(D,W){return D=D>>>0,W||ue(D,1,this.length),this[D]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(D,W){return D=D>>>0,W||ue(D,2,this.length),this[D]|this[D+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(D,W){return D=D>>>0,W||ue(D,2,this.length),this[D]<<8|this[D+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(D,W){return D=D>>>0,W||ue(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(D,W){return D=D>>>0,W||ue(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},d.prototype.readBigUInt64LE=Mt(function(D){D=D>>>0,Te(D,"offset");const W=this[D],he=this[D+7];(W===void 0||he===void 0)&&fe(D,this.length-8);const je=W+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24,we=this[++D]+this[++D]*2**8+this[++D]*2**16+he*2**24;return BigInt(je)+(BigInt(we)<<BigInt(32))}),d.prototype.readBigUInt64BE=Mt(function(D){D=D>>>0,Te(D,"offset");const W=this[D],he=this[D+7];(W===void 0||he===void 0)&&fe(D,this.length-8);const je=W*2**24+this[++D]*2**16+this[++D]*2**8+this[++D],we=this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+he;return(BigInt(je)<<BigInt(32))+BigInt(we)}),d.prototype.readIntLE=function(D,W,he){D=D>>>0,W=W>>>0,he||ue(D,W,this.length);let je=this[D],we=1,Ne=0;for(;++Ne<W&&(we*=256);)je+=this[D+Ne]*we;return we*=128,je>=we&&(je-=Math.pow(2,8*W)),je},d.prototype.readIntBE=function(D,W,he){D=D>>>0,W=W>>>0,he||ue(D,W,this.length);let je=W,we=1,Ne=this[D+--je];for(;je>0&&(we*=256);)Ne+=this[D+--je]*we;return we*=128,Ne>=we&&(Ne-=Math.pow(2,8*W)),Ne},d.prototype.readInt8=function(D,W){return D=D>>>0,W||ue(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},d.prototype.readInt16LE=function(D,W){D=D>>>0,W||ue(D,2,this.length);const he=this[D]|this[D+1]<<8;return he&32768?he|4294901760:he},d.prototype.readInt16BE=function(D,W){D=D>>>0,W||ue(D,2,this.length);const he=this[D+1]|this[D]<<8;return he&32768?he|4294901760:he},d.prototype.readInt32LE=function(D,W){return D=D>>>0,W||ue(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},d.prototype.readInt32BE=function(D,W){return D=D>>>0,W||ue(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},d.prototype.readBigInt64LE=Mt(function(D){D=D>>>0,Te(D,"offset");const W=this[D],he=this[D+7];(W===void 0||he===void 0)&&fe(D,this.length-8);const je=this[D+4]+this[D+5]*2**8+this[D+6]*2**16+(he<<24);return(BigInt(je)<<BigInt(32))+BigInt(W+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24)}),d.prototype.readBigInt64BE=Mt(function(D){D=D>>>0,Te(D,"offset");const W=this[D],he=this[D+7];(W===void 0||he===void 0)&&fe(D,this.length-8);const je=(W<<24)+this[++D]*2**16+this[++D]*2**8+this[++D];return(BigInt(je)<<BigInt(32))+BigInt(this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+he)}),d.prototype.readFloatLE=function(D,W){return D=D>>>0,W||ue(D,4,this.length),n.read(this,D,!0,23,4)},d.prototype.readFloatBE=function(D,W){return D=D>>>0,W||ue(D,4,this.length),n.read(this,D,!1,23,4)},d.prototype.readDoubleLE=function(D,W){return D=D>>>0,W||ue(D,8,this.length),n.read(this,D,!0,52,8)},d.prototype.readDoubleBE=function(D,W){return D=D>>>0,W||ue(D,8,this.length),n.read(this,D,!1,52,8)};function ge(be,D,W,he,je,we){if(!d.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>je||D<we)throw new RangeError('"value" argument is out of bounds');if(W+he>be.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(D,W,he,je){if(D=+D,W=W>>>0,he=he>>>0,!je){const ce=Math.pow(2,8*he)-1;ge(this,D,W,he,ce,0)}let we=1,Ne=0;for(this[W]=D&255;++Ne<he&&(we*=256);)this[W+Ne]=D/we&255;return W+he},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(D,W,he,je){if(D=+D,W=W>>>0,he=he>>>0,!je){const ce=Math.pow(2,8*he)-1;ge(this,D,W,he,ce,0)}let we=he-1,Ne=1;for(this[W+we]=D&255;--we>=0&&(Ne*=256);)this[W+we]=D/Ne&255;return W+he},d.prototype.writeUint8=d.prototype.writeUInt8=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,1,255,0),this[W]=D&255,W+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,2,65535,0),this[W]=D&255,this[W+1]=D>>>8,W+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,2,65535,0),this[W]=D>>>8,this[W+1]=D&255,W+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,4,4294967295,0),this[W+3]=D>>>24,this[W+2]=D>>>16,this[W+1]=D>>>8,this[W]=D&255,W+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,4,4294967295,0),this[W]=D>>>24,this[W+1]=D>>>16,this[W+2]=D>>>8,this[W+3]=D&255,W+4};function Ie(be,D,W,he,je){Ee(D,he,je,be,W,7);let we=Number(D&BigInt(4294967295));be[W++]=we,we=we>>8,be[W++]=we,we=we>>8,be[W++]=we,we=we>>8,be[W++]=we;let Ne=Number(D>>BigInt(32)&BigInt(4294967295));return be[W++]=Ne,Ne=Ne>>8,be[W++]=Ne,Ne=Ne>>8,be[W++]=Ne,Ne=Ne>>8,be[W++]=Ne,W}function Ae(be,D,W,he,je){Ee(D,he,je,be,W,7);let we=Number(D&BigInt(4294967295));be[W+7]=we,we=we>>8,be[W+6]=we,we=we>>8,be[W+5]=we,we=we>>8,be[W+4]=we;let Ne=Number(D>>BigInt(32)&BigInt(4294967295));return be[W+3]=Ne,Ne=Ne>>8,be[W+2]=Ne,Ne=Ne>>8,be[W+1]=Ne,Ne=Ne>>8,be[W]=Ne,W+8}d.prototype.writeBigUInt64LE=Mt(function(D,W=0){return Ie(this,D,W,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Mt(function(D,W=0){return Ae(this,D,W,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(D,W,he,je){if(D=+D,W=W>>>0,!je){const ft=Math.pow(2,8*he-1);ge(this,D,W,he,ft-1,-ft)}let we=0,Ne=1,ce=0;for(this[W]=D&255;++we<he&&(Ne*=256);)D<0&&ce===0&&this[W+we-1]!==0&&(ce=1),this[W+we]=(D/Ne>>0)-ce&255;return W+he},d.prototype.writeIntBE=function(D,W,he,je){if(D=+D,W=W>>>0,!je){const ft=Math.pow(2,8*he-1);ge(this,D,W,he,ft-1,-ft)}let we=he-1,Ne=1,ce=0;for(this[W+we]=D&255;--we>=0&&(Ne*=256);)D<0&&ce===0&&this[W+we+1]!==0&&(ce=1),this[W+we]=(D/Ne>>0)-ce&255;return W+he},d.prototype.writeInt8=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,1,127,-128),D<0&&(D=255+D+1),this[W]=D&255,W+1},d.prototype.writeInt16LE=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,2,32767,-32768),this[W]=D&255,this[W+1]=D>>>8,W+2},d.prototype.writeInt16BE=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,2,32767,-32768),this[W]=D>>>8,this[W+1]=D&255,W+2},d.prototype.writeInt32LE=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,4,2147483647,-2147483648),this[W]=D&255,this[W+1]=D>>>8,this[W+2]=D>>>16,this[W+3]=D>>>24,W+4},d.prototype.writeInt32BE=function(D,W,he){return D=+D,W=W>>>0,he||ge(this,D,W,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[W]=D>>>24,this[W+1]=D>>>16,this[W+2]=D>>>8,this[W+3]=D&255,W+4},d.prototype.writeBigInt64LE=Mt(function(D,W=0){return Ie(this,D,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Mt(function(D,W=0){return Ae(this,D,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _e(be,D,W,he,je,we){if(W+he>be.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function ve(be,D,W,he,je){return D=+D,W=W>>>0,je||_e(be,D,W,4),n.write(be,D,W,he,23,4),W+4}d.prototype.writeFloatLE=function(D,W,he){return ve(this,D,W,!0,he)},d.prototype.writeFloatBE=function(D,W,he){return ve(this,D,W,!1,he)};function Be(be,D,W,he,je){return D=+D,W=W>>>0,je||_e(be,D,W,8),n.write(be,D,W,he,52,8),W+8}d.prototype.writeDoubleLE=function(D,W,he){return Be(this,D,W,!0,he)},d.prototype.writeDoubleBE=function(D,W,he){return Be(this,D,W,!1,he)},d.prototype.copy=function(D,W,he,je){if(!d.isBuffer(D))throw new TypeError("argument should be a Buffer");if(he||(he=0),!je&&je!==0&&(je=this.length),W>=D.length&&(W=D.length),W||(W=0),je>0&&je<he&&(je=he),je===he||D.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(je<0)throw new RangeError("sourceEnd out of bounds");je>this.length&&(je=this.length),D.length-W<je-he&&(je=D.length-W+he);const we=je-he;return this===D&&typeof i.prototype.copyWithin=="function"?this.copyWithin(W,he,je):i.prototype.set.call(D,this.subarray(he,je),W),we},d.prototype.fill=function(D,W,he,je){if(typeof D=="string"){if(typeof W=="string"?(je=W,W=0,he=this.length):typeof he=="string"&&(je=he,he=this.length),je!==void 0&&typeof je!="string")throw new TypeError("encoding must be a string");if(typeof je=="string"&&!d.isEncoding(je))throw new TypeError("Unknown encoding: "+je);if(D.length===1){const Ne=D.charCodeAt(0);(je==="utf8"&&Ne<128||je==="latin1")&&(D=Ne)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(W<0||this.length<W||this.length<he)throw new RangeError("Out of range index");if(he<=W)return this;W=W>>>0,he=he===void 0?this.length:he>>>0,D||(D=0);let we;if(typeof D=="number")for(we=W;we<he;++we)this[we]=D;else{const Ne=d.isBuffer(D)?D:d.from(D,je),ce=Ne.length;if(ce===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(we=0;we<he-W;++we)this[we+W]=Ne[we%ce]}return this};const nt={};function Ve(be,D,W){nt[be]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${be}]`,this.stack,delete this.name}get code(){return be}set code(je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:je,writable:!0})}toString(){return`${this.name} [${be}]: ${this.message}`}}}Ve("ERR_BUFFER_OUT_OF_BOUNDS",function(be){return be?`${be} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ve("ERR_INVALID_ARG_TYPE",function(be,D){return`The "${be}" argument must be of type number. Received type ${typeof D}`},TypeError),Ve("ERR_OUT_OF_RANGE",function(be,D,W){let he=`The value of "${be}" is out of range.`,je=W;return Number.isInteger(W)&&Math.abs(W)>2**32?je=De(String(W)):typeof W=="bigint"&&(je=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(je=De(je)),je+="n"),he+=` It must be ${D}. Received ${je}`,he},RangeError);function De(be){let D="",W=be.length;const he=be[0]==="-"?1:0;for(;W>=he+4;W-=3)D=`_${be.slice(W-3,W)}${D}`;return`${be.slice(0,W)}${D}`}function $(be,D,W){Te(D,"offset"),(be[D]===void 0||be[D+W]===void 0)&&fe(D,be.length-(W+1))}function Ee(be,D,W,he,je,we){if(be>W||be<D){const Ne=typeof D=="bigint"?"n":"";let ce;throw D===0||D===BigInt(0)?ce=`>= 0${Ne} and < 2${Ne} ** ${(we+1)*8}${Ne}`:ce=`>= -(2${Ne} ** ${(we+1)*8-1}${Ne}) and < 2 ** ${(we+1)*8-1}${Ne}`,new nt.ERR_OUT_OF_RANGE("value",ce,be)}$(he,je,we)}function Te(be,D){if(typeof be!="number")throw new nt.ERR_INVALID_ARG_TYPE(D,"number",be)}function fe(be,D,W){throw Math.floor(be)!==be?(Te(be,W),new nt.ERR_OUT_OF_RANGE("offset","an integer",be)):D<0?new nt.ERR_BUFFER_OUT_OF_BOUNDS:new nt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,be)}const oe=/[^+/0-9A-Za-z-_]/g;function ee(be){if(be=be.split("=")[0],be=be.trim().replace(oe,""),be.length<2)return"";for(;be.length%4!==0;)be=be+"=";return be}function Se(be,D){D=D||1/0;let W;const he=be.length;let je=null;const we=[];for(let Ne=0;Ne<he;++Ne){if(W=be.charCodeAt(Ne),W>55295&&W<57344){if(!je){if(W>56319){(D-=3)>-1&&we.push(239,191,189);continue}else if(Ne+1===he){(D-=3)>-1&&we.push(239,191,189);continue}je=W;continue}if(W<56320){(D-=3)>-1&&we.push(239,191,189),je=W;continue}W=(je-55296<<10|W-56320)+65536}else je&&(D-=3)>-1&&we.push(239,191,189);if(je=null,W<128){if((D-=1)<0)break;we.push(W)}else if(W<2048){if((D-=2)<0)break;we.push(W>>6|192,W&63|128)}else if(W<65536){if((D-=3)<0)break;we.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((D-=4)<0)break;we.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return we}function Pe(be){const D=[];for(let W=0;W<be.length;++W)D.push(be.charCodeAt(W)&255);return D}function ke(be,D){let W,he,je;const we=[];for(let Ne=0;Ne<be.length&&!((D-=2)<0);++Ne)W=be.charCodeAt(Ne),he=W>>8,je=W%256,we.push(je),we.push(he);return we}function We(be){return t.toByteArray(ee(be))}function Nt(be,D,W,he){let je;for(je=0;je<he&&!(je+W>=D.length||je>=be.length);++je)D[je+W]=be[je];return je}function it(be,D){return be instanceof D||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===D.name}function Et(be){return be!==be}const Ft=function(){const be="0123456789abcdef",D=new Array(256);for(let W=0;W<16;++W){const he=W*16;for(let je=0;je<16;++je)D[he+je]=be[W]+be[je]}return D}();function Mt(be){return typeof BigInt>"u"?Yt:be}function Yt(){throw new Error("BigInt not supported")}})(SA);const Qt=SA.Buffer,Lr=SA.Buffer;var zd={exports:{}},F4;function mJ(){if(F4)return zd.exports;F4=1;const e=typeof Qt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),e&&Qt.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const h=u&&u.protoAction||"error",m=u&&u.constructorAction||"error";if(h==="ignore"&&m==="ignore")return d;if(h!=="ignore"&&m!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return d}else if(h!=="ignore"&&m==="ignore"){if(t.test(o)===!1)return d}else if(n.test(o)===!1)return d;return a(d,{protoAction:h,constructorAction:m,safe:u&&u.safe})}function a(o,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let h=[o];for(;h.length;){const m=h;h=[];for(const g of m){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return o}function i(o,l,u){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,u)}finally{Error.stackTraceLimit=d}}function s(o,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return zd.exports=i,zd.exports.default=i,zd.exports.parse=i,zd.exports.safeParse=s,zd.exports.scan=a,zd.exports}var gJ=mJ();const Vp=vi(gJ);var yJ={};function fa(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function bJ(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function vJ(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function wJ(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,g=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,g)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=xJ(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function xJ(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Hp(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var If=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=sJ(n,t);if(e==null)return a;if(n.includes(r))throw new f5({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},qi=If();function _J(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function SJ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Mw(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function O5({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Nv({message:`${r} API key must be a string.`});if(typeof da>"u")throw new Nv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=yJ[t],e==null)throw new Nv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Nv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var tx=Symbol.for("vercel.ai.validator");function EJ(e){return{[tx]:!0,validate:e}}function CJ(e){return typeof e=="object"&&e!==null&&tx in e&&e[tx]===!0&&"validate"in e}function TJ(e){return CJ(e)?e:kJ(e)}function kJ(e){return EJ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function AJ({value:e,schema:t}){const n=qp({value:e,schema:t});if(!n.success)throw ex.wrap({value:e,cause:n.error});return n.value}function qp({value:e,schema:t}){const n=TJ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ex.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ex.wrap({value:e,cause:r})}}}function NJ({text:e,schema:t}){try{const n=Vp.parse(e);return t==null?n:AJ({value:n,schema:t})}catch(n){throw Qw.isInstance(n)||ex.isInstance(n)?n:new Qw({text:e,cause:n})}}function gf({text:e,schema:t}){try{const n=Vp.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=qp({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Qw.isInstance(n)?n:new Qw({text:e,cause:n})}}}function nx(e){try{return Vp.parse(e),!0}catch{return!1}}function S1({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=qp({value:t[e],schema:n});if(!r.success)throw new f5({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var RJ=()=>globalThis.fetch,ha=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>P5({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),IJ=async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>P5({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),P5=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=RJ()})=>{try{const o=await s(e,{method:"POST",headers:SJ(t),body:n.content,signal:i}),l=Hp(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw Mw(d)||Vs.isInstance(d)?d:new Vs({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Mw(u)||Vs.isInstance(u))?u:new Vs({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(Mw(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new Vs({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function OT(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var jf=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=Hp(r);if(s.trim()==="")return{responseHeaders:o,value:new Vs({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=NJ({text:s,schema:e});return{responseHeaders:o,value:new Vs({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new Vs({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},Gp=e=>async({response:t})=>{const n=Hp(t);if(t.body==null)throw new l5({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(wJ()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(gf({text:r,schema:e}))}}))}},ns=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=gf({text:a,schema:e}),s=Hp(t);if(!i.success)throw new Vs({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},jJ=()=>async({response:e,url:t,requestBodyValues:n})=>{const r=Hp(e);if(!e.body)throw new Vs({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{const a=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(a)}}catch(a){throw new Vs({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:a})}},{btoa:DJ,atob:MJ}=globalThis;function E1(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=MJ(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Fu(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return DJ(t)}function C1(e){return e==null?void 0:e.replace(/\/$/,"")}var sr;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},e.find=(a,i)=>{for(const s of a)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(sr||(sr={}));var PT;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(PT||(PT={}));const rn=sr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),nc=e=>{switch(typeof e){case"undefined":return rn.undefined;case"string":return rn.string;case"number":return isNaN(e)?rn.nan:rn.number;case"boolean":return rn.boolean;case"function":return rn.function;case"bigint":return rn.bigint;case"symbol":return rn.symbol;case"object":return Array.isArray(e)?rn.array:e===null?rn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?rn.promise:typeof Map<"u"&&e instanceof Map?rn.map:typeof Set<"u"&&e instanceof Set?rn.set:typeof Date<"u"&&e instanceof Date?rn.date:rn.object;default:return rn.unknown}},Bt=sr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),OJ=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class vs extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(s))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof vs))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,sr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}vs.create=e=>new vs(e);const vp=(e,t)=>{let n;switch(e.code){case Bt.invalid_type:e.received===rn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Bt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,sr.jsonStringifyReplacer)}`;break;case Bt.unrecognized_keys:n=`Unrecognized key(s) in object: ${sr.joinValues(e.keys,", ")}`;break;case Bt.invalid_union:n="Invalid input";break;case Bt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${sr.joinValues(e.options)}`;break;case Bt.invalid_enum_value:n=`Invalid enum value. Expected ${sr.joinValues(e.options)}, received '${e.received}'`;break;case Bt.invalid_arguments:n="Invalid function arguments";break;case Bt.invalid_return_type:n="Invalid function return type";break;case Bt.invalid_date:n="Invalid date";break;case Bt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:sr.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Bt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Bt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Bt.custom:n="Invalid input";break;case Bt.invalid_intersection_types:n="Intersection results could not be merged";break;case Bt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Bt.not_finite:n="Number must be finite";break;default:n=t.defaultError,sr.assertNever(e)}return{message:n}};let F5=vp;function PJ(e){F5=e}function rx(){return F5}const ax=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},FJ=[];function tn(e,t){const n=rx(),r=ax({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===vp?void 0:vp].filter(a=>!!a)});e.common.issues.push(r)}class gi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return Tn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,s=await a.value;r.push({key:i,value:s})}return gi.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return Tn;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:t.value,value:r}}}const Tn=Object.freeze({status:"aborted"}),Yh=e=>({status:"dirty",value:e}),Di=e=>({status:"valid",value:e}),FT=e=>e.status==="aborted",LT=e=>e.status==="dirty",yf=e=>e.status==="valid",u0=e=>typeof Promise<"u"&&e instanceof Promise;function ix(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function L5(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var dn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(dn||(dn={}));var Bg,$g;class ml{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const L4=(e,t)=>{if(yf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new vs(e.common.issues);return this._error=n,this._error}}};function Ln(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,o)=>{var l,u;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:o.defaultError}},description:a}}class zn{get description(){return this._def.description}_getType(t){return nc(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:nc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new gi,ctx:{common:t.parent.common,data:t.data,parsedType:nc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(u0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nc(t)},i=this._parseSync({data:t,path:a.path,parent:a});return L4(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nc(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return yf(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>yf(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:nc(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(u0(a)?a:Promise.resolve(a));return L4(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const s=t(a),o=()=>i.addIssue({code:Bt.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new So({schema:this,typeName:Ht.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return vo.create(this,this._def)}nullable(){return zu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return bo.create(this)}promise(){return xp.create(this,this._def)}or(t){return p0.create([this,t],this._def)}and(t){return m0.create(this,t,this._def)}transform(t){return new So({...Ln(this._def),schema:this,typeName:Ht.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new w0({...Ln(this._def),innerType:this,defaultValue:n,typeName:Ht.ZodDefault})}brand(){return new CA({typeName:Ht.ZodBranded,type:this,...Ln(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new x0({...Ln(this._def),innerType:this,catchValue:n,typeName:Ht.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return _y.create(this,t)}readonly(){return _0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LJ=/^c[^\s-]{8,}$/i,BJ=/^[0-9a-z]+$/,$J=/^[0-9A-HJKMNP-TV-Z]{26}$/i,zJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,UJ=/^[a-z0-9_-]{21}$/i,VJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,HJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,qJ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,GJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Q2;const WJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,KJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ZJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,YJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,XJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,JJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,B5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",QJ=new RegExp(`^${B5}$`);function $5(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function eQ(e){return new RegExp(`^${$5(e)}$`)}function z5(e){let t=`${B5}T${$5(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function tQ(e,t){return!!((t==="v4"||!t)&&WJ.test(e)||(t==="v6"||!t)&&ZJ.test(e))}function nQ(e,t){if(!VJ.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function rQ(e,t){return!!((t==="v4"||!t)&&KJ.test(e)||(t==="v6"||!t)&&YJ.test(e))}class go extends zn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==rn.string){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.string,received:i.parsedType}),Tn}const r=new gi;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=t.data.length>i.value,o=t.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(t,a),s?tn(a,{code:Bt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&tn(a,{code:Bt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")qJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"email",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Q2||(Q2=new RegExp(GJ,"u")),Q2.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"emoji",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")zJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"uuid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")UJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"nanoid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")LJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")BJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid2",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")$J.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ulid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),tn(a,{validation:"url",code:Bt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"regex",code:Bt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?z5(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?QJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?eQ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?HJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"duration",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?tQ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ip",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?nQ(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"jwt",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?rQ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cidr",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?XJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?JJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64url",code:Bt.invalid_string,message:i.message}),r.dirty()):sr.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Bt.invalid_string,...dn.errToObj(r)})}_addCheck(t){return new go({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...dn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...dn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...dn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...dn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...dn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...dn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...dn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...dn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...dn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...dn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...dn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...dn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...dn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...dn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...dn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...dn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...dn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...dn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...dn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...dn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...dn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...dn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...dn.errToObj(n)})}nonempty(t){return this.min(1,dn.errToObj(t))}trim(){return new go({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new go({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new go({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}go.create=e=>{var t;return new go({checks:[],typeName:Ht.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ln(e)})};function aQ(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class Lu extends zn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==rn.number){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.number,received:i.parsedType}),Tn}let r;const a=new gi;for(const i of this._def.checks)i.kind==="int"?sr.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?aQ(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_finite,message:i.message}),a.dirty()):sr.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,dn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,dn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,dn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,dn.toString(n))}setLimit(t,n,r,a){return new Lu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:dn.toString(a)}]})}_addCheck(t){return new Lu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:dn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:dn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:dn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:dn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:dn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:dn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:dn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:dn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:dn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&sr.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Lu.create=e=>new Lu({checks:[],typeName:Ht.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ln(e)});class Bu extends zn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==rn.bigint)return this._getInvalidInput(t);let r;const a=new gi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):sr.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return tn(n,{code:Bt.invalid_type,expected:rn.bigint,received:n.parsedType}),Tn}gte(t,n){return this.setLimit("min",t,!0,dn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,dn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,dn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,dn.toString(n))}setLimit(t,n,r,a){return new Bu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:dn.toString(a)}]})}_addCheck(t){return new Bu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:dn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:dn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:dn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:dn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:dn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Bu.create=e=>{var t;return new Bu({checks:[],typeName:Ht.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ln(e)})};class d0 extends zn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==rn.boolean){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.boolean,received:r.parsedType}),Tn}return Di(t.data)}}d0.create=e=>new d0({typeName:Ht.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ln(e)});class bf extends zn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==rn.date){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.date,received:i.parsedType}),Tn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_date}),Tn}const r=new gi;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):sr.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new bf({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:dn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:dn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}bf.create=e=>new bf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Ht.ZodDate,...Ln(e)});class sx extends zn{_parse(t){if(this._getType(t)!==rn.symbol){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.symbol,received:r.parsedType}),Tn}return Di(t.data)}}sx.create=e=>new sx({typeName:Ht.ZodSymbol,...Ln(e)});class f0 extends zn{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.undefined,received:r.parsedType}),Tn}return Di(t.data)}}f0.create=e=>new f0({typeName:Ht.ZodUndefined,...Ln(e)});class h0 extends zn{_parse(t){if(this._getType(t)!==rn.null){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.null,received:r.parsedType}),Tn}return Di(t.data)}}h0.create=e=>new h0({typeName:Ht.ZodNull,...Ln(e)});class wp extends zn{constructor(){super(...arguments),this._any=!0}_parse(t){return Di(t.data)}}wp.create=e=>new wp({typeName:Ht.ZodAny,...Ln(e)});class df extends zn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Di(t.data)}}df.create=e=>new df({typeName:Ht.ZodUnknown,...Ln(e)});class wc extends zn{_parse(t){const n=this._getOrReturnCtx(t);return tn(n,{code:Bt.invalid_type,expected:rn.never,received:n.parsedType}),Tn}}wc.create=e=>new wc({typeName:Ht.ZodNever,...Ln(e)});class ox extends zn{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.void,received:r.parsedType}),Tn}return Di(t.data)}}ox.create=e=>new ox({typeName:Ht.ZodVoid,...Ln(e)});class bo extends zn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==rn.array)return tn(n,{code:Bt.invalid_type,expected:rn.array,received:n.parsedType}),Tn;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(s||o)&&(tn(n,{code:s?Bt.too_big:Bt.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(tn(n,{code:Bt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(tn(n,{code:Bt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>a.type._parseAsync(new ml(n,s,n.path,o)))).then(s=>gi.mergeArray(r,s));const i=[...n.data].map((s,o)=>a.type._parseSync(new ml(n,s,n.path,o)));return gi.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new bo({...this._def,minLength:{value:t,message:dn.toString(n)}})}max(t,n){return new bo({...this._def,maxLength:{value:t,message:dn.toString(n)}})}length(t,n){return new bo({...this._def,exactLength:{value:t,message:dn.toString(n)}})}nonempty(t){return this.min(1,t)}}bo.create=(e,t)=>new bo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ht.ZodArray,...Ln(t)});function Wh(e){if(e instanceof Xr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=vo.create(Wh(r))}return new Xr({...e._def,shape:()=>t})}else return e instanceof bo?new bo({...e._def,type:Wh(e.element)}):e instanceof vo?vo.create(Wh(e.unwrap())):e instanceof zu?zu.create(Wh(e.unwrap())):e instanceof gl?gl.create(e.items.map(t=>Wh(t))):e}class Xr extends zn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=sr.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==rn.object){const u=this._getOrReturnCtx(t);return tn(u,{code:Bt.invalid_type,expected:rn.object,received:u.parsedType}),Tn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof wc&&this._def.unknownKeys==="strip"))for(const u in a.data)s.includes(u)||o.push(u);const l=[];for(const u of s){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new ml(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof wc){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")o.length>0&&(tn(a,{code:Bt.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new ml(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>gi.mergeObjectSync(r,u)):gi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return dn.errToObj,new Xr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,s,o;const l=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=dn.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Xr({...this._def,unknownKeys:"strip"})}passthrough(){return new Xr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Xr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Xr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ht.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Xr({...this._def,catchall:t})}pick(t){const n={};return sr.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Xr({...this._def,shape:()=>n})}omit(t){const n={};return sr.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Xr({...this._def,shape:()=>n})}deepPartial(){return Wh(this)}partial(t){const n={};return sr.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Xr({...this._def,shape:()=>n})}required(t){const n={};return sr.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof vo;)i=i._def.innerType;n[r]=i}}),new Xr({...this._def,shape:()=>n})}keyof(){return U5(sr.objectKeys(this.shape))}}Xr.create=(e,t)=>new Xr({shape:()=>e,unknownKeys:"strip",catchall:wc.create(),typeName:Ht.ZodObject,...Ln(t)});Xr.strictCreate=(e,t)=>new Xr({shape:()=>e,unknownKeys:"strict",catchall:wc.create(),typeName:Ht.ZodObject,...Ln(t)});Xr.lazycreate=(e,t)=>new Xr({shape:e,unknownKeys:"strip",catchall:wc.create(),typeName:Ht.ZodObject,...Ln(t)});class p0 extends zn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new vs(o.ctx.common.issues));return tn(n,{code:Bt.invalid_union,unionErrors:s}),Tn}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(l=>new vs(l));return tn(n,{code:Bt.invalid_union,unionErrors:o}),Tn}}get options(){return this._def.options}}p0.create=(e,t)=>new p0({options:e,typeName:Ht.ZodUnion,...Ln(t)});const Ql=e=>e instanceof y0?Ql(e.schema):e instanceof So?Ql(e.innerType()):e instanceof b0?[e.value]:e instanceof $u?e.options:e instanceof v0?sr.objectValues(e.enum):e instanceof w0?Ql(e._def.innerType):e instanceof f0?[void 0]:e instanceof h0?[null]:e instanceof vo?[void 0,...Ql(e.unwrap())]:e instanceof zu?[null,...Ql(e.unwrap())]:e instanceof CA||e instanceof _0?Ql(e.unwrap()):e instanceof x0?Ql(e._def.innerType):[];class T1 extends zn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.object)return tn(n,{code:Bt.invalid_type,expected:rn.object,received:n.parsedType}),Tn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:Bt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Tn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const s=Ql(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new T1({typeName:Ht.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Ln(r)})}}function BT(e,t){const n=nc(e),r=nc(t);if(e===t)return{valid:!0,data:e};if(n===rn.object&&r===rn.object){const a=sr.objectKeys(t),i=sr.objectKeys(e).filter(o=>a.indexOf(o)!==-1),s={...e,...t};for(const o of i){const l=BT(e[o],t[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===rn.array&&r===rn.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const s=e[i],o=t[i],l=BT(s,o);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===rn.date&&r===rn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class m0 extends zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,s)=>{if(FT(i)||FT(s))return Tn;const o=BT(i.value,s.value);return o.valid?((LT(i)||LT(s))&&n.dirty(),{status:n.value,value:o.data}):(tn(r,{code:Bt.invalid_intersection_types}),Tn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}m0.create=(e,t,n)=>new m0({left:e,right:t,typeName:Ht.ZodIntersection,...Ln(n)});class gl extends zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.array)return tn(r,{code:Bt.invalid_type,expected:rn.array,received:r.parsedType}),Tn;if(r.data.length<this._def.items.length)return tn(r,{code:Bt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Tn;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:Bt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new ml(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>gi.mergeArray(n,s)):gi.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new gl({...this._def,rest:t})}}gl.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new gl({items:e,typeName:Ht.ZodTuple,rest:null,...Ln(t)})};class g0 extends zn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.object)return tn(r,{code:Bt.invalid_type,expected:rn.object,received:r.parsedType}),Tn;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new ml(r,o,r.path,o)),value:s._parse(new ml(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?gi.mergeObjectAsync(n,a):gi.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof zn?new g0({keyType:t,valueType:n,typeName:Ht.ZodRecord,...Ln(r)}):new g0({keyType:go.create(),valueType:t,typeName:Ht.ZodRecord,...Ln(n)})}}class lx extends zn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.map)return tn(r,{code:Bt.invalid_type,expected:rn.map,received:r.parsedType}),Tn;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,l],u)=>({key:a._parse(new ml(r,o,r.path,[u,"key"])),value:i._parse(new ml(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return Tn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return Tn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}lx.create=(e,t,n)=>new lx({valueType:t,keyType:e,typeName:Ht.ZodMap,...Ln(n)});class vf extends zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.set)return tn(r,{code:Bt.invalid_type,expected:rn.set,received:r.parsedType}),Tn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(tn(r,{code:Bt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(tn(r,{code:Bt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return Tn;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new ml(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(t,n){return new vf({...this._def,minSize:{value:t,message:dn.toString(n)}})}max(t,n){return new vf({...this._def,maxSize:{value:t,message:dn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}vf.create=(e,t)=>new vf({valueType:e,minSize:null,maxSize:null,typeName:Ht.ZodSet,...Ln(t)});class cp extends zn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.function)return tn(n,{code:Bt.invalid_type,expected:rn.function,received:n.parsedType}),Tn;function r(o,l){return ax({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rx(),vp].filter(u=>!!u),issueData:{code:Bt.invalid_arguments,argumentsError:l}})}function a(o,l){return ax({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,rx(),vp].filter(u=>!!u),issueData:{code:Bt.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof xp){const o=this;return Di(async function(...l){const u=new vs([]),d=await o._def.args.parseAsync(l,i).catch(g=>{throw u.addIssue(r(l,g)),u}),h=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(g=>{throw u.addIssue(a(h,g)),u})})}else{const o=this;return Di(function(...l){const u=o._def.args.safeParse(l,i);if(!u.success)throw new vs([r(l,u.error)]);const d=Reflect.apply(s,this,u.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new vs([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new cp({...this._def,args:gl.create(t).rest(df.create())})}returns(t){return new cp({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new cp({args:t||gl.create([]).rest(df.create()),returns:n||df.create(),typeName:Ht.ZodFunction,...Ln(r)})}}class y0 extends zn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}y0.create=(e,t)=>new y0({getter:e,typeName:Ht.ZodLazy,...Ln(t)});class b0 extends zn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return tn(n,{received:n.data,code:Bt.invalid_literal,expected:this._def.value}),Tn}return{status:"valid",value:t.data}}get value(){return this._def.value}}b0.create=(e,t)=>new b0({value:e,typeName:Ht.ZodLiteral,...Ln(t)});function U5(e,t){return new $u({values:e,typeName:Ht.ZodEnum,...Ln(t)})}class $u extends zn{constructor(){super(...arguments),Bg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{expected:sr.joinValues(r),received:n.parsedType,code:Bt.invalid_type}),Tn}if(ix(this,Bg)||L5(this,Bg,new Set(this._def.values)),!ix(this,Bg).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{received:n.data,code:Bt.invalid_enum_value,options:r}),Tn}return Di(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return $u.create(t,{...this._def,...n})}exclude(t,n=this._def){return $u.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Bg=new WeakMap;$u.create=U5;class v0 extends zn{constructor(){super(...arguments),$g.set(this,void 0)}_parse(t){const n=sr.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==rn.string&&r.parsedType!==rn.number){const a=sr.objectValues(n);return tn(r,{expected:sr.joinValues(a),received:r.parsedType,code:Bt.invalid_type}),Tn}if(ix(this,$g)||L5(this,$g,new Set(sr.getValidEnumValues(this._def.values))),!ix(this,$g).has(t.data)){const a=sr.objectValues(n);return tn(r,{received:r.data,code:Bt.invalid_enum_value,options:a}),Tn}return Di(t.data)}get enum(){return this._def.values}}$g=new WeakMap;v0.create=(e,t)=>new v0({values:e,typeName:Ht.ZodNativeEnum,...Ln(t)});class xp extends zn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.promise&&n.common.async===!1)return tn(n,{code:Bt.invalid_type,expected:rn.promise,received:n.parsedType}),Tn;const r=n.parsedType===rn.promise?n.data:Promise.resolve(n.data);return Di(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}xp.create=(e,t)=>new xp({type:e,typeName:Ht.ZodPromise,...Ln(t)});class So extends zn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ht.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:s=>{tn(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return Tn;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?Tn:l.status==="dirty"||n.value==="dirty"?Yh(l.value):l});{if(n.value==="aborted")return Tn;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?Tn:o.status==="dirty"||n.value==="dirty"?Yh(o.value):o}}if(a.type==="refinement"){const s=o=>{const l=a.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Tn:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?Tn:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!yf(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>yf(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:n.value,value:o})):s);sr.assertNever(a)}}So.create=(e,t,n)=>new So({schema:e,typeName:Ht.ZodEffects,effect:t,...Ln(n)});So.createWithPreprocess=(e,t,n)=>new So({schema:t,effect:{type:"preprocess",transform:e},typeName:Ht.ZodEffects,...Ln(n)});class vo extends zn{_parse(t){return this._getType(t)===rn.undefined?Di(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}vo.create=(e,t)=>new vo({innerType:e,typeName:Ht.ZodOptional,...Ln(t)});class zu extends zn{_parse(t){return this._getType(t)===rn.null?Di(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}zu.create=(e,t)=>new zu({innerType:e,typeName:Ht.ZodNullable,...Ln(t)});class w0 extends zn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===rn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}w0.create=(e,t)=>new w0({innerType:e,typeName:Ht.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ln(t)});class x0 extends zn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return u0(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new vs(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new vs(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}x0.create=(e,t)=>new x0({innerType:e,typeName:Ht.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ln(t)});class cx extends zn{_parse(t){if(this._getType(t)!==rn.nan){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.nan,received:r.parsedType}),Tn}return{status:"valid",value:t.data}}}cx.create=e=>new cx({typeName:Ht.ZodNaN,...Ln(e)});const iQ=Symbol("zod_brand");class CA extends zn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class _y extends zn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Tn:i.status==="dirty"?(n.dirty(),Yh(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Tn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new _y({in:t,out:n,typeName:Ht.ZodPipeline})}}class _0 extends zn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(yf(a)&&(a.value=Object.freeze(a.value)),a);return u0(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}_0.create=(e,t)=>new _0({innerType:e,typeName:Ht.ZodReadonly,...Ln(t)});function B4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function V5(e,t={},n){return e?wp.create().superRefine((r,a)=>{var i,s;const o=e(r);if(o instanceof Promise)return o.then(l=>{var u,d;if(!l){const h=B4(t,r),m=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!o){const l=B4(t,r),u=(s=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...l,fatal:u})}}):wp.create()}const sQ={object:Xr.lazycreate};var Ht;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ht||(Ht={}));const oQ=(e,t={message:`Input not instance of ${e.name}`})=>V5(n=>n instanceof e,t),H5=go.create,q5=Lu.create,lQ=cx.create,cQ=Bu.create,G5=d0.create,uQ=bf.create,dQ=sx.create,fQ=f0.create,hQ=h0.create,pQ=wp.create,mQ=df.create,gQ=wc.create,yQ=ox.create,bQ=bo.create,vQ=Xr.create,wQ=Xr.strictCreate,xQ=p0.create,_Q=T1.create,SQ=m0.create,EQ=gl.create,CQ=g0.create,TQ=lx.create,kQ=vf.create,AQ=cp.create,NQ=y0.create,RQ=b0.create,IQ=$u.create,jQ=v0.create,DQ=xp.create,$4=So.create,MQ=vo.create,OQ=zu.create,PQ=So.createWithPreprocess,FQ=_y.create,LQ=()=>H5().optional(),BQ=()=>q5().optional(),$Q=()=>G5().optional(),zQ={string:e=>go.create({...e,coerce:!0}),number:e=>Lu.create({...e,coerce:!0}),boolean:e=>d0.create({...e,coerce:!0}),bigint:e=>Bu.create({...e,coerce:!0}),date:e=>bf.create({...e,coerce:!0})},UQ=Tn;var z=Object.freeze({__proto__:null,defaultErrorMap:vp,setErrorMap:PJ,getErrorMap:rx,makeIssue:ax,EMPTY_PATH:FJ,addIssueToContext:tn,ParseStatus:gi,INVALID:Tn,DIRTY:Yh,OK:Di,isAborted:FT,isDirty:LT,isValid:yf,isAsync:u0,get util(){return sr},get objectUtil(){return PT},ZodParsedType:rn,getParsedType:nc,ZodType:zn,datetimeRegex:z5,ZodString:go,ZodNumber:Lu,ZodBigInt:Bu,ZodBoolean:d0,ZodDate:bf,ZodSymbol:sx,ZodUndefined:f0,ZodNull:h0,ZodAny:wp,ZodUnknown:df,ZodNever:wc,ZodVoid:ox,ZodArray:bo,ZodObject:Xr,ZodUnion:p0,ZodDiscriminatedUnion:T1,ZodIntersection:m0,ZodTuple:gl,ZodRecord:g0,ZodMap:lx,ZodSet:vf,ZodFunction:cp,ZodLazy:y0,ZodLiteral:b0,ZodEnum:$u,ZodNativeEnum:v0,ZodPromise:xp,ZodEffects:So,ZodTransformer:So,ZodOptional:vo,ZodNullable:zu,ZodDefault:w0,ZodCatch:x0,ZodNaN:cx,BRAND:iQ,ZodBranded:CA,ZodPipeline:_y,ZodReadonly:_0,custom:V5,Schema:zn,ZodSchema:zn,late:sQ,get ZodFirstPartyTypeKind(){return Ht},coerce:zQ,any:pQ,array:bQ,bigint:cQ,boolean:G5,date:uQ,discriminatedUnion:_Q,effect:$4,enum:IQ,function:AQ,instanceof:oQ,intersection:SQ,lazy:NQ,literal:RQ,map:TQ,nan:lQ,nativeEnum:jQ,never:gQ,null:hQ,nullable:OQ,number:q5,object:vQ,oboolean:$Q,onumber:BQ,optional:MQ,ostring:LQ,pipeline:FQ,preprocess:PQ,promise:DQ,record:CQ,set:kQ,strictObject:wQ,string:H5,symbol:dQ,transformer:$4,tuple:EQ,undefined:fQ,union:xQ,unknown:mQ,void:yQ,NEVER:UQ,ZodIssueCode:Bt,quotelessJson:OJ,ZodError:vs});function VQ({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:s});break}case"developer":{r.push({role:"developer",content:s});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){r.push({role:"user",content:s[0].text});break}r.push({role:"user",content:s.map((o,l)=>{var u,d,h,m;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${Fu(o.image)}`,detail:(h=(d=o.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(o.data instanceof URL)throw new dr({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=o.filename)!=null?m:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new dr({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const u of s)switch(u.type){case"text":{o+=u.text;break}case"tool-call":{l.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}}if(t){if(l.length>1)throw new dr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of s)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:a}}function z4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function ux(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var TA=z.object({error:z.object({message:z.string(),type:z.string().nullish(),param:z.any().nullish(),code:z.union([z.string(),z.number()]).nullish()})}),yl=jf({errorSchema:TA,errorToMessage:e=>e.error.message});function dx({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function HQ({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice;if(t){const u=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):u.push({name:h.name,description:h.description,parameters:h.parameters});if(s==null)return{functions:u,function_call:void 0,toolWarnings:i};switch(s.type){case"auto":case"none":case void 0:return{functions:u,function_call:void 0,toolWarnings:i};case"required":throw new dr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:u,function_call:{name:s.toolName},toolWarnings:i}}}const o=[];for(const u of a)u.type==="provider-defined"?i.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:n?!0:void 0}});if(s==null)return{tools:o,tool_choice:void 0,toolWarnings:i};const l=s.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:i};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const u=l;throw new dr({functionality:`Unsupported tool choice type: ${u}`})}}}var qQ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:$T(this.modelId)}get defaultObjectGenerationMode(){return KQ(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,g,v,b,w,x,_,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const I=this.settings.useLegacyFunctionCalling;if(I&&this.settings.parallelToolCalls===!0)throw new dr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(I&&this.supportsStructuredOutputs)throw new dr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:j,warnings:N}=VQ({prompt:t,useLegacyFunctionCalling:I,systemMessageMode:ZQ(this.modelId)});k.push(...N);const P={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:(m=u.name)!=null?m:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(w=h==null?void 0:h.openai)==null?void 0:w.prediction,reasoning_effort:(_=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?_:this.settings.reasoningEffort,messages:j};switch($T(this.modelId)?(P.temperature!=null&&(P.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),P.top_p!=null&&(P.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),P.frequency_penalty!=null&&(P.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),P.presence_penalty!=null&&(P.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),P.logit_bias!=null&&(P.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),P.logprobs!=null&&(P.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),P.top_logprobs!=null&&(P.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),P.max_tokens!=null&&(P.max_completion_tokens==null&&(P.max_completion_tokens=P.max_tokens),P.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&P.temperature!=null&&(P.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),C){case"regular":{const{tools:L,tool_choice:H,functions:M,function_call:K,toolWarnings:U}=HQ({mode:e,useLegacyFunctionCalling:I,structuredOutputs:this.supportsStructuredOutputs});return{args:{...P,tools:L,tool_choice:H,functions:M,function_call:K},warnings:[...k,...U]}}case"object-json":return{args:{...P,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:I?{...P,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...P,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const L=C;throw new Error(`Unsupported type: ${L}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l;const{args:u,warnings:d}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await ha({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:u,failedResponseHandler:yl,successfulResponseHandler:ns(GQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=u,w=m.choices[0],x=(t=m.usage)==null?void 0:t.completion_tokens_details,_=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(_==null?void 0:_.cached_tokens)!=null&&(E.openai.cachedPromptTokens=_==null?void 0:_.cached_tokens),{text:(r=w.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&w.message.function_call?[{toolCallType:"function",toolCallId:qi(),toolName:w.message.function_call.name,args:w.message.function_call.arguments}]:(a=w.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:qi(),toolName:C.function.name,args:C.function.arguments}}),finishReason:ux(w.finish_reason),usage:{promptTokens:(s=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?s:NaN,completionTokens:(l=(o=m.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(u)},response:dx(m),warnings:d,logprobs:z4(w.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const _ of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_.toolCallId,toolName:_.toolName,argsTextDelta:_.args}),x.enqueue({type:"tool-call",..._});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await ha({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:r,failedResponseHandler:yl,successfulResponseHandler:Gp(WQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=t,l=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,w){var x,_,E,C,k,I,j,N,P,L,H,M;if(!b.success){u="error",w.enqueue({type:"error",error:b.error});return}const K=b.value;if("error"in K){u="error",w.enqueue({type:"error",error:K.error});return}if(m&&(m=!1,w.enqueue({type:"response-metadata",...dx(K)})),K.usage!=null){const{prompt_tokens:X,completion_tokens:ne,prompt_tokens_details:q,completion_tokens_details:J}=K.usage;d={promptTokens:X??void 0,completionTokens:ne??void 0},(J==null?void 0:J.reasoning_tokens)!=null&&(v.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(q==null?void 0:q.cached_tokens)!=null&&(v.openai.cachedPromptTokens=q==null?void 0:q.cached_tokens)}const U=K.choices[0];if((U==null?void 0:U.finish_reason)!=null&&(u=ux(U.finish_reason)),(U==null?void 0:U.delta)==null)return;const se=U.delta;se.content!=null&&w.enqueue({type:"text-delta",textDelta:se.content});const ie=z4(U==null?void 0:U.logprobs);ie!=null&&ie.length&&(h===void 0&&(h=[]),h.push(...ie));const re=g&&se.function_call!=null?[{type:"function",id:qi(),function:se.function_call,index:0}]:se.tool_calls;if(re!=null)for(const X of re){const ne=X.index;if(l[ne]==null){if(X.type!=="function")throw new lp({data:X,message:"Expected 'function' type."});if(X.id==null)throw new lp({data:X,message:"Expected 'id' to be a string."});if(((x=X.function)==null?void 0:x.name)==null)throw new lp({data:X,message:"Expected 'function.name' to be a string."});l[ne]={id:X.id,type:"function",function:{name:X.function.name,arguments:(_=X.function.arguments)!=null?_:""},hasFinished:!1};const J=l[ne];((E=J.function)==null?void 0:E.name)!=null&&((C=J.function)==null?void 0:C.arguments)!=null&&(J.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),nx(J.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=J.id)!=null?k:qi(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const q=l[ne];q.hasFinished||(((I=X.function)==null?void 0:I.arguments)!=null&&(q.function.arguments+=(N=(j=X.function)==null?void 0:j.arguments)!=null?N:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:q.id,toolName:q.function.name,argsTextDelta:(P=X.function.arguments)!=null?P:""}),((L=q.function)==null?void 0:L.name)!=null&&((H=q.function)==null?void 0:H.arguments)!=null&&nx(q.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(M=q.id)!=null?M:qi(),toolName:q.function.name,args:q.function.arguments}),q.hasFinished=!0))}},flush(b){var w,x;b.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(w=d.promptTokens)!=null?w:NaN,completionTokens:(x=d.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},W5=z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish(),prompt_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),completion_tokens_details:z.object({reasoning_tokens:z.number().nullish(),accepted_prediction_tokens:z.number().nullish(),rejected_prediction_tokens:z.number().nullish()}).nullish()}).nullish(),GQ=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({message:z.object({role:z.literal("assistant").nullish(),content:z.string().nullish(),function_call:z.object({arguments:z.string(),name:z.string()}).nullish(),tool_calls:z.array(z.object({id:z.string().nullish(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).nullish()}),index:z.number(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullish()})),usage:W5}),WQ=z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).nullish(),content:z.string().nullish(),function_call:z.object({name:z.string().optional(),arguments:z.string().optional()}).nullish(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").nullish(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullish(),index:z.number()})),usage:W5}),TA]);function $T(e){return e.startsWith("o")}function KQ(e){return e.startsWith("gpt-4o-audio-preview")}function ZQ(e){var t,n;return $T(e)?(n=(t=YQ[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var YQ={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function XQ({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new ec({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new dr({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new dr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new dr({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function U4(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var JQ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h}){var m;const g=e.type,v=[];s!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:w}=XQ({prompt:n,inputFormat:t}),x=[...w??[],...u??[]],_={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,prompt:b,stop:x.length>0?x:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new dr({functionality:"tools"});if(e.toolChoice)throw new dr({functionality:"toolChoice"});return{args:_,warnings:v}}case"object-json":throw new dr({functionality:"object-json mode"});case"object-tool":throw new dr({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await ha({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:t,failedResponseHandler:yl,successfulResponseHandler:ns(QQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:ux(l.finish_reason),logprobs:U4(l.logprobs),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r,body:i},response:dx(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await ha({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:r,failedResponseHandler:yl,successfulResponseHandler:Gp(eee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){l="error",g.enqueue({type:"error",error:m.error});return}const v=m.value;if("error"in v){l="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...dx(v)})),v.usage!=null&&(u={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=ux(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const w=U4(b==null?void 0:b.logprobs);w!=null&&w.length&&(d===void 0&&(d=[]),d.push(...w))},flush(m){m.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},QQ=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullish()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()})}),eee=z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string().nullish(),index:z.number(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullish()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),TA]),tee=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new x1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await ha({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:fa(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:yl,successfulResponseHandler:ns(nee),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},nee=z.object({data:z.array(z.object({embedding:z.array(z.number())})),usage:z.object({prompt_tokens:z.number()}).nullish()}),ree={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},aee=new Set(["gpt-image-1"]),iee=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:ree[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await ha({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:fa(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},...aee.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:yl,successfulResponseHandler:ns(see),abortSignal:o,fetch:this.config.fetch});return{images:v.data.map(w=>w.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:b}}}},see=z.object({data:z.array(z.object({b64_json:z.string()}))}),oee=z.object({include:z.array(z.string()).nullish(),language:z.string().nullish(),prompt:z.string().nullish(),temperature:z.number().min(0).max(1).nullish().default(0),timestampGranularities:z.array(z.enum(["word","segment"])).nullish().default(["segment"])}),V4={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},lee=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:n}){var r,a,i,s,o;const l=[],u=S1({provider:"openai",providerOptions:n,schema:oee}),d=new FormData,h=e instanceof Uint8Array?new Blob([e]):new Blob([E1(e)]);if(d.append("model",this.modelId),d.append("file",new File([h],"audio",{type:t})),u){const m={include:(r=u.include)!=null?r:void 0,language:(a=u.language)!=null?a:void 0,prompt:(i=u.prompt)!=null?i:void 0,temperature:(s=u.temperature)!=null?s:void 0,timestamp_granularities:(o=u.timestampGranularities)!=null?o:void 0};for(const g in m){const v=m[g];v!==void 0&&d.append(g,String(v))}}return{formData:d,warnings:l}}async doGenerate(e){var t,n,r,a,i,s;const o=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{formData:l,warnings:u}=this.getArgs(e),{value:d,responseHeaders:h,rawValue:m}=await IJ({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),formData:l,failedResponseHandler:yl,successfulResponseHandler:ns(cee),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=d.language!=null&&d.language in V4?V4[d.language]:void 0;return{text:d.text,segments:(i=(a=d.words)==null?void 0:a.map(v=>({text:v.word,startSecond:v.start,endSecond:v.end})))!=null?i:[],language:g,durationInSeconds:(s=d.duration)!=null?s:void 0,warnings:u,response:{timestamp:o,modelId:this.modelId,headers:h,body:m}}}},cee=z.object({text:z.string(),language:z.string().nullish(),duration:z.number().nullish(),words:z.array(z.object({word:z.string(),start:z.number(),end:z.number()})).nullish()});function uee({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=t;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{n.push({role:"user",content:i.map((s,o)=>{var l,u,d,h;switch(s.type){case"text":return{type:"input_text",text:s.text};case"image":return{type:"input_image",image_url:s.image instanceof URL?s.image.toString():`data:${(l=s.mimeType)!=null?l:"image/jpeg"};base64,${Fu(s.image)}`,detail:(d=(u=s.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail};case"file":{if(s.data instanceof URL)throw new dr({functionality:"File URLs in user messages"});switch(s.mimeType){case"application/pdf":return{type:"input_file",filename:(h=s.filename)!=null?h:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${s.data}`};default:throw new dr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const s of i)switch(s.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:s.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:s.toolCallId,name:s.toolName,arguments:JSON.stringify(s.args)});break}}break}case"tool":{for(const s of i)n.push({type:"function_call_output",call_id:s.toolCallId,output:JSON.stringify(s.result)});break}default:{const s=a;throw new Error(`Unsupported role: ${s}`)}}return{messages:n,warnings:r}}function H4({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function dee({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)switch(l.type){case"function":s.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":s.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:s,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:s,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=o;throw new dr({functionality:`Unsupported tool choice type: ${l}`})}}}var fee=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:s,frequencyPenalty:o,seed:l,prompt:u,providerMetadata:d,responseFormat:h}){var m,g,v;const b=[],w=Ree(this.modelId),x=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),s!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:_,warnings:E}=uee({prompt:u,systemMessageMode:w.systemMessageMode});b.push(...E);const C=S1({provider:"openai",providerOptions:d,schema:Iee}),k=(m=C==null?void 0:C.strictSchemas)!=null?m:!0,I={model:this.modelId,input:_,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,...w.isReasoningModel&&((C==null?void 0:C.reasoningEffort)!=null||(C==null?void 0:C.reasoningSummary)!=null)&&{reasoning:{...(C==null?void 0:C.reasoningEffort)!=null&&{effort:C.reasoningEffort},...(C==null?void 0:C.reasoningSummary)!=null&&{summary:C.reasoningSummary}}},...w.requiredAutoTruncation&&{truncation:"auto"}};switch(w.isReasoningModel&&(I.temperature!=null&&(I.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),I.top_p!=null&&(I.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:j,tool_choice:N,toolWarnings:P}=dee({mode:e,strict:k});return{args:{...I,tools:j,tool_choice:N},warnings:[...b,...P]}}case"object-json":return{args:{...I,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...I,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const j=x;throw new Error(`Unsupported type: ${j}`)}}}async doGenerate(e){var t,n,r,a,i,s,o;const{args:l,warnings:u}=this.getArgs(e),{responseHeaders:d,value:h,rawValue:m}=await ha({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:l,failedResponseHandler:yl,successfulResponseHandler:ns(z.object({id:z.string(),created_at:z.number(),model:z.string(),output:z.array(z.discriminatedUnion("type",[z.object({type:z.literal("message"),role:z.literal("assistant"),content:z.array(z.object({type:z.literal("output_text"),text:z.string(),annotations:z.array(z.object({type:z.literal("url_citation"),start_index:z.number(),end_index:z.number(),url:z.string(),title:z.string()}))}))}),z.object({type:z.literal("function_call"),call_id:z.string(),name:z.string(),arguments:z.string()}),z.object({type:z.literal("web_search_call")}),z.object({type:z.literal("computer_call")}),z.object({type:z.literal("reasoning"),summary:z.array(z.object({type:z.literal("summary_text"),text:z.string()}))})])),incomplete_details:z.object({reason:z.string()}).nullable(),usage:K5})),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=h.output.filter(w=>w.type==="message").flatMap(w=>w.content).filter(w=>w.type==="output_text"),v=h.output.filter(w=>w.type==="function_call").map(w=>({toolCallType:"function",toolCallId:w.call_id,toolName:w.name,args:w.arguments})),b=(n=(t=h.output.find(w=>w.type==="reasoning"))==null?void 0:t.summary)!=null?n:null;return{text:g.map(w=>w.text).join(`
`),sources:g.flatMap(w=>w.annotations.map(x=>{var _,E,C;return{sourceType:"url",id:(C=(E=(_=this.config).generateId)==null?void 0:E.call(_))!=null?C:qi(),url:x.url,title:x.title}})),finishReason:H4({finishReason:(r=h.incomplete_details)==null?void 0:r.reason,hasToolCalls:v.length>0}),toolCalls:v.length>0?v:void 0,reasoning:b?b.map(w=>({type:"text",text:w.text})):void 0,usage:{promptTokens:h.usage.input_tokens,completionTokens:h.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:d,body:m},request:{body:JSON.stringify(l)},response:{id:h.id,timestamp:new Date(h.created_at*1e3),modelId:h.model},providerMetadata:{openai:{responseId:h.id,cachedPromptTokens:(i=(a=h.usage.input_tokens_details)==null?void 0:a.cached_tokens)!=null?i:null,reasoningTokens:(o=(s=h.usage.output_tokens_details)==null?void 0:s.reasoning_tokens)!=null?o:null}},warnings:u}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await ha({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:yl,successfulResponseHandler:Gp(xee),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let s="unknown",o=NaN,l=NaN,u=null,d=null,h=null;const m={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var w,x,_,E,C,k,I,j;if(!v.success){s="error",b.enqueue({type:"error",error:v.error});return}const N=v.value;if(kee(N))N.item.type==="function_call"&&(m[N.output_index]={toolName:N.item.name,toolCallId:N.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,argsTextDelta:N.item.arguments}));else if(Tee(N)){const P=m[N.output_index];P!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:P.toolCallId,toolName:P.toolName,argsTextDelta:N.delta})}else Cee(N)?(h=N.response.id,b.enqueue({type:"response-metadata",id:N.response.id,timestamp:new Date(N.response.created_at*1e3),modelId:N.response.model})):_ee(N)?b.enqueue({type:"text-delta",textDelta:N.delta}):Nee(N)?b.enqueue({type:"reasoning",textDelta:N.delta}):See(N)&&N.item.type==="function_call"?(m[N.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:N.item.call_id,toolName:N.item.name,args:N.item.arguments})):Eee(N)?(s=H4({finishReason:(w=N.response.incomplete_details)==null?void 0:w.reason,hasToolCalls:g}),o=N.response.usage.input_tokens,l=N.response.usage.output_tokens,u=(_=(x=N.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?_:u,d=(C=(E=N.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:d):Aee(N)&&b.enqueue({type:"source",source:{sourceType:"url",id:(j=(I=(k=i.config).generateId)==null?void 0:I.call(k))!=null?j:qi(),url:N.annotation.url,title:N.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:s,usage:{promptTokens:o,completionTokens:l},...(u!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:u,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},K5=z.object({input_tokens:z.number(),input_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),output_tokens:z.number(),output_tokens_details:z.object({reasoning_tokens:z.number().nullish()}).nullish()}),hee=z.object({type:z.literal("response.output_text.delta"),delta:z.string()}),pee=z.object({type:z.enum(["response.completed","response.incomplete"]),response:z.object({incomplete_details:z.object({reason:z.string()}).nullish(),usage:K5})}),mee=z.object({type:z.literal("response.created"),response:z.object({id:z.string(),created_at:z.number(),model:z.string()})}),gee=z.object({type:z.literal("response.output_item.done"),output_index:z.number(),item:z.discriminatedUnion("type",[z.object({type:z.literal("message")}),z.object({type:z.literal("function_call"),id:z.string(),call_id:z.string(),name:z.string(),arguments:z.string(),status:z.literal("completed")})])}),yee=z.object({type:z.literal("response.function_call_arguments.delta"),item_id:z.string(),output_index:z.number(),delta:z.string()}),bee=z.object({type:z.literal("response.output_item.added"),output_index:z.number(),item:z.discriminatedUnion("type",[z.object({type:z.literal("message")}),z.object({type:z.literal("function_call"),id:z.string(),call_id:z.string(),name:z.string(),arguments:z.string()})])}),vee=z.object({type:z.literal("response.output_text.annotation.added"),annotation:z.object({type:z.literal("url_citation"),url:z.string(),title:z.string()})}),wee=z.object({type:z.literal("response.reasoning_summary_text.delta"),item_id:z.string(),output_index:z.number(),summary_index:z.number(),delta:z.string()}),xee=z.union([hee,pee,mee,gee,yee,bee,vee,wee,z.object({type:z.string()}).passthrough()]);function _ee(e){return e.type==="response.output_text.delta"}function See(e){return e.type==="response.output_item.done"}function Eee(e){return e.type==="response.completed"||e.type==="response.incomplete"}function Cee(e){return e.type==="response.created"}function Tee(e){return e.type==="response.function_call_arguments.delta"}function kee(e){return e.type==="response.output_item.added"}function Aee(e){return e.type==="response.output_text.annotation.added"}function Nee(e){return e.type==="response.reasoning_summary_text.delta"}function Ree(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var Iee=z.object({metadata:z.any().nullish(),parallelToolCalls:z.boolean().nullish(),previousResponseId:z.string().nullish(),store:z.boolean().nullish(),user:z.string().nullish(),reasoningEffort:z.string().nullish(),strictSchemas:z.boolean().nullish(),instructions:z.string().nullish(),reasoningSummary:z.string().nullish()}),jee=z.object({});function Dee({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:jee}}var Mee={webSearchPreview:Dee},Oee=z.object({instructions:z.string().nullish(),speed:z.number().min(.25).max(4).default(1).nullish()}),Pee=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:r,instructions:a,providerOptions:i}){const s=[],o=S1({provider:"openai",providerOptions:i,schema:Oee}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:r,instructions:a};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?l.response_format=n:s.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),o){const u={};for(const d in u){const h=u[d];h!==void 0&&(l[d]=h)}}return{requestBody:l,warnings:s}}async doGenerate(e){var t,n,r;const a=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{requestBody:i,warnings:s}=this.getArgs(e),{value:o,responseHeaders:l,rawValue:u}=await ha({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:i,failedResponseHandler:yl,successfulResponseHandler:jJ(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:o,warnings:s,request:{body:JSON.stringify(i)},response:{timestamp:a,modelId:this.modelId,headers:l,body:u}}}};function Z5(e={}){var t,n,r;const a=(t=C1(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",s=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${O5({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(x,_={})=>new qQ(x,_,{provider:`${s}.chat`,url:({path:E})=>`${a}${E}`,headers:o,compatibility:i,fetch:e.fetch}),u=(x,_={})=>new JQ(x,_,{provider:`${s}.completion`,url:({path:E})=>`${a}${E}`,headers:o,compatibility:i,fetch:e.fetch}),d=(x,_={})=>new tee(x,_,{provider:`${s}.embedding`,url:({path:E})=>`${a}${E}`,headers:o,fetch:e.fetch}),h=(x,_={})=>new iee(x,_,{provider:`${s}.image`,url:({path:E})=>`${a}${E}`,headers:o,fetch:e.fetch}),m=x=>new lee(x,{provider:`${s}.transcription`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),g=x=>new Pee(x,{provider:`${s}.speech`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),v=(x,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return x==="gpt-3.5-turbo-instruct"?u(x,_):l(x,_)},b=x=>new fee(x,{provider:`${s}.responses`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),w=function(x,_){return v(x,_)};return w.languageModel=v,w.chat=l,w.completion=u,w.responses=b,w.embedding=d,w.textEmbedding=d,w.textEmbeddingModel=d,w.image=h,w.imageModel=h,w.transcription=m,w.transcriptionModel=m,w.speech=g,w.speechModel=g,w.tools=Mee,w}Z5({compatibility:"strict"});function Bs(e){if(Fee(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:s,anyOf:o,oneOf:l,format:u,const:d,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),u&&(g.format=u),d!==void 0&&(g.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),a!=null&&(g.properties=Object.entries(a).reduce((v,[b,w])=>(v[b]=Bs(w),v),{})),i&&(g.items=Array.isArray(i)?i.map(Bs):Bs(i)),s&&(g.allOf=s.map(Bs)),o)if(o.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=Bs(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(Bs),g.nullable=!0}else g.anyOf=o.map(Bs);return l&&(g.oneOf=l.map(Bs)),h!==void 0&&(g.minLength=h),g}function Fee(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function Lee(e){var t,n;const r=[],a=[];let i=!0;for(const{role:s,content:o}of e)switch(s){case"system":{if(!i)throw new dr({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{i=!1;const l=[];for(const u of o)switch(u.type){case"text":{l.push({text:u.text});break}case"image":{l.push(u.image instanceof URL?{fileData:{mimeType:(t=u.mimeType)!=null?t:"image/jpeg",fileUri:u.image.toString()}}:{inlineData:{mimeType:(n=u.mimeType)!=null?n:"image/jpeg",data:Fu(u.image)}});break}case"file":{l.push(u.data instanceof URL?{fileData:{mimeType:u.mimeType,fileUri:u.data.toString()}}:{inlineData:{mimeType:u.mimeType,data:u.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new dr({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new dr({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function q4(e){return e.includes("/")?e:`models/${e}`}var Bee=z.object({error:z.object({code:z.number().nullable(),message:z.string(),status:z.string()})}),zT=jf({errorSchema:Bee,errorToMessage:e=>e.error.message});function $ee(e,t,n,r){var a,i;const s=(a=e.tools)!=null&&a.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!u||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(s==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const d=[];for(const g of s)g.type==="provider-defined"?o.push({type:"unsupported-tool",tool:g}):d.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:Bs(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:o};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:o};default:{const g=m;throw new dr({functionality:`Unsupported tool choice type: ${g}`})}}}function G4({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var zee=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,g;const v=e.type,b=[],w=S1({provider:"google",providerOptions:h,schema:qee}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:s,presencePenalty:o,stopSequences:l,seed:d,responseMimeType:(u==null?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(u==null?void 0:u.type)==="json"&&u.schema!=null&&this.supportsStructuredOutputs?Bs(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:w==null?void 0:w.responseModalities,thinkingConfig:w==null?void 0:w.thinkingConfig},{contents:_,systemInstruction:E}=Lee(t);switch(v){case"regular":{const{tools:C,toolConfig:k,toolWarnings:I}=$ee(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:_,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...I]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?Bs(e.schema):void 0},contents:_,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:x,contents:_,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:Bs(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=await this.getArgs(e),l=JSON.stringify(s),u=fa(await OT(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:m}=await ha({url:`${this.config.baseURL}/${q4(this.modelId)}:generateContent`,headers:u,body:s,failedResponseHandler:zT,successfulResponseHandler:ns(Vee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=s,b=h.candidates[0],w=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=W4({parts:w,generateId:this.config.generateId}),_=h.usageMetadata;return{text:K4(w),files:(t=Z4(w))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:G4({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=_==null?void 0:_.promptTokenCount)!=null?n:NaN,completionTokens:(r=_==null?void 0:_.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:d,body:m},warnings:o,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:Y4({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=fa(await OT(this.config.headers),e.headers),{responseHeaders:i,value:s}=await ha({url:`${this.config.baseURL}/${q4(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:zT,successfulResponseHandler:Gp(Hee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let u="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var w,x,_,E,C,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const I=v.value,j=I.usageMetadata;j!=null&&(d={promptTokens:(w=j.promptTokenCount)!=null?w:NaN,completionTokens:(x=j.candidatesTokenCount)!=null?x:NaN});const N=(_=I.candidates)==null?void 0:_[0];if(N==null)return;const P=N.content;if(P!=null){const L=K4(P.parts);L!=null&&b.enqueue({type:"text-delta",textDelta:L});const H=Z4(P.parts);if(H!=null)for(const K of H)b.enqueue({type:"file",mimeType:K.inlineData.mimeType,data:K.inlineData.data});const M=W4({parts:P.parts,generateId:m});if(M!=null)for(const K of M)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,argsTextDelta:K.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,args:K.args}),g=!0}if(N.finishReason!=null){u=G4({finishReason:N.finishReason,hasToolCalls:g});const L=(E=Y4({groundingMetadata:N.groundingMetadata,generateId:m}))!=null?E:[];for(const H of L)b.enqueue({type:"source",source:H});h={google:{groundingMetadata:(C=N.groundingMetadata)!=null?C:null,safetyRatings:(k=N.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:u,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function W4({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function K4(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function Z4(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function Y4({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var Y5=z.object({role:z.string(),parts:z.array(z.union([z.object({text:z.string()}),z.object({functionCall:z.object({name:z.string(),args:z.unknown()})}),z.object({inlineData:z.object({mimeType:z.string(),data:z.string()})})])).nullish()}),Uee=z.object({web:z.object({uri:z.string(),title:z.string()}).nullish(),retrievedContext:z.object({uri:z.string(),title:z.string()}).nullish()}),X5=z.object({webSearchQueries:z.array(z.string()).nullish(),retrievalQueries:z.array(z.string()).nullish(),searchEntryPoint:z.object({renderedContent:z.string()}).nullish(),groundingChunks:z.array(Uee).nullish(),groundingSupports:z.array(z.object({segment:z.object({startIndex:z.number().nullish(),endIndex:z.number().nullish(),text:z.string().nullish()}),segment_text:z.string().nullish(),groundingChunkIndices:z.array(z.number()).nullish(),supportChunkIndices:z.array(z.number()).nullish(),confidenceScores:z.array(z.number()).nullish(),confidenceScore:z.array(z.number()).nullish()})).nullish(),retrievalMetadata:z.union([z.object({webDynamicRetrievalScore:z.number()}),z.object({})]).nullish()}),J5=z.object({category:z.string().nullish(),probability:z.string().nullish(),probabilityScore:z.number().nullish(),severity:z.string().nullish(),severityScore:z.number().nullish(),blocked:z.boolean().nullish()}),Vee=z.object({candidates:z.array(z.object({content:Y5.nullish().or(z.object({}).strict()),finishReason:z.string().nullish(),safetyRatings:z.array(J5).nullish(),groundingMetadata:X5.nullish()})),usageMetadata:z.object({promptTokenCount:z.number().nullish(),candidatesTokenCount:z.number().nullish(),totalTokenCount:z.number().nullish()}).nullish()}),Hee=z.object({candidates:z.array(z.object({content:Y5.nullish(),finishReason:z.string().nullish(),safetyRatings:z.array(J5).nullish(),groundingMetadata:X5.nullish()})).nullish(),usageMetadata:z.object({promptTokenCount:z.number().nullish(),candidatesTokenCount:z.number().nullish(),totalTokenCount:z.number().nullish()}).nullish()}),qee=z.object({responseModalities:z.array(z.enum(["TEXT","IMAGE"])).nullish(),thinkingConfig:z.object({thinkingBudget:z.number().nullish()}).nullish()}),Gee=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new x1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=fa(await OT(this.config.headers),t),{responseHeaders:a,value:i}=await ha({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(s=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:s}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:zT,successfulResponseHandler:ns(Wee),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(s=>s.values),usage:void 0,rawResponse:{headers:a}}}},Wee=z.object({embeddings:z.array(z.object({values:z.array(z.number())}))});function Kee(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function Q5(e={}){var t;const n=(t=C1(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":O5({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(o,l={})=>{var u;return new zee(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(u=e.generateId)!=null?u:qi,isSupportedUrl:Kee,fetch:e.fetch})},i=(o,l={})=>new Gee(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(o,l)};return s.languageModel=a,s.chat=a,s.generativeAI=a,s.embedding=i,s.textEmbedding=i,s.textEmbeddingModel=i,s}Q5();var eF="vercel.ai.error",Zee=Symbol.for(eF),tF,Yee=class nF extends Error{constructor({name:t,message:n,cause:r}){super(n),this[tF]=!0,this.name=t,this.cause=r}static isInstance(t){return nF.hasMarker(t,eF)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};tF=Zee;var Wa=Yee,rF="AI_APICallError",aF=`vercel.ai.error.${rF}`,Xee=Symbol.for(aF),iF,ac=class extends Wa{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:s,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:rF,message:e,cause:s}),this[iF]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=o,this.data=l}static isInstance(e){return Wa.hasMarker(e,aF)}};iF=Xee;var sF="AI_EmptyResponseBodyError",oF=`vercel.ai.error.${sF}`,Jee=Symbol.for(oF),lF,Qee=class extends Wa{constructor({message:e="Empty response body"}={}){super({name:sF,message:e}),this[lF]=!0}static isInstance(e){return Wa.hasMarker(e,oF)}};lF=Jee;function cF(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var uF="AI_InvalidArgumentError",dF=`vercel.ai.error.${uF}`,ete=Symbol.for(dF),fF,tte=class extends Wa{constructor({message:t,cause:n,argument:r}){super({name:uF,message:t,cause:n}),this[fF]=!0,this.argument=r}static isInstance(t){return Wa.hasMarker(t,dF)}};fF=ete;var hF="AI_InvalidPromptError",pF=`vercel.ai.error.${hF}`,nte=Symbol.for(pF),mF,rte=class extends Wa{constructor({prompt:e,message:t,cause:n}){super({name:hF,message:`Invalid prompt: ${t}`,cause:n}),this[mF]=!0,this.prompt=e}static isInstance(e){return Wa.hasMarker(e,pF)}};mF=nte;var gF="AI_InvalidResponseDataError",yF=`vercel.ai.error.${gF}`,ate=Symbol.for(yF),bF,eE=class extends Wa{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:gF,message:t}),this[bF]=!0,this.data=e}static isInstance(e){return Wa.hasMarker(e,yF)}};bF=ate;var vF="AI_JSONParseError",wF=`vercel.ai.error.${vF}`,ite=Symbol.for(wF),xF,fx=class extends Wa{constructor({text:e,cause:t}){super({name:vF,message:`JSON parsing failed: Text: ${e}.
Error message: ${cF(t)}`,cause:t}),this[xF]=!0,this.text=e}static isInstance(e){return Wa.hasMarker(e,wF)}};xF=ite;var _F="AI_LoadAPIKeyError",SF=`vercel.ai.error.${_F}`,ste=Symbol.for(SF),EF,Rv=class extends Wa{constructor({message:e}){super({name:_F,message:e}),this[EF]=!0}static isInstance(e){return Wa.hasMarker(e,SF)}};EF=ste;var CF="AI_TypeValidationError",TF=`vercel.ai.error.${CF}`,ote=Symbol.for(TF),kF,lte=class UT extends Wa{constructor({value:t,cause:n}){super({name:CF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${cF(n)}`,cause:n}),this[kF]=!0,this.value=t}static isInstance(t){return Wa.hasMarker(t,TF)}static wrap({value:t,cause:n}){return UT.isInstance(n)&&n.value===t?n:new UT({value:t,cause:n})}};kF=ote;var hx=lte,AF="AI_UnsupportedFunctionalityError",NF=`vercel.ai.error.${AF}`,cte=Symbol.for(NF),RF,zs=class extends Wa{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:AF,message:t}),this[RF]=!0,this.functionality=e}static isInstance(e){return Wa.hasMarker(e,NF)}};RF=cte;let ute=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},X4=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function tE(e){}function dte(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=tE,onError:n=tE,onRetry:r=tE,onComment:a}=e;let i="",s=!0,o,l="",u="";function d(b){const w=s?b.replace(/^\xEF\xBB\xBF/,""):b,[x,_]=fte(`${i}${w}`);for(const E of x)h(E);i=_,s=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const w=b.indexOf(":");if(w!==-1){const x=b.slice(0,w),_=b[w+1]===" "?2:1,E=b.slice(w+_);m(x,E,b);return}m(b,"",b)}function m(b,w,x){switch(b){case"event":u=w;break;case"data":l=`${l}${w}
`;break;case"id":o=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?r(parseInt(w,10)):n(new X4(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:x}));break;default:n(new X4(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:w,line:x}));break}}function g(){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u=""}function v(b={}){i&&b.consume&&h(i),s=!0,o=void 0,l="",u="",i=""}return{feed:d,reset:v}}function fte(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(a!==-1&&i!==-1?s=Math.min(a,i):a!==-1?s=a:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const o=e.slice(r,s);t.push(o),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class hte extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=dte({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var pte={};function px(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function k1(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var mte=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=ute(n,t);if(e==null)return a;if(n.includes(r))throw new tte({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Iv=mte();function gte(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function nE(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function yte({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Rv({message:`${r} API key must be a string.`});if(typeof da>"u")throw new Rv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=pte[t],e==null)throw new Rv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Rv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var VT=Symbol.for("vercel.ai.validator");function bte(e){return{[VT]:!0,validate:e}}function vte(e){return typeof e=="object"&&e!==null&&VT in e&&e[VT]===!0&&"validate"in e}function wte(e){return vte(e)?e:xte(e)}function xte(e){return bte(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function _te({value:e,schema:t}){const n=IF({value:e,schema:t});if(!n.success)throw hx.wrap({value:e,cause:n.error});return n.value}function IF({value:e,schema:t}){const n=wte(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:hx.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:hx.wrap({value:e,cause:r})}}}function Ste({text:e,schema:t}){try{const n=Vp.parse(e);return t==null?n:_te({value:n,schema:t})}catch(n){throw fx.isInstance(n)||hx.isInstance(n)?n:new fx({text:e,cause:n})}}function jF({text:e,schema:t}){try{const n=Vp.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=IF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:fx.isInstance(n)?n:new fx({text:e,cause:n})}}}function rE(e){try{return Vp.parse(e),!0}catch{return!1}}var Ete=()=>globalThis.fetch,mx=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>Cte({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),Cte=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=Ete()})=>{try{const o=await s(e,{method:"POST",headers:gte(t),body:n.content,signal:i}),l=k1(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw nE(d)||ac.isInstance(d)?d:new ac({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(nE(u)||ac.isInstance(u))?u:new ac({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(nE(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new ac({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},Tte=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=k1(r);if(s.trim()==="")return{responseHeaders:o,value:new ac({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=Ste({text:s,schema:e});return{responseHeaders:o,value:new ac({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new ac({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},DF=e=>async({response:t})=>{const n=k1(t);if(t.body==null)throw new Qee({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new hte).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(jF({text:r,schema:e}))}}))}},MF=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=jF({text:a,schema:e}),s=k1(t);if(!i.success)throw new ac({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:kte}=globalThis;function Ate(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return kte(t)}function Nte(e){return e==null?void 0:e.replace(/\/$/,"")}var Rte=Object.defineProperty,Ite=Object.defineProperties,jte=Object.getOwnPropertyDescriptors,gx=Object.getOwnPropertySymbols,OF=Object.prototype.hasOwnProperty,PF=Object.prototype.propertyIsEnumerable,J4=(e,t,n)=>t in e?Rte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ys=(e,t)=>{for(var n in t||(t={}))OF.call(t,n)&&J4(e,n,t[n]);if(gx)for(var n of gx(t))PF.call(t,n)&&J4(e,n,t[n]);return e},Ow=(e,t)=>Ite(e,jte(t)),yx=(e,t)=>{var n={};for(var r in e)OF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&gx)for(var r of gx(e))t.indexOf(r)<0&&PF.call(e,r)&&(n[r]=e[r]);return n};function Yo(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function Dte(e){var t,n,r;const a=[];for(const{role:i,content:s,providerMetadata:o}of e)switch(i){case"system":{a.push({role:"system",content:s,cache_control:Yo(o)});break}case"user":{if(s.length===1&&((t=s[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:s[0].text,cache_control:(n=Yo(o))!=null?n:Yo(s[0].providerMetadata)});break}const l=Yo(o),u=s.map(d=>{var h,m,g,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=Yo(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(m=d.mimeType)!=null?m:"image/jpeg"};base64,${Ate(d.image)}`},cache_control:(g=Yo(d.providerMetadata))!=null?g:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=Yo(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:u});break}case"assistant":{let l="";const u=[];for(const d of s)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{u.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:u.length>0?u:void 0,cache_control:Yo(o)});break}case"tool":{for(const l of s)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Yo(o))!=null?r:Yo(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function Q4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function bx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var kA=z.object({error:z.object({message:z.string(),type:z.string(),param:z.any().nullable(),code:z.string().nullable()})}),vx=Tte({errorSchema:kA,errorToMessage:e=>e.error.message});function Mte(e){return"parameters"in e}var Ote=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:s,seed:o,stopSequences:l,responseFormat:u,topK:d,providerMetadata:h}){var m;const g=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},b=ys(ys(ys({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:s,seed:o,stop:l,response_format:u,top_k:d,messages:Dte(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return ys(ys({},b),Lte(e));case"object-json":return Ow(ys({},b),{response_format:{type:"json_object"}});case"object-tool":return Ow(ys({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const w=g;throw new zs({functionality:`${w} mode`})}}}async doGenerate(e){var t,n,r,a,i,s,o;const l=this.getArgs(e),{responseHeaders:u,value:d}=await mx({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:px(this.config.headers(),e.headers),body:l,failedResponseHandler:vx,successfulResponseHandler:MF(Pte),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:m}=h,g=yx(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var w;return{toolCallType:"function",toolCallId:(w=b.id)!=null?w:Iv(),toolName:b.function.name,args:b.function.arguments}}),finishReason:bx(v.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(o=(s=d.usage)==null?void 0:s.completion_tokens)!=null?o:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:u},warnings:[],logprobs:Q4(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await mx({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:px(this.config.headers(),e.headers),body:Ow(ys({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:vx,successfulResponseHandler:DF(Fte),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,s=yx(a,["messages"]),o=[];let l="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,v,b,w,x,_,E,C,k,I,j,N;if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const P=h.value;if("error"in P){l="error",m.enqueue({type:"error",error:P.error});return}P.id&&m.enqueue({type:"response-metadata",id:P.id}),P.model&&m.enqueue({type:"response-metadata",modelId:P.model}),P.usage!=null&&(u={promptTokens:P.usage.prompt_tokens,completionTokens:P.usage.completion_tokens});const L=P.choices[0];if((L==null?void 0:L.finish_reason)!=null&&(l=bx(L.finish_reason)),(L==null?void 0:L.delta)==null)return;const H=L.delta;H.content!=null&&m.enqueue({type:"text-delta",textDelta:H.content}),H.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:H.reasoning});const M=Q4(L==null?void 0:L.logprobs);if(M!=null&&M.length&&(d===void 0&&(d=[]),d.push(...M)),H.tool_calls!=null)for(const K of H.tool_calls){const U=K.index;if(o[U]==null){if(K.type!=="function")throw new eE({data:K,message:"Expected 'function' type."});if(K.id==null)throw new eE({data:K,message:"Expected 'id' to be a string."});if(((g=K.function)==null?void 0:g.name)==null)throw new eE({data:K,message:"Expected 'function.name' to be a string."});o[U]={id:K.id,type:"function",function:{name:K.function.name,arguments:(v=K.function.arguments)!=null?v:""},sent:!1};const ie=o[U];if(ie==null)throw new Error("Tool call is missing");((b=ie.function)==null?void 0:b.name)!=null&&((w=ie.function)==null?void 0:w.arguments)!=null&&rE(ie.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:ie.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ie.id)!=null?x:Iv(),toolName:ie.function.name,args:ie.function.arguments}),ie.sent=!0);continue}const se=o[U];if(se==null)throw new Error("Tool call is missing");((_=K.function)==null?void 0:_.arguments)!=null&&(se.function.arguments+=(C=(E=K.function)==null?void 0:E.arguments)!=null?C:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:se.id,toolName:se.function.name,argsTextDelta:(k=K.function.arguments)!=null?k:""}),((I=se.function)==null?void 0:I.name)!=null&&((j=se.function)==null?void 0:j.arguments)!=null&&rE(se.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(N=se.id)!=null?N:Iv(),toolName:se.function.name,args:se.function.arguments}),se.sent=!0)}},flush(h){var m;if(l==="tool-calls")for(const g of o)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:Iv(),toolName:g.function.name,args:rE(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},FF=z.object({id:z.string().optional(),model:z.string().optional(),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number(),total_tokens:z.number()}).nullish()}),Pte=FF.extend({choices:z.array(z.object({message:z.object({role:z.literal("assistant"),content:z.string().nullable().optional(),reasoning:z.string().nullable().optional(),tool_calls:z.array(z.object({id:z.string().optional().nullable(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).optional()}),index:z.number(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullable().optional(),finish_reason:z.string().optional().nullable()}))}),Fte=z.union([FF.extend({choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).optional(),content:z.string().nullish(),reasoning:z.string().nullish().optional(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").optional(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullable().optional(),index:z.number()}))}),kA]);function Lte(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(s=>Mte(s)?{type:"function",function:{name:s.name,description:s.description,parameters:s.parameters}}:{type:"function",function:{name:s.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const s=i;throw new Error(`Unsupported tool choice type: ${s}`)}}}function Bte({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new rte({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new zs({functionality:"images"});case"file":throw new zs({functionality:"file attachments"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new zs({functionality:"tool-call messages"});case"reasoning":throw new zs({functionality:"reasoning messages"});case"redacted-reasoning":throw new zs({functionality:"redacted reasoning messages"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new zs({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a}}function e6(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,s])=>({token:i,logprob:s})):[]}})}var $te=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:s,presencePenalty:o,seed:l,responseFormat:u,topK:d,stopSequences:h,providerMetadata:m}){var g,v;const b=e.type,w=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:x}=Bte({prompt:n,inputFormat:t}),_=ys(ys(ys({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:o,seed:l,stop:h,response_format:u,top_k:d,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),w);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new zs({functionality:"tools"});if(e.toolChoice)throw new zs({functionality:"toolChoice"});return _}case"object-json":throw new zs({functionality:"object-json mode"});case"object-tool":throw new zs({functionality:"object-tool mode"});default:{const E=b;throw new zs({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const s=this.getArgs(e),{responseHeaders:o,value:l}=await mx({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:px(this.config.headers(),e.headers),body:s,failedResponseHandler:vx,successfulResponseHandler:MF(t6),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=s,{prompt:d}=u,h=yx(u,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const m=l.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:bx(m.finish_reason),logprobs:e6(m.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await mx({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:px(this.config.headers(),e.headers),body:Ow(ys({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:vx,successfulResponseHandler:DF(t6),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,s=yx(a,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){o="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;if("error"in m){o="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(l={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(o=bx(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=e6(g==null?void 0:g.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:o,logprobs:u,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},t6=z.union([z.object({id:z.string().optional(),model:z.string().optional(),choices:z.array(z.object({text:z.string(),reasoning:z.string().nullish().optional(),finish_reason:z.string().nullish(),index:z.number(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullable().optional()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).optional().nullable()}),kA]);function LF(e={}){var t,n,r;const a=(n=Nte((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",s=()=>ys({Authorization:`Bearer ${yte({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(h,m={})=>new Ote(h,m,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,m={})=>new $te(h,m,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,m):o(h,m)},d=function(h,m){return u(h,m)};return d.languageModel=u,d.chat=o,d.completion=l,d}LF({compatibility:"strict"});var Ud={},aE={},n6;function r6(){return n6||(n6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(aE)),aE}var a6;function zte(){return a6||(a6=1,function(e){var t=Ud&&Ud.__createBinding||(Object.create?function(u,d,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,m,g)}:function(u,d,h,m){m===void 0&&(m=h),u[m]=d[h]}),n=Ud&&Ud.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,u,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=r6();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(r6(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function s(u,d=r.Allow.ALL){if(typeof u!="string")throw new TypeError(`expecting str, got ${typeof u}`);if(!u.trim())throw new Error(`${u} is empty`);return o(u.trim(),d)}e.parseJSON=s;const o=(u,d)=>{const h=u.length;let m=0;const g=k=>{throw new a(`${k} at position ${m}`)},v=k=>{throw new i(`${k} at position ${m}`)},b=()=>(C(),m>=h&&g("Unexpected end of input"),u[m]==='"'?w():u[m]==="{"?x():u[m]==="["?_():u.substring(m,m+4)==="null"||r.Allow.NULL&d&&h-m<4&&"null".startsWith(u.substring(m))?(m+=4,null):u.substring(m,m+4)==="true"||r.Allow.BOOL&d&&h-m<4&&"true".startsWith(u.substring(m))?(m+=4,!0):u.substring(m,m+5)==="false"||r.Allow.BOOL&d&&h-m<5&&"false".startsWith(u.substring(m))?(m+=5,!1):u.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&d&&h-m<8&&"Infinity".startsWith(u.substring(m))?(m+=8,1/0):u.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-m&&h-m<9&&"-Infinity".startsWith(u.substring(m))?(m+=9,-1/0):u.substring(m,m+3)==="NaN"||r.Allow.NAN&d&&h-m<3&&"NaN".startsWith(u.substring(m))?(m+=3,NaN):E()),w=()=>{const k=m;let I=!1;for(m++;m<h&&(u[m]!=='"'||I&&u[m-1]==="\\");)I=u[m]==="\\"?!I:!1,m++;if(u.charAt(m)=='"')try{return JSON.parse(u.substring(k,++m-Number(I)))}catch(j){v(String(j))}else if(r.Allow.STR&d)try{return JSON.parse(u.substring(k,m-Number(I))+'"')}catch{return JSON.parse(u.substring(k,u.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{m++,C();const k={};try{for(;u[m]!=="}";){if(C(),m>=h&&r.Allow.OBJ&d)return k;const I=w();C(),m++;try{const j=b();k[I]=j}catch(j){if(r.Allow.OBJ&d)return k;throw j}C(),u[m]===","&&m++}}catch{if(r.Allow.OBJ&d)return k;g("Expected '}' at end of object")}return m++,k},_=()=>{m++;const k=[];try{for(;u[m]!=="]";)k.push(b()),C(),u[m]===","&&m++}catch{if(r.Allow.ARR&d)return k;g("Expected ']' at end of array")}return m++,k},E=()=>{if(m===0){u==="-"&&v("Not sure what '-' is");try{return JSON.parse(u)}catch(I){if(r.Allow.NUM&d)try{return JSON.parse(u.substring(0,u.lastIndexOf("e")))}catch{}v(String(I))}}const k=m;for(u[m]==="-"&&m++;u[m]&&",]}".indexOf(u[m])===-1;)m++;m==h&&!(r.Allow.NUM&d)&&g("Unterminated number literal");try{return JSON.parse(u.substring(k,m))}catch{u.substring(k,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(u.substring(k,u.lastIndexOf("e")))}catch(j){v(String(j))}}},C=()=>{for(;m<h&&` 
\r	`.includes(u[m]);)m++};return b()},l=s;e.parse=l}(Ud)),Ud}var Ute=zte();function iE(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new dr({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(Fu(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const s of n)switch(s.type){case"text":{a.push(s.text);break}case"tool-call":{i.push({function:{arguments:s.args,name:s.toolName},id:s.toolCallId,type:"function"});break}default:{const o=s;throw new Error(`Unsupported part: ${o}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var Vte=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=Ute.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const s=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(s==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:qi(),type:"function"});const o=this._toolCalls[a];o.function.arguments=s,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function Hte({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var qte=z.object({error:z.object({code:z.string().nullable(),message:z.string(),param:z.any().nullable(),type:z.string()})}),HT=jf({errorSchema:qte,errorToMessage:e=>e.error.message});function Gte({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):i.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const s=a.type;switch(s){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=s;throw new dr({functionality:`Unsupported tool choice type: ${o}`})}}}function Wte(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var Kte=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},Zte=e=>async({response:t})=>{const n=Hp(t);if(t.body===null)throw new l5({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Kte).pipeThrough(new TransformStream({transform(r,a){a.enqueue(gf({schema:e,text:r}))}}))}},Yte=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:s,stopSequences:o,temperature:l,topK:u,topP:d}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:Wte({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:s,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:u,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=Gte({mode:n});return{args:{...g,messages:iE(a),tools:v},type:h,warnings:[...m,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:iE(a)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:iE(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:s,value:o}=await ha({abortSignal:e.abortSignal,body:i,failedResponseHandler:HT,fetch:this.config.fetch,headers:fa(this.config.headers(),e.headers),successfulResponseHandler:ns(Xte),url:`${this.config.baseURL}/chat`}),{messages:l,...u}=i,d=(t=o.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:qi(),toolCallType:"function",toolName:h.function.name}});return{finishReason:Hte({finishReason:o.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},request:{body:JSON.stringify(i)},text:(n=o.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const w of g.toolCalls)b.enqueue({argsTextDelta:w.args,toolCallId:w.toolCallId,toolCallType:"function",toolName:w.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...w});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await ha({abortSignal:e.abortSignal,body:t,failedResponseHandler:HT,fetch:this.config.fetch,headers:fa(this.config.headers(),e.headers),successfulResponseHandler:Zte(Jte),url:`${this.config.baseURL}/chat`}),{messages:s,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,u=new Vte({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:d,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){d=u.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}m&&u.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},Xte=z.object({created_at:z.string(),done:z.literal(!0),done_reason:z.string().optional().nullable(),eval_count:z.number(),eval_duration:z.number(),load_duration:z.number().optional(),message:z.object({content:z.string(),role:z.string(),tool_calls:z.array(z.object({function:z.object({arguments:z.record(z.any()),name:z.string()}),id:z.string().optional()})).optional().nullable()}),model:z.string(),prompt_eval_count:z.number().optional(),prompt_eval_duration:z.number().optional(),total_duration:z.number()}),Jte=z.discriminatedUnion("done",[z.object({created_at:z.string(),done:z.literal(!1),message:z.object({content:z.string(),role:z.string()}),model:z.string()}),z.object({created_at:z.string(),done:z.literal(!0),eval_count:z.number(),eval_duration:z.number(),load_duration:z.number().optional(),model:z.string(),prompt_eval_count:z.number().optional(),prompt_eval_duration:z.number().optional(),total_duration:z.number()})]),Qte=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new x1({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await ha({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:HT,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:ns(ene),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},ene=z.object({embeddings:z.array(z.array(z.number())),prompt_eval_count:z.number().nullable()});function BF(e={}){var t;const n=(t=C1(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(o,l={})=>new Yte(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(o,l={})=>new Qte(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),s=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(o,l)};return s.chat=a,s.embedding=i,s.languageModel=a,s.textEmbedding=i,s.textEmbeddingModel=i,s}BF();function Ag(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function tne(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Ag({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Ag(r[0])});break}t.push({role:"user",content:r.map(s=>{var o;const l=Ag(s);switch(s.type){case"text":return{type:"text",text:s.text,...l};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(o=s.mimeType)!=null?o:"image/jpeg"};base64,${Fu(s.image)}`},...l};case"file":throw new dr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let s="";const o=[];for(const l of r){const u=Ag(l);switch(l.type){case"text":{s+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...u});break}}}t.push({role:"assistant",content:s,tool_calls:o.length>0?o:void 0,...i});break}case"tool":{for(const s of r){const o=Ag(s);t.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result),...o})}break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}}return t}function wx({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function xx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var nne=z.object({error:z.object({message:z.string(),type:z.string().nullish(),param:z.any().nullish(),code:z.union([z.string(),z.number()]).nullish()})}),A1={errorSchema:nne,errorToMessage:e=>e.error.message};function rne({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):s.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=o;throw new dr({functionality:`Unsupported tool choice type: ${l}`})}}}var ane=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:A1;this.chunkSchema=sne(i.errorSchema),this.failedResponseHandler=jf(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,providerMetadata:l,stopSequences:u,responseFormat:d,seed:h}){var m,g,v,b,w;const x=e.type,_=[];i!=null&&_.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&_.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const E={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(m=d.name)!=null?m:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:h,...l==null?void 0:l[this.providerOptionsName],reasoning_effort:(b=(g=l==null?void 0:l[this.providerOptionsName])==null?void 0:g.reasoningEffort)!=null?b:(v=l==null?void 0:l["openai-compatible"])==null?void 0:v.reasoningEffort,messages:tne(t)};switch(x){case"regular":{const{tools:C,tool_choice:k,toolWarnings:I}=rne({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...E,tools:C,tool_choice:k},warnings:[..._,...I]}}case"object-json":return{args:{...E,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(w=e.name)!=null?w:"response",description:e.description}}:{type:"json_object"}},warnings:_};case"object-tool":return{args:{...E,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:_};default:{const C=x;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l,u,d,h;const{args:m,warnings:g}=this.getArgs({...e}),v=JSON.stringify(m),{responseHeaders:b,value:w,rawValue:x}=await ha({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:m,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ns(ine),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...E}=m,C=w.choices[0],k={[this.providerOptionsName]:{},...(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:x})},I=(r=w.usage)==null?void 0:r.completion_tokens_details,j=(a=w.usage)==null?void 0:a.prompt_tokens_details;return(I==null?void 0:I.reasoning_tokens)!=null&&(k[this.providerOptionsName].reasoningTokens=I==null?void 0:I.reasoning_tokens),(I==null?void 0:I.accepted_prediction_tokens)!=null&&(k[this.providerOptionsName].acceptedPredictionTokens=I==null?void 0:I.accepted_prediction_tokens),(I==null?void 0:I.rejected_prediction_tokens)!=null&&(k[this.providerOptionsName].rejectedPredictionTokens=I==null?void 0:I.rejected_prediction_tokens),(j==null?void 0:j.cached_tokens)!=null&&(k[this.providerOptionsName].cachedPromptTokens=j==null?void 0:j.cached_tokens),{text:(i=C.message.content)!=null?i:void 0,reasoning:(s=C.message.reasoning_content)!=null?s:void 0,toolCalls:(o=C.message.tool_calls)==null?void 0:o.map(N=>{var P;return{toolCallType:"function",toolCallId:(P=N.id)!=null?P:qi(),toolName:N.function.name,args:N.function.arguments}}),finishReason:xx(C.finish_reason),usage:{promptTokens:(u=(l=w.usage)==null?void 0:l.prompt_tokens)!=null?u:NaN,completionTokens:(h=(d=w.usage)==null?void 0:d.completion_tokens)!=null?h:NaN},providerMetadata:k,rawCall:{rawPrompt:_,rawSettings:E},rawResponse:{headers:b,body:x},response:wx(w),warnings:g,request:{body:v}}}async doStream(e){var t;if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.reasoning)if(Array.isArray(b.reasoning))for(const _ of b.reasoning)_.type==="text"&&x.enqueue({type:"reasoning",textDelta:_.text});else x.enqueue({type:"reasoning",textDelta:b.reasoning});if(b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const _ of b.toolCalls)x.enqueue({type:"tool-call",..._});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:o}=await ha({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:a,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Gp(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...u}=n,d=[];let h="unknown",m={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0}},g=!0,v=this.providerOptionsName;return{stream:o.pipeThrough(new TransformStream({transform(b,w){var x,_,E,C,k,I,j,N,P,L,H,M;if(!b.success){h="error",w.enqueue({type:"error",error:b.error});return}const K=b.value;if(i==null||i.processChunk(b.rawValue),"error"in K){h="error",w.enqueue({type:"error",error:K.error.message});return}if(g&&(g=!1,w.enqueue({type:"response-metadata",...wx(K)})),K.usage!=null){const{prompt_tokens:ie,completion_tokens:re,prompt_tokens_details:X,completion_tokens_details:ne}=K.usage;m.promptTokens=ie??void 0,m.completionTokens=re??void 0,(ne==null?void 0:ne.reasoning_tokens)!=null&&(m.completionTokensDetails.reasoningTokens=ne==null?void 0:ne.reasoning_tokens),(ne==null?void 0:ne.accepted_prediction_tokens)!=null&&(m.completionTokensDetails.acceptedPredictionTokens=ne==null?void 0:ne.accepted_prediction_tokens),(ne==null?void 0:ne.rejected_prediction_tokens)!=null&&(m.completionTokensDetails.rejectedPredictionTokens=ne==null?void 0:ne.rejected_prediction_tokens),(X==null?void 0:X.cached_tokens)!=null&&(m.promptTokensDetails.cachedTokens=X==null?void 0:X.cached_tokens)}const U=K.choices[0];if((U==null?void 0:U.finish_reason)!=null&&(h=xx(U.finish_reason)),(U==null?void 0:U.delta)==null)return;const se=U.delta;if(se.reasoning_content!=null&&w.enqueue({type:"reasoning",textDelta:se.reasoning_content}),se.content!=null&&w.enqueue({type:"text-delta",textDelta:se.content}),se.tool_calls!=null)for(const ie of se.tool_calls){const re=ie.index;if(d[re]==null){if(ie.type!=="function")throw new lp({data:ie,message:"Expected 'function' type."});if(ie.id==null)throw new lp({data:ie,message:"Expected 'id' to be a string."});if(((x=ie.function)==null?void 0:x.name)==null)throw new lp({data:ie,message:"Expected 'function.name' to be a string."});d[re]={id:ie.id,type:"function",function:{name:ie.function.name,arguments:(_=ie.function.arguments)!=null?_:""},hasFinished:!1};const ne=d[re];((E=ne.function)==null?void 0:E.name)!=null&&((C=ne.function)==null?void 0:C.arguments)!=null&&(ne.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ne.id,toolName:ne.function.name,argsTextDelta:ne.function.arguments}),nx(ne.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=ne.id)!=null?k:qi(),toolName:ne.function.name,args:ne.function.arguments}),ne.hasFinished=!0));continue}const X=d[re];X.hasFinished||(((I=ie.function)==null?void 0:I.arguments)!=null&&(X.function.arguments+=(N=(j=ie.function)==null?void 0:j.arguments)!=null?N:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:X.id,toolName:X.function.name,argsTextDelta:(P=ie.function.arguments)!=null?P:""}),((L=X.function)==null?void 0:L.name)!=null&&((H=X.function)==null?void 0:H.arguments)!=null&&nx(X.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(M=X.id)!=null?M:qi(),toolName:X.function.name,args:X.function.arguments}),X.hasFinished=!0))}},flush(b){var w,x;const _={[v]:{},...i==null?void 0:i.buildMetadata()};m.completionTokensDetails.reasoningTokens!=null&&(_[v].reasoningTokens=m.completionTokensDetails.reasoningTokens),m.completionTokensDetails.acceptedPredictionTokens!=null&&(_[v].acceptedPredictionTokens=m.completionTokensDetails.acceptedPredictionTokens),m.completionTokensDetails.rejectedPredictionTokens!=null&&(_[v].rejectedPredictionTokens=m.completionTokensDetails.rejectedPredictionTokens),m.promptTokensDetails.cachedTokens!=null&&(_[v].cachedPromptTokens=m.promptTokensDetails.cachedTokens),b.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(w=m.promptTokens)!=null?w:NaN,completionTokens:(x=m.completionTokens)!=null?x:NaN},providerMetadata:_})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},warnings:r,request:{body:JSON.stringify(a)}}}},$F=z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish(),prompt_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),completion_tokens_details:z.object({reasoning_tokens:z.number().nullish(),accepted_prediction_tokens:z.number().nullish(),rejected_prediction_tokens:z.number().nullish()}).nullish()}).nullish(),ine=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({message:z.object({role:z.literal("assistant").nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({id:z.string().nullish(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).nullish()}),finish_reason:z.string().nullish()})),usage:$F}),sne=e=>z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").nullish(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),finish_reason:z.string().nullish()})),usage:$F}),e]);function one({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new ec({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new dr({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new dr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new dr({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var lne=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:A1;this.chunkSchema=une(a.errorSchema),this.failedResponseHandler=jf(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h,providerMetadata:m}){var g;const v=e.type,b=[];s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:w,stopSequences:x}=one({prompt:n,inputFormat:t}),_=[...x??[],...u??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:w,stop:_.length>0?_:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new dr({functionality:"tools"});if(e.toolChoice)throw new dr({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new dr({functionality:"object-json mode"});case"object-tool":throw new dr({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:s}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:u}=await ha({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:ns(cne),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,m=l.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:xx(m.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o,body:u},response:wx(l),warnings:s,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await ha({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:fa(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Gp(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){l="error",m.enqueue({type:"error",error:g.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...wx(g)})),g.usage!=null&&(u={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=xx(v.finish_reason)),(v==null?void 0:v.text)!=null&&m.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},cne=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),une=e=>z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string().nullish(),index:z.number()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),e]),dne=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new x1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await ha({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:fa(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:jf((r=this.config.errorStructure)!=null?r:A1),successfulResponseHandler:ns(fne),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},fne=z.object({data:z.array(z.object({embedding:z.array(z.number())})),usage:z.object({prompt_tokens:z.number()}).nullish()}),hne=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:b,responseHeaders:w}=await ha({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:fa(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:jf((m=this.config.errorStructure)!=null?m:A1),successfulResponseHandler:ns(pne),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:w}}}},pne=z.object({data:z.array(z.object({b64_json:z.string()}))});function mne(e){const t=C1(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>s(h,m),s=(h,m={})=>new ane(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),o=(h,m={})=>new lne(h,m,a("completion")),l=(h,m={})=>new dne(h,m,a("embedding")),u=(h,m={})=>new hne(h,m,a("image")),d=(h,m)=>i(h,m);return d.languageModel=i,d.chatModel=s,d.completionModel=o,d.textEmbeddingModel=l,d.imageModel=u,d}const Au=(e,t)=>`${e}:${t}`,Rc=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},S0=e=>e==="openai"||e==="openrouter"||e==="google",zF=e=>e==="ollama"||e==="openai-compatible",nf=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",oc=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],gne={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},UF=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function VF(e,t,n){try{switch(e.type){case"openai":return Z5({apiKey:n})(t);case"google":return Q5({apiKey:n})(t);case"openrouter":return LF({apiKey:n,extraBody:{include_reasoning:!0}})(t);case"ollama":return BF({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return mne({baseURL:UF(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function N1(e,t,n){const a=Un.getState().getAllAvailableModelDefsForProvider(e.id).find(s=>s.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=VF(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:Au(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const HF={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]},Ng=new Map,yne=5*60*1e3,bne=(e,t)=>{var i,s,o,l,u,d,h,m,g,v,b,w,x,_;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((s=e.architecture)==null?void 0:s.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((u=e.architecture)==null?void 0:u.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((m=e.pricing)==null?void 0:m.request)??"0",image:((g=e.pricing)==null?void 0:g.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((w=e.top_provider)==null?void 0:w.context_length)??e.context_length??null,max_completion_tokens:((x=e.top_provider)==null?void 0:x.max_completion_tokens)??null,is_moderated:((_=e.top_provider)==null?void 0:_.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??HF[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function vne(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Ng.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var o,l,u;let i;const s={Accept:"application/json"};t&&(s.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",s["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",s["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete s.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=UF(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),qe.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:s});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const w=JSON.parse(b);v=((u=w==null?void 0:w.error)==null?void 0:u.message)||(w==null?void 0:w.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let m=[];if(e.type==="ollama"?m=h.models||[]:m=h.data||h||[],!Array.isArray(m))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const g=m.map(v=>bne(v,e.type));return g.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${g.length} models for ${e.name}`),g}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),qe.error(`Failed to fetch models for ${e.name}: ${h}`),Ng.delete(n),[]}})();return Ng.set(n,a),setTimeout(()=>{Ng.get(n)===a&&(Ng.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},yne),a}const sE="provider:lastModelSelection",i6="provider:globalModelSortOrder",Un=Ys(Xs((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),_t.saveSetting("enableApiKeyManagement",n),Ct.emit(St.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadSetting("enableApiKeyManagement",!0),[r,a,i,s]=await Promise.all([_t.loadProviderConfigs(),_t.loadApiKeys(),_t.loadSetting(i6,[]),_t.loadSetting(sE,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const o=r.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{m.push(Au(g.id,v))}),m),[]),l=new Set(o),u=i.filter(m=>l.has(m));let d=s;d&&l.has(d)||(d=u[0]??null,d||(d=o[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${d}`)),e({globalModelSortOrder:u,selectedModelId:d,isLoading:!1}),await _t.saveSetting(sE,d),console.log(`[ProviderStore] Emitting initial ${St.MODEL_SELECTION_CHANGED} with payload:`,{modelId:d}),Ct.emit(St.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),qe.error("Failed to load provider data")}},selectModel:n=>{const r=t().selectedModelId;console.log(`[ProviderStore] selectModel called. Current: ${r}, New: ${n}`),r!==n?(e({selectedModelId:n}),_t.saveSetting(sE,n),console.log(`[ProviderStore] Emitting ${St.MODEL_SELECTION_CHANGED} with payload:`,{modelId:n}),Ct.emit(St.MODEL_SELECTION_CHANGED,{modelId:n})):console.log(`[ProviderStore] selectModel skipped: ID ${n} already selected.`)},addApiKey:async(n,r,a)=>{const i=ji(),s=new Date,o={id:i,name:n,value:a,providerId:r,createdAt:s,updatedAt:s};try{return await _t.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),qe.success(`API Key "${n}" added.`),Ct.emit(St.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),qe.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await _t.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(s=>s.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(s=>s.apiKeyId===n?{...s,apiKeyId:null}:s)}),qe.success(`API Key "${r}" deleted.`),Ct.emit(St.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),qe.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await _t.saveProviderConfig(i),e(s=>{s.dbProviderConfigs.push(i)}),qe.success(`Provider "${n.name}" added.`),Ct.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),t().fetchModels(r).catch(s=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,s)}),r}catch(s){throw console.error("ProviderStore: Error adding provider config",s),qe.error(`Failed to add Provider: ${s instanceof Error?s.message:String(s)}`),s}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(s=>s.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await _t.saveProviderConfig(i),e(h=>{const m=h.dbProviderConfigs.findIndex(g=>g.id===n);m!==-1&&(h.dbProviderConfigs[m]=i)}),Ct.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const s=t().globalModelSortOrder,o=t().dbProviderConfigs;let l=[...s];const u=o.reduce((h,m)=>(m.isEnabled&&m.enabledModels&&m.enabledModels.forEach(g=>{h.push(Au(m.id,g))}),h),[]),d=new Set(u);l=s.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(s){throw console.error("ProviderStore: Error updating provider config",s),qe.error(`Failed to update Provider: ${s instanceof Error?s.message:String(s)}`),s}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await _t.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),Ct.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const s=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(m=>{d.push(Au(h.id,m))}),d),[]),o=new Set(s),u=t().globalModelSortOrder.filter(d=>o.has(d));await t().setGlobalModelSortOrder(u),qe.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),qe.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){qe.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,s=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,o=await vne(r,s);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),qe.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await _t.saveSetting(i6,r);const a=t().selectedModelId,s=t().dbProviderConfigs.reduce((l,u)=>(u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{l.push(Au(u.id,d))}),l),[]),o=new Set(s);if(!a||!o.has(a)){const l=r.find(h=>o.has(h)),u=s[0]??null,d=l??u;d!==a&&(console.log(`[ProviderStore] Selection ${a} invalidated or missing. Selecting ${d}`),t().selectModel(d))}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:s}=Rc(n);if(!i||!s)return;const o=r.find(u=>u.id===i);if(!o)return;const l=a.find(u=>u.id===o.apiKeyId);return N1(o,s,l==null?void 0:l.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(gne[a]||[]).map(s=>({id:s.id,name:s.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:HF[r.type]??[]}))}}))),jv="system",Dv="You are a helpful AI assistant.",Mv=.7,Ov=null,Pv=null,Fv=null,Lv=0,Bv=0,s6=!0,$v=!0,zv=!1,Uv=!1,Vv=!1,Hv=15,o6=null,l6=null,qv=5,Gv=null,Wv=!0,Kv=null,Zv=768,Yv=!1,Xv=!1,Jv=null,Qv=16,ew="max-w-7xl",tw=null,rr=Ys(Xs((e,t)=>({theme:jv,globalSystemPrompt:Dv,temperature:Mv,maxTokens:Ov,topP:Pv,topK:Fv,presencePenalty:Lv,frequencyPenalty:Bv,enableAdvancedSettings:s6,enableStreamingMarkdown:$v,enableStreamingCodeBlockParsing:zv,foldStreamingCodeBlocks:Uv,foldUserMessagesOnCompletion:Vv,streamingRenderFPS:Hv,gitUserName:o6,gitUserEmail:l6,toolMaxSteps:qv,prismThemeUrl:Gv,autoTitleEnabled:Wv,autoTitleModelId:Kv,autoTitlePromptMaxLength:Zv,autoTitleIncludeFiles:Yv,autoTitleIncludeRules:Xv,customFontFamily:Jv,customFontSize:Qv,chatMaxWidth:ew,customThemeColors:tw,setTheme:n=>{e({theme:n}),_t.saveSetting("theme",n)},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),_t.saveSetting("globalSystemPrompt",n)},setTemperature:n=>{e({temperature:n}),_t.saveSetting("temperature",n)},setMaxTokens:n=>{e({maxTokens:n}),_t.saveSetting("maxTokens",n)},setTopP:n=>{e({topP:n}),_t.saveSetting("topP",n)},setTopK:n=>{e({topK:n}),_t.saveSetting("topK",n)},setPresencePenalty:n=>{e({presencePenalty:n}),_t.saveSetting("presencePenalty",n)},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),_t.saveSetting("frequencyPenalty",n)},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),_t.saveSetting("enableAdvancedSettings",n)},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),_t.saveSetting("enableStreamingMarkdown",n)},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),_t.saveSetting("enableStreamingCodeBlockParsing",n)},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),_t.saveSetting("foldStreamingCodeBlocks",n)},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),_t.saveSetting("foldUserMessagesOnCompletion",n)},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),_t.saveSetting("streamingRenderFPS",r)},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),_t.saveSetting("gitUserName",r)},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),_t.saveSetting("gitUserEmail",r)},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),_t.saveSetting("toolMaxSteps",r)},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),_t.saveSetting("prismThemeUrl",r)},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),_t.saveSetting("autoTitleEnabled",n)},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),_t.saveSetting("autoTitleModelId",n)},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),_t.saveSetting("autoTitlePromptMaxLength",r)},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),_t.saveSetting("autoTitleIncludeFiles",n)},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),_t.saveSetting("autoTitleIncludeRules",n)},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),_t.saveSetting("customFontFamily",r)},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),_t.saveSetting("customFontSize",r)},setChatMaxWidth:n=>{e({chatMaxWidth:n}),_t.saveSetting("chatMaxWidth",n)},setCustomThemeColors:n=>{e({customThemeColors:n}),_t.saveSetting("customThemeColors",n)},setCustomThemeColor:(n,r)=>{e(a=>{const s={...a.customThemeColors??{}};r===null||r.trim()===""?delete s[n]:s[n]=r.trim(),a.customThemeColors=Object.keys(s).length>0?s:null}),_t.saveSetting("customThemeColors",t().customThemeColors)},loadSettings:async()=>{try{const[n,r,a,i,s,o,l,u,d,h,m,g,v,b,w,x,_,E,C,k,I,j,N,P,L,H,M]=await Promise.all([_t.loadSetting("theme",jv),_t.loadSetting("temperature",Mv),_t.loadSetting("maxTokens",Ov),_t.loadSetting("topP",Pv),_t.loadSetting("topK",Fv),_t.loadSetting("presencePenalty",Lv),_t.loadSetting("frequencyPenalty",Bv),_t.loadSetting("globalSystemPrompt",Dv),_t.loadSetting("enableAdvancedSettings",s6),_t.loadSetting("enableStreamingMarkdown",$v),_t.loadSetting("enableStreamingCodeBlockParsing",zv),_t.loadSetting("foldStreamingCodeBlocks",Uv),_t.loadSetting("foldUserMessagesOnCompletion",Vv),_t.loadSetting("streamingRenderFPS",Hv),_t.loadSetting("gitUserName",o6),_t.loadSetting("gitUserEmail",l6),_t.loadSetting("toolMaxSteps",qv),_t.loadSetting("prismThemeUrl",Gv),_t.loadSetting("autoTitleEnabled",Wv),_t.loadSetting("autoTitleModelId",Kv),_t.loadSetting("autoTitlePromptMaxLength",Zv),_t.loadSetting("autoTitleIncludeFiles",Yv),_t.loadSetting("autoTitleIncludeRules",Xv),_t.loadSetting("customFontFamily",Jv),_t.loadSetting("customFontSize",Qv),_t.loadSetting("chatMaxWidth",ew),_t.loadSetting("customThemeColors",tw)]);e({theme:n,temperature:r,maxTokens:a,topP:i,topK:s,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:u,enableAdvancedSettings:d,enableStreamingMarkdown:h,enableStreamingCodeBlockParsing:m,foldStreamingCodeBlocks:g,foldUserMessagesOnCompletion:v,streamingRenderFPS:b,gitUserName:w,gitUserEmail:x,toolMaxSteps:_,prismThemeUrl:E,autoTitleEnabled:C,autoTitleModelId:k,autoTitlePromptMaxLength:I,autoTitleIncludeFiles:j,autoTitleIncludeRules:N,customFontFamily:P,customFontSize:L,chatMaxWidth:H,customThemeColors:M})}catch(n){console.error("SettingsStore: Error loading settings",n)}},resetGeneralSettings:async()=>{try{e({enableStreamingMarkdown:$v,enableStreamingCodeBlockParsing:zv,foldStreamingCodeBlocks:Uv,foldUserMessagesOnCompletion:Vv,streamingRenderFPS:Hv}),await Promise.all([_t.saveSetting("enableStreamingMarkdown",$v),_t.saveSetting("enableStreamingCodeBlockParsing",zv),_t.saveSetting("foldStreamingCodeBlocks",Uv),_t.saveSetting("foldUserMessagesOnCompletion",Vv),_t.saveSetting("streamingRenderFPS",Hv)]),qe.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),qe.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{e({globalSystemPrompt:Dv,temperature:Mv,maxTokens:Ov,topP:Pv,topK:Fv,presencePenalty:Lv,frequencyPenalty:Bv,toolMaxSteps:qv,autoTitleEnabled:Wv,autoTitleModelId:Kv,autoTitlePromptMaxLength:Zv,autoTitleIncludeFiles:Yv,autoTitleIncludeRules:Xv}),await Promise.all([_t.saveSetting("globalSystemPrompt",Dv),_t.saveSetting("temperature",Mv),_t.saveSetting("maxTokens",Ov),_t.saveSetting("topP",Pv),_t.saveSetting("topK",Fv),_t.saveSetting("presencePenalty",Lv),_t.saveSetting("frequencyPenalty",Bv),_t.saveSetting("toolMaxSteps",qv),_t.saveSetting("autoTitleEnabled",Wv),_t.saveSetting("autoTitleModelId",Kv),_t.saveSetting("autoTitlePromptMaxLength",Zv),_t.saveSetting("autoTitleIncludeFiles",Yv),_t.saveSetting("autoTitleIncludeRules",Xv)]),qe.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),qe.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{e({theme:jv,prismThemeUrl:Gv,customFontFamily:Jv,customFontSize:Qv,chatMaxWidth:ew,customThemeColors:tw}),await Promise.all([_t.saveSetting("theme",jv),_t.saveSetting("prismThemeUrl",Gv),_t.saveSetting("customFontFamily",Jv),_t.saveSetting("customFontSize",Qv),_t.saveSetting("chatMaxWidth",ew),_t.saveSetting("customThemeColors",tw)]),qe.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),qe.error("Failed to reset theme settings.")}}})));async function qT(e,t){const n=Ir.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const s=await i.callback(a);if(s===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;s&&typeof s=="object"&&(a=s)}catch(s){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,s),!1}return a}function wne(){const e=On.getState(),t=Un.getState(),n=rr.getState(),{providerId:r}=Rc(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function xne(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function c6(e){try{const t=e.type||"application/octet-stream",n=_A(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:xne(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),qe.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function u6(e){return e.flatMap(t=>{var a,i,s;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-call"&&u.toolCallId&&u.toolName&&u.args!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,u)}}),o.length>0&&n.push({role:"assistant",content:o})}if((s=t.metadata)!=null&&s.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-result"&&u.toolCallId&&u.toolName&&u.result!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,u)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const d6=e=>Symbol.iterator in e,f6=e=>"entries"in e,h6=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},_ne=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function Sne(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!d6(e)||!d6(t)?h6({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):f6(e)&&f6(t)?h6(e,t):_ne(e,t)}function sn(e){const t=gt.useRef(void 0);return n=>{const r=e(n);return Sne(t.current,r)?t.current:t.current=r}}function qt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function Ene(e,t){const n=T.createContext(t),r=i=>{const{children:s,...o}=i,l=T.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function a(i){const s=T.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function wi(e,t=[]){let n=[];function r(i,s){const o=T.createContext(s),l=n.length;n=[...n,s];const u=h=>{var x;const{scope:m,children:g,...v}=h,b=((x=m==null?void 0:m[e])==null?void 0:x[l])||o,w=T.useMemo(()=>v,Object.values(v));return p.jsx(b.Provider,{value:w,children:g})};u.displayName=i+"Provider";function d(h,m){var b;const g=((b=m==null?void 0:m[e])==null?void 0:b[l])||o,v=T.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(s=>T.createContext(s));return function(o){const l=(o==null?void 0:o[e])||i;return T.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return a.scopeName=e,[r,Cne(a,...t)]}function Cne(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...o,...h}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var Tne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],an=Tne.reduce((e,t)=>{const n=Mu(`Primitive.${t}`),r=T.forwardRef((a,i)=>{const{asChild:s,...o}=a,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function qF(e,t){e&&sl.flushSync(()=>e.dispatchEvent(t))}function Ua(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function kne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e);T.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Ane="DismissableLayer",GT="dismissableLayer.update",Nne="dismissableLayer.pointerDownOutside",Rne="dismissableLayer.focusOutside",p6,GF=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wp=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...l}=e,u=T.useContext(GF),[d,h]=T.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=T.useState({}),v=Nn(t,j=>h(j)),b=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(w),_=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,C=_>=x,k=Dne(j=>{const N=j.target,P=[...u.branches].some(L=>L.contains(N));!C||P||(a==null||a(j),s==null||s(j),j.defaultPrevented||o==null||o())},m),I=Mne(j=>{const N=j.target;[...u.branches].some(L=>L.contains(N))||(i==null||i(j),s==null||s(j),j.defaultPrevented||o==null||o())},m);return kne(j=>{_===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&o&&(j.preventDefault(),o()))},m),T.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(p6=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),m6(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=p6)}},[d,m,n,u]),T.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),m6())},[d,u]),T.useEffect(()=>{const j=()=>g({});return document.addEventListener(GT,j),()=>document.removeEventListener(GT,j)},[]),p.jsx(an.div,{...l,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:qt(e.onFocusCapture,I.onFocusCapture),onBlurCapture:qt(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:qt(e.onPointerDownCapture,k.onPointerDownCapture)})});Wp.displayName=Ane;var Ine="DismissableLayerBranch",jne=T.forwardRef((e,t)=>{const n=T.useContext(GF),r=T.useRef(null),a=Nn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(an.div,{...e,ref:a})});jne.displayName=Ine;function Dne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e),r=T.useRef(!1),a=T.useRef(()=>{});return T.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){WF(Nne,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Mne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e),r=T.useRef(!1);return T.useEffect(()=>{const a=i=>{i.target&&!r.current&&WF(Rne,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function m6(){const e=new CustomEvent(GT);document.dispatchEvent(e)}function WF(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?qF(a,i):a.dispatchEvent(i)}var ai=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},One=w8[" useId ".trim().toString()]||(()=>{}),Pne=0;function Ha(e){const[t,n]=T.useState(One());return ai(()=>{n(r=>r??String(Pne++))},[e]),t?`radix-${t}`:""}const Fne=["top","right","bottom","left"],Uu=Math.min,bs=Math.max,_x=Math.round,nw=Math.floor,dl=e=>({x:e,y:e}),Lne={left:"right",right:"left",bottom:"top",top:"bottom"},Bne={start:"end",end:"start"};function WT(e,t,n){return bs(e,Uu(t,n))}function xc(e,t){return typeof e=="function"?e(t):e}function _c(e){return e.split("-")[0]}function Kp(e){return e.split("-")[1]}function AA(e){return e==="x"?"y":"x"}function NA(e){return e==="y"?"height":"width"}function Vu(e){return["top","bottom"].includes(_c(e))?"y":"x"}function RA(e){return AA(Vu(e))}function $ne(e,t,n){n===void 0&&(n=!1);const r=Kp(e),a=RA(e),i=NA(a);let s=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Sx(s)),[s,Sx(s)]}function zne(e){const t=Sx(e);return[KT(e),t,KT(t)]}function KT(e){return e.replace(/start|end/g,t=>Bne[t])}function Une(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:s;default:return[]}}function Vne(e,t,n,r){const a=Kp(e);let i=Une(_c(e),n==="start",r);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(KT)))),i}function Sx(e){return e.replace(/left|right|bottom|top/g,t=>Lne[t])}function Hne(e){return{top:0,right:0,bottom:0,left:0,...e}}function KF(e){return typeof e!="number"?Hne(e):{top:e,right:e,bottom:e,left:e}}function Ex(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function g6(e,t,n){let{reference:r,floating:a}=e;const i=Vu(t),s=RA(t),o=NA(s),l=_c(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[o]/2-a[o]/2;let g;switch(l){case"top":g={x:d,y:r.y-a.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Kp(t)){case"start":g[s]-=m*(n&&u?-1:1);break;case"end":g[s]+=m*(n&&u?-1:1);break}return g}const qne=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,o=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=g6(u,r,l),m=r,g={},v=0;for(let b=0;b<o.length;b++){const{name:w,fn:x}=o[b],{x:_,y:E,data:C,reset:k}=await x({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:u,platform:s,elements:{reference:e,floating:t}});d=_??d,h=E??h,g={...g,[w]:{...g[w],...C}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=g6(u,m,l)),b=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:g}};async function E0(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=xc(t,e),v=KF(g),w=o[m?h==="floating"?"reference":"floating":h],x=Ex(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Ex(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:E,strategy:l}):_);return{top:(x.top-k.top+v.top)/C.y,bottom:(k.bottom-x.bottom+v.bottom)/C.y,left:(x.left-k.left+v.left)/C.x,right:(k.right-x.right+v.right)/C.x}}const Gne=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:u,padding:d=0}=xc(e,t)||{};if(u==null)return{};const h=KF(d),m={x:n,y:r},g=RA(a),v=NA(g),b=await s.getDimensions(u),w=g==="y",x=w?"top":"left",_=w?"bottom":"right",E=w?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-m[g]-i.floating[v],k=m[g]-i.reference[g],I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let j=I?I[E]:0;(!j||!await(s.isElement==null?void 0:s.isElement(I)))&&(j=o.floating[E]||i.floating[v]);const N=C/2-k/2,P=j/2-b[v]/2-1,L=Uu(h[x],P),H=Uu(h[_],P),M=L,K=j-b[v]-H,U=j/2-b[v]/2+N,se=WT(M,U,K),ie=!l.arrow&&Kp(a)!=null&&U!==se&&i.reference[v]/2-(U<M?L:H)-b[v]/2<0,re=ie?U<M?U-M:U-K:0;return{[g]:m[g]+re,data:{[g]:se,centerOffset:U-se-re,...ie&&{alignmentOffset:re}},reset:ie}}}),Wne=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...w}=xc(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=_c(a),_=Vu(o),E=_c(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=m||(E||!b?[Sx(o)]:zne(o)),I=v!=="none";!m&&I&&k.push(...Vne(o,b,v,C));const j=[o,...k],N=await E0(t,w),P=[];let L=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(N[x]),h){const U=$ne(a,s,C);P.push(N[U[0]],N[U[1]])}if(L=[...L,{placement:a,overflows:P}],!P.every(U=>U<=0)){var H,M;const U=(((H=i.flip)==null?void 0:H.index)||0)+1,se=j[U];if(se)return{data:{index:U,overflows:L},reset:{placement:se}};let ie=(M=L.filter(re=>re.overflows[0]<=0).sort((re,X)=>re.overflows[1]-X.overflows[1])[0])==null?void 0:M.placement;if(!ie)switch(g){case"bestFit":{var K;const re=(K=L.filter(X=>{if(I){const ne=Vu(X.placement);return ne===_||ne==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ne=>ne>0).reduce((ne,q)=>ne+q,0)]).sort((X,ne)=>X[1]-ne[1])[0])==null?void 0:K[0];re&&(ie=re);break}case"initialPlacement":ie=o;break}if(a!==ie)return{reset:{placement:ie}}}return{}}}};function y6(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function b6(e){return Fne.some(t=>e[t]>=0)}const Kne=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=xc(e,t);switch(r){case"referenceHidden":{const i=await E0(t,{...a,elementContext:"reference"}),s=y6(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:b6(s)}}}case"escaped":{const i=await E0(t,{...a,altBoundary:!0}),s=y6(i,n.floating);return{data:{escapedOffsets:s,escaped:b6(s)}}}default:return{}}}}};async function Zne(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),s=_c(n),o=Kp(n),l=Vu(n)==="y",u=["left","top"].includes(s)?-1:1,d=i&&l?-1:1,h=xc(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof v=="number"&&(g=o==="end"?v*-1:v),l?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const Yne=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await Zne(t,e);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},Xne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:w=>{let{x,y:_}=w;return{x,y:_}}},...l}=xc(e,t),u={x:n,y:r},d=await E0(t,l),h=Vu(_c(a)),m=AA(h);let g=u[m],v=u[h];if(i){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",_=g+d[w],E=g-d[x];g=WT(_,g,E)}if(s){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",_=v+d[w],E=v-d[x];v=WT(_,v,E)}const b=o.fn({...t,[m]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[m]:i,[h]:s}}}}}},Jne=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=xc(e,t),d={x:n,y:r},h=Vu(a),m=AA(h);let g=d[m],v=d[h];const b=xc(o,t),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=m==="y"?"height":"width",C=i.reference[m]-i.floating[E]+w.mainAxis,k=i.reference[m]+i.reference[E]-w.mainAxis;g<C?g=C:g>k&&(g=k)}if(u){var x,_;const E=m==="y"?"width":"height",C=["top","left"].includes(_c(a)),k=i.reference[h]-i.floating[E]+(C&&((x=s.offset)==null?void 0:x[h])||0)+(C?0:w.crossAxis),I=i.reference[h]+i.reference[E]+(C?0:((_=s.offset)==null?void 0:_[h])||0)-(C?w.crossAxis:0);v<k?v=k:v>I&&(v=I)}return{[m]:g,[h]:v}}}},Qne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...u}=xc(e,t),d=await E0(t,u),h=_c(a),m=Kp(a),g=Vu(a)==="y",{width:v,height:b}=i.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=m===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(x=h,w=m==="end"?"top":"bottom");const _=b-d.top-d.bottom,E=v-d.left-d.right,C=Uu(b-d[w],_),k=Uu(v-d[x],E),I=!t.middlewareData.shift;let j=C,N=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(N=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(j=_),I&&!m){const L=bs(d.left,0),H=bs(d.right,0),M=bs(d.top,0),K=bs(d.bottom,0);g?N=v-2*(L!==0||H!==0?L+H:bs(d.left,d.right)):j=b-2*(M!==0||K!==0?M+K:bs(d.top,d.bottom))}await l({...t,availableWidth:N,availableHeight:j});const P=await s.getDimensions(o.floating);return v!==P.width||b!==P.height?{reset:{rects:!0}}:{}}}};function R1(){return typeof window<"u"}function Zp(e){return ZF(e)?(e.nodeName||"").toLowerCase():"#document"}function ws(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Sl(e){var t;return(t=(ZF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ZF(e){return R1()?e instanceof Node||e instanceof ws(e).Node:!1}function Eo(e){return R1()?e instanceof Element||e instanceof ws(e).Element:!1}function bl(e){return R1()?e instanceof HTMLElement||e instanceof ws(e).HTMLElement:!1}function v6(e){return!R1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ws(e).ShadowRoot}function Sy(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Co(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function ere(e){return["table","td","th"].includes(Zp(e))}function I1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function IA(e){const t=jA(),n=Eo(e)?Co(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function tre(e){let t=Hu(e);for(;bl(t)&&!_p(t);){if(IA(t))return t;if(I1(t))return null;t=Hu(t)}return null}function jA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _p(e){return["html","body","#document"].includes(Zp(e))}function Co(e){return ws(e).getComputedStyle(e)}function j1(e){return Eo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hu(e){if(Zp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||v6(e)&&e.host||Sl(e);return v6(t)?t.host:t}function YF(e){const t=Hu(e);return _p(t)?e.ownerDocument?e.ownerDocument.body:e.body:bl(t)&&Sy(t)?t:YF(t)}function C0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=YF(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),s=ws(a);if(i){const o=ZT(s);return t.concat(s,s.visualViewport||[],Sy(a)?a:[],o&&n?C0(o):[])}return t.concat(a,C0(a,[],n))}function ZT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function XF(e){const t=Co(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=bl(e),i=a?e.offsetWidth:n,s=a?e.offsetHeight:r,o=_x(n)!==i||_x(r)!==s;return o&&(n=i,r=s),{width:n,height:r,$:o}}function DA(e){return Eo(e)?e:e.contextElement}function up(e){const t=DA(e);if(!bl(t))return dl(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=XF(t);let s=(i?_x(n.width):n.width)/r,o=(i?_x(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const nre=dl(0);function JF(e){const t=ws(e);return!jA()||!t.visualViewport?nre:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rre(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ws(e)?!1:t}function wf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=DA(e);let s=dl(1);t&&(r?Eo(r)&&(s=up(r)):s=up(e));const o=rre(i,n,r)?JF(i):dl(0);let l=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,d=a.width/s.x,h=a.height/s.y;if(i){const m=ws(i),g=r&&Eo(r)?ws(r):r;let v=m,b=ZT(v);for(;b&&r&&g!==v;){const w=up(b),x=b.getBoundingClientRect(),_=Co(b),E=x.left+(b.clientLeft+parseFloat(_.paddingLeft))*w.x,C=x.top+(b.clientTop+parseFloat(_.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,h*=w.y,l+=E,u+=C,v=ws(b),b=ZT(v)}}return Ex({width:d,height:h,x:l,y:u})}function MA(e,t){const n=j1(e).scrollLeft;return t?t.left+n:wf(Sl(e)).left+n}function QF(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:MA(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function are(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",s=Sl(r),o=t?I1(t.floating):!1;if(r===s||o&&i)return n;let l={scrollLeft:0,scrollTop:0},u=dl(1);const d=dl(0),h=bl(r);if((h||!h&&!i)&&((Zp(r)!=="body"||Sy(s))&&(l=j1(r)),bl(r))){const g=wf(r);u=up(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=s&&!h&&!i?QF(s,l,!0):dl(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-l.scrollTop*u.y+d.y+m.y}}function ire(e){return Array.from(e.getClientRects())}function sre(e){const t=Sl(e),n=j1(e),r=e.ownerDocument.body,a=bs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=bs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+MA(e);const o=-n.scrollTop;return Co(r).direction==="rtl"&&(s+=bs(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:s,y:o}}function ore(e,t){const n=ws(e),r=Sl(e),a=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const u=jA();(!u||u&&t==="fixed")&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}function lre(e,t){const n=wf(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=bl(e)?up(e):dl(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y,l=a*i.x,u=r*i.y;return{width:s,height:o,x:l,y:u}}function w6(e,t,n){let r;if(t==="viewport")r=ore(e,n);else if(t==="document")r=sre(Sl(e));else if(Eo(t))r=lre(t,n);else{const a=JF(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Ex(r)}function eL(e,t){const n=Hu(e);return n===t||!Eo(n)||_p(n)?!1:Co(n).position==="fixed"||eL(n,t)}function cre(e,t){const n=t.get(e);if(n)return n;let r=C0(e,[],!1).filter(o=>Eo(o)&&Zp(o)!=="body"),a=null;const i=Co(e).position==="fixed";let s=i?Hu(e):e;for(;Eo(s)&&!_p(s);){const o=Co(s),l=IA(s);!l&&o.position==="fixed"&&(a=null),(i?!l&&!a:!l&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Sy(s)&&!l&&eL(e,s))?r=r.filter(d=>d!==s):a=o,s=Hu(s)}return t.set(e,r),r}function ure(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const s=[...n==="clippingAncestors"?I1(t)?[]:cre(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((u,d)=>{const h=w6(t,d,a);return u.top=bs(h.top,u.top),u.right=Uu(h.right,u.right),u.bottom=Uu(h.bottom,u.bottom),u.left=bs(h.left,u.left),u},w6(t,o,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dre(e){const{width:t,height:n}=XF(e);return{width:t,height:n}}function fre(e,t,n){const r=bl(t),a=Sl(t),i=n==="fixed",s=wf(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=dl(0);if(r||!r&&!i)if((Zp(t)!=="body"||Sy(a))&&(o=j1(t)),r){const m=wf(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else a&&(l.x=MA(a));const u=a&&!r&&!i?QF(a,o):dl(0),d=s.left+o.scrollLeft-l.x-u.x,h=s.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:s.width,height:s.height}}function oE(e){return Co(e).position==="static"}function x6(e,t){if(!bl(e)||Co(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Sl(e)===n&&(n=n.ownerDocument.body),n}function tL(e,t){const n=ws(e);if(I1(e))return n;if(!bl(e)){let a=Hu(e);for(;a&&!_p(a);){if(Eo(a)&&!oE(a))return a;a=Hu(a)}return n}let r=x6(e,t);for(;r&&ere(r)&&oE(r);)r=x6(r,t);return r&&_p(r)&&oE(r)&&!IA(r)?n:r||tre(e)||n}const hre=async function(e){const t=this.getOffsetParent||tL,n=this.getDimensions,r=await n(e.floating);return{reference:fre(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pre(e){return Co(e).direction==="rtl"}const mre={convertOffsetParentRelativeRectToViewportRelativeRect:are,getDocumentElement:Sl,getClippingRect:ure,getOffsetParent:tL,getElementRects:hre,getClientRects:ire,getDimensions:dre,getScale:up,isElement:Eo,isRTL:pre};function nL(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gre(e,t){let n=null,r;const a=Sl(e);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=u;if(o||t(),!m||!g)return;const v=nw(h),b=nw(a.clientWidth-(d+m)),w=nw(a.clientHeight-(h+g)),x=nw(d),E={rootMargin:-v+"px "+-b+"px "+-w+"px "+-x+"px",threshold:bs(0,Uu(1,l))||1};let C=!0;function k(I){const j=I[0].intersectionRatio;if(j!==l){if(!C)return s();j?s(!1,j):r=setTimeout(()=>{s(!1,1e-7)},1e3)}j===1&&!nL(u,e.getBoundingClientRect())&&s(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return s(!0),i}function yre(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=DA(e),d=a||i?[...u?C0(u):[],...C0(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&o?gre(u,n):null;let m=-1,g=null;s&&(g=new ResizeObserver(x=>{let[_]=x;_&&_.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),u&&!l&&g.observe(u),g.observe(t));let v,b=l?wf(e):null;l&&w();function w(){const x=wf(e);b&&!nL(b,x)&&n(),b=x,v=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(_=>{a&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const bre=Yne,vre=Xne,wre=Wne,xre=Qne,_re=Kne,_6=Gne,Sre=Jne,Ere=(e,t,n)=>{const r=new Map,a={platform:mre,...n},i={...a.platform,_c:r};return qne(e,t,{...a,platform:i})};var Pw=typeof document<"u"?T.useLayoutEffect:T.useEffect;function Cx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Cx(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Cx(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function rL(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function S6(e,t){const n=rL(e);return Math.round(t*n)/n}function lE(e){const t=T.useRef(e);return Pw(()=>{t.current=e}),t}function Cre(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[d,h]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=T.useState(r);Cx(m,r)||g(r);const[v,b]=T.useState(null),[w,x]=T.useState(null),_=T.useCallback(X=>{X!==I.current&&(I.current=X,b(X))},[]),E=T.useCallback(X=>{X!==j.current&&(j.current=X,x(X))},[]),C=i||v,k=s||w,I=T.useRef(null),j=T.useRef(null),N=T.useRef(d),P=l!=null,L=lE(l),H=lE(a),M=lE(u),K=T.useCallback(()=>{if(!I.current||!j.current)return;const X={placement:t,strategy:n,middleware:m};H.current&&(X.platform=H.current),Ere(I.current,j.current,X).then(ne=>{const q={...ne,isPositioned:M.current!==!1};U.current&&!Cx(N.current,q)&&(N.current=q,sl.flushSync(()=>{h(q)}))})},[m,t,n,H,M]);Pw(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[u]);const U=T.useRef(!1);Pw(()=>(U.current=!0,()=>{U.current=!1}),[]),Pw(()=>{if(C&&(I.current=C),k&&(j.current=k),C&&k){if(L.current)return L.current(C,k,K);K()}},[C,k,K,L,P]);const se=T.useMemo(()=>({reference:I,floating:j,setReference:_,setFloating:E}),[_,E]),ie=T.useMemo(()=>({reference:C,floating:k}),[C,k]),re=T.useMemo(()=>{const X={position:n,left:0,top:0};if(!ie.floating)return X;const ne=S6(ie.floating,d.x),q=S6(ie.floating,d.y);return o?{...X,transform:"translate("+ne+"px, "+q+"px)",...rL(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:q}},[n,o,ie.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:K,refs:se,elements:ie,floatingStyles:re}),[d,K,se,ie,re])}const Tre=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?_6({element:r.current,padding:a}).fn(n):{}:r?_6({element:r,padding:a}).fn(n):{}}}},kre=(e,t)=>({...bre(e),options:[e,t]}),Are=(e,t)=>({...vre(e),options:[e,t]}),Nre=(e,t)=>({...Sre(e),options:[e,t]}),Rre=(e,t)=>({...wre(e),options:[e,t]}),Ire=(e,t)=>({...xre(e),options:[e,t]}),jre=(e,t)=>({..._re(e),options:[e,t]}),Dre=(e,t)=>({...Tre(e),options:[e,t]});var Mre="Arrow",aL=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return p.jsx(an.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});aL.displayName=Mre;var Ore=aL;function D1(e){const[t,n]=T.useState(void 0);return ai(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=e.offsetWidth,o=e.offsetHeight;n({width:s,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var OA="Popper",[iL,id]=wi(OA),[Pre,sL]=iL(OA),oL=e=>{const{__scopePopper:t,children:n}=e,[r,a]=T.useState(null);return p.jsx(Pre,{scope:t,anchor:r,onAnchorChange:a,children:n})};oL.displayName=OA;var lL="PopperAnchor",cL=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=sL(lL,n),s=T.useRef(null),o=Nn(t,s);return T.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:p.jsx(an.div,{...a,ref:o})});cL.displayName=lL;var PA="PopperContent",[Fre,Lre]=iL(PA),uL=T.forwardRef((e,t)=>{var Ae,_e,ve,Be,nt,Ve;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,w=sL(PA,n),[x,_]=T.useState(null),E=Nn(t,De=>_(De)),[C,k]=T.useState(null),I=D1(C),j=(I==null?void 0:I.width)??0,N=(I==null?void 0:I.height)??0,P=r+(i!=="center"?"-"+i:""),L=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},H=Array.isArray(u)?u:[u],M=H.length>0,K={padding:L,boundary:H.filter($re),altBoundary:M},{refs:U,floatingStyles:se,placement:ie,isPositioned:re,middlewareData:X}=Cre({strategy:"fixed",placement:P,whileElementsMounted:(...De)=>yre(...De,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[kre({mainAxis:a+N,alignmentAxis:s}),l&&Are({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Nre():void 0,...K}),l&&Rre({...K}),Ire({...K,apply:({elements:De,rects:$,availableWidth:Ee,availableHeight:Te})=>{const{width:fe,height:oe}=$.reference,ee=De.floating.style;ee.setProperty("--radix-popper-available-width",`${Ee}px`),ee.setProperty("--radix-popper-available-height",`${Te}px`),ee.setProperty("--radix-popper-anchor-width",`${fe}px`),ee.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),C&&Dre({element:C,padding:o}),zre({arrowWidth:j,arrowHeight:N}),m&&jre({strategy:"referenceHidden",...K})]}),[ne,q]=hL(ie),J=Ua(v);ai(()=>{re&&(J==null||J())},[re,J]);const Q=(Ae=X.arrow)==null?void 0:Ae.x,te=(_e=X.arrow)==null?void 0:_e.y,ue=((ve=X.arrow)==null?void 0:ve.centerOffset)!==0,[ge,Ie]=T.useState();return ai(()=>{x&&Ie(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:re?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[(Be=X.transformOrigin)==null?void 0:Be.x,(nt=X.transformOrigin)==null?void 0:nt.y].join(" "),...((Ve=X.hide)==null?void 0:Ve.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(Fre,{scope:n,placedSide:ne,onArrowChange:k,arrowX:Q,arrowY:te,shouldHideArrow:ue,children:p.jsx(an.div,{"data-side":ne,"data-align":q,...b,ref:E,style:{...b.style,animation:re?void 0:"none"}})})})});uL.displayName=PA;var dL="PopperArrow",Bre={top:"bottom",right:"left",bottom:"top",left:"right"},fL=T.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=Lre(dL,r),s=Bre[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(Ore,{...a,ref:n,style:{...a.style,display:"block"}})})});fL.displayName=dL;function $re(e){return e!==null}var zre=e=>({name:"transformOrigin",options:e,fn(t){var w,x,_;const{placement:n,rects:r,middlewareData:a}=t,s=((w=a.arrow)==null?void 0:w.centerOffset)!==0,o=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[u,d]=hL(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((x=a.arrow)==null?void 0:x.x)??0)+o/2,g=(((_=a.arrow)==null?void 0:_.y)??0)+l/2;let v="",b="";return u==="bottom"?(v=s?h:`${m}px`,b=`${-l}px`):u==="top"?(v=s?h:`${m}px`,b=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,b=s?h:`${g}px`):u==="left"&&(v=`${r.floating.width+l}px`,b=s?h:`${g}px`),{data:{x:v,y:b}}}});function hL(e){const[t,n="center"]=e.split("-");return[t,n]}var M1=oL,Ey=cL,O1=uL,P1=fL,Ure="Portal",Yp=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[a,i]=T.useState(!1);ai(()=>i(!0),[]);const s=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?X8.createPortal(p.jsx(an.div,{...r,ref:t}),s):null});Yp.displayName=Ure;function Vre(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var Za=e=>{const{present:t,children:n}=e,r=Hre(t),a=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),i=Nn(r.ref,qre(a));return typeof n=="function"||r.isPresent?T.cloneElement(a,{ref:i}):null};Za.displayName="Presence";function Hre(e){const[t,n]=T.useState(),r=T.useRef(null),a=T.useRef(e),i=T.useRef("none"),s=e?"mounted":"unmounted",[o,l]=Vre(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const u=rw(r.current);i.current=o==="mounted"?u:"none"},[o]),ai(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,g=rw(u);e?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),ai(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=g=>{const b=rw(r.current).includes(g.animationName);if(g.target===t&&b&&(l("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(i.current=rw(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:T.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function rw(e){return(e==null?void 0:e.animationName)||"none"}function qre(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Gre=w8[" useInsertionEffect ".trim().toString()]||ai;function To({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,s]=Wre({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:a;{const d=T.useRef(e!==void 0);T.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=T.useCallback(d=>{var h;if(o){const m=Kre(d)?d(e):d;m!==e&&((h=s.current)==null||h.call(s,m))}else i(d)},[o,e,i,s]);return[l,u]}function Wre({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),a=T.useRef(n),i=T.useRef(t);return Gre(()=>{i.current=t},[t]),T.useEffect(()=>{var s;a.current!==n&&((s=i.current)==null||s.call(i,n),a.current=n)},[n,a]),[n,r,i]}function Kre(e){return typeof e=="function"}var pL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Zre="VisuallyHidden",mL=T.forwardRef((e,t)=>p.jsx(an.span,{...e,ref:t,style:{...pL,...e.style}}));mL.displayName=Zre;var Yre=mL,[F1,U3e]=wi("Tooltip",[id]),L1=id(),gL="TooltipProvider",Xre=700,YT="tooltip.open",[Jre,FA]=F1(gL),yL=e=>{const{__scopeTooltip:t,delayDuration:n=Xre,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,s=T.useRef(!0),o=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),p.jsx(Jre,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:T.useCallback(u=>{o.current=u},[]),disableHoverableContent:a,children:i})};yL.displayName=gL;var T0="Tooltip",[Qre,Cy]=F1(T0),bL=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,l=FA(T0,e.__scopeTooltip),u=L1(t),[d,h]=T.useState(null),m=Ha(),g=T.useRef(0),v=s??l.disableHoverableContent,b=o??l.delayDuration,w=T.useRef(!1),[x,_]=To({prop:r,defaultProp:a??!1,onChange:j=>{j?(l.onOpen(),document.dispatchEvent(new CustomEvent(YT))):l.onClose(),i==null||i(j)},caller:T0}),E=T.useMemo(()=>x?w.current?"delayed-open":"instant-open":"closed",[x]),C=T.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w.current=!1,_(!0)},[_]),k=T.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),I=T.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{w.current=!0,_(!0),g.current=0},b)},[b,_]);return T.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),p.jsx(M1,{...u,children:p.jsx(Qre,{scope:t,contentId:m,open:x,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayedRef.current?I():C()},[l.isOpenDelayedRef,I,C]),onTriggerLeave:T.useCallback(()=>{v?k():(window.clearTimeout(g.current),g.current=0)},[k,v]),onOpen:C,onClose:k,disableHoverableContent:v,children:n})})};bL.displayName=T0;var XT="TooltipTrigger",vL=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Cy(XT,n),i=FA(XT,n),s=L1(n),o=T.useRef(null),l=Nn(t,o,a.onTriggerChange),u=T.useRef(!1),d=T.useRef(!1),h=T.useCallback(()=>u.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(Ey,{asChild:!0,...s,children:p.jsx(an.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:qt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:qt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:qt(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:qt(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:qt(e.onBlur,a.onClose),onClick:qt(e.onClick,a.onClose)})})});vL.displayName=XT;var LA="TooltipPortal",[eae,tae]=F1(LA,{forceMount:void 0}),wL=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=Cy(LA,t);return p.jsx(eae,{scope:t,forceMount:n,children:p.jsx(Za,{present:n||i.open,children:p.jsx(Yp,{asChild:!0,container:a,children:r})})})};wL.displayName=LA;var Sp="TooltipContent",xL=T.forwardRef((e,t)=>{const n=tae(Sp,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,s=Cy(Sp,e.__scopeTooltip);return p.jsx(Za,{present:r||s.open,children:s.disableHoverableContent?p.jsx(_L,{side:a,...i,ref:t}):p.jsx(nae,{side:a,...i,ref:t})})}),nae=T.forwardRef((e,t)=>{const n=Cy(Sp,e.__scopeTooltip),r=FA(Sp,e.__scopeTooltip),a=T.useRef(null),i=Nn(t,a),[s,o]=T.useState(null),{trigger:l,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=T.useCallback(()=>{o(null),h(!1)},[h]),g=T.useCallback((v,b)=>{const w=v.currentTarget,x={x:v.clientX,y:v.clientY},_=sae(x,w.getBoundingClientRect()),E=oae(x,_),C=lae(b.getBoundingClientRect()),k=uae([...E,...C]);o(k),h(!0)},[h]);return T.useEffect(()=>()=>m(),[m]),T.useEffect(()=>{if(l&&d){const v=w=>g(w,d),b=w=>g(w,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,g,m]),T.useEffect(()=>{if(s){const v=b=>{const w=b.target,x={x:b.clientX,y:b.clientY},_=(l==null?void 0:l.contains(w))||(d==null?void 0:d.contains(w)),E=!cae(x,s);_?m():E&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,s,u,m]),p.jsx(_L,{...e,ref:i})}),[rae,aae]=F1(T0,{isInside:!1}),iae=VW("TooltipContent"),_L=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,l=Cy(Sp,n),u=L1(n),{onClose:d}=l;return T.useEffect(()=>(document.addEventListener(YT,d),()=>document.removeEventListener(YT,d)),[d]),T.useEffect(()=>{if(l.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),p.jsx(Wp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:p.jsxs(O1,{"data-state":l.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(iae,{children:r}),p.jsx(rae,{scope:n,isInside:!0,children:p.jsx(Yre,{id:l.contentId,role:"tooltip",children:a||r})})]})})});xL.displayName=Sp;var SL="TooltipArrow",EL=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=L1(n);return aae(SL,n).isInside?null:p.jsx(P1,{...a,...r,ref:t})});EL.displayName=SL;function sae(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function oae(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function lae(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function cae(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function uae(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),dae(t)}function dae(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var fae=yL,hae=bL,pae=vL,mae=wL,gae=xL,yae=EL;function Gn({delayDuration:e=0,...t}){return p.jsx(fae,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Kn({...e}){return p.jsx(Gn,{children:p.jsx(hae,{"data-slot":"tooltip",...e})})}function Zn({...e}){return p.jsx(pae,{"data-slot":"tooltip-trigger",...e})}function Yn({className:e,sideOffset:t=0,children:n,...r}){return p.jsx(mae,{children:p.jsxs(gae,{"data-slot":"tooltip-content",sideOffset:t,className:xt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,p.jsx(yae,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var cE={exports:{}},E6;function bae(){return E6||(E6=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function _(E){return E instanceof l?new l(E.type,_(E.content),E.alias):Array.isArray(E)?E.map(_):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(_){return Object.prototype.toString.call(_).slice(8,-1)},objId:function(_){return _.__id||Object.defineProperty(_,"__id",{value:++i}),_.__id},clone:function _(E,C){C=C||{};var k,I;switch(o.util.type(E)){case"Object":if(I=o.util.objId(E),C[I])return C[I];k={},C[I]=k;for(var j in E)E.hasOwnProperty(j)&&(k[j]=_(E[j],C));return k;case"Array":return I=o.util.objId(E),C[I]?C[I]:(k=[],C[I]=k,E.forEach(function(N,P){k[P]=_(N,C)}),k);default:return E}},getLanguage:function(_){for(;_;){var E=a.exec(_.className);if(E)return E[1].toLowerCase();_=_.parentElement}return"none"},setLanguage:function(_,E){_.className=_.className.replace(RegExp(a,"gi"),""),_.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var _=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(_){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==_)return E[C]}return null}},isActive:function(_,E,C){for(var k="no-"+E;_;){var I=_.classList;if(I.contains(E))return!0;if(I.contains(k))return!1;_=_.parentElement}return!!C}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(_,E){var C=o.util.clone(o.languages[_]);for(var k in E)C[k]=E[k];return C},insertBefore:function(_,E,C,k){k=k||o.languages;var I=k[_],j={};for(var N in I)if(I.hasOwnProperty(N)){if(N==E)for(var P in C)C.hasOwnProperty(P)&&(j[P]=C[P]);C.hasOwnProperty(N)||(j[N]=I[N])}var L=k[_];return k[_]=j,o.languages.DFS(o.languages,function(H,M){M===L&&H!=_&&(this[H]=j)}),j},DFS:function _(E,C,k,I){I=I||{};var j=o.util.objId;for(var N in E)if(E.hasOwnProperty(N)){C.call(E,N,E[N],k||N);var P=E[N],L=o.util.type(P);L==="Object"&&!I[j(P)]?(I[j(P)]=!0,_(P,C,null,I)):L==="Array"&&!I[j(P)]&&(I[j(P)]=!0,_(P,C,N,I))}}},plugins:{},highlightAll:function(_,E){o.highlightAllUnder(document,_,E)},highlightAllUnder:function(_,E,C){var k={callback:C,container:_,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var I=0,j;j=k.elements[I++];)o.highlightElement(j,E===!0,k.callback)},highlightElement:function(_,E,C){var k=o.util.getLanguage(_),I=o.languages[k];o.util.setLanguage(_,k);var j=_.parentElement;j&&j.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(j,k);var N=_.textContent,P={element:_,language:k,grammar:I,code:N};function L(M){P.highlightedCode=M,o.hooks.run("before-insert",P),P.element.innerHTML=P.highlightedCode,o.hooks.run("after-highlight",P),o.hooks.run("complete",P),C&&C.call(P.element)}if(o.hooks.run("before-sanity-check",P),j=P.element.parentElement,j&&j.nodeName.toLowerCase()==="pre"&&!j.hasAttribute("tabindex")&&j.setAttribute("tabindex","0"),!P.code){o.hooks.run("complete",P),C&&C.call(P.element);return}if(o.hooks.run("before-highlight",P),!P.grammar){L(o.util.encode(P.code));return}if(E&&r.Worker){var H=new Worker(o.filename);H.onmessage=function(M){L(M.data)},H.postMessage(JSON.stringify({language:P.language,code:P.code,immediateClose:!0}))}else L(o.highlight(P.code,P.grammar,P.language))},highlight:function(_,E,C){var k={code:_,grammar:E,language:C};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),l.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(_,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var I=new h;return m(I,I.head,_),d(_,I,E,I.head,0),v(I)},hooks:{all:{},add:function(_,E){var C=o.hooks.all;C[_]=C[_]||[],C[_].push(E)},run:function(_,E){var C=o.hooks.all[_];if(!(!C||!C.length))for(var k=0,I;I=C[k++];)I(E)}},Token:l};r.Prism=o;function l(_,E,C,k){this.type=_,this.content=E,this.alias=C,this.length=(k||"").length|0}l.stringify=function _(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(L){k+=_(L,C)}),k}var I={type:E.type,content:_(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},j=E.alias;j&&(Array.isArray(j)?Array.prototype.push.apply(I.classes,j):I.classes.push(j)),o.hooks.run("wrap",I);var N="";for(var P in I.attributes)N+=" "+P+'="'+(I.attributes[P]||"").replace(/"/g,"&quot;")+'"';return"<"+I.tag+' class="'+I.classes.join(" ")+'"'+N+">"+I.content+"</"+I.tag+">"};function u(_,E,C,k){_.lastIndex=E;var I=_.exec(C);if(I&&k&&I[1]){var j=I[1].length;I.index+=j,I[0]=I[0].slice(j)}return I}function d(_,E,C,k,I,j){for(var N in C)if(!(!C.hasOwnProperty(N)||!C[N])){var P=C[N];P=Array.isArray(P)?P:[P];for(var L=0;L<P.length;++L){if(j&&j.cause==N+","+L)return;var H=P[L],M=H.inside,K=!!H.lookbehind,U=!!H.greedy,se=H.alias;if(U&&!H.pattern.global){var ie=H.pattern.toString().match(/[imsuy]*$/)[0];H.pattern=RegExp(H.pattern.source,ie+"g")}for(var re=H.pattern||H,X=k.next,ne=I;X!==E.tail&&!(j&&ne>=j.reach);ne+=X.value.length,X=X.next){var q=X.value;if(E.length>_.length)return;if(!(q instanceof l)){var J=1,Q;if(U){if(Q=u(re,ne,_,K),!Q||Q.index>=_.length)break;var Ie=Q.index,te=Q.index+Q[0].length,ue=ne;for(ue+=X.value.length;Ie>=ue;)X=X.next,ue+=X.value.length;if(ue-=X.value.length,ne=ue,X.value instanceof l)continue;for(var ge=X;ge!==E.tail&&(ue<te||typeof ge.value=="string");ge=ge.next)J++,ue+=ge.value.length;J--,q=_.slice(ne,ue),Q.index-=ne}else if(Q=u(re,0,q,K),!Q)continue;var Ie=Q.index,Ae=Q[0],_e=q.slice(0,Ie),ve=q.slice(Ie+Ae.length),Be=ne+q.length;j&&Be>j.reach&&(j.reach=Be);var nt=X.prev;_e&&(nt=m(E,nt,_e),ne+=_e.length),g(E,nt,J);var Ve=new l(N,M?o.tokenize(Ae,M):Ae,se,Ae);if(X=m(E,nt,Ve),ve&&m(E,X,ve),J>1){var De={cause:N+","+L,reach:Be};d(_,E,C,X.prev,ne,De),j&&De.reach>j.reach&&(j.reach=De.reach)}}}}}}function h(){var _={value:null,prev:null,next:null},E={value:null,prev:_,next:null};_.next=E,this.head=_,this.tail=E,this.length=0}function m(_,E,C){var k=E.next,I={value:C,prev:E,next:k};return E.next=I,k.prev=I,_.length++,I}function g(_,E,C){for(var k=E.next,I=0;I<C&&k!==_.tail;I++)k=k.next;E.next=k,k.prev=E,_.length-=I}function v(_){for(var E=[],C=_.head.next;C!==_.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(_){var E=JSON.parse(_.data),C=E.language,k=E.code,I=E.immediateClose;r.postMessage(o.highlight(k,o.languages[C],C)),I&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function w(){o.manual||o.highlightAll()}if(!o.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",w):window.requestAnimationFrame?window.requestAnimationFrame(w):window.setTimeout(w,16)}return o}(t);e.exports&&(e.exports=n),typeof ef<"u"&&(ef.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,w){return" Error "+b+" while fetching file: "+w},i=" Error: File does not exist or is empty",s={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",h="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function m(b,w,x){var _=new XMLHttpRequest;_.open("GET",b,!0),_.onreadystatechange=function(){_.readyState==4&&(_.status<400&&_.responseText?w(_.responseText):_.status>=400?x(a(_.status,_.statusText)):x(i))},_.send(null)}function g(b){var w=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(w){var x=Number(w[1]),_=w[2],E=w[3];return _?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var w=b.element;if(w.matches(h)){b.code="",w.setAttribute(o,l);var x=w.appendChild(document.createElement("CODE"));x.textContent=r;var _=w.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(_)||[,"none"])[1];E=s[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(w,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),m(_,function(I){w.setAttribute(o,u);var j=g(w.getAttribute("data-range"));if(j){var N=I.split(/\r\n?|\n/g),P=j[0],L=j[1]==null?N.length:j[1];P<0&&(P+=N.length),P=Math.max(0,Math.min(P-1,N.length)),L<0&&(L+=N.length),L=Math.max(0,Math.min(L,N.length)),I=N.slice(P,L).join(`
`),w.hasAttribute("data-start")||w.setAttribute("data-start",String(P+1))}x.textContent=I,n.highlightElement(x)},function(I){w.setAttribute(o,d),x.textContent=I})}}),n.plugins.fileHighlight={highlight:function(w){for(var x=(w||document).querySelectorAll(h),_=0,E;E=x[_++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(cE)),cE.exports}var vae=bae();const wae=vi(vae);var C6={},T6;function xae(){return T6||(T6=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),C6}xae();var k6={},A6;function _ae(){return A6||(A6=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),k6}_ae();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,s=0;s<a.length;s++)i[a[s]]=e.languages.bash[a[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,v=m.length;g<v;g++){var b=m[g];if(b.type!=="code"){h(b.content);continue}var w=b.content[1],x=b.content[3];if(w&&x&&w.type==="code-language"&&x.type==="code-block"&&typeof w.content=="string"){var _=w.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");_=(/[a-z][\w-]*/i.exec(_)||[""])[0].toLowerCase();var E="language-"+_;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",m=0,g=d.classes.length;m<g;m++){var v=d.classes[m],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var w=e.languages[h];if(w)d.content=e.highlight(u(d.content),w,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var _=document.getElementById(x);_&&(_.innerHTML=e.highlight(_.textContent,e.languages[h],h))})}}});var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var h=d.replace(s,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),l(v)}else{var b=o[g];return b||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(o,l){l=(l||"").replace(/m/g,"")+"m";var u=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(u,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(i),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var N6={},R6;function Sae(){return R6||(R6=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),N6}Sae();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const Eae=({lang:e,code:t,isStreaming:n=!1})=>{const{foldStreamingCodeBlocks:r}=rr(sn(v=>({prismThemeUrl:v.prismThemeUrl,theme:v.theme,foldStreamingCodeBlocks:v.foldStreamingCodeBlocks}))),[a,i]=T.useState(!1),[s,o]=T.useState(n?r:!1),l=T.useRef(null),u=T.useCallback(()=>{if(l.current&&t)try{l.current.style.whiteSpace!=="pre-wrap"&&(l.current.style.whiteSpace="pre-wrap"),l.current.textContent=t,wae.highlightElement(l.current)}catch(v){console.error("Prism highlight error:",v),l.current.textContent=t}else l.current&&(l.current.textContent="")},[t]);T.useEffect(()=>{s||u()},[t,e,s,u]);const d=async()=>{try{await navigator.clipboard.writeText(t),i(!0),qe.success("Code copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(v){qe.error("Failed to copy code."),console.error("Clipboard copy failed:",v)}},h=()=>{const v=s;o(b=>!b),v&&setTimeout(u,0)},m=e?`language-${e}`:"language-plaintext",g=T.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":s?"Unfold code":"Fold code",children:p.jsx(m1,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:s?"Unfold":"Fold"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:d,"aria-label":"Copy code",children:a?p.jsx(Ga,{className:"h-3.5 w-3.5 text-green-500"}):p.jsx(gp,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:"Copy"})]})})]})]}),p.jsx("div",{})]}),!s&&p.jsx("div",{className:"overflow-hidden w-full",children:p.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:p.jsx("code",{ref:l,className:m+" block"})})}),s&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:h,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:g})})]})},qu=T.memo(Eae);var lt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(lt||(lt={}));const I6={[lt.EPERM]:"Operation not permitted",[lt.ENOENT]:"No such file or directory",[lt.EINTR]:"Interrupted system call",[lt.EIO]:"Input/output error",[lt.ENXIO]:"No such device or address",[lt.EBADF]:"Bad file descriptor",[lt.EAGAIN]:"Resource temporarily unavailable",[lt.ENOMEM]:"Cannot allocate memory",[lt.EACCES]:"Permission denied",[lt.EFAULT]:"Bad address",[lt.ENOTBLK]:"Block device required",[lt.EBUSY]:"Resource busy or locked",[lt.EEXIST]:"File exists",[lt.EXDEV]:"Invalid cross-device link",[lt.ENODEV]:"No such device",[lt.ENOTDIR]:"File is not a directory",[lt.EISDIR]:"File is a directory",[lt.EINVAL]:"Invalid argument",[lt.ENFILE]:"Too many open files in system",[lt.EMFILE]:"Too many open files",[lt.ETXTBSY]:"Text file busy",[lt.EFBIG]:"File is too big",[lt.ENOSPC]:"No space left on disk",[lt.ESPIPE]:"Illegal seek",[lt.EROFS]:"Cannot modify a read-only file system",[lt.EMLINK]:"Too many links",[lt.EPIPE]:"Broken pipe",[lt.EDOM]:"Numerical argument out of domain",[lt.ERANGE]:"Numerical result out of range",[lt.EDEADLK]:"Resource deadlock would occur",[lt.ENAMETOOLONG]:"File name too long",[lt.ENOLCK]:"No locks available",[lt.ENOSYS]:"Function not implemented",[lt.ENOTEMPTY]:"Directory is not empty",[lt.ELOOP]:"Too many levels of symbolic links",[lt.ENOMSG]:"No message of desired type",[lt.EBADE]:"Invalid exchange",[lt.EBADR]:"Invalid request descriptor",[lt.EXFULL]:"Exchange full",[lt.ENOANO]:"No anode",[lt.EBADRQC]:"Invalid request code",[lt.ENOSTR]:"Device not a stream",[lt.ENODATA]:"No data available",[lt.ETIME]:"Timer expired",[lt.ENOSR]:"Out of streams resources",[lt.ENONET]:"Machine is not on the network",[lt.EREMOTE]:"Object is remote",[lt.ENOLINK]:"Link has been severed",[lt.ECOMM]:"Communication error on send",[lt.EPROTO]:"Protocol error",[lt.EBADMSG]:"Bad message",[lt.EOVERFLOW]:"Value too large for defined data type",[lt.EBADFD]:"File descriptor in bad state",[lt.ESTRPIPE]:"Streams pipe error",[lt.ENOTSOCK]:"Socket operation on non-socket",[lt.EDESTADDRREQ]:"Destination address required",[lt.EMSGSIZE]:"Message too long",[lt.EPROTOTYPE]:"Protocol wrong type for socket",[lt.ENOPROTOOPT]:"Protocol not available",[lt.EPROTONOSUPPORT]:"Protocol not supported",[lt.ESOCKTNOSUPPORT]:"Socket type not supported",[lt.ENOTSUP]:"Operation is not supported",[lt.ENETDOWN]:"Network is down",[lt.ENETUNREACH]:"Network is unreachable",[lt.ENETRESET]:"Network dropped connection on reset",[lt.ETIMEDOUT]:"Connection timed out",[lt.ECONNREFUSED]:"Connection refused",[lt.EHOSTDOWN]:"Host is down",[lt.EHOSTUNREACH]:"No route to host",[lt.EALREADY]:"Operation already in progress",[lt.EINPROGRESS]:"Operation now in progress",[lt.ESTALE]:"Stale file handle",[lt.EREMOTEIO]:"Remote I/O error",[lt.EDQUOT]:"Disk quota exceeded"};class ze extends Error{static fromJSON(t){const n=new ze(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new ze(lt[t],I6[lt[t]],n,r)}constructor(t,n=I6[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=lt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var uE={exports:{}},j6;function Cae(){return j6||(j6=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,h||l,m),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,v=new Array(g);m<g;m++)v[m]=h[m].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,m,g,v){var b=n?n+u:u;if(!this._events[b])return!1;var w=this._events[b],x=arguments.length,_,E;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),x){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,h),!0;case 4:return w.fn.call(w.context,d,h,m),!0;case 5:return w.fn.call(w.context,d,h,m,g),!0;case 6:return w.fn.call(w.context,d,h,m,g,v),!0}for(E=1,_=new Array(x-1);E<x;E++)_[E-1]=arguments[E];w.fn.apply(w.context,_)}else{var C=w.length,k;for(E=0;E<C;E++)switch(w[E].once&&this.removeListener(u,w[E].fn,void 0,!0),x){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,d);break;case 3:w[E].fn.call(w[E].context,d,h);break;case 4:w[E].fn.call(w[E].context,d,h,m);break;default:if(!_)for(k=1,_=new Array(x-1);k<x;k++)_[k-1]=arguments[k];w[E].fn.apply(w[E].context,_)}}return!0},o.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,m){var g=n?n+u:u;if(!this._events[g])return this;if(!d)return s(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&s(this,g);else{for(var b=0,w=[],x=v.length;b<x;b++)(v[b].fn!==d||m&&!v[b].once||h&&v[b].context!==h)&&w.push(v[b]);w.length?this._events[g]=w.length===1?w[0]:w:s(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(uE)),uE.exports}var Tae=Cae();const BA=vi(Tae);var m8;let kae=class extends BA{constructor(n){super();va(this,m8,"List");va(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),s=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),s}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(m8=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function D6(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function wr(e){throw e}const M6=Intl.NumberFormat("en",{notation:"compact"});M6.format.bind(M6);function Df(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function Aae(e){try{return JSON.parse(e),!0}catch{return!1}}function JT(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function $A(e){return e.at(0).toUpperCase()+e.slice(1)}const Nae=new TextEncoder;function Jd(e){return Nae.encode(e)}const O6=new TextDecoder;function zA(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return O6.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),O6.decode(t)}function k0(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=k0(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function Rae(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Iae={};let jae="process"in globalThis&&"env"in globalThis.process&&Iae.U_DEBUG=="true";function A0(...e){jae&&console.debug("[U]",...e)}const P6=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],Dae=[...P6,...P6.map(e=>$A(e)),"char"],UA=/^(u?int|float)(8|16|32|64|128)$/i;function CL(e){return e=="char"?"uint8":e.toLowerCase()}function VA(e){return UA.test(e.toString())}function QT(e){return e=="char"||UA.test(e.toString().toLowerCase())}function Mae(e){if(!QT(e))throw new TypeError("Not a valid primitive type: "+e)}const F6=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function TL(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function Oae(e){return e!=null&&typeof e=="object"&&"struct"in e}function B1(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function wo(e){return typeof e=="function"&&Symbol.metadata in e&&Oae(e[Symbol.metadata])}function Ty(e){return e!=null&&typeof e=="object"&&wo(e.constructor)}function kL(e){if(!Ty(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function HA(e){return Ty(e)||wo(e)}function AL(e){if(!HA(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function qA(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Hr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Hr(e[i]);return a}if(typeof e=="string")return Mae(e),+CL(e).match(UA)[2]/8;if(qA(e))return e[Symbol.size];AL(e);const t=wo(e)?e:e.constructor;B1(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(wo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(Ty(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Hr(i)):r+=Hr(i);continue}if(typeof a.length!="string")continue;let s=0;for(let o=0;o<e[a.length];o++)s+=Hr(HA(i[o])?i[o]:a.type);n.isUnion?r=Math.max(r,s):r+=s}return r}function Pae(e,t){var i;AL(e);const n=wo(e)?e:e.constructor;B1(n);const{struct:r}=n[Symbol.metadata];if(wo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??wr(new Error("Struct does not have member: "+t));let a=0;for(const s of r.members.values()){if(s.name==t)return a;const o=e[s.name];a+=Hr(HA(o)?o:s.type)}throw new Error("Struct does not have member: "+t)}function Fae(e,t){return Math.ceil(e/t)*t}function Mf(e={}){return function(n,r){const a=new Map;let i=0,s=!1;for(const{name:o,type:l,length:u}of TL(r)){if(!QT(l)&&!wo(l))throw new TypeError("Not a valid type: "+l);if(typeof u=="string"){const m=a.get(u);if(!m)throw new Error(`"${u}" is undefined or declared after "${o}"`);if(!VA(m.type))throw new Error(`"${u}" is not a number and cannot be used to count "${o}"`)}let d=`${typeof l=="string"?l:l.name} ${o}`;u!==void 0&&(d+=`[${u}]`),a.set(o,{name:o,staticOffset:e.isUnion?0:i,type:QT(l)?CL(l):l,length:u,decl:d});const h=typeof u=="string"||wo(l)&&l[Symbol.metadata].struct.isDynamic?0:Hr(l)*(u||1);s||(s=wo(l)?l[Symbol.metadata].struct.isDynamic:typeof u=="string"),i=e.isUnion?Math.max(i,h):i+h,i=Fae(i,e.align||1),A0("define",n.name+"."+o)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:s,isUnion:e.isUnion??!1},n}}function N0(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return TL(r).push({name:a,type:e,length:t}),n}}function NL(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:wr(new Error("Array lengths must be natural numbers"))}function ti(e){if(qA(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();kL(e),B1(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Hr(e),a=new Uint8Array(r),i=new DataView(a.buffer);A0("serialize",e.constructor.name);let s=0,o=0;for(const l of n.values()){const u=NL(e,l);A0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),s=o,o+=Ty(h)?Hr(h):Hr(l.type),!VA(l.type)){a.set(h?ti(h):new Uint8Array(Hr(l.type)),s);continue}const m=`set${$A(l.type)}`;if(m=="setInt64"){i.setBigInt64(s,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(s,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(s+(t.bigEndian?8:0),h&F6,!t.bigEndian),i.setBigInt64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(s+(t.bigEndian?8:0),h&F6,!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(s+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](s,Number(h),!t.bigEndian)}}return a}function $1(e,t){const n=Rae(t);if(qA(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);kL(e),B1(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);A0("deserialize",e.constructor.name);let s=0,o=0;for(const l of a.values()){const u=NL(e,l);A0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name]:e;const m=u!=-1?d:l.name,g=h[m]===null||h[m]===void 0,v=g&&wo(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(s=o,!Ty(h[m])&&!v&&(o+=Hr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(s))+e[l.name].slice(d+1);continue}if(!VA(l.type)){if(v&&wo(l.type))h[m]??(h[m]=new l.type);else if(g)continue;$1(h[m],new Uint8Array(n.subarray(s))),o+=Hr(h[m]);continue}u&&u!=-1&&(h||(h=[]));const b=`get${$A(l.type)}`;if(b=="getInt64"){h[m]=i.getBigInt64(s,!r.bigEndian);continue}if(b=="getUint64"){h[m]=i.getBigUint64(s,!r.bigEndian);continue}if(b=="getInt128"){h[m]=i.getBigInt64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[m]=i.getBigUint64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[m]=i.getFloat64(s+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[b](s,!r.bigEndian)}}}function Lae(e){function t(n,r){return typeof n=="number"||typeof n=="string"?N0(e,n):N0(e)(n,r)}return t}const xn=Object.fromEntries(Dae.map(e=>[e,Lae(e)]));function Bae(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Ro={root:"/",pwd:"/",credentials:Bae({uid:0,gid:0}),descriptors:new Map};function RL(e,t){let n="",r=0,a=-1,i=0,s="\0";for(let o=0;o<=e.length;++o){if(o<e.length)s=e[o];else{if(s=="/")break;s="/"}if(s=="/"){if(!(a===o-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}else if(n.length!==0){n="",r=0,a=o,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else s==="."&&i!==-1?++i:i=-1}return n}function Sc(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Ro.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=RL(n,!r),r?`/${n}`:n.length?n:"/"}function $ae(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=RL(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function hr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?$ae(t):"."}function IL(e,t){if(e===t||(e=Sc.call(this,e),t=Sc.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,s=t.length-i,o=a<s?a:s;let l=-1,u=0;for(;u<o;u++){const h=e[n+u];if(h!==t[i+u])break;h==="/"&&(l=u)}if(u===o)if(s>o){if(t[i+u]==="/")return t.slice(i+u+1);if(u===0)return t.slice(i+u)}else a>o&&(e[n+u]==="/"?l=u:u===0&&(l=0));let d="";for(u=n+l+1;u<=r;++u)(u===r||e[u]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function or(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Ep(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function el(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,s=-1,o=!0,l=e.length-1,u=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){i=l+1;break}continue}s===-1&&(o=!1,s=l+1),e[l]==="."?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}if(s!==-1){const d=i===0&&t?1:i;a===-1||u===0||u===1&&a===s-1&&a===i+1?n.base=n.name=e.slice(d,s):(n.name=e.slice(d,a),n.base=e.slice(d,s),n.ext=e.slice(a,s))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(vn||(vn={}));vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";const zae=new kae;function Uae(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};zae.add(n),Yae(n)}function Vae(e,t){var n,r;if(!(e instanceof ze))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+hr(i,e.path)}function sd(e){return function(t,n={}){return Uae(e,Vae(t,n)),t}}sd(vn.EMERG);const Hae=sd(vn.ALERT),z1=sd(vn.CRIT),Gi=sd(vn.ERR),pi=sd(vn.WARN),GA=sd(vn.NOTICE),jL=sd(vn.INFO),Zg=sd(vn.DEBUG);function qae(e,t){return`\x1B[${t}m${e}\x1B[0m`}function Gae(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[qae(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";let Wae=e=>[...Gae(e),e.message];function Kae(e){const t=Wae(e);return typeof t=="string"?[t]:Array.from(t)}let Zae=console.error;function Yae(e){e.level>Xae||Zae(...Kae(e))}let Xae=vn.ALERT;function WA(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function Jae(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function Qae(e,t){if(typeof t!="object"||t===null)throw Gi(new ze(lt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){Zg("Using default for option: "+n);continue}throw Gi(new ze(lt.EINVAL,"Missing required option: "+n))}const i=(u,d=a)=>{var h;return typeof u=="function"?Symbol.hasInstance in u&&u.prototype?a instanceof u:u(a):typeof a===u||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===u};if(Array.isArray(r.type)?r.type.some(u=>i(u)):i(r.type))continue;const s=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,o=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw Gi(new ze(lt.EINVAL,`Incorrect type for "${n}": ${s} (expected ${l})`))}}function DL(e){return e!=null&&typeof e=="object"&&"backend"in e&&WA(e.backend)}const KA=0,Ra=4,aa=2,Fw=1,ZA=1,eie=2,tie=4,ML=0,fi=1,lc=2,U1=64,V1=128,nie=256,H1=512,xf=1024,rie=65536,aie=262144,iie=131072,q1=1052672,sie=4096,oie=32768,lie=16384,cie=2048,Ar=61440,Of=49152,Ic=40960,xo=32768,Pf=24576,xa=16384,Ff=8192,Lf=4096,ky=2048,Ay=1024,uie=512,die=448,OL=256,PL=128,FL=64,fie=56,LL=32,BL=16,$L=8,hie=7,zL=4,UL=2,VL=1,pie=0,Mi=4294967295,HL=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:ZA,COPYFILE_FICLONE:eie,COPYFILE_FICLONE_FORCE:tie,F_OK:KA,O_APPEND:xf,O_CREAT:U1,O_DIRECT:lie,O_DIRECTORY:rie,O_DSYNC:sie,O_EXCL:V1,O_NOATIME:aie,O_NOCTTY:nie,O_NOFOLLOW:iie,O_NONBLOCK:cie,O_RDONLY:ML,O_RDWR:lc,O_SYMLINK:oie,O_SYNC:q1,O_TRUNC:H1,O_WRONLY:fi,R_OK:Ra,S_IFBLK:Pf,S_IFCHR:Ff,S_IFDIR:xa,S_IFIFO:Lf,S_IFLNK:Ic,S_IFMT:Ar,S_IFREG:xo,S_IFSOCK:Of,S_IRGRP:LL,S_IROTH:zL,S_IRUSR:OL,S_IRWXG:fie,S_IRWXO:hie,S_IRWXU:die,S_ISGID:Ay,S_ISUID:ky,S_ISVTX:uie,S_IWGRP:BL,S_IWOTH:UL,S_IWUSR:PL,S_IXGRP:$L,S_IXOTH:VL,S_IXUSR:FL,UV_FS_O_FILEMAP:pie,W_OK:aa,X_OK:Fw,size_max:Mi},Symbol.toStringTag,{value:"Module"})),aw=BigInt(1e3);class qL{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:s,size:o,mode:l,ino:u,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(s??0),this.size=this._convert(o??0),this.ino=this._convert(u??0),this.mode=this._convert(l??420&xo),(this.mode&Ar)==0&&(this.mode=this.mode|this._convert(xo)),Object.assign(this,d)}isFile(){return(this.mode&Ar)===xo}isDirectory(){return(this.mode&Ar)===xa}isSymbolicLink(){return(this.mode&Ar)===Ic}isSocket(){return(this.mode&Ar)===Of}isBlockDevice(){return(this.mode&Ar)===Pf}isCharacterDevice(){return(this.mode&Ar)===Ff}isFIFO(){return(this.mode&Ar)===Lf}toJSON(){return Df(this,ek)}hasAccess(t,n){return gr(n,this._isBigint?new jc(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*aw}get mtimeNs(){return BigInt(this.mtimeMs)*aw}get ctimeNs(){return BigInt(this.ctimeMs)*aw}get birthtimeNs(){return BigInt(this.birthtimeMs)*aw}}function GL(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<Mi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<Mi?e.gid=n:r=!1,r}class jc extends qL{constructor(){super(...arguments),this._isBigint=!1}}class Bf extends qL{constructor(){super(...arguments),this._isBigint=!0}}function mie(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class gie{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Mi,this.ffree=Mi}}class yie{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(Mi),this.ffree=BigInt(Mi)}}var Pr=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},bn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},YA=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const hs=0,bie=1024;let L6=(()=>{var e,t;let n=[Mf()],r,a=[],i,s,o=[],l=[],u,d=[],h=[],m,g=[],v=[],b,w=[],x=[];return i=class{get key(){return this._key}set key(_){this._key=_,this.keySize=_.length}get value(){return this._value.subarray(0,this.valueSize)}set value(_){this._value=_,this.valueSize=_.length}constructor(_,E){this.keySize=bn(this,o,0),this.valueSize=(bn(this,l),bn(this,d,0)),this._key=(bn(this,h),bn(this,g,"")),this._value=(bn(this,v),bn(this,w,new Uint8Array(bie))),bn(this,x),_&&(this.key=_),E&&(this.value=E)}},YA(i,"Attribute"),(()=>{const _=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=xn).uint32.bind(e)],u=[(t=xn).uint32.bind(t)],m=[xn.char("keySize")],b=[xn.uint8("valueSize")],Pr(null,null,s,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:_},o,l),Pr(null,null,u,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:_},d,h),Pr(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:_},g,v),Pr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:_},w,x),Pr(null,r={value:i},n,{kind:"class",name:i.name,metadata:_},null,a),i=r.value,_&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_}),bn(i,a)})(),i})(),Gu=(()=>{var e;let t=[Mf()],n,r=[],a,i,s=[],o=[],l,u=[],d=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new L6(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=bn(this,s,0),this.data=(bn(this,o),bn(this,u,[])),bn(this,d)}},YA(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=xn).uint32.bind(e)],l=[N0(L6,"size")],Pr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},s,o),Pr(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},u,d),Pr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),bn(a,r)})(),a})();const ek=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],vie=4;var Wi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Wi||(Wi={}));let wa=(()=>{var e,t,n,r,a,i,s,o,l,u,d,h,m,g,v,b;let w=[Mf()],x,_=[],E,C,k=[],I=[],j,N=[],P=[],L,H=[],M=[],K,U=[],se=[],ie,re=[],X=[],ne,q=[],J=[],Q,te=[],ue=[],ge,Ie=[],Ae=[],_e,ve=[],Be=[],nt,Ve=[],De=[],$,Ee=[],Te=[],fe,oe=[],ee=[],Se,Pe=[],ke=[],We,Nt=[],it=[],Et,Ft=[],Mt=[],Yt,be=[],D=[],W,he=[],je=[],we,Ne=[],ce=[];var ft=E=class{constructor(vt){if(this.data=bn(this,k,JT(0,Mi)),this.__data_old=(bn(this,I),bn(this,N,0)),this.size=(bn(this,P),bn(this,H,0)),this.mode=(bn(this,M),bn(this,U,0)),this.nlink=(bn(this,se),bn(this,re,1)),this.uid=(bn(this,X),bn(this,q,0)),this.gid=(bn(this,J),bn(this,te,0)),this.atimeMs=(bn(this,ue),bn(this,Ie,Date.now())),this.birthtimeMs=(bn(this,Ae),bn(this,ve,Date.now())),this.mtimeMs=(bn(this,Be),bn(this,Ve,Date.now())),this.ctimeMs=(bn(this,De),bn(this,Ee,Date.now())),this.ino=(bn(this,Te),bn(this,oe,JT(0,Mi))),this.__ino_old=(bn(this,ee),bn(this,Pe,0)),this.flags=(bn(this,ke),bn(this,Nt,0)),this.__after_flags=(bn(this,it),bn(this,Ft,0)),this.version=(bn(this,Mt),bn(this,be,0)),this.__padding=(bn(this,D),bn(this,he,[])),this.attributes=(bn(this,je),bn(this,Ne,new Gu)),bn(this,ce),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<Hr(ft))throw z1(new ze(lt.EIO,"Buffer is too small to create an inode"));$1(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Df(this,ek),attributes:this.attributes}}toStats(){return new jc(this)}update(vt){if(!vt)return!1;let F=!1;for(const Le of ek)vt[Le]!==void 0&&(Le=="ino"||Le=="data"||this[Le]!==vt[Le]&&(Le=="atimeMs"&&this.flags&Wi.NoAtime||(this[Le]=vt[Le],F=!0)));return vt.attributes&&(this.attributes=vt.attributes,F=!0),F&&(this.ctimeMs=Date.now()),F}};return YA(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=xn).uint32.bind(e)],j=[(t=xn).uint32.bind(t)],L=[(n=xn).uint32.bind(n)],K=[(r=xn).uint16.bind(r)],ie=[(a=xn).uint32.bind(a)],ne=[(i=xn).uint32.bind(i)],Q=[(s=xn).uint32.bind(s)],ge=[(o=xn).float64.bind(o)],_e=[(l=xn).float64.bind(l)],nt=[(u=xn).float64.bind(u)],$=[(d=xn).float64.bind(d)],fe=[(h=xn).uint32.bind(h)],Se=[(m=xn).uint32.bind(m)],We=[(g=xn).uint32.bind(g)],Et=[(v=xn).uint16.bind(v)],Yt=[(b=xn).uint32.bind(b)],W=[xn.uint8(48)],we=[N0(Gu)],Pr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:F=>"data"in F,get:F=>F.data,set:(F,Le)=>{F.data=Le}},metadata:vt},k,I),Pr(null,null,j,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:F=>"__data_old"in F,get:F=>F.__data_old,set:(F,Le)=>{F.__data_old=Le}},metadata:vt},N,P),Pr(null,null,L,{kind:"field",name:"size",static:!1,private:!1,access:{has:F=>"size"in F,get:F=>F.size,set:(F,Le)=>{F.size=Le}},metadata:vt},H,M),Pr(null,null,K,{kind:"field",name:"mode",static:!1,private:!1,access:{has:F=>"mode"in F,get:F=>F.mode,set:(F,Le)=>{F.mode=Le}},metadata:vt},U,se),Pr(null,null,ie,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:F=>"nlink"in F,get:F=>F.nlink,set:(F,Le)=>{F.nlink=Le}},metadata:vt},re,X),Pr(null,null,ne,{kind:"field",name:"uid",static:!1,private:!1,access:{has:F=>"uid"in F,get:F=>F.uid,set:(F,Le)=>{F.uid=Le}},metadata:vt},q,J),Pr(null,null,Q,{kind:"field",name:"gid",static:!1,private:!1,access:{has:F=>"gid"in F,get:F=>F.gid,set:(F,Le)=>{F.gid=Le}},metadata:vt},te,ue),Pr(null,null,ge,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:F=>"atimeMs"in F,get:F=>F.atimeMs,set:(F,Le)=>{F.atimeMs=Le}},metadata:vt},Ie,Ae),Pr(null,null,_e,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:F=>"birthtimeMs"in F,get:F=>F.birthtimeMs,set:(F,Le)=>{F.birthtimeMs=Le}},metadata:vt},ve,Be),Pr(null,null,nt,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:F=>"mtimeMs"in F,get:F=>F.mtimeMs,set:(F,Le)=>{F.mtimeMs=Le}},metadata:vt},Ve,De),Pr(null,null,$,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:F=>"ctimeMs"in F,get:F=>F.ctimeMs,set:(F,Le)=>{F.ctimeMs=Le}},metadata:vt},Ee,Te),Pr(null,null,fe,{kind:"field",name:"ino",static:!1,private:!1,access:{has:F=>"ino"in F,get:F=>F.ino,set:(F,Le)=>{F.ino=Le}},metadata:vt},oe,ee),Pr(null,null,Se,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:F=>"__ino_old"in F,get:F=>F.__ino_old,set:(F,Le)=>{F.__ino_old=Le}},metadata:vt},Pe,ke),Pr(null,null,We,{kind:"field",name:"flags",static:!1,private:!1,access:{has:F=>"flags"in F,get:F=>F.flags,set:(F,Le)=>{F.flags=Le}},metadata:vt},Nt,it),Pr(null,null,Et,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:F=>"__after_flags"in F,get:F=>F.__after_flags,set:(F,Le)=>{F.__after_flags=Le}},metadata:vt},Ft,Mt),Pr(null,null,Yt,{kind:"field",name:"version",static:!1,private:!1,access:{has:F=>"version"in F,get:F=>F.version,set:(F,Le)=>{F.version=Le}},metadata:vt},be,D),Pr(null,null,W,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:F=>"__padding"in F,get:F=>F.__padding,set:(F,Le)=>{F.__padding=Le}},metadata:vt},he,je),Pr(null,null,we,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:F=>"attributes"in F,get:F=>F.attributes,set:(F,Le)=>{F.attributes=Le}},metadata:vt},Ne,ce),Pr(null,x={value:E},w,{kind:"class",name:E.name,metadata:vt},null,_),ft=E=x.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),bn(E,_)})(),ft=E})();function wie(e){return(e.mode&Ar)===xo}function ko(e){return(e.mode&Ar)===xa}function Cp(e){return(e.mode&Ar)===Ic}function xie(e){return(e.mode&Ar)===Of}function R0(e){return(e.mode&Ar)===Pf}function I0(e){return(e.mode&Ar)===Ff}function _ie(e){return(e.mode&Ar)===Lf}function gr(e,t,n){const r=(e==null?void 0:e.credentials)||Ro.credentials;if(Cp(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&OL&&(a|=Ra),t.mode&PL&&(a|=aa),t.mode&FL&&(a|=Fw)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&LL&&(a|=Ra),t.mode&BL&&(a|=aa),t.mode&$L&&(a|=Fw)),t.mode&zL&&(a|=Ra),t.mode&UL&&(a|=aa),t.mode&VL&&(a|=Fw),(a&n)===n}const B6=1;class Tx extends Map{constructor(){super(...arguments),this.maxSize=Mi}toJSON(){return{version:B6,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Hr(wa);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw ze.With("ENOENT",t);if((n.mode&Ar)!=xa)throw ze.With("ENOTDIR",t);const r={};for(const a of this.keys())or(a)==t&&a!=t&&(r[Ep(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&Ar)!=xa)continue;const a={};for(const i of this.keys())or(i)==n&&i!=n&&(a[Ep(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=B6)throw new ze(lt.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=JT(1,Mi)),r=="/"&&(a.ino=0),this.set(r,new wa(a));return this}static parse(t){if(!Aae(t))throw new ze(lt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Tx;return r.fromJSON(n),r}}const dE=4096;let XA=class tk{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===tk.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===tk.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:s=a}=n;for(let o=i;o<s;o+=dE){const l=o+dE>s?s-o:dE,u=new Uint8Array(l);await this.read(t,u,o,o+l).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,s)=>{let o=!1;const l=d=>{o=!0,s.error(d)},{size:u}=await this.stat(t);await this.write(t,i,a).catch(l),!o&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(u,a)}).catch(l))}})}};function ki(e){return JSON.parse(zA(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function Ds(e){return Jd(JSON.stringify(e))}function od(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new ze(lt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function kx(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new ze(lt.EINVAL,"Invalid time.")}}function hn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new ze(lt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new ze(lt.EINVAL,"Path can not contain null character");if(e.length==0)throw new ze(lt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Sc(e)}function cc(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:od("mode"in e?e==null?void 0:e.mode:null,r)}}class Sie{constructor(t,n,r,a){va(this,"id");va(this,"_size");va(this,"options");va(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,s)=>i.start-s.start),r.ranges=r.ranges.reduce((i,s)=>(!i.length||i.at(-1).end<s.start?i.push(s):i.at(-1).end=Math.max(i.at(-1).end,s.end),i),[]),r.data=k0(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)){if(s.start>=n)break;r.push({start:Math.max(t,s.start),end:Math.min(n,s.end)})}}r.sort((i,s)=>i.start-s.start);const a=[];for(const i of r){const s=a.at(-1);s&&i.start<=s.end?s.end=Math.max(s.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=k0(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},s=this.regions.findIndex(o=>o.offset>n);return s==-1?this.regions.push(i):this.regions.splice(s,0,i),this.collect(),this}}var fE,hE,pE;(fE=Promise.withResolvers)!==null&&fE!==void 0||(Promise.withResolvers=(pi("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(hE=Symbol.dispose)!==null&&hE!==void 0||(Symbol.dispose=(pi("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(pE=Symbol.asyncDispose)!==null&&pE!==void 0||(Symbol.asyncDispose=(pi("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class WL{constructor(t){this.store=t}}class Eie extends WL{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class nk extends WL{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new Sie(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const s=i.missing(n,r);for(const{start:l,end:u}of s)this.async(this.get(t,l,u));if(s.length)throw Gi(ze.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const o=i.regionAt(n);if(!o){pi("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class Cie{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof nk))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof nk))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Mr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Or=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class KL extends XA{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const s=IL(t,a);if(s.startsWith(".."))continue;let o=hr(n,s);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:a,newKey:o,ino:i})}for(const{oldKey:a,newKey:i,ino:s}of r){this._ids.delete(a),this._ids.set(i,s);const o=this._paths.get(s);if(!o){pi("Missing paths in table for ino "+s);continue}o.delete(a),o.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,Zg(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!0),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),await r.set(s.ino,ti(s)),a.has(i)&&await r.set(s.data,Ds(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!1),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),r.setSync(s.ino,ti(s)),a.has(i)&&r.setSync(s.data,Ds(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Tx,a=Mr(n,this.transaction(),!0),i=[["/",0]],s=D6(ze.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new wa(await a.get(l));if(r.set(o,u),u.mode&xa){const d=ki((t=await a.get(u.data))!==null&&t!==void 0?t:wr(ze.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([hr(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Tx,a=Mr(n,this.transaction(),!1),i=[["/",0]],s=D6(ze.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new wa(a.getSync(l));if(r.set(o,u),u.mode&xa){const d=ki((t=a.getSync(u.data))!==null&&t!==void 0?t:wr(ze.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([hr(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async rename(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!0),l=el(t),u=el(n),d=await this.findInode(o,l.dir,"rename"),h=ki((r=await o.get(d.data))!==null&&r!==void 0?r:wr(ze.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw ze.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Gi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new ze(lt.EBUSY,l.dir);const g=u.dir==l.dir,v=g?d:await this.findInode(o,u.dir,"rename"),b=g?h:ki((a=await o.get(v.data))!==null&&a!==void 0?a:wr(ze.With("ENODATA",u.dir,"rename")));if(b[u.base]){const w=new wa((i=await o.get(b[u.base]))!==null&&i!==void 0?i:wr(ze.With("ENOENT",n,"rename")));if(!w.toStats().isFile())throw ze.With("EPERM",n,"rename");await o.remove(w.data),await o.remove(b[u.base])}b[u.base]=m,await o.set(d.data,Ds(h)),await o.set(v.data,Ds(b)),await o.commit(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}renameSync(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!1),l=el(t),u=el(n),d=this.findInodeSync(o,l.dir,"rename"),h=ki((r=o.getSync(d.data))!==null&&r!==void 0?r:wr(ze.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw ze.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Gi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new ze(lt.EBUSY,l.dir);const g=u.dir===l.dir,v=g?d:this.findInodeSync(o,u.dir,"rename"),b=g?h:ki((a=o.getSync(v.data))!==null&&a!==void 0?a:wr(ze.With("ENODATA",u.dir,"rename")));if(b[u.base]){const w=new wa((i=o.getSync(b[u.base]))!==null&&i!==void 0?i:wr(ze.With("ENOENT",n,"rename")));if(!w.toStats().isFile())throw ze.With("EPERM",n,"rename");o.removeSync(w.data),o.removeSync(b[u.base])}b[u.base]=m,o.setSync(d.data,Ds(h)),o.setSync(v.data,Ds(b)),o.commitSync(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,ti(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Or(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,ti(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Or(r)}}async createFile(t,n){return n.mode|=xo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=xo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw ze.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw ze.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=xa,await this.commitNew(t,n,Jd("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=xa,this.commitNewSync(t,n,Jd("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(ki((n=await a.get(i.data))!==null&&n!==void 0?n:wr(ze.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Or(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(ki((n=a.getSync(i.data))!==null&&n!==void 0?n:wr(ze.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Or(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!0),s=await this.findInode(i,t,"sync");n&&await i.set(s.data,n),s.update(r)&&(this._add(s.ino,t),await i.set(s.ino,ti(s))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Or(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!1),s=this.findInodeSync(i,t,"sync");n&&i.setSync(s.data,n),s.update(r)&&(this._add(s.ino,t),i.setSync(s.ino,ti(s))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Or(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!0),s=or(n),o=await this.findInode(i,s,"link"),l=ki((r=await i.get(o.data))!==null&&r!==void 0?r:wr(ze.With("ENOENT",s,"link"))),u=await this.findInode(i,t,"link");u.nlink++,l[Ep(n)]=u.ino,this._add(u.ino,n),await i.set(u.ino,ti(u)),await i.set(o.data,Ds(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Or(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!1),s=or(n),o=this.findInodeSync(i,s,"link"),l=ki((r=i.getSync(o.data))!==null&&r!==void 0?r:wr(ze.With("ENOENT",s,"link"))),u=this.findInodeSync(i,t,"link");u.nlink++,l[Ep(n)]=u.ino,this._add(u.ino,n),i.setSync(u.ino,ti(u)),i.setSync(o.data,Ds(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Or(a)}}async read(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const u=(i=await o.get(l.data,r,a))!==null&&i!==void 0?i:wr(ze.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Gi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}readSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const u=(i=o.getSync(l.data,r,a))!==null&&i!==void 0?i:wr(ze.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Gi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Mr(i,this.transaction(),!0),o=await this.findInode(s,t,"write");let l=n;s.flag("partial")||(l=k0((a=await s.get(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await s.set(o.data,l,r),this._add(o.ino,t),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Or(i);s&&await s}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Mr(i,this.transaction(),!1),o=this.findInodeSync(s,t,"write");let l=n;s.flag("partial")||(l=k0((a=s.getSync(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),s.setSync(o.data,l,r),this._add(o.ino,t),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Or(i)}}transaction(){return new Cie(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Mr(t,this.transaction(),!0);if(await n.get(hs))return;const r=new wa({ino:hs,data:1,mode:511|xa});await n.set(r.data,Jd("{}")),this._add(hs,"/"),await n.set(hs,ti(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Or(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Mr(t,this.transaction(),!1);if(n.getSync(hs))return;const r=new wa({ino:hs,data:1,mode:511|xa});n.setSync(r.data,Jd("{}")),this._add(hs,"/"),n.setSync(hs,ti(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Or(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){pi("Attempted to populate tables after initialization");return}Zg("Populating tables with existing store metadata");const n=Mr(t,this.transaction(),!0),r=await n.get(hs);if(!r){GA("Store does not have a root inode");const o=new wa({ino:hs,data:1,mode:511|xa});await n.set(o.data,Jd("{}")),this._add(hs,"/"),await n.set(hs,ti(o)),await n.commit();return}if(r.length<Hr(wa)){z1("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const s=[["/",hs]];for(;s.length>0;){i++;const[o,l]=s.shift();this._add(l,o);const u=await n.get(l);if(!u){pi("Store is missing data for inode: "+l);continue}if(u.length<Hr(wa)){pi(`Invalid inode size for ino ${l}: ${u.length}`);continue}const d=new wa(u);if((d.mode&xa)!=xa||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){pi("Store is missing directory data: "+d.data);continue}const m=ki(h);for(const[g,v]of Object.entries(m))s.push([hr(o,g),v])}Zg(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Or(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw ze.With("ENOENT",n,r);return new wa((a=await t.get(i))!==null&&a!==void 0?a:wr(ze.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw ze.With("ENOENT",n,r);return new wa((a=t.getSync(i))!==null&&a!==void 0?a:wr(ze.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>Mi)throw Gi(new ze(lt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw ze.With("EEXIST",t,a);const o=Mr(s,this.transaction(),!0),{dir:l,base:u}=el(t),d=await this.findInode(o,l,a),h=ki((i=await o.get(d.data))!==null&&i!==void 0?i:wr(ze.With("ENOENT",l,a)));if(h[u])throw ze.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new wa({...n,ino:m,data:m+1,size:r.byteLength});return await o.set(g.ino,ti(g)),await o.set(g.data,r),h[u]=g.ino,await o.set(d.data,Ds(h)),await o.commit(),g}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}commitNewSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw ze.With("EEXIST",t,a);const o=Mr(s,this.transaction(),!1),{dir:l,base:u}=el(t),d=this.findInodeSync(o,l,a),h=ki((i=o.getSync(d.data))!==null&&i!==void 0?i:wr(ze.With("ENOENT",l,a)));if(h[u])throw ze.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new wa({...n,ino:m,data:m+1,size:r.byteLength});return o.setSync(g.ino,ti(g)),o.setSync(g.data,r),h[u]=g.ino,o.setSync(d.data,Ds(h)),o.commitSync(),g}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Mr(i,this.transaction(),!0),{dir:l,base:u}=el(t),d=await this.findInode(o,l,s),h=ki((r=await o.get(d.data))!==null&&r!==void 0?r:wr(ze.With("ENOENT",l,s)));if(!h[u])throw ze.With("ENOENT",t,s);const m=h[u],g=new wa((a=await o.get(m))!==null&&a!==void 0?a:wr(ze.With("ENOENT",t,s)));if(delete h[u],!n&&ko(g))throw ze.With("EISDIR",t,s);await o.set(d.data,Ds(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await o.set(g.ino,ti(g))):(await o.remove(g.data),await o.remove(m),this._remove(m)),await o.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Or(i);s&&await s}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Mr(i,this.transaction(),!1),{dir:l,base:u}=el(t),d=this.findInodeSync(o,l,s),h=ki((r=o.getSync(d.data))!==null&&r!==void 0?r:wr(ze.With("ENOENT",l,s))),m=h[u];if(!m)throw ze.With("ENOENT",t,s);const g=new wa((a=o.getSync(m))!==null&&a!==void 0?a:wr(ze.With("ENOENT",t,s)));if(delete h[u],!n&&ko(g))throw ze.With("EISDIR",t,s);o.setSync(d.data,Ds(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),o.setSync(g.ino,ti(g))):(o.removeSync(g.data),o.removeSync(m),this._remove(m)),o.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Or(i)}}}class Tie extends Eie{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class kie extends Map{constructor(t=Mi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new Tie(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const Aie={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new KL(new kie(e,t));return n.checkRootSync(),n}},Nie=Aie;let Ia=!0;class $6 extends BA{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let s=this._buffer.indexOf(`
`);s>=0;s=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,s);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(s+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;Ms(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;Ms(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);iw(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);iw(this.output,0),Ms(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,Ms(this.output,-a.length,0),Ms(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;Ms(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(Ms(this.output,-this._cursor,0),Ms(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);iw(this.output,0),Ms(this.output,0,0),this.output.write(this._prompt+r),this.line=r,Ms(this.output,-r.length,0),Ms(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(iw(this.output,0),Ms(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return pi("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return pi("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function Rie(e,t,n,r){return"input"in e?new $6(e.input,e.output,e.completer,e.terminal):new $6(e,t,n,r)}function iw(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function Ms(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Ax{get position(){return this.flag&xf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,s){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=s,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&q1||this.inode.flags&Wi.Sync)}sync(){if(this.closed)throw ze.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw ze.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw ze.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw ze.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw ze.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw ze.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&fi||this.flag&lc))throw new ze(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw ze.With("EBADF",this.path,"write");if(!(this.flag&fi||this.flag&lc))throw new ze(lt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Wi.Immutable)throw new ze(lt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!I0(this.inode)&&!R0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,this.fs.writeSync(this.internalPath,s,a),this._isSync&&this.sync(),s.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw ze.With("EBADF",this.path,"read");if(this.flag&fi)throw new ze(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Wi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!I0(this.inode)&&!R0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw ze.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>Ar?-61441:Ar)|t,(this._isSync||t>Ar)&&this.sync()}chown(t,n){if(this.closed)throw ze.With("EBADF",this.path,"chown");this.dirty=!0,GL(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw ze.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw ze.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw ze.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Wi.Immutable)throw new ze(lt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Nx(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Ro.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function xi(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Ro.descriptors).get(t);if(!a)throw new ze(lt.EBADF);return a}function ZL(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Ro.descriptors).delete(t)}const Iie=/[rwasx]{1,2}\+?/;function uc(e){if(typeof e=="number")return e;if(!Iie.test(e))throw new ze(lt.EINVAL,"Invalid flag string: "+e);return jie(e)}function jie(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new ze(lt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?ML:U1;return e.includes("w")&&(t|=H1),e.includes("a")&&(t|=xf),e.includes("+")?t|=lc:e.includes("r")||(t|=fi),e.includes("s")&&(t|=q1),e.includes("x")&&(t|=V1),t}function YL(e){let t=0;return e&fi||(t|=Ra),(e&fi||e&lc)&&(t|=aa),t}const j0=new Map;JA("/",Nie.create({label:"root"}));function JA(e,t){if(e[0]!="/"&&(e="/"+e),e=Sc.call(this,e),j0.has(e))throw Gi(new ze(lt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,j0.set(e,t),jL(`Mounted ${t.name} on ${e}`),Zg(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function XL(e){if(e[0]!="/"&&(e="/"+e),e=Sc.call(this,e),!j0.has(e)){pi(e+" is already unmounted");return}j0.delete(e),GA("Unmounted "+e)}function Vn(e,t){const n=(t==null?void 0:t.root)||Ro.root;e=hn(hr(n,e));const r=[...j0].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(Mie(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw Hae(new ze(lt.EIO,"No file system",e))}function mE(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function yr(e,t){typeof e.stack=="string"&&(e.stack=mE(e.stack,t));try{e.message=mE(e.message,t)}catch{}return e.path&&(e.path=mE(e.path,t)),e}function JL(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Mi),files:(t?BigInt:Number)(n.totalNodes||Mi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function Die(e){var t,n,r,a,i,s,o;const l=this!==null&&this!==void 0?this:Ro;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new ze(lt.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const u=hr(l.root,e);for(const d of(o=(s=l.descriptors)===null||s===void 0?void 0:s.values())!==null&&o!==void 0?o:[]){if(!d.path.startsWith(l.root))throw ze.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(u.length>l.root.length)throw new ze(lt.EPERM,"Can not chroot() outside of current root");l.root=u}function Mie(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class QL extends BA{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw ze.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw ze.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw ze.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw ze.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw ze.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class e9 extends QL{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?hr(t.root,n):n,Pie(this.realpath,this)}close(){super.emit("close"),Fie(this.realpath,this)}[Symbol.dispose](){this.close()}}class Oie extends QL{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Wu(this.path);mie(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Wu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Nu=new Map;function Pie(e,t){const n=hn(e);Nu.has(n)||Nu.set(n,new Set),Nu.get(n).add(t)}function Fie(e,t){const n=hn(e);Nu.has(n)&&(Nu.get(n).delete(t),Nu.get(n).size===0&&Nu.delete(n))}function ri(e,t,n){var r;e&&(n=hr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=hn(n);for(let a=n;a!="/";a=or(a)){const i=Nu.get(a);if(i)for(const s of i)s.emit("change",t,IL.call(s._context,a,n)||Ep(n))}}var Ny=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ry=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function Lie(e,t){e=hn(e),t=hn(t);const n=Vn(e,this),r=Vn(t,this);if(!Wu.call(this,or(e)).hasAccess(aa,this))throw ze.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),ri(this,"rename",e.toString()),ri(this,"change",t.toString());return}rN.call(this,t,nN(e)),tN.call(this,e),ri(this,"rename",e.toString())}catch(a){throw yr(a,{[n.path]:e,[r.path]:t})}}function QA(e){e=hn(e);try{const{fs:t,path:n}=Vn(ld.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==lt.ENOENT)return!1;throw t}}function Wu(e,t){e=hn(e);const{fs:n,path:r}=Vn(ld.call(this,e),this);try{const a=n.statSync(r);if(Ia&&!gr(this,a,Ra))throw ze.With("EACCES",r,"stat");return t!=null&&t.bigint?new Bf(a):new jc(a)}catch(a){throw yr(a,{[r]:e})}}function eN(e,t){e=hn(e);const{fs:n,path:r}=Vn(e,this);try{const a=n.statSync(r);if(Ia&&!gr(this,a,Ra))throw ze.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Bf(a):new jc(a)}catch(a){throw yr(a,{[r]:e})}}function Bie(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=Ny(n,$f.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new ze(lt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{Ry(n)}}function tN(e){e=hn(e);const{fs:t,path:n}=Vn(e,this);try{if(Ia&&!gr(this,t.statSync(n),aa))throw ze.With("EACCES",n,"unlink");t.unlinkSync(n),ri(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}function $f(e,t){var n;e=hn(e);const r=od(t.mode,420),a=uc(t.flag);e=t.preserveSymlinks?e:ld.call(this,e);const{fs:i,path:s}=Vn(e,this);let o;try{o=i.statSync(s)}catch{}if(!o){if(!(a&U1))throw ze.With("ENOENT",e,"_open");const u=i.statSync(or(s));if(!gr(this,u,aa))throw ze.With("EACCES",or(e),"_open");if(!ko(u))throw ze.With("ENOTDIR",or(e),"_open");if(!t.allowDirectory&&r&xa)throw ze.With("EISDIR",e,"_open");if(!gr(this,u,aa))throw ze.With("EACCES",or(s),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ro.credentials,m=i.createFileSync(s,{mode:r,uid:u.mode&ky?u.uid:d,gid:u.mode&Ay?u.gid:h});return new Ax(this,e,i,s,a,m)}if(!gr(this,o,r)||!gr(this,o,YL(a)))throw ze.With("EACCES",e,"_open");if(a&V1)throw ze.With("EEXIST",e,"_open");const l=new Ax(this,e,i,s,a,o);if(a&H1&&l.truncate(0),!t.allowDirectory&&o.mode&xa)throw ze.With("EISDIR",e,"_open");return l}function G1(e,t,n=KA){return Nx($f.call(this,e,{flag:t,mode:n}))}function W1(e,t,n){return Nx($f.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function t9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Ny(r,typeof e=="number"?xi(this,e):$f.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),s=new Uint8Array(i);return a.read(s,0,i,0),s}catch(a){r.error=a,r.hasError=!0}finally{Ry(r)}}function nN(e,t={}){const n=cc(t,null,"r",420);if(uc(n.flag)&fi)throw new ze(lt.EINVAL,"Flag passed to readFile must allow for reading");const a=Lr.from(t9.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function rN(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=cc(n,"utf8","w+",420),i=uc(a.flag);if(!(i&fi||i&lc))throw new ze(lt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new ze(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!s)throw new ze(lt.EINVAL,"Data not specified");Ny(r,typeof e=="number"?xi(this,e):$f.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength,0),ri(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{Ry(r)}}function $ie(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=cc(n,"utf8","a+",420),i=uc(a.flag);if(!(i&xf))throw new ze(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new ze(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Ny(r,$f.call(this,typeof e=="number"?xi(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{Ry(r)}}function zie(e,t){const n=xi(this,e).stat();return t!=null&&t.bigint?new Bf(n):new jc(n)}function zf(e){xi(this,e).close(),ZL(this,e)}function Uie(e,t=0){if(t||(t=0),t<0)throw new ze(lt.EINVAL);xi(this,e).truncate(t)}function Vie(e){xi(this,e).sync()}function Hie(e){xi(this,e).datasync()}function qie(e,t,n,r,a){let i,s,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";s=0,i=Lr.from(t,h),o=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n,o=r,l=typeof a=="number"?a:null;const u=xi(this,e);l??(l=u.position);const d=u.write(i,s,o,l);return ri(this,"change",u.path),d}function Gie(e,t,n,r,a){const i=xi(this,e),s=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,s,r,a)}function aN(e,t,n){xi(this,e).chown(t,n)}function iN(e,t){const n=od(t,-1);if(n<0)throw new ze(lt.EINVAL,"Invalid mode.");xi(this,e).chmod(n)}function sN(e,t,n){xi(this,e).utimes(kx(t),kx(n))}function n9(e){e=hn(e);const{fs:t,path:n}=Vn(ld.call(this,e),this);try{const r=t.statSync(n);if(!ko(r))throw ze.With("ENOTDIR",n,"rmdir");if(Ia&&!gr(this,r,aa))throw ze.With("EACCES",n,"rmdir");t.rmdirSync(n),ri(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}function oN(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ro.credentials;t=typeof t=="object"?t:{mode:t};const s=od(t==null?void 0:t.mode,511);e=ld.call(this,e);const{fs:o,path:l,root:u}=Vn(e,this),d={[l]:e},h=(m,g)=>{if(!gr(this,g,aa))throw ze.With("EACCES",or(m),"mkdir");const v=o.mkdirSync(m,{mode:s,uid:g.mode&ky?g.uid:a,gid:g.mode&Ay?g.gid:i});return ri(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){h(l,o.statSync(or(l)));return}const m=[];for(let v=l,b=e;!o.existsSync(v);v=or(v),b=or(b))m.unshift(v),d[v]=b;if(!m.length)return;const g=[o.statSync(or(m[0]))];for(const[v,b]of m.entries())g.push(h(b,g[v]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw yr(m,d)}}function Xp(e,t){t=typeof t=="object"?t:{encoding:t},e=hn(e);const{fs:n,path:r}=Vn(ld.call(this,e),this);let a;try{const s=n.statSync(r);if(Ia&&!gr(this,s,Ra))throw ze.With("EACCES",r,"readdir");if(!ko(s))throw ze.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(s){throw yr(s,{[r]:e})}const i=[];for(const s of a){let o;try{o=n.statSync(hr(r,s))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new D0(s,o)):(t==null?void 0:t.encoding)=="buffer"?i.push(Lr.from(s)):i.push(s),!(!ko(o)||!(t!=null&&t.recursive)))for(const l of Xp.call(this,hr(e,s),t))l instanceof D0?(l.path=hr(s,l.path),i.push(l)):Lr.isBuffer(l)?i.push(Lr.from(hr(s,zA(l)))):i.push(hr(s,l))}return i}function Wie(e,t){if(e=hn(e),!Wu(or(e)).hasAccess(Ra,this))throw ze.With("EACCES",or(e),"link");if(t=hn(t),!Wu(or(t)).hasAccess(aa,this))throw ze.With("EACCES",or(t),"link");const{fs:n,path:r}=Vn(e,this),a=Vn(t,this);if(n!=a.fs)throw ze.With("EXDEV",t,"link");try{if(Ia&&!gr(this,n.statSync(r),Ra))throw ze.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw yr(i,{[r]:e,[a.path]:t})}}function Kie(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new ze(lt.EINVAL,"Invalid type: "+n);t=hn(t);const a=Ny(r,$f.call(this,t,{flag:"wx",mode:420}),!1);a.write(Jd(hn(e,!0))),a.chmod(Ic)}catch(a){r.error=a,r.hasError=!0}finally{Ry(r)}}function rk(e,t){const n=Lr.from(t9.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function Zie(e,t,n){const r=G1.call(this,e,"r+");aN.call(this,r,t,n),zf.call(this,r)}function Yie(e,t,n){const r=W1.call(this,e,"r+");aN.call(this,r,t,n),zf.call(this,r)}function Xie(e,t){const n=G1.call(this,e,"r+");iN.call(this,n,t),zf.call(this,n)}function Jie(e,t){const n=W1.call(this,e,"r+");iN.call(this,n,t),zf.call(this,n)}function r9(e,t,n){const r=G1.call(this,e,"r+");sN.call(this,r,t,n),zf.call(this,r)}function Qie(e,t,n){const r=W1.call(this,e,"r+");sN.call(this,r,t,n),zf.call(this,r)}function ak(e,t,n){try{const l=Vn(t,e),u=l.fs.statSync(l.path);if(!Cp(u))return{...l,fullPath:t,stats:u};const d=Sc.call(e,or(t),rk.call(e,t).toString());return ak(e,d)}catch{}const{base:r,dir:a}=el(t),i=a=="/"?"/":ld.call(e,a),s=hr(i,r),o=Vn(s,e);try{const l=o.fs.statSync(o.path);if(!Cp(l))return{...o,fullPath:s,stats:l};const u=Sc.call(e,i,rk.call(e,s).toString());return ak(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw yr(l,{[o.path]:s})}}function ld(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=ak(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Lr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function ese(e,t=384){if(!gr(this,Wu.call(this,e),t))throw new ze(lt.EACCES)}function a9(e,t){e=hn(e);let n;try{n=eN.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&Ar){case xa:if(t!=null&&t.recursive)for(const r of Xp.call(this,e))a9.call(this,hr(e,r),t);n9.call(this,e);break;case xo:case Ic:case Pf:case Ff:tN.call(this,e);break;case Lf:case Of:default:throw new ze(lt.EPERM,"File type not supported",e,"rm")}}function tse(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return oN.call(this,a),n=="buffer"?Lr.from(a):a}function i9(e,t,n){if(e=hn(e),t=hn(t),n&&n&ZA&&QA(t))throw new ze(lt.EEXIST,"Destination file already exists",t,"copyFile");rN.call(this,t,nN(e)),ri(this,"rename",t.toString())}function nse(e,t,n){const r=xi(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function rse(e,t,n){const r=xi(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function ase(e,t){return e=hn(e),new lN(e,this)}function s9(e,t,n){e=hn(e),t=hn(t);const r=eN.call(this,e);if(n!=null&&n.errorOnExist&&QA.call(this,t))throw new ze(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Ar){case xa:if(!(n!=null&&n.recursive))throw new ze(lt.EISDIR,e+" is a directory (not copied)",e,"cp");oN.call(this,t,{recursive:!0});for(const a of Xp.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(hr(e,a.name),hr(t,a.name))||s9.call(this,hr(e,a.name),hr(t,a.name),n);break;case xo:case Ic:i9.call(this,e,t);break;case Pf:case Ff:case Lf:case Of:default:throw new ze(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&r9.call(this,t,r.atime,r.mtime)}function ise(e,t){e=hn(e);const{fs:n}=Vn(e,this);return JL(n,t==null?void 0:t.bigint)}function sse(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),s=[];function o(l){const u=Xp(l,{withFileTypes:r,encoding:"utf8"});for(const d of u){const h=r?d.path:l+"/"+d;a(r?d:h)||(Wu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&o(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&s.push(r?d.path:h.replace(/^\/+/g,"")))}}return o(n),s}class D0{get name(){return Ep(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return wie(this.stats)}isDirectory(){return ko(this.stats)}isBlockDevice(){return R0(this.stats)}isCharacterDevice(){return I0(this.stats)}isSymbolicLink(){return Cp(this.stats)}isFIFO(){return _ie(this.stats)}isSocket(){return xie(this.stats)}}class lN{checkClosed(){if(this.closed)throw new ze(lt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await Vf.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Xp.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var gE={exports:{}},yE={exports:{}},bE={},z6;function cd(){return z6||(z6=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=m,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;a[45]=62,a[95]=63;function u(_){var E=_.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=_.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function d(_){var E=u(_),C=E[0],k=E[1];return(C+k)*3/4-k}function h(_,E,C){return(E+C)*3/4-C}function m(_){var E,C=u(_),k=C[0],I=C[1],j=new i(h(_,k,I)),N=0,P=I>0?k-4:k,L;for(L=0;L<P;L+=4)E=a[_.charCodeAt(L)]<<18|a[_.charCodeAt(L+1)]<<12|a[_.charCodeAt(L+2)]<<6|a[_.charCodeAt(L+3)],j[N++]=E>>16&255,j[N++]=E>>8&255,j[N++]=E&255;return I===2&&(E=a[_.charCodeAt(L)]<<2|a[_.charCodeAt(L+1)]>>4,j[N++]=E&255),I===1&&(E=a[_.charCodeAt(L)]<<10|a[_.charCodeAt(L+1)]<<4|a[_.charCodeAt(L+2)]>>2,j[N++]=E>>8&255,j[N++]=E&255),j}function g(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function v(_,E,C){for(var k,I=[],j=E;j<C;j+=3)k=(_[j]<<16&16711680)+(_[j+1]<<8&65280)+(_[j+2]&255),I.push(g(k));return I.join("")}function b(_){for(var E,C=_.length,k=C%3,I=[],j=16383,N=0,P=C-k;N<P;N+=j)I.push(v(_,N,N+j>P?P:N+j));return k===1?(E=_[C-1],I.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(_[C-2]<<8)+_[C-1],I.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),I.join("")}var w={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */w.read=function(_,E,C,k,I){var j,N,P=I*8-k-1,L=(1<<P)-1,H=L>>1,M=-7,K=C?I-1:0,U=C?-1:1,se=_[E+K];for(K+=U,j=se&(1<<-M)-1,se>>=-M,M+=P;M>0;j=j*256+_[E+K],K+=U,M-=8);for(N=j&(1<<-M)-1,j>>=-M,M+=k;M>0;N=N*256+_[E+K],K+=U,M-=8);if(j===0)j=1-H;else{if(j===L)return N?NaN:(se?-1:1)*(1/0);N=N+Math.pow(2,k),j=j-H}return(se?-1:1)*N*Math.pow(2,j-k)},w.write=function(_,E,C,k,I,j){var N,P,L,H=j*8-I-1,M=(1<<H)-1,K=M>>1,U=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,se=k?0:j-1,ie=k?1:-1,re=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(P=isNaN(E)?1:0,N=M):(N=Math.floor(Math.log(E)/Math.LN2),E*(L=Math.pow(2,-N))<1&&(N--,L*=2),N+K>=1?E+=U/L:E+=U*Math.pow(2,1-K),E*L>=2&&(N++,L/=2),N+K>=M?(P=0,N=M):N+K>=1?(P=(E*L-1)*Math.pow(2,I),N=N+K):(P=E*Math.pow(2,K-1)*Math.pow(2,I),N=0));I>=8;_[C+se]=P&255,se+=ie,P/=256,I-=8);for(N=N<<I|P,H+=I;H>0;_[C+se]=N&255,se+=ie,N/=256,H-=8);_[C+se-ie]|=re*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(_){const E=n,C=w,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_.Buffer=M,_.SlowBuffer=te,_.INSPECT_MAX_BYTES=50;const I=2147483647;_.kMaxLength=I;const{Uint8Array:j,ArrayBuffer:N,SharedArrayBuffer:P}=globalThis;M.TYPED_ARRAY_SUPPORT=L(),!M.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function L(){try{const G=new j(1),V={foo:function(){return 42}};return Object.setPrototypeOf(V,j.prototype),Object.setPrototypeOf(G,V),G.foo()===42}catch{return!1}}Object.defineProperty(M.prototype,"parent",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.buffer}}),Object.defineProperty(M.prototype,"offset",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.byteOffset}});function H(G){if(G>I)throw new RangeError('The value "'+G+'" is invalid for option "size"');const V=new j(G);return Object.setPrototypeOf(V,M.prototype),V}function M(G,V,Z){if(typeof G=="number"){if(typeof V=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ie(G)}return K(G,V,Z)}M.poolSize=8192;function K(G,V,Z){if(typeof G=="string")return re(G,V);if(N.isView(G))return ne(G);if(G==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(ye(G,N)||G&&ye(G.buffer,N)||typeof P<"u"&&(ye(G,P)||G&&ye(G.buffer,P)))return q(G,V,Z);if(typeof G=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=G.valueOf&&G.valueOf();if(pe!=null&&pe!==G)return M.from(pe,V,Z);const Re=J(G);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof G[Symbol.toPrimitive]=="function")return M.from(G[Symbol.toPrimitive]("string"),V,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}M.from=function(G,V,Z){return K(G,V,Z)},Object.setPrototypeOf(M.prototype,j.prototype),Object.setPrototypeOf(M,j);function U(G){if(typeof G!="number")throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function se(G,V,Z){return U(G),G<=0?H(G):V!==void 0?typeof Z=="string"?H(G).fill(V,Z):H(G).fill(V):H(G)}M.alloc=function(G,V,Z){return se(G,V,Z)};function ie(G){return U(G),H(G<0?0:Q(G)|0)}M.allocUnsafe=function(G){return ie(G)},M.allocUnsafeSlow=function(G){return ie(G)};function re(G,V){if((typeof V!="string"||V==="")&&(V="utf8"),!M.isEncoding(V))throw new TypeError("Unknown encoding: "+V);const Z=ue(G,V)|0;let pe=H(Z);const Re=pe.write(G,V);return Re!==Z&&(pe=pe.slice(0,Re)),pe}function X(G){const V=G.length<0?0:Q(G.length)|0,Z=H(V);for(let pe=0;pe<V;pe+=1)Z[pe]=G[pe]&255;return Z}function ne(G){if(ye(G,j)){const V=new j(G);return q(V.buffer,V.byteOffset,V.byteLength)}return X(G)}function q(G,V,Z){if(V<0||G.byteLength<V)throw new RangeError('"offset" is outside of buffer bounds');if(G.byteLength<V+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return V===void 0&&Z===void 0?pe=new j(G):Z===void 0?pe=new j(G,V):pe=new j(G,V,Z),Object.setPrototypeOf(pe,M.prototype),pe}function J(G){if(M.isBuffer(G)){const V=Q(G.length)|0,Z=H(V);return Z.length===0||G.copy(Z,0,0,V),Z}if(G.length!==void 0)return typeof G.length!="number"||Me(G.length)?H(0):X(G);if(G.type==="Buffer"&&Array.isArray(G.data))return X(G.data)}function Q(G){if(G>=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return G|0}function te(G){return+G!=G&&(G=0),M.alloc(+G)}M.isBuffer=function(V){return V!=null&&V._isBuffer===!0&&V!==M.prototype},M.compare=function(V,Z){if(ye(V,j)&&(V=M.from(V,V.offset,V.byteLength)),ye(Z,j)&&(Z=M.from(Z,Z.offset,Z.byteLength)),!M.isBuffer(V)||!M.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(V===Z)return 0;let pe=V.length,Re=Z.length;for(let Ue=0,pt=Math.min(pe,Re);Ue<pt;++Ue)if(V[Ue]!==Z[Ue]){pe=V[Ue],Re=Z[Ue];break}return pe<Re?-1:Re<pe?1:0},M.isEncoding=function(V){switch(String(V).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(V,Z){if(!Array.isArray(V))throw new TypeError('"list" argument must be an Array of Buffers');if(V.length===0)return M.alloc(0);let pe;if(Z===void 0)for(Z=0,pe=0;pe<V.length;++pe)Z+=V[pe].length;const Re=M.allocUnsafe(Z);let Ue=0;for(pe=0;pe<V.length;++pe){let pt=V[pe];if(ye(pt,j))Ue+pt.length>Re.length?(M.isBuffer(pt)||(pt=M.from(pt)),pt.copy(Re,Ue)):j.prototype.set.call(Re,pt,Ue);else if(M.isBuffer(pt))pt.copy(Re,Ue);else throw new TypeError('"list" argument must be an Array of Buffers');Ue+=pt.length}return Re};function ue(G,V){if(M.isBuffer(G))return G.length;if(N.isView(G)||ye(G,N))return G.byteLength;if(typeof G!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);const Z=G.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&Z===0)return 0;let Re=!1;for(;;)switch(V){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return ft(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return Le(G).length;default:if(Re)return pe?-1:ft(G).length;V=(""+V).toLowerCase(),Re=!0}}M.byteLength=ue;function ge(G,V,Z){let pe=!1;if((V===void 0||V<0)&&(V=0),V>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,V>>>=0,Z<=V))return"";for(G||(G="utf8");;)switch(G){case"hex":return Se(this,V,Z);case"utf8":case"utf-8":return Ee(this,V,Z);case"ascii":return oe(this,V,Z);case"latin1":case"binary":return ee(this,V,Z);case"base64":return $(this,V,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,V,Z);default:if(pe)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),pe=!0}}M.prototype._isBuffer=!0;function Ie(G,V,Z){const pe=G[V];G[V]=G[Z],G[Z]=pe}M.prototype.swap16=function(){const V=this.length;if(V%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<V;Z+=2)Ie(this,Z,Z+1);return this},M.prototype.swap32=function(){const V=this.length;if(V%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<V;Z+=4)Ie(this,Z,Z+3),Ie(this,Z+1,Z+2);return this},M.prototype.swap64=function(){const V=this.length;if(V%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<V;Z+=8)Ie(this,Z,Z+7),Ie(this,Z+1,Z+6),Ie(this,Z+2,Z+5),Ie(this,Z+3,Z+4);return this},M.prototype.toString=function(){const V=this.length;return V===0?"":arguments.length===0?Ee(this,0,V):ge.apply(this,arguments)},M.prototype.toLocaleString=M.prototype.toString,M.prototype.equals=function(V){if(!M.isBuffer(V))throw new TypeError("Argument must be a Buffer");return this===V?!0:M.compare(this,V)===0},M.prototype.inspect=function(){let V="";const Z=_.INSPECT_MAX_BYTES;return V=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(V+=" ... "),"<Buffer "+V+">"},k&&(M.prototype[k]=M.prototype.inspect),M.prototype.compare=function(V,Z,pe,Re,Ue){if(ye(V,j)&&(V=M.from(V,V.offset,V.byteLength)),!M.isBuffer(V))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof V);if(Z===void 0&&(Z=0),pe===void 0&&(pe=V?V.length:0),Re===void 0&&(Re=0),Ue===void 0&&(Ue=this.length),Z<0||pe>V.length||Re<0||Ue>this.length)throw new RangeError("out of range index");if(Re>=Ue&&Z>=pe)return 0;if(Re>=Ue)return-1;if(Z>=pe)return 1;if(Z>>>=0,pe>>>=0,Re>>>=0,Ue>>>=0,this===V)return 0;let pt=Ue-Re,Zt=pe-Z;const ut=Math.min(pt,Zt),Rt=this.slice(Re,Ue),Lt=V.slice(Z,pe);for(let en=0;en<ut;++en)if(Rt[en]!==Lt[en]){pt=Rt[en],Zt=Lt[en];break}return pt<Zt?-1:Zt<pt?1:0};function Ae(G,V,Z,pe,Re){if(G.length===0)return-1;if(typeof Z=="string"?(pe=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Me(Z)&&(Z=Re?0:G.length-1),Z<0&&(Z=G.length+Z),Z>=G.length){if(Re)return-1;Z=G.length-1}else if(Z<0)if(Re)Z=0;else return-1;if(typeof V=="string"&&(V=M.from(V,pe)),M.isBuffer(V))return V.length===0?-1:_e(G,V,Z,pe,Re);if(typeof V=="number")return V=V&255,typeof j.prototype.indexOf=="function"?Re?j.prototype.indexOf.call(G,V,Z):j.prototype.lastIndexOf.call(G,V,Z):_e(G,[V],Z,pe,Re);throw new TypeError("val must be string, number or Buffer")}function _e(G,V,Z,pe,Re){let Ue=1,pt=G.length,Zt=V.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(G.length<2||V.length<2)return-1;Ue=2,pt/=2,Zt/=2,Z/=2}function ut(Lt,en){return Ue===1?Lt[en]:Lt.readUInt16BE(en*Ue)}let Rt;if(Re){let Lt=-1;for(Rt=Z;Rt<pt;Rt++)if(ut(G,Rt)===ut(V,Lt===-1?0:Rt-Lt)){if(Lt===-1&&(Lt=Rt),Rt-Lt+1===Zt)return Lt*Ue}else Lt!==-1&&(Rt-=Rt-Lt),Lt=-1}else for(Z+Zt>pt&&(Z=pt-Zt),Rt=Z;Rt>=0;Rt--){let Lt=!0;for(let en=0;en<Zt;en++)if(ut(G,Rt+en)!==ut(V,en)){Lt=!1;break}if(Lt)return Rt}return-1}M.prototype.includes=function(V,Z,pe){return this.indexOf(V,Z,pe)!==-1},M.prototype.indexOf=function(V,Z,pe){return Ae(this,V,Z,pe,!0)},M.prototype.lastIndexOf=function(V,Z,pe){return Ae(this,V,Z,pe,!1)};function ve(G,V,Z,pe){Z=Number(Z)||0;const Re=G.length-Z;pe?(pe=Number(pe),pe>Re&&(pe=Re)):pe=Re;const Ue=V.length;pe>Ue/2&&(pe=Ue/2);let pt;for(pt=0;pt<pe;++pt){const Zt=parseInt(V.substr(pt*2,2),16);if(Me(Zt))return pt;G[Z+pt]=Zt}return pt}function Be(G,V,Z,pe){return tt(ft(V,G.length-Z),G,Z,pe)}function nt(G,V,Z,pe){return tt(vt(V),G,Z,pe)}function Ve(G,V,Z,pe){return tt(Le(V),G,Z,pe)}function De(G,V,Z,pe){return tt(F(V,G.length-Z),G,Z,pe)}M.prototype.write=function(V,Z,pe,Re){if(Z===void 0)Re="utf8",pe=this.length,Z=0;else if(pe===void 0&&typeof Z=="string")Re=Z,pe=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(pe)?(pe=pe>>>0,Re===void 0&&(Re="utf8")):(Re=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ue=this.length-Z;if((pe===void 0||pe>Ue)&&(pe=Ue),V.length>0&&(pe<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let pt=!1;for(;;)switch(Re){case"hex":return ve(this,V,Z,pe);case"utf8":case"utf-8":return Be(this,V,Z,pe);case"ascii":case"latin1":case"binary":return nt(this,V,Z,pe);case"base64":return Ve(this,V,Z,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return De(this,V,Z,pe);default:if(pt)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),pt=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(G,V,Z){return V===0&&Z===G.length?E.fromByteArray(G):E.fromByteArray(G.slice(V,Z))}function Ee(G,V,Z){Z=Math.min(G.length,Z);const pe=[];let Re=V;for(;Re<Z;){const Ue=G[Re];let pt=null,Zt=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Re+Zt<=Z){let ut,Rt,Lt,en;switch(Zt){case 1:Ue<128&&(pt=Ue);break;case 2:ut=G[Re+1],(ut&192)===128&&(en=(Ue&31)<<6|ut&63,en>127&&(pt=en));break;case 3:ut=G[Re+1],Rt=G[Re+2],(ut&192)===128&&(Rt&192)===128&&(en=(Ue&15)<<12|(ut&63)<<6|Rt&63,en>2047&&(en<55296||en>57343)&&(pt=en));break;case 4:ut=G[Re+1],Rt=G[Re+2],Lt=G[Re+3],(ut&192)===128&&(Rt&192)===128&&(Lt&192)===128&&(en=(Ue&15)<<18|(ut&63)<<12|(Rt&63)<<6|Lt&63,en>65535&&en<1114112&&(pt=en))}}pt===null?(pt=65533,Zt=1):pt>65535&&(pt-=65536,pe.push(pt>>>10&1023|55296),pt=56320|pt&1023),pe.push(pt),Re+=Zt}return fe(pe)}const Te=4096;function fe(G){const V=G.length;if(V<=Te)return String.fromCharCode.apply(String,G);let Z="",pe=0;for(;pe<V;)Z+=String.fromCharCode.apply(String,G.slice(pe,pe+=Te));return Z}function oe(G,V,Z){let pe="";Z=Math.min(G.length,Z);for(let Re=V;Re<Z;++Re)pe+=String.fromCharCode(G[Re]&127);return pe}function ee(G,V,Z){let pe="";Z=Math.min(G.length,Z);for(let Re=V;Re<Z;++Re)pe+=String.fromCharCode(G[Re]);return pe}function Se(G,V,Z){const pe=G.length;(!V||V<0)&&(V=0),(!Z||Z<0||Z>pe)&&(Z=pe);let Re="";for(let Ue=V;Ue<Z;++Ue)Re+=Ke[G[Ue]];return Re}function Pe(G,V,Z){const pe=G.slice(V,Z);let Re="";for(let Ue=0;Ue<pe.length-1;Ue+=2)Re+=String.fromCharCode(pe[Ue]+pe[Ue+1]*256);return Re}M.prototype.slice=function(V,Z){const pe=this.length;V=~~V,Z=Z===void 0?pe:~~Z,V<0?(V+=pe,V<0&&(V=0)):V>pe&&(V=pe),Z<0?(Z+=pe,Z<0&&(Z=0)):Z>pe&&(Z=pe),Z<V&&(Z=V);const Re=this.subarray(V,Z);return Object.setPrototypeOf(Re,M.prototype),Re};function ke(G,V,Z){if(G%1!==0||G<0)throw new RangeError("offset is not uint");if(G+V>Z)throw new RangeError("Trying to access beyond buffer length")}M.prototype.readUintLE=M.prototype.readUIntLE=function(V,Z,pe){V=V>>>0,Z=Z>>>0,pe||ke(V,Z,this.length);let Re=this[V],Ue=1,pt=0;for(;++pt<Z&&(Ue*=256);)Re+=this[V+pt]*Ue;return Re},M.prototype.readUintBE=M.prototype.readUIntBE=function(V,Z,pe){V=V>>>0,Z=Z>>>0,pe||ke(V,Z,this.length);let Re=this[V+--Z],Ue=1;for(;Z>0&&(Ue*=256);)Re+=this[V+--Z]*Ue;return Re},M.prototype.readUint8=M.prototype.readUInt8=function(V,Z){return V=V>>>0,Z||ke(V,1,this.length),this[V]},M.prototype.readUint16LE=M.prototype.readUInt16LE=function(V,Z){return V=V>>>0,Z||ke(V,2,this.length),this[V]|this[V+1]<<8},M.prototype.readUint16BE=M.prototype.readUInt16BE=function(V,Z){return V=V>>>0,Z||ke(V,2,this.length),this[V]<<8|this[V+1]},M.prototype.readUint32LE=M.prototype.readUInt32LE=function(V,Z){return V=V>>>0,Z||ke(V,4,this.length),(this[V]|this[V+1]<<8|this[V+2]<<16)+this[V+3]*16777216},M.prototype.readUint32BE=M.prototype.readUInt32BE=function(V,Z){return V=V>>>0,Z||ke(V,4,this.length),this[V]*16777216+(this[V+1]<<16|this[V+2]<<8|this[V+3])},M.prototype.readBigUInt64LE=Dt(function(V){V=V>>>0,je(V,"offset");const Z=this[V],pe=this[V+7];(Z===void 0||pe===void 0)&&we(V,this.length-8);const Re=Z+this[++V]*2**8+this[++V]*2**16+this[++V]*2**24,Ue=this[++V]+this[++V]*2**8+this[++V]*2**16+pe*2**24;return BigInt(Re)+(BigInt(Ue)<<BigInt(32))}),M.prototype.readBigUInt64BE=Dt(function(V){V=V>>>0,je(V,"offset");const Z=this[V],pe=this[V+7];(Z===void 0||pe===void 0)&&we(V,this.length-8);const Re=Z*2**24+this[++V]*2**16+this[++V]*2**8+this[++V],Ue=this[++V]*2**24+this[++V]*2**16+this[++V]*2**8+pe;return(BigInt(Re)<<BigInt(32))+BigInt(Ue)}),M.prototype.readIntLE=function(V,Z,pe){V=V>>>0,Z=Z>>>0,pe||ke(V,Z,this.length);let Re=this[V],Ue=1,pt=0;for(;++pt<Z&&(Ue*=256);)Re+=this[V+pt]*Ue;return Ue*=128,Re>=Ue&&(Re-=Math.pow(2,8*Z)),Re},M.prototype.readIntBE=function(V,Z,pe){V=V>>>0,Z=Z>>>0,pe||ke(V,Z,this.length);let Re=Z,Ue=1,pt=this[V+--Re];for(;Re>0&&(Ue*=256);)pt+=this[V+--Re]*Ue;return Ue*=128,pt>=Ue&&(pt-=Math.pow(2,8*Z)),pt},M.prototype.readInt8=function(V,Z){return V=V>>>0,Z||ke(V,1,this.length),this[V]&128?(255-this[V]+1)*-1:this[V]},M.prototype.readInt16LE=function(V,Z){V=V>>>0,Z||ke(V,2,this.length);const pe=this[V]|this[V+1]<<8;return pe&32768?pe|4294901760:pe},M.prototype.readInt16BE=function(V,Z){V=V>>>0,Z||ke(V,2,this.length);const pe=this[V+1]|this[V]<<8;return pe&32768?pe|4294901760:pe},M.prototype.readInt32LE=function(V,Z){return V=V>>>0,Z||ke(V,4,this.length),this[V]|this[V+1]<<8|this[V+2]<<16|this[V+3]<<24},M.prototype.readInt32BE=function(V,Z){return V=V>>>0,Z||ke(V,4,this.length),this[V]<<24|this[V+1]<<16|this[V+2]<<8|this[V+3]},M.prototype.readBigInt64LE=Dt(function(V){V=V>>>0,je(V,"offset");const Z=this[V],pe=this[V+7];(Z===void 0||pe===void 0)&&we(V,this.length-8);const Re=this[V+4]+this[V+5]*2**8+this[V+6]*2**16+(pe<<24);return(BigInt(Re)<<BigInt(32))+BigInt(Z+this[++V]*2**8+this[++V]*2**16+this[++V]*2**24)}),M.prototype.readBigInt64BE=Dt(function(V){V=V>>>0,je(V,"offset");const Z=this[V],pe=this[V+7];(Z===void 0||pe===void 0)&&we(V,this.length-8);const Re=(Z<<24)+this[++V]*2**16+this[++V]*2**8+this[++V];return(BigInt(Re)<<BigInt(32))+BigInt(this[++V]*2**24+this[++V]*2**16+this[++V]*2**8+pe)}),M.prototype.readFloatLE=function(V,Z){return V=V>>>0,Z||ke(V,4,this.length),C.read(this,V,!0,23,4)},M.prototype.readFloatBE=function(V,Z){return V=V>>>0,Z||ke(V,4,this.length),C.read(this,V,!1,23,4)},M.prototype.readDoubleLE=function(V,Z){return V=V>>>0,Z||ke(V,8,this.length),C.read(this,V,!0,52,8)},M.prototype.readDoubleBE=function(V,Z){return V=V>>>0,Z||ke(V,8,this.length),C.read(this,V,!1,52,8)};function We(G,V,Z,pe,Re,Ue){if(!M.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(V>Re||V<Ue)throw new RangeError('"value" argument is out of bounds');if(Z+pe>G.length)throw new RangeError("Index out of range")}M.prototype.writeUintLE=M.prototype.writeUIntLE=function(V,Z,pe,Re){if(V=+V,Z=Z>>>0,pe=pe>>>0,!Re){const Zt=Math.pow(2,8*pe)-1;We(this,V,Z,pe,Zt,0)}let Ue=1,pt=0;for(this[Z]=V&255;++pt<pe&&(Ue*=256);)this[Z+pt]=V/Ue&255;return Z+pe},M.prototype.writeUintBE=M.prototype.writeUIntBE=function(V,Z,pe,Re){if(V=+V,Z=Z>>>0,pe=pe>>>0,!Re){const Zt=Math.pow(2,8*pe)-1;We(this,V,Z,pe,Zt,0)}let Ue=pe-1,pt=1;for(this[Z+Ue]=V&255;--Ue>=0&&(pt*=256);)this[Z+Ue]=V/pt&255;return Z+pe},M.prototype.writeUint8=M.prototype.writeUInt8=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,1,255,0),this[Z]=V&255,Z+1},M.prototype.writeUint16LE=M.prototype.writeUInt16LE=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,2,65535,0),this[Z]=V&255,this[Z+1]=V>>>8,Z+2},M.prototype.writeUint16BE=M.prototype.writeUInt16BE=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,2,65535,0),this[Z]=V>>>8,this[Z+1]=V&255,Z+2},M.prototype.writeUint32LE=M.prototype.writeUInt32LE=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,4,4294967295,0),this[Z+3]=V>>>24,this[Z+2]=V>>>16,this[Z+1]=V>>>8,this[Z]=V&255,Z+4},M.prototype.writeUint32BE=M.prototype.writeUInt32BE=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,4,4294967295,0),this[Z]=V>>>24,this[Z+1]=V>>>16,this[Z+2]=V>>>8,this[Z+3]=V&255,Z+4};function Nt(G,V,Z,pe,Re){he(V,pe,Re,G,Z,7);let Ue=Number(V&BigInt(4294967295));G[Z++]=Ue,Ue=Ue>>8,G[Z++]=Ue,Ue=Ue>>8,G[Z++]=Ue,Ue=Ue>>8,G[Z++]=Ue;let pt=Number(V>>BigInt(32)&BigInt(4294967295));return G[Z++]=pt,pt=pt>>8,G[Z++]=pt,pt=pt>>8,G[Z++]=pt,pt=pt>>8,G[Z++]=pt,Z}function it(G,V,Z,pe,Re){he(V,pe,Re,G,Z,7);let Ue=Number(V&BigInt(4294967295));G[Z+7]=Ue,Ue=Ue>>8,G[Z+6]=Ue,Ue=Ue>>8,G[Z+5]=Ue,Ue=Ue>>8,G[Z+4]=Ue;let pt=Number(V>>BigInt(32)&BigInt(4294967295));return G[Z+3]=pt,pt=pt>>8,G[Z+2]=pt,pt=pt>>8,G[Z+1]=pt,pt=pt>>8,G[Z]=pt,Z+8}M.prototype.writeBigUInt64LE=Dt(function(V,Z=0){return Nt(this,V,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeBigUInt64BE=Dt(function(V,Z=0){return it(this,V,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeIntLE=function(V,Z,pe,Re){if(V=+V,Z=Z>>>0,!Re){const ut=Math.pow(2,8*pe-1);We(this,V,Z,pe,ut-1,-ut)}let Ue=0,pt=1,Zt=0;for(this[Z]=V&255;++Ue<pe&&(pt*=256);)V<0&&Zt===0&&this[Z+Ue-1]!==0&&(Zt=1),this[Z+Ue]=(V/pt>>0)-Zt&255;return Z+pe},M.prototype.writeIntBE=function(V,Z,pe,Re){if(V=+V,Z=Z>>>0,!Re){const ut=Math.pow(2,8*pe-1);We(this,V,Z,pe,ut-1,-ut)}let Ue=pe-1,pt=1,Zt=0;for(this[Z+Ue]=V&255;--Ue>=0&&(pt*=256);)V<0&&Zt===0&&this[Z+Ue+1]!==0&&(Zt=1),this[Z+Ue]=(V/pt>>0)-Zt&255;return Z+pe},M.prototype.writeInt8=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,1,127,-128),V<0&&(V=255+V+1),this[Z]=V&255,Z+1},M.prototype.writeInt16LE=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,2,32767,-32768),this[Z]=V&255,this[Z+1]=V>>>8,Z+2},M.prototype.writeInt16BE=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,2,32767,-32768),this[Z]=V>>>8,this[Z+1]=V&255,Z+2},M.prototype.writeInt32LE=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,4,2147483647,-2147483648),this[Z]=V&255,this[Z+1]=V>>>8,this[Z+2]=V>>>16,this[Z+3]=V>>>24,Z+4},M.prototype.writeInt32BE=function(V,Z,pe){return V=+V,Z=Z>>>0,pe||We(this,V,Z,4,2147483647,-2147483648),V<0&&(V=4294967295+V+1),this[Z]=V>>>24,this[Z+1]=V>>>16,this[Z+2]=V>>>8,this[Z+3]=V&255,Z+4},M.prototype.writeBigInt64LE=Dt(function(V,Z=0){return Nt(this,V,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),M.prototype.writeBigInt64BE=Dt(function(V,Z=0){return it(this,V,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(G,V,Z,pe,Re,Ue){if(Z+pe>G.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function Ft(G,V,Z,pe,Re){return V=+V,Z=Z>>>0,Re||Et(G,V,Z,4),C.write(G,V,Z,pe,23,4),Z+4}M.prototype.writeFloatLE=function(V,Z,pe){return Ft(this,V,Z,!0,pe)},M.prototype.writeFloatBE=function(V,Z,pe){return Ft(this,V,Z,!1,pe)};function Mt(G,V,Z,pe,Re){return V=+V,Z=Z>>>0,Re||Et(G,V,Z,8),C.write(G,V,Z,pe,52,8),Z+8}M.prototype.writeDoubleLE=function(V,Z,pe){return Mt(this,V,Z,!0,pe)},M.prototype.writeDoubleBE=function(V,Z,pe){return Mt(this,V,Z,!1,pe)},M.prototype.copy=function(V,Z,pe,Re){if(!M.isBuffer(V))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Re&&Re!==0&&(Re=this.length),Z>=V.length&&(Z=V.length),Z||(Z=0),Re>0&&Re<pe&&(Re=pe),Re===pe||V.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),V.length-Z<Re-pe&&(Re=V.length-Z+pe);const Ue=Re-pe;return this===V&&typeof j.prototype.copyWithin=="function"?this.copyWithin(Z,pe,Re):j.prototype.set.call(V,this.subarray(pe,Re),Z),Ue},M.prototype.fill=function(V,Z,pe,Re){if(typeof V=="string"){if(typeof Z=="string"?(Re=Z,Z=0,pe=this.length):typeof pe=="string"&&(Re=pe,pe=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!M.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(V.length===1){const pt=V.charCodeAt(0);(Re==="utf8"&&pt<128||Re==="latin1")&&(V=pt)}}else typeof V=="number"?V=V&255:typeof V=="boolean"&&(V=Number(V));if(Z<0||this.length<Z||this.length<pe)throw new RangeError("Out of range index");if(pe<=Z)return this;Z=Z>>>0,pe=pe===void 0?this.length:pe>>>0,V||(V=0);let Ue;if(typeof V=="number")for(Ue=Z;Ue<pe;++Ue)this[Ue]=V;else{const pt=M.isBuffer(V)?V:M.from(V,Re),Zt=pt.length;if(Zt===0)throw new TypeError('The value "'+V+'" is invalid for argument "value"');for(Ue=0;Ue<pe-Z;++Ue)this[Ue+Z]=pt[Ue%Zt]}return this};const Yt={};function be(G,V,Z){Yt[G]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:V.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${G}]`,this.stack,delete this.name}get code(){return G}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${G}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(G){return G?`${G} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(G,V){return`The "${G}" argument must be of type number. Received type ${typeof V}`},TypeError),be("ERR_OUT_OF_RANGE",function(G,V,Z){let pe=`The value of "${G}" is out of range.`,Re=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?Re=D(String(Z)):typeof Z=="bigint"&&(Re=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(Re=D(Re)),Re+="n"),pe+=` It must be ${V}. Received ${Re}`,pe},RangeError);function D(G){let V="",Z=G.length;const pe=G[0]==="-"?1:0;for(;Z>=pe+4;Z-=3)V=`_${G.slice(Z-3,Z)}${V}`;return`${G.slice(0,Z)}${V}`}function W(G,V,Z){je(V,"offset"),(G[V]===void 0||G[V+Z]===void 0)&&we(V,G.length-(Z+1))}function he(G,V,Z,pe,Re,Ue){if(G>Z||G<V){const pt=typeof V=="bigint"?"n":"";let Zt;throw V===0||V===BigInt(0)?Zt=`>= 0${pt} and < 2${pt} ** ${(Ue+1)*8}${pt}`:Zt=`>= -(2${pt} ** ${(Ue+1)*8-1}${pt}) and < 2 ** ${(Ue+1)*8-1}${pt}`,new Yt.ERR_OUT_OF_RANGE("value",Zt,G)}W(pe,Re,Ue)}function je(G,V){if(typeof G!="number")throw new Yt.ERR_INVALID_ARG_TYPE(V,"number",G)}function we(G,V,Z){throw Math.floor(G)!==G?(je(G,Z),new Yt.ERR_OUT_OF_RANGE("offset","an integer",G)):V<0?new Yt.ERR_BUFFER_OUT_OF_BOUNDS:new Yt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${V}`,G)}const Ne=/[^+/0-9A-Za-z-_]/g;function ce(G){if(G=G.split("=")[0],G=G.trim().replace(Ne,""),G.length<2)return"";for(;G.length%4!==0;)G=G+"=";return G}function ft(G,V){V=V||1/0;let Z;const pe=G.length;let Re=null;const Ue=[];for(let pt=0;pt<pe;++pt){if(Z=G.charCodeAt(pt),Z>55295&&Z<57344){if(!Re){if(Z>56319){(V-=3)>-1&&Ue.push(239,191,189);continue}else if(pt+1===pe){(V-=3)>-1&&Ue.push(239,191,189);continue}Re=Z;continue}if(Z<56320){(V-=3)>-1&&Ue.push(239,191,189),Re=Z;continue}Z=(Re-55296<<10|Z-56320)+65536}else Re&&(V-=3)>-1&&Ue.push(239,191,189);if(Re=null,Z<128){if((V-=1)<0)break;Ue.push(Z)}else if(Z<2048){if((V-=2)<0)break;Ue.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((V-=3)<0)break;Ue.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((V-=4)<0)break;Ue.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return Ue}function vt(G){const V=[];for(let Z=0;Z<G.length;++Z)V.push(G.charCodeAt(Z)&255);return V}function F(G,V){let Z,pe,Re;const Ue=[];for(let pt=0;pt<G.length&&!((V-=2)<0);++pt)Z=G.charCodeAt(pt),pe=Z>>8,Re=Z%256,Ue.push(Re),Ue.push(pe);return Ue}function Le(G){return E.toByteArray(ce(G))}function tt(G,V,Z,pe){let Re;for(Re=0;Re<pe&&!(Re+Z>=V.length||Re>=G.length);++Re)V[Re+Z]=G[Re];return Re}function ye(G,V){return G instanceof V||G!=null&&G.constructor!=null&&G.constructor.name!=null&&G.constructor.name===V.name}function Me(G){return G!==G}const Ke=function(){const G="0123456789abcdef",V=new Array(256);for(let Z=0;Z<16;++Z){const pe=Z*16;for(let Re=0;Re<16;++Re)V[pe+Re]=G[Z]+G[Re]}return V}();function Dt(G){return typeof BigInt>"u"?me:G}function me(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(bE)),bE}var vE,U6;function Qr(){if(U6)return vE;U6=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return vE={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},vE}var wE={exports:{}},xE,V6;function o9(){return V6||(V6=1,xE={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),xE}var _E,H6;function Pi(){if(H6)return _E;H6=1;const{format:e,inspect:t}=o9(),{AggregateError:n}=Qr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function u(w,x){if(!w)throw new l.ERR_INTERNAL_ASSERTION(x)}function d(w){let x="",_=w.length;const E=w[0]==="-"?1:0;for(;_>=E+4;_-=3)x=`_${w.slice(_-3,_)}${x}`;return`${w.slice(0,_)}${x}`}function h(w,x,_){if(typeof x=="function")return u(x.length<=_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${x.length}).`),x(..._);const E=(x.match(/%[dfijoOs]/g)||[]).length;return u(E===_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${E}).`),_.length===0?x:e(x,..._)}function m(w,x,_){_||(_=Error);class E extends _{constructor(...k){super(h(w,x,k))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=w,E.prototype[a]=!0,l[w]=E}function g(w){const x=o+w.name;return Object.defineProperty(w,"name",{value:x}),w}function v(w,x){if(w&&x&&w!==x){if(Array.isArray(x.errors))return x.errors.push(w),x;const _=new r([x,w],x.message);return _.code=x.code,_}return w||x}class b extends Error{constructor(x="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",_);super(x,_),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(w,x,_)=>{u(typeof w=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";w.endsWith(" argument")?E+=`${w} `:E+=`"${w}" ${w.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],I=[];for(const N of x)u(typeof N=="string","All expected entries have to be of type string"),i.includes(N)?C.push(N.toLowerCase()):s.test(N)?k.push(N):(u(N!=="object",'The value "object" should be written as "Object"'),I.push(N));if(k.length>0){const N=C.indexOf("object");N!==-1&&(C.splice(C,N,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const N=C.pop();E+=`one of type ${C.join(", ")}, or ${N}`}}(k.length>0||I.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const N=k.pop();E+=`an instance of ${k.join(", ")}, or ${N}`}}I.length>0&&(E+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(E+="an "),E+=`${I[0]}`;break;case 2:E+=`one of ${I[0]} or ${I[1]}`;break;default:{const N=I.pop();E+=`one of ${I.join(", ")}, or ${N}`}}if(_==null)E+=`. Received ${_}`;else if(typeof _=="function"&&_.name)E+=`. Received function ${_.name}`;else if(typeof _=="object"){var j;if((j=_.constructor)!==null&&j!==void 0&&j.name)E+=`. Received an instance of ${_.constructor.name}`;else{const N=t(_,{depth:-1});E+=`. Received ${N}`}}else{let N=t(_,{colors:!1});N.length>25&&(N=`${N.slice(0,25)}...`),E+=`. Received type ${typeof _} (${N})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(w,x,_="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${_}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(w,x,_)=>{var E;const C=_!=null&&(E=_.constructor)!==null&&E!==void 0&&E.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${w} to be returned from the "${x}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(...w)=>{u(w.length>0,"At least one arg needs to be specified");let x;const _=w.length;switch(w=(Array.isArray(w)?w:[w]).map(E=>`"${E}"`).join(" or "),_){case 1:x+=`The ${w[0]} argument`;break;case 2:x+=`The ${w[0]} and ${w[1]} arguments`;break;default:{const E=w.pop();x+=`The ${w.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(w,x,_)=>{u(x,'Missing "range" argument');let E;if(Number.isInteger(_)&&Math.abs(_)>2**32)E=d(String(_));else if(typeof _=="bigint"){E=String(_);const C=BigInt(2)**BigInt(32);(_>C||_<-C)&&(E=d(E)),E+="n"}else E=t(_);return`The value of "${w}" is out of range. It must be ${x}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),_E={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:l},_E}var Rg={exports:{}},q6;function M0(){if(q6)return Rg.exports;q6=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Rg.exports=e,Rg.exports.AbortSignal=t,Rg.exports.default=e,Rg.exports}var sw={exports:{}},G6;function K1(){if(G6)return sw.exports;G6=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,I,j){return Function.prototype.apply.call(k,I,j)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}sw.exports=i,sw.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");s=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var I=[],j=1;j<arguments.length;j++)I.push(arguments[j]);var N=k==="error",P=this._events;if(P!==void 0)N=N&&P.error===void 0;else if(!N)return!1;if(N){var L;if(I.length>0&&(L=I[0]),L instanceof Error)throw L;var H=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw H.context=L,H}var M=P[k];if(M===void 0)return!1;if(typeof M=="function")t(M,this,I);else for(var K=M.length,U=v(M,K),j=0;j<K;++j)t(U[j],this,I);return!0};function u(C,k,I,j){var N,P,L;if(o(I),P=C._events,P===void 0?(P=C._events=Object.create(null),C._eventsCount=0):(P.newListener!==void 0&&(C.emit("newListener",k,I.listener?I.listener:I),P=C._events),L=P[k]),L===void 0)L=P[k]=I,++C._eventsCount;else if(typeof L=="function"?L=P[k]=j?[I,L]:[L,I]:j?L.unshift(I):L.push(I),N=l(C),N>0&&L.length>N&&!L.warned){L.warned=!0;var H=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");H.name="MaxListenersExceededWarning",H.emitter=C,H.type=k,H.count=L.length,r(H)}return C}i.prototype.addListener=function(k,I){return u(this,k,I,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,I){return u(this,k,I,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,I){var j={fired:!1,wrapFn:void 0,target:C,type:k,listener:I},N=d.bind(j);return N.listener=I,j.wrapFn=N,N}i.prototype.once=function(k,I){return o(I),this.on(k,h(this,k,I)),this},i.prototype.prependOnceListener=function(k,I){return o(I),this.prependListener(k,h(this,k,I)),this},i.prototype.removeListener=function(k,I){var j,N,P,L,H;if(o(I),N=this._events,N===void 0)return this;if(j=N[k],j===void 0)return this;if(j===I||j.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete N[k],N.removeListener&&this.emit("removeListener",k,j.listener||I));else if(typeof j!="function"){for(P=-1,L=j.length-1;L>=0;L--)if(j[L]===I||j[L].listener===I){H=j[L].listener,P=L;break}if(P<0)return this;P===0?j.shift():b(j,P),j.length===1&&(N[k]=j[0]),N.removeListener!==void 0&&this.emit("removeListener",k,H||I)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var I,j,N;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[k]),this;if(arguments.length===0){var P=Object.keys(j),L;for(N=0;N<P.length;++N)L=P[N],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=j[k],typeof I=="function")this.removeListener(k,I);else if(I!==void 0)for(N=I.length-1;N>=0;N--)this.removeListener(k,I[N]);return this};function m(C,k,I){var j=C._events;if(j===void 0)return[];var N=j[k];return N===void 0?[]:typeof N=="function"?I?[N.listener||N]:[N]:I?w(N):v(N,N.length)}i.prototype.listeners=function(k){return m(this,k,!0)},i.prototype.rawListeners=function(k){return m(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):g.call(C,k)},i.prototype.listenerCount=g;function g(C){var k=this._events;if(k!==void 0){var I=k[C];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,k){for(var I=new Array(k),j=0;j<k;++j)I[j]=C[j];return I}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function w(C){for(var k=new Array(C.length),I=0;I<k.length;++I)k[I]=C[I].listener||C[I];return k}function x(C,k){return new Promise(function(I,j){function N(L){C.removeListener(k,P),j(L)}function P(){typeof C.removeListener=="function"&&C.removeListener("error",N),I([].slice.call(arguments))}E(C,k,P,{once:!0}),k!=="error"&&_(C,N,{once:!0})})}function _(C,k,I){typeof C.on=="function"&&E(C,"error",k,I)}function E(C,k,I,j){if(typeof C.on=="function")j.once?C.once(k,I):C.on(k,I);else if(typeof C.addEventListener=="function")C.addEventListener(k,function N(P){j.once&&C.removeEventListener(k,N),I(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return sw.exports}var W6;function Yi(){return W6||(W6=1,function(e){const t=cd(),{format:n,inspect:r}=o9(),{codes:{ERR_INVALID_ARG_TYPE:a}}=Pi(),{kResistStopPropagation:i,AggregateError:s,SymbolDispose:o}=Qr(),l=globalThis.AbortSignal||M0().AbortSignal,u=globalThis.AbortController||M0().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(w){return w instanceof h}:function(w){return!1},g=(b,w)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(w,"AbortSignal",b)},v=(b,w)=>{if(typeof b!="function")throw new a(w,"Function",b)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(b){let w=!1;return function(...x){w||(w=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,w;return{promise:new Promise((_,E)=>{b=_,w=E}),resolve:b,reject:w}},promisify(b){return new Promise((w,x)=>{b((_,...E)=>_?x(_):w(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:m,deprecate(b,w){return b},addAbortListener:K1().addAbortListener||function(w,x){if(w===void 0)throw new a("signal","AbortSignal",w);g(w,"signal"),v(x,"listener");let _;return w.aborted?queueMicrotask(()=>x()):(w.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),_=()=>{w.removeEventListener("abort",x)}),{__proto__:null,[o](){var E;(E=_)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];const x=new u,_=()=>x.abort();return w.forEach(E=>{g(E,"signals"),E.addEventListener("abort",_,{once:!0})}),x.signal.addEventListener("abort",()=>{w.forEach(E=>E.removeEventListener("abort",_))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(wE)),wE.exports}var ow={},SE,K6;function Iy(){if(K6)return SE;K6=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=Qr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=Pi(),{normalizeEncoding:C}=Yi(),{isAsyncFunction:k,isArrayBufferView:I}=Yi().types,j={};function N(ee){return ee===(ee|0)}function P(ee){return ee===ee>>>0}const L=/^[0-7]+$/,H="must be a 32-bit unsigned integer or an octal string";function M(ee,Se,Pe){if(typeof ee>"u"&&(ee=Pe),typeof ee=="string"){if(d(L,ee)===null)throw new x(Se,ee,H);ee=l(ee,8)}return se(ee,Se),ee}const K=v((ee,Se,Pe=o,ke=s)=>{if(typeof ee!="number")throw new w(Se,"number",ee);if(!a(ee))throw new _(Se,"an integer",ee);if(ee<Pe||ee>ke)throw new _(Se,`>= ${Pe} && <= ${ke}`,ee)}),U=v((ee,Se,Pe=-2147483648,ke=2147483647)=>{if(typeof ee!="number")throw new w(Se,"number",ee);if(!a(ee))throw new _(Se,"an integer",ee);if(ee<Pe||ee>ke)throw new _(Se,`>= ${Pe} && <= ${ke}`,ee)}),se=v((ee,Se,Pe=!1)=>{if(typeof ee!="number")throw new w(Se,"number",ee);if(!a(ee))throw new _(Se,"an integer",ee);const ke=Pe?1:0,We=4294967295;if(ee<ke||ee>We)throw new _(Se,`>= ${ke} && <= ${We}`,ee)});function ie(ee,Se){if(typeof ee!="string")throw new w(Se,"string",ee)}function re(ee,Se,Pe=void 0,ke){if(typeof ee!="number")throw new w(Se,"number",ee);if(Pe!=null&&ee<Pe||ke!=null&&ee>ke||(Pe!=null||ke!=null)&&i(ee))throw new _(Se,`${Pe!=null?`>= ${Pe}`:""}${Pe!=null&&ke!=null?" && ":""}${ke!=null?`<= ${ke}`:""}`,ee)}const X=v((ee,Se,Pe)=>{if(!t(Pe,ee)){const We="must be one of: "+n(r(Pe,Nt=>typeof Nt=="string"?`'${Nt}'`:h(Nt)),", ");throw new x(Se,ee,We)}});function ne(ee,Se){if(typeof ee!="boolean")throw new w(Se,"boolean",ee)}function q(ee,Se,Pe){return ee==null||!u(ee,Se)?Pe:ee[Se]}const J=v((ee,Se,Pe=null)=>{const ke=q(Pe,"allowArray",!1),We=q(Pe,"allowFunction",!1);if(!q(Pe,"nullable",!1)&&ee===null||!ke&&e(ee)||typeof ee!="object"&&(!We||typeof ee!="function"))throw new w(Se,"Object",ee)}),Q=v((ee,Se)=>{if(ee!=null&&typeof ee!="object"&&typeof ee!="function")throw new w(Se,"a dictionary",ee)}),te=v((ee,Se,Pe=0)=>{if(!e(ee))throw new w(Se,"Array",ee);if(ee.length<Pe){const ke=`must be longer than ${Pe}`;throw new x(Se,ee,ke)}});function ue(ee,Se){te(ee,Se);for(let Pe=0;Pe<ee.length;Pe++)ie(ee[Pe],`${Se}[${Pe}]`)}function ge(ee,Se){te(ee,Se);for(let Pe=0;Pe<ee.length;Pe++)ne(ee[Pe],`${Se}[${Pe}]`)}function Ie(ee,Se){te(ee,Se);for(let Pe=0;Pe<ee.length;Pe++){const ke=ee[Pe],We=`${Se}[${Pe}]`;if(ke==null)throw new w(We,"AbortSignal",ke);nt(ke,We)}}function Ae(ee,Se="signal"){if(ie(ee,Se),j[ee]===void 0)throw j[m(ee)]!==void 0?new E(ee+" (signals must use all capital letters)"):new E(ee)}const _e=v((ee,Se="buffer")=>{if(!I(ee))throw new w(Se,["Buffer","TypedArray","DataView"],ee)});function ve(ee,Se){const Pe=C(Se),ke=ee.length;if(Pe==="hex"&&ke%2!==0)throw new x("encoding",Se,`is invalid for data of length ${ke}`)}function Be(ee,Se="Port",Pe=!0){if(typeof ee!="number"&&typeof ee!="string"||typeof ee=="string"&&g(ee).length===0||+ee!==+ee>>>0||ee>65535||ee===0&&!Pe)throw new b(Se,ee,Pe);return ee|0}const nt=v((ee,Se)=>{if(ee!==void 0&&(ee===null||typeof ee!="object"||!("aborted"in ee)))throw new w(Se,"AbortSignal",ee)}),Ve=v((ee,Se)=>{if(typeof ee!="function")throw new w(Se,"Function",ee)}),De=v((ee,Se)=>{if(typeof ee!="function"||k(ee))throw new w(Se,"Function",ee)}),$=v((ee,Se)=>{if(ee!==void 0)throw new w(Se,"undefined",ee)});function Ee(ee,Se,Pe){if(!t(Pe,ee))throw new w(Se,`('${n(Pe,"|")}')`,ee)}const Te=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function fe(ee,Se){if(typeof ee>"u"||!d(Te,ee))throw new x(Se,ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oe(ee){if(typeof ee=="string")return fe(ee,"hints"),ee;if(e(ee)){const Se=ee.length;let Pe="";if(Se===0)return Pe;for(let ke=0;ke<Se;ke++){const We=ee[ke];fe(We,"hints"),Pe+=We,ke!==Se-1&&(Pe+=", ")}return Pe}throw new x("hints",ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return SE={isInt32:N,isUint32:P,parseFileMode:M,validateArray:te,validateStringArray:ue,validateBooleanArray:ge,validateAbortSignalArray:Ie,validateBoolean:ne,validateBuffer:_e,validateDictionary:Q,validateEncoding:ve,validateFunction:Ve,validateInt32:U,validateInteger:K,validateNumber:re,validateObject:J,validateOneOf:X,validatePlainFunction:De,validatePort:Be,validateSignalName:Ae,validateString:ie,validateUint32:se,validateUndefined:$,validateUnion:Ee,validateAbortSignal:nt,validateLinkHeaderValue:oe},SE}var lw={exports:{}},EE={},Z6;function Uf(){return Z6||(Z6=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=s}catch{a=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function l(C){if(a===setTimeout)return setTimeout(C,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function u(C){if(i===clearTimeout)return clearTimeout(C);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var d=[],h=!1,m,g=-1;function v(){!h||!m||(h=!1,m.length?d=m.concat(d):g=-1,d.length&&b())}function b(){if(!h){var C=l(v);h=!0;for(var k=d.length;k;){for(m=d,d=[];++g<k;)m&&m[g].run();g=-1,k=d.length}m=null,h=!1,u(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var I=1;I<arguments.length;I++)k[I-1]=arguments[I];d.push(new w(C,k)),d.length===1&&!h&&l(b)};function w(C,k){this.fun=C,this.array=k}w.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var _=n.exports;const E=t(_);e.default=E,e.process=E}(EE)),EE}var CE,Y6;function Dc(){if(Y6)return CE;Y6=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Qr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d(q,J=!1){var Q;return!!(q&&typeof q.pipe=="function"&&typeof q.on=="function"&&(!J||typeof q.pause=="function"&&typeof q.resume=="function")&&(!q._writableState||((Q=q._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!q._writableState||q._readableState))}function h(q){var J;return!!(q&&typeof q.write=="function"&&typeof q.on=="function"&&(!q._readableState||((J=q._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function m(q){return!!(q&&typeof q.pipe=="function"&&q._readableState&&typeof q.on=="function"&&typeof q.write=="function")}function g(q){return q&&(q._readableState||q._writableState||typeof q.write=="function"&&typeof q.on=="function"||typeof q.pipe=="function"&&typeof q.on=="function")}function v(q){return!!(q&&!g(q)&&typeof q.pipeThrough=="function"&&typeof q.getReader=="function"&&typeof q.cancel=="function")}function b(q){return!!(q&&!g(q)&&typeof q.getWriter=="function"&&typeof q.abort=="function")}function w(q){return!!(q&&!g(q)&&typeof q.readable=="object"&&typeof q.writable=="object")}function x(q){return v(q)||b(q)||w(q)}function _(q,J){return q==null?!1:J===!0?typeof q[e]=="function":J===!1?typeof q[t]=="function":typeof q[e]=="function"||typeof q[t]=="function"}function E(q){if(!g(q))return null;const J=q._writableState,Q=q._readableState,te=J||Q;return!!(q.destroyed||q[r]||te!=null&&te.destroyed)}function C(q){if(!h(q))return null;if(q.writableEnded===!0)return!0;const J=q._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function k(q,J){if(!h(q))return null;if(q.writableFinished===!0)return!0;const Q=q._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||J===!1&&Q.ended===!0&&Q.length===0)}function I(q){if(!d(q))return null;if(q.readableEnded===!0)return!0;const J=q._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function j(q,J){if(!d(q))return null;const Q=q._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||J===!1&&Q.ended===!0&&Q.length===0)}function N(q){return q&&q[i]!=null?q[i]:typeof(q==null?void 0:q.readable)!="boolean"?null:E(q)?!1:d(q)&&q.readable&&!j(q)}function P(q){return q&&q[s]!=null?q[s]:typeof(q==null?void 0:q.writable)!="boolean"?null:E(q)?!1:h(q)&&q.writable&&!C(q)}function L(q,J){return g(q)?E(q)?!0:!((J==null?void 0:J.readable)!==!1&&N(q)||(J==null?void 0:J.writable)!==!1&&P(q)):null}function H(q){var J,Q;return g(q)?q.writableErrored?q.writableErrored:(J=(Q=q._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function M(q){var J,Q;return g(q)?q.readableErrored?q.readableErrored:(J=(Q=q._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function K(q){if(!g(q))return null;if(typeof q.closed=="boolean")return q.closed;const J=q._writableState,Q=q._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(J==null?void 0:J.closed)||(Q==null?void 0:Q.closed):typeof q._closed=="boolean"&&U(q)?q._closed:null}function U(q){return typeof q._closed=="boolean"&&typeof q._defaultKeepAlive=="boolean"&&typeof q._removedConnection=="boolean"&&typeof q._removedContLen=="boolean"}function se(q){return typeof q._sent100=="boolean"&&U(q)}function ie(q){var J;return typeof q._consuming=="boolean"&&typeof q._dumped=="boolean"&&((J=q.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function re(q){if(!g(q))return null;const J=q._writableState,Q=q._readableState,te=J||Q;return!te&&se(q)||!!(te&&te.autoDestroy&&te.emitClose&&te.closed===!1)}function X(q){var J;return!!(q&&((J=q[o])!==null&&J!==void 0?J:q.readableDidRead||q.readableAborted))}function ne(q){var J,Q,te,ue,ge,Ie,Ae,_e,ve,Be;return!!(q&&((J=(Q=(te=(ue=(ge=(Ie=q[a])!==null&&Ie!==void 0?Ie:q.readableErrored)!==null&&ge!==void 0?ge:q.writableErrored)!==null&&ue!==void 0?ue:(Ae=q._readableState)===null||Ae===void 0?void 0:Ae.errorEmitted)!==null&&te!==void 0?te:(_e=q._writableState)===null||_e===void 0?void 0:_e.errorEmitted)!==null&&Q!==void 0?Q:(ve=q._readableState)===null||ve===void 0?void 0:ve.errored)!==null&&J!==void 0?J:!((Be=q._writableState)===null||Be===void 0)&&Be.errored))}return CE={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:o,isErrored:ne,kIsErrored:a,isReadable:N,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:K,isDuplexNodeStream:m,isFinished:L,isIterable:_,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:I,isReadableFinished:j,isReadableErrored:M,isNodeStream:g,isWebStream:x,isWritable:P,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:H,isServerRequest:ie,isServerResponse:se,willEmitClose:re,isTransformStream:w},CE}var X6;function ud(){if(X6)return lw.exports;X6=1;const e=Uf(),{AbortError:t,codes:n}=Pi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:s}=Yi(),{validateAbortSignal:o,validateFunction:l,validateObject:u,validateBoolean:d}=Iy(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=Qr(),{isClosed:v,isReadable:b,isReadableNodeStream:w,isReadableStream:x,isReadableFinished:_,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:I,isWritableFinished:j,isWritableErrored:N,isNodeStream:P,willEmitClose:L,kIsClosedPromise:H}=Dc();let M;function K(X){return X.setHeader&&typeof X.abort=="function"}const U=()=>{};function se(X,ne,q){var J,Q;if(arguments.length===2?(q=ne,ne=i):ne==null?ne=i:u(ne,"options"),l(q,"callback"),o(ne.signal,"options.signal"),q=s(q),x(X)||I(X))return ie(X,ne,q);if(!P(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const te=(J=ne.readable)!==null&&J!==void 0?J:w(X),ue=(Q=ne.writable)!==null&&Q!==void 0?Q:k(X),ge=X._writableState,Ie=X._readableState,Ae=()=>{X.writable||Be()};let _e=L(X)&&w(X)===te&&k(X)===ue,ve=j(X,!1);const Be=()=>{ve=!0,X.destroyed&&(_e=!1),!(_e&&(!X.readable||te))&&(!te||nt)&&q.call(X)};let nt=_(X,!1);const Ve=()=>{nt=!0,X.destroyed&&(_e=!1),!(_e&&(!X.writable||ue))&&(!ue||ve)&&q.call(X)},De=ee=>{q.call(X,ee)};let $=v(X);const Ee=()=>{$=!0;const ee=N(X)||E(X);if(ee&&typeof ee!="boolean")return q.call(X,ee);if(te&&!nt&&w(X,!0)&&!_(X,!1))return q.call(X,new a);if(ue&&!ve&&!j(X,!1))return q.call(X,new a);q.call(X)},Te=()=>{$=!0;const ee=N(X)||E(X);if(ee&&typeof ee!="boolean")return q.call(X,ee);q.call(X)},fe=()=>{X.req.on("finish",Be)};K(X)?(X.on("complete",Be),_e||X.on("abort",Ee),X.req?fe():X.on("request",fe)):ue&&!ge&&(X.on("end",Ae),X.on("close",Ae)),!_e&&typeof X.aborted=="boolean"&&X.on("aborted",Ee),X.on("end",Ve),X.on("finish",Be),ne.error!==!1&&X.on("error",De),X.on("close",Ee),$?e.nextTick(Ee):ge!=null&&ge.errorEmitted||Ie!=null&&Ie.errorEmitted?_e||e.nextTick(Te):(!te&&(!_e||b(X))&&(ve||C(X)===!1)||!ue&&(!_e||C(X))&&(nt||b(X)===!1)||Ie&&X.req&&X.aborted)&&e.nextTick(Te);const oe=()=>{q=U,X.removeListener("aborted",Ee),X.removeListener("complete",Be),X.removeListener("abort",Ee),X.removeListener("request",fe),X.req&&X.req.removeListener("finish",Be),X.removeListener("end",Ae),X.removeListener("close",Ae),X.removeListener("finish",Be),X.removeListener("end",Ve),X.removeListener("error",De),X.removeListener("close",Ee)};if(ne.signal&&!$){const ee=()=>{const Se=q;oe(),Se.call(X,new t(void 0,{cause:ne.signal.reason}))};if(ne.signal.aborted)e.nextTick(ee);else{M=M||Yi().addAbortListener;const Se=M(ne.signal,ee),Pe=q;q=s((...ke)=>{Se[g](),Pe.apply(X,ke)})}}return oe}function ie(X,ne,q){let J=!1,Q=U;if(ne.signal)if(Q=()=>{J=!0,q.call(X,new t(void 0,{cause:ne.signal.reason}))},ne.signal.aborted)e.nextTick(Q);else{M=M||Yi().addAbortListener;const ue=M(ne.signal,Q),ge=q;q=s((...Ie)=>{ue[g](),ge.apply(X,Ie)})}const te=(...ue)=>{J||e.nextTick(()=>q.apply(X,ue))};return m(X[H].promise,te,te),U}function re(X,ne){var q;let J=!1;return ne===null&&(ne=i),(q=ne)!==null&&q!==void 0&&q.cleanup&&(d(ne.cleanup,"cleanup"),J=ne.cleanup),new h((Q,te)=>{const ue=se(X,ne,ge=>{J&&ue(),ge?te(ge):Q()})})}return lw.exports=se,lw.exports.finished=re,lw.exports}var TE,J6;function Jp(){if(J6)return TE;J6=1;const e=Uf(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=Pi(),{Symbol:a}=Qr(),{kIsDestroyed:i,isDestroyed:s,isFinished:o,isServerRequest:l}=Dc(),u=a("kDestroy"),d=a("kConstruct");function h(L,H,M){L&&(L.stack,H&&!H.errored&&(H.errored=L),M&&!M.errored&&(M.errored=L))}function m(L,H){const M=this._readableState,K=this._writableState,U=K||M;return K!=null&&K.destroyed||M!=null&&M.destroyed?(typeof H=="function"&&H(),this):(h(L,K,M),K&&(K.destroyed=!0),M&&(M.destroyed=!0),U.constructed?g(this,L,H):this.once(u,function(se){g(this,t(se,L),H)}),this)}function g(L,H,M){let K=!1;function U(se){if(K)return;K=!0;const ie=L._readableState,re=L._writableState;h(se,re,ie),re&&(re.closed=!0),ie&&(ie.closed=!0),typeof M=="function"&&M(se),se?e.nextTick(v,L,se):e.nextTick(b,L)}try{L._destroy(H||null,U)}catch(se){U(se)}}function v(L,H){w(L,H),b(L)}function b(L){const H=L._readableState,M=L._writableState;M&&(M.closeEmitted=!0),H&&(H.closeEmitted=!0),(M!=null&&M.emitClose||H!=null&&H.emitClose)&&L.emit("close")}function w(L,H){const M=L._readableState,K=L._writableState;K!=null&&K.errorEmitted||M!=null&&M.errorEmitted||(K&&(K.errorEmitted=!0),M&&(M.errorEmitted=!0),L.emit("error",H))}function x(){const L=this._readableState,H=this._writableState;L&&(L.constructed=!0,L.closed=!1,L.closeEmitted=!1,L.destroyed=!1,L.errored=null,L.errorEmitted=!1,L.reading=!1,L.ended=L.readable===!1,L.endEmitted=L.readable===!1),H&&(H.constructed=!0,H.destroyed=!1,H.closed=!1,H.closeEmitted=!1,H.errored=null,H.errorEmitted=!1,H.finalCalled=!1,H.prefinished=!1,H.ended=H.writable===!1,H.ending=H.writable===!1,H.finished=H.writable===!1)}function _(L,H,M){const K=L._readableState,U=L._writableState;if(U!=null&&U.destroyed||K!=null&&K.destroyed)return this;K!=null&&K.autoDestroy||U!=null&&U.autoDestroy?L.destroy(H):H&&(H.stack,U&&!U.errored&&(U.errored=H),K&&!K.errored&&(K.errored=H),M?e.nextTick(w,L,H):w(L,H))}function E(L,H){if(typeof L._construct!="function")return;const M=L._readableState,K=L._writableState;M&&(M.constructed=!1),K&&(K.constructed=!1),L.once(d,H),!(L.listenerCount(d)>1)&&e.nextTick(C,L)}function C(L){let H=!1;function M(K){if(H){_(L,K??new n);return}H=!0;const U=L._readableState,se=L._writableState,ie=se||U;U&&(U.constructed=!0),se&&(se.constructed=!0),ie.destroyed?L.emit(u,K):K?_(L,K,!0):e.nextTick(k,L)}try{L._construct(K=>{e.nextTick(M,K)})}catch(K){e.nextTick(M,K)}}function k(L){L.emit(d)}function I(L){return(L==null?void 0:L.setHeader)&&typeof L.abort=="function"}function j(L){L.emit("close")}function N(L,H){L.emit("error",H),e.nextTick(j,L)}function P(L,H){!L||s(L)||(!H&&!o(L)&&(H=new r),l(L)?(L.socket=null,L.destroy(H)):I(L)?L.abort():I(L.req)?L.req.abort():typeof L.destroy=="function"?L.destroy(H):typeof L.close=="function"?L.close():H?e.nextTick(N,L,H):e.nextTick(j,L),L.destroyed||(L[i]=!0))}return TE={construct:E,destroyer:P,destroy:m,undestroy:x,errorOrDestroy:_},TE}var kE,Q6;function cN(){if(Q6)return kE;Q6=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Qr(),{EventEmitter:n}=K1();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,s){const o=this;function l(b){i.writable&&i.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function u(){o.readable&&o.resume&&o.resume()}i.on("drain",u),!i._isStdio&&(!s||s.end!==!1)&&(o.on("end",h),o.on("close",m));let d=!1;function h(){d||(d=!0,i.end())}function m(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(o,"error",g),a(i,"error",g);function v(){o.removeListener("data",l),i.removeListener("drain",u),o.removeListener("end",h),o.removeListener("close",m),o.removeListener("error",g),i.removeListener("error",g),o.removeListener("end",v),o.removeListener("close",v),i.removeListener("close",v)}return o.on("end",v),o.on("close",v),i.on("close",v),i.emit("pipe",o),i};function a(i,s,o){if(typeof i.prependListener=="function")return i.prependListener(s,o);!i._events||!i._events[s]?i.on(s,o):e(i._events[s])?i._events[s].unshift(o):i._events[s]=[o,i._events[s]]}return kE={Stream:r,prependListener:a},kE}var AE={exports:{}},eD;function Z1(){return eD||(eD=1,function(e){const{SymbolDispose:t}=Qr(),{AbortError:n,codes:r}=Pi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:s}=Dc(),o=ud(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new l(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(d(m,"signal"),!a(g)&&!i(g))throw new l("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[s](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{u=u||Yi().addAbortListener;const v=u(h,g);o(m,v[t])}return m}}(AE)),AE.exports}var NE,tD;function ose(){if(tD)return NE;tD=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Qr(),{Buffer:a}=cd(),{inspect:i}=Yi();return NE=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=o+l.data;return u}concat(o){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(o>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(o,l){const u=this.head.data;if(o<u.length){const d=u.slice(0,o);return this.head.data=u.slice(o),d}return o===u.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",u=this.head,d=0;do{const h=u.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(h,0,o),this.head=u,u.data=e(h,o));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(o){const l=a.allocUnsafe(o),u=o;let d=this.head,h=0;do{const m=d.data;if(o>m.length)n(l,m,u-o),o-=m.length;else{o===m.length?(n(l,m,u-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(m.buffer,m.byteOffset,o),u-o),this.head=d,d.data=m.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return i(this,{...l,depth:0,customInspect:!1})}},NE}var RE,nD;function Y1(){if(nD)return RE;nD=1;const{MathFloor:e,NumberIsInteger:t}=Qr(),{validateInteger:n}=Iy(),{ERR_INVALID_ARG_VALUE:r}=Pi().codes;let a=16*1024,i=16;function s(d,h,m){return d.highWaterMark!=null?d.highWaterMark:h?d[m]:null}function o(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function u(d,h,m,g){const v=s(h,g,m);if(v!=null){if(!t(v)||v<0){const b=g?`options.${m}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return o(d.objectMode)}return RE={getHighWaterMark:u,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},RE}var IE={},cw={exports:{}},rD;function uN(){return rD||(rD=1,function(e,t){var n=cd(),r=n.Buffer;function a(s,o){for(var l in s)o[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(s,o,l){return r(s,o,l)}a(r,i),i.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,o,l)},i.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return o!==void 0?typeof l=="string"?u.fill(o,l):u.fill(o):u.fill(0),u},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(cw,cw.exports)),cw.exports}var aD;function lse(){if(aD)return IE;aD=1;var e=uN().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var _;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(_)return;x=(""+x).toLowerCase(),_=!0}}function r(x){var _=n(x);if(typeof _!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return _||x}IE.StringDecoder=a;function a(x){this.encoding=r(x);var _;switch(this.encoding){case"utf16le":this.text=h,this.end=m,_=4;break;case"utf8":this.fillLast=l,_=4;break;case"base64":this.text=g,this.end=v,_=3;break;default:this.write=b,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}a.prototype.write=function(x){if(x.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(x),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?_?_+this.text(x,E):this.text(x,E):_||""},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function s(x,_,E){var C=_.length-1;if(C<E)return 0;var k=i(_[C]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(_[C]),k>=0?(k>0&&(x.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(_[C]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function o(x,_,E){if((_[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return x.lastNeed=2,""}}function l(x){var _=this.lastTotal-this.lastNeed,E=o(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,_,0,x.length),this.lastNeed-=x.length}function u(x,_){var E=s(this,x,_);if(!this.lastNeed)return x.toString("utf8",_);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",_,C)}function d(x){var _=x&&x.length?this.write(x):"";return this.lastNeed?_+"":_}function h(x,_){if((x.length-_)%2===0){var E=x.toString("utf16le",_);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",_,x.length-1)}function m(x){var _=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function g(x,_){var E=(x.length-_)%3;return E===0?x.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",_,x.length-E))}function v(x){var _=x&&x.length?this.write(x):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function b(x){return x.toString(this.encoding)}function w(x){return x&&x.length?this.write(x):""}return IE}var jE,iD;function l9(){if(iD)return jE;iD=1;const e=Uf(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Qr(),{Buffer:a}=cd(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:s}=Pi().codes;function o(l,u,d){let h;if(typeof u=="string"||u instanceof a)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let m;if(u&&u[n])m=!0,h=u[n]();else if(u&&u[r])m=!1,h=u[r]();else throw new i("iterable",["Iterable"],u);const g=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;g._read=function(){v||(v=!0,w())},g._destroy=function(x,_){t(b(x),()=>e.nextTick(_,x),E=>e.nextTick(_,E||x))};async function b(x){const _=x!=null,E=typeof h.throw=="function";if(_&&E){const{value:C,done:k}=await h.throw(x);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function w(){for(;;){try{const{value:x,done:_}=m?await h.next():h.next();if(_)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new s;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return jE=o,jE}var DE,sD;function X1(){if(sD)return DE;sD=1;const e=Uf(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:m}=Qr();DE=ke,ke.ReadableState=Pe;const{EventEmitter:g}=K1(),{Stream:v,prependListener:b}=cN(),{Buffer:w}=cd(),{addAbortSignal:x}=Z1(),_=ud();let E=Yi().debuglog("stream",me=>{E=me});const C=ose(),k=Jp(),{getHighWaterMark:I,getDefaultHighWaterMark:j}=Y1(),{aggregateTwoErrors:N,codes:{ERR_INVALID_ARG_TYPE:P,ERR_METHOD_NOT_IMPLEMENTED:L,ERR_OUT_OF_RANGE:H,ERR_STREAM_PUSH_AFTER_EOF:M,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:K},AbortError:U}=Pi(),{validateObject:se}=Iy(),ie=m("kPaused"),{StringDecoder:re}=lse(),X=l9();o(ke.prototype,v.prototype),o(ke,v);const ne=()=>{},{errorOrDestroy:q}=k,J=1,Q=2,te=4,ue=8,ge=16,Ie=32,Ae=64,_e=128,ve=256,Be=512,nt=1024,Ve=2048,De=4096,$=8192,Ee=16384,Te=32768,fe=65536,oe=1<<17,ee=1<<18;function Se(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(G){G?this.state|=me:this.state&=~me}}}i(Pe.prototype,{objectMode:Se(J),ended:Se(Q),endEmitted:Se(te),reading:Se(ue),constructed:Se(ge),sync:Se(Ie),needReadable:Se(Ae),emittedReadable:Se(_e),readableListening:Se(ve),resumeScheduled:Se(Be),errorEmitted:Se(nt),emitClose:Se(Ve),autoDestroy:Se(De),destroyed:Se($),closed:Se(Ee),closeEmitted:Se(Te),multiAwaitDrain:Se(fe),readingMore:Se(oe),dataEmitted:Se(ee)});function Pe(me,G,V){typeof V!="boolean"&&(V=G instanceof Ec()),this.state=Ve|De|ge|Ie,me&&me.objectMode&&(this.state|=J),V&&me&&me.readableObjectMode&&(this.state|=J),this.highWaterMark=me?I(this,me,"readableHighWaterMark",V):j(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ie]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new re(me.encoding),this.encoding=me.encoding)}function ke(me){if(!(this instanceof ke))return new ke(me);const G=this instanceof Ec();this._readableState=new Pe(me,this,G),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!G&&x(me.signal,this)),v.call(this,me),k.construct(this,()=>{this._readableState.needReadable&&D(this,this._readableState)})}ke.prototype.destroy=k.destroy,ke.prototype._undestroy=k.undestroy,ke.prototype._destroy=function(me,G){G(me)},ke.prototype[g.captureRejectionSymbol]=function(me){this.destroy(me)},ke.prototype[d]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new U,this.destroy(me)),new l((G,V)=>_(this,Z=>Z&&Z!==me?V(Z):G(null)))},ke.prototype.push=function(me,G){return We(this,me,G,!1)},ke.prototype.unshift=function(me,G){return We(this,me,G,!0)};function We(me,G,V,Z){E("readableAddChunk",G);const pe=me._readableState;let Re;if((pe.state&J)===0&&(typeof G=="string"?(V=V||pe.defaultEncoding,pe.encoding!==V&&(Z&&pe.encoding?G=w.from(G,V).toString(pe.encoding):(G=w.from(G,V),V=""))):G instanceof w?V="":v._isUint8Array(G)?(G=v._uint8ArrayToBuffer(G),V=""):G!=null&&(Re=new P("chunk",["string","Buffer","Uint8Array"],G))),Re)q(me,Re);else if(G===null)pe.state&=-9,Mt(me,pe);else if((pe.state&J)!==0||G&&G.length>0)if(Z)if((pe.state&te)!==0)q(me,new K);else{if(pe.destroyed||pe.errored)return!1;Nt(me,pe,G,!0)}else if(pe.ended)q(me,new M);else{if(pe.destroyed||pe.errored)return!1;pe.state&=-9,pe.decoder&&!V?(G=pe.decoder.write(G),pe.objectMode||G.length!==0?Nt(me,pe,G,!1):D(me,pe)):Nt(me,pe,G,!1)}else Z||(pe.state&=-9,D(me,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function Nt(me,G,V,Z){G.flowing&&G.length===0&&!G.sync&&me.listenerCount("data")>0?((G.state&fe)!==0?G.awaitDrainWriters.clear():G.awaitDrainWriters=null,G.dataEmitted=!0,me.emit("data",V)):(G.length+=G.objectMode?1:V.length,Z?G.buffer.unshift(V):G.buffer.push(V),(G.state&Ae)!==0&&Yt(me)),D(me,G)}ke.prototype.isPaused=function(){const me=this._readableState;return me[ie]===!0||me.flowing===!1},ke.prototype.setEncoding=function(me){const G=new re(me);this._readableState.decoder=G,this._readableState.encoding=this._readableState.decoder.encoding;const V=this._readableState.buffer;let Z="";for(const pe of V)Z+=G.write(pe);return V.clear(),Z!==""&&V.push(Z),this._readableState.length=Z.length,this};const it=1073741824;function Et(me){if(me>it)throw new H("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function Ft(me,G){return me<=0||G.length===0&&G.ended?0:(G.state&J)!==0?1:r(me)?G.flowing&&G.length?G.buffer.first().length:G.length:me<=G.length?me:G.ended?G.length:0}ke.prototype.read=function(me){E("read",me),me===void 0?me=NaN:n(me)||(me=a(me,10));const G=this._readableState,V=me;if(me>G.highWaterMark&&(G.highWaterMark=Et(me)),me!==0&&(G.state&=-129),me===0&&G.needReadable&&((G.highWaterMark!==0?G.length>=G.highWaterMark:G.length>0)||G.ended))return E("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?tt(this):Yt(this),null;if(me=Ft(me,G),me===0&&G.ended)return G.length===0&&tt(this),null;let Z=(G.state&Ae)!==0;if(E("need readable",Z),(G.length===0||G.length-me<G.highWaterMark)&&(Z=!0,E("length less than watermark",Z)),G.ended||G.reading||G.destroyed||G.errored||!G.constructed)Z=!1,E("reading, ended or constructing",Z);else if(Z){E("do read"),G.state|=ue|Ie,G.length===0&&(G.state|=Ae);try{this._read(G.highWaterMark)}catch(Re){q(this,Re)}G.state&=-33,G.reading||(me=Ft(V,G))}let pe;return me>0?pe=Le(me,G):pe=null,pe===null?(G.needReadable=G.length<=G.highWaterMark,me=0):(G.length-=me,G.multiAwaitDrain?G.awaitDrainWriters.clear():G.awaitDrainWriters=null),G.length===0&&(G.ended||(G.needReadable=!0),V!==me&&G.ended&&tt(this)),pe!==null&&!G.errorEmitted&&!G.closeEmitted&&(G.dataEmitted=!0,this.emit("data",pe)),pe};function Mt(me,G){if(E("onEofChunk"),!G.ended){if(G.decoder){const V=G.decoder.end();V&&V.length&&(G.buffer.push(V),G.length+=G.objectMode?1:V.length)}G.ended=!0,G.sync?Yt(me):(G.needReadable=!1,G.emittedReadable=!0,be(me))}}function Yt(me){const G=me._readableState;E("emitReadable",G.needReadable,G.emittedReadable),G.needReadable=!1,G.emittedReadable||(E("emitReadable",G.flowing),G.emittedReadable=!0,e.nextTick(be,me))}function be(me){const G=me._readableState;E("emitReadable_",G.destroyed,G.length,G.ended),!G.destroyed&&!G.errored&&(G.length||G.ended)&&(me.emit("readable"),G.emittedReadable=!1),G.needReadable=!G.flowing&&!G.ended&&G.length<=G.highWaterMark,ft(me)}function D(me,G){!G.readingMore&&G.constructed&&(G.readingMore=!0,e.nextTick(W,me,G))}function W(me,G){for(;!G.reading&&!G.ended&&(G.length<G.highWaterMark||G.flowing&&G.length===0);){const V=G.length;if(E("maybeReadMore read 0"),me.read(0),V===G.length)break}G.readingMore=!1}ke.prototype._read=function(me){throw new L("_read()")},ke.prototype.pipe=function(me,G){const V=this,Z=this._readableState;Z.pipes.length===1&&(Z.multiAwaitDrain||(Z.multiAwaitDrain=!0,Z.awaitDrainWriters=new u(Z.awaitDrainWriters?[Z.awaitDrainWriters]:[]))),Z.pipes.push(me),E("pipe count=%d opts=%j",Z.pipes.length,G);const Re=(!G||G.end!==!1)&&me!==e.stdout&&me!==e.stderr?pt:Er;Z.endEmitted?e.nextTick(Re):V.once("end",Re),me.on("unpipe",Ue);function Ue($n,_i){E("onunpipe"),$n===V&&_i&&_i.hasUnpiped===!1&&(_i.hasUnpiped=!0,Rt())}function pt(){E("onend"),me.end()}let Zt,ut=!1;function Rt(){E("cleanup"),me.removeListener("close",Xn),me.removeListener("finish",Sr),Zt&&me.removeListener("drain",Zt),me.removeListener("error",In),me.removeListener("unpipe",Ue),V.removeListener("end",pt),V.removeListener("end",Er),V.removeListener("data",en),ut=!0,Zt&&Z.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Zt()}function Lt(){ut||(Z.pipes.length===1&&Z.pipes[0]===me?(E("false write response, pause",0),Z.awaitDrainWriters=me,Z.multiAwaitDrain=!1):Z.pipes.length>1&&Z.pipes.includes(me)&&(E("false write response, pause",Z.awaitDrainWriters.size),Z.awaitDrainWriters.add(me)),V.pause()),Zt||(Zt=he(V,me),me.on("drain",Zt))}V.on("data",en);function en($n){E("ondata");const _i=me.write($n);E("dest.write",_i),_i===!1&&Lt()}function In($n){if(E("onerror",$n),Er(),me.removeListener("error",In),me.listenerCount("error")===0){const _i=me._writableState||me._readableState;_i&&!_i.errorEmitted?q(me,$n):me.emit("error",$n)}}b(me,"error",In);function Xn(){me.removeListener("finish",Sr),Er()}me.once("close",Xn);function Sr(){E("onfinish"),me.removeListener("close",Xn),Er()}me.once("finish",Sr);function Er(){E("unpipe"),V.unpipe(me)}return me.emit("pipe",V),me.writableNeedDrain===!0?Lt():Z.flowing||(E("pipe resume"),V.resume()),me};function he(me,G){return function(){const Z=me._readableState;Z.awaitDrainWriters===G?(E("pipeOnDrain",1),Z.awaitDrainWriters=null):Z.multiAwaitDrain&&(E("pipeOnDrain",Z.awaitDrainWriters.size),Z.awaitDrainWriters.delete(G)),(!Z.awaitDrainWriters||Z.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}ke.prototype.unpipe=function(me){const G=this._readableState,V={hasUnpiped:!1};if(G.pipes.length===0)return this;if(!me){const pe=G.pipes;G.pipes=[],this.pause();for(let Re=0;Re<pe.length;Re++)pe[Re].emit("unpipe",this,{hasUnpiped:!1});return this}const Z=t(G.pipes,me);return Z===-1?this:(G.pipes.splice(Z,1),G.pipes.length===0&&this.pause(),me.emit("unpipe",this,V),this)},ke.prototype.on=function(me,G){const V=v.prototype.on.call(this,me,G),Z=this._readableState;return me==="data"?(Z.readableListening=this.listenerCount("readable")>0,Z.flowing!==!1&&this.resume()):me==="readable"&&!Z.endEmitted&&!Z.readableListening&&(Z.readableListening=Z.needReadable=!0,Z.flowing=!1,Z.emittedReadable=!1,E("on readable",Z.length,Z.reading),Z.length?Yt(this):Z.reading||e.nextTick(we,this)),V},ke.prototype.addListener=ke.prototype.on,ke.prototype.removeListener=function(me,G){const V=v.prototype.removeListener.call(this,me,G);return me==="readable"&&e.nextTick(je,this),V},ke.prototype.off=ke.prototype.removeListener,ke.prototype.removeAllListeners=function(me){const G=v.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(je,this),G};function je(me){const G=me._readableState;G.readableListening=me.listenerCount("readable")>0,G.resumeScheduled&&G[ie]===!1?G.flowing=!0:me.listenerCount("data")>0?me.resume():G.readableListening||(G.flowing=null)}function we(me){E("readable nexttick read 0"),me.read(0)}ke.prototype.resume=function(){const me=this._readableState;return me.flowing||(E("resume"),me.flowing=!me.readableListening,Ne(this,me)),me[ie]=!1,this};function Ne(me,G){G.resumeScheduled||(G.resumeScheduled=!0,e.nextTick(ce,me,G))}function ce(me,G){E("resume",G.reading),G.reading||me.read(0),G.resumeScheduled=!1,me.emit("resume"),ft(me),G.flowing&&!G.reading&&me.read(0)}ke.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ie]=!0,this};function ft(me){const G=me._readableState;for(E("flow",G.flowing);G.flowing&&me.read()!==null;);}ke.prototype.wrap=function(me){let G=!1;me.on("data",Z=>{!this.push(Z)&&me.pause&&(G=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",Z=>{q(this,Z)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{G&&me.resume&&(G=!1,me.resume())};const V=s(me);for(let Z=1;Z<V.length;Z++){const pe=V[Z];this[pe]===void 0&&typeof me[pe]=="function"&&(this[pe]=me[pe].bind(me))}return this},ke.prototype[h]=function(){return vt(this)},ke.prototype.iterator=function(me){return me!==void 0&&se(me,"options"),vt(this,me)};function vt(me,G){typeof me.read!="function"&&(me=ke.wrap(me,{objectMode:!0}));const V=F(me,G);return V.stream=me,V}async function*F(me,G){let V=ne;function Z(Ue){this===me?(V(),V=ne):V=Ue}me.on("readable",Z);let pe;const Re=_(me,{writable:!1},Ue=>{pe=Ue?N(pe,Ue):null,V(),V=ne});try{for(;;){const Ue=me.destroyed?null:me.read();if(Ue!==null)yield Ue;else{if(pe)throw pe;if(pe===null)return;await new l(Z)}}}catch(Ue){throw pe=N(pe,Ue),pe}finally{(pe||(G==null?void 0:G.destroyOnReturn)!==!1)&&(pe===void 0||me._readableState.autoDestroy)?k.destroyer(me,null):(me.off("readable",Z),Re())}}i(ke.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Pe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ie]!==!1},set(me){this[ie]=!!me}}}),ke._fromList=Le;function Le(me,G){if(G.length===0)return null;let V;return G.objectMode?V=G.buffer.shift():!me||me>=G.length?(G.decoder?V=G.buffer.join(""):G.buffer.length===1?V=G.buffer.first():V=G.buffer.concat(G.length),G.buffer.clear()):V=G.buffer.consume(me,G.decoder),V}function tt(me){const G=me._readableState;E("endReadable",G.endEmitted),G.endEmitted||(G.ended=!0,e.nextTick(ye,G,me))}function ye(me,G){if(E("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,G.emit("end"),G.writable&&G.allowHalfOpen===!1)e.nextTick(Me,G);else if(me.autoDestroy){const V=G._writableState;(!V||V.autoDestroy&&(V.finished||V.writable===!1))&&G.destroy()}}}function Me(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}ke.from=function(me,G){return X(ke,me,G)};let Ke;function Dt(){return Ke===void 0&&(Ke={}),Ke}return ke.fromWeb=function(me,G){return Dt().newStreamReadableFromReadableStream(me,G)},ke.toWeb=function(me,G){return Dt().newReadableStreamFromStreamReadable(me,G)},ke.wrap=function(me,G){var V,Z;return new ke({objectMode:(V=(Z=me.readableObjectMode)!==null&&Z!==void 0?Z:me.objectMode)!==null&&V!==void 0?V:!0,...G,destroy(pe,Re){k.destroyer(me,pe),Re(pe)}}).wrap(me)},DE}var ME,oD;function dN(){if(oD)return ME;oD=1;const e=Uf(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:u}=Qr();ME=se,se.WritableState=K;const{EventEmitter:d}=K1(),h=cN().Stream,{Buffer:m}=cd(),g=Jp(),{addAbortSignal:v}=Z1(),{getHighWaterMark:b,getDefaultHighWaterMark:w}=Y1(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:j,ERR_STREAM_WRITE_AFTER_END:N,ERR_UNKNOWN_ENCODING:P}=Pi().codes,{errorOrDestroy:L}=g;s(se.prototype,h.prototype),s(se,h);function H(){}const M=l("kOnFinished");function K(De,$,Ee){typeof Ee!="boolean"&&(Ee=$ instanceof Ec()),this.objectMode=!!(De&&De.objectMode),Ee&&(this.objectMode=this.objectMode||!!(De&&De.writableObjectMode)),this.highWaterMark=De?b(this,De,"writableHighWaterMark",Ee):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Te=!!(De&&De.decodeStrings===!1);this.decodeStrings=!Te,this.defaultEncoding=De&&De.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=q.bind(void 0,$),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,U(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!De||De.emitClose!==!1,this.autoDestroy=!De||De.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[M]=[]}function U(De){De.buffered=[],De.bufferedIndex=0,De.allBuffers=!0,De.allNoop=!0}K.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(K.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function se(De){const $=this instanceof Ec();if(!$&&!r(se,this))return new se(De);this._writableState=new K(De,this,$),De&&(typeof De.write=="function"&&(this._write=De.write),typeof De.writev=="function"&&(this._writev=De.writev),typeof De.destroy=="function"&&(this._destroy=De.destroy),typeof De.final=="function"&&(this._final=De.final),typeof De.construct=="function"&&(this._construct=De.construct),De.signal&&v(De.signal,this)),h.call(this,De),g.construct(this,()=>{const Ee=this._writableState;Ee.writing||ue(this,Ee),_e(this,Ee)})}a(se,u,{__proto__:null,value:function(De){return r(this,De)?!0:this!==se?!1:De&&De._writableState instanceof K}}),se.prototype.pipe=function(){L(this,new C)};function ie(De,$,Ee,Te){const fe=De._writableState;if(typeof Ee=="function")Te=Ee,Ee=fe.defaultEncoding;else{if(!Ee)Ee=fe.defaultEncoding;else if(Ee!=="buffer"&&!m.isEncoding(Ee))throw new P(Ee);typeof Te!="function"&&(Te=H)}if($===null)throw new j;if(!fe.objectMode)if(typeof $=="string")fe.decodeStrings!==!1&&($=m.from($,Ee),Ee="buffer");else if($ instanceof m)Ee="buffer";else if(h._isUint8Array($))$=h._uint8ArrayToBuffer($),Ee="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],$);let oe;return fe.ending?oe=new N:fe.destroyed&&(oe=new k("write")),oe?(e.nextTick(Te,oe),L(De,oe,!0),oe):(fe.pendingcb++,re(De,fe,$,Ee,Te))}se.prototype.write=function(De,$,Ee){return ie(this,De,$,Ee)===!0},se.prototype.cork=function(){this._writableState.corked++},se.prototype.uncork=function(){const De=this._writableState;De.corked&&(De.corked--,De.writing||ue(this,De))},se.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=o($)),!m.isEncoding($))throw new P($);return this._writableState.defaultEncoding=$,this};function re(De,$,Ee,Te,fe){const oe=$.objectMode?1:Ee.length;$.length+=oe;const ee=$.length<$.highWaterMark;return ee||($.needDrain=!0),$.writing||$.corked||$.errored||!$.constructed?($.buffered.push({chunk:Ee,encoding:Te,callback:fe}),$.allBuffers&&Te!=="buffer"&&($.allBuffers=!1),$.allNoop&&fe!==H&&($.allNoop=!1)):($.writelen=oe,$.writecb=fe,$.writing=!0,$.sync=!0,De._write(Ee,Te,$.onwrite),$.sync=!1),ee&&!$.errored&&!$.destroyed}function X(De,$,Ee,Te,fe,oe,ee){$.writelen=Te,$.writecb=ee,$.writing=!0,$.sync=!0,$.destroyed?$.onwrite(new k("write")):Ee?De._writev(fe,$.onwrite):De._write(fe,oe,$.onwrite),$.sync=!1}function ne(De,$,Ee,Te){--$.pendingcb,Te(Ee),te($),L(De,Ee)}function q(De,$){const Ee=De._writableState,Te=Ee.sync,fe=Ee.writecb;if(typeof fe!="function"){L(De,new E);return}Ee.writing=!1,Ee.writecb=null,Ee.length-=Ee.writelen,Ee.writelen=0,$?($.stack,Ee.errored||(Ee.errored=$),De._readableState&&!De._readableState.errored&&(De._readableState.errored=$),Te?e.nextTick(ne,De,Ee,$,fe):ne(De,Ee,$,fe)):(Ee.buffered.length>Ee.bufferedIndex&&ue(De,Ee),Te?Ee.afterWriteTickInfo!==null&&Ee.afterWriteTickInfo.cb===fe?Ee.afterWriteTickInfo.count++:(Ee.afterWriteTickInfo={count:1,cb:fe,stream:De,state:Ee},e.nextTick(J,Ee.afterWriteTickInfo)):Q(De,Ee,1,fe))}function J({stream:De,state:$,count:Ee,cb:Te}){return $.afterWriteTickInfo=null,Q(De,$,Ee,Te)}function Q(De,$,Ee,Te){for(!$.ending&&!De.destroyed&&$.length===0&&$.needDrain&&($.needDrain=!1,De.emit("drain"));Ee-- >0;)$.pendingcb--,Te();$.destroyed&&te($),_e(De,$)}function te(De){if(De.writing)return;for(let fe=De.bufferedIndex;fe<De.buffered.length;++fe){var $;const{chunk:oe,callback:ee}=De.buffered[fe],Se=De.objectMode?1:oe.length;De.length-=Se,ee(($=De.errored)!==null&&$!==void 0?$:new k("write"))}const Ee=De[M].splice(0);for(let fe=0;fe<Ee.length;fe++){var Te;Ee[fe]((Te=De.errored)!==null&&Te!==void 0?Te:new k("end"))}U(De)}function ue(De,$){if($.corked||$.bufferProcessing||$.destroyed||!$.constructed)return;const{buffered:Ee,bufferedIndex:Te,objectMode:fe}=$,oe=Ee.length-Te;if(!oe)return;let ee=Te;if($.bufferProcessing=!0,oe>1&&De._writev){$.pendingcb-=oe-1;const Se=$.allNoop?H:ke=>{for(let We=ee;We<Ee.length;++We)Ee[We].callback(ke)},Pe=$.allNoop&&ee===0?Ee:t(Ee,ee);Pe.allBuffers=$.allBuffers,X(De,$,!0,$.length,Pe,"",Se),U($)}else{do{const{chunk:Se,encoding:Pe,callback:ke}=Ee[ee];Ee[ee++]=null;const We=fe?1:Se.length;X(De,$,!1,We,Se,Pe,ke)}while(ee<Ee.length&&!$.writing);ee===Ee.length?U($):ee>256?(Ee.splice(0,ee),$.bufferedIndex=0):$.bufferedIndex=ee}$.bufferProcessing=!1}se.prototype._write=function(De,$,Ee){if(this._writev)this._writev([{chunk:De,encoding:$}],Ee);else throw new _("_write()")},se.prototype._writev=null,se.prototype.end=function(De,$,Ee){const Te=this._writableState;typeof De=="function"?(Ee=De,De=null,$=null):typeof $=="function"&&(Ee=$,$=null);let fe;if(De!=null){const oe=ie(this,De,$);oe instanceof n&&(fe=oe)}return Te.corked&&(Te.corked=1,this.uncork()),fe||(!Te.errored&&!Te.ending?(Te.ending=!0,_e(this,Te,!0),Te.ended=!0):Te.finished?fe=new I("end"):Te.destroyed&&(fe=new k("end"))),typeof Ee=="function"&&(fe||Te.finished?e.nextTick(Ee,fe):Te[M].push(Ee)),this};function ge(De){return De.ending&&!De.destroyed&&De.constructed&&De.length===0&&!De.errored&&De.buffered.length===0&&!De.finished&&!De.writing&&!De.errorEmitted&&!De.closeEmitted}function Ie(De,$){let Ee=!1;function Te(fe){if(Ee){L(De,fe??E());return}if(Ee=!0,$.pendingcb--,fe){const oe=$[M].splice(0);for(let ee=0;ee<oe.length;ee++)oe[ee](fe);L(De,fe,$.sync)}else ge($)&&($.prefinished=!0,De.emit("prefinish"),$.pendingcb++,e.nextTick(ve,De,$))}$.sync=!0,$.pendingcb++;try{De._final(Te)}catch(fe){Te(fe)}$.sync=!1}function Ae(De,$){!$.prefinished&&!$.finalCalled&&(typeof De._final=="function"&&!$.destroyed?($.finalCalled=!0,Ie(De,$)):($.prefinished=!0,De.emit("prefinish")))}function _e(De,$,Ee){ge($)&&(Ae(De,$),$.pendingcb===0&&(Ee?($.pendingcb++,e.nextTick((Te,fe)=>{ge(fe)?ve(Te,fe):fe.pendingcb--},De,$)):ge($)&&($.pendingcb++,ve(De,$))))}function ve(De,$){$.pendingcb--,$.finished=!0;const Ee=$[M].splice(0);for(let Te=0;Te<Ee.length;Te++)Ee[Te]();if(De.emit("finish"),$.autoDestroy){const Te=De._readableState;(!Te||Te.autoDestroy&&(Te.endEmitted||Te.readable===!1))&&De.destroy()}}i(se.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(De){this._writableState&&(this._writableState.destroyed=De)}},writable:{__proto__:null,get(){const De=this._writableState;return!!De&&De.writable!==!1&&!De.destroyed&&!De.errored&&!De.ending&&!De.ended},set(De){this._writableState&&(this._writableState.writable=!!De)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const De=this._writableState;return De?!De.destroyed&&!De.ending&&De.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Be=g.destroy;se.prototype.destroy=function(De,$){const Ee=this._writableState;return!Ee.destroyed&&(Ee.bufferedIndex<Ee.buffered.length||Ee[M].length)&&e.nextTick(te,Ee),Be.call(this,De,$),this},se.prototype._undestroy=g.undestroy,se.prototype._destroy=function(De,$){$(De)},se.prototype[d.captureRejectionSymbol]=function(De){this.destroy(De)};let nt;function Ve(){return nt===void 0&&(nt={}),nt}return se.fromWeb=function(De,$){return Ve().newStreamWritableFromWritableStream(De,$)},se.toWeb=function(De){return Ve().newWritableStreamFromStreamWritable(De)},ME}var OE,lD;function cse(){if(lD)return OE;lD=1;const e=Uf(),t=cd(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=Dc(),h=ud(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=Pi(),{destroyer:b}=Jp(),w=Ec(),x=X1(),_=dN(),{createDeferredPromise:E}=Yi(),C=l9(),k=globalThis.Blob||t.Blob,I=typeof k<"u"?function(K){return K instanceof k}:function(K){return!1},j=globalThis.AbortController||M0().AbortController,{FunctionPrototypeCall:N}=Qr();class P extends w{constructor(K){super(K),(K==null?void 0:K.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(K==null?void 0:K.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}OE=function M(K,U){if(l(K))return K;if(s(K))return H({readable:K});if(o(K))return H({writable:K});if(i(K))return H({writable:!1,readable:!1});if(u(K))return H({readable:x.fromWeb(K)});if(d(K))return H({writable:_.fromWeb(K)});if(typeof K=="function"){const{value:ie,write:re,final:X,destroy:ne}=L(K);if(a(ie))return C(P,ie,{objectMode:!0,write:re,final:X,destroy:ne});const q=ie==null?void 0:ie.then;if(typeof q=="function"){let J;const Q=N(q,ie,te=>{if(te!=null)throw new v("nully","body",te)},te=>{b(J,te)});return J=new P({objectMode:!0,readable:!1,write:re,final(te){X(async()=>{try{await Q,e.nextTick(te,null)}catch(ue){e.nextTick(te,ue)}})},destroy:ne})}throw new v("Iterable, AsyncIterable or AsyncFunction",U,ie)}if(I(K))return M(K.arrayBuffer());if(a(K))return C(P,K,{objectMode:!0,writable:!1});if(u(K==null?void 0:K.readable)&&d(K==null?void 0:K.writable))return P.fromWeb(K);if(typeof(K==null?void 0:K.writable)=="object"||typeof(K==null?void 0:K.readable)=="object"){const ie=K!=null&&K.readable?s(K==null?void 0:K.readable)?K==null?void 0:K.readable:M(K.readable):void 0,re=K!=null&&K.writable?o(K==null?void 0:K.writable)?K==null?void 0:K.writable:M(K.writable):void 0;return H({readable:ie,writable:re})}const se=K==null?void 0:K.then;if(typeof se=="function"){let ie;return N(se,K,re=>{re!=null&&ie.push(re),ie.push(null)},re=>{b(ie,re)}),ie=new P({objectMode:!0,writable:!1,read(){}})}throw new g(U,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],K)};function L(M){let{promise:K,resolve:U}=E();const se=new j,ie=se.signal;return{value:M(async function*(){for(;;){const X=K;K=null;const{chunk:ne,done:q,cb:J}=await X;if(e.nextTick(J),q)return;if(ie.aborted)throw new m(void 0,{cause:ie.reason});({promise:K,resolve:U}=E()),yield ne}}(),{signal:ie}),write(X,ne,q){const J=U;U=null,J({chunk:X,done:!1,cb:q})},final(X){const ne=U;U=null,ne({done:!0,cb:X})},destroy(X,ne){se.abort(),ne(X)}}}function H(M){const K=M.readable&&typeof M.readable.read!="function"?x.wrap(M.readable):M.readable,U=M.writable;let se=!!n(K),ie=!!r(U),re,X,ne,q,J;function Q(te){const ue=q;q=null,ue?ue(te):te&&J.destroy(te)}return J=new P({readableObjectMode:!!(K!=null&&K.readableObjectMode),writableObjectMode:!!(U!=null&&U.writableObjectMode),readable:se,writable:ie}),ie&&(h(U,te=>{ie=!1,te&&b(K,te),Q(te)}),J._write=function(te,ue,ge){U.write(te,ue)?ge():re=ge},J._final=function(te){U.end(),X=te},U.on("drain",function(){if(re){const te=re;re=null,te()}}),U.on("finish",function(){if(X){const te=X;X=null,te()}})),se&&(h(K,te=>{se=!1,te&&b(K,te),Q(te)}),K.on("readable",function(){if(ne){const te=ne;ne=null,te()}}),K.on("end",function(){J.push(null)}),J._read=function(){for(;;){const te=K.read();if(te===null){ne=J._read;return}if(!J.push(te))return}}),J._destroy=function(te,ue){!te&&q!==null&&(te=new m),ne=null,re=null,X=null,q===null?ue(te):(q=ue,b(U,te),b(K,te))},J}return OE}var PE,cD;function Ec(){if(cD)return PE;cD=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Qr();PE=s;const a=X1(),i=dN();r(s.prototype,a.prototype),r(s,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const m=d[h];s.prototype[m]||(s.prototype[m]=i.prototype[m])}}function s(d){if(!(this instanceof s))return new s(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}s.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},s.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return s.from=function(d){return u||(u=cse()),u(d,"body")},PE}var FE,uD;function c9(){if(uD)return FE;uD=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Qr();FE=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=Pi().codes,r=Ec(),{getHighWaterMark:a}=Y1();e(s.prototype,r.prototype),e(s,r);const i=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const d=u?a(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[i]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function o(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){u?u(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==o&&o.call(this)}return s.prototype._final=o,s.prototype._transform=function(u,d,h){throw new n("_transform()")},s.prototype._write=function(u,d,h){const m=this._readableState,g=this._writableState,v=m.length;this._transform(u,d,(b,w)=>{if(b){h(b);return}w!=null&&this.push(w),g.ended||v===m.length||m.length<m.highWaterMark?h():this[i]=h})},s.prototype._read=function(){if(this[i]){const u=this[i];this[i]=null,u()}},FE}var LE,dD;function u9(){if(dD)return LE;dD=1;const{ObjectSetPrototypeOf:e}=Qr();LE=n;const t=c9();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},LE}var BE,fD;function fN(){if(fD)return BE;fD=1;const e=Uf(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Qr(),i=ud(),{once:s}=Yi(),o=Jp(),l=Ec(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=Pi(),{validateFunction:w,validateAbortSignal:x}=Iy(),{isIterable:_,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:I,isWebStream:j,isReadableStream:N,isReadableFinished:P}=Dc(),L=globalThis.AbortController||M0().AbortController;let H,M,K;function U(te,ue,ge){let Ie=!1;te.on("close",()=>{Ie=!0});const Ae=i(te,{readable:ue,writable:ge},_e=>{Ie=!_e});return{destroy:_e=>{Ie||(Ie=!0,o.destroyer(te,_e||new g("pipe")))},cleanup:Ae}}function se(te){return w(te[te.length-1],"streams[stream.length - 1]"),te.pop()}function ie(te){if(_(te))return te;if(C(te))return re(te);throw new d("val",["Readable","Iterable","AsyncIterable"],te)}async function*re(te){M||(M=X1()),yield*M.prototype[r].call(te)}async function X(te,ue,ge,{end:Ie}){let Ae,_e=null;const ve=Ve=>{if(Ve&&(Ae=Ve),_e){const De=_e;_e=null,De()}},Be=()=>new n((Ve,De)=>{Ae?De(Ae):_e=()=>{Ae?De(Ae):Ve()}});ue.on("drain",ve);const nt=i(ue,{readable:!1},ve);try{ue.writableNeedDrain&&await Be();for await(const Ve of te)ue.write(Ve)||await Be();Ie&&(ue.end(),await Be()),ge()}catch(Ve){ge(Ae!==Ve?u(Ae,Ve):Ve)}finally{nt(),ue.off("drain",ve)}}async function ne(te,ue,ge,{end:Ie}){I(ue)&&(ue=ue.writable);const Ae=ue.getWriter();try{for await(const _e of te)await Ae.ready,Ae.write(_e).catch(()=>{});await Ae.ready,Ie&&await Ae.close(),ge()}catch(_e){try{await Ae.abort(_e),ge(_e)}catch(ve){ge(ve)}}}function q(...te){return J(te,s(se(te)))}function J(te,ue,ge){if(te.length===1&&t(te[0])&&(te=te[0]),te.length<2)throw new m("streams");const Ie=new L,Ae=Ie.signal,_e=ge==null?void 0:ge.signal,ve=[];x(_e,"options.signal");function Be(){fe(new b)}K=K||Yi().addAbortListener;let nt;_e&&(nt=K(_e,Be));let Ve,De;const $=[];let Ee=0;function Te(ke){fe(ke,--Ee===0)}function fe(ke,We){var Nt;if(ke&&(!Ve||Ve.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Ve=ke),!(!Ve&&!We)){for(;$.length;)$.shift()(Ve);(Nt=nt)===null||Nt===void 0||Nt[a](),Ie.abort(),We&&(Ve||ve.forEach(it=>it()),e.nextTick(ue,Ve,De))}}let oe;for(let ke=0;ke<te.length;ke++){const We=te[ke],Nt=ke<te.length-1,it=ke>0,Et=Nt||(ge==null?void 0:ge.end)!==!1,Ft=ke===te.length-1;if(k(We)){let Mt=function(Yt){Yt&&Yt.name!=="AbortError"&&Yt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Te(Yt)};var Pe=Mt;if(Et){const{destroy:Yt,cleanup:be}=U(We,Nt,it);$.push(Yt),E(We)&&Ft&&ve.push(be)}We.on("error",Mt),E(We)&&Ft&&ve.push(()=>{We.removeListener("error",Mt)})}if(ke===0)if(typeof We=="function"){if(oe=We({signal:Ae}),!_(oe))throw new h("Iterable, AsyncIterable or Stream","source",oe)}else _(We)||C(We)||I(We)?oe=We:oe=l.from(We);else if(typeof We=="function"){if(I(oe)){var ee;oe=ie((ee=oe)===null||ee===void 0?void 0:ee.readable)}else oe=ie(oe);if(oe=We(oe,{signal:Ae}),Nt){if(!_(oe,!0))throw new h("AsyncIterable",`transform[${ke-1}]`,oe)}else{var Se;H||(H=u9());const Mt=new H({objectMode:!0}),Yt=(Se=oe)===null||Se===void 0?void 0:Se.then;if(typeof Yt=="function")Ee++,Yt.call(oe,W=>{De=W,W!=null&&Mt.write(W),Et&&Mt.end(),e.nextTick(Te)},W=>{Mt.destroy(W),e.nextTick(Te,W)});else if(_(oe,!0))Ee++,X(oe,Mt,Te,{end:Et});else if(N(oe)||I(oe)){const W=oe.readable||oe;Ee++,X(W,Mt,Te,{end:Et})}else throw new h("AsyncIterable or Promise","destination",oe);oe=Mt;const{destroy:be,cleanup:D}=U(oe,!1,!0);$.push(be),Ft&&ve.push(D)}}else if(k(We)){if(C(oe)){Ee+=2;const Mt=Q(oe,We,Te,{end:Et});E(We)&&Ft&&ve.push(Mt)}else if(I(oe)||N(oe)){const Mt=oe.readable||oe;Ee++,X(Mt,We,Te,{end:Et})}else if(_(oe))Ee++,X(oe,We,Te,{end:Et});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=We}else if(j(We)){if(C(oe))Ee++,ne(ie(oe),We,Te,{end:Et});else if(N(oe)||_(oe))Ee++,ne(oe,We,Te,{end:Et});else if(I(oe))Ee++,ne(oe.readable,We,Te,{end:Et});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=We}else oe=l.from(We)}return(Ae!=null&&Ae.aborted||_e!=null&&_e.aborted)&&e.nextTick(Be),oe}function Q(te,ue,ge,{end:Ie}){let Ae=!1;if(ue.on("close",()=>{Ae||ge(new v)}),te.pipe(ue,{end:!1}),Ie){let ve=function(){Ae=!0,ue.end()};var _e=ve;P(te)?e.nextTick(ve):te.once("end",ve)}else ge();return i(te,{readable:!0,writable:!1},ve=>{const Be=te._readableState;ve&&ve.code==="ERR_STREAM_PREMATURE_CLOSE"&&Be&&Be.ended&&!Be.errored&&!Be.errorEmitted?te.once("end",ge).once("error",ge):ge(ve)}),i(ue,{readable:!1,writable:!0},ge)}return BE={pipelineImpl:J,pipeline:q},BE}var $E,hD;function d9(){if(hD)return $E;hD=1;const{pipeline:e}=fN(),t=Ec(),{destroyer:n}=Jp(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:s,isTransformStream:o,isWritableStream:l,isReadableStream:u}=Dc(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=Pi(),g=ud();return $E=function(...b){if(b.length===0)throw new m("streams");if(b.length===1)return t.from(b[0]);const w=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const H=b.length-1;b[H]=t.from(b[H])}for(let H=0;H<b.length;++H)if(!(!r(b[H])&&!s(b[H]))){if(H<b.length-1&&!(a(b[H])||u(b[H])||o(b[H])))throw new h(`streams[${H}]`,w[H],"must be readable");if(H>0&&!(i(b[H])||l(b[H])||o(b[H])))throw new h(`streams[${H}]`,w[H],"must be writable")}let x,_,E,C,k;function I(H){const M=C;C=null,M?M(H):H?k.destroy(H):!L&&!P&&k.destroy()}const j=b[0],N=e(b,I),P=!!(i(j)||l(j)||o(j)),L=!!(a(N)||u(N)||o(N));if(k=new t({writableObjectMode:!!(j!=null&&j.writableObjectMode),readableObjectMode:!!(N!=null&&N.readableObjectMode),writable:P,readable:L}),P){if(r(j))k._write=function(M,K,U){j.write(M,K)?U():x=U},k._final=function(M){j.end(),_=M},j.on("drain",function(){if(x){const M=x;x=null,M()}});else if(s(j)){const K=(o(j)?j.writable:j).getWriter();k._write=async function(U,se,ie){try{await K.ready,K.write(U).catch(()=>{}),ie()}catch(re){ie(re)}},k._final=async function(U){try{await K.ready,K.close().catch(()=>{}),_=U}catch(se){U(se)}}}const H=o(N)?N.readable:N;g(H,()=>{if(_){const M=_;_=null,M()}})}if(L){if(r(N))N.on("readable",function(){if(E){const H=E;E=null,H()}}),N.on("end",function(){k.push(null)}),k._read=function(){for(;;){const H=N.read();if(H===null){E=k._read;return}if(!k.push(H))return}};else if(s(N)){const M=(o(N)?N.readable:N).getReader();k._read=async function(){for(;;)try{const{value:K,done:U}=await M.read();if(!k.push(K))return;if(U){k.push(null);return}}catch{return}}}}return k._destroy=function(H,M){!H&&C!==null&&(H=new d),E=null,x=null,_=null,C===null?M(H):(C=M,r(N)&&n(N,H))},k},$E}var pD;function use(){if(pD)return ow;pD=1;const e=globalThis.AbortController||M0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=Pi(),{validateAbortSignal:s,validateInteger:o,validateObject:l}=Iy(),u=Qr().Symbol("kWeak"),d=Qr().Symbol("kResistStopPropagation"),{finished:h}=ud(),m=d9(),{addAbortSignalNoValidate:g}=Z1(),{isWritable:v,isNodeStream:b}=Dc(),{deprecate:w}=Yi(),{ArrayPrototypePush:x,Boolean:_,MathFloor:E,Number:C,NumberIsNaN:k,Promise:I,PromiseReject:j,PromiseResolve:N,PromisePrototypeThen:P,Symbol:L}=Qr(),H=L("kEmpty"),M=L("kEof");function K(_e,ve){if(ve!=null&&l(ve,"options"),(ve==null?void 0:ve.signal)!=null&&s(ve.signal,"options.signal"),b(_e)&&!v(_e))throw new t("stream",_e,"must be writable");const Be=m(this,_e);return ve!=null&&ve.signal&&g(ve.signal,Be),Be}function U(_e,ve){if(typeof _e!="function")throw new n("fn",["Function","AsyncFunction"],_e);ve!=null&&l(ve,"options"),(ve==null?void 0:ve.signal)!=null&&s(ve.signal,"options.signal");let Be=1;(ve==null?void 0:ve.concurrency)!=null&&(Be=E(ve.concurrency));let nt=Be-1;return(ve==null?void 0:ve.highWaterMark)!=null&&(nt=E(ve.highWaterMark)),o(Be,"options.concurrency",1),o(nt,"options.highWaterMark",0),nt+=Be,(async function*(){const De=Yi().AbortSignalAny([ve==null?void 0:ve.signal].filter(_)),$=this,Ee=[],Te={signal:De};let fe,oe,ee=!1,Se=0;function Pe(){ee=!0,ke()}function ke(){Se-=1,We()}function We(){oe&&!ee&&Se<Be&&Ee.length<nt&&(oe(),oe=null)}async function Nt(){try{for await(let it of $){if(ee)return;if(De.aborted)throw new i;try{if(it=_e(it,Te),it===H)continue;it=N(it)}catch(Et){it=j(Et)}Se+=1,P(it,ke,Pe),Ee.push(it),fe&&(fe(),fe=null),!ee&&(Ee.length>=nt||Se>=Be)&&await new I(Et=>{oe=Et})}Ee.push(M)}catch(it){const Et=j(it);P(Et,ke,Pe),Ee.push(Et)}finally{ee=!0,fe&&(fe(),fe=null)}}Nt();try{for(;;){for(;Ee.length>0;){const it=await Ee[0];if(it===M)return;if(De.aborted)throw new i;it!==H&&(yield it),Ee.shift(),We()}await new I(it=>{fe=it})}}finally{ee=!0,oe&&(oe(),oe=null)}}).call(this)}function se(_e=void 0){return _e!=null&&l(_e,"options"),(_e==null?void 0:_e.signal)!=null&&s(_e.signal,"options.signal"),(async function*(){let Be=0;for await(const Ve of this){var nt;if(_e!=null&&(nt=_e.signal)!==null&&nt!==void 0&&nt.aborted)throw new i({cause:_e.signal.reason});yield[Be++,Ve]}}).call(this)}async function ie(_e,ve=void 0){for await(const Be of q.call(this,_e,ve))return!0;return!1}async function re(_e,ve=void 0){if(typeof _e!="function")throw new n("fn",["Function","AsyncFunction"],_e);return!await ie.call(this,async(...Be)=>!await _e(...Be),ve)}async function X(_e,ve){for await(const Be of q.call(this,_e,ve))return Be}async function ne(_e,ve){if(typeof _e!="function")throw new n("fn",["Function","AsyncFunction"],_e);async function Be(nt,Ve){return await _e(nt,Ve),H}for await(const nt of U.call(this,Be,ve));}function q(_e,ve){if(typeof _e!="function")throw new n("fn",["Function","AsyncFunction"],_e);async function Be(nt,Ve){return await _e(nt,Ve)?nt:H}return U.call(this,Be,ve)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(_e,ve,Be){var nt;if(typeof _e!="function")throw new n("reducer",["Function","AsyncFunction"],_e);Be!=null&&l(Be,"options"),(Be==null?void 0:Be.signal)!=null&&s(Be.signal,"options.signal");let Ve=arguments.length>1;if(Be!=null&&(nt=Be.signal)!==null&&nt!==void 0&&nt.aborted){const fe=new i(void 0,{cause:Be.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(fe)),fe}const De=new e,$=De.signal;if(Be!=null&&Be.signal){const fe={once:!0,[u]:this,[d]:!0};Be.signal.addEventListener("abort",()=>De.abort(),fe)}let Ee=!1;try{for await(const fe of this){var Te;if(Ee=!0,Be!=null&&(Te=Be.signal)!==null&&Te!==void 0&&Te.aborted)throw new i;Ve?ve=await _e(ve,fe,{signal:$}):(ve=fe,Ve=!0)}if(!Ee&&!Ve)throw new J}finally{De.abort()}return ve}async function te(_e){_e!=null&&l(_e,"options"),(_e==null?void 0:_e.signal)!=null&&s(_e.signal,"options.signal");const ve=[];for await(const nt of this){var Be;if(_e!=null&&(Be=_e.signal)!==null&&Be!==void 0&&Be.aborted)throw new i(void 0,{cause:_e.signal.reason});x(ve,nt)}return ve}function ue(_e,ve){const Be=U.call(this,_e,ve);return(async function*(){for await(const Ve of Be)yield*Ve}).call(this)}function ge(_e){if(_e=C(_e),k(_e))return 0;if(_e<0)throw new a("number",">= 0",_e);return _e}function Ie(_e,ve=void 0){return ve!=null&&l(ve,"options"),(ve==null?void 0:ve.signal)!=null&&s(ve.signal,"options.signal"),_e=ge(_e),(async function*(){var nt;if(ve!=null&&(nt=ve.signal)!==null&&nt!==void 0&&nt.aborted)throw new i;for await(const De of this){var Ve;if(ve!=null&&(Ve=ve.signal)!==null&&Ve!==void 0&&Ve.aborted)throw new i;_e--<=0&&(yield De)}}).call(this)}function Ae(_e,ve=void 0){return ve!=null&&l(ve,"options"),(ve==null?void 0:ve.signal)!=null&&s(ve.signal,"options.signal"),_e=ge(_e),(async function*(){var nt;if(ve!=null&&(nt=ve.signal)!==null&&nt!==void 0&&nt.aborted)throw new i;for await(const De of this){var Ve;if(ve!=null&&(Ve=ve.signal)!==null&&Ve!==void 0&&Ve.aborted)throw new i;if(_e-- >0&&(yield De),_e<=0)return}}).call(this)}return ow.streamReturningOperators={asIndexedPairs:w(se,"readable.asIndexedPairs will be removed in a future version."),drop:Ie,filter:q,flatMap:ue,map:U,take:Ae,compose:K},ow.promiseReturningOperators={every:re,forEach:ne,reduce:Q,toArray:te,some:ie,find:X},ow}var zE,mD;function f9(){if(mD)return zE;mD=1;const{ArrayPrototypePop:e,Promise:t}=Qr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Dc(),{pipelineImpl:i}=fN(),{finished:s}=ud();h9();function o(...l){return new t((u,d)=>{let h,m;const g=l[l.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(l);h=v.signal,m=v.end}i(l,(v,b)=>{v?d(v):u(b)},{signal:h,end:m})})}return zE={finished:s,pipeline:o},zE}var gD;function h9(){if(gD)return yE.exports;gD=1;const{Buffer:e}=cd(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Qr(),{promisify:{custom:a}}=Yi(),{streamReturningOperators:i,promiseReturningOperators:s}=use(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Pi(),l=d9(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Y1(),{pipeline:h}=fN(),{destroyer:m}=Jp(),g=ud(),v=f9(),b=Dc(),w=yE.exports=cN().Stream;w.isDestroyed=b.isDestroyed,w.isDisturbed=b.isDisturbed,w.isErrored=b.isErrored,w.isReadable=b.isReadable,w.isWritable=b.isWritable,w.Readable=X1();for(const E of n(i)){let k=function(...I){if(new.target)throw o();return w.Readable.from(r(C,this,I))};var _=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(w.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(s)){let k=function(...j){if(new.target)throw o();return r(C,this,j)};var _=k;const C=s[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(w.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}w.Writable=dN(),w.Duplex=Ec(),w.Transform=c9(),w.PassThrough=u9(),w.pipeline=h;const{addAbortSignal:x}=Z1();return w.addAbortSignal=x,w.finished=g,w.destroy=m,w.compose=l,w.setDefaultHighWaterMark=u,w.getDefaultHighWaterMark=d,t(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),w.Stream=w,w._isUint8Array=function(C){return C instanceof Uint8Array},w._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},yE.exports}var yD;function dse(){return yD||(yD=1,function(e){const t=h9(),n=f9(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(gE)),gE.exports}var p9=dse();class hN extends p9.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new ze(lt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new ze(lt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class pN extends p9.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(pi(new ze(lt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(pi(new ze(lt.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new ze(lt.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new ze(lt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new ze(lt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Js=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Qs=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class yi{get position(){return this.flag&xf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=xi(t,n);Object.assign(this,Df(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&q1||this.inode.flags&Wi.Sync)}_emitChange(){ri(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw ze.With("EBADF",this.path,"chown");this.dirty=!0,GL(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=od(t,-1);if(n<0)throw new ze(lt.EINVAL,"Invalid mode");if(this.closed)throw ze.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>Ar?-61441:Ar)|n,(this._isSync||n>Ar)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw ze.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw ze.With("EBADF",this.path,"truncate");if(t<0)throw new ze(lt.EINVAL);if(this.dirty=!0,!(this.flag&fi||this.flag&lc))throw new ze(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw ze.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=kx(t),this.inode.mtimeMs=kx(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=cc(n,"utf8","a",420);if(!(uc(r.flag)&xf))throw new ze(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new ze(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Lr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw ze.With("EBADF",this.path,"read");if(this.flag&fi)throw new ze(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Wi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!I0(this.inode)&&!R0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=cc(t,null,"r",292);if(uc(n.flag)&fi)throw new ze(lt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),s=Lr.from(i);return n.encoding?s.toString(n.encoding):s}readableWebStream(t={}){if(this.closed)throw ze.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw ze.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Wi.Immutable)throw new ze(lt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&fi)throw ze.With("EBADF",this.path,"readLines");return Rie({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw ze.With("EBADF",this.path,"stat");if(!gr(this.context,this.inode,Ra))throw ze.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Bf(this.inode):new jc(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw ze.With("EBADF",this.path,"write");if(this.inode.flags&Wi.Immutable)throw new ze(lt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&fi||this.flag&lc))throw new ze(lt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!I0(this.inode)&&!R0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,await this.fs.write(this.internalPath,s,a),this._isSync&&await this.sync(),s.byteLength}async write(t,n,r,a){let i,s,o;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,s=0,i=Lr.from(t,typeof r=="string"?r:"utf8"),o=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n??0,o=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,s,o,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=cc(n,"utf8","w",420),a=uc(r.flag);if(!(a&fi||a&lc))throw new ze(lt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new ze(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Lr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw ze.With("EBADF",this.path,"close");await this.sync(),this.dispose(),ZL(this.context,this.fd)}dispose(t){if(this.closed)throw ze.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw ze.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&fi)throw ze.With("EBADF",this.path,"createReadStream");return new hN(t,this)}createWriteStream(t={}){if(this.closed)throw ze.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Wi.Immutable)throw new ze(lt.EPERM,"File is immutable",this.path,"createWriteStream");return new pN(t,this)}}async function m9(e,t){e=hn(e),t=hn(t);const n=Vn(e,this),r=Vn(t,this);if(!(await Qp.call(this,or(e))).hasAccess(aa,this))throw ze.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),ri(this,"rename",e.toString()),ri(this,"change",t.toString());return}await t_.call(this,t,await e_(e)),await Q1.call(this,e),ri(this,"rename",e.toString())}catch(a){throw yr(a,{[n.path]:e,[r.path]:t})}}async function jy(e){try{const{fs:t,path:n}=Vn(await dd.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof ze&&t.code=="ENOENT")return!1;throw t}}async function Qp(e,t){e=hn(e);const{fs:n,path:r}=Vn(await dd.call(this,e),this);try{const a=await n.stat(r);if(Ia&&!gr(this,a,Ra))throw ze.With("EACCES",r,"stat");return t!=null&&t.bigint?new Bf(a):new jc(a)}catch(a){throw yr(a,{[r]:e})}}async function J1(e,t){e=hn(e);const{fs:n,path:r}=Vn(e,this);try{const a=await n.stat(r);if(Ia&&!gr(this,a,Ra))throw ze.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Bf(a):new jc(a)}catch(a){throw yr(a,{[r]:e})}}async function g9(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Js(n,await eo.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Qs(n);r&&await r}}async function Q1(e){e=hn(e);const{fs:t,path:n}=Vn(e,this);try{if(Ia&&!gr(this,await t.stat(n),aa))throw ze.With("EACCES",n,"unlink");await t.unlink(n),ri(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}async function em(e,t,n){var r;t=hn(t);const a=od(n.mode,420),i=uc(n.flag),{fullPath:s,fs:o,path:l,stats:u}=await Ix(e,t.toString(),n.preserveSymlinks);if(!u){if(!(i&U1))throw ze.With("ENOENT",s,"_open");const h=await o.stat(or(l));if(!gr(e,h,aa))throw ze.With("EACCES",or(s),"_open");if(!ko(h))throw ze.With("ENOTDIR",or(s),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Ro.credentials,v=await o.createFile(l,{mode:a,uid:h.mode&ky?h.uid:m,gid:h.mode&Ay?h.gid:g});return new yi(e,Nx(new Ax(e,t,o,l,i,v)))}if(!gr(e,u,YL(i)))throw ze.With("EACCES",s,"_open");if(i&V1)throw ze.With("EEXIST",s,"_open");const d=new yi(e,Nx(new Ax(e,t,o,l,i,u)));return i&H1&&await d.truncate(0),d}async function eo(e,t="r",n=420){return await em(this,e,{flag:t,mode:n})}async function e_(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=cc(t,null,"r",292);return await Js(n,typeof e=="object"&&"fd"in e?e:await eo.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Qs(n);r&&await r}}async function t_(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=cc(n,"utf8","w+",420),i=Js(r,e instanceof yi?e:await eo.call(this,e.toString(),a.flag,a.mode),!0),s=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof s!="string"&&!(s instanceof Uint8Array))throw new ze(lt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Qs(r);a&&await a}}async function y9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=cc(n,"utf8","a",420);if(!(uc(a.flag)&xf))throw new ze(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new ze(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Js(r,typeof e=="object"&&"fd"in e?e:await eo.call(this,e,a.flag,a.mode),!0).appendFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Qs(r);a&&await a}}async function mN(e){e=await dd.call(this,e);const{fs:t,path:n}=Vn(e,this);try{const r=await t.stat(n);if(!r)throw ze.With("ENOENT",e,"rmdir");if(!ko(r))throw ze.With("ENOTDIR",n,"rmdir");if(Ia&&!gr(this,r,aa))throw ze.With("EACCES",n,"rmdir");await t.rmdir(n),ri(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}async function n_(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Ro.credentials;t=typeof t=="object"?t:{mode:t};const s=od(t==null?void 0:t.mode,511);e=await dd.call(this,e);const{fs:o,path:l,root:u}=Vn(e,this),d={[l]:e},h=async(m,g)=>{if(!gr(this,g,aa))throw ze.With("EACCES",or(m),"mkdir");const v=await o.mkdir(m,{mode:s,uid:g.mode&ky?g.uid:a,gid:g.mode&Ay?g.gid:i});return ri(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){await h(l,await o.stat(or(l)));return}const m=[];for(let v=l,b=e;!await o.exists(v);v=or(v),b=or(b))m.unshift(v),d[v]=b;if(!m.length)return;const g=[await o.stat(or(m[0]))];for(const[v,b]of m.entries())g.push(await h(b,g[v]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw yr(m,d)}}async function Vf(e,t){t=typeof t=="object"?t:{encoding:t},e=await dd.call(this,e);const{fs:n,path:r}=Vn(e,this),a=await n.stat(r).catch(l=>wr(yr(l,{[r]:e})));if(!a)throw ze.With("ENOENT",e,"readdir");if(!gr(this,a,Ra))throw ze.With("EACCES",e,"readdir");if(!ko(a))throw ze.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>wr(yr(l,{[r]:e}))),s=[],o=async l=>{let u;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(u=await n.stat(hr(r,l)).catch(d=>{if(d.code!="ENOENT")throw yr(d,{[r]:e})}),!u))&&(t!=null&&t.withFileTypes?s.push(new D0(l,u)):(t==null?void 0:t.encoding)=="buffer"?s.push(Lr.from(l)):s.push(l),!(!(t!=null&&t.recursive)||!ko(u))))for(const d of await Vf.call(this,hr(e,l),t))d instanceof D0?(d.path=hr(l,d.path),s.push(d)):Lr.isBuffer(d)?s.push(Lr.from(hr(l,zA(d)))):s.push(hr(l,d))};return await Promise.all(i.map(o)),s}async function b9(e,t){e=hn(e),t=hn(t);const{fs:n,path:r}=Vn(e,this),a=Vn(t,this);if(n!=a.fs)throw ze.With("EXDEV",t,"link");try{if(Ia&&!gr(this,await n.stat(or(r)),Ra))throw ze.With("EACCES",or(r),"link");if(Ia&&!(await Qp.call(this,or(t))).hasAccess(aa,this))throw ze.With("EACCES",or(t),"link");if(Ia&&!gr(this,await n.stat(r),Ra))throw ze.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw yr(i,{[a.path]:t,[r]:e})}}async function v9(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new ze(lt.EINVAL,"Invalid symlink type: "+n);if(t=hn(t),await jy.call(this,t))throw ze.With("EEXIST",t,"symlink");const a=Js(r,await em(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(hn(e,!0)),await a.chmod(Ic)}catch(a){r.error=a,r.hasError=!0}finally{const a=Qs(r);a&&await a}}async function Rx(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Js(n,await em(this,hn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Qs(n);r&&await r}}async function w9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Js(r,await eo.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Qs(r);a&&await a}}async function x9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Js(r,await em(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Qs(r);a&&await a}}async function _9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Js(n,await eo.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Qs(n);r&&await r}}async function S9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Js(n,await em(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Qs(n);r&&await r}}async function gN(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Js(r,await eo.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Qs(r);a&&await a}}async function E9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Js(r,await em(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Qs(r);a&&await a}}async function Ix(e,t,n){if(n){const l=Vn(t,e),u=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:u}}try{const l=Vn(t,e),u=await l.fs.stat(l.path);if(!Cp(u))return{...l,fullPath:t,stats:u};const d=Sc.call(e,or(t),(await Rx.call(e,t)).toString());return await Ix(e,d)}catch{}const{base:r,dir:a}=el(t),i=a=="/"?"/":await dd.call(e,a),s=hr(i,r),o=Vn(s,e);try{const l=await o.fs.stat(o.path);if(!Cp(l))return{...o,fullPath:s,stats:l};const u=Sc.call(e,i,(await Rx.call(e,s)).toString());return await Ix(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw yr(l,{[o.path]:s})}}async function dd(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=await Ix(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Lr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function fse(e,t={}){const n=new e9(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(s,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:s,filename:o},done:!1})});function i(){a=!0,n.close();for(const s of r)s({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:s,resolve:o}=Promise.withResolvers();return r.push(o),s},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function C9(e,t=KA){if(!(await Qp.call(this,e)).hasAccess(t,this))throw new ze(lt.EACCES)}async function yN(e,t){e=hn(e);const n=await J1.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&Ar){case xa:if(t!=null&&t.recursive)for(const r of await Vf.call(this,e))await yN.call(this,hr(e,r),t);await mN.call(this,e);break;case xo:case Ic:case Pf:case Ff:await Q1.call(this,e);break;case Lf:case Of:default:throw new ze(lt.EPERM,"File type not supported",e,"rm")}}async function T9(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await n_.call(this,a),n=="buffer"?Lr.from(a):a}async function bN(e,t,n){if(e=hn(e),t=hn(t),n&&n&ZA&&await jy.call(this,t))throw new ze(lt.EEXIST,"Destination file already exists",t,"copyFile");await t_.call(this,t,await e_.call(this,e)),ri(this,"rename",t.toString())}function k9(e,t){return e=hn(e),Promise.resolve(new lN(e,this))}async function vN(e,t,n){e=hn(e),t=hn(t);const r=await J1.call(this,e);if(n!=null&&n.errorOnExist&&await jy.call(this,t))throw new ze(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Ar){case xa:{if(!(n!=null&&n.recursive))throw new ze(lt.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([Vf.call(this,e,{withFileTypes:!0}),n_.call(this,t,{recursive:!0})]),i=async s=>{n.filter&&!n.filter(hr(e,s.name),hr(t,s.name))||await vN.call(this,hr(e,s.name),hr(t,s.name),n)};await Promise.all(a.map(i));break}case xo:case Ic:await bN.call(this,e,t);break;case Pf:case Ff:case Lf:case Of:default:throw new ze(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await gN.call(this,t,r.atime,r.mtime)}async function A9(e,t){e=hn(e);const{fs:n}=Vn(e,this);return Promise.resolve(JL(n,t==null?void 0:t.bigint))}function N9(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*s(o){const l=await Vf(o,{withFileTypes:r,encoding:"utf8"});for(const u of l){const d=r?u.path:o+"/"+u;a(r?u:d)||((await Qp(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*s(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?u:d.replace(/^\/+/g,"")))}}return s(n)}const hse=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:yi,access:C9,appendFile:y9,chmod:_9,chown:w9,constants:HL,copyFile:bN,cp:vN,exists:jy,glob:N9,lchmod:S9,lchown:x9,link:b9,lstat:J1,lutimes:E9,mkdir:n_,mkdtemp:T9,open:eo,opendir:k9,readFile:e_,readdir:Vf,readlink:Rx,realpath:dd,rename:m9,rm:yN,rmdir:mN,stat:Qp,statfs:A9,symlink:v9,truncate:g9,unlink:Q1,utimes:gN,watch:fse,writeFile:t_},Symbol.toStringTag,{value:"Module"})),Dn=()=>{};async function pse(e){const t=[];for await(const n of e)t.push(n);return t}function mse(e,t,n=Dn){m9.call(this,e,t).then(()=>n()).catch(n)}function gse(e,t=Dn){jy.call(this,e).then(t).catch(()=>t(!1))}function yse(e,t,n=Dn){n=typeof t=="function"?t:n,Qp.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function bse(e,t,n=Dn){n=typeof t=="function"?t:n,J1.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function vse(e,t=0,n=Dn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;g9.call(this,e,r).then(()=>n()).catch(n)}function wse(e,t=Dn){Q1.call(this,e).then(()=>t()).catch(t)}function xse(e,t,n,r=Dn){const a=od(n,420);r=typeof n=="function"?n:r,eo.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function _se(e,t,n=Dn){n=typeof t=="function"?t:n,e_.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Sse(e,t,n,r=Dn){r=typeof n=="function"?n:r,t_.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function Ese(e,t,n,r=Dn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,y9.call(this,e,t,a).then(()=>r()).catch(r)}function Cse(e,t,n=Dn){n=typeof t=="function"?t:n,new yi(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Bf(r):r)).catch(n)}function Tse(e,t=Dn){new yi(this,e).close().then(()=>t()).catch(t)}function kse(e,t,n=Dn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new yi(this,e);if(r<0)throw new ze(lt.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function Ase(e,t=Dn){new yi(this,e).sync().then(()=>t()).catch(t)}function Nse(e,t=Dn){new yi(this,e).datasync().then(()=>t()).catch(t)}function Rse(e,t,n,r,a,i=Dn){let s,o,l,u,d;const h=new yi(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":u=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new ze(lt.EINVAL,"Invalid arguments"));return}s=Lr.from(t),o=0,l=s.length;const m=i;h.write(s,o,l,u).then(({bytesWritten:g})=>m(void 0,g,s.toString(d))).catch(m)}else{s=Lr.from(t.buffer),o=n,l=r,u=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(s,o,l,u).then(({bytesWritten:g})=>m(void 0,g,s)).catch(m)}}function Ise(e,t,n,r,a,i=Dn){new yi(this,e).read(t,n,r,a).then(({bytesRead:s,buffer:o})=>i(void 0,s,o)).catch(i)}function jse(e,t,n,r=Dn){new yi(this,e).chown(t,n).then(()=>r()).catch(r)}function Dse(e,t,n){new yi(this,e).chmod(t).then(()=>n()).catch(n)}function Mse(e,t,n,r=Dn){new yi(this,e).utimes(t,n).then(()=>r()).catch(r)}function Ose(e,t=Dn){mN.call(this,e).then(()=>t()).catch(t)}function Pse(e,t,n=Dn){n_.call(this,e,t).then(()=>n()).catch(n)}function Fse(e,t,n=Dn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};Vf.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function Lse(e,t,n=Dn){b9.call(this,e,t).then(()=>n()).catch(n)}function Bse(e,t,n,r=Dn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,v9.call(this,e,t,a).then(()=>r()).catch(r)}function $se(e,t,n=Dn){n=typeof t=="function"?t:n,Rx.call(this,e).then(r=>n(void 0,r)).catch(n)}function zse(e,t,n,r=Dn){w9.call(this,e,t,n).then(()=>r()).catch(r)}function Use(e,t,n,r=Dn){x9.call(this,e,t,n).then(()=>r()).catch(r)}function Vse(e,t,n=Dn){_9.call(this,e,t).then(()=>n()).catch(n)}function Hse(e,t,n=Dn){S9.call(this,e,t).then(()=>n()).catch(n)}function qse(e,t,n,r=Dn){gN.call(this,e,t,n).then(()=>r()).catch(r)}function Gse(e,t,n,r=Dn){E9.call(this,e,t,n).then(()=>r()).catch(r)}function Wse(e,t,n=Dn){n=typeof t=="function"?t:n,dd.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Kse(e,t,n=Dn){const r=typeof t=="number"?t:Ra;n=typeof t=="function"?t:n,C9.call(this,e,r).then(()=>n()).catch(n)}const Xh=new Map;function Zse(e,t,n){const r=hn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new ze(lt.EINVAL,"No listener specified",e.toString(),"watchFile");if(Xh.has(r)){const s=Xh.get(r);s&&s.listeners.add(n);return}const i=new Oie(this,r,a);i.on("change",(s,o)=>{const l=Xh.get(r);if(l)for(const u of l.listeners)u(s,o)}),Xh.set(r,{watcher:i,listeners:new Set})}function Yse(e,t=Dn){const n=hn(e),r=Xh.get(n);r&&(t&&t!==Dn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Xh.delete(n)))}function Xse(e,t,n){const r=new e9(this,hn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Dn),r}function Jse(e,t){t=typeof t=="object"?t:{encoding:t};const n=eo.call(this,e,"r",t==null?void 0:t.mode);return new hN({...t,autoClose:!0},n)}function Qse(e,t){t=typeof t=="object"?t:{encoding:t};const n=eo.call(this,e,"w",t==null?void 0:t.mode);return new pN(t,n)}function eoe(e,t,n=Dn){n=typeof t=="function"?t:n,yN.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function toe(e,t,n=Dn){n=typeof t=="function"?t:n,T9.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function noe(e,t,n,r=Dn){r=typeof n=="function"?n:r,bN.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function roe(e,t,n,r=Dn){r=typeof n=="function"?n:r,new yi(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function aoe(e,t,n,r=Dn){r=typeof n=="function"?n:r,new yi(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function ioe(e,t,n=Dn){n=typeof t=="function"?t:n,k9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function soe(e,t,n,r=Dn){r=typeof n=="function"?n:r,vN.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function ooe(e,t,n=Dn){n=typeof t=="function"?t:n,A9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function loe(e,t){const n=await eo.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function coe(e,t,n=Dn){n=typeof t=="function"?t:n;const r=N9.call(this,e,typeof t=="function"?void 0:t);pse(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Vd=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},ps=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},uoe=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},jx;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(jx||(jx={}));let R9=(()=>{var e,t,n,r,a;let i=[Mf()],s,o=[],l,u,d=[],h=[],m,g=[],v=[],b,w=[],x=[],_,E=[],C=[],k,I=[],j=[],N,P=[],L=[];return l=class{constructor(H=wr(new ze(lt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=ps(this,d,0),this.extsize=(ps(this,h),ps(this,g,0)),this.nextents=(ps(this,v),ps(this,w,0)),this.projid=(ps(this,x),ps(this,E,0)),this.cowextsize=(ps(this,C),ps(this,I,0)),this.pad=(ps(this,j),ps(this,P,[])),ps(this,L),this.extsize=H.size,this.nextents=1,this.projid=H.uid,this.cowextsize=H.size;for(const M of Object.keys(Wi))H.flags&Wi[M]&&M in jx&&(this.xflags|=jx[M])}},uoe(l,"fsxattr"),(()=>{const H=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=xn).uint32.bind(e)],m=[(t=xn).uint32.bind(t)],b=[(n=xn).uint32.bind(n)],_=[(r=xn).uint32.bind(r)],k=[(a=xn).uint32.bind(a)],N=[xn.char(8)],Vd(null,null,u,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:M=>"xflags"in M,get:M=>M.xflags,set:(M,K)=>{M.xflags=K}},metadata:H},d,h),Vd(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:M=>"extsize"in M,get:M=>M.extsize,set:(M,K)=>{M.extsize=K}},metadata:H},g,v),Vd(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:M=>"nextents"in M,get:M=>M.nextents,set:(M,K)=>{M.nextents=K}},metadata:H},w,x),Vd(null,null,_,{kind:"field",name:"projid",static:!1,private:!1,access:{has:M=>"projid"in M,get:M=>M.projid,set:(M,K)=>{M.projid=K}},metadata:H},E,C),Vd(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:M=>"cowextsize"in M,get:M=>M.cowextsize,set:(M,K)=>{M.cowextsize=K}},metadata:H},I,j),Vd(null,null,N,{kind:"field",name:"pad",static:!1,private:!1,access:{has:M=>"pad"in M,get:M=>M.pad,set:(M,K)=>{M.pad=K}},metadata:H},P,L),Vd(null,s={value:l},i,{kind:"class",name:l.name,metadata:H},null,o),l=s.value,H&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:H}),ps(l,o)})(),l})();var Vr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Vr||(Vr={}));var yo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(yo||(yo={}));async function doe(e,t,...n){e=hn(e);const{fs:r,path:a}=Vn(e,this);try{const i=new wa(await r.stat(a));switch(t){case Vr.GetFlags:case yo.GetFlags:return i.flags;case Vr.SetFlags:case yo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Vr.GetVersion:case yo.GetVersion:return i.version;case Vr.SetVersion:case yo.SetVersion:i.version=n[0],await r.touch(a,i);return;case Vr.Fiemap:break;case Vr.GetXattr:return new R9(i);case Vr.SetXattr:break;case Vr.GetLabel:return r.label;case Vr.SetLabel:r.label=n[0];return;case Vr.GetUUID:return r.uuid;case Vr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw yr(i,{[a]:e})}throw new ze(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function foe(e,t,...n){e=hn(e);const{fs:r,path:a}=Vn(e,this);try{const i=new wa(r.statSync(a));switch(t){case Vr.GetFlags:case yo.GetFlags:return i.flags;case Vr.SetFlags:case yo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Vr.GetVersion:case yo.GetVersion:return i.version;case Vr.SetVersion:case yo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Vr.Fiemap:break;case Vr.GetXattr:return new R9(i);case Vr.SetXattr:break;case Vr.GetLabel:return r.label;case Vr.SetLabel:r.label=n[0];return;case Vr.GetUUID:return r.uuid;case Vr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw yr(i,{[a]:e})}throw new ze(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const hoe=[];function tm(e,t,n,r){if(!t.startsWith("user.")&&!hoe.includes(t))throw new ze(lt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function poe(e,t,n={}){var r;e=hn(e);const{fs:a,path:i}=Vn(e,this);tm(this,t,e,"xattr.get");try{const s=await a.stat(i);if(Ia&&!gr(this,s,Ra))throw ze.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new Gu);const o=s.attributes.get(t);if(!o)throw ze.With("ENODATA",i,"xattr.get");const l=Lr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw yr(s,{[i]:e})}}function moe(e,t,n={}){var r;e=hn(e),tm(this,t,e,"xattr.get");const{fs:a,path:i}=Vn(e,this);try{const s=a.statSync(i);if(Ia&&!gr(this,s,Ra))throw ze.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new Gu);const o=s.attributes.get(t);if(!o)throw ze.With("ENODATA",i,"xattr.get");const l=Lr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw yr(s,{[i]:e})}}async function goe(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Vn(e,this);tm(this,t,e,"xattr.set");try{const o=await i.stat(s);if(Ia&&!gr(this,o,aa))throw ze.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new Gu);const l=o.attributes.get(t);if(r.create&&l)throw ze.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw ze.With("ENODATA",s,"xattr.set");o.attributes.set(t,Lr.from(n)),await i.touch(s,Df(o,"attributes"))}catch(o){throw yr(o,{[s]:e})}}function yoe(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Vn(e,this);tm(this,t,e,"xattr.set");try{const o=i.statSync(s);if(Ia&&!gr(this,o,aa))throw ze.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new Gu);const l=o.attributes.get(t);if(r.create&&l)throw ze.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw ze.With("ENODATA",s,"xattr.set");o.attributes.set(t,Lr.from(n)),i.touchSync(s,Df(o,"attributes"))}catch(o){throw yr(o,{[s]:e})}}async function boe(e,t){var n;e=hn(e);const{fs:r,path:a}=Vn(e,this);tm(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(Ia&&!gr(this,i,aa))throw ze.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Gu),!i.attributes.get(t))throw ze.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,Df(i,"attributes"))}catch(i){throw yr(i,{[a]:e})}}function voe(e,t){var n;e=hn(e);const{fs:r,path:a}=Vn(e,this);tm(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(Ia&&!gr(this,i,aa))throw ze.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Gu),!i.attributes.get(t))throw ze.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,Df(i,"attributes"))}catch(i){throw yr(i,{[a]:e})}}async function woe(e){e=hn(e);const{fs:t,path:n}=Vn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw yr(r,{[n]:e})}}function xoe(e){e=hn(e);const{fs:t,path:n}=Vn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw yr(r,{[n]:e})}}const _oe=Object.freeze(Object.defineProperty({__proto__:null,get:poe,getSync:moe,list:woe,listSync:xoe,remove:boe,removeSync:voe,set:goe,setSync:yoe},Symbol.toStringTag,{value:"Module"})),Ya=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:yie,Dir:lN,Dirent:D0,get IOC(){return Vr},get IOC32(){return yo},ReadStream:hN,Stats:jc,StatsFs:gie,WriteStream:pN,access:Kse,accessSync:ese,appendFile:Ese,appendFileSync:$ie,chmod:Vse,chmodSync:Xie,chown:zse,chownSync:Zie,chroot:Die,close:Tse,closeSync:zf,constants:HL,copyFile:noe,copyFileSync:i9,cp:soe,cpSync:s9,createReadStream:Jse,createWriteStream:Qse,exists:gse,existsSync:QA,fchmod:Dse,fchmodSync:iN,fchown:jse,fchownSync:aN,fdatasync:Nse,fdatasyncSync:Hie,fstat:Cse,fstatSync:zie,fsync:Ase,fsyncSync:Vie,ftruncate:kse,ftruncateSync:Uie,futimes:Mse,futimesSync:sN,glob:coe,globSync:sse,ioctl:doe,ioctlSync:foe,lchmod:Hse,lchmodSync:Jie,lchown:Use,lchownSync:Yie,link:Lse,linkSync:Wie,lopenSync:W1,lstat:bse,lstatSync:eN,lutimes:Gse,lutimesSync:Qie,mkdir:Pse,mkdirSync:oN,mkdtemp:toe,mkdtempSync:tse,mount:JA,open:xse,openAsBlob:loe,openSync:G1,opendir:ioe,opendirSync:ase,promises:hse,read:Ise,readFile:_se,readFileSync:nN,readSync:Gie,readdir:Fse,readdirSync:Xp,readlink:$se,readlinkSync:rk,readv:roe,readvSync:nse,realpath:Wse,realpathSync:ld,rename:mse,renameSync:Lie,rm:eoe,rmSync:a9,rmdir:Ose,rmdirSync:n9,stat:yse,statSync:Wu,statfs:ooe,statfsSync:ise,symlink:Bse,symlinkSync:Kie,truncate:vse,truncateSync:Bie,umount:XL,unlink:wse,unlinkSync:tN,unwatchFile:Yse,utimes:qse,utimesSync:r9,watch:Xse,watchFile:Zse,write:Rse,writeFile:Sse,writeFileSync:rN,writeSync:qie,writev:aoe,writevSync:rse,xattr:_oe},Symbol.toStringTag,{value:"Module"}));function bD(e){return DL(e)||WA(e)||e instanceof XA}async function I9(e,t=0){if(typeof e!="object"||e==null)throw Gi(new ze(lt.EINVAL,"Invalid options on mount configuration"));if(!bD(e))throw Gi(new ze(lt.EINVAL,"Invalid mount configuration"));if(e instanceof XA)return await e.ready(),e;WA(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&bD(i)){if(jL("Resolving nested mount configuration: "+a),t>10)throw Gi(new ze(lt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await I9(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Gi(new ze(lt.EPERM,"Backend not available: "+n.name));Qae(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function Soe(e){if(!DL(e))throw new TypeError("Invalid single mount point configuration");const t=await I9(e);XL("/"),JA("/",t)}const Eoe=["delete"];Math.max(...Eoe.map(e=>e.length));Jae("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const j9=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;j9[e]=t}function Coe(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^j9[(t^e[n])&255];return(t^4294967295)>>>0}var Ur=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},An=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},wN=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let vD=(()=>{var e,t,n,r;let a=[Mf()],i,s=[],o,l,u=[],d=[],h,m=[],g=[],v,b=[],w=[],x,_=[],E=[];return o=class{constructor(){this.id=An(this,u,0),this.offset_=(An(this,d),An(this,m,0)),this.offset=(An(this,g),An(this,b,0)),this.size=(An(this,w),An(this,_,0)),An(this,E)}},wN(o,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],x=[(r=xn).uint32.bind(r)],Ur(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,I)=>{k.id=I}},metadata:C},u,d),Ur(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,I)=>{k.offset_=I}},metadata:C},m,g),Ur(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,I)=>{k.offset=I}},metadata:C},b,w),Ur(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,I)=>{k.size=I}},metadata:C},_,E),Ur(null,i={value:o},a,{kind:"class",name:o.name,metadata:C},null,s),o=i.value,C&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),An(o,s)})(),o})();const wD=255;let Hd=(()=>{var e,t,n,r;let a=[Mf()],i,s=[],o,l,u=[],d=[],h,m=[],g=[],v,b=[],w=[],x,_=[],E=[],C,k=[],I=[];var j=o=class{constructor(N=wr(new ze(lt.EINVAL,"Metadata block must be initialized with a superblock")),P=0){if(this.superblock=N,this.offset=P,this.checksum=An(this,u,0),this.timestamp=(An(this,d),An(this,m,Date.now())),this.previous_offset_=(An(this,g),An(this,b,0)),this.previous_offset=(An(this,w),An(this,_,0)),this._previous=An(this,E),this.entries=An(this,k,Array.from({length:wD},()=>new vD)),An(this,I),this.superblock=N,this.offset=P,!!P&&($1(this,N.store._buffer.subarray(P,P+Hr(j))),!D9(this)))throw z1(new ze(lt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+P.toString(16)))}get previous(){var N;if(this.previous_offset)return(N=this._previous)!==null&&N!==void 0||(this._previous=new j(this.superblock,this.previous_offset)),this._previous}};return wN(o,"MetadataBlock"),(()=>{const N=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],x=[(r=xn).uint32.bind(r)],C=[N0(vD,wD)],Ur(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:P=>"checksum"in P,get:P=>P.checksum,set:(P,L)=>{P.checksum=L}},metadata:N},u,d),Ur(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:P=>"timestamp"in P,get:P=>P.timestamp,set:(P,L)=>{P.timestamp=L}},metadata:N},m,g),Ur(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:P=>"previous_offset_"in P,get:P=>P.previous_offset_,set:(P,L)=>{P.previous_offset_=L}},metadata:N},b,w),Ur(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:P=>"previous_offset"in P,get:P=>P.previous_offset,set:(P,L)=>{P.previous_offset=L}},metadata:N},_,E),Ur(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:P=>"entries"in P,get:P=>P.entries,set:(P,L)=>{P.entries=L}},metadata:N},k,I),Ur(null,i={value:o},a,{kind:"class",name:o.name,metadata:N},null,s),j=o=i.value,N&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:N}),An(o,s)})(),j=o})();const xD=2049864546;(()=>{var e,t,n,r,a,i,s,o,l,u,d;let h=[Mf()],m,g=[],v,b,w=[],x=[],_,E=[],C=[],k,I=[],j=[],N,P=[],L=[],H,M=[],K=[],U,se=[],ie=[],re,X=[],ne=[],q,J=[],Q=[],te,ue=[],ge=[],Ie,Ae=[],_e=[],ve,Be=[],nt=[],Ve,De=[],$=[],Ee,Te=[],fe=[];var oe=v=class{constructor(ee=wr(new ze(lt.EINVAL,"Super block must be initialized with a store"))){if(this.store=ee,this.checksum=An(this,w,0),this.magic=(An(this,x),An(this,E,xD)),this.version=(An(this,C),An(this,I,1)),this.inode_format=(An(this,j),An(this,P,vie)),this.flags=(An(this,L),An(this,M,0)),this.used_bytes=(An(this,K),An(this,se,BigInt(0))),this.total_bytes=(An(this,ie),An(this,X,BigInt(0))),this.uuid=(An(this,ne),An(this,J,BigInt(0))),this.metadata_block_size=(An(this,Q),An(this,ue,Hr(Hd))),this.metadata_offset_=(An(this,ge),An(this,Ae,0)),this.metadata_offset=(An(this,_e),An(this,Be,0)),this.metadata=An(this,nt),this.label=An(this,De,""),this._padding=(An(this,$),An(this,Te,new Array(132).fill(0))),An(this,fe),this.store=ee,ee._view.getUint32(Pae(oe,"magic"),!0)!=xD){pi("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Hd(this),this.metadata.offset=Hr(oe),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Hr(oe)+Hr(Hd)),this.total_bytes=BigInt(ee._buffer.byteLength),ee._write(this),ee._write(this.metadata);return}if($1(this,ee._buffer.subarray(0,Hr(oe))),!D9(this))throw z1(new ze(lt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Hd(this,this.metadata_offset)}rotateMetadata(){const ee=new Hd(this);return ee.offset=Number(this.used_bytes),ee.previous_offset=this.metadata_offset,this.metadata=ee,this.metadata_offset=ee.offset,this.store._write(ee),this.used_bytes+=BigInt(Hr(Hd)),this.store._write(this),ee}isUnused(ee,Se){if(!Se)return!0;if(ee+Se>this.total_bytes||ee<Hr(oe))return!1;for(let Pe=this.metadata;Pe;Pe=Pe.previous){if(ee<Pe.offset+Hr(Hd)&&ee+Se>Pe.offset)return!1;for(const ke of Pe.entries)if(ke.offset&&(ee>=ke.offset&&ee<ke.offset+ke.size||ee+Se>ke.offset&&ee+Se<=ke.offset+ke.size||ee<=ke.offset&&ee+Se>=ke.offset+ke.size))return!1}return!0}};return wN(v,"SuperBlock"),(()=>{const ee=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=xn).uint32.bind(e)],_=[(t=xn).uint32.bind(t)],k=[(n=xn).uint16.bind(n)],N=[(r=xn).uint16.bind(r)],H=[(a=xn).uint32.bind(a)],U=[(i=xn).uint64.bind(i)],re=[(s=xn).uint64.bind(s)],q=[(o=xn).uint128.bind(o)],te=[(l=xn).uint32.bind(l)],Ie=[(u=xn).uint32.bind(u)],ve=[(d=xn).uint32.bind(d)],Ve=[xn.char(64)],Ee=[xn.char(132)],Ur(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:Se=>"checksum"in Se,get:Se=>Se.checksum,set:(Se,Pe)=>{Se.checksum=Pe}},metadata:ee},w,x),Ur(null,null,_,{kind:"field",name:"magic",static:!1,private:!1,access:{has:Se=>"magic"in Se,get:Se=>Se.magic,set:(Se,Pe)=>{Se.magic=Pe}},metadata:ee},E,C),Ur(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:Se=>"version"in Se,get:Se=>Se.version,set:(Se,Pe)=>{Se.version=Pe}},metadata:ee},I,j),Ur(null,null,N,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:Se=>"inode_format"in Se,get:Se=>Se.inode_format,set:(Se,Pe)=>{Se.inode_format=Pe}},metadata:ee},P,L),Ur(null,null,H,{kind:"field",name:"flags",static:!1,private:!1,access:{has:Se=>"flags"in Se,get:Se=>Se.flags,set:(Se,Pe)=>{Se.flags=Pe}},metadata:ee},M,K),Ur(null,null,U,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:Se=>"used_bytes"in Se,get:Se=>Se.used_bytes,set:(Se,Pe)=>{Se.used_bytes=Pe}},metadata:ee},se,ie),Ur(null,null,re,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:Se=>"total_bytes"in Se,get:Se=>Se.total_bytes,set:(Se,Pe)=>{Se.total_bytes=Pe}},metadata:ee},X,ne),Ur(null,null,q,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:Se=>"uuid"in Se,get:Se=>Se.uuid,set:(Se,Pe)=>{Se.uuid=Pe}},metadata:ee},J,Q),Ur(null,null,te,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:Se=>"metadata_block_size"in Se,get:Se=>Se.metadata_block_size,set:(Se,Pe)=>{Se.metadata_block_size=Pe}},metadata:ee},ue,ge),Ur(null,null,Ie,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:Se=>"metadata_offset_"in Se,get:Se=>Se.metadata_offset_,set:(Se,Pe)=>{Se.metadata_offset_=Pe}},metadata:ee},Ae,_e),Ur(null,null,ve,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:Se=>"metadata_offset"in Se,get:Se=>Se.metadata_offset,set:(Se,Pe)=>{Se.metadata_offset=Pe}},metadata:ee},Be,nt),Ur(null,null,Ve,{kind:"field",name:"label",static:!1,private:!1,access:{has:Se=>"label"in Se,get:Se=>Se.label,set:(Se,Pe)=>{Se.label=Pe}},metadata:ee},De,$),Ur(null,null,Ee,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:Se=>"_padding"in Se,get:Se=>Se._padding,set:(Se,Pe)=>{Se._padding=Pe}},metadata:ee},Te,fe),Ur(null,m={value:v},h,{kind:"class",name:v.name,metadata:ee},null,g),oe=v=m.value,ee&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ee}),An(v,g)})(),oe=v})();function D9(e){const t=ti(e),n=Coe(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Ya;function Toe(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function ik(e,t,n){if(e instanceof ze)return e;const r=e instanceof DOMException?lt[Toe(e)]:lt.EIO,a=new ze(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Jh(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(ik(e.error))}})}class koe extends nk{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Jh(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Jh(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Jh(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Jh(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(ik(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(ik(this.tx.error)),this.tx.abort(),t}}async function Aoe(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(pi("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Jh(n)}class Noe{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new koe(t,this)}}const Roe={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Jh(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await Aoe(e.storeName||"zenfs",e.idbFactory),n=new Noe(t),r=new KL(n);if(e!=null&&e.disableAsyncCache)return GA("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},Ioe=Roe;function uw(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var UE={exports:{}},_D;function joe(){return _D||(_D=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function s(u,d){if(!a[u]){if(!r[u]){var h=typeof uw=="function"&&uw;if(!d&&h)return h(u,!0);if(o)return o(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[u]={exports:{}};r[u][0].call(g.exports,function(v){var b=r[u][1][v];return s(b||v)},g,g.exports,n,r,a,i)}return a[u].exports}for(var o=typeof uw=="function"&&uw,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,r,a){var i=n("./utils"),s=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,d,h,m,g,v,b,w=[],x=0,_=l.length,E=_,C=i.getTypeOf(l)!=="string";x<l.length;)E=_-x,h=C?(u=l[x++],d=x<_?l[x++]:0,x<_?l[x++]:0):(u=l.charCodeAt(x++),d=x<_?l.charCodeAt(x++):0,x<_?l.charCodeAt(x++):0),m=u>>2,g=(3&u)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,w.push(o.charAt(m)+o.charAt(g)+o.charAt(v)+o.charAt(b));return w.join("")},a.decode=function(l){var u,d,h,m,g,v,b=0,w=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var _,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=s.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)u=o.indexOf(l.charAt(b++))<<2|(m=o.indexOf(l.charAt(b++)))>>4,d=(15&m)<<4|(g=o.indexOf(l.charAt(b++)))>>2,h=(3&g)<<6|(v=o.indexOf(l.charAt(b++))),_[w++]=u,g!==64&&(_[w++]=d),v!==64&&(_[w++]=h);return _}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),s=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,h,m,g,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,m){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,d,h,m){var g=s,v=m+h;u^=-1;for(var b=m;b<v;b++)u=u>>>8^g[255&(u^d[b])];return-1^u}(0|l,o,o.length,0):function(u,d,h,m){var g=s,v=m+h;u^=-1;for(var b=m;b<v;b++)u=u>>>8^g[255&(u^d.charCodeAt(b))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(h,m){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var b,w="";for(b=0;b<v;b++)w+=String.fromCharCode(255&g),g>>>=8;return w}function s(g,v,b,w,x,_){var E,C,k=g.file,I=g.compression,j=_!==u.utf8encode,N=o.transformTo("string",_(k.name)),P=o.transformTo("string",u.utf8encode(k.name)),L=k.comment,H=o.transformTo("string",_(L)),M=o.transformTo("string",u.utf8encode(L)),K=P.length!==k.name.length,U=M.length!==L.length,se="",ie="",re="",X=k.dir,ne=k.date,q={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(q.crc32=g.crc32,q.compressedSize=g.compressedSize,q.uncompressedSize=g.uncompressedSize);var J=0;v&&(J|=8),j||!K&&!U||(J|=2048);var Q=0,te=0;X&&(Q|=16),x==="UNIX"?(te=798,Q|=function(ge,Ie){var Ae=ge;return ge||(Ae=Ie?16893:33204),(65535&Ae)<<16}(k.unixPermissions,X)):(te=20,Q|=function(ge){return 63&(ge||0)}(k.dosPermissions)),E=ne.getUTCHours(),E<<=6,E|=ne.getUTCMinutes(),E<<=5,E|=ne.getUTCSeconds()/2,C=ne.getUTCFullYear()-1980,C<<=4,C|=ne.getUTCMonth()+1,C<<=5,C|=ne.getUTCDate(),K&&(ie=i(1,1)+i(d(N),4)+P,se+="up"+i(ie.length,2)+ie),U&&(re=i(1,1)+i(d(H),4)+M,se+="uc"+i(re.length,2)+re);var ue="";return ue+=`
\0`,ue+=i(J,2),ue+=I.magic,ue+=i(E,2),ue+=i(C,2),ue+=i(q.crc32,4),ue+=i(q.compressedSize,4),ue+=i(q.uncompressedSize,4),ue+=i(N.length,2),ue+=i(se.length,2),{fileRecord:h.LOCAL_FILE_HEADER+ue+N+se,dirRecord:h.CENTRAL_FILE_HEADER+i(te,2)+ue+i(H.length,2)+"\0\0\0\0"+i(Q,4)+i(w,4)+N+se+H}}var o=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),h=n("../signature");function m(g,v,b,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=w,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,l),m.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-w-1))/b:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=s(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=s(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(w){return h.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,w=function(x,_,E,C,k){var I=o.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(_,4)+i(E,4)+i(I.length,2)+I}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),s=n("./ZipFileWorker");a.generateWorker=function(o,l,u){var d=new s(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(m,g){h++;var v=function(_,E){var C=_||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(g.options.compression,l.compression),b=g.options.compressionOptions||l.compressionOptions||{},w=g.dir,x=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:m,dir:w,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),s=n("./external"),o=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(m){return new s.Promise(function(g,v){var b=m.decompressed.getContentWorker().pipe(new u);b.on("error",function(w){v(w)}).on("end",function(){b.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(b){var w=new l(g);return w.load(b),w}).then(function(b){var w=[s.Promise.resolve(b)],x=b.files;if(g.checkCRC32)for(var _=0;_<x.length;_++)w.push(h(x[_]));return s.Promise.all(w)}).then(function(b){for(var w=b.shift(),x=w.files,_=0;_<x.length;_++){var E=x[_],C=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(k).unsafeOriginalName=C)}return w.zipComment.length&&(v.comment=w.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),s=n("../stream/GenericWorker");function o(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,s),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function s(o,l,u){i.call(this,l),this._helper=o;var d=this;o.on("data",function(h,m){d.push(h)||d._helper.pause(),u&&u(m)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Qt<"u",newBufferFrom:function(i,s){if(Qt.from&&Qt.from!==Uint8Array.from)return Qt.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Qt(i,s)},allocBuffer:function(i){if(Qt.alloc)return Qt.alloc(i);var s=new Qt(i);return s.fill(0),s},isBuffer:function(i){return Qt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,I,j){var N,P=o.getTypeOf(I),L=o.extend(j||{},d);L.date=L.date||new Date,L.compression!==null&&(L.compression=L.compression.toUpperCase()),typeof L.unixPermissions=="string"&&(L.unixPermissions=parseInt(L.unixPermissions,8)),L.unixPermissions&&16384&L.unixPermissions&&(L.dir=!0),L.dosPermissions&&16&L.dosPermissions&&(L.dir=!0),L.dir&&(k=x(k)),L.createFolders&&(N=w(k))&&_.call(this,N,!0);var H=P==="string"&&L.binary===!1&&L.base64===!1;j&&j.binary!==void 0||(L.binary=!H),(I instanceof h&&I.uncompressedSize===0||L.dir||!I||I.length===0)&&(L.base64=!1,L.binary=!0,I="",L.compression="STORE",P="string");var M=null;M=I instanceof h||I instanceof l?I:v.isNode&&v.isStream(I)?new b(k,I):o.prepareContent(k,I,L.binary,L.optimizedBinaryString,L.base64);var K=new m(k,M,L);this.files[k]=K}var s=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),w=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var I=k.lastIndexOf("/");return 0<I?k.substring(0,I):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},_=function(k,I){return I=I!==void 0?I:d.createFolders,k=x(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:I}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var I,j,N;for(I in this.files)N=this.files[I],(j=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&k(j,N)},filter:function(k){var I=[];return this.forEach(function(j,N){k(j,N)&&I.push(N)}),I},file:function(k,I,j){if(arguments.length!==1)return k=this.root+k,i.call(this,k,I,j),this;if(E(k)){var N=k;return this.filter(function(L,H){return!H.dir&&N.test(L)})}var P=this.files[this.root+k];return P&&!P.dir?P:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(P,L){return L.dir&&k.test(P)});var I=this.root+k,j=_.call(this,I),N=this.clone();return N.root=j.name,N},remove:function(k){k=this.root+k;var I=this.files[k];if(I||(k.slice(-1)!=="/"&&(k+="/"),I=this.files[k]),I&&!I.dir)delete this.files[k];else for(var j=this.filter(function(P,L){return L.name.slice(0,k.length)===k}),N=0;N<j.length;N++)delete this.files[j[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var I,j={};try{if((j=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");o.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var N=j.comment||this.comment||"";I=g.generateWorker(this,j,N)}catch(P){(I=new l("error")).error(P)}return new u(I,j.type||"string",j.mimeType)},generateAsync:function(k,I){return this.generateInternalStream(k).accumulate(I)},generateNodeStream:function(k,I){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(I)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===u&&this.data[m+2]===d&&this.data[m+3]===h)return m-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.readData(4);return l===m[0]&&u===m[1]&&d===m[2]&&h===m[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),s=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||s.uint8array?m==="nodebuffer"?new u(h):s.uint8array?new d(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),s=n("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),s=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,s),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),s=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,b){return new d.Promise(function(w,x){var _=[],E=v._internalType,C=v._outputType,k=v._mimeType;v.on("data",function(I,j){_.push(I),b&&b(j)}).on("error",function(I){_=[],x(I)}).on("end",function(){try{var I=function(j,N,P){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",N),P);case"base64":return l.encode(N);default:return i.transformTo(j,N)}}(C,function(j,N){var P,L=0,H=null,M=0;for(P=0;P<N.length;P++)M+=N[P].length;switch(j){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(H=new Uint8Array(M),P=0;P<N.length;P++)H.set(N[P],L),L+=N[P].length;return H;case"nodebuffer":return Qt.concat(N);default:throw new Error("concat : unsupported type '"+j+"'")}}(E,_),k);w(I)}catch(j){x(j)}_=[]}).resume()})}function g(v,b,w){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=w,i.checkSupport(x),this._worker=v.pipe(new s(x)),v.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,b){var w=this;return v==="data"?this._worker.on(v,function(x){b.call(w,x.data,x.meta)}):this._worker.on(v,function(){i.delay(b,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Qt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),s=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}a.utf8encode=function(g){return s.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var b,w,x,_,E,C=v.length,k=0;for(_=0;_<C;_++)(64512&(w=v.charCodeAt(_)))==55296&&_+1<C&&(64512&(x=v.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),_++),k+=w<128?1:w<2048?2:w<65536?3:4;for(b=s.uint8array?new Uint8Array(k):new Array(k),_=E=0;E<k;_++)(64512&(w=v.charCodeAt(_)))==55296&&_+1<C&&(64512&(x=v.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),_++),w<128?b[E++]=w:(w<2048?b[E++]=192|w>>>6:(w<65536?b[E++]=224|w>>>12:(b[E++]=240|w>>>18,b[E++]=128|w>>>12&63),b[E++]=128|w>>>6&63),b[E++]=128|63&w);return b}(g)},a.utf8decode=function(g){return s.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,w,x,_,E=v.length,C=new Array(2*E);for(b=w=0;b<E;)if((x=v[b++])<128)C[w++]=x;else if(4<(_=u[x]))C[w++]=65533,b+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&b<E;)x=x<<6|63&v[b++],_--;1<_?C[w++]=65533:x<65536?C[w++]=x:(x-=65536,C[w++]=55296|x>>10&1023,C[w++]=56320|1023&x)}return C.length!==w&&(C.subarray?C=C.subarray(0,w):C.length=w),i.applyFromCharCode(C)}(g=i.transformTo(s.uint8array?"uint8array":"array",g))},i.inherits(h,l),h.prototype.processChunk=function(g){var v=i.transformTo(s.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var w=function(_,E){var C;for((E=E||_.length)>_.length&&(E=_.length),C=E-1;0<=C&&(192&_[C])==128;)C--;return C<0||C===0?E:C+u[_[C]]>E?C:E}(v),x=v;w!==v.length&&(s.uint8array?(x=v.subarray(0,w),this.leftOver=v.subarray(w,v.length)):(x=v.slice(0,w),this.leftOver=v.slice(w,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,l),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),s=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function u(b){return b}function d(b,w){for(var x=0;x<b.length;++x)w[x]=255&b.charCodeAt(x);return w}n("setimmediate"),a.newBlob=function(b,w){a.checkSupport("blob");try{return new Blob([b],{type:w})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,w,x){var _=[],E=0,C=b.length;if(C<=x)return String.fromCharCode.apply(null,b);for(;E<C;)w==="array"||w==="nodebuffer"?_.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+x,C)))):_.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+x,C)))),E+=x;return _.join("")},stringifyByChar:function(b){for(var w="",x=0;x<b.length;x++)w+=String.fromCharCode(b[x]);return w},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(b){var w=65536,x=a.getTypeOf(b),_=!0;if(x==="uint8array"?_=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(_=h.applyCanBeUsed.nodebuffer),_)for(;1<w;)try{return h.stringifyByChunk(b,x,w)}catch{w=Math.floor(w/2)}return h.stringifyByChar(b)}function g(b,w){for(var x=0;x<b.length;x++)w[x]=b[x];return w}a.applyFromCharCode=m;var v={};v.string={string:u,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,o.allocBuffer(b.length))}},v.array={string:m,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return m(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:m,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:m,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:u},a.transformTo=function(b,w){if(w=w||"",!b)return w;a.checkSupport(b);var x=a.getTypeOf(w);return v[x][b](w)},a.resolve=function(b){for(var w=b.split("/"),x=[],_=0;_<w.length;_++){var E=w[_];E==="."||E===""&&_!==0&&_!==w.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var w,x,_="";for(x=0;x<(b||"").length;x++)_+="\\x"+((w=b.charCodeAt(x))<16?"0":"")+w.toString(16).toUpperCase();return _},a.delay=function(b,w,x){setImmediate(function(){b.apply(x||null,w||[])})},a.inherits=function(b,w){function x(){}x.prototype=w.prototype,b.prototype=new x},a.extend=function(){var b,w,x={};for(b=0;b<arguments.length;b++)for(w in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],w)&&x[w]===void 0&&(x[w]=arguments[b][w]);return x},a.prepareContent=function(b,w,x,_,E){return l.Promise.resolve(w).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,I){var j=new FileReader;j.onload=function(N){k(N.target.result)},j.onerror=function(N){I(N.target.error)},j.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=s.decode(C):x&&_!==!0&&(C=function(I){return d(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(m)+", expected "+s.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",g=s.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),h=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(w){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===w)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,w,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),b=g.readInt(2),w=g.readData(b),this.extraFields[v]={id:v,length:b,value:w};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=s.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var x=s.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,w){this.name=v,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=b,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var s=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,w="string";try{if(!v)throw new Error("No output type specified.");var x=(w=v.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),b=this._decompressWorker();var _=!this._dataBinary;_&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!_&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new s(b,w,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(w,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var s,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,s=function(){m.port2.postMessage(0)}}var g=[];function v(){var b,w;o=!0;for(var x=g.length;x;){for(w=g,g=[],b=-1;++b<x;)w[b]();x=g.length}o=!1}r.exports=function(b){g.push(b)!==1||o||s()}}).call(this,typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function s(){}var o={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==s&&b(this,x)}function m(x,_,E){this.promise=x,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,_,E){i(function(){var C;try{C=_(E)}catch(k){return o.reject(x,k)}C===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,C)})}function v(x){var _=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof _=="function")return function(){_.apply(x,arguments)}}function b(x,_){var E=!1;function C(j){E||(E=!0,o.reject(x,j))}function k(j){E||(E=!0,o.resolve(x,j))}var I=w(function(){_(k,C)});I.status==="error"&&C(I.value)}function w(x,_){var E={};try{E.value=x(_),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var _=this.constructor;return this.then(function(E){return _.resolve(x()).then(function(){return E})},function(E){return _.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,_){if(typeof x!="function"&&this.state===u||typeof _!="function"&&this.state===l)return this;var E=new this.constructor(s);return this.state!==d?g(E,this.state===u?x:_,this.outcome):this.queue.push(new m(E,x,_)),E},m.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){o.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},o.resolve=function(x,_){var E=w(v,_);if(E.status==="error")return o.reject(x,E.value);var C=E.value;if(C)b(x,C);else{x.state=u,x.outcome=_;for(var k=-1,I=x.queue.length;++k<I;)x.queue[k].callFulfilled(_)}return x},o.reject=function(x,_){x.state=l,x.outcome=_;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(_);return x},h.resolve=function(x){return x instanceof this?x:o.resolve(new this(s),x)},h.reject=function(x){var _=new this(s);return o.reject(_,x)},h.all=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),I=0,j=-1,N=new this(s);++j<E;)P(x[j],j);return N;function P(L,H){_.resolve(L).then(function(M){k[H]=M,++I!==E||C||(C=!0,o.resolve(N,k))},function(M){C||(C=!0,o.reject(N,M))})}},h.race=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,I=new this(s);++k<E;)j=x[k],_.resolve(j).then(function(N){C||(C=!0,o.resolve(I,N))},function(N){C||(C=!0,o.reject(I,N))});var j;return I}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,h=0,m=-1,g=0,v=8;function b(x){if(!(this instanceof b))return new b(x);this.options=s.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(E!==h)throw new Error(l[E]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var C;if(C=typeof _.dictionary=="string"?o.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[E]);this._dict_set=!0}}function w(x,_){var E=new b(_);if(E.push(x,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(x,_){var E,C,k=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=_===~~_?_:_===!0?4:0,typeof x=="string"?k.input=o.string2buf(x):d.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(I),k.next_out=0,k.avail_out=I),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(k.output,k.next_out))):this.onData(s.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=b,a.deflate=w,a.deflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},a.gzip=function(x,_){return(_=_||{}).gzip=!0,w(x,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||b&&b.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,w.windowBits);if(x!==l.Z_OK)throw new Error(u[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,w){var x=new g(w);if(x.push(b,!0),x.err)throw x.msg||u[x.err];return x.result}g.prototype.push=function(b,w){var x,_,E,C,k,I,j=this.strm,N=this.options.chunkSize,P=this.options.dictionary,L=!1;if(this.ended)return!1;_=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?j.input=o.binstring2buf(b):m.call(b)==="[object ArrayBuffer]"?j.input=new Uint8Array(b):j.input=b,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(N),j.next_out=0,j.avail_out=N),(x=i.inflate(j,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&P&&(I=typeof P=="string"?o.string2buf(P):m.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,x=i.inflateSetDictionary(this.strm,I)),x===l.Z_BUF_ERROR&&L===!0&&(x=l.Z_OK,L=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&x!==l.Z_STREAM_END&&(j.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(j.output,j.next_out),C=j.next_out-E,k=o.buf2string(j.output,E),j.next_out=C,j.avail_out=N-C,C&&s.arraySet(j.output,j.output,E,C,0),this.onData(k)):this.onData(s.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(L=!0)}while((0<j.avail_in||j.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(j.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(b,w){return(w=w||{}).raw=!0,v(b,w)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,d,h,m){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),m);else for(var g=0;g<h;g++)l[m+g]=u[d+g]},flattenChunks:function(l){var u,d,h,m,g,v;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(v=new Uint8Array(h),u=m=0,d=l.length;u<d;u++)g=l[u],v.set(g,m),m+=g.length;return v}},o={arraySet:function(l,u,d,h,m){for(var g=0;g<h;g++)l[m+g]=u[d+g]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,m){if(m<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(h[v]);return g}l[254]=l[254]=1,a.string2buf=function(h){var m,g,v,b,w,x=h.length,_=0;for(b=0;b<x;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),_+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(_),b=w=0;w<_;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?m[w++]=g:(g<2048?m[w++]=192|g>>>6:(g<65536?m[w++]=224|g>>>12:(m[w++]=240|g>>>18,m[w++]=128|g>>>12&63),m[w++]=128|g>>>6&63),m[w++]=128|63&g);return m},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,v=m.length;g<v;g++)m[g]=h.charCodeAt(g);return m},a.buf2string=function(h,m){var g,v,b,w,x=m||h.length,_=new Array(2*x);for(g=v=0;g<x;)if((b=h[g++])<128)_[v++]=b;else if(4<(w=l[b]))_[v++]=65533,g+=w-1;else{for(b&=w===2?31:w===3?15:7;1<w&&g<x;)b=b<<6|63&h[g++],w--;1<w?_[v++]=65533:b<65536?_[v++]=b:(b-=65536,_[v++]=55296|b>>10&1023,_[v++]=56320|1023&b)}return d(_,v)},a.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+l[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,s,o,l){for(var u=65535&i|0,d=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(u=u+s[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();r.exports=function(s,o,l,u){var d=i,h=u+l;s^=-1;for(var m=u;m<h;m++)s=s>>>8^d[255&(s^o[m])];return-1^s}},{}],46:[function(n,r,a){var i,s=n("../utils/common"),o=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),h=0,m=4,g=0,v=-2,b=-1,w=4,x=2,_=8,E=9,C=286,k=30,I=19,j=2*C+1,N=15,P=3,L=258,H=L+P+1,M=42,K=113,U=1,se=2,ie=3,re=4;function X($,Ee){return $.msg=d[Ee],Ee}function ne($){return($<<1)-(4<$?9:0)}function q($){for(var Ee=$.length;0<=--Ee;)$[Ee]=0}function J($){var Ee=$.state,Te=Ee.pending;Te>$.avail_out&&(Te=$.avail_out),Te!==0&&(s.arraySet($.output,Ee.pending_buf,Ee.pending_out,Te,$.next_out),$.next_out+=Te,Ee.pending_out+=Te,$.total_out+=Te,$.avail_out-=Te,Ee.pending-=Te,Ee.pending===0&&(Ee.pending_out=0))}function Q($,Ee){o._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,Ee),$.block_start=$.strstart,J($.strm)}function te($,Ee){$.pending_buf[$.pending++]=Ee}function ue($,Ee){$.pending_buf[$.pending++]=Ee>>>8&255,$.pending_buf[$.pending++]=255&Ee}function ge($,Ee){var Te,fe,oe=$.max_chain_length,ee=$.strstart,Se=$.prev_length,Pe=$.nice_match,ke=$.strstart>$.w_size-H?$.strstart-($.w_size-H):0,We=$.window,Nt=$.w_mask,it=$.prev,Et=$.strstart+L,Ft=We[ee+Se-1],Mt=We[ee+Se];$.prev_length>=$.good_match&&(oe>>=2),Pe>$.lookahead&&(Pe=$.lookahead);do if(We[(Te=Ee)+Se]===Mt&&We[Te+Se-1]===Ft&&We[Te]===We[ee]&&We[++Te]===We[ee+1]){ee+=2,Te++;do;while(We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&We[++ee]===We[++Te]&&ee<Et);if(fe=L-(Et-ee),ee=Et-L,Se<fe){if($.match_start=Ee,Pe<=(Se=fe))break;Ft=We[ee+Se-1],Mt=We[ee+Se]}}while((Ee=it[Ee&Nt])>ke&&--oe!=0);return Se<=$.lookahead?Se:$.lookahead}function Ie($){var Ee,Te,fe,oe,ee,Se,Pe,ke,We,Nt,it=$.w_size;do{if(oe=$.window_size-$.lookahead-$.strstart,$.strstart>=it+(it-H)){for(s.arraySet($.window,$.window,it,it,0),$.match_start-=it,$.strstart-=it,$.block_start-=it,Ee=Te=$.hash_size;fe=$.head[--Ee],$.head[Ee]=it<=fe?fe-it:0,--Te;);for(Ee=Te=it;fe=$.prev[--Ee],$.prev[Ee]=it<=fe?fe-it:0,--Te;);oe+=it}if($.strm.avail_in===0)break;if(Se=$.strm,Pe=$.window,ke=$.strstart+$.lookahead,We=oe,Nt=void 0,Nt=Se.avail_in,We<Nt&&(Nt=We),Te=Nt===0?0:(Se.avail_in-=Nt,s.arraySet(Pe,Se.input,Se.next_in,Nt,ke),Se.state.wrap===1?Se.adler=l(Se.adler,Pe,Nt,ke):Se.state.wrap===2&&(Se.adler=u(Se.adler,Pe,Nt,ke)),Se.next_in+=Nt,Se.total_in+=Nt,Nt),$.lookahead+=Te,$.lookahead+$.insert>=P)for(ee=$.strstart-$.insert,$.ins_h=$.window[ee],$.ins_h=($.ins_h<<$.hash_shift^$.window[ee+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[ee+P-1])&$.hash_mask,$.prev[ee&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=ee,ee++,$.insert--,!($.lookahead+$.insert<P)););}while($.lookahead<H&&$.strm.avail_in!==0)}function Ae($,Ee){for(var Te,fe;;){if($.lookahead<H){if(Ie($),$.lookahead<H&&Ee===h)return U;if($.lookahead===0)break}if(Te=0,$.lookahead>=P&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+P-1])&$.hash_mask,Te=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),Te!==0&&$.strstart-Te<=$.w_size-H&&($.match_length=ge($,Te)),$.match_length>=P)if(fe=o._tr_tally($,$.strstart-$.match_start,$.match_length-P),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=P){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+P-1])&$.hash_mask,Te=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else fe=o._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(fe&&(Q($,!1),$.strm.avail_out===0))return U}return $.insert=$.strstart<P-1?$.strstart:P-1,Ee===m?(Q($,!0),$.strm.avail_out===0?ie:re):$.last_lit&&(Q($,!1),$.strm.avail_out===0)?U:se}function _e($,Ee){for(var Te,fe,oe;;){if($.lookahead<H){if(Ie($),$.lookahead<H&&Ee===h)return U;if($.lookahead===0)break}if(Te=0,$.lookahead>=P&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+P-1])&$.hash_mask,Te=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=P-1,Te!==0&&$.prev_length<$.max_lazy_match&&$.strstart-Te<=$.w_size-H&&($.match_length=ge($,Te),$.match_length<=5&&($.strategy===1||$.match_length===P&&4096<$.strstart-$.match_start)&&($.match_length=P-1)),$.prev_length>=P&&$.match_length<=$.prev_length){for(oe=$.strstart+$.lookahead-P,fe=o._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-P),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=oe&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+P-1])&$.hash_mask,Te=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=P-1,$.strstart++,fe&&(Q($,!1),$.strm.avail_out===0))return U}else if($.match_available){if((fe=o._tr_tally($,0,$.window[$.strstart-1]))&&Q($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return U}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(fe=o._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<P-1?$.strstart:P-1,Ee===m?(Q($,!0),$.strm.avail_out===0?ie:re):$.last_lit&&(Q($,!1),$.strm.avail_out===0)?U:se}function ve($,Ee,Te,fe,oe){this.good_length=$,this.max_lazy=Ee,this.nice_length=Te,this.max_chain=fe,this.func=oe}function Be(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*j),this.dyn_dtree=new s.Buf16(2*(2*k+1)),this.bl_tree=new s.Buf16(2*(2*I+1)),q(this.dyn_ltree),q(this.dyn_dtree),q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(N+1),this.heap=new s.Buf16(2*C+1),q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function nt($){var Ee;return $&&$.state?($.total_in=$.total_out=0,$.data_type=x,(Ee=$.state).pending=0,Ee.pending_out=0,Ee.wrap<0&&(Ee.wrap=-Ee.wrap),Ee.status=Ee.wrap?M:K,$.adler=Ee.wrap===2?0:1,Ee.last_flush=h,o._tr_init(Ee),g):X($,v)}function Ve($){var Ee=nt($);return Ee===g&&function(Te){Te.window_size=2*Te.w_size,q(Te.head),Te.max_lazy_match=i[Te.level].max_lazy,Te.good_match=i[Te.level].good_length,Te.nice_match=i[Te.level].nice_length,Te.max_chain_length=i[Te.level].max_chain,Te.strstart=0,Te.block_start=0,Te.lookahead=0,Te.insert=0,Te.match_length=Te.prev_length=P-1,Te.match_available=0,Te.ins_h=0}($.state),Ee}function De($,Ee,Te,fe,oe,ee){if(!$)return v;var Se=1;if(Ee===b&&(Ee=6),fe<0?(Se=0,fe=-fe):15<fe&&(Se=2,fe-=16),oe<1||E<oe||Te!==_||fe<8||15<fe||Ee<0||9<Ee||ee<0||w<ee)return X($,v);fe===8&&(fe=9);var Pe=new Be;return($.state=Pe).strm=$,Pe.wrap=Se,Pe.gzhead=null,Pe.w_bits=fe,Pe.w_size=1<<Pe.w_bits,Pe.w_mask=Pe.w_size-1,Pe.hash_bits=oe+7,Pe.hash_size=1<<Pe.hash_bits,Pe.hash_mask=Pe.hash_size-1,Pe.hash_shift=~~((Pe.hash_bits+P-1)/P),Pe.window=new s.Buf8(2*Pe.w_size),Pe.head=new s.Buf16(Pe.hash_size),Pe.prev=new s.Buf16(Pe.w_size),Pe.lit_bufsize=1<<oe+6,Pe.pending_buf_size=4*Pe.lit_bufsize,Pe.pending_buf=new s.Buf8(Pe.pending_buf_size),Pe.d_buf=1*Pe.lit_bufsize,Pe.l_buf=3*Pe.lit_bufsize,Pe.level=Ee,Pe.strategy=ee,Pe.method=Te,Ve($)}i=[new ve(0,0,0,0,function($,Ee){var Te=65535;for(Te>$.pending_buf_size-5&&(Te=$.pending_buf_size-5);;){if($.lookahead<=1){if(Ie($),$.lookahead===0&&Ee===h)return U;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var fe=$.block_start+Te;if(($.strstart===0||$.strstart>=fe)&&($.lookahead=$.strstart-fe,$.strstart=fe,Q($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-H&&(Q($,!1),$.strm.avail_out===0))return U}return $.insert=0,Ee===m?(Q($,!0),$.strm.avail_out===0?ie:re):($.strstart>$.block_start&&(Q($,!1),$.strm.avail_out),U)}),new ve(4,4,8,4,Ae),new ve(4,5,16,8,Ae),new ve(4,6,32,32,Ae),new ve(4,4,16,16,_e),new ve(8,16,32,32,_e),new ve(8,16,128,128,_e),new ve(8,32,128,256,_e),new ve(32,128,258,1024,_e),new ve(32,258,258,4096,_e)],a.deflateInit=function($,Ee){return De($,Ee,_,15,8,0)},a.deflateInit2=De,a.deflateReset=Ve,a.deflateResetKeep=nt,a.deflateSetHeader=function($,Ee){return $&&$.state?$.state.wrap!==2?v:($.state.gzhead=Ee,g):v},a.deflate=function($,Ee){var Te,fe,oe,ee;if(!$||!$.state||5<Ee||Ee<0)return $?X($,v):v;if(fe=$.state,!$.output||!$.input&&$.avail_in!==0||fe.status===666&&Ee!==m)return X($,$.avail_out===0?-5:v);if(fe.strm=$,Te=fe.last_flush,fe.last_flush=Ee,fe.status===M)if(fe.wrap===2)$.adler=0,te(fe,31),te(fe,139),te(fe,8),fe.gzhead?(te(fe,(fe.gzhead.text?1:0)+(fe.gzhead.hcrc?2:0)+(fe.gzhead.extra?4:0)+(fe.gzhead.name?8:0)+(fe.gzhead.comment?16:0)),te(fe,255&fe.gzhead.time),te(fe,fe.gzhead.time>>8&255),te(fe,fe.gzhead.time>>16&255),te(fe,fe.gzhead.time>>24&255),te(fe,fe.level===9?2:2<=fe.strategy||fe.level<2?4:0),te(fe,255&fe.gzhead.os),fe.gzhead.extra&&fe.gzhead.extra.length&&(te(fe,255&fe.gzhead.extra.length),te(fe,fe.gzhead.extra.length>>8&255)),fe.gzhead.hcrc&&($.adler=u($.adler,fe.pending_buf,fe.pending,0)),fe.gzindex=0,fe.status=69):(te(fe,0),te(fe,0),te(fe,0),te(fe,0),te(fe,0),te(fe,fe.level===9?2:2<=fe.strategy||fe.level<2?4:0),te(fe,3),fe.status=K);else{var Se=_+(fe.w_bits-8<<4)<<8;Se|=(2<=fe.strategy||fe.level<2?0:fe.level<6?1:fe.level===6?2:3)<<6,fe.strstart!==0&&(Se|=32),Se+=31-Se%31,fe.status=K,ue(fe,Se),fe.strstart!==0&&(ue(fe,$.adler>>>16),ue(fe,65535&$.adler)),$.adler=1}if(fe.status===69)if(fe.gzhead.extra){for(oe=fe.pending;fe.gzindex<(65535&fe.gzhead.extra.length)&&(fe.pending!==fe.pending_buf_size||(fe.gzhead.hcrc&&fe.pending>oe&&($.adler=u($.adler,fe.pending_buf,fe.pending-oe,oe)),J($),oe=fe.pending,fe.pending!==fe.pending_buf_size));)te(fe,255&fe.gzhead.extra[fe.gzindex]),fe.gzindex++;fe.gzhead.hcrc&&fe.pending>oe&&($.adler=u($.adler,fe.pending_buf,fe.pending-oe,oe)),fe.gzindex===fe.gzhead.extra.length&&(fe.gzindex=0,fe.status=73)}else fe.status=73;if(fe.status===73)if(fe.gzhead.name){oe=fe.pending;do{if(fe.pending===fe.pending_buf_size&&(fe.gzhead.hcrc&&fe.pending>oe&&($.adler=u($.adler,fe.pending_buf,fe.pending-oe,oe)),J($),oe=fe.pending,fe.pending===fe.pending_buf_size)){ee=1;break}ee=fe.gzindex<fe.gzhead.name.length?255&fe.gzhead.name.charCodeAt(fe.gzindex++):0,te(fe,ee)}while(ee!==0);fe.gzhead.hcrc&&fe.pending>oe&&($.adler=u($.adler,fe.pending_buf,fe.pending-oe,oe)),ee===0&&(fe.gzindex=0,fe.status=91)}else fe.status=91;if(fe.status===91)if(fe.gzhead.comment){oe=fe.pending;do{if(fe.pending===fe.pending_buf_size&&(fe.gzhead.hcrc&&fe.pending>oe&&($.adler=u($.adler,fe.pending_buf,fe.pending-oe,oe)),J($),oe=fe.pending,fe.pending===fe.pending_buf_size)){ee=1;break}ee=fe.gzindex<fe.gzhead.comment.length?255&fe.gzhead.comment.charCodeAt(fe.gzindex++):0,te(fe,ee)}while(ee!==0);fe.gzhead.hcrc&&fe.pending>oe&&($.adler=u($.adler,fe.pending_buf,fe.pending-oe,oe)),ee===0&&(fe.status=103)}else fe.status=103;if(fe.status===103&&(fe.gzhead.hcrc?(fe.pending+2>fe.pending_buf_size&&J($),fe.pending+2<=fe.pending_buf_size&&(te(fe,255&$.adler),te(fe,$.adler>>8&255),$.adler=0,fe.status=K)):fe.status=K),fe.pending!==0){if(J($),$.avail_out===0)return fe.last_flush=-1,g}else if($.avail_in===0&&ne(Ee)<=ne(Te)&&Ee!==m)return X($,-5);if(fe.status===666&&$.avail_in!==0)return X($,-5);if($.avail_in!==0||fe.lookahead!==0||Ee!==h&&fe.status!==666){var Pe=fe.strategy===2?function(ke,We){for(var Nt;;){if(ke.lookahead===0&&(Ie(ke),ke.lookahead===0)){if(We===h)return U;break}if(ke.match_length=0,Nt=o._tr_tally(ke,0,ke.window[ke.strstart]),ke.lookahead--,ke.strstart++,Nt&&(Q(ke,!1),ke.strm.avail_out===0))return U}return ke.insert=0,We===m?(Q(ke,!0),ke.strm.avail_out===0?ie:re):ke.last_lit&&(Q(ke,!1),ke.strm.avail_out===0)?U:se}(fe,Ee):fe.strategy===3?function(ke,We){for(var Nt,it,Et,Ft,Mt=ke.window;;){if(ke.lookahead<=L){if(Ie(ke),ke.lookahead<=L&&We===h)return U;if(ke.lookahead===0)break}if(ke.match_length=0,ke.lookahead>=P&&0<ke.strstart&&(it=Mt[Et=ke.strstart-1])===Mt[++Et]&&it===Mt[++Et]&&it===Mt[++Et]){Ft=ke.strstart+L;do;while(it===Mt[++Et]&&it===Mt[++Et]&&it===Mt[++Et]&&it===Mt[++Et]&&it===Mt[++Et]&&it===Mt[++Et]&&it===Mt[++Et]&&it===Mt[++Et]&&Et<Ft);ke.match_length=L-(Ft-Et),ke.match_length>ke.lookahead&&(ke.match_length=ke.lookahead)}if(ke.match_length>=P?(Nt=o._tr_tally(ke,1,ke.match_length-P),ke.lookahead-=ke.match_length,ke.strstart+=ke.match_length,ke.match_length=0):(Nt=o._tr_tally(ke,0,ke.window[ke.strstart]),ke.lookahead--,ke.strstart++),Nt&&(Q(ke,!1),ke.strm.avail_out===0))return U}return ke.insert=0,We===m?(Q(ke,!0),ke.strm.avail_out===0?ie:re):ke.last_lit&&(Q(ke,!1),ke.strm.avail_out===0)?U:se}(fe,Ee):i[fe.level].func(fe,Ee);if(Pe!==ie&&Pe!==re||(fe.status=666),Pe===U||Pe===ie)return $.avail_out===0&&(fe.last_flush=-1),g;if(Pe===se&&(Ee===1?o._tr_align(fe):Ee!==5&&(o._tr_stored_block(fe,0,0,!1),Ee===3&&(q(fe.head),fe.lookahead===0&&(fe.strstart=0,fe.block_start=0,fe.insert=0))),J($),$.avail_out===0))return fe.last_flush=-1,g}return Ee!==m?g:fe.wrap<=0?1:(fe.wrap===2?(te(fe,255&$.adler),te(fe,$.adler>>8&255),te(fe,$.adler>>16&255),te(fe,$.adler>>24&255),te(fe,255&$.total_in),te(fe,$.total_in>>8&255),te(fe,$.total_in>>16&255),te(fe,$.total_in>>24&255)):(ue(fe,$.adler>>>16),ue(fe,65535&$.adler)),J($),0<fe.wrap&&(fe.wrap=-fe.wrap),fe.pending!==0?g:1)},a.deflateEnd=function($){var Ee;return $&&$.state?(Ee=$.state.status)!==M&&Ee!==69&&Ee!==73&&Ee!==91&&Ee!==103&&Ee!==K&&Ee!==666?X($,v):($.state=null,Ee===K?X($,-3):g):v},a.deflateSetDictionary=function($,Ee){var Te,fe,oe,ee,Se,Pe,ke,We,Nt=Ee.length;if(!$||!$.state||(ee=(Te=$.state).wrap)===2||ee===1&&Te.status!==M||Te.lookahead)return v;for(ee===1&&($.adler=l($.adler,Ee,Nt,0)),Te.wrap=0,Nt>=Te.w_size&&(ee===0&&(q(Te.head),Te.strstart=0,Te.block_start=0,Te.insert=0),We=new s.Buf8(Te.w_size),s.arraySet(We,Ee,Nt-Te.w_size,Te.w_size,0),Ee=We,Nt=Te.w_size),Se=$.avail_in,Pe=$.next_in,ke=$.input,$.avail_in=Nt,$.next_in=0,$.input=Ee,Ie(Te);Te.lookahead>=P;){for(fe=Te.strstart,oe=Te.lookahead-(P-1);Te.ins_h=(Te.ins_h<<Te.hash_shift^Te.window[fe+P-1])&Te.hash_mask,Te.prev[fe&Te.w_mask]=Te.head[Te.ins_h],Te.head[Te.ins_h]=fe,fe++,--oe;);Te.strstart=fe,Te.lookahead=P-1,Ie(Te)}return Te.strstart+=Te.lookahead,Te.block_start=Te.strstart,Te.insert=Te.lookahead,Te.lookahead=0,Te.match_length=Te.prev_length=P-1,Te.match_available=0,$.next_in=Pe,$.input=ke,$.avail_in=Se,Te.wrap=ee,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,s){var o,l,u,d,h,m,g,v,b,w,x,_,E,C,k,I,j,N,P,L,H,M,K,U,se;o=i.state,l=i.next_in,U=i.input,u=l+(i.avail_in-5),d=i.next_out,se=i.output,h=d-(s-i.avail_out),m=d+(i.avail_out-257),g=o.dmax,v=o.wsize,b=o.whave,w=o.wnext,x=o.window,_=o.hold,E=o.bits,C=o.lencode,k=o.distcode,I=(1<<o.lenbits)-1,j=(1<<o.distbits)-1;e:do{E<15&&(_+=U[l++]<<E,E+=8,_+=U[l++]<<E,E+=8),N=C[_&I];t:for(;;){if(_>>>=P=N>>>24,E-=P,(P=N>>>16&255)===0)se[d++]=65535&N;else{if(!(16&P)){if((64&P)==0){N=C[(65535&N)+(_&(1<<P)-1)];continue t}if(32&P){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}L=65535&N,(P&=15)&&(E<P&&(_+=U[l++]<<E,E+=8),L+=_&(1<<P)-1,_>>>=P,E-=P),E<15&&(_+=U[l++]<<E,E+=8,_+=U[l++]<<E,E+=8),N=k[_&j];n:for(;;){if(_>>>=P=N>>>24,E-=P,!(16&(P=N>>>16&255))){if((64&P)==0){N=k[(65535&N)+(_&(1<<P)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(H=65535&N,E<(P&=15)&&(_+=U[l++]<<E,(E+=8)<P&&(_+=U[l++]<<E,E+=8)),g<(H+=_&(1<<P)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(_>>>=P,E-=P,(P=d-h)<H){if(b<(P=H-P)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(K=x,(M=0)===w){if(M+=v-P,P<L){for(L-=P;se[d++]=x[M++],--P;);M=d-H,K=se}}else if(w<P){if(M+=v+w-P,(P-=w)<L){for(L-=P;se[d++]=x[M++],--P;);if(M=0,w<L){for(L-=P=w;se[d++]=x[M++],--P;);M=d-H,K=se}}}else if(M+=w-P,P<L){for(L-=P;se[d++]=x[M++],--P;);M=d-H,K=se}for(;2<L;)se[d++]=K[M++],se[d++]=K[M++],se[d++]=K[M++],L-=3;L&&(se[d++]=K[M++],1<L&&(se[d++]=K[M++]))}else{for(M=d-H;se[d++]=se[M++],se[d++]=se[M++],se[d++]=se[M++],2<(L-=3););L&&(se[d++]=se[M++],1<L&&(se[d++]=se[M++]))}break}}break}}while(l<u&&d<m);l-=L=E>>3,_&=(1<<(E-=L<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=d<m?m-d+257:257-(d-m),o.hold=_,o.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),s=n("./adler32"),o=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,h=2,m=0,g=-2,v=1,b=852,w=592;function x(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(M){var K;return M&&M.state?(K=M.state,M.total_in=M.total_out=K.total=0,M.msg="",K.wrap&&(M.adler=1&K.wrap),K.mode=v,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new i.Buf32(b),K.distcode=K.distdyn=new i.Buf32(w),K.sane=1,K.back=-1,m):g}function C(M){var K;return M&&M.state?((K=M.state).wsize=0,K.whave=0,K.wnext=0,E(M)):g}function k(M,K){var U,se;return M&&M.state?(se=M.state,K<0?(U=0,K=-K):(U=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?g:(se.window!==null&&se.wbits!==K&&(se.window=null),se.wrap=U,se.wbits=K,C(M))):g}function I(M,K){var U,se;return M?(se=new _,(M.state=se).window=null,(U=k(M,K))!==m&&(M.state=null),U):g}var j,N,P=!0;function L(M){if(P){var K;for(j=new i.Buf32(512),N=new i.Buf32(32),K=0;K<144;)M.lens[K++]=8;for(;K<256;)M.lens[K++]=9;for(;K<280;)M.lens[K++]=7;for(;K<288;)M.lens[K++]=8;for(u(d,M.lens,0,288,j,0,M.work,{bits:9}),K=0;K<32;)M.lens[K++]=5;u(h,M.lens,0,32,N,0,M.work,{bits:5}),P=!1}M.lencode=j,M.lenbits=9,M.distcode=N,M.distbits=5}function H(M,K,U,se){var ie,re=M.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),se>=re.wsize?(i.arraySet(re.window,K,U-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(se<(ie=re.wsize-re.wnext)&&(ie=se),i.arraySet(re.window,K,U-se,ie,re.wnext),(se-=ie)?(i.arraySet(re.window,K,U-se,se,0),re.wnext=se,re.whave=re.wsize):(re.wnext+=ie,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ie))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(M){return I(M,15)},a.inflateInit2=I,a.inflate=function(M,K){var U,se,ie,re,X,ne,q,J,Q,te,ue,ge,Ie,Ae,_e,ve,Be,nt,Ve,De,$,Ee,Te,fe,oe=0,ee=new i.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return g;(U=M.state).mode===12&&(U.mode=13),X=M.next_out,ie=M.output,q=M.avail_out,re=M.next_in,se=M.input,ne=M.avail_in,J=U.hold,Q=U.bits,te=ne,ue=q,Ee=m;e:for(;;)switch(U.mode){case v:if(U.wrap===0){U.mode=13;break}for(;Q<16;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if(2&U.wrap&&J===35615){ee[U.check=0]=255&J,ee[1]=J>>>8&255,U.check=o(U.check,ee,2,0),Q=J=0,U.mode=2;break}if(U.flags=0,U.head&&(U.head.done=!1),!(1&U.wrap)||(((255&J)<<8)+(J>>8))%31){M.msg="incorrect header check",U.mode=30;break}if((15&J)!=8){M.msg="unknown compression method",U.mode=30;break}if(Q-=4,$=8+(15&(J>>>=4)),U.wbits===0)U.wbits=$;else if($>U.wbits){M.msg="invalid window size",U.mode=30;break}U.dmax=1<<$,M.adler=U.check=1,U.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if(U.flags=J,(255&U.flags)!=8){M.msg="unknown compression method",U.mode=30;break}if(57344&U.flags){M.msg="unknown header flags set",U.mode=30;break}U.head&&(U.head.text=J>>8&1),512&U.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,U.check=o(U.check,ee,2,0)),Q=J=0,U.mode=3;case 3:for(;Q<32;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}U.head&&(U.head.time=J),512&U.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,ee[2]=J>>>16&255,ee[3]=J>>>24&255,U.check=o(U.check,ee,4,0)),Q=J=0,U.mode=4;case 4:for(;Q<16;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}U.head&&(U.head.xflags=255&J,U.head.os=J>>8),512&U.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,U.check=o(U.check,ee,2,0)),Q=J=0,U.mode=5;case 5:if(1024&U.flags){for(;Q<16;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}U.length=J,U.head&&(U.head.extra_len=J),512&U.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,U.check=o(U.check,ee,2,0)),Q=J=0}else U.head&&(U.head.extra=null);U.mode=6;case 6:if(1024&U.flags&&(ne<(ge=U.length)&&(ge=ne),ge&&(U.head&&($=U.head.extra_len-U.length,U.head.extra||(U.head.extra=new Array(U.head.extra_len)),i.arraySet(U.head.extra,se,re,ge,$)),512&U.flags&&(U.check=o(U.check,se,ge,re)),ne-=ge,re+=ge,U.length-=ge),U.length))break e;U.length=0,U.mode=7;case 7:if(2048&U.flags){if(ne===0)break e;for(ge=0;$=se[re+ge++],U.head&&$&&U.length<65536&&(U.head.name+=String.fromCharCode($)),$&&ge<ne;);if(512&U.flags&&(U.check=o(U.check,se,ge,re)),ne-=ge,re+=ge,$)break e}else U.head&&(U.head.name=null);U.length=0,U.mode=8;case 8:if(4096&U.flags){if(ne===0)break e;for(ge=0;$=se[re+ge++],U.head&&$&&U.length<65536&&(U.head.comment+=String.fromCharCode($)),$&&ge<ne;);if(512&U.flags&&(U.check=o(U.check,se,ge,re)),ne-=ge,re+=ge,$)break e}else U.head&&(U.head.comment=null);U.mode=9;case 9:if(512&U.flags){for(;Q<16;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if(J!==(65535&U.check)){M.msg="header crc mismatch",U.mode=30;break}Q=J=0}U.head&&(U.head.hcrc=U.flags>>9&1,U.head.done=!0),M.adler=U.check=0,U.mode=12;break;case 10:for(;Q<32;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}M.adler=U.check=x(J),Q=J=0,U.mode=11;case 11:if(U.havedict===0)return M.next_out=X,M.avail_out=q,M.next_in=re,M.avail_in=ne,U.hold=J,U.bits=Q,2;M.adler=U.check=1,U.mode=12;case 12:if(K===5||K===6)break e;case 13:if(U.last){J>>>=7&Q,Q-=7&Q,U.mode=27;break}for(;Q<3;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}switch(U.last=1&J,Q-=1,3&(J>>>=1)){case 0:U.mode=14;break;case 1:if(L(U),U.mode=20,K!==6)break;J>>>=2,Q-=2;break e;case 2:U.mode=17;break;case 3:M.msg="invalid block type",U.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){M.msg="invalid stored block lengths",U.mode=30;break}if(U.length=65535&J,Q=J=0,U.mode=15,K===6)break e;case 15:U.mode=16;case 16:if(ge=U.length){if(ne<ge&&(ge=ne),q<ge&&(ge=q),ge===0)break e;i.arraySet(ie,se,re,ge,X),ne-=ge,re+=ge,q-=ge,X+=ge,U.length-=ge;break}U.mode=12;break;case 17:for(;Q<14;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if(U.nlen=257+(31&J),J>>>=5,Q-=5,U.ndist=1+(31&J),J>>>=5,Q-=5,U.ncode=4+(15&J),J>>>=4,Q-=4,286<U.nlen||30<U.ndist){M.msg="too many length or distance symbols",U.mode=30;break}U.have=0,U.mode=18;case 18:for(;U.have<U.ncode;){for(;Q<3;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}U.lens[Se[U.have++]]=7&J,J>>>=3,Q-=3}for(;U.have<19;)U.lens[Se[U.have++]]=0;if(U.lencode=U.lendyn,U.lenbits=7,Te={bits:U.lenbits},Ee=u(0,U.lens,0,19,U.lencode,0,U.work,Te),U.lenbits=Te.bits,Ee){M.msg="invalid code lengths set",U.mode=30;break}U.have=0,U.mode=19;case 19:for(;U.have<U.nlen+U.ndist;){for(;ve=(oe=U.lencode[J&(1<<U.lenbits)-1])>>>16&255,Be=65535&oe,!((_e=oe>>>24)<=Q);){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if(Be<16)J>>>=_e,Q-=_e,U.lens[U.have++]=Be;else{if(Be===16){for(fe=_e+2;Q<fe;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if(J>>>=_e,Q-=_e,U.have===0){M.msg="invalid bit length repeat",U.mode=30;break}$=U.lens[U.have-1],ge=3+(3&J),J>>>=2,Q-=2}else if(Be===17){for(fe=_e+3;Q<fe;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}Q-=_e,$=0,ge=3+(7&(J>>>=_e)),J>>>=3,Q-=3}else{for(fe=_e+7;Q<fe;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}Q-=_e,$=0,ge=11+(127&(J>>>=_e)),J>>>=7,Q-=7}if(U.have+ge>U.nlen+U.ndist){M.msg="invalid bit length repeat",U.mode=30;break}for(;ge--;)U.lens[U.have++]=$}}if(U.mode===30)break;if(U.lens[256]===0){M.msg="invalid code -- missing end-of-block",U.mode=30;break}if(U.lenbits=9,Te={bits:U.lenbits},Ee=u(d,U.lens,0,U.nlen,U.lencode,0,U.work,Te),U.lenbits=Te.bits,Ee){M.msg="invalid literal/lengths set",U.mode=30;break}if(U.distbits=6,U.distcode=U.distdyn,Te={bits:U.distbits},Ee=u(h,U.lens,U.nlen,U.ndist,U.distcode,0,U.work,Te),U.distbits=Te.bits,Ee){M.msg="invalid distances set",U.mode=30;break}if(U.mode=20,K===6)break e;case 20:U.mode=21;case 21:if(6<=ne&&258<=q){M.next_out=X,M.avail_out=q,M.next_in=re,M.avail_in=ne,U.hold=J,U.bits=Q,l(M,ue),X=M.next_out,ie=M.output,q=M.avail_out,re=M.next_in,se=M.input,ne=M.avail_in,J=U.hold,Q=U.bits,U.mode===12&&(U.back=-1);break}for(U.back=0;ve=(oe=U.lencode[J&(1<<U.lenbits)-1])>>>16&255,Be=65535&oe,!((_e=oe>>>24)<=Q);){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if(ve&&(240&ve)==0){for(nt=_e,Ve=ve,De=Be;ve=(oe=U.lencode[De+((J&(1<<nt+Ve)-1)>>nt)])>>>16&255,Be=65535&oe,!(nt+(_e=oe>>>24)<=Q);){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}J>>>=nt,Q-=nt,U.back+=nt}if(J>>>=_e,Q-=_e,U.back+=_e,U.length=Be,ve===0){U.mode=26;break}if(32&ve){U.back=-1,U.mode=12;break}if(64&ve){M.msg="invalid literal/length code",U.mode=30;break}U.extra=15&ve,U.mode=22;case 22:if(U.extra){for(fe=U.extra;Q<fe;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}U.length+=J&(1<<U.extra)-1,J>>>=U.extra,Q-=U.extra,U.back+=U.extra}U.was=U.length,U.mode=23;case 23:for(;ve=(oe=U.distcode[J&(1<<U.distbits)-1])>>>16&255,Be=65535&oe,!((_e=oe>>>24)<=Q);){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if((240&ve)==0){for(nt=_e,Ve=ve,De=Be;ve=(oe=U.distcode[De+((J&(1<<nt+Ve)-1)>>nt)])>>>16&255,Be=65535&oe,!(nt+(_e=oe>>>24)<=Q);){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}J>>>=nt,Q-=nt,U.back+=nt}if(J>>>=_e,Q-=_e,U.back+=_e,64&ve){M.msg="invalid distance code",U.mode=30;break}U.offset=Be,U.extra=15&ve,U.mode=24;case 24:if(U.extra){for(fe=U.extra;Q<fe;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}U.offset+=J&(1<<U.extra)-1,J>>>=U.extra,Q-=U.extra,U.back+=U.extra}if(U.offset>U.dmax){M.msg="invalid distance too far back",U.mode=30;break}U.mode=25;case 25:if(q===0)break e;if(ge=ue-q,U.offset>ge){if((ge=U.offset-ge)>U.whave&&U.sane){M.msg="invalid distance too far back",U.mode=30;break}Ie=ge>U.wnext?(ge-=U.wnext,U.wsize-ge):U.wnext-ge,ge>U.length&&(ge=U.length),Ae=U.window}else Ae=ie,Ie=X-U.offset,ge=U.length;for(q<ge&&(ge=q),q-=ge,U.length-=ge;ie[X++]=Ae[Ie++],--ge;);U.length===0&&(U.mode=21);break;case 26:if(q===0)break e;ie[X++]=U.length,q--,U.mode=21;break;case 27:if(U.wrap){for(;Q<32;){if(ne===0)break e;ne--,J|=se[re++]<<Q,Q+=8}if(ue-=q,M.total_out+=ue,U.total+=ue,ue&&(M.adler=U.check=U.flags?o(U.check,ie,ue,X-ue):s(U.check,ie,ue,X-ue)),ue=q,(U.flags?J:x(J))!==U.check){M.msg="incorrect data check",U.mode=30;break}Q=J=0}U.mode=28;case 28:if(U.wrap&&U.flags){for(;Q<32;){if(ne===0)break e;ne--,J+=se[re++]<<Q,Q+=8}if(J!==(4294967295&U.total)){M.msg="incorrect length check",U.mode=30;break}Q=J=0}U.mode=29;case 29:Ee=1;break e;case 30:Ee=-3;break e;case 31:return-4;case 32:default:return g}return M.next_out=X,M.avail_out=q,M.next_in=re,M.avail_in=ne,U.hold=J,U.bits=Q,(U.wsize||ue!==M.avail_out&&U.mode<30&&(U.mode<27||K!==4))&&H(M,M.output,M.next_out,ue-M.avail_out)?(U.mode=31,-4):(te-=M.avail_in,ue-=M.avail_out,M.total_in+=te,M.total_out+=ue,U.total+=ue,U.wrap&&ue&&(M.adler=U.check=U.flags?o(U.check,ie,ue,M.next_out-ue):s(U.check,ie,ue,M.next_out-ue)),M.data_type=U.bits+(U.last?64:0)+(U.mode===12?128:0)+(U.mode===20||U.mode===15?256:0),(te==0&&ue===0||K===4)&&Ee===m&&(Ee=-5),Ee)},a.inflateEnd=function(M){if(!M||!M.state)return g;var K=M.state;return K.window&&(K.window=null),M.state=null,m},a.inflateGetHeader=function(M,K){var U;return M&&M.state?(2&(U=M.state).wrap)==0?g:((U.head=K).done=!1,m):g},a.inflateSetDictionary=function(M,K){var U,se=K.length;return M&&M.state?(U=M.state).wrap!==0&&U.mode!==11?g:U.mode===11&&s(1,K,se,0)!==U.check?-3:H(M,K,se,se)?(U.mode=31,-4):(U.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,m,g,v,b,w,x){var _,E,C,k,I,j,N,P,L,H=x.bits,M=0,K=0,U=0,se=0,ie=0,re=0,X=0,ne=0,q=0,J=0,Q=null,te=0,ue=new i.Buf16(16),ge=new i.Buf16(16),Ie=null,Ae=0;for(M=0;M<=15;M++)ue[M]=0;for(K=0;K<g;K++)ue[h[m+K]]++;for(ie=H,se=15;1<=se&&ue[se]===0;se--);if(se<ie&&(ie=se),se===0)return v[b++]=20971520,v[b++]=20971520,x.bits=1,0;for(U=1;U<se&&ue[U]===0;U++);for(ie<U&&(ie=U),M=ne=1;M<=15;M++)if(ne<<=1,(ne-=ue[M])<0)return-1;if(0<ne&&(d===0||se!==1))return-1;for(ge[1]=0,M=1;M<15;M++)ge[M+1]=ge[M]+ue[M];for(K=0;K<g;K++)h[m+K]!==0&&(w[ge[h[m+K]]++]=K);if(j=d===0?(Q=Ie=w,19):d===1?(Q=s,te-=257,Ie=o,Ae-=257,256):(Q=l,Ie=u,-1),M=U,I=b,X=K=J=0,C=-1,k=(q=1<<(re=ie))-1,d===1&&852<q||d===2&&592<q)return 1;for(;;){for(N=M-X,L=w[K]<j?(P=0,w[K]):w[K]>j?(P=Ie[Ae+w[K]],Q[te+w[K]]):(P=96,0),_=1<<M-X,U=E=1<<re;v[I+(J>>X)+(E-=_)]=N<<24|P<<16|L|0,E!==0;);for(_=1<<M-1;J&_;)_>>=1;if(_!==0?(J&=_-1,J+=_):J=0,K++,--ue[M]==0){if(M===se)break;M=h[m+w[K]]}if(ie<M&&(J&k)!==C){for(X===0&&(X=ie),I+=U,ne=1<<(re=M-X);re+X<se&&!((ne-=ue[re+X])<=0);)re++,ne<<=1;if(q+=1<<re,d===1&&852<q||d===2&&592<q)return 1;v[C=J&k]=ie<<24|re<<16|I-b|0}}return J!==0&&(v[I+J]=M-X<<24|64<<16|0),x.bits=ie,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),s=0,o=1;function l(oe){for(var ee=oe.length;0<=--ee;)oe[ee]=0}var u=0,d=29,h=256,m=h+1+d,g=30,v=19,b=2*m+1,w=15,x=16,_=7,E=256,C=16,k=17,I=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=new Array(2*(m+2));l(H);var M=new Array(2*g);l(M);var K=new Array(512);l(K);var U=new Array(256);l(U);var se=new Array(d);l(se);var ie,re,X,ne=new Array(g);function q(oe,ee,Se,Pe,ke){this.static_tree=oe,this.extra_bits=ee,this.extra_base=Se,this.elems=Pe,this.max_length=ke,this.has_stree=oe&&oe.length}function J(oe,ee){this.dyn_tree=oe,this.max_code=0,this.stat_desc=ee}function Q(oe){return oe<256?K[oe]:K[256+(oe>>>7)]}function te(oe,ee){oe.pending_buf[oe.pending++]=255&ee,oe.pending_buf[oe.pending++]=ee>>>8&255}function ue(oe,ee,Se){oe.bi_valid>x-Se?(oe.bi_buf|=ee<<oe.bi_valid&65535,te(oe,oe.bi_buf),oe.bi_buf=ee>>x-oe.bi_valid,oe.bi_valid+=Se-x):(oe.bi_buf|=ee<<oe.bi_valid&65535,oe.bi_valid+=Se)}function ge(oe,ee,Se){ue(oe,Se[2*ee],Se[2*ee+1])}function Ie(oe,ee){for(var Se=0;Se|=1&oe,oe>>>=1,Se<<=1,0<--ee;);return Se>>>1}function Ae(oe,ee,Se){var Pe,ke,We=new Array(w+1),Nt=0;for(Pe=1;Pe<=w;Pe++)We[Pe]=Nt=Nt+Se[Pe-1]<<1;for(ke=0;ke<=ee;ke++){var it=oe[2*ke+1];it!==0&&(oe[2*ke]=Ie(We[it]++,it))}}function _e(oe){var ee;for(ee=0;ee<m;ee++)oe.dyn_ltree[2*ee]=0;for(ee=0;ee<g;ee++)oe.dyn_dtree[2*ee]=0;for(ee=0;ee<v;ee++)oe.bl_tree[2*ee]=0;oe.dyn_ltree[2*E]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function ve(oe){8<oe.bi_valid?te(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function Be(oe,ee,Se,Pe){var ke=2*ee,We=2*Se;return oe[ke]<oe[We]||oe[ke]===oe[We]&&Pe[ee]<=Pe[Se]}function nt(oe,ee,Se){for(var Pe=oe.heap[Se],ke=Se<<1;ke<=oe.heap_len&&(ke<oe.heap_len&&Be(ee,oe.heap[ke+1],oe.heap[ke],oe.depth)&&ke++,!Be(ee,Pe,oe.heap[ke],oe.depth));)oe.heap[Se]=oe.heap[ke],Se=ke,ke<<=1;oe.heap[Se]=Pe}function Ve(oe,ee,Se){var Pe,ke,We,Nt,it=0;if(oe.last_lit!==0)for(;Pe=oe.pending_buf[oe.d_buf+2*it]<<8|oe.pending_buf[oe.d_buf+2*it+1],ke=oe.pending_buf[oe.l_buf+it],it++,Pe===0?ge(oe,ke,ee):(ge(oe,(We=U[ke])+h+1,ee),(Nt=j[We])!==0&&ue(oe,ke-=se[We],Nt),ge(oe,We=Q(--Pe),Se),(Nt=N[We])!==0&&ue(oe,Pe-=ne[We],Nt)),it<oe.last_lit;);ge(oe,E,ee)}function De(oe,ee){var Se,Pe,ke,We=ee.dyn_tree,Nt=ee.stat_desc.static_tree,it=ee.stat_desc.has_stree,Et=ee.stat_desc.elems,Ft=-1;for(oe.heap_len=0,oe.heap_max=b,Se=0;Se<Et;Se++)We[2*Se]!==0?(oe.heap[++oe.heap_len]=Ft=Se,oe.depth[Se]=0):We[2*Se+1]=0;for(;oe.heap_len<2;)We[2*(ke=oe.heap[++oe.heap_len]=Ft<2?++Ft:0)]=1,oe.depth[ke]=0,oe.opt_len--,it&&(oe.static_len-=Nt[2*ke+1]);for(ee.max_code=Ft,Se=oe.heap_len>>1;1<=Se;Se--)nt(oe,We,Se);for(ke=Et;Se=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],nt(oe,We,1),Pe=oe.heap[1],oe.heap[--oe.heap_max]=Se,oe.heap[--oe.heap_max]=Pe,We[2*ke]=We[2*Se]+We[2*Pe],oe.depth[ke]=(oe.depth[Se]>=oe.depth[Pe]?oe.depth[Se]:oe.depth[Pe])+1,We[2*Se+1]=We[2*Pe+1]=ke,oe.heap[1]=ke++,nt(oe,We,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],function(Mt,Yt){var be,D,W,he,je,we,Ne=Yt.dyn_tree,ce=Yt.max_code,ft=Yt.stat_desc.static_tree,vt=Yt.stat_desc.has_stree,F=Yt.stat_desc.extra_bits,Le=Yt.stat_desc.extra_base,tt=Yt.stat_desc.max_length,ye=0;for(he=0;he<=w;he++)Mt.bl_count[he]=0;for(Ne[2*Mt.heap[Mt.heap_max]+1]=0,be=Mt.heap_max+1;be<b;be++)tt<(he=Ne[2*Ne[2*(D=Mt.heap[be])+1]+1]+1)&&(he=tt,ye++),Ne[2*D+1]=he,ce<D||(Mt.bl_count[he]++,je=0,Le<=D&&(je=F[D-Le]),we=Ne[2*D],Mt.opt_len+=we*(he+je),vt&&(Mt.static_len+=we*(ft[2*D+1]+je)));if(ye!==0){do{for(he=tt-1;Mt.bl_count[he]===0;)he--;Mt.bl_count[he]--,Mt.bl_count[he+1]+=2,Mt.bl_count[tt]--,ye-=2}while(0<ye);for(he=tt;he!==0;he--)for(D=Mt.bl_count[he];D!==0;)ce<(W=Mt.heap[--be])||(Ne[2*W+1]!==he&&(Mt.opt_len+=(he-Ne[2*W+1])*Ne[2*W],Ne[2*W+1]=he),D--)}}(oe,ee),Ae(We,Ft,oe.bl_count)}function $(oe,ee,Se){var Pe,ke,We=-1,Nt=ee[1],it=0,Et=7,Ft=4;for(Nt===0&&(Et=138,Ft=3),ee[2*(Se+1)+1]=65535,Pe=0;Pe<=Se;Pe++)ke=Nt,Nt=ee[2*(Pe+1)+1],++it<Et&&ke===Nt||(it<Ft?oe.bl_tree[2*ke]+=it:ke!==0?(ke!==We&&oe.bl_tree[2*ke]++,oe.bl_tree[2*C]++):it<=10?oe.bl_tree[2*k]++:oe.bl_tree[2*I]++,We=ke,Ft=(it=0)===Nt?(Et=138,3):ke===Nt?(Et=6,3):(Et=7,4))}function Ee(oe,ee,Se){var Pe,ke,We=-1,Nt=ee[1],it=0,Et=7,Ft=4;for(Nt===0&&(Et=138,Ft=3),Pe=0;Pe<=Se;Pe++)if(ke=Nt,Nt=ee[2*(Pe+1)+1],!(++it<Et&&ke===Nt)){if(it<Ft)for(;ge(oe,ke,oe.bl_tree),--it!=0;);else ke!==0?(ke!==We&&(ge(oe,ke,oe.bl_tree),it--),ge(oe,C,oe.bl_tree),ue(oe,it-3,2)):it<=10?(ge(oe,k,oe.bl_tree),ue(oe,it-3,3)):(ge(oe,I,oe.bl_tree),ue(oe,it-11,7));We=ke,Ft=(it=0)===Nt?(Et=138,3):ke===Nt?(Et=6,3):(Et=7,4)}}l(ne);var Te=!1;function fe(oe,ee,Se,Pe){ue(oe,(u<<1)+(Pe?1:0),3),function(ke,We,Nt,it){ve(ke),te(ke,Nt),te(ke,~Nt),i.arraySet(ke.pending_buf,ke.window,We,Nt,ke.pending),ke.pending+=Nt}(oe,ee,Se)}a._tr_init=function(oe){Te||(function(){var ee,Se,Pe,ke,We,Nt=new Array(w+1);for(ke=Pe=0;ke<d-1;ke++)for(se[ke]=Pe,ee=0;ee<1<<j[ke];ee++)U[Pe++]=ke;for(U[Pe-1]=ke,ke=We=0;ke<16;ke++)for(ne[ke]=We,ee=0;ee<1<<N[ke];ee++)K[We++]=ke;for(We>>=7;ke<g;ke++)for(ne[ke]=We<<7,ee=0;ee<1<<N[ke]-7;ee++)K[256+We++]=ke;for(Se=0;Se<=w;Se++)Nt[Se]=0;for(ee=0;ee<=143;)H[2*ee+1]=8,ee++,Nt[8]++;for(;ee<=255;)H[2*ee+1]=9,ee++,Nt[9]++;for(;ee<=279;)H[2*ee+1]=7,ee++,Nt[7]++;for(;ee<=287;)H[2*ee+1]=8,ee++,Nt[8]++;for(Ae(H,m+1,Nt),ee=0;ee<g;ee++)M[2*ee+1]=5,M[2*ee]=Ie(ee,5);ie=new q(H,j,h+1,m,w),re=new q(M,N,0,g,w),X=new q(new Array(0),P,0,v,_)}(),Te=!0),oe.l_desc=new J(oe.dyn_ltree,ie),oe.d_desc=new J(oe.dyn_dtree,re),oe.bl_desc=new J(oe.bl_tree,X),oe.bi_buf=0,oe.bi_valid=0,_e(oe)},a._tr_stored_block=fe,a._tr_flush_block=function(oe,ee,Se,Pe){var ke,We,Nt=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=function(it){var Et,Ft=4093624447;for(Et=0;Et<=31;Et++,Ft>>>=1)if(1&Ft&&it.dyn_ltree[2*Et]!==0)return s;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return o;for(Et=32;Et<h;Et++)if(it.dyn_ltree[2*Et]!==0)return o;return s}(oe)),De(oe,oe.l_desc),De(oe,oe.d_desc),Nt=function(it){var Et;for($(it,it.dyn_ltree,it.l_desc.max_code),$(it,it.dyn_dtree,it.d_desc.max_code),De(it,it.bl_desc),Et=v-1;3<=Et&&it.bl_tree[2*L[Et]+1]===0;Et--);return it.opt_len+=3*(Et+1)+5+5+4,Et}(oe),ke=oe.opt_len+3+7>>>3,(We=oe.static_len+3+7>>>3)<=ke&&(ke=We)):ke=We=Se+5,Se+4<=ke&&ee!==-1?fe(oe,ee,Se,Pe):oe.strategy===4||We===ke?(ue(oe,2+(Pe?1:0),3),Ve(oe,H,M)):(ue(oe,4+(Pe?1:0),3),function(it,Et,Ft,Mt){var Yt;for(ue(it,Et-257,5),ue(it,Ft-1,5),ue(it,Mt-4,4),Yt=0;Yt<Mt;Yt++)ue(it,it.bl_tree[2*L[Yt]+1],3);Ee(it,it.dyn_ltree,Et-1),Ee(it,it.dyn_dtree,Ft-1)}(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,Nt+1),Ve(oe,oe.dyn_ltree,oe.dyn_dtree)),_e(oe),Pe&&ve(oe)},a._tr_tally=function(oe,ee,Se){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=ee>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&ee,oe.pending_buf[oe.l_buf+oe.last_lit]=255&Se,oe.last_lit++,ee===0?oe.dyn_ltree[2*Se]++:(oe.matches++,ee--,oe.dyn_ltree[2*(U[Se]+h+1)]++,oe.dyn_dtree[2*Q(ee)]++),oe.last_lit===oe.lit_bufsize-1},a._tr_align=function(oe){ue(oe,2,3),ge(oe,E,H),function(ee){ee.bi_valid===16?(te(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(oe)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(s,o){if(!s.setImmediate){var l,u,d,h,m=1,g={},v=!1,b=s.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(s);w=w&&w.setTimeout?w:s,l={}.toString.call(s.process)==="[object process]"?function(C){da.nextTick(function(){_(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,k=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(C){s.postMessage(h+C,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){_(C.data)},function(C){d.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){_(C),k.onreadystatechange=null,u.removeChild(k),k=null},u.appendChild(k)}):function(C){setTimeout(_,0,C)},w.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),I=0;I<k.length;I++)k[I]=arguments[I+1];var j={callback:C,args:k};return g[m]=j,l(m),m++},w.clearImmediate=x}function x(C){delete g[C]}function _(C){if(v)setTimeout(_,0,C);else{var k=g[C];if(k){v=!0;try{(function(I){var j=I.callback,N=I.args;switch(N.length){case 0:j();break;case 1:j(N[0]);break;case 2:j(N[0],N[1]);break;case 3:j(N[0],N[1],N[2]);break;default:j.apply(o,N)}})(k)}finally{x(C),v=!1}}}}function E(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(h)===0&&_(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ef<"u"?ef:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(UE)),UE.exports}var Doe=joe();const M9=vi(Doe),O0=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},tr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},vl=(...e)=>tr(e.map(t=>t.trim()).filter(Boolean).join("/")),r_=e=>{const t=tr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},Sa=e=>{const t=tr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},sk=(e,t)=>tr(e==="/"?`/${t}`:`${e}/${t}`);var VE,SD;function Moe(){if(SD)return VE;SD=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof da>"u"||typeof da.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof r!="function"&&(a=r,r=null,o=new this.Promise(function(E,C){i=E,s=C})),a=a||{};var l=!1,u=null,d=null,h=null,m=this,g=function(E,C,k){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),l||(o?C?s(C):i(k):typeof r=="function"&&r(C,k),l=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},v=function(E){if(l)return g(E);u&&(clearTimeout(u),u=null),m.domainReentrant&&E&&(m.domains[t]=da.domain);var C=a.maxExecutionTime||m.maxExecutionTime;if(C&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(I,j){k||(k=!0,g(E,I,j))})}catch(I){k||(k=!0,g(E,I))}}else m._promiseTry(function(){return n()}).then(function(I){g(E,void 0,I)},function(I){g(E,I)})};m.domainReentrant&&da.domain&&(v=da.domain.bind(v));var b=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],v(!0);else if(m.domainReentrant&&da.domain&&da.domain===m.domains[t])v(!1);else if(m.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var w=function(){v(!0)};a.skipQueue?m.queues[t].unshift(w):m.queues[t].push(w);var x=a.timeout||m.timeout;x&&(u=setTimeout(function(){u=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var _=a.maxOccupationTime||m.maxOccupationTime;if(_&&(d=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},_)),o)return o},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,s=function(l,u){return function(d){i.acquire(l,u,d,a)}},o=t.reduceRight(function(l,u){return s(u,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,u){o.length===1?o(function(d,h){d?u(d):l(h)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},VE=e,VE}var HE,ED;function Ooe(){return ED||(ED=1,HE=Moe()),HE}var Poe=Ooe();const P0=vi(Poe);var dw={exports:{}},CD;function Foe(){return CD||(CD=1,typeof Object.create=="function"?dw.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:dw.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),dw.exports}var qE,TD;function Loe(){if(TD)return qE;TD=1;var e=uN().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,s=n.length,o=this._len,l=0;l<s;){for(var u=o%i,d=Math.min(s-l,i-u),h=0;h<d;h++)a[u+h]=n[l+h];o+=d,l+=d,o%i===0&&this._update(a)}return this._len+=s,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,s=(a-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},qE=t,qE}var GE,kD;function Boe(){if(kD)return GE;kD=1;var e=Foe(),t=Loe(),n=uN().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(d){return d<<1|d>>>31}function o(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function u(d,h,m,g){return d===0?h&m|~h&g:d===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(d){for(var h=this._w,m=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,w=this._e|0,x=0;x<16;++x)h[x]=d.readInt32BE(x*4);for(;x<80;++x)h[x]=s(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var _=0;_<80;++_){var E=~~(_/20),C=o(m)+u(E,g,v,b)+w+h[_]+r[E]|0;w=b,b=v,v=l(g),g=m,m=C}this._a=m+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=w+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},GE=i,GE}var $oe=Boe();const O9=vi($oe);var WE,AD;function zoe(){if(AD)return WE;AD=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var s="",o=0,l=-1,u=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||u===1))if(l!==h-1&&u===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=h,u=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=h,u=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+a.slice(l+1,h):s=a.slice(l+1,h),o=h-l-1;l=h,u=0}else d===46&&u!==-1?++u:u=-1}return s}function n(a,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+a+o:o}var r={resolve:function(){for(var i="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var u;l>=0?u=arguments[l]:(o===void 0&&(o=da.cwd()),u=o),e(u),u.length!==0&&(i=u+"/"+i,s=u.charCodeAt(0)===47)}return i=t(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var s=i.charCodeAt(0)===47,o=i.charCodeAt(i.length-1)===47;return i=t(i,!s),i.length===0&&!s&&(i="."),i.length>0&&o&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":r.normalize(i)},relative:function(i,s){if(e(i),e(s),i===s||(i=r.resolve(i),s=r.resolve(s),i===s))return"";for(var o=1;o<i.length&&i.charCodeAt(o)===47;++o);for(var l=i.length,u=l-o,d=1;d<s.length&&s.charCodeAt(d)===47;++d);for(var h=s.length,m=h-d,g=u<m?u:m,v=-1,b=0;b<=g;++b){if(b===g){if(m>g){if(s.charCodeAt(d+b)===47)return s.slice(d+b+1);if(b===0)return s.slice(d+b)}else u>g&&(i.charCodeAt(o+b)===47?v=b:b===0&&(v=0));break}var w=i.charCodeAt(o+b),x=s.charCodeAt(d+b);if(w!==x)break;w===47&&(v=b)}var _="";for(b=o+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+s.slice(d+v):(d+=v,s.charCodeAt(d)===47&&++d,s.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var s=i.charCodeAt(0),o=s===47,l=-1,u=!0,d=i.length-1;d>=1;--d)if(s=i.charCodeAt(d),s===47){if(!u){l=d;break}}else u=!1;return l===-1?o?"/":".":o&&l===1?"//":i.slice(0,l)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(i);var o=0,l=-1,u=!0,d;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var h=s.length-1,m=-1;for(d=i.length-1;d>=0;--d){var g=i.charCodeAt(d);if(g===47){if(!u){o=d+1;break}}else m===-1&&(u=!1,m=d+1),h>=0&&(g===s.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=m))}return o===l?l=m:l===-1&&(l=i.length),i.slice(o,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!u){o=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":i.slice(o,l)}},extname:function(i){e(i);for(var s=-1,o=0,l=-1,u=!0,d=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!u){o=h+1;break}continue}l===-1&&(u=!1,l=h+1),m===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===o+1?"":i.slice(s,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var o=i.charCodeAt(0),l=o===47,u;l?(s.root="/",u=1):u=0;for(var d=-1,h=0,m=-1,g=!0,v=i.length-1,b=0;v>=u;--v){if(o=i.charCodeAt(v),o===47){if(!g){h=v+1;break}continue}m===-1&&(g=!1,m=v+1),o===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||m===-1||b===0||b===1&&d===m-1&&d===h+1?m!==-1&&(h===0&&l?s.base=s.name=i.slice(1,m):s.base=s.name=i.slice(h,m)):(h===0&&l?(s.name=i.slice(1,d),s.base=i.slice(1,m)):(s.name=i.slice(h,d),s.base=i.slice(h,m)),s.ext=i.slice(d,m)),h>0?s.dir=i.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,WE=r,WE}var Pt=zoe(),KE={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var ND;function Uoe(){return ND||(ND=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var N=0,P=new Array(256),L=0;L!=256;++L)N=L,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,P[L]=N;return typeof Int32Array<"u"?new Int32Array(P):P}var r=n();function a(N){var P=0,L=0,H=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(H=0;H!=256;++H)M[H]=N[H];for(H=0;H!=256;++H)for(L=N[H],P=256+H;P<4096;P+=256)L=M[P]=L>>>8^N[L&255];var K=[];for(H=1;H!=16;++H)K[H-1]=typeof Int32Array<"u"?M.subarray(H*256,H*256+256):M.slice(H*256,H*256+256);return K}var i=a(r),s=i[0],o=i[1],l=i[2],u=i[3],d=i[4],h=i[5],m=i[6],g=i[7],v=i[8],b=i[9],w=i[10],x=i[11],_=i[12],E=i[13],C=i[14];function k(N,P){for(var L=P^-1,H=0,M=N.length;H<M;)L=L>>>8^r[(L^N.charCodeAt(H++))&255];return~L}function I(N,P){for(var L=P^-1,H=N.length-15,M=0;M<H;)L=C[N[M++]^L&255]^E[N[M++]^L>>8&255]^_[N[M++]^L>>16&255]^x[N[M++]^L>>>24]^w[N[M++]]^b[N[M++]]^v[N[M++]]^g[N[M++]]^m[N[M++]]^h[N[M++]]^d[N[M++]]^u[N[M++]]^l[N[M++]]^o[N[M++]]^s[N[M++]]^r[N[M++]];for(H+=15;M<H;)L=L>>>8^r[(L^N[M++])&255];return~L}function j(N,P){for(var L=P^-1,H=0,M=N.length,K=0,U=0;H<M;)K=N.charCodeAt(H++),K<128?L=L>>>8^r[(L^K)&255]:K<2048?(L=L>>>8^r[(L^(192|K>>6&31))&255],L=L>>>8^r[(L^(128|K&63))&255]):K>=55296&&K<57344?(K=(K&1023)+64,U=N.charCodeAt(H++)&1023,L=L>>>8^r[(L^(240|K>>8&7))&255],L=L>>>8^r[(L^(128|K>>2&63))&255],L=L>>>8^r[(L^(128|U>>6&15|(K&3)<<4))&255],L=L>>>8^r[(L^(128|U&63))&255]):(L=L>>>8^r[(L^(224|K>>12&15))&255],L=L>>>8^r[(L^(128|K>>6&63))&255],L=L>>>8^r[(L^(128|K&63))&255]);return~L}t.table=r,t.bstr=k,t.buf=I,t.str=j})}(KE)),KE}var Voe=Uoe();const Hoe=vi(Voe);var ZE={},RD;function fd(){return RD||(RD=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,s){return Object.prototype.hasOwnProperty.call(i,s)}e.assign=function(i){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var o=s.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(i[l]=o[l])}}return i},e.shrinkBuf=function(i,s){return i.length===s?i:i.subarray?i.subarray(0,s):(i.length=s,i)};var r={arraySet:function(i,s,o,l,u){if(s.subarray&&i.subarray){i.set(s.subarray(o,o+l),u);return}for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){var s,o,l,u,d,h;for(l=0,s=0,o=i.length;s<o;s++)l+=i[s].length;for(h=new Uint8Array(l),u=0,s=0,o=i.length;s<o;s++)d=i[s],h.set(d,u),u+=d.length;return h}},a={arraySet:function(i,s,o,l,u){for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(ZE)),ZE}var Bh={},oo={},qd={},ID;function qoe(){if(ID)return qd;ID=1;var e=fd(),t=4,n=0,r=1,a=2;function i(D){for(var W=D.length;--W>=0;)D[W]=0}var s=0,o=1,l=2,u=3,d=258,h=29,m=256,g=m+1+h,v=30,b=19,w=2*g+1,x=15,_=16,E=7,C=256,k=16,I=17,j=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=512,K=new Array((g+2)*2);i(K);var U=new Array(v*2);i(U);var se=new Array(M);i(se);var ie=new Array(d-u+1);i(ie);var re=new Array(h);i(re);var X=new Array(v);i(X);function ne(D,W,he,je,we){this.static_tree=D,this.extra_bits=W,this.extra_base=he,this.elems=je,this.max_length=we,this.has_stree=D&&D.length}var q,J,Q;function te(D,W){this.dyn_tree=D,this.max_code=0,this.stat_desc=W}function ue(D){return D<256?se[D]:se[256+(D>>>7)]}function ge(D,W){D.pending_buf[D.pending++]=W&255,D.pending_buf[D.pending++]=W>>>8&255}function Ie(D,W,he){D.bi_valid>_-he?(D.bi_buf|=W<<D.bi_valid&65535,ge(D,D.bi_buf),D.bi_buf=W>>_-D.bi_valid,D.bi_valid+=he-_):(D.bi_buf|=W<<D.bi_valid&65535,D.bi_valid+=he)}function Ae(D,W,he){Ie(D,he[W*2],he[W*2+1])}function _e(D,W){var he=0;do he|=D&1,D>>>=1,he<<=1;while(--W>0);return he>>>1}function ve(D){D.bi_valid===16?(ge(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function Be(D,W){var he=W.dyn_tree,je=W.max_code,we=W.stat_desc.static_tree,Ne=W.stat_desc.has_stree,ce=W.stat_desc.extra_bits,ft=W.stat_desc.extra_base,vt=W.stat_desc.max_length,F,Le,tt,ye,Me,Ke,Dt=0;for(ye=0;ye<=x;ye++)D.bl_count[ye]=0;for(he[D.heap[D.heap_max]*2+1]=0,F=D.heap_max+1;F<w;F++)Le=D.heap[F],ye=he[he[Le*2+1]*2+1]+1,ye>vt&&(ye=vt,Dt++),he[Le*2+1]=ye,!(Le>je)&&(D.bl_count[ye]++,Me=0,Le>=ft&&(Me=ce[Le-ft]),Ke=he[Le*2],D.opt_len+=Ke*(ye+Me),Ne&&(D.static_len+=Ke*(we[Le*2+1]+Me)));if(Dt!==0){do{for(ye=vt-1;D.bl_count[ye]===0;)ye--;D.bl_count[ye]--,D.bl_count[ye+1]+=2,D.bl_count[vt]--,Dt-=2}while(Dt>0);for(ye=vt;ye!==0;ye--)for(Le=D.bl_count[ye];Le!==0;)tt=D.heap[--F],!(tt>je)&&(he[tt*2+1]!==ye&&(D.opt_len+=(ye-he[tt*2+1])*he[tt*2],he[tt*2+1]=ye),Le--)}}function nt(D,W,he){var je=new Array(x+1),we=0,Ne,ce;for(Ne=1;Ne<=x;Ne++)je[Ne]=we=we+he[Ne-1]<<1;for(ce=0;ce<=W;ce++){var ft=D[ce*2+1];ft!==0&&(D[ce*2]=_e(je[ft]++,ft))}}function Ve(){var D,W,he,je,we,Ne=new Array(x+1);for(he=0,je=0;je<h-1;je++)for(re[je]=he,D=0;D<1<<N[je];D++)ie[he++]=je;for(ie[he-1]=je,we=0,je=0;je<16;je++)for(X[je]=we,D=0;D<1<<P[je];D++)se[we++]=je;for(we>>=7;je<v;je++)for(X[je]=we<<7,D=0;D<1<<P[je]-7;D++)se[256+we++]=je;for(W=0;W<=x;W++)Ne[W]=0;for(D=0;D<=143;)K[D*2+1]=8,D++,Ne[8]++;for(;D<=255;)K[D*2+1]=9,D++,Ne[9]++;for(;D<=279;)K[D*2+1]=7,D++,Ne[7]++;for(;D<=287;)K[D*2+1]=8,D++,Ne[8]++;for(nt(K,g+1,Ne),D=0;D<v;D++)U[D*2+1]=5,U[D*2]=_e(D,5);q=new ne(K,N,m+1,g,x),J=new ne(U,P,0,v,x),Q=new ne(new Array(0),L,0,b,E)}function De(D){var W;for(W=0;W<g;W++)D.dyn_ltree[W*2]=0;for(W=0;W<v;W++)D.dyn_dtree[W*2]=0;for(W=0;W<b;W++)D.bl_tree[W*2]=0;D.dyn_ltree[C*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function $(D){D.bi_valid>8?ge(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function Ee(D,W,he,je){$(D),ge(D,he),ge(D,~he),e.arraySet(D.pending_buf,D.window,W,he,D.pending),D.pending+=he}function Te(D,W,he,je){var we=W*2,Ne=he*2;return D[we]<D[Ne]||D[we]===D[Ne]&&je[W]<=je[he]}function fe(D,W,he){for(var je=D.heap[he],we=he<<1;we<=D.heap_len&&(we<D.heap_len&&Te(W,D.heap[we+1],D.heap[we],D.depth)&&we++,!Te(W,je,D.heap[we],D.depth));)D.heap[he]=D.heap[we],he=we,we<<=1;D.heap[he]=je}function oe(D,W,he){var je,we,Ne=0,ce,ft;if(D.last_lit!==0)do je=D.pending_buf[D.d_buf+Ne*2]<<8|D.pending_buf[D.d_buf+Ne*2+1],we=D.pending_buf[D.l_buf+Ne],Ne++,je===0?Ae(D,we,W):(ce=ie[we],Ae(D,ce+m+1,W),ft=N[ce],ft!==0&&(we-=re[ce],Ie(D,we,ft)),je--,ce=ue(je),Ae(D,ce,he),ft=P[ce],ft!==0&&(je-=X[ce],Ie(D,je,ft)));while(Ne<D.last_lit);Ae(D,C,W)}function ee(D,W){var he=W.dyn_tree,je=W.stat_desc.static_tree,we=W.stat_desc.has_stree,Ne=W.stat_desc.elems,ce,ft,vt=-1,F;for(D.heap_len=0,D.heap_max=w,ce=0;ce<Ne;ce++)he[ce*2]!==0?(D.heap[++D.heap_len]=vt=ce,D.depth[ce]=0):he[ce*2+1]=0;for(;D.heap_len<2;)F=D.heap[++D.heap_len]=vt<2?++vt:0,he[F*2]=1,D.depth[F]=0,D.opt_len--,we&&(D.static_len-=je[F*2+1]);for(W.max_code=vt,ce=D.heap_len>>1;ce>=1;ce--)fe(D,he,ce);F=Ne;do ce=D.heap[1],D.heap[1]=D.heap[D.heap_len--],fe(D,he,1),ft=D.heap[1],D.heap[--D.heap_max]=ce,D.heap[--D.heap_max]=ft,he[F*2]=he[ce*2]+he[ft*2],D.depth[F]=(D.depth[ce]>=D.depth[ft]?D.depth[ce]:D.depth[ft])+1,he[ce*2+1]=he[ft*2+1]=F,D.heap[1]=F++,fe(D,he,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],Be(D,W),nt(he,vt,D.bl_count)}function Se(D,W,he){var je,we=-1,Ne,ce=W[0*2+1],ft=0,vt=7,F=4;for(ce===0&&(vt=138,F=3),W[(he+1)*2+1]=65535,je=0;je<=he;je++)Ne=ce,ce=W[(je+1)*2+1],!(++ft<vt&&Ne===ce)&&(ft<F?D.bl_tree[Ne*2]+=ft:Ne!==0?(Ne!==we&&D.bl_tree[Ne*2]++,D.bl_tree[k*2]++):ft<=10?D.bl_tree[I*2]++:D.bl_tree[j*2]++,ft=0,we=Ne,ce===0?(vt=138,F=3):Ne===ce?(vt=6,F=3):(vt=7,F=4))}function Pe(D,W,he){var je,we=-1,Ne,ce=W[0*2+1],ft=0,vt=7,F=4;for(ce===0&&(vt=138,F=3),je=0;je<=he;je++)if(Ne=ce,ce=W[(je+1)*2+1],!(++ft<vt&&Ne===ce)){if(ft<F)do Ae(D,Ne,D.bl_tree);while(--ft!==0);else Ne!==0?(Ne!==we&&(Ae(D,Ne,D.bl_tree),ft--),Ae(D,k,D.bl_tree),Ie(D,ft-3,2)):ft<=10?(Ae(D,I,D.bl_tree),Ie(D,ft-3,3)):(Ae(D,j,D.bl_tree),Ie(D,ft-11,7));ft=0,we=Ne,ce===0?(vt=138,F=3):Ne===ce?(vt=6,F=3):(vt=7,F=4)}}function ke(D){var W;for(Se(D,D.dyn_ltree,D.l_desc.max_code),Se(D,D.dyn_dtree,D.d_desc.max_code),ee(D,D.bl_desc),W=b-1;W>=3&&D.bl_tree[H[W]*2+1]===0;W--);return D.opt_len+=3*(W+1)+5+5+4,W}function We(D,W,he,je){var we;for(Ie(D,W-257,5),Ie(D,he-1,5),Ie(D,je-4,4),we=0;we<je;we++)Ie(D,D.bl_tree[H[we]*2+1],3);Pe(D,D.dyn_ltree,W-1),Pe(D,D.dyn_dtree,he-1)}function Nt(D){var W=4093624447,he;for(he=0;he<=31;he++,W>>>=1)if(W&1&&D.dyn_ltree[he*2]!==0)return n;if(D.dyn_ltree[9*2]!==0||D.dyn_ltree[10*2]!==0||D.dyn_ltree[13*2]!==0)return r;for(he=32;he<m;he++)if(D.dyn_ltree[he*2]!==0)return r;return n}var it=!1;function Et(D){it||(Ve(),it=!0),D.l_desc=new te(D.dyn_ltree,q),D.d_desc=new te(D.dyn_dtree,J),D.bl_desc=new te(D.bl_tree,Q),D.bi_buf=0,D.bi_valid=0,De(D)}function Ft(D,W,he,je){Ie(D,(s<<1)+(je?1:0),3),Ee(D,W,he)}function Mt(D){Ie(D,o<<1,3),Ae(D,C,K),ve(D)}function Yt(D,W,he,je){var we,Ne,ce=0;D.level>0?(D.strm.data_type===a&&(D.strm.data_type=Nt(D)),ee(D,D.l_desc),ee(D,D.d_desc),ce=ke(D),we=D.opt_len+3+7>>>3,Ne=D.static_len+3+7>>>3,Ne<=we&&(we=Ne)):we=Ne=he+5,he+4<=we&&W!==-1?Ft(D,W,he,je):D.strategy===t||Ne===we?(Ie(D,(o<<1)+(je?1:0),3),oe(D,K,U)):(Ie(D,(l<<1)+(je?1:0),3),We(D,D.l_desc.max_code+1,D.d_desc.max_code+1,ce+1),oe(D,D.dyn_ltree,D.dyn_dtree)),De(D),je&&$(D)}function be(D,W,he){return D.pending_buf[D.d_buf+D.last_lit*2]=W>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=W&255,D.pending_buf[D.l_buf+D.last_lit]=he&255,D.last_lit++,W===0?D.dyn_ltree[he*2]++:(D.matches++,W--,D.dyn_ltree[(ie[he]+m+1)*2]++,D.dyn_dtree[ue(W)*2]++),D.last_lit===D.lit_bufsize-1}return qd._tr_init=Et,qd._tr_stored_block=Ft,qd._tr_flush_block=Yt,qd._tr_tally=be,qd._tr_align=Mt,qd}var YE,jD;function P9(){if(jD)return YE;jD=1;function e(t,n,r,a){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+n[a++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}return YE=e,YE}var XE,DD;function F9(){if(DD)return XE;DD=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,s){var o=t,l=s+i;r^=-1;for(var u=s;u<l;u++)r=r>>>8^o[(r^a[u])&255];return r^-1}return XE=n,XE}var JE,MD;function xN(){return MD||(MD=1,JE={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),JE}var OD;function Goe(){if(OD)return oo;OD=1;var e=fd(),t=qoe(),n=P9(),r=F9(),a=xN(),i=0,s=1,o=3,l=4,u=5,d=0,h=1,m=-2,g=-3,v=-5,b=-1,w=1,x=2,_=3,E=4,C=0,k=2,I=8,j=9,N=15,P=8,L=29,H=256,M=H+1+L,K=30,U=19,se=2*M+1,ie=15,re=3,X=258,ne=X+re+1,q=32,J=42,Q=69,te=73,ue=91,ge=103,Ie=113,Ae=666,_e=1,ve=2,Be=3,nt=4,Ve=3;function De(F,Le){return F.msg=a[Le],Le}function $(F){return(F<<1)-(F>4?9:0)}function Ee(F){for(var Le=F.length;--Le>=0;)F[Le]=0}function Te(F){var Le=F.state,tt=Le.pending;tt>F.avail_out&&(tt=F.avail_out),tt!==0&&(e.arraySet(F.output,Le.pending_buf,Le.pending_out,tt,F.next_out),F.next_out+=tt,Le.pending_out+=tt,F.total_out+=tt,F.avail_out-=tt,Le.pending-=tt,Le.pending===0&&(Le.pending_out=0))}function fe(F,Le){t._tr_flush_block(F,F.block_start>=0?F.block_start:-1,F.strstart-F.block_start,Le),F.block_start=F.strstart,Te(F.strm)}function oe(F,Le){F.pending_buf[F.pending++]=Le}function ee(F,Le){F.pending_buf[F.pending++]=Le>>>8&255,F.pending_buf[F.pending++]=Le&255}function Se(F,Le,tt,ye){var Me=F.avail_in;return Me>ye&&(Me=ye),Me===0?0:(F.avail_in-=Me,e.arraySet(Le,F.input,F.next_in,Me,tt),F.state.wrap===1?F.adler=n(F.adler,Le,Me,tt):F.state.wrap===2&&(F.adler=r(F.adler,Le,Me,tt)),F.next_in+=Me,F.total_in+=Me,Me)}function Pe(F,Le){var tt=F.max_chain_length,ye=F.strstart,Me,Ke,Dt=F.prev_length,me=F.nice_match,G=F.strstart>F.w_size-ne?F.strstart-(F.w_size-ne):0,V=F.window,Z=F.w_mask,pe=F.prev,Re=F.strstart+X,Ue=V[ye+Dt-1],pt=V[ye+Dt];F.prev_length>=F.good_match&&(tt>>=2),me>F.lookahead&&(me=F.lookahead);do if(Me=Le,!(V[Me+Dt]!==pt||V[Me+Dt-1]!==Ue||V[Me]!==V[ye]||V[++Me]!==V[ye+1])){ye+=2,Me++;do;while(V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&V[++ye]===V[++Me]&&ye<Re);if(Ke=X-(Re-ye),ye=Re-X,Ke>Dt){if(F.match_start=Le,Dt=Ke,Ke>=me)break;Ue=V[ye+Dt-1],pt=V[ye+Dt]}}while((Le=pe[Le&Z])>G&&--tt!==0);return Dt<=F.lookahead?Dt:F.lookahead}function ke(F){var Le=F.w_size,tt,ye,Me,Ke,Dt;do{if(Ke=F.window_size-F.lookahead-F.strstart,F.strstart>=Le+(Le-ne)){e.arraySet(F.window,F.window,Le,Le,0),F.match_start-=Le,F.strstart-=Le,F.block_start-=Le,ye=F.hash_size,tt=ye;do Me=F.head[--tt],F.head[tt]=Me>=Le?Me-Le:0;while(--ye);ye=Le,tt=ye;do Me=F.prev[--tt],F.prev[tt]=Me>=Le?Me-Le:0;while(--ye);Ke+=Le}if(F.strm.avail_in===0)break;if(ye=Se(F.strm,F.window,F.strstart+F.lookahead,Ke),F.lookahead+=ye,F.lookahead+F.insert>=re)for(Dt=F.strstart-F.insert,F.ins_h=F.window[Dt],F.ins_h=(F.ins_h<<F.hash_shift^F.window[Dt+1])&F.hash_mask;F.insert&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[Dt+re-1])&F.hash_mask,F.prev[Dt&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=Dt,Dt++,F.insert--,!(F.lookahead+F.insert<re)););}while(F.lookahead<ne&&F.strm.avail_in!==0)}function We(F,Le){var tt=65535;for(tt>F.pending_buf_size-5&&(tt=F.pending_buf_size-5);;){if(F.lookahead<=1){if(ke(F),F.lookahead===0&&Le===i)return _e;if(F.lookahead===0)break}F.strstart+=F.lookahead,F.lookahead=0;var ye=F.block_start+tt;if((F.strstart===0||F.strstart>=ye)&&(F.lookahead=F.strstart-ye,F.strstart=ye,fe(F,!1),F.strm.avail_out===0)||F.strstart-F.block_start>=F.w_size-ne&&(fe(F,!1),F.strm.avail_out===0))return _e}return F.insert=0,Le===l?(fe(F,!0),F.strm.avail_out===0?Be:nt):(F.strstart>F.block_start&&(fe(F,!1),F.strm.avail_out===0),_e)}function Nt(F,Le){for(var tt,ye;;){if(F.lookahead<ne){if(ke(F),F.lookahead<ne&&Le===i)return _e;if(F.lookahead===0)break}if(tt=0,F.lookahead>=re&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+re-1])&F.hash_mask,tt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),tt!==0&&F.strstart-tt<=F.w_size-ne&&(F.match_length=Pe(F,tt)),F.match_length>=re)if(ye=t._tr_tally(F,F.strstart-F.match_start,F.match_length-re),F.lookahead-=F.match_length,F.match_length<=F.max_lazy_match&&F.lookahead>=re){F.match_length--;do F.strstart++,F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+re-1])&F.hash_mask,tt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart;while(--F.match_length!==0);F.strstart++}else F.strstart+=F.match_length,F.match_length=0,F.ins_h=F.window[F.strstart],F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+1])&F.hash_mask;else ye=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++;if(ye&&(fe(F,!1),F.strm.avail_out===0))return _e}return F.insert=F.strstart<re-1?F.strstart:re-1,Le===l?(fe(F,!0),F.strm.avail_out===0?Be:nt):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?_e:ve}function it(F,Le){for(var tt,ye,Me;;){if(F.lookahead<ne){if(ke(F),F.lookahead<ne&&Le===i)return _e;if(F.lookahead===0)break}if(tt=0,F.lookahead>=re&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+re-1])&F.hash_mask,tt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart),F.prev_length=F.match_length,F.prev_match=F.match_start,F.match_length=re-1,tt!==0&&F.prev_length<F.max_lazy_match&&F.strstart-tt<=F.w_size-ne&&(F.match_length=Pe(F,tt),F.match_length<=5&&(F.strategy===w||F.match_length===re&&F.strstart-F.match_start>4096)&&(F.match_length=re-1)),F.prev_length>=re&&F.match_length<=F.prev_length){Me=F.strstart+F.lookahead-re,ye=t._tr_tally(F,F.strstart-1-F.prev_match,F.prev_length-re),F.lookahead-=F.prev_length-1,F.prev_length-=2;do++F.strstart<=Me&&(F.ins_h=(F.ins_h<<F.hash_shift^F.window[F.strstart+re-1])&F.hash_mask,tt=F.prev[F.strstart&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=F.strstart);while(--F.prev_length!==0);if(F.match_available=0,F.match_length=re-1,F.strstart++,ye&&(fe(F,!1),F.strm.avail_out===0))return _e}else if(F.match_available){if(ye=t._tr_tally(F,0,F.window[F.strstart-1]),ye&&fe(F,!1),F.strstart++,F.lookahead--,F.strm.avail_out===0)return _e}else F.match_available=1,F.strstart++,F.lookahead--}return F.match_available&&(ye=t._tr_tally(F,0,F.window[F.strstart-1]),F.match_available=0),F.insert=F.strstart<re-1?F.strstart:re-1,Le===l?(fe(F,!0),F.strm.avail_out===0?Be:nt):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?_e:ve}function Et(F,Le){for(var tt,ye,Me,Ke,Dt=F.window;;){if(F.lookahead<=X){if(ke(F),F.lookahead<=X&&Le===i)return _e;if(F.lookahead===0)break}if(F.match_length=0,F.lookahead>=re&&F.strstart>0&&(Me=F.strstart-1,ye=Dt[Me],ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me])){Ke=F.strstart+X;do;while(ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&ye===Dt[++Me]&&Me<Ke);F.match_length=X-(Ke-Me),F.match_length>F.lookahead&&(F.match_length=F.lookahead)}if(F.match_length>=re?(tt=t._tr_tally(F,1,F.match_length-re),F.lookahead-=F.match_length,F.strstart+=F.match_length,F.match_length=0):(tt=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++),tt&&(fe(F,!1),F.strm.avail_out===0))return _e}return F.insert=0,Le===l?(fe(F,!0),F.strm.avail_out===0?Be:nt):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?_e:ve}function Ft(F,Le){for(var tt;;){if(F.lookahead===0&&(ke(F),F.lookahead===0)){if(Le===i)return _e;break}if(F.match_length=0,tt=t._tr_tally(F,0,F.window[F.strstart]),F.lookahead--,F.strstart++,tt&&(fe(F,!1),F.strm.avail_out===0))return _e}return F.insert=0,Le===l?(fe(F,!0),F.strm.avail_out===0?Be:nt):F.last_lit&&(fe(F,!1),F.strm.avail_out===0)?_e:ve}function Mt(F,Le,tt,ye,Me){this.good_length=F,this.max_lazy=Le,this.nice_length=tt,this.max_chain=ye,this.func=Me}var Yt;Yt=[new Mt(0,0,0,0,We),new Mt(4,4,8,4,Nt),new Mt(4,5,16,8,Nt),new Mt(4,6,32,32,Nt),new Mt(4,4,16,16,it),new Mt(8,16,32,32,it),new Mt(8,16,128,128,it),new Mt(8,32,128,256,it),new Mt(32,128,258,1024,it),new Mt(32,258,258,4096,it)];function be(F){F.window_size=2*F.w_size,Ee(F.head),F.max_lazy_match=Yt[F.level].max_lazy,F.good_match=Yt[F.level].good_length,F.nice_match=Yt[F.level].nice_length,F.max_chain_length=Yt[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=re-1,F.match_available=0,F.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(se*2),this.dyn_dtree=new e.Buf16((2*K+1)*2),this.bl_tree=new e.Buf16((2*U+1)*2),Ee(this.dyn_ltree),Ee(this.dyn_dtree),Ee(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ie+1),this.heap=new e.Buf16(2*M+1),Ee(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*M+1),Ee(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function W(F){var Le;return!F||!F.state?De(F,m):(F.total_in=F.total_out=0,F.data_type=k,Le=F.state,Le.pending=0,Le.pending_out=0,Le.wrap<0&&(Le.wrap=-Le.wrap),Le.status=Le.wrap?J:Ie,F.adler=Le.wrap===2?0:1,Le.last_flush=i,t._tr_init(Le),d)}function he(F){var Le=W(F);return Le===d&&be(F.state),Le}function je(F,Le){return!F||!F.state||F.state.wrap!==2?m:(F.state.gzhead=Le,d)}function we(F,Le,tt,ye,Me,Ke){if(!F)return m;var Dt=1;if(Le===b&&(Le=6),ye<0?(Dt=0,ye=-ye):ye>15&&(Dt=2,ye-=16),Me<1||Me>j||tt!==I||ye<8||ye>15||Le<0||Le>9||Ke<0||Ke>E)return De(F,m);ye===8&&(ye=9);var me=new D;return F.state=me,me.strm=F,me.wrap=Dt,me.gzhead=null,me.w_bits=ye,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=Me+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+re-1)/re),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<Me+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=Le,me.strategy=Ke,me.method=tt,he(F)}function Ne(F,Le){return we(F,Le,I,N,P,C)}function ce(F,Le){var tt,ye,Me,Ke;if(!F||!F.state||Le>u||Le<0)return F?De(F,m):m;if(ye=F.state,!F.output||!F.input&&F.avail_in!==0||ye.status===Ae&&Le!==l)return De(F,F.avail_out===0?v:m);if(ye.strm=F,tt=ye.last_flush,ye.last_flush=Le,ye.status===J)if(ye.wrap===2)F.adler=0,oe(ye,31),oe(ye,139),oe(ye,8),ye.gzhead?(oe(ye,(ye.gzhead.text?1:0)+(ye.gzhead.hcrc?2:0)+(ye.gzhead.extra?4:0)+(ye.gzhead.name?8:0)+(ye.gzhead.comment?16:0)),oe(ye,ye.gzhead.time&255),oe(ye,ye.gzhead.time>>8&255),oe(ye,ye.gzhead.time>>16&255),oe(ye,ye.gzhead.time>>24&255),oe(ye,ye.level===9?2:ye.strategy>=x||ye.level<2?4:0),oe(ye,ye.gzhead.os&255),ye.gzhead.extra&&ye.gzhead.extra.length&&(oe(ye,ye.gzhead.extra.length&255),oe(ye,ye.gzhead.extra.length>>8&255)),ye.gzhead.hcrc&&(F.adler=r(F.adler,ye.pending_buf,ye.pending,0)),ye.gzindex=0,ye.status=Q):(oe(ye,0),oe(ye,0),oe(ye,0),oe(ye,0),oe(ye,0),oe(ye,ye.level===9?2:ye.strategy>=x||ye.level<2?4:0),oe(ye,Ve),ye.status=Ie);else{var Dt=I+(ye.w_bits-8<<4)<<8,me=-1;ye.strategy>=x||ye.level<2?me=0:ye.level<6?me=1:ye.level===6?me=2:me=3,Dt|=me<<6,ye.strstart!==0&&(Dt|=q),Dt+=31-Dt%31,ye.status=Ie,ee(ye,Dt),ye.strstart!==0&&(ee(ye,F.adler>>>16),ee(ye,F.adler&65535)),F.adler=1}if(ye.status===Q)if(ye.gzhead.extra){for(Me=ye.pending;ye.gzindex<(ye.gzhead.extra.length&65535)&&!(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Te(F),Me=ye.pending,ye.pending===ye.pending_buf_size));)oe(ye,ye.gzhead.extra[ye.gzindex]&255),ye.gzindex++;ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),ye.gzindex===ye.gzhead.extra.length&&(ye.gzindex=0,ye.status=te)}else ye.status=te;if(ye.status===te)if(ye.gzhead.name){Me=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Te(F),Me=ye.pending,ye.pending===ye.pending_buf_size)){Ke=1;break}ye.gzindex<ye.gzhead.name.length?Ke=ye.gzhead.name.charCodeAt(ye.gzindex++)&255:Ke=0,oe(ye,Ke)}while(Ke!==0);ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ke===0&&(ye.gzindex=0,ye.status=ue)}else ye.status=ue;if(ye.status===ue)if(ye.gzhead.comment){Me=ye.pending;do{if(ye.pending===ye.pending_buf_size&&(ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Te(F),Me=ye.pending,ye.pending===ye.pending_buf_size)){Ke=1;break}ye.gzindex<ye.gzhead.comment.length?Ke=ye.gzhead.comment.charCodeAt(ye.gzindex++)&255:Ke=0,oe(ye,Ke)}while(Ke!==0);ye.gzhead.hcrc&&ye.pending>Me&&(F.adler=r(F.adler,ye.pending_buf,ye.pending-Me,Me)),Ke===0&&(ye.status=ge)}else ye.status=ge;if(ye.status===ge&&(ye.gzhead.hcrc?(ye.pending+2>ye.pending_buf_size&&Te(F),ye.pending+2<=ye.pending_buf_size&&(oe(ye,F.adler&255),oe(ye,F.adler>>8&255),F.adler=0,ye.status=Ie)):ye.status=Ie),ye.pending!==0){if(Te(F),F.avail_out===0)return ye.last_flush=-1,d}else if(F.avail_in===0&&$(Le)<=$(tt)&&Le!==l)return De(F,v);if(ye.status===Ae&&F.avail_in!==0)return De(F,v);if(F.avail_in!==0||ye.lookahead!==0||Le!==i&&ye.status!==Ae){var G=ye.strategy===x?Ft(ye,Le):ye.strategy===_?Et(ye,Le):Yt[ye.level].func(ye,Le);if((G===Be||G===nt)&&(ye.status=Ae),G===_e||G===Be)return F.avail_out===0&&(ye.last_flush=-1),d;if(G===ve&&(Le===s?t._tr_align(ye):Le!==u&&(t._tr_stored_block(ye,0,0,!1),Le===o&&(Ee(ye.head),ye.lookahead===0&&(ye.strstart=0,ye.block_start=0,ye.insert=0))),Te(F),F.avail_out===0))return ye.last_flush=-1,d}return Le!==l?d:ye.wrap<=0?h:(ye.wrap===2?(oe(ye,F.adler&255),oe(ye,F.adler>>8&255),oe(ye,F.adler>>16&255),oe(ye,F.adler>>24&255),oe(ye,F.total_in&255),oe(ye,F.total_in>>8&255),oe(ye,F.total_in>>16&255),oe(ye,F.total_in>>24&255)):(ee(ye,F.adler>>>16),ee(ye,F.adler&65535)),Te(F),ye.wrap>0&&(ye.wrap=-ye.wrap),ye.pending!==0?d:h)}function ft(F){var Le;return!F||!F.state?m:(Le=F.state.status,Le!==J&&Le!==Q&&Le!==te&&Le!==ue&&Le!==ge&&Le!==Ie&&Le!==Ae?De(F,m):(F.state=null,Le===Ie?De(F,g):d))}function vt(F,Le){var tt=Le.length,ye,Me,Ke,Dt,me,G,V,Z;if(!F||!F.state||(ye=F.state,Dt=ye.wrap,Dt===2||Dt===1&&ye.status!==J||ye.lookahead))return m;for(Dt===1&&(F.adler=n(F.adler,Le,tt,0)),ye.wrap=0,tt>=ye.w_size&&(Dt===0&&(Ee(ye.head),ye.strstart=0,ye.block_start=0,ye.insert=0),Z=new e.Buf8(ye.w_size),e.arraySet(Z,Le,tt-ye.w_size,ye.w_size,0),Le=Z,tt=ye.w_size),me=F.avail_in,G=F.next_in,V=F.input,F.avail_in=tt,F.next_in=0,F.input=Le,ke(ye);ye.lookahead>=re;){Me=ye.strstart,Ke=ye.lookahead-(re-1);do ye.ins_h=(ye.ins_h<<ye.hash_shift^ye.window[Me+re-1])&ye.hash_mask,ye.prev[Me&ye.w_mask]=ye.head[ye.ins_h],ye.head[ye.ins_h]=Me,Me++;while(--Ke);ye.strstart=Me,ye.lookahead=re-1,ke(ye)}return ye.strstart+=ye.lookahead,ye.block_start=ye.strstart,ye.insert=ye.lookahead,ye.lookahead=0,ye.match_length=ye.prev_length=re-1,ye.match_available=0,F.next_in=G,F.input=V,F.avail_in=me,ye.wrap=Dt,d}return oo.deflateInit=Ne,oo.deflateInit2=we,oo.deflateReset=he,oo.deflateResetKeep=W,oo.deflateSetHeader=je,oo.deflate=ce,oo.deflateEnd=ft,oo.deflateSetDictionary=vt,oo.deflateInfo="pako deflate (from Nodeca project)",oo}var Gd={},PD;function L9(){if(PD)return Gd;PD=1;var e=fd(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Gd.string2buf=function(s){var o,l,u,d,h,m=s.length,g=0;for(d=0;d<m;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),g+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(g),h=0,d=0;h<g;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),l<128?o[h++]=l:l<2048?(o[h++]=192|l>>>6,o[h++]=128|l&63):l<65536?(o[h++]=224|l>>>12,o[h++]=128|l>>>6&63,o[h++]=128|l&63):(o[h++]=240|l>>>18,o[h++]=128|l>>>12&63,o[h++]=128|l>>>6&63,o[h++]=128|l&63);return o};function i(s,o){if(o<65534&&(s.subarray&&n||!s.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(s,o));for(var l="",u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l}return Gd.buf2binstring=function(s){return i(s,s.length)},Gd.binstring2buf=function(s){for(var o=new e.Buf8(s.length),l=0,u=o.length;l<u;l++)o[l]=s.charCodeAt(l);return o},Gd.buf2string=function(s,o){var l,u,d,h,m=o||s.length,g=new Array(m*2);for(u=0,l=0;l<m;){if(d=s[l++],d<128){g[u++]=d;continue}if(h=r[d],h>4){g[u++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<m;)d=d<<6|s[l++]&63,h--;if(h>1){g[u++]=65533;continue}d<65536?g[u++]=d:(d-=65536,g[u++]=55296|d>>10&1023,g[u++]=56320|d&1023)}return i(g,u)},Gd.utf8border=function(s,o){var l;for(o=o||s.length,o>s.length&&(o=s.length),l=o-1;l>=0&&(s[l]&192)===128;)l--;return l<0||l===0?o:l+r[s[l]]>o?l:o},Gd}var QE,FD;function B9(){if(FD)return QE;FD=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return QE=e,QE}var LD;function Woe(){if(LD)return Bh;LD=1;var e=Goe(),t=fd(),n=L9(),r=xN(),a=B9(),i=Object.prototype.toString,s=0,o=4,l=0,u=1,d=2,h=-1,m=0,g=8;function v(_){if(!(this instanceof v))return new v(_);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},_||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==l)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==l)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(_,E){var C=this.strm,k=this.options.chunkSize,I,j;if(this.ended)return!1;j=E===~~E?E:E===!0?o:s,typeof _=="string"?C.input=n.string2buf(_):i.call(_)==="[object ArrayBuffer]"?C.input=new Uint8Array(_):C.input=_,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),I=e.deflate(C,j),I!==u&&I!==l)return this.onEnd(I),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(j===o||j===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&I!==u);return j===o?(I=e.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===l):(j===d&&(this.onEnd(l),C.avail_out=0),!0)},v.prototype.onData=function(_){this.chunks.push(_)},v.prototype.onEnd=function(_){_===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function b(_,E){var C=new v(E);if(C.push(_,!0),C.err)throw C.msg||r[C.err];return C.result}function w(_,E){return E=E||{},E.raw=!0,b(_,E)}function x(_,E){return E=E||{},E.gzip=!0,b(_,E)}return Bh.Deflate=v,Bh.deflate=b,Bh.deflateRaw=w,Bh.gzip=x,Bh}var $h={},Os={},eC,BD;function Koe(){if(BD)return eC;BD=1;var e=30,t=12;return eC=function(r,a){var i,s,o,l,u,d,h,m,g,v,b,w,x,_,E,C,k,I,j,N,P,L,H,M,K;i=r.state,s=r.next_in,M=r.input,o=s+(r.avail_in-5),l=r.next_out,K=r.output,u=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,v=i.wnext,b=i.window,w=i.hold,x=i.bits,_=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{x<15&&(w+=M[s++]<<x,x+=8,w+=M[s++]<<x,x+=8),I=_[w&C];t:for(;;){if(j=I>>>24,w>>>=j,x-=j,j=I>>>16&255,j===0)K[l++]=I&65535;else if(j&16){N=I&65535,j&=15,j&&(x<j&&(w+=M[s++]<<x,x+=8),N+=w&(1<<j)-1,w>>>=j,x-=j),x<15&&(w+=M[s++]<<x,x+=8,w+=M[s++]<<x,x+=8),I=E[w&k];n:for(;;){if(j=I>>>24,w>>>=j,x-=j,j=I>>>16&255,j&16){if(P=I&65535,j&=15,x<j&&(w+=M[s++]<<x,x+=8,x<j&&(w+=M[s++]<<x,x+=8)),P+=w&(1<<j)-1,P>h){r.msg="invalid distance too far back",i.mode=e;break e}if(w>>>=j,x-=j,j=l-u,P>j){if(j=P-j,j>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(L=0,H=b,v===0){if(L+=m-j,j<N){N-=j;do K[l++]=b[L++];while(--j);L=l-P,H=K}}else if(v<j){if(L+=m+v-j,j-=v,j<N){N-=j;do K[l++]=b[L++];while(--j);if(L=0,v<N){j=v,N-=j;do K[l++]=b[L++];while(--j);L=l-P,H=K}}}else if(L+=v-j,j<N){N-=j;do K[l++]=b[L++];while(--j);L=l-P,H=K}for(;N>2;)K[l++]=H[L++],K[l++]=H[L++],K[l++]=H[L++],N-=3;N&&(K[l++]=H[L++],N>1&&(K[l++]=H[L++]))}else{L=l-P;do K[l++]=K[L++],K[l++]=K[L++],K[l++]=K[L++],N-=3;while(N>2);N&&(K[l++]=K[L++],N>1&&(K[l++]=K[L++]))}}else if((j&64)===0){I=E[(I&65535)+(w&(1<<j)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((j&64)===0){I=_[(I&65535)+(w&(1<<j)-1)];continue t}else if(j&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(s<o&&l<d);N=x>>3,s-=N,x-=N<<3,w&=(1<<x)-1,r.next_in=s,r.next_out=l,r.avail_in=s<o?5+(o-s):5-(s-o),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=w,i.bits=x},eC}var tC,$D;function Zoe(){if($D)return tC;$D=1;var e=fd(),t=15,n=852,r=592,a=0,i=1,s=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return tC=function(m,g,v,b,w,x,_,E){var C=E.bits,k=0,I=0,j=0,N=0,P=0,L=0,H=0,M=0,K=0,U=0,se,ie,re,X,ne,q=null,J=0,Q,te=new e.Buf16(t+1),ue=new e.Buf16(t+1),ge=null,Ie=0,Ae,_e,ve;for(k=0;k<=t;k++)te[k]=0;for(I=0;I<b;I++)te[g[v+I]]++;for(P=C,N=t;N>=1&&te[N]===0;N--);if(P>N&&(P=N),N===0)return w[x++]=1<<24|64<<16|0,w[x++]=1<<24|64<<16|0,E.bits=1,0;for(j=1;j<N&&te[j]===0;j++);for(P<j&&(P=j),M=1,k=1;k<=t;k++)if(M<<=1,M-=te[k],M<0)return-1;if(M>0&&(m===a||N!==1))return-1;for(ue[1]=0,k=1;k<t;k++)ue[k+1]=ue[k]+te[k];for(I=0;I<b;I++)g[v+I]!==0&&(_[ue[g[v+I]]++]=I);if(m===a?(q=ge=_,Q=19):m===i?(q=o,J-=257,ge=l,Ie-=257,Q=256):(q=u,ge=d,Q=-1),U=0,I=0,k=j,ne=x,L=P,H=0,re=-1,K=1<<P,X=K-1,m===i&&K>n||m===s&&K>r)return 1;for(;;){Ae=k-H,_[I]<Q?(_e=0,ve=_[I]):_[I]>Q?(_e=ge[Ie+_[I]],ve=q[J+_[I]]):(_e=96,ve=0),se=1<<k-H,ie=1<<L,j=ie;do ie-=se,w[ne+(U>>H)+ie]=Ae<<24|_e<<16|ve|0;while(ie!==0);for(se=1<<k-1;U&se;)se>>=1;if(se!==0?(U&=se-1,U+=se):U=0,I++,--te[k]===0){if(k===N)break;k=g[v+_[I]]}if(k>P&&(U&X)!==re){for(H===0&&(H=P),ne+=j,L=k-H,M=1<<L;L+H<N&&(M-=te[L+H],!(M<=0));)L++,M<<=1;if(K+=1<<L,m===i&&K>n||m===s&&K>r)return 1;re=U&X,w[re]=P<<24|L<<16|ne-x|0}}return U!==0&&(w[ne+U]=k-H<<24|64<<16|0),E.bits=P,0},tC}var zD;function Yoe(){if(zD)return Os;zD=1;var e=fd(),t=P9(),n=F9(),r=Koe(),a=Zoe(),i=0,s=1,o=2,l=4,u=5,d=6,h=0,m=1,g=2,v=-2,b=-3,w=-4,x=-5,_=8,E=1,C=2,k=3,I=4,j=5,N=6,P=7,L=8,H=9,M=10,K=11,U=12,se=13,ie=14,re=15,X=16,ne=17,q=18,J=19,Q=20,te=21,ue=22,ge=23,Ie=24,Ae=25,_e=26,ve=27,Be=28,nt=29,Ve=30,De=31,$=32,Ee=852,Te=592,fe=15,oe=fe;function ee(we){return(we>>>24&255)+(we>>>8&65280)+((we&65280)<<8)+((we&255)<<24)}function Se(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Pe(we){var Ne;return!we||!we.state?v:(Ne=we.state,we.total_in=we.total_out=Ne.total=0,we.msg="",Ne.wrap&&(we.adler=Ne.wrap&1),Ne.mode=E,Ne.last=0,Ne.havedict=0,Ne.dmax=32768,Ne.head=null,Ne.hold=0,Ne.bits=0,Ne.lencode=Ne.lendyn=new e.Buf32(Ee),Ne.distcode=Ne.distdyn=new e.Buf32(Te),Ne.sane=1,Ne.back=-1,h)}function ke(we){var Ne;return!we||!we.state?v:(Ne=we.state,Ne.wsize=0,Ne.whave=0,Ne.wnext=0,Pe(we))}function We(we,Ne){var ce,ft;return!we||!we.state||(ft=we.state,Ne<0?(ce=0,Ne=-Ne):(ce=(Ne>>4)+1,Ne<48&&(Ne&=15)),Ne&&(Ne<8||Ne>15))?v:(ft.window!==null&&ft.wbits!==Ne&&(ft.window=null),ft.wrap=ce,ft.wbits=Ne,ke(we))}function Nt(we,Ne){var ce,ft;return we?(ft=new Se,we.state=ft,ft.window=null,ce=We(we,Ne),ce!==h&&(we.state=null),ce):v}function it(we){return Nt(we,oe)}var Et=!0,Ft,Mt;function Yt(we){if(Et){var Ne;for(Ft=new e.Buf32(512),Mt=new e.Buf32(32),Ne=0;Ne<144;)we.lens[Ne++]=8;for(;Ne<256;)we.lens[Ne++]=9;for(;Ne<280;)we.lens[Ne++]=7;for(;Ne<288;)we.lens[Ne++]=8;for(a(s,we.lens,0,288,Ft,0,we.work,{bits:9}),Ne=0;Ne<32;)we.lens[Ne++]=5;a(o,we.lens,0,32,Mt,0,we.work,{bits:5}),Et=!1}we.lencode=Ft,we.lenbits=9,we.distcode=Mt,we.distbits=5}function be(we,Ne,ce,ft){var vt,F=we.state;return F.window===null&&(F.wsize=1<<F.wbits,F.wnext=0,F.whave=0,F.window=new e.Buf8(F.wsize)),ft>=F.wsize?(e.arraySet(F.window,Ne,ce-F.wsize,F.wsize,0),F.wnext=0,F.whave=F.wsize):(vt=F.wsize-F.wnext,vt>ft&&(vt=ft),e.arraySet(F.window,Ne,ce-ft,vt,F.wnext),ft-=vt,ft?(e.arraySet(F.window,Ne,ce-ft,ft,0),F.wnext=ft,F.whave=F.wsize):(F.wnext+=vt,F.wnext===F.wsize&&(F.wnext=0),F.whave<F.wsize&&(F.whave+=vt))),0}function D(we,Ne){var ce,ft,vt,F,Le,tt,ye,Me,Ke,Dt,me,G,V,Z,pe=0,Re,Ue,pt,Zt,ut,Rt,Lt,en,In=new e.Buf8(4),Xn,Sr,Er=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!we||!we.state||!we.output||!we.input&&we.avail_in!==0)return v;ce=we.state,ce.mode===U&&(ce.mode=se),Le=we.next_out,vt=we.output,ye=we.avail_out,F=we.next_in,ft=we.input,tt=we.avail_in,Me=ce.hold,Ke=ce.bits,Dt=tt,me=ye,en=h;e:for(;;)switch(ce.mode){case E:if(ce.wrap===0){ce.mode=se;break}for(;Ke<16;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if(ce.wrap&2&&Me===35615){ce.check=0,In[0]=Me&255,In[1]=Me>>>8&255,ce.check=n(ce.check,In,2,0),Me=0,Ke=0,ce.mode=C;break}if(ce.flags=0,ce.head&&(ce.head.done=!1),!(ce.wrap&1)||(((Me&255)<<8)+(Me>>8))%31){we.msg="incorrect header check",ce.mode=Ve;break}if((Me&15)!==_){we.msg="unknown compression method",ce.mode=Ve;break}if(Me>>>=4,Ke-=4,Lt=(Me&15)+8,ce.wbits===0)ce.wbits=Lt;else if(Lt>ce.wbits){we.msg="invalid window size",ce.mode=Ve;break}ce.dmax=1<<Lt,we.adler=ce.check=1,ce.mode=Me&512?M:U,Me=0,Ke=0;break;case C:for(;Ke<16;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if(ce.flags=Me,(ce.flags&255)!==_){we.msg="unknown compression method",ce.mode=Ve;break}if(ce.flags&57344){we.msg="unknown header flags set",ce.mode=Ve;break}ce.head&&(ce.head.text=Me>>8&1),ce.flags&512&&(In[0]=Me&255,In[1]=Me>>>8&255,ce.check=n(ce.check,In,2,0)),Me=0,Ke=0,ce.mode=k;case k:for(;Ke<32;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}ce.head&&(ce.head.time=Me),ce.flags&512&&(In[0]=Me&255,In[1]=Me>>>8&255,In[2]=Me>>>16&255,In[3]=Me>>>24&255,ce.check=n(ce.check,In,4,0)),Me=0,Ke=0,ce.mode=I;case I:for(;Ke<16;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}ce.head&&(ce.head.xflags=Me&255,ce.head.os=Me>>8),ce.flags&512&&(In[0]=Me&255,In[1]=Me>>>8&255,ce.check=n(ce.check,In,2,0)),Me=0,Ke=0,ce.mode=j;case j:if(ce.flags&1024){for(;Ke<16;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}ce.length=Me,ce.head&&(ce.head.extra_len=Me),ce.flags&512&&(In[0]=Me&255,In[1]=Me>>>8&255,ce.check=n(ce.check,In,2,0)),Me=0,Ke=0}else ce.head&&(ce.head.extra=null);ce.mode=N;case N:if(ce.flags&1024&&(G=ce.length,G>tt&&(G=tt),G&&(ce.head&&(Lt=ce.head.extra_len-ce.length,ce.head.extra||(ce.head.extra=new Array(ce.head.extra_len)),e.arraySet(ce.head.extra,ft,F,G,Lt)),ce.flags&512&&(ce.check=n(ce.check,ft,G,F)),tt-=G,F+=G,ce.length-=G),ce.length))break e;ce.length=0,ce.mode=P;case P:if(ce.flags&2048){if(tt===0)break e;G=0;do Lt=ft[F+G++],ce.head&&Lt&&ce.length<65536&&(ce.head.name+=String.fromCharCode(Lt));while(Lt&&G<tt);if(ce.flags&512&&(ce.check=n(ce.check,ft,G,F)),tt-=G,F+=G,Lt)break e}else ce.head&&(ce.head.name=null);ce.length=0,ce.mode=L;case L:if(ce.flags&4096){if(tt===0)break e;G=0;do Lt=ft[F+G++],ce.head&&Lt&&ce.length<65536&&(ce.head.comment+=String.fromCharCode(Lt));while(Lt&&G<tt);if(ce.flags&512&&(ce.check=n(ce.check,ft,G,F)),tt-=G,F+=G,Lt)break e}else ce.head&&(ce.head.comment=null);ce.mode=H;case H:if(ce.flags&512){for(;Ke<16;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me!==(ce.check&65535)){we.msg="header crc mismatch",ce.mode=Ve;break}Me=0,Ke=0}ce.head&&(ce.head.hcrc=ce.flags>>9&1,ce.head.done=!0),we.adler=ce.check=0,ce.mode=U;break;case M:for(;Ke<32;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}we.adler=ce.check=ee(Me),Me=0,Ke=0,ce.mode=K;case K:if(ce.havedict===0)return we.next_out=Le,we.avail_out=ye,we.next_in=F,we.avail_in=tt,ce.hold=Me,ce.bits=Ke,g;we.adler=ce.check=1,ce.mode=U;case U:if(Ne===u||Ne===d)break e;case se:if(ce.last){Me>>>=Ke&7,Ke-=Ke&7,ce.mode=ve;break}for(;Ke<3;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}switch(ce.last=Me&1,Me>>>=1,Ke-=1,Me&3){case 0:ce.mode=ie;break;case 1:if(Yt(ce),ce.mode=Q,Ne===d){Me>>>=2,Ke-=2;break e}break;case 2:ce.mode=ne;break;case 3:we.msg="invalid block type",ce.mode=Ve}Me>>>=2,Ke-=2;break;case ie:for(Me>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if((Me&65535)!==(Me>>>16^65535)){we.msg="invalid stored block lengths",ce.mode=Ve;break}if(ce.length=Me&65535,Me=0,Ke=0,ce.mode=re,Ne===d)break e;case re:ce.mode=X;case X:if(G=ce.length,G){if(G>tt&&(G=tt),G>ye&&(G=ye),G===0)break e;e.arraySet(vt,ft,F,G,Le),tt-=G,F+=G,ye-=G,Le+=G,ce.length-=G;break}ce.mode=U;break;case ne:for(;Ke<14;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if(ce.nlen=(Me&31)+257,Me>>>=5,Ke-=5,ce.ndist=(Me&31)+1,Me>>>=5,Ke-=5,ce.ncode=(Me&15)+4,Me>>>=4,Ke-=4,ce.nlen>286||ce.ndist>30){we.msg="too many length or distance symbols",ce.mode=Ve;break}ce.have=0,ce.mode=q;case q:for(;ce.have<ce.ncode;){for(;Ke<3;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}ce.lens[Er[ce.have++]]=Me&7,Me>>>=3,Ke-=3}for(;ce.have<19;)ce.lens[Er[ce.have++]]=0;if(ce.lencode=ce.lendyn,ce.lenbits=7,Xn={bits:ce.lenbits},en=a(i,ce.lens,0,19,ce.lencode,0,ce.work,Xn),ce.lenbits=Xn.bits,en){we.msg="invalid code lengths set",ce.mode=Ve;break}ce.have=0,ce.mode=J;case J:for(;ce.have<ce.nlen+ce.ndist;){for(;pe=ce.lencode[Me&(1<<ce.lenbits)-1],Re=pe>>>24,Ue=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if(pt<16)Me>>>=Re,Ke-=Re,ce.lens[ce.have++]=pt;else{if(pt===16){for(Sr=Re+2;Ke<Sr;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me>>>=Re,Ke-=Re,ce.have===0){we.msg="invalid bit length repeat",ce.mode=Ve;break}Lt=ce.lens[ce.have-1],G=3+(Me&3),Me>>>=2,Ke-=2}else if(pt===17){for(Sr=Re+3;Ke<Sr;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Re,Ke-=Re,Lt=0,G=3+(Me&7),Me>>>=3,Ke-=3}else{for(Sr=Re+7;Ke<Sr;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Re,Ke-=Re,Lt=0,G=11+(Me&127),Me>>>=7,Ke-=7}if(ce.have+G>ce.nlen+ce.ndist){we.msg="invalid bit length repeat",ce.mode=Ve;break}for(;G--;)ce.lens[ce.have++]=Lt}}if(ce.mode===Ve)break;if(ce.lens[256]===0){we.msg="invalid code -- missing end-of-block",ce.mode=Ve;break}if(ce.lenbits=9,Xn={bits:ce.lenbits},en=a(s,ce.lens,0,ce.nlen,ce.lencode,0,ce.work,Xn),ce.lenbits=Xn.bits,en){we.msg="invalid literal/lengths set",ce.mode=Ve;break}if(ce.distbits=6,ce.distcode=ce.distdyn,Xn={bits:ce.distbits},en=a(o,ce.lens,ce.nlen,ce.ndist,ce.distcode,0,ce.work,Xn),ce.distbits=Xn.bits,en){we.msg="invalid distances set",ce.mode=Ve;break}if(ce.mode=Q,Ne===d)break e;case Q:ce.mode=te;case te:if(tt>=6&&ye>=258){we.next_out=Le,we.avail_out=ye,we.next_in=F,we.avail_in=tt,ce.hold=Me,ce.bits=Ke,r(we,me),Le=we.next_out,vt=we.output,ye=we.avail_out,F=we.next_in,ft=we.input,tt=we.avail_in,Me=ce.hold,Ke=ce.bits,ce.mode===U&&(ce.back=-1);break}for(ce.back=0;pe=ce.lencode[Me&(1<<ce.lenbits)-1],Re=pe>>>24,Ue=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if(Ue&&(Ue&240)===0){for(Zt=Re,ut=Ue,Rt=pt;pe=ce.lencode[Rt+((Me&(1<<Zt+ut)-1)>>Zt)],Re=pe>>>24,Ue=pe>>>16&255,pt=pe&65535,!(Zt+Re<=Ke);){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Zt,Ke-=Zt,ce.back+=Zt}if(Me>>>=Re,Ke-=Re,ce.back+=Re,ce.length=pt,Ue===0){ce.mode=_e;break}if(Ue&32){ce.back=-1,ce.mode=U;break}if(Ue&64){we.msg="invalid literal/length code",ce.mode=Ve;break}ce.extra=Ue&15,ce.mode=ue;case ue:if(ce.extra){for(Sr=ce.extra;Ke<Sr;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}ce.length+=Me&(1<<ce.extra)-1,Me>>>=ce.extra,Ke-=ce.extra,ce.back+=ce.extra}ce.was=ce.length,ce.mode=ge;case ge:for(;pe=ce.distcode[Me&(1<<ce.distbits)-1],Re=pe>>>24,Ue=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if((Ue&240)===0){for(Zt=Re,ut=Ue,Rt=pt;pe=ce.distcode[Rt+((Me&(1<<Zt+ut)-1)>>Zt)],Re=pe>>>24,Ue=pe>>>16&255,pt=pe&65535,!(Zt+Re<=Ke);){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}Me>>>=Zt,Ke-=Zt,ce.back+=Zt}if(Me>>>=Re,Ke-=Re,ce.back+=Re,Ue&64){we.msg="invalid distance code",ce.mode=Ve;break}ce.offset=pt,ce.extra=Ue&15,ce.mode=Ie;case Ie:if(ce.extra){for(Sr=ce.extra;Ke<Sr;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}ce.offset+=Me&(1<<ce.extra)-1,Me>>>=ce.extra,Ke-=ce.extra,ce.back+=ce.extra}if(ce.offset>ce.dmax){we.msg="invalid distance too far back",ce.mode=Ve;break}ce.mode=Ae;case Ae:if(ye===0)break e;if(G=me-ye,ce.offset>G){if(G=ce.offset-G,G>ce.whave&&ce.sane){we.msg="invalid distance too far back",ce.mode=Ve;break}G>ce.wnext?(G-=ce.wnext,V=ce.wsize-G):V=ce.wnext-G,G>ce.length&&(G=ce.length),Z=ce.window}else Z=vt,V=Le-ce.offset,G=ce.length;G>ye&&(G=ye),ye-=G,ce.length-=G;do vt[Le++]=Z[V++];while(--G);ce.length===0&&(ce.mode=te);break;case _e:if(ye===0)break e;vt[Le++]=ce.length,ye--,ce.mode=te;break;case ve:if(ce.wrap){for(;Ke<32;){if(tt===0)break e;tt--,Me|=ft[F++]<<Ke,Ke+=8}if(me-=ye,we.total_out+=me,ce.total+=me,me&&(we.adler=ce.check=ce.flags?n(ce.check,vt,me,Le-me):t(ce.check,vt,me,Le-me)),me=ye,(ce.flags?Me:ee(Me))!==ce.check){we.msg="incorrect data check",ce.mode=Ve;break}Me=0,Ke=0}ce.mode=Be;case Be:if(ce.wrap&&ce.flags){for(;Ke<32;){if(tt===0)break e;tt--,Me+=ft[F++]<<Ke,Ke+=8}if(Me!==(ce.total&4294967295)){we.msg="incorrect length check",ce.mode=Ve;break}Me=0,Ke=0}ce.mode=nt;case nt:en=m;break e;case Ve:en=b;break e;case De:return w;case $:default:return v}return we.next_out=Le,we.avail_out=ye,we.next_in=F,we.avail_in=tt,ce.hold=Me,ce.bits=Ke,(ce.wsize||me!==we.avail_out&&ce.mode<Ve&&(ce.mode<ve||Ne!==l))&&be(we,we.output,we.next_out,me-we.avail_out),Dt-=we.avail_in,me-=we.avail_out,we.total_in+=Dt,we.total_out+=me,ce.total+=me,ce.wrap&&me&&(we.adler=ce.check=ce.flags?n(ce.check,vt,me,we.next_out-me):t(ce.check,vt,me,we.next_out-me)),we.data_type=ce.bits+(ce.last?64:0)+(ce.mode===U?128:0)+(ce.mode===Q||ce.mode===re?256:0),(Dt===0&&me===0||Ne===l)&&en===h&&(en=x),en}function W(we){if(!we||!we.state)return v;var Ne=we.state;return Ne.window&&(Ne.window=null),we.state=null,h}function he(we,Ne){var ce;return!we||!we.state||(ce=we.state,(ce.wrap&2)===0)?v:(ce.head=Ne,Ne.done=!1,h)}function je(we,Ne){var ce=Ne.length,ft,vt,F;return!we||!we.state||(ft=we.state,ft.wrap!==0&&ft.mode!==K)?v:ft.mode===K&&(vt=1,vt=t(vt,Ne,ce,0),vt!==ft.check)?b:(F=be(we,Ne,ce,ce),F?(ft.mode=De,w):(ft.havedict=1,h))}return Os.inflateReset=ke,Os.inflateReset2=We,Os.inflateResetKeep=Pe,Os.inflateInit=it,Os.inflateInit2=Nt,Os.inflate=D,Os.inflateEnd=W,Os.inflateGetHeader=he,Os.inflateSetDictionary=je,Os.inflateInfo="pako inflate (from Nodeca project)",Os}var nC,UD;function $9(){return UD||(UD=1,nC={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),nC}var rC,VD;function Xoe(){if(VD)return rC;VD=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return rC=e,rC}var HD;function Joe(){if(HD)return $h;HD=1;var e=Yoe(),t=fd(),n=L9(),r=$9(),a=xN(),i=B9(),s=Xoe(),o=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new s,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):o.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(a[g])}l.prototype.push=function(h,m){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,w,x,_,E,C,k=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),w=e.inflate(g,r.Z_NO_FLUSH),w===r.Z_NEED_DICT&&b&&(w=e.inflateSetDictionary(this.strm,b)),w===r.Z_BUF_ERROR&&k===!0&&(w=r.Z_OK,k=!1),w!==r.Z_STREAM_END&&w!==r.Z_OK)return this.onEnd(w),this.ended=!0,!1;g.next_out&&(g.avail_out===0||w===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(_=n.utf8border(g.output,g.next_out),E=g.next_out-_,C=n.buf2string(g.output,_),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,_,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&w!==r.Z_STREAM_END);return w===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(w=e.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function u(h,m){var g=new l(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function d(h,m){return m=m||{},m.raw=!0,u(h,m)}return $h.Inflate=l,$h.inflate=u,$h.inflateRaw=d,$h.ungzip=u,$h}var aC,qD;function Qoe(){if(qD)return aC;qD=1;var e=fd().assign,t=Woe(),n=Joe(),r=$9(),a={};return e(a,t,n,r),aC=a,aC}var ele=Qoe();const _N=vi(ele);var iC,GD;function tle(){if(GD)return iC;GD=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,s)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):n.errorFirst?r.push((o,l)=>{o?s(o):i(l)}):r.push(i),t.apply(this,r)})};return iC=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=s=>{const o=l=>typeof l=="string"?s===l:l.test(s);return n.include?n.include.some(o):!n.exclude.some(o)};let i;r==="function"?i=function(...s){return n.excludeMain?t(...s):e(t,n).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&a(s)?e(o,n):o}return i},iC}var nle=tle();const sC=vi(nle);var oC,WD;function rle(){if(WD)return oC;WD=1;var e={};function t(re){return Array.isArray(re)?re:[re]}const n="",r=" ",a="\\",i=/^\s+$/,s=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,u=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,v=(re,X,ne)=>Object.defineProperty(re,X,{value:ne}),b=/([0-z])-([0-z])/g,w=()=>!1,x=re=>re.replace(b,(X,ne,q)=>ne.charCodeAt(0)<=q.charCodeAt(0)?X:n),_=re=>{const{length:X}=re;return re.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(re,X,ne)=>X+(ne.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(re,X)=>{const{length:ne}=X;return X.slice(0,ne-ne%2)+r}],[/[\\$.|*+(){^]/g,re=>`\\${re}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(re,X,ne)=>X+6<ne.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(re,X,ne)=>{const q=ne.replace(/\\\*/g,"[^\\/]*");return X+q}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(re,X,ne,q,J)=>X===a?`\\[${ne}${_(q)}${J}`:J==="]"&&q.length%2===0?`[${x(ne)}${q}]`:"[]"],[/(?:[^*])$/,re=>/\/$/.test(re)?`${re}$`:`${re}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(re,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(re,X)=>{let ne=C[re];return ne||(ne=E.reduce((q,[J,Q])=>q.replace(J,Q.bind(re)),re),C[re]=ne),X?new RegExp(ne,"i"):new RegExp(ne)},I=re=>typeof re=="string",j=re=>re&&I(re)&&!i.test(re)&&!s.test(re)&&re.indexOf("#")!==0,N=re=>re.split(u);class P{constructor(X,ne,q,J){this.origin=X,this.pattern=ne,this.negative=q,this.regex=J}}const L=(re,X)=>{const ne=re;let q=!1;re.indexOf("!")===0&&(q=!0,re=re.substr(1)),re=re.replace(o,"!").replace(l,"#");const J=k(re,X);return new P(ne,re,q,J)},H=(re,X)=>{throw new X(re)},M=(re,X,ne)=>I(re)?re?M.isNotRelative(re)?ne(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:ne("path must not be empty",TypeError):ne(`path must be a string, but got \`${X}\``,TypeError),K=re=>d.test(re);M.isNotRelative=K,M.convert=re=>re;class U{constructor({ignorecase:X=!0,ignoreCase:ne=X,allowRelativePaths:q=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=ne,this._allowRelativePaths=q,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[g]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(j(X)){const ne=L(X,this._ignoreCase);this._added=!0,this._rules.push(ne)}}add(X){return this._added=!1,t(I(X)?N(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,ne){let q=!1,J=!1;return this._rules.forEach(Q=>{const{negative:te}=Q;if(J===te&&q!==J||te&&!q&&!J&&!ne)return;Q.regex.test(X)&&(q=!te,J=te)}),{ignored:q,unignored:J}}_test(X,ne,q,J){const Q=X&&M.convert(X);return M(Q,X,this._allowRelativePaths?w:H),this._t(Q,ne,q,J)}_t(X,ne,q,J){if(X in ne)return ne[X];if(J||(J=X.split(h)),J.pop(),!J.length)return ne[X]=this._testOne(X,q);const Q=this._t(J.join(h)+h,ne,q,J);return ne[X]=Q.ignored?Q:this._testOne(X,q)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const se=re=>new U(re),ie=re=>M(re&&M.convert(re),re,w);if(se.isPathValid=ie,se.default=se,oC=se,typeof da<"u"&&(e&&e.IGNORE_TEST_WIN32||da.platform==="win32")){const re=ne=>/^\\\\\?\\/.test(ne)||/["<>|\u0000-\u001F]+/u.test(ne)?ne:ne.replace(/\\/g,"/");M.convert=re;const X=/^[a-z]:\//i;M.isNotRelative=ne=>X.test(ne)||K(ne)}return oC}var ale=rle();const ile=vi(ale);var lC,KD;function sle(){if(KD)return lC;KD=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return lC=n,lC}var ole=sle();const ol=vi(ole);var cC,ZD;function lle(){return ZD||(ZD=1,cC=function(e,t){var n=e,r=t,a=n.length,i=r.length,s=!1,o=null,l=a+1,u=[],d=[],h=[],m="",g=-1,v=0,b=1,w,x,_=function(){a>=i&&(w=n,x=a,n=r,r=w,a=i,i=x,s=!0,l=a+1)},E=function(j,N,P){return{x:j,y:N,k:P}},C=function(j,N){return{elem:j,t:N}},k=function(j,N,P){var L,H,M;for(N>P?L=u[j-1+l]:L=u[j+1+l],M=Math.max(N,P),H=M-j;H<a&&M<i&&n[H]===r[M];)++H,++M;return u[j+l]=d.length,d[d.length]=new E(H,M,L),M},I=function(j){var N,P,L;for(N=P=0,L=j.length-1;L>=0;--L)for(;N<j[L].x||P<j[L].y;)j[L].y-j[L].x>P-N?(s?h[h.length]=new C(r[P],g):h[h.length]=new C(r[P],b),++P):j[L].y-j[L].x<P-N?(s?h[h.length]=new C(n[N],b):h[h.length]=new C(n[N],g),++N):(h[h.length]=new C(n[N],v),m+=n[N],++N,++P)};return _(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return m},getses:function(){return h},compose:function(){var j,N,P,L,H,M,K,U;for(j=i-a,N=a+i+3,P={},K=0;K<N;++K)P[K]=-1,u[K]=-1;L=-1;do{for(++L,U=-L;U<=j-1;++U)P[U+l]=k(U,P[U-1+l]+1,P[U+1+l]);for(U=j+L;U>=j+1;--U)P[U+l]=k(U,P[U-1+l]+1,P[U+1+l]);P[j+l]=k(j,P[j-1+l]+1,P[j+1+l])}while(P[j+l]!==i);for(o=j+2*L,H=u[j+l],M=[];H!==-1;)M[M.length]=new E(d[H].x,d[H].y,null),H=d[H].k;I(M)}}}),cC}var uC,YD;function cle(){if(YD)return uC;YD=1;var e=lle();function t(i,s){var o=new e(i,s);o.compose();for(var l=o.getses(),u,d,h=i.length-1,m=s.length-1,g=l.length-1;g>=0;--g)l[g].t===o.SES_COMMON?(d?(d.chain={file1index:h,file2index:m,chain:null},d=d.chain):(u={file1index:h,file2index:m,chain:null},d=u),h--,m--):l[g].t===o.SES_DELETE?h--:l[g].t===o.SES_ADD&&m--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,u):v}function n(i,s){for(var o=[],l=i.length,u=s.length,d=t(i,s);d!==null;d=d.chain){var h=l-d.file1index-1,m=u-d.file2index-1;l=d.file1index,u=d.file2index,(h||m)&&o.push({file1:[l+1,h],file2:[u+1,m]})}return o.reverse(),o}function r(i,s,o){var l,u=n(s,i),d=n(s,o),h=[];function m(X,ne){h.push([X.file1[0],ne,X.file1[1],X.file2[0],X.file2[1]])}for(l=0;l<u.length;l++)m(u[l],0);for(l=0;l<d.length;l++)m(d[l],2);h.sort(function(X,ne){return X[0]-ne[0]});var g=[],v=0;function b(X){X>v&&(g.push([1,v,X-v]),v=X)}for(var w=0;w<h.length;w++){for(var x=w,_=h[w],E=_[0],C=E+_[2];w<h.length-1;){var k=h[w+1],I=k[0];if(I>C)break;C=Math.max(C,I+k[2]),w++}if(b(E),x==w)_[4]>0&&g.push([_[1],_[3],_[4]]);else{var j={0:[i.length,-1,s.length,-1],2:[o.length,-1,s.length,-1]};for(l=x;l<=w;l++){_=h[l];var N=_[1],P=j[N],L=_[0],H=L+_[2],M=_[3],K=M+_[4];P[0]=Math.min(M,P[0]),P[1]=Math.max(K,P[1]),P[2]=Math.min(L,P[2]),P[3]=Math.max(H,P[3])}var U=j[0][0]+(E-j[0][2]),se=j[0][1]+(C-j[0][3]),ie=j[2][0]+(E-j[2][2]),re=j[2][1]+(C-j[2][3]);g.push([-1,U,se-U,E,C-E,ie,re-ie])}v=C}return b(s.length),g}function a(i,s,o){var l=[],u=[i,s,o],d=r(i,s,o),h=[];function m(){h.length&&l.push({ok:h}),h=[]}function g(_){for(var E=0;E<_.length;E++)h.push(_[E])}function v(_){if(_[2]!=_[6])return!0;for(var E=_[1],C=_[5],k=0;k<_[2];k++)if(i[k+E]!=o[k+C])return!0;return!1}for(var b=0;b<d.length;b++){var w=d[b],x=w[0];x==-1?v(w)?(m(),l.push({conflict:{a:i.slice(w[1],w[1]+w[2]),aIndex:w[1],o:s.slice(w[3],w[3]+w[4]),oIndex:w[3],b:o.slice(w[5],w[5]+w[6]),bIndex:w[5]}})):g(u[0].slice(w[1],w[1]+w[2])):g(u[x].slice(w[1],w[1]+w[2]))}return m(),l}return uC=a,uC}var ule=cle();const dle=vi(ule);class lr extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new lr(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class Dy extends lr{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=Dy.code,this.data={filepaths:t}}}Dy.code="UnmergedPathsError";class Pn extends lr{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Pn.code,this.data={message:t}}}Pn.code="InternalError";class nm extends lr{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=nm.code,this.data={filepath:t}}}nm.code="UnsafeFilepathError";class al{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function a_(e,t){return-(e<t)||+(e>t)}function z9(e,t){return a_(e.path,t.path)}function U9(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const Xo=2**32;function XD(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Tp(e){const[t,n]=XD(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=XD(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Xo,ctimeNanoseconds:n%Xo,mtimeSeconds:r%Xo,mtimeNanoseconds:a%Xo,dev:e.dev%Xo,ino:e.ino%Xo,mode:U9(e.mode%Xo),uid:e.uid%Xo,gid:e.gid%Xo,size:e.size>-1?e.size%Xo:0}}function fle(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let dC=null;async function Cc(e){return dC===null&&(dC=await ple()),dC?V9(e):hle(e)}function hle(e){return new O9().update(e).digest("hex")}async function V9(e){const t=await crypto.subtle.digest("SHA-1",e);return fle(t)}async function ple(){try{if(await V9(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function mle(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function gle(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Qt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Qd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Qt.isBuffer(t))return Qd.fromBuffer(t);if(t===null)return new Qd(null);throw new Pn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Pn("Index file is empty (.git/index)");const n=new Qd,r=new al(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new Pn(`Invalid dircache magic file number: ${a}`);const i=await Cc(t.slice(0,-20)),s=t.slice(-20).toString("hex");if(s!==i)throw new Pn(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${i}`);const o=r.readUInt32BE();if(o!==2)throw new Pn(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let u=0;for(;!r.eof()&&u<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=mle(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new Pn(`Got a path length of: ${m}`);if(d.path=r.toString("utf8",m),d.path.includes("..\\")||d.path.includes("../"))throw new nm(d.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new Pn(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new Pn("Unexpected end of file")}d.stages=[],n._addEntry(d),u++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(z9)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Tp(n);const i=Qt.from(t),s={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Qt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Qt.alloc(r),i=new al(a),s=Tp(t);return i.writeUInt32BE(s.ctimeSeconds),i.writeUInt32BE(s.ctimeNanoseconds),i.writeUInt32BE(s.mtimeSeconds),i.writeUInt32BE(s.mtimeNanoseconds),i.writeUInt32BE(s.dev),i.writeUInt32BE(s.ino),i.writeUInt32BE(s.mode),i.writeUInt32BE(s.uid),i.writeUInt32BE(s.gid),i.writeUInt32BE(s.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(gle(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Qt.alloc(12),n=new al(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(Qd._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(Qd._entryToBuffer(l));r=await Promise.all(r);const a=Qt.concat(r),i=Qt.concat([t,a]),s=await Cc(i);return Qt.concat([i,Qt.from(s,"hex")])}}function Dx(e,t,n=!0,r=!0){const a=Tp(e),i=Tp(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let fC=null;const hC=Symbol("IndexCache");function yle(){return{map:new Map,stats:new Map}}async function ble(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Qd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function vle(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Dx(r,a)}class qa{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[hC]||(r[hC]=yle());const s=`${n}/index`;fC===null&&(fC=new P0({maxPending:1/0}));let o,l=[];return await fC.acquire(s,async()=>{const u=r[hC];await vle(t,s,u)&&await ble(t,s,u);const d=u.map.get(s);if(l=d.unmergedPaths,l.length&&!a)throw new Dy(l);if(o=await i(d),d._dirty){const h=await d.toObject();await t.write(s,h),u.stats.set(s,await t.lstat(s)),d._dirty=!1}}),o}}function Mx(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function kp(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function H9(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Mx(a),metadata:{},children:[]};t.set(a,i),i.parent=n(kp(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const s={type:"blob",fullpath:a,basename:Mx(a),metadata:i,parent:n(kp(a)),children:[]};s.parent&&s.parent.children.push(s),t.set(a,s)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function wle(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Pn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class xle{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=qa.acquire({fs:t,gitdir:n,cache:r},async function(i){return H9(i.entries)});const a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(s=>s.fullpath);return i.sort(a_),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Tp(r.metadata);t._type=r.type==="tree"?"tree":wle(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const i_=Symbol("GitWalkSymbol");function rm(){const e=Object.create(null);return Object.defineProperty(e,i_,{value:function({fs:t,gitdir:n,cache:r}){return new xle({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class Rr extends lr{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Rr.code,this.data={what:t}}}Rr.code="NotFoundError";class Fi extends lr{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Fi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}Fi.code="ObjectTypeError";class Ku extends lr{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Ku.code,this.data={value:t}}}Ku.code="InvalidOidError";class My extends lr{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=My.code,this.data={remote:t}}}My.code="NoRefspecError";class Ox{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Ox(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Px{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,s]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=a==="*";if(l!==(s==="*"))throw new Pn("Invalid refspec");return new Px({remotePath:r,localPath:i,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class SN{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Px.from(r));return new SN(n)}add(t){const n=Px.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function _le(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const Sle=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Ig=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},JD={core:{filemode:Ig,bare:Ig,logallrefupdates:Ig,symlinks:Ig,ignorecase:Ig,bigFileThreshold:Sle}},Ele=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,Cle=/^[A-Za-z0-9-.]+$/,Tle=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,kle=/^[A-Za-z][A-Za-z-]*$/,Ale=/^(.*?)( *[#;].*)$/,Nle=e=>{const t=Ele.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},Rle=e=>{const t=Tle.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=Ile(r),i=jle(a);return[n,i]}return null},Ile=e=>{const t=Ale.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return QD(n)&&QD(r)?`${n}${r}`:n},QD=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,jle=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",s=n==="\\"&&a[r+1]==='"';return i||s?t:t+n},""),eM=e=>e!=null?e.toLowerCase():null,ok=(e,t,n)=>[eM(e),t,eM(n)].filter(r=>r!=null).join("."),tM=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:ok(n,a,r),sectionPath:ok(n,a,null),isSection:!!n}},Dle=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class EN{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,s=null;const o=a.trim(),l=Nle(o),u=l!=null;if(u)[n,r]=l;else{const h=Rle(o);h!=null&&([i,s]=h)}const d=ok(n,r,i);return{line:a,isSection:u,section:n,subsection:r,name:i,value:s,path:d}}):[]}static from(t){return new EN(t)}async get(t,n=!1){const r=tM(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:s,value:o})=>{const l=JD[i]&&JD[i][s];return l?l(o):o});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:s,path:o,sectionPath:l,isSection:u}=tM(t),d=Dle(this.parsedConfig,h=>h.path===o);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],m=Object.assign({},h,{name:s,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,m):this.parsedConfig[d]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===l),m={section:a,subsection:i,name:s,value:n,modified:!0,path:o};if(Cle.test(a)&&kle.test(s))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:u,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:s=!1})=>s?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class Ea{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return EN.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const fw=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],Mle=["config","description","index","shallow","commondir"];let pC;async function xu(e,t){return pC===void 0&&(pC=new P0),pC.acquire(e,t)}class Ut{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:u=!1}){for(const w of a.values())if(!w.match(/[0-9a-f]{40}/))throw new Ku(w);const d=await Ea.get({fs:t,gitdir:n});if(!o){if(o=await d.getall(`remote.${r}.fetch`),o.length===0)throw new My(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=SN.from(o),m=new Map;if(u){const w=await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ut.deleteRefs({fs:t,gitdir:n,refs:w.map(x=>`refs/tags/${x}`)})}if(s){for(const w of a.keys())if(w.startsWith("refs/tags")&&!w.endsWith("^{}")&&!await Ut.exists({fs:t,gitdir:n,ref:w})){const x=a.get(w);m.set(w,x)}}const g=h.translate([...a.keys()]);for(const[w,x]of g){const _=a.get(w);m.set(x,_)}const v=h.translate([...i.keys()]);for(const[w,x]of v){const _=i.get(w),E=h.translateOne(_);E&&m.set(x,`ref: ${E}`)}const b=[];if(l){for(const w of h.localNamespaces()){const x=(await Ut.listRefs({fs:t,gitdir:n,filepath:w})).map(_=>`${w}/${_}`);for(const _ of x)m.has(_)||b.push(_)}b.length>0&&await Ut.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[w,x]of m)await xu(w,async()=>t.write(Pt.join(n,w),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Ku(a);await xu(r,async()=>t.write(Pt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await xu(r,async()=>t.write(Pt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ut.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Pt.join(n,o))));let a=await xu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Ox.from(a),s=i.refs.size;for(const o of r)i.refs.has(o)&&i.delete(o);i.refs.size<s&&(a=i.toString(),await xu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ut.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ut.packedRefs({fs:t,gitdir:n}),s=fw(r).filter(o=>!Mle.includes(o));for(const o of s){const l=await xu(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||i.get(o));if(l)return Ut.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new Rr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ut.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ut.packedRefs({fs:t,gitdir:n}),i=fw(r);for(const s of i)if(await xu(s,async()=>t.exists(`${n}/${s}`))||a.has(s))return s;throw new Rr(r)}static async expandAgainstMap({ref:t,map:n}){const r=fw(t);for(const a of r)if(await n.has(a))return a;throw new Rr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ut.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=fw(t);for(const s of i){const o=a.get(s);if(o)return Ut.resolveAgainstMap({ref:o.trim(),fullref:s,depth:r,map:a})}throw new Rr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await xu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Ox.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ut.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(s=>s.replace(`${n}/${r}/`,""))}catch{i=[]}for(let s of(await a).keys())s.startsWith(r)&&(s=s.replace(r+"/",""),i.includes(s)||i.push(s));return i.sort(_le),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ut.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ut.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function Ole(e,t){return a_(nM(e),nM(t))}function nM(e){return e.mode==="040000"?e.path+"/":e.path}function q9(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Pn(`Unexpected GitTree entry mode: ${e}`)}function Ple(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Pn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new Pn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const s=q9(i),o=e.slice(r+1,a).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new nm(o);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:o,oid:l,type:s})}return t}function Fle(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Pn(`Could not understand file mode: ${e}`)}function Lle(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Fle(e.mode),e.type||(e.type=q9(e.mode)),e}class es{constructor(t){if(Qt.isBuffer(t))this._entries=Ple(t);else if(Array.isArray(t))this._entries=t.map(Lle);else throw new Pn("invalid type passed to GitTree constructor");this._entries.sort(z9)}static from(t){return new es(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Ole),Qt.concat(t.map(n=>{const r=Qt.from(n.mode.replace(/^0/,"")),a=Qt.from(" "),i=Qt.from(n.path,"utf8"),s=Qt.from([0]),o=Qt.from(n.oid,"hex");return Qt.concat([r,a,i,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class am{static wrap({type:t,object:n}){return Qt.concat([Qt.from(`${t} ${n.byteLength.toString()}\0`),Qt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),s=t.length-(r+1);if(parseInt(i)!==s)throw new Pn(`Length mismatch: expected ${i} bytes but got ${s} instead.`);return{type:a,object:Qt.from(t.slice(r+1))}}}async function G9({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Ble(e,t){const n=new al(e),r=rM(n);if(r!==t.byteLength)throw new Pn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=rM(n);let i;const s=iM(n,t);if(s.byteLength===a)i=s;else{i=Qt.alloc(a);const o=new al(i);for(o.copy(s);!n.eof();)o.copy(iM(n,t));const l=o.tell();if(a!==l)throw new Pn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function rM(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function aM(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function iM(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const s=aM(e,n&a,4);let o=aM(e,(n&i)>>4,3);return o===0&&(o=65536),t.slice(s,s+o)}else return e.slice(n)}function $le(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function W9(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:$le(e)}class K9{constructor(t){if(typeof Qt>"u")throw new Error("Missing Buffer dependency");this.stream=W9(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Qt.alloc(0):(n&&(n=Qt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>zle(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Qt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function zle(e){return e.reduce((t,n)=>t+n.length,0)}async function Ule(e,t){const n=new K9(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Pn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new Pn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const s=n.tell(),{type:o,length:l,ofs:u,reference:d}=await Vle(n),h=new _N.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new Pn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new Pn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:o,num:i,offset:s,end:g,reference:d,ofs:u})}}}}async function Vle(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let s=4;do t=await e.byte(),r|=(t&127)<<s,s+=7;while(t&128)}let a,i;if(n===6){let s=0;a=0;const o=[];do t=await e.byte(),a|=(t&127)<<s,s+=7,o.push(t);while(t&128);i=Qt.from(o)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function Z9(e){return _N.inflate(e)}function Hle(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function qle(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Ap{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new al(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Pn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Pn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const s=r.readUInt32BE(),o=[];for(let d=0;d<s;d++){const h=r.slice(20).toString("hex");o[d]=h}r.seek(r.tell()+4*s);const l=new Map;for(let d=0;d<s;d++)l.set(o[d],r.readUInt32BE());const u=r.slice(20).toString("hex");return new Ap({hashes:o,crcs:{},offsets:l,packfileSha:u,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},s=t.slice(-20).toString("hex"),o=[],l={},u=new Map;let d=null,h=null;await Ule([t],async({data:w,type:x,reference:_,offset:E,num:C})=>{d===null&&(d=C);const k=Math.floor((d-C)*100/d);k!==h&&r&&await r({phase:"Receiving objects",loaded:d-C,total:d}),h=k,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const m=Object.keys(i).map(Number);for(const[w,x]of m.entries()){const _=w+1===m.length?t.byteLength-20:m[w+1],E=i[x],C=Hoe.buf(t.slice(x,_))>>>0;E.end=_,E.crc=C}const g=new Ap({pack:Promise.resolve(t),packfileSha:s,crcs:l,hashes:o,offsets:u,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let w in i){w=Number(w);const x=Math.floor(v*100/d);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=x;const _=i[w];if(!_.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:w});b[g.readDepth]+=1;const k=await Cc(am.wrap({type:E,object:C}));_.oid=k,o.push(k),u.set(k,w),l[k]=_.crc}catch{continue}}return o.sort(),g}async toBuffer(){const t=[],n=(u,d)=>{t.push(Qt.from(u,d))};n("ff744f63","hex"),n("00000002","hex");const r=new al(Qt.alloc(256*4));for(let u=0;u<256;u++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=u&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const u of this.hashes)n(u,"hex");const a=new al(Qt.alloc(this.hashes.length*4));for(const u of this.hashes)a.writeUInt32BE(this.crcs[u]);t.push(a.buffer);const i=new al(Qt.alloc(this.hashes.length*4));for(const u of this.hashes)i.writeUInt32BE(this.offsets.get(u));t.push(i.buffer),n(this.packfileSha,"hex");const s=Qt.concat(t),o=await Cc(s),l=Qt.alloc(20);return l.write(o,"hex"),Qt.concat([s,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Pn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Pn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new al(r),i=a.readUInt8(),s=i&112;let o=n[s];if(o===void 0)throw new Pn("Unrecognized type: 0b"+s.toString(2));const l=i&15;let u=l;i&128&&(u=qle(a,l));let h=null,m=null;if(o==="ofs_delta"){const v=Hle(a),b=t-v;({object:h,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:v}))}const g=r.slice(a.tell());if(m=Qt.from(await Z9(g)),m.byteLength!==u)throw new Pn(`Packfile told us object would have length ${u} but it had length ${m.byteLength}`);return h&&(m=Qt.from(Ble(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:m}),{type:o,format:"content",object:m}}}const hw=Symbol("PackfileCache");async function Gle({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Ap.fromIdx({idx:i,getExternalRefDelta:n})}function CN({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[hw]||(t[hw]=new Map);let s=t[hw].get(n);return s||(s=Gle({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[hw].set(n,s)),s}async function Wle({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await CN({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(u.error)throw new Pn(u.error);if(u.offsets.has(r)){if(!u.pack){const h=l.replace(/idx$/,"pack");u.pack=e.read(h)}const d=await u.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${o.replace(/idx$/,"pack")}`,d}}return null}async function Kr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>Kr({fs:e,cache:t,gitdir:n,oid:d});let s;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Qt.from("tree 0\0")}),s||(s=await G9({fs:e,gitdir:n,oid:r})),!s){if(s=await Wle({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!s)throw new Rr(r);return s}if(a==="deflated"||(s.format==="deflated"&&(s.object=Qt.from(await Z9(s.object)),s.format="wrapped"),a==="wrapped"))return s;const o=await Cc(s.object);if(o!==r)throw new Pn(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:u}=am.unwrap(s.object);if(s.type=u,s.object=l,s.format="content",a==="content")return s;throw new Pn(`invalid requested format "${a}"`)}class Io extends lr{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Io.code,this.data={noun:t,where:n,canForce:r}}}Io.code="AlreadyExistsError";class Oy extends lr{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Oy.code,this.data={nouns:t,short:n,matches:r}}}Oy.code="AmbiguousError";class Py extends lr{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=Py.code,this.data={filepaths:t}}}Py.code="CheckoutConflictError";class Fy extends lr{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=Fy.code,this.data={ref:t,oid:n}}}Fy.code="CommitNotFetchedError";class Ly extends lr{constructor(){super("Empty response from git server."),this.code=this.name=Ly.code,this.data={}}}Ly.code="EmptyServerResponseError";class By extends lr{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=By.code,this.data={}}}By.code="FastForwardError";class $y extends lr{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=$y.code,this.data={prettyDetails:t,result:n}}}$y.code="GitPushError";class Np extends lr{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Np.code,this.data={statusCode:t,statusMessage:n,response:r}}}Np.code="HttpError";class Zu extends lr{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Zu.code,this.data={reason:t}}}Zu.code="InvalidFilepathError";class Ao extends lr{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Ao.code,this.data={ref:t,suggestion:n}}}Ao.code="InvalidRefNameError";class zy extends lr{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=zy.code,this.data={depth:t}}}zy.code="MaxDepthError";class im extends lr{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=im.code,this.data={}}}im.code="MergeNotSupportedError";class sm extends lr{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=sm.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}sm.code="MergeConflictError";class bi extends lr{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=bi.code,this.data={role:t}}}bi.code="MissingNameError";class Xi extends lr{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Xi.code,this.data={parameter:t}}}Xi.code="MissingParameterError";class Uy extends lr{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Uy.code,this.data={errors:t},this.errors=t}}Uy.code="MultipleGitError";class Hf extends lr{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=Hf.code,this.data={expected:t,actual:n}}}Hf.code="ParseError";class Rp extends lr{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Rp.code,this.data={reason:t}}}Rp.code="PushRejectedError";class Ru extends lr{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Ru.code,this.data={capability:t,parameter:n}}}Ru.code="RemoteCapabilityError";class Vy extends lr{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Vy.code,this.data={preview:t,response:n}}}Vy.code="SmartHttpError";class Hy extends lr{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Hy.code,this.data={url:t,transport:n,suggestion:r}}}Hy.code="UnknownTransportError";class qy extends lr{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=qy.code,this.data={url:t}}}qy.code="UrlParseError";class om extends lr{constructor(){super("The operation was canceled."),this.code=this.name=om.code,this.data={}}}om.code="UserCanceledError";class Gy extends lr{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Gy.code,this.data={filepath:t}}}Gy.code="IndexResetError";class Wy extends lr{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Wy.code,this.data={ref:t}}}Wy.code="NoCommitError";var Kle=Object.freeze({__proto__:null,AlreadyExistsError:Io,AmbiguousError:Oy,CheckoutConflictError:Py,CommitNotFetchedError:Fy,EmptyServerResponseError:Ly,FastForwardError:By,GitPushError:$y,HttpError:Np,InternalError:Pn,InvalidFilepathError:Zu,InvalidOidError:Ku,InvalidRefNameError:Ao,MaxDepthError:zy,MergeNotSupportedError:im,MergeConflictError:sm,MissingNameError:bi,MissingParameterError:Xi,MultipleGitError:Uy,NoRefspecError:My,NotFoundError:Rr,ObjectTypeError:Fi,ParseError:Hf,PushRejectedError:Rp,RemoteCapabilityError:Ru,SmartHttpError:Vy,UnknownTransportError:Hy,UnsafeFilepathError:nm,UrlParseError:qy,UserCanceledError:om,UnmergedPathsError:Dy,IndexResetError:Gy,NoCommitError:Wy});function lk({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=Zle(r),`${e} <${t}> ${n} ${r}`}function Zle(e){const t=Yle(Xle(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function Yle(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function Xle(e){return e===0?e:-e}function rc(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Fx(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:Jle(a)}}function Jle(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),Qle(r)}function Qle(e){return e===0?e:-e}class Ri{constructor(t){if(typeof t=="string")this._tag=t;else if(Qt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=Ri.render(t);else throw new Pn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new Ri(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${lk(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.tagger&&(r.tagger=Fx(r.tagger)),r.committer&&(r.committer=Fx(r.committer)),r}withoutSignature(){const t=rc(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return rc(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Qt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=rc(i);const s=a+i;return Ri.from(s)}}function mC(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function ece(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Gr{constructor(t){if(typeof t=="string")this._commit=t;else if(Qt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Gr.render(t);else throw new Pn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Gr.justHeaders(t),a=Gr.justMessage(t),i=rc(r+`
gpgsig`+mC(n)+`
`+a);return new Gr(i)}static from(t){return new Gr(t)}toObject(){return Qt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Gr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return rc(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Gr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.author&&(r.author=Fx(r.author)),r.committer&&(r.committer=Fx(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Pn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${lk(r)}
`;const a=t.committer||t.author;return n+=`committer ${lk(a)}
`,t.gpgsig&&(n+="gpgsig"+mC(t.gpgsig)),n}static render(t){return Gr.renderHeaders(t)+`
`+rc(t.message)}render(){return this._commit}withoutSignature(){const t=rc(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return rc(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return ece(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Gr.justMessage(t._commit);let{signature:s}=await n({payload:a,secretKey:r});s=rc(s);const l=Gr.justHeaders(t._commit)+`
gpgsig`+mC(s)+`
`+i;return Gr.from(l)}}async function Ip({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:es.from([]),oid:r};const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ri.from(i).parse().object,Ip({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Gr.from(i).parse().tree,Ip({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new Fi(r,a,"tree");return{tree:es.from(i),oid:r}}class tce{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const s=new Map;let o;try{o=await Ut.resolve({fs:t,gitdir:n,ref:r})}catch(u){u instanceof Rr&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Ip({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,s=await this.mapPromise,o=s.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:u,object:d}=await Kr({fs:r,cache:a,gitdir:i,oid:l});if(u!==o.type)throw new Fi(l,u,o.type);const h=es.from(d);for(const m of h)s.set(Pt.join(n,m.path),m);return h.entries().map(m=>Pt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=U9(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,o=n.get(t._fullpath).oid,{type:l,object:u}=await Kr({fs:r,cache:a,gitdir:i,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(u)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function Hs({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,i_,{value:function({fs:n,gitdir:r,cache:a}){return new tce({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class nce{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Pt.join(a,n));return i===null?null:i.map(s=>Pt.join(n,s))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Tp(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const s=await(await this._getGitConfig(n,a)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:s});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let s;await qa.acquire({fs:r,gitdir:a,cache:i},async function(o){const l=o.entriesMap.get(t._fullpath),u=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof da<"u"?da.platform!=="win32":!0;if(!l||Dx(u,l,h,m)){const g=await t.content();g===void 0?s=void 0:(s=await Cc(am.wrap({type:"blob",object:g})),l&&s===l.oid&&(!h||u.mode===l.mode)&&Dx(u,l,h,m)&&o.insert({filepath:t._fullpath,stats:u,oid:s}))}else s=l.oid}),t._oid=s}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await Ea.get({fs:t,gitdir:n}),this.config)}}function Ky(){const e=Object.create(null);return Object.defineProperty(e,i_,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new nce({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function rce(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const Y9=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class ace{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*ice(e){const t=new ace;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let s=0;s<a;s++)r[s]!==void 0&&r[s]===n?(i[s]=r[s],r[s]=e[s].next().value):i[s]=null,r[s]!==void 0&&t.consider(r[s]);if(yield i,t.value===null)return}}async function Yu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,u)=>u,reduce:s=async(l,u)=>{const d=Y9(u);return l!==void 0&&d.unshift(l),d},iterate:o=(l,u)=>Promise.all([...u].map(l))}){const l=a.map(g=>g[i_]({fs:e,dir:n,gitdir:r,cache:t})),u=new Array(l.length).fill("."),d=rce(0,l.length),h=async g=>{d.map(w=>{const x=g[w];g[w]=x&&new l[w].ConstructEntry(x)});const b=(await Promise.all(d.map(w=>{const x=g[w];return x?l[w].readdir(x):[]}))).map(w=>(w===null?[]:w)[Symbol.iterator]());return{entries:g,children:ice(b)}},m=async g=>{const{entries:v,children:b}=await h(g),w=v.find(_=>_&&_._fullpath)._fullpath,x=await i(w,v);if(x!==null){let _=await o(m,b);return _=_.filter(E=>E!==void 0),s(x,_)}};return m(u)}async function ck(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Pt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?ck(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function sce(e){return oce(e)&&sM(e.then)&&sM(e.catch)}function oce(e){return e&&typeof e=="object"}function sM(e){return typeof e=="function"}function oM(e){return sce((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const lM=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function cM(e,t){if(oM(t))for(const n of lM)e[`_${n}`]=t[n].bind(t);else for(const n of lM)e[`_${n}`]=sC(t[n].bind(t));oM(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=ck.bind(null,e):t.rm?e._rm=sC(t.rm.bind(t)):t.rmdir.length>2?e._rm=sC(t.rmdir.bind(t)):e._rm=ck.bind(null,e)}class un{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?cM(this,t.promises):cM(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Qt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(kp(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=kp(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(a_),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Qt.isBuffer(r)?r:Qt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Qe(e,t){if(t===void 0)throw new Xi(e)}async function Lx(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function lce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n);const i=new un(e),s=[Hs({ref:r}),Ky(),rm()];let o=[];await qa.acquire({fs:i,gitdir:n,cache:a},async function(u){o=u.unmergedPaths});const l=await Yu({fs:i,cache:a,dir:t,gitdir:n,trees:s,map:async function(u,[d,h,m]){const g=!await Lx(h,m),v=o.includes(u),b=!await Lx(m,d);if(g||v)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new Gy(u)}});await qa.acquire({fs:i,gitdir:n,cache:a},async function(u){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class lm{static async isIgnored({fs:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a}){if(Mx(a)===".git")return!0;if(a===".")return!1;let i="";const s=Pt.join(r,"info","exclude");await t.exists(s)&&(i=await t.read(s,"utf8"));const o=[{gitignore:Pt.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),m=l.slice(d).join("/");o.push({gitignore:Pt.join(n,h,".gitignore"),filepath:m})}let u=!1;for(const d of o){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const m=ile().add(i);m.add(h);const g=kp(d.filepath);if(g!=="."&&m.ignores(g))return!0;u?u=!m.test(d.filepath).unignored:u=m.test(d.filepath).ignored}return u}}async function cce({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,s=`${t}/${i}`;await e.exists(s)||await e.write(s,n)}let gC=null;async function X9(e){return gC===null&&(gC=dce()),gC?uce(e):_N.deflate(e)}async function uce(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function dce(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function rs({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:s=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=am.wrap({type:n,object:r})),i=await Cc(r),r=Qt.from(await X9(r))),s||await cce({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function J9(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function fce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:s=!0}){try{Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r);const o=new un(e);await qa.acquire({fs:o,gitdir:n,cache:a},async l=>{const d=await(await Ea.get({fs:o,gitdir:n})).get("core.autocrlf");return uk({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:i,parallel:s,autocrlf:d})})}catch(o){throw o.caller="git.add",o}}async function uk({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:s,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async m=>{if(!i&&await lm.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(Pt.join(e,m));if(!g)throw new Rr(m);if(g.isDirectory()){const v=await n.readdir(Pt.join(e,m));if(s){const b=v.map(w=>uk({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,w)],index:a,force:i,parallel:s,autocrlf:o}));await Promise.all(b)}else for(const b of v)await uk({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,b)],index:a,force:i,parallel:s,autocrlf:o})}else{const v=g.isSymbolicLink()?await n.readlink(Pt.join(e,m)).then(J9):await n.read(Pt.join(e,m),{autocrlf:o});if(v===null)throw new Rr(m);const b=await rs({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:m,stats:g,oid:b})}}),u=await Promise.allSettled(l),d=u.filter(m=>m.status==="rejected").map(m=>m.reason);if(d.length>1)throw new Uy(d);if(d.length===1)throw d[0];return u.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function F0({fs:e,gitdir:t,path:n}){return(await Ea.get({fs:e,gitdir:t})).get(n)}function Q9(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Xu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await F0({fs:e,gitdir:t,path:"user.name"}),email:await F0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},s=Q9({},i,r?r.author:void 0,n);if(s.name!==void 0)return s}async function jp({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),s={name:await F0({fs:e,gitdir:t,path:"user.name"}),email:await F0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=Q9({},s,a?a.committer:void 0,n,r);if(o.name!==void 0)return o}async function eB({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ri.from(i).parse().object,eB({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new Fi(r,a,"commit");return{commit:Gr.from(i),oid:r}}async function Dp({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await eB({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function s_({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:g}){let v=!1;h||(h=await Ut.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,w;try{b=await Ut.resolve({fs:e,gitdir:r,ref:h}),w=await Dp({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new Wy(h);const x=l?await Xu({fs:e,gitdir:r,author:i,commit:w.commit}):await Xu({fs:e,gitdir:r,author:i});if(!x)throw new bi("author");const _=l?await jp({fs:e,gitdir:r,author:x,committer:s,commit:w.commit}):await jp({fs:e,gitdir:r,author:x,committer:s});if(!_)throw new bi("committer");return qa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=H9(E.entries).get(".");if(g||(g=await tB({fs:e,gitdir:r,inode:k,dryRun:u})),m?m=await Promise.all(m.map(N=>Ut.resolve({fs:e,gitdir:r,ref:N}))):l?m=w.commit.parent:m=b?[b]:[],!a)if(l)a=w.commit.message;else throw new Xi("message");let I=Gr.from({tree:g,parent:m,author:x,committer:_,message:a});o&&(I=await Gr.sign(I,n,o));const j=await rs({fs:e,gitdir:r,type:"commit",object:I.toObject(),dryRun:u});return!d&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:h,value:j}),j})}async function tB({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await tB({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=es.from(i);return await rs({fs:e,gitdir:t,type:"tree",object:s.toObject(),dryRun:r})}async function Zy({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Zu("leading-slash");if(a.endsWith("/"))throw new Zu("trailing-slash");const i=r,s=await Ip({fs:e,cache:t,gitdir:n,oid:r}),o=s.tree;if(a==="")r=s.oid;else{const l=a.split("/");r=await nB({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:i,filepath:a})}return r}async function nB({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s}){const o=a.shift();for(const l of r)if(l.path===o){if(a.length===0)return l.oid;{const{type:u,object:d}=await Kr({fs:e,cache:t,gitdir:n,oid:l.oid});if(u!=="tree")throw new Fi(i,u,"tree",s);return r=es.from(d),nB({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s})}}throw new Rr(`file or directory found at "${i}:${s}"`)}async function cm({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await Zy({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:s}=await Ip({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,tree:i.entries()}}async function Yy({fs:e,gitdir:t,tree:n}){const r=es.from(n).toObject();return await rs({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function hce({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:s,force:o,author:l,committer:u,signingKey:d}){let h;try{h=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof Rr))throw x}let g=(await cm({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new Io("note",i);typeof s=="string"&&(s=Qt.from(s,"utf8"));const v=await rs({fs:e,gitdir:r,type:"blob",object:s,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await Yy({fs:e,gitdir:r,tree:g});return await s_({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:u,signingKey:d})}async function pce({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:s,force:o,author:l,committer:u,signingKey:d,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i),Qe("note",s),d&&Qe("onSign",t);const m=new un(e),g=await Xu({fs:m,gitdir:r,author:l});if(!g)throw new bi("author");const v=await jp({fs:m,gitdir:r,author:g,committer:u});if(!v)throw new bi("committer");return await hce({fs:new un(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:s,force:o,author:g,committer:v,signingKey:d})}catch(m){throw m.caller="git.addNote",m}}async function rB({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==ol.clean(n))throw new Ao(n,ol.clean(n));const i=await Ea.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new Io("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await Ea.save({fs:e,gitdir:t,config:i})}async function mce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("remote",r),Qe("url",a),await rB({fs:new un(e),gitdir:n,remote:r,url:a,force:i})}catch(s){throw s.caller="git.addRemote",s}}async function gce({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await Ut.exists({fs:e,gitdir:r,ref:a}))throw new Io("tag",a);const h=await Ut.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:m}=await Kr({fs:e,cache:t,gitdir:r,oid:h});let g=Ri.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:s,gpgsig:o});u&&(g=await Ri.sign(g,n,u));const v=await rs({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Ut.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function yce({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1,cache:h={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("ref",a),u&&Qe("onSign",t);const m=new un(e),g=await Xu({fs:m,gitdir:r,author:i});if(!g)throw new bi("tagger");return await gce({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:s,gpgsig:o,object:l,signingKey:u,force:d})}catch(m){throw m.caller="git.annotatedTag",m}}async function bce({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==ol.clean(n))throw new Ao(n,ol.clean(n));const s=`refs/heads/${n}`;if(!i&&await Ut.exists({fs:e,gitdir:t,ref:s}))throw new Io("branch",n,!1);let o;try{o=await Ut.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Ut.writeRef({fs:e,gitdir:t,ref:s,value:o}),a&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function vce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:s=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await bce({fs:new un(e),gitdir:n,ref:r,object:a,checkout:i,force:s})}catch(o){throw o.caller="git.branch",o}}const aB=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function TN({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:s,ref:o,filepaths:l,noCheckout:u,noUpdateHead:d,dryRun:h,force:m,track:g=!0}){let v;if(r)try{v=await Ut.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Ut.resolve({fs:e,gitdir:i,ref:o})}catch(w){if(o==="HEAD")throw w;const x=`${s}/${o}`;if(b=await Ut.resolve({fs:e,gitdir:i,ref:x}),g){const _=await Ea.get({fs:e,gitdir:i});await _.set(`branch.${o}.remote`,s),await _.set(`branch.${o}.merge`,`refs/heads/${o}`),await Ea.save({fs:e,gitdir:i,config:_})}await Ut.writeRef({fs:e,gitdir:i,ref:`refs/heads/${o}`,value:b})}if(!u){let w;try{w=await wce({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:o,force:m,filepaths:l})}catch(k){throw k instanceof Rr&&k.data.what===b?new Fy(o,b):k}const x=w.filter(([k])=>k==="conflict").map(([k,I])=>I);if(x.length>0)throw new Py(x);const _=w.filter(([k])=>k==="error").map(([k,I])=>I);if(_.length>0)throw new Pn(_.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const C=w.length;await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(w.filter(([I])=>I==="delete"||I==="delete-index").map(async function([I,j]){const N=`${a}/${j}`;I==="delete"&&await e.rm(N),k.delete({filepath:j}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[I,j]of w)if(I==="rmdir"||I==="rmdir-index"){const N=`${a}/${j}`;try{I==="rmdir-index"&&k.delete({filepath:j}),await e.rmdir(N),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(P){if(P.code==="ENOTEMPTY")console.log(`Did not delete ${j} because directory is not empty`);else throw P}}}),await Promise.all(w.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,I]){const j=`${a}/${I}`;await e.mkdir(j),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(w.filter(([I])=>I==="create"||I==="create-index"||I==="update"||I==="mkdir-index").map(async function([I,j,N,P,L]){const H=`${a}/${j}`;try{if(I!=="create-index"&&I!=="mkdir-index"){const{object:K}=await Kr({fs:e,cache:t,gitdir:i,oid:N});if(L&&await e.rm(H),P===33188)await e.write(H,K);else if(P===33261)await e.write(H,K,{mode:511});else if(P===40960)await e.writelink(H,K);else throw new Pn(`Invalid mode 0o${P.toString(8)} detected in blob ${N}`)}const M=await e.lstat(H);P===33261&&(M.mode=493),I==="mkdir-index"&&(M.mode=57344),k.insert({filepath:j,stats:M,oid:N}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(M){console.log(M)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const w=await Ut.expand({fs:e,gitdir:i,ref:o});w.startsWith("refs/heads")?await Ut.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:w}):await Ut.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function wce({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:s,filepaths:o}){let l=0;return Yu({fs:e,cache:t,dir:r,gitdir:a,trees:[Hs({ref:i}),Ky(),rm()],map:async function(u,[d,h,m]){if(u===".")return;if(o&&!o.some(v=>aB(u,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!m,!!d,!!h].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(u)?["delete",u]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",u];case"blob":return["create",u,await d.oid(),await d.mode()];case"commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",u];case"blob-blob":return await d.oid()!==await h.oid()?s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]:await d.mode()!==await h.mode()?s?["update",u,await d.oid(),await d.mode(),!0]:["conflict",u]:["create-index",u,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",u];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",u];case"101":switch(await m.type()){case"tree":return["rmdir",u];case"blob":return await m.oid()!==await h.oid()?s?["delete",u]:["conflict",u]:["delete",u];case"commit":return["rmdir-index",u];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await d.oid()&&await m.mode()===await d.mode()&&!s)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await d.oid())return s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]}else if(s)return["update",u,await d.oid(),await d.mode(),await d.mode()!==await m.mode()];return await d.mode()!==await m.mode()?["update",u,await d.oid(),await d.mode(),!0]:await d.oid()!==await m.oid()?["update",u,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",u,await d.oid()];case"blob-tree":return["update-blob-to-tree",u];case"commit-commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await d.type()}`]}}},reduce:async function(u,d){return d=Y9(d),u?u&&u[0]==="rmdir"?(d.push(u),d):(d.unshift(u),d):d}})}async function iB({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Pt.join(r,".git"),remote:i="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:u=s===void 0,dryRun:d=!1,force:h=!1,track:m=!0,cache:g={}}){try{Qe("fs",e),Qe("dir",r),Qe("gitdir",a);const v=s||"HEAD";return await TN({fs:new un(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:o,noCheckout:l,noUpdateHead:u,dryRun:d,force:h,track:m})}catch(v){throw v.caller="git.checkout",v}}const xce=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function rf(e){const t=xce.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function hd({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ut.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ut.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:rf(a)}function _ce(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function sB({username:e="",password:t=""}){return`Basic ${Qt.from(`${e}:${t}`).toString("base64")}`}async function Xy(e,t){const n=W9(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Bx(e){let t=0;const n=[];await Xy(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function uM(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function dk(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class ua{static flush(){return Qt.from("0000","utf8")}static delim(){return Qt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Qt.from(t));const n=t.length+4,r=dk(4,n);return Qt.concat([Qt.from(r,"utf8"),t])}static streamReader(t){const n=new K9(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function dM(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function fM(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=ua.streamReader(e);let s=await i();for(;s===null;)s=await i();if(s===!0)throw new Ly;if(s.includes("version 2"))return dM(i);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new Hf(`# service=${t}\\n`,s.toString("utf8"));let o=await i();for(;o===null;)o=await i();if(o===!0)return{capabilities:n,refs:r,symrefs:a};if(o=o.toString("utf8"),o.includes("version 2"))return dM(i);const[l,u]=yC(o,"\0","\\x00");if(u.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=yC(l," "," ");for(r.set(h,d);;){const m=await i();if(m===!0)break;if(m!==null){const[g,v]=yC(m.toString("utf8")," "," ");r.set(v,g)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function yC(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new Hf(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const hM=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,pM=(e,t)=>{(t.username||t.password)&&(e.Authorization=sB(t)),t.headers&&Object.assign(e,t.headers)},bC=async e=>{try{const t=Qt.from(await Bx(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class $x{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:o,url:l,headers:u,protocolVersion:d}){let{url:h,auth:m}=uM(l);const g=s?hM(s,h):h;(m.username||m.password)&&(u.Authorization=sB(m)),d===2&&(u["Git-Protocol"]="version=2");let v,b,w=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${o}`,headers:u}),b=!1,v.statusCode===401||v.statusCode===203){const x=w?i:r;if(x){if(m=await x(h,{...m,headers:{...u}}),m&&m.cancel)throw new om;m&&(pM(u,m),w=!0,b=!0)}}else v.statusCode===200&&w&&a&&await a(h,m);while(b);if(v.statusCode!==200){const{response:x}=await bC(v);throw new Np(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${o}-advertisement`){const x=await fM(v.body,{service:o});return x.auth=m,x}else{const{preview:x,response:_,data:E}=await bC(v);try{const C=await fM([E],{service:o});return C.auth=m,C}catch{throw new Vy(x,_)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:s,body:o,headers:l}){const u=uM(i);u&&(i=u.url),r&&(i=hM(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,pM(l,s);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:o,headers:l});if(d.statusCode!==200){const{response:h}=bC(d);throw new Np(d.statusCode,d.statusMessage,h)}return d}}function Sce({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class o_{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",$x),n.set("https",$x);const r=Sce({url:t});if(!r)throw new qy(t);if(n.has(r.transport))return n.get(r.transport);throw new Hy(t,r.transport,r.transport==="ssh"?_ce(t):void 0)}}let Wd=null;class L0{static async read({fs:t,gitdir:n}){Wd===null&&(Wd=new P0);const r=Pt.join(n,"shallow"),a=new Set;return await Wd.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(s=>a.add(s))}),a}static async write({fs:t,gitdir:n,oids:r}){Wd===null&&(Wd=new P0);const a=Pt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Wd.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Wd.acquire(a,async function(){await t.rm(a)})}}async function Ece({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Cce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Pt.join(n,"objects/pack"));i=i.filter(s=>s.endsWith(".idx"));for(const s of i){const o=`${n}/objects/pack/${s}`,l=await CN({fs:e,cache:t,filename:o,getExternalRefDelta:a});if(l.error)throw new Pn(l.error);if(l.offsets.has(r))return!0}return!1}async function mM({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=o=>Kr({fs:e,cache:t,gitdir:n,oid:o});let s=await Ece({fs:e,gitdir:n,oid:r});return s||(s=await Cce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),s}function Tce(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function oB(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const l_={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Lw{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function kce(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function lB(e){const t=new Lw;let n="";return(async()=>(await Xy(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=kce(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class cB{static demux(t){const n=ua.streamReader(t),r=new Lw,a=new Lw,i=new Lw,s=async function(){const o=await n();if(o===null)return s();if(o===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(o[0]){case 1:{a.write(o.slice(1));break}case 2:{i.write(o.slice(1));break}case 3:{const l=o.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}s()};return s(),{packetlines:r,packfile:a,progress:i}}}async function Ace(e){const{packetlines:t,packfile:n,progress:r}=cB.demux(e),a=[],i=[],s=[];let o=!1,l=!1;return new Promise((u,d)=>{Xy(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&d(new Ku(g)),a.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&d(new Ku(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,v]=m.split(" ");s.push({oid:g,status:v}),v||(l=!0)}else m.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))})})}function Nce({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:s=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const u of t)o.push(ua.encode(`want ${u}${l}
`)),l="";for(const u of r)o.push(ua.encode(`shallow ${u}
`));a!==null&&o.push(ua.encode(`deepen ${a}
`)),i!==null&&o.push(ua.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const u of s)o.push(ua.encode(`deepen-not ${u}
`));o.push(ua.flush());for(const u of n)o.push(ua.encode(`have ${u}
`));return o.push(ua.encode(`done
`)),o}async function kN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:u,remoteRef:d,remote:h,url:m,corsProxy:g,depth:v=null,since:b=null,exclude:w=[],relative:x=!1,tags:_=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:I=!1}){const j=u||await hd({fs:e,gitdir:l,test:!0}),N=await Ea.get({fs:e,gitdir:l}),P=h||j&&await N.get(`branch.${j}.remote`)||"origin",L=m||await N.get(`remote.${P}.url`);if(typeof L>"u")throw new Xi("remote OR url");const H=d||j&&await N.get(`branch.${j}.merge`)||u||"HEAD";g===void 0&&(g=await N.get("http.corsProxy"));const M=o_.getRemoteHelperFor({url:L}),K=await M.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:g,service:"git-upload-pack",url:L,headers:C,protocolVersion:1}),U=K.auth,se=K.refs;if(se.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!K.capabilities.has("shallow"))throw new Ru("shallow","depth");if(b!==null&&!K.capabilities.has("deepen-since"))throw new Ru("deepen-since","since");if(w.length>0&&!K.capabilities.has("deepen-not"))throw new Ru("deepen-not","exclude");if(x===!0&&!K.capabilities.has("deepen-relative"))throw new Ru("deepen-relative","relative");const{oid:ie,fullref:re}=Ut.resolveAgainstMap({ref:H,map:se});for(const Ve of se.keys())Ve===re||Ve==="HEAD"||Ve.startsWith("refs/heads/")||_&&Ve.startsWith("refs/tags/")||se.delete(Ve);const X=oB([...K.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${l_.agent}`]);x&&X.push("deepen-relative");const ne=E?[ie]:se.values(),q=E?[j]:await Ut.listRefs({fs:e,gitdir:l,filepath:"refs"});let J=[];for(let Ve of q)try{Ve=await Ut.expand({fs:e,gitdir:l,ref:Ve});const De=await Ut.resolve({fs:e,gitdir:l,ref:Ve});await mM({fs:e,cache:t,gitdir:l,oid:De})&&J.push(De)}catch{}J=[...new Set(J)];const Q=await L0.read({fs:e,gitdir:l}),te=K.capabilities.has("shallow")?[...Q]:[],ue=Nce({capabilities:X,wants:ne,haves:J,shallows:te,depth:v,since:b,exclude:w}),ge=Qt.from(await Bx(ue)),Ie=await M.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:L,auth:U,body:[ge],headers:C}),Ae=await Ace(Ie.body);Ie.headers&&(Ae.headers=Ie.headers);for(const Ve of Ae.shallows)if(!Q.has(Ve))try{const{object:De}=await Kr({fs:e,cache:t,gitdir:l,oid:Ve}),$=new Gr(De),Ee=await Promise.all($.headers().parent.map(fe=>mM({fs:e,cache:t,gitdir:l,oid:fe})));Ee.length===0||Ee.every(fe=>fe)||Q.add(Ve)}catch{Q.add(Ve)}for(const Ve of Ae.unshallows)Q.delete(Ve);if(await L0.write({fs:e,gitdir:l,oids:Q}),E){const Ve=new Map([[re,ie]]),De=new Map;let $=10,Ee=re;for(;$--;){const oe=K.symrefs.get(Ee);if(oe===void 0)break;De.set(Ee,oe),Ee=oe}const Te=se.get(Ee);Te&&Ve.set(Ee,Te);const{pruned:fe}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:P,refs:Ve,symrefs:De,tags:_,prune:k});k&&(Ae.pruned=fe)}else{const{pruned:Ve}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:P,refs:se,symrefs:K.symrefs,tags:_,prune:k,pruneTags:I});k&&(Ae.pruned=Ve)}if(Ae.HEAD=K.symrefs.get("HEAD"),Ae.HEAD===void 0){const{oid:Ve}=Ut.resolveAgainstMap({ref:"HEAD",map:se});for(const[De,$]of se.entries())if(De!=="HEAD"&&$===Ve){Ae.HEAD=De;break}}const _e=re.startsWith("refs/tags")?"tag":"branch";if(Ae.FETCH_HEAD={oid:ie,description:`${_e} '${rf(re)}' of ${L}`},r||a){const Ve=lB(Ae.progress);Xy(Ve,async De=>{if(a&&await a(De),r){const $=De.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);$&&await r({phase:$[1].trim(),loaded:parseInt($[2],10),total:parseInt($[3],10)})}})}const ve=Qt.from(await Bx(Ae.packfile));if(Ie.body.error)throw Ie.body.error;const Be=ve.slice(-20).toString("hex"),nt={defaultBranch:Ae.HEAD,fetchHead:Ae.FETCH_HEAD.oid,fetchHeadDescription:Ae.FETCH_HEAD.description};if(Ae.headers&&(nt.headers=Ae.headers),k&&(nt.pruned=Ae.pruned),Be!==""&&!Tce(ve)){nt.packfile=`objects/pack/pack-${Be}.pack`;const Ve=Pt.join(l,nt.packfile);await e.write(Ve,ve);const De=Ee=>Kr({fs:e,cache:t,gitdir:l,oid:Ee}),$=await Ap.fromPack({pack:ve,getExternalRefDelta:De,onProgress:r});await e.write(Ve.replace(/\.pack$/,".idx"),await $.toBuffer())}return nt}async function uB({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(s=>r+"/"+s);for(const s of i)await e.mkdir(s);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function Rce({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:u,gitdir:d,url:h,corsProxy:m,ref:g,remote:v,depth:b,since:w,exclude:x,relative:_,singleBranch:E,noCheckout:C,noTags:k,headers:I}){try{if(await uB({fs:e,gitdir:d}),await rB({fs:e,gitdir:d,remote:v,url:h,force:!1}),m){const P=await Ea.get({fs:e,gitdir:d});await P.set("http.corsProxy",m),await Ea.save({fs:e,gitdir:d,config:P})}const{defaultBranch:j,fetchHead:N}=await kN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:d,ref:g,remote:v,corsProxy:m,depth:b,since:w,exclude:x,relative:_,singleBranch:E,headers:I,tags:!k});if(N===null)return;g=g||j,g=g.replace("refs/heads/",""),await TN({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:u,gitdir:d,ref:g,remote:v,noCheckout:C})}catch(j){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),j}}async function Ice({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u=Pt.join(l,".git"),url:d,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:w=[],relative:x=!1,singleBranch:_=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:I={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",u),E||Qe("dir",l),Qe("url",d),await Rce({fs:new un(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u,url:d,corsProxy:h,ref:m,remote:g,depth:v,since:b,exclude:w,relative:x,singleBranch:_,noCheckout:E,noTags:C,headers:k})}catch(j){throw j.caller="git.clone",j}}async function jce({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:g,cache:v={}}){try{Qe("fs",e),l||Qe("message",a),o&&Qe("onSign",t);const b=new un(e);return await s_({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l,dryRun:u,noUpdateBranch:d,ref:h,parent:m,tree:g})}catch(b){throw b.caller="git.commit",b}}async function Dce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Qe("fs",e),Qe("gitdir",n),await hd({fs:new un(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Mce({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ut.exists({fs:e,gitdir:t,ref:n}))throw new Rr(n);const a=await Ut.expand({fs:e,gitdir:t,ref:n}),i=await hd({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await Ut.resolve({fs:e,gitdir:t,ref:a});await Ut.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Ut.deleteRef({fs:e,gitdir:t,ref:a});const s=rf(n),o=await Ea.get({fs:e,gitdir:t});await o.deleteSection("branch",s),await Ea.save({fs:e,gitdir:t,config:o})}async function Oce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Mce({fs:new un(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Pce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{Qe("fs",e),Qe("ref",r),await Ut.deleteRef({fs:new un(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Fce({fs:e,gitdir:t,remote:n}){const r=await Ea.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await Ea.save({fs:e,gitdir:t,config:r})}async function Lce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("remote",r),await Fce({fs:new un(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Bce({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ut.deleteRef({fs:e,gitdir:t,ref:n})}async function $ce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("ref",r),await Bce({fs:new un(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function zce({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Uce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await CN({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(u.error)throw new Pn(u.error);for(const d of u.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function Vce({fs:e,cache:t,gitdir:n,oid:r}){const a=o=>Kr({fs:e,cache:t,gitdir:n,oid:o}),i=await zce({fs:e,gitdir:n,oid:r}),s=await Uce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const o of s)i.indexOf(o)===-1&&i.push(o);if(i.length===1)return i[0];throw i.length>1?new Oy("oids",r,i):new Rr(`an object matching "${r}"`)}async function Hce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Vce({fs:new un(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function qce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Ut.expand({fs:new un(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function AN({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let s=r.map((o,l)=>({index:l,oid:o}));for(;s.length;){const o=new Set;for(const{oid:u,index:d}of s)a[u]||(a[u]=new Set),a[u].add(d),a[u].size===i&&o.add(u);if(o.size>0)return[...o];const l=new Map;for(const{oid:u,index:d}of s)try{const{object:h}=await Kr({fs:e,cache:t,gitdir:n,oid:u}),m=Gr.from(h),{parent:g}=m.parseHeaders();for(const v of g)(!a[v]||!a[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}s=Array.from(l.values())}return[]}const vC=/^.*(\r?\n|$)/gm;function Gce({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],s=t[2],o=i.match(vC),l=a.match(vC),u=s.match(vC),d=dle(o,l,u),h=7;let m="",g=!0;for(const v of d)v.ok&&(m+=v.ok.join("")),v.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=v.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=v.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function Wce({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),index:a,ourOid:i,baseOid:s,theirOid:o,ourName:l="ours",baseName:u="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const v=Hs({ref:i}),b=Hs({ref:s}),w=Hs({ref:o}),x=[],_=[],E=[],C=[],k=await Yu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,w],map:async function(I,[j,N,P]){const L=Mx(I),H=await Lx(j,N),M=await Lx(P,N);switch(`${H}-${M}`){case"false-false":return{mode:await N.mode(),path:L,oid:await N.oid(),type:await N.type()};case"false-true":return P?{mode:await P.mode(),path:L,oid:await P.oid(),type:await P.type()}:void 0;case"true-false":return j?{mode:await j.mode(),path:L,oid:await j.oid(),type:await j.type()}:void 0;case"true-true":{if(j&&N&&P&&await j.type()==="blob"&&await N.type()==="blob"&&await P.type()==="blob")return Kce({fs:e,gitdir:r,path:L,ours:j,base:N,theirs:P,ourName:l,baseName:u,theirName:d,mergeDriver:g}).then(async K=>{if(K.cleanMerge)m||a.insert({filepath:I,oid:K.mergeResult.oid,stage:0});else if(x.push(I),_.push(I),!m){const U=await N.oid(),se=await j.oid(),ie=await P.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:U,stage:1}),a.insert({filepath:I,oid:se,stage:2}),a.insert({filepath:I,oid:ie,stage:3})}return K.mergeResult});if(N&&!j&&P&&await N.type()==="blob"&&await P.type()==="blob"){if(x.push(I),E.push(I),!m){const K=await N.oid(),U=await P.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:K,stage:1}),a.insert({filepath:I,oid:U,stage:3})}return{mode:await P.mode(),oid:await P.oid(),type:"blob",path:L}}if(N&&j&&!P&&await N.type()==="blob"&&await j.type()==="blob"){if(x.push(I),C.push(I),!m){const K=await N.oid(),U=await j.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:K,stage:1}),a.insert({filepath:I,oid:U,stage:2})}return{mode:await j.mode(),oid:await j.oid(),type:"blob",path:L}}if(N&&!j&&!P&&await N.type()==="blob")return;throw new im}}},reduce:x.length!==0&&(!n||m)?void 0:async(I,j)=>{const N=j.filter(Boolean);if(I&&!(I&&I.type==="tree"&&N.length===0)){if(N.length>0){const L=new es(N).toObject(),H=await rs({fs:e,gitdir:r,type:"tree",object:L,dryRun:h});I.oid=H}return I}}});return x.length!==0?(n&&!m&&await Yu({fs:e,cache:t,dir:n,gitdir:r,trees:[Hs({ref:k.oid})],map:async function(I,[j]){const N=`${n}/${I}`;if(await j.type()==="blob"){const P=await j.mode(),L=new TextDecoder().decode(await j.content());await e.write(N,L,{mode:P})}return!0}}),new sm(x,_,E,C)):k.oid}async function Kce({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:s,theirName:o,baseName:l,dryRun:u,mergeDriver:d=Gce}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Qt.from(await r.content()).toString("utf8"),v=Qt.from(await a.content()).toString("utf8"),b=Qt.from(await i.content()).toString("utf8"),{mergedText:w,cleanMerge:x}=await d({branches:[l,s,o],contents:[v,g,b],path:n}),_=await rs({fs:e,gitdir:t,type:"blob",object:Qt.from(w,"utf8"),dryRun:u});return{cleanMerge:x,mergeResult:{mode:m,path:n,oid:_,type:h}}}async function dB({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:g,signingKey:v,onSign:b,mergeDriver:w}){a===void 0&&(a=await hd({fs:e,gitdir:r,fullname:!0})),a=await Ut.expand({fs:e,gitdir:r,ref:a}),i=await Ut.expand({fs:e,gitdir:r,ref:i});const x=await Ut.resolve({fs:e,gitdir:r,ref:a}),_=await Ut.resolve({fs:e,gitdir:r,ref:i}),E=await AN({fs:e,cache:t,gitdir:r,oids:[x,_]});if(E.length!==1)throw new im;const C=E[0];if(C===_)return{oid:x,alreadyMerged:!0};if(s&&C===x)return!l&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:a,value:_}),{oid:_,fastForward:!0};{if(o)throw new By;const k=await qa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async j=>Wce({fs:e,cache:t,dir:n,gitdir:r,index:j,ourOid:x,theirOid:_,baseOid:C,ourName:rf(a),baseName:"base",theirName:rf(i),dryRun:l,abortOnConflict:d,mergeDriver:w}));if(k instanceof sm)throw k;return h||(h=`Merge branch '${rf(i)}' into ${rf(a)}`),{oid:await s_({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[x,_],author:m,committer:g,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:u}),tree:k,mergeCommit:!0}}}async function fB({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:u,ref:d,url:h,remote:m,remoteRef:g,prune:v,pruneTags:b,fastForward:w,fastForwardOnly:x,corsProxy:_,singleBranch:E,headers:C,author:k,committer:I,signingKey:j}){try{if(!d){const L=await hd({fs:e,gitdir:u});if(!L)throw new Xi("ref");d=L}const{fetchHead:N,fetchHeadDescription:P}=await kN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:u,corsProxy:_,ref:d,url:h,remote:m,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:b});await dB({fs:e,cache:t,gitdir:u,ours:d,theirs:N,fastForward:w,fastForwardOnly:x,message:`Merge ${P}`,author:k,committer:I,signingKey:j,dryRun:!1,noUpdateBranch:!1}),await TN({fs:e,cache:t,onProgress:r,dir:l,gitdir:u,ref:d,remote:m,noCheckout:!1})}catch(N){throw N.caller="git.pull",N}}async function Zce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,corsProxy:g,singleBranch:v,headers:b={},cache:w={}}){try{Qe("fs",e),Qe("http",t),Qe("gitdir",l);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await fB({fs:new un(e),cache:w,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function Yce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,remote:d,remoteRef:h,url:m,corsProxy:g,depth:v=null,since:b=null,exclude:w=[],relative:x=!1,tags:_=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:I=!1,cache:j={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",l),await kN({fs:new un(e),cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,gitdir:l,ref:u,remote:d,remoteRef:h,url:m,corsProxy:g,depth:v,since:b,exclude:w,relative:x,tags:_,singleBranch:E,headers:C,prune:k,pruneTags:I})}catch(N){throw N.caller="git.fetch",N}}async function Xce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await AN({fs:new un(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function hB({fs:e,filepath:t}){if(await e.exists(Pt.join(t,".git")))return t;{const n=kp(t);if(n===t)throw new Rr(`git root for ${t}`);return hB({fs:e,filepath:n})}}async function Jce({fs:e,filepath:t}){try{return Qe("fs",e),Qe("filepath",t),await hB({fs:new un(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function Qce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await F0({fs:new un(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function eue({fs:e,gitdir:t,path:n}){return(await Ea.get({fs:e,gitdir:t})).getall(n)}async function tue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("path",r),await eue({fs:new un(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function nue({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1}){try{Qe("http",e),Qe("url",i);const u=await o_.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:1}),d={capabilities:[...u.capabilities]};for(const[h,m]of u.refs){const g=h.split("/"),v=g.pop();let b=d;for(const w of g)b[w]=b[w]||{},b=b[w];b[v]=m}for(const[h,m]of u.symrefs){const g=h.split("/"),v=g.pop();let b=d;for(const w of g)b[w]=b[w]||{},b=b[w];b[v]=m}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function pB(e,t,n,r){const a=[];for(const[i,s]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),u=a[a.length-1],d=u.ref===l?u:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=s}continue}const o={ref:i,oid:s};n&&e.symrefs.has(i)&&(o.target=e.symrefs.get(i)),a.push(o)}return a}async function rue({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{Qe("http",e),Qe("url",i);const d=await o_.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const m of d.capabilities){const[g,v]=m.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:pB(d,void 0,!0,!0)}}catch(u){throw u.caller="git.getRemoteInfo2",u}}async function aue({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=am.wrap({type:e,object:t})),r=await Cc(t)),{oid:r,object:t}}async function iue({object:e}){try{Qe("object",e),typeof e=="string"?e=Qt.from(e,"utf8"):e=Qt.from(e);const t="blob",{oid:n,object:r}=await aue({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function sue({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Pt.join(r,i);const s=await e.read(i),o=u=>Kr({fs:e,cache:t,gitdir:a,oid:u}),l=await Ap.fromPack({pack:s,getExternalRefDelta:o,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function oue({fs:e,onProgress:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("dir",n),Qe("gitdir",n),Qe("filepath",a),await sue({fs:new un(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(s){throw s.caller="git.indexPack",s}}async function lue({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){try{return Qe("fs",e),Qe("gitdir",r),t||Qe("dir",n),await uB({fs:new un(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function mB({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const s=await L0.read({fs:e,gitdir:n});if(!r)throw new Xi("oid");if(!a)throw new Xi("ancestor");if(r===a)return!1;const o=[r],l=new Set;let u=0;for(;o.length;){if(u++===i)throw new zy(i);const d=o.shift(),{type:h,object:m}=await Kr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Fi(d,h,"commit");const g=Gr.from(m).parse();for(const v of g.parent)if(v===a)return!0;if(!s.has(d))for(const v of g.parent)l.has(v)||(o.push(v),l.add(v))}return!1}async function cue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:s={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),Qe("ancestor",a),await mB({fs:new un(e),cache:s,gitdir:n,oid:r,ancestor:a,depth:i})}catch(o){throw o.caller="git.isDescendent",o}}async function uue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("filepath",r),lm.isIgnored({fs:new un(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function due({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return Qe("fs",e),Qe("gitdir",n),Ut.listBranches({fs:new un(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function fue({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ut.resolve({gitdir:t,fs:e,ref:n}),i=[];return await gB({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return qa.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function gB({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:s}=await cm({fs:e,cache:t,gitdir:n,oid:r});for(const o of s)o.type==="tree"?await gB({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:a,prefix:Pt.join(i,o.path)}):a.push(Pt.join(i,o.path))}async function hue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),await fue({fs:new un(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function pue({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ut.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof Rr)return[]}return(await cm({fs:e,cache:t,gitdir:n,oid:a})).tree.map(o=>({target:o.path,note:o.oid}))}async function mue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await pue({fs:new un(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function gue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return Qe("fs",e),Qe("gitdir",n),Ut.listRefs({fs:new un(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function yue({fs:e,gitdir:t}){const n=await Ea.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const s=await n.get(`remote.${i}.url`);return{remote:i,url:s}}))}async function bue({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),await yue({fs:new un(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function vue(e){const t=ua.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...s]=r.split(" "),o={ref:i,oid:a};for(const l of s){const[u,d]=l.split(":");u==="symref-target"?o.target=d:u==="peeled"&&(o.peeled=d)}n.push(o)}return n}async function wue({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(ua.encode(`command=ls-refs
`)),r.push(ua.encode(`agent=${l_.agent}
`)),(n||t||e)&&r.push(ua.delim()),n&&r.push(ua.encode("peel")),t&&r.push(ua.encode("symrefs")),e&&r.push(ua.encode(`ref-prefix ${e}`)),r.push(ua.flush()),r}async function xue({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:u,symrefs:d,peelTags:h}){try{Qe("http",e),Qe("url",i);const m=await $x.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(m.protocolVersion===1)return pB(m,u,d,h);const g=await wue({prefix:u,symrefs:d,peelTags:h}),v=await $x.connect({http:e,auth:m.auth,headers:s,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,body:g});return vue(v.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function _ue({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return Qe("fs",e),Qe("gitdir",n),Ut.listTags({fs:new un(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Sue(e,t){return e.committer.timestamp-t.committer.timestamp}const Eue="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function gM({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Eue)return;const i=r;let s;const o=await Ip({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return a===o.oid?s=o.path:(s=await yB({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function yB({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:s=[],parentPath:o=""}){const l=r.entries().map(function(u){let d;return u.oid===a?(d=Pt.join(o,u.path),s.push(d)):u.type==="tree"&&(d=Kr({fs:e,cache:t,gitdir:n,oid:u.oid}).then(function({object:h}){return yB({fs:e,cache:t,gitdir:n,tree:es.from(h),fileId:a,oid:i,filepaths:s,parentPath:Pt.join(o,u.path)})})),d});return await Promise.all(l),s}async function Cue({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l}){const u=typeof s>"u"?void 0:Math.floor(s.valueOf()/1e3),d=[],h=await L0.read({fs:e,gitdir:n}),m=await Ut.resolve({fs:e,gitdir:n,ref:a}),g=[await Dp({fs:e,cache:t,gitdir:n,oid:m})];let v,b,w;function x(_){w&&r&&d.push(_)}for(;g.length>0;){const _=g.pop();if(u!==void 0&&_.commit.committer.timestamp<=u)break;if(r){let E;try{E=await Zy({fs:e,cache:t,gitdir:n,oid:_.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=_,w=!0}catch(C){if(C instanceof Rr){let k=l&&v;if(k&&(k=await gM({fs:e,cache:t,gitdir:n,oid:_.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const I=await gM({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(I))if(k=k.filter(j=>I.indexOf(j)===-1),k.length===1)k=k[0],r=k,b&&d.push(b);else{k=!1,b&&d.push(b);break}}}else r=k,b&&d.push(b);if(!k){if(w&&v&&(d.push(b),!o))break;if(!o&&!l)throw C}b=_,w=!1}else throw C}}else d.push(_);if(i!==void 0&&d.length===i){x(_);break}if(!h.has(_.oid))for(const E of _.commit.parent){const C=await Dp({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(C.oid)||g.push(C)}g.length===0&&x(_),g.sort((E,C)=>Sue(E.commit,C.commit))}return d}async function Tue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:s,force:o,follow:l,cache:u={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",a),await Cue({fs:new un(e),cache:u,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l})}catch(d){throw d.caller="git.log",d}}async function kue({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:g,signingKey:v,cache:b={},mergeDriver:w}){try{Qe("fs",e),v&&Qe("onSign",t);const x=new un(e),_=await Xu({fs:x,gitdir:r,author:m});if(!_&&(!o||!s))throw new bi("author");const E=await jp({fs:x,gitdir:r,author:_,committer:g});if(!E&&(!o||!s))throw new bi("committer");return await dB({fs:x,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:u,abortOnConflict:d,message:h,author:_,committer:E,signingKey:v,onSign:t,mergeDriver:w})}catch(x){throw x.caller="git.merge",x}}const Aue={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function bB({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new O9,s=[];function o(d,h){const m=Qt.from(d,h);s.push(m),i.update(m)}async function l({stype:d,object:h}){const m=Aue[d];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let w=(v|m|b).toString(16);for(o(w,"hex");v;)v=g>127?128:0,w=v|g&127,o(dk(2,w),"hex"),g=g>>>7;o(Qt.from(await X9(h)))}o("PACK"),o("00000002","hex"),o(dk(8,a.length),"hex");for(const d of a){const{type:h,object:m}=await Kr({fs:e,cache:t,gitdir:r,oid:d});await l({object:m,stype:h})}const u=i.digest();return s.push(u),s}async function Nue({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await bB({fs:e,cache:t,gitdir:n,oids:r}),s=Qt.from(await Bx(i)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return a?(await e.write(Pt.join(n,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function Rue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oids",r),await Nue({fs:new un(e),cache:i,gitdir:n,oids:r,write:a})}catch(s){throw s.caller="git.packObjects",s}}async function Iue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:w=!1,corsProxy:x,singleBranch:_,headers:E={},author:C,committer:k,signingKey:I,cache:j={}}){try{Qe("fs",e),Qe("gitdir",l);const N=new un(e),P=await Xu({fs:N,gitdir:l,author:C});if(!P)throw new bi("author");const L=await jp({fs:N,gitdir:l,author:P,committer:k});if(!L)throw new bi("committer");return await fB({fs:N,cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForward:b,fastForwardOnly:w,corsProxy:x,singleBranch:_,headers:E,author:P,committer:L,signingKey:I,prune:g,pruneTags:v})}catch(N){throw N.caller="git.pull",N}}async function jue({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),start:a,finish:i}){const s=await L0.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const h of a)o.add(await Ut.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Ut.resolve({fs:e,gitdir:r,ref:h});l.add(m)}catch{}const u=new Set;async function d(h){u.add(h);const{type:m,object:g}=await Kr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const b=Ri.from(g).headers().object;return d(b)}if(m!=="commit")throw new Fi(h,m,"commit");if(!s.has(h)){const b=Gr.from(g).headers().parent;for(h of b)!l.has(h)&&!u.has(h)&&await d(h)}}for(const h of o)await d(h);return u}async function wC({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new Set;async function s(o){if(i.has(o))return;i.add(o);const{type:l,object:u}=await Kr({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const h=Ri.from(u).headers().object;await s(h)}else if(l==="commit"){const h=Gr.from(u).headers().tree;await s(h)}else if(l==="tree"){const d=es.from(u);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await s(h.oid)}}for(const o of a)await s(o);return i}async function Due(e){const t={};let n="";const r=ua.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new Hf('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const s of i){if(s.trim()==="")continue;const o=s.slice(0,2),l=s.slice(3);let u=l.indexOf(" ");u===-1&&(u=l.length);const d=l.slice(0,u),h=l.slice(u+1);t.refs[d]={ok:o==="ok",error:h}}return t}async function Mue({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(ua.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(ua.flush()),n}async function Oue({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:u,ref:d,remoteRef:h,remote:m,url:g,force:v=!1,delete:b=!1,corsProxy:w,headers:x={}}){const _=d||await hd({fs:e,gitdir:u});if(typeof _>"u")throw new Xi("ref");const E=await Ea.get({fs:e,gitdir:u});m=m||await E.get(`branch.${_}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${_}.remote`)||"origin";const C=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof C>"u")throw new Xi("remote OR url");const k=h||await E.get(`branch.${_}.merge`);if(typeof C>"u")throw new Xi("remoteRef");w===void 0&&(w=await E.get("http.corsProxy"));const I=await Ut.expand({fs:e,gitdir:u,ref:_}),j=b?"0000000000000000000000000000000000000000":await Ut.resolve({fs:e,gitdir:u,ref:I}),N=o_.getRemoteHelperFor({url:C}),P=await N.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:w,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),L=P.auth;let H;if(!k)H=I;else try{H=await Ut.expandAgainstMap({ref:k,map:P.refs})}catch(Q){if(Q instanceof Rr)H=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw Q}const M=P.refs.get(H)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:m,url:C,localRef:{ref:b?"(delete)":I,oid:j},remoteRef:{ref:H,oid:M}}))throw new om;const K=!P.capabilities.has("no-thin");let U=new Set;if(!b){const Q=[...P.refs.values()];let te=new Set;if(M!=="0000000000000000000000000000000000000000"){const ue=await AN({fs:e,cache:t,gitdir:u,oids:[j,M]});for(const ge of ue)Q.push(ge);K&&(te=await wC({fs:e,cache:t,gitdir:u,oids:ue}))}if(!Q.includes(j)){const ue=await jue({fs:e,cache:t,gitdir:u,start:[j],finish:Q});U=await wC({fs:e,cache:t,gitdir:u,oids:ue})}if(K){try{const ue=await Ut.resolve({fs:e,gitdir:u,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:ge}=await Ut.resolveAgainstMap({ref:ue.replace(`refs/remotes/${m}/`,""),fullref:ue,map:P.refs}),Ie=[ge];for(const Ae of await wC({fs:e,cache:t,gitdir:u,oids:Ie}))te.add(Ae)}catch{}for(const ue of te)U.delete(ue)}if(j===M&&(v=!0),!v){if(I.startsWith("refs/tags")&&M!=="0000000000000000000000000000000000000000")throw new Rp("tag-exists");if(j!=="0000000000000000000000000000000000000000"&&M!=="0000000000000000000000000000000000000000"&&!await mB({fs:e,cache:t,gitdir:u,oid:j,ancestor:M,depth:-1}))throw new Rp("not-fast-forward")}}const se=oB([...P.capabilities],["report-status","side-band-64k",`agent=${l_.agent}`]),ie=await Mue({capabilities:se,triplets:[{oldoid:M,oid:j,fullRef:H}]}),re=b?[]:await bB({fs:e,cache:t,gitdir:u,oids:[...U]}),X=await N.connect({http:n,onProgress:r,corsProxy:w,service:"git-receive-pack",url:C,auth:L,headers:x,body:[...ie,...re]}),{packfile:ne,progress:q}=await cB.demux(X.body);if(a){const Q=lB(q);Xy(Q,async te=>{await a(te)})}const J=await Due(ne);if(X.headers&&(J.headers=X.headers),m&&J.ok&&J.refs[H].ok&&!I.startsWith("refs/tags")){const Q=`refs/remotes/${m}/${H.replace("refs/heads","")}`;b?await Ut.deleteRef({fs:e,gitdir:u,ref:Q}):await Ut.writeRef({fs:e,gitdir:u,ref:Q,value:j})}if(J.ok&&Object.values(J.refs).every(Q=>Q.ok))return J;{const Q=Object.entries(J.refs).filter(([te,ue])=>!ue.ok).map(([te,ue])=>`
  - ${te}: ${ue.error}`).join("");throw new $y(Q,J)}}async function Pue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,dir:l,gitdir:u=Pt.join(l,".git"),ref:d,remoteRef:h,remote:m="origin",url:g,force:v=!1,delete:b=!1,corsProxy:w,headers:x={},cache:_={}}){try{return Qe("fs",e),Qe("http",t),Qe("gitdir",u),await Oue({fs:new un(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,gitdir:u,ref:d,remoteRef:h,remote:m,url:g,force:v,delete:b,corsProxy:w,headers:x})}catch(E){throw E.caller="git.push",E}}async function vB({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=Ri.from(i).parse().object,vB({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new Fi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function wB({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await Zy({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await vB({fs:e,cache:t,gitdir:n,oid:r})}async function Fue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await wB({fs:new un(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readBlob",s}}async function xB({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await Dp({fs:new un(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Lue({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ut.resolve({gitdir:n,fs:e,ref:r}),{blob:s}=await wB({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return s}async function Bue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oid",a),await Lue({fs:new un(e),cache:i,gitdir:n,ref:r,oid:a})}catch(s){throw s.caller="git.readNote",s}}async function $ue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:s=void 0,cache:o={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("oid",r);const l=new un(e);i!==void 0&&(r=await Zy({fs:l,cache:o,gitdir:n,oid:r,filepath:i}));const d=await Kr({fs:l,cache:o,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Gr.from(d.object).parse();break;case"tree":d.object=es.from(d.object).entries();break;case"blob":s?d.object=d.object.toString(s):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=Ri.from(d.object).parse();break;default:throw new Fi(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function zue({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new Fi(r,a,"tag");const s=Ri.from(i);return{oid:r,tag:s.parse(),payload:s.payload()}}async function Uue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await zue({fs:new un(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function Vue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("oid",r),await cm({fs:new un(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readTree",s}}async function Hue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r),await qa.acquire({fs:new un(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function que({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l}){let u;try{u=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof Rr))throw v}let h=(await cm({fs:e,gitdir:r,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const m=await Yy({fs:e,gitdir:r,tree:h});return await s_({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:u&&[u],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function Gue({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l,cache:u={}}){try{Qe("fs",e),Qe("gitdir",r),Qe("oid",i);const d=new un(e),h=await Xu({fs:d,gitdir:r,author:s});if(!h)throw new bi("author");const m=await jp({fs:d,gitdir:r,author:h,committer:o});if(!m)throw new bi("committer");return await que({fs:d,cache:u,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function Wue({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==ol.clean(r))throw new Ao(r,ol.clean(r));if(n!==ol.clean(n))throw new Ao(n,ol.clean(n));const i=`refs/heads/${n}`,s=`refs/heads/${r}`;if(await Ut.exists({fs:e,gitdir:t,ref:s}))throw new Io("branch",r,!1);const l=await Ut.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ut.writeRef({fs:e,gitdir:t,ref:s,value:l}),await Ut.deleteRef({fs:e,gitdir:t,ref:i});const d=await hd({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function Kue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("oldref",a),await Wue({fs:new un(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(s){throw s.caller="git.renameBranch",s}}async function _B({gitdir:e,type:t,object:n}){return Cc(am.wrap({type:t,object:n}))}async function Zue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const s=new un(e);let o,l;try{o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(o)try{o=await Zy({fs:s,cache:i,gitdir:n,oid:o,filepath:r})}catch{o=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await s.read(Pt.join(t,r));d&&(l=await _B({gitdir:n,type:"blob",object:d}),o===l&&(u=await s.lstat(Pt.join(t,r)))),await qa.acquire({fs:s,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),o&&h.insert({filepath:r,stats:u,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function Yue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,depth:a}){try{return Qe("fs",e),Qe("gitdir",n),Qe("ref",r),await Ut.resolve({fs:new un(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function Xue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r,value:a,append:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("path",r);const s=new un(e),o=await Ea.get({fs:s,gitdir:n});i?await o.append(r,a):await o.set(r,a),await Ea.save({fs:s,gitdir:n,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function SB({fs:e,gitdir:t,commit:n}){const r=Gr.from(n).toObject();return await rs({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class zx{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=zx.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${s} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,s)=>n?`stash@{${s}}: ${i.split("	")[1]}`:i)}}const Jue={stage:rm,workdir:Ky};let xC;async function Mp(e,t){return xC===void 0&&(xC=new P0),xC.acquire(e,t)}async function Que(e,t,n,r,a=null){const i=Pt.join(n,r),s=await e.lstat(i);if(!s)throw new Rr(i);if(s.isDirectory())throw new Pn(`${i}: file expected, but found directory`);const o=a?await G9({fs:e,gitdir:t,oid:a}):void 0;let l=o?a:void 0;return o||await Mp({fs:e,gitdir:t,currentFilepath:i},async()=>{const u=s.isSymbolicLink()?await e.readlink(i).then(J9):await e.read(i);if(u===null)throw new Rr(i);l=await rs({fs:e,gitdir:t,type:"blob",object:u})}),l}async function ede({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const s=await Promise.all(i.children.map(a));i.oid=await Yy({fs:e,gitdir:n,tree:s}),i.mode=16384}}else i.type==="blob"&&(i.oid=await Que(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function yM({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?Jue[g]():g),s=[],d=await Yu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await lm.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&s.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const w of v){const[x,_]=w;a?_&&(await e.exists(`${t}/${_.toString()}`)?b.push(w):s.push([null,_])):x&&(_?b.push(w):s.push([x,null]))}return b.length?Promise.all(b.map(g)):[]}});if(s.length===0||d.length===0)return null;const m=(await ede({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return Yy({fs:e,gitdir:n,tree:m})}async function tde({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const s=[],o=[],l=await Yu({fs:e,cache:{},dir:t,gitdir:n,trees:[Hs({ref:a}),Hs({ref:r})],map:async(u,[d,h])=>{if(u==="."||await lm.isIgnored({fs:e,dir:t,gitdir:n,filepath:u}))return;const m=h?await h.type():await d.type();if(m!=="tree"&&m!=="blob")return;if(!h&&d){const v=m==="tree"?"rmdir":"rm";return m==="tree"&&s.push(u),m==="blob"&&i&&o.push({filepath:u,oid:await d.oid()}),{method:v,filepath:u}}const g=await h.oid();if(!d||await d.oid()!==g)return m==="tree"?{method:"mkdir",filepath:u}:(i&&o.push({filepath:u,oid:g,stats:await e.lstat(Pt.join(t,u))}),{method:"write",filepath:u,oid:g})}});await Mp({fs:e,gitdir:n,dirRemoved:s,ops:l},async()=>{for(const u of l){const d=Pt.join(t,u.filepath);switch(u.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!s.some(h=>d.startsWith(h))){const{object:h}=await Kr({fs:e,cache:{},gitdir:n,oid:u.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await qa.acquire({fs:e,gitdir:n,cache:{}},async u=>{o.forEach(({filepath:d,stats:h,oid:m})=>{u.insert({filepath:d,stats:h,oid:m})})})}class dc{constructor({fs:t,dir:n,gitdir:r=Pt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Pt.join(this.gitdir,dc.refStash)}get refLogsStashPath(){return Pt.join(this.gitdir,dc.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Xu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new bi("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return SB({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Ao(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Dp({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ut.writeRef({fs:this.fs,gitdir:this.gitdir,ref:dc.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=zx.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Mp({filepath:i,entry:a},async()=>{const s=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,s+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return zx.getStashReflogEntry(r,t)}}async function nde({fs:e,dir:t,gitdir:n,message:r=""}){const a=new dc({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await hd({fs:e,gitdir:n,fullname:!1}),s=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await xB({fs:e,dir:t,gitdir:n,oid:s})).commit.message,u=[s];let d=null,h=Hs({ref:"HEAD"});const m=await yM({fs:e,dir:t,gitdir:n,treePair:[Hs({ref:"HEAD"}),"stage"]});if(m){const w=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:u});u.push(w),d=m,h=rm()}const g=await yM({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const w=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[u[u.length-1]]});u.push(w),d=g}if(!d||!m&&!g)throw new Rr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${s.substring(0,7)} ${l}`,b=await a.writeStashCommit({message:v,tree:d,parent:u});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await iB({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function EB({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new dc({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:s=null}=i.commit?i.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){const u=(await Dp({fs:e,cache:{},gitdir:n,oid:s[o+1]})).commit.message.startsWith("stash-Index");await tde({fs:e,dir:t,gitdir:n,stashCommit:s[o+1],parentCommit:s[o],wasStaged:u})}}async function CB({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new dc({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const s=a.refStashPath;await Mp(s,async()=>{await e.exists(s)&&await e.rm(s)});const o=await a.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=a.refLogsStashPath;await Mp({reflogEntries:o,stashReflogPath:l,stashMgr:a},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const u=o[o.length-1].split(" ")[1];await a.writeStashRef(u)}else await e.rm(l)})}async function rde({fs:e,dir:t,gitdir:n}){return new dc({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function ade({fs:e,dir:t,gitdir:n}){const r=new dc({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await Mp(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function ide({fs:e,dir:t,gitdir:n,refIdx:r=0}){await EB({fs:e,dir:t,gitdir:n,refIdx:r}),await CB({fs:e,dir:t,gitdir:n,refIdx:r})}async function sde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Qe("fs",e),Qe("dir",t),Qe("gitdir",n),Qe("op",r);const s={push:nde,apply:EB,drop:CB,list:rde,clear:ade,pop:ide},o=["apply","drop","pop"];try{const l=new un(e);["refs","logs","logs/refs"].map(h=>Pt.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=s[r];if(d){if(o.includes(r)&&i<0)throw new Ao(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function ode({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",r);const i=new un(e);if(await lm.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await lde({fs:i,cache:a,gitdir:n}),l=await TB({fs:i,cache:a,gitdir:n,tree:o,path:r}),u=await qa.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const w of b)if(w.path===r)return w;return null}),d=await i.lstat(Pt.join(t,r)),h=l!==null,m=u!==null,g=d!==null,v=async()=>{if(m&&!Dx(u,d))return u.oid;{const b=await i.read(Pt.join(t,r)),w=await _B({gitdir:n,type:"blob",object:b});return m&&u.oid===w&&d.size!==-1&&qa.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:d,oid:w})}),w}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await v()===u.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return l===u.oid,"*deleted";if(h&&g&&!m)return await v()===l?"*undeleted":"*undeletemodified";if(h&&g&&m){const b=await v();return b===l?b===u.oid?"unmodified":"*unmodified":b===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function TB({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const s of r)if(s.path===i){if(a.length===0)return s.oid;const{type:o,object:l}=await Kr({fs:e,cache:t,gitdir:n,oid:s.oid});if(o==="tree"){const u=es.from(l);return TB({fs:e,cache:t,gitdir:n,tree:u,path:a})}if(o==="blob")throw new Fi(s.oid,o,"blob",a.join("/"))}return null}async function lde({fs:e,cache:t,gitdir:n}){let r;try{r=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof Rr)return[]}const{tree:a}=await cm({fs:e,cache:t,gitdir:n,oid:r});return a}async function cde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:s={},ignored:o=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const l=new un(e);return await Yu({fs:l,cache:s,dir:t,gitdir:n,trees:[Hs({ref:r}),Ky(),rm()],map:async function(u,[d,h,m]){if(!d&&!m&&h&&!o&&await lm.isIgnored({fs:l,dir:t,filepath:u})||!a.some(I=>aB(u,I)))return null;if(i&&!i(u))return;const[g,v,b]=await Promise.all([d&&d.type(),h&&h.type(),m&&m.type()]),w=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!w)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!w)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!w)return;const x=g==="blob"?await d.oid():void 0,_=b==="blob"?await m.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,x,E,_],k=C.map(I=>C.indexOf(I));return k.shift(),[u,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function ude({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,force:i=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r);const s=new un(e);if(r===void 0)throw new Xi("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"});if(!i&&await Ut.exists({fs:s,gitdir:n,ref:r}))throw new Io("tag",r);await Ut.writeRef({fs:s,gitdir:n,ref:r,value:o})}catch(s){throw s.caller="git.tag",s}}async function dde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:s,add:o,remove:l,force:u}){try{Qe("fs",e),Qe("gitdir",n),Qe("filepath",a);const d=new un(e);if(l)return await qa.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!u){const g=await d.lstat(Pt.join(t,a));if(g){if(g.isDirectory())throw new Zu("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Pt.join(t,a)),!h)throw new Rr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Zu("directory")}return await qa.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!o&&!m.has({filepath:a}))throw new Rr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await d.readlink(Pt.join(t,a)):await d.read(Pt.join(t,a));i=await rs({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return m.insert({filepath:a,oid:i,stats:g}),i})}catch(d){throw d.caller="git.updateIndex",d}}function fde(){try{return l_.version}catch(e){throw e.caller="git.version",e}}async function hde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),trees:r,map:a,reduce:i,iterate:s,cache:o={}}){try{return Qe("fs",e),Qe("gitdir",n),Qe("trees",r),await Yu({fs:new un(e),cache:o,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function pde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),blob:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("blob",r),await rs({fs:new un(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function mde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("commit",r),await SB({fs:new un(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function gde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),type:r,object:a,format:i="parsed",oid:s,encoding:o=void 0}){try{const l=new un(e);if(i==="parsed"){switch(r){case"commit":a=Gr.from(a).toObject();break;case"tree":a=es.from(a).toObject();break;case"blob":a=Qt.from(a,o);break;case"tag":a=Ri.from(a).toObject();break;default:throw new Fi(s||"",r,"blob|commit|tag|tree")}i="content"}return s=await rs({fs:l,gitdir:n,type:r,object:a,oid:s,format:i}),s}catch(l){throw l.caller="git.writeObject",l}}async function yde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:s=!1}){try{Qe("fs",e),Qe("gitdir",n),Qe("ref",r),Qe("value",a);const o=new un(e);if(r!==ol.clean(r))throw new Ao(r,ol.clean(r));if(!i&&await Ut.exists({fs:o,gitdir:n,ref:r}))throw new Io("ref",r);s?await Ut.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:a}):(a=await Ut.resolve({fs:o,gitdir:n,ref:a}),await Ut.writeRef({fs:o,gitdir:n,ref:r,value:a}))}catch(o){throw o.caller="git.writeRef",o}}async function bde({fs:e,gitdir:t,tag:n}){const r=Ri.from(n).toObject();return await rs({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function vde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tag:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tag",r),await bde({fs:new un(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function wde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tree:r}){try{return Qe("fs",e),Qe("gitdir",n),Qe("tree",r),await Yy({fs:new un(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Na={Errors:Kle,STAGE:rm,TREE:Hs,WORKDIR:Ky,add:fce,abortMerge:lce,addNote:pce,addRemote:mce,annotatedTag:yce,branch:vce,checkout:iB,clone:Ice,commit:jce,getConfig:Qce,getConfigAll:tue,setConfig:Xue,currentBranch:Dce,deleteBranch:Oce,deleteRef:Pce,deleteRemote:Lce,deleteTag:$ce,expandOid:Hce,expandRef:qce,fastForward:Zce,fetch:Yce,findMergeBase:Xce,findRoot:Jce,getRemoteInfo:nue,getRemoteInfo2:rue,hashBlob:iue,indexPack:oue,init:lue,isDescendent:cue,isIgnored:uue,listBranches:due,listFiles:hue,listNotes:mue,listRefs:gue,listRemotes:bue,listServerRefs:xue,listTags:_ue,log:Tue,merge:kue,packObjects:Rue,pull:Iue,push:Pue,readBlob:Fue,readCommit:xB,readNote:Bue,readObject:$ue,readTag:Uue,readTree:Vue,remove:Hue,removeNote:Gue,renameBranch:Kue,resetIndex:Zue,updateIndex:dde,resolveRef:Yue,status:ode,statusMatrix:cde,tag:ude,version:fde,walk:hde,writeBlob:pde,writeCommit:mde,writeObject:gde,writeRef:yde,writeTag:vde,writeTree:wde,stash:sde};function xde(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function _de(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:xde(e)}async function Sde(e,t){const n=_de(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Ede(e){let t=0;const n=[];await Sde(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Cde(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Tde({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Ede(a));const i=await fetch(t,{method:n,headers:r,body:a}),s=i.body&&i.body.getReader?Cde(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[o,l]of i.headers.entries())r[o]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:s,headers:r}}var B0={request:Tde};const $0="https://cors.isomorphic-git.org",Op=new Map,kB=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=rr.getState();if(!n||!r)return qe.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await Na.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await Na.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await Na.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await Na.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),qe.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},z0=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=Op.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return qe.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(Op.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(qe.error("Authentication cancelled: Password/token not provided."),null)},U0=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),Op.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),Op.delete(n)),null},V0=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!Op.has(n)&&t.username&&t.password&&(Op.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},dp=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},kde=async(e,t)=>{const n=Ya,r=tr(e),a=vl(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},AB=async(e,t,n,r,a)=>{var o;const i=(a==null?void 0:a.fsInstance)??Ya,s=tr(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${s}`);try{let l=!1;try{await i.promises.stat(vl(s,".git")),l=!0}catch(m){if(m.code!=="ENOENT")throw m}if(l)throw console.warn(`[VFS Git Op] Clone target ${s} already contains a .git directory.`),new Error(`Repository already cloned at ${s}.`);const u=r_(s);if(u!=="/")try{await i.promises.mkdir(u,{recursive:!0})}catch(m){if(m.code!=="EEXIST")throw m}let d=n;if(!d)try{if(d=(o=(await Na.getRemoteInfo({http:B0,url:t,corsProxy:$0,onAuth:g=>z0(g,r),onAuthFailure:U0,onAuthSuccess:V0})).HEAD)==null?void 0:o.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(m){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",m),new Error(`Failed to determine default branch: ${dp(m)}`)}await Na.clone({fs:i,http:B0,dir:s,corsProxy:$0,url:t,ref:d,singleBranch:!0,depth:10,onAuth:m=>z0(m,r),onAuthFailure:U0,onAuthSuccess:V0,onProgress:m=>{m.phase==="counting objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):m.phase==="receiving objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):console.log(`Clone progress: ${m.phase}`)}}),await i.promises.stat(vl(s,".git"));const h=await Na.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await Na.checkout({fs:i,dir:s,ref:d})),qe.success(`Repository cloned successfully into ${s} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const u=dp(l);if(l instanceof Error&&l.message.includes("already cloned")||qe.error(`Git clone failed: ${u}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${s}`),await i.promises.rm(s,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},NB=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=tr(e);try{await Na.init({fs:n,dir:r}),qe.success(`Initialized empty Git repository in "${Sa(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),qe.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},NN=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=tr(e);try{if(!await kB(a,r))throw new Error("Git user configuration is missing or invalid.");if(await Na.add({fs:r,dir:a,filepath:"."}),!(await Na.statusMatrix({fs:r,dir:a})).some(([,,u])=>u!==0)){qe.info("No changes detected to commit.");return}const l=await Na.commit({fs:r,dir:a,message:t,author:{name:rr.getState().gitUserName,email:rr.getState().gitUserEmail}});qe.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),qe.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},c_=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??Ya,i=tr(e);try{if(!await kB(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const o=await Na.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Na.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Na.fetch({fs:a,http:B0,dir:i,corsProxy:$0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>z0(u,n),onAuthFailure:U0,onAuthSuccess:V0}),await Na.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(u){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,u),new Error(`Failed to switch to or create local branch "${t}": ${dp(u)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${dp(l)}`)}}await Na.pull({fs:a,http:B0,dir:i,ref:t,singleBranch:!0,author:{name:rr.getState().gitUserName,email:rr.getState().gitUserEmail},corsProxy:$0,onAuth:l=>z0(l,n),onAuthFailure:U0,onAuthSuccess:V0}),qe.success(`Pulled changes successfully for "${Sa(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(s){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,s),s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")?qe.info(`Branch "${t}" is already up-to-date.`):qe.error(`Git pull failed: ${dp(s)}`),!(s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")))throw s}},RN=async(e,t,n,r)=>{var s,o;const a=(r==null?void 0:r.fsInstance)??Ya,i=tr(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await Na.push({fs:a,http:B0,dir:i,corsProxy:$0,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:u=>z0(u,n),onAuthFailure:U0,onAuthSuccess:V0});if(l!=null&&l.ok)qe.success(`Pushed changes successfully for "${Sa(i)}"`);else if((s=l==null?void 0:l.error)!=null&&s.includes("up-to-date"))qe.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(qe.error(`Push rejected for "${Sa(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||qe.error(`Git push failed: ${dp(l)}`),l}},RB=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=tr(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await Na.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([s,o,l,u])=>{let d="";return u===2&&(d+="INDEX_Modified "),u===3&&(d+="INDEX_Added "),o===0&&l===2?d+="WT_New":o===1&&l===2?d+="WT_Modified":o===1&&l===0?d+="WT_Deleted":o===1&&l===1&&u===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${o} w:${l} s:${u}`),`${s}: ${d.trim()}`}).filter(s=>!s.endsWith("Unmodified")).join(`
`);qe.info(`Git Status for "${Sa(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),qe.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},_f=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=tr(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),qe.error(`Error creating directory "${Sa(r)}": ${a instanceof Error?a.message:String(a)}`),a}},Ade=async e=>{try{const t={backend:Ioe,name:`litechat_vfs_${e}`};return await Soe(t),Ya}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),qe.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},IN=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=tr(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await _f(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const u=vl(r,l);try{const d=await n.promises.stat(u);return{name:l,path:u,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${u}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),qe.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},qf=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=tr(e);try{const a=await n.promises.readFile(r);return Ct.emit(St.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),qe.error(`Error reading file "${Sa(r)}": ${a instanceof Error?a.message:String(a)}`),a}},u_=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=tr(e),i=r_(a);try{i!=="/"&&await _f(i,{fsInstance:r}),await r.promises.writeFile(a,t),Ct.emit(St.VFS_FILE_WRITTEN,{path:a})}catch(s){throw s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,s),qe.error(`Error writing file "${Sa(a)}": ${s instanceof Error?s.message:String(s)}`)),s}},jN=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=tr(e);if(a==="/")throw qe.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),Ct.emit(St.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),Ct.emit(St.VFS_FILE_DELETED,{path:a})),qe.success(`"${Sa(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),qe.error(`Error deleting "${Sa(a)}": ${i instanceof Error?i.message:String(i)}`),i}},IB=async(e,t)=>{await _f(e,t)},Nde=async(e,t,n)=>{try{const r=await qf(e,n),a=new Blob([r]),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i;const o=tr(e);s.download=t||Sa(o),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||qe.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},jB=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=tr(t);let i=0,s=0;const o=Array.from(e);try{await _f(a,{fsInstance:r});for(const l of o){const u=vl(a,l.name);try{const d=await l.arrayBuffer();await u_(u,new Uint8Array(d),{fsInstance:r}),i++}catch(d){s++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){s=o.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{s>0&&i>0?qe.warning(`Upload complete with issues. ${i} succeeded, ${s} failed.`):s===0&&i>0&&qe.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":Sa(a)}.`)}},Rde=async(e,t,n)=>{const r=Ya;if(!e.name.toLowerCase().endsWith(".zip")){qe.error("Please select a valid ZIP file.");return}const a=tr(t);let i;try{await _f(a,{fsInstance:r}),i=await M9.loadAsync(e);const s=Object.values(i.files),o=await Promise.allSettled(s.map(async h=>{const m=vl(a,h.name);if(h.dir)await _f(m,{fsInstance:r});else{const g=await h.async("uint8array");await u_(m,g,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,u=0,d=0;o.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?u++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?qe.warning(`Finished extracting "${e.name}". ${l+u} items succeeded, ${d} failed.`):qe.success(`Successfully extracted ${l} files and ${u} folders from "${e.name}" to ${a==="/"?"root":Sa(a)}.`)}catch(s){s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,s),qe.error(`ZIP extraction failed: ${s instanceof Error?s.message:String(s)}`))}},bM=async(e,t="/",n)=>{const r=Ya,a=new M9,i=tr(t),s=Sa(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){qe.error(`Cannot export: "${s}" is not a directory.`);return}}catch(m){m instanceof Error&&m.code==="ENOENT"?qe.error(`Cannot export: Path "${s}" not found.`):qe.error(`Cannot export: Error accessing path "${s}". ${m instanceof Error?m.message:String(m)}`);return}const o=async(m,g)=>{const v=await IN(m,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const w=g.folder(b.name);if(w)await o(b.path,w);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const w=await qf(b.path,{fsInstance:r});g.file(b.name,w)}};await o(i,a);const l=await a.generateAsync({type:"blob"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u;const h=`vfs_${s}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),qe.success(`"${s}" exported as ${d.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||qe.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},DB=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=tr(e),i=tr(t);if(a==="/"||i==="/")throw qe.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const s=r_(i);s!=="/"&&await _f(s,{fsInstance:r}),await r.promises.rename(a,i),qe.success(`Renamed "${Sa(a)}" to "${Sa(i)}"`)}catch(s){throw s instanceof Error&&s.code==="ENOENT"?s.message.includes("Error creating directory")||qe.error(`Rename failed: Original item "${Sa(a)}" not found.`):s instanceof Error&&s.code==="EEXIST"?qe.error(`Rename failed: An item named "${Sa(i)}" already exists.`):s instanceof Error&&s.message.includes("Error creating directory")||qe.error(`Rename failed: ${s instanceof Error?s.message:String(s)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,s),s}},Ide=1024*5,jde=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},vM=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},DN=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(!1),[u,d]=T.useState(!1),[h,m]=T.useState(!0),g=e.type||"application/octet-stream",v=_A(e.name,g),b=g.startsWith("image/"),w=g.startsWith("audio/"),x=g.startsWith("video/"),_=e.source==="vfs";T.useEffect(()=>{let P=null;return s(null),e.source==="direct"&&!v&&e.contentBase64?(P=jde(e.contentBase64,g),P||s("Failed to decode file content for preview."),a(P)):a(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>Ide?s(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&s("Text content missing from metadata."),()=>{P&&(URL.revokeObjectURL(P),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,g,v]);const E=async()=>{if(e.source==="vfs"){qe.info("File is already in VFS.");return}const P=vM(e);if(!P){qe.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await jB([P],"/"),qe.success(`"${e.name}" added to VFS root.`)}catch(L){console.error("Failed to add file to VFS:",L),qe.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{d(!0);try{let P;if(e.source==="vfs"&&e.path){const M=await qf(e.path);P=new Blob([M],{type:g})}else{const M=vM(e);if(!M)throw new Error("Could not reconstruct file data.");P=M}const L=URL.createObjectURL(P),H=document.createElement("a");H.href=L,H.download=e.name,document.body.appendChild(H),H.click(),document.body.removeChild(H),URL.revokeObjectURL(L)}catch(P){console.error("Failed to download file:",P),qe.error(`Download failed: ${P instanceof Error?P.message:String(P)}`)}finally{d(!1)}},k=()=>m(P=>!P),I=()=>_?p.jsx(pA,{className:"h-5 w-5 text-cyan-500"}):v?p.jsx(xT,{className:"h-5 w-5 text-blue-500"}):b?p.jsx(op,{className:"h-5 w-5 text-purple-500"}):w?p.jsx(tY,{className:"h-5 w-5 text-green-500"}):x?p.jsx(WY,{className:"h-5 w-5 text-orange-500"}):p.jsx(vZ,{className:"h-5 w-5 text-muted-foreground"}),j=()=>_?p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?p.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[p.jsx(Ou,{className:"h-4 w-4"}),p.jsx("span",{children:i})]}):v&&e.contentText!==void 0?p.jsx(qu,{lang:g==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?p.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):w&&r?p.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):x&&r?p.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),N=T.useMemo(()=>{let P="File";return _?P="VFS File":v?P="Text":b?P="Image":w?P="Audio":x&&(P="Video"),`${P} (${O0(e.size)})`},[_,v,b,w,x,e.size]);return p.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[I(),p.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",O0(e.size),")"]}),_&&e.path&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),p.jsx(Yn,{children:p.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:u,"aria-label":"Download file",children:u?p.jsx(Fn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(uf,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Download File"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":h?"Unfold preview":"Fold preview",children:p.jsx(m1,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&p.jsxs(p.Fragment,{children:[e.source==="direct"&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:o,"aria-label":"Add to VFS",children:o?p.jsx(Fn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(B8,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Add to VFS"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:p.jsx(Ii,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Remove from Prompt"})]})})]})]})]}),h?p.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:N}):p.jsx("div",{className:xt("p-2 max-h-80 overflow-y-auto"),children:j()})]})},Dde=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:a})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(!1),u=Ir(sn(E=>E.promptControls)),d=On(sn(E=>E.status==="streaming")),{attachedFilesMetadata:h,clearAttachedFiles:m,removeAttachedFile:g}=vc(sn(E=>({attachedFilesMetadata:E.attachedFilesMetadata,clearAttachedFiles:E.clearAttachedFiles,removeAttachedFile:E.removeAttachedFile}))),v=T.useMemo(()=>Object.values(u).filter(E=>E.show?E.show():!0),[u]),b=T.useMemo(()=>v.filter(E=>E.renderer),[v]),w=T.useMemo(()=>v.filter(E=>E.triggerRenderer),[v]),x=T.useCallback(async()=>{var I,j;const C=(((I=a==null?void 0:a.current)==null?void 0:I.getValue())??"").trim(),k=vc.getState().attachedFilesMetadata;if(!(!C&&k.length===0)&&!(d||i)){s(!0);try{let N={},P={};for(const K of v){if(K.getParameters){const U=await K.getParameters();U&&(N={...N,...U})}if(K.getMetadata){const U=await K.getMetadata();U&&(P={...P,...U})}}k.length>0&&(P.attachedFiles=[...k]);let L={id:ji(),content:C,parameters:N,metadata:P};Ct.emit(St.PROMPT_SUBMITTED,{turnData:L});const H=await qT(Jw.PROMPT_TURN_FINALIZE,{turnData:L});if(H===!1){console.log("Prompt submission cancelled by middleware."),s(!1);return}const M=H&&typeof H=="object"?H.turnData:L;await t(M),m(),v.forEach(K=>{K.clearOnSubmit&&K.clearOnSubmit()}),(j=a.current)==null||j.clearValue(),l(!1)}catch(N){console.error("Error during prompt submission:",N),qe.error(`Failed to send message: ${N instanceof Error?N.message:String(N)}`)}finally{s(!1)}}},[a,d,i,v,t,m]),_=T.useCallback(E=>{l(E.trim().length>0)},[]);return p.jsxs("div",{className:xt("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[b.length>0&&p.jsx(C4,{controls:b,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),h.length>0&&p.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 border rounded-md p-2 bg-muted/20 mb-2",children:h.map(E=>p.jsx(DN,{fileMeta:E,onRemove:g,isReadOnly:!1},E.id))}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx(e,{ref:a,onSubmit:x,disabled:d||i,placeholder:r,onValueChange:_,className:"flex-grow"}),p.jsx(It,{type:"button",size:"icon",onClick:x,disabled:d||i||!o&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(vY,{className:"h-4 w-4"})})]}),p.jsx(C4,{controls:w,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})},MB=6048e5,Mde=864e5,pw=43200,wM=1440,xM=Symbol.for("constructDateFrom");function Tc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&xM in e?e[xM](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ka(e,t){return Tc(t||e,e)}let Ode={};function Jy(){return Ode}function H0(e,t){var o,l,u,d;const n=Jy(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ka(e,t==null?void 0:t.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function Ux(e,t){return H0(e,{...t,weekStartsOn:1})}function OB(e,t){const n=Ka(e,t==null?void 0:t.in),r=n.getFullYear(),a=Tc(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Ux(a),s=Tc(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Ux(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Vx(e){const t=Ka(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function d_(e,...t){const n=Tc.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function _M(e,t){const n=Ka(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Pde(e,t,n){const[r,a]=d_(n==null?void 0:n.in,e,t),i=_M(r),s=_M(a),o=+i-Vx(i),l=+s-Vx(s);return Math.round((o-l)/Mde)}function Fde(e,t){const n=OB(e,t),r=Tc(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Ux(r)}function Bw(e,t){const n=+Ka(e)-+Ka(t);return n<0?-1:n>0?1:n}function Lde(e){return Tc(e,Date.now())}function Bde(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function $de(e){return!(!Bde(e)&&typeof e!="number"||isNaN(+Ka(e)))}function zde(e,t,n){const[r,a]=d_(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function Ude(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function Vde(e,t){return+Ka(e)-+Ka(t)}function Hde(e,t){const n=Ka(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function qde(e,t){const n=Ka(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Gde(e,t){const n=Ka(e,t==null?void 0:t.in);return+Hde(n,t)==+qde(n,t)}function Wde(e,t,n){const[r,a,i]=d_(n==null?void 0:n.in,e,e,t),s=Bw(a,i),o=Math.abs(zde(a,i));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*o);let l=Bw(a,i)===-s;Gde(r)&&o===1&&Bw(r,i)===1&&(l=!1);const u=s*(o-+l);return u===0?0:u}function Kde(e,t,n){const r=Vde(e,t)/1e3;return Ude(n==null?void 0:n.roundingMethod)(r)}function Zde(e,t){const n=Ka(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Yde={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xde=(e,t,n)=>{let r;const a=Yde[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _C(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Jde={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qde={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},efe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},tfe={date:_C({formats:Jde,defaultWidth:"full"}),time:_C({formats:Qde,defaultWidth:"full"}),dateTime:_C({formats:efe,defaultWidth:"full"})},nfe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rfe=(e,t,n,r)=>nfe[e];function jg(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const afe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ife={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},sfe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ofe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},lfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},cfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ufe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},dfe={ordinalNumber:ufe,era:jg({values:afe,defaultWidth:"wide"}),quarter:jg({values:ife,defaultWidth:"wide",argumentCallback:e=>e-1}),month:jg({values:sfe,defaultWidth:"wide"}),day:jg({values:ofe,defaultWidth:"wide"}),dayPeriod:jg({values:lfe,defaultWidth:"wide",formattingValues:cfe,defaultFormattingWidth:"wide"})};function Dg(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?hfe(o,h=>h.test(s)):ffe(o,h=>h.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function ffe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function hfe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function pfe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const mfe=/^(\d+)(th|st|nd|rd)?/i,gfe=/\d+/i,yfe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bfe={any:[/^b/i,/^(a|c)/i]},vfe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wfe={any:[/1/i,/2/i,/3/i,/4/i]},xfe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_fe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sfe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Efe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cfe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tfe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kfe={ordinalNumber:pfe({matchPattern:mfe,parsePattern:gfe,valueCallback:e=>parseInt(e,10)}),era:Dg({matchPatterns:yfe,defaultMatchWidth:"wide",parsePatterns:bfe,defaultParseWidth:"any"}),quarter:Dg({matchPatterns:vfe,defaultMatchWidth:"wide",parsePatterns:wfe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Dg({matchPatterns:xfe,defaultMatchWidth:"wide",parsePatterns:_fe,defaultParseWidth:"any"}),day:Dg({matchPatterns:Sfe,defaultMatchWidth:"wide",parsePatterns:Efe,defaultParseWidth:"any"}),dayPeriod:Dg({matchPatterns:Cfe,defaultMatchWidth:"any",parsePatterns:Tfe,defaultParseWidth:"any"})},PB={code:"en-US",formatDistance:Xde,formatLong:tfe,formatRelative:rfe,localize:dfe,match:kfe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Afe(e,t){const n=Ka(e,t==null?void 0:t.in);return Pde(n,Zde(n))+1}function Nfe(e,t){const n=Ka(e,t==null?void 0:t.in),r=+Ux(n)-+Fde(n);return Math.round(r/MB)+1}function FB(e,t){var d,h,m,g;const n=Ka(e,t==null?void 0:t.in),r=n.getFullYear(),a=Jy(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,s=Tc((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const o=H0(s,t),l=Tc((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=H0(l,t);return+n>=+o?r+1:+n>=+u?r:r-1}function Rfe(e,t){var o,l,u,d;const n=Jy(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=FB(e,t),i=Tc((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),H0(i,t)}function Ife(e,t){const n=Ka(e,t==null?void 0:t.in),r=+H0(n,t)-+Rfe(n,t);return Math.round(r/MB)+1}function xr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const _u={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return xr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):xr(n+1,2)},d(e,t){return xr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return xr(e.getHours()%12||12,t.length)},H(e,t){return xr(e.getHours(),t.length)},m(e,t){return xr(e.getMinutes(),t.length)},s(e,t){return xr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return xr(a,t.length)}},zh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},SM={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return _u.y(e,t)},Y:function(e,t,n,r){const a=FB(e,r),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return xr(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):xr(i,t.length)},R:function(e,t){const n=OB(e);return xr(n,t.length)},u:function(e,t){const n=e.getFullYear();return xr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return xr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return xr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return _u.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return xr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Ife(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):xr(a,t.length)},I:function(e,t,n){const r=Nfe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):xr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):_u.d(e,t)},D:function(e,t,n){const r=Afe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):xr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return xr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return xr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return xr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=zh.noon:r===0?a=zh.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=zh.evening:r>=12?a=zh.afternoon:r>=4?a=zh.morning:a=zh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return _u.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):_u.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):xr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):xr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):_u.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):_u.s(e,t)},S:function(e,t){return _u.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return CM(r);case"XXXX":case"XX":return Zd(r);case"XXXXX":case"XXX":default:return Zd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return CM(r);case"xxxx":case"xx":return Zd(r);case"xxxxx":case"xxx":default:return Zd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+EM(r,":");case"OOOO":default:return"GMT"+Zd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+EM(r,":");case"zzzz":default:return"GMT"+Zd(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return xr(r,t.length)},T:function(e,t,n){return xr(+e,t.length)}};function EM(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+xr(i,2)}function CM(e,t){return e%60===0?(e>0?"-":"+")+xr(Math.abs(e)/60,2):Zd(e,t)}function Zd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=xr(Math.trunc(r/60),2),i=xr(r%60,2);return n+a+t+i}const TM=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},LB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},jfe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return TM(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",TM(r,t)).replace("{{time}}",LB(a,t))},Dfe={p:LB,P:jfe},Mfe=/^D+$/,Ofe=/^Y+$/,Pfe=["D","DD","YY","YYYY"];function Ffe(e){return Mfe.test(e)}function Lfe(e){return Ofe.test(e)}function Bfe(e,t,n){const r=$fe(e,t,n);if(console.warn(r),Pfe.includes(e))throw new RangeError(r)}function $fe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zfe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ufe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vfe=/^'([^]*?)'?$/,Hfe=/''/g,qfe=/[a-zA-Z]/;function fk(e,t,n){var d,h,m,g;const r=Jy(),a=r.locale??PB,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,o=Ka(e,n==null?void 0:n.in);if(!$de(o))throw new RangeError("Invalid time value");let l=t.match(Ufe).map(v=>{const b=v[0];if(b==="p"||b==="P"){const w=Dfe[b];return w(v,a.formatLong)}return v}).join("").match(zfe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:Gfe(v)};if(SM[b])return{isToken:!0,value:v};if(b.match(qfe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Lfe(b)||Ffe(b))&&Bfe(b,t,String(e));const w=SM[b[0]];return w(o,b,a.localize,u)}).join("")}function Gfe(e){const t=e.match(Vfe);return t?t[1].replace(Hfe,"'"):e}function Wfe(e,t,n){const r=Jy(),a=(n==null?void 0:n.locale)??r.locale??PB,i=2520,s=Bw(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,u]=d_(n==null?void 0:n.in,...s>0?[t,e]:[e,t]),d=Kde(u,l),h=(Vx(u)-Vx(l))/1e3,m=Math.round((d-h)/60);let g;if(m<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):m===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",m,o);if(m<45)return a.formatDistance("xMinutes",m,o);if(m<90)return a.formatDistance("aboutXHours",1,o);if(m<wM){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,o)}else{if(m<i)return a.formatDistance("xDays",1,o);if(m<pw){const v=Math.round(m/wM);return a.formatDistance("xDays",v,o)}else if(m<pw*2)return g=Math.round(m/pw),a.formatDistance("aboutXMonths",g,o)}if(g=Wde(u,l),g<12){const v=Math.round(m/pw);return a.formatDistance("xMonths",v,o)}else{const v=g%12,b=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",b,o):v<9?a.formatDistance("overXYears",b,o):a.formatDistance("almostXYears",b+1,o)}}function BB(e,t){return Wfe(e,Lde(e),t)}const Cn=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:s="ghost",size:o="icon",className:l,"aria-label":u,...d})=>{const h=typeof t=="function";return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:s,size:o,onClick:a,disabled:i,className:xt("h-6 w-6",l),"aria-label":u,...d,children:h?p.jsx(t,{className:xt("h-3.5 w-3.5",n)}):t})}),p.jsx(Yn,{side:r,children:p.jsx("p",{children:e})})]})})},kM={};function Kfe(e){let t=kM[e];if(t)return t;t=kM[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Pp(e,t){typeof t!="string"&&(t=Pp.defaultChars);const n=Kfe(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,s=r.length;i<s;i+=3){const o=parseInt(r.slice(i+1,i+3),16);if(o<128){a+=n[o];continue}if((o&224)===192&&i+3<s){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const u=o<<6&1984|l&63;u<128?a+="":a+=String.fromCharCode(u),i+=3;continue}}if((o&240)===224&&i+6<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(u&192)===128){const d=o<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?a+="":a+=String.fromCharCode(d),i+=6;continue}}if((o&248)===240&&i+9<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let h=o<<18&1835008|l<<12&258048|u<<6&4032|d&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Pp.defaultChars=";/?:@&=+$,#";Pp.componentChars="";const AM={};function Zfe(e){let t=AM[e];if(t)return t;t=AM[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Qy(e,t,n){typeof t!="string"&&(n=t,t=Qy.defaultChars),typeof n>"u"&&(n=!0);const r=Zfe(t);let a="";for(let i=0,s=e.length;i<s;i++){const o=e.charCodeAt(i);if(n&&o===37&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(o<128){a+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<s){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}Qy.defaultChars=";/?:@&=+$,-_.!~*'()#";Qy.componentChars="-_.!~*'()";function MN(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Hx(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Yfe=/^([a-z0-9.+-]+:)/i,Xfe=/:[0-9]*$/,Jfe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Qfe=["<",">",'"',"`"," ","\r",`
`,"	"],ehe=["{","}","|","\\","^","`"].concat(Qfe),the=["'"].concat(ehe),NM=["%","/","?",";","#"].concat(the),RM=["/","?","#"],nhe=255,IM=/^[+a-z0-9A-Z_-]{0,63}$/,rhe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,jM={javascript:!0,"javascript:":!0},DM={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ON(e,t){if(e&&e instanceof Hx)return e;const n=new Hx;return n.parse(e,t),n}Hx.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const u=Jfe.exec(i);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=Yfe.exec(i);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,i=i.substr(s.length)),(t||s||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(s&&jM[s])&&(i=i.substr(2),this.slashes=!0)),!jM[s]&&(a||s&&!DM[s])){let u=-1;for(let v=0;v<RM.length;v++)r=i.indexOf(RM[v]),r!==-1&&(u===-1||r<u)&&(u=r);let d,h;u===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",u),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),u=-1;for(let v=0;v<NM.length;v++)r=i.indexOf(NM[v]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=i.length),i[u-1]===":"&&u--;const m=i.slice(0,u);i=i.slice(u),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,w=v.length;b<w;b++){const x=v[b];if(x&&!x.match(IM)){let _="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?_+="x":_+=x[E];if(!_.match(IM)){const E=v.slice(0,b),C=v.slice(b+1),k=x.match(rhe);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>nhe&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),DM[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Hx.prototype.parseHost=function(e){let t=Xfe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const ahe=Object.freeze(Object.defineProperty({__proto__:null,decode:Pp,encode:Qy,format:MN,parse:ON},Symbol.toStringTag,{value:"Module"})),$B=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,zB=/[\0-\x1F\x7F-\x9F]/,ihe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,PN=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,UB=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,VB=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,she=Object.freeze(Object.defineProperty({__proto__:null,Any:$B,Cc:zB,Cf:ihe,P:PN,S:UB,Z:VB},Symbol.toStringTag,{value:"Module"})),ohe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),lhe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var SC;const che=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),uhe=(SC=String.fromCodePoint)!==null&&SC!==void 0?SC:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function dhe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=che.get(e))!==null&&t!==void 0?t:e}var Va;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Va||(Va={}));const fhe=32;var Iu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Iu||(Iu={}));function hk(e){return e>=Va.ZERO&&e<=Va.NINE}function hhe(e){return e>=Va.UPPER_A&&e<=Va.UPPER_F||e>=Va.LOWER_A&&e<=Va.LOWER_F}function phe(e){return e>=Va.UPPER_A&&e<=Va.UPPER_Z||e>=Va.LOWER_A&&e<=Va.LOWER_Z||hk(e)}function mhe(e){return e===Va.EQUALS||phe(e)}var Ba;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ba||(Ba={}));var ku;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(ku||(ku={}));class ghe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ba.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ku.Strict}startEntity(t){this.decodeMode=t,this.state=Ba.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ba.EntityStart:return t.charCodeAt(n)===Va.NUM?(this.state=Ba.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ba.NamedEntity,this.stateNamedEntity(t,n));case Ba.NumericStart:return this.stateNumericStart(t,n);case Ba.NumericDecimal:return this.stateNumericDecimal(t,n);case Ba.NumericHex:return this.stateNumericHex(t,n);case Ba.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|fhe)===Va.LOWER_X?(this.state=Ba.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ba.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(hk(a)||hhe(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(hk(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Va.SEMI)this.consumed+=1;else if(this.decodeMode===ku.Strict)return 0;return this.emitCodePoint(dhe(this.result),this.consumed),this.errors&&(t!==Va.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Iu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=yhe(r,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===ku.Attribute&&(i===0||mhe(s))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Iu.VALUE_LENGTH)>>14,i!==0){if(s===Va.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==ku.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Iu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Iu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Ba.NamedEntity:return this.result!==0&&(this.decodeMode!==ku.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ba.NumericDecimal:return this.emitNumericEntity(0,2);case Ba.NumericHex:return this.emitNumericEntity(0,3);case Ba.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ba.EntityStart:return 0}}}function HB(e){let t="";const n=new ghe(e,r=>t+=uhe(r));return function(a,i){let s=0,o=0;for(;(o=a.indexOf("&",o))>=0;){t+=a.slice(s,o),n.startEntity(i);const u=n.write(a,o+1);if(u<0){s=o+n.end();break}s=o+u,o=u===0?s+1:s}const l=t+a.slice(s);return t="",l}}function yhe(e,t,n,r){const a=(t&Iu.BRANCH_LENGTH)>>7,i=t&Iu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let s=n,o=s+a-1;for(;s<=o;){const l=s+o>>>1,u=e[l];if(u<r)s=l+1;else if(u>r)o=l-1;else return e[l+a]}return-1}const bhe=HB(ohe);HB(lhe);function qB(e,t=ku.Legacy){return bhe(e,t)}function vhe(e){return Object.prototype.toString.call(e)}function FN(e){return vhe(e)==="[object String]"}const whe=Object.prototype.hasOwnProperty;function xhe(e,t){return whe.call(e,t)}function f_(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function GB(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function LN(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function qx(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const WB=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,_he=/&([a-z#][a-z0-9]{1,31});/gi,She=new RegExp(WB.source+"|"+_he.source,"gi"),Ehe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Che(e,t){if(t.charCodeAt(0)===35&&Ehe.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return LN(r)?qx(r):e}const n=qB(e);return n!==e?n:e}function The(e){return e.indexOf("\\")<0?e:e.replace(WB,"$1")}function Fp(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(She,function(t,n,r){return n||Che(t,r)})}const khe=/[&<>"]/,Ahe=/[&<>"]/g,Nhe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Rhe(e){return Nhe[e]}function Ju(e){return khe.test(e)?e.replace(Ahe,Rhe):e}const Ihe=/[.?*+^$[\]\\(){}|-]/g;function jhe(e){return e.replace(Ihe,"\\$&")}function Br(e){switch(e){case 9:case 32:return!0}return!1}function q0(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function G0(e){return PN.test(e)||UB.test(e)}function W0(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function h_(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Dhe={mdurl:ahe,ucmicro:she},Mhe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:GB,assign:f_,escapeHtml:Ju,escapeRE:jhe,fromCodePoint:qx,has:xhe,isMdAsciiPunct:W0,isPunctChar:G0,isSpace:Br,isString:FN,isValidEntityCode:LN,isWhiteSpace:q0,lib:Dhe,normalizeReference:h_,unescapeAll:Fp,unescapeMd:The},Symbol.toStringTag,{value:"Module"}));function Ohe(e,t,n){let r,a,i,s;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(s=e.pos,e.md.inline.skipToken(e),i===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return a&&(u=e.pos),e.pos=l,u}function Phe(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Fp(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let s=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(s++,s>32))return i;if(r===41){if(s===0)break;s--}a++}return t===a||s!==0||(i.str=Fp(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Fhe(e,t,n,r){let a,i=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(i>=n)return s;let o=e.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return s;t++,i++,o===40&&(o=41),s.marker=o}for(;i<n;){if(a=e.charCodeAt(i),a===s.marker)return s.pos=i+1,s.str+=Fp(e.slice(t,i)),s.ok=!0,s;if(a===40&&s.marker===41)return s;a===92&&i+1<n&&i++,i++}return s.can_continue=!0,s.str+=Fp(e.slice(t,i)),s}const Lhe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Phe,parseLinkLabel:Ohe,parseLinkTitle:Fhe},Symbol.toStringTag,{value:"Module"})),El={};El.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Ju(i.content)+"</code>"};El.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Ju(e[t].content)+`</code></pre>
`};El.fence=function(e,t,n,r,a){const i=e[t],s=i.info?Fp(i.info).trim():"";let o="",l="";if(s){const d=s.split(/(\s+)/g);o=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(i.content,o,l)||Ju(i.content):u=Ju(i.content),u.indexOf("<pre")===0)return u+`
`;if(s){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+o]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+o);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${u}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${u}</code></pre>
`};El.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};El.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};El.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};El.text=function(e,t){return Ju(e[t].content)};El.html_block=function(e,t){return e[t].content};El.html_inline=function(e,t){return e[t].content};function um(){this.rules=f_({},El)}um.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Ju(t.attrs[n][0])+'="'+Ju(t.attrs[n][1])+'"';return a};um.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let s=!1;if(a.block&&(s=!0,a.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1)}return i+=s?`>
`:">",i};um.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};um.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};um.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;o==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function ts(){this.__rules__=[],this.__cache__=null}ts.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};ts.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};ts.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};ts.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};ts.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};ts.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};ts.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};ts.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};ts.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};ts.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function jo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}jo.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};jo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};jo.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};jo.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};jo.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function KB(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}KB.prototype.Token=jo;const Bhe=/\r\n?|\n/g,$he=/\0/g;function zhe(e){let t;t=e.src.replace(Bhe,`
`),t=t.replace($he,""),e.src=t}function Uhe(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Vhe(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function Hhe(e){return/^<a[>\s]/i.test(e)}function qhe(e){return/^<\/a\s*>/i.test(e)}function Ghe(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let s=a.length-1;s>=0;s--){const o=a[s];if(o.type==="link_close"){for(s--;a[s].level!==o.level&&a[s].type!=="link_open";)s--;continue}if(o.type==="html_inline"&&(Hhe(o.content)&&i>0&&i--,qhe(o.content)&&i++),!(i>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let u=e.md.linkify.match(l);const d=[];let h=o.level,m=0;u.length>0&&u[0].index===0&&s>0&&a[s-1].type==="text_special"&&(u=u.slice(1));for(let g=0;g<u.length;g++){const v=u[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let w=u[g].text;u[g].schema?u[g].schema==="mailto:"&&!/^mailto:/i.test(w)?w=e.md.normalizeLinkText("mailto:"+w).replace(/^mailto:/,""):w=e.md.normalizeLinkText(w):w=e.md.normalizeLinkText("http://"+w).replace(/^http:\/\//,"");const x=u[g].index;if(x>m){const k=new e.Token("text","",0);k.content=l.slice(m,x),k.level=h,d.push(k)}const _=new e.Token("link_open","a",1);_.attrs=[["href",b]],_.level=h++,_.markup="linkify",_.info="auto",d.push(_);const E=new e.Token("text","",0);E.content=w,E.level=h,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",d.push(C),m=u[g].lastIndex}if(m<l.length){const g=new e.Token("text","",0);g.content=l.slice(m),g.level=h,d.push(g)}t[n].children=a=GB(a,s,d)}}}}const ZB=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Whe=/\((c|tm|r)\)/i,Khe=/\((c|tm|r)\)/ig,Zhe={c:"",r:"",tm:""};function Yhe(e,t){return Zhe[t.toLowerCase()]}function Xhe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(Khe,Yhe)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Jhe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&ZB.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Qhe(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Whe.test(e.tokens[t].content)&&Xhe(e.tokens[t].children),ZB.test(e.tokens[t].content)&&Jhe(e.tokens[t].children))}const epe=/['"]/,MM=/['"]/g,OM="";function mw(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function tpe(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],s=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,i.type!=="text")continue;let o=i.content,l=0,u=o.length;e:for(;l<u;){MM.lastIndex=l;const d=MM.exec(o);if(!d)break;let h=!0,m=!0;l=d.index+1;const g=d[0]==="'";let v=32;if(d.index-1>=0)v=o.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<u)b=o.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const w=W0(v)||G0(String.fromCharCode(v)),x=W0(b)||G0(String.fromCharCode(b)),_=q0(v),E=q0(b);if(E?h=!1:x&&(_||w||(h=!1)),_?m=!1:w&&(E||x||(m=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=w,m=x),!h&&!m){g&&(i.content=mw(i.content,d.index,OM));continue}if(m)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<s)break;if(C.single===g&&r[n].level===s){C=r[n];let k,I;g?(k=t.md.options.quotes[2],I=t.md.options.quotes[3]):(k=t.md.options.quotes[0],I=t.md.options.quotes[1]),i.content=mw(i.content,d.index,I),e[C.token].content=mw(e[C.token].content,C.pos,k),l+=I.length-1,C.token===a&&(l+=k.length-1),o=i.content,u=o.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:g,level:s}):m&&g&&(i.content=mw(i.content,d.index,OM))}}}function npe(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!epe.test(e.tokens[t].content)||tpe(e.tokens[t].children,e)}function rpe(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const s=r[i].children,o=s.length;for(t=0;t<o;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<o;t++)s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const EC=[["normalize",zhe],["block",Uhe],["inline",Vhe],["linkify",Ghe],["replacements",Qhe],["smartquotes",npe],["text_join",rpe]];function BN(){this.ruler=new ts;for(let e=0;e<EC.length;e++)this.ruler.push(EC[e][0],EC[e][1])}BN.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};BN.prototype.State=KB;function Cl(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,s=0,o=0,l=0,u=a.length,d=!1;s<u;s++){const h=a.charCodeAt(s);if(!d)if(Br(h)){o++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||s===u-1)&&(h!==10&&s++,this.bMarks.push(i),this.eMarks.push(s),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),d=!1,o=0,l=0,i=s+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Cl.prototype.push=function(e,t,n){const r=new jo(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Cl.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Cl.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Cl.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Br(r))break}return t};Cl.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Br(this.src.charCodeAt(--t)))return t+1;return t};Cl.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Cl.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Cl.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let s=0,o=t;o<n;o++,s++){let l=0;const u=this.bMarks[o];let d=u,h;for(o+1<n||a?h=this.eMarks[o]+1:h=this.eMarks[o];d<h&&l<r;){const m=this.src.charCodeAt(d);if(Br(m))m===9?l+=4-(l+this.bsCount[o])%4:l++;else if(d-u<this.tShift[o])l++;else break;d++}l>r?i[s]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[s]=this.src.slice(d,h)}return i.join("")};Cl.prototype.Token=jo;const ape=65536;function CC(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function PM(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,s=0,o="";for(;r<n;)a===124&&(i?(o+=e.substring(s,r-1),s=r):(t.push(o+e.substring(s,r)),o="",s=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(o+e.substring(s)),t}function ipe(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58||i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!Br(o)||s===45&&Br(o))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Br(C))return!1;i++}let l=CC(e,t+1),u=l.split("|");const d=[];for(let C=0;C<u.length;C++){const k=u[C].trim();if(!k){if(C===0||C===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=CC(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=PM(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==d.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const w=e.push("thead_open","thead",1);w.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<u.length;C++){const k=e.push("th_open","th",1);d[C]&&(k.attrs=[["style","text-align:"+d[C]]]);const I=e.push("inline","",0);I.content=u[C].trim(),I.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let _,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let I=0,j=g.length;I<j;I++)if(g[I](e,a,n,!0)){C=!0;break}if(C||(l=CC(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(u=PM(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>ape))break;if(a===t+2){const I=e.push("tbody_open","tbody",1);I.map=_=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let I=0;I<h;I++){const j=e.push("td_open","td",1);d[I]&&(j.attrs=[["style","text-align:"+d[I]]]);const N=e.push("inline","",0);N.content=u[I]?u[I].trim():"",N.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return _&&(e.push("tbody_close","tbody",-1),_[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=m,e.line=a,!0}function spe(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function ope(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const s=e.src.charCodeAt(a);if(s!==126&&s!==96)return!1;let o=a;a=e.skipChars(a,s);let l=a-o;if(l<3)return!1;const u=e.src.slice(o,a),d=e.src.slice(a,i);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=o=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===s&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,s),!(a-o<l)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}l=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=d,g.content=e.getLines(t+1,h,l,!0),g.markup=u,g.map=[t,e.line],!0}function lpe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const o=[],l=[],u=[],d=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,I,j;e.src.charCodeAt(a)===32?(a++,k++,j=!1,I=!0):e.src.charCodeAt(a)===9?(I=!0,(e.bsCount[v]+k)%4===3?(a++,k++,j=!1):j=!0):I=!1;let N=k;for(o.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const P=e.src.charCodeAt(a);if(Br(P))P===9?N+=4-(N+e.bsCount[v]+(j?1:0))%4:N++;else break;a++}g=a>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(I?1:0),u.push(e.sCount[v]),e.sCount[v]=N-k,d.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let k=0,I=h.length;k<I;k++)if(h[k](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const w=e.push("blockquote_open","blockquote",1);w.markup=">";const x=[t,0];w.map=x,e.md.block.tokenize(e,t,v);const _=e.push("blockquote_close","blockquote",-1);_.markup=">",e.lineMax=s,e.parentType=m,x[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=d[E],e.sCount[E+t]=u[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function cpe(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(i++);if(s!==42&&s!==45&&s!==95)return!1;let o=1;for(;i<a;){const u=e.src.charCodeAt(i++);if(u!==s&&!Br(u))return!1;u===s&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(s)),!0}function FM(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Br(i))return-1}return r}function LM(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Br(i))?-1:a}function upe(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function dpe(e,t,n,r){let a,i,s,o,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,m,g;if((g=LM(e,l))>=0){if(h=!0,s=e.bMarks[l]+e.tShift[l],m=Number(e.src.slice(s,g-1)),d&&m!==1)return!1}else if((g=FM(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(g)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(o=e.push("ordered_list_open","ol",1),m!==1&&(o.attrs=[["start",m]])):o=e.push("bullet_list_open","ul",1);const w=[l,0];o.map=w,o.markup=String.fromCharCode(v);let x=!1;const _=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=g,a=e.eMarks[l];const C=e.sCount[l]+g-(e.bMarks[l]+e.tShift[l]);let k=C;for(;i<a;){const se=e.src.charCodeAt(i);if(se===9)k+=4-(k+e.bsCount[l])%4;else if(se===32)k++;else break;i++}const I=i;let j;I>=a?j=1:j=k-C,j>4&&(j=1);const N=C+j;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(v);const P=[l,0];o.map=P,h&&(o.info=e.src.slice(s,g-1));const L=e.tight,H=e.tShift[l],M=e.sCount[l],K=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=N,e.tight=!0,e.tShift[l]=I-e.bMarks[l],e.sCount[l]=k,I>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(u=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=K,e.tShift[l]=H,e.sCount[l]=M,e.tight=L,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(v),l=e.line,P[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let U=!1;for(let se=0,ie=_.length;se<ie;se++)if(_[se](e,l,n,!0)){U=!0;break}if(U)break;if(h){if(g=LM(e,l),g<0)break;s=e.bMarks[l]+e.tShift[l]}else if(g=FM(e,l),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(v),w[1]=l,e.line=l,e.parentType=E,u&&upe(e,b),!0}function fpe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function o(_){const E=e.lineMax;if(_>=E||e.isEmpty(_))return null;let C=!1;if(e.sCount[_]-e.blkIndent>3&&(C=!0),e.sCount[_]<0&&(C=!0),!C){const j=e.md.block.ruler.getRules("reference"),N=e.parentType;e.parentType="reference";let P=!1;for(let L=0,H=j.length;L<H;L++)if(j[L](e,_,E,!0)){P=!0;break}if(e.parentType=N,P)return null}const k=e.bMarks[_]+e.tShift[_],I=e.eMarks[_];return e.src.slice(k,I+1)}let l=e.src.slice(a,i+1);i=l.length;let u=-1;for(a=1;a<i;a++){const _=l.charCodeAt(a);if(_===91)return!1;if(_===93){u=a;break}else if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(_===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(a=u+2;a<i;a++){const _=l.charCodeAt(a);if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Br(_))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const m=a,g=s,v=a;for(;a<i;a++){const _=l.charCodeAt(a);if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Br(_))break}let b=e.md.helpers.parseLinkTitle(l,a,i);for(;b.can_continue;){const _=o(s);if(_===null)break;l+=_,a=i,i=l.length,s++,b=e.md.helpers.parseLinkTitle(l,a,i,b)}let w;for(a<i&&v!==a&&b.ok?(w=b.str,a=b.pos):(w="",a=m,s=g);a<i;){const _=l.charCodeAt(a);if(!Br(_))break;a++}if(a<i&&l.charCodeAt(a)!==10&&w)for(w="",a=m,s=g;a<i;){const _=l.charCodeAt(a);if(!Br(_))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const x=h_(l.slice(1,u));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:w,href:h}),e.line=s),!0):!1}const hpe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],ppe="[a-zA-Z_:][a-zA-Z0-9:._-]*",mpe="[^\"'=<>`\\x00-\\x20]+",gpe="'[^']*'",ype='"[^"]*"',bpe="(?:"+mpe+"|"+gpe+"|"+ype+")",vpe="(?:\\s+"+ppe+"(?:\\s*=\\s*"+bpe+")?)",YB="<[A-Za-z][A-Za-z0-9\\-]*"+vpe+"*\\s*\\/?>",XB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",wpe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",xpe="<[?][\\s\\S]*?[?]>",_pe="<![A-Za-z][^>]*>",Spe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",Epe=new RegExp("^(?:"+YB+"|"+XB+"|"+wpe+"|"+xpe+"|"+_pe+"|"+Spe+")"),Cpe=new RegExp("^(?:"+YB+"|"+XB+")"),Uh=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+hpe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Cpe.source+"\\s*$"),/^$/,!1]];function Tpe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let s=e.src.slice(a,i),o=0;for(;o<Uh.length&&!Uh[o][0].test(s);o++);if(o===Uh.length)return!1;if(r)return Uh[o][2];let l=t+1;if(!Uh[o][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],s=e.src.slice(a,i),Uh[o][1].test(s)){s.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function kpe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(a);if(s!==35||a>=i)return!1;let o=1;for(s=e.src.charCodeAt(++a);s===35&&a<i&&o<=6;)o++,s=e.src.charCodeAt(++a);if(o>6||a<i&&!Br(s))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&Br(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const u=e.push("heading_open","h"+String(o),1);u.markup="########".slice(0,o),u.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function Ape(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,s,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let g=e.bMarks[o]+e.tShift[o];const v=e.eMarks[o];if(g<v&&(s=e.src.charCodeAt(g),(s===45||s===61)&&(g=e.skipChars(g,s),g=e.skipSpaces(g),g>=v))){i=s===61?1:2;break}}if(e.sCount[o]<0)continue;let m=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,o,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const u=e.push("heading_open","h"+String(i),1);u.markup=String.fromCharCode(s),u.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(s),e.parentType=a,!0}function Npe(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let u=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){u=!0;break}if(u)break}const s=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const gw=[["table",ipe,["paragraph","reference"]],["code",spe],["fence",ope,["paragraph","reference","blockquote","list"]],["blockquote",lpe,["paragraph","reference","blockquote","list"]],["hr",cpe,["paragraph","reference","blockquote","list"]],["list",dpe,["paragraph","reference","blockquote"]],["reference",fpe],["html_block",Tpe,["paragraph","reference","blockquote"]],["heading",kpe,["paragraph","reference","blockquote"]],["lheading",Ape],["paragraph",Npe]];function p_(){this.ruler=new ts;for(let e=0;e<gw.length;e++)this.ruler.push(gw[e][0],gw[e][1],{alt:(gw[e][2]||[]).slice()})}p_.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let s=t,o=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let u=!1;for(let d=0;d<a;d++)if(u=r[d](e,s,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),s=e.line,s<n&&e.isEmpty(s)&&(o=!0,s++,e.line=s)}};p_.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};p_.prototype.State=Cl;function eb(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}eb.prototype.pushPending=function(){const e=new jo("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};eb.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new jo(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};eb.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const s=i-e,o=i<n?this.src.charCodeAt(i):32,l=W0(a)||G0(String.fromCharCode(a)),u=W0(o)||G0(String.fromCharCode(o)),d=q0(a),h=q0(o),m=!h&&(!u||d||l),g=!d&&(!l||h||u);return{can_open:m&&(t||!g||l),can_close:g&&(t||!m||u),length:s}};eb.prototype.Token=jo;function Rpe(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Ipe(e,t){let n=e.pos;for(;n<e.posMax&&!Rpe(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const jpe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Dpe(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(jpe);if(!a)return!1;const i=a[1],s=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!s)return!1;let o=s.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(o);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=o.length-i.length,!0}function Mpe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Br(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const $N=[];for(let e=0;e<256;e++)$N.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){$N[e.charCodeAt(0)]=1});function Ope(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Br(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=e.src[n+1],n++)}const s="\\"+i;if(!t){const o=e.push("text_special","",0);a<256&&$N[a]!==0?o.content=i:o.content=s,o.markup=s,o.info="escape"}return e.pos=n+1,!0}function Ppe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(a,n),o=s.length;if(e.backticksScanned&&(e.backticks[o]||0)<=a)return t||(e.pending+=s),e.pos+=o,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===o){if(!t){const h=e.push("code_inline","code",0);h.markup=s,h.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=u}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=o,!0}function Fpe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const s=String.fromCharCode(r);if(i<2)return!1;let o;i%2&&(o=e.push("text","",0),o.content=s,i--);for(let l=0;l<i;l+=2)o=e.push("text","",0),o.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function BM(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const s=t[i];if(s.marker!==126||s.end===-1)continue;const o=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const i=r.pop();let s=i+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,i!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[i],e.tokens[i]=n)}}function Lpe(e){const t=e.tokens_meta,n=e.tokens_meta.length;BM(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&BM(e,t[r].delimiters)}const JB={tokenize:Fpe,postProcess:Lpe};function Bpe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function $M(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],s=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,o=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?o+o:o,l.content="";const u=e.tokens[i.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?o+o:o,u.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function $pe(e){const t=e.tokens_meta,n=e.tokens_meta.length;$M(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&$M(e,t[r].delimiters)}const QB={tokenize:Bpe,postProcess:$pe};function zpe(e,t){let n,r,a,i,s="",o="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(u=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Br(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(s=e.md.normalizeLink(a.str),e.md.validateLink(s)?v=a.pos:s="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!Br(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&a.ok)for(o=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Br(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(u=!0),v++}if(u){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=g+1):v=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[h_(r)],!i)return e.pos=d,!1;s=i.href,o=i.title}if(!t){e.pos=m,e.posMax=g;const b=e.push("link_open","a",1),w=[["href",s]];b.attrs=w,o&&w.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function Upe(e,t){let n,r,a,i,s,o,l,u,d="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);if(i>=m)return!1;for(u=i,o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),o.ok&&(d=e.md.normalizeLink(o.str),e.md.validateLink(d)?i=o.pos:d=""),u=i;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);if(o=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&u!==i&&o.ok)for(l=o.str,i=o.pos;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);else l="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(u=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(u,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),s=e.env.references[h_(a)],!s)return e.pos=h,!1;d=s.href,l=s.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const w=e.push("image","img",0),x=[["src",d],["alt",""]];w.attrs=x,w.children=b,w.content=r,l&&x.push(["title",l])}return e.pos=i,e.posMax=m,!0}const Vpe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Hpe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function qpe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const i=e.src.slice(r+1,n);if(Hpe.test(i)){const s=e.md.normalizeLink(i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}if(Vpe.test(i)){const s=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}return!1}function Gpe(e){return/^<a[>\s]/i.test(e)}function Wpe(e){return/^<\/a\s*>/i.test(e)}function Kpe(e){const t=e|32;return t>=97&&t<=122}function Zpe(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!Kpe(a))return!1;const i=e.src.slice(r).match(Epe);if(!i)return!1;if(!t){const s=e.push("html_inline","",0);s.content=i[0],Gpe(s.content)&&e.linkLevel++,Wpe(s.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const Ype=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Xpe=/^&([a-z][a-z0-9]{1,31});/i;function Jpe(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(Ype);if(i){if(!t){const s=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=e.push("text_special","",0);o.content=LN(s)?qx(s):qx(65533),o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(Xpe);if(i){const s=qB(i[0]);if(s!==i[0]){if(!t){const o=e.push("text_special","",0);o.content=s,o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function zM(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let s=0;s<n;s++){const o=e[s];if(i.push(0),(e[r].marker!==o.marker||a!==o.token-1)&&(r=s),a=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let u=r-i[r]-1,d=u;for(;u>l;u-=i[u]+1){const h=e[u];if(h.marker===o.marker&&h.open&&h.end<0){let m=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(m=!0),!m){const g=u>0&&!e[u-1].open?i[u-1]+1:0;i[s]=s-u+g,i[u]=g,o.open=!1,h.end=s,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=d)}}function Qpe(e){const t=e.tokens_meta,n=e.tokens_meta.length;zM(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&zM(t[r].delimiters)}function eme(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const TC=[["text",Ipe],["linkify",Dpe],["newline",Mpe],["escape",Ope],["backticks",Ppe],["strikethrough",JB.tokenize],["emphasis",QB.tokenize],["link",zpe],["image",Upe],["autolink",qpe],["html_inline",Zpe],["entity",Jpe]],kC=[["balance_pairs",Qpe],["strikethrough",JB.postProcess],["emphasis",QB.postProcess],["fragments_join",eme]];function tb(){this.ruler=new ts;for(let e=0;e<TC.length;e++)this.ruler.push(TC[e][0],TC[e][1]);this.ruler2=new ts;for(let e=0;e<kC.length;e++)this.ruler2.push(kC[e][0],kC[e][1])}tb.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let s=!1;if(e.level<a){for(let o=0;o<r;o++)if(e.level++,s=n[o](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,i[t]=e.pos};tb.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let s=!1;if(e.level<a){for(let o=0;o<n;o++)if(s=t[o](e,!1),s){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};tb.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),s=i.length;for(let o=0;o<s;o++)i[o](a)};tb.prototype.State=eb;function tme(e){const t={};e=e||{},t.src_Any=$B.source,t.src_Cc=zB.source,t.src_Z=VB.source,t.src_P=PN.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function pk(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function m_(e){return Object.prototype.toString.call(e)}function nme(e){return m_(e)==="[object String]"}function rme(e){return m_(e)==="[object Object]"}function ame(e){return m_(e)==="[object RegExp]"}function UM(e){return m_(e)==="[object Function]"}function ime(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const e7={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function sme(e){return Object.keys(e||{}).reduce(function(t,n){return t||e7.hasOwnProperty(n)},!1)}const ome={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},lme="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",cme="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function ume(e){e.__index__=-1,e.__text_cache__=""}function dme(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function VM(){return function(e,t){t.normalize(e)}}function Gx(e){const t=e.re=tme(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(lme),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[o]=u,rme(l)){ame(l.validate)?u.validate=dme(l.validate):UM(l.validate)?u.validate=l.validate:i(o,l),UM(l.normalize)?u.normalize=l.normalize:l.normalize?i(o,l):u.normalize=VM();return}if(nme(l)){a.push(o);return}i(o,l)}),a.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:VM()};const s=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(ime).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),ume(e)}function fme(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function mk(e,t){const n=new fme(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function _s(e,t){if(!(this instanceof _s))return new _s(e,t);t||sme(e)&&(t=e,e={}),this.__opts__=pk({},e7,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=pk({},ome,e),this.__compiled__={},this.__tlds__=cme,this.__tlds_replaced__=!1,this.re={},Gx(this)}_s.prototype.add=function(t,n){return this.__schemas__[t]=n,Gx(this),this};_s.prototype.set=function(t){return this.__opts__=pk(this.__opts__,t),this};_s.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,s,o,l,u,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(s=a.index+a[1].length,o=a.index+a[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o))),this.__index__>=0};_s.prototype.pretest=function(t){return this.re.pretest.test(t)};_s.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};_s.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(mk(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(mk(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};_s.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,mk(this,0)):null};_s.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Gx(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Gx(this),this)};_s.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};_s.prototype.onCompile=function(){};const fp=2147483647,ll=36,zN=1,K0=26,hme=38,pme=700,t7=72,n7=128,r7="-",mme=/^xn--/,gme=/[^\0-\x7F]/,yme=/[\x2E\u3002\uFF0E\uFF61]/g,bme={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},AC=ll-zN,cl=Math.floor,NC=String.fromCharCode;function Cu(e){throw new RangeError(bme[e])}function vme(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function a7(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(yme,".");const a=e.split("."),i=vme(a,t).join(".");return r+i}function i7(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const wme=e=>String.fromCodePoint(...e),xme=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:ll},HM=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},s7=function(e,t,n){let r=0;for(e=n?cl(e/pme):e>>1,e+=cl(e/t);e>AC*K0>>1;r+=ll)e=cl(e/AC);return cl(r+(AC+1)*e/(e+hme))},o7=function(e){const t=[],n=e.length;let r=0,a=n7,i=t7,s=e.lastIndexOf(r7);s<0&&(s=0);for(let o=0;o<s;++o)e.charCodeAt(o)>=128&&Cu("not-basic"),t.push(e.charCodeAt(o));for(let o=s>0?s+1:0;o<n;){const l=r;for(let d=1,h=ll;;h+=ll){o>=n&&Cu("invalid-input");const m=xme(e.charCodeAt(o++));m>=ll&&Cu("invalid-input"),m>cl((fp-r)/d)&&Cu("overflow"),r+=m*d;const g=h<=i?zN:h>=i+K0?K0:h-i;if(m<g)break;const v=ll-g;d>cl(fp/v)&&Cu("overflow"),d*=v}const u=t.length+1;i=s7(r-l,u,l==0),cl(r/u)>fp-a&&Cu("overflow"),a+=cl(r/u),r%=u,t.splice(r++,0,a)}return String.fromCodePoint(...t)},l7=function(e){const t=[];e=i7(e);const n=e.length;let r=n7,a=0,i=t7;for(const l of e)l<128&&t.push(NC(l));const s=t.length;let o=s;for(s&&t.push(r7);o<n;){let l=fp;for(const d of e)d>=r&&d<l&&(l=d);const u=o+1;l-r>cl((fp-a)/u)&&Cu("overflow"),a+=(l-r)*u,r=l;for(const d of e)if(d<r&&++a>fp&&Cu("overflow"),d===r){let h=a;for(let m=ll;;m+=ll){const g=m<=i?zN:m>=i+K0?K0:m-i;if(h<g)break;const v=h-g,b=ll-g;t.push(NC(HM(g+v%b,0))),h=cl(v/b)}t.push(NC(HM(h,0))),i=s7(a,u,o===s),a=0,++o}++a,++r}return t.join("")},_me=function(e){return a7(e,function(t){return mme.test(t)?o7(t.slice(4).toLowerCase()):t})},Sme=function(e){return a7(e,function(t){return gme.test(t)?"xn--"+l7(t):t})},c7={version:"2.3.1",ucs2:{decode:i7,encode:wme},decode:o7,encode:l7,toASCII:Sme,toUnicode:_me},Eme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Cme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Tme={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},kme={default:Eme,zero:Cme,commonmark:Tme},Ame=/^(vbscript|javascript|file|data):/,Nme=/^data:image\/(gif|png|jpeg|webp);/;function Rme(e){const t=e.trim().toLowerCase();return Ame.test(t)?Nme.test(t):!0}const u7=["http:","https:","mailto:"];function Ime(e){const t=ON(e,!0);if(t.hostname&&(!t.protocol||u7.indexOf(t.protocol)>=0))try{t.hostname=c7.toASCII(t.hostname)}catch{}return Qy(MN(t))}function jme(e){const t=ON(e,!0);if(t.hostname&&(!t.protocol||u7.indexOf(t.protocol)>=0))try{t.hostname=c7.toUnicode(t.hostname)}catch{}return Pp(MN(t),Pp.defaultChars+"%")}function Ks(e,t){if(!(this instanceof Ks))return new Ks(e,t);t||FN(e)||(t=e||{},e="default"),this.inline=new tb,this.block=new p_,this.core=new BN,this.renderer=new um,this.linkify=new _s,this.validateLink=Rme,this.normalizeLink=Ime,this.normalizeLinkText=jme,this.utils=Mhe,this.helpers=f_({},Lhe),this.options={},this.configure(e),t&&this.set(t)}Ks.prototype.set=function(e){return f_(this.options,e),this};Ks.prototype.configure=function(e){const t=this;if(FN(e)){const n=e;if(e=kme[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Ks.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Ks.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Ks.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Ks.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Ks.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Ks.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Ks.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const RC=new Ks({html:!1,linkify:!0,breaks:!0});function UN(e){return T.useMemo(()=>{var n;if(!e)return[];try{const r=RC.parse(e,{}),a=[];let i="",s=0;for(;s<r.length;){const o=r[s];if(o.type==="fence"){i&&(a.push(i),i="");const l=((n=o.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:o.content}),s++}else{const l=[];for(;s<r.length&&r[s].type!=="fence";)l.push(r[s]),s++;l.length>0&&(i+=RC.renderer.render(l,RC.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const Dme=({markdownContent:e})=>{const t=UN(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return p.jsx(qu,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},VN=gt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var b,w;const a=rr(x=>x.foldUserMessagesOnCompletion),[i,s]=T.useState(r&&a),[o,l]=T.useState(!1);T.useEffect(()=>{r&&a&&s(!0)},[r,a]);const u=t?BB(new Date(t),{addSuffix:!0}):"Sending...",d=((b=e.metadata)==null?void 0:b.attachedFiles)&&e.metadata.attachedFiles.length>0,h=e.content&&e.content.trim().length>0,m=T.useCallback(()=>s(x=>!x),[]),g=T.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),qe.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(x){qe.error("Failed to copy prompt."),console.error("Clipboard copy failed:",x)}},[e.content]),v=T.useMemo(()=>{var _;let x="";return h&&(x+=`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`),h&&d&&(x+=" + "),d&&(x+=`${(_=e.metadata.attachedFiles)==null?void 0:_.length} file(s)`),x||"[Empty Prompt]"},[h,d,e.content,e.metadata]);return p.jsxs("div",{className:xt("user-prompt relative group/user overflow-wrap-anywhere",n),children:[p.jsxs("div",{className:xt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[p.jsx(HY,{className:"h-4 w-4 text-primary flex-shrink-0"}),p.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[h&&p.jsx(Cn,{tooltipText:"Copy Prompt",onClick:g,"aria-label":"Copy user prompt",icon:o?p.jsx(Ga,{className:"text-green-500"}):p.jsx(gp,{}),className:"h-5 w-5"}),(h||d)&&p.jsx(Cn,{tooltipText:i?"Unfold":"Fold",onClick:m,"aria-label":i?"Unfold prompt":"Fold prompt",icon:i?p.jsx(_o,{}):p.jsx(yc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:u})})]}),!i&&p.jsxs(p.Fragment,{children:[d&&p.jsx("div",{className:"mb-2 space-y-1",children:(w=e.metadata.attachedFiles)==null?void 0:w.map(x=>p.jsx(DN,{fileMeta:x,isReadOnly:!0},x.id))}),p.jsx(Dme,{markdownContent:e.content})]}),i&&p.jsx("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:m,children:v})]})});VN.displayName="UserPromptDisplay";const qM=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,Mme=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i,promptTokens:s,completionTokens:o,timeToFirstToken:l,generationTime:u})=>{const[d,h]=T.useState(!1),m=T.useCallback(async()=>{if(!n||typeof n!="string"){qe.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),h(!0),qe.success("Assistant response copied!"),setTimeout(()=>h(!1),1500)}catch(v){qe.error("Failed to copy response."),console.error("Clipboard copy failed:",v)}},[n]),g=s!==void 0&&o!==void 0?s+o:void 0;return p.jsxs("div",{className:xt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(F8,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[n&&typeof n=="string"&&p.jsx(Cn,{tooltipText:"Copy Response",onClick:m,"aria-label":"Copy assistant response",icon:d?p.jsx(Ga,{className:"text-green-500"}):p.jsx(gp,{}),className:"h-5 w-5"}),i&&p.jsx(Cn,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?p.jsx(_o,{}):p.jsx(yc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[g!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(iZ,{className:"h-3 w-3"}),p.jsx("span",{children:g.toLocaleString()})]}),p.jsxs(Yn,{side:"bottom",children:["Tokens: ",s??"?"," (Prompt) +"," ",o??"?"," (Completion) = ",g]})]})}),l!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(XY,{className:"h-3 w-3"}),p.jsx("span",{children:qM(l)})]}),p.jsx(Yn,{side:"bottom",children:"Time to First Token"})]})}),u!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(QK,{className:"h-3 w-3"}),p.jsx("span",{children:qM(u)})]}),p.jsx(Yn,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t})})]})},Ome=({interactionId:e,currentRating:t})=>{const n=On(i=>i.rateInteraction),r=i=>{n(e,i===t?null:i)},a=Array.from({length:11},(i,s)=>s-5);return p.jsx("div",{className:"flex items-center gap-1",children:a.map(i=>{let s="";i===-5?s="Terrible":i===-4?s="Very Bad":i===-3?s="Bad":i===-2?s="Poor":i===-1?s="Below Average":i===0?s="Neutral":i===1?s="Above Average":i===2?s="Good":i===3?s="Very Good":i===4?s="Excellent":i===5&&(s="Perfect");let o="text-muted-foreground",l="hover:text-foreground",u="";i<0?(l="hover:text-red-500",t===i&&(o="text-red-500",u="fill-red-500")):i===0?(l="hover:text-gray-500",t===i&&(o="text-gray-500",u="fill-gray-500")):(l="hover:text-green-500",t===i&&(o="text-green-500",u="fill-green-500"));const d=t===i?"bg-muted":"";return p.jsx(Cn,{tooltipText:s,onClick:()=>r(i),"aria-label":`Rate response as ${s}`,icon:p.jsx(DY,{className:xt(u,t===i?"fill-current":"fill-none")}),variant:"ghost",className:xt("h-4 w-4 md:h-5 md:w-5 p-0",o,l,d)},i)})})},Pme=({interaction:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},i=()=>{t&&t(e.id)},s=()=>{r&&r(e.id)};return p.jsxs("div",{className:xt("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[p.jsx(Ome,{interactionId:e.id,currentRating:e.rating}),r&&p.jsx(Cn,{tooltipText:"Edit",onClick:s,"aria-label":"Edit User Prompt",icon:p.jsx(Kg,{}),className:"h-5 w-5 md:h-6 md:w-6"}),t&&p.jsx(Cn,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:p.jsx(g1,{}),className:"h-5 w-5 md:h-6 md:w-6"}),n&&p.jsx(Cn,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:p.jsx(Zi,{}),className:"h-5 w-5 md:h-6 md:w-6 text-destructive hover:text-destructive/80"})]})},Fme=({toolCall:e})=>{const[t,n]=T.useState(!0),r=()=>n(i=>!i),a=T.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return p.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Cn,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?p.jsx(_o,{}):p.jsx(yc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(qu,{lang:"json",code:a})]})},Lme=({toolResult:e})=>{const[t,n]=T.useState(!0),r=()=>n(s=>!s),a=T.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return p.jsxs("div",{className:xt("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:xt("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Cn,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?p.jsx(_o,{}):p.jsx(yc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(qu,{lang:i?"text":"json",code:a})]})},Bme=({markdownContent:e})=>{const t=UN(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return p.jsx(qu,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},$me=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:s,toggleFold:o})=>{const[l,u]=T.useState(!0),[d,h]=T.useState(!1),m=T.useCallback(()=>u(_=>!_),[]),g=T.useCallback(async()=>{if(r)try{await navigator.clipboard.writeText(r),h(!0),qe.success("Reasoning copied!"),setTimeout(()=>h(!1),1500)}catch(_){qe.error("Failed to copy reasoning."),console.error("Clipboard copy failed for reasoning:",_)}},[r]),v=!!r,b=e&&(typeof e!="string"||e.trim().length>0),w=t&&t.length>0,x=n&&n.length>0;return s?p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:o,children:[v?"[Reasoning] ":"",w?`[${t==null?void 0:t.length} Tool Call(s)] `:"",b&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:w||x||v?"":"[No text response]"]}):p.jsxs(p.Fragment,{children:[a&&i&&p.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:i})]}),v&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:m,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(Af,{className:"h-3.5 w-3.5"})," Reasoning"]}),p.jsxs("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Cn,{tooltipText:"Copy Reasoning",onClick:_=>{_.stopPropagation(),g()},"aria-label":"Copy reasoning",icon:d?p.jsx(Ga,{className:"text-green-500"}):p.jsx(gp,{}),className:"h-5 w-5 text-muted-foreground"}),p.jsx(Cn,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:_=>{_.stopPropagation(),m()},"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?p.jsx(_o,{}):p.jsx(yc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]})]}),!l&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:r})]}),t==null?void 0:t.map((_,E)=>{try{const C=JSON.parse(_);return p.jsx(Fme,{toolCall:C},`call-${E}`)}catch(C){return console.error("Failed to parse tool call string:",C),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${E}`)}}),n==null?void 0:n.map((_,E)=>{try{const C=JSON.parse(_);return p.jsx(Lme,{toolResult:C},`res-${E}`)}catch(C){return console.error("Failed to parse tool result string:",C),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${E}`)}}),p.jsx(Bme,{markdownContent:e}),!b&&!w&&!x&&!v&&p.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},d7=gt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var C,k,I,j,N,P,L,H,M,K,U,se;const[i,s]=T.useState(!1),{dbProviderConfigs:o,getAllAvailableModelDefsForProvider:l}=Un(sn(ie=>({dbProviderConfigs:ie.dbProviderConfigs,getAllAvailableModelDefsForProvider:ie.getAllAvailableModelDefsForProvider}))),u=T.useCallback(()=>s(ie=>!ie),[]),d=e.endedAt?BB(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=T.useMemo(()=>{var te;const ie=(te=e.metadata)==null?void 0:te.modelId;if(!ie)return"Unknown Model";const{providerId:re,modelId:X}=Rc(ie);if(!re||!X)return ie;const ne=o.find(ue=>ue.id===re),q=(ne==null?void 0:ne.name)??re,Q=l(re).find(ue=>ue.id===X);return`${(Q==null?void 0:Q.name)??X} (${q})`},[(C=e.metadata)==null?void 0:C.modelId,o,l]),m=e.status==="COMPLETED",g=m||e.status==="ERROR",v=e.status==="ERROR",b=e.response&&(typeof e.response!="string"||e.response.trim().length>0),w=((k=e.metadata)==null?void 0:k.toolCalls)&&e.metadata.toolCalls.length>0,x=((I=e.metadata)==null?void 0:I.toolResults)&&e.metadata.toolResults.length>0,_=!!((j=e.metadata)!=null&&j.reasoning),E=b||w||x||_;return p.jsxs("div",{className:xt("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",v?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&p.jsx(VN,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:m}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[p.jsx(Mme,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:u,canFold:E,promptTokens:(N=e.metadata)==null?void 0:N.promptTokens,completionTokens:(P=e.metadata)==null?void 0:P.completionTokens,timeToFirstToken:(L=e.metadata)==null?void 0:L.timeToFirstToken,generationTime:(H=e.metadata)==null?void 0:H.generationTime}),p.jsx($me,{response:e.response,toolCalls:(M=e.metadata)==null?void 0:M.toolCalls,toolResults:(K=e.metadata)==null?void 0:K.toolResults,reasoning:(U=e.metadata)==null?void 0:U.reasoning,isError:v,errorMessage:(se=e.metadata)==null?void 0:se.error,isFolded:i,toggleFold:u})]}),g&&p.jsx(Pme,{interaction:e,onEdit:r,onRegenerate:t,onDelete:n})]})});d7.displayName="InteractionCard";const GM=(e,t,n,r)=>{if(typeof e=="string")return e.trim()?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const a=e,i=a.lang?`language-${a.lang}`:"language-plaintext";return n?p.jsx(qu,{lang:a.lang,code:a.code,isStreaming:r},`code-${t}`):p.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[p.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:p.jsx("div",{className:"text-sm font-medium",children:a.lang?a.lang.toUpperCase():"CODE"})}),p.jsx("code",{className:xt(i,"block p-4 font-mono text-sm leading-relaxed"),children:a.code})]},`pre-${t}`)}return null},zme=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=rr(sn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,enableStreamingCodeBlockParsing:m.enableStreamingCodeBlockParsing}))),i=UN(r?e:null),[s,o]=T.useState([]),[l,u]=T.useState(null),d=T.useRef(0);T.useEffect(()=>{if(!r){o([]),u(e??null),d.current=0;return}const m=d.current,g=i.slice(m,i.length-1);if(g.length>0){const b=g.map((w,x)=>GM(w,m+x,a,!1)).filter(w=>w!==null);o(w=>[...w,...b]),d.current+=g.length}const v=i.length>0?i[i.length-1]:null;JSON.stringify(v)!==JSON.stringify(l)&&u(v),e||(o([]),u(null),d.current=0)},[i,r,a,l,e]);const h=T.useMemo(()=>!l||!r?null:GM(l,d.current,a,!0),[l,a,r]);return!(e!=null&&e.trim())&&s.length===0?p.jsx("div",{className:xt("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."}):r?p.jsxs("div",{className:xt(n),children:[s,h]}):p.jsx("pre",{className:xt("whitespace-pre-wrap text-sm",n),children:e})},Ume=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>p.jsx(Cn,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:p.jsx(IY,{}),variant:r,size:n,className:t}),gk=gt.memo(({interactionId:e,onStop:t,className:n})=>{var K;const{interaction:r,interactionStatus:a}=On(sn(U=>{const se=U.interactions.find(ie=>ie.id===e);return{interaction:se,interactionStatus:se==null?void 0:se.status}})),i=rr(U=>U.streamingRenderFPS),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(!0),[m,g]=T.useState(!1),[v,b]=T.useState(!1),[w,x]=T.useState(!1),_=T.useRef(null),E=T.useRef(0);T.useEffect(()=>{const U=1e3/i;let se=!0;const ie=re=>{if(!se)return;if(On.getState().streamingInteractionIds.includes(e)){if(re-E.current>=U){const ne=On.getState().activeStreamBuffers[e]??"",q=On.getState().activeReasoningBuffers[e]??"";o(ne),u(q),E.current=re}_.current=requestAnimationFrame(ie)}else{const ne=On.getState().activeStreamBuffers[e]??"",q=On.getState().activeReasoningBuffers[e]??"";o(ne),u(q),_.current=null}};return _.current=requestAnimationFrame(ie),()=>{se=!1,_.current&&(cancelAnimationFrame(_.current),_.current=null)}},[e,i]),T.useEffect(()=>{if(a&&a!=="STREAMING"){const U=On.getState().activeStreamBuffers[e]??"",se=On.getState().activeReasoningBuffers[e]??"";o(U),u(se),_.current&&(cancelAnimationFrame(_.current),_.current=null)}},[a,e]);const{dbProviderConfigs:C,getAllAvailableModelDefsForProvider:k}=Un(sn(U=>({dbProviderConfigs:U.dbProviderConfigs,getAllAvailableModelDefsForProvider:U.getAllAvailableModelDefsForProvider}))),I=T.useMemo(()=>{var J;const U=(J=r==null?void 0:r.metadata)==null?void 0:J.modelId;if(!U)return"Loading Model...";const{providerId:se,modelId:ie}=Rc(U);if(!se||!ie)return U;const re=C.find(Q=>Q.id===se),X=(re==null?void 0:re.name)??se,q=k(se).find(Q=>Q.id===ie);return`${(q==null?void 0:q.name)??ie} (${X})`},[(K=r==null?void 0:r.metadata)==null?void 0:K.modelId,C,k]),j=T.useCallback(()=>h(U=>!U),[]),N=T.useCallback(()=>g(U=>!U),[]),P=T.useCallback(async()=>{if(l)try{await navigator.clipboard.writeText(l),b(!0),qe.success("Reasoning copied!"),setTimeout(()=>b(!1),1500)}catch{qe.error("Failed to copy reasoning.")}},[l]),L=T.useCallback(async()=>{if(s)try{await navigator.clipboard.writeText(s),x(!0),qe.success("Response copied!"),setTimeout(()=>x(!1),1500)}catch{qe.error("Failed to copy response.")}},[s]);if(!r)return p.jsxs("div",{className:xt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[p.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsx("div",{className:"h-16 bg-muted rounded w-full"})]})]});const H=()=>{t&&t(e)},M=s&&s.trim().length>0||l&&l.trim().length>0;return p.jsxs("div",{className:xt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&p.jsx(VN,{turnData:r.prompt,timestamp:r.startedAt,isAssistantComplete:!1}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:xt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(F8,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsx("div",{className:"flex flex-col min-w-0",children:p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",I,")"]}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[s&&p.jsx(Cn,{tooltipText:"Copy Response",onClick:L,"aria-label":"Copy assistant response",icon:w?p.jsx(Ga,{className:"text-green-500"}):p.jsx(gp,{}),className:"h-5 w-5"}),M&&p.jsx(Cn,{tooltipText:m?"Unfold":"Fold",onClick:N,"aria-label":m?"Unfold response":"Fold response",icon:m?p.jsx(_o,{}):p.jsx(yc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]})})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:"Streaming..."})})]}),!m&&p.jsxs(p.Fragment,{children:[l&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:j,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(Af,{className:"h-3.5 w-3.5"})," Reasoning (Streaming)"]}),p.jsxs("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Cn,{tooltipText:"Copy Reasoning",onClick:U=>{U.stopPropagation(),P()},"aria-label":"Copy reasoning",icon:v?p.jsx(Ga,{className:"text-green-500"}):p.jsx(gp,{}),className:"h-5 w-5 text-muted-foreground"}),p.jsx(Cn,{tooltipText:d?"Show Reasoning":"Hide Reasoning",onClick:U=>{U.stopPropagation(),j()},"aria-label":d?"Show reasoning":"Hide reasoning",icon:d?p.jsx(_o,{}):p.jsx(yc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]})]}),!d&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:l})]}),p.jsx(zme,{markdownContent:s,isStreaming:!0})]}),m&&p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:N,children:[l?"[Reasoning] ":"",s&&typeof s=="string"?`"${s.substring(0,80)}${s.length>80?"...":""}"`:"[Streaming...]"]})]}),t&&p.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200",children:p.jsx(Ume,{onStop:H,"aria-label":"Stop Generation"})})]})});gk.displayName="StreamingInteractionCard";var Vme=T.createContext(void 0);function dm(e){const t=T.useContext(Vme);return e||t||"ltr"}function Z0(e,[t,n]){return Math.min(n,Math.max(t,e))}function Hme(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var HN="ScrollArea",[f7,Z3e]=wi(HN),[qme,to]=f7(HN),h7=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,l]=T.useState(null),[u,d]=T.useState(null),[h,m]=T.useState(null),[g,v]=T.useState(null),[b,w]=T.useState(null),[x,_]=T.useState(0),[E,C]=T.useState(0),[k,I]=T.useState(!1),[j,N]=T.useState(!1),P=Nn(t,H=>l(H)),L=dm(a);return p.jsx(qme,{scope:n,type:r,dir:L,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:I,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:j,onScrollbarYEnabledChange:N,onCornerWidthChange:_,onCornerHeightChange:C,children:p.jsx(an.div,{dir:L,...s,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});h7.displayName=HN;var p7="ScrollAreaViewport",m7=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,s=to(p7,n),o=T.useRef(null),l=Nn(t,o,s.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),p.jsx(an.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});m7.displayName=p7;var Tl="ScrollAreaScrollbar",g7=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=to(Tl,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o=e.orientation==="horizontal";return T.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),a.type==="hover"?p.jsx(Gme,{...r,ref:t,forceMount:n}):a.type==="scroll"?p.jsx(Wme,{...r,ref:t,forceMount:n}):a.type==="auto"?p.jsx(y7,{...r,ref:t,forceMount:n}):a.type==="always"?p.jsx(qN,{...r,ref:t}):null});g7.displayName=Tl;var Gme=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=to(Tl,e.__scopeScrollArea),[i,s]=T.useState(!1);return T.useEffect(()=>{const o=a.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),p.jsx(Za,{present:n||i,children:p.jsx(y7,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Wme=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=to(Tl,e.__scopeScrollArea),i=e.orientation==="horizontal",s=y_(()=>l("SCROLL_END"),100),[o,l]=Hme("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,a.scrollHideDelay,l]),T.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const g=u[d];h!==g&&(l("SCROLL"),s()),h=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,l,s]),p.jsx(Za,{present:n||o!=="hidden",children:p.jsx(qN,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:qt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:qt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),y7=T.forwardRef((e,t)=>{const n=to(Tl,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,s]=T.useState(!1),o=e.orientation==="horizontal",l=y_(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?u:d)}},10);return Lp(n.viewport,l),Lp(n.content,l),p.jsx(Za,{present:r||i,children:p.jsx(qN,{"data-state":i?"visible":"hidden",...a,ref:t})})}),qN=T.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=to(Tl,e.__scopeScrollArea),i=T.useRef(null),s=T.useRef(0),[o,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=_7(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:m=>s.current=m};function h(m,g){return Qme(m,s.current,o,g)}return n==="horizontal"?p.jsx(Kme,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=WM(m,o,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?p.jsx(Zme,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=WM(m,o);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),Kme=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=to(Tl,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),u=Nn(t,l,i.onScrollbarXChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(v7,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":g_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),E7(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Kx(s.paddingLeft),paddingEnd:Kx(s.paddingRight)}})}})}),Zme=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=to(Tl,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),u=Nn(t,l,i.onScrollbarYChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(v7,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":g_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),E7(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Kx(s.paddingTop),paddingEnd:Kx(s.paddingBottom)}})}})}),[Yme,b7]=f7(Tl),v7=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,g=to(Tl,n),[v,b]=T.useState(null),w=Nn(t,P=>b(P)),x=T.useRef(null),_=T.useRef(""),E=g.viewport,C=r.content-r.viewport,k=Ua(d),I=Ua(l),j=y_(h,10);function N(P){if(x.current){const L=P.clientX-x.current.left,H=P.clientY-x.current.top;u({x:L,y:H})}}return T.useEffect(()=>{const P=L=>{const H=L.target;(v==null?void 0:v.contains(H))&&k(L,C)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[E,v,C,k]),T.useEffect(I,[r,I]),Lp(v,j),Lp(g.content,j),p.jsx(Yme,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ua(i),onThumbPointerUp:Ua(s),onThumbPositionChange:I,onThumbPointerDown:Ua(o),children:p.jsx(an.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:qt(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),x.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),N(P))}),onPointerMove:qt(e.onPointerMove,N),onPointerUp:qt(e.onPointerUp,P=>{const L=P.target;L.hasPointerCapture(P.pointerId)&&L.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Wx="ScrollAreaThumb",w7=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=b7(Wx,e.__scopeScrollArea);return p.jsx(Za,{present:n||a.hasThumb,children:p.jsx(Xme,{ref:t,...r})})}),Xme=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=to(Wx,n),s=b7(Wx,n),{onThumbPositionChange:o}=s,l=Nn(t,h=>s.onThumbChange(h)),u=T.useRef(void 0),d=y_(()=>{u.current&&(u.current(),u.current=void 0)},100);return T.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!u.current){const g=ege(h,o);u.current=g,o()}};return o(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,o]),p.jsx(an.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:qt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;s.onThumbPointerDown({x:v,y:b})}),onPointerUp:qt(e.onPointerUp,s.onThumbPointerUp)})});w7.displayName=Wx;var GN="ScrollAreaCorner",x7=T.forwardRef((e,t)=>{const n=to(GN,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(Jme,{...e,ref:t}):null});x7.displayName=GN;var Jme=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=to(GN,n),[i,s]=T.useState(0),[o,l]=T.useState(0),u=!!(i&&o);return Lp(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),Lp(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),s(d)}),u?p.jsx(an.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Kx(e){return e?parseInt(e,10):0}function _7(e,t){const n=e/t;return isNaN(n)?0:n}function g_(e){const t=_7(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Qme(e,t,n,r="ltr"){const a=g_(n),i=a/2,s=t||i,o=a-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return S7([l,u],h)(e)}function WM(e,t,n="ltr"){const r=g_(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-r,l=n==="ltr"?[0,s]:[s*-1,0],u=Z0(e,l);return S7([0,s],[0,o])(u)}function S7(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function E7(e,t){return e>0&&e<t}var ege=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,o=n.top!==i.top;(s||o)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function y_(e,t){const n=Ua(e),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Lp(e,t){const n=Ua(t);ai(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var tge=h7,nge=m7,rge=x7;function wl({className:e,children:t,...n}){return p.jsxs(tge,{"data-slot":"scroll-area",className:xt("relative",e),...n,children:[p.jsx(nge,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),p.jsx(age,{}),p.jsx(rge,{})]})}function age({className:e,orientation:t="vertical",...n}){return p.jsx(g7,{"data-slot":"scroll-area-scrollbar",orientation:t,className:xt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:p.jsx(w7,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function cr({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:xt("bg-accent animate-pulse rounded-md",e),...t})}const ige=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})};function C7({className:e,...t}){return p.jsx("div",{"data-slot":"card",className:xt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function T7({className:e,...t}){return p.jsx("div",{"data-slot":"card-header",className:xt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function k7({className:e,...t}){return p.jsx("div",{"data-slot":"card-title",className:xt("leading-none font-semibold",e),...t})}function sge({className:e,...t}){return p.jsx("div",{"data-slot":"card-description",className:xt("text-muted-foreground text-sm",e),...t})}function A7({className:e,...t}){return p.jsx("div",{"data-slot":"card-content",className:xt("px-6",e),...t})}const Ji=Ys(Xs(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:t=>{e(n=>{n.isVfsModalOpen=t??!n.isVfsModalOpen})}}))),oge=({title:e,description:t,icon:n,onClick:r})=>p.jsxs(C7,{className:"hover:border-primary/50 hover:bg-muted/30 transition-all cursor-pointer group",onClick:r,children:[p.jsxs(T7,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsxs(k7,{className:"text-sm font-medium flex items-center gap-2",children:[n," ",e]}),p.jsx(FK,{className:"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform"})]}),p.jsx(A7,{children:p.jsx("p",{className:"text-xs text-muted-foreground",children:t})})]}),N7=()=>{const{toggleChatControlPanel:e,setInitialSettingsTabs:t,toggleVfsModal:n}=Ji(sn(s=>({toggleChatControlPanel:s.toggleChatControlPanel,setInitialSettingsTabs:s.setInitialSettingsTabs,toggleVfsModal:s.toggleVfsModal}))),r=(s,o)=>{t(s,o),e("settingsModal",!0)},a=()=>{n(!0)},i=[{title:"Configure Theme",description:"Customize colors, fonts, and code block appearance.",icon:p.jsx(rY,{className:"h-4 w-4 text-purple-500"}),onClick:()=>r("theme")},{title:"Manage Rules & Tags",description:"Define reusable prompt snippets and organize them.",icon:p.jsx(CT,{className:"h-4 w-4 text-blue-500"}),onClick:()=>r("rules-tags")},{title:"Add Files",description:"Upload or manage files in the virtual filesystem.",icon:p.jsx(pA,{className:"h-4 w-4 text-cyan-500"}),onClick:a},{title:"Add Provider",description:"Connect to AI services like OpenAI, Ollama, etc.",icon:p.jsx(Ww,{className:"h-4 w-4 text-green-500"}),onClick:()=>r("providers","providers-config")},{title:"Add API Key",description:"Store API keys securely in your browser.",icon:p.jsx(i0,{className:"h-4 w-4 text-amber-500"}),onClick:()=>r("providers","api-keys")}];return p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl w-full pt-4",children:i.map(s=>p.jsx(oge,{title:s.title,description:s.description,icon:s.icon,onClick:s.onClick},s.title))})},KM=()=>p.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[p.jsx(ige,{className:"h-16 w-16 text-muted-foreground mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),p.jsx("p",{className:"text-muted-foreground max-w-md mb-8",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat. You can also explore these setup options:"}),p.jsx(N7,{})]}),WN=T.createContext({});function KN(e){const t=T.useRef(null);return t.current===null&&(t.current=e()),t.current}const ZN=typeof window<"u",R7=ZN?T.useLayoutEffect:T.useEffect,b_=T.createContext(null),YN=T.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class lge extends T.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function cge({children:e,isPresent:t,anchorX:n}){const r=T.useId(),a=T.useRef(null),i=T.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=T.useContext(YN);return T.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:d,right:h}=i.current;if(t||!a.current||!o||!l)return;const m=n==="left"?`left: ${d}`:`right: ${h}`;a.current.dataset.motionPopId=r;const g=document.createElement("style");return s&&(g.nonce=s),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${m}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.contains(g)&&document.head.removeChild(g)}},[t]),p.jsx(lge,{isPresent:t,childRef:a,sizeRef:i,children:T.cloneElement(e,{ref:a})})}const uge=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:s,anchorX:o})=>{const l=KN(dge),u=T.useId();let d=!0,h=T.useMemo(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:a,onExitComplete:m=>{l.set(m,!0);for(const g of l.values())if(!g)return;r&&r()},register:m=>(l.set(m,!1),()=>l.delete(m))}),[n,l,r]);return i&&d&&(h={...h}),T.useMemo(()=>{l.forEach((m,g)=>l.set(g,!1))},[n]),T.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),s==="popLayout"&&(e=p.jsx(cge,{isPresent:n,anchorX:o,children:e})),p.jsx(b_.Provider,{value:h,children:e})};function dge(){return new Map}function I7(e=!0){const t=T.useContext(b_);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=T.useId();T.useEffect(()=>{if(e)return a(i)},[e]);const s=T.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const yw=e=>e.key||"";function ZM(e){const t=[];return T.Children.forEach(e,n=>{T.isValidElement(n)&&t.push(n)}),t}const fge=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:s=!1,anchorX:o="left"})=>{const[l,u]=I7(s),d=T.useMemo(()=>ZM(e),[e]),h=s&&!l?[]:d.map(yw),m=T.useRef(!0),g=T.useRef(d),v=KN(()=>new Map),[b,w]=T.useState(d),[x,_]=T.useState(d);R7(()=>{m.current=!1,g.current=d;for(let k=0;k<x.length;k++){const I=yw(x[k]);h.includes(I)?v.delete(I):v.get(I)!==!0&&v.set(I,!1)}},[x,h.length,h.join("-")]);const E=[];if(d!==b){let k=[...d];for(let I=0;I<x.length;I++){const j=x[I],N=yw(j);h.includes(N)||(k.splice(I,0,j),E.push(j))}return i==="wait"&&E.length&&(k=E),_(ZM(k)),w(d),null}const{forceRender:C}=T.useContext(WN);return p.jsx(p.Fragment,{children:x.map(k=>{const I=yw(k),j=s&&!l?!1:d===x||h.includes(I),N=()=>{if(v.has(I))v.set(I,!0);else return;let P=!0;v.forEach(L=>{L||(P=!1)}),P&&(C==null||C(),_(g.current),s&&(u==null||u()),r&&r())};return p.jsx(uge,{isPresent:j,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,onExitComplete:j?void 0:N,anchorX:o,children:k},I)})})},bw=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],YM={value:null};function hge(e,t){let n=new Set,r=new Set,a=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(h){s.has(h)&&(d.schedule(h),e()),l++,h(o)}const d={schedule:(h,m=!1,g=!1)=>{const b=g&&a?n:r;return m&&s.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(o=h,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(u),t&&YM.value&&YM.value.frameloop[t].push(l),l=0,n.clear(),a=!1,i&&(i=!1,d.process(h))}};return d}const kc={},pge=40;function j7(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=bw.reduce((E,C)=>(E[C]=hge(i,t?C:void 0),E),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:h,preRender:m,render:g,postRender:v}=s,b=()=>{const E=kc.useManualTiming?a.timestamp:performance.now();n=!1,kc.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(E-a.timestamp,pge),1)),a.timestamp=E,a.isProcessing=!0,o.process(a),l.process(a),u.process(a),d.process(a),h.process(a),m.process(a),g.process(a),v.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(b))},w=()=>{n=!0,r=!0,a.isProcessing||e(b)};return{schedule:bw.reduce((E,C)=>{const k=s[C];return E[C]=(I,j=!1,N=!1)=>(n||w(),k.schedule(I,j,N)),E},{}),cancel:E=>{for(let C=0;C<bw.length;C++)s[bw[C]].cancel(E)},state:a,steps:s}}const Gs=e=>e,{schedule:ea,cancel:Qu,state:ni,steps:IC}=j7(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gs,!0),D7=T.createContext({strict:!1}),XM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bp={};for(const e in XM)Bp[e]={isEnabled:t=>XM[e].some(n=>!!t[n])};function mge(e){for(const t in e)Bp[t]={...Bp[t],...e[t]}}const gge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zx(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||gge.has(e)}let M7=e=>!Zx(e);function yge(e){e&&(M7=t=>t.startsWith("on")?!Zx(t):e(t))}try{yge(require("@emotion/is-prop-valid").default)}catch{}function bge(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(M7(a)||n===!0&&Zx(a)||!t&&!Zx(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}function vge(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const v_=T.createContext({});function w_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Y0(e){return typeof e=="string"||Array.isArray(e)}const XN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],JN=["initial",...XN];function x_(e){return w_(e.animate)||JN.some(t=>Y0(e[t]))}function O7(e){return!!(x_(e)||e.variants)}function wge(e,t){if(x_(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Y0(n)?n:void 0,animate:Y0(r)?r:void 0}}return e.inherit!==!1?t:{}}function xge(e){const{initial:t,animate:n}=wge(e,T.useContext(v_));return T.useMemo(()=>({initial:t,animate:n}),[JM(t),JM(n)])}function JM(e){return Array.isArray(e)?e.join(" "):e}const _ge=Symbol.for("motionComponentSymbol");function Qh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Sge(e,t,n){return T.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Qh(n)&&(n.current=r))},[t])}const QN=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ege="framerAppearId",P7="data-"+QN(Ege),F7=T.createContext({}),{schedule:eR}=j7(queueMicrotask,!1);function Cge(e,t,n,r,a){var b,w;const{visualElement:i}=T.useContext(v_),s=T.useContext(D7),o=T.useContext(b_),l=T.useContext(YN).reducedMotion,u=T.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,h=T.useContext(F7);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&Tge(u.current,n,a,h);const m=T.useRef(!1);T.useInsertionEffect(()=>{d&&m.current&&d.update(n,o)});const g=n[P7],v=T.useRef(!!g&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,g))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,g)));return R7(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),eR.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),T.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,g)}),v.current=!1))}),d}function Tge(e,t,n,r){const{layoutId:a,layout:i,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:L7(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!s||o&&Qh(o),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function L7(e){if(e)return e.options.allowProjection!==!1?e.projection:L7(e.parent)}let tR=()=>{};function kge({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:a}){e&&mge(e);function i(o,l){let u;const d={...T.useContext(YN),...o,layoutId:Age(o)},{isStatic:h}=d,m=xge(o),g=r(o,h);if(!h&&ZN){Nge();const v=Rge(d);u=v.MeasureLayout,m.visualElement=Cge(a,g,d,t,v.ProjectionNode)}return p.jsxs(v_.Provider,{value:m,children:[u&&m.visualElement?p.jsx(u,{visualElement:m.visualElement,...d}):null,n(a,o,Sge(g,m.visualElement,l),g,h,m.visualElement)]})}i.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const s=T.forwardRef(i);return s[_ge]=a,s}function Age({layoutId:e}){const t=T.useContext(WN).id;return t&&e!==void 0?t+"-"+e:e}function Nge(e,t){T.useContext(D7).strict}function Rge(e){const{drag:t,layout:n}=Bp;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const B7=e=>t=>typeof t=="string"&&t.startsWith(e),nR=B7("--"),Ige=B7("var(--"),rR=e=>Ige(e)?jge.test(e.split("/*")[0].trim()):!1,jge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,X0={};function Dge(e){for(const t in e)X0[t]=e[t],nR(t)&&(X0[t].isCSSVariable=!0)}const fm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hm=new Set(fm);function $7(e,{layout:t,layoutId:n}){return hm.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!X0[e]||e==="opacity")}const mi=e=>!!(e&&e.getVelocity),z7=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ac=(e,t,n)=>n>t?t:n<e?e:n,pm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},J0={...pm,transform:e=>Ac(0,1,e)},vw={...pm,default:1},QM={...pm,transform:Math.round},nb=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Su=nb("deg"),fl=nb("%"),En=nb("px"),Mge=nb("vh"),Oge=nb("vw"),eO={...fl,parse:e=>fl.parse(e)/100,transform:e=>fl.transform(e*100)},Pge={rotate:Su,rotateX:Su,rotateY:Su,rotateZ:Su,scale:vw,scaleX:vw,scaleY:vw,scaleZ:vw,skew:Su,skewX:Su,skewY:Su,distance:En,translateX:En,translateY:En,translateZ:En,x:En,y:En,z:En,perspective:En,transformPerspective:En,opacity:J0,originX:eO,originY:eO,originZ:En},aR={borderWidth:En,borderTopWidth:En,borderRightWidth:En,borderBottomWidth:En,borderLeftWidth:En,borderRadius:En,radius:En,borderTopLeftRadius:En,borderTopRightRadius:En,borderBottomRightRadius:En,borderBottomLeftRadius:En,width:En,maxWidth:En,height:En,maxHeight:En,top:En,right:En,bottom:En,left:En,padding:En,paddingTop:En,paddingRight:En,paddingBottom:En,paddingLeft:En,margin:En,marginTop:En,marginRight:En,marginBottom:En,marginLeft:En,backgroundPositionX:En,backgroundPositionY:En,...Pge,zIndex:QM,fillOpacity:J0,strokeOpacity:J0,numOctaves:QM},Fge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Lge=fm.length;function Bge(e,t,n){let r="",a=!0;for(let i=0;i<Lge;i++){const s=fm[i],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=z7(o,aR[s]);if(!l){a=!1;const d=Fge[s]||s;r+=`${d}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function iR(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if(hm.has(l)){s=!0;continue}else if(nR(l)){a[l]=u;continue}else{const d=z7(u,aR[l]);l.startsWith("origin")?(o=!0,i[l]=d):r[l]=d}}if(t.transform||(s||n?r.transform=Bge(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${u} ${d}`}}const sR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function U7(e,t,n){for(const r in t)!mi(t[r])&&!$7(r,n)&&(e[r]=t[r])}function $ge({transformTemplate:e},t){return T.useMemo(()=>{const n=sR();return iR(n,t,e),Object.assign({},n.vars,n.style)},[t])}function zge(e,t){const n=e.style||{},r={};return U7(r,n,e),Object.assign(r,$ge(e,t)),r}function Uge(e,t){const n={},r=zge(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Vge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oR(e){return typeof e!="string"||e.includes("-")?!1:!!(Vge.indexOf(e)>-1||/[A-Z]/u.test(e))}const Hge={offset:"stroke-dashoffset",array:"stroke-dasharray"},qge={offset:"strokeDashoffset",array:"strokeDasharray"};function Gge(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?Hge:qge;e[i.offset]=En.transform(-r);const s=En.transform(t),o=En.transform(n);e[i.array]=`${s} ${o}`}function V7(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:s=0,...o},l,u,d){if(iR(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&Gge(h,a,i,s,!1)}const H7=()=>({...sR(),attrs:{}}),q7=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Wge(e,t,n,r){const a=T.useMemo(()=>{const i=H7();return V7(i,t,q7(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};U7(i,e.style,e),a.style={...i,...a.style}}return a}function Kge(e=!1){return(n,r,a,{latestValues:i},s)=>{const l=(oR(n)?Wge:Uge)(r,i,s,n),u=bge(r,typeof n=="string",e),d=n!==T.Fragment?{...u,...l,ref:a}:{},{children:h}=r,m=T.useMemo(()=>mi(h)?h.get():h,[h]);return T.createElement(n,{...d,children:m})}}function tO(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function lR(e,t,n,r){if(typeof t=="function"){const[a,i]=tO(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=tO(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function $w(e){return mi(e)?e.get():e}function Zge({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:Yge(n,r,a,e),renderState:t()}}const G7=e=>(t,n)=>{const r=T.useContext(v_),a=T.useContext(b_),i=()=>Zge(e,t,r,a);return n?i():KN(i)};function Yge(e,t,n,r){const a={},i=r(e,{});for(const m in i)a[m]=$w(i[m]);let{initial:s,animate:o}=e;const l=x_(e),u=O7(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?o:s;if(h&&typeof h!="boolean"&&!w_(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const v=lR(e,m[g]);if(v){const{transitionEnd:b,transition:w,...x}=v;for(const _ in x){let E=x[_];if(Array.isArray(E)){const C=d?E.length-1:0;E=E[C]}E!==null&&(a[_]=E)}for(const _ in b)a[_]=b[_]}}}return a}function cR(e,t,n){var i;const{style:r}=e,a={};for(const s in r)(mi(r[s])||t.style&&mi(t.style[s])||$7(s,e)||((i=n==null?void 0:n.getValue(s))==null?void 0:i.liveStyle)!==void 0)&&(a[s]=r[s]);return a}const Xge={useVisualState:G7({scrapeMotionValuesFromProps:cR,createRenderState:sR})};function W7(e,t,n){const r=cR(e,t,n);for(const a in e)if(mi(e[a])||mi(t[a])){const i=fm.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const Jge={useVisualState:G7({scrapeMotionValuesFromProps:W7,createRenderState:H7})};function Qge(e,t){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const s={...oR(r)?Jge:Xge,preloadedFeatures:e,useRender:Kge(a),createVisualElement:t,Component:r};return kge(s)}}function Q0(e,t,n){const r=e.getProps();return lR(r,t,n!==void 0?n:r.custom,e)}const yk=e=>Array.isArray(e);let zw;function e0e(){zw=void 0}const Ki={now:()=>(zw===void 0&&Ki.set(ni.isProcessing||kc.useManualTiming?ni.timestamp:performance.now()),zw),set:e=>{zw=e,queueMicrotask(e0e)}};function uR(e,t){e.indexOf(t)===-1&&e.push(t)}function dR(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class fR{constructor(){this.subscriptions=[]}add(t){return uR(this.subscriptions,t),()=>dR(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const s=this.subscriptions[i];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function K7(e,t){return t?e*(1e3/t):0}const nO=30,t0e=e=>!isNaN(parseFloat(e));class n0e{constructor(t,n={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{var s,o;const i=Ki.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current)),a&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ki.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=t0e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new fR);const r=this.events[t].add(n);return t==="change"?()=>{r(),ea.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Ki.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>nO)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,nO);return K7(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t;(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ey(e,t){return new n0e(e,t)}function r0e(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ey(n))}function a0e(e){return yk(e)?e[e.length-1]||0:e}function i0e(e,t){const n=Q0(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const s in i){const o=a0e(i[s]);r0e(e,s,o)}}function s0e(e){return!!(mi(e)&&e.add)}function bk(e,t){const n=e.getValue("willChange");if(s0e(n))return n.add(t);if(!n&&kc.WillChange){const r=new kc.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Z7(e){return e.props[P7]}const o0e=e=>e!==null;function l0e(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(o0e),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return a[i]}const c0e={type:"spring",stiffness:500,damping:25,restSpeed:10},u0e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),d0e={type:"keyframes",duration:.8},f0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},h0e=(e,{keyframes:t})=>t.length>2?d0e:hm.has(e)?e.startsWith("scale")?u0e(t[1]):c0e:f0e;function p0e({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function hR(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const hl=e=>e*1e3,pl=e=>e/1e3,Yg=e=>Math.round(e*1e5)/1e5,pR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function m0e(e){return e==null}const g0e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,mR=(e,t)=>n=>!!(typeof n=="string"&&g0e.test(n)&&n.startsWith(e)||t&&!m0e(n)&&Object.prototype.hasOwnProperty.call(n,t)),Y7=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,s,o]=r.match(pR);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},y0e=e=>Ac(0,255,e),jC={...pm,transform:e=>Math.round(y0e(e))},af={test:mR("rgb","red"),parse:Y7("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+jC.transform(e)+", "+jC.transform(t)+", "+jC.transform(n)+", "+Yg(J0.transform(r))+")"};function b0e(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const vk={test:mR("#"),parse:b0e,transform:af.transform},ep={test:mR("hsl","hue"),parse:Y7("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+fl.transform(Yg(t))+", "+fl.transform(Yg(n))+", "+Yg(J0.transform(r))+")"},di={test:e=>af.test(e)||vk.test(e)||ep.test(e),parse:e=>af.test(e)?af.parse(e):ep.test(e)?ep.parse(e):vk.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?af.transform(e):ep.transform(e)},v0e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function w0e(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(pR))==null?void 0:t.length)||0)+(((n=e.match(v0e))==null?void 0:n.length)||0)>0}const X7="number",J7="color",x0e="var",_0e="var(",rO="${}",S0e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ty(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const o=t.replace(S0e,l=>(di.test(l)?(r.color.push(i),a.push(J7),n.push(di.parse(l))):l.startsWith(_0e)?(r.var.push(i),a.push(x0e),n.push(l)):(r.number.push(i),a.push(X7),n.push(parseFloat(l))),++i,rO)).split(rO);return{values:n,split:o,indexes:r,types:a}}function Q7(e){return ty(e).values}function e$(e){const{split:t,types:n}=ty(e),r=t.length;return a=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],a[s]!==void 0){const o=n[s];o===X7?i+=Yg(a[s]):o===J7?i+=di.transform(a[s]):i+=a[s]}return i}}const E0e=e=>typeof e=="number"?0:e;function C0e(e){const t=Q7(e);return e$(e)(t.map(E0e))}const ed={test:w0e,parse:Q7,createTransformer:e$,getAnimatableNone:C0e};function DC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function T0e({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,s=0;if(!t)a=i=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;a=DC(l,o,e+1/3),i=DC(l,o,e),s=DC(l,o,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:r}}function Yx(e,t){return n=>n>0?t:e}const Jr=(e,t,n)=>e+(t-e)*n,MC=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},k0e=[vk,af,ep],A0e=e=>k0e.find(t=>t.test(e));function aO(e){const t=A0e(e);if(!t)return!1;let n=t.parse(e);return t===ep&&(n=T0e(n)),n}const iO=(e,t)=>{const n=aO(e),r=aO(t);if(!n||!r)return Yx(e,t);const a={...n};return i=>(a.red=MC(n.red,r.red,i),a.green=MC(n.green,r.green,i),a.blue=MC(n.blue,r.blue,i),a.alpha=Jr(n.alpha,r.alpha,i),af.transform(a))},wk=new Set(["none","hidden"]);function N0e(e,t){return wk.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}const R0e=(e,t)=>n=>t(e(n)),rb=(...e)=>e.reduce(R0e);function I0e(e,t){return n=>Jr(e,t,n)}function gR(e){return typeof e=="number"?I0e:typeof e=="string"?rR(e)?Yx:di.test(e)?iO:M0e:Array.isArray(e)?t$:typeof e=="object"?di.test(e)?iO:j0e:Yx}function t$(e,t){const n=[...e],r=n.length,a=e.map((i,s)=>gR(i)(i,t[s]));return i=>{for(let s=0;s<r;s++)n[s]=a[s](i);return n}}function j0e(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=gR(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function D0e(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],s=e.indexes[i][r[i]],o=e.values[s]??0;n[a]=o,r[i]++}return n}const M0e=(e,t)=>{const n=ed.createTransformer(t),r=ty(e),a=ty(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?wk.has(e)&&!a.values.length||wk.has(t)&&!r.values.length?N0e(e,t):rb(t$(D0e(r,a),a.values),n):Yx(e,t)};function n$(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Jr(e,t,n):gR(e)(e,t)}const O0e=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ea.update(t,!0),stop:()=>Qu(t),now:()=>ni.isProcessing?ni.timestamp:Ki.now()}},r$=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=e(i/(a-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Xx=2e4;function yR(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Xx;)t+=n,r=e.next(t);return t>=Xx?1/0:t}function P0e(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(yR(r),Xx);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:pl(a)}}const F0e=5;function a$(e,t,n){const r=Math.max(t-F0e,0);return K7(n-e(r),t-r)}const ra={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sO=.001;function L0e({duration:e=ra.duration,bounce:t=ra.bounce,velocity:n=ra.velocity,mass:r=ra.mass}){let a,i,s=1-t;s=Ac(ra.minDamping,ra.maxDamping,s),e=Ac(ra.minDuration,ra.maxDuration,pl(e)),s<1?(a=u=>{const d=u*s,h=d*e,m=d-n,g=xk(u,s),v=Math.exp(-h);return sO-m/g*v},i=u=>{const h=u*s*e,m=h*n+n,g=Math.pow(s,2)*Math.pow(u,2)*e,v=Math.exp(-h),b=xk(Math.pow(u,2),s);return(-a(u)+sO>0?-1:1)*((m-g)*v)/b}):(a=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-.001+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const o=5/e,l=$0e(a,i,o);if(e=hl(e),isNaN(l))return{stiffness:ra.stiffness,damping:ra.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const B0e=12;function $0e(e,t,n){let r=n;for(let a=1;a<B0e;a++)r=r-e(r)/t(r);return r}function xk(e,t){return e*Math.sqrt(1-t*t)}const z0e=["duration","bounce"],U0e=["stiffness","damping","mass"];function oO(e,t){return t.some(n=>e[n]!==void 0)}function V0e(e){let t={velocity:ra.velocity,stiffness:ra.stiffness,damping:ra.damping,mass:ra.mass,isResolvedFromDuration:!1,...e};if(!oO(e,U0e)&&oO(e,z0e))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*Ac(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:ra.mass,stiffness:a,damping:i}}else{const n=L0e(e);t={...t,...n,mass:ra.mass},t.isResolvedFromDuration=!0}return t}function Jx(e=ra.visualDuration,t=ra.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:g}=V0e({...n,velocity:-pl(n.velocity||0)}),v=m||0,b=u/(2*Math.sqrt(l*d)),w=s-i,x=pl(Math.sqrt(l/d)),_=Math.abs(w)<5;r||(r=_?ra.restSpeed.granular:ra.restSpeed.default),a||(a=_?ra.restDelta.granular:ra.restDelta.default);let E;if(b<1){const k=xk(x,b);E=I=>{const j=Math.exp(-b*x*I);return s-j*((v+b*x*w)/k*Math.sin(k*I)+w*Math.cos(k*I))}}else if(b===1)E=k=>s-Math.exp(-x*k)*(w+(v+x*w)*k);else{const k=x*Math.sqrt(b*b-1);E=I=>{const j=Math.exp(-b*x*I),N=Math.min(k*I,300);return s-j*((v+b*x*w)*Math.sinh(N)+k*w*Math.cosh(N))/k}}const C={calculatedDuration:g&&h||null,next:k=>{const I=E(k);if(g)o.done=k>=h;else{let j=k===0?v:0;b<1&&(j=k===0?hl(v):a$(E,k,I));const N=Math.abs(j)<=r,P=Math.abs(s-I)<=a;o.done=N&&P}return o.value=o.done?s:I,o},toString:()=>{const k=Math.min(yR(C),Xx),I=r$(j=>C.next(k*j).value,k,30);return k+"ms "+I},toTransition:()=>{}};return C}Jx.applyToOptions=e=>{const t=P0e(e,100,Jx);return e.ease=t.ease,e.duration=hl(t.duration),e.type="keyframes",e};function _k({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},g=N=>o!==void 0&&N<o||l!==void 0&&N>l,v=N=>o===void 0?l:l===void 0||Math.abs(o-N)<Math.abs(l-N)?o:l;let b=n*t;const w=h+b,x=s===void 0?w:s(w);x!==w&&(b=x-h);const _=N=>-b*Math.exp(-N/r),E=N=>x+_(N),C=N=>{const P=_(N),L=E(N);m.done=Math.abs(P)<=u,m.value=m.done?x:L};let k,I;const j=N=>{g(m.value)&&(k=N,I=Jx({keyframes:[m.value,v(m.value)],velocity:a$(E,N,m.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:N=>{let P=!1;return!I&&k===void 0&&(P=!0,C(N),j(N)),k!==void 0&&N>=k?I.next(N-k):(!P&&C(N),m)}}}const ny=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};function H0e(e,t,n){const r=[],a=n||kc.mix||n$,i=e.length-1;for(let s=0;s<i;s++){let o=a(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||Gs:t;o=rb(l,o)}r.push(o)}return r}function q0e(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(tR(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=H0e(t,r,a),l=o.length,u=d=>{if(s&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=ny(e[h],e[h+1],d);return o[h](m)};return n?d=>u(Ac(e[0],e[i-1],d)):u}function G0e(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=ny(0,t,r);e.push(Jr(n,1,a))}}function W0e(e){const t=[0];return G0e(t,e.length-1),t}function K0e(e,t){return e.map(n=>n*t)}const i$=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Z0e=1e-7,Y0e=12;function X0e(e,t,n,r,a){let i,s,o=0;do s=t+(n-t)/2,i=i$(s,r,a)-e,i>0?n=s:t=s;while(Math.abs(i)>Z0e&&++o<Y0e);return s}function ab(e,t,n,r){if(e===t&&n===r)return Gs;const a=i=>X0e(i,0,1,e,n);return i=>i===0||i===1?i:i$(a(i),t,r)}const J0e=ab(.42,0,1,1),Q0e=ab(0,0,.58,1),s$=ab(.42,0,.58,1),eye=e=>Array.isArray(e)&&typeof e[0]!="number",o$=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,l$=e=>t=>1-e(1-t),c$=ab(.33,1.53,.69,.99),bR=l$(c$),u$=o$(bR),d$=e=>(e*=2)<1?.5*bR(e):.5*(2-Math.pow(2,-10*(e-1))),vR=e=>1-Math.sin(Math.acos(e)),f$=l$(vR),h$=o$(vR),p$=e=>Array.isArray(e)&&typeof e[0]=="number",tye={linear:Gs,easeIn:J0e,easeInOut:s$,easeOut:Q0e,circIn:vR,circInOut:h$,circOut:f$,backIn:bR,backInOut:u$,backOut:c$,anticipate:d$},nye=e=>typeof e=="string",lO=e=>{if(p$(e)){tR(e.length===4);const[t,n,r,a]=e;return ab(t,n,r,a)}else if(nye(e))return tye[e];return e};function rye(e,t){return e.map(()=>t||s$).splice(0,e.length-1)}function Xg({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=eye(r)?r.map(lO):lO(r),i={done:!1,value:t[0]},s=K0e(n&&n.length===t.length?n:W0e(t),e),o=q0e(s,t,{ease:Array.isArray(a)?a:rye(t,a)});return{calculatedDuration:e,next:l=>(i.value=o(l),i.done=l>=e,i)}}const aye=e=>e!==null;function wR(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(aye),o=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const iye={decay:_k,inertia:_k,tween:Xg,keyframes:Xg,spring:Jx};function m$(e){typeof e.type=="string"&&(e.type=iye[e.type])}class xR{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const sye=e=>e/100;class g$ extends xR{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;if(n&&n.updatedAt!==Ki.now()&&this.tick(Ki.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:r}=this.options;r&&r()},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;m$(t);const{type:n=Xg,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:s=0}=t;let{keyframes:o}=t;const l=n||Xg;l!==Xg&&typeof o[0]!="number"&&(this.mixKeyframes=rb(sye,n$(o[0],o[1])),o=[0,100]);const u=l({...t,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=yR(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:g,type:v,onUpdate:b,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?x<0:x>a;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let E=this.currentTime,C=r;if(h){const N=Math.min(this.currentTime,a)/o;let P=Math.floor(N),L=N%1;!L&&N>=1&&(L=1),L===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(m==="reverse"?(L=1-L,g&&(L-=g/o)):m==="mirror"&&(C=s)),E=Ac(0,1,L)*o}const k=_?{done:!1,value:d[0]}:C.next(E);i&&(k.value=i(k.value));let{done:I}=k;!_&&l!==null&&(I=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&I);return j&&v!==_k&&(k.value=wR(d,this.options,w,this.speed)),b&&b(k.value),j&&this.finish(),k}then(t,n){return this.finished.then(t,n)}get duration(){return pl(this.calculatedDuration)}get time(){return pl(this.currentTime)}set time(t){t=hl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ki.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=pl(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=O0e,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ki.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),t.observe(this)}}function oye(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const sf=e=>e*180/Math.PI,Sk=e=>{const t=sf(Math.atan2(e[1],e[0]));return Ek(t)},lye={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Sk,rotateZ:Sk,skewX:e=>sf(Math.atan(e[1])),skewY:e=>sf(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Ek=e=>(e=e%360,e<0&&(e+=360),e),cO=Sk,uO=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),dO=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),cye={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:uO,scaleY:dO,scale:e=>(uO(e)+dO(e))/2,rotateX:e=>Ek(sf(Math.atan2(e[6],e[5]))),rotateY:e=>Ek(sf(Math.atan2(-e[2],e[0]))),rotateZ:cO,rotate:cO,skewX:e=>sf(Math.atan(e[4])),skewY:e=>sf(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function fO(e){return e.includes("scale")?1:0}function Ck(e,t){if(!e||e==="none")return fO(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=cye,a=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=lye,a=o}if(!a)return fO(t);const i=r[t],s=a[1].split(",").map(dye);return typeof i=="function"?i(s):s[i]}const uye=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Ck(n,t)};function dye(e){return parseFloat(e.trim())}const hO=e=>e===pm||e===En,fye=new Set(["x","y","z"]),hye=fm.filter(e=>!fye.has(e));function pye(e){const t=[];return hye.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const ff={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ck(t,"x"),y:(e,{transform:t})=>Ck(t,"y")};ff.translateX=ff.x;ff.translateY=ff.y;const hf=new Set;let Tk=!1,kk=!1,Ak=!1;function y$(){if(kk){const e=Array.from(hf).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=pye(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,s])=>{var o;(o=r.getValue(i))==null||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}kk=!1,Tk=!1,hf.forEach(e=>e.complete(Ak)),hf.clear()}function b$(){hf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(kk=!0)})}function mye(){Ak=!0,b$(),y$(),Ak=!1}class _R{constructor(t,n,r,a,i,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(hf.add(this),Tk||(Tk=!0,ea.read(b$),ea.resolveKeyframes(y$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),s=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const o=r.readValue(n,s);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=s),a&&i===void 0&&a.set(t[0])}oye(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),hf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,hf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const gye=e=>e.startsWith("--");function yye(e,t,n){gye(t)?e.style.setProperty(t,n):e.style[t]=n}function SR(e){let t;return()=>(t===void 0&&(t=e()),t)}const bye=SR(()=>window.ScrollTimeline!==void 0),vye={};function wye(e,t){const n=SR(e);return()=>vye[t]??n()}const v$=wye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zg=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,pO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zg([0,.65,.55,1]),circOut:zg([.55,0,1,.45]),backIn:zg([.31,.01,.66,-.59]),backOut:zg([.33,1.53,.69,.99])};function w$(e,t){if(e)return typeof e=="function"?v$()?r$(e,t):"ease-out":p$(e)?zg(e):Array.isArray(e)?e.map(n=>w$(n,t)||pO.easeOut):pO[e]}function xye(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:s="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[t]:n};l&&(d.offset=l);const h=w$(o,a);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function x$(e){return typeof e=="function"&&"applyToOptions"in e}function _ye({type:e,...t}){return x$(e)&&v$()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Sye extends xR{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=t,tR(typeof t.type!="string");const u=_ye(t);this.animation=xye(n,r,a,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=wR(a,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):yye(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return pl(Number(t))}get time(){return pl(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=hl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&bye()?(this.animation.timeline=t,Gs):n(this)}}const _$={anticipate:d$,backInOut:u$,circInOut:h$};function Eye(e){return e in _$}function Cye(e){typeof e.ease=="string"&&Eye(e.ease)&&(e.ease=_$[e.ease])}const mO=10;class Tye extends Sye{constructor(t){Cye(t),m$(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new g$({...s,autoplay:!1}),l=hl(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-mO).value,o.sample(l).value,mO),o.stop()}}const gO=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ed.test(e)||e==="0")&&!e.startsWith("url("));function kye(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Aye(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],s=gO(a,t),o=gO(i,t);return!s||!o?!1:kye(e)||(n==="spring"||x$(n))&&r}const Nye=new Set(["opacity","clipPath","filter","transform"]),Rye=SR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Iye(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Rye()&&n&&Nye.has(n)&&(n!=="transform"||!l)&&!o&&!r&&a!=="mirror"&&i!==0&&s!=="inertia"}const jye=40;class Dye extends xR{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:s="loop",keyframes:o,name:l,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var b,w;this._animation?(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)):(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Ki.now();const m={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:s,name:l,motionValue:u,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||_R;this.keyframeResolver=new g(o,(b,w,x)=>this.onKeyframesResolved(b,w,m,!x),l,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:s,velocity:o,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Ki.now(),Aye(t,i,s,o)||((kc.instantAnimations||!l)&&(d==null||d(wR(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>jye?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},g=!u&&Iye(m)?new Tye({...m,element:m.motionValue.owner.current}):new g$(m);g.finished.then(()=>this.notifyFinished()).catch(Gs),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||mye(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const ER=(e,t,n,r={},a,i)=>s=>{const o=hR(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-hl(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:a};p0e(o)||Object.assign(d,h0e(e,d)),d.duration&&(d.duration=hl(d.duration)),d.repeatDelay&&(d.repeatDelay=hl(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(kc.instantAnimations||kc.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&t.get()!==void 0){const m=l0e(d.keyframes,o);if(m!==void 0){ea.update(()=>{d.onUpdate(m),d.onComplete()});return}}return new Dye(d)},S$=new Set(["width","height","top","left","right","bottom",...fm]);function Mye({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function E$(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...o}=t;r&&(i=r);const l=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const d in o){const h=e.getValue(d,e.latestValues[d]??null),m=o[d];if(m===void 0||u&&Mye(u,d))continue;const g={delay:n,...hR(i||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===v&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const x=Z7(e);if(x){const _=window.MotionHandoffAnimation(x,d,ea);_!==null&&(g.startTime=_,b=!0)}}bk(e,d),h.start(ER(d,h,m,e.shouldReduceMotion&&S$.has(d)?{type:!1}:g,e,b));const w=h.animation;w&&l.push(w)}return s&&Promise.all(l).then(()=>{ea.update(()=>{s&&i0e(e,s)})}),l}function Nk(e,t,n={}){var l;const r=Q0(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(E$(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=a;return Oye(e,t,d+u,h,m,n)}:()=>Promise.resolve(),{when:o}=a;if(o){const[u,d]=o==="beforeChildren"?[i,s]:[s,i];return u().then(()=>d())}else return Promise.all([i(),s(n.delay)])}function Oye(e,t,n=0,r=0,a=1,i){const s=[],o=(e.variantChildren.size-1)*r,l=a===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(Pye).forEach((u,d)=>{u.notify("AnimationStart",t),s.push(Nk(u,t,{...i,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function Pye(e,t){return e.sortNodePosition(t)}function Fye(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>Nk(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=Nk(e,t,n);else{const a=typeof t=="function"?Q0(e,t,n.custom):t;r=Promise.all(E$(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function C$(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Lye=JN.length;function T$(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?T$(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Lye;n++){const r=JN[n],a=e.props[r];(Y0(a)||a===!1)&&(t[r]=a)}return t}const Bye=[...XN].reverse(),$ye=XN.length;function zye(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Fye(e,n,r)))}function Uye(e){let t=zye(e),n=yO(),r=!0;const a=l=>(u,d)=>{var m;const h=Q0(e,d,l==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function i(l){t=l(e)}function s(l){const{props:u}=e,d=T$(e.parent)||{},h=[],m=new Set;let g={},v=1/0;for(let w=0;w<$ye;w++){const x=Bye[w],_=n[x],E=u[x]!==void 0?u[x]:d[x],C=Y0(E),k=x===l?_.isActive:null;k===!1&&(v=w);let I=E===d[x]&&E!==u[x]&&C;if(I&&r&&e.manuallyAnimateOnMount&&(I=!1),_.protectedKeys={...g},!_.isActive&&k===null||!E&&!_.prevProp||w_(E)||typeof E=="boolean")continue;const j=Vye(_.prevProp,E);let N=j||x===l&&_.isActive&&!I&&C||w>v&&C,P=!1;const L=Array.isArray(E)?E:[E];let H=L.reduce(a(x),{});k===!1&&(H={});const{prevResolvedValues:M={}}=_,K={...M,...H},U=re=>{N=!0,m.has(re)&&(P=!0,m.delete(re)),_.needsAnimating[re]=!0;const X=e.getValue(re);X&&(X.liveStyle=!1)};for(const re in K){const X=H[re],ne=M[re];if(g.hasOwnProperty(re))continue;let q=!1;yk(X)&&yk(ne)?q=!C$(X,ne):q=X!==ne,q?X!=null?U(re):m.add(re):X!==void 0&&m.has(re)?U(re):_.protectedKeys[re]=!0}_.prevProp=E,_.prevResolvedValues=H,_.isActive&&(g={...g,...H}),r&&e.blockInitialAnimation&&(N=!1),N&&(!(I&&j)||P)&&h.push(...L.map(re=>({animation:re,options:{type:x}})))}if(m.size){const w={};if(typeof u.initial!="boolean"){const x=Q0(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(w.transition=x.transition)}m.forEach(x=>{const _=e.getBaseTarget(x),E=e.getValue(x);E&&(E.liveStyle=!0),w[x]=_??null}),h.push({animation:w})}let b=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(h):Promise.resolve()}function o(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=yO(),r=!0}}}function Vye(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!C$(t,e):!1}function Kd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yO(){return{animate:Kd(!0),whileInView:Kd(),whileHover:Kd(),whileTap:Kd(),whileDrag:Kd(),whileFocus:Kd(),exit:Kd()}}class pd{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Hye extends pd{constructor(t){super(t),t.animationState||(t.animationState=Uye(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();w_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let qye=0;class Gye extends pd{constructor(){super(...arguments),this.id=qye++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Wye={animation:{Feature:Hye},exit:{Feature:Gye}};function ry(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const CR=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ib(e){return{point:{x:e.pageX,y:e.pageY}}}const Kye=e=>t=>CR(t)&&e(t,ib(t));function Jg(e,t,n,r){return ry(e,t,Kye(n),r)}function k$({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Zye({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Yye(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const A$=1e-4,Xye=1-A$,Jye=1+A$,N$=.01,Qye=0-N$,ebe=0+N$;function Ni(e){return e.max-e.min}function tbe(e,t,n){return Math.abs(e-t)<=n}function bO(e,t,n,r=.5){e.origin=r,e.originPoint=Jr(t.min,t.max,e.origin),e.scale=Ni(n)/Ni(t),e.translate=Jr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Xye&&e.scale<=Jye||isNaN(e.scale))&&(e.scale=1),(e.translate>=Qye&&e.translate<=ebe||isNaN(e.translate))&&(e.translate=0)}function Qg(e,t,n,r){bO(e.x,t.x,n.x,r?r.originX:void 0),bO(e.y,t.y,n.y,r?r.originY:void 0)}function vO(e,t,n){e.min=n.min+t.min,e.max=e.min+Ni(t)}function nbe(e,t,n){vO(e.x,t.x,n.x),vO(e.y,t.y,n.y)}function wO(e,t,n){e.min=t.min-n.min,e.max=e.min+Ni(t)}function e0(e,t,n){wO(e.x,t.x,n.x),wO(e.y,t.y,n.y)}const xO=()=>({translate:0,scale:1,origin:0,originPoint:0}),tp=()=>({x:xO(),y:xO()}),_O=()=>({min:0,max:0}),ca=()=>({x:_O(),y:_O()});function Fs(e){return[e("x"),e("y")]}function OC(e){return e===void 0||e===1}function Rk({scale:e,scaleX:t,scaleY:n}){return!OC(e)||!OC(t)||!OC(n)}function Yd(e){return Rk(e)||R$(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function R$(e){return SO(e.x)||SO(e.y)}function SO(e){return e&&e!=="0%"}function Qx(e,t,n){const r=e-n,a=t*r;return n+a}function EO(e,t,n,r,a){return a!==void 0&&(e=Qx(e,a,r)),Qx(e,n,r)+t}function Ik(e,t=0,n=1,r,a){e.min=EO(e.min,t,n,r,a),e.max=EO(e.max,t,n,r,a)}function I$(e,{x:t,y:n}){Ik(e.x,t.translate,t.scale,t.originPoint),Ik(e.y,n.translate,n.scale,n.originPoint)}const CO=.999999999999,TO=1.0000000000001;function rbe(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,s;for(let o=0;o<a;o++){i=n[o],s=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&rp(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,I$(e,s)),r&&Yd(i.latestValues)&&rp(e,i.latestValues))}t.x<TO&&t.x>CO&&(t.x=1),t.y<TO&&t.y>CO&&(t.y=1)}function np(e,t){e.min=e.min+t,e.max=e.max+t}function kO(e,t,n,r,a=.5){const i=Jr(e.min,e.max,a);Ik(e,t,n,i,r)}function rp(e,t){kO(e.x,t.x,t.scaleX,t.scale,t.originX),kO(e.y,t.y,t.scaleY,t.scale,t.originY)}function j$(e,t){return k$(Yye(e.getBoundingClientRect(),t))}function abe(e,t,n){const r=j$(e,n),{scroll:a}=t;return a&&(np(r.x,a.offset.x),np(r.y,a.offset.y)),r}const D$=({current:e})=>e?e.ownerDocument.defaultView:null,AO=(e,t)=>Math.abs(e-t);function ibe(e,t){const n=AO(e.x,t.x),r=AO(e.y,t.y);return Math.sqrt(n**2+r**2)}class M${constructor(t,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=FC(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=ibe(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:v}=h,{timestamp:b}=ni;this.history.push({...v,timestamp:b});const{onStart:w,onMove:x}=this.handlers;m||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=PC(m,this.transformPagePoint),ea.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=FC(h.type==="pointercancel"?this.lastMoveEventInfo:PC(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,w),v&&v(h,w)},!CR(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const s=ib(t),o=PC(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=ni;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,FC(o,this.history)),this.removeListeners=rb(Jg(this.contextWindow,"pointermove",this.handlePointerMove),Jg(this.contextWindow,"pointerup",this.handlePointerUp),Jg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Qu(this.updatePoint)}}function PC(e,t){return t?{point:t(e.point)}:e}function NO(e,t){return{x:e.x-t.x,y:e.y-t.y}}function FC({point:e},t){return{point:e,delta:NO(e,O$(t)),offset:NO(e,sbe(t)),velocity:obe(t,.1)}}function sbe(e){return e[0]}function O$(e){return e[e.length-1]}function obe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=O$(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>hl(t)));)n--;if(!r)return{x:0,y:0};const i=pl(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const s={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function lbe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Jr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Jr(n,e,r.max):Math.min(e,n)),e}function RO(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function cbe(e,{top:t,left:n,bottom:r,right:a}){return{x:RO(e.x,n,a),y:RO(e.y,t,r)}}function IO(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function ube(e,t){return{x:IO(e.x,t.x),y:IO(e.y,t.y)}}function dbe(e,t){let n=.5;const r=Ni(e),a=Ni(t);return a>r?n=ny(t.min,t.max-r,e.min):r>a&&(n=ny(e.min,e.max-a,t.min)),Ac(0,1,n)}function fbe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const jk=.35;function hbe(e=jk){return e===!1?e=0:e===!0&&(e=jk),{x:jO(e,"left","right"),y:jO(e,"top","bottom")}}function jO(e,t,n){return{min:DO(e,t),max:DO(e,n)}}function DO(e,t){return typeof e=="number"?e:e[t]||0}const fo={x:!1,y:!1};function P$(){return fo.x||fo.y}function pbe(e){return e==="x"||e==="y"?fo[e]?null:(fo[e]=!0,()=>{fo[e]=!1}):fo.x||fo.y?null:(fo.x=fo.y=!0,()=>{fo.x=fo.y=!1})}const mbe=new WeakMap;class gbe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ca(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ib(d).point)},i=(d,h)=>{const{drag:m,dragPropagation:g,onDragStart:v}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=pbe(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fs(w=>{let x=this.getAxisMotionValue(w).get()||0;if(fl.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[w];E&&(x=Ni(E)*(parseFloat(x)/100))}}this.originPoint[w]=x}),v&&ea.postRender(()=>v(d,h)),bk(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:v,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:w}=h;if(g&&this.currentDirection===null){this.currentDirection=ybe(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),b&&b(d,h)},o=(d,h)=>this.stop(d,h),l=()=>Fs(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new M$(t,{onSessionStart:a,onStart:i,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:D$(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ea.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!ww(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=lbe(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&Qh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=cbe(r.layoutBox,t):this.constraints=!1,this.elastic=hbe(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Fs(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=fbe(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Qh(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=abe(r,a.root,this.visualElement.getTransformPagePoint());let s=ube(a.layout.layoutBox,i);if(n){const o=n(Zye(s));this.hasMutatedConstraints=!!o,o&&(s=k$(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Fs(d=>{if(!ww(d,n,this.currentDirection))return;let h=l&&l[d]||{};s&&(h={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,v={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return bk(this.visualElement,t),r.start(ER(t,r,0,n,this.visualElement,!1))}stopAnimation(){Fs(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Fs(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Fs(n=>{const{drag:r}=this.getProps();if(!ww(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:s,max:o}=a.layout.layoutBox[n];i.set(t[n]-Jr(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Qh(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Fs(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();a[s]=dbe({min:l,max:l},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Fs(s=>{if(!ww(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Jr(l,u,a[s]))})}addListeners(){if(!this.visualElement.current)return;mbe.set(this.visualElement,this);const t=this.visualElement.current,n=Jg(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Qh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ea.read(r);const s=ry(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Fs(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{s(),n(),i(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:s=jk,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function ww(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function ybe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class bbe extends pd{constructor(t){super(t),this.removeGroupControls=Gs,this.removeListeners=Gs,this.controls=new gbe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gs}unmount(){this.removeGroupControls(),this.removeListeners()}}const MO=e=>(t,n)=>{e&&ea.postRender(()=>e(t,n))};class vbe extends pd{constructor(){super(...arguments),this.removePointerDownListener=Gs}onPointerDown(t){this.session=new M$(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:D$(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:MO(t),onStart:MO(n),onMove:r,onEnd:(i,s)=>{delete this.session,a&&ea.postRender(()=>a(i,s))}}}mount(){this.removePointerDownListener=Jg(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Uw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function OO(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(En.test(e))e=parseFloat(e);else return e;const n=OO(e,t.target.x),r=OO(e,t.target.y);return`${n}% ${r}%`}},wbe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=ed.parse(e);if(a.length>5)return r;const i=ed.createTransformer(e),s=typeof a[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;a[0+s]/=o,a[1+s]/=l;const u=Jr(o,l,.5);return typeof a[2+s]=="number"&&(a[2+s]/=u),typeof a[3+s]=="number"&&(a[3+s]/=u),i(a)}};class xbe extends T.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;Dge(_be),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Uw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||ea.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),eR.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function F$(e){const[t,n]=I7(),r=T.useContext(WN);return p.jsx(xbe,{...e,layoutGroup:r,switchLayoutGroup:T.useContext(F7),isPresent:t,safeToRemove:n})}const _be={borderRadius:{...Mg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mg,borderTopRightRadius:Mg,borderBottomLeftRadius:Mg,borderBottomRightRadius:Mg,boxShadow:wbe};function Sbe(e,t,n){const r=mi(e)?e:ey(e);return r.start(ER("",r,t,n)),r.animation}function Ebe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const Cbe=(e,t)=>e.depth-t.depth;class Tbe{constructor(){this.children=[],this.isDirty=!1}add(t){uR(this.children,t),this.isDirty=!0}remove(t){dR(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Cbe),this.isDirty=!1,this.children.forEach(t)}}function kbe(e,t){const n=Ki.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(Qu(r),e(i-t))};return ea.setup(r,!0),()=>Qu(r)}const L$=["TopLeft","TopRight","BottomLeft","BottomRight"],Abe=L$.length,PO=e=>typeof e=="string"?parseFloat(e):e,FO=e=>typeof e=="number"||En.test(e);function Nbe(e,t,n,r,a,i){a?(e.opacity=Jr(0,n.opacity??1,Rbe(r)),e.opacityExit=Jr(t.opacity??1,0,Ibe(r))):i&&(e.opacity=Jr(t.opacity??1,n.opacity??1,r));for(let s=0;s<Abe;s++){const o=`border${L$[s]}Radius`;let l=LO(t,o),u=LO(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||FO(l)===FO(u)?(e[o]=Math.max(Jr(PO(l),PO(u),r),0),(fl.test(u)||fl.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Jr(t.rotate||0,n.rotate||0,r))}function LO(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Rbe=B$(0,.5,f$),Ibe=B$(.5,.95,Gs);function B$(e,t,n){return r=>r<e?0:r>t?1:n(ny(e,t,r))}function BO(e,t){e.min=t.min,e.max=t.max}function Ps(e,t){BO(e.x,t.x),BO(e.y,t.y)}function $O(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function zO(e,t,n,r,a){return e-=t,e=Qx(e,1/n,r),a!==void 0&&(e=Qx(e,1/a,r)),e}function jbe(e,t=0,n=1,r=.5,a,i=e,s=e){if(fl.test(t)&&(t=parseFloat(t),t=Jr(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Jr(i.min,i.max,r);e===i&&(o-=t),e.min=zO(e.min,t,n,o,a),e.max=zO(e.max,t,n,o,a)}function UO(e,t,[n,r,a],i,s){jbe(e,t[n],t[r],t[a],t.scale,i,s)}const Dbe=["x","scaleX","originX"],Mbe=["y","scaleY","originY"];function VO(e,t,n,r){UO(e.x,t,Dbe,n?n.x:void 0,r?r.x:void 0),UO(e.y,t,Mbe,n?n.y:void 0,r?r.y:void 0)}function HO(e){return e.translate===0&&e.scale===1}function $$(e){return HO(e.x)&&HO(e.y)}function qO(e,t){return e.min===t.min&&e.max===t.max}function Obe(e,t){return qO(e.x,t.x)&&qO(e.y,t.y)}function GO(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function z$(e,t){return GO(e.x,t.x)&&GO(e.y,t.y)}function WO(e){return Ni(e.x)/Ni(e.y)}function KO(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Pbe{constructor(){this.members=[]}add(t){uR(this.members,t),t.scheduleRender()}remove(t){if(dR(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Fbe(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((a||i||s)&&(r=`translate3d(${a}px, ${i}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:g,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const LC=["","X","Y","Z"],Lbe={visibility:"hidden"},ZO=1e3;let Bbe=0;function BC(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function U$(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Z7(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ea,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&U$(r)}function V$({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(s={},o=t==null?void 0:t()){this.id=Bbe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Ube),this.nodes.forEach(Wbe),this.nodes.forEach(Kbe),this.nodes.forEach(Vbe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Tbe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new fR),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=Ebe(s),this.instance=s;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=kbe(h,250),Uw.hasAnimatedSinceResize&&(Uw.hasAnimatedSinceResize=!1,this.nodes.forEach(XO))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||Qbe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=u.getProps(),x=!this.targetLayout||!z$(this.targetLayout,g),_=!h&&m;if(this.options.layoutRoot||this.resumeFrom||_||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const E={...hR(v,"layout"),onPlay:b,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||XO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Zbe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&U$(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(YO);return}this.isUpdating||this.nodes.forEach(qbe),this.isUpdating=!1,this.nodes.forEach(Gbe),this.nodes.forEach($be),this.nodes.forEach(zbe),this.clearAllSnapshots();const o=Ki.now();ni.delta=Ac(0,1e3/60,o-ni.timestamp),ni.timestamp=o,ni.isProcessing=!0,IC.update.process(ni),IC.preRender.process(ni),IC.render.process(ni),ni.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,eR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Hbe),this.sharedNodes.forEach(Ybe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ea.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ea.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ni(this.snapshot.measuredBox.x)&&!Ni(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ca(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!a)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!$$(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Yd(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),eve(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return ca();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(tve))){const{scroll:d}=this.root;d&&(np(o.x,d.offset.x),np(o.y,d.offset.y))}return o}removeElementScroll(s){var l;const o=ca();if(Ps(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&Ps(o,s),np(o.x,h.offset.x),np(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const l=ca();Ps(l,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&rp(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Yd(d.latestValues)&&rp(l,d.latestValues)}return Yd(this.latestValues)&&rp(l,this.latestValues),l}removeTransform(s){const o=ca();Ps(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Yd(u.latestValues))continue;Rk(u.latestValues)&&u.updateSnapshot();const d=ca(),h=u.measurePageBox();Ps(d,h),VO(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Yd(this.latestValues)&&VO(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ni.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=ni.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ca(),this.relativeTargetOrigin=ca(),e0(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ps(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ca(),this.targetWithTransforms=ca()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nbe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ps(this.target,this.layout.layoutBox),I$(this.target,this.targetDelta)):Ps(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ca(),this.relativeTargetOrigin=ca(),e0(this.relativeTargetOrigin,this.target,g.target),Ps(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rk(this.parent.latestValues)||R$(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ni.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ps(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;rbe(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=ca());const{target:g}=s;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():($O(this.prevProjectionDelta.x,this.projectionDelta.x),$O(this.prevProjectionDelta.y,this.projectionDelta.y)),Qg(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!KO(this.projectionDelta.x,this.prevProjectionDelta.x)||!KO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=tp(),this.projectionDelta=tp(),this.projectionDeltaWithTransform=tp()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=tp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=ca(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,b=g!==v,w=this.getStack(),x=!w||w.members.length<=1,_=!!(b&&!x&&this.options.crossfade===!0&&!this.path.some(Jbe));this.animationProgress=0;let E;this.mixTargetDelta=C=>{const k=C/1e3;JO(h.x,s.x,k),JO(h.y,s.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(e0(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Xbe(this.relativeTarget,this.relativeTargetOrigin,m,k),E&&Obe(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ca()),Ps(E,this.relativeTarget)),b&&(this.animationValues=d,Nbe(d,u,this.latestValues,k,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ea.update(()=>{Uw.hasAnimatedSinceResize=!0,this.currentAnimation=Sbe(0,ZO,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ZO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&H$(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ca();const h=Ni(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+h;const m=Ni(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+m}Ps(o,l),rp(o,d),Qg(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Pbe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&BC("z",s,u,this.animationValues);for(let d=0;d<LC.length;d++)BC(`rotate${LC[d]}`,s,u,this.animationValues),BC(`skew${LC[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Lbe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=$w(s==null?void 0:s.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=$w(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Yd(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=Fbe(this.projectionDeltaWithTransform,this.treeScale,d),l&&(o.transform=l(d,o.transform));const{x:h,y:m}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in X0){if(d[g]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:w}=X0[g],x=o.transform==="none"?d[g]:v(d[g],u);if(b){const _=b.length;for(let E=0;E<_;E++)o[b[E]]=x}else w?this.options.visualElement.renderState.vars[g]=x:o[g]=x}return this.options.layoutId&&(o.pointerEvents=u===this?$w(s==null?void 0:s.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(YO),this.root.sharedNodes.clear()}}}function $be(e){e.updateLayout()}function zbe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?Fs(h=>{const m=s?t.measuredBox[h]:t.layoutBox[h],g=Ni(m);m.min=r[h].min,m.max=m.min+g}):H$(i,t.layoutBox,r)&&Fs(h=>{const m=s?t.measuredBox[h]:t.layoutBox[h],g=Ni(r[h]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=tp();Qg(o,r,t.layoutBox);const l=tp();s?Qg(l,e.applyTransform(a,!0),t.measuredBox):Qg(l,r,t.layoutBox);const u=!$$(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const v=ca();e0(v,t.layoutBox,m.layoutBox);const b=ca();e0(b,r,g.layoutBox),z$(v,b)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Ube(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Vbe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Hbe(e){e.clearSnapshot()}function YO(e){e.clearMeasurements()}function qbe(e){e.isLayoutDirty=!1}function Gbe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function XO(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Wbe(e){e.resolveTargetDelta()}function Kbe(e){e.calcProjection()}function Zbe(e){e.resetSkewAndRotation()}function Ybe(e){e.removeLeadSnapshot()}function JO(e,t,n){e.translate=Jr(t.translate,0,n),e.scale=Jr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function QO(e,t,n,r){e.min=Jr(t.min,n.min,r),e.max=Jr(t.max,n.max,r)}function Xbe(e,t,n,r){QO(e.x,t.x,n.x,r),QO(e.y,t.y,n.y,r)}function Jbe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Qbe={duration:.45,ease:[.4,0,.1,1]},eP=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),tP=eP("applewebkit/")&&!eP("chrome/")?Math.round:Gs;function nP(e){e.min=tP(e.min),e.max=tP(e.max)}function eve(e){nP(e.x),nP(e.y)}function H$(e,t,n){return e==="position"||e==="preserve-aspect"&&!tbe(WO(t),WO(n),.2)}function tve(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const nve=V$({attachResizeListener:(e,t)=>ry(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$C={current:void 0},q$=V$({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!$C.current){const e=new nve({});e.mount(window),e.setOptions({layoutScroll:!0}),$C.current=e}return $C.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),rve={pan:{Feature:vbe},drag:{Feature:bbe,ProjectionNode:q$,MeasureLayout:F$}};function ave(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const a=(n==null?void 0:n[e])??r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function G$(e,t){const n=ave(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function rP(e){return!(e.pointerType==="touch"||P$())}function ive(e,t,n={}){const[r,a,i]=G$(e,n),s=o=>{if(!rP(o))return;const{target:l}=o,u=t(l,o);if(typeof u!="function"||!l)return;const d=h=>{rP(h)&&(u(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,a)};return r.forEach(o=>{o.addEventListener("pointerenter",s,a)}),i}function aP(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&ea.postRender(()=>i(t,ib(t)))}class sve extends pd{mount(){const{current:t}=this.node;t&&(this.unmount=ive(t,(n,r)=>(aP(this.node,r,"Start"),a=>aP(this.node,a,"End"))))}unmount(){}}class ove extends pd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rb(ry(this.node.current,"focus",()=>this.onFocus()),ry(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const W$=(e,t)=>t?e===t?!0:W$(e,t.parentElement):!1,lve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function cve(e){return lve.has(e.tagName)||e.tabIndex!==-1}const Ug=new WeakSet;function iP(e){return t=>{t.key==="Enter"&&e(t)}}function zC(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const uve=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=iP(()=>{if(Ug.has(n))return;zC(n,"down");const a=iP(()=>{zC(n,"up")}),i=()=>zC(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function sP(e){return CR(e)&&!P$()}function dve(e,t,n={}){const[r,a,i]=G$(e,n),s=o=>{const l=o.currentTarget;if(!sP(o)||Ug.has(l))return;Ug.add(l);const u=t(l,o),d=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),!(!sP(g)||!Ug.has(l))&&(Ug.delete(l),typeof u=="function"&&u(g,{success:v}))},h=g=>{d(g,l===window||l===document||n.useGlobalTarget||W$(l,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,a),o instanceof HTMLElement&&(o.addEventListener("focus",u=>uve(u,a)),!cve(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function oP(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&ea.postRender(()=>i(t,ib(t)))}class fve extends pd{mount(){const{current:t}=this.node;t&&(this.unmount=dve(t,(n,r)=>(oP(this.node,r,"Start"),(a,{success:i})=>oP(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dk=new WeakMap,UC=new WeakMap,hve=e=>{const t=Dk.get(e.target);t&&t(e)},pve=e=>{e.forEach(hve)};function mve({root:e,...t}){const n=e||document;UC.has(n)||UC.set(n,{});const r=UC.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(pve,{root:e,...t})),r[a]}function gve(e,t,n){const r=mve(t);return Dk.set(e,n),r.observe(e),()=>{Dk.delete(e),r.unobserve(e)}}const yve={some:0,all:1};class bve extends pd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:yve[a]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(l)};return gve(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(vve(t,n))&&this.startObserver()}unmount(){}}function vve({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const wve={inView:{Feature:bve},tap:{Feature:fve},focus:{Feature:ove},hover:{Feature:sve}},xve={layout:{ProjectionNode:q$,MeasureLayout:F$}},Mk={current:null},K$={current:!1};function _ve(){if(K$.current=!0,!!ZN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Mk.current=e.matches;e.addListener(t),t()}else Mk.current=!1}const Sve=new WeakMap;function Eve(e,t,n){for(const r in t){const a=t[r],i=n[r];if(mi(a))e.addValue(r,a);else if(mi(i))e.addValue(r,ey(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(a):s.hasAnimated||s.set(a)}else{const s=e.getStaticValue(r);e.addValue(r,ey(s!==void 0?s:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Z$=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Y$=e=>/^0[^.\s]+$/u.test(e),Cve={test:e=>e==="auto",parse:e=>e},X$=e=>t=>t.test(e),J$=[pm,En,fl,Su,Oge,Mge,Cve],lP=e=>J$.find(X$(e)),Tve=[...J$,di,ed],kve=e=>Tve.find(X$(e)),Ave=new Set(["brightness","contrast","saturate","opacity"]);function Nve(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(pR)||[];if(!r)return e;const a=n.replace(r,"");let i=Ave.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const Rve=/\b([a-z-]*)\(.*?\)/gu,Ok={...ed,getAnimatableNone:e=>{const t=e.match(Rve);return t?t.map(Nve).join(" "):e}},Ive={...aR,color:di,backgroundColor:di,outlineColor:di,fill:di,stroke:di,borderColor:di,borderTopColor:di,borderRightColor:di,borderBottomColor:di,borderLeftColor:di,filter:Ok,WebkitFilter:Ok},Q$=e=>Ive[e];function ez(e,t){let n=Q$(e);return n!==Ok&&(n=ed),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const cP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class jve{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_R,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ki.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ea.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=x_(n),this.isVariantNode=O7(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&mi(g)&&g.set(l[m],!1)}}mount(t){this.current=t,Sve.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),K$.current||_ve(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mk.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Qu(this.notifyUpdate),Qu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=hm.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ea.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Bp){const n=Bp[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ca()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<cP.length;r++){const a=cP[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,s=t[i];s&&(this.propEventSubscriptions[a]=this.on(a,s))}this.prevMotionValues=Eve(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ey(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Z$(r)||Y$(r))?r=parseFloat(r):!kve(r)&&ed.test(n)&&(r=ez(t,n)),this.setBaseTarget(t,mi(r)?r.get():r)),mi(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=lR(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!mi(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new fR),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}const Dve=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Mve(e){const t=Dve.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function tz(e,t,n=1){const[r,a]=Mve(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const s=i.trim();return Z$(s)?parseFloat(s):s}return rR(a)?tz(a,t,n+1):a}function Ove(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Y$(e):!0}const Pve=new Set(["auto","none","0"]);function Fve(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!Pve.has(i)&&ty(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=ez(n,a)}class Lve extends _R{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),rR(u))){const d=tz(u,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!S$.has(r)||t.length!==2)return;const[a,i]=t,s=lP(a),o=lP(i);if(s!==o)if(hO(s)&&hO(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else ff[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||Ove(t[a]))&&r.push(a);r.length&&Fve(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ff[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=ff[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}class nz extends jve{constructor(){super(...arguments),this.KeyframeResolver=Lve}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function rz(e,{style:t,vars:n},r,a){Object.assign(e.style,t,a&&a.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}function Bve(e){return window.getComputedStyle(e)}class $ve extends nz{constructor(){super(...arguments),this.type="html",this.renderInstance=rz}readValueFromInstance(t,n){if(hm.has(n))return uye(t,n);{const r=Bve(t),a=(nR(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return j$(t,n)}build(t,n,r){iR(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return cR(t,n,r)}}const az=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zve(e,t,n,r){rz(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(az.has(a)?a:QN(a),t.attrs[a])}class Uve extends nz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ca}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(hm.has(n)){const r=Q$(n);return r&&r.default||0}return n=az.has(n)?n:QN(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return W7(t,n,r)}build(t,n,r){V7(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){zve(t,n,r,a)}mount(t){this.isSVGTag=q7(t.tagName),super.mount(t)}}const Vve=(e,t)=>oR(e)?new Uve(t):new $ve(t,{allowProjection:e!==T.Fragment}),Hve=Qge({...Wye,...wve,...rve,...xve},Vve),mo=vge(Hve),qve=".litechat/conversations",iz="/synced_repos";async function Gve(e,t,n){n(t.id,"syncing");const r=tr(`${iz}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let s=!1;try{await e.promises.stat(vl(r,".git")),s=!0}catch(o){if(o.code==="ENOENT")s=!1;else throw o}s?(qe.info(`Pulling latest changes for "${t.name}"...`),await c_(r,i,a,{fsInstance:e}),qe.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(qe.info(`Cloning repository "${t.name}"...`),await AB(r,t.remoteUrl,i,a,{fsInstance:e}),qe.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(s){console.error(`Failed to initialize/sync repository ${t.name}:`,s),n(t.id,"error")}}async function Wve(e,t,n,r,a,i,s){var h,m;r(t.id,"syncing");const o=tr(`${iz}/${n.id}`),l=vl(o,qve,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(vl(o,".git"))}catch(x){if(x.code==="ENOENT"){qe.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}qe.info(`Pulling latest changes for "${n.name}"...`),await c_(o,d,u,{fsInstance:e});let g=null,v=null;try{const x=await qf(l,{fsInstance:e}),_=new TextDecoder().decode(x);g=JSON.parse(_),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),qe.warning(`Could not read remote version of conversation: ${x.message}`))}const b=t.updatedAt.getTime(),w=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!g||b>(v??0)||b>w&&b>=(v??0)){qe.info("Local changes detected. Pushing to remote...");const x=await _t.loadInteractionsForConversation(t.id),{lastSyncedAt:_,...E}=t,C=JSON.stringify({conversation:E,interactions:x},null,2);await u_(l,C,{fsInstance:e}),await NN(o,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await RN(o,d,u,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),qe.success("Conversation synced successfully (pushed).")}else if(v&&v>b){qe.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await _t.saveConversation(x),await _t.deleteInteractionsForConversation(t.id);const _=g.interactions.map(E=>_t.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(_),i()===t.id&&s()==="conversation"&&await On.getState().loadInteractions(t.id),r(t.id,"idle"),qe.success("Conversation synced successfully (pulled).")}else qe.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const hi=Ys(Xs((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{var l;const r=ji(),a=new Date,i=n.parentId?((l=t().getProjectById(n.parentId))==null?void 0:l.path)??"/":"/",s=tr(`${i}/${n.name.replace(/\s+/g,"-").toLowerCase()}-${r.substring(0,4)}`),o={id:r,path:s,createdAt:a,updatedAt:a,name:n.name,parentId:n.parentId??null,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,defaultTagIds:n.defaultTagIds??null,defaultRuleIds:n.defaultRuleIds??null,metadata:n.metadata??{}};try{return await _t.saveProject(o),e(u=>{u.projects.unshift(o),u.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())}),Ct.emit(St.PROJECT_ADDED,{project:o}),r}catch(u){throw console.error("ProjectStore: Error adding project",u),e({error:"Failed to save new project"}),u}},updateProject:async(n,r)=>{var s;const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};if(r.name&&r.name!==a.name){const o=a.parentId?((s=t().getProjectById(a.parentId))==null?void 0:s.path)??"/":"/";i.path=tr(`${o}/${r.name.replace(/\s+/g,"-").toLowerCase()}-${n.substring(0,4)}`)}try{await _t.saveProject(i),e(o=>{const l=o.projects.findIndex(u=>u.id===n);l!==-1&&(o.projects[l]=i,o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()))}),Ct.emit(St.PROJECT_UPDATED,{projectId:n,updates:i})}catch(o){throw console.error("ProjectStore: Error updating project",o),e({error:"Failed to save project update"}),o}},deleteProject:async n=>{const r=t().projects.find(s=>s.id===n);if(!r)return;const a=new Set,i=s=>{a.add(s),t().projects.filter(o=>o.parentId===s).forEach(o=>i(o.id))};i(n);try{await _t.deleteProject(n),e(s=>({projects:s.projects.filter(o=>!a.has(o.id))})),mn.getState()._unlinkConversationsFromProjects(Array.from(a)),Ct.emit(St.PROJECT_DELETED,{projectId:n}),qe.success(`Project "${r.name}" and its contents deleted.`)}catch(s){throw console.error("ProjectStore: Error deleting project",s),e({error:"Failed to delete project"}),s}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getTopLevelProjectId:n=>{if(!n)return null;let r=t().getProjectById(n);if(!r)return null;for(;r.parentId;){const a=t().getProjectById(r.parentId);if(!a)break;r=a}return r.id},getEffectiveProjectSettings:n=>{const r=rr.getState(),a=Un.getState().selectedModelId,i={systemPrompt:r.globalSystemPrompt,modelId:a,temperature:r.temperature,maxTokens:r.maxTokens,topP:r.topP,topK:r.topK,presencePenalty:r.presencePenalty,frequencyPenalty:r.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null};if(!n)return i;const s=t().getProjectById(n);if(!s)return i;const o=s.parentId?t().getEffectiveProjectSettings(s.parentId):i;return{systemPrompt:s.systemPrompt!==null&&s.systemPrompt!==void 0?s.systemPrompt:o.systemPrompt,modelId:s.modelId!==null&&s.modelId!==void 0?s.modelId:o.modelId,temperature:s.temperature!==null&&s.temperature!==void 0?s.temperature:o.temperature,maxTokens:s.maxTokens!==null&&s.maxTokens!==void 0?s.maxTokens:o.maxTokens,topP:s.topP!==null&&s.topP!==void 0?s.topP:o.topP,topK:s.topK!==null&&s.topK!==void 0?s.topK:o.topK,presencePenalty:s.presencePenalty!==null&&s.presencePenalty!==void 0?s.presencePenalty:o.presencePenalty,frequencyPenalty:s.frequencyPenalty!==null&&s.frequencyPenalty!==void 0?s.frequencyPenalty:o.frequencyPenalty,defaultTagIds:s.defaultTagIds!==null&&s.defaultTagIds!==void 0?s.defaultTagIds:o.defaultTagIds,defaultRuleIds:s.defaultRuleIds!==null&&s.defaultRuleIds!==void 0?s.defaultRuleIds:o.defaultRuleIds}}}))),xw=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Kve=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${fk(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${fk(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,s,o,l,u,d,h;((a=r.prompt)!=null&&a.content||(o=(s=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${O0(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(u=r.metadata)!=null&&u.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class ap{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const s=i.conversation,o=i.interactions;if(!s.id||!s.title||!s.createdAt||!s.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:s.title||"Imported Chat",metadata:s.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(d=>_t.saveInteraction({...d,conversationId:l,id:ji()}));await Promise.all(u),await r(l,"conversation"),qe.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),qe.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=mn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await _t.loadInteractionsForConversation(t);let i,s;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const u=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([u],{type:"application/json"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=Kve(r,a);i=new Blob([l],{type:"text/markdown"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");xw(i,s),qe.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),qe.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=hi.getState(),{conversations:a}=mn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const s=async m=>{const g=n.find(x=>x.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const v=n.filter(x=>x.parentId===m),b=a.filter(x=>x.projectId===m),w=[];for(const x of v)w.push(await s(x.id));for(const x of b){const _=await _t.loadInteractionsForConversation(x.id);w.push({conversation:x,interactions:_})}return{project:g,children:w}},o=await s(t),l=JSON.stringify(o,null,2),u=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;xw(u,h),qe.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),qe.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=mn.getState().conversations,n=[];for(const s of t){const o=await _t.loadInteractionsForConversation(s.id);n.push({conversation:s,interactions:o})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;xw(a,i),qe.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),qe.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await _t.getAllDataForExport(t),r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;xw(a,i),qe.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),qe.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.version)throw new Error("Invalid import file format. Missing version or basic structure.");await _t.importAllData(a,n),qe.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),qe.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const uP="sync_repos",xl=Ys(Xs((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&qe.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const s=i.parentId??r.rootId??"";a[s]||(a[s]=r.childrenMap[s]?[...r.childrenMap[s]]:[]),a[s].includes(i.id)||a[s].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const s=i.parentId??r.rootId??"";if(r.childrenMap[s]&&(r.childrenMap[s]=r.childrenMap[s].filter(o=>o!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Ct.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Ct.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Ct.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:s,_addNodes:o,_setFsInstance:l,_setConfiguredVfsKey:u}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),s(null));try{const d=await Ade(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const g=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${g}`),e({initializingKey:null,loading:!1}),new Error(g)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),u(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let m=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(g){if(g.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw g}if(!m||m.path!=="/"){const g=Date.now();m={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:g,lastModified:g},o([m]),console.log("[VfsStore] Root node added/updated in state.")}return e(g=>{g.rootId=m.id,g.currentParentId=m.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${m.id}`),await t().fetchNodes(m.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(s(h),a||(l(null),u(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d,initializingKey:h}=t();if(!s||u!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!s}, Match: ${u===d}, Init: ${h}`);return}r(!0);try{const m=n?o[n]:o[l||""],g=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${u})`);const v=await IN(g,{fsInstance:s});console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const b=n??l??"",w=new Set(v.map(k=>k.path)),E=(t().childrenMap[b]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!w.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(k=>{const I=Object.values(t().nodes).find(N=>N.path===k.path),j=Date.now();return{id:(I==null?void 0:I.id)||ji(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(I==null?void 0:I.createdAt)??j,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(k=>{const I=C.map(j=>j.id);(!k.childrenMap[b]||JSON.stringify(k.childrenMap[b].sort())!==JSON.stringify(I.sort()))&&(k.childrenMap[b]=I,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=tr(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:s}=t();if(!s||t().vfsKey!==t().configuredVfsKey)return;const o=tr(n),l=r(o);l&&l.type==="folder"?(e(u=>{u.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,_addNodes:u,configuredVfsKey:d,vfsKey:h}=t();if(!s||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const m=n?o[n]:o[l||""],g=m?m.path:"/",v=sk(g,r.trim());try{throw await s.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await IB(v,{fsInstance:s});const b=Date.now(),x={id:ji(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};u([x])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d}=t();if(!s||u!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/";await jB(Array.from(r),m,{fsInstance:s}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:s,configuredVfsKey:o,vfsKey:l}=t();if(!s||o!==l){a("Filesystem not ready.");return}r(!0);try{const u=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of u)await jN(d.path,d.type==="folder",{fsInstance:s});i(n)}catch(u){console.error("Failed to delete nodes:",u),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:s,nodes:o,fs:l,rootId:u,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=o[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){a(!0);try{const g=m.parentId?o[m.parentId]:o[u||""],v=g?g.path:"/",b=sk(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await DB(m.path,b,{fsInstance:l});const w={name:r.trim(),path:b,lastModified:Date.now()};s(n,w)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:s,vfsKey:o}=t();if(!a||s!==o)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const u=await qf(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([u],{type:d});return{name:l.name,blob:h}}catch(u){return console.error("Failed to download file:",u),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),Zve="/synced_repos",mn=Ys(Xs((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await xl.getState().initializeVFS(uP,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${uP}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),qe.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await hi.getState().loadProjects();const[n,r]=await Promise.all([_t.loadConversations(),_t.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const s=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,o=i.updatedAt instanceof Date?i.updatedAt.getTime():null;s?o&&o>s?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(s=>{s.conversations.some(o=>o.id===i.id)||(s.conversations.unshift(i),s.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const s=t().getConversationById(r);if(s)await _t.saveConversation(s),Ct.emit(St.CONVERSATION_ADDED,{conversation:s});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(s){throw console.error("ConversationStore: Error adding conversation",s),e(o=>({error:"Failed to save new conversation",conversations:o.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([l])=>l!==r))})),s}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=s.conversations[o].metadata??{},u=r.metadata??{},d={...l,...u};Object.assign(s.conversations[o],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),m=s.conversations[o].lastSyncedAt instanceof Date?s.conversations[o].lastSyncedAt.getTime():null,g=s.conversations[o].updatedAt.getTime();"syncRepoId"in r?s.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&s.conversations[o].syncRepoId&&s.conversationSyncStatus[n]==="idle"&&(!m||g>m)&&(s.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const s=JSON.parse(JSON.stringify(i));await _t.saveConversation(s),Ct.emit(St.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(s){throw console.error("ConversationStore: Error updating conversation",s),e(o=>{const l=o.conversations.findIndex(u=>u.id===n);if(l!==-1){o.conversations[l]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&d<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),s}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){s.conversations[o]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,u=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&l&&u<=l?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(s=>s.id===n);if(i){e(s=>({conversations:s.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([o])=>o!==n))}));try{await _t.deleteConversation(n),await _t.deleteInteractionsForConversation(n),Ct.emit(St.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await On.getState().setCurrentConversationId(null),Ct.emit(St.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(s){throw console.error("ConversationStore: Error deleting conversation",s),e(o=>{if(i){o.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&l&&u<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),s}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await On.getState().setCurrentConversationId(r==="conversation"?n:null),Ct.emit(St.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?Ct.emit(St.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?Ct.emit(St.PROJECT_SELECTED,{projectId:n}):(Ct.emit(St.CONVERSATION_SELECTED,{conversationId:null}),Ct.emit(St.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await ap.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await ap.exportConversation(n,r)},exportProject:async n=>{await ap.exportProject(n)},exportAllConversations:async()=>{await ap.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await _t.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(s=>{s.syncRepos.push(i)});try{const s=t().syncRepos.find(o=>o.id===r);if(s){const o=JSON.parse(JSON.stringify(s));await _t.saveSyncRepo(o),Ct.emit(St.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return qe.success(`Sync repository "${i.name}" added.`),r}catch(s){throw console.error("ConversationStore: Error adding sync repo",s),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),s}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(s=>s.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(s.syncRepos[o],{...r,branch:r.branch||s.syncRepos[o].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(s=>s.id===n);if(i)try{const s=JSON.parse(JSON.stringify(i));await _t.saveSyncRepo(s),Ct.emit(St.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),qe.success(`Sync repository "${i.name}" updated.`)}catch(s){throw console.error("ConversationStore: Error updating sync repo",s),e(o=>{const l=o.syncRepos.findIndex(u=>u.id===n);l!==-1&&(o.syncRepos[l]=a),o.error="Failed to save sync repository update"}),s}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&(s.syncRepos[o]=a),s.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(s=>s.id===n);if(!r)return;const a=tr(`${Zve}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(s=>({syncRepos:s.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(s.repoInitializationStatus).filter(([o])=>o!==n))}));try{await _t.deleteSyncRepo(n),Ct.emit(St.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),qe.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await jN(a,!0,{fsInstance:i}),qe.info(`Removed local sync folder for "${r.name}".`)}catch(s){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,s),s.code!=="ENOENT"&&qe.warning(`Failed to remove local sync folder: ${s.message}`)}}catch(s){throw console.error("ConversationStore: Error deleting sync repo",s),e(o=>{r&&o.syncRepos.push(r),o.error="Failed to delete sync repository"}),s}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),qe.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),Ct.emit(St.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),Ct.emit(St.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){qe.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await Gve(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){qe.error("Conversation not found for syncing.");return}if(!r.syncRepoId){qe.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(o=>o.id===r.syncRepoId);if(!a){qe.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await Wve(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const s=t().getConversationById(n);s&&e(o=>{const l=o.conversations.findIndex(u=>u.id===n);l!==-1&&(o.conversations[l]=s)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const s=t().getConversationById(r);if(!s){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=s.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!s.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}})));function kn({className:e,type:t,...n}){return p.jsx("input",{type:t,"data-slot":"input",className:xt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function __(e){const t=e+"CollectionProvider",[n,r]=wi(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:w,children:x}=b,_=gt.useRef(null),E=gt.useRef(new Map).current;return p.jsx(a,{scope:w,itemMap:E,collectionRef:_,children:x})};s.displayName=t;const o=e+"CollectionSlot",l=Mu(o),u=gt.forwardRef((b,w)=>{const{scope:x,children:_}=b,E=i(o,x),C=Nn(w,E.collectionRef);return p.jsx(l,{ref:C,children:_})});u.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Mu(d),g=gt.forwardRef((b,w)=>{const{scope:x,children:_,...E}=b,C=gt.useRef(null),k=Nn(w,C),I=i(d,x);return gt.useEffect(()=>(I.itemMap.set(C,{ref:C,...E}),()=>void I.itemMap.delete(C))),p.jsx(m,{[h]:"",ref:k,children:_})});g.displayName=d;function v(b){const w=i(e+"CollectionConsumer",b);return gt.useCallback(()=>{const _=w.collectionRef.current;if(!_)return[];const E=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((I,j)=>E.indexOf(I.ref.current)-E.indexOf(j.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:s,Slot:u,ItemSlot:g},v,r]}var VC=0;function S_(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??dP()),document.body.insertAdjacentElement("beforeend",e[1]??dP()),VC++,()=>{VC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),VC--}},[])}function dP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var HC="focusScope.autoFocusOnMount",qC="focusScope.autoFocusOnUnmount",fP={bubbles:!1,cancelable:!0},Yve="FocusScope",sb=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,l]=T.useState(null),u=Ua(a),d=Ua(i),h=T.useRef(null),m=Nn(t,b=>l(b)),g=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(E){if(g.paused||!o)return;const C=E.target;o.contains(C)?h.current=C:Eu(h.current,{select:!0})},w=function(E){if(g.paused||!o)return;const C=E.relatedTarget;C!==null&&(o.contains(C)||Eu(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&Eu(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const _=new MutationObserver(x);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),_.disconnect()}}},[r,o,g.paused]),T.useEffect(()=>{if(o){pP.add(g);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(HC,fP);o.addEventListener(HC,u),o.dispatchEvent(x),x.defaultPrevented||(Xve(nwe(sz(o)),{select:!0}),document.activeElement===b&&Eu(o))}return()=>{o.removeEventListener(HC,u),setTimeout(()=>{const x=new CustomEvent(qC,fP);o.addEventListener(qC,d),o.dispatchEvent(x),x.defaultPrevented||Eu(b??document.body,{select:!0}),o.removeEventListener(qC,d),pP.remove(g)},0)}}},[o,u,d,g]);const v=T.useCallback(b=>{if(!n&&!r||g.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(w&&x){const _=b.currentTarget,[E,C]=Jve(_);E&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Eu(E,{select:!0})):b.shiftKey&&x===E&&(b.preventDefault(),n&&Eu(C,{select:!0})):x===_&&b.preventDefault()}},[n,r,g.paused]);return p.jsx(an.div,{tabIndex:-1,...s,ref:m,onKeyDown:v})});sb.displayName=Yve;function Xve(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Eu(r,{select:t}),document.activeElement!==n)return}function Jve(e){const t=sz(e),n=hP(t,e),r=hP(t.reverse(),e);return[n,r]}function sz(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function hP(e,t){for(const n of e)if(!Qve(n,{upTo:t}))return n}function Qve(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ewe(e){return e instanceof HTMLInputElement&&"select"in e}function Eu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ewe(e)&&t&&e.select()}}var pP=twe();function twe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=mP(e,t),e.unshift(t)},remove(t){var n;e=mP(e,t),(n=e[0])==null||n.resume()}}}function mP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function nwe(e){return e.filter(t=>t.tagName!=="A")}function E_(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var rwe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Vh=new WeakMap,_w=new WeakMap,Sw={},GC=0,oz=function(e){return e&&(e.host||oz(e.parentNode))},awe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=oz(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},iwe=function(e,t,n,r){var a=awe(t,Array.isArray(e)?e:[e]);Sw[n]||(Sw[n]=new WeakMap);var i=Sw[n],s=[],o=new Set,l=new Set(a),u=function(h){!h||o.has(h)||(o.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(o.has(m))d(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",b=(Vh.get(m)||0)+1,w=(i.get(m)||0)+1;Vh.set(m,b),i.set(m,w),s.push(m),b===1&&v&&_w.set(m,!0),w===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),o.clear(),GC++,function(){s.forEach(function(h){var m=Vh.get(h)-1,g=i.get(h)-1;Vh.set(h,m),i.set(h,g),m||(_w.has(h)||h.removeAttribute(r),_w.delete(h)),g||h.removeAttribute(n)}),GC--,GC||(Vh=new WeakMap,Vh=new WeakMap,_w=new WeakMap,Sw={})}},C_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=rwe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),iwe(r,a,n,"aria-hidden")):function(){return null}},il=function(){return il=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},il.apply(this,arguments)};function lz(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function swe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Vw="right-scroll-bar-position",Hw="width-before-scroll-bar",owe="with-scroll-bars-hidden",lwe="--removed-body-scroll-bar-size";function WC(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function cwe(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var uwe=typeof window<"u"?T.useLayoutEffect:T.useEffect,gP=new WeakMap;function dwe(e,t){var n=cwe(null,function(r){return e.forEach(function(a){return WC(a,r)})});return uwe(function(){var r=gP.get(n);if(r){var a=new Set(r),i=new Set(e),s=n.current;a.forEach(function(o){i.has(o)||WC(o,null)}),i.forEach(function(o){a.has(o)||WC(o,s)})}gP.set(n,e)},[e]),n}function fwe(e){return e}function hwe(e,t){t===void 0&&(t=fwe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(i),s=n}var l=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return a}function pwe(e){e===void 0&&(e={});var t=hwe(null);return t.options=il({async:!0,ssr:!1},e),t}var cz=function(e){var t=e.sideCar,n=lz(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,il({},n))};cz.isSideCarExport=!0;function mwe(e,t){return e.useMedium(t),cz}var uz=pwe(),KC=function(){},T_=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:KC,onWheelCapture:KC,onTouchMoveCapture:KC}),a=r[0],i=r[1],s=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,_=e.gapMode,E=lz(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,k=dwe([n,t]),I=il(il({},E),a);return T.createElement(T.Fragment,null,d&&T.createElement(C,{sideCar:uz,removeScrollBar:u,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:_}),s?T.cloneElement(T.Children.only(o),il(il({},I),{ref:k})):T.createElement(x,il({},I,{className:l,ref:k}),o))});T_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};T_.classNames={fullWidth:Hw,zeroRight:Vw};var gwe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ywe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=gwe();return t&&e.setAttribute("nonce",t),e}function bwe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function vwe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var wwe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ywe())&&(bwe(t,n),vwe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xwe=function(){var e=wwe();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},dz=function(){var e=xwe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},_we={left:0,top:0,right:0,gap:0},ZC=function(e){return parseInt(e||"",10)||0},Swe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[ZC(n),ZC(r),ZC(a)]},Ewe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return _we;var t=Swe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Cwe=dz(),hp="data-scroll-locked",Twe=function(e,t,n,r){var a=e.left,i=e.top,s=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(owe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(hp,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Vw,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Hw,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Vw," .").concat(Vw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hw," .").concat(Hw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(hp,`] {
    `).concat(lwe,": ").concat(o,`px;
  }
`)},yP=function(){var e=parseInt(document.body.getAttribute(hp)||"0",10);return isFinite(e)?e:0},kwe=function(){T.useEffect(function(){return document.body.setAttribute(hp,(yP()+1).toString()),function(){var e=yP()-1;e<=0?document.body.removeAttribute(hp):document.body.setAttribute(hp,e.toString())}},[])},Awe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;kwe();var i=T.useMemo(function(){return Ewe(a)},[a]);return T.createElement(Cwe,{styles:Twe(i,!t,a,n?"":"!important")})},Pk=!1;if(typeof window<"u")try{var Ew=Object.defineProperty({},"passive",{get:function(){return Pk=!0,!0}});window.addEventListener("test",Ew,Ew),window.removeEventListener("test",Ew,Ew)}catch{Pk=!1}var Hh=Pk?{passive:!1}:!1,Nwe=function(e){return e.tagName==="TEXTAREA"},fz=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Nwe(e)&&n[t]==="visible")},Rwe=function(e){return fz(e,"overflowY")},Iwe=function(e){return fz(e,"overflowX")},bP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=hz(e,r);if(a){var i=pz(e,r),s=i[1],o=i[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},jwe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Dwe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},hz=function(e,t){return e==="v"?Rwe(t):Iwe(t)},pz=function(e,t){return e==="v"?jwe(t):Dwe(t)},Mwe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Owe=function(e,t,n,r,a){var i=Mwe(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,l=t.contains(o),u=!1,d=s>0,h=0,m=0;do{var g=pz(e,o),v=g[0],b=g[1],w=g[2],x=b-w-i*v;(v||x)&&hz(e,o)&&(h+=x,m+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(u=!0),u},Cw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},vP=function(e){return[e.deltaX,e.deltaY]},wP=function(e){return e&&"current"in e?e.current:e},Pwe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Fwe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Lwe=0,qh=[];function Bwe(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),a=T.useState(Lwe++)[0],i=T.useState(dz)[0],s=T.useRef(e);T.useEffect(function(){s.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=swe([e.lockRef.current],(e.shards||[]).map(wP),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=T.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var x=Cw(b),_=n.current,E="deltaX"in b?b.deltaX:_[0]-x[0],C="deltaY"in b?b.deltaY:_[1]-x[1],k,I=b.target,j=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&j==="h"&&I.type==="range")return!1;var N=bP(j,I);if(!N)return!0;if(N?k=j:(k=j==="v"?"h":"v",N=bP(j,I)),!N)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=k),!k)return!0;var P=r.current||k;return Owe(P,w,b,P==="h"?E:C)},[]),l=T.useCallback(function(b){var w=b;if(!(!qh.length||qh[qh.length-1]!==i)){var x="deltaY"in w?vP(w):Cw(w),_=t.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&Pwe(k.delta,x)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var E=(s.current.shards||[]).map(wP).filter(Boolean).filter(function(k){return k.contains(w.target)}),C=E.length>0?o(w,E[0]):!s.current.noIsolation;C&&w.cancelable&&w.preventDefault()}}},[]),u=T.useCallback(function(b,w,x,_){var E={name:b,delta:w,target:x,should:_,shadowParent:$we(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),d=T.useCallback(function(b){n.current=Cw(b),r.current=void 0},[]),h=T.useCallback(function(b){u(b.type,vP(b),b.target,o(b,e.lockRef.current))},[]),m=T.useCallback(function(b){u(b.type,Cw(b),b.target,o(b,e.lockRef.current))},[]);T.useEffect(function(){return qh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Hh),document.addEventListener("touchmove",l,Hh),document.addEventListener("touchstart",d,Hh),function(){qh=qh.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,Hh),document.removeEventListener("touchmove",l,Hh),document.removeEventListener("touchstart",d,Hh)}},[]);var g=e.removeScrollBar,v=e.inert;return T.createElement(T.Fragment,null,v?T.createElement(i,{styles:Fwe(a)}):null,g?T.createElement(Awe,{gapMode:e.gapMode}):null)}function $we(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zwe=mwe(uz,Bwe);var ob=T.forwardRef(function(e,t){return T.createElement(T_,il({},e,{ref:t,sideCar:zwe}))});ob.classNames=T_.classNames;var Uwe=[" ","Enter","ArrowUp","ArrowDown"],Vwe=[" ","Enter"],Sf="Select",[k_,A_,Hwe]=__(Sf),[mm,X3e]=wi(Sf,[Hwe,id]),N_=id(),[qwe,md]=mm(Sf),[Gwe,Wwe]=mm(Sf),mz=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:m,required:g,form:v}=e,b=N_(t),[w,x]=T.useState(null),[_,E]=T.useState(null),[C,k]=T.useState(!1),I=dm(u),[j,N]=To({prop:r,defaultProp:a??!1,onChange:i,caller:Sf}),[P,L]=To({prop:s,defaultProp:o,onChange:l,caller:Sf}),H=T.useRef(null),M=w?v||!!w.closest("form"):!0,[K,U]=T.useState(new Set),se=Array.from(K).map(ie=>ie.props.value).join(";");return p.jsx(M1,{...b,children:p.jsxs(qwe,{required:g,scope:t,trigger:w,onTriggerChange:x,valueNode:_,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:Ha(),value:P,onValueChange:L,open:j,onOpenChange:N,dir:I,triggerPointerDownPosRef:H,disabled:m,children:[p.jsx(k_.Provider,{scope:t,children:p.jsx(Gwe,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(ie=>{U(re=>new Set(re).add(ie))},[]),onNativeOptionRemove:T.useCallback(ie=>{U(re=>{const X=new Set(re);return X.delete(ie),X})},[]),children:n})}),M?p.jsxs(Fz,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:P,onChange:ie=>L(ie.target.value),disabled:m,form:v,children:[P===void 0?p.jsx("option",{value:""}):null,Array.from(K)]},se):null]})})};mz.displayName=Sf;var gz="SelectTrigger",yz=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=N_(n),s=md(gz,n),o=s.disabled||r,l=Nn(t,s.onTriggerChange),u=A_(n),d=T.useRef("touch"),[h,m,g]=Bz(b=>{const w=u().filter(E=>!E.disabled),x=w.find(E=>E.value===s.value),_=$z(w,b,x);_!==void 0&&s.onValueChange(_.value)}),v=b=>{o||(s.onOpenChange(!0),g()),b&&(s.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return p.jsx(Ey,{asChild:!0,...i,children:p.jsx(an.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Lz(s.value)?"":void 0,...a,ref:l,onClick:qt(a.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:qt(a.onPointerDown,b=>{d.current=b.pointerType;const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:qt(a.onKeyDown,b=>{const w=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(w&&b.key===" ")&&Uwe.includes(b.key)&&(v(),b.preventDefault())})})})});yz.displayName=gz;var bz="SelectValue",vz=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...o}=e,l=md(bz,n),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=Nn(t,l.onValueNodeChange);return ai(()=>{u(d)},[u,d]),p.jsx(an.span,{...o,ref:h,style:{pointerEvents:"none"},children:Lz(l.value)?p.jsx(p.Fragment,{children:s}):i})});vz.displayName=bz;var Kwe="SelectIcon",wz=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return p.jsx(an.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});wz.displayName=Kwe;var Zwe="SelectPortal",xz=e=>p.jsx(Yp,{asChild:!0,...e});xz.displayName=Zwe;var Ef="SelectContent",_z=T.forwardRef((e,t)=>{const n=md(Ef,e.__scopeSelect),[r,a]=T.useState();if(ai(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?sl.createPortal(p.jsx(Sz,{scope:e.__scopeSelect,children:p.jsx(k_.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),i):null}return p.jsx(Ez,{...e,ref:t})});_z.displayName=Ef;var ho=10,[Sz,gd]=mm(Ef),Ywe="SelectContentImpl",Xwe=Mu("SelectContent.RemoveScroll"),Ez=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:w,...x}=e,_=md(Ef,n),[E,C]=T.useState(null),[k,I]=T.useState(null),j=Nn(t,Ae=>C(Ae)),[N,P]=T.useState(null),[L,H]=T.useState(null),M=A_(n),[K,U]=T.useState(!1),se=T.useRef(!1);T.useEffect(()=>{if(E)return C_(E)},[E]),S_();const ie=T.useCallback(Ae=>{const[_e,...ve]=M().map(Ve=>Ve.ref.current),[Be]=ve.slice(-1),nt=document.activeElement;for(const Ve of Ae)if(Ve===nt||(Ve==null||Ve.scrollIntoView({block:"nearest"}),Ve===_e&&k&&(k.scrollTop=0),Ve===Be&&k&&(k.scrollTop=k.scrollHeight),Ve==null||Ve.focus(),document.activeElement!==nt))return},[M,k]),re=T.useCallback(()=>ie([N,E]),[ie,N,E]);T.useEffect(()=>{K&&re()},[K,re]);const{onOpenChange:X,triggerPointerDownPosRef:ne}=_;T.useEffect(()=>{if(E){let Ae={x:0,y:0};const _e=Be=>{var nt,Ve;Ae={x:Math.abs(Math.round(Be.pageX)-(((nt=ne.current)==null?void 0:nt.x)??0)),y:Math.abs(Math.round(Be.pageY)-(((Ve=ne.current)==null?void 0:Ve.y)??0))}},ve=Be=>{Ae.x<=10&&Ae.y<=10?Be.preventDefault():E.contains(Be.target)||X(!1),document.removeEventListener("pointermove",_e),ne.current=null};return ne.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",ve,{capture:!0})}}},[E,X,ne]),T.useEffect(()=>{const Ae=()=>X(!1);return window.addEventListener("blur",Ae),window.addEventListener("resize",Ae),()=>{window.removeEventListener("blur",Ae),window.removeEventListener("resize",Ae)}},[X]);const[q,J]=Bz(Ae=>{const _e=M().filter(nt=>!nt.disabled),ve=_e.find(nt=>nt.ref.current===document.activeElement),Be=$z(_e,Ae,ve);Be&&setTimeout(()=>Be.ref.current.focus())}),Q=T.useCallback((Ae,_e,ve)=>{const Be=!se.current&&!ve;(_.value!==void 0&&_.value===_e||Be)&&(P(Ae),Be&&(se.current=!0))},[_.value]),te=T.useCallback(()=>E==null?void 0:E.focus(),[E]),ue=T.useCallback((Ae,_e,ve)=>{const Be=!se.current&&!ve;(_.value!==void 0&&_.value===_e||Be)&&H(Ae)},[_.value]),ge=r==="popper"?Fk:Cz,Ie=ge===Fk?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:w}:{};return p.jsx(Sz,{scope:n,content:E,viewport:k,onViewportChange:I,itemRefCallback:Q,selectedItem:N,onItemLeave:te,itemTextRefCallback:ue,focusSelectedItem:re,selectedItemText:L,position:r,isPositioned:K,searchRef:q,children:p.jsx(ob,{as:Xwe,allowPinchZoom:!0,children:p.jsx(sb,{asChild:!0,trapped:_.open,onMountAutoFocus:Ae=>{Ae.preventDefault()},onUnmountAutoFocus:qt(a,Ae=>{var _e;(_e=_.trigger)==null||_e.focus({preventScroll:!0}),Ae.preventDefault()}),children:p.jsx(Wp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:Ae=>Ae.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:p.jsx(ge,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:Ae=>Ae.preventDefault(),...x,...Ie,onPlaced:()=>U(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:qt(x.onKeyDown,Ae=>{const _e=Ae.ctrlKey||Ae.altKey||Ae.metaKey;if(Ae.key==="Tab"&&Ae.preventDefault(),!_e&&Ae.key.length===1&&J(Ae.key),["ArrowUp","ArrowDown","Home","End"].includes(Ae.key)){let Be=M().filter(nt=>!nt.disabled).map(nt=>nt.ref.current);if(["ArrowUp","End"].includes(Ae.key)&&(Be=Be.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ae.key)){const nt=Ae.target,Ve=Be.indexOf(nt);Be=Be.slice(Ve+1)}setTimeout(()=>ie(Be)),Ae.preventDefault()}})})})})})})});Ez.displayName=Ywe;var Jwe="SelectItemAlignedPosition",Cz=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=md(Ef,n),s=gd(Ef,n),[o,l]=T.useState(null),[u,d]=T.useState(null),h=Nn(t,j=>d(j)),m=A_(n),g=T.useRef(!1),v=T.useRef(!0),{viewport:b,selectedItem:w,selectedItemText:x,focusSelectedItem:_}=s,E=T.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&b&&w&&x){const j=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),L=x.getBoundingClientRect();if(i.dir!=="rtl"){const nt=L.left-N.left,Ve=P.left-nt,De=j.left-Ve,$=j.width+De,Ee=Math.max($,N.width),Te=window.innerWidth-ho,fe=Z0(Ve,[ho,Math.max(ho,Te-Ee)]);o.style.minWidth=$+"px",o.style.left=fe+"px"}else{const nt=N.right-L.right,Ve=window.innerWidth-P.right-nt,De=window.innerWidth-j.right-Ve,$=j.width+De,Ee=Math.max($,N.width),Te=window.innerWidth-ho,fe=Z0(Ve,[ho,Math.max(ho,Te-Ee)]);o.style.minWidth=$+"px",o.style.right=fe+"px"}const H=m(),M=window.innerHeight-ho*2,K=b.scrollHeight,U=window.getComputedStyle(u),se=parseInt(U.borderTopWidth,10),ie=parseInt(U.paddingTop,10),re=parseInt(U.borderBottomWidth,10),X=parseInt(U.paddingBottom,10),ne=se+ie+K+X+re,q=Math.min(w.offsetHeight*5,ne),J=window.getComputedStyle(b),Q=parseInt(J.paddingTop,10),te=parseInt(J.paddingBottom,10),ue=j.top+j.height/2-ho,ge=M-ue,Ie=w.offsetHeight/2,Ae=w.offsetTop+Ie,_e=se+ie+Ae,ve=ne-_e;if(_e<=ue){const nt=H.length>0&&w===H[H.length-1].ref.current;o.style.bottom="0px";const Ve=u.clientHeight-b.offsetTop-b.offsetHeight,De=Math.max(ge,Ie+(nt?te:0)+Ve+re),$=_e+De;o.style.height=$+"px"}else{const nt=H.length>0&&w===H[0].ref.current;o.style.top="0px";const De=Math.max(ue,se+b.offsetTop+(nt?Q:0)+Ie)+ve;o.style.height=De+"px",b.scrollTop=_e-ue+b.offsetTop}o.style.margin=`${ho}px 0`,o.style.minHeight=q+"px",o.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,o,u,b,w,x,i.dir,r]);ai(()=>E(),[E]);const[C,k]=T.useState();ai(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const I=T.useCallback(j=>{j&&v.current===!0&&(E(),_==null||_(),v.current=!1)},[E,_]);return p.jsx(exe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:I,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:p.jsx(an.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Cz.displayName=Jwe;var Qwe="SelectPopperPosition",Fk=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=ho,...i}=e,s=N_(n);return p.jsx(O1,{...s,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Fk.displayName=Qwe;var[exe,TR]=mm(Ef,{}),Lk="SelectViewport",Tz=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=gd(Lk,n),s=TR(Lk,n),o=Nn(t,i.onViewportChange),l=T.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(k_.Slot,{scope:n,children:p.jsx(an.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:qt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=s;if(m!=null&&m.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const v=window.innerHeight-ho*2,b=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(b,w);if(x<v){const _=x+g,E=Math.min(v,_),C=_-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});Tz.displayName=Lk;var kz="SelectGroup",[txe,nxe]=mm(kz),rxe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ha();return p.jsx(txe,{scope:n,id:a,children:p.jsx(an.div,{role:"group","aria-labelledby":a,...r,ref:t})})});rxe.displayName=kz;var Az="SelectLabel",axe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=nxe(Az,n);return p.jsx(an.div,{id:a.id,...r,ref:t})});axe.displayName=Az;var e1="SelectItem",[ixe,Nz]=mm(e1),Rz=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,o=md(e1,n),l=gd(e1,n),u=o.value===r,[d,h]=T.useState(i??""),[m,g]=T.useState(!1),v=Nn(t,_=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,_,r,a)}),b=Ha(),w=T.useRef("touch"),x=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(ixe,{scope:n,value:r,disabled:a,textId:b,isSelected:u,onItemTextChange:T.useCallback(_=>{h(E=>E||((_==null?void 0:_.textContent)??"").trim())},[]),children:p.jsx(k_.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:p.jsx(an.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:v,onFocus:qt(s.onFocus,()=>g(!0)),onBlur:qt(s.onBlur,()=>g(!1)),onClick:qt(s.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:qt(s.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:qt(s.onPointerDown,_=>{w.current=_.pointerType}),onPointerMove:qt(s.onPointerMove,_=>{var E;w.current=_.pointerType,a?(E=l.onItemLeave)==null||E.call(l):w.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qt(s.onPointerLeave,_=>{var E;_.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:qt(s.onKeyDown,_=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&_.key===" "||(Vwe.includes(_.key)&&x(),_.key===" "&&_.preventDefault())})})})})});Rz.displayName=e1;var Vg="SelectItemText",Iz=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=md(Vg,n),o=gd(Vg,n),l=Nz(Vg,n),u=Wwe(Vg,n),[d,h]=T.useState(null),m=Nn(t,x=>h(x),l.onItemTextChange,x=>{var _;return(_=o.itemTextRefCallback)==null?void 0:_.call(o,x,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=T.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=u;return ai(()=>(b(v),()=>w(v)),[b,w,v]),p.jsxs(p.Fragment,{children:[p.jsx(an.span,{id:l.textId,...i,ref:m}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?sl.createPortal(i.children,s.valueNode):null]})});Iz.displayName=Vg;var jz="SelectItemIndicator",Dz=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Nz(jz,n).isSelected?p.jsx(an.span,{"aria-hidden":!0,...r,ref:t}):null});Dz.displayName=jz;var Bk="SelectScrollUpButton",Mz=T.forwardRef((e,t)=>{const n=gd(Bk,e.__scopeSelect),r=TR(Bk,e.__scopeSelect),[a,i]=T.useState(!1),s=Nn(t,r.onScrollButtonChange);return ai(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(Pz,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});Mz.displayName=Bk;var $k="SelectScrollDownButton",Oz=T.forwardRef((e,t)=>{const n=gd($k,e.__scopeSelect),r=TR($k,e.__scopeSelect),[a,i]=T.useState(!1),s=Nn(t,r.onScrollButtonChange);return ai(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(Pz,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});Oz.displayName=$k;var Pz=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=gd("SelectScrollButton",n),s=T.useRef(null),o=A_(n),l=T.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),ai(()=>{var d;const u=o().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),p.jsx(an.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:qt(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:qt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:qt(a.onPointerLeave,()=>{l()})})}),sxe="SelectSeparator",oxe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(an.div,{"aria-hidden":!0,...r,ref:t})});oxe.displayName=sxe;var zk="SelectArrow",lxe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=N_(n),i=md(zk,n),s=gd(zk,n);return i.open&&s.position==="popper"?p.jsx(P1,{...a,...r,ref:t}):null});lxe.displayName=zk;var cxe="SelectBubbleInput",Fz=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=T.useRef(null),i=Nn(r,a),s=E_(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(an.select,{...n,style:{...pL,...n.style},ref:i,defaultValue:t})});Fz.displayName=cxe;function Lz(e){return e===""||e===void 0}function Bz(e){const t=Ua(e),n=T.useRef(""),r=T.useRef(0),a=T.useCallback(s=>{const o=n.current+s;t(o),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),i=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function $z(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=uxe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function uxe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var dxe=mz,fxe=yz,hxe=vz,pxe=wz,mxe=xz,gxe=_z,yxe=Tz,bxe=Rz,vxe=Iz,wxe=Dz,xxe=Mz,_xe=Oz;function fc({...e}){return p.jsx(dxe,{"data-slot":"select",...e})}function hc({...e}){return p.jsx(hxe,{"data-slot":"select-value",...e})}function pc({className:e,size:t="default",children:n,...r}){return p.jsxs(fxe,{"data-slot":"select-trigger","data-size":t,className:xt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,p.jsx(pxe,{asChild:!0,children:p.jsx(_o,{className:"size-4 opacity-50"})})]})}function mc({className:e,children:t,position:n="popper",...r}){return p.jsx(mxe,{children:p.jsxs(gxe,{"data-slot":"select-content",className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(Sxe,{}),p.jsx(yxe,{className:xt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),p.jsx(Exe,{})]})})}function _a({className:e,children:t,...n}){return p.jsxs(bxe,{"data-slot":"select-item",className:xt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[p.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(wxe,{children:p.jsx(Ga,{className:"size-4"})})}),p.jsx(vxe,{children:t})]})}function Sxe({className:e,...t}){return p.jsx(xxe,{"data-slot":"select-scroll-up-button",className:xt("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(yc,{className:"size-4"})})}function Exe({className:e,...t}){return p.jsx(_xe,{"data-slot":"select-scroll-down-button",className:xt("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(_o,{className:"size-4"})})}var Cxe="Label",zz=T.forwardRef((e,t)=>p.jsx(an.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));zz.displayName=Cxe;var Txe=zz;function Wt({className:e,...t}){return p.jsx(Txe,{"data-slot":"label",className:xt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const Uz=({initialProviderType:e=null,initialName:t="",initialValue:n="",initialApiKeyId:r=null,onSave:a,onCancel:i,isSaving:s,className:o})=>{const[l,u]=T.useState(t),[d,h]=T.useState(n),[m,g]=T.useState(e),v=T.useRef(null);T.useEffect(()=>{u(t),h(n),g(e)},[t,n,e,r]);const b=T.useCallback(x=>{var k,I;const _=x;g(_);const E=(k=oc.find(j=>j.value===_))==null?void 0:k.label,C=(I=oc.find(j=>j.value===m))==null?void 0:I.label;E&&(!l.trim()||l===`${C}`)&&u(`${E}`),requestAnimationFrame(()=>{var j;(j=v.current)==null||j.focus()})},[l,m]),w=T.useCallback(async()=>{if(!l.trim()||!d.trim()||!m){qe.error("Key Name, Provider Type, and API Key Value are required.");return}await a(l.trim(),m,d.trim())},[l,d,m,a]);return p.jsxs("div",{className:xt("space-y-4",o),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"api-key-provider",children:"Provider Type"}),p.jsxs(fc,{value:m??"",onValueChange:b,disabled:s,children:[p.jsx(pc,{id:"api-key-provider",children:p.jsx(hc,{placeholder:"Select Provider Type"})}),p.jsx(mc,{children:oc.map(x=>p.jsx(_a,{value:x.value,children:x.label},x.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"api-key-name",children:"Key Name"}),p.jsx(kn,{id:"api-key-name",value:l,onChange:x=>u(x.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:s})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"api-key-value",children:"API Key Value"}),p.jsx(kn,{ref:v,id:"api-key-value",type:"password",value:d,onChange:x=>h(x.target.value),placeholder:"Enter your API key",required:!0,disabled:s,autoComplete:"new-password"})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:i,disabled:s,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:w,disabled:s||!l.trim()||!d.trim()||!m,type:"button",children:[s&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Rf,{className:"h-4 w-4 mr-1"})," ",s?"Saving...":"Save API Key"]})]})]})};var R_="Switch",[kxe,J3e]=wi(R_),[Axe,Nxe]=kxe(R_),Vz=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,g]=T.useState(null),v=Nn(t,E=>g(E)),b=T.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,_]=To({prop:a,defaultProp:i??!1,onChange:u,caller:R_});return p.jsxs(Axe,{scope:n,checked:x,disabled:o,children:[p.jsx(an.button,{type:"button",role:"switch","aria-checked":x,"aria-required":s,"data-state":Wz(x),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onClick:qt(e.onClick,E=>{_(C=>!C),w&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),w&&p.jsx(Gz,{control:m,bubbles:!b.current,name:r,value:l,checked:x,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Vz.displayName=R_;var Hz="SwitchThumb",qz=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Nxe(Hz,n);return p.jsx(an.span,{"data-state":Wz(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});qz.displayName=Hz;var Rxe="SwitchBubbleInput",Gz=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const s=T.useRef(null),o=Nn(s,i),l=E_(n),u=D1(t);return T.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&g){const v=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(v)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Gz.displayName=Rxe;function Wz(e){return e?"checked":"unchecked"}var Ixe=Vz,jxe=qz;function qs({className:e,...t}){return p.jsx(Ixe,{"data-slot":"switch",className:xt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(jxe,{"data-slot":"switch-thumb",className:xt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const Dxe=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var u;const s=d=>{r(d==="none"?null:d)},o=(u=a.find(d=>d.id===n))==null?void 0:u.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return p.jsxs(fc,{value:n??"none",onValueChange:s,disabled:i||a.length===0,children:[p.jsx(pc,{className:xt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:p.jsx(hc,{asChild:!0,children:p.jsxs("div",{className:"flex items-center overflow-hidden",children:[p.jsx(i0,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),p.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&p.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?p.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),p.jsxs(mc,{className:"bg-popover border-border text-popover-foreground",children:[p.jsx(_a,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>p.jsx(_a,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},Kz=({formData:e,onChange:t,apiKeys:n,disabled:r=!1,className:a})=>{const i=S0(e.type??null),s=zF(e.type??null),o=nf(e.type??null),l=T.useCallback(d=>{var v,b,w;const h=d;t("type",h),t("apiKeyId",null),t("baseURL",null),t("autoFetchModels",nf(h));const m=(v=oc.find(x=>x.value===h))==null?void 0:v.label,g=(b=oc.find(x=>x.value===e.type))==null?void 0:b.label;m&&(!((w=e.name)!=null&&w.trim())||e.name===g)&&t("name",m)},[t,e.name,e.type]),u=(n||[]).filter(d=>!e.type||d.providerId===e.type);return p.jsxs("div",{className:xt("space-y-3",a),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"provider-type",children:"Provider Type"}),p.jsxs(fc,{value:e.type??"",onValueChange:l,disabled:r,children:[p.jsx(pc,{id:"provider-type",children:p.jsx(hc,{placeholder:"Select Type"})}),p.jsx(mc,{children:oc.map(d=>p.jsx(_a,{value:d.value,children:d.label},d.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"provider-name",children:"Provider Name"}),p.jsx(kn,{id:"provider-name",value:e.name||"",onChange:d=>t("name",d.target.value),placeholder:"e.g., My Ollama",disabled:r,"aria-label":"Provider Name"})]}),i&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Wt,{children:"API Key"}),p.jsx(Dxe,{label:"API Key",selectedKeyId:e.apiKeyId??null,onKeySelected:d=>t("apiKeyId",d),apiKeys:u,disabled:r||!e.type})]}),s&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Wt,{htmlFor:"provider-baseurl",children:"Base URL"}),p.jsx(kn,{id:"provider-baseurl",value:e.baseURL||"",onChange:d=>t("baseURL",d.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:r,"aria-label":"Base URL"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(qs,{id:"provider-enabled",checked:e.isEnabled??!0,onCheckedChange:d=>t("isEnabled",d),disabled:r,"aria-labelledby":"provider-enabled-label"}),p.jsx(Wt,{id:"provider-enabled-label",htmlFor:"provider-enabled",children:"Enabled"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(qs,{id:"provider-autofetch",checked:e.autoFetchModels??!1,onCheckedChange:d=>t("autoFetchModels",d),disabled:!o||r,"aria-labelledby":"provider-autofetch-label"}),p.jsxs(Wt,{id:"provider-autofetch-label",htmlFor:"provider-autofetch",className:xt("text-sm",o?"":"text-muted-foreground"),children:["Auto-fetch models ",o?"":"(Not Supported)"]})]})]})]})},Zz=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:a="",initialApiKeyId:i=null})=>{var m;const[s,o]=T.useState(!1),[l,u]=T.useState({name:a,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,autoFetchModels:nf(r)});T.useEffect(()=>{u(g=>({...g,name:a||g.name||"",type:r||g.type||null,apiKeyId:i||g.apiKeyId||null,autoFetchModels:r?nf(r):g.autoFetchModels}))},[a,r,i]);const d=T.useCallback((g,v)=>{u(b=>{var _,E;const w={...b,[g]:v},x=b.name||"";if(g==="type"){const C=v,k=(_=oc.find(j=>j.value===b.type))==null?void 0:_.label;w.apiKeyId=null,w.baseURL=null,w.autoFetchModels=C?nf(C):!1;const I=(E=oc.find(j=>j.value===C))==null?void 0:E.label;if(I&&(!x.trim()||x===k)&&(w.name=I),C&&S0(C)){const j=(e||[]).filter(N=>N.providerId===C);j.length>0&&(w.apiKeyId=j[0].id)}}return w})},[e]),h=T.useCallback(async()=>{var g,v;if(!((g=l.name)!=null&&g.trim())||!l.type){qe.error("Provider Name and Type are required.");return}o(!0);try{const b=l.type,w=l.autoFetchModels??nf(b),x={name:l.name.trim(),type:b,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((v=l.baseURL)==null?void 0:v.trim())||null,enabledModels:null,autoFetchModels:w,fetchedModels:null,modelsLastFetchedAt:null};await t(x),n()}catch(b){console.error("Failed to add provider (from form component):",b)}finally{o(!1)}},[l,t,n]);return p.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),p.jsx(Kz,{formData:l,onChange:d,apiKeys:e,disabled:s}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:n,disabled:s,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:h,disabled:s||!((m=l.name)!=null&&m.trim())||!l.type,type:"button",children:[s&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Rf,{className:"h-4 w-4 mr-1"})," ",s?"Adding...":"Add Provider"]})]})]})};var I_="Popover",[Yz,Q3e]=wi(I_,[id]),lb=id(),[Mxe,yd]=Yz(I_),Xz=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=lb(t),l=T.useRef(null),[u,d]=T.useState(!1),[h,m]=To({prop:r,defaultProp:a??!1,onChange:i,caller:I_});return p.jsx(M1,{...o,children:p.jsx(Mxe,{scope:t,contentId:Ha(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:T.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:T.useCallback(()=>d(!0),[]),onCustomAnchorRemove:T.useCallback(()=>d(!1),[]),modal:s,children:n})})};Xz.displayName=I_;var Jz="PopoverAnchor",Oxe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=yd(Jz,n),i=lb(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return T.useEffect(()=>(s(),()=>o()),[s,o]),p.jsx(Ey,{...i,...r,ref:t})});Oxe.displayName=Jz;var Qz="PopoverTrigger",eU=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=yd(Qz,n),i=lb(n),s=Nn(t,a.triggerRef),o=p.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":iU(a.open),...r,ref:s,onClick:qt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:p.jsx(Ey,{asChild:!0,...i,children:o})});eU.displayName=Qz;var kR="PopoverPortal",[Pxe,Fxe]=Yz(kR,{forceMount:void 0}),tU=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=yd(kR,t);return p.jsx(Pxe,{scope:t,forceMount:n,children:p.jsx(Za,{present:n||i.open,children:p.jsx(Yp,{asChild:!0,container:a,children:r})})})};tU.displayName=kR;var $p="PopoverContent",nU=T.forwardRef((e,t)=>{const n=Fxe($p,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=yd($p,e.__scopePopover);return p.jsx(Za,{present:r||i.open,children:i.modal?p.jsx(Bxe,{...a,ref:t}):p.jsx($xe,{...a,ref:t})})});nU.displayName=$p;var Lxe=Mu("PopoverContent.RemoveScroll"),Bxe=T.forwardRef((e,t)=>{const n=yd($p,e.__scopePopover),r=T.useRef(null),a=Nn(t,r),i=T.useRef(!1);return T.useEffect(()=>{const s=r.current;if(s)return C_(s)},[]),p.jsx(ob,{as:Lxe,allowPinchZoom:!0,children:p.jsx(rU,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:qt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),$xe=T.forwardRef((e,t)=>{const n=yd($p,e.__scopePopover),r=T.useRef(!1),a=T.useRef(!1);return p.jsx(rU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),rU=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=e,m=yd($p,n),g=lb(n);return S_(),p.jsx(sb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(Wp,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:p.jsx(O1,{"data-state":iU(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),aU="PopoverClose",zxe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=yd(aU,n);return p.jsx(an.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});zxe.displayName=aU;var Uxe="PopoverArrow",Vxe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=lb(n);return p.jsx(P1,{...a,...r,ref:t})});Vxe.displayName=Uxe;function iU(e){return e?"open":"closed"}var Hxe=Xz,qxe=eU,Gxe=tU,Wxe=nU;function Mc({...e}){return p.jsx(Hxe,{"data-slot":"popover",...e})}function Oc({...e}){return p.jsx(qxe,{"data-slot":"popover-trigger",...e})}function Pc({className:e,align:t="center",sideOffset:n=4,...r}){return p.jsx(Gxe,{children:p.jsx(Wxe,{"data-slot":"popover-content",align:t,sideOffset:n,className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const xP=e=>{if(!e)return null;const t=parseFloat(e);return isNaN(t)?null:t/1e6},AR=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:s="h-48",onModelClick:o})=>{const[l,u]=T.useState(""),[d,h]=T.useState(!1),[m,g]=T.useState("all"),[v,b]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[w,x]=T.useState(""),[_,E]=T.useState(""),[C,k]=T.useState(""),[I,j]=T.useState(""),N=T.useMemo(()=>{let H=t;if(m==="enabled"?H=H.filter(J=>n.has(J.id)):m==="disabled"&&(H=H.filter(J=>!n.has(J.id))),l.trim()){const J=l.toLowerCase();H=H.filter(Q=>Q.name.toLowerCase().includes(J)||Q.id.toLowerCase().includes(J))}const M=Object.entries(v).filter(([,J])=>J).map(([J])=>J);M.length>0&&(H=H.filter(J=>{var ue;const Q=new Set(J.supported_parameters??[]),te=new Set(((ue=J.architecture)==null?void 0:ue.input_modalities)??[]);return M.every(ge=>{switch(ge){case"reasoning":return Q.has("reasoning");case"webSearch":return Q.has("web_search")||Q.has("web_search_options");case"tools":return Q.has("tools");case"multimodal":return Array.from(te).some(Ie=>Ie!=="text");default:return!0}})}));const K=parseFloat(w),U=parseFloat(_),se=parseFloat(C),ie=parseFloat(I),re=!isNaN(K),X=!isNaN(U),ne=!isNaN(se),q=!isNaN(ie);return(re||X||ne||q)&&(H=H.filter(J=>{var nt,Ve;const Q=xP((nt=J.pricing)==null?void 0:nt.prompt),te=xP((Ve=J.pricing)==null?void 0:Ve.completion),ue=re?K/1e6:-1/0,ge=X?U/1e6:1/0,Ie=ne?se/1e6:-1/0,Ae=q?ie/1e6:1/0,_e=Q!==null&&Q>=ue&&Q<=ge,ve=te!==null&&te>=Ie&&te<=Ae;let Be=!0;return(re||X)&&Be&&(Be=_e),(ne||q)&&Be&&(Be=ve),Be})),H},[t,l,m,n,v,w,_,C,I]),P=H=>{b(M=>({...M,[H]:!M[H]}))},L=(m!=="all"?1:0)+Object.values(v).filter(Boolean).length+(w||_||C||I?1:0);return a?p.jsxs("div",{className:`space-y-2 ${s}`,children:[p.jsx(cr,{className:"h-8 w-full"}),p.jsx(cr,{className:"h-8 w-full"}),p.jsx(cr,{className:"h-8 w-full"})]}):t.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(Qi,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(kn,{value:l,onChange:H=>u(H.target.value),placeholder:"Filter models by name...",className:"pl-8 h-9 w-full text-xs",type:"text",disabled:i})]}),p.jsxs(Mc,{open:d,onOpenChange:h,children:[p.jsx(Oc,{asChild:!0,children:p.jsxs(It,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:i,children:[p.jsx(IZ,{className:"h-4 w-4 mr-1"}),"Filters",L>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:L})]})}),p.jsxs(Pc,{className:"w-72 p-4 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Wt,{className:"text-xs font-semibold",children:"Status"}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(It,{variant:m==="all"?"secondary":"outline",size:"sm",onClick:()=>g("all"),children:"All"}),p.jsxs(It,{variant:m==="enabled"?"secondary":"outline",size:"sm",onClick:()=>g("enabled"),children:[p.jsx(Ga,{className:"h-3 w-3 mr-1"})," Enabled"]}),p.jsxs(It,{variant:m==="disabled"?"secondary":"outline",size:"sm",onClick:()=>g("disabled"),children:[p.jsx(BK,{className:"h-3 w-3 mr-1"})," Disabled"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Wt,{className:"text-xs font-semibold",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.jsx(Cn,{tooltipText:"Reasoning","aria-label":"Reasoning",icon:p.jsx(Af,{}),onClick:()=>P("reasoning"),variant:v.reasoning?"secondary":"outline",className:xt(v.reasoning&&"text-primary")}),p.jsx(Cn,{tooltipText:"Web Search","aria-label":"Web Search",icon:p.jsx(Qi,{}),onClick:()=>P("webSearch"),variant:v.webSearch?"secondary":"outline",className:xt(v.webSearch&&"text-primary")}),p.jsx(Cn,{tooltipText:"Tools","aria-label":"Tools",icon:p.jsx(vA,{}),onClick:()=>P("tools"),variant:v.tools?"secondary":"outline",className:xt(v.tools&&"text-primary")}),p.jsx(Cn,{tooltipText:"Multimodal","aria-label":"Multimodal",icon:p.jsx(op,{}),onClick:()=>P("multimodal"),variant:v.multimodal?"secondary":"outline",className:xt(v.multimodal&&"text-primary")})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Wt,{className:"text-xs font-semibold flex items-center gap-1",children:[p.jsx(jw,{className:"h-3 w-3"})," Price Range ($ / 1M Tokens)"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(kn,{type:"number",min:"0",step:"0.01",placeholder:"Min Input",value:w,onChange:H=>x(H.target.value),className:"h-8 text-xs","aria-label":"Minimum input price per million tokens"}),p.jsx(kn,{type:"number",min:"0",step:"0.01",placeholder:"Max Input",value:_,onChange:H=>E(H.target.value),className:"h-8 text-xs","aria-label":"Maximum input price per million tokens"}),p.jsx(kn,{type:"number",min:"0",step:"0.01",placeholder:"Min Output",value:C,onChange:H=>k(H.target.value),className:"h-8 text-xs","aria-label":"Minimum output price per million tokens"}),p.jsx(kn,{type:"number",min:"0",step:"0.01",placeholder:"Max Output",value:I,onChange:H=>j(H.target.value),className:"h-8 text-xs","aria-label":"Maximum output price per million tokens"})]})]})]})]})]}),p.jsx(wl,{className:`${s} w-full rounded-md border border-border p-3 bg-background/50`,children:p.jsxs("div",{className:"space-y-2",children:[N.map(H=>p.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[p.jsx(qs,{id:`enable-model-${e}-${H.id}`,checked:n.has(H.id),onCheckedChange:M=>r(H.id,M),disabled:i,"aria-label":`Enable model ${H.name||H.id}`,className:"flex-shrink-0",onClick:M=>M.stopPropagation()}),p.jsx(Wt,{htmlFor:`enable-model-${e}-${H.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate pl-2",title:H.name||H.id,onClick:o?()=>o(H.id):void 0,children:H.name||H.id})]},H.id)),N.length===0&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No models match the current filters."})]})})]})},Xd=gt.forwardRef(({className:e,href:t,children:n,...r},a)=>p.jsx("a",{ref:a,href:t,target:"_blank",rel:"noopener noreferrer",className:xt("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));Xd.displayName="Lnk";const Kxe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})},Zxe=cA("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function pp({className:e,variant:t,asChild:n=!1,...r}){const a=n?_8:"span";return p.jsx(a,{"data-slot":"badge",className:xt(Zxe({variant:t}),e),...r})}const Yxe=()=>{const[e,t]=T.useState(!1);T.useEffect(()=>{t(!0)},[]);const n={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},a=[{word:"LiteChat",color:"bg-gradient-to-tr from-lime-500 via-amber-400 to-red-600 bg-clip-text text-transparent"},{word:"library",color:"text-emerald-500"},{word:"browser",color:"text-violet-500"},{word:"local",color:"text-amber-500"},{word:"remote",color:"text-sky-500"},{word:"providers",color:"text-purple-500"},{word:" AI ",color:"bg-gradient-to-b from-amber-300 to-rose-700 bg-clip-text text-transparent"},{word:"Open Source",color:"bg-gradient-to-r from-lime-500 to-yellow-500 bg-clip-text text-transparent"}],i=o=>{let l=[o];return a.forEach(({word:u,color:d})=>{l=l.reduce((h,m)=>typeof m!="string"?(h.push(m),h):(m.split(new RegExp(`(${u})`,"gi")).forEach((v,b)=>{v.toLowerCase()===u.toLowerCase()?h.push(p.jsx("span",{className:`${d} font-medium`,children:v},`${v}-${b}`)):h.push(v)}),h),[])}),l=l.reduce((u,d,h)=>{if(typeof d!="string")return u.push(d),u;const m=/(\([^)]*\))/g;return d.split(m).forEach((v,b)=>{m.test(v)?u.push(p.jsx("span",{className:"text-sm text-muted",children:v},`paren-${h}-${b}`)):u.push(v)}),u},[]),l},s=["Oh, hey?! Hi there!! How are you doing!?","Nice of you to pop by to checkout LiteChat!","What'd you mean you don't know what LiteChat is? Oh Boy hey, you in for a treat!","To start with, it's an(other) AI chat app (yes...shocker, right ?) and it's Open Source ! ","But, it is also an extensible library, so you can go on and create your own, AI chat app! With your own functionnalities !","(are AI chat apps the new JS frameworks?)","And cause I might be a wee bit on the reluctant side when it comes to parting with my coins, it doesn't require no servers! It all stays in your browser.","(that means I couldn't snoop on what you do here, even if I wanted to!)","While able to run LLM both local (did I tell you I ain't liking throwing coins out?) and from remote providers","(but sometimes you have to :(..)","To cap things off, there is no fancy/crazy tech involved, I just glued bricks together with AI","(kids call it vibing apparently ^^)","Enough of this interminable babble! Go setup your future chat to prompt your brains out!"];return p.jsxs(mo.div,{className:"text-center max-w-4xl mx-auto space-y-3 my-6",initial:"hidden",animate:e?"show":"hidden",variants:n,children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsxs(pp,{variant:"outline",className:"px-3 py-1 bg-black/5 dark:bg-white/10 backdrop-blur-sm border-none",children:[p.jsx(q8,{className:"w-4 h-4 mr-2 text-yellow-500"}),p.jsx("span",{className:"text-sm",children:"Welcome to your future AI chat"})]})}),s.map((o,l)=>p.jsx(mo.p,{className:`text-sm md:text-base ${l===0?"font-medium":""} leading-relaxed`,variants:r,children:i(o)},l)),p.jsxs(mo.div,{variants:r,className:"pt-2",children:[p.jsx(pp,{className:"bg-gradient-to-r from-violet-600 to-primary border-none",children:"No server required!"}),p.jsx(pp,{className:"ml-2 bg-gradient-to-r from-amber-500 to-emerald-500 border-none",children:"100% in-browser"})]})]})};var NR="Progress",RR=100,[Xxe,eIe]=wi(NR),[Jxe,Qxe]=Xxe(NR),sU=T.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=e1e,...s}=e;(a||a===0)&&!_P(a)&&console.error(t1e(`${a}`,"Progress"));const o=_P(a)?a:RR;r!==null&&!SP(r,o)&&console.error(n1e(`${r}`,"Progress"));const l=SP(r,o)?r:null,u=t1(l)?i(l,o):void 0;return p.jsx(Jxe,{scope:n,value:l,max:o,children:p.jsx(an.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":t1(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":cU(l,o),"data-value":l??void 0,"data-max":o,...s,ref:t})})});sU.displayName=NR;var oU="ProgressIndicator",lU=T.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=Qxe(oU,n);return p.jsx(an.div,{"data-state":cU(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});lU.displayName=oU;function e1e(e,t){return`${Math.round(e/t*100)}%`}function cU(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function t1(e){return typeof e=="number"}function _P(e){return t1(e)&&!isNaN(e)&&e>0}function SP(e,t){return t1(e)&&!isNaN(e)&&e<=t&&e>=0}function t1e(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${RR}\`.`}function n1e(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${RR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var uU=sU,r1e=lU;const Uk=T.forwardRef(({className:e,value:t,...n},r)=>p.jsx(uU,{ref:r,className:xt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:p.jsx(r1e,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Uk.displayName=uU.displayName;const a1e=({stepNumber:e,title:t,description:n,isComplete:r,isActive:a,openOnComplete:i=!1,contentClassName:s="",icon:o,children:l})=>{const[u,d]=T.useState(!1);return T.useEffect(()=>{d(a||r&&i)},[a,r,i]),p.jsxs(C7,{className:`border border-border/40 bg-card/50 backdrop-blur-sm shadow-lg ${r?"border-l-4 border-l-green-500/70":a?"border-l-4 border-l-primary/70":""}`,children:[p.jsx(T7,{className:"pb-2",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${r?"bg-green-500/20 text-green-500":a?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:r?p.jsx(dA,{className:"h-5 w-5"}):p.jsx("div",{className:"flex items-center justify-center",children:o})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>d(!u),children:[p.jsxs(k7,{className:"text-base",children:[p.jsxs("span",{className:"opacity-60 mr-2",children:[e,"."]}),t]}),p.jsx("button",{className:`p-1 rounded-full transition-all ${u?"rotate-90":""} hover:bg-muted/60`,children:p.jsx(L8,{className:"h-4 w-4"})})]}),!u&&p.jsx(sge,{className:"text-xs mt-1",children:typeof n=="string"?n.substring(0,60)+(n.length>60?"...":""):"Click to expand"})]})]})}),p.jsx(fge,{children:u&&p.jsx(mo.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:p.jsxs(A7,{className:"pt-2",children:[typeof n=="string"?p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}):p.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:n}),p.jsx("div",{className:s,children:l})]})})})]})},i1e=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:a,getAllAvailableModelDefsForProvider:i,isLoading:s,enableApiKeyManagement:o}=Un(sn(ge=>({apiKeys:ge.dbApiKeys,addApiKey:ge.addApiKey,providers:ge.dbProviderConfigs,addProviderConfig:ge.addProviderConfig,updateProviderConfig:ge.updateProviderConfig,getAllAvailableModelDefsForProvider:ge.getAllAvailableModelDefsForProvider,isLoading:ge.isLoading,enableApiKeyManagement:ge.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:u}=Ji(sn(ge=>({toggleChatControlPanel:ge.toggleChatControlPanel,setInitialSettingsTabs:ge.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=mn(sn(ge=>({addConversation:ge.addConversation,selectItem:ge.selectItem}))),[m,g]=T.useState(!1),[v,b]=T.useState(!1),[w,x]=T.useState(!1),[_,E]=T.useState(!1),[C,k]=T.useState(!1),I=T.useMemo(()=>!o||e.length>0,[o,e]),j=T.useMemo(()=>n.length>0,[n]),N=T.useMemo(()=>n.some(ge=>ge.isEnabled&&ge.enabledModels&&ge.enabledModels.length>0),[n]),P=T.useMemo(()=>{const ge=[...n].sort((Ie,Ae)=>Ae.createdAt.getTime()-Ie.createdAt.getTime());return ge.length>0?ge[0]:null},[n]),L=T.useMemo(()=>P?i(P.id):[],[P,i]),H=T.useMemo(()=>new Set((P==null?void 0:P.enabledModels)??[]),[P]),{initialProviderTypeForForm:M,initialProviderNameForForm:K,initialApiKeyIdForForm:U}=T.useMemo(()=>{var ge;if(j)return{type:void 0,name:void 0,keyId:void 0};if(e.length>0){const Ae=[...e].sort((_e,ve)=>ve.createdAt.getTime()-_e.createdAt.getTime()).find(_e=>S0(_e.providerId));if(Ae){const _e=Ae.providerId,ve=((ge=oc.find(Be=>Be.value===_e))==null?void 0:ge.label)||_e;return{initialProviderTypeForForm:_e,initialProviderNameForForm:ve,initialApiKeyIdForForm:Ae.id}}}return{initialProviderTypeForForm:void 0,initialProviderNameForForm:void 0,initialApiKeyIdForForm:void 0}},[e,j]),se=T.useCallback(async(ge,Ie,Ae)=>{g(!0);try{await t(ge,Ie,Ae),qe.success("API key added successfully!")}finally{g(!1)}},[t]),ie=T.useCallback(async ge=>{b(!0);try{const Ie={...ge,apiKeyId:ge.apiKeyId??(S0(ge.type)?U:null)},Ae=await r(Ie);return qe.success("Provider added successfully!"),Ae}finally{b(!1)}},[r,U]),re=T.useCallback(async(ge,Ie)=>{if(!P)return;E(!0);const Ae=new Set(P.enabledModels??[]);Ie?Ae.add(ge):Ae.delete(ge);const _e=Array.from(Ae);try{await a(P.id,{enabledModels:_e}),qe.success(Ie?"Model enabled successfully!":"Model disabled successfully!")}catch(ve){qe.error("Failed to update model status."),console.error("Failed to save model toggle:",ve)}finally{E(!1)}},[P,a]),X=T.useCallback(async()=>{x(!0),k(!0);try{await new Promise(Ie=>setTimeout(Ie,800));const ge=await d({title:"New Chat"});await h(ge,"conversation"),qe.success("Welcome to your first chat!")}catch(ge){qe.error("Failed to start your first chat."),console.error("Failed to start first chat:",ge),x(!1),k(!1)}},[d,h]),ne=(ge,Ie)=>{u(ge,Ie),l("settingsModal",!0)},q=[I,j,N].filter(Boolean).length,J=o?3:2,Q=q/J*100,te=[...o?[{id:"api-key",title:"Add API Key",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["To use providers like"," ",p.jsx(Xd,{href:"https://platform.openai.com/api-keys",className:"text-blue-500 hover:text-blue-700 transition-colors",children:"OpenAI"}),","," ",p.jsx(Xd,{href:"https://aistudio.google.com/app/apikey",className:"text-green-600 hover:text-green-700 transition-colors",children:"Google"}),","," ",p.jsx(Xd,{href:"https://console.anthropic.com/settings/keys",className:"text-purple-500 hover:text-purple-700 transition-colors",children:"Anthropic (Claude)"}),", or"," ",p.jsx(Xd,{href:"https://openrouter.ai/keys",className:"text-orange-500 hover:text-orange-700 transition-colors",children:"OpenRouter"})," ","or any OpenAI API compatible provider, add an API key. Keys are stored securely in your browser."]}),p.jsxs("p",{children:['If you want truly local AI, "no internet required", you can setup'," ",p.jsx(Xd,{href:"https://www.ollama.com/",className:"text-teal-500 hover:text-teal-700 transition-colors",children:"Ollama"})," ","or,"," ",p.jsx(Xd,{href:"https://lmstudio.ai/",className:"text-indigo-500 hover:text-indigo-700 transition-colors",children:"LMStudio"})," ","(or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys so see you in step 2."]})]}),isComplete:I,content:p.jsx(Uz,{onSave:se,onCancel:()=>{},isSaving:m,className:"border-none shadow-none p-0",initialProviderType:M}),icon:p.jsx(i0,{className:"h-4 w-4"})}]:[],{id:"add-provider",title:"Add AI Provider",description:p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{children:"Connect to an AI provider you configured the key for..."}),p.jsx("p",{children:"This might look redundant, but it allows you to have multiple keys for the same provider (personal, professional, etc.)"})]}),isComplete:j,content:p.jsx(Zz,{apiKeys:e,onAddProvider:ie,onCancel:()=>{},initialType:M,initialName:K,initialApiKeyId:U}),icon:p.jsx(Ww,{className:"h-4 w-4"})},{id:"enable-models",title:"Enable Models",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["Enable models for the provider you just added (",p.jsx("span",{className:"font-medium text-primary",children:(P==null?void 0:P.name)||"..."}),")."]}),p.jsx("p",{children:"Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."}),p.jsx("p",{children:"And just like before, you can choose to activate a model for a certain combination of key/provider!"})]}),isComplete:N,content:P?p.jsx("div",{className:"bg-card/40 rounded-lg p-3 border border-border/30 shadow-inner",children:p.jsx(AR,{providerId:P.id,allAvailableModels:L,enabledModelIds:H,onToggleModel:re,isLoading:s||_,listHeightClass:"h-48"})}):p.jsxs("p",{className:"text-sm text-muted-foreground italic flex items-center",children:[p.jsx(Ou,{className:"h-4 w-4 mr-2 text-amber-500"}),"Add a provider in Step ",o?"2":"1"," first."]}),icon:p.jsx(Af,{className:"h-4 w-4"})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:p.jsxs("div",{children:[C&&p.jsx(mo.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:p.jsx(Uk,{value:w?void 0:100,className:"h-2"})}),p.jsxs(It,{onClick:X,disabled:w||!N,className:"w-full bg-gradient-to-r from-indigo-500 to-primary hover:opacity-90 transition-all",children:[p.jsx(JZ,{className:"mr-2 h-4 w-4"}),w?"Launching...":"Start First Chat"]}),p.jsx(N7,{})]}),contentClassName:"p-4",icon:p.jsx(pY,{className:"h-4 w-4"})}],ue=te.findIndex(ge=>!ge.isComplete);return s?p.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-4xl mx-auto w-full",children:p.jsxs(mo.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full",children:[p.jsx(cr,{className:"h-12 w-1/2 mx-auto mb-6"}),p.jsx(cr,{className:"h-8 w-3/4 mx-auto mb-2"}),p.jsx(cr,{className:"h-4 w-1/2 mx-auto mb-8"}),p.jsx(cr,{className:"h-20 w-full mb-6"}),p.jsx(cr,{className:"h-20 w-full mb-6"}),p.jsx(cr,{className:"h-20 w-full"})]})}):p.jsx(mo.div,{className:"flex h-full flex-col items-center justify-center p-4 bg-gradient-to-b from-background to-background/80",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:p.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(mo.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:p.jsxs("div",{className:"relative mx-auto w-16 h-16 mb-4",children:[p.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl"}),p.jsx("div",{className:"relative bg-gradient-to-br from-primary to-indigo-600 p-3 rounded-full",children:p.jsx(Kxe,{className:"h-10 w-10 text-white"})})]})}),p.jsx("h2",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-primary to-indigo-500 bg-clip-text text-transparent",children:"Welcome to LiteChat"}),p.jsx("div",{className:"relative",children:p.jsx(Yxe,{})}),p.jsx(Gn,{children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs("div",{className:"mt-6 bg-card/40 backdrop-blur-sm border border-border/30 rounded-xl p-3 w-3/4 mx-auto",children:[p.jsx(Uk,{value:Q,className:"h-1.5"}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Setup Progress: ",Math.round(Q),"%"]})]})}),p.jsx(Yn,{children:p.jsxs("p",{children:["Steps completed: ",q," of ",J]})})]})})]}),p.jsx(mo.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:te.map((ge,Ie)=>{const Ae=Ie===ue;return p.jsx(mo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Ie*.1},children:p.jsx(a1e,{stepNumber:Ie+1,title:ge.title,description:ge.description,isComplete:ge.id!=="start-chat"&&ge.isComplete,isActive:Ae,openOnComplete:ge.id==="enable-models",contentClassName:ge.id==="add-provider"||ge.id==="api-key"?"p-0 border-none shadow-none bg-transparent":ge.contentClassName,icon:ge.icon,children:ge.content})},ge.id)})}),!s&&!j&&ue===-1&&p.jsxs(mo.div,{className:"text-center mt-6 p-4 bg-red-500/10 rounded-lg border border-red-500/30",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[p.jsx(Ou,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),p.jsx("p",{className:"text-sm mb-3",children:"Configuration issue detected. Please review provider settings."}),p.jsx(It,{variant:"outline",size:"sm",onClick:()=>ne("providers"),className:"border-red-500/50 hover:bg-red-500/20 transition-colors",children:"Open Provider Settings"})]})]})})},s1e=["conversation.title_generation"],o1e=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:s})=>{const o=T.useRef(null),l=T.useRef(null),[u,d]=T.useState(!1),h=On(j=>j.streamingInteractionIds),m=rr(j=>j.chatMaxWidth),{isLoading:g}=Un(sn(j=>({providers:j.dbProviderConfigs,apiKeys:j.dbApiKeys,isLoading:j.isLoading,enableApiKeyManagement:j.enableApiKeyManagement}))),{conversationCount:v,isConversationLoading:b}=mn(sn(j=>({conversationCount:j.conversations.length,isConversationLoading:j.isLoading}))),{projectCount:w,isProjectLoading:x}=hi(sn(j=>({projectCount:j.projects.length,isProjectLoading:j.isLoading}))),_=T.useMemo(()=>g||b||x?!1:v===0&&w===0,[v,w,g,b,x]),E=T.useMemo(()=>{const j=[],N=new Set;return[...t].sort((L,H)=>L.index-H.index).forEach(L=>{if(!N.has(L.id)&&!s1e.includes(L.type)){const H=[L];N.add(L.id),j.push(H)}}),j},[t]),C=(j="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:j})};T.useEffect(()=>{if(l.current){const{scrollHeight:j,clientHeight:N,scrollTop:P}=l.current,L=j-N<=P+150,H=n==="streaming"&&h.length>0;(L||H)&&requestAnimationFrame(()=>{C(H?"smooth":"auto")})}},[E.length,n,h]),T.useEffect(()=>{const j=l.current;if(!j)return;const N=()=>{const{scrollHeight:P,clientHeight:L,scrollTop:H}=j,M=H<P-L-L*.5;d(M)};return j.addEventListener("scroll",N,{passive:!0}),N(),()=>{j.removeEventListener("scroll",N)}},[]),T.useEffect(()=>{o.current&&(l.current=o.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const k=()=>g||b||x?p.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[p.jsx(cr,{className:"h-24 w-full"}),p.jsx(cr,{className:"h-32 w-full"}),p.jsx(cr,{className:"h-20 w-full"})]}):_?p.jsx(i1e,{}):e?E.length===0&&n!=="streaming"?p.jsx(KM,{}):p.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[E.map(j=>{const N=j[0];return h.includes(N.id)?p.jsx(gk,{interactionId:N.id,onStop:s},`${N.id}-streaming`):p.jsx(d7,{interaction:N,onEdit:i,onRegenerate:a,onDelete:void 0},N.id)}),n==="streaming"&&h.filter(j=>!t.some(N=>N.id===j)).map(j=>p.jsx(gk,{interactionId:j,onStop:s},`${j}-streaming-new`))]}):p.jsx(KM,{}),I=m||"max-w-7xl";return p.jsxs("div",{className:xt("flex-grow relative",r),children:[p.jsx(wl,{className:"h-full w-full",ref:o,children:p.jsx("div",{className:xt("chat-canvas-container mx-auto",I),children:k()})}),u&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>C(),"aria-label":"Scroll to bottom",children:p.jsx(OK,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"left",children:"Scroll to Bottom"})]})})]})},Gh=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:p.jsx("div",{className:xt(r),children:a.map(i=>{const s=n==="icon"?i.iconRenderer:i.renderer;return p.jsx(gt.Fragment,{children:s?s():null},i.id)})})},l1e=Symbol("Let zodToJsonSchema decide on which parser to use"),EP={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},c1e=e=>typeof e=="string"?{...EP,name:e}:{...EP,...e},u1e=e=>{const t=c1e(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function dU(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function _r(e,t,n,r,a){e[t]=n,dU(e,t,r,a)}function d1e(){return{}}function f1e(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Ht.ZodAny&&(n.items=pr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&_r(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&_r(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(_r(n,"minItems",e.exactLength.value,e.exactLength.message,t),_r(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function h1e(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?_r(n,"minimum",r.value,r.message,t):_r(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),_r(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?_r(n,"maximum",r.value,r.message,t):_r(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),_r(n,"maximum",r.value,r.message,t));break;case"multipleOf":_r(n,"multipleOf",r.value,r.message,t);break}return n}function p1e(){return{type:"boolean"}}function fU(e,t){return pr(e.type._def,t)}const m1e=(e,t)=>pr(e.innerType._def,t);function hU(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>hU(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return g1e(e,t)}}const g1e=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":_r(n,"minimum",r.value,r.message,t);break;case"max":_r(n,"maximum",r.value,r.message,t);break}return n};function y1e(e,t){return{...pr(e.innerType._def,t),default:e.defaultValue()}}function b1e(e,t){return t.effectStrategy==="input"?pr(e.schema._def,t):{}}function v1e(e){return{type:"string",enum:Array.from(e.values)}}const w1e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function x1e(e,t){const n=[pr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),pr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(w1e(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;s=l}else r=void 0;a.push(s)}}),a.length?{allOf:a,...r}:void 0}function _1e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let YC;const lo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(YC===void 0&&(YC=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),YC),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function pU(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":_r(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":_r(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":co(n,"email",r.message,t);break;case"format:idn-email":co(n,"idn-email",r.message,t);break;case"pattern:zod":Ai(n,lo.email,r.message,t);break}break;case"url":co(n,"uri",r.message,t);break;case"uuid":co(n,"uuid",r.message,t);break;case"regex":Ai(n,r.regex,r.message,t);break;case"cuid":Ai(n,lo.cuid,r.message,t);break;case"cuid2":Ai(n,lo.cuid2,r.message,t);break;case"startsWith":Ai(n,RegExp(`^${XC(r.value,t)}`),r.message,t);break;case"endsWith":Ai(n,RegExp(`${XC(r.value,t)}$`),r.message,t);break;case"datetime":co(n,"date-time",r.message,t);break;case"date":co(n,"date",r.message,t);break;case"time":co(n,"time",r.message,t);break;case"duration":co(n,"duration",r.message,t);break;case"length":_r(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),_r(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{Ai(n,RegExp(XC(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&co(n,"ipv4",r.message,t),r.version!=="v4"&&co(n,"ipv6",r.message,t);break}case"base64url":Ai(n,lo.base64url,r.message,t);break;case"jwt":Ai(n,lo.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&Ai(n,lo.ipv4Cidr,r.message,t),r.version!=="v4"&&Ai(n,lo.ipv6Cidr,r.message,t);break}case"emoji":Ai(n,lo.emoji(),r.message,t);break;case"ulid":{Ai(n,lo.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{co(n,"binary",r.message,t);break}case"contentEncoding:base64":{_r(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{Ai(n,lo.base64,r.message,t);break}}break}case"nanoid":Ai(n,lo.nanoid,r.message,t)}return n}function XC(e,t){return t.patternStrategy==="escape"?E1e(e):e}const S1e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function E1e(e){let t="";for(let n=0;n<e.length;n++)S1e.has(e[n])||(t+="\\"),t+=e[n];return t}function co(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):_r(e,"format",t,n,r)}function Ai(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:CP(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):_r(e,"pattern",CP(t,r),n,r)}function CP(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,s=!1,o=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(s){if(r[u].match(/[a-z]/)){o?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),o=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],o=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=s?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:s&&r[u]==="]"?s=!1:!s&&r[u]==="["&&(s=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function mU(e,t){var r,a,i,s,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Ht.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,d)=>({...u,[d]:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Ht.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=pU(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===Ht.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===Ht.ZodBranded&&e.keyType._def.type._def.typeName===Ht.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=fU(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function C1e(e,t){if(t.mapStrategy==="record")return mU(e,t);const n=pr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function T1e(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function k1e(){return{not:{}}}function A1e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const n1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function N1e(e,t){if(t.target==="openApi3")return TP(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in n1&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const s=n1[i._def.typeName];return s&&!a.includes(s)?[...a,s]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...a,s];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,s,o)=>o.indexOf(i)===s);return{type:a.length>1?a:a[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return TP(e,t)}const TP=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>pr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function R1e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:n1[e.innerType._def.typeName],nullable:!0}:{type:[n1[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=pr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=pr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function I1e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",dU(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?_r(n,"minimum",r.value,r.message,t):_r(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),_r(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?_r(n,"maximum",r.value,r.message,t):_r(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),_r(n,"maximum",r.value,r.message,t));break;case"multipleOf":_r(n,"multipleOf",r.value,r.message,t);break}return n}function j1e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let u=M1e(l);u&&n&&(l instanceof vo&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=pr(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,u||a.push(o))}a.length&&(r.required=a);const s=D1e(e,t);return s!==void 0&&(r.additionalProperties=s),r}function D1e(e,t){if(e.catchall._def.typeName!=="ZodNever")return pr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function M1e(e){try{return e.isOptional()}catch{return!0}}const O1e=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return pr(e.innerType._def,t);const n=pr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},P1e=(e,t)=>{if(t.pipeStrategy==="input")return pr(e.in._def,t);if(t.pipeStrategy==="output")return pr(e.out._def,t);const n=pr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=pr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function F1e(e,t){return pr(e.type._def,t)}function L1e(e,t){const r={type:"array",uniqueItems:!0,items:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&_r(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&_r(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function B1e(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>pr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:pr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>pr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function $1e(){return{not:{}}}function z1e(){return{}}const U1e=(e,t)=>pr(e.innerType._def,t),V1e=(e,t,n)=>{switch(t){case Ht.ZodString:return pU(e,n);case Ht.ZodNumber:return I1e(e,n);case Ht.ZodObject:return j1e(e,n);case Ht.ZodBigInt:return h1e(e,n);case Ht.ZodBoolean:return p1e();case Ht.ZodDate:return hU(e,n);case Ht.ZodUndefined:return $1e();case Ht.ZodNull:return A1e(n);case Ht.ZodArray:return f1e(e,n);case Ht.ZodUnion:case Ht.ZodDiscriminatedUnion:return N1e(e,n);case Ht.ZodIntersection:return x1e(e,n);case Ht.ZodTuple:return B1e(e,n);case Ht.ZodRecord:return mU(e,n);case Ht.ZodLiteral:return _1e(e,n);case Ht.ZodEnum:return v1e(e);case Ht.ZodNativeEnum:return T1e(e);case Ht.ZodNullable:return R1e(e,n);case Ht.ZodOptional:return O1e(e,n);case Ht.ZodMap:return C1e(e,n);case Ht.ZodSet:return L1e(e,n);case Ht.ZodLazy:return()=>e.getter()._def;case Ht.ZodPromise:return F1e(e,n);case Ht.ZodNaN:case Ht.ZodNever:return k1e();case Ht.ZodEffects:return b1e(e,n);case Ht.ZodAny:return d1e();case Ht.ZodUnknown:return z1e();case Ht.ZodDefault:return y1e(e,n);case Ht.ZodBranded:return fU(e,n);case Ht.ZodReadonly:return U1e(e,n);case Ht.ZodCatch:return m1e(e,n);case Ht.ZodPipeline:return P1e(e,n);case Ht.ZodFunction:case Ht.ZodVoid:case Ht.ZodSymbol:return;default:return(r=>{})()}};function pr(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==l1e)return l}if(r&&!n){const l=H1e(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=V1e(e,e.typeName,t),s=typeof i=="function"?pr(i(),t):i;if(s&&G1e(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return a.jsonSchema=s,l}return a.jsonSchema=s,s}const H1e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:q1e(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},q1e=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},G1e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),W1e=(e,t)=>{const n=u1e(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,d])=>({...l,[u]:pr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=pr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const o=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var ay={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},iy={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},sy={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},oy={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},ly={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},K1e=[ay,iy,sy,oy,ly];ay.code+"",iy.code+"",sy.code+"",oy.code+"",ly.code+"";ay.name+"",ay.code,iy.name+"",iy.code,sy.name+"",sy.code,oy.name+"",oy.code,ly.name+"",ly.code;K1e.map(e=>e.code);function Z1e(e){const t=["ROOT"];let n=-1,r=null;function a(l,u,d){switch(l){case'"':{n=u,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function s(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":a(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?o+="true".slice(d.length):"false".startsWith(d)?o+="false".slice(d.length):"null".startsWith(d)&&(o+="null".slice(d.length))}}return o}function Y1e(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=gf({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=gf({text:Z1e(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var X1e={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},J1e={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},Q1e={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},e_e={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},t_e={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},n_e={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},r_e={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},a_e={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},i_e={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},s_e={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},o_e={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},l_e={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},c_e={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},u_e={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},d_e={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},f_e={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},j_=[X1e,J1e,Q1e,e_e,t_e,n_e,r_e,a_e,i_e,s_e,o_e,l_e,c_e,u_e,d_e,f_e];Object.fromEntries(j_.map(e=>[e.code,e]));Object.fromEntries(j_.map(e=>[e.name,e.code]));j_.map(e=>e.code);function ui(e,t){const n=j_.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function h_e(e,t){var n;const r=(n=void 0)!=null?n:!1;return p_e(W1e(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var Vk=Symbol.for("vercel.ai.schema");function p_e(e,{validate:t}={}){return{[Vk]:!0,_type:void 0,[tx]:!0,jsonSchema:e,validate:t}}function m_e(e){return typeof e=="object"&&e!==null&&Vk in e&&e[Vk]===!0&&"jsonSchema"in e&&"validate"in e}function D_(e){return m_e(e)?e:h_e(e)}const kP=globalThis||void 0||self;var g_e=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof kP=="object"?kP:{},of="1.9.0",AP=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function y_e(e){var t=new Set([e]),n=new Set,r=e.match(AP);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(o){return n.add(o),!1}function s(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(AP);if(!u)return i(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?s(l):i(l):a.minor<=d.minor?s(l):i(l)}}var b_e=y_e(of),v_e=of.split(".")[0],cy=Symbol.for("opentelemetry.js.api."+v_e),uy=g_e;function IR(e,t,n,r){var a;r===void 0&&(r=!1);var i=uy[cy]=(a=uy[cy])!==null&&a!==void 0?a:{version:of};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==of){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+of);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+of+"."),!0}function dy(e){var t,n,r=(t=uy[cy])===null||t===void 0?void 0:t.version;if(!(!r||!b_e(r)))return(n=uy[cy])===null||n===void 0?void 0:n[e]}function jR(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+of+".");var n=uy[cy];n&&delete n[e]}var w_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},x_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},__e=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("verbose",this._namespace,t)},e}();function Og(e,t,n){var r=dy("diag");if(r)return n.unshift(t),r[e].apply(r,x_e([],w_e(n),!1))}var gs;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(gs||(gs={}));function S_e(e,t){e<gs.NONE?e=gs.NONE:e>gs.ALL&&(e=gs.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",gs.ERROR),warn:n("warn",gs.WARN),info:n("info",gs.INFO),debug:n("debug",gs.DEBUG),verbose:n("verbose",gs.VERBOSE)}}var E_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},C_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},T_e="diag",r1=function(){function e(){function t(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=dy("diag");if(o)return o[a].apply(o,C_e([],E_e(i),!1))}}var n=this,r=function(a,i){var s,o,l;if(i===void 0&&(i={logLevel:gs.INFO}),a===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var d=dy("diag"),h=S_e((o=i.logLevel)!==null&&o!==void 0?o:gs.INFO,a);if(d&&!i.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return IR("diag",h,n,!0)};n.setLogger=r,n.disable=function(){jR(T_e,n)},n.createComponentLogger=function(a){return new __e(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function k_e(e){return Symbol.for(e)}var A_e=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),N_e=new A_e,R_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},I_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},j_e=function(){function e(){}return e.prototype.active=function(){return N_e},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,I_e([r],R_e(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),D_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},M_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},JC="context",O_e=new j_e,gU=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return IR(JC,t,r1.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,M_e([t,n,r],D_e(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return dy(JC)||O_e},e.prototype.disable=function(){this._getContextManager().disable(),jR(JC,r1.instance())},e}(),Hk;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Hk||(Hk={}));var yU="0000000000000000",bU="00000000000000000000000000000000",P_e={traceId:bU,spanId:yU,traceFlags:Hk.NONE},t0=function(){function e(t){t===void 0&&(t=P_e),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),DR=k_e("OpenTelemetry Context Key SPAN");function MR(e){return e.getValue(DR)||void 0}function F_e(){return MR(gU.getInstance().active())}function OR(e,t){return e.setValue(DR,t)}function L_e(e){return e.deleteValue(DR)}function B_e(e,t){return OR(e,new t0(t))}function vU(e){var t;return(t=MR(e))===null||t===void 0?void 0:t.spanContext()}var $_e=/^([0-9a-f]{32})$/i,z_e=/^[0-9a-f]{16}$/i;function U_e(e){return $_e.test(e)&&e!==bU}function V_e(e){return z_e.test(e)&&e!==yU}function wU(e){return U_e(e.traceId)&&V_e(e.spanId)}function H_e(e){return new t0(e)}var QC=gU.getInstance(),xU=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=QC.active());var a=!!(n!=null&&n.root);if(a)return new t0;var i=r&&vU(r);return q_e(i)&&wU(i)?new t0(i):new t0},e.prototype.startActiveSpan=function(t,n,r,a){var i,s,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(i=n,o=r):(i=n,s=r,o=a);var l=s??QC.active(),u=this.startSpan(t,i,l),d=OR(l,u);return QC.with(d,o,void 0,u)}},e}();function q_e(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var G_e=new xU,W_e=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):G_e},e}(),K_e=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new xU},e}(),Z_e=new K_e,NP=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new W_e(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Z_e},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),a1;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(a1||(a1={}));var eT="trace",Y_e=function(){function e(){this._proxyTracerProvider=new NP,this.wrapSpanContext=H_e,this.isSpanContextValid=wU,this.deleteSpan=L_e,this.getSpan=MR,this.getActiveSpan=F_e,this.getSpanContext=vU,this.setSpan=OR,this.setSpanContext=B_e}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=IR(eT,this._proxyTracerProvider,r1.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return dy(eT)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){jR(eT,r1.instance()),this._proxyTracerProvider=new NP},e}(),X_e=Y_e.getInstance(),J_e=Object.defineProperty,PR=(e,t)=>{for(var n in t)J_e(e,n,{get:t[n],enumerable:!0})};function i1(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function RP(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function IP({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await i.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var _U="AI_InvalidArgumentError",SU=`vercel.ai.error.${_U}`,Q_e=Symbol.for(SU),EU,po=class extends Rn{constructor({parameter:e,value:t,message:n}){super({name:_U,message:`Invalid argument for parameter ${e}: ${n}`}),this[EU]=!0,this.parameter=e,this.value=t}static isInstance(e){return Rn.hasMarker(e,SU)}};EU=Q_e;var CU="AI_RetryError",TU=`vercel.ai.error.${CU}`,eSe=Symbol.for(TU),kU,jP=class extends Rn{constructor({message:e,reason:t,errors:n}){super({name:CU,message:e}),this[kU]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Rn.hasMarker(e,TU)}};kU=eSe;var tSe=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>AU(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function AU(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Mw(i)||t===0)throw i;const s=_J(i),o=[...a,i],l=o.length;if(l>t)throw new jP({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:o});if(i instanceof Error&&Vs.isInstance(i)&&i.isRetryable===!0&&l<=t)return await vJ(n),AU(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?i:new jP({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:o})}}function nSe({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new po({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new po({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:tSe({maxRetries:t})}}function qk({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function rSe({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,o])=>(i[`ai.settings.${s}`]=o,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[s,o])=>(i[`ai.telemetry.metadata.${s}`]=o,i),{}),...Object.entries(r??{}).reduce((i,[s,o])=>(o!==void 0&&(i[`ai.request.headers.${s}`]=o),i),{})}}var aSe={startSpan(){return Tw},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Tw);if(typeof n=="function")return n(Tw);if(typeof r=="function")return r(Tw)}},Tw={spanContext(){return iSe},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},iSe={traceId:"",spanId:"",traceFlags:0};function sSe({isEnabled:e=!1,tracer:t}={}){return e?t||X_e.getTracer("ai"):aSe}function Gk({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return a&&i.end(),s}catch(s){try{s instanceof Error?(i.recordException({name:s.name,message:s.message,stack:s.stack}),i.setStatus({code:a1.ERROR,message:s.message})):i.setStatus({code:a1.ERROR})}finally{i.end()}throw s}})}function ip({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var oSe=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Fu(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=E1(this.base64Data)),this.uint8ArrayData}},lSe=class extends oSe{constructor(e){super(e),this.type="file"}},cSe=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],uSe=e=>{const t=typeof e=="string"?E1(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function dSe(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?uSe(e):e}function fSe({data:e,signatures:t}){const n=dSe(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((a,i)=>n[i]===a))return r.mimeType}var NU="AI_NoObjectGeneratedError",RU=`vercel.ai.error.${NU}`,hSe=Symbol.for(RU),IU,DP=class extends Rn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a,finishReason:i}){super({name:NU,message:e,cause:t}),this[IU]=!0,this.text=n,this.response=r,this.usage=a,this.finishReason=i}static isInstance(e){return Rn.hasMarker(e,RU)}};IU=hSe;var jU="AI_DownloadError",DU=`vercel.ai.error.${jU}`,pSe=Symbol.for(DU),MU,tT=class extends Rn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:jU,message:a,cause:r}),this[MU]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Rn.hasMarker(e,DU)}};MU=pSe;async function mSe({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new tT({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mimeType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw tT.isInstance(r)?r:new tT({url:n,cause:r})}}var OU="AI_InvalidDataContentError",PU=`vercel.ai.error.${OU}`,gSe=Symbol.for(PU),FU,MP=class extends Rn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:OU,message:n,cause:t}),this[FU]=!0,this.content=e}static isInstance(e){return Rn.hasMarker(e,PU)}};FU=gSe;var LU=z.union([z.string(),z.instanceof(Uint8Array),z.instanceof(ArrayBuffer),z.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function BU(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Fu(new Uint8Array(e)):Fu(e)}function s1(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return E1(e)}catch(t){throw new MP({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new MP({content:e})}function ySe(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var $U="AI_InvalidMessageRoleError",zU=`vercel.ai.error.${$U}`,bSe=Symbol.for(zU),UU,vSe=class extends Rn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:$U,message:t}),this[UU]=!0,this.role=e}static isInstance(e){return Rn.hasMarker(e,zU)}};UU=bSe;function wSe(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function xSe({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=mSe}){const a=await SSe(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>_Se(i,a))]}function _Se(e,t){var n,r,a,i,s,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(u=>ESe(u,t)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{var d;const h=(d=u.providerOptions)!=null?d:u.experimental_providerMetadata;switch(u.type){case"file":return{type:"file",data:u.data instanceof URL?u.data:BU(u.data),filename:u.filename,mimeType:u.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:u.text,signature:u.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:u.data,providerMetadata:h};case"text":return{type:"text",text:u.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,args:u.args,providerMetadata:h}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const u=l;throw new vSe({role:u})}}}async function SSe(e,t,n,r){const a=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(a.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:o})=>[s.toString(),o]))}function ESe(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,o,l,u;const d=e.type;switch(d){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:m}=wSe(l.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${d}`);s=h,u=s1(m)}else{const h=t[l.toString()];h?(u=h.data,s??(s=h.mimeType)):u=l}else u=s1(l);switch(d){case"image":return u instanceof Uint8Array&&(s=(r=fSe({data:u,signatures:cSe}))!=null?r:s),{type:"image",image:u,mimeType:s,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?BU(u):u,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function CSe({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new po({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new po({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new po({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new po({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new po({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new po({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new po({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new po({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:o}}function OP(e){var t,n,r;const a=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let o,l,u;try{[o,l]=i.url.split(","),u=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:s1(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:ySe(s1(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return a}var VU="AI_MessageConversionError",HU=`vercel.ai.error.${VU}`,TSe=Symbol.for(HU),qU,nT=class extends Rn{constructor({originalMessage:e,message:t}){super({name:VU,message:t}),this[qU]=!0,this.originalMessage=e}static isInstance(e){return Rn.hasMarker(e,HU)}};qU=TSe;function kSe(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const o=e[s],l=s===e.length-1,{role:u,content:d,experimental_attachments:h}=o;switch(u){case"system":{i.push({role:"system",content:d});break}case"user":{if(o.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...OP(h)]:d});else{const m=o.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,...OP(h)]:m})}break}case"assistant":{if(o.parts!=null){let v=function(){const _=[];for(const C of x)switch(C.type){case"file":case"text":{_.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":_.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":_.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":_.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:_});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new nT({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:I,result:j}=C,N=a[I];return(N==null?void 0:N.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:I,result:N.experimental_toToolResultContent(j),experimental_content:N.experimental_toToolResultContent(j)}:{type:"tool-result",toolCallId:k,toolName:I,result:j}})}),x=[],w=!1,b++},b=0,w=!1,x=[];for(const _ of o.parts)switch(_.type){case"text":{w&&v(),x.push(_);break}case"file":case"reasoning":{x.push(_);break}case"tool-invocation":{((r=_.toolInvocation.step)!=null?r:0)!==b&&v(),x.push(_),w=!0;break}}v();break}const m=o.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:d});break}const g=m.reduce((v,b)=>{var w;return Math.max(v,(w=b.step)!=null?w:0)},0);for(let v=0;v<=g;v++){const b=m.filter(w=>{var x;return((x=w.step)!=null?x:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:w,toolName:x,args:_})=>({type:"tool-call",toolCallId:w,toolName:x,args:_}))]}),i.push({role:"tool",content:b.map(w=>{if(!("result"in w))throw new nT({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(w)});const{toolCallId:x,toolName:_,result:E}=w,C=a[_];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:_,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:_,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const m=u;throw new nT({originalMessage:o,message:`Unsupported role: ${m}`})}}}return i}function ASe(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(NSe);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function NSe(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var Wk=z.lazy(()=>z.union([z.null(),z.string(),z.number(),z.boolean(),z.record(z.string(),Wk),z.array(Wk)])),ia=z.record(z.string(),z.record(z.string(),Wk)),RSe=z.array(z.union([z.object({type:z.literal("text"),text:z.string()}),z.object({type:z.literal("image"),data:z.string(),mimeType:z.string().optional()})])),GU=z.object({type:z.literal("text"),text:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),ISe=z.object({type:z.literal("image"),image:z.union([LU,z.instanceof(URL)]),mimeType:z.string().optional(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),WU=z.object({type:z.literal("file"),data:z.union([LU,z.instanceof(URL)]),filename:z.string().optional(),mimeType:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),jSe=z.object({type:z.literal("reasoning"),text:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),DSe=z.object({type:z.literal("redacted-reasoning"),data:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),MSe=z.object({type:z.literal("tool-call"),toolCallId:z.string(),toolName:z.string(),args:z.unknown(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),OSe=z.object({type:z.literal("tool-result"),toolCallId:z.string(),toolName:z.string(),result:z.unknown(),content:RSe.optional(),isError:z.boolean().optional(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),PSe=z.object({role:z.literal("system"),content:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),FSe=z.object({role:z.literal("user"),content:z.union([z.string(),z.array(z.union([GU,ISe,WU]))]),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),LSe=z.object({role:z.literal("assistant"),content:z.union([z.string(),z.array(z.union([GU,WU,jSe,DSe,MSe]))]),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),BSe=z.object({role:z.literal("tool"),content:z.array(OSe),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),$Se=z.union([PSe,FSe,LSe,BSe]);function zSe({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new ec({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new ec({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new ec({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new ec({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=ASe(e.messages);if(n==="other")throw new ec({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?kSe(e.messages,{tools:t}):e.messages;if(r.length===0)throw new ec({prompt:e,message:"messages must not be empty"});const a=qp({value:r,schema:z.array($Se)});if(!a.success)throw new ec({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function USe({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function VSe(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var HSe="JSON schema:",qSe="You MUST answer with a JSON object that matches the JSON schema above.",GSe="You MUST answer with JSON.";function WSe({prompt:e,schema:t,schemaPrefix:n=t!=null?HSe:void 0,schemaSuffix:r=t!=null?qSe:GSe}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function rT(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}If({prefix:"aiobj",size:24});var Vi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function PP(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function KSe(){let e=[],t=null,n=!1,r=PP();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=PP(),await r.promise,a();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function ZSe(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}If({prefix:"aiobj",size:24});var KU="AI_NoOutputSpecifiedError",ZU=`vercel.ai.error.${KU}`,YSe=Symbol.for(ZU),YU,XSe=class extends Rn{constructor({message:e="No output specified."}={}){super({name:KU,message:e}),this[YU]=!0}static isInstance(e){return Rn.hasMarker(e,ZU)}};YU=YSe;var XU="AI_ToolExecutionError",JU=`vercel.ai.error.${XU}`,JSe=Symbol.for(JU),QU,QSe=class extends Rn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${xy(r)}`}){super({name:XU,message:a,cause:r}),this[QU]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Rn.hasMarker(e,JU)}};QU=JSe;function e2e(e){return e!=null&&Object.keys(e).length>0}function t2e({tools:e,toolChoice:t,activeTools:n}){return e2e(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const s=i.type;switch(s){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:D_(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const o=s;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var n2e=/^([\s\S]*?)(\s+)(\S*)$/;function r2e(e){const t=e.match(n2e);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var eV="AI_InvalidToolArgumentsError",tV=`vercel.ai.error.${eV}`,a2e=Symbol.for(tV),nV,rV=class extends Rn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${xy(n)}`}){super({name:eV,message:r,cause:n}),this[nV]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Rn.hasMarker(e,tV)}};nV=a2e;var aV="AI_NoSuchToolError",iV=`vercel.ai.error.${aV}`,i2e=Symbol.for(iV),sV,Kk=class extends Rn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:aV,message:n}),this[sV]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Rn.hasMarker(e,iV)}};sV=i2e;var oV="AI_ToolCallRepairError",lV=`vercel.ai.error.${oV}`,s2e=Symbol.for(lV),cV,o2e=class extends Rn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${xy(e)}`}){super({name:oV,message:n,cause:e}),this[cV]=!0,this.originalError=t}static isInstance(e){return Rn.hasMarker(e,lV)}};cV=s2e;async function l2e({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new Kk({toolName:e.toolName});try{return await FP({toolCall:e,tools:t})}catch(i){if(n==null||!(Kk.isInstance(i)||rV.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>D_(t[o].parameters).jsonSchema,system:r,messages:a,error:i})}catch(o){throw new o2e({cause:o,originalError:i})}if(s==null)throw i;return await FP({toolCall:s,tools:t})}}async function FP({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new Kk({toolName:e.toolName,availableTools:Object.keys(t)});const a=D_(r.parameters),i=e.args.trim()===""?qp({value:{},schema:a}):gf({text:e.args,schema:a});if(i.success===!1)throw new rV({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function c2e(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function LP({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:s,generateMessageId:o}){const l=[],u=[];return n.length>0&&u.push(...n.map(d=>d.type==="text"?{...d,type:"reasoning"}:{...d,type:"redacted-reasoning"})),t.length>0&&u.push(...t.map(d=>({type:"file",data:d.base64,mimeType:d.mimeType}))),e.length>0&&u.push({type:"text",text:e}),a.length>0&&u.push(...a),u.length>0&&l.push({role:"assistant",content:u,id:s}),i.length>0&&l.push({role:"tool",id:o(),content:i.map(d=>{const h=r[d.toolName];return(h==null?void 0:h.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:d.toolCallId,toolName:d.toolName,result:h.experimental_toToolResultContent(d.result),experimental_content:h.experimental_toToolResultContent(d.result)}:{type:"tool-result",toolCallId:d.toolCallId,toolName:d.toolName,result:d.result}})}),l}If({prefix:"aitxt",size:24});If({prefix:"msg",size:24});var u2e={};PR(u2e,{object:()=>p2e,text:()=>h2e});var uV="AI_InvalidStreamPartError",dV=`vercel.ai.error.${uV}`,d2e=Symbol.for(dV),fV,f2e=class extends Rn{constructor({chunk:e,message:t}){super({name:uV,message:t}),this[fV]=!0,this.chunk=e}static isInstance(e){return Rn.hasMarker(e,dV)}};fV=d2e;var h2e=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),p2e=({schema:e})=>{const t=D_(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:WSe({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=Y1e(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=gf({text:n});if(!a.success)throw new DP({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const i=qp({value:a.value,schema:t});if(!i.success)throw new DP({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return i.value}}};function m2e(e){return e===void 0?[]:Array.isArray(e)?e:[e]}async function g2e({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t==null||t(r)}finally{n.releaseLock()}}function FR(e,t){const n=e.getReader(),r=t.getReader();let a,i,s=!1,o=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function u(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(s){await u(d);return}if(o){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||d.enqueue(h.value),m===n?(a=void 0,h.done&&(await u(d),s=!0)):(i=void 0,h.done&&(o=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function y2e({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:s,abortSignal:o,repairToolCall:l}){let u=null;const d=new ReadableStream({start(x){u=x}}),h={},m=new Set;let g=!1,v;function b(){g&&m.size===0&&(v!=null&&u.enqueue(v),u.close())}const w=new TransformStream({async transform(x,_){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{_.enqueue(x);break}case"file":{_.enqueue(new lSe({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(_.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),_.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await l2e({toolCall:x,tools:e,repairToolCall:l,system:i,messages:s});_.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const I=qi();m.add(I),Gk({name:"ai.toolCall",attributes:ip({telemetry:a,attributes:{...qk({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async j=>k.execute(C.args,{toolCallId:C.toolCallId,messages:s,abortSignal:o}).then(N=>{u.enqueue({...C,type:"tool-result",result:N}),m.delete(I),b();try{j.setAttributes(ip({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(N)}}}))}catch{}},N=>{u.enqueue({type:"error",error:new QSe({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:N})}),m.delete(I),b()})})}}catch(C){u.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:USe(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(w).pipeTo(new WritableStream({write(_){x.enqueue(_)},close(){}})),d.pipeTo(new WritableStream({write(_){x.enqueue(_)},close(){x.close()}}))])}})}var b2e=If({prefix:"aitxt",size:24}),v2e=If({prefix:"msg",size:24});function w2e({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:s,abortSignal:o,headers:l,maxSteps:u=1,experimental_generateMessageId:d=v2e,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:w=!1,toolCallStreaming:x=w,experimental_activeTools:_,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:I,onFinish:j,onStepFinish:N,_internal:{now:P=ZSe,generateId:L=b2e,currentDate:H=()=>new Date}={},...M}){return new _2e({model:e,telemetry:g,headers:l,settings:M,maxRetries:s,abortSignal:o,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:m2e(C),activeTools:_,repairToolCall:E,maxSteps:u,output:h,continueSteps:m,providerOptions:b,onChunk:k,onError:I,onFinish:j,onStepFinish:N,now:P,currentDate:H,generateId:L,generateMessageId:d})}function x2e(e){if(!e)return new TransformStream({transform(i,s){s.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:s=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:s}),n=""}return new TransformStream({transform(i,s){if(i.type==="step-finish"&&a({controller:s}),i.type!=="text-delta"){s.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(a({controller:s,partialOutput:o.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var _2e=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:s,prompt:o,messages:l,tools:u,toolChoice:d,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:v,maxSteps:b,output:w,continueSteps:x,providerOptions:_,now:E,currentDate:C,generateId:k,generateMessageId:I,onChunk:j,onError:N,onFinish:P,onStepFinish:L}){this.warningsPromise=new Vi,this.usagePromise=new Vi,this.finishReasonPromise=new Vi,this.providerMetadataPromise=new Vi,this.textPromise=new Vi,this.reasoningPromise=new Vi,this.reasoningDetailsPromise=new Vi,this.sourcesPromise=new Vi,this.filesPromise=new Vi,this.toolCallsPromise=new Vi,this.toolResultsPromise=new Vi,this.requestPromise=new Vi,this.responsePromise=new Vi,this.stepsPromise=new Vi;var H;if(b<1)throw new po({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=w;let M="",K="",U="",se=[],ie=[],re,X=[];const ne=[],q={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let J=[],Q=[],te,ue,ge="initial";const Ie=[];let Ae;const _e=new TransformStream({async transform(fe,oe){oe.enqueue(fe);const{part:ee}=fe;if((ee.type==="text-delta"||ee.type==="reasoning"||ee.type==="source"||ee.type==="tool-call"||ee.type==="tool-result"||ee.type==="tool-call-streaming-start"||ee.type==="tool-call-delta")&&await(j==null?void 0:j({chunk:ee})),ee.type==="error"&&await(N==null?void 0:N({error:ee.error})),ee.type==="text-delta"&&(M+=ee.textDelta,K+=ee.textDelta,U+=ee.textDelta),ee.type==="reasoning"&&(re==null?(re={type:"text",text:ee.textDelta},se.push(re)):re.text+=ee.textDelta),ee.type==="reasoning-signature"){if(re==null)throw new Rn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});re.signature=ee.signature,re=void 0}if(ee.type==="redacted-reasoning"&&se.push({type:"redacted",data:ee.data}),ee.type==="file"&&ie.push(ee),ee.type==="source"&&(ne.push(ee.source),X.push(ee.source)),ee.type==="tool-call"&&J.push(ee),ee.type==="tool-result"&&Q.push(ee),ee.type==="step-finish"){const Se=LP({text:K,files:ie,reasoning:se,tools:u??{},toolCalls:J,toolResults:Q,messageId:ee.messageId,generateMessageId:I}),Pe=Ie.length;let ke="done";Pe+1<b&&(x&&ee.finishReason==="length"&&J.length===0?ke="continue":J.length>0&&Q.length===J.length&&(ke="tool-result"));const We={stepType:ge,text:M,reasoning:c2e(se),reasoningDetails:se,files:ie,sources:X,toolCalls:J,toolResults:Q,finishReason:ee.finishReason,usage:ee.usage,warnings:ee.warnings,logprobs:ee.logprobs,request:ee.request,response:{...ee.response,messages:[...q.messages,...Se]},providerMetadata:ee.experimental_providerMetadata,experimental_providerMetadata:ee.experimental_providerMetadata,isContinued:ee.isContinued};await(L==null?void 0:L(We)),Ie.push(We),J=[],Q=[],M="",X=[],se=[],ie=[],re=void 0,ke!=="done"&&(ge=ke),ke!=="continue"&&(q.messages.push(...Se),K="")}ee.type==="finish"&&(q.id=ee.response.id,q.timestamp=ee.response.timestamp,q.modelId=ee.response.modelId,q.headers=ee.response.headers,ue=ee.usage,te=ee.finishReason)},async flush(fe){var oe;try{if(Ie.length===0)return;const ee=Ie[Ie.length-1];Te.warningsPromise.resolve(ee.warnings),Te.requestPromise.resolve(ee.request),Te.responsePromise.resolve(ee.response),Te.toolCallsPromise.resolve(ee.toolCalls),Te.toolResultsPromise.resolve(ee.toolResults),Te.providerMetadataPromise.resolve(ee.experimental_providerMetadata),Te.reasoningPromise.resolve(ee.reasoning),Te.reasoningDetailsPromise.resolve(ee.reasoningDetails);const Se=te??"unknown",Pe=ue??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Te.finishReasonPromise.resolve(Se),Te.usagePromise.resolve(Pe),Te.textPromise.resolve(U),Te.sourcesPromise.resolve(ne),Te.filesPromise.resolve(ee.files),Te.stepsPromise.resolve(Ie),await(P==null?void 0:P({finishReason:Se,logprobs:void 0,usage:Pe,text:U,reasoning:ee.reasoning,reasoningDetails:ee.reasoningDetails,files:ee.files,sources:ee.sources,toolCalls:ee.toolCalls,toolResults:ee.toolResults,request:(oe=ee.request)!=null?oe:{},response:ee.response,warnings:ee.warnings,providerMetadata:ee.providerMetadata,experimental_providerMetadata:ee.experimental_providerMetadata,steps:Ie})),Ae.setAttributes(ip({telemetry:t,attributes:{"ai.response.finishReason":Se,"ai.response.text":{output:()=>U},"ai.response.toolCalls":{output:()=>{var ke;return(ke=ee.toolCalls)!=null&&ke.length?JSON.stringify(ee.toolCalls):void 0}},"ai.usage.promptTokens":Pe.promptTokens,"ai.usage.completionTokens":Pe.completionTokens}}))}catch(ee){fe.error(ee)}finally{Ae.end()}}}),ve=KSe();this.addStream=ve.addStream,this.closeStream=ve.close;let Be=ve.stream;for(const fe of m)Be=Be.pipeThrough(fe({tools:u,stopStream(){ve.terminate()}}));this.baseStream=Be.pipeThrough(x2e(w)).pipeThrough(_e);const{maxRetries:nt,retry:Ve}=nSe({maxRetries:a}),De=sSe(t),$=rSe({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:nt}}),Ee=zSe({prompt:{system:(H=w==null?void 0:w.injectIntoSystemPrompt({system:s,model:e}))!=null?H:s,prompt:o,messages:l},tools:u}),Te=this;Gk({name:"ai.streamText",attributes:ip({telemetry:t,attributes:{...qk({operationId:"ai.streamText",telemetry:t}),...$,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:De,endWhenDone:!1,fn:async fe=>{Ae=fe;async function oe({currentStep:ee,responseMessages:Se,usage:Pe,stepType:ke,previousStepText:We,hasLeadingWhitespace:Nt,messageId:it}){var Et;const Ft=Se.length===0?Ee.type:"messages",Mt=[...Ee.messages,...Se],Yt=await xSe({prompt:{type:Ft,system:Ee.system,messages:Mt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Et=e.supportsUrl)==null?void 0:Et.bind(e)}),be={type:"regular",...t2e({tools:u,toolChoice:d,activeTools:g})},{result:{stream:D,warnings:W,rawResponse:he,request:je},doStreamSpan:we,startTimestampMs:Ne}=await Ve(()=>Gk({name:"ai.streamText.doStream",attributes:ip({telemetry:t,attributes:{...qk({operationId:"ai.streamText.doStream",telemetry:t}),...$,"ai.prompt.format":{input:()=>Ft},"ai.prompt.messages":{input:()=>JSON.stringify(Yt)},"ai.prompt.tools":{input:()=>{var Rt;return(Rt=be.tools)==null?void 0:Rt.map(Lt=>JSON.stringify(Lt))}},"ai.prompt.toolChoice":{input:()=>be.toolChoice!=null?JSON.stringify(be.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:De,endWhenDone:!1,fn:async Rt=>({startTimestampMs:E(),doStreamSpan:Rt,result:await e.doStream({mode:be,...CSe(r),inputFormat:Ft,responseFormat:w==null?void 0:w.responseFormat({model:e}),prompt:Yt,providerMetadata:_,abortSignal:i,headers:n})})})),ce=y2e({tools:u,generatorStream:D,toolCallStreaming:h,tracer:De,telemetry:t,system:s,messages:Mt,repairToolCall:v,abortSignal:i}),ft=je??{},vt=[],F=[],Le=[],tt=[];let ye,Me="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Dt,me=!0,G="",V=ke==="continue"?We:"",Z,pe={id:k(),timestamp:C(),modelId:e.modelId},Re="",Ue=!1,pt=!0,Zt=!1;async function ut({controller:Rt,chunk:Lt}){Rt.enqueue(Lt),G+=Lt.textDelta,V+=Lt.textDelta,Ue=!0,Zt=Lt.textDelta.trimEnd()!==Lt.textDelta}Te.addStream(ce.pipeThrough(new TransformStream({async transform(Rt,Lt){var en,In,Xn;if(me){const Er=E()-Ne;me=!1,we.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Er}),we.setAttributes({"ai.response.msToFirstChunk":Er}),Lt.enqueue({type:"step-start",messageId:it,request:ft,warnings:W??[]})}if(Rt.type==="text-delta"&&Rt.textDelta.length===0)return;const Sr=Rt.type;switch(Sr){case"text-delta":{if(x){const Er=pt&&Nt?Rt.textDelta.trimStart():Rt.textDelta;if(Er.length===0)break;pt=!1,Re+=Er;const $n=r2e(Re);$n!=null&&(Re=$n.suffix,await ut({controller:Lt,chunk:{type:"text-delta",textDelta:$n.prefix+$n.whitespace}}))}else await ut({controller:Lt,chunk:Rt});break}case"reasoning":{Lt.enqueue(Rt),ye==null?(ye={type:"text",text:Rt.textDelta},Le.push(ye)):ye.text+=Rt.textDelta;break}case"reasoning-signature":{if(Lt.enqueue(Rt),ye==null)throw new f2e({chunk:Rt,message:"reasoning-signature without reasoning"});ye.signature=Rt.signature,ye=void 0;break}case"redacted-reasoning":{Lt.enqueue(Rt),Le.push({type:"redacted",data:Rt.data});break}case"tool-call":{Lt.enqueue(Rt),vt.push(Rt);break}case"tool-result":{Lt.enqueue(Rt),F.push(Rt);break}case"response-metadata":{pe={id:(en=Rt.id)!=null?en:pe.id,timestamp:(In=Rt.timestamp)!=null?In:pe.timestamp,modelId:(Xn=Rt.modelId)!=null?Xn:pe.modelId};break}case"finish":{Ke=Rt.usage,Me=Rt.finishReason,Dt=Rt.experimental_providerMetadata,Z=Rt.logprobs;const Er=E()-Ne;we.addEvent("ai.stream.finish"),we.setAttributes({"ai.response.msToFinish":Er,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/Er});break}case"file":{tt.push(Rt),Lt.enqueue(Rt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Lt.enqueue(Rt);break}case"error":{Lt.enqueue(Rt),Me="error";break}default:{const Er=Sr;throw new Error(`Unknown chunk type: ${Er}`)}}},async flush(Rt){const Lt=vt.length>0?JSON.stringify(vt):void 0;let en="done";ee+1<b&&(x&&Me==="length"&&vt.length===0?en="continue":vt.length>0&&F.length===vt.length&&(en="tool-result")),x&&Re.length>0&&(en!=="continue"||ke==="continue"&&!Ue)&&(await ut({controller:Rt,chunk:{type:"text-delta",textDelta:Re}}),Re="");try{we.setAttributes(ip({telemetry:t,attributes:{"ai.response.finishReason":Me,"ai.response.text":{output:()=>G},"ai.response.toolCalls":{output:()=>Lt},"ai.response.id":pe.id,"ai.response.model":pe.modelId,"ai.response.timestamp":pe.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[Me],"gen_ai.response.id":pe.id,"gen_ai.response.model":pe.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{we.end()}Rt.enqueue({type:"step-finish",finishReason:Me,usage:Ke,providerMetadata:Dt,experimental_providerMetadata:Dt,logprobs:Z,request:ft,response:{...pe,headers:he==null?void 0:he.headers},warnings:W,isContinued:en==="continue",messageId:it});const In=VSe(Pe,Ke);if(en==="done")Rt.enqueue({type:"finish",finishReason:Me,usage:In,providerMetadata:Dt,experimental_providerMetadata:Dt,logprobs:Z,response:{...pe,headers:he==null?void 0:he.headers}}),Te.closeStream();else{if(ke==="continue"){const Xn=Se[Se.length-1];typeof Xn.content=="string"?Xn.content+=G:Xn.content.push({text:G,type:"text"})}else Se.push(...LP({text:G,files:tt,reasoning:Le,tools:u??{},toolCalls:vt,toolResults:F,messageId:it,generateMessageId:I}));await oe({currentStep:ee+1,responseMessages:Se,usage:In,stepType:en,previousStepText:V,hasLeadingWhitespace:Zt,messageId:en==="continue"?it:I()})}}})))}await oe({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:I()})}}).catch(fe=>{Te.addStream(new ReadableStream({start(oe){oe.enqueue({type:"error",error:fe}),oe.close()}})),Te.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return rT(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return rT(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await g2e({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(n){(t=e==null?void 0:e.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new XSe;return rT(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,s)=>{const o=i.type;switch(o){case"text-delta":{s.enqueue(ui("text",i.textDelta));break}case"reasoning":{n&&s.enqueue(ui("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&s.enqueue(ui("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&s.enqueue(ui("reasoning_signature",{signature:i.signature}));break}case"file":{s.enqueue(ui("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&s.enqueue(ui("source",i.source));break}case"tool-call-streaming-start":{s.enqueue(ui("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{s.enqueue(ui("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{s.enqueue(ui("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{s.enqueue(ui("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{s.enqueue(ui("error",e(i.error)));break}case"step-start":{s.enqueue(ui("start_step",{messageId:i.messageId}));break}case"step-finish":{s.enqueue(ui("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&s.enqueue(ui("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u}={}){IP({response:e,status:t,statusText:n,headers:RP(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){IP({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:RP(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?FR(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:i1(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:i1(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},S2e=z.object({name:z.string(),version:z.string()}).passthrough(),LR=z.object({_meta:z.optional(z.object({}).passthrough())}).passthrough(),fy=LR,E2e=z.object({method:z.string(),params:z.optional(LR)}),C2e=z.object({experimental:z.optional(z.object({}).passthrough()),logging:z.optional(z.object({}).passthrough()),prompts:z.optional(z.object({listChanged:z.optional(z.boolean())}).passthrough()),resources:z.optional(z.object({subscribe:z.optional(z.boolean()),listChanged:z.optional(z.boolean())}).passthrough()),tools:z.optional(z.object({listChanged:z.optional(z.boolean())}).passthrough())}).passthrough();fy.extend({protocolVersion:z.string(),capabilities:C2e,serverInfo:S2e,instructions:z.optional(z.string())});var T2e=fy.extend({nextCursor:z.optional(z.string())}),k2e=z.object({name:z.string(),description:z.optional(z.string()),inputSchema:z.object({type:z.literal("object"),properties:z.optional(z.object({}).passthrough())}).passthrough()}).passthrough();T2e.extend({tools:z.array(k2e)});var A2e=z.object({type:z.literal("text"),text:z.string()}).passthrough(),N2e=z.object({type:z.literal("image"),data:z.string().base64(),mimeType:z.string()}).passthrough(),hV=z.object({uri:z.string(),mimeType:z.optional(z.string())}).passthrough(),R2e=hV.extend({text:z.string()}),I2e=hV.extend({blob:z.string().base64()}),j2e=z.object({type:z.literal("resource"),resource:z.union([R2e,I2e])}).passthrough();fy.extend({content:z.array(z.union([A2e,N2e,j2e])),isError:z.boolean().default(!1).optional()}).or(fy.extend({toolResult:z.unknown()}));var M_="2.0",D2e=z.object({jsonrpc:z.literal(M_),id:z.union([z.string(),z.number().int()])}).merge(E2e).strict(),M2e=z.object({jsonrpc:z.literal(M_),id:z.union([z.string(),z.number().int()]),result:fy}).strict(),O2e=z.object({jsonrpc:z.literal(M_),id:z.union([z.string(),z.number().int()]),error:z.object({code:z.number().int(),message:z.string(),data:z.optional(z.unknown())})}).strict(),P2e=z.object({jsonrpc:z.literal(M_)}).merge(z.object({method:z.string(),params:z.optional(LR)})).strict();z.union([D2e,P2e,M2e,O2e]);var F2e={};PR(F2e,{mergeIntoDataStream:()=>$2e,toDataStream:()=>L2e,toDataStreamResponse:()=>B2e});function pV(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function BR(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&BP((a=n.data)==null?void 0:a.chunk,r);return}BP(n,r)}})).pipeThrough(pV(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(ui("text",n))}}))}function L2e(e,t){return BR(e,t).pipeThrough(new TextEncoderStream)}function B2e(e,t){var n;const r=BR(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,s=a?FR(a.stream,r):r;return new Response(s,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:i1(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function $2e(e,t){t.dataStream.merge(BR(e,t.callbacks))}function BP(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var z2e={};PR(z2e,{mergeIntoDataStream:()=>H2e,toDataStream:()=>U2e,toDataStreamResponse:()=>V2e});function $R(e,t){const n=q2e();return bJ(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(pV(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(ui("text",r))}}))}function U2e(e,t){return $R(e,t).pipeThrough(new TextEncoderStream)}function V2e(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,s=$R(e,i).pipeThrough(new TextEncoderStream),o=a?FR(a.stream,s):s;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:i1(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function H2e(e,t){t.dataStream.merge($R(e,t.callbacks))}function q2e(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class G2e{static async executeInteraction(t,n,r){let a,i=!1,s=null,o,l,u;try{a=await w2e(n);for await(const d of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(d.type){case"text-delta":r.onChunk(d.textDelta);break;case"reasoning":r.onReasoningChunk(d.textDelta);break;case"tool-call":r.onToolCall(d);break;case"tool-result":r.onToolResult(d);break;case"finish":i=!0,s=d.finishReason,o=d.usage,l=d.providerMetadata;break;case"error":r.onError(new Error(`AI Stream Error Part: ${d.error instanceof Error?d.error.message:d.error}`));return;default:console.warn(`[AIService] Received unexpected stream part type: ${d.type}`,d);break}}a!=null&&a.reasoning?(u=await a.reasoning,console.log(`[AIService] Extracted final reasoning for ${t}`)):console.log(`[AIService] No final reasoning found in stream result for ${t}.`),!n.abortSignal.aborted&&i?r.onFinish({finishReason:s,usage:o,providerMetadata:l,reasoning:u}):!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(d){console.error(`[AIService] Error during streamText call for ${t}:`,d),d instanceof Error&&d.name==="AbortError"||r.onError(d instanceof Error?d:new Error(String(d)))}finally{console.log(`[AIService] Stream processing finished for ${t}.`)}}}const qw={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,async startInteraction(e,t,n,r="message.user_assistant"){var P,L,H,M,K,U,se,ie,re;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const a=await qT(Jw.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(a===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const i=a&&typeof a=="object"?a.prompt:e,s=ji(),o=new AbortController;this._activeControllers.set(s,o),this._streamingToolData.set(s,{calls:[],results:[]}),this._firstChunkTimestamps.delete(s),this._interactionStartTimes.delete(s);const l=On.getState(),d=l.interactions.filter(X=>X.conversationId===t),h=r==="conversation.title_generation"?-1:d.reduce((X,ne)=>Math.max(X,ne.index),-1)+1,m=r==="conversation.title_generation"?null:d.length>0?d[d.length-1].id:null,g=performance.now();this._interactionStartTimes.set(s,g);const v={id:s,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...i.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:h,parentId:m};r!=="conversation.title_generation"?(l._addInteractionToState(v),l._addStreamingId(s)):(l._addInteractionToState(v),l._addStreamingId(s),console.log(`[InteractionService] Added title generation interaction ${s} to state.`)),_t.saveInteraction({...v}).catch(X=>{console.error(`[InteractionService] Failed initial persistence for ${s}`,X)}),Ct.emit(St.INTERACTION_STARTED,{interactionId:s,conversationId:t,type:v.type});const b=(P=i.metadata)==null?void 0:P.modelId;if(!b)return this._finalizeInteraction(s,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:w,modelId:x}=Rc(b);if(!w||!x)return this._finalizeInteraction(s,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const _=Un.getState().dbProviderConfigs.find(X=>X.id===w);if(!_)return this._finalizeInteraction(s,"ERROR",new Error(`Provider configuration not found for ID: ${w}`),r),null;const E=Un.getState().getApiKeyForProvider(w),C=VF(_,x,E);if(!C)return this._finalizeInteraction(s,"ERROR",new Error(`Failed to instantiate model instance for ${b} from provider ${_.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const k=r!=="conversation.title_generation"?(((L=i.metadata)==null?void 0:L.enabledTools)??[]).reduce((X,ne)=>{const J=Ir.getState().getRegisteredTools()[ne];if(J!=null&&J.implementation){const Q={...J.definition};Q.execute=async te=>{const ue=On.getState().currentConversationId,ge=ue?mn.getState().getConversationById(ue):null,Ie=(ge==null?void 0:ge.projectId)??"orphan";let Ae;try{Ae=await xl.getState().initializeVFS(Ie,{force:!0})}catch(_e){return{_isError:!0,error:`Filesystem error: ${_e.message}`}}try{const _e=wne(),ve=J.definition.parameters.parse(te),Be=J.implementation,nt={..._e,fsInstance:Ae};return await Be(ve,nt)}catch(_e){const ve=_e instanceof Error?_e.message:String(_e);return _e instanceof z.ZodError?{_isError:!0,error:`Invalid arguments: ${_e.errors.map(Be=>`${Be.path.join(".")} (${Be.message})`).join(", ")}`}:{_isError:!0,error:ve}}},X[ne]=Q}return X},{}):void 0,I=((H=i.parameters)==null?void 0:H.maxSteps)??rr.getState().toolMaxSteps,j={model:C,messages:i.messages,abortSignal:o.signal,system:i.system,temperature:(M=i.parameters)==null?void 0:M.temperature,maxTokens:(K=i.parameters)==null?void 0:K.max_tokens,topP:(U=i.parameters)==null?void 0:U.top_p,topK:(se=i.parameters)==null?void 0:se.top_k,presencePenalty:(ie=i.parameters)==null?void 0:ie.presence_penalty,frequencyPenalty:(re=i.parameters)==null?void 0:re.frequency_penalty,maxSteps:I,...k&&Object.keys(k).length>0&&{tools:k},toolChoice:i.toolChoice??(k&&Object.keys(k).length>0?"auto":"none")},N={onChunk:X=>this._handleChunk(s,X),onReasoningChunk:X=>this._handleReasoningChunk(s,X),onToolCall:X=>this._handleToolCall(s,X),onToolResult:X=>this._handleToolResult(s,X),onFinish:X=>this._handleFinish(s,X,r),onError:X=>this._handleError(s,X,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${s}`),G2e.executeInteraction(s,j,N).catch(X=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${s}:`,X),this._handleError(s,X instanceof Error?X:new Error("Failed to start AI execution"),r)}),s},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),qe.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=On.getState(),r=n.interactions.find(a=>a.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await qT(Jw.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;On.getState().appendInteractionResponseChunk(e,a),Ct.emit(St.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleReasoningChunk(e,t){On.getState().appendReasoningChunk(e,t)},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),On.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),On.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",a){var k;const i=On.getState(),s=i.interactions.find(I=>I.id===e);if(!s||s.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=i.activeStreamBuffers[e]??"",l=i.activeReasoningBuffers[e]??"",u=this._streamingToolData.get(e)||{calls:[],results:[]},d=(s==null?void 0:s.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}, Reasoning Length: ${l.length}`);const h=performance.now(),m=this._interactionStartTimes.get(e),g=this._firstChunkTimestamps.get(e),v=m?Math.round(h-m):void 0,b=m&&g?Math.round(g-m):void 0,w=(a==null?void 0:a.reasoning)??l,x={status:t,endedAt:new Date,response:o||null,metadata:{...d,...(a==null?void 0:a.usage)&&{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens,totalTokens:a.usage.totalTokens},...(a==null?void 0:a.providerMetadata)&&{providerMetadata:a.providerMetadata},toolCalls:u.calls,toolResults:u.results,reasoning:w||void 0,timeToFirstToken:b,generationTime:v,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&x.response&&typeof x.response=="string"){const I=x.response.trim().replace(/^"|"$/g,"");I&&s&&(console.log(`[InteractionService] Updating conversation ${s.conversationId} title to: "${I}"`),mn.getState().updateConversation(s.conversationId,{title:I}).catch(j=>console.error("Failed to update conversation title:",j)))}i._updateInteractionInState(e,x),i._removeStreamingId(e);const _=On.getState().interactions.find(I=>I.id===e);_?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((k=_.response)==null?void 0:k.length)??0}`),_t.saveInteraction({..._}).catch(I=>{console.error(`[InteractionService] Failed final persistence for ${e}`,I)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let E=[],C=[];try{E=u.calls.map(I=>JSON.parse(I)),C=u.results.map(I=>JSON.parse(I))}catch(I){console.error("[InteractionService] Failed to parse tool strings for event emitter:",I)}Ct.emit(St.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:E,toolResults:C}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Jo=(e,t)=>{Ct.emit(St.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},Oi=Ys(Xs((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Jo("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Jo("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Jo("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Jo("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Jo("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Jo("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Jo("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Jo("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Jo("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Jo("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),Ct.emit(St.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),Ct.emit(St.PROMPT_PARAMS_CHANGED,{params:r}))}}))),Zs=Ys(Xs((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([_t.loadRules(),_t.loadTags(),_t.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:a,isLoading:!1})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),qe.error("Failed to load rules and tags.")}},addRule:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.rules.push(i),s.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{return await _t.saveRule(i),qe.success(`Rule "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding rule",s),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),qe.error("Failed to save new rule."),s}},updateRule:async(n,r)=>{const a=t().rules.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.rules.findIndex(l=>l.id===n);o!==-1&&(s.rules[o]=i,s.rules.sort((l,u)=>l.name.localeCompare(u.name)))});try{await _t.saveRule(i),qe.success(`Rule "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating rule",s),e(o=>{const l=o.rules.findIndex(u=>u.id===n);l!==-1&&(o.rules[l]=a,o.rules.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save rule update"}),qe.error("Failed to save rule update."),s}},deleteRule:async n=>{const r=t().rules.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.ruleId===n);e(i=>({rules:i.rules.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.ruleId!==n)}));try{await _t.deleteRule(n),qe.success(`Rule "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting rule",i),e(s=>{s.rules.push(r),s.rules.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete rule"}),qe.error("Failed to delete rule."),i}},addTag:async n=>{const r=ji(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.tags.push(i),s.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{return await _t.saveTag(i),qe.success(`Tag "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding tag",s),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),qe.error("Failed to save new tag."),s}},updateTag:async(n,r)=>{const a=t().tags.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.tags.findIndex(l=>l.id===n);o!==-1&&(s.tags[o]=i,s.tags.sort((l,u)=>l.name.localeCompare(u.name)))});try{await _t.saveTag(i),qe.success(`Tag "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating tag",s),e(o=>{const l=o.tags.findIndex(u=>u.id===n);l!==-1&&(o.tags[l]=a,o.tags.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save tag update"}),qe.error("Failed to save tag update."),s}},deleteTag:async n=>{const r=t().tags.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.tagId===n);e(i=>({tags:i.tags.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.tagId!==n)}));try{await _t.deleteTag(n),qe.success(`Tag "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting tag",i),e(s=>{s.tags.push(r),s.tags.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete tag"}),qe.error("Failed to delete tag."),i}},linkTagToRule:async(n,r)=>{const a=`${n}-${r}`;if(t().tagRuleLinks.find(o=>o.id===a))return;const s={id:a,tagId:n,ruleId:r};e(o=>{o.tagRuleLinks.push(s)});try{await _t.saveTagRuleLink(s)}catch(o){throw console.error("RulesStore: Error linking tag to rule",o),e(l=>({error:"Failed to link tag and rule",tagRuleLinks:l.tagRuleLinks.filter(u=>u.id!==a)})),qe.error("Failed to link tag and rule."),o}},unlinkTagFromRule:async(n,r)=>{const a=`${n}-${r}`,i=t().tagRuleLinks.find(s=>s.id===a);if(i){e(s=>({tagRuleLinks:s.tagRuleLinks.filter(o=>o.id!==a)}));try{await _t.deleteTagRuleLink(a)}catch(s){throw console.error("RulesStore: Error unlinking tag from rule",s),e(o=>{o.tagRuleLinks.push(i),o.error="Failed to unlink tag and rule"}),qe.error("Failed to unlink tag and rule."),s}}},getRulesForTag:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.tagId===n).map(i=>i.ruleId));return r.rules.filter(i=>a.has(i.id))},getTagsForRule:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.ruleId===n).map(i=>i.tagId));return r.tags.filter(i=>a.has(i.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(a=>r.has(a.id))}}))),$P={async submitPrompt(e){var X,ne,q,J,Q,te;console.log("[ConversationService] submitPrompt called",e);const t=On.getState(),n=hi.getState(),r=Oi.getState(),a=mn.getState(),i=Zs.getState(),s=rr.getState(),o=t.currentConversationId;if(!o){qe.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const l=a.getConversationById(o),u=(l==null?void 0:l.projectId)??null,d=n.getEffectiveProjectSettings(u),m=t.interactions.filter(ue=>ue.conversationId===o).length===0&&s.autoTitleEnabled&&((X=e.metadata)==null?void 0:X.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,v=t.interactions.filter(ue=>ue.status==="COMPLETED"&&ue.type==="message.user_assistant"),b=u6(v);let w=e.content;const x=[],_=d.defaultTagIds??[],E=d.defaultRuleIds??[],C=((ne=e.metadata)==null?void 0:ne.activeTagIds)??[],k=((q=e.metadata)==null?void 0:q.activeRuleIds)??[],I=Array.from(new Set([..._,...C])),j=Array.from(new Set([...E,...k])),N=new Set(j);I.forEach(ue=>{i.getRulesForTag(ue).forEach(ge=>N.add(ge.id))});const P=i.getRulesByIds(Array.from(N))||[],L=P.filter(ue=>ue.type==="system").map(ue=>ue.content),H=P.filter(ue=>ue.type==="before").map(ue=>ue.content),M=P.filter(ue=>ue.type==="after").map(ue=>ue.content);H.length>0&&(w=`${H.join(`
`)}

${w}`),M.length>0&&(w=`${w}

    ${M.join(`
`)}`),w&&x.push({type:"text",text:w});const K=((J=e.metadata)==null?void 0:J.attachedFiles)??[];if(K.length>0){const ue=await this._processFilesForPrompt(K,o);x.unshift(...ue)}x.length>0?b.push({role:"user",content:x}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");let se=((Q=e.metadata)==null?void 0:Q.turnSystemPrompt)??d.systemPrompt??void 0;L.length>0&&(se=`${se?`${se}

        `:""}${L.join(`
`)}`);const ie={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(ie).forEach(ue=>{(ie[ue]===null||ie[ue]===void 0)&&delete ie[ue]});const re={system:se,messages:b,parameters:ie,metadata:{...(({turnSystemPrompt:ue,activeTagIds:ge,activeRuleIds:Ie,autoTitleEnabledForTurn:Ae,..._e})=>({..._e,effectivelyAppliedTagIds:I,effectivelyAppliedRuleIds:Array.from(N)}))(e.metadata??{}),modelId:r.modelId??void 0,attachedFiles:(te=e.metadata.attachedFiles)==null?void 0:te.map(({contentBase64:ue,contentText:ge,...Ie})=>Ie)}};try{const ue=qw.startInteraction(re,o,e);m&&(console.log("[ConversationService] Triggering asynchronous title generation."),this.generateConversationTitle(o,e,P).catch(ge=>{console.error("[ConversationService] Background title generation failed:",ge)})),await ue}catch(ue){throw console.error("[ConversationService] Error starting interaction:",ue),qe.error(`Failed to start interaction: ${ue instanceof Error?ue.message:String(ue)}`),ue}},async generateConversationTitle(e,t,n){var o,l;const r=rr.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let a=t.content;if(a.length>r.autoTitlePromptMaxLength&&(a=a.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const u=t.metadata.attachedFiles.map(d=>d.name).join(", ");a+=`

[Attached files: ${u}]`}if(r.autoTitleIncludeRules&&n.length>0){const u=n.map(d=>d.name).join(", ");a+=`

[Active rules: ${u}]`}const i={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:a}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},s={id:ji(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:i.parameters,metadata:{...i.metadata,originalTurnId:t.id}};try{await qw.startInteraction(i,e,s,"conversation.title_generation")}catch(u){console.error("[ConversationService] Error starting title generation interaction:",u)}},async regenerateInteraction(e){var K,U,se,ie,re,X;console.log("[ConversationService] regenerateInteraction called",e);const t=On.getState(),n=hi.getState(),r=Oi.getState(),a=mn.getState(),i=Zs.getState(),s=t.interactions.find(ne=>ne.id===e);if(!s||!s.prompt){qe.error("Cannot regenerate: Original interaction data missing.");return}const o=s.prompt,l=s.conversationId,u=a.getConversationById(l),d=(u==null?void 0:u.projectId)??null,h=n.getEffectiveProjectSettings(d),m=s.index,g=t.interactions.filter(ne=>ne.conversationId===l&&ne.index<m&&ne.status==="COMPLETED"&&ne.type==="message.user_assistant").sort((ne,q)=>ne.index-q.index),v=u6(g);let b=o.content;const w=[],x=((K=s.metadata)==null?void 0:K.effectivelyAppliedTagIds)??((U=o.metadata)==null?void 0:U.activeTagIds)??[],_=((se=s.metadata)==null?void 0:se.effectivelyAppliedRuleIds)??((ie=o.metadata)==null?void 0:ie.activeRuleIds)??[],E=new Set(_);x.forEach(ne=>{i.getRulesForTag(ne).forEach(q=>E.add(q.id))});const C=i.getRulesByIds(Array.from(E))||[],k=C.filter(ne=>ne.type==="before").map(ne=>ne.content),I=C.filter(ne=>ne.type==="after").map(ne=>ne.content);k.length>0&&(b=`${k.join(`
`)}

${b}`),I.length>0&&(b=`${b}

    ${I.join(`
`)}`),b&&w.push({type:"text",text:b});const j=((re=o.metadata)==null?void 0:re.attachedFiles)??[];if(j.length>0){const ne=await this._processFilesForPrompt(j,l);w.unshift(...ne)}w.length>0?v.push({role:"user",content:w}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");let P=((X=o.metadata)==null?void 0:X.turnSystemPrompt)??h.systemPrompt??void 0;const L=C.filter(ne=>ne.type==="system").map(ne=>ne.content);L.length>0&&(P=`${P?`${P}

        `:""}${L.join(`
`)}`);const H={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(H).forEach(ne=>{(H[ne]===null||H[ne]===void 0)&&delete H[ne]});const M={system:P,messages:v,parameters:H,metadata:{...(({turnSystemPrompt:ne,activeTagIds:q,activeRuleIds:J,autoTitleEnabledForTurn:Q,effectivelyAppliedTagIds:te,effectivelyAppliedRuleIds:ue,...ge})=>({...ge,effectivelyAppliedTagIds:x,effectivelyAppliedRuleIds:Array.from(E)}))(o.metadata??{}),modelId:r.modelId??void 0,regeneratedFromId:e,attachedFiles:j.map(({contentBase64:ne,contentText:q,...J})=>J)}};try{await qw.startInteraction(M,l,o,"message.assistant_regen")}catch(ne){throw console.error("[ConversationService] Error starting regeneration interaction:",ne),qe.error(`Failed to start regeneration: ${ne instanceof Error?ne.message:String(ne)}`),ne}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=mn.getState().getConversationById(t),s=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(s)}catch{qe.error(`Filesystem unavailable for key ${s}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let s=null;try{if(i.source==="direct")s=c6(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const o=await qf(i.path,{fsInstance:a});s=c6({...i,contentBytes:o})}else if(i.source==="vfs"&&!a)continue;s&&n.push(s)}catch(o){console.error(`[ConversationService] Error processing file ${i.name}:`,o),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await xl.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}},hy=Ys(Xs((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),qe.error(r)}},addDbMod:async n=>{const r=ji(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((s,o)=>s.loadOrder-o.loadOrder)});try{return await _t.saveMod(a),qe.success(`Mod "${a.name}" added.`),r}catch(i){const s="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=s}),qe.error(s),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(o=>{i=o.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...o.dbMods[i]},o.dbMods[i]={...o.dbMods[i],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const s=i!==-1?t().dbMods[i]:void 0;if(s)try{await _t.saveMod(s),qe.success(`Mod "${s.name}" updated.`)}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(u=>{const d=u.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(u.dbMods[d]=a,u.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),u.error=l}),qe.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(s=>s.id!==n)}));try{await _t.deleteMod(n),qe.success(`Mod "${a}" deleted.`)}catch(i){const s="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder),o.error=s}),qe.error(s),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function zP(e){const t=e.id,n=e.name,r=Ir.getState(),a=hy.getState();return{modId:t,modName:n,registerPromptControl:s=>r.registerPromptControl(s),registerChatControl:s=>{const o={...s,status:s.status??(()=>"ready")};return r.registerChatControl(o)},registerTool:(s,o,l)=>(console.log(`[${n}] Registering tool: ${s}`),r.registerTool(t,s,o,l)),on:(s,o)=>(Ct.on(s,o),()=>Ct.off(s,o)),addMiddleware:(s,o)=>r.registerMiddleware(s,t,o),registerSettingsTab:s=>(a._addSettingsTab(s),()=>a._removeSettingsTab(s.id)),getContextSnapshot:()=>{const s=On.getState(),o=mn.getState(),l=rr.getState(),u=Un.getState(),{providerId:d}=Rc(u.selectedModelId),h=o.selectedItemType==="conversation"?o.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(s.currentConversationId===h?s.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:s.status==="streaming",selectedProviderId:d,selectedModelId:u.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(s,o)=>{qe[s](`[${n}] ${o}`)},log:(s,...o)=>{console[s](`[Mod: ${n}]`,...o)}}}async function W2e(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,s=null;try{if(i=zP(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const u=await fetch(r.sourceUrl);if(!u.ok)throw new Error(`Failed to fetch mod script: ${u.status} ${u.statusText}`);a=await u.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(u){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,u),u}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){s=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),qe.error(`Error loading mod "${r.name}": ${s instanceof Error?s.message:s}`)}i||(i=zP(r));const o={id:r.id,name:r.name,api:i,error:s??void 0};return Ct.emit(o.error?St.MOD_ERROR:St.MOD_LOADED,{id:r.id,name:r.name,error:o.error}),o}));return Ct.emit(St.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var K2e=(e,t,n,r,a,i,s,o)=>{let l=document.documentElement,u=["light","dark"];function d(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",w=b&&i?a.map(x=>i[x]||x):a;b?(l.classList.remove(...w),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(v,g)}),h(g)}function h(g){o&&u.includes(g)&&(l.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(t)||n,v=s&&g==="system"?m():g;d(v)}catch{}},Z2e=T.createContext(void 0),Y2e={setTheme:e=>{},themes:[]},X2e=()=>{var e;return(e=T.useContext(Z2e))!=null?e:Y2e};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:s,themes:o,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,t,i,e,o,s,r,a]).slice(1,-1);return T.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${K2e.toString()})(${d})`}})});const J2e=({...e})=>{const{theme:t="system"}=X2e();return p.jsx(qX,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function bd({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:xt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const mV=T.memo(T.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...s},o)=>{const l=T.useRef(null),[u,d]=T.useState(e);T.useImperativeHandle(o,()=>({getValue:()=>u,focus:()=>{var g;return(g=l.current)==null?void 0:g.focus()},clearValue:()=>{d(""),i&&i(""),requestAnimationFrame(()=>{const g=l.current;g&&(g.style.height="auto",g.style.height=`${g.scrollHeight}px`,g.style.overflowY="hidden")})}}));const h=g=>{var v;if(g.key==="Enter"&&!g.shiftKey&&!n){g.preventDefault();const b=vc.getState().attachedFilesMetadata.length>0;(u.trim().length>0||b)&&(t(),(v=o==null?void 0:o.current)==null||v.clearValue())}},m=g=>{const v=g.target.value;d(v),i&&i(v),Ct.emit(St.PROMPT_INPUT_CHANGE,{value:v})};return T.useEffect(()=>{const g=l.current;if(g){g.style.height="auto";const v=g.scrollHeight,b=250;g.style.height=`${Math.min(v,b)}px`,g.style.overflowY=v>b?"auto":"hidden"}},[u]),T.useEffect(()=>{e!==u&&(d(e),i&&i(e))},[e]),p.jsx(bd,{ref:l,value:u,onChange:m,onKeyDown:h,disabled:n,placeholder:r,rows:1,className:xt("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...s})}));mV.displayName="InputArea";const Q2e=({controls:e=[]})=>{const[t,n]=T.useState(!0),[r,a]=T.useState(!1),i=T.useRef(null),s=mn(te=>te.selectedItemId),o=mn(te=>te.selectedItemType),l=mn(te=>te.loadSidebarItems),u=mn(te=>te.getConversationById),{getEffectiveProjectSettings:d}=hi(sn(te=>({projects:te.projects,getProjectById:te.getProjectById,getEffectiveProjectSettings:te.getEffectiveProjectSettings}))),{interactions:h,status:m}=On(sn(te=>({interactions:te.interactions,status:te.status}))),{globalError:g,isSidebarCollapsed:v,isChatControlPanelOpen:b,isProjectSettingsModalOpen:w,isVfsModalOpen:x}=Ji(sn(te=>({globalError:te.globalError,isSidebarCollapsed:te.isSidebarCollapsed,isChatControlPanelOpen:te.isChatControlPanelOpen,isProjectSettingsModalOpen:te.isProjectSettingsModalOpen,isVfsModalOpen:te.isVfsModalOpen}))),_=Ir(sn(te=>Object.values(te.chatControls))),{loadDbMods:E,setLoadedMods:C}=hy(sn(te=>({loadDbMods:te.loadDbMods,setLoadedMods:te.setLoadedMods}))),{loadInitialData:k}=Un(sn(te=>({loadInitialData:te.loadInitialData}))),{loadSettings:I}=rr(sn(te=>({loadSettings:te.loadSettings}))),{setVfsKey:j}=xl(sn(te=>({setVfsKey:te.setVfsKey}))),{initializePromptState:N}=Oi(sn(te=>({initializePromptState:te.initializePromptState}))),{loadRulesAndTags:P}=Zs(sn(te=>({loadRulesAndTags:te.loadRulesAndTags}))),L=T.useCallback(()=>{a(te=>!te)},[]);T.useEffect(()=>{r&&a(!1)},[s,o]);const H=T.useCallback(()=>{requestAnimationFrame(()=>{var te;(te=i.current)==null||te.focus()})},[]);T.useEffect(()=>{let te=!0;return(async()=>{var ge;console.log("LiteChat: Starting initialization..."),n(!0);try{if(console.log("LiteChat: Loading core data..."),await I(),!te||(console.log("LiteChat: Settings loaded."),await k(),!te)||(console.log("LiteChat: Provider data loaded."),await P(),!te)||(console.log("LiteChat: Rules and Tags loaded."),await l(),!te)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),e.forEach(Be=>{try{Be()}catch(nt){console.error("LiteChat: Error running registration function:",nt)}}),console.log("LiteChat: Core controls and tools registered."),!te)||(console.log("LiteChat: Loading mods..."),await E(),!te))return;console.log("LiteChat: DB Mods loaded.");const Ie=hy.getState().dbMods;console.log(`LiteChat: Processing ${Ie.length} mods...`);const Ae=await W2e(Ie);if(!te)return;C(Ae),console.log(`LiteChat: ${Ae.length} mods processed.`);const _e=o==="project"?s:o==="conversation"?((ge=u(s))==null?void 0:ge.projectId)??null:null,ve=d(_e);N(ve),console.log("LiteChat: Initial prompt state initialized.",ve)}catch(Ie){console.error("LiteChat: Initialization failed:",Ie),qe.error(`Initialization failed: ${Ie instanceof Error?Ie.message:String(Ie)}`),Ji.getState().setGlobalError("Initialization failed.")}finally{te&&(console.log("LiteChat: Initialization complete."),n(!1))}})(),()=>{te=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[e]);const M=T.useRef({itemId:null,itemType:null});T.useEffect(()=>{var ue;if(t)return;const te={itemId:s,itemType:o};if(te.itemId!==M.current.itemId||te.itemType!==M.current.itemType){const ge=o==="project"?s:o==="conversation"?((ue=u(s))==null?void 0:ue.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${s}, Type: ${o}). Calculating effective settings for Project ID: ${ge}`);const Ie=d(ge);N(Ie),console.log("[LiteChat Effect] Prompt state updated based on context change.",Ie),M.current=te,te.itemType==="conversation"&&H()}},[s,o,u,d,N,t,H]),T.useEffect(()=>{let te=null;if(x||o==="project"){if(o==="project")te=s;else if(o==="conversation"){const ue=mn.getState().getConversationById(s);te=(ue==null?void 0:ue.projectId)??"orphan"}else te="orphan";console.log(`[LiteChat Effect] VFS Context Required. Setting target key: ${te}`)}else te=null,console.log("[LiteChat Effect] VFS Context Not Required. Setting target key: null");xl.getState().vfsKey!==te&&j(te)},[x,s,o,j]);const K=T.useCallback(async te=>{var Ae;const ue=mn.getState();let ge=ue.selectedItemType==="conversation"?ue.selectedItemId:null;const Ie=ue.selectedItemType==="project"?ue.selectedItemId:ue.selectedItemType==="conversation"?((Ae=ue.getConversationById(ue.selectedItemId))==null?void 0:Ae.projectId)??null:null;if(!ge){console.log("LiteChat: No conversation selected, creating new one...");try{const _e=await ue.addConversation({title:"New Chat",projectId:Ie});await ue.selectItem(_e,"conversation"),ge=mn.getState().selectedItemId,ge!==_e&&console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),console.log(`LiteChat: New conversation created (${ge}), selected.`)}catch(_e){console.error("LiteChat: Failed to create new conversation",_e),qe.error("Failed to start new chat.");return}}console.log("LiteChat: Submitting turn data to ConversationService...");try{const _e=Oi.getState(),ve={...te,metadata:{...te.metadata,modelId:_e.modelId}};await $P.submitPrompt(ve),console.log("LiteChat: ConversationService processing initiated."),H()}catch(_e){console.error("LiteChat: Error submitting prompt:",_e),H()}},[H]),U=T.useCallback(async te=>{console.log(`LiteChat: Regenerating interaction ${te}`);try{await $P.regenerateInteraction(te),console.log(`LiteChat: ConversationService regeneration initiated for ${te}.`),H()}catch(ue){console.error("LiteChat: Error regenerating interaction:",ue),H()}},[H]),se=T.useCallback(te=>{console.log(`LiteChat: Stopping interaction ${te}`),qw.abortInteraction(te),H()},[H]),ie=T.useMemo(()=>_.filter(te=>(te.panel??"main")==="sidebar"&&(te.show?te.show():!0)).map(te=>te),[_]),re=T.useMemo(()=>_.filter(te=>te.panel==="sidebar-footer"&&(te.show?te.show():!0)).map(te=>te),[_]),X=T.useMemo(()=>_.filter(te=>te.panel==="header"&&(te.show?te.show():!0)).map(te=>te),[_]),ne=T.useMemo(()=>{var te;return(te=_.find(ue=>ue.id==="core-settings-trigger"))==null?void 0:te.settingsRenderer},[_]),q=T.useMemo(()=>{var te;return(te=_.find(ue=>ue.id==="core-project-settings-trigger"))==null?void 0:te.settingsRenderer},[_]),J=T.useMemo(()=>{var te;return(te=_.find(ue=>ue.id==="core-vfs-modal-panel"))==null?void 0:te.renderer},[_]),Q=o==="conversation"?s:null;return t?p.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx(Fn,{className:"h-12 w-12 animate-spin text-primary"}),p.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[p.jsxs("div",{className:xt("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",v?"w-16":"w-64"),children:[p.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[p.jsx("div",{className:xt(v?"hidden":"block"),children:p.jsx(Gh,{controls:ie,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:xt(v?"block":"hidden"),children:p.jsx(Gh,{controls:ie,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),p.jsx("div",{className:xt("flex-shrink-0 border-t border-border p-2",v?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:p.jsx(Gh,{controls:re,panelId:"sidebar-footer",renderMode:v?"icon":"full",className:xt("flex",v?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&p.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex",children:[p.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm animate-fadeIn",onClick:L}),p.jsxs("div",{className:"relative w-4/5 max-w-xs bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[p.jsx("h2",{className:"font-semibold",children:"LiteChat Menu"}),p.jsx("button",{onClick:L,className:"p-1 rounded-md hover:bg-muted","aria-label":"Close menu",children:p.jsx(Ii,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:p.jsx(Gh,{controls:ie,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border p-4",children:p.jsx(Gh,{controls:re,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"})})]})]}),p.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[p.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-muted",onClick:L,"aria-label":"Open menu",children:p.jsx(YZ,{className:"h-5 w-5"})}),p.jsx(Gh,{controls:X,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),p.jsx(o1e,{conversationId:Q,interactions:h,onRegenerateInteraction:U,onStopInteraction:se,status:m,className:"flex-grow overflow-y-hidden"}),g&&p.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",g]}),p.jsx(Dde,{InputAreaRenderer:mV,onSubmit:K,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:i})]})]}),b.settingsModal&&ne&&ne(),w&&q&&q(),x&&J&&J(),p.jsx(J2e,{richColors:!0,position:"bottom-right",closeButton:!0})]})},eEe="prism-theme-link",tEe="prism-default-light-theme-link",nEe="prism-default-dark-theme-link",rEe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",aEe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css",aT=e=>{let t=document.getElementById(e);return t||(t=document.createElement("link"),t.id=e,t.rel="stylesheet",document.head.appendChild(t)),t},iEe=()=>{const{prismThemeUrl:e,theme:t}=rr(sn(a=>({prismThemeUrl:a.prismThemeUrl,theme:a.theme}))),n=T.useMemo(()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=T.useMemo(()=>{const a=t==="system"?n:t;return a==="dark"||a==="TijuDark"?"dark":"light"},[t,n]);return T.useEffect(()=>{if(typeof window>"u")return;const a=aT(tEe),i=aT(nEe),s=aT(eEe);return a.disabled=!0,i.disabled=!0,s.disabled=!0,a.href=rEe,i.href=aEe,e?(s.href=e,s.disabled=!1):(console.log(r),r==="dark"?i.disabled=!1:a.disabled=!1),()=>{}},[e,r]),null},iT=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),sT=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],sEe=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=rr(sn(a=>({theme:a.theme,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,customThemeColors:a.customThemeColors})));return T.useEffect(()=>{const a=document.body,i=document.documentElement;a.classList.remove("light","dark","TijuLight","TijuDark","custom"),sT.forEach(s=>{i.style.removeProperty(`--${iT(s)}`)}),i.style.removeProperty("--custom-font-family"),i.style.removeProperty("--custom-font-size"),e==="light"?a.classList.add("light"):e==="dark"?a.classList.add("dark"):e==="TijuLight"?a.classList.add("TijuLight"):e==="TijuDark"?a.classList.add("TijuDark"):e==="custom"?(a.classList.add("custom"),t?i.style.setProperty("--custom-font-family",t):i.style.removeProperty("--custom-font-family"),n?i.style.setProperty("--custom-font-size",`${n}px`):i.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([s,o])=>{if(o&&sT.includes(s)){const l=`--${iT(s)}`;i.style.setProperty(l,o)}else if(sT.includes(s)){const l=`--${iT(s)}`;i.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?a.classList.add("dark"):a.classList.add("light")},[e,t,n,r]),null},oEe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1750 c-26 15 -48 65 -41 94
             15 61 181 167 304 196
             30 7 100 12 155 12
             81 -1 115 -6 178 -27
             135 -45 247 -133 249 -194
             2 -60 -48 -103 -104 -88
             -13 3 -50 25 -83 50
             -85 64 -172 90 -280 84
             -92 -6 -165 -35 -259 -103
             -49 -35 -86 -43 -119 -24z`})})]})},UP="0.1.0-dev",VP="https://github.com/DimitriGilbert/LiteChat",HP=({textToCopy:e,label:t,className:n})=>{const[r,a]=T.useState(!1),i=async()=>{try{await navigator.clipboard.writeText(e),a(!0),qe.success(`${t} copied to clipboard!`),setTimeout(()=>a(!1),2e3)}catch(s){qe.error(`Failed to copy ${t.toLowerCase()}.`),console.error(`Clipboard copy failed for ${t}:`,s)}};return p.jsxs(It,{variant:"outline",onClick:i,className:n,children:[r?p.jsx(Ga,{className:"mr-2 h-4 w-4 text-green-500"}):p.jsx(oZ,{className:"mr-2 h-4 w-4"}),r?"Copied!":`Copy ${t}`]})};class lEe extends T.Component{constructor(){super(...arguments);va(this,"state",{hasError:!1,error:null,errorInfo:null});va(this,"handleReportOnGitHub",async()=>{const n=this.generateErrorReport(!0);try{await navigator.clipboard.writeText(n),qe.success("Error report copied to clipboard. Paste it into the GitHub issue body.");const r=`${VP}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(r,"_blank","noopener,noreferrer")}catch(r){qe.error("Failed to copy error report. Please copy manually."),console.error("Clipboard copy failed for GitHub report:",r);const a=`${VP}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(a,"_blank","noopener,noreferrer")}})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueTitle(){var i;const{error:n,errorInfo:r}=this.state;let a="Crash Report: ";if(r!=null&&r.componentStack){const s=(i=r.componentStack.trim().split(/\s+at\s+/)[1])==null?void 0:i.split(" ")[0];s&&(a+=`Error in <${s}> - `)}return a+=(n==null?void 0:n.message.substring(0,70))??"Unknown Error",n&&n.message.length>70&&(a+="..."),a}generateErrorReport(n=!1){const{error:r,errorInfo:a}=this.state,i=`
`,s=n?"```":"";let o=`## LiteChat Error Report${i}${i}`;return o+=`**Version:** ${UP}${i}`,o+=`**Timestamp:** ${new Date().toISOString()}${i}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${i}${i}`,r?o+=`**Error Message:**${i}${s}${i}${r.message}${i}${s}${i}${i}`:o+=`**Error Message:** Unknown Error${i}${i}`,a!=null&&a.componentStack&&(o+=`**Component Stack:**${i}${s}text${i}${a.componentStack.trim()}${i}${s}${i}${i}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${i}${s}text${i}${r.stack.trim()}${i}${s}${i}${i}`),o+=`**Steps to Reproduce (Please Describe):**${i}1. ...${i}2. ...${i}${i}`,o+=`**Expected Behavior:**${i}...${i}${i}`,o+=`**Actual Behavior:**${i}...${i}`,o}generateAIPrompt(){var i,s;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${UP}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((i=r==null?void 0:r.componentStack)==null?void 0:i.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((s=n==null?void 0:n.stack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:p.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[p.jsx(oEe,{className:"h-24 w-24 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),p.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue. Copy the details and paste them into the GitHub issue."}),p.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[p.jsx(It,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),p.jsx(HP,{textToCopy:this.generateErrorReport(),label:"Details"}),p.jsx(HP,{textToCopy:this.generateAIPrompt(),label:"AI Debug Prompt"}),p.jsxs(It,{variant:"outline",onClick:this.handleReportOnGitHub,children:[p.jsx($8,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})]})]})}):this.props.children}}const gV=(e,t)=>{if(!t)return null;let n=Pu,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Fn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Ou,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=bA,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=dA,r="text-green-500",a=`Synced with ${t}`;break;default:n=Pu,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(n,{className:xt("h-3 w-3 ml-1 flex-shrink-0",r)})}),p.jsx(Yn,{side:"right",children:a})]})})},o1=T.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:j})=>{const N=e.id===n,P=e.itemType==="project",L=e.id===v&&e.itemType===b,H=P&&d.has(e.id),{projects:M,conversations:K}=P?m(e.id,g):{projects:[],conversations:[]},U=M.length>0||K.length>0,se=!P&&e.syncRepoId?r[e.id]:void 0,ie=!P&&e.syncRepoId?a.get(e.syncRepoId):void 0,re=!P&&ie?gV(se,ie):null,X=Ji(Ae=>Ae.openProjectSettingsModal),ne=()=>{L||(P&&U&&h(e.id),i(e.id,e.itemType))},q=Ae=>{Ae.stopPropagation(),P?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,Ae):s(e.id,Ae)},J=Ae=>{Ae.stopPropagation(),E(e)},Q=Ae=>{Ae.stopPropagation(),P&&X(e.id)},te=Ae=>{Ae.key==="Enter"?(Ae.preventDefault(),C()):Ae.key==="Escape"&&k()},ue=P?e.name:e.title,ge=I?Fn:Ga,Ie=I?"h-3 w-3 animate-spin":"h-3 w-3";return p.jsxs(p.Fragment,{children:[p.jsxs("li",{className:xt("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!L&&"hover:bg-muted/50 hover:text-primary/80",N&&!L?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",L&&"bg-muted ring-1 ring-primary",!L&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ne,title:L?"":ue,children:[p.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[P&&U&&p.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:Ae=>{Ae.stopPropagation(),h(e.id)},children:H?p.jsx(_o,{className:"h-3 w-3 text-muted-foreground"}):p.jsx(L8,{className:"h-3 w-3 text-muted-foreground"})}),P&&!U&&p.jsx("span",{className:"w-3 flex-shrink-0"}),P?p.jsx(pf,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):p.jsx(_T,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),L?p.jsx(kn,{ref:j,value:x,onChange:Ae=>_(Ae.target.value),onKeyDown:te,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:Ae=>Ae.stopPropagation(),disabled:I}):p.jsx("span",{className:"truncate min-w-0 flex-1",children:ue}),re]}),p.jsx("div",{className:xt("items-center flex-shrink-0 ml-1",L?"flex":"hidden group-hover:flex transition-all duration-150"),onClick:Ae=>Ae.stopPropagation(),children:L?p.jsxs(p.Fragment,{children:[p.jsx(Cn,{tooltipText:"Save (Enter)",onClick:Ae=>{Ae.stopPropagation(),C()},disabled:I||!x.trim(),"aria-label":"Save changes",icon:p.jsx(ge,{}),iconClassName:Ie,className:"h-5 w-5 text-green-500 hover:text-green-600"}),p.jsx(Cn,{tooltipText:"Cancel (Esc)",onClick:Ae=>{Ae.stopPropagation(),k()},disabled:I,"aria-label":"Cancel edit",icon:p.jsx(Ii,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[P&&p.jsx(Cn,{tooltipText:"Project Settings",onClick:Q,"aria-label":`Settings for ${ue}`,icon:p.jsx(rZ,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),p.jsx(Cn,{tooltipText:"Edit",onClick:J,"aria-label":`Edit ${ue}`,icon:p.jsx(wy,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),P?p.jsx(Cn,{tooltipText:"Export Project (JSON)",onClick:Ae=>u(e.id,Ae),"aria-label":`Export project ${ue}`,icon:p.jsx(yZ,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):p.jsxs("div",{className:"relative group/export",children:[p.jsx(Cn,{tooltipText:"Export Conversation","aria-label":`Export ${ue}`,icon:p.jsx(uf,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),p.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:Ae=>Ae.stopPropagation(),children:[p.jsx(It,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ae=>l(e.id,"json",Ae),children:"JSON"}),p.jsx(It,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ae=>l(e.id,"md",Ae),children:"MD"})]})]}),p.jsx(Cn,{tooltipText:"Delete",onClick:q,"aria-label":`Delete ${ue}`,icon:p.jsx(Zi,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),P&&H&&p.jsxs(p.Fragment,{children:[M.sort((Ae,_e)=>_e.updatedAt.getTime()-Ae.updatedAt.getTime()).map(Ae=>p.jsx(o1,{item:{...Ae,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:j},Ae.id)),K.sort((Ae,_e)=>_e.updatedAt.getTime()-Ae.updatedAt.getTime()).map(Ae=>p.jsx(o1,{item:{...Ae,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:j},Ae.id))]})]})});o1.displayName="ConversationItemRenderer";function cEe({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(""),[u,d]=T.useState(""),[h,m]=T.useState(!1),g=T.useRef(null),v=T.useCallback(x=>{a(x.id),s(x.itemType);const _=x.itemType==="project"?x.name:x.title;l(_),d(_),m(!1)},[]),b=T.useCallback(x=>{const _=r,E=x??(i==="project"&&o==="New Project");a(null),s(null),l(""),d(""),m(!1),E&&_&&(console.log(`Cancelling edit for new project ${_}, deleting...`),n(_).catch(C=>{console.error("Failed to delete new project on cancel:",C),qe.error("Failed to clean up cancelled new project.")}))},[r,i,o,n]),w=T.useCallback(async()=>{var E;if(!r||!i||h)return;const x=u.trim(),_=i==="project"&&o==="New Project";if(!x){qe.error("Name cannot be empty."),(E=g.current)==null||E.focus();return}if(x===o&&!_){b();return}m(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),qe.success("Item renamed successfully."),a(null),s(null),l(""),d("")}catch(C){console.error("Failed to save item name:",C),qe.error(`Failed to rename item: ${C instanceof Error?C.message:String(C)}`)}finally{m(!1)}},[r,i,u,o,h,e,t,b]);return T.useEffect(()=>{r&&g.current&&(g.current.focus(),g.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:o,localEditingName:u,setLocalEditingName:d,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:w,handleCancelEdit:b}}const Zk=(e,t,n,r,a,i,s,o,l)=>{if(!n)return!0;const u=`${t}-${e}`;if(l[u]!==void 0)return l[u];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const m=o.get(e)||[],g=s.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of m)if(Zk(v.id,"project",n,r,a,i,s,o,l)){d=!0;break}}}}return l[u]=d,d},uEe=()=>{const e=mn($=>$.selectedItemId),t=mn($=>$.selectedItemType),n=mn($=>$.isLoading),r=hi($=>$.isLoading),{conversations:a,syncRepos:i,conversationSyncStatus:s}=mn(sn($=>({conversations:$.conversations,syncRepos:$.syncRepos,conversationSyncStatus:$.conversationSyncStatus}))),o=hi($=>$.projects),l=mn($=>$.selectItem),u=mn($=>$.addConversation),d=mn($=>$.updateConversation),h=mn($=>$.deleteConversation),m=mn($=>$.exportConversation),g=mn($=>$.exportProject),v=mn($=>$.getConversationById),b=hi($=>$.addProject),w=hi($=>$.updateProject),x=hi($=>$.deleteProject),_=hi($=>$.getProjectById),[E,C]=gt.useState(new Set),[k,I]=T.useState(""),j=n||r,N=cEe({updateProject:w,updateConversation:d,deleteProject:x,getProjectById:_,getConversationById:v}),{editingItemId:P,editingItemType:L,originalName:H,localEditingName:M,setLocalEditingName:K,isSavingEdit:U,editInputRef:se,handleStartEditing:ie,handleSaveEdit:re,handleCancelEdit:X}=N,ne=T.useCallback($=>{C(Ee=>{const Te=new Set(Ee);return Te.has($)?Te.delete($):Te.add($),Te})},[]),q=T.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const $=v(e);return($==null?void 0:$.projectId)??null}return null},[e,t,v]),J=T.useCallback(async()=>{if(!P)try{const $=q(),Ee=await u({title:"New Chat",projectId:$});l(Ee,"conversation")}catch($){console.error("Failed to create new chat:",$),qe.error("Failed to create new chat.")}},[P,q,u,l]),Q=T.useCallback(async()=>{if(!P)try{const $=q(),Ee=await b({name:"New Project",parentId:$});l(Ee,"project"),$&&C(Te=>new Set(Te).add($)),setTimeout(()=>{const Te=_(Ee);Te?ie({...Te,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch($){console.error("Failed to create new project:",$)}},[P,q,b,l,_,ie]),te=T.useCallback(($,Ee)=>{$!==P&&(P&&$!==P&&(M.trim()&&M.trim()!==H?re():X()),($!==e||Ee!==t)&&l($,Ee))},[P,M,H,e,t,re,X,l]),ue=T.useCallback(($,Ee)=>{Ee.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&h($).catch(Te=>{console.error("Failed to delete conversation:",Te),qe.error("Failed to delete conversation.")})},[h]),ge=T.useCallback(($,Ee)=>{Ee.stopPropagation(),x($).catch(Te=>{console.error("Failed to delete project:",Te),qe.error("Failed to delete project.")})},[x]),Ie=T.useCallback(async($,Ee,Te)=>{Te.stopPropagation();try{await m($,Ee)}catch(fe){console.error(`Failed to export conversation as ${Ee}:`,fe)}},[m]),Ae=T.useCallback(async($,Ee)=>{Ee.stopPropagation();try{await g($)}catch(Te){console.error("Failed to export project:",Te)}},[g]),_e=T.useMemo(()=>new Map((i||[]).map($=>[$.id,$.name])),[i]),{projectsById:ve,conversationsByProjectId:Be,projectsByParentId:nt}=T.useMemo(()=>{const $=new Map(o.map(fe=>[fe.id,fe])),Ee=new Map;a.forEach(fe=>{const oe=fe.projectId??null;Ee.has(oe)||Ee.set(oe,[]),Ee.get(oe).push(fe)});const Te=new Map;return o.forEach(fe=>{const oe=fe.parentId??null;Te.has(oe)||Te.set(oe,[]),Te.get(oe).push(fe)}),{projectsById:$,conversationsByProjectId:Ee,projectsByParentId:Te}},[o,a]),Ve=T.useCallback(($,Ee)=>{const Te=Ee.toLowerCase(),fe={},oe=(nt.get($)||[]).filter(Se=>Zk(Se.id,"project",Te,o,a,ve,Be,nt,fe)),ee=(Be.get($)||[]).filter(Se=>Se.title.toLowerCase().includes(Te));return oe.sort((Se,Pe)=>Pe.updatedAt.getTime()-Se.updatedAt.getTime()),ee.sort((Se,Pe)=>Pe.updatedAt.getTime()-Se.updatedAt.getTime()),{projects:oe,conversations:ee}},[o,a,ve,Be,nt]),De=T.useMemo(()=>{const $=k.toLowerCase(),Ee={},Te=(nt.get(null)||[]).filter(ee=>Zk(ee.id,"project",$,o,a,ve,Be,nt,Ee)),fe=(Be.get(null)||[]).filter(ee=>ee.title.toLowerCase().includes($)),oe=[...Te.map(ee=>({...ee,itemType:"project"})),...fe.map(ee=>({...ee,itemType:"conversation"}))];return oe.sort((ee,Se)=>Se.updatedAt.getTime()-ee.updatedAt.getTime()),oe},[o,a,k,ve,Be,nt]);return p.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[p.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{size:"sm",variant:"ghost",onClick:Q,"aria-label":"New Project",disabled:j||!!P,className:"h-7 w-7 p-0",children:p.jsx(fA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"bottom",children:"New Project"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{size:"sm",variant:"ghost",onClick:J,"aria-label":"New Chat",disabled:j||!!P,className:"h-7 w-7 p-0",children:p.jsx(Nf,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"bottom",children:"New Chat"})]})})]})]}),p.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[p.jsx(Qi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),p.jsx(kn,{type:"search",placeholder:"Filter...",value:k,onChange:$=>I($.target.value),className:"h-8 text-xs pl-8",disabled:j})]}),p.jsx("div",{className:"flex-grow",children:j?p.jsxs("div",{className:"space-y-1 p-1",children:[p.jsx(cr,{className:"h-8 w-full"}),p.jsx(cr,{className:"h-8 w-full"}),p.jsx(cr,{className:"h-8 w-full"})]}):De.length===0?p.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):p.jsx("ul",{className:"space-y-0.5 p-1",children:De.map($=>p.jsx(o1,{item:$,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:_e,onSelectItem:te,onDeleteConversation:ue,onDeleteProject:ge,onExportConversation:Ie,onExportProject:Ae,expandedProjects:E,toggleProjectExpansion:ne,getChildren:Ve,filterText:k,editingItemId:P,editingItemType:L,originalName:H,localEditingName:M,setLocalEditingName:K,handleStartEditing:ie,handleSaveEdit:re,handleCancelEdit:X,isSavingEdit:U,editInputRef:se},$.id))})})]})},dEe=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=mn(sn(l=>({addConversation:l.addConversation,selectItem:l.selectItem,selectedItemId:l.selectedItemId,selectedItemType:l.selectedItemType,getConversationById:l.getConversationById}))),{addProject:a}=hi(sn(l=>({addProject:l.addProject,getProjectById:l.getProjectById}))),i=()=>{if(r==="project")return n;if(r==="conversation"&&n){const l=mn.getState().getConversationById(n);return(l==null?void 0:l.projectId)??null}return null},s=async()=>{try{const l=i(),u=await e({title:"New Chat",projectId:l});t(u,"conversation")}catch(l){console.error("Failed to create new chat:",l)}},o=async()=>{try{const l=i(),u=await a({name:"New Project",parentId:l});t(u,"project")}catch(l){console.error("Failed to create new project:",l)}};return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8","aria-label":"New Project",children:p.jsx(fA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"right",children:"New Project"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:p.jsx(Nf,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"right",children:"New Chat"})]})})]})};function fEe(){const e=Ir.getState().registerChatControl,t=mn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>gt.createElement(uEe),iconRenderer:()=>gt.createElement(dEe),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var O_="Dialog",[yV,tIe]=wi(O_),[hEe,Do]=yV(O_),bV=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=T.useRef(null),l=T.useRef(null),[u,d]=To({prop:r,defaultProp:a??!1,onChange:i,caller:O_});return p.jsx(hEe,{scope:t,triggerRef:o,contentRef:l,contentId:Ha(),titleId:Ha(),descriptionId:Ha(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:s,children:n})};bV.displayName=O_;var vV="DialogTrigger",pEe=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Do(vV,n),i=Nn(t,a.triggerRef);return p.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":VR(a.open),...r,ref:i,onClick:qt(e.onClick,a.onOpenToggle)})});pEe.displayName=vV;var zR="DialogPortal",[mEe,wV]=yV(zR,{forceMount:void 0}),xV=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Do(zR,t);return p.jsx(mEe,{scope:t,forceMount:n,children:T.Children.map(r,s=>p.jsx(Za,{present:n||i.open,children:p.jsx(Yp,{asChild:!0,container:a,children:s})}))})};xV.displayName=zR;var l1="DialogOverlay",_V=T.forwardRef((e,t)=>{const n=wV(l1,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Do(l1,e.__scopeDialog);return i.modal?p.jsx(Za,{present:r||i.open,children:p.jsx(yEe,{...a,ref:t})}):null});_V.displayName=l1;var gEe=Mu("DialogOverlay.RemoveScroll"),yEe=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Do(l1,n);return p.jsx(ob,{as:gEe,allowPinchZoom:!0,shards:[a.contentRef],children:p.jsx(an.div,{"data-state":VR(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Cf="DialogContent",SV=T.forwardRef((e,t)=>{const n=wV(Cf,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Do(Cf,e.__scopeDialog);return p.jsx(Za,{present:r||i.open,children:i.modal?p.jsx(bEe,{...a,ref:t}):p.jsx(vEe,{...a,ref:t})})});SV.displayName=Cf;var bEe=T.forwardRef((e,t)=>{const n=Do(Cf,e.__scopeDialog),r=T.useRef(null),a=Nn(t,n.contentRef,r);return T.useEffect(()=>{const i=r.current;if(i)return C_(i)},[]),p.jsx(EV,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&i.preventDefault()}),onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault())})}),vEe=T.forwardRef((e,t)=>{const n=Do(Cf,e.__scopeDialog),r=T.useRef(!1),a=T.useRef(!1);return p.jsx(EV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),EV=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=Do(Cf,n),l=T.useRef(null),u=Nn(t,l);return S_(),p.jsxs(p.Fragment,{children:[p.jsx(sb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(Wp,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":VR(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(wEe,{titleId:o.titleId}),p.jsx(_Ee,{contentRef:l,descriptionId:o.descriptionId})]})]})}),UR="DialogTitle",CV=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Do(UR,n);return p.jsx(an.h2,{id:a.titleId,...r,ref:t})});CV.displayName=UR;var TV="DialogDescription",kV=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Do(TV,n);return p.jsx(an.p,{id:a.descriptionId,...r,ref:t})});kV.displayName=TV;var AV="DialogClose",NV=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Do(AV,n);return p.jsx(an.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});NV.displayName=AV;function VR(e){return e?"open":"closed"}var RV="DialogTitleWarning",[nIe,IV]=Ene(RV,{contentName:Cf,titleName:UR,docsSlug:"dialog"}),wEe=({titleId:e})=>{const t=IV(RV),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},xEe="DialogDescriptionWarning",_Ee=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${IV(xEe).contentName}}.`;return T.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},jV=bV,DV=xV,MV=_V,OV=SV,SEe=CV,EEe=kV,PV=NV;function P_({...e}){return p.jsx(jV,{"data-slot":"dialog",...e})}function CEe({...e}){return p.jsx(DV,{"data-slot":"dialog-portal",...e})}function TEe({...e}){return p.jsx(PV,{"data-slot":"dialog-close",...e})}function kEe({className:e,...t}){return p.jsx(MV,{"data-slot":"dialog-overlay",className:xt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function F_({className:e,children:t,...n}){return p.jsxs(CEe,{"data-slot":"dialog-portal",children:[p.jsx(kEe,{}),p.jsxs(OV,{"data-slot":"dialog-content",className:xt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,p.jsxs(PV,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(Ii,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function L_({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-header",className:xt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function B_({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-footer",className:xt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function $_({className:e,...t}){return p.jsx(SEe,{"data-slot":"dialog-title",className:xt("text-lg leading-none font-semibold",e),...t})}function z_({className:e,...t}){return p.jsx(EEe,{"data-slot":"dialog-description",className:xt("text-muted-foreground text-sm",e),...t})}var FV=["PageUp","PageDown"],LV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],BV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gm="Slider",[Yk,AEe,NEe]=__(gm),[$V,rIe]=wi(gm,[NEe]),[REe,U_]=$V(gm),zV=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...b}=e,w=T.useRef(new Set),x=T.useRef(0),E=s==="horizontal"?IEe:jEe,[C=[],k]=To({prop:d,defaultProp:u,onChange:H=>{var K;(K=[...w.current][x.current])==null||K.focus(),h(H)}}),I=T.useRef(C);function j(H){const M=FEe(C,H);L(H,M)}function N(H){L(H,x.current)}function P(){const H=I.current[x.current];C[x.current]!==H&&m(C)}function L(H,M,{commit:K}={commit:!1}){const U=zEe(i),se=UEe(Math.round((H-r)/i)*i+r,U),ie=Z0(se,[r,a]);k((re=[])=>{const X=OEe(re,ie,M);if($Ee(X,l*i)){x.current=X.indexOf(ie);const ne=String(X)!==String(re);return ne&&K&&m(X),ne?X:re}else return re})}return p.jsx(REe,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:a,valueIndexToChangeRef:x,thumbs:w.current,values:C,orientation:s,form:v,children:p.jsx(Yk.Provider,{scope:e.__scopeSlider,children:p.jsx(Yk.Slot,{scope:e.__scopeSlider,children:p.jsx(E,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:qt(b.onPointerDown,()=>{o||(I.current=C)}),min:r,max:a,inverted:g,onSlideStart:o?void 0:j,onSlideMove:o?void 0:N,onSlideEnd:o?void 0:P,onHomeKeyDown:()=>!o&&L(r,0,{commit:!0}),onEndKeyDown:()=>!o&&L(a,C.length-1,{commit:!0}),onStepKeyDown:({event:H,direction:M})=>{if(!o){const se=FV.includes(H.key)||H.shiftKey&&LV.includes(H.key)?10:1,ie=x.current,re=C[ie],X=i*se*M;L(re+X,ie,{commit:!0})}}})})})})});zV.displayName=gm;var[UV,VV]=$V(gm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),IEe=T.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=e,[h,m]=T.useState(null),g=Nn(t,E=>m(E)),v=T.useRef(void 0),b=dm(a),w=b==="ltr",x=w&&!i||!w&&i;function _(E){const C=v.current||h.getBoundingClientRect(),k=[0,C.width],j=HR(k,x?[n,r]:[r,n]);return v.current=C,j(E-C.left)}return p.jsx(UV,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:p.jsx(HV,{dir:b,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=_(E.clientX);s==null||s(C)},onSlideMove:E=>{const C=_(E.clientX);o==null||o(C)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const k=BV[x?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:k?-1:1})}})})}),jEe=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...u}=e,d=T.useRef(null),h=Nn(t,d),m=T.useRef(void 0),g=!a;function v(b){const w=m.current||d.current.getBoundingClientRect(),x=[0,w.height],E=HR(x,g?[r,n]:[n,r]);return m.current=w,E(b-w.top)}return p.jsx(UV,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:p.jsx(HV,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const w=v(b.clientY);i==null||i(w)},onSlideMove:b=>{const w=v(b.clientY);s==null||s(w)},onSlideEnd:()=>{m.current=void 0,o==null||o()},onStepKeyDown:b=>{const x=BV[g?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:x?-1:1})}})})}),HV=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...u}=e,d=U_(gm,n);return p.jsx(an.span,{...u,ref:t,onKeyDown:qt(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):FV.concat(LV).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:qt(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:qt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:qt(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),qV="SliderTrack",GV=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=U_(qV,n);return p.jsx(an.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});GV.displayName=qV;var Xk="SliderRange",WV=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=U_(Xk,n),i=VV(Xk,n),s=T.useRef(null),o=Nn(t,s),l=a.values.length,u=a.values.map(m=>YV(m,a.min,a.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return p.jsx(an.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});WV.displayName=Xk;var Jk="SliderThumb",KV=T.forwardRef((e,t)=>{const n=AEe(e.__scopeSlider),[r,a]=T.useState(null),i=Nn(t,o=>a(o)),s=T.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(DEe,{...e,ref:i,index:s})}),DEe=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,s=U_(Jk,n),o=VV(Jk,n),[l,u]=T.useState(null),d=Nn(t,_=>u(_)),h=l?s.form||!!l.closest("form"):!0,m=D1(l),g=s.values[r],v=g===void 0?0:YV(g,s.min,s.max),b=PEe(r,s.values.length),w=m==null?void 0:m[o.size],x=w?LEe(w,v,o.direction):0;return T.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${x}px)`},children:[p.jsx(Yk.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(an.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":s.min,"aria-valuenow":g,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:e.style,onFocus:qt(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&p.jsx(ZV,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:g},r)]})});KV.displayName=Jk;var MEe="RadioBubbleInput",ZV=T.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=T.useRef(null),i=Nn(a,r),s=E_(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(an.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});ZV.displayName=MEe;function OEe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function YV(e,t,n){const i=100/(n-t)*(e-t);return Z0(i,[0,100])}function PEe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function FEe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function LEe(e,t,n){const r=e/2,i=HR([0,50],[0,r]);return(r-i(t)*n)*n}function BEe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function $Ee(e,t){if(t>0){const n=BEe(e);return Math.min(...n)>=t}return!0}function HR(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function zEe(e){return(String(e).split(".")[1]||"").length}function UEe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var VEe=zV,HEe=GV,qEe=WV,GEe=KV;function ul({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const s=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return p.jsxs(VEe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:xt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[p.jsx(HEe,{"data-slot":"slider-track",className:xt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(qEe,{"data-slot":"slider-range",className:xt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>p.jsx(GEe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var WEe="Separator",qP="horizontal",KEe=["horizontal","vertical"],XV=T.forwardRef((e,t)=>{const{decorative:n,orientation:r=qP,...a}=e,i=ZEe(r)?r:qP,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(an.div,{"data-orientation":i,...o,...a,ref:t})});XV.displayName=WEe;function ZEe(e){return KEe.includes(e)}var YEe=XV;function td({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return p.jsx(YEe,{"data-slot":"separator-root",decorative:n,orientation:t,className:xt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const XEe=()=>{const{enableStreamingMarkdown:e,setEnableStreamingMarkdown:t,enableStreamingCodeBlockParsing:n,setEnableStreamingCodeBlockParsing:r,foldStreamingCodeBlocks:a,setFoldStreamingCodeBlocks:i,foldUserMessagesOnCompletion:s,setFoldUserMessagesOnCompletion:o,streamingRenderFPS:l,setStreamingRenderFPS:u,resetGeneralSettings:d}=rr(sn(x=>({theme:x.theme,setTheme:x.setTheme,enableStreamingMarkdown:x.enableStreamingMarkdown,setEnableStreamingMarkdown:x.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:x.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:x.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:x.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:x.setFoldStreamingCodeBlocks,foldUserMessagesOnCompletion:x.foldUserMessagesOnCompletion,setFoldUserMessagesOnCompletion:x.setFoldUserMessagesOnCompletion,streamingRenderFPS:x.streamingRenderFPS,setStreamingRenderFPS:x.setStreamingRenderFPS,prismThemeUrl:x.prismThemeUrl,setPrismThemeUrl:x.setPrismThemeUrl,resetGeneralSettings:x.resetGeneralSettings}))),[h,m]=T.useState(l),g=T.useCallback(x=>{m(x[0])},[]),v=T.useCallback(x=>{u(x[0])},[u]),b=T.useCallback(x=>{const _=x.target.value,E=_===""?15:parseInt(_.replace(/[^0-9]/g,""),10);if(!isNaN(E)){const C=Math.max(3,Math.min(60,E));u(C),m(C)}},[u]);T.useEffect(()=>{m(l)},[l]);const w=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&d()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),p.jsx(qs,{id:"streaming-markdown-switch",checked:e??!0,onCheckedChange:t})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),p.jsx(qs,{id:"streaming-codeblock-switch",checked:n??!1,onCheckedChange:r})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),p.jsx(qs,{id:"fold-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"fold-user-message-switch",className:"font-medium",children:"Fold User Messages After Response"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse the user's prompt message once the assistant finishes responding."})]}),p.jsx(qs,{id:"fold-user-message-switch",checked:s??!1,onCheckedChange:o})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsxs("div",{children:[p.jsxs(Wt,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",h," FPS)"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(ul,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[h],onValueChange:g,onValueCommit:v,className:"flex-grow"}),p.jsx(kn,{type:"number",min:3,max:60,step:1,value:h,onChange:b,className:"w-20 h-8 text-xs"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),p.jsx(td,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(It,{variant:"outline",size:"sm",onClick:w,children:[p.jsx(yA,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},JEe=gt.memo(XEe);var oT="rovingFocusGroup.onEntryFocus",QEe={bubbles:!1,cancelable:!0},cb="RovingFocusGroup",[Qk,JV,eCe]=__(cb),[tCe,V_]=wi(cb,[eCe]),[nCe,rCe]=tCe(cb),QV=T.forwardRef((e,t)=>p.jsx(Qk.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Qk.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(aCe,{...e,ref:t})})}));QV.displayName=cb;var aCe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=T.useRef(null),g=Nn(t,m),v=dm(i),[b,w]=To({prop:s,defaultProp:o??null,onChange:l,caller:cb}),[x,_]=T.useState(!1),E=Ua(u),C=JV(n),k=T.useRef(!1),[I,j]=T.useState(0);return T.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(oT,E),()=>N.removeEventListener(oT,E)},[E]),p.jsx(nCe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:T.useCallback(N=>w(N),[w]),onItemShiftTab:T.useCallback(()=>_(!0),[]),onFocusableItemAdd:T.useCallback(()=>j(N=>N+1),[]),onFocusableItemRemove:T.useCallback(()=>j(N=>N-1),[]),children:p.jsx(an.div,{tabIndex:x||I===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:qt(e.onMouseDown,()=>{k.current=!0}),onFocus:qt(e.onFocus,N=>{const P=!k.current;if(N.target===N.currentTarget&&P&&!x){const L=new CustomEvent(oT,QEe);if(N.currentTarget.dispatchEvent(L),!L.defaultPrevented){const H=C().filter(ie=>ie.focusable),M=H.find(ie=>ie.active),K=H.find(ie=>ie.id===b),se=[M,K,...H].filter(Boolean).map(ie=>ie.ref.current);nH(se,d)}}k.current=!1}),onBlur:qt(e.onBlur,()=>_(!1))})})}),eH="RovingFocusGroupItem",tH=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s,...o}=e,l=Ha(),u=i||l,d=rCe(eH,n),h=d.currentTabStopId===u,m=JV(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=d;return T.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),p.jsx(Qk.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:p.jsx(an.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:qt(e.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:qt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:qt(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=oCe(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let E=m().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(w.currentTarget);E=d.loop?lCe(E,C+1):E.slice(C+1)}setTimeout(()=>nH(E))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:b!=null}):s})})});tH.displayName=eH;var iCe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sCe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oCe(e,t,n){const r=sCe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return iCe[r]}function nH(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function lCe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var rH=QV,aH=tH,H_="Tabs",[cCe,aIe]=wi(H_,[V_]),iH=V_(),[uCe,qR]=cCe(H_),sH=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...u}=e,d=dm(o),[h,m]=To({prop:r,onChange:a,defaultProp:i??"",caller:H_});return p.jsx(uCe,{scope:n,baseId:Ha(),value:h,onValueChange:m,orientation:s,dir:d,activationMode:l,children:p.jsx(an.div,{dir:d,"data-orientation":s,...u,ref:t})})});sH.displayName=H_;var oH="TabsList",lH=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=qR(oH,n),s=iH(n);return p.jsx(rH,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(an.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});lH.displayName=oH;var cH="TabsTrigger",uH=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,s=qR(cH,n),o=iH(n),l=hH(s.baseId,r),u=pH(s.baseId,r),d=r===s.value;return p.jsx(aH,{asChild:!0,...o,focusable:!a,active:d,children:p.jsx(an.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:qt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:qt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:qt(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!a&&h&&s.onValueChange(r)})})})});uH.displayName=cH;var dH="TabsContent",fH=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...s}=e,o=qR(dH,n),l=hH(o.baseId,r),u=pH(o.baseId,r),d=r===o.value,h=T.useRef(d);return T.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),p.jsx(Za,{present:a||d,children:({present:m})=>p.jsx(an.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});fH.displayName=dH;function hH(e,t){return`${e}-trigger-${t}`}function pH(e,t){return`${e}-content-${t}`}var dCe=sH,fCe=lH,hCe=uH,pCe=fH;function mCe({className:e,...t}){return p.jsx(dCe,{"data-slot":"tabs",className:xt("flex flex-col gap-2",e),...t})}function gCe({className:e,...t}){return p.jsx(fCe,{"data-slot":"tabs-list",className:xt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function yCe({className:e,...t}){return p.jsx(hCe,{"data-slot":"tabs-trigger",className:xt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function bCe({className:e,...t}){return p.jsx(pCe,{"data-slot":"tabs-content",className:xt("flex-1 outline-none",e),...t})}const Fc=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:s,scrollable:o})=>{var g;const[l,u]=T.useState(n??t??((g=e[0])==null?void 0:g.value));T.useEffect(()=>{n!==void 0&&n!==l&&u(n)},[n,l]);const d=v=>{u(v),r&&r(v)},h=xt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),m=({children:v})=>{const b=xt("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",s);return o?p.jsx(wl,{className:b,children:v}):p.jsx("div",{className:b,children:v})};return p.jsxs(mCe,{value:l,onValueChange:d,defaultValue:t,className:xt("flex flex-col h-full",a),children:[p.jsx(gCe,{className:xt("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>p.jsx(yCe,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),p.jsx(m,{children:e.map(v=>p.jsx(bCe,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})},vCe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t}=rr(sn(n=>({globalSystemPrompt:n.globalSystemPrompt,setGlobalSystemPrompt:n.setGlobalSystemPrompt})));return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),p.jsx(bd,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:n=>t(n.target.value),rows:6})]})})},mH=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:m=.7,defaultTopP:g=null,defaultMaxTokens:v=null,defaultTopK:b=null,defaultPresencePenalty:w=0,defaultFrequencyPenalty:x=0,className:_})=>{const{selectedModelId:E,dbProviderConfigs:C,dbApiKeys:k}=Un(sn(q=>({selectedModelId:q.selectedModelId,dbProviderConfigs:q.dbProviderConfigs,dbApiKeys:q.dbApiKeys}))),I=T.useMemo(()=>{if(!E)return;const{providerId:q,modelId:J}=Rc(E);if(!q||!J)return;const Q=C.find(ue=>ue.id===q);if(!Q)return;const te=k.find(ue=>ue.id===Q.apiKeyId);return N1(Q,J,te==null?void 0:te.value)},[E,C,k]),j=T.useMemo(()=>{var q;return new Set(((q=I==null?void 0:I.metadata)==null?void 0:q.supported_parameters)??[])},[I]),[N,P]=T.useState(e??m),[L,H]=T.useState(n??g??1),[M,K]=T.useState(l??w??0),[U,se]=T.useState(d??x??0);T.useEffect(()=>{P(e??m)},[e,m]),T.useEffect(()=>{H(n??g??1)},[n,g]),T.useEffect(()=>{K(l??w??0)},[l,w]),T.useEffect(()=>{se(d??x??0)},[d,x]);const ie=T.useCallback((q,J)=>{const Q=J.target.value,te=Q===""?null:parseInt(Q,10);(Q===""||!isNaN(te)&&te!==null)&&q(te)},[]),re=T.useCallback((q,J)=>{q(J[0])},[]),X=T.useCallback(q=>{q(null)},[]),ne=m!==void 0||g!==void 0||v!==void 0||b!==void 0||w!==void 0||x!==void 0;return p.jsxs("div",{className:xt("space-y-4 p-4",_),children:[j.has("temperature")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",N.toFixed(2),")"]}),p.jsx(ul,{id:"param-temperature",min:0,max:1,step:.01,value:[N],onValueChange:q=>P(q[0]),onValueCommit:q=>re(t,q)}),ne&&p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(t),disabled:e===null,children:["Use Default (",(m==null?void 0:m.toFixed(2))??"N/A",")"]})]}),j.has("top_p")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(L??0).toFixed(2),")"]}),p.jsx(ul,{id:"param-top-p",min:0,max:1,step:.01,value:[L??1],onValueChange:q=>H(q[0]),onValueCommit:q=>re(r,q)}),ne&&p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[j.has("max_tokens")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(kn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:q=>ie(i,q),min:"1",className:"h-8 text-xs"}),ne&&p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(i),disabled:a===null,children:"Use Default"})]}),j.has("top_k")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),p.jsx(kn,{id:"param-top-k",type:"number",placeholder:`Default: ${b??"None"}`,value:s??"",onChange:q=>ie(o,q),min:"1",className:"h-8 text-xs"}),ne&&p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(o),disabled:s===null,children:"Use Default"})]})]}),j.has("presence_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(M??0).toFixed(2),")"]}),p.jsx(ul,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[M??0],onValueChange:q=>K(q[0]),onValueCommit:q=>re(u,q)}),ne&&p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(u),disabled:l===null,children:["Use Default (",(w==null?void 0:w.toFixed(2))??"N/A",")"]})]}),j.has("frequency_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(U??0).toFixed(2),")"]}),p.jsx(ul,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[U??0],onValueChange:q=>se(q[0]),onValueCommit:q=>re(h,q)}),ne&&p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(h),disabled:d===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]})]})},wCe=()=>{const{temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h}=rr(sn(w=>({temperature:w.temperature,setTemperature:w.setTemperature,topP:w.topP,setTopP:w.setTopP,maxTokens:w.maxTokens,setMaxTokens:w.setMaxTokens,topK:w.topK,setTopK:w.setTopK,presencePenalty:w.presencePenalty,setPresencePenalty:w.setPresencePenalty,frequencyPenalty:w.frequencyPenalty,setFrequencyPenalty:w.setFrequencyPenalty}))),m=w=>{w!==null&&t(w)},g=w=>{w!==null&&r(w)},v=w=>{w!==null&&u(w)},b=w=>{w!==null&&h(w)};return p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),p.jsx(mH,{temperature:e,setTemperature:m,topP:n,setTopP:g,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:v,frequencyPenalty:d,setFrequencyPenalty:b,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]})},xCe=()=>{const{toolMaxSteps:e,setToolMaxSteps:t}=rr(sn(r=>({toolMaxSteps:r.toolMaxSteps,setToolMaxSteps:r.setToolMaxSteps}))),n=r=>{const a=r.target.value,i=a===""?5:parseInt(a,10);isNaN(i)||t(i)};return p.jsxs("div",{className:"space-y-4",children:[p.jsx(Wt,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),p.jsx(kn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:e,onChange:n,className:"w-24"})]})};var GP=1,_Ce=.9,SCe=.8,ECe=.17,lT=.1,cT=.999,CCe=.9999,TCe=.99,kCe=/[\\\/_+.#"@\[\(\{&]/,ACe=/[\\\/_+.#"@\[\(\{&]/g,NCe=/[\s-]/,gH=/[\s-]/g;function eA(e,t,n,r,a,i,s){if(i===t.length)return a===e.length?GP:TCe;var o=`${a},${i}`;if(s[o]!==void 0)return s[o];for(var l=r.charAt(i),u=n.indexOf(l,a),d=0,h,m,g,v;u>=0;)h=eA(e,t,n,r,u+1,i+1,s),h>d&&(u===a?h*=GP:kCe.test(e.charAt(u-1))?(h*=SCe,g=e.slice(a,u-1).match(ACe),g&&a>0&&(h*=Math.pow(cT,g.length))):NCe.test(e.charAt(u-1))?(h*=_Ce,v=e.slice(a,u-1).match(gH),v&&a>0&&(h*=Math.pow(cT,v.length))):(h*=ECe,a>0&&(h*=Math.pow(cT,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=CCe)),(h<lT&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(m=eA(e,t,n,r,u+1,i+2,s),m*lT>h&&(h=m*lT)),h>d&&(d=h),u=n.indexOf(l,u+1);return s[o]=d,d}function WP(e){return e.toLowerCase().replace(gH," ")}function RCe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,eA(e,t,WP(e),WP(t),0,0,{})}var Pg='[cmdk-group=""]',uT='[cmdk-group-items=""]',ICe='[cmdk-group-heading=""]',yH='[cmdk-item=""]',KP=`${yH}:not([aria-disabled="true"])`,tA="cmdk-item-select",Kh="data-value",jCe=(e,t,n)=>RCe(e,t,n),bH=T.createContext(void 0),ub=()=>T.useContext(bH),vH=T.createContext(void 0),GR=()=>T.useContext(vH),wH=T.createContext(void 0),xH=T.forwardRef((e,t)=>{let n=Zh(()=>{var Q,te;return{search:"",value:(te=(Q=e.value)!=null?Q:e.defaultValue)!=null?te:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Zh(()=>new Set),a=Zh(()=>new Map),i=Zh(()=>new Map),s=Zh(()=>new Set),o=_H(e),{label:l,children:u,value:d,onValueChange:h,filter:m,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:w=!0,...x}=e,_=Ha(),E=Ha(),C=Ha(),k=T.useRef(null),I=VCe();Tf(()=>{if(d!==void 0){let Q=d.trim();n.current.value=Q,j.emit()}},[d]),Tf(()=>{I(6,K)},[]);let j=T.useMemo(()=>({subscribe:Q=>(s.current.add(Q),()=>s.current.delete(Q)),snapshot:()=>n.current,setState:(Q,te,ue)=>{var ge,Ie,Ae,_e;if(!Object.is(n.current[Q],te)){if(n.current[Q]=te,Q==="search")M(),L(),I(1,H);else if(Q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ve=document.getElementById(C);ve?ve.focus():(ge=document.getElementById(_))==null||ge.focus()}if(I(7,()=>{var ve;n.current.selectedItemId=(ve=U())==null?void 0:ve.id,j.emit()}),ue||I(5,K),((Ie=o.current)==null?void 0:Ie.value)!==void 0){let ve=te??"";(_e=(Ae=o.current).onValueChange)==null||_e.call(Ae,ve);return}}j.emit()}},emit:()=>{s.current.forEach(Q=>Q())}}),[]),N=T.useMemo(()=>({value:(Q,te,ue)=>{var ge;te!==((ge=i.current.get(Q))==null?void 0:ge.value)&&(i.current.set(Q,{value:te,keywords:ue}),n.current.filtered.items.set(Q,P(te,ue)),I(2,()=>{L(),j.emit()}))},item:(Q,te)=>(r.current.add(Q),te&&(a.current.has(te)?a.current.get(te).add(Q):a.current.set(te,new Set([Q]))),I(3,()=>{M(),L(),n.current.value||H(),j.emit()}),()=>{i.current.delete(Q),r.current.delete(Q),n.current.filtered.items.delete(Q);let ue=U();I(4,()=>{M(),(ue==null?void 0:ue.getAttribute("id"))===Q&&H(),j.emit()})}),group:Q=>(a.current.has(Q)||a.current.set(Q,new Set),()=>{i.current.delete(Q),a.current.delete(Q)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:_,inputId:C,labelId:E,listInnerRef:k}),[]);function P(Q,te){var ue,ge;let Ie=(ge=(ue=o.current)==null?void 0:ue.filter)!=null?ge:jCe;return Q?Ie(Q,n.current.search,te):0}function L(){if(!n.current.search||o.current.shouldFilter===!1)return;let Q=n.current.filtered.items,te=[];n.current.filtered.groups.forEach(ge=>{let Ie=a.current.get(ge),Ae=0;Ie.forEach(_e=>{let ve=Q.get(_e);Ae=Math.max(ve,Ae)}),te.push([ge,Ae])});let ue=k.current;se().sort((ge,Ie)=>{var Ae,_e;let ve=ge.getAttribute("id"),Be=Ie.getAttribute("id");return((Ae=Q.get(Be))!=null?Ae:0)-((_e=Q.get(ve))!=null?_e:0)}).forEach(ge=>{let Ie=ge.closest(uT);Ie?Ie.appendChild(ge.parentElement===Ie?ge:ge.closest(`${uT} > *`)):ue.appendChild(ge.parentElement===ue?ge:ge.closest(`${uT} > *`))}),te.sort((ge,Ie)=>Ie[1]-ge[1]).forEach(ge=>{var Ie;let Ae=(Ie=k.current)==null?void 0:Ie.querySelector(`${Pg}[${Kh}="${encodeURIComponent(ge[0])}"]`);Ae==null||Ae.parentElement.appendChild(Ae)})}function H(){let Q=se().find(ue=>ue.getAttribute("aria-disabled")!=="true"),te=Q==null?void 0:Q.getAttribute(Kh);j.setState("value",te||void 0)}function M(){var Q,te,ue,ge;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Ie=0;for(let Ae of r.current){let _e=(te=(Q=i.current.get(Ae))==null?void 0:Q.value)!=null?te:"",ve=(ge=(ue=i.current.get(Ae))==null?void 0:ue.keywords)!=null?ge:[],Be=P(_e,ve);n.current.filtered.items.set(Ae,Be),Be>0&&Ie++}for(let[Ae,_e]of a.current)for(let ve of _e)if(n.current.filtered.items.get(ve)>0){n.current.filtered.groups.add(Ae);break}n.current.filtered.count=Ie}function K(){var Q,te,ue;let ge=U();ge&&(((Q=ge.parentElement)==null?void 0:Q.firstChild)===ge&&((ue=(te=ge.closest(Pg))==null?void 0:te.querySelector(ICe))==null||ue.scrollIntoView({block:"nearest"})),ge.scrollIntoView({block:"nearest"}))}function U(){var Q;return(Q=k.current)==null?void 0:Q.querySelector(`${yH}[aria-selected="true"]`)}function se(){var Q;return Array.from(((Q=k.current)==null?void 0:Q.querySelectorAll(KP))||[])}function ie(Q){let te=se()[Q];te&&j.setState("value",te.getAttribute(Kh))}function re(Q){var te;let ue=U(),ge=se(),Ie=ge.findIndex(_e=>_e===ue),Ae=ge[Ie+Q];(te=o.current)!=null&&te.loop&&(Ae=Ie+Q<0?ge[ge.length-1]:Ie+Q===ge.length?ge[0]:ge[Ie+Q]),Ae&&j.setState("value",Ae.getAttribute(Kh))}function X(Q){let te=U(),ue=te==null?void 0:te.closest(Pg),ge;for(;ue&&!ge;)ue=Q>0?zCe(ue,Pg):UCe(ue,Pg),ge=ue==null?void 0:ue.querySelector(KP);ge?j.setState("value",ge.getAttribute(Kh)):re(Q)}let ne=()=>ie(se().length-1),q=Q=>{Q.preventDefault(),Q.metaKey?ne():Q.altKey?X(1):re(1)},J=Q=>{Q.preventDefault(),Q.metaKey?ie(0):Q.altKey?X(-1):re(-1)};return T.createElement(an.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:Q=>{var te;(te=x.onKeyDown)==null||te.call(x,Q);let ue=Q.nativeEvent.isComposing||Q.keyCode===229;if(!(Q.defaultPrevented||ue))switch(Q.key){case"n":case"j":{w&&Q.ctrlKey&&q(Q);break}case"ArrowDown":{q(Q);break}case"p":case"k":{w&&Q.ctrlKey&&J(Q);break}case"ArrowUp":{J(Q);break}case"Home":{Q.preventDefault(),ie(0);break}case"End":{Q.preventDefault(),ne();break}case"Enter":{Q.preventDefault();let ge=U();if(ge){let Ie=new Event(tA);ge.dispatchEvent(Ie)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:N.inputId,id:N.labelId,style:qCe},l),q_(e,Q=>T.createElement(vH.Provider,{value:j},T.createElement(bH.Provider,{value:N},Q))))}),DCe=T.forwardRef((e,t)=>{var n,r;let a=Ha(),i=T.useRef(null),s=T.useContext(wH),o=ub(),l=_H(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;Tf(()=>{if(!u)return o.item(a,s==null?void 0:s.id)},[u]);let d=SH(a,i,[e.value,e.children,i],e.keywords),h=GR(),m=nd(I=>I.value&&I.value===d.current),g=nd(I=>u||o.filter()===!1?!0:I.search?I.filtered.items.get(a)>0:!0);T.useEffect(()=>{let I=i.current;if(!(!I||e.disabled))return I.addEventListener(tA,v),()=>I.removeEventListener(tA,v)},[g,e.onSelect,e.disabled]);function v(){var I,j;b(),(j=(I=l.current).onSelect)==null||j.call(I,d.current)}function b(){h.setState("value",d.current,!0)}if(!g)return null;let{disabled:w,value:x,onSelect:_,forceMount:E,keywords:C,...k}=e;return T.createElement(an.div,{ref:gc(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!m,"data-disabled":!!w,"data-selected":!!m,onPointerMove:w||o.getDisablePointerSelection()?void 0:b,onClick:w?void 0:v},e.children)}),MCe=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,s=Ha(),o=T.useRef(null),l=T.useRef(null),u=Ha(),d=ub(),h=nd(g=>a||d.filter()===!1?!0:g.search?g.filtered.groups.has(s):!0);Tf(()=>d.group(s),[]),SH(s,o,[e.value,e.heading,l]);let m=T.useMemo(()=>({id:s,forceMount:a}),[a]);return T.createElement(an.div,{ref:gc(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),q_(e,g=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},T.createElement(wH.Provider,{value:m},g))))}),OCe=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=T.useRef(null),i=nd(s=>!s.search);return!n&&!i?null:T.createElement(an.div,{ref:gc(a,t),...r,"cmdk-separator":"",role:"separator"})}),PCe=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=GR(),s=nd(u=>u.search),o=nd(u=>u.selectedItemId),l=ub();return T.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),T.createElement(an.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:a?e.value:s,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),FCe=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=T.useRef(null),s=T.useRef(null),o=nd(u=>u.selectedItemId),l=ub();return T.useEffect(()=>{if(s.current&&i.current){let u=s.current,d=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=u.offsetHeight;d.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(h),m.unobserve(u)}}},[]),T.createElement(an.div,{ref:gc(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},q_(e,u=>T.createElement("div",{ref:gc(s,l.listInnerRef),"cmdk-list-sizer":""},u)))}),LCe=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:s,...o}=e;return T.createElement(jV,{open:n,onOpenChange:r},T.createElement(DV,{container:s},T.createElement(MV,{"cmdk-overlay":"",className:a}),T.createElement(OV,{"aria-label":e.label,"cmdk-dialog":"",className:i},T.createElement(xH,{ref:t,...o}))))}),BCe=T.forwardRef((e,t)=>nd(n=>n.filtered.count===0)?T.createElement(an.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),$Ce=T.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return T.createElement(an.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},q_(e,s=>T.createElement("div",{"aria-hidden":!0},s)))}),ym=Object.assign(xH,{List:FCe,Item:DCe,Input:PCe,Group:MCe,Separator:OCe,Dialog:LCe,Empty:BCe,Loading:$Ce});function zCe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function UCe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function _H(e){let t=T.useRef(e);return Tf(()=>{t.current=e}),t}var Tf=typeof window>"u"?T.useEffect:T.useLayoutEffect;function Zh(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function nd(e){let t=GR(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function SH(e,t,n,r=[]){let a=T.useRef(),i=ub();return Tf(()=>{var s;let o=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),l=r.map(u=>u.trim());i.value(e,o,l),(s=t.current)==null||s.setAttribute(Kh,o),a.current=o}),a}var VCe=()=>{let[e,t]=T.useState(),n=Zh(()=>new Map);return Tf(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function HCe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function q_({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(HCe(t),{ref:t.ref},n(t.props.children)):n(t)}var qCe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function EH({className:e,...t}){return p.jsx(ym,{"data-slot":"command",className:xt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function CH({className:e,...t}){return p.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[p.jsx(Qi,{className:"size-4 shrink-0 opacity-50"}),p.jsx(ym.Input,{"data-slot":"command-input",className:xt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function TH({className:e,...t}){return p.jsx(ym.List,{"data-slot":"command-list",className:xt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function kH({...e}){return p.jsx(ym.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function AH({className:e,...t}){return p.jsx(ym.Group,{"data-slot":"command-group",className:xt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function NH({className:e,...t}){return p.jsx(ym.Item,{"data-slot":"command-item",className:xt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const G_=gt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=T.useState(!1),[s,o]=T.useState(""),[l,u]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),{dbProviderConfigs:d,globalModelSortOrder:h,isLoading:m}=Un(sn(E=>({dbProviderConfigs:E.dbProviderConfigs,globalModelSortOrder:E.globalModelSortOrder,isLoading:E.isLoading}))),g=T.useMemo(()=>{const E=new Map,C=new Set;d.forEach(j=>{if(!j.isEnabled||!j.enabledModels)return;const N=Un.getState().getAllAvailableModelDefsForProvider(j.id)??[],P=new Map(N.map(L=>[L.id,L]));j.enabledModels.forEach(L=>{const H=Au(j.id,L),M=P.get(L);M&&(C.add(H),E.set(H,{name:M.name||L,providerName:j.name,metadata:M}))})});const k=[],I=new Set;return h.forEach(j=>{if(C.has(j)){const N=E.get(j);N&&!I.has(j)&&(k.push({id:j,...N}),I.add(j))}}),C.forEach(j=>{if(!I.has(j)){const N=E.get(j);N&&k.push({id:j,...N})}}),k},[d,h]),v=T.useMemo(()=>{let E=g;if(s.trim()){const k=s.toLowerCase();E=g.filter(I=>I.name.toLowerCase().includes(k)||I.providerName.toLowerCase().includes(k)||I.id.toLowerCase().includes(k))}const C=Object.entries(l).filter(([,k])=>k).map(([k])=>k);return C.length===0?E:E.filter(k=>{var N,P,L;const I=new Set(((N=k.metadata)==null?void 0:N.supported_parameters)??[]),j=new Set(((L=(P=k.metadata)==null?void 0:P.architecture)==null?void 0:L.input_modalities)??[]);return C.every(H=>{switch(H){case"reasoning":return I.has("reasoning");case"webSearch":return I.has("web_search")||I.has("web_search_options");case"tools":return I.has("tools");case"multimodal":return Array.from(j).some(M=>M!=="text");default:return!0}})})},[g,s,l]),b=T.useMemo(()=>g.find(E=>E.id===e),[g,e]),w=T.useCallback(E=>{t(E===e?null:E),i(!1),o("")},[t,e]),x=E=>{u(C=>({...C,[E]:!C[E]}))};if(m)return p.jsx(cr,{className:xt("h-9 w-[250px]",r)});const _=Object.values(l).filter(Boolean).length;return p.jsxs(Mc,{open:a,onOpenChange:i,children:[p.jsx(Oc,{asChild:!0,children:p.jsxs(It,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||g.length===0,className:xt("w-auto justify-between h-9 text-sm font-normal",r),children:[p.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:b?`${b.name} (${b.providerName})`:"Select Model..."}),p.jsx(m1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(Pc,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:p.jsxs(EH,{shouldFilter:!1,children:[p.jsxs("div",{className:"flex items-center border-b px-3",children:[p.jsx(Qi,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(CH,{placeholder:"Search model...",value:s,onValueChange:o,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[p.jsx(Cn,{tooltipText:"Filter: Reasoning",icon:p.jsx(Af,{}),onClick:()=>x("reasoning"),variant:l.reasoning?"secondary":"ghost",className:xt("h-7 w-7",l.reasoning&&"text-primary"),"aria-label":"Filter by reasoning capability"}),p.jsx(Cn,{tooltipText:"Filter: Web Search",icon:p.jsx(Qi,{}),onClick:()=>x("webSearch"),variant:l.webSearch?"secondary":"ghost",className:xt("h-7 w-7",l.webSearch&&"text-primary"),"aria-label":"Filter by web search capability"}),p.jsx(Cn,{tooltipText:"Filter: Tools",icon:p.jsx(vA,{}),onClick:()=>x("tools"),variant:l.tools?"secondary":"ghost",className:xt("h-7 w-7",l.tools&&"text-primary"),"aria-label":"Filter by tool usage capability"}),p.jsx(Cn,{tooltipText:"Filter: Multimodal",icon:p.jsx(op,{}),onClick:()=>x("multimodal"),variant:l.multimodal?"secondary":"ghost",className:xt("h-7 w-7",l.multimodal&&"text-primary"),"aria-label":"Filter by multimodal capability"})]})]}),p.jsxs(TH,{children:[p.jsx(kH,{children:_>0?"No models match all active filters.":"No model found."}),p.jsx(AH,{children:v.map(E=>p.jsxs(NH,{value:E.id,onSelect:w,children:[p.jsx(Ga,{className:xt("mr-2 h-4 w-4",e===E.id?"opacity-100":"opacity-0")}),p.jsxs("span",{className:"truncate",children:[E.name," (",E.providerName,")"]})]},E.id))})]})]})})]})});G_.displayName="GlobalModelSelector";const GCe=()=>{const{autoTitleEnabled:e,setAutoTitleEnabled:t,autoTitleModelId:n,setAutoTitleModelId:r,autoTitlePromptMaxLength:a,setAutoTitlePromptMaxLength:i,autoTitleIncludeFiles:s,setAutoTitleIncludeFiles:o,autoTitleIncludeRules:l,setAutoTitleIncludeRules:u}=rr(sn(h=>({autoTitleEnabled:h.autoTitleEnabled,setAutoTitleEnabled:h.setAutoTitleEnabled,autoTitleModelId:h.autoTitleModelId,setAutoTitleModelId:h.setAutoTitleModelId,autoTitlePromptMaxLength:h.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:h.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:h.autoTitleIncludeFiles,setAutoTitleIncludeFiles:h.setAutoTitleIncludeFiles,autoTitleIncludeRules:h.autoTitleIncludeRules,setAutoTitleIncludeRules:h.setAutoTitleIncludeRules}))),d=h=>{const m=h.target.value,g=m===""?768:parseInt(m,10);isNaN(g)||i(g)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[p.jsx(qs,{id:"auto-title-enabled",checked:e,onCheckedChange:t,"aria-labelledby":"auto-title-enabled-label"}),p.jsx(Wt,{id:"auto-title-enabled-label",htmlFor:"auto-title-enabled",children:"Enable Auto-Title for New Chats"})]}),e&&p.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted ml-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"auto-title-model",children:"Model for Title Generation"}),p.jsx(G_,{value:n,onChange:r,className:"w-full"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a fast and capable model for generating concise titles."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"auto-title-max-length",children:"Max Prompt Length for Title Generation (Chars)"}),p.jsx(kn,{id:"auto-title-max-length",type:"number",min:"100",max:"4000",step:"10",value:a,onChange:d,className:"w-24"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Limits the initial prompt length sent for title generation (100-4000)."})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(qs,{id:"auto-title-include-files",checked:s,onCheckedChange:o,"aria-labelledby":"auto-title-include-files-label"}),p.jsx(Wt,{id:"auto-title-include-files-label",htmlFor:"auto-title-include-files",children:"Include file names/types in title prompt"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(qs,{id:"auto-title-include-rules",checked:l,onCheckedChange:u,"aria-labelledby":"auto-title-include-rules-label"}),p.jsx(Wt,{id:"auto-title-include-rules-label",htmlFor:"auto-title-include-rules",children:"Include active rules in title prompt"})]})]})]})},WCe=()=>{const{resetAssistantSettings:e}=rr(sn(r=>({resetAssistantSettings:r.resetAssistantSettings}))),t=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&e()},n=T.useMemo(()=>[{value:"prompt",label:"System Prompt",content:p.jsx(vCe,{})},{value:"parameters",label:"Parameters",content:p.jsx(wCe,{})},{value:"tools",label:"Tools",content:p.jsx(xCe,{})},{value:"titles",label:"Auto-Titles",content:p.jsx(GCe,{})}],[]);return p.jsxs("div",{className:"space-y-6 p-1 h-full flex flex-col",children:[p.jsx(Fc,{tabs:n,defaultValue:"prompt",className:"flex-grow",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"}),p.jsx(td,{className:"mt-auto"}),p.jsx("div",{className:"flex justify-end pt-4 flex-shrink-0",children:p.jsxs(It,{variant:"outline",size:"sm",onClick:t,children:[p.jsx(yA,{className:"mr-2 h-4 w-4"}),"Reset All Assistant Settings"]})})]})},KCe=gt.memo(WCe);var W_="Checkbox",[ZCe,iIe]=wi(W_),[YCe,XCe]=ZCe(W_),RH=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,g]=T.useState(null),v=Nn(t,C=>g(C)),b=T.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,_]=To({prop:a,defaultProp:i??!1,onChange:u,caller:W_}),E=T.useRef(x);return T.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const k=()=>_(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[m,_]),p.jsxs(YCe,{scope:n,state:x,disabled:o,children:[p.jsx(an.button,{type:"button",role:"checkbox","aria-checked":Du(x)?"mixed":x,"aria-required":s,"data-state":MH(x),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onKeyDown:qt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:qt(e.onClick,C=>{_(k=>Du(k)?!0:!k),w&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),w&&p.jsx(DH,{control:m,bubbles:!b.current,name:r,value:l,checked:x,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Du(i)?!1:i})]})});RH.displayName=W_;var IH="CheckboxIndicator",jH=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=XCe(IH,n);return p.jsx(Za,{present:r||Du(i.state)||i.state===!0,children:p.jsx(an.span,{"data-state":MH(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});jH.displayName=IH;var JCe="CheckboxBubbleInput",DH=T.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},s)=>{const o=T.useRef(null),l=Nn(o,s),u=E_(n),d=D1(t);T.useEffect(()=>{const m=o.current;if(!m)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(u!==n&&b){const w=new Event("click",{bubbles:r});m.indeterminate=Du(n),b.call(m,Du(n)?!1:n),m.dispatchEvent(w)}},[u,n,r]);const h=T.useRef(Du(n)?!1:n);return p.jsx(an.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});DH.displayName=JCe;function Du(e){return e==="indeterminate"}function MH(e){return Du(e)?"indeterminate":e?"checked":"unchecked"}var QCe=RH,eTe=jH;function kf({className:e,...t}){return p.jsx(QCe,{"data-slot":"checkbox",className:xt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(eTe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(Ga,{className:"size-3.5"})})})}const tTe=()=>{const{importConversation:e,exportAllConversations:t}=mn(sn(M=>({importConversation:M.importConversation,exportAllConversations:M.exportAllConversations}))),n=T.useRef(null),r=T.useRef(null),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,u]=T.useState(!1),[d,h]=T.useState(!1),[m,g]=T.useState(!1),[v,b]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),[w,x]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),_=()=>{var M;(M=n.current)==null||M.click()},E=()=>{var M;(M=r.current)==null||M.click()},C=T.useCallback(async M=>{var U;const K=(U=M.target.files)==null?void 0:U[0];if(K){i(!0);try{await e(K)}catch(se){console.error("Import failed (from component):",se)}finally{n.current&&(n.current.value=""),i(!1)}}},[e]),k=T.useCallback(async M=>{var U;const K=(U=M.target.files)==null?void 0:U[0];if(K){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}g(!0);try{await ap.importFullConfiguration(K,v)}catch(se){console.error("Full import failed (from component):",se)}finally{r.current&&(r.current.value=""),g(!1)}}},[v]),I=T.useCallback(async()=>{o(!0);try{await t()}catch(M){console.error("Export all failed (from component):",M)}finally{o(!1)}},[t]),j=T.useCallback(async()=>{h(!0);try{await ap.exportFullConfiguration(w)}catch(M){console.error("Full export failed (from component):",M)}finally{h(!1)}},[w]),N=T.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await _t.clearAllData(),qe.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(M){const K="Failed to clear all data";console.error(K,M),qe.error(`${K}: ${M instanceof Error?M.message:String(M)}`),u(!1)}}},[]),P=(M,K)=>{b(U=>({...U,[M]:K}))},L=(M,K)=>{x(U=>({...U,[M]:K}))},H=(M,K,U,se)=>{const ie=M==="import"?v:w,re=M==="import"?P:L,X=M==="import"?m:d;return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(kf,{id:`${M}-${K}`,checked:ie[K],onCheckedChange:ne=>re(K,!!ne),disabled:X}),p.jsxs(Wt,{htmlFor:`${M}-${K}`,className:"text-sm font-normal flex items-center gap-1.5",children:[p.jsx(se,{className:"h-4 w-4 text-muted-foreground"})," ",U]})]},`${M}-${K}`)};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Wt,{className:"font-semibold",children:"Import Conversation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),p.jsx("input",{type:"file",ref:n,onChange:C,accept:".json",className:"hidden",id:"import-file-input",disabled:a}),p.jsxs(It,{onClick:_,variant:"outline",size:"sm",disabled:a,children:[a?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(UY,{className:"mr-2 h-4 w-4"}),a?"Importing...":"Select File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Wt,{className:"font-semibold",children:"Export All Conversations"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),p.jsxs(It,{onClick:I,variant:"outline",size:"sm",disabled:s,children:[s?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(uf,{className:"mr-2 h-4 w-4"}),s?"Exporting...":"Export All Chats"]})]})]})]}),p.jsx(td,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Wt,{className:"font-semibold",children:"Import Full Configuration"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Import a full configuration backup (.json). Select which data types to import below."," ",p.jsx("strong",{className:"text-destructive",children:"This will overwrite existing data for selected types."})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[H("import","importSettings","Settings",ET),H("import","importApiKeys","API Keys",i0),H("import","importProviderConfigs","Providers",Ww),H("import","importProjects","Projects",E4),H("import","importConversations","Conversations",_T),H("import","importRulesAndTags","Rules & Tags",CT),H("import","importMods","Mods",ST),H("import","importSyncRepos","Sync Repos",Pu)]}),p.jsx("input",{type:"file",ref:r,onChange:k,accept:".json",className:"hidden",id:"full-import-file-input",disabled:m}),p.jsxs(It,{onClick:E,variant:"outline",size:"sm",disabled:m,className:"mt-2",children:[m?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(_Z,{className:"mr-2 h-4 w-4"}),m?"Importing...":"Select Full Backup File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Wt,{className:"font-semibold",children:"Export Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[H("export","importSettings","Settings",ET),H("export","importApiKeys","API Keys",i0),H("export","importProviderConfigs","Providers",Ww),H("export","importProjects","Projects",E4),H("export","importConversations","Conversations",_T),H("export","importRulesAndTags","Rules & Tags",CT),H("export","importMods","Mods",ST),H("export","importSyncRepos","Sync Repos",Pu)]}),p.jsxs(It,{onClick:j,variant:"outline",size:"sm",disabled:d,className:"mt-2",children:[d?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(mZ,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export Full Backup"]})]})]})]}),p.jsx(td,{}),p.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[p.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),p.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),p.jsxs(It,{onClick:N,variant:"destructive",disabled:l,children:[l?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Zi,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},nTe=gt.memo(tTe),rTe=cA("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function WR({className:e,variant:t,...n}){return p.jsx("div",{"data-slot":"alert",role:"alert",className:xt(rTe({variant:t}),e),...n})}function KR({className:e,...t}){return p.jsx("div",{"data-slot":"alert-title",className:xt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function ZR({className:e,...t}){return p.jsx("div",{"data-slot":"alert-description",className:xt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function rd({className:e,...t}){return p.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:p.jsx("table",{"data-slot":"table",className:xt("w-full caption-bottom text-sm",e),...t})})}function bm({className:e,...t}){return p.jsx("thead",{"data-slot":"table-header",className:xt("[&_tr]:border-b",e),...t})}function ad({className:e,...t}){return p.jsx("tbody",{"data-slot":"table-body",className:xt("[&_tr:last-child]:border-0",e),...t})}function Wr({className:e,...t}){return p.jsx("tr",{"data-slot":"table-row",className:xt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Nr({className:e,...t}){return p.jsx("th",{"data-slot":"table-head",className:xt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Mn({className:e,...t}){return p.jsx("td",{"data-slot":"table-cell",className:xt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const aTe=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=hy(sn(I=>({loadedMods:I.loadedMods,addDbMod:I.addDbMod,updateDbMod:I.updateDbMod,deleteDbMod:I.deleteDbMod,dbMods:I.dbMods,isLoading:I.isLoading}))),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(""),[m,g]=T.useState(!1),[v,b]=T.useState({}),[w,x]=T.useState({}),_=T.useCallback(async()=>{if(!s.trim()){qe.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){qe.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){qe.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const I={name:s.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(I),o(""),u(""),h(""),qe.info("Mod added. Reload required for changes to take effect.")}catch(I){console.error("Failed to add mod (from component):",I)}finally{g(!1)}},[s,l,d,t,a==null?void 0:a.length]),E=T.useCallback(async I=>{b(j=>({...j,[I.id]:!0}));try{await n(I.id,{enabled:!I.enabled}),qe.info(`Mod "${I.name}" ${I.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(j){console.error("Failed to update mod (from component):",j)}finally{b(j=>({...j,[I.id]:!1}))}},[n]),C=T.useCallback(async I=>{if(window.confirm(`Are you sure you want to delete the mod "${I.name}"? This cannot be undone.`)){x(j=>({...j,[I.id]:!0}));try{await r(I.id),qe.info("Mod deleted. Reload required for changes to take effect.")}catch(j){console.error("Failed to delete mod (from component):",j)}finally{x(j=>({...j,[I.id]:!1}))}}},[r]),k=T.useCallback(I=>{const j=e.find(P=>P.id===I);if(j)if(j.error){const P=j.error instanceof Error?j.error.message:String(j.error);return{status:"Error",error:j.error,tooltip:P}}else return{status:"Loaded"};const N=(a||[]).find(P=>P.id===I);return N?N.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs(WR,{variant:"destructive",className:"border-destructive/50",children:[p.jsx(bA,{className:"h-4 w-4"}),p.jsx(KR,{children:"Security Warning"}),p.jsx(ZR,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),p.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Wt,{htmlFor:"mod-name",children:"Mod Name"}),p.jsx(kn,{id:"mod-name",value:s,onChange:I=>o(I.target.value),placeholder:"My Awesome Mod",disabled:m})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Wt,{htmlFor:"mod-url",children:"Source URL (Optional)"}),p.jsx(kn,{id:"mod-url",type:"url",value:l,onChange:I=>u(I.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!d.trim()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Wt,{htmlFor:"mod-script",children:"Script Content (Optional)"}),p.jsx(bd,{id:"mod-script",value:d,onChange:I=>h(I.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!l.trim()})]}),p.jsxs(It,{onClick:_,disabled:m,children:[m&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),p.jsx("div",{className:"rounded-md border",children:p.jsx(Gn,{delayDuration:100,children:p.jsxs(rd,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{children:"Source"}),p.jsx(Nr,{children:"Status"}),p.jsx(Nr,{className:"text-center",children:"Enabled"}),p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(ad,{children:i?p.jsxs(p.Fragment,{children:[p.jsx(Wr,{children:p.jsx(Mn,{colSpan:5,children:p.jsx(cr,{className:"h-10 w-full"})})}),p.jsx(Wr,{children:p.jsx(Mn,{colSpan:5,children:p.jsx(cr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?p.jsx(Wr,{children:p.jsx(Mn,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(I=>{const{status:j,error:N,tooltip:P}=k(I.id),L=I.sourceUrl?new URL(I.sourceUrl).hostname:"Direct Script",H=v[I.id],M=w[I.id],K=H||M,U=j==="Error";return p.jsxs(Wr,{children:[p.jsx(Mn,{className:"font-medium",children:I.name}),p.jsx(Mn,{className:"text-muted-foreground",children:L}),p.jsxs(Mn,{children:[p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx("span",{className:U?"text-destructive font-semibold cursor-help":"",children:j})}),P&&p.jsx(Yn,{className:"max-w-xs break-words",children:p.jsx("p",{children:P})})]}),U&&N&&p.jsx("p",{className:"text-xs text-destructive truncate",children:N instanceof Error?N.message:String(N)})]}),p.jsxs(Mn,{className:"text-center",children:[p.jsx(qs,{checked:I.enabled??!1,onCheckedChange:()=>E(I),disabled:K,"aria-label":`Enable ${I.name}`}),H&&p.jsx(Fn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),p.jsx(Mn,{className:"text-right",children:p.jsx(It,{variant:"ghost",size:"icon",onClick:()=>C(I),disabled:K,"aria-label":`Delete ${I.name}`,className:"text-destructive hover:text-destructive/80",children:M?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{className:"h-4 w-4"})})})]},I.id)})})]})})})]})]})},iTe=gt.memo(aTe),sTe=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:s,isDeleting:o,onSelectModelForDetails:l})=>{var H,M;const[u,d]=T.useState(!0),h=S0(e.type),m=zF(e.type),g=nf(e.type),v=s==="fetching"||o,b=o||s==="fetching",w=o||s==="fetching",_=Un(K=>K.getAllAvailableModelDefsForProvider)(e.id),E=T.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),C=e.apiKeyId?t.some(K=>K.id===e.apiKeyId):!1,k=h&&!C,I=T.useCallback(async(K,U)=>{const se=new Set(e.enabledModels??[]);U?se.add(K):se.delete(K);const ie=Array.from(se);try{await i(e.id,{enabledModels:ie})}catch(re){qe.error("Failed to update model status."),console.error("Failed to save model toggle:",re)}},[e.enabledModels,e.id,i]),j=()=>d(K=>!K),N=((H=e.enabledModels)==null?void 0:H.length)??0,P=_.length,L=K=>{const U=Au(e.id,K);l(U)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{children:p.jsx("span",{className:xt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",s==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),p.jsx(Yn,{side:"top",children:s==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),p.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),p.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),k&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{children:p.jsx(Ou,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),p.jsx(Yn,{side:"top",children:p.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),p.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[p.jsx(Cn,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:p.jsx(wy,{}),className:"h-8 w-8"}),p.jsx(Cn,{tooltipText:"Delete",onClick:r,disabled:w,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{})})]})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&p.jsxs("div",{children:["API Key:"," ",e.apiKeyId?C?p.jsx("span",{className:"text-green-400",children:((M=t.find(K=>K.id===e.apiKeyId))==null?void 0:M.name)||"Linked (Unnamed Key)"}):p.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):p.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),m&&p.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),p.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?p.jsx("span",{className:"text-green-400",children:"Enabled"}):p.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),g&&p.jsx("div",{className:"pt-1",children:p.jsxs(It,{variant:"outline",size:"sm",onClick:a,disabled:v,className:"text-xs h-7 px-2",children:[s==="fetching"&&p.jsx(Fn,{className:"h-3 w-3 mr-1 animate-spin"}),s==="success"&&p.jsx(Ga,{className:"h-3 w-3 mr-1 text-green-500"}),s==="error"&&p.jsx(Ou,{className:"h-3 w-3 mr-1 text-destructive"}),s==="idle"&&p.jsx(g1,{className:"h-3 w-3 mr-1"}),s==="fetching"?"Fetching...":s==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),p.jsxs("div",{className:"space-y-1 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",N," / ",P," enabled)"]}),p.jsx(Cn,{tooltipText:u?"Show Models":"Hide Models",onClick:j,"aria-label":u?"Show model list":"Hide model list",icon:u?p.jsx(_o,{}):p.jsx(yc,{}),className:"h-6 w-6"})]}),!u&&p.jsx(AR,{providerId:e.id,allAvailableModels:_,enabledModelIds:E,onToggleModel:I,isLoading:s==="fetching",disabled:o,listHeightClass:"h-64",onModelClick:L})]})]})},oTe=gt.memo(sTe),lTe=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:s,onChange:o})=>{const l=T.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),u=T.useCallback((h,m)=>{const g=new Set(t.enabledModels??[]);m?g.add(h):g.delete(h);const v=Array.from(g);o("enabledModels",v)},[t.enabledModels,o]),d=T.useCallback((h,m)=>{o(h,m)},[o]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),p.jsx(Kz,{formData:t,onChange:d,apiKeys:n,disabled:a})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),p.jsx(AR,{providerId:e,allAvailableModels:r,enabledModelIds:l,onToggleModel:u,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),p.jsx(td,{className:"my-4"}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:s,disabled:a,type:"button",children:[a&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Rf,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},cTe=gt.memo(lTe),uTe=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:s})=>{const[o,l]=T.useState(!1),[u,d]=T.useState(!1),[h,m]=T.useState(!1),[g,v]=T.useState({}),b=Un(P=>P.getAllAvailableModelDefsForProvider),[w,x]=T.useState([]),_=T.useMemo(()=>[...w].sort((P,L)=>(P.name||P.id).localeCompare(L.name||L.id)),[w]);T.useEffect(()=>{if(o){const P=b(e.id);x(P.map(L=>({id:L.id,name:L.name}))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else x([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),C=()=>{l(!1),v({}),d(!1)},k=T.useCallback(async()=>{d(!0);try{const P=g.enabledModels&&g.enabledModels.length>0?g.enabledModels:null,L={name:g.name,type:g.type,isEnabled:g.isEnabled,apiKeyId:g.apiKeyId,baseURL:g.baseURL,autoFetchModels:g.autoFetchModels,enabledModels:P};Object.keys(L).forEach(H=>{L[H]===void 0&&delete L[H]}),await n(e.id,L),l(!1),v({}),qe.success(`Provider "${L.name||e.name}" updated.`)}catch(P){console.error("Failed to save provider update:",P),qe.error("Failed to save provider configuration.")}finally{d(!1)}},[g,n,e.id,e.name]),I=T.useCallback((P,L)=>{v(H=>({...H,[P]:L}))},[]),j=T.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){m(!0);try{await r(e.id)}catch(P){console.error("Failed to delete provider:",P),m(!1)}}},[r,e.id,e.name]),N=T.useCallback(async()=>{if(await a(e.id),o){const P=b(e.id);x(P.map(L=>({id:L.id,name:L.name})))}},[a,e.id,o,b]);return p.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?p.jsx(cTe,{providerId:e.id,editData:g,apiKeys:t,allAvailableModels:_,isSaving:u,onCancel:C,onSave:k,onChange:I}):p.jsx(oTe,{provider:e,apiKeys:t,onEdit:E,onDelete:j,onFetchModels:N,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:s})})},dTe=gt.memo(uTe);function fTe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const K_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vm(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function YR(e){return"nodeType"in e}function as(e){var t,n;return e?vm(e)?e:YR(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function XR(e){const{Document:t}=as(e);return e instanceof t}function db(e){return vm(e)?!1:e instanceof as(e).HTMLElement}function OH(e){return e instanceof as(e).SVGElement}function wm(e){return e?vm(e)?e.document:YR(e)?XR(e)?e:db(e)||OH(e)?e.ownerDocument:document:document:document}const _l=K_?T.useLayoutEffect:T.useEffect;function JR(e){const t=T.useRef(e);return _l(()=>{t.current=e}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function hTe(){const e=T.useRef(null),t=T.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=T.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function py(e,t){t===void 0&&(t=[e]);const n=T.useRef(e);return _l(()=>{n.current!==e&&(n.current=e)},t),n}function fb(e,t){const n=T.useRef();return T.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function c1(e){const t=JR(e),n=T.useRef(null),r=T.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function nA(e){const t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}let dT={};function hb(e,t){return T.useMemo(()=>{if(t)return t;const n=dT[e]==null?0:dT[e]+1;return dT[e]=n,e+"-"+n},[e,t])}function PH(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>{const o=Object.entries(s);for(const[l,u]of o){const d=i[l];d!=null&&(i[l]=d+e*u)}return i},{...t})}}const mp=PH(1),my=PH(-1);function pTe(e){return"clientX"in e&&"clientY"in e}function QR(e){if(!e)return!1;const{KeyboardEvent:t}=as(e.target);return t&&e instanceof t}function mTe(e){if(!e)return!1;const{TouchEvent:t}=as(e.target);return t&&e instanceof t}function rA(e){if(mTe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return pTe(e)?{x:e.clientX,y:e.clientY}:null}const gy=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[gy.Translate.toString(e),gy.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),ZP="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function gTe(e){return e.matches(ZP)?e:e.querySelector(ZP)}const yTe={display:"none"};function bTe(e){let{id:t,value:n}=e;return gt.createElement("div",{id:t,style:yTe},n)}function vTe(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function wTe(){const[e,t]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const FH=T.createContext(null);function xTe(e){const t=T.useContext(FH);T.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function _Te(){const[e]=T.useState(()=>new Set),t=T.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[T.useCallback(r=>{let{type:a,event:i}=r;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const STe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ETe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function CTe(e){let{announcements:t=ETe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=STe}=e;const{announce:i,announcement:s}=wTe(),o=hb("DndLiveRegion"),[l,u]=T.useState(!1);if(T.useEffect(()=>{u(!0)},[]),xTe(T.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:g}=h;t.onDragMove&&i(t.onDragMove({active:m,over:g}))},onDragOver(h){let{active:m,over:g}=h;i(t.onDragOver({active:m,over:g}))},onDragEnd(h){let{active:m,over:g}=h;i(t.onDragEnd({active:m,over:g}))},onDragCancel(h){let{active:m,over:g}=h;i(t.onDragCancel({active:m,over:g}))}}),[i,t])),!l)return null;const d=gt.createElement(gt.Fragment,null,gt.createElement(bTe,{id:r,value:a.draggable}),gt.createElement(vTe,{id:o,announcement:s}));return n?sl.createPortal(d,n):d}var Aa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Aa||(Aa={}));function u1(){}function YP(e,t){return T.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function TTe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const No=Object.freeze({x:0,y:0});function LH(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function BH(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function kTe(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function XP(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function $H(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function JP(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const ATe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=JP(t,t.left,t.top),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=LH(JP(l),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(BH)},NTe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=XP(t),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=XP(l),d=a.reduce((m,g,v)=>m+LH(u[v],g),0),h=Number((d/4).toFixed(4));i.push({id:o,data:{droppableContainer:s,value:h}})}}return i.sort(BH)};function RTe(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const l=t.width*t.height,u=e.width*e.height,d=s*o,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const ITe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:s}=i,o=n.get(s);if(o){const l=RTe(o,t);l>0&&a.push({id:s,data:{droppableContainer:i,value:l}})}}return a.sort(kTe)};function jTe(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function zH(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:No}function DTe(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...n})}}const MTe=DTe(1);function OTe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function PTe(e,t,n){const r=OTe(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,l=e.left-s-(1-a)*parseFloat(n),u=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const FTe={ignoreTransform:!1};function xm(e,t){t===void 0&&(t=FTe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=as(e).getComputedStyle(e);u&&(n=PTe(n,u,d))}const{top:r,left:a,width:i,height:s,bottom:o,right:l}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:l}}function QP(e){return xm(e,{ignoreTransform:!0})}function LTe(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function BTe(e,t){return t===void 0&&(t=as(e).getComputedStyle(e)),t.position==="fixed"}function $Te(e,t){t===void 0&&(t=as(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function Z_(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(XR(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!db(a)||OH(a)||n.includes(a))return n;const i=as(e).getComputedStyle(a);return a!==e&&$Te(a,i)&&n.push(a),BTe(a,i)?n:r(a.parentNode)}return e?r(e):n}function UH(e){const[t]=Z_(e,1);return t??null}function fT(e){return!K_||!e?null:vm(e)?e:YR(e)?XR(e)||e===wm(e).scrollingElement?window:db(e)?e:null:null}function VH(e){return vm(e)?e.scrollX:e.scrollLeft}function HH(e){return vm(e)?e.scrollY:e.scrollTop}function aA(e){return{x:VH(e),y:HH(e)}}var za;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(za||(za={}));function qH(e){return!K_||!e?!1:e===document.scrollingElement}function GH(e){const t={x:0,y:0},n=qH(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:r,minScroll:t}}const zTe={x:.2,y:.2};function UTe(e,t,n,r,a){let{top:i,left:s,right:o,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=zTe);const{isTop:u,isBottom:d,isLeft:h,isRight:m}=GH(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+b.height?(g.y=za.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(g.y=za.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!m&&o>=t.right-b.width?(g.x=za.Forward,v.x=r*Math.abs((t.right-b.width-o)/b.width)):!h&&s<=t.left+b.width&&(g.x=za.Backward,v.x=r*Math.abs((t.left+b.width-s)/b.width)),{direction:g,speed:v}}function VTe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function WH(e){return e.reduce((t,n)=>mp(t,aA(n)),No)}function HTe(e){return e.reduce((t,n)=>t+VH(n),0)}function qTe(e){return e.reduce((t,n)=>t+HH(n),0)}function GTe(e,t){if(t===void 0&&(t=xm),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);UH(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const WTe=[["x",["left","right"],HTe],["y",["top","bottom"],qTe]];class e3{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Z_(n),a=WH(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of WTe)for(const l of s)Object.defineProperty(this,l,{get:()=>{const u=o(r),d=a[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class n0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function KTe(e){const{EventTarget:t}=as(e);return e instanceof t?e:wm(e)}function hT(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var $s;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})($s||($s={}));function e8(e){e.preventDefault()}function ZTe(e){e.stopPropagation()}var nr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(nr||(nr={}));const KH={start:[nr.Space,nr.Enter],cancel:[nr.Esc],end:[nr.Space,nr.Enter,nr.Tab]},YTe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case nr.Right:return{...n,x:n.x+25};case nr.Left:return{...n,x:n.x-25};case nr.Down:return{...n,y:n.y+25};case nr.Up:return{...n,y:n.y-25}}};class t3{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new n0(wm(n)),this.windowListeners=new n0(as(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add($s.Resize,this.handleCancel),this.windowListeners.add($s.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add($s.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&GTe(r),n(No)}handleKeyDown(t){if(QR(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=KH,coordinateGetter:s=YTe,scrollBehavior:o="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:No;this.referenceCoordinates||(this.referenceCoordinates=d);const h=s(t,{active:n,context:r.current,currentCoordinates:d});if(h){const m=my(h,d),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const w=t.code,{isTop:x,isRight:_,isLeft:E,isBottom:C,maxScroll:k,minScroll:I}=GH(b),j=VTe(b),N={x:Math.min(w===nr.Right?j.right-j.width/2:j.right,Math.max(w===nr.Right?j.left:j.left+j.width/2,h.x)),y:Math.min(w===nr.Down?j.bottom-j.height/2:j.bottom,Math.max(w===nr.Down?j.top:j.top+j.height/2,h.y))},P=w===nr.Right&&!_||w===nr.Left&&!E,L=w===nr.Down&&!C||w===nr.Up&&!x;if(P&&N.x!==h.x){const H=b.scrollLeft+m.x,M=w===nr.Right&&H<=k.x||w===nr.Left&&H>=I.x;if(M&&!m.y){b.scrollTo({left:H,behavior:o});return}M?g.x=b.scrollLeft-H:g.x=w===nr.Right?b.scrollLeft-k.x:b.scrollLeft-I.x,g.x&&b.scrollBy({left:-g.x,behavior:o});break}else if(L&&N.y!==h.y){const H=b.scrollTop+m.y,M=w===nr.Down&&H<=k.y||w===nr.Up&&H>=I.y;if(M&&!m.x){b.scrollTo({top:H,behavior:o});return}M?g.y=b.scrollTop-H:g.y=w===nr.Down?b.scrollTop-k.y:b.scrollTop-I.y,g.y&&b.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(t,mp(my(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}t3.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=KH,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function t8(e){return!!(e&&"distance"in e)}function n8(e){return!!(e&&"delay"in e)}class n3{constructor(t,n,r){var a;r===void 0&&(r=KTe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=wm(s),this.documentListeners=new n0(this.document),this.listeners=new n0(r),this.windowListeners=new n0(as(s)),this.initialCoordinates=(a=rA(i))!=null?a:No,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add($s.Resize,this.handleCancel),this.windowListeners.add($s.DragStart,e8),this.windowListeners.add($s.VisibilityChange,this.handleCancel),this.windowListeners.add($s.ContextMenu,e8),this.documentListeners.add($s.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(n8(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(t8(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add($s.Click,ZTe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add($s.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const l=(n=rA(t))!=null?n:No,u=my(a,l);if(!r&&o){if(t8(o)){if(o.tolerance!=null&&hT(u,o.tolerance))return this.handleCancel();if(hT(u,o.distance))return this.handleStart()}if(n8(o)&&hT(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===nr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const XTe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class r3 extends n3{constructor(t){const{event:n}=t,r=wm(n.target);super(t,XTe,r)}}r3.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const JTe={move:{name:"mousemove"},end:{name:"mouseup"}};var iA;(function(e){e[e.RightClick=2]="RightClick"})(iA||(iA={}));class QTe extends n3{constructor(t){super(t,JTe,wm(t.event.target))}}QTe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===iA.RightClick?!1:(r==null||r({event:n}),!0)}}];const pT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eke extends n3{constructor(t){super(t,pT)}static setup(){return window.addEventListener(pT.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(pT.move.name,t)};function t(){}}}eke.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var r0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(r0||(r0={}));var d1;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(d1||(d1={}));function tke(e){let{acceleration:t,activator:n=r0.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:o=d1.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:m}=e;const g=rke({delta:h,disabled:!i}),[v,b]=hTe(),w=T.useRef({x:0,y:0}),x=T.useRef({x:0,y:0}),_=T.useMemo(()=>{switch(n){case r0.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case r0.DraggableRect:return a}},[n,a,l]),E=T.useRef(null),C=T.useCallback(()=>{const I=E.current;if(!I)return;const j=w.current.x*x.current.x,N=w.current.y*x.current.y;I.scrollBy(j,N)},[]),k=T.useMemo(()=>o===d1.TreeOrder?[...u].reverse():u,[o,u]);T.useEffect(()=>{if(!i||!u.length||!_){b();return}for(const I of k){if((r==null?void 0:r(I))===!1)continue;const j=u.indexOf(I),N=d[j];if(!N)continue;const{direction:P,speed:L}=UTe(I,N,_,t,m);for(const H of["x","y"])g[H][P[H]]||(L[H]=0,P[H]=0);if(L.x>0||L.y>0){b(),E.current=I,v(C,s),w.current=L,x.current=P;return}}w.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,i,s,JSON.stringify(_),JSON.stringify(g),v,u,k,d,JSON.stringify(m)])}const nke={x:{[za.Backward]:!1,[za.Forward]:!1},y:{[za.Backward]:!1,[za.Forward]:!1}};function rke(e){let{delta:t,disabled:n}=e;const r=nA(t);return fb(a=>{if(n||!r||!a)return nke;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[za.Backward]:a.x[za.Backward]||i.x===-1,[za.Forward]:a.x[za.Forward]||i.x===1},y:{[za.Backward]:a.y[za.Backward]||i.y===-1,[za.Forward]:a.y[za.Forward]||i.y===1}}},[n,t,r])}function ake(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return fb(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function ike(e,t){return T.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var yy;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(yy||(yy={}));var sA;(function(e){e.Optimized="optimized"})(sA||(sA={}));const r8=new Map;function ske(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=T.useState(null),{frequency:o,measure:l,strategy:u}=a,d=T.useRef(e),h=w(),m=py(h),g=T.useCallback(function(x){x===void 0&&(x=[]),!m.current&&s(_=>_===null?x:_.concat(x.filter(E=>!_.includes(E))))},[m]),v=T.useRef(null),b=fb(x=>{if(h&&!n)return r8;if(!x||x===r8||d.current!==e||i!=null){const _=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){_.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new e3(l(C),C):null;E.rect.current=k,k&&_.set(E.id,k)}return _}return x},[e,i,n,h,l]);return T.useEffect(()=>{d.current=e},[e]),T.useEffect(()=>{h||g()},[n,h]),T.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),T.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},o))},[o,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function w(){switch(u){case yy.Always:return!1;case yy.BeforeDragging:return n;default:return!n}}}function ZH(e,t){return fb(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function oke(e,t){return ZH(e,t)}function lke(e){let{callback:t,disabled:n}=e;const r=JR(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Y_(e){let{callback:t,disabled:n}=e;const r=JR(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function cke(e){return new e3(xm(e),e)}function a8(e,t,n){t===void 0&&(t=cke);const[r,a]=T.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const s=lke({callback(l){if(e)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=Y_({callback:i});return _l(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),r}function uke(e){const t=ZH(e);return zH(e,t)}const i8=[];function dke(e){const t=T.useRef(e),n=fb(r=>e?r&&r!==i8&&e&&t.current&&e.parentNode===t.current.parentNode?r:Z_(e):i8,[e]);return T.useEffect(()=>{t.current=e},[e]),n}function fke(e){const[t,n]=T.useState(null),r=T.useRef(e),a=T.useCallback(i=>{const s=fT(i.target);s&&n(o=>o?(o.set(s,aA(s)),new Map(o)):null)},[]);return T.useEffect(()=>{const i=r.current;if(e!==i){s(i);const o=e.map(l=>{const u=fT(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,aA(u)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(l=>{const u=fT(l);u==null||u.removeEventListener("scroll",a)})}},[a,e]),T.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>mp(i,s),No):WH(e):No,[e,t])}function s8(e,t){t===void 0&&(t=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},t),T.useEffect(()=>{const r=e!==No;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?my(e,n.current):No}function hke(e){T.useEffect(()=>{if(!K_)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function pke(e,t){return T.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=s=>{i(s,t)},n},{}),[e,t])}function YH(e){return T.useMemo(()=>e?LTe(e):null,[e])}const o8=[];function mke(e,t){t===void 0&&(t=xm);const[n]=e,r=YH(n?as(n):null),[a,i]=T.useState(o8);function s(){i(()=>e.length?e.map(l=>qH(l)?r:new e3(t(l),l)):o8)}const o=Y_({callback:s});return _l(()=>{o==null||o.disconnect(),s(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),a}function gke(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return db(t)?t:e}function yke(e){let{measure:t}=e;const[n,r]=T.useState(null),a=T.useCallback(u=>{for(const{target:d}of u)if(db(d)){r(h=>{const m=t(d);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=Y_({callback:a}),s=T.useCallback(u=>{const d=gke(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[o,l]=c1(s);return T.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const bke=[{sensor:r3,options:{}},{sensor:t3,options:{}}],vke={current:{}},Gw={draggable:{measure:QP},droppable:{measure:QP,strategy:yy.WhileDragging,frequency:sA.Optimized},dragOverlay:{measure:xm}};class a0 extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const wke={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new a0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:u1},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Gw,measureDroppableContainers:u1,windowRect:null,measuringScheduled:!1},xke={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:u1,draggableNodes:new Map,over:null,measureDroppableContainers:u1},X_=T.createContext(xke),XH=T.createContext(wke);function _ke(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new a0}}}function Ske(e,t){switch(t.type){case Aa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Aa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Aa.DragEnd:case Aa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Aa.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new a0(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case Aa.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new a0(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case Aa.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new a0(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Eke(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=T.useContext(X_),i=nA(r),s=nA(n==null?void 0:n.id);return T.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!QR(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=gTe(d);if(h){h.focus();break}}})}},[r,t,a,s,i]),null}function Cke(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function Tke(e){return T.useMemo(()=>({draggable:{...Gw.draggable,...e==null?void 0:e.draggable},droppable:{...Gw.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Gw.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function kke(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=T.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;_l(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=zH(d,r);if(s||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=UH(u);m&&m.scrollBy({top:h.y,left:h.x})}},[t,s,o,r,n])}const JH=T.createContext({...No,scaleX:1,scaleY:1});var Tu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Tu||(Tu={}));const Ake=T.memo(function(t){var n,r,a,i;let{id:s,accessibility:o,autoScroll:l=!0,children:u,sensors:d=bke,collisionDetection:h=ITe,measuring:m,modifiers:g,...v}=t;const b=T.useReducer(Ske,void 0,_ke),[w,x]=b,[_,E]=_Te(),[C,k]=T.useState(Tu.Uninitialized),I=C===Tu.Initialized,{draggable:{active:j,nodes:N,translate:P},droppable:{containers:L}}=w,H=j!=null?N.get(j):null,M=T.useRef({initial:null,translated:null}),K=T.useMemo(()=>{var tt;return j!=null?{id:j,data:(tt=H==null?void 0:H.data)!=null?tt:vke,rect:M}:null},[j,H]),U=T.useRef(null),[se,ie]=T.useState(null),[re,X]=T.useState(null),ne=py(v,Object.values(v)),q=hb("DndDescribedBy",s),J=T.useMemo(()=>L.getEnabled(),[L]),Q=Tke(m),{droppableRects:te,measureDroppableContainers:ue,measuringScheduled:ge}=ske(J,{dragging:I,dependencies:[P.x,P.y],config:Q.droppable}),Ie=ake(N,j),Ae=T.useMemo(()=>re?rA(re):null,[re]),_e=Le(),ve=oke(Ie,Q.draggable.measure);kke({activeNode:j!=null?N.get(j):null,config:_e.layoutShiftCompensation,initialRect:ve,measure:Q.draggable.measure});const Be=a8(Ie,Q.draggable.measure,ve),nt=a8(Ie?Ie.parentElement:null),Ve=T.useRef({activatorEvent:null,active:null,activeNode:Ie,collisionRect:null,collisions:null,droppableRects:te,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),De=L.getNodeFor((n=Ve.current.over)==null?void 0:n.id),$=yke({measure:Q.dragOverlay.measure}),Ee=(r=$.nodeRef.current)!=null?r:Ie,Te=I?(a=$.rect)!=null?a:Be:null,fe=!!($.nodeRef.current&&$.rect),oe=uke(fe?null:Be),ee=YH(Ee?as(Ee):null),Se=dke(I?De??Ie:null),Pe=mke(Se),ke=Cke(g,{transform:{x:P.x-oe.x,y:P.y-oe.y,scaleX:1,scaleY:1},activatorEvent:re,active:K,activeNodeRect:Be,containerNodeRect:nt,draggingNodeRect:Te,over:Ve.current.over,overlayNodeRect:$.rect,scrollableAncestors:Se,scrollableAncestorRects:Pe,windowRect:ee}),We=Ae?mp(Ae,P):null,Nt=fke(Se),it=s8(Nt),Et=s8(Nt,[Be]),Ft=mp(ke,it),Mt=Te?MTe(Te,ke):null,Yt=K&&Mt?h({active:K,collisionRect:Mt,droppableRects:te,droppableContainers:J,pointerCoordinates:We}):null,be=$H(Yt,"id"),[D,W]=T.useState(null),he=fe?ke:mp(ke,Et),je=jTe(he,(i=D==null?void 0:D.rect)!=null?i:null,Be),we=T.useRef(null),Ne=T.useCallback((tt,ye)=>{let{sensor:Me,options:Ke}=ye;if(U.current==null)return;const Dt=N.get(U.current);if(!Dt)return;const me=tt.nativeEvent,G=new Me({active:U.current,activeNode:Dt,event:me,options:Ke,context:Ve,onAbort(Z){if(!N.get(Z))return;const{onDragAbort:Re}=ne.current,Ue={id:Z};Re==null||Re(Ue),_({type:"onDragAbort",event:Ue})},onPending(Z,pe,Re,Ue){if(!N.get(Z))return;const{onDragPending:Zt}=ne.current,ut={id:Z,constraint:pe,initialCoordinates:Re,offset:Ue};Zt==null||Zt(ut),_({type:"onDragPending",event:ut})},onStart(Z){const pe=U.current;if(pe==null)return;const Re=N.get(pe);if(!Re)return;const{onDragStart:Ue}=ne.current,pt={activatorEvent:me,active:{id:pe,data:Re.data,rect:M}};sl.unstable_batchedUpdates(()=>{Ue==null||Ue(pt),k(Tu.Initializing),x({type:Aa.DragStart,initialCoordinates:Z,active:pe}),_({type:"onDragStart",event:pt}),ie(we.current),X(me)})},onMove(Z){x({type:Aa.DragMove,coordinates:Z})},onEnd:V(Aa.DragEnd),onCancel:V(Aa.DragCancel)});we.current=G;function V(Z){return async function(){const{active:Re,collisions:Ue,over:pt,scrollAdjustedTranslate:Zt}=Ve.current;let ut=null;if(Re&&Zt){const{cancelDrop:Rt}=ne.current;ut={activatorEvent:me,active:Re,collisions:Ue,delta:Zt,over:pt},Z===Aa.DragEnd&&typeof Rt=="function"&&await Promise.resolve(Rt(ut))&&(Z=Aa.DragCancel)}U.current=null,sl.unstable_batchedUpdates(()=>{x({type:Z}),k(Tu.Uninitialized),W(null),ie(null),X(null),we.current=null;const Rt=Z===Aa.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Lt=ne.current[Rt];Lt==null||Lt(ut),_({type:Rt,event:ut})}})}}},[N]),ce=T.useCallback((tt,ye)=>(Me,Ke)=>{const Dt=Me.nativeEvent,me=N.get(Ke);if(U.current!==null||!me||Dt.dndKit||Dt.defaultPrevented)return;const G={active:me};tt(Me,ye.options,G)===!0&&(Dt.dndKit={capturedBy:ye.sensor},U.current=Ke,Ne(Me,ye))},[N,Ne]),ft=ike(d,ce);hke(d),_l(()=>{Be&&C===Tu.Initializing&&k(Tu.Initialized)},[Be,C]),T.useEffect(()=>{const{onDragMove:tt}=ne.current,{active:ye,activatorEvent:Me,collisions:Ke,over:Dt}=Ve.current;if(!ye||!Me)return;const me={active:ye,activatorEvent:Me,collisions:Ke,delta:{x:Ft.x,y:Ft.y},over:Dt};sl.unstable_batchedUpdates(()=>{tt==null||tt(me),_({type:"onDragMove",event:me})})},[Ft.x,Ft.y]),T.useEffect(()=>{const{active:tt,activatorEvent:ye,collisions:Me,droppableContainers:Ke,scrollAdjustedTranslate:Dt}=Ve.current;if(!tt||U.current==null||!ye||!Dt)return;const{onDragOver:me}=ne.current,G=Ke.get(be),V=G&&G.rect.current?{id:G.id,rect:G.rect.current,data:G.data,disabled:G.disabled}:null,Z={active:tt,activatorEvent:ye,collisions:Me,delta:{x:Dt.x,y:Dt.y},over:V};sl.unstable_batchedUpdates(()=>{W(V),me==null||me(Z),_({type:"onDragOver",event:Z})})},[be]),_l(()=>{Ve.current={activatorEvent:re,active:K,activeNode:Ie,collisionRect:Mt,collisions:Yt,droppableRects:te,draggableNodes:N,draggingNode:Ee,draggingNodeRect:Te,droppableContainers:L,over:D,scrollableAncestors:Se,scrollAdjustedTranslate:Ft},M.current={initial:Te,translated:Mt}},[K,Ie,Yt,Mt,N,Ee,Te,te,L,D,Se,Ft]),tke({..._e,delta:P,draggingRect:Mt,pointerCoordinates:We,scrollableAncestors:Se,scrollableAncestorRects:Pe});const vt=T.useMemo(()=>({active:K,activeNode:Ie,activeNodeRect:Be,activatorEvent:re,collisions:Yt,containerNodeRect:nt,dragOverlay:$,draggableNodes:N,droppableContainers:L,droppableRects:te,over:D,measureDroppableContainers:ue,scrollableAncestors:Se,scrollableAncestorRects:Pe,measuringConfiguration:Q,measuringScheduled:ge,windowRect:ee}),[K,Ie,Be,re,Yt,nt,$,N,L,te,D,ue,Se,Pe,Q,ge,ee]),F=T.useMemo(()=>({activatorEvent:re,activators:ft,active:K,activeNodeRect:Be,ariaDescribedById:{draggable:q},dispatch:x,draggableNodes:N,over:D,measureDroppableContainers:ue}),[re,ft,K,Be,x,q,N,D,ue]);return gt.createElement(FH.Provider,{value:E},gt.createElement(X_.Provider,{value:F},gt.createElement(XH.Provider,{value:vt},gt.createElement(JH.Provider,{value:je},u)),gt.createElement(Eke,{disabled:(o==null?void 0:o.restoreFocus)===!1})),gt.createElement(CTe,{...o,hiddenTextDescribedById:q}));function Le(){const tt=(se==null?void 0:se.autoScrollEnabled)===!1,ye=typeof l=="object"?l.enabled===!1:l===!1,Me=I&&!tt&&!ye;return typeof l=="object"?{...l,enabled:Me}:{enabled:Me}}}),Nke=T.createContext(null),l8="button",Rke="Draggable";function Ike(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=hb(Rke),{activators:s,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:m}=T.useContext(X_),{role:g=l8,roleDescription:v="draggable",tabIndex:b=0}=a??{},w=(l==null?void 0:l.id)===t,x=T.useContext(w?JH:Nke),[_,E]=c1(),[C,k]=c1(),I=pke(s,t),j=py(n);_l(()=>(h.set(t,{id:t,key:i,node:_,activatorNode:C,data:j}),()=>{const P=h.get(t);P&&P.key===i&&h.delete(t)}),[h,t]);const N=T.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":w&&g===l8?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,g,b,w,v,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:N,isDragging:w,listeners:r?void 0:I,node:_,over:m,setNodeRef:E,setActivatorNodeRef:k,transform:x}}function jke(){return T.useContext(XH)}const Dke="Droppable",Mke={timeout:25};function Oke(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=hb(Dke),{active:s,dispatch:o,over:l,measureDroppableContainers:u}=T.useContext(X_),d=T.useRef({disabled:n}),h=T.useRef(!1),m=T.useRef(null),g=T.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:w}={...Mke,...a},x=py(b??r),_=T.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),g.current=null},w)},[w]),E=Y_({callback:_,disabled:v||!s}),C=T.useCallback((N,P)=>{E&&(P&&(E.unobserve(P),h.current=!1),N&&E.observe(N))},[E]),[k,I]=c1(C),j=py(t);return T.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),T.useEffect(()=>(o({type:Aa.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:m,data:j}}),()=>o({type:Aa.UnregisterDroppable,key:i,id:r})),[r]),T.useEffect(()=>{n!==d.current.disabled&&(o({type:Aa.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:s,rect:m,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:I}}function a3(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Pke(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function kw(e){return e!==null&&e>=0}function Fke(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Lke(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const QH=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=a3(t,r,n),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},Aw={scaleX:1,scaleY:1},Bke=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=(t=i[n])!=null?t:r;if(!o)return null;if(a===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(o.top+o.height):u.top-o.top,...Aw}:null}const l=$ke(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-l,...Aw}:a<n&&a>=s?{x:0,y:o.height+l,...Aw}:{x:0,y:0,...Aw}};function $ke(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const eq="Sortable",tq=gt.createContext({activeIndex:-1,containerId:eq,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:QH,disabled:{draggable:!1,droppable:!1}});function zke(e){let{children:t,id:n,items:r,strategy:a=QH,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:d}=jke(),h=hb(eq,n),m=o.rect!==null,g=T.useMemo(()=>r.map(I=>typeof I=="object"&&"id"in I?I.id:I),[r]),v=s!=null,b=s?g.indexOf(s.id):-1,w=u?g.indexOf(u.id):-1,x=T.useRef(g),_=!Fke(g,x.current),E=w!==-1&&b===-1||_,C=Lke(i);_l(()=>{_&&v&&d(g)},[_,g,v,d]),T.useEffect(()=>{x.current=g},[g]);const k=T.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:w,useDragOverlay:m,sortedRects:Pke(g,l),strategy:a}),[b,h,C.draggable,C.droppable,E,g,w,l,m,a]);return gt.createElement(tq.Provider,{value:k},t)}const Uke=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return a3(n,r,a).indexOf(t)},Vke=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:l,transition:u}=e;return!u||!r||o!==i&&a===s?!1:n?!0:s!==a&&t===l},Hke={duration:200,easing:"ease"},nq="transform",qke=gy.Transition.toString({property:nq,duration:0,easing:"linear"}),Gke={roleDescription:"sortable"};function Wke(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=T.useState(null),o=T.useRef(n);return _l(()=>{if(!t&&n!==o.current&&r.current){const l=a.current;if(l){const u=xm(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&s(d)}}n!==o.current&&(o.current=n)},[t,n,r,a]),T.useEffect(()=>{i&&s(null)},[i]),i}function Kke(e){let{animateLayoutChanges:t=Vke,attributes:n,disabled:r,data:a,getNewIndex:i=Uke,id:s,strategy:o,resizeObserverConfig:l,transition:u=Hke}=e;const{items:d,containerId:h,activeIndex:m,disabled:g,disableTransforms:v,sortedRects:b,overIndex:w,useDragOverlay:x,strategy:_}=T.useContext(tq),E=Zke(r,g),C=d.indexOf(s),k=T.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...a}),[h,a,C,d]),I=T.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:j,node:N,isOver:P,setNodeRef:L}=Oke({id:s,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...l}}),{active:H,activatorEvent:M,activeNodeRect:K,attributes:U,setNodeRef:se,listeners:ie,isDragging:re,over:X,setActivatorNodeRef:ne,transform:q}=Ike({id:s,data:k,attributes:{...Gke,...n},disabled:E.draggable}),J=fTe(L,se),Q=!!H,te=Q&&!v&&kw(m)&&kw(w),ue=!x&&re,ge=ue&&te?q:null,Ae=te?ge??(o??_)({rects:b,activeNodeRect:K,activeIndex:m,overIndex:w,index:C}):null,_e=kw(m)&&kw(w)?i({id:s,items:d,activeIndex:m,overIndex:w}):C,ve=H==null?void 0:H.id,Be=T.useRef({activeId:ve,items:d,newIndex:_e,containerId:h}),nt=d!==Be.current.items,Ve=t({active:H,containerId:h,isDragging:re,isSorting:Q,id:s,index:C,items:d,newIndex:Be.current.newIndex,previousItems:Be.current.items,previousContainerId:Be.current.containerId,transition:u,wasDragging:Be.current.activeId!=null}),De=Wke({disabled:!Ve,index:C,node:N,rect:j});return T.useEffect(()=>{Q&&Be.current.newIndex!==_e&&(Be.current.newIndex=_e),h!==Be.current.containerId&&(Be.current.containerId=h),d!==Be.current.items&&(Be.current.items=d)},[Q,_e,h,d]),T.useEffect(()=>{if(ve===Be.current.activeId)return;if(ve!=null&&Be.current.activeId==null){Be.current.activeId=ve;return}const Ee=setTimeout(()=>{Be.current.activeId=ve},50);return()=>clearTimeout(Ee)},[ve]),{active:H,activeIndex:m,attributes:U,data:k,rect:j,index:C,newIndex:_e,items:d,isOver:P,isSorting:Q,isDragging:re,listeners:ie,node:N,overIndex:w,over:X,setNodeRef:J,setActivatorNodeRef:ne,setDroppableNodeRef:L,setDraggableNodeRef:se,transform:De??Ae,transition:$()};function $(){if(De||nt&&Be.current.newIndex===C)return qke;if(!(ue&&!QR(M)||!u)&&(Q||Ve))return gy.Transition.toString({...u,property:nq})}}function Zke(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function f1(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Yke=[nr.Down,nr.Right,nr.Up,nr.Left],Xke=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(Yke.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=a.get(h.id);if(m)switch(e.code){case nr.Down:r.top<m.top&&l.push(h);break;case nr.Up:r.top>m.top&&l.push(h);break;case nr.Left:r.left>m.left&&l.push(h);break;case nr.Right:r.left<m.left&&l.push(h);break}});const u=NTe({collisionRect:r,droppableRects:a,droppableContainers:l});let d=$H(u,"id");if(d===(s==null?void 0:s.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),m=i.get(d),g=m?a.get(m.id):null,v=m==null?void 0:m.node.current;if(v&&g&&h&&m){const w=Z_(v).some((I,j)=>o[j]!==I),x=rq(h,m),_=Jke(h,m),E=w||!x?{x:0,y:0}:{x:_?r.width-g.width:0,y:_?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:my(C,E)}}}};function rq(e,t){return!f1(e)||!f1(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Jke(e,t){return!f1(e)||!f1(t)||!rq(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Qke=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:l}=Kke({id:e,disabled:n}),u={transform:gy.Transform.toString(s),transition:o,zIndex:l?10:void 0,opacity:n?.5:1};return p.jsxs("div",{ref:i,style:u,...r,...a,className:xt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[p.jsx(FZ,{className:xt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),p.jsx(Wt,{className:xt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},eAe=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAllAvailableModelDefsForProvider:a}=Un(sn(m=>({setGlobalModelSortOrder:m.setGlobalModelSortOrder,dbProviderConfigs:m.dbProviderConfigs,globalModelSortOrder:m.globalModelSortOrder,isLoading:m.isLoading,getAllAvailableModelDefsForProvider:m.getAllAvailableModelDefsForProvider}))),[i,s]=T.useState(""),o=T.useMemo(()=>{const m=new Map,g=new Set;t.forEach(x=>{if(!x.isEnabled||!x.enabledModels)return;const _=a(x.id),E=new Map(_.map(C=>[C.id,C]));x.enabledModels.forEach(C=>{const k=Au(x.id,C),I=E.get(C);I&&(g.add(k),m.set(k,{id:k,name:I.name||C,providerId:x.id,providerName:x.name,metadata:I}))})});const v=[],b=new Set;n.forEach(x=>{if(g.has(x)){const _=m.get(x);_&&!b.has(x)&&(v.push(_),b.add(x))}});const w=Array.from(g).filter(x=>!b.has(x)).map(x=>m.get(x)).filter(x=>!!x).sort((x,_)=>x.name.localeCompare(_.name));return[...v,...w]},[t,n,a]),l=T.useMemo(()=>{if(!i.trim())return o;const m=i.toLowerCase();return o.filter(g=>g.name.toLowerCase().includes(m)||g.providerName.toLowerCase().includes(m)||g.id.toLowerCase().includes(m))},[o,i]),u=T.useMemo(()=>l.map(m=>m.id),[l]),d=T.useCallback(m=>{const{active:g,over:v}=m;if(v&&g.id!==v.id){const b=o.map(C=>C.id),w=g.id,x=v.id,_=b.indexOf(w),E=b.indexOf(x);if(_!==-1&&E!==-1){const C=a3(b,_,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[o,e]),h=TTe(YP(r3),YP(t3,{coordinateGetter:Xke}));return r?p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx(cr,{className:"h-8 w-1/3"}),p.jsx(cr,{className:"h-6 w-1/2"}),p.jsx(cr,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),p.jsx(td,{}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(Wt,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),p.jsxs("div",{className:"relative",children:[p.jsx(Qi,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(kn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:m=>s(m.target.value),className:"pl-8 w-full",disabled:r})]}),p.jsx(wl,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?p.jsx(Ake,{sensors:h,collisionDetection:ATe,onDragEnd:d,children:p.jsx(zke,{items:u,strategy:Bke,children:l.map(m=>p.jsx(Qke,{id:m.id,name:`${m.name} (${m.providerName})`},m.id))})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},uo=({label:e,value:t,icon:n,className:r})=>p.jsxs(Wr,{className:r,children:[p.jsx(Mn,{className:"font-medium py-1.5 px-3 w-1/3",children:p.jsxs("div",{className:"flex items-center gap-2",children:[n,e]})}),p.jsx(Mn,{className:"py-1.5 px-3 text-muted-foreground",children:t})]}),tAe=({supported:e,label:t,icon:n})=>p.jsx(pp,{variant:e?"default":"outline",className:`text-xs ${e?"bg-green-500/20 text-green-700 dark:bg-green-500/10 dark:text-green-400 border-green-500/30":"text-muted-foreground border-border/50"}`,children:p.jsxs("div",{className:"flex items-center gap-1",children:[n,t]})}),nAe=({modelId:e})=>{var g,v;const{dbProviderConfigs:t,dbApiKeys:n,getAllAvailableModelDefsForProvider:r}=Un(sn(b=>({dbProviderConfigs:b.dbProviderConfigs,dbApiKeys:b.dbApiKeys,getAllAvailableModelDefsForProvider:b.getAllAvailableModelDefsForProvider}))),a=T.useMemo(()=>{if(!e)return null;const{providerId:b,modelId:w}=Rc(e);if(!b||!w)return null;const x=t.find(I=>I.id===b);if(!x)return null;const E=r(b).find(I=>I.id===w);if(!E)return null;const C=n.find(I=>I.id===x.apiKeyId),k=N1(x,w,C==null?void 0:C.value);return{definition:E,config:k,providerName:x.name}},[e,t,n,r]);if(!e)return p.jsxs("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:[p.jsx(mA,{className:"h-5 w-5 mr-2"}),"Select a model from the list to view its details."]});if(!a)return p.jsxs(WR,{variant:"destructive",className:"m-4",children:[p.jsx(Ou,{className:"h-4 w-4"}),p.jsx(KR,{children:"Error"}),p.jsxs(ZR,{children:["Could not load details for model ID: ",e,". It might have been removed or the provider configuration is missing."]})]});const{definition:i,providerName:s}=a,o=i.architecture,l=i.pricing,u=i.top_provider,d=new Set(i.supported_parameters??[]),h=new Set((o==null?void 0:o.input_modalities)??[]),m=[{label:"Reasoning",supported:d.has("reasoning"),icon:p.jsx(Af,{className:"h-3 w-3"})},{label:"Web Search",supported:d.has("web_search")||d.has("web_search_options"),icon:p.jsx(Qi,{className:"h-3 w-3"})},{label:"Tools",supported:d.has("tools"),icon:p.jsx(ST,{className:"h-3 w-3"})},{label:"Multimodal Input",supported:Array.from(h).some(b=>b!=="text"),icon:p.jsx(op,{className:"h-3 w-3"})}];return p.jsx(wl,{className:"h-full p-1",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 py-4 px-2",children:[p.jsxs("div",{className:"pb-4 border-b",children:[p.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:i.name}),p.jsxs("p",{className:"text-sm text-muted-foreground",children:["Provider: ",s," (ID: ",i.id,")"]}),i.description&&p.jsx("p",{className:"text-sm mt-2",children:i.description})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Capabilities"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(b=>p.jsx(tAe,{supported:b.supported,label:b.label,icon:b.icon},b.label))})]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Details"}),p.jsx(rd,{children:p.jsxs(ad,{children:[p.jsx(uo,{label:"Context Length",value:i.context_length?i.context_length.toLocaleString():"N/A",icon:p.jsx(KZ,{className:"h-3.5 w-3.5"})}),(u==null?void 0:u.max_completion_tokens)&&p.jsx(uo,{label:"Max Completion Tokens",value:u.max_completion_tokens.toLocaleString(),icon:p.jsx(xT,{className:"h-3.5 w-3.5"})}),p.jsx(uo,{label:"Tokenizer",value:(o==null?void 0:o.tokenizer)||"N/A",icon:p.jsx(OY,{className:"h-3.5 w-3.5"})}),p.jsx(uo,{label:"Input Modalities",value:((g=o==null?void 0:o.input_modalities)==null?void 0:g.join(", "))||"text (default)",icon:p.jsx(op,{className:"h-3.5 w-3.5"})}),p.jsx(uo,{label:"Output Modalities",value:((v=o==null?void 0:o.output_modalities)==null?void 0:v.join(", "))||"text (default)",icon:p.jsx(xT,{className:"h-3.5 w-3.5"})}),(o==null?void 0:o.instruct_type)&&p.jsx(uo,{label:"Instruct Type",value:o.instruct_type,icon:p.jsx(qZ,{className:"h-3.5 w-3.5"})}),u&&p.jsx(uo,{label:"Moderated",value:u.is_moderated?"Yes":"No",icon:p.jsx(TT,{className:"h-3.5 w-3.5"})})]})})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Pricing ($ / 1M tokens)"}),l?p.jsx(rd,{children:p.jsxs(ad,{children:[p.jsx(uo,{label:"Prompt",value:l.prompt||"N/A",icon:p.jsx(jw,{className:"h-3.5 w-3.5"})}),p.jsx(uo,{label:"Completion",value:l.completion||"N/A",icon:p.jsx(jw,{className:"h-3.5 w-3.5"})}),l.request&&p.jsx(uo,{label:"Request (Fixed)",value:l.request,icon:p.jsx(jw,{className:"h-3.5 w-3.5"})}),l.image&&p.jsx(uo,{label:"Image (Per Image)",value:l.image,icon:p.jsx(op,{className:"h-3.5 w-3.5"})})]})}):p.jsx("p",{className:"text-sm text-muted-foreground",children:"Pricing information not available."})]})]}),i.supported_parameters&&i.supported_parameters.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Supported Parameters"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:i.supported_parameters.map(b=>p.jsxs(pp,{variant:"secondary",className:"text-xs",children:[p.jsx(_Y,{className:"h-3 w-3 mr-1"}),b]},b))})]}),i.per_request_limits&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Per-Request Limits"}),p.jsx(qu,{lang:"json",code:JSON.stringify(i.per_request_limits,null,2)})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-semibold",children:"Raw Definition"}),p.jsx(qu,{lang:"json",code:JSON.stringify(i,null,2)})]})]})})},rAe=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=Un(sn(m=>({apiKeys:m.dbApiKeys,addApiKey:m.addApiKey,deleteApiKey:m.deleteApiKey,isLoading:m.isLoading}))),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,u]=T.useState({}),d=T.useCallback(async(m,g,v)=>{o(!0);try{await t(m,g,v),i(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),h=T.useCallback(async(m,g)=>{if(window.confirm(`Are you sure you want to delete the API key "${g}"? This will unlink it from any providers using it.`)){u(v=>({...v,[m]:!0}));try{await n(m)}catch(v){console.error("Failed to delete API key (from component):",v)}finally{u(v=>({...v,[m]:!1}))}}},[n]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!a&&p.jsxs(It,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[p.jsx(Nf,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),a&&p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),p.jsx(Uz,{onSave:d,onCancel:()=>i(!1),isSaving:s})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!a?p.jsxs("div",{className:"space-y-2",children:[p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"})]}):(e||[]).length===0&&!a?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(rd,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{children:"Provider Type"}),p.jsx(Nr,{children:"Created"}),p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(ad,{children:(e||[]).map(m=>{const g=l[m.id];return p.jsxs(Wr,{className:g?"opacity-50":"",children:[p.jsx(Mn,{className:"font-medium",children:m.name||"Unnamed Key"}),p.jsx(Mn,{children:m.providerId||"Unknown"}),p.jsx(Mn,{className:"text-xs text-muted-foreground",children:fk(new Date(m.createdAt),"PPp")}),p.jsx(Mn,{className:"text-right",children:p.jsx(Cn,{tooltipText:"Delete Key",onClick:()=>h(m.id,m.name||"Unnamed Key"),disabled:g,"aria-label":`Delete key ${m.name||"Unnamed Key"}`,icon:g?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},m.id)})})]})})]})]})},aAe=gt.memo(rAe),iAe=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:s,apiKeys:o,isLoading:l}=Un(sn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[u,d]=T.useState(!1),h=()=>d(!0),m=T.useCallback(()=>d(!1),[]),g=T.useCallback(async b=>{await a(b)},[a]),v=T.useMemo(()=>s||[],[s]);return p.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),p.jsx("div",{className:"flex-shrink-0",children:u?p.jsx(Zz,{apiKeys:o||[],onAddProvider:t,onCancel:m}):p.jsxs(It,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[p.jsx(Nf,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),p.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:p.jsxs("div",{className:"space-y-2",children:[l&&!u?p.jsx(p.Fragment,{children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsx(cr,{className:"h-24 w-full"}),p.jsx(cr,{className:"h-24 w-full"}),p.jsx(cr,{className:"h-24 w-full"})]})}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>p.jsx(dTe,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:g,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!u&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},sAe=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=Un(sn(s=>({selectedModelForDetails:s._selectedModelForDetails,setSelectedModelForDetails:s.setSelectedModelForDetails}))),[n,r]=T.useState("providers-config"),a=T.useCallback(s=>{t(s),s&&r("providers-details")},[t]),i=T.useMemo(()=>[{value:"providers-config",label:"Configuration",content:p.jsx(iAe,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:p.jsx(eAe,{})},{value:"api-keys",label:"API Keys",content:p.jsx(aAe,{})},{value:"providers-details",label:"Model Details",content:p.jsx(nAe,{modelId:e})}],[e,a]);return p.jsx(Fc,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},oAe=gt.memo(sAe),Hg=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:s})=>p.jsxs("div",{className:xt("space-y-3",r),children:[p.jsxs("div",{children:[p.jsx("h3",{className:xt("text-lg font-medium",a),children:e}),t&&p.jsx("p",{className:xt("text-sm text-muted-foreground",i),children:t})]}),p.jsx("div",{className:xt(s),children:n})]}),lAe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=rr(sn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return p.jsx("div",{className:"space-y-6 p-1",children:p.jsx(Hg,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"git-user-name",children:"Git User Name"}),p.jsx(kn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"git-user-email",children:"Git User Email"}),p.jsx(kn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},cAe=gt.memo(lAe),uAe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:s}=mn(sn(N=>({syncRepos:N.syncRepos,addSyncRepo:N.addSyncRepo,updateSyncRepo:N.updateSyncRepo,deleteSyncRepo:N.deleteSyncRepo,initializeOrSyncRepo:N.initializeOrSyncRepo,repoInitializationStatus:N.repoInitializationStatus,isLoading:N.isLoading}))),[o,l]=T.useState(!1),[u,d]=T.useState(null),[h,m]=T.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=T.useState(!1),[b,w]=T.useState({}),x=T.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),_=T.useCallback((N,P)=>{m(L=>({...L,[N]:P}))},[]),E=T.useCallback(async()=>{var N,P,L,H;if(!((N=h.name)!=null&&N.trim())||!((P=h.remoteUrl)!=null&&P.trim())){qe.error("Repository Name and Remote URL are required.");return}v(!0);try{const M={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((L=h.branch)==null?void 0:L.trim())||"main",username:((H=h.username)==null?void 0:H.trim())||null,password:h.password||null};u?await n(u,M):await t(M),x()}catch(M){console.error("Failed to save sync repo:",M)}finally{v(!1)}},[h,u,t,n,x]),C=N=>{d(N.id),m({name:N.name,remoteUrl:N.remoteUrl,branch:N.branch||"main",username:N.username??"",password:N.password??""}),l(!1)},k=T.useCallback(async(N,P)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${P}"? This will unlink it from any conversations and remove the local copy.`)){w(L=>({...L,[N]:!0}));try{await r(N),u===N&&x()}catch(L){console.error("Failed to delete sync repo:",L)}finally{w(L=>({...L,[N]:!1}))}}},[r,u,x]),I=T.useCallback(async N=>{await a(N)},[a]),j=()=>{var N,P;return p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:u?"Edit Sync Repository":"Add New Sync Repository"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Wt,{htmlFor:"repo-name",children:"Name"}),p.jsx(kn,{id:"repo-name",value:h.name||"",onChange:L=>_("name",L.target.value),placeholder:"e.g., My Backup",required:!0,className:"mt-1",disabled:g})]}),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsx(Wt,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),p.jsx(kn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:L=>_("remoteUrl",L.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Wt,{htmlFor:"repo-branch",children:"Branch"}),p.jsx(kn,{id:"repo-branch",value:h.branch||"",onChange:L=>_("branch",L.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Wt,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),p.jsxs(WR,{variant:"destructive",className:"mt-2 mb-3",children:[p.jsx(bA,{className:"h-4 w-4"}),p.jsx(KR,{children:"Security Warning"}),p.jsx(ZR,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"repo-username",children:"Username"}),p.jsx(kn,{id:"repo-username",value:h.username||"",onChange:L=>_("username",L.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"repo-password",children:"Password / Token"}),p.jsx(kn,{id:"repo-password",type:"password",value:h.password||"",onChange:L=>_("password",L.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((N=h.name)!=null&&N.trim())||!((P=h.remoteUrl)!=null&&P.trim()),type:"button",children:[g&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Rf,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!o&&!u&&p.jsxs(It,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:s,children:[p.jsx(Nf,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||u)&&j(),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),s&&!o&&!u?p.jsxs("div",{className:"space-y-2",children:[p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"}),p.jsx(cr,{className:"h-10 w-full"})]}):e.length===0&&!o&&!u?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):p.jsxs("div",{className:"border rounded-md overflow-x-auto",children:[" ",p.jsxs(rd,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{className:"hidden md:table-cell",children:"Remote URL"})," ",p.jsx(Nr,{className:"hidden lg:table-cell",children:"Branch"})," ",p.jsx(Nr,{className:"hidden lg:table-cell",children:"Auth"})," ",p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(ad,{children:e.map(N=>{const P=b[N.id],L=u===N.id,H=!!N.username||!!N.password,M=i[N.id]||"idle",U=P||g||!!u||M==="syncing";let se=null,ie="Initialize/Sync Repository";return M==="syncing"?(se=p.jsx(Fn,{className:"h-4 w-4 animate-spin mr-1"}),ie="Initializing/Syncing..."):M==="idle"?(se=p.jsx(dA,{className:"h-4 w-4 text-green-500 mr-1"}),ie="Sync Successful / Ready"):M==="error"?(se=p.jsx(Ou,{className:"h-4 w-4 text-destructive mr-1"}),ie="Sync Failed"):se=p.jsx(g1,{className:"h-4 w-4 mr-1"}),p.jsxs(Wr,{className:xt(L?"bg-muted/50":"",U&&!L?"opacity-70":""),children:[p.jsx(Mn,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:N.name}),p.jsx(Mn,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:N.remoteUrl}),p.jsx(Mn,{className:"hidden lg:table-cell",children:N.branch||"main"}),p.jsx(Mn,{className:"text-xs hidden lg:table-cell",children:H?"Configured":"None"}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Cn,{tooltipText:ie,onClick:()=>I(N.id),"aria-label":`Initialize or Sync repo ${N.name}`,disabled:U,icon:se,variant:"outline",className:"h-8 w-8"}),p.jsx(Cn,{tooltipText:"Edit",onClick:()=>C(N),"aria-label":`Edit repo ${N.name}`,disabled:U,icon:p.jsx(wy,{}),className:"h-8 w-8"}),p.jsx(Cn,{tooltipText:"Delete",onClick:()=>k(N.id,N.name),"aria-label":`Delete repo ${N.name}`,disabled:U,icon:P?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},N.id)})})]})]})]})]})},dAe=gt.memo(uAe),fAe=()=>{const e=T.useMemo(()=>[{value:"config",label:"User Config",content:p.jsx(cAe,{})},{value:"sync",label:"Sync Repositories",content:p.jsx(dAe,{})}],[]);return p.jsx(Fc,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},hAe=gt.memo(fAe),pAe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.content)||""),[l,u]=T.useState((e==null?void 0:e.type)||"before");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.content)||""),u((e==null?void 0:e.type)||"before")},[e]);const d=T.useCallback(async()=>{if(!a.trim()||!s.trim()){qe.error("Rule Name and Content are required.");return}await n({name:a.trim(),content:s.trim(),type:l})},[a,s,l,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Wt,{htmlFor:"rule-name",children:"Rule Name"}),p.jsx(kn,{id:"rule-name",value:a,onChange:h=>i(h.target.value),placeholder:"e.g., Always respond in JSON",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"rule-type",children:"Rule Type"}),p.jsxs(fc,{value:l,onValueChange:h=>u(h),disabled:t,children:[p.jsx(pc,{id:"rule-type",children:p.jsx(hc,{placeholder:"Select Type"})}),p.jsxs(mc,{children:[p.jsx(_a,{value:"system",children:"System Prompt"}),p.jsx(_a,{value:"before",children:"Before User Prompt"}),p.jsx(_a,{value:"after",children:"After User Prompt"})]})]})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"rule-content",children:"Rule Content"}),p.jsx(bd,{id:"rule-content",value:s,onChange:h=>o(h.target.value),placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:d,disabled:t||!a.trim()||!s.trim(),type:"button",children:[t&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Rf,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Rule"]})]})]})},mAe=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:a})=>{const i=s=>{window.confirm(`Are you sure you want to delete the rule "${s.name}"? This will also remove it from any tags.`)&&a(s.id,s.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(rd,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{children:"Type"}),p.jsx(Nr,{children:"Content Preview"}),p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(ad,{children:t?p.jsxs(p.Fragment,{children:[p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx(cr,{className:"h-10 w-full"})})}),p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx(cr,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(s=>{const o=n[s.id];return p.jsxs(Wr,{children:[p.jsx(Mn,{className:"font-medium",children:s.name}),p.jsx(Mn,{className:"capitalize",children:s.type}),p.jsx(Mn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.content}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Cn,{tooltipText:"Edit Rule",onClick:()=>r(s),disabled:o,icon:p.jsx(wy,{}),className:"h-8 w-8","aria-label":`Edit rule ${s.name}`}),p.jsx(Cn,{tooltipText:"Delete Rule",onClick:()=>i(s),disabled:o,icon:o?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${s.name}`})]})]},s.id)})})]})})},gAe=()=>{const{rules:e,addRule:t,updateRule:n,deleteRule:r,isLoading:a}=Zs(sn(_=>({rules:_.rules,addRule:_.addRule,updateRule:_.updateRule,deleteRule:_.deleteRule,isLoading:_.isLoading}))),[i,s]=T.useState(!1),[o,l]=T.useState(null),[u,d]=T.useState(!1),[h,m]=T.useState({}),g=()=>{l(null),s(!0)},v=_=>{l(_),s(!0)},b=T.useCallback(()=>{s(!1),l(null),d(!1)},[]),w=T.useCallback(async _=>{d(!0);try{o?await n(o.id,_):await t(_),b()}catch{}finally{d(!1)}},[t,n,o,b]),x=T.useCallback(async _=>{m(E=>({...E,[_]:!0}));try{await r(_),(o==null?void 0:o.id)===_&&b()}catch{}finally{m(E=>({...E,[_]:!1}))}},[r,o,b]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&p.jsxs(It,{onClick:g,variant:"outline",className:"w-full",disabled:a,children:[p.jsx(Nf,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&p.jsx(pAe,{initialData:o??void 0,isSaving:u,onSave:w,onCancel:b}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),p.jsx(mAe,{rules:e,isLoading:a,isDeleting:h,onEdit:v,onDelete:x})]})]})},yAe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.description)||"");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.description)||"")},[e]);const l=T.useCallback(async()=>{if(!a.trim()){qe.error("Tag Name is required.");return}await n({name:a.trim(),description:(s==null?void 0:s.trim())||null})},[a,s,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"tag-name",children:"Tag Name"}),p.jsx(kn,{id:"tag-name",value:a,onChange:u=>i(u.target.value),placeholder:"e.g., Code Generation, Summarization",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"tag-description",children:"Description (Optional)"}),p.jsx(bd,{id:"tag-description",value:s||"",onChange:u=>o(u.target.value),placeholder:"Describe when to use this tag...",rows:2,disabled:t})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(It,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(Ii,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(It,{variant:"secondary",size:"sm",onClick:l,disabled:t||!a.trim(),type:"button",children:[t&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Rf,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Tag"]})]})]})},bAe=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:a,onDelete:i})=>{const s=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&i(o.id,o.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(rd,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{children:"Description"}),p.jsx(Nr,{children:"Linked Rules"}),p.jsx(Nr,{className:"text-right",children:"Actions"})]})}),p.jsx(ad,{children:n?p.jsxs(p.Fragment,{children:[p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx(cr,{className:"h-10 w-full"})})}),p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx(cr,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],u=t.get(o.id)||[];return p.jsxs(Wr,{children:[p.jsx(Mn,{className:"font-medium",children:o.name}),p.jsx(Mn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),p.jsx(Mn,{className:"text-xs",children:u.length>0?u.map(d=>d.name).join(", "):"None"}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Cn,{tooltipText:"Edit Tag & Rules",onClick:()=>a(o),disabled:l,icon:p.jsx(wy,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),p.jsx(Cn,{tooltipText:"Delete Tag",onClick:()=>s(o),disabled:l,icon:l?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Zi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},vAe=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:a=!1})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(""),u=T.useMemo(()=>[...t].sort((v,b)=>v.name.localeCompare(b.name)),[t]),d=T.useMemo(()=>{const v=o.toLowerCase();return v?u.filter(b=>b.name.toLowerCase().includes(v)||b.content.toLowerCase().includes(v)||b.type.toLowerCase().includes(v)):u},[u,o]),h=T.useCallback(v=>{const b=n.has(v);r(e.id,v,!b),l("")},[n,r,e.id]),m=T.useCallback((v,b)=>{b.stopPropagation(),r(e.id,v,!1)},[r,e.id]),g=T.useMemo(()=>u.filter(v=>n.has(v.id)),[u,n]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs(Wt,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),p.jsxs(Mc,{open:i,onOpenChange:s,children:[p.jsx(Oc,{asChild:!0,children:p.jsxs(It,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between h-9",disabled:a||t.length===0,children:[p.jsx("span",{className:"truncate",children:g.length>0?`${g.length} rule(s) selected`:"Select rules..."}),p.jsx(m1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(Pc,{className:"w-[--radix-popover-trigger-width] p-0",children:p.jsxs(EH,{shouldFilter:!1,children:[p.jsx(CH,{placeholder:"Search rules...",value:o,onValueChange:l}),p.jsxs(TH,{children:[p.jsx(kH,{children:t.length===0?"No rules defined.":"No rules found."}),p.jsx(AH,{children:d.map(v=>{const b=n.has(v.id);return p.jsxs(NH,{value:v.id,onSelect:()=>h(v.id),className:"cursor-pointer",children:[p.jsx(Ga,{className:xt("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),p.jsx("span",{className:"truncate",children:v.name}),p.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",v.type,")"]})]},v.id)})})]})]})})]}),g.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:g.map(v=>p.jsxs(pp,{variant:"secondary",className:"flex items-center gap-1",children:[p.jsx("span",{className:"truncate",children:v.name}),p.jsx(It,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>m(v.id,b),disabled:a,"aria-label":`Unlink rule ${v.name}`,children:p.jsx(Ii,{className:"h-3 w-3"})})]},v.id))})]})},wAe=()=>{const{tags:e,rules:t,tagRuleLinks:n,addTag:r,updateTag:a,deleteTag:i,linkTagToRule:s,unlinkTagFromRule:o,getRulesForTag:l,isLoading:u}=Zs(sn(L=>({tags:L.tags,rules:L.rules,tagRuleLinks:L.tagRuleLinks,addTag:L.addTag,updateTag:L.updateTag,deleteTag:L.deleteTag,linkTagToRule:L.linkTagToRule,unlinkTagFromRule:L.unlinkTagFromRule,getRulesForTag:L.getRulesForTag,isLoading:L.isLoading}))),[d,h]=T.useState(!1),[m,g]=T.useState(null),[v,b]=T.useState(!1),[w,x]=T.useState({}),_=()=>{g(null),h(!0)},E=L=>{g(L),h(!0)},C=T.useCallback(()=>{h(!1),g(null),b(!1)},[]),k=T.useCallback(async L=>{b(!0);try{m?await a(m.id,L):await r(L),m||C()}catch{}finally{b(!1)}},[r,a,m,C]),I=T.useCallback(async L=>{x(H=>({...H,[L]:!0}));try{await i(L),(m==null?void 0:m.id)===L&&C()}catch{}finally{x(H=>({...H,[L]:!1}))}},[i,m,C]),j=T.useCallback(async(L,H,M)=>{try{M?await s(L,H):await o(L,H)}catch{}},[s,o]),N=T.useMemo(()=>{const L=new Map;return e.forEach(H=>{L.set(H.id,l(H.id))}),L},[e,l]),P=T.useMemo(()=>m?new Set(n.filter(L=>L.tagId===m.id).map(L=>L.ruleId)):new Set,[m,n]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!d&&p.jsxs(It,{onClick:_,variant:"outline",className:"w-full",disabled:u,children:[p.jsx(Nf,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),d&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(yAe,{initialData:m??void 0,isSaving:v,onSave:k,onCancel:C}),m&&p.jsx(vAe,{tag:m,allRules:t,linkedRuleIds:P,onLinkChange:j,disabled:v})]}),p.jsx(td,{}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),p.jsx(bAe,{tags:e,rulesByTagId:N,isLoading:u,isDeleting:w,onEdit:E,onDelete:I})]})]})},xAe=()=>{const e=T.useMemo(()=>[{value:"rules",label:"Rules",content:p.jsx(gAe,{})},{value:"tags",label:"Tags",content:p.jsx(wAe,{})}],[]);return p.jsx(Fc,{tabs:e,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},_Ae=({label:e,colorKey:t,value:n,onChange:r})=>{const[a,i]=T.useState(n??"");T.useEffect(()=>{i(n??"")},[n]);const s=()=>{r(t,a.trim()||null)},o=l=>{i(l.target.value)};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Wt,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),p.jsx(kn,{id:`color-${t}`,type:"text",value:a,onChange:o,onBlur:s,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),p.jsx(kn,{type:"color",value:a!=null&&a.startsWith("#")?a:"#000000",onChange:l=>{i(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},Nw=[{name:"Default Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css"},{name:"A11y Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css"},{name:"Atom Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-atom-dark.min.css"},{name:"Atelier Sulphurpool Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-base16-ateliersulphurpool.light.min.css"},{name:"CB",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-cb.min.css"},{name:"Coldark Cold",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-cold.min.css"},{name:"Coldark Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css"},{name:"Coy (No Shadow)",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coy-without-shadows.min.css"},{name:"Darcula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-darcula.min.css"},{name:"Dracula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-dracula.min.css"},{name:"Duotone Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-dark.min.css"},{name:"Duotone Earth",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-earth.min.css"},{name:"Duotone Forest",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-forest.min.css"},{name:"Duotone Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-light.min.css"},{name:"Duotone Sea",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-sea.min.css"},{name:"Duotone Space",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-space.min.css"},{name:"GH Colors",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css"},{name:"Gruvbox Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-dark.min.css"},{name:"Gruvbox Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css"},{name:"Holi",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-holi-theme.min.css"},{name:"Hopscotch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-hopscotch.min.css"},{name:"Lucario",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-lucario.min.css"},{name:"Material Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-dark.min.css"},{name:"Material Oceanic",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-oceanic.min.css"},{name:"Night Owl",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-night-owl.min.css"},{name:"Nord",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-nord.min.css"},{name:"One Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css"},{name:"One Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-light.min.css"},{name:"Pojoaque",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-pojoaque.min.css"},{name:"Shades of Purple",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-shades-of-purple.min.css"},{name:"Solarized Dark Atom",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-solarized-dark-atom.min.css"},{name:"Synthwave '84",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css"},{name:"VS",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vs.min.css"},{name:"VSC Dark Plus",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css"},{name:"Xonokai",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-xonokai.min.css"},{name:"Z-Touch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-z-touch.min.css"}],SAe=()=>{const{theme:e,setTheme:t,prismThemeUrl:n,setPrismThemeUrl:r,customFontFamily:a,setCustomFontFamily:i,customFontSize:s,setCustomFontSize:o,chatMaxWidth:l,setChatMaxWidth:u,customThemeColors:d,setCustomThemeColor:h,resetThemeSettings:m}=rr(sn(N=>({theme:N.theme,setTheme:N.setTheme,prismThemeUrl:N.prismThemeUrl,setPrismThemeUrl:N.setPrismThemeUrl,customFontFamily:N.customFontFamily,setCustomFontFamily:N.setCustomFontFamily,customFontSize:N.customFontSize,setCustomFontSize:N.setCustomFontSize,chatMaxWidth:N.chatMaxWidth,setChatMaxWidth:N.setChatMaxWidth,customThemeColors:N.customThemeColors,setCustomThemeColor:N.setCustomThemeColor,resetThemeSettings:N.resetThemeSettings}))),[g,v]=T.useState(s??16),[b,w]=T.useState(Nw.some(N=>N.url===n)?"":n??"");T.useEffect(()=>{v(s??16)},[s]),T.useEffect(()=>{Nw.some(N=>N.url===n)?w(""):w(n??"")},[n]);const x=T.useCallback(N=>{o(N[0])},[o]),_=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&m()},E=N=>{r(N==="default"?null:N),N==="default"||!Nw.some(L=>L.url===N)?w(N==="default"?"":N):w("")},C=N=>{const P=N.target.value.trim();w(P),r(P||null)},k=[{value:"max-w-3xl",label:"Very Small (3xl)"},{value:"max-w-4xl",label:"Small (4xl)"},{value:"max-w-5xl",label:"Medium (5xl)"},{value:"max-w-6xl",label:"Large (6xl)"},{value:"max-w-7xl",label:"Very Large (7xl)"},{value:"max-w-full",label:"Full Width"}],I=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}],j=n===null?"default":n;return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsx(Hg,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Wt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsxs(fc,{value:e??"system",onValueChange:N=>t(N),children:[p.jsx(pc,{id:"theme-select",className:"w-[180px]",children:p.jsx(hc,{placeholder:"Select theme"})}),p.jsxs(mc,{children:[p.jsx(_a,{value:"light",children:"Default Light"}),p.jsx(_a,{value:"dark",children:"Default Dark"}),p.jsx(_a,{value:"system",children:"System"}),p.jsx(_a,{value:"TijuLight",children:"Tiju Light"}),p.jsx(_a,{value:"TijuDark",children:"Tiju Dark"}),p.jsx(_a,{value:"custom",children:"User Custom"})]})]})]})}),p.jsxs(Hg,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-4",children:[p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"custom-font-family",children:"Custom Font Family"}),p.jsx(kn,{id:"custom-font-family",value:a??"",onChange:N=>i(N.target.value||null),placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"custom-font-size",children:["Base Font Size (",g,"px)"]}),p.jsx(ul,{id:"custom-font-size",min:12,max:20,step:1,value:[g],onValueChange:N=>v(N[0]),onValueCommit:x}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"chat-max-width",children:"Chat Content Max Width"}),p.jsxs(fc,{value:l??"max-w-7xl",onValueChange:N=>u(N||null),children:[p.jsx(pc,{id:"chat-max-width",className:"w-full mt-1",children:p.jsx(hc,{placeholder:"Select max width"})}),p.jsx(mc,{children:k.map(N=>p.jsx(_a,{value:N.value,children:N.label},N.value))})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),p.jsxs(Hg,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-3",children:[p.jsx(Wt,{htmlFor:"prism-theme-select",children:"Select Theme or Enter URL"}),p.jsxs(fc,{value:j,onValueChange:E,children:[p.jsx(pc,{id:"prism-theme-select",className:"w-full",children:p.jsx(hc,{placeholder:"Select code theme..."})}),p.jsxs(mc,{children:[p.jsx(_a,{value:"default",children:"Default (Matches Theme)"}),Nw.map(N=>p.jsx(_a,{value:N.url,children:N.name},N.url))]})]}),p.jsx(kn,{id:"prism-theme-url-custom",type:"url",placeholder:"Or paste custom theme URL here...",value:b,onChange:C,className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a preset theme or paste a URL to a PrismJS CSS file. Leave blank or select 'Default' to use themes matching light/dark mode."})]}),p.jsx(Hg,{title:"Custom Theme Colors",description:"Define custom colors. Applies only when 'User Custom' theme is selected. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:I.map(({key:N,label:P})=>p.jsx(_Ae,{label:P,colorKey:N,value:d==null?void 0:d[N],onChange:h},N))})}),p.jsx(td,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(It,{variant:"outline",size:"sm",onClick:_,children:[p.jsx(yA,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]})})]})},EAe=gt.memo(SAe),aq=T.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=rr(sn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=hy(sn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=Ji(sn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[s,o]=T.useState(a||"general");T.useEffect(()=>{e&&o(a||"general")},[e,a]);const l=h=>{h||(t(),i())},u=h=>{o(h)},d=T.useMemo(()=>{const h=[{value:"general",label:"General",content:p.jsx(JEe,{})},{value:"theme",label:"Theme",content:p.jsx(EAe,{})},{value:"providers",label:"Providers & Models",content:p.jsx(oAe,{})},...n?[{value:"assistant",label:"Assistant",content:p.jsx(KCe,{})}]:[],{value:"rules-tags",label:"Rules & Tags",content:p.jsx(xAe,{})},{value:"git",label:"Git",content:p.jsx(hAe,{})},{value:"data",label:"Data",content:p.jsx(nTe,{})},{value:"mods",label:"Mods",content:p.jsx(iTe,{})}],m=r.map(g=>({value:g.id,label:g.title,content:gt.isValidElement(g.component)?g.component:typeof g.component=="function"?p.jsx(g.component,{}):null}));return[...h,...m]},[n,r]);return p.jsx(P_,{open:e,onOpenChange:l,children:p.jsxs(F_,{className:xt("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[p.jsxs(L_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsx($_,{children:"Settings"}),p.jsx(z_,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),p.jsx(Fc,{tabs:d,initialValue:s,onValueChange:u,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsx(B_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:p.jsx(It,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});aq.displayName="SettingsModalComponent";const CAe=aq;function TAe(){const e=Ir.getState().registerChatControl,t=Ji.getState().toggleChatControlPanel,n=Ji.getState().setInitialSettingsTabs,r=()=>{const i=(s,o)=>{n(null,null),t("settingsModal",!0)};return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:p.jsx(ET,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Settings"})]})})},a=()=>{const i=Ji.getState().isChatControlPanelOpen.settingsModal??!1,s=()=>t("settingsModal",!1);return p.jsx(CAe,{isOpen:i,onClose:s})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(r),iconRenderer:()=>gt.createElement(r),settingsRenderer:()=>gt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function kAe(){const e=Ir.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=Ji.getState();return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?p.jsx(oY,{className:"h-4 w-4"}):p.jsx(iY,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(t),iconRenderer:()=>gt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}const AAe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=Oi(sn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),s=rr.getState(),[o,l]=T.useState(()=>Oi.getState());T.useEffect(()=>{const d=h=>{l(m=>({...m,...h.params}))};return Ct.on(St.PROMPT_PARAMS_CHANGED,d),()=>{Ct.off(St.PROMPT_PARAMS_CHANGED,d)}},[]);const u={temperature:o.temperature??null,setTemperature:e,topP:o.topP??null,setTopP:t,maxTokens:o.maxTokens??null,setMaxTokens:n,topK:o.topK??null,setTopK:r,presencePenalty:o.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:o.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:s.temperature,defaultTopP:s.topP,defaultMaxTokens:s.maxTokens,defaultTopK:s.topK,defaultPresencePenalty:s.presencePenalty,defaultFrequencyPenalty:s.frequencyPenalty};return p.jsx(mH,{...u})},NAe=()=>{const[e,t]=T.useState(()=>On.getState().status==="streaming"),[n,r]=T.useState(!0);return T.useEffect(()=>{const a=o=>{t(o.status==="streaming")},i=o=>{var g;if(!o.modelId){r(!1);return}const{getSelectedModel:l}=Un.getState(),u=l(),d=((g=u==null?void 0:u.metadata)==null?void 0:g.supported_parameters)??[],h=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],m=rr.getState().enableAdvancedSettings;r(m&&d.some(v=>h.includes(v)))},s=o=>{o.key==="enableAdvancedSettings"&&i({modelId:Un.getState().selectedModelId})};return i({modelId:Un.getState().selectedModelId}),Ct.on(St.INTERACTION_STATUS_CHANGED,a),Ct.on(St.MODEL_SELECTION_CHANGED,i),Ct.on(St.SETTINGS_CHANGED,s),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,a),Ct.off(St.MODEL_SELECTION_CHANGED,i),Ct.off(St.SETTINGS_CHANGED,s)}},[]),n?p.jsxs(Mc,{children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oc,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:e,"aria-label":"Adjust Advanced Parameters",children:p.jsx(kY,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:"Advanced Parameters"})]})}),p.jsx(Pc,{className:"w-auto p-0",align:"start",children:p.jsx(AAe,{})})]}):null};function RAe(){const e=Ir.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>gt.createElement(NAe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:s}=Oi.getState(),o=(u,d,h)=>{h!==null&&(u[d]=h)},l={};return o(l,"temperature",t),o(l,"top_p",n),o(l,"max_tokens",r),o(l,"top_k",a),o(l,"presence_penalty",i),o(l,"frequency_penalty",s),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const iq=20,IAe=iq*1024*1024,jAe=()=>{const e=T.useRef(null),t=vc.getState().addAttachedFile,[n,r]=T.useState(()=>On.getState().status==="streaming"),[a,i]=T.useState(!0);T.useEffect(()=>{const u=h=>{r(h.status==="streaming")},d=h=>{var b,w;if(!h.modelId){i(!1);return}const{getSelectedModel:m}=Un.getState(),g=m(),v=(w=(b=g==null?void 0:g.metadata)==null?void 0:b.architecture)==null?void 0:w.input_modalities;i(!v||v.some(x=>x!=="text"))};return d({modelId:Un.getState().selectedModelId}),Ct.on(St.INTERACTION_STATUS_CHANGED,u),Ct.on(St.MODEL_SELECTION_CHANGED,d),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,u),Ct.off(St.MODEL_SELECTION_CHANGED,d)}},[]);const s=T.useCallback(async u=>{const d=u.target.files;if(!d)return;const h=a;for(const m of Array.from(d)){if(m.size>IAe){qe.error(`File "${m.name}" exceeds the ${iq}MB limit.`);continue}const g=_A(m.name,m.type),v=m.type.startsWith("image/");if(!g&&!h){qe.warning(`File "${m.name}" (${m.type}) cannot be uploaded. The current model only supports text input.`);continue}try{let b={};if(g)b.contentText=await m.text();else if(v){const w=new FileReader,x=new Promise((E,C)=>{w.onload=()=>E(w.result),w.onerror=k=>C(k)});w.readAsDataURL(m);const _=await x;_&&_.includes(",")?b.contentBase64=_.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${m.name}`)}else h&&console.log(`File type ${m.type} (Name: ${m.name}) not directly processed for content storage, but model supports non-text.`);t({source:"direct",name:m.name,type:m.type||"application/octet-stream",size:m.size,...b})}catch(b){console.error(`Error processing file ${m.name}:`,b),qe.error(`Failed to process file "${m.name}": ${b instanceof Error?b.message:String(b)}`)}}u.target&&(u.target.value="")},[t,a]),o=()=>{var u;(u=e.current)==null||u.click()},l=a?"Attach Files (Text, Images, etc.)":"Attach Text Files";return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:e,onChange:s,multiple:!0,className:"hidden",disabled:n}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{type:"button",variant:"ghost",size:"icon",onClick:o,disabled:n,className:"h-8 w-8","aria-label":l,children:p.jsx(gA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:l})]})})]})},DAe=()=>{const e=vc.getState().removeAttachedFile,[t,n]=T.useState(()=>vc.getState().attachedFilesMetadata),[r,a]=T.useState(()=>On.getState().status==="streaming");return T.useEffect(()=>{const i=o=>{n(o.files)},s=o=>{a(o.status==="streaming")};return Ct.on(St.ATTACHED_FILES_CHANGED,i),Ct.on(St.INTERACTION_STATUS_CHANGED,s),()=>{Ct.off(St.ATTACHED_FILES_CHANGED,i),Ct.off(St.INTERACTION_STATUS_CHANGED,s)}},[]),t.length===0?null:p.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:t.map(i=>p.jsx(DN,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function MAe(){const e=Ir.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>gt.createElement(jAe),renderer:()=>gt.createElement(DAe)}),console.log("[Function] Registered Core File Attachment Control")}const OAe=()=>{const{toggleVfsModal:e,isVfsModalOpen:t}=Ji(sn(l=>({toggleVfsModal:l.toggleVfsModal,isVfsModalOpen:l.isVfsModalOpen}))),{enableVfs:n,selectedFileIds:r,nodes:a,clearSelection:i}=xl(sn(l=>({enableVfs:l.enableVfs,selectedFileIds:l.selectedFileIds,nodes:l.nodes,clearSelection:l.clearSelection}))),s=vc.getState().addAttachedFile,o=()=>{if(r.size===0){qe.info("No files selected in VFS to attach.");return}let l=0;r.forEach(u=>{const d=a[u];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0&&(qe.success(`Attached ${l} file(s) from VFS to the next prompt.`),i(),e(!1))};return n?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:xt("h-8 w-8",t&&"bg-muted text-primary"),onClick:()=>e(),"aria-label":"Toggle Virtual File System",children:p.jsx(pA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Virtual Filesystem"})]})}),r.size>0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs(It,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:o,"aria-label":`Attach ${r.size} selected VFS file(s)`,children:[p.jsx(gA,{className:"h-4 w-4 mr-1"}),"Attach (",r.size,")"]})}),p.jsx(Yn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},sq=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i,isMobile:s=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return s?p.jsxs("div",{className:"flex items-center gap-2 p-1",children:[p.jsx(pf,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),p.jsx(kn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:i}),p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ga,{className:"h-4 w-4"})}),p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(Ii,{className:"h-4 w-4"})})]})]}):p.jsxs(Wr,{className:"bg-muted/30",children:[p.jsx(Mn,{className:"px-2 py-1"}),p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(pf,{className:"h-5 w-5 text-yellow-400"})}),p.jsx(Mn,{className:"py-1 px-2",colSpan:3,children:p.jsx(kn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),p.jsx(Mn,{className:"text-right pr-4 py-1",children:p.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ga,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Create (Enter)"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(Ii,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var oA=["Enter"," "],PAe=["ArrowDown","PageUp","Home"],oq=["ArrowUp","PageDown","End"],FAe=[...PAe,...oq],LAe={ltr:[...oA,"ArrowRight"],rtl:[...oA,"ArrowLeft"]},BAe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pb="Menu",[by,$Ae,zAe]=__(pb),[Gf,J_]=wi(pb,[zAe,id,V_]),Q_=id(),lq=V_(),[UAe,Wf]=Gf(pb),[VAe,mb]=Gf(pb),cq=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:s=!0}=e,o=Q_(t),[l,u]=T.useState(null),d=T.useRef(!1),h=Ua(i),m=dm(a);return T.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),p.jsx(M1,{...o,children:p.jsx(UAe,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:u,children:p.jsx(VAe,{scope:t,onClose:T.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:s,children:r})})})};cq.displayName=pb;var HAe="MenuAnchor",i3=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Q_(n);return p.jsx(Ey,{...a,...r,ref:t})});i3.displayName=HAe;var s3="MenuPortal",[qAe,uq]=Gf(s3,{forceMount:void 0}),dq=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Wf(s3,t);return p.jsx(qAe,{scope:t,forceMount:n,children:p.jsx(Za,{present:n||i.open,children:p.jsx(Yp,{asChild:!0,container:a,children:r})})})};dq.displayName=s3;var Ws="MenuContent",[GAe,o3]=Gf(Ws),fq=T.forwardRef((e,t)=>{const n=uq(Ws,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Wf(Ws,e.__scopeMenu),s=mb(Ws,e.__scopeMenu);return p.jsx(by.Provider,{scope:e.__scopeMenu,children:p.jsx(Za,{present:r||i.open,children:p.jsx(by.Slot,{scope:e.__scopeMenu,children:s.modal?p.jsx(WAe,{...a,ref:t}):p.jsx(KAe,{...a,ref:t})})})})}),WAe=T.forwardRef((e,t)=>{const n=Wf(Ws,e.__scopeMenu),r=T.useRef(null),a=Nn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return C_(i)},[]),p.jsx(l3,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),KAe=T.forwardRef((e,t)=>{const n=Wf(Ws,e.__scopeMenu);return p.jsx(l3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ZAe=Mu("MenuContent.ScrollLock"),l3=T.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...b}=e,w=Wf(Ws,n),x=mb(Ws,n),_=Q_(n),E=lq(n),C=$Ae(n),[k,I]=T.useState(null),j=T.useRef(null),N=Nn(t,j,w.onContentChange),P=T.useRef(0),L=T.useRef(""),H=T.useRef(0),M=T.useRef(null),K=T.useRef("right"),U=T.useRef(0),se=v?ob:T.Fragment,ie=v?{as:ZAe,allowPinchZoom:!0}:void 0,re=ne=>{var Ae,_e;const q=L.current+ne,J=C().filter(ve=>!ve.disabled),Q=document.activeElement,te=(Ae=J.find(ve=>ve.ref.current===Q))==null?void 0:Ae.textValue,ue=J.map(ve=>ve.textValue),ge=oNe(ue,q,te),Ie=(_e=J.find(ve=>ve.textValue===ge))==null?void 0:_e.ref.current;(function ve(Be){L.current=Be,window.clearTimeout(P.current),Be!==""&&(P.current=window.setTimeout(()=>ve(""),1e3))})(q),Ie&&setTimeout(()=>Ie.focus())};T.useEffect(()=>()=>window.clearTimeout(P.current),[]),S_();const X=T.useCallback(ne=>{var J,Q;return K.current===((J=M.current)==null?void 0:J.side)&&cNe(ne,(Q=M.current)==null?void 0:Q.area)},[]);return p.jsx(GAe,{scope:n,searchRef:L,onItemEnter:T.useCallback(ne=>{X(ne)&&ne.preventDefault()},[X]),onItemLeave:T.useCallback(ne=>{var q;X(ne)||((q=j.current)==null||q.focus(),I(null))},[X]),onTriggerLeave:T.useCallback(ne=>{X(ne)&&ne.preventDefault()},[X]),pointerGraceTimerRef:H,onPointerGraceIntentChange:T.useCallback(ne=>{M.current=ne},[]),children:p.jsx(se,{...ie,children:p.jsx(sb,{asChild:!0,trapped:a,onMountAutoFocus:qt(i,ne=>{var q;ne.preventDefault(),(q=j.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:p.jsx(Wp,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:p.jsx(rH,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:I,onEntryFocus:qt(l,ne=>{x.isUsingKeyboardRef.current||ne.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(O1,{role:"menu","aria-orientation":"vertical","data-state":Aq(w.open),"data-radix-menu-content":"",dir:x.dir,..._,...b,ref:N,style:{outline:"none",...b.style},onKeyDown:qt(b.onKeyDown,ne=>{const J=ne.target.closest("[data-radix-menu-content]")===ne.currentTarget,Q=ne.ctrlKey||ne.altKey||ne.metaKey,te=ne.key.length===1;J&&(ne.key==="Tab"&&ne.preventDefault(),!Q&&te&&re(ne.key));const ue=j.current;if(ne.target!==ue||!FAe.includes(ne.key))return;ne.preventDefault();const Ie=C().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);oq.includes(ne.key)&&Ie.reverse(),iNe(Ie)}),onBlur:qt(e.onBlur,ne=>{ne.currentTarget.contains(ne.target)||(window.clearTimeout(P.current),L.current="")}),onPointerMove:qt(e.onPointerMove,vy(ne=>{const q=ne.target,J=U.current!==ne.clientX;if(ne.currentTarget.contains(q)&&J){const Q=ne.clientX>U.current?"right":"left";K.current=Q,U.current=ne.clientX}}))})})})})})})});fq.displayName=Ws;var YAe="MenuGroup",c3=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{role:"group",...r,ref:t})});c3.displayName=YAe;var XAe="MenuLabel",hq=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{...r,ref:t})});hq.displayName=XAe;var h1="MenuItem",c8="menu.itemSelect",eS=T.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=T.useRef(null),s=mb(h1,e.__scopeMenu),o=o3(h1,e.__scopeMenu),l=Nn(t,i),u=T.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(c8,{bubbles:!0,cancelable:!0});h.addEventListener(c8,g=>r==null?void 0:r(g),{once:!0}),qF(h,m),m.defaultPrevented?u.current=!1:s.onClose()}};return p.jsx(pq,{...a,ref:l,disabled:n,onClick:qt(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:qt(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:qt(e.onKeyDown,h=>{const m=o.searchRef.current!=="";n||m&&h.key===" "||oA.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});eS.displayName=h1;var pq=T.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,s=o3(h1,n),o=lq(n),l=T.useRef(null),u=Nn(t,l),[d,h]=T.useState(!1),[m,g]=T.useState("");return T.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),p.jsx(by.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:p.jsx(aH,{asChild:!0,...o,focusable:!r,children:p.jsx(an.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:qt(e.onPointerMove,vy(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:qt(e.onPointerLeave,vy(v=>s.onItemLeave(v))),onFocus:qt(e.onFocus,()=>h(!0)),onBlur:qt(e.onBlur,()=>h(!1))})})})}),JAe="MenuCheckboxItem",mq=T.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return p.jsx(wq,{scope:e.__scopeMenu,checked:n,children:p.jsx(eS,{role:"menuitemcheckbox","aria-checked":p1(n)?"mixed":n,...a,ref:t,"data-state":d3(n),onSelect:qt(a.onSelect,()=>r==null?void 0:r(p1(n)?!0:!n),{checkForDefaultPrevented:!1})})})});mq.displayName=JAe;var gq="MenuRadioGroup",[QAe,eNe]=Gf(gq,{value:void 0,onValueChange:()=>{}}),yq=T.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ua(r);return p.jsx(QAe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:p.jsx(c3,{...a,ref:t})})});yq.displayName=gq;var bq="MenuRadioItem",vq=T.forwardRef((e,t)=>{const{value:n,...r}=e,a=eNe(bq,e.__scopeMenu),i=n===a.value;return p.jsx(wq,{scope:e.__scopeMenu,checked:i,children:p.jsx(eS,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":d3(i),onSelect:qt(r.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,n)},{checkForDefaultPrevented:!1})})})});vq.displayName=bq;var u3="MenuItemIndicator",[wq,tNe]=Gf(u3,{checked:!1}),xq=T.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=tNe(u3,n);return p.jsx(Za,{present:r||p1(i.checked)||i.checked===!0,children:p.jsx(an.span,{...a,ref:t,"data-state":d3(i.checked)})})});xq.displayName=u3;var nNe="MenuSeparator",_q=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});_q.displayName=nNe;var rNe="MenuArrow",Sq=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Q_(n);return p.jsx(P1,{...a,...r,ref:t})});Sq.displayName=rNe;var aNe="MenuSub",[sIe,Eq]=Gf(aNe),qg="MenuSubTrigger",Cq=T.forwardRef((e,t)=>{const n=Wf(qg,e.__scopeMenu),r=mb(qg,e.__scopeMenu),a=Eq(qg,e.__scopeMenu),i=o3(qg,e.__scopeMenu),s=T.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=T.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return T.useEffect(()=>d,[d]),T.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),p.jsx(i3,{asChild:!0,...u,children:p.jsx(pq,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Aq(n.open),...e,ref:gc(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:qt(e.onPointerMove,vy(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:qt(e.onPointerLeave,vy(h=>{var g,v;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const b=(v=n.content)==null?void 0:v.dataset.side,w=b==="right",x=w?-5:5,_=m[w?"left":"right"],E=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:_,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:_,y:m.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:qt(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||LAe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});Cq.displayName=qg;var Tq="MenuSubContent",kq=T.forwardRef((e,t)=>{const n=uq(Ws,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Wf(Ws,e.__scopeMenu),s=mb(Ws,e.__scopeMenu),o=Eq(Tq,e.__scopeMenu),l=T.useRef(null),u=Nn(t,l);return p.jsx(by.Provider,{scope:e.__scopeMenu,children:p.jsx(Za,{present:r||i.open,children:p.jsx(by.Slot,{scope:e.__scopeMenu,children:p.jsx(l3,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;s.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:qt(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:qt(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:qt(e.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=BAe[s.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(g=o.trigger)==null||g.focus(),d.preventDefault())})})})})})});kq.displayName=Tq;function Aq(e){return e?"open":"closed"}function p1(e){return e==="indeterminate"}function d3(e){return p1(e)?"indeterminate":e?"checked":"unchecked"}function iNe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function sNe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function oNe(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=sNe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function lNe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function cNe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return lNe(n,t)}function vy(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Nq=cq,Rq=i3,Iq=dq,jq=fq,Dq=c3,Mq=hq,Oq=eS,Pq=mq,Fq=yq,Lq=vq,Bq=xq,$q=_q,zq=Sq,Uq=Cq,Vq=kq,f3="ContextMenu",[uNe,oIe]=wi(f3,[J_]),Li=J_(),[dNe,Hq]=uNe(f3),qq=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[s,o]=T.useState(!1),l=Li(t),u=Ua(r),d=T.useCallback(h=>{o(h),u(h)},[u]);return p.jsx(dNe,{scope:t,open:s,onOpenChange:d,modal:i,children:p.jsx(Nq,{...l,dir:a,open:s,onOpenChange:d,modal:i,children:n})})};qq.displayName=f3;var Gq="ContextMenuTrigger",Wq=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=Hq(Gq,n),s=Li(n),o=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),u=T.useRef(0),d=T.useCallback(()=>window.clearTimeout(u.current),[]),h=m=>{o.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return T.useEffect(()=>d,[d]),T.useEffect(()=>void(r&&d()),[r,d]),p.jsxs(p.Fragment,{children:[p.jsx(Rq,{...s,virtualRef:l}),p.jsx(an.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:qt(e.onContextMenu,m=>{d(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:qt(e.onPointerDown,Rw(m=>{d(),u.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:qt(e.onPointerMove,Rw(d)),onPointerCancel:r?e.onPointerCancel:qt(e.onPointerCancel,Rw(d)),onPointerUp:r?e.onPointerUp:qt(e.onPointerUp,Rw(d))})]})});Wq.displayName=Gq;var fNe="ContextMenuPortal",Kq=e=>{const{__scopeContextMenu:t,...n}=e,r=Li(t);return p.jsx(Iq,{...r,...n})};Kq.displayName=fNe;var Zq="ContextMenuContent",Yq=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Hq(Zq,n),i=Li(n),s=T.useRef(!1);return p.jsx(jq,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&s.current&&o.preventDefault(),s.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!a.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Yq.displayName=Zq;var hNe="ContextMenuGroup",pNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Dq,{...a,...r,ref:t})});pNe.displayName=hNe;var mNe="ContextMenuLabel",gNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Mq,{...a,...r,ref:t})});gNe.displayName=mNe;var yNe="ContextMenuItem",Xq=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Oq,{...a,...r,ref:t})});Xq.displayName=yNe;var bNe="ContextMenuCheckboxItem",vNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Pq,{...a,...r,ref:t})});vNe.displayName=bNe;var wNe="ContextMenuRadioGroup",xNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Fq,{...a,...r,ref:t})});xNe.displayName=wNe;var _Ne="ContextMenuRadioItem",SNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Lq,{...a,...r,ref:t})});SNe.displayName=_Ne;var ENe="ContextMenuItemIndicator",CNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Bq,{...a,...r,ref:t})});CNe.displayName=ENe;var TNe="ContextMenuSeparator",Jq=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx($q,{...a,...r,ref:t})});Jq.displayName=TNe;var kNe="ContextMenuArrow",ANe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(zq,{...a,...r,ref:t})});ANe.displayName=kNe;var NNe="ContextMenuSubTrigger",RNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Uq,{...a,...r,ref:t})});RNe.displayName=NNe;var INe="ContextMenuSubContent",jNe=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Vq,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jNe.displayName=INe;function Rw(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var DNe=qq,MNe=Wq,ONe=Kq,PNe=Yq,FNe=Xq,LNe=Jq;function u8({...e}){return p.jsx(DNe,{"data-slot":"context-menu",...e})}function d8({...e}){return p.jsx(MNe,{"data-slot":"context-menu-trigger",...e})}function f8({className:e,...t}){return p.jsx(ONe,{children:p.jsx(PNe,{"data-slot":"context-menu-content",className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function ms({className:e,inset:t,variant:n="default",...r}){return p.jsx(FNe,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:xt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function h8({className:e,...t}){return p.jsx(LNe,{"data-slot":"context-menu-separator",className:xt("bg-border -mx-1 my-1 h-px",e),...t})}const BNe=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:m,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:w,handleGitPull:x,handleGitCommit:_,handleGitPush:E,handleGitStatus:C})=>{const k=e.type==="folder",I=H=>{H.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(k?o(e):l(!n,e.id))},j=H=>{H.key==="Enter"?h():H.key==="Escape"&&d()},N=k?r?U8:pf:z8,P=k?r?"text-green-400":"text-yellow-400":"text-blue-400",L=p.jsxs(Wr,{className:xt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!k&&"cursor-pointer"),onClick:I,onDoubleClick:()=>!i&&!t&&o(e),children:[p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(kf,{checked:n,onCheckedChange:H=>l(!!H,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||k})}),p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(N,{className:xt("h-5 w-5",P)})}),p.jsx(Mn,{className:"py-1 px-2",children:t?p.jsx(kn,{ref:b,value:a,onChange:H=>v(H.target.value),onBlur:h,onKeyDown:j,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:H=>H.stopPropagation(),disabled:i}):p.jsx("span",{className:xt("truncate",k&&"cursor-pointer hover:underline"),title:e.name,onClick:H=>{k&&(H.stopPropagation(),o(e))},children:e.name})}),p.jsx(Mn,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?O0(e.size):""}),p.jsx(Mn,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),p.jsx(Mn,{className:"text-right pr-4 py-1",children:p.jsx("div",{className:xt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?p.jsxs(p.Fragment,{children:[p.jsx(Cn,{tooltipText:"Save (Enter)",onClick:H=>{H.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ga,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),p.jsx(Cn,{tooltipText:"Cancel (Esc)",onClick:H=>{H.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:p.jsx(Ii,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Cn,{tooltipText:"Rename",onClick:H=>{H.stopPropagation(),u(e)},"aria-label":"Rename",disabled:i||s,icon:p.jsx(Kg,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Cn,{tooltipText:k?"Download folder (.zip)":"Download file",onClick:H=>{H.stopPropagation(),m(e)},"aria-label":k?"Download folder as ZIP":"Download file",disabled:i,icon:p.jsx(uf,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Cn,{tooltipText:"Delete",onClick:H=>{H.stopPropagation(),g(e)},"aria-label":`Delete ${k?"folder":"file"}`,disabled:i,icon:p.jsx(Zi,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return k?p.jsxs(u8,{children:[p.jsx(d8,{disabled:t||i,asChild:!0,children:L}),p.jsxs(f8,{children:[p.jsx(ms,{onSelect:()=>o(e),disabled:t||i,children:"Open Folder"}),p.jsx(h8,{}),r?p.jsxs(p.Fragment,{children:[p.jsxs(ms,{onSelect:()=>x(e.path),disabled:i,children:[p.jsx(H8,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),p.jsxs(ms,{onSelect:()=>_(e.path),disabled:i,children:[p.jsx(V8,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),p.jsxs(ms,{onSelect:()=>E(e.path),disabled:i,children:[p.jsx(hA,{className:"mr-2 h-4 w-4"}),"Git Push"]}),p.jsxs(ms,{onSelect:()=>C(e.path),disabled:i,children:[p.jsx(mA,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):p.jsxs(ms,{onSelect:()=>w(e.path),disabled:i,children:[p.jsx(Pu,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),p.jsx(h8,{}),p.jsxs(ms,{onSelect:()=>u(e),disabled:i,children:[p.jsx(Kg,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(ms,{onSelect:()=>m(e),disabled:i,children:[p.jsx(uf,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),p.jsxs(ms,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[p.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):p.jsxs(u8,{children:[p.jsx(d8,{disabled:t||i,asChild:!0,children:L}),p.jsxs(f8,{children:[p.jsxs(ms,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),p.jsxs(ms,{onSelect:()=>u(e),disabled:i,children:[p.jsx(Kg,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(ms,{onSelect:()=>m(e),disabled:i,children:[p.jsx(uf,{className:"mr-2 h-4 w-4"}),"Download File"]}),p.jsxs(ms,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[p.jsx(Zi,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},$Ne=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:w,setNewFolderName:x,renameInputRef:_,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:I,handleGitCommit:j,handleGitPush:N,handleGitStatus:P})=>{const L=T.useMemo(()=>e,[e]);return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):p.jsx("div",{className:"relative h-full",children:p.jsxs(rd,{className:"w-full text-sm",children:[p.jsx(bm,{className:"sticky top-0 bg-card z-10",children:p.jsxs(Wr,{className:"hover:bg-card",children:[p.jsx(Nr,{className:"w-[40px] px-2"}),p.jsx(Nr,{className:"w-[40px] px-2"}),p.jsx(Nr,{children:"Name"}),p.jsx(Nr,{className:"w-[100px] text-right",children:"Size"}),p.jsx(Nr,{className:"w-[150px] text-right",children:"Modified"}),p.jsx(Nr,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),p.jsxs(ad,{children:[r&&p.jsx(sq,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s}),L.map(H=>{const M=t===H.path,K=i.has(H.id),U=C[H.path]??!1;return p.jsx(BNe,{entry:H,isEditingThis:M,isChecked:K,isGitRepo:U,newName:M?n:"",isOperationLoading:s,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:w,renameInputRef:_,handleGitInit:k,handleGitPull:I,handleGitCommit:j,handleGitPush:N,handleGitStatus:P},H.id)}),e.length===0&&!r&&!s&&p.jsx(Wr,{children:p.jsx(Mn,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},zNe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:s,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:u,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:w,archiveInputRef:x,handleFileChange:_,handleArchiveChange:E})=>p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:b,onChange:_,className:"hidden",multiple:!0,disabled:t}),p.jsx("input",{type:"file",ref:w,onChange:_,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),p.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:p.jsx($Z,{className:"h-4 w-4"})}),p.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:p.jsx(AZ,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),p.jsx("div",{className:"flex-grow"}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",p.jsx(It,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(g1,{className:"h-4 w-4"})}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(fA,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(B8,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(pf,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(hZ,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(Pu,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),p.jsxs(It,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(DK,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),Qq=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:s,isSubmitting:o,submitDisabled:l=!1,className:u,contentClassName:d})=>{const h=async m=>{m==null||m.preventDefault(),!(o||l)&&await s()};return p.jsx(P_,{open:e,onOpenChange:t,children:p.jsxs(F_,{className:xt(u),children:[p.jsxs(L_,{children:[p.jsx($_,{children:n}),r&&p.jsx(z_,{children:r})]}),p.jsx("div",{className:xt("py-4",d),children:a}),p.jsxs(B_,{children:[p.jsx(TEe,{asChild:!0,children:p.jsx(It,{variant:"outline",disabled:o,children:"Cancel"})}),p.jsxs(It,{onClick:h,disabled:o||l,children:[o&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":i]})]})]})})},UNe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:s,onSubmitClone:o,currentPath:l})=>p.jsx(Qq,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:p.jsxs(p.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",p.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:s,submitDisabled:!n.trim(),children:p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Wt,{htmlFor:"clone-url",className:"text-right",children:"URL"}),p.jsx(kn,{id:"clone-url",value:n,onChange:u=>r(u.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:s})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Wt,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),p.jsx(kn,{id:"clone-branch",value:a,onChange:u=>i(u.target.value),className:"col-span-3",placeholder:"main (default)",disabled:s})]})]})}),VNe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:s})=>p.jsx(Qq,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:p.jsxs(p.Fragment,{children:["Enter a commit message for the changes in ",p.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:s,isSubmitting:i,submitDisabled:!r.trim(),children:p.jsx("div",{className:"grid gap-4",children:p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Wt,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),p.jsx(kn,{id:"commit-msg",value:r,onChange:o=>a(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})});var tS="DropdownMenu",[HNe,lIe]=wi(tS,[J_]),Bi=J_(),[qNe,eG]=HNe(tS),tG=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=Bi(t),u=T.useRef(null),[d,h]=To({prop:a,defaultProp:i??!1,onChange:s,caller:tS});return p.jsx(qNe,{scope:t,triggerId:Ha(),triggerRef:u,contentId:Ha(),open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(m=>!m),[h]),modal:o,children:p.jsx(Nq,{...l,open:d,onOpenChange:h,dir:r,modal:o,children:n})})};tG.displayName=tS;var nG="DropdownMenuTrigger",rG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=eG(nG,n),s=Bi(n);return p.jsx(Rq,{asChild:!0,...s,children:p.jsx(an.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:gc(t,i.triggerRef),onPointerDown:qt(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:qt(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});rG.displayName=nG;var GNe="DropdownMenuPortal",aG=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Bi(t);return p.jsx(Iq,{...r,...n})};aG.displayName=GNe;var iG="DropdownMenuContent",sG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=eG(iG,n),i=Bi(n),s=T.useRef(!1);return p.jsx(jq,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:qt(e.onCloseAutoFocus,o=>{var l;s.current||(l=a.triggerRef.current)==null||l.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:qt(e.onInteractOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!a.modal||d)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sG.displayName=iG;var WNe="DropdownMenuGroup",KNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Dq,{...a,...r,ref:t})});KNe.displayName=WNe;var ZNe="DropdownMenuLabel",YNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Mq,{...a,...r,ref:t})});YNe.displayName=ZNe;var XNe="DropdownMenuItem",oG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Oq,{...a,...r,ref:t})});oG.displayName=XNe;var JNe="DropdownMenuCheckboxItem",QNe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Pq,{...a,...r,ref:t})});QNe.displayName=JNe;var eRe="DropdownMenuRadioGroup",tRe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Fq,{...a,...r,ref:t})});tRe.displayName=eRe;var nRe="DropdownMenuRadioItem",rRe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Lq,{...a,...r,ref:t})});rRe.displayName=nRe;var aRe="DropdownMenuItemIndicator",iRe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Bq,{...a,...r,ref:t})});iRe.displayName=aRe;var sRe="DropdownMenuSeparator",lG=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx($q,{...a,...r,ref:t})});lG.displayName=sRe;var oRe="DropdownMenuArrow",lRe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(zq,{...a,...r,ref:t})});lRe.displayName=oRe;var cRe="DropdownMenuSubTrigger",uRe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Uq,{...a,...r,ref:t})});uRe.displayName=cRe;var dRe="DropdownMenuSubContent",fRe=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Vq,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fRe.displayName=dRe;var hRe=tG,pRe=rG,mRe=aG,gRe=sG,yRe=oG,bRe=lG;function vRe({...e}){return p.jsx(hRe,{"data-slot":"dropdown-menu",...e})}function wRe({...e}){return p.jsx(pRe,{"data-slot":"dropdown-menu-trigger",...e})}function xRe({className:e,sideOffset:t=4,...n}){return p.jsx(mRe,{children:p.jsx(gRe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:xt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Qo({className:e,inset:t,variant:n="default",...r}){return p.jsx(yRe,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:xt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function p8({className:e,...t}){return p.jsx(bRe,{"data-slot":"dropdown-menu-separator",className:xt("bg-border -mx-1 my-1 h-px",e),...t})}const _Re=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:w,setNewFolderName:x,renameInputRef:_,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:I,handleGitCommit:j,handleGitPush:N,handleGitStatus:P})=>{const L=H=>{H.key==="Enter"?h():H.key==="Escape"&&d()};return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):p.jsxs("div",{className:"p-2 space-y-1",children:[r&&p.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:p.jsx(sq,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s,isMobile:!0})}),e.map(H=>{const M=t===H.path,K=i.has(H.id),U=C[H.path]??!1,se=H.type==="folder",ie=se?U?U8:pf:z8,re=se?U?"text-green-400":"text-yellow-400":"text-blue-400";return p.jsxs("div",{className:xt("flex items-center justify-between p-2 border rounded-md",M&&"bg-muted ring-1 ring-primary",s&&"opacity-70 cursor-not-allowed",!M&&"hover:bg-muted/50",!M&&"cursor-pointer"),onClick:()=>{M||s||(se?o(H):l(!K,H.id))},children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!se&&p.jsx(kf,{checked:K,onCheckedChange:X=>l(!!X,H.id),"aria-label":`Select ${H.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:s,onClick:X=>X.stopPropagation()}),se&&p.jsx("div",{className:"w-6 flex-shrink-0"}),p.jsx(ie,{className:xt("h-5 w-5 flex-shrink-0",re)}),p.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[M?p.jsx(kn,{ref:_,value:n,onChange:X=>w(X.target.value),onBlur:h,onKeyDown:L,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:X=>X.stopPropagation(),disabled:s}):p.jsx("span",{className:"text-sm font-medium truncate",title:H.name,children:H.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:H.type==="file"&&H.size!==void 0?O0(H.size):H.type==="folder"?U?"Git Repository":"Folder":""})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:M?p.jsxs(p.Fragment,{children:[p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:X=>{X.stopPropagation(),h()},disabled:s||!n.trim(),"aria-label":"Save name",children:s?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ga,{className:"h-4 w-4"})}),p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:X=>{X.stopPropagation(),d()},disabled:s,"aria-label":"Cancel edit",children:p.jsx(Ii,{className:"h-4 w-4"})})]}):p.jsxs(vRe,{children:[p.jsx(wRe,{asChild:!0,children:p.jsx(It,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:X=>X.stopPropagation(),disabled:s,"aria-label":"More actions",children:p.jsx(dZ,{className:"h-4 w-4"})})}),p.jsxs(xRe,{align:"end",onClick:X=>X.stopPropagation(),children:[se&&p.jsx(Qo,{onSelect:()=>o(H),children:"Open Folder"}),!se&&p.jsxs(Qo,{onSelect:()=>l(!K,H.id),children:[K?"Deselect":"Select"," File"]}),p.jsxs(Qo,{onSelect:()=>u(H),children:[p.jsx(Kg,{className:"mr-2 h-4 w-4"})," Rename"]}),p.jsxs(Qo,{onSelect:()=>v(H),children:[p.jsx(uf,{className:"mr-2 h-4 w-4"})," Download"," ",se?"as ZIP":""]}),se&&p.jsx(p8,{}),se&&U&&p.jsxs(p.Fragment,{children:[p.jsxs(Qo,{onSelect:()=>I(H.path),children:[p.jsx(H8,{className:"mr-2 h-4 w-4"})," Git Pull"]}),p.jsxs(Qo,{onSelect:()=>j(H.path),children:[p.jsx(V8,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),p.jsxs(Qo,{onSelect:()=>N(H.path),children:[p.jsx(hA,{className:"mr-2 h-4 w-4"})," Git Push"]}),p.jsxs(Qo,{onSelect:()=>P(H.path),children:[p.jsx(mA,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),se&&!U&&p.jsxs(Qo,{onSelect:()=>k(H.path),children:[p.jsx(Pu,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),p.jsx(p8,{}),p.jsxs(Qo,{className:"text-red-600 focus:text-red-600",onSelect:()=>b(H),children:[p.jsx(Zi,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},H.id)}),e.length===0&&!r&&!s&&p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},h3=T.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:s,createDirectory:o,uploadFiles:l,deleteNodes:u,renameNode:d,setCurrentPath:h,rootId:m,selectFile:g,deselectFile:v,selectedFileIds:b,vfsKey:w,configuredVfsKey:x,initializingKey:_,_setError:E,_setOperationLoading:C,findNodeByPath:k,initializeVFS:I}=xl(sn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[j,N]=T.useState(""),[P,L]=T.useState(null),[H,M]=T.useState(!1),[K,U]=T.useState(""),[se,ie]=T.useState({}),[re,X]=T.useState(!1),[ne,q]=T.useState(""),[J,Q]=T.useState(""),[te,ue]=T.useState(!1),[ge,Ie]=T.useState(!1),[Ae,_e]=T.useState(null),[ve,Be]=T.useState(""),[nt,Ve]=T.useState(!1),[De,$]=T.useState({}),Ee=T.useRef(null),Te=T.useRef(null),fe=T.useRef(null),oe=T.useRef(null),ee=T.useRef(null),Se=n?e[n]:null,Pe=Se?Se.path:"/",We=(t[n||m||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,Rt)=>ut.type==="folder"&&Rt.type==="file"?-1:ut.type==="file"&&Rt.type==="folder"?1:ut.name.localeCompare(Rt.name)),Nt=T.useMemo(()=>We.filter(ut=>ut.type==="folder").map(ut=>ut.path),[We]),it=r||_!==null||w!==x,Et=a||te||nt||Object.values(De).some(Boolean);T.useEffect(()=>{n!==null&&!t[n]&&!it&&x===w?s(n):n===null&&m&&!t[m]&&!it&&x===w&&s(m)},[n,t,m,it,s,x,w]),T.useEffect(()=>{var ut,Rt;P&&((ut=oe.current)==null||ut.focus(),(Rt=oe.current)==null||Rt.select())},[P]),T.useEffect(()=>{var ut;H&&((ut=ee.current)==null||ut.focus())},[H]),T.useEffect(()=>{(async()=>{if(it||Nt.length===0)return;const Rt={};let Lt=!1;for(const en of Nt)try{const In=await kde(en);se[en]!==In&&(Rt[en]=In,Lt=!0)}catch(In){console.error(`Error checking git status for ${en}:`,In),se[en]!==!1&&(Rt[en]=!1,Lt=!0)}Lt&&ie(en=>({...en,...Rt}))})()},[Nt,it,se]);const Ft=T.useCallback(async(ut,Rt)=>{if(!(Et||it)){Rt!==!1&&C(!0),E(null);try{await ut()}catch(Lt){console.error("[FileManager Operation Error]:",Lt)}finally{Rt!==!1&&C(!1)}}},[Et,it,E,C]),Mt=T.useCallback(ut=>{Et||it||P||ut.type==="folder"&&Ft(()=>h(ut.path),!1)},[Et,it,P,h,Ft]),Yt=T.useCallback(()=>{if(Et||it||Pe==="/")return;const ut=r_(Pe);Ft(()=>h(ut),!1)},[Et,it,Pe,h,Ft]),be=T.useCallback(()=>{Et||it||Pe==="/"||Ft(()=>h("/"),!1)},[Et,it,Pe,h,Ft]),D=T.useCallback(()=>{it||Ft(()=>s(n),!1)},[Ft,s,n,it]),W=T.useCallback((ut,Rt)=>{const Lt=e[Rt];Lt&&Lt.type==="file"?ut?g(Rt):v(Rt):Lt&&Lt.type==="folder"&&qe.info("Folders cannot be attached to the prompt.")},[g,v,e]),he=T.useCallback(ut=>{Et||it||H||(L(ut.path),N(ut.name),M(!1))},[Et,it,H]),je=T.useCallback(()=>{L(null),N("")},[]),we=T.useCallback(async()=>{if(!P||!j.trim()){je();return}const ut=k(P);ut&&ut.name!==j.trim()&&await Ft(()=>d(ut.id,j.trim())),je()},[P,j,d,je,k,Ft]),Ne=T.useCallback(()=>{Et||it||P||(M(!0),U(""),L(null))},[Et,it,P]),ce=T.useCallback(()=>{M(!1),U("")},[]),ft=T.useCallback(async()=>{if(!K.trim()){ce();return}await Ft(()=>o(n,K.trim())),ce()},[K,o,n,ce,Ft]),vt=()=>{var ut;return(ut=Ee.current)==null?void 0:ut.click()},F=()=>{var ut;return(ut=Te.current)==null?void 0:ut.click()},Le=()=>{var ut;return(ut=fe.current)==null?void 0:ut.click()},tt=T.useCallback(async ut=>{const Rt=ut.target.files;Rt&&Rt.length>0&&(await Ft(()=>l(n,Rt)),ut.target&&(ut.target.value=""))},[l,n,Ft]),ye=T.useCallback(async ut=>{var Lt;const Rt=(Lt=ut.target.files)==null?void 0:Lt[0];Rt&&(await Ft(async()=>{await Rde(Rt,Pe),await s(n)}),ut.target&&(ut.target.value=""))},[Pe,s,n,Ft]),Me=T.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ft(()=>u([ut.id]))},[u,Ft]),Ke=T.useCallback(async ut=>{await Ft(async()=>{ut.type==="file"?await Nde(ut.path):await bM(`${ut.name}.zip`,ut.path)})},[Ft]),Dt=T.useCallback(async()=>{We.length!==0&&await Ft(async()=>{const ut=Sa(Pe)||"root";await bM(`${ut}_export.zip`,Pe)})},[Pe,We.length,Ft]),me=T.useCallback(async(ut,Rt)=>{if(!(De[ut]||it||a)){$(Lt=>({...Lt,[ut]:!0})),E(null);try{await Rt()}catch(Lt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Lt)}finally{$(Lt=>({...Lt,[ut]:!1}))}}},[E,De,it,a]),G=T.useCallback(ut=>{me(ut,async()=>{await NB(ut),ie(Rt=>({...Rt,[ut]:!0}))})},[me]),V=T.useCallback(ut=>{qe.info("Pulling default branch (auth not implemented yet)..."),me(ut,()=>c_(ut,"main"))},[me]),Z=T.useCallback(ut=>{_e(ut),Be(""),Ie(!0)},[]),pe=T.useCallback(ut=>{qe.info("Pushing default branch (auth not implemented yet)..."),me(ut,()=>RN(ut,"main"))},[me]),Re=T.useCallback(ut=>{me(ut,()=>RB(ut))},[me]),Ue=T.useCallback(()=>{q(""),Q(""),X(!0)},[]),pt=T.useCallback(async()=>{if(!ne.trim()){qe.error("Repository URL cannot be empty.");return}ue(!0),E(null);try{const ut=Sa(ne.trim().replace(/\.git$/,""))||"cloned_repo",Rt=sk(Pe,ut);await AB(Rt,ne.trim(),J.trim()||void 0),X(!1),await D()}catch{}finally{ue(!1)}},[ne,J,Pe,E,D]),Zt=T.useCallback(async()=>{if(!Ae||!ve.trim()){qe.error("Commit message cannot be empty.");return}Ve(!0),E(null);try{await NN(Ae,ve.trim()),Ie(!1)}catch{}finally{Ve(!1)}},[Ae,ve,E]);return it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[p.jsx(Fn,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:_?`Initializing filesystem: ${_}`:"Loading filesystem..."}),i&&p.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[p.jsxs("p",{children:["Error loading filesystem: ",i]}),p.jsx(It,{variant:"outline",size:"sm",onClick:()=>I(w||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):p.jsxs("div",{className:xt("flex h-full flex-col bg-card text-card-foreground"),children:[p.jsx(zNe,{currentPath:Pe,isAnyLoading:Et||it,isOperationLoading:a,entries:We,editingPath:P,creatingFolder:H,handleNavigateHome:be,handleNavigateUp:Yt,handleRefresh:D,startCreatingFolder:Ne,handleUploadClick:vt,handleFolderUploadClick:F,handleArchiveUploadClick:Le,handleDownloadAll:Dt,handleCloneClick:Ue,fileInputRef:Ee,folderInputRef:Te,archiveInputRef:fe,handleFileChange:tt,handleArchiveChange:ye}),p.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:p.jsx($Ne,{entries:We,editingPath:P,newName:j,creatingFolder:H,newFolderName:K,selectedFileIds:b,isOperationLoading:Et,handleNavigate:Mt,handleCheckboxChange:W,startEditing:he,cancelEditing:je,handleRename:we,cancelCreatingFolder:ce,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Me,setNewName:N,setNewFolderName:U,renameInputRef:oe,newFolderInputRef:ee,gitRepoStatus:se,handleGitInit:G,handleGitPull:V,handleGitCommit:Z,handleGitPush:pe,handleGitStatus:Re})}),p.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:p.jsx(_Re,{entries:We,editingPath:P,newName:j,creatingFolder:H,newFolderName:K,selectedFileIds:b,isOperationLoading:Et,handleNavigate:Mt,handleCheckboxChange:W,startEditing:he,cancelEditing:je,handleRename:we,cancelCreatingFolder:ce,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Me,setNewName:N,setNewFolderName:U,renameInputRef:oe,newFolderInputRef:ee,gitRepoStatus:se,handleGitInit:G,handleGitPull:V,handleGitCommit:Z,handleGitPush:pe,handleGitStatus:Re})}),p.jsx(UNe,{isOpen:re,onOpenChange:X,cloneRepoUrl:ne,setCloneRepoUrl:q,cloneBranch:J,setCloneBranch:Q,isCloning:te,onSubmitClone:pt,currentPath:Pe}),p.jsx(VNe,{isOpen:ge,onOpenChange:Ie,commitPath:Ae,commitMessage:ve,setCommitMessage:Be,isCommitting:nt,onSubmitCommit:Zt})]})});h3.displayName="FileManager";const SRe=({vfsKey:e,selectedItemType:t})=>e==="orphan"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(TT,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Shared VFS:"})," All chats ",p.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(TT,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(pf,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,ERe=()=>{const{isVfsModalOpen:e,toggleVfsModal:t}=Ji(sn(d=>({isVfsModalOpen:d.isVfsModalOpen,toggleVfsModal:d.toggleVfsModal}))),{vfsKey:n,selectedFileIds:r,clearSelection:a,nodes:i}=xl(sn(d=>({vfsKey:d.vfsKey,selectedFileIds:d.selectedFileIds,clearSelection:d.clearSelection,nodes:d.nodes}))),s=mn(d=>d.selectedItemType),o=vc.getState().addAttachedFile,l=()=>{if(r.size===0){qe.info("No files selected in VFS to attach.");return}let d=0;r.forEach(h=>{const m=i[h];m&&m.type==="file"&&(o({source:"vfs",name:m.name,type:m.mimeType||"application/octet-stream",size:m.size,path:m.path}),d++)}),d>0?(qe.success(`Attached ${d} file(s) from VFS to the next prompt.`),a(),t(!1)):qe.warning("No valid files were selected to attach.")},u=()=>{a(),t(!1)};return p.jsx(P_,{open:e,onOpenChange:u,children:p.jsxs(F_,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[p.jsxs(L_,{className:"p-4 pb-2 border-b flex-shrink-0",children:[p.jsx($_,{children:"Virtual Filesystem"}),p.jsx(z_,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),p.jsx(SRe,{vfsKey:n,selectedItemType:s})]}),p.jsx("div",{className:"flex-grow overflow-hidden",children:p.jsx(h3,{})}),p.jsxs(B_,{className:"p-4 pt-2 border-t flex-shrink-0",children:[p.jsx(It,{variant:"outline",onClick:u,children:"Close"}),p.jsxs(It,{onClick:l,disabled:r.size===0,children:[p.jsx(gA,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r.size,")"]})]})]})})};function CRe(){const e=Ir.getState().registerPromptControl,t=Ir.getState().registerChatControl;e({id:"core-vfs-prompt-trigger",show:()=>xl.getState().enableVfs,triggerRenderer:()=>gt.createElement(OAe)}),t({id:"core-vfs-modal-panel",panel:void 0,show:()=>Ji.getState().isVfsModalOpen,renderer:()=>gt.createElement(ERe),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control (Prompt Trigger & Modal)")}const TRe=()=>{const{linkConversationToRepo:e,syncConversation:t}=mn(sn(L=>({linkConversationToRepo:L.linkConversationToRepo,syncConversation:L.syncConversation}))),[n,r]=T.useState(()=>mn.getState().selectedItemId),[a,i]=T.useState(()=>mn.getState().selectedItemType),[s,o]=T.useState(()=>mn.getState().syncRepos),[l,u]=T.useState(()=>mn.getState().conversationSyncStatus),[d,h]=T.useState(()=>On.getState().status==="streaming"),[m,g]=T.useState(null),[v,b]=T.useState("idle"),[w,x]=T.useState(!1),[_,E]=T.useState(!1);T.useEffect(()=>{const L=ie=>{r(ie.selectedItemId),i(ie.selectedItemType)},H=()=>{o(mn.getState().syncRepos)},M=ie=>{u(re=>({...re,[ie.conversationId]:ie.status}))},K=ie=>{h(ie.status==="streaming")},U=ie=>{ie.conversationId===n&&ie.updates.syncRepoId!==void 0&&g(ie.updates.syncRepoId)},se=mn.getState();return r(se.selectedItemId),i(se.selectedItemType),o(se.syncRepos),u(se.conversationSyncStatus),Ct.on(St.CONTEXT_CHANGED,L),Ct.on(St.SYNC_REPO_CHANGED,H),Ct.on(St.CONVERSATION_SYNC_STATUS_CHANGED,M),Ct.on(St.INTERACTION_STATUS_CHANGED,K),Ct.on(St.CONVERSATION_UPDATED,U),()=>{Ct.off(St.CONTEXT_CHANGED,L),Ct.off(St.SYNC_REPO_CHANGED,H),Ct.off(St.CONVERSATION_SYNC_STATUS_CHANGED,M),Ct.off(St.INTERACTION_STATUS_CHANGED,K),Ct.off(St.CONVERSATION_UPDATED,U)}},[n]),T.useEffect(()=>{if(a==="conversation"&&n){const L=mn.getState().getConversationById(n);g((L==null?void 0:L.syncRepoId)??null),b(l[n]??"idle")}else g(null),b("idle")},[n,a,l]);const C=gt.useMemo(()=>new Map(s.map(L=>[L.id,L.name])),[s]),k=m?C.get(m):void 0,I=T.useCallback(async L=>{if(!n||a!=="conversation")return;x(!0),await e(n,L==="none"?null:L),x(!1)},[n,a,e]),j=T.useCallback(async()=>{!n||!m||(E(!0),await t(n),E(!1))},[n,m,t]),N=gV(v,k),P=!m||_||w||d||v==="syncing";return a!=="conversation"||s.length===0?null:p.jsxs(Mc,{children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oc,{asChild:!0,children:p.jsx(It,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||w||_,"aria-label":"Configure Git Sync",children:v==="syncing"||_||w?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Pu,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:m?`Sync Status: ${v}`:"Link to Sync Repo"})]})}),p.jsxs(Pc,{className:"w-64 p-4 space-y-3",align:"start",children:[p.jsx(Wt,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),p.jsxs(fc,{value:m??"none",onValueChange:I,disabled:w||_||d,children:[p.jsx(pc,{id:"sync-repo-select",className:"w-full h-9",children:p.jsx(hc,{placeholder:"Select repository..."})}),p.jsxs(mc,{children:[p.jsx(_a,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map(L=>p.jsx(_a,{value:L.id,children:L.name},L.id))]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",N||"Not Linked"]}),p.jsxs(It,{size:"sm",variant:"outline",onClick:j,disabled:P,className:"h-8",children:[_||v==="syncing"?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(hA,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function kRe(){const e=Ir.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>gt.createElement(TRe)}),console.log("[Function] Registered Core Git Sync Control")}const ARe=z.object({path:z.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),NRe=z.object({path:z.string().describe("The path of the file to read within the VFS."),encoding:z.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),RRe=z.object({path:z.string().describe("The path where the file should be written."),content:z.string().describe("The content to write to the file."),encoding:z.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),IRe=z.object({path:z.string().describe("The path of the file or directory to delete."),recursive:z.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),jRe=z.object({path:z.string().describe("The path of the directory to create (including parents).")}),DRe=z.object({oldPath:z.string().describe("The current path of the item to rename."),newName:z.string().describe("The new name for the item.")});function MRe(){const e=Ir.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:ARe},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=tr(o||"/");try{const h=await IN(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(m=>({name:m.name,type:m.isDirectory?"folder":"file",size:m.size,lastModified:m.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:NRe},async({path:o,encoding:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=tr(o);try{const m=await qf(h,{fsInstance:d});let g;return l==="base64"?g=btoa(String.fromCharCode(...m)):g=new TextDecoder().decode(m),{success:!0,path:h,content:g,encoding:l}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:RRe},async({path:o,content:l,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=tr(o);try{let g;if(u==="base64"){const v=atob(l),b=v.length,w=new Uint8Array(b);for(let x=0;x<b;x++)w[x]=v.charCodeAt(x);g=w}else g=l;return await u_(m,g,{fsInstance:h}),{success:!0,path:m}}catch(g){return{success:!1,path:m,error:g.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:IRe},async({path:o,recursive:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=tr(o);try{return await jN(h,l,{fsInstance:d}),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:jRe},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=tr(o);try{return await IB(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:DRe},async({oldPath:o,newName:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=tr(o),m=tr(h.substring(0,h.lastIndexOf("/"))||"/"),g=vl(m,l);try{return await DB(h,g,{fsInstance:d}),{success:!0,oldPath:h,newPath:g}}catch(v){return{success:!1,oldPath:h,newName:l,error:v.message}}}),console.log("[Function] Core VFS Tools Registered.")}const ORe=z.object({path:z.string().describe("The directory path within the VFS to initialize as a Git repository.")}),PRe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to commit."),message:z.string().describe("The commit message.")}),FRe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:z.string().optional().describe("The branch name to pull.")}),LRe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to push."),branch:z.string().optional().describe("The branch name to push.")}),BRe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to check status.")});function $Re(){const e=Ir.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:ORe},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await NB(s,{fsInstance:l}),{success:!0,message:`Repository initialized at ${s}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:PRe},async({path:s,message:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=rr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await NN(s,o,{fsInstance:u}),{success:!0,message:`Changes committed in ${s}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:FRe},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await c_(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:LRe},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await RN(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:BRe},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await RB(s,{fsInstance:l}),{success:!0,message:`Status checked for ${s}`}}catch(u){return{success:!1,error:u.message}}}),console.log("[Function] Core Git Tools Registered.")}const zRe=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:s})=>{const o=Ir(_=>_.tools),l=rr(_=>_.toolMaxSteps),[u,d]=T.useState(""),h=T.useMemo(()=>Object.entries(o).map(([_,{definition:E,modId:C}])=>({name:_,description:E.description??"No description provided.",modId:C})).sort((_,E)=>_.name.localeCompare(E.name)),[o]),m=T.useMemo(()=>{const _=u.trim().toLowerCase();return _?h.filter(E=>E.name.toLowerCase().includes(_)||E.description.toLowerCase().includes(_)||E.modId.toLowerCase().includes(_)):h},[h,u]),g=T.useCallback((_,E)=>{n(C=>{const k=new Set(C);return E?k.add(_):k.delete(_),k})},[n]),v=T.useCallback(_=>{n(()=>_?new Set(h.map(E=>E.name)):new Set)},[h,n]),b=_=>{const E=_.target.value;if(E===""){a(null);return}const C=parseInt(E,10);if(isNaN(C))a(null);else{const k=Math.max(1,Math.min(20,C));a(k)}},w=r===null?"":String(r),x=s!=="conversation"||!i;return p.jsxs("div",{className:xt("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[p.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),p.jsxs("div",{className:"relative",children:[p.jsx(Qi,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(kn,{type:"search",placeholder:"Filter tools...",value:u,onChange:_=>d(_.target.value),className:"pl-8 h-9",disabled:x})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs(Wt,{className:"text-xs text-muted-foreground",children:[m.length," tools shown (",t.size," enabled)"]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx(It,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:x||h.length===0,children:"Enable All"}),p.jsx(It,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:x||h.length===0||t.size===0,children:"Disable All"})]})]}),p.jsx(wl,{className:"h-56 border rounded-md p-2 bg-background/50",children:x?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(_=>p.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[p.jsx(qs,{id:`tool-switch-${_.name}`,checked:t.has(_.name),onCheckedChange:E=>g(_.name,E),className:"flex-shrink-0",disabled:x}),p.jsxs(Wt,{htmlFor:`tool-switch-${_.name}`,className:xt("text-sm font-normal flex-grow pl-2 space-y-0.5",x?"cursor-not-allowed":"cursor-pointer"),title:`${_.name} (from ${_.modId})`,children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:_.description})]})]},_.name))})}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Wt,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),p.jsx(kn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:w,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:x}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let ju=new Set,ic=null,Gg=()=>{};const URe=()=>{const[e,t]=T.useState({enabledTools:ju,maxStepsOverride:ic}),[n,r]=T.useState(e.maxStepsOverride),[a,i]=T.useState(!1),[s,o]=T.useState(()=>On.getState().status==="streaming"),[l,u]=T.useState(!0),[d,h]=T.useState(()=>mn.getState().selectedItemType),[m,g]=T.useState(()=>mn.getState().selectedItemId),v=Object.keys(Ir.getState().tools).length;T.useEffect(()=>(Gg=E=>{const C=E({enabledTools:ju,maxStepsOverride:ic});ju=C.enabledTools,ic=C.maxStepsOverride,t(C)},t({enabledTools:ju,maxStepsOverride:ic}),()=>{Gg=()=>{}}),[]),T.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),T.useEffect(()=>{const E=I=>{o(I.status==="streaming")},C=I=>{var L,H;if(!I.modelId){u(!1);return}const{getSelectedModel:j}=Un.getState(),N=j(),P=Object.keys(Ir.getState().tools).length>0;u(P&&(((H=(L=N==null?void 0:N.metadata)==null?void 0:L.supported_parameters)==null?void 0:H.includes("tools"))??!1))},k=I=>{h(I.selectedItemType),g(I.selectedItemId)};return C({modelId:Un.getState().selectedModelId}),k({selectedItemId:mn.getState().selectedItemId,selectedItemType:mn.getState().selectedItemType}),Ct.on(St.INTERACTION_STATUS_CHANGED,E),Ct.on(St.MODEL_SELECTION_CHANGED,C),Ct.on(St.CONTEXT_CHANGED,k),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,E),Ct.off(St.MODEL_SELECTION_CHANGED,C),Ct.off(St.CONTEXT_CHANGED,k)}},[]);const b=E=>{i(E),!E&&n!==e.maxStepsOverride&&Gg(C=>({...C,maxStepsOverride:n}))},w=T.useCallback(E=>{Gg(C=>({...C,enabledTools:E(C.enabledTools)}))},[]),x=e.enabledTools.size>0||e.maxStepsOverride!==null,_=s||v===0||d!=="conversation";return l?p.jsxs(Mc,{open:a,onOpenChange:b,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oc,{asChild:!0,children:p.jsx(It,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:_,"aria-label":"Configure Tools",children:p.jsx(vA,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:_?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),p.jsx(Pc,{className:"w-auto p-0",align:"start",children:p.jsx(zRe,{enabledTools:e.enabledTools,setEnabledTools:w,localMaxSteps:n,setLocalMaxSteps:r,conversationId:m,conversationType:d})})]}):null};function VRe(){const e=Ir.getState().registerPromptControl;ju=new Set,ic=null,e({id:"core-tool-selector",triggerRenderer:()=>gt.createElement(URe),getMetadata:()=>{if(ju.size>0||ic!==null)return{enabledTools:Array.from(ju),...ic!==null&&{maxSteps:ic}}},clearOnSubmit:()=>{ju=new Set,ic=null,Gg(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}const HRe=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:s})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),p.jsx(bd,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:o=>t(o.target.value||null),rows:6,disabled:s,className:"mt-1"}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:s||e===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{children:[p.jsx(Wt,{children:"Default Model (Overrides Parent/Global)"}),p.jsx(G_,{value:n??i,onChange:r,disabled:s}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:s||n===null,children:"Use Inherited/Default"})]})]}),qRe=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:m,setLocalTemp:g,localTopP:v,setLocalTopP:b,localPresence:w,setLocalPresence:x,localFrequency:_,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:k,effectiveTopP:I,effectiveTopK:j,effectivePresencePenalty:N,effectiveFrequencyPenalty:P,isSaving:L})=>{const H=T.useCallback((K,U)=>{const se=U.target.value,ie=se===""?null:parseInt(se,10);(se===""||!isNaN(ie)&&ie!==null)&&K(ie)},[]),M=T.useCallback((K,U)=>{K(U[0])},[]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),p.jsx(ul,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:K=>g(K[0]),onValueCommit:K=>M(t,K),disabled:L}),p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:L||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),p.jsx(ul,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:K=>b(K[0]),onValueCommit:K=>M(i,K),disabled:L}),p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:L||a===null,children:["Use Inherited/Default (",(I==null?void 0:I.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(kn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:K=>H(r,K),min:"1",className:"h-8 text-xs",disabled:L}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:L||n===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Wt,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),p.jsx(kn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${j??"Default"}`,value:s??"",onChange:K=>H(o,K),min:"1",className:"h-8 text-xs",disabled:L}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>o(null),disabled:L||s===null,children:"Use Inherited/Default"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",w.toFixed(2),")"]}),p.jsx(ul,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[w],onValueChange:K=>x(K[0]),onValueCommit:K=>M(u,K),disabled:L}),p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>u(null),disabled:L||l===null,children:["Use Inherited/Default (",(N==null?void 0:N.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Wt,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",_.toFixed(2),")"]}),p.jsx(ul,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:K=>E(K[0]),onValueCommit:K=>M(h,K),disabled:L}),p.jsxs(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:L||d===null,children:["Use Inherited/Default (",(P==null?void 0:P.toFixed(2))??"N/A",")"]})]})]})},GRe=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var s;const i=((s=r.find(o=>o.id===n))==null?void 0:s.name)??"None";return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(Wt,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),p.jsxs(fc,{value:e??"none",onValueChange:o=>t(o==="none"?null:o),disabled:a||r.length===0,children:[p.jsx(pc,{id:"project-sync-repo",children:p.jsx(hc,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),p.jsxs(mc,{children:[p.jsx(_a,{value:"none",children:p.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(o=>p.jsx(_a,{value:o.id,children:o.name},o.id))]})]}),p.jsx(It,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},WRe=({projectId:e})=>{const t=T.useMemo(()=>[{value:"manage",label:"Manage Files",content:p.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?p.jsx(h3,{}):p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Wt,{children:"Project Filesystem Info"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),p.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",p.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),p.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[p.jsx(Wt,{className:"text-destructive",children:"Danger Zone"}),p.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return p.jsx(Fc,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:xt("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},KRe=({allRules:e,selectedRuleIds:t,onSelectionChange:n,disabled:r=!1})=>{const[a,i]=T.useState(""),s=T.useMemo(()=>{const o=a.toLowerCase();return o?e.filter(l=>l.name.toLowerCase().includes(o)||l.content.toLowerCase().includes(o)||l.type.toLowerCase().includes(o)):e},[e,a]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Qi,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(kn,{type:"search",placeholder:"Filter rules...",value:a,onChange:o=>i(o.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(wl,{className:"h-48 border rounded-md p-2 bg-background/50",children:s.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No rules defined globally.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:s.map(o=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(kf,{id:`project-default-rule-${o.id}`,checked:t.has(o.id),onCheckedChange:l=>n(o.id,!!l),className:"mt-0.5",disabled:r}),p.jsxs(Wt,{htmlFor:`project-default-rule-${o.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:o.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",o.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",o.content]})]})]})},o.id))})})]})},ZRe=({defaultRuleIds:e,setDefaultRuleIds:t,isSaving:n})=>{const r=Zs(s=>s.rules),a=T.useMemo(()=>new Set(e??[]),[e]),i=T.useCallback((s,o)=>{const l=new Set(a);o?l.add(s):l.delete(s);const u=Array.from(l);t(u.length>0?u:null)},[a,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx(Wt,{children:"Default Rules for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select rules that will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(KRe,{allRules:r,selectedRuleIds:a,onSelectionChange:i,disabled:n})]})},YRe=({allTags:e,selectedTagIds:t,onSelectionChange:n,disabled:r=!1})=>{const[a,i]=T.useState(""),s=Zs(l=>l.getRulesForTag),o=T.useMemo(()=>{const l=a.toLowerCase();return l?e.filter(u=>{var d;return u.name.toLowerCase().includes(l)||((d=u.description)==null?void 0:d.toLowerCase().includes(l))}):e},[e,a]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Qi,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(kn,{type:"search",placeholder:"Filter tags...",value:a,onChange:l=>i(l.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(wl,{className:"h-48 border rounded-md p-2 bg-background/50",children:o.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No tags defined globally.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:o.map(l=>{const u=s(l.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(kf,{id:`project-default-tag-${l.id}`,checked:t.has(l.id),onCheckedChange:d=>n(l.id,!!d),className:"mt-0.5",disabled:r}),p.jsxs(Wt,{htmlFor:`project-default-tag-${l.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:l.name}),l.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:l.description}),u.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",u.map(d=>d.name).join(", ")]})]})]})},l.id)})})})]})},XRe=({defaultTagIds:e,setDefaultTagIds:t,isSaving:n})=>{const r=Zs(s=>s.tags),a=T.useMemo(()=>new Set(e??[]),[e]),i=T.useCallback((s,o)=>{const l=new Set(a);o?l.add(s):l.delete(s);const u=Array.from(l);t(u.length>0?u:null)},[a,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx(Wt,{children:"Default Tags for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select tags whose rules will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(YRe,{allTags:r,selectedTagIds:a,onSelectionChange:i,disabled:n})]})},JRe=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=hi(sn($=>({getProjectById:$.getProjectById,updateProject:$.updateProject}))),i=hi($=>$.getEffectiveProjectSettings),s=mn($=>$.syncRepos),o=rr(sn($=>({globalSystemPrompt:$.globalSystemPrompt,temperature:$.temperature,maxTokens:$.maxTokens,topP:$.topP,topK:$.topK,presencePenalty:$.presencePenalty,frequencyPenalty:$.frequencyPenalty}))),l=Un($=>$.selectedModelId),u=xl($=>$.setVfsKey),[d,h]=T.useState(null),[m,g]=T.useState(null),[v,b]=T.useState(null),[w,x]=T.useState(null),[_,E]=T.useState(null),[C,k]=T.useState(null),[I,j]=T.useState(null),[N,P]=T.useState(null),[L,H]=T.useState(null),[M,K]=T.useState(null),[U,se]=T.useState(null),[ie,re]=T.useState(.7),[X,ne]=T.useState(1),[q,J]=T.useState(0),[Q,te]=T.useState(0),[ue,ge]=T.useState(!1),[Ie,Ae]=T.useState("prompt"),{project:_e,effectiveSettings:ve}=T.useMemo(()=>{const $=n?r(n):null,Ee=n?i(n):null;return{project:$,effectiveSettings:Ee}},[n,r,i]),Be=T.useCallback($=>{var Te;if(!$)return null;const Ee=r($);return Ee?((Te=Ee.metadata)==null?void 0:Te.syncRepoId)!==void 0?Ee.metadata.syncRepoId:Be(Ee.parentId):null},[r]),nt=n?Be(n):null;T.useEffect(()=>{var $;e&&n&&_e&&ve?(u(n),h(_e.systemPrompt??null),g(_e.modelId??null),b(_e.temperature??null),x(_e.maxTokens??null),E(_e.topP??null),k(_e.topK??null),j(_e.presencePenalty??null),P(_e.frequencyPenalty??null),H((($=_e.metadata)==null?void 0:$.syncRepoId)??null),K(_e.defaultTagIds??null),se(_e.defaultRuleIds??null),re(ve.temperature??o.temperature),ne(ve.topP??o.topP??1),J(ve.presencePenalty??o.presencePenalty??0),te(ve.frequencyPenalty??o.frequencyPenalty??0),Ae("prompt")):e||(u(null),h(null),g(null),b(null),x(null),E(null),k(null),j(null),P(null),H(null),K(null),se(null))},[e,n,_e,ve,o,u]),T.useEffect(()=>re(v??(ve==null?void 0:ve.temperature)??o.temperature),[v,ve,o.temperature]),T.useEffect(()=>ne(_??(ve==null?void 0:ve.topP)??o.topP??1),[_,ve,o.topP]),T.useEffect(()=>J(I??(ve==null?void 0:ve.presencePenalty)??o.presencePenalty??0),[I,ve,o.presencePenalty]),T.useEffect(()=>te(N??(ve==null?void 0:ve.frequencyPenalty)??o.frequencyPenalty??0),[N,ve,o.frequencyPenalty]);const Ve=async()=>{if(!(!n||!_e)){ge(!0);try{const $=_e.parentId?i(_e.parentId):{systemPrompt:o.globalSystemPrompt,modelId:l,temperature:o.temperature,maxTokens:o.maxTokens,topP:o.topP,topK:o.topK,presencePenalty:o.presencePenalty,frequencyPenalty:o.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null},Ee=_e.parentId?Be(_e.parentId):null,Te={},fe={..._e.metadata??{}};d!==$.systemPrompt?Te.systemPrompt=d:Te.systemPrompt=void 0,m!==$.modelId?Te.modelId=m:Te.modelId=void 0,v!==$.temperature?Te.temperature=v:Te.temperature=void 0,w!==$.maxTokens?Te.maxTokens=w:Te.maxTokens=void 0,_!==$.topP?Te.topP=_:Te.topP=void 0,C!==$.topK?Te.topK=C:Te.topK=void 0,I!==$.presencePenalty?Te.presencePenalty=I:Te.presencePenalty=void 0,N!==$.frequencyPenalty?Te.frequencyPenalty=N:Te.frequencyPenalty=void 0,L!==Ee?fe.syncRepoId=L:delete fe.syncRepoId,JSON.stringify(M)!==JSON.stringify($.defaultTagIds)?Te.defaultTagIds=M:Te.defaultTagIds=void 0,JSON.stringify(U)!==JSON.stringify($.defaultRuleIds)?Te.defaultRuleIds=U:Te.defaultRuleIds=void 0,Te.metadata=fe,await a(n,Te),qe.success(`Project "${_e.name}" settings updated.`),t()}catch($){qe.error("Failed to save project settings."),console.error("Failed to save project settings:",$)}finally{ge(!1)}}},De=T.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:p.jsx(HRe,{systemPrompt:d,setSystemPrompt:h,modelId:m,setModelId:g,effectiveSystemPrompt:(ve==null?void 0:ve.systemPrompt)??o.globalSystemPrompt,effectiveModelId:(ve==null?void 0:ve.modelId)??l,isSaving:ue})},{value:"params",label:"Parameters",content:p.jsx(qRe,{temperature:v,setTemperature:b,maxTokens:w,setMaxTokens:x,topP:_,setTopP:E,topK:C,setTopK:k,presencePenalty:I,setPresencePenalty:j,frequencyPenalty:N,setFrequencyPenalty:P,localTemp:ie,setLocalTemp:re,localTopP:X,setLocalTopP:ne,localPresence:q,setLocalPresence:J,localFrequency:Q,setLocalFrequency:te,effectiveTemperature:(ve==null?void 0:ve.temperature)??o.temperature,effectiveMaxTokens:(ve==null?void 0:ve.maxTokens)??o.maxTokens,effectiveTopP:(ve==null?void 0:ve.topP)??o.topP,effectiveTopK:(ve==null?void 0:ve.topK)??o.topK,effectivePresencePenalty:(ve==null?void 0:ve.presencePenalty)??o.presencePenalty,effectiveFrequencyPenalty:(ve==null?void 0:ve.frequencyPenalty)??o.frequencyPenalty,isSaving:ue})},{value:"rules-tags",label:"Rules & Tags",content:p.jsxs("div",{className:"space-y-6",children:[p.jsx(ZRe,{defaultRuleIds:U,setDefaultRuleIds:se,isSaving:ue}),p.jsx(XRe,{defaultTagIds:M,setDefaultTagIds:K,isSaving:ue})]})},{value:"sync",label:"Sync",content:p.jsx(GRe,{syncRepoId:L,setSyncRepoId:H,effectiveSyncRepoId:nt,syncRepos:s,isSaving:ue})},{value:"vfs",label:"Filesystem",content:p.jsx(WRe,{projectId:n,projectName:(_e==null?void 0:_e.name)??null,isSaving:ue})}],[d,m,v,w,_,C,I,N,L,M,U,ve,o,l,ue,ie,X,q,Q,nt,s,n,_e==null?void 0:_e.name]);return p.jsx(P_,{open:e,onOpenChange:t,children:p.jsxs(F_,{className:xt("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[p.jsxs(L_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsxs($_,{children:["Project Settings: ",_e==null?void 0:_e.name]}),p.jsx(z_,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),p.jsx(Fc,{tabs:De,initialValue:Ie,onValueChange:Ae,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsxs(B_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[p.jsx(It,{variant:"outline",onClick:t,disabled:ue,children:"Cancel"}),p.jsxs(It,{onClick:Ve,disabled:ue,children:[ue&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function QRe(){const e=Ir.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=Ji.getState();return p.jsx(JRe,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>gt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const e3e=()=>{const{selectedModelId:e,selectModel:t}=Un(sn(l=>({selectedModelId:l.selectedModelId,selectModel:l.selectModel}))),n=Oi(l=>l.setModelId),[r,a]=T.useState(()=>On.getState().status==="streaming"),[i,s]=T.useState(e);T.useEffect(()=>{const l=h=>{a(h.status==="streaming")},u=h=>{s(h.modelId),n(h.modelId)},d=Un.getState().selectedModelId;return s(d),n(d),Ct.on(St.INTERACTION_STATUS_CHANGED,l),Ct.on(St.MODEL_SELECTION_CHANGED,u),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,l),Ct.off(St.MODEL_SELECTION_CHANGED,u)}},[n]);const o=l=>{t(l),n(l)};return p.jsx(G_,{value:i,onChange:o,disabled:r})};function t3e(){const e=Ir.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>Un.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(e3e),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const n3e=({initialPromptValue:e,onPromptChange:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(!1),[s,o]=T.useState(null),[l,u]=T.useState(()=>On.getState().status==="streaming");T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const v=C=>{u(C.status==="streaming")},b=(C,k)=>{var L;const{getConversationById:I}=mn.getState(),{getEffectiveProjectSettings:j}=hi.getState(),N=rr.getState().globalSystemPrompt,P=k==="project"?C:k==="conversation"?((L=I(C))==null?void 0:L.projectId)??null:null;o(j(P).systemPrompt??N)},w=C=>{b(C.selectedItemId,C.selectedItemType)},x=C=>{var j;const k=mn.getState();(k.selectedItemType==="project"?k.selectedItemId:k.selectedItemType==="conversation"?((j=k.getConversationById(k.selectedItemId))==null?void 0:j.projectId)??null:null)===C.projectId&&b(k.selectedItemId,k.selectedItemType)},_=C=>{if(C.key==="globalSystemPrompt"){const k=mn.getState();b(k.selectedItemId,k.selectedItemType)}},E=mn.getState();return b(E.selectedItemId,E.selectedItemType),Ct.on(St.INTERACTION_STATUS_CHANGED,v),Ct.on(St.CONTEXT_CHANGED,w),Ct.on(St.PROJECT_UPDATED,x),Ct.on(St.SETTINGS_CHANGED,_),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,v),Ct.off(St.CONTEXT_CHANGED,w),Ct.off(St.PROJECT_UPDATED,x),Ct.off(St.SETTINGS_CHANGED,_)}},[]);const d=T.useCallback(()=>{t(n.trim()),i(!1)},[n,t]),h=T.useCallback(()=>{r(""),t(""),i(!1)},[t]),m=v=>{v&&r(e),i(v)},g=e.trim().length>0;return p.jsxs(Mc,{open:a,onOpenChange:m,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oc,{asChild:!0,children:p.jsx(It,{variant:g?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:l,"aria-label":"Set System Prompt for Next Turn",children:p.jsx(LY,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:g?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),p.jsxs(Pc,{className:"w-80 p-4 space-y-3",align:"start",children:[p.jsx(Wt,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),p.jsx(bd,{id:"turn-system-prompt",placeholder:`Inherited: ${(s==null?void 0:s.substring(0,50))||"Default"}${s&&s.length>50?"...":""}`,value:n,onChange:v=>r(v.target.value),rows:5,className:"text-sm"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx(It,{variant:"outline",size:"sm",onClick:h,disabled:!n.trim(),children:"Clear Override"}),p.jsx(It,{size:"sm",onClick:d,children:"Set for Next Turn"})]})]})]})};let Fg="";function r3e(){const e=Ir.getState().registerPromptControl;Fg="";const t=n=>{Fg=n};e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>gt.createElement(n3e,{initialPromptValue:Fg,onPromptChange:t}),getMetadata:()=>{const n=Fg.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{Fg=""}}),console.log("[Function] Registered Core System Prompt Control")}const a3e=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=Oi(sn(x=>({structuredOutputJson:x.structuredOutputJson,setStructuredOutputJson:x.setStructuredOutputJson}))),[n,r]=T.useState(!1),[a,i]=T.useState(e??""),[s,o]=T.useState(""),[l,u]=T.useState([]),d=T.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),qe.success("Structured output applied for next turn.")}catch{qe.error("Invalid JSON format.")}},[a,t]),h=T.useCallback(()=>{i(""),t(null),r(!1),qe.info("Structured output cleared.")},[t]),m=T.useCallback(()=>{if(!s.trim()){qe.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const x={id:Date.now().toString(),name:s.trim(),json:a};u(_=>[..._,x]),o(""),qe.success(`"${x.name}" saved to library.`)}catch{qe.error("Cannot save invalid JSON to library.")}},[a,s]),g=T.useCallback(x=>{i(x.json),t(x.json),r(!1),qe.success(`Loaded "${x.name}" from library.`)},[t]),v=T.useCallback(x=>{u(_=>_.filter(E=>E.id!==x)),qe.info("Item removed from library.")},[]);T.useEffect(()=>{n&&i(e??"")},[n,e]);const b=[{value:"entry",label:"Entry",content:p.jsxs("div",{className:"space-y-3 p-1",children:[p.jsx(Wt,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),p.jsx(bd,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:x=>i(x.target.value),rows:8,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-between items-end gap-2",children:[p.jsxs("div",{className:"flex-grow space-y-1",children:[p.jsx(Wt,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),p.jsx(kn,{id:"structured-output-name",value:s,onChange:x=>o(x.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),p.jsxs(It,{size:"sm",variant:"outline",onClick:m,disabled:!s.trim()||!a.trim(),className:"h-8",children:[p.jsx(Rf,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsx(It,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),p.jsx(It,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:p.jsx("div",{className:"space-y-2 p-1",children:l.length===0?p.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(x=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[p.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:x.name}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(It,{size:"sm",variant:"outline",onClick:()=>g(x),className:"h-7 px-2 text-xs",children:"Use"}),p.jsx(It,{size:"icon",variant:"ghost",onClick:()=>v(x.id),className:"h-7 w-7 text-destructive",children:p.jsx(Zi,{className:"h-3.5 w-3.5"})})]})]},x.id))})}],w=!!e;return p.jsxs(Mc,{open:n,onOpenChange:r,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oc,{asChild:!0,children:p.jsx(It,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:p.jsx($8,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:w?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),p.jsx(Pc,{className:"w-[450px] p-0",align:"start",children:p.jsx(Fc,{tabs:b,defaultValue:"entry"})})]})},i3e=()=>{const[e,t]=T.useState(!0);return T.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=Un.getState(),i=a(),s=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,o=Array.isArray(s)&&s.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${o}`),t(o)};return n({modelId:Un.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${St.MODEL_SELECTION_CHANGED}`),Ct.on(St.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),Ct.off(St.MODEL_SELECTION_CHANGED,n)}},[]),e?p.jsx(a3e,{}):null};function s3e(){const e=Ir.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>gt.createElement(i3e),getParameters:()=>{const{structuredOutputJson:t}=Oi.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{Oi.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const cG=4,mT=e=>{let t=0;return e.forEach(n=>{var r,a,i,s;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(s=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||s.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/cG)},o3e=()=>{const[e,t]=T.useState(""),[n,r]=T.useState(0),[a,i]=T.useState([]),[s,o]=T.useState(null),[l,u]=T.useState(0);T.useEffect(()=>{const b=vc.getState(),w=Un.getState(),x=On.getState();if(i(b.attachedFilesMetadata),o(w.selectedModelId),x.currentConversationId){const j=x.interactions.filter(N=>N.status==="COMPLETED");r(mT(j))}else r(0);const _=j=>{t(j.value)},E=j=>{i(j.files)},C=j=>{console.log(j),o(j.modelId)},k=()=>{const j=On.getState();if(j.currentConversationId){const N=j.interactions.filter(P=>P.status==="COMPLETED");r(mT(N))}},I=()=>{const j=On.getState();if(j.currentConversationId){const N=j.interactions.filter(P=>P.status==="COMPLETED");r(mT(N))}else r(0)};return Ct.on(St.PROMPT_INPUT_CHANGE,_),Ct.on(St.ATTACHED_FILES_CHANGED,E),Ct.on(St.MODEL_SELECTION_CHANGED,C),Ct.on(St.INTERACTION_COMPLETED,k),Ct.on(St.CONTEXT_CHANGED,I),()=>{Ct.off(St.PROMPT_INPUT_CHANGE,_),Ct.off(St.ATTACHED_FILES_CHANGED,E),Ct.off(St.MODEL_SELECTION_CHANGED,C),Ct.off(St.INTERACTION_COMPLETED,k),Ct.off(St.CONTEXT_CHANGED,I)}},[]),T.useEffect(()=>{var N;if(!s){u(0);return}const{dbProviderConfigs:b,dbApiKeys:w}=Un.getState(),{providerId:x,modelId:_}=Rc(s);if(!x||!_){u(0);return}const E=b.find(P=>P.id===x);if(!E){u(0);return}const C=w.find(P=>P.id===E.apiKeyId),k=N1(E,_,C==null?void 0:C.value),I=k==null?void 0:k.metadata,j=((N=I==null?void 0:I.top_provider)==null?void 0:N.context_length)??(I==null?void 0:I.context_length)??0;u(j)},[s]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:m}=T.useMemo(()=>{const b=new TextEncoder().encode(e).length,w=a.reduce((C,k)=>C+k.size,0),x=Math.ceil((b+w)/cG),_=n+x,E=l?Math.min(100,Math.round(_/l*100)):0;return{estimatedInputTokens:x,totalEstimatedTokens:_,contextPercentage:E}},[e,a,n,l]),g=T.useMemo(()=>m>85?"text-red-600 dark:text-red-500":m>70?"text-orange-500 dark:text-orange-400":m>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[m]);if(!s||l===0)return null;const v=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${m}%) [History: ${n}, Input: ${d}]`;return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:p.jsx(YK,{className:xt("h-3 w-3 fill-current",g)})})}),p.jsx(Yn,{side:"top",children:v})]})})};function l3e(){const e=Ir.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>gt.createElement(o3e),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const c3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>On.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var b,w;if(!m.modelId){o(!1);return}const{getSelectedModel:g}=Un.getState(),v=g();o(((w=(b=v==null?void 0:v.metadata)==null?void 0:b.supported_parameters)==null?void 0:w.includes("reasoning"))??!1)};return h({modelId:Un.getState().selectedModelId}),Ct.on(St.INTERACTION_STATUS_CHANGED,d),Ct.on(St.MODEL_SELECTION_CHANGED,h),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,d),Ct.off(St.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:p.jsx(Af,{className:xt("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:l?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function u3e(){const e=Ir.getState().registerPromptControl,t=Oi.getState(),n=r=>{t.setReasoningEnabled(r)};e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>gt.createElement(c3e,{initialEnabled:t.reasoningEnabled,onToggle:n}),getMetadata:()=>{const{reasoningEnabled:r}=Oi.getState();return r===!0?{reasoningEnabled:!0}:void 0},clearOnSubmit:()=>{t.setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const d3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>On.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var w;if(!m.modelId){o(!1);return}const{getSelectedModel:g}=Un.getState(),v=g(),b=((w=v==null?void 0:v.metadata)==null?void 0:w.supported_parameters)??[];o(b.includes("web_search")||b.includes("web_search_options"))};return h({modelId:Un.getState().selectedModelId}),Ct.on(St.INTERACTION_STATUS_CHANGED,d),Ct.on(St.MODEL_SELECTION_CHANGED,h),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,d),Ct.off(St.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:p.jsx(Qi,{className:xt("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:l?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function f3e(){const e=Ir.getState().registerPromptControl,t=Oi.getState(),n=r=>{t.setWebSearchEnabled(r)};e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>gt.createElement(d3e,{initialEnabled:t.webSearchEnabled,onToggle:n}),getParameters:()=>{const{webSearchEnabled:r}=Oi.getState();return r===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{t.setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const h3e=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r})=>{const{rules:a,tags:i,getRulesForTag:s}=Zs(sn(_=>({rules:_.rules,tags:_.tags,getRulesForTag:_.getRulesForTag}))),[o,l]=T.useState(""),[u,d]=T.useState(""),h=T.useMemo(()=>{const _=o.toLowerCase();return _?i.filter(E=>{var C;return E.name.toLowerCase().includes(_)||((C=E.description)==null?void 0:C.toLowerCase().includes(_))}):i},[i,o]),m=T.useMemo(()=>{const _=u.toLowerCase();return _?a.filter(E=>E.name.toLowerCase().includes(_)||E.content.toLowerCase().includes(_)||E.type.toLowerCase().includes(_)):a},[a,u]),g=T.useCallback((_,E)=>{n(_,E)},[n]),v=T.useCallback((_,E)=>{r(_,E)},[r]),b=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Qi,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(kn,{type:"search",placeholder:"Filter tags...",value:o,onChange:_=>l(_.target.value),className:"pl-8 h-9"})]}),p.jsx(wl,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No tags defined.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(_=>{const E=s(_.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(kf,{id:`tag-activate-${_.id}`,checked:e.has(_.id),onCheckedChange:C=>g(_.id,!!C),className:"mt-0.5"}),p.jsxs(Wt,{htmlFor:`tag-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),_.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:_.description}),E.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",E.map(C=>C.name).join(", ")]})]})]})},_.id)})})})]}),w=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Qi,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(kn,{type:"search",placeholder:"Filter rules...",value:u,onChange:_=>d(_.target.value),className:"pl-8 h-9"})]}),p.jsx(wl,{className:"h-64 border rounded-md p-2 bg-background/50",children:m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:a.length===0?"No rules defined.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(_=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(kf,{id:`rule-activate-${_.id}`,checked:t.has(_.id),onCheckedChange:E=>v(_.id,!!E),className:"mt-0.5"}),p.jsxs(Wt,{htmlFor:`rule-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",_.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",_.content]})]})]})},_.id))})})]}),x=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:w()}];return p.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:p.jsx(Fc,{tabs:x,defaultValue:"tags"})})};let lf=new Set,cf=new Set,Wg=()=>{};const p3e=()=>{const[e,t]=T.useState({activeTagIds:lf,activeRuleIds:cf}),[n,r]=T.useState(!1),[a,i]=T.useState(()=>On.getState().status==="streaming"),s=Zs(h=>h.rules.length>0||h.tags.length>0);T.useEffect(()=>(Wg=h=>{const m=h({activeTagIds:lf,activeRuleIds:cf});lf=m.activeTagIds,cf=m.activeRuleIds,t(m)},t({activeTagIds:lf,activeRuleIds:cf}),()=>{Wg=()=>{}}),[]),T.useEffect(()=>{const h=m=>{i(m.status==="streaming")};return Ct.on(St.INTERACTION_STATUS_CHANGED,h),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,h)}},[]);const o=T.useCallback((h,m)=>{Wg(g=>{const v=new Set(g.activeTagIds);return m?v.add(h):v.delete(h),{...g,activeTagIds:v}})},[]),l=T.useCallback((h,m)=>{Wg(g=>{const v=new Set(g.activeRuleIds);return m?v.add(h):v.delete(h),{...g,activeRuleIds:v}})},[]),u=e.activeTagIds.size>0||e.activeRuleIds.size>0,d=a||!s;return s?p.jsxs(Mc,{open:n,onOpenChange:r,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oc,{asChild:!0,children:p.jsx(It,{variant:u?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d,"aria-label":"Configure Rules & Tags for Next Turn",children:p.jsx(CY,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:u?`Rules/Tags Active (${e.activeTagIds.size} tags, ${e.activeRuleIds.size} rules)`:"Activate Rules/Tags (Next Turn)"})]})}),p.jsx(Pc,{className:"w-auto p-0",align:"start",children:p.jsx(h3e,{activeTagIds:e.activeTagIds,activeRuleIds:e.activeRuleIds,onToggleTag:o,onToggleRule:l})})]}):null};function m3e(){const e=Ir.getState().registerPromptControl;lf=new Set,cf=new Set,e({id:"core-rules-tags",status:()=>Zs.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(p3e),getMetadata:()=>{const t=Array.from(lf),n=Array.from(cf);if(t.length>0||n.length>0)return{activeTagIds:t,activeRuleIds:n}},clearOnSubmit:()=>{lf=new Set,cf=new Set,Wg(()=>({activeTagIds:new Set,activeRuleIds:new Set}))},show:()=>Zs.getState().rules.length>0}),console.log("[Function] Registered Core Rules & Tags Control")}const g3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>On.getState().status==="streaming"),[s,o]=T.useState(!1),l=rr(d=>d.autoTitleEnabled);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=()=>{const m=On.getState(),g=m.currentConversationId!==null&&m.interactions.filter(v=>v.conversationId===m.currentConversationId).length===0;o(g),!g&&n&&u()};return h(),Ct.on(St.INTERACTION_STATUS_CHANGED,d),Ct.on(St.CONTEXT_CHANGED,h),Ct.on(St.INTERACTION_COMPLETED,h),()=>{Ct.off(St.INTERACTION_STATUS_CHANGED,d),Ct.off(St.CONTEXT_CHANGED,h),Ct.off(St.INTERACTION_COMPLETED,h)}},[n]);const u=()=>{const d=!n;r(d),t(d)};return!l||!s?null:p.jsx(Gn,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(It,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:p.jsx(q8,{className:xt("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})})};let Lg=!1;function y3e(){const e=Ir.getState().registerPromptControl;Lg=!1;const t=n=>{Lg=n};e({id:"core-auto-title",status:()=>"ready",triggerRenderer:()=>gt.createElement(g3e,{initialEnabled:Lg,onToggle:t}),getMetadata:()=>Lg?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{Lg=!1}}),console.log("[Function] Registered Core Auto-Title Control")}const b3e=[fEe,kAe,TAe,QRe,t3e,y3e,l3e,u3e,f3e,MAe,CRe,m3e,r3e,VRe,RAe,s3e,kRe,MRe,$Re];function v3e(){return p.jsxs(lEe,{children:[p.jsx(sEe,{}),p.jsx(iEe,{}),p.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:p.jsx("main",{className:"flex-grow overflow-hidden",children:p.jsx(Q2e,{controls:b3e})})})]})}dX();zW.createRoot(document.getElementById("root")).render(p.jsx(gt.StrictMode,{children:p.jsx(v3e,{})}));
