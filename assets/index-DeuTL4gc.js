var WU=Object.defineProperty;var ZU=(e,t,n)=>t in e?WU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ha=(e,t,n)=>ZU(e,typeof t!="symbol"?t+"":t,n);function YU(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ui(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vS={exports:{}},Pm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MI;function XU(){if(MI)return Pm;MI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:s,ref:a!==void 0?a:null,props:i}}return Pm.Fragment=t,Pm.jsx=n,Pm.jsxs=n,Pm}var PI;function JU(){return PI||(PI=1,vS.exports=XU()),vS.exports}var p=JU(),wS={exports:{}};function QU(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var O6={exports:{}},la=O6.exports={},Fo,Lo;function z2(){throw new Error("setTimeout has not been defined")}function U2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Fo=setTimeout:Fo=z2}catch{Fo=z2}try{typeof clearTimeout=="function"?Lo=clearTimeout:Lo=U2}catch{Lo=U2}})();function D6(e){if(Fo===setTimeout)return setTimeout(e,0);if((Fo===z2||!Fo)&&setTimeout)return Fo=setTimeout,setTimeout(e,0);try{return Fo(e,0)}catch{try{return Fo.call(null,e,0)}catch{return Fo.call(this,e,0)}}}function eH(e){if(Lo===clearTimeout)return clearTimeout(e);if((Lo===U2||!Lo)&&clearTimeout)return Lo=clearTimeout,clearTimeout(e);try{return Lo(e)}catch{try{return Lo.call(null,e)}catch{return Lo.call(this,e)}}}var ql=[],xh=!1,Cd,xv=-1;function tH(){!xh||!Cd||(xh=!1,Cd.length?ql=Cd.concat(ql):xv=-1,ql.length&&M6())}function M6(){if(!xh){var e=D6(tH);xh=!0;for(var t=ql.length;t;){for(Cd=ql,ql=[];++xv<t;)Cd&&Cd[xv].run();xv=-1,t=ql.length}Cd=null,xh=!1,eH(e)}}la.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ql.push(new P6(e,t)),ql.length===1&&!xh&&D6(M6)};function P6(e,t){this.fun=e,this.array=t}P6.prototype.run=function(){this.fun.apply(null,this.array)};la.title="browser";la.browser=!0;la.env={};la.argv=[];la.version="";la.versions={};function lc(){}la.on=lc;la.addListener=lc;la.once=lc;la.off=lc;la.removeListener=lc;la.removeAllListeners=lc;la.emit=lc;la.prependListener=lc;la.prependOnceListener=lc;la.listeners=function(e){return[]};la.binding=function(e){throw new Error("process.binding is not supported")};la.cwd=function(){return"/"};la.chdir=function(e){throw new Error("process.chdir is not supported")};la.umask=function(){return 0};var nH=O6.exports;const ta=QU(nH);var Pn={},FI;function rH(){if(FI)return Pn;FI=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(B){return B===null||typeof B!="object"?null:(B=h&&B[h]||B["@@iterator"],typeof B=="function"?B:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function x(B,J,ee){this.props=B,this.context=J,this.refs=b,this.updater=ee||y}x.prototype.isReactComponent={},x.prototype.setState=function(B,J){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,J,"setState")},x.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function w(){}w.prototype=x.prototype;function S(B,J,ee){this.props=B,this.context=J,this.refs=b,this.updater=ee||y}var E=S.prototype=new w;E.constructor=S,v(E,x.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function R(B,J,ee,te,fe,ve){return ee=ve.ref,{$$typeof:e,type:B,key:J,ref:ee!==void 0?ee:null,props:ve}}function j(B,J){return R(B.type,J,void 0,void 0,void 0,B.props)}function F(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function $(B){var J={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ee){return J[ee]})}var G=/\/+/g;function D(B,J){return typeof B=="object"&&B!==null&&B.key!=null?$(""+B.key):J.toString(36)}function Z(){}function q(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(Z,Z):(B.status="pending",B.then(function(J){B.status==="pending"&&(B.status="fulfilled",B.value=J)},function(J){B.status==="pending"&&(B.status="rejected",B.reason=J)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ue(B,J,ee,te,fe){var ve=typeof B;(ve==="undefined"||ve==="boolean")&&(B=null);var De=!1;if(B===null)De=!0;else switch(ve){case"bigint":case"string":case"number":De=!0;break;case"object":switch(B.$$typeof){case e:case t:De=!0;break;case d:return De=B._init,ue(De(B._payload),J,ee,te,fe)}}if(De)return fe=fe(B),De=te===""?"."+D(B,0):te,C(fe)?(ee="",De!=null&&(ee=De.replace(G,"$&/")+"/"),ue(fe,J,ee,"",function(Ce){return Ce})):fe!=null&&(F(fe)&&(fe=j(fe,ee+(fe.key==null||B&&B.key===fe.key?"":(""+fe.key).replace(G,"$&/")+"/")+De)),J.push(fe)),1;De=0;var Ae=te===""?".":te+":";if(C(B))for(var Ne=0;Ne<B.length;Ne++)te=B[Ne],ve=Ae+D(te,Ne),De+=ue(te,J,ee,ve,fe);else if(Ne=m(B),typeof Ne=="function")for(B=Ne.call(B),Ne=0;!(te=B.next()).done;)te=te.value,ve=Ae+D(te,Ne++),De+=ue(te,J,ee,ve,fe);else if(ve==="object"){if(typeof B.then=="function")return ue(q(B),J,ee,te,fe);throw J=String(B),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return De}function ie(B,J,ee){if(B==null)return B;var te=[],fe=0;return ue(B,te,"","",function(ve){return J.call(ee,ve,fe++)}),te}function ne(B){if(B._status===-1){var J=B._result;J=J(),J.then(function(ee){(B._status===0||B._status===-1)&&(B._status=1,B._result=ee)},function(ee){(B._status===0||B._status===-1)&&(B._status=2,B._result=ee)}),B._status===-1&&(B._status=0,B._result=J)}if(B._status===1)return B._result.default;throw B._result}var X=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(J))return}else if(typeof ta=="object"&&typeof ta.emit=="function"){ta.emit("uncaughtException",B);return}console.error(B)};function ae(){}return Pn.Children={map:ie,forEach:function(B,J,ee){ie(B,function(){J.apply(this,arguments)},ee)},count:function(B){var J=0;return ie(B,function(){J++}),J},toArray:function(B){return ie(B,function(J){return J})||[]},only:function(B){if(!F(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Pn.Component=x,Pn.Fragment=n,Pn.Profiler=a,Pn.PureComponent=S,Pn.StrictMode=r,Pn.Suspense=l,Pn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Pn.__COMPILER_RUNTIME={__proto__:null,c:function(B){return k.H.useMemoCache(B)}},Pn.cache=function(B){return function(){return B.apply(null,arguments)}},Pn.cloneElement=function(B,J,ee){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var te=v({},B.props),fe=B.key,ve=void 0;if(J!=null)for(De in J.ref!==void 0&&(ve=void 0),J.key!==void 0&&(fe=""+J.key),J)!I.call(J,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&J.ref===void 0||(te[De]=J[De]);var De=arguments.length-2;if(De===1)te.children=ee;else if(1<De){for(var Ae=Array(De),Ne=0;Ne<De;Ne++)Ae[Ne]=arguments[Ne+2];te.children=Ae}return R(B.type,fe,void 0,void 0,ve,te)},Pn.createContext=function(B){return B={$$typeof:s,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:i,_context:B},B},Pn.createElement=function(B,J,ee){var te,fe={},ve=null;if(J!=null)for(te in J.key!==void 0&&(ve=""+J.key),J)I.call(J,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(fe[te]=J[te]);var De=arguments.length-2;if(De===1)fe.children=ee;else if(1<De){for(var Ae=Array(De),Ne=0;Ne<De;Ne++)Ae[Ne]=arguments[Ne+2];fe.children=Ae}if(B&&B.defaultProps)for(te in De=B.defaultProps,De)fe[te]===void 0&&(fe[te]=De[te]);return R(B,ve,void 0,void 0,null,fe)},Pn.createRef=function(){return{current:null}},Pn.forwardRef=function(B){return{$$typeof:o,render:B}},Pn.isValidElement=F,Pn.lazy=function(B){return{$$typeof:d,_payload:{_status:-1,_result:B},_init:ne}},Pn.memo=function(B,J){return{$$typeof:u,type:B,compare:J===void 0?null:J}},Pn.startTransition=function(B){var J=k.T,ee={};k.T=ee;try{var te=B(),fe=k.S;fe!==null&&fe(ee,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(ae,X)}catch(ve){X(ve)}finally{k.T=J}},Pn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Pn.use=function(B){return k.H.use(B)},Pn.useActionState=function(B,J,ee){return k.H.useActionState(B,J,ee)},Pn.useCallback=function(B,J){return k.H.useCallback(B,J)},Pn.useContext=function(B){return k.H.useContext(B)},Pn.useDebugValue=function(){},Pn.useDeferredValue=function(B,J){return k.H.useDeferredValue(B,J)},Pn.useEffect=function(B,J,ee){var te=k.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return te.useEffect(B,J)},Pn.useId=function(){return k.H.useId()},Pn.useImperativeHandle=function(B,J,ee){return k.H.useImperativeHandle(B,J,ee)},Pn.useInsertionEffect=function(B,J){return k.H.useInsertionEffect(B,J)},Pn.useLayoutEffect=function(B,J){return k.H.useLayoutEffect(B,J)},Pn.useMemo=function(B,J){return k.H.useMemo(B,J)},Pn.useOptimistic=function(B,J){return k.H.useOptimistic(B,J)},Pn.useReducer=function(B,J,ee){return k.H.useReducer(B,J,ee)},Pn.useRef=function(B){return k.H.useRef(B)},Pn.useState=function(B){return k.H.useState(B)},Pn.useSyncExternalStore=function(B,J,ee){return k.H.useSyncExternalStore(B,J,ee)},Pn.useTransition=function(){return k.H.useTransition()},Pn.version="19.1.0",Pn}var LI;function pk(){return LI||(LI=1,wS.exports=rH()),wS.exports}var T=pk();const gt=ui(T),F6=YU({__proto__:null,default:gt},[T]);var xS={exports:{}},Fm={},_S={exports:{}},SS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I;function aH(){return $I||($I=1,function(e){function t(ie,ne){var X=ie.length;ie.push(ne);e:for(;0<X;){var ae=X-1>>>1,B=ie[ae];if(0<a(B,ne))ie[ae]=ne,ie[X]=B,X=ae;else break e}}function n(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var ne=ie[0],X=ie.pop();if(X!==ne){ie[0]=X;e:for(var ae=0,B=ie.length,J=B>>>1;ae<J;){var ee=2*(ae+1)-1,te=ie[ee],fe=ee+1,ve=ie[fe];if(0>a(te,X))fe<B&&0>a(ve,te)?(ie[ae]=ve,ie[fe]=X,ae=fe):(ie[ae]=te,ie[ee]=X,ae=ee);else if(fe<B&&0>a(ve,X))ie[ae]=ve,ie[fe]=X,ae=fe;else break e}}return ne}function a(ie,ne){var X=ie.sortIndex-ne.sortIndex;return X!==0?X:ie.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,h=null,m=3,y=!1,v=!1,b=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ie){for(var ne=n(u);ne!==null;){if(ne.callback===null)r(u);else if(ne.startTime<=ie)r(u),ne.sortIndex=ne.expirationTime,t(l,ne);else break;ne=n(u)}}function k(ie){if(b=!1,C(ie),!v)if(n(l)!==null)v=!0,I||(I=!0,D());else{var ne=n(u);ne!==null&&ue(k,ne.startTime-ie)}}var I=!1,R=-1,j=5,F=-1;function $(){return x?!0:!(e.unstable_now()-F<j)}function G(){if(x=!1,I){var ie=e.unstable_now();F=ie;var ne=!0;try{e:{v=!1,b&&(b=!1,S(R),R=-1),y=!0;var X=m;try{t:{for(C(ie),h=n(l);h!==null&&!(h.expirationTime>ie&&$());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,m=h.priorityLevel;var B=ae(h.expirationTime<=ie);if(ie=e.unstable_now(),typeof B=="function"){h.callback=B,C(ie),ne=!0;break t}h===n(l)&&r(l),C(ie)}else r(l);h=n(l)}if(h!==null)ne=!0;else{var J=n(u);J!==null&&ue(k,J.startTime-ie),ne=!1}}break e}finally{h=null,m=X,y=!1}ne=void 0}}finally{ne?D():I=!1}}}var D;if(typeof E=="function")D=function(){E(G)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=G,D=function(){q.postMessage(null)}}else D=function(){w(G,0)};function ue(ie,ne){R=w(function(){ie(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ie){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var X=m;m=ne;try{return ie()}finally{m=X}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(ie,ne){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var X=m;m=ie;try{return ne()}finally{m=X}},e.unstable_scheduleCallback=function(ie,ne,X){var ae=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ae+X:ae):X=ae,ie){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=X+B,ie={id:d++,callback:ne,priorityLevel:ie,startTime:X,expirationTime:B,sortIndex:-1},X>ae?(ie.sortIndex=X,t(u,ie),n(l)===null&&ie===n(u)&&(b?(S(R),R=-1):b=!0,ue(k,X-ae))):(ie.sortIndex=B,t(l,ie),v||y||(v=!0,I||(I=!0,D()))),ie},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(ie){var ne=m;return function(){var X=m;m=ne;try{return ie.apply(this,arguments)}finally{m=X}}}}(SS)),SS}var BI;function iH(){return BI||(BI=1,_S.exports=aH()),_S.exports}var ES={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI;function sH(){if(zI)return ti;zI=1;var e=pk();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ti.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(l,u,null,d)},ti.flushSync=function(l){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=u,r.p=d,r.d.f()}},ti.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},ti.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},ti.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:y}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ti.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},ti.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ti.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},ti.requestFormReset=function(l){r.d.r(l)},ti.unstable_batchedUpdates=function(l,u){return l(u)},ti.useFormState=function(l,u,d){return s.H.useFormState(l,u,d)},ti.useFormStatus=function(){return s.H.useHostTransitionStatus()},ti.version="19.1.0",ti}var UI;function L6(){if(UI)return ES.exports;UI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ES.exports=sH(),ES.exports}var HI;function oH(){if(HI)return Fm;HI=1;var e=iH(),t=pk(),n=L6();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var f=c,g=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(g=f.return),c=f.return;while(c)}return f.tag===3?g:null}function s(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(i(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=i(c),f===null)throw Error(r(188));return f!==c?null:c}for(var g=c,_=f;;){var N=g.return;if(N===null)break;var L=N.alternate;if(L===null){if(_=N.return,_!==null){g=_;continue}break}if(N.child===L.child){for(L=N.child;L;){if(L===g)return o(N),c;if(L===_)return o(N),f;L=L.sibling}throw Error(r(188))}if(g.return!==_.return)g=N,_=L;else{for(var oe=!1,_e=N.child;_e;){if(_e===g){oe=!0,g=N,_=L;break}if(_e===_){oe=!0,_=N,g=L;break}_e=_e.sibling}if(!oe){for(_e=L.child;_e;){if(_e===g){oe=!0,g=L,_=N;break}if(_e===_){oe=!0,_=L,g=N;break}_e=_e.sibling}if(!oe)throw Error(r(189))}}if(g.alternate!==_)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function D(c){return c===null||typeof c!="object"?null:(c=G&&c[G]||c["@@iterator"],typeof c=="function"?c:null)}var Z=Symbol.for("react.client.reference");function q(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Z?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case x:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case F:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case y:return"Portal";case E:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case C:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case R:return f=c.displayName||null,f!==null?f:q(c.type)||"Memo";case j:f=c._payload,c=c._init;try{return q(c(f))}catch{}}return null}var ue=Array.isArray,ie=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ae=[],B=-1;function J(c){return{current:c}}function ee(c){0>B||(c.current=ae[B],ae[B]=null,B--)}function te(c,f){B++,ae[B]=c.current,c.current=f}var fe=J(null),ve=J(null),De=J(null),Ae=J(null);function Ne(c,f){switch(te(De,f),te(ve,c),te(fe,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?cI(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=cI(f),c=uI(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}ee(fe),te(fe,c)}function Ce(){ee(fe),ee(ve),ee(De)}function Pe(c){c.memoizedState!==null&&te(Ae,c);var f=fe.current,g=uI(f,c.type);f!==g&&(te(ve,c),te(fe,g))}function Qe(c){ve.current===c&&(ee(fe),ee(ve)),Ae.current===c&&(ee(Ae),Im._currentValue=X)}var Le=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Te=e.unstable_requestPaint,de=e.unstable_now,se=e.unstable_getCurrentPriorityLevel,Q=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Fe=e.unstable_NormalPriority,Ee=e.unstable_LowPriority,Ge=e.unstable_IdlePriority,Nt=e.log,it=e.unstable_setDisableYieldValue,St=null,Ft=null;function Dt(c){if(typeof Nt=="function"&&it(c),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(St,c)}catch{}}var Zt=Math.clz32?Math.clz32:K,ye=Math.log,O=Math.LN2;function K(c){return c>>>=0,c===0?32:31-(ye(c)/O|0)|0}var he=256,je=4194304;function be(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ke(c,f,g){var _=c.pendingLanes;if(_===0)return 0;var N=0,L=c.suspendedLanes,oe=c.pingedLanes;c=c.warmLanes;var _e=_&134217727;return _e!==0?(_=_e&~L,_!==0?N=be(_):(oe&=_e,oe!==0?N=be(oe):g||(g=_e&~c,g!==0&&(N=be(g))))):(_e=_&~L,_e!==0?N=be(_e):oe!==0?N=be(oe):g||(g=_&~c,g!==0&&(N=be(g)))),N===0?0:f!==0&&f!==N&&(f&L)===0&&(L=N&-N,g=f&-f,L>=g||L===32&&(g&4194048)!==0)?f:N}function le(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function ft(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var c=he;return he<<=1,(he&4194048)===0&&(he=256),c}function P(){var c=je;return je<<=1,(je&62914560)===0&&(je=4194304),c}function Be(c){for(var f=[],g=0;31>g;g++)f.push(c);return f}function nt(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ge(c,f,g,_,N,L){var oe=c.pendingLanes;c.pendingLanes=g,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=g,c.entangledLanes&=g,c.errorRecoveryDisabledLanes&=g,c.shellSuspendCounter=0;var _e=c.entanglements,ze=c.expirationTimes,dt=c.hiddenUpdates;for(g=oe&~g;0<g;){var At=31-Zt(g),Mt=1<<At;_e[At]=0,ze[At]=-1;var mt=dt[At];if(mt!==null)for(dt[At]=null,At=0;At<mt.length;At++){var yt=mt[At];yt!==null&&(yt.lane&=-536870913)}g&=~Mt}_!==0&&Oe(c,_,0),L!==0&&N===0&&c.tag!==0&&(c.suspendedLanes|=L&~(oe&~f))}function Oe(c,f,g){c.pendingLanes|=f,c.suspendedLanes&=~f;var _=31-Zt(f);c.entangledLanes|=f,c.entanglements[_]=c.entanglements[_]|1073741824|g&4194090}function Ke(c,f){var g=c.entangledLanes|=f;for(c=c.entanglements;g;){var _=31-Zt(g),N=1<<_;N&f|c[_]&f&&(c[_]|=f),g&=~N}}function Ot(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function me(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function V(){var c=ne.p;return c!==0?c:(c=window.event,c===void 0?32:NI(c.type))}function H(c,f){var g=ne.p;try{return ne.p=c,f()}finally{ne.p=g}}var W=Math.random().toString(36).slice(2),pe="__reactFiber$"+W,Re="__reactProps$"+W,He="__reactContainer$"+W,pt="__reactEvents$"+W,Wt="__reactListeners$"+W,ut="__reactHandles$"+W,Rt="__reactResources$"+W,Lt="__reactMarker$"+W;function Qt(c){delete c[pe],delete c[Re],delete c[pt],delete c[Wt],delete c[ut]}function An(c){var f=c[pe];if(f)return f;for(var g=c.parentNode;g;){if(f=g[He]||g[pe]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(c=pI(c);c!==null;){if(g=c[pe])return g;c=pI(c)}return f}c=g,g=c.parentNode}return null}function Kn(c){if(c=c[pe]||c[He]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function xr(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function _r(c){var f=c[Rt];return f||(f=c[Rt]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Fn(c){c[Lt]=!0}var hi=new Set,go={};function yo(c,f){bo(c,f),bo(c+"Capture",f)}function bo(c,f){for(go[c]=f,c=0;c<f.length;c++)hi.add(f[c])}var Wr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vo={},ds={};function uy(c){return Le.call(ds,c)?!0:Le.call(vo,c)?!1:Wr.test(c)?ds[c]=!0:(vo[c]=!0,!1)}function Bs(c,f,g){if(uy(f))if(g===null)c.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var _=f.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+g)}}function ul(c,f,g){if(g===null)c.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+g)}}function Vi(c,f,g,_){if(_===null)c.removeAttribute(g);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(g);return}c.setAttributeNS(f,g,""+_)}}var Vu,wo;function dl(c){if(Vu===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);Vu=f&&f[1]||"",wo=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vu+c+wo}var hc=!1;function hf(c,f){if(!c||hc)return"";hc=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(f){var Mt=function(){throw Error()};if(Object.defineProperty(Mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Mt,[])}catch(yt){var mt=yt}Reflect.construct(c,[],Mt)}else{try{Mt.call()}catch(yt){mt=yt}c.call(Mt.prototype)}}else{try{throw Error()}catch(yt){mt=yt}(Mt=c())&&typeof Mt.catch=="function"&&Mt.catch(function(){})}}catch(yt){if(yt&&mt&&typeof yt.stack=="string")return[yt.stack,mt.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=_.DetermineComponentFrameRoot(),oe=L[0],_e=L[1];if(oe&&_e){var ze=oe.split(`
`),dt=_e.split(`
`);for(N=_=0;_<ze.length&&!ze[_].includes("DetermineComponentFrameRoot");)_++;for(;N<dt.length&&!dt[N].includes("DetermineComponentFrameRoot");)N++;if(_===ze.length||N===dt.length)for(_=ze.length-1,N=dt.length-1;1<=_&&0<=N&&ze[_]!==dt[N];)N--;for(;1<=_&&0<=N;_--,N--)if(ze[_]!==dt[N]){if(_!==1||N!==1)do if(_--,N--,0>N||ze[_]!==dt[N]){var At=`
`+ze[_].replace(" at new "," at ");return c.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",c.displayName)),At}while(1<=_&&0<=N);break}}}finally{hc=!1,Error.prepareStackTrace=g}return(g=c?c.displayName||c.name:"")?dl(g):""}function Wn(c){switch(c.tag){case 26:case 27:case 5:return dl(c.type);case 16:return dl("Lazy");case 13:return dl("Suspense");case 19:return dl("SuspenseList");case 0:case 15:return hf(c.type,!1);case 11:return hf(c.type.render,!1);case 1:return hf(c.type,!0);case 31:return dl("Activity");default:return""}}function Op(c){try{var f="";do f+=Wn(c),c=c.return;while(c);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function pi(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Dp(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Ir(c){var f=Dp(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),_=""+c[f];if(!c.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var N=g.get,L=g.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return N.call(this)},set:function(oe){_=""+oe,L.call(this,oe)}}),Object.defineProperty(c,f,{enumerable:g.enumerable}),{getValue:function(){return _},setValue:function(oe){_=""+oe},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function xo(c){c._valueTracker||(c._valueTracker=Ir(c))}function pc(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var g=f.getValue(),_="";return c&&(_=Dp(c)?c.checked?"true":"false":c.value),c=_,c!==g?(f.setValue(c),!0):!1}function zs(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Mp=/[\n"\\]/g;function Xa(c){return c.replace(Mp,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function mc(c,f,g,_,N,L,oe,_e){c.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?c.type=oe:c.removeAttribute("type"),f!=null?oe==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+pi(f)):c.value!==""+pi(f)&&(c.value=""+pi(f)):oe!=="submit"&&oe!=="reset"||c.removeAttribute("value"),f!=null?gc(c,oe,pi(f)):g!=null?gc(c,oe,pi(g)):_!=null&&c.removeAttribute("value"),N==null&&L!=null&&(c.defaultChecked=!!L),N!=null&&(c.checked=N&&typeof N!="function"&&typeof N!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?c.name=""+pi(_e):c.removeAttribute("name")}function Pp(c,f,g,_,N,L,oe,_e){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(c.type=L),f!=null||g!=null){if(!(L!=="submit"&&L!=="reset"||f!=null))return;g=g!=null?""+pi(g):"",f=f!=null?""+pi(f):g,_e||f===c.value||(c.value=f),c.defaultValue=f}_=_??N,_=typeof _!="function"&&typeof _!="symbol"&&!!_,c.checked=_e?c.checked:!!_,c.defaultChecked=!!_,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(c.name=oe)}function gc(c,f,g){f==="number"&&zs(c.ownerDocument)===c||c.defaultValue===""+g||(c.defaultValue=""+g)}function fl(c,f,g,_){if(c=c.options,f){f={};for(var N=0;N<g.length;N++)f["$"+g[N]]=!0;for(g=0;g<c.length;g++)N=f.hasOwnProperty("$"+c[g].value),c[g].selected!==N&&(c[g].selected=N),N&&_&&(c[g].defaultSelected=!0)}else{for(g=""+pi(g),f=null,N=0;N<c.length;N++){if(c[N].value===g){c[N].selected=!0,_&&(c[N].defaultSelected=!0);return}f!==null||c[N].disabled||(f=c[N])}f!==null&&(f.selected=!0)}}function yc(c,f,g){if(f!=null&&(f=""+pi(f),f!==c.value&&(c.value=f),g==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=g!=null?""+pi(g):""}function Fp(c,f,g,_){if(f==null){if(_!=null){if(g!=null)throw Error(r(92));if(ue(_)){if(1<_.length)throw Error(r(93));_=_[0]}g=_}g==null&&(g=""),f=g}g=pi(f),c.defaultValue=g,_=c.textContent,_===g&&_!==""&&_!==null&&(c.value=_)}function bc(c,f){if(f){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=f;return}}c.textContent=f}var tr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pf(c,f,g){var _=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?_?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":_?c.setProperty(f,g):typeof g!="number"||g===0||tr.has(f)?f==="float"?c.cssFloat=g:c[f]=(""+g).trim():c[f]=g+"px"}function dy(c,f,g){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,g!=null){for(var _ in g)!g.hasOwnProperty(_)||f!=null&&f.hasOwnProperty(_)||(_.indexOf("--")===0?c.setProperty(_,""):_==="float"?c.cssFloat="":c[_]="");for(var N in f)_=f[N],f.hasOwnProperty(N)&&g[N]!==_&&pf(c,N,_)}else for(var L in f)f.hasOwnProperty(L)&&pf(c,L,f[L])}function Lp(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hl(c){return vc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var fs=null;function mf(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var pl=null,$r=null;function Gi(c){var f=Kn(c);if(f&&(c=f.stateNode)){var g=c[Re]||null;e:switch(c=f.stateNode,f.type){case"input":if(mc(c,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Xa(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var _=g[f];if(_!==c&&_.form===c.form){var N=_[Re]||null;if(!N)throw Error(r(90));mc(_,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(f=0;f<g.length;f++)_=g[f],_.form===c.form&&pc(_)}break e;case"textarea":yc(c,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&fl(c,!!g.multiple,f,!1)}}}var ml=!1;function wc(c,f,g){if(ml)return c(f,g);ml=!0;try{var _=c(f);return _}finally{if(ml=!1,(pl!==null||$r!==null)&&(Qy(),pl&&(f=pl,c=$r,$r=pl=null,Gi(f),c)))for(f=0;f<c.length;f++)Gi(c[f])}}function gl(c,f){var g=c.stateNode;if(g===null)return null;var _=g[Re]||null;if(_===null)return null;g=_[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(c=c.type,_=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!_;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,f,typeof g));return g}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$p=!1;if(Aa)try{var Ja={};Object.defineProperty(Ja,"passive",{get:function(){$p=!0}}),window.addEventListener("test",Ja,Ja),window.removeEventListener("test",Ja,Ja)}catch{$p=!1}var hs=null,gf=null,xc=null;function _c(){if(xc)return xc;var c,f=gf,g=f.length,_,N="value"in hs?hs.value:hs.textContent,L=N.length;for(c=0;c<g&&f[c]===N[c];c++);var oe=g-c;for(_=1;_<=oe&&f[g-_]===N[L-_];_++);return xc=N.slice(c,1<_?1-_:void 0)}function Sc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Gu(){return!0}function fy(){return!1}function ca(c){function f(g,_,N,L,oe){this._reactName=g,this._targetInst=N,this.type=_,this.nativeEvent=L,this.target=oe,this.currentTarget=null;for(var _e in c)c.hasOwnProperty(_e)&&(g=c[_e],this[_e]=g?g(L):L[_e]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Gu:fy,this.isPropagationStopped=fy,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Gu)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Gu)},persist:function(){},isPersistent:Gu}),f}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yf=ca(yl),_o=d({},yl,{view:0,detail:0}),bf=ca(_o),Ku,Bp,Wu,vf=d({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Wu&&(Wu&&c.type==="mousemove"?(Ku=c.screenX-Wu.screenX,Bp=c.screenY-Wu.screenY):Bp=Ku=0,Wu=c),Ku)},movementY:function(c){return"movementY"in c?c.movementY:Bp}}),wf=ca(vf),zp=d({},vf,{dataTransfer:0}),hy=ca(zp),xf=d({},_o,{relatedTarget:0}),Ec=ca(xf),_f=d({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),py=ca(_f),O1=d({},yl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Sf=ca(O1),Up=d({},yl,{data:0}),Ef=ca(Up),Hp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Na={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zu(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Na[c])?!!f[c]:!1}function bl(){return Zu}var my=d({},_o,{key:function(c){if(c.key){var f=Hp[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Sc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?qp[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bl,charCode:function(c){return c.type==="keypress"?Sc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Sc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Cf=ca(my),gy=d({},vf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vp=ca(gy),kf=d({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bl}),Gp=ca(kf),vl=d({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kp=ca(vl),Wp=d({},vf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),Tf=ca(Wp),Zp=d({},yl,{newState:0,oldState:0}),yy=ca(Zp),D1=[9,13,27,32],Yu=Aa&&"CompositionEvent"in window,So=null;Aa&&"documentMode"in document&&(So=document.documentMode);var M1=Aa&&"TextEvent"in window&&!So,Af=Aa&&(!Yu||So&&8<So&&11>=So),Nf=" ",by=!1;function Yp(c,f){switch(c){case"keyup":return D1.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vy(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var wl=!1;function wy(c,f){switch(c){case"compositionend":return vy(f);case"keypress":return f.which!==32?null:(by=!0,Nf);case"textInput":return c=f.data,c===Nf&&by?null:c;default:return null}}function P1(c,f){if(wl)return c==="compositionend"||!Yu&&Yp(c,f)?(c=_c(),xc=gf=hs=null,wl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Af&&f.locale!=="ko"?null:f.data;default:return null}}var xy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rf(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!xy[c.type]:f==="textarea"}function Xp(c,f,g,_){pl?$r?$r.push(_):$r=[_]:pl=_,f=ib(f,"onChange"),0<f.length&&(g=new yf("onChange","change",null,g,_),c.push({event:g,listeners:f}))}var Cc=null,Xu=null;function F1(c){aI(c,0)}function If(c){var f=xr(c);if(pc(f))return c}function Ju(c,f){if(c==="change")return f}var ps=!1;if(Aa){var Br;if(Aa){var kc="oninput"in document;if(!kc){var gi=document.createElement("div");gi.setAttribute("oninput","return;"),kc=typeof gi.oninput=="function"}Br=kc}else Br=!1;ps=Br&&(!document.documentMode||9<document.documentMode)}function _y(){Cc&&(Cc.detachEvent("onpropertychange",jf),Xu=Cc=null)}function jf(c){if(c.propertyName==="value"&&If(Xu)){var f=[];Xp(f,Xu,c,mf(c)),wc(F1,f)}}function Sy(c,f,g){c==="focusin"?(_y(),Cc=f,Xu=g,Cc.attachEvent("onpropertychange",jf)):c==="focusout"&&_y()}function xl(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return If(Xu)}function Jp(c,f){if(c==="click")return If(f)}function Tc(c,f){if(c==="input"||c==="change")return If(f)}function Eo(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Qa=typeof Object.is=="function"?Object.is:Eo;function A(c,f){if(Qa(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var g=Object.keys(c),_=Object.keys(f);if(g.length!==_.length)return!1;for(_=0;_<g.length;_++){var N=g[_];if(!Le.call(f,N)||!Qa(c[N],f[N]))return!1}return!0}function M(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Y(c,f){var g=M(c);c=0;for(var _;g;){if(g.nodeType===3){if(_=c+g.textContent.length,c<=f&&_>=f)return{node:g,offset:f-c};c=_}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=M(g)}}function re(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?re(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function ce(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=zs(c.document);f instanceof c.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)c=f.contentWindow;else break;f=zs(c.document)}return f}function we(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var Me=Aa&&"documentMode"in document&&11>=document.documentMode,$e=null,We=null,Xe=null,rt=!1;function qe(c,f,g){var _=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;rt||$e==null||$e!==zs(_)||(_=$e,"selectionStart"in _&&we(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),Xe&&A(Xe,_)||(Xe=_,_=ib(We,"onSelect"),0<_.length&&(f=new yf("onSelect","select",null,f,g),c.push({event:f,listeners:_}),f.target=$e)))}function st(c,f){var g={};return g[c.toLowerCase()]=f.toLowerCase(),g["Webkit"+c]="webkit"+f,g["Moz"+c]="moz"+f,g}var Ve={animationend:st("Animation","AnimationEnd"),animationiteration:st("Animation","AnimationIteration"),animationstart:st("Animation","AnimationStart"),transitionrun:st("Transition","TransitionRun"),transitionstart:st("Transition","TransitionStart"),transitioncancel:st("Transition","TransitionCancel"),transitionend:st("Transition","TransitionEnd")},tt={},ot={};Aa&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete Ve.animationend.animation,delete Ve.animationiteration.animation,delete Ve.animationstart.animation),"TransitionEvent"in window||delete Ve.transitionend.transition);function Je(c){if(tt[c])return tt[c];if(!Ve[c])return c;var f=Ve[c],g;for(g in f)if(f.hasOwnProperty(g)&&g in ot)return tt[c]=f[g];return c}var ht=Je("animationend"),bt=Je("animationiteration"),wt=Je("animationstart"),Tt=Je("transitionrun"),Ht=Je("transitionstart"),Yt=Je("transitioncancel"),Bt=Je("transitionend"),Gt=new Map,Xt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xt.push("scrollEnd");function zt(c,f){Gt.set(c,f),yo(f,[c])}var nn=new WeakMap;function pn(c,f){if(typeof c=="object"&&c!==null){var g=nn.get(c);return g!==void 0?g:(f={value:c,source:f,stack:Op(f)},nn.set(c,f),f)}return{value:c,source:f,stack:Op(f)}}var gn=[],Nn=0,Va=0;function _n(){for(var c=Nn,f=Va=Nn=0;f<c;){var g=gn[f];gn[f++]=null;var _=gn[f];gn[f++]=null;var N=gn[f];gn[f++]=null;var L=gn[f];if(gn[f++]=null,_!==null&&N!==null){var oe=_.pending;oe===null?N.next=N:(N.next=oe.next,oe.next=N),_.pending=N}L!==0&&Ra(g,N,L)}}function aa(c,f,g,_){gn[Nn++]=c,gn[Nn++]=f,gn[Nn++]=g,gn[Nn++]=_,Va|=_,c.lanes|=_,c=c.alternate,c!==null&&(c.lanes|=_)}function ua(c,f,g,_){return aa(c,f,g,_),ms(c)}function Us(c,f){return aa(c,null,null,f),ms(c)}function Ra(c,f,g){c.lanes|=g;var _=c.alternate;_!==null&&(_.lanes|=g);for(var N=!1,L=c.return;L!==null;)L.childLanes|=g,_=L.alternate,_!==null&&(_.childLanes|=g),L.tag===22&&(c=L.stateNode,c===null||c._visibility&1||(N=!0)),c=L,L=L.return;return c.tag===3?(L=c.stateNode,N&&f!==null&&(N=31-Zt(g),c=L.hiddenUpdates,_=c[N],_===null?c[N]=[f]:_.push(f),f.lane=g|536870912),L):null}function ms(c){if(50<Sm)throw Sm=0,H_=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var Co={};function O7(c,f,g,_){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ki(c,f,g,_){return new O7(c,f,g,_)}function L1(c){return c=c.prototype,!(!c||!c.isReactComponent)}function _l(c,f){var g=c.alternate;return g===null?(g=Ki(c.tag,f,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=f,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&65011712,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,f=c.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g.refCleanup=c.refCleanup,g}function HA(c,f){c.flags&=65011714;var g=c.alternate;return g===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=g.childLanes,c.lanes=g.lanes,c.child=g.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=g.memoizedProps,c.memoizedState=g.memoizedState,c.updateQueue=g.updateQueue,c.type=g.type,f=g.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Ey(c,f,g,_,N,L){var oe=0;if(_=c,typeof c=="function")L1(c)&&(oe=1);else if(typeof c=="string")oe=MU(c,g,fe.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case F:return c=Ki(31,g,f,N),c.elementType=F,c.lanes=L,c;case v:return Qu(g.children,N,L,f);case b:oe=8,N|=24;break;case x:return c=Ki(12,g,f,N|2),c.elementType=x,c.lanes=L,c;case k:return c=Ki(13,g,f,N),c.elementType=k,c.lanes=L,c;case I:return c=Ki(19,g,f,N),c.elementType=I,c.lanes=L,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case w:case E:oe=10;break e;case S:oe=9;break e;case C:oe=11;break e;case R:oe=14;break e;case j:oe=16,_=null;break e}oe=29,g=Error(r(130,c===null?"null":typeof c,"")),_=null}return f=Ki(oe,g,f,N),f.elementType=c,f.type=_,f.lanes=L,f}function Qu(c,f,g,_){return c=Ki(7,c,_,f),c.lanes=g,c}function $1(c,f,g){return c=Ki(6,c,null,f),c.lanes=g,c}function B1(c,f,g){return f=Ki(4,c.children!==null?c.children:[],c.key,f),f.lanes=g,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var Of=[],Df=0,Cy=null,ky=0,gs=[],ys=0,ed=null,Sl=1,El="";function td(c,f){Of[Df++]=ky,Of[Df++]=Cy,Cy=c,ky=f}function qA(c,f,g){gs[ys++]=Sl,gs[ys++]=El,gs[ys++]=ed,ed=c;var _=Sl;c=El;var N=32-Zt(_)-1;_&=~(1<<N),g+=1;var L=32-Zt(f)+N;if(30<L){var oe=N-N%5;L=(_&(1<<oe)-1).toString(32),_>>=oe,N-=oe,Sl=1<<32-Zt(f)+N|g<<N|_,El=L+c}else Sl=1<<L|g<<N|_,El=c}function z1(c){c.return!==null&&(td(c,1),qA(c,1,0))}function U1(c){for(;c===Cy;)Cy=Of[--Df],Of[Df]=null,ky=Of[--Df],Of[Df]=null;for(;c===ed;)ed=gs[--ys],gs[ys]=null,El=gs[--ys],gs[ys]=null,Sl=gs[--ys],gs[ys]=null}var yi=null,Qr=null,cr=!1,nd=null,ko=!1,H1=Error(r(519));function rd(c){var f=Error(r(418,""));throw tm(pn(f,c)),H1}function VA(c){var f=c.stateNode,g=c.type,_=c.memoizedProps;switch(f[pe]=c,f[Re]=_,g){case"dialog":Yn("cancel",f),Yn("close",f);break;case"iframe":case"object":case"embed":Yn("load",f);break;case"video":case"audio":for(g=0;g<Cm.length;g++)Yn(Cm[g],f);break;case"source":Yn("error",f);break;case"img":case"image":case"link":Yn("error",f),Yn("load",f);break;case"details":Yn("toggle",f);break;case"input":Yn("invalid",f),Pp(f,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),xo(f);break;case"select":Yn("invalid",f);break;case"textarea":Yn("invalid",f),Fp(f,_.value,_.defaultValue,_.children),xo(f)}g=_.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||_.suppressHydrationWarning===!0||lI(f.textContent,g)?(_.popover!=null&&(Yn("beforetoggle",f),Yn("toggle",f)),_.onScroll!=null&&Yn("scroll",f),_.onScrollEnd!=null&&Yn("scrollend",f),_.onClick!=null&&(f.onclick=sb),f=!0):f=!1,f||rd(c)}function GA(c){for(yi=c.return;yi;)switch(yi.tag){case 5:case 13:ko=!1;return;case 27:case 3:ko=!0;return;default:yi=yi.return}}function Qp(c){if(c!==yi)return!1;if(!cr)return GA(c),cr=!0,!1;var f=c.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=c.type,g=!(g!=="form"&&g!=="button")||iS(c.type,c.memoizedProps)),g=!g),g&&Qr&&rd(c),GA(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(g=c.data,g==="/$"){if(f===0){Qr=qs(c.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;c=c.nextSibling}Qr=null}}else f===27?(f=Qr,Hc(c.type)?(c=cS,cS=null,Qr=c):Qr=f):Qr=yi?qs(c.stateNode.nextSibling):null;return!0}function em(){Qr=yi=null,cr=!1}function KA(){var c=nd;return c!==null&&(ji===null?ji=c:ji.push.apply(ji,c),nd=null),c}function tm(c){nd===null?nd=[c]:nd.push(c)}var q1=J(null),ad=null,Cl=null;function Ac(c,f,g){te(q1,f._currentValue),f._currentValue=g}function kl(c){c._currentValue=q1.current,ee(q1)}function V1(c,f,g){for(;c!==null;){var _=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,_!==null&&(_.childLanes|=f)):_!==null&&(_.childLanes&f)!==f&&(_.childLanes|=f),c===g)break;c=c.return}}function G1(c,f,g,_){var N=c.child;for(N!==null&&(N.return=c);N!==null;){var L=N.dependencies;if(L!==null){var oe=N.child;L=L.firstContext;e:for(;L!==null;){var _e=L;L=N;for(var ze=0;ze<f.length;ze++)if(_e.context===f[ze]){L.lanes|=g,_e=L.alternate,_e!==null&&(_e.lanes|=g),V1(L.return,g,c),_||(oe=null);break e}L=_e.next}}else if(N.tag===18){if(oe=N.return,oe===null)throw Error(r(341));oe.lanes|=g,L=oe.alternate,L!==null&&(L.lanes|=g),V1(oe,g,c),oe=null}else oe=N.child;if(oe!==null)oe.return=N;else for(oe=N;oe!==null;){if(oe===c){oe=null;break}if(N=oe.sibling,N!==null){N.return=oe.return,oe=N;break}oe=oe.return}N=oe}}function nm(c,f,g,_){c=null;for(var N=f,L=!1;N!==null;){if(!L){if((N.flags&524288)!==0)L=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var oe=N.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var _e=N.type;Qa(N.pendingProps.value,oe.value)||(c!==null?c.push(_e):c=[_e])}}else if(N===Ae.current){if(oe=N.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(c!==null?c.push(Im):c=[Im])}N=N.return}c!==null&&G1(f,c,g,_),f.flags|=262144}function Ty(c){for(c=c.firstContext;c!==null;){if(!Qa(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function id(c){ad=c,Cl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function ei(c){return WA(ad,c)}function Ay(c,f){return ad===null&&id(c),WA(c,f)}function WA(c,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},Cl===null){if(c===null)throw Error(r(308));Cl=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Cl=Cl.next=f;return g}var D7=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(g,_){c.push(_)}};this.abort=function(){f.aborted=!0,c.forEach(function(g){return g()})}},M7=e.unstable_scheduleCallback,P7=e.unstable_NormalPriority,ba={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function K1(){return{controller:new D7,data:new Map,refCount:0}}function rm(c){c.refCount--,c.refCount===0&&M7(P7,function(){c.controller.abort()})}var am=null,W1=0,Mf=0,Pf=null;function F7(c,f){if(am===null){var g=am=[];W1=0,Mf=Y_(),Pf={status:"pending",value:void 0,then:function(_){g.push(_)}}}return W1++,f.then(ZA,ZA),f}function ZA(){if(--W1===0&&am!==null){Pf!==null&&(Pf.status="fulfilled");var c=am;am=null,Mf=0,Pf=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function L7(c,f){var g=[],_={status:"pending",value:null,reason:null,then:function(N){g.push(N)}};return c.then(function(){_.status="fulfilled",_.value=f;for(var N=0;N<g.length;N++)(0,g[N])(f)},function(N){for(_.status="rejected",_.reason=N,N=0;N<g.length;N++)(0,g[N])(void 0)}),_}var YA=ie.S;ie.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&F7(c,f),YA!==null&&YA(c,f)};var sd=J(null);function Z1(){var c=sd.current;return c!==null?c:Pr.pooledCache}function Ny(c,f){f===null?te(sd,sd.current):te(sd,f.pool)}function XA(){var c=Z1();return c===null?null:{parent:ba._currentValue,pool:c}}var im=Error(r(460)),JA=Error(r(474)),Ry=Error(r(542)),Y1={then:function(){}};function QA(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Iy(){}function eN(c,f,g){switch(g=c[g],g===void 0?c.push(f):g!==f&&(f.then(Iy,Iy),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,nN(c),c;default:if(typeof f.status=="string")f.then(Iy,Iy);else{if(c=Pr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(_){if(f.status==="pending"){var N=f;N.status="fulfilled",N.value=_}},function(_){if(f.status==="pending"){var N=f;N.status="rejected",N.reason=_}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,nN(c),c}throw sm=f,im}}var sm=null;function tN(){if(sm===null)throw Error(r(459));var c=sm;return sm=null,c}function nN(c){if(c===im||c===Ry)throw Error(r(483))}var Nc=!1;function X1(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function J1(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Rc(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Ic(c,f,g){var _=c.updateQueue;if(_===null)return null;if(_=_.shared,(gr&2)!==0){var N=_.pending;return N===null?f.next=f:(f.next=N.next,N.next=f),_.pending=f,f=ms(c),Ra(c,null,g),f}return aa(c,_,f,g),ms(c)}function om(c,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var _=f.lanes;_&=c.pendingLanes,g|=_,f.lanes=g,Ke(c,g)}}function Q1(c,f){var g=c.updateQueue,_=c.alternate;if(_!==null&&(_=_.updateQueue,g===_)){var N=null,L=null;if(g=g.firstBaseUpdate,g!==null){do{var oe={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};L===null?N=L=oe:L=L.next=oe,g=g.next}while(g!==null);L===null?N=L=f:L=L.next=f}else N=L=f;g={baseState:_.baseState,firstBaseUpdate:N,lastBaseUpdate:L,shared:_.shared,callbacks:_.callbacks},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=f:c.next=f,g.lastBaseUpdate=f}var e_=!1;function lm(){if(e_){var c=Pf;if(c!==null)throw c}}function cm(c,f,g,_){e_=!1;var N=c.updateQueue;Nc=!1;var L=N.firstBaseUpdate,oe=N.lastBaseUpdate,_e=N.shared.pending;if(_e!==null){N.shared.pending=null;var ze=_e,dt=ze.next;ze.next=null,oe===null?L=dt:oe.next=dt,oe=ze;var At=c.alternate;At!==null&&(At=At.updateQueue,_e=At.lastBaseUpdate,_e!==oe&&(_e===null?At.firstBaseUpdate=dt:_e.next=dt,At.lastBaseUpdate=ze))}if(L!==null){var Mt=N.baseState;oe=0,At=dt=ze=null,_e=L;do{var mt=_e.lane&-536870913,yt=mt!==_e.lane;if(yt?(nr&mt)===mt:(_&mt)===mt){mt!==0&&mt===Mf&&(e_=!0),At!==null&&(At=At.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Sn=c,yn=_e;mt=f;var Cr=g;switch(yn.tag){case 1:if(Sn=yn.payload,typeof Sn=="function"){Mt=Sn.call(Cr,Mt,mt);break e}Mt=Sn;break e;case 3:Sn.flags=Sn.flags&-65537|128;case 0:if(Sn=yn.payload,mt=typeof Sn=="function"?Sn.call(Cr,Mt,mt):Sn,mt==null)break e;Mt=d({},Mt,mt);break e;case 2:Nc=!0}}mt=_e.callback,mt!==null&&(c.flags|=64,yt&&(c.flags|=8192),yt=N.callbacks,yt===null?N.callbacks=[mt]:yt.push(mt))}else yt={lane:mt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},At===null?(dt=At=yt,ze=Mt):At=At.next=yt,oe|=mt;if(_e=_e.next,_e===null){if(_e=N.shared.pending,_e===null)break;yt=_e,_e=yt.next,yt.next=null,N.lastBaseUpdate=yt,N.shared.pending=null}}while(!0);At===null&&(ze=Mt),N.baseState=ze,N.firstBaseUpdate=dt,N.lastBaseUpdate=At,L===null&&(N.shared.lanes=0),$c|=oe,c.lanes=oe,c.memoizedState=Mt}}function rN(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function aN(c,f){var g=c.callbacks;if(g!==null)for(c.callbacks=null,c=0;c<g.length;c++)rN(g[c],f)}var Ff=J(null),jy=J(0);function iN(c,f){c=Ol,te(jy,c),te(Ff,f),Ol=c|f.baseLanes}function t_(){te(jy,Ol),te(Ff,Ff.current)}function n_(){Ol=jy.current,ee(Ff),ee(jy)}var jc=0,zn=null,Sr=null,da=null,Oy=!1,Lf=!1,od=!1,Dy=0,um=0,$f=null,$7=0;function ia(){throw Error(r(321))}function r_(c,f){if(f===null)return!1;for(var g=0;g<f.length&&g<c.length;g++)if(!Qa(c[g],f[g]))return!1;return!0}function a_(c,f,g,_,N,L){return jc=L,zn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ie.H=c===null||c.memoizedState===null?UN:HN,od=!1,L=g(_,N),od=!1,Lf&&(L=oN(f,g,_,N)),sN(c),L}function sN(c){ie.H=By;var f=Sr!==null&&Sr.next!==null;if(jc=0,da=Sr=zn=null,Oy=!1,um=0,$f=null,f)throw Error(r(300));c===null||Ia||(c=c.dependencies,c!==null&&Ty(c)&&(Ia=!0))}function oN(c,f,g,_){zn=c;var N=0;do{if(Lf&&($f=null),um=0,Lf=!1,25<=N)throw Error(r(301));if(N+=1,da=Sr=null,c.updateQueue!=null){var L=c.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}ie.H=G7,L=f(g,_)}while(Lf);return L}function B7(){var c=ie.H,f=c.useState()[0];return f=typeof f.then=="function"?dm(f):f,c=c.useState()[0],(Sr!==null?Sr.memoizedState:null)!==c&&(zn.flags|=1024),f}function i_(){var c=Dy!==0;return Dy=0,c}function s_(c,f,g){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~g}function o_(c){if(Oy){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Oy=!1}jc=0,da=Sr=zn=null,Lf=!1,um=Dy=0,$f=null}function Ri(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return da===null?zn.memoizedState=da=c:da=da.next=c,da}function fa(){if(Sr===null){var c=zn.alternate;c=c!==null?c.memoizedState:null}else c=Sr.next;var f=da===null?zn.memoizedState:da.next;if(f!==null)da=f,Sr=c;else{if(c===null)throw zn.alternate===null?Error(r(467)):Error(r(310));Sr=c,c={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},da===null?zn.memoizedState=da=c:da=da.next=c}return da}function l_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dm(c){var f=um;return um+=1,$f===null&&($f=[]),c=eN($f,c,f),f=zn,(da===null?f.memoizedState:da.next)===null&&(f=f.alternate,ie.H=f===null||f.memoizedState===null?UN:HN),c}function My(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return dm(c);if(c.$$typeof===E)return ei(c)}throw Error(r(438,String(c)))}function c_(c){var f=null,g=zn.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var _=zn.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(f={data:_.data.map(function(N){return N.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=l_(),zn.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(c),_=0;_<c;_++)g[_]=$;return f.index++,g}function Tl(c,f){return typeof f=="function"?f(c):f}function Py(c){var f=fa();return u_(f,Sr,c)}function u_(c,f,g){var _=c.queue;if(_===null)throw Error(r(311));_.lastRenderedReducer=g;var N=c.baseQueue,L=_.pending;if(L!==null){if(N!==null){var oe=N.next;N.next=L.next,L.next=oe}f.baseQueue=N=L,_.pending=null}if(L=c.baseState,N===null)c.memoizedState=L;else{f=N.next;var _e=oe=null,ze=null,dt=f,At=!1;do{var Mt=dt.lane&-536870913;if(Mt!==dt.lane?(nr&Mt)===Mt:(jc&Mt)===Mt){var mt=dt.revertLane;if(mt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Mt===Mf&&(At=!0);else if((jc&mt)===mt){dt=dt.next,mt===Mf&&(At=!0);continue}else Mt={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=Mt,oe=L):ze=ze.next=Mt,zn.lanes|=mt,$c|=mt;Mt=dt.action,od&&g(L,Mt),L=dt.hasEagerState?dt.eagerState:g(L,Mt)}else mt={lane:Mt,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(_e=ze=mt,oe=L):ze=ze.next=mt,zn.lanes|=Mt,$c|=Mt;dt=dt.next}while(dt!==null&&dt!==f);if(ze===null?oe=L:ze.next=_e,!Qa(L,c.memoizedState)&&(Ia=!0,At&&(g=Pf,g!==null)))throw g;c.memoizedState=L,c.baseState=oe,c.baseQueue=ze,_.lastRenderedState=L}return N===null&&(_.lanes=0),[c.memoizedState,_.dispatch]}function d_(c){var f=fa(),g=f.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var _=g.dispatch,N=g.pending,L=f.memoizedState;if(N!==null){g.pending=null;var oe=N=N.next;do L=c(L,oe.action),oe=oe.next;while(oe!==N);Qa(L,f.memoizedState)||(Ia=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),g.lastRenderedState=L}return[L,_]}function lN(c,f,g){var _=zn,N=fa(),L=cr;if(L){if(g===void 0)throw Error(r(407));g=g()}else g=f();var oe=!Qa((Sr||N).memoizedState,g);oe&&(N.memoizedState=g,Ia=!0),N=N.queue;var _e=dN.bind(null,_,N,c);if(fm(2048,8,_e,[c]),N.getSnapshot!==f||oe||da!==null&&da.memoizedState.tag&1){if(_.flags|=2048,Bf(9,Fy(),uN.bind(null,_,N,g,f),null),Pr===null)throw Error(r(349));L||(jc&124)!==0||cN(_,f,g)}return g}function cN(c,f,g){c.flags|=16384,c={getSnapshot:f,value:g},f=zn.updateQueue,f===null?(f=l_(),zn.updateQueue=f,f.stores=[c]):(g=f.stores,g===null?f.stores=[c]:g.push(c))}function uN(c,f,g,_){f.value=g,f.getSnapshot=_,fN(f)&&hN(c)}function dN(c,f,g){return g(function(){fN(f)&&hN(c)})}function fN(c){var f=c.getSnapshot;c=c.value;try{var g=f();return!Qa(c,g)}catch{return!0}}function hN(c){var f=Us(c,2);f!==null&&Ji(f,c,2)}function f_(c){var f=Ri();if(typeof c=="function"){var g=c;if(c=g(),od){Dt(!0);try{g()}finally{Dt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:c},f}function pN(c,f,g,_){return c.baseState=g,u_(c,Sr,typeof _=="function"?_:Tl)}function z7(c,f,g,_,N){if($y(c))throw Error(r(485));if(c=f.action,c!==null){var L={payload:N,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){L.listeners.push(oe)}};ie.T!==null?g(!0):L.isTransition=!1,_(L),g=f.pending,g===null?(L.next=f.pending=L,mN(f,L)):(L.next=g.next,f.pending=g.next=L)}}function mN(c,f){var g=f.action,_=f.payload,N=c.state;if(f.isTransition){var L=ie.T,oe={};ie.T=oe;try{var _e=g(N,_),ze=ie.S;ze!==null&&ze(oe,_e),gN(c,f,_e)}catch(dt){h_(c,f,dt)}finally{ie.T=L}}else try{L=g(N,_),gN(c,f,L)}catch(dt){h_(c,f,dt)}}function gN(c,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(_){yN(c,f,_)},function(_){return h_(c,f,_)}):yN(c,f,g)}function yN(c,f,g){f.status="fulfilled",f.value=g,bN(f),c.state=g,f=c.pending,f!==null&&(g=f.next,g===f?c.pending=null:(g=g.next,f.next=g,mN(c,g)))}function h_(c,f,g){var _=c.pending;if(c.pending=null,_!==null){_=_.next;do f.status="rejected",f.reason=g,bN(f),f=f.next;while(f!==_)}c.action=null}function bN(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function vN(c,f){return f}function wN(c,f){if(cr){var g=Pr.formState;if(g!==null){e:{var _=zn;if(cr){if(Qr){t:{for(var N=Qr,L=ko;N.nodeType!==8;){if(!L){N=null;break t}if(N=qs(N.nextSibling),N===null){N=null;break t}}L=N.data,N=L==="F!"||L==="F"?N:null}if(N){Qr=qs(N.nextSibling),_=N.data==="F!";break e}}rd(_)}_=!1}_&&(f=g[0])}}return g=Ri(),g.memoizedState=g.baseState=f,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vN,lastRenderedState:f},g.queue=_,g=$N.bind(null,zn,_),_.dispatch=g,_=f_(!1),L=b_.bind(null,zn,!1,_.queue),_=Ri(),N={state:f,dispatch:null,action:c,pending:null},_.queue=N,g=z7.bind(null,zn,N,L,g),N.dispatch=g,_.memoizedState=c,[f,g,!1]}function xN(c){var f=fa();return _N(f,Sr,c)}function _N(c,f,g){if(f=u_(c,f,vN)[0],c=Py(Tl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var _=dm(f)}catch(oe){throw oe===im?Ry:oe}else _=f;f=fa();var N=f.queue,L=N.dispatch;return g!==f.memoizedState&&(zn.flags|=2048,Bf(9,Fy(),U7.bind(null,N,g),null)),[_,L,c]}function U7(c,f){c.action=f}function SN(c){var f=fa(),g=Sr;if(g!==null)return _N(f,g,c);fa(),f=f.memoizedState,g=fa();var _=g.queue.dispatch;return g.memoizedState=c,[f,_,!1]}function Bf(c,f,g,_){return c={tag:c,create:g,deps:_,inst:f,next:null},f=zn.updateQueue,f===null&&(f=l_(),zn.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=c.next=c:(_=g.next,g.next=c,c.next=_,f.lastEffect=c),c}function Fy(){return{destroy:void 0,resource:void 0}}function EN(){return fa().memoizedState}function Ly(c,f,g,_){var N=Ri();_=_===void 0?null:_,zn.flags|=c,N.memoizedState=Bf(1|f,Fy(),g,_)}function fm(c,f,g,_){var N=fa();_=_===void 0?null:_;var L=N.memoizedState.inst;Sr!==null&&_!==null&&r_(_,Sr.memoizedState.deps)?N.memoizedState=Bf(f,L,g,_):(zn.flags|=c,N.memoizedState=Bf(1|f,L,g,_))}function CN(c,f){Ly(8390656,8,c,f)}function kN(c,f){fm(2048,8,c,f)}function TN(c,f){return fm(4,2,c,f)}function AN(c,f){return fm(4,4,c,f)}function NN(c,f){if(typeof f=="function"){c=c();var g=f(c);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function RN(c,f,g){g=g!=null?g.concat([c]):null,fm(4,4,NN.bind(null,f,c),g)}function p_(){}function IN(c,f){var g=fa();f=f===void 0?null:f;var _=g.memoizedState;return f!==null&&r_(f,_[1])?_[0]:(g.memoizedState=[c,f],c)}function jN(c,f){var g=fa();f=f===void 0?null:f;var _=g.memoizedState;if(f!==null&&r_(f,_[1]))return _[0];if(_=c(),od){Dt(!0);try{c()}finally{Dt(!1)}}return g.memoizedState=[_,f],_}function m_(c,f,g){return g===void 0||(jc&1073741824)!==0?c.memoizedState=f:(c.memoizedState=g,c=MR(),zn.lanes|=c,$c|=c,g)}function ON(c,f,g,_){return Qa(g,f)?g:Ff.current!==null?(c=m_(c,g,_),Qa(c,f)||(Ia=!0),c):(jc&42)===0?(Ia=!0,c.memoizedState=g):(c=MR(),zn.lanes|=c,$c|=c,f)}function DN(c,f,g,_,N){var L=ne.p;ne.p=L!==0&&8>L?L:8;var oe=ie.T,_e={};ie.T=_e,b_(c,!1,f,g);try{var ze=N(),dt=ie.S;if(dt!==null&&dt(_e,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var At=L7(ze,_);hm(c,f,At,Xi(c))}else hm(c,f,_,Xi(c))}catch(Mt){hm(c,f,{then:function(){},status:"rejected",reason:Mt},Xi())}finally{ne.p=L,ie.T=oe}}function H7(){}function g_(c,f,g,_){if(c.tag!==5)throw Error(r(476));var N=MN(c).queue;DN(c,N,f,X,g===null?H7:function(){return PN(c),g(_)})}function MN(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:X},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tl,lastRenderedState:g},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function PN(c){var f=MN(c).next.queue;hm(c,f,{},Xi())}function y_(){return ei(Im)}function FN(){return fa().memoizedState}function LN(){return fa().memoizedState}function q7(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var g=Xi();c=Rc(g);var _=Ic(f,c,g);_!==null&&(Ji(_,f,g),om(_,f,g)),f={cache:K1()},c.payload=f;return}f=f.return}}function V7(c,f,g){var _=Xi();g={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},$y(c)?BN(f,g):(g=ua(c,f,g,_),g!==null&&(Ji(g,c,_),zN(g,f,_)))}function $N(c,f,g){var _=Xi();hm(c,f,g,_)}function hm(c,f,g,_){var N={lane:_,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if($y(c))BN(f,N);else{var L=c.alternate;if(c.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var oe=f.lastRenderedState,_e=L(oe,g);if(N.hasEagerState=!0,N.eagerState=_e,Qa(_e,oe))return aa(c,f,N,0),Pr===null&&_n(),!1}catch{}finally{}if(g=ua(c,f,N,_),g!==null)return Ji(g,c,_),zN(g,f,_),!0}return!1}function b_(c,f,g,_){if(_={lane:2,revertLane:Y_(),action:_,hasEagerState:!1,eagerState:null,next:null},$y(c)){if(f)throw Error(r(479))}else f=ua(c,g,_,2),f!==null&&Ji(f,c,2)}function $y(c){var f=c.alternate;return c===zn||f!==null&&f===zn}function BN(c,f){Lf=Oy=!0;var g=c.pending;g===null?f.next=f:(f.next=g.next,g.next=f),c.pending=f}function zN(c,f,g){if((g&4194048)!==0){var _=f.lanes;_&=c.pendingLanes,g|=_,f.lanes=g,Ke(c,g)}}var By={readContext:ei,use:My,useCallback:ia,useContext:ia,useEffect:ia,useImperativeHandle:ia,useLayoutEffect:ia,useInsertionEffect:ia,useMemo:ia,useReducer:ia,useRef:ia,useState:ia,useDebugValue:ia,useDeferredValue:ia,useTransition:ia,useSyncExternalStore:ia,useId:ia,useHostTransitionStatus:ia,useFormState:ia,useActionState:ia,useOptimistic:ia,useMemoCache:ia,useCacheRefresh:ia},UN={readContext:ei,use:My,useCallback:function(c,f){return Ri().memoizedState=[c,f===void 0?null:f],c},useContext:ei,useEffect:CN,useImperativeHandle:function(c,f,g){g=g!=null?g.concat([c]):null,Ly(4194308,4,NN.bind(null,f,c),g)},useLayoutEffect:function(c,f){return Ly(4194308,4,c,f)},useInsertionEffect:function(c,f){Ly(4,2,c,f)},useMemo:function(c,f){var g=Ri();f=f===void 0?null:f;var _=c();if(od){Dt(!0);try{c()}finally{Dt(!1)}}return g.memoizedState=[_,f],_},useReducer:function(c,f,g){var _=Ri();if(g!==void 0){var N=g(f);if(od){Dt(!0);try{g(f)}finally{Dt(!1)}}}else N=f;return _.memoizedState=_.baseState=N,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:N},_.queue=c,c=c.dispatch=V7.bind(null,zn,c),[_.memoizedState,c]},useRef:function(c){var f=Ri();return c={current:c},f.memoizedState=c},useState:function(c){c=f_(c);var f=c.queue,g=$N.bind(null,zn,f);return f.dispatch=g,[c.memoizedState,g]},useDebugValue:p_,useDeferredValue:function(c,f){var g=Ri();return m_(g,c,f)},useTransition:function(){var c=f_(!1);return c=DN.bind(null,zn,c.queue,!0,!1),Ri().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,g){var _=zn,N=Ri();if(cr){if(g===void 0)throw Error(r(407));g=g()}else{if(g=f(),Pr===null)throw Error(r(349));(nr&124)!==0||cN(_,f,g)}N.memoizedState=g;var L={value:g,getSnapshot:f};return N.queue=L,CN(dN.bind(null,_,L,c),[c]),_.flags|=2048,Bf(9,Fy(),uN.bind(null,_,L,g,f),null),g},useId:function(){var c=Ri(),f=Pr.identifierPrefix;if(cr){var g=El,_=Sl;g=(_&~(1<<32-Zt(_)-1)).toString(32)+g,f=""+f+"R"+g,g=Dy++,0<g&&(f+="H"+g.toString(32)),f+=""}else g=$7++,f=""+f+"r"+g.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:y_,useFormState:wN,useActionState:wN,useOptimistic:function(c){var f=Ri();f.memoizedState=f.baseState=c;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=b_.bind(null,zn,!0,g),g.dispatch=f,[c,f]},useMemoCache:c_,useCacheRefresh:function(){return Ri().memoizedState=q7.bind(null,zn)}},HN={readContext:ei,use:My,useCallback:IN,useContext:ei,useEffect:kN,useImperativeHandle:RN,useInsertionEffect:TN,useLayoutEffect:AN,useMemo:jN,useReducer:Py,useRef:EN,useState:function(){return Py(Tl)},useDebugValue:p_,useDeferredValue:function(c,f){var g=fa();return ON(g,Sr.memoizedState,c,f)},useTransition:function(){var c=Py(Tl)[0],f=fa().memoizedState;return[typeof c=="boolean"?c:dm(c),f]},useSyncExternalStore:lN,useId:FN,useHostTransitionStatus:y_,useFormState:xN,useActionState:xN,useOptimistic:function(c,f){var g=fa();return pN(g,Sr,c,f)},useMemoCache:c_,useCacheRefresh:LN},G7={readContext:ei,use:My,useCallback:IN,useContext:ei,useEffect:kN,useImperativeHandle:RN,useInsertionEffect:TN,useLayoutEffect:AN,useMemo:jN,useReducer:d_,useRef:EN,useState:function(){return d_(Tl)},useDebugValue:p_,useDeferredValue:function(c,f){var g=fa();return Sr===null?m_(g,c,f):ON(g,Sr.memoizedState,c,f)},useTransition:function(){var c=d_(Tl)[0],f=fa().memoizedState;return[typeof c=="boolean"?c:dm(c),f]},useSyncExternalStore:lN,useId:FN,useHostTransitionStatus:y_,useFormState:SN,useActionState:SN,useOptimistic:function(c,f){var g=fa();return Sr!==null?pN(g,Sr,c,f):(g.baseState=c,[c,g.queue.dispatch])},useMemoCache:c_,useCacheRefresh:LN},zf=null,pm=0;function zy(c){var f=pm;return pm+=1,zf===null&&(zf=[]),eN(zf,c,f)}function mm(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Uy(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function qN(c){var f=c._init;return f(c._payload)}function VN(c){function f(at,Ze){if(c){var ct=at.deletions;ct===null?(at.deletions=[Ze],at.flags|=16):ct.push(Ze)}}function g(at,Ze){if(!c)return null;for(;Ze!==null;)f(at,Ze),Ze=Ze.sibling;return null}function _(at){for(var Ze=new Map;at!==null;)at.key!==null?Ze.set(at.key,at):Ze.set(at.index,at),at=at.sibling;return Ze}function N(at,Ze){return at=_l(at,Ze),at.index=0,at.sibling=null,at}function L(at,Ze,ct){return at.index=ct,c?(ct=at.alternate,ct!==null?(ct=ct.index,ct<Ze?(at.flags|=67108866,Ze):ct):(at.flags|=67108866,Ze)):(at.flags|=1048576,Ze)}function oe(at){return c&&at.alternate===null&&(at.flags|=67108866),at}function _e(at,Ze,ct,It){return Ze===null||Ze.tag!==6?(Ze=$1(ct,at.mode,It),Ze.return=at,Ze):(Ze=N(Ze,ct),Ze.return=at,Ze)}function ze(at,Ze,ct,It){var sn=ct.type;return sn===v?At(at,Ze,ct.props.children,It,ct.key):Ze!==null&&(Ze.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===j&&qN(sn)===Ze.type)?(Ze=N(Ze,ct.props),mm(Ze,ct),Ze.return=at,Ze):(Ze=Ey(ct.type,ct.key,ct.props,null,at.mode,It),mm(Ze,ct),Ze.return=at,Ze)}function dt(at,Ze,ct,It){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ct.containerInfo||Ze.stateNode.implementation!==ct.implementation?(Ze=B1(ct,at.mode,It),Ze.return=at,Ze):(Ze=N(Ze,ct.children||[]),Ze.return=at,Ze)}function At(at,Ze,ct,It,sn){return Ze===null||Ze.tag!==7?(Ze=Qu(ct,at.mode,It,sn),Ze.return=at,Ze):(Ze=N(Ze,ct),Ze.return=at,Ze)}function Mt(at,Ze,ct){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=$1(""+Ze,at.mode,ct),Ze.return=at,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case m:return ct=Ey(Ze.type,Ze.key,Ze.props,null,at.mode,ct),mm(ct,Ze),ct.return=at,ct;case y:return Ze=B1(Ze,at.mode,ct),Ze.return=at,Ze;case j:var It=Ze._init;return Ze=It(Ze._payload),Mt(at,Ze,ct)}if(ue(Ze)||D(Ze))return Ze=Qu(Ze,at.mode,ct,null),Ze.return=at,Ze;if(typeof Ze.then=="function")return Mt(at,zy(Ze),ct);if(Ze.$$typeof===E)return Mt(at,Ay(at,Ze),ct);Uy(at,Ze)}return null}function mt(at,Ze,ct,It){var sn=Ze!==null?Ze.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return sn!==null?null:_e(at,Ze,""+ct,It);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:return ct.key===sn?ze(at,Ze,ct,It):null;case y:return ct.key===sn?dt(at,Ze,ct,It):null;case j:return sn=ct._init,ct=sn(ct._payload),mt(at,Ze,ct,It)}if(ue(ct)||D(ct))return sn!==null?null:At(at,Ze,ct,It,null);if(typeof ct.then=="function")return mt(at,Ze,zy(ct),It);if(ct.$$typeof===E)return mt(at,Ze,Ay(at,ct),It);Uy(at,ct)}return null}function yt(at,Ze,ct,It,sn){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return at=at.get(ct)||null,_e(Ze,at,""+It,sn);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case m:return at=at.get(It.key===null?ct:It.key)||null,ze(Ze,at,It,sn);case y:return at=at.get(It.key===null?ct:It.key)||null,dt(Ze,at,It,sn);case j:var Hn=It._init;return It=Hn(It._payload),yt(at,Ze,ct,It,sn)}if(ue(It)||D(It))return at=at.get(ct)||null,At(Ze,at,It,sn,null);if(typeof It.then=="function")return yt(at,Ze,ct,zy(It),sn);if(It.$$typeof===E)return yt(at,Ze,ct,Ay(Ze,It),sn);Uy(Ze,It)}return null}function Sn(at,Ze,ct,It){for(var sn=null,Hn=null,fn=Ze,wn=Ze=0,Oa=null;fn!==null&&wn<ct.length;wn++){fn.index>wn?(Oa=fn,fn=null):Oa=fn.sibling;var or=mt(at,fn,ct[wn],It);if(or===null){fn===null&&(fn=Oa);break}c&&fn&&or.alternate===null&&f(at,fn),Ze=L(or,Ze,wn),Hn===null?sn=or:Hn.sibling=or,Hn=or,fn=Oa}if(wn===ct.length)return g(at,fn),cr&&td(at,wn),sn;if(fn===null){for(;wn<ct.length;wn++)fn=Mt(at,ct[wn],It),fn!==null&&(Ze=L(fn,Ze,wn),Hn===null?sn=fn:Hn.sibling=fn,Hn=fn);return cr&&td(at,wn),sn}for(fn=_(fn);wn<ct.length;wn++)Oa=yt(fn,at,wn,ct[wn],It),Oa!==null&&(c&&Oa.alternate!==null&&fn.delete(Oa.key===null?wn:Oa.key),Ze=L(Oa,Ze,wn),Hn===null?sn=Oa:Hn.sibling=Oa,Hn=Oa);return c&&fn.forEach(function(Wc){return f(at,Wc)}),cr&&td(at,wn),sn}function yn(at,Ze,ct,It){if(ct==null)throw Error(r(151));for(var sn=null,Hn=null,fn=Ze,wn=Ze=0,Oa=null,or=ct.next();fn!==null&&!or.done;wn++,or=ct.next()){fn.index>wn?(Oa=fn,fn=null):Oa=fn.sibling;var Wc=mt(at,fn,or.value,It);if(Wc===null){fn===null&&(fn=Oa);break}c&&fn&&Wc.alternate===null&&f(at,fn),Ze=L(Wc,Ze,wn),Hn===null?sn=Wc:Hn.sibling=Wc,Hn=Wc,fn=Oa}if(or.done)return g(at,fn),cr&&td(at,wn),sn;if(fn===null){for(;!or.done;wn++,or=ct.next())or=Mt(at,or.value,It),or!==null&&(Ze=L(or,Ze,wn),Hn===null?sn=or:Hn.sibling=or,Hn=or);return cr&&td(at,wn),sn}for(fn=_(fn);!or.done;wn++,or=ct.next())or=yt(fn,at,wn,or.value,It),or!==null&&(c&&or.alternate!==null&&fn.delete(or.key===null?wn:or.key),Ze=L(or,Ze,wn),Hn===null?sn=or:Hn.sibling=or,Hn=or);return c&&fn.forEach(function(KU){return f(at,KU)}),cr&&td(at,wn),sn}function Cr(at,Ze,ct,It){if(typeof ct=="object"&&ct!==null&&ct.type===v&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:e:{for(var sn=ct.key;Ze!==null;){if(Ze.key===sn){if(sn=ct.type,sn===v){if(Ze.tag===7){g(at,Ze.sibling),It=N(Ze,ct.props.children),It.return=at,at=It;break e}}else if(Ze.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===j&&qN(sn)===Ze.type){g(at,Ze.sibling),It=N(Ze,ct.props),mm(It,ct),It.return=at,at=It;break e}g(at,Ze);break}else f(at,Ze);Ze=Ze.sibling}ct.type===v?(It=Qu(ct.props.children,at.mode,It,ct.key),It.return=at,at=It):(It=Ey(ct.type,ct.key,ct.props,null,at.mode,It),mm(It,ct),It.return=at,at=It)}return oe(at);case y:e:{for(sn=ct.key;Ze!==null;){if(Ze.key===sn)if(Ze.tag===4&&Ze.stateNode.containerInfo===ct.containerInfo&&Ze.stateNode.implementation===ct.implementation){g(at,Ze.sibling),It=N(Ze,ct.children||[]),It.return=at,at=It;break e}else{g(at,Ze);break}else f(at,Ze);Ze=Ze.sibling}It=B1(ct,at.mode,It),It.return=at,at=It}return oe(at);case j:return sn=ct._init,ct=sn(ct._payload),Cr(at,Ze,ct,It)}if(ue(ct))return Sn(at,Ze,ct,It);if(D(ct)){if(sn=D(ct),typeof sn!="function")throw Error(r(150));return ct=sn.call(ct),yn(at,Ze,ct,It)}if(typeof ct.then=="function")return Cr(at,Ze,zy(ct),It);if(ct.$$typeof===E)return Cr(at,Ze,Ay(at,ct),It);Uy(at,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ze!==null&&Ze.tag===6?(g(at,Ze.sibling),It=N(Ze,ct),It.return=at,at=It):(g(at,Ze),It=$1(ct,at.mode,It),It.return=at,at=It),oe(at)):g(at,Ze)}return function(at,Ze,ct,It){try{pm=0;var sn=Cr(at,Ze,ct,It);return zf=null,sn}catch(fn){if(fn===im||fn===Ry)throw fn;var Hn=Ki(29,fn,null,at.mode);return Hn.lanes=It,Hn.return=at,Hn}finally{}}}var Uf=VN(!0),GN=VN(!1),bs=J(null),To=null;function Oc(c){var f=c.alternate;te(va,va.current&1),te(bs,c),To===null&&(f===null||Ff.current!==null||f.memoizedState!==null)&&(To=c)}function KN(c){if(c.tag===22){if(te(va,va.current),te(bs,c),To===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(To=c)}}else Dc()}function Dc(){te(va,va.current),te(bs,bs.current)}function Al(c){ee(bs),To===c&&(To=null),ee(va)}var va=J(0);function Hy(c){for(var f=c;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||lS(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function v_(c,f,g,_){f=c.memoizedState,g=g(_,f),g=g==null?f:d({},f,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var w_={enqueueSetState:function(c,f,g){c=c._reactInternals;var _=Xi(),N=Rc(_);N.payload=f,g!=null&&(N.callback=g),f=Ic(c,N,_),f!==null&&(Ji(f,c,_),om(f,c,_))},enqueueReplaceState:function(c,f,g){c=c._reactInternals;var _=Xi(),N=Rc(_);N.tag=1,N.payload=f,g!=null&&(N.callback=g),f=Ic(c,N,_),f!==null&&(Ji(f,c,_),om(f,c,_))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var g=Xi(),_=Rc(g);_.tag=2,f!=null&&(_.callback=f),f=Ic(c,_,g),f!==null&&(Ji(f,c,g),om(f,c,g))}};function WN(c,f,g,_,N,L,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(_,L,oe):f.prototype&&f.prototype.isPureReactComponent?!A(g,_)||!A(N,L):!0}function ZN(c,f,g,_){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,_),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,_),f.state!==c&&w_.enqueueReplaceState(f,f.state,null)}function ld(c,f){var g=f;if("ref"in f){g={};for(var _ in f)_!=="ref"&&(g[_]=f[_])}if(c=c.defaultProps){g===f&&(g=d({},g));for(var N in c)g[N]===void 0&&(g[N]=c[N])}return g}var qy=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof ta=="object"&&typeof ta.emit=="function"){ta.emit("uncaughtException",c);return}console.error(c)};function YN(c){qy(c)}function XN(c){console.error(c)}function JN(c){qy(c)}function Vy(c,f){try{var g=c.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(_){setTimeout(function(){throw _})}}function QN(c,f,g){try{var _=c.onCaughtError;_(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function x_(c,f,g){return g=Rc(g),g.tag=3,g.payload={element:null},g.callback=function(){Vy(c,f)},g}function eR(c){return c=Rc(c),c.tag=3,c}function tR(c,f,g,_){var N=g.type.getDerivedStateFromError;if(typeof N=="function"){var L=_.value;c.payload=function(){return N(L)},c.callback=function(){QN(f,g,_)}}var oe=g.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(c.callback=function(){QN(f,g,_),typeof N!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var _e=_.stack;this.componentDidCatch(_.value,{componentStack:_e!==null?_e:""})})}function K7(c,f,g,_,N){if(g.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(f=g.alternate,f!==null&&nm(f,g,N,!0),g=bs.current,g!==null){switch(g.tag){case 13:return To===null?V_():g.alternate===null&&ea===0&&(ea=3),g.flags&=-257,g.flags|=65536,g.lanes=N,_===Y1?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([_]):f.add(_),K_(c,_,N)),!1;case 22:return g.flags|=65536,_===Y1?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([_])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([_]):g.add(_)),K_(c,_,N)),!1}throw Error(r(435,g.tag))}return K_(c,_,N),V_(),!1}if(cr)return f=bs.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=N,_!==H1&&(c=Error(r(422),{cause:_}),tm(pn(c,g)))):(_!==H1&&(f=Error(r(423),{cause:_}),tm(pn(f,g))),c=c.current.alternate,c.flags|=65536,N&=-N,c.lanes|=N,_=pn(_,g),N=x_(c.stateNode,_,N),Q1(c,N),ea!==4&&(ea=2)),!1;var L=Error(r(520),{cause:_});if(L=pn(L,g),_m===null?_m=[L]:_m.push(L),ea!==4&&(ea=2),f===null)return!0;_=pn(_,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,c=N&-N,g.lanes|=c,c=x_(g.stateNode,_,c),Q1(g,c),!1;case 1:if(f=g.type,L=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Bc===null||!Bc.has(L))))return g.flags|=65536,N&=-N,g.lanes|=N,N=eR(N),tR(N,c,g,_),Q1(g,N),!1}g=g.return}while(g!==null);return!1}var nR=Error(r(461)),Ia=!1;function Ga(c,f,g,_){f.child=c===null?GN(f,null,g,_):Uf(f,c.child,g,_)}function rR(c,f,g,_,N){g=g.render;var L=f.ref;if("ref"in _){var oe={};for(var _e in _)_e!=="ref"&&(oe[_e]=_[_e])}else oe=_;return id(f),_=a_(c,f,g,oe,L,N),_e=i_(),c!==null&&!Ia?(s_(c,f,N),Nl(c,f,N)):(cr&&_e&&z1(f),f.flags|=1,Ga(c,f,_,N),f.child)}function aR(c,f,g,_,N){if(c===null){var L=g.type;return typeof L=="function"&&!L1(L)&&L.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=L,iR(c,f,L,_,N)):(c=Ey(g.type,null,_,f,f.mode,N),c.ref=f.ref,c.return=f,f.child=c)}if(L=c.child,!N_(c,N)){var oe=L.memoizedProps;if(g=g.compare,g=g!==null?g:A,g(oe,_)&&c.ref===f.ref)return Nl(c,f,N)}return f.flags|=1,c=_l(L,_),c.ref=f.ref,c.return=f,f.child=c}function iR(c,f,g,_,N){if(c!==null){var L=c.memoizedProps;if(A(L,_)&&c.ref===f.ref)if(Ia=!1,f.pendingProps=_=L,N_(c,N))(c.flags&131072)!==0&&(Ia=!0);else return f.lanes=c.lanes,Nl(c,f,N)}return __(c,f,g,_,N)}function sR(c,f,g){var _=f.pendingProps,N=_.children,L=c!==null?c.memoizedState:null;if(_.mode==="hidden"){if((f.flags&128)!==0){if(_=L!==null?L.baseLanes|g:g,c!==null){for(N=f.child=c.child,L=0;N!==null;)L=L|N.lanes|N.childLanes,N=N.sibling;f.childLanes=L&~_}else f.childLanes=0,f.child=null;return oR(c,f,_,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Ny(f,L!==null?L.cachePool:null),L!==null?iN(f,L):t_(),KN(f);else return f.lanes=f.childLanes=536870912,oR(c,f,L!==null?L.baseLanes|g:g,g)}else L!==null?(Ny(f,L.cachePool),iN(f,L),Dc(),f.memoizedState=null):(c!==null&&Ny(f,null),t_(),Dc());return Ga(c,f,N,g),f.child}function oR(c,f,g,_){var N=Z1();return N=N===null?null:{parent:ba._currentValue,pool:N},f.memoizedState={baseLanes:g,cachePool:N},c!==null&&Ny(f,null),t_(),KN(f),c!==null&&nm(c,f,_,!0),null}function Gy(c,f){var g=f.ref;if(g===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(r(284));(c===null||c.ref!==g)&&(f.flags|=4194816)}}function __(c,f,g,_,N){return id(f),g=a_(c,f,g,_,void 0,N),_=i_(),c!==null&&!Ia?(s_(c,f,N),Nl(c,f,N)):(cr&&_&&z1(f),f.flags|=1,Ga(c,f,g,N),f.child)}function lR(c,f,g,_,N,L){return id(f),f.updateQueue=null,g=oN(f,_,g,N),sN(c),_=i_(),c!==null&&!Ia?(s_(c,f,L),Nl(c,f,L)):(cr&&_&&z1(f),f.flags|=1,Ga(c,f,g,L),f.child)}function cR(c,f,g,_,N){if(id(f),f.stateNode===null){var L=Co,oe=g.contextType;typeof oe=="object"&&oe!==null&&(L=ei(oe)),L=new g(_,L),f.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=w_,f.stateNode=L,L._reactInternals=f,L=f.stateNode,L.props=_,L.state=f.memoizedState,L.refs={},X1(f),oe=g.contextType,L.context=typeof oe=="object"&&oe!==null?ei(oe):Co,L.state=f.memoizedState,oe=g.getDerivedStateFromProps,typeof oe=="function"&&(v_(f,g,oe,_),L.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(oe=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),oe!==L.state&&w_.enqueueReplaceState(L,L.state,null),cm(f,_,L,N),lm(),L.state=f.memoizedState),typeof L.componentDidMount=="function"&&(f.flags|=4194308),_=!0}else if(c===null){L=f.stateNode;var _e=f.memoizedProps,ze=ld(g,_e);L.props=ze;var dt=L.context,At=g.contextType;oe=Co,typeof At=="object"&&At!==null&&(oe=ei(At));var Mt=g.getDerivedStateFromProps;At=typeof Mt=="function"||typeof L.getSnapshotBeforeUpdate=="function",_e=f.pendingProps!==_e,At||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(_e||dt!==oe)&&ZN(f,L,_,oe),Nc=!1;var mt=f.memoizedState;L.state=mt,cm(f,_,L,N),lm(),dt=f.memoizedState,_e||mt!==dt||Nc?(typeof Mt=="function"&&(v_(f,g,Mt,_),dt=f.memoizedState),(ze=Nc||WN(f,g,ze,_,mt,dt,oe))?(At||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(f.flags|=4194308)):(typeof L.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=_,f.memoizedState=dt),L.props=_,L.state=dt,L.context=oe,_=ze):(typeof L.componentDidMount=="function"&&(f.flags|=4194308),_=!1)}else{L=f.stateNode,J1(c,f),oe=f.memoizedProps,At=ld(g,oe),L.props=At,Mt=f.pendingProps,mt=L.context,dt=g.contextType,ze=Co,typeof dt=="object"&&dt!==null&&(ze=ei(dt)),_e=g.getDerivedStateFromProps,(dt=typeof _e=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(oe!==Mt||mt!==ze)&&ZN(f,L,_,ze),Nc=!1,mt=f.memoizedState,L.state=mt,cm(f,_,L,N),lm();var yt=f.memoizedState;oe!==Mt||mt!==yt||Nc||c!==null&&c.dependencies!==null&&Ty(c.dependencies)?(typeof _e=="function"&&(v_(f,g,_e,_),yt=f.memoizedState),(At=Nc||WN(f,g,At,_,mt,yt,ze)||c!==null&&c.dependencies!==null&&Ty(c.dependencies))?(dt||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(_,yt,ze),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(_,yt,ze)),typeof L.componentDidUpdate=="function"&&(f.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof L.componentDidUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),f.memoizedProps=_,f.memoizedState=yt),L.props=_,L.state=yt,L.context=ze,_=At):(typeof L.componentDidUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),_=!1)}return L=_,Gy(c,f),_=(f.flags&128)!==0,L||_?(L=f.stateNode,g=_&&typeof g.getDerivedStateFromError!="function"?null:L.render(),f.flags|=1,c!==null&&_?(f.child=Uf(f,c.child,null,N),f.child=Uf(f,null,g,N)):Ga(c,f,g,N),f.memoizedState=L.state,c=f.child):c=Nl(c,f,N),c}function uR(c,f,g,_){return em(),f.flags|=256,Ga(c,f,g,_),f.child}var S_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function E_(c){return{baseLanes:c,cachePool:XA()}}function C_(c,f,g){return c=c!==null?c.childLanes&~g:0,f&&(c|=vs),c}function dR(c,f,g){var _=f.pendingProps,N=!1,L=(f.flags&128)!==0,oe;if((oe=L)||(oe=c!==null&&c.memoizedState===null?!1:(va.current&2)!==0),oe&&(N=!0,f.flags&=-129),oe=(f.flags&32)!==0,f.flags&=-33,c===null){if(cr){if(N?Oc(f):Dc(),cr){var _e=Qr,ze;if(ze=_e){e:{for(ze=_e,_e=ko;ze.nodeType!==8;){if(!_e){_e=null;break e}if(ze=qs(ze.nextSibling),ze===null){_e=null;break e}}_e=ze}_e!==null?(f.memoizedState={dehydrated:_e,treeContext:ed!==null?{id:Sl,overflow:El}:null,retryLane:536870912,hydrationErrors:null},ze=Ki(18,null,null,0),ze.stateNode=_e,ze.return=f,f.child=ze,yi=f,Qr=null,ze=!0):ze=!1}ze||rd(f)}if(_e=f.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return lS(_e)?f.lanes=32:f.lanes=536870912,null;Al(f)}return _e=_.children,_=_.fallback,N?(Dc(),N=f.mode,_e=Ky({mode:"hidden",children:_e},N),_=Qu(_,N,g,null),_e.return=f,_.return=f,_e.sibling=_,f.child=_e,N=f.child,N.memoizedState=E_(g),N.childLanes=C_(c,oe,g),f.memoizedState=S_,_):(Oc(f),k_(f,_e))}if(ze=c.memoizedState,ze!==null&&(_e=ze.dehydrated,_e!==null)){if(L)f.flags&256?(Oc(f),f.flags&=-257,f=T_(c,f,g)):f.memoizedState!==null?(Dc(),f.child=c.child,f.flags|=128,f=null):(Dc(),N=_.fallback,_e=f.mode,_=Ky({mode:"visible",children:_.children},_e),N=Qu(N,_e,g,null),N.flags|=2,_.return=f,N.return=f,_.sibling=N,f.child=_,Uf(f,c.child,null,g),_=f.child,_.memoizedState=E_(g),_.childLanes=C_(c,oe,g),f.memoizedState=S_,f=N);else if(Oc(f),lS(_e)){if(oe=_e.nextSibling&&_e.nextSibling.dataset,oe)var dt=oe.dgst;oe=dt,_=Error(r(419)),_.stack="",_.digest=oe,tm({value:_,source:null,stack:null}),f=T_(c,f,g)}else if(Ia||nm(c,f,g,!1),oe=(g&c.childLanes)!==0,Ia||oe){if(oe=Pr,oe!==null&&(_=g&-g,_=(_&42)!==0?1:Ot(_),_=(_&(oe.suspendedLanes|g))!==0?0:_,_!==0&&_!==ze.retryLane))throw ze.retryLane=_,Us(c,_),Ji(oe,c,_),nR;_e.data==="$?"||V_(),f=T_(c,f,g)}else _e.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=ze.treeContext,Qr=qs(_e.nextSibling),yi=f,cr=!0,nd=null,ko=!1,c!==null&&(gs[ys++]=Sl,gs[ys++]=El,gs[ys++]=ed,Sl=c.id,El=c.overflow,ed=f),f=k_(f,_.children),f.flags|=4096);return f}return N?(Dc(),N=_.fallback,_e=f.mode,ze=c.child,dt=ze.sibling,_=_l(ze,{mode:"hidden",children:_.children}),_.subtreeFlags=ze.subtreeFlags&65011712,dt!==null?N=_l(dt,N):(N=Qu(N,_e,g,null),N.flags|=2),N.return=f,_.return=f,_.sibling=N,f.child=_,_=N,N=f.child,_e=c.child.memoizedState,_e===null?_e=E_(g):(ze=_e.cachePool,ze!==null?(dt=ba._currentValue,ze=ze.parent!==dt?{parent:dt,pool:dt}:ze):ze=XA(),_e={baseLanes:_e.baseLanes|g,cachePool:ze}),N.memoizedState=_e,N.childLanes=C_(c,oe,g),f.memoizedState=S_,_):(Oc(f),g=c.child,c=g.sibling,g=_l(g,{mode:"visible",children:_.children}),g.return=f,g.sibling=null,c!==null&&(oe=f.deletions,oe===null?(f.deletions=[c],f.flags|=16):oe.push(c)),f.child=g,f.memoizedState=null,g)}function k_(c,f){return f=Ky({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Ky(c,f){return c=Ki(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function T_(c,f,g){return Uf(f,c.child,null,g),c=k_(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function fR(c,f,g){c.lanes|=f;var _=c.alternate;_!==null&&(_.lanes|=f),V1(c.return,f,g)}function A_(c,f,g,_,N){var L=c.memoizedState;L===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:_,tail:g,tailMode:N}:(L.isBackwards=f,L.rendering=null,L.renderingStartTime=0,L.last=_,L.tail=g,L.tailMode=N)}function hR(c,f,g){var _=f.pendingProps,N=_.revealOrder,L=_.tail;if(Ga(c,f,_.children,g),_=va.current,(_&2)!==0)_=_&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&fR(c,g,f);else if(c.tag===19)fR(c,g,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}_&=1}switch(te(va,_),N){case"forwards":for(g=f.child,N=null;g!==null;)c=g.alternate,c!==null&&Hy(c)===null&&(N=g),g=g.sibling;g=N,g===null?(N=f.child,f.child=null):(N=g.sibling,g.sibling=null),A_(f,!1,N,g,L);break;case"backwards":for(g=null,N=f.child,f.child=null;N!==null;){if(c=N.alternate,c!==null&&Hy(c)===null){f.child=N;break}c=N.sibling,N.sibling=g,g=N,N=c}A_(f,!0,g,null,L);break;case"together":A_(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Nl(c,f,g){if(c!==null&&(f.dependencies=c.dependencies),$c|=f.lanes,(g&f.childLanes)===0)if(c!==null){if(nm(c,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,g=_l(c,c.pendingProps),f.child=g,g.return=f;c.sibling!==null;)c=c.sibling,g=g.sibling=_l(c,c.pendingProps),g.return=f;g.sibling=null}return f.child}function N_(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Ty(c)))}function W7(c,f,g){switch(f.tag){case 3:Ne(f,f.stateNode.containerInfo),Ac(f,ba,c.memoizedState.cache),em();break;case 27:case 5:Pe(f);break;case 4:Ne(f,f.stateNode.containerInfo);break;case 10:Ac(f,f.type,f.memoizedProps.value);break;case 13:var _=f.memoizedState;if(_!==null)return _.dehydrated!==null?(Oc(f),f.flags|=128,null):(g&f.child.childLanes)!==0?dR(c,f,g):(Oc(f),c=Nl(c,f,g),c!==null?c.sibling:null);Oc(f);break;case 19:var N=(c.flags&128)!==0;if(_=(g&f.childLanes)!==0,_||(nm(c,f,g,!1),_=(g&f.childLanes)!==0),N){if(_)return hR(c,f,g);f.flags|=128}if(N=f.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),te(va,va.current),_)break;return null;case 22:case 23:return f.lanes=0,sR(c,f,g);case 24:Ac(f,ba,c.memoizedState.cache)}return Nl(c,f,g)}function pR(c,f,g){if(c!==null)if(c.memoizedProps!==f.pendingProps)Ia=!0;else{if(!N_(c,g)&&(f.flags&128)===0)return Ia=!1,W7(c,f,g);Ia=(c.flags&131072)!==0}else Ia=!1,cr&&(f.flags&1048576)!==0&&qA(f,ky,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var _=f.elementType,N=_._init;if(_=N(_._payload),f.type=_,typeof _=="function")L1(_)?(c=ld(_,c),f.tag=1,f=cR(null,f,_,c,g)):(f.tag=0,f=__(null,f,_,c,g));else{if(_!=null){if(N=_.$$typeof,N===C){f.tag=11,f=rR(null,f,_,c,g);break e}else if(N===R){f.tag=14,f=aR(null,f,_,c,g);break e}}throw f=q(_)||_,Error(r(306,f,""))}}return f;case 0:return __(c,f,f.type,f.pendingProps,g);case 1:return _=f.type,N=ld(_,f.pendingProps),cR(c,f,_,N,g);case 3:e:{if(Ne(f,f.stateNode.containerInfo),c===null)throw Error(r(387));_=f.pendingProps;var L=f.memoizedState;N=L.element,J1(c,f),cm(f,_,null,g);var oe=f.memoizedState;if(_=oe.cache,Ac(f,ba,_),_!==L.cache&&G1(f,[ba],g,!0),lm(),_=oe.element,L.isDehydrated)if(L={element:_,isDehydrated:!1,cache:oe.cache},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){f=uR(c,f,_,g);break e}else if(_!==N){N=pn(Error(r(424)),f),tm(N),f=uR(c,f,_,g);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Qr=qs(c.firstChild),yi=f,cr=!0,nd=null,ko=!0,g=GN(f,null,_,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(em(),_===N){f=Nl(c,f,g);break e}Ga(c,f,_,g)}f=f.child}return f;case 26:return Gy(c,f),c===null?(g=bI(f.type,null,f.pendingProps,null))?f.memoizedState=g:cr||(g=f.type,c=f.pendingProps,_=ob(De.current).createElement(g),_[pe]=f,_[Re]=c,Wa(_,g,c),Fn(_),f.stateNode=_):f.memoizedState=bI(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Pe(f),c===null&&cr&&(_=f.stateNode=mI(f.type,f.pendingProps,De.current),yi=f,ko=!0,N=Qr,Hc(f.type)?(cS=N,Qr=qs(_.firstChild)):Qr=N),Ga(c,f,f.pendingProps.children,g),Gy(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&cr&&((N=_=Qr)&&(_=_U(_,f.type,f.pendingProps,ko),_!==null?(f.stateNode=_,yi=f,Qr=qs(_.firstChild),ko=!1,N=!0):N=!1),N||rd(f)),Pe(f),N=f.type,L=f.pendingProps,oe=c!==null?c.memoizedProps:null,_=L.children,iS(N,L)?_=null:oe!==null&&iS(N,oe)&&(f.flags|=32),f.memoizedState!==null&&(N=a_(c,f,B7,null,null,g),Im._currentValue=N),Gy(c,f),Ga(c,f,_,g),f.child;case 6:return c===null&&cr&&((c=g=Qr)&&(g=SU(g,f.pendingProps,ko),g!==null?(f.stateNode=g,yi=f,Qr=null,c=!0):c=!1),c||rd(f)),null;case 13:return dR(c,f,g);case 4:return Ne(f,f.stateNode.containerInfo),_=f.pendingProps,c===null?f.child=Uf(f,null,_,g):Ga(c,f,_,g),f.child;case 11:return rR(c,f,f.type,f.pendingProps,g);case 7:return Ga(c,f,f.pendingProps,g),f.child;case 8:return Ga(c,f,f.pendingProps.children,g),f.child;case 12:return Ga(c,f,f.pendingProps.children,g),f.child;case 10:return _=f.pendingProps,Ac(f,f.type,_.value),Ga(c,f,_.children,g),f.child;case 9:return N=f.type._context,_=f.pendingProps.children,id(f),N=ei(N),_=_(N),f.flags|=1,Ga(c,f,_,g),f.child;case 14:return aR(c,f,f.type,f.pendingProps,g);case 15:return iR(c,f,f.type,f.pendingProps,g);case 19:return hR(c,f,g);case 31:return _=f.pendingProps,g=f.mode,_={mode:_.mode,children:_.children},c===null?(g=Ky(_,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=_l(c.child,_),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return sR(c,f,g);case 24:return id(f),_=ei(ba),c===null?(N=Z1(),N===null&&(N=Pr,L=K1(),N.pooledCache=L,L.refCount++,L!==null&&(N.pooledCacheLanes|=g),N=L),f.memoizedState={parent:_,cache:N},X1(f),Ac(f,ba,N)):((c.lanes&g)!==0&&(J1(c,f),cm(f,null,null,g),lm()),N=c.memoizedState,L=f.memoizedState,N.parent!==_?(N={parent:_,cache:_},f.memoizedState=N,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=N),Ac(f,ba,_)):(_=L.cache,Ac(f,ba,_),_!==N.cache&&G1(f,[ba],g,!0))),Ga(c,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Rl(c){c.flags|=4}function mR(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!SI(f)){if(f=bs.current,f!==null&&((nr&4194048)===nr?To!==null:(nr&62914560)!==nr&&(nr&536870912)===0||f!==To))throw sm=Y1,JA;c.flags|=8192}}function Wy(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?P():536870912,c.lanes|=f,Gf|=f)}function gm(c,f){if(!cr)switch(c.tailMode){case"hidden":f=c.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var _=null;g!==null;)g.alternate!==null&&(_=g),g=g.sibling;_===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:_.sibling=null}}function Zr(c){var f=c.alternate!==null&&c.alternate.child===c.child,g=0,_=0;if(f)for(var N=c.child;N!==null;)g|=N.lanes|N.childLanes,_|=N.subtreeFlags&65011712,_|=N.flags&65011712,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)g|=N.lanes|N.childLanes,_|=N.subtreeFlags,_|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=_,c.childLanes=g,f}function Z7(c,f,g){var _=f.pendingProps;switch(U1(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(f),null;case 1:return Zr(f),null;case 3:return g=f.stateNode,_=null,c!==null&&(_=c.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),kl(ba),Ce(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(c===null||c.child===null)&&(Qp(f)?Rl(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,KA())),Zr(f),null;case 26:return g=f.memoizedState,c===null?(Rl(f),g!==null?(Zr(f),mR(f,g)):(Zr(f),f.flags&=-16777217)):g?g!==c.memoizedState?(Rl(f),Zr(f),mR(f,g)):(Zr(f),f.flags&=-16777217):(c.memoizedProps!==_&&Rl(f),Zr(f),f.flags&=-16777217),null;case 27:Qe(f),g=De.current;var N=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==_&&Rl(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return Zr(f),null}c=fe.current,Qp(f)?VA(f):(c=mI(N,_,g),f.stateNode=c,Rl(f))}return Zr(f),null;case 5:if(Qe(f),g=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==_&&Rl(f);else{if(!_){if(f.stateNode===null)throw Error(r(166));return Zr(f),null}if(c=fe.current,Qp(f))VA(f);else{switch(N=ob(De.current),c){case 1:c=N.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:c=N.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":c=N.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":c=N.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":c=N.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof _.is=="string"?N.createElement("select",{is:_.is}):N.createElement("select"),_.multiple?c.multiple=!0:_.size&&(c.size=_.size);break;default:c=typeof _.is=="string"?N.createElement(g,{is:_.is}):N.createElement(g)}}c[pe]=f,c[Re]=_;e:for(N=f.child;N!==null;){if(N.tag===5||N.tag===6)c.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===f)break e;for(;N.sibling===null;){if(N.return===null||N.return===f)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}f.stateNode=c;e:switch(Wa(c,g,_),g){case"button":case"input":case"select":case"textarea":c=!!_.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Rl(f)}}return Zr(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==_&&Rl(f);else{if(typeof _!="string"&&f.stateNode===null)throw Error(r(166));if(c=De.current,Qp(f)){if(c=f.stateNode,g=f.memoizedProps,_=null,N=yi,N!==null)switch(N.tag){case 27:case 5:_=N.memoizedProps}c[pe]=f,c=!!(c.nodeValue===g||_!==null&&_.suppressHydrationWarning===!0||lI(c.nodeValue,g)),c||rd(f)}else c=ob(c).createTextNode(_),c[pe]=f,f.stateNode=c}return Zr(f),null;case 13:if(_=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(N=Qp(f),_!==null&&_.dehydrated!==null){if(c===null){if(!N)throw Error(r(318));if(N=f.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[pe]=f}else em(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Zr(f),N=!1}else N=KA(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=N),N=!0;if(!N)return f.flags&256?(Al(f),f):(Al(f),null)}if(Al(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=_!==null,c=c!==null&&c.memoizedState!==null,g){_=f.child,N=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(N=_.alternate.memoizedState.cachePool.pool);var L=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(L=_.memoizedState.cachePool.pool),L!==N&&(_.flags|=2048)}return g!==c&&g&&(f.child.flags|=8192),Wy(f,f.updateQueue),Zr(f),null;case 4:return Ce(),c===null&&eS(f.stateNode.containerInfo),Zr(f),null;case 10:return kl(f.type),Zr(f),null;case 19:if(ee(va),N=f.memoizedState,N===null)return Zr(f),null;if(_=(f.flags&128)!==0,L=N.rendering,L===null)if(_)gm(N,!1);else{if(ea!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(L=Hy(c),L!==null){for(f.flags|=128,gm(N,!1),c=L.updateQueue,f.updateQueue=c,Wy(f,c),f.subtreeFlags=0,c=g,g=f.child;g!==null;)HA(g,c),g=g.sibling;return te(va,va.current&1|2),f.child}c=c.sibling}N.tail!==null&&de()>Xy&&(f.flags|=128,_=!0,gm(N,!1),f.lanes=4194304)}else{if(!_)if(c=Hy(L),c!==null){if(f.flags|=128,_=!0,c=c.updateQueue,f.updateQueue=c,Wy(f,c),gm(N,!0),N.tail===null&&N.tailMode==="hidden"&&!L.alternate&&!cr)return Zr(f),null}else 2*de()-N.renderingStartTime>Xy&&g!==536870912&&(f.flags|=128,_=!0,gm(N,!1),f.lanes=4194304);N.isBackwards?(L.sibling=f.child,f.child=L):(c=N.last,c!==null?c.sibling=L:f.child=L,N.last=L)}return N.tail!==null?(f=N.tail,N.rendering=f,N.tail=f.sibling,N.renderingStartTime=de(),f.sibling=null,c=va.current,te(va,_?c&1|2:c&1),f):(Zr(f),null);case 22:case 23:return Al(f),n_(),_=f.memoizedState!==null,c!==null?c.memoizedState!==null!==_&&(f.flags|=8192):_&&(f.flags|=8192),_?(g&536870912)!==0&&(f.flags&128)===0&&(Zr(f),f.subtreeFlags&6&&(f.flags|=8192)):Zr(f),g=f.updateQueue,g!==null&&Wy(f,g.retryQueue),g=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),_=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(_=f.memoizedState.cachePool.pool),_!==g&&(f.flags|=2048),c!==null&&ee(sd),null;case 24:return g=null,c!==null&&(g=c.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),kl(ba),Zr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function Y7(c,f){switch(U1(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return kl(ba),Ce(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Qe(f),null;case 13:if(Al(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));em()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return ee(va),null;case 4:return Ce(),null;case 10:return kl(f.type),null;case 22:case 23:return Al(f),n_(),c!==null&&ee(sd),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return kl(ba),null;case 25:return null;default:return null}}function gR(c,f){switch(U1(f),f.tag){case 3:kl(ba),Ce();break;case 26:case 27:case 5:Qe(f);break;case 4:Ce();break;case 13:Al(f);break;case 19:ee(va);break;case 10:kl(f.type);break;case 22:case 23:Al(f),n_(),c!==null&&ee(sd);break;case 24:kl(ba)}}function ym(c,f){try{var g=f.updateQueue,_=g!==null?g.lastEffect:null;if(_!==null){var N=_.next;g=N;do{if((g.tag&c)===c){_=void 0;var L=g.create,oe=g.inst;_=L(),oe.destroy=_}g=g.next}while(g!==N)}}catch(_e){jr(f,f.return,_e)}}function Mc(c,f,g){try{var _=f.updateQueue,N=_!==null?_.lastEffect:null;if(N!==null){var L=N.next;_=L;do{if((_.tag&c)===c){var oe=_.inst,_e=oe.destroy;if(_e!==void 0){oe.destroy=void 0,N=f;var ze=g,dt=_e;try{dt()}catch(At){jr(N,ze,At)}}}_=_.next}while(_!==L)}}catch(At){jr(f,f.return,At)}}function yR(c){var f=c.updateQueue;if(f!==null){var g=c.stateNode;try{aN(f,g)}catch(_){jr(c,c.return,_)}}}function bR(c,f,g){g.props=ld(c.type,c.memoizedProps),g.state=c.memoizedState;try{g.componentWillUnmount()}catch(_){jr(c,f,_)}}function bm(c,f){try{var g=c.ref;if(g!==null){switch(c.tag){case 26:case 27:case 5:var _=c.stateNode;break;case 30:_=c.stateNode;break;default:_=c.stateNode}typeof g=="function"?c.refCleanup=g(_):g.current=_}}catch(N){jr(c,f,N)}}function Ao(c,f){var g=c.ref,_=c.refCleanup;if(g!==null)if(typeof _=="function")try{_()}catch(N){jr(c,f,N)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(N){jr(c,f,N)}else g.current=null}function vR(c){var f=c.type,g=c.memoizedProps,_=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&_.focus();break e;case"img":g.src?_.src=g.src:g.srcSet&&(_.srcset=g.srcSet)}}catch(N){jr(c,c.return,N)}}function R_(c,f,g){try{var _=c.stateNode;yU(_,c.type,g,f),_[Re]=f}catch(N){jr(c,c.return,N)}}function wR(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Hc(c.type)||c.tag===4}function I_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||wR(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Hc(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function j_(c,f,g){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(c,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(c),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=sb));else if(_!==4&&(_===27&&Hc(c.type)&&(g=c.stateNode,f=null),c=c.child,c!==null))for(j_(c,f,g),c=c.sibling;c!==null;)j_(c,f,g),c=c.sibling}function Zy(c,f,g){var _=c.tag;if(_===5||_===6)c=c.stateNode,f?g.insertBefore(c,f):g.appendChild(c);else if(_!==4&&(_===27&&Hc(c.type)&&(g=c.stateNode),c=c.child,c!==null))for(Zy(c,f,g),c=c.sibling;c!==null;)Zy(c,f,g),c=c.sibling}function xR(c){var f=c.stateNode,g=c.memoizedProps;try{for(var _=c.type,N=f.attributes;N.length;)f.removeAttributeNode(N[0]);Wa(f,_,g),f[pe]=c,f[Re]=g}catch(L){jr(c,c.return,L)}}var Il=!1,sa=!1,O_=!1,_R=typeof WeakSet=="function"?WeakSet:Set,ja=null;function X7(c,f){if(c=c.containerInfo,rS=hb,c=ce(c),we(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var _=g.getSelection&&g.getSelection();if(_&&_.rangeCount!==0){g=_.anchorNode;var N=_.anchorOffset,L=_.focusNode;_=_.focusOffset;try{g.nodeType,L.nodeType}catch{g=null;break e}var oe=0,_e=-1,ze=-1,dt=0,At=0,Mt=c,mt=null;t:for(;;){for(var yt;Mt!==g||N!==0&&Mt.nodeType!==3||(_e=oe+N),Mt!==L||_!==0&&Mt.nodeType!==3||(ze=oe+_),Mt.nodeType===3&&(oe+=Mt.nodeValue.length),(yt=Mt.firstChild)!==null;)mt=Mt,Mt=yt;for(;;){if(Mt===c)break t;if(mt===g&&++dt===N&&(_e=oe),mt===L&&++At===_&&(ze=oe),(yt=Mt.nextSibling)!==null)break;Mt=mt,mt=Mt.parentNode}Mt=yt}g=_e===-1||ze===-1?null:{start:_e,end:ze}}else g=null}g=g||{start:0,end:0}}else g=null;for(aS={focusedElem:c,selectionRange:g},hb=!1,ja=f;ja!==null;)if(f=ja,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,ja=c;else for(;ja!==null;){switch(f=ja,L=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&L!==null){c=void 0,g=f,N=L.memoizedProps,L=L.memoizedState,_=g.stateNode;try{var Sn=ld(g.type,N,g.elementType===g.type);c=_.getSnapshotBeforeUpdate(Sn,L),_.__reactInternalSnapshotBeforeUpdate=c}catch(yn){jr(g,g.return,yn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,g=c.nodeType,g===9)oS(c);else if(g===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":oS(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,ja=c;break}ja=f.return}}function SR(c,f,g){var _=g.flags;switch(g.tag){case 0:case 11:case 15:Pc(c,g),_&4&&ym(5,g);break;case 1:if(Pc(c,g),_&4)if(c=g.stateNode,f===null)try{c.componentDidMount()}catch(oe){jr(g,g.return,oe)}else{var N=ld(g.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(N,f,c.__reactInternalSnapshotBeforeUpdate)}catch(oe){jr(g,g.return,oe)}}_&64&&yR(g),_&512&&bm(g,g.return);break;case 3:if(Pc(c,g),_&64&&(c=g.updateQueue,c!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{aN(c,f)}catch(oe){jr(g,g.return,oe)}}break;case 27:f===null&&_&4&&xR(g);case 26:case 5:Pc(c,g),f===null&&_&4&&vR(g),_&512&&bm(g,g.return);break;case 12:Pc(c,g);break;case 13:Pc(c,g),_&4&&kR(c,g),_&64&&(c=g.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(g=sU.bind(null,g),EU(c,g))));break;case 22:if(_=g.memoizedState!==null||Il,!_){f=f!==null&&f.memoizedState!==null||sa,N=Il;var L=sa;Il=_,(sa=f)&&!L?Fc(c,g,(g.subtreeFlags&8772)!==0):Pc(c,g),Il=N,sa=L}break;case 30:break;default:Pc(c,g)}}function ER(c){var f=c.alternate;f!==null&&(c.alternate=null,ER(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Qt(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var qr=null,Ii=!1;function jl(c,f,g){for(g=g.child;g!==null;)CR(c,f,g),g=g.sibling}function CR(c,f,g){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(St,g)}catch{}switch(g.tag){case 26:sa||Ao(g,f),jl(c,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:sa||Ao(g,f);var _=qr,N=Ii;Hc(g.type)&&(qr=g.stateNode,Ii=!1),jl(c,f,g),Tm(g.stateNode),qr=_,Ii=N;break;case 5:sa||Ao(g,f);case 6:if(_=qr,N=Ii,qr=null,jl(c,f,g),qr=_,Ii=N,qr!==null)if(Ii)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(g.stateNode)}catch(L){jr(g,f,L)}else try{qr.removeChild(g.stateNode)}catch(L){jr(g,f,L)}break;case 18:qr!==null&&(Ii?(c=qr,hI(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,g.stateNode),Mm(c)):hI(qr,g.stateNode));break;case 4:_=qr,N=Ii,qr=g.stateNode.containerInfo,Ii=!0,jl(c,f,g),qr=_,Ii=N;break;case 0:case 11:case 14:case 15:sa||Mc(2,g,f),sa||Mc(4,g,f),jl(c,f,g);break;case 1:sa||(Ao(g,f),_=g.stateNode,typeof _.componentWillUnmount=="function"&&bR(g,f,_)),jl(c,f,g);break;case 21:jl(c,f,g);break;case 22:sa=(_=sa)||g.memoizedState!==null,jl(c,f,g),sa=_;break;default:jl(c,f,g)}}function kR(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Mm(c)}catch(g){jr(f,f.return,g)}}function J7(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new _R),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new _R),f;default:throw Error(r(435,c.tag))}}function D_(c,f){var g=J7(c);f.forEach(function(_){var N=oU.bind(null,c,_);g.has(_)||(g.add(_),_.then(N,N))})}function Wi(c,f){var g=f.deletions;if(g!==null)for(var _=0;_<g.length;_++){var N=g[_],L=c,oe=f,_e=oe;e:for(;_e!==null;){switch(_e.tag){case 27:if(Hc(_e.type)){qr=_e.stateNode,Ii=!1;break e}break;case 5:qr=_e.stateNode,Ii=!1;break e;case 3:case 4:qr=_e.stateNode.containerInfo,Ii=!0;break e}_e=_e.return}if(qr===null)throw Error(r(160));CR(L,oe,N),qr=null,Ii=!1,L=N.alternate,L!==null&&(L.return=null),N.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)TR(f,c),f=f.sibling}var Hs=null;function TR(c,f){var g=c.alternate,_=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Wi(f,c),Zi(c),_&4&&(Mc(3,c,c.return),ym(3,c),Mc(5,c,c.return));break;case 1:Wi(f,c),Zi(c),_&512&&(sa||g===null||Ao(g,g.return)),_&64&&Il&&(c=c.updateQueue,c!==null&&(_=c.callbacks,_!==null&&(g=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=g===null?_:g.concat(_))));break;case 26:var N=Hs;if(Wi(f,c),Zi(c),_&512&&(sa||g===null||Ao(g,g.return)),_&4){var L=g!==null?g.memoizedState:null;if(_=c.memoizedState,g===null)if(_===null)if(c.stateNode===null){e:{_=c.type,g=c.memoizedProps,N=N.ownerDocument||N;t:switch(_){case"title":L=N.getElementsByTagName("title")[0],(!L||L[Lt]||L[pe]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=N.createElement(_),N.head.insertBefore(L,N.querySelector("head > title"))),Wa(L,_,g),L[pe]=c,Fn(L),_=L;break e;case"link":var oe=xI("link","href",N).get(_+(g.href||""));if(oe){for(var _e=0;_e<oe.length;_e++)if(L=oe[_e],L.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&L.getAttribute("rel")===(g.rel==null?null:g.rel)&&L.getAttribute("title")===(g.title==null?null:g.title)&&L.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){oe.splice(_e,1);break t}}L=N.createElement(_),Wa(L,_,g),N.head.appendChild(L);break;case"meta":if(oe=xI("meta","content",N).get(_+(g.content||""))){for(_e=0;_e<oe.length;_e++)if(L=oe[_e],L.getAttribute("content")===(g.content==null?null:""+g.content)&&L.getAttribute("name")===(g.name==null?null:g.name)&&L.getAttribute("property")===(g.property==null?null:g.property)&&L.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&L.getAttribute("charset")===(g.charSet==null?null:g.charSet)){oe.splice(_e,1);break t}}L=N.createElement(_),Wa(L,_,g),N.head.appendChild(L);break;default:throw Error(r(468,_))}L[pe]=c,Fn(L),_=L}c.stateNode=_}else _I(N,c.type,c.stateNode);else c.stateNode=wI(N,_,c.memoizedProps);else L!==_?(L===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):L.count--,_===null?_I(N,c.type,c.stateNode):wI(N,_,c.memoizedProps)):_===null&&c.stateNode!==null&&R_(c,c.memoizedProps,g.memoizedProps)}break;case 27:Wi(f,c),Zi(c),_&512&&(sa||g===null||Ao(g,g.return)),g!==null&&_&4&&R_(c,c.memoizedProps,g.memoizedProps);break;case 5:if(Wi(f,c),Zi(c),_&512&&(sa||g===null||Ao(g,g.return)),c.flags&32){N=c.stateNode;try{bc(N,"")}catch(yt){jr(c,c.return,yt)}}_&4&&c.stateNode!=null&&(N=c.memoizedProps,R_(c,N,g!==null?g.memoizedProps:N)),_&1024&&(O_=!0);break;case 6:if(Wi(f,c),Zi(c),_&4){if(c.stateNode===null)throw Error(r(162));_=c.memoizedProps,g=c.stateNode;try{g.nodeValue=_}catch(yt){jr(c,c.return,yt)}}break;case 3:if(ub=null,N=Hs,Hs=lb(f.containerInfo),Wi(f,c),Hs=N,Zi(c),_&4&&g!==null&&g.memoizedState.isDehydrated)try{Mm(f.containerInfo)}catch(yt){jr(c,c.return,yt)}O_&&(O_=!1,AR(c));break;case 4:_=Hs,Hs=lb(c.stateNode.containerInfo),Wi(f,c),Zi(c),Hs=_;break;case 12:Wi(f,c),Zi(c);break;case 13:Wi(f,c),Zi(c),c.child.flags&8192&&c.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(B_=de()),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,D_(c,_)));break;case 22:N=c.memoizedState!==null;var ze=g!==null&&g.memoizedState!==null,dt=Il,At=sa;if(Il=dt||N,sa=At||ze,Wi(f,c),sa=At,Il=dt,Zi(c),_&8192)e:for(f=c.stateNode,f._visibility=N?f._visibility&-2:f._visibility|1,N&&(g===null||ze||Il||sa||cd(c)),g=null,f=c;;){if(f.tag===5||f.tag===26){if(g===null){ze=g=f;try{if(L=ze.stateNode,N)oe=L.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{_e=ze.stateNode;var Mt=ze.memoizedProps.style,mt=Mt!=null&&Mt.hasOwnProperty("display")?Mt.display:null;_e.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(yt){jr(ze,ze.return,yt)}}}else if(f.tag===6){if(g===null){ze=f;try{ze.stateNode.nodeValue=N?"":ze.memoizedProps}catch(yt){jr(ze,ze.return,yt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}_&4&&(_=c.updateQueue,_!==null&&(g=_.retryQueue,g!==null&&(_.retryQueue=null,D_(c,g))));break;case 19:Wi(f,c),Zi(c),_&4&&(_=c.updateQueue,_!==null&&(c.updateQueue=null,D_(c,_)));break;case 30:break;case 21:break;default:Wi(f,c),Zi(c)}}function Zi(c){var f=c.flags;if(f&2){try{for(var g,_=c.return;_!==null;){if(wR(_)){g=_;break}_=_.return}if(g==null)throw Error(r(160));switch(g.tag){case 27:var N=g.stateNode,L=I_(c);Zy(c,L,N);break;case 5:var oe=g.stateNode;g.flags&32&&(bc(oe,""),g.flags&=-33);var _e=I_(c);Zy(c,_e,oe);break;case 3:case 4:var ze=g.stateNode.containerInfo,dt=I_(c);j_(c,dt,ze);break;default:throw Error(r(161))}}catch(At){jr(c,c.return,At)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function AR(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;AR(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function Pc(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)SR(c,f.alternate,f),f=f.sibling}function cd(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:Mc(4,f,f.return),cd(f);break;case 1:Ao(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&bR(f,f.return,g),cd(f);break;case 27:Tm(f.stateNode);case 26:case 5:Ao(f,f.return),cd(f);break;case 22:f.memoizedState===null&&cd(f);break;case 30:cd(f);break;default:cd(f)}c=c.sibling}}function Fc(c,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var _=f.alternate,N=c,L=f,oe=L.flags;switch(L.tag){case 0:case 11:case 15:Fc(N,L,g),ym(4,L);break;case 1:if(Fc(N,L,g),_=L,N=_.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(dt){jr(_,_.return,dt)}if(_=L,N=_.updateQueue,N!==null){var _e=_.stateNode;try{var ze=N.shared.hiddenCallbacks;if(ze!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ze.length;N++)rN(ze[N],_e)}catch(dt){jr(_,_.return,dt)}}g&&oe&64&&yR(L),bm(L,L.return);break;case 27:xR(L);case 26:case 5:Fc(N,L,g),g&&_===null&&oe&4&&vR(L),bm(L,L.return);break;case 12:Fc(N,L,g);break;case 13:Fc(N,L,g),g&&oe&4&&kR(N,L);break;case 22:L.memoizedState===null&&Fc(N,L,g),bm(L,L.return);break;case 30:break;default:Fc(N,L,g)}f=f.sibling}}function M_(c,f){var g=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==g&&(c!=null&&c.refCount++,g!=null&&rm(g))}function P_(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&rm(c))}function No(c,f,g,_){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)NR(c,f,g,_),f=f.sibling}function NR(c,f,g,_){var N=f.flags;switch(f.tag){case 0:case 11:case 15:No(c,f,g,_),N&2048&&ym(9,f);break;case 1:No(c,f,g,_);break;case 3:No(c,f,g,_),N&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&rm(c)));break;case 12:if(N&2048){No(c,f,g,_),c=f.stateNode;try{var L=f.memoizedProps,oe=L.id,_e=L.onPostCommit;typeof _e=="function"&&_e(oe,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ze){jr(f,f.return,ze)}}else No(c,f,g,_);break;case 13:No(c,f,g,_);break;case 23:break;case 22:L=f.stateNode,oe=f.alternate,f.memoizedState!==null?L._visibility&2?No(c,f,g,_):vm(c,f):L._visibility&2?No(c,f,g,_):(L._visibility|=2,Hf(c,f,g,_,(f.subtreeFlags&10256)!==0)),N&2048&&M_(oe,f);break;case 24:No(c,f,g,_),N&2048&&P_(f.alternate,f);break;default:No(c,f,g,_)}}function Hf(c,f,g,_,N){for(N=N&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var L=c,oe=f,_e=g,ze=_,dt=oe.flags;switch(oe.tag){case 0:case 11:case 15:Hf(L,oe,_e,ze,N),ym(8,oe);break;case 23:break;case 22:var At=oe.stateNode;oe.memoizedState!==null?At._visibility&2?Hf(L,oe,_e,ze,N):vm(L,oe):(At._visibility|=2,Hf(L,oe,_e,ze,N)),N&&dt&2048&&M_(oe.alternate,oe);break;case 24:Hf(L,oe,_e,ze,N),N&&dt&2048&&P_(oe.alternate,oe);break;default:Hf(L,oe,_e,ze,N)}f=f.sibling}}function vm(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=c,_=f,N=_.flags;switch(_.tag){case 22:vm(g,_),N&2048&&M_(_.alternate,_);break;case 24:vm(g,_),N&2048&&P_(_.alternate,_);break;default:vm(g,_)}f=f.sibling}}var wm=8192;function qf(c){if(c.subtreeFlags&wm)for(c=c.child;c!==null;)RR(c),c=c.sibling}function RR(c){switch(c.tag){case 26:qf(c),c.flags&wm&&c.memoizedState!==null&&FU(Hs,c.memoizedState,c.memoizedProps);break;case 5:qf(c);break;case 3:case 4:var f=Hs;Hs=lb(c.stateNode.containerInfo),qf(c),Hs=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=wm,wm=16777216,qf(c),wm=f):qf(c));break;default:qf(c)}}function IR(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function xm(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];ja=_,OR(_,c)}IR(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)jR(c),c=c.sibling}function jR(c){switch(c.tag){case 0:case 11:case 15:xm(c),c.flags&2048&&Mc(9,c,c.return);break;case 3:xm(c);break;case 12:xm(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,Yy(c)):xm(c);break;default:xm(c)}}function Yy(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var _=f[g];ja=_,OR(_,c)}IR(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:Mc(8,f,f.return),Yy(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,Yy(f));break;default:Yy(f)}c=c.sibling}}function OR(c,f){for(;ja!==null;){var g=ja;switch(g.tag){case 0:case 11:case 15:Mc(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var _=g.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:rm(g.memoizedState.cache)}if(_=g.child,_!==null)_.return=g,ja=_;else e:for(g=c;ja!==null;){_=ja;var N=_.sibling,L=_.return;if(ER(_),_===g){ja=null;break e}if(N!==null){N.return=L,ja=N;break e}ja=L}}}var Q7={getCacheForType:function(c){var f=ei(ba),g=f.data.get(c);return g===void 0&&(g=c(),f.data.set(c,g)),g}},eU=typeof WeakMap=="function"?WeakMap:Map,gr=0,Pr=null,Zn=null,nr=0,yr=0,Yi=null,Lc=!1,Vf=!1,F_=!1,Ol=0,ea=0,$c=0,ud=0,L_=0,vs=0,Gf=0,_m=null,ji=null,$_=!1,B_=0,Xy=1/0,Jy=null,Bc=null,Ka=0,zc=null,Kf=null,Wf=0,z_=0,U_=null,DR=null,Sm=0,H_=null;function Xi(){if((gr&2)!==0&&nr!==0)return nr&-nr;if(ie.T!==null){var c=Mf;return c!==0?c:Y_()}return V()}function MR(){vs===0&&(vs=(nr&536870912)===0||cr?vt():536870912);var c=bs.current;return c!==null&&(c.flags|=32),vs}function Ji(c,f,g){(c===Pr&&(yr===2||yr===9)||c.cancelPendingCommit!==null)&&(Zf(c,0),Uc(c,nr,vs,!1)),nt(c,g),((gr&2)===0||c!==Pr)&&(c===Pr&&((gr&2)===0&&(ud|=g),ea===4&&Uc(c,nr,vs,!1)),Ro(c))}function PR(c,f,g){if((gr&6)!==0)throw Error(r(327));var _=!g&&(f&124)===0&&(f&c.expiredLanes)===0||le(c,f),N=_?rU(c,f):G_(c,f,!0),L=_;do{if(N===0){Vf&&!_&&Uc(c,f,0,!1);break}else{if(g=c.current.alternate,L&&!tU(g)){N=G_(c,f,!1),L=!1;continue}if(N===2){if(L=f,c.errorRecoveryDisabledLanes&L)var oe=0;else oe=c.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){f=oe;e:{var _e=c;N=_m;var ze=_e.current.memoizedState.isDehydrated;if(ze&&(Zf(_e,oe).flags|=256),oe=G_(_e,oe,!1),oe!==2){if(F_&&!ze){_e.errorRecoveryDisabledLanes|=L,ud|=L,N=4;break e}L=ji,ji=N,L!==null&&(ji===null?ji=L:ji.push.apply(ji,L))}N=oe}if(L=!1,N!==2)continue}}if(N===1){Zf(c,0),Uc(c,f,0,!0);break}e:{switch(_=c,L=N,L){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Uc(_,f,vs,!Lc);break e;case 2:ji=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(N=B_+300-de(),10<N)){if(Uc(_,f,vs,!Lc),ke(_,0,!0)!==0)break e;_.timeoutHandle=dI(FR.bind(null,_,g,ji,Jy,$_,f,vs,ud,Gf,Lc,L,2,-0,0),N);break e}FR(_,g,ji,Jy,$_,f,vs,ud,Gf,Lc,L,0,-0,0)}}break}while(!0);Ro(c)}function FR(c,f,g,_,N,L,oe,_e,ze,dt,At,Mt,mt,yt){if(c.timeoutHandle=-1,Mt=f.subtreeFlags,(Mt&8192||(Mt&16785408)===16785408)&&(Rm={stylesheets:null,count:0,unsuspend:PU},RR(f),Mt=LU(),Mt!==null)){c.cancelPendingCommit=Mt(qR.bind(null,c,f,L,g,_,N,oe,_e,ze,At,1,mt,yt)),Uc(c,L,oe,!dt);return}qR(c,f,L,g,_,N,oe,_e,ze)}function tU(c){for(var f=c;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var _=0;_<g.length;_++){var N=g[_],L=N.getSnapshot;N=N.value;try{if(!Qa(L(),N))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Uc(c,f,g,_){f&=~L_,f&=~ud,c.suspendedLanes|=f,c.pingedLanes&=~f,_&&(c.warmLanes|=f),_=c.expirationTimes;for(var N=f;0<N;){var L=31-Zt(N),oe=1<<L;_[L]=-1,N&=~oe}g!==0&&Oe(c,g,f)}function Qy(){return(gr&6)===0?(Em(0),!1):!0}function q_(){if(Zn!==null){if(yr===0)var c=Zn.return;else c=Zn,Cl=ad=null,o_(c),zf=null,pm=0,c=Zn;for(;c!==null;)gR(c.alternate,c),c=c.return;Zn=null}}function Zf(c,f){var g=c.timeoutHandle;g!==-1&&(c.timeoutHandle=-1,vU(g)),g=c.cancelPendingCommit,g!==null&&(c.cancelPendingCommit=null,g()),q_(),Pr=c,Zn=g=_l(c.current,null),nr=f,yr=0,Yi=null,Lc=!1,Vf=le(c,f),F_=!1,Gf=vs=L_=ud=$c=ea=0,ji=_m=null,$_=!1,(f&8)!==0&&(f|=f&32);var _=c.entangledLanes;if(_!==0)for(c=c.entanglements,_&=f;0<_;){var N=31-Zt(_),L=1<<N;f|=c[N],_&=~L}return Ol=f,_n(),g}function LR(c,f){zn=null,ie.H=By,f===im||f===Ry?(f=tN(),yr=3):f===JA?(f=tN(),yr=4):yr=f===nR?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Yi=f,Zn===null&&(ea=1,Vy(c,pn(f,c.current)))}function $R(){var c=ie.H;return ie.H=By,c===null?By:c}function BR(){var c=ie.A;return ie.A=Q7,c}function V_(){ea=4,Lc||(nr&4194048)!==nr&&bs.current!==null||(Vf=!0),($c&134217727)===0&&(ud&134217727)===0||Pr===null||Uc(Pr,nr,vs,!1)}function G_(c,f,g){var _=gr;gr|=2;var N=$R(),L=BR();(Pr!==c||nr!==f)&&(Jy=null,Zf(c,f)),f=!1;var oe=ea;e:do try{if(yr!==0&&Zn!==null){var _e=Zn,ze=Yi;switch(yr){case 8:q_(),oe=6;break e;case 3:case 2:case 9:case 6:bs.current===null&&(f=!0);var dt=yr;if(yr=0,Yi=null,Yf(c,_e,ze,dt),g&&Vf){oe=0;break e}break;default:dt=yr,yr=0,Yi=null,Yf(c,_e,ze,dt)}}nU(),oe=ea;break}catch(At){LR(c,At)}while(!0);return f&&c.shellSuspendCounter++,Cl=ad=null,gr=_,ie.H=N,ie.A=L,Zn===null&&(Pr=null,nr=0,_n()),oe}function nU(){for(;Zn!==null;)zR(Zn)}function rU(c,f){var g=gr;gr|=2;var _=$R(),N=BR();Pr!==c||nr!==f?(Jy=null,Xy=de()+500,Zf(c,f)):Vf=le(c,f);e:do try{if(yr!==0&&Zn!==null){f=Zn;var L=Yi;t:switch(yr){case 1:yr=0,Yi=null,Yf(c,f,L,1);break;case 2:case 9:if(QA(L)){yr=0,Yi=null,UR(f);break}f=function(){yr!==2&&yr!==9||Pr!==c||(yr=7),Ro(c)},L.then(f,f);break e;case 3:yr=7;break e;case 4:yr=5;break e;case 7:QA(L)?(yr=0,Yi=null,UR(f)):(yr=0,Yi=null,Yf(c,f,L,7));break;case 5:var oe=null;switch(Zn.tag){case 26:oe=Zn.memoizedState;case 5:case 27:var _e=Zn;if(!oe||SI(oe)){yr=0,Yi=null;var ze=_e.sibling;if(ze!==null)Zn=ze;else{var dt=_e.return;dt!==null?(Zn=dt,eb(dt)):Zn=null}break t}}yr=0,Yi=null,Yf(c,f,L,5);break;case 6:yr=0,Yi=null,Yf(c,f,L,6);break;case 8:q_(),ea=6;break e;default:throw Error(r(462))}}aU();break}catch(At){LR(c,At)}while(!0);return Cl=ad=null,ie.H=_,ie.A=N,gr=g,Zn!==null?0:(Pr=null,nr=0,_n(),ea)}function aU(){for(;Zn!==null&&!Se();)zR(Zn)}function zR(c){var f=pR(c.alternate,c,Ol);c.memoizedProps=c.pendingProps,f===null?eb(c):Zn=f}function UR(c){var f=c,g=f.alternate;switch(f.tag){case 15:case 0:f=lR(g,f,f.pendingProps,f.type,void 0,nr);break;case 11:f=lR(g,f,f.pendingProps,f.type.render,f.ref,nr);break;case 5:o_(f);default:gR(g,f),f=Zn=HA(f,Ol),f=pR(g,f,Ol)}c.memoizedProps=c.pendingProps,f===null?eb(c):Zn=f}function Yf(c,f,g,_){Cl=ad=null,o_(f),zf=null,pm=0;var N=f.return;try{if(K7(c,N,f,g,nr)){ea=1,Vy(c,pn(g,c.current)),Zn=null;return}}catch(L){if(N!==null)throw Zn=N,L;ea=1,Vy(c,pn(g,c.current)),Zn=null;return}f.flags&32768?(cr||_===1?c=!0:Vf||(nr&536870912)!==0?c=!1:(Lc=c=!0,(_===2||_===9||_===3||_===6)&&(_=bs.current,_!==null&&_.tag===13&&(_.flags|=16384))),HR(f,c)):eb(f)}function eb(c){var f=c;do{if((f.flags&32768)!==0){HR(f,Lc);return}c=f.return;var g=Z7(f.alternate,f,Ol);if(g!==null){Zn=g;return}if(f=f.sibling,f!==null){Zn=f;return}Zn=f=c}while(f!==null);ea===0&&(ea=5)}function HR(c,f){do{var g=Y7(c.alternate,c);if(g!==null){g.flags&=32767,Zn=g;return}if(g=c.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(c=c.sibling,c!==null)){Zn=c;return}Zn=c=g}while(c!==null);ea=6,Zn=null}function qR(c,f,g,_,N,L,oe,_e,ze){c.cancelPendingCommit=null;do tb();while(Ka!==0);if((gr&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(L=f.lanes|f.childLanes,L|=Va,ge(c,g,L,oe,_e,ze),c===Pr&&(Zn=Pr=null,nr=0),Kf=f,zc=c,Wf=g,z_=L,U_=N,DR=_,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,lU(Fe,function(){return ZR(),null})):(c.callbackNode=null,c.callbackPriority=0),_=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||_){_=ie.T,ie.T=null,N=ne.p,ne.p=2,oe=gr,gr|=4;try{X7(c,f,g)}finally{gr=oe,ne.p=N,ie.T=_}}Ka=1,VR(),GR(),KR()}}function VR(){if(Ka===1){Ka=0;var c=zc,f=Kf,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=ie.T,ie.T=null;var _=ne.p;ne.p=2;var N=gr;gr|=4;try{TR(f,c);var L=aS,oe=ce(c.containerInfo),_e=L.focusedElem,ze=L.selectionRange;if(oe!==_e&&_e&&_e.ownerDocument&&re(_e.ownerDocument.documentElement,_e)){if(ze!==null&&we(_e)){var dt=ze.start,At=ze.end;if(At===void 0&&(At=dt),"selectionStart"in _e)_e.selectionStart=dt,_e.selectionEnd=Math.min(At,_e.value.length);else{var Mt=_e.ownerDocument||document,mt=Mt&&Mt.defaultView||window;if(mt.getSelection){var yt=mt.getSelection(),Sn=_e.textContent.length,yn=Math.min(ze.start,Sn),Cr=ze.end===void 0?yn:Math.min(ze.end,Sn);!yt.extend&&yn>Cr&&(oe=Cr,Cr=yn,yn=oe);var at=Y(_e,yn),Ze=Y(_e,Cr);if(at&&Ze&&(yt.rangeCount!==1||yt.anchorNode!==at.node||yt.anchorOffset!==at.offset||yt.focusNode!==Ze.node||yt.focusOffset!==Ze.offset)){var ct=Mt.createRange();ct.setStart(at.node,at.offset),yt.removeAllRanges(),yn>Cr?(yt.addRange(ct),yt.extend(Ze.node,Ze.offset)):(ct.setEnd(Ze.node,Ze.offset),yt.addRange(ct))}}}}for(Mt=[],yt=_e;yt=yt.parentNode;)yt.nodeType===1&&Mt.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<Mt.length;_e++){var It=Mt[_e];It.element.scrollLeft=It.left,It.element.scrollTop=It.top}}hb=!!rS,aS=rS=null}finally{gr=N,ne.p=_,ie.T=g}}c.current=f,Ka=2}}function GR(){if(Ka===2){Ka=0;var c=zc,f=Kf,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=ie.T,ie.T=null;var _=ne.p;ne.p=2;var N=gr;gr|=4;try{SR(c,f.alternate,f)}finally{gr=N,ne.p=_,ie.T=g}}Ka=3}}function KR(){if(Ka===4||Ka===3){Ka=0,Te();var c=zc,f=Kf,g=Wf,_=DR;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Ka=5:(Ka=0,Kf=zc=null,WR(c,c.pendingLanes));var N=c.pendingLanes;if(N===0&&(Bc=null),me(g),f=f.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(St,f,void 0,(f.current.flags&128)===128)}catch{}if(_!==null){f=ie.T,N=ne.p,ne.p=2,ie.T=null;try{for(var L=c.onRecoverableError,oe=0;oe<_.length;oe++){var _e=_[oe];L(_e.value,{componentStack:_e.stack})}}finally{ie.T=f,ne.p=N}}(Wf&3)!==0&&tb(),Ro(c),N=c.pendingLanes,(g&4194090)!==0&&(N&42)!==0?c===H_?Sm++:(Sm=0,H_=c):Sm=0,Em(0)}}function WR(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,rm(f)))}function tb(c){return VR(),GR(),KR(),ZR()}function ZR(){if(Ka!==5)return!1;var c=zc,f=z_;z_=0;var g=me(Wf),_=ie.T,N=ne.p;try{ne.p=32>g?32:g,ie.T=null,g=U_,U_=null;var L=zc,oe=Wf;if(Ka=0,Kf=zc=null,Wf=0,(gr&6)!==0)throw Error(r(331));var _e=gr;if(gr|=4,jR(L.current),NR(L,L.current,oe,g),gr=_e,Em(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(St,L)}catch{}return!0}finally{ne.p=N,ie.T=_,WR(c,f)}}function YR(c,f,g){f=pn(g,f),f=x_(c.stateNode,f,2),c=Ic(c,f,2),c!==null&&(nt(c,2),Ro(c))}function jr(c,f,g){if(c.tag===3)YR(c,c,g);else for(;f!==null;){if(f.tag===3){YR(f,c,g);break}else if(f.tag===1){var _=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Bc===null||!Bc.has(_))){c=pn(g,c),g=eR(2),_=Ic(f,g,2),_!==null&&(tR(g,_,f,c),nt(_,2),Ro(_));break}}f=f.return}}function K_(c,f,g){var _=c.pingCache;if(_===null){_=c.pingCache=new eU;var N=new Set;_.set(f,N)}else N=_.get(f),N===void 0&&(N=new Set,_.set(f,N));N.has(g)||(F_=!0,N.add(g),c=iU.bind(null,c,f,g),f.then(c,c))}function iU(c,f,g){var _=c.pingCache;_!==null&&_.delete(f),c.pingedLanes|=c.suspendedLanes&g,c.warmLanes&=~g,Pr===c&&(nr&g)===g&&(ea===4||ea===3&&(nr&62914560)===nr&&300>de()-B_?(gr&2)===0&&Zf(c,0):L_|=g,Gf===nr&&(Gf=0)),Ro(c)}function XR(c,f){f===0&&(f=P()),c=Us(c,f),c!==null&&(nt(c,f),Ro(c))}function sU(c){var f=c.memoizedState,g=0;f!==null&&(g=f.retryLane),XR(c,g)}function oU(c,f){var g=0;switch(c.tag){case 13:var _=c.stateNode,N=c.memoizedState;N!==null&&(g=N.retryLane);break;case 19:_=c.stateNode;break;case 22:_=c.stateNode._retryCache;break;default:throw Error(r(314))}_!==null&&_.delete(f),XR(c,g)}function lU(c,f){return Ie(c,f)}var nb=null,Xf=null,W_=!1,rb=!1,Z_=!1,dd=0;function Ro(c){c!==Xf&&c.next===null&&(Xf===null?nb=Xf=c:Xf=Xf.next=c),rb=!0,W_||(W_=!0,uU())}function Em(c,f){if(!Z_&&rb){Z_=!0;do for(var g=!1,_=nb;_!==null;){if(c!==0){var N=_.pendingLanes;if(N===0)var L=0;else{var oe=_.suspendedLanes,_e=_.pingedLanes;L=(1<<31-Zt(42|c)+1)-1,L&=N&~(oe&~_e),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(g=!0,tI(_,L))}else L=nr,L=ke(_,_===Pr?L:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(L&3)===0||le(_,L)||(g=!0,tI(_,L));_=_.next}while(g);Z_=!1}}function cU(){JR()}function JR(){rb=W_=!1;var c=0;dd!==0&&(bU()&&(c=dd),dd=0);for(var f=de(),g=null,_=nb;_!==null;){var N=_.next,L=QR(_,f);L===0?(_.next=null,g===null?nb=N:g.next=N,N===null&&(Xf=g)):(g=_,(c!==0||(L&3)!==0)&&(rb=!0)),_=N}Em(c)}function QR(c,f){for(var g=c.suspendedLanes,_=c.pingedLanes,N=c.expirationTimes,L=c.pendingLanes&-62914561;0<L;){var oe=31-Zt(L),_e=1<<oe,ze=N[oe];ze===-1?((_e&g)===0||(_e&_)!==0)&&(N[oe]=ft(_e,f)):ze<=f&&(c.expiredLanes|=_e),L&=~_e}if(f=Pr,g=nr,g=ke(c,c===f?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),_=c.callbackNode,g===0||c===f&&(yr===2||yr===9)||c.cancelPendingCommit!==null)return _!==null&&_!==null&&z(_),c.callbackNode=null,c.callbackPriority=0;if((g&3)===0||le(c,g)){if(f=g&-g,f===c.callbackPriority)return f;switch(_!==null&&z(_),me(g)){case 2:case 8:g=xe;break;case 32:g=Fe;break;case 268435456:g=Ge;break;default:g=Fe}return _=eI.bind(null,c),g=Ie(g,_),c.callbackPriority=f,c.callbackNode=g,f}return _!==null&&_!==null&&z(_),c.callbackPriority=2,c.callbackNode=null,2}function eI(c,f){if(Ka!==0&&Ka!==5)return c.callbackNode=null,c.callbackPriority=0,null;var g=c.callbackNode;if(tb()&&c.callbackNode!==g)return null;var _=nr;return _=ke(c,c===Pr?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),_===0?null:(PR(c,_,f),QR(c,de()),c.callbackNode!=null&&c.callbackNode===g?eI.bind(null,c):null)}function tI(c,f){if(tb())return null;PR(c,f,!0)}function uU(){wU(function(){(gr&6)!==0?Ie(Q,cU):JR()})}function Y_(){return dd===0&&(dd=vt()),dd}function nI(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:hl(""+c)}function rI(c,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,c.id&&g.setAttribute("form",c.id),f.parentNode.insertBefore(g,f),c=new FormData(c),g.parentNode.removeChild(g),c}function dU(c,f,g,_,N){if(f==="submit"&&g&&g.stateNode===N){var L=nI((N[Re]||null).action),oe=_.submitter;oe&&(f=(f=oe[Re]||null)?nI(f.formAction):oe.getAttribute("formAction"),f!==null&&(L=f,oe=null));var _e=new yf("action","action",null,_,N);c.push({event:_e,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(dd!==0){var ze=oe?rI(N,oe):new FormData(N);g_(g,{pending:!0,data:ze,method:N.method,action:L},null,ze)}}else typeof L=="function"&&(_e.preventDefault(),ze=oe?rI(N,oe):new FormData(N),g_(g,{pending:!0,data:ze,method:N.method,action:L},L,ze))},currentTarget:N}]})}}for(var X_=0;X_<Xt.length;X_++){var J_=Xt[X_],fU=J_.toLowerCase(),hU=J_[0].toUpperCase()+J_.slice(1);zt(fU,"on"+hU)}zt(ht,"onAnimationEnd"),zt(bt,"onAnimationIteration"),zt(wt,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(Tt,"onTransitionRun"),zt(Ht,"onTransitionStart"),zt(Yt,"onTransitionCancel"),zt(Bt,"onTransitionEnd"),bo("onMouseEnter",["mouseout","mouseover"]),bo("onMouseLeave",["mouseout","mouseover"]),bo("onPointerEnter",["pointerout","pointerover"]),bo("onPointerLeave",["pointerout","pointerover"]),yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yo("onBeforeInput",["compositionend","keypress","textInput","paste"]),yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Cm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Cm));function aI(c,f){f=(f&4)!==0;for(var g=0;g<c.length;g++){var _=c[g],N=_.event;_=_.listeners;e:{var L=void 0;if(f)for(var oe=_.length-1;0<=oe;oe--){var _e=_[oe],ze=_e.instance,dt=_e.currentTarget;if(_e=_e.listener,ze!==L&&N.isPropagationStopped())break e;L=_e,N.currentTarget=dt;try{L(N)}catch(At){qy(At)}N.currentTarget=null,L=ze}else for(oe=0;oe<_.length;oe++){if(_e=_[oe],ze=_e.instance,dt=_e.currentTarget,_e=_e.listener,ze!==L&&N.isPropagationStopped())break e;L=_e,N.currentTarget=dt;try{L(N)}catch(At){qy(At)}N.currentTarget=null,L=ze}}}}function Yn(c,f){var g=f[pt];g===void 0&&(g=f[pt]=new Set);var _=c+"__bubble";g.has(_)||(iI(f,c,2,!1),g.add(_))}function Q_(c,f,g){var _=0;f&&(_|=4),iI(g,c,_,f)}var ab="_reactListening"+Math.random().toString(36).slice(2);function eS(c){if(!c[ab]){c[ab]=!0,hi.forEach(function(g){g!=="selectionchange"&&(pU.has(g)||Q_(g,!1,c),Q_(g,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[ab]||(f[ab]=!0,Q_("selectionchange",!1,f))}}function iI(c,f,g,_){switch(NI(f)){case 2:var N=zU;break;case 8:N=UU;break;default:N=pS}g=N.bind(null,f,g,c),N=void 0,!$p||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(N=!0),_?N!==void 0?c.addEventListener(f,g,{capture:!0,passive:N}):c.addEventListener(f,g,!0):N!==void 0?c.addEventListener(f,g,{passive:N}):c.addEventListener(f,g,!1)}function tS(c,f,g,_,N){var L=_;if((f&1)===0&&(f&2)===0&&_!==null)e:for(;;){if(_===null)return;var oe=_.tag;if(oe===3||oe===4){var _e=_.stateNode.containerInfo;if(_e===N)break;if(oe===4)for(oe=_.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===N)return;oe=oe.return}for(;_e!==null;){if(oe=An(_e),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){_=L=oe;continue e}_e=_e.parentNode}}_=_.return}wc(function(){var dt=L,At=mf(g),Mt=[];e:{var mt=Gt.get(c);if(mt!==void 0){var yt=yf,Sn=c;switch(c){case"keypress":if(Sc(g)===0)break e;case"keydown":case"keyup":yt=Cf;break;case"focusin":Sn="focus",yt=Ec;break;case"focusout":Sn="blur",yt=Ec;break;case"beforeblur":case"afterblur":yt=Ec;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=wf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=hy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Gp;break;case ht:case bt:case wt:yt=py;break;case Bt:yt=Kp;break;case"scroll":case"scrollend":yt=bf;break;case"wheel":yt=Tf;break;case"copy":case"cut":case"paste":yt=Sf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Vp;break;case"toggle":case"beforetoggle":yt=yy}var yn=(f&4)!==0,Cr=!yn&&(c==="scroll"||c==="scrollend"),at=yn?mt!==null?mt+"Capture":null:mt;yn=[];for(var Ze=dt,ct;Ze!==null;){var It=Ze;if(ct=It.stateNode,It=It.tag,It!==5&&It!==26&&It!==27||ct===null||at===null||(It=gl(Ze,at),It!=null&&yn.push(km(Ze,It,ct))),Cr)break;Ze=Ze.return}0<yn.length&&(mt=new yt(mt,Sn,null,g,At),Mt.push({event:mt,listeners:yn}))}}if((f&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",yt=c==="mouseout"||c==="pointerout",mt&&g!==fs&&(Sn=g.relatedTarget||g.fromElement)&&(An(Sn)||Sn[He]))break e;if((yt||mt)&&(mt=At.window===At?At:(mt=At.ownerDocument)?mt.defaultView||mt.parentWindow:window,yt?(Sn=g.relatedTarget||g.toElement,yt=dt,Sn=Sn?An(Sn):null,Sn!==null&&(Cr=i(Sn),yn=Sn.tag,Sn!==Cr||yn!==5&&yn!==27&&yn!==6)&&(Sn=null)):(yt=null,Sn=dt),yt!==Sn)){if(yn=wf,It="onMouseLeave",at="onMouseEnter",Ze="mouse",(c==="pointerout"||c==="pointerover")&&(yn=Vp,It="onPointerLeave",at="onPointerEnter",Ze="pointer"),Cr=yt==null?mt:xr(yt),ct=Sn==null?mt:xr(Sn),mt=new yn(It,Ze+"leave",yt,g,At),mt.target=Cr,mt.relatedTarget=ct,It=null,An(At)===dt&&(yn=new yn(at,Ze+"enter",Sn,g,At),yn.target=ct,yn.relatedTarget=Cr,It=yn),Cr=It,yt&&Sn)t:{for(yn=yt,at=Sn,Ze=0,ct=yn;ct;ct=Jf(ct))Ze++;for(ct=0,It=at;It;It=Jf(It))ct++;for(;0<Ze-ct;)yn=Jf(yn),Ze--;for(;0<ct-Ze;)at=Jf(at),ct--;for(;Ze--;){if(yn===at||at!==null&&yn===at.alternate)break t;yn=Jf(yn),at=Jf(at)}yn=null}else yn=null;yt!==null&&sI(Mt,mt,yt,yn,!1),Sn!==null&&Cr!==null&&sI(Mt,Cr,Sn,yn,!0)}}e:{if(mt=dt?xr(dt):window,yt=mt.nodeName&&mt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&mt.type==="file")var sn=Ju;else if(Rf(mt))if(ps)sn=Tc;else{sn=xl;var Hn=Sy}else yt=mt.nodeName,!yt||yt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&Lp(dt.elementType)&&(sn=Ju):sn=Jp;if(sn&&(sn=sn(c,dt))){Xp(Mt,sn,g,At);break e}Hn&&Hn(c,mt,dt),c==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&gc(mt,"number",mt.value)}switch(Hn=dt?xr(dt):window,c){case"focusin":(Rf(Hn)||Hn.contentEditable==="true")&&($e=Hn,We=dt,Xe=null);break;case"focusout":Xe=We=$e=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,qe(Mt,g,At);break;case"selectionchange":if(Me)break;case"keydown":case"keyup":qe(Mt,g,At)}var fn;if(Yu)e:{switch(c){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else wl?Yp(c,g)&&(wn="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(wn="onCompositionStart");wn&&(Af&&g.locale!=="ko"&&(wl||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&wl&&(fn=_c()):(hs=At,gf="value"in hs?hs.value:hs.textContent,wl=!0)),Hn=ib(dt,wn),0<Hn.length&&(wn=new Ef(wn,c,null,g,At),Mt.push({event:wn,listeners:Hn}),fn?wn.data=fn:(fn=vy(g),fn!==null&&(wn.data=fn)))),(fn=M1?wy(c,g):P1(c,g))&&(wn=ib(dt,"onBeforeInput"),0<wn.length&&(Hn=new Ef("onBeforeInput","beforeinput",null,g,At),Mt.push({event:Hn,listeners:wn}),Hn.data=fn)),dU(Mt,c,dt,g,At)}aI(Mt,f)})}function km(c,f,g){return{instance:c,listener:f,currentTarget:g}}function ib(c,f){for(var g=f+"Capture",_=[];c!==null;){var N=c,L=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||L===null||(N=gl(c,g),N!=null&&_.unshift(km(c,N,L)),N=gl(c,f),N!=null&&_.push(km(c,N,L))),c.tag===3)return _;c=c.return}return[]}function Jf(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function sI(c,f,g,_,N){for(var L=f._reactName,oe=[];g!==null&&g!==_;){var _e=g,ze=_e.alternate,dt=_e.stateNode;if(_e=_e.tag,ze!==null&&ze===_)break;_e!==5&&_e!==26&&_e!==27||dt===null||(ze=dt,N?(dt=gl(g,L),dt!=null&&oe.unshift(km(g,dt,ze))):N||(dt=gl(g,L),dt!=null&&oe.push(km(g,dt,ze)))),g=g.return}oe.length!==0&&c.push({event:f,listeners:oe})}var mU=/\r\n?/g,gU=/\u0000|\uFFFD/g;function oI(c){return(typeof c=="string"?c:""+c).replace(mU,`
`).replace(gU,"")}function lI(c,f){return f=oI(f),oI(c)===f}function sb(){}function Er(c,f,g,_,N,L){switch(g){case"children":typeof _=="string"?f==="body"||f==="textarea"&&_===""||bc(c,_):(typeof _=="number"||typeof _=="bigint")&&f!=="body"&&bc(c,""+_);break;case"className":ul(c,"class",_);break;case"tabIndex":ul(c,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":ul(c,g,_);break;case"style":dy(c,_,L);break;case"data":if(f!=="object"){ul(c,"data",_);break}case"src":case"href":if(_===""&&(f!=="a"||g!=="href")){c.removeAttribute(g);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){c.removeAttribute(g);break}_=hl(""+_),c.setAttribute(g,_);break;case"action":case"formAction":if(typeof _=="function"){c.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(g==="formAction"?(f!=="input"&&Er(c,f,"name",N.name,N,null),Er(c,f,"formEncType",N.formEncType,N,null),Er(c,f,"formMethod",N.formMethod,N,null),Er(c,f,"formTarget",N.formTarget,N,null)):(Er(c,f,"encType",N.encType,N,null),Er(c,f,"method",N.method,N,null),Er(c,f,"target",N.target,N,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){c.removeAttribute(g);break}_=hl(""+_),c.setAttribute(g,_);break;case"onClick":_!=null&&(c.onclick=sb);break;case"onScroll":_!=null&&Yn("scroll",c);break;case"onScrollEnd":_!=null&&Yn("scrollend",c);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"multiple":c.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":c.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){c.removeAttribute("xlink:href");break}g=hl(""+_),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,""+_):c.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,""):c.removeAttribute(g);break;case"capture":case"download":_===!0?c.setAttribute(g,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?c.setAttribute(g,_):c.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?c.setAttribute(g,_):c.removeAttribute(g);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?c.removeAttribute(g):c.setAttribute(g,_);break;case"popover":Yn("beforetoggle",c),Yn("toggle",c),Bs(c,"popover",_);break;case"xlinkActuate":Vi(c,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Vi(c,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Vi(c,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Vi(c,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Vi(c,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Vi(c,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Vi(c,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Vi(c,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Vi(c,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":Bs(c,"is",_);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=mi.get(g)||g,Bs(c,g,_))}}function nS(c,f,g,_,N,L){switch(g){case"style":dy(c,_,L);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(r(61));if(g=_.__html,g!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=g}}break;case"children":typeof _=="string"?bc(c,_):(typeof _=="number"||typeof _=="bigint")&&bc(c,""+_);break;case"onScroll":_!=null&&Yn("scroll",c);break;case"onScrollEnd":_!=null&&Yn("scrollend",c);break;case"onClick":_!=null&&(c.onclick=sb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!go.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(N=g.endsWith("Capture"),f=g.slice(2,N?g.length-7:void 0),L=c[Re]||null,L=L!=null?L[g]:null,typeof L=="function"&&c.removeEventListener(f,L,N),typeof _=="function")){typeof L!="function"&&L!==null&&(g in c?c[g]=null:c.hasAttribute(g)&&c.removeAttribute(g)),c.addEventListener(f,_,N);break e}g in c?c[g]=_:_===!0?c.setAttribute(g,""):Bs(c,g,_)}}}function Wa(c,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yn("error",c),Yn("load",c);var _=!1,N=!1,L;for(L in g)if(g.hasOwnProperty(L)){var oe=g[L];if(oe!=null)switch(L){case"src":_=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Er(c,f,L,oe,g,null)}}N&&Er(c,f,"srcSet",g.srcSet,g,null),_&&Er(c,f,"src",g.src,g,null);return;case"input":Yn("invalid",c);var _e=L=oe=N=null,ze=null,dt=null;for(_ in g)if(g.hasOwnProperty(_)){var At=g[_];if(At!=null)switch(_){case"name":N=At;break;case"type":oe=At;break;case"checked":ze=At;break;case"defaultChecked":dt=At;break;case"value":L=At;break;case"defaultValue":_e=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,f));break;default:Er(c,f,_,At,g,null)}}Pp(c,L,_e,ze,dt,oe,N,!1),xo(c);return;case"select":Yn("invalid",c),_=oe=L=null;for(N in g)if(g.hasOwnProperty(N)&&(_e=g[N],_e!=null))switch(N){case"value":L=_e;break;case"defaultValue":oe=_e;break;case"multiple":_=_e;default:Er(c,f,N,_e,g,null)}f=L,g=oe,c.multiple=!!_,f!=null?fl(c,!!_,f,!1):g!=null&&fl(c,!!_,g,!0);return;case"textarea":Yn("invalid",c),L=N=_=null;for(oe in g)if(g.hasOwnProperty(oe)&&(_e=g[oe],_e!=null))switch(oe){case"value":_=_e;break;case"defaultValue":N=_e;break;case"children":L=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(91));break;default:Er(c,f,oe,_e,g,null)}Fp(c,_,N,L),xo(c);return;case"option":for(ze in g)if(g.hasOwnProperty(ze)&&(_=g[ze],_!=null))switch(ze){case"selected":c.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Er(c,f,ze,_,g,null)}return;case"dialog":Yn("beforetoggle",c),Yn("toggle",c),Yn("cancel",c),Yn("close",c);break;case"iframe":case"object":Yn("load",c);break;case"video":case"audio":for(_=0;_<Cm.length;_++)Yn(Cm[_],c);break;case"image":Yn("error",c),Yn("load",c);break;case"details":Yn("toggle",c);break;case"embed":case"source":case"link":Yn("error",c),Yn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in g)if(g.hasOwnProperty(dt)&&(_=g[dt],_!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:Er(c,f,dt,_,g,null)}return;default:if(Lp(f)){for(At in g)g.hasOwnProperty(At)&&(_=g[At],_!==void 0&&nS(c,f,At,_,g,void 0));return}}for(_e in g)g.hasOwnProperty(_e)&&(_=g[_e],_!=null&&Er(c,f,_e,_,g,null))}function yU(c,f,g,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,L=null,oe=null,_e=null,ze=null,dt=null,At=null;for(yt in g){var Mt=g[yt];if(g.hasOwnProperty(yt)&&Mt!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":ze=Mt;default:_.hasOwnProperty(yt)||Er(c,f,yt,null,_,Mt)}}for(var mt in _){var yt=_[mt];if(Mt=g[mt],_.hasOwnProperty(mt)&&(yt!=null||Mt!=null))switch(mt){case"type":L=yt;break;case"name":N=yt;break;case"checked":dt=yt;break;case"defaultChecked":At=yt;break;case"value":oe=yt;break;case"defaultValue":_e=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,f));break;default:yt!==Mt&&Er(c,f,mt,yt,_,Mt)}}mc(c,oe,_e,ze,dt,At,L,N);return;case"select":yt=oe=_e=mt=null;for(L in g)if(ze=g[L],g.hasOwnProperty(L)&&ze!=null)switch(L){case"value":break;case"multiple":yt=ze;default:_.hasOwnProperty(L)||Er(c,f,L,null,_,ze)}for(N in _)if(L=_[N],ze=g[N],_.hasOwnProperty(N)&&(L!=null||ze!=null))switch(N){case"value":mt=L;break;case"defaultValue":_e=L;break;case"multiple":oe=L;default:L!==ze&&Er(c,f,N,L,_,ze)}f=_e,g=oe,_=yt,mt!=null?fl(c,!!g,mt,!1):!!_!=!!g&&(f!=null?fl(c,!!g,f,!0):fl(c,!!g,g?[]:"",!1));return;case"textarea":yt=mt=null;for(_e in g)if(N=g[_e],g.hasOwnProperty(_e)&&N!=null&&!_.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Er(c,f,_e,null,_,N)}for(oe in _)if(N=_[oe],L=g[oe],_.hasOwnProperty(oe)&&(N!=null||L!=null))switch(oe){case"value":mt=N;break;case"defaultValue":yt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==L&&Er(c,f,oe,N,_,L)}yc(c,mt,yt);return;case"option":for(var Sn in g)if(mt=g[Sn],g.hasOwnProperty(Sn)&&mt!=null&&!_.hasOwnProperty(Sn))switch(Sn){case"selected":c.selected=!1;break;default:Er(c,f,Sn,null,_,mt)}for(ze in _)if(mt=_[ze],yt=g[ze],_.hasOwnProperty(ze)&&mt!==yt&&(mt!=null||yt!=null))switch(ze){case"selected":c.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:Er(c,f,ze,mt,_,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in g)mt=g[yn],g.hasOwnProperty(yn)&&mt!=null&&!_.hasOwnProperty(yn)&&Er(c,f,yn,null,_,mt);for(dt in _)if(mt=_[dt],yt=g[dt],_.hasOwnProperty(dt)&&mt!==yt&&(mt!=null||yt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:Er(c,f,dt,mt,_,yt)}return;default:if(Lp(f)){for(var Cr in g)mt=g[Cr],g.hasOwnProperty(Cr)&&mt!==void 0&&!_.hasOwnProperty(Cr)&&nS(c,f,Cr,void 0,_,mt);for(At in _)mt=_[At],yt=g[At],!_.hasOwnProperty(At)||mt===yt||mt===void 0&&yt===void 0||nS(c,f,At,mt,_,yt);return}}for(var at in g)mt=g[at],g.hasOwnProperty(at)&&mt!=null&&!_.hasOwnProperty(at)&&Er(c,f,at,null,_,mt);for(Mt in _)mt=_[Mt],yt=g[Mt],!_.hasOwnProperty(Mt)||mt===yt||mt==null&&yt==null||Er(c,f,Mt,mt,_,yt)}var rS=null,aS=null;function ob(c){return c.nodeType===9?c:c.ownerDocument}function cI(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uI(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function iS(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var sS=null;function bU(){var c=window.event;return c&&c.type==="popstate"?c===sS?!1:(sS=c,!0):(sS=null,!1)}var dI=typeof setTimeout=="function"?setTimeout:void 0,vU=typeof clearTimeout=="function"?clearTimeout:void 0,fI=typeof Promise=="function"?Promise:void 0,wU=typeof queueMicrotask=="function"?queueMicrotask:typeof fI<"u"?function(c){return fI.resolve(null).then(c).catch(xU)}:dI;function xU(c){setTimeout(function(){throw c})}function Hc(c){return c==="head"}function hI(c,f){var g=f,_=0,N=0;do{var L=g.nextSibling;if(c.removeChild(g),L&&L.nodeType===8)if(g=L.data,g==="/$"){if(0<_&&8>_){g=_;var oe=c.ownerDocument;if(g&1&&Tm(oe.documentElement),g&2&&Tm(oe.body),g&4)for(g=oe.head,Tm(g),oe=g.firstChild;oe;){var _e=oe.nextSibling,ze=oe.nodeName;oe[Lt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||g.removeChild(oe),oe=_e}}if(N===0){c.removeChild(L),Mm(f);return}N--}else g==="$"||g==="$?"||g==="$!"?N++:_=g.charCodeAt(0)-48;else _=0;g=L}while(g);Mm(f)}function oS(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":oS(g),Qt(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}c.removeChild(g)}}function _U(c,f,g,_){for(;c.nodeType===1;){var N=g;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!_&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(_){if(!c[Lt])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(L=c.getAttribute("rel"),L==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(L!==N.rel||c.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||c.getAttribute("title")!==(N.title==null?null:N.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(L=c.getAttribute("src"),(L!==(N.src==null?null:N.src)||c.getAttribute("type")!==(N.type==null?null:N.type)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&L&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var L=N.name==null?null:""+N.name;if(N.type==="hidden"&&c.getAttribute("name")===L)return c}else return c;if(c=qs(c.nextSibling),c===null)break}return null}function SU(c,f,g){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!g||(c=qs(c.nextSibling),c===null))return null;return c}function lS(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function EU(c,f){var g=c.ownerDocument;if(c.data!=="$?"||g.readyState==="complete")f();else{var _=function(){f(),g.removeEventListener("DOMContentLoaded",_)};g.addEventListener("DOMContentLoaded",_),c._reactRetry=_}}function qs(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var cS=null;function pI(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return c;f--}else g==="/$"&&f++}c=c.previousSibling}return null}function mI(c,f,g){switch(f=ob(g),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Tm(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);Qt(c)}var ws=new Map,gI=new Set;function lb(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Dl=ne.d;ne.d={f:CU,r:kU,D:TU,C:AU,L:NU,m:RU,X:jU,S:IU,M:OU};function CU(){var c=Dl.f(),f=Qy();return c||f}function kU(c){var f=Kn(c);f!==null&&f.tag===5&&f.type==="form"?PN(f):Dl.r(c)}var Qf=typeof document>"u"?null:document;function yI(c,f,g){var _=Qf;if(_&&typeof f=="string"&&f){var N=Xa(f);N='link[rel="'+c+'"][href="'+N+'"]',typeof g=="string"&&(N+='[crossorigin="'+g+'"]'),gI.has(N)||(gI.add(N),c={rel:c,crossOrigin:g,href:f},_.querySelector(N)===null&&(f=_.createElement("link"),Wa(f,"link",c),Fn(f),_.head.appendChild(f)))}}function TU(c){Dl.D(c),yI("dns-prefetch",c,null)}function AU(c,f){Dl.C(c,f),yI("preconnect",c,f)}function NU(c,f,g){Dl.L(c,f,g);var _=Qf;if(_&&c&&f){var N='link[rel="preload"][as="'+Xa(f)+'"]';f==="image"&&g&&g.imageSrcSet?(N+='[imagesrcset="'+Xa(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(N+='[imagesizes="'+Xa(g.imageSizes)+'"]')):N+='[href="'+Xa(c)+'"]';var L=N;switch(f){case"style":L=eh(c);break;case"script":L=th(c)}ws.has(L)||(c=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:c,as:f},g),ws.set(L,c),_.querySelector(N)!==null||f==="style"&&_.querySelector(Am(L))||f==="script"&&_.querySelector(Nm(L))||(f=_.createElement("link"),Wa(f,"link",c),Fn(f),_.head.appendChild(f)))}}function RU(c,f){Dl.m(c,f);var g=Qf;if(g&&c){var _=f&&typeof f.as=="string"?f.as:"script",N='link[rel="modulepreload"][as="'+Xa(_)+'"][href="'+Xa(c)+'"]',L=N;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=th(c)}if(!ws.has(L)&&(c=d({rel:"modulepreload",href:c},f),ws.set(L,c),g.querySelector(N)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Nm(L)))return}_=g.createElement("link"),Wa(_,"link",c),Fn(_),g.head.appendChild(_)}}}function IU(c,f,g){Dl.S(c,f,g);var _=Qf;if(_&&c){var N=_r(_).hoistableStyles,L=eh(c);f=f||"default";var oe=N.get(L);if(!oe){var _e={loading:0,preload:null};if(oe=_.querySelector(Am(L)))_e.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},g),(g=ws.get(L))&&uS(c,g);var ze=oe=_.createElement("link");Fn(ze),Wa(ze,"link",c),ze._p=new Promise(function(dt,At){ze.onload=dt,ze.onerror=At}),ze.addEventListener("load",function(){_e.loading|=1}),ze.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,cb(oe,f,_)}oe={type:"stylesheet",instance:oe,count:1,state:_e},N.set(L,oe)}}}function jU(c,f){Dl.X(c,f);var g=Qf;if(g&&c){var _=_r(g).hoistableScripts,N=th(c),L=_.get(N);L||(L=g.querySelector(Nm(N)),L||(c=d({src:c,async:!0},f),(f=ws.get(N))&&dS(c,f),L=g.createElement("script"),Fn(L),Wa(L,"link",c),g.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},_.set(N,L))}}function OU(c,f){Dl.M(c,f);var g=Qf;if(g&&c){var _=_r(g).hoistableScripts,N=th(c),L=_.get(N);L||(L=g.querySelector(Nm(N)),L||(c=d({src:c,async:!0,type:"module"},f),(f=ws.get(N))&&dS(c,f),L=g.createElement("script"),Fn(L),Wa(L,"link",c),g.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},_.set(N,L))}}function bI(c,f,g,_){var N=(N=De.current)?lb(N):null;if(!N)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=eh(g.href),g=_r(N).hoistableStyles,_=g.get(f),_||(_={type:"style",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){c=eh(g.href);var L=_r(N).hoistableStyles,oe=L.get(c);if(oe||(N=N.ownerDocument||N,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(c,oe),(L=N.querySelector(Am(c)))&&!L._p&&(oe.instance=L,oe.state.loading=5),ws.has(c)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},ws.set(c,g),L||DU(N,c,g,oe.state))),f&&_===null)throw Error(r(528,""));return oe}if(f&&_!==null)throw Error(r(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=th(g),g=_r(N).hoistableScripts,_=g.get(f),_||(_={type:"script",instance:null,count:0,state:null},g.set(f,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function eh(c){return'href="'+Xa(c)+'"'}function Am(c){return'link[rel="stylesheet"]['+c+"]"}function vI(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function DU(c,f,g,_){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?_.loading=1:(f=c.createElement("link"),_.preload=f,f.addEventListener("load",function(){return _.loading|=1}),f.addEventListener("error",function(){return _.loading|=2}),Wa(f,"link",g),Fn(f),c.head.appendChild(f))}function th(c){return'[src="'+Xa(c)+'"]'}function Nm(c){return"script[async]"+c}function wI(c,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var _=c.querySelector('style[data-href~="'+Xa(g.href)+'"]');if(_)return f.instance=_,Fn(_),_;var N=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return _=(c.ownerDocument||c).createElement("style"),Fn(_),Wa(_,"style",N),cb(_,g.precedence,c),f.instance=_;case"stylesheet":N=eh(g.href);var L=c.querySelector(Am(N));if(L)return f.state.loading|=4,f.instance=L,Fn(L),L;_=vI(g),(N=ws.get(N))&&uS(_,N),L=(c.ownerDocument||c).createElement("link"),Fn(L);var oe=L;return oe._p=new Promise(function(_e,ze){oe.onload=_e,oe.onerror=ze}),Wa(L,"link",_),f.state.loading|=4,cb(L,g.precedence,c),f.instance=L;case"script":return L=th(g.src),(N=c.querySelector(Nm(L)))?(f.instance=N,Fn(N),N):(_=g,(N=ws.get(L))&&(_=d({},g),dS(_,N)),c=c.ownerDocument||c,N=c.createElement("script"),Fn(N),Wa(N,"link",_),c.head.appendChild(N),f.instance=N);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(_=f.instance,f.state.loading|=4,cb(_,g.precedence,c));return f.instance}function cb(c,f,g){for(var _=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=_.length?_[_.length-1]:null,L=N,oe=0;oe<_.length;oe++){var _e=_[oe];if(_e.dataset.precedence===f)L=_e;else if(L!==N)break}L?L.parentNode.insertBefore(c,L.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(c,f.firstChild))}function uS(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function dS(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var ub=null;function xI(c,f,g){if(ub===null){var _=new Map,N=ub=new Map;N.set(g,_)}else N=ub,_=N.get(g),_||(_=new Map,N.set(g,_));if(_.has(c))return _;for(_.set(c,null),g=g.getElementsByTagName(c),N=0;N<g.length;N++){var L=g[N];if(!(L[Lt]||L[pe]||c==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=L.getAttribute(f)||"";oe=c+oe;var _e=_.get(oe);_e?_e.push(L):_.set(oe,[L])}}return _}function _I(c,f,g){c=c.ownerDocument||c,c.head.insertBefore(g,f==="title"?c.querySelector("head > title"):null)}function MU(c,f,g){if(g===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function SI(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var Rm=null;function PU(){}function FU(c,f,g){if(Rm===null)throw Error(r(475));var _=Rm;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var N=eh(g.href),L=c.querySelector(Am(N));if(L){c=L._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(_.count++,_=db.bind(_),c.then(_,_)),f.state.loading|=4,f.instance=L,Fn(L);return}L=c.ownerDocument||c,g=vI(g),(N=ws.get(N))&&uS(g,N),L=L.createElement("link"),Fn(L);var oe=L;oe._p=new Promise(function(_e,ze){oe.onload=_e,oe.onerror=ze}),Wa(L,"link",g),f.instance=L}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(_.count++,f=db.bind(_),c.addEventListener("load",f),c.addEventListener("error",f))}}function LU(){if(Rm===null)throw Error(r(475));var c=Rm;return c.stylesheets&&c.count===0&&fS(c,c.stylesheets),0<c.count?function(f){var g=setTimeout(function(){if(c.stylesheets&&fS(c,c.stylesheets),c.unsuspend){var _=c.unsuspend;c.unsuspend=null,_()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(g)}}:null}function db(){if(this.count--,this.count===0){if(this.stylesheets)fS(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var fb=null;function fS(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,fb=new Map,f.forEach($U,c),fb=null,db.call(c))}function $U(c,f){if(!(f.state.loading&4)){var g=fb.get(c);if(g)var _=g.get(null);else{g=new Map,fb.set(c,g);for(var N=c.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<N.length;L++){var oe=N[L];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(g.set(oe.dataset.precedence,oe),_=oe)}_&&g.set(null,_)}N=f.instance,oe=N.getAttribute("data-precedence"),L=g.get(oe)||_,L===_&&g.set(null,N),g.set(oe,N),this.count++,_=db.bind(this),N.addEventListener("load",_),N.addEventListener("error",_),L?L.parentNode.insertBefore(N,L.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(N,c.firstChild)),f.state.loading|=4}}var Im={$$typeof:E,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function BU(c,f,g,_,N,L,oe,_e){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=_,this.onUncaughtError=N,this.onCaughtError=L,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function EI(c,f,g,_,N,L,oe,_e,ze,dt,At,Mt){return c=new BU(c,f,g,oe,_e,ze,dt,Mt),f=1,L===!0&&(f|=24),L=Ki(3,null,null,f),c.current=L,L.stateNode=c,f=K1(),f.refCount++,c.pooledCache=f,f.refCount++,L.memoizedState={element:_,isDehydrated:g,cache:f},X1(L),c}function CI(c){return c?(c=Co,c):Co}function kI(c,f,g,_,N,L){N=CI(N),_.context===null?_.context=N:_.pendingContext=N,_=Rc(f),_.payload={element:g},L=L===void 0?null:L,L!==null&&(_.callback=L),g=Ic(c,_,f),g!==null&&(Ji(g,c,f),om(g,c,f))}function TI(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<f?g:f}}function hS(c,f){TI(c,f),(c=c.alternate)&&TI(c,f)}function AI(c){if(c.tag===13){var f=Us(c,67108864);f!==null&&Ji(f,c,67108864),hS(c,67108864)}}var hb=!0;function zU(c,f,g,_){var N=ie.T;ie.T=null;var L=ne.p;try{ne.p=2,pS(c,f,g,_)}finally{ne.p=L,ie.T=N}}function UU(c,f,g,_){var N=ie.T;ie.T=null;var L=ne.p;try{ne.p=8,pS(c,f,g,_)}finally{ne.p=L,ie.T=N}}function pS(c,f,g,_){if(hb){var N=mS(_);if(N===null)tS(c,f,_,pb,g),RI(c,_);else if(qU(N,c,f,g,_))_.stopPropagation();else if(RI(c,_),f&4&&-1<HU.indexOf(c)){for(;N!==null;){var L=Kn(N);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var oe=be(L.pendingLanes);if(oe!==0){var _e=L;for(_e.pendingLanes|=2,_e.entangledLanes|=2;oe;){var ze=1<<31-Zt(oe);_e.entanglements[1]|=ze,oe&=~ze}Ro(L),(gr&6)===0&&(Xy=de()+500,Em(0))}}break;case 13:_e=Us(L,2),_e!==null&&Ji(_e,L,2),Qy(),hS(L,2)}if(L=mS(_),L===null&&tS(c,f,_,pb,g),L===N)break;N=L}N!==null&&_.stopPropagation()}else tS(c,f,_,null,g)}}function mS(c){return c=mf(c),gS(c)}var pb=null;function gS(c){if(pb=null,c=An(c),c!==null){var f=i(c);if(f===null)c=null;else{var g=f.tag;if(g===13){if(c=s(f),c!==null)return c;c=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return pb=c,null}function NI(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(se()){case Q:return 2;case xe:return 8;case Fe:case Ee:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var yS=!1,qc=null,Vc=null,Gc=null,jm=new Map,Om=new Map,Kc=[],HU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function RI(c,f){switch(c){case"focusin":case"focusout":qc=null;break;case"dragenter":case"dragleave":Vc=null;break;case"mouseover":case"mouseout":Gc=null;break;case"pointerover":case"pointerout":jm.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Om.delete(f.pointerId)}}function Dm(c,f,g,_,N,L){return c===null||c.nativeEvent!==L?(c={blockedOn:f,domEventName:g,eventSystemFlags:_,nativeEvent:L,targetContainers:[N]},f!==null&&(f=Kn(f),f!==null&&AI(f)),c):(c.eventSystemFlags|=_,f=c.targetContainers,N!==null&&f.indexOf(N)===-1&&f.push(N),c)}function qU(c,f,g,_,N){switch(f){case"focusin":return qc=Dm(qc,c,f,g,_,N),!0;case"dragenter":return Vc=Dm(Vc,c,f,g,_,N),!0;case"mouseover":return Gc=Dm(Gc,c,f,g,_,N),!0;case"pointerover":var L=N.pointerId;return jm.set(L,Dm(jm.get(L)||null,c,f,g,_,N)),!0;case"gotpointercapture":return L=N.pointerId,Om.set(L,Dm(Om.get(L)||null,c,f,g,_,N)),!0}return!1}function II(c){var f=An(c.target);if(f!==null){var g=i(f);if(g!==null){if(f=g.tag,f===13){if(f=s(g),f!==null){c.blockedOn=f,H(c.priority,function(){if(g.tag===13){var _=Xi();_=Ot(_);var N=Us(g,_);N!==null&&Ji(N,g,_),hS(g,_)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function mb(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var g=mS(c.nativeEvent);if(g===null){g=c.nativeEvent;var _=new g.constructor(g.type,g);fs=_,g.target.dispatchEvent(_),fs=null}else return f=Kn(g),f!==null&&AI(f),c.blockedOn=g,!1;f.shift()}return!0}function jI(c,f,g){mb(c)&&g.delete(f)}function VU(){yS=!1,qc!==null&&mb(qc)&&(qc=null),Vc!==null&&mb(Vc)&&(Vc=null),Gc!==null&&mb(Gc)&&(Gc=null),jm.forEach(jI),Om.forEach(jI)}function gb(c,f){c.blockedOn===f&&(c.blockedOn=null,yS||(yS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,VU)))}var yb=null;function OI(c){yb!==c&&(yb=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){yb===c&&(yb=null);for(var f=0;f<c.length;f+=3){var g=c[f],_=c[f+1],N=c[f+2];if(typeof _!="function"){if(gS(_||g)===null)continue;break}var L=Kn(g);L!==null&&(c.splice(f,3),f-=3,g_(L,{pending:!0,data:N,method:g.method,action:_},_,N))}}))}function Mm(c){function f(ze){return gb(ze,c)}qc!==null&&gb(qc,c),Vc!==null&&gb(Vc,c),Gc!==null&&gb(Gc,c),jm.forEach(f),Om.forEach(f);for(var g=0;g<Kc.length;g++){var _=Kc[g];_.blockedOn===c&&(_.blockedOn=null)}for(;0<Kc.length&&(g=Kc[0],g.blockedOn===null);)II(g),g.blockedOn===null&&Kc.shift();if(g=(c.ownerDocument||c).$$reactFormReplay,g!=null)for(_=0;_<g.length;_+=3){var N=g[_],L=g[_+1],oe=N[Re]||null;if(typeof L=="function")oe||OI(g);else if(oe){var _e=null;if(L&&L.hasAttribute("formAction")){if(N=L,oe=L[Re]||null)_e=oe.formAction;else if(gS(N)!==null)continue}else _e=oe.action;typeof _e=="function"?g[_+1]=_e:(g.splice(_,3),_-=3),OI(g)}}}function bS(c){this._internalRoot=c}bb.prototype.render=bS.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var g=f.current,_=Xi();kI(g,_,c,f,null,null)},bb.prototype.unmount=bS.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;kI(c.current,2,null,c,null,null),Qy(),f[He]=null}};function bb(c){this._internalRoot=c}bb.prototype.unstable_scheduleHydration=function(c){if(c){var f=V();c={blockedOn:null,target:c,priority:f};for(var g=0;g<Kc.length&&f!==0&&f<Kc[g].priority;g++);Kc.splice(g,0,c),g===0&&II(c)}};var DI=t.version;if(DI!=="19.1.0")throw Error(r(527,DI,"19.1.0"));ne.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var GU={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vb.isDisabled&&vb.supportsFiber)try{St=vb.inject(GU),Ft=vb}catch{}}return Fm.createRoot=function(c,f){if(!a(c))throw Error(r(299));var g=!1,_="",N=YN,L=XN,oe=JN,_e=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(_=f.identifierPrefix),f.onUncaughtError!==void 0&&(N=f.onUncaughtError),f.onCaughtError!==void 0&&(L=f.onCaughtError),f.onRecoverableError!==void 0&&(oe=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(_e=f.unstable_transitionCallbacks)),f=EI(c,1,!1,null,null,g,_,N,L,oe,_e,null),c[He]=f.current,eS(c),new bS(f)},Fm.hydrateRoot=function(c,f,g){if(!a(c))throw Error(r(299));var _=!1,N="",L=YN,oe=XN,_e=JN,ze=null,dt=null;return g!=null&&(g.unstable_strictMode===!0&&(_=!0),g.identifierPrefix!==void 0&&(N=g.identifierPrefix),g.onUncaughtError!==void 0&&(L=g.onUncaughtError),g.onCaughtError!==void 0&&(oe=g.onCaughtError),g.onRecoverableError!==void 0&&(_e=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(ze=g.unstable_transitionCallbacks),g.formState!==void 0&&(dt=g.formState)),f=EI(c,1,!0,f,g??null,_,N,L,oe,_e,ze,dt),f.context=CI(null),g=f.current,_=Xi(),_=Ot(_),N=Rc(_),N.callback=null,Ic(g,N,_),g=_,f.current.lanes=g,nt(f,g),Ro(f),c[He]=f.current,eS(c),new bb(f)},Fm.version="19.1.0",Fm}var qI;function lH(){if(qI)return xS.exports;qI=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xS.exports=oH(),xS.exports}var cH=lH();const uH=ui(cH);function VI(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Zl(...e){return t=>{let n=!1;const r=e.map(a=>{const i=VI(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():VI(e[a],null)}}}}function Cn(...e){return T.useCallback(Zl(...e),e)}function lu(e){const t=dH(e),n=T.forwardRef((r,a)=>{const{children:i,...s}=r,o=T.Children.toArray(i),l=o.find(hH);if(l){const u=l.props.children,d=o.map(h=>h===l?T.Children.count(u)>1?T.Children.only(null):T.isValidElement(u)?u.props.children:null:h);return p.jsx(t,{...s,ref:a,children:T.isValidElement(u)?T.cloneElement(u,void 0,d):null})}return p.jsx(t,{...s,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var $6=lu("Slot");function dH(e){const t=T.forwardRef((n,r)=>{const{children:a,...i}=n;if(T.isValidElement(a)){const s=mH(a),o=pH(i,a.props);return a.type!==T.Fragment&&(o.ref=r?Zl(r,s):s),T.cloneElement(a,o)}return T.Children.count(a)>1?T.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var B6=Symbol("radix.slottable");function fH(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=B6,t}function hH(e){return T.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===B6}function pH(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{i(...o),a(...o)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function mH(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function z6(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=z6(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function U6(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=z6(e))&&(r&&(r+=" "),r+=t);return r}const GI=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,KI=U6,mk=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return KI(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=GI(d)||GI(h);return a[u][m]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...y}=d;return Object.entries(y).every(v=>{let[b,x]=v;return Array.isArray(x)?x.includes({...i,...o}[b]):{...i,...o}[b]===x})?[...u,h,m]:u},[]);return KI(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},gk="-",gH=e=>{const t=bH(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const o=s.split(gk);return o[0]===""&&o.length!==1&&o.shift(),H6(o,t)||yH(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},H6=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?H6(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(gk);return(s=t.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},WI=/^\[(.+)\]$/,yH=e=>{if(WI.test(e)){const t=WI.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},bH=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)H2(n[a],r,a,t);return r},H2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:ZI(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(vH(a)){H2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,s])=>{H2(s,ZI(t,i),n,r)})})},ZI=(e,t)=>{let n=e;return t.split(gk).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},vH=e=>e.isThemeGetter,wH=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return a(i,s),s},set(i,s){n.has(i)?n.set(i,s):a(i,s)}}},q2="!",V2=":",xH=V2.length,_H=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let s=0,o=0,l=0,u;for(let v=0;v<a.length;v++){let b=a[v];if(s===0&&o===0){if(b===V2){i.push(a.slice(l,v)),l=v+xH;continue}if(b==="/"){u=v;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const d=i.length===0?a:a.substring(l),h=SH(d),m=h!==d,y=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:y}};if(t){const a=t+V2,i=r;r=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},SH=e=>e.endsWith(q2)?e.substring(0,e.length-1):e.startsWith(q2)?e.substring(1):e,EH=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},CH=e=>({cache:wH(e.cacheSize),parseClassName:_H(e),sortModifiers:EH(e),...gH(e)}),kH=/\s+/,TH=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,s=[],o=e.trim().split(kH);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:h,modifiers:m,hasImportantModifier:y,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let x=!!b,w=r(x?v.substring(0,b):v);if(!w){if(!x){l=d+(l.length>0?" "+l:l);continue}if(w=r(v),!w){l=d+(l.length>0?" "+l:l);continue}x=!1}const S=i(m).join(":"),E=y?S+q2:S,C=E+w;if(s.includes(C))continue;s.push(C);const k=a(w,x);for(let I=0;I<k.length;++I){const R=k[I];s.push(E+R)}l=d+(l.length>0?" "+l:l)}return l};function AH(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=q6(t))&&(r&&(r+=" "),r+=n);return r}const q6=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=q6(e[r]))&&(n&&(n+=" "),n+=t);return n};function NH(e,...t){let n,r,a,i=s;function s(l){const u=t.reduce((d,h)=>h(d),e());return n=CH(u),r=n.cache.get,a=n.cache.set,i=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=TH(l,n);return a(l,d),d}return function(){return i(AH.apply(null,arguments))}}const wa=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},V6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,G6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,RH=/^\d+\/\d+$/,IH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,OH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,MH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,nh=e=>RH.test(e),Un=e=>!!e&&!Number.isNaN(Number(e)),Zc=e=>!!e&&Number.isInteger(Number(e)),CS=e=>e.endsWith("%")&&Un(e.slice(0,-1)),Ml=e=>IH.test(e),PH=()=>!0,FH=e=>jH.test(e)&&!OH.test(e),K6=()=>!1,LH=e=>DH.test(e),$H=e=>MH.test(e),BH=e=>!on(e)&&!ln(e),zH=e=>np(e,Y6,K6),on=e=>V6.test(e),fd=e=>np(e,X6,FH),kS=e=>np(e,GH,Un),YI=e=>np(e,W6,K6),UH=e=>np(e,Z6,$H),wb=e=>np(e,J6,LH),ln=e=>G6.test(e),Lm=e=>rp(e,X6),HH=e=>rp(e,KH),XI=e=>rp(e,W6),qH=e=>rp(e,Y6),VH=e=>rp(e,Z6),xb=e=>rp(e,J6,!0),np=(e,t,n)=>{const r=V6.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},rp=(e,t,n=!1)=>{const r=G6.exec(e);return r?r[1]?t(r[1]):n:!1},W6=e=>e==="position"||e==="percentage",Z6=e=>e==="image"||e==="url",Y6=e=>e==="length"||e==="size"||e==="bg-size",X6=e=>e==="length",GH=e=>e==="number",KH=e=>e==="family-name",J6=e=>e==="shadow",WH=()=>{const e=wa("color"),t=wa("font"),n=wa("text"),r=wa("font-weight"),a=wa("tracking"),i=wa("leading"),s=wa("breakpoint"),o=wa("container"),l=wa("spacing"),u=wa("radius"),d=wa("shadow"),h=wa("inset-shadow"),m=wa("text-shadow"),y=wa("drop-shadow"),v=wa("blur"),b=wa("perspective"),x=wa("aspect"),w=wa("ease"),S=wa("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),ln,on],I=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],j=()=>[ln,on,l],F=()=>[nh,"full","auto",...j()],$=()=>[Zc,"none","subgrid",ln,on],G=()=>["auto",{span:["full",Zc,ln,on]},Zc,ln,on],D=()=>[Zc,"auto",ln,on],Z=()=>["auto","min","max","fr",ln,on],q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ue=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...j()],ne=()=>[nh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...j()],X=()=>[e,ln,on],ae=()=>[...C(),XI,YI,{position:[ln,on]}],B=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",qH,zH,{size:[ln,on]}],ee=()=>[CS,Lm,fd],te=()=>["","none","full",u,ln,on],fe=()=>["",Un,Lm,fd],ve=()=>["solid","dashed","dotted","double"],De=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>[Un,CS,XI,YI],Ne=()=>["","none",v,ln,on],Ce=()=>["none",Un,ln,on],Pe=()=>["none",Un,ln,on],Qe=()=>[Un,ln,on],Le=()=>[nh,"full",...j()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ml],breakpoint:[Ml],color:[PH],container:[Ml],"drop-shadow":[Ml],ease:["in","out","in-out"],font:[BH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ml],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ml],shadow:[Ml],spacing:["px",Un],text:[Ml],"text-shadow":[Ml],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",nh,on,ln,x]}],container:["container"],columns:[{columns:[Un,on,ln,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:F()}],"inset-x":[{"inset-x":F()}],"inset-y":[{"inset-y":F()}],start:[{start:F()}],end:[{end:F()}],top:[{top:F()}],right:[{right:F()}],bottom:[{bottom:F()}],left:[{left:F()}],visibility:["visible","invisible","collapse"],z:[{z:[Zc,"auto",ln,on]}],basis:[{basis:[nh,"full","auto",o,...j()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Un,nh,"auto","initial","none",on]}],grow:[{grow:["",Un,ln,on]}],shrink:[{shrink:["",Un,ln,on]}],order:[{order:[Zc,"first","last","none",ln,on]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:j()}],"gap-x":[{"gap-x":j()}],"gap-y":[{"gap-y":j()}],"justify-content":[{justify:[...q(),"normal"]}],"justify-items":[{"justify-items":[...ue(),"normal"]}],"justify-self":[{"justify-self":["auto",...ue()]}],"align-content":[{content:["normal",...q()]}],"align-items":[{items:[...ue(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ue(),{baseline:["","last"]}]}],"place-content":[{"place-content":q()}],"place-items":[{"place-items":[...ue(),"baseline"]}],"place-self":[{"place-self":["auto",...ue()]}],p:[{p:j()}],px:[{px:j()}],py:[{py:j()}],ps:[{ps:j()}],pe:[{pe:j()}],pt:[{pt:j()}],pr:[{pr:j()}],pb:[{pb:j()}],pl:[{pl:j()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":j()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":j()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[o,"screen",...ne()]}],"min-w":[{"min-w":[o,"screen","none",...ne()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...ne()]}],h:[{h:["screen",...ne()]}],"min-h":[{"min-h":["screen","none",...ne()]}],"max-h":[{"max-h":["screen",...ne()]}],"font-size":[{text:["base",n,Lm,fd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ln,kS]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",CS,on]}],"font-family":[{font:[HH,on,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ln,on]}],"line-clamp":[{"line-clamp":[Un,"none",ln,kS]}],leading:[{leading:[i,...j()]}],"list-image":[{"list-image":["none",ln,on]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ln,on]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:X()}],"text-color":[{text:X()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[Un,"from-font","auto",ln,fd]}],"text-decoration-color":[{decoration:X()}],"underline-offset":[{"underline-offset":[Un,"auto",ln,on]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ln,on]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ln,on]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:B()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Zc,ln,on],radial:["",ln,on],conic:[Zc,ln,on]},VH,UH]}],"bg-color":[{bg:X()}],"gradient-from-pos":[{from:ee()}],"gradient-via-pos":[{via:ee()}],"gradient-to-pos":[{to:ee()}],"gradient-from":[{from:X()}],"gradient-via":[{via:X()}],"gradient-to":[{to:X()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:X()}],"border-color-x":[{"border-x":X()}],"border-color-y":[{"border-y":X()}],"border-color-s":[{"border-s":X()}],"border-color-e":[{"border-e":X()}],"border-color-t":[{"border-t":X()}],"border-color-r":[{"border-r":X()}],"border-color-b":[{"border-b":X()}],"border-color-l":[{"border-l":X()}],"divide-color":[{divide:X()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Un,ln,on]}],"outline-w":[{outline:["",Un,Lm,fd]}],"outline-color":[{outline:X()}],shadow:[{shadow:["","none",d,xb,wb]}],"shadow-color":[{shadow:X()}],"inset-shadow":[{"inset-shadow":["none",h,xb,wb]}],"inset-shadow-color":[{"inset-shadow":X()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:X()}],"ring-offset-w":[{"ring-offset":[Un,fd]}],"ring-offset-color":[{"ring-offset":X()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":X()}],"text-shadow":[{"text-shadow":["none",m,xb,wb]}],"text-shadow-color":[{"text-shadow":X()}],opacity:[{opacity:[Un,ln,on]}],"mix-blend":[{"mix-blend":[...De(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":De()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Un]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ae()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ae()}],"mask-image-linear-from-color":[{"mask-linear-from":X()}],"mask-image-linear-to-color":[{"mask-linear-to":X()}],"mask-image-t-from-pos":[{"mask-t-from":Ae()}],"mask-image-t-to-pos":[{"mask-t-to":Ae()}],"mask-image-t-from-color":[{"mask-t-from":X()}],"mask-image-t-to-color":[{"mask-t-to":X()}],"mask-image-r-from-pos":[{"mask-r-from":Ae()}],"mask-image-r-to-pos":[{"mask-r-to":Ae()}],"mask-image-r-from-color":[{"mask-r-from":X()}],"mask-image-r-to-color":[{"mask-r-to":X()}],"mask-image-b-from-pos":[{"mask-b-from":Ae()}],"mask-image-b-to-pos":[{"mask-b-to":Ae()}],"mask-image-b-from-color":[{"mask-b-from":X()}],"mask-image-b-to-color":[{"mask-b-to":X()}],"mask-image-l-from-pos":[{"mask-l-from":Ae()}],"mask-image-l-to-pos":[{"mask-l-to":Ae()}],"mask-image-l-from-color":[{"mask-l-from":X()}],"mask-image-l-to-color":[{"mask-l-to":X()}],"mask-image-x-from-pos":[{"mask-x-from":Ae()}],"mask-image-x-to-pos":[{"mask-x-to":Ae()}],"mask-image-x-from-color":[{"mask-x-from":X()}],"mask-image-x-to-color":[{"mask-x-to":X()}],"mask-image-y-from-pos":[{"mask-y-from":Ae()}],"mask-image-y-to-pos":[{"mask-y-to":Ae()}],"mask-image-y-from-color":[{"mask-y-from":X()}],"mask-image-y-to-color":[{"mask-y-to":X()}],"mask-image-radial":[{"mask-radial":[ln,on]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ae()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ae()}],"mask-image-radial-from-color":[{"mask-radial-from":X()}],"mask-image-radial-to-color":[{"mask-radial-to":X()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Un]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ae()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ae()}],"mask-image-conic-from-color":[{"mask-conic-from":X()}],"mask-image-conic-to-color":[{"mask-conic-to":X()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:B()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ln,on]}],filter:[{filter:["","none",ln,on]}],blur:[{blur:Ne()}],brightness:[{brightness:[Un,ln,on]}],contrast:[{contrast:[Un,ln,on]}],"drop-shadow":[{"drop-shadow":["","none",y,xb,wb]}],"drop-shadow-color":[{"drop-shadow":X()}],grayscale:[{grayscale:["",Un,ln,on]}],"hue-rotate":[{"hue-rotate":[Un,ln,on]}],invert:[{invert:["",Un,ln,on]}],saturate:[{saturate:[Un,ln,on]}],sepia:[{sepia:["",Un,ln,on]}],"backdrop-filter":[{"backdrop-filter":["","none",ln,on]}],"backdrop-blur":[{"backdrop-blur":Ne()}],"backdrop-brightness":[{"backdrop-brightness":[Un,ln,on]}],"backdrop-contrast":[{"backdrop-contrast":[Un,ln,on]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Un,ln,on]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Un,ln,on]}],"backdrop-invert":[{"backdrop-invert":["",Un,ln,on]}],"backdrop-opacity":[{"backdrop-opacity":[Un,ln,on]}],"backdrop-saturate":[{"backdrop-saturate":[Un,ln,on]}],"backdrop-sepia":[{"backdrop-sepia":["",Un,ln,on]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":j()}],"border-spacing-x":[{"border-spacing-x":j()}],"border-spacing-y":[{"border-spacing-y":j()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ln,on]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Un,"initial",ln,on]}],ease:[{ease:["linear","initial",w,ln,on]}],delay:[{delay:[Un,ln,on]}],animate:[{animate:["none",S,ln,on]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,ln,on]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:Pe()}],"scale-x":[{"scale-x":Pe()}],"scale-y":[{"scale-y":Pe()}],"scale-z":[{"scale-z":Pe()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[ln,on,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:X()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:X()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ln,on]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ln,on]}],fill:[{fill:["none",...X()]}],"stroke-w":[{stroke:[Un,Lm,fd,kS]}],stroke:[{stroke:["none",...X()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ZH=NH(WH);function _t(...e){return ZH(U6(e))}const YH=mk("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function jt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?$6:"button";return p.jsx(i,{"data-slot":"button",className:_t(YH({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JH=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),JI=e=>{const t=JH(e);return t.charAt(0).toUpperCase()+t.slice(1)},Q6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>T.createElement("svg",{ref:l,...QH,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Q6("lucide",a),...o},[...s.map(([u,d])=>T.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=(e,t)=>{const n=T.forwardRef(({className:r,...a},i)=>T.createElement(eq,{ref:i,iconNode:t,className:Q6(`lucide-${XH(JI(e))}`,`lucide-${e}`,r),...a}));return n.displayName=JI(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],nq=en("archive",tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rq=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],aq=en("arrow-down",rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iq=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],sq=en("bot",iq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],yk=en("brain-circuit",oq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ls=en("check",lq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],il=en("chevron-down",cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uq=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],eD=en("chevron-right",uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dq=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Gd=en("chevron-up",dq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],Yw=en("chevrons-up-down",fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Nh=en("circle-alert",hq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bk=en("circle-check",pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tD=en("circle",mq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gq=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],vk=en("clipboard",gq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],bq=en("clock",yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],nD=en("cloud-upload",vq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],rD=en("code",wq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],_q=en("cog",xq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Eq=en("coins",Sq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],QI=en("copy",Cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Rd=en("download",kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Aq=en("ellipsis-vertical",Tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],Rq=en("file-archive",Nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],jq=en("file-down",Iq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],Dq=en("file-json",Oq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],Pq=en("file-question",Mq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Lq=en("file-text",Fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],Bq=en("file-up",$q);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zq=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],aD=en("file",zq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],iD=en("folder-git",Uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hq=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],wk=en("folder-plus",Hq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],e3=en("folder-tree",qq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],Gq=en("folder-up",Vq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Od=en("folder",Kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wq=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],cu=en("git-branch",Wq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],sD=en("git-commit-horizontal",Zq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],oD=en("git-merge",Yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],xk=en("git-pull-request",Xq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Qq=en("grip-vertical",Jq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eV=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],lD=en("hard-drive",eV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tV=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],nV=en("house",tV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],cD=en("image",rV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aV=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],uD=en("info",aV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iV=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],G2=en("key",iV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sV=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],On=en("loader-circle",sV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oV=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],lV=en("menu",oV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cV=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],dD=en("message-square-plus",cV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uV=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],K2=en("message-square",uV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dV=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],fV=en("music",dV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],pV=en("panel-left-close",hV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],gV=en("panel-right-close",mV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yV=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],_k=en("paperclip",yV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bV=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],m0=en("pen",bV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vV=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Kd=en("plus",vV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wV=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],t3=en("puzzle",wV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xV=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xw=en("refresh-cw",xV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _V=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Sk=en("rotate-ccw",_V);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SV=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Wd=en("save",SV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EV=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Yl=en("search",EV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CV=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],kV=en("send-horizontal",CV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TV=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],n3=en("server",TV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AV=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Dv=en("settings",AV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NV=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],RV=en("sliders-horizontal",NV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IV=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],jV=en("sparkles",IV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OV=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ng=en("square-pen",OV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DV=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],MV=en("square",DV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PV=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],W2=en("tags",PV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FV=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],LV=en("text",FV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $V=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Li=en("trash-2",$V);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BV=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Jw=en("triangle-alert",BV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zV=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],UV=en("upload",zV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HV=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qV=en("user",HV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],r3=en("users",VV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GV=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],KV=en("video",GV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],fD=en("wrench",WV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xi=en("x",ZV);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],XV=en("zap",YV),a3=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:p.jsx("div",{className:_t(n),children:r.map(a=>{var s,o;const i=t==="trigger"?(s=a.triggerRenderer)==null?void 0:s.call(a):(o=a.renderer)==null?void 0:o.call(a);return i?p.jsx(gt.Fragment,{children:i},a.id):null})})},i3=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(y=>y(t,m))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,a,o);return o},JV=e=>e?i3(e):i3,QV=e=>e;function eG(e,t=QV){const n=gt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return gt.useDebugValue(n),n}const s3=e=>{const t=JV(e),n=r=>eG(t,r);return Object.assign(n,t),n},Ds=e=>e?s3(e):s3;var hD=Symbol.for("immer-nothing"),o3=Symbol.for("immer-draftable"),hr=Symbol.for("immer-state");function As(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Rh=Object.getPrototypeOf;function Ih(e){return!!e&&!!e[hr]}function Xl(e){var t;return e?pD(e)||Array.isArray(e)||!!e[o3]||!!((t=e.constructor)!=null&&t[o3])||ex(e)||tx(e):!1}var tG=Object.prototype.constructor.toString();function pD(e){if(!e||typeof e!="object")return!1;const t=Rh(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===tG}function lg(e,t){Qw(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Qw(e){const t=e[hr];return t?t.type_:Array.isArray(e)?1:ex(e)?2:tx(e)?3:0}function Z2(e,t){return Qw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mD(e,t,n){const r=Qw(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function nG(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ex(e){return e instanceof Map}function tx(e){return e instanceof Set}function Pa(e){return e.copy_||e.base_}function Y2(e,t){if(ex(e))return new Map(e);if(tx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=pD(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[hr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(Rh(e),r)}else{const r=Rh(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function Ek(e,t=!1){return nx(e)||Ih(e)||!Xl(e)||(Qw(e)>1&&(e.set=e.add=e.clear=e.delete=rG),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Ek(r,!0))),e}function rG(){As(2)}function nx(e){return Object.isFrozen(e)}var X2={};function Dd(e){const t=X2[e];return t||As(0,e),t}function aG(e,t){X2[e]||(X2[e]=t)}var cg;function Mv(){return cg}function iG(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function l3(e,t){t&&(Dd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function J2(e){Q2(e),e.drafts_.forEach(sG),e.drafts_=null}function Q2(e){e===cg&&(cg=e.parent_)}function c3(e){return cg=iG(cg,e)}function sG(e){const t=e[hr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function u3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[hr].modified_&&(J2(t),As(4)),Xl(e)&&(e=Pv(t,e),t.parent_||Fv(t,e)),t.patches_&&Dd("Patches").generateReplacementPatches_(n[hr].base_,e,t.patches_,t.inversePatches_)):e=Pv(t,n,[]),J2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==hD?e:void 0}function Pv(e,t,n){if(nx(t))return t;const r=t[hr];if(!r)return lg(t,(a,i)=>d3(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Fv(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,s=!1;r.type_===3&&(i=new Set(a),a.clear(),s=!0),lg(i,(o,l)=>d3(e,r,a,o,l,n,s)),Fv(e,a,!1),n&&e.patches_&&Dd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function d3(e,t,n,r,a,i,s){if(Ih(a)){const o=i&&t&&t.type_!==3&&!Z2(t.assigned_,r)?i.concat(r):void 0,l=Pv(e,a,o);if(mD(n,r,l),Ih(l))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(Xl(a)&&!nx(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Pv(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Fv(e,a)}}function Fv(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ek(t,n)}function oG(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Mv(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=Ck;n&&(a=[r],i=ug);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}var Ck={get(e,t){if(t===hr)return e;const n=Pa(e);if(!Z2(n,t))return lG(e,n,t);const r=n[t];return e.finalized_||!Xl(r)?r:r===TS(e.base_,t)?(AS(e),e.copy_[t]=dg(r,e)):r},has(e,t){return t in Pa(e)},ownKeys(e){return Reflect.ownKeys(Pa(e))},set(e,t,n){const r=gD(Pa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=TS(Pa(e),t),i=a==null?void 0:a[hr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(nG(n,a)&&(n!==void 0||Z2(e.base_,t)))return!0;AS(e),Ll(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return TS(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,AS(e),Ll(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Pa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){As(11)},getPrototypeOf(e){return Rh(e.base_)},setPrototypeOf(){As(12)}},ug={};lg(Ck,(e,t)=>{ug[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ug.deleteProperty=function(e,t){return ug.set.call(this,e,t,void 0)};ug.set=function(e,t,n){return Ck.set.call(this,e[0],t,n,e[0])};function TS(e,t){const n=e[hr];return(n?Pa(n):e)[t]}function lG(e,t,n){var a;const r=gD(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function gD(e,t){if(!(t in e))return;let n=Rh(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Rh(n)}}function Ll(e){e.modified_||(e.modified_=!0,e.parent_&&Ll(e.parent_))}function AS(e){e.copy_||(e.copy_=Y2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var cG=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...u){return s.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&As(6),r!==void 0&&typeof r!="function"&&As(7);let a;if(Xl(t)){const i=c3(this),s=dg(t,void 0);let o=!0;try{a=n(s),o=!1}finally{o?J2(i):Q2(i)}return l3(i,r),u3(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===hD&&(a=void 0),this.autoFreeze_&&Ek(a,!0),r){const i=[],s=[];Dd("Patches").generateReplacementPatches_(t,a,i,s),r(i,s)}return a}else As(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let r,a;return[this.produce(t,n,(s,o)=>{r=s,a=o}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Xl(e)||As(8),Ih(e)&&(e=uG(e));const t=c3(this),n=dg(e,void 0);return n[hr].isManual_=!0,Q2(t),n}finishDraft(e,t){const n=e&&e[hr];(!n||!n.isManual_)&&As(9);const{scope_:r}=n;return l3(r,t),u3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=Dd("Patches").applyPatches_;return Ih(e)?r(e,t):this.produce(e,a=>r(a,t))}};function dg(e,t){const n=ex(e)?Dd("MapSet").proxyMap_(e,t):tx(e)?Dd("MapSet").proxySet_(e,t):oG(e,t);return(t?t.scope_:Mv()).drafts_.push(n),n}function uG(e){return Ih(e)||As(10,e),yD(e)}function yD(e){if(!Xl(e)||nx(e))return e;const t=e[hr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Y2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Y2(e,!0);return lg(n,(r,a)=>{mD(n,r,yD(a))}),t&&(t.finalized_=!1),n}function dG(){class e extends Map{constructor(l,u){super(),this[hr]={type_:2,parent_:u,scope_:u?u.scope_:Mv(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Pa(this[hr]).size}has(l){return Pa(this[hr]).has(l)}set(l,u){const d=this[hr];return s(d),(!Pa(d).has(l)||Pa(d).get(l)!==u)&&(n(d),Ll(d),d.assigned_.set(l,!0),d.copy_.set(l,u),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const u=this[hr];return s(u),n(u),Ll(u),u.base_.has(l)?u.assigned_.set(l,!1):u.assigned_.delete(l),u.copy_.delete(l),!0}clear(){const l=this[hr];s(l),Pa(l).size&&(n(l),Ll(l),l.assigned_=new Map,lg(l.base_,u=>{l.assigned_.set(u,!1)}),l.copy_.clear())}forEach(l,u){const d=this[hr];Pa(d).forEach((h,m,y)=>{l.call(u,this.get(m),m,this)})}get(l){const u=this[hr];s(u);const d=Pa(u).get(l);if(u.finalized_||!Xl(d)||d!==u.base_.get(l))return d;const h=dg(d,u);return n(u),u.copy_.set(l,h),h}keys(){return Pa(this[hr]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=l.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=l.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,u){super(),this[hr]={type_:3,parent_:u,scope_:u?u.scope_:Mv(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Pa(this[hr]).size}has(l){const u=this[hr];return s(u),u.copy_?!!(u.copy_.has(l)||u.drafts_.has(l)&&u.copy_.has(u.drafts_.get(l))):u.base_.has(l)}add(l){const u=this[hr];return s(u),this.has(l)||(i(u),Ll(u),u.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const u=this[hr];return s(u),i(u),Ll(u),u.copy_.delete(l)||(u.drafts_.has(l)?u.copy_.delete(u.drafts_.get(l)):!1)}clear(){const l=this[hr];s(l),Pa(l).size&&(i(l),Ll(l),l.copy_.clear())}values(){const l=this[hr];return s(l),i(l),l.copy_.values()}entries(){const l=this[hr];return s(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,u){const d=this.values();let h=d.next();for(;!h.done;)l.call(u,h.value,h.value,this),h=d.next()}}function a(o,l){return new r(o,l)}function i(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(Xl(l)){const u=dg(l,o);o.drafts_.set(l,u),o.copy_.add(u)}else o.copy_.add(l)}))}function s(o){o.revoked_&&As(3,JSON.stringify(Pa(o)))}aG("MapSet",{proxyMap_:t,proxySet_:a})}var cs=new cG,fG=cs.produce;cs.produceWithPatches.bind(cs);cs.setAutoFreeze.bind(cs);cs.setUseStrictShallowCopy.bind(cs);cs.applyPatches.bind(cs);cs.createDraft.bind(cs);cs.finishDraft.bind(cs);const hG=e=>(t,n,r)=>(r.setState=(a,i,...s)=>{const o=typeof a=="function"?fG(a):a;return t(o,i,...s)},e(r.setState,n,r)),Ms=hG,Rr=Ds(Ms((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const s={modId:r,callback:a,order:i};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(s),o.middlewareRegistry[n].sort((l,u)=>(l.order??0)-(u.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var s;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===a)),((s=i.middlewareRegistry[n])==null?void 0:s.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(s=>{s.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${s.tools[r].modId}". Overwriting with registration from mod "${n}".`),s.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var _v={exports:{}},pG=_v.exports,f3;function mG(){return f3||(f3=1,function(e,t){(function(n,r){e.exports=r()})(pG,function(){var n=function(A,M){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,re){Y.__proto__=re}||function(Y,re){for(var ce in re)Object.prototype.hasOwnProperty.call(re,ce)&&(Y[ce]=re[ce])})(A,M)},r=function(){return(r=Object.assign||function(A){for(var M,Y=1,re=arguments.length;Y<re;Y++)for(var ce in M=arguments[Y])Object.prototype.hasOwnProperty.call(M,ce)&&(A[ce]=M[ce]);return A}).apply(this,arguments)};function a(A,M,Y){for(var re,ce=0,we=M.length;ce<we;ce++)!re&&ce in M||((re=re||Array.prototype.slice.call(M,0,ce))[ce]=M[ce]);return A.concat(re||Array.prototype.slice.call(M))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ed,s=Object.keys,o=Array.isArray;function l(A,M){return typeof M!="object"||s(M).forEach(function(Y){A[Y]=M[Y]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,M){return d.call(A,M)}function m(A,M){typeof M=="function"&&(M=M(u(A))),(typeof Reflect>"u"?s:Reflect.ownKeys)(M).forEach(function(Y){v(A,Y,M[Y])})}var y=Object.defineProperty;function v(A,M,Y,re){y(A,M,l(Y&&h(Y,"get")&&typeof Y.get=="function"?{get:Y.get,set:Y.set,configurable:!0}:{value:Y,configurable:!0,writable:!0},re))}function b(A){return{from:function(M){return A.prototype=Object.create(M.prototype),v(A.prototype,"constructor",A),{extend:m.bind(null,A.prototype)}}}}var x=Object.getOwnPropertyDescriptor,w=[].slice;function S(A,M,Y){return w.call(A,M,Y)}function E(A,M){return M(A)}function C(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function I(A,M){if(typeof M=="string"&&h(A,M))return A[M];if(!M)return A;if(typeof M!="string"){for(var Y=[],re=0,ce=M.length;re<ce;++re){var we=I(A,M[re]);Y.push(we)}return Y}var Me=M.indexOf(".");if(Me!==-1){var $e=A[M.substr(0,Me)];return $e==null?void 0:I($e,M.substr(Me+1))}}function R(A,M,Y){if(A&&M!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof M!="string"&&"length"in M){C(typeof Y!="string"&&"length"in Y);for(var re=0,ce=M.length;re<ce;++re)R(A,M[re],Y[re])}else{var we,Me,$e=M.indexOf(".");$e!==-1?(we=M.substr(0,$e),(Me=M.substr($e+1))===""?Y===void 0?o(A)&&!isNaN(parseInt(we))?A.splice(we,1):delete A[we]:A[we]=Y:R($e=!($e=A[we])||!h(A,we)?A[we]={}:$e,Me,Y)):Y===void 0?o(A)&&!isNaN(parseInt(M))?A.splice(M,1):delete A[M]:A[M]=Y}}function j(A){var M,Y={};for(M in A)h(A,M)&&(Y[M]=A[M]);return Y}var F=[].concat;function $(A){return F.apply([],A)}var St="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat($([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(M){return M+A+"Array"})}))).filter(function(A){return i[A]}),G=new Set(St.map(function(A){return i[A]})),D=null;function Z(A){return D=new WeakMap,A=function M(Y){if(!Y||typeof Y!="object")return Y;var re=D.get(Y);if(re)return re;if(o(Y)){re=[],D.set(Y,re);for(var ce=0,we=Y.length;ce<we;++ce)re.push(M(Y[ce]))}else if(G.has(Y.constructor))re=Y;else{var Me,$e=u(Y);for(Me in re=$e===Object.prototype?{}:Object.create($e),D.set(Y,re),Y)h(Y,Me)&&(re[Me]=M(Y[Me]))}return re}(A),D=null,A}var q={}.toString;function ue(A){return q.call(A).slice(8,-1)}var ie=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof ie=="symbol"?function(A){var M;return A!=null&&(M=A[ie])&&M.apply(A)}:function(){return null};function X(A,M){return M=A.indexOf(M),0<=M&&A.splice(M,1),0<=M}var ae={};function B(A){var M,Y,re,ce;if(arguments.length===1){if(o(A))return A.slice();if(this===ae&&typeof A=="string")return[A];if(ce=ne(A)){for(Y=[];!(re=ce.next()).done;)Y.push(re.value);return Y}if(A==null)return[A];if(typeof(M=A.length)!="number")return[A];for(Y=new Array(M);M--;)Y[M]=A[M];return Y}for(M=arguments.length,Y=new Array(M);M--;)Y[M]=arguments[M];return Y}var J=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},it=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],gi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(it),ee={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function te(A,M){this.name=A,this.message=M}function fe(A,M){return A+". Errors: "+Object.keys(M).map(function(Y){return M[Y].toString()}).filter(function(Y,re,ce){return ce.indexOf(Y)===re}).join(`
`)}function ve(A,M,Y,re){this.failures=M,this.failedKeys=re,this.successCount=Y,this.message=fe(A,M)}function De(A,M){this.name="BulkError",this.failures=Object.keys(M).map(function(Y){return M[Y]}),this.failuresByPos=M,this.message=fe(A,this.failures)}b(te).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ve).from(te),b(De).from(te);var Ae=gi.reduce(function(A,M){return A[M]=M+"Error",A},{}),Ne=te,Ce=gi.reduce(function(A,M){var Y=M+"Error";function re(ce,we){this.name=Y,ce?typeof ce=="string"?(this.message="".concat(ce).concat(we?`
 `+we:""),this.inner=we||null):typeof ce=="object"&&(this.message="".concat(ce.name," ").concat(ce.message),this.inner=ce):(this.message=ee[M]||Y,this.inner=null)}return b(re).from(Ne),A[M]=re,A},{});Ce.Syntax=SyntaxError,Ce.Type=TypeError,Ce.Range=RangeError;var Pe=it.reduce(function(A,M){return A[M+"Error"]=Ce[M],A},{}),Qe=gi.reduce(function(A,M){return["Syntax","Type","Range"].indexOf(M)===-1&&(A[M+"Error"]=Ce[M]),A},{});function Le(){}function Ie(A){return A}function z(A,M){return A==null||A===Ie?M:function(Y){return M(A(Y))}}function Se(A,M){return function(){A.apply(this,arguments),M.apply(this,arguments)}}function Te(A,M){return A===Le?M:function(){var Y=A.apply(this,arguments);Y!==void 0&&(arguments[0]=Y);var re=this.onsuccess,ce=this.onerror;this.onsuccess=null,this.onerror=null;var we=M.apply(this,arguments);return re&&(this.onsuccess=this.onsuccess?Se(re,this.onsuccess):re),ce&&(this.onerror=this.onerror?Se(ce,this.onerror):ce),we!==void 0?we:Y}}function de(A,M){return A===Le?M:function(){A.apply(this,arguments);var Y=this.onsuccess,re=this.onerror;this.onsuccess=this.onerror=null,M.apply(this,arguments),Y&&(this.onsuccess=this.onsuccess?Se(Y,this.onsuccess):Y),re&&(this.onerror=this.onerror?Se(re,this.onerror):re)}}function se(A,M){return A===Le?M:function(Y){var re=A.apply(this,arguments);l(Y,re);var ce=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,Y=M.apply(this,arguments),ce&&(this.onsuccess=this.onsuccess?Se(ce,this.onsuccess):ce),we&&(this.onerror=this.onerror?Se(we,this.onerror):we),re===void 0?Y===void 0?void 0:Y:l(re,Y)}}function Q(A,M){return A===Le?M:function(){return M.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function xe(A,M){return A===Le?M:function(){var Y=A.apply(this,arguments);if(Y&&typeof Y.then=="function"){for(var re=this,ce=arguments.length,we=new Array(ce);ce--;)we[ce]=arguments[ce];return Y.then(function(){return M.apply(re,we)})}return M.apply(this,arguments)}}Qe.ModifyError=ve,Qe.DexieError=te,Qe.BulkError=De;var Fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ee(A){Fe=A}var Ge={},Nt=100,St=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,u(A),A];var M=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[M,u(M),A]}(),it=St[0],gi=St[1],St=St[2],gi=gi&&gi.then,Ft=it&&it.constructor,Dt=!!St,Zt=function(A,M){le.push([A,M]),O&&(queueMicrotask(me),O=!1)},ye=!0,O=!0,K=[],he=[],je=Ie,be={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},ke=be,le=[],ft=0,vt=[];function P(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var M=this._PSD=ke;if(typeof A!="function"){if(A!==Ge)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++M.ref,function Y(re,ce){try{ce(function(we){if(re._state===null){if(we===re)throw new TypeError("A promise cannot be resolved with itself.");var Me=re._lib&&V();we&&typeof we.then=="function"?Y(re,function($e,We){we instanceof P?we._then($e,We):we.then($e,We)}):(re._state=!0,re._value=we,Oe(re)),Me&&H()}},ge.bind(null,re))}catch(we){ge(re,we)}}(this,A)}var Be={get:function(){var A=ke,M=Rt;function Y(re,ce){var we=this,Me=!A.global&&(A!==ke||M!==Rt),$e=Me&&!Kn(),We=new P(function(Xe,rt){Ke(we,new nt(yo(re,A,Me,$e),yo(ce,A,Me,$e),Xe,rt,A))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return Y.prototype=Ge,Y},set:function(A){v(this,"then",A&&A.prototype===Ge?Be:{get:function(){return A},set:Be.set})}};function nt(A,M,Y,re,ce){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof M=="function"?M:null,this.resolve=Y,this.reject=re,this.psd=ce}function ge(A,M){var Y,re;he.push(M),A._state===null&&(Y=A._lib&&V(),M=je(M),A._state=!1,A._value=M,re=A,K.some(function(ce){return ce._value===re._value})||K.push(re),Oe(A),Y&&H())}function Oe(A){var M=A._listeners;A._listeners=[];for(var Y=0,re=M.length;Y<re;++Y)Ke(A,M[Y]);var ce=A._PSD;--ce.ref||ce.finalize(),ft===0&&(++ft,Zt(function(){--ft==0&&W()},[]))}function Ke(A,M){if(A._state!==null){var Y=A._state?M.onFulfilled:M.onRejected;if(Y===null)return(A._state?M.resolve:M.reject)(A._value);++M.psd.ref,++ft,Zt(Ot,[Y,A,M])}else A._listeners.push(M)}function Ot(A,M,Y){try{var re,ce=M._value;!M._state&&he.length&&(he=[]),re=Fe&&M._consoleTask?M._consoleTask.run(function(){return A(ce)}):A(ce),M._state||he.indexOf(ce)!==-1||function(we){for(var Me=K.length;Me;)if(K[--Me]._value===we._value)return K.splice(Me,1)}(M),Y.resolve(re)}catch(we){Y.reject(we)}finally{--ft==0&&W(),--Y.psd.ref||Y.psd.finalize()}}function me(){go(be,function(){V()&&H()})}function V(){var A=ye;return O=ye=!1,A}function H(){var A,M,Y;do for(;0<le.length;)for(A=le,le=[],Y=A.length,M=0;M<Y;++M){var re=A[M];re[0].apply(null,re[1])}while(0<le.length);O=ye=!0}function W(){var A=K;K=[],A.forEach(function(re){re._PSD.onunhandled.call(null,re._value,re)});for(var M=vt.slice(0),Y=M.length;Y;)M[--Y]()}function pe(A){return new P(Ge,!1,A)}function Re(A,M){var Y=ke;return function(){var re=V(),ce=ke;try{return Fn(Y,!0),A.apply(this,arguments)}catch(we){M&&M(we)}finally{Fn(ce,!1),re&&H()}}}m(P.prototype,{then:Be,_then:function(A,M){Ke(this,new nt(null,null,A,M,ke))},catch:function(A){if(arguments.length===1)return this.then(null,A);var M=A,Y=arguments[1];return typeof M=="function"?this.then(null,function(re){return(re instanceof M?Y:pe)(re)}):this.then(null,function(re){return(re&&re.name===M?Y:pe)(re)})},finally:function(A){return this.then(function(M){return P.resolve(A()).then(function(){return M})},function(M){return P.resolve(A()).then(function(){return pe(M)})})},timeout:function(A,M){var Y=this;return A<1/0?new P(function(re,ce){var we=setTimeout(function(){return ce(new Ce.Timeout(M))},A);Y.then(re,ce).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(P.prototype,Symbol.toStringTag,"Dexie.Promise"),be.env=hi(),m(P,{all:function(){var A=B.apply(null,arguments).map(xr);return new P(function(M,Y){A.length===0&&M([]);var re=A.length;A.forEach(function(ce,we){return P.resolve(ce).then(function(Me){A[we]=Me,--re||M(A)},Y)})})},resolve:function(A){return A instanceof P?A:A&&typeof A.then=="function"?new P(function(M,Y){A.then(M,Y)}):new P(Ge,!0,A)},reject:pe,race:function(){var A=B.apply(null,arguments).map(xr);return new P(function(M,Y){A.map(function(re){return P.resolve(re).then(M,Y)})})},PSD:{get:function(){return ke},set:function(A){return ke=A}},totalEchoes:{get:function(){return Rt}},newPSD:Qt,usePSD:go,scheduler:{get:function(){return Zt},set:function(A){Zt=A}},rejectionMapper:{get:function(){return je},set:function(A){je=A}},follow:function(A,M){return new P(function(Y,re){return Qt(function(ce,we){var Me=ke;Me.unhandleds=[],Me.onunhandled=we,Me.finalize=Se(function(){var $e,We=this;$e=function(){We.unhandleds.length===0?ce():we(We.unhandleds[0])},vt.push(function Xe(){$e(),vt.splice(vt.indexOf(Xe),1)}),++ft,Zt(function(){--ft==0&&W()},[])},Me.finalize),A()},M,Y,re)})}}),Ft&&(Ft.allSettled&&v(P,"allSettled",function(){var A=B.apply(null,arguments).map(xr);return new P(function(M){A.length===0&&M([]);var Y=A.length,re=new Array(Y);A.forEach(function(ce,we){return P.resolve(ce).then(function(Me){return re[we]={status:"fulfilled",value:Me}},function(Me){return re[we]={status:"rejected",reason:Me}}).then(function(){return--Y||M(re)})})})}),Ft.any&&typeof AggregateError<"u"&&v(P,"any",function(){var A=B.apply(null,arguments).map(xr);return new P(function(M,Y){A.length===0&&Y(new AggregateError([]));var re=A.length,ce=new Array(re);A.forEach(function(we,Me){return P.resolve(we).then(function($e){return M($e)},function($e){ce[Me]=$e,--re||Y(new AggregateError(ce))})})})}),Ft.withResolvers&&(P.withResolvers=Ft.withResolvers));var He={awaits:0,echoes:0,id:0},pt=0,Wt=[],ut=0,Rt=0,Lt=0;function Qt(A,M,Y,re){var ce=ke,we=Object.create(ce);return we.parent=ce,we.ref=0,we.global=!1,we.id=++Lt,be.env,we.env=Dt?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject}:{},M&&l(we,M),++ce.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},re=go(we,A,Y,re),we.ref===0&&we.finalize(),re}function An(){return He.id||(He.id=++pt),++He.awaits,He.echoes+=Nt,He.id}function Kn(){return!!He.awaits&&(--He.awaits==0&&(He.id=0),He.echoes=He.awaits*Nt,!0)}function xr(A){return He.echoes&&A&&A.constructor===Ft?(An(),A.then(function(M){return Kn(),M},function(M){return Kn(),Wr(M)})):A}function _r(){var A=Wt[Wt.length-1];Wt.pop(),Fn(A,!1)}function Fn(A,M){var Y,re=ke;(M?!He.echoes||ut++&&A===ke:!ut||--ut&&A===ke)||queueMicrotask(M?(function(ce){++Rt,He.echoes&&--He.echoes!=0||(He.echoes=He.awaits=He.id=0),Wt.push(ke),Fn(ce,!0)}).bind(null,A):_r),A!==ke&&(ke=A,re===be&&(be.env=hi()),Dt&&(Y=be.env.Promise,M=A.env,(re.global||A.global)&&(Object.defineProperty(i,"Promise",M.PromiseProp),Y.all=M.all,Y.race=M.race,Y.resolve=M.resolve,Y.reject=M.reject,M.allSettled&&(Y.allSettled=M.allSettled),M.any&&(Y.any=M.any))))}function hi(){var A=i.Promise;return Dt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function go(A,M,Y,re,ce){var we=ke;try{return Fn(A,!0),M(Y,re,ce)}finally{Fn(we,!1)}}function yo(A,M,Y,re){return typeof A!="function"?A:function(){var ce=ke;Y&&An(),Fn(M,!0);try{return A.apply(this,arguments)}finally{Fn(ce,!1),re&&queueMicrotask(Kn)}}}function bo(A){Promise===Ft&&He.echoes===0?ut===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+gi).indexOf("[native code]")===-1&&(An=Kn=Le);var Wr=P.reject,vo="",ds="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",uy="String expected.",Bs=[],ul="__dbnames",Vi="readonly",Vu="readwrite";function wo(A,M){return A?M?function(){return A.apply(this,arguments)&&M.apply(this,arguments)}:A:M}var dl={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function hc(A){return typeof A!="string"||/\./.test(A)?function(M){return M}:function(M){return M[A]===void 0&&A in M&&delete(M=Z(M))[A],M}}function hf(){throw Ce.Type()}function Wn(A,M){try{var Y=Op(A),re=Op(M);if(Y!==re)return Y==="Array"?1:re==="Array"?-1:Y==="binary"?1:re==="binary"?-1:Y==="string"?1:re==="string"?-1:Y==="Date"?1:re!=="Date"?NaN:-1;switch(Y){case"number":case"Date":case"string":return M<A?1:A<M?-1:0;case"binary":return function(ce,we){for(var Me=ce.length,$e=we.length,We=Me<$e?Me:$e,Xe=0;Xe<We;++Xe)if(ce[Xe]!==we[Xe])return ce[Xe]<we[Xe]?-1:1;return Me===$e?0:Me<$e?-1:1}(pi(A),pi(M));case"Array":return function(ce,we){for(var Me=ce.length,$e=we.length,We=Me<$e?Me:$e,Xe=0;Xe<We;++Xe){var rt=Wn(ce[Xe],we[Xe]);if(rt!==0)return rt}return Me===$e?0:Me<$e?-1:1}(A,M)}}catch{}return NaN}function Op(A){var M=typeof A;return M!="object"?M:ArrayBuffer.isView(A)?"binary":(A=ue(A),A==="ArrayBuffer"?"binary":A)}function pi(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var Dp=(Ir.prototype._trans=function(A,M,Y){var re=this._tx||ke.trans,ce=this.name,we=Fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function Me(Xe,rt,qe){if(!qe.schema[ce])throw new Ce.NotFound("Table "+ce+" not part of transaction");return M(qe.idbtrans,qe)}var $e=V();try{var We=re&&re.db._novip===this.db._novip?re===ke.trans?re._promise(A,Me,Y):Qt(function(){return re._promise(A,Me,Y)},{trans:re,transless:ke.transless||ke}):function Xe(rt,qe,st,Ve){if(rt.idbdb&&(rt._state.openComplete||ke.letThrough||rt._vip)){var tt=rt._createTransaction(qe,st,rt._dbSchema);try{tt.create(),rt._state.PR1398_maxLoop=3}catch(ot){return ot.name===Ae.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,qe,st,Ve)})):Wr(ot)}return tt._promise(qe,function(ot,Je){return Qt(function(){return ke.trans=tt,Ve(ot,Je,tt)})}).then(function(ot){if(qe==="readwrite")try{tt.idbtrans.commit()}catch{}return qe==="readonly"?ot:tt._completion.then(function(){return ot})})}if(rt._state.openComplete)return Wr(new Ce.DatabaseClosed(rt._state.dbOpenError));if(!rt._state.isBeingOpened){if(!rt._state.autoOpen)return Wr(new Ce.DatabaseClosed);rt.open().catch(Le)}return rt._state.dbReadyPromise.then(function(){return Xe(rt,qe,st,Ve)})}(this.db,A,[this.name],Me);return we&&(We._consoleTask=we,We=We.catch(function(Xe){return console.trace(Xe),Wr(Xe)})),We}finally{$e&&H()}},Ir.prototype.get=function(A,M){var Y=this;return A&&A.constructor===Object?this.where(A).first(M):A==null?Wr(new Ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(re){return Y.core.get({trans:re,key:A}).then(function(ce){return Y.hook.reading.fire(ce)})}).then(M)},Ir.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(o(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var M=s(A);if(M.length===1)return this.where(M[0]).equals(A[M[0]]);var Y=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&M.every(function(Xe){return 0<=$e.keyPath.indexOf(Xe)})){for(var We=0;We<M.length;++We)if(M.indexOf($e.keyPath[We])===-1)return!1;return!0}return!1}).sort(function($e,We){return $e.keyPath.length-We.keyPath.length})[0];if(Y&&this.db._maxKey!==vo){var we=Y.keyPath.slice(0,M.length);return this.where(we).equals(we.map(function(We){return A[We]}))}!Y&&Fe&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(M.join("+"),"]"));var re=this.schema.idxByName;function ce($e,We){return Wn($e,We)===0}var Me=M.reduce(function(qe,We){var Xe=qe[0],rt=qe[1],qe=re[We],st=A[We];return[Xe||qe,Xe||!qe?wo(rt,qe&&qe.multi?function(Ve){return Ve=I(Ve,We),o(Ve)&&Ve.some(function(tt){return ce(st,tt)})}:function(Ve){return ce(st,I(Ve,We))}):rt]},[null,null]),we=Me[0],Me=Me[1];return we?this.where(we.name).equals(A[we.keyPath]).filter(Me):Y?this.filter(Me):this.where(M).equals("")},Ir.prototype.filter=function(A){return this.toCollection().and(A)},Ir.prototype.count=function(A){return this.toCollection().count(A)},Ir.prototype.offset=function(A){return this.toCollection().offset(A)},Ir.prototype.limit=function(A){return this.toCollection().limit(A)},Ir.prototype.each=function(A){return this.toCollection().each(A)},Ir.prototype.toArray=function(A){return this.toCollection().toArray(A)},Ir.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ir.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,o(A)?"[".concat(A.join("+"),"]"):A))},Ir.prototype.reverse=function(){return this.toCollection().reverse()},Ir.prototype.mapToClass=function(A){var M,Y=this.db,re=this.name;function ce(){return M!==null&&M.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof hf&&(function(We,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");function rt(){this.constructor=We}n(We,Xe),We.prototype=Xe===null?Object.create(Xe):(rt.prototype=Xe.prototype,new rt)}(ce,M=A),Object.defineProperty(ce.prototype,"db",{get:function(){return Y},enumerable:!1,configurable:!0}),ce.prototype.table=function(){return re},A=ce);for(var we=new Set,Me=A.prototype;Me;Me=u(Me))Object.getOwnPropertyNames(Me).forEach(function(We){return we.add(We)});function $e(We){if(!We)return We;var Xe,rt=Object.create(A.prototype);for(Xe in We)if(!we.has(Xe))try{rt[Xe]=We[Xe]}catch{}return rt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),A},Ir.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},Ir.prototype.add=function(A,M){var Y=this,re=this.schema.primKey,ce=re.auto,we=re.keyPath,Me=A;return we&&ce&&(Me=hc(we)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"add",keys:M!=null?[M]:null,values:[Me]})}).then(function($e){return $e.numFailures?P.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{R(A,we,$e)}catch{}return $e})},Ir.prototype.update=function(A,M){return typeof A!="object"||o(A)?this.where(":id").equals(A).modify(M):(A=I(A,this.schema.primKey.keyPath),A===void 0?Wr(new Ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(M))},Ir.prototype.put=function(A,M){var Y=this,re=this.schema.primKey,ce=re.auto,we=re.keyPath,Me=A;return we&&ce&&(Me=hc(we)(A)),this._trans("readwrite",function($e){return Y.core.mutate({trans:$e,type:"put",values:[Me],keys:M!=null?[M]:null})}).then(function($e){return $e.numFailures?P.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{R(A,we,$e)}catch{}return $e})},Ir.prototype.delete=function(A){var M=this;return this._trans("readwrite",function(Y){return M.core.mutate({trans:Y,type:"delete",keys:[A]})}).then(function(Y){return Y.numFailures?P.reject(Y.failures[0]):void 0})},Ir.prototype.clear=function(){var A=this;return this._trans("readwrite",function(M){return A.core.mutate({trans:M,type:"deleteRange",range:dl})}).then(function(M){return M.numFailures?P.reject(M.failures[0]):void 0})},Ir.prototype.bulkGet=function(A){var M=this;return this._trans("readonly",function(Y){return M.core.getMany({keys:A,trans:Y}).then(function(re){return re.map(function(ce){return M.hook.reading.fire(ce)})})})},Ir.prototype.bulkAdd=function(A,M,Y){var re=this,ce=Array.isArray(M)?M:void 0,we=(Y=Y||(ce?void 0:M))?Y.allKeys:void 0;return this._trans("readwrite",function(Me){var Xe=re.schema.primKey,$e=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new Ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var We=A.length,Xe=Xe&&$e?A.map(hc(Xe)):A;return re.core.mutate({trans:Me,type:"add",keys:ce,values:Xe,wantResults:we}).then(function(tt){var qe=tt.numFailures,st=tt.results,Ve=tt.lastResult,tt=tt.failures;if(qe===0)return we?st:Ve;throw new De("".concat(re.name,".bulkAdd(): ").concat(qe," of ").concat(We," operations failed"),tt)})})},Ir.prototype.bulkPut=function(A,M,Y){var re=this,ce=Array.isArray(M)?M:void 0,we=(Y=Y||(ce?void 0:M))?Y.allKeys:void 0;return this._trans("readwrite",function(Me){var Xe=re.schema.primKey,$e=Xe.auto,Xe=Xe.keyPath;if(Xe&&ce)throw new Ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ce&&ce.length!==A.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var We=A.length,Xe=Xe&&$e?A.map(hc(Xe)):A;return re.core.mutate({trans:Me,type:"put",keys:ce,values:Xe,wantResults:we}).then(function(tt){var qe=tt.numFailures,st=tt.results,Ve=tt.lastResult,tt=tt.failures;if(qe===0)return we?st:Ve;throw new De("".concat(re.name,".bulkPut(): ").concat(qe," of ").concat(We," operations failed"),tt)})})},Ir.prototype.bulkUpdate=function(A){var M=this,Y=this.core,re=A.map(function(Me){return Me.key}),ce=A.map(function(Me){return Me.changes}),we=[];return this._trans("readwrite",function(Me){return Y.getMany({trans:Me,keys:re,cache:"clone"}).then(function($e){var We=[],Xe=[];A.forEach(function(qe,st){var Ve=qe.key,tt=qe.changes,ot=$e[st];if(ot){for(var Je=0,ht=Object.keys(tt);Je<ht.length;Je++){var bt=ht[Je],wt=tt[bt];if(bt===M.schema.primKey.keyPath){if(Wn(wt,Ve)!==0)throw new Ce.Constraint("Cannot update primary key in bulkUpdate()")}else R(ot,bt,wt)}we.push(st),We.push(Ve),Xe.push(ot)}});var rt=We.length;return Y.mutate({trans:Me,type:"put",keys:We,values:Xe,updates:{keys:re,changeSpecs:ce}}).then(function(qe){var st=qe.numFailures,Ve=qe.failures;if(st===0)return rt;for(var tt=0,ot=Object.keys(Ve);tt<ot.length;tt++){var Je,ht=ot[tt],bt=we[Number(ht)];bt!=null&&(Je=Ve[ht],delete Ve[ht],Ve[bt]=Je)}throw new De("".concat(M.name,".bulkUpdate(): ").concat(st," of ").concat(rt," operations failed"),Ve)})})})},Ir.prototype.bulkDelete=function(A){var M=this,Y=A.length;return this._trans("readwrite",function(re){return M.core.mutate({trans:re,type:"delete",keys:A})}).then(function(Me){var ce=Me.numFailures,we=Me.lastResult,Me=Me.failures;if(ce===0)return we;throw new De("".concat(M.name,".bulkDelete(): ").concat(ce," of ").concat(Y," operations failed"),Me)})},Ir);function Ir(){}function xo(A){function M(Me,$e){if($e){for(var We=arguments.length,Xe=new Array(We-1);--We;)Xe[We-1]=arguments[We];return Y[Me].subscribe.apply(null,Xe),A}if(typeof Me=="string")return Y[Me]}var Y={};M.addEventType=we;for(var re=1,ce=arguments.length;re<ce;++re)we(arguments[re]);return M;function we(Me,$e,We){if(typeof Me!="object"){var Xe;$e=$e||Q;var rt={subscribers:[],fire:We=We||Le,subscribe:function(qe){rt.subscribers.indexOf(qe)===-1&&(rt.subscribers.push(qe),rt.fire=$e(rt.fire,qe))},unsubscribe:function(qe){rt.subscribers=rt.subscribers.filter(function(st){return st!==qe}),rt.fire=rt.subscribers.reduce($e,We)}};return Y[Me]=M[Me]=rt}s(Xe=Me).forEach(function(qe){var st=Xe[qe];if(o(st))we(qe,Xe[qe][0],Xe[qe][1]);else{if(st!=="asap")throw new Ce.InvalidArgument("Invalid event config");var Ve=we(qe,Ie,function(){for(var tt=arguments.length,ot=new Array(tt);tt--;)ot[tt]=arguments[tt];Ve.subscribers.forEach(function(Je){k(function(){Je.apply(null,ot)})})})}})}}function pc(A,M){return b(M).from({prototype:A}),M}function zs(A,M){return!(A.filter||A.algorithm||A.or)&&(M?A.justLimit:!A.replayFilter)}function Mp(A,M){A.filter=wo(A.filter,M)}function Xa(A,M,Y){var re=A.replayFilter;A.replayFilter=re?function(){return wo(re(),M())}:M,A.justLimit=Y&&!re}function mc(A,M){if(A.isPrimKey)return M.primaryKey;var Y=M.getIndexByKeyPath(A.index);if(!Y)throw new Ce.Schema("KeyPath "+A.index+" on object store "+M.name+" is not indexed");return Y}function Pp(A,M,Y){var re=mc(A,M.schema);return M.openCursor({trans:Y,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:re,range:A.range}})}function gc(A,M,Y,re){var ce=A.replayFilter?wo(A.filter,A.replayFilter()):A.filter;if(A.or){var we={},Me=function($e,We,Xe){var rt,qe;ce&&!ce(We,Xe,function(st){return We.stop(st)},function(st){return We.fail(st)})||((qe=""+(rt=We.primaryKey))=="[object ArrayBuffer]"&&(qe=""+new Uint8Array(rt)),h(we,qe)||(we[qe]=!0,M($e,We,Xe)))};return Promise.all([A.or._iterate(Me,Y),fl(Pp(A,re,Y),A.algorithm,Me,!A.keysOnly&&A.valueMapper)])}return fl(Pp(A,re,Y),wo(A.algorithm,ce),M,!A.keysOnly&&A.valueMapper)}function fl(A,M,Y,re){var ce=Re(re?function(we,Me,$e){return Y(re(we),Me,$e)}:Y);return A.then(function(we){if(we)return we.start(function(){var Me=function(){return we.continue()};M&&!M(we,function($e){return Me=$e},function($e){we.stop($e),Me=Le},function($e){we.fail($e),Me=Le})||ce(we.value,we,function($e){return Me=$e}),Me()})})}var yc=(Fp.prototype.execute=function(A){var M=this["@@propmod"];if(M.add!==void 0){var Y=M.add;if(o(Y))return a(a([],o(A)?A:[],!0),Y).sort();if(typeof Y=="number")return(Number(A)||0)+Y;if(typeof Y=="bigint")try{return BigInt(A)+Y}catch{return BigInt(0)+Y}throw new TypeError("Invalid term ".concat(Y))}if(M.remove!==void 0){var re=M.remove;if(o(re))return o(A)?A.filter(function(ce){return!re.includes(ce)}).sort():[];if(typeof re=="number")return Number(A)-re;if(typeof re=="bigint")try{return BigInt(A)-re}catch{return BigInt(0)-re}throw new TypeError("Invalid subtrahend ".concat(re))}return Y=(Y=M.replacePrefix)===null||Y===void 0?void 0:Y[0],Y&&typeof A=="string"&&A.startsWith(Y)?M.replacePrefix[1]+A.substring(Y.length):A},Fp);function Fp(A){this["@@propmod"]=A}var bc=(tr.prototype._read=function(A,M){var Y=this._ctx;return Y.error?Y.table._trans(null,Wr.bind(null,Y.error)):Y.table._trans("readonly",A).then(M)},tr.prototype._write=function(A){var M=this._ctx;return M.error?M.table._trans(null,Wr.bind(null,M.error)):M.table._trans("readwrite",A,"locked")},tr.prototype._addAlgorithm=function(A){var M=this._ctx;M.algorithm=wo(M.algorithm,A)},tr.prototype._iterate=function(A,M){return gc(this._ctx,A,M,this._ctx.table.core)},tr.prototype.clone=function(A){var M=Object.create(this.constructor.prototype),Y=Object.create(this._ctx);return A&&l(Y,A),M._ctx=Y,M},tr.prototype.raw=function(){return this._ctx.valueMapper=null,this},tr.prototype.each=function(A){var M=this._ctx;return this._read(function(Y){return gc(M,A,Y,M.table.core)})},tr.prototype.count=function(A){var M=this;return this._read(function(Y){var re=M._ctx,ce=re.table.core;if(zs(re,!0))return ce.count({trans:Y,query:{index:mc(re,ce.schema),range:re.range}}).then(function(Me){return Math.min(Me,re.limit)});var we=0;return gc(re,function(){return++we,!1},Y,ce).then(function(){return we})}).then(A)},tr.prototype.sortBy=function(A,M){var Y=A.split(".").reverse(),re=Y[0],ce=Y.length-1;function we(We,Xe){return Xe?we(We[Y[Xe]],Xe-1):We[re]}var Me=this._ctx.dir==="next"?1:-1;function $e(We,Xe){return Wn(we(We,ce),we(Xe,ce))*Me}return this.toArray(function(We){return We.sort($e)}).then(M)},tr.prototype.toArray=function(A){var M=this;return this._read(function(Y){var re=M._ctx;if(re.dir==="next"&&zs(re,!0)&&0<re.limit){var ce=re.valueMapper,we=mc(re,re.table.core.schema);return re.table.core.query({trans:Y,limit:re.limit,values:!0,query:{index:we,range:re.range}}).then(function($e){return $e=$e.result,ce?$e.map(ce):$e})}var Me=[];return gc(re,function($e){return Me.push($e)},Y,re.table.core).then(function(){return Me})},A)},tr.prototype.offset=function(A){var M=this._ctx;return A<=0||(M.offset+=A,zs(M)?Xa(M,function(){var Y=A;return function(re,ce){return Y===0||(Y===1?--Y:ce(function(){re.advance(Y),Y=0}),!1)}}):Xa(M,function(){var Y=A;return function(){return--Y<0}})),this},tr.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),Xa(this._ctx,function(){var M=A;return function(Y,re,ce){return--M<=0&&re(ce),0<=M}},!0),this},tr.prototype.until=function(A,M){return Mp(this._ctx,function(Y,re,ce){return!A(Y.value)||(re(ce),M)}),this},tr.prototype.first=function(A){return this.limit(1).toArray(function(M){return M[0]}).then(A)},tr.prototype.last=function(A){return this.reverse().first(A)},tr.prototype.filter=function(A){var M;return Mp(this._ctx,function(Y){return A(Y.value)}),(M=this._ctx).isMatch=wo(M.isMatch,A),this},tr.prototype.and=function(A){return this.filter(A)},tr.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},tr.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},tr.prototype.desc=function(){return this.reverse()},tr.prototype.eachKey=function(A){var M=this._ctx;return M.keysOnly=!M.isMatch,this.each(function(Y,re){A(re.key,re)})},tr.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},tr.prototype.eachPrimaryKey=function(A){var M=this._ctx;return M.keysOnly=!M.isMatch,this.each(function(Y,re){A(re.primaryKey,re)})},tr.prototype.keys=function(A){var M=this._ctx;M.keysOnly=!M.isMatch;var Y=[];return this.each(function(re,ce){Y.push(ce.key)}).then(function(){return Y}).then(A)},tr.prototype.primaryKeys=function(A){var M=this._ctx;if(M.dir==="next"&&zs(M,!0)&&0<M.limit)return this._read(function(re){var ce=mc(M,M.table.core.schema);return M.table.core.query({trans:re,values:!1,limit:M.limit,query:{index:ce,range:M.range}})}).then(function(re){return re.result}).then(A);M.keysOnly=!M.isMatch;var Y=[];return this.each(function(re,ce){Y.push(ce.primaryKey)}).then(function(){return Y}).then(A)},tr.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},tr.prototype.firstKey=function(A){return this.limit(1).keys(function(M){return M[0]}).then(A)},tr.prototype.lastKey=function(A){return this.reverse().firstKey(A)},tr.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var M={};return Mp(this._ctx,function(ce){var re=ce.primaryKey.toString(),ce=h(M,re);return M[re]=!0,!ce}),this},tr.prototype.modify=function(A){var M=this,Y=this._ctx;return this._write(function(re){var ce,we,Me;Me=typeof A=="function"?A:(ce=s(A),we=ce.length,function(Je){for(var ht=!1,bt=0;bt<we;++bt){var wt=ce[bt],Tt=A[wt],Ht=I(Je,wt);Tt instanceof yc?(R(Je,wt,Tt.execute(Ht)),ht=!0):Ht!==Tt&&(R(Je,wt,Tt),ht=!0)}return ht});var $e=Y.table.core,qe=$e.schema.primaryKey,We=qe.outbound,Xe=qe.extractKey,rt=200,qe=M.db._options.modifyChunkSize;qe&&(rt=typeof qe=="object"?qe[$e.name]||qe["*"]||200:qe);function st(Je,wt){var bt=wt.failures,wt=wt.numFailures;tt+=Je-wt;for(var Tt=0,Ht=s(bt);Tt<Ht.length;Tt++){var Yt=Ht[Tt];Ve.push(bt[Yt])}}var Ve=[],tt=0,ot=[];return M.clone().primaryKeys().then(function(Je){function ht(wt){var Tt=Math.min(rt,Je.length-wt);return $e.getMany({trans:re,keys:Je.slice(wt,wt+Tt),cache:"immutable"}).then(function(Ht){for(var Yt=[],Bt=[],Gt=We?[]:null,Xt=[],zt=0;zt<Tt;++zt){var nn=Ht[zt],pn={value:Z(nn),primKey:Je[wt+zt]};Me.call(pn,pn.value,pn)!==!1&&(pn.value==null?Xt.push(Je[wt+zt]):We||Wn(Xe(nn),Xe(pn.value))===0?(Bt.push(pn.value),We&&Gt.push(Je[wt+zt])):(Xt.push(Je[wt+zt]),Yt.push(pn.value)))}return Promise.resolve(0<Yt.length&&$e.mutate({trans:re,type:"add",values:Yt}).then(function(gn){for(var Nn in gn.failures)Xt.splice(parseInt(Nn),1);st(Yt.length,gn)})).then(function(){return(0<Bt.length||bt&&typeof A=="object")&&$e.mutate({trans:re,type:"put",keys:Gt,values:Bt,criteria:bt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<wt}).then(function(gn){return st(Bt.length,gn)})}).then(function(){return(0<Xt.length||bt&&A===pf)&&$e.mutate({trans:re,type:"delete",keys:Xt,criteria:bt,isAdditionalChunk:0<wt}).then(function(gn){return st(Xt.length,gn)})}).then(function(){return Je.length>wt+Tt&&ht(wt+rt)})})}var bt=zs(Y)&&Y.limit===1/0&&(typeof A!="function"||A===pf)&&{index:Y.index,range:Y.range};return ht(0).then(function(){if(0<Ve.length)throw new ve("Error modifying one or more objects",Ve,tt,ot);return Je.length})})})},tr.prototype.delete=function(){var A=this._ctx,M=A.range;return zs(A)&&(A.isPrimKey||M.type===3)?this._write(function(Y){var re=A.table.core.schema.primaryKey,ce=M;return A.table.core.count({trans:Y,query:{index:re,range:ce}}).then(function(we){return A.table.core.mutate({trans:Y,type:"deleteRange",range:ce}).then(function(Me){var $e=Me.failures;if(Me.lastResult,Me.results,Me=Me.numFailures,Me)throw new ve("Could not delete some values",Object.keys($e).map(function(We){return $e[We]}),we-Me);return we-Me})})}):this.modify(pf)},tr);function tr(){}var pf=function(A,M){return M.value=null};function dy(A,M){return A<M?-1:A===M?0:1}function Lp(A,M){return M<A?-1:A===M?0:1}function mi(A,M,Y){return A=A instanceof pl?new A.Collection(A):A,A._ctx.error=new(Y||TypeError)(M),A}function vc(A){return new A.Collection(A,function(){return mf("")}).limit(0)}function hl(A,M,Y,re){var ce,we,Me,$e,We,Xe,rt,qe=Y.length;if(!Y.every(function(tt){return typeof tt=="string"}))return mi(A,uy);function st(tt){ce=tt==="next"?function(Je){return Je.toUpperCase()}:function(Je){return Je.toLowerCase()},we=tt==="next"?function(Je){return Je.toLowerCase()}:function(Je){return Je.toUpperCase()},Me=tt==="next"?dy:Lp;var ot=Y.map(function(Je){return{lower:we(Je),upper:ce(Je)}}).sort(function(Je,ht){return Me(Je.lower,ht.lower)});$e=ot.map(function(Je){return Je.upper}),We=ot.map(function(Je){return Je.lower}),rt=(Xe=tt)==="next"?"":re}st("next"),A=new A.Collection(A,function(){return fs($e[0],We[qe-1]+re)}),A._ondirectionchange=function(tt){st(tt)};var Ve=0;return A._addAlgorithm(function(tt,ot,Je){var ht=tt.key;if(typeof ht!="string")return!1;var bt=we(ht);if(M(bt,We,Ve))return!0;for(var wt=null,Tt=Ve;Tt<qe;++Tt){var Ht=function(Yt,Bt,Gt,Xt,zt,nn){for(var pn=Math.min(Yt.length,Xt.length),gn=-1,Nn=0;Nn<pn;++Nn){var Va=Bt[Nn];if(Va!==Xt[Nn])return zt(Yt[Nn],Gt[Nn])<0?Yt.substr(0,Nn)+Gt[Nn]+Gt.substr(Nn+1):zt(Yt[Nn],Xt[Nn])<0?Yt.substr(0,Nn)+Xt[Nn]+Gt.substr(Nn+1):0<=gn?Yt.substr(0,gn)+Bt[gn]+Gt.substr(gn+1):null;zt(Yt[Nn],Va)<0&&(gn=Nn)}return pn<Xt.length&&nn==="next"?Yt+Gt.substr(Yt.length):pn<Yt.length&&nn==="prev"?Yt.substr(0,Gt.length):gn<0?null:Yt.substr(0,gn)+Xt[gn]+Gt.substr(gn+1)}(ht,bt,$e[Tt],We[Tt],Me,Xe);Ht===null&&wt===null?Ve=Tt+1:(wt===null||0<Me(wt,Ht))&&(wt=Ht)}return ot(wt!==null?function(){tt.continue(wt+rt)}:Je),!1}),A}function fs(A,M,Y,re){return{type:2,lower:A,upper:M,lowerOpen:Y,upperOpen:re}}function mf(A){return{type:1,lower:A,upper:A}}var pl=(Object.defineProperty($r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$r.prototype.between=function(A,M,Y,re){Y=Y!==!1,re=re===!0;try{return 0<this._cmp(A,M)||this._cmp(A,M)===0&&(Y||re)&&(!Y||!re)?vc(this):new this.Collection(this,function(){return fs(A,M,!Y,!re)})}catch{return mi(this,ds)}},$r.prototype.equals=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return mf(A)})},$r.prototype.above=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return fs(A,void 0,!0)})},$r.prototype.aboveOrEqual=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return fs(A,void 0,!1)})},$r.prototype.below=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return fs(void 0,A,!1,!0)})},$r.prototype.belowOrEqual=function(A){return A==null?mi(this,ds):new this.Collection(this,function(){return fs(void 0,A)})},$r.prototype.startsWith=function(A){return typeof A!="string"?mi(this,uy):this.between(A,A+vo,!0,!0)},$r.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):hl(this,function(M,Y){return M.indexOf(Y[0])===0},[A],vo)},$r.prototype.equalsIgnoreCase=function(A){return hl(this,function(M,Y){return M===Y[0]},[A],"")},$r.prototype.anyOfIgnoreCase=function(){var A=B.apply(ae,arguments);return A.length===0?vc(this):hl(this,function(M,Y){return Y.indexOf(M)!==-1},A,"")},$r.prototype.startsWithAnyOfIgnoreCase=function(){var A=B.apply(ae,arguments);return A.length===0?vc(this):hl(this,function(M,Y){return Y.some(function(re){return M.indexOf(re)===0})},A,vo)},$r.prototype.anyOf=function(){var A=this,M=B.apply(ae,arguments),Y=this._cmp;try{M.sort(Y)}catch{return mi(this,ds)}if(M.length===0)return vc(this);var re=new this.Collection(this,function(){return fs(M[0],M[M.length-1])});re._ondirectionchange=function(we){Y=we==="next"?A._ascending:A._descending,M.sort(Y)};var ce=0;return re._addAlgorithm(function(we,Me,$e){for(var We=we.key;0<Y(We,M[ce]);)if(++ce===M.length)return Me($e),!1;return Y(We,M[ce])===0||(Me(function(){we.continue(M[ce])}),!1)}),re},$r.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$r.prototype.noneOf=function(){var A=B.apply(ae,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return mi(this,ds)}var M=A.reduce(function(Y,re){return Y?Y.concat([[Y[Y.length-1][1],re]]):[[-1/0,re]]},null);return M.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(M,{includeLowers:!1,includeUppers:!1})},$r.prototype.inAnyRange=function(ht,M){var Y=this,re=this._cmp,ce=this._ascending,we=this._descending,Me=this._min,$e=this._max;if(ht.length===0)return vc(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&ce(bt[0],bt[1])<=0}))return mi(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ce.InvalidArgument);var We=!M||M.includeLowers!==!1,Xe=M&&M.includeUppers===!0,rt,qe=ce;function st(bt,wt){return qe(bt[0],wt[0])}try{(rt=ht.reduce(function(bt,wt){for(var Tt=0,Ht=bt.length;Tt<Ht;++Tt){var Yt=bt[Tt];if(re(wt[0],Yt[1])<0&&0<re(wt[1],Yt[0])){Yt[0]=Me(Yt[0],wt[0]),Yt[1]=$e(Yt[1],wt[1]);break}}return Tt===Ht&&bt.push(wt),bt},[])).sort(st)}catch{return mi(this,ds)}var Ve=0,tt=Xe?function(bt){return 0<ce(bt,rt[Ve][1])}:function(bt){return 0<=ce(bt,rt[Ve][1])},ot=We?function(bt){return 0<we(bt,rt[Ve][0])}:function(bt){return 0<=we(bt,rt[Ve][0])},Je=tt,ht=new this.Collection(this,function(){return fs(rt[0][0],rt[rt.length-1][1],!We,!Xe)});return ht._ondirectionchange=function(bt){qe=bt==="next"?(Je=tt,ce):(Je=ot,we),rt.sort(st)},ht._addAlgorithm(function(bt,wt,Tt){for(var Ht,Yt=bt.key;Je(Yt);)if(++Ve===rt.length)return wt(Tt),!1;return!tt(Ht=Yt)&&!ot(Ht)||(Y._cmp(Yt,rt[Ve][1])===0||Y._cmp(Yt,rt[Ve][0])===0||wt(function(){qe===ce?bt.continue(rt[Ve][0]):bt.continue(rt[Ve][1])}),!1)}),ht},$r.prototype.startsWithAnyOf=function(){var A=B.apply(ae,arguments);return A.every(function(M){return typeof M=="string"})?A.length===0?vc(this):this.inAnyRange(A.map(function(M){return[M,M+vo]})):mi(this,"startsWithAnyOf() only works with strings")},$r);function $r(){}function Gi(A){return Re(function(M){return ml(M),A(M.target.error),!1})}function ml(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var wc="storagemutated",gl="x-storagemutated-1",Aa=xo(null,wc),$p=(Ja.prototype._lock=function(){return C(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},Ja.prototype._unlock=function(){if(C(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{go(A[1],A[0])}catch{}}return this},Ja.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},Ja.prototype.create=function(A){var M=this;if(!this.mode)return this;var Y=this.db.idbdb,re=this.db._state.dbOpenError;if(C(!this.idbtrans),!A&&!Y)switch(re&&re.name){case"DatabaseClosedError":throw new Ce.DatabaseClosed(re);case"MissingAPIError":throw new Ce.MissingAPI(re.message,re);default:throw new Ce.OpenFailed(re)}if(!this.active)throw new Ce.TransactionInactive;return C(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||Y).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(ce){ml(ce),M._reject(A.error)}),A.onabort=Re(function(ce){ml(ce),M.active&&M._reject(new Ce.Abort(A.error)),M.active=!1,M.on("abort").fire(ce)}),A.oncomplete=Re(function(){M.active=!1,M._resolve(),"mutatedParts"in A&&Aa.storagemutated.fire(A.mutatedParts)}),this},Ja.prototype._promise=function(A,M,Y){var re=this;if(A==="readwrite"&&this.mode!=="readwrite")return Wr(new Ce.ReadOnly("Transaction is readonly"));if(!this.active)return Wr(new Ce.TransactionInactive);if(this._locked())return new P(function(we,Me){re._blockedFuncs.push([function(){re._promise(A,M,Y).then(we,Me)},ke])});if(Y)return Qt(function(){var we=new P(function(Me,$e){re._lock();var We=M(Me,$e,re);We&&We.then&&We.then(Me,$e)});return we.finally(function(){return re._unlock()}),we._lib=!0,we});var ce=new P(function(we,Me){var $e=M(we,Me,re);$e&&$e.then&&$e.then(we,Me)});return ce._lib=!0,ce},Ja.prototype._root=function(){return this.parent?this.parent._root():this},Ja.prototype.waitFor=function(A){var M,Y=this._root(),re=P.resolve(A);Y._waitingFor?Y._waitingFor=Y._waitingFor.then(function(){return re}):(Y._waitingFor=re,Y._waitingQueue=[],M=Y.idbtrans.objectStore(Y.storeNames[0]),function we(){for(++Y._spinCount;Y._waitingQueue.length;)Y._waitingQueue.shift()();Y._waitingFor&&(M.get(-1/0).onsuccess=we)}());var ce=Y._waitingFor;return new P(function(we,Me){re.then(function($e){return Y._waitingQueue.push(Re(we.bind(null,$e)))},function($e){return Y._waitingQueue.push(Re(Me.bind(null,$e)))}).finally(function(){Y._waitingFor===ce&&(Y._waitingFor=null)})})},Ja.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ce.Abort))},Ja.prototype.table=function(A){var M=this._memoizedTables||(this._memoizedTables={});if(h(M,A))return M[A];var Y=this.schema[A];if(!Y)throw new Ce.NotFound("Table "+A+" not part of transaction");return Y=new this.db.Table(A,Y,this),Y.core=this.db.core.table(A),M[A]=Y},Ja);function Ja(){}function hs(A,M,Y,re,ce,we,Me){return{name:A,keyPath:M,unique:Y,multi:re,auto:ce,compound:we,src:(Y&&!Me?"&":"")+(re?"*":"")+(ce?"++":"")+gf(M)}}function gf(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function xc(A,M,Y){return{name:A,primKey:M,indexes:Y,mappedClass:null,idxByName:(re=function(ce){return[ce.name,ce]},Y.reduce(function(ce,we,Me){return Me=re(we,Me),Me&&(ce[Me[0]]=Me[1]),ce},{}))};var re}var _c=function(A){try{return A.only([[]]),_c=function(){return[[]]},[[]]}catch{return _c=function(){return vo},vo}};function Sc(A){return A==null?function(){}:typeof A=="string"?(M=A).split(".").length===1?function(Y){return Y[M]}:function(Y){return I(Y,M)}:function(Y){return I(Y,A)};var M}function Gu(A){return[].slice.call(A)}var fy=0;function ca(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function yl(A,M,We){function re(Je){if(Je.type===3)return null;if(Je.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ve=Je.lower,tt=Je.upper,ot=Je.lowerOpen,Je=Je.upperOpen;return Ve===void 0?tt===void 0?null:M.upperBound(tt,!!Je):tt===void 0?M.lowerBound(Ve,!!ot):M.bound(Ve,tt,!!ot,!!Je)}function ce(st){var Ve,tt=st.name;return{name:tt,schema:st,mutate:function(ot){var Je=ot.trans,ht=ot.type,bt=ot.keys,wt=ot.values,Tt=ot.range;return new Promise(function(Ht,Yt){Ht=Re(Ht);var Bt=Je.objectStore(tt),Gt=Bt.keyPath==null,Xt=ht==="put"||ht==="add";if(!Xt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var zt,nn=(bt||wt||{length:1}).length;if(bt&&wt&&bt.length!==wt.length)throw new Error("Given keys array must have same length as given values array.");if(nn===0)return Ht({numFailures:0,failures:{},results:[],lastResult:void 0});function pn(Ra){++Va,ml(Ra)}var gn=[],Nn=[],Va=0;if(ht==="deleteRange"){if(Tt.type===4)return Ht({numFailures:Va,failures:Nn,results:[],lastResult:void 0});Tt.type===3?gn.push(zt=Bt.clear()):gn.push(zt=Bt.delete(re(Tt)))}else{var Gt=Xt?Gt?[wt,bt]:[wt,null]:[bt,null],_n=Gt[0],aa=Gt[1];if(Xt)for(var ua=0;ua<nn;++ua)gn.push(zt=aa&&aa[ua]!==void 0?Bt[ht](_n[ua],aa[ua]):Bt[ht](_n[ua])),zt.onerror=pn;else for(ua=0;ua<nn;++ua)gn.push(zt=Bt[ht](_n[ua])),zt.onerror=pn}function Us(Ra){Ra=Ra.target.result,gn.forEach(function(ms,Co){return ms.error!=null&&(Nn[Co]=ms.error)}),Ht({numFailures:Va,failures:Nn,results:ht==="delete"?bt:gn.map(function(ms){return ms.result}),lastResult:Ra})}zt.onerror=function(Ra){pn(Ra),Us(Ra)},zt.onsuccess=Us})},getMany:function(ot){var Je=ot.trans,ht=ot.keys;return new Promise(function(bt,wt){bt=Re(bt);for(var Tt,Ht=Je.objectStore(tt),Yt=ht.length,Bt=new Array(Yt),Gt=0,Xt=0,zt=function(gn){gn=gn.target,Bt[gn._pos]=gn.result,++Xt===Gt&&bt(Bt)},nn=Gi(wt),pn=0;pn<Yt;++pn)ht[pn]!=null&&((Tt=Ht.get(ht[pn]))._pos=pn,Tt.onsuccess=zt,Tt.onerror=nn,++Gt);Gt===0&&bt(Bt)})},get:function(ot){var Je=ot.trans,ht=ot.key;return new Promise(function(bt,wt){bt=Re(bt);var Tt=Je.objectStore(tt).get(ht);Tt.onsuccess=function(Ht){return bt(Ht.target.result)},Tt.onerror=Gi(wt)})},query:(Ve=Xe,function(ot){return new Promise(function(Je,ht){Je=Re(Je);var bt,wt,Tt,Gt=ot.trans,Ht=ot.values,Yt=ot.limit,zt=ot.query,Bt=Yt===1/0?void 0:Yt,Xt=zt.index,zt=zt.range,Gt=Gt.objectStore(tt),Xt=Xt.isPrimaryKey?Gt:Gt.index(Xt.name),zt=re(zt);if(Yt===0)return Je({result:[]});Ve?((Bt=Ht?Xt.getAll(zt,Bt):Xt.getAllKeys(zt,Bt)).onsuccess=function(nn){return Je({result:nn.target.result})},Bt.onerror=Gi(ht)):(bt=0,wt=!Ht&&"openKeyCursor"in Xt?Xt.openKeyCursor(zt):Xt.openCursor(zt),Tt=[],wt.onsuccess=function(nn){var pn=wt.result;return pn?(Tt.push(Ht?pn.value:pn.primaryKey),++bt===Yt?Je({result:Tt}):void pn.continue()):Je({result:Tt})},wt.onerror=Gi(ht))})}),openCursor:function(ot){var Je=ot.trans,ht=ot.values,bt=ot.query,wt=ot.reverse,Tt=ot.unique;return new Promise(function(Ht,Yt){Ht=Re(Ht);var Xt=bt.index,Bt=bt.range,Gt=Je.objectStore(tt),Gt=Xt.isPrimaryKey?Gt:Gt.index(Xt.name),Xt=wt?Tt?"prevunique":"prev":Tt?"nextunique":"next",zt=!ht&&"openKeyCursor"in Gt?Gt.openKeyCursor(re(Bt),Xt):Gt.openCursor(re(Bt),Xt);zt.onerror=Gi(Yt),zt.onsuccess=Re(function(nn){var pn,gn,Nn,Va,_n=zt.result;_n?(_n.___id=++fy,_n.done=!1,pn=_n.continue.bind(_n),gn=(gn=_n.continuePrimaryKey)&&gn.bind(_n),Nn=_n.advance.bind(_n),Va=function(){throw new Error("Cursor not stopped")},_n.trans=Je,_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=function(){throw new Error("Cursor not started")},_n.fail=Re(Yt),_n.next=function(){var aa=this,ua=1;return this.start(function(){return ua--?aa.continue():aa.stop()}).then(function(){return aa})},_n.start=function(aa){function ua(){if(zt.result)try{aa()}catch(Ra){_n.fail(Ra)}else _n.done=!0,_n.start=function(){throw new Error("Cursor behind last entry")},_n.stop()}var Us=new Promise(function(Ra,ms){Ra=Re(Ra),zt.onerror=Gi(ms),_n.fail=ms,_n.stop=function(Co){_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=Va,Ra(Co)}});return zt.onsuccess=Re(function(Ra){zt.onsuccess=ua,ua()}),_n.continue=pn,_n.continuePrimaryKey=gn,_n.advance=Nn,ua(),Us},Ht(_n)):Ht(null)},Yt)})},count:function(ot){var Je=ot.query,ht=ot.trans,bt=Je.index,wt=Je.range;return new Promise(function(Tt,Ht){var Yt=ht.objectStore(tt),Bt=bt.isPrimaryKey?Yt:Yt.index(bt.name),Yt=re(wt),Bt=Yt?Bt.count(Yt):Bt.count();Bt.onsuccess=Re(function(Gt){return Tt(Gt.target.result)}),Bt.onerror=Gi(Ht)})}}}var we,Me,$e,rt=(Me=We,$e=Gu((we=A).objectStoreNames),{schema:{name:we.name,tables:$e.map(function(st){return Me.objectStore(st)}).map(function(st){var Ve=st.keyPath,Je=st.autoIncrement,tt=o(Ve),ot={},Je={name:st.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ve==null,compound:tt,keyPath:Ve,autoIncrement:Je,unique:!0,extractKey:Sc(Ve)},indexes:Gu(st.indexNames).map(function(ht){return st.index(ht)}).map(function(Tt){var bt=Tt.name,wt=Tt.unique,Ht=Tt.multiEntry,Tt=Tt.keyPath,Ht={name:bt,compound:o(Tt),keyPath:Tt,unique:wt,multiEntry:Ht,extractKey:Sc(Tt)};return ot[ca(Tt)]=Ht}),getIndexByKeyPath:function(ht){return ot[ca(ht)]}};return ot[":id"]=Je.primaryKey,Ve!=null&&(ot[ca(Ve)]=Je.primaryKey),Je})},hasGetAll:0<$e.length&&"getAll"in Me.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=rt.schema,Xe=rt.hasGetAll,rt=We.tables.map(ce),qe={};return rt.forEach(function(st){return qe[st.name]=st}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(st){if(!qe[st])throw new Error("Table '".concat(st,"' not found"));return qe[st]},MIN_KEY:-1/0,MAX_KEY:_c(M),schema:We}}function yf(A,M,Y,re){var ce=Y.IDBKeyRange;return Y.indexedDB,{dbcore:(re=yl(M,ce,re),A.dbcore.reduce(function(we,Me){return Me=Me.create,r(r({},we),Me(we))},re))}}function _o(A,re){var Y=re.db,re=yf(A._middlewares,Y,A._deps,re);A.core=re.dbcore,A.tables.forEach(function(ce){var we=ce.name;A.core.schema.tables.some(function(Me){return Me.name===we})&&(ce.core=A.core.table(we),A[we]instanceof A.Table&&(A[we].core=ce.core))})}function bf(A,M,Y,re){Y.forEach(function(ce){var we=re[ce];M.forEach(function(Me){var $e=function We(Xe,rt){return x(Xe,rt)||(Xe=u(Xe))&&We(Xe,rt)}(Me,ce);(!$e||"value"in $e&&$e.value===void 0)&&(Me===A.Transaction.prototype||Me instanceof A.Transaction?v(Me,ce,{get:function(){return this.table(ce)},set:function(We){y(this,ce,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):Me[ce]=new A.Table(ce,we))})})}function Ku(A,M){M.forEach(function(Y){for(var re in Y)Y[re]instanceof A.Table&&delete Y[re]})}function Bp(A,M){return A._cfg.version-M._cfg.version}function Wu(A,M,Y,re){var ce=A._dbSchema;Y.objectStoreNames.contains("$meta")&&!ce.$meta&&(ce.$meta=xc("$meta",py("")[0],[]),A._storeNames.push("$meta"));var we=A._createTransaction("readwrite",A._storeNames,ce);we.create(Y),we._completion.catch(re);var Me=we._reject.bind(we),$e=ke.transless||ke;Qt(function(){return ke.trans=we,ke.transless=$e,M!==0?(_o(A,Y),Xe=M,((We=we).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(rt){return rt??Xe}):P.resolve(Xe)).then(function(rt){return st=rt,Ve=we,tt=Y,ot=[],rt=(qe=A)._versions,Je=qe._dbSchema=Ec(0,qe.idbdb,tt),(rt=rt.filter(function(ht){return ht._cfg.version>=st})).length!==0?(rt.forEach(function(ht){ot.push(function(){var bt=Je,wt=ht._cfg.dbschema;_f(qe,bt,tt),_f(qe,wt,tt),Je=qe._dbSchema=wt;var Tt=wf(bt,wt);Tt.add.forEach(function(Xt){zp(tt,Xt[0],Xt[1].primKey,Xt[1].indexes)}),Tt.change.forEach(function(Xt){if(Xt.recreate)throw new Ce.Upgrade("Not yet support for changing primary key");var zt=tt.objectStore(Xt.name);Xt.add.forEach(function(nn){return xf(zt,nn)}),Xt.change.forEach(function(nn){zt.deleteIndex(nn.name),xf(zt,nn)}),Xt.del.forEach(function(nn){return zt.deleteIndex(nn)})});var Ht=ht._cfg.contentUpgrade;if(Ht&&ht._cfg.version>st){_o(qe,tt),Ve._memoizedTables={};var Yt=j(wt);Tt.del.forEach(function(Xt){Yt[Xt]=bt[Xt]}),Ku(qe,[qe.Transaction.prototype]),bf(qe,[qe.Transaction.prototype],s(Yt),Yt),Ve.schema=Yt;var Bt,Gt=J(Ht);return Gt&&An(),Tt=P.follow(function(){var Xt;(Bt=Ht(Ve))&&Gt&&(Xt=Kn.bind(null,null),Bt.then(Xt,Xt))}),Bt&&typeof Bt.then=="function"?P.resolve(Bt):Tt.then(function(){return Bt})}}),ot.push(function(bt){var wt,Tt,Ht=ht._cfg.dbschema;wt=Ht,Tt=bt,[].slice.call(Tt.db.objectStoreNames).forEach(function(Yt){return wt[Yt]==null&&Tt.db.deleteObjectStore(Yt)}),Ku(qe,[qe.Transaction.prototype]),bf(qe,[qe.Transaction.prototype],qe._storeNames,qe._dbSchema),Ve.schema=qe._dbSchema}),ot.push(function(bt){qe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qe.idbdb.version/10)===ht._cfg.version?(qe.idbdb.deleteObjectStore("$meta"),delete qe._dbSchema.$meta,qe._storeNames=qe._storeNames.filter(function(wt){return wt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?P.resolve(ot.shift()(Ve.idbtrans)).then(ht):P.resolve()}().then(function(){hy(Je,tt)})):P.resolve();var qe,st,Ve,tt,ot,Je}).catch(Me)):(s(ce).forEach(function(rt){zp(Y,rt,ce[rt].primKey,ce[rt].indexes)}),_o(A,Y),void P.follow(function(){return A.on.populate.fire(we)}).catch(Me));var We,Xe})}function vf(A,M){hy(A._dbSchema,M),M.db.version%10!=0||M.objectStoreNames.contains("$meta")||M.db.createObjectStore("$meta").add(Math.ceil(M.db.version/10-1),"version");var Y=Ec(0,A.idbdb,M);_f(A,A._dbSchema,M);for(var re=0,ce=wf(Y,A._dbSchema).change;re<ce.length;re++){var we=function(Me){if(Me.change.length||Me.recreate)return console.warn("Unable to patch indexes of table ".concat(Me.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=M.objectStore(Me.name);Me.add.forEach(function(We){Fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Me.name,".").concat(We.src)),xf($e,We)})}(ce[re]);if(typeof we=="object")return we.value}}function wf(A,M){var Y,re={del:[],add:[],change:[]};for(Y in A)M[Y]||re.del.push(Y);for(Y in M){var ce=A[Y],we=M[Y];if(ce){var Me={name:Y,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ce.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ce.primKey.auto!==we.primKey.auto)Me.recreate=!0,re.change.push(Me);else{var $e=ce.idxByName,We=we.idxByName,Xe=void 0;for(Xe in $e)We[Xe]||Me.del.push(Xe);for(Xe in We){var rt=$e[Xe],qe=We[Xe];rt?rt.src!==qe.src&&Me.change.push(qe):Me.add.push(qe)}(0<Me.del.length||0<Me.add.length||0<Me.change.length)&&re.change.push(Me)}}else re.add.push([Y,we])}return re}function zp(A,M,Y,re){var ce=A.db.createObjectStore(M,Y.keyPath?{keyPath:Y.keyPath,autoIncrement:Y.auto}:{autoIncrement:Y.auto});return re.forEach(function(we){return xf(ce,we)}),ce}function hy(A,M){s(A).forEach(function(Y){M.db.objectStoreNames.contains(Y)||(Fe&&console.debug("Dexie: Creating missing table",Y),zp(M,Y,A[Y].primKey,A[Y].indexes))})}function xf(A,M){A.createIndex(M.name,M.keyPath,{unique:M.unique,multiEntry:M.multi})}function Ec(A,M,Y){var re={};return S(M.objectStoreNames,0).forEach(function(ce){for(var we=Y.objectStore(ce),Me=hs(gf(Xe=we.keyPath),Xe||"",!0,!1,!!we.autoIncrement,Xe&&typeof Xe!="string",!0),$e=[],We=0;We<we.indexNames.length;++We){var rt=we.index(we.indexNames[We]),Xe=rt.keyPath,rt=hs(rt.name,Xe,!!rt.unique,!!rt.multiEntry,!1,Xe&&typeof Xe!="string",!1);$e.push(rt)}re[ce]=xc(ce,Me,$e)}),re}function _f(A,M,Y){for(var re=Y.db.objectStoreNames,ce=0;ce<re.length;++ce){var we=re[ce],Me=Y.objectStore(we);A._hasGetAll="getAll"in Me;for(var $e=0;$e<Me.indexNames.length;++$e){var We=Me.indexNames[$e],Xe=Me.index(We).keyPath,rt=typeof Xe=="string"?Xe:"["+S(Xe).join("+")+"]";!M[we]||(Xe=M[we].idxByName[rt])&&(Xe.name=We,delete M[we].idxByName[rt],M[we].idxByName[We]=Xe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function py(A){return A.split(",").map(function(M,Y){var re=(M=M.trim()).replace(/([&*]|\+\+)/g,""),ce=/^\[/.test(re)?re.match(/^\[(.*)\]$/)[1].split("+"):re;return hs(re,ce||null,/\&/.test(M),/\*/.test(M),/\+\+/.test(M),o(ce),Y===0)})}var O1=(Sf.prototype._parseStoresSpec=function(A,M){s(A).forEach(function(Y){if(A[Y]!==null){var re=py(A[Y]),ce=re.shift();if(ce.unique=!0,ce.multi)throw new Ce.Schema("Primary key cannot be multi-valued");re.forEach(function(we){if(we.auto)throw new Ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new Ce.Schema("Index must have a name and cannot be an empty string")}),M[Y]=xc(Y,ce,re)}})},Sf.prototype.stores=function(Y){var M=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,Y):Y;var Y=M._versions,re={},ce={};return Y.forEach(function(we){l(re,we._cfg.storesSource),ce=we._cfg.dbschema={},we._parseStoresSpec(re,ce)}),M._dbSchema=ce,Ku(M,[M._allTables,M,M.Transaction.prototype]),bf(M,[M._allTables,M,M.Transaction.prototype,this._cfg.tables],s(ce),ce),M._storeNames=s(ce),this},Sf.prototype.upgrade=function(A){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Le,A),this},Sf);function Sf(){}function Up(A,M){var Y=A._dbNamesDB;return Y||(Y=A._dbNamesDB=new ps(ul,{addons:[],indexedDB:A,IDBKeyRange:M})).version(1).stores({dbnames:"name"}),Y.table("dbnames")}function Ef(A){return A&&typeof A.databases=="function"}function Hp(A){return Qt(function(){return ke.letThrough=!0,A()})}function qp(A){return!("from"in A)}var Na=function(A,M){if(!this){var Y=new Na;return A&&"d"in A&&l(Y,A),Y}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?M:A}:{d:0})};function Zu(A,M,Y){var re=Wn(M,Y);if(!isNaN(re)){if(0<re)throw RangeError();if(qp(A))return l(A,{from:M,to:Y,d:1});var ce=A.l,re=A.r;if(Wn(Y,A.from)<0)return ce?Zu(ce,M,Y):A.l={from:M,to:Y,d:1,l:null,r:null},gy(A);if(0<Wn(M,A.to))return re?Zu(re,M,Y):A.r={from:M,to:Y,d:1,l:null,r:null},gy(A);Wn(M,A.from)<0&&(A.from=M,A.l=null,A.d=re?re.d+1:1),0<Wn(Y,A.to)&&(A.to=Y,A.r=null,A.d=A.l?A.l.d+1:1),Y=!A.r,ce&&!A.l&&bl(A,ce),re&&Y&&bl(A,re)}}function bl(A,M){qp(M)||function Y(re,We){var we=We.from,Me=We.to,$e=We.l,We=We.r;Zu(re,we,Me),$e&&Y(re,$e),We&&Y(re,We)}(A,M)}function my(A,M){var Y=Cf(M),re=Y.next();if(re.done)return!1;for(var ce=re.value,we=Cf(A),Me=we.next(ce.from),$e=Me.value;!re.done&&!Me.done;){if(Wn($e.from,ce.to)<=0&&0<=Wn($e.to,ce.from))return!0;Wn(ce.from,$e.from)<0?ce=(re=Y.next($e.from)).value:$e=(Me=we.next(ce.from)).value}return!1}function Cf(A){var M=qp(A)?null:{s:0,n:A};return{next:function(Y){for(var re=0<arguments.length;M;)switch(M.s){case 0:if(M.s=1,re)for(;M.n.l&&Wn(Y,M.n.from)<0;)M={up:M,n:M.n.l,s:1};else for(;M.n.l;)M={up:M,n:M.n.l,s:1};case 1:if(M.s=2,!re||Wn(Y,M.n.to)<=0)return{value:M.n,done:!1};case 2:if(M.n.r){M.s=3,M={up:M,n:M.n.r,s:0};continue}case 3:M=M.up}return{done:!0}}}}function gy(A){var M,Y,re=(((M=A.r)===null||M===void 0?void 0:M.d)||0)-(((Y=A.l)===null||Y===void 0?void 0:Y.d)||0),ce=1<re?"r":re<-1?"l":"";ce&&(M=ce=="r"?"l":"r",Y=r({},A),re=A[ce],A.from=re.from,A.to=re.to,A[ce]=re[ce],Y[ce]=re[M],(A[M]=Y).d=Vp(Y)),A.d=Vp(A)}function Vp(Y){var M=Y.r,Y=Y.l;return(M?Y?Math.max(M.d,Y.d):M.d:Y?Y.d:0)+1}function kf(A,M){return s(M).forEach(function(Y){A[Y]?bl(A[Y],M[Y]):A[Y]=function re(ce){var we,Me,$e={};for(we in ce)h(ce,we)&&(Me=ce[we],$e[we]=!Me||typeof Me!="object"||G.has(Me.constructor)?Me:re(Me));return $e}(M[Y])}),A}function Gp(A,M){return A.all||M.all||Object.keys(A).some(function(Y){return M[Y]&&my(M[Y],A[Y])})}m(Na.prototype,((gi={add:function(A){return bl(this,A),this},addKey:function(A){return Zu(this,A,A),this},addKeys:function(A){var M=this;return A.forEach(function(Y){return Zu(M,Y,Y)}),this},hasKey:function(A){var M=Cf(this).next(A).value;return M&&Wn(M.from,A)<=0&&0<=Wn(M.to,A)}})[ie]=function(){return Cf(this)},gi));var vl={},Kp={},Wp=!1;function Tf(A){kf(Kp,A),Wp||(Wp=!0,setTimeout(function(){Wp=!1,Zp(Kp,!(Kp={}))},0))}function Zp(A,M){M===void 0&&(M=!1);var Y=new Set;if(A.all)for(var re=0,ce=Object.values(vl);re<ce.length;re++)yy(Me=ce[re],A,Y,M);else for(var we in A){var Me,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(we);$e&&(we=$e[1],$e=$e[2],(Me=vl["idb://".concat(we,"/").concat($e)])&&yy(Me,A,Y,M))}Y.forEach(function(We){return We()})}function yy(A,M,Y,re){for(var ce=[],we=0,Me=Object.entries(A.queries.query);we<Me.length;we++){for(var $e=Me[we],We=$e[0],Xe=[],rt=0,qe=$e[1];rt<qe.length;rt++){var st=qe[rt];Gp(M,st.obsSet)?st.subscribers.forEach(function(Je){return Y.add(Je)}):re&&Xe.push(st)}re&&ce.push([We,Xe])}if(re)for(var Ve=0,tt=ce;Ve<tt.length;Ve++){var ot=tt[Ve],We=ot[0],Xe=ot[1];A.queries.query[We]=Xe}}function D1(A){var M=A._state,Y=A._deps.indexedDB;if(M.isBeingOpened||A.idbdb)return M.dbReadyPromise.then(function(){return M.dbOpenError?Wr(M.dbOpenError):A});M.isBeingOpened=!0,M.dbOpenError=null,M.openComplete=!1;var re=M.openCanceller,ce=Math.round(10*A.verno),we=!1;function Me(){if(M.openCanceller!==re)throw new Ce.DatabaseClosed("db.open() was cancelled")}function $e(){return new P(function(st,Ve){if(Me(),!Y)throw new Ce.MissingAPI;var tt=A.name,ot=M.autoSchema||!ce?Y.open(tt):Y.open(tt,ce);if(!ot)throw new Ce.MissingAPI;ot.onerror=Gi(Ve),ot.onblocked=Re(A._fireOnBlocked),ot.onupgradeneeded=Re(function(Je){var ht;rt=ot.transaction,M.autoSchema&&!A._options.allowEmptyDB?(ot.onerror=ml,rt.abort(),ot.result.close(),(ht=Y.deleteDatabase(tt)).onsuccess=ht.onerror=Re(function(){Ve(new Ce.NoSuchDatabase("Database ".concat(tt," doesnt exist")))})):(rt.onerror=Gi(Ve),Je=Je.oldVersion>Math.pow(2,62)?0:Je.oldVersion,qe=Je<1,A.idbdb=ot.result,we&&vf(A,rt),Wu(A,Je/10,rt,Ve))},Ve),ot.onsuccess=Re(function(){rt=null;var Je,ht,bt,wt,Tt,Ht=A.idbdb=ot.result,Yt=S(Ht.objectStoreNames);if(0<Yt.length)try{var Bt=Ht.transaction((wt=Yt).length===1?wt[0]:wt,"readonly");if(M.autoSchema)ht=Ht,bt=Bt,(Je=A).verno=ht.version/10,bt=Je._dbSchema=Ec(0,ht,bt),Je._storeNames=S(ht.objectStoreNames,0),bf(Je,[Je._allTables],s(bt),bt);else if(_f(A,A._dbSchema,Bt),((Tt=wf(Ec(0,(Tt=A).idbdb,Bt),Tt._dbSchema)).add.length||Tt.change.some(function(Gt){return Gt.add.length||Gt.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ht.close(),ce=Ht.version+1,we=!0,st($e());_o(A,Bt)}catch{}Bs.push(A),Ht.onversionchange=Re(function(Gt){M.vcFired=!0,A.on("versionchange").fire(Gt)}),Ht.onclose=Re(function(Gt){A.on("close").fire(Gt)}),qe&&(Tt=A._deps,Bt=tt,Ht=Tt.indexedDB,Tt=Tt.IDBKeyRange,Ef(Ht)||Bt===ul||Up(Ht,Tt).put({name:Bt}).catch(Le)),st()},Ve)}).catch(function(st){switch(st==null?void 0:st.name){case"UnknownError":if(0<M.PR1398_maxLoop)return M.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ce)return ce=0,$e()}return P.reject(st)})}var We,Xe=M.dbReadyResolve,rt=null,qe=!1;return P.race([re,(typeof navigator>"u"?P.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(st){function Ve(){return indexedDB.databases().finally(st)}We=setInterval(Ve,100),Ve()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then($e)]).then(function(){return Me(),M.onReadyBeingFired=[],P.resolve(Hp(function(){return A.on.ready.fire(A.vip)})).then(function st(){if(0<M.onReadyBeingFired.length){var Ve=M.onReadyBeingFired.reduce(xe,Le);return M.onReadyBeingFired=[],P.resolve(Hp(function(){return Ve(A.vip)})).then(st)}})}).finally(function(){M.openCanceller===re&&(M.onReadyBeingFired=null,M.isBeingOpened=!1)}).catch(function(st){M.dbOpenError=st;try{rt&&rt.abort()}catch{}return re===M.openCanceller&&A._close(),Wr(st)}).finally(function(){M.openComplete=!0,Xe()}).then(function(){var st;return qe&&(st={},A.tables.forEach(function(Ve){Ve.schema.indexes.forEach(function(tt){tt.name&&(st["idb://".concat(A.name,"/").concat(Ve.name,"/").concat(tt.name)]=new Na(-1/0,[[[]]]))}),st["idb://".concat(A.name,"/").concat(Ve.name,"/")]=st["idb://".concat(A.name,"/").concat(Ve.name,"/:dels")]=new Na(-1/0,[[[]]])}),Aa(wc).fire(st),Zp(st,!0)),A})}function Yu(A){function M(we){return A.next(we)}var Y=ce(M),re=ce(function(we){return A.throw(we)});function ce(we){return function(We){var $e=we(We),We=$e.value;return $e.done?We:We&&typeof We.then=="function"?We.then(Y,re):o(We)?Promise.all(We).then(Y,re):Y(We)}}return ce(M)()}function So(A,M,Y){for(var re=o(A)?A.slice():[A],ce=0;ce<Y;++ce)re.push(M);return re}var M1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(M){var Y=A.table(M),re=Y.schema,ce={},we=[];function Me(qe,st,Ve){var tt=ca(qe),ot=ce[tt]=ce[tt]||[],Je=qe==null?0:typeof qe=="string"?1:qe.length,ht=0<st,ht=r(r({},Ve),{name:ht?"".concat(tt,"(virtual-from:").concat(Ve.name,")"):Ve.name,lowLevelIndex:Ve,isVirtual:ht,keyTail:st,keyLength:Je,extractKey:Sc(qe),unique:!ht&&Ve.unique});return ot.push(ht),ht.isPrimaryKey||we.push(ht),1<Je&&Me(Je===2?qe[0]:qe.slice(0,Je-1),st+1,Ve),ot.sort(function(bt,wt){return bt.keyTail-wt.keyTail}),ht}M=Me(re.primaryKey.keyPath,0,re.primaryKey),ce[":id"]=[M];for(var $e=0,We=re.indexes;$e<We.length;$e++){var Xe=We[$e];Me(Xe.keyPath,0,Xe)}function rt(qe){var st,Ve=qe.query.index;return Ve.isVirtual?r(r({},qe),{query:{index:Ve.lowLevelIndex,range:(st=qe.query.range,Ve=Ve.keyTail,{type:st.type===1?2:st.type,lower:So(st.lower,st.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ve),lowerOpen:!0,upper:So(st.upper,st.upperOpen?A.MIN_KEY:A.MAX_KEY,Ve),upperOpen:!0})}}):qe}return r(r({},Y),{schema:r(r({},re),{primaryKey:M,indexes:we,getIndexByKeyPath:function(qe){return(qe=ce[ca(qe)])&&qe[0]}}),count:function(qe){return Y.count(rt(qe))},query:function(qe){return Y.query(rt(qe))},openCursor:function(qe){var st=qe.query.index,Ve=st.keyTail,tt=st.isVirtual,ot=st.keyLength;return tt?Y.openCursor(rt(qe)).then(function(ht){return ht&&Je(ht)}):Y.openCursor(qe);function Je(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue(So(bt,qe.reverse?A.MAX_KEY:A.MIN_KEY,Ve)):qe.unique?ht.continue(ht.key.slice(0,ot).concat(qe.reverse?A.MIN_KEY:A.MAX_KEY,Ve)):ht.continue()}},continuePrimaryKey:{value:function(bt,wt){ht.continuePrimaryKey(So(bt,A.MAX_KEY,Ve),wt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function Af(A,M,Y,re){return Y=Y||{},re=re||"",s(A).forEach(function(ce){var we,Me,$e;h(M,ce)?(we=A[ce],Me=M[ce],typeof we=="object"&&typeof Me=="object"&&we&&Me?($e=ue(we))!==ue(Me)?Y[re+ce]=M[ce]:$e==="Object"?Af(we,Me,Y,re+ce+"."):we!==Me&&(Y[re+ce]=M[ce]):we!==Me&&(Y[re+ce]=M[ce])):Y[re+ce]=void 0}),s(M).forEach(function(ce){h(A,ce)||(Y[re+ce]=M[ce])}),Y}function Nf(A,M){return M.type==="delete"?M.keys:M.keys||M.values.map(A.extractKey)}var by={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(M){var Y=A.table(M),re=Y.schema.primaryKey;return r(r({},Y),{mutate:function(ce){var we=ke.trans,Me=we.table(M).hook,$e=Me.deleting,We=Me.creating,Xe=Me.updating;switch(ce.type){case"add":if(We.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"put":if(We.fire===Le&&Xe.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"delete":if($e.fire===Le)break;return we._promise("readwrite",function(){return rt(ce)},!0);case"deleteRange":if($e.fire===Le)break;return we._promise("readwrite",function(){return function qe(st,Ve,tt){return Y.query({trans:st,values:!1,query:{index:re,range:Ve},limit:tt}).then(function(ot){var Je=ot.result;return rt({type:"delete",keys:Je,trans:st}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Je.length<tt?{failures:[],numFailures:0,lastResult:void 0}:qe(st,r(r({},Ve),{lower:Je[Je.length-1],lowerOpen:!0}),tt)})})}(ce.trans,ce.range,1e4)},!0)}return Y.mutate(ce);function rt(qe){var st,Ve,tt,ot=ke.trans,Je=qe.keys||Nf(re,qe);if(!Je)throw new Error("Keys missing");return(qe=qe.type==="add"||qe.type==="put"?r(r({},qe),{keys:Je}):r({},qe)).type!=="delete"&&(qe.values=a([],qe.values)),qe.keys&&(qe.keys=a([],qe.keys)),st=Y,tt=Je,((Ve=qe).type==="add"?Promise.resolve([]):st.getMany({trans:Ve.trans,keys:tt,cache:"immutable"})).then(function(ht){var bt=Je.map(function(wt,Tt){var Ht,Yt,Bt,Gt=ht[Tt],Xt={onerror:null,onsuccess:null};return qe.type==="delete"?$e.fire.call(Xt,wt,Gt,ot):qe.type==="add"||Gt===void 0?(Ht=We.fire.call(Xt,wt,qe.values[Tt],ot),wt==null&&Ht!=null&&(qe.keys[Tt]=wt=Ht,re.outbound||R(qe.values[Tt],re.keyPath,wt))):(Ht=Af(Gt,qe.values[Tt]),(Yt=Xe.fire.call(Xt,Ht,wt,Gt,ot))&&(Bt=qe.values[Tt],Object.keys(Yt).forEach(function(zt){h(Bt,zt)?Bt[zt]=Yt[zt]:R(Bt,zt,Yt[zt])}))),Xt});return Y.mutate(qe).then(function(wt){for(var Tt=wt.failures,Ht=wt.results,Yt=wt.numFailures,wt=wt.lastResult,Bt=0;Bt<Je.length;++Bt){var Gt=(Ht||Je)[Bt],Xt=bt[Bt];Gt==null?Xt.onerror&&Xt.onerror(Tt[Bt]):Xt.onsuccess&&Xt.onsuccess(qe.type==="put"&&ht[Bt]?qe.values[Bt]:Gt)}return{failures:Tt,results:Ht,numFailures:Yt,lastResult:wt}}).catch(function(wt){return bt.forEach(function(Tt){return Tt.onerror&&Tt.onerror(wt)}),Promise.reject(wt)})})}}})}})}};function Yp(A,M,Y){try{if(!M||M.keys.length<A.length)return null;for(var re=[],ce=0,we=0;ce<M.keys.length&&we<A.length;++ce)Wn(M.keys[ce],A[we])===0&&(re.push(Y?Z(M.values[ce]):M.values[ce]),++we);return re.length===A.length?re:null}catch{return null}}var vy={stack:"dbcore",level:-1,create:function(A){return{table:function(M){var Y=A.table(M);return r(r({},Y),{getMany:function(re){if(!re.cache)return Y.getMany(re);var ce=Yp(re.keys,re.trans._cache,re.cache==="clone");return ce?P.resolve(ce):Y.getMany(re).then(function(we){return re.trans._cache={keys:re.keys,values:re.cache==="clone"?Z(we):we},we})},mutate:function(re){return re.type!=="add"&&(re.trans._cache=null),Y.mutate(re)}})}}}};function wl(A,M){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!M.schema.primaryKey.outbound}function wy(A,M){switch(A){case"query":return M.values&&!M.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var P1={stack:"dbcore",level:0,name:"Observability",create:function(A){var M=A.schema.name,Y=new Na(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(re,ce,we){if(ke.subscr&&ce!=="readonly")throw new Ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return A.transaction(re,ce,we)},table:function(re){var ce=A.table(re),we=ce.schema,Me=we.primaryKey,qe=we.indexes,$e=Me.extractKey,We=Me.outbound,Xe=Me.autoIncrement&&qe.filter(function(Ve){return Ve.compound&&Ve.keyPath.includes(Me.keyPath)}),rt=r(r({},ce),{mutate:function(Ve){function tt(zt){return zt="idb://".concat(M,"/").concat(re,"/").concat(zt),wt[zt]||(wt[zt]=new Na)}var ot,Je,ht,bt=Ve.trans,wt=Ve.mutatedParts||(Ve.mutatedParts={}),Tt=tt(""),Ht=tt(":dels"),Yt=Ve.type,Xt=Ve.type==="deleteRange"?[Ve.range]:Ve.type==="delete"?[Ve.keys]:Ve.values.length<50?[Nf(Me,Ve).filter(function(zt){return zt}),Ve.values]:[],Bt=Xt[0],Gt=Xt[1],Xt=Ve.trans._cache;return o(Bt)?(Tt.addKeys(Bt),(Xt=Yt==="delete"||Bt.length===Gt.length?Yp(Bt,Xt):null)||Ht.addKeys(Bt),(Xt||Gt)&&(ot=tt,Je=Xt,ht=Gt,we.indexes.forEach(function(zt){var nn=ot(zt.name||"");function pn(Nn){return Nn!=null?zt.extractKey(Nn):null}function gn(Nn){return zt.multiEntry&&o(Nn)?Nn.forEach(function(Va){return nn.addKey(Va)}):nn.addKey(Nn)}(Je||ht).forEach(function(Nn,aa){var _n=Je&&pn(Je[aa]),aa=ht&&pn(ht[aa]);Wn(_n,aa)!==0&&(_n!=null&&gn(_n),aa!=null&&gn(aa))})}))):Bt?(Gt={from:(Gt=Bt.lower)!==null&&Gt!==void 0?Gt:A.MIN_KEY,to:(Gt=Bt.upper)!==null&&Gt!==void 0?Gt:A.MAX_KEY},Ht.add(Gt),Tt.add(Gt)):(Tt.add(Y),Ht.add(Y),we.indexes.forEach(function(zt){return tt(zt.name).add(Y)})),ce.mutate(Ve).then(function(zt){return!Bt||Ve.type!=="add"&&Ve.type!=="put"||(Tt.addKeys(zt.results),Xe&&Xe.forEach(function(nn){for(var pn=Ve.values.map(function(_n){return nn.extractKey(_n)}),gn=nn.keyPath.findIndex(function(_n){return _n===Me.keyPath}),Nn=0,Va=zt.results.length;Nn<Va;++Nn)pn[Nn][gn]=zt.results[Nn];tt(nn.name).addKeys(pn)})),bt.mutatedParts=kf(bt.mutatedParts||{},wt),zt})}}),qe=function(tt){var ot=tt.query,tt=ot.index,ot=ot.range;return[tt,new Na((tt=ot.lower)!==null&&tt!==void 0?tt:A.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:A.MAX_KEY)]},st={get:function(Ve){return[Me,new Na(Ve.key)]},getMany:function(Ve){return[Me,new Na().addKeys(Ve.keys)]},count:qe,query:qe,openCursor:qe};return s(st).forEach(function(Ve){rt[Ve]=function(tt){var ot=ke.subscr,Je=!!ot,ht=wl(ke,ce)&&wy(Ve,tt)?tt.obsSet={}:ot;if(Je){var bt=function(Gt){return Gt="idb://".concat(M,"/").concat(re,"/").concat(Gt),ht[Gt]||(ht[Gt]=new Na)},wt=bt(""),Tt=bt(":dels"),ot=st[Ve](tt),Je=ot[0],ot=ot[1];if((Ve==="query"&&Je.isPrimaryKey&&!tt.values?Tt:bt(Je.name||"")).add(ot),!Je.isPrimaryKey){if(Ve!=="count"){var Ht=Ve==="query"&&We&&tt.values&&ce.query(r(r({},tt),{values:!1}));return ce[Ve].apply(this,arguments).then(function(Gt){if(Ve==="query"){if(We&&tt.values)return Ht.then(function(pn){return pn=pn.result,wt.addKeys(pn),Gt});var Xt=tt.values?Gt.result.map($e):Gt.result;(tt.values?wt:Tt).addKeys(Xt)}else if(Ve==="openCursor"){var zt=Gt,nn=tt.values;return zt&&Object.create(zt,{key:{get:function(){return Tt.addKey(zt.primaryKey),zt.key}},primaryKey:{get:function(){var pn=zt.primaryKey;return Tt.addKey(pn),pn}},value:{get:function(){return nn&&wt.addKey(zt.primaryKey),zt.value}}})}return Gt})}Tt.add(Y)}}return ce[Ve].apply(this,arguments)}}),rt}})}};function xy(A,M,Y){if(Y.numFailures===0)return M;if(M.type==="deleteRange")return null;var re=M.keys?M.keys.length:"values"in M&&M.values?M.values.length:1;return Y.numFailures===re?null:(M=r({},M),o(M.keys)&&(M.keys=M.keys.filter(function(ce,we){return!(we in Y.failures)})),"values"in M&&o(M.values)&&(M.values=M.values.filter(function(ce,we){return!(we in Y.failures)})),M)}function Rf(A,M){return Y=A,((re=M).lower===void 0||(re.lowerOpen?0<Wn(Y,re.lower):0<=Wn(Y,re.lower)))&&(A=A,(M=M).upper===void 0||(M.upperOpen?Wn(A,M.upper)<0:Wn(A,M.upper)<=0));var Y,re}function Xp(A,M,st,re,ce,we){if(!st||st.length===0)return A;var Me=M.query.index,$e=Me.multiEntry,We=M.query.range,Xe=re.schema.primaryKey.extractKey,rt=Me.extractKey,qe=(Me.lowLevelIndex||Me).extractKey,st=st.reduce(function(Ve,tt){var ot=Ve,Je=[];if(tt.type==="add"||tt.type==="put")for(var ht=new Na,bt=tt.values.length-1;0<=bt;--bt){var wt,Tt=tt.values[bt],Ht=Xe(Tt);ht.hasKey(Ht)||(wt=rt(Tt),($e&&o(wt)?wt.some(function(zt){return Rf(zt,We)}):Rf(wt,We))&&(ht.addKey(Ht),Je.push(Tt)))}switch(tt.type){case"add":var Yt=new Na().addKeys(M.values?Ve.map(function(nn){return Xe(nn)}):Ve),ot=Ve.concat(M.values?Je.filter(function(nn){return nn=Xe(nn),!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}):Je.map(function(nn){return Xe(nn)}).filter(function(nn){return!Yt.hasKey(nn)&&(Yt.addKey(nn),!0)}));break;case"put":var Bt=new Na().addKeys(tt.values.map(function(nn){return Xe(nn)}));ot=Ve.filter(function(nn){return!Bt.hasKey(M.values?Xe(nn):nn)}).concat(M.values?Je:Je.map(function(nn){return Xe(nn)}));break;case"delete":var Gt=new Na().addKeys(tt.keys);ot=Ve.filter(function(nn){return!Gt.hasKey(M.values?Xe(nn):nn)});break;case"deleteRange":var Xt=tt.range;ot=Ve.filter(function(nn){return!Rf(Xe(nn),Xt)})}return ot},A);return st===A?A:(st.sort(function(Ve,tt){return Wn(qe(Ve),qe(tt))||Wn(Xe(Ve),Xe(tt))}),M.limit&&M.limit<1/0&&(st.length>M.limit?st.length=M.limit:A.length===M.limit&&st.length<M.limit&&(ce.dirty=!0)),we?Object.freeze(st):st)}function Cc(A,M){return Wn(A.lower,M.lower)===0&&Wn(A.upper,M.upper)===0&&!!A.lowerOpen==!!M.lowerOpen&&!!A.upperOpen==!!M.upperOpen}function Xu(A,M){return function(Y,re,ce,we){if(Y===void 0)return re!==void 0?-1:0;if(re===void 0)return 1;if((re=Wn(Y,re))===0){if(ce&&we)return 0;if(ce)return 1;if(we)return-1}return re}(A.lower,M.lower,A.lowerOpen,M.lowerOpen)<=0&&0<=function(Y,re,ce,we){if(Y===void 0)return re!==void 0?1:0;if(re===void 0)return-1;if((re=Wn(Y,re))===0){if(ce&&we)return 0;if(ce)return-1;if(we)return 1}return re}(A.upper,M.upper,A.upperOpen,M.upperOpen)}function F1(A,M,Y,re){A.subscribers.add(Y),re.addEventListener("abort",function(){var ce,we;A.subscribers.delete(Y),A.subscribers.size===0&&(ce=A,we=M,setTimeout(function(){ce.subscribers.size===0&&X(we,ce)},3e3))})}var If={stack:"dbcore",level:0,name:"Cache",create:function(A){var M=A.schema.name;return r(r({},A),{transaction:function(Y,re,ce){var we,Me,$e=A.transaction(Y,re,ce);return re==="readwrite"&&(Me=(we=new AbortController).signal,ce=function(We){return function(){if(we.abort(),re==="readwrite"){for(var Xe=new Set,rt=0,qe=Y;rt<qe.length;rt++){var st=qe[rt],Ve=vl["idb://".concat(M,"/").concat(st)];if(Ve){var tt=A.table(st),ot=Ve.optimisticOps.filter(function(nn){return nn.trans===$e});if($e._explicit&&We&&$e.mutatedParts)for(var Je=0,ht=Object.values(Ve.queries.query);Je<ht.length;Je++)for(var bt=0,wt=(Yt=ht[Je]).slice();bt<wt.length;bt++)Gp((Bt=wt[bt]).obsSet,$e.mutatedParts)&&(X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)}));else if(0<ot.length){Ve.optimisticOps=Ve.optimisticOps.filter(function(nn){return nn.trans!==$e});for(var Tt=0,Ht=Object.values(Ve.queries.query);Tt<Ht.length;Tt++)for(var Yt,Bt,Gt,Xt=0,zt=(Yt=Ht[Tt]).slice();Xt<zt.length;Xt++)(Bt=zt[Xt]).res!=null&&$e.mutatedParts&&(We&&!Bt.dirty?(Gt=Object.isFrozen(Bt.res),Gt=Xp(Bt.res,Bt.req,ot,tt,Bt,Gt),Bt.dirty?(X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)})):Gt!==Bt.res&&(Bt.res=Gt,Bt.promise=P.resolve({result:Gt}))):(Bt.dirty&&X(Yt,Bt),Bt.subscribers.forEach(function(nn){return Xe.add(nn)})))}}}Xe.forEach(function(nn){return nn()})}}},$e.addEventListener("abort",ce(!1),{signal:Me}),$e.addEventListener("error",ce(!1),{signal:Me}),$e.addEventListener("complete",ce(!0),{signal:Me})),$e},table:function(Y){var re=A.table(Y),ce=re.schema.primaryKey;return r(r({},re),{mutate:function(we){var Me=ke.trans;if(ce.outbound||Me.db._options.cache==="disabled"||Me.explicit||Me.idbtrans.mode!=="readwrite")return re.mutate(we);var $e=vl["idb://".concat(M,"/").concat(Y)];return $e?(Me=re.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||Nf(ce,we).some(function(We){return We==null}))?($e.optimisticOps.push(we),we.mutatedParts&&Tf(we.mutatedParts),Me.then(function(We){0<We.numFailures&&(X($e.optimisticOps,we),(We=xy(0,we,We))&&$e.optimisticOps.push(We),we.mutatedParts&&Tf(we.mutatedParts))}),Me.catch(function(){X($e.optimisticOps,we),we.mutatedParts&&Tf(we.mutatedParts)})):Me.then(function(We){var Xe=xy(0,r(r({},we),{values:we.values.map(function(rt,qe){var st;return We.failures[qe]?rt:(rt=(st=ce.keyPath)!==null&&st!==void 0&&st.includes(".")?Z(rt):r({},rt),R(rt,ce.keyPath,We.results[qe]),rt)})}),We);$e.optimisticOps.push(Xe),queueMicrotask(function(){return we.mutatedParts&&Tf(we.mutatedParts)})}),Me):re.mutate(we)},query:function(we){if(!wl(ke,re)||!wy("query",we))return re.query(we);var Me=((Xe=ke.trans)===null||Xe===void 0?void 0:Xe.db._options.cache)==="immutable",qe=ke,$e=qe.requery,We=qe.signal,Xe=function(tt,ot,Je,ht){var bt=vl["idb://".concat(tt,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Je]))return[null,!1,bt,null];var wt=ot[(ht.query?ht.query.index.name:null)||""];if(!wt)return[null,!1,bt,null];switch(Je){case"query":var Tt=wt.find(function(Ht){return Ht.req.limit===ht.limit&&Ht.req.values===ht.values&&Cc(Ht.req.query.range,ht.query.range)});return Tt?[Tt,!0,bt,wt]:[wt.find(function(Ht){return("limit"in Ht.req?Ht.req.limit:1/0)>=ht.limit&&(!ht.values||Ht.req.values)&&Xu(Ht.req.query.range,ht.query.range)}),!1,bt,wt];case"count":return Tt=wt.find(function(Ht){return Cc(Ht.req.query.range,ht.query.range)}),[Tt,!!Tt,bt,wt]}}(M,Y,"query",we),rt=Xe[0],qe=Xe[1],st=Xe[2],Ve=Xe[3];return rt&&qe?rt.obsSet=we.obsSet:(qe=re.query(we).then(function(tt){var ot=tt.result;if(rt&&(rt.res=ot),Me){for(var Je=0,ht=ot.length;Je<ht;++Je)Object.freeze(ot[Je]);Object.freeze(ot)}else tt.result=Z(ot);return tt}).catch(function(tt){return Ve&&rt&&X(Ve,rt),Promise.reject(tt)}),rt={obsSet:we.obsSet,promise:qe,subscribers:new Set,type:"query",req:we,dirty:!1},Ve?Ve.push(rt):(Ve=[rt],(st=st||(vl["idb://".concat(M,"/").concat(Y)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=Ve)),F1(rt,Ve,$e,We),rt.promise.then(function(tt){return{result:Xp(tt.result,we,st==null?void 0:st.optimisticOps,re,rt,Me)}})}})}})}};function Ju(A,M){return new Proxy(A,{get:function(Y,re,ce){return re==="db"?M:Reflect.get(Y,re,ce)}})}var ps=(Br.prototype.version=function(A){if(isNaN(A)||A<.1)throw new Ce.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new Ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var M=this._versions,Y=M.filter(function(re){return re._cfg.version===A})[0];return Y||(Y=new this.Version(A),M.push(Y),M.sort(Bp),Y.stores({}),this._state.autoSchema=!1,Y)},Br.prototype._whenReady=function(A){var M=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?A():new P(function(Y,re){if(M._state.openComplete)return re(new Ce.DatabaseClosed(M._state.dbOpenError));if(!M._state.isBeingOpened){if(!M._state.autoOpen)return void re(new Ce.DatabaseClosed);M.open().catch(Le)}M._state.dbReadyPromise.then(Y,re)}).then(A)},Br.prototype.use=function(A){var M=A.stack,Y=A.create,re=A.level,ce=A.name;return ce&&this.unuse({stack:M,name:ce}),A=this._middlewares[M]||(this._middlewares[M]=[]),A.push({stack:M,create:Y,level:re??10,name:ce}),A.sort(function(we,Me){return we.level-Me.level}),this},Br.prototype.unuse=function(A){var M=A.stack,Y=A.name,re=A.create;return M&&this._middlewares[M]&&(this._middlewares[M]=this._middlewares[M].filter(function(ce){return re?ce.create!==re:!!Y&&ce.name!==Y})),this},Br.prototype.open=function(){var A=this;return go(be,function(){return D1(A)})},Br.prototype._close=function(){var A=this._state,M=Bs.indexOf(this);if(0<=M&&Bs.splice(M,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new P(function(Y){A.dbReadyResolve=Y}),A.openCanceller=new P(function(Y,re){A.cancelOpen=re}))},Br.prototype.close=function(Y){var M=(Y===void 0?{disableAutoOpen:!0}:Y).disableAutoOpen,Y=this._state;M?(Y.isBeingOpened&&Y.cancelOpen(new Ce.DatabaseClosed),this._close(),Y.autoOpen=!1,Y.dbOpenError=new Ce.DatabaseClosed):(this._close(),Y.autoOpen=this._options.autoOpen||Y.isBeingOpened,Y.openComplete=!1,Y.dbOpenError=null)},Br.prototype.delete=function(A){var M=this;A===void 0&&(A={disableAutoOpen:!0});var Y=0<arguments.length&&typeof arguments[0]!="object",re=this._state;return new P(function(ce,we){function Me(){M.close(A);var $e=M._deps.indexedDB.deleteDatabase(M.name);$e.onsuccess=Re(function(){var We,Xe,rt;We=M._deps,Xe=M.name,rt=We.indexedDB,We=We.IDBKeyRange,Ef(rt)||Xe===ul||Up(rt,We).delete(Xe).catch(Le),ce()}),$e.onerror=Gi(we),$e.onblocked=M._fireOnBlocked}if(Y)throw new Ce.InvalidArgument("Invalid closeOptions argument to db.delete()");re.isBeingOpened?re.dbReadyPromise.then(Me):Me()})},Br.prototype.backendDB=function(){return this.idbdb},Br.prototype.isOpen=function(){return this.idbdb!==null},Br.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},Br.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Br.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Br.prototype,"tables",{get:function(){var A=this;return s(this._allTables).map(function(M){return A._allTables[M]})},enumerable:!1,configurable:!0}),Br.prototype.transaction=function(){var A=(function(M,Y,re){var ce=arguments.length;if(ce<2)throw new Ce.InvalidArgument("Too few arguments");for(var we=new Array(ce-1);--ce;)we[ce-1]=arguments[ce];return re=we.pop(),[M,$(we),re]}).apply(this,arguments);return this._transaction.apply(this,A)},Br.prototype._transaction=function(A,M,Y){var re=this,ce=ke.trans;ce&&ce.db===this&&A.indexOf("!")===-1||(ce=null);var we,Me,$e=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(Me=M.map(function(Xe){if(Xe=Xe instanceof re.Table?Xe.name:Xe,typeof Xe!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Xe}),A=="r"||A===Vi)we=Vi;else{if(A!="rw"&&A!=Vu)throw new Ce.InvalidArgument("Invalid transaction mode: "+A);we=Vu}if(ce){if(ce.mode===Vi&&we===Vu){if(!$e)throw new Ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ce=null}ce&&Me.forEach(function(Xe){if(ce&&ce.storeNames.indexOf(Xe)===-1){if(!$e)throw new Ce.SubTransaction("Table "+Xe+" not included in parent transaction.");ce=null}}),$e&&ce&&!ce.active&&(ce=null)}}catch(Xe){return ce?ce._promise(null,function(rt,qe){qe(Xe)}):Wr(Xe)}var We=(function Xe(rt,qe,st,Ve,tt){return P.resolve().then(function(){var ot=ke.transless||ke,Je=rt._createTransaction(qe,st,rt._dbSchema,Ve);if(Je.explicit=!0,ot={trans:Je,transless:ot},Ve)Je.idbtrans=Ve.idbtrans;else try{Je.create(),Je.idbtrans._explicit=!0,rt._state.PR1398_maxLoop=3}catch(wt){return wt.name===Ae.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Xe(rt,qe,st,null,tt)})):Wr(wt)}var ht,bt=J(tt);return bt&&An(),ot=P.follow(function(){var wt;(ht=tt.call(Je,Je))&&(bt?(wt=Kn.bind(null,null),ht.then(wt,wt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=Yu(ht)))},ot),(ht&&typeof ht.then=="function"?P.resolve(ht).then(function(wt){return Je.active?wt:Wr(new Ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(wt){return Ve&&Je._resolve(),Je._completion.then(function(){return wt})}).catch(function(wt){return Je._reject(wt),Wr(wt)})})}).bind(null,this,we,Me,ce,Y);return ce?ce._promise(we,We,"lock"):ke.trans?go(ke.transless,function(){return re._whenReady(We)}):this._whenReady(We)},Br.prototype.table=function(A){if(!h(this._allTables,A))throw new Ce.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},Br);function Br(A,M){var Y=this;this._middlewares={},this.verno=0;var re=Br.dependencies;this._options=M=r({addons:Br.addons,autoOpen:!0,indexedDB:re.indexedDB,IDBKeyRange:re.IDBKeyRange,cache:"cloned"},M),this._deps={indexedDB:M.indexedDB,IDBKeyRange:M.IDBKeyRange},re=M.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ce,we,Me,$e,We,Xe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:M.autoOpen};Xe.dbReadyPromise=new P(function(qe){Xe.dbReadyResolve=qe}),Xe.openCanceller=new P(function(qe,st){Xe.cancelOpen=st}),this._state=Xe,this.name=A,this.on=xo(this,"populate","blocked","versionchange","close",{ready:[xe,Le]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(qe){return function(st,Ve){Br.vip(function(){var tt,ot=Y._state;ot.openComplete?(ot.dbOpenError||P.resolve().then(st),Ve&&qe(st)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(st),Ve&&qe(st)):(qe(st),tt=Y,Ve||qe(function Je(){tt.on.ready.unsubscribe(st),tt.on.ready.unsubscribe(Je)}))})}}),this.Collection=(ce=this,pc(bc.prototype,function(ht,Je){this.db=ce;var Ve=dl,tt=null;if(Je)try{Ve=Je()}catch(bt){tt=bt}var ot=ht._ctx,Je=ot.table,ht=Je.hook.reading.fire;this._ctx={table:Je,index:ot.index,isPrimKey:!ot.index||Je.schema.primKey.keyPath&&ot.index===Je.schema.primKey.name,range:Ve,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:tt,or:ot.or,valueMapper:ht!==Ie?ht:null}})),this.Table=(we=this,pc(Dp.prototype,function(qe,st,Ve){this.db=we,this._tx=Ve,this.name=qe,this.schema=st,this.hook=we._allTables[qe]?we._allTables[qe].hook:xo(null,{creating:[Te,Le],reading:[z,Ie],updating:[se,Le],deleting:[de,Le]})})),this.Transaction=(Me=this,pc($p.prototype,function(qe,st,Ve,tt,ot){var Je=this;this.db=Me,this.mode=qe,this.storeNames=st,this.schema=Ve,this.chromeTransactionDurability=tt,this.idbtrans=null,this.on=xo(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(ht,bt){Je._resolve=ht,Je._reject=bt}),this._completion.then(function(){Je.active=!1,Je.on.complete.fire()},function(ht){var bt=Je.active;return Je.active=!1,Je.on.error.fire(ht),Je.parent?Je.parent._reject(ht):bt&&Je.idbtrans&&Je.idbtrans.abort(),Wr(ht)})})),this.Version=($e=this,pc(O1.prototype,function(qe){this.db=$e,this._cfg={version:qe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,pc(pl.prototype,function(qe,st,Ve){if(this.db=We,this._ctx={table:qe,index:st===":id"?null:st,or:Ve},this._cmp=this._ascending=Wn,this._descending=function(tt,ot){return Wn(ot,tt)},this._max=function(tt,ot){return 0<Wn(tt,ot)?tt:ot},this._min=function(tt,ot){return Wn(tt,ot)<0?tt:ot},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ce.MissingAPI})),this.on("versionchange",function(qe){0<qe.newVersion?console.warn("Another connection wants to upgrade database '".concat(Y.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Y.name,"'. Closing db now to resume the delete request.")),Y.close({disableAutoOpen:!1})}),this.on("blocked",function(qe){!qe.newVersion||qe.newVersion<qe.oldVersion?console.warn("Dexie.delete('".concat(Y.name,"') was blocked")):console.warn("Upgrade '".concat(Y.name,"' blocked by other connection holding version ").concat(qe.oldVersion/10))}),this._maxKey=_c(M.IDBKeyRange),this._createTransaction=function(qe,st,Ve,tt){return new Y.Transaction(qe,st,Ve,Y._options.chromeTransactionDurability,tt)},this._fireOnBlocked=function(qe){Y.on("blocked").fire(qe),Bs.filter(function(st){return st.name===Y.name&&st!==Y&&!st._state.vcFired}).map(function(st){return st.on("versionchange").fire(qe)})},this.use(vy),this.use(If),this.use(P1),this.use(M1),this.use(by);var rt=new Proxy(this,{get:function(qe,st,Ve){if(st==="_vip")return!0;if(st==="table")return function(ot){return Ju(Y.table(ot),rt)};var tt=Reflect.get(qe,st,Ve);return tt instanceof Dp?Ju(tt,rt):st==="tables"?tt.map(function(ot){return Ju(ot,rt)}):st==="_createTransaction"?function(){return Ju(tt.apply(this,arguments),rt)}:tt}});this.vip=rt,re.forEach(function(qe){return qe(Y)})}var kc,gi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",_y=(jf.prototype.subscribe=function(A,M,Y){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:M,complete:Y})},jf.prototype[gi]=function(){return this},jf);function jf(A){this._subscribe=A}try{kc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{kc={indexedDB:null,IDBKeyRange:null}}function Sy(A){var M,Y=!1,re=new _y(function(ce){var we=J(A),Me,$e=!1,We={},Xe={},rt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,Me&&Me.abort(),qe&&Aa.storagemutated.unsubscribe(Ve))}};ce.start&&ce.start(rt);var qe=!1,st=function(){return bo(tt)},Ve=function(ot){kf(We,ot),Gp(Xe,We)&&st()},tt=function(){var ot,Je,ht;!$e&&kc.indexedDB&&(We={},ot={},Me&&Me.abort(),Me=new AbortController,ht=function(bt){var wt=V();try{we&&An();var Tt=Qt(A,bt);return Tt=we?Tt.finally(Kn):Tt}finally{wt&&H()}}(Je={subscr:ot,signal:Me.signal,requery:st,querier:A,trans:null}),Promise.resolve(ht).then(function(bt){Y=!0,M=bt,$e||Je.signal.aborted||(We={},function(wt){for(var Tt in wt)if(h(wt,Tt))return;return 1}(Xe=ot)||qe||(Aa(wc,Ve),qe=!0),bo(function(){return!$e&&ce.next&&ce.next(bt)}))},function(bt){Y=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||$e||bo(function(){$e||ce.error&&ce.error(bt)})}))};return setTimeout(st,0),rt});return re.hasValue=function(){return Y},re.getValue=function(){return M},re}var xl=ps;function Jp(A){var M=Eo;try{Eo=!0,Aa.storagemutated.fire(A),Zp(A,!0)}finally{Eo=M}}m(xl,r(r({},Qe),{delete:function(A){return new xl(A,{addons:[]}).delete()},exists:function(A){return new xl(A,{addons:[]}).open().then(function(M){return M.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return M=xl.dependencies,Y=M.indexedDB,M=M.IDBKeyRange,(Ef(Y)?Promise.resolve(Y.databases()).then(function(re){return re.map(function(ce){return ce.name}).filter(function(ce){return ce!==ul})}):Up(Y,M).toCollection().primaryKeys()).then(A)}catch{return Wr(new Ce.MissingAPI)}var M,Y},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return ke.trans?go(ke.transless,A):A()},vip:Hp,async:function(A){return function(){try{var M=Yu(A.apply(this,arguments));return M&&typeof M.then=="function"?M:P.resolve(M)}catch(Y){return Wr(Y)}}},spawn:function(A,M,Y){try{var re=Yu(A.apply(Y,M||[]));return re&&typeof re.then=="function"?re:P.resolve(re)}catch(ce){return Wr(ce)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(A,M){return M=P.resolve(typeof A=="function"?xl.ignoreTransaction(A):A).timeout(M||6e4),ke.trans?ke.trans.waitFor(M):M},Promise:P,debug:{get:function(){return Fe},set:function(A){Ee(A)}},derive:b,extend:l,props:m,override:E,Events:xo,on:Aa,liveQuery:Sy,extendObservabilitySet:kf,getByKeyPath:I,setByKeyPath:R,delByKeyPath:function(A,M){typeof M=="string"?R(A,M,void 0):"length"in M&&[].map.call(M,function(Y){R(A,Y,void 0)})},shallowClone:j,deepClone:Z,getObjectDiff:Af,cmp:Wn,asap:k,minKey:-1/0,addons:[],connections:Bs,errnames:Ae,dependencies:kc,cache:vl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,M,Y){return A+M/Math.pow(10,2*Y)})})),xl.maxKey=_c(xl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Aa(wc,function(A){Eo||(A=new CustomEvent(gl,{detail:A}),Eo=!0,dispatchEvent(A),Eo=!1)}),addEventListener(gl,function(A){A=A.detail,Eo||Jp(A)}));var Tc,Eo=!1,Qa=function(){};return typeof BroadcastChannel<"u"&&((Qa=function(){(Tc=new BroadcastChannel(gl)).onmessage=function(A){return A.data&&Jp(A.data)}})(),typeof Tc.unref=="function"&&Tc.unref(),Aa(wc,function(A){Eo||Tc.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!ps.disableBfCache&&A.persisted){Fe&&console.debug("Dexie: handling persisted pagehide"),Tc!=null&&Tc.close();for(var M=0,Y=Bs;M<Y.length;M++)Y[M].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!ps.disableBfCache&&A.persisted&&(Fe&&console.debug("Dexie: handling persisted pageshow"),Qa(),Jp({all:new Na(-1/0,[[]])}))})),P.rejectionMapper=function(A,M){return!A||A instanceof te||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Pe[A.name]?A:(M=new Pe[A.name](M||A.message,A),"stack"in A&&v(M,"stack",{get:function(){return this.inner.stack}}),M)},Ee(Fe),r(ps,Object.freeze({__proto__:null,Dexie:ps,liveQuery:Sy,Entity:hf,cmp:Wn,PropModification:yc,replacePrefix:function(A,M){return new yc({replacePrefix:[A,M]})},add:function(A){return new yc({add:A})},remove:function(A){return new yc({remove:A})},default:ps,RangeSet:Na,mergeRanges:bl,rangesOverlap:my}),{default:ps}),ps})}(_v)),_v.exports}var gG=mG();const eC=ui(gG),h3=Symbol.for("Dexie"),Lv=globalThis[h3]||(globalThis[h3]=eC);if(eC.semVer!==Lv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${eC.semVer} and ${Lv.semVer}`);const{liveQuery:uSe,mergeRanges:dSe,rangesOverlap:fSe,RangeSet:hSe,cmp:pSe,Entity:mSe,PropModification:gSe,replacePrefix:ySe,add:bSe,remove:vSe}=Lv;class yG extends Lv{constructor(){super("LiteChatDatabase_Rewrite_v1");ha(this,"conversations");ha(this,"interactions");ha(this,"mods");ha(this,"appState");ha(this,"providerConfigs");ha(this,"apiKeys");ha(this,"syncRepos");ha(this,"projects");ha(this,"rules");ha(this,"tags");ha(this,"tagRuleLinks");this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Ct=new yG,Da=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class xt{static async loadConversations(){try{return(await Ct.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Da(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Ct.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Ct.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Ct.interactions.where({conversationId:t}).sortBy("index")).map(r=>Da(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Ct.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Ct.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Ct.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Ct.mods.orderBy("loadOrder").toArray()).map(n=>Da(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Ct.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Ct.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Ct.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Ct.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Ct.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Da(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Ct.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Ct.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Ct.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Da(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Ct.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Ct.transaction("rw",[Ct.apiKeys,Ct.providerConfigs],async()=>{const n=await Ct.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Ct.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Ct.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Ct.syncRepos.toArray()).map(n=>Da(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Ct.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Ct.transaction("rw",[Ct.syncRepos,Ct.conversations],async()=>{const n=await Ct.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Ct.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Ct.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Ct.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Da(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,metadata:t.metadata?{...t.metadata}:{}};return await Ct.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await Ct.projects.where("parentId").equals(r).toArray();for(const s of a)await n(s.id);const i=await Ct.conversations.where("projectId").equals(r).toArray();if(i.length>0){const s=i.map(o=>Ct.conversations.update(o.id,{projectId:null}));await Promise.all(s),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await Ct.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Ct.transaction("rw",[Ct.projects,Ct.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Ct.rules.orderBy("name").toArray()).map(n=>Da(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Ct.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Ct.transaction("rw",[Ct.rules,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("ruleId").equals(t).delete(),await Ct.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Ct.tags.orderBy("name").toArray()).map(n=>Da(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Ct.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Ct.transaction("rw",[Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.tagRuleLinks.where("tagId").equals(t).delete(),await Ct.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Ct.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Ct.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Ct.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Ct.appState.toArray();n.settings={},r.forEach(a=>{a.key.startsWith("settings:")&&(n.settings[a.key.substring(9)]=a.value)})}return t.importApiKeys&&(n.apiKeys=await Ct.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Ct.providerConfigs.toArray()),t.importProjects&&(n.projects=await Ct.projects.toArray()),t.importConversations&&(n.conversations=await Ct.conversations.toArray(),n.interactions=await Ct.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Ct.rules.toArray(),n.tags=await Ct.tags.toArray(),n.tagRuleLinks=await Ct.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Ct.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Ct.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Ct.transaction("rw",[Ct.appState,Ct.apiKeys,Ct.providerConfigs,Ct.projects,Ct.conversations,Ct.interactions,Ct.rules,Ct.tags,Ct.tagRuleLinks,Ct.mods,Ct.syncRepos],async()=>{if(n.importSettings&&await Ct.appState.clear(),n.importApiKeys&&await Ct.apiKeys.clear(),n.importProviderConfigs&&await Ct.providerConfigs.clear(),n.importProjects&&await Ct.projects.clear(),n.importConversations&&(await Ct.conversations.clear(),await Ct.interactions.clear()),n.importRulesAndTags&&(await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()),n.importMods&&await Ct.mods.clear(),n.importSyncRepos&&await Ct.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([a,i])=>({key:`settings:${a}`,value:i}));await Ct.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Ct.apiKeys.bulkPut(t.apiKeys.map(r=>Da(r))),n.importProviderConfigs&&t.providerConfigs&&await Ct.providerConfigs.bulkPut(t.providerConfigs.map(r=>Da(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Ct.projects.bulkPut(t.projects.map(r=>Da(r))),n.importConversations&&t.conversations&&(await Ct.conversations.bulkPut(t.conversations.map(r=>Da(r,["lastSyncedAt"]))),t.interactions&&await Ct.interactions.bulkPut(t.interactions.map(r=>Da(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Ct.rules.bulkPut(t.rules.map(r=>Da(r))),t.tags&&await Ct.tags.bulkPut(t.tags.map(r=>Da(r))),t.tagRuleLinks&&await Ct.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Ct.mods.bulkPut(t.mods.map(r=>Da(r))),n.importSyncRepos&&t.syncRepos&&await Ct.syncRepos.bulkPut(t.syncRepos.map(r=>Da(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Ct.transaction("rw",[Ct.conversations,Ct.interactions,Ct.mods,Ct.appState,Ct.providerConfigs,Ct.apiKeys,Ct.syncRepos,Ct.projects,Ct.rules,Ct.tags,Ct.tagRuleLinks],async()=>{await Ct.interactions.clear(),await Ct.conversations.clear(),await Ct.projects.clear(),await Ct.mods.clear(),await Ct.appState.clear(),await Ct.providerConfigs.clear(),await Ct.apiKeys.clear(),await Ct.syncRepos.clear(),await Ct.rules.clear(),await Ct.tags.clear(),await Ct.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function bG(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const kt=bG();var Et=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(Et||{}),$v=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))($v||{});const qn=Ds(Ms((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n}),r!=="loading"&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await xt.loadInteractionsForConversation(n);a.sort((i,s)=>i.index-s.index),e({interactions:a,status:"idle"}),kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(s=>s.id===n);if(i!==-1){const s=a.interactions[i];let o={...s.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]));const l={...s,...r,metadata:o};"response"in r&&(l.response=r.response),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&kt.emit(Et.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),vG="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let _i=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=vG[n[e]&63];return t};const Jl=Ds(Ms((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(s=>s.source==="direct"&&n.source==="direct"?s.name===n.name&&s.size===n.size:s.source==="vfs"&&n.source==="vfs"?s.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const s={id:_i(),...n};a.attachedFilesMetadata.push(s),r=!0}}),r&&kt.emit(Et.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(s=>s.id!==n),r=a.attachedFilesMetadata.length<i}),r&&kt.emit(Et.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&kt.emit(Et.ATTACHED_FILES_CHANGED,{files:[]})}}))),bD=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(bD);const kk=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return bD.has(r)};var vD="vercel.ai.error",wG=Symbol.for(vD),wD,xG=class xD extends Error{constructor({name:t,message:n,cause:r}){super(n),this[wD]=!0,this.name=t,this.cause=r}static isInstance(t){return xD.hasMarker(t,vD)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};wD=wG;var Tn=xG,_D="AI_APICallError",SD=`vercel.ai.error.${_D}`,_G=Symbol.for(SD),ED,_a=class extends Tn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:_D,message:t,cause:o}),this[ED]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return Tn.hasMarker(t,SD)}};ED=_G;var CD="AI_EmptyResponseBodyError",kD=`vercel.ai.error.${CD}`,SG=Symbol.for(kD),TD,Tk=class extends Tn{constructor({message:t="Empty response body"}={}){super({name:CD,message:t}),this[TD]=!0}static isInstance(t){return Tn.hasMarker(t,kD)}};TD=SG;function g0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var AD="AI_InvalidArgumentError",ND=`vercel.ai.error.${AD}`,EG=Symbol.for(ND),RD,Ak=class extends Tn{constructor({message:t,cause:n,argument:r}){super({name:AD,message:t,cause:n}),this[RD]=!0,this.argument=r}static isInstance(t){return Tn.hasMarker(t,ND)}};RD=EG;var ID="AI_InvalidPromptError",jD=`vercel.ai.error.${ID}`,CG=Symbol.for(jD),OD,Fl=class extends Tn{constructor({prompt:t,message:n,cause:r}){super({name:ID,message:`Invalid prompt: ${n}`,cause:r}),this[OD]=!0,this.prompt=t}static isInstance(t){return Tn.hasMarker(t,jD)}};OD=CG;var DD="AI_InvalidResponseDataError",MD=`vercel.ai.error.${DD}`,kG=Symbol.for(MD),PD,_h=class extends Tn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:DD,message:n}),this[PD]=!0,this.data=t}static isInstance(t){return Tn.hasMarker(t,MD)}};PD=kG;var FD="AI_JSONParseError",LD=`vercel.ai.error.${FD}`,TG=Symbol.for(LD),$D,uu=class extends Tn{constructor({text:t,cause:n}){super({name:FD,message:`JSON parsing failed: Text: ${t}.
Error message: ${g0(n)}`,cause:n}),this[$D]=!0,this.text=t}static isInstance(t){return Tn.hasMarker(t,LD)}};$D=TG;var BD="AI_LoadAPIKeyError",zD=`vercel.ai.error.${BD}`,AG=Symbol.for(zD),UD,_b=class extends Tn{constructor({message:t}){super({name:BD,message:t}),this[UD]=!0}static isInstance(t){return Tn.hasMarker(t,zD)}};UD=AG;var HD="AI_TooManyEmbeddingValuesForCallError",qD=`vercel.ai.error.${HD}`,NG=Symbol.for(qD),VD,Nk=class extends Tn{constructor(t){super({name:HD,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[VD]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Tn.hasMarker(t,qD)}};VD=NG;var GD="AI_TypeValidationError",KD=`vercel.ai.error.${GD}`,RG=Symbol.for(KD),WD,IG=class tC extends Tn{constructor({value:t,cause:n}){super({name:GD,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${g0(n)}`,cause:n}),this[WD]=!0,this.value=t}static isInstance(t){return Tn.hasMarker(t,KD)}static wrap({value:t,cause:n}){return tC.isInstance(n)&&n.value===t?n:new tC({value:t,cause:n})}};WD=RG;var du=IG,ZD="AI_UnsupportedFunctionalityError",YD=`vercel.ai.error.${ZD}`,jG=Symbol.for(YD),XD,Ar=class extends Tn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:ZD,message:n}),this[XD]=!0,this.functionality=t}static isInstance(t){return Tn.hasMarker(t,YD)}};XD=jG;let OG=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Rk={},rx={};rx.byteLength=PG;rx.toByteArray=LG;rx.fromByteArray=zG;var $o=[],Es=[],DG=typeof Uint8Array<"u"?Uint8Array:Array,NS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var rh=0,MG=NS.length;rh<MG;++rh)$o[rh]=NS[rh],Es[NS.charCodeAt(rh)]=rh;Es[45]=62;Es[95]=63;function JD(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function PG(e){var t=JD(e),n=t[0],r=t[1];return(n+r)*3/4-r}function FG(e,t,n){return(t+n)*3/4-n}function LG(e){var t,n=JD(e),r=n[0],a=n[1],i=new DG(FG(e,r,a)),s=0,o=a>0?r-4:r,l;for(l=0;l<o;l+=4)t=Es[e.charCodeAt(l)]<<18|Es[e.charCodeAt(l+1)]<<12|Es[e.charCodeAt(l+2)]<<6|Es[e.charCodeAt(l+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return a===2&&(t=Es[e.charCodeAt(l)]<<2|Es[e.charCodeAt(l+1)]>>4,i[s++]=t&255),a===1&&(t=Es[e.charCodeAt(l)]<<10|Es[e.charCodeAt(l+1)]<<4|Es[e.charCodeAt(l+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function $G(e){return $o[e>>18&63]+$o[e>>12&63]+$o[e>>6&63]+$o[e&63]}function BG(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push($G(r));return a.join("")}function zG(e){for(var t,n=e.length,r=n%3,a=[],i=16383,s=0,o=n-r;s<o;s+=i)a.push(BG(e,s,s+i>o?o:s+i));return r===1?(t=e[n-1],a.push($o[t>>2]+$o[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push($o[t>>10]+$o[t>>4&63]+$o[t<<2&63]+"=")),a.join("")}var Ik={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ik.read=function(e,t,n,r,a){var i,s,o=a*8-r-1,l=(1<<o)-1,u=l>>1,d=-7,h=n?a-1:0,m=n?-1:1,y=e[t+h];for(h+=m,i=y&(1<<-d)-1,y>>=-d,d+=o;d>0;i=i*256+e[t+h],h+=m,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=r;d>0;s=s*256+e[t+h],h+=m,d-=8);if(i===0)i=1-u;else{if(i===l)return s?NaN:(y?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-u}return(y?-1:1)*s*Math.pow(2,i-r)};Ik.write=function(e,t,n,r,a,i){var s,o,l,u=i*8-a-1,d=(1<<u)-1,h=d>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=m/l:t+=m*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*l-1)*Math.pow(2,a),s=s+h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),s=0));a>=8;e[n+y]=o&255,y+=v,o/=256,a-=8);for(s=s<<a|o,u+=a;u>0;e[n+y]=s&255,y+=v,s/=256,u-=8);e[n+y-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=rx,n=Ik,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:s,SharedArrayBuffer:o}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ye=new i(1),O={foo:function(){return 42}};return Object.setPrototypeOf(O,i.prototype),Object.setPrototypeOf(ye,O),ye.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(ye){if(ye>a)throw new RangeError('The value "'+ye+'" is invalid for option "size"');const O=new i(ye);return Object.setPrototypeOf(O,d.prototype),O}function d(ye,O,K){if(typeof ye=="number"){if(typeof O=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ye)}return h(ye,O,K)}d.poolSize=8192;function h(ye,O,K){if(typeof ye=="string")return b(ye,O);if(s.isView(ye))return w(ye);if(ye==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye);if(it(ye,s)||ye&&it(ye.buffer,s)||typeof o<"u"&&(it(ye,o)||ye&&it(ye.buffer,o)))return S(ye,O,K);if(typeof ye=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=ye.valueOf&&ye.valueOf();if(he!=null&&he!==ye)return d.from(he,O,K);const je=E(ye);if(je)return je;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ye[Symbol.toPrimitive]=="function")return d.from(ye[Symbol.toPrimitive]("string"),O,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye)}d.from=function(ye,O,K){return h(ye,O,K)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function m(ye){if(typeof ye!="number")throw new TypeError('"size" argument must be of type number');if(ye<0)throw new RangeError('The value "'+ye+'" is invalid for option "size"')}function y(ye,O,K){return m(ye),ye<=0?u(ye):O!==void 0?typeof K=="string"?u(ye).fill(O,K):u(ye).fill(O):u(ye)}d.alloc=function(ye,O,K){return y(ye,O,K)};function v(ye){return m(ye),u(ye<0?0:C(ye)|0)}d.allocUnsafe=function(ye){return v(ye)},d.allocUnsafeSlow=function(ye){return v(ye)};function b(ye,O){if((typeof O!="string"||O==="")&&(O="utf8"),!d.isEncoding(O))throw new TypeError("Unknown encoding: "+O);const K=I(ye,O)|0;let he=u(K);const je=he.write(ye,O);return je!==K&&(he=he.slice(0,je)),he}function x(ye){const O=ye.length<0?0:C(ye.length)|0,K=u(O);for(let he=0;he<O;he+=1)K[he]=ye[he]&255;return K}function w(ye){if(it(ye,i)){const O=new i(ye);return S(O.buffer,O.byteOffset,O.byteLength)}return x(ye)}function S(ye,O,K){if(O<0||ye.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<O+(K||0))throw new RangeError('"length" is outside of buffer bounds');let he;return O===void 0&&K===void 0?he=new i(ye):K===void 0?he=new i(ye,O):he=new i(ye,O,K),Object.setPrototypeOf(he,d.prototype),he}function E(ye){if(d.isBuffer(ye)){const O=C(ye.length)|0,K=u(O);return K.length===0||ye.copy(K,0,0,O),K}if(ye.length!==void 0)return typeof ye.length!="number"||St(ye.length)?u(0):x(ye);if(ye.type==="Buffer"&&Array.isArray(ye.data))return x(ye.data)}function C(ye){if(ye>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ye|0}function k(ye){return+ye!=ye&&(ye=0),d.alloc(+ye)}d.isBuffer=function(O){return O!=null&&O._isBuffer===!0&&O!==d.prototype},d.compare=function(O,K){if(it(O,i)&&(O=d.from(O,O.offset,O.byteLength)),it(K,i)&&(K=d.from(K,K.offset,K.byteLength)),!d.isBuffer(O)||!d.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===K)return 0;let he=O.length,je=K.length;for(let be=0,ke=Math.min(he,je);be<ke;++be)if(O[be]!==K[be]){he=O[be],je=K[be];break}return he<je?-1:je<he?1:0},d.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(O,K){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(O.length===0)return d.alloc(0);let he;if(K===void 0)for(K=0,he=0;he<O.length;++he)K+=O[he].length;const je=d.allocUnsafe(K);let be=0;for(he=0;he<O.length;++he){let ke=O[he];if(it(ke,i))be+ke.length>je.length?(d.isBuffer(ke)||(ke=d.from(ke)),ke.copy(je,be)):i.prototype.set.call(je,ke,be);else if(d.isBuffer(ke))ke.copy(je,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=ke.length}return je};function I(ye,O){if(d.isBuffer(ye))return ye.length;if(s.isView(ye)||it(ye,s))return ye.byteLength;if(typeof ye!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ye);const K=ye.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&K===0)return 0;let je=!1;for(;;)switch(O){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return xe(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return Ge(ye).length;default:if(je)return he?-1:xe(ye).length;O=(""+O).toLowerCase(),je=!0}}d.byteLength=I;function R(ye,O,K){let he=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,O>>>=0,K<=O))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return ee(this,O,K);case"utf8":case"utf-8":return ne(this,O,K);case"ascii":return B(this,O,K);case"latin1":case"binary":return J(this,O,K);case"base64":return ie(this,O,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,O,K);default:if(he)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),he=!0}}d.prototype._isBuffer=!0;function j(ye,O,K){const he=ye[O];ye[O]=ye[K],ye[K]=he}d.prototype.swap16=function(){const O=this.length;if(O%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let K=0;K<O;K+=2)j(this,K,K+1);return this},d.prototype.swap32=function(){const O=this.length;if(O%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let K=0;K<O;K+=4)j(this,K,K+3),j(this,K+1,K+2);return this},d.prototype.swap64=function(){const O=this.length;if(O%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let K=0;K<O;K+=8)j(this,K,K+7),j(this,K+1,K+6),j(this,K+2,K+5),j(this,K+3,K+4);return this},d.prototype.toString=function(){const O=this.length;return O===0?"":arguments.length===0?ne(this,0,O):R.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(O){if(!d.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O?!0:d.compare(this,O)===0},d.prototype.inspect=function(){let O="";const K=e.INSPECT_MAX_BYTES;return O=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(O+=" ... "),"<Buffer "+O+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(O,K,he,je,be){if(it(O,i)&&(O=d.from(O,O.offset,O.byteLength)),!d.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(K===void 0&&(K=0),he===void 0&&(he=O?O.length:0),je===void 0&&(je=0),be===void 0&&(be=this.length),K<0||he>O.length||je<0||be>this.length)throw new RangeError("out of range index");if(je>=be&&K>=he)return 0;if(je>=be)return-1;if(K>=he)return 1;if(K>>>=0,he>>>=0,je>>>=0,be>>>=0,this===O)return 0;let ke=be-je,le=he-K;const ft=Math.min(ke,le),vt=this.slice(je,be),P=O.slice(K,he);for(let Be=0;Be<ft;++Be)if(vt[Be]!==P[Be]){ke=vt[Be],le=P[Be];break}return ke<le?-1:le<ke?1:0};function F(ye,O,K,he,je){if(ye.length===0)return-1;if(typeof K=="string"?(he=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,St(K)&&(K=je?0:ye.length-1),K<0&&(K=ye.length+K),K>=ye.length){if(je)return-1;K=ye.length-1}else if(K<0)if(je)K=0;else return-1;if(typeof O=="string"&&(O=d.from(O,he)),d.isBuffer(O))return O.length===0?-1:$(ye,O,K,he,je);if(typeof O=="number")return O=O&255,typeof i.prototype.indexOf=="function"?je?i.prototype.indexOf.call(ye,O,K):i.prototype.lastIndexOf.call(ye,O,K):$(ye,[O],K,he,je);throw new TypeError("val must be string, number or Buffer")}function $(ye,O,K,he,je){let be=1,ke=ye.length,le=O.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(ye.length<2||O.length<2)return-1;be=2,ke/=2,le/=2,K/=2}function ft(P,Be){return be===1?P[Be]:P.readUInt16BE(Be*be)}let vt;if(je){let P=-1;for(vt=K;vt<ke;vt++)if(ft(ye,vt)===ft(O,P===-1?0:vt-P)){if(P===-1&&(P=vt),vt-P+1===le)return P*be}else P!==-1&&(vt-=vt-P),P=-1}else for(K+le>ke&&(K=ke-le),vt=K;vt>=0;vt--){let P=!0;for(let Be=0;Be<le;Be++)if(ft(ye,vt+Be)!==ft(O,Be)){P=!1;break}if(P)return vt}return-1}d.prototype.includes=function(O,K,he){return this.indexOf(O,K,he)!==-1},d.prototype.indexOf=function(O,K,he){return F(this,O,K,he,!0)},d.prototype.lastIndexOf=function(O,K,he){return F(this,O,K,he,!1)};function G(ye,O,K,he){K=Number(K)||0;const je=ye.length-K;he?(he=Number(he),he>je&&(he=je)):he=je;const be=O.length;he>be/2&&(he=be/2);let ke;for(ke=0;ke<he;++ke){const le=parseInt(O.substr(ke*2,2),16);if(St(le))return ke;ye[K+ke]=le}return ke}function D(ye,O,K,he){return Nt(xe(O,ye.length-K),ye,K,he)}function Z(ye,O,K,he){return Nt(Fe(O),ye,K,he)}function q(ye,O,K,he){return Nt(Ge(O),ye,K,he)}function ue(ye,O,K,he){return Nt(Ee(O,ye.length-K),ye,K,he)}d.prototype.write=function(O,K,he,je){if(K===void 0)je="utf8",he=this.length,K=0;else if(he===void 0&&typeof K=="string")je=K,he=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(he)?(he=he>>>0,je===void 0&&(je="utf8")):(je=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-K;if((he===void 0||he>be)&&(he=be),O.length>0&&(he<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");je||(je="utf8");let ke=!1;for(;;)switch(je){case"hex":return G(this,O,K,he);case"utf8":case"utf-8":return D(this,O,K,he);case"ascii":case"latin1":case"binary":return Z(this,O,K,he);case"base64":return q(this,O,K,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,O,K,he);default:if(ke)throw new TypeError("Unknown encoding: "+je);je=(""+je).toLowerCase(),ke=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ie(ye,O,K){return O===0&&K===ye.length?t.fromByteArray(ye):t.fromByteArray(ye.slice(O,K))}function ne(ye,O,K){K=Math.min(ye.length,K);const he=[];let je=O;for(;je<K;){const be=ye[je];let ke=null,le=be>239?4:be>223?3:be>191?2:1;if(je+le<=K){let ft,vt,P,Be;switch(le){case 1:be<128&&(ke=be);break;case 2:ft=ye[je+1],(ft&192)===128&&(Be=(be&31)<<6|ft&63,Be>127&&(ke=Be));break;case 3:ft=ye[je+1],vt=ye[je+2],(ft&192)===128&&(vt&192)===128&&(Be=(be&15)<<12|(ft&63)<<6|vt&63,Be>2047&&(Be<55296||Be>57343)&&(ke=Be));break;case 4:ft=ye[je+1],vt=ye[je+2],P=ye[je+3],(ft&192)===128&&(vt&192)===128&&(P&192)===128&&(Be=(be&15)<<18|(ft&63)<<12|(vt&63)<<6|P&63,Be>65535&&Be<1114112&&(ke=Be))}}ke===null?(ke=65533,le=1):ke>65535&&(ke-=65536,he.push(ke>>>10&1023|55296),ke=56320|ke&1023),he.push(ke),je+=le}return ae(he)}const X=4096;function ae(ye){const O=ye.length;if(O<=X)return String.fromCharCode.apply(String,ye);let K="",he=0;for(;he<O;)K+=String.fromCharCode.apply(String,ye.slice(he,he+=X));return K}function B(ye,O,K){let he="";K=Math.min(ye.length,K);for(let je=O;je<K;++je)he+=String.fromCharCode(ye[je]&127);return he}function J(ye,O,K){let he="";K=Math.min(ye.length,K);for(let je=O;je<K;++je)he+=String.fromCharCode(ye[je]);return he}function ee(ye,O,K){const he=ye.length;(!O||O<0)&&(O=0),(!K||K<0||K>he)&&(K=he);let je="";for(let be=O;be<K;++be)je+=Ft[ye[be]];return je}function te(ye,O,K){const he=ye.slice(O,K);let je="";for(let be=0;be<he.length-1;be+=2)je+=String.fromCharCode(he[be]+he[be+1]*256);return je}d.prototype.slice=function(O,K){const he=this.length;O=~~O,K=K===void 0?he:~~K,O<0?(O+=he,O<0&&(O=0)):O>he&&(O=he),K<0?(K+=he,K<0&&(K=0)):K>he&&(K=he),K<O&&(K=O);const je=this.subarray(O,K);return Object.setPrototypeOf(je,d.prototype),je};function fe(ye,O,K){if(ye%1!==0||ye<0)throw new RangeError("offset is not uint");if(ye+O>K)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(O,K,he){O=O>>>0,K=K>>>0,he||fe(O,K,this.length);let je=this[O],be=1,ke=0;for(;++ke<K&&(be*=256);)je+=this[O+ke]*be;return je},d.prototype.readUintBE=d.prototype.readUIntBE=function(O,K,he){O=O>>>0,K=K>>>0,he||fe(O,K,this.length);let je=this[O+--K],be=1;for(;K>0&&(be*=256);)je+=this[O+--K]*be;return je},d.prototype.readUint8=d.prototype.readUInt8=function(O,K){return O=O>>>0,K||fe(O,1,this.length),this[O]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(O,K){return O=O>>>0,K||fe(O,2,this.length),this[O]|this[O+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(O,K){return O=O>>>0,K||fe(O,2,this.length),this[O]<<8|this[O+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+this[O+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),this[O]*16777216+(this[O+1]<<16|this[O+2]<<8|this[O+3])},d.prototype.readBigUInt64LE=Dt(function(O){O=O>>>0,Te(O,"offset");const K=this[O],he=this[O+7];(K===void 0||he===void 0)&&de(O,this.length-8);const je=K+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24,be=this[++O]+this[++O]*2**8+this[++O]*2**16+he*2**24;return BigInt(je)+(BigInt(be)<<BigInt(32))}),d.prototype.readBigUInt64BE=Dt(function(O){O=O>>>0,Te(O,"offset");const K=this[O],he=this[O+7];(K===void 0||he===void 0)&&de(O,this.length-8);const je=K*2**24+this[++O]*2**16+this[++O]*2**8+this[++O],be=this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+he;return(BigInt(je)<<BigInt(32))+BigInt(be)}),d.prototype.readIntLE=function(O,K,he){O=O>>>0,K=K>>>0,he||fe(O,K,this.length);let je=this[O],be=1,ke=0;for(;++ke<K&&(be*=256);)je+=this[O+ke]*be;return be*=128,je>=be&&(je-=Math.pow(2,8*K)),je},d.prototype.readIntBE=function(O,K,he){O=O>>>0,K=K>>>0,he||fe(O,K,this.length);let je=K,be=1,ke=this[O+--je];for(;je>0&&(be*=256);)ke+=this[O+--je]*be;return be*=128,ke>=be&&(ke-=Math.pow(2,8*K)),ke},d.prototype.readInt8=function(O,K){return O=O>>>0,K||fe(O,1,this.length),this[O]&128?(255-this[O]+1)*-1:this[O]},d.prototype.readInt16LE=function(O,K){O=O>>>0,K||fe(O,2,this.length);const he=this[O]|this[O+1]<<8;return he&32768?he|4294901760:he},d.prototype.readInt16BE=function(O,K){O=O>>>0,K||fe(O,2,this.length);const he=this[O+1]|this[O]<<8;return he&32768?he|4294901760:he},d.prototype.readInt32LE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},d.prototype.readInt32BE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},d.prototype.readBigInt64LE=Dt(function(O){O=O>>>0,Te(O,"offset");const K=this[O],he=this[O+7];(K===void 0||he===void 0)&&de(O,this.length-8);const je=this[O+4]+this[O+5]*2**8+this[O+6]*2**16+(he<<24);return(BigInt(je)<<BigInt(32))+BigInt(K+this[++O]*2**8+this[++O]*2**16+this[++O]*2**24)}),d.prototype.readBigInt64BE=Dt(function(O){O=O>>>0,Te(O,"offset");const K=this[O],he=this[O+7];(K===void 0||he===void 0)&&de(O,this.length-8);const je=(K<<24)+this[++O]*2**16+this[++O]*2**8+this[++O];return(BigInt(je)<<BigInt(32))+BigInt(this[++O]*2**24+this[++O]*2**16+this[++O]*2**8+he)}),d.prototype.readFloatLE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),n.read(this,O,!0,23,4)},d.prototype.readFloatBE=function(O,K){return O=O>>>0,K||fe(O,4,this.length),n.read(this,O,!1,23,4)},d.prototype.readDoubleLE=function(O,K){return O=O>>>0,K||fe(O,8,this.length),n.read(this,O,!0,52,8)},d.prototype.readDoubleBE=function(O,K){return O=O>>>0,K||fe(O,8,this.length),n.read(this,O,!1,52,8)};function ve(ye,O,K,he,je,be){if(!d.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>je||O<be)throw new RangeError('"value" argument is out of bounds');if(K+he>ye.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(O,K,he,je){if(O=+O,K=K>>>0,he=he>>>0,!je){const le=Math.pow(2,8*he)-1;ve(this,O,K,he,le,0)}let be=1,ke=0;for(this[K]=O&255;++ke<he&&(be*=256);)this[K+ke]=O/be&255;return K+he},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(O,K,he,je){if(O=+O,K=K>>>0,he=he>>>0,!je){const le=Math.pow(2,8*he)-1;ve(this,O,K,he,le,0)}let be=he-1,ke=1;for(this[K+be]=O&255;--be>=0&&(ke*=256);)this[K+be]=O/ke&255;return K+he},d.prototype.writeUint8=d.prototype.writeUInt8=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,1,255,0),this[K]=O&255,K+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,2,65535,0),this[K]=O&255,this[K+1]=O>>>8,K+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,2,65535,0),this[K]=O>>>8,this[K+1]=O&255,K+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,4,4294967295,0),this[K+3]=O>>>24,this[K+2]=O>>>16,this[K+1]=O>>>8,this[K]=O&255,K+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,4,4294967295,0),this[K]=O>>>24,this[K+1]=O>>>16,this[K+2]=O>>>8,this[K+3]=O&255,K+4};function De(ye,O,K,he,je){Se(O,he,je,ye,K,7);let be=Number(O&BigInt(4294967295));ye[K++]=be,be=be>>8,ye[K++]=be,be=be>>8,ye[K++]=be,be=be>>8,ye[K++]=be;let ke=Number(O>>BigInt(32)&BigInt(4294967295));return ye[K++]=ke,ke=ke>>8,ye[K++]=ke,ke=ke>>8,ye[K++]=ke,ke=ke>>8,ye[K++]=ke,K}function Ae(ye,O,K,he,je){Se(O,he,je,ye,K,7);let be=Number(O&BigInt(4294967295));ye[K+7]=be,be=be>>8,ye[K+6]=be,be=be>>8,ye[K+5]=be,be=be>>8,ye[K+4]=be;let ke=Number(O>>BigInt(32)&BigInt(4294967295));return ye[K+3]=ke,ke=ke>>8,ye[K+2]=ke,ke=ke>>8,ye[K+1]=ke,ke=ke>>8,ye[K]=ke,K+8}d.prototype.writeBigUInt64LE=Dt(function(O,K=0){return De(this,O,K,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Dt(function(O,K=0){return Ae(this,O,K,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(O,K,he,je){if(O=+O,K=K>>>0,!je){const ft=Math.pow(2,8*he-1);ve(this,O,K,he,ft-1,-ft)}let be=0,ke=1,le=0;for(this[K]=O&255;++be<he&&(ke*=256);)O<0&&le===0&&this[K+be-1]!==0&&(le=1),this[K+be]=(O/ke>>0)-le&255;return K+he},d.prototype.writeIntBE=function(O,K,he,je){if(O=+O,K=K>>>0,!je){const ft=Math.pow(2,8*he-1);ve(this,O,K,he,ft-1,-ft)}let be=he-1,ke=1,le=0;for(this[K+be]=O&255;--be>=0&&(ke*=256);)O<0&&le===0&&this[K+be+1]!==0&&(le=1),this[K+be]=(O/ke>>0)-le&255;return K+he},d.prototype.writeInt8=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,1,127,-128),O<0&&(O=255+O+1),this[K]=O&255,K+1},d.prototype.writeInt16LE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,2,32767,-32768),this[K]=O&255,this[K+1]=O>>>8,K+2},d.prototype.writeInt16BE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,2,32767,-32768),this[K]=O>>>8,this[K+1]=O&255,K+2},d.prototype.writeInt32LE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,4,2147483647,-2147483648),this[K]=O&255,this[K+1]=O>>>8,this[K+2]=O>>>16,this[K+3]=O>>>24,K+4},d.prototype.writeInt32BE=function(O,K,he){return O=+O,K=K>>>0,he||ve(this,O,K,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[K]=O>>>24,this[K+1]=O>>>16,this[K+2]=O>>>8,this[K+3]=O&255,K+4},d.prototype.writeBigInt64LE=Dt(function(O,K=0){return De(this,O,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Dt(function(O,K=0){return Ae(this,O,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ne(ye,O,K,he,je,be){if(K+he>ye.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Ce(ye,O,K,he,je){return O=+O,K=K>>>0,je||Ne(ye,O,K,4),n.write(ye,O,K,he,23,4),K+4}d.prototype.writeFloatLE=function(O,K,he){return Ce(this,O,K,!0,he)},d.prototype.writeFloatBE=function(O,K,he){return Ce(this,O,K,!1,he)};function Pe(ye,O,K,he,je){return O=+O,K=K>>>0,je||Ne(ye,O,K,8),n.write(ye,O,K,he,52,8),K+8}d.prototype.writeDoubleLE=function(O,K,he){return Pe(this,O,K,!0,he)},d.prototype.writeDoubleBE=function(O,K,he){return Pe(this,O,K,!1,he)},d.prototype.copy=function(O,K,he,je){if(!d.isBuffer(O))throw new TypeError("argument should be a Buffer");if(he||(he=0),!je&&je!==0&&(je=this.length),K>=O.length&&(K=O.length),K||(K=0),je>0&&je<he&&(je=he),je===he||O.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(je<0)throw new RangeError("sourceEnd out of bounds");je>this.length&&(je=this.length),O.length-K<je-he&&(je=O.length-K+he);const be=je-he;return this===O&&typeof i.prototype.copyWithin=="function"?this.copyWithin(K,he,je):i.prototype.set.call(O,this.subarray(he,je),K),be},d.prototype.fill=function(O,K,he,je){if(typeof O=="string"){if(typeof K=="string"?(je=K,K=0,he=this.length):typeof he=="string"&&(je=he,he=this.length),je!==void 0&&typeof je!="string")throw new TypeError("encoding must be a string");if(typeof je=="string"&&!d.isEncoding(je))throw new TypeError("Unknown encoding: "+je);if(O.length===1){const ke=O.charCodeAt(0);(je==="utf8"&&ke<128||je==="latin1")&&(O=ke)}}else typeof O=="number"?O=O&255:typeof O=="boolean"&&(O=Number(O));if(K<0||this.length<K||this.length<he)throw new RangeError("Out of range index");if(he<=K)return this;K=K>>>0,he=he===void 0?this.length:he>>>0,O||(O=0);let be;if(typeof O=="number")for(be=K;be<he;++be)this[be]=O;else{const ke=d.isBuffer(O)?O:d.from(O,je),le=ke.length;if(le===0)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(be=0;be<he-K;++be)this[be+K]=ke[be%le]}return this};const Qe={};function Le(ye,O,K){Qe[ye]=class extends K{constructor(){super(),Object.defineProperty(this,"message",{value:O.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ye}]`,this.stack,delete this.name}get code(){return ye}set code(je){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:je,writable:!0})}toString(){return`${this.name} [${ye}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(ye){return ye?`${ye} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(ye,O){return`The "${ye}" argument must be of type number. Received type ${typeof O}`},TypeError),Le("ERR_OUT_OF_RANGE",function(ye,O,K){let he=`The value of "${ye}" is out of range.`,je=K;return Number.isInteger(K)&&Math.abs(K)>2**32?je=Ie(String(K)):typeof K=="bigint"&&(je=String(K),(K>BigInt(2)**BigInt(32)||K<-(BigInt(2)**BigInt(32)))&&(je=Ie(je)),je+="n"),he+=` It must be ${O}. Received ${je}`,he},RangeError);function Ie(ye){let O="",K=ye.length;const he=ye[0]==="-"?1:0;for(;K>=he+4;K-=3)O=`_${ye.slice(K-3,K)}${O}`;return`${ye.slice(0,K)}${O}`}function z(ye,O,K){Te(O,"offset"),(ye[O]===void 0||ye[O+K]===void 0)&&de(O,ye.length-(K+1))}function Se(ye,O,K,he,je,be){if(ye>K||ye<O){const ke=typeof O=="bigint"?"n":"";let le;throw O===0||O===BigInt(0)?le=`>= 0${ke} and < 2${ke} ** ${(be+1)*8}${ke}`:le=`>= -(2${ke} ** ${(be+1)*8-1}${ke}) and < 2 ** ${(be+1)*8-1}${ke}`,new Qe.ERR_OUT_OF_RANGE("value",le,ye)}z(he,je,be)}function Te(ye,O){if(typeof ye!="number")throw new Qe.ERR_INVALID_ARG_TYPE(O,"number",ye)}function de(ye,O,K){throw Math.floor(ye)!==ye?(Te(ye,K),new Qe.ERR_OUT_OF_RANGE("offset","an integer",ye)):O<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${O}`,ye)}const se=/[^+/0-9A-Za-z-_]/g;function Q(ye){if(ye=ye.split("=")[0],ye=ye.trim().replace(se,""),ye.length<2)return"";for(;ye.length%4!==0;)ye=ye+"=";return ye}function xe(ye,O){O=O||1/0;let K;const he=ye.length;let je=null;const be=[];for(let ke=0;ke<he;++ke){if(K=ye.charCodeAt(ke),K>55295&&K<57344){if(!je){if(K>56319){(O-=3)>-1&&be.push(239,191,189);continue}else if(ke+1===he){(O-=3)>-1&&be.push(239,191,189);continue}je=K;continue}if(K<56320){(O-=3)>-1&&be.push(239,191,189),je=K;continue}K=(je-55296<<10|K-56320)+65536}else je&&(O-=3)>-1&&be.push(239,191,189);if(je=null,K<128){if((O-=1)<0)break;be.push(K)}else if(K<2048){if((O-=2)<0)break;be.push(K>>6|192,K&63|128)}else if(K<65536){if((O-=3)<0)break;be.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if((O-=4)<0)break;be.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return be}function Fe(ye){const O=[];for(let K=0;K<ye.length;++K)O.push(ye.charCodeAt(K)&255);return O}function Ee(ye,O){let K,he,je;const be=[];for(let ke=0;ke<ye.length&&!((O-=2)<0);++ke)K=ye.charCodeAt(ke),he=K>>8,je=K%256,be.push(je),be.push(he);return be}function Ge(ye){return t.toByteArray(Q(ye))}function Nt(ye,O,K,he){let je;for(je=0;je<he&&!(je+K>=O.length||je>=ye.length);++je)O[je+K]=ye[je];return je}function it(ye,O){return ye instanceof O||ye!=null&&ye.constructor!=null&&ye.constructor.name!=null&&ye.constructor.name===O.name}function St(ye){return ye!==ye}const Ft=function(){const ye="0123456789abcdef",O=new Array(256);for(let K=0;K<16;++K){const he=K*16;for(let je=0;je<16;++je)O[he+je]=ye[K]+ye[je]}return O}();function Dt(ye){return typeof BigInt>"u"?Zt:ye}function Zt(){throw new Error("BigInt not supported")}})(Rk);const Jt=Rk.Buffer,Fr=Rk.Buffer;var hd={exports:{}},p3;function UG(){if(p3)return hd.exports;p3=1;const e=typeof Jt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),e&&Jt.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const h=u&&u.protoAction||"error",m=u&&u.constructorAction||"error";if(h==="ignore"&&m==="ignore")return d;if(h!=="ignore"&&m!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return d}else if(h!=="ignore"&&m==="ignore"){if(t.test(o)===!1)return d}else if(n.test(o)===!1)return d;return a(d,{protoAction:h,constructorAction:m,safe:u&&u.safe})}function a(o,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let h=[o];for(;h.length;){const m=h;h=[];for(const y of m){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(y,"constructor")&&Object.prototype.hasOwnProperty.call(y.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete y.constructor}for(const v in y){const b=y[v];b&&typeof b=="object"&&h.push(b)}}}return o}function i(o,l,u){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,u)}finally{Error.stackTraceLimit=d}}function s(o,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return hd.exports=i,hd.exports.default=i,hd.exports.parse=i,hd.exports.safeParse=s,hd.exports.scan=a,hd.exports}var HG=UG();const uo=ui(HG);var qG={};function Zo(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function VG(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function GG(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function KG(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,y=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=WG(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function WG(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function y0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Zd=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=OG(n,t);if(e==null)return a;if(n.includes(r))throw new Ak({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Bo=Zd();function ZG(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function YG(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Sv(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function XG({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new _b({message:`${r} API key must be a string.`});if(typeof ta>"u")throw new _b({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=qG[t],e==null)throw new _b({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new _b({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Bv=Symbol.for("vercel.ai.validator");function JG(e){return{[Bv]:!0,validate:e}}function QG(e){return typeof e=="object"&&e!==null&&Bv in e&&e[Bv]===!0&&"validate"in e}function eK(e){return QG(e)?e:tK(e)}function tK(e){return JG(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function nK({value:e,schema:t}){const n=ap({value:e,schema:t});if(!n.success)throw du.wrap({value:e,cause:n.error});return n.value}function ap({value:e,schema:t}){const n=eK(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:du.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:du.wrap({value:e,cause:r})}}}function rK({text:e,schema:t}){try{const n=uo.parse(e);return t==null?n:nK({value:n,schema:t})}catch(n){throw uu.isInstance(n)||du.isInstance(n)?n:new uu({text:e,cause:n})}}function Md({text:e,schema:t}){try{const n=uo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=ap({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:uu.isInstance(n)?n:new uu({text:e,cause:n})}}}function m3(e){try{return uo.parse(e),!0}catch{return!1}}function aK({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=ap({value:t[e],schema:n});if(!r.success)throw new Ak({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var iK=()=>globalThis.fetch,no=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>sK({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),sK=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=iK()})=>{try{const o=await s(e,{method:"POST",headers:YG(t),body:n.content,signal:i}),l=y0(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw Sv(d)||_a.isInstance(d)?d:new _a({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Sv(u)||_a.isInstance(u))?u:new _a({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(Sv(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new _a({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},QD=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=y0(r);if(s.trim()==="")return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=rK({text:s,schema:e});return{responseHeaders:o,value:new _a({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},jk=e=>async({response:t})=>{const n=y0(t);if(t.body==null)throw new Tk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(KG()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Md({text:r,schema:e}))}}))}},Yd=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Md({text:a,schema:e}),s=y0(t);if(!i.success)throw new _a({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:oK,atob:lK}=globalThis;function eM(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=lK(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function jh(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return oK(t)}function tM(e){return e==null?void 0:e.replace(/\/$/,"")}var ar;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},e.find=(a,i)=>{for(const s of a)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(ar||(ar={}));var nC;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(nC||(nC={}));const an=ar.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$l=e=>{switch(typeof e){case"undefined":return an.undefined;case"string":return an.string;case"number":return isNaN(e)?an.nan:an.number;case"boolean":return an.boolean;case"function":return an.function;case"bigint":return an.bigint;case"symbol":return an.symbol;case"object":return Array.isArray(e)?an.array:e===null?an.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?an.promise:typeof Map<"u"&&e instanceof Map?an.map:typeof Set<"u"&&e instanceof Set?an.set:typeof Date<"u"&&e instanceof Date?an.date:an.object;default:return an.unknown}},$t=ar.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),cK=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class is extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(s))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof is))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ar.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}is.create=e=>new is(e);const Oh=(e,t)=>{let n;switch(e.code){case $t.invalid_type:e.received===an.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case $t.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ar.jsonStringifyReplacer)}`;break;case $t.unrecognized_keys:n=`Unrecognized key(s) in object: ${ar.joinValues(e.keys,", ")}`;break;case $t.invalid_union:n="Invalid input";break;case $t.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ar.joinValues(e.options)}`;break;case $t.invalid_enum_value:n=`Invalid enum value. Expected ${ar.joinValues(e.options)}, received '${e.received}'`;break;case $t.invalid_arguments:n="Invalid function arguments";break;case $t.invalid_return_type:n="Invalid function return type";break;case $t.invalid_date:n="Invalid date";break;case $t.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ar.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case $t.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case $t.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case $t.custom:n="Invalid input";break;case $t.invalid_intersection_types:n="Intersection results could not be merged";break;case $t.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case $t.not_finite:n="Number must be finite";break;default:n=t.defaultError,ar.assertNever(e)}return{message:n}};let nM=Oh;function uK(e){nM=e}function zv(){return nM}const Uv=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},dK=[];function tn(e,t){const n=zv(),r=Uv({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Oh?void 0:Oh].filter(a=>!!a)});e.common.issues.push(r)}class si{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return En;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,s=await a.value;r.push({key:i,value:s})}return si.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return En;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:t.value,value:r}}}const En=Object.freeze({status:"aborted"}),mh=e=>({status:"dirty",value:e}),Si=e=>({status:"valid",value:e}),rC=e=>e.status==="aborted",aC=e=>e.status==="dirty",Pd=e=>e.status==="valid",fg=e=>typeof Promise<"u"&&e instanceof Promise;function Hv(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function rM(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var un;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(un||(un={}));var Zm,Ym;class Yo{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const g3=(e,t)=>{if(Pd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new is(e.common.issues);return this._error=n,this._error}}};function Mn(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,o)=>{var l,u;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:o.defaultError}},description:a}}class Ln{get description(){return this._def.description}_getType(t){return $l(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:$l(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new si,ctx:{common:t.parent.common,data:t.data,parsedType:$l(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(fg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:$l(t)},i=this._parseSync({data:t,path:a.path,parent:a});return g3(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:$l(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return Pd(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>Pd(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:$l(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(fg(a)?a:Promise.resolve(a));return g3(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const s=t(a),o=()=>i.addIssue({code:$t.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new ro({schema:this,typeName:Vt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Qs.create(this,this._def)}nullable(){return mu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Js.create(this)}promise(){return Mh.create(this,this._def)}or(t){return gg.create([this,t],this._def)}and(t){return yg.create(this,t,this._def)}transform(t){return new ro({...Mn(this._def),schema:this,typeName:Vt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new _g({...Mn(this._def),innerType:this,defaultValue:n,typeName:Vt.ZodDefault})}brand(){return new Ok({typeName:Vt.ZodBranded,type:this,...Mn(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Sg({...Mn(this._def),innerType:this,catchValue:n,typeName:Vt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return b0.create(this,t)}readonly(){return Eg.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fK=/^c[^\s-]{8,}$/i,hK=/^[0-9a-z]+$/,pK=/^[0-9A-HJKMNP-TV-Z]{26}$/i,mK=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gK=/^[a-z0-9_-]{21}$/i,yK=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vK=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,wK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let RS;const xK=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_K=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,SK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,EK=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,CK=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,kK=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,aM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",TK=new RegExp(`^${aM}$`);function iM(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function AK(e){return new RegExp(`^${iM(e)}$`)}function sM(e){let t=`${aM}T${iM(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function NK(e,t){return!!((t==="v4"||!t)&&xK.test(e)||(t==="v6"||!t)&&SK.test(e))}function RK(e,t){if(!yK.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function IK(e,t){return!!((t==="v4"||!t)&&_K.test(e)||(t==="v6"||!t)&&EK.test(e))}class Ys extends Ln{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==an.string){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:an.string,received:i.parsedType}),En}const r=new si;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=t.data.length>i.value,o=t.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(t,a),s?tn(a,{code:$t.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&tn(a,{code:$t.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")vK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"email",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")RS||(RS=new RegExp(wK,"u")),RS.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"emoji",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")mK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"uuid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")gK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"nanoid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")fK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")hK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid2",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")pK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ulid",code:$t.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),tn(a,{validation:"url",code:$t.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"regex",code:$t.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?sM(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?TK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?AK(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?bK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"duration",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?NK(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ip",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?RK(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"jwt",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?IK(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cidr",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?CK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64",code:$t.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?kK.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64url",code:$t.invalid_string,message:i.message}),r.dirty()):ar.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:$t.invalid_string,...un.errToObj(r)})}_addCheck(t){return new Ys({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...un.errToObj(t)})}url(t){return this._addCheck({kind:"url",...un.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...un.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...un.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...un.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...un.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...un.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...un.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...un.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...un.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...un.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...un.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...un.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...un.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...un.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...un.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...un.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...un.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...un.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...un.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...un.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...un.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...un.errToObj(n)})}nonempty(t){return this.min(1,un.errToObj(t))}trim(){return new Ys({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ys({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ys({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ys.create=e=>{var t;return new Ys({checks:[],typeName:Vt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Mn(e)})};function jK(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class fu extends Ln{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==an.number){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:an.number,received:i.parsedType}),En}let r;const a=new si;for(const i of this._def.checks)i.kind==="int"?ar.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?jK(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_finite,message:i.message}),a.dirty()):ar.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new fu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new fu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:un.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:un.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:un.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:un.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ar.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}fu.create=e=>new fu({checks:[],typeName:Vt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Mn(e)});class hu extends Ln{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==an.bigint)return this._getInvalidInput(t);let r;const a=new si;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:$t.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):ar.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return tn(n,{code:$t.invalid_type,expected:an.bigint,received:n.parsedType}),En}gte(t,n){return this.setLimit("min",t,!0,un.toString(n))}gt(t,n){return this.setLimit("min",t,!1,un.toString(n))}lte(t,n){return this.setLimit("max",t,!0,un.toString(n))}lt(t,n){return this.setLimit("max",t,!1,un.toString(n))}setLimit(t,n,r,a){return new hu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:un.toString(a)}]})}_addCheck(t){return new hu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:un.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:un.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:un.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:un.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:un.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}hu.create=e=>{var t;return new hu({checks:[],typeName:Vt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Mn(e)})};class hg extends Ln{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==an.boolean){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.boolean,received:r.parsedType}),En}return Si(t.data)}}hg.create=e=>new hg({typeName:Vt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Mn(e)});class Fd extends Ln{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==an.date){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_type,expected:an.date,received:i.parsedType}),En}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return tn(i,{code:$t.invalid_date}),En}const r=new si;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:$t.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):ar.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Fd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:un.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:un.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Fd.create=e=>new Fd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Vt.ZodDate,...Mn(e)});class qv extends Ln{_parse(t){if(this._getType(t)!==an.symbol){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.symbol,received:r.parsedType}),En}return Si(t.data)}}qv.create=e=>new qv({typeName:Vt.ZodSymbol,...Mn(e)});class pg extends Ln{_parse(t){if(this._getType(t)!==an.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.undefined,received:r.parsedType}),En}return Si(t.data)}}pg.create=e=>new pg({typeName:Vt.ZodUndefined,...Mn(e)});class mg extends Ln{_parse(t){if(this._getType(t)!==an.null){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.null,received:r.parsedType}),En}return Si(t.data)}}mg.create=e=>new mg({typeName:Vt.ZodNull,...Mn(e)});class Dh extends Ln{constructor(){super(...arguments),this._any=!0}_parse(t){return Si(t.data)}}Dh.create=e=>new Dh({typeName:Vt.ZodAny,...Mn(e)});class Id extends Ln{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Si(t.data)}}Id.create=e=>new Id({typeName:Vt.ZodUnknown,...Mn(e)});class Ql extends Ln{_parse(t){const n=this._getOrReturnCtx(t);return tn(n,{code:$t.invalid_type,expected:an.never,received:n.parsedType}),En}}Ql.create=e=>new Ql({typeName:Vt.ZodNever,...Mn(e)});class Vv extends Ln{_parse(t){if(this._getType(t)!==an.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.void,received:r.parsedType}),En}return Si(t.data)}}Vv.create=e=>new Vv({typeName:Vt.ZodVoid,...Mn(e)});class Js extends Ln{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==an.array)return tn(n,{code:$t.invalid_type,expected:an.array,received:n.parsedType}),En;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(s||o)&&(tn(n,{code:s?$t.too_big:$t.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(tn(n,{code:$t.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(tn(n,{code:$t.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>a.type._parseAsync(new Yo(n,s,n.path,o)))).then(s=>si.mergeArray(r,s));const i=[...n.data].map((s,o)=>a.type._parseSync(new Yo(n,s,n.path,o)));return si.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Js({...this._def,minLength:{value:t,message:un.toString(n)}})}max(t,n){return new Js({...this._def,maxLength:{value:t,message:un.toString(n)}})}length(t,n){return new Js({...this._def,exactLength:{value:t,message:un.toString(n)}})}nonempty(t){return this.min(1,t)}}Js.create=(e,t)=>new Js({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Vt.ZodArray,...Mn(t)});function fh(e){if(e instanceof Yr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Qs.create(fh(r))}return new Yr({...e._def,shape:()=>t})}else return e instanceof Js?new Js({...e._def,type:fh(e.element)}):e instanceof Qs?Qs.create(fh(e.unwrap())):e instanceof mu?mu.create(fh(e.unwrap())):e instanceof Xo?Xo.create(e.items.map(t=>fh(t))):e}class Yr extends Ln{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=ar.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==an.object){const u=this._getOrReturnCtx(t);return tn(u,{code:$t.invalid_type,expected:an.object,received:u.parsedType}),En}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Ql&&this._def.unknownKeys==="strip"))for(const u in a.data)s.includes(u)||o.push(u);const l=[];for(const u of s){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Yo(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Ql){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")o.length>0&&(tn(a,{code:$t.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Yo(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>si.mergeObjectSync(r,u)):si.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return un.errToObj,new Yr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,s,o;const l=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=un.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Yr({...this._def,unknownKeys:"strip"})}passthrough(){return new Yr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Yr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Yr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Vt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Yr({...this._def,catchall:t})}pick(t){const n={};return ar.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Yr({...this._def,shape:()=>n})}omit(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Yr({...this._def,shape:()=>n})}deepPartial(){return fh(this)}partial(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Yr({...this._def,shape:()=>n})}required(t){const n={};return ar.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Qs;)i=i._def.innerType;n[r]=i}}),new Yr({...this._def,shape:()=>n})}keyof(){return oM(ar.objectKeys(this.shape))}}Yr.create=(e,t)=>new Yr({shape:()=>e,unknownKeys:"strip",catchall:Ql.create(),typeName:Vt.ZodObject,...Mn(t)});Yr.strictCreate=(e,t)=>new Yr({shape:()=>e,unknownKeys:"strict",catchall:Ql.create(),typeName:Vt.ZodObject,...Mn(t)});Yr.lazycreate=(e,t)=>new Yr({shape:e,unknownKeys:"strip",catchall:Ql.create(),typeName:Vt.ZodObject,...Mn(t)});class gg extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new is(o.ctx.common.issues));return tn(n,{code:$t.invalid_union,unionErrors:s}),En}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(l=>new is(l));return tn(n,{code:$t.invalid_union,unionErrors:o}),En}}get options(){return this._def.options}}gg.create=(e,t)=>new gg({options:e,typeName:Vt.ZodUnion,...Mn(t)});const Pl=e=>e instanceof vg?Pl(e.schema):e instanceof ro?Pl(e.innerType()):e instanceof wg?[e.value]:e instanceof pu?e.options:e instanceof xg?ar.objectValues(e.enum):e instanceof _g?Pl(e._def.innerType):e instanceof pg?[void 0]:e instanceof mg?[null]:e instanceof Qs?[void 0,...Pl(e.unwrap())]:e instanceof mu?[null,...Pl(e.unwrap())]:e instanceof Ok||e instanceof Eg?Pl(e.unwrap()):e instanceof Sg?Pl(e._def.innerType):[];class ax extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==an.object)return tn(n,{code:$t.invalid_type,expected:an.object,received:n.parsedType}),En;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:$t.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),En)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const s=Pl(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new ax({typeName:Vt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Mn(r)})}}function iC(e,t){const n=$l(e),r=$l(t);if(e===t)return{valid:!0,data:e};if(n===an.object&&r===an.object){const a=ar.objectKeys(t),i=ar.objectKeys(e).filter(o=>a.indexOf(o)!==-1),s={...e,...t};for(const o of i){const l=iC(e[o],t[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===an.array&&r===an.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const s=e[i],o=t[i],l=iC(s,o);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===an.date&&r===an.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class yg extends Ln{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,s)=>{if(rC(i)||rC(s))return En;const o=iC(i.value,s.value);return o.valid?((aC(i)||aC(s))&&n.dirty(),{status:n.value,value:o.data}):(tn(r,{code:$t.invalid_intersection_types}),En)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}yg.create=(e,t,n)=>new yg({left:e,right:t,typeName:Vt.ZodIntersection,...Mn(n)});class Xo extends Ln{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==an.array)return tn(r,{code:$t.invalid_type,expected:an.array,received:r.parsedType}),En;if(r.data.length<this._def.items.length)return tn(r,{code:$t.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),En;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:$t.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Yo(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>si.mergeArray(n,s)):si.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Xo({...this._def,rest:t})}}Xo.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xo({items:e,typeName:Vt.ZodTuple,rest:null,...Mn(t)})};class bg extends Ln{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==an.object)return tn(r,{code:$t.invalid_type,expected:an.object,received:r.parsedType}),En;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new Yo(r,o,r.path,o)),value:s._parse(new Yo(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?si.mergeObjectAsync(n,a):si.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Ln?new bg({keyType:t,valueType:n,typeName:Vt.ZodRecord,...Mn(r)}):new bg({keyType:Ys.create(),valueType:t,typeName:Vt.ZodRecord,...Mn(n)})}}class Gv extends Ln{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==an.map)return tn(r,{code:$t.invalid_type,expected:an.map,received:r.parsedType}),En;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,l],u)=>({key:a._parse(new Yo(r,o,r.path,[u,"key"])),value:i._parse(new Yo(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}Gv.create=(e,t,n)=>new Gv({valueType:t,keyType:e,typeName:Vt.ZodMap,...Mn(n)});class Ld extends Ln{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==an.set)return tn(r,{code:$t.invalid_type,expected:an.set,received:r.parsedType}),En;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(tn(r,{code:$t.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(tn(r,{code:$t.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return En;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new Yo(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(t,n){return new Ld({...this._def,minSize:{value:t,message:un.toString(n)}})}max(t,n){return new Ld({...this._def,maxSize:{value:t,message:un.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Ld.create=(e,t)=>new Ld({valueType:e,minSize:null,maxSize:null,typeName:Vt.ZodSet,...Mn(t)});class Sh extends Ln{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==an.function)return tn(n,{code:$t.invalid_type,expected:an.function,received:n.parsedType}),En;function r(o,l){return Uv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,zv(),Oh].filter(u=>!!u),issueData:{code:$t.invalid_arguments,argumentsError:l}})}function a(o,l){return Uv({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,zv(),Oh].filter(u=>!!u),issueData:{code:$t.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof Mh){const o=this;return Si(async function(...l){const u=new is([]),d=await o._def.args.parseAsync(l,i).catch(y=>{throw u.addIssue(r(l,y)),u}),h=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(y=>{throw u.addIssue(a(h,y)),u})})}else{const o=this;return Si(function(...l){const u=o._def.args.safeParse(l,i);if(!u.success)throw new is([r(l,u.error)]);const d=Reflect.apply(s,this,u.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new is([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Sh({...this._def,args:Xo.create(t).rest(Id.create())})}returns(t){return new Sh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new Sh({args:t||Xo.create([]).rest(Id.create()),returns:n||Id.create(),typeName:Vt.ZodFunction,...Mn(r)})}}class vg extends Ln{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}vg.create=(e,t)=>new vg({getter:e,typeName:Vt.ZodLazy,...Mn(t)});class wg extends Ln{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return tn(n,{received:n.data,code:$t.invalid_literal,expected:this._def.value}),En}return{status:"valid",value:t.data}}get value(){return this._def.value}}wg.create=(e,t)=>new wg({value:e,typeName:Vt.ZodLiteral,...Mn(t)});function oM(e,t){return new pu({values:e,typeName:Vt.ZodEnum,...Mn(t)})}class pu extends Ln{constructor(){super(...arguments),Zm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{expected:ar.joinValues(r),received:n.parsedType,code:$t.invalid_type}),En}if(Hv(this,Zm)||rM(this,Zm,new Set(this._def.values)),!Hv(this,Zm).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{received:n.data,code:$t.invalid_enum_value,options:r}),En}return Si(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return pu.create(t,{...this._def,...n})}exclude(t,n=this._def){return pu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Zm=new WeakMap;pu.create=oM;class xg extends Ln{constructor(){super(...arguments),Ym.set(this,void 0)}_parse(t){const n=ar.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==an.string&&r.parsedType!==an.number){const a=ar.objectValues(n);return tn(r,{expected:ar.joinValues(a),received:r.parsedType,code:$t.invalid_type}),En}if(Hv(this,Ym)||rM(this,Ym,new Set(ar.getValidEnumValues(this._def.values))),!Hv(this,Ym).has(t.data)){const a=ar.objectValues(n);return tn(r,{received:r.data,code:$t.invalid_enum_value,options:a}),En}return Si(t.data)}get enum(){return this._def.values}}Ym=new WeakMap;xg.create=(e,t)=>new xg({values:e,typeName:Vt.ZodNativeEnum,...Mn(t)});class Mh extends Ln{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==an.promise&&n.common.async===!1)return tn(n,{code:$t.invalid_type,expected:an.promise,received:n.parsedType}),En;const r=n.parsedType===an.promise?n.data:Promise.resolve(n.data);return Si(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Mh.create=(e,t)=>new Mh({type:e,typeName:Vt.ZodPromise,...Mn(t)});class ro extends Ln{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:s=>{tn(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return En;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?En:l.status==="dirty"||n.value==="dirty"?mh(l.value):l});{if(n.value==="aborted")return En;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?En:o.status==="dirty"||n.value==="dirty"?mh(o.value):o}}if(a.type==="refinement"){const s=o=>{const l=a.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?En:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?En:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Pd(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>Pd(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:n.value,value:o})):s);ar.assertNever(a)}}ro.create=(e,t,n)=>new ro({schema:e,typeName:Vt.ZodEffects,effect:t,...Mn(n)});ro.createWithPreprocess=(e,t,n)=>new ro({schema:t,effect:{type:"preprocess",transform:e},typeName:Vt.ZodEffects,...Mn(n)});class Qs extends Ln{_parse(t){return this._getType(t)===an.undefined?Si(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Qs.create=(e,t)=>new Qs({innerType:e,typeName:Vt.ZodOptional,...Mn(t)});class mu extends Ln{_parse(t){return this._getType(t)===an.null?Si(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}mu.create=(e,t)=>new mu({innerType:e,typeName:Vt.ZodNullable,...Mn(t)});class _g extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===an.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}_g.create=(e,t)=>new _g({innerType:e,typeName:Vt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Mn(t)});class Sg extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fg(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new is(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new is(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Sg.create=(e,t)=>new Sg({innerType:e,typeName:Vt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Mn(t)});class Kv extends Ln{_parse(t){if(this._getType(t)!==an.nan){const r=this._getOrReturnCtx(t);return tn(r,{code:$t.invalid_type,expected:an.nan,received:r.parsedType}),En}return{status:"valid",value:t.data}}}Kv.create=e=>new Kv({typeName:Vt.ZodNaN,...Mn(e)});const OK=Symbol("zod_brand");class Ok extends Ln{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class b0 extends Ln{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?En:i.status==="dirty"?(n.dirty(),mh(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?En:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new b0({in:t,out:n,typeName:Vt.ZodPipeline})}}class Eg extends Ln{_parse(t){const n=this._def.innerType._parse(t),r=a=>(Pd(a)&&(a.value=Object.freeze(a.value)),a);return fg(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}Eg.create=(e,t)=>new Eg({innerType:e,typeName:Vt.ZodReadonly,...Mn(t)});function y3(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function lM(e,t={},n){return e?Dh.create().superRefine((r,a)=>{var i,s;const o=e(r);if(o instanceof Promise)return o.then(l=>{var u,d;if(!l){const h=y3(t,r),m=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!o){const l=y3(t,r),u=(s=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...l,fatal:u})}}):Dh.create()}const DK={object:Yr.lazycreate};var Vt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Vt||(Vt={}));const MK=(e,t={message:`Input not instance of ${e.name}`})=>lM(n=>n instanceof e,t),cM=Ys.create,uM=fu.create,PK=Kv.create,FK=hu.create,dM=hg.create,LK=Fd.create,$K=qv.create,BK=pg.create,zK=mg.create,UK=Dh.create,HK=Id.create,qK=Ql.create,VK=Vv.create,GK=Js.create,KK=Yr.create,WK=Yr.strictCreate,ZK=gg.create,YK=ax.create,XK=yg.create,JK=Xo.create,QK=bg.create,eW=Gv.create,tW=Ld.create,nW=Sh.create,rW=vg.create,aW=wg.create,iW=pu.create,sW=xg.create,oW=Mh.create,b3=ro.create,lW=Qs.create,cW=mu.create,uW=ro.createWithPreprocess,dW=b0.create,fW=()=>cM().optional(),hW=()=>uM().optional(),pW=()=>dM().optional(),mW={string:e=>Ys.create({...e,coerce:!0}),number:e=>fu.create({...e,coerce:!0}),boolean:e=>hg.create({...e,coerce:!0}),bigint:e=>hu.create({...e,coerce:!0}),date:e=>Fd.create({...e,coerce:!0})},gW=En;var U=Object.freeze({__proto__:null,defaultErrorMap:Oh,setErrorMap:uK,getErrorMap:zv,makeIssue:Uv,EMPTY_PATH:dK,addIssueToContext:tn,ParseStatus:si,INVALID:En,DIRTY:mh,OK:Si,isAborted:rC,isDirty:aC,isValid:Pd,isAsync:fg,get util(){return ar},get objectUtil(){return nC},ZodParsedType:an,getParsedType:$l,ZodType:Ln,datetimeRegex:sM,ZodString:Ys,ZodNumber:fu,ZodBigInt:hu,ZodBoolean:hg,ZodDate:Fd,ZodSymbol:qv,ZodUndefined:pg,ZodNull:mg,ZodAny:Dh,ZodUnknown:Id,ZodNever:Ql,ZodVoid:Vv,ZodArray:Js,ZodObject:Yr,ZodUnion:gg,ZodDiscriminatedUnion:ax,ZodIntersection:yg,ZodTuple:Xo,ZodRecord:bg,ZodMap:Gv,ZodSet:Ld,ZodFunction:Sh,ZodLazy:vg,ZodLiteral:wg,ZodEnum:pu,ZodNativeEnum:xg,ZodPromise:Mh,ZodEffects:ro,ZodTransformer:ro,ZodOptional:Qs,ZodNullable:mu,ZodDefault:_g,ZodCatch:Sg,ZodNaN:Kv,BRAND:OK,ZodBranded:Ok,ZodPipeline:b0,ZodReadonly:Eg,custom:lM,Schema:Ln,ZodSchema:Ln,late:DK,get ZodFirstPartyTypeKind(){return Vt},coerce:mW,any:UK,array:GK,bigint:FK,boolean:dM,date:LK,discriminatedUnion:YK,effect:b3,enum:iW,function:nW,instanceof:MK,intersection:XK,lazy:rW,literal:aW,map:eW,nan:PK,nativeEnum:sW,never:qK,null:zK,nullable:cW,number:uM,object:KK,oboolean:pW,onumber:hW,optional:lW,ostring:fW,pipeline:dW,preprocess:uW,promise:oW,record:QK,set:tW,strictObject:WK,string:cM,symbol:$K,transformer:b3,tuple:JK,undefined:BK,union:ZK,unknown:HK,void:VK,NEVER:gW,ZodIssueCode:$t,quotelessJson:cK,ZodError:is});function yW({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:s});break}case"developer":{r.push({role:"developer",content:s});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){r.push({role:"user",content:s[0].text});break}r.push({role:"user",content:s.map((o,l)=>{var u,d,h,m;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${jh(o.image)}`,detail:(h=(d=o.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(o.data instanceof URL)throw new Ar({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=o.filename)!=null?m:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new Ar({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const u of s)switch(u.type){case"text":{o+=u.text;break}case"tool-call":{l.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}}if(t){if(l.length>1)throw new Ar({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of s)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:a}}function v3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function Wv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Dk=U.object({error:U.object({message:U.string(),type:U.string().nullish(),param:U.any().nullish(),code:U.union([U.string(),U.number()]).nullish()})}),gu=QD({errorSchema:Dk,errorToMessage:e=>e.error.message});function Zv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function bW({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice;if(t){const u=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):u.push({name:h.name,description:h.description,parameters:h.parameters});if(s==null)return{functions:u,function_call:void 0,toolWarnings:i};switch(s.type){case"auto":case"none":case void 0:return{functions:u,function_call:void 0,toolWarnings:i};case"required":throw new Ar({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:u,function_call:{name:s.toolName},toolWarnings:i}}}const o=[];for(const u of a)u.type==="provider-defined"?i.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:n?!0:void 0}});if(s==null)return{tools:o,tool_choice:void 0,toolWarnings:i};const l=s.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:i};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const u=l;throw new Ar({functionality:`Unsupported tool choice type: ${u}`})}}}var vW=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:sC(this.modelId)}get defaultObjectGenerationMode(){return _W(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,y,v,b,x,w,S,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const I=this.settings.useLegacyFunctionCalling;if(I&&this.settings.parallelToolCalls===!0)throw new Ar({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(I&&this.supportsStructuredOutputs)throw new Ar({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:R,warnings:j}=yW({prompt:t,useLegacyFunctionCalling:I,systemMessageMode:SW(this.modelId)});k.push(...j);const F={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:(m=u.name)!=null?m:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(y=h==null?void 0:h.openai)==null?void 0:y.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(x=h==null?void 0:h.openai)==null?void 0:x.prediction,reasoning_effort:(S=(w=h==null?void 0:h.openai)==null?void 0:w.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:R};switch(sC(this.modelId)&&(F.temperature!=null&&(F.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),F.top_p!=null&&(F.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),F.frequency_penalty!=null&&(F.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),F.presence_penalty!=null&&(F.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),F.logit_bias!=null&&(F.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),F.logprobs!=null&&(F.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),F.top_logprobs!=null&&(F.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),F.max_tokens!=null&&(F.max_completion_tokens==null&&(F.max_completion_tokens=F.max_tokens),F.max_tokens=void 0)),C){case"regular":{const{tools:$,tool_choice:G,functions:D,function_call:Z,toolWarnings:q}=bW({mode:e,useLegacyFunctionCalling:I,structuredOutputs:this.supportsStructuredOutputs});return{args:{...F,tools:$,tool_choice:G,functions:D,function_call:Z},warnings:[...k,...q]}}case"object-json":return{args:{...F,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:I?{...F,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...F,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const $=C;throw new Error(`Unsupported type: ${$}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l;const{args:u,warnings:d}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:y}=await no({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Zo(this.config.headers(),e.headers),body:u,failedResponseHandler:gu,successfulResponseHandler:Yd(wW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=u,x=m.choices[0],w=(t=m.usage)==null?void 0:t.completion_tokens_details,S=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(w==null?void 0:w.reasoning_tokens)!=null&&(E.openai.reasoningTokens=w==null?void 0:w.reasoning_tokens),(w==null?void 0:w.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=w==null?void 0:w.accepted_prediction_tokens),(w==null?void 0:w.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=w==null?void 0:w.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=x.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&x.message.function_call?[{toolCallType:"function",toolCallId:Bo(),toolName:x.message.function_call.name,args:x.message.function_call.arguments}]:(a=x.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:Bo(),toolName:C.function.name,args:C.function.arguments}}),finishReason:Wv(x.finish_reason),usage:{promptTokens:(s=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?s:NaN,completionTokens:(l=(o=m.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:y},request:{body:JSON.stringify(u)},response:Zv(m),warnings:d,logprobs:v3(x.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(w){if(w.enqueue({type:"response-metadata",...b.response}),b.text&&w.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const S of b.toolCalls)w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),w.enqueue({type:"tool-call",...S});w.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),w.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await no({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Zo(this.config.headers(),e.headers),body:r,failedResponseHandler:gu,successfulResponseHandler:jk(xW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=t,l=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:y}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,x){var w,S,E,C,k,I,R,j,F,$,G,D;if(!b.success){u="error",x.enqueue({type:"error",error:b.error});return}const Z=b.value;if("error"in Z){u="error",x.enqueue({type:"error",error:Z.error});return}if(m&&(m=!1,x.enqueue({type:"response-metadata",...Zv(Z)})),Z.usage!=null){const{prompt_tokens:X,completion_tokens:ae,prompt_tokens_details:B,completion_tokens_details:J}=Z.usage;d={promptTokens:X??void 0,completionTokens:ae??void 0},(J==null?void 0:J.reasoning_tokens)!=null&&(v.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(B==null?void 0:B.cached_tokens)!=null&&(v.openai.cachedPromptTokens=B==null?void 0:B.cached_tokens)}const q=Z.choices[0];if((q==null?void 0:q.finish_reason)!=null&&(u=Wv(q.finish_reason)),(q==null?void 0:q.delta)==null)return;const ue=q.delta;ue.content!=null&&x.enqueue({type:"text-delta",textDelta:ue.content});const ie=v3(q==null?void 0:q.logprobs);ie!=null&&ie.length&&(h===void 0&&(h=[]),h.push(...ie));const ne=y&&ue.function_call!=null?[{type:"function",id:Bo(),function:ue.function_call,index:0}]:ue.tool_calls;if(ne!=null)for(const X of ne){const ae=X.index;if(l[ae]==null){if(X.type!=="function")throw new _h({data:X,message:"Expected 'function' type."});if(X.id==null)throw new _h({data:X,message:"Expected 'id' to be a string."});if(((w=X.function)==null?void 0:w.name)==null)throw new _h({data:X,message:"Expected 'function.name' to be a string."});l[ae]={id:X.id,type:"function",function:{name:X.function.name,arguments:(S=X.function.arguments)!=null?S:""},hasFinished:!1};const J=l[ae];((E=J.function)==null?void 0:E.name)!=null&&((C=J.function)==null?void 0:C.arguments)!=null&&(J.function.arguments.length>0&&x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),m3(J.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=J.id)!=null?k:Bo(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const B=l[ae];B.hasFinished||(((I=X.function)==null?void 0:I.arguments)!=null&&(B.function.arguments+=(j=(R=X.function)==null?void 0:R.arguments)!=null?j:""),x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:B.id,toolName:B.function.name,argsTextDelta:(F=X.function.arguments)!=null?F:""}),(($=B.function)==null?void 0:$.name)!=null&&((G=B.function)==null?void 0:G.arguments)!=null&&m3(B.function.arguments)&&(x.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(D=B.id)!=null?D:Bo(),toolName:B.function.name,args:B.function.arguments}),B.hasFinished=!0))}},flush(b){var x,w;b.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(x=d.promptTokens)!=null?x:NaN,completionTokens:(w=d.completionTokens)!=null?w:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},fM=U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish(),prompt_tokens_details:U.object({cached_tokens:U.number().nullish()}).nullish(),completion_tokens_details:U.object({reasoning_tokens:U.number().nullish(),accepted_prediction_tokens:U.number().nullish(),rejected_prediction_tokens:U.number().nullish()}).nullish()}).nullish(),wW=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({message:U.object({role:U.literal("assistant").nullish(),content:U.string().nullish(),function_call:U.object({arguments:U.string(),name:U.string()}).nullish(),tool_calls:U.array(U.object({id:U.string().nullish(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).nullish()}),index:U.number(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullish()})),usage:fM}),xW=U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).nullish(),content:U.string().nullish(),function_call:U.object({name:U.string().optional(),arguments:U.string().optional()}).nullish(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullable().optional(),index:U.number()})),usage:fM}),Dk]);function sC(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function _W(e){return e.startsWith("gpt-4o-audio-preview")}function SW(e){var t,n;return sC(e)?(n=(t=EW[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var EW={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function CW({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Fl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ar({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ar({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Ar({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function w3(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var kW=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h}){var m;const y=e.type,v=[];s!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:x}=CW({prompt:n,inputFormat:t}),w=[...x??[],...u??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,prompt:b,stop:w.length>0?w:void 0};switch(y){case"regular":{if((m=e.tools)!=null&&m.length)throw new Ar({functionality:"tools"});if(e.toolChoice)throw new Ar({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new Ar({functionality:"object-json mode"});case"object-tool":throw new Ar({functionality:"object-tool mode"});default:{const E=y;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await no({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Zo(this.config.headers(),e.headers),body:t,failedResponseHandler:gu,successfulResponseHandler:Yd(TW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:Wv(l.finish_reason),logprobs:w3(l.logprobs),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r,body:i},response:Zv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await no({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Zo(this.config.headers(),e.headers),body:r,failedResponseHandler:gu,successfulResponseHandler:jk(AW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,y){if(!m.success){l="error",y.enqueue({type:"error",error:m.error});return}const v=m.value;if("error"in v){l="error",y.enqueue({type:"error",error:v.error});return}h&&(h=!1,y.enqueue({type:"response-metadata",...Zv(v)})),v.usage!=null&&(u={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=Wv(b.finish_reason)),(b==null?void 0:b.text)!=null&&y.enqueue({type:"text-delta",textDelta:b.text});const x=w3(b==null?void 0:b.logprobs);x!=null&&x.length&&(d===void 0&&(d=[]),d.push(...x))},flush(m){m.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},TW=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullish()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()})}),AW=U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string().nullish(),index:U.number(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullish()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),Dk]),NW=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Nk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await no({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Zo(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:gu,successfulResponseHandler:Yd(RW),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},RW=U.object({data:U.array(U.object({embedding:U.array(U.number())})),usage:U.object({prompt_tokens:U.number()}).nullish()}),IW={"dall-e-3":1,"dall-e-2":10},jW=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:IW[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const y=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await no({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Zo(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:gu,successfulResponseHandler:Yd(OW),abortSignal:o,fetch:this.config.fetch});return{images:v.data.map(x=>x.b64_json),warnings:m,response:{timestamp:y,modelId:this.modelId,headers:b}}}},OW=U.object({data:U.array(U.object({b64_json:U.string()}))});function DW({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=t;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{n.push({role:"user",content:i.map((s,o)=>{var l,u,d,h;switch(s.type){case"text":return{type:"input_text",text:s.text};case"image":return{type:"input_image",image_url:s.image instanceof URL?s.image.toString():`data:${(l=s.mimeType)!=null?l:"image/jpeg"};base64,${jh(s.image)}`,detail:(d=(u=s.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail};case"file":{if(s.data instanceof URL)throw new Ar({functionality:"File URLs in user messages"});switch(s.mimeType){case"application/pdf":return{type:"input_file",filename:(h=s.filename)!=null?h:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${s.data}`};default:throw new Ar({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const s of i)switch(s.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:s.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:s.toolCallId,name:s.toolName,arguments:JSON.stringify(s.args)});break}}break}case"tool":{for(const s of i)n.push({type:"function_call_output",call_id:s.toolCallId,output:JSON.stringify(s.result)});break}default:{const s=a;throw new Error(`Unsupported role: ${s}`)}}return{messages:n,warnings:r}}function x3({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function MW({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)switch(l.type){case"function":s.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":s.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:s,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:s,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=o;throw new Ar({functionality:`Unsupported tool choice type: ${l}`})}}}var PW=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:s,frequencyPenalty:o,seed:l,prompt:u,providerMetadata:d,responseFormat:h}){var m,y,v;const b=[],x=JW(this.modelId),w=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),s!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=DW({prompt:u,systemMessageMode:x.systemMessageMode});b.push(...E);const C=aK({provider:"openai",providerOptions:d,schema:QW}),k=(m=C==null?void 0:C.strictSchemas)!=null?m:!0,I={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(y=h.name)!=null?y:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,...x.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},...x.requiredAutoTruncation&&{truncation:"auto"}};switch(x.isReasoningModel&&(I.temperature!=null&&(I.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),I.top_p!=null&&(I.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),w){case"regular":{const{tools:R,tool_choice:j,toolWarnings:F}=MW({mode:e,strict:k});return{args:{...I,tools:R,tool_choice:j},warnings:[...b,...F]}}case"object-json":return{args:{...I,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...I,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const R=w;throw new Error(`Unsupported type: ${R}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=this.getArgs(e),{responseHeaders:l,value:u,rawValue:d}=await no({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Zo(this.config.headers(),e.headers),body:s,failedResponseHandler:gu,successfulResponseHandler:Yd(U.object({id:U.string(),created_at:U.number(),model:U.string(),output:U.array(U.discriminatedUnion("type",[U.object({type:U.literal("message"),role:U.literal("assistant"),content:U.array(U.object({type:U.literal("output_text"),text:U.string(),annotations:U.array(U.object({type:U.literal("url_citation"),start_index:U.number(),end_index:U.number(),url:U.string(),title:U.string()}))}))}),U.object({type:U.literal("function_call"),call_id:U.string(),name:U.string(),arguments:U.string()}),U.object({type:U.literal("web_search_call")}),U.object({type:U.literal("computer_call")}),U.object({type:U.literal("reasoning")})])),incomplete_details:U.object({reason:U.string()}).nullable(),usage:hM})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u.output.filter(y=>y.type==="message").flatMap(y=>y.content).filter(y=>y.type==="output_text"),m=u.output.filter(y=>y.type==="function_call").map(y=>({toolCallType:"function",toolCallId:y.call_id,toolName:y.name,args:y.arguments}));return{text:h.map(y=>y.text).join(`
`),sources:h.flatMap(y=>y.annotations.map(v=>{var b,x,w;return{sourceType:"url",id:(w=(x=(b=this.config).generateId)==null?void 0:x.call(b))!=null?w:Bo(),url:v.url,title:v.title}})),finishReason:x3({finishReason:(t=u.incomplete_details)==null?void 0:t.reason,hasToolCalls:m.length>0}),toolCalls:m.length>0?m:void 0,usage:{promptTokens:u.usage.input_tokens,completionTokens:u.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:l,body:d},request:{body:JSON.stringify(s)},response:{id:u.id,timestamp:new Date(u.created_at*1e3),modelId:u.model},providerMetadata:{openai:{responseId:u.id,cachedPromptTokens:(r=(n=u.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=u.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:o}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await no({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Zo(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:gu,successfulResponseHandler:jk(qW),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let s="unknown",o=NaN,l=NaN,u=null,d=null,h=null;const m={};let y=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,k,I,R;if(!v.success){s="error",b.enqueue({type:"error",error:v.error});return}const j=v.value;if(YW(j))j.item.type==="function_call"&&(m[j.output_index]={toolName:j.item.name,toolCallId:j.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:j.item.call_id,toolName:j.item.name,argsTextDelta:j.item.arguments}));else if(ZW(j)){const F=m[j.output_index];F!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:F.toolCallId,toolName:F.toolName,argsTextDelta:j.delta})}else WW(j)?(h=j.response.id,b.enqueue({type:"response-metadata",id:j.response.id,timestamp:new Date(j.response.created_at*1e3),modelId:j.response.model})):VW(j)?b.enqueue({type:"text-delta",textDelta:j.delta}):GW(j)&&j.item.type==="function_call"?(m[j.output_index]=void 0,y=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:j.item.call_id,toolName:j.item.name,args:j.item.arguments})):KW(j)?(s=x3({finishReason:(x=j.response.incomplete_details)==null?void 0:x.reason,hasToolCalls:y}),o=j.response.usage.input_tokens,l=j.response.usage.output_tokens,u=(S=(w=j.response.usage.input_tokens_details)==null?void 0:w.cached_tokens)!=null?S:u,d=(C=(E=j.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:d):XW(j)&&b.enqueue({type:"source",source:{sourceType:"url",id:(R=(I=(k=i.config).generateId)==null?void 0:I.call(k))!=null?R:Bo(),url:j.annotation.url,title:j.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:s,usage:{promptTokens:o,completionTokens:l},...(u!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:u,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},hM=U.object({input_tokens:U.number(),input_tokens_details:U.object({cached_tokens:U.number().nullish()}).nullish(),output_tokens:U.number(),output_tokens_details:U.object({reasoning_tokens:U.number().nullish()}).nullish()}),FW=U.object({type:U.literal("response.output_text.delta"),delta:U.string()}),LW=U.object({type:U.enum(["response.completed","response.incomplete"]),response:U.object({incomplete_details:U.object({reason:U.string()}).nullish(),usage:hM})}),$W=U.object({type:U.literal("response.created"),response:U.object({id:U.string(),created_at:U.number(),model:U.string()})}),BW=U.object({type:U.literal("response.output_item.done"),output_index:U.number(),item:U.discriminatedUnion("type",[U.object({type:U.literal("message")}),U.object({type:U.literal("function_call"),id:U.string(),call_id:U.string(),name:U.string(),arguments:U.string(),status:U.literal("completed")})])}),zW=U.object({type:U.literal("response.function_call_arguments.delta"),item_id:U.string(),output_index:U.number(),delta:U.string()}),UW=U.object({type:U.literal("response.output_item.added"),output_index:U.number(),item:U.discriminatedUnion("type",[U.object({type:U.literal("message")}),U.object({type:U.literal("function_call"),id:U.string(),call_id:U.string(),name:U.string(),arguments:U.string()})])}),HW=U.object({type:U.literal("response.output_text.annotation.added"),annotation:U.object({type:U.literal("url_citation"),url:U.string(),title:U.string()})}),qW=U.union([FW,LW,$W,BW,zW,UW,HW,U.object({type:U.string()}).passthrough()]);function VW(e){return e.type==="response.output_text.delta"}function GW(e){return e.type==="response.output_item.done"}function KW(e){return e.type==="response.completed"||e.type==="response.incomplete"}function WW(e){return e.type==="response.created"}function ZW(e){return e.type==="response.function_call_arguments.delta"}function YW(e){return e.type==="response.output_item.added"}function XW(e){return e.type==="response.output_text.annotation.added"}function JW(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var QW=U.object({metadata:U.any().nullish(),parallelToolCalls:U.boolean().nullish(),previousResponseId:U.string().nullish(),store:U.boolean().nullish(),user:U.string().nullish(),reasoningEffort:U.string().nullish(),strictSchemas:U.boolean().nullish(),instructions:U.string().nullish()}),eZ=U.object({});function tZ({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:eZ}}var nZ={webSearchPreview:tZ};function pM(e={}){var t,n,r;const a=(t=tM(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",s=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${XG({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(b,x={})=>new vW(b,x,{provider:`${s}.chat`,url:({path:w})=>`${a}${w}`,headers:o,compatibility:i,fetch:e.fetch}),u=(b,x={})=>new kW(b,x,{provider:`${s}.completion`,url:({path:w})=>`${a}${w}`,headers:o,compatibility:i,fetch:e.fetch}),d=(b,x={})=>new NW(b,x,{provider:`${s}.embedding`,url:({path:w})=>`${a}${w}`,headers:o,fetch:e.fetch}),h=(b,x={})=>new jW(b,x,{provider:`${s}.image`,url:({path:w})=>`${a}${w}`,headers:o,fetch:e.fetch}),m=(b,x)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?u(b,x):l(b,x)},y=b=>new PW(b,{provider:`${s}.responses`,url:({path:x})=>`${a}${x}`,headers:o,fetch:e.fetch}),v=function(b,x){return m(b,x)};return v.languageModel=m,v.chat=l,v.completion=u,v.responses=y,v.embedding=d,v.textEmbedding=d,v.textEmbeddingModel=d,v.image=h,v.imageModel=h,v.tools=nZ,v}pM({compatibility:"strict"});var mM="vercel.ai.error",rZ=Symbol.for(mM),gM,aZ=class yM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[gM]=!0,this.name=t,this.cause=r}static isInstance(t){return yM.hasMarker(t,mM)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};gM=rZ;var oi=aZ,bM="AI_APICallError",vM=`vercel.ai.error.${bM}`,iZ=Symbol.for(vM),wM,zl=class extends oi{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:bM,message:t,cause:o}),this[wM]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return oi.hasMarker(t,vM)}};wM=iZ;var xM="AI_EmptyResponseBodyError",_M=`vercel.ai.error.${xM}`,sZ=Symbol.for(_M),SM,oZ=class extends oi{constructor({message:t="Empty response body"}={}){super({name:xM,message:t}),this[SM]=!0}static isInstance(t){return oi.hasMarker(t,_M)}};SM=sZ;function EM(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var CM="AI_InvalidArgumentError",kM=`vercel.ai.error.${CM}`,lZ=Symbol.for(kM),TM,AM=class extends oi{constructor({message:t,cause:n,argument:r}){super({name:CM,message:t,cause:n}),this[TM]=!0,this.argument=r}static isInstance(t){return oi.hasMarker(t,kM)}};TM=lZ;var NM="AI_JSONParseError",RM=`vercel.ai.error.${NM}`,cZ=Symbol.for(RM),IM,Yv=class extends oi{constructor({text:t,cause:n}){super({name:NM,message:`JSON parsing failed: Text: ${t}.
Error message: ${EM(n)}`,cause:n}),this[IM]=!0,this.text=t}static isInstance(t){return oi.hasMarker(t,RM)}};IM=cZ;var jM="AI_LoadAPIKeyError",OM=`vercel.ai.error.${jM}`,uZ=Symbol.for(OM),DM,Sb=class extends oi{constructor({message:t}){super({name:jM,message:t}),this[DM]=!0}static isInstance(t){return oi.hasMarker(t,OM)}};DM=uZ;var MM="AI_TooManyEmbeddingValuesForCallError",PM=`vercel.ai.error.${MM}`,dZ=Symbol.for(PM),FM,fZ=class extends oi{constructor(e){super({name:MM,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[FM]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return oi.hasMarker(e,PM)}};FM=dZ;var LM="AI_TypeValidationError",$M=`vercel.ai.error.${LM}`,hZ=Symbol.for($M),BM,pZ=class oC extends oi{constructor({value:t,cause:n}){super({name:LM,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${EM(n)}`,cause:n}),this[BM]=!0,this.value=t}static isInstance(t){return oi.hasMarker(t,$M)}static wrap({value:t,cause:n}){return oC.isInstance(n)&&n.value===t?n:new oC({value:t,cause:n})}};BM=hZ;var Xv=pZ,zM="AI_UnsupportedFunctionalityError",UM=`vercel.ai.error.${zM}`,mZ=Symbol.for(UM),HM,Ev=class extends oi{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:zM,message:n}),this[HM]=!0,this.functionality=t}static isInstance(t){return oi.hasMarker(t,UM)}};HM=mZ;let gZ=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var yZ={};function lC(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function bZ(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,y=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=vZ(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function vZ(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function ix(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var wZ=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=gZ(n,t);if(e==null)return a;if(n.includes(r))throw new AM({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},xZ=wZ();function _Z(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function IS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function SZ({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Sb({message:`${r} API key must be a string.`});if(typeof ta>"u")throw new Sb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=yZ[t],e==null)throw new Sb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Sb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var cC=Symbol.for("vercel.ai.validator");function EZ(e){return{[cC]:!0,validate:e}}function CZ(e){return typeof e=="object"&&e!==null&&cC in e&&e[cC]===!0&&"validate"in e}function kZ(e){return CZ(e)?e:TZ(e)}function TZ(e){return EZ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function AZ({value:e,schema:t}){const n=Mk({value:e,schema:t});if(!n.success)throw Xv.wrap({value:e,cause:n.error});return n.value}function Mk({value:e,schema:t}){const n=kZ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Xv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Xv.wrap({value:e,cause:r})}}}function NZ({text:e,schema:t}){try{const n=uo.parse(e);return t==null?n:AZ({value:n,schema:t})}catch(n){throw Yv.isInstance(n)||Xv.isInstance(n)?n:new Yv({text:e,cause:n})}}function qM({text:e,schema:t}){try{const n=uo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Mk({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Yv.isInstance(n)?n:new Yv({text:e,cause:n})}}}function RZ({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Mk({value:t[e],schema:n});if(!r.success)throw new AM({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var IZ=()=>globalThis.fetch,uC=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>jZ({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),jZ=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=IZ()})=>{try{const o=await s(e,{method:"POST",headers:_Z(t),body:n.content,signal:i}),l=ix(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw IS(d)||zl.isInstance(d)?d:new zl({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(IS(u)||zl.isInstance(u))?u:new zl({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(IS(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new zl({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function dC(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var OZ=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=ix(r);if(s.trim()==="")return{responseHeaders:o,value:new zl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=NZ({text:s,schema:e});return{responseHeaders:o,value:new zl({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new zl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},DZ=e=>async({response:t})=>{const n=ix(t);if(t.body==null)throw new oZ({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(bZ()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(qM({text:r,schema:e}))}}))}},VM=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=qM({text:a,schema:e}),s=ix(t);if(!i.success)throw new zl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:MZ}=globalThis;function PZ(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return MZ(t)}function FZ(e){return e==null?void 0:e.replace(/\/$/,"")}function Cs(e){if(LZ(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:s,anyOf:o,oneOf:l,format:u,const:d,minLength:h,enum:m}=e,y={};if(n&&(y.description=n),r&&(y.required=r),u&&(y.format=u),d!==void 0&&(y.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(y.type=t.filter(v=>v!=="null")[0],y.nullable=!0):y.type=t:t==="null"?y.type="null":y.type=t),m!==void 0&&(y.enum=m),a!=null&&(y.properties=Object.entries(a).reduce((v,[b,x])=>(v[b]=Cs(x),v),{})),i&&(y.items=Array.isArray(i)?i.map(Cs):Cs(i)),s&&(y.allOf=s.map(Cs)),o)if(o.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=Cs(v[0]);typeof b=="object"&&(y.nullable=!0,Object.assign(y,b))}else y.anyOf=v.map(Cs),y.nullable=!0}else y.anyOf=o.map(Cs);return l&&(y.oneOf=l.map(Cs)),h!==void 0&&(y.minLength=h),y}function LZ(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function $Z(e){var t,n;const r=[],a=[];let i=!0;for(const{role:s,content:o}of e)switch(s){case"system":{if(!i)throw new Ev({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{i=!1;const l=[];for(const u of o)switch(u.type){case"text":{l.push({text:u.text});break}case"image":{l.push(u.image instanceof URL?{fileData:{mimeType:(t=u.mimeType)!=null?t:"image/jpeg",fileUri:u.image.toString()}}:{inlineData:{mimeType:(n=u.mimeType)!=null?n:"image/jpeg",data:PZ(u.image)}});break}case"file":{l.push(u.data instanceof URL?{fileData:{mimeType:u.mimeType,fileUri:u.data.toString()}}:{inlineData:{mimeType:u.mimeType,data:u.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new Ev({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new Ev({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function _3(e){return e.includes("/")?e:`models/${e}`}var BZ=U.object({error:U.object({code:U.number().nullable(),message:U.string(),status:U.string()})}),fC=OZ({errorSchema:BZ,errorToMessage:e=>e.error.message});function zZ(e,t,n,r){var a,i;const s=(a=e.tools)!=null&&a.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!u||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(s==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const d=[];for(const y of s)y.type==="provider-defined"?o.push({type:"unsupported-tool",tool:y}):d.push({name:y.name,description:(i=y.description)!=null?i:"",parameters:Cs(y.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:o};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:o};default:{const y=m;throw new Ev({functionality:`Unsupported tool choice type: ${y}`})}}}function S3({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var UZ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,y;const v=e.type,b=[],x=RZ({provider:"google",providerOptions:h,schema:GZ}),w={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:s,presencePenalty:o,stopSequences:l,seed:d,responseMimeType:(u==null?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(u==null?void 0:u.type)==="json"&&u.schema!=null&&this.supportsStructuredOutputs?Cs(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:x==null?void 0:x.responseModalities},{contents:S,systemInstruction:E}=$Z(t);switch(v){case"regular":{const{tools:C,toolConfig:k,toolWarnings:I}=zZ(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:w,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...I]}}case"object-json":return{args:{generationConfig:{...w,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?Cs(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:w,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(y=e.tool.description)!=null?y:"",parameters:Cs(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=await this.getArgs(e),l=JSON.stringify(s),u=lC(await dC(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:m}=await uC({url:`${this.config.baseURL}/${_3(this.modelId)}:generateContent`,headers:u,body:s,failedResponseHandler:fC,successfulResponseHandler:VM(qZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:y,...v}=s,b=h.candidates[0],x=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,w=E3({parts:x,generateId:this.config.generateId}),S=h.usageMetadata;return{text:C3(x),files:(t=k3(x))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:w,finishReason:S3({finishReason:b.finishReason,hasToolCalls:w!=null&&w.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:y,rawSettings:v},rawResponse:{headers:d,body:m},warnings:o,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:T3({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=lC(await dC(this.config.headers),e.headers),{responseHeaders:i,value:s}=await uC({url:`${this.config.baseURL}/${_3(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:fC,successfulResponseHandler:DZ(VZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let u="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let y=!1;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const I=v.value,R=I.usageMetadata;R!=null&&(d={promptTokens:(x=R.promptTokenCount)!=null?x:NaN,completionTokens:(w=R.candidatesTokenCount)!=null?w:NaN});const j=(S=I.candidates)==null?void 0:S[0];if(j==null)return;const F=j.content;if(F!=null){const $=C3(F.parts);$!=null&&b.enqueue({type:"text-delta",textDelta:$});const G=k3(F.parts);if(G!=null)for(const Z of G)b.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const D=E3({parts:F.parts,generateId:m});if(D!=null)for(const Z of D)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),y=!0}if(j.finishReason!=null){u=S3({finishReason:j.finishReason,hasToolCalls:y});const $=(E=T3({groundingMetadata:j.groundingMetadata,generateId:m}))!=null?E:[];for(const G of $)b.enqueue({type:"source",source:G});h={google:{groundingMetadata:(C=j.groundingMetadata)!=null?C:null,safetyRatings:(k=j.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:u,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function E3({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function C3(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function k3(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function T3({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var GM=U.object({role:U.string(),parts:U.array(U.union([U.object({text:U.string()}),U.object({functionCall:U.object({name:U.string(),args:U.unknown()})}),U.object({inlineData:U.object({mimeType:U.string(),data:U.string()})})])).nullish()}),HZ=U.object({web:U.object({uri:U.string(),title:U.string()}).nullish(),retrievedContext:U.object({uri:U.string(),title:U.string()}).nullish()}),KM=U.object({webSearchQueries:U.array(U.string()).nullish(),retrievalQueries:U.array(U.string()).nullish(),searchEntryPoint:U.object({renderedContent:U.string()}).nullish(),groundingChunks:U.array(HZ).nullish(),groundingSupports:U.array(U.object({segment:U.object({startIndex:U.number().nullish(),endIndex:U.number().nullish(),text:U.string().nullish()}),segment_text:U.string().nullish(),groundingChunkIndices:U.array(U.number()).nullish(),supportChunkIndices:U.array(U.number()).nullish(),confidenceScores:U.array(U.number()).nullish(),confidenceScore:U.array(U.number()).nullish()})).nullish(),retrievalMetadata:U.union([U.object({webDynamicRetrievalScore:U.number()}),U.object({})]).nullish()}),WM=U.object({category:U.string(),probability:U.string(),probabilityScore:U.number().nullish(),severity:U.string().nullish(),severityScore:U.number().nullish(),blocked:U.boolean().nullish()}),qZ=U.object({candidates:U.array(U.object({content:GM.nullish().or(U.object({}).strict()),finishReason:U.string().nullish(),safetyRatings:U.array(WM).nullish(),groundingMetadata:KM.nullish()})),usageMetadata:U.object({promptTokenCount:U.number().nullish(),candidatesTokenCount:U.number().nullish(),totalTokenCount:U.number().nullish()}).nullish()}),VZ=U.object({candidates:U.array(U.object({content:GM.nullish(),finishReason:U.string().nullish(),safetyRatings:U.array(WM).nullish(),groundingMetadata:KM.nullish()})).nullish(),usageMetadata:U.object({promptTokenCount:U.number().nullish(),candidatesTokenCount:U.number().nullish(),totalTokenCount:U.number().nullish()}).nullish()}),GZ=U.object({responseModalities:U.array(U.enum(["TEXT","IMAGE"])).nullish()}),KZ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new fZ({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=lC(await dC(this.config.headers),t),{responseHeaders:a,value:i}=await uC({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(s=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:s}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:fC,successfulResponseHandler:VM(WZ),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(s=>s.values),usage:void 0,rawResponse:{headers:a}}}},WZ=U.object({embeddings:U.array(U.object({values:U.array(U.number())}))});function ZZ(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function ZM(e={}){var t;const n=(t=FZ(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":SZ({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(o,l={})=>{var u;return new UZ(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(u=e.generateId)!=null?u:xZ,isSupportedUrl:ZZ,fetch:e.fetch})},i=(o,l={})=>new KZ(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(o,l)};return s.languageModel=a,s.chat=a,s.generativeAI=a,s.embedding=i,s.textEmbedding=i,s.textEmbeddingModel=i,s}ZM();var YM="vercel.ai.error",YZ=Symbol.for(YM),XM,XZ=class JM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[XM]=!0,this.name=t,this.cause=r}static isInstance(t){return JM.hasMarker(t,YM)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};XM=YZ;var za=XZ,QM="AI_APICallError",e8=`vercel.ai.error.${QM}`,JZ=Symbol.for(e8),t8,Ul=class extends za{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:s,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:QM,message:e,cause:s}),this[t8]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=o,this.data=l}static isInstance(e){return za.hasMarker(e,e8)}};t8=JZ;var n8="AI_EmptyResponseBodyError",r8=`vercel.ai.error.${n8}`,QZ=Symbol.for(r8),a8,eY=class extends za{constructor({message:e="Empty response body"}={}){super({name:n8,message:e}),this[a8]=!0}static isInstance(e){return za.hasMarker(e,r8)}};a8=QZ;function i8(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var s8="AI_InvalidArgumentError",o8=`vercel.ai.error.${s8}`,tY=Symbol.for(o8),l8,nY=class extends za{constructor({message:t,cause:n,argument:r}){super({name:s8,message:t,cause:n}),this[l8]=!0,this.argument=r}static isInstance(t){return za.hasMarker(t,o8)}};l8=tY;var c8="AI_InvalidPromptError",u8=`vercel.ai.error.${c8}`,rY=Symbol.for(u8),d8,aY=class extends za{constructor({prompt:e,message:t,cause:n}){super({name:c8,message:`Invalid prompt: ${t}`,cause:n}),this[d8]=!0,this.prompt=e}static isInstance(e){return za.hasMarker(e,u8)}};d8=rY;var f8="AI_InvalidResponseDataError",h8=`vercel.ai.error.${f8}`,iY=Symbol.for(h8),p8,jS=class extends za{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:f8,message:t}),this[p8]=!0,this.data=e}static isInstance(e){return za.hasMarker(e,h8)}};p8=iY;var m8="AI_JSONParseError",g8=`vercel.ai.error.${m8}`,sY=Symbol.for(g8),y8,Jv=class extends za{constructor({text:e,cause:t}){super({name:m8,message:`JSON parsing failed: Text: ${e}.
Error message: ${i8(t)}`,cause:t}),this[y8]=!0,this.text=e}static isInstance(e){return za.hasMarker(e,g8)}};y8=sY;var b8="AI_LoadAPIKeyError",v8=`vercel.ai.error.${b8}`,oY=Symbol.for(v8),w8,Eb=class extends za{constructor({message:e}){super({name:b8,message:e}),this[w8]=!0}static isInstance(e){return za.hasMarker(e,v8)}};w8=oY;var x8="AI_TypeValidationError",_8=`vercel.ai.error.${x8}`,lY=Symbol.for(_8),S8,cY=class hC extends za{constructor({value:t,cause:n}){super({name:x8,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${i8(n)}`,cause:n}),this[S8]=!0,this.value=t}static isInstance(t){return za.hasMarker(t,_8)}static wrap({value:t,cause:n}){return hC.isInstance(n)&&n.value===t?n:new hC({value:t,cause:n})}};S8=lY;var Qv=cY,E8="AI_UnsupportedFunctionalityError",C8=`vercel.ai.error.${E8}`,uY=Symbol.for(C8),k8,Ts=class extends za{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:E8,message:t}),this[k8]=!0,this.functionality=e}static isInstance(e){return za.hasMarker(e,C8)}};k8=uY;let dY=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},A3=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function OS(e){}function fY(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=OS,onError:n=OS,onRetry:r=OS,onComment:a}=e;let i="",s=!0,o,l="",u="";function d(b){const x=s?b.replace(/^\xEF\xBB\xBF/,""):b,[w,S]=hY(`${i}${x}`);for(const E of w)h(E);i=S,s=!1}function h(b){if(b===""){y();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const x=b.indexOf(":");if(x!==-1){const w=b.slice(0,x),S=b[x+1]===" "?2:1,E=b.slice(x+S);m(w,E,b);return}m(b,"",b)}function m(b,x,w){switch(b){case"event":u=x;break;case"data":l=`${l}${x}
`;break;case"id":o=x.includes("\0")?void 0:x;break;case"retry":/^\d+$/.test(x)?r(parseInt(x,10)):n(new A3(`Invalid \`retry\` value: "${x}"`,{type:"invalid-retry",value:x,line:w}));break;default:n(new A3(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:x,line:w}));break}}function y(){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u=""}function v(b={}){i&&b.consume&&h(i),s=!0,o=void 0,l="",u="",i=""}return{feed:d,reset:v}}function hY(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(a!==-1&&i!==-1?s=Math.min(a,i):a!==-1?s=a:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const o=e.slice(r,s);t.push(o),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class pY extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=fY({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var mY={};function ew(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function sx(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var gY=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=dY(n,t);if(e==null)return a;if(n.includes(r))throw new nY({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Cb=gY();function yY(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function DS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function bY({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Eb({message:`${r} API key must be a string.`});if(typeof ta>"u")throw new Eb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=mY[t],e==null)throw new Eb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Eb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var pC=Symbol.for("vercel.ai.validator");function vY(e){return{[pC]:!0,validate:e}}function wY(e){return typeof e=="object"&&e!==null&&pC in e&&e[pC]===!0&&"validate"in e}function xY(e){return wY(e)?e:_Y(e)}function _Y(e){return vY(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function SY({value:e,schema:t}){const n=T8({value:e,schema:t});if(!n.success)throw Qv.wrap({value:e,cause:n.error});return n.value}function T8({value:e,schema:t}){const n=xY(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Qv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Qv.wrap({value:e,cause:r})}}}function EY({text:e,schema:t}){try{const n=uo.parse(e);return t==null?n:SY({value:n,schema:t})}catch(n){throw Jv.isInstance(n)||Qv.isInstance(n)?n:new Jv({text:e,cause:n})}}function A8({text:e,schema:t}){try{const n=uo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=T8({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Jv.isInstance(n)?n:new Jv({text:e,cause:n})}}}function MS(e){try{return uo.parse(e),!0}catch{return!1}}var CY=()=>globalThis.fetch,tw=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>kY({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),kY=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=CY()})=>{try{const o=await s(e,{method:"POST",headers:yY(t),body:n.content,signal:i}),l=sx(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw DS(d)||Ul.isInstance(d)?d:new Ul({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(DS(u)||Ul.isInstance(u))?u:new Ul({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(DS(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new Ul({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},TY=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=sx(r);if(s.trim()==="")return{responseHeaders:o,value:new Ul({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=EY({text:s,schema:e});return{responseHeaders:o,value:new Ul({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new Ul({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},N8=e=>async({response:t})=>{const n=sx(t);if(t.body==null)throw new eY({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new pY).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(A8({text:r,schema:e}))}}))}},R8=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=A8({text:a,schema:e}),s=sx(t);if(!i.success)throw new Ul({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:AY}=globalThis;function NY(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return AY(t)}function RY(e){return e==null?void 0:e.replace(/\/$/,"")}var IY=Object.defineProperty,jY=Object.defineProperties,OY=Object.getOwnPropertyDescriptors,nw=Object.getOwnPropertySymbols,I8=Object.prototype.hasOwnProperty,j8=Object.prototype.propertyIsEnumerable,N3=(e,t,n)=>t in e?IY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rs=(e,t)=>{for(var n in t||(t={}))I8.call(t,n)&&N3(e,n,t[n]);if(nw)for(var n of nw(t))j8.call(t,n)&&N3(e,n,t[n]);return e},Cv=(e,t)=>jY(e,OY(t)),rw=(e,t)=>{var n={};for(var r in e)I8.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&nw)for(var r of nw(e))t.indexOf(r)<0&&j8.call(e,r)&&(n[r]=e[r]);return n};function Io(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function DY(e){var t,n,r;const a=[];for(const{role:i,content:s,providerMetadata:o}of e)switch(i){case"system":{a.push({role:"system",content:s,cache_control:Io(o)});break}case"user":{if(s.length===1&&((t=s[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:s[0].text,cache_control:(n=Io(o))!=null?n:Io(s[0].providerMetadata)});break}const l=Io(o),u=s.map(d=>{var h,m,y,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=Io(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(m=d.mimeType)!=null?m:"image/jpeg"};base64,${NY(d.image)}`},cache_control:(y=Io(d.providerMetadata))!=null?y:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=Io(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:u});break}case"assistant":{let l="";const u=[];for(const d of s)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{u.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:u.length>0?u:void 0,cache_control:Io(o)});break}case"tool":{for(const l of s)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=Io(o))!=null?r:Io(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function R3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function aw(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Pk=U.object({error:U.object({message:U.string(),type:U.string(),param:U.any().nullable(),code:U.string().nullable()})}),iw=TY({errorSchema:Pk,errorToMessage:e=>e.error.message});function MY(e){return"parameters"in e}var PY=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:s,seed:o,stopSequences:l,responseFormat:u,topK:d,providerMetadata:h}){var m;const y=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},b=rs(rs(rs({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:s,seed:o,stop:l,response_format:u,top_k:d,messages:DY(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(y){case"regular":return rs(rs({},b),$Y(e));case"object-json":return Cv(rs({},b),{response_format:{type:"json_object"}});case"object-tool":return Cv(rs({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const x=y;throw new Ts({functionality:`${x} mode`})}}}async doGenerate(e){var t,n,r,a,i,s,o;const l=this.getArgs(e),{responseHeaders:u,value:d}=await tw({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ew(this.config.headers(),e.headers),body:l,failedResponseHandler:iw,successfulResponseHandler:R8(FY),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:m}=h,y=rw(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var x;return{toolCallType:"function",toolCallId:(x=b.id)!=null?x:Cb(),toolName:b.function.name,args:b.function.arguments}}),finishReason:aw(v.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(o=(s=d.usage)==null?void 0:s.completion_tokens)!=null?o:0},rawCall:{rawPrompt:m,rawSettings:y},rawResponse:{headers:u},warnings:[],logprobs:R3(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await tw({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ew(this.config.headers(),e.headers),body:Cv(rs({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:iw,successfulResponseHandler:N8(LY),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,s=rw(a,["messages"]),o=[];let l="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var y,v,b,x,w,S,E,C,k,I,R,j;if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const F=h.value;if("error"in F){l="error",m.enqueue({type:"error",error:F.error});return}F.id&&m.enqueue({type:"response-metadata",id:F.id}),F.model&&m.enqueue({type:"response-metadata",modelId:F.model}),F.usage!=null&&(u={promptTokens:F.usage.prompt_tokens,completionTokens:F.usage.completion_tokens});const $=F.choices[0];if(($==null?void 0:$.finish_reason)!=null&&(l=aw($.finish_reason)),($==null?void 0:$.delta)==null)return;const G=$.delta;G.content!=null&&m.enqueue({type:"text-delta",textDelta:G.content}),G.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:G.reasoning});const D=R3($==null?void 0:$.logprobs);if(D!=null&&D.length&&(d===void 0&&(d=[]),d.push(...D)),G.tool_calls!=null)for(const Z of G.tool_calls){const q=Z.index;if(o[q]==null){if(Z.type!=="function")throw new jS({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new jS({data:Z,message:"Expected 'id' to be a string."});if(((y=Z.function)==null?void 0:y.name)==null)throw new jS({data:Z,message:"Expected 'function.name' to be a string."});o[q]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ie=o[q];if(ie==null)throw new Error("Tool call is missing");((b=ie.function)==null?void 0:b.name)!=null&&((x=ie.function)==null?void 0:x.arguments)!=null&&MS(ie.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:ie.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(w=ie.id)!=null?w:Cb(),toolName:ie.function.name,args:ie.function.arguments}),ie.sent=!0);continue}const ue=o[q];if(ue==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(ue.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ue.id,toolName:ue.function.name,argsTextDelta:(k=Z.function.arguments)!=null?k:""}),((I=ue.function)==null?void 0:I.name)!=null&&((R=ue.function)==null?void 0:R.arguments)!=null&&MS(ue.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(j=ue.id)!=null?j:Cb(),toolName:ue.function.name,args:ue.function.arguments}),ue.sent=!0)}},flush(h){var m;if(l==="tool-calls")for(const y of o)y.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=y.id)!=null?m:Cb(),toolName:y.function.name,args:MS(y.function.arguments)?y.function.arguments:"{}"}),y.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},O8=U.object({id:U.string().optional(),model:U.string().optional(),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number(),total_tokens:U.number()}).nullish()}),FY=O8.extend({choices:U.array(U.object({message:U.object({role:U.literal("assistant"),content:U.string().nullable().optional(),reasoning:U.string().nullable().optional(),tool_calls:U.array(U.object({id:U.string().optional().nullable(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).optional()}),index:U.number(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullable().optional(),finish_reason:U.string().optional().nullable()}))}),LY=U.union([O8.extend({choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).optional(),content:U.string().nullish(),reasoning:U.string().nullish().optional(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),logprobs:U.object({content:U.array(U.object({token:U.string(),logprob:U.number(),top_logprobs:U.array(U.object({token:U.string(),logprob:U.number()}))})).nullable()}).nullish(),finish_reason:U.string().nullable().optional(),index:U.number()}))}),Pk]);function $Y(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(s=>MY(s)?{type:"function",function:{name:s.name,description:s.description,parameters:s.parameters}}:{type:"function",function:{name:s.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const s=i;throw new Error(`Unsupported tool choice type: ${s}`)}}}function BY({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new aY({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ts({functionality:"images"});case"file":throw new Ts({functionality:"file attachments"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ts({functionality:"tool-call messages"});case"reasoning":throw new Ts({functionality:"reasoning messages"});case"redacted-reasoning":throw new Ts({functionality:"redacted reasoning messages"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Ts({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a}}function I3(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,s])=>({token:i,logprob:s})):[]}})}var zY=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:s,presencePenalty:o,seed:l,responseFormat:u,topK:d,stopSequences:h,providerMetadata:m}){var y,v;const b=e.type,x=(y=m==null?void 0:m.openrouter)!=null?y:{},{prompt:w}=BY({prompt:n,inputFormat:t}),S=rs(rs(rs({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:o,seed:l,stop:h,response_format:u,top_k:d,prompt:w,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),x);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new Ts({functionality:"tools"});if(e.toolChoice)throw new Ts({functionality:"toolChoice"});return S}case"object-json":throw new Ts({functionality:"object-json mode"});case"object-tool":throw new Ts({functionality:"object-tool mode"});default:{const E=b;throw new Ts({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const s=this.getArgs(e),{responseHeaders:o,value:l}=await tw({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ew(this.config.headers(),e.headers),body:s,failedResponseHandler:iw,successfulResponseHandler:R8(j3),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=s,{prompt:d}=u,h=rw(u,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const m=l.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:aw(m.finish_reason),logprobs:I3(m.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await tw({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ew(this.config.headers(),e.headers),body:Cv(rs({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:iw,successfulResponseHandler:N8(j3),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,s=rw(a,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){o="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;if("error"in m){o="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(l={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const y=m.choices[0];(y==null?void 0:y.finish_reason)!=null&&(o=aw(y.finish_reason)),(y==null?void 0:y.text)!=null&&h.enqueue({type:"text-delta",textDelta:y.text});const v=I3(y==null?void 0:y.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:o,logprobs:u,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},j3=U.union([U.object({id:U.string().optional(),model:U.string().optional(),choices:U.array(U.object({text:U.string(),reasoning:U.string().nullish().optional(),finish_reason:U.string().nullish(),index:U.number(),logprobs:U.object({tokens:U.array(U.string()),token_logprobs:U.array(U.number()),top_logprobs:U.array(U.record(U.string(),U.number())).nullable()}).nullable().optional()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).optional().nullable()}),Pk]);function D8(e={}){var t,n,r;const a=(n=RY((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",s=()=>rs({Authorization:`Bearer ${bY({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(h,m={})=>new PY(h,m,{provider:"openrouter.chat",url:({path:y})=>`${a}${y}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,m={})=>new zY(h,m,{provider:"openrouter.completion",url:({path:y})=>`${a}${y}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,m):o(h,m)},d=function(h,m){return u(h,m)};return d.languageModel=u,d.chat=o,d.completion=l,d}D8({compatibility:"strict"});var pd={},PS={},O3;function D3(){return O3||(O3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(PS)),PS}var M3;function UY(){return M3||(M3=1,function(e){var t=pd&&pd.__createBinding||(Object.create?function(u,d,h,m){m===void 0&&(m=h);var y=Object.getOwnPropertyDescriptor(d,h);(!y||("get"in y?!d.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,m,y)}:function(u,d,h,m){m===void 0&&(m=h),u[m]=d[h]}),n=pd&&pd.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,u,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=D3();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(D3(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function s(u,d=r.Allow.ALL){if(typeof u!="string")throw new TypeError(`expecting str, got ${typeof u}`);if(!u.trim())throw new Error(`${u} is empty`);return o(u.trim(),d)}e.parseJSON=s;const o=(u,d)=>{const h=u.length;let m=0;const y=k=>{throw new a(`${k} at position ${m}`)},v=k=>{throw new i(`${k} at position ${m}`)},b=()=>(C(),m>=h&&y("Unexpected end of input"),u[m]==='"'?x():u[m]==="{"?w():u[m]==="["?S():u.substring(m,m+4)==="null"||r.Allow.NULL&d&&h-m<4&&"null".startsWith(u.substring(m))?(m+=4,null):u.substring(m,m+4)==="true"||r.Allow.BOOL&d&&h-m<4&&"true".startsWith(u.substring(m))?(m+=4,!0):u.substring(m,m+5)==="false"||r.Allow.BOOL&d&&h-m<5&&"false".startsWith(u.substring(m))?(m+=5,!1):u.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&d&&h-m<8&&"Infinity".startsWith(u.substring(m))?(m+=8,1/0):u.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-m&&h-m<9&&"-Infinity".startsWith(u.substring(m))?(m+=9,-1/0):u.substring(m,m+3)==="NaN"||r.Allow.NAN&d&&h-m<3&&"NaN".startsWith(u.substring(m))?(m+=3,NaN):E()),x=()=>{const k=m;let I=!1;for(m++;m<h&&(u[m]!=='"'||I&&u[m-1]==="\\");)I=u[m]==="\\"?!I:!1,m++;if(u.charAt(m)=='"')try{return JSON.parse(u.substring(k,++m-Number(I)))}catch(R){v(String(R))}else if(r.Allow.STR&d)try{return JSON.parse(u.substring(k,m-Number(I))+'"')}catch{return JSON.parse(u.substring(k,u.lastIndexOf("\\"))+'"')}y("Unterminated string literal")},w=()=>{m++,C();const k={};try{for(;u[m]!=="}";){if(C(),m>=h&&r.Allow.OBJ&d)return k;const I=x();C(),m++;try{const R=b();k[I]=R}catch(R){if(r.Allow.OBJ&d)return k;throw R}C(),u[m]===","&&m++}}catch{if(r.Allow.OBJ&d)return k;y("Expected '}' at end of object")}return m++,k},S=()=>{m++;const k=[];try{for(;u[m]!=="]";)k.push(b()),C(),u[m]===","&&m++}catch{if(r.Allow.ARR&d)return k;y("Expected ']' at end of array")}return m++,k},E=()=>{if(m===0){u==="-"&&v("Not sure what '-' is");try{return JSON.parse(u)}catch(I){if(r.Allow.NUM&d)try{return JSON.parse(u.substring(0,u.lastIndexOf("e")))}catch{}v(String(I))}}const k=m;for(u[m]==="-"&&m++;u[m]&&",]}".indexOf(u[m])===-1;)m++;m==h&&!(r.Allow.NUM&d)&&y("Unterminated number literal");try{return JSON.parse(u.substring(k,m))}catch{u.substring(k,m)==="-"&&y("Not sure what '-' is");try{return JSON.parse(u.substring(k,u.lastIndexOf("e")))}catch(R){v(String(R))}}},C=()=>{for(;m<h&&` 
\r	`.includes(u[m]);)m++};return b()},l=s;e.parse=l}(pd)),pd}var HY=UY();function FS(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new Ar({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(jh(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const s of n)switch(s.type){case"text":{a.push(s.text);break}case"tool-call":{i.push({function:{arguments:s.args,name:s.toolName},id:s.toolCallId,type:"function"});break}default:{const o=s;throw new Error(`Unsupported part: ${o}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var qY=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=HY.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const s=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(s==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:Bo(),type:"function"});const o=this._toolCalls[a];o.function.arguments=s,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function VY({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var GY=U.object({error:U.object({code:U.string().nullable(),message:U.string(),param:U.any().nullable(),type:U.string()})}),mC=QD({errorSchema:GY,errorToMessage:e=>e.error.message});function KY({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):i.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const s=a.type;switch(s){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=s;throw new Ar({functionality:`Unsupported tool choice type: ${o}`})}}}function WY(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var ZY=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},YY=e=>async({response:t})=>{const n=y0(t);if(t.body===null)throw new Tk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new ZY).pipeThrough(new TransformStream({transform(r,a){a.enqueue(Md({schema:e,text:r}))}}))}},XY=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:s,stopSequences:o,temperature:l,topK:u,topP:d}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const y={format:i==null?void 0:i.type,model:this.modelId,options:WY({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:s,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:u,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=KY({mode:n});return{args:{...y,messages:FS(a),tools:v},type:h,warnings:[...m,...b]}}case"object-json":return{args:{...y,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:FS(a)},type:h,warnings:m};case"object-tool":return{args:{...y,messages:FS(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:s,value:o}=await no({abortSignal:e.abortSignal,body:i,failedResponseHandler:mC,fetch:this.config.fetch,headers:Zo(this.config.headers(),e.headers),successfulResponseHandler:Yd(JY),url:`${this.config.baseURL}/chat`}),{messages:l,...u}=i,d=(t=o.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:Bo(),toolCallType:"function",toolName:h.function.name}});return{finishReason:VY({finishReason:o.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},request:{body:JSON.stringify(i)},text:(n=o.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const y=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...y.response}),y.text&&b.enqueue({textDelta:y.text,type:"text-delta"}),y.toolCalls)for(const x of y.toolCalls)b.enqueue({argsTextDelta:x.args,toolCallId:x.toolCallId,toolCallType:"function",toolName:x.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...x});b.enqueue({finishReason:y.finishReason,logprobs:y.logprobs,providerMetadata:y.providerMetadata,type:"finish",usage:y.usage}),b.close()}});return{rawCall:y.rawCall,rawResponse:y.rawResponse,stream:v,warnings:y.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await no({abortSignal:e.abortSignal,body:t,failedResponseHandler:mC,fetch:this.config.fetch,headers:Zo(this.config.headers(),e.headers),successfulResponseHandler:YY(QY),url:`${this.config.baseURL}/chat`}),{messages:s,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,u=new qY({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(y){y.enqueue({finishReason:d,type:"finish",usage:h})},async transform(y,v){if(!y.success){v.enqueue({error:y.error,type:"error"});return}const b=y.value;if(b.done){d=u.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}m&&u.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},JY=U.object({created_at:U.string(),done:U.literal(!0),done_reason:U.string().optional().nullable(),eval_count:U.number(),eval_duration:U.number(),load_duration:U.number().optional(),message:U.object({content:U.string(),role:U.string(),tool_calls:U.array(U.object({function:U.object({arguments:U.record(U.any()),name:U.string()}),id:U.string().optional()})).optional().nullable()}),model:U.string(),prompt_eval_count:U.number().optional(),prompt_eval_duration:U.number().optional(),total_duration:U.number()}),QY=U.discriminatedUnion("done",[U.object({created_at:U.string(),done:U.literal(!1),message:U.object({content:U.string(),role:U.string()}),model:U.string()}),U.object({created_at:U.string(),done:U.literal(!0),eval_count:U.number(),eval_duration:U.number(),load_duration:U.number().optional(),model:U.string(),prompt_eval_count:U.number().optional(),prompt_eval_duration:U.number().optional(),total_duration:U.number()})]),eX=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new Nk({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await no({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:mC,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Yd(tX),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},tX=U.object({embeddings:U.array(U.array(U.number())),prompt_eval_count:U.number().nullable()});function M8(e={}){var t;const n=(t=tM(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(o,l={})=>new XY(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(o,l={})=>new eX(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),s=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(o,l)};return s.chat=a,s.embedding=i,s.languageModel=a,s.textEmbedding=i,s.textEmbeddingModel=i,s}M8();let nX=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function Ph(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function rX(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,y=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,y)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=aX(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function aX(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function ox(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var iX=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=nX(n,t);if(e==null)return a;if(n.includes(r))throw new Ak({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},LS=iX();function sX(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function $S(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var gC=Symbol.for("vercel.ai.validator");function oX(e){return{[gC]:!0,validate:e}}function lX(e){return typeof e=="object"&&e!==null&&gC in e&&e[gC]===!0&&"validate"in e}function cX(e){return lX(e)?e:uX(e)}function uX(e){return oX(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function dX({value:e,schema:t}){const n=P8({value:e,schema:t});if(!n.success)throw du.wrap({value:e,cause:n.error});return n.value}function P8({value:e,schema:t}){const n=cX(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:du.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:du.wrap({value:e,cause:r})}}}function fX({text:e,schema:t}){try{const n=uo.parse(e);return t==null?n:dX({value:n,schema:t})}catch(n){throw uu.isInstance(n)||du.isInstance(n)?n:new uu({text:e,cause:n})}}function F8({text:e,schema:t}){try{const n=uo.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=P8({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:uu.isInstance(n)?n:new uu({text:e,cause:n})}}}function P3(e){try{return uo.parse(e),!0}catch{return!1}}var hX=()=>globalThis.fetch,Fh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>pX({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),pX=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=hX()})=>{try{const o=await s(e,{method:"POST",headers:sX(t),body:n.content,signal:i}),l=ox(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw $S(d)||_a.isInstance(d)?d:new _a({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&($S(u)||_a.isInstance(u))?u:new _a({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if($S(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new _a({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},lx=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=ox(r);if(s.trim()==="")return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=fX({text:s,schema:e});return{responseHeaders:o,value:new _a({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new _a({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},L8=e=>async({response:t})=>{const n=ox(t);if(t.body==null)throw new Tk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(rX()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(F8({text:r,schema:e}))}}))}},cx=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=F8({text:a,schema:e}),s=ox(t);if(!i.success)throw new _a({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:mX}=globalThis;function gX(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return mX(t)}function yX(e){return e==null?void 0:e.replace(/\/$/,"")}function $m(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function bX(e){const t=[];for(const{role:n,content:r,...a}of e){const i=$m({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...$m(r[0])});break}t.push({role:"user",content:r.map(s=>{var o;const l=$m(s);switch(s.type){case"text":return{type:"text",text:s.text,...l};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(o=s.mimeType)!=null?o:"image/jpeg"};base64,${gX(s.image)}`},...l};case"file":throw new Ar({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let s="";const o=[];for(const l of r){const u=$m(l);switch(l.type){case"text":{s+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...u});break}}}t.push({role:"assistant",content:s,tool_calls:o.length>0?o:void 0,...i});break}case"tool":{for(const s of r){const o=$m(s);t.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result),...o})}break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}}return t}function sw({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function ow(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var vX=U.object({error:U.object({message:U.string(),type:U.string().nullish(),param:U.any().nullish(),code:U.union([U.string(),U.number()]).nullish()})}),ux={errorSchema:vX,errorToMessage:e=>e.error.message};function wX({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):s.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=o;throw new Ar({functionality:`Unsupported tool choice type: ${l}`})}}}var xX=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:ux;this.chunkSchema=SX(i.errorSchema),this.failedResponseHandler=lx(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,providerMetadata:l,stopSequences:u,responseFormat:d,seed:h}){var m,y;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const x={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(m=d.name)!=null?m:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:h,...l==null?void 0:l[this.providerOptionsName],messages:bX(t)};switch(v){case"regular":{const{tools:w,tool_choice:S,toolWarnings:E}=wX({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...x,tools:w,tool_choice:S},warnings:[...b,...E]}}case"object-json":return{args:{...x,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(y=e.name)!=null?y:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{...x,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const w=v;throw new Error(`Unsupported type: ${w}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l,u;const{args:d,warnings:h}=this.getArgs({...e}),m=JSON.stringify(d),{responseHeaders:y,value:v,rawValue:b}=await Fh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ph(this.config.headers(),e.headers),body:d,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:cx(_X),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:x,...w}=d,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:LS(),toolName:C.function.name,args:C.function.arguments}}),finishReason:ow(S.finish_reason),usage:{promptTokens:(o=(s=v.usage)==null?void 0:s.prompt_tokens)!=null?o:NaN,completionTokens:(u=(l=v.usage)==null?void 0:l.completion_tokens)!=null?u:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:x,rawSettings:w},rawResponse:{headers:y,body:b},response:sw(v),warnings:h,request:{body:m}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const w of v.reasoning)w.type==="text"&&x.enqueue({type:"reasoning",textDelta:w.text});else x.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&x.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const w of v.toolCalls)x.enqueue({type:"tool-call",...w});x.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),x.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:o}=await Fh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Ph(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:L8(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...u}=n,d=[];let h="unknown",m={promptTokens:void 0,completionTokens:void 0},y=!0;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var x,w,S,E,C,k,I,R,j,F,$,G,D,Z;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const q=v.value;if(i==null||i.processChunk(v.rawValue),"error"in q){h="error",b.enqueue({type:"error",error:q.error.message});return}y&&(y=!1,b.enqueue({type:"response-metadata",...sw(q)})),q.usage!=null&&(m={promptTokens:(x=q.usage.prompt_tokens)!=null?x:void 0,completionTokens:(w=q.usage.completion_tokens)!=null?w:void 0});const ue=q.choices[0];if((ue==null?void 0:ue.finish_reason)!=null&&(h=ow(ue.finish_reason)),(ue==null?void 0:ue.delta)==null)return;const ie=ue.delta;if(ie.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:ie.reasoning_content}),ie.content!=null&&b.enqueue({type:"text-delta",textDelta:ie.content}),ie.tool_calls!=null)for(const ne of ie.tool_calls){const X=ne.index;if(d[X]==null){if(ne.type!=="function")throw new _h({data:ne,message:"Expected 'function' type."});if(ne.id==null)throw new _h({data:ne,message:"Expected 'id' to be a string."});if(((S=ne.function)==null?void 0:S.name)==null)throw new _h({data:ne,message:"Expected 'function.name' to be a string."});d[X]={id:ne.id,type:"function",function:{name:ne.function.name,arguments:(E=ne.function.arguments)!=null?E:""},hasFinished:!1};const B=d[X];((C=B.function)==null?void 0:C.name)!=null&&((k=B.function)==null?void 0:k.arguments)!=null&&(B.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:B.id,toolName:B.function.name,argsTextDelta:B.function.arguments}),P3(B.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(I=B.id)!=null?I:LS(),toolName:B.function.name,args:B.function.arguments}),B.hasFinished=!0));continue}const ae=d[X];ae.hasFinished||(((R=ne.function)==null?void 0:R.arguments)!=null&&(ae.function.arguments+=(F=(j=ne.function)==null?void 0:j.arguments)!=null?F:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:($=ne.function.arguments)!=null?$:""}),((G=ae.function)==null?void 0:G.name)!=null&&((D=ae.function)==null?void 0:D.arguments)!=null&&P3(ae.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=ae.id)!=null?Z:LS(),toolName:ae.function.name,args:ae.function.arguments}),ae.hasFinished=!0))}},flush(v){var b,x;const w=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=m.promptTokens)!=null?b:NaN,completionTokens:(x=m.completionTokens)!=null?x:NaN},...w&&{providerMetadata:w}})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},warnings:r,request:{body:a}}}},_X=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({message:U.object({role:U.literal("assistant").nullish(),content:U.string().nullish(),reasoning_content:U.string().nullish(),tool_calls:U.array(U.object({id:U.string().nullish(),type:U.literal("function"),function:U.object({name:U.string(),arguments:U.string()})})).nullish()}),finish_reason:U.string().nullish()})),usage:U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish()}).nullish()}),SX=e=>U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({delta:U.object({role:U.enum(["assistant"]).nullish(),content:U.string().nullish(),reasoning_content:U.string().nullish(),tool_calls:U.array(U.object({index:U.number(),id:U.string().nullish(),type:U.literal("function").optional(),function:U.object({name:U.string().nullish(),arguments:U.string().nullish()})})).nullish()}).nullish(),finish_reason:U.string().nullish()})),usage:U.object({prompt_tokens:U.number().nullish(),completion_tokens:U.number().nullish()}).nullish()}),e]);function EX({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Fl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Ar({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Ar({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Ar({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var CX=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:ux;this.chunkSchema=TX(a.errorSchema),this.failedResponseHandler=lx(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h,providerMetadata:m}){var y;const v=e.type,b=[];s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:x,stopSequences:w}=EX({prompt:n,inputFormat:t}),S=[...w??[],...u??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:x,stop:S.length>0?S:void 0};switch(v){case"regular":{if((y=e.tools)!=null&&y.length)throw new Ar({functionality:"tools"});if(e.toolChoice)throw new Ar({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new Ar({functionality:"object-json mode"});case"object-tool":throw new Ar({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:s}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:u}=await Fh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ph(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:cx(kX),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,m=l.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:ow(m.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o,body:u},response:sw(l),warnings:s,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await Fh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Ph(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:L8(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const y=h.value;if("error"in y){l="error",m.enqueue({type:"error",error:y.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...sw(y)})),y.usage!=null&&(u={promptTokens:y.usage.prompt_tokens,completionTokens:y.usage.completion_tokens});const v=y.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=ow(v.finish_reason)),(v==null?void 0:v.text)!=null&&m.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},kX=U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),TX=e=>U.union([U.object({id:U.string().nullish(),created:U.number().nullish(),model:U.string().nullish(),choices:U.array(U.object({text:U.string(),finish_reason:U.string().nullish(),index:U.number()})),usage:U.object({prompt_tokens:U.number(),completion_tokens:U.number()}).nullish()}),e]),AX=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new Nk({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await Fh({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Ph(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:lx((r=this.config.errorStructure)!=null?r:ux),successfulResponseHandler:cx(NX),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},NX=U.object({data:U.array(U.object({embedding:U.array(U.number())})),usage:U.object({prompt_tokens:U.number()}).nullish()}),RX=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h,m;const y=[];r!=null&&y.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&y.push({type:"unsupported-setting",setting:"seed"});const v=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:b,responseHeaders:x}=await Fh({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Ph(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:lx((m=this.config.errorStructure)!=null?m:ux),successfulResponseHandler:cx(IX),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(w=>w.b64_json),warnings:y,response:{timestamp:v,modelId:this.modelId,headers:x}}}},IX=U.object({data:U.array(U.object({b64_json:U.string()}))});function jX(e){const t=yX(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const y=new URL(`${t}${m}`);return e.queryParams&&(y.search=new URLSearchParams(e.queryParams).toString()),y.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>s(h,m),s=(h,m={})=>new xX(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),o=(h,m={})=>new CX(h,m,a("completion")),l=(h,m={})=>new AX(h,m,a("embedding")),u=(h,m={})=>new RX(h,m,a("image")),d=(h,m)=>i(h,m);return d.languageModel=i,d.chatModel=s,d.completionModel=o,d.textEmbeddingModel=l,d.imageModel=u,d}const nu=(e,t)=>`${e}:${t}`,cc=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},lw=e=>e==="openai"||e==="openrouter"||e==="google",Fk=e=>e==="ollama"||e==="openai-compatible",gh=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",jd=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],OX={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},$8=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function B8(e,t,n){try{switch(e.type){case"openai":return pM({apiKey:n})(t);case"google":return ZM({apiKey:n})(t);case"openrouter":return D8({apiKey:n})(t);case"ollama":return M8({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return jX({baseURL:$8(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function Lk(e,t,n){const a=$n.getState().getAllAvailableModelDefsForProvider(e.id).find(s=>s.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=B8(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:nu(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const z8={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]};var Ho=L6();const U8=ui(Ho);function DX(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const MX=e=>{switch(e){case"success":return LX;case"info":return BX;case"warning":return $X;case"error":return zX;default:return null}},PX=Array(12).fill(0),FX=({visible:e,className:t})=>gt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},gt.createElement("div",{className:"sonner-spinner"},PX.map((n,r)=>gt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),LX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$X=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),BX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),zX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),UX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},gt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),gt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),HX=()=>{const[e,t]=gt.useState(document.hidden);return gt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let yC=1;class qX{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:yC++,s=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...a,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,s;const o=a.then(async u=>{if(s=["resolve",u],gt.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(GX(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,m=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,m=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...v})}}).catch(async u=>{if(s=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,y=typeof d=="object"&&!gt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...y})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>o.then(()=>s[0]==="reject"?d(s[1]):u(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||yC++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Di=new qX,VX=(e,t)=>{const n=(t==null?void 0:t.id)||yC++;return Di.addToast({title:e,...t,id:n}),n},GX=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",KX=VX,WX=()=>Di.toasts,ZX=()=>Di.getActiveToasts(),Ye=Object.assign(KX,{success:Di.success,info:Di.info,warning:Di.warning,error:Di.error,custom:Di.custom,message:Di.message,promise:Di.promise,dismiss:Di.dismiss,loading:Di.loading},{getHistory:WX,getToasts:ZX});DX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function kb(e){return e.label!==void 0}const YX=3,XX="24px",JX="16px",F3=4e3,QX=356,eJ=14,tJ=45,nJ=200;function jo(...e){return e.filter(Boolean).join(" ")}function rJ(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const aJ=e=>{var t,n,r,a,i,s,o,l,u;const{invert:d,toast:h,unstyled:m,interacting:y,setHeights:v,visibleToasts:b,heights:x,index:w,toasts:S,expanded:E,removeToast:C,defaultRichColors:k,closeButton:I,style:R,cancelButtonStyle:j,actionButtonStyle:F,className:$="",descriptionClassName:G="",duration:D,position:Z,gap:q,expandByDefault:ue,classNames:ie,icons:ne,closeButtonAriaLabel:X="Close toast"}=e,[ae,B]=gt.useState(null),[J,ee]=gt.useState(null),[te,fe]=gt.useState(!1),[ve,De]=gt.useState(!1),[Ae,Ne]=gt.useState(!1),[Ce,Pe]=gt.useState(!1),[Qe,Le]=gt.useState(!1),[Ie,z]=gt.useState(0),[Se,Te]=gt.useState(0),de=gt.useRef(h.duration||D||F3),se=gt.useRef(null),Q=gt.useRef(null),xe=w===0,Fe=w+1<=b,Ee=h.type,Ge=h.dismissible!==!1,Nt=h.className||"",it=h.descriptionClassName||"",St=gt.useMemo(()=>x.findIndex(Oe=>Oe.toastId===h.id)||0,[x,h.id]),Ft=gt.useMemo(()=>{var Oe;return(Oe=h.closeButton)!=null?Oe:I},[h.closeButton,I]),Dt=gt.useMemo(()=>h.duration||D||F3,[h.duration,D]),Zt=gt.useRef(0),ye=gt.useRef(0),O=gt.useRef(0),K=gt.useRef(null),[he,je]=Z.split("-"),be=gt.useMemo(()=>x.reduce((Oe,Ke,Ot)=>Ot>=St?Oe:Oe+Ke.height,0),[x,St]),ke=HX(),le=h.invert||d,ft=Ee==="loading";ye.current=gt.useMemo(()=>St*q+be,[St,be]),gt.useEffect(()=>{de.current=Dt},[Dt]),gt.useEffect(()=>{fe(!0)},[]),gt.useEffect(()=>{const Oe=Q.current;if(Oe){const Ke=Oe.getBoundingClientRect().height;return Te(Ke),v(Ot=>[{toastId:h.id,height:Ke,position:h.position},...Ot]),()=>v(Ot=>Ot.filter(me=>me.toastId!==h.id))}},[v,h.id]),gt.useLayoutEffect(()=>{if(!te)return;const Oe=Q.current,Ke=Oe.style.height;Oe.style.height="auto";const Ot=Oe.getBoundingClientRect().height;Oe.style.height=Ke,Te(Ot),v(me=>me.find(H=>H.toastId===h.id)?me.map(H=>H.toastId===h.id?{...H,height:Ot}:H):[{toastId:h.id,height:Ot,position:h.position},...me])},[te,h.title,h.description,v,h.id]);const vt=gt.useCallback(()=>{De(!0),z(ye.current),v(Oe=>Oe.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},nJ)},[h,C,v,ye]);gt.useEffect(()=>{if(h.promise&&Ee==="loading"||h.duration===1/0||h.type==="loading")return;let Oe;return E||y||ke?(()=>{if(O.current<Zt.current){const me=new Date().getTime()-Zt.current;de.current=de.current-me}O.current=new Date().getTime()})():(()=>{de.current!==1/0&&(Zt.current=new Date().getTime(),Oe=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},de.current))})(),()=>clearTimeout(Oe)},[E,y,h,Ee,ke,vt]),gt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function P(){var Oe;if(ne!=null&&ne.loading){var Ke;return gt.createElement("div",{className:jo(ie==null?void 0:ie.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Ee==="loading"},ne.loading)}return gt.createElement(FX,{className:jo(ie==null?void 0:ie.loader,h==null||(Oe=h.classNames)==null?void 0:Oe.loader),visible:Ee==="loading"})}const Be=h.icon||(ne==null?void 0:ne[Ee])||MX(Ee);var nt,ge;return gt.createElement("li",{tabIndex:0,ref:Q,className:jo($,Nt,ie==null?void 0:ie.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ie==null?void 0:ie.default,ie==null?void 0:ie[Ee],h==null||(n=h.classNames)==null?void 0:n[Ee]),"data-sonner-toast":"","data-rich-colors":(nt=h.richColors)!=null?nt:k,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":te,"data-promise":!!h.promise,"data-swiped":Qe,"data-removed":ve,"data-visible":Fe,"data-y-position":he,"data-x-position":je,"data-index":w,"data-front":xe,"data-swiping":Ae,"data-dismissible":Ge,"data-type":Ee,"data-invert":le,"data-swipe-out":Ce,"data-swipe-direction":J,"data-expanded":!!(E||ue&&te),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${ve?Ie:ye.current}px`,"--initial-height":ue?"auto":`${Se}px`,...R,...h.style},onDragEnd:()=>{Ne(!1),B(null),K.current=null},onPointerDown:Oe=>{ft||!Ge||(se.current=new Date,z(ye.current),Oe.target.setPointerCapture(Oe.pointerId),Oe.target.tagName!=="BUTTON"&&(Ne(!0),K.current={x:Oe.clientX,y:Oe.clientY}))},onPointerUp:()=>{var Oe,Ke,Ot;if(Ce||!Ge)return;K.current=null;const me=Number(((Oe=Q.current)==null?void 0:Oe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),V=Number(((Ke=Q.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),H=new Date().getTime()-((Ot=se.current)==null?void 0:Ot.getTime()),W=ae==="x"?me:V,pe=Math.abs(W)/H;if(Math.abs(W)>=tJ||pe>.11){z(ye.current),h.onDismiss==null||h.onDismiss.call(h,h),ee(ae==="x"?me>0?"right":"left":V>0?"down":"up"),vt(),Pe(!0);return}else{var Re,He;(Re=Q.current)==null||Re.style.setProperty("--swipe-amount-x","0px"),(He=Q.current)==null||He.style.setProperty("--swipe-amount-y","0px")}Le(!1),Ne(!1),B(null)},onPointerMove:Oe=>{var Ke,Ot,me;if(!K.current||!Ge||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const H=Oe.clientY-K.current.y,W=Oe.clientX-K.current.x;var pe;const Re=(pe=e.swipeDirections)!=null?pe:rJ(Z);!ae&&(Math.abs(W)>1||Math.abs(H)>1)&&B(Math.abs(W)>Math.abs(H)?"x":"y");let He={x:0,y:0};const pt=Wt=>1/(1.5+Math.abs(Wt)/20);if(ae==="y"){if(Re.includes("top")||Re.includes("bottom"))if(Re.includes("top")&&H<0||Re.includes("bottom")&&H>0)He.y=H;else{const Wt=H*pt(H);He.y=Math.abs(Wt)<Math.abs(H)?Wt:H}}else if(ae==="x"&&(Re.includes("left")||Re.includes("right")))if(Re.includes("left")&&W<0||Re.includes("right")&&W>0)He.x=W;else{const Wt=W*pt(W);He.x=Math.abs(Wt)<Math.abs(W)?Wt:W}(Math.abs(He.x)>0||Math.abs(He.y)>0)&&Le(!0),(Ot=Q.current)==null||Ot.style.setProperty("--swipe-amount-x",`${He.x}px`),(me=Q.current)==null||me.style.setProperty("--swipe-amount-y",`${He.y}px`)}},Ft&&!h.jsx&&Ee!=="loading"?gt.createElement("button",{"aria-label":X,"data-disabled":ft,"data-close-button":!0,onClick:ft||!Ge?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:jo(ie==null?void 0:ie.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=ne==null?void 0:ne.close)!=null?ge:UX):null,(Ee||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[Ee])!==null||h.icon)?gt.createElement("div",{"data-icon":"",className:jo(ie==null?void 0:ie.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||P():null,h.type!=="loading"?Be:null):null,gt.createElement("div",{"data-content":"",className:jo(ie==null?void 0:ie.content,h==null||(i=h.classNames)==null?void 0:i.content)},gt.createElement("div",{"data-title":"",className:jo(ie==null?void 0:ie.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?gt.createElement("div",{"data-description":"",className:jo(G,it,ie==null?void 0:ie.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),gt.isValidElement(h.cancel)?h.cancel:h.cancel&&kb(h.cancel)?gt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||j,onClick:Oe=>{kb(h.cancel)&&Ge&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Oe),vt())},className:jo(ie==null?void 0:ie.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,gt.isValidElement(h.action)?h.action:h.action&&kb(h.action)?gt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||F,onClick:Oe=>{kb(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Oe),!Oe.defaultPrevented&&vt())},className:jo(ie==null?void 0:ie.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function L3(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function iJ(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,s=i?"--mobile-offset":"--offset",o=i?JX:XX;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=o:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),n}const sJ=gt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:u,mobileOffset:d,theme:h="light",richColors:m,duration:y,style:v,visibleToasts:b=YX,toastOptions:x,dir:w=L3(),gap:S=eJ,icons:E,containerAriaLabel:C="Notifications"}=t,[k,I]=gt.useState([]),R=gt.useMemo(()=>Array.from(new Set([a].concat(k.filter(J=>J.position).map(J=>J.position)))),[k,a]),[j,F]=gt.useState([]),[$,G]=gt.useState(!1),[D,Z]=gt.useState(!1),[q,ue]=gt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ie=gt.useRef(null),ne=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),X=gt.useRef(null),ae=gt.useRef(!1),B=gt.useCallback(J=>{I(ee=>{var te;return(te=ee.find(fe=>fe.id===J.id))!=null&&te.delete||Di.dismiss(J.id),ee.filter(({id:fe})=>fe!==J.id)})},[]);return gt.useEffect(()=>Di.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{I(ee=>ee.map(te=>te.id===J.id?{...te,delete:!0}:te))});return}setTimeout(()=>{U8.flushSync(()=>{I(ee=>{const te=ee.findIndex(fe=>fe.id===J.id);return te!==-1?[...ee.slice(0,te),{...ee[te],...J},...ee.slice(te+1)]:[J,...ee]})})})}),[k]),gt.useEffect(()=>{if(h!=="system"){ue(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ue("dark"):ue("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:ee})=>{ue(ee?"dark":"light")})}catch{J.addListener(({matches:te})=>{try{ue(te?"dark":"light")}catch(fe){console.error(fe)}})}},[h]),gt.useEffect(()=>{k.length<=1&&G(!1)},[k]),gt.useEffect(()=>{const J=ee=>{var te;if(i.every(De=>ee[De]||ee.code===De)){var ve;G(!0),(ve=ie.current)==null||ve.focus()}ee.code==="Escape"&&(document.activeElement===ie.current||(te=ie.current)!=null&&te.contains(document.activeElement))&&G(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),gt.useEffect(()=>{if(ie.current)return()=>{X.current&&(X.current.focus({preventScroll:!0}),X.current=null,ae.current=!1)}},[ie.current]),gt.createElement("section",{ref:n,"aria-label":`${C} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},R.map((J,ee)=>{var te;const[fe,ve]=J.split("-");return k.length?gt.createElement("ol",{key:J,dir:w==="auto"?L3():w,tabIndex:-1,ref:ie,className:l,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":fe,"data-lifted":$&&k.length>1&&!s,"data-x-position":ve,style:{"--front-toast-height":`${((te=j[0])==null?void 0:te.height)||0}px`,"--width":`${QX}px`,"--gap":`${S}px`,...v,...iJ(u,d)},onBlur:De=>{ae.current&&!De.currentTarget.contains(De.relatedTarget)&&(ae.current=!1,X.current&&(X.current.focus({preventScroll:!0}),X.current=null))},onFocus:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||ae.current||(ae.current=!0,X.current=De.relatedTarget)},onMouseEnter:()=>G(!0),onMouseMove:()=>G(!0),onMouseLeave:()=>{D||G(!1)},onDragEnd:()=>G(!1),onPointerDown:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},k.filter(De=>!De.position&&ee===0||De.position===J).map((De,Ae)=>{var Ne,Ce;return gt.createElement(aJ,{key:De.id,icons:E,index:Ae,toast:De,defaultRichColors:m,duration:(Ne=x==null?void 0:x.duration)!=null?Ne:y,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Ce=x==null?void 0:x.closeButton)!=null?Ce:o,interacting:D,position:J,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,closeButtonAriaLabel:x==null?void 0:x.closeButtonAriaLabel,removeToast:B,toasts:k.filter(Pe=>Pe.position==De.position),heights:j.filter(Pe=>Pe.position==De.position),setHeights:F,expandByDefault:s,gap:S,expanded:$,swipeDirections:t.swipeDirections})})):null}))}),Bm=new Map,oJ=5*60*1e3,lJ=(e,t)=>{var i,s,o,l,u,d,h,m,y,v,b,x,w,S;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((s=e.architecture)==null?void 0:s.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((u=e.architecture)==null?void 0:u.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((m=e.pricing)==null?void 0:m.request)??"0",image:((y=e.pricing)==null?void 0:y.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((x=e.top_provider)==null?void 0:x.context_length)??e.context_length??null,max_completion_tokens:((w=e.top_provider)==null?void 0:w.max_completion_tokens)??null,is_moderated:((S=e.top_provider)==null?void 0:S.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??z8[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function cJ(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Bm.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var o,l,u;let i;const s={Accept:"application/json"};t&&(s.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",s["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",s["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete s.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=$8(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),Ye.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:s});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const x=JSON.parse(b);v=((u=x==null?void 0:x.error)==null?void 0:u.message)||(x==null?void 0:x.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let m=[];if(e.type==="ollama"?m=h.models||[]:m=h.data||h||[],!Array.isArray(m))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const y=m.map(v=>lJ(v,e.type));return y.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${y.length} models for ${e.name}`),y}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),Ye.error(`Failed to fetch models for ${e.name}: ${h}`),Bm.delete(n),[]}})();return Bm.set(n,a),setTimeout(()=>{Bm.get(n)===a&&(Bm.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},oJ),a}const BS="provider:lastModelSelection",$3="provider:globalModelSortOrder",$n=Ds(Ms((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),xt.saveSetting("enableApiKeyManagement",n),kt.emit(Et.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadSetting("enableApiKeyManagement",!0),[r,a,i,s]=await Promise.all([xt.loadProviderConfigs(),xt.loadApiKeys(),xt.loadSetting($3,[]),xt.loadSetting(BS,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const o=r.reduce((m,y)=>(y.isEnabled&&y.enabledModels&&y.enabledModels.forEach(v=>{m.push(nu(y.id,v))}),m),[]),l=new Set(o),u=i.filter(m=>l.has(m));let d=s;d&&l.has(d)||(d=u[0]??null,d||(d=o[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${d}`)),e({globalModelSortOrder:u,selectedModelId:d,isLoading:!1}),await xt.saveSetting(BS,d),console.log(`[ProviderStore] Emitting initial ${Et.MODEL_SELECTION_CHANGED} with payload:`,{modelId:d}),kt.emit(Et.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),Ye.error("Failed to load provider data")}},selectModel:n=>{const r=t().selectedModelId;console.log(`[ProviderStore] selectModel called. Current: ${r}, New: ${n}`),r!==n?(e({selectedModelId:n}),xt.saveSetting(BS,n),console.log(`[ProviderStore] Emitting ${Et.MODEL_SELECTION_CHANGED} with payload:`,{modelId:n}),kt.emit(Et.MODEL_SELECTION_CHANGED,{modelId:n})):console.log(`[ProviderStore] selectModel skipped: ID ${n} already selected.`)},addApiKey:async(n,r,a)=>{const i=_i(),s=new Date,o={id:i,name:n,value:a,providerId:r,createdAt:s,updatedAt:s};try{return await xt.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),Ye.success(`API Key "${n}" added.`),kt.emit(Et.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),Ye.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await xt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(s=>s.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(s=>s.apiKeyId===n?{...s,apiKeyId:null}:s)}),Ye.success(`API Key "${r}" deleted.`),kt.emit(Et.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),Ye.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=_i(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await xt.saveProviderConfig(i),e(s=>{s.dbProviderConfigs.push(i)}),Ye.success(`Provider "${n.name}" added.`),kt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),t().fetchModels(r).catch(s=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,s)}),r}catch(s){throw console.error("ProviderStore: Error adding provider config",s),Ye.error(`Failed to add Provider: ${s instanceof Error?s.message:String(s)}`),s}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(s=>s.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await xt.saveProviderConfig(i),e(h=>{const m=h.dbProviderConfigs.findIndex(y=>y.id===n);m!==-1&&(h.dbProviderConfigs[m]=i)}),kt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const s=t().globalModelSortOrder,o=t().dbProviderConfigs;let l=[...s];const u=o.reduce((h,m)=>(m.isEnabled&&m.enabledModels&&m.enabledModels.forEach(y=>{h.push(nu(m.id,y))}),h),[]),d=new Set(u);l=s.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(s){throw console.error("ProviderStore: Error updating provider config",s),Ye.error(`Failed to update Provider: ${s instanceof Error?s.message:String(s)}`),s}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await xt.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),kt.emit(Et.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const s=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(m=>{d.push(nu(h.id,m))}),d),[]),o=new Set(s),u=t().globalModelSortOrder.filter(d=>o.has(d));await t().setGlobalModelSortOrder(u),Ye.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),Ye.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){Ye.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,s=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,o=await cJ(r,s);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),Ye.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await xt.saveSetting($3,r);const a=t().selectedModelId,s=t().dbProviderConfigs.reduce((l,u)=>(u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{l.push(nu(u.id,d))}),l),[]),o=new Set(s);if(!a||!o.has(a)){const l=r.find(h=>o.has(h)),u=s[0]??null,d=l??u;d!==a&&(console.log(`[ProviderStore] Selection ${a} invalidated or missing. Selecting ${d}`),t().selectModel(d))}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:s}=cc(n);if(!i||!s)return;const o=r.find(u=>u.id===i);if(!o)return;const l=a.find(u=>u.id===o.apiKeyId);return Lk(o,s,l==null?void 0:l.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(OX[a]||[]).map(s=>({id:s.id,name:s.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:z8[r.type]??[]}))}}))),Tb="system",Ab="You are a helpful AI assistant.",Nb=.7,Rb=null,Ib=null,jb=null,Ob=0,Db=0,B3=!0,Mb=!0,Pb=!1,Fb=!1,Lb=!1,$b=15,z3=null,U3=null,Bb=5,zb=null,Ub=!0,Hb=null,qb=768,Vb=!1,Gb=!1,Kb=null,Wb=16,Zb="max-w-7xl",Yb=null,lr=Ds(Ms((e,t)=>({theme:Tb,globalSystemPrompt:Ab,temperature:Nb,maxTokens:Rb,topP:Ib,topK:jb,presencePenalty:Ob,frequencyPenalty:Db,enableAdvancedSettings:B3,enableStreamingMarkdown:Mb,enableStreamingCodeBlockParsing:Pb,foldStreamingCodeBlocks:Fb,foldUserMessagesOnCompletion:Lb,streamingRenderFPS:$b,gitUserName:z3,gitUserEmail:U3,toolMaxSteps:Bb,prismThemeUrl:zb,autoTitleEnabled:Ub,autoTitleModelId:Hb,autoTitlePromptMaxLength:qb,autoTitleIncludeFiles:Vb,autoTitleIncludeRules:Gb,customFontFamily:Kb,customFontSize:Wb,chatMaxWidth:Zb,customThemeColors:Yb,setTheme:n=>{e({theme:n}),xt.saveSetting("theme",n)},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),xt.saveSetting("globalSystemPrompt",n)},setTemperature:n=>{e({temperature:n}),xt.saveSetting("temperature",n)},setMaxTokens:n=>{e({maxTokens:n}),xt.saveSetting("maxTokens",n)},setTopP:n=>{e({topP:n}),xt.saveSetting("topP",n)},setTopK:n=>{e({topK:n}),xt.saveSetting("topK",n)},setPresencePenalty:n=>{e({presencePenalty:n}),xt.saveSetting("presencePenalty",n)},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),xt.saveSetting("frequencyPenalty",n)},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),xt.saveSetting("enableAdvancedSettings",n)},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),xt.saveSetting("enableStreamingMarkdown",n)},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),xt.saveSetting("enableStreamingCodeBlockParsing",n)},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),xt.saveSetting("foldStreamingCodeBlocks",n)},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),xt.saveSetting("foldUserMessagesOnCompletion",n)},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),xt.saveSetting("streamingRenderFPS",r)},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),xt.saveSetting("gitUserName",r)},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),xt.saveSetting("gitUserEmail",r)},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),xt.saveSetting("toolMaxSteps",r)},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),xt.saveSetting("prismThemeUrl",r)},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),xt.saveSetting("autoTitleEnabled",n)},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),xt.saveSetting("autoTitleModelId",n)},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),xt.saveSetting("autoTitlePromptMaxLength",r)},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),xt.saveSetting("autoTitleIncludeFiles",n)},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),xt.saveSetting("autoTitleIncludeRules",n)},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),xt.saveSetting("customFontFamily",r)},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),xt.saveSetting("customFontSize",r)},setChatMaxWidth:n=>{e({chatMaxWidth:n}),xt.saveSetting("chatMaxWidth",n)},setCustomThemeColors:n=>{e({customThemeColors:n}),xt.saveSetting("customThemeColors",n)},setCustomThemeColor:(n,r)=>{e(a=>{const s={...a.customThemeColors??{}};r===null||r.trim()===""?delete s[n]:s[n]=r.trim(),a.customThemeColors=Object.keys(s).length>0?s:null}),xt.saveSetting("customThemeColors",t().customThemeColors)},loadSettings:async()=>{try{const[n,r,a,i,s,o,l,u,d,h,m,y,v,b,x,w,S,E,C,k,I,R,j,F,$,G,D]=await Promise.all([xt.loadSetting("theme",Tb),xt.loadSetting("temperature",Nb),xt.loadSetting("maxTokens",Rb),xt.loadSetting("topP",Ib),xt.loadSetting("topK",jb),xt.loadSetting("presencePenalty",Ob),xt.loadSetting("frequencyPenalty",Db),xt.loadSetting("globalSystemPrompt",Ab),xt.loadSetting("enableAdvancedSettings",B3),xt.loadSetting("enableStreamingMarkdown",Mb),xt.loadSetting("enableStreamingCodeBlockParsing",Pb),xt.loadSetting("foldStreamingCodeBlocks",Fb),xt.loadSetting("foldUserMessagesOnCompletion",Lb),xt.loadSetting("streamingRenderFPS",$b),xt.loadSetting("gitUserName",z3),xt.loadSetting("gitUserEmail",U3),xt.loadSetting("toolMaxSteps",Bb),xt.loadSetting("prismThemeUrl",zb),xt.loadSetting("autoTitleEnabled",Ub),xt.loadSetting("autoTitleModelId",Hb),xt.loadSetting("autoTitlePromptMaxLength",qb),xt.loadSetting("autoTitleIncludeFiles",Vb),xt.loadSetting("autoTitleIncludeRules",Gb),xt.loadSetting("customFontFamily",Kb),xt.loadSetting("customFontSize",Wb),xt.loadSetting("chatMaxWidth",Zb),xt.loadSetting("customThemeColors",Yb)]);e({theme:n,temperature:r,maxTokens:a,topP:i,topK:s,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:u,enableAdvancedSettings:d,enableStreamingMarkdown:h,enableStreamingCodeBlockParsing:m,foldStreamingCodeBlocks:y,foldUserMessagesOnCompletion:v,streamingRenderFPS:b,gitUserName:x,gitUserEmail:w,toolMaxSteps:S,prismThemeUrl:E,autoTitleEnabled:C,autoTitleModelId:k,autoTitlePromptMaxLength:I,autoTitleIncludeFiles:R,autoTitleIncludeRules:j,customFontFamily:F,customFontSize:$,chatMaxWidth:G,customThemeColors:D})}catch(n){console.error("SettingsStore: Error loading settings",n)}},resetGeneralSettings:async()=>{try{e({enableStreamingMarkdown:Mb,enableStreamingCodeBlockParsing:Pb,foldStreamingCodeBlocks:Fb,foldUserMessagesOnCompletion:Lb,streamingRenderFPS:$b}),await Promise.all([xt.saveSetting("enableStreamingMarkdown",Mb),xt.saveSetting("enableStreamingCodeBlockParsing",Pb),xt.saveSetting("foldStreamingCodeBlocks",Fb),xt.saveSetting("foldUserMessagesOnCompletion",Lb),xt.saveSetting("streamingRenderFPS",$b)]),Ye.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),Ye.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{e({globalSystemPrompt:Ab,temperature:Nb,maxTokens:Rb,topP:Ib,topK:jb,presencePenalty:Ob,frequencyPenalty:Db,toolMaxSteps:Bb,autoTitleEnabled:Ub,autoTitleModelId:Hb,autoTitlePromptMaxLength:qb,autoTitleIncludeFiles:Vb,autoTitleIncludeRules:Gb}),await Promise.all([xt.saveSetting("globalSystemPrompt",Ab),xt.saveSetting("temperature",Nb),xt.saveSetting("maxTokens",Rb),xt.saveSetting("topP",Ib),xt.saveSetting("topK",jb),xt.saveSetting("presencePenalty",Ob),xt.saveSetting("frequencyPenalty",Db),xt.saveSetting("toolMaxSteps",Bb),xt.saveSetting("autoTitleEnabled",Ub),xt.saveSetting("autoTitleModelId",Hb),xt.saveSetting("autoTitlePromptMaxLength",qb),xt.saveSetting("autoTitleIncludeFiles",Vb),xt.saveSetting("autoTitleIncludeRules",Gb)]),Ye.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),Ye.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{e({theme:Tb,prismThemeUrl:zb,customFontFamily:Kb,customFontSize:Wb,chatMaxWidth:Zb,customThemeColors:Yb}),await Promise.all([xt.saveSetting("theme",Tb),xt.saveSetting("prismThemeUrl",zb),xt.saveSetting("customFontFamily",Kb),xt.saveSetting("customFontSize",Wb),xt.saveSetting("chatMaxWidth",Zb),xt.saveSetting("customThemeColors",Yb)]),Ye.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),Ye.error("Failed to reset theme settings.")}}})));async function bC(e,t){const n=Rr.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const s=await i.callback(a);if(s===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;s&&typeof s=="object"&&(a=s)}catch(s){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,s),!1}return a}function uJ(){const e=qn.getState(),t=$n.getState(),n=lr.getState(),{providerId:r}=cc(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function dJ(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function H3(e){try{const t=e.type||"application/octet-stream",n=kk(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:dJ(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),Ye.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function q3(e){return e.flatMap(t=>{var a,i,s;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-call"&&u.toolCallId&&u.toolName&&u.args!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,u)}}),o.length>0&&n.push({role:"assistant",content:o})}if((s=t.metadata)!=null&&s.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-result"&&u.toolCallId&&u.toolName&&u.result!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,u)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const V3=e=>Symbol.iterator in e,G3=e=>"entries"in e,K3=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},fJ=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function hJ(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!V3(e)||!V3(t)?K3({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):G3(e)&&G3(t)?K3(e,t):fJ(e,t)}function dn(e){const t=gt.useRef(void 0);return n=>{const r=e(n);return hJ(t.current,r)?t.current:t.current=r}}function qt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function pJ(e,t){const n=T.createContext(t),r=i=>{const{children:s,...o}=i,l=T.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function a(i){const s=T.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function di(e,t=[]){let n=[];function r(i,s){const o=T.createContext(s),l=n.length;n=[...n,s];const u=h=>{var w;const{scope:m,children:y,...v}=h,b=((w=m==null?void 0:m[e])==null?void 0:w[l])||o,x=T.useMemo(()=>v,Object.values(v));return p.jsx(b.Provider,{value:x,children:y})};u.displayName=i+"Provider";function d(h,m){var b;const y=((b=m==null?void 0:m[e])==null?void 0:b[l])||o,v=T.useContext(y);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(s=>T.createContext(s));return function(o){const l=(o==null?void 0:o[e])||i;return T.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return a.scopeName=e,[r,mJ(a,...t)]}function mJ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...o,...h}},{});return T.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var gJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rn=gJ.reduce((e,t)=>{const n=lu(`Primitive.${t}`),r=T.forwardRef((a,i)=>{const{asChild:s,...o}=a,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function H8(e,t){e&&Ho.flushSync(()=>e.dispatchEvent(t))}function La(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e}),T.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function yJ(e,t=globalThis==null?void 0:globalThis.document){const n=La(e);T.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var bJ="DismissableLayer",vC="dismissableLayer.update",vJ="dismissableLayer.pointerDownOutside",wJ="dismissableLayer.focusOutside",W3,q8=T.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ip=T.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...l}=e,u=T.useContext(q8),[d,h]=T.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=T.useState({}),v=Cn(t,R=>h(R)),b=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=b.indexOf(x),S=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,C=S>=w,k=SJ(R=>{const j=R.target,F=[...u.branches].some($=>$.contains(j));!C||F||(a==null||a(R),s==null||s(R),R.defaultPrevented||o==null||o())},m),I=EJ(R=>{const j=R.target;[...u.branches].some($=>$.contains(j))||(i==null||i(R),s==null||s(R),R.defaultPrevented||o==null||o())},m);return yJ(R=>{S===u.layers.size-1&&(r==null||r(R),!R.defaultPrevented&&o&&(R.preventDefault(),o()))},m),T.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(W3=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Z3(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=W3)}},[d,m,n,u]),T.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Z3())},[d,u]),T.useEffect(()=>{const R=()=>y({});return document.addEventListener(vC,R),()=>document.removeEventListener(vC,R)},[]),p.jsx(rn.div,{...l,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:qt(e.onFocusCapture,I.onFocusCapture),onBlurCapture:qt(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:qt(e.onPointerDownCapture,k.onPointerDownCapture)})});ip.displayName=bJ;var xJ="DismissableLayerBranch",_J=T.forwardRef((e,t)=>{const n=T.useContext(q8),r=T.useRef(null),a=Cn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(rn.div,{...e,ref:a})});_J.displayName=xJ;function SJ(e,t=globalThis==null?void 0:globalThis.document){const n=La(e),r=T.useRef(!1),a=T.useRef(()=>{});return T.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){V8(vJ,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function EJ(e,t=globalThis==null?void 0:globalThis.document){const n=La(e),r=T.useRef(!1);return T.useEffect(()=>{const a=i=>{i.target&&!r.current&&V8(wJ,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Z3(){const e=new CustomEvent(vC);document.dispatchEvent(e)}function V8(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?H8(a,i):a.dispatchEvent(i)}var Ua=globalThis!=null&&globalThis.document?T.useLayoutEffect:()=>{},CJ=F6[" useId ".trim().toString()]||(()=>{}),kJ=0;function Ea(e){const[t,n]=T.useState(CJ());return Ua(()=>{n(r=>r??String(kJ++))},[e]),t?`radix-${t}`:""}const TJ=["top","right","bottom","left"],yu=Math.min,as=Math.max,cw=Math.round,Xb=Math.floor,Wo=e=>({x:e,y:e}),AJ={left:"right",right:"left",bottom:"top",top:"bottom"},NJ={start:"end",end:"start"};function wC(e,t,n){return as(e,yu(t,n))}function ec(e,t){return typeof e=="function"?e(t):e}function tc(e){return e.split("-")[0]}function sp(e){return e.split("-")[1]}function $k(e){return e==="x"?"y":"x"}function Bk(e){return e==="y"?"height":"width"}function bu(e){return["top","bottom"].includes(tc(e))?"y":"x"}function zk(e){return $k(bu(e))}function RJ(e,t,n){n===void 0&&(n=!1);const r=sp(e),a=zk(e),i=Bk(a);let s=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=uw(s)),[s,uw(s)]}function IJ(e){const t=uw(e);return[xC(e),t,xC(t)]}function xC(e){return e.replace(/start|end/g,t=>NJ[t])}function jJ(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:s;default:return[]}}function OJ(e,t,n,r){const a=sp(e);let i=jJ(tc(e),n==="start",r);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(xC)))),i}function uw(e){return e.replace(/left|right|bottom|top/g,t=>AJ[t])}function DJ(e){return{top:0,right:0,bottom:0,left:0,...e}}function G8(e){return typeof e!="number"?DJ(e):{top:e,right:e,bottom:e,left:e}}function dw(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function Y3(e,t,n){let{reference:r,floating:a}=e;const i=bu(t),s=zk(t),o=Bk(s),l=tc(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[o]/2-a[o]/2;let y;switch(l){case"top":y={x:d,y:r.y-a.height};break;case"bottom":y={x:d,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:h};break;case"left":y={x:r.x-a.width,y:h};break;default:y={x:r.x,y:r.y}}switch(sp(t)){case"start":y[s]-=m*(n&&u?-1:1);break;case"end":y[s]+=m*(n&&u?-1:1);break}return y}const MJ=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,o=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=Y3(u,r,l),m=r,y={},v=0;for(let b=0;b<o.length;b++){const{name:x,fn:w}=o[b],{x:S,y:E,data:C,reset:k}=await w({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:y,rects:u,platform:s,elements:{reference:e,floating:t}});d=S??d,h=E??h,y={...y,[x]:{...y[x],...C}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=Y3(u,m,l)),b=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:y}};async function Cg(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:y=0}=ec(t,e),v=G8(y),x=o[m?h==="floating"?"reference":"floating":h],w=dw(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),S=h==="floating"?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=dw(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:S,offsetParent:E,strategy:l}):S);return{top:(w.top-k.top+v.top)/C.y,bottom:(k.bottom-w.bottom+v.bottom)/C.y,left:(w.left-k.left+v.left)/C.x,right:(k.right-w.right+v.right)/C.x}}const PJ=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:u,padding:d=0}=ec(e,t)||{};if(u==null)return{};const h=G8(d),m={x:n,y:r},y=zk(a),v=Bk(y),b=await s.getDimensions(u),x=y==="y",w=x?"top":"left",S=x?"bottom":"right",E=x?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[y]-m[y]-i.floating[v],k=m[y]-i.reference[y],I=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let R=I?I[E]:0;(!R||!await(s.isElement==null?void 0:s.isElement(I)))&&(R=o.floating[E]||i.floating[v]);const j=C/2-k/2,F=R/2-b[v]/2-1,$=yu(h[w],F),G=yu(h[S],F),D=$,Z=R-b[v]-G,q=R/2-b[v]/2+j,ue=wC(D,q,Z),ie=!l.arrow&&sp(a)!=null&&q!==ue&&i.reference[v]/2-(q<D?$:G)-b[v]/2<0,ne=ie?q<D?q-D:q-Z:0;return{[y]:m[y]+ne,data:{[y]:ue,centerOffset:q-ue-ne,...ie&&{alignmentOffset:ne}},reset:ie}}}),FJ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...x}=ec(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=tc(a),S=bu(o),E=tc(o)===o,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=m||(E||!b?[uw(o)]:IJ(o)),I=v!=="none";!m&&I&&k.push(...OJ(o,b,v,C));const R=[o,...k],j=await Cg(t,x),F=[];let $=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&F.push(j[w]),h){const q=RJ(a,s,C);F.push(j[q[0]],j[q[1]])}if($=[...$,{placement:a,overflows:F}],!F.every(q=>q<=0)){var G,D;const q=(((G=i.flip)==null?void 0:G.index)||0)+1,ue=R[q];if(ue)return{data:{index:q,overflows:$},reset:{placement:ue}};let ie=(D=$.filter(ne=>ne.overflows[0]<=0).sort((ne,X)=>ne.overflows[1]-X.overflows[1])[0])==null?void 0:D.placement;if(!ie)switch(y){case"bestFit":{var Z;const ne=(Z=$.filter(X=>{if(I){const ae=bu(X.placement);return ae===S||ae==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(ae=>ae>0).reduce((ae,B)=>ae+B,0)]).sort((X,ae)=>X[1]-ae[1])[0])==null?void 0:Z[0];ne&&(ie=ne);break}case"initialPlacement":ie=o;break}if(a!==ie)return{reset:{placement:ie}}}return{}}}};function X3(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function J3(e){return TJ.some(t=>e[t]>=0)}const LJ=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=ec(e,t);switch(r){case"referenceHidden":{const i=await Cg(t,{...a,elementContext:"reference"}),s=X3(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:J3(s)}}}case"escaped":{const i=await Cg(t,{...a,altBoundary:!0}),s=X3(i,n.floating);return{data:{escapedOffsets:s,escaped:J3(s)}}}default:return{}}}}};async function $J(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),s=tc(n),o=sp(n),l=bu(n)==="y",u=["left","top"].includes(s)?-1:1,d=i&&l?-1:1,h=ec(t,e);let{mainAxis:m,crossAxis:y,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof v=="number"&&(y=o==="end"?v*-1:v),l?{x:y*d,y:m*u}:{x:m*u,y:y*d}}const BJ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await $J(t,e);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},zJ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:x=>{let{x:w,y:S}=x;return{x:w,y:S}}},...l}=ec(e,t),u={x:n,y:r},d=await Cg(t,l),h=bu(tc(a)),m=$k(h);let y=u[m],v=u[h];if(i){const x=m==="y"?"top":"left",w=m==="y"?"bottom":"right",S=y+d[x],E=y-d[w];y=wC(S,y,E)}if(s){const x=h==="y"?"top":"left",w=h==="y"?"bottom":"right",S=v+d[x],E=v-d[w];v=wC(S,v,E)}const b=o.fn({...t,[m]:y,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[m]:i,[h]:s}}}}}},UJ=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=ec(e,t),d={x:n,y:r},h=bu(a),m=$k(h);let y=d[m],v=d[h];const b=ec(o,t),x=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=m==="y"?"height":"width",C=i.reference[m]-i.floating[E]+x.mainAxis,k=i.reference[m]+i.reference[E]-x.mainAxis;y<C?y=C:y>k&&(y=k)}if(u){var w,S;const E=m==="y"?"width":"height",C=["top","left"].includes(tc(a)),k=i.reference[h]-i.floating[E]+(C&&((w=s.offset)==null?void 0:w[h])||0)+(C?0:x.crossAxis),I=i.reference[h]+i.reference[E]+(C?0:((S=s.offset)==null?void 0:S[h])||0)-(C?x.crossAxis:0);v<k?v=k:v>I&&(v=I)}return{[m]:y,[h]:v}}}},HJ=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...u}=ec(e,t),d=await Cg(t,u),h=tc(a),m=sp(a),y=bu(a)==="y",{width:v,height:b}=i.floating;let x,w;h==="top"||h==="bottom"?(x=h,w=m===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(w=h,x=m==="end"?"top":"bottom");const S=b-d.top-d.bottom,E=v-d.left-d.right,C=yu(b-d[x],S),k=yu(v-d[w],E),I=!t.middlewareData.shift;let R=C,j=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(j=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(R=S),I&&!m){const $=as(d.left,0),G=as(d.right,0),D=as(d.top,0),Z=as(d.bottom,0);y?j=v-2*($!==0||G!==0?$+G:as(d.left,d.right)):R=b-2*(D!==0||Z!==0?D+Z:as(d.top,d.bottom))}await l({...t,availableWidth:j,availableHeight:R});const F=await s.getDimensions(o.floating);return v!==F.width||b!==F.height?{reset:{rects:!0}}:{}}}};function dx(){return typeof window<"u"}function op(e){return K8(e)?(e.nodeName||"").toLowerCase():"#document"}function ss(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function sl(e){var t;return(t=(K8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function K8(e){return dx()?e instanceof Node||e instanceof ss(e).Node:!1}function ao(e){return dx()?e instanceof Element||e instanceof ss(e).Element:!1}function Jo(e){return dx()?e instanceof HTMLElement||e instanceof ss(e).HTMLElement:!1}function Q3(e){return!dx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ss(e).ShadowRoot}function v0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=io(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function qJ(e){return["table","td","th"].includes(op(e))}function fx(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Uk(e){const t=Hk(),n=ao(e)?io(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function VJ(e){let t=vu(e);for(;Jo(t)&&!Lh(t);){if(Uk(t))return t;if(fx(t))return null;t=vu(t)}return null}function Hk(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Lh(e){return["html","body","#document"].includes(op(e))}function io(e){return ss(e).getComputedStyle(e)}function hx(e){return ao(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function vu(e){if(op(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Q3(e)&&e.host||sl(e);return Q3(t)?t.host:t}function W8(e){const t=vu(e);return Lh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Jo(t)&&v0(t)?t:W8(t)}function kg(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=W8(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),s=ss(a);if(i){const o=_C(s);return t.concat(s,s.visualViewport||[],v0(a)?a:[],o&&n?kg(o):[])}return t.concat(a,kg(a,[],n))}function _C(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Z8(e){const t=io(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Jo(e),i=a?e.offsetWidth:n,s=a?e.offsetHeight:r,o=cw(n)!==i||cw(r)!==s;return o&&(n=i,r=s),{width:n,height:r,$:o}}function qk(e){return ao(e)?e:e.contextElement}function Eh(e){const t=qk(e);if(!Jo(t))return Wo(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=Z8(t);let s=(i?cw(n.width):n.width)/r,o=(i?cw(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const GJ=Wo(0);function Y8(e){const t=ss(e);return!Hk()||!t.visualViewport?GJ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function KJ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ss(e)?!1:t}function $d(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=qk(e);let s=Wo(1);t&&(r?ao(r)&&(s=Eh(r)):s=Eh(e));const o=KJ(i,n,r)?Y8(i):Wo(0);let l=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,d=a.width/s.x,h=a.height/s.y;if(i){const m=ss(i),y=r&&ao(r)?ss(r):r;let v=m,b=_C(v);for(;b&&r&&y!==v;){const x=Eh(b),w=b.getBoundingClientRect(),S=io(b),E=w.left+(b.clientLeft+parseFloat(S.paddingLeft))*x.x,C=w.top+(b.clientTop+parseFloat(S.paddingTop))*x.y;l*=x.x,u*=x.y,d*=x.x,h*=x.y,l+=E,u+=C,v=ss(b),b=_C(v)}}return dw({width:d,height:h,x:l,y:u})}function Vk(e,t){const n=hx(e).scrollLeft;return t?t.left+n:$d(sl(e)).left+n}function X8(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:Vk(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function WJ(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",s=sl(r),o=t?fx(t.floating):!1;if(r===s||o&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Wo(1);const d=Wo(0),h=Jo(r);if((h||!h&&!i)&&((op(r)!=="body"||v0(s))&&(l=hx(r)),Jo(r))){const y=$d(r);u=Eh(r),d.x=y.x+r.clientLeft,d.y=y.y+r.clientTop}const m=s&&!h&&!i?X8(s,l,!0):Wo(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-l.scrollTop*u.y+d.y+m.y}}function ZJ(e){return Array.from(e.getClientRects())}function YJ(e){const t=sl(e),n=hx(e),r=e.ownerDocument.body,a=as(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=as(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Vk(e);const o=-n.scrollTop;return io(r).direction==="rtl"&&(s+=as(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:s,y:o}}function XJ(e,t){const n=ss(e),r=sl(e),a=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const u=Hk();(!u||u&&t==="fixed")&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}function JJ(e,t){const n=$d(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Jo(e)?Eh(e):Wo(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y,l=a*i.x,u=r*i.y;return{width:s,height:o,x:l,y:u}}function ej(e,t,n){let r;if(t==="viewport")r=XJ(e,n);else if(t==="document")r=YJ(sl(e));else if(ao(t))r=JJ(t,n);else{const a=Y8(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return dw(r)}function J8(e,t){const n=vu(e);return n===t||!ao(n)||Lh(n)?!1:io(n).position==="fixed"||J8(n,t)}function QJ(e,t){const n=t.get(e);if(n)return n;let r=kg(e,[],!1).filter(o=>ao(o)&&op(o)!=="body"),a=null;const i=io(e).position==="fixed";let s=i?vu(e):e;for(;ao(s)&&!Lh(s);){const o=io(s),l=Uk(s);!l&&o.position==="fixed"&&(a=null),(i?!l&&!a:!l&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||v0(s)&&!l&&J8(e,s))?r=r.filter(d=>d!==s):a=o,s=vu(s)}return t.set(e,r),r}function eQ(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const s=[...n==="clippingAncestors"?fx(t)?[]:QJ(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((u,d)=>{const h=ej(t,d,a);return u.top=as(h.top,u.top),u.right=yu(h.right,u.right),u.bottom=yu(h.bottom,u.bottom),u.left=as(h.left,u.left),u},ej(t,o,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function tQ(e){const{width:t,height:n}=Z8(e);return{width:t,height:n}}function nQ(e,t,n){const r=Jo(t),a=sl(t),i=n==="fixed",s=$d(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=Wo(0);if(r||!r&&!i)if((op(t)!=="body"||v0(a))&&(o=hx(t)),r){const m=$d(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else a&&(l.x=Vk(a));const u=a&&!r&&!i?X8(a,o):Wo(0),d=s.left+o.scrollLeft-l.x-u.x,h=s.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:s.width,height:s.height}}function zS(e){return io(e).position==="static"}function tj(e,t){if(!Jo(e)||io(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return sl(e)===n&&(n=n.ownerDocument.body),n}function Q8(e,t){const n=ss(e);if(fx(e))return n;if(!Jo(e)){let a=vu(e);for(;a&&!Lh(a);){if(ao(a)&&!zS(a))return a;a=vu(a)}return n}let r=tj(e,t);for(;r&&qJ(r)&&zS(r);)r=tj(r,t);return r&&Lh(r)&&zS(r)&&!Uk(r)?n:r||VJ(e)||n}const rQ=async function(e){const t=this.getOffsetParent||Q8,n=this.getDimensions,r=await n(e.floating);return{reference:nQ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function aQ(e){return io(e).direction==="rtl"}const iQ={convertOffsetParentRelativeRectToViewportRelativeRect:WJ,getDocumentElement:sl,getClippingRect:eQ,getOffsetParent:Q8,getElementRects:rQ,getClientRects:ZJ,getDimensions:tQ,getScale:Eh,isElement:ao,isRTL:aQ};function eP(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function sQ(e,t){let n=null,r;const a=sl(e);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:y}=u;if(o||t(),!m||!y)return;const v=Xb(h),b=Xb(a.clientWidth-(d+m)),x=Xb(a.clientHeight-(h+y)),w=Xb(d),E={rootMargin:-v+"px "+-b+"px "+-x+"px "+-w+"px",threshold:as(0,yu(1,l))||1};let C=!0;function k(I){const R=I[0].intersectionRatio;if(R!==l){if(!C)return s();R?s(!1,R):r=setTimeout(()=>{s(!1,1e-7)},1e3)}R===1&&!eP(u,e.getBoundingClientRect())&&s(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return s(!0),i}function oQ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=qk(e),d=a||i?[...u?kg(u):[],...kg(t)]:[];d.forEach(w=>{a&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const h=u&&o?sQ(u,n):null;let m=-1,y=null;s&&(y=new ResizeObserver(w=>{let[S]=w;S&&S.target===u&&y&&(y.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=y)==null||E.observe(t)})),n()}),u&&!l&&y.observe(u),y.observe(t));let v,b=l?$d(e):null;l&&x();function x(){const w=$d(e);b&&!eP(b,w)&&n(),b=w,v=requestAnimationFrame(x)}return n(),()=>{var w;d.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(w=y)==null||w.disconnect(),y=null,l&&cancelAnimationFrame(v)}}const lQ=BJ,cQ=zJ,uQ=FJ,dQ=HJ,fQ=LJ,nj=PJ,hQ=UJ,pQ=(e,t,n)=>{const r=new Map,a={platform:iQ,...n},i={...a.platform,_c:r};return MJ(e,t,{...a,platform:i})};var kv=typeof document<"u"?T.useLayoutEffect:T.useEffect;function fw(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!fw(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!fw(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function tP(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rj(e,t){const n=tP(e);return Math.round(t*n)/n}function US(e){const t=T.useRef(e);return kv(()=>{t.current=e}),t}function mQ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[d,h]=T.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,y]=T.useState(r);fw(m,r)||y(r);const[v,b]=T.useState(null),[x,w]=T.useState(null),S=T.useCallback(X=>{X!==I.current&&(I.current=X,b(X))},[]),E=T.useCallback(X=>{X!==R.current&&(R.current=X,w(X))},[]),C=i||v,k=s||x,I=T.useRef(null),R=T.useRef(null),j=T.useRef(d),F=l!=null,$=US(l),G=US(a),D=US(u),Z=T.useCallback(()=>{if(!I.current||!R.current)return;const X={placement:t,strategy:n,middleware:m};G.current&&(X.platform=G.current),pQ(I.current,R.current,X).then(ae=>{const B={...ae,isPositioned:D.current!==!1};q.current&&!fw(j.current,B)&&(j.current=B,Ho.flushSync(()=>{h(B)}))})},[m,t,n,G,D]);kv(()=>{u===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,h(X=>({...X,isPositioned:!1})))},[u]);const q=T.useRef(!1);kv(()=>(q.current=!0,()=>{q.current=!1}),[]),kv(()=>{if(C&&(I.current=C),k&&(R.current=k),C&&k){if($.current)return $.current(C,k,Z);Z()}},[C,k,Z,$,F]);const ue=T.useMemo(()=>({reference:I,floating:R,setReference:S,setFloating:E}),[S,E]),ie=T.useMemo(()=>({reference:C,floating:k}),[C,k]),ne=T.useMemo(()=>{const X={position:n,left:0,top:0};if(!ie.floating)return X;const ae=rj(ie.floating,d.x),B=rj(ie.floating,d.y);return o?{...X,transform:"translate("+ae+"px, "+B+"px)",...tP(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ae,top:B}},[n,o,ie.floating,d.x,d.y]);return T.useMemo(()=>({...d,update:Z,refs:ue,elements:ie,floatingStyles:ne}),[d,Z,ue,ie,ne])}const gQ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?nj({element:r.current,padding:a}).fn(n):{}:r?nj({element:r,padding:a}).fn(n):{}}}},yQ=(e,t)=>({...lQ(e),options:[e,t]}),bQ=(e,t)=>({...cQ(e),options:[e,t]}),vQ=(e,t)=>({...hQ(e),options:[e,t]}),wQ=(e,t)=>({...uQ(e),options:[e,t]}),xQ=(e,t)=>({...dQ(e),options:[e,t]}),_Q=(e,t)=>({...fQ(e),options:[e,t]}),SQ=(e,t)=>({...gQ(e),options:[e,t]});var EQ="Arrow",nP=T.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return p.jsx(rn.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});nP.displayName=EQ;var CQ=nP;function px(e){const[t,n]=T.useState(void 0);return Ua(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=e.offsetWidth,o=e.offsetHeight;n({width:s,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Gk="Popper",[rP,Au]=di(Gk),[kQ,aP]=rP(Gk),iP=e=>{const{__scopePopper:t,children:n}=e,[r,a]=T.useState(null);return p.jsx(kQ,{scope:t,anchor:r,onAnchorChange:a,children:n})};iP.displayName=Gk;var sP="PopperAnchor",oP=T.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=aP(sP,n),s=T.useRef(null),o=Cn(t,s);return T.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:p.jsx(rn.div,{...a,ref:o})});oP.displayName=sP;var Kk="PopperContent",[TQ,AQ]=rP(Kk),lP=T.forwardRef((e,t)=>{var Ae,Ne,Ce,Pe,Qe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:v,...b}=e,x=aP(Kk,n),[w,S]=T.useState(null),E=Cn(t,Ie=>S(Ie)),[C,k]=T.useState(null),I=px(C),R=(I==null?void 0:I.width)??0,j=(I==null?void 0:I.height)??0,F=r+(i!=="center"?"-"+i:""),$=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},G=Array.isArray(u)?u:[u],D=G.length>0,Z={padding:$,boundary:G.filter(RQ),altBoundary:D},{refs:q,floatingStyles:ue,placement:ie,isPositioned:ne,middlewareData:X}=mQ({strategy:"fixed",placement:F,whileElementsMounted:(...Ie)=>oQ(...Ie,{animationFrame:y==="always"}),elements:{reference:x.anchor},middleware:[yQ({mainAxis:a+j,alignmentAxis:s}),l&&bQ({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?vQ():void 0,...Z}),l&&wQ({...Z}),xQ({...Z,apply:({elements:Ie,rects:z,availableWidth:Se,availableHeight:Te})=>{const{width:de,height:se}=z.reference,Q=Ie.floating.style;Q.setProperty("--radix-popper-available-width",`${Se}px`),Q.setProperty("--radix-popper-available-height",`${Te}px`),Q.setProperty("--radix-popper-anchor-width",`${de}px`),Q.setProperty("--radix-popper-anchor-height",`${se}px`)}}),C&&SQ({element:C,padding:o}),IQ({arrowWidth:R,arrowHeight:j}),m&&_Q({strategy:"referenceHidden",...Z})]}),[ae,B]=dP(ie),J=La(v);Ua(()=>{ne&&(J==null||J())},[ne,J]);const ee=(Ae=X.arrow)==null?void 0:Ae.x,te=(Ne=X.arrow)==null?void 0:Ne.y,fe=((Ce=X.arrow)==null?void 0:Ce.centerOffset)!==0,[ve,De]=T.useState();return Ua(()=>{w&&De(window.getComputedStyle(w).zIndex)},[w]),p.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:ne?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Pe=X.transformOrigin)==null?void 0:Pe.x,(Qe=X.transformOrigin)==null?void 0:Qe.y].join(" "),...((Le=X.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(TQ,{scope:n,placedSide:ae,onArrowChange:k,arrowX:ee,arrowY:te,shouldHideArrow:fe,children:p.jsx(rn.div,{"data-side":ae,"data-align":B,...b,ref:E,style:{...b.style,animation:ne?void 0:"none"}})})})});lP.displayName=Kk;var cP="PopperArrow",NQ={top:"bottom",right:"left",bottom:"top",left:"right"},uP=T.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=AQ(cP,r),s=NQ[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(CQ,{...a,ref:n,style:{...a.style,display:"block"}})})});uP.displayName=cP;function RQ(e){return e!==null}var IQ=e=>({name:"transformOrigin",options:e,fn(t){var x,w,S;const{placement:n,rects:r,middlewareData:a}=t,s=((x=a.arrow)==null?void 0:x.centerOffset)!==0,o=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[u,d]=dP(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((w=a.arrow)==null?void 0:w.x)??0)+o/2,y=(((S=a.arrow)==null?void 0:S.y)??0)+l/2;let v="",b="";return u==="bottom"?(v=s?h:`${m}px`,b=`${-l}px`):u==="top"?(v=s?h:`${m}px`,b=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,b=s?h:`${y}px`):u==="left"&&(v=`${r.floating.width+l}px`,b=s?h:`${y}px`),{data:{x:v,y:b}}}});function dP(e){const[t,n="center"]=e.split("-");return[t,n]}var mx=iP,w0=oP,gx=lP,yx=uP,jQ="Portal",lp=T.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[a,i]=T.useState(!1);Ua(()=>i(!0),[]);const s=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?U8.createPortal(p.jsx(rn.div,{...r,ref:t}),s):null});lp.displayName=jQ;function OQ(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var Ta=e=>{const{present:t,children:n}=e,r=DQ(t),a=typeof n=="function"?n({present:r.isPresent}):T.Children.only(n),i=Cn(r.ref,MQ(a));return typeof n=="function"||r.isPresent?T.cloneElement(a,{ref:i}):null};Ta.displayName="Presence";function DQ(e){const[t,n]=T.useState(),r=T.useRef(null),a=T.useRef(e),i=T.useRef("none"),s=e?"mounted":"unmounted",[o,l]=OQ(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return T.useEffect(()=>{const u=Jb(r.current);i.current=o==="mounted"?u:"none"},[o]),Ua(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,y=Jb(u);e?l("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&m!==y?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),Ua(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=y=>{const b=Jb(r.current).includes(y.animationName);if(y.target===t&&b&&(l("ANIMATION_END"),!a.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},m=y=>{y.target===t&&(i.current=Jb(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:T.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Jb(e){return(e==null?void 0:e.animationName)||"none"}function MQ(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var PQ=F6[" useInsertionEffect ".trim().toString()]||Ua;function js({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,s]=FQ({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:a;{const d=T.useRef(e!==void 0);T.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=T.useCallback(d=>{var h;if(o){const m=LQ(d)?d(e):d;m!==e&&((h=s.current)==null||h.call(s,m))}else i(d)},[o,e,i,s]);return[l,u]}function FQ({defaultProp:e,onChange:t}){const[n,r]=T.useState(e),a=T.useRef(n),i=T.useRef(t);return PQ(()=>{i.current=t},[t]),T.useEffect(()=>{var s;a.current!==n&&((s=i.current)==null||s.call(i,n),a.current=n)},[n,a]),[n,r,i]}function LQ(e){return typeof e=="function"}var fP=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),$Q="VisuallyHidden",hP=T.forwardRef((e,t)=>p.jsx(rn.span,{...e,ref:t,style:{...fP,...e.style}}));hP.displayName=$Q;var BQ=hP,[bx,LSe]=di("Tooltip",[Au]),vx=Au(),pP="TooltipProvider",zQ=700,SC="tooltip.open",[UQ,Wk]=bx(pP),mP=e=>{const{__scopeTooltip:t,delayDuration:n=zQ,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,s=T.useRef(!0),o=T.useRef(!1),l=T.useRef(0);return T.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),p.jsx(UQ,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:T.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:T.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:T.useCallback(u=>{o.current=u},[]),disableHoverableContent:a,children:i})};mP.displayName=pP;var Tg="Tooltip",[HQ,x0]=bx(Tg),gP=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,l=Wk(Tg,e.__scopeTooltip),u=vx(t),[d,h]=T.useState(null),m=Ea(),y=T.useRef(0),v=s??l.disableHoverableContent,b=o??l.delayDuration,x=T.useRef(!1),[w,S]=js({prop:r,defaultProp:a??!1,onChange:R=>{R?(l.onOpen(),document.dispatchEvent(new CustomEvent(SC))):l.onClose(),i==null||i(R)},caller:Tg}),E=T.useMemo(()=>w?x.current?"delayed-open":"instant-open":"closed",[w]),C=T.useCallback(()=>{window.clearTimeout(y.current),y.current=0,x.current=!1,S(!0)},[S]),k=T.useCallback(()=>{window.clearTimeout(y.current),y.current=0,S(!1)},[S]),I=T.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{x.current=!0,S(!0),y.current=0},b)},[b,S]);return T.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),p.jsx(mx,{...u,children:p.jsx(HQ,{scope:t,contentId:m,open:w,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:T.useCallback(()=>{l.isOpenDelayedRef.current?I():C()},[l.isOpenDelayedRef,I,C]),onTriggerLeave:T.useCallback(()=>{v?k():(window.clearTimeout(y.current),y.current=0)},[k,v]),onOpen:C,onClose:k,disableHoverableContent:v,children:n})})};gP.displayName=Tg;var EC="TooltipTrigger",yP=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=x0(EC,n),i=Wk(EC,n),s=vx(n),o=T.useRef(null),l=Cn(t,o,a.onTriggerChange),u=T.useRef(!1),d=T.useRef(!1),h=T.useCallback(()=>u.current=!1,[]);return T.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(w0,{asChild:!0,...s,children:p.jsx(rn.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:qt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:qt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:qt(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:qt(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:qt(e.onBlur,a.onClose),onClick:qt(e.onClick,a.onClose)})})});yP.displayName=EC;var Zk="TooltipPortal",[qQ,VQ]=bx(Zk,{forceMount:void 0}),bP=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=x0(Zk,t);return p.jsx(qQ,{scope:t,forceMount:n,children:p.jsx(Ta,{present:n||i.open,children:p.jsx(lp,{asChild:!0,container:a,children:r})})})};bP.displayName=Zk;var $h="TooltipContent",vP=T.forwardRef((e,t)=>{const n=VQ($h,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,s=x0($h,e.__scopeTooltip);return p.jsx(Ta,{present:r||s.open,children:s.disableHoverableContent?p.jsx(wP,{side:a,...i,ref:t}):p.jsx(GQ,{side:a,...i,ref:t})})}),GQ=T.forwardRef((e,t)=>{const n=x0($h,e.__scopeTooltip),r=Wk($h,e.__scopeTooltip),a=T.useRef(null),i=Cn(t,a),[s,o]=T.useState(null),{trigger:l,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=T.useCallback(()=>{o(null),h(!1)},[h]),y=T.useCallback((v,b)=>{const x=v.currentTarget,w={x:v.clientX,y:v.clientY},S=YQ(w,x.getBoundingClientRect()),E=XQ(w,S),C=JQ(b.getBoundingClientRect()),k=eee([...E,...C]);o(k),h(!0)},[h]);return T.useEffect(()=>()=>m(),[m]),T.useEffect(()=>{if(l&&d){const v=x=>y(x,d),b=x=>y(x,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,y,m]),T.useEffect(()=>{if(s){const v=b=>{const x=b.target,w={x:b.clientX,y:b.clientY},S=(l==null?void 0:l.contains(x))||(d==null?void 0:d.contains(x)),E=!QQ(w,s);S?m():E&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,s,u,m]),p.jsx(wP,{...e,ref:i})}),[KQ,WQ]=bx(Tg,{isInside:!1}),ZQ=fH("TooltipContent"),wP=T.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,l=x0($h,n),u=vx(n),{onClose:d}=l;return T.useEffect(()=>(document.addEventListener(SC,d),()=>document.removeEventListener(SC,d)),[d]),T.useEffect(()=>{if(l.trigger){const h=m=>{const y=m.target;y!=null&&y.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),p.jsx(ip,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:p.jsxs(gx,{"data-state":l.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(ZQ,{children:r}),p.jsx(KQ,{scope:n,isInside:!0,children:p.jsx(BQ,{id:l.contentId,role:"tooltip",children:a||r})})]})})});vP.displayName=$h;var xP="TooltipArrow",_P=T.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=vx(n);return WQ(xP,n).isInside?null:p.jsx(yx,{...a,...r,ref:t})});_P.displayName=xP;function YQ(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function XQ(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function JQ(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function QQ(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function eee(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),tee(t)}function tee(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var nee=mP,ree=gP,aee=yP,iee=bP,see=vP,oee=_P;function Gn({delayDuration:e=0,...t}){return p.jsx(nee,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Xn({...e}){return p.jsx(Gn,{children:p.jsx(ree,{"data-slot":"tooltip",...e})})}function Jn({...e}){return p.jsx(aee,{"data-slot":"tooltip-trigger",...e})}function Qn({className:e,sideOffset:t=0,children:n,...r}){return p.jsx(iee,{children:p.jsxs(see,{"data-slot":"tooltip-content",sideOffset:t,className:_t("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,p.jsx(oee,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var HS={exports:{}},aj;function lee(){return aj||(aj=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof l?new l(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var k,I;switch(o.util.type(E)){case"Object":if(I=o.util.objId(E),C[I])return C[I];k={},C[I]=k;for(var R in E)E.hasOwnProperty(R)&&(k[R]=S(E[R],C));return k;case"Array":return I=o.util.objId(E),C[I]?C[I]:(k=[],C[I]=k,E.forEach(function(j,F){k[F]=S(j,C)}),k);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var k="no-"+E;S;){var I=S.classList;if(I.contains(E))return!0;if(I.contains(k))return!1;S=S.parentElement}return!!C}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(S,E){var C=o.util.clone(o.languages[S]);for(var k in E)C[k]=E[k];return C},insertBefore:function(S,E,C,k){k=k||o.languages;var I=k[S],R={};for(var j in I)if(I.hasOwnProperty(j)){if(j==E)for(var F in C)C.hasOwnProperty(F)&&(R[F]=C[F]);C.hasOwnProperty(j)||(R[j]=I[j])}var $=k[S];return k[S]=R,o.languages.DFS(o.languages,function(G,D){D===$&&G!=S&&(this[G]=R)}),R},DFS:function S(E,C,k,I){I=I||{};var R=o.util.objId;for(var j in E)if(E.hasOwnProperty(j)){C.call(E,j,E[j],k||j);var F=E[j],$=o.util.type(F);$==="Object"&&!I[R(F)]?(I[R(F)]=!0,S(F,C,null,I)):$==="Array"&&!I[R(F)]&&(I[R(F)]=!0,S(F,C,j,I))}}},plugins:{},highlightAll:function(S,E){o.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var k={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var I=0,R;R=k.elements[I++];)o.highlightElement(R,E===!0,k.callback)},highlightElement:function(S,E,C){var k=o.util.getLanguage(S),I=o.languages[k];o.util.setLanguage(S,k);var R=S.parentElement;R&&R.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(R,k);var j=S.textContent,F={element:S,language:k,grammar:I,code:j};function $(D){F.highlightedCode=D,o.hooks.run("before-insert",F),F.element.innerHTML=F.highlightedCode,o.hooks.run("after-highlight",F),o.hooks.run("complete",F),C&&C.call(F.element)}if(o.hooks.run("before-sanity-check",F),R=F.element.parentElement,R&&R.nodeName.toLowerCase()==="pre"&&!R.hasAttribute("tabindex")&&R.setAttribute("tabindex","0"),!F.code){o.hooks.run("complete",F),C&&C.call(F.element);return}if(o.hooks.run("before-highlight",F),!F.grammar){$(o.util.encode(F.code));return}if(E&&r.Worker){var G=new Worker(o.filename);G.onmessage=function(D){$(D.data)},G.postMessage(JSON.stringify({language:F.language,code:F.code,immediateClose:!0}))}else $(o.highlight(F.code,F.grammar,F.language))},highlight:function(S,E,C){var k={code:S,grammar:E,language:C};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),l.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var I=new h;return m(I,I.head,S),d(S,I,E,I.head,0),v(I)},hooks:{all:{},add:function(S,E){var C=o.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=o.hooks.all[S];if(!(!C||!C.length))for(var k=0,I;I=C[k++];)I(E)}},Token:l};r.Prism=o;function l(S,E,C,k){this.type=S,this.content=E,this.alias=C,this.length=(k||"").length|0}l.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function($){k+=S($,C)}),k}var I={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},R=E.alias;R&&(Array.isArray(R)?Array.prototype.push.apply(I.classes,R):I.classes.push(R)),o.hooks.run("wrap",I);var j="";for(var F in I.attributes)j+=" "+F+'="'+(I.attributes[F]||"").replace(/"/g,"&quot;")+'"';return"<"+I.tag+' class="'+I.classes.join(" ")+'"'+j+">"+I.content+"</"+I.tag+">"};function u(S,E,C,k){S.lastIndex=E;var I=S.exec(C);if(I&&k&&I[1]){var R=I[1].length;I.index+=R,I[0]=I[0].slice(R)}return I}function d(S,E,C,k,I,R){for(var j in C)if(!(!C.hasOwnProperty(j)||!C[j])){var F=C[j];F=Array.isArray(F)?F:[F];for(var $=0;$<F.length;++$){if(R&&R.cause==j+","+$)return;var G=F[$],D=G.inside,Z=!!G.lookbehind,q=!!G.greedy,ue=G.alias;if(q&&!G.pattern.global){var ie=G.pattern.toString().match(/[imsuy]*$/)[0];G.pattern=RegExp(G.pattern.source,ie+"g")}for(var ne=G.pattern||G,X=k.next,ae=I;X!==E.tail&&!(R&&ae>=R.reach);ae+=X.value.length,X=X.next){var B=X.value;if(E.length>S.length)return;if(!(B instanceof l)){var J=1,ee;if(q){if(ee=u(ne,ae,S,Z),!ee||ee.index>=S.length)break;var De=ee.index,te=ee.index+ee[0].length,fe=ae;for(fe+=X.value.length;De>=fe;)X=X.next,fe+=X.value.length;if(fe-=X.value.length,ae=fe,X.value instanceof l)continue;for(var ve=X;ve!==E.tail&&(fe<te||typeof ve.value=="string");ve=ve.next)J++,fe+=ve.value.length;J--,B=S.slice(ae,fe),ee.index-=ae}else if(ee=u(ne,0,B,Z),!ee)continue;var De=ee.index,Ae=ee[0],Ne=B.slice(0,De),Ce=B.slice(De+Ae.length),Pe=ae+B.length;R&&Pe>R.reach&&(R.reach=Pe);var Qe=X.prev;Ne&&(Qe=m(E,Qe,Ne),ae+=Ne.length),y(E,Qe,J);var Le=new l(j,D?o.tokenize(Ae,D):Ae,ue,Ae);if(X=m(E,Qe,Le),Ce&&m(E,X,Ce),J>1){var Ie={cause:j+","+$,reach:Pe};d(S,E,C,X.prev,ae,Ie),R&&Ie.reach>R.reach&&(R.reach=Ie.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function m(S,E,C){var k=E.next,I={value:C,prev:E,next:k};return E.next=I,k.prev=I,S.length++,I}function y(S,E,C){for(var k=E.next,I=0;I<C&&k!==S.tail;I++)k=k.next;E.next=k,k.prev=E,S.length-=I}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,k=E.code,I=E.immediateClose;r.postMessage(o.highlight(k,o.languages[C],C)),I&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function x(){o.manual||o.highlightAll()}if(!o.manual){var w=document.readyState;w==="loading"||w==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",x):window.requestAnimationFrame?window.requestAnimationFrame(x):window.setTimeout(x,16)}return o}(t);e.exports&&(e.exports=n),typeof Ed<"u"&&(Ed.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,x){return" Error "+b+" while fetching file: "+x},i=" Error: File does not exist or is empty",s={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",h="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function m(b,x,w){var S=new XMLHttpRequest;S.open("GET",b,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?x(S.responseText):S.status>=400?w(a(S.status,S.statusText)):w(i))},S.send(null)}function y(b){var x=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(x){var w=Number(x[1]),S=x[2],E=x[3];return S?E?[w,Number(E)]:[w,void 0]:[w,w]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var x=b.element;if(x.matches(h)){b.code="",x.setAttribute(o,l);var w=x.appendChild(document.createElement("CODE"));w.textContent=r;var S=x.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=s[C]||C}n.util.setLanguage(w,E),n.util.setLanguage(x,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),m(S,function(I){x.setAttribute(o,u);var R=y(x.getAttribute("data-range"));if(R){var j=I.split(/\r\n?|\n/g),F=R[0],$=R[1]==null?j.length:R[1];F<0&&(F+=j.length),F=Math.max(0,Math.min(F-1,j.length)),$<0&&($+=j.length),$=Math.max(0,Math.min($,j.length)),I=j.slice(F,$).join(`
`),x.hasAttribute("data-start")||x.setAttribute("data-start",String(F+1))}w.textContent=I,n.highlightElement(w)},function(I){x.setAttribute(o,d),w.textContent=I})}}),n.plugins.fileHighlight={highlight:function(x){for(var w=(x||document).querySelectorAll(h),S=0,E;E=w[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(HS)),HS.exports}var cee=lee();const uee=ui(cee);var ij={},sj;function dee(){return sj||(sj=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),ij}dee();var oj={},lj;function fee(){return lj||(lj=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),oj}fee();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,s=0;s<a.length;s++)i[a[s]]=e.languages.bash[a[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var y=0,v=m.length;y<v;y++){var b=m[y];if(b.type!=="code"){h(b.content);continue}var x=b.content[1],w=b.content[3];if(x&&w&&x.type==="code-language"&&w.type==="code-block"&&typeof x.content=="string"){var S=x.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;w.alias?typeof w.alias=="string"?w.alias=[w.alias,E]:w.alias.push(E):w.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",m=0,y=d.classes.length;m<y;m++){var v=d.classes[m],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var x=e.languages[h];if(x)d.content=e.highlight(u(d.content),x,h);else if(h&&h!=="none"&&e.plugins.autoloader){var w="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=w,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(w);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var h=d.replace(s,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,y){if(y=y.toLowerCase(),y[0]==="#"){var v;return y[1]==="x"?v=parseInt(y.slice(2),16):v=Number(y.slice(1)),l(v)}else{var b=o[y];return b||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(o,l){l=(l||"").replace(/m/g,"")+"m";var u=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(u,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(i),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var cj={},uj;function hee(){return uj||(uj=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),cj}hee();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const dj="prism-theme-link",qS="prism-default-light-theme-link",VS="prism-default-dark-theme-link",pee="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",mee="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css",fj=e=>e.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),gee=({lang:e,code:t,isStreaming:n=!1})=>{const{prismThemeUrl:r,theme:a,foldStreamingCodeBlocks:i}=lr(dn(S=>({prismThemeUrl:S.prismThemeUrl,theme:S.theme,foldStreamingCodeBlocks:S.foldStreamingCodeBlocks}))),[s,o]=T.useState(!1),[l,u]=T.useState(n?i:!1),d=T.useRef(null),h=T.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),m=a==="system"?h:a;T.useEffect(()=>{const S=(C,k)=>{const I=document.getElementById(k);if(I)I.href!==C&&(I.href=C);else{const R=document.createElement("link");R.id=k,R.rel="stylesheet",R.href=C,document.head.appendChild(R)}},E=C=>{const k=document.getElementById(C);k&&k.remove()};r?(S(r,dj),E(qS),E(VS)):(E(dj),m==="dark"?(S(fj(mee),VS),E(qS)):(S(fj(pee),qS),E(VS)))},[r,m]);const y=T.useCallback(()=>{if(d.current&&t)try{d.current.style.whiteSpace!=="pre-wrap"&&(d.current.style.whiteSpace="pre-wrap"),d.current.textContent=t,uee.highlightElement(d.current)}catch(S){console.error("Prism highlight error:",S),d.current.textContent=t}else d.current&&(d.current.textContent="")},[t]);T.useEffect(()=>{l||y()},[t,e,l,y]);const v=async()=>{try{await navigator.clipboard.writeText(t),o(!0),Ye.success("Code copied to clipboard!"),setTimeout(()=>o(!1),1500)}catch(S){Ye.error("Failed to copy code."),console.error("Clipboard copy failed:",S)}},b=()=>{const S=l;u(E=>!E),S&&setTimeout(y,0)},x=e?`language-${e}`:"language-plaintext",w=T.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:b,"aria-label":l?"Unfold code":"Fold code",children:p.jsx(Yw,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{side:"top",children:l?"Unfold":"Fold"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:v,"aria-label":"Copy code",children:s?p.jsx(ls,{className:"h-3.5 w-3.5 text-green-500"}):p.jsx(vk,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{side:"top",children:"Copy"})]})})]})]}),p.jsx("div",{})]}),!l&&p.jsx("div",{className:"overflow-hidden w-full",children:p.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:p.jsx("code",{ref:d,className:x+" block"})})}),l&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:b,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:w})})]})},_0=T.memo(gee);var lt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(lt||(lt={}));const hj={[lt.EPERM]:"Operation not permitted",[lt.ENOENT]:"No such file or directory",[lt.EINTR]:"Interrupted system call",[lt.EIO]:"Input/output error",[lt.ENXIO]:"No such device or address",[lt.EBADF]:"Bad file descriptor",[lt.EAGAIN]:"Resource temporarily unavailable",[lt.ENOMEM]:"Cannot allocate memory",[lt.EACCES]:"Permission denied",[lt.EFAULT]:"Bad address",[lt.ENOTBLK]:"Block device required",[lt.EBUSY]:"Resource busy or locked",[lt.EEXIST]:"File exists",[lt.EXDEV]:"Invalid cross-device link",[lt.ENODEV]:"No such device",[lt.ENOTDIR]:"File is not a directory",[lt.EISDIR]:"File is a directory",[lt.EINVAL]:"Invalid argument",[lt.ENFILE]:"Too many open files in system",[lt.EMFILE]:"Too many open files",[lt.ETXTBSY]:"Text file busy",[lt.EFBIG]:"File is too big",[lt.ENOSPC]:"No space left on disk",[lt.ESPIPE]:"Illegal seek",[lt.EROFS]:"Cannot modify a read-only file system",[lt.EMLINK]:"Too many links",[lt.EPIPE]:"Broken pipe",[lt.EDOM]:"Numerical argument out of domain",[lt.ERANGE]:"Numerical result out of range",[lt.EDEADLK]:"Resource deadlock would occur",[lt.ENAMETOOLONG]:"File name too long",[lt.ENOLCK]:"No locks available",[lt.ENOSYS]:"Function not implemented",[lt.ENOTEMPTY]:"Directory is not empty",[lt.ELOOP]:"Too many levels of symbolic links",[lt.ENOMSG]:"No message of desired type",[lt.EBADE]:"Invalid exchange",[lt.EBADR]:"Invalid request descriptor",[lt.EXFULL]:"Exchange full",[lt.ENOANO]:"No anode",[lt.EBADRQC]:"Invalid request code",[lt.ENOSTR]:"Device not a stream",[lt.ENODATA]:"No data available",[lt.ETIME]:"Timer expired",[lt.ENOSR]:"Out of streams resources",[lt.ENONET]:"Machine is not on the network",[lt.EREMOTE]:"Object is remote",[lt.ENOLINK]:"Link has been severed",[lt.ECOMM]:"Communication error on send",[lt.EPROTO]:"Protocol error",[lt.EBADMSG]:"Bad message",[lt.EOVERFLOW]:"Value too large for defined data type",[lt.EBADFD]:"File descriptor in bad state",[lt.ESTRPIPE]:"Streams pipe error",[lt.ENOTSOCK]:"Socket operation on non-socket",[lt.EDESTADDRREQ]:"Destination address required",[lt.EMSGSIZE]:"Message too long",[lt.EPROTOTYPE]:"Protocol wrong type for socket",[lt.ENOPROTOOPT]:"Protocol not available",[lt.EPROTONOSUPPORT]:"Protocol not supported",[lt.ESOCKTNOSUPPORT]:"Socket type not supported",[lt.ENOTSUP]:"Operation is not supported",[lt.ENETDOWN]:"Network is down",[lt.ENETUNREACH]:"Network is unreachable",[lt.ENETRESET]:"Network dropped connection on reset",[lt.ETIMEDOUT]:"Connection timed out",[lt.ECONNREFUSED]:"Connection refused",[lt.EHOSTDOWN]:"Host is down",[lt.EHOSTUNREACH]:"No route to host",[lt.EALREADY]:"Operation already in progress",[lt.EINPROGRESS]:"Operation now in progress",[lt.ESTALE]:"Stale file handle",[lt.EREMOTEIO]:"Remote I/O error",[lt.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(lt[t],hj[lt[t]],n,r)}constructor(t,n=hj[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=lt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var GS={exports:{}},pj;function yee(){return pj||(pj=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var y=new a(d,h||l,m),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],y]:l._events[v].push(y):(l._events[v]=y,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,y=h.length,v=new Array(y);m<y;m++)v[m]=h[m].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,m,y,v){var b=n?n+u:u;if(!this._events[b])return!1;var x=this._events[b],w=arguments.length,S,E;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,h),!0;case 4:return x.fn.call(x.context,d,h,m),!0;case 5:return x.fn.call(x.context,d,h,m,y),!0;case 6:return x.fn.call(x.context,d,h,m,y,v),!0}for(E=1,S=new Array(w-1);E<w;E++)S[E-1]=arguments[E];x.fn.apply(x.context,S)}else{var C=x.length,k;for(E=0;E<C;E++)switch(x[E].once&&this.removeListener(u,x[E].fn,void 0,!0),w){case 1:x[E].fn.call(x[E].context);break;case 2:x[E].fn.call(x[E].context,d);break;case 3:x[E].fn.call(x[E].context,d,h);break;case 4:x[E].fn.call(x[E].context,d,h,m);break;default:if(!S)for(k=1,S=new Array(w-1);k<w;k++)S[k-1]=arguments[k];x[E].fn.apply(x[E].context,S)}}return!0},o.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,m){var y=n?n+u:u;if(!this._events[y])return this;if(!d)return s(this,y),this;var v=this._events[y];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&s(this,y);else{for(var b=0,x=[],w=v.length;b<w;b++)(v[b].fn!==d||m&&!v[b].once||h&&v[b].context!==h)&&x.push(v[b]);x.length?this._events[y]=x.length===1?x[0]:x:s(this,y)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(GS)),GS.exports}var bee=yee();const Yk=ui(bee);var j6;let vee=class extends Yk{constructor(n){super();ha(this,j6,"List");ha(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),s=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),s}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(j6=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function mj(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function br(e){throw e}const gj=Intl.NumberFormat("en",{notation:"compact"});gj.format.bind(gj);function Xd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function wee(e){try{return JSON.parse(e),!0}catch{return!1}}function CC(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function Xk(e){return e.at(0).toUpperCase()+e.slice(1)}const xee=new TextEncoder;function _d(e){return xee.encode(e)}const yj=new TextDecoder;function Jk(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return yj.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),yj.decode(t)}function Ag(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Ag(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function _ee(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var See={};let Eee="process"in globalThis&&"env"in globalThis.process&&See.U_DEBUG=="true";function Ng(...e){Eee&&console.debug("[U]",...e)}const bj=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],Cee=[...bj,...bj.map(e=>Xk(e)),"char"],Qk=/^(u?int|float)(8|16|32|64|128)$/i;function SP(e){return e=="char"?"uint8":e.toLowerCase()}function eT(e){return Qk.test(e.toString())}function kC(e){return e=="char"||Qk.test(e.toString().toLowerCase())}function kee(e){if(!kC(e))throw new TypeError("Not a valid primitive type: "+e)}const vj=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function EP(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function Tee(e){return e!=null&&typeof e=="object"&&"struct"in e}function wx(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function eo(e){return typeof e=="function"&&Symbol.metadata in e&&Tee(e[Symbol.metadata])}function S0(e){return e!=null&&typeof e=="object"&&eo(e.constructor)}function CP(e){if(!S0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function tT(e){return S0(e)||eo(e)}function kP(e){if(!tT(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function nT(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Hr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Hr(e[i]);return a}if(typeof e=="string")return kee(e),+SP(e).match(Qk)[2]/8;if(nT(e))return e[Symbol.size];kP(e);const t=eo(e)?e:e.constructor;wx(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(eo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(S0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Hr(i)):r+=Hr(i);continue}if(typeof a.length!="string")continue;let s=0;for(let o=0;o<e[a.length];o++)s+=Hr(tT(i[o])?i[o]:a.type);n.isUnion?r=Math.max(r,s):r+=s}return r}function Aee(e,t){var i;kP(e);const n=eo(e)?e:e.constructor;wx(n);const{struct:r}=n[Symbol.metadata];if(eo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??br(new Error("Struct does not have member: "+t));let a=0;for(const s of r.members.values()){if(s.name==t)return a;const o=e[s.name];a+=Hr(tT(o)?o:s.type)}throw new Error("Struct does not have member: "+t)}function Nee(e,t){return Math.ceil(e/t)*t}function Jd(e={}){return function(n,r){const a=new Map;let i=0,s=!1;for(const{name:o,type:l,length:u}of EP(r)){if(!kC(l)&&!eo(l))throw new TypeError("Not a valid type: "+l);if(typeof u=="string"){const m=a.get(u);if(!m)throw new Error(`"${u}" is undefined or declared after "${o}"`);if(!eT(m.type))throw new Error(`"${u}" is not a number and cannot be used to count "${o}"`)}let d=`${typeof l=="string"?l:l.name} ${o}`;u!==void 0&&(d+=`[${u}]`),a.set(o,{name:o,staticOffset:e.isUnion?0:i,type:kC(l)?SP(l):l,length:u,decl:d});const h=typeof u=="string"||eo(l)&&l[Symbol.metadata].struct.isDynamic?0:Hr(l)*(u||1);s||(s=eo(l)?l[Symbol.metadata].struct.isDynamic:typeof u=="string"),i=e.isUnion?Math.max(i,h):i+h,i=Nee(i,e.align||1),Ng("define",n.name+"."+o)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:s,isUnion:e.isUnion??!1},n}}function Rg(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return EP(r).push({name:a,type:e,length:t}),n}}function TP(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:br(new Error("Array lengths must be natural numbers"))}function Za(e){if(nT(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();CP(e),wx(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Hr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Ng("serialize",e.constructor.name);let s=0,o=0;for(const l of n.values()){const u=TP(e,l);Ng("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),s=o,o+=S0(h)?Hr(h):Hr(l.type),!eT(l.type)){a.set(h?Za(h):new Uint8Array(Hr(l.type)),s);continue}const m=`set${Xk(l.type)}`;if(m=="setInt64"){i.setBigInt64(s,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(s,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(s+(t.bigEndian?8:0),h&vj,!t.bigEndian),i.setBigInt64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(s+(t.bigEndian?8:0),h&vj,!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(s+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](s,Number(h),!t.bigEndian)}}return a}function xx(e,t){const n=_ee(t);if(nT(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);CP(e),wx(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Ng("deserialize",e.constructor.name);let s=0,o=0;for(const l of a.values()){const u=TP(e,l);Ng("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name]:e;const m=u!=-1?d:l.name,y=h[m]===null||h[m]===void 0,v=y&&eo(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(s=o,!S0(h[m])&&!v&&(o+=Hr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(s))+e[l.name].slice(d+1);continue}if(!eT(l.type)){if(v&&eo(l.type))h[m]??(h[m]=new l.type);else if(y)continue;xx(h[m],new Uint8Array(n.subarray(s))),o+=Hr(h[m]);continue}u&&u!=-1&&(h||(h=[]));const b=`get${Xk(l.type)}`;if(b=="getInt64"){h[m]=i.getBigInt64(s,!r.bigEndian);continue}if(b=="getUint64"){h[m]=i.getBigUint64(s,!r.bigEndian);continue}if(b=="getInt128"){h[m]=i.getBigInt64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[m]=i.getBigUint64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[m]=i.getFloat64(s+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[b](s,!r.bigEndian)}}}function Ree(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Rg(e,n):Rg(e)(n,r)}return t}const xn=Object.fromEntries(Cee.map(e=>[e,Ree(e)]));function Iee(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const fo={root:"/",pwd:"/",credentials:Iee({uid:0,gid:0}),descriptors:new Map};function AP(e,t){let n="",r=0,a=-1,i=0,s="\0";for(let o=0;o<=e.length;++o){if(o<e.length)s=e[o];else{if(s=="/")break;s="/"}if(s=="/"){if(!(a===o-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}else if(n.length!==0){n="",r=0,a=o,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else s==="."&&i!==-1?++i:i=-1}return n}function nc(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:fo.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=AP(n,!r),r?`/${n}`:n.length?n:"/"}function jee(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=AP(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function ur(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?jee(t):"."}function NP(e,t){if(e===t||(e=nc.call(this,e),t=nc.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,s=t.length-i,o=a<s?a:s;let l=-1,u=0;for(;u<o;u++){const h=e[n+u];if(h!==t[i+u])break;h==="/"&&(l=u)}if(u===o)if(s>o){if(t[i+u]==="/")return t.slice(i+u+1);if(u===0)return t.slice(i+u)}else a>o&&(e[n+u]==="/"?l=u:u===0&&(l=0));let d="";for(u=n+l+1;u<=r;++u)(u===r||e[u]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function ir(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Bh(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Po(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,s=-1,o=!0,l=e.length-1,u=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){i=l+1;break}continue}s===-1&&(o=!1,s=l+1),e[l]==="."?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}if(s!==-1){const d=i===0&&t?1:i;a===-1||u===0||u===1&&a===s-1&&a===i+1?n.base=n.name=e.slice(d,s):(n.name=e.slice(d,a),n.base=e.slice(d,s),n.ext=e.slice(a,s))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(vn||(vn={}));vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";const Oee=new vee;function Dee(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};Oee.add(n),Uee(n)}function Mee(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+ur(i,e.path)}function Nu(e){return function(t,n={}){return Dee(e,Mee(t,n)),t}}Nu(vn.EMERG);const Pee=Nu(vn.ALERT),_x=Nu(vn.CRIT),Mi=Nu(vn.ERR),ii=Nu(vn.WARN),rT=Nu(vn.NOTICE),RP=Nu(vn.INFO),rg=Nu(vn.DEBUG);function Fee(e,t){return`\x1B[${t}m${e}\x1B[0m`}function Lee(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[Fee(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";let $ee=e=>[...Lee(e),e.message];function Bee(e){const t=$ee(e);return typeof t=="string"?[t]:Array.from(t)}let zee=console.error;function Uee(e){e.level>Hee||zee(...Bee(e))}let Hee=vn.ALERT;function aT(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function qee(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function Vee(e,t){if(typeof t!="object"||t===null)throw Mi(new Ue(lt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){rg("Using default for option: "+n);continue}throw Mi(new Ue(lt.EINVAL,"Missing required option: "+n))}const i=(u,d=a)=>{var h;return typeof u=="function"?Symbol.hasInstance in u&&u.prototype?a instanceof u:u(a):typeof a===u||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===u};if(Array.isArray(r.type)?r.type.some(u=>i(u)):i(r.type))continue;const s=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,o=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw Mi(new Ue(lt.EINVAL,`Incorrect type for "${n}": ${s} (expected ${l})`))}}function IP(e){return e!=null&&typeof e=="object"&&"backend"in e&&aT(e.backend)}const iT=0,Ca=4,na=2,Tv=1,sT=1,Gee=2,Kee=4,jP=0,ri=1,Vl=2,Sx=64,Ex=128,Wee=256,Cx=512,Bd=1024,Zee=65536,Yee=262144,Xee=131072,kx=1052672,Jee=4096,Qee=32768,ete=16384,tte=2048,kr=61440,Qd=49152,uc=40960,to=32768,ef=24576,ma=16384,tf=8192,nf=4096,E0=2048,C0=1024,nte=512,rte=448,OP=256,DP=128,MP=64,ate=56,PP=32,FP=16,LP=8,ite=7,$P=4,BP=2,zP=1,ste=0,Ei=4294967295,UP=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:sT,COPYFILE_FICLONE:Gee,COPYFILE_FICLONE_FORCE:Kee,F_OK:iT,O_APPEND:Bd,O_CREAT:Sx,O_DIRECT:ete,O_DIRECTORY:Zee,O_DSYNC:Jee,O_EXCL:Ex,O_NOATIME:Yee,O_NOCTTY:Wee,O_NOFOLLOW:Xee,O_NONBLOCK:tte,O_RDONLY:jP,O_RDWR:Vl,O_SYMLINK:Qee,O_SYNC:kx,O_TRUNC:Cx,O_WRONLY:ri,R_OK:Ca,S_IFBLK:ef,S_IFCHR:tf,S_IFDIR:ma,S_IFIFO:nf,S_IFLNK:uc,S_IFMT:kr,S_IFREG:to,S_IFSOCK:Qd,S_IRGRP:PP,S_IROTH:$P,S_IRUSR:OP,S_IRWXG:ate,S_IRWXO:ite,S_IRWXU:rte,S_ISGID:C0,S_ISUID:E0,S_ISVTX:nte,S_IWGRP:FP,S_IWOTH:BP,S_IWUSR:DP,S_IXGRP:LP,S_IXOTH:zP,S_IXUSR:MP,UV_FS_O_FILEMAP:ste,W_OK:na,X_OK:Tv,size_max:Ei},Symbol.toStringTag,{value:"Module"})),Qb=BigInt(1e3);class HP{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:s,size:o,mode:l,ino:u,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(s??0),this.size=this._convert(o??0),this.ino=this._convert(u??0),this.mode=this._convert(l??420&to),(this.mode&kr)==0&&(this.mode=this.mode|this._convert(to)),Object.assign(this,d)}isFile(){return(this.mode&kr)===to}isDirectory(){return(this.mode&kr)===ma}isSymbolicLink(){return(this.mode&kr)===uc}isSocket(){return(this.mode&kr)===Qd}isBlockDevice(){return(this.mode&kr)===ef}isCharacterDevice(){return(this.mode&kr)===tf}isFIFO(){return(this.mode&kr)===nf}toJSON(){return Xd(this,TC)}hasAccess(t,n){return pr(n,this._isBigint?new dc(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*Qb}get mtimeNs(){return BigInt(this.mtimeMs)*Qb}get ctimeNs(){return BigInt(this.ctimeMs)*Qb}get birthtimeNs(){return BigInt(this.birthtimeMs)*Qb}}function qP(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<Ei?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<Ei?e.gid=n:r=!1,r}class dc extends HP{constructor(){super(...arguments),this._isBigint=!1}}class rf extends HP{constructor(){super(...arguments),this._isBigint=!0}}function ote(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class lte{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Ei,this.ffree=Ei}}class cte{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(Ei),this.ffree=BigInt(Ei)}}var Mr=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},bn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},oT=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Qi=0,ute=1024;let wj=(()=>{var e,t;let n=[Jd()],r,a=[],i,s,o=[],l=[],u,d=[],h=[],m,y=[],v=[],b,x=[],w=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=bn(this,o,0),this.valueSize=(bn(this,l),bn(this,d,0)),this._key=(bn(this,h),bn(this,y,"")),this._value=(bn(this,v),bn(this,x,new Uint8Array(ute))),bn(this,w),S&&(this.key=S),E&&(this.value=E)}},oT(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=xn).uint32.bind(e)],u=[(t=xn).uint32.bind(t)],m=[xn.char("keySize")],b=[xn.uint8("valueSize")],Mr(null,null,s,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},o,l),Mr(null,null,u,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},d,h),Mr(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},y,v),Mr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},x,w),Mr(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),bn(i,a)})(),i})(),wu=(()=>{var e;let t=[Jd()],n,r=[],a,i,s=[],o=[],l,u=[],d=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const y=this.get(h);if(y){y.value=m;return}this.data.push(new wj(h,m)),this.size++}remove(h){const m=this.data.findIndex(y=>y.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=bn(this,s,0),this.data=(bn(this,o),bn(this,u,[])),bn(this,d)}},oT(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=xn).uint32.bind(e)],l=[Rg(wj,"size")],Mr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,y)=>{m.size=y}},metadata:h},s,o),Mr(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,y)=>{m.data=y}},metadata:h},u,d),Mr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),bn(a,r)})(),a})();const TC=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],dte=4;var Pi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Pi||(Pi={}));let pa=(()=>{var e,t,n,r,a,i,s,o,l,u,d,h,m,y,v,b;let x=[Jd()],w,S=[],E,C,k=[],I=[],R,j=[],F=[],$,G=[],D=[],Z,q=[],ue=[],ie,ne=[],X=[],ae,B=[],J=[],ee,te=[],fe=[],ve,De=[],Ae=[],Ne,Ce=[],Pe=[],Qe,Le=[],Ie=[],z,Se=[],Te=[],de,se=[],Q=[],xe,Fe=[],Ee=[],Ge,Nt=[],it=[],St,Ft=[],Dt=[],Zt,ye=[],O=[],K,he=[],je=[],be,ke=[],le=[];var ft=E=class{constructor(vt){if(this.data=bn(this,k,CC(0,Ei)),this.__data_old=(bn(this,I),bn(this,j,0)),this.size=(bn(this,F),bn(this,G,0)),this.mode=(bn(this,D),bn(this,q,0)),this.nlink=(bn(this,ue),bn(this,ne,1)),this.uid=(bn(this,X),bn(this,B,0)),this.gid=(bn(this,J),bn(this,te,0)),this.atimeMs=(bn(this,fe),bn(this,De,Date.now())),this.birthtimeMs=(bn(this,Ae),bn(this,Ce,Date.now())),this.mtimeMs=(bn(this,Pe),bn(this,Le,Date.now())),this.ctimeMs=(bn(this,Ie),bn(this,Se,Date.now())),this.ino=(bn(this,Te),bn(this,se,CC(0,Ei))),this.__ino_old=(bn(this,Q),bn(this,Fe,0)),this.flags=(bn(this,Ee),bn(this,Nt,0)),this.__after_flags=(bn(this,it),bn(this,Ft,0)),this.version=(bn(this,Dt),bn(this,ye,0)),this.__padding=(bn(this,O),bn(this,he,[])),this.attributes=(bn(this,je),bn(this,ke,new wu)),bn(this,le),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<Hr(ft))throw _x(new Ue(lt.EIO,"Buffer is too small to create an inode"));xx(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Xd(this,TC),attributes:this.attributes}}toStats(){return new dc(this)}update(vt){if(!vt)return!1;let P=!1;for(const Be of TC)vt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==vt[Be]&&(Be=="atimeMs"&&this.flags&Pi.NoAtime||(this[Be]=vt[Be],P=!0)));return vt.attributes&&(this.attributes=vt.attributes,P=!0),P&&(this.ctimeMs=Date.now()),P}};return oT(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=xn).uint32.bind(e)],R=[(t=xn).uint32.bind(t)],$=[(n=xn).uint32.bind(n)],Z=[(r=xn).uint16.bind(r)],ie=[(a=xn).uint32.bind(a)],ae=[(i=xn).uint32.bind(i)],ee=[(s=xn).uint32.bind(s)],ve=[(o=xn).float64.bind(o)],Ne=[(l=xn).float64.bind(l)],Qe=[(u=xn).float64.bind(u)],z=[(d=xn).float64.bind(d)],de=[(h=xn).uint32.bind(h)],xe=[(m=xn).uint32.bind(m)],Ge=[(y=xn).uint32.bind(y)],St=[(v=xn).uint16.bind(v)],Zt=[(b=xn).uint32.bind(b)],K=[xn.uint8(48)],be=[Rg(wu)],Mr(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:P=>"data"in P,get:P=>P.data,set:(P,Be)=>{P.data=Be}},metadata:vt},k,I),Mr(null,null,R,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:P=>"__data_old"in P,get:P=>P.__data_old,set:(P,Be)=>{P.__data_old=Be}},metadata:vt},j,F),Mr(null,null,$,{kind:"field",name:"size",static:!1,private:!1,access:{has:P=>"size"in P,get:P=>P.size,set:(P,Be)=>{P.size=Be}},metadata:vt},G,D),Mr(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:P=>"mode"in P,get:P=>P.mode,set:(P,Be)=>{P.mode=Be}},metadata:vt},q,ue),Mr(null,null,ie,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:P=>"nlink"in P,get:P=>P.nlink,set:(P,Be)=>{P.nlink=Be}},metadata:vt},ne,X),Mr(null,null,ae,{kind:"field",name:"uid",static:!1,private:!1,access:{has:P=>"uid"in P,get:P=>P.uid,set:(P,Be)=>{P.uid=Be}},metadata:vt},B,J),Mr(null,null,ee,{kind:"field",name:"gid",static:!1,private:!1,access:{has:P=>"gid"in P,get:P=>P.gid,set:(P,Be)=>{P.gid=Be}},metadata:vt},te,fe),Mr(null,null,ve,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:P=>"atimeMs"in P,get:P=>P.atimeMs,set:(P,Be)=>{P.atimeMs=Be}},metadata:vt},De,Ae),Mr(null,null,Ne,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:P=>"birthtimeMs"in P,get:P=>P.birthtimeMs,set:(P,Be)=>{P.birthtimeMs=Be}},metadata:vt},Ce,Pe),Mr(null,null,Qe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:P=>"mtimeMs"in P,get:P=>P.mtimeMs,set:(P,Be)=>{P.mtimeMs=Be}},metadata:vt},Le,Ie),Mr(null,null,z,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:P=>"ctimeMs"in P,get:P=>P.ctimeMs,set:(P,Be)=>{P.ctimeMs=Be}},metadata:vt},Se,Te),Mr(null,null,de,{kind:"field",name:"ino",static:!1,private:!1,access:{has:P=>"ino"in P,get:P=>P.ino,set:(P,Be)=>{P.ino=Be}},metadata:vt},se,Q),Mr(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:P=>"__ino_old"in P,get:P=>P.__ino_old,set:(P,Be)=>{P.__ino_old=Be}},metadata:vt},Fe,Ee),Mr(null,null,Ge,{kind:"field",name:"flags",static:!1,private:!1,access:{has:P=>"flags"in P,get:P=>P.flags,set:(P,Be)=>{P.flags=Be}},metadata:vt},Nt,it),Mr(null,null,St,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:P=>"__after_flags"in P,get:P=>P.__after_flags,set:(P,Be)=>{P.__after_flags=Be}},metadata:vt},Ft,Dt),Mr(null,null,Zt,{kind:"field",name:"version",static:!1,private:!1,access:{has:P=>"version"in P,get:P=>P.version,set:(P,Be)=>{P.version=Be}},metadata:vt},ye,O),Mr(null,null,K,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:P=>"__padding"in P,get:P=>P.__padding,set:(P,Be)=>{P.__padding=Be}},metadata:vt},he,je),Mr(null,null,be,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:P=>"attributes"in P,get:P=>P.attributes,set:(P,Be)=>{P.attributes=Be}},metadata:vt},ke,le),Mr(null,w={value:E},x,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=w.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),bn(E,S)})(),ft=E})();function fte(e){return(e.mode&kr)===to}function so(e){return(e.mode&kr)===ma}function zh(e){return(e.mode&kr)===uc}function hte(e){return(e.mode&kr)===Qd}function Ig(e){return(e.mode&kr)===ef}function jg(e){return(e.mode&kr)===tf}function pte(e){return(e.mode&kr)===nf}function pr(e,t,n){const r=(e==null?void 0:e.credentials)||fo.credentials;if(zh(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&OP&&(a|=Ca),t.mode&DP&&(a|=na),t.mode&MP&&(a|=Tv)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&PP&&(a|=Ca),t.mode&FP&&(a|=na),t.mode&LP&&(a|=Tv)),t.mode&$P&&(a|=Ca),t.mode&BP&&(a|=na),t.mode&zP&&(a|=Tv),(a&n)===n}const xj=1;class hw extends Map{constructor(){super(...arguments),this.maxSize=Ei}toJSON(){return{version:xj,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Hr(pa);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&kr)!=ma)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())ir(a)==t&&a!=t&&(r[Bh(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&kr)!=ma)continue;const a={};for(const i of this.keys())ir(i)==n&&i!=n&&(a[Bh(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=xj)throw new Ue(lt.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=CC(1,Ei)),r=="/"&&(a.ino=0),this.set(r,new pa(a));return this}static parse(t){if(!wee(t))throw new Ue(lt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new hw;return r.fromJSON(n),r}}const KS=4096;let lT=class AC{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===AC.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===AC.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:s=a}=n;for(let o=i;o<s;o+=KS){const l=o+KS>s?s-o:KS,u=new Uint8Array(l);await this.read(t,u,o,o+l).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,s)=>{let o=!1;const l=d=>{o=!0,s.error(d)},{size:u}=await this.stat(t);await this.write(t,i,a).catch(l),!o&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(u,a)}).catch(l))}})}};function bi(e){return JSON.parse(Jk(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function xs(e){return _d(JSON.stringify(e))}function Ru(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(lt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function pw(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(lt.EINVAL,"Invalid time.")}}function hn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(lt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(lt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(lt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:nc(e)}function Gl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:Ru("mode"in e?e==null?void 0:e.mode:null,r)}}class mte{constructor(t,n,r,a){ha(this,"id");ha(this,"_size");ha(this,"options");ha(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,s)=>i.start-s.start),r.ranges=r.ranges.reduce((i,s)=>(!i.length||i.at(-1).end<s.start?i.push(s):i.at(-1).end=Math.max(i.at(-1).end,s.end),i),[]),r.data=Ag(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)){if(s.start>=n)break;r.push({start:Math.max(t,s.start),end:Math.min(n,s.end)})}}r.sort((i,s)=>i.start-s.start);const a=[];for(const i of r){const s=a.at(-1);s&&i.start<=s.end?s.end=Math.max(s.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Ag(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},s=this.regions.findIndex(o=>o.offset>n);return s==-1?this.regions.push(i):this.regions.splice(s,0,i),this.collect(),this}}var WS,ZS,YS;(WS=Promise.withResolvers)!==null&&WS!==void 0||(Promise.withResolvers=(ii("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(ZS=Symbol.dispose)!==null&&ZS!==void 0||(Symbol.dispose=(ii("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(YS=Symbol.asyncDispose)!==null&&YS!==void 0||(Symbol.asyncDispose=(ii("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class VP{constructor(t){this.store=t}}class gte extends VP{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class NC extends VP{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new mte(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const s=i.missing(n,r);for(const{start:l,end:u}of s)this.async(this.get(t,l,u));if(s.length)throw Mi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const o=i.regionAt(n);if(!o){ii("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class yte{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof NC))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof NC))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Or=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Dr=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class GP extends lT{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const s=NP(t,a);if(s.startsWith(".."))continue;let o=ur(n,s);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:a,newKey:o,ino:i})}for(const{oldKey:a,newKey:i,ino:s}of r){this._ids.delete(a),this._ids.set(i,s);const o=this._paths.get(s);if(!o){ii("Missing paths in table for ino "+s);continue}o.delete(a),o.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,rg(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!0),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),await r.set(s.ino,Za(s)),a.has(i)&&await r.set(s.data,xs(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!1),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),r.setSync(s.ino,Za(s)),a.has(i)&&r.setSync(s.data,xs(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new hw,a=Or(n,this.transaction(),!0),i=[["/",0]],s=mj(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new pa(await a.get(l));if(r.set(o,u),u.mode&ma){const d=bi((t=await a.get(u.data))!==null&&t!==void 0?t:br(Ue.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([ur(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new hw,a=Or(n,this.transaction(),!1),i=[["/",0]],s=mj(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new pa(a.getSync(l));if(r.set(o,u),u.mode&ma){const d=bi((t=a.getSync(u.data))!==null&&t!==void 0?t:br(Ue.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([ur(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async rename(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!0),l=Po(t),u=Po(n),d=await this.findInode(o,l.dir,"rename"),h=bi((r=await o.get(d.data))!==null&&r!==void 0?r:br(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Mi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const y=u.dir==l.dir,v=y?d:await this.findInode(o,u.dir,"rename"),b=y?h:bi((a=await o.get(v.data))!==null&&a!==void 0?a:br(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const x=new pa((i=await o.get(b[u.base]))!==null&&i!==void 0?i:br(Ue.With("ENOENT",n,"rename")));if(!x.toStats().isFile())throw Ue.With("EPERM",n,"rename");await o.remove(x.data),await o.remove(b[u.base])}b[u.base]=m,await o.set(d.data,xs(h)),await o.set(v.data,xs(b)),await o.commit(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}renameSync(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!1),l=Po(t),u=Po(n),d=this.findInodeSync(o,l.dir,"rename"),h=bi((r=o.getSync(d.data))!==null&&r!==void 0?r:br(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Mi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const y=u.dir===l.dir,v=y?d:this.findInodeSync(o,u.dir,"rename"),b=y?h:bi((a=o.getSync(v.data))!==null&&a!==void 0?a:br(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const x=new pa((i=o.getSync(b[u.base]))!==null&&i!==void 0?i:br(Ue.With("ENOENT",n,"rename")));if(!x.toStats().isFile())throw Ue.With("EPERM",n,"rename");o.removeSync(x.data),o.removeSync(b[u.base])}b[u.base]=m,o.setSync(d.data,xs(h)),o.setSync(v.data,xs(b)),o.commitSync(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Dr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Or(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Dr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Za(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Dr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Za(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Dr(r)}}async createFile(t,n){return n.mode|=to,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=to,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=ma,await this.commitNew(t,n,_d("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=ma,this.commitNewSync(t,n,_d("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(bi((n=await a.get(i.data))!==null&&n!==void 0?n:br(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Dr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Or(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(bi((n=a.getSync(i.data))!==null&&n!==void 0?n:br(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Dr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!0),s=await this.findInode(i,t,"sync");n&&await i.set(s.data,n),s.update(r)&&(this._add(s.ino,t),await i.set(s.ino,Za(s))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Dr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!1),s=this.findInodeSync(i,t,"sync");n&&i.setSync(s.data,n),s.update(r)&&(this._add(s.ino,t),i.setSync(s.ino,Za(s))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Dr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!0),s=ir(n),o=await this.findInode(i,s,"link"),l=bi((r=await i.get(o.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",s,"link"))),u=await this.findInode(i,t,"link");u.nlink++,l[Bh(n)]=u.ino,this._add(u.ino,n),await i.set(u.ino,Za(u)),await i.set(o.data,xs(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Dr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Or(a,this.transaction(),!1),s=ir(n),o=this.findInodeSync(i,s,"link"),l=bi((r=i.getSync(o.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",s,"link"))),u=this.findInodeSync(i,t,"link");u.nlink++,l[Bh(n)]=u.ino,this._add(u.ino,n),i.setSync(u.ino,Za(u)),i.setSync(o.data,xs(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Dr(a)}}async read(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const u=(i=await o.get(l.data,r,a))!==null&&i!==void 0?i:br(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Mi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}readSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Or(s,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const u=(i=o.getSync(l.data,r,a))!==null&&i!==void 0?i:br(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Mi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Or(i,this.transaction(),!0),o=await this.findInode(s,t,"write");let l=n;s.flag("partial")||(l=Ag((a=await s.get(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await s.set(o.data,l,r),this._add(o.ino,t),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Dr(i);s&&await s}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Or(i,this.transaction(),!1),o=this.findInodeSync(s,t,"write");let l=n;s.flag("partial")||(l=Ag((a=s.getSync(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),s.setSync(o.data,l,r),this._add(o.ino,t),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Dr(i)}}transaction(){return new yte(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Or(t,this.transaction(),!0);if(await n.get(Qi))return;const r=new pa({ino:Qi,data:1,mode:511|ma});await n.set(r.data,_d("{}")),this._add(Qi,"/"),await n.set(Qi,Za(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Dr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Or(t,this.transaction(),!1);if(n.getSync(Qi))return;const r=new pa({ino:Qi,data:1,mode:511|ma});n.setSync(r.data,_d("{}")),this._add(Qi,"/"),n.setSync(Qi,Za(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Dr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){ii("Attempted to populate tables after initialization");return}rg("Populating tables with existing store metadata");const n=Or(t,this.transaction(),!0),r=await n.get(Qi);if(!r){rT("Store does not have a root inode");const o=new pa({ino:Qi,data:1,mode:511|ma});await n.set(o.data,_d("{}")),this._add(Qi,"/"),await n.set(Qi,Za(o)),await n.commit();return}if(r.length<Hr(pa)){_x("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const s=[["/",Qi]];for(;s.length>0;){i++;const[o,l]=s.shift();this._add(l,o);const u=await n.get(l);if(!u){ii("Store is missing data for inode: "+l);continue}if(u.length<Hr(pa)){ii(`Invalid inode size for ino ${l}: ${u.length}`);continue}const d=new pa(u);if((d.mode&ma)!=ma||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){ii("Store is missing directory data: "+d.data);continue}const m=bi(h);for(const[y,v]of Object.entries(m))s.push([ur(o,y),v])}rg(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Dr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new pa((a=await t.get(i))!==null&&a!==void 0?a:br(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new pa((a=t.getSync(i))!==null&&a!==void 0?a:br(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>Ei)throw Mi(new Ue(lt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Or(s,this.transaction(),!0),{dir:l,base:u}=Po(t),d=await this.findInode(o,l,a),h=bi((i=await o.get(d.data))!==null&&i!==void 0?i:br(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),y=new pa({...n,ino:m,data:m+1,size:r.byteLength});return await o.set(y.ino,Za(y)),await o.set(y.data,r),h[u]=y.ino,await o.set(d.data,xs(h)),await o.commit(),y}catch(o){s.error=o,s.hasError=!0}finally{const o=Dr(s);o&&await o}}commitNewSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Or(s,this.transaction(),!1),{dir:l,base:u}=Po(t),d=this.findInodeSync(o,l,a),h=bi((i=o.getSync(d.data))!==null&&i!==void 0?i:br(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),y=new pa({...n,ino:m,data:m+1,size:r.byteLength});return o.setSync(y.ino,Za(y)),o.setSync(y.data,r),h[u]=y.ino,o.setSync(d.data,xs(h)),o.commitSync(),y}catch(o){s.error=o,s.hasError=!0}finally{Dr(s)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Or(i,this.transaction(),!0),{dir:l,base:u}=Po(t),d=await this.findInode(o,l,s),h=bi((r=await o.get(d.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",l,s)));if(!h[u])throw Ue.With("ENOENT",t,s);const m=h[u],y=new pa((a=await o.get(m))!==null&&a!==void 0?a:br(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&so(y))throw Ue.With("EISDIR",t,s);await o.set(d.data,xs(h)),y.nlink>1?(y.update({nlink:y.nlink-1}),await o.set(y.ino,Za(y))):(await o.remove(y.data),await o.remove(m),this._remove(m)),await o.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Dr(i);s&&await s}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Or(i,this.transaction(),!1),{dir:l,base:u}=Po(t),d=this.findInodeSync(o,l,s),h=bi((r=o.getSync(d.data))!==null&&r!==void 0?r:br(Ue.With("ENOENT",l,s))),m=h[u];if(!m)throw Ue.With("ENOENT",t,s);const y=new pa((a=o.getSync(m))!==null&&a!==void 0?a:br(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&so(y))throw Ue.With("EISDIR",t,s);o.setSync(d.data,xs(h)),y.nlink>1?(y.update({nlink:y.nlink-1}),o.setSync(y.ino,Za(y))):(o.removeSync(y.data),o.removeSync(m),this._remove(m)),o.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Dr(i)}}}class bte extends gte{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class vte extends Map{constructor(t=Ei,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new bte(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const wte={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new GP(new vte(e,t));return n.checkRootSync(),n}},xte=wte;let ka=!0;class _j extends Yk{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let s=this._buffer.indexOf(`
`);s>=0;s=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,s);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(s+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;_s(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;_s(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);ev(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);ev(this.output,0),_s(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,_s(this.output,-a.length,0),_s(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;_s(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(_s(this.output,-this._cursor,0),_s(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);ev(this.output,0),_s(this.output,0,0),this.output.write(this._prompt+r),this.line=r,_s(this.output,-r.length,0),_s(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(ev(this.output,0),_s(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return ii("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return ii("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function _te(e,t,n,r){return"input"in e?new _j(e.input,e.output,e.completer,e.terminal):new _j(e,t,n,r)}function ev(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function _s(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class mw{get position(){return this.flag&Bd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,s){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=s,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&kx||this.inode.flags&Pi.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&ri||this.flag&Vl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&ri||this.flag&Vl))throw new Ue(lt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Pi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!jg(this.inode)&&!Ig(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,this.fs.writeSync(this.internalPath,s,a),this._isSync&&this.sync(),s.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ri)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Pi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!jg(this.inode)&&!Ig(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>kr?-61441:kr)|t,(this._isSync||t>kr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,qP(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Pi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function gw(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:fo.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function fi(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:fo.descriptors).get(t);if(!a)throw new Ue(lt.EBADF);return a}function KP(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:fo.descriptors).delete(t)}const Ste=/[rwasx]{1,2}\+?/;function Kl(e){if(typeof e=="number")return e;if(!Ste.test(e))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);return Ete(e)}function Ete(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?jP:Sx;return e.includes("w")&&(t|=Cx),e.includes("a")&&(t|=Bd),e.includes("+")?t|=Vl:e.includes("r")||(t|=ri),e.includes("s")&&(t|=kx),e.includes("x")&&(t|=Ex),t}function WP(e){let t=0;return e&ri||(t|=Ca),(e&ri||e&Vl)&&(t|=na),t}const Og=new Map;cT("/",xte.create({label:"root"}));function cT(e,t){if(e[0]!="/"&&(e="/"+e),e=nc.call(this,e),Og.has(e))throw Mi(new Ue(lt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Og.set(e,t),RP(`Mounted ${t.name} on ${e}`),rg(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function ZP(e){if(e[0]!="/"&&(e="/"+e),e=nc.call(this,e),!Og.has(e)){ii(e+" is already unmounted");return}Og.delete(e),rT("Unmounted "+e)}function Bn(e,t){const n=(t==null?void 0:t.root)||fo.root;e=hn(ur(n,e));const r=[...Og].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(kte(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw Pee(new Ue(lt.EIO,"No file system",e))}function XS(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function mr(e,t){typeof e.stack=="string"&&(e.stack=XS(e.stack,t));try{e.message=XS(e.message,t)}catch{}return e.path&&(e.path=XS(e.path,t)),e}function YP(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Ei),files:(t?BigInt:Number)(n.totalNodes||Ei),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function Cte(e){var t,n,r,a,i,s,o;const l=this!==null&&this!==void 0?this:fo;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(lt.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const u=ur(l.root,e);for(const d of(o=(s=l.descriptors)===null||s===void 0?void 0:s.values())!==null&&o!==void 0?o:[]){if(!d.path.startsWith(l.root))throw Ue.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(u.length>l.root.length)throw new Ue(lt.EPERM,"Can not chroot() outside of current root");l.root=u}function kte(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class XP extends Yk{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class JP extends XP{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?ur(t.root,n):n,Ate(this.realpath,this)}close(){super.emit("close"),Nte(this.realpath,this)}[Symbol.dispose](){this.close()}}class Tte extends XP{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=xu(this.path);ote(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=xu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const ru=new Map;function Ate(e,t){const n=hn(e);ru.has(n)||ru.set(n,new Set),ru.get(n).add(t)}function Nte(e,t){const n=hn(e);ru.has(n)&&(ru.get(n).delete(t),ru.get(n).size===0&&ru.delete(n))}function Ya(e,t,n){var r;e&&(n=ur((r=e.root)!==null&&r!==void 0?r:"/",n)),n=hn(n);for(let a=n;a!="/";a=ir(a)){const i=ru.get(a);if(i)for(const s of i)s.emit("change",t,NP.call(s._context,a,n)||Bh(n))}}var k0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},T0=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function Rte(e,t){e=hn(e),t=hn(t);const n=Bn(e,this),r=Bn(t,this);if(!xu.call(this,ir(e)).hasAccess(na,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Ya(this,"rename",e.toString()),Ya(this,"change",t.toString());return}pT.call(this,t,hT(e)),fT.call(this,e),Ya(this,"rename",e.toString())}catch(a){throw mr(a,{[n.path]:e,[r.path]:t})}}function uT(e){e=hn(e);try{const{fs:t,path:n}=Bn(Iu.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==lt.ENOENT)return!1;throw t}}function xu(e,t){e=hn(e);const{fs:n,path:r}=Bn(Iu.call(this,e),this);try{const a=n.statSync(r);if(ka&&!pr(this,a,Ca))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new rf(a):new dc(a)}catch(a){throw mr(a,{[r]:e})}}function dT(e,t){e=hn(e);const{fs:n,path:r}=Bn(e,this);try{const a=n.statSync(r);if(ka&&!pr(this,a,Ca))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new rf(a):new dc(a)}catch(a){throw mr(a,{[r]:e})}}function Ite(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=k0(n,af.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(lt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{T0(n)}}function fT(e){e=hn(e);const{fs:t,path:n}=Bn(e,this);try{if(ka&&!pr(this,t.statSync(n),na))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}function af(e,t){var n;e=hn(e);const r=Ru(t.mode,420),a=Kl(t.flag);e=t.preserveSymlinks?e:Iu.call(this,e);const{fs:i,path:s}=Bn(e,this);let o;try{o=i.statSync(s)}catch{}if(!o){if(!(a&Sx))throw Ue.With("ENOENT",e,"_open");const u=i.statSync(ir(s));if(!pr(this,u,na))throw Ue.With("EACCES",ir(e),"_open");if(!so(u))throw Ue.With("ENOTDIR",ir(e),"_open");if(!t.allowDirectory&&r&ma)throw Ue.With("EISDIR",e,"_open");if(!pr(this,u,na))throw Ue.With("EACCES",ir(s),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:fo.credentials,m=i.createFileSync(s,{mode:r,uid:u.mode&E0?u.uid:d,gid:u.mode&C0?u.gid:h});return new mw(this,e,i,s,a,m)}if(!pr(this,o,r)||!pr(this,o,WP(a)))throw Ue.With("EACCES",e,"_open");if(a&Ex)throw Ue.With("EEXIST",e,"_open");const l=new mw(this,e,i,s,a,o);if(a&Cx&&l.truncate(0),!t.allowDirectory&&o.mode&ma)throw Ue.With("EISDIR",e,"_open");return l}function Tx(e,t,n=iT){return gw(af.call(this,e,{flag:t,mode:n}))}function Ax(e,t,n){return gw(af.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function QP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=k0(r,typeof e=="number"?fi(this,e):af.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),s=new Uint8Array(i);return a.read(s,0,i,0),s}catch(a){r.error=a,r.hasError=!0}finally{T0(r)}}function hT(e,t={}){const n=Gl(t,null,"r",420);if(Kl(n.flag)&ri)throw new Ue(lt.EINVAL,"Flag passed to readFile must allow for reading");const a=Fr.from(QP.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function pT(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Gl(n,"utf8","w+",420),i=Kl(a.flag);if(!(i&ri||i&Vl))throw new Ue(lt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!s)throw new Ue(lt.EINVAL,"Data not specified");k0(r,typeof e=="number"?fi(this,e):af.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength,0),Ya(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{T0(r)}}function jte(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Gl(n,"utf8","a+",420),i=Kl(a.flag);if(!(i&Bd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);k0(r,af.call(this,typeof e=="number"?fi(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{T0(r)}}function Ote(e,t){const n=fi(this,e).stat();return t!=null&&t.bigint?new rf(n):new dc(n)}function sf(e){fi(this,e).close(),KP(this,e)}function Dte(e,t=0){if(t||(t=0),t<0)throw new Ue(lt.EINVAL);fi(this,e).truncate(t)}function Mte(e){fi(this,e).sync()}function Pte(e){fi(this,e).datasync()}function Fte(e,t,n,r,a){let i,s,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";s=0,i=Fr.from(t,h),o=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n,o=r,l=typeof a=="number"?a:null;const u=fi(this,e);l??(l=u.position);const d=u.write(i,s,o,l);return Ya(this,"change",u.path),d}function Lte(e,t,n,r,a){const i=fi(this,e),s=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,s,r,a)}function mT(e,t,n){fi(this,e).chown(t,n)}function gT(e,t){const n=Ru(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode.");fi(this,e).chmod(n)}function yT(e,t,n){fi(this,e).utimes(pw(t),pw(n))}function e5(e){e=hn(e);const{fs:t,path:n}=Bn(Iu.call(this,e),this);try{const r=t.statSync(n);if(!so(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ka&&!pr(this,r,na))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}function bT(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:fo.credentials;t=typeof t=="object"?t:{mode:t};const s=Ru(t==null?void 0:t.mode,511);e=Iu.call(this,e);const{fs:o,path:l,root:u}=Bn(e,this),d={[l]:e},h=(m,y)=>{if(!pr(this,y,na))throw Ue.With("EACCES",ir(m),"mkdir");const v=o.mkdirSync(m,{mode:s,uid:y.mode&E0?y.uid:a,gid:y.mode&C0?y.gid:i});return Ya(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){h(l,o.statSync(ir(l)));return}const m=[];for(let v=l,b=e;!o.existsSync(v);v=ir(v),b=ir(b))m.unshift(v),d[v]=b;if(!m.length)return;const y=[o.statSync(ir(m[0]))];for(const[v,b]of m.entries())y.push(h(b,y[v]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw mr(m,d)}}function cp(e,t){t=typeof t=="object"?t:{encoding:t},e=hn(e);const{fs:n,path:r}=Bn(Iu.call(this,e),this);let a;try{const s=n.statSync(r);if(ka&&!pr(this,s,Ca))throw Ue.With("EACCES",r,"readdir");if(!so(s))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(s){throw mr(s,{[r]:e})}const i=[];for(const s of a){let o;try{o=n.statSync(ur(r,s))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new Dg(s,o)):(t==null?void 0:t.encoding)=="buffer"?i.push(Fr.from(s)):i.push(s),!(!so(o)||!(t!=null&&t.recursive)))for(const l of cp.call(this,ur(e,s),t))l instanceof Dg?(l.path=ur(s,l.path),i.push(l)):Fr.isBuffer(l)?i.push(Fr.from(ur(s,Jk(l)))):i.push(ur(s,l))}return i}function $te(e,t){if(e=hn(e),!xu(ir(e)).hasAccess(Ca,this))throw Ue.With("EACCES",ir(e),"link");if(t=hn(t),!xu(ir(t)).hasAccess(na,this))throw Ue.With("EACCES",ir(t),"link");const{fs:n,path:r}=Bn(e,this),a=Bn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ka&&!pr(this,n.statSync(r),Ca))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw mr(i,{[r]:e,[a.path]:t})}}function Bte(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid type: "+n);t=hn(t);const a=k0(r,af.call(this,t,{flag:"wx",mode:420}),!1);a.write(_d(hn(e,!0))),a.chmod(uc)}catch(a){r.error=a,r.hasError=!0}finally{T0(r)}}function RC(e,t){const n=Fr.from(QP.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function zte(e,t,n){const r=Tx.call(this,e,"r+");mT.call(this,r,t,n),sf.call(this,r)}function Ute(e,t,n){const r=Ax.call(this,e,"r+");mT.call(this,r,t,n),sf.call(this,r)}function Hte(e,t){const n=Tx.call(this,e,"r+");gT.call(this,n,t),sf.call(this,n)}function qte(e,t){const n=Ax.call(this,e,"r+");gT.call(this,n,t),sf.call(this,n)}function t5(e,t,n){const r=Tx.call(this,e,"r+");yT.call(this,r,t,n),sf.call(this,r)}function Vte(e,t,n){const r=Ax.call(this,e,"r+");yT.call(this,r,t,n),sf.call(this,r)}function IC(e,t,n){try{const l=Bn(t,e),u=l.fs.statSync(l.path);if(!zh(u))return{...l,fullPath:t,stats:u};const d=nc.call(e,ir(t),RC.call(e,t).toString());return IC(e,d)}catch{}const{base:r,dir:a}=Po(t),i=a=="/"?"/":Iu.call(e,a),s=ur(i,r),o=Bn(s,e);try{const l=o.fs.statSync(o.path);if(!zh(l))return{...o,fullPath:s,stats:l};const u=nc.call(e,i,RC.call(e,s).toString());return IC(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw mr(l,{[o.path]:s})}}function Iu(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=IC(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Fr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function Gte(e,t=384){if(!pr(this,xu.call(this,e),t))throw new Ue(lt.EACCES)}function n5(e,t){e=hn(e);let n;try{n=dT.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&kr){case ma:if(t!=null&&t.recursive)for(const r of cp.call(this,e))n5.call(this,ur(e,r),t);e5.call(this,e);break;case to:case uc:case ef:case tf:fT.call(this,e);break;case nf:case Qd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}function Kte(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return bT.call(this,a),n=="buffer"?Fr.from(a):a}function r5(e,t,n){if(e=hn(e),t=hn(t),n&&n&sT&&uT(t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");pT.call(this,t,hT(e)),Ya(this,"rename",t.toString())}function Wte(e,t,n){const r=fi(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function Zte(e,t,n){const r=fi(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function Yte(e,t){return e=hn(e),new vT(e,this)}function a5(e,t,n){e=hn(e),t=hn(t);const r=dT.call(this,e);if(n!=null&&n.errorOnExist&&uT.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&kr){case ma:if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");bT.call(this,t,{recursive:!0});for(const a of cp.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(ur(e,a.name),ur(t,a.name))||a5.call(this,ur(e,a.name),ur(t,a.name),n);break;case to:case uc:r5.call(this,e,t);break;case ef:case tf:case nf:case Qd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&t5.call(this,t,r.atime,r.mtime)}function Xte(e,t){e=hn(e);const{fs:n}=Bn(e,this);return YP(n,t==null?void 0:t.bigint)}function Jte(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),s=[];function o(l){const u=cp(l,{withFileTypes:r,encoding:"utf8"});for(const d of u){const h=r?d.path:l+"/"+d;a(r?d:h)||(xu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&o(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&s.push(r?d.path:h.replace(/^\/+/g,"")))}}return o(n),s}class Dg{get name(){return Bh(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return fte(this.stats)}isDirectory(){return so(this.stats)}isBlockDevice(){return Ig(this.stats)}isCharacterDevice(){return jg(this.stats)}isSymbolicLink(){return zh(this.stats)}isFIFO(){return pte(this.stats)}isSocket(){return hte(this.stats)}}class vT{checkClosed(){if(this.closed)throw new Ue(lt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await lf.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=cp.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var JS={exports:{}},QS={exports:{}},eE={},Sj;function ju(){return Sj||(Sj=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=m,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;a[45]=62,a[95]=63;function u(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function d(S){var E=u(S),C=E[0],k=E[1];return(C+k)*3/4-k}function h(S,E,C){return(E+C)*3/4-C}function m(S){var E,C=u(S),k=C[0],I=C[1],R=new i(h(S,k,I)),j=0,F=I>0?k-4:k,$;for($=0;$<F;$+=4)E=a[S.charCodeAt($)]<<18|a[S.charCodeAt($+1)]<<12|a[S.charCodeAt($+2)]<<6|a[S.charCodeAt($+3)],R[j++]=E>>16&255,R[j++]=E>>8&255,R[j++]=E&255;return I===2&&(E=a[S.charCodeAt($)]<<2|a[S.charCodeAt($+1)]>>4,R[j++]=E&255),I===1&&(E=a[S.charCodeAt($)]<<10|a[S.charCodeAt($+1)]<<4|a[S.charCodeAt($+2)]>>2,R[j++]=E>>8&255,R[j++]=E&255),R}function y(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var k,I=[],R=E;R<C;R+=3)k=(S[R]<<16&16711680)+(S[R+1]<<8&65280)+(S[R+2]&255),I.push(y(k));return I.join("")}function b(S){for(var E,C=S.length,k=C%3,I=[],R=16383,j=0,F=C-k;j<F;j+=R)I.push(v(S,j,j+R>F?F:j+R));return k===1?(E=S[C-1],I.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(S[C-2]<<8)+S[C-1],I.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),I.join("")}var x={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */x.read=function(S,E,C,k,I){var R,j,F=I*8-k-1,$=(1<<F)-1,G=$>>1,D=-7,Z=C?I-1:0,q=C?-1:1,ue=S[E+Z];for(Z+=q,R=ue&(1<<-D)-1,ue>>=-D,D+=F;D>0;R=R*256+S[E+Z],Z+=q,D-=8);for(j=R&(1<<-D)-1,R>>=-D,D+=k;D>0;j=j*256+S[E+Z],Z+=q,D-=8);if(R===0)R=1-G;else{if(R===$)return j?NaN:(ue?-1:1)*(1/0);j=j+Math.pow(2,k),R=R-G}return(ue?-1:1)*j*Math.pow(2,R-k)},x.write=function(S,E,C,k,I,R){var j,F,$,G=R*8-I-1,D=(1<<G)-1,Z=D>>1,q=I===23?Math.pow(2,-24)-Math.pow(2,-77):0,ue=k?0:R-1,ie=k?1:-1,ne=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(F=isNaN(E)?1:0,j=D):(j=Math.floor(Math.log(E)/Math.LN2),E*($=Math.pow(2,-j))<1&&(j--,$*=2),j+Z>=1?E+=q/$:E+=q*Math.pow(2,1-Z),E*$>=2&&(j++,$/=2),j+Z>=D?(F=0,j=D):j+Z>=1?(F=(E*$-1)*Math.pow(2,I),j=j+Z):(F=E*Math.pow(2,Z-1)*Math.pow(2,I),j=0));I>=8;S[C+ue]=F&255,ue+=ie,F/=256,I-=8);for(j=j<<I|F,G+=I;G>0;S[C+ue]=j&255,ue+=ie,j/=256,G-=8);S[C+ue-ie]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=x,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=D,S.SlowBuffer=te,S.INSPECT_MAX_BYTES=50;const I=2147483647;S.kMaxLength=I;const{Uint8Array:R,ArrayBuffer:j,SharedArrayBuffer:F}=globalThis;D.TYPED_ARRAY_SUPPORT=$(),!D.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function $(){try{const V=new R(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,R.prototype),Object.setPrototypeOf(V,H),V.foo()===42}catch{return!1}}Object.defineProperty(D.prototype,"parent",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.buffer}}),Object.defineProperty(D.prototype,"offset",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.byteOffset}});function G(V){if(V>I)throw new RangeError('The value "'+V+'" is invalid for option "size"');const H=new R(V);return Object.setPrototypeOf(H,D.prototype),H}function D(V,H,W){if(typeof V=="number"){if(typeof H=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ie(V)}return Z(V,H,W)}D.poolSize=8192;function Z(V,H,W){if(typeof V=="string")return ne(V,H);if(j.isView(V))return ae(V);if(V==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V);if(ge(V,j)||V&&ge(V.buffer,j)||typeof F<"u"&&(ge(V,F)||V&&ge(V.buffer,F)))return B(V,H,W);if(typeof V=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=V.valueOf&&V.valueOf();if(pe!=null&&pe!==V)return D.from(pe,H,W);const Re=J(V);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof V[Symbol.toPrimitive]=="function")return D.from(V[Symbol.toPrimitive]("string"),H,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof V)}D.from=function(V,H,W){return Z(V,H,W)},Object.setPrototypeOf(D.prototype,R.prototype),Object.setPrototypeOf(D,R);function q(V){if(typeof V!="number")throw new TypeError('"size" argument must be of type number');if(V<0)throw new RangeError('The value "'+V+'" is invalid for option "size"')}function ue(V,H,W){return q(V),V<=0?G(V):H!==void 0?typeof W=="string"?G(V).fill(H,W):G(V).fill(H):G(V)}D.alloc=function(V,H,W){return ue(V,H,W)};function ie(V){return q(V),G(V<0?0:ee(V)|0)}D.allocUnsafe=function(V){return ie(V)},D.allocUnsafeSlow=function(V){return ie(V)};function ne(V,H){if((typeof H!="string"||H==="")&&(H="utf8"),!D.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const W=fe(V,H)|0;let pe=G(W);const Re=pe.write(V,H);return Re!==W&&(pe=pe.slice(0,Re)),pe}function X(V){const H=V.length<0?0:ee(V.length)|0,W=G(H);for(let pe=0;pe<H;pe+=1)W[pe]=V[pe]&255;return W}function ae(V){if(ge(V,R)){const H=new R(V);return B(H.buffer,H.byteOffset,H.byteLength)}return X(V)}function B(V,H,W){if(H<0||V.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(V.byteLength<H+(W||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return H===void 0&&W===void 0?pe=new R(V):W===void 0?pe=new R(V,H):pe=new R(V,H,W),Object.setPrototypeOf(pe,D.prototype),pe}function J(V){if(D.isBuffer(V)){const H=ee(V.length)|0,W=G(H);return W.length===0||V.copy(W,0,0,H),W}if(V.length!==void 0)return typeof V.length!="number"||Oe(V.length)?G(0):X(V);if(V.type==="Buffer"&&Array.isArray(V.data))return X(V.data)}function ee(V){if(V>=I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");return V|0}function te(V){return+V!=V&&(V=0),D.alloc(+V)}D.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==D.prototype},D.compare=function(H,W){if(ge(H,R)&&(H=D.from(H,H.offset,H.byteLength)),ge(W,R)&&(W=D.from(W,W.offset,W.byteLength)),!D.isBuffer(H)||!D.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===W)return 0;let pe=H.length,Re=W.length;for(let He=0,pt=Math.min(pe,Re);He<pt;++He)if(H[He]!==W[He]){pe=H[He],Re=W[He];break}return pe<Re?-1:Re<pe?1:0},D.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},D.concat=function(H,W){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return D.alloc(0);let pe;if(W===void 0)for(W=0,pe=0;pe<H.length;++pe)W+=H[pe].length;const Re=D.allocUnsafe(W);let He=0;for(pe=0;pe<H.length;++pe){let pt=H[pe];if(ge(pt,R))He+pt.length>Re.length?(D.isBuffer(pt)||(pt=D.from(pt)),pt.copy(Re,He)):R.prototype.set.call(Re,pt,He);else if(D.isBuffer(pt))pt.copy(Re,He);else throw new TypeError('"list" argument must be an Array of Buffers');He+=pt.length}return Re};function fe(V,H){if(D.isBuffer(V))return V.length;if(j.isView(V)||ge(V,j))return V.byteLength;if(typeof V!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof V);const W=V.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&W===0)return 0;let Re=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ft(V).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return Be(V).length;default:if(Re)return pe?-1:ft(V).length;H=(""+H).toLowerCase(),Re=!0}}D.byteLength=fe;function ve(V,H,W){let pe=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,H>>>=0,W<=H))return"";for(V||(V="utf8");;)switch(V){case"hex":return xe(this,H,W);case"utf8":case"utf-8":return Se(this,H,W);case"ascii":return se(this,H,W);case"latin1":case"binary":return Q(this,H,W);case"base64":return z(this,H,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,H,W);default:if(pe)throw new TypeError("Unknown encoding: "+V);V=(V+"").toLowerCase(),pe=!0}}D.prototype._isBuffer=!0;function De(V,H,W){const pe=V[H];V[H]=V[W],V[W]=pe}D.prototype.swap16=function(){const H=this.length;if(H%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<H;W+=2)De(this,W,W+1);return this},D.prototype.swap32=function(){const H=this.length;if(H%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<H;W+=4)De(this,W,W+3),De(this,W+1,W+2);return this},D.prototype.swap64=function(){const H=this.length;if(H%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<H;W+=8)De(this,W,W+7),De(this,W+1,W+6),De(this,W+2,W+5),De(this,W+3,W+4);return this},D.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?Se(this,0,H):ve.apply(this,arguments)},D.prototype.toLocaleString=D.prototype.toString,D.prototype.equals=function(H){if(!D.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:D.compare(this,H)===0},D.prototype.inspect=function(){let H="";const W=S.INSPECT_MAX_BYTES;return H=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(H+=" ... "),"<Buffer "+H+">"},k&&(D.prototype[k]=D.prototype.inspect),D.prototype.compare=function(H,W,pe,Re,He){if(ge(H,R)&&(H=D.from(H,H.offset,H.byteLength)),!D.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(W===void 0&&(W=0),pe===void 0&&(pe=H?H.length:0),Re===void 0&&(Re=0),He===void 0&&(He=this.length),W<0||pe>H.length||Re<0||He>this.length)throw new RangeError("out of range index");if(Re>=He&&W>=pe)return 0;if(Re>=He)return-1;if(W>=pe)return 1;if(W>>>=0,pe>>>=0,Re>>>=0,He>>>=0,this===H)return 0;let pt=He-Re,Wt=pe-W;const ut=Math.min(pt,Wt),Rt=this.slice(Re,He),Lt=H.slice(W,pe);for(let Qt=0;Qt<ut;++Qt)if(Rt[Qt]!==Lt[Qt]){pt=Rt[Qt],Wt=Lt[Qt];break}return pt<Wt?-1:Wt<pt?1:0};function Ae(V,H,W,pe,Re){if(V.length===0)return-1;if(typeof W=="string"?(pe=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,Oe(W)&&(W=Re?0:V.length-1),W<0&&(W=V.length+W),W>=V.length){if(Re)return-1;W=V.length-1}else if(W<0)if(Re)W=0;else return-1;if(typeof H=="string"&&(H=D.from(H,pe)),D.isBuffer(H))return H.length===0?-1:Ne(V,H,W,pe,Re);if(typeof H=="number")return H=H&255,typeof R.prototype.indexOf=="function"?Re?R.prototype.indexOf.call(V,H,W):R.prototype.lastIndexOf.call(V,H,W):Ne(V,[H],W,pe,Re);throw new TypeError("val must be string, number or Buffer")}function Ne(V,H,W,pe,Re){let He=1,pt=V.length,Wt=H.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(V.length<2||H.length<2)return-1;He=2,pt/=2,Wt/=2,W/=2}function ut(Lt,Qt){return He===1?Lt[Qt]:Lt.readUInt16BE(Qt*He)}let Rt;if(Re){let Lt=-1;for(Rt=W;Rt<pt;Rt++)if(ut(V,Rt)===ut(H,Lt===-1?0:Rt-Lt)){if(Lt===-1&&(Lt=Rt),Rt-Lt+1===Wt)return Lt*He}else Lt!==-1&&(Rt-=Rt-Lt),Lt=-1}else for(W+Wt>pt&&(W=pt-Wt),Rt=W;Rt>=0;Rt--){let Lt=!0;for(let Qt=0;Qt<Wt;Qt++)if(ut(V,Rt+Qt)!==ut(H,Qt)){Lt=!1;break}if(Lt)return Rt}return-1}D.prototype.includes=function(H,W,pe){return this.indexOf(H,W,pe)!==-1},D.prototype.indexOf=function(H,W,pe){return Ae(this,H,W,pe,!0)},D.prototype.lastIndexOf=function(H,W,pe){return Ae(this,H,W,pe,!1)};function Ce(V,H,W,pe){W=Number(W)||0;const Re=V.length-W;pe?(pe=Number(pe),pe>Re&&(pe=Re)):pe=Re;const He=H.length;pe>He/2&&(pe=He/2);let pt;for(pt=0;pt<pe;++pt){const Wt=parseInt(H.substr(pt*2,2),16);if(Oe(Wt))return pt;V[W+pt]=Wt}return pt}function Pe(V,H,W,pe){return nt(ft(H,V.length-W),V,W,pe)}function Qe(V,H,W,pe){return nt(vt(H),V,W,pe)}function Le(V,H,W,pe){return nt(Be(H),V,W,pe)}function Ie(V,H,W,pe){return nt(P(H,V.length-W),V,W,pe)}D.prototype.write=function(H,W,pe,Re){if(W===void 0)Re="utf8",pe=this.length,W=0;else if(pe===void 0&&typeof W=="string")Re=W,pe=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(pe)?(pe=pe>>>0,Re===void 0&&(Re="utf8")):(Re=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const He=this.length-W;if((pe===void 0||pe>He)&&(pe=He),H.length>0&&(pe<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let pt=!1;for(;;)switch(Re){case"hex":return Ce(this,H,W,pe);case"utf8":case"utf-8":return Pe(this,H,W,pe);case"ascii":case"latin1":case"binary":return Qe(this,H,W,pe);case"base64":return Le(this,H,W,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,H,W,pe);default:if(pt)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),pt=!0}},D.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(V,H,W){return H===0&&W===V.length?E.fromByteArray(V):E.fromByteArray(V.slice(H,W))}function Se(V,H,W){W=Math.min(V.length,W);const pe=[];let Re=H;for(;Re<W;){const He=V[Re];let pt=null,Wt=He>239?4:He>223?3:He>191?2:1;if(Re+Wt<=W){let ut,Rt,Lt,Qt;switch(Wt){case 1:He<128&&(pt=He);break;case 2:ut=V[Re+1],(ut&192)===128&&(Qt=(He&31)<<6|ut&63,Qt>127&&(pt=Qt));break;case 3:ut=V[Re+1],Rt=V[Re+2],(ut&192)===128&&(Rt&192)===128&&(Qt=(He&15)<<12|(ut&63)<<6|Rt&63,Qt>2047&&(Qt<55296||Qt>57343)&&(pt=Qt));break;case 4:ut=V[Re+1],Rt=V[Re+2],Lt=V[Re+3],(ut&192)===128&&(Rt&192)===128&&(Lt&192)===128&&(Qt=(He&15)<<18|(ut&63)<<12|(Rt&63)<<6|Lt&63,Qt>65535&&Qt<1114112&&(pt=Qt))}}pt===null?(pt=65533,Wt=1):pt>65535&&(pt-=65536,pe.push(pt>>>10&1023|55296),pt=56320|pt&1023),pe.push(pt),Re+=Wt}return de(pe)}const Te=4096;function de(V){const H=V.length;if(H<=Te)return String.fromCharCode.apply(String,V);let W="",pe=0;for(;pe<H;)W+=String.fromCharCode.apply(String,V.slice(pe,pe+=Te));return W}function se(V,H,W){let pe="";W=Math.min(V.length,W);for(let Re=H;Re<W;++Re)pe+=String.fromCharCode(V[Re]&127);return pe}function Q(V,H,W){let pe="";W=Math.min(V.length,W);for(let Re=H;Re<W;++Re)pe+=String.fromCharCode(V[Re]);return pe}function xe(V,H,W){const pe=V.length;(!H||H<0)&&(H=0),(!W||W<0||W>pe)&&(W=pe);let Re="";for(let He=H;He<W;++He)Re+=Ke[V[He]];return Re}function Fe(V,H,W){const pe=V.slice(H,W);let Re="";for(let He=0;He<pe.length-1;He+=2)Re+=String.fromCharCode(pe[He]+pe[He+1]*256);return Re}D.prototype.slice=function(H,W){const pe=this.length;H=~~H,W=W===void 0?pe:~~W,H<0?(H+=pe,H<0&&(H=0)):H>pe&&(H=pe),W<0?(W+=pe,W<0&&(W=0)):W>pe&&(W=pe),W<H&&(W=H);const Re=this.subarray(H,W);return Object.setPrototypeOf(Re,D.prototype),Re};function Ee(V,H,W){if(V%1!==0||V<0)throw new RangeError("offset is not uint");if(V+H>W)throw new RangeError("Trying to access beyond buffer length")}D.prototype.readUintLE=D.prototype.readUIntLE=function(H,W,pe){H=H>>>0,W=W>>>0,pe||Ee(H,W,this.length);let Re=this[H],He=1,pt=0;for(;++pt<W&&(He*=256);)Re+=this[H+pt]*He;return Re},D.prototype.readUintBE=D.prototype.readUIntBE=function(H,W,pe){H=H>>>0,W=W>>>0,pe||Ee(H,W,this.length);let Re=this[H+--W],He=1;for(;W>0&&(He*=256);)Re+=this[H+--W]*He;return Re},D.prototype.readUint8=D.prototype.readUInt8=function(H,W){return H=H>>>0,W||Ee(H,1,this.length),this[H]},D.prototype.readUint16LE=D.prototype.readUInt16LE=function(H,W){return H=H>>>0,W||Ee(H,2,this.length),this[H]|this[H+1]<<8},D.prototype.readUint16BE=D.prototype.readUInt16BE=function(H,W){return H=H>>>0,W||Ee(H,2,this.length),this[H]<<8|this[H+1]},D.prototype.readUint32LE=D.prototype.readUInt32LE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+this[H+3]*16777216},D.prototype.readUint32BE=D.prototype.readUInt32BE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),this[H]*16777216+(this[H+1]<<16|this[H+2]<<8|this[H+3])},D.prototype.readBigUInt64LE=Ot(function(H){H=H>>>0,je(H,"offset");const W=this[H],pe=this[H+7];(W===void 0||pe===void 0)&&be(H,this.length-8);const Re=W+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24,He=this[++H]+this[++H]*2**8+this[++H]*2**16+pe*2**24;return BigInt(Re)+(BigInt(He)<<BigInt(32))}),D.prototype.readBigUInt64BE=Ot(function(H){H=H>>>0,je(H,"offset");const W=this[H],pe=this[H+7];(W===void 0||pe===void 0)&&be(H,this.length-8);const Re=W*2**24+this[++H]*2**16+this[++H]*2**8+this[++H],He=this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+pe;return(BigInt(Re)<<BigInt(32))+BigInt(He)}),D.prototype.readIntLE=function(H,W,pe){H=H>>>0,W=W>>>0,pe||Ee(H,W,this.length);let Re=this[H],He=1,pt=0;for(;++pt<W&&(He*=256);)Re+=this[H+pt]*He;return He*=128,Re>=He&&(Re-=Math.pow(2,8*W)),Re},D.prototype.readIntBE=function(H,W,pe){H=H>>>0,W=W>>>0,pe||Ee(H,W,this.length);let Re=W,He=1,pt=this[H+--Re];for(;Re>0&&(He*=256);)pt+=this[H+--Re]*He;return He*=128,pt>=He&&(pt-=Math.pow(2,8*W)),pt},D.prototype.readInt8=function(H,W){return H=H>>>0,W||Ee(H,1,this.length),this[H]&128?(255-this[H]+1)*-1:this[H]},D.prototype.readInt16LE=function(H,W){H=H>>>0,W||Ee(H,2,this.length);const pe=this[H]|this[H+1]<<8;return pe&32768?pe|4294901760:pe},D.prototype.readInt16BE=function(H,W){H=H>>>0,W||Ee(H,2,this.length);const pe=this[H+1]|this[H]<<8;return pe&32768?pe|4294901760:pe},D.prototype.readInt32LE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},D.prototype.readInt32BE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},D.prototype.readBigInt64LE=Ot(function(H){H=H>>>0,je(H,"offset");const W=this[H],pe=this[H+7];(W===void 0||pe===void 0)&&be(H,this.length-8);const Re=this[H+4]+this[H+5]*2**8+this[H+6]*2**16+(pe<<24);return(BigInt(Re)<<BigInt(32))+BigInt(W+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24)}),D.prototype.readBigInt64BE=Ot(function(H){H=H>>>0,je(H,"offset");const W=this[H],pe=this[H+7];(W===void 0||pe===void 0)&&be(H,this.length-8);const Re=(W<<24)+this[++H]*2**16+this[++H]*2**8+this[++H];return(BigInt(Re)<<BigInt(32))+BigInt(this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+pe)}),D.prototype.readFloatLE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),C.read(this,H,!0,23,4)},D.prototype.readFloatBE=function(H,W){return H=H>>>0,W||Ee(H,4,this.length),C.read(this,H,!1,23,4)},D.prototype.readDoubleLE=function(H,W){return H=H>>>0,W||Ee(H,8,this.length),C.read(this,H,!0,52,8)},D.prototype.readDoubleBE=function(H,W){return H=H>>>0,W||Ee(H,8,this.length),C.read(this,H,!1,52,8)};function Ge(V,H,W,pe,Re,He){if(!D.isBuffer(V))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Re||H<He)throw new RangeError('"value" argument is out of bounds');if(W+pe>V.length)throw new RangeError("Index out of range")}D.prototype.writeUintLE=D.prototype.writeUIntLE=function(H,W,pe,Re){if(H=+H,W=W>>>0,pe=pe>>>0,!Re){const Wt=Math.pow(2,8*pe)-1;Ge(this,H,W,pe,Wt,0)}let He=1,pt=0;for(this[W]=H&255;++pt<pe&&(He*=256);)this[W+pt]=H/He&255;return W+pe},D.prototype.writeUintBE=D.prototype.writeUIntBE=function(H,W,pe,Re){if(H=+H,W=W>>>0,pe=pe>>>0,!Re){const Wt=Math.pow(2,8*pe)-1;Ge(this,H,W,pe,Wt,0)}let He=pe-1,pt=1;for(this[W+He]=H&255;--He>=0&&(pt*=256);)this[W+He]=H/pt&255;return W+pe},D.prototype.writeUint8=D.prototype.writeUInt8=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,1,255,0),this[W]=H&255,W+1},D.prototype.writeUint16LE=D.prototype.writeUInt16LE=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,2,65535,0),this[W]=H&255,this[W+1]=H>>>8,W+2},D.prototype.writeUint16BE=D.prototype.writeUInt16BE=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,2,65535,0),this[W]=H>>>8,this[W+1]=H&255,W+2},D.prototype.writeUint32LE=D.prototype.writeUInt32LE=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,4,4294967295,0),this[W+3]=H>>>24,this[W+2]=H>>>16,this[W+1]=H>>>8,this[W]=H&255,W+4},D.prototype.writeUint32BE=D.prototype.writeUInt32BE=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,4,4294967295,0),this[W]=H>>>24,this[W+1]=H>>>16,this[W+2]=H>>>8,this[W+3]=H&255,W+4};function Nt(V,H,W,pe,Re){he(H,pe,Re,V,W,7);let He=Number(H&BigInt(4294967295));V[W++]=He,He=He>>8,V[W++]=He,He=He>>8,V[W++]=He,He=He>>8,V[W++]=He;let pt=Number(H>>BigInt(32)&BigInt(4294967295));return V[W++]=pt,pt=pt>>8,V[W++]=pt,pt=pt>>8,V[W++]=pt,pt=pt>>8,V[W++]=pt,W}function it(V,H,W,pe,Re){he(H,pe,Re,V,W,7);let He=Number(H&BigInt(4294967295));V[W+7]=He,He=He>>8,V[W+6]=He,He=He>>8,V[W+5]=He,He=He>>8,V[W+4]=He;let pt=Number(H>>BigInt(32)&BigInt(4294967295));return V[W+3]=pt,pt=pt>>8,V[W+2]=pt,pt=pt>>8,V[W+1]=pt,pt=pt>>8,V[W]=pt,W+8}D.prototype.writeBigUInt64LE=Ot(function(H,W=0){return Nt(this,H,W,BigInt(0),BigInt("0xffffffffffffffff"))}),D.prototype.writeBigUInt64BE=Ot(function(H,W=0){return it(this,H,W,BigInt(0),BigInt("0xffffffffffffffff"))}),D.prototype.writeIntLE=function(H,W,pe,Re){if(H=+H,W=W>>>0,!Re){const ut=Math.pow(2,8*pe-1);Ge(this,H,W,pe,ut-1,-ut)}let He=0,pt=1,Wt=0;for(this[W]=H&255;++He<pe&&(pt*=256);)H<0&&Wt===0&&this[W+He-1]!==0&&(Wt=1),this[W+He]=(H/pt>>0)-Wt&255;return W+pe},D.prototype.writeIntBE=function(H,W,pe,Re){if(H=+H,W=W>>>0,!Re){const ut=Math.pow(2,8*pe-1);Ge(this,H,W,pe,ut-1,-ut)}let He=pe-1,pt=1,Wt=0;for(this[W+He]=H&255;--He>=0&&(pt*=256);)H<0&&Wt===0&&this[W+He+1]!==0&&(Wt=1),this[W+He]=(H/pt>>0)-Wt&255;return W+pe},D.prototype.writeInt8=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,1,127,-128),H<0&&(H=255+H+1),this[W]=H&255,W+1},D.prototype.writeInt16LE=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,2,32767,-32768),this[W]=H&255,this[W+1]=H>>>8,W+2},D.prototype.writeInt16BE=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,2,32767,-32768),this[W]=H>>>8,this[W+1]=H&255,W+2},D.prototype.writeInt32LE=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,4,2147483647,-2147483648),this[W]=H&255,this[W+1]=H>>>8,this[W+2]=H>>>16,this[W+3]=H>>>24,W+4},D.prototype.writeInt32BE=function(H,W,pe){return H=+H,W=W>>>0,pe||Ge(this,H,W,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[W]=H>>>24,this[W+1]=H>>>16,this[W+2]=H>>>8,this[W+3]=H&255,W+4},D.prototype.writeBigInt64LE=Ot(function(H,W=0){return Nt(this,H,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),D.prototype.writeBigInt64BE=Ot(function(H,W=0){return it(this,H,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function St(V,H,W,pe,Re,He){if(W+pe>V.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function Ft(V,H,W,pe,Re){return H=+H,W=W>>>0,Re||St(V,H,W,4),C.write(V,H,W,pe,23,4),W+4}D.prototype.writeFloatLE=function(H,W,pe){return Ft(this,H,W,!0,pe)},D.prototype.writeFloatBE=function(H,W,pe){return Ft(this,H,W,!1,pe)};function Dt(V,H,W,pe,Re){return H=+H,W=W>>>0,Re||St(V,H,W,8),C.write(V,H,W,pe,52,8),W+8}D.prototype.writeDoubleLE=function(H,W,pe){return Dt(this,H,W,!0,pe)},D.prototype.writeDoubleBE=function(H,W,pe){return Dt(this,H,W,!1,pe)},D.prototype.copy=function(H,W,pe,Re){if(!D.isBuffer(H))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Re&&Re!==0&&(Re=this.length),W>=H.length&&(W=H.length),W||(W=0),Re>0&&Re<pe&&(Re=pe),Re===pe||H.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),H.length-W<Re-pe&&(Re=H.length-W+pe);const He=Re-pe;return this===H&&typeof R.prototype.copyWithin=="function"?this.copyWithin(W,pe,Re):R.prototype.set.call(H,this.subarray(pe,Re),W),He},D.prototype.fill=function(H,W,pe,Re){if(typeof H=="string"){if(typeof W=="string"?(Re=W,W=0,pe=this.length):typeof pe=="string"&&(Re=pe,pe=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!D.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(H.length===1){const pt=H.charCodeAt(0);(Re==="utf8"&&pt<128||Re==="latin1")&&(H=pt)}}else typeof H=="number"?H=H&255:typeof H=="boolean"&&(H=Number(H));if(W<0||this.length<W||this.length<pe)throw new RangeError("Out of range index");if(pe<=W)return this;W=W>>>0,pe=pe===void 0?this.length:pe>>>0,H||(H=0);let He;if(typeof H=="number")for(He=W;He<pe;++He)this[He]=H;else{const pt=D.isBuffer(H)?H:D.from(H,Re),Wt=pt.length;if(Wt===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(He=0;He<pe-W;++He)this[He+W]=pt[He%Wt]}return this};const Zt={};function ye(V,H,W){Zt[V]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${V}]`,this.stack,delete this.name}get code(){return V}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${V}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(V){return V?`${V} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(V,H){return`The "${V}" argument must be of type number. Received type ${typeof H}`},TypeError),ye("ERR_OUT_OF_RANGE",function(V,H,W){let pe=`The value of "${V}" is out of range.`,Re=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Re=O(String(W)):typeof W=="bigint"&&(Re=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Re=O(Re)),Re+="n"),pe+=` It must be ${H}. Received ${Re}`,pe},RangeError);function O(V){let H="",W=V.length;const pe=V[0]==="-"?1:0;for(;W>=pe+4;W-=3)H=`_${V.slice(W-3,W)}${H}`;return`${V.slice(0,W)}${H}`}function K(V,H,W){je(H,"offset"),(V[H]===void 0||V[H+W]===void 0)&&be(H,V.length-(W+1))}function he(V,H,W,pe,Re,He){if(V>W||V<H){const pt=typeof H=="bigint"?"n":"";let Wt;throw H===0||H===BigInt(0)?Wt=`>= 0${pt} and < 2${pt} ** ${(He+1)*8}${pt}`:Wt=`>= -(2${pt} ** ${(He+1)*8-1}${pt}) and < 2 ** ${(He+1)*8-1}${pt}`,new Zt.ERR_OUT_OF_RANGE("value",Wt,V)}K(pe,Re,He)}function je(V,H){if(typeof V!="number")throw new Zt.ERR_INVALID_ARG_TYPE(H,"number",V)}function be(V,H,W){throw Math.floor(V)!==V?(je(V,W),new Zt.ERR_OUT_OF_RANGE("offset","an integer",V)):H<0?new Zt.ERR_BUFFER_OUT_OF_BOUNDS:new Zt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${H}`,V)}const ke=/[^+/0-9A-Za-z-_]/g;function le(V){if(V=V.split("=")[0],V=V.trim().replace(ke,""),V.length<2)return"";for(;V.length%4!==0;)V=V+"=";return V}function ft(V,H){H=H||1/0;let W;const pe=V.length;let Re=null;const He=[];for(let pt=0;pt<pe;++pt){if(W=V.charCodeAt(pt),W>55295&&W<57344){if(!Re){if(W>56319){(H-=3)>-1&&He.push(239,191,189);continue}else if(pt+1===pe){(H-=3)>-1&&He.push(239,191,189);continue}Re=W;continue}if(W<56320){(H-=3)>-1&&He.push(239,191,189),Re=W;continue}W=(Re-55296<<10|W-56320)+65536}else Re&&(H-=3)>-1&&He.push(239,191,189);if(Re=null,W<128){if((H-=1)<0)break;He.push(W)}else if(W<2048){if((H-=2)<0)break;He.push(W>>6|192,W&63|128)}else if(W<65536){if((H-=3)<0)break;He.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((H-=4)<0)break;He.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return He}function vt(V){const H=[];for(let W=0;W<V.length;++W)H.push(V.charCodeAt(W)&255);return H}function P(V,H){let W,pe,Re;const He=[];for(let pt=0;pt<V.length&&!((H-=2)<0);++pt)W=V.charCodeAt(pt),pe=W>>8,Re=W%256,He.push(Re),He.push(pe);return He}function Be(V){return E.toByteArray(le(V))}function nt(V,H,W,pe){let Re;for(Re=0;Re<pe&&!(Re+W>=H.length||Re>=V.length);++Re)H[Re+W]=V[Re];return Re}function ge(V,H){return V instanceof H||V!=null&&V.constructor!=null&&V.constructor.name!=null&&V.constructor.name===H.name}function Oe(V){return V!==V}const Ke=function(){const V="0123456789abcdef",H=new Array(256);for(let W=0;W<16;++W){const pe=W*16;for(let Re=0;Re<16;++Re)H[pe+Re]=V[W]+V[Re]}return H}();function Ot(V){return typeof BigInt>"u"?me:V}function me(){throw new Error("BigInt not supported")}})(t);const w=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=w,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(eE)),eE}var tE,Ej;function Jr(){if(Ej)return tE;Ej=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return tE={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},tE}var nE={exports:{}},rE,Cj;function i5(){return Cj||(Cj=1,rE={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),rE}var aE,kj;function ki(){if(kj)return aE;kj=1;const{format:e,inspect:t}=i5(),{AggregateError:n}=Jr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function u(x,w){if(!x)throw new l.ERR_INTERNAL_ASSERTION(w)}function d(x){let w="",S=x.length;const E=x[0]==="-"?1:0;for(;S>=E+4;S-=3)w=`_${x.slice(S-3,S)}${w}`;return`${x.slice(0,S)}${w}`}function h(x,w,S){if(typeof w=="function")return u(w.length<=S.length,`Code: ${x}; The provided arguments length (${S.length}) does not match the required ones (${w.length}).`),w(...S);const E=(w.match(/%[dfijoOs]/g)||[]).length;return u(E===S.length,`Code: ${x}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?w:e(w,...S)}function m(x,w,S){S||(S=Error);class E extends S{constructor(...k){super(h(x,w,k))}toString(){return`${this.name} [${x}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${x}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=x,E.prototype[a]=!0,l[x]=E}function y(x){const w=o+x.name;return Object.defineProperty(x,"name",{value:w}),x}function v(x,w){if(x&&w&&x!==w){if(Array.isArray(w.errors))return w.errors.push(x),w;const S=new r([w,x],w.message);return S.code=w.code,S}return x||w}class b extends Error{constructor(w="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",S);super(w,S),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(x,w,S)=>{u(typeof x=="string","'name' must be a string"),Array.isArray(w)||(w=[w]);let E="The ";x.endsWith(" argument")?E+=`${x} `:E+=`"${x}" ${x.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],I=[];for(const j of w)u(typeof j=="string","All expected entries have to be of type string"),i.includes(j)?C.push(j.toLowerCase()):s.test(j)?k.push(j):(u(j!=="object",'The value "object" should be written as "Object"'),I.push(j));if(k.length>0){const j=C.indexOf("object");j!==-1&&(C.splice(C,j,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const j=C.pop();E+=`one of type ${C.join(", ")}, or ${j}`}}(k.length>0||I.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const j=k.pop();E+=`an instance of ${k.join(", ")}, or ${j}`}}I.length>0&&(E+=" or ")}switch(I.length){case 0:break;case 1:I[0].toLowerCase()!==I[0]&&(E+="an "),E+=`${I[0]}`;break;case 2:E+=`one of ${I[0]} or ${I[1]}`;break;default:{const j=I.pop();E+=`one of ${I.join(", ")}, or ${j}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var R;if((R=S.constructor)!==null&&R!==void 0&&R.name)E+=`. Received an instance of ${S.constructor.name}`;else{const j=t(S,{depth:-1});E+=`. Received ${j}`}}else{let j=t(S,{colors:!1});j.length>25&&(j=`${j.slice(0,25)}...`),E+=`. Received type ${typeof S} (${j})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(x,w,S="is invalid")=>{let E=t(w);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${x.includes(".")?"property":"argument"} '${x}' ${S}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(x,w,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${x} to be returned from the "${w}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(...x)=>{u(x.length>0,"At least one arg needs to be specified");let w;const S=x.length;switch(x=(Array.isArray(x)?x:[x]).map(E=>`"${E}"`).join(" or "),S){case 1:w+=`The ${x[0]} argument`;break;case 2:w+=`The ${x[0]} and ${x[1]} arguments`;break;default:{const E=x.pop();w+=`The ${x.join(", ")}, and ${E} arguments`}break}return`${w} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(x,w,S)=>{u(w,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=d(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=d(E)),E+="n"}else E=t(S);return`The value of "${x}" is out of range. It must be ${w}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),aE={AbortError:b,aggregateTwoErrors:y(v),hideStackFrames:y,codes:l},aE}var zm={exports:{}},Tj;function Mg(){if(Tj)return zm.exports;Tj=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return zm.exports=e,zm.exports.AbortSignal=t,zm.exports.default=e,zm.exports}var tv={exports:{}},Aj;function Nx(){if(Aj)return tv.exports;Aj=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,I,R){return Function.prototype.apply.call(k,I,R)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}tv.exports=i,tv.exports.once=w,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");s=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var I=[],R=1;R<arguments.length;R++)I.push(arguments[R]);var j=k==="error",F=this._events;if(F!==void 0)j=j&&F.error===void 0;else if(!j)return!1;if(j){var $;if(I.length>0&&($=I[0]),$ instanceof Error)throw $;var G=new Error("Unhandled error."+($?" ("+$.message+")":""));throw G.context=$,G}var D=F[k];if(D===void 0)return!1;if(typeof D=="function")t(D,this,I);else for(var Z=D.length,q=v(D,Z),R=0;R<Z;++R)t(q[R],this,I);return!0};function u(C,k,I,R){var j,F,$;if(o(I),F=C._events,F===void 0?(F=C._events=Object.create(null),C._eventsCount=0):(F.newListener!==void 0&&(C.emit("newListener",k,I.listener?I.listener:I),F=C._events),$=F[k]),$===void 0)$=F[k]=I,++C._eventsCount;else if(typeof $=="function"?$=F[k]=R?[I,$]:[$,I]:R?$.unshift(I):$.push(I),j=l(C),j>0&&$.length>j&&!$.warned){$.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=C,G.type=k,G.count=$.length,r(G)}return C}i.prototype.addListener=function(k,I){return u(this,k,I,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,I){return u(this,k,I,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,I){var R={fired:!1,wrapFn:void 0,target:C,type:k,listener:I},j=d.bind(R);return j.listener=I,R.wrapFn=j,j}i.prototype.once=function(k,I){return o(I),this.on(k,h(this,k,I)),this},i.prototype.prependOnceListener=function(k,I){return o(I),this.prependListener(k,h(this,k,I)),this},i.prototype.removeListener=function(k,I){var R,j,F,$,G;if(o(I),j=this._events,j===void 0)return this;if(R=j[k],R===void 0)return this;if(R===I||R.listener===I)--this._eventsCount===0?this._events=Object.create(null):(delete j[k],j.removeListener&&this.emit("removeListener",k,R.listener||I));else if(typeof R!="function"){for(F=-1,$=R.length-1;$>=0;$--)if(R[$]===I||R[$].listener===I){G=R[$].listener,F=$;break}if(F<0)return this;F===0?R.shift():b(R,F),R.length===1&&(j[k]=R[0]),j.removeListener!==void 0&&this.emit("removeListener",k,G||I)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var I,R,j;if(R=this._events,R===void 0)return this;if(R.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):R[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete R[k]),this;if(arguments.length===0){var F=Object.keys(R),$;for(j=0;j<F.length;++j)$=F[j],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(I=R[k],typeof I=="function")this.removeListener(k,I);else if(I!==void 0)for(j=I.length-1;j>=0;j--)this.removeListener(k,I[j]);return this};function m(C,k,I){var R=C._events;if(R===void 0)return[];var j=R[k];return j===void 0?[]:typeof j=="function"?I?[j.listener||j]:[j]:I?x(j):v(j,j.length)}i.prototype.listeners=function(k){return m(this,k,!0)},i.prototype.rawListeners=function(k){return m(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):y.call(C,k)},i.prototype.listenerCount=y;function y(C){var k=this._events;if(k!==void 0){var I=k[C];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,k){for(var I=new Array(k),R=0;R<k;++R)I[R]=C[R];return I}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function x(C){for(var k=new Array(C.length),I=0;I<k.length;++I)k[I]=C[I].listener||C[I];return k}function w(C,k){return new Promise(function(I,R){function j($){C.removeListener(k,F),R($)}function F(){typeof C.removeListener=="function"&&C.removeListener("error",j),I([].slice.call(arguments))}E(C,k,F,{once:!0}),k!=="error"&&S(C,j,{once:!0})})}function S(C,k,I){typeof C.on=="function"&&E(C,"error",k,I)}function E(C,k,I,R){if(typeof C.on=="function")R.once?C.once(k,I):C.on(k,I);else if(typeof C.addEventListener=="function")C.addEventListener(k,function j(F){R.once&&C.removeEventListener(k,j),I(F)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return tv.exports}var Nj;function $i(){return Nj||(Nj=1,function(e){const t=ju(),{format:n,inspect:r}=i5(),{codes:{ERR_INVALID_ARG_TYPE:a}}=ki(),{kResistStopPropagation:i,AggregateError:s,SymbolDispose:o}=Jr(),l=globalThis.AbortSignal||Mg().AbortSignal,u=globalThis.AbortController||Mg().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(x){return x instanceof h}:function(x){return!1},y=(b,x)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(x,"AbortSignal",b)},v=(b,x)=>{if(typeof b!="function")throw new a(x,"Function",b)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(b){let x=!1;return function(...w){x||(x=!0,b.apply(this,w))}},createDeferredPromise:function(){let b,x;return{promise:new Promise((S,E)=>{b=S,x=E}),resolve:b,reject:x}},promisify(b){return new Promise((x,w)=>{b((S,...E)=>S?w(S):x(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:m,deprecate(b,x){return b},addAbortListener:Nx().addAbortListener||function(x,w){if(x===void 0)throw new a("signal","AbortSignal",x);y(x,"signal"),v(w,"listener");let S;return x.aborted?queueMicrotask(()=>w()):(x.addEventListener("abort",w,{__proto__:null,once:!0,[i]:!0}),S=()=>{x.removeEventListener("abort",w)}),{__proto__:null,[o](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(x){if(x.length===1)return x[0];const w=new u,S=()=>w.abort();return x.forEach(E=>{y(E,"signals"),E.addEventListener("abort",S,{once:!0})}),w.signal.addEventListener("abort",()=>{x.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),w.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(nE)),nE.exports}var nv={},iE,Rj;function A0(){if(Rj)return iE;Rj=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:y}=Jr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:x,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=ki(),{normalizeEncoding:C}=$i(),{isAsyncFunction:k,isArrayBufferView:I}=$i().types,R={};function j(Q){return Q===(Q|0)}function F(Q){return Q===Q>>>0}const $=/^[0-7]+$/,G="must be a 32-bit unsigned integer or an octal string";function D(Q,xe,Fe){if(typeof Q>"u"&&(Q=Fe),typeof Q=="string"){if(d($,Q)===null)throw new w(xe,Q,G);Q=l(Q,8)}return ue(Q,xe),Q}const Z=v((Q,xe,Fe=o,Ee=s)=>{if(typeof Q!="number")throw new x(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);if(Q<Fe||Q>Ee)throw new S(xe,`>= ${Fe} && <= ${Ee}`,Q)}),q=v((Q,xe,Fe=-2147483648,Ee=2147483647)=>{if(typeof Q!="number")throw new x(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);if(Q<Fe||Q>Ee)throw new S(xe,`>= ${Fe} && <= ${Ee}`,Q)}),ue=v((Q,xe,Fe=!1)=>{if(typeof Q!="number")throw new x(xe,"number",Q);if(!a(Q))throw new S(xe,"an integer",Q);const Ee=Fe?1:0,Ge=4294967295;if(Q<Ee||Q>Ge)throw new S(xe,`>= ${Ee} && <= ${Ge}`,Q)});function ie(Q,xe){if(typeof Q!="string")throw new x(xe,"string",Q)}function ne(Q,xe,Fe=void 0,Ee){if(typeof Q!="number")throw new x(xe,"number",Q);if(Fe!=null&&Q<Fe||Ee!=null&&Q>Ee||(Fe!=null||Ee!=null)&&i(Q))throw new S(xe,`${Fe!=null?`>= ${Fe}`:""}${Fe!=null&&Ee!=null?" && ":""}${Ee!=null?`<= ${Ee}`:""}`,Q)}const X=v((Q,xe,Fe)=>{if(!t(Fe,Q)){const Ge="must be one of: "+n(r(Fe,Nt=>typeof Nt=="string"?`'${Nt}'`:h(Nt)),", ");throw new w(xe,Q,Ge)}});function ae(Q,xe){if(typeof Q!="boolean")throw new x(xe,"boolean",Q)}function B(Q,xe,Fe){return Q==null||!u(Q,xe)?Fe:Q[xe]}const J=v((Q,xe,Fe=null)=>{const Ee=B(Fe,"allowArray",!1),Ge=B(Fe,"allowFunction",!1);if(!B(Fe,"nullable",!1)&&Q===null||!Ee&&e(Q)||typeof Q!="object"&&(!Ge||typeof Q!="function"))throw new x(xe,"Object",Q)}),ee=v((Q,xe)=>{if(Q!=null&&typeof Q!="object"&&typeof Q!="function")throw new x(xe,"a dictionary",Q)}),te=v((Q,xe,Fe=0)=>{if(!e(Q))throw new x(xe,"Array",Q);if(Q.length<Fe){const Ee=`must be longer than ${Fe}`;throw new w(xe,Q,Ee)}});function fe(Q,xe){te(Q,xe);for(let Fe=0;Fe<Q.length;Fe++)ie(Q[Fe],`${xe}[${Fe}]`)}function ve(Q,xe){te(Q,xe);for(let Fe=0;Fe<Q.length;Fe++)ae(Q[Fe],`${xe}[${Fe}]`)}function De(Q,xe){te(Q,xe);for(let Fe=0;Fe<Q.length;Fe++){const Ee=Q[Fe],Ge=`${xe}[${Fe}]`;if(Ee==null)throw new x(Ge,"AbortSignal",Ee);Qe(Ee,Ge)}}function Ae(Q,xe="signal"){if(ie(Q,xe),R[Q]===void 0)throw R[m(Q)]!==void 0?new E(Q+" (signals must use all capital letters)"):new E(Q)}const Ne=v((Q,xe="buffer")=>{if(!I(Q))throw new x(xe,["Buffer","TypedArray","DataView"],Q)});function Ce(Q,xe){const Fe=C(xe),Ee=Q.length;if(Fe==="hex"&&Ee%2!==0)throw new w("encoding",xe,`is invalid for data of length ${Ee}`)}function Pe(Q,xe="Port",Fe=!0){if(typeof Q!="number"&&typeof Q!="string"||typeof Q=="string"&&y(Q).length===0||+Q!==+Q>>>0||Q>65535||Q===0&&!Fe)throw new b(xe,Q,Fe);return Q|0}const Qe=v((Q,xe)=>{if(Q!==void 0&&(Q===null||typeof Q!="object"||!("aborted"in Q)))throw new x(xe,"AbortSignal",Q)}),Le=v((Q,xe)=>{if(typeof Q!="function")throw new x(xe,"Function",Q)}),Ie=v((Q,xe)=>{if(typeof Q!="function"||k(Q))throw new x(xe,"Function",Q)}),z=v((Q,xe)=>{if(Q!==void 0)throw new x(xe,"undefined",Q)});function Se(Q,xe,Fe){if(!t(Fe,Q))throw new x(xe,`('${n(Fe,"|")}')`,Q)}const Te=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function de(Q,xe){if(typeof Q>"u"||!d(Te,Q))throw new w(xe,Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function se(Q){if(typeof Q=="string")return de(Q,"hints"),Q;if(e(Q)){const xe=Q.length;let Fe="";if(xe===0)return Fe;for(let Ee=0;Ee<xe;Ee++){const Ge=Q[Ee];de(Ge,"hints"),Fe+=Ge,Ee!==xe-1&&(Fe+=", ")}return Fe}throw new w("hints",Q,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return iE={isInt32:j,isUint32:F,parseFileMode:D,validateArray:te,validateStringArray:fe,validateBooleanArray:ve,validateAbortSignalArray:De,validateBoolean:ae,validateBuffer:Ne,validateDictionary:ee,validateEncoding:Ce,validateFunction:Le,validateInt32:q,validateInteger:Z,validateNumber:ne,validateObject:J,validateOneOf:X,validatePlainFunction:Ie,validatePort:Pe,validateSignalName:Ae,validateString:ie,validateUint32:ue,validateUndefined:z,validateUnion:Se,validateAbortSignal:Qe,validateLinkHeaderValue:se},iE}var rv={exports:{}},sE={},Ij;function of(){return Ij||(Ij=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=s}catch{a=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function l(C){if(a===setTimeout)return setTimeout(C,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function u(C){if(i===clearTimeout)return clearTimeout(C);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var d=[],h=!1,m,y=-1;function v(){!h||!m||(h=!1,m.length?d=m.concat(d):y=-1,d.length&&b())}function b(){if(!h){var C=l(v);h=!0;for(var k=d.length;k;){for(m=d,d=[];++y<k;)m&&m[y].run();y=-1,k=d.length}m=null,h=!1,u(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var I=1;I<arguments.length;I++)k[I-1]=arguments[I];d.push(new x(C,k)),d.length===1&&!h&&l(b)};function x(C,k){this.fun=C,this.array=k}x.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function w(){}r.on=w,r.addListener=w,r.once=w,r.off=w,r.removeListener=w,r.removeAllListeners=w,r.emit=w,r.prependListener=w,r.prependOnceListener=w,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(sE)),sE}var oE,jj;function fc(){if(jj)return oE;jj=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Jr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d(B,J=!1){var ee;return!!(B&&typeof B.pipe=="function"&&typeof B.on=="function"&&(!J||typeof B.pause=="function"&&typeof B.resume=="function")&&(!B._writableState||((ee=B._readableState)===null||ee===void 0?void 0:ee.readable)!==!1)&&(!B._writableState||B._readableState))}function h(B){var J;return!!(B&&typeof B.write=="function"&&typeof B.on=="function"&&(!B._readableState||((J=B._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function m(B){return!!(B&&typeof B.pipe=="function"&&B._readableState&&typeof B.on=="function"&&typeof B.write=="function")}function y(B){return B&&(B._readableState||B._writableState||typeof B.write=="function"&&typeof B.on=="function"||typeof B.pipe=="function"&&typeof B.on=="function")}function v(B){return!!(B&&!y(B)&&typeof B.pipeThrough=="function"&&typeof B.getReader=="function"&&typeof B.cancel=="function")}function b(B){return!!(B&&!y(B)&&typeof B.getWriter=="function"&&typeof B.abort=="function")}function x(B){return!!(B&&!y(B)&&typeof B.readable=="object"&&typeof B.writable=="object")}function w(B){return v(B)||b(B)||x(B)}function S(B,J){return B==null?!1:J===!0?typeof B[e]=="function":J===!1?typeof B[t]=="function":typeof B[e]=="function"||typeof B[t]=="function"}function E(B){if(!y(B))return null;const J=B._writableState,ee=B._readableState,te=J||ee;return!!(B.destroyed||B[r]||te!=null&&te.destroyed)}function C(B){if(!h(B))return null;if(B.writableEnded===!0)return!0;const J=B._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function k(B,J){if(!h(B))return null;if(B.writableFinished===!0)return!0;const ee=B._writableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.finished)!="boolean"?null:!!(ee.finished||J===!1&&ee.ended===!0&&ee.length===0)}function I(B){if(!d(B))return null;if(B.readableEnded===!0)return!0;const J=B._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function R(B,J){if(!d(B))return null;const ee=B._readableState;return ee!=null&&ee.errored?!1:typeof(ee==null?void 0:ee.endEmitted)!="boolean"?null:!!(ee.endEmitted||J===!1&&ee.ended===!0&&ee.length===0)}function j(B){return B&&B[i]!=null?B[i]:typeof(B==null?void 0:B.readable)!="boolean"?null:E(B)?!1:d(B)&&B.readable&&!R(B)}function F(B){return B&&B[s]!=null?B[s]:typeof(B==null?void 0:B.writable)!="boolean"?null:E(B)?!1:h(B)&&B.writable&&!C(B)}function $(B,J){return y(B)?E(B)?!0:!((J==null?void 0:J.readable)!==!1&&j(B)||(J==null?void 0:J.writable)!==!1&&F(B)):null}function G(B){var J,ee;return y(B)?B.writableErrored?B.writableErrored:(J=(ee=B._writableState)===null||ee===void 0?void 0:ee.errored)!==null&&J!==void 0?J:null:null}function D(B){var J,ee;return y(B)?B.readableErrored?B.readableErrored:(J=(ee=B._readableState)===null||ee===void 0?void 0:ee.errored)!==null&&J!==void 0?J:null:null}function Z(B){if(!y(B))return null;if(typeof B.closed=="boolean")return B.closed;const J=B._writableState,ee=B._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(ee==null?void 0:ee.closed)=="boolean"?(J==null?void 0:J.closed)||(ee==null?void 0:ee.closed):typeof B._closed=="boolean"&&q(B)?B._closed:null}function q(B){return typeof B._closed=="boolean"&&typeof B._defaultKeepAlive=="boolean"&&typeof B._removedConnection=="boolean"&&typeof B._removedContLen=="boolean"}function ue(B){return typeof B._sent100=="boolean"&&q(B)}function ie(B){var J;return typeof B._consuming=="boolean"&&typeof B._dumped=="boolean"&&((J=B.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function ne(B){if(!y(B))return null;const J=B._writableState,ee=B._readableState,te=J||ee;return!te&&ue(B)||!!(te&&te.autoDestroy&&te.emitClose&&te.closed===!1)}function X(B){var J;return!!(B&&((J=B[o])!==null&&J!==void 0?J:B.readableDidRead||B.readableAborted))}function ae(B){var J,ee,te,fe,ve,De,Ae,Ne,Ce,Pe;return!!(B&&((J=(ee=(te=(fe=(ve=(De=B[a])!==null&&De!==void 0?De:B.readableErrored)!==null&&ve!==void 0?ve:B.writableErrored)!==null&&fe!==void 0?fe:(Ae=B._readableState)===null||Ae===void 0?void 0:Ae.errorEmitted)!==null&&te!==void 0?te:(Ne=B._writableState)===null||Ne===void 0?void 0:Ne.errorEmitted)!==null&&ee!==void 0?ee:(Ce=B._readableState)===null||Ce===void 0?void 0:Ce.errored)!==null&&J!==void 0?J:!((Pe=B._writableState)===null||Pe===void 0)&&Pe.errored))}return oE={isDestroyed:E,kIsDestroyed:r,isDisturbed:X,kIsDisturbed:o,isErrored:ae,kIsErrored:a,isReadable:j,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:Z,isDuplexNodeStream:m,isFinished:$,isIterable:S,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:I,isReadableFinished:R,isReadableErrored:D,isNodeStream:y,isWebStream:w,isWritable:F,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:G,isServerRequest:ie,isServerResponse:ue,willEmitClose:ne,isTransformStream:x},oE}var Oj;function Ou(){if(Oj)return rv.exports;Oj=1;const e=of(),{AbortError:t,codes:n}=ki(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:s}=$i(),{validateAbortSignal:o,validateFunction:l,validateObject:u,validateBoolean:d}=A0(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:y}=Jr(),{isClosed:v,isReadable:b,isReadableNodeStream:x,isReadableStream:w,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:I,isWritableFinished:R,isWritableErrored:j,isNodeStream:F,willEmitClose:$,kIsClosedPromise:G}=fc();let D;function Z(X){return X.setHeader&&typeof X.abort=="function"}const q=()=>{};function ue(X,ae,B){var J,ee;if(arguments.length===2?(B=ae,ae=i):ae==null?ae=i:u(ae,"options"),l(B,"callback"),o(ae.signal,"options.signal"),B=s(B),w(X)||I(X))return ie(X,ae,B);if(!F(X))throw new r("stream",["ReadableStream","WritableStream","Stream"],X);const te=(J=ae.readable)!==null&&J!==void 0?J:x(X),fe=(ee=ae.writable)!==null&&ee!==void 0?ee:k(X),ve=X._writableState,De=X._readableState,Ae=()=>{X.writable||Pe()};let Ne=$(X)&&x(X)===te&&k(X)===fe,Ce=R(X,!1);const Pe=()=>{Ce=!0,X.destroyed&&(Ne=!1),!(Ne&&(!X.readable||te))&&(!te||Qe)&&B.call(X)};let Qe=S(X,!1);const Le=()=>{Qe=!0,X.destroyed&&(Ne=!1),!(Ne&&(!X.writable||fe))&&(!fe||Ce)&&B.call(X)},Ie=Q=>{B.call(X,Q)};let z=v(X);const Se=()=>{z=!0;const Q=j(X)||E(X);if(Q&&typeof Q!="boolean")return B.call(X,Q);if(te&&!Qe&&x(X,!0)&&!S(X,!1))return B.call(X,new a);if(fe&&!Ce&&!R(X,!1))return B.call(X,new a);B.call(X)},Te=()=>{z=!0;const Q=j(X)||E(X);if(Q&&typeof Q!="boolean")return B.call(X,Q);B.call(X)},de=()=>{X.req.on("finish",Pe)};Z(X)?(X.on("complete",Pe),Ne||X.on("abort",Se),X.req?de():X.on("request",de)):fe&&!ve&&(X.on("end",Ae),X.on("close",Ae)),!Ne&&typeof X.aborted=="boolean"&&X.on("aborted",Se),X.on("end",Le),X.on("finish",Pe),ae.error!==!1&&X.on("error",Ie),X.on("close",Se),z?e.nextTick(Se):ve!=null&&ve.errorEmitted||De!=null&&De.errorEmitted?Ne||e.nextTick(Te):(!te&&(!Ne||b(X))&&(Ce||C(X)===!1)||!fe&&(!Ne||C(X))&&(Qe||b(X)===!1)||De&&X.req&&X.aborted)&&e.nextTick(Te);const se=()=>{B=q,X.removeListener("aborted",Se),X.removeListener("complete",Pe),X.removeListener("abort",Se),X.removeListener("request",de),X.req&&X.req.removeListener("finish",Pe),X.removeListener("end",Ae),X.removeListener("close",Ae),X.removeListener("finish",Pe),X.removeListener("end",Le),X.removeListener("error",Ie),X.removeListener("close",Se)};if(ae.signal&&!z){const Q=()=>{const xe=B;se(),xe.call(X,new t(void 0,{cause:ae.signal.reason}))};if(ae.signal.aborted)e.nextTick(Q);else{D=D||$i().addAbortListener;const xe=D(ae.signal,Q),Fe=B;B=s((...Ee)=>{xe[y](),Fe.apply(X,Ee)})}}return se}function ie(X,ae,B){let J=!1,ee=q;if(ae.signal)if(ee=()=>{J=!0,B.call(X,new t(void 0,{cause:ae.signal.reason}))},ae.signal.aborted)e.nextTick(ee);else{D=D||$i().addAbortListener;const fe=D(ae.signal,ee),ve=B;B=s((...De)=>{fe[y](),ve.apply(X,De)})}const te=(...fe)=>{J||e.nextTick(()=>B.apply(X,fe))};return m(X[G].promise,te,te),q}function ne(X,ae){var B;let J=!1;return ae===null&&(ae=i),(B=ae)!==null&&B!==void 0&&B.cleanup&&(d(ae.cleanup,"cleanup"),J=ae.cleanup),new h((ee,te)=>{const fe=ue(X,ae,ve=>{J&&fe(),ve?te(ve):ee()})})}return rv.exports=ue,rv.exports.finished=ne,rv.exports}var lE,Dj;function up(){if(Dj)return lE;Dj=1;const e=of(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=ki(),{Symbol:a}=Jr(),{kIsDestroyed:i,isDestroyed:s,isFinished:o,isServerRequest:l}=fc(),u=a("kDestroy"),d=a("kConstruct");function h($,G,D){$&&($.stack,G&&!G.errored&&(G.errored=$),D&&!D.errored&&(D.errored=$))}function m($,G){const D=this._readableState,Z=this._writableState,q=Z||D;return Z!=null&&Z.destroyed||D!=null&&D.destroyed?(typeof G=="function"&&G(),this):(h($,Z,D),Z&&(Z.destroyed=!0),D&&(D.destroyed=!0),q.constructed?y(this,$,G):this.once(u,function(ue){y(this,t(ue,$),G)}),this)}function y($,G,D){let Z=!1;function q(ue){if(Z)return;Z=!0;const ie=$._readableState,ne=$._writableState;h(ue,ne,ie),ne&&(ne.closed=!0),ie&&(ie.closed=!0),typeof D=="function"&&D(ue),ue?e.nextTick(v,$,ue):e.nextTick(b,$)}try{$._destroy(G||null,q)}catch(ue){q(ue)}}function v($,G){x($,G),b($)}function b($){const G=$._readableState,D=$._writableState;D&&(D.closeEmitted=!0),G&&(G.closeEmitted=!0),(D!=null&&D.emitClose||G!=null&&G.emitClose)&&$.emit("close")}function x($,G){const D=$._readableState,Z=$._writableState;Z!=null&&Z.errorEmitted||D!=null&&D.errorEmitted||(Z&&(Z.errorEmitted=!0),D&&(D.errorEmitted=!0),$.emit("error",G))}function w(){const $=this._readableState,G=this._writableState;$&&($.constructed=!0,$.closed=!1,$.closeEmitted=!1,$.destroyed=!1,$.errored=null,$.errorEmitted=!1,$.reading=!1,$.ended=$.readable===!1,$.endEmitted=$.readable===!1),G&&(G.constructed=!0,G.destroyed=!1,G.closed=!1,G.closeEmitted=!1,G.errored=null,G.errorEmitted=!1,G.finalCalled=!1,G.prefinished=!1,G.ended=G.writable===!1,G.ending=G.writable===!1,G.finished=G.writable===!1)}function S($,G,D){const Z=$._readableState,q=$._writableState;if(q!=null&&q.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||q!=null&&q.autoDestroy?$.destroy(G):G&&(G.stack,q&&!q.errored&&(q.errored=G),Z&&!Z.errored&&(Z.errored=G),D?e.nextTick(x,$,G):x($,G))}function E($,G){if(typeof $._construct!="function")return;const D=$._readableState,Z=$._writableState;D&&(D.constructed=!1),Z&&(Z.constructed=!1),$.once(d,G),!($.listenerCount(d)>1)&&e.nextTick(C,$)}function C($){let G=!1;function D(Z){if(G){S($,Z??new n);return}G=!0;const q=$._readableState,ue=$._writableState,ie=ue||q;q&&(q.constructed=!0),ue&&(ue.constructed=!0),ie.destroyed?$.emit(u,Z):Z?S($,Z,!0):e.nextTick(k,$)}try{$._construct(Z=>{e.nextTick(D,Z)})}catch(Z){e.nextTick(D,Z)}}function k($){$.emit(d)}function I($){return($==null?void 0:$.setHeader)&&typeof $.abort=="function"}function R($){$.emit("close")}function j($,G){$.emit("error",G),e.nextTick(R,$)}function F($,G){!$||s($)||(!G&&!o($)&&(G=new r),l($)?($.socket=null,$.destroy(G)):I($)?$.abort():I($.req)?$.req.abort():typeof $.destroy=="function"?$.destroy(G):typeof $.close=="function"?$.close():G?e.nextTick(j,$,G):e.nextTick(R,$),$.destroyed||($[i]=!0))}return lE={construct:E,destroyer:F,destroy:m,undestroy:w,errorOrDestroy:S},lE}var cE,Mj;function wT(){if(Mj)return cE;Mj=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Jr(),{EventEmitter:n}=Nx();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,s){const o=this;function l(b){i.writable&&i.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function u(){o.readable&&o.resume&&o.resume()}i.on("drain",u),!i._isStdio&&(!s||s.end!==!1)&&(o.on("end",h),o.on("close",m));let d=!1;function h(){d||(d=!0,i.end())}function m(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function y(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(o,"error",y),a(i,"error",y);function v(){o.removeListener("data",l),i.removeListener("drain",u),o.removeListener("end",h),o.removeListener("close",m),o.removeListener("error",y),i.removeListener("error",y),o.removeListener("end",v),o.removeListener("close",v),i.removeListener("close",v)}return o.on("end",v),o.on("close",v),i.on("close",v),i.emit("pipe",o),i};function a(i,s,o){if(typeof i.prependListener=="function")return i.prependListener(s,o);!i._events||!i._events[s]?i.on(s,o):e(i._events[s])?i._events[s].unshift(o):i._events[s]=[o,i._events[s]]}return cE={Stream:r,prependListener:a},cE}var uE={exports:{}},Pj;function Rx(){return Pj||(Pj=1,function(e){const{SymbolDispose:t}=Jr(),{AbortError:n,codes:r}=ki(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:s}=fc(),o=Ou(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new l(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,y){if(d(m,"signal"),!a(y)&&!i(y))throw new l("stream",["ReadableStream","WritableStream","Stream"],y);return e.exports.addAbortSignalNoValidate(m,y)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const y=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[s](new n(void 0,{cause:h.reason}))};if(h.aborted)y();else{u=u||$i().addAbortListener;const v=u(h,y);o(m,v[t])}return m}}(uE)),uE.exports}var dE,Fj;function Qte(){if(Fj)return dE;Fj=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Jr(),{Buffer:a}=ju(),{inspect:i}=$i();return dE=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=o+l.data;return u}concat(o){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(o>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(o,l){const u=this.head.data;if(o<u.length){const d=u.slice(0,o);return this.head.data=u.slice(o),d}return o===u.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",u=this.head,d=0;do{const h=u.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(h,0,o),this.head=u,u.data=e(h,o));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(o){const l=a.allocUnsafe(o),u=o;let d=this.head,h=0;do{const m=d.data;if(o>m.length)n(l,m,u-o),o-=m.length;else{o===m.length?(n(l,m,u-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(m.buffer,m.byteOffset,o),u-o),this.head=d,d.data=m.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return i(this,{...l,depth:0,customInspect:!1})}},dE}var fE,Lj;function Ix(){if(Lj)return fE;Lj=1;const{MathFloor:e,NumberIsInteger:t}=Jr(),{validateInteger:n}=A0(),{ERR_INVALID_ARG_VALUE:r}=ki().codes;let a=16*1024,i=16;function s(d,h,m){return d.highWaterMark!=null?d.highWaterMark:h?d[m]:null}function o(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function u(d,h,m,y){const v=s(h,y,m);if(v!=null){if(!t(v)||v<0){const b=y?`options.${m}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return o(d.objectMode)}return fE={getHighWaterMark:u,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},fE}var hE={},av={exports:{}},$j;function xT(){return $j||($j=1,function(e,t){var n=ju(),r=n.Buffer;function a(s,o){for(var l in s)o[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(s,o,l){return r(s,o,l)}a(r,i),i.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,o,l)},i.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return o!==void 0?typeof l=="string"?u.fill(o,l):u.fill(o):u.fill(0),u},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(av,av.exports)),av.exports}var Bj;function ene(){if(Bj)return hE;Bj=1;var e=xT().Buffer,t=e.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(w){if(!w)return"utf8";for(var S;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(S)return;w=(""+w).toLowerCase(),S=!0}}function r(w){var S=n(w);if(typeof S!="string"&&(e.isEncoding===t||!t(w)))throw new Error("Unknown encoding: "+w);return S||w}hE.StringDecoder=a;function a(w){this.encoding=r(w);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=m,S=4;break;case"utf8":this.fillLast=l,S=4;break;case"base64":this.text=y,this.end=v,S=3;break;default:this.write=b,this.end=x;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(w){if(w.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(w),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<w.length?S?S+this.text(w,E):this.text(w,E):S||""},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function i(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function s(w,S,E){var C=S.length-1;if(C<E)return 0;var k=i(S[C]);return k>=0?(k>0&&(w.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(w.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(k===2?k=0:w.lastNeed=k-3),k):0))}function o(w,S,E){if((S[0]&192)!==128)return w.lastNeed=0,"";if(w.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return w.lastNeed=1,"";if(w.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return w.lastNeed=2,""}}function l(w){var S=this.lastTotal-this.lastNeed,E=o(this,w);if(E!==void 0)return E;if(this.lastNeed<=w.length)return w.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,S,0,w.length),this.lastNeed-=w.length}function u(w,S){var E=s(this,w,S);if(!this.lastNeed)return w.toString("utf8",S);this.lastTotal=E;var C=w.length-(E-this.lastNeed);return w.copy(this.lastChar,0,C),w.toString("utf8",S,C)}function d(w){var S=w&&w.length?this.write(w):"";return this.lastNeed?S+"":S}function h(w,S){if((w.length-S)%2===0){var E=w.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",S,w.length-1)}function m(w){var S=w&&w.length?this.write(w):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function y(w,S){var E=(w.length-S)%3;return E===0?w.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",S,w.length-E))}function v(w){var S=w&&w.length?this.write(w):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(w){return w.toString(this.encoding)}function x(w){return w&&w.length?this.write(w):""}return hE}var pE,zj;function s5(){if(zj)return pE;zj=1;const e=of(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Jr(),{Buffer:a}=ju(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:s}=ki().codes;function o(l,u,d){let h;if(typeof u=="string"||u instanceof a)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let m;if(u&&u[n])m=!0,h=u[n]();else if(u&&u[r])m=!1,h=u[r]();else throw new i("iterable",["Iterable"],u);const y=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;y._read=function(){v||(v=!0,x())},y._destroy=function(w,S){t(b(w),()=>e.nextTick(S,w),E=>e.nextTick(S,E||w))};async function b(w){const S=w!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:k}=await h.throw(w);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function x(){for(;;){try{const{value:w,done:S}=m?await h.next():h.next();if(S)y.push(null);else{const E=w&&typeof w.then=="function"?await w:w;if(E===null)throw v=!1,new s;if(y.push(E))continue;v=!1}}catch(w){y.destroy(w)}break}}return y}return pE=o,pE}var mE,Uj;function jx(){if(Uj)return mE;Uj=1;const e=of(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:m}=Jr();mE=Ee,Ee.ReadableState=Fe;const{EventEmitter:y}=Nx(),{Stream:v,prependListener:b}=wT(),{Buffer:x}=ju(),{addAbortSignal:w}=Rx(),S=Ou();let E=$i().debuglog("stream",me=>{E=me});const C=Qte(),k=up(),{getHighWaterMark:I,getDefaultHighWaterMark:R}=Ix(),{aggregateTwoErrors:j,codes:{ERR_INVALID_ARG_TYPE:F,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_OUT_OF_RANGE:G,ERR_STREAM_PUSH_AFTER_EOF:D,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:q}=ki(),{validateObject:ue}=A0(),ie=m("kPaused"),{StringDecoder:ne}=ene(),X=s5();o(Ee.prototype,v.prototype),o(Ee,v);const ae=()=>{},{errorOrDestroy:B}=k,J=1,ee=2,te=4,fe=8,ve=16,De=32,Ae=64,Ne=128,Ce=256,Pe=512,Qe=1024,Le=2048,Ie=4096,z=8192,Se=16384,Te=32768,de=65536,se=1<<17,Q=1<<18;function xe(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(V){V?this.state|=me:this.state&=~me}}}i(Fe.prototype,{objectMode:xe(J),ended:xe(ee),endEmitted:xe(te),reading:xe(fe),constructed:xe(ve),sync:xe(De),needReadable:xe(Ae),emittedReadable:xe(Ne),readableListening:xe(Ce),resumeScheduled:xe(Pe),errorEmitted:xe(Qe),emitClose:xe(Le),autoDestroy:xe(Ie),destroyed:xe(z),closed:xe(Se),closeEmitted:xe(Te),multiAwaitDrain:xe(de),readingMore:xe(se),dataEmitted:xe(Q)});function Fe(me,V,H){typeof H!="boolean"&&(H=V instanceof rc()),this.state=Le|Ie|ve|De,me&&me.objectMode&&(this.state|=J),H&&me&&me.readableObjectMode&&(this.state|=J),this.highWaterMark=me?I(this,me,"readableHighWaterMark",H):R(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ie]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new ne(me.encoding),this.encoding=me.encoding)}function Ee(me){if(!(this instanceof Ee))return new Ee(me);const V=this instanceof rc();this._readableState=new Fe(me,this,V),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!V&&w(me.signal,this)),v.call(this,me),k.construct(this,()=>{this._readableState.needReadable&&O(this,this._readableState)})}Ee.prototype.destroy=k.destroy,Ee.prototype._undestroy=k.undestroy,Ee.prototype._destroy=function(me,V){V(me)},Ee.prototype[y.captureRejectionSymbol]=function(me){this.destroy(me)},Ee.prototype[d]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new q,this.destroy(me)),new l((V,H)=>S(this,W=>W&&W!==me?H(W):V(null)))},Ee.prototype.push=function(me,V){return Ge(this,me,V,!1)},Ee.prototype.unshift=function(me,V){return Ge(this,me,V,!0)};function Ge(me,V,H,W){E("readableAddChunk",V);const pe=me._readableState;let Re;if((pe.state&J)===0&&(typeof V=="string"?(H=H||pe.defaultEncoding,pe.encoding!==H&&(W&&pe.encoding?V=x.from(V,H).toString(pe.encoding):(V=x.from(V,H),H=""))):V instanceof x?H="":v._isUint8Array(V)?(V=v._uint8ArrayToBuffer(V),H=""):V!=null&&(Re=new F("chunk",["string","Buffer","Uint8Array"],V))),Re)B(me,Re);else if(V===null)pe.state&=-9,Dt(me,pe);else if((pe.state&J)!==0||V&&V.length>0)if(W)if((pe.state&te)!==0)B(me,new Z);else{if(pe.destroyed||pe.errored)return!1;Nt(me,pe,V,!0)}else if(pe.ended)B(me,new D);else{if(pe.destroyed||pe.errored)return!1;pe.state&=-9,pe.decoder&&!H?(V=pe.decoder.write(V),pe.objectMode||V.length!==0?Nt(me,pe,V,!1):O(me,pe)):Nt(me,pe,V,!1)}else W||(pe.state&=-9,O(me,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function Nt(me,V,H,W){V.flowing&&V.length===0&&!V.sync&&me.listenerCount("data")>0?((V.state&de)!==0?V.awaitDrainWriters.clear():V.awaitDrainWriters=null,V.dataEmitted=!0,me.emit("data",H)):(V.length+=V.objectMode?1:H.length,W?V.buffer.unshift(H):V.buffer.push(H),(V.state&Ae)!==0&&Zt(me)),O(me,V)}Ee.prototype.isPaused=function(){const me=this._readableState;return me[ie]===!0||me.flowing===!1},Ee.prototype.setEncoding=function(me){const V=new ne(me);this._readableState.decoder=V,this._readableState.encoding=this._readableState.decoder.encoding;const H=this._readableState.buffer;let W="";for(const pe of H)W+=V.write(pe);return H.clear(),W!==""&&H.push(W),this._readableState.length=W.length,this};const it=1073741824;function St(me){if(me>it)throw new G("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function Ft(me,V){return me<=0||V.length===0&&V.ended?0:(V.state&J)!==0?1:r(me)?V.flowing&&V.length?V.buffer.first().length:V.length:me<=V.length?me:V.ended?V.length:0}Ee.prototype.read=function(me){E("read",me),me===void 0?me=NaN:n(me)||(me=a(me,10));const V=this._readableState,H=me;if(me>V.highWaterMark&&(V.highWaterMark=St(me)),me!==0&&(V.state&=-129),me===0&&V.needReadable&&((V.highWaterMark!==0?V.length>=V.highWaterMark:V.length>0)||V.ended))return E("read: emitReadable",V.length,V.ended),V.length===0&&V.ended?nt(this):Zt(this),null;if(me=Ft(me,V),me===0&&V.ended)return V.length===0&&nt(this),null;let W=(V.state&Ae)!==0;if(E("need readable",W),(V.length===0||V.length-me<V.highWaterMark)&&(W=!0,E("length less than watermark",W)),V.ended||V.reading||V.destroyed||V.errored||!V.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),V.state|=fe|De,V.length===0&&(V.state|=Ae);try{this._read(V.highWaterMark)}catch(Re){B(this,Re)}V.state&=-33,V.reading||(me=Ft(H,V))}let pe;return me>0?pe=Be(me,V):pe=null,pe===null?(V.needReadable=V.length<=V.highWaterMark,me=0):(V.length-=me,V.multiAwaitDrain?V.awaitDrainWriters.clear():V.awaitDrainWriters=null),V.length===0&&(V.ended||(V.needReadable=!0),H!==me&&V.ended&&nt(this)),pe!==null&&!V.errorEmitted&&!V.closeEmitted&&(V.dataEmitted=!0,this.emit("data",pe)),pe};function Dt(me,V){if(E("onEofChunk"),!V.ended){if(V.decoder){const H=V.decoder.end();H&&H.length&&(V.buffer.push(H),V.length+=V.objectMode?1:H.length)}V.ended=!0,V.sync?Zt(me):(V.needReadable=!1,V.emittedReadable=!0,ye(me))}}function Zt(me){const V=me._readableState;E("emitReadable",V.needReadable,V.emittedReadable),V.needReadable=!1,V.emittedReadable||(E("emitReadable",V.flowing),V.emittedReadable=!0,e.nextTick(ye,me))}function ye(me){const V=me._readableState;E("emitReadable_",V.destroyed,V.length,V.ended),!V.destroyed&&!V.errored&&(V.length||V.ended)&&(me.emit("readable"),V.emittedReadable=!1),V.needReadable=!V.flowing&&!V.ended&&V.length<=V.highWaterMark,ft(me)}function O(me,V){!V.readingMore&&V.constructed&&(V.readingMore=!0,e.nextTick(K,me,V))}function K(me,V){for(;!V.reading&&!V.ended&&(V.length<V.highWaterMark||V.flowing&&V.length===0);){const H=V.length;if(E("maybeReadMore read 0"),me.read(0),H===V.length)break}V.readingMore=!1}Ee.prototype._read=function(me){throw new $("_read()")},Ee.prototype.pipe=function(me,V){const H=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new u(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(me),E("pipe count=%d opts=%j",W.pipes.length,V);const Re=(!V||V.end!==!1)&&me!==e.stdout&&me!==e.stderr?pt:_r;W.endEmitted?e.nextTick(Re):H.once("end",Re),me.on("unpipe",He);function He(Fn,hi){E("onunpipe"),Fn===H&&hi&&hi.hasUnpiped===!1&&(hi.hasUnpiped=!0,Rt())}function pt(){E("onend"),me.end()}let Wt,ut=!1;function Rt(){E("cleanup"),me.removeListener("close",Kn),me.removeListener("finish",xr),Wt&&me.removeListener("drain",Wt),me.removeListener("error",An),me.removeListener("unpipe",He),H.removeListener("end",pt),H.removeListener("end",_r),H.removeListener("data",Qt),ut=!0,Wt&&W.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Wt()}function Lt(){ut||(W.pipes.length===1&&W.pipes[0]===me?(E("false write response, pause",0),W.awaitDrainWriters=me,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(me)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(me)),H.pause()),Wt||(Wt=he(H,me),me.on("drain",Wt))}H.on("data",Qt);function Qt(Fn){E("ondata");const hi=me.write(Fn);E("dest.write",hi),hi===!1&&Lt()}function An(Fn){if(E("onerror",Fn),_r(),me.removeListener("error",An),me.listenerCount("error")===0){const hi=me._writableState||me._readableState;hi&&!hi.errorEmitted?B(me,Fn):me.emit("error",Fn)}}b(me,"error",An);function Kn(){me.removeListener("finish",xr),_r()}me.once("close",Kn);function xr(){E("onfinish"),me.removeListener("close",Kn),_r()}me.once("finish",xr);function _r(){E("unpipe"),H.unpipe(me)}return me.emit("pipe",H),me.writableNeedDrain===!0?Lt():W.flowing||(E("pipe resume"),H.resume()),me};function he(me,V){return function(){const W=me._readableState;W.awaitDrainWriters===V?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(V)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}Ee.prototype.unpipe=function(me){const V=this._readableState,H={hasUnpiped:!1};if(V.pipes.length===0)return this;if(!me){const pe=V.pipes;V.pipes=[],this.pause();for(let Re=0;Re<pe.length;Re++)pe[Re].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(V.pipes,me);return W===-1?this:(V.pipes.splice(W,1),V.pipes.length===0&&this.pause(),me.emit("unpipe",this,H),this)},Ee.prototype.on=function(me,V){const H=v.prototype.on.call(this,me,V),W=this._readableState;return me==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):me==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Zt(this):W.reading||e.nextTick(be,this)),H},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.removeListener=function(me,V){const H=v.prototype.removeListener.call(this,me,V);return me==="readable"&&e.nextTick(je,this),H},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.removeAllListeners=function(me){const V=v.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(je,this),V};function je(me){const V=me._readableState;V.readableListening=me.listenerCount("readable")>0,V.resumeScheduled&&V[ie]===!1?V.flowing=!0:me.listenerCount("data")>0?me.resume():V.readableListening||(V.flowing=null)}function be(me){E("readable nexttick read 0"),me.read(0)}Ee.prototype.resume=function(){const me=this._readableState;return me.flowing||(E("resume"),me.flowing=!me.readableListening,ke(this,me)),me[ie]=!1,this};function ke(me,V){V.resumeScheduled||(V.resumeScheduled=!0,e.nextTick(le,me,V))}function le(me,V){E("resume",V.reading),V.reading||me.read(0),V.resumeScheduled=!1,me.emit("resume"),ft(me),V.flowing&&!V.reading&&me.read(0)}Ee.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ie]=!0,this};function ft(me){const V=me._readableState;for(E("flow",V.flowing);V.flowing&&me.read()!==null;);}Ee.prototype.wrap=function(me){let V=!1;me.on("data",W=>{!this.push(W)&&me.pause&&(V=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",W=>{B(this,W)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{V&&me.resume&&(V=!1,me.resume())};const H=s(me);for(let W=1;W<H.length;W++){const pe=H[W];this[pe]===void 0&&typeof me[pe]=="function"&&(this[pe]=me[pe].bind(me))}return this},Ee.prototype[h]=function(){return vt(this)},Ee.prototype.iterator=function(me){return me!==void 0&&ue(me,"options"),vt(this,me)};function vt(me,V){typeof me.read!="function"&&(me=Ee.wrap(me,{objectMode:!0}));const H=P(me,V);return H.stream=me,H}async function*P(me,V){let H=ae;function W(He){this===me?(H(),H=ae):H=He}me.on("readable",W);let pe;const Re=S(me,{writable:!1},He=>{pe=He?j(pe,He):null,H(),H=ae});try{for(;;){const He=me.destroyed?null:me.read();if(He!==null)yield He;else{if(pe)throw pe;if(pe===null)return;await new l(W)}}}catch(He){throw pe=j(pe,He),pe}finally{(pe||(V==null?void 0:V.destroyOnReturn)!==!1)&&(pe===void 0||me._readableState.autoDestroy)?k.destroyer(me,null):(me.off("readable",W),Re())}}i(Ee.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Fe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ie]!==!1},set(me){this[ie]=!!me}}}),Ee._fromList=Be;function Be(me,V){if(V.length===0)return null;let H;return V.objectMode?H=V.buffer.shift():!me||me>=V.length?(V.decoder?H=V.buffer.join(""):V.buffer.length===1?H=V.buffer.first():H=V.buffer.concat(V.length),V.buffer.clear()):H=V.buffer.consume(me,V.decoder),H}function nt(me){const V=me._readableState;E("endReadable",V.endEmitted),V.endEmitted||(V.ended=!0,e.nextTick(ge,V,me))}function ge(me,V){if(E("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,V.emit("end"),V.writable&&V.allowHalfOpen===!1)e.nextTick(Oe,V);else if(me.autoDestroy){const H=V._writableState;(!H||H.autoDestroy&&(H.finished||H.writable===!1))&&V.destroy()}}}function Oe(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}Ee.from=function(me,V){return X(Ee,me,V)};let Ke;function Ot(){return Ke===void 0&&(Ke={}),Ke}return Ee.fromWeb=function(me,V){return Ot().newStreamReadableFromReadableStream(me,V)},Ee.toWeb=function(me,V){return Ot().newReadableStreamFromStreamReadable(me,V)},Ee.wrap=function(me,V){var H,W;return new Ee({objectMode:(H=(W=me.readableObjectMode)!==null&&W!==void 0?W:me.objectMode)!==null&&H!==void 0?H:!0,...V,destroy(pe,Re){k.destroyer(me,pe),Re(pe)}}).wrap(me)},mE}var gE,Hj;function _T(){if(Hj)return gE;Hj=1;const e=of(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:u}=Jr();gE=ue,ue.WritableState=Z;const{EventEmitter:d}=Nx(),h=wT().Stream,{Buffer:m}=ju(),y=up(),{addAbortSignal:v}=Rx(),{getHighWaterMark:b,getDefaultHighWaterMark:x}=Ix(),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:j,ERR_UNKNOWN_ENCODING:F}=ki().codes,{errorOrDestroy:$}=y;s(ue.prototype,h.prototype),s(ue,h);function G(){}const D=l("kOnFinished");function Z(Ie,z,Se){typeof Se!="boolean"&&(Se=z instanceof rc()),this.objectMode=!!(Ie&&Ie.objectMode),Se&&(this.objectMode=this.objectMode||!!(Ie&&Ie.writableObjectMode)),this.highWaterMark=Ie?b(this,Ie,"writableHighWaterMark",Se):x(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Te=!!(Ie&&Ie.decodeStrings===!1);this.decodeStrings=!Te,this.defaultEncoding=Ie&&Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=B.bind(void 0,z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,q(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ie||Ie.emitClose!==!1,this.autoDestroy=!Ie||Ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[D]=[]}function q(Ie){Ie.buffered=[],Ie.bufferedIndex=0,Ie.allBuffers=!0,Ie.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ue(Ie){const z=this instanceof rc();if(!z&&!r(ue,this))return new ue(Ie);this._writableState=new Z(Ie,this,z),Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final),typeof Ie.construct=="function"&&(this._construct=Ie.construct),Ie.signal&&v(Ie.signal,this)),h.call(this,Ie),y.construct(this,()=>{const Se=this._writableState;Se.writing||fe(this,Se),Ne(this,Se)})}a(ue,u,{__proto__:null,value:function(Ie){return r(this,Ie)?!0:this!==ue?!1:Ie&&Ie._writableState instanceof Z}}),ue.prototype.pipe=function(){$(this,new C)};function ie(Ie,z,Se,Te){const de=Ie._writableState;if(typeof Se=="function")Te=Se,Se=de.defaultEncoding;else{if(!Se)Se=de.defaultEncoding;else if(Se!=="buffer"&&!m.isEncoding(Se))throw new F(Se);typeof Te!="function"&&(Te=G)}if(z===null)throw new R;if(!de.objectMode)if(typeof z=="string")de.decodeStrings!==!1&&(z=m.from(z,Se),Se="buffer");else if(z instanceof m)Se="buffer";else if(h._isUint8Array(z))z=h._uint8ArrayToBuffer(z),Se="buffer";else throw new w("chunk",["string","Buffer","Uint8Array"],z);let se;return de.ending?se=new j:de.destroyed&&(se=new k("write")),se?(e.nextTick(Te,se),$(Ie,se,!0),se):(de.pendingcb++,ne(Ie,de,z,Se,Te))}ue.prototype.write=function(Ie,z,Se){return ie(this,Ie,z,Se)===!0},ue.prototype.cork=function(){this._writableState.corked++},ue.prototype.uncork=function(){const Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||fe(this,Ie))},ue.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=o(z)),!m.isEncoding(z))throw new F(z);return this._writableState.defaultEncoding=z,this};function ne(Ie,z,Se,Te,de){const se=z.objectMode?1:Se.length;z.length+=se;const Q=z.length<z.highWaterMark;return Q||(z.needDrain=!0),z.writing||z.corked||z.errored||!z.constructed?(z.buffered.push({chunk:Se,encoding:Te,callback:de}),z.allBuffers&&Te!=="buffer"&&(z.allBuffers=!1),z.allNoop&&de!==G&&(z.allNoop=!1)):(z.writelen=se,z.writecb=de,z.writing=!0,z.sync=!0,Ie._write(Se,Te,z.onwrite),z.sync=!1),Q&&!z.errored&&!z.destroyed}function X(Ie,z,Se,Te,de,se,Q){z.writelen=Te,z.writecb=Q,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new k("write")):Se?Ie._writev(de,z.onwrite):Ie._write(de,se,z.onwrite),z.sync=!1}function ae(Ie,z,Se,Te){--z.pendingcb,Te(Se),te(z),$(Ie,Se)}function B(Ie,z){const Se=Ie._writableState,Te=Se.sync,de=Se.writecb;if(typeof de!="function"){$(Ie,new E);return}Se.writing=!1,Se.writecb=null,Se.length-=Se.writelen,Se.writelen=0,z?(z.stack,Se.errored||(Se.errored=z),Ie._readableState&&!Ie._readableState.errored&&(Ie._readableState.errored=z),Te?e.nextTick(ae,Ie,Se,z,de):ae(Ie,Se,z,de)):(Se.buffered.length>Se.bufferedIndex&&fe(Ie,Se),Te?Se.afterWriteTickInfo!==null&&Se.afterWriteTickInfo.cb===de?Se.afterWriteTickInfo.count++:(Se.afterWriteTickInfo={count:1,cb:de,stream:Ie,state:Se},e.nextTick(J,Se.afterWriteTickInfo)):ee(Ie,Se,1,de))}function J({stream:Ie,state:z,count:Se,cb:Te}){return z.afterWriteTickInfo=null,ee(Ie,z,Se,Te)}function ee(Ie,z,Se,Te){for(!z.ending&&!Ie.destroyed&&z.length===0&&z.needDrain&&(z.needDrain=!1,Ie.emit("drain"));Se-- >0;)z.pendingcb--,Te();z.destroyed&&te(z),Ne(Ie,z)}function te(Ie){if(Ie.writing)return;for(let de=Ie.bufferedIndex;de<Ie.buffered.length;++de){var z;const{chunk:se,callback:Q}=Ie.buffered[de],xe=Ie.objectMode?1:se.length;Ie.length-=xe,Q((z=Ie.errored)!==null&&z!==void 0?z:new k("write"))}const Se=Ie[D].splice(0);for(let de=0;de<Se.length;de++){var Te;Se[de]((Te=Ie.errored)!==null&&Te!==void 0?Te:new k("end"))}q(Ie)}function fe(Ie,z){if(z.corked||z.bufferProcessing||z.destroyed||!z.constructed)return;const{buffered:Se,bufferedIndex:Te,objectMode:de}=z,se=Se.length-Te;if(!se)return;let Q=Te;if(z.bufferProcessing=!0,se>1&&Ie._writev){z.pendingcb-=se-1;const xe=z.allNoop?G:Ee=>{for(let Ge=Q;Ge<Se.length;++Ge)Se[Ge].callback(Ee)},Fe=z.allNoop&&Q===0?Se:t(Se,Q);Fe.allBuffers=z.allBuffers,X(Ie,z,!0,z.length,Fe,"",xe),q(z)}else{do{const{chunk:xe,encoding:Fe,callback:Ee}=Se[Q];Se[Q++]=null;const Ge=de?1:xe.length;X(Ie,z,!1,Ge,xe,Fe,Ee)}while(Q<Se.length&&!z.writing);Q===Se.length?q(z):Q>256?(Se.splice(0,Q),z.bufferedIndex=0):z.bufferedIndex=Q}z.bufferProcessing=!1}ue.prototype._write=function(Ie,z,Se){if(this._writev)this._writev([{chunk:Ie,encoding:z}],Se);else throw new S("_write()")},ue.prototype._writev=null,ue.prototype.end=function(Ie,z,Se){const Te=this._writableState;typeof Ie=="function"?(Se=Ie,Ie=null,z=null):typeof z=="function"&&(Se=z,z=null);let de;if(Ie!=null){const se=ie(this,Ie,z);se instanceof n&&(de=se)}return Te.corked&&(Te.corked=1,this.uncork()),de||(!Te.errored&&!Te.ending?(Te.ending=!0,Ne(this,Te,!0),Te.ended=!0):Te.finished?de=new I("end"):Te.destroyed&&(de=new k("end"))),typeof Se=="function"&&(de||Te.finished?e.nextTick(Se,de):Te[D].push(Se)),this};function ve(Ie){return Ie.ending&&!Ie.destroyed&&Ie.constructed&&Ie.length===0&&!Ie.errored&&Ie.buffered.length===0&&!Ie.finished&&!Ie.writing&&!Ie.errorEmitted&&!Ie.closeEmitted}function De(Ie,z){let Se=!1;function Te(de){if(Se){$(Ie,de??E());return}if(Se=!0,z.pendingcb--,de){const se=z[D].splice(0);for(let Q=0;Q<se.length;Q++)se[Q](de);$(Ie,de,z.sync)}else ve(z)&&(z.prefinished=!0,Ie.emit("prefinish"),z.pendingcb++,e.nextTick(Ce,Ie,z))}z.sync=!0,z.pendingcb++;try{Ie._final(Te)}catch(de){Te(de)}z.sync=!1}function Ae(Ie,z){!z.prefinished&&!z.finalCalled&&(typeof Ie._final=="function"&&!z.destroyed?(z.finalCalled=!0,De(Ie,z)):(z.prefinished=!0,Ie.emit("prefinish")))}function Ne(Ie,z,Se){ve(z)&&(Ae(Ie,z),z.pendingcb===0&&(Se?(z.pendingcb++,e.nextTick((Te,de)=>{ve(de)?Ce(Te,de):de.pendingcb--},Ie,z)):ve(z)&&(z.pendingcb++,Ce(Ie,z))))}function Ce(Ie,z){z.pendingcb--,z.finished=!0;const Se=z[D].splice(0);for(let Te=0;Te<Se.length;Te++)Se[Te]();if(Ie.emit("finish"),z.autoDestroy){const Te=Ie._readableState;(!Te||Te.autoDestroy&&(Te.endEmitted||Te.readable===!1))&&Ie.destroy()}}i(ue.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ie){this._writableState&&(this._writableState.destroyed=Ie)}},writable:{__proto__:null,get(){const Ie=this._writableState;return!!Ie&&Ie.writable!==!1&&!Ie.destroyed&&!Ie.errored&&!Ie.ending&&!Ie.ended},set(Ie){this._writableState&&(this._writableState.writable=!!Ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ie=this._writableState;return Ie?!Ie.destroyed&&!Ie.ending&&Ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Pe=y.destroy;ue.prototype.destroy=function(Ie,z){const Se=this._writableState;return!Se.destroyed&&(Se.bufferedIndex<Se.buffered.length||Se[D].length)&&e.nextTick(te,Se),Pe.call(this,Ie,z),this},ue.prototype._undestroy=y.undestroy,ue.prototype._destroy=function(Ie,z){z(Ie)},ue.prototype[d.captureRejectionSymbol]=function(Ie){this.destroy(Ie)};let Qe;function Le(){return Qe===void 0&&(Qe={}),Qe}return ue.fromWeb=function(Ie,z){return Le().newStreamWritableFromWritableStream(Ie,z)},ue.toWeb=function(Ie){return Le().newWritableStreamFromStreamWritable(Ie)},gE}var yE,qj;function tne(){if(qj)return yE;qj=1;const e=of(),t=ju(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=fc(),h=Ou(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:y,ERR_INVALID_RETURN_VALUE:v}}=ki(),{destroyer:b}=up(),x=rc(),w=jx(),S=_T(),{createDeferredPromise:E}=$i(),C=s5(),k=globalThis.Blob||t.Blob,I=typeof k<"u"?function(Z){return Z instanceof k}:function(Z){return!1},R=globalThis.AbortController||Mg().AbortController,{FunctionPrototypeCall:j}=Jr();class F extends x{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}yE=function D(Z,q){if(l(Z))return Z;if(s(Z))return G({readable:Z});if(o(Z))return G({writable:Z});if(i(Z))return G({writable:!1,readable:!1});if(u(Z))return G({readable:w.fromWeb(Z)});if(d(Z))return G({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:ie,write:ne,final:X,destroy:ae}=$(Z);if(a(ie))return C(F,ie,{objectMode:!0,write:ne,final:X,destroy:ae});const B=ie==null?void 0:ie.then;if(typeof B=="function"){let J;const ee=j(B,ie,te=>{if(te!=null)throw new v("nully","body",te)},te=>{b(J,te)});return J=new F({objectMode:!0,readable:!1,write:ne,final(te){X(async()=>{try{await ee,e.nextTick(te,null)}catch(fe){e.nextTick(te,fe)}})},destroy:ae})}throw new v("Iterable, AsyncIterable or AsyncFunction",q,ie)}if(I(Z))return D(Z.arrayBuffer());if(a(Z))return C(F,Z,{objectMode:!0,writable:!1});if(u(Z==null?void 0:Z.readable)&&d(Z==null?void 0:Z.writable))return F.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ie=Z!=null&&Z.readable?s(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:D(Z.readable):void 0,ne=Z!=null&&Z.writable?o(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:D(Z.writable):void 0;return G({readable:ie,writable:ne})}const ue=Z==null?void 0:Z.then;if(typeof ue=="function"){let ie;return j(ue,Z,ne=>{ne!=null&&ie.push(ne),ie.push(null)},ne=>{b(ie,ne)}),ie=new F({objectMode:!0,writable:!1,read(){}})}throw new y(q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function $(D){let{promise:Z,resolve:q}=E();const ue=new R,ie=ue.signal;return{value:D(async function*(){for(;;){const X=Z;Z=null;const{chunk:ae,done:B,cb:J}=await X;if(e.nextTick(J),B)return;if(ie.aborted)throw new m(void 0,{cause:ie.reason});({promise:Z,resolve:q}=E()),yield ae}}(),{signal:ie}),write(X,ae,B){const J=q;q=null,J({chunk:X,done:!1,cb:B})},final(X){const ae=q;q=null,ae({done:!0,cb:X})},destroy(X,ae){ue.abort(),ae(X)}}}function G(D){const Z=D.readable&&typeof D.readable.read!="function"?w.wrap(D.readable):D.readable,q=D.writable;let ue=!!n(Z),ie=!!r(q),ne,X,ae,B,J;function ee(te){const fe=B;B=null,fe?fe(te):te&&J.destroy(te)}return J=new F({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(q!=null&&q.writableObjectMode),readable:ue,writable:ie}),ie&&(h(q,te=>{ie=!1,te&&b(Z,te),ee(te)}),J._write=function(te,fe,ve){q.write(te,fe)?ve():ne=ve},J._final=function(te){q.end(),X=te},q.on("drain",function(){if(ne){const te=ne;ne=null,te()}}),q.on("finish",function(){if(X){const te=X;X=null,te()}})),ue&&(h(Z,te=>{ue=!1,te&&b(Z,te),ee(te)}),Z.on("readable",function(){if(ae){const te=ae;ae=null,te()}}),Z.on("end",function(){J.push(null)}),J._read=function(){for(;;){const te=Z.read();if(te===null){ae=J._read;return}if(!J.push(te))return}}),J._destroy=function(te,fe){!te&&B!==null&&(te=new m),ae=null,ne=null,X=null,B===null?fe(te):(B=fe,b(q,te),b(Z,te))},J}return yE}var bE,Vj;function rc(){if(Vj)return bE;Vj=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Jr();bE=s;const a=jx(),i=_T();r(s.prototype,a.prototype),r(s,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const m=d[h];s.prototype[m]||(s.prototype[m]=i.prototype[m])}}function s(d){if(!(this instanceof s))return new s(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}s.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},s.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return s.from=function(d){return u||(u=tne()),u(d,"body")},bE}var vE,Gj;function o5(){if(Gj)return vE;Gj=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Jr();vE=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=ki().codes,r=rc(),{getHighWaterMark:a}=Ix();e(s.prototype,r.prototype),e(s,r);const i=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const d=u?a(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[i]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function o(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){u?u(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==o&&o.call(this)}return s.prototype._final=o,s.prototype._transform=function(u,d,h){throw new n("_transform()")},s.prototype._write=function(u,d,h){const m=this._readableState,y=this._writableState,v=m.length;this._transform(u,d,(b,x)=>{if(b){h(b);return}x!=null&&this.push(x),y.ended||v===m.length||m.length<m.highWaterMark?h():this[i]=h})},s.prototype._read=function(){if(this[i]){const u=this[i];this[i]=null,u()}},vE}var wE,Kj;function l5(){if(Kj)return wE;Kj=1;const{ObjectSetPrototypeOf:e}=Jr();wE=n;const t=o5();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},wE}var xE,Wj;function ST(){if(Wj)return xE;Wj=1;const e=of(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Jr(),i=Ou(),{once:s}=$i(),o=up(),l=rc(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:y,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=ki(),{validateFunction:x,validateAbortSignal:w}=A0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:I,isWebStream:R,isReadableStream:j,isReadableFinished:F}=fc(),$=globalThis.AbortController||Mg().AbortController;let G,D,Z;function q(te,fe,ve){let De=!1;te.on("close",()=>{De=!0});const Ae=i(te,{readable:fe,writable:ve},Ne=>{De=!Ne});return{destroy:Ne=>{De||(De=!0,o.destroyer(te,Ne||new y("pipe")))},cleanup:Ae}}function ue(te){return x(te[te.length-1],"streams[stream.length - 1]"),te.pop()}function ie(te){if(S(te))return te;if(C(te))return ne(te);throw new d("val",["Readable","Iterable","AsyncIterable"],te)}async function*ne(te){D||(D=jx()),yield*D.prototype[r].call(te)}async function X(te,fe,ve,{end:De}){let Ae,Ne=null;const Ce=Le=>{if(Le&&(Ae=Le),Ne){const Ie=Ne;Ne=null,Ie()}},Pe=()=>new n((Le,Ie)=>{Ae?Ie(Ae):Ne=()=>{Ae?Ie(Ae):Le()}});fe.on("drain",Ce);const Qe=i(fe,{readable:!1},Ce);try{fe.writableNeedDrain&&await Pe();for await(const Le of te)fe.write(Le)||await Pe();De&&(fe.end(),await Pe()),ve()}catch(Le){ve(Ae!==Le?u(Ae,Le):Le)}finally{Qe(),fe.off("drain",Ce)}}async function ae(te,fe,ve,{end:De}){I(fe)&&(fe=fe.writable);const Ae=fe.getWriter();try{for await(const Ne of te)await Ae.ready,Ae.write(Ne).catch(()=>{});await Ae.ready,De&&await Ae.close(),ve()}catch(Ne){try{await Ae.abort(Ne),ve(Ne)}catch(Ce){ve(Ce)}}}function B(...te){return J(te,s(ue(te)))}function J(te,fe,ve){if(te.length===1&&t(te[0])&&(te=te[0]),te.length<2)throw new m("streams");const De=new $,Ae=De.signal,Ne=ve==null?void 0:ve.signal,Ce=[];w(Ne,"options.signal");function Pe(){de(new b)}Z=Z||$i().addAbortListener;let Qe;Ne&&(Qe=Z(Ne,Pe));let Le,Ie;const z=[];let Se=0;function Te(Ee){de(Ee,--Se===0)}function de(Ee,Ge){var Nt;if(Ee&&(!Le||Le.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Le=Ee),!(!Le&&!Ge)){for(;z.length;)z.shift()(Le);(Nt=Qe)===null||Nt===void 0||Nt[a](),De.abort(),Ge&&(Le||Ce.forEach(it=>it()),e.nextTick(fe,Le,Ie))}}let se;for(let Ee=0;Ee<te.length;Ee++){const Ge=te[Ee],Nt=Ee<te.length-1,it=Ee>0,St=Nt||(ve==null?void 0:ve.end)!==!1,Ft=Ee===te.length-1;if(k(Ge)){let Dt=function(Zt){Zt&&Zt.name!=="AbortError"&&Zt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Te(Zt)};var Fe=Dt;if(St){const{destroy:Zt,cleanup:ye}=q(Ge,Nt,it);z.push(Zt),E(Ge)&&Ft&&Ce.push(ye)}Ge.on("error",Dt),E(Ge)&&Ft&&Ce.push(()=>{Ge.removeListener("error",Dt)})}if(Ee===0)if(typeof Ge=="function"){if(se=Ge({signal:Ae}),!S(se))throw new h("Iterable, AsyncIterable or Stream","source",se)}else S(Ge)||C(Ge)||I(Ge)?se=Ge:se=l.from(Ge);else if(typeof Ge=="function"){if(I(se)){var Q;se=ie((Q=se)===null||Q===void 0?void 0:Q.readable)}else se=ie(se);if(se=Ge(se,{signal:Ae}),Nt){if(!S(se,!0))throw new h("AsyncIterable",`transform[${Ee-1}]`,se)}else{var xe;G||(G=l5());const Dt=new G({objectMode:!0}),Zt=(xe=se)===null||xe===void 0?void 0:xe.then;if(typeof Zt=="function")Se++,Zt.call(se,K=>{Ie=K,K!=null&&Dt.write(K),St&&Dt.end(),e.nextTick(Te)},K=>{Dt.destroy(K),e.nextTick(Te,K)});else if(S(se,!0))Se++,X(se,Dt,Te,{end:St});else if(j(se)||I(se)){const K=se.readable||se;Se++,X(K,Dt,Te,{end:St})}else throw new h("AsyncIterable or Promise","destination",se);se=Dt;const{destroy:ye,cleanup:O}=q(se,!1,!0);z.push(ye),Ft&&Ce.push(O)}}else if(k(Ge)){if(C(se)){Se+=2;const Dt=ee(se,Ge,Te,{end:St});E(Ge)&&Ft&&Ce.push(Dt)}else if(I(se)||j(se)){const Dt=se.readable||se;Se++,X(Dt,Ge,Te,{end:St})}else if(S(se))Se++,X(se,Ge,Te,{end:St});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=Ge}else if(R(Ge)){if(C(se))Se++,ae(ie(se),Ge,Te,{end:St});else if(j(se)||S(se))Se++,ae(se,Ge,Te,{end:St});else if(I(se))Se++,ae(se.readable,Ge,Te,{end:St});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],se);se=Ge}else se=l.from(Ge)}return(Ae!=null&&Ae.aborted||Ne!=null&&Ne.aborted)&&e.nextTick(Pe),se}function ee(te,fe,ve,{end:De}){let Ae=!1;if(fe.on("close",()=>{Ae||ve(new v)}),te.pipe(fe,{end:!1}),De){let Ce=function(){Ae=!0,fe.end()};var Ne=Ce;F(te)?e.nextTick(Ce):te.once("end",Ce)}else ve();return i(te,{readable:!0,writable:!1},Ce=>{const Pe=te._readableState;Ce&&Ce.code==="ERR_STREAM_PREMATURE_CLOSE"&&Pe&&Pe.ended&&!Pe.errored&&!Pe.errorEmitted?te.once("end",ve).once("error",ve):ve(Ce)}),i(fe,{readable:!1,writable:!0},ve)}return xE={pipelineImpl:J,pipeline:B},xE}var _E,Zj;function c5(){if(Zj)return _E;Zj=1;const{pipeline:e}=ST(),t=rc(),{destroyer:n}=up(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:s,isTransformStream:o,isWritableStream:l,isReadableStream:u}=fc(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=ki(),y=Ou();return _E=function(...b){if(b.length===0)throw new m("streams");if(b.length===1)return t.from(b[0]);const x=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const G=b.length-1;b[G]=t.from(b[G])}for(let G=0;G<b.length;++G)if(!(!r(b[G])&&!s(b[G]))){if(G<b.length-1&&!(a(b[G])||u(b[G])||o(b[G])))throw new h(`streams[${G}]`,x[G],"must be readable");if(G>0&&!(i(b[G])||l(b[G])||o(b[G])))throw new h(`streams[${G}]`,x[G],"must be writable")}let w,S,E,C,k;function I(G){const D=C;C=null,D?D(G):G?k.destroy(G):!$&&!F&&k.destroy()}const R=b[0],j=e(b,I),F=!!(i(R)||l(R)||o(R)),$=!!(a(j)||u(j)||o(j));if(k=new t({writableObjectMode:!!(R!=null&&R.writableObjectMode),readableObjectMode:!!(j!=null&&j.readableObjectMode),writable:F,readable:$}),F){if(r(R))k._write=function(D,Z,q){R.write(D,Z)?q():w=q},k._final=function(D){R.end(),S=D},R.on("drain",function(){if(w){const D=w;w=null,D()}});else if(s(R)){const Z=(o(R)?R.writable:R).getWriter();k._write=async function(q,ue,ie){try{await Z.ready,Z.write(q).catch(()=>{}),ie()}catch(ne){ie(ne)}},k._final=async function(q){try{await Z.ready,Z.close().catch(()=>{}),S=q}catch(ue){q(ue)}}}const G=o(j)?j.readable:j;y(G,()=>{if(S){const D=S;S=null,D()}})}if($){if(r(j))j.on("readable",function(){if(E){const G=E;E=null,G()}}),j.on("end",function(){k.push(null)}),k._read=function(){for(;;){const G=j.read();if(G===null){E=k._read;return}if(!k.push(G))return}};else if(s(j)){const D=(o(j)?j.readable:j).getReader();k._read=async function(){for(;;)try{const{value:Z,done:q}=await D.read();if(!k.push(Z))return;if(q){k.push(null);return}}catch{return}}}}return k._destroy=function(G,D){!G&&C!==null&&(G=new d),E=null,w=null,S=null,C===null?D(G):(C=D,r(j)&&n(j,G))},k},_E}var Yj;function nne(){if(Yj)return nv;Yj=1;const e=globalThis.AbortController||Mg().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=ki(),{validateAbortSignal:s,validateInteger:o,validateObject:l}=A0(),u=Jr().Symbol("kWeak"),d=Jr().Symbol("kResistStopPropagation"),{finished:h}=Ou(),m=c5(),{addAbortSignalNoValidate:y}=Rx(),{isWritable:v,isNodeStream:b}=fc(),{deprecate:x}=$i(),{ArrayPrototypePush:w,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:k,Promise:I,PromiseReject:R,PromiseResolve:j,PromisePrototypeThen:F,Symbol:$}=Jr(),G=$("kEmpty"),D=$("kEof");function Z(Ne,Ce){if(Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&s(Ce.signal,"options.signal"),b(Ne)&&!v(Ne))throw new t("stream",Ne,"must be writable");const Pe=m(this,Ne);return Ce!=null&&Ce.signal&&y(Ce.signal,Pe),Pe}function q(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&s(Ce.signal,"options.signal");let Pe=1;(Ce==null?void 0:Ce.concurrency)!=null&&(Pe=E(Ce.concurrency));let Qe=Pe-1;return(Ce==null?void 0:Ce.highWaterMark)!=null&&(Qe=E(Ce.highWaterMark)),o(Pe,"options.concurrency",1),o(Qe,"options.highWaterMark",0),Qe+=Pe,(async function*(){const Ie=$i().AbortSignalAny([Ce==null?void 0:Ce.signal].filter(S)),z=this,Se=[],Te={signal:Ie};let de,se,Q=!1,xe=0;function Fe(){Q=!0,Ee()}function Ee(){xe-=1,Ge()}function Ge(){se&&!Q&&xe<Pe&&Se.length<Qe&&(se(),se=null)}async function Nt(){try{for await(let it of z){if(Q)return;if(Ie.aborted)throw new i;try{if(it=Ne(it,Te),it===G)continue;it=j(it)}catch(St){it=R(St)}xe+=1,F(it,Ee,Fe),Se.push(it),de&&(de(),de=null),!Q&&(Se.length>=Qe||xe>=Pe)&&await new I(St=>{se=St})}Se.push(D)}catch(it){const St=R(it);F(St,Ee,Fe),Se.push(St)}finally{Q=!0,de&&(de(),de=null)}}Nt();try{for(;;){for(;Se.length>0;){const it=await Se[0];if(it===D)return;if(Ie.aborted)throw new i;it!==G&&(yield it),Se.shift(),Ge()}await new I(it=>{de=it})}}finally{Q=!0,se&&(se(),se=null)}}).call(this)}function ue(Ne=void 0){return Ne!=null&&l(Ne,"options"),(Ne==null?void 0:Ne.signal)!=null&&s(Ne.signal,"options.signal"),(async function*(){let Pe=0;for await(const Le of this){var Qe;if(Ne!=null&&(Qe=Ne.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i({cause:Ne.signal.reason});yield[Pe++,Le]}}).call(this)}async function ie(Ne,Ce=void 0){for await(const Pe of B.call(this,Ne,Ce))return!0;return!1}async function ne(Ne,Ce=void 0){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);return!await ie.call(this,async(...Pe)=>!await Ne(...Pe),Ce)}async function X(Ne,Ce){for await(const Pe of B.call(this,Ne,Ce))return Pe}async function ae(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);async function Pe(Qe,Le){return await Ne(Qe,Le),G}for await(const Qe of q.call(this,Pe,Ce));}function B(Ne,Ce){if(typeof Ne!="function")throw new n("fn",["Function","AsyncFunction"],Ne);async function Pe(Qe,Le){return await Ne(Qe,Le)?Qe:G}return q.call(this,Pe,Ce)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ee(Ne,Ce,Pe){var Qe;if(typeof Ne!="function")throw new n("reducer",["Function","AsyncFunction"],Ne);Pe!=null&&l(Pe,"options"),(Pe==null?void 0:Pe.signal)!=null&&s(Pe.signal,"options.signal");let Le=arguments.length>1;if(Pe!=null&&(Qe=Pe.signal)!==null&&Qe!==void 0&&Qe.aborted){const de=new i(void 0,{cause:Pe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(de)),de}const Ie=new e,z=Ie.signal;if(Pe!=null&&Pe.signal){const de={once:!0,[u]:this,[d]:!0};Pe.signal.addEventListener("abort",()=>Ie.abort(),de)}let Se=!1;try{for await(const de of this){var Te;if(Se=!0,Pe!=null&&(Te=Pe.signal)!==null&&Te!==void 0&&Te.aborted)throw new i;Le?Ce=await Ne(Ce,de,{signal:z}):(Ce=de,Le=!0)}if(!Se&&!Le)throw new J}finally{Ie.abort()}return Ce}async function te(Ne){Ne!=null&&l(Ne,"options"),(Ne==null?void 0:Ne.signal)!=null&&s(Ne.signal,"options.signal");const Ce=[];for await(const Qe of this){var Pe;if(Ne!=null&&(Pe=Ne.signal)!==null&&Pe!==void 0&&Pe.aborted)throw new i(void 0,{cause:Ne.signal.reason});w(Ce,Qe)}return Ce}function fe(Ne,Ce){const Pe=q.call(this,Ne,Ce);return(async function*(){for await(const Le of Pe)yield*Le}).call(this)}function ve(Ne){if(Ne=C(Ne),k(Ne))return 0;if(Ne<0)throw new a("number",">= 0",Ne);return Ne}function De(Ne,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&s(Ce.signal,"options.signal"),Ne=ve(Ne),(async function*(){var Qe;if(Ce!=null&&(Qe=Ce.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const Ie of this){var Le;if(Ce!=null&&(Le=Ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;Ne--<=0&&(yield Ie)}}).call(this)}function Ae(Ne,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&s(Ce.signal,"options.signal"),Ne=ve(Ne),(async function*(){var Qe;if(Ce!=null&&(Qe=Ce.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const Ie of this){var Le;if(Ce!=null&&(Le=Ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;if(Ne-- >0&&(yield Ie),Ne<=0)return}}).call(this)}return nv.streamReturningOperators={asIndexedPairs:x(ue,"readable.asIndexedPairs will be removed in a future version."),drop:De,filter:B,flatMap:fe,map:q,take:Ae,compose:Z},nv.promiseReturningOperators={every:ne,forEach:ae,reduce:ee,toArray:te,some:ie,find:X},nv}var SE,Xj;function u5(){if(Xj)return SE;Xj=1;const{ArrayPrototypePop:e,Promise:t}=Jr(),{isIterable:n,isNodeStream:r,isWebStream:a}=fc(),{pipelineImpl:i}=ST(),{finished:s}=Ou();d5();function o(...l){return new t((u,d)=>{let h,m;const y=l[l.length-1];if(y&&typeof y=="object"&&!r(y)&&!n(y)&&!a(y)){const v=e(l);h=v.signal,m=v.end}i(l,(v,b)=>{v?d(v):u(b)},{signal:h,end:m})})}return SE={finished:s,pipeline:o},SE}var Jj;function d5(){if(Jj)return QS.exports;Jj=1;const{Buffer:e}=ju(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Jr(),{promisify:{custom:a}}=$i(),{streamReturningOperators:i,promiseReturningOperators:s}=nne(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=ki(),l=c5(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Ix(),{pipeline:h}=ST(),{destroyer:m}=up(),y=Ou(),v=u5(),b=fc(),x=QS.exports=wT().Stream;x.isDestroyed=b.isDestroyed,x.isDisturbed=b.isDisturbed,x.isErrored=b.isErrored,x.isReadable=b.isReadable,x.isWritable=b.isWritable,x.Readable=jx();for(const E of n(i)){let k=function(...I){if(new.target)throw o();return x.Readable.from(r(C,this,I))};var S=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(x.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(s)){let k=function(...R){if(new.target)throw o();return r(C,this,R)};var S=k;const C=s[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(x.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}x.Writable=_T(),x.Duplex=rc(),x.Transform=o5(),x.PassThrough=l5(),x.pipeline=h;const{addAbortSignal:w}=Rx();return x.addAbortSignal=w,x.finished=y,x.destroy=m,x.compose=l,x.setDefaultHighWaterMark=u,x.getDefaultHighWaterMark=d,t(x,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(y,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),x.Stream=x,x._isUint8Array=function(C){return C instanceof Uint8Array},x._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},QS.exports}var Qj;function rne(){return Qj||(Qj=1,function(e){const t=d5(),n=u5(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(JS)),JS.exports}var f5=rne();class ET extends f5.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(lt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class CT extends f5.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(ii(new Ue(lt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(ii(new Ue(lt.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(lt.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(lt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var Ps=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Fs=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class li{get position(){return this.flag&Bd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=fi(t,n);Object.assign(this,Xd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&kx||this.inode.flags&Pi.Sync)}_emitChange(){Ya(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,qP(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=Ru(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>kr?-61441:kr)|n,(this._isSync||n>kr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(lt.EINVAL);if(this.dirty=!0,!(this.flag&ri||this.flag&Vl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=pw(t),this.inode.mtimeMs=pw(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Gl(n,"utf8","a",420);if(!(Kl(r.flag)&Bd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Fr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ri)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Pi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!jg(this.inode)&&!Ig(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Gl(t,null,"r",292);if(Kl(n.flag)&ri)throw new Ue(lt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),s=Fr.from(i);return n.encoding?s.toString(n.encoding):s}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Pi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&ri)throw Ue.With("EBADF",this.path,"readLines");return _te({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!pr(this.context,this.inode,Ca))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new rf(this.inode):new dc(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Pi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&ri||this.flag&Vl))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!jg(this.inode)&&!Ig(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,await this.fs.write(this.internalPath,s,a),this._isSync&&await this.sync(),s.byteLength}async write(t,n,r,a){let i,s,o;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,s=0,i=Fr.from(t,typeof r=="string"?r:"utf8"),o=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n??0,o=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,s,o,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=Gl(n,"utf8","w",420),a=Kl(r.flag);if(!(a&ri||a&Vl))throw new Ue(lt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Fr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),KP(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&ri)throw Ue.With("EBADF",this.path,"createReadStream");return new ET(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Pi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"createWriteStream");return new CT(t,this)}}async function h5(e,t){e=hn(e),t=hn(t);const n=Bn(e,this),r=Bn(t,this);if(!(await dp.call(this,ir(e))).hasAccess(na,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Ya(this,"rename",e.toString()),Ya(this,"change",t.toString());return}await Px.call(this,t,await Mx(e)),await Dx.call(this,e),Ya(this,"rename",e.toString())}catch(a){throw mr(a,{[n.path]:e,[r.path]:t})}}async function N0(e){try{const{fs:t,path:n}=Bn(await Du.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function dp(e,t){e=hn(e);const{fs:n,path:r}=Bn(await Du.call(this,e),this);try{const a=await n.stat(r);if(ka&&!pr(this,a,Ca))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new rf(a):new dc(a)}catch(a){throw mr(a,{[r]:e})}}async function Ox(e,t){e=hn(e);const{fs:n,path:r}=Bn(e,this);try{const a=await n.stat(r);if(ka&&!pr(this,a,Ca))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new rf(a):new dc(a)}catch(a){throw mr(a,{[r]:e})}}async function p5(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await Ps(n,await Ls.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Fs(n);r&&await r}}async function Dx(e){e=hn(e);const{fs:t,path:n}=Bn(e,this);try{if(ka&&!pr(this,await t.stat(n),na))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}async function fp(e,t,n){var r;t=hn(t);const a=Ru(n.mode,420),i=Kl(n.flag),{fullPath:s,fs:o,path:l,stats:u}=await bw(e,t.toString(),n.preserveSymlinks);if(!u){if(!(i&Sx))throw Ue.With("ENOENT",s,"_open");const h=await o.stat(ir(l));if(!pr(e,h,na))throw Ue.With("EACCES",ir(s),"_open");if(!so(h))throw Ue.With("ENOTDIR",ir(s),"_open");const{euid:m,egid:y}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:fo.credentials,v=await o.createFile(l,{mode:a,uid:h.mode&E0?h.uid:m,gid:h.mode&C0?h.gid:y});return new li(e,gw(new mw(e,t,o,l,i,v)))}if(!pr(e,u,WP(i)))throw Ue.With("EACCES",s,"_open");if(i&Ex)throw Ue.With("EEXIST",s,"_open");const d=new li(e,gw(new mw(e,t,o,l,i,u)));return i&Cx&&await d.truncate(0),d}async function Ls(e,t="r",n=420){return await fp(this,e,{flag:t,mode:n})}async function Mx(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Gl(t,null,"r",292);return await Ps(n,typeof e=="object"&&"fd"in e?e:await Ls.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=Fs(n);r&&await r}}async function Px(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Gl(n,"utf8","w+",420),i=Ps(r,e instanceof li?e:await Ls.call(this,e.toString(),a.flag,a.mode),!0),s=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof s!="string"&&!(s instanceof Uint8Array))throw new Ue(lt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Fs(r);a&&await a}}async function m5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Gl(n,"utf8","a",420);if(!(Kl(a.flag)&Bd))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Fr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await Ps(r,typeof e=="object"&&"fd"in e?e:await Ls.call(this,e,a.flag,a.mode),!0).appendFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=Fs(r);a&&await a}}async function kT(e){e=await Du.call(this,e);const{fs:t,path:n}=Bn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!so(r))throw Ue.With("ENOTDIR",n,"rmdir");if(ka&&!pr(this,r,na))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),Ya(this,"rename",e.toString())}catch(r){throw mr(r,{[n]:e})}}async function Fx(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:fo.credentials;t=typeof t=="object"?t:{mode:t};const s=Ru(t==null?void 0:t.mode,511);e=await Du.call(this,e);const{fs:o,path:l,root:u}=Bn(e,this),d={[l]:e},h=async(m,y)=>{if(!pr(this,y,na))throw Ue.With("EACCES",ir(m),"mkdir");const v=await o.mkdir(m,{mode:s,uid:y.mode&E0?y.uid:a,gid:y.mode&C0?y.gid:i});return Ya(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){await h(l,await o.stat(ir(l)));return}const m=[];for(let v=l,b=e;!await o.exists(v);v=ir(v),b=ir(b))m.unshift(v),d[v]=b;if(!m.length)return;const y=[await o.stat(ir(m[0]))];for(const[v,b]of m.entries())y.push(await h(b,y[v]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw mr(m,d)}}async function lf(e,t){t=typeof t=="object"?t:{encoding:t},e=await Du.call(this,e);const{fs:n,path:r}=Bn(e,this),a=await n.stat(r).catch(l=>br(mr(l,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!pr(this,a,Ca))throw Ue.With("EACCES",e,"readdir");if(!so(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>br(mr(l,{[r]:e}))),s=[],o=async l=>{let u;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(u=await n.stat(ur(r,l)).catch(d=>{if(d.code!="ENOENT")throw mr(d,{[r]:e})}),!u))&&(t!=null&&t.withFileTypes?s.push(new Dg(l,u)):(t==null?void 0:t.encoding)=="buffer"?s.push(Fr.from(l)):s.push(l),!(!(t!=null&&t.recursive)||!so(u))))for(const d of await lf.call(this,ur(e,l),t))d instanceof Dg?(d.path=ur(l,d.path),s.push(d)):Fr.isBuffer(d)?s.push(Fr.from(ur(l,Jk(d)))):s.push(ur(l,d))};return await Promise.all(i.map(o)),s}async function g5(e,t){e=hn(e),t=hn(t);const{fs:n,path:r}=Bn(e,this),a=Bn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(ka&&!pr(this,await n.stat(ir(r)),Ca))throw Ue.With("EACCES",ir(r),"link");if(ka&&!(await dp.call(this,ir(t))).hasAccess(na,this))throw Ue.With("EACCES",ir(t),"link");if(ka&&!pr(this,await n.stat(r),Ca))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw mr(i,{[a.path]:t,[r]:e})}}async function y5(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid symlink type: "+n);if(t=hn(t),await N0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=Ps(r,await fp(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(hn(e,!0)),await a.chmod(uc)}catch(a){r.error=a,r.hasError=!0}finally{const a=Fs(r);a&&await a}}async function yw(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await Ps(n,await fp(this,hn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=Fs(n);r&&await r}}async function b5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ps(r,await Ls.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Fs(r);a&&await a}}async function v5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ps(r,await fp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Fs(r);a&&await a}}async function w5(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ps(n,await Ls.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Fs(n);r&&await r}}async function x5(e,t){const n={stack:[],error:void 0,hasError:!1};try{await Ps(n,await fp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=Fs(n);r&&await r}}async function TT(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ps(r,await Ls.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=Fs(r);a&&await a}}async function _5(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await Ps(r,await fp(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=Fs(r);a&&await a}}async function bw(e,t,n){if(n){const l=Bn(t,e),u=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:u}}try{const l=Bn(t,e),u=await l.fs.stat(l.path);if(!zh(u))return{...l,fullPath:t,stats:u};const d=nc.call(e,ir(t),(await yw.call(e,t)).toString());return await bw(e,d)}catch{}const{base:r,dir:a}=Po(t),i=a=="/"?"/":await Du.call(e,a),s=ur(i,r),o=Bn(s,e);try{const l=await o.fs.stat(o.path);if(!zh(l))return{...o,fullPath:s,stats:l};const u=nc.call(e,i,(await yw.call(e,s)).toString());return await bw(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw mr(l,{[o.path]:s})}}async function Du(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=hn(e);const{fullPath:a}=await bw(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Fr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function ane(e,t={}){const n=new JP(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(s,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:s,filename:o},done:!1})});function i(){a=!0,n.close();for(const s of r)s({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:s,resolve:o}=Promise.withResolvers();return r.push(o),s},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function S5(e,t=iT){if(!(await dp.call(this,e)).hasAccess(t,this))throw new Ue(lt.EACCES)}async function AT(e,t){e=hn(e);const n=await Ox.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&kr){case ma:if(t!=null&&t.recursive)for(const r of await lf.call(this,e))await AT.call(this,ur(e,r),t);await kT.call(this,e);break;case to:case uc:case ef:case tf:await Dx.call(this,e);break;case nf:case Qd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}async function E5(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await Fx.call(this,a),n=="buffer"?Fr.from(a):a}async function NT(e,t,n){if(e=hn(e),t=hn(t),n&&n&sT&&await N0.call(this,t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");await Px.call(this,t,await Mx.call(this,e)),Ya(this,"rename",t.toString())}function C5(e,t){return e=hn(e),Promise.resolve(new vT(e,this))}async function RT(e,t,n){e=hn(e),t=hn(t);const r=await Ox.call(this,e);if(n!=null&&n.errorOnExist&&await N0.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&kr){case ma:{if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([lf.call(this,e,{withFileTypes:!0}),Fx.call(this,t,{recursive:!0})]),i=async s=>{n.filter&&!n.filter(ur(e,s.name),ur(t,s.name))||await RT.call(this,ur(e,s.name),ur(t,s.name),n)};await Promise.all(a.map(i));break}case to:case uc:await NT.call(this,e,t);break;case ef:case tf:case nf:case Qd:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await TT.call(this,t,r.atime,r.mtime)}async function k5(e,t){e=hn(e);const{fs:n}=Bn(e,this);return Promise.resolve(YP(n,t==null?void 0:t.bigint))}function T5(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*s(o){const l=await lf(o,{withFileTypes:r,encoding:"utf8"});for(const u of l){const d=r?u.path:o+"/"+u;a(r?u:d)||((await dp(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*s(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?u:d.replace(/^\/+/g,"")))}}return s(n)}const ine=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:li,access:S5,appendFile:m5,chmod:w5,chown:b5,constants:UP,copyFile:NT,cp:RT,exists:N0,glob:T5,lchmod:x5,lchown:v5,link:g5,lstat:Ox,lutimes:_5,mkdir:Fx,mkdtemp:E5,open:Ls,opendir:C5,readFile:Mx,readdir:lf,readlink:yw,realpath:Du,rename:h5,rm:AT,rmdir:kT,stat:dp,statfs:k5,symlink:y5,truncate:p5,unlink:Dx,utimes:TT,watch:ane,writeFile:Px},Symbol.toStringTag,{value:"Module"})),In=()=>{};async function sne(e){const t=[];for await(const n of e)t.push(n);return t}function one(e,t,n=In){h5.call(this,e,t).then(()=>n()).catch(n)}function lne(e,t=In){N0.call(this,e).then(t).catch(()=>t(!1))}function cne(e,t,n=In){n=typeof t=="function"?t:n,dp.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function une(e,t,n=In){n=typeof t=="function"?t:n,Ox.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function dne(e,t=0,n=In){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;p5.call(this,e,r).then(()=>n()).catch(n)}function fne(e,t=In){Dx.call(this,e).then(()=>t()).catch(t)}function hne(e,t,n,r=In){const a=Ru(n,420);r=typeof n=="function"?n:r,Ls.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function pne(e,t,n=In){n=typeof t=="function"?t:n,Mx.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function mne(e,t,n,r=In){r=typeof n=="function"?n:r,Px.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function gne(e,t,n,r=In){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,m5.call(this,e,t,a).then(()=>r()).catch(r)}function yne(e,t,n=In){n=typeof t=="function"?t:n,new li(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new rf(r):r)).catch(n)}function bne(e,t=In){new li(this,e).close().then(()=>t()).catch(t)}function vne(e,t,n=In){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new li(this,e);if(r<0)throw new Ue(lt.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function wne(e,t=In){new li(this,e).sync().then(()=>t()).catch(t)}function xne(e,t=In){new li(this,e).datasync().then(()=>t()).catch(t)}function _ne(e,t,n,r,a,i=In){let s,o,l,u,d;const h=new li(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":u=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(lt.EINVAL,"Invalid arguments"));return}s=Fr.from(t),o=0,l=s.length;const m=i;h.write(s,o,l,u).then(({bytesWritten:y})=>m(void 0,y,s.toString(d))).catch(m)}else{s=Fr.from(t.buffer),o=n,l=r,u=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(s,o,l,u).then(({bytesWritten:y})=>m(void 0,y,s)).catch(m)}}function Sne(e,t,n,r,a,i=In){new li(this,e).read(t,n,r,a).then(({bytesRead:s,buffer:o})=>i(void 0,s,o)).catch(i)}function Ene(e,t,n,r=In){new li(this,e).chown(t,n).then(()=>r()).catch(r)}function Cne(e,t,n){new li(this,e).chmod(t).then(()=>n()).catch(n)}function kne(e,t,n,r=In){new li(this,e).utimes(t,n).then(()=>r()).catch(r)}function Tne(e,t=In){kT.call(this,e).then(()=>t()).catch(t)}function Ane(e,t,n=In){Fx.call(this,e,t).then(()=>n()).catch(n)}function Nne(e,t,n=In){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};lf.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function Rne(e,t,n=In){g5.call(this,e,t).then(()=>n()).catch(n)}function Ine(e,t,n,r=In){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,y5.call(this,e,t,a).then(()=>r()).catch(r)}function jne(e,t,n=In){n=typeof t=="function"?t:n,yw.call(this,e).then(r=>n(void 0,r)).catch(n)}function One(e,t,n,r=In){b5.call(this,e,t,n).then(()=>r()).catch(r)}function Dne(e,t,n,r=In){v5.call(this,e,t,n).then(()=>r()).catch(r)}function Mne(e,t,n=In){w5.call(this,e,t).then(()=>n()).catch(n)}function Pne(e,t,n=In){x5.call(this,e,t).then(()=>n()).catch(n)}function Fne(e,t,n,r=In){TT.call(this,e,t,n).then(()=>r()).catch(r)}function Lne(e,t,n,r=In){_5.call(this,e,t,n).then(()=>r()).catch(r)}function $ne(e,t,n=In){n=typeof t=="function"?t:n,Du.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Bne(e,t,n=In){const r=typeof t=="number"?t:Ca;n=typeof t=="function"?t:n,S5.call(this,e,r).then(()=>n()).catch(n)}const yh=new Map;function zne(e,t,n){const r=hn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(lt.EINVAL,"No listener specified",e.toString(),"watchFile");if(yh.has(r)){const s=yh.get(r);s&&s.listeners.add(n);return}const i=new Tte(this,r,a);i.on("change",(s,o)=>{const l=yh.get(r);if(l)for(const u of l.listeners)u(s,o)}),yh.set(r,{watcher:i,listeners:new Set})}function Une(e,t=In){const n=hn(e),r=yh.get(n);r&&(t&&t!==In?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),yh.delete(n)))}function Hne(e,t,n){const r=new JP(this,hn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||In),r}function qne(e,t){t=typeof t=="object"?t:{encoding:t};const n=Ls.call(this,e,"r",t==null?void 0:t.mode);return new ET({...t,autoClose:!0},n)}function Vne(e,t){t=typeof t=="object"?t:{encoding:t};const n=Ls.call(this,e,"w",t==null?void 0:t.mode);return new CT(t,n)}function Gne(e,t,n=In){n=typeof t=="function"?t:n,AT.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function Kne(e,t,n=In){n=typeof t=="function"?t:n,E5.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function Wne(e,t,n,r=In){r=typeof n=="function"?n:r,NT.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function Zne(e,t,n,r=In){r=typeof n=="function"?n:r,new li(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function Yne(e,t,n,r=In){r=typeof n=="function"?n:r,new li(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function Xne(e,t,n=In){n=typeof t=="function"?t:n,C5.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function Jne(e,t,n,r=In){r=typeof n=="function"?n:r,RT.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function Qne(e,t,n=In){n=typeof t=="function"?t:n,k5.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function ere(e,t){const n=await Ls.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function tre(e,t,n=In){n=typeof t=="function"?t:n;const r=T5.call(this,e,typeof t=="function"?void 0:t);sne(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var md=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},es=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},nre=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},vw;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(vw||(vw={}));let A5=(()=>{var e,t,n,r,a;let i=[Jd()],s,o=[],l,u,d=[],h=[],m,y=[],v=[],b,x=[],w=[],S,E=[],C=[],k,I=[],R=[],j,F=[],$=[];return l=class{constructor(G=br(new Ue(lt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=es(this,d,0),this.extsize=(es(this,h),es(this,y,0)),this.nextents=(es(this,v),es(this,x,0)),this.projid=(es(this,w),es(this,E,0)),this.cowextsize=(es(this,C),es(this,I,0)),this.pad=(es(this,R),es(this,F,[])),es(this,$),this.extsize=G.size,this.nextents=1,this.projid=G.uid,this.cowextsize=G.size;for(const D of Object.keys(Pi))G.flags&Pi[D]&&D in vw&&(this.xflags|=vw[D])}},nre(l,"fsxattr"),(()=>{const G=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=xn).uint32.bind(e)],m=[(t=xn).uint32.bind(t)],b=[(n=xn).uint32.bind(n)],S=[(r=xn).uint32.bind(r)],k=[(a=xn).uint32.bind(a)],j=[xn.char(8)],md(null,null,u,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:D=>"xflags"in D,get:D=>D.xflags,set:(D,Z)=>{D.xflags=Z}},metadata:G},d,h),md(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:D=>"extsize"in D,get:D=>D.extsize,set:(D,Z)=>{D.extsize=Z}},metadata:G},y,v),md(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:D=>"nextents"in D,get:D=>D.nextents,set:(D,Z)=>{D.nextents=Z}},metadata:G},x,w),md(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:D=>"projid"in D,get:D=>D.projid,set:(D,Z)=>{D.projid=Z}},metadata:G},E,C),md(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:D=>"cowextsize"in D,get:D=>D.cowextsize,set:(D,Z)=>{D.cowextsize=Z}},metadata:G},I,R),md(null,null,j,{kind:"field",name:"pad",static:!1,private:!1,access:{has:D=>"pad"in D,get:D=>D.pad,set:(D,Z)=>{D.pad=Z}},metadata:G},F,$),md(null,s={value:l},i,{kind:"class",name:l.name,metadata:G},null,o),l=s.value,G&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:G}),es(l,o)})(),l})();var Ur;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Ur||(Ur={}));var Xs;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Xs||(Xs={}));async function rre(e,t,...n){e=hn(e);const{fs:r,path:a}=Bn(e,this);try{const i=new pa(await r.stat(a));switch(t){case Ur.GetFlags:case Xs.GetFlags:return i.flags;case Ur.SetFlags:case Xs.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Ur.GetVersion:case Xs.GetVersion:return i.version;case Ur.SetVersion:case Xs.SetVersion:i.version=n[0],await r.touch(a,i);return;case Ur.Fiemap:break;case Ur.GetXattr:return new A5(i);case Ur.SetXattr:break;case Ur.GetLabel:return r.label;case Ur.SetLabel:r.label=n[0];return;case Ur.GetUUID:return r.uuid;case Ur.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw mr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function are(e,t,...n){e=hn(e);const{fs:r,path:a}=Bn(e,this);try{const i=new pa(r.statSync(a));switch(t){case Ur.GetFlags:case Xs.GetFlags:return i.flags;case Ur.SetFlags:case Xs.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Ur.GetVersion:case Xs.GetVersion:return i.version;case Ur.SetVersion:case Xs.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Ur.Fiemap:break;case Ur.GetXattr:return new A5(i);case Ur.SetXattr:break;case Ur.GetLabel:return r.label;case Ur.SetLabel:r.label=n[0];return;case Ur.GetUUID:return r.uuid;case Ur.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw mr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const ire=[];function hp(e,t,n,r){if(!t.startsWith("user.")&&!ire.includes(t))throw new Ue(lt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function sre(e,t,n={}){var r;e=hn(e);const{fs:a,path:i}=Bn(e,this);hp(this,t,e,"xattr.get");try{const s=await a.stat(i);if(ka&&!pr(this,s,Ca))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new wu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Fr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw mr(s,{[i]:e})}}function ore(e,t,n={}){var r;e=hn(e),hp(this,t,e,"xattr.get");const{fs:a,path:i}=Bn(e,this);try{const s=a.statSync(i);if(ka&&!pr(this,s,Ca))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new wu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Fr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw mr(s,{[i]:e})}}async function lre(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Bn(e,this);hp(this,t,e,"xattr.set");try{const o=await i.stat(s);if(ka&&!pr(this,o,na))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new wu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Fr.from(n)),await i.touch(s,Xd(o,"attributes"))}catch(o){throw mr(o,{[s]:e})}}function cre(e,t,n,r={}){var a;e=hn(e);const{fs:i,path:s}=Bn(e,this);hp(this,t,e,"xattr.set");try{const o=i.statSync(s);if(ka&&!pr(this,o,na))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new wu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Fr.from(n)),i.touchSync(s,Xd(o,"attributes"))}catch(o){throw mr(o,{[s]:e})}}async function ure(e,t){var n;e=hn(e);const{fs:r,path:a}=Bn(e,this);hp(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(ka&&!pr(this,i,na))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new wu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,Xd(i,"attributes"))}catch(i){throw mr(i,{[a]:e})}}function dre(e,t){var n;e=hn(e);const{fs:r,path:a}=Bn(e,this);hp(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(ka&&!pr(this,i,na))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new wu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,Xd(i,"attributes"))}catch(i){throw mr(i,{[a]:e})}}async function fre(e){e=hn(e);const{fs:t,path:n}=Bn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw mr(r,{[n]:e})}}function hre(e){e=hn(e);const{fs:t,path:n}=Bn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw mr(r,{[n]:e})}}const pre=Object.freeze(Object.defineProperty({__proto__:null,get:sre,getSync:ore,list:fre,listSync:hre,remove:ure,removeSync:dre,set:lre,setSync:cre},Symbol.toStringTag,{value:"Module"})),qa=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:cte,Dir:vT,Dirent:Dg,get IOC(){return Ur},get IOC32(){return Xs},ReadStream:ET,Stats:dc,StatsFs:lte,WriteStream:CT,access:Bne,accessSync:Gte,appendFile:gne,appendFileSync:jte,chmod:Mne,chmodSync:Hte,chown:One,chownSync:zte,chroot:Cte,close:bne,closeSync:sf,constants:UP,copyFile:Wne,copyFileSync:r5,cp:Jne,cpSync:a5,createReadStream:qne,createWriteStream:Vne,exists:lne,existsSync:uT,fchmod:Cne,fchmodSync:gT,fchown:Ene,fchownSync:mT,fdatasync:xne,fdatasyncSync:Pte,fstat:yne,fstatSync:Ote,fsync:wne,fsyncSync:Mte,ftruncate:vne,ftruncateSync:Dte,futimes:kne,futimesSync:yT,glob:tre,globSync:Jte,ioctl:rre,ioctlSync:are,lchmod:Pne,lchmodSync:qte,lchown:Dne,lchownSync:Ute,link:Rne,linkSync:$te,lopenSync:Ax,lstat:une,lstatSync:dT,lutimes:Lne,lutimesSync:Vte,mkdir:Ane,mkdirSync:bT,mkdtemp:Kne,mkdtempSync:Kte,mount:cT,open:hne,openAsBlob:ere,openSync:Tx,opendir:Xne,opendirSync:Yte,promises:ine,read:Sne,readFile:pne,readFileSync:hT,readSync:Lte,readdir:Nne,readdirSync:cp,readlink:jne,readlinkSync:RC,readv:Zne,readvSync:Wte,realpath:$ne,realpathSync:Iu,rename:one,renameSync:Rte,rm:Gne,rmSync:n5,rmdir:Tne,rmdirSync:e5,stat:cne,statSync:xu,statfs:Qne,statfsSync:Xte,symlink:Ine,symlinkSync:Bte,truncate:dne,truncateSync:Ite,umount:ZP,unlink:fne,unlinkSync:fT,unwatchFile:Une,utimes:Fne,utimesSync:t5,watch:Hne,watchFile:zne,write:_ne,writeFile:mne,writeFileSync:pT,writeSync:Fte,writev:Yne,writevSync:Zte,xattr:pre},Symbol.toStringTag,{value:"Module"}));function e4(e){return IP(e)||aT(e)||e instanceof lT}async function N5(e,t=0){if(typeof e!="object"||e==null)throw Mi(new Ue(lt.EINVAL,"Invalid options on mount configuration"));if(!e4(e))throw Mi(new Ue(lt.EINVAL,"Invalid mount configuration"));if(e instanceof lT)return await e.ready(),e;aT(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&e4(i)){if(RP("Resolving nested mount configuration: "+a),t>10)throw Mi(new Ue(lt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await N5(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Mi(new Ue(lt.EPERM,"Backend not available: "+n.name));Vee(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function mre(e){if(!IP(e))throw new TypeError("Invalid single mount point configuration");const t=await N5(e);ZP("/"),cT("/",t)}const gre=["delete"];Math.max(...gre.map(e=>e.length));qee("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const R5=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;R5[e]=t}function yre(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^R5[(t^e[n])&255];return(t^4294967295)>>>0}var zr=function(e,t,n,r,a,i){function s(w){if(w!==void 0&&typeof w!="function")throw new TypeError("Function expected");return w}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,y=n.length-1;y>=0;y--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(w){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(w||null))};var x=(0,n[y])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=s(x.get))&&(d.get=h),(h=s(x.set))&&(d.set=h),(h=s(x.init))&&a.unshift(h)}else(h=s(x))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},kn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},IT=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let t4=(()=>{var e,t,n,r;let a=[Jd()],i,s=[],o,l,u=[],d=[],h,m=[],y=[],v,b=[],x=[],w,S=[],E=[];return o=class{constructor(){this.id=kn(this,u,0),this.offset_=(kn(this,d),kn(this,m,0)),this.offset=(kn(this,y),kn(this,b,0)),this.size=(kn(this,x),kn(this,S,0)),kn(this,E)}},IT(o,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],w=[(r=xn).uint32.bind(r)],zr(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,I)=>{k.id=I}},metadata:C},u,d),zr(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,I)=>{k.offset_=I}},metadata:C},m,y),zr(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,I)=>{k.offset=I}},metadata:C},b,x),zr(null,null,w,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,I)=>{k.size=I}},metadata:C},S,E),zr(null,i={value:o},a,{kind:"class",name:o.name,metadata:C},null,s),o=i.value,C&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),kn(o,s)})(),o})();const n4=255;let gd=(()=>{var e,t,n,r;let a=[Jd()],i,s=[],o,l,u=[],d=[],h,m=[],y=[],v,b=[],x=[],w,S=[],E=[],C,k=[],I=[];var R=o=class{constructor(j=br(new Ue(lt.EINVAL,"Metadata block must be initialized with a superblock")),F=0){if(this.superblock=j,this.offset=F,this.checksum=kn(this,u,0),this.timestamp=(kn(this,d),kn(this,m,Date.now())),this.previous_offset_=(kn(this,y),kn(this,b,0)),this.previous_offset=(kn(this,x),kn(this,S,0)),this._previous=kn(this,E),this.entries=kn(this,k,Array.from({length:n4},()=>new t4)),kn(this,I),this.superblock=j,this.offset=F,!!F&&(xx(this,j.store._buffer.subarray(F,F+Hr(R))),!I5(this)))throw _x(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+F.toString(16)))}get previous(){var j;if(this.previous_offset)return(j=this._previous)!==null&&j!==void 0||(this._previous=new R(this.superblock,this.previous_offset)),this._previous}};return IT(o,"MetadataBlock"),(()=>{const j=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=xn).uint32.bind(e)],h=[(t=xn).uint32.bind(t)],v=[(n=xn).uint32.bind(n)],w=[(r=xn).uint32.bind(r)],C=[Rg(t4,n4)],zr(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:F=>"checksum"in F,get:F=>F.checksum,set:(F,$)=>{F.checksum=$}},metadata:j},u,d),zr(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:F=>"timestamp"in F,get:F=>F.timestamp,set:(F,$)=>{F.timestamp=$}},metadata:j},m,y),zr(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:F=>"previous_offset_"in F,get:F=>F.previous_offset_,set:(F,$)=>{F.previous_offset_=$}},metadata:j},b,x),zr(null,null,w,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:F=>"previous_offset"in F,get:F=>F.previous_offset,set:(F,$)=>{F.previous_offset=$}},metadata:j},S,E),zr(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:F=>"entries"in F,get:F=>F.entries,set:(F,$)=>{F.entries=$}},metadata:j},k,I),zr(null,i={value:o},a,{kind:"class",name:o.name,metadata:j},null,s),R=o=i.value,j&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:j}),kn(o,s)})(),R=o})();const r4=2049864546;(()=>{var e,t,n,r,a,i,s,o,l,u,d;let h=[Jd()],m,y=[],v,b,x=[],w=[],S,E=[],C=[],k,I=[],R=[],j,F=[],$=[],G,D=[],Z=[],q,ue=[],ie=[],ne,X=[],ae=[],B,J=[],ee=[],te,fe=[],ve=[],De,Ae=[],Ne=[],Ce,Pe=[],Qe=[],Le,Ie=[],z=[],Se,Te=[],de=[];var se=v=class{constructor(Q=br(new Ue(lt.EINVAL,"Super block must be initialized with a store"))){if(this.store=Q,this.checksum=kn(this,x,0),this.magic=(kn(this,w),kn(this,E,r4)),this.version=(kn(this,C),kn(this,I,1)),this.inode_format=(kn(this,R),kn(this,F,dte)),this.flags=(kn(this,$),kn(this,D,0)),this.used_bytes=(kn(this,Z),kn(this,ue,BigInt(0))),this.total_bytes=(kn(this,ie),kn(this,X,BigInt(0))),this.uuid=(kn(this,ae),kn(this,J,BigInt(0))),this.metadata_block_size=(kn(this,ee),kn(this,fe,Hr(gd))),this.metadata_offset_=(kn(this,ve),kn(this,Ae,0)),this.metadata_offset=(kn(this,Ne),kn(this,Pe,0)),this.metadata=kn(this,Qe),this.label=kn(this,Ie,""),this._padding=(kn(this,z),kn(this,Te,new Array(132).fill(0))),kn(this,de),this.store=Q,Q._view.getUint32(Aee(se,"magic"),!0)!=r4){ii("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new gd(this),this.metadata.offset=Hr(se),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Hr(se)+Hr(gd)),this.total_bytes=BigInt(Q._buffer.byteLength),Q._write(this),Q._write(this.metadata);return}if(xx(this,Q._buffer.subarray(0,Hr(se))),!I5(this))throw _x(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new gd(this,this.metadata_offset)}rotateMetadata(){const Q=new gd(this);return Q.offset=Number(this.used_bytes),Q.previous_offset=this.metadata_offset,this.metadata=Q,this.metadata_offset=Q.offset,this.store._write(Q),this.used_bytes+=BigInt(Hr(gd)),this.store._write(this),Q}isUnused(Q,xe){if(!xe)return!0;if(Q+xe>this.total_bytes||Q<Hr(se))return!1;for(let Fe=this.metadata;Fe;Fe=Fe.previous){if(Q<Fe.offset+Hr(gd)&&Q+xe>Fe.offset)return!1;for(const Ee of Fe.entries)if(Ee.offset&&(Q>=Ee.offset&&Q<Ee.offset+Ee.size||Q+xe>Ee.offset&&Q+xe<=Ee.offset+Ee.size||Q<=Ee.offset&&Q+xe>=Ee.offset+Ee.size))return!1}return!0}};return IT(v,"SuperBlock"),(()=>{const Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=xn).uint32.bind(e)],S=[(t=xn).uint32.bind(t)],k=[(n=xn).uint16.bind(n)],j=[(r=xn).uint16.bind(r)],G=[(a=xn).uint32.bind(a)],q=[(i=xn).uint64.bind(i)],ne=[(s=xn).uint64.bind(s)],B=[(o=xn).uint128.bind(o)],te=[(l=xn).uint32.bind(l)],De=[(u=xn).uint32.bind(u)],Ce=[(d=xn).uint32.bind(d)],Le=[xn.char(64)],Se=[xn.char(132)],zr(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Fe)=>{xe.checksum=Fe}},metadata:Q},x,w),zr(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Fe)=>{xe.magic=Fe}},metadata:Q},E,C),zr(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Fe)=>{xe.version=Fe}},metadata:Q},I,R),zr(null,null,j,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Fe)=>{xe.inode_format=Fe}},metadata:Q},F,$),zr(null,null,G,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Fe)=>{xe.flags=Fe}},metadata:Q},D,Z),zr(null,null,q,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Fe)=>{xe.used_bytes=Fe}},metadata:Q},ue,ie),zr(null,null,ne,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Fe)=>{xe.total_bytes=Fe}},metadata:Q},X,ae),zr(null,null,B,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Fe)=>{xe.uuid=Fe}},metadata:Q},J,ee),zr(null,null,te,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Fe)=>{xe.metadata_block_size=Fe}},metadata:Q},fe,ve),zr(null,null,De,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Fe)=>{xe.metadata_offset_=Fe}},metadata:Q},Ae,Ne),zr(null,null,Ce,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Fe)=>{xe.metadata_offset=Fe}},metadata:Q},Pe,Qe),zr(null,null,Le,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Fe)=>{xe.label=Fe}},metadata:Q},Ie,z),zr(null,null,Se,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Fe)=>{xe._padding=Fe}},metadata:Q},Te,de),zr(null,m={value:v},h,{kind:"class",name:v.name,metadata:Q},null,y),se=v=m.value,Q&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q}),kn(v,y)})(),se=v})();function I5(e){const t=Za(e),n=yre(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=qa;function bre(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function jC(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?lt[bre(e)]:lt.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function bh(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(jC(e.error))}})}class vre extends NC{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await bh(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await bh(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await bh(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),bh(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(jC(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(jC(this.tx.error)),this.tx.abort(),t}}async function wre(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(ii("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await bh(n)}class xre{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new vre(t,this)}}const _re={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await bh(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await wre(e.storeName||"zenfs",e.idbFactory),n=new xre(t),r=new GP(n);if(e!=null&&e.disableAsyncCache)return rT("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},Sre=_re;function iv(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var EE={exports:{}},a4;function Ere(){return a4||(a4=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function s(u,d){if(!a[u]){if(!r[u]){var h=typeof iv=="function"&&iv;if(!d&&h)return h(u,!0);if(o)return o(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var y=a[u]={exports:{}};r[u][0].call(y.exports,function(v){var b=r[u][1][v];return s(b||v)},y,y.exports,n,r,a,i)}return a[u].exports}for(var o=typeof iv=="function"&&iv,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,r,a){var i=n("./utils"),s=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,d,h,m,y,v,b,x=[],w=0,S=l.length,E=S,C=i.getTypeOf(l)!=="string";w<l.length;)E=S-w,h=C?(u=l[w++],d=w<S?l[w++]:0,w<S?l[w++]:0):(u=l.charCodeAt(w++),d=w<S?l.charCodeAt(w++):0,w<S?l.charCodeAt(w++):0),m=u>>2,y=(3&u)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,x.push(o.charAt(m)+o.charAt(y)+o.charAt(v)+o.charAt(b));return x.join("")},a.decode=function(l){var u,d,h,m,y,v,b=0,x=0,w="data:";if(l.substr(0,w.length)===w)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=s.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)u=o.indexOf(l.charAt(b++))<<2|(m=o.indexOf(l.charAt(b++)))>>4,d=(15&m)<<4|(y=o.indexOf(l.charAt(b++)))>>2,h=(3&y)<<6|(v=o.indexOf(l.charAt(b++))),S[x++]=u,y!==64&&(S[x++]=d),v!==64&&(S[x++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),s=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,h,m,y,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=m,this.compression=y,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,m){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,d,h,m){var y=s,v=m+h;u^=-1;for(var b=m;b<v;b++)u=u>>>8^y[255&(u^d[b])];return-1^u}(0|l,o,o.length,0):function(u,d,h,m){var y=s,v=m+h;u^=-1;for(var b=m;b<v;b++)u=u>>>8^y[255&(u^d.charCodeAt(b))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(h,m){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(y,v){var b,x="";for(b=0;b<v;b++)x+=String.fromCharCode(255&y),y>>>=8;return x}function s(y,v,b,x,w,S){var E,C,k=y.file,I=y.compression,R=S!==u.utf8encode,j=o.transformTo("string",S(k.name)),F=o.transformTo("string",u.utf8encode(k.name)),$=k.comment,G=o.transformTo("string",S($)),D=o.transformTo("string",u.utf8encode($)),Z=F.length!==k.name.length,q=D.length!==$.length,ue="",ie="",ne="",X=k.dir,ae=k.date,B={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(B.crc32=y.crc32,B.compressedSize=y.compressedSize,B.uncompressedSize=y.uncompressedSize);var J=0;v&&(J|=8),R||!Z&&!q||(J|=2048);var ee=0,te=0;X&&(ee|=16),w==="UNIX"?(te=798,ee|=function(ve,De){var Ae=ve;return ve||(Ae=De?16893:33204),(65535&Ae)<<16}(k.unixPermissions,X)):(te=20,ee|=function(ve){return 63&(ve||0)}(k.dosPermissions)),E=ae.getUTCHours(),E<<=6,E|=ae.getUTCMinutes(),E<<=5,E|=ae.getUTCSeconds()/2,C=ae.getUTCFullYear()-1980,C<<=4,C|=ae.getUTCMonth()+1,C<<=5,C|=ae.getUTCDate(),Z&&(ie=i(1,1)+i(d(j),4)+F,ue+="up"+i(ie.length,2)+ie),q&&(ne=i(1,1)+i(d(G),4)+D,ue+="uc"+i(ne.length,2)+ne);var fe="";return fe+=`
\0`,fe+=i(J,2),fe+=I.magic,fe+=i(E,2),fe+=i(C,2),fe+=i(B.crc32,4),fe+=i(B.compressedSize,4),fe+=i(B.uncompressedSize,4),fe+=i(j.length,2),fe+=i(ue.length,2),{fileRecord:h.LOCAL_FILE_HEADER+fe+j+ue,dirRecord:h.CENTRAL_FILE_HEADER+i(te,2)+fe+i(G.length,2)+"\0\0\0\0"+i(ee,4)+i(x,4)+j+ue+G}}var o=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),h=n("../signature");function m(y,v,b,x){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=x,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,l),m.prototype.push=function(y){var v=y.meta.percent||0,b=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,l.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-x-1))/b:100}}))},m.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var v=this.streamFiles&&!y.file.dir;if(v){var b=s(y,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(y){this.accumulate=!1;var v=this.streamFiles&&!y.file.dir,b=s(y,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(x){return h.DATA_DESCRIPTOR+i(x.crc32,4)+i(x.compressedSize,4)+i(x.uncompressedSize,4)}(y),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var y=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-y,x=function(w,S,E,C,k){var I=o.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(w,2)+i(w,2)+i(S,4)+i(E,4)+i(I.length,2)+I}(this.dirRecords.length,b,y,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(y){this._sources.push(y);var v=this;return y.on("data",function(b){v.processChunk(b)}),y.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),y.on("error",function(b){v.error(b)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(y){var v=this._sources;if(!l.prototype.error.call(this,y))return!1;for(var b=0;b<v.length;b++)try{v[b].error(y)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var y=this._sources,v=0;v<y.length;v++)y[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),s=n("./ZipFileWorker");a.generateWorker=function(o,l,u){var d=new s(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(m,y){h++;var v=function(S,E){var C=S||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(y.options.compression,l.compression),b=y.options.compressionOptions||l.compressionOptions||{},x=y.dir,w=y.date;y._compressWorker(v,b).withStreamInfo("file",{name:m,dir:x,date:w,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),s=n("./external"),o=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(m){return new s.Promise(function(y,v){var b=m.decompressed.getContentWorker().pipe(new u);b.on("error",function(x){v(x)}).on("end",function(){b.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}r.exports=function(m,y){var v=this;return y=i.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,y.optimizedBinaryString,y.base64).then(function(b){var x=new l(y);return x.load(b),x}).then(function(b){var x=[s.Promise.resolve(b)],w=b.files;if(y.checkCRC32)for(var S=0;S<w.length;S++)x.push(h(w[S]));return s.Promise.all(x)}).then(function(b){for(var x=b.shift(),w=x.files,S=0;S<w.length;S++){var E=w[S],C=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:y.createFolders}),E.dir||(v.file(k).unsafeOriginalName=C)}return x.zipComment.length&&(v.comment=x.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),s=n("../stream/GenericWorker");function o(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,s),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function s(o,l,u){i.call(this,l),this._helper=o;var d=this;o.on("data",function(h,m){d.push(h)||d._helper.pause(),u&&u(m)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Jt<"u",newBufferFrom:function(i,s){if(Jt.from&&Jt.from!==Uint8Array.from)return Jt.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Jt(i,s)},allocBuffer:function(i){if(Jt.alloc)return Jt.alloc(i);var s=new Jt(i);return s.fill(0),s},isBuffer:function(i){return Jt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,I,R){var j,F=o.getTypeOf(I),$=o.extend(R||{},d);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(k=w(k)),$.createFolders&&(j=x(k))&&S.call(this,j,!0);var G=F==="string"&&$.binary===!1&&$.base64===!1;R&&R.binary!==void 0||($.binary=!G),(I instanceof h&&I.uncompressedSize===0||$.dir||!I||I.length===0)&&($.base64=!1,$.binary=!0,I="",$.compression="STORE",F="string");var D=null;D=I instanceof h||I instanceof l?I:v.isNode&&v.isStream(I)?new b(k,I):o.prepareContent(k,I,$.binary,$.optimizedBinaryString,$.base64);var Z=new m(k,D,$);this.files[k]=Z}var s=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),y=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),x=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var I=k.lastIndexOf("/");return 0<I?k.substring(0,I):""},w=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},S=function(k,I){return I=I!==void 0?I:d.createFolders,k=w(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:I}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var I,R,j;for(I in this.files)j=this.files[I],(R=I.slice(this.root.length,I.length))&&I.slice(0,this.root.length)===this.root&&k(R,j)},filter:function(k){var I=[];return this.forEach(function(R,j){k(R,j)&&I.push(j)}),I},file:function(k,I,R){if(arguments.length!==1)return k=this.root+k,i.call(this,k,I,R),this;if(E(k)){var j=k;return this.filter(function($,G){return!G.dir&&j.test($)})}var F=this.files[this.root+k];return F&&!F.dir?F:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(F,$){return $.dir&&k.test(F)});var I=this.root+k,R=S.call(this,I),j=this.clone();return j.root=R.name,j},remove:function(k){k=this.root+k;var I=this.files[k];if(I||(k.slice(-1)!=="/"&&(k+="/"),I=this.files[k]),I&&!I.dir)delete this.files[k];else for(var R=this.filter(function(F,$){return $.name.slice(0,k.length)===k}),j=0;j<R.length;j++)delete this.files[R[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var I,R={};try{if((R=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=R.type.toLowerCase(),R.compression=R.compression.toUpperCase(),R.type==="binarystring"&&(R.type="string"),!R.type)throw new Error("No output type specified.");o.checkSupport(R.type),R.platform!=="darwin"&&R.platform!=="freebsd"&&R.platform!=="linux"&&R.platform!=="sunos"||(R.platform="UNIX"),R.platform==="win32"&&(R.platform="DOS");var j=R.comment||this.comment||"";I=y.generateWorker(this,R,j)}catch(F){(I=new l("error")).error(F)}return new u(I,R.type||"string",R.mimeType)},generateAsync:function(k,I){return this.generateInternalStream(k).accumulate(I)},generateNodeStream:function(k,I){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(I)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===u&&this.data[m+2]===d&&this.data[m+3]===h)return m-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.readData(4);return l===m[0]&&u===m[1]&&d===m[2]&&h===m[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),s=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||s.uint8array?m==="nodebuffer"?new u(h):s.uint8array?new d(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),s=n("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),s=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,s),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),s=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,b){return new d.Promise(function(x,w){var S=[],E=v._internalType,C=v._outputType,k=v._mimeType;v.on("data",function(I,R){S.push(I),b&&b(R)}).on("error",function(I){S=[],w(I)}).on("end",function(){try{var I=function(R,j,F){switch(R){case"blob":return i.newBlob(i.transformTo("arraybuffer",j),F);case"base64":return l.encode(j);default:return i.transformTo(R,j)}}(C,function(R,j){var F,$=0,G=null,D=0;for(F=0;F<j.length;F++)D+=j[F].length;switch(R){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(G=new Uint8Array(D),F=0;F<j.length;F++)G.set(j[F],$),$+=j[F].length;return G;case"nodebuffer":return Jt.concat(j);default:throw new Error("concat : unsupported type '"+R+"'")}}(E,S),k);x(I)}catch(R){w(R)}S=[]}).resume()})}function y(v,b,x){var w=b;switch(b){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string"}try{this._internalType=w,this._outputType=b,this._mimeType=x,i.checkSupport(w),this._worker=v.pipe(new s(w)),v.lock()}catch(S){this._worker=new o("error"),this._worker.error(S)}}y.prototype={accumulate:function(v){return m(this,v)},on:function(v,b){var x=this;return v==="data"?this._worker.on(v,function(w){b.call(x,w.data,w.meta)}):this._worker.on(v,function(){i.delay(b,arguments,x)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Jt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),s=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}a.utf8encode=function(y){return s.nodebuffer?o.newBufferFrom(y,"utf-8"):function(v){var b,x,w,S,E,C=v.length,k=0;for(S=0;S<C;S++)(64512&(x=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(w=v.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),S++),k+=x<128?1:x<2048?2:x<65536?3:4;for(b=s.uint8array?new Uint8Array(k):new Array(k),S=E=0;E<k;S++)(64512&(x=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(w=v.charCodeAt(S+1)))==56320&&(x=65536+(x-55296<<10)+(w-56320),S++),x<128?b[E++]=x:(x<2048?b[E++]=192|x>>>6:(x<65536?b[E++]=224|x>>>12:(b[E++]=240|x>>>18,b[E++]=128|x>>>12&63),b[E++]=128|x>>>6&63),b[E++]=128|63&x);return b}(y)},a.utf8decode=function(y){return s.nodebuffer?i.transformTo("nodebuffer",y).toString("utf-8"):function(v){var b,x,w,S,E=v.length,C=new Array(2*E);for(b=x=0;b<E;)if((w=v[b++])<128)C[x++]=w;else if(4<(S=u[w]))C[x++]=65533,b+=S-1;else{for(w&=S===2?31:S===3?15:7;1<S&&b<E;)w=w<<6|63&v[b++],S--;1<S?C[x++]=65533:w<65536?C[x++]=w:(w-=65536,C[x++]=55296|w>>10&1023,C[x++]=56320|1023&w)}return C.length!==x&&(C.subarray?C=C.subarray(0,x):C.length=x),i.applyFromCharCode(C)}(y=i.transformTo(s.uint8array?"uint8array":"array",y))},i.inherits(h,l),h.prototype.processChunk=function(y){var v=i.transformTo(s.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var x=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+u[S[C]]>E?C:E}(v),w=v;x!==v.length&&(s.uint8array?(w=v.subarray(0,x),this.leftOver=v.subarray(x,v.length)):(w=v.slice(0,x),this.leftOver=v.slice(x,v.length))),this.push({data:a.utf8decode(w),meta:y.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,l),m.prototype.processChunk=function(y){this.push({data:a.utf8encode(y.data),meta:y.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),s=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function u(b){return b}function d(b,x){for(var w=0;w<b.length;++w)x[w]=255&b.charCodeAt(w);return x}n("setimmediate"),a.newBlob=function(b,x){a.checkSupport("blob");try{return new Blob([b],{type:x})}catch{try{var w=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return w.append(b),w.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,x,w){var S=[],E=0,C=b.length;if(C<=w)return String.fromCharCode.apply(null,b);for(;E<C;)x==="array"||x==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+w,C)))):S.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+w,C)))),E+=w;return S.join("")},stringifyByChar:function(b){for(var x="",w=0;w<b.length;w++)x+=String.fromCharCode(b[w]);return x},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(b){var x=65536,w=a.getTypeOf(b),S=!0;if(w==="uint8array"?S=h.applyCanBeUsed.uint8array:w==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<x;)try{return h.stringifyByChunk(b,w,x)}catch{x=Math.floor(x/2)}return h.stringifyByChar(b)}function y(b,x){for(var w=0;w<b.length;w++)x[w]=b[w];return x}a.applyFromCharCode=m;var v={};v.string={string:u,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,o.allocBuffer(b.length))}},v.array={string:m,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return m(new Uint8Array(b))},array:function(b){return y(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:m,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:m,array:function(b){return y(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return y(b,new Uint8Array(b.length))},nodebuffer:u},a.transformTo=function(b,x){if(x=x||"",!b)return x;a.checkSupport(b);var w=a.getTypeOf(x);return v[w][b](x)},a.resolve=function(b){for(var x=b.split("/"),w=[],S=0;S<x.length;S++){var E=x[S];E==="."||E===""&&S!==0&&S!==x.length-1||(E===".."?w.pop():w.push(E))}return w.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var x,w,S="";for(w=0;w<(b||"").length;w++)S+="\\x"+((x=b.charCodeAt(w))<16?"0":"")+x.toString(16).toUpperCase();return S},a.delay=function(b,x,w){setImmediate(function(){b.apply(w||null,x||[])})},a.inherits=function(b,x){function w(){}w.prototype=x.prototype,b.prototype=new w},a.extend=function(){var b,x,w={};for(b=0;b<arguments.length;b++)for(x in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],x)&&w[x]===void 0&&(w[x]=arguments[b][x]);return w},a.prepareContent=function(b,x,w,S,E){return l.Promise.resolve(x).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,I){var R=new FileReader;R.onload=function(j){k(j.target.result)},R.onerror=function(j){I(j.target.error)},R.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=s.decode(C):w&&S!==!0&&(C=function(I){return d(I,i.uint8array?new Uint8Array(I.length):new Array(I.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(m)+", expected "+s.pretty(h)+")")}},isSignature:function(h,m){var y=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===m;return this.reader.setIndex(y),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",y=s.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,y,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),m=this.reader.readInt(4),y=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var v=m-y;if(0<v)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),h=n("./support");function m(y,v){this.options=y,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var v,b;if(y.skip(22),this.fileNameLength=y.readInt(2),b=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(x){for(var w in d)if(Object.prototype.hasOwnProperty.call(d,w)&&d[w].magic===x)return d[w];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var v=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(v),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var v,b,x,w=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<w;)v=y.readInt(2),b=y.readInt(2),x=y.readData(b),this.extraFields[v]={id:v,length:b,value:x};y.setIndex(w)},handleUTF8:function(){var y=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=s.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var w=s.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(w)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var v=i(y.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var v=i(y.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(y.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,x){this.name=v,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=b,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var s=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,x="string";try{if(!v)throw new Error("No output type specified.");var w=(x=v.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!w&&(b=b.pipe(new l.Utf8EncodeWorker)),!S&&w&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new s(b,x,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(x,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<h.length;y++)i.prototype[h[y]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var s,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,s=function(){m.port2.postMessage(0)}}var y=[];function v(){var b,x;o=!0;for(var w=y.length;w;){for(x=y,y=[],b=-1;++b<w;)x[b]();w=y.length}o=!1}r.exports=function(b){y.push(b)!==1||o||s()}}).call(this,typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function s(){}var o={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,w!==s&&b(this,w)}function m(w,S,E){this.promise=w,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function y(w,S,E){i(function(){var C;try{C=S(E)}catch(k){return o.reject(w,k)}C===w?o.reject(w,new TypeError("Cannot resolve promise with itself")):o.resolve(w,C)})}function v(w){var S=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof S=="function")return function(){S.apply(w,arguments)}}function b(w,S){var E=!1;function C(R){E||(E=!0,o.reject(w,R))}function k(R){E||(E=!0,o.resolve(w,R))}var I=x(function(){S(k,C)});I.status==="error"&&C(I.value)}function x(w,S){var E={};try{E.value=w(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(w){if(typeof w!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(w()).then(function(){return E})},function(E){return S.resolve(w()).then(function(){throw E})})},h.prototype.catch=function(w){return this.then(null,w)},h.prototype.then=function(w,S){if(typeof w!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var E=new this.constructor(s);return this.state!==d?y(E,this.state===u?w:S,this.outcome):this.queue.push(new m(E,w,S)),E},m.prototype.callFulfilled=function(w){o.resolve(this.promise,w)},m.prototype.otherCallFulfilled=function(w){y(this.promise,this.onFulfilled,w)},m.prototype.callRejected=function(w){o.reject(this.promise,w)},m.prototype.otherCallRejected=function(w){y(this.promise,this.onRejected,w)},o.resolve=function(w,S){var E=x(v,S);if(E.status==="error")return o.reject(w,E.value);var C=E.value;if(C)b(w,C);else{w.state=u,w.outcome=S;for(var k=-1,I=w.queue.length;++k<I;)w.queue[k].callFulfilled(S)}return w},o.reject=function(w,S){w.state=l,w.outcome=S;for(var E=-1,C=w.queue.length;++E<C;)w.queue[E].callRejected(S);return w},h.resolve=function(w){return w instanceof this?w:o.resolve(new this(s),w)},h.reject=function(w){var S=new this(s);return o.reject(S,w)},h.all=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),I=0,R=-1,j=new this(s);++R<E;)F(w[R],R);return j;function F($,G){S.resolve($).then(function(D){k[G]=D,++I!==E||C||(C=!0,o.resolve(j,k))},function(D){C||(C=!0,o.reject(j,D))})}},h.race=function(w){var S=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,I=new this(s);++k<E;)R=w[k],S.resolve(R).then(function(j){C||(C=!0,o.resolve(I,j))},function(j){C||(C=!0,o.reject(I,j))});var R;return I}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,h=0,m=-1,y=0,v=8;function b(w){if(!(this instanceof b))return new b(w);this.options=s.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},w||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(l[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?o.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[E]);this._dict_set=!0}}function x(w,S){var E=new b(S);if(E.push(w,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(w,S){var E,C,k=this.strm,I=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof w=="string"?k.input=o.string2buf(w):d.call(w)==="[object ArrayBuffer]"?k.input=new Uint8Array(w):k.input=w,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(I),k.next_out=0,k.avail_out=I),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(k.output,k.next_out))):this.onData(s.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(w){this.chunks.push(w)},b.prototype.onEnd=function(w){w===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},a.Deflate=b,a.deflate=x,a.deflateRaw=function(w,S){return(S=S||{}).raw=!0,x(w,S)},a.gzip=function(w,S){return(S=S||{}).gzip=!0,x(w,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function y(b){if(!(this instanceof y))return new y(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||b&&b.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var w=i.inflateInit2(this.strm,x.windowBits);if(w!==l.Z_OK)throw new Error(u[w]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,x){var w=new y(x);if(w.push(b,!0),w.err)throw w.msg||u[w.err];return w.result}y.prototype.push=function(b,x){var w,S,E,C,k,I,R=this.strm,j=this.options.chunkSize,F=this.options.dictionary,$=!1;if(this.ended)return!1;S=x===~~x?x:x===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?R.input=o.binstring2buf(b):m.call(b)==="[object ArrayBuffer]"?R.input=new Uint8Array(b):R.input=b,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new s.Buf8(j),R.next_out=0,R.avail_out=j),(w=i.inflate(R,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&F&&(I=typeof F=="string"?o.string2buf(F):m.call(F)==="[object ArrayBuffer]"?new Uint8Array(F):F,w=i.inflateSetDictionary(this.strm,I)),w===l.Z_BUF_ERROR&&$===!0&&(w=l.Z_OK,$=!1),w!==l.Z_STREAM_END&&w!==l.Z_OK)return this.onEnd(w),!(this.ended=!0);R.next_out&&(R.avail_out!==0&&w!==l.Z_STREAM_END&&(R.avail_in!==0||S!==l.Z_FINISH&&S!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(R.output,R.next_out),C=R.next_out-E,k=o.buf2string(R.output,E),R.next_out=C,R.avail_out=j-C,C&&s.arraySet(R.output,R.output,E,C,0),this.onData(k)):this.onData(s.shrinkBuf(R.output,R.next_out)))),R.avail_in===0&&R.avail_out===0&&($=!0)}while((0<R.avail_in||R.avail_out===0)&&w!==l.Z_STREAM_END);return w===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(w=i.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===l.Z_OK):S!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(R.avail_out=0))},y.prototype.onData=function(b){this.chunks.push(b)},y.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=y,a.inflate=v,a.inflateRaw=function(b,x){return(x=x||{}).raw=!0,v(b,x)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,d,h,m){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),m);else for(var y=0;y<h;y++)l[m+y]=u[d+y]},flattenChunks:function(l){var u,d,h,m,y,v;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(v=new Uint8Array(h),u=m=0,d=l.length;u<d;u++)y=l[u],v.set(y,m),m+=y.length;return v}},o={arraySet:function(l,u,d,h,m){for(var y=0;y<h;y++)l[m+y]=u[d+y]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,m){if(m<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var y="",v=0;v<m;v++)y+=String.fromCharCode(h[v]);return y}l[254]=l[254]=1,a.string2buf=function(h){var m,y,v,b,x,w=h.length,S=0;for(b=0;b<w;b++)(64512&(y=h.charCodeAt(b)))==55296&&b+1<w&&(64512&(v=h.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),b++),S+=y<128?1:y<2048?2:y<65536?3:4;for(m=new i.Buf8(S),b=x=0;x<S;b++)(64512&(y=h.charCodeAt(b)))==55296&&b+1<w&&(64512&(v=h.charCodeAt(b+1)))==56320&&(y=65536+(y-55296<<10)+(v-56320),b++),y<128?m[x++]=y:(y<2048?m[x++]=192|y>>>6:(y<65536?m[x++]=224|y>>>12:(m[x++]=240|y>>>18,m[x++]=128|y>>>12&63),m[x++]=128|y>>>6&63),m[x++]=128|63&y);return m},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),y=0,v=m.length;y<v;y++)m[y]=h.charCodeAt(y);return m},a.buf2string=function(h,m){var y,v,b,x,w=m||h.length,S=new Array(2*w);for(y=v=0;y<w;)if((b=h[y++])<128)S[v++]=b;else if(4<(x=l[b]))S[v++]=65533,y+=x-1;else{for(b&=x===2?31:x===3?15:7;1<x&&y<w;)b=b<<6|63&h[y++],x--;1<x?S[v++]=65533:b<65536?S[v++]=b:(b-=65536,S[v++]=55296|b>>10&1023,S[v++]=56320|1023&b)}return d(S,v)},a.utf8border=function(h,m){var y;for((m=m||h.length)>h.length&&(m=h.length),y=m-1;0<=y&&(192&h[y])==128;)y--;return y<0||y===0?m:y+l[h[y]]>m?y:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,s,o,l){for(var u=65535&i|0,d=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(u=u+s[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();r.exports=function(s,o,l,u){var d=i,h=u+l;s^=-1;for(var m=u;m<h;m++)s=s>>>8^d[255&(s^o[m])];return-1^s}},{}],46:[function(n,r,a){var i,s=n("../utils/common"),o=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),h=0,m=4,y=0,v=-2,b=-1,x=4,w=2,S=8,E=9,C=286,k=30,I=19,R=2*C+1,j=15,F=3,$=258,G=$+F+1,D=42,Z=113,q=1,ue=2,ie=3,ne=4;function X(z,Se){return z.msg=d[Se],Se}function ae(z){return(z<<1)-(4<z?9:0)}function B(z){for(var Se=z.length;0<=--Se;)z[Se]=0}function J(z){var Se=z.state,Te=Se.pending;Te>z.avail_out&&(Te=z.avail_out),Te!==0&&(s.arraySet(z.output,Se.pending_buf,Se.pending_out,Te,z.next_out),z.next_out+=Te,Se.pending_out+=Te,z.total_out+=Te,z.avail_out-=Te,Se.pending-=Te,Se.pending===0&&(Se.pending_out=0))}function ee(z,Se){o._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,Se),z.block_start=z.strstart,J(z.strm)}function te(z,Se){z.pending_buf[z.pending++]=Se}function fe(z,Se){z.pending_buf[z.pending++]=Se>>>8&255,z.pending_buf[z.pending++]=255&Se}function ve(z,Se){var Te,de,se=z.max_chain_length,Q=z.strstart,xe=z.prev_length,Fe=z.nice_match,Ee=z.strstart>z.w_size-G?z.strstart-(z.w_size-G):0,Ge=z.window,Nt=z.w_mask,it=z.prev,St=z.strstart+$,Ft=Ge[Q+xe-1],Dt=Ge[Q+xe];z.prev_length>=z.good_match&&(se>>=2),Fe>z.lookahead&&(Fe=z.lookahead);do if(Ge[(Te=Se)+xe]===Dt&&Ge[Te+xe-1]===Ft&&Ge[Te]===Ge[Q]&&Ge[++Te]===Ge[Q+1]){Q+=2,Te++;do;while(Ge[++Q]===Ge[++Te]&&Ge[++Q]===Ge[++Te]&&Ge[++Q]===Ge[++Te]&&Ge[++Q]===Ge[++Te]&&Ge[++Q]===Ge[++Te]&&Ge[++Q]===Ge[++Te]&&Ge[++Q]===Ge[++Te]&&Ge[++Q]===Ge[++Te]&&Q<St);if(de=$-(St-Q),Q=St-$,xe<de){if(z.match_start=Se,Fe<=(xe=de))break;Ft=Ge[Q+xe-1],Dt=Ge[Q+xe]}}while((Se=it[Se&Nt])>Ee&&--se!=0);return xe<=z.lookahead?xe:z.lookahead}function De(z){var Se,Te,de,se,Q,xe,Fe,Ee,Ge,Nt,it=z.w_size;do{if(se=z.window_size-z.lookahead-z.strstart,z.strstart>=it+(it-G)){for(s.arraySet(z.window,z.window,it,it,0),z.match_start-=it,z.strstart-=it,z.block_start-=it,Se=Te=z.hash_size;de=z.head[--Se],z.head[Se]=it<=de?de-it:0,--Te;);for(Se=Te=it;de=z.prev[--Se],z.prev[Se]=it<=de?de-it:0,--Te;);se+=it}if(z.strm.avail_in===0)break;if(xe=z.strm,Fe=z.window,Ee=z.strstart+z.lookahead,Ge=se,Nt=void 0,Nt=xe.avail_in,Ge<Nt&&(Nt=Ge),Te=Nt===0?0:(xe.avail_in-=Nt,s.arraySet(Fe,xe.input,xe.next_in,Nt,Ee),xe.state.wrap===1?xe.adler=l(xe.adler,Fe,Nt,Ee):xe.state.wrap===2&&(xe.adler=u(xe.adler,Fe,Nt,Ee)),xe.next_in+=Nt,xe.total_in+=Nt,Nt),z.lookahead+=Te,z.lookahead+z.insert>=F)for(Q=z.strstart-z.insert,z.ins_h=z.window[Q],z.ins_h=(z.ins_h<<z.hash_shift^z.window[Q+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[Q+F-1])&z.hash_mask,z.prev[Q&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=Q,Q++,z.insert--,!(z.lookahead+z.insert<F)););}while(z.lookahead<G&&z.strm.avail_in!==0)}function Ae(z,Se){for(var Te,de;;){if(z.lookahead<G){if(De(z),z.lookahead<G&&Se===h)return q;if(z.lookahead===0)break}if(Te=0,z.lookahead>=F&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+F-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Te!==0&&z.strstart-Te<=z.w_size-G&&(z.match_length=ve(z,Te)),z.match_length>=F)if(de=o._tr_tally(z,z.strstart-z.match_start,z.match_length-F),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=F){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+F-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else de=o._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(de&&(ee(z,!1),z.strm.avail_out===0))return q}return z.insert=z.strstart<F-1?z.strstart:F-1,Se===m?(ee(z,!0),z.strm.avail_out===0?ie:ne):z.last_lit&&(ee(z,!1),z.strm.avail_out===0)?q:ue}function Ne(z,Se){for(var Te,de,se;;){if(z.lookahead<G){if(De(z),z.lookahead<G&&Se===h)return q;if(z.lookahead===0)break}if(Te=0,z.lookahead>=F&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+F-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=F-1,Te!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Te<=z.w_size-G&&(z.match_length=ve(z,Te),z.match_length<=5&&(z.strategy===1||z.match_length===F&&4096<z.strstart-z.match_start)&&(z.match_length=F-1)),z.prev_length>=F&&z.match_length<=z.prev_length){for(se=z.strstart+z.lookahead-F,de=o._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-F),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=se&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+F-1])&z.hash_mask,Te=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=F-1,z.strstart++,de&&(ee(z,!1),z.strm.avail_out===0))return q}else if(z.match_available){if((de=o._tr_tally(z,0,z.window[z.strstart-1]))&&ee(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return q}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(de=o._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<F-1?z.strstart:F-1,Se===m?(ee(z,!0),z.strm.avail_out===0?ie:ne):z.last_lit&&(ee(z,!1),z.strm.avail_out===0)?q:ue}function Ce(z,Se,Te,de,se){this.good_length=z,this.max_lazy=Se,this.nice_length=Te,this.max_chain=de,this.func=se}function Pe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*R),this.dyn_dtree=new s.Buf16(2*(2*k+1)),this.bl_tree=new s.Buf16(2*(2*I+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(j+1),this.heap=new s.Buf16(2*C+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*C+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(z){var Se;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=w,(Se=z.state).pending=0,Se.pending_out=0,Se.wrap<0&&(Se.wrap=-Se.wrap),Se.status=Se.wrap?D:Z,z.adler=Se.wrap===2?0:1,Se.last_flush=h,o._tr_init(Se),y):X(z,v)}function Le(z){var Se=Qe(z);return Se===y&&function(Te){Te.window_size=2*Te.w_size,B(Te.head),Te.max_lazy_match=i[Te.level].max_lazy,Te.good_match=i[Te.level].good_length,Te.nice_match=i[Te.level].nice_length,Te.max_chain_length=i[Te.level].max_chain,Te.strstart=0,Te.block_start=0,Te.lookahead=0,Te.insert=0,Te.match_length=Te.prev_length=F-1,Te.match_available=0,Te.ins_h=0}(z.state),Se}function Ie(z,Se,Te,de,se,Q){if(!z)return v;var xe=1;if(Se===b&&(Se=6),de<0?(xe=0,de=-de):15<de&&(xe=2,de-=16),se<1||E<se||Te!==S||de<8||15<de||Se<0||9<Se||Q<0||x<Q)return X(z,v);de===8&&(de=9);var Fe=new Pe;return(z.state=Fe).strm=z,Fe.wrap=xe,Fe.gzhead=null,Fe.w_bits=de,Fe.w_size=1<<Fe.w_bits,Fe.w_mask=Fe.w_size-1,Fe.hash_bits=se+7,Fe.hash_size=1<<Fe.hash_bits,Fe.hash_mask=Fe.hash_size-1,Fe.hash_shift=~~((Fe.hash_bits+F-1)/F),Fe.window=new s.Buf8(2*Fe.w_size),Fe.head=new s.Buf16(Fe.hash_size),Fe.prev=new s.Buf16(Fe.w_size),Fe.lit_bufsize=1<<se+6,Fe.pending_buf_size=4*Fe.lit_bufsize,Fe.pending_buf=new s.Buf8(Fe.pending_buf_size),Fe.d_buf=1*Fe.lit_bufsize,Fe.l_buf=3*Fe.lit_bufsize,Fe.level=Se,Fe.strategy=Q,Fe.method=Te,Le(z)}i=[new Ce(0,0,0,0,function(z,Se){var Te=65535;for(Te>z.pending_buf_size-5&&(Te=z.pending_buf_size-5);;){if(z.lookahead<=1){if(De(z),z.lookahead===0&&Se===h)return q;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var de=z.block_start+Te;if((z.strstart===0||z.strstart>=de)&&(z.lookahead=z.strstart-de,z.strstart=de,ee(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-G&&(ee(z,!1),z.strm.avail_out===0))return q}return z.insert=0,Se===m?(ee(z,!0),z.strm.avail_out===0?ie:ne):(z.strstart>z.block_start&&(ee(z,!1),z.strm.avail_out),q)}),new Ce(4,4,8,4,Ae),new Ce(4,5,16,8,Ae),new Ce(4,6,32,32,Ae),new Ce(4,4,16,16,Ne),new Ce(8,16,32,32,Ne),new Ce(8,16,128,128,Ne),new Ce(8,32,128,256,Ne),new Ce(32,128,258,1024,Ne),new Ce(32,258,258,4096,Ne)],a.deflateInit=function(z,Se){return Ie(z,Se,S,15,8,0)},a.deflateInit2=Ie,a.deflateReset=Le,a.deflateResetKeep=Qe,a.deflateSetHeader=function(z,Se){return z&&z.state?z.state.wrap!==2?v:(z.state.gzhead=Se,y):v},a.deflate=function(z,Se){var Te,de,se,Q;if(!z||!z.state||5<Se||Se<0)return z?X(z,v):v;if(de=z.state,!z.output||!z.input&&z.avail_in!==0||de.status===666&&Se!==m)return X(z,z.avail_out===0?-5:v);if(de.strm=z,Te=de.last_flush,de.last_flush=Se,de.status===D)if(de.wrap===2)z.adler=0,te(de,31),te(de,139),te(de,8),de.gzhead?(te(de,(de.gzhead.text?1:0)+(de.gzhead.hcrc?2:0)+(de.gzhead.extra?4:0)+(de.gzhead.name?8:0)+(de.gzhead.comment?16:0)),te(de,255&de.gzhead.time),te(de,de.gzhead.time>>8&255),te(de,de.gzhead.time>>16&255),te(de,de.gzhead.time>>24&255),te(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),te(de,255&de.gzhead.os),de.gzhead.extra&&de.gzhead.extra.length&&(te(de,255&de.gzhead.extra.length),te(de,de.gzhead.extra.length>>8&255)),de.gzhead.hcrc&&(z.adler=u(z.adler,de.pending_buf,de.pending,0)),de.gzindex=0,de.status=69):(te(de,0),te(de,0),te(de,0),te(de,0),te(de,0),te(de,de.level===9?2:2<=de.strategy||de.level<2?4:0),te(de,3),de.status=Z);else{var xe=S+(de.w_bits-8<<4)<<8;xe|=(2<=de.strategy||de.level<2?0:de.level<6?1:de.level===6?2:3)<<6,de.strstart!==0&&(xe|=32),xe+=31-xe%31,de.status=Z,fe(de,xe),de.strstart!==0&&(fe(de,z.adler>>>16),fe(de,65535&z.adler)),z.adler=1}if(de.status===69)if(de.gzhead.extra){for(se=de.pending;de.gzindex<(65535&de.gzhead.extra.length)&&(de.pending!==de.pending_buf_size||(de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),J(z),se=de.pending,de.pending!==de.pending_buf_size));)te(de,255&de.gzhead.extra[de.gzindex]),de.gzindex++;de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),de.gzindex===de.gzhead.extra.length&&(de.gzindex=0,de.status=73)}else de.status=73;if(de.status===73)if(de.gzhead.name){se=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),J(z),se=de.pending,de.pending===de.pending_buf_size)){Q=1;break}Q=de.gzindex<de.gzhead.name.length?255&de.gzhead.name.charCodeAt(de.gzindex++):0,te(de,Q)}while(Q!==0);de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),Q===0&&(de.gzindex=0,de.status=91)}else de.status=91;if(de.status===91)if(de.gzhead.comment){se=de.pending;do{if(de.pending===de.pending_buf_size&&(de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),J(z),se=de.pending,de.pending===de.pending_buf_size)){Q=1;break}Q=de.gzindex<de.gzhead.comment.length?255&de.gzhead.comment.charCodeAt(de.gzindex++):0,te(de,Q)}while(Q!==0);de.gzhead.hcrc&&de.pending>se&&(z.adler=u(z.adler,de.pending_buf,de.pending-se,se)),Q===0&&(de.status=103)}else de.status=103;if(de.status===103&&(de.gzhead.hcrc?(de.pending+2>de.pending_buf_size&&J(z),de.pending+2<=de.pending_buf_size&&(te(de,255&z.adler),te(de,z.adler>>8&255),z.adler=0,de.status=Z)):de.status=Z),de.pending!==0){if(J(z),z.avail_out===0)return de.last_flush=-1,y}else if(z.avail_in===0&&ae(Se)<=ae(Te)&&Se!==m)return X(z,-5);if(de.status===666&&z.avail_in!==0)return X(z,-5);if(z.avail_in!==0||de.lookahead!==0||Se!==h&&de.status!==666){var Fe=de.strategy===2?function(Ee,Ge){for(var Nt;;){if(Ee.lookahead===0&&(De(Ee),Ee.lookahead===0)){if(Ge===h)return q;break}if(Ee.match_length=0,Nt=o._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++,Nt&&(ee(Ee,!1),Ee.strm.avail_out===0))return q}return Ee.insert=0,Ge===m?(ee(Ee,!0),Ee.strm.avail_out===0?ie:ne):Ee.last_lit&&(ee(Ee,!1),Ee.strm.avail_out===0)?q:ue}(de,Se):de.strategy===3?function(Ee,Ge){for(var Nt,it,St,Ft,Dt=Ee.window;;){if(Ee.lookahead<=$){if(De(Ee),Ee.lookahead<=$&&Ge===h)return q;if(Ee.lookahead===0)break}if(Ee.match_length=0,Ee.lookahead>=F&&0<Ee.strstart&&(it=Dt[St=Ee.strstart-1])===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]){Ft=Ee.strstart+$;do;while(it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&it===Dt[++St]&&St<Ft);Ee.match_length=$-(Ft-St),Ee.match_length>Ee.lookahead&&(Ee.match_length=Ee.lookahead)}if(Ee.match_length>=F?(Nt=o._tr_tally(Ee,1,Ee.match_length-F),Ee.lookahead-=Ee.match_length,Ee.strstart+=Ee.match_length,Ee.match_length=0):(Nt=o._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++),Nt&&(ee(Ee,!1),Ee.strm.avail_out===0))return q}return Ee.insert=0,Ge===m?(ee(Ee,!0),Ee.strm.avail_out===0?ie:ne):Ee.last_lit&&(ee(Ee,!1),Ee.strm.avail_out===0)?q:ue}(de,Se):i[de.level].func(de,Se);if(Fe!==ie&&Fe!==ne||(de.status=666),Fe===q||Fe===ie)return z.avail_out===0&&(de.last_flush=-1),y;if(Fe===ue&&(Se===1?o._tr_align(de):Se!==5&&(o._tr_stored_block(de,0,0,!1),Se===3&&(B(de.head),de.lookahead===0&&(de.strstart=0,de.block_start=0,de.insert=0))),J(z),z.avail_out===0))return de.last_flush=-1,y}return Se!==m?y:de.wrap<=0?1:(de.wrap===2?(te(de,255&z.adler),te(de,z.adler>>8&255),te(de,z.adler>>16&255),te(de,z.adler>>24&255),te(de,255&z.total_in),te(de,z.total_in>>8&255),te(de,z.total_in>>16&255),te(de,z.total_in>>24&255)):(fe(de,z.adler>>>16),fe(de,65535&z.adler)),J(z),0<de.wrap&&(de.wrap=-de.wrap),de.pending!==0?y:1)},a.deflateEnd=function(z){var Se;return z&&z.state?(Se=z.state.status)!==D&&Se!==69&&Se!==73&&Se!==91&&Se!==103&&Se!==Z&&Se!==666?X(z,v):(z.state=null,Se===Z?X(z,-3):y):v},a.deflateSetDictionary=function(z,Se){var Te,de,se,Q,xe,Fe,Ee,Ge,Nt=Se.length;if(!z||!z.state||(Q=(Te=z.state).wrap)===2||Q===1&&Te.status!==D||Te.lookahead)return v;for(Q===1&&(z.adler=l(z.adler,Se,Nt,0)),Te.wrap=0,Nt>=Te.w_size&&(Q===0&&(B(Te.head),Te.strstart=0,Te.block_start=0,Te.insert=0),Ge=new s.Buf8(Te.w_size),s.arraySet(Ge,Se,Nt-Te.w_size,Te.w_size,0),Se=Ge,Nt=Te.w_size),xe=z.avail_in,Fe=z.next_in,Ee=z.input,z.avail_in=Nt,z.next_in=0,z.input=Se,De(Te);Te.lookahead>=F;){for(de=Te.strstart,se=Te.lookahead-(F-1);Te.ins_h=(Te.ins_h<<Te.hash_shift^Te.window[de+F-1])&Te.hash_mask,Te.prev[de&Te.w_mask]=Te.head[Te.ins_h],Te.head[Te.ins_h]=de,de++,--se;);Te.strstart=de,Te.lookahead=F-1,De(Te)}return Te.strstart+=Te.lookahead,Te.block_start=Te.strstart,Te.insert=Te.lookahead,Te.lookahead=0,Te.match_length=Te.prev_length=F-1,Te.match_available=0,z.next_in=Fe,z.input=Ee,z.avail_in=xe,Te.wrap=Q,y},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,s){var o,l,u,d,h,m,y,v,b,x,w,S,E,C,k,I,R,j,F,$,G,D,Z,q,ue;o=i.state,l=i.next_in,q=i.input,u=l+(i.avail_in-5),d=i.next_out,ue=i.output,h=d-(s-i.avail_out),m=d+(i.avail_out-257),y=o.dmax,v=o.wsize,b=o.whave,x=o.wnext,w=o.window,S=o.hold,E=o.bits,C=o.lencode,k=o.distcode,I=(1<<o.lenbits)-1,R=(1<<o.distbits)-1;e:do{E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),j=C[S&I];t:for(;;){if(S>>>=F=j>>>24,E-=F,(F=j>>>16&255)===0)ue[d++]=65535&j;else{if(!(16&F)){if((64&F)==0){j=C[(65535&j)+(S&(1<<F)-1)];continue t}if(32&F){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}$=65535&j,(F&=15)&&(E<F&&(S+=q[l++]<<E,E+=8),$+=S&(1<<F)-1,S>>>=F,E-=F),E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),j=k[S&R];n:for(;;){if(S>>>=F=j>>>24,E-=F,!(16&(F=j>>>16&255))){if((64&F)==0){j=k[(65535&j)+(S&(1<<F)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(G=65535&j,E<(F&=15)&&(S+=q[l++]<<E,(E+=8)<F&&(S+=q[l++]<<E,E+=8)),y<(G+=S&(1<<F)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(S>>>=F,E-=F,(F=d-h)<G){if(b<(F=G-F)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(Z=w,(D=0)===x){if(D+=v-F,F<$){for($-=F;ue[d++]=w[D++],--F;);D=d-G,Z=ue}}else if(x<F){if(D+=v+x-F,(F-=x)<$){for($-=F;ue[d++]=w[D++],--F;);if(D=0,x<$){for($-=F=x;ue[d++]=w[D++],--F;);D=d-G,Z=ue}}}else if(D+=x-F,F<$){for($-=F;ue[d++]=w[D++],--F;);D=d-G,Z=ue}for(;2<$;)ue[d++]=Z[D++],ue[d++]=Z[D++],ue[d++]=Z[D++],$-=3;$&&(ue[d++]=Z[D++],1<$&&(ue[d++]=Z[D++]))}else{for(D=d-G;ue[d++]=ue[D++],ue[d++]=ue[D++],ue[d++]=ue[D++],2<($-=3););$&&(ue[d++]=ue[D++],1<$&&(ue[d++]=ue[D++]))}break}}break}}while(l<u&&d<m);l-=$=E>>3,S&=(1<<(E-=$<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=d<m?m-d+257:257-(d-m),o.hold=S,o.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),s=n("./adler32"),o=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,h=2,m=0,y=-2,v=1,b=852,x=592;function w(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(D){var Z;return D&&D.state?(Z=D.state,D.total_in=D.total_out=Z.total=0,D.msg="",Z.wrap&&(D.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(b),Z.distcode=Z.distdyn=new i.Buf32(x),Z.sane=1,Z.back=-1,m):y}function C(D){var Z;return D&&D.state?((Z=D.state).wsize=0,Z.whave=0,Z.wnext=0,E(D)):y}function k(D,Z){var q,ue;return D&&D.state?(ue=D.state,Z<0?(q=0,Z=-Z):(q=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?y:(ue.window!==null&&ue.wbits!==Z&&(ue.window=null),ue.wrap=q,ue.wbits=Z,C(D))):y}function I(D,Z){var q,ue;return D?(ue=new S,(D.state=ue).window=null,(q=k(D,Z))!==m&&(D.state=null),q):y}var R,j,F=!0;function $(D){if(F){var Z;for(R=new i.Buf32(512),j=new i.Buf32(32),Z=0;Z<144;)D.lens[Z++]=8;for(;Z<256;)D.lens[Z++]=9;for(;Z<280;)D.lens[Z++]=7;for(;Z<288;)D.lens[Z++]=8;for(u(d,D.lens,0,288,R,0,D.work,{bits:9}),Z=0;Z<32;)D.lens[Z++]=5;u(h,D.lens,0,32,j,0,D.work,{bits:5}),F=!1}D.lencode=R,D.lenbits=9,D.distcode=j,D.distbits=5}function G(D,Z,q,ue){var ie,ne=D.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),ue>=ne.wsize?(i.arraySet(ne.window,Z,q-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(ue<(ie=ne.wsize-ne.wnext)&&(ie=ue),i.arraySet(ne.window,Z,q-ue,ie,ne.wnext),(ue-=ie)?(i.arraySet(ne.window,Z,q-ue,ue,0),ne.wnext=ue,ne.whave=ne.wsize):(ne.wnext+=ie,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=ie))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(D){return I(D,15)},a.inflateInit2=I,a.inflate=function(D,Z){var q,ue,ie,ne,X,ae,B,J,ee,te,fe,ve,De,Ae,Ne,Ce,Pe,Qe,Le,Ie,z,Se,Te,de,se=0,Q=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return y;(q=D.state).mode===12&&(q.mode=13),X=D.next_out,ie=D.output,B=D.avail_out,ne=D.next_in,ue=D.input,ae=D.avail_in,J=q.hold,ee=q.bits,te=ae,fe=B,Se=m;e:for(;;)switch(q.mode){case v:if(q.wrap===0){q.mode=13;break}for(;ee<16;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if(2&q.wrap&&J===35615){Q[q.check=0]=255&J,Q[1]=J>>>8&255,q.check=o(q.check,Q,2,0),ee=J=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&J)<<8)+(J>>8))%31){D.msg="incorrect header check",q.mode=30;break}if((15&J)!=8){D.msg="unknown compression method",q.mode=30;break}if(ee-=4,z=8+(15&(J>>>=4)),q.wbits===0)q.wbits=z;else if(z>q.wbits){D.msg="invalid window size",q.mode=30;break}q.dmax=1<<z,D.adler=q.check=1,q.mode=512&J?10:12,ee=J=0;break;case 2:for(;ee<16;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if(q.flags=J,(255&q.flags)!=8){D.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){D.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=J>>8&1),512&q.flags&&(Q[0]=255&J,Q[1]=J>>>8&255,q.check=o(q.check,Q,2,0)),ee=J=0,q.mode=3;case 3:for(;ee<32;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}q.head&&(q.head.time=J),512&q.flags&&(Q[0]=255&J,Q[1]=J>>>8&255,Q[2]=J>>>16&255,Q[3]=J>>>24&255,q.check=o(q.check,Q,4,0)),ee=J=0,q.mode=4;case 4:for(;ee<16;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}q.head&&(q.head.xflags=255&J,q.head.os=J>>8),512&q.flags&&(Q[0]=255&J,Q[1]=J>>>8&255,q.check=o(q.check,Q,2,0)),ee=J=0,q.mode=5;case 5:if(1024&q.flags){for(;ee<16;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}q.length=J,q.head&&(q.head.extra_len=J),512&q.flags&&(Q[0]=255&J,Q[1]=J>>>8&255,q.check=o(q.check,Q,2,0)),ee=J=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(ae<(ve=q.length)&&(ve=ae),ve&&(q.head&&(z=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),i.arraySet(q.head.extra,ue,ne,ve,z)),512&q.flags&&(q.check=o(q.check,ue,ve,ne)),ae-=ve,ne+=ve,q.length-=ve),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(ae===0)break e;for(ve=0;z=ue[ne+ve++],q.head&&z&&q.length<65536&&(q.head.name+=String.fromCharCode(z)),z&&ve<ae;);if(512&q.flags&&(q.check=o(q.check,ue,ve,ne)),ae-=ve,ne+=ve,z)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(ae===0)break e;for(ve=0;z=ue[ne+ve++],q.head&&z&&q.length<65536&&(q.head.comment+=String.fromCharCode(z)),z&&ve<ae;);if(512&q.flags&&(q.check=o(q.check,ue,ve,ne)),ae-=ve,ne+=ve,z)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;ee<16;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if(J!==(65535&q.check)){D.msg="header crc mismatch",q.mode=30;break}ee=J=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),D.adler=q.check=0,q.mode=12;break;case 10:for(;ee<32;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}D.adler=q.check=w(J),ee=J=0,q.mode=11;case 11:if(q.havedict===0)return D.next_out=X,D.avail_out=B,D.next_in=ne,D.avail_in=ae,q.hold=J,q.bits=ee,2;D.adler=q.check=1,q.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(q.last){J>>>=7&ee,ee-=7&ee,q.mode=27;break}for(;ee<3;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}switch(q.last=1&J,ee-=1,3&(J>>>=1)){case 0:q.mode=14;break;case 1:if($(q),q.mode=20,Z!==6)break;J>>>=2,ee-=2;break e;case 2:q.mode=17;break;case 3:D.msg="invalid block type",q.mode=30}J>>>=2,ee-=2;break;case 14:for(J>>>=7&ee,ee-=7&ee;ee<32;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if((65535&J)!=(J>>>16^65535)){D.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&J,ee=J=0,q.mode=15,Z===6)break e;case 15:q.mode=16;case 16:if(ve=q.length){if(ae<ve&&(ve=ae),B<ve&&(ve=B),ve===0)break e;i.arraySet(ie,ue,ne,ve,X),ae-=ve,ne+=ve,B-=ve,X+=ve,q.length-=ve;break}q.mode=12;break;case 17:for(;ee<14;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if(q.nlen=257+(31&J),J>>>=5,ee-=5,q.ndist=1+(31&J),J>>>=5,ee-=5,q.ncode=4+(15&J),J>>>=4,ee-=4,286<q.nlen||30<q.ndist){D.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;ee<3;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}q.lens[xe[q.have++]]=7&J,J>>>=3,ee-=3}for(;q.have<19;)q.lens[xe[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Te={bits:q.lenbits},Se=u(0,q.lens,0,19,q.lencode,0,q.work,Te),q.lenbits=Te.bits,Se){D.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Ce=(se=q.lencode[J&(1<<q.lenbits)-1])>>>16&255,Pe=65535&se,!((Ne=se>>>24)<=ee);){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if(Pe<16)J>>>=Ne,ee-=Ne,q.lens[q.have++]=Pe;else{if(Pe===16){for(de=Ne+2;ee<de;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if(J>>>=Ne,ee-=Ne,q.have===0){D.msg="invalid bit length repeat",q.mode=30;break}z=q.lens[q.have-1],ve=3+(3&J),J>>>=2,ee-=2}else if(Pe===17){for(de=Ne+3;ee<de;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}ee-=Ne,z=0,ve=3+(7&(J>>>=Ne)),J>>>=3,ee-=3}else{for(de=Ne+7;ee<de;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}ee-=Ne,z=0,ve=11+(127&(J>>>=Ne)),J>>>=7,ee-=7}if(q.have+ve>q.nlen+q.ndist){D.msg="invalid bit length repeat",q.mode=30;break}for(;ve--;)q.lens[q.have++]=z}}if(q.mode===30)break;if(q.lens[256]===0){D.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Te={bits:q.lenbits},Se=u(d,q.lens,0,q.nlen,q.lencode,0,q.work,Te),q.lenbits=Te.bits,Se){D.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Te={bits:q.distbits},Se=u(h,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Te),q.distbits=Te.bits,Se){D.msg="invalid distances set",q.mode=30;break}if(q.mode=20,Z===6)break e;case 20:q.mode=21;case 21:if(6<=ae&&258<=B){D.next_out=X,D.avail_out=B,D.next_in=ne,D.avail_in=ae,q.hold=J,q.bits=ee,l(D,fe),X=D.next_out,ie=D.output,B=D.avail_out,ne=D.next_in,ue=D.input,ae=D.avail_in,J=q.hold,ee=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Ce=(se=q.lencode[J&(1<<q.lenbits)-1])>>>16&255,Pe=65535&se,!((Ne=se>>>24)<=ee);){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if(Ce&&(240&Ce)==0){for(Qe=Ne,Le=Ce,Ie=Pe;Ce=(se=q.lencode[Ie+((J&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Pe=65535&se,!(Qe+(Ne=se>>>24)<=ee);){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}J>>>=Qe,ee-=Qe,q.back+=Qe}if(J>>>=Ne,ee-=Ne,q.back+=Ne,q.length=Pe,Ce===0){q.mode=26;break}if(32&Ce){q.back=-1,q.mode=12;break}if(64&Ce){D.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Ce,q.mode=22;case 22:if(q.extra){for(de=q.extra;ee<de;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}q.length+=J&(1<<q.extra)-1,J>>>=q.extra,ee-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Ce=(se=q.distcode[J&(1<<q.distbits)-1])>>>16&255,Pe=65535&se,!((Ne=se>>>24)<=ee);){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if((240&Ce)==0){for(Qe=Ne,Le=Ce,Ie=Pe;Ce=(se=q.distcode[Ie+((J&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Pe=65535&se,!(Qe+(Ne=se>>>24)<=ee);){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}J>>>=Qe,ee-=Qe,q.back+=Qe}if(J>>>=Ne,ee-=Ne,q.back+=Ne,64&Ce){D.msg="invalid distance code",q.mode=30;break}q.offset=Pe,q.extra=15&Ce,q.mode=24;case 24:if(q.extra){for(de=q.extra;ee<de;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}q.offset+=J&(1<<q.extra)-1,J>>>=q.extra,ee-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){D.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(B===0)break e;if(ve=fe-B,q.offset>ve){if((ve=q.offset-ve)>q.whave&&q.sane){D.msg="invalid distance too far back",q.mode=30;break}De=ve>q.wnext?(ve-=q.wnext,q.wsize-ve):q.wnext-ve,ve>q.length&&(ve=q.length),Ae=q.window}else Ae=ie,De=X-q.offset,ve=q.length;for(B<ve&&(ve=B),B-=ve,q.length-=ve;ie[X++]=Ae[De++],--ve;);q.length===0&&(q.mode=21);break;case 26:if(B===0)break e;ie[X++]=q.length,B--,q.mode=21;break;case 27:if(q.wrap){for(;ee<32;){if(ae===0)break e;ae--,J|=ue[ne++]<<ee,ee+=8}if(fe-=B,D.total_out+=fe,q.total+=fe,fe&&(D.adler=q.check=q.flags?o(q.check,ie,fe,X-fe):s(q.check,ie,fe,X-fe)),fe=B,(q.flags?J:w(J))!==q.check){D.msg="incorrect data check",q.mode=30;break}ee=J=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;ee<32;){if(ae===0)break e;ae--,J+=ue[ne++]<<ee,ee+=8}if(J!==(4294967295&q.total)){D.msg="incorrect length check",q.mode=30;break}ee=J=0}q.mode=29;case 29:Se=1;break e;case 30:Se=-3;break e;case 31:return-4;case 32:default:return y}return D.next_out=X,D.avail_out=B,D.next_in=ne,D.avail_in=ae,q.hold=J,q.bits=ee,(q.wsize||fe!==D.avail_out&&q.mode<30&&(q.mode<27||Z!==4))&&G(D,D.output,D.next_out,fe-D.avail_out)?(q.mode=31,-4):(te-=D.avail_in,fe-=D.avail_out,D.total_in+=te,D.total_out+=fe,q.total+=fe,q.wrap&&fe&&(D.adler=q.check=q.flags?o(q.check,ie,fe,D.next_out-fe):s(q.check,ie,fe,D.next_out-fe)),D.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(te==0&&fe===0||Z===4)&&Se===m&&(Se=-5),Se)},a.inflateEnd=function(D){if(!D||!D.state)return y;var Z=D.state;return Z.window&&(Z.window=null),D.state=null,m},a.inflateGetHeader=function(D,Z){var q;return D&&D.state?(2&(q=D.state).wrap)==0?y:((q.head=Z).done=!1,m):y},a.inflateSetDictionary=function(D,Z){var q,ue=Z.length;return D&&D.state?(q=D.state).wrap!==0&&q.mode!==11?y:q.mode===11&&s(1,Z,ue,0)!==q.check?-3:G(D,Z,ue,ue)?(q.mode=31,-4):(q.havedict=1,m):y},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,m,y,v,b,x,w){var S,E,C,k,I,R,j,F,$,G=w.bits,D=0,Z=0,q=0,ue=0,ie=0,ne=0,X=0,ae=0,B=0,J=0,ee=null,te=0,fe=new i.Buf16(16),ve=new i.Buf16(16),De=null,Ae=0;for(D=0;D<=15;D++)fe[D]=0;for(Z=0;Z<y;Z++)fe[h[m+Z]]++;for(ie=G,ue=15;1<=ue&&fe[ue]===0;ue--);if(ue<ie&&(ie=ue),ue===0)return v[b++]=20971520,v[b++]=20971520,w.bits=1,0;for(q=1;q<ue&&fe[q]===0;q++);for(ie<q&&(ie=q),D=ae=1;D<=15;D++)if(ae<<=1,(ae-=fe[D])<0)return-1;if(0<ae&&(d===0||ue!==1))return-1;for(ve[1]=0,D=1;D<15;D++)ve[D+1]=ve[D]+fe[D];for(Z=0;Z<y;Z++)h[m+Z]!==0&&(x[ve[h[m+Z]]++]=Z);if(R=d===0?(ee=De=x,19):d===1?(ee=s,te-=257,De=o,Ae-=257,256):(ee=l,De=u,-1),D=q,I=b,X=Z=J=0,C=-1,k=(B=1<<(ne=ie))-1,d===1&&852<B||d===2&&592<B)return 1;for(;;){for(j=D-X,$=x[Z]<R?(F=0,x[Z]):x[Z]>R?(F=De[Ae+x[Z]],ee[te+x[Z]]):(F=96,0),S=1<<D-X,q=E=1<<ne;v[I+(J>>X)+(E-=S)]=j<<24|F<<16|$|0,E!==0;);for(S=1<<D-1;J&S;)S>>=1;if(S!==0?(J&=S-1,J+=S):J=0,Z++,--fe[D]==0){if(D===ue)break;D=h[m+x[Z]]}if(ie<D&&(J&k)!==C){for(X===0&&(X=ie),I+=q,ae=1<<(ne=D-X);ne+X<ue&&!((ae-=fe[ne+X])<=0);)ne++,ae<<=1;if(B+=1<<ne,d===1&&852<B||d===2&&592<B)return 1;v[C=J&k]=ie<<24|ne<<16|I-b|0}}return J!==0&&(v[I+J]=D-X<<24|64<<16|0),w.bits=ie,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),s=0,o=1;function l(se){for(var Q=se.length;0<=--Q;)se[Q]=0}var u=0,d=29,h=256,m=h+1+d,y=30,v=19,b=2*m+1,x=15,w=16,S=7,E=256,C=16,k=17,I=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(m+2));l(G);var D=new Array(2*y);l(D);var Z=new Array(512);l(Z);var q=new Array(256);l(q);var ue=new Array(d);l(ue);var ie,ne,X,ae=new Array(y);function B(se,Q,xe,Fe,Ee){this.static_tree=se,this.extra_bits=Q,this.extra_base=xe,this.elems=Fe,this.max_length=Ee,this.has_stree=se&&se.length}function J(se,Q){this.dyn_tree=se,this.max_code=0,this.stat_desc=Q}function ee(se){return se<256?Z[se]:Z[256+(se>>>7)]}function te(se,Q){se.pending_buf[se.pending++]=255&Q,se.pending_buf[se.pending++]=Q>>>8&255}function fe(se,Q,xe){se.bi_valid>w-xe?(se.bi_buf|=Q<<se.bi_valid&65535,te(se,se.bi_buf),se.bi_buf=Q>>w-se.bi_valid,se.bi_valid+=xe-w):(se.bi_buf|=Q<<se.bi_valid&65535,se.bi_valid+=xe)}function ve(se,Q,xe){fe(se,xe[2*Q],xe[2*Q+1])}function De(se,Q){for(var xe=0;xe|=1&se,se>>>=1,xe<<=1,0<--Q;);return xe>>>1}function Ae(se,Q,xe){var Fe,Ee,Ge=new Array(x+1),Nt=0;for(Fe=1;Fe<=x;Fe++)Ge[Fe]=Nt=Nt+xe[Fe-1]<<1;for(Ee=0;Ee<=Q;Ee++){var it=se[2*Ee+1];it!==0&&(se[2*Ee]=De(Ge[it]++,it))}}function Ne(se){var Q;for(Q=0;Q<m;Q++)se.dyn_ltree[2*Q]=0;for(Q=0;Q<y;Q++)se.dyn_dtree[2*Q]=0;for(Q=0;Q<v;Q++)se.bl_tree[2*Q]=0;se.dyn_ltree[2*E]=1,se.opt_len=se.static_len=0,se.last_lit=se.matches=0}function Ce(se){8<se.bi_valid?te(se,se.bi_buf):0<se.bi_valid&&(se.pending_buf[se.pending++]=se.bi_buf),se.bi_buf=0,se.bi_valid=0}function Pe(se,Q,xe,Fe){var Ee=2*Q,Ge=2*xe;return se[Ee]<se[Ge]||se[Ee]===se[Ge]&&Fe[Q]<=Fe[xe]}function Qe(se,Q,xe){for(var Fe=se.heap[xe],Ee=xe<<1;Ee<=se.heap_len&&(Ee<se.heap_len&&Pe(Q,se.heap[Ee+1],se.heap[Ee],se.depth)&&Ee++,!Pe(Q,Fe,se.heap[Ee],se.depth));)se.heap[xe]=se.heap[Ee],xe=Ee,Ee<<=1;se.heap[xe]=Fe}function Le(se,Q,xe){var Fe,Ee,Ge,Nt,it=0;if(se.last_lit!==0)for(;Fe=se.pending_buf[se.d_buf+2*it]<<8|se.pending_buf[se.d_buf+2*it+1],Ee=se.pending_buf[se.l_buf+it],it++,Fe===0?ve(se,Ee,Q):(ve(se,(Ge=q[Ee])+h+1,Q),(Nt=R[Ge])!==0&&fe(se,Ee-=ue[Ge],Nt),ve(se,Ge=ee(--Fe),xe),(Nt=j[Ge])!==0&&fe(se,Fe-=ae[Ge],Nt)),it<se.last_lit;);ve(se,E,Q)}function Ie(se,Q){var xe,Fe,Ee,Ge=Q.dyn_tree,Nt=Q.stat_desc.static_tree,it=Q.stat_desc.has_stree,St=Q.stat_desc.elems,Ft=-1;for(se.heap_len=0,se.heap_max=b,xe=0;xe<St;xe++)Ge[2*xe]!==0?(se.heap[++se.heap_len]=Ft=xe,se.depth[xe]=0):Ge[2*xe+1]=0;for(;se.heap_len<2;)Ge[2*(Ee=se.heap[++se.heap_len]=Ft<2?++Ft:0)]=1,se.depth[Ee]=0,se.opt_len--,it&&(se.static_len-=Nt[2*Ee+1]);for(Q.max_code=Ft,xe=se.heap_len>>1;1<=xe;xe--)Qe(se,Ge,xe);for(Ee=St;xe=se.heap[1],se.heap[1]=se.heap[se.heap_len--],Qe(se,Ge,1),Fe=se.heap[1],se.heap[--se.heap_max]=xe,se.heap[--se.heap_max]=Fe,Ge[2*Ee]=Ge[2*xe]+Ge[2*Fe],se.depth[Ee]=(se.depth[xe]>=se.depth[Fe]?se.depth[xe]:se.depth[Fe])+1,Ge[2*xe+1]=Ge[2*Fe+1]=Ee,se.heap[1]=Ee++,Qe(se,Ge,1),2<=se.heap_len;);se.heap[--se.heap_max]=se.heap[1],function(Dt,Zt){var ye,O,K,he,je,be,ke=Zt.dyn_tree,le=Zt.max_code,ft=Zt.stat_desc.static_tree,vt=Zt.stat_desc.has_stree,P=Zt.stat_desc.extra_bits,Be=Zt.stat_desc.extra_base,nt=Zt.stat_desc.max_length,ge=0;for(he=0;he<=x;he++)Dt.bl_count[he]=0;for(ke[2*Dt.heap[Dt.heap_max]+1]=0,ye=Dt.heap_max+1;ye<b;ye++)nt<(he=ke[2*ke[2*(O=Dt.heap[ye])+1]+1]+1)&&(he=nt,ge++),ke[2*O+1]=he,le<O||(Dt.bl_count[he]++,je=0,Be<=O&&(je=P[O-Be]),be=ke[2*O],Dt.opt_len+=be*(he+je),vt&&(Dt.static_len+=be*(ft[2*O+1]+je)));if(ge!==0){do{for(he=nt-1;Dt.bl_count[he]===0;)he--;Dt.bl_count[he]--,Dt.bl_count[he+1]+=2,Dt.bl_count[nt]--,ge-=2}while(0<ge);for(he=nt;he!==0;he--)for(O=Dt.bl_count[he];O!==0;)le<(K=Dt.heap[--ye])||(ke[2*K+1]!==he&&(Dt.opt_len+=(he-ke[2*K+1])*ke[2*K],ke[2*K+1]=he),O--)}}(se,Q),Ae(Ge,Ft,se.bl_count)}function z(se,Q,xe){var Fe,Ee,Ge=-1,Nt=Q[1],it=0,St=7,Ft=4;for(Nt===0&&(St=138,Ft=3),Q[2*(xe+1)+1]=65535,Fe=0;Fe<=xe;Fe++)Ee=Nt,Nt=Q[2*(Fe+1)+1],++it<St&&Ee===Nt||(it<Ft?se.bl_tree[2*Ee]+=it:Ee!==0?(Ee!==Ge&&se.bl_tree[2*Ee]++,se.bl_tree[2*C]++):it<=10?se.bl_tree[2*k]++:se.bl_tree[2*I]++,Ge=Ee,Ft=(it=0)===Nt?(St=138,3):Ee===Nt?(St=6,3):(St=7,4))}function Se(se,Q,xe){var Fe,Ee,Ge=-1,Nt=Q[1],it=0,St=7,Ft=4;for(Nt===0&&(St=138,Ft=3),Fe=0;Fe<=xe;Fe++)if(Ee=Nt,Nt=Q[2*(Fe+1)+1],!(++it<St&&Ee===Nt)){if(it<Ft)for(;ve(se,Ee,se.bl_tree),--it!=0;);else Ee!==0?(Ee!==Ge&&(ve(se,Ee,se.bl_tree),it--),ve(se,C,se.bl_tree),fe(se,it-3,2)):it<=10?(ve(se,k,se.bl_tree),fe(se,it-3,3)):(ve(se,I,se.bl_tree),fe(se,it-11,7));Ge=Ee,Ft=(it=0)===Nt?(St=138,3):Ee===Nt?(St=6,3):(St=7,4)}}l(ae);var Te=!1;function de(se,Q,xe,Fe){fe(se,(u<<1)+(Fe?1:0),3),function(Ee,Ge,Nt,it){Ce(Ee),te(Ee,Nt),te(Ee,~Nt),i.arraySet(Ee.pending_buf,Ee.window,Ge,Nt,Ee.pending),Ee.pending+=Nt}(se,Q,xe)}a._tr_init=function(se){Te||(function(){var Q,xe,Fe,Ee,Ge,Nt=new Array(x+1);for(Ee=Fe=0;Ee<d-1;Ee++)for(ue[Ee]=Fe,Q=0;Q<1<<R[Ee];Q++)q[Fe++]=Ee;for(q[Fe-1]=Ee,Ee=Ge=0;Ee<16;Ee++)for(ae[Ee]=Ge,Q=0;Q<1<<j[Ee];Q++)Z[Ge++]=Ee;for(Ge>>=7;Ee<y;Ee++)for(ae[Ee]=Ge<<7,Q=0;Q<1<<j[Ee]-7;Q++)Z[256+Ge++]=Ee;for(xe=0;xe<=x;xe++)Nt[xe]=0;for(Q=0;Q<=143;)G[2*Q+1]=8,Q++,Nt[8]++;for(;Q<=255;)G[2*Q+1]=9,Q++,Nt[9]++;for(;Q<=279;)G[2*Q+1]=7,Q++,Nt[7]++;for(;Q<=287;)G[2*Q+1]=8,Q++,Nt[8]++;for(Ae(G,m+1,Nt),Q=0;Q<y;Q++)D[2*Q+1]=5,D[2*Q]=De(Q,5);ie=new B(G,R,h+1,m,x),ne=new B(D,j,0,y,x),X=new B(new Array(0),F,0,v,S)}(),Te=!0),se.l_desc=new J(se.dyn_ltree,ie),se.d_desc=new J(se.dyn_dtree,ne),se.bl_desc=new J(se.bl_tree,X),se.bi_buf=0,se.bi_valid=0,Ne(se)},a._tr_stored_block=de,a._tr_flush_block=function(se,Q,xe,Fe){var Ee,Ge,Nt=0;0<se.level?(se.strm.data_type===2&&(se.strm.data_type=function(it){var St,Ft=4093624447;for(St=0;St<=31;St++,Ft>>>=1)if(1&Ft&&it.dyn_ltree[2*St]!==0)return s;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return o;for(St=32;St<h;St++)if(it.dyn_ltree[2*St]!==0)return o;return s}(se)),Ie(se,se.l_desc),Ie(se,se.d_desc),Nt=function(it){var St;for(z(it,it.dyn_ltree,it.l_desc.max_code),z(it,it.dyn_dtree,it.d_desc.max_code),Ie(it,it.bl_desc),St=v-1;3<=St&&it.bl_tree[2*$[St]+1]===0;St--);return it.opt_len+=3*(St+1)+5+5+4,St}(se),Ee=se.opt_len+3+7>>>3,(Ge=se.static_len+3+7>>>3)<=Ee&&(Ee=Ge)):Ee=Ge=xe+5,xe+4<=Ee&&Q!==-1?de(se,Q,xe,Fe):se.strategy===4||Ge===Ee?(fe(se,2+(Fe?1:0),3),Le(se,G,D)):(fe(se,4+(Fe?1:0),3),function(it,St,Ft,Dt){var Zt;for(fe(it,St-257,5),fe(it,Ft-1,5),fe(it,Dt-4,4),Zt=0;Zt<Dt;Zt++)fe(it,it.bl_tree[2*$[Zt]+1],3);Se(it,it.dyn_ltree,St-1),Se(it,it.dyn_dtree,Ft-1)}(se,se.l_desc.max_code+1,se.d_desc.max_code+1,Nt+1),Le(se,se.dyn_ltree,se.dyn_dtree)),Ne(se),Fe&&Ce(se)},a._tr_tally=function(se,Q,xe){return se.pending_buf[se.d_buf+2*se.last_lit]=Q>>>8&255,se.pending_buf[se.d_buf+2*se.last_lit+1]=255&Q,se.pending_buf[se.l_buf+se.last_lit]=255&xe,se.last_lit++,Q===0?se.dyn_ltree[2*xe]++:(se.matches++,Q--,se.dyn_ltree[2*(q[xe]+h+1)]++,se.dyn_dtree[2*ee(Q)]++),se.last_lit===se.lit_bufsize-1},a._tr_align=function(se){fe(se,2,3),ve(se,E,G),function(Q){Q.bi_valid===16?(te(Q,Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0):8<=Q.bi_valid&&(Q.pending_buf[Q.pending++]=255&Q.bi_buf,Q.bi_buf>>=8,Q.bi_valid-=8)}(se)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(s,o){if(!s.setImmediate){var l,u,d,h,m=1,y={},v=!1,b=s.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(s);x=x&&x.setTimeout?x:s,l={}.toString.call(s.process)==="[object process]"?function(C){ta.nextTick(function(){S(C)})}:function(){if(s.postMessage&&!s.importScripts){var C=!0,k=s.onmessage;return s.onmessage=function(){C=!1},s.postMessage("","*"),s.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(C){s.postMessage(h+C,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){d.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){S(C),k.onreadystatechange=null,u.removeChild(k),k=null},u.appendChild(k)}):function(C){setTimeout(S,0,C)},x.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),I=0;I<k.length;I++)k[I]=arguments[I+1];var R={callback:C,args:k};return y[m]=R,l(m),m++},x.clearImmediate=w}function w(C){delete y[C]}function S(C){if(v)setTimeout(S,0,C);else{var k=y[C];if(k){v=!0;try{(function(I){var R=I.callback,j=I.args;switch(j.length){case 0:R();break;case 1:R(j[0]);break;case 2:R(j[0],j[1]);break;case 3:R(j[0],j[1],j[2]);break;default:R.apply(o,j)}})(k)}finally{w(C),v=!1}}}}function E(C){C.source===s&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Ed<"u"?Ed:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(EE)),EE.exports}var Cre=Ere();const j5=ui(Cre),Pg=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},rr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Qo=(...e)=>rr(e.map(t=>t.trim()).filter(Boolean).join("/")),R0=e=>{const t=rr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},ga=e=>{const t=rr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Fg=(e,t)=>rr(e==="/"?`/${t}`:`${e}/${t}`);var CE,i4;function kre(){if(i4)return CE;i4=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof ta>"u"||typeof ta.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof r!="function"&&(a=r,r=null,o=new this.Promise(function(E,C){i=E,s=C})),a=a||{};var l=!1,u=null,d=null,h=null,m=this,y=function(E,C,k){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),l||(o?C?s(C):i(k):typeof r=="function"&&r(C,k),l=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},v=function(E){if(l)return y(E);u&&(clearTimeout(u),u=null),m.domainReentrant&&E&&(m.domains[t]=ta.domain);var C=a.maxExecutionTime||m.maxExecutionTime;if(C&&(h=setTimeout(function(){m.queues[t]&&y(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(I,R){k||(k=!0,y(E,I,R))})}catch(I){k||(k=!0,y(E,I))}}else m._promiseTry(function(){return n()}).then(function(I){y(E,void 0,I)},function(I){y(E,I)})};m.domainReentrant&&ta.domain&&(v=ta.domain.bind(v));var b=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],v(!0);else if(m.domainReentrant&&ta.domain&&ta.domain===m.domains[t])v(!1);else if(m.queues[t].length>=b)y(!1,new Error("Too many pending tasks in queue "+t));else{var x=function(){v(!0)};a.skipQueue?m.queues[t].unshift(x):m.queues[t].push(x);var w=a.timeout||m.timeout;w&&(u=setTimeout(function(){u=null,y(!1,new Error("async-lock timed out in queue "+t))},w))}var S=a.maxOccupationTime||m.maxOccupationTime;if(S&&(d=setTimeout(function(){m.queues[t]&&y(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),o)return o},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,s=function(l,u){return function(d){i.acquire(l,u,d,a)}},o=t.reduceRight(function(l,u){return s(u,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,u){o.length===1?o(function(d,h){d?u(d):l(h)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},CE=e,CE}var kE,s4;function Tre(){return s4||(s4=1,kE=kre()),kE}var Are=Tre();const Lg=ui(Are);var sv={exports:{}},o4;function Nre(){return o4||(o4=1,typeof Object.create=="function"?sv.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:sv.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),sv.exports}var TE,l4;function Rre(){if(l4)return TE;l4=1;var e=xT().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,s=n.length,o=this._len,l=0;l<s;){for(var u=o%i,d=Math.min(s-l,i-u),h=0;h<d;h++)a[u+h]=n[l+h];o+=d,l+=d,o%i===0&&this._update(a)}return this._len+=s,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,s=(a-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},TE=t,TE}var AE,c4;function Ire(){if(c4)return AE;c4=1;var e=Nre(),t=Rre(),n=xT().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(d){return d<<1|d>>>31}function o(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function u(d,h,m,y){return d===0?h&m|~h&y:d===2?h&m|h&y|m&y:h^m^y}return i.prototype._update=function(d){for(var h=this._w,m=this._a|0,y=this._b|0,v=this._c|0,b=this._d|0,x=this._e|0,w=0;w<16;++w)h[w]=d.readInt32BE(w*4);for(;w<80;++w)h[w]=s(h[w-3]^h[w-8]^h[w-14]^h[w-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=o(m)+u(E,y,v,b)+x+h[S]+r[E]|0;x=b,b=v,v=l(y),y=m,m=C}this._a=m+this._a|0,this._b=y+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=x+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},AE=i,AE}var jre=Ire();const O5=ui(jre);var NE,u4;function Ore(){if(u4)return NE;u4=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var s="",o=0,l=-1,u=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||u===1))if(l!==h-1&&u===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=h,u=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=h,u=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+a.slice(l+1,h):s=a.slice(l+1,h),o=h-l-1;l=h,u=0}else d===46&&u!==-1?++u:u=-1}return s}function n(a,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+a+o:o}var r={resolve:function(){for(var i="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var u;l>=0?u=arguments[l]:(o===void 0&&(o=ta.cwd()),u=o),e(u),u.length!==0&&(i=u+"/"+i,s=u.charCodeAt(0)===47)}return i=t(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var s=i.charCodeAt(0)===47,o=i.charCodeAt(i.length-1)===47;return i=t(i,!s),i.length===0&&!s&&(i="."),i.length>0&&o&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":r.normalize(i)},relative:function(i,s){if(e(i),e(s),i===s||(i=r.resolve(i),s=r.resolve(s),i===s))return"";for(var o=1;o<i.length&&i.charCodeAt(o)===47;++o);for(var l=i.length,u=l-o,d=1;d<s.length&&s.charCodeAt(d)===47;++d);for(var h=s.length,m=h-d,y=u<m?u:m,v=-1,b=0;b<=y;++b){if(b===y){if(m>y){if(s.charCodeAt(d+b)===47)return s.slice(d+b+1);if(b===0)return s.slice(d+b)}else u>y&&(i.charCodeAt(o+b)===47?v=b:b===0&&(v=0));break}var x=i.charCodeAt(o+b),w=s.charCodeAt(d+b);if(x!==w)break;x===47&&(v=b)}var S="";for(b=o+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+s.slice(d+v):(d+=v,s.charCodeAt(d)===47&&++d,s.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var s=i.charCodeAt(0),o=s===47,l=-1,u=!0,d=i.length-1;d>=1;--d)if(s=i.charCodeAt(d),s===47){if(!u){l=d;break}}else u=!1;return l===-1?o?"/":".":o&&l===1?"//":i.slice(0,l)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(i);var o=0,l=-1,u=!0,d;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var h=s.length-1,m=-1;for(d=i.length-1;d>=0;--d){var y=i.charCodeAt(d);if(y===47){if(!u){o=d+1;break}}else m===-1&&(u=!1,m=d+1),h>=0&&(y===s.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=m))}return o===l?l=m:l===-1&&(l=i.length),i.slice(o,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!u){o=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":i.slice(o,l)}},extname:function(i){e(i);for(var s=-1,o=0,l=-1,u=!0,d=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!u){o=h+1;break}continue}l===-1&&(u=!1,l=h+1),m===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===o+1?"":i.slice(s,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var o=i.charCodeAt(0),l=o===47,u;l?(s.root="/",u=1):u=0;for(var d=-1,h=0,m=-1,y=!0,v=i.length-1,b=0;v>=u;--v){if(o=i.charCodeAt(v),o===47){if(!y){h=v+1;break}continue}m===-1&&(y=!1,m=v+1),o===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||m===-1||b===0||b===1&&d===m-1&&d===h+1?m!==-1&&(h===0&&l?s.base=s.name=i.slice(1,m):s.base=s.name=i.slice(h,m)):(h===0&&l?(s.name=i.slice(1,d),s.base=i.slice(1,m)):(s.name=i.slice(h,d),s.base=i.slice(h,m)),s.ext=i.slice(d,m)),h>0?s.dir=i.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,NE=r,NE}var Pt=Ore(),RE={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var d4;function Dre(){return d4||(d4=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var j=0,F=new Array(256),$=0;$!=256;++$)j=$,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,F[$]=j;return typeof Int32Array<"u"?new Int32Array(F):F}var r=n();function a(j){var F=0,$=0,G=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(G=0;G!=256;++G)D[G]=j[G];for(G=0;G!=256;++G)for($=j[G],F=256+G;F<4096;F+=256)$=D[F]=$>>>8^j[$&255];var Z=[];for(G=1;G!=16;++G)Z[G-1]=typeof Int32Array<"u"?D.subarray(G*256,G*256+256):D.slice(G*256,G*256+256);return Z}var i=a(r),s=i[0],o=i[1],l=i[2],u=i[3],d=i[4],h=i[5],m=i[6],y=i[7],v=i[8],b=i[9],x=i[10],w=i[11],S=i[12],E=i[13],C=i[14];function k(j,F){for(var $=F^-1,G=0,D=j.length;G<D;)$=$>>>8^r[($^j.charCodeAt(G++))&255];return~$}function I(j,F){for(var $=F^-1,G=j.length-15,D=0;D<G;)$=C[j[D++]^$&255]^E[j[D++]^$>>8&255]^S[j[D++]^$>>16&255]^w[j[D++]^$>>>24]^x[j[D++]]^b[j[D++]]^v[j[D++]]^y[j[D++]]^m[j[D++]]^h[j[D++]]^d[j[D++]]^u[j[D++]]^l[j[D++]]^o[j[D++]]^s[j[D++]]^r[j[D++]];for(G+=15;D<G;)$=$>>>8^r[($^j[D++])&255];return~$}function R(j,F){for(var $=F^-1,G=0,D=j.length,Z=0,q=0;G<D;)Z=j.charCodeAt(G++),Z<128?$=$>>>8^r[($^Z)&255]:Z<2048?($=$>>>8^r[($^(192|Z>>6&31))&255],$=$>>>8^r[($^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,q=j.charCodeAt(G++)&1023,$=$>>>8^r[($^(240|Z>>8&7))&255],$=$>>>8^r[($^(128|Z>>2&63))&255],$=$>>>8^r[($^(128|q>>6&15|(Z&3)<<4))&255],$=$>>>8^r[($^(128|q&63))&255]):($=$>>>8^r[($^(224|Z>>12&15))&255],$=$>>>8^r[($^(128|Z>>6&63))&255],$=$>>>8^r[($^(128|Z&63))&255]);return~$}t.table=r,t.bstr=k,t.buf=I,t.str=R})}(RE)),RE}var Mre=Dre();const Pre=ui(Mre);var IE={},f4;function Mu(){return f4||(f4=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,s){return Object.prototype.hasOwnProperty.call(i,s)}e.assign=function(i){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var o=s.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(i[l]=o[l])}}return i},e.shrinkBuf=function(i,s){return i.length===s?i:i.subarray?i.subarray(0,s):(i.length=s,i)};var r={arraySet:function(i,s,o,l,u){if(s.subarray&&i.subarray){i.set(s.subarray(o,o+l),u);return}for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){var s,o,l,u,d,h;for(l=0,s=0,o=i.length;s<o;s++)l+=i[s].length;for(h=new Uint8Array(l),u=0,s=0,o=i.length;s<o;s++)d=i[s],h.set(d,u),u+=d.length;return h}},a={arraySet:function(i,s,o,l,u){for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(IE)),IE}var ah={},Vs={},yd={},h4;function Fre(){if(h4)return yd;h4=1;var e=Mu(),t=4,n=0,r=1,a=2;function i(O){for(var K=O.length;--K>=0;)O[K]=0}var s=0,o=1,l=2,u=3,d=258,h=29,m=256,y=m+1+h,v=30,b=19,x=2*y+1,w=15,S=16,E=7,C=256,k=16,I=17,R=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=512,Z=new Array((y+2)*2);i(Z);var q=new Array(v*2);i(q);var ue=new Array(D);i(ue);var ie=new Array(d-u+1);i(ie);var ne=new Array(h);i(ne);var X=new Array(v);i(X);function ae(O,K,he,je,be){this.static_tree=O,this.extra_bits=K,this.extra_base=he,this.elems=je,this.max_length=be,this.has_stree=O&&O.length}var B,J,ee;function te(O,K){this.dyn_tree=O,this.max_code=0,this.stat_desc=K}function fe(O){return O<256?ue[O]:ue[256+(O>>>7)]}function ve(O,K){O.pending_buf[O.pending++]=K&255,O.pending_buf[O.pending++]=K>>>8&255}function De(O,K,he){O.bi_valid>S-he?(O.bi_buf|=K<<O.bi_valid&65535,ve(O,O.bi_buf),O.bi_buf=K>>S-O.bi_valid,O.bi_valid+=he-S):(O.bi_buf|=K<<O.bi_valid&65535,O.bi_valid+=he)}function Ae(O,K,he){De(O,he[K*2],he[K*2+1])}function Ne(O,K){var he=0;do he|=O&1,O>>>=1,he<<=1;while(--K>0);return he>>>1}function Ce(O){O.bi_valid===16?(ve(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):O.bi_valid>=8&&(O.pending_buf[O.pending++]=O.bi_buf&255,O.bi_buf>>=8,O.bi_valid-=8)}function Pe(O,K){var he=K.dyn_tree,je=K.max_code,be=K.stat_desc.static_tree,ke=K.stat_desc.has_stree,le=K.stat_desc.extra_bits,ft=K.stat_desc.extra_base,vt=K.stat_desc.max_length,P,Be,nt,ge,Oe,Ke,Ot=0;for(ge=0;ge<=w;ge++)O.bl_count[ge]=0;for(he[O.heap[O.heap_max]*2+1]=0,P=O.heap_max+1;P<x;P++)Be=O.heap[P],ge=he[he[Be*2+1]*2+1]+1,ge>vt&&(ge=vt,Ot++),he[Be*2+1]=ge,!(Be>je)&&(O.bl_count[ge]++,Oe=0,Be>=ft&&(Oe=le[Be-ft]),Ke=he[Be*2],O.opt_len+=Ke*(ge+Oe),ke&&(O.static_len+=Ke*(be[Be*2+1]+Oe)));if(Ot!==0){do{for(ge=vt-1;O.bl_count[ge]===0;)ge--;O.bl_count[ge]--,O.bl_count[ge+1]+=2,O.bl_count[vt]--,Ot-=2}while(Ot>0);for(ge=vt;ge!==0;ge--)for(Be=O.bl_count[ge];Be!==0;)nt=O.heap[--P],!(nt>je)&&(he[nt*2+1]!==ge&&(O.opt_len+=(ge-he[nt*2+1])*he[nt*2],he[nt*2+1]=ge),Be--)}}function Qe(O,K,he){var je=new Array(w+1),be=0,ke,le;for(ke=1;ke<=w;ke++)je[ke]=be=be+he[ke-1]<<1;for(le=0;le<=K;le++){var ft=O[le*2+1];ft!==0&&(O[le*2]=Ne(je[ft]++,ft))}}function Le(){var O,K,he,je,be,ke=new Array(w+1);for(he=0,je=0;je<h-1;je++)for(ne[je]=he,O=0;O<1<<j[je];O++)ie[he++]=je;for(ie[he-1]=je,be=0,je=0;je<16;je++)for(X[je]=be,O=0;O<1<<F[je];O++)ue[be++]=je;for(be>>=7;je<v;je++)for(X[je]=be<<7,O=0;O<1<<F[je]-7;O++)ue[256+be++]=je;for(K=0;K<=w;K++)ke[K]=0;for(O=0;O<=143;)Z[O*2+1]=8,O++,ke[8]++;for(;O<=255;)Z[O*2+1]=9,O++,ke[9]++;for(;O<=279;)Z[O*2+1]=7,O++,ke[7]++;for(;O<=287;)Z[O*2+1]=8,O++,ke[8]++;for(Qe(Z,y+1,ke),O=0;O<v;O++)q[O*2+1]=5,q[O*2]=Ne(O,5);B=new ae(Z,j,m+1,y,w),J=new ae(q,F,0,v,w),ee=new ae(new Array(0),$,0,b,E)}function Ie(O){var K;for(K=0;K<y;K++)O.dyn_ltree[K*2]=0;for(K=0;K<v;K++)O.dyn_dtree[K*2]=0;for(K=0;K<b;K++)O.bl_tree[K*2]=0;O.dyn_ltree[C*2]=1,O.opt_len=O.static_len=0,O.last_lit=O.matches=0}function z(O){O.bi_valid>8?ve(O,O.bi_buf):O.bi_valid>0&&(O.pending_buf[O.pending++]=O.bi_buf),O.bi_buf=0,O.bi_valid=0}function Se(O,K,he,je){z(O),ve(O,he),ve(O,~he),e.arraySet(O.pending_buf,O.window,K,he,O.pending),O.pending+=he}function Te(O,K,he,je){var be=K*2,ke=he*2;return O[be]<O[ke]||O[be]===O[ke]&&je[K]<=je[he]}function de(O,K,he){for(var je=O.heap[he],be=he<<1;be<=O.heap_len&&(be<O.heap_len&&Te(K,O.heap[be+1],O.heap[be],O.depth)&&be++,!Te(K,je,O.heap[be],O.depth));)O.heap[he]=O.heap[be],he=be,be<<=1;O.heap[he]=je}function se(O,K,he){var je,be,ke=0,le,ft;if(O.last_lit!==0)do je=O.pending_buf[O.d_buf+ke*2]<<8|O.pending_buf[O.d_buf+ke*2+1],be=O.pending_buf[O.l_buf+ke],ke++,je===0?Ae(O,be,K):(le=ie[be],Ae(O,le+m+1,K),ft=j[le],ft!==0&&(be-=ne[le],De(O,be,ft)),je--,le=fe(je),Ae(O,le,he),ft=F[le],ft!==0&&(je-=X[le],De(O,je,ft)));while(ke<O.last_lit);Ae(O,C,K)}function Q(O,K){var he=K.dyn_tree,je=K.stat_desc.static_tree,be=K.stat_desc.has_stree,ke=K.stat_desc.elems,le,ft,vt=-1,P;for(O.heap_len=0,O.heap_max=x,le=0;le<ke;le++)he[le*2]!==0?(O.heap[++O.heap_len]=vt=le,O.depth[le]=0):he[le*2+1]=0;for(;O.heap_len<2;)P=O.heap[++O.heap_len]=vt<2?++vt:0,he[P*2]=1,O.depth[P]=0,O.opt_len--,be&&(O.static_len-=je[P*2+1]);for(K.max_code=vt,le=O.heap_len>>1;le>=1;le--)de(O,he,le);P=ke;do le=O.heap[1],O.heap[1]=O.heap[O.heap_len--],de(O,he,1),ft=O.heap[1],O.heap[--O.heap_max]=le,O.heap[--O.heap_max]=ft,he[P*2]=he[le*2]+he[ft*2],O.depth[P]=(O.depth[le]>=O.depth[ft]?O.depth[le]:O.depth[ft])+1,he[le*2+1]=he[ft*2+1]=P,O.heap[1]=P++,de(O,he,1);while(O.heap_len>=2);O.heap[--O.heap_max]=O.heap[1],Pe(O,K),Qe(he,vt,O.bl_count)}function xe(O,K,he){var je,be=-1,ke,le=K[0*2+1],ft=0,vt=7,P=4;for(le===0&&(vt=138,P=3),K[(he+1)*2+1]=65535,je=0;je<=he;je++)ke=le,le=K[(je+1)*2+1],!(++ft<vt&&ke===le)&&(ft<P?O.bl_tree[ke*2]+=ft:ke!==0?(ke!==be&&O.bl_tree[ke*2]++,O.bl_tree[k*2]++):ft<=10?O.bl_tree[I*2]++:O.bl_tree[R*2]++,ft=0,be=ke,le===0?(vt=138,P=3):ke===le?(vt=6,P=3):(vt=7,P=4))}function Fe(O,K,he){var je,be=-1,ke,le=K[0*2+1],ft=0,vt=7,P=4;for(le===0&&(vt=138,P=3),je=0;je<=he;je++)if(ke=le,le=K[(je+1)*2+1],!(++ft<vt&&ke===le)){if(ft<P)do Ae(O,ke,O.bl_tree);while(--ft!==0);else ke!==0?(ke!==be&&(Ae(O,ke,O.bl_tree),ft--),Ae(O,k,O.bl_tree),De(O,ft-3,2)):ft<=10?(Ae(O,I,O.bl_tree),De(O,ft-3,3)):(Ae(O,R,O.bl_tree),De(O,ft-11,7));ft=0,be=ke,le===0?(vt=138,P=3):ke===le?(vt=6,P=3):(vt=7,P=4)}}function Ee(O){var K;for(xe(O,O.dyn_ltree,O.l_desc.max_code),xe(O,O.dyn_dtree,O.d_desc.max_code),Q(O,O.bl_desc),K=b-1;K>=3&&O.bl_tree[G[K]*2+1]===0;K--);return O.opt_len+=3*(K+1)+5+5+4,K}function Ge(O,K,he,je){var be;for(De(O,K-257,5),De(O,he-1,5),De(O,je-4,4),be=0;be<je;be++)De(O,O.bl_tree[G[be]*2+1],3);Fe(O,O.dyn_ltree,K-1),Fe(O,O.dyn_dtree,he-1)}function Nt(O){var K=4093624447,he;for(he=0;he<=31;he++,K>>>=1)if(K&1&&O.dyn_ltree[he*2]!==0)return n;if(O.dyn_ltree[9*2]!==0||O.dyn_ltree[10*2]!==0||O.dyn_ltree[13*2]!==0)return r;for(he=32;he<m;he++)if(O.dyn_ltree[he*2]!==0)return r;return n}var it=!1;function St(O){it||(Le(),it=!0),O.l_desc=new te(O.dyn_ltree,B),O.d_desc=new te(O.dyn_dtree,J),O.bl_desc=new te(O.bl_tree,ee),O.bi_buf=0,O.bi_valid=0,Ie(O)}function Ft(O,K,he,je){De(O,(s<<1)+(je?1:0),3),Se(O,K,he)}function Dt(O){De(O,o<<1,3),Ae(O,C,Z),Ce(O)}function Zt(O,K,he,je){var be,ke,le=0;O.level>0?(O.strm.data_type===a&&(O.strm.data_type=Nt(O)),Q(O,O.l_desc),Q(O,O.d_desc),le=Ee(O),be=O.opt_len+3+7>>>3,ke=O.static_len+3+7>>>3,ke<=be&&(be=ke)):be=ke=he+5,he+4<=be&&K!==-1?Ft(O,K,he,je):O.strategy===t||ke===be?(De(O,(o<<1)+(je?1:0),3),se(O,Z,q)):(De(O,(l<<1)+(je?1:0),3),Ge(O,O.l_desc.max_code+1,O.d_desc.max_code+1,le+1),se(O,O.dyn_ltree,O.dyn_dtree)),Ie(O),je&&z(O)}function ye(O,K,he){return O.pending_buf[O.d_buf+O.last_lit*2]=K>>>8&255,O.pending_buf[O.d_buf+O.last_lit*2+1]=K&255,O.pending_buf[O.l_buf+O.last_lit]=he&255,O.last_lit++,K===0?O.dyn_ltree[he*2]++:(O.matches++,K--,O.dyn_ltree[(ie[he]+m+1)*2]++,O.dyn_dtree[fe(K)*2]++),O.last_lit===O.lit_bufsize-1}return yd._tr_init=St,yd._tr_stored_block=Ft,yd._tr_flush_block=Zt,yd._tr_tally=ye,yd._tr_align=Dt,yd}var jE,p4;function D5(){if(p4)return jE;p4=1;function e(t,n,r,a){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+n[a++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}return jE=e,jE}var OE,m4;function M5(){if(m4)return OE;m4=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,s){var o=t,l=s+i;r^=-1;for(var u=s;u<l;u++)r=r>>>8^o[(r^a[u])&255];return r^-1}return OE=n,OE}var DE,g4;function jT(){return g4||(g4=1,DE={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),DE}var y4;function Lre(){if(y4)return Vs;y4=1;var e=Mu(),t=Fre(),n=D5(),r=M5(),a=jT(),i=0,s=1,o=3,l=4,u=5,d=0,h=1,m=-2,y=-3,v=-5,b=-1,x=1,w=2,S=3,E=4,C=0,k=2,I=8,R=9,j=15,F=8,$=29,G=256,D=G+1+$,Z=30,q=19,ue=2*D+1,ie=15,ne=3,X=258,ae=X+ne+1,B=32,J=42,ee=69,te=73,fe=91,ve=103,De=113,Ae=666,Ne=1,Ce=2,Pe=3,Qe=4,Le=3;function Ie(P,Be){return P.msg=a[Be],Be}function z(P){return(P<<1)-(P>4?9:0)}function Se(P){for(var Be=P.length;--Be>=0;)P[Be]=0}function Te(P){var Be=P.state,nt=Be.pending;nt>P.avail_out&&(nt=P.avail_out),nt!==0&&(e.arraySet(P.output,Be.pending_buf,Be.pending_out,nt,P.next_out),P.next_out+=nt,Be.pending_out+=nt,P.total_out+=nt,P.avail_out-=nt,Be.pending-=nt,Be.pending===0&&(Be.pending_out=0))}function de(P,Be){t._tr_flush_block(P,P.block_start>=0?P.block_start:-1,P.strstart-P.block_start,Be),P.block_start=P.strstart,Te(P.strm)}function se(P,Be){P.pending_buf[P.pending++]=Be}function Q(P,Be){P.pending_buf[P.pending++]=Be>>>8&255,P.pending_buf[P.pending++]=Be&255}function xe(P,Be,nt,ge){var Oe=P.avail_in;return Oe>ge&&(Oe=ge),Oe===0?0:(P.avail_in-=Oe,e.arraySet(Be,P.input,P.next_in,Oe,nt),P.state.wrap===1?P.adler=n(P.adler,Be,Oe,nt):P.state.wrap===2&&(P.adler=r(P.adler,Be,Oe,nt)),P.next_in+=Oe,P.total_in+=Oe,Oe)}function Fe(P,Be){var nt=P.max_chain_length,ge=P.strstart,Oe,Ke,Ot=P.prev_length,me=P.nice_match,V=P.strstart>P.w_size-ae?P.strstart-(P.w_size-ae):0,H=P.window,W=P.w_mask,pe=P.prev,Re=P.strstart+X,He=H[ge+Ot-1],pt=H[ge+Ot];P.prev_length>=P.good_match&&(nt>>=2),me>P.lookahead&&(me=P.lookahead);do if(Oe=Be,!(H[Oe+Ot]!==pt||H[Oe+Ot-1]!==He||H[Oe]!==H[ge]||H[++Oe]!==H[ge+1])){ge+=2,Oe++;do;while(H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&H[++ge]===H[++Oe]&&ge<Re);if(Ke=X-(Re-ge),ge=Re-X,Ke>Ot){if(P.match_start=Be,Ot=Ke,Ke>=me)break;He=H[ge+Ot-1],pt=H[ge+Ot]}}while((Be=pe[Be&W])>V&&--nt!==0);return Ot<=P.lookahead?Ot:P.lookahead}function Ee(P){var Be=P.w_size,nt,ge,Oe,Ke,Ot;do{if(Ke=P.window_size-P.lookahead-P.strstart,P.strstart>=Be+(Be-ae)){e.arraySet(P.window,P.window,Be,Be,0),P.match_start-=Be,P.strstart-=Be,P.block_start-=Be,ge=P.hash_size,nt=ge;do Oe=P.head[--nt],P.head[nt]=Oe>=Be?Oe-Be:0;while(--ge);ge=Be,nt=ge;do Oe=P.prev[--nt],P.prev[nt]=Oe>=Be?Oe-Be:0;while(--ge);Ke+=Be}if(P.strm.avail_in===0)break;if(ge=xe(P.strm,P.window,P.strstart+P.lookahead,Ke),P.lookahead+=ge,P.lookahead+P.insert>=ne)for(Ot=P.strstart-P.insert,P.ins_h=P.window[Ot],P.ins_h=(P.ins_h<<P.hash_shift^P.window[Ot+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[Ot+ne-1])&P.hash_mask,P.prev[Ot&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=Ot,Ot++,P.insert--,!(P.lookahead+P.insert<ne)););}while(P.lookahead<ae&&P.strm.avail_in!==0)}function Ge(P,Be){var nt=65535;for(nt>P.pending_buf_size-5&&(nt=P.pending_buf_size-5);;){if(P.lookahead<=1){if(Ee(P),P.lookahead===0&&Be===i)return Ne;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var ge=P.block_start+nt;if((P.strstart===0||P.strstart>=ge)&&(P.lookahead=P.strstart-ge,P.strstart=ge,de(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-ae&&(de(P,!1),P.strm.avail_out===0))return Ne}return P.insert=0,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):(P.strstart>P.block_start&&(de(P,!1),P.strm.avail_out===0),Ne)}function Nt(P,Be){for(var nt,ge;;){if(P.lookahead<ae){if(Ee(P),P.lookahead<ae&&Be===i)return Ne;if(P.lookahead===0)break}if(nt=0,P.lookahead>=ne&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,nt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),nt!==0&&P.strstart-nt<=P.w_size-ae&&(P.match_length=Fe(P,nt)),P.match_length>=ne)if(ge=t._tr_tally(P,P.strstart-P.match_start,P.match_length-ne),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=ne){P.match_length--;do P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,nt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart;while(--P.match_length!==0);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else ge=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(ge&&(de(P,!1),P.strm.avail_out===0))return Ne}return P.insert=P.strstart<ne-1?P.strstart:ne-1,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):P.last_lit&&(de(P,!1),P.strm.avail_out===0)?Ne:Ce}function it(P,Be){for(var nt,ge,Oe;;){if(P.lookahead<ae){if(Ee(P),P.lookahead<ae&&Be===i)return Ne;if(P.lookahead===0)break}if(nt=0,P.lookahead>=ne&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,nt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=ne-1,nt!==0&&P.prev_length<P.max_lazy_match&&P.strstart-nt<=P.w_size-ae&&(P.match_length=Fe(P,nt),P.match_length<=5&&(P.strategy===x||P.match_length===ne&&P.strstart-P.match_start>4096)&&(P.match_length=ne-1)),P.prev_length>=ne&&P.match_length<=P.prev_length){Oe=P.strstart+P.lookahead-ne,ge=t._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-ne),P.lookahead-=P.prev_length-1,P.prev_length-=2;do++P.strstart<=Oe&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,nt=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart);while(--P.prev_length!==0);if(P.match_available=0,P.match_length=ne-1,P.strstart++,ge&&(de(P,!1),P.strm.avail_out===0))return Ne}else if(P.match_available){if(ge=t._tr_tally(P,0,P.window[P.strstart-1]),ge&&de(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return Ne}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(ge=t._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<ne-1?P.strstart:ne-1,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):P.last_lit&&(de(P,!1),P.strm.avail_out===0)?Ne:Ce}function St(P,Be){for(var nt,ge,Oe,Ke,Ot=P.window;;){if(P.lookahead<=X){if(Ee(P),P.lookahead<=X&&Be===i)return Ne;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=ne&&P.strstart>0&&(Oe=P.strstart-1,ge=Ot[Oe],ge===Ot[++Oe]&&ge===Ot[++Oe]&&ge===Ot[++Oe])){Ke=P.strstart+X;do;while(ge===Ot[++Oe]&&ge===Ot[++Oe]&&ge===Ot[++Oe]&&ge===Ot[++Oe]&&ge===Ot[++Oe]&&ge===Ot[++Oe]&&ge===Ot[++Oe]&&ge===Ot[++Oe]&&Oe<Ke);P.match_length=X-(Ke-Oe),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=ne?(nt=t._tr_tally(P,1,P.match_length-ne),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(nt=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),nt&&(de(P,!1),P.strm.avail_out===0))return Ne}return P.insert=0,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):P.last_lit&&(de(P,!1),P.strm.avail_out===0)?Ne:Ce}function Ft(P,Be){for(var nt;;){if(P.lookahead===0&&(Ee(P),P.lookahead===0)){if(Be===i)return Ne;break}if(P.match_length=0,nt=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,nt&&(de(P,!1),P.strm.avail_out===0))return Ne}return P.insert=0,Be===l?(de(P,!0),P.strm.avail_out===0?Pe:Qe):P.last_lit&&(de(P,!1),P.strm.avail_out===0)?Ne:Ce}function Dt(P,Be,nt,ge,Oe){this.good_length=P,this.max_lazy=Be,this.nice_length=nt,this.max_chain=ge,this.func=Oe}var Zt;Zt=[new Dt(0,0,0,0,Ge),new Dt(4,4,8,4,Nt),new Dt(4,5,16,8,Nt),new Dt(4,6,32,32,Nt),new Dt(4,4,16,16,it),new Dt(8,16,32,32,it),new Dt(8,16,128,128,it),new Dt(8,32,128,256,it),new Dt(32,128,258,1024,it),new Dt(32,258,258,4096,it)];function ye(P){P.window_size=2*P.w_size,Se(P.head),P.max_lazy_match=Zt[P.level].max_lazy,P.good_match=Zt[P.level].good_length,P.nice_match=Zt[P.level].nice_length,P.max_chain_length=Zt[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=ne-1,P.match_available=0,P.ins_h=0}function O(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(ue*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*q+1)*2),Se(this.dyn_ltree),Se(this.dyn_dtree),Se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ie+1),this.heap=new e.Buf16(2*D+1),Se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*D+1),Se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function K(P){var Be;return!P||!P.state?Ie(P,m):(P.total_in=P.total_out=0,P.data_type=k,Be=P.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?J:De,P.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),d)}function he(P){var Be=K(P);return Be===d&&ye(P.state),Be}function je(P,Be){return!P||!P.state||P.state.wrap!==2?m:(P.state.gzhead=Be,d)}function be(P,Be,nt,ge,Oe,Ke){if(!P)return m;var Ot=1;if(Be===b&&(Be=6),ge<0?(Ot=0,ge=-ge):ge>15&&(Ot=2,ge-=16),Oe<1||Oe>R||nt!==I||ge<8||ge>15||Be<0||Be>9||Ke<0||Ke>E)return Ie(P,m);ge===8&&(ge=9);var me=new O;return P.state=me,me.strm=P,me.wrap=Ot,me.gzhead=null,me.w_bits=ge,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=Oe+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+ne-1)/ne),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<Oe+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=Be,me.strategy=Ke,me.method=nt,he(P)}function ke(P,Be){return be(P,Be,I,j,F,C)}function le(P,Be){var nt,ge,Oe,Ke;if(!P||!P.state||Be>u||Be<0)return P?Ie(P,m):m;if(ge=P.state,!P.output||!P.input&&P.avail_in!==0||ge.status===Ae&&Be!==l)return Ie(P,P.avail_out===0?v:m);if(ge.strm=P,nt=ge.last_flush,ge.last_flush=Be,ge.status===J)if(ge.wrap===2)P.adler=0,se(ge,31),se(ge,139),se(ge,8),ge.gzhead?(se(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),se(ge,ge.gzhead.time&255),se(ge,ge.gzhead.time>>8&255),se(ge,ge.gzhead.time>>16&255),se(ge,ge.gzhead.time>>24&255),se(ge,ge.level===9?2:ge.strategy>=w||ge.level<2?4:0),se(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(se(ge,ge.gzhead.extra.length&255),se(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(P.adler=r(P.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=ee):(se(ge,0),se(ge,0),se(ge,0),se(ge,0),se(ge,0),se(ge,ge.level===9?2:ge.strategy>=w||ge.level<2?4:0),se(ge,Le),ge.status=De);else{var Ot=I+(ge.w_bits-8<<4)<<8,me=-1;ge.strategy>=w||ge.level<2?me=0:ge.level<6?me=1:ge.level===6?me=2:me=3,Ot|=me<<6,ge.strstart!==0&&(Ot|=B),Ot+=31-Ot%31,ge.status=De,Q(ge,Ot),ge.strstart!==0&&(Q(ge,P.adler>>>16),Q(ge,P.adler&65535)),P.adler=1}if(ge.status===ee)if(ge.gzhead.extra){for(Oe=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Oe&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-Oe,Oe)),Te(P),Oe=ge.pending,ge.pending===ge.pending_buf_size));)se(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>Oe&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-Oe,Oe)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=te)}else ge.status=te;if(ge.status===te)if(ge.gzhead.name){Oe=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Oe&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-Oe,Oe)),Te(P),Oe=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.name.length?Ke=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Ke=0,se(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>Oe&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-Oe,Oe)),Ke===0&&(ge.gzindex=0,ge.status=fe)}else ge.status=fe;if(ge.status===fe)if(ge.gzhead.comment){Oe=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Oe&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-Oe,Oe)),Te(P),Oe=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.comment.length?Ke=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Ke=0,se(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>Oe&&(P.adler=r(P.adler,ge.pending_buf,ge.pending-Oe,Oe)),Ke===0&&(ge.status=ve)}else ge.status=ve;if(ge.status===ve&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Te(P),ge.pending+2<=ge.pending_buf_size&&(se(ge,P.adler&255),se(ge,P.adler>>8&255),P.adler=0,ge.status=De)):ge.status=De),ge.pending!==0){if(Te(P),P.avail_out===0)return ge.last_flush=-1,d}else if(P.avail_in===0&&z(Be)<=z(nt)&&Be!==l)return Ie(P,v);if(ge.status===Ae&&P.avail_in!==0)return Ie(P,v);if(P.avail_in!==0||ge.lookahead!==0||Be!==i&&ge.status!==Ae){var V=ge.strategy===w?Ft(ge,Be):ge.strategy===S?St(ge,Be):Zt[ge.level].func(ge,Be);if((V===Pe||V===Qe)&&(ge.status=Ae),V===Ne||V===Pe)return P.avail_out===0&&(ge.last_flush=-1),d;if(V===Ce&&(Be===s?t._tr_align(ge):Be!==u&&(t._tr_stored_block(ge,0,0,!1),Be===o&&(Se(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Te(P),P.avail_out===0))return ge.last_flush=-1,d}return Be!==l?d:ge.wrap<=0?h:(ge.wrap===2?(se(ge,P.adler&255),se(ge,P.adler>>8&255),se(ge,P.adler>>16&255),se(ge,P.adler>>24&255),se(ge,P.total_in&255),se(ge,P.total_in>>8&255),se(ge,P.total_in>>16&255),se(ge,P.total_in>>24&255)):(Q(ge,P.adler>>>16),Q(ge,P.adler&65535)),Te(P),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?d:h)}function ft(P){var Be;return!P||!P.state?m:(Be=P.state.status,Be!==J&&Be!==ee&&Be!==te&&Be!==fe&&Be!==ve&&Be!==De&&Be!==Ae?Ie(P,m):(P.state=null,Be===De?Ie(P,y):d))}function vt(P,Be){var nt=Be.length,ge,Oe,Ke,Ot,me,V,H,W;if(!P||!P.state||(ge=P.state,Ot=ge.wrap,Ot===2||Ot===1&&ge.status!==J||ge.lookahead))return m;for(Ot===1&&(P.adler=n(P.adler,Be,nt,0)),ge.wrap=0,nt>=ge.w_size&&(Ot===0&&(Se(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),W=new e.Buf8(ge.w_size),e.arraySet(W,Be,nt-ge.w_size,ge.w_size,0),Be=W,nt=ge.w_size),me=P.avail_in,V=P.next_in,H=P.input,P.avail_in=nt,P.next_in=0,P.input=Be,Ee(ge);ge.lookahead>=ne;){Oe=ge.strstart,Ke=ge.lookahead-(ne-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[Oe+ne-1])&ge.hash_mask,ge.prev[Oe&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=Oe,Oe++;while(--Ke);ge.strstart=Oe,ge.lookahead=ne-1,Ee(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=ne-1,ge.match_available=0,P.next_in=V,P.input=H,P.avail_in=me,ge.wrap=Ot,d}return Vs.deflateInit=ke,Vs.deflateInit2=be,Vs.deflateReset=he,Vs.deflateResetKeep=K,Vs.deflateSetHeader=je,Vs.deflate=le,Vs.deflateEnd=ft,Vs.deflateSetDictionary=vt,Vs.deflateInfo="pako deflate (from Nodeca project)",Vs}var bd={},b4;function P5(){if(b4)return bd;b4=1;var e=Mu(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,bd.string2buf=function(s){var o,l,u,d,h,m=s.length,y=0;for(d=0;d<m;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),y+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(y),h=0,d=0;h<y;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),l<128?o[h++]=l:l<2048?(o[h++]=192|l>>>6,o[h++]=128|l&63):l<65536?(o[h++]=224|l>>>12,o[h++]=128|l>>>6&63,o[h++]=128|l&63):(o[h++]=240|l>>>18,o[h++]=128|l>>>12&63,o[h++]=128|l>>>6&63,o[h++]=128|l&63);return o};function i(s,o){if(o<65534&&(s.subarray&&n||!s.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(s,o));for(var l="",u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l}return bd.buf2binstring=function(s){return i(s,s.length)},bd.binstring2buf=function(s){for(var o=new e.Buf8(s.length),l=0,u=o.length;l<u;l++)o[l]=s.charCodeAt(l);return o},bd.buf2string=function(s,o){var l,u,d,h,m=o||s.length,y=new Array(m*2);for(u=0,l=0;l<m;){if(d=s[l++],d<128){y[u++]=d;continue}if(h=r[d],h>4){y[u++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<m;)d=d<<6|s[l++]&63,h--;if(h>1){y[u++]=65533;continue}d<65536?y[u++]=d:(d-=65536,y[u++]=55296|d>>10&1023,y[u++]=56320|d&1023)}return i(y,u)},bd.utf8border=function(s,o){var l;for(o=o||s.length,o>s.length&&(o=s.length),l=o-1;l>=0&&(s[l]&192)===128;)l--;return l<0||l===0?o:l+r[s[l]]>o?l:o},bd}var ME,v4;function F5(){if(v4)return ME;v4=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return ME=e,ME}var w4;function $re(){if(w4)return ah;w4=1;var e=Lre(),t=Mu(),n=P5(),r=jT(),a=F5(),i=Object.prototype.toString,s=0,o=4,l=0,u=1,d=2,h=-1,m=0,y=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==l)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==l)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,k=this.options.chunkSize,I,R;if(this.ended)return!1;R=E===~~E?E:E===!0?o:s,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),I=e.deflate(C,R),I!==u&&I!==l)return this.onEnd(I),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(R===o||R===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&I!==u);return R===o?(I=e.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===l):(R===d&&(this.onEnd(l),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function b(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function x(S,E){return E=E||{},E.raw=!0,b(S,E)}function w(S,E){return E=E||{},E.gzip=!0,b(S,E)}return ah.Deflate=v,ah.deflate=b,ah.deflateRaw=x,ah.gzip=w,ah}var ih={},Ss={},PE,x4;function Bre(){if(x4)return PE;x4=1;var e=30,t=12;return PE=function(r,a){var i,s,o,l,u,d,h,m,y,v,b,x,w,S,E,C,k,I,R,j,F,$,G,D,Z;i=r.state,s=r.next_in,D=r.input,o=s+(r.avail_in-5),l=r.next_out,Z=r.output,u=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,m=i.wsize,y=i.whave,v=i.wnext,b=i.window,x=i.hold,w=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{w<15&&(x+=D[s++]<<w,w+=8,x+=D[s++]<<w,w+=8),I=S[x&C];t:for(;;){if(R=I>>>24,x>>>=R,w-=R,R=I>>>16&255,R===0)Z[l++]=I&65535;else if(R&16){j=I&65535,R&=15,R&&(w<R&&(x+=D[s++]<<w,w+=8),j+=x&(1<<R)-1,x>>>=R,w-=R),w<15&&(x+=D[s++]<<w,w+=8,x+=D[s++]<<w,w+=8),I=E[x&k];n:for(;;){if(R=I>>>24,x>>>=R,w-=R,R=I>>>16&255,R&16){if(F=I&65535,R&=15,w<R&&(x+=D[s++]<<w,w+=8,w<R&&(x+=D[s++]<<w,w+=8)),F+=x&(1<<R)-1,F>h){r.msg="invalid distance too far back",i.mode=e;break e}if(x>>>=R,w-=R,R=l-u,F>R){if(R=F-R,R>y&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if($=0,G=b,v===0){if($+=m-R,R<j){j-=R;do Z[l++]=b[$++];while(--R);$=l-F,G=Z}}else if(v<R){if($+=m+v-R,R-=v,R<j){j-=R;do Z[l++]=b[$++];while(--R);if($=0,v<j){R=v,j-=R;do Z[l++]=b[$++];while(--R);$=l-F,G=Z}}}else if($+=v-R,R<j){j-=R;do Z[l++]=b[$++];while(--R);$=l-F,G=Z}for(;j>2;)Z[l++]=G[$++],Z[l++]=G[$++],Z[l++]=G[$++],j-=3;j&&(Z[l++]=G[$++],j>1&&(Z[l++]=G[$++]))}else{$=l-F;do Z[l++]=Z[$++],Z[l++]=Z[$++],Z[l++]=Z[$++],j-=3;while(j>2);j&&(Z[l++]=Z[$++],j>1&&(Z[l++]=Z[$++]))}}else if((R&64)===0){I=E[(I&65535)+(x&(1<<R)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((R&64)===0){I=S[(I&65535)+(x&(1<<R)-1)];continue t}else if(R&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(s<o&&l<d);j=w>>3,s-=j,w-=j<<3,x&=(1<<w)-1,r.next_in=s,r.next_out=l,r.avail_in=s<o?5+(o-s):5-(s-o),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=x,i.bits=w},PE}var FE,_4;function zre(){if(_4)return FE;_4=1;var e=Mu(),t=15,n=852,r=592,a=0,i=1,s=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return FE=function(m,y,v,b,x,w,S,E){var C=E.bits,k=0,I=0,R=0,j=0,F=0,$=0,G=0,D=0,Z=0,q=0,ue,ie,ne,X,ae,B=null,J=0,ee,te=new e.Buf16(t+1),fe=new e.Buf16(t+1),ve=null,De=0,Ae,Ne,Ce;for(k=0;k<=t;k++)te[k]=0;for(I=0;I<b;I++)te[y[v+I]]++;for(F=C,j=t;j>=1&&te[j]===0;j--);if(F>j&&(F=j),j===0)return x[w++]=1<<24|64<<16|0,x[w++]=1<<24|64<<16|0,E.bits=1,0;for(R=1;R<j&&te[R]===0;R++);for(F<R&&(F=R),D=1,k=1;k<=t;k++)if(D<<=1,D-=te[k],D<0)return-1;if(D>0&&(m===a||j!==1))return-1;for(fe[1]=0,k=1;k<t;k++)fe[k+1]=fe[k]+te[k];for(I=0;I<b;I++)y[v+I]!==0&&(S[fe[y[v+I]]++]=I);if(m===a?(B=ve=S,ee=19):m===i?(B=o,J-=257,ve=l,De-=257,ee=256):(B=u,ve=d,ee=-1),q=0,I=0,k=R,ae=w,$=F,G=0,ne=-1,Z=1<<F,X=Z-1,m===i&&Z>n||m===s&&Z>r)return 1;for(;;){Ae=k-G,S[I]<ee?(Ne=0,Ce=S[I]):S[I]>ee?(Ne=ve[De+S[I]],Ce=B[J+S[I]]):(Ne=96,Ce=0),ue=1<<k-G,ie=1<<$,R=ie;do ie-=ue,x[ae+(q>>G)+ie]=Ae<<24|Ne<<16|Ce|0;while(ie!==0);for(ue=1<<k-1;q&ue;)ue>>=1;if(ue!==0?(q&=ue-1,q+=ue):q=0,I++,--te[k]===0){if(k===j)break;k=y[v+S[I]]}if(k>F&&(q&X)!==ne){for(G===0&&(G=F),ae+=R,$=k-G,D=1<<$;$+G<j&&(D-=te[$+G],!(D<=0));)$++,D<<=1;if(Z+=1<<$,m===i&&Z>n||m===s&&Z>r)return 1;ne=q&X,x[ne]=F<<24|$<<16|ae-w|0}}return q!==0&&(x[ae+q]=k-G<<24|64<<16|0),E.bits=F,0},FE}var S4;function Ure(){if(S4)return Ss;S4=1;var e=Mu(),t=D5(),n=M5(),r=Bre(),a=zre(),i=0,s=1,o=2,l=4,u=5,d=6,h=0,m=1,y=2,v=-2,b=-3,x=-4,w=-5,S=8,E=1,C=2,k=3,I=4,R=5,j=6,F=7,$=8,G=9,D=10,Z=11,q=12,ue=13,ie=14,ne=15,X=16,ae=17,B=18,J=19,ee=20,te=21,fe=22,ve=23,De=24,Ae=25,Ne=26,Ce=27,Pe=28,Qe=29,Le=30,Ie=31,z=32,Se=852,Te=592,de=15,se=de;function Q(be){return(be>>>24&255)+(be>>>8&65280)+((be&65280)<<8)+((be&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Fe(be){var ke;return!be||!be.state?v:(ke=be.state,be.total_in=be.total_out=ke.total=0,be.msg="",ke.wrap&&(be.adler=ke.wrap&1),ke.mode=E,ke.last=0,ke.havedict=0,ke.dmax=32768,ke.head=null,ke.hold=0,ke.bits=0,ke.lencode=ke.lendyn=new e.Buf32(Se),ke.distcode=ke.distdyn=new e.Buf32(Te),ke.sane=1,ke.back=-1,h)}function Ee(be){var ke;return!be||!be.state?v:(ke=be.state,ke.wsize=0,ke.whave=0,ke.wnext=0,Fe(be))}function Ge(be,ke){var le,ft;return!be||!be.state||(ft=be.state,ke<0?(le=0,ke=-ke):(le=(ke>>4)+1,ke<48&&(ke&=15)),ke&&(ke<8||ke>15))?v:(ft.window!==null&&ft.wbits!==ke&&(ft.window=null),ft.wrap=le,ft.wbits=ke,Ee(be))}function Nt(be,ke){var le,ft;return be?(ft=new xe,be.state=ft,ft.window=null,le=Ge(be,ke),le!==h&&(be.state=null),le):v}function it(be){return Nt(be,se)}var St=!0,Ft,Dt;function Zt(be){if(St){var ke;for(Ft=new e.Buf32(512),Dt=new e.Buf32(32),ke=0;ke<144;)be.lens[ke++]=8;for(;ke<256;)be.lens[ke++]=9;for(;ke<280;)be.lens[ke++]=7;for(;ke<288;)be.lens[ke++]=8;for(a(s,be.lens,0,288,Ft,0,be.work,{bits:9}),ke=0;ke<32;)be.lens[ke++]=5;a(o,be.lens,0,32,Dt,0,be.work,{bits:5}),St=!1}be.lencode=Ft,be.lenbits=9,be.distcode=Dt,be.distbits=5}function ye(be,ke,le,ft){var vt,P=be.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new e.Buf8(P.wsize)),ft>=P.wsize?(e.arraySet(P.window,ke,le-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(vt=P.wsize-P.wnext,vt>ft&&(vt=ft),e.arraySet(P.window,ke,le-ft,vt,P.wnext),ft-=vt,ft?(e.arraySet(P.window,ke,le-ft,ft,0),P.wnext=ft,P.whave=P.wsize):(P.wnext+=vt,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=vt))),0}function O(be,ke){var le,ft,vt,P,Be,nt,ge,Oe,Ke,Ot,me,V,H,W,pe=0,Re,He,pt,Wt,ut,Rt,Lt,Qt,An=new e.Buf8(4),Kn,xr,_r=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!be||!be.state||!be.output||!be.input&&be.avail_in!==0)return v;le=be.state,le.mode===q&&(le.mode=ue),Be=be.next_out,vt=be.output,ge=be.avail_out,P=be.next_in,ft=be.input,nt=be.avail_in,Oe=le.hold,Ke=le.bits,Ot=nt,me=ge,Qt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=ue;break}for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if(le.wrap&2&&Oe===35615){le.check=0,An[0]=Oe&255,An[1]=Oe>>>8&255,le.check=n(le.check,An,2,0),Oe=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((Oe&255)<<8)+(Oe>>8))%31){be.msg="incorrect header check",le.mode=Le;break}if((Oe&15)!==S){be.msg="unknown compression method",le.mode=Le;break}if(Oe>>>=4,Ke-=4,Lt=(Oe&15)+8,le.wbits===0)le.wbits=Lt;else if(Lt>le.wbits){be.msg="invalid window size",le.mode=Le;break}le.dmax=1<<Lt,be.adler=le.check=1,le.mode=Oe&512?D:q,Oe=0,Ke=0;break;case C:for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if(le.flags=Oe,(le.flags&255)!==S){be.msg="unknown compression method",le.mode=Le;break}if(le.flags&57344){be.msg="unknown header flags set",le.mode=Le;break}le.head&&(le.head.text=Oe>>8&1),le.flags&512&&(An[0]=Oe&255,An[1]=Oe>>>8&255,le.check=n(le.check,An,2,0)),Oe=0,Ke=0,le.mode=k;case k:for(;Ke<32;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}le.head&&(le.head.time=Oe),le.flags&512&&(An[0]=Oe&255,An[1]=Oe>>>8&255,An[2]=Oe>>>16&255,An[3]=Oe>>>24&255,le.check=n(le.check,An,4,0)),Oe=0,Ke=0,le.mode=I;case I:for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}le.head&&(le.head.xflags=Oe&255,le.head.os=Oe>>8),le.flags&512&&(An[0]=Oe&255,An[1]=Oe>>>8&255,le.check=n(le.check,An,2,0)),Oe=0,Ke=0,le.mode=R;case R:if(le.flags&1024){for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}le.length=Oe,le.head&&(le.head.extra_len=Oe),le.flags&512&&(An[0]=Oe&255,An[1]=Oe>>>8&255,le.check=n(le.check,An,2,0)),Oe=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=j;case j:if(le.flags&1024&&(V=le.length,V>nt&&(V=nt),V&&(le.head&&(Lt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ft,P,V,Lt)),le.flags&512&&(le.check=n(le.check,ft,V,P)),nt-=V,P+=V,le.length-=V),le.length))break e;le.length=0,le.mode=F;case F:if(le.flags&2048){if(nt===0)break e;V=0;do Lt=ft[P+V++],le.head&&Lt&&le.length<65536&&(le.head.name+=String.fromCharCode(Lt));while(Lt&&V<nt);if(le.flags&512&&(le.check=n(le.check,ft,V,P)),nt-=V,P+=V,Lt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=$;case $:if(le.flags&4096){if(nt===0)break e;V=0;do Lt=ft[P+V++],le.head&&Lt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Lt));while(Lt&&V<nt);if(le.flags&512&&(le.check=n(le.check,ft,V,P)),nt-=V,P+=V,Lt)break e}else le.head&&(le.head.comment=null);le.mode=G;case G:if(le.flags&512){for(;Ke<16;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if(Oe!==(le.check&65535)){be.msg="header crc mismatch",le.mode=Le;break}Oe=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),be.adler=le.check=0,le.mode=q;break;case D:for(;Ke<32;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}be.adler=le.check=Q(Oe),Oe=0,Ke=0,le.mode=Z;case Z:if(le.havedict===0)return be.next_out=Be,be.avail_out=ge,be.next_in=P,be.avail_in=nt,le.hold=Oe,le.bits=Ke,y;be.adler=le.check=1,le.mode=q;case q:if(ke===u||ke===d)break e;case ue:if(le.last){Oe>>>=Ke&7,Ke-=Ke&7,le.mode=Ce;break}for(;Ke<3;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}switch(le.last=Oe&1,Oe>>>=1,Ke-=1,Oe&3){case 0:le.mode=ie;break;case 1:if(Zt(le),le.mode=ee,ke===d){Oe>>>=2,Ke-=2;break e}break;case 2:le.mode=ae;break;case 3:be.msg="invalid block type",le.mode=Le}Oe>>>=2,Ke-=2;break;case ie:for(Oe>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if((Oe&65535)!==(Oe>>>16^65535)){be.msg="invalid stored block lengths",le.mode=Le;break}if(le.length=Oe&65535,Oe=0,Ke=0,le.mode=ne,ke===d)break e;case ne:le.mode=X;case X:if(V=le.length,V){if(V>nt&&(V=nt),V>ge&&(V=ge),V===0)break e;e.arraySet(vt,ft,P,V,Be),nt-=V,P+=V,ge-=V,Be+=V,le.length-=V;break}le.mode=q;break;case ae:for(;Ke<14;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if(le.nlen=(Oe&31)+257,Oe>>>=5,Ke-=5,le.ndist=(Oe&31)+1,Oe>>>=5,Ke-=5,le.ncode=(Oe&15)+4,Oe>>>=4,Ke-=4,le.nlen>286||le.ndist>30){be.msg="too many length or distance symbols",le.mode=Le;break}le.have=0,le.mode=B;case B:for(;le.have<le.ncode;){for(;Ke<3;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}le.lens[_r[le.have++]]=Oe&7,Oe>>>=3,Ke-=3}for(;le.have<19;)le.lens[_r[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,Kn={bits:le.lenbits},Qt=a(i,le.lens,0,19,le.lencode,0,le.work,Kn),le.lenbits=Kn.bits,Qt){be.msg="invalid code lengths set",le.mode=Le;break}le.have=0,le.mode=J;case J:for(;le.have<le.nlen+le.ndist;){for(;pe=le.lencode[Oe&(1<<le.lenbits)-1],Re=pe>>>24,He=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if(pt<16)Oe>>>=Re,Ke-=Re,le.lens[le.have++]=pt;else{if(pt===16){for(xr=Re+2;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if(Oe>>>=Re,Ke-=Re,le.have===0){be.msg="invalid bit length repeat",le.mode=Le;break}Lt=le.lens[le.have-1],V=3+(Oe&3),Oe>>>=2,Ke-=2}else if(pt===17){for(xr=Re+3;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}Oe>>>=Re,Ke-=Re,Lt=0,V=3+(Oe&7),Oe>>>=3,Ke-=3}else{for(xr=Re+7;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}Oe>>>=Re,Ke-=Re,Lt=0,V=11+(Oe&127),Oe>>>=7,Ke-=7}if(le.have+V>le.nlen+le.ndist){be.msg="invalid bit length repeat",le.mode=Le;break}for(;V--;)le.lens[le.have++]=Lt}}if(le.mode===Le)break;if(le.lens[256]===0){be.msg="invalid code -- missing end-of-block",le.mode=Le;break}if(le.lenbits=9,Kn={bits:le.lenbits},Qt=a(s,le.lens,0,le.nlen,le.lencode,0,le.work,Kn),le.lenbits=Kn.bits,Qt){be.msg="invalid literal/lengths set",le.mode=Le;break}if(le.distbits=6,le.distcode=le.distdyn,Kn={bits:le.distbits},Qt=a(o,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,Kn),le.distbits=Kn.bits,Qt){be.msg="invalid distances set",le.mode=Le;break}if(le.mode=ee,ke===d)break e;case ee:le.mode=te;case te:if(nt>=6&&ge>=258){be.next_out=Be,be.avail_out=ge,be.next_in=P,be.avail_in=nt,le.hold=Oe,le.bits=Ke,r(be,me),Be=be.next_out,vt=be.output,ge=be.avail_out,P=be.next_in,ft=be.input,nt=be.avail_in,Oe=le.hold,Ke=le.bits,le.mode===q&&(le.back=-1);break}for(le.back=0;pe=le.lencode[Oe&(1<<le.lenbits)-1],Re=pe>>>24,He=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if(He&&(He&240)===0){for(Wt=Re,ut=He,Rt=pt;pe=le.lencode[Rt+((Oe&(1<<Wt+ut)-1)>>Wt)],Re=pe>>>24,He=pe>>>16&255,pt=pe&65535,!(Wt+Re<=Ke);){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}Oe>>>=Wt,Ke-=Wt,le.back+=Wt}if(Oe>>>=Re,Ke-=Re,le.back+=Re,le.length=pt,He===0){le.mode=Ne;break}if(He&32){le.back=-1,le.mode=q;break}if(He&64){be.msg="invalid literal/length code",le.mode=Le;break}le.extra=He&15,le.mode=fe;case fe:if(le.extra){for(xr=le.extra;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}le.length+=Oe&(1<<le.extra)-1,Oe>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=ve;case ve:for(;pe=le.distcode[Oe&(1<<le.distbits)-1],Re=pe>>>24,He=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if((He&240)===0){for(Wt=Re,ut=He,Rt=pt;pe=le.distcode[Rt+((Oe&(1<<Wt+ut)-1)>>Wt)],Re=pe>>>24,He=pe>>>16&255,pt=pe&65535,!(Wt+Re<=Ke);){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}Oe>>>=Wt,Ke-=Wt,le.back+=Wt}if(Oe>>>=Re,Ke-=Re,le.back+=Re,He&64){be.msg="invalid distance code",le.mode=Le;break}le.offset=pt,le.extra=He&15,le.mode=De;case De:if(le.extra){for(xr=le.extra;Ke<xr;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}le.offset+=Oe&(1<<le.extra)-1,Oe>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){be.msg="invalid distance too far back",le.mode=Le;break}le.mode=Ae;case Ae:if(ge===0)break e;if(V=me-ge,le.offset>V){if(V=le.offset-V,V>le.whave&&le.sane){be.msg="invalid distance too far back",le.mode=Le;break}V>le.wnext?(V-=le.wnext,H=le.wsize-V):H=le.wnext-V,V>le.length&&(V=le.length),W=le.window}else W=vt,H=Be-le.offset,V=le.length;V>ge&&(V=ge),ge-=V,le.length-=V;do vt[Be++]=W[H++];while(--V);le.length===0&&(le.mode=te);break;case Ne:if(ge===0)break e;vt[Be++]=le.length,ge--,le.mode=te;break;case Ce:if(le.wrap){for(;Ke<32;){if(nt===0)break e;nt--,Oe|=ft[P++]<<Ke,Ke+=8}if(me-=ge,be.total_out+=me,le.total+=me,me&&(be.adler=le.check=le.flags?n(le.check,vt,me,Be-me):t(le.check,vt,me,Be-me)),me=ge,(le.flags?Oe:Q(Oe))!==le.check){be.msg="incorrect data check",le.mode=Le;break}Oe=0,Ke=0}le.mode=Pe;case Pe:if(le.wrap&&le.flags){for(;Ke<32;){if(nt===0)break e;nt--,Oe+=ft[P++]<<Ke,Ke+=8}if(Oe!==(le.total&4294967295)){be.msg="incorrect length check",le.mode=Le;break}Oe=0,Ke=0}le.mode=Qe;case Qe:Qt=m;break e;case Le:Qt=b;break e;case Ie:return x;case z:default:return v}return be.next_out=Be,be.avail_out=ge,be.next_in=P,be.avail_in=nt,le.hold=Oe,le.bits=Ke,(le.wsize||me!==be.avail_out&&le.mode<Le&&(le.mode<Ce||ke!==l))&&ye(be,be.output,be.next_out,me-be.avail_out),Ot-=be.avail_in,me-=be.avail_out,be.total_in+=Ot,be.total_out+=me,le.total+=me,le.wrap&&me&&(be.adler=le.check=le.flags?n(le.check,vt,me,be.next_out-me):t(le.check,vt,me,be.next_out-me)),be.data_type=le.bits+(le.last?64:0)+(le.mode===q?128:0)+(le.mode===ee||le.mode===ne?256:0),(Ot===0&&me===0||ke===l)&&Qt===h&&(Qt=w),Qt}function K(be){if(!be||!be.state)return v;var ke=be.state;return ke.window&&(ke.window=null),be.state=null,h}function he(be,ke){var le;return!be||!be.state||(le=be.state,(le.wrap&2)===0)?v:(le.head=ke,ke.done=!1,h)}function je(be,ke){var le=ke.length,ft,vt,P;return!be||!be.state||(ft=be.state,ft.wrap!==0&&ft.mode!==Z)?v:ft.mode===Z&&(vt=1,vt=t(vt,ke,le,0),vt!==ft.check)?b:(P=ye(be,ke,le,le),P?(ft.mode=Ie,x):(ft.havedict=1,h))}return Ss.inflateReset=Ee,Ss.inflateReset2=Ge,Ss.inflateResetKeep=Fe,Ss.inflateInit=it,Ss.inflateInit2=Nt,Ss.inflate=O,Ss.inflateEnd=K,Ss.inflateGetHeader=he,Ss.inflateSetDictionary=je,Ss.inflateInfo="pako inflate (from Nodeca project)",Ss}var LE,E4;function L5(){return E4||(E4=1,LE={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),LE}var $E,C4;function Hre(){if(C4)return $E;C4=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return $E=e,$E}var k4;function qre(){if(k4)return ih;k4=1;var e=Ure(),t=Mu(),n=P5(),r=L5(),a=jT(),i=F5(),s=Hre(),o=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var y=e.inflateInit2(this.strm,m.windowBits);if(y!==r.Z_OK)throw new Error(a[y]);if(this.header=new s,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):o.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(y=e.inflateSetDictionary(this.strm,m.dictionary),y!==r.Z_OK)))throw new Error(a[y])}l.prototype.push=function(h,m){var y=this.strm,v=this.options.chunkSize,b=this.options.dictionary,x,w,S,E,C,k=!1;if(this.ended)return!1;w=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?y.input=n.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?y.input=new Uint8Array(h):y.input=h,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new t.Buf8(v),y.next_out=0,y.avail_out=v),x=e.inflate(y,r.Z_NO_FLUSH),x===r.Z_NEED_DICT&&b&&(x=e.inflateSetDictionary(this.strm,b)),x===r.Z_BUF_ERROR&&k===!0&&(x=r.Z_OK,k=!1),x!==r.Z_STREAM_END&&x!==r.Z_OK)return this.onEnd(x),this.ended=!0,!1;y.next_out&&(y.avail_out===0||x===r.Z_STREAM_END||y.avail_in===0&&(w===r.Z_FINISH||w===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(y.output,y.next_out),E=y.next_out-S,C=n.buf2string(y.output,S),y.next_out=E,y.avail_out=v-E,E&&t.arraySet(y.output,y.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(y.output,y.next_out))),y.avail_in===0&&y.avail_out===0&&(k=!0)}while((y.avail_in>0||y.avail_out===0)&&x!==r.Z_STREAM_END);return x===r.Z_STREAM_END&&(w=r.Z_FINISH),w===r.Z_FINISH?(x=e.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===r.Z_OK):(w===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),y.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function u(h,m){var y=new l(m);if(y.push(h,!0),y.err)throw y.msg||a[y.err];return y.result}function d(h,m){return m=m||{},m.raw=!0,u(h,m)}return ih.Inflate=l,ih.inflate=u,ih.inflateRaw=d,ih.ungzip=u,ih}var BE,T4;function Vre(){if(T4)return BE;T4=1;var e=Mu().assign,t=$re(),n=qre(),r=L5(),a={};return e(a,t,n,r),BE=a,BE}var Gre=Vre();const OT=ui(Gre);var zE,A4;function Kre(){if(A4)return zE;A4=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,s)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):n.errorFirst?r.push((o,l)=>{o?s(o):i(l)}):r.push(i),t.apply(this,r)})};return zE=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=s=>{const o=l=>typeof l=="string"?s===l:l.test(s);return n.include?n.include.some(o):!n.exclude.some(o)};let i;r==="function"?i=function(...s){return n.excludeMain?t(...s):e(t,n).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&a(s)?e(o,n):o}return i},zE}var Wre=Kre();const UE=ui(Wre);var HE,N4;function Zre(){if(N4)return HE;N4=1;var e={};function t(ne){return Array.isArray(ne)?ne:[ne]}const n="",r=" ",a="\\",i=/^\s+$/,s=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,u=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const y=m,v=(ne,X,ae)=>Object.defineProperty(ne,X,{value:ae}),b=/([0-z])-([0-z])/g,x=()=>!1,w=ne=>ne.replace(b,(X,ae,B)=>ae.charCodeAt(0)<=B.charCodeAt(0)?X:n),S=ne=>{const{length:X}=ne;return ne.slice(0,X-X%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ne,X,ae)=>X+(ae.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(ne,X)=>{const{length:ae}=X;return X.slice(0,ae-ae%2)+r}],[/[\\$.|*+(){^]/g,ne=>`\\${ne}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ne,X,ae)=>X+6<ae.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ne,X,ae)=>{const B=ae.replace(/\\\*/g,"[^\\/]*");return X+B}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ne,X,ae,B,J)=>X===a?`\\[${ae}${S(B)}${J}`:J==="]"&&B.length%2===0?`[${w(ae)}${B}]`:"[]"],[/(?:[^*])$/,ne=>/\/$/.test(ne)?`${ne}$`:`${ne}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ne,X)=>`${X?`${X}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(ne,X)=>{let ae=C[ne];return ae||(ae=E.reduce((B,[J,ee])=>B.replace(J,ee.bind(ne)),ne),C[ne]=ae),X?new RegExp(ae,"i"):new RegExp(ae)},I=ne=>typeof ne=="string",R=ne=>ne&&I(ne)&&!i.test(ne)&&!s.test(ne)&&ne.indexOf("#")!==0,j=ne=>ne.split(u);class F{constructor(X,ae,B,J){this.origin=X,this.pattern=ae,this.negative=B,this.regex=J}}const $=(ne,X)=>{const ae=ne;let B=!1;ne.indexOf("!")===0&&(B=!0,ne=ne.substr(1)),ne=ne.replace(o,"!").replace(l,"#");const J=k(ne,X);return new F(ae,ne,B,J)},G=(ne,X)=>{throw new X(ne)},D=(ne,X,ae)=>I(ne)?ne?D.isNotRelative(ne)?ae(`path should be a \`path.relative()\`d string, but got "${X}"`,RangeError):!0:ae("path must not be empty",TypeError):ae(`path must be a string, but got \`${X}\``,TypeError),Z=ne=>d.test(ne);D.isNotRelative=Z,D.convert=ne=>ne;class q{constructor({ignorecase:X=!0,ignoreCase:ae=X,allowRelativePaths:B=!1}={}){v(this,y,!0),this._rules=[],this._ignoreCase=ae,this._allowRelativePaths=B,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(X){if(X&&X[y]){this._rules=this._rules.concat(X._rules),this._added=!0;return}if(R(X)){const ae=$(X,this._ignoreCase);this._added=!0,this._rules.push(ae)}}add(X){return this._added=!1,t(I(X)?j(X):X).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(X){return this.add(X)}_testOne(X,ae){let B=!1,J=!1;return this._rules.forEach(ee=>{const{negative:te}=ee;if(J===te&&B!==J||te&&!B&&!J&&!ae)return;ee.regex.test(X)&&(B=!te,J=te)}),{ignored:B,unignored:J}}_test(X,ae,B,J){const ee=X&&D.convert(X);return D(ee,X,this._allowRelativePaths?x:G),this._t(ee,ae,B,J)}_t(X,ae,B,J){if(X in ae)return ae[X];if(J||(J=X.split(h)),J.pop(),!J.length)return ae[X]=this._testOne(X,B);const ee=this._t(J.join(h)+h,ae,B,J);return ae[X]=ee.ignored?ee:this._testOne(X,B)}ignores(X){return this._test(X,this._ignoreCache,!1).ignored}createFilter(){return X=>!this.ignores(X)}filter(X){return t(X).filter(this.createFilter())}test(X){return this._test(X,this._testCache,!0)}}const ue=ne=>new q(ne),ie=ne=>D(ne&&D.convert(ne),ne,x);if(ue.isPathValid=ie,ue.default=ue,HE=ue,typeof ta<"u"&&(e&&e.IGNORE_TEST_WIN32||ta.platform==="win32")){const ne=ae=>/^\\\\\?\\/.test(ae)||/["<>|\u0000-\u001F]+/u.test(ae)?ae:ae.replace(/\\/g,"/");D.convert=ne;const X=/^[a-z]:\//i;D.isNotRelative=ae=>X.test(ae)||Z(ae)}return HE}var Yre=Zre();const Xre=ui(Yre);var qE,R4;function Jre(){if(R4)return qE;R4=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return qE=n,qE}var Qre=Jre();const qo=ui(Qre);var VE,I4;function eae(){return I4||(I4=1,VE=function(e,t){var n=e,r=t,a=n.length,i=r.length,s=!1,o=null,l=a+1,u=[],d=[],h=[],m="",y=-1,v=0,b=1,x,w,S=function(){a>=i&&(x=n,w=a,n=r,r=x,a=i,i=w,s=!0,l=a+1)},E=function(R,j,F){return{x:R,y:j,k:F}},C=function(R,j){return{elem:R,t:j}},k=function(R,j,F){var $,G,D;for(j>F?$=u[R-1+l]:$=u[R+1+l],D=Math.max(j,F),G=D-R;G<a&&D<i&&n[G]===r[D];)++G,++D;return u[R+l]=d.length,d[d.length]=new E(G,D,$),D},I=function(R){var j,F,$;for(j=F=0,$=R.length-1;$>=0;--$)for(;j<R[$].x||F<R[$].y;)R[$].y-R[$].x>F-j?(s?h[h.length]=new C(r[F],y):h[h.length]=new C(r[F],b),++F):R[$].y-R[$].x<F-j?(s?h[h.length]=new C(n[j],b):h[h.length]=new C(n[j],y),++j):(h[h.length]=new C(n[j],v),m+=n[j],++j,++F)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return m},getses:function(){return h},compose:function(){var R,j,F,$,G,D,Z,q;for(R=i-a,j=a+i+3,F={},Z=0;Z<j;++Z)F[Z]=-1,u[Z]=-1;$=-1;do{for(++$,q=-$;q<=R-1;++q)F[q+l]=k(q,F[q-1+l]+1,F[q+1+l]);for(q=R+$;q>=R+1;--q)F[q+l]=k(q,F[q-1+l]+1,F[q+1+l]);F[R+l]=k(R,F[R-1+l]+1,F[R+1+l])}while(F[R+l]!==i);for(o=R+2*$,G=u[R+l],D=[];G!==-1;)D[D.length]=new E(d[G].x,d[G].y,null),G=d[G].k;I(D)}}}),VE}var GE,j4;function tae(){if(j4)return GE;j4=1;var e=eae();function t(i,s){var o=new e(i,s);o.compose();for(var l=o.getses(),u,d,h=i.length-1,m=s.length-1,y=l.length-1;y>=0;--y)l[y].t===o.SES_COMMON?(d?(d.chain={file1index:h,file2index:m,chain:null},d=d.chain):(u={file1index:h,file2index:m,chain:null},d=u),h--,m--):l[y].t===o.SES_DELETE?h--:l[y].t===o.SES_ADD&&m--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,u):v}function n(i,s){for(var o=[],l=i.length,u=s.length,d=t(i,s);d!==null;d=d.chain){var h=l-d.file1index-1,m=u-d.file2index-1;l=d.file1index,u=d.file2index,(h||m)&&o.push({file1:[l+1,h],file2:[u+1,m]})}return o.reverse(),o}function r(i,s,o){var l,u=n(s,i),d=n(s,o),h=[];function m(X,ae){h.push([X.file1[0],ae,X.file1[1],X.file2[0],X.file2[1]])}for(l=0;l<u.length;l++)m(u[l],0);for(l=0;l<d.length;l++)m(d[l],2);h.sort(function(X,ae){return X[0]-ae[0]});var y=[],v=0;function b(X){X>v&&(y.push([1,v,X-v]),v=X)}for(var x=0;x<h.length;x++){for(var w=x,S=h[x],E=S[0],C=E+S[2];x<h.length-1;){var k=h[x+1],I=k[0];if(I>C)break;C=Math.max(C,I+k[2]),x++}if(b(E),w==x)S[4]>0&&y.push([S[1],S[3],S[4]]);else{var R={0:[i.length,-1,s.length,-1],2:[o.length,-1,s.length,-1]};for(l=w;l<=x;l++){S=h[l];var j=S[1],F=R[j],$=S[0],G=$+S[2],D=S[3],Z=D+S[4];F[0]=Math.min(D,F[0]),F[1]=Math.max(Z,F[1]),F[2]=Math.min($,F[2]),F[3]=Math.max(G,F[3])}var q=R[0][0]+(E-R[0][2]),ue=R[0][1]+(C-R[0][3]),ie=R[2][0]+(E-R[2][2]),ne=R[2][1]+(C-R[2][3]);y.push([-1,q,ue-q,E,C-E,ie,ne-ie])}v=C}return b(s.length),y}function a(i,s,o){var l=[],u=[i,s,o],d=r(i,s,o),h=[];function m(){h.length&&l.push({ok:h}),h=[]}function y(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],k=0;k<S[2];k++)if(i[k+E]!=o[k+C])return!0;return!1}for(var b=0;b<d.length;b++){var x=d[b],w=x[0];w==-1?v(x)?(m(),l.push({conflict:{a:i.slice(x[1],x[1]+x[2]),aIndex:x[1],o:s.slice(x[3],x[3]+x[4]),oIndex:x[3],b:o.slice(x[5],x[5]+x[6]),bIndex:x[5]}})):y(u[0].slice(x[1],x[1]+x[2])):y(u[w].slice(x[1],x[1]+x[2]))}return m(),l}return GE=a,GE}var nae=tae();const rae=ui(nae);class sr extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new sr(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class I0 extends sr{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=I0.code,this.data={filepaths:t}}}I0.code="UnmergedPathsError";class jn extends sr{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=jn.code,this.data={message:t}}}jn.code="InternalError";class pp extends sr{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=pp.code,this.data={filepath:t}}}pp.code="UnsafeFilepathError";class zo{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function Lx(e,t){return-(e<t)||+(e>t)}function $5(e,t){return Lx(e.path,t.path)}function B5(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const Oo=2**32;function O4(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Uh(e){const[t,n]=O4(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=O4(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Oo,ctimeNanoseconds:n%Oo,mtimeSeconds:r%Oo,mtimeNanoseconds:a%Oo,dev:e.dev%Oo,ino:e.ino%Oo,mode:B5(e.mode%Oo),uid:e.uid%Oo,gid:e.gid%Oo,size:e.size>-1?e.size%Oo:0}}function aae(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let KE=null;async function ac(e){return KE===null&&(KE=await sae()),KE?z5(e):iae(e)}function iae(e){return new O5().update(e).digest("hex")}async function z5(e){const t=await crypto.subtle.digest("SHA-1",e);return aae(t)}async function sae(){try{if(await z5(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function oae(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function lae(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Jt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Sd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Jt.isBuffer(t))return Sd.fromBuffer(t);if(t===null)return new Sd(null);throw new jn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new jn("Index file is empty (.git/index)");const n=new Sd,r=new zo(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new jn(`Invalid dircache magic file number: ${a}`);const i=await ac(t.slice(0,-20)),s=t.slice(-20).toString("hex");if(s!==i)throw new jn(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${i}`);const o=r.readUInt32BE();if(o!==2)throw new jn(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let u=0;for(;!r.eof()&&u<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=oae(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new jn(`Got a path length of: ${m}`);if(d.path=r.toString("utf8",m),d.path.includes("..\\")||d.path.includes("../"))throw new pp(d.path);let y=8-(r.tell()-12)%8;for(y===0&&(y=8);y--;){const v=r.readUInt8();if(v!==0)throw new jn(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new jn("Unexpected end of file")}d.stages=[],n._addEntry(d),u++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort($5)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Uh(n);const i=Jt.from(t),s={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Jt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Jt.alloc(r),i=new zo(a),s=Uh(t);return i.writeUInt32BE(s.ctimeSeconds),i.writeUInt32BE(s.ctimeNanoseconds),i.writeUInt32BE(s.mtimeSeconds),i.writeUInt32BE(s.mtimeNanoseconds),i.writeUInt32BE(s.dev),i.writeUInt32BE(s.ino),i.writeUInt32BE(s.mode),i.writeUInt32BE(s.uid),i.writeUInt32BE(s.gid),i.writeUInt32BE(s.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(lae(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Jt.alloc(12),n=new zo(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(Sd._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(Sd._entryToBuffer(l));r=await Promise.all(r);const a=Jt.concat(r),i=Jt.concat([t,a]),s=await ac(i);return Jt.concat([i,Jt.from(s,"hex")])}}function ww(e,t,n=!0,r=!0){const a=Uh(e),i=Uh(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let WE=null;const ZE=Symbol("IndexCache");function cae(){return{map:new Map,stats:new Map}}async function uae(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Sd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function dae(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:ww(r,a)}class Ba{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[ZE]||(r[ZE]=cae());const s=`${n}/index`;WE===null&&(WE=new Lg({maxPending:1/0}));let o,l=[];return await WE.acquire(s,async()=>{const u=r[ZE];await dae(t,s,u)&&await uae(t,s,u);const d=u.map.get(s);if(l=d.unmergedPaths,l.length&&!a)throw new I0(l);if(o=await i(d),d._dirty){const h=await d.toObject();await t.write(s,h),u.stats.set(s,await t.lstat(s)),d._dirty=!1}}),o}}function xw(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Hh(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function U5(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:xw(a),metadata:{},children:[]};t.set(a,i),i.parent=n(Hh(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const s={type:"blob",fullpath:a,basename:xw(a),metadata:i,parent:n(Hh(a)),children:[]};s.parent&&s.parent.children.push(s),t.set(a,s)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function fae(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new jn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class hae{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ba.acquire({fs:t,gitdir:n,cache:r},async function(i){return U5(i.entries)});const a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(s=>s.fullpath);return i.sort(Lx),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Uh(r.metadata);t._type=r.type==="tree"?"tree":fae(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const $x=Symbol("GitWalkSymbol");function mp(){const e=Object.create(null);return Object.defineProperty(e,$x,{value:function({fs:t,gitdir:n,cache:r}){return new hae({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class Nr extends sr{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Nr.code,this.data={what:t}}}Nr.code="NotFoundError";class Ti extends sr{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Ti.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}Ti.code="ObjectTypeError";class _u extends sr{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=_u.code,this.data={value:t}}}_u.code="InvalidOidError";class j0 extends sr{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=j0.code,this.data={remote:t}}}j0.code="NoRefspecError";class _w{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new _w(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Sw{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,s]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=a==="*";if(l!==(s==="*"))throw new jn("Invalid refspec");return new Sw({remotePath:r,localPath:i,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class DT{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Sw.from(r));return new DT(n)}add(t){const n=Sw.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function pae(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const mae=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Um=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},D4={core:{filemode:Um,bare:Um,logallrefupdates:Um,symlinks:Um,ignorecase:Um,bigFileThreshold:mae}},gae=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,yae=/^[A-Za-z0-9-.]+$/,bae=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,vae=/^[A-Za-z][A-Za-z-]*$/,wae=/^(.*?)( *[#;].*)$/,xae=e=>{const t=gae.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},_ae=e=>{const t=bae.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=Sae(r),i=Eae(a);return[n,i]}return null},Sae=e=>{const t=wae.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return M4(n)&&M4(r)?`${n}${r}`:n},M4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Eae=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",s=n==="\\"&&a[r+1]==='"';return i||s?t:t+n},""),P4=e=>e!=null?e.toLowerCase():null,OC=(e,t,n)=>[P4(e),t,P4(n)].filter(r=>r!=null).join("."),F4=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:OC(n,a,r),sectionPath:OC(n,a,null),isSection:!!n}},Cae=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class MT{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,s=null;const o=a.trim(),l=xae(o),u=l!=null;if(u)[n,r]=l;else{const h=_ae(o);h!=null&&([i,s]=h)}const d=OC(n,r,i);return{line:a,isSection:u,section:n,subsection:r,name:i,value:s,path:d}}):[]}static from(t){return new MT(t)}async get(t,n=!1){const r=F4(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:s,value:o})=>{const l=D4[i]&&D4[i][s];return l?l(o):o});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:s,path:o,sectionPath:l,isSection:u}=F4(t),d=Cae(this.parsedConfig,h=>h.path===o);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],m=Object.assign({},h,{name:s,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,m):this.parsedConfig[d]=m}else{const h=this.parsedConfig.findIndex(y=>y.path===l),m={section:a,subsection:i,name:s,value:n,modified:!0,path:o};if(yae.test(a)&&vae.test(s))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const y={isSection:u,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(y,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:s=!1})=>s?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class ya{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return MT.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const ov=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],kae=["config","description","index","shallow","commondir"];let YE;async function Yc(e,t){return YE===void 0&&(YE=new Lg),YE.acquire(e,t)}class Ut{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:u=!1}){for(const x of a.values())if(!x.match(/[0-9a-f]{40}/))throw new _u(x);const d=await ya.get({fs:t,gitdir:n});if(!o){if(o=await d.getall(`remote.${r}.fetch`),o.length===0)throw new j0(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=DT.from(o),m=new Map;if(u){const x=await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ut.deleteRefs({fs:t,gitdir:n,refs:x.map(w=>`refs/tags/${w}`)})}if(s){for(const x of a.keys())if(x.startsWith("refs/tags")&&!x.endsWith("^{}")&&!await Ut.exists({fs:t,gitdir:n,ref:x})){const w=a.get(x);m.set(x,w)}}const y=h.translate([...a.keys()]);for(const[x,w]of y){const S=a.get(x);m.set(w,S)}const v=h.translate([...i.keys()]);for(const[x,w]of v){const S=i.get(x),E=h.translateOne(S);E&&m.set(w,`ref: ${E}`)}const b=[];if(l){for(const x of h.localNamespaces()){const w=(await Ut.listRefs({fs:t,gitdir:n,filepath:x})).map(S=>`${x}/${S}`);for(const S of w)m.has(S)||b.push(S)}b.length>0&&await Ut.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[x,w]of m)await Yc(x,async()=>t.write(Pt.join(n,x),`${w.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new _u(a);await Yc(r,async()=>t.write(Pt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Yc(r,async()=>t.write(Pt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ut.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Pt.join(n,o))));let a=await Yc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=_w.from(a),s=i.refs.size;for(const o of r)i.refs.has(o)&&i.delete(o);i.refs.size<s&&(a=i.toString(),await Yc("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ut.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ut.packedRefs({fs:t,gitdir:n}),s=ov(r).filter(o=>!kae.includes(o));for(const o of s){const l=await Yc(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||i.get(o));if(l)return Ut.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new Nr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ut.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ut.packedRefs({fs:t,gitdir:n}),i=ov(r);for(const s of i)if(await Yc(s,async()=>t.exists(`${n}/${s}`))||a.has(s))return s;throw new Nr(r)}static async expandAgainstMap({ref:t,map:n}){const r=ov(t);for(const a of r)if(await n.has(a))return a;throw new Nr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ut.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=ov(t);for(const s of i){const o=a.get(s);if(o)return Ut.resolveAgainstMap({ref:o.trim(),fullref:s,depth:r,map:a})}throw new Nr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Yc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return _w.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ut.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(s=>s.replace(`${n}/${r}/`,""))}catch{i=[]}for(let s of(await a).keys())s.startsWith(r)&&(s=s.replace(r+"/",""),i.includes(s)||i.push(s));return i.sort(pae),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ut.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ut.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ut.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function Tae(e,t){return Lx(L4(e),L4(t))}function L4(e){return e.mode==="040000"?e.path+"/":e.path}function H5(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new jn(`Unexpected GitTree entry mode: ${e}`)}function Aae(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new jn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new jn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const s=H5(i),o=e.slice(r+1,a).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new pp(o);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:o,oid:l,type:s})}return t}function Nae(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new jn(`Could not understand file mode: ${e}`)}function Rae(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Nae(e.mode),e.type||(e.type=H5(e.mode)),e}class zi{constructor(t){if(Jt.isBuffer(t))this._entries=Aae(t);else if(Array.isArray(t))this._entries=t.map(Rae);else throw new jn("invalid type passed to GitTree constructor");this._entries.sort($5)}static from(t){return new zi(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Tae),Jt.concat(t.map(n=>{const r=Jt.from(n.mode.replace(/^0/,"")),a=Jt.from(" "),i=Jt.from(n.path,"utf8"),s=Jt.from([0]),o=Jt.from(n.oid,"hex");return Jt.concat([r,a,i,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class gp{static wrap({type:t,object:n}){return Jt.concat([Jt.from(`${t} ${n.byteLength.toString()}\0`),Jt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),s=t.length-(r+1);if(parseInt(i)!==s)throw new jn(`Length mismatch: expected ${i} bytes but got ${s} instead.`);return{type:a,object:Jt.from(t.slice(r+1))}}}async function q5({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Iae(e,t){const n=new zo(e),r=$4(n);if(r!==t.byteLength)throw new jn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=$4(n);let i;const s=z4(n,t);if(s.byteLength===a)i=s;else{i=Jt.alloc(a);const o=new zo(i);for(o.copy(s);!n.eof();)o.copy(z4(n,t));const l=o.tell();if(a!==l)throw new jn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function $4(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function B4(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function z4(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const s=B4(e,n&a,4);let o=B4(e,(n&i)>>4,3);return o===0&&(o=65536),t.slice(s,s+o)}else return e.slice(n)}function jae(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function V5(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:jae(e)}class G5{constructor(t){if(typeof Jt>"u")throw new Error("Missing Buffer dependency");this.stream=V5(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Jt.alloc(0):(n&&(n=Jt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>Oae(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Jt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function Oae(e){return e.reduce((t,n)=>t+n.length,0)}async function Dae(e,t){const n=new G5(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new jn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new jn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const s=n.tell(),{type:o,length:l,ofs:u,reference:d}=await Mae(n),h=new OT.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new jn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new jn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const y=n.tell();await t({data:h.result,type:o,num:i,offset:s,end:y,reference:d,ofs:u})}}}}async function Mae(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let s=4;do t=await e.byte(),r|=(t&127)<<s,s+=7;while(t&128)}let a,i;if(n===6){let s=0;a=0;const o=[];do t=await e.byte(),a|=(t&127)<<s,s+=7,o.push(t);while(t&128);i=Jt.from(o)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function K5(e){return OT.inflate(e)}function Pae(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function Fae(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class qh{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new zo(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new jn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new jn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const s=r.readUInt32BE(),o=[];for(let d=0;d<s;d++){const h=r.slice(20).toString("hex");o[d]=h}r.seek(r.tell()+4*s);const l=new Map;for(let d=0;d<s;d++)l.set(o[d],r.readUInt32BE());const u=r.slice(20).toString("hex");return new qh({hashes:o,crcs:{},offsets:l,packfileSha:u,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},s=t.slice(-20).toString("hex"),o=[],l={},u=new Map;let d=null,h=null;await Dae([t],async({data:x,type:w,reference:S,offset:E,num:C})=>{d===null&&(d=C);const k=Math.floor((d-C)*100/d);k!==h&&r&&await r({phase:"Receiving objects",loaded:d-C,total:d}),h=k,w=a[w],["commit","tree","blob","tag"].includes(w)?i[E]={type:w,offset:E}:w==="ofs-delta"?i[E]={type:w,offset:E}:w==="ref-delta"&&(i[E]={type:w,offset:E})});const m=Object.keys(i).map(Number);for(const[x,w]of m.entries()){const S=x+1===m.length?t.byteLength-20:m[x+1],E=i[w],C=Pre.buf(t.slice(w,S))>>>0;E.end=S,E.crc=C}const y=new qh({pack:Promise.resolve(t),packfileSha:s,crcs:l,hashes:o,offsets:u,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let x in i){x=Number(x);const w=Math.floor(v*100/d);w!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=w;const S=i[x];if(!S.oid)try{y.readDepth=0,y.externalReadDepth=0;const{type:E,object:C}=await y.readSlice({start:x});b[y.readDepth]+=1;const k=await ac(gp.wrap({type:E,object:C}));S.oid=k,o.push(k),u.set(k,x),l[k]=S.crc}catch{continue}}return o.sort(),y}async toBuffer(){const t=[],n=(u,d)=>{t.push(Jt.from(u,d))};n("ff744f63","hex"),n("00000002","hex");const r=new zo(Jt.alloc(256*4));for(let u=0;u<256;u++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=u&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const u of this.hashes)n(u,"hex");const a=new zo(Jt.alloc(this.hashes.length*4));for(const u of this.hashes)a.writeUInt32BE(this.crcs[u]);t.push(a.buffer);const i=new zo(Jt.alloc(this.hashes.length*4));for(const u of this.hashes)i.writeUInt32BE(this.offsets.get(u));t.push(i.buffer),n(this.packfileSha,"hex");const s=Jt.concat(t),o=await ac(s),l=Jt.alloc(20);return l.write(o,"hex"),Jt.concat([s,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new jn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new jn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new zo(r),i=a.readUInt8(),s=i&112;let o=n[s];if(o===void 0)throw new jn("Unrecognized type: 0b"+s.toString(2));const l=i&15;let u=l;i&128&&(u=Fae(a,l));let h=null,m=null;if(o==="ofs_delta"){const v=Pae(a),b=t-v;({object:h,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:v}))}const y=r.slice(a.tell());if(m=Jt.from(await K5(y)),m.byteLength!==u)throw new jn(`Packfile told us object would have length ${u} but it had length ${m.byteLength}`);return h&&(m=Jt.from(Iae(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:m}),{type:o,format:"content",object:m}}}const lv=Symbol("PackfileCache");async function Lae({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return qh.fromIdx({idx:i,getExternalRefDelta:n})}function PT({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[lv]||(t[lv]=new Map);let s=t[lv].get(n);return s||(s=Lae({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[lv].set(n,s)),s}async function $ae({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await PT({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(u.error)throw new jn(u.error);if(u.offsets.has(r)){if(!u.pack){const h=l.replace(/idx$/,"pack");u.pack=e.read(h)}const d=await u.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${o.replace(/idx$/,"pack")}`,d}}return null}async function Kr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>Kr({fs:e,cache:t,gitdir:n,oid:d});let s;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Jt.from("tree 0\0")}),s||(s=await q5({fs:e,gitdir:n,oid:r})),!s){if(s=await $ae({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!s)throw new Nr(r);return s}if(a==="deflated"||(s.format==="deflated"&&(s.object=Jt.from(await K5(s.object)),s.format="wrapped"),a==="wrapped"))return s;const o=await ac(s.object);if(o!==r)throw new jn(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:u}=gp.unwrap(s.object);if(s.type=u,s.object=l,s.format="content",a==="content")return s;throw new jn(`invalid requested format "${a}"`)}class ho extends sr{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=ho.code,this.data={noun:t,where:n,canForce:r}}}ho.code="AlreadyExistsError";class O0 extends sr{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=O0.code,this.data={nouns:t,short:n,matches:r}}}O0.code="AmbiguousError";class D0 extends sr{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=D0.code,this.data={filepaths:t}}}D0.code="CheckoutConflictError";class M0 extends sr{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=M0.code,this.data={ref:t,oid:n}}}M0.code="CommitNotFetchedError";class P0 extends sr{constructor(){super("Empty response from git server."),this.code=this.name=P0.code,this.data={}}}P0.code="EmptyServerResponseError";class F0 extends sr{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=F0.code,this.data={}}}F0.code="FastForwardError";class L0 extends sr{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=L0.code,this.data={prettyDetails:t,result:n}}}L0.code="GitPushError";class Vh extends sr{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Vh.code,this.data={statusCode:t,statusMessage:n,response:r}}}Vh.code="HttpError";class Su extends sr{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Su.code,this.data={reason:t}}}Su.code="InvalidFilepathError";class oo extends sr{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=oo.code,this.data={ref:t,suggestion:n}}}oo.code="InvalidRefNameError";class $0 extends sr{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=$0.code,this.data={depth:t}}}$0.code="MaxDepthError";class yp extends sr{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=yp.code,this.data={}}}yp.code="MergeNotSupportedError";class bp extends sr{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=bp.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}bp.code="MergeConflictError";class ci extends sr{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=ci.code,this.data={role:t}}}ci.code="MissingNameError";class Bi extends sr{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Bi.code,this.data={parameter:t}}}Bi.code="MissingParameterError";class B0 extends sr{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=B0.code,this.data={errors:t},this.errors=t}}B0.code="MultipleGitError";class cf extends sr{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=cf.code,this.data={expected:t,actual:n}}}cf.code="ParseError";class Gh extends sr{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Gh.code,this.data={reason:t}}}Gh.code="PushRejectedError";class au extends sr{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=au.code,this.data={capability:t,parameter:n}}}au.code="RemoteCapabilityError";class z0 extends sr{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=z0.code,this.data={preview:t,response:n}}}z0.code="SmartHttpError";class U0 extends sr{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=U0.code,this.data={url:t,transport:n,suggestion:r}}}U0.code="UnknownTransportError";class H0 extends sr{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=H0.code,this.data={url:t}}}H0.code="UrlParseError";class vp extends sr{constructor(){super("The operation was canceled."),this.code=this.name=vp.code,this.data={}}}vp.code="UserCanceledError";class q0 extends sr{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=q0.code,this.data={filepath:t}}}q0.code="IndexResetError";class V0 extends sr{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=V0.code,this.data={ref:t}}}V0.code="NoCommitError";var Bae=Object.freeze({__proto__:null,AlreadyExistsError:ho,AmbiguousError:O0,CheckoutConflictError:D0,CommitNotFetchedError:M0,EmptyServerResponseError:P0,FastForwardError:F0,GitPushError:L0,HttpError:Vh,InternalError:jn,InvalidFilepathError:Su,InvalidOidError:_u,InvalidRefNameError:oo,MaxDepthError:$0,MergeNotSupportedError:yp,MergeConflictError:bp,MissingNameError:ci,MissingParameterError:Bi,MultipleGitError:B0,NoRefspecError:j0,NotFoundError:Nr,ObjectTypeError:Ti,ParseError:cf,PushRejectedError:Gh,RemoteCapabilityError:au,SmartHttpError:z0,UnknownTransportError:U0,UnsafeFilepathError:pp,UrlParseError:H0,UserCanceledError:vp,UnmergedPathsError:I0,IndexResetError:q0,NoCommitError:V0});function DC({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=zae(r),`${e} <${t}> ${n} ${r}`}function zae(e){const t=Uae(Hae(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function Uae(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function Hae(e){return e===0?e:-e}function Bl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Ew(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:qae(a)}}function qae(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),Vae(r)}function Vae(e){return e===0?e:-e}class wi{constructor(t){if(typeof t=="string")this._tag=t;else if(Jt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=wi.render(t);else throw new jn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new wi(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${DC(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.tagger&&(r.tagger=Ew(r.tagger)),r.committer&&(r.committer=Ew(r.committer)),r}withoutSignature(){const t=Bl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Bl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Jt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=Bl(i);const s=a+i;return wi.from(s)}}function XE(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function Gae(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Vr{constructor(t){if(typeof t=="string")this._commit=t;else if(Jt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Vr.render(t);else throw new jn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Vr.justHeaders(t),a=Vr.justMessage(t),i=Bl(r+`
gpgsig`+XE(n)+`
`+a);return new Vr(i)}static from(t){return new Vr(t)}toObject(){return Jt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Vr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return Bl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Vr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.author&&(r.author=Ew(r.author)),r.committer&&(r.committer=Ew(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new jn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${DC(r)}
`;const a=t.committer||t.author;return n+=`committer ${DC(a)}
`,t.gpgsig&&(n+="gpgsig"+XE(t.gpgsig)),n}static render(t){return Vr.renderHeaders(t)+`
`+Bl(t.message)}render(){return this._commit}withoutSignature(){const t=Bl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Bl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return Gae(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Vr.justMessage(t._commit);let{signature:s}=await n({payload:a,secretKey:r});s=Bl(s);const l=Vr.justHeaders(t._commit)+`
gpgsig`+XE(s)+`
`+i;return Vr.from(l)}}async function Kh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:zi.from([]),oid:r};const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=wi.from(i).parse().object,Kh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Vr.from(i).parse().tree,Kh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new Ti(r,a,"tree");return{tree:zi.from(i),oid:r}}class Kae{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const s=new Map;let o;try{o=await Ut.resolve({fs:t,gitdir:n,ref:r})}catch(u){u instanceof Nr&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Kh({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,s=await this.mapPromise,o=s.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:u,object:d}=await Kr({fs:r,cache:a,gitdir:i,oid:l});if(u!==o.type)throw new Ti(l,u,o.type);const h=zi.from(d);for(const m of h)s.set(Pt.join(n,m.path),m);return h.entries().map(m=>Pt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=B5(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,o=n.get(t._fullpath).oid,{type:l,object:u}=await Kr({fs:r,cache:a,gitdir:i,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(u)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function Ns({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,$x,{value:function({fs:n,gitdir:r,cache:a}){return new Kae({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class Wae{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Pt.join(a,n));return i===null?null:i.map(s=>Pt.join(n,s))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Uh(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const s=await(await this._getGitConfig(n,a)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:s});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let s;await Ba.acquire({fs:r,gitdir:a,cache:i},async function(o){const l=o.entriesMap.get(t._fullpath),u=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof ta<"u"?ta.platform!=="win32":!0;if(!l||ww(u,l,h,m)){const y=await t.content();y===void 0?s=void 0:(s=await ac(gp.wrap({type:"blob",object:y})),l&&s===l.oid&&(!h||u.mode===l.mode)&&ww(u,l,h,m)&&o.insert({filepath:t._fullpath,stats:u,oid:s}))}else s=l.oid}),t._oid=s}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await ya.get({fs:t,gitdir:n}),this.config)}}function G0(){const e=Object.create(null);return Object.defineProperty(e,$x,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new Wae({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function Zae(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const W5=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class Yae{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*Xae(e){const t=new Yae;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let s=0;s<a;s++)r[s]!==void 0&&r[s]===n?(i[s]=r[s],r[s]=e[s].next().value):i[s]=null,r[s]!==void 0&&t.consider(r[s]);if(yield i,t.value===null)return}}async function Eu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,u)=>u,reduce:s=async(l,u)=>{const d=W5(u);return l!==void 0&&d.unshift(l),d},iterate:o=(l,u)=>Promise.all([...u].map(l))}){const l=a.map(y=>y[$x]({fs:e,dir:n,gitdir:r,cache:t})),u=new Array(l.length).fill("."),d=Zae(0,l.length),h=async y=>{d.map(x=>{const w=y[x];y[x]=w&&new l[x].ConstructEntry(w)});const b=(await Promise.all(d.map(x=>{const w=y[x];return w?l[x].readdir(w):[]}))).map(x=>(x===null?[]:x)[Symbol.iterator]());return{entries:y,children:Xae(b)}},m=async y=>{const{entries:v,children:b}=await h(y),x=v.find(S=>S&&S._fullpath)._fullpath,w=await i(x,v);if(w!==null){let S=await o(m,b);return S=S.filter(E=>E!==void 0),s(w,S)}};return m(u)}async function MC(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Pt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?MC(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function Jae(e){return Qae(e)&&U4(e.then)&&U4(e.catch)}function Qae(e){return e&&typeof e=="object"}function U4(e){return typeof e=="function"}function H4(e){return Jae((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const q4=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function V4(e,t){if(H4(t))for(const n of q4)e[`_${n}`]=t[n].bind(t);else for(const n of q4)e[`_${n}`]=UE(t[n].bind(t));H4(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=MC.bind(null,e):t.rm?e._rm=UE(t.rm.bind(t)):t.rmdir.length>2?e._rm=UE(t.rmdir.bind(t)):e._rm=MC.bind(null,e)}class cn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?V4(this,t.promises):V4(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Jt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Hh(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=Hh(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(Lx),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Jt.isBuffer(r)?r:Jt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function et(e,t){if(t===void 0)throw new Bi(e)}async function Cw(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function eie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{et("fs",e),et("dir",t),et("gitdir",n);const i=new cn(e),s=[Ns({ref:r}),G0(),mp()];let o=[];await Ba.acquire({fs:i,gitdir:n,cache:a},async function(u){o=u.unmergedPaths});const l=await Eu({fs:i,cache:a,dir:t,gitdir:n,trees:s,map:async function(u,[d,h,m]){const y=!await Cw(h,m),v=o.includes(u),b=!await Cw(m,d);if(y||v)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new q0(u)}});await Ba.acquire({fs:i,gitdir:n,cache:a},async function(u){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class wp{static async isIgnored({fs:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a}){if(xw(a)===".git")return!0;if(a===".")return!1;let i="";const s=Pt.join(r,"info","exclude");await t.exists(s)&&(i=await t.read(s,"utf8"));const o=[{gitignore:Pt.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),m=l.slice(d).join("/");o.push({gitignore:Pt.join(n,h,".gitignore"),filepath:m})}let u=!1;for(const d of o){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const m=Xre().add(i);m.add(h);const y=Hh(d.filepath);if(y!=="."&&m.ignores(y))return!0;u?u=!m.test(d.filepath).unignored:u=m.test(d.filepath).ignored}return u}}async function tie({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,s=`${t}/${i}`;await e.exists(s)||await e.write(s,n)}let JE=null;async function Z5(e){return JE===null&&(JE=rie()),JE?nie(e):OT.deflate(e)}async function nie(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function rie(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Hi({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:s=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=gp.wrap({type:n,object:r})),i=await ac(r),r=Jt.from(await Z5(r))),s||await tie({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function Y5(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function aie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:s=!0}){try{et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r);const o=new cn(e);await Ba.acquire({fs:o,gitdir:n,cache:a},async l=>{const d=await(await ya.get({fs:o,gitdir:n})).get("core.autocrlf");return PC({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:i,parallel:s,autocrlf:d})})}catch(o){throw o.caller="git.add",o}}async function PC({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:s,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async m=>{if(!i&&await wp.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const y=await n.lstat(Pt.join(e,m));if(!y)throw new Nr(m);if(y.isDirectory()){const v=await n.readdir(Pt.join(e,m));if(s){const b=v.map(x=>PC({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,x)],index:a,force:i,parallel:s,autocrlf:o}));await Promise.all(b)}else for(const b of v)await PC({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,b)],index:a,force:i,parallel:s,autocrlf:o})}else{const v=y.isSymbolicLink()?await n.readlink(Pt.join(e,m)).then(Y5):await n.read(Pt.join(e,m),{autocrlf:o});if(v===null)throw new Nr(m);const b=await Hi({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:m,stats:y,oid:b})}}),u=await Promise.allSettled(l),d=u.filter(m=>m.status==="rejected").map(m=>m.reason);if(d.length>1)throw new B0(d);if(d.length===1)throw d[0];return u.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function $g({fs:e,gitdir:t,path:n}){return(await ya.get({fs:e,gitdir:t})).get(n)}function X5(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Cu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await $g({fs:e,gitdir:t,path:"user.name"}),email:await $g({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},s=X5({},i,r?r.author:void 0,n);if(s.name!==void 0)return s}async function Wh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),s={name:await $g({fs:e,gitdir:t,path:"user.name"}),email:await $g({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=X5({},s,a?a.committer:void 0,n,r);if(o.name!==void 0)return o}async function J5({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=wi.from(i).parse().object,J5({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new Ti(r,a,"commit");return{commit:Vr.from(i),oid:r}}async function Zh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await J5({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function Bx({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:y}){let v=!1;h||(h=await Ut.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,x;try{b=await Ut.resolve({fs:e,gitdir:r,ref:h}),x=await Zh({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new V0(h);const w=l?await Cu({fs:e,gitdir:r,author:i,commit:x.commit}):await Cu({fs:e,gitdir:r,author:i});if(!w)throw new ci("author");const S=l?await Wh({fs:e,gitdir:r,author:w,committer:s,commit:x.commit}):await Wh({fs:e,gitdir:r,author:w,committer:s});if(!S)throw new ci("committer");return Ba.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=U5(E.entries).get(".");if(y||(y=await Q5({fs:e,gitdir:r,inode:k,dryRun:u})),m?m=await Promise.all(m.map(j=>Ut.resolve({fs:e,gitdir:r,ref:j}))):l?m=x.commit.parent:m=b?[b]:[],!a)if(l)a=x.commit.message;else throw new Bi("message");let I=Vr.from({tree:y,parent:m,author:w,committer:S,message:a});o&&(I=await Vr.sign(I,n,o));const R=await Hi({fs:e,gitdir:r,type:"commit",object:I.toObject(),dryRun:u});return!d&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:h,value:R}),R})}async function Q5({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await Q5({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=zi.from(i);return await Hi({fs:e,gitdir:t,type:"tree",object:s.toObject(),dryRun:r})}async function K0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Su("leading-slash");if(a.endsWith("/"))throw new Su("trailing-slash");const i=r,s=await Kh({fs:e,cache:t,gitdir:n,oid:r}),o=s.tree;if(a==="")r=s.oid;else{const l=a.split("/");r=await eF({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:i,filepath:a})}return r}async function eF({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s}){const o=a.shift();for(const l of r)if(l.path===o){if(a.length===0)return l.oid;{const{type:u,object:d}=await Kr({fs:e,cache:t,gitdir:n,oid:l.oid});if(u!=="tree")throw new Ti(i,u,"tree",s);return r=zi.from(d),eF({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s})}}throw new Nr(`file or directory found at "${i}:${s}"`)}async function xp({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await K0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:s}=await Kh({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,tree:i.entries()}}async function W0({fs:e,gitdir:t,tree:n}){const r=zi.from(n).toObject();return await Hi({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function iie({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:s,force:o,author:l,committer:u,signingKey:d}){let h;try{h=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(w){if(!(w instanceof Nr))throw w}let y=(await xp({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)y=y.filter(w=>w.path!==i);else for(const w of y)if(w.path===i)throw new ho("note",i);typeof s=="string"&&(s=Jt.from(s,"utf8"));const v=await Hi({fs:e,gitdir:r,type:"blob",object:s,format:"content"});y.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await W0({fs:e,gitdir:r,tree:y});return await Bx({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:u,signingKey:d})}async function sie({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:s,force:o,author:l,committer:u,signingKey:d,cache:h={}}){try{et("fs",e),et("gitdir",r),et("oid",i),et("note",s),d&&et("onSign",t);const m=new cn(e),y=await Cu({fs:m,gitdir:r,author:l});if(!y)throw new ci("author");const v=await Wh({fs:m,gitdir:r,author:y,committer:u});if(!v)throw new ci("committer");return await iie({fs:new cn(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:s,force:o,author:y,committer:v,signingKey:d})}catch(m){throw m.caller="git.addNote",m}}async function tF({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==qo.clean(n))throw new oo(n,qo.clean(n));const i=await ya.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new ho("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await ya.save({fs:e,gitdir:t,config:i})}async function oie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return et("fs",e),et("gitdir",n),et("remote",r),et("url",a),await tF({fs:new cn(e),gitdir:n,remote:r,url:a,force:i})}catch(s){throw s.caller="git.addRemote",s}}async function lie({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await Ut.exists({fs:e,gitdir:r,ref:a}))throw new ho("tag",a);const h=await Ut.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:m}=await Kr({fs:e,cache:t,gitdir:r,oid:h});let y=wi.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:s,gpgsig:o});u&&(y=await wi.sign(y,n,u));const v=await Hi({fs:e,gitdir:r,type:"tag",object:y.toObject()});await Ut.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function cie({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1,cache:h={}}){try{et("fs",e),et("gitdir",r),et("ref",a),u&&et("onSign",t);const m=new cn(e),y=await Cu({fs:m,gitdir:r,author:i});if(!y)throw new ci("tagger");return await lie({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:y,message:s,gpgsig:o,object:l,signingKey:u,force:d})}catch(m){throw m.caller="git.annotatedTag",m}}async function uie({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==qo.clean(n))throw new oo(n,qo.clean(n));const s=`refs/heads/${n}`;if(!i&&await Ut.exists({fs:e,gitdir:t,ref:s}))throw new ho("branch",n,!1);let o;try{o=await Ut.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Ut.writeRef({fs:e,gitdir:t,ref:s,value:o}),a&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function die({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:s=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),await uie({fs:new cn(e),gitdir:n,ref:r,object:a,checkout:i,force:s})}catch(o){throw o.caller="git.branch",o}}const nF=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function FT({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:s,ref:o,filepaths:l,noCheckout:u,noUpdateHead:d,dryRun:h,force:m,track:y=!0}){let v;if(r)try{v=await Ut.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Ut.resolve({fs:e,gitdir:i,ref:o})}catch(x){if(o==="HEAD")throw x;const w=`${s}/${o}`;if(b=await Ut.resolve({fs:e,gitdir:i,ref:w}),y){const S=await ya.get({fs:e,gitdir:i});await S.set(`branch.${o}.remote`,s),await S.set(`branch.${o}.merge`,`refs/heads/${o}`),await ya.save({fs:e,gitdir:i,config:S})}await Ut.writeRef({fs:e,gitdir:i,ref:`refs/heads/${o}`,value:b})}if(!u){let x;try{x=await fie({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:o,force:m,filepaths:l})}catch(k){throw k instanceof Nr&&k.data.what===b?new M0(o,b):k}const w=x.filter(([k])=>k==="conflict").map(([k,I])=>I);if(w.length>0)throw new D0(w);const S=x.filter(([k])=>k==="error").map(([k,I])=>I);if(S.length>0)throw new jn(S.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const C=x.length;await Ba.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(x.filter(([I])=>I==="delete"||I==="delete-index").map(async function([I,R]){const j=`${a}/${R}`;I==="delete"&&await e.rm(j),k.delete({filepath:R}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ba.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[I,R]of x)if(I==="rmdir"||I==="rmdir-index"){const j=`${a}/${R}`;try{I==="rmdir-index"&&k.delete({filepath:R}),await e.rmdir(j),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(F){if(F.code==="ENOTEMPTY")console.log(`Did not delete ${R} because directory is not empty`);else throw F}}}),await Promise.all(x.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,I]){const R=`${a}/${I}`;await e.mkdir(R),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ba.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(x.filter(([I])=>I==="create"||I==="create-index"||I==="update"||I==="mkdir-index").map(async function([I,R,j,F,$]){const G=`${a}/${R}`;try{if(I!=="create-index"&&I!=="mkdir-index"){const{object:Z}=await Kr({fs:e,cache:t,gitdir:i,oid:j});if($&&await e.rm(G),F===33188)await e.write(G,Z);else if(F===33261)await e.write(G,Z,{mode:511});else if(F===40960)await e.writelink(G,Z);else throw new jn(`Invalid mode 0o${F.toString(8)} detected in blob ${j}`)}const D=await e.lstat(G);F===33261&&(D.mode=493),I==="mkdir-index"&&(D.mode=57344),k.insert({filepath:R,stats:D,oid:j}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(D){console.log(D)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const x=await Ut.expand({fs:e,gitdir:i,ref:o});x.startsWith("refs/heads")?await Ut.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:x}):await Ut.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function fie({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:s,filepaths:o}){let l=0;return Eu({fs:e,cache:t,dir:r,gitdir:a,trees:[Ns({ref:i}),G0(),mp()],map:async function(u,[d,h,m]){if(u===".")return;if(o&&!o.some(v=>nF(u,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!m,!!d,!!h].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(u)?["delete",u]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",u];case"blob":return["create",u,await d.oid(),await d.mode()];case"commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",u];case"blob-blob":return await d.oid()!==await h.oid()?s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]:await d.mode()!==await h.mode()?s?["update",u,await d.oid(),await d.mode(),!0]:["conflict",u]:["create-index",u,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",u];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",u];case"101":switch(await m.type()){case"tree":return["rmdir",u];case"blob":return await m.oid()!==await h.oid()?s?["delete",u]:["conflict",u]:["delete",u];case"commit":return["rmdir-index",u];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await d.oid()&&await m.mode()===await d.mode()&&!s)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await d.oid())return s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]}else if(s)return["update",u,await d.oid(),await d.mode(),await d.mode()!==await m.mode()];return await d.mode()!==await m.mode()?["update",u,await d.oid(),await d.mode(),!0]:await d.oid()!==await m.oid()?["update",u,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",u,await d.oid()];case"blob-tree":return["update-blob-to-tree",u];case"commit-commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await d.type()}`]}}},reduce:async function(u,d){return d=W5(d),u?u&&u[0]==="rmdir"?(d.push(u),d):(d.unshift(u),d):d}})}async function rF({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Pt.join(r,".git"),remote:i="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:u=s===void 0,dryRun:d=!1,force:h=!1,track:m=!0,cache:y={}}){try{et("fs",e),et("dir",r),et("gitdir",a);const v=s||"HEAD";return await FT({fs:new cn(e),cache:y,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:o,noCheckout:l,noUpdateHead:u,dryRun:d,force:h,track:m})}catch(v){throw v.caller="git.checkout",v}}const hie=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function kd(e){const t=hie.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function Pu({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ut.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ut.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:kd(a)}function pie(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function aF({username:e="",password:t=""}){return`Basic ${Jt.from(`${e}:${t}`).toString("base64")}`}async function Z0(e,t){const n=V5(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function kw(e){let t=0;const n=[];await Z0(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function G4(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function FC(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class oa{static flush(){return Jt.from("0000","utf8")}static delim(){return Jt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Jt.from(t));const n=t.length+4,r=FC(4,n);return Jt.concat([Jt.from(r,"utf8"),t])}static streamReader(t){const n=new G5(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function K4(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function W4(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=oa.streamReader(e);let s=await i();for(;s===null;)s=await i();if(s===!0)throw new P0;if(s.includes("version 2"))return K4(i);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new cf(`# service=${t}\\n`,s.toString("utf8"));let o=await i();for(;o===null;)o=await i();if(o===!0)return{capabilities:n,refs:r,symrefs:a};if(o=o.toString("utf8"),o.includes("version 2"))return K4(i);const[l,u]=QE(o,"\0","\\x00");if(u.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=QE(l," "," ");for(r.set(h,d);;){const m=await i();if(m===!0)break;if(m!==null){const[y,v]=QE(m.toString("utf8")," "," ");r.set(v,y)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function QE(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new cf(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const Z4=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,Y4=(e,t)=>{(t.username||t.password)&&(e.Authorization=aF(t)),t.headers&&Object.assign(e,t.headers)},e2=async e=>{try{const t=Jt.from(await kw(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Tw{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:o,url:l,headers:u,protocolVersion:d}){let{url:h,auth:m}=G4(l);const y=s?Z4(s,h):h;(m.username||m.password)&&(u.Authorization=aF(m)),d===2&&(u["Git-Protocol"]="version=2");let v,b,x=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${y}/info/refs?service=${o}`,headers:u}),b=!1,v.statusCode===401||v.statusCode===203){const w=x?i:r;if(w){if(m=await w(h,{...m,headers:{...u}}),m&&m.cancel)throw new vp;m&&(Y4(u,m),x=!0,b=!0)}}else v.statusCode===200&&x&&a&&await a(h,m);while(b);if(v.statusCode!==200){const{response:w}=await e2(v);throw new Vh(v.statusCode,v.statusMessage,w)}if(v.headers["content-type"]===`application/x-${o}-advertisement`){const w=await W4(v.body,{service:o});return w.auth=m,w}else{const{preview:w,response:S,data:E}=await e2(v);try{const C=await W4([E],{service:o});return C.auth=m,C}catch{throw new z0(w,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:s,body:o,headers:l}){const u=G4(i);u&&(i=u.url),r&&(i=Z4(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,Y4(l,s);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:o,headers:l});if(d.statusCode!==200){const{response:h}=e2(d);throw new Vh(d.statusCode,d.statusMessage,h)}return d}}function mie({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class zx{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Tw),n.set("https",Tw);const r=mie({url:t});if(!r)throw new H0(t);if(n.has(r.transport))return n.get(r.transport);throw new U0(t,r.transport,r.transport==="ssh"?pie(t):void 0)}}let vd=null;class Bg{static async read({fs:t,gitdir:n}){vd===null&&(vd=new Lg);const r=Pt.join(n,"shallow"),a=new Set;return await vd.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(s=>a.add(s))}),a}static async write({fs:t,gitdir:n,oids:r}){vd===null&&(vd=new Lg);const a=Pt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await vd.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await vd.acquire(a,async function(){await t.rm(a)})}}async function gie({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function yie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Pt.join(n,"objects/pack"));i=i.filter(s=>s.endsWith(".idx"));for(const s of i){const o=`${n}/objects/pack/${s}`,l=await PT({fs:e,cache:t,filename:o,getExternalRefDelta:a});if(l.error)throw new jn(l.error);if(l.offsets.has(r))return!0}return!1}async function X4({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=o=>Kr({fs:e,cache:t,gitdir:n,oid:o});let s=await gie({fs:e,gitdir:n,oid:r});return s||(s=await yie({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),s}function bie(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function iF(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const Ux={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Av{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function vie(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function sF(e){const t=new Av;let n="";return(async()=>(await Z0(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=vie(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class oF{static demux(t){const n=oa.streamReader(t),r=new Av,a=new Av,i=new Av,s=async function(){const o=await n();if(o===null)return s();if(o===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(o[0]){case 1:{a.write(o.slice(1));break}case 2:{i.write(o.slice(1));break}case 3:{const l=o.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}s()};return s(),{packetlines:r,packfile:a,progress:i}}}async function wie(e){const{packetlines:t,packfile:n,progress:r}=oF.demux(e),a=[],i=[],s=[];let o=!1,l=!1;return new Promise((u,d)=>{Z0(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const y=m.slice(-41).trim();y.length!==40&&d(new _u(y)),a.push(y)}else if(m.startsWith("unshallow")){const y=m.slice(-41).trim();y.length!==40&&d(new _u(y)),i.push(y)}else if(m.startsWith("ACK")){const[,y,v]=m.split(" ");s.push({oid:y,status:v}),v||(l=!0)}else m.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))})})}function xie({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:s=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const u of t)o.push(oa.encode(`want ${u}${l}
`)),l="";for(const u of r)o.push(oa.encode(`shallow ${u}
`));a!==null&&o.push(oa.encode(`deepen ${a}
`)),i!==null&&o.push(oa.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const u of s)o.push(oa.encode(`deepen-not ${u}
`));o.push(oa.flush());for(const u of n)o.push(oa.encode(`have ${u}
`));return o.push(oa.encode(`done
`)),o}async function LT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:u,remoteRef:d,remote:h,url:m,corsProxy:y,depth:v=null,since:b=null,exclude:x=[],relative:w=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:I=!1}){const R=u||await Pu({fs:e,gitdir:l,test:!0}),j=await ya.get({fs:e,gitdir:l}),F=h||R&&await j.get(`branch.${R}.remote`)||"origin",$=m||await j.get(`remote.${F}.url`);if(typeof $>"u")throw new Bi("remote OR url");const G=d||R&&await j.get(`branch.${R}.merge`)||u||"HEAD";y===void 0&&(y=await j.get("http.corsProxy"));const D=zx.getRemoteHelperFor({url:$}),Z=await D.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:y,service:"git-upload-pack",url:$,headers:C,protocolVersion:1}),q=Z.auth,ue=Z.refs;if(ue.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new au("shallow","depth");if(b!==null&&!Z.capabilities.has("deepen-since"))throw new au("deepen-since","since");if(x.length>0&&!Z.capabilities.has("deepen-not"))throw new au("deepen-not","exclude");if(w===!0&&!Z.capabilities.has("deepen-relative"))throw new au("deepen-relative","relative");const{oid:ie,fullref:ne}=Ut.resolveAgainstMap({ref:G,map:ue});for(const Le of ue.keys())Le===ne||Le==="HEAD"||Le.startsWith("refs/heads/")||S&&Le.startsWith("refs/tags/")||ue.delete(Le);const X=iF([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Ux.agent}`]);w&&X.push("deepen-relative");const ae=E?[ie]:ue.values(),B=E?[R]:await Ut.listRefs({fs:e,gitdir:l,filepath:"refs"});let J=[];for(let Le of B)try{Le=await Ut.expand({fs:e,gitdir:l,ref:Le});const Ie=await Ut.resolve({fs:e,gitdir:l,ref:Le});await X4({fs:e,cache:t,gitdir:l,oid:Ie})&&J.push(Ie)}catch{}J=[...new Set(J)];const ee=await Bg.read({fs:e,gitdir:l}),te=Z.capabilities.has("shallow")?[...ee]:[],fe=xie({capabilities:X,wants:ae,haves:J,shallows:te,depth:v,since:b,exclude:x}),ve=Jt.from(await kw(fe)),De=await D.connect({http:n,onProgress:r,corsProxy:y,service:"git-upload-pack",url:$,auth:q,body:[ve],headers:C}),Ae=await wie(De.body);De.headers&&(Ae.headers=De.headers);for(const Le of Ae.shallows)if(!ee.has(Le))try{const{object:Ie}=await Kr({fs:e,cache:t,gitdir:l,oid:Le}),z=new Vr(Ie),Se=await Promise.all(z.headers().parent.map(de=>X4({fs:e,cache:t,gitdir:l,oid:de})));Se.length===0||Se.every(de=>de)||ee.add(Le)}catch{ee.add(Le)}for(const Le of Ae.unshallows)ee.delete(Le);if(await Bg.write({fs:e,gitdir:l,oids:ee}),E){const Le=new Map([[ne,ie]]),Ie=new Map;let z=10,Se=ne;for(;z--;){const se=Z.symrefs.get(Se);if(se===void 0)break;Ie.set(Se,se),Se=se}const Te=ue.get(Se);Te&&Le.set(Se,Te);const{pruned:de}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:F,refs:Le,symrefs:Ie,tags:S,prune:k});k&&(Ae.pruned=de)}else{const{pruned:Le}=await Ut.updateRemoteRefs({fs:e,gitdir:l,remote:F,refs:ue,symrefs:Z.symrefs,tags:S,prune:k,pruneTags:I});k&&(Ae.pruned=Le)}if(Ae.HEAD=Z.symrefs.get("HEAD"),Ae.HEAD===void 0){const{oid:Le}=Ut.resolveAgainstMap({ref:"HEAD",map:ue});for(const[Ie,z]of ue.entries())if(Ie!=="HEAD"&&z===Le){Ae.HEAD=Ie;break}}const Ne=ne.startsWith("refs/tags")?"tag":"branch";if(Ae.FETCH_HEAD={oid:ie,description:`${Ne} '${kd(ne)}' of ${$}`},r||a){const Le=sF(Ae.progress);Z0(Le,async Ie=>{if(a&&await a(Ie),r){const z=Ie.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);z&&await r({phase:z[1].trim(),loaded:parseInt(z[2],10),total:parseInt(z[3],10)})}})}const Ce=Jt.from(await kw(Ae.packfile));if(De.body.error)throw De.body.error;const Pe=Ce.slice(-20).toString("hex"),Qe={defaultBranch:Ae.HEAD,fetchHead:Ae.FETCH_HEAD.oid,fetchHeadDescription:Ae.FETCH_HEAD.description};if(Ae.headers&&(Qe.headers=Ae.headers),k&&(Qe.pruned=Ae.pruned),Pe!==""&&!bie(Ce)){Qe.packfile=`objects/pack/pack-${Pe}.pack`;const Le=Pt.join(l,Qe.packfile);await e.write(Le,Ce);const Ie=Se=>Kr({fs:e,cache:t,gitdir:l,oid:Se}),z=await qh.fromPack({pack:Ce,getExternalRefDelta:Ie,onProgress:r});await e.write(Le.replace(/\.pack$/,".idx"),await z.toBuffer())}return Qe}async function lF({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(s=>r+"/"+s);for(const s of i)await e.mkdir(s);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function _ie({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:u,gitdir:d,url:h,corsProxy:m,ref:y,remote:v,depth:b,since:x,exclude:w,relative:S,singleBranch:E,noCheckout:C,noTags:k,headers:I}){try{if(await lF({fs:e,gitdir:d}),await tF({fs:e,gitdir:d,remote:v,url:h,force:!1}),m){const F=await ya.get({fs:e,gitdir:d});await F.set("http.corsProxy",m),await ya.save({fs:e,gitdir:d,config:F})}const{defaultBranch:R,fetchHead:j}=await LT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:d,ref:y,remote:v,corsProxy:m,depth:b,since:x,exclude:w,relative:S,singleBranch:E,headers:I,tags:!k});if(j===null)return;y=y||R,y=y.replace("refs/heads/",""),await FT({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:u,gitdir:d,ref:y,remote:v,noCheckout:C})}catch(R){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),R}}async function Sie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u=Pt.join(l,".git"),url:d,corsProxy:h=void 0,ref:m=void 0,remote:y="origin",depth:v=void 0,since:b=void 0,exclude:x=[],relative:w=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:I={}}){try{return et("fs",e),et("http",t),et("gitdir",u),E||et("dir",l),et("url",d),await _ie({fs:new cn(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u,url:d,corsProxy:h,ref:m,remote:y,depth:v,since:b,exclude:x,relative:w,singleBranch:S,noCheckout:E,noTags:C,headers:k})}catch(R){throw R.caller="git.clone",R}}async function Eie({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:y,cache:v={}}){try{et("fs",e),l||et("message",a),o&&et("onSign",t);const b=new cn(e);return await Bx({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l,dryRun:u,noUpdateBranch:d,ref:h,parent:m,tree:y})}catch(b){throw b.caller="git.commit",b}}async function Cie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return et("fs",e),et("gitdir",n),await Pu({fs:new cn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function kie({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ut.exists({fs:e,gitdir:t,ref:n}))throw new Nr(n);const a=await Ut.expand({fs:e,gitdir:t,ref:n}),i=await Pu({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await Ut.resolve({fs:e,gitdir:t,ref:a});await Ut.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Ut.deleteRef({fs:e,gitdir:t,ref:a});const s=kd(n),o=await ya.get({fs:e,gitdir:t});await o.deleteSection("branch",s),await ya.save({fs:e,gitdir:t,config:o})}async function Tie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await kie({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Aie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{et("fs",e),et("ref",r),await Ut.deleteRef({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Nie({fs:e,gitdir:t,remote:n}){const r=await ya.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await ya.save({fs:e,gitdir:t,config:r})}async function Rie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("remote",r),await Nie({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Iie({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ut.deleteRef({fs:e,gitdir:t,ref:n})}async function jie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await Iie({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Oie({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Die({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await PT({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(u.error)throw new jn(u.error);for(const d of u.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function Mie({fs:e,cache:t,gitdir:n,oid:r}){const a=o=>Kr({fs:e,cache:t,gitdir:n,oid:o}),i=await Oie({fs:e,gitdir:n,oid:r}),s=await Die({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const o of s)i.indexOf(o)===-1&&i.push(o);if(i.length===1)return i[0];throw i.length>1?new O0("oids",r,i):new Nr(`an object matching "${r}"`)}async function Pie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Mie({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function Fie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ut.expand({fs:new cn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function $T({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let s=r.map((o,l)=>({index:l,oid:o}));for(;s.length;){const o=new Set;for(const{oid:u,index:d}of s)a[u]||(a[u]=new Set),a[u].add(d),a[u].size===i&&o.add(u);if(o.size>0)return[...o];const l=new Map;for(const{oid:u,index:d}of s)try{const{object:h}=await Kr({fs:e,cache:t,gitdir:n,oid:u}),m=Vr.from(h),{parent:y}=m.parseHeaders();for(const v of y)(!a[v]||!a[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}s=Array.from(l.values())}return[]}const t2=/^.*(\r?\n|$)/gm;function Lie({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],s=t[2],o=i.match(t2),l=a.match(t2),u=s.match(t2),d=rae(o,l,u),h=7;let m="",y=!0;for(const v of d)v.ok&&(m+=v.ok.join("")),v.conflict&&(y=!1,m+=`${"<".repeat(h)} ${n}
`,m+=v.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=v.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:y,mergedText:m}}async function $ie({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),index:a,ourOid:i,baseOid:s,theirOid:o,ourName:l="ours",baseName:u="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:y}){const v=Ns({ref:i}),b=Ns({ref:s}),x=Ns({ref:o}),w=[],S=[],E=[],C=[],k=await Eu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,x],map:async function(I,[R,j,F]){const $=xw(I),G=await Cw(R,j),D=await Cw(F,j);switch(`${G}-${D}`){case"false-false":return{mode:await j.mode(),path:$,oid:await j.oid(),type:await j.type()};case"false-true":return F?{mode:await F.mode(),path:$,oid:await F.oid(),type:await F.type()}:void 0;case"true-false":return R?{mode:await R.mode(),path:$,oid:await R.oid(),type:await R.type()}:void 0;case"true-true":{if(R&&j&&F&&await R.type()==="blob"&&await j.type()==="blob"&&await F.type()==="blob")return Bie({fs:e,gitdir:r,path:$,ours:R,base:j,theirs:F,ourName:l,baseName:u,theirName:d,mergeDriver:y}).then(async Z=>{if(Z.cleanMerge)m||a.insert({filepath:I,oid:Z.mergeResult.oid,stage:0});else if(w.push(I),S.push(I),!m){const q=await j.oid(),ue=await R.oid(),ie=await F.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:q,stage:1}),a.insert({filepath:I,oid:ue,stage:2}),a.insert({filepath:I,oid:ie,stage:3})}return Z.mergeResult});if(j&&!R&&F&&await j.type()==="blob"&&await F.type()==="blob"){if(w.push(I),E.push(I),!m){const Z=await j.oid(),q=await F.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:Z,stage:1}),a.insert({filepath:I,oid:q,stage:3})}return{mode:await F.mode(),oid:await F.oid(),type:"blob",path:$}}if(j&&R&&!F&&await j.type()==="blob"&&await R.type()==="blob"){if(w.push(I),C.push(I),!m){const Z=await j.oid(),q=await R.oid();a.delete({filepath:I}),a.insert({filepath:I,oid:Z,stage:1}),a.insert({filepath:I,oid:q,stage:2})}return{mode:await R.mode(),oid:await R.oid(),type:"blob",path:$}}if(j&&!R&&!F&&await j.type()==="blob")return;throw new yp}}},reduce:w.length!==0&&(!n||m)?void 0:async(I,R)=>{const j=R.filter(Boolean);if(I&&!(I&&I.type==="tree"&&j.length===0)){if(j.length>0){const $=new zi(j).toObject(),G=await Hi({fs:e,gitdir:r,type:"tree",object:$,dryRun:h});I.oid=G}return I}}});return w.length!==0?(n&&!m&&await Eu({fs:e,cache:t,dir:n,gitdir:r,trees:[Ns({ref:k.oid})],map:async function(I,[R]){const j=`${n}/${I}`;if(await R.type()==="blob"){const F=await R.mode(),$=new TextDecoder().decode(await R.content());await e.write(j,$,{mode:F})}return!0}}),new bp(w,S,E,C)):k.oid}async function Bie({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:s,theirName:o,baseName:l,dryRun:u,mergeDriver:d=Lie}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const y=Jt.from(await r.content()).toString("utf8"),v=Jt.from(await a.content()).toString("utf8"),b=Jt.from(await i.content()).toString("utf8"),{mergedText:x,cleanMerge:w}=await d({branches:[l,s,o],contents:[v,y,b],path:n}),S=await Hi({fs:e,gitdir:t,type:"blob",object:Jt.from(x,"utf8"),dryRun:u});return{cleanMerge:w,mergeResult:{mode:m,path:n,oid:S,type:h}}}async function cF({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:y,signingKey:v,onSign:b,mergeDriver:x}){a===void 0&&(a=await Pu({fs:e,gitdir:r,fullname:!0})),a=await Ut.expand({fs:e,gitdir:r,ref:a}),i=await Ut.expand({fs:e,gitdir:r,ref:i});const w=await Ut.resolve({fs:e,gitdir:r,ref:a}),S=await Ut.resolve({fs:e,gitdir:r,ref:i}),E=await $T({fs:e,cache:t,gitdir:r,oids:[w,S]});if(E.length!==1)throw new yp;const C=E[0];if(C===S)return{oid:w,alreadyMerged:!0};if(s&&C===w)return!l&&!u&&await Ut.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(o)throw new F0;const k=await Ba.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async R=>$ie({fs:e,cache:t,dir:n,gitdir:r,index:R,ourOid:w,theirOid:S,baseOid:C,ourName:kd(a),baseName:"base",theirName:kd(i),dryRun:l,abortOnConflict:d,mergeDriver:x}));if(k instanceof bp)throw k;return h||(h=`Merge branch '${kd(i)}' into ${kd(a)}`),{oid:await Bx({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[w,S],author:m,committer:y,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:u}),tree:k,mergeCommit:!0}}}async function uF({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:u,ref:d,url:h,remote:m,remoteRef:y,prune:v,pruneTags:b,fastForward:x,fastForwardOnly:w,corsProxy:S,singleBranch:E,headers:C,author:k,committer:I,signingKey:R}){try{if(!d){const $=await Pu({fs:e,gitdir:u});if(!$)throw new Bi("ref");d=$}const{fetchHead:j,fetchHeadDescription:F}=await LT({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:u,corsProxy:S,ref:d,url:h,remote:m,remoteRef:y,singleBranch:E,headers:C,prune:v,pruneTags:b});await cF({fs:e,cache:t,gitdir:u,ours:d,theirs:j,fastForward:x,fastForwardOnly:w,message:`Merge ${F}`,author:k,committer:I,signingKey:R,dryRun:!1,noUpdateBranch:!1}),await FT({fs:e,cache:t,onProgress:r,dir:l,gitdir:u,ref:d,remote:m,noCheckout:!1})}catch(j){throw j.caller="git.pull",j}}async function zie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,corsProxy:y,singleBranch:v,headers:b={},cache:x={}}){try{et("fs",e),et("http",t),et("gitdir",l);const w={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await uF({fs:new cn(e),cache:x,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:y,singleBranch:v,headers:b,author:w,committer:w})}catch(w){throw w.caller="git.fastForward",w}}async function Uie({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,remote:d,remoteRef:h,url:m,corsProxy:y,depth:v=null,since:b=null,exclude:x=[],relative:w=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:I=!1,cache:R={}}){try{return et("fs",e),et("http",t),et("gitdir",l),await LT({fs:new cn(e),cache:R,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,gitdir:l,ref:u,remote:d,remoteRef:h,url:m,corsProxy:y,depth:v,since:b,exclude:x,relative:w,tags:S,singleBranch:E,headers:C,prune:k,pruneTags:I})}catch(j){throw j.caller="git.fetch",j}}async function Hie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await $T({fs:new cn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function dF({fs:e,filepath:t}){if(await e.exists(Pt.join(t,".git")))return t;{const n=Hh(t);if(n===t)throw new Nr(`git root for ${t}`);return dF({fs:e,filepath:n})}}async function qie({fs:e,filepath:t}){try{return et("fs",e),et("filepath",t),await dF({fs:new cn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function Vie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await $g({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function Gie({fs:e,gitdir:t,path:n}){return(await ya.get({fs:e,gitdir:t})).getall(n)}async function Kie({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await Gie({fs:new cn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function Wie({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1}){try{et("http",e),et("url",i);const u=await zx.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:1}),d={capabilities:[...u.capabilities]};for(const[h,m]of u.refs){const y=h.split("/"),v=y.pop();let b=d;for(const x of y)b[x]=b[x]||{},b=b[x];b[v]=m}for(const[h,m]of u.symrefs){const y=h.split("/"),v=y.pop();let b=d;for(const x of y)b[x]=b[x]||{},b=b[x];b[v]=m}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function fF(e,t,n,r){const a=[];for(const[i,s]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),u=a[a.length-1],d=u.ref===l?u:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=s}continue}const o={ref:i,oid:s};n&&e.symrefs.has(i)&&(o.target=e.symrefs.get(i)),a.push(o)}return a}async function Zie({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{et("http",e),et("url",i);const d=await zx.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const m of d.capabilities){const[y,v]=m.split("=");v?h[y]=v:h[y]=!0}return{protocolVersion:1,capabilities:h,refs:fF(d,void 0,!0,!0)}}catch(u){throw u.caller="git.getRemoteInfo2",u}}async function Yie({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=gp.wrap({type:e,object:t})),r=await ac(t)),{oid:r,object:t}}async function Xie({object:e}){try{et("object",e),typeof e=="string"?e=Jt.from(e,"utf8"):e=Jt.from(e);const t="blob",{oid:n,object:r}=await Yie({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function Jie({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Pt.join(r,i);const s=await e.read(i),o=u=>Kr({fs:e,cache:t,gitdir:a,oid:u}),l=await qh.fromPack({pack:s,getExternalRefDelta:o,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function Qie({fs:e,onProgress:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a,cache:i={}}){try{return et("fs",e),et("dir",n),et("gitdir",n),et("filepath",a),await Jie({fs:new cn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(s){throw s.caller="git.indexPack",s}}async function ese({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){try{return et("fs",e),et("gitdir",r),t||et("dir",n),await lF({fs:new cn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function hF({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const s=await Bg.read({fs:e,gitdir:n});if(!r)throw new Bi("oid");if(!a)throw new Bi("ancestor");if(r===a)return!1;const o=[r],l=new Set;let u=0;for(;o.length;){if(u++===i)throw new $0(i);const d=o.shift(),{type:h,object:m}=await Kr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Ti(d,h,"commit");const y=Vr.from(m).parse();for(const v of y.parent)if(v===a)return!0;if(!s.has(d))for(const v of y.parent)l.has(v)||(o.push(v),l.add(v))}return!1}async function tse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:s={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),et("ancestor",a),await hF({fs:new cn(e),cache:s,gitdir:n,oid:r,ancestor:a,depth:i})}catch(o){throw o.caller="git.isDescendent",o}}async function nse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r),wp.isIgnored({fs:new cn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function rse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("gitdir",n),Ut.listBranches({fs:new cn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function ase({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ut.resolve({gitdir:t,fs:e,ref:n}),i=[];return await pF({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ba.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function pF({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:s}=await xp({fs:e,cache:t,gitdir:n,oid:r});for(const o of s)o.type==="tree"?await pF({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:a,prefix:Pt.join(i,o.path)}):a.push(Pt.join(i,o.path))}async function ise({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),await ase({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function sse({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ut.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof Nr)return[]}return(await xp({fs:e,cache:t,gitdir:n,oid:a})).tree.map(o=>({target:o.path,note:o.oid}))}async function ose({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),await sse({fs:new cn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function lse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("gitdir",n),Ut.listRefs({fs:new cn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function cse({fs:e,gitdir:t}){const n=await ya.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const s=await n.get(`remote.${i}.url`);return{remote:i,url:s}}))}async function use({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),await cse({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function dse(e){const t=oa.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...s]=r.split(" "),o={ref:i,oid:a};for(const l of s){const[u,d]=l.split(":");u==="symref-target"?o.target=d:u==="peeled"&&(o.peeled=d)}n.push(o)}return n}async function fse({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(oa.encode(`command=ls-refs
`)),r.push(oa.encode(`agent=${Ux.agent}
`)),(n||t||e)&&r.push(oa.delim()),n&&r.push(oa.encode("peel")),t&&r.push(oa.encode("symrefs")),e&&r.push(oa.encode(`ref-prefix ${e}`)),r.push(oa.flush()),r}async function hse({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:u,symrefs:d,peelTags:h}){try{et("http",e),et("url",i);const m=await Tw.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(m.protocolVersion===1)return fF(m,u,d,h);const y=await fse({prefix:u,symrefs:d,peelTags:h}),v=await Tw.connect({http:e,auth:m.auth,headers:s,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,body:y});return dse(v.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function pse({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),Ut.listTags({fs:new cn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function mse(e,t){return e.committer.timestamp-t.committer.timestamp}const gse="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function J4({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===gse)return;const i=r;let s;const o=await Kh({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return a===o.oid?s=o.path:(s=await mF({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function mF({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:s=[],parentPath:o=""}){const l=r.entries().map(function(u){let d;return u.oid===a?(d=Pt.join(o,u.path),s.push(d)):u.type==="tree"&&(d=Kr({fs:e,cache:t,gitdir:n,oid:u.oid}).then(function({object:h}){return mF({fs:e,cache:t,gitdir:n,tree:zi.from(h),fileId:a,oid:i,filepaths:s,parentPath:Pt.join(o,u.path)})})),d});return await Promise.all(l),s}async function yse({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l}){const u=typeof s>"u"?void 0:Math.floor(s.valueOf()/1e3),d=[],h=await Bg.read({fs:e,gitdir:n}),m=await Ut.resolve({fs:e,gitdir:n,ref:a}),y=[await Zh({fs:e,cache:t,gitdir:n,oid:m})];let v,b,x;function w(S){x&&r&&d.push(S)}for(;y.length>0;){const S=y.pop();if(u!==void 0&&S.commit.committer.timestamp<=u)break;if(r){let E;try{E=await K0({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=S,x=!0}catch(C){if(C instanceof Nr){let k=l&&v;if(k&&(k=await J4({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const I=await J4({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(I))if(k=k.filter(R=>I.indexOf(R)===-1),k.length===1)k=k[0],r=k,b&&d.push(b);else{k=!1,b&&d.push(b);break}}}else r=k,b&&d.push(b);if(!k){if(x&&v&&(d.push(b),!o))break;if(!o&&!l)throw C}b=S,x=!1}else throw C}}else d.push(S);if(i!==void 0&&d.length===i){w(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await Zh({fs:e,cache:t,gitdir:n,oid:E});y.map(k=>k.oid).includes(C.oid)||y.push(C)}y.length===0&&w(S),y.sort((E,C)=>mse(E.commit,C.commit))}return d}async function bse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:s,force:o,follow:l,cache:u={}}){try{return et("fs",e),et("gitdir",n),et("ref",a),await yse({fs:new cn(e),cache:u,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l})}catch(d){throw d.caller="git.log",d}}async function vse({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:y,signingKey:v,cache:b={},mergeDriver:x}){try{et("fs",e),v&&et("onSign",t);const w=new cn(e),S=await Cu({fs:w,gitdir:r,author:m});if(!S&&(!o||!s))throw new ci("author");const E=await Wh({fs:w,gitdir:r,author:S,committer:y});if(!E&&(!o||!s))throw new ci("committer");return await cF({fs:w,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:u,abortOnConflict:d,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:x})}catch(w){throw w.caller="git.merge",w}}const wse={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function gF({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new O5,s=[];function o(d,h){const m=Jt.from(d,h);s.push(m),i.update(m)}async function l({stype:d,object:h}){const m=wse[d];let y=h.length,v=y>15?128:0;const b=y&15;y=y>>>4;let x=(v|m|b).toString(16);for(o(x,"hex");v;)v=y>127?128:0,x=v|y&127,o(FC(2,x),"hex"),y=y>>>7;o(Jt.from(await Z5(h)))}o("PACK"),o("00000002","hex"),o(FC(8,a.length),"hex");for(const d of a){const{type:h,object:m}=await Kr({fs:e,cache:t,gitdir:r,oid:d});await l({object:m,stype:h})}const u=i.digest();return s.push(u),s}async function xse({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await gF({fs:e,cache:t,gitdir:n,oids:r}),s=Jt.from(await kw(i)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return a?(await e.write(Pt.join(n,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function _se({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await xse({fs:new cn(e),cache:i,gitdir:n,oids:r,write:a})}catch(s){throw s.caller="git.packObjects",s}}async function Sse({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,prune:y=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:x=!1,corsProxy:w,singleBranch:S,headers:E={},author:C,committer:k,signingKey:I,cache:R={}}){try{et("fs",e),et("gitdir",l);const j=new cn(e),F=await Cu({fs:j,gitdir:l,author:C});if(!F)throw new ci("author");const $=await Wh({fs:j,gitdir:l,author:F,committer:k});if(!$)throw new ci("committer");return await uF({fs:j,cache:R,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForward:b,fastForwardOnly:x,corsProxy:w,singleBranch:S,headers:E,author:F,committer:$,signingKey:I,prune:y,pruneTags:v})}catch(j){throw j.caller="git.pull",j}}async function Ese({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),start:a,finish:i}){const s=await Bg.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const h of a)o.add(await Ut.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Ut.resolve({fs:e,gitdir:r,ref:h});l.add(m)}catch{}const u=new Set;async function d(h){u.add(h);const{type:m,object:y}=await Kr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const b=wi.from(y).headers().object;return d(b)}if(m!=="commit")throw new Ti(h,m,"commit");if(!s.has(h)){const b=Vr.from(y).headers().parent;for(h of b)!l.has(h)&&!u.has(h)&&await d(h)}}for(const h of o)await d(h);return u}async function n2({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new Set;async function s(o){if(i.has(o))return;i.add(o);const{type:l,object:u}=await Kr({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const h=wi.from(u).headers().object;await s(h)}else if(l==="commit"){const h=Vr.from(u).headers().tree;await s(h)}else if(l==="tree"){const d=zi.from(u);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await s(h.oid)}}for(const o of a)await s(o);return i}async function Cse(e){const t={};let n="";const r=oa.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new cf('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const s of i){if(s.trim()==="")continue;const o=s.slice(0,2),l=s.slice(3);let u=l.indexOf(" ");u===-1&&(u=l.length);const d=l.slice(0,u),h=l.slice(u+1);t.refs[d]={ok:o==="ok",error:h}}return t}async function kse({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(oa.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(oa.flush()),n}async function Tse({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:u,ref:d,remoteRef:h,remote:m,url:y,force:v=!1,delete:b=!1,corsProxy:x,headers:w={}}){const S=d||await Pu({fs:e,gitdir:u});if(typeof S>"u")throw new Bi("ref");const E=await ya.get({fs:e,gitdir:u});m=m||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=y||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof C>"u")throw new Bi("remote OR url");const k=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Bi("remoteRef");x===void 0&&(x=await E.get("http.corsProxy"));const I=await Ut.expand({fs:e,gitdir:u,ref:S}),R=b?"0000000000000000000000000000000000000000":await Ut.resolve({fs:e,gitdir:u,ref:I}),j=zx.getRemoteHelperFor({url:C}),F=await j.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:x,service:"git-receive-pack",url:C,headers:w,protocolVersion:1}),$=F.auth;let G;if(!k)G=I;else try{G=await Ut.expandAgainstMap({ref:k,map:F.refs})}catch(ee){if(ee instanceof Nr)G=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw ee}const D=F.refs.get(G)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:m,url:C,localRef:{ref:b?"(delete)":I,oid:R},remoteRef:{ref:G,oid:D}}))throw new vp;const Z=!F.capabilities.has("no-thin");let q=new Set;if(!b){const ee=[...F.refs.values()];let te=new Set;if(D!=="0000000000000000000000000000000000000000"){const fe=await $T({fs:e,cache:t,gitdir:u,oids:[R,D]});for(const ve of fe)ee.push(ve);Z&&(te=await n2({fs:e,cache:t,gitdir:u,oids:fe}))}if(!ee.includes(R)){const fe=await Ese({fs:e,cache:t,gitdir:u,start:[R],finish:ee});q=await n2({fs:e,cache:t,gitdir:u,oids:fe})}if(Z){try{const fe=await Ut.resolve({fs:e,gitdir:u,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:ve}=await Ut.resolveAgainstMap({ref:fe.replace(`refs/remotes/${m}/`,""),fullref:fe,map:F.refs}),De=[ve];for(const Ae of await n2({fs:e,cache:t,gitdir:u,oids:De}))te.add(Ae)}catch{}for(const fe of te)q.delete(fe)}if(R===D&&(v=!0),!v){if(I.startsWith("refs/tags")&&D!=="0000000000000000000000000000000000000000")throw new Gh("tag-exists");if(R!=="0000000000000000000000000000000000000000"&&D!=="0000000000000000000000000000000000000000"&&!await hF({fs:e,cache:t,gitdir:u,oid:R,ancestor:D,depth:-1}))throw new Gh("not-fast-forward")}}const ue=iF([...F.capabilities],["report-status","side-band-64k",`agent=${Ux.agent}`]),ie=await kse({capabilities:ue,triplets:[{oldoid:D,oid:R,fullRef:G}]}),ne=b?[]:await gF({fs:e,cache:t,gitdir:u,oids:[...q]}),X=await j.connect({http:n,onProgress:r,corsProxy:x,service:"git-receive-pack",url:C,auth:$,headers:w,body:[...ie,...ne]}),{packfile:ae,progress:B}=await oF.demux(X.body);if(a){const ee=sF(B);Z0(ee,async te=>{await a(te)})}const J=await Cse(ae);if(X.headers&&(J.headers=X.headers),m&&J.ok&&J.refs[G].ok&&!I.startsWith("refs/tags")){const ee=`refs/remotes/${m}/${G.replace("refs/heads","")}`;b?await Ut.deleteRef({fs:e,gitdir:u,ref:ee}):await Ut.writeRef({fs:e,gitdir:u,ref:ee,value:R})}if(J.ok&&Object.values(J.refs).every(ee=>ee.ok))return J;{const ee=Object.entries(J.refs).filter(([te,fe])=>!fe.ok).map(([te,fe])=>`
  - ${te}: ${fe.error}`).join("");throw new L0(ee,J)}}async function Ase({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,dir:l,gitdir:u=Pt.join(l,".git"),ref:d,remoteRef:h,remote:m="origin",url:y,force:v=!1,delete:b=!1,corsProxy:x,headers:w={},cache:S={}}){try{return et("fs",e),et("http",t),et("gitdir",u),await Tse({fs:new cn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,gitdir:u,ref:d,remoteRef:h,remote:m,url:y,force:v,delete:b,corsProxy:x,headers:w})}catch(E){throw E.caller="git.push",E}}async function yF({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=wi.from(i).parse().object,yF({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new Ti(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function bF({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await K0({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await yF({fs:e,cache:t,gitdir:n,oid:r})}async function Nse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await bF({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readBlob",s}}async function vF({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Zh({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Rse({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ut.resolve({gitdir:n,fs:e,ref:r}),{blob:s}=await bF({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return s}async function Ise({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oid",a),await Rse({fs:new cn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(s){throw s.caller="git.readNote",s}}async function jse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:s=void 0,cache:o={}}){try{et("fs",e),et("gitdir",n),et("oid",r);const l=new cn(e);i!==void 0&&(r=await K0({fs:l,cache:o,gitdir:n,oid:r,filepath:i}));const d=await Kr({fs:l,cache:o,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Vr.from(d.object).parse();break;case"tree":d.object=zi.from(d.object).entries();break;case"blob":s?d.object=d.object.toString(s):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=wi.from(d.object).parse();break;default:throw new Ti(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function Ose({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new Ti(r,a,"tag");const s=wi.from(i);return{oid:r,tag:s.parse(),payload:s.payload()}}async function Dse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Ose({fs:new cn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function Mse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await xp({fs:new cn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readTree",s}}async function Pse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r),await Ba.acquire({fs:new cn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function Fse({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l}){let u;try{u=await Ut.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof Nr))throw v}let h=(await xp({fs:e,gitdir:r,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const m=await W0({fs:e,gitdir:r,tree:h});return await Bx({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:u&&[u],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function Lse({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l,cache:u={}}){try{et("fs",e),et("gitdir",r),et("oid",i);const d=new cn(e),h=await Cu({fs:d,gitdir:r,author:s});if(!h)throw new ci("author");const m=await Wh({fs:d,gitdir:r,author:h,committer:o});if(!m)throw new ci("committer");return await Fse({fs:d,cache:u,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function $se({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==qo.clean(r))throw new oo(r,qo.clean(r));if(n!==qo.clean(n))throw new oo(n,qo.clean(n));const i=`refs/heads/${n}`,s=`refs/heads/${r}`;if(await Ut.exists({fs:e,gitdir:t,ref:s}))throw new ho("branch",r,!1);const l=await Ut.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ut.writeRef({fs:e,gitdir:t,ref:s,value:l}),await Ut.deleteRef({fs:e,gitdir:t,ref:i});const d=await Pu({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await Ut.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function Bse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oldref",a),await $se({fs:new cn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(s){throw s.caller="git.renameBranch",s}}async function wF({gitdir:e,type:t,object:n}){return ac(gp.wrap({type:t,object:n}))}async function zse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const s=new cn(e);let o,l;try{o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(o)try{o=await K0({fs:s,cache:i,gitdir:n,oid:o,filepath:r})}catch{o=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await s.read(Pt.join(t,r));d&&(l=await wF({gitdir:n,type:"blob",object:d}),o===l&&(u=await s.lstat(Pt.join(t,r)))),await Ba.acquire({fs:s,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),o&&h.insert({filepath:r,stats:u,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function Use({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,depth:a}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Ut.resolve({fs:new cn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function Hse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r,value:a,append:i=!1}){try{et("fs",e),et("gitdir",n),et("path",r);const s=new cn(e),o=await ya.get({fs:s,gitdir:n});i?await o.append(r,a):await o.set(r,a),await ya.save({fs:s,gitdir:n,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function xF({fs:e,gitdir:t,commit:n}){const r=Vr.from(n).toObject();return await Hi({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Aw{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=Aw.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${s} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,s)=>n?`stash@{${s}}: ${i.split("	")[1]}`:i)}}const qse={stage:mp,workdir:G0};let r2;async function Yh(e,t){return r2===void 0&&(r2=new Lg),r2.acquire(e,t)}async function Vse(e,t,n,r,a=null){const i=Pt.join(n,r),s=await e.lstat(i);if(!s)throw new Nr(i);if(s.isDirectory())throw new jn(`${i}: file expected, but found directory`);const o=a?await q5({fs:e,gitdir:t,oid:a}):void 0;let l=o?a:void 0;return o||await Yh({fs:e,gitdir:t,currentFilepath:i},async()=>{const u=s.isSymbolicLink()?await e.readlink(i).then(Y5):await e.read(i);if(u===null)throw new Nr(i);l=await Hi({fs:e,gitdir:t,type:"blob",object:u})}),l}async function Gse({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const s=await Promise.all(i.children.map(a));i.oid=await W0({fs:e,gitdir:n,tree:s}),i.mode=16384}}else i.type==="blob"&&(i.oid=await Vse(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function Q4({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(y=>typeof y=="string"?qse[y]():y),s=[],d=await Eu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(y,[v,b])=>{if(!(y==="."||await wp.isIgnored({fs:e,dir:t,gitdir:n,filepath:y}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&s.push([v,b]),{mode:await b.mode(),path:y,oid:await b.oid(),type:await b.type()}},reduce:async(y,v)=>(v=v.filter(Boolean),y?(y.children=v,y):v.length>0?v:void 0),iterate:async(y,v)=>{const b=[];for(const x of v){const[w,S]=x;a?S&&(await e.exists(`${t}/${S.toString()}`)?b.push(x):s.push([null,S])):w&&(S?b.push(x):s.push([w,null]))}return b.length?Promise.all(b.map(y)):[]}});if(s.length===0||d.length===0)return null;const m=(await Gse({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(y=>({mode:y.mode,path:y.path,oid:y.oid,type:y.type}));return W0({fs:e,gitdir:n,tree:m})}async function Kse({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const s=[],o=[],l=await Eu({fs:e,cache:{},dir:t,gitdir:n,trees:[Ns({ref:a}),Ns({ref:r})],map:async(u,[d,h])=>{if(u==="."||await wp.isIgnored({fs:e,dir:t,gitdir:n,filepath:u}))return;const m=h?await h.type():await d.type();if(m!=="tree"&&m!=="blob")return;if(!h&&d){const v=m==="tree"?"rmdir":"rm";return m==="tree"&&s.push(u),m==="blob"&&i&&o.push({filepath:u,oid:await d.oid()}),{method:v,filepath:u}}const y=await h.oid();if(!d||await d.oid()!==y)return m==="tree"?{method:"mkdir",filepath:u}:(i&&o.push({filepath:u,oid:y,stats:await e.lstat(Pt.join(t,u))}),{method:"write",filepath:u,oid:y})}});await Yh({fs:e,gitdir:n,dirRemoved:s,ops:l},async()=>{for(const u of l){const d=Pt.join(t,u.filepath);switch(u.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!s.some(h=>d.startsWith(h))){const{object:h}=await Kr({fs:e,cache:{},gitdir:n,oid:u.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await Ba.acquire({fs:e,gitdir:n,cache:{}},async u=>{o.forEach(({filepath:d,stats:h,oid:m})=>{u.insert({filepath:d,stats:h,oid:m})})})}class Wl{constructor({fs:t,dir:n,gitdir:r=Pt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Pt.join(this.gitdir,Wl.refStash)}get refLogsStashPath(){return Pt.join(this.gitdir,Wl.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Cu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new ci("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return xF({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new oo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Zh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ut.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Wl.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Aw.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Yh({filepath:i,entry:a},async()=>{const s=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,s+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Aw.getStashReflogEntry(r,t)}}async function Wse({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Wl({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await Pu({fs:e,gitdir:n,fullname:!1}),s=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await vF({fs:e,dir:t,gitdir:n,oid:s})).commit.message,u=[s];let d=null,h=Ns({ref:"HEAD"});const m=await Q4({fs:e,dir:t,gitdir:n,treePair:[Ns({ref:"HEAD"}),"stage"]});if(m){const x=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:u});u.push(x),d=m,h=mp()}const y=await Q4({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(y){const x=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:y,parent:[u[u.length-1]]});u.push(x),d=y}if(!d||!m&&!y)throw new Nr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${s.substring(0,7)} ${l}`,b=await a.writeStashCommit({message:v,tree:d,parent:u});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await rF({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function _F({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Wl({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:s=null}=i.commit?i.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){const u=(await Zh({fs:e,cache:{},gitdir:n,oid:s[o+1]})).commit.message.startsWith("stash-Index");await Kse({fs:e,dir:t,gitdir:n,stashCommit:s[o+1],parentCommit:s[o],wasStaged:u})}}async function SF({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Wl({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const s=a.refStashPath;await Yh(s,async()=>{await e.exists(s)&&await e.rm(s)});const o=await a.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=a.refLogsStashPath;await Yh({reflogEntries:o,stashReflogPath:l,stashMgr:a},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const u=o[o.length-1].split(" ")[1];await a.writeStashRef(u)}else await e.rm(l)})}async function Zse({fs:e,dir:t,gitdir:n}){return new Wl({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function Yse({fs:e,dir:t,gitdir:n}){const r=new Wl({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await Yh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function Xse({fs:e,dir:t,gitdir:n,refIdx:r=0}){await _F({fs:e,dir:t,gitdir:n,refIdx:r}),await SF({fs:e,dir:t,gitdir:n,refIdx:r})}async function Jse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){et("fs",e),et("dir",t),et("gitdir",n),et("op",r);const s={push:Wse,apply:_F,drop:SF,list:Zse,clear:Yse,pop:Xse},o=["apply","drop","pop"];try{const l=new cn(e);["refs","logs","logs/refs"].map(h=>Pt.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=s[r];if(d){if(o.includes(r)&&i<0)throw new oo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function Qse({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const i=new cn(e);if(await wp.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await eoe({fs:i,cache:a,gitdir:n}),l=await EF({fs:i,cache:a,gitdir:n,tree:o,path:r}),u=await Ba.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const x of b)if(x.path===r)return x;return null}),d=await i.lstat(Pt.join(t,r)),h=l!==null,m=u!==null,y=d!==null,v=async()=>{if(m&&!ww(u,d))return u.oid;{const b=await i.read(Pt.join(t,r)),x=await wF({gitdir:n,type:"blob",object:b});return m&&u.oid===x&&d.size!==-1&&Ba.acquire({fs:i,gitdir:n,cache:a},async function(w){w.insert({filepath:r,stats:d,oid:x})}),x}};if(!h&&!y&&!m)return"absent";if(!h&&!y&&m)return"*absent";if(!h&&y&&!m)return"*added";if(!h&&y&&m)return await v()===u.oid?"added":"*added";if(h&&!y&&!m)return"deleted";if(h&&!y&&m)return l===u.oid,"*deleted";if(h&&y&&!m)return await v()===l?"*undeleted":"*undeletemodified";if(h&&y&&m){const b=await v();return b===l?b===u.oid?"unmodified":"*unmodified":b===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function EF({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const s of r)if(s.path===i){if(a.length===0)return s.oid;const{type:o,object:l}=await Kr({fs:e,cache:t,gitdir:n,oid:s.oid});if(o==="tree"){const u=zi.from(l);return EF({fs:e,cache:t,gitdir:n,tree:u,path:a})}if(o==="blob")throw new Ti(s.oid,o,"blob",a.join("/"))}return null}async function eoe({fs:e,cache:t,gitdir:n}){let r;try{r=await Ut.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof Nr)return[]}const{tree:a}=await xp({fs:e,cache:t,gitdir:n,oid:r});return a}async function toe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:s={},ignored:o=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const l=new cn(e);return await Eu({fs:l,cache:s,dir:t,gitdir:n,trees:[Ns({ref:r}),G0(),mp()],map:async function(u,[d,h,m]){if(!d&&!m&&h&&!o&&await wp.isIgnored({fs:l,dir:t,filepath:u})||!a.some(I=>nF(u,I)))return null;if(i&&!i(u))return;const[y,v,b]=await Promise.all([d&&d.type(),h&&h.type(),m&&m.type()]),x=[y,v,b].includes("blob");if((y==="tree"||y==="special")&&!x)return;if(y==="commit")return null;if((v==="tree"||v==="special")&&!x)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!x)return;const w=y==="blob"?await d.oid():void 0,S=b==="blob"?await m.oid():void 0;let E;y!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,w,E,S],k=C.map(I=>C.indexOf(I));return k.shift(),[u,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function noe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,force:i=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const s=new cn(e);if(r===void 0)throw new Bi("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Ut.resolve({fs:s,gitdir:n,ref:a||"HEAD"});if(!i&&await Ut.exists({fs:s,gitdir:n,ref:r}))throw new ho("tag",r);await Ut.writeRef({fs:s,gitdir:n,ref:r,value:o})}catch(s){throw s.caller="git.tag",s}}async function roe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:s,add:o,remove:l,force:u}){try{et("fs",e),et("gitdir",n),et("filepath",a);const d=new cn(e);if(l)return await Ba.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!u){const y=await d.lstat(Pt.join(t,a));if(y){if(y.isDirectory())throw new Su("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Pt.join(t,a)),!h)throw new Nr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Su("directory")}return await Ba.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!o&&!m.has({filepath:a}))throw new Nr(`file at "${a}" in index and "add" not set`);let y;if(i)y={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{y=h;const v=y.isSymbolicLink()?await d.readlink(Pt.join(t,a)):await d.read(Pt.join(t,a));i=await Hi({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return m.insert({filepath:a,oid:i,stats:y}),i})}catch(d){throw d.caller="git.updateIndex",d}}function aoe(){try{return Ux.version}catch(e){throw e.caller="git.version",e}}async function ioe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),trees:r,map:a,reduce:i,iterate:s,cache:o={}}){try{return et("fs",e),et("gitdir",n),et("trees",r),await Eu({fs:new cn(e),cache:o,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function soe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),blob:r}){try{return et("fs",e),et("gitdir",n),et("blob",r),await Hi({fs:new cn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function ooe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r}){try{return et("fs",e),et("gitdir",n),et("commit",r),await xF({fs:new cn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function loe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),type:r,object:a,format:i="parsed",oid:s,encoding:o=void 0}){try{const l=new cn(e);if(i==="parsed"){switch(r){case"commit":a=Vr.from(a).toObject();break;case"tree":a=zi.from(a).toObject();break;case"blob":a=Jt.from(a,o);break;case"tag":a=wi.from(a).toObject();break;default:throw new Ti(s||"",r,"blob|commit|tag|tree")}i="content"}return s=await Hi({fs:l,gitdir:n,type:r,object:a,oid:s,format:i}),s}catch(l){throw l.caller="git.writeObject",l}}async function coe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:s=!1}){try{et("fs",e),et("gitdir",n),et("ref",r),et("value",a);const o=new cn(e);if(r!==qo.clean(r))throw new oo(r,qo.clean(r));if(!i&&await Ut.exists({fs:o,gitdir:n,ref:r}))throw new ho("ref",r);s?await Ut.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:a}):(a=await Ut.resolve({fs:o,gitdir:n,ref:a}),await Ut.writeRef({fs:o,gitdir:n,ref:r,value:a}))}catch(o){throw o.caller="git.writeRef",o}}async function uoe({fs:e,gitdir:t,tag:n}){const r=wi.from(n).toObject();return await Hi({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function doe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tag:r}){try{return et("fs",e),et("gitdir",n),et("tag",r),await uoe({fs:new cn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function foe({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tree:r}){try{return et("fs",e),et("gitdir",n),et("tree",r),await W0({fs:new cn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Sa={Errors:Bae,STAGE:mp,TREE:Ns,WORKDIR:G0,add:aie,abortMerge:eie,addNote:sie,addRemote:oie,annotatedTag:cie,branch:die,checkout:rF,clone:Sie,commit:Eie,getConfig:Vie,getConfigAll:Kie,setConfig:Hse,currentBranch:Cie,deleteBranch:Tie,deleteRef:Aie,deleteRemote:Rie,deleteTag:jie,expandOid:Pie,expandRef:Fie,fastForward:zie,fetch:Uie,findMergeBase:Hie,findRoot:qie,getRemoteInfo:Wie,getRemoteInfo2:Zie,hashBlob:Xie,indexPack:Qie,init:ese,isDescendent:tse,isIgnored:nse,listBranches:rse,listFiles:ise,listNotes:ose,listRefs:lse,listRemotes:use,listServerRefs:hse,listTags:pse,log:bse,merge:vse,packObjects:_se,pull:Sse,push:Ase,readBlob:Nse,readCommit:vF,readNote:Ise,readObject:jse,readTag:Dse,readTree:Mse,remove:Pse,removeNote:Lse,renameBranch:Bse,resetIndex:zse,updateIndex:roe,resolveRef:Use,status:Qse,statusMatrix:toe,tag:noe,version:aoe,walk:ioe,writeBlob:soe,writeCommit:ooe,writeObject:loe,writeRef:coe,writeTag:doe,writeTree:foe,stash:Jse};function hoe(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function poe(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:hoe(e)}async function moe(e,t){const n=poe(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function goe(e){let t=0;const n=[];await moe(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function yoe(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function boe({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await goe(a));const i=await fetch(t,{method:n,headers:r,body:a}),s=i.body&&i.body.getReader?yoe(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[o,l]of i.headers.entries())r[o]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:s,headers:r}}var zg={request:boe};const Ug="https://cors.isomorphic-git.org",Xh=new Map,CF=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=lr.getState();if(!n||!r)return Ye.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await Sa.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await Sa.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await Sa.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await Sa.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),Ye.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},Hg=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=Xh.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return Ye.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(Xh.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(Ye.error("Authentication cancelled: Password/token not provided."),null)},qg=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),Xh.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),Xh.delete(n)),null},Vg=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!Xh.has(n)&&t.username&&t.password&&(Xh.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},Ch=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},voe=async(e,t)=>{const n=qa,r=rr(e),a=Qo(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},kF=async(e,t,n,r,a)=>{var o;const i=(a==null?void 0:a.fsInstance)??qa,s=rr(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${s}`);try{let l=!1;try{await i.promises.stat(Qo(s,".git")),l=!0}catch(m){if(m.code!=="ENOENT")throw m}if(l)throw console.warn(`[VFS Git Op] Clone target ${s} already contains a .git directory.`),new Error(`Repository already cloned at ${s}.`);const u=R0(s);if(u!=="/")try{await i.promises.mkdir(u,{recursive:!0})}catch(m){if(m.code!=="EEXIST")throw m}let d=n;if(!d)try{if(d=(o=(await Sa.getRemoteInfo({http:zg,url:t,corsProxy:Ug,onAuth:y=>Hg(y,r),onAuthFailure:qg,onAuthSuccess:Vg})).HEAD)==null?void 0:o.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(m){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",m),new Error(`Failed to determine default branch: ${Ch(m)}`)}await Sa.clone({fs:i,http:zg,dir:s,corsProxy:Ug,url:t,ref:d,singleBranch:!0,depth:10,onAuth:m=>Hg(m,r),onAuthFailure:qg,onAuthSuccess:Vg,onProgress:m=>{m.phase==="counting objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):m.phase==="receiving objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):console.log(`Clone progress: ${m.phase}`)}}),await i.promises.stat(Qo(s,".git"));const h=await Sa.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await Sa.checkout({fs:i,dir:s,ref:d})),Ye.success(`Repository cloned successfully into ${s} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const u=Ch(l);if(l instanceof Error&&l.message.includes("already cloned")||Ye.error(`Git clone failed: ${u}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${s}`),await i.promises.rm(s,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},TF=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??qa,r=rr(e);try{await Sa.init({fs:n,dir:r}),Ye.success(`Initialized empty Git repository in "${ga(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),Ye.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},BT=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??qa,a=rr(e);try{if(!await CF(a,r))throw new Error("Git user configuration is missing or invalid.");if(await Sa.add({fs:r,dir:a,filepath:"."}),!(await Sa.statusMatrix({fs:r,dir:a})).some(([,,u])=>u!==0)){Ye.info("No changes detected to commit.");return}const l=await Sa.commit({fs:r,dir:a,message:t,author:{name:lr.getState().gitUserName,email:lr.getState().gitUserEmail}});Ye.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),Ye.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},Hx=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??qa,i=rr(e);try{if(!await CF(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const o=await Sa.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Sa.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Sa.fetch({fs:a,http:zg,dir:i,corsProxy:Ug,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>Hg(u,n),onAuthFailure:qg,onAuthSuccess:Vg}),await Sa.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(u){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,u),new Error(`Failed to switch to or create local branch "${t}": ${Ch(u)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${Ch(l)}`)}}await Sa.pull({fs:a,http:zg,dir:i,ref:t,singleBranch:!0,author:{name:lr.getState().gitUserName,email:lr.getState().gitUserEmail},corsProxy:Ug,onAuth:l=>Hg(l,n),onAuthFailure:qg,onAuthSuccess:Vg}),Ye.success(`Pulled changes successfully for "${ga(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(s){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,s),s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")?Ye.info(`Branch "${t}" is already up-to-date.`):Ye.error(`Git pull failed: ${Ch(s)}`),!(s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")))throw s}},zT=async(e,t,n,r)=>{var s,o;const a=(r==null?void 0:r.fsInstance)??qa,i=rr(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await Sa.push({fs:a,http:zg,dir:i,corsProxy:Ug,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:u=>Hg(u,n),onAuthFailure:qg,onAuthSuccess:Vg});if(l!=null&&l.ok)Ye.success(`Pushed changes successfully for "${ga(i)}"`);else if((s=l==null?void 0:l.error)!=null&&s.includes("up-to-date"))Ye.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(Ye.error(`Push rejected for "${ga(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||Ye.error(`Git push failed: ${Ch(l)}`),l}},AF=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??qa,r=rr(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await Sa.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([s,o,l,u])=>{let d="";return u===2&&(d+="INDEX_Modified "),u===3&&(d+="INDEX_Added "),o===0&&l===2?d+="WT_New":o===1&&l===2?d+="WT_Modified":o===1&&l===0?d+="WT_Deleted":o===1&&l===1&&u===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${o} w:${l} s:${u}`),`${s}: ${d.trim()}`}).filter(s=>!s.endsWith("Unmodified")).join(`
`);Ye.info(`Git Status for "${ga(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),Ye.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},zd=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??qa,r=rr(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),Ye.error(`Error creating directory "${ga(r)}": ${a instanceof Error?a.message:String(a)}`),a}},woe=async e=>{try{const t={backend:Sre,name:`litechat_vfs_${e}`};return await mre(t),qa}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),Ye.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},UT=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??qa,r=rr(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await zd(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const u=Qo(r,l);try{const d=await n.promises.stat(u);return{name:l,path:u,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${u}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),Ye.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},uf=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??qa,r=rr(e);try{const a=await n.promises.readFile(r);return kt.emit(Et.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),Ye.error(`Error reading file "${ga(r)}": ${a instanceof Error?a.message:String(a)}`),a}},qx=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??qa,a=rr(e),i=R0(a);try{i!=="/"&&await zd(i,{fsInstance:r}),await r.promises.writeFile(a,t),kt.emit(Et.VFS_FILE_WRITTEN,{path:a})}catch(s){throw s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,s),Ye.error(`Error writing file "${ga(a)}": ${s instanceof Error?s.message:String(s)}`)),s}},HT=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??qa,a=rr(e);if(a==="/")throw Ye.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),kt.emit(Et.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),kt.emit(Et.VFS_FILE_DELETED,{path:a})),Ye.success(`"${ga(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),Ye.error(`Error deleting "${ga(a)}": ${i instanceof Error?i.message:String(i)}`),i}},NF=async(e,t)=>{await zd(e,t)},xoe=async(e,t,n)=>{try{const r=await uf(e,n),a=new Blob([r]),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i;const o=rr(e);s.download=t||ga(o),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||Ye.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},RF=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??qa,a=rr(t);let i=0,s=0;const o=Array.from(e);try{await zd(a,{fsInstance:r});for(const l of o){const u=Qo(a,l.name);try{const d=await l.arrayBuffer();await qx(u,new Uint8Array(d),{fsInstance:r}),i++}catch(d){s++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){s=o.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{s>0&&i>0?Ye.warning(`Upload complete with issues. ${i} succeeded, ${s} failed.`):s===0&&i>0&&Ye.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":ga(a)}.`)}},_oe=async(e,t,n)=>{const r=qa;if(!e.name.toLowerCase().endsWith(".zip")){Ye.error("Please select a valid ZIP file.");return}const a=rr(t);let i;try{await zd(a,{fsInstance:r}),i=await j5.loadAsync(e);const s=Object.values(i.files),o=await Promise.allSettled(s.map(async h=>{const m=Qo(a,h.name);if(h.dir)await zd(m,{fsInstance:r});else{const y=await h.async("uint8array");await qx(m,y,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,u=0,d=0;o.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?u++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?Ye.warning(`Finished extracting "${e.name}". ${l+u} items succeeded, ${d} failed.`):Ye.success(`Successfully extracted ${l} files and ${u} folders from "${e.name}" to ${a==="/"?"root":ga(a)}.`)}catch(s){s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,s),Ye.error(`ZIP extraction failed: ${s instanceof Error?s.message:String(s)}`))}},eO=async(e,t="/",n)=>{const r=qa,a=new j5,i=rr(t),s=ga(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){Ye.error(`Cannot export: "${s}" is not a directory.`);return}}catch(m){m instanceof Error&&m.code==="ENOENT"?Ye.error(`Cannot export: Path "${s}" not found.`):Ye.error(`Cannot export: Error accessing path "${s}". ${m instanceof Error?m.message:String(m)}`);return}const o=async(m,y)=>{const v=await UT(m,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const x=y.folder(b.name);if(x)await o(b.path,x);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const x=await uf(b.path,{fsInstance:r});y.file(b.name,x)}};await o(i,a);const l=await a.generateAsync({type:"blob"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u;const h=`vfs_${s}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),Ye.success(`"${s}" exported as ${d.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||Ye.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},IF=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??qa,a=rr(e),i=rr(t);if(a==="/"||i==="/")throw Ye.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const s=R0(i);s!=="/"&&await zd(s,{fsInstance:r}),await r.promises.rename(a,i),Ye.success(`Renamed "${ga(a)}" to "${ga(i)}"`)}catch(s){throw s instanceof Error&&s.code==="ENOENT"?s.message.includes("Error creating directory")||Ye.error(`Rename failed: Original item "${ga(a)}" not found.`):s instanceof Error&&s.code==="EEXIST"?Ye.error(`Rename failed: An item named "${ga(i)}" already exists.`):s instanceof Error&&s.message.includes("Error creating directory")||Ye.error(`Rename failed: ${s instanceof Error?s.message:String(s)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,s),s}},Soe=1024*5,Eoe=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},tO=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},qT=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(!1),[u,d]=T.useState(!1),[h,m]=T.useState(!0),y=e.type||"application/octet-stream",v=kk(e.name,y),b=y.startsWith("image/"),x=y.startsWith("audio/"),w=y.startsWith("video/"),S=e.source==="vfs";T.useEffect(()=>{let F=null;return s(null),e.source==="direct"&&!v&&e.contentBase64?(F=Eoe(e.contentBase64,y),F||s("Failed to decode file content for preview."),a(F)):a(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>Soe?s(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&s("Text content missing from metadata."),()=>{F&&(URL.revokeObjectURL(F),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,y,v]);const E=async()=>{if(e.source==="vfs"){Ye.info("File is already in VFS.");return}const F=tO(e);if(!F){Ye.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await RF([F],"/"),Ye.success(`"${e.name}" added to VFS root.`)}catch($){console.error("Failed to add file to VFS:",$),Ye.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{d(!0);try{let F;if(e.source==="vfs"&&e.path){const D=await uf(e.path);F=new Blob([D],{type:y})}else{const D=tO(e);if(!D)throw new Error("Could not reconstruct file data.");F=D}const $=URL.createObjectURL(F),G=document.createElement("a");G.href=$,G.download=e.name,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL($)}catch(F){console.error("Failed to download file:",F),Ye.error(`Download failed: ${F instanceof Error?F.message:String(F)}`)}finally{d(!1)}},k=()=>m(F=>!F),I=()=>S?p.jsx(lD,{className:"h-5 w-5 text-cyan-500"}):v?p.jsx(Lq,{className:"h-5 w-5 text-blue-500"}):b?p.jsx(cD,{className:"h-5 w-5 text-purple-500"}):x?p.jsx(fV,{className:"h-5 w-5 text-green-500"}):w?p.jsx(KV,{className:"h-5 w-5 text-orange-500"}):p.jsx(Pq,{className:"h-5 w-5 text-muted-foreground"}),R=()=>S?p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?p.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[p.jsx(Nh,{className:"h-4 w-4"}),p.jsx("span",{children:i})]}):v&&e.contentText!==void 0?p.jsx(_0,{lang:y==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?p.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):x&&r?p.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):w&&r?p.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),j=T.useMemo(()=>{let F="File";return S?F="VFS File":v?F="Text":b?F="Image":x?F="Audio":w&&(F="Video"),`${F} (${Pg(e.size)})`},[S,v,b,x,w,e.size]);return p.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[I(),p.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",Pg(e.size),")"]}),S&&e.path&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),p.jsx(Qn,{children:p.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:u,"aria-label":"Download file",children:u?p.jsx(On,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(Rd,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{children:"Download File"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":h?"Unfold preview":"Fold preview",children:p.jsx(Yw,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&p.jsxs(p.Fragment,{children:[e.source==="direct"&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:o,"aria-label":"Add to VFS",children:o?p.jsx(On,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(nD,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{children:"Add to VFS"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:p.jsx(xi,{className:"h-3.5 w-3.5"})})}),p.jsx(Qn,{children:"Remove from Prompt"})]})})]})]})]}),h?p.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:j}):p.jsx("div",{className:_t("p-2 max-h-80 overflow-y-auto"),children:R()})]})},Coe=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:a})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(!1),u=Rr(dn(E=>E.promptControls)),d=qn(dn(E=>E.status==="streaming")),{attachedFilesMetadata:h,clearAttachedFiles:m,removeAttachedFile:y}=Jl(dn(E=>({attachedFilesMetadata:E.attachedFilesMetadata,clearAttachedFiles:E.clearAttachedFiles,removeAttachedFile:E.removeAttachedFile}))),v=T.useMemo(()=>Object.values(u).filter(E=>E.show?E.show():!0),[u]),b=T.useMemo(()=>v.filter(E=>E.renderer),[v]),x=T.useMemo(()=>v.filter(E=>E.triggerRenderer),[v]),w=T.useCallback(async()=>{var I;const C=(((I=a==null?void 0:a.current)==null?void 0:I.getValue())??"").trim(),k=Jl.getState().attachedFilesMetadata;if(!(!C&&k.length===0)&&!(d||i)){s(!0);try{let R={},j={};for(const D of v){if(D.getParameters){const Z=await D.getParameters();Z&&(R={...R,...Z})}if(D.getMetadata){const Z=await D.getMetadata();Z&&(j={...j,...Z})}}k.length>0&&(j.attachedFiles=[...k]);let F={id:_i(),content:C,parameters:R,metadata:j};kt.emit(Et.PROMPT_SUBMITTED,{turnData:F});const $=await bC($v.PROMPT_TURN_FINALIZE,{turnData:F});if($===!1){console.log("Prompt submission cancelled by middleware."),s(!1);return}const G=$&&typeof $=="object"?$.turnData:F;await t(G),m(),v.forEach(D=>{D.clearOnSubmit&&D.clearOnSubmit()}),l(!1)}catch(R){console.error("Error during prompt submission:",R),Ye.error(`Failed to send message: ${R instanceof Error?R.message:String(R)}`)}finally{s(!1)}}},[a,d,i,v,t,m]),S=T.useCallback(E=>{l(E.trim().length>0),kt.emit(Et.PROMPT_INPUT_CHANGE,{value:E})},[]);return p.jsxs("div",{className:_t("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[b.length>0&&p.jsx(a3,{controls:b,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),h.length>0&&p.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 border rounded-md p-2 bg-muted/20 mb-2",children:h.map(E=>p.jsx(qT,{fileMeta:E,onRemove:y,isReadOnly:!1},E.id))}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx(e,{ref:a,onSubmit:w,disabled:d||i,placeholder:r,onValueChange:S,className:"flex-grow"}),p.jsx(jt,{type:"button",size:"icon",onClick:w,disabled:d||i||!o&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(kV,{className:"h-4 w-4"})})]}),p.jsx(a3,{controls:x,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})},jF=6048e5,koe=864e5,cv=43200,nO=1440,rO=Symbol.for("constructDateFrom");function ic(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&rO in e?e[rO](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ha(e,t){return ic(t||e,e)}let Toe={};function Y0(){return Toe}function Gg(e,t){var o,l,u,d;const n=Y0(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ha(e,t==null?void 0:t.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function Nw(e,t){return Gg(e,{...t,weekStartsOn:1})}function OF(e,t){const n=Ha(e,t==null?void 0:t.in),r=n.getFullYear(),a=ic(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Nw(a),s=ic(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Nw(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function Rw(e){const t=Ha(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Vx(e,...t){const n=ic.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function aO(e,t){const n=Ha(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Aoe(e,t,n){const[r,a]=Vx(n==null?void 0:n.in,e,t),i=aO(r),s=aO(a),o=+i-Rw(i),l=+s-Rw(s);return Math.round((o-l)/koe)}function Noe(e,t){const n=OF(e,t),r=ic(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Nw(r)}function Nv(e,t){const n=+Ha(e)-+Ha(t);return n<0?-1:n>0?1:n}function Roe(e){return ic(e,Date.now())}function Ioe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function joe(e){return!(!Ioe(e)&&typeof e!="number"||isNaN(+Ha(e)))}function Ooe(e,t,n){const[r,a]=Vx(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function Doe(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function Moe(e,t){return+Ha(e)-+Ha(t)}function Poe(e,t){const n=Ha(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function Foe(e,t){const n=Ha(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Loe(e,t){const n=Ha(e,t==null?void 0:t.in);return+Poe(n,t)==+Foe(n,t)}function $oe(e,t,n){const[r,a,i]=Vx(n==null?void 0:n.in,e,e,t),s=Nv(a,i),o=Math.abs(Ooe(a,i));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*o);let l=Nv(a,i)===-s;Loe(r)&&o===1&&Nv(r,i)===1&&(l=!1);const u=s*(o-+l);return u===0?0:u}function Boe(e,t,n){const r=Moe(e,t)/1e3;return Doe(n==null?void 0:n.roundingMethod)(r)}function zoe(e,t){const n=Ha(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Uoe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Hoe=(e,t,n)=>{let r;const a=Uoe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function a2(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const qoe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Voe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Goe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Koe={date:a2({formats:qoe,defaultWidth:"full"}),time:a2({formats:Voe,defaultWidth:"full"}),dateTime:a2({formats:Goe,defaultWidth:"full"})},Woe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zoe=(e,t,n,r)=>Woe[e];function Hm(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Yoe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xoe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Joe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Qoe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ele={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tle={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nle=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},rle={ordinalNumber:nle,era:Hm({values:Yoe,defaultWidth:"wide"}),quarter:Hm({values:Xoe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Hm({values:Joe,defaultWidth:"wide"}),day:Hm({values:Qoe,defaultWidth:"wide"}),dayPeriod:Hm({values:ele,defaultWidth:"wide",formattingValues:tle,defaultFormattingWidth:"wide"})};function qm(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?ile(o,h=>h.test(s)):ale(o,h=>h.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function ale(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function ile(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function sle(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const ole=/^(\d+)(th|st|nd|rd)?/i,lle=/\d+/i,cle={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ule={any:[/^b/i,/^(a|c)/i]},dle={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fle={any:[/1/i,/2/i,/3/i,/4/i]},hle={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ple={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mle={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gle={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yle={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ble={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vle={ordinalNumber:sle({matchPattern:ole,parsePattern:lle,valueCallback:e=>parseInt(e,10)}),era:qm({matchPatterns:cle,defaultMatchWidth:"wide",parsePatterns:ule,defaultParseWidth:"any"}),quarter:qm({matchPatterns:dle,defaultMatchWidth:"wide",parsePatterns:fle,defaultParseWidth:"any",valueCallback:e=>e+1}),month:qm({matchPatterns:hle,defaultMatchWidth:"wide",parsePatterns:ple,defaultParseWidth:"any"}),day:qm({matchPatterns:mle,defaultMatchWidth:"wide",parsePatterns:gle,defaultParseWidth:"any"}),dayPeriod:qm({matchPatterns:yle,defaultMatchWidth:"any",parsePatterns:ble,defaultParseWidth:"any"})},DF={code:"en-US",formatDistance:Hoe,formatLong:Koe,formatRelative:Zoe,localize:rle,match:vle,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wle(e,t){const n=Ha(e,t==null?void 0:t.in);return Aoe(n,zoe(n))+1}function xle(e,t){const n=Ha(e,t==null?void 0:t.in),r=+Nw(n)-+Noe(n);return Math.round(r/jF)+1}function MF(e,t){var d,h,m,y;const n=Ha(e,t==null?void 0:t.in),r=n.getFullYear(),a=Y0(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((y=(m=a.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)??1,s=ic((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const o=Gg(s,t),l=ic((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=Gg(l,t);return+n>=+o?r+1:+n>=+u?r:r-1}function _le(e,t){var o,l,u,d;const n=Y0(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=MF(e,t),i=ic((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Gg(i,t)}function Sle(e,t){const n=Ha(e,t==null?void 0:t.in),r=+Gg(n,t)-+_le(n,t);return Math.round(r/jF)+1}function vr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Xc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return vr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):vr(n+1,2)},d(e,t){return vr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return vr(e.getHours()%12||12,t.length)},H(e,t){return vr(e.getHours(),t.length)},m(e,t){return vr(e.getMinutes(),t.length)},s(e,t){return vr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return vr(a,t.length)}},sh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},iO={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Xc.y(e,t)},Y:function(e,t,n,r){const a=MF(e,r),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return vr(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):vr(i,t.length)},R:function(e,t){const n=OF(e);return vr(n,t.length)},u:function(e,t){const n=e.getFullYear();return vr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return vr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return vr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Xc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return vr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Sle(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):vr(a,t.length)},I:function(e,t,n){const r=xle(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):vr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Xc.d(e,t)},D:function(e,t,n){const r=wle(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):vr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return vr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return vr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return vr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=sh.noon:r===0?a=sh.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=sh.evening:r>=12?a=sh.afternoon:r>=4?a=sh.morning:a=sh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Xc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Xc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):vr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):vr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Xc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Xc.s(e,t)},S:function(e,t){return Xc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return oO(r);case"XXXX":case"XX":return wd(r);case"XXXXX":case"XXX":default:return wd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return oO(r);case"xxxx":case"xx":return wd(r);case"xxxxx":case"xxx":default:return wd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+sO(r,":");case"OOOO":default:return"GMT"+wd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+sO(r,":");case"zzzz":default:return"GMT"+wd(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return vr(r,t.length)},T:function(e,t,n){return vr(+e,t.length)}};function sO(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+vr(i,2)}function oO(e,t){return e%60===0?(e>0?"-":"+")+vr(Math.abs(e)/60,2):wd(e,t)}function wd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=vr(Math.trunc(r/60),2),i=vr(r%60,2);return n+a+t+i}const lO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},PF=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Ele=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return lO(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",lO(r,t)).replace("{{time}}",PF(a,t))},Cle={p:PF,P:Ele},kle=/^D+$/,Tle=/^Y+$/,Ale=["D","DD","YY","YYYY"];function Nle(e){return kle.test(e)}function Rle(e){return Tle.test(e)}function Ile(e,t,n){const r=jle(e,t,n);if(console.warn(r),Ale.includes(e))throw new RangeError(r)}function jle(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ole=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dle=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Mle=/^'([^]*?)'?$/,Ple=/''/g,Fle=/[a-zA-Z]/;function LC(e,t,n){var d,h,m,y;const r=Y0(),a=r.locale??DF,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((y=(m=r.locale)==null?void 0:m.options)==null?void 0:y.weekStartsOn)??0,o=Ha(e,n==null?void 0:n.in);if(!joe(o))throw new RangeError("Invalid time value");let l=t.match(Dle).map(v=>{const b=v[0];if(b==="p"||b==="P"){const x=Cle[b];return x(v,a.formatLong)}return v}).join("").match(Ole).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:Lle(v)};if(iO[b])return{isToken:!0,value:v};if(b.match(Fle))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Rle(b)||Nle(b))&&Ile(b,t,String(e));const x=iO[b[0]];return x(o,b,a.localize,u)}).join("")}function Lle(e){const t=e.match(Mle);return t?t[1].replace(Ple,"'"):e}function $le(e,t,n){const r=Y0(),a=(n==null?void 0:n.locale)??r.locale??DF,i=2520,s=Nv(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,u]=Vx(n==null?void 0:n.in,...s>0?[t,e]:[e,t]),d=Boe(u,l),h=(Rw(u)-Rw(l))/1e3,m=Math.round((d-h)/60);let y;if(m<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):m===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",m,o);if(m<45)return a.formatDistance("xMinutes",m,o);if(m<90)return a.formatDistance("aboutXHours",1,o);if(m<nO){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,o)}else{if(m<i)return a.formatDistance("xDays",1,o);if(m<cv){const v=Math.round(m/nO);return a.formatDistance("xDays",v,o)}else if(m<cv*2)return y=Math.round(m/cv),a.formatDistance("aboutXMonths",y,o)}if(y=$oe(u,l),y<12){const v=Math.round(m/cv);return a.formatDistance("xMonths",v,o)}else{const v=y%12,b=Math.trunc(y/12);return v<3?a.formatDistance("aboutXYears",b,o):v<9?a.formatDistance("overXYears",b,o):a.formatDistance("almostXYears",b+1,o)}}function FF(e,t){return $le(e,Roe(e),t)}const Vn=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:s="ghost",size:o="icon",className:l,"aria-label":u,...d})=>{const h=typeof t=="function";return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:s,size:o,onClick:a,disabled:i,className:_t("h-6 w-6",l),"aria-label":u,...d,children:h?p.jsx(t,{className:_t("h-3.5 w-3.5",n)}):t})}),p.jsx(Qn,{side:r,children:p.jsx("p",{children:e})})]})})},VT=gt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var v,b,x;const a=lr(w=>w.foldUserMessagesOnCompletion),[i,s]=T.useState(r&&a),[o,l]=T.useState(!1);T.useEffect(()=>{r&&a&&s(!0)},[r,a]);const u=t?FF(new Date(t),{addSuffix:!0}):"Sending...",d=((v=e.metadata)==null?void 0:v.attachedFiles)&&e.metadata.attachedFiles.length>0,h=e.content&&e.content.trim().length>0,m=T.useCallback(()=>s(w=>!w),[]),y=T.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),Ye.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(w){Ye.error("Failed to copy prompt."),console.error("Clipboard copy failed:",w)}},[e.content]);return p.jsxs("div",{className:_t("user-prompt relative group/user overflow-wrap-anywhere",n),children:[p.jsxs("div",{className:_t("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[p.jsx(qV,{className:"h-4 w-4 text-primary flex-shrink-0"}),p.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[h&&p.jsx(Vn,{tooltipText:"Copy Prompt",onClick:y,"aria-label":"Copy user prompt",icon:o?p.jsx(ls,{className:"text-green-500"}):p.jsx(vk,{}),className:"h-5 w-5"}),(h||d)&&p.jsx(Vn,{tooltipText:i?"Unfold":"Fold",onClick:m,"aria-label":i?"Unfold prompt":"Fold prompt",icon:i?p.jsx(il,{}):p.jsx(Gd,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:u})})]}),!i&&p.jsxs(p.Fragment,{children:[d&&p.jsx("div",{className:"mb-2 space-y-1",children:(b=e.metadata.attachedFiles)==null?void 0:b.map(w=>p.jsx(qT,{fileMeta:w,isReadOnly:!0},w.id))}),h&&p.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]}),i&&p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:m,children:[h?`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`:"",h&&d?" + ":"",d?`${(x=e.metadata.attachedFiles)==null?void 0:x.length} file(s)`:""]})]})});VT.displayName="UserPromptDisplay";const cO=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,Ble=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i,promptTokens:s,completionTokens:o,timeToFirstToken:l,generationTime:u})=>{const[d,h]=T.useState(!1),m=T.useCallback(async()=>{if(!n||typeof n!="string"){Ye.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),h(!0),Ye.success("Assistant response copied!"),setTimeout(()=>h(!1),1500)}catch(v){Ye.error("Failed to copy response."),console.error("Clipboard copy failed:",v)}},[n]),y=s!==void 0&&o!==void 0?s+o:void 0;return p.jsxs("div",{className:_t("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(sq,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[y!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(Eq,{className:"h-3 w-3"}),p.jsx("span",{children:y.toLocaleString()})]}),p.jsxs(Qn,{side:"bottom",children:["Tokens: ",s??"?"," (Prompt) +"," ",o??"?"," (Completion) = ",y]})]})}),l!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(XV,{className:"h-3 w-3"}),p.jsx("span",{children:cO(l)})]}),p.jsx(Qn,{side:"bottom",children:"Time to First Token"})]})}),u!==void 0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsxs(Jn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(bq,{className:"h-3 w-3"}),p.jsx("span",{children:cO(u)})]}),p.jsx(Qn,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),p.jsxs("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:[p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[n&&typeof n=="string"&&p.jsx(Vn,{tooltipText:"Copy Response",onClick:m,"aria-label":"Copy assistant response",icon:d?p.jsx(ls,{className:"text-green-500"}):p.jsx(vk,{}),className:"h-5 w-5"}),i&&p.jsx(Vn,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?p.jsx(il,{}):p.jsx(Gd,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]})]})},zle=({interactionId:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e)},i=()=>{t&&t(e)},s=()=>{r&&r(e)};return p.jsxs("div",{className:_t("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[r&&p.jsx(Vn,{tooltipText:"Edit",onClick:s,"aria-label":"Edit User Prompt",icon:p.jsx(ng,{}),className:"h-5 w-5 md:h-6 md:w-6"}),t&&p.jsx(Vn,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:p.jsx(Xw,{}),className:"h-5 w-5 md:h-6 md:w-6"}),n&&p.jsx(Vn,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:p.jsx(Li,{}),className:"h-5 w-5 md:h-6 md:w-6 text-destructive hover:text-destructive/80"})]})},uO={};function Ule(e){let t=uO[e];if(t)return t;t=uO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Jh(e,t){typeof t!="string"&&(t=Jh.defaultChars);const n=Ule(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,s=r.length;i<s;i+=3){const o=parseInt(r.slice(i+1,i+3),16);if(o<128){a+=n[o];continue}if((o&224)===192&&i+3<s){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const u=o<<6&1984|l&63;u<128?a+="":a+=String.fromCharCode(u),i+=3;continue}}if((o&240)===224&&i+6<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(u&192)===128){const d=o<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?a+="":a+=String.fromCharCode(d),i+=6;continue}}if((o&248)===240&&i+9<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let h=o<<18&1835008|l<<12&258048|u<<6&4032|d&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Jh.defaultChars=";/?:@&=+$,#";Jh.componentChars="";const dO={};function Hle(e){let t=dO[e];if(t)return t;t=dO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function X0(e,t,n){typeof t!="string"&&(n=t,t=X0.defaultChars),typeof n>"u"&&(n=!0);const r=Hle(t);let a="";for(let i=0,s=e.length;i<s;i++){const o=e.charCodeAt(i);if(n&&o===37&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(o<128){a+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<s){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}X0.defaultChars=";/?:@&=+$,-_.!~*'()#";X0.componentChars="-_.!~*'()";function GT(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Iw(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const qle=/^([a-z0-9.+-]+:)/i,Vle=/:[0-9]*$/,Gle=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Kle=["<",">",'"',"`"," ","\r",`
`,"	"],Wle=["{","}","|","\\","^","`"].concat(Kle),Zle=["'"].concat(Wle),fO=["%","/","?",";","#"].concat(Zle),hO=["/","?","#"],Yle=255,pO=/^[+a-z0-9A-Z_-]{0,63}$/,Xle=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,mO={javascript:!0,"javascript:":!0},gO={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function KT(e,t){if(e&&e instanceof Iw)return e;const n=new Iw;return n.parse(e,t),n}Iw.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const u=Gle.exec(i);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=qle.exec(i);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,i=i.substr(s.length)),(t||s||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(s&&mO[s])&&(i=i.substr(2),this.slashes=!0)),!mO[s]&&(a||s&&!gO[s])){let u=-1;for(let v=0;v<hO.length;v++)r=i.indexOf(hO[v]),r!==-1&&(u===-1||r<u)&&(u=r);let d,h;u===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",u),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),u=-1;for(let v=0;v<fO.length;v++)r=i.indexOf(fO[v]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=i.length),i[u-1]===":"&&u--;const m=i.slice(0,u);i=i.slice(u),this.parseHost(m),this.hostname=this.hostname||"";const y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y){const v=this.hostname.split(/\./);for(let b=0,x=v.length;b<x;b++){const w=v[b];if(w&&!w.match(pO)){let S="";for(let E=0,C=w.length;E<C;E++)w.charCodeAt(E)>127?S+="x":S+=w[E];if(!S.match(pO)){const E=v.slice(0,b),C=v.slice(b+1),k=w.match(Xle);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>Yle&&(this.hostname=""),y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),gO[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Iw.prototype.parseHost=function(e){let t=Vle.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Jle=Object.freeze(Object.defineProperty({__proto__:null,decode:Jh,encode:X0,format:GT,parse:KT},Symbol.toStringTag,{value:"Module"})),LF=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,$F=/[\0-\x1F\x7F-\x9F]/,Qle=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,WT=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,BF=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,zF=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ece=Object.freeze(Object.defineProperty({__proto__:null,Any:LF,Cc:$F,Cf:Qle,P:WT,S:BF,Z:zF},Symbol.toStringTag,{value:"Module"})),tce=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),nce=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var i2;const rce=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ace=(i2=String.fromCodePoint)!==null&&i2!==void 0?i2:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function ice(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=rce.get(e))!==null&&t!==void 0?t:e}var $a;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})($a||($a={}));const sce=32;var iu;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(iu||(iu={}));function $C(e){return e>=$a.ZERO&&e<=$a.NINE}function oce(e){return e>=$a.UPPER_A&&e<=$a.UPPER_F||e>=$a.LOWER_A&&e<=$a.LOWER_F}function lce(e){return e>=$a.UPPER_A&&e<=$a.UPPER_Z||e>=$a.LOWER_A&&e<=$a.LOWER_Z||$C(e)}function cce(e){return e===$a.EQUALS||lce(e)}var Ma;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ma||(Ma={}));var tu;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(tu||(tu={}));class uce{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ma.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=tu.Strict}startEntity(t){this.decodeMode=t,this.state=Ma.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ma.EntityStart:return t.charCodeAt(n)===$a.NUM?(this.state=Ma.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ma.NamedEntity,this.stateNamedEntity(t,n));case Ma.NumericStart:return this.stateNumericStart(t,n);case Ma.NumericDecimal:return this.stateNumericDecimal(t,n);case Ma.NumericHex:return this.stateNumericHex(t,n);case Ma.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|sce)===$a.LOWER_X?(this.state=Ma.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ma.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if($C(a)||oce(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if($C(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===$a.SEMI)this.consumed+=1;else if(this.decodeMode===tu.Strict)return 0;return this.emitCodePoint(ice(this.result),this.consumed),this.errors&&(t!==$a.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&iu.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=dce(r,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===tu.Attribute&&(i===0||cce(s))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&iu.VALUE_LENGTH)>>14,i!==0){if(s===$a.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==tu.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&iu.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~iu.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Ma.NamedEntity:return this.result!==0&&(this.decodeMode!==tu.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ma.NumericDecimal:return this.emitNumericEntity(0,2);case Ma.NumericHex:return this.emitNumericEntity(0,3);case Ma.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ma.EntityStart:return 0}}}function UF(e){let t="";const n=new uce(e,r=>t+=ace(r));return function(a,i){let s=0,o=0;for(;(o=a.indexOf("&",o))>=0;){t+=a.slice(s,o),n.startEntity(i);const u=n.write(a,o+1);if(u<0){s=o+n.end();break}s=o+u,o=u===0?s+1:s}const l=t+a.slice(s);return t="",l}}function dce(e,t,n,r){const a=(t&iu.BRANCH_LENGTH)>>7,i=t&iu.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let s=n,o=s+a-1;for(;s<=o;){const l=s+o>>>1,u=e[l];if(u<r)s=l+1;else if(u>r)o=l-1;else return e[l+a]}return-1}const fce=UF(tce);UF(nce);function HF(e,t=tu.Legacy){return fce(e,t)}function hce(e){return Object.prototype.toString.call(e)}function ZT(e){return hce(e)==="[object String]"}const pce=Object.prototype.hasOwnProperty;function mce(e,t){return pce.call(e,t)}function Gx(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function qF(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function YT(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function jw(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const VF=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,gce=/&([a-z#][a-z0-9]{1,31});/gi,yce=new RegExp(VF.source+"|"+gce.source,"gi"),bce=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function vce(e,t){if(t.charCodeAt(0)===35&&bce.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return YT(r)?jw(r):e}const n=HF(e);return n!==e?n:e}function wce(e){return e.indexOf("\\")<0?e:e.replace(VF,"$1")}function Qh(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(yce,function(t,n,r){return n||vce(t,r)})}const xce=/[&<>"]/,_ce=/[&<>"]/g,Sce={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Ece(e){return Sce[e]}function ku(e){return xce.test(e)?e.replace(_ce,Ece):e}const Cce=/[.?*+^$[\]\\(){}|-]/g;function kce(e){return e.replace(Cce,"\\$&")}function Lr(e){switch(e){case 9:case 32:return!0}return!1}function Kg(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Wg(e){return WT.test(e)||BF.test(e)}function Zg(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Kx(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Tce={mdurl:Jle,ucmicro:ece},Ace=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:qF,assign:Gx,escapeHtml:ku,escapeRE:kce,fromCodePoint:jw,has:mce,isMdAsciiPunct:Zg,isPunctChar:Wg,isSpace:Lr,isString:ZT,isValidEntityCode:YT,isWhiteSpace:Kg,lib:Tce,normalizeReference:Kx,unescapeAll:Qh,unescapeMd:wce},Symbol.toStringTag,{value:"Module"}));function Nce(e,t,n){let r,a,i,s;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(s=e.pos,e.md.inline.skipToken(e),i===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return a&&(u=e.pos),e.pos=l,u}function Rce(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Qh(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let s=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(s++,s>32))return i;if(r===41){if(s===0)break;s--}a++}return t===a||s!==0||(i.str=Qh(e.slice(t,a)),i.pos=a,i.ok=!0),i}function Ice(e,t,n,r){let a,i=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(i>=n)return s;let o=e.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return s;t++,i++,o===40&&(o=41),s.marker=o}for(;i<n;){if(a=e.charCodeAt(i),a===s.marker)return s.pos=i+1,s.str+=Qh(e.slice(t,i)),s.ok=!0,s;if(a===40&&s.marker===41)return s;a===92&&i+1<n&&i++,i++}return s.can_continue=!0,s.str+=Qh(e.slice(t,i)),s}const jce=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Rce,parseLinkLabel:Nce,parseLinkTitle:Ice},Symbol.toStringTag,{value:"Module"})),ol={};ol.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+ku(i.content)+"</code>"};ol.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+ku(e[t].content)+`</code></pre>
`};ol.fence=function(e,t,n,r,a){const i=e[t],s=i.info?Qh(i.info).trim():"";let o="",l="";if(s){const d=s.split(/(\s+)/g);o=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(i.content,o,l)||ku(i.content):u=ku(i.content),u.indexOf("<pre")===0)return u+`
`;if(s){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+o]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+o);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${u}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${u}</code></pre>
`};ol.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};ol.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};ol.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};ol.text=function(e,t){return ku(e[t].content)};ol.html_block=function(e,t){return e[t].content};ol.html_inline=function(e,t){return e[t].content};function _p(){this.rules=Gx({},ol)}_p.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+ku(t.attrs[n][0])+'="'+ku(t.attrs[n][1])+'"';return a};_p.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let s=!1;if(a.block&&(s=!0,a.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1)}return i+=s?`>
`:">",i};_p.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};_p.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};_p.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;o==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ui(){this.__rules__=[],this.__cache__=null}Ui.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ui.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ui.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ui.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ui.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ui.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ui.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ui.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ui.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ui.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function po(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}po.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};po.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};po.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};po.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};po.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function GF(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}GF.prototype.Token=po;const Oce=/\r\n?|\n/g,Dce=/\0/g;function Mce(e){let t;t=e.src.replace(Oce,`
`),t=t.replace(Dce,""),e.src=t}function Pce(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Fce(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function Lce(e){return/^<a[>\s]/i.test(e)}function $ce(e){return/^<\/a\s*>/i.test(e)}function Bce(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let s=a.length-1;s>=0;s--){const o=a[s];if(o.type==="link_close"){for(s--;a[s].level!==o.level&&a[s].type!=="link_open";)s--;continue}if(o.type==="html_inline"&&(Lce(o.content)&&i>0&&i--,$ce(o.content)&&i++),!(i>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let u=e.md.linkify.match(l);const d=[];let h=o.level,m=0;u.length>0&&u[0].index===0&&s>0&&a[s-1].type==="text_special"&&(u=u.slice(1));for(let y=0;y<u.length;y++){const v=u[y].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let x=u[y].text;u[y].schema?u[y].schema==="mailto:"&&!/^mailto:/i.test(x)?x=e.md.normalizeLinkText("mailto:"+x).replace(/^mailto:/,""):x=e.md.normalizeLinkText(x):x=e.md.normalizeLinkText("http://"+x).replace(/^http:\/\//,"");const w=u[y].index;if(w>m){const k=new e.Token("text","",0);k.content=l.slice(m,w),k.level=h,d.push(k)}const S=new e.Token("link_open","a",1);S.attrs=[["href",b]],S.level=h++,S.markup="linkify",S.info="auto",d.push(S);const E=new e.Token("text","",0);E.content=x,E.level=h,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",d.push(C),m=u[y].lastIndex}if(m<l.length){const y=new e.Token("text","",0);y.content=l.slice(m),y.level=h,d.push(y)}t[n].children=a=qF(a,s,d)}}}}const KF=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,zce=/\((c|tm|r)\)/i,Uce=/\((c|tm|r)\)/ig,Hce={c:"",r:"",tm:""};function qce(e,t){return Hce[t.toLowerCase()]}function Vce(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(Uce,qce)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Gce(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&KF.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Kce(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(zce.test(e.tokens[t].content)&&Vce(e.tokens[t].children),KF.test(e.tokens[t].content)&&Gce(e.tokens[t].children))}const Wce=/['"]/,yO=/['"]/g,bO="";function uv(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Zce(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],s=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,i.type!=="text")continue;let o=i.content,l=0,u=o.length;e:for(;l<u;){yO.lastIndex=l;const d=yO.exec(o);if(!d)break;let h=!0,m=!0;l=d.index+1;const y=d[0]==="'";let v=32;if(d.index-1>=0)v=o.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<u)b=o.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const x=Zg(v)||Wg(String.fromCharCode(v)),w=Zg(b)||Wg(String.fromCharCode(b)),S=Kg(v),E=Kg(b);if(E?h=!1:w&&(S||x||(h=!1)),S?m=!1:x&&(E||w||(m=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=x,m=w),!h&&!m){y&&(i.content=uv(i.content,d.index,bO));continue}if(m)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<s)break;if(C.single===y&&r[n].level===s){C=r[n];let k,I;y?(k=t.md.options.quotes[2],I=t.md.options.quotes[3]):(k=t.md.options.quotes[0],I=t.md.options.quotes[1]),i.content=uv(i.content,d.index,I),e[C.token].content=uv(e[C.token].content,C.pos,k),l+=I.length-1,C.token===a&&(l+=k.length-1),o=i.content,u=o.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:y,level:s}):m&&y&&(i.content=uv(i.content,d.index,bO))}}}function Yce(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Wce.test(e.tokens[t].content)||Zce(e.tokens[t].children,e)}function Xce(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const s=r[i].children,o=s.length;for(t=0;t<o;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<o;t++)s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const s2=[["normalize",Mce],["block",Pce],["inline",Fce],["linkify",Bce],["replacements",Kce],["smartquotes",Yce],["text_join",Xce]];function XT(){this.ruler=new Ui;for(let e=0;e<s2.length;e++)this.ruler.push(s2[e][0],s2[e][1])}XT.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};XT.prototype.State=GF;function ll(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,s=0,o=0,l=0,u=a.length,d=!1;s<u;s++){const h=a.charCodeAt(s);if(!d)if(Lr(h)){o++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||s===u-1)&&(h!==10&&s++,this.bMarks.push(i),this.eMarks.push(s),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),d=!1,o=0,l=0,i=s+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}ll.prototype.push=function(e,t,n){const r=new po(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};ll.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};ll.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};ll.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Lr(r))break}return t};ll.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Lr(this.src.charCodeAt(--t)))return t+1;return t};ll.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};ll.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};ll.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let s=0,o=t;o<n;o++,s++){let l=0;const u=this.bMarks[o];let d=u,h;for(o+1<n||a?h=this.eMarks[o]+1:h=this.eMarks[o];d<h&&l<r;){const m=this.src.charCodeAt(d);if(Lr(m))m===9?l+=4-(l+this.bsCount[o])%4:l++;else if(d-u<this.tShift[o])l++;else break;d++}l>r?i[s]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[s]=this.src.slice(d,h)}return i.join("")};ll.prototype.Token=po;const Jce=65536;function o2(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function vO(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,s=0,o="";for(;r<n;)a===124&&(i?(o+=e.substring(s,r-1),s=r):(t.push(o+e.substring(s,r)),o="",s=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(o+e.substring(s)),t}function Qce(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58||i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!Lr(o)||s===45&&Lr(o))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Lr(C))return!1;i++}let l=o2(e,t+1),u=l.split("|");const d=[];for(let C=0;C<u.length;C++){const k=u[C].trim();if(!k){if(C===0||C===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=o2(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=vO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==d.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const y=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const x=e.push("thead_open","thead",1);x.map=[t,t+1];const w=e.push("tr_open","tr",1);w.map=[t,t+1];for(let C=0;C<u.length;C++){const k=e.push("th_open","th",1);d[C]&&(k.attrs=[["style","text-align:"+d[C]]]);const I=e.push("inline","",0);I.content=u[C].trim(),I.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let I=0,R=y.length;I<R;I++)if(y[I](e,a,n,!0)){C=!0;break}if(C||(l=o2(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(u=vO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>Jce))break;if(a===t+2){const I=e.push("tbody_open","tbody",1);I.map=S=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let I=0;I<h;I++){const R=e.push("td_open","td",1);d[I]&&(R.attrs=[["style","text-align:"+d[I]]]);const j=e.push("inline","",0);j.content=u[I]?u[I].trim():"",j.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=m,e.line=a,!0}function eue(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function tue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const s=e.src.charCodeAt(a);if(s!==126&&s!==96)return!1;let o=a;a=e.skipChars(a,s);let l=a-o;if(l<3)return!1;const u=e.src.slice(o,a),d=e.src.slice(a,i);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=o=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===s&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,s),!(a-o<l)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}l=e.sCount[t],e.line=h+(m?1:0);const y=e.push("fence","code",0);return y.info=d,y.content=e.getLines(t+1,h,l,!0),y.markup=u,y.map=[t,e.line],!0}function nue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const o=[],l=[],u=[],d=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let y=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,I,R;e.src.charCodeAt(a)===32?(a++,k++,R=!1,I=!0):e.src.charCodeAt(a)===9?(I=!0,(e.bsCount[v]+k)%4===3?(a++,k++,R=!1):R=!0):I=!1;let j=k;for(o.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const F=e.src.charCodeAt(a);if(Lr(F))F===9?j+=4-(j+e.bsCount[v]+(R?1:0))%4:j++;else break;a++}y=a>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(I?1:0),u.push(e.sCount[v]),e.sCount[v]=j-k,d.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(y)break;let C=!1;for(let k=0,I=h.length;k<I;k++)if(h[k](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const x=e.push("blockquote_open","blockquote",1);x.markup=">";const w=[t,0];x.map=w,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=s,e.parentType=m,w[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=d[E],e.sCount[E+t]=u[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function rue(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(i++);if(s!==42&&s!==45&&s!==95)return!1;let o=1;for(;i<a;){const u=e.src.charCodeAt(i++);if(u!==s&&!Lr(u))return!1;u===s&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(s)),!0}function wO(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Lr(i))return-1}return r}function xO(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Lr(i))?-1:a}function aue(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function iue(e,t,n,r){let a,i,s,o,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,m,y;if((y=xO(e,l))>=0){if(h=!0,s=e.bMarks[l]+e.tShift[l],m=Number(e.src.slice(s,y-1)),d&&m!==1)return!1}else if((y=wO(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(y)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(y-1),b=e.tokens.length;h?(o=e.push("ordered_list_open","ol",1),m!==1&&(o.attrs=[["start",m]])):o=e.push("bullet_list_open","ul",1);const x=[l,0];o.map=x,o.markup=String.fromCharCode(v);let w=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=y,a=e.eMarks[l];const C=e.sCount[l]+y-(e.bMarks[l]+e.tShift[l]);let k=C;for(;i<a;){const ue=e.src.charCodeAt(i);if(ue===9)k+=4-(k+e.bsCount[l])%4;else if(ue===32)k++;else break;i++}const I=i;let R;I>=a?R=1:R=k-C,R>4&&(R=1);const j=C+R;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(v);const F=[l,0];o.map=F,h&&(o.info=e.src.slice(s,y-1));const $=e.tight,G=e.tShift[l],D=e.sCount[l],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=j,e.tight=!0,e.tShift[l]=I-e.bMarks[l],e.sCount[l]=k,I>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||w)&&(u=!1),w=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[l]=G,e.sCount[l]=D,e.tight=$,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(v),l=e.line,F[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let q=!1;for(let ue=0,ie=S.length;ue<ie;ue++)if(S[ue](e,l,n,!0)){q=!0;break}if(q)break;if(h){if(y=xO(e,l),y<0)break;s=e.bMarks[l]+e.tShift[l]}else if(y=wO(e,l),y<0)break;if(v!==e.src.charCodeAt(y-1))break}return h?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(v),x[1]=l,e.line=l,e.parentType=E,u&&aue(e,b),!0}function sue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function o(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const R=e.md.block.ruler.getRules("reference"),j=e.parentType;e.parentType="reference";let F=!1;for(let $=0,G=R.length;$<G;$++)if(R[$](e,S,E,!0)){F=!0;break}if(e.parentType=j,F)return null}const k=e.bMarks[S]+e.tShift[S],I=e.eMarks[S];return e.src.slice(k,I+1)}let l=e.src.slice(a,i+1);i=l.length;let u=-1;for(a=1;a<i;a++){const S=l.charCodeAt(a);if(S===91)return!1;if(S===93){u=a;break}else if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(S===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(a=u+2;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Lr(S))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const m=a,y=s,v=a;for(;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Lr(S))break}let b=e.md.helpers.parseLinkTitle(l,a,i);for(;b.can_continue;){const S=o(s);if(S===null)break;l+=S,a=i,i=l.length,s++,b=e.md.helpers.parseLinkTitle(l,a,i,b)}let x;for(a<i&&v!==a&&b.ok?(x=b.str,a=b.pos):(x="",a=m,s=y);a<i;){const S=l.charCodeAt(a);if(!Lr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10&&x)for(x="",a=m,s=y;a<i;){const S=l.charCodeAt(a);if(!Lr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const w=Kx(l.slice(1,u));return w?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[w]>"u"&&(e.env.references[w]={title:x,href:h}),e.line=s),!0):!1}const oue=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],lue="[a-zA-Z_:][a-zA-Z0-9:._-]*",cue="[^\"'=<>`\\x00-\\x20]+",uue="'[^']*'",due='"[^"]*"',fue="(?:"+cue+"|"+uue+"|"+due+")",hue="(?:\\s+"+lue+"(?:\\s*=\\s*"+fue+")?)",WF="<[A-Za-z][A-Za-z0-9\\-]*"+hue+"*\\s*\\/?>",ZF="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",pue="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",mue="<[?][\\s\\S]*?[?]>",gue="<![A-Za-z][^>]*>",yue="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",bue=new RegExp("^(?:"+WF+"|"+ZF+"|"+pue+"|"+mue+"|"+gue+"|"+yue+")"),vue=new RegExp("^(?:"+WF+"|"+ZF+")"),oh=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+oue.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(vue.source+"\\s*$"),/^$/,!1]];function wue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let s=e.src.slice(a,i),o=0;for(;o<oh.length&&!oh[o][0].test(s);o++);if(o===oh.length)return!1;if(r)return oh[o][2];let l=t+1;if(!oh[o][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],s=e.src.slice(a,i),oh[o][1].test(s)){s.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function xue(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(a);if(s!==35||a>=i)return!1;let o=1;for(s=e.src.charCodeAt(++a);s===35&&a<i&&o<=6;)o++,s=e.src.charCodeAt(++a);if(o>6||a<i&&!Lr(s))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&Lr(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const u=e.push("heading_open","h"+String(o),1);u.markup="########".slice(0,o),u.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function _ue(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,s,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let y=e.bMarks[o]+e.tShift[o];const v=e.eMarks[o];if(y<v&&(s=e.src.charCodeAt(y),(s===45||s===61)&&(y=e.skipChars(y,s),y=e.skipSpaces(y),y>=v))){i=s===61?1:2;break}}if(e.sCount[o]<0)continue;let m=!1;for(let y=0,v=r.length;y<v;y++)if(r[y](e,o,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const u=e.push("heading_open","h"+String(i),1);u.markup=String.fromCharCode(s),u.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(s),e.parentType=a,!0}function Sue(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let u=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){u=!0;break}if(u)break}const s=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const dv=[["table",Qce,["paragraph","reference"]],["code",eue],["fence",tue,["paragraph","reference","blockquote","list"]],["blockquote",nue,["paragraph","reference","blockquote","list"]],["hr",rue,["paragraph","reference","blockquote","list"]],["list",iue,["paragraph","reference","blockquote"]],["reference",sue],["html_block",wue,["paragraph","reference","blockquote"]],["heading",xue,["paragraph","reference","blockquote"]],["lheading",_ue],["paragraph",Sue]];function Wx(){this.ruler=new Ui;for(let e=0;e<dv.length;e++)this.ruler.push(dv[e][0],dv[e][1],{alt:(dv[e][2]||[]).slice()})}Wx.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let s=t,o=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let u=!1;for(let d=0;d<a;d++)if(u=r[d](e,s,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),s=e.line,s<n&&e.isEmpty(s)&&(o=!0,s++,e.line=s)}};Wx.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};Wx.prototype.State=ll;function J0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}J0.prototype.pushPending=function(){const e=new po("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};J0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new po(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};J0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const s=i-e,o=i<n?this.src.charCodeAt(i):32,l=Zg(a)||Wg(String.fromCharCode(a)),u=Zg(o)||Wg(String.fromCharCode(o)),d=Kg(a),h=Kg(o),m=!h&&(!u||d||l),y=!d&&(!l||h||u);return{can_open:m&&(t||!y||l),can_close:y&&(t||!m||u),length:s}};J0.prototype.Token=po;function Eue(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Cue(e,t){let n=e.pos;for(;n<e.posMax&&!Eue(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const kue=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Tue(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(kue);if(!a)return!1;const i=a[1],s=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!s)return!1;let o=s.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(o);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=o.length-i.length,!0}function Aue(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Lr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const JT=[];for(let e=0;e<256;e++)JT.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){JT[e.charCodeAt(0)]=1});function Nue(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Lr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=e.src[n+1],n++)}const s="\\"+i;if(!t){const o=e.push("text_special","",0);a<256&&JT[a]!==0?o.content=i:o.content=s,o.markup=s,o.info="escape"}return e.pos=n+1,!0}function Rue(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(a,n),o=s.length;if(e.backticksScanned&&(e.backticks[o]||0)<=a)return t||(e.pending+=s),e.pos+=o,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===o){if(!t){const h=e.push("code_inline","code",0);h.markup=s,h.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=u}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=o,!0}function Iue(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const s=String.fromCharCode(r);if(i<2)return!1;let o;i%2&&(o=e.push("text","",0),o.content=s,i--);for(let l=0;l<i;l+=2)o=e.push("text","",0),o.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function _O(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const s=t[i];if(s.marker!==126||s.end===-1)continue;const o=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const i=r.pop();let s=i+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,i!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[i],e.tokens[i]=n)}}function jue(e){const t=e.tokens_meta,n=e.tokens_meta.length;_O(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&_O(e,t[r].delimiters)}const YF={tokenize:Iue,postProcess:jue};function Oue(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function SO(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],s=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,o=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?o+o:o,l.content="";const u=e.tokens[i.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?o+o:o,u.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function Due(e){const t=e.tokens_meta,n=e.tokens_meta.length;SO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&SO(e,t[r].delimiters)}const XF={tokenize:Oue,postProcess:Due};function Mue(e,t){let n,r,a,i,s="",o="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,m=e.pos+1,y=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(y<0)return!1;let v=y+1;if(v<h&&e.src.charCodeAt(v)===40){for(u=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(s=e.md.normalizeLink(a.str),e.md.validateLink(s)?v=a.pos:s="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&a.ok)for(o=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Lr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(u=!0),v++}if(u){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=y+1):v=y+1,r||(r=e.src.slice(m,y)),i=e.env.references[Kx(r)],!i)return e.pos=d,!1;s=i.href,o=i.title}if(!t){e.pos=m,e.posMax=y;const b=e.push("link_open","a",1),x=[["href",s]];b.attrs=x,o&&x.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function Pue(e,t){let n,r,a,i,s,o,l,u,d="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const y=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);if(i>=m)return!1;for(u=i,o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),o.ok&&(d=e.md.normalizeLink(o.str),e.md.validateLink(d)?i=o.pos:d=""),u=i;i<m&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);if(o=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&u!==i&&o.ok)for(l=o.str,i=o.pos;i<m&&(n=e.src.charCodeAt(i),!(!Lr(n)&&n!==10));i++);else l="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(u=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(u,i++):i=v+1):i=v+1,a||(a=e.src.slice(y,v)),s=e.env.references[Kx(a)],!s)return e.pos=h,!1;d=s.href,l=s.title}if(!t){r=e.src.slice(y,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const x=e.push("image","img",0),w=[["src",d],["alt",""]];x.attrs=w,x.children=b,x.content=r,l&&w.push(["title",l])}return e.pos=i,e.posMax=m,!0}const Fue=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Lue=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function $ue(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const i=e.src.slice(r+1,n);if(Lue.test(i)){const s=e.md.normalizeLink(i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}if(Fue.test(i)){const s=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}return!1}function Bue(e){return/^<a[>\s]/i.test(e)}function zue(e){return/^<\/a\s*>/i.test(e)}function Uue(e){const t=e|32;return t>=97&&t<=122}function Hue(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!Uue(a))return!1;const i=e.src.slice(r).match(bue);if(!i)return!1;if(!t){const s=e.push("html_inline","",0);s.content=i[0],Bue(s.content)&&e.linkLevel++,zue(s.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const que=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Vue=/^&([a-z][a-z0-9]{1,31});/i;function Gue(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(que);if(i){if(!t){const s=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=e.push("text_special","",0);o.content=YT(s)?jw(s):jw(65533),o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(Vue);if(i){const s=HF(i[0]);if(s!==i[0]){if(!t){const o=e.push("text_special","",0);o.content=s,o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function EO(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let s=0;s<n;s++){const o=e[s];if(i.push(0),(e[r].marker!==o.marker||a!==o.token-1)&&(r=s),a=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let u=r-i[r]-1,d=u;for(;u>l;u-=i[u]+1){const h=e[u];if(h.marker===o.marker&&h.open&&h.end<0){let m=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(m=!0),!m){const y=u>0&&!e[u-1].open?i[u-1]+1:0;i[s]=s-u+y,i[u]=y,o.open=!1,h.end=s,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=d)}}function Kue(e){const t=e.tokens_meta,n=e.tokens_meta.length;EO(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&EO(t[r].delimiters)}function Wue(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const l2=[["text",Cue],["linkify",Tue],["newline",Aue],["escape",Nue],["backticks",Rue],["strikethrough",YF.tokenize],["emphasis",XF.tokenize],["link",Mue],["image",Pue],["autolink",$ue],["html_inline",Hue],["entity",Gue]],c2=[["balance_pairs",Kue],["strikethrough",YF.postProcess],["emphasis",XF.postProcess],["fragments_join",Wue]];function Q0(){this.ruler=new Ui;for(let e=0;e<l2.length;e++)this.ruler.push(l2[e][0],l2[e][1]);this.ruler2=new Ui;for(let e=0;e<c2.length;e++)this.ruler2.push(c2[e][0],c2[e][1])}Q0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let s=!1;if(e.level<a){for(let o=0;o<r;o++)if(e.level++,s=n[o](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,i[t]=e.pos};Q0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let s=!1;if(e.level<a){for(let o=0;o<n;o++)if(s=t[o](e,!1),s){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Q0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),s=i.length;for(let o=0;o<s;o++)i[o](a)};Q0.prototype.State=J0;function Zue(e){const t={};e=e||{},t.src_Any=LF.source,t.src_Cc=$F.source,t.src_Z=zF.source,t.src_P=WT.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function BC(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function Zx(e){return Object.prototype.toString.call(e)}function Yue(e){return Zx(e)==="[object String]"}function Xue(e){return Zx(e)==="[object Object]"}function Jue(e){return Zx(e)==="[object RegExp]"}function CO(e){return Zx(e)==="[object Function]"}function Que(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const JF={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function ede(e){return Object.keys(e||{}).reduce(function(t,n){return t||JF.hasOwnProperty(n)},!1)}const tde={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},nde="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",rde="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function ade(e){e.__index__=-1,e.__text_cache__=""}function ide(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function kO(){return function(e,t){t.normalize(e)}}function Ow(e){const t=e.re=Zue(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(nde),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[o]=u,Xue(l)){Jue(l.validate)?u.validate=ide(l.validate):CO(l.validate)?u.validate=l.validate:i(o,l),CO(l.normalize)?u.normalize=l.normalize:l.normalize?i(o,l):u.normalize=kO();return}if(Yue(l)){a.push(o);return}i(o,l)}),a.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:kO()};const s=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(Que).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),ade(e)}function sde(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function zC(e,t){const n=new sde(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function us(e,t){if(!(this instanceof us))return new us(e,t);t||ede(e)&&(t=e,e={}),this.__opts__=BC({},JF,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=BC({},tde,e),this.__compiled__={},this.__tlds__=rde,this.__tlds_replaced__=!1,this.re={},Ow(this)}us.prototype.add=function(t,n){return this.__schemas__[t]=n,Ow(this),this};us.prototype.set=function(t){return this.__opts__=BC(this.__opts__,t),this};us.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,s,o,l,u,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(s=a.index+a[1].length,o=a.index+a[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o))),this.__index__>=0};us.prototype.pretest=function(t){return this.re.pretest.test(t)};us.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};us.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(zC(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(zC(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};us.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,zC(this,0)):null};us.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Ow(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Ow(this),this)};us.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};us.prototype.onCompile=function(){};const kh=2147483647,Vo=36,QT=1,Yg=26,ode=38,lde=700,QF=72,eL=128,tL="-",cde=/^xn--/,ude=/[^\0-\x7F]/,dde=/[\x2E\u3002\uFF0E\uFF61]/g,fde={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u2=Vo-QT,Go=Math.floor,d2=String.fromCharCode;function Qc(e){throw new RangeError(fde[e])}function hde(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function nL(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(dde,".");const a=e.split("."),i=hde(a,t).join(".");return r+i}function rL(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const pde=e=>String.fromCodePoint(...e),mde=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Vo},TO=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},aL=function(e,t,n){let r=0;for(e=n?Go(e/lde):e>>1,e+=Go(e/t);e>u2*Yg>>1;r+=Vo)e=Go(e/u2);return Go(r+(u2+1)*e/(e+ode))},iL=function(e){const t=[],n=e.length;let r=0,a=eL,i=QF,s=e.lastIndexOf(tL);s<0&&(s=0);for(let o=0;o<s;++o)e.charCodeAt(o)>=128&&Qc("not-basic"),t.push(e.charCodeAt(o));for(let o=s>0?s+1:0;o<n;){const l=r;for(let d=1,h=Vo;;h+=Vo){o>=n&&Qc("invalid-input");const m=mde(e.charCodeAt(o++));m>=Vo&&Qc("invalid-input"),m>Go((kh-r)/d)&&Qc("overflow"),r+=m*d;const y=h<=i?QT:h>=i+Yg?Yg:h-i;if(m<y)break;const v=Vo-y;d>Go(kh/v)&&Qc("overflow"),d*=v}const u=t.length+1;i=aL(r-l,u,l==0),Go(r/u)>kh-a&&Qc("overflow"),a+=Go(r/u),r%=u,t.splice(r++,0,a)}return String.fromCodePoint(...t)},sL=function(e){const t=[];e=rL(e);const n=e.length;let r=eL,a=0,i=QF;for(const l of e)l<128&&t.push(d2(l));const s=t.length;let o=s;for(s&&t.push(tL);o<n;){let l=kh;for(const d of e)d>=r&&d<l&&(l=d);const u=o+1;l-r>Go((kh-a)/u)&&Qc("overflow"),a+=(l-r)*u,r=l;for(const d of e)if(d<r&&++a>kh&&Qc("overflow"),d===r){let h=a;for(let m=Vo;;m+=Vo){const y=m<=i?QT:m>=i+Yg?Yg:m-i;if(h<y)break;const v=h-y,b=Vo-y;t.push(d2(TO(y+v%b,0))),h=Go(v/b)}t.push(d2(TO(h,0))),i=aL(a,u,o===s),a=0,++o}++a,++r}return t.join("")},gde=function(e){return nL(e,function(t){return cde.test(t)?iL(t.slice(4).toLowerCase()):t})},yde=function(e){return nL(e,function(t){return ude.test(t)?"xn--"+sL(t):t})},oL={version:"2.3.1",ucs2:{decode:rL,encode:pde},decode:iL,encode:sL,toASCII:yde,toUnicode:gde},bde={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},vde={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},wde={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},xde={default:bde,zero:vde,commonmark:wde},_de=/^(vbscript|javascript|file|data):/,Sde=/^data:image\/(gif|png|jpeg|webp);/;function Ede(e){const t=e.trim().toLowerCase();return _de.test(t)?Sde.test(t):!0}const lL=["http:","https:","mailto:"];function Cde(e){const t=KT(e,!0);if(t.hostname&&(!t.protocol||lL.indexOf(t.protocol)>=0))try{t.hostname=oL.toASCII(t.hostname)}catch{}return X0(GT(t))}function kde(e){const t=KT(e,!0);if(t.hostname&&(!t.protocol||lL.indexOf(t.protocol)>=0))try{t.hostname=oL.toUnicode(t.hostname)}catch{}return Jh(GT(t),Jh.defaultChars+"%")}function Os(e,t){if(!(this instanceof Os))return new Os(e,t);t||ZT(e)||(t=e||{},e="default"),this.inline=new Q0,this.block=new Wx,this.core=new XT,this.renderer=new _p,this.linkify=new us,this.validateLink=Ede,this.normalizeLink=Cde,this.normalizeLinkText=kde,this.utils=Ace,this.helpers=Gx({},jce),this.options={},this.configure(e),t&&this.set(t)}Os.prototype.set=function(e){return Gx(this.options,e),this};Os.prototype.configure=function(e){const t=this;if(ZT(e)){const n=e;if(e=xde[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Os.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Os.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Os.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Os.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Os.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Os.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Os.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const f2=new Os({html:!1,linkify:!0,breaks:!0});function cL(e){return T.useMemo(()=>{var n;if(!e)return[];try{const r=f2.parse(e,{}),a=[];let i="",s=0;for(;s<r.length;){const o=r[s];if(o.type==="fence"){i&&(a.push(i),i="");const l=((n=o.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:o.content}),s++}else{const l=[];for(;s<r.length&&r[s].type!=="fence";)l.push(r[s]),s++;l.length>0&&(i+=f2.renderer.render(l,f2.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const Tde=({toolCall:e})=>{const[t,n]=T.useState(!0),r=()=>n(i=>!i),a=T.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return p.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Vn,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?p.jsx(il,{}):p.jsx(Gd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(_0,{lang:"json",code:a})]})},Ade=({toolResult:e})=>{const[t,n]=T.useState(!0),r=()=>n(s=>!s),a=T.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return p.jsxs("div",{className:_t("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:_t("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Vn,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?p.jsx(il,{}):p.jsx(Gd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(_0,{lang:i?"text":"json",code:a})]})},Nde=({markdownContent:e})=>{const t=cL(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return p.jsx(_0,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},Rde=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:s,toggleFold:o})=>{const[l,u]=T.useState(!0),d=T.useCallback(()=>u(b=>!b),[]),h=!!r,m=e&&(typeof e!="string"||e.trim().length>0),y=t&&t.length>0,v=n&&n.length>0;return s?p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:o,children:[h?"[Reasoning] ":"",y?`[${t==null?void 0:t.length} Tool Call(s)] `:"",m&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:y||v||h?"":"[No text response]"]}):p.jsxs(p.Fragment,{children:[a&&i&&p.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:i})]}),h&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(yk,{className:"h-3.5 w-3.5"})," Reasoning"]}),p.jsx(Vn,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:d,"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?p.jsx(il,{}):p.jsx(Gd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!l&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:r})]}),t==null?void 0:t.map((b,x)=>{try{const w=JSON.parse(b);return p.jsx(Tde,{toolCall:w},`call-${x}`)}catch(w){return console.error("Failed to parse tool call string:",w),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${x}`)}}),n==null?void 0:n.map((b,x)=>{try{const w=JSON.parse(b);return p.jsx(Ade,{toolResult:w},`res-${x}`)}catch(w){return console.error("Failed to parse tool result string:",w),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${x}`)}}),p.jsx(Nde,{markdownContent:e}),!m&&!y&&!v&&!h&&p.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},uL=gt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var C,k,I,R,j,F,$,G,D,Z,q,ue;const[i,s]=T.useState(!1),{dbProviderConfigs:o,getAllAvailableModelDefsForProvider:l}=$n(dn(ie=>({dbProviderConfigs:ie.dbProviderConfigs,getAllAvailableModelDefsForProvider:ie.getAllAvailableModelDefsForProvider}))),u=T.useCallback(()=>s(ie=>!ie),[]),d=e.endedAt?FF(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=T.useMemo(()=>{var te;const ie=(te=e.metadata)==null?void 0:te.modelId;if(!ie)return"Unknown Model";const{providerId:ne,modelId:X}=cc(ie);if(!ne||!X)return ie;const ae=o.find(fe=>fe.id===ne),B=(ae==null?void 0:ae.name)??ne,ee=l(ne).find(fe=>fe.id===X);return`${(ee==null?void 0:ee.name)??X} (${B})`},[(C=e.metadata)==null?void 0:C.modelId,o,l]),m=e.status==="COMPLETED",y=m||e.status==="ERROR",v=e.status==="ERROR",b=e.response&&(typeof e.response!="string"||e.response.trim().length>0),x=((k=e.metadata)==null?void 0:k.toolCalls)&&e.metadata.toolCalls.length>0,w=((I=e.metadata)==null?void 0:I.toolResults)&&e.metadata.toolResults.length>0,S=!!((R=e.metadata)!=null&&R.reasoning),E=b||x||w||S;return p.jsxs("div",{className:_t("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",v?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&p.jsx(VT,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:m}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[p.jsx(Ble,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:u,canFold:E,promptTokens:(j=e.metadata)==null?void 0:j.promptTokens,completionTokens:(F=e.metadata)==null?void 0:F.completionTokens,timeToFirstToken:($=e.metadata)==null?void 0:$.timeToFirstToken,generationTime:(G=e.metadata)==null?void 0:G.generationTime}),p.jsx(Rde,{response:e.response,toolCalls:(D=e.metadata)==null?void 0:D.toolCalls,toolResults:(Z=e.metadata)==null?void 0:Z.toolResults,reasoning:(q=e.metadata)==null?void 0:q.reasoning,isError:v,errorMessage:(ue=e.metadata)==null?void 0:ue.error,isFolded:i,toggleFold:u})]}),y&&p.jsx(zle,{interactionId:e.id,onEdit:r,onRegenerate:t,onDelete:n})]})});uL.displayName="InteractionCard";const AO=(e,t,n,r)=>{if(typeof e=="string")return e.trim()?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const a=e,i=a.lang?`language-${a.lang}`:"language-plaintext";return n?p.jsx(_0,{lang:a.lang,code:a.code,isStreaming:r},`code-${t}`):p.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[p.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:p.jsx("div",{className:"text-sm font-medium",children:a.lang?a.lang.toUpperCase():"CODE"})}),p.jsx("code",{className:_t(i,"block p-4 font-mono text-sm leading-relaxed"),children:a.code})]},`pre-${t}`)}return null},Ide=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=lr(dn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,enableStreamingCodeBlockParsing:m.enableStreamingCodeBlockParsing}))),i=cL(r?e:null),[s,o]=T.useState([]),[l,u]=T.useState(null),d=T.useRef(0);T.useEffect(()=>{if(!r){o([]),u(e??null),d.current=0;return}const m=d.current,y=i.slice(m,i.length-1);if(y.length>0){const b=y.map((x,w)=>AO(x,m+w,a,!1)).filter(x=>x!==null);o(x=>[...x,...b]),d.current+=y.length}const v=i.length>0?i[i.length-1]:null;JSON.stringify(v)!==JSON.stringify(l)&&u(v),e||(o([]),u(null),d.current=0)},[i,r,a,l,e]);const h=T.useMemo(()=>!l||!r?null:AO(l,d.current,a,!0),[l,a,r]);return!(e!=null&&e.trim())&&s.length===0?p.jsx("div",{className:_t("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."}):r?p.jsxs("div",{className:_t(n),children:[s,h]}):p.jsx("pre",{className:_t("whitespace-pre-wrap text-sm",n),children:e})},jde=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>p.jsx(Vn,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:p.jsx(MV,{}),variant:r,size:n,className:t}),UC=gt.memo(({interactionId:e,onStop:t,className:n})=>{var v;const{interaction:r,interactionStatus:a}=qn(dn(b=>{const x=b.interactions.find(w=>w.id===e);return{interaction:x,interactionStatus:x==null?void 0:x.status}})),i=lr(b=>b.streamingRenderFPS),[s,o]=T.useState(""),l=T.useRef(null),u=T.useRef(0);T.useEffect(()=>{const b=1e3/i;let x=!0;const w=S=>{if(!x)return;if(qn.getState().streamingInteractionIds.includes(e)){if(S-u.current>=b){const C=qn.getState().activeStreamBuffers[e]??"";o(C),u.current=S}l.current=requestAnimationFrame(w)}else{const C=qn.getState().activeStreamBuffers[e]??"";o(C),l.current=null}};return l.current=requestAnimationFrame(w),()=>{x=!1,l.current&&(cancelAnimationFrame(l.current),l.current=null)}},[e,i]),T.useEffect(()=>{if(a&&a!=="STREAMING"){const b=qn.getState().activeStreamBuffers[e]??"";o(b),l.current&&(cancelAnimationFrame(l.current),l.current=null)}},[a,e]);const{dbProviderConfigs:d,getAllAvailableModelDefsForProvider:h}=$n(dn(b=>({dbProviderConfigs:b.dbProviderConfigs,getAllAvailableModelDefsForProvider:b.getAllAvailableModelDefsForProvider}))),m=T.useMemo(()=>{var I;const b=(I=r==null?void 0:r.metadata)==null?void 0:I.modelId;if(!b)return"Loading Model...";const{providerId:x,modelId:w}=cc(b);if(!x||!w)return b;const S=d.find(R=>R.id===x),E=(S==null?void 0:S.name)??x,k=h(x).find(R=>R.id===w);return`${(k==null?void 0:k.name)??w} (${E})`},[(v=r==null?void 0:r.metadata)==null?void 0:v.modelId,d,h]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),p.jsxs("div",{className:_t("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[p.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const y=()=>{t&&t(e)};return p.jsxs("div",{className:_t("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&p.jsx(VT,{turnData:r.prompt,timestamp:r.startedAt,isAssistantComplete:!1}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",m,")"]}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsx(Ide,{markdownContent:s,isStreaming:!0})]}),t&&p.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200",children:p.jsx(jde,{onStop:y,"aria-label":"Stop Generation"})})]})});UC.displayName="StreamingInteractionCard";var Ode=T.createContext(void 0);function Sp(e){const t=T.useContext(Ode);return e||t||"ltr"}function Xg(e,[t,n]){return Math.min(n,Math.max(t,e))}function Dde(e,t){return T.useReducer((n,r)=>t[n][r]??n,e)}var eA="ScrollArea",[dL,VSe]=di(eA),[Mde,$s]=dL(eA),fL=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,l]=T.useState(null),[u,d]=T.useState(null),[h,m]=T.useState(null),[y,v]=T.useState(null),[b,x]=T.useState(null),[w,S]=T.useState(0),[E,C]=T.useState(0),[k,I]=T.useState(!1),[R,j]=T.useState(!1),F=Cn(t,G=>l(G)),$=Sp(a);return p.jsx(Mde,{scope:n,type:r,dir:$,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:y,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:I,scrollbarY:b,onScrollbarYChange:x,scrollbarYEnabled:R,onScrollbarYEnabledChange:j,onCornerWidthChange:S,onCornerHeightChange:C,children:p.jsx(rn.div,{dir:$,...s,ref:F,style:{position:"relative","--radix-scroll-area-corner-width":w+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});fL.displayName=eA;var hL="ScrollAreaViewport",pL=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,s=$s(hL,n),o=T.useRef(null),l=Cn(t,o,s.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),p.jsx(rn.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});pL.displayName=hL;var cl="ScrollAreaScrollbar",mL=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=$s(cl,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o=e.orientation==="horizontal";return T.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),a.type==="hover"?p.jsx(Pde,{...r,ref:t,forceMount:n}):a.type==="scroll"?p.jsx(Fde,{...r,ref:t,forceMount:n}):a.type==="auto"?p.jsx(gL,{...r,ref:t,forceMount:n}):a.type==="always"?p.jsx(tA,{...r,ref:t}):null});mL.displayName=cl;var Pde=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=$s(cl,e.__scopeScrollArea),[i,s]=T.useState(!1);return T.useEffect(()=>{const o=a.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),p.jsx(Ta,{present:n||i,children:p.jsx(gL,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Fde=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=$s(cl,e.__scopeScrollArea),i=e.orientation==="horizontal",s=Xx(()=>l("SCROLL_END"),100),[o,l]=Dde("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return T.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,a.scrollHideDelay,l]),T.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const y=u[d];h!==y&&(l("SCROLL"),s()),h=y};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,l,s]),p.jsx(Ta,{present:n||o!=="hidden",children:p.jsx(tA,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:qt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:qt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),gL=T.forwardRef((e,t)=>{const n=$s(cl,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,s]=T.useState(!1),o=e.orientation==="horizontal",l=Xx(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?u:d)}},10);return ep(n.viewport,l),ep(n.content,l),p.jsx(Ta,{present:r||i,children:p.jsx(tA,{"data-state":i?"visible":"hidden",...a,ref:t})})}),tA=T.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=$s(cl,e.__scopeScrollArea),i=T.useRef(null),s=T.useRef(0),[o,l]=T.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=xL(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:m=>s.current=m};function h(m,y){return Hde(m,s.current,o,y)}return n==="horizontal"?p.jsx(Lde,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,y=NO(m,o,a.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?p.jsx($de,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,y=NO(m,o);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),Lde=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=$s(cl,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),u=Cn(t,l,i.onScrollbarXChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(bL,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Yx(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),SL(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Mw(s.paddingLeft),paddingEnd:Mw(s.paddingRight)}})}})}),$de=T.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=$s(cl,e.__scopeScrollArea),[s,o]=T.useState(),l=T.useRef(null),u=Cn(t,l,i.onScrollbarYChange);return T.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(bL,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Yx(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),SL(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Mw(s.paddingTop),paddingEnd:Mw(s.paddingBottom)}})}})}),[Bde,yL]=dL(cl),bL=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,y=$s(cl,n),[v,b]=T.useState(null),x=Cn(t,F=>b(F)),w=T.useRef(null),S=T.useRef(""),E=y.viewport,C=r.content-r.viewport,k=La(d),I=La(l),R=Xx(h,10);function j(F){if(w.current){const $=F.clientX-w.current.left,G=F.clientY-w.current.top;u({x:$,y:G})}}return T.useEffect(()=>{const F=$=>{const G=$.target;(v==null?void 0:v.contains(G))&&k($,C)};return document.addEventListener("wheel",F,{passive:!1}),()=>document.removeEventListener("wheel",F,{passive:!1})},[E,v,C,k]),T.useEffect(I,[r,I]),ep(v,R),ep(y.content,R),p.jsx(Bde,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:La(i),onThumbPointerUp:La(s),onThumbPositionChange:I,onThumbPointerDown:La(o),children:p.jsx(rn.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:qt(e.onPointerDown,F=>{F.button===0&&(F.target.setPointerCapture(F.pointerId),w.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),j(F))}),onPointerMove:qt(e.onPointerMove,j),onPointerUp:qt(e.onPointerUp,F=>{const $=F.target;$.hasPointerCapture(F.pointerId)&&$.releasePointerCapture(F.pointerId),document.body.style.webkitUserSelect=S.current,y.viewport&&(y.viewport.style.scrollBehavior=""),w.current=null})})})}),Dw="ScrollAreaThumb",vL=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=yL(Dw,e.__scopeScrollArea);return p.jsx(Ta,{present:n||a.hasThumb,children:p.jsx(zde,{ref:t,...r})})}),zde=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=$s(Dw,n),s=yL(Dw,n),{onThumbPositionChange:o}=s,l=Cn(t,h=>s.onThumbChange(h)),u=T.useRef(void 0),d=Xx(()=>{u.current&&(u.current(),u.current=void 0)},100);return T.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!u.current){const y=qde(h,o);u.current=y,o()}};return o(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,o]),p.jsx(rn.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:qt(e.onPointerDownCapture,h=>{const y=h.target.getBoundingClientRect(),v=h.clientX-y.left,b=h.clientY-y.top;s.onThumbPointerDown({x:v,y:b})}),onPointerUp:qt(e.onPointerUp,s.onThumbPointerUp)})});vL.displayName=Dw;var nA="ScrollAreaCorner",wL=T.forwardRef((e,t)=>{const n=$s(nA,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(Ude,{...e,ref:t}):null});wL.displayName=nA;var Ude=T.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=$s(nA,n),[i,s]=T.useState(0),[o,l]=T.useState(0),u=!!(i&&o);return ep(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),ep(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),s(d)}),u?p.jsx(rn.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Mw(e){return e?parseInt(e,10):0}function xL(e,t){const n=e/t;return isNaN(n)?0:n}function Yx(e){const t=xL(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Hde(e,t,n,r="ltr"){const a=Yx(n),i=a/2,s=t||i,o=a-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return _L([l,u],h)(e)}function NO(e,t,n="ltr"){const r=Yx(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-r,l=n==="ltr"?[0,s]:[s*-1,0],u=Xg(e,l);return _L([0,s],[0,o])(u)}function _L(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function SL(e,t){return e>0&&e<t}var qde=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,o=n.top!==i.top;(s||o)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Xx(e,t){const n=La(e),r=T.useRef(0);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),T.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function ep(e,t){const n=La(t);Ua(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Vde=fL,Gde=pL,Kde=wL;function sc({className:e,children:t,...n}){return p.jsxs(Vde,{"data-slot":"scroll-area",className:_t("relative",e),...n,children:[p.jsx(Gde,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),p.jsx(Wde,{}),p.jsx(Kde,{})]})}function Wde({className:e,orientation:t="vertical",...n}){return p.jsx(mL,{"data-slot":"scroll-area-scrollbar",orientation:t,className:_t("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:p.jsx(vL,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function dr({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:_t("bg-accent animate-pulse rounded-md",e),...t})}const RO=()=>p.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[p.jsx(dD,{className:"h-16 w-16 text-muted-foreground mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),p.jsx("p",{className:"text-muted-foreground max-w-md",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat."})]}),os=Ds(Ms(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:t=>{e(n=>{n.isVfsModalOpen=t??!n.isVfsModalOpen})}}))),Zde=".litechat/conversations",EL="/synced_repos";async function Yde(e,t,n){n(t.id,"syncing");const r=rr(`${EL}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let s=!1;try{await e.promises.stat(Qo(r,".git")),s=!0}catch(o){if(o.code==="ENOENT")s=!1;else throw o}s?(Ye.info(`Pulling latest changes for "${t.name}"...`),await Hx(r,i,a,{fsInstance:e}),Ye.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(Ye.info(`Cloning repository "${t.name}"...`),await kF(r,t.remoteUrl,i,a,{fsInstance:e}),Ye.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(s){console.error(`Failed to initialize/sync repository ${t.name}:`,s),n(t.id,"error")}}async function Xde(e,t,n,r,a,i,s){var h,m;r(t.id,"syncing");const o=rr(`${EL}/${n.id}`),l=Qo(o,Zde,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(Qo(o,".git"))}catch(w){if(w.code==="ENOENT"){Ye.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw w}Ye.info(`Pulling latest changes for "${n.name}"...`),await Hx(o,d,u,{fsInstance:e});let y=null,v=null;try{const w=await uf(l,{fsInstance:e}),S=new TextDecoder().decode(w);y=JSON.parse(S),v=(h=y==null?void 0:y.conversation)!=null&&h.updatedAt?new Date(y.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(w){w.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${w.message}`),Ye.warning(`Could not read remote version of conversation: ${w.message}`))}const b=t.updatedAt.getTime(),x=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!y||b>(v??0)||b>x&&b>=(v??0)){Ye.info("Local changes detected. Pushing to remote...");const w=await xt.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:w},null,2);await qx(l,C,{fsInstance:e}),await BT(o,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await zT(o,d,u,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),Ye.success("Conversation synced successfully (pushed).")}else if(v&&v>b){Ye.info("Remote changes detected. Updating local conversation...");const w={...y.conversation,createdAt:new Date(y.conversation.createdAt),updatedAt:new Date(y.conversation.updatedAt),lastSyncedAt:new Date};await xt.saveConversation(w),await xt.deleteInteractionsForConversation(t.id);const S=y.interactions.map(E=>xt.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&s()==="conversation"&&await qn.getState().loadInteractions(t.id),r(t.id,"idle"),Ye.success("Conversation synced successfully (pulled).")}else Ye.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(y){console.error(`Sync failed for conversation ${t.id}:`,y),r(t.id,"error",y.message)}}const lo=Ds(Ms((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&Ye.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const s=i.parentId??r.rootId??"";a[s]||(a[s]=r.childrenMap[s]?[...r.childrenMap[s]]:[]),a[s].includes(i.id)||a[s].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const s=i.parentId??r.rootId??"";if(r.childrenMap[s]&&(r.childrenMap[s]=r.childrenMap[s].filter(o=>o!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),kt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),kt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),kt.emit(Et.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:s,_addNodes:o,_setFsInstance:l,_setConfiguredVfsKey:u}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),s(null));try{const d=await woe(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const y=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${y}`),e({initializingKey:null,loading:!1}),new Error(y)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),u(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let m=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(y){if(y.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw y}if(!m||m.path!=="/"){const y=Date.now();m={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:y,lastModified:y},o([m]),console.log("[VfsStore] Root node added/updated in state.")}return e(y=>{y.rootId=m.id,y.currentParentId=m.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${m.id}`),await t().fetchNodes(m.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(s(h),a||(l(null),u(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d,initializingKey:h}=t();if(!s||u!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!s}, Match: ${u===d}, Init: ${h}`);return}r(!0);try{const m=n?o[n]:o[l||""],y=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${y} (Key: ${u})`);const v=await UT(y,{fsInstance:s});console.log(`[VfsStore] Fetched ${v.length} entries for ${y}`);const b=n??l??"",x=new Set(v.map(k=>k.path)),E=(t().childrenMap[b]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!x.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(k=>{const I=Object.values(t().nodes).find(j=>j.path===k.path),R=Date.now();return{id:(I==null?void 0:I.id)||_i(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(I==null?void 0:I.createdAt)??R,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(k=>{const I=C.map(R=>R.id);(!k.childrenMap[b]||JSON.stringify(k.childrenMap[b].sort())!==JSON.stringify(I.sort()))&&(k.childrenMap[b]=I,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=rr(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:s}=t();if(!s||t().vfsKey!==t().configuredVfsKey)return;const o=rr(n),l=r(o);l&&l.type==="folder"?(e(u=>{u.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,_addNodes:u,configuredVfsKey:d,vfsKey:h}=t();if(!s||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const m=n?o[n]:o[l||""],y=m?m.path:"/",v=Fg(y,r.trim());try{throw await s.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await NF(v,{fsInstance:s});const b=Date.now(),w={id:_i(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};u([w])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d}=t();if(!s||u!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/";await RF(Array.from(r),m,{fsInstance:s}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:s,configuredVfsKey:o,vfsKey:l}=t();if(!s||o!==l){a("Filesystem not ready.");return}r(!0);try{const u=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of u)await HT(d.path,d.type==="folder",{fsInstance:s});i(n)}catch(u){console.error("Failed to delete nodes:",u),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:s,nodes:o,fs:l,rootId:u,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=o[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){a(!0);try{const y=m.parentId?o[m.parentId]:o[u||""],v=y?y.path:"/",b=Fg(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(w){if(w.code!=="ENOENT")throw w}await IF(m.path,b,{fsInstance:l});const x={name:r.trim(),path:b,lastModified:Date.now()};s(n,x)}catch(y){console.error("Failed to rename item:",y),i(y.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:s,vfsKey:o}=t();if(!a||s!==o)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const u=await uf(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([u],{type:d});return{name:l.name,blob:h}}catch(u){return console.error("Failed to download file:",u),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),ai=Ds(Ms((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{const r=_i(),a=new Date,i=n.parentId??null,s=i?t().getProjectById(i):null,o=s?s.path:"/",l=Fg(o,n.name),u={id:r,createdAt:a,updatedAt:a,name:n.name,parentId:i,path:l,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(d=>{d.projects.push(u),d.projects.sort((h,m)=>m.updatedAt.getTime()-h.updatedAt.getTime())});try{const d=t().getProjectById(r);if(d)await xt.saveProject(d),await lo.getState().initializeVFS(r);else throw new Error("Failed to retrieve newly added project state");return r}catch(d){throw console.error("ProjectStore: Error adding project",d),e(h=>({error:"Failed to save new project",projects:h.projects.filter(m=>m.id!==r)})),d}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}let i=a.path;if(r.name&&r.name!==a.name){const o=R0(a.path);i=Fg(o,r.name)}const s={...a,...r,path:i,updatedAt:new Date};e(o=>{const l=o.projects.findIndex(u=>u.id===n);l!==-1&&(o.projects[l]=s,o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()))});try{await xt.saveProject(s)}catch(o){throw console.error("ProjectStore: Error updating project",o),e(l=>{const u=l.projects.findIndex(d=>d.id===n);u!==-1&&(l.projects[u]=a,l.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())),l.error="Failed to save project update"}),o}},deleteProject:async n=>{const r=t().getProjectById(n);if(!r)return;const a=t().projects.filter(s=>s.parentId===n).map(s=>s.id),i=[n,...a];e(s=>({projects:s.projects.filter(o=>!i.includes(o.id))})),mn.getState()._unlinkConversationsFromProjects(i);try{await xt.deleteProject(n),Ye.success(`Project "${r.name}" deleted.`)}catch(s){throw console.error("ProjectStore: Error deleting project",s),e(o=>{const l=t().projects.filter(u=>i.includes(u.id)).concat(r);o.projects.push(...l),o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),o.error="Failed to delete project"}),s}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getProjectHierarchy:n=>{const r=[];let a=n;for(;a;){const i=t().getProjectById(a);if(i)r.unshift({id:i.id,name:i.name}),a=i.parentId;else break}return r},getEffectiveProjectSettings:n=>{const r=lr.getState(),a=$n.getState().selectedModelId;let i=n,s={systemPrompt:null,modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null};for(;i;){const o=t().getProjectById(i);if(o)s.systemPrompt===null&&o.systemPrompt!==null&&o.systemPrompt!==void 0&&(s.systemPrompt=o.systemPrompt),s.modelId===null&&o.modelId!==null&&o.modelId!==void 0&&(s.modelId=o.modelId),s.temperature===null&&o.temperature!==null&&o.temperature!==void 0&&(s.temperature=o.temperature),s.maxTokens===null&&o.maxTokens!==null&&o.maxTokens!==void 0&&(s.maxTokens=o.maxTokens),s.topP===null&&o.topP!==null&&o.topP!==void 0&&(s.topP=o.topP),s.topK===null&&o.topK!==null&&o.topK!==void 0&&(s.topK=o.topK),s.presencePenalty===null&&o.presencePenalty!==null&&o.presencePenalty!==void 0&&(s.presencePenalty=o.presencePenalty),s.frequencyPenalty===null&&o.frequencyPenalty!==null&&o.frequencyPenalty!==void 0&&(s.frequencyPenalty=o.frequencyPenalty),i=o.parentId;else break}return s.systemPrompt===null&&(s.systemPrompt=r.globalSystemPrompt),s.modelId===null&&(s.modelId=a),s.temperature===null&&(s.temperature=r.temperature),s.maxTokens===null&&(s.maxTokens=r.maxTokens),s.topP===null&&(s.topP=r.topP),s.topK===null&&(s.topK=r.topK),s.presencePenalty===null&&(s.presencePenalty=r.presencePenalty),s.frequencyPenalty===null&&(s.frequencyPenalty=r.frequencyPenalty),s}}))),fv=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Jde=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${LC(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${LC(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,s,o,l,u,d,h;((a=r.prompt)!=null&&a.content||(o=(s=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${Pg(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(u=r.metadata)!=null&&u.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class vh{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const s=i.conversation,o=i.interactions;if(!s.id||!s.title||!s.createdAt||!s.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:s.title||"Imported Chat",metadata:s.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(d=>xt.saveInteraction({...d,conversationId:l,id:_i()}));await Promise.all(u),await r(l,"conversation"),Ye.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),Ye.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=mn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await xt.loadInteractionsForConversation(t);let i,s;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const u=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([u],{type:"application/json"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=Jde(r,a);i=new Blob([l],{type:"text/markdown"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");fv(i,s),Ye.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),Ye.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=ai.getState(),{conversations:a}=mn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const s=async m=>{const y=n.find(w=>w.id===m);if(!y)throw new Error(`Project ${m} not found in state.`);const v=n.filter(w=>w.parentId===m),b=a.filter(w=>w.projectId===m),x=[];for(const w of v)x.push(await s(w.id));for(const w of b){const S=await xt.loadInteractionsForConversation(w.id);x.push({conversation:w,interactions:S})}return{project:y,children:x}},o=await s(t),l=JSON.stringify(o,null,2),u=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;fv(u,h),Ye.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),Ye.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=mn.getState().conversations,n=[];for(const s of t){const o=await xt.loadInteractionsForConversation(s.id);n.push({conversation:s,interactions:o})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;fv(a,i),Ye.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),Ye.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await xt.getAllDataForExport(t),r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;fv(a,i),Ye.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),Ye.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.version)throw new Error("Invalid import file format. Missing version or basic structure.");await xt.importAllData(a,n),Ye.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),Ye.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const IO="sync_repos",Qde="/synced_repos",mn=Ds(Ms((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await lo.getState().initializeVFS(IO,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${IO}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),Ye.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await ai.getState().loadProjects();const[n,r]=await Promise.all([xt.loadConversations(),xt.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const s=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,o=i.updatedAt instanceof Date?i.updatedAt.getTime():null;s?o&&o>s?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=_i(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(s=>{s.conversations.some(o=>o.id===i.id)||(s.conversations.unshift(i),s.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const s=t().getConversationById(r);if(s)await xt.saveConversation(s),kt.emit(Et.CONVERSATION_ADDED,{conversation:s});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(s){throw console.error("ConversationStore: Error adding conversation",s),e(o=>({error:"Failed to save new conversation",conversations:o.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([l])=>l!==r))})),s}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=s.conversations[o].metadata??{},u=r.metadata??{},d={...l,...u};Object.assign(s.conversations[o],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),m=s.conversations[o].lastSyncedAt instanceof Date?s.conversations[o].lastSyncedAt.getTime():null,y=s.conversations[o].updatedAt.getTime();"syncRepoId"in r?s.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&s.conversations[o].syncRepoId&&s.conversationSyncStatus[n]==="idle"&&(!m||y>m)&&(s.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const s=JSON.parse(JSON.stringify(i));await xt.saveConversation(s),kt.emit(Et.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(s){throw console.error("ConversationStore: Error updating conversation",s),e(o=>{const l=o.conversations.findIndex(u=>u.id===n);if(l!==-1){o.conversations[l]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&d<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),s}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){s.conversations[o]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,u=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&l&&u<=l?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(s=>s.id===n);if(i){e(s=>({conversations:s.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([o])=>o!==n))}));try{await xt.deleteConversation(n),await xt.deleteInteractionsForConversation(n),kt.emit(Et.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await qn.getState().setCurrentConversationId(null),kt.emit(Et.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(s){throw console.error("ConversationStore: Error deleting conversation",s),e(o=>{if(i){o.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&l&&u<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),s}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await qn.getState().setCurrentConversationId(r==="conversation"?n:null),kt.emit(Et.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?kt.emit(Et.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?kt.emit(Et.PROJECT_SELECTED,{projectId:n}):(kt.emit(Et.CONVERSATION_SELECTED,{conversationId:null}),kt.emit(Et.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await vh.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await vh.exportConversation(n,r)},exportProject:async n=>{await vh.exportProject(n)},exportAllConversations:async()=>{await vh.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await xt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=_i(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(s=>{s.syncRepos.push(i)});try{const s=t().syncRepos.find(o=>o.id===r);if(s){const o=JSON.parse(JSON.stringify(s));await xt.saveSyncRepo(o),kt.emit(Et.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return Ye.success(`Sync repository "${i.name}" added.`),r}catch(s){throw console.error("ConversationStore: Error adding sync repo",s),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),s}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(s=>s.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(s.syncRepos[o],{...r,branch:r.branch||s.syncRepos[o].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(s=>s.id===n);if(i)try{const s=JSON.parse(JSON.stringify(i));await xt.saveSyncRepo(s),kt.emit(Et.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),Ye.success(`Sync repository "${i.name}" updated.`)}catch(s){throw console.error("ConversationStore: Error updating sync repo",s),e(o=>{const l=o.syncRepos.findIndex(u=>u.id===n);l!==-1&&(o.syncRepos[l]=a),o.error="Failed to save sync repository update"}),s}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&(s.syncRepos[o]=a),s.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(s=>s.id===n);if(!r)return;const a=rr(`${Qde}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(s=>({syncRepos:s.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(s.repoInitializationStatus).filter(([o])=>o!==n))}));try{await xt.deleteSyncRepo(n),kt.emit(Et.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),Ye.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await HT(a,!0,{fsInstance:i}),Ye.info(`Removed local sync folder for "${r.name}".`)}catch(s){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,s),s.code!=="ENOENT"&&Ye.warning(`Failed to remove local sync folder: ${s.message}`)}}catch(s){throw console.error("ConversationStore: Error deleting sync repo",s),e(o=>{r&&o.syncRepos.push(r),o.error="Failed to delete sync repository"}),s}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),Ye.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),kt.emit(Et.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),kt.emit(Et.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){Ye.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await Yde(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){Ye.error("Conversation not found for syncing.");return}if(!r.syncRepoId){Ye.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(o=>o.id===r.syncRepoId);if(!a){Ye.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await Xde(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const s=t().getConversationById(n);s&&e(o=>{const l=o.conversations.findIndex(u=>u.id===n);l!==-1&&(o.conversations[l]=s)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const s=t().getConversationById(r);if(!s){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=s.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!s.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}})));function Rn({className:e,type:t,...n}){return p.jsx("input",{type:t,"data-slot":"input",className:_t("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function Jx(e){const t=e+"CollectionProvider",[n,r]=di(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:x,children:w}=b,S=gt.useRef(null),E=gt.useRef(new Map).current;return p.jsx(a,{scope:x,itemMap:E,collectionRef:S,children:w})};s.displayName=t;const o=e+"CollectionSlot",l=lu(o),u=gt.forwardRef((b,x)=>{const{scope:w,children:S}=b,E=i(o,w),C=Cn(x,E.collectionRef);return p.jsx(l,{ref:C,children:S})});u.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=lu(d),y=gt.forwardRef((b,x)=>{const{scope:w,children:S,...E}=b,C=gt.useRef(null),k=Cn(x,C),I=i(d,w);return gt.useEffect(()=>(I.itemMap.set(C,{ref:C,...E}),()=>void I.itemMap.delete(C))),p.jsx(m,{[h]:"",ref:k,children:S})});y.displayName=d;function v(b){const x=i(e+"CollectionConsumer",b);return gt.useCallback(()=>{const S=x.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((I,R)=>E.indexOf(I.ref.current)-E.indexOf(R.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:s,Slot:u,ItemSlot:y},v,r]}var h2=0;function Qx(){T.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??jO()),document.body.insertAdjacentElement("beforeend",e[1]??jO()),h2++,()=>{h2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),h2--}},[])}function jO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var p2="focusScope.autoFocusOnMount",m2="focusScope.autoFocusOnUnmount",OO={bubbles:!1,cancelable:!0},efe="FocusScope",ey=T.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,l]=T.useState(null),u=La(a),d=La(i),h=T.useRef(null),m=Cn(t,b=>l(b)),y=T.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;T.useEffect(()=>{if(r){let b=function(E){if(y.paused||!o)return;const C=E.target;o.contains(C)?h.current=C:Jc(h.current,{select:!0})},x=function(E){if(y.paused||!o)return;const C=E.relatedTarget;C!==null&&(o.contains(C)||Jc(h.current,{select:!0}))},w=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&Jc(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",x);const S=new MutationObserver(w);return o&&S.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",x),S.disconnect()}}},[r,o,y.paused]),T.useEffect(()=>{if(o){MO.add(y);const b=document.activeElement;if(!o.contains(b)){const w=new CustomEvent(p2,OO);o.addEventListener(p2,u),o.dispatchEvent(w),w.defaultPrevented||(tfe(sfe(CL(o)),{select:!0}),document.activeElement===b&&Jc(o))}return()=>{o.removeEventListener(p2,u),setTimeout(()=>{const w=new CustomEvent(m2,OO);o.addEventListener(m2,d),o.dispatchEvent(w),w.defaultPrevented||Jc(b??document.body,{select:!0}),o.removeEventListener(m2,d),MO.remove(y)},0)}}},[o,u,d,y]);const v=T.useCallback(b=>{if(!n&&!r||y.paused)return;const x=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,w=document.activeElement;if(x&&w){const S=b.currentTarget,[E,C]=nfe(S);E&&C?!b.shiftKey&&w===C?(b.preventDefault(),n&&Jc(E,{select:!0})):b.shiftKey&&w===E&&(b.preventDefault(),n&&Jc(C,{select:!0})):w===S&&b.preventDefault()}},[n,r,y.paused]);return p.jsx(rn.div,{tabIndex:-1,...s,ref:m,onKeyDown:v})});ey.displayName=efe;function tfe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Jc(r,{select:t}),document.activeElement!==n)return}function nfe(e){const t=CL(e),n=DO(t,e),r=DO(t.reverse(),e);return[n,r]}function CL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function DO(e,t){for(const n of e)if(!rfe(n,{upTo:t}))return n}function rfe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function afe(e){return e instanceof HTMLInputElement&&"select"in e}function Jc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&afe(e)&&t&&e.select()}}var MO=ife();function ife(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=PO(e,t),e.unshift(t)},remove(t){var n;e=PO(e,t),(n=e[0])==null||n.resume()}}}function PO(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function sfe(e){return e.filter(t=>t.tagName!=="A")}function e1(e){const t=T.useRef({value:e,previous:e});return T.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var ofe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},lh=new WeakMap,hv=new WeakMap,pv={},g2=0,kL=function(e){return e&&(e.host||kL(e.parentNode))},lfe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=kL(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},cfe=function(e,t,n,r){var a=lfe(t,Array.isArray(e)?e:[e]);pv[n]||(pv[n]=new WeakMap);var i=pv[n],s=[],o=new Set,l=new Set(a),u=function(h){!h||o.has(h)||(o.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(o.has(m))d(m);else try{var y=m.getAttribute(r),v=y!==null&&y!=="false",b=(lh.get(m)||0)+1,x=(i.get(m)||0)+1;lh.set(m,b),i.set(m,x),s.push(m),b===1&&v&&hv.set(m,!0),x===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",m,w)}})};return d(t),o.clear(),g2++,function(){s.forEach(function(h){var m=lh.get(h)-1,y=i.get(h)-1;lh.set(h,m),i.set(h,y),m||(hv.has(h)||h.removeAttribute(r),hv.delete(h)),y||h.removeAttribute(n)}),g2--,g2||(lh=new WeakMap,lh=new WeakMap,hv=new WeakMap,pv={})}},t1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=ofe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),cfe(r,a,n,"aria-hidden")):function(){return null}},Uo=function(){return Uo=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Uo.apply(this,arguments)};function TL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function ufe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Rv="right-scroll-bar-position",Iv="width-before-scroll-bar",dfe="with-scroll-bars-hidden",ffe="--removed-body-scroll-bar-size";function y2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function hfe(e,t){var n=T.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var pfe=typeof window<"u"?T.useLayoutEffect:T.useEffect,FO=new WeakMap;function mfe(e,t){var n=hfe(null,function(r){return e.forEach(function(a){return y2(a,r)})});return pfe(function(){var r=FO.get(n);if(r){var a=new Set(r),i=new Set(e),s=n.current;a.forEach(function(o){i.has(o)||y2(o,null)}),i.forEach(function(o){a.has(o)||y2(o,s)})}FO.set(n,e)},[e]),n}function gfe(e){return e}function yfe(e,t){t===void 0&&(t=gfe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(i),s=n}var l=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return a}function bfe(e){e===void 0&&(e={});var t=yfe(null);return t.options=Uo({async:!0,ssr:!1},e),t}var AL=function(e){var t=e.sideCar,n=TL(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return T.createElement(r,Uo({},n))};AL.isSideCarExport=!0;function vfe(e,t){return e.useMedium(t),AL}var NL=bfe(),b2=function(){},n1=T.forwardRef(function(e,t){var n=T.useRef(null),r=T.useState({onScrollCapture:b2,onWheelCapture:b2,onTouchMoveCapture:b2}),a=r[0],i=r[1],s=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,y=e.noIsolation,v=e.inert,b=e.allowPinchZoom,x=e.as,w=x===void 0?"div":x,S=e.gapMode,E=TL(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,k=mfe([n,t]),I=Uo(Uo({},E),a);return T.createElement(T.Fragment,null,d&&T.createElement(C,{sideCar:NL,removeScrollBar:u,shards:h,noIsolation:y,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),s?T.cloneElement(T.Children.only(o),Uo(Uo({},I),{ref:k})):T.createElement(w,Uo({},I,{className:l,ref:k}),o))});n1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};n1.classNames={fullWidth:Iv,zeroRight:Rv};var wfe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xfe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=wfe();return t&&e.setAttribute("nonce",t),e}function _fe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Sfe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Efe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=xfe())&&(_fe(t,n),Sfe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Cfe=function(){var e=Efe();return function(t,n){T.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},RL=function(){var e=Cfe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},kfe={left:0,top:0,right:0,gap:0},v2=function(e){return parseInt(e||"",10)||0},Tfe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[v2(n),v2(r),v2(a)]},Afe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kfe;var t=Tfe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Nfe=RL(),Th="data-scroll-locked",Rfe=function(e,t,n,r){var a=e.left,i=e.top,s=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(dfe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(Th,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Rv,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Iv,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Rv," .").concat(Rv,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Iv," .").concat(Iv,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Th,`] {
    `).concat(ffe,": ").concat(o,`px;
  }
`)},LO=function(){var e=parseInt(document.body.getAttribute(Th)||"0",10);return isFinite(e)?e:0},Ife=function(){T.useEffect(function(){return document.body.setAttribute(Th,(LO()+1).toString()),function(){var e=LO()-1;e<=0?document.body.removeAttribute(Th):document.body.setAttribute(Th,e.toString())}},[])},jfe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Ife();var i=T.useMemo(function(){return Afe(a)},[a]);return T.createElement(Nfe,{styles:Rfe(i,!t,a,n?"":"!important")})},HC=!1;if(typeof window<"u")try{var mv=Object.defineProperty({},"passive",{get:function(){return HC=!0,!0}});window.addEventListener("test",mv,mv),window.removeEventListener("test",mv,mv)}catch{HC=!1}var ch=HC?{passive:!1}:!1,Ofe=function(e){return e.tagName==="TEXTAREA"},IL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Ofe(e)&&n[t]==="visible")},Dfe=function(e){return IL(e,"overflowY")},Mfe=function(e){return IL(e,"overflowX")},$O=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=jL(e,r);if(a){var i=OL(e,r),s=i[1],o=i[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Pfe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Ffe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},jL=function(e,t){return e==="v"?Dfe(t):Mfe(t)},OL=function(e,t){return e==="v"?Pfe(t):Ffe(t)},Lfe=function(e,t){return e==="h"&&t==="rtl"?-1:1},$fe=function(e,t,n,r,a){var i=Lfe(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,l=t.contains(o),u=!1,d=s>0,h=0,m=0;do{var y=OL(e,o),v=y[0],b=y[1],x=y[2],w=b-x-i*v;(v||w)&&jL(e,o)&&(h+=w,m+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(u=!0),u},gv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},BO=function(e){return[e.deltaX,e.deltaY]},zO=function(e){return e&&"current"in e?e.current:e},Bfe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zfe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Ufe=0,uh=[];function Hfe(e){var t=T.useRef([]),n=T.useRef([0,0]),r=T.useRef(),a=T.useState(Ufe++)[0],i=T.useState(RL)[0],s=T.useRef(e);T.useEffect(function(){s.current=e},[e]),T.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=ufe([e.lockRef.current],(e.shards||[]).map(zO),!0).filter(Boolean);return b.forEach(function(x){return x.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=T.useCallback(function(b,x){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var w=gv(b),S=n.current,E="deltaX"in b?b.deltaX:S[0]-w[0],C="deltaY"in b?b.deltaY:S[1]-w[1],k,I=b.target,R=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&R==="h"&&I.type==="range")return!1;var j=$O(R,I);if(!j)return!0;if(j?k=R:(k=R==="v"?"h":"v",j=$O(R,I)),!j)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=k),!k)return!0;var F=r.current||k;return $fe(F,x,b,F==="h"?E:C)},[]),l=T.useCallback(function(b){var x=b;if(!(!uh.length||uh[uh.length-1]!==i)){var w="deltaY"in x?BO(x):gv(x),S=t.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&Bfe(k.delta,w)})[0];if(S&&S.should){x.cancelable&&x.preventDefault();return}if(!S){var E=(s.current.shards||[]).map(zO).filter(Boolean).filter(function(k){return k.contains(x.target)}),C=E.length>0?o(x,E[0]):!s.current.noIsolation;C&&x.cancelable&&x.preventDefault()}}},[]),u=T.useCallback(function(b,x,w,S){var E={name:b,delta:x,target:w,should:S,shadowParent:qfe(w)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),d=T.useCallback(function(b){n.current=gv(b),r.current=void 0},[]),h=T.useCallback(function(b){u(b.type,BO(b),b.target,o(b,e.lockRef.current))},[]),m=T.useCallback(function(b){u(b.type,gv(b),b.target,o(b,e.lockRef.current))},[]);T.useEffect(function(){return uh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,ch),document.addEventListener("touchmove",l,ch),document.addEventListener("touchstart",d,ch),function(){uh=uh.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,ch),document.removeEventListener("touchmove",l,ch),document.removeEventListener("touchstart",d,ch)}},[]);var y=e.removeScrollBar,v=e.inert;return T.createElement(T.Fragment,null,v?T.createElement(i,{styles:zfe(a)}):null,y?T.createElement(jfe,{gapMode:e.gapMode}):null)}function qfe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Vfe=vfe(NL,Hfe);var ty=T.forwardRef(function(e,t){return T.createElement(n1,Uo({},e,{ref:t,sideCar:Vfe}))});ty.classNames=n1.classNames;var Gfe=[" ","Enter","ArrowUp","ArrowDown"],Kfe=[" ","Enter"],Ud="Select",[r1,a1,Wfe]=Jx(Ud),[Ep,GSe]=di(Ud,[Wfe,Au]),i1=Au(),[Zfe,Fu]=Ep(Ud),[Yfe,Xfe]=Ep(Ud),DL=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:m,required:y,form:v}=e,b=i1(t),[x,w]=T.useState(null),[S,E]=T.useState(null),[C,k]=T.useState(!1),I=Sp(u),[R,j]=js({prop:r,defaultProp:a??!1,onChange:i,caller:Ud}),[F,$]=js({prop:s,defaultProp:o,onChange:l,caller:Ud}),G=T.useRef(null),D=x?v||!!x.closest("form"):!0,[Z,q]=T.useState(new Set),ue=Array.from(Z).map(ie=>ie.props.value).join(";");return p.jsx(mx,{...b,children:p.jsxs(Zfe,{required:y,scope:t,trigger:x,onTriggerChange:w,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:Ea(),value:F,onValueChange:$,open:R,onOpenChange:j,dir:I,triggerPointerDownPosRef:G,disabled:m,children:[p.jsx(r1.Provider,{scope:t,children:p.jsx(Yfe,{scope:e.__scopeSelect,onNativeOptionAdd:T.useCallback(ie=>{q(ne=>new Set(ne).add(ie))},[]),onNativeOptionRemove:T.useCallback(ie=>{q(ne=>{const X=new Set(ne);return X.delete(ie),X})},[]),children:n})}),D?p.jsxs(n$,{"aria-hidden":!0,required:y,tabIndex:-1,name:d,autoComplete:h,value:F,onChange:ie=>$(ie.target.value),disabled:m,form:v,children:[F===void 0?p.jsx("option",{value:""}):null,Array.from(Z)]},ue):null]})})};DL.displayName=Ud;var ML="SelectTrigger",PL=T.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=i1(n),s=Fu(ML,n),o=s.disabled||r,l=Cn(t,s.onTriggerChange),u=a1(n),d=T.useRef("touch"),[h,m,y]=a$(b=>{const x=u().filter(E=>!E.disabled),w=x.find(E=>E.value===s.value),S=i$(x,b,w);S!==void 0&&s.onValueChange(S.value)}),v=b=>{o||(s.onOpenChange(!0),y()),b&&(s.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return p.jsx(w0,{asChild:!0,...i,children:p.jsx(rn.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":r$(s.value)?"":void 0,...a,ref:l,onClick:qt(a.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:qt(a.onPointerDown,b=>{d.current=b.pointerType;const x=b.target;x.hasPointerCapture(b.pointerId)&&x.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:qt(a.onKeyDown,b=>{const x=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(x&&b.key===" ")&&Gfe.includes(b.key)&&(v(),b.preventDefault())})})})});PL.displayName=ML;var FL="SelectValue",LL=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...o}=e,l=Fu(FL,n),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=Cn(t,l.onValueNodeChange);return Ua(()=>{u(d)},[u,d]),p.jsx(rn.span,{...o,ref:h,style:{pointerEvents:"none"},children:r$(l.value)?p.jsx(p.Fragment,{children:s}):i})});LL.displayName=FL;var Jfe="SelectIcon",$L=T.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return p.jsx(rn.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});$L.displayName=Jfe;var Qfe="SelectPortal",BL=e=>p.jsx(lp,{asChild:!0,...e});BL.displayName=Qfe;var Hd="SelectContent",zL=T.forwardRef((e,t)=>{const n=Fu(Hd,e.__scopeSelect),[r,a]=T.useState();if(Ua(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ho.createPortal(p.jsx(UL,{scope:e.__scopeSelect,children:p.jsx(r1.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),i):null}return p.jsx(HL,{...e,ref:t})});zL.displayName=Hd;var Ws=10,[UL,Lu]=Ep(Hd),ehe="SelectContentImpl",the=lu("SelectContent.RemoveScroll"),HL=T.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:y,sticky:v,hideWhenDetached:b,avoidCollisions:x,...w}=e,S=Fu(Hd,n),[E,C]=T.useState(null),[k,I]=T.useState(null),R=Cn(t,Ae=>C(Ae)),[j,F]=T.useState(null),[$,G]=T.useState(null),D=a1(n),[Z,q]=T.useState(!1),ue=T.useRef(!1);T.useEffect(()=>{if(E)return t1(E)},[E]),Qx();const ie=T.useCallback(Ae=>{const[Ne,...Ce]=D().map(Le=>Le.ref.current),[Pe]=Ce.slice(-1),Qe=document.activeElement;for(const Le of Ae)if(Le===Qe||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Ne&&k&&(k.scrollTop=0),Le===Pe&&k&&(k.scrollTop=k.scrollHeight),Le==null||Le.focus(),document.activeElement!==Qe))return},[D,k]),ne=T.useCallback(()=>ie([j,E]),[ie,j,E]);T.useEffect(()=>{Z&&ne()},[Z,ne]);const{onOpenChange:X,triggerPointerDownPosRef:ae}=S;T.useEffect(()=>{if(E){let Ae={x:0,y:0};const Ne=Pe=>{var Qe,Le;Ae={x:Math.abs(Math.round(Pe.pageX)-(((Qe=ae.current)==null?void 0:Qe.x)??0)),y:Math.abs(Math.round(Pe.pageY)-(((Le=ae.current)==null?void 0:Le.y)??0))}},Ce=Pe=>{Ae.x<=10&&Ae.y<=10?Pe.preventDefault():E.contains(Pe.target)||X(!1),document.removeEventListener("pointermove",Ne),ae.current=null};return ae.current!==null&&(document.addEventListener("pointermove",Ne),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ne),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[E,X,ae]),T.useEffect(()=>{const Ae=()=>X(!1);return window.addEventListener("blur",Ae),window.addEventListener("resize",Ae),()=>{window.removeEventListener("blur",Ae),window.removeEventListener("resize",Ae)}},[X]);const[B,J]=a$(Ae=>{const Ne=D().filter(Qe=>!Qe.disabled),Ce=Ne.find(Qe=>Qe.ref.current===document.activeElement),Pe=i$(Ne,Ae,Ce);Pe&&setTimeout(()=>Pe.ref.current.focus())}),ee=T.useCallback((Ae,Ne,Ce)=>{const Pe=!ue.current&&!Ce;(S.value!==void 0&&S.value===Ne||Pe)&&(F(Ae),Pe&&(ue.current=!0))},[S.value]),te=T.useCallback(()=>E==null?void 0:E.focus(),[E]),fe=T.useCallback((Ae,Ne,Ce)=>{const Pe=!ue.current&&!Ce;(S.value!==void 0&&S.value===Ne||Pe)&&G(Ae)},[S.value]),ve=r==="popper"?qC:qL,De=ve===qC?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:y,sticky:v,hideWhenDetached:b,avoidCollisions:x}:{};return p.jsx(UL,{scope:n,content:E,viewport:k,onViewportChange:I,itemRefCallback:ee,selectedItem:j,onItemLeave:te,itemTextRefCallback:fe,focusSelectedItem:ne,selectedItemText:$,position:r,isPositioned:Z,searchRef:B,children:p.jsx(ty,{as:the,allowPinchZoom:!0,children:p.jsx(ey,{asChild:!0,trapped:S.open,onMountAutoFocus:Ae=>{Ae.preventDefault()},onUnmountAutoFocus:qt(a,Ae=>{var Ne;(Ne=S.trigger)==null||Ne.focus({preventScroll:!0}),Ae.preventDefault()}),children:p.jsx(ip,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:Ae=>Ae.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:p.jsx(ve,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Ae=>Ae.preventDefault(),...w,...De,onPlaced:()=>q(!0),ref:R,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:qt(w.onKeyDown,Ae=>{const Ne=Ae.ctrlKey||Ae.altKey||Ae.metaKey;if(Ae.key==="Tab"&&Ae.preventDefault(),!Ne&&Ae.key.length===1&&J(Ae.key),["ArrowUp","ArrowDown","Home","End"].includes(Ae.key)){let Pe=D().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(Ae.key)&&(Pe=Pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ae.key)){const Qe=Ae.target,Le=Pe.indexOf(Qe);Pe=Pe.slice(Le+1)}setTimeout(()=>ie(Pe)),Ae.preventDefault()}})})})})})})});HL.displayName=ehe;var nhe="SelectItemAlignedPosition",qL=T.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=Fu(Hd,n),s=Lu(Hd,n),[o,l]=T.useState(null),[u,d]=T.useState(null),h=Cn(t,R=>d(R)),m=a1(n),y=T.useRef(!1),v=T.useRef(!0),{viewport:b,selectedItem:x,selectedItemText:w,focusSelectedItem:S}=s,E=T.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&b&&x&&w){const R=i.trigger.getBoundingClientRect(),j=u.getBoundingClientRect(),F=i.valueNode.getBoundingClientRect(),$=w.getBoundingClientRect();if(i.dir!=="rtl"){const Qe=$.left-j.left,Le=F.left-Qe,Ie=R.left-Le,z=R.width+Ie,Se=Math.max(z,j.width),Te=window.innerWidth-Ws,de=Xg(Le,[Ws,Math.max(Ws,Te-Se)]);o.style.minWidth=z+"px",o.style.left=de+"px"}else{const Qe=j.right-$.right,Le=window.innerWidth-F.right-Qe,Ie=window.innerWidth-R.right-Le,z=R.width+Ie,Se=Math.max(z,j.width),Te=window.innerWidth-Ws,de=Xg(Le,[Ws,Math.max(Ws,Te-Se)]);o.style.minWidth=z+"px",o.style.right=de+"px"}const G=m(),D=window.innerHeight-Ws*2,Z=b.scrollHeight,q=window.getComputedStyle(u),ue=parseInt(q.borderTopWidth,10),ie=parseInt(q.paddingTop,10),ne=parseInt(q.borderBottomWidth,10),X=parseInt(q.paddingBottom,10),ae=ue+ie+Z+X+ne,B=Math.min(x.offsetHeight*5,ae),J=window.getComputedStyle(b),ee=parseInt(J.paddingTop,10),te=parseInt(J.paddingBottom,10),fe=R.top+R.height/2-Ws,ve=D-fe,De=x.offsetHeight/2,Ae=x.offsetTop+De,Ne=ue+ie+Ae,Ce=ae-Ne;if(Ne<=fe){const Qe=G.length>0&&x===G[G.length-1].ref.current;o.style.bottom="0px";const Le=u.clientHeight-b.offsetTop-b.offsetHeight,Ie=Math.max(ve,De+(Qe?te:0)+Le+ne),z=Ne+Ie;o.style.height=z+"px"}else{const Qe=G.length>0&&x===G[0].ref.current;o.style.top="0px";const Ie=Math.max(fe,ue+b.offsetTop+(Qe?ee:0)+De)+Ce;o.style.height=Ie+"px",b.scrollTop=Ne-fe+b.offsetTop}o.style.margin=`${Ws}px 0`,o.style.minHeight=B+"px",o.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,o,u,b,x,w,i.dir,r]);Ua(()=>E(),[E]);const[C,k]=T.useState();Ua(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const I=T.useCallback(R=>{R&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return p.jsx(ahe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:y,onScrollButtonChange:I,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:p.jsx(rn.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});qL.displayName=nhe;var rhe="SelectPopperPosition",qC=T.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ws,...i}=e,s=i1(n);return p.jsx(gx,{...s,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qC.displayName=rhe;var[ahe,rA]=Ep(Hd,{}),VC="SelectViewport",VL=T.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Lu(VC,n),s=rA(VC,n),o=Cn(t,i.onViewportChange),l=T.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(r1.Slot,{scope:n,children:p.jsx(rn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:qt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=s;if(m!=null&&m.current&&h){const y=Math.abs(l.current-d.scrollTop);if(y>0){const v=window.innerHeight-Ws*2,b=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),w=Math.max(b,x);if(w<v){const S=w+y,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});VL.displayName=VC;var GL="SelectGroup",[ihe,she]=Ep(GL),ohe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ea();return p.jsx(ihe,{scope:n,id:a,children:p.jsx(rn.div,{role:"group","aria-labelledby":a,...r,ref:t})})});ohe.displayName=GL;var KL="SelectLabel",lhe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=she(KL,n);return p.jsx(rn.div,{id:a.id,...r,ref:t})});lhe.displayName=KL;var Pw="SelectItem",[che,WL]=Ep(Pw),ZL=T.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,o=Fu(Pw,n),l=Lu(Pw,n),u=o.value===r,[d,h]=T.useState(i??""),[m,y]=T.useState(!1),v=Cn(t,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,a)}),b=Ea(),x=T.useRef("touch"),w=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(che,{scope:n,value:r,disabled:a,textId:b,isSelected:u,onItemTextChange:T.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:p.jsx(r1.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:p.jsx(rn.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:v,onFocus:qt(s.onFocus,()=>y(!0)),onBlur:qt(s.onBlur,()=>y(!1)),onClick:qt(s.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:qt(s.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:qt(s.onPointerDown,S=>{x.current=S.pointerType}),onPointerMove:qt(s.onPointerMove,S=>{var E;x.current=S.pointerType,a?(E=l.onItemLeave)==null||E.call(l):x.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qt(s.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:qt(s.onKeyDown,S=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(Kfe.includes(S.key)&&w(),S.key===" "&&S.preventDefault())})})})})});ZL.displayName=Pw;var Xm="SelectItemText",YL=T.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=Fu(Xm,n),o=Lu(Xm,n),l=WL(Xm,n),u=Xfe(Xm,n),[d,h]=T.useState(null),m=Cn(t,w=>h(w),l.onItemTextChange,w=>{var S;return(S=o.itemTextRefCallback)==null?void 0:S.call(o,w,l.value,l.disabled)}),y=d==null?void 0:d.textContent,v=T.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:b,onNativeOptionRemove:x}=u;return Ua(()=>(b(v),()=>x(v)),[b,x,v]),p.jsxs(p.Fragment,{children:[p.jsx(rn.span,{id:l.textId,...i,ref:m}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?Ho.createPortal(i.children,s.valueNode):null]})});YL.displayName=Xm;var XL="SelectItemIndicator",JL=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return WL(XL,n).isSelected?p.jsx(rn.span,{"aria-hidden":!0,...r,ref:t}):null});JL.displayName=XL;var GC="SelectScrollUpButton",QL=T.forwardRef((e,t)=>{const n=Lu(GC,e.__scopeSelect),r=rA(GC,e.__scopeSelect),[a,i]=T.useState(!1),s=Cn(t,r.onScrollButtonChange);return Ua(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(t$,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});QL.displayName=GC;var KC="SelectScrollDownButton",e$=T.forwardRef((e,t)=>{const n=Lu(KC,e.__scopeSelect),r=rA(KC,e.__scopeSelect),[a,i]=T.useState(!1),s=Cn(t,r.onScrollButtonChange);return Ua(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(t$,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});e$.displayName=KC;var t$=T.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Lu("SelectScrollButton",n),s=T.useRef(null),o=a1(n),l=T.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return T.useEffect(()=>()=>l(),[l]),Ua(()=>{var d;const u=o().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),p.jsx(rn.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:qt(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:qt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:qt(a.onPointerLeave,()=>{l()})})}),uhe="SelectSeparator",dhe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(rn.div,{"aria-hidden":!0,...r,ref:t})});dhe.displayName=uhe;var WC="SelectArrow",fhe=T.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=i1(n),i=Fu(WC,n),s=Lu(WC,n);return i.open&&s.position==="popper"?p.jsx(yx,{...a,...r,ref:t}):null});fhe.displayName=WC;var hhe="SelectBubbleInput",n$=T.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=T.useRef(null),i=Cn(r,a),s=e1(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(rn.select,{...n,style:{...fP,...n.style},ref:i,defaultValue:t})});n$.displayName=hhe;function r$(e){return e===""||e===void 0}function a$(e){const t=La(e),n=T.useRef(""),r=T.useRef(0),a=T.useCallback(s=>{const o=n.current+s;t(o),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),i=T.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return T.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function i$(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=phe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function phe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var mhe=DL,ghe=PL,yhe=LL,bhe=$L,vhe=BL,whe=zL,xhe=VL,_he=ZL,She=YL,Ehe=JL,Che=QL,khe=e$;function el({...e}){return p.jsx(mhe,{"data-slot":"select",...e})}function tl({...e}){return p.jsx(yhe,{"data-slot":"select-value",...e})}function nl({className:e,size:t="default",children:n,...r}){return p.jsxs(ghe,{"data-slot":"select-trigger","data-size":t,className:_t("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,p.jsx(bhe,{asChild:!0,children:p.jsx(il,{className:"size-4 opacity-50"})})]})}function rl({className:e,children:t,position:n="popper",...r}){return p.jsx(vhe,{children:p.jsxs(whe,{"data-slot":"select-content",className:_t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(The,{}),p.jsx(xhe,{className:_t("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),p.jsx(Ahe,{})]})})}function Gr({className:e,children:t,...n}){return p.jsxs(_he,{"data-slot":"select-item",className:_t("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[p.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(Ehe,{children:p.jsx(ls,{className:"size-4"})})}),p.jsx(She,{children:t})]})}function The({className:e,...t}){return p.jsx(Che,{"data-slot":"select-scroll-up-button",className:_t("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Gd,{className:"size-4"})})}function Ahe({className:e,...t}){return p.jsx(khe,{"data-slot":"select-scroll-down-button",className:_t("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(il,{className:"size-4"})})}var Nhe="Label",s$=T.forwardRef((e,t)=>p.jsx(rn.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));s$.displayName=Nhe;var Rhe=s$;function Kt({className:e,...t}){return p.jsx(Rhe,{"data-slot":"label",className:_t("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const o$=({initialProviderType:e=null,initialName:t="",initialValue:n="",onSave:r,onCancel:a,isSaving:i,className:s})=>{const[o,l]=T.useState(t),[u,d]=T.useState(n),[h,m]=T.useState(e),y=T.useRef(null);T.useEffect(()=>{l(t),d(n),m(e)},[t,n,e]);const v=T.useCallback(x=>{var C,k;const w=x;m(w);const S=(C=jd.find(I=>I.value===w))==null?void 0:C.label,E=(k=jd.find(I=>I.value===h))==null?void 0:k.label;S&&(!o.trim()||o===`${E}`)&&l(`${S}`),requestAnimationFrame(()=>{var I;(I=y.current)==null||I.focus()})},[o,h]),b=T.useCallback(async()=>{if(!o.trim()||!u.trim()||!h){Ye.error("Key Name, Provider Type, and API Key Value are required.");return}await r(o.trim(),h,u.trim())},[o,u,h,r]);return p.jsxs("div",{className:_t("space-y-4",s),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"api-key-provider",children:"Provider Type"}),p.jsxs(el,{value:h??"",onValueChange:v,disabled:i,children:[p.jsx(nl,{id:"api-key-provider",children:p.jsx(tl,{placeholder:"Select Provider Type"})}),p.jsx(rl,{children:jd.map(x=>p.jsx(Gr,{value:x.value,children:x.label},x.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"api-key-name",children:"Key Name"}),p.jsx(Rn,{id:"api-key-name",value:o,onChange:x=>l(x.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:i})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"api-key-value",children:"API Key Value"}),p.jsx(Rn,{ref:y,id:"api-key-value",type:"password",value:u,onChange:x=>d(x.target.value),placeholder:"Enter your API key",required:!0,disabled:i,autoComplete:"new-password"})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(jt,{variant:"ghost",size:"sm",onClick:a,disabled:i,type:"button",children:[p.jsx(xi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(jt,{variant:"secondary",size:"sm",onClick:b,disabled:i||!o.trim()||!u.trim()||!h,type:"button",children:[i&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",i?"Saving...":"Save API Key"]})]})]})};var s1="Switch",[Ihe,KSe]=di(s1),[jhe,Ohe]=Ihe(s1),l$=T.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,y]=T.useState(null),v=Cn(t,E=>y(E)),b=T.useRef(!1),x=m?d||!!m.closest("form"):!0,[w,S]=js({prop:a,defaultProp:i??!1,onChange:u,caller:s1});return p.jsxs(jhe,{scope:n,checked:w,disabled:o,children:[p.jsx(rn.button,{type:"button",role:"switch","aria-checked":w,"aria-required":s,"data-state":f$(w),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onClick:qt(e.onClick,E=>{S(C=>!C),x&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),x&&p.jsx(d$,{control:m,bubbles:!b.current,name:r,value:l,checked:w,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});l$.displayName=s1;var c$="SwitchThumb",u$=T.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Ohe(c$,n);return p.jsx(rn.span,{"data-state":f$(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});u$.displayName=c$;var Dhe="SwitchBubbleInput",d$=T.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const s=T.useRef(null),o=Cn(s,i),l=e1(n),u=px(t);return T.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,y=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&y){const v=new Event("click",{bubbles:r});y.call(d,n),d.dispatchEvent(v)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});d$.displayName=Dhe;function f$(e){return e?"checked":"unchecked"}var Mhe=l$,Phe=u$;function Fi({className:e,...t}){return p.jsx(Mhe,{"data-slot":"switch",className:_t("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(Phe,{"data-slot":"switch-thumb",className:_t("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const h$=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var u;const s=d=>{r(d==="none"?null:d)},o=(u=a.find(d=>d.id===n))==null?void 0:u.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return p.jsxs(el,{value:n??"none",onValueChange:s,disabled:i||a.length===0,children:[p.jsx(nl,{className:_t("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:p.jsx(tl,{asChild:!0,children:p.jsxs("div",{className:"flex items-center overflow-hidden",children:[p.jsx(G2,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),p.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&p.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?p.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),p.jsxs(rl,{className:"bg-popover border-border text-popover-foreground",children:[p.jsx(Gr,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>p.jsx(Gr,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},p$=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:a="",initialApiKeyId:i=null})=>{var x;const[s,o]=T.useState(!1),[l,u]=T.useState({name:a,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,enabledModels:null,autoFetchModels:!1,fetchedModels:null,modelsLastFetchedAt:null});T.useEffect(()=>{u(w=>({...w,name:a||w.name||"",type:r||w.type||null,apiKeyId:i||w.apiKeyId||null,autoFetchModels:r?gh(r):w.autoFetchModels}))},[a,r,i]);const d=T.useCallback((w,S)=>{u(E=>{var I,R;const C={...E,[w]:S},k=E.name||"";if(w==="type"){const j=S,F=(I=jd.find(G=>G.value===E.type))==null?void 0:I.label;C.apiKeyId=null,C.baseURL=null,C.autoFetchModels=j?gh(j):!1,C.enabledModels=null;const $=(R=jd.find(G=>G.value===j))==null?void 0:R.label;if($&&(!k.trim()||k===F)&&(C.name=$),j&&lw(j)){const G=(e||[]).filter(D=>D.providerId===j);G.length>0&&(C.apiKeyId=G[0].id)}}return(w==="isEnabled"||w==="autoFetchModels")&&(C[w]=!!S),C})},[e]),h=T.useCallback(async()=>{var w,S;if(!((w=l.name)!=null&&w.trim())||!l.type){Ye.error("Provider Name and Type are required.");return}o(!0);try{const E=l.type,C=l.autoFetchModels??gh(E),k={name:l.name.trim(),type:E,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((S=l.baseURL)==null?void 0:S.trim())||null,enabledModels:null,autoFetchModels:C,fetchedModels:null,modelsLastFetchedAt:null};await t(k),n()}catch(E){console.error("Failed to add provider (from form component):",E)}finally{o(!1)}},[l,t,n]),m=lw(l.type??null),y=Fk(l.type??null),v=gh(l.type??null),b=(e||[]).filter(w=>!l.type||w.providerId===l.type);return p.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"new-provider-type",children:"Provider Type"}),p.jsxs(el,{value:l.type??"",onValueChange:w=>d("type",w),disabled:s,children:[p.jsx(nl,{id:"new-provider-type",children:p.jsx(tl,{placeholder:"Select Type"})}),p.jsx(rl,{children:jd.map(w=>p.jsx(Gr,{value:w.value,children:w.label},w.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"new-provider-name",children:"Provider Name"}),p.jsx(Rn,{id:"new-provider-name",value:l.name||"",onChange:w=>d("name",w.target.value),placeholder:"e.g., My Ollama",disabled:s,"aria-label":"Provider Name"})]}),m&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Kt,{children:"API Key"}),p.jsx(h$,{label:"API Key",selectedKeyId:l.apiKeyId??null,onKeySelected:w=>d("apiKeyId",w),apiKeys:b,disabled:s||!l.type})]}),y&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Kt,{htmlFor:"new-provider-baseurl",children:"Base URL"}),p.jsx(Rn,{id:"new-provider-baseurl",value:l.baseURL||"",onChange:w=>d("baseURL",w.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:s,"aria-label":"Base URL"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Fi,{id:"new-enabled",checked:l.isEnabled??!0,onCheckedChange:w=>d("isEnabled",w),disabled:s,"aria-labelledby":"new-enabled-label"}),p.jsx(Kt,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Fi,{id:"new-autofetch",checked:l.autoFetchModels??!1,onCheckedChange:w=>d("autoFetchModels",w),disabled:!v||s,"aria-labelledby":"new-autofetch-label"}),p.jsxs(Kt,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:_t("text-sm",v?"":"text-muted-foreground"),children:["Auto-fetch models ",v?"":"(Not Supported)"]})]})]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(jt,{variant:"ghost",size:"sm",onClick:n,disabled:s,type:"button",children:[p.jsx(xi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(jt,{variant:"secondary",size:"sm",onClick:h,disabled:s||!((x=l.name)!=null&&x.trim())||!l.type,type:"button",children:[s&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",s?"Adding...":"Add Provider"]})]})]})};var o1="Collapsible",[Fhe,WSe]=di(o1),[Lhe,aA]=Fhe(o1),m$=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:a,disabled:i,onOpenChange:s,...o}=e,[l,u]=js({prop:r,defaultProp:a??!1,onChange:s,caller:o1});return p.jsx(Lhe,{scope:n,disabled:i,contentId:Ea(),open:l,onOpenToggle:T.useCallback(()=>u(d=>!d),[u]),children:p.jsx(rn.div,{"data-state":sA(l),"data-disabled":i?"":void 0,...o,ref:t})})});m$.displayName=o1;var g$="CollapsibleTrigger",y$=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,a=aA(g$,n);return p.jsx(rn.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":sA(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:qt(e.onClick,a.onOpenToggle)})});y$.displayName=g$;var iA="CollapsibleContent",b$=T.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=aA(iA,e.__scopeCollapsible);return p.jsx(Ta,{present:n||a.open,children:({present:i})=>p.jsx($he,{...r,ref:t,present:i})})});b$.displayName=iA;var $he=T.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:a,...i}=e,s=aA(iA,n),[o,l]=T.useState(r),u=T.useRef(null),d=Cn(t,u),h=T.useRef(0),m=h.current,y=T.useRef(0),v=y.current,b=s.open||o,x=T.useRef(b),w=T.useRef(void 0);return T.useEffect(()=>{const S=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(S)},[]),Ua(()=>{const S=u.current;if(S){w.current=w.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const E=S.getBoundingClientRect();h.current=E.height,y.current=E.width,x.current||(S.style.transitionDuration=w.current.transitionDuration,S.style.animationName=w.current.animationName),l(r)}},[s.open,r]),p.jsx(rn.div,{"data-state":sA(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!b,...i,ref:d,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:b&&a})});function sA(e){return e?"open":"closed"}var Bhe=m$;function zhe({...e}){return p.jsx(Bhe,{"data-slot":"collapsible",...e})}function Uhe({...e}){return p.jsx(y$,{"data-slot":"collapsible-trigger",...e})}function Hhe({...e}){return p.jsx(b$,{"data-slot":"collapsible-content",...e})}const qhe=({stepNumber:e,title:t,description:n,isComplete:r,isActive:a,children:i,contentClassName:s,openOnComplete:o})=>{const[l,u]=T.useState(a&&!r);T.useEffect(()=>{a&&(!r||o)&&u(!0)},[a,r,o]);const d=r?bk:tD,h=r?"text-green-500":a?"text-primary":"text-muted-foreground";return p.jsxs(zhe,{open:l,onOpenChange:u,className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center justify-between space-x-4 px-1",children:[p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx(d,{className:_t("h-5 w-5 flex-shrink-0",h)}),p.jsxs("h4",{className:_t("text-sm font-semibold",r?"text-muted-foreground line-through":"text-primary"),children:["Step ",e,": ",t]})]}),p.jsx(Uhe,{asChild:!0,children:p.jsxs(jt,{variant:"ghost",size:"sm",className:"w-9 p-0",children:[l?p.jsx(il,{className:"h-4 w-4"}):p.jsx(eD,{className:"h-4 w-4"}),p.jsxs("span",{className:"sr-only",children:["Toggle ",t]})]})})]}),p.jsx(Hhe,{className:"space-y-2",children:p.jsxs("div",{className:_t("rounded-md border px-4 py-3 font-mono text-sm shadow-sm bg-card ml-8",s),children:[p.jsx("p",{className:"text-sm mb-3 text-card-foreground",children:n}),i]})})]})},oA=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:s="h-48",onModelClick:o})=>{const[l,u]=T.useState(""),d=T.useMemo(()=>{if(!l)return t;const h=l.toLowerCase();return t.filter(m=>m.name.toLowerCase().includes(h)||m.id.toLowerCase().includes(h))},[t,l]);return a?p.jsxs("div",{className:`space-y-2 ${s}`,children:[p.jsx(dr,{className:"h-8 w-full"}),p.jsx(dr,{className:"h-8 w-full"}),p.jsx(dr,{className:"h-8 w-full"})]}):t.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):p.jsxs("div",{className:"space-y-2",children:[p.jsx(Rn,{value:l,onChange:h=>u(h.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),p.jsx(sc,{className:`${s} w-full rounded-md border border-border p-3 bg-background/50`,children:p.jsx("div",{className:"space-y-2",children:d.map(h=>p.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[p.jsx(Kt,{htmlFor:`enable-model-${e}-${h.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:h.name||h.id,onClick:o?()=>o(h.id):void 0,children:h.name||h.id}),p.jsx("div",{className:"flex items-center flex-shrink-0 gap-1",children:p.jsx(Fi,{id:`enable-model-${e}-${h.id}`,checked:n.has(h.id),onCheckedChange:m=>r(h.id,m),disabled:i,"aria-label":`Enable model ${h.name||h.id}`,onClick:m=>m.stopPropagation()})})]},h.id))})})]})},xd=gt.forwardRef(({className:e,href:t,children:n,...r},a)=>p.jsx("a",{ref:a,href:t,target:"_blank",rel:"noopener noreferrer",className:_t("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));xd.displayName="Lnk";const Vhe=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:a,getAllAvailableModelDefsForProvider:i,isLoading:s,enableApiKeyManagement:o}=$n(dn(ae=>({apiKeys:ae.dbApiKeys,addApiKey:ae.addApiKey,providers:ae.dbProviderConfigs,addProviderConfig:ae.addProviderConfig,updateProviderConfig:ae.updateProviderConfig,getAllAvailableModelDefsForProvider:ae.getAllAvailableModelDefsForProvider,isLoading:ae.isLoading,enableApiKeyManagement:ae.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:u}=os(dn(ae=>({toggleChatControlPanel:ae.toggleChatControlPanel,setInitialSettingsTabs:ae.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=mn(dn(ae=>({addConversation:ae.addConversation,selectItem:ae.selectItem}))),[m,y]=T.useState(!1),[v,b]=T.useState(!1),[x,w]=T.useState(!1),[S,E]=T.useState(!1),[C,k]=T.useState(null),I=T.useMemo(()=>!o||e.length>0,[o,e]),R=T.useMemo(()=>n.length>0,[n]),j=T.useMemo(()=>n.some(ae=>ae.isEnabled&&ae.enabledModels&&ae.enabledModels.length>0),[n]),F=T.useMemo(()=>n.length>0?n[0]:null,[n]),$=T.useMemo(()=>F?i(F.id).map(ae=>({id:ae.id,name:ae.name})):[],[F,i]),G=T.useMemo(()=>new Set((F==null?void 0:F.enabledModels)??[]),[F]),D=T.useCallback(async(ae,B,J)=>{y(!0);try{await t(ae,B,J),k(B)}finally{y(!1)}},[t]),Z=T.useCallback(async ae=>{b(!0);try{const B=await r(ae);return k(null),B}finally{b(!1)}},[r]),q=T.useCallback(async(ae,B)=>{if(!F)return;E(!0);const J=new Set(F.enabledModels??[]);B?J.add(ae):J.delete(ae);const ee=Array.from(J);try{await a(F.id,{enabledModels:ee})}catch(te){Ye.error("Failed to update model status."),console.error("Failed to save model toggle:",te)}finally{E(!1)}},[F,a]),ue=T.useCallback(async()=>{w(!0);try{const ae=await d({title:"New Chat"});await h(ae,"conversation")}catch(ae){Ye.error("Failed to start your first chat."),console.error("Failed to start first chat:",ae),w(!1)}},[d,h]),ie=(ae,B)=>{u(ae,B),l("settingsModal",!0)},ne=[...o?[{id:"api-key",title:"Add API Key",description:p.jsxs("div",{children:[p.jsxs("p",{children:["To use providers like"," ",p.jsx(xd,{href:"https://platform.openai.com/api-keys",children:"OpenAI"}),","," ",p.jsx(xd,{href:"https://aistudio.google.com/app/apikey",children:"Google"}),","," ",p.jsx(xd,{href:"https://console.anthropic.com/settings/keys",children:"Anthropic (Claude)"}),", or ",p.jsx(xd,{href:"https://openrouter.ai/keys",children:"OpenRouter"})," ","or any OpenAi API compatible provider , add an API key. Keys are stored securely in your browser."]}),p.jsxs("p",{className:"py-2",children:['If you want truly local AI, "no internet required", you can setup ',p.jsx(xd,{href:"https://www.ollama.com/",children:"Ollama"})," or,"," ",p.jsx(xd,{href:"https://lmstudio.ai/",children:"LMStudio"})," (or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys."]})]}),isComplete:I,content:p.jsx(o$,{onSave:D,onCancel:()=>{},isSaving:m,className:"border-none shadow-none p-0"})}]:[],{id:"add-provider",title:"Add AI Provider",description:"Connect to an AI provider like OpenAI, Ollama, or others to start chatting.",isComplete:R,content:p.jsx(p$,{apiKeys:e,onAddProvider:Z,onCancel:()=>{},initialType:C??void 0})},{id:"enable-models",title:"Enable Models",description:p.jsxs(p.Fragment,{children:["Enable models for the provider you just added (",(F==null?void 0:F.name)||"","). Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."]}),isComplete:j,content:F?p.jsx(oA,{providerId:F.id,allAvailableModels:$,enabledModelIds:G,onToggleModel:q,isLoading:s||S,listHeightClass:"h-48"}):p.jsxs("p",{className:"text-sm text-muted-foreground italic",children:["Add a provider in Step ",o?"2":"1"," first."]})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:p.jsxs(jt,{onClick:ue,disabled:x,size:"sm",children:[p.jsx(dD,{className:"mr-2 h-4 w-4"}),x?"Starting...":"Start First Chat"]}),contentClassName:""}],X=ne.findIndex(ae=>!ae.isComplete);return s?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-2xl mx-auto w-full",children:[p.jsx(dr,{className:"h-10 w-3/4"}),p.jsx(dr,{className:"h-20 w-full"}),p.jsx(dr,{className:"h-10 w-3/4"}),p.jsx(dr,{className:"h-20 w-full"})]}):p.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4",children:p.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx(Dv,{className:"h-12 w-12 text-primary mx-auto mb-3"}),p.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"LiteChat Setup"}),p.jsx("p",{className:"text-muted-foreground",children:"Follow these steps to configure LiteChat."})]}),p.jsx("div",{className:"space-y-4",children:ne.map((ae,B)=>{const J=B===X;return p.jsx(qhe,{stepNumber:B+1,title:ae.title,description:ae.description,isComplete:ae.id!=="start-chat"&&ae.isComplete,isActive:J,contentClassName:ae.id==="add-provider"||ae.id==="api-key"?"p-0 border-none shadow-none bg-transparent":ae.id==="enable-models"?"p-0":ae.contentClassName,children:ae.content},ae.id)})}),!s&&!o&&!R&&X===-1&&p.jsxs("div",{className:"text-center text-muted-foreground mt-6",children:[p.jsx(Nh,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),p.jsx("p",{className:"text-sm",children:"Configuration issue detected. Please review provider settings."}),p.jsx(jt,{variant:"outline",size:"sm",onClick:()=>ie("providers"),className:"mt-2",children:"Go to Settings"})]})]})})},Ghe=["conversation.title_generation"],Khe=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:s})=>{const o=T.useRef(null),l=T.useRef(null),[u,d]=T.useState(!1),h=qn(R=>R.streamingInteractionIds),m=lr(R=>R.chatMaxWidth),{isLoading:y}=$n(dn(R=>({providers:R.dbProviderConfigs,apiKeys:R.dbApiKeys,isLoading:R.isLoading,enableApiKeyManagement:R.enableApiKeyManagement}))),{conversationCount:v,isConversationLoading:b}=mn(dn(R=>({conversationCount:R.conversations.length,isConversationLoading:R.isLoading}))),{projectCount:x,isProjectLoading:w}=ai(dn(R=>({projectCount:R.projects.length,isProjectLoading:R.isLoading}))),S=T.useMemo(()=>y||b||w?!1:v===0&&x===0,[v,x,y,b,w]),E=T.useMemo(()=>{const R=[],j=new Set;return[...t].sort(($,G)=>$.index-G.index).forEach($=>{if(!j.has($.id)&&!Ghe.includes($.type)){const G=[$];j.add($.id),R.push(G)}}),R},[t]),C=(R="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:R})};T.useEffect(()=>{if(l.current){const{scrollHeight:R,clientHeight:j,scrollTop:F}=l.current,$=R-j<=F+150,G=n==="streaming"&&h.length>0;($||G)&&requestAnimationFrame(()=>{C(G?"smooth":"auto")})}},[E.length,n,h]),T.useEffect(()=>{const R=l.current;if(!R)return;const j=()=>{const{scrollHeight:F,clientHeight:$,scrollTop:G}=R,D=G<F-$-$*.5;d(D)};return R.addEventListener("scroll",j,{passive:!0}),j(),()=>{R.removeEventListener("scroll",j)}},[]),T.useEffect(()=>{o.current&&(l.current=o.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const k=()=>y||b||w?p.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[p.jsx(dr,{className:"h-24 w-full"}),p.jsx(dr,{className:"h-32 w-full"}),p.jsx(dr,{className:"h-20 w-full"})]}):S?p.jsx(Vhe,{}):e?E.length===0&&n!=="streaming"?p.jsx(RO,{}):p.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[E.map(R=>{const j=R[0];return h.includes(j.id)?p.jsx(UC,{interactionId:j.id,onStop:s},`${j.id}-streaming`):p.jsx(uL,{interaction:j,onEdit:i,onRegenerate:a,onDelete:void 0},j.id)}),n==="streaming"&&h.filter(R=>!t.some(j=>j.id===R)).map(R=>p.jsx(UC,{interactionId:R,onStop:s},`${R}-streaming-new`))]}):p.jsx(RO,{}),I=m||"max-w-7xl";return p.jsxs("div",{className:_t("flex-grow relative",r),children:[p.jsx(sc,{className:"h-full w-full",ref:o,children:p.jsx("div",{className:_t("chat-canvas-container mx-auto",I),children:k()})}),u&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>C(),"aria-label":"Scroll to bottom",children:p.jsx(aq,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"left",children:"Scroll to Bottom"})]})})]})},dh=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:p.jsx("div",{className:_t(r),children:a.map(i=>{const s=n==="icon"?i.iconRenderer:i.renderer;return p.jsx(gt.Fragment,{children:s?s():null},i.id)})})},Whe=Symbol("Let zodToJsonSchema decide on which parser to use"),UO={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Zhe=e=>typeof e=="string"?{...UO,name:e}:{...UO,...e},Yhe=e=>{const t=Zhe(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function v$(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function wr(e,t,n,r,a){e[t]=n,v$(e,t,r,a)}function Xhe(){return{}}function Jhe(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Vt.ZodAny&&(n.items=fr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&wr(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&wr(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(wr(n,"minItems",e.exactLength.value,e.exactLength.message,t),wr(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function Qhe(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?wr(n,"minimum",r.value,r.message,t):wr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),wr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?wr(n,"maximum",r.value,r.message,t):wr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),wr(n,"maximum",r.value,r.message,t));break;case"multipleOf":wr(n,"multipleOf",r.value,r.message,t);break}return n}function epe(){return{type:"boolean"}}function w$(e,t){return fr(e.type._def,t)}const tpe=(e,t)=>fr(e.innerType._def,t);function x$(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>x$(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return npe(e,t)}}const npe=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":wr(n,"minimum",r.value,r.message,t);break;case"max":wr(n,"maximum",r.value,r.message,t);break}return n};function rpe(e,t){return{...fr(e.innerType._def,t),default:e.defaultValue()}}function ape(e,t){return t.effectStrategy==="input"?fr(e.schema._def,t):{}}function ipe(e){return{type:"string",enum:Array.from(e.values)}}const spe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function ope(e,t){const n=[fr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),fr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(spe(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;s=l}else r=void 0;a.push(s)}}),a.length?{allOf:a,...r}:void 0}function lpe(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let w2;const Gs={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(w2===void 0&&(w2=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),w2),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function _$(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":wr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":wr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Ks(n,"email",r.message,t);break;case"format:idn-email":Ks(n,"idn-email",r.message,t);break;case"pattern:zod":vi(n,Gs.email,r.message,t);break}break;case"url":Ks(n,"uri",r.message,t);break;case"uuid":Ks(n,"uuid",r.message,t);break;case"regex":vi(n,r.regex,r.message,t);break;case"cuid":vi(n,Gs.cuid,r.message,t);break;case"cuid2":vi(n,Gs.cuid2,r.message,t);break;case"startsWith":vi(n,RegExp(`^${x2(r.value,t)}`),r.message,t);break;case"endsWith":vi(n,RegExp(`${x2(r.value,t)}$`),r.message,t);break;case"datetime":Ks(n,"date-time",r.message,t);break;case"date":Ks(n,"date",r.message,t);break;case"time":Ks(n,"time",r.message,t);break;case"duration":Ks(n,"duration",r.message,t);break;case"length":wr(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),wr(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{vi(n,RegExp(x2(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Ks(n,"ipv4",r.message,t),r.version!=="v4"&&Ks(n,"ipv6",r.message,t);break}case"base64url":vi(n,Gs.base64url,r.message,t);break;case"jwt":vi(n,Gs.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&vi(n,Gs.ipv4Cidr,r.message,t),r.version!=="v4"&&vi(n,Gs.ipv6Cidr,r.message,t);break}case"emoji":vi(n,Gs.emoji(),r.message,t);break;case"ulid":{vi(n,Gs.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Ks(n,"binary",r.message,t);break}case"contentEncoding:base64":{wr(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{vi(n,Gs.base64,r.message,t);break}}break}case"nanoid":vi(n,Gs.nanoid,r.message,t)}return n}function x2(e,t){return t.patternStrategy==="escape"?upe(e):e}const cpe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function upe(e){let t="";for(let n=0;n<e.length;n++)cpe.has(e[n])||(t+="\\"),t+=e[n];return t}function Ks(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):wr(e,"format",t,n,r)}function vi(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:HO(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):wr(e,"pattern",HO(t,r),n,r)}function HO(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,s=!1,o=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(s){if(r[u].match(/[a-z]/)){o?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),o=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],o=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=s?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:s&&r[u]==="]"?s=!1:!s&&r[u]==="["&&(s=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function S$(e,t){var r,a,i,s,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Vt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,d)=>({...u,[d]:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Vt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=_$(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===Vt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===Vt.ZodBranded&&e.keyType._def.type._def.typeName===Vt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=w$(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function dpe(e,t){if(t.mapStrategy==="record")return S$(e,t);const n=fr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function fpe(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function hpe(){return{not:{}}}function ppe(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Fw={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function mpe(e,t){if(t.target==="openApi3")return qO(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Fw&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const s=Fw[i._def.typeName];return s&&!a.includes(s)?[...a,s]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...a,s];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,s,o)=>o.indexOf(i)===s);return{type:a.length>1?a:a[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return qO(e,t)}const qO=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>fr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function gpe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Fw[e.innerType._def.typeName],nullable:!0}:{type:[Fw[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=fr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=fr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function ype(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",v$(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?wr(n,"minimum",r.value,r.message,t):wr(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),wr(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?wr(n,"maximum",r.value,r.message,t):wr(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),wr(n,"maximum",r.value,r.message,t));break;case"multipleOf":wr(n,"multipleOf",r.value,r.message,t);break}return n}function bpe(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let u=wpe(l);u&&n&&(l instanceof Qs&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=fr(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,u||a.push(o))}a.length&&(r.required=a);const s=vpe(e,t);return s!==void 0&&(r.additionalProperties=s),r}function vpe(e,t){if(e.catchall._def.typeName!=="ZodNever")return fr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function wpe(e){try{return e.isOptional()}catch{return!0}}const xpe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return fr(e.innerType._def,t);const n=fr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},_pe=(e,t)=>{if(t.pipeStrategy==="input")return fr(e.in._def,t);if(t.pipeStrategy==="output")return fr(e.out._def,t);const n=fr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=fr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Spe(e,t){return fr(e.type._def,t)}function Epe(e,t){const r={type:"array",uniqueItems:!0,items:fr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&wr(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&wr(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Cpe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>fr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:fr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>fr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function kpe(){return{not:{}}}function Tpe(){return{}}const Ape=(e,t)=>fr(e.innerType._def,t),Npe=(e,t,n)=>{switch(t){case Vt.ZodString:return _$(e,n);case Vt.ZodNumber:return ype(e,n);case Vt.ZodObject:return bpe(e,n);case Vt.ZodBigInt:return Qhe(e,n);case Vt.ZodBoolean:return epe();case Vt.ZodDate:return x$(e,n);case Vt.ZodUndefined:return kpe();case Vt.ZodNull:return ppe(n);case Vt.ZodArray:return Jhe(e,n);case Vt.ZodUnion:case Vt.ZodDiscriminatedUnion:return mpe(e,n);case Vt.ZodIntersection:return ope(e,n);case Vt.ZodTuple:return Cpe(e,n);case Vt.ZodRecord:return S$(e,n);case Vt.ZodLiteral:return lpe(e,n);case Vt.ZodEnum:return ipe(e);case Vt.ZodNativeEnum:return fpe(e);case Vt.ZodNullable:return gpe(e,n);case Vt.ZodOptional:return xpe(e,n);case Vt.ZodMap:return dpe(e,n);case Vt.ZodSet:return Epe(e,n);case Vt.ZodLazy:return()=>e.getter()._def;case Vt.ZodPromise:return Spe(e,n);case Vt.ZodNaN:case Vt.ZodNever:return hpe();case Vt.ZodEffects:return ape(e,n);case Vt.ZodAny:return Xhe();case Vt.ZodUnknown:return Tpe();case Vt.ZodDefault:return rpe(e,n);case Vt.ZodBranded:return w$(e,n);case Vt.ZodReadonly:return Ape(e,n);case Vt.ZodCatch:return tpe(e,n);case Vt.ZodPipeline:return _pe(e,n);case Vt.ZodFunction:case Vt.ZodVoid:case Vt.ZodSymbol:return;default:return(r=>{})()}};function fr(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==Whe)return l}if(r&&!n){const l=Rpe(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Npe(e,e.typeName,t),s=typeof i=="function"?fr(i(),t):i;if(s&&jpe(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return a.jsonSchema=s,l}return a.jsonSchema=s,s}const Rpe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Ipe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Ipe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},jpe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Ope=(e,t)=>{const n=Yhe(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,d])=>({...l,[u]:fr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=fr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const o=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var Jg={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Qg={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},e0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},t0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},n0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},Dpe=[Jg,Qg,e0,t0,n0];Jg.code+"",Qg.code+"",e0.code+"",t0.code+"",n0.code+"";Jg.name+"",Jg.code,Qg.name+"",Qg.code,e0.name+"",e0.code,t0.name+"",t0.code,n0.name+"",n0.code;Dpe.map(e=>e.code);function Mpe(e){const t=["ROOT"];let n=-1,r=null;function a(l,u,d){switch(l){case'"':{n=u,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function s(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":a(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?o+="true".slice(d.length):"false".startsWith(d)?o+="false".slice(d.length):"null".startsWith(d)&&(o+="null".slice(d.length))}}return o}function Ppe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=Md({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Md({text:Mpe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Fpe={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Lpe={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},$pe={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Bpe={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},zpe={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Upe={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},Hpe={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},qpe={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Vpe={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},Gpe={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},Kpe={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},Wpe={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},Zpe={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},Ype={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},Xpe={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},Jpe={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},l1=[Fpe,Lpe,$pe,Bpe,zpe,Upe,Hpe,qpe,Vpe,Gpe,Kpe,Wpe,Zpe,Ype,Xpe,Jpe];Object.fromEntries(l1.map(e=>[e.code,e]));Object.fromEntries(l1.map(e=>[e.name,e.code]));l1.map(e=>e.code);function ni(e,t){const n=l1.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function Qpe(e,t){var n;const r=(n=void 0)!=null?n:!1;return eme(Ope(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var ZC=Symbol.for("vercel.ai.schema");function eme(e,{validate:t}={}){return{[ZC]:!0,_type:void 0,[Bv]:!0,jsonSchema:e,validate:t}}function tme(e){return typeof e=="object"&&e!==null&&ZC in e&&e[ZC]===!0&&"jsonSchema"in e&&"validate"in e}function c1(e){return tme(e)?e:Qpe(e)}const VO=globalThis||void 0||self;var nme=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof VO=="object"?VO:{},Td="1.9.0",GO=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function rme(e){var t=new Set([e]),n=new Set,r=e.match(GO);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(o){return n.add(o),!1}function s(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(GO);if(!u)return i(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?s(l):i(l):a.minor<=d.minor?s(l):i(l)}}var ame=rme(Td),ime=Td.split(".")[0],r0=Symbol.for("opentelemetry.js.api."+ime),a0=nme;function lA(e,t,n,r){var a;r===void 0&&(r=!1);var i=a0[r0]=(a=a0[r0])!==null&&a!==void 0?a:{version:Td};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==Td){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+Td);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Td+"."),!0}function i0(e){var t,n,r=(t=a0[r0])===null||t===void 0?void 0:t.version;if(!(!r||!ame(r)))return(n=a0[r0])===null||n===void 0?void 0:n[e]}function cA(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Td+".");var n=a0[r0];n&&delete n[e]}var sme=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},ome=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},lme=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vm("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vm("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vm("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vm("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Vm("verbose",this._namespace,t)},e}();function Vm(e,t,n){var r=i0("diag");if(r)return n.unshift(t),r[e].apply(r,ome([],sme(n),!1))}var ns;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ns||(ns={}));function cme(e,t){e<ns.NONE?e=ns.NONE:e>ns.ALL&&(e=ns.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",ns.ERROR),warn:n("warn",ns.WARN),info:n("info",ns.INFO),debug:n("debug",ns.DEBUG),verbose:n("verbose",ns.VERBOSE)}}var ume=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},dme=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},fme="diag",Lw=function(){function e(){function t(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=i0("diag");if(o)return o[a].apply(o,dme([],ume(i),!1))}}var n=this,r=function(a,i){var s,o,l;if(i===void 0&&(i={logLevel:ns.INFO}),a===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var d=i0("diag"),h=cme((o=i.logLevel)!==null&&o!==void 0?o:ns.INFO,a);if(d&&!i.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return lA("diag",h,n,!0)};n.setLogger=r,n.disable=function(){cA(fme,n)},n.createComponentLogger=function(a){return new lme(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function hme(e){return Symbol.for(e)}var pme=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),mme=new pme,gme=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},yme=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},bme=function(){function e(){}return e.prototype.active=function(){return mme},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,yme([r],gme(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),vme=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},wme=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},_2="context",xme=new bme,E$=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return lA(_2,t,Lw.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,wme([t,n,r],vme(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return i0(_2)||xme},e.prototype.disable=function(){this._getContextManager().disable(),cA(_2,Lw.instance())},e}(),YC;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(YC||(YC={}));var C$="0000000000000000",k$="00000000000000000000000000000000",_me={traceId:k$,spanId:C$,traceFlags:YC.NONE},ag=function(){function e(t){t===void 0&&(t=_me),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),uA=hme("OpenTelemetry Context Key SPAN");function dA(e){return e.getValue(uA)||void 0}function Sme(){return dA(E$.getInstance().active())}function fA(e,t){return e.setValue(uA,t)}function Eme(e){return e.deleteValue(uA)}function Cme(e,t){return fA(e,new ag(t))}function T$(e){var t;return(t=dA(e))===null||t===void 0?void 0:t.spanContext()}var kme=/^([0-9a-f]{32})$/i,Tme=/^[0-9a-f]{16}$/i;function Ame(e){return kme.test(e)&&e!==k$}function Nme(e){return Tme.test(e)&&e!==C$}function A$(e){return Ame(e.traceId)&&Nme(e.spanId)}function Rme(e){return new ag(e)}var S2=E$.getInstance(),N$=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=S2.active());var a=!!(n!=null&&n.root);if(a)return new ag;var i=r&&T$(r);return Ime(i)&&A$(i)?new ag(i):new ag},e.prototype.startActiveSpan=function(t,n,r,a){var i,s,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(i=n,o=r):(i=n,s=r,o=a);var l=s??S2.active(),u=this.startSpan(t,i,l),d=fA(l,u);return S2.with(d,o,void 0,u)}},e}();function Ime(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var jme=new N$,Ome=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):jme},e}(),Dme=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new N$},e}(),Mme=new Dme,KO=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Ome(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Mme},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),$w;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})($w||($w={}));var E2="trace",Pme=function(){function e(){this._proxyTracerProvider=new KO,this.wrapSpanContext=Rme,this.isSpanContextValid=A$,this.deleteSpan=Eme,this.getSpan=dA,this.getActiveSpan=Sme,this.getSpanContext=T$,this.setSpan=fA,this.setSpanContext=Cme}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=lA(E2,this._proxyTracerProvider,Lw.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return i0(E2)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){cA(E2,Lw.instance()),this._proxyTracerProvider=new KO},e}(),Fme=Pme.getInstance(),Lme=Object.defineProperty,hA=(e,t)=>{for(var n in t)Lme(e,n,{get:t[n],enumerable:!0})};function Bw(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function WO(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function ZO({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await i.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var R$="AI_InvalidArgumentError",I$=`vercel.ai.error.${R$}`,$me=Symbol.for(I$),j$,Zs=class extends Tn{constructor({parameter:e,value:t,message:n}){super({name:R$,message:`Invalid argument for parameter ${e}: ${n}`}),this[j$]=!0,this.parameter=e,this.value=t}static isInstance(e){return Tn.hasMarker(e,I$)}};j$=$me;var O$="AI_RetryError",D$=`vercel.ai.error.${O$}`,Bme=Symbol.for(D$),M$,YO=class extends Tn{constructor({message:e,reason:t,errors:n}){super({name:O$,message:e}),this[M$]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Tn.hasMarker(e,D$)}};M$=Bme;var zme=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>P$(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function P$(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Sv(i)||t===0)throw i;const s=ZG(i),o=[...a,i],l=o.length;if(l>t)throw new YO({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:o});if(i instanceof Error&&_a.isInstance(i)&&i.isRetryable===!0&&l<=t)return await GG(n),P$(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?i:new YO({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:o})}}function Ume({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new Zs({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Zs({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:zme({maxRetries:t})}}function XC({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function Hme({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,o])=>(i[`ai.settings.${s}`]=o,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[s,o])=>(i[`ai.telemetry.metadata.${s}`]=o,i),{}),...Object.entries(r??{}).reduce((i,[s,o])=>(o!==void 0&&(i[`ai.request.headers.${s}`]=o),i),{})}}var qme={startSpan(){return yv},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(yv);if(typeof n=="function")return n(yv);if(typeof r=="function")return r(yv)}},yv={spanContext(){return Vme},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Vme={traceId:"",spanId:"",traceFlags:0};function Gme({isEnabled:e=!1,tracer:t}={}){return e?t||Fme.getTracer("ai"):qme}function JC({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return a&&i.end(),s}catch(s){try{s instanceof Error?(i.recordException({name:s.name,message:s.message,stack:s.stack}),i.setStatus({code:$w.ERROR,message:s.message})):i.setStatus({code:$w.ERROR})}finally{i.end()}throw s}})}function wh({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var Kme=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=jh(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=eM(this.base64Data)),this.uint8ArrayData}},Wme=class extends Kme{constructor(e){super(e),this.type="file"}},Zme=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function Yme(e){for(const t of Zme)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var F$="AI_NoObjectGeneratedError",L$=`vercel.ai.error.${F$}`,Xme=Symbol.for(L$),$$,XO=class extends Tn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:F$,message:e,cause:t}),this[$$]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return Tn.hasMarker(e,L$)}};$$=Xme;var B$="AI_DownloadError",z$=`vercel.ai.error.${B$}`,Jme=Symbol.for(z$),U$,C2=class extends Tn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:B$,message:a,cause:r}),this[U$]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Tn.hasMarker(e,z$)}};U$=Jme;async function Qme({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new C2({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw C2.isInstance(a)?a:new C2({url:r,cause:a})}}var H$="AI_InvalidDataContentError",q$=`vercel.ai.error.${H$}`,ege=Symbol.for(q$),V$,JO=class extends Tn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:H$,message:n,cause:t}),this[V$]=!0,this.content=e}static isInstance(e){return Tn.hasMarker(e,q$)}};V$=ege;var G$=U.union([U.string(),U.instanceof(Uint8Array),U.instanceof(ArrayBuffer),U.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function K$(e){return typeof e=="string"?e:e instanceof ArrayBuffer?jh(new Uint8Array(e)):jh(e)}function zw(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return eM(e)}catch(t){throw new JO({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new JO({content:e})}function tge(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var W$="AI_InvalidMessageRoleError",Z$=`vercel.ai.error.${W$}`,nge=Symbol.for(Z$),Y$,rge=class extends Tn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:W$,message:t}),this[Y$]=!0,this.role=e}static isInstance(e){return Tn.hasMarker(e,Z$)}};Y$=nge;function age(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function ige({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=Qme}){const a=await oge(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>sge(i,a))]}function sge(e,t){var n,r,a,i,s,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(u=>lge(u,t)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{var d;const h=(d=u.providerOptions)!=null?d:u.experimental_providerMetadata;switch(u.type){case"file":return{type:"file",data:u.data instanceof URL?u.data:K$(u.data),filename:u.filename,mimeType:u.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:u.text,signature:u.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:u.data,providerMetadata:h};case"text":return{type:"text",text:u.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,args:u.args,providerMetadata:h}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const u=l;throw new rge({role:u})}}}async function oge(e,t,n,r){const a=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(a.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:o})=>[s.toString(),o]))}function lge(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,o,l,u;const d=e.type;switch(d){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:m}=age(l.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${d}`);s=h,u=zw(m)}else{const h=t[l.toString()];h?(u=h.data,s??(s=h.mimeType)):u=l}else u=zw(l);switch(d){case"image":return u instanceof Uint8Array&&(s=(r=Yme(u))!=null?r:s),{type:"image",image:u,mimeType:s,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?K$(u):u,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function cge({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new Zs({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new Zs({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Zs({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new Zs({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new Zs({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new Zs({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new Zs({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new Zs({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:o}}function QO(e){var t,n,r;const a=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let o,l,u;try{[o,l]=i.url.split(","),u=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:zw(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:tge(zw(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return a}var X$="AI_MessageConversionError",J$=`vercel.ai.error.${X$}`,uge=Symbol.for(J$),Q$,k2=class extends Tn{constructor({originalMessage:e,message:t}){super({name:X$,message:t}),this[Q$]=!0,this.originalMessage=e}static isInstance(e){return Tn.hasMarker(e,J$)}};Q$=uge;function dge(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const o=e[s],l=s===e.length-1,{role:u,content:d,experimental_attachments:h}=o;switch(u){case"system":{i.push({role:"system",content:d});break}case"user":{if(o.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...QO(h)]:d});else{const m=o.parts.filter(y=>y.type==="text").map(y=>({type:"text",text:y.text}));i.push({role:"user",content:h?[...m,...QO(h)]:m})}break}case"assistant":{if(o.parts!=null){let v=function(){const S=[];for(const C of w)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":S.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:S});const E=w.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new k2({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:I,result:R}=C,j=a[I];return(j==null?void 0:j.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:I,result:j.experimental_toToolResultContent(R),experimental_content:j.experimental_toToolResultContent(R)}:{type:"tool-result",toolCallId:k,toolName:I,result:R}})}),w=[],x=!1,b++},b=0,x=!1,w=[];for(const S of o.parts)switch(S.type){case"text":{x&&v(),w.push(S);break}case"file":case"reasoning":{w.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==b&&v(),w.push(S),x=!0;break}}v();break}const m=o.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:d});break}const y=m.reduce((v,b)=>{var x;return Math.max(v,(x=b.step)!=null?x:0)},0);for(let v=0;v<=y;v++){const b=m.filter(x=>{var w;return((w=x.step)!=null?w:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:x,toolName:w,args:S})=>({type:"tool-call",toolCallId:x,toolName:w,args:S}))]}),i.push({role:"tool",content:b.map(x=>{if(!("result"in x))throw new k2({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(x)});const{toolCallId:w,toolName:S,result:E}=x,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:w,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:w,toolName:S,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const m=u;throw new k2({originalMessage:o,message:`Unsupported role: ${m}`})}}}return i}function fge(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(hge);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function hge(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var QC=U.lazy(()=>U.union([U.null(),U.string(),U.number(),U.boolean(),U.record(U.string(),QC),U.array(QC)])),ra=U.record(U.string(),U.record(U.string(),QC)),pge=U.array(U.union([U.object({type:U.literal("text"),text:U.string()}),U.object({type:U.literal("image"),data:U.string(),mimeType:U.string().optional()})])),e9=U.object({type:U.literal("text"),text:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),mge=U.object({type:U.literal("image"),image:U.union([G$,U.instanceof(URL)]),mimeType:U.string().optional(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),t9=U.object({type:U.literal("file"),data:U.union([G$,U.instanceof(URL)]),filename:U.string().optional(),mimeType:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),gge=U.object({type:U.literal("reasoning"),text:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),yge=U.object({type:U.literal("redacted-reasoning"),data:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),bge=U.object({type:U.literal("tool-call"),toolCallId:U.string(),toolName:U.string(),args:U.unknown(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),vge=U.object({type:U.literal("tool-result"),toolCallId:U.string(),toolName:U.string(),result:U.unknown(),content:pge.optional(),isError:U.boolean().optional(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),wge=U.object({role:U.literal("system"),content:U.string(),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),xge=U.object({role:U.literal("user"),content:U.union([U.string(),U.array(U.union([e9,mge,t9]))]),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),_ge=U.object({role:U.literal("assistant"),content:U.union([U.string(),U.array(U.union([e9,t9,gge,yge,bge]))]),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Sge=U.object({role:U.literal("tool"),content:U.array(vge),providerOptions:ra.optional(),experimental_providerMetadata:ra.optional()}),Ege=U.union([wge,xge,_ge,Sge]);function Cge({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new Fl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Fl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new Fl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new Fl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=fge(e.messages);if(n==="other")throw new Fl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?dge(e.messages,{tools:t}):e.messages;if(r.length===0)throw new Fl({prompt:e,message:"messages must not be empty"});const a=ap({value:r,schema:U.array(Ege)});if(!a.success)throw new Fl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function kge({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Tge(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Age="JSON schema:",Nge="You MUST answer with a JSON object that matches the JSON schema above.",Rge="You MUST answer with JSON.";function Ige({prompt:e,schema:t,schemaPrefix:n=t!=null?Age:void 0,schemaSuffix:r=t!=null?Nge:Rge}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function T2(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Zd({prefix:"aiobj",size:24});var Oi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function e6(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function jge(){let e=[],t=null,n=!1,r=e6();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=e6(),await r.promise,a();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Oge(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Zd({prefix:"aiobj",size:24});var n9="AI_NoOutputSpecifiedError",r9=`vercel.ai.error.${n9}`,Dge=Symbol.for(r9),a9,Mge=class extends Tn{constructor({message:e="No output specified."}={}){super({name:n9,message:e}),this[a9]=!0}static isInstance(e){return Tn.hasMarker(e,r9)}};a9=Dge;var i9="AI_ToolExecutionError",s9=`vercel.ai.error.${i9}`,Pge=Symbol.for(s9),o9,Fge=class extends Tn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${g0(r)}`}){super({name:i9,message:a,cause:r}),this[o9]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Tn.hasMarker(e,s9)}};o9=Pge;function Lge(e){return e!=null&&Object.keys(e).length>0}function $ge({tools:e,toolChoice:t,activeTools:n}){return Lge(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const s=i.type;switch(s){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:c1(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const o=s;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var Bge=/^([\s\S]*?)(\s+)(\S*)$/;function zge(e){const t=e.match(Bge);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var l9="AI_InvalidToolArgumentsError",c9=`vercel.ai.error.${l9}`,Uge=Symbol.for(c9),u9,d9=class extends Tn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${g0(n)}`}){super({name:l9,message:r,cause:n}),this[u9]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Tn.hasMarker(e,c9)}};u9=Uge;var f9="AI_NoSuchToolError",h9=`vercel.ai.error.${f9}`,Hge=Symbol.for(h9),p9,ek=class extends Tn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:f9,message:n}),this[p9]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Tn.hasMarker(e,h9)}};p9=Hge;var m9="AI_ToolCallRepairError",g9=`vercel.ai.error.${m9}`,qge=Symbol.for(g9),y9,Vge=class extends Tn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${g0(e)}`}){super({name:m9,message:n,cause:e}),this[y9]=!0,this.originalError=t}static isInstance(e){return Tn.hasMarker(e,g9)}};y9=qge;async function Gge({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new ek({toolName:e.toolName});try{return await t6({toolCall:e,tools:t})}catch(i){if(n==null||!(ek.isInstance(i)||d9.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>c1(t[o].parameters).jsonSchema,system:r,messages:a,error:i})}catch(o){throw new Vge({cause:o,originalError:i})}if(s==null)throw i;return await t6({toolCall:s,tools:t})}}async function t6({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new ek({toolName:e.toolName,availableTools:Object.keys(t)});const a=c1(r.parameters),i=e.args.trim()===""?ap({value:{},schema:a}):Md({text:e.args,schema:a});if(i.success===!1)throw new d9({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function Kge(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function n6({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:s,generateMessageId:o}){const l=[];return l.push({role:"assistant",content:[...n.map(u=>u.type==="text"?{...u,type:"reasoning"}:{...u,type:"redacted-reasoning"}),...t.map(u=>({type:"file",data:u.base64,mimeType:u.mimeType})),{type:"text",text:e},...a],id:s}),i.length>0&&l.push({role:"tool",id:o(),content:i.map(u=>{const d=r[u.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:d.experimental_toToolResultContent(u.result),experimental_content:d.experimental_toToolResultContent(u.result)}:{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result}})}),l}Zd({prefix:"aitxt",size:24});Zd({prefix:"msg",size:24});var Wge={};hA(Wge,{object:()=>Jge,text:()=>Xge});var b9="AI_InvalidStreamPartError",v9=`vercel.ai.error.${b9}`,Zge=Symbol.for(v9),w9,Yge=class extends Tn{constructor({chunk:e,message:t}){super({name:b9,message:t}),this[w9]=!0,this.chunk=e}static isInstance(e){return Tn.hasMarker(e,v9)}};w9=Zge;var Xge=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),Jge=({schema:e})=>{const t=c1(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Ige({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=Ppe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=Md({text:n});if(!a.success)throw new XO({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=ap({value:a.value,schema:t});if(!i.success)throw new XO({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function x9(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function pA(e,t){const n=e.getReader(),r=t.getReader();let a,i,s=!1,o=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function u(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(s){await u(d);return}if(o){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(y=>({result:y,reader:n})),i.then(y=>({result:y,reader:r}))]);h.done||d.enqueue(h.value),m===n?(a=void 0,h.done&&(await u(d),s=!0)):(i=void 0,h.done&&(o=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function Qge({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:s,abortSignal:o,repairToolCall:l}){let u=null;const d=new ReadableStream({start(w){u=w}}),h={},m=new Set;let y=!1,v;function b(){y&&m.size===0&&(v!=null&&u.enqueue(v),u.close())}const x=new TransformStream({async transform(w,S){const E=w.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(w);break}case"file":{S.enqueue(new Wme({data:w.data,mimeType:w.mimeType}));break}case"tool-call-delta":{n&&(h[w.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:w.toolCallId,toolName:w.toolName}),h[w.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:w.toolCallId,toolName:w.toolName,argsTextDelta:w.argsTextDelta}));break}case"tool-call":{try{const C=await Gge({toolCall:w,tools:e,repairToolCall:l,system:i,messages:s});S.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const I=Bo();m.add(I),JC({name:"ai.toolCall",attributes:wh({telemetry:a,attributes:{...XC({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async R=>k.execute(C.args,{toolCallId:C.toolCallId,messages:s,abortSignal:o}).then(j=>{u.enqueue({...C,type:"tool-result",result:j}),m.delete(I),b();try{R.setAttributes(wh({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(j)}}}))}catch{}},j=>{u.enqueue({type:"error",error:new Fge({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:j})}),m.delete(I),b()})})}}catch(C){u.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:w.finishReason,logprobs:w.logprobs,usage:kge(w.usage),experimental_providerMetadata:w.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){y=!0,b()}});return new ReadableStream({async start(w){return Promise.all([t.pipeThrough(x).pipeTo(new WritableStream({write(S){w.enqueue(S)},close(){}})),d.pipeTo(new WritableStream({write(S){w.enqueue(S)},close(){w.close()}}))])}})}var e0e=Zd({prefix:"aitxt",size:24}),t0e=Zd({prefix:"msg",size:24});function n0e({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:s,abortSignal:o,headers:l,maxSteps:u=1,experimental_generateMessageId:d=t0e,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:y,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:x=!1,toolCallStreaming:w=x,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:I,onFinish:R,onStepFinish:j,_internal:{now:F=Oge,generateId:$=e0e,currentDate:G=()=>new Date}={},...D}){return new a0e({model:e,telemetry:y,headers:l,settings:D,maxRetries:s,abortSignal:o,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:w,transforms:x9(C),activeTools:S,repairToolCall:E,maxSteps:u,output:h,continueSteps:m,providerOptions:b,onChunk:k,onError:I,onFinish:R,onStepFinish:j,now:F,currentDate:G,generateId:$,generateMessageId:d})}function r0e(e){if(!e)return new TransformStream({transform(i,s){s.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:s=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:s}),n=""}return new TransformStream({transform(i,s){if(i.type==="step-finish"&&a({controller:s}),i.type!=="text-delta"){s.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(a({controller:s,partialOutput:o.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var a0e=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:s,prompt:o,messages:l,tools:u,toolChoice:d,toolCallStreaming:h,transforms:m,activeTools:y,repairToolCall:v,maxSteps:b,output:x,continueSteps:w,providerOptions:S,now:E,currentDate:C,generateId:k,generateMessageId:I,onChunk:R,onError:j,onFinish:F,onStepFinish:$}){this.warningsPromise=new Oi,this.usagePromise=new Oi,this.finishReasonPromise=new Oi,this.providerMetadataPromise=new Oi,this.textPromise=new Oi,this.reasoningPromise=new Oi,this.reasoningDetailsPromise=new Oi,this.sourcesPromise=new Oi,this.filesPromise=new Oi,this.toolCallsPromise=new Oi,this.toolResultsPromise=new Oi,this.requestPromise=new Oi,this.responsePromise=new Oi,this.stepsPromise=new Oi;var G;if(b<1)throw new Zs({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=x;let D="",Z="",q="",ue=[],ie=[],ne,X=[];const ae=[],B={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let J=[],ee=[],te,fe,ve="initial";const De=[];let Ae;const Ne=new TransformStream({async transform(de,se){se.enqueue(de);const{part:Q}=de;if((Q.type==="text-delta"||Q.type==="reasoning"||Q.type==="source"||Q.type==="tool-call"||Q.type==="tool-result"||Q.type==="tool-call-streaming-start"||Q.type==="tool-call-delta")&&await(R==null?void 0:R({chunk:Q})),Q.type==="error"&&await(j==null?void 0:j({error:Q.error})),Q.type==="text-delta"&&(D+=Q.textDelta,Z+=Q.textDelta,q+=Q.textDelta),Q.type==="reasoning"&&(ne==null?(ne={type:"text",text:Q.textDelta},ue.push(ne)):ne.text+=Q.textDelta),Q.type==="reasoning-signature"){if(ne==null)throw new Tn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});ne.signature=Q.signature,ne=void 0}if(Q.type==="redacted-reasoning"&&ue.push({type:"redacted",data:Q.data}),Q.type==="file"&&ie.push(Q),Q.type==="source"&&(ae.push(Q.source),X.push(Q.source)),Q.type==="tool-call"&&J.push(Q),Q.type==="tool-result"&&ee.push(Q),Q.type==="step-finish"){const xe=n6({text:Z,files:ie,reasoning:ue,tools:u??{},toolCalls:J,toolResults:ee,messageId:Q.messageId,generateMessageId:I}),Fe=De.length;let Ee="done";Fe+1<b&&(w&&Q.finishReason==="length"&&J.length===0?Ee="continue":J.length>0&&ee.length===J.length&&(Ee="tool-result"));const Ge={stepType:ve,text:D,reasoning:Kge(ue),reasoningDetails:ue,files:ie,sources:X,toolCalls:J,toolResults:ee,finishReason:Q.finishReason,usage:Q.usage,warnings:Q.warnings,logprobs:Q.logprobs,request:Q.request,response:{...Q.response,messages:[...B.messages,...xe]},providerMetadata:Q.experimental_providerMetadata,experimental_providerMetadata:Q.experimental_providerMetadata,isContinued:Q.isContinued};await($==null?void 0:$(Ge)),De.push(Ge),J=[],ee=[],D="",X=[],ue=[],ie=[],ne=void 0,Ee!=="done"&&(ve=Ee),Ee!=="continue"&&(B.messages.push(...xe),Z="")}Q.type==="finish"&&(B.id=Q.response.id,B.timestamp=Q.response.timestamp,B.modelId=Q.response.modelId,B.headers=Q.response.headers,fe=Q.usage,te=Q.finishReason)},async flush(de){var se;try{if(De.length===0)return;const Q=De[De.length-1];Te.warningsPromise.resolve(Q.warnings),Te.requestPromise.resolve(Q.request),Te.responsePromise.resolve(Q.response),Te.toolCallsPromise.resolve(Q.toolCalls),Te.toolResultsPromise.resolve(Q.toolResults),Te.providerMetadataPromise.resolve(Q.experimental_providerMetadata),Te.reasoningPromise.resolve(Q.reasoning),Te.reasoningDetailsPromise.resolve(Q.reasoningDetails);const xe=te??"unknown",Fe=fe??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Te.finishReasonPromise.resolve(xe),Te.usagePromise.resolve(Fe),Te.textPromise.resolve(q),Te.sourcesPromise.resolve(ae),Te.filesPromise.resolve(Q.files),Te.stepsPromise.resolve(De),await(F==null?void 0:F({finishReason:xe,logprobs:void 0,usage:Fe,text:q,reasoning:Q.reasoning,reasoningDetails:Q.reasoningDetails,files:Q.files,sources:Q.sources,toolCalls:Q.toolCalls,toolResults:Q.toolResults,request:(se=Q.request)!=null?se:{},response:Q.response,warnings:Q.warnings,providerMetadata:Q.providerMetadata,experimental_providerMetadata:Q.experimental_providerMetadata,steps:De})),Ae.setAttributes(wh({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>{var Ee;return(Ee=Q.toolCalls)!=null&&Ee.length?JSON.stringify(Q.toolCalls):void 0}},"ai.usage.promptTokens":Fe.promptTokens,"ai.usage.completionTokens":Fe.completionTokens}}))}catch(Q){de.error(Q)}finally{Ae.end()}}}),Ce=jge();this.addStream=Ce.addStream,this.closeStream=Ce.close;let Pe=Ce.stream;for(const de of m)Pe=Pe.pipeThrough(de({tools:u,stopStream(){Ce.terminate()}}));this.baseStream=Pe.pipeThrough(r0e(x)).pipeThrough(Ne);const{maxRetries:Qe,retry:Le}=Ume({maxRetries:a}),Ie=Gme(t),z=Hme({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Qe}}),Se=Cge({prompt:{system:(G=x==null?void 0:x.injectIntoSystemPrompt({system:s,model:e}))!=null?G:s,prompt:o,messages:l},tools:u}),Te=this;JC({name:"ai.streamText",attributes:wh({telemetry:t,attributes:{...XC({operationId:"ai.streamText",telemetry:t}),...z,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:Ie,endWhenDone:!1,fn:async de=>{Ae=de;async function se({currentStep:Q,responseMessages:xe,usage:Fe,stepType:Ee,previousStepText:Ge,hasLeadingWhitespace:Nt,messageId:it}){var St;const Ft=xe.length===0?Se.type:"messages",Dt=[...Se.messages,...xe],Zt=await ige({prompt:{type:Ft,system:Se.system,messages:Dt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(St=e.supportsUrl)==null?void 0:St.bind(e)}),ye={type:"regular",...$ge({tools:u,toolChoice:d,activeTools:y})},{result:{stream:O,warnings:K,rawResponse:he,request:je},doStreamSpan:be,startTimestampMs:ke}=await Le(()=>JC({name:"ai.streamText.doStream",attributes:wh({telemetry:t,attributes:{...XC({operationId:"ai.streamText.doStream",telemetry:t}),...z,"ai.prompt.format":{input:()=>Ft},"ai.prompt.messages":{input:()=>JSON.stringify(Zt)},"ai.prompt.tools":{input:()=>{var Rt;return(Rt=ye.tools)==null?void 0:Rt.map(Lt=>JSON.stringify(Lt))}},"ai.prompt.toolChoice":{input:()=>ye.toolChoice!=null?JSON.stringify(ye.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ie,endWhenDone:!1,fn:async Rt=>({startTimestampMs:E(),doStreamSpan:Rt,result:await e.doStream({mode:ye,...cge(r),inputFormat:Ft,responseFormat:x==null?void 0:x.responseFormat({model:e}),prompt:Zt,providerMetadata:S,abortSignal:i,headers:n})})})),le=Qge({tools:u,generatorStream:O,toolCallStreaming:h,tracer:Ie,telemetry:t,system:s,messages:Dt,repairToolCall:v,abortSignal:i}),ft=je??{},vt=[],P=[],Be=[],nt=[];let ge,Oe="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Ot,me=!0,V="",H=Ee==="continue"?Ge:"",W,pe={id:k(),timestamp:C(),modelId:e.modelId},Re="",He=!1,pt=!0,Wt=!1;async function ut({controller:Rt,chunk:Lt}){Rt.enqueue(Lt),V+=Lt.textDelta,H+=Lt.textDelta,He=!0,Wt=Lt.textDelta.trimEnd()!==Lt.textDelta}Te.addStream(le.pipeThrough(new TransformStream({async transform(Rt,Lt){var Qt,An,Kn;if(me){const _r=E()-ke;me=!1,be.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":_r}),be.setAttributes({"ai.response.msToFirstChunk":_r}),Lt.enqueue({type:"step-start",messageId:it,request:ft,warnings:K??[]})}if(Rt.type==="text-delta"&&Rt.textDelta.length===0)return;const xr=Rt.type;switch(xr){case"text-delta":{if(w){const _r=pt&&Nt?Rt.textDelta.trimStart():Rt.textDelta;if(_r.length===0)break;pt=!1,Re+=_r;const Fn=zge(Re);Fn!=null&&(Re=Fn.suffix,await ut({controller:Lt,chunk:{type:"text-delta",textDelta:Fn.prefix+Fn.whitespace}}))}else await ut({controller:Lt,chunk:Rt});break}case"reasoning":{Lt.enqueue(Rt),ge==null?(ge={type:"text",text:Rt.textDelta},Be.push(ge)):ge.text+=Rt.textDelta;break}case"reasoning-signature":{if(Lt.enqueue(Rt),ge==null)throw new Yge({chunk:Rt,message:"reasoning-signature without reasoning"});ge.signature=Rt.signature,ge=void 0;break}case"redacted-reasoning":{Lt.enqueue(Rt),Be.push({type:"redacted",data:Rt.data});break}case"tool-call":{Lt.enqueue(Rt),vt.push(Rt);break}case"tool-result":{Lt.enqueue(Rt),P.push(Rt);break}case"response-metadata":{pe={id:(Qt=Rt.id)!=null?Qt:pe.id,timestamp:(An=Rt.timestamp)!=null?An:pe.timestamp,modelId:(Kn=Rt.modelId)!=null?Kn:pe.modelId};break}case"finish":{Ke=Rt.usage,Oe=Rt.finishReason,Ot=Rt.experimental_providerMetadata,W=Rt.logprobs;const _r=E()-ke;be.addEvent("ai.stream.finish"),be.setAttributes({"ai.response.msToFinish":_r,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/_r});break}case"file":{nt.push(Rt),Lt.enqueue(Rt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Lt.enqueue(Rt);break}case"error":{Lt.enqueue(Rt),Oe="error";break}default:{const _r=xr;throw new Error(`Unknown chunk type: ${_r}`)}}},async flush(Rt){const Lt=vt.length>0?JSON.stringify(vt):void 0;let Qt="done";Q+1<b&&(w&&Oe==="length"&&vt.length===0?Qt="continue":vt.length>0&&P.length===vt.length&&(Qt="tool-result")),w&&Re.length>0&&(Qt!=="continue"||Ee==="continue"&&!He)&&(await ut({controller:Rt,chunk:{type:"text-delta",textDelta:Re}}),Re="");try{be.setAttributes(wh({telemetry:t,attributes:{"ai.response.finishReason":Oe,"ai.response.text":{output:()=>V},"ai.response.toolCalls":{output:()=>Lt},"ai.response.id":pe.id,"ai.response.model":pe.modelId,"ai.response.timestamp":pe.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[Oe],"gen_ai.response.id":pe.id,"gen_ai.response.model":pe.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{be.end()}Rt.enqueue({type:"step-finish",finishReason:Oe,usage:Ke,providerMetadata:Ot,experimental_providerMetadata:Ot,logprobs:W,request:ft,response:{...pe,headers:he==null?void 0:he.headers},warnings:K,isContinued:Qt==="continue",messageId:it});const An=Tge(Fe,Ke);if(Qt==="done")Rt.enqueue({type:"finish",finishReason:Oe,usage:An,providerMetadata:Ot,experimental_providerMetadata:Ot,logprobs:W,response:{...pe,headers:he==null?void 0:he.headers}}),Te.closeStream();else{if(Ee==="continue"){const Kn=xe[xe.length-1];typeof Kn.content=="string"?Kn.content+=V:Kn.content.push({text:V,type:"text"})}else xe.push(...n6({text:V,files:nt,reasoning:Be,tools:u??{},toolCalls:vt,toolResults:P,messageId:it,generateMessageId:I}));await se({currentStep:Q+1,responseMessages:xe,usage:An,stepType:Qt,previousStepText:H,hasLeadingWhitespace:Wt,messageId:Qt==="continue"?it:I()})}}})))}await se({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:I()})}}).catch(de=>{Te.addStream(new ReadableStream({start(se){se.enqueue({type:"error",error:de}),se.close()}})),Te.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return T2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return T2(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new Mge;return T2(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,s)=>{const o=i.type;switch(o){case"text-delta":{s.enqueue(ni("text",i.textDelta));break}case"reasoning":{n&&s.enqueue(ni("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&s.enqueue(ni("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&s.enqueue(ni("reasoning_signature",{signature:i.signature}));break}case"file":{s.enqueue(ni("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&s.enqueue(ni("source",i.source));break}case"tool-call-streaming-start":{s.enqueue(ni("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{s.enqueue(ni("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{s.enqueue(ni("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{s.enqueue(ni("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{s.enqueue(ni("error",e(i.error)));break}case"step-start":{s.enqueue(ni("start_step",{messageId:i.messageId}));break}case"step-finish":{s.enqueue(ni("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&s.enqueue(ni("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u}={}){ZO({response:e,status:t,statusText:n,headers:WO(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){ZO({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:WO(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?pA(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:Bw(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:Bw(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};function i0e(e,t){if(t.length===0)return null;const n=e.indexOf(t);if(n!==-1)return n;for(let r=e.length-1;r>=0;r--){const a=e.substring(r);if(t.startsWith(a))return r}return null}function s0e({tagName:e,separator:t=`
`,startWithReasoning:n=!1}){const r=`<${e}>`,a=`</${e}>`;return{middlewareVersion:"v1",wrapGenerate:async({doGenerate:i})=>{const{text:s,...o}=await i();if(s==null)return{text:s,...o};const l=n?r+s:s,u=new RegExp(`${r}(.*?)${a}`,"gs"),d=Array.from(l.matchAll(u));if(!d.length)return{text:l,...o};const h=d.map(y=>y[1]).join(t);let m=l;for(let y=d.length-1;y>=0;y--){const v=d[y],b=m.slice(0,v.index),x=m.slice(v.index+v[0].length);m=b+(b.length>0&&x.length>0?t:"")+x}return{...o,text:m,reasoning:h}},wrapStream:async({doStream:i})=>{const{stream:s,...o}=await i();let l=!0,u=!0,d=!1,h=n,m="";return{stream:s.pipeThrough(new TransformStream({transform:(y,v)=>{if(y.type!=="text-delta"){v.enqueue(y);return}m+=y.textDelta;function b(x){if(x.length>0){const w=d&&(h?!l:!u)?t:"";v.enqueue({type:h?"reasoning":"text-delta",textDelta:w+x}),d=!1,h?l=!1:u=!1}}do{const x=h?a:r,w=i0e(m,x);if(w==null){b(m),m="";break}if(b(m.slice(0,w)),w+x.length<=m.length)m=m.slice(w+x.length),h=!h,d=!0;else{m=m.slice(w);break}}while(!0)}})),...o}}}}var o0e=({model:e,middleware:t,modelId:n,providerId:r})=>x9(t).reverse().reduce((a,i)=>l0e({model:a,middleware:i,modelId:n,providerId:r}),e),l0e=({model:e,middleware:{transformParams:t,wrapGenerate:n,wrapStream:r},modelId:a,providerId:i})=>{var s;async function o({params:l,type:u}){return t?await t({params:l,type:u}):l}return{specificationVersion:"v1",provider:i??e.provider,modelId:a??e.modelId,defaultObjectGenerationMode:e.defaultObjectGenerationMode,supportsImageUrls:e.supportsImageUrls,supportsUrl:(s=e.supportsUrl)==null?void 0:s.bind(e),supportsStructuredOutputs:e.supportsStructuredOutputs,async doGenerate(l){const u=await o({params:l,type:"generate"}),d=async()=>e.doGenerate(u);return n?n({doGenerate:d,doStream:async()=>e.doStream(u),params:u,model:e}):d()},async doStream(l){const u=await o({params:l,type:"stream"}),d=async()=>e.doGenerate(u),h=async()=>e.doStream(u);return r?r({doGenerate:d,doStream:h,params:u,model:e}):h()}}},c0e=U.object({name:U.string(),version:U.string()}).passthrough(),mA=U.object({_meta:U.optional(U.object({}).passthrough())}).passthrough(),s0=mA,u0e=U.object({method:U.string(),params:U.optional(mA)}),d0e=U.object({experimental:U.optional(U.object({}).passthrough()),logging:U.optional(U.object({}).passthrough()),prompts:U.optional(U.object({listChanged:U.optional(U.boolean())}).passthrough()),resources:U.optional(U.object({subscribe:U.optional(U.boolean()),listChanged:U.optional(U.boolean())}).passthrough()),tools:U.optional(U.object({listChanged:U.optional(U.boolean())}).passthrough())}).passthrough();s0.extend({protocolVersion:U.string(),capabilities:d0e,serverInfo:c0e,instructions:U.optional(U.string())});var f0e=s0.extend({nextCursor:U.optional(U.string())}),h0e=U.object({name:U.string(),description:U.optional(U.string()),inputSchema:U.object({type:U.literal("object"),properties:U.optional(U.object({}).passthrough())}).passthrough()}).passthrough();f0e.extend({tools:U.array(h0e)});var p0e=U.object({type:U.literal("text"),text:U.string()}).passthrough(),m0e=U.object({type:U.literal("image"),data:U.string().base64(),mimeType:U.string()}).passthrough(),_9=U.object({uri:U.string(),mimeType:U.optional(U.string())}).passthrough(),g0e=_9.extend({text:U.string()}),y0e=_9.extend({blob:U.string().base64()}),b0e=U.object({type:U.literal("resource"),resource:U.union([g0e,y0e])}).passthrough();s0.extend({content:U.array(U.union([p0e,m0e,b0e])),isError:U.boolean().default(!1).optional()}).or(s0.extend({toolResult:U.unknown()}));var u1="2.0",v0e=U.object({jsonrpc:U.literal(u1),id:U.union([U.string(),U.number().int()])}).merge(u0e).strict(),w0e=U.object({jsonrpc:U.literal(u1),id:U.union([U.string(),U.number().int()]),result:s0}).strict(),x0e=U.object({jsonrpc:U.literal(u1),id:U.union([U.string(),U.number().int()]),error:U.object({code:U.number().int(),message:U.string(),data:U.optional(U.unknown())})}).strict(),_0e=U.object({jsonrpc:U.literal(u1)}).merge(U.object({method:U.string(),params:U.optional(mA)})).strict();U.union([v0e,_0e,w0e,x0e]);var S0e={};hA(S0e,{mergeIntoDataStream:()=>k0e,toDataStream:()=>E0e,toDataStreamResponse:()=>C0e});function S9(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function gA(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&r6((a=n.data)==null?void 0:a.chunk,r);return}r6(n,r)}})).pipeThrough(S9(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(ni("text",n))}}))}function E0e(e,t){return gA(e,t).pipeThrough(new TextEncoderStream)}function C0e(e,t){var n;const r=gA(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,s=a?pA(a.stream,r):r;return new Response(s,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:Bw(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function k0e(e,t){t.dataStream.merge(gA(e,t.callbacks))}function r6(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var T0e={};hA(T0e,{mergeIntoDataStream:()=>R0e,toDataStream:()=>A0e,toDataStreamResponse:()=>N0e});function yA(e,t){const n=I0e();return VG(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(S9(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(ni("text",r))}}))}function A0e(e,t){return yA(e,t).pipeThrough(new TextEncoderStream)}function N0e(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,s=yA(e,i).pipeThrough(new TextEncoderStream),o=a?pA(a.stream,s):s;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:Bw(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function R0e(e,t){t.dataStream.merge(yA(e,t.callbacks))}function I0e(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class j0e{static async executeInteraction(t,n,r){let a,i=!1;try{a=await n0e(n);for await(const s of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(s.type){case"text-delta":r.onChunk(s.textDelta);break;case"tool-call":r.onToolCall(s);break;case"tool-result":r.onToolResult(s);break;case"finish":i=!0,r.onFinish({finishReason:s.finishReason,usage:s.usage,providerMetadata:s.providerMetadata});break;case"error":r.onError(new Error(`AI Stream Error Part: ${s.error instanceof Error?s.error.message:s.error}`));return;default:break}}!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(s){console.error(`[AIService] Error during streamText call for ${t}:`,s),s instanceof Error&&s.name==="AbortError"||r.onError(s instanceof Error?s:new Error(String(s)))}finally{console.log(`[AIService] Stream processing loop finished for ${t}.`)}}}const jv={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,async startInteraction(e,t,n,r="message.user_assistant"){var G,D,Z,q,ue,ie,ne,X,ae;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const a=await bC($v.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(a===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const i=a&&typeof a=="object"?a.prompt:e,s=_i(),o=new AbortController;this._activeControllers.set(s,o),this._streamingToolData.set(s,{calls:[],results:[]}),this._firstChunkTimestamps.delete(s),this._interactionStartTimes.delete(s);const l=qn.getState(),d=l.interactions.filter(B=>B.conversationId===t),h=r==="conversation.title_generation"?-1:d.reduce((B,J)=>Math.max(B,J.index),-1)+1,m=r==="conversation.title_generation"?null:d.length>0?d[d.length-1].id:null,y=performance.now();this._interactionStartTimes.set(s,y);const v={id:s,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...i.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:h,parentId:m};r!=="conversation.title_generation"?(l._addInteractionToState(v),l._addStreamingId(s)):(l._addInteractionToState(v),l._addStreamingId(s),console.log(`[InteractionService] Added title generation interaction ${s} to state.`)),xt.saveInteraction({...v}).catch(B=>{console.error(`[InteractionService] Failed initial persistence for ${s}`,B)}),kt.emit(Et.INTERACTION_STARTED,{interactionId:s,conversationId:t,type:v.type});const b=(G=i.metadata)==null?void 0:G.modelId;if(!b)return this._finalizeInteraction(s,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:x,modelId:w}=cc(b);if(!x||!w)return this._finalizeInteraction(s,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const S=$n.getState().dbProviderConfigs.find(B=>B.id===x);if(!S)return this._finalizeInteraction(s,"ERROR",new Error(`Provider configuration not found for ID: ${x}`),r),null;const E=$n.getState().getApiKeyForProvider(x),C=B8(S,w,E);if(!C)return this._finalizeInteraction(s,"ERROR",new Error(`Failed to instantiate model instance for ${b} from provider ${S.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const k=r!=="conversation.title_generation"?(((D=i.metadata)==null?void 0:D.enabledTools)??[]).reduce((B,J)=>{const te=Rr.getState().getRegisteredTools()[J];if(te!=null&&te.implementation){const fe={...te.definition};fe.execute=async ve=>{const De=qn.getState().currentConversationId,Ae=De?mn.getState().getConversationById(De):null,Ne=(Ae==null?void 0:Ae.projectId)??"orphan";let Ce;try{Ce=await lo.getState().initializeVFS(Ne,{force:!0})}catch(Pe){return{_isError:!0,error:`Filesystem error: ${Pe.message}`}}try{const Pe=uJ(),Qe=te.definition.parameters.parse(ve),Le=te.implementation,Ie={...Pe,fsInstance:Ce};return await Le(Qe,Ie)}catch(Pe){const Qe=Pe instanceof Error?Pe.message:String(Pe);return Pe instanceof U.ZodError?{_isError:!0,error:`Invalid arguments: ${Pe.errors.map(Le=>`${Le.path.join(".")} (${Le.message})`).join(", ")}`}:{_isError:!0,error:Qe}}},B[J]=fe}return B},{}):void 0,I=((Z=i.parameters)==null?void 0:Z.maxSteps)??lr.getState().toolMaxSteps,R=s0e({tagName:"reasoning"}),F={model:o0e({model:C,middleware:R}),messages:i.messages,abortSignal:o.signal,system:i.system,temperature:(q=i.parameters)==null?void 0:q.temperature,maxTokens:(ue=i.parameters)==null?void 0:ue.max_tokens,topP:(ie=i.parameters)==null?void 0:ie.top_p,topK:(ne=i.parameters)==null?void 0:ne.top_k,presencePenalty:(X=i.parameters)==null?void 0:X.presence_penalty,frequencyPenalty:(ae=i.parameters)==null?void 0:ae.frequency_penalty,maxSteps:I,...k&&Object.keys(k).length>0&&{tools:k},toolChoice:i.toolChoice??(k&&Object.keys(k).length>0?"auto":"none")},$={onChunk:B=>this._handleChunk(s,B),onToolCall:B=>this._handleToolCall(s,B),onToolResult:B=>this._handleToolResult(s,B),onFinish:B=>this._handleFinish(s,B,r),onError:B=>this._handleError(s,B,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${s}`),j0e.executeInteraction(s,F,$).catch(B=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${s}:`,B),this._handleError(s,B instanceof Error?B:new Error("Failed to start AI execution"),r)}),s},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),Ye.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=qn.getState(),r=n.interactions.find(a=>a.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await bC($v.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;qn.getState().appendInteractionResponseChunk(e,a),kt.emit(Et.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),qn.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),qn.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",a){var C;const i=qn.getState(),s=i.interactions.find(k=>k.id===e);if(!s||s.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=i.activeStreamBuffers[e]??"",l=this._streamingToolData.get(e)||{calls:[],results:[]},u=(s==null?void 0:s.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}`);const d=performance.now(),h=this._interactionStartTimes.get(e),m=this._firstChunkTimestamps.get(e),y=h?Math.round(d-h):void 0,v=h&&m?Math.round(m-h):void 0,b=a==null?void 0:a.reasoning,x={status:t,endedAt:new Date,response:o||null,metadata:{...u,...(a==null?void 0:a.usage)&&{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens,totalTokens:a.usage.totalTokens},...(a==null?void 0:a.providerMetadata)&&{providerMetadata:a.providerMetadata},toolCalls:l.calls,toolResults:l.results,reasoning:b,timeToFirstToken:v,generationTime:y,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&x.response&&typeof x.response=="string"){const k=x.response.trim().replace(/^"|"$/g,"");k&&s&&(console.log(`[InteractionService] Updating conversation ${s.conversationId} title to: "${k}"`),mn.getState().updateConversation(s.conversationId,{title:k}).catch(I=>console.error("Failed to update conversation title:",I)))}i._updateInteractionInState(e,x),i._removeStreamingId(e);const w=qn.getState().interactions.find(k=>k.id===e);w?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((C=w.response)==null?void 0:C.length)??0}`),xt.saveInteraction({...w}).catch(k=>{console.error(`[InteractionService] Failed final persistence for ${e}`,k)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let S=[],E=[];try{S=l.calls.map(k=>JSON.parse(k)),E=l.results.map(k=>JSON.parse(k))}catch(k){console.error("[InteractionService] Failed to parse tool strings for event emitter:",k)}kt.emit(Et.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:S,toolResults:E}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Do=(e,t)=>{kt.emit(Et.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},Ci=Ds(Ms((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Do("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Do("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Do("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Do("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Do("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Do("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Do("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Do("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Do("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Do("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),kt.emit(Et.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),kt.emit(Et.PROMPT_PARAMS_CHANGED,{params:r}))}}))),oc=Ds(Ms((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([xt.loadRules(),xt.loadTags(),xt.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:a,isLoading:!1})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),Ye.error("Failed to load rules and tags.")}},addRule:async n=>{const r=_i(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.rules.push(i),s.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{return await xt.saveRule(i),Ye.success(`Rule "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding rule",s),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),Ye.error("Failed to save new rule."),s}},updateRule:async(n,r)=>{const a=t().rules.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.rules.findIndex(l=>l.id===n);o!==-1&&(s.rules[o]=i,s.rules.sort((l,u)=>l.name.localeCompare(u.name)))});try{await xt.saveRule(i),Ye.success(`Rule "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating rule",s),e(o=>{const l=o.rules.findIndex(u=>u.id===n);l!==-1&&(o.rules[l]=a,o.rules.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save rule update"}),Ye.error("Failed to save rule update."),s}},deleteRule:async n=>{const r=t().rules.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.ruleId===n);e(i=>({rules:i.rules.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.ruleId!==n)}));try{await xt.deleteRule(n),Ye.success(`Rule "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting rule",i),e(s=>{s.rules.push(r),s.rules.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete rule"}),Ye.error("Failed to delete rule."),i}},addTag:async n=>{const r=_i(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.tags.push(i),s.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{return await xt.saveTag(i),Ye.success(`Tag "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding tag",s),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),Ye.error("Failed to save new tag."),s}},updateTag:async(n,r)=>{const a=t().tags.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.tags.findIndex(l=>l.id===n);o!==-1&&(s.tags[o]=i,s.tags.sort((l,u)=>l.name.localeCompare(u.name)))});try{await xt.saveTag(i),Ye.success(`Tag "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating tag",s),e(o=>{const l=o.tags.findIndex(u=>u.id===n);l!==-1&&(o.tags[l]=a,o.tags.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save tag update"}),Ye.error("Failed to save tag update."),s}},deleteTag:async n=>{const r=t().tags.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.tagId===n);e(i=>({tags:i.tags.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.tagId!==n)}));try{await xt.deleteTag(n),Ye.success(`Tag "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting tag",i),e(s=>{s.tags.push(r),s.tags.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete tag"}),Ye.error("Failed to delete tag."),i}},linkTagToRule:async(n,r)=>{const a=`${n}-${r}`;if(t().tagRuleLinks.find(o=>o.id===a))return;const s={id:a,tagId:n,ruleId:r};e(o=>{o.tagRuleLinks.push(s)});try{await xt.saveTagRuleLink(s)}catch(o){throw console.error("RulesStore: Error linking tag to rule",o),e(l=>({error:"Failed to link tag and rule",tagRuleLinks:l.tagRuleLinks.filter(u=>u.id!==a)})),Ye.error("Failed to link tag and rule."),o}},unlinkTagFromRule:async(n,r)=>{const a=`${n}-${r}`,i=t().tagRuleLinks.find(s=>s.id===a);if(i){e(s=>({tagRuleLinks:s.tagRuleLinks.filter(o=>o.id!==a)}));try{await xt.deleteTagRuleLink(a)}catch(s){throw console.error("RulesStore: Error unlinking tag from rule",s),e(o=>{o.tagRuleLinks.push(i),o.error="Failed to unlink tag and rule"}),Ye.error("Failed to unlink tag and rule."),s}}},getRulesForTag:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.tagId===n).map(i=>i.ruleId));return r.rules.filter(i=>a.has(i.id))},getTagsForRule:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.ruleId===n).map(i=>i.tagId));return r.tags.filter(i=>a.has(i.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(a=>r.has(a.id))}}))),a6={async submitPrompt(e){var q,ue,ie,ne,X,ae;console.log("[ConversationService] submitPrompt called",e);const t=qn.getState(),n=ai.getState(),r=Ci.getState(),a=mn.getState(),i=oc.getState(),s=lr.getState(),o=t.currentConversationId;if(!o){Ye.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const l=a.getConversationById(o),u=(l==null?void 0:l.projectId)??null,h=t.interactions.filter(B=>B.conversationId===o).length===0&&s.autoTitleEnabled&&((q=e.metadata)==null?void 0:q.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,y=t.interactions.filter(B=>B.status==="COMPLETED"&&B.type==="message.user_assistant"),v=q3(y);let b=e.content;const x=[],w=((ue=e.metadata)==null?void 0:ue.activeTagIds)??[],S=((ie=e.metadata)==null?void 0:ie.activeRuleIds)??[],E=new Set(S);w.forEach(B=>{i.getRulesForTag(B).forEach(J=>E.add(J.id))});const C=i.getRulesByIds(Array.from(E))||[],k=C.filter(B=>B.type==="system").map(B=>B.content),I=C.filter(B=>B.type==="before").map(B=>B.content),R=C.filter(B=>B.type==="after").map(B=>B.content);I.length>0&&(b=`${I.join(`
`)}

${b}`),R.length>0&&(b=`${b}

    ${R.join(`
`)}`),b&&x.push({type:"text",text:b});const j=((ne=e.metadata)==null?void 0:ne.attachedFiles)??[];if(j.length>0){const B=await this._processFilesForPrompt(j,o);x.unshift(...B)}x.length>0?v.push({role:"user",content:x}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");const F=(X=e.metadata)==null?void 0:X.turnSystemPrompt,$=n.getEffectiveProjectSettings(u);let G=F??$.systemPrompt??void 0;k.length>0&&(G=`${G?`${G}

        `:""}${k.join(`
`)}`);const D={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(D).forEach(B=>{(D[B]===null||D[B]===void 0)&&delete D[B]});const Z={system:G,messages:v,parameters:D,metadata:{...(({turnSystemPrompt:B,activeTagIds:J,activeRuleIds:ee,autoTitleEnabledForTurn:te,...fe})=>fe)(e.metadata??{}),modelId:r.modelId,attachedFiles:(ae=e.metadata.attachedFiles)==null?void 0:ae.map(({contentBase64:B,contentText:J,...ee})=>ee)}};try{const B=jv.startInteraction(Z,o,e);h&&(console.log("[ConversationService] Triggering asynchronous title generation."),this.generateConversationTitle(o,e,C).catch(J=>{console.error("[ConversationService] Background title generation failed:",J)})),await B}catch(B){throw console.error("[ConversationService] Error starting interaction:",B),Ye.error(`Failed to start interaction: ${B instanceof Error?B.message:String(B)}`),B}},async generateConversationTitle(e,t,n){var o,l;const r=lr.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let a=t.content;if(a.length>r.autoTitlePromptMaxLength&&(a=a.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const u=t.metadata.attachedFiles.map(d=>d.name).join(", ");a+=`

[Attached files: ${u}]`}if(r.autoTitleIncludeRules&&n.length>0){const u=n.map(d=>d.name).join(", ");a+=`

[Active rules: ${u}]`}const i={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:a}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},s={id:_i(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:i.parameters,metadata:{...i.metadata,originalTurnId:t.id}};try{await jv.startInteraction(i,e,s,"conversation.title_generation")}catch(u){console.error("[ConversationService] Error starting title generation interaction:",u)}},async regenerateInteraction(e){var Z,q,ue,ie;console.log("[ConversationService] regenerateInteraction called",e);const t=qn.getState(),n=ai.getState(),r=Ci.getState(),a=mn.getState(),i=oc.getState(),s=t.interactions.find(ne=>ne.id===e);if(!s||!s.prompt){Ye.error("Cannot regenerate: Original interaction data missing.");return}const o=s.prompt,l=s.conversationId,u=a.getConversationById(l),d=(u==null?void 0:u.projectId)??null,h=s.index,m=t.interactions.filter(ne=>ne.conversationId===l&&ne.index<h&&ne.status==="COMPLETED"&&ne.type==="message.user_assistant").sort((ne,X)=>ne.index-X.index),y=q3(m);let v=o.content;const b=[],x=((Z=o.metadata)==null?void 0:Z.activeTagIds)??[],w=((q=o.metadata)==null?void 0:q.activeRuleIds)??[],S=new Set(w);x.forEach(ne=>{i.getRulesForTag(ne).forEach(X=>S.add(X.id))});const E=i.getRulesByIds(Array.from(S))||[],C=E.filter(ne=>ne.type==="before").map(ne=>ne.content),k=E.filter(ne=>ne.type==="after").map(ne=>ne.content);C.length>0&&(v=`${C.join(`
`)}

${v}`),k.length>0&&(v=`${v}

    ${k.join(`
`)}`),v&&b.push({type:"text",text:v});const I=((ue=o.metadata)==null?void 0:ue.attachedFiles)??[];if(I.length>0){const ne=await this._processFilesForPrompt(I,l);b.unshift(...ne)}b.length>0?y.push({role:"user",content:b}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");const R=(ie=o.metadata)==null?void 0:ie.turnSystemPrompt,j=n.getEffectiveProjectSettings(d);let F=R??j.systemPrompt??void 0;const $=E.filter(ne=>ne.type==="system").map(ne=>ne.content);$.length>0&&(F=`${F?`${F}

        `:""}${$.join(`
`)}`);const G={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(G).forEach(ne=>{(G[ne]===null||G[ne]===void 0)&&delete G[ne]});const D={system:F,messages:y,parameters:G,metadata:{...(({turnSystemPrompt:ne,activeTagIds:X,activeRuleIds:ae,autoTitleEnabledForTurn:B,...J})=>J)(o.metadata??{}),modelId:r.modelId,regeneratedFromId:e,attachedFiles:I.map(({contentBase64:ne,contentText:X,...ae})=>ae)}};try{await jv.startInteraction(D,l,o,"message.assistant_regen")}catch(ne){throw console.error("[ConversationService] Error starting regeneration interaction:",ne),Ye.error(`Failed to start regeneration: ${ne instanceof Error?ne.message:String(ne)}`),ne}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=mn.getState().getConversationById(t),s=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(s)}catch{Ye.error(`Filesystem unavailable for key ${s}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let s=null;try{if(i.source==="direct")s=H3(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const o=await uf(i.path,{fsInstance:a});s=H3({...i,contentBytes:o})}else if(i.source==="vfs"&&!a)continue;s&&n.push(s)}catch(o){console.error(`[ConversationService] Error processing file ${i.name}:`,o),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await lo.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}},o0=Ds(Ms((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await xt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),Ye.error(r)}},addDbMod:async n=>{const r=_i(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((s,o)=>s.loadOrder-o.loadOrder)});try{return await xt.saveMod(a),Ye.success(`Mod "${a.name}" added.`),r}catch(i){const s="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=s}),Ye.error(s),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(o=>{i=o.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...o.dbMods[i]},o.dbMods[i]={...o.dbMods[i],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const s=i!==-1?t().dbMods[i]:void 0;if(s)try{await xt.saveMod(s),Ye.success(`Mod "${s.name}" updated.`)}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(u=>{const d=u.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(u.dbMods[d]=a,u.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),u.error=l}),Ye.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(s=>s.id!==n)}));try{await xt.deleteMod(n),Ye.success(`Mod "${a}" deleted.`)}catch(i){const s="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder),o.error=s}),Ye.error(s),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function i6(e){const t=e.id,n=e.name,r=Rr.getState(),a=o0.getState();return{modId:t,modName:n,registerPromptControl:s=>r.registerPromptControl(s),registerChatControl:s=>{const o={...s,status:s.status??(()=>"ready")};return r.registerChatControl(o)},registerTool:(s,o,l)=>(console.log(`[${n}] Registering tool: ${s}`),r.registerTool(t,s,o,l)),on:(s,o)=>(kt.on(s,o),()=>kt.off(s,o)),addMiddleware:(s,o)=>r.registerMiddleware(s,t,o),registerSettingsTab:s=>(a._addSettingsTab(s),()=>a._removeSettingsTab(s.id)),getContextSnapshot:()=>{const s=qn.getState(),o=mn.getState(),l=lr.getState(),u=$n.getState(),{providerId:d}=cc(u.selectedModelId),h=o.selectedItemType==="conversation"?o.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(s.currentConversationId===h?s.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:s.status==="streaming",selectedProviderId:d,selectedModelId:u.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(s,o)=>{Ye[s](`[${n}] ${o}`)},log:(s,...o)=>{console[s](`[Mod: ${n}]`,...o)}}}async function O0e(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,s=null;try{if(i=i6(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const u=await fetch(r.sourceUrl);if(!u.ok)throw new Error(`Failed to fetch mod script: ${u.status} ${u.statusText}`);a=await u.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(u){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,u),u}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){s=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),Ye.error(`Error loading mod "${r.name}": ${s instanceof Error?s.message:s}`)}i||(i=i6(r));const o={id:r.id,name:r.name,api:i,error:s??void 0};return kt.emit(o.error?Et.MOD_ERROR:Et.MOD_LOADED,{id:r.id,name:r.name,error:o.error}),o}));return kt.emit(Et.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var D0e=(e,t,n,r,a,i,s,o)=>{let l=document.documentElement,u=["light","dark"];function d(y){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",x=b&&i?a.map(w=>i[w]||w):a;b?(l.classList.remove(...x),l.classList.add(i&&i[y]?i[y]:y)):l.setAttribute(v,y)}),h(y)}function h(y){o&&u.includes(y)&&(l.style.colorScheme=y)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let y=localStorage.getItem(t)||n,v=s&&y==="system"?m():y;d(v)}catch{}},M0e=T.createContext(void 0),P0e={setTheme:e=>{},themes:[]},F0e=()=>{var e;return(e=T.useContext(M0e))!=null?e:P0e};T.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:s,themes:o,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,t,i,e,o,s,r,a]).slice(1,-1);return T.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${D0e.toString()})(${d})`}})});const L0e=({...e})=>{const{theme:t="system"}=F0e();return p.jsx(sJ,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function $u({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:_t("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const E9=T.memo(T.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...s},o)=>{const l=T.useRef(null),[u,d]=T.useState(e);T.useImperativeHandle(o,()=>({getValue:()=>u,focus:()=>{var y;return(y=l.current)==null?void 0:y.focus()}}));const h=y=>{if(y.key==="Enter"&&!y.shiftKey&&!n){y.preventDefault();const v=Jl.getState().attachedFilesMetadata.length>0;(u.trim().length>0||v)&&(t(),d(""),i&&i(""))}},m=y=>{const v=y.target.value;d(v),i&&i(v)};return T.useEffect(()=>{const y=l.current;if(y){y.style.height="auto";const v=y.scrollHeight,b=250;y.style.height=`${Math.min(v,b)}px`,y.style.overflowY=v>b?"auto":"hidden"}},[u]),T.useEffect(()=>{d(e),i&&i(e)},[e,i]),p.jsx($u,{ref:l,value:u,onChange:m,onKeyDown:h,disabled:n,placeholder:r,rows:1,className:_t("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...s})}));E9.displayName="InputArea";const $0e=({controls:e=[]})=>{const[t,n]=T.useState(!0),[r,a]=T.useState(!1),i=T.useRef(null),s=mn(te=>te.selectedItemId),o=mn(te=>te.selectedItemType),l=mn(te=>te.loadSidebarItems),u=mn(te=>te.getConversationById),{getEffectiveProjectSettings:d}=ai(dn(te=>({projects:te.projects,getProjectById:te.getProjectById,getEffectiveProjectSettings:te.getEffectiveProjectSettings}))),{interactions:h,status:m}=qn(dn(te=>({interactions:te.interactions,status:te.status}))),{globalError:y,isSidebarCollapsed:v,isChatControlPanelOpen:b,isProjectSettingsModalOpen:x,isVfsModalOpen:w}=os(dn(te=>({globalError:te.globalError,isSidebarCollapsed:te.isSidebarCollapsed,isChatControlPanelOpen:te.isChatControlPanelOpen,isProjectSettingsModalOpen:te.isProjectSettingsModalOpen,isVfsModalOpen:te.isVfsModalOpen}))),S=Rr(dn(te=>Object.values(te.chatControls))),{loadDbMods:E,setLoadedMods:C}=o0(dn(te=>({loadDbMods:te.loadDbMods,setLoadedMods:te.setLoadedMods}))),{loadInitialData:k}=$n(dn(te=>({loadInitialData:te.loadInitialData}))),{loadSettings:I}=lr(dn(te=>({loadSettings:te.loadSettings}))),{setVfsKey:R}=lo(dn(te=>({setVfsKey:te.setVfsKey}))),{initializePromptState:j}=Ci(dn(te=>({initializePromptState:te.initializePromptState}))),{loadRulesAndTags:F}=oc(dn(te=>({loadRulesAndTags:te.loadRulesAndTags}))),$=T.useCallback(()=>{a(te=>!te)},[]);T.useEffect(()=>{r&&a(!1)},[s,o]);const G=T.useCallback(()=>{requestAnimationFrame(()=>{var te;(te=i.current)==null||te.focus()})},[]);T.useEffect(()=>{let te=!0;return(async()=>{var ve;console.log("LiteChat: Starting initialization..."),n(!0);try{if(console.log("LiteChat: Loading core data..."),await I(),!te||(console.log("LiteChat: Settings loaded."),await k(),!te)||(console.log("LiteChat: Provider data loaded."),await F(),!te)||(console.log("LiteChat: Rules and Tags loaded."),await l(),!te)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),e.forEach(Pe=>{try{Pe()}catch(Qe){console.error("LiteChat: Error running registration function:",Qe)}}),console.log("LiteChat: Core controls and tools registered."),!te)||(console.log("LiteChat: Loading mods..."),await E(),!te))return;console.log("LiteChat: DB Mods loaded.");const De=o0.getState().dbMods;console.log(`LiteChat: Processing ${De.length} mods...`);const Ae=await O0e(De);if(!te)return;C(Ae),console.log(`LiteChat: ${Ae.length} mods processed.`);const Ne=o==="project"?s:o==="conversation"?((ve=u(s))==null?void 0:ve.projectId)??null:null,Ce=d(Ne);j(Ce),console.log("LiteChat: Initial prompt state initialized.",Ce)}catch(De){console.error("LiteChat: Initialization failed:",De),Ye.error(`Initialization failed: ${De instanceof Error?De.message:String(De)}`),os.getState().setGlobalError("Initialization failed.")}finally{te&&(console.log("LiteChat: Initialization complete."),n(!1))}})(),()=>{te=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[e]);const D=T.useRef({itemId:null,itemType:null});T.useEffect(()=>{var fe;if(t)return;const te={itemId:s,itemType:o};if(te.itemId!==D.current.itemId||te.itemType!==D.current.itemType){const ve=o==="project"?s:o==="conversation"?((fe=u(s))==null?void 0:fe.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${s}, Type: ${o}). Calculating effective settings for Project ID: ${ve}`);const De=d(ve);j(De),console.log("[LiteChat Effect] Prompt state updated based on context change.",De),D.current=te,te.itemType==="conversation"&&G()}},[s,o,u,d,j,t,G]),T.useEffect(()=>{let te=null;if(w||o==="project"){if(o==="project")te=s;else if(o==="conversation"){const fe=mn.getState().getConversationById(s);te=(fe==null?void 0:fe.projectId)??"orphan"}else te="orphan";console.log(`[LiteChat Effect] VFS Context Required. Setting target key: ${te}`)}else te=null,console.log("[LiteChat Effect] VFS Context Not Required. Setting target key: null");lo.getState().vfsKey!==te&&R(te)},[w,s,o,R]);const Z=T.useCallback(async te=>{var Ae;const fe=mn.getState();let ve=fe.selectedItemType==="conversation"?fe.selectedItemId:null;const De=fe.selectedItemType==="project"?fe.selectedItemId:fe.selectedItemType==="conversation"?((Ae=fe.getConversationById(fe.selectedItemId))==null?void 0:Ae.projectId)??null:null;if(!ve){console.log("LiteChat: No conversation selected, creating new one...");try{const Ne=await fe.addConversation({title:"New Chat",projectId:De});await fe.selectItem(Ne,"conversation"),ve=mn.getState().selectedItemId,ve!==Ne&&console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),console.log(`LiteChat: New conversation created (${ve}), selected.`)}catch(Ne){console.error("LiteChat: Failed to create new conversation",Ne),Ye.error("Failed to start new chat.");return}}console.log("LiteChat: Submitting turn data to ConversationService...");try{const Ne=Ci.getState(),Ce={...te,metadata:{...te.metadata,modelId:Ne.modelId}};await a6.submitPrompt(Ce),console.log("LiteChat: ConversationService processing initiated."),G()}catch(Ne){console.error("LiteChat: Error submitting prompt:",Ne),G()}},[G]),q=T.useCallback(async te=>{console.log(`LiteChat: Regenerating interaction ${te}`);try{await a6.regenerateInteraction(te),console.log(`LiteChat: ConversationService regeneration initiated for ${te}.`),G()}catch(fe){console.error("LiteChat: Error regenerating interaction:",fe),G()}},[G]),ue=T.useCallback(te=>{console.log(`LiteChat: Stopping interaction ${te}`),jv.abortInteraction(te),G()},[G]),ie=T.useMemo(()=>S.filter(te=>(te.panel??"main")==="sidebar"&&(te.show?te.show():!0)).map(te=>te),[S]),ne=T.useMemo(()=>S.filter(te=>te.panel==="sidebar-footer"&&(te.show?te.show():!0)).map(te=>te),[S]),X=T.useMemo(()=>S.filter(te=>te.panel==="header"&&(te.show?te.show():!0)).map(te=>te),[S]),ae=T.useMemo(()=>{var te;return(te=S.find(fe=>fe.id==="core-settings-trigger"))==null?void 0:te.settingsRenderer},[S]),B=T.useMemo(()=>{var te;return(te=S.find(fe=>fe.id==="core-project-settings-trigger"))==null?void 0:te.settingsRenderer},[S]),J=T.useMemo(()=>{var te;return(te=S.find(fe=>fe.id==="core-vfs-modal-panel"))==null?void 0:te.renderer},[S]),ee=o==="conversation"?s:null;return t?p.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx(On,{className:"h-12 w-12 animate-spin text-primary"}),p.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[p.jsxs("div",{className:_t("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",v?"w-16":"w-64"),children:[p.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[p.jsx("div",{className:_t(v?"hidden":"block"),children:p.jsx(dh,{controls:ie,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:_t(v?"block":"hidden"),children:p.jsx(dh,{controls:ie,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),p.jsx("div",{className:_t("flex-shrink-0 border-t border-border p-2",v?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:p.jsx(dh,{controls:ne,panelId:"sidebar-footer",renderMode:v?"icon":"full",className:_t("flex",v?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&p.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex",children:[p.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm animate-fadeIn",onClick:$}),p.jsxs("div",{className:"relative w-4/5 max-w-xs bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[p.jsx("h2",{className:"font-semibold",children:"LiteChat Menu"}),p.jsx("button",{onClick:$,className:"p-1 rounded-md hover:bg-muted","aria-label":"Close menu",children:p.jsx(xi,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:p.jsx(dh,{controls:ie,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border p-4",children:p.jsx(dh,{controls:ne,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"})})]})]}),p.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[p.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-muted",onClick:$,"aria-label":"Open menu",children:p.jsx(lV,{className:"h-5 w-5"})}),p.jsx(dh,{controls:X,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),p.jsx(Khe,{conversationId:ee,interactions:h,onRegenerateInteraction:q,onStopInteraction:ue,status:m,className:"flex-grow overflow-y-hidden"}),y&&p.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",y]}),p.jsx(Coe,{InputAreaRenderer:E9,onSubmit:Z,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:i})]})]}),b.settingsModal&&ae&&ae(),x&&B&&B(),w&&J&&J(),p.jsx(L0e,{richColors:!0,position:"bottom-right",closeButton:!0})]})},s6="prism-theme-link",A2="prism-default-light-theme-link",N2="prism-default-dark-theme-link",B0e="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",z0e="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css",U0e=()=>{const{prismThemeUrl:e,theme:t}=lr(dn(a=>({prismThemeUrl:a.prismThemeUrl,theme:a.theme}))),n=T.useMemo(()=>typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=T.useMemo(()=>t==="system"?n:t==="TijuDark"||t==="dark"?"dark":"light",[t,n]);return T.useEffect(()=>{const a=(s,o)=>{let l=document.getElementById(o);l||(l=document.createElement("link"),l.id=o,l.rel="stylesheet",document.head.appendChild(l)),l.href!==s&&(l.href=s),l.disabled=!1},i=s=>{const o=document.getElementById(s);o&&(o.disabled=!0)};e?(a(e,s6),i(A2),i(N2)):(i(s6),r==="dark"?(a(z0e,N2),i(A2)):(a(B0e,A2),i(N2)))},[e,r]),null},R2=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),I2=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],H0e=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=lr(dn(a=>({theme:a.theme,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,customThemeColors:a.customThemeColors})));return T.useEffect(()=>{const a=document.body,i=document.documentElement;a.classList.remove("light","dark","TijuLight","TijuDark","custom"),I2.forEach(s=>{i.style.removeProperty(`--${R2(s)}`)}),i.style.removeProperty("--custom-font-family"),i.style.removeProperty("--custom-font-size"),e==="light"?a.classList.add("light"):e==="dark"?a.classList.add("dark"):e==="TijuLight"?a.classList.add("TijuLight"):e==="TijuDark"?a.classList.add("TijuDark"):e==="custom"?(a.classList.add("custom"),t?i.style.setProperty("--custom-font-family",t):i.style.removeProperty("--custom-font-family"),n?i.style.setProperty("--custom-font-size",`${n}px`):i.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([s,o])=>{if(o&&I2.includes(s)){const l=`--${R2(s)}`;i.style.setProperty(l,o)}else if(I2.includes(s)){const l=`--${R2(s)}`;i.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?a.classList.add("dark"):a.classList.add("light")},[e,t,n,r]),null},o6="0.1.0-dev";class q0e extends T.Component{constructor(){super(...arguments);ha(this,"state",{hasError:!1,error:null,errorInfo:null});ha(this,"copyToClipboard",async(n,r)=>{try{await navigator.clipboard.writeText(n),Ye.success(`${r} copied to clipboard!`)}catch(a){Ye.error(`Failed to copy ${r.toLowerCase()}.`),console.error(`Clipboard copy failed for ${r}:`,a)}})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueUrl(){var i;const n="https://github.com/DimitriGilbert/LiteChat/issues",r=encodeURIComponent(`Crash Report: ${((i=this.state.error)==null?void 0:i.message.substring(0,50))??"Unknown Error"}`),a=encodeURIComponent(this.generateErrorReport(!0));return`${n}/new?title=${r}&body=${a}`}generateErrorReport(n=!1){const{error:r,errorInfo:a}=this.state,i=`
`,s=n?"```":"";let o=`## LiteChat Error Report${i}${i}`;return o+=`**Version:** ${o6}${i}`,o+=`**Timestamp:** ${new Date().toISOString()}${i}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${i}${i}`,r?o+=`**Error Message:**${i}${s}${i}${r.message}${i}${s}${i}${i}`:o+=`**Error Message:** Unknown Error${i}${i}`,a!=null&&a.componentStack&&(o+=`**Component Stack:**${i}${s}text${i}${a.componentStack.trim()}${i}${s}${i}${i}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${i}${s}text${i}${r.stack.trim()}${i}${s}${i}${i}`),o+=`**Steps to Reproduce (Please Describe):**${i}1. ...${i}2. ...${i}${i}`,o+=`**Expected Behavior:**${i}...${i}${i}`,o+=`**Actual Behavior:**${i}...${i}`,o}generateAIPrompt(){var i,s;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${o6}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((i=r==null?void 0:r.componentStack)==null?void 0:i.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((s=n==null?void 0:n.stack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:p.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[p.jsx(Jw,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),p.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue."}),p.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[p.jsx(jt,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),p.jsxs(jt,{variant:"outline",onClick:()=>this.copyToClipboard(this.generateErrorReport(),"Error Details"),children:[p.jsx(QI,{className:"mr-2 h-4 w-4"})," Copy Details"]}),p.jsxs(jt,{variant:"outline",onClick:()=>this.copyToClipboard(this.generateAIPrompt(),"AI Prompt"),children:[p.jsx(QI,{className:"mr-2 h-4 w-4"})," Copy AI Debug Prompt"]}),p.jsx(jt,{variant:"outline",asChild:!0,children:p.jsxs("a",{href:this.getGitHubIssueUrl(),target:"_blank",rel:"noopener noreferrer",children:[p.jsx(rD,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})})]})]})}):this.props.children}}const C9=(e,t)=>{if(!t)return null;let n=cu,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=On,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Nh,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=Jw,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=bk,r="text-green-500",a=`Synced with ${t}`;break;default:n=cu,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(n,{className:_t("h-3 w-3 ml-1 flex-shrink-0",r)})}),p.jsx(Qn,{side:"right",children:a})]})})},Uw=T.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:y,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:R})=>{const j=e.id===n,F=e.itemType==="project",$=e.id===v&&e.itemType===b,G=F&&d.has(e.id),{projects:D,conversations:Z}=F?m(e.id,y):{projects:[],conversations:[]},q=D.length>0||Z.length>0,ue=!F&&e.syncRepoId?r[e.id]:void 0,ie=!F&&e.syncRepoId?a.get(e.syncRepoId):void 0,ne=!F&&ie?C9(ue,ie):null,X=os(Ae=>Ae.openProjectSettingsModal),ae=()=>{$||(F&&q&&h(e.id),i(e.id,e.itemType))},B=Ae=>{Ae.stopPropagation(),F?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,Ae):s(e.id,Ae)},J=Ae=>{Ae.stopPropagation(),E(e)},ee=Ae=>{Ae.stopPropagation(),F&&X(e.id)},te=Ae=>{Ae.key==="Enter"?(Ae.preventDefault(),C()):Ae.key==="Escape"&&k()},fe=F?e.name:e.title,ve=I?On:ls,De=I?"h-3 w-3 animate-spin":"h-3 w-3";return p.jsxs(p.Fragment,{children:[p.jsxs("li",{className:_t("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!$&&"hover:bg-muted/50 hover:text-primary/80",j&&!$?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",$&&"bg-muted ring-1 ring-primary",!$&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ae,title:$?"":fe,children:[p.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[F&&q&&p.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:Ae=>{Ae.stopPropagation(),h(e.id)},children:G?p.jsx(il,{className:"h-3 w-3 text-muted-foreground"}):p.jsx(eD,{className:"h-3 w-3 text-muted-foreground"})}),F&&!q&&p.jsx("span",{className:"w-3 flex-shrink-0"}),F?p.jsx(Od,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):p.jsx(K2,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),$?p.jsx(Rn,{ref:R,value:w,onChange:Ae=>S(Ae.target.value),onKeyDown:te,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:Ae=>Ae.stopPropagation(),disabled:I}):p.jsx("span",{className:"truncate pr-1",children:fe}),ne]}),p.jsx("div",{className:_t("absolute right-1 top-1/2 -translate-y-1/2 flex items-center flex-shrink-0","opacity-0 group-hover:opacity-100 transition-opacity duration-150","bg-card/80 backdrop-blur-sm p-0.5 rounded",$?"opacity-100":""),onClick:Ae=>Ae.stopPropagation(),children:$?p.jsxs(p.Fragment,{children:[p.jsx(Vn,{tooltipText:"Save (Enter)",onClick:Ae=>{Ae.stopPropagation(),C()},disabled:I||!w.trim(),"aria-label":"Save changes",icon:p.jsx(ve,{}),iconClassName:De,className:"h-5 w-5 text-green-500 hover:text-green-600"}),p.jsx(Vn,{tooltipText:"Cancel (Esc)",onClick:Ae=>{Ae.stopPropagation(),k()},disabled:I,"aria-label":"Cancel edit",icon:p.jsx(xi,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[F&&p.jsx(Vn,{tooltipText:"Project Settings",onClick:ee,"aria-label":`Settings for ${fe}`,icon:p.jsx(_q,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),p.jsx(Vn,{tooltipText:"Edit",onClick:J,"aria-label":`Edit ${fe}`,icon:p.jsx(m0,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),F?p.jsx(Vn,{tooltipText:"Export Project (JSON)",onClick:Ae=>u(e.id,Ae),"aria-label":`Export project ${fe}`,icon:p.jsx(Dq,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):p.jsxs("div",{className:"relative group/export",children:[p.jsx(Vn,{tooltipText:"Export Conversation","aria-label":`Export ${fe}`,icon:p.jsx(Rd,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),p.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:Ae=>Ae.stopPropagation(),children:[p.jsx(jt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ae=>l(e.id,"json",Ae),children:"JSON"}),p.jsx(jt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ae=>l(e.id,"md",Ae),children:"MD"})]})]}),p.jsx(Vn,{tooltipText:"Delete",onClick:B,"aria-label":`Delete ${fe}`,icon:p.jsx(Li,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),F&&G&&p.jsxs(p.Fragment,{children:[D.sort((Ae,Ne)=>Ne.updatedAt.getTime()-Ae.updatedAt.getTime()).map(Ae=>p.jsx(Uw,{item:{...Ae,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:y,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:R},Ae.id)),Z.sort((Ae,Ne)=>Ne.updatedAt.getTime()-Ae.updatedAt.getTime()).map(Ae=>p.jsx(Uw,{item:{...Ae,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:y,editingItemId:v,editingItemType:b,originalName:x,localEditingName:w,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:I,editInputRef:R},Ae.id))]})]})});Uw.displayName="ConversationItemRenderer";function V0e({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=T.useState(null),[i,s]=T.useState(null),[o,l]=T.useState(""),[u,d]=T.useState(""),[h,m]=T.useState(!1),y=T.useRef(null),v=T.useCallback(w=>{a(w.id),s(w.itemType);const S=w.itemType==="project"?w.name:w.title;l(S),d(S),m(!1)},[]),b=T.useCallback(w=>{const S=r,E=w??(i==="project"&&o==="New Project");a(null),s(null),l(""),d(""),m(!1),E&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(C=>{console.error("Failed to delete new project on cancel:",C),Ye.error("Failed to clean up cancelled new project.")}))},[r,i,o,n]),x=T.useCallback(async()=>{var E;if(!r||!i||h)return;const w=u.trim(),S=i==="project"&&o==="New Project";if(!w){Ye.error("Name cannot be empty."),(E=y.current)==null||E.focus();return}if(w===o&&!S){b();return}m(!0);try{i==="project"?await e(r,{name:w}):await t(r,{title:w}),Ye.success("Item renamed successfully."),a(null),s(null),l(""),d("")}catch(C){console.error("Failed to save item name:",C),Ye.error(`Failed to rename item: ${C instanceof Error?C.message:String(C)}`)}finally{m(!1)}},[r,i,u,o,h,e,t,b]);return T.useEffect(()=>{r&&y.current&&(y.current.focus(),y.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:o,localEditingName:u,setLocalEditingName:d,isSavingEdit:h,editInputRef:y,handleStartEditing:v,handleSaveEdit:x,handleCancelEdit:b}}const tk=(e,t,n,r,a,i,s,o,l)=>{if(!n)return!0;const u=`${t}-${e}`;if(l[u]!==void 0)return l[u];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const m=o.get(e)||[],y=s.get(e)||[];for(const v of y)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of m)if(tk(v.id,"project",n,r,a,i,s,o,l)){d=!0;break}}}}return l[u]=d,d},G0e=()=>{const e=mn(z=>z.selectedItemId),t=mn(z=>z.selectedItemType),n=mn(z=>z.isLoading),r=ai(z=>z.isLoading),{conversations:a,syncRepos:i,conversationSyncStatus:s}=mn(dn(z=>({conversations:z.conversations,syncRepos:z.syncRepos,conversationSyncStatus:z.conversationSyncStatus}))),o=ai(z=>z.projects),l=mn(z=>z.selectItem),u=mn(z=>z.addConversation),d=mn(z=>z.updateConversation),h=mn(z=>z.deleteConversation),m=mn(z=>z.exportConversation),y=mn(z=>z.exportProject),v=mn(z=>z.getConversationById),b=ai(z=>z.addProject),x=ai(z=>z.updateProject),w=ai(z=>z.deleteProject),S=ai(z=>z.getProjectById),[E,C]=gt.useState(new Set),[k,I]=T.useState(""),R=n||r,j=V0e({updateProject:x,updateConversation:d,deleteProject:w,getProjectById:S,getConversationById:v}),{editingItemId:F,editingItemType:$,originalName:G,localEditingName:D,setLocalEditingName:Z,isSavingEdit:q,editInputRef:ue,handleStartEditing:ie,handleSaveEdit:ne,handleCancelEdit:X}=j,ae=T.useCallback(z=>{C(Se=>{const Te=new Set(Se);return Te.has(z)?Te.delete(z):Te.add(z),Te})},[]),B=T.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const z=v(e);return(z==null?void 0:z.projectId)??null}return null},[e,t,v]),J=T.useCallback(async()=>{if(!F)try{const z=B(),Se=await u({title:"New Chat",projectId:z});l(Se,"conversation")}catch(z){console.error("Failed to create new chat:",z),Ye.error("Failed to create new chat.")}},[F,B,u,l]),ee=T.useCallback(async()=>{if(!F)try{const z=B(),Se=await b({name:"New Project",parentId:z});l(Se,"project"),z&&C(Te=>new Set(Te).add(z)),setTimeout(()=>{const Te=S(Se);Te?ie({...Te,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch(z){console.error("Failed to create new project:",z)}},[F,B,b,l,S,ie]),te=T.useCallback((z,Se)=>{z!==F&&(F&&z!==F&&(D.trim()&&D.trim()!==G?ne():X()),(z!==e||Se!==t)&&l(z,Se))},[F,D,G,e,t,ne,X,l]),fe=T.useCallback((z,Se)=>{Se.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&h(z).catch(Te=>{console.error("Failed to delete conversation:",Te),Ye.error("Failed to delete conversation.")})},[h]),ve=T.useCallback((z,Se)=>{Se.stopPropagation(),w(z).catch(Te=>{console.error("Failed to delete project:",Te),Ye.error("Failed to delete project.")})},[w]),De=T.useCallback(async(z,Se,Te)=>{Te.stopPropagation();try{await m(z,Se)}catch(de){console.error(`Failed to export conversation as ${Se}:`,de)}},[m]),Ae=T.useCallback(async(z,Se)=>{Se.stopPropagation();try{await y(z)}catch(Te){console.error("Failed to export project:",Te)}},[y]),Ne=T.useMemo(()=>new Map((i||[]).map(z=>[z.id,z.name])),[i]),{projectsById:Ce,conversationsByProjectId:Pe,projectsByParentId:Qe}=T.useMemo(()=>{const z=new Map(o.map(de=>[de.id,de])),Se=new Map;a.forEach(de=>{const se=de.projectId??null;Se.has(se)||Se.set(se,[]),Se.get(se).push(de)});const Te=new Map;return o.forEach(de=>{const se=de.parentId??null;Te.has(se)||Te.set(se,[]),Te.get(se).push(de)}),{projectsById:z,conversationsByProjectId:Se,projectsByParentId:Te}},[o,a]),Le=T.useCallback((z,Se)=>{const Te=Se.toLowerCase(),de={},se=(Qe.get(z)||[]).filter(xe=>tk(xe.id,"project",Te,o,a,Ce,Pe,Qe,de)),Q=(Pe.get(z)||[]).filter(xe=>xe.title.toLowerCase().includes(Te));return se.sort((xe,Fe)=>Fe.updatedAt.getTime()-xe.updatedAt.getTime()),Q.sort((xe,Fe)=>Fe.updatedAt.getTime()-xe.updatedAt.getTime()),{projects:se,conversations:Q}},[o,a,Ce,Pe,Qe]),Ie=T.useMemo(()=>{const z=k.toLowerCase(),Se={},Te=(Qe.get(null)||[]).filter(Q=>tk(Q.id,"project",z,o,a,Ce,Pe,Qe,Se)),de=(Pe.get(null)||[]).filter(Q=>Q.title.toLowerCase().includes(z)),se=[...Te.map(Q=>({...Q,itemType:"project"})),...de.map(Q=>({...Q,itemType:"conversation"}))];return se.sort((Q,xe)=>xe.updatedAt.getTime()-Q.updatedAt.getTime()),se},[o,a,k,Ce,Pe,Qe]);return p.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[p.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{size:"sm",variant:"ghost",onClick:ee,"aria-label":"New Project",disabled:R||!!F,className:"h-7 w-7 p-0",children:p.jsx(wk,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"bottom",children:"New Project"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{size:"sm",variant:"ghost",onClick:J,"aria-label":"New Chat",disabled:R||!!F,className:"h-7 w-7 p-0",children:p.jsx(Kd,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"bottom",children:"New Chat"})]})})]})]}),p.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[p.jsx(Yl,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter...",value:k,onChange:z=>I(z.target.value),className:"h-8 text-xs pl-8",disabled:R})]}),p.jsx(sc,{className:"flex-grow",children:R?p.jsxs("div",{className:"space-y-1 p-1",children:[p.jsx(dr,{className:"h-8 w-full"}),p.jsx(dr,{className:"h-8 w-full"}),p.jsx(dr,{className:"h-8 w-full"})]}):Ie.length===0?p.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):p.jsx("ul",{className:"space-y-0.5 p-1",children:Ie.map(z=>p.jsx(Uw,{item:z,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:Ne,onSelectItem:te,onDeleteConversation:fe,onDeleteProject:ve,onExportConversation:De,onExportProject:Ae,expandedProjects:E,toggleProjectExpansion:ae,getChildren:Le,filterText:k,editingItemId:F,editingItemType:$,originalName:G,localEditingName:D,setLocalEditingName:Z,handleStartEditing:ie,handleSaveEdit:ne,handleCancelEdit:X,isSavingEdit:q,editInputRef:ue},z.id))})})]})},K0e=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=mn(dn(l=>({addConversation:l.addConversation,selectItem:l.selectItem,selectedItemId:l.selectedItemId,selectedItemType:l.selectedItemType,getConversationById:l.getConversationById}))),{addProject:a}=ai(dn(l=>({addProject:l.addProject,getProjectById:l.getProjectById}))),i=()=>{if(r==="project")return n;if(r==="conversation"&&n){const l=mn.getState().getConversationById(n);return(l==null?void 0:l.projectId)??null}return null},s=async()=>{try{const l=i(),u=await e({title:"New Chat",projectId:l});t(u,"conversation")}catch(l){console.error("Failed to create new chat:",l)}},o=async()=>{try{const l=i(),u=await a({name:"New Project",parentId:l});t(u,"project")}catch(l){console.error("Failed to create new project:",l)}};return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8","aria-label":"New Project",children:p.jsx(wk,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"right",children:"New Project"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:p.jsx(Kd,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"right",children:"New Chat"})]})})]})};function W0e(){const e=Rr.getState().registerChatControl,t=mn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>gt.createElement(G0e),iconRenderer:()=>gt.createElement(K0e),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var d1="Dialog",[k9,ZSe]=di(d1),[Z0e,mo]=k9(d1),T9=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=T.useRef(null),l=T.useRef(null),[u,d]=js({prop:r,defaultProp:a??!1,onChange:i,caller:d1});return p.jsx(Z0e,{scope:t,triggerRef:o,contentRef:l,contentId:Ea(),titleId:Ea(),descriptionId:Ea(),open:u,onOpenChange:d,onOpenToggle:T.useCallback(()=>d(h=>!h),[d]),modal:s,children:n})};T9.displayName=d1;var A9="DialogTrigger",Y0e=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(A9,n),i=Cn(t,a.triggerRef);return p.jsx(rn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":wA(a.open),...r,ref:i,onClick:qt(e.onClick,a.onOpenToggle)})});Y0e.displayName=A9;var bA="DialogPortal",[X0e,N9]=k9(bA,{forceMount:void 0}),R9=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=mo(bA,t);return p.jsx(X0e,{scope:t,forceMount:n,children:T.Children.map(r,s=>p.jsx(Ta,{present:n||i.open,children:p.jsx(lp,{asChild:!0,container:a,children:s})}))})};R9.displayName=bA;var Hw="DialogOverlay",I9=T.forwardRef((e,t)=>{const n=N9(Hw,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=mo(Hw,e.__scopeDialog);return i.modal?p.jsx(Ta,{present:r||i.open,children:p.jsx(Q0e,{...a,ref:t})}):null});I9.displayName=Hw;var J0e=lu("DialogOverlay.RemoveScroll"),Q0e=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(Hw,n);return p.jsx(ty,{as:J0e,allowPinchZoom:!0,shards:[a.contentRef],children:p.jsx(rn.div,{"data-state":wA(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),qd="DialogContent",j9=T.forwardRef((e,t)=>{const n=N9(qd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=mo(qd,e.__scopeDialog);return p.jsx(Ta,{present:r||i.open,children:i.modal?p.jsx(eye,{...a,ref:t}):p.jsx(tye,{...a,ref:t})})});j9.displayName=qd;var eye=T.forwardRef((e,t)=>{const n=mo(qd,e.__scopeDialog),r=T.useRef(null),a=Cn(t,n.contentRef,r);return T.useEffect(()=>{const i=r.current;if(i)return t1(i)},[]),p.jsx(O9,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&i.preventDefault()}),onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault())})}),tye=T.forwardRef((e,t)=>{const n=mo(qd,e.__scopeDialog),r=T.useRef(!1),a=T.useRef(!1);return p.jsx(O9,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),O9=T.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=mo(qd,n),l=T.useRef(null),u=Cn(t,l);return Qx(),p.jsxs(p.Fragment,{children:[p.jsx(ey,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(ip,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":wA(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(nye,{titleId:o.titleId}),p.jsx(aye,{contentRef:l,descriptionId:o.descriptionId})]})]})}),vA="DialogTitle",D9=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(vA,n);return p.jsx(rn.h2,{id:a.titleId,...r,ref:t})});D9.displayName=vA;var M9="DialogDescription",P9=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(M9,n);return p.jsx(rn.p,{id:a.descriptionId,...r,ref:t})});P9.displayName=M9;var F9="DialogClose",L9=T.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=mo(F9,n);return p.jsx(rn.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});L9.displayName=F9;function wA(e){return e?"open":"closed"}var $9="DialogTitleWarning",[YSe,B9]=pJ($9,{contentName:qd,titleName:vA,docsSlug:"dialog"}),nye=({titleId:e})=>{const t=B9($9),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return T.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},rye="DialogDescriptionWarning",aye=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${B9(rye).contentName}}.`;return T.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},z9=T9,U9=R9,H9=I9,q9=j9,iye=D9,sye=P9,V9=L9;function f1({...e}){return p.jsx(z9,{"data-slot":"dialog",...e})}function oye({...e}){return p.jsx(U9,{"data-slot":"dialog-portal",...e})}function lye({...e}){return p.jsx(V9,{"data-slot":"dialog-close",...e})}function cye({className:e,...t}){return p.jsx(H9,{"data-slot":"dialog-overlay",className:_t("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function h1({className:e,children:t,...n}){return p.jsxs(oye,{"data-slot":"dialog-portal",children:[p.jsx(cye,{}),p.jsxs(q9,{"data-slot":"dialog-content",className:_t("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,p.jsxs(V9,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(xi,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function p1({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-header",className:_t("flex flex-col gap-2 text-center sm:text-left",e),...t})}function m1({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-footer",className:_t("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function g1({className:e,...t}){return p.jsx(iye,{"data-slot":"dialog-title",className:_t("text-lg leading-none font-semibold",e),...t})}function y1({className:e,...t}){return p.jsx(sye,{"data-slot":"dialog-description",className:_t("text-muted-foreground text-sm",e),...t})}var G9=["PageUp","PageDown"],K9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],W9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Cp="Slider",[nk,uye,dye]=Jx(Cp),[Z9,XSe]=di(Cp,[dye]),[fye,b1]=Z9(Cp),Y9=T.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:y=!1,form:v,...b}=e,x=T.useRef(new Set),w=T.useRef(0),E=s==="horizontal"?hye:pye,[C=[],k]=js({prop:d,defaultProp:u,onChange:G=>{var Z;(Z=[...x.current][w.current])==null||Z.focus(),h(G)}}),I=T.useRef(C);function R(G){const D=vye(C,G);$(G,D)}function j(G){$(G,w.current)}function F(){const G=I.current[w.current];C[w.current]!==G&&m(C)}function $(G,D,{commit:Z}={commit:!1}){const q=Sye(i),ue=Eye(Math.round((G-r)/i)*i+r,q),ie=Xg(ue,[r,a]);k((ne=[])=>{const X=yye(ne,ie,D);if(_ye(X,l*i)){w.current=X.indexOf(ie);const ae=String(X)!==String(ne);return ae&&Z&&m(X),ae?X:ne}else return ne})}return p.jsx(fye,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:a,valueIndexToChangeRef:w,thumbs:x.current,values:C,orientation:s,form:v,children:p.jsx(nk.Provider,{scope:e.__scopeSlider,children:p.jsx(nk.Slot,{scope:e.__scopeSlider,children:p.jsx(E,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:qt(b.onPointerDown,()=>{o||(I.current=C)}),min:r,max:a,inverted:y,onSlideStart:o?void 0:R,onSlideMove:o?void 0:j,onSlideEnd:o?void 0:F,onHomeKeyDown:()=>!o&&$(r,0,{commit:!0}),onEndKeyDown:()=>!o&&$(a,C.length-1,{commit:!0}),onStepKeyDown:({event:G,direction:D})=>{if(!o){const ue=G9.includes(G.key)||G.shiftKey&&K9.includes(G.key)?10:1,ie=w.current,ne=C[ie],X=i*ue*D;$(ne+X,ie,{commit:!0})}}})})})})});Y9.displayName=Cp;var[X9,J9]=Z9(Cp,{startEdge:"left",endEdge:"right",size:"width",direction:1}),hye=T.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=e,[h,m]=T.useState(null),y=Cn(t,E=>m(E)),v=T.useRef(void 0),b=Sp(a),x=b==="ltr",w=x&&!i||!x&&i;function S(E){const C=v.current||h.getBoundingClientRect(),k=[0,C.width],R=xA(k,w?[n,r]:[r,n]);return v.current=C,R(E-C.left)}return p.jsx(X9,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:p.jsx(Q9,{dir:b,"data-orientation":"horizontal",...d,ref:y,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);s==null||s(C)},onSlideMove:E=>{const C=S(E.clientX);o==null||o(C)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const k=W9[w?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:k?-1:1})}})})}),pye=T.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...u}=e,d=T.useRef(null),h=Cn(t,d),m=T.useRef(void 0),y=!a;function v(b){const x=m.current||d.current.getBoundingClientRect(),w=[0,x.height],E=xA(w,y?[r,n]:[n,r]);return m.current=x,E(b-x.top)}return p.jsx(X9,{scope:e.__scopeSlider,startEdge:y?"bottom":"top",endEdge:y?"top":"bottom",size:"height",direction:y?1:-1,children:p.jsx(Q9,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const x=v(b.clientY);i==null||i(x)},onSlideMove:b=>{const x=v(b.clientY);s==null||s(x)},onSlideEnd:()=>{m.current=void 0,o==null||o()},onStepKeyDown:b=>{const w=W9[y?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:w?-1:1})}})})}),Q9=T.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...u}=e,d=b1(Cp,n);return p.jsx(rn.span,{...u,ref:t,onKeyDown:qt(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):G9.concat(K9).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:qt(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:qt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:qt(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),eB="SliderTrack",tB=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=b1(eB,n);return p.jsx(rn.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});tB.displayName=eB;var rk="SliderRange",nB=T.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=b1(rk,n),i=J9(rk,n),s=T.useRef(null),o=Cn(t,s),l=a.values.length,u=a.values.map(m=>iB(m,a.min,a.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return p.jsx(rn.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});nB.displayName=rk;var ak="SliderThumb",rB=T.forwardRef((e,t)=>{const n=uye(e.__scopeSlider),[r,a]=T.useState(null),i=Cn(t,o=>a(o)),s=T.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(mye,{...e,ref:i,index:s})}),mye=T.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,s=b1(ak,n),o=J9(ak,n),[l,u]=T.useState(null),d=Cn(t,S=>u(S)),h=l?s.form||!!l.closest("form"):!0,m=px(l),y=s.values[r],v=y===void 0?0:iB(y,s.min,s.max),b=bye(r,s.values.length),x=m==null?void 0:m[o.size],w=x?wye(x,v,o.direction):0;return T.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${w}px)`},children:[p.jsx(nk.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(rn.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":s.min,"aria-valuenow":y,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:d,style:y===void 0?{display:"none"}:e.style,onFocus:qt(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&p.jsx(aB,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:y},r)]})});rB.displayName=ak;var gye="RadioBubbleInput",aB=T.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=T.useRef(null),i=Cn(a,r),s=e1(t);return T.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(rn.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});aB.displayName=gye;function yye(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function iB(e,t,n){const i=100/(n-t)*(e-t);return Xg(i,[0,100])}function bye(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function vye(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function wye(e,t,n){const r=e/2,i=xA([0,50],[0,r]);return(r-i(t)*n)*n}function xye(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function _ye(e,t){if(t>0){const n=xye(e);return Math.min(...n)>=t}return!0}function xA(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Sye(e){return(String(e).split(".")[1]||"").length}function Eye(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var Cye=Y9,kye=tB,Tye=nB,Aye=rB;function Ko({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const s=T.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return p.jsxs(Cye,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:_t("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[p.jsx(kye,{"data-slot":"slider-track",className:_t("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(Tye,{"data-slot":"slider-range",className:_t("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>p.jsx(Aye,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var Nye="Separator",l6="horizontal",Rye=["horizontal","vertical"],sB=T.forwardRef((e,t)=>{const{decorative:n,orientation:r=l6,...a}=e,i=Iye(r)?r:l6,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(rn.div,{"data-orientation":i,...o,...a,ref:t})});sB.displayName=Nye;function Iye(e){return Rye.includes(e)}var jye=sB;function Rs({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return p.jsx(jye,{"data-slot":"separator-root",decorative:n,orientation:t,className:_t("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const Oye=()=>{const{theme:e,setTheme:t,enableStreamingMarkdown:n,setEnableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a,setEnableStreamingCodeBlockParsing:i,foldStreamingCodeBlocks:s,setFoldStreamingCodeBlocks:o,foldUserMessagesOnCompletion:l,setFoldUserMessagesOnCompletion:u,streamingRenderFPS:d,setStreamingRenderFPS:h,prismThemeUrl:m,setPrismThemeUrl:y,resetGeneralSettings:v}=lr(dn(k=>({theme:k.theme,setTheme:k.setTheme,enableStreamingMarkdown:k.enableStreamingMarkdown,setEnableStreamingMarkdown:k.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:k.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:k.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:k.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:k.setFoldStreamingCodeBlocks,foldUserMessagesOnCompletion:k.foldUserMessagesOnCompletion,setFoldUserMessagesOnCompletion:k.setFoldUserMessagesOnCompletion,streamingRenderFPS:k.streamingRenderFPS,setStreamingRenderFPS:k.setStreamingRenderFPS,prismThemeUrl:k.prismThemeUrl,setPrismThemeUrl:k.setPrismThemeUrl,resetGeneralSettings:k.resetGeneralSettings}))),[b,x]=T.useState(d),w=T.useCallback(k=>{x(k[0])},[]),S=T.useCallback(k=>{h(k[0])},[h]),E=T.useCallback(k=>{const I=k.target.value,R=I===""?15:parseInt(I.replace(/[^0-9]/g,""),10);if(!isNaN(R)){const j=Math.max(3,Math.min(60,R));h(j),x(j)}},[h]);T.useEffect(()=>{x(d)},[d]);const C=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&v()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsx(Kt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsxs(el,{value:e??"system",onValueChange:k=>t(k),children:[p.jsx(nl,{id:"theme-select",className:"w-[180px]",children:p.jsx(tl,{placeholder:"Select theme"})}),p.jsxs(rl,{children:[p.jsx(Gr,{value:"light",children:"Light"}),p.jsx(Gr,{value:"dark",children:"Dark"}),p.jsx(Gr,{value:"system",children:"System"}),p.jsx(Gr,{value:"TijuLight",children:"Tiju Light"}),p.jsx(Gr,{value:"TijuDark",children:"Tiju Dark"})]})]})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-1.5",children:[p.jsx(Kt,{htmlFor:"prism-theme-url",className:"font-medium",children:"Code Block Theme URL (Optional)"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use the default themes."}),p.jsx(Rn,{id:"prism-theme-url",type:"url",placeholder:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",value:m??"",onChange:k=>y(k.target.value)})]})]}),p.jsx(Rs,{}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),p.jsx(Fi,{id:"streaming-markdown-switch",checked:n??!0,onCheckedChange:r})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),p.jsx(Fi,{id:"streaming-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),p.jsx(Fi,{id:"fold-codeblock-switch",checked:s??!1,onCheckedChange:o})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"fold-user-message-switch",className:"font-medium",children:"Fold User Messages After Response"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse the user's prompt message once the assistant finishes responding."})]}),p.jsx(Fi,{id:"fold-user-message-switch",checked:l??!1,onCheckedChange:u})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsxs("div",{children:[p.jsxs(Kt,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",b," FPS)"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(Ko,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[b],onValueChange:w,onValueCommit:S,className:"flex-grow"}),p.jsx(Rn,{type:"number",min:3,max:60,step:1,value:b,onChange:E,className:"w-20 h-8 text-xs"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),p.jsx(Rs,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(jt,{variant:"outline",size:"sm",onClick:C,children:[p.jsx(Sk,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},Dye=gt.memo(Oye),oB=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:m=.7,defaultTopP:y=null,defaultMaxTokens:v=null,defaultTopK:b=null,defaultPresencePenalty:x=0,defaultFrequencyPenalty:w=0,className:S})=>{const{selectedModelId:E,dbProviderConfigs:C,dbApiKeys:k}=$n(dn(B=>({selectedModelId:B.selectedModelId,dbProviderConfigs:B.dbProviderConfigs,dbApiKeys:B.dbApiKeys}))),I=T.useMemo(()=>{if(!E)return;const{providerId:B,modelId:J}=cc(E);if(!B||!J)return;const ee=C.find(fe=>fe.id===B);if(!ee)return;const te=k.find(fe=>fe.id===ee.apiKeyId);return Lk(ee,J,te==null?void 0:te.value)},[E,C,k]),R=T.useMemo(()=>{var B;return new Set(((B=I==null?void 0:I.metadata)==null?void 0:B.supported_parameters)??[])},[I]),[j,F]=T.useState(e??m),[$,G]=T.useState(n??y??1),[D,Z]=T.useState(l??x??0),[q,ue]=T.useState(d??w??0);T.useEffect(()=>{F(e??m)},[e,m]),T.useEffect(()=>{G(n??y??1)},[n,y]),T.useEffect(()=>{Z(l??x??0)},[l,x]),T.useEffect(()=>{ue(d??w??0)},[d,w]);const ie=T.useCallback((B,J)=>{const ee=J.target.value,te=ee===""?null:parseInt(ee,10);(ee===""||!isNaN(te)&&te!==null)&&B(te)},[]),ne=T.useCallback((B,J)=>{B(J[0])},[]),X=T.useCallback(B=>{B(null)},[]),ae=m!==void 0||y!==void 0||v!==void 0||b!==void 0||x!==void 0||w!==void 0;return p.jsxs("div",{className:_t("space-y-4 p-4",S),children:[R.has("temperature")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",j.toFixed(2),")"]}),p.jsx(Ko,{id:"param-temperature",min:0,max:1,step:.01,value:[j],onValueChange:B=>F(B[0]),onValueCommit:B=>ne(t,B)}),ae&&p.jsxs(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(t),disabled:e===null,children:["Use Default (",(m==null?void 0:m.toFixed(2))??"N/A",")"]})]}),R.has("top_p")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",($??0).toFixed(2),")"]}),p.jsx(Ko,{id:"param-top-p",min:0,max:1,step:.01,value:[$??1],onValueChange:B=>G(B[0]),onValueCommit:B=>ne(r,B)}),ae&&p.jsxs(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(r),disabled:n===null,children:["Use Default (",(y==null?void 0:y.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[R.has("max_tokens")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(Rn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:B=>ie(i,B),min:"1",className:"h-8 text-xs"}),ae&&p.jsx(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(i),disabled:a===null,children:"Use Default"})]}),R.has("top_k")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),p.jsx(Rn,{id:"param-top-k",type:"number",placeholder:`Default: ${b??"None"}`,value:s??"",onChange:B=>ie(o,B),min:"1",className:"h-8 text-xs"}),ae&&p.jsx(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(o),disabled:s===null,children:"Use Default"})]})]}),R.has("presence_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(D??0).toFixed(2),")"]}),p.jsx(Ko,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[D??0],onValueChange:B=>Z(B[0]),onValueCommit:B=>ne(u,B)}),ae&&p.jsxs(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(u),disabled:l===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]}),R.has("frequency_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(q??0).toFixed(2),")"]}),p.jsx(Ko,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[q??0],onValueChange:B=>ue(B[0]),onValueCommit:B=>ne(h,B)}),ae&&p.jsxs(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>X(h),disabled:d===null,children:["Use Default (",(w==null?void 0:w.toFixed(2))??"N/A",")"]})]})]})};var c6=1,Mye=.9,Pye=.8,Fye=.17,j2=.1,O2=.999,Lye=.9999,$ye=.99,Bye=/[\\\/_+.#"@\[\(\{&]/,zye=/[\\\/_+.#"@\[\(\{&]/g,Uye=/[\s-]/,lB=/[\s-]/g;function ik(e,t,n,r,a,i,s){if(i===t.length)return a===e.length?c6:$ye;var o=`${a},${i}`;if(s[o]!==void 0)return s[o];for(var l=r.charAt(i),u=n.indexOf(l,a),d=0,h,m,y,v;u>=0;)h=ik(e,t,n,r,u+1,i+1,s),h>d&&(u===a?h*=c6:Bye.test(e.charAt(u-1))?(h*=Pye,y=e.slice(a,u-1).match(zye),y&&a>0&&(h*=Math.pow(O2,y.length))):Uye.test(e.charAt(u-1))?(h*=Mye,v=e.slice(a,u-1).match(lB),v&&a>0&&(h*=Math.pow(O2,v.length))):(h*=Fye,a>0&&(h*=Math.pow(O2,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=Lye)),(h<j2&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(m=ik(e,t,n,r,u+1,i+2,s),m*j2>h&&(h=m*j2)),h>d&&(d=h),u=n.indexOf(l,u+1);return s[o]=d,d}function u6(e){return e.toLowerCase().replace(lB," ")}function Hye(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,ik(e,t,u6(e),u6(t),0,0,{})}var Gm='[cmdk-group=""]',D2='[cmdk-group-items=""]',qye='[cmdk-group-heading=""]',cB='[cmdk-item=""]',d6=`${cB}:not([aria-disabled="true"])`,sk="cmdk-item-select",hh="data-value",Vye=(e,t,n)=>Hye(e,t,n),uB=T.createContext(void 0),ny=()=>T.useContext(uB),dB=T.createContext(void 0),_A=()=>T.useContext(dB),fB=T.createContext(void 0),hB=T.forwardRef((e,t)=>{let n=ph(()=>{var ee,te;return{search:"",value:(te=(ee=e.value)!=null?ee:e.defaultValue)!=null?te:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=ph(()=>new Set),a=ph(()=>new Map),i=ph(()=>new Map),s=ph(()=>new Set),o=pB(e),{label:l,children:u,value:d,onValueChange:h,filter:m,shouldFilter:y,loop:v,disablePointerSelection:b=!1,vimBindings:x=!0,...w}=e,S=Ea(),E=Ea(),C=Ea(),k=T.useRef(null),I=nbe();Vd(()=>{if(d!==void 0){let ee=d.trim();n.current.value=ee,R.emit()}},[d]),Vd(()=>{I(6,Z)},[]);let R=T.useMemo(()=>({subscribe:ee=>(s.current.add(ee),()=>s.current.delete(ee)),snapshot:()=>n.current,setState:(ee,te,fe)=>{var ve,De,Ae,Ne;if(!Object.is(n.current[ee],te)){if(n.current[ee]=te,ee==="search")D(),$(),I(1,G);else if(ee==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ce=document.getElementById(C);Ce?Ce.focus():(ve=document.getElementById(S))==null||ve.focus()}if(I(7,()=>{var Ce;n.current.selectedItemId=(Ce=q())==null?void 0:Ce.id,R.emit()}),fe||I(5,Z),((De=o.current)==null?void 0:De.value)!==void 0){let Ce=te??"";(Ne=(Ae=o.current).onValueChange)==null||Ne.call(Ae,Ce);return}}R.emit()}},emit:()=>{s.current.forEach(ee=>ee())}}),[]),j=T.useMemo(()=>({value:(ee,te,fe)=>{var ve;te!==((ve=i.current.get(ee))==null?void 0:ve.value)&&(i.current.set(ee,{value:te,keywords:fe}),n.current.filtered.items.set(ee,F(te,fe)),I(2,()=>{$(),R.emit()}))},item:(ee,te)=>(r.current.add(ee),te&&(a.current.has(te)?a.current.get(te).add(ee):a.current.set(te,new Set([ee]))),I(3,()=>{D(),$(),n.current.value||G(),R.emit()}),()=>{i.current.delete(ee),r.current.delete(ee),n.current.filtered.items.delete(ee);let fe=q();I(4,()=>{D(),(fe==null?void 0:fe.getAttribute("id"))===ee&&G(),R.emit()})}),group:ee=>(a.current.has(ee)||a.current.set(ee,new Set),()=>{i.current.delete(ee),a.current.delete(ee)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:k}),[]);function F(ee,te){var fe,ve;let De=(ve=(fe=o.current)==null?void 0:fe.filter)!=null?ve:Vye;return ee?De(ee,n.current.search,te):0}function $(){if(!n.current.search||o.current.shouldFilter===!1)return;let ee=n.current.filtered.items,te=[];n.current.filtered.groups.forEach(ve=>{let De=a.current.get(ve),Ae=0;De.forEach(Ne=>{let Ce=ee.get(Ne);Ae=Math.max(Ce,Ae)}),te.push([ve,Ae])});let fe=k.current;ue().sort((ve,De)=>{var Ae,Ne;let Ce=ve.getAttribute("id"),Pe=De.getAttribute("id");return((Ae=ee.get(Pe))!=null?Ae:0)-((Ne=ee.get(Ce))!=null?Ne:0)}).forEach(ve=>{let De=ve.closest(D2);De?De.appendChild(ve.parentElement===De?ve:ve.closest(`${D2} > *`)):fe.appendChild(ve.parentElement===fe?ve:ve.closest(`${D2} > *`))}),te.sort((ve,De)=>De[1]-ve[1]).forEach(ve=>{var De;let Ae=(De=k.current)==null?void 0:De.querySelector(`${Gm}[${hh}="${encodeURIComponent(ve[0])}"]`);Ae==null||Ae.parentElement.appendChild(Ae)})}function G(){let ee=ue().find(fe=>fe.getAttribute("aria-disabled")!=="true"),te=ee==null?void 0:ee.getAttribute(hh);R.setState("value",te||void 0)}function D(){var ee,te,fe,ve;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let De=0;for(let Ae of r.current){let Ne=(te=(ee=i.current.get(Ae))==null?void 0:ee.value)!=null?te:"",Ce=(ve=(fe=i.current.get(Ae))==null?void 0:fe.keywords)!=null?ve:[],Pe=F(Ne,Ce);n.current.filtered.items.set(Ae,Pe),Pe>0&&De++}for(let[Ae,Ne]of a.current)for(let Ce of Ne)if(n.current.filtered.items.get(Ce)>0){n.current.filtered.groups.add(Ae);break}n.current.filtered.count=De}function Z(){var ee,te,fe;let ve=q();ve&&(((ee=ve.parentElement)==null?void 0:ee.firstChild)===ve&&((fe=(te=ve.closest(Gm))==null?void 0:te.querySelector(qye))==null||fe.scrollIntoView({block:"nearest"})),ve.scrollIntoView({block:"nearest"}))}function q(){var ee;return(ee=k.current)==null?void 0:ee.querySelector(`${cB}[aria-selected="true"]`)}function ue(){var ee;return Array.from(((ee=k.current)==null?void 0:ee.querySelectorAll(d6))||[])}function ie(ee){let te=ue()[ee];te&&R.setState("value",te.getAttribute(hh))}function ne(ee){var te;let fe=q(),ve=ue(),De=ve.findIndex(Ne=>Ne===fe),Ae=ve[De+ee];(te=o.current)!=null&&te.loop&&(Ae=De+ee<0?ve[ve.length-1]:De+ee===ve.length?ve[0]:ve[De+ee]),Ae&&R.setState("value",Ae.getAttribute(hh))}function X(ee){let te=q(),fe=te==null?void 0:te.closest(Gm),ve;for(;fe&&!ve;)fe=ee>0?ebe(fe,Gm):tbe(fe,Gm),ve=fe==null?void 0:fe.querySelector(d6);ve?R.setState("value",ve.getAttribute(hh)):ne(ee)}let ae=()=>ie(ue().length-1),B=ee=>{ee.preventDefault(),ee.metaKey?ae():ee.altKey?X(1):ne(1)},J=ee=>{ee.preventDefault(),ee.metaKey?ie(0):ee.altKey?X(-1):ne(-1)};return T.createElement(rn.div,{ref:t,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:ee=>{var te;(te=w.onKeyDown)==null||te.call(w,ee);let fe=ee.nativeEvent.isComposing||ee.keyCode===229;if(!(ee.defaultPrevented||fe))switch(ee.key){case"n":case"j":{x&&ee.ctrlKey&&B(ee);break}case"ArrowDown":{B(ee);break}case"p":case"k":{x&&ee.ctrlKey&&J(ee);break}case"ArrowUp":{J(ee);break}case"Home":{ee.preventDefault(),ie(0);break}case"End":{ee.preventDefault(),ae();break}case"Enter":{ee.preventDefault();let ve=q();if(ve){let De=new Event(sk);ve.dispatchEvent(De)}}}}},T.createElement("label",{"cmdk-label":"",htmlFor:j.inputId,id:j.labelId,style:abe},l),v1(e,ee=>T.createElement(dB.Provider,{value:R},T.createElement(uB.Provider,{value:j},ee))))}),Gye=T.forwardRef((e,t)=>{var n,r;let a=Ea(),i=T.useRef(null),s=T.useContext(fB),o=ny(),l=pB(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;Vd(()=>{if(!u)return o.item(a,s==null?void 0:s.id)},[u]);let d=mB(a,i,[e.value,e.children,i],e.keywords),h=_A(),m=Tu(I=>I.value&&I.value===d.current),y=Tu(I=>u||o.filter()===!1?!0:I.search?I.filtered.items.get(a)>0:!0);T.useEffect(()=>{let I=i.current;if(!(!I||e.disabled))return I.addEventListener(sk,v),()=>I.removeEventListener(sk,v)},[y,e.onSelect,e.disabled]);function v(){var I,R;b(),(R=(I=l.current).onSelect)==null||R.call(I,d.current)}function b(){h.setState("value",d.current,!0)}if(!y)return null;let{disabled:x,value:w,onSelect:S,forceMount:E,keywords:C,...k}=e;return T.createElement(rn.div,{ref:Zl(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!m,"data-disabled":!!x,"data-selected":!!m,onPointerMove:x||o.getDisablePointerSelection()?void 0:b,onClick:x?void 0:v},e.children)}),Kye=T.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,s=Ea(),o=T.useRef(null),l=T.useRef(null),u=Ea(),d=ny(),h=Tu(y=>a||d.filter()===!1?!0:y.search?y.filtered.groups.has(s):!0);Vd(()=>d.group(s),[]),mB(s,o,[e.value,e.heading,l]);let m=T.useMemo(()=>({id:s,forceMount:a}),[a]);return T.createElement(rn.div,{ref:Zl(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&T.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),v1(e,y=>T.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},T.createElement(fB.Provider,{value:m},y))))}),Wye=T.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=T.useRef(null),i=Tu(s=>!s.search);return!n&&!i?null:T.createElement(rn.div,{ref:Zl(a,t),...r,"cmdk-separator":"",role:"separator"})}),Zye=T.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=_A(),s=Tu(u=>u.search),o=Tu(u=>u.selectedItemId),l=ny();return T.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),T.createElement(rn.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:a?e.value:s,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),Yye=T.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=T.useRef(null),s=T.useRef(null),o=Tu(u=>u.selectedItemId),l=ny();return T.useEffect(()=>{if(s.current&&i.current){let u=s.current,d=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let y=u.offsetHeight;d.style.setProperty("--cmdk-list-height",y.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(h),m.unobserve(u)}}},[]),T.createElement(rn.div,{ref:Zl(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},v1(e,u=>T.createElement("div",{ref:Zl(s,l.listInnerRef),"cmdk-list-sizer":""},u)))}),Xye=T.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:s,...o}=e;return T.createElement(z9,{open:n,onOpenChange:r},T.createElement(U9,{container:s},T.createElement(H9,{"cmdk-overlay":"",className:a}),T.createElement(q9,{"aria-label":e.label,"cmdk-dialog":"",className:i},T.createElement(hB,{ref:t,...o}))))}),Jye=T.forwardRef((e,t)=>Tu(n=>n.filtered.count===0)?T.createElement(rn.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Qye=T.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return T.createElement(rn.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},v1(e,s=>T.createElement("div",{"aria-hidden":!0},s)))}),kp=Object.assign(hB,{List:Yye,Item:Gye,Input:Zye,Group:Kye,Separator:Wye,Dialog:Xye,Empty:Jye,Loading:Qye});function ebe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function tbe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function pB(e){let t=T.useRef(e);return Vd(()=>{t.current=e}),t}var Vd=typeof window>"u"?T.useEffect:T.useLayoutEffect;function ph(e){let t=T.useRef();return t.current===void 0&&(t.current=e()),t}function Tu(e){let t=_A(),n=()=>e(t.snapshot());return T.useSyncExternalStore(t.subscribe,n,n)}function mB(e,t,n,r=[]){let a=T.useRef(),i=ny();return Vd(()=>{var s;let o=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),l=r.map(u=>u.trim());i.value(e,o,l),(s=t.current)==null||s.setAttribute(hh,o),a.current=o}),a}var nbe=()=>{let[e,t]=T.useState(),n=ph(()=>new Map);return Vd(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function rbe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function v1({asChild:e,children:t},n){return e&&T.isValidElement(t)?T.cloneElement(rbe(t),{ref:t.ref},n(t.props.children)):n(t)}var abe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function gB({className:e,...t}){return p.jsx(kp,{"data-slot":"command",className:_t("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function yB({className:e,...t}){return p.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[p.jsx(Yl,{className:"size-4 shrink-0 opacity-50"}),p.jsx(kp.Input,{"data-slot":"command-input",className:_t("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function bB({className:e,...t}){return p.jsx(kp.List,{"data-slot":"command-list",className:_t("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function vB({...e}){return p.jsx(kp.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function wB({className:e,...t}){return p.jsx(kp.Group,{"data-slot":"command-group",className:_t("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function xB({className:e,...t}){return p.jsx(kp.Item,{"data-slot":"command-item",className:_t("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}var w1="Popover",[_B,JSe]=di(w1,[Au]),ry=Au(),[ibe,Bu]=_B(w1),SB=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=ry(t),l=T.useRef(null),[u,d]=T.useState(!1),[h,m]=js({prop:r,defaultProp:a??!1,onChange:i,caller:w1});return p.jsx(mx,{...o,children:p.jsx(ibe,{scope:t,contentId:Ea(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:T.useCallback(()=>m(y=>!y),[m]),hasCustomAnchor:u,onCustomAnchorAdd:T.useCallback(()=>d(!0),[]),onCustomAnchorRemove:T.useCallback(()=>d(!1),[]),modal:s,children:n})})};SB.displayName=w1;var EB="PopoverAnchor",sbe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bu(EB,n),i=ry(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return T.useEffect(()=>(s(),()=>o()),[s,o]),p.jsx(w0,{...i,...r,ref:t})});sbe.displayName=EB;var CB="PopoverTrigger",kB=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bu(CB,n),i=ry(n),s=Cn(t,a.triggerRef),o=p.jsx(rn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":IB(a.open),...r,ref:s,onClick:qt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:p.jsx(w0,{asChild:!0,...i,children:o})});kB.displayName=CB;var SA="PopoverPortal",[obe,lbe]=_B(SA,{forceMount:void 0}),TB=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=Bu(SA,t);return p.jsx(obe,{scope:t,forceMount:n,children:p.jsx(Ta,{present:n||i.open,children:p.jsx(lp,{asChild:!0,container:a,children:r})})})};TB.displayName=SA;var tp="PopoverContent",AB=T.forwardRef((e,t)=>{const n=lbe(tp,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=Bu(tp,e.__scopePopover);return p.jsx(Ta,{present:r||i.open,children:i.modal?p.jsx(ube,{...a,ref:t}):p.jsx(dbe,{...a,ref:t})})});AB.displayName=tp;var cbe=lu("PopoverContent.RemoveScroll"),ube=T.forwardRef((e,t)=>{const n=Bu(tp,e.__scopePopover),r=T.useRef(null),a=Cn(t,r),i=T.useRef(!1);return T.useEffect(()=>{const s=r.current;if(s)return t1(s)},[]),p.jsx(ty,{as:cbe,allowPinchZoom:!0,children:p.jsx(NB,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:qt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),dbe=T.forwardRef((e,t)=>{const n=Bu(tp,e.__scopePopover),r=T.useRef(!1),a=T.useRef(!1);return p.jsx(NB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),NB=T.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=e,m=Bu(tp,n),y=ry(n);return Qx(),p.jsx(ey,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(ip,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:p.jsx(gx,{"data-state":IB(m.open),role:"dialog",id:m.contentId,...y,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),RB="PopoverClose",fbe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Bu(RB,n);return p.jsx(rn.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});fbe.displayName=RB;var hbe="PopoverArrow",pbe=T.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=ry(n);return p.jsx(yx,{...a,...r,ref:t})});pbe.displayName=hbe;function IB(e){return e?"open":"closed"}var mbe=SB,gbe=kB,ybe=TB,bbe=AB;function zu({...e}){return p.jsx(mbe,{"data-slot":"popover",...e})}function Uu({...e}){return p.jsx(gbe,{"data-slot":"popover-trigger",...e})}function Hu({className:e,align:t="center",sideOffset:n=4,...r}){return p.jsx(ybe,{children:p.jsx(bbe,{"data-slot":"popover-content",align:t,sideOffset:n,className:_t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const x1=gt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=T.useState(!1),[s,o]=T.useState(""),[l,u]=T.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),{dbProviderConfigs:d,globalModelSortOrder:h,isLoading:m}=$n(dn(E=>({dbProviderConfigs:E.dbProviderConfigs,globalModelSortOrder:E.globalModelSortOrder,isLoading:E.isLoading}))),y=T.useMemo(()=>{const E=new Map,C=new Set;d.forEach(R=>{if(!R.isEnabled||!R.enabledModels)return;const j=$n.getState().getAllAvailableModelDefsForProvider(R.id)??[],F=new Map(j.map($=>[$.id,$]));R.enabledModels.forEach($=>{const G=nu(R.id,$),D=F.get($);D&&(C.add(G),E.set(G,{name:D.name||$,providerName:R.name,metadata:D}))})});const k=[],I=new Set;return h.forEach(R=>{if(C.has(R)){const j=E.get(R);j&&!I.has(R)&&(k.push({id:R,...j}),I.add(R))}}),C.forEach(R=>{if(!I.has(R)){const j=E.get(R);j&&k.push({id:R,...j})}}),k},[d,h]),v=T.useMemo(()=>{let E=y;if(s.trim()){const k=s.toLowerCase();E=y.filter(I=>I.name.toLowerCase().includes(k)||I.providerName.toLowerCase().includes(k)||I.id.toLowerCase().includes(k))}const C=Object.entries(l).filter(([,k])=>k).map(([k])=>k);return C.length===0?E:E.filter(k=>{var j,F,$;const I=new Set(((j=k.metadata)==null?void 0:j.supported_parameters)??[]),R=new Set((($=(F=k.metadata)==null?void 0:F.architecture)==null?void 0:$.input_modalities)??[]);return C.every(G=>{switch(G){case"reasoning":return I.has("reasoning");case"webSearch":return I.has("web_search")||I.has("web_search_options");case"tools":return I.has("tools");case"multimodal":return Array.from(R).some(D=>D!=="text");default:return!0}})})},[y,s,l]),b=T.useMemo(()=>y.find(E=>E.id===e),[y,e]),x=T.useCallback(E=>{t(E===e?null:E),i(!1),o("")},[t,e]),w=E=>{u(C=>({...C,[E]:!C[E]}))};if(m)return p.jsx(dr,{className:_t("h-9 w-[250px]",r)});const S=Object.values(l).filter(Boolean).length;return p.jsxs(zu,{open:a,onOpenChange:i,children:[p.jsx(Uu,{asChild:!0,children:p.jsxs(jt,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||y.length===0,className:_t("w-auto justify-between h-9 text-sm font-normal",r),children:[p.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:b?`${b.name} (${b.providerName})`:"Select Model..."}),p.jsx(Yw,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(Hu,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:p.jsxs(gB,{shouldFilter:!1,children:[p.jsxs("div",{className:"flex items-center border-b px-3",children:[p.jsx(Yl,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(yB,{placeholder:"Search model...",value:s,onValueChange:o,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[p.jsx(Vn,{tooltipText:"Filter: Reasoning",icon:p.jsx(yk,{}),onClick:()=>w("reasoning"),variant:l.reasoning?"secondary":"ghost",className:_t("h-7 w-7",l.reasoning&&"text-primary"),"aria-label":"Filter by reasoning capability"}),p.jsx(Vn,{tooltipText:"Filter: Web Search",icon:p.jsx(Yl,{}),onClick:()=>w("webSearch"),variant:l.webSearch?"secondary":"ghost",className:_t("h-7 w-7",l.webSearch&&"text-primary"),"aria-label":"Filter by web search capability"}),p.jsx(Vn,{tooltipText:"Filter: Tools",icon:p.jsx(fD,{}),onClick:()=>w("tools"),variant:l.tools?"secondary":"ghost",className:_t("h-7 w-7",l.tools&&"text-primary"),"aria-label":"Filter by tool usage capability"}),p.jsx(Vn,{tooltipText:"Filter: Multimodal",icon:p.jsx(cD,{}),onClick:()=>w("multimodal"),variant:l.multimodal?"secondary":"ghost",className:_t("h-7 w-7",l.multimodal&&"text-primary"),"aria-label":"Filter by multimodal capability"})]})]}),p.jsxs(bB,{children:[p.jsx(vB,{children:S>0?"No models match all active filters.":"No model found."}),p.jsx(wB,{children:v.map(E=>p.jsxs(xB,{value:E.id,onSelect:x,children:[p.jsx(ls,{className:_t("mr-2 h-4 w-4",e===E.id?"opacity-100":"opacity-0")}),p.jsxs("span",{className:"truncate",children:[E.name," (",E.providerName,")"]})]},E.id))})]})]})})]})});x1.displayName="GlobalModelSelector";const vbe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:s,setTopP:o,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:m,setPresencePenalty:y,frequencyPenalty:v,setFrequencyPenalty:b,autoTitleEnabled:x,setAutoTitleEnabled:w,autoTitleModelId:S,setAutoTitleModelId:E,autoTitlePromptMaxLength:C,setAutoTitlePromptMaxLength:k,autoTitleIncludeFiles:I,setAutoTitleIncludeFiles:R,autoTitleIncludeRules:j,setAutoTitleIncludeRules:F,resetAssistantSettings:$}=lr(dn(X=>({globalSystemPrompt:X.globalSystemPrompt,setGlobalSystemPrompt:X.setGlobalSystemPrompt,toolMaxSteps:X.toolMaxSteps,setToolMaxSteps:X.setToolMaxSteps,temperature:X.temperature,setTemperature:X.setTemperature,topP:X.topP,setTopP:X.setTopP,maxTokens:X.maxTokens,setMaxTokens:X.setMaxTokens,topK:X.topK,setTopK:X.setTopK,presencePenalty:X.presencePenalty,setPresencePenalty:X.setPresencePenalty,frequencyPenalty:X.frequencyPenalty,setFrequencyPenalty:X.setFrequencyPenalty,autoTitleEnabled:X.autoTitleEnabled,setAutoTitleEnabled:X.setAutoTitleEnabled,autoTitleModelId:X.autoTitleModelId,setAutoTitleModelId:X.setAutoTitleModelId,autoTitlePromptMaxLength:X.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:X.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:X.autoTitleIncludeFiles,setAutoTitleIncludeFiles:X.setAutoTitleIncludeFiles,autoTitleIncludeRules:X.autoTitleIncludeRules,setAutoTitleIncludeRules:X.setAutoTitleIncludeRules,resetAssistantSettings:X.resetAssistantSettings}))),G=X=>{const ae=X.target.value,B=ae===""?5:parseInt(ae,10);isNaN(B)||r(B)},D=X=>{const ae=X.target.value,B=ae===""?768:parseInt(ae,10);isNaN(B)||k(B)},Z=X=>{X!==null&&i(X)},q=X=>{X!==null&&o(X)},ue=X=>{X!==null&&y(X)},ie=X=>{X!==null&&b(X)},ne=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&$()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),p.jsx(Kt,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),p.jsx($u,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:X=>t(X.target.value),rows:4})]}),p.jsx(Rs,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),p.jsx(oB,{temperature:a,setTemperature:Z,topP:s,setTopP:q,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:m,setPresencePenalty:ue,frequencyPenalty:v,setFrequencyPenalty:ie,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]}),p.jsx(Rs,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),p.jsx(Kt,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),p.jsx(Rn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:G,className:"w-24"})]}),p.jsx(Rs,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Automatic Title Generation"}),p.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[p.jsx(Fi,{id:"auto-title-enabled",checked:x,onCheckedChange:w,"aria-labelledby":"auto-title-enabled-label"}),p.jsx(Kt,{id:"auto-title-enabled-label",htmlFor:"auto-title-enabled",children:"Enable Auto-Title for New Chats"})]}),x&&p.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted ml-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"auto-title-model",children:"Model for Title Generation"}),p.jsx(x1,{value:S,onChange:E,className:"w-full"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a fast and capable model for generating concise titles."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"auto-title-max-length",children:"Max Prompt Length for Title Generation (Chars)"}),p.jsx(Rn,{id:"auto-title-max-length",type:"number",min:"100",max:"4000",step:"10",value:C,onChange:D,className:"w-24"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Limits the initial prompt length sent for title generation (100-4000)."})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Fi,{id:"auto-title-include-files",checked:I,onCheckedChange:R,"aria-labelledby":"auto-title-include-files-label"}),p.jsx(Kt,{id:"auto-title-include-files-label",htmlFor:"auto-title-include-files",children:"Include file names/types in title prompt"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Fi,{id:"auto-title-include-rules",checked:j,onCheckedChange:F,"aria-labelledby":"auto-title-include-rules-label"}),p.jsx(Kt,{id:"auto-title-include-rules-label",htmlFor:"auto-title-include-rules",children:"Include active rules in title prompt"})]})]})]}),p.jsx(Rs,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(jt,{variant:"outline",size:"sm",onClick:ne,children:[p.jsx(Sk,{className:"mr-2 h-4 w-4"}),"Reset Assistant Settings"]})})]})},wbe=gt.memo(vbe);var _1="Checkbox",[xbe,QSe]=di(_1),[_be,Sbe]=xbe(_1),jB=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,y]=T.useState(null),v=Cn(t,C=>y(C)),b=T.useRef(!1),x=m?d||!!m.closest("form"):!0,[w,S]=js({prop:a,defaultProp:i??!1,onChange:u,caller:_1}),E=T.useRef(w);return T.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const k=()=>S(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[m,S]),p.jsxs(_be,{scope:n,state:w,disabled:o,children:[p.jsx(rn.button,{type:"button",role:"checkbox","aria-checked":ou(w)?"mixed":w,"aria-required":s,"data-state":PB(w),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onKeyDown:qt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:qt(e.onClick,C=>{S(k=>ou(k)?!0:!k),x&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),x&&p.jsx(MB,{control:m,bubbles:!b.current,name:r,value:l,checked:w,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:ou(i)?!1:i})]})});jB.displayName=_1;var OB="CheckboxIndicator",DB=T.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Sbe(OB,n);return p.jsx(Ta,{present:r||ou(i.state)||i.state===!0,children:p.jsx(rn.span,{"data-state":PB(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});DB.displayName=OB;var Ebe="CheckboxBubbleInput",MB=T.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},s)=>{const o=T.useRef(null),l=Cn(o,s),u=e1(n),d=px(t);T.useEffect(()=>{const m=o.current;if(!m)return;const y=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(y,"checked").set;if(u!==n&&b){const x=new Event("click",{bubbles:r});m.indeterminate=ou(n),b.call(m,ou(n)?!1:n),m.dispatchEvent(x)}},[u,n,r]);const h=T.useRef(ou(n)?!1:n);return p.jsx(rn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});MB.displayName=Ebe;function ou(e){return e==="indeterminate"}function PB(e){return ou(e)?"indeterminate":e?"checked":"unchecked"}var Cbe=jB,kbe=DB;function l0({className:e,...t}){return p.jsx(Cbe,{"data-slot":"checkbox",className:_t("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(kbe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(ls,{className:"size-3.5"})})})}const Tbe=()=>{const{importConversation:e,exportAllConversations:t}=mn(dn(D=>({importConversation:D.importConversation,exportAllConversations:D.exportAllConversations}))),n=T.useRef(null),r=T.useRef(null),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,u]=T.useState(!1),[d,h]=T.useState(!1),[m,y]=T.useState(!1),[v,b]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),[x,w]=T.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),S=()=>{var D;(D=n.current)==null||D.click()},E=()=>{var D;(D=r.current)==null||D.click()},C=T.useCallback(async D=>{var q;const Z=(q=D.target.files)==null?void 0:q[0];if(Z){i(!0);try{await e(Z)}catch(ue){console.error("Import failed (from component):",ue)}finally{n.current&&(n.current.value=""),i(!1)}}},[e]),k=T.useCallback(async D=>{var q;const Z=(q=D.target.files)==null?void 0:q[0];if(Z){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}y(!0);try{await vh.importFullConfiguration(Z,v)}catch(ue){console.error("Full import failed (from component):",ue)}finally{r.current&&(r.current.value=""),y(!1)}}},[v]),I=T.useCallback(async()=>{o(!0);try{await t()}catch(D){console.error("Export all failed (from component):",D)}finally{o(!1)}},[t]),R=T.useCallback(async()=>{h(!0);try{await vh.exportFullConfiguration(x)}catch(D){console.error("Full export failed (from component):",D)}finally{h(!1)}},[x]),j=T.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await xt.clearAllData(),Ye.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(D){const Z="Failed to clear all data";console.error(Z,D),Ye.error(`${Z}: ${D instanceof Error?D.message:String(D)}`),u(!1)}}},[]),F=(D,Z)=>{b(q=>({...q,[D]:Z}))},$=(D,Z)=>{w(q=>({...q,[D]:Z}))},G=(D,Z,q,ue)=>{const ie=D==="import"?v:x,ne=D==="import"?F:$,X=D==="import"?m:d;return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(l0,{id:`${D}-${Z}`,checked:ie[Z],onCheckedChange:ae=>ne(Z,!!ae),disabled:X}),p.jsxs(Kt,{htmlFor:`${D}-${Z}`,className:"text-sm font-normal flex items-center gap-1.5",children:[p.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})," ",q]})]},`${D}-${Z}`)};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Kt,{className:"font-semibold",children:"Import Conversation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),p.jsx("input",{type:"file",ref:n,onChange:C,accept:".json",className:"hidden",id:"import-file-input",disabled:a}),p.jsxs(jt,{onClick:S,variant:"outline",size:"sm",disabled:a,children:[a?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(UV,{className:"mr-2 h-4 w-4"}),a?"Importing...":"Select File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx(Kt,{className:"font-semibold",children:"Export All Conversations"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),p.jsxs(jt,{onClick:I,variant:"outline",size:"sm",disabled:s,children:[s?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Rd,{className:"mr-2 h-4 w-4"}),s?"Exporting...":"Export All Chats"]})]})]})]}),p.jsx(Rs,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Kt,{className:"font-semibold",children:"Import Full Configuration"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Import a full configuration backup (.json). Select which data types to import below."," ",p.jsx("strong",{className:"text-destructive",children:"This will overwrite existing data for selected types."})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[G("import","importSettings","Settings",Dv),G("import","importApiKeys","API Keys",G2),G("import","importProviderConfigs","Providers",n3),G("import","importProjects","Projects",e3),G("import","importConversations","Conversations",K2),G("import","importRulesAndTags","Rules & Tags",W2),G("import","importMods","Mods",t3),G("import","importSyncRepos","Sync Repos",cu)]}),p.jsx("input",{type:"file",ref:r,onChange:k,accept:".json",className:"hidden",id:"full-import-file-input",disabled:m}),p.jsxs(jt,{onClick:E,variant:"outline",size:"sm",disabled:m,className:"mt-2",children:[m?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Bq,{className:"mr-2 h-4 w-4"}),m?"Importing...":"Select Full Backup File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx(Kt,{className:"font-semibold",children:"Export Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[G("export","importSettings","Settings",Dv),G("export","importApiKeys","API Keys",G2),G("export","importProviderConfigs","Providers",n3),G("export","importProjects","Projects",e3),G("export","importConversations","Conversations",K2),G("export","importRulesAndTags","Rules & Tags",W2),G("export","importMods","Mods",t3),G("export","importSyncRepos","Sync Repos",cu)]}),p.jsxs(jt,{onClick:R,variant:"outline",size:"sm",disabled:d,className:"mt-2",children:[d?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(jq,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export Full Backup"]})]})]})]}),p.jsx(Rs,{}),p.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[p.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),p.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),p.jsxs(jt,{onClick:j,variant:"destructive",disabled:l,children:[l?p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Li,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},Abe=gt.memo(Tbe),Nbe=mk("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function FB({className:e,variant:t,...n}){return p.jsx("div",{"data-slot":"alert",role:"alert",className:_t(Nbe({variant:t}),e),...n})}function LB({className:e,...t}){return p.jsx("div",{"data-slot":"alert-title",className:_t("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function $B({className:e,...t}){return p.jsx("div",{"data-slot":"alert-description",className:_t("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function Tp({className:e,...t}){return p.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:p.jsx("table",{"data-slot":"table",className:_t("w-full caption-bottom text-sm",e),...t})})}function Ap({className:e,...t}){return p.jsx("thead",{"data-slot":"table-header",className:_t("[&_tr]:border-b",e),...t})}function Np({className:e,...t}){return p.jsx("tbody",{"data-slot":"table-body",className:_t("[&_tr:last-child]:border-0",e),...t})}function Xr({className:e,...t}){return p.jsx("tr",{"data-slot":"table-row",className:_t("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Tr({className:e,...t}){return p.jsx("th",{"data-slot":"table-head",className:_t("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Dn({className:e,...t}){return p.jsx("td",{"data-slot":"table-cell",className:_t("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const Rbe=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=o0(dn(I=>({loadedMods:I.loadedMods,addDbMod:I.addDbMod,updateDbMod:I.updateDbMod,deleteDbMod:I.deleteDbMod,dbMods:I.dbMods,isLoading:I.isLoading}))),[s,o]=T.useState(""),[l,u]=T.useState(""),[d,h]=T.useState(""),[m,y]=T.useState(!1),[v,b]=T.useState({}),[x,w]=T.useState({}),S=T.useCallback(async()=>{if(!s.trim()){Ye.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){Ye.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){Ye.error("Provide either a Mod URL or Script Content, not both.");return}y(!0);try{const I={name:s.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(I),o(""),u(""),h(""),Ye.info("Mod added. Reload required for changes to take effect.")}catch(I){console.error("Failed to add mod (from component):",I)}finally{y(!1)}},[s,l,d,t,a==null?void 0:a.length]),E=T.useCallback(async I=>{b(R=>({...R,[I.id]:!0}));try{await n(I.id,{enabled:!I.enabled}),Ye.info(`Mod "${I.name}" ${I.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(R){console.error("Failed to update mod (from component):",R)}finally{b(R=>({...R,[I.id]:!1}))}},[n]),C=T.useCallback(async I=>{if(window.confirm(`Are you sure you want to delete the mod "${I.name}"? This cannot be undone.`)){w(R=>({...R,[I.id]:!0}));try{await r(I.id),Ye.info("Mod deleted. Reload required for changes to take effect.")}catch(R){console.error("Failed to delete mod (from component):",R)}finally{w(R=>({...R,[I.id]:!1}))}}},[r]),k=T.useCallback(I=>{const R=e.find(F=>F.id===I);if(R)if(R.error){const F=R.error instanceof Error?R.error.message:String(R.error);return{status:"Error",error:R.error,tooltip:F}}else return{status:"Loaded"};const j=(a||[]).find(F=>F.id===I);return j?j.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs(FB,{variant:"destructive",className:"border-destructive/50",children:[p.jsx(Jw,{className:"h-4 w-4"}),p.jsx(LB,{children:"Security Warning"}),p.jsx($B,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),p.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Kt,{htmlFor:"mod-name",children:"Mod Name"}),p.jsx(Rn,{id:"mod-name",value:s,onChange:I=>o(I.target.value),placeholder:"My Awesome Mod",disabled:m})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Kt,{htmlFor:"mod-url",children:"Source URL (Optional)"}),p.jsx(Rn,{id:"mod-url",type:"url",value:l,onChange:I=>u(I.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!d.trim()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Kt,{htmlFor:"mod-script",children:"Script Content (Optional)"}),p.jsx($u,{id:"mod-script",value:d,onChange:I=>h(I.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!l.trim()})]}),p.jsxs(jt,{onClick:S,disabled:m,children:[m&&p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),p.jsx("div",{className:"rounded-md border",children:p.jsx(Gn,{delayDuration:100,children:p.jsxs(Tp,{children:[p.jsx(Ap,{children:p.jsxs(Xr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{children:"Source"}),p.jsx(Tr,{children:"Status"}),p.jsx(Tr,{className:"text-center",children:"Enabled"}),p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Np,{children:i?p.jsxs(p.Fragment,{children:[p.jsx(Xr,{children:p.jsx(Dn,{colSpan:5,children:p.jsx(dr,{className:"h-10 w-full"})})}),p.jsx(Xr,{children:p.jsx(Dn,{colSpan:5,children:p.jsx(dr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?p.jsx(Xr,{children:p.jsx(Dn,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(I=>{const{status:R,error:j,tooltip:F}=k(I.id),$=I.sourceUrl?new URL(I.sourceUrl).hostname:"Direct Script",G=v[I.id],D=x[I.id],Z=G||D,q=R==="Error";return p.jsxs(Xr,{children:[p.jsx(Dn,{className:"font-medium",children:I.name}),p.jsx(Dn,{className:"text-muted-foreground",children:$}),p.jsxs(Dn,{children:[p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx("span",{className:q?"text-destructive font-semibold cursor-help":"",children:R})}),F&&p.jsx(Qn,{className:"max-w-xs break-words",children:p.jsx("p",{children:F})})]}),q&&j&&p.jsx("p",{className:"text-xs text-destructive truncate",children:j instanceof Error?j.message:String(j)})]}),p.jsxs(Dn,{className:"text-center",children:[p.jsx(Fi,{checked:I.enabled??!1,onCheckedChange:()=>E(I),disabled:Z,"aria-label":`Enable ${I.name}`}),G&&p.jsx(On,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),p.jsx(Dn,{className:"text-right",children:p.jsx(jt,{variant:"ghost",size:"icon",onClick:()=>C(I),disabled:Z,"aria-label":`Delete ${I.name}`,className:"text-destructive hover:text-destructive/80",children:D?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(Li,{className:"h-4 w-4"})})})]},I.id)})})]})})})]})]})},Ibe=gt.memo(Rbe),jbe=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:s,isDeleting:o,onSelectModelForDetails:l})=>{var G,D;const[u,d]=T.useState(!0),h=lw(e.type),m=Fk(e.type),y=gh(e.type),v=s==="fetching"||o,b=o||s==="fetching",x=o||s==="fetching",S=$n(Z=>Z.getAllAvailableModelDefsForProvider)(e.id),E=T.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),C=e.apiKeyId?t.some(Z=>Z.id===e.apiKeyId):!1,k=h&&!C,I=T.useCallback(async(Z,q)=>{const ue=new Set(e.enabledModels??[]);q?ue.add(Z):ue.delete(Z);const ie=Array.from(ue);try{await i(e.id,{enabledModels:ie})}catch(ne){Ye.error("Failed to update model status."),console.error("Failed to save model toggle:",ne)}},[e.enabledModels,e.id,i]),R=()=>d(Z=>!Z),j=((G=e.enabledModels)==null?void 0:G.length)??0,F=S.length,$=Z=>{const q=nu(e.id,Z);l(q)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{children:p.jsx("span",{className:_t("h-2.5 w-2.5 rounded-full flex-shrink-0 block",s==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),p.jsx(Qn,{side:"top",children:s==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),p.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),p.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),k&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{children:p.jsx(Nh,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),p.jsx(Qn,{side:"top",children:p.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),p.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[p.jsx(Vn,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:p.jsx(m0,{}),className:"h-8 w-8"}),p.jsx(Vn,{tooltipText:"Delete",onClick:r,disabled:x,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(Li,{})})]})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&p.jsxs("div",{children:["API Key:"," ",e.apiKeyId?C?p.jsx("span",{className:"text-green-400",children:((D=t.find(Z=>Z.id===e.apiKeyId))==null?void 0:D.name)||"Linked (Unnamed Key)"}):p.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):p.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),m&&p.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),p.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?p.jsx("span",{className:"text-green-400",children:"Enabled"}):p.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),y&&p.jsx("div",{className:"pt-1",children:p.jsxs(jt,{variant:"outline",size:"sm",onClick:a,disabled:v,className:"text-xs h-7 px-2",children:[s==="fetching"&&p.jsx(On,{className:"h-3 w-3 mr-1 animate-spin"}),s==="success"&&p.jsx(ls,{className:"h-3 w-3 mr-1 text-green-500"}),s==="error"&&p.jsx(Nh,{className:"h-3 w-3 mr-1 text-destructive"}),s==="idle"&&p.jsx(Xw,{className:"h-3 w-3 mr-1"}),s==="fetching"?"Fetching...":s==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),p.jsxs("div",{className:"space-y-1 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",j," / ",F," enabled)"]}),p.jsx(Vn,{tooltipText:u?"Show Models":"Hide Models",onClick:R,"aria-label":u?"Show model list":"Hide model list",icon:u?p.jsx(il,{}):p.jsx(Gd,{}),className:"h-6 w-6"})]}),!u&&p.jsx(oA,{providerId:e.id,allAvailableModels:S.map(Z=>({id:Z.id,name:Z.name})),enabledModelIds:E,onToggleModel:I,isLoading:s==="fetching",disabled:o,listHeightClass:"h-64",onModelClick:$})]})]})},Obe=gt.memo(jbe),Dbe=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:s,onChange:o})=>{const l=lw(t.type??null),u=Fk(t.type??null),d=gh(t.type??null),h=t.isEnabled??!1,m=t.autoFetchModels??!1,y=T.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=T.useCallback((b,x)=>{const w=new Set(t.enabledModels??[]);x?w.add(b):w.delete(b);const S=Array.from(w);o("enabledModels",S)},[t.enabledModels,o]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(Kt,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),p.jsx(Rn,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>o("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx(Kt,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),p.jsxs(el,{value:t.type??"",onValueChange:b=>o("type",b),disabled:a,children:[p.jsx(nl,{id:`edit-type-${e}`,children:p.jsx(tl,{placeholder:"Select Type"})}),p.jsx(rl,{children:jd.map(b=>p.jsx(Gr,{value:b.value,children:b.label},b.value))})]})]}),l&&p.jsxs("div",{className:"space-y-1",children:[p.jsx(Kt,{children:"API Key"}),p.jsx(h$,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>o("apiKeyId",b),apiKeys:n,disabled:a})]}),u&&p.jsxs("div",{className:"space-y-1",children:[p.jsx(Kt,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),p.jsx(Rn,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>o("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),p.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[p.jsx(Fi,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>o("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),p.jsx(Kt,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Fi,{id:`edit-autofetch-${e}`,checked:m,onCheckedChange:b=>o("autoFetchModels",b),disabled:!d||a,"aria-labelledby":`edit-autofetch-label-${e}`}),p.jsxs(Kt,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:d?"":"text-muted-foreground",children:["Auto-fetch models ",d?"":"(Not Supported)"]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),p.jsx(oA,{providerId:e,allAvailableModels:r,enabledModelIds:y,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),p.jsx(Rs,{className:"my-4"}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(jt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[p.jsx(xi,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),p.jsxs(jt,{variant:"secondary",size:"sm",onClick:s,disabled:a,type:"button",children:[a&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},Mbe=gt.memo(Dbe),Pbe=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:s})=>{const[o,l]=T.useState(!1),[u,d]=T.useState(!1),[h,m]=T.useState(!1),[y,v]=T.useState({}),b=$n(F=>F.getAllAvailableModelDefsForProvider),[x,w]=T.useState([]),S=T.useMemo(()=>[...x].sort((F,$)=>(F.name||F.id).localeCompare($.name||$.id)),[x]);T.useEffect(()=>{if(o){const F=b(e.id);w(F.map($=>({id:$.id,name:$.name}))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else w([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),C=()=>{l(!1),v({}),d(!1)},k=T.useCallback(async()=>{d(!0);try{const F=y.enabledModels&&y.enabledModels.length>0?y.enabledModels:null,$={name:y.name,type:y.type,isEnabled:y.isEnabled,apiKeyId:y.apiKeyId,baseURL:y.baseURL,autoFetchModels:y.autoFetchModels,enabledModels:F};Object.keys($).forEach(G=>{$[G]===void 0&&delete $[G]}),await n(e.id,$),l(!1),v({}),Ye.success(`Provider "${$.name||e.name}" updated.`)}catch(F){console.error("Failed to save provider update:",F),Ye.error("Failed to save provider configuration.")}finally{d(!1)}},[y,n,e.id,e.name]),I=T.useCallback((F,$)=>{v(G=>({...G,[F]:$}))},[]),R=T.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){m(!0);try{await r(e.id)}catch(F){console.error("Failed to delete provider:",F),m(!1)}}},[r,e.id,e.name]),j=T.useCallback(async()=>{if(await a(e.id),o){const F=b(e.id);w(F.map($=>({id:$.id,name:$.name})))}},[a,e.id,o,b]);return p.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?p.jsx(Mbe,{providerId:e.id,editData:y,apiKeys:t,allAvailableModels:S,isSaving:u,onCancel:C,onSave:k,onChange:I,onUpdate:n}):p.jsx(Obe,{provider:e,apiKeys:t,onEdit:E,onDelete:R,onFetchModels:j,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:s})})},Fbe=gt.memo(Pbe);var M2="rovingFocusGroup.onEntryFocus",Lbe={bubbles:!1,cancelable:!0},ay="RovingFocusGroup",[ok,BB,$be]=Jx(ay),[Bbe,S1]=di(ay,[$be]),[zbe,Ube]=Bbe(ay),zB=T.forwardRef((e,t)=>p.jsx(ok.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(ok.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Hbe,{...e,ref:t})})}));zB.displayName=ay;var Hbe=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=T.useRef(null),y=Cn(t,m),v=Sp(i),[b,x]=js({prop:s,defaultProp:o??null,onChange:l,caller:ay}),[w,S]=T.useState(!1),E=La(u),C=BB(n),k=T.useRef(!1),[I,R]=T.useState(0);return T.useEffect(()=>{const j=m.current;if(j)return j.addEventListener(M2,E),()=>j.removeEventListener(M2,E)},[E]),p.jsx(zbe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:T.useCallback(j=>x(j),[x]),onItemShiftTab:T.useCallback(()=>S(!0),[]),onFocusableItemAdd:T.useCallback(()=>R(j=>j+1),[]),onFocusableItemRemove:T.useCallback(()=>R(j=>j-1),[]),children:p.jsx(rn.div,{tabIndex:w||I===0?-1:0,"data-orientation":r,...h,ref:y,style:{outline:"none",...e.style},onMouseDown:qt(e.onMouseDown,()=>{k.current=!0}),onFocus:qt(e.onFocus,j=>{const F=!k.current;if(j.target===j.currentTarget&&F&&!w){const $=new CustomEvent(M2,Lbe);if(j.currentTarget.dispatchEvent($),!$.defaultPrevented){const G=C().filter(ie=>ie.focusable),D=G.find(ie=>ie.active),Z=G.find(ie=>ie.id===b),ue=[D,Z,...G].filter(Boolean).map(ie=>ie.ref.current);qB(ue,d)}}k.current=!1}),onBlur:qt(e.onBlur,()=>S(!1))})})}),UB="RovingFocusGroupItem",HB=T.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s,...o}=e,l=Ea(),u=i||l,d=Ube(UB,n),h=d.currentTabStopId===u,m=BB(n),{onFocusableItemAdd:y,onFocusableItemRemove:v,currentTabStopId:b}=d;return T.useEffect(()=>{if(r)return y(),()=>v()},[r,y,v]),p.jsx(ok.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:p.jsx(rn.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:qt(e.onMouseDown,x=>{r?d.onItemFocus(u):x.preventDefault()}),onFocus:qt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:qt(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){d.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const w=Gbe(x,d.orientation,d.dir);if(w!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let E=m().filter(C=>C.focusable).map(C=>C.ref.current);if(w==="last")E.reverse();else if(w==="prev"||w==="next"){w==="prev"&&E.reverse();const C=E.indexOf(x.currentTarget);E=d.loop?Kbe(E,C+1):E.slice(C+1)}setTimeout(()=>qB(E))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:b!=null}):s})})});HB.displayName=UB;var qbe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Vbe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Gbe(e,t,n){const r=Vbe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qbe[r]}function qB(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Kbe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var VB=zB,GB=HB,E1="Tabs",[Wbe,eEe]=di(E1,[S1]),KB=S1(),[Zbe,EA]=Wbe(E1),WB=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...u}=e,d=Sp(o),[h,m]=js({prop:r,onChange:a,defaultProp:i??"",caller:E1});return p.jsx(Zbe,{scope:n,baseId:Ea(),value:h,onValueChange:m,orientation:s,dir:d,activationMode:l,children:p.jsx(rn.div,{dir:d,"data-orientation":s,...u,ref:t})})});WB.displayName=E1;var ZB="TabsList",YB=T.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=EA(ZB,n),s=KB(n);return p.jsx(VB,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(rn.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});YB.displayName=ZB;var XB="TabsTrigger",JB=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,s=EA(XB,n),o=KB(n),l=tz(s.baseId,r),u=nz(s.baseId,r),d=r===s.value;return p.jsx(GB,{asChild:!0,...o,focusable:!a,active:d,children:p.jsx(rn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:qt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:qt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:qt(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!a&&h&&s.onValueChange(r)})})})});JB.displayName=XB;var QB="TabsContent",ez=T.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...s}=e,o=EA(QB,n),l=tz(o.baseId,r),u=nz(o.baseId,r),d=r===o.value,h=T.useRef(d);return T.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),p.jsx(Ta,{present:a||d,children:({present:m})=>p.jsx(rn.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});ez.displayName=QB;function tz(e,t){return`${e}-trigger-${t}`}function nz(e,t){return`${e}-content-${t}`}var Ybe=WB,Xbe=YB,Jbe=JB,Qbe=ez;function eve({className:e,...t}){return p.jsx(Ybe,{"data-slot":"tabs",className:_t("flex flex-col gap-2",e),...t})}function tve({className:e,...t}){return p.jsx(Xbe,{"data-slot":"tabs-list",className:_t("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function nve({className:e,...t}){return p.jsx(Jbe,{"data-slot":"tabs-trigger",className:_t("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function rve({className:e,...t}){return p.jsx(Qbe,{"data-slot":"tabs-content",className:_t("flex-1 outline-none",e),...t})}const qu=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:s,scrollable:o})=>{var y;const[l,u]=T.useState(n??t??((y=e[0])==null?void 0:y.value));T.useEffect(()=>{n!==void 0&&n!==l&&u(n)},[n,l]);const d=v=>{u(v),r&&r(v)},h=_t("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),m=({children:v})=>{const b=_t("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",s);return o?p.jsx(sc,{className:b,children:v}):p.jsx("div",{className:b,children:v})};return p.jsxs(eve,{value:l,onValueChange:d,defaultValue:t,className:_t("flex flex-col h-full",a),children:[p.jsx(tve,{className:_t("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>p.jsx(nve,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),p.jsx(m,{children:e.map(v=>p.jsx(rve,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})};function ave(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const C1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Rp(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function CA(e){return"nodeType"in e}function qi(e){var t,n;return e?Rp(e)?e:CA(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function kA(e){const{Document:t}=qi(e);return e instanceof t}function iy(e){return Rp(e)?!1:e instanceof qi(e).HTMLElement}function rz(e){return e instanceof qi(e).SVGElement}function Ip(e){return e?Rp(e)?e.document:CA(e)?kA(e)?e:iy(e)||rz(e)?e.ownerDocument:document:document:document}const al=C1?T.useLayoutEffect:T.useEffect;function TA(e){const t=T.useRef(e);return al(()=>{t.current=e}),T.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function ive(){const e=T.useRef(null),t=T.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=T.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function c0(e,t){t===void 0&&(t=[e]);const n=T.useRef(e);return al(()=>{n.current!==e&&(n.current=e)},t),n}function sy(e,t){const n=T.useRef();return T.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function qw(e){const t=TA(e),n=T.useRef(null),r=T.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function lk(e){const t=T.useRef();return T.useEffect(()=>{t.current=e},[e]),t.current}let P2={};function oy(e,t){return T.useMemo(()=>{if(t)return t;const n=P2[e]==null?0:P2[e]+1;return P2[e]=n,e+"-"+n},[e,t])}function az(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>{const o=Object.entries(s);for(const[l,u]of o){const d=i[l];d!=null&&(i[l]=d+e*u)}return i},{...t})}}const Ah=az(1),u0=az(-1);function sve(e){return"clientX"in e&&"clientY"in e}function AA(e){if(!e)return!1;const{KeyboardEvent:t}=qi(e.target);return t&&e instanceof t}function ove(e){if(!e)return!1;const{TouchEvent:t}=qi(e.target);return t&&e instanceof t}function ck(e){if(ove(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return sve(e)?{x:e.clientX,y:e.clientY}:null}const d0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[d0.Translate.toString(e),d0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),f6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function lve(e){return e.matches(f6)?e:e.querySelector(f6)}const cve={display:"none"};function uve(e){let{id:t,value:n}=e;return gt.createElement("div",{id:t,style:cve},n)}function dve(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function fve(){const[e,t]=T.useState("");return{announce:T.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const iz=T.createContext(null);function hve(e){const t=T.useContext(iz);T.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function pve(){const[e]=T.useState(()=>new Set),t=T.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[T.useCallback(r=>{let{type:a,event:i}=r;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const mve={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},gve={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function yve(e){let{announcements:t=gve,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=mve}=e;const{announce:i,announcement:s}=fve(),o=oy("DndLiveRegion"),[l,u]=T.useState(!1);if(T.useEffect(()=>{u(!0)},[]),hve(T.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:y}=h;t.onDragMove&&i(t.onDragMove({active:m,over:y}))},onDragOver(h){let{active:m,over:y}=h;i(t.onDragOver({active:m,over:y}))},onDragEnd(h){let{active:m,over:y}=h;i(t.onDragEnd({active:m,over:y}))},onDragCancel(h){let{active:m,over:y}=h;i(t.onDragCancel({active:m,over:y}))}}),[i,t])),!l)return null;const d=gt.createElement(gt.Fragment,null,gt.createElement(uve,{id:r,value:a.draggable}),gt.createElement(dve,{id:o,announcement:s}));return n?Ho.createPortal(d,n):d}var xa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(xa||(xa={}));function Vw(){}function h6(e,t){return T.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function bve(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return T.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const co=Object.freeze({x:0,y:0});function sz(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function oz(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function vve(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function p6(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function lz(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function m6(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const wve=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=m6(t,t.left,t.top),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=sz(m6(l),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(oz)},xve=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=p6(t),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=p6(l),d=a.reduce((m,y,v)=>m+sz(u[v],y),0),h=Number((d/4).toFixed(4));i.push({id:o,data:{droppableContainer:s,value:h}})}}return i.sort(oz)};function _ve(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const l=t.width*t.height,u=e.width*e.height,d=s*o,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const Sve=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:s}=i,o=n.get(s);if(o){const l=_ve(o,t);l>0&&a.push({id:s,data:{droppableContainer:i,value:l}})}}return a.sort(vve)};function Eve(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function cz(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:co}function Cve(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...n})}}const kve=Cve(1);function Tve(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ave(e,t,n){const r=Tve(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,l=e.left-s-(1-a)*parseFloat(n),u=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const Nve={ignoreTransform:!1};function jp(e,t){t===void 0&&(t=Nve);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=qi(e).getComputedStyle(e);u&&(n=Ave(n,u,d))}const{top:r,left:a,width:i,height:s,bottom:o,right:l}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:l}}function g6(e){return jp(e,{ignoreTransform:!0})}function Rve(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Ive(e,t){return t===void 0&&(t=qi(e).getComputedStyle(e)),t.position==="fixed"}function jve(e,t){t===void 0&&(t=qi(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function k1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(kA(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!iy(a)||rz(a)||n.includes(a))return n;const i=qi(e).getComputedStyle(a);return a!==e&&jve(a,i)&&n.push(a),Ive(a,i)?n:r(a.parentNode)}return e?r(e):n}function uz(e){const[t]=k1(e,1);return t??null}function F2(e){return!C1||!e?null:Rp(e)?e:CA(e)?kA(e)||e===Ip(e).scrollingElement?window:iy(e)?e:null:null}function dz(e){return Rp(e)?e.scrollX:e.scrollLeft}function fz(e){return Rp(e)?e.scrollY:e.scrollTop}function uk(e){return{x:dz(e),y:fz(e)}}var Fa;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Fa||(Fa={}));function hz(e){return!C1||!e?!1:e===document.scrollingElement}function pz(e){const t={x:0,y:0},n=hz(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:r,minScroll:t}}const Ove={x:.2,y:.2};function Dve(e,t,n,r,a){let{top:i,left:s,right:o,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=Ove);const{isTop:u,isBottom:d,isLeft:h,isRight:m}=pz(e),y={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+b.height?(y.y=Fa.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(y.y=Fa.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!m&&o>=t.right-b.width?(y.x=Fa.Forward,v.x=r*Math.abs((t.right-b.width-o)/b.width)):!h&&s<=t.left+b.width&&(y.x=Fa.Backward,v.x=r*Math.abs((t.left+b.width-s)/b.width)),{direction:y,speed:v}}function Mve(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function mz(e){return e.reduce((t,n)=>Ah(t,uk(n)),co)}function Pve(e){return e.reduce((t,n)=>t+dz(n),0)}function Fve(e){return e.reduce((t,n)=>t+fz(n),0)}function Lve(e,t){if(t===void 0&&(t=jp),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);uz(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const $ve=[["x",["left","right"],Pve],["y",["top","bottom"],Fve]];class NA{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=k1(n),a=mz(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of $ve)for(const l of s)Object.defineProperty(this,l,{get:()=>{const u=o(r),d=a[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ig{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Bve(e){const{EventTarget:t}=qi(e);return e instanceof t?e:Ip(e)}function L2(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var ks;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ks||(ks={}));function y6(e){e.preventDefault()}function zve(e){e.stopPropagation()}var er;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(er||(er={}));const gz={start:[er.Space,er.Enter],cancel:[er.Esc],end:[er.Space,er.Enter,er.Tab]},Uve=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case er.Right:return{...n,x:n.x+25};case er.Left:return{...n,x:n.x-25};case er.Down:return{...n,y:n.y+25};case er.Up:return{...n,y:n.y-25}}};class RA{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ig(Ip(n)),this.windowListeners=new ig(qi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ks.Resize,this.handleCancel),this.windowListeners.add(ks.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ks.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Lve(r),n(co)}handleKeyDown(t){if(AA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=gz,coordinateGetter:s=Uve,scrollBehavior:o="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:co;this.referenceCoordinates||(this.referenceCoordinates=d);const h=s(t,{active:n,context:r.current,currentCoordinates:d});if(h){const m=u0(h,d),y={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const x=t.code,{isTop:w,isRight:S,isLeft:E,isBottom:C,maxScroll:k,minScroll:I}=pz(b),R=Mve(b),j={x:Math.min(x===er.Right?R.right-R.width/2:R.right,Math.max(x===er.Right?R.left:R.left+R.width/2,h.x)),y:Math.min(x===er.Down?R.bottom-R.height/2:R.bottom,Math.max(x===er.Down?R.top:R.top+R.height/2,h.y))},F=x===er.Right&&!S||x===er.Left&&!E,$=x===er.Down&&!C||x===er.Up&&!w;if(F&&j.x!==h.x){const G=b.scrollLeft+m.x,D=x===er.Right&&G<=k.x||x===er.Left&&G>=I.x;if(D&&!m.y){b.scrollTo({left:G,behavior:o});return}D?y.x=b.scrollLeft-G:y.x=x===er.Right?b.scrollLeft-k.x:b.scrollLeft-I.x,y.x&&b.scrollBy({left:-y.x,behavior:o});break}else if($&&j.y!==h.y){const G=b.scrollTop+m.y,D=x===er.Down&&G<=k.y||x===er.Up&&G>=I.y;if(D&&!m.x){b.scrollTo({top:G,behavior:o});return}D?y.y=b.scrollTop-G:y.y=x===er.Down?b.scrollTop-k.y:b.scrollTop-I.y,y.y&&b.scrollBy({top:-y.y,behavior:o});break}}this.handleMove(t,Ah(u0(h,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}RA.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=gz,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function b6(e){return!!(e&&"distance"in e)}function v6(e){return!!(e&&"delay"in e)}class IA{constructor(t,n,r){var a;r===void 0&&(r=Bve(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=Ip(s),this.documentListeners=new ig(this.document),this.listeners=new ig(r),this.windowListeners=new ig(qi(s)),this.initialCoordinates=(a=ck(i))!=null?a:co,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ks.Resize,this.handleCancel),this.windowListeners.add(ks.DragStart,y6),this.windowListeners.add(ks.VisibilityChange,this.handleCancel),this.windowListeners.add(ks.ContextMenu,y6),this.documentListeners.add(ks.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(v6(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(b6(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ks.Click,zve,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ks.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const l=(n=ck(t))!=null?n:co,u=u0(a,l);if(!r&&o){if(b6(o)){if(o.tolerance!=null&&L2(u,o.tolerance))return this.handleCancel();if(L2(u,o.distance))return this.handleStart()}if(v6(o)&&L2(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===er.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Hve={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class jA extends IA{constructor(t){const{event:n}=t,r=Ip(n.target);super(t,Hve,r)}}jA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const qve={move:{name:"mousemove"},end:{name:"mouseup"}};var dk;(function(e){e[e.RightClick=2]="RightClick"})(dk||(dk={}));class Vve extends IA{constructor(t){super(t,qve,Ip(t.event.target))}}Vve.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===dk.RightClick?!1:(r==null||r({event:n}),!0)}}];const $2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Gve extends IA{constructor(t){super(t,$2)}static setup(){return window.addEventListener($2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener($2.move.name,t)};function t(){}}}Gve.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var sg;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(sg||(sg={}));var Gw;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Gw||(Gw={}));function Kve(e){let{acceleration:t,activator:n=sg.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:o=Gw.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:m}=e;const y=Zve({delta:h,disabled:!i}),[v,b]=ive(),x=T.useRef({x:0,y:0}),w=T.useRef({x:0,y:0}),S=T.useMemo(()=>{switch(n){case sg.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case sg.DraggableRect:return a}},[n,a,l]),E=T.useRef(null),C=T.useCallback(()=>{const I=E.current;if(!I)return;const R=x.current.x*w.current.x,j=x.current.y*w.current.y;I.scrollBy(R,j)},[]),k=T.useMemo(()=>o===Gw.TreeOrder?[...u].reverse():u,[o,u]);T.useEffect(()=>{if(!i||!u.length||!S){b();return}for(const I of k){if((r==null?void 0:r(I))===!1)continue;const R=u.indexOf(I),j=d[R];if(!j)continue;const{direction:F,speed:$}=Dve(I,j,S,t,m);for(const G of["x","y"])y[G][F[G]]||($[G]=0,F[G]=0);if($.x>0||$.y>0){b(),E.current=I,v(C,s),x.current=$,w.current=F;return}}x.current={x:0,y:0},w.current={x:0,y:0},b()},[t,C,r,b,i,s,JSON.stringify(S),JSON.stringify(y),v,u,k,d,JSON.stringify(m)])}const Wve={x:{[Fa.Backward]:!1,[Fa.Forward]:!1},y:{[Fa.Backward]:!1,[Fa.Forward]:!1}};function Zve(e){let{delta:t,disabled:n}=e;const r=lk(t);return sy(a=>{if(n||!r||!a)return Wve;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Fa.Backward]:a.x[Fa.Backward]||i.x===-1,[Fa.Forward]:a.x[Fa.Forward]||i.x===1},y:{[Fa.Backward]:a.y[Fa.Backward]||i.y===-1,[Fa.Forward]:a.y[Fa.Forward]||i.y===1}}},[n,t,r])}function Yve(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return sy(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function Xve(e,t){return T.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var f0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(f0||(f0={}));var fk;(function(e){e.Optimized="optimized"})(fk||(fk={}));const w6=new Map;function Jve(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=T.useState(null),{frequency:o,measure:l,strategy:u}=a,d=T.useRef(e),h=x(),m=c0(h),y=T.useCallback(function(w){w===void 0&&(w=[]),!m.current&&s(S=>S===null?w:S.concat(w.filter(E=>!S.includes(E))))},[m]),v=T.useRef(null),b=sy(w=>{if(h&&!n)return w6;if(!w||w===w6||d.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new NA(l(C),C):null;E.rect.current=k,k&&S.set(E.id,k)}return S}return w},[e,i,n,h,l]);return T.useEffect(()=>{d.current=e},[e]),T.useEffect(()=>{h||y()},[n,h]),T.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),T.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{y(),v.current=null},o))},[o,h,y,...r]),{droppableRects:b,measureDroppableContainers:y,measuringScheduled:i!=null};function x(){switch(u){case f0.Always:return!1;case f0.BeforeDragging:return n;default:return!n}}}function yz(e,t){return sy(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Qve(e,t){return yz(e,t)}function ewe(e){let{callback:t,disabled:n}=e;const r=TA(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function T1(e){let{callback:t,disabled:n}=e;const r=TA(t),a=T.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return T.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function twe(e){return new NA(jp(e),e)}function x6(e,t,n){t===void 0&&(t=twe);const[r,a]=T.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const s=ewe({callback(l){if(e)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=T1({callback:i});return al(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),r}function nwe(e){const t=yz(e);return cz(e,t)}const _6=[];function rwe(e){const t=T.useRef(e),n=sy(r=>e?r&&r!==_6&&e&&t.current&&e.parentNode===t.current.parentNode?r:k1(e):_6,[e]);return T.useEffect(()=>{t.current=e},[e]),n}function awe(e){const[t,n]=T.useState(null),r=T.useRef(e),a=T.useCallback(i=>{const s=F2(i.target);s&&n(o=>o?(o.set(s,uk(s)),new Map(o)):null)},[]);return T.useEffect(()=>{const i=r.current;if(e!==i){s(i);const o=e.map(l=>{const u=F2(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,uk(u)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(l=>{const u=F2(l);u==null||u.removeEventListener("scroll",a)})}},[a,e]),T.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>Ah(i,s),co):mz(e):co,[e,t])}function S6(e,t){t===void 0&&(t=[]);const n=T.useRef(null);return T.useEffect(()=>{n.current=null},t),T.useEffect(()=>{const r=e!==co;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?u0(e,n.current):co}function iwe(e){T.useEffect(()=>{if(!C1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function swe(e,t){return T.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=s=>{i(s,t)},n},{}),[e,t])}function bz(e){return T.useMemo(()=>e?Rve(e):null,[e])}const E6=[];function owe(e,t){t===void 0&&(t=jp);const[n]=e,r=bz(n?qi(n):null),[a,i]=T.useState(E6);function s(){i(()=>e.length?e.map(l=>hz(l)?r:new NA(t(l),l)):E6)}const o=T1({callback:s});return al(()=>{o==null||o.disconnect(),s(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),a}function lwe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return iy(t)?t:e}function cwe(e){let{measure:t}=e;const[n,r]=T.useState(null),a=T.useCallback(u=>{for(const{target:d}of u)if(iy(d)){r(h=>{const m=t(d);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=T1({callback:a}),s=T.useCallback(u=>{const d=lwe(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[o,l]=qw(s);return T.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const uwe=[{sensor:jA,options:{}},{sensor:RA,options:{}}],dwe={current:{}},Ov={draggable:{measure:g6},droppable:{measure:g6,strategy:f0.WhileDragging,frequency:fk.Optimized},dragOverlay:{measure:jp}};class og extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const fwe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new og,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vw},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ov,measureDroppableContainers:Vw,windowRect:null,measuringScheduled:!1},hwe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vw,draggableNodes:new Map,over:null,measureDroppableContainers:Vw},A1=T.createContext(hwe),vz=T.createContext(fwe);function pwe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new og}}}function mwe(e,t){switch(t.type){case xa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case xa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case xa.DragEnd:case xa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xa.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new og(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case xa.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new og(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case xa.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new og(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function gwe(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=T.useContext(A1),i=lk(r),s=lk(n==null?void 0:n.id);return T.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!AA(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=lve(d);if(h){h.focus();break}}})}},[r,t,a,s,i]),null}function ywe(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function bwe(e){return T.useMemo(()=>({draggable:{...Ov.draggable,...e==null?void 0:e.draggable},droppable:{...Ov.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ov.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function vwe(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=T.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;al(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=cz(d,r);if(s||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=uz(u);m&&m.scrollBy({top:h.y,left:h.x})}},[t,s,o,r,n])}const wz=T.createContext({...co,scaleX:1,scaleY:1});var eu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(eu||(eu={}));const wwe=T.memo(function(t){var n,r,a,i;let{id:s,accessibility:o,autoScroll:l=!0,children:u,sensors:d=uwe,collisionDetection:h=Sve,measuring:m,modifiers:y,...v}=t;const b=T.useReducer(mwe,void 0,pwe),[x,w]=b,[S,E]=pve(),[C,k]=T.useState(eu.Uninitialized),I=C===eu.Initialized,{draggable:{active:R,nodes:j,translate:F},droppable:{containers:$}}=x,G=R!=null?j.get(R):null,D=T.useRef({initial:null,translated:null}),Z=T.useMemo(()=>{var nt;return R!=null?{id:R,data:(nt=G==null?void 0:G.data)!=null?nt:dwe,rect:D}:null},[R,G]),q=T.useRef(null),[ue,ie]=T.useState(null),[ne,X]=T.useState(null),ae=c0(v,Object.values(v)),B=oy("DndDescribedBy",s),J=T.useMemo(()=>$.getEnabled(),[$]),ee=bwe(m),{droppableRects:te,measureDroppableContainers:fe,measuringScheduled:ve}=Jve(J,{dragging:I,dependencies:[F.x,F.y],config:ee.droppable}),De=Yve(j,R),Ae=T.useMemo(()=>ne?ck(ne):null,[ne]),Ne=Be(),Ce=Qve(De,ee.draggable.measure);vwe({activeNode:R!=null?j.get(R):null,config:Ne.layoutShiftCompensation,initialRect:Ce,measure:ee.draggable.measure});const Pe=x6(De,ee.draggable.measure,Ce),Qe=x6(De?De.parentElement:null),Le=T.useRef({activatorEvent:null,active:null,activeNode:De,collisionRect:null,collisions:null,droppableRects:te,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:$,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=$.getNodeFor((n=Le.current.over)==null?void 0:n.id),z=cwe({measure:ee.dragOverlay.measure}),Se=(r=z.nodeRef.current)!=null?r:De,Te=I?(a=z.rect)!=null?a:Pe:null,de=!!(z.nodeRef.current&&z.rect),se=nwe(de?null:Pe),Q=bz(Se?qi(Se):null),xe=rwe(I?Ie??De:null),Fe=owe(xe),Ee=ywe(y,{transform:{x:F.x-se.x,y:F.y-se.y,scaleX:1,scaleY:1},activatorEvent:ne,active:Z,activeNodeRect:Pe,containerNodeRect:Qe,draggingNodeRect:Te,over:Le.current.over,overlayNodeRect:z.rect,scrollableAncestors:xe,scrollableAncestorRects:Fe,windowRect:Q}),Ge=Ae?Ah(Ae,F):null,Nt=awe(xe),it=S6(Nt),St=S6(Nt,[Pe]),Ft=Ah(Ee,it),Dt=Te?kve(Te,Ee):null,Zt=Z&&Dt?h({active:Z,collisionRect:Dt,droppableRects:te,droppableContainers:J,pointerCoordinates:Ge}):null,ye=lz(Zt,"id"),[O,K]=T.useState(null),he=de?Ee:Ah(Ee,St),je=Eve(he,(i=O==null?void 0:O.rect)!=null?i:null,Pe),be=T.useRef(null),ke=T.useCallback((nt,ge)=>{let{sensor:Oe,options:Ke}=ge;if(q.current==null)return;const Ot=j.get(q.current);if(!Ot)return;const me=nt.nativeEvent,V=new Oe({active:q.current,activeNode:Ot,event:me,options:Ke,context:Le,onAbort(W){if(!j.get(W))return;const{onDragAbort:Re}=ae.current,He={id:W};Re==null||Re(He),S({type:"onDragAbort",event:He})},onPending(W,pe,Re,He){if(!j.get(W))return;const{onDragPending:Wt}=ae.current,ut={id:W,constraint:pe,initialCoordinates:Re,offset:He};Wt==null||Wt(ut),S({type:"onDragPending",event:ut})},onStart(W){const pe=q.current;if(pe==null)return;const Re=j.get(pe);if(!Re)return;const{onDragStart:He}=ae.current,pt={activatorEvent:me,active:{id:pe,data:Re.data,rect:D}};Ho.unstable_batchedUpdates(()=>{He==null||He(pt),k(eu.Initializing),w({type:xa.DragStart,initialCoordinates:W,active:pe}),S({type:"onDragStart",event:pt}),ie(be.current),X(me)})},onMove(W){w({type:xa.DragMove,coordinates:W})},onEnd:H(xa.DragEnd),onCancel:H(xa.DragCancel)});be.current=V;function H(W){return async function(){const{active:Re,collisions:He,over:pt,scrollAdjustedTranslate:Wt}=Le.current;let ut=null;if(Re&&Wt){const{cancelDrop:Rt}=ae.current;ut={activatorEvent:me,active:Re,collisions:He,delta:Wt,over:pt},W===xa.DragEnd&&typeof Rt=="function"&&await Promise.resolve(Rt(ut))&&(W=xa.DragCancel)}q.current=null,Ho.unstable_batchedUpdates(()=>{w({type:W}),k(eu.Uninitialized),K(null),ie(null),X(null),be.current=null;const Rt=W===xa.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Lt=ae.current[Rt];Lt==null||Lt(ut),S({type:Rt,event:ut})}})}}},[j]),le=T.useCallback((nt,ge)=>(Oe,Ke)=>{const Ot=Oe.nativeEvent,me=j.get(Ke);if(q.current!==null||!me||Ot.dndKit||Ot.defaultPrevented)return;const V={active:me};nt(Oe,ge.options,V)===!0&&(Ot.dndKit={capturedBy:ge.sensor},q.current=Ke,ke(Oe,ge))},[j,ke]),ft=Xve(d,le);iwe(d),al(()=>{Pe&&C===eu.Initializing&&k(eu.Initialized)},[Pe,C]),T.useEffect(()=>{const{onDragMove:nt}=ae.current,{active:ge,activatorEvent:Oe,collisions:Ke,over:Ot}=Le.current;if(!ge||!Oe)return;const me={active:ge,activatorEvent:Oe,collisions:Ke,delta:{x:Ft.x,y:Ft.y},over:Ot};Ho.unstable_batchedUpdates(()=>{nt==null||nt(me),S({type:"onDragMove",event:me})})},[Ft.x,Ft.y]),T.useEffect(()=>{const{active:nt,activatorEvent:ge,collisions:Oe,droppableContainers:Ke,scrollAdjustedTranslate:Ot}=Le.current;if(!nt||q.current==null||!ge||!Ot)return;const{onDragOver:me}=ae.current,V=Ke.get(ye),H=V&&V.rect.current?{id:V.id,rect:V.rect.current,data:V.data,disabled:V.disabled}:null,W={active:nt,activatorEvent:ge,collisions:Oe,delta:{x:Ot.x,y:Ot.y},over:H};Ho.unstable_batchedUpdates(()=>{K(H),me==null||me(W),S({type:"onDragOver",event:W})})},[ye]),al(()=>{Le.current={activatorEvent:ne,active:Z,activeNode:De,collisionRect:Dt,collisions:Zt,droppableRects:te,draggableNodes:j,draggingNode:Se,draggingNodeRect:Te,droppableContainers:$,over:O,scrollableAncestors:xe,scrollAdjustedTranslate:Ft},D.current={initial:Te,translated:Dt}},[Z,De,Zt,Dt,j,Se,Te,te,$,O,xe,Ft]),Kve({...Ne,delta:F,draggingRect:Dt,pointerCoordinates:Ge,scrollableAncestors:xe,scrollableAncestorRects:Fe});const vt=T.useMemo(()=>({active:Z,activeNode:De,activeNodeRect:Pe,activatorEvent:ne,collisions:Zt,containerNodeRect:Qe,dragOverlay:z,draggableNodes:j,droppableContainers:$,droppableRects:te,over:O,measureDroppableContainers:fe,scrollableAncestors:xe,scrollableAncestorRects:Fe,measuringConfiguration:ee,measuringScheduled:ve,windowRect:Q}),[Z,De,Pe,ne,Zt,Qe,z,j,$,te,O,fe,xe,Fe,ee,ve,Q]),P=T.useMemo(()=>({activatorEvent:ne,activators:ft,active:Z,activeNodeRect:Pe,ariaDescribedById:{draggable:B},dispatch:w,draggableNodes:j,over:O,measureDroppableContainers:fe}),[ne,ft,Z,Pe,w,B,j,O,fe]);return gt.createElement(iz.Provider,{value:E},gt.createElement(A1.Provider,{value:P},gt.createElement(vz.Provider,{value:vt},gt.createElement(wz.Provider,{value:je},u)),gt.createElement(gwe,{disabled:(o==null?void 0:o.restoreFocus)===!1})),gt.createElement(yve,{...o,hiddenTextDescribedById:B}));function Be(){const nt=(ue==null?void 0:ue.autoScrollEnabled)===!1,ge=typeof l=="object"?l.enabled===!1:l===!1,Oe=I&&!nt&&!ge;return typeof l=="object"?{...l,enabled:Oe}:{enabled:Oe}}}),xwe=T.createContext(null),C6="button",_we="Draggable";function Swe(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=oy(_we),{activators:s,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:m}=T.useContext(A1),{role:y=C6,roleDescription:v="draggable",tabIndex:b=0}=a??{},x=(l==null?void 0:l.id)===t,w=T.useContext(x?wz:xwe),[S,E]=qw(),[C,k]=qw(),I=swe(s,t),R=c0(n);al(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:R}),()=>{const F=h.get(t);F&&F.key===i&&h.delete(t)}),[h,t]);const j=T.useMemo(()=>({role:y,tabIndex:b,"aria-disabled":r,"aria-pressed":x&&y===C6?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,y,b,x,v,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:j,isDragging:x,listeners:r?void 0:I,node:S,over:m,setNodeRef:E,setActivatorNodeRef:k,transform:w}}function Ewe(){return T.useContext(vz)}const Cwe="Droppable",kwe={timeout:25};function Twe(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=oy(Cwe),{active:s,dispatch:o,over:l,measureDroppableContainers:u}=T.useContext(A1),d=T.useRef({disabled:n}),h=T.useRef(!1),m=T.useRef(null),y=T.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:x}={...kwe,...a},w=c0(b??r),S=T.useCallback(()=>{if(!h.current){h.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),y.current=null},x)},[x]),E=T1({callback:S,disabled:v||!s}),C=T.useCallback((j,F)=>{E&&(F&&(E.unobserve(F),h.current=!1),j&&E.observe(j))},[E]),[k,I]=qw(C),R=c0(t);return T.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),T.useEffect(()=>(o({type:xa.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:m,data:R}}),()=>o({type:xa.UnregisterDroppable,key:i,id:r})),[r]),T.useEffect(()=>{n!==d.current.disabled&&(o({type:xa.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:s,rect:m,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:I}}function OA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Awe(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function bv(e){return e!==null&&e>=0}function Nwe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Rwe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const xz=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=OA(t,r,n),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},vv={scaleX:1,scaleY:1},Iwe=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=(t=i[n])!=null?t:r;if(!o)return null;if(a===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(o.top+o.height):u.top-o.top,...vv}:null}const l=jwe(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-l,...vv}:a<n&&a>=s?{x:0,y:o.height+l,...vv}:{x:0,y:0,...vv}};function jwe(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const _z="Sortable",Sz=gt.createContext({activeIndex:-1,containerId:_z,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:xz,disabled:{draggable:!1,droppable:!1}});function Owe(e){let{children:t,id:n,items:r,strategy:a=xz,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:d}=Ewe(),h=oy(_z,n),m=o.rect!==null,y=T.useMemo(()=>r.map(I=>typeof I=="object"&&"id"in I?I.id:I),[r]),v=s!=null,b=s?y.indexOf(s.id):-1,x=u?y.indexOf(u.id):-1,w=T.useRef(y),S=!Nwe(y,w.current),E=x!==-1&&b===-1||S,C=Rwe(i);al(()=>{S&&v&&d(y)},[S,y,v,d]),T.useEffect(()=>{w.current=y},[y]);const k=T.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:y,overIndex:x,useDragOverlay:m,sortedRects:Awe(y,l),strategy:a}),[b,h,C.draggable,C.droppable,E,y,x,l,m,a]);return gt.createElement(Sz.Provider,{value:k},t)}const Dwe=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return OA(n,r,a).indexOf(t)},Mwe=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:l,transition:u}=e;return!u||!r||o!==i&&a===s?!1:n?!0:s!==a&&t===l},Pwe={duration:200,easing:"ease"},Ez="transform",Fwe=d0.Transition.toString({property:Ez,duration:0,easing:"linear"}),Lwe={roleDescription:"sortable"};function $we(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=T.useState(null),o=T.useRef(n);return al(()=>{if(!t&&n!==o.current&&r.current){const l=a.current;if(l){const u=jp(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&s(d)}}n!==o.current&&(o.current=n)},[t,n,r,a]),T.useEffect(()=>{i&&s(null)},[i]),i}function Bwe(e){let{animateLayoutChanges:t=Mwe,attributes:n,disabled:r,data:a,getNewIndex:i=Dwe,id:s,strategy:o,resizeObserverConfig:l,transition:u=Pwe}=e;const{items:d,containerId:h,activeIndex:m,disabled:y,disableTransforms:v,sortedRects:b,overIndex:x,useDragOverlay:w,strategy:S}=T.useContext(Sz),E=zwe(r,y),C=d.indexOf(s),k=T.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...a}),[h,a,C,d]),I=T.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:R,node:j,isOver:F,setNodeRef:$}=Twe({id:s,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:I,...l}}),{active:G,activatorEvent:D,activeNodeRect:Z,attributes:q,setNodeRef:ue,listeners:ie,isDragging:ne,over:X,setActivatorNodeRef:ae,transform:B}=Swe({id:s,data:k,attributes:{...Lwe,...n},disabled:E.draggable}),J=ave($,ue),ee=!!G,te=ee&&!v&&bv(m)&&bv(x),fe=!w&&ne,ve=fe&&te?B:null,Ae=te?ve??(o??S)({rects:b,activeNodeRect:Z,activeIndex:m,overIndex:x,index:C}):null,Ne=bv(m)&&bv(x)?i({id:s,items:d,activeIndex:m,overIndex:x}):C,Ce=G==null?void 0:G.id,Pe=T.useRef({activeId:Ce,items:d,newIndex:Ne,containerId:h}),Qe=d!==Pe.current.items,Le=t({active:G,containerId:h,isDragging:ne,isSorting:ee,id:s,index:C,items:d,newIndex:Pe.current.newIndex,previousItems:Pe.current.items,previousContainerId:Pe.current.containerId,transition:u,wasDragging:Pe.current.activeId!=null}),Ie=$we({disabled:!Le,index:C,node:j,rect:R});return T.useEffect(()=>{ee&&Pe.current.newIndex!==Ne&&(Pe.current.newIndex=Ne),h!==Pe.current.containerId&&(Pe.current.containerId=h),d!==Pe.current.items&&(Pe.current.items=d)},[ee,Ne,h,d]),T.useEffect(()=>{if(Ce===Pe.current.activeId)return;if(Ce!=null&&Pe.current.activeId==null){Pe.current.activeId=Ce;return}const Se=setTimeout(()=>{Pe.current.activeId=Ce},50);return()=>clearTimeout(Se)},[Ce]),{active:G,activeIndex:m,attributes:q,data:k,rect:R,index:C,newIndex:Ne,items:d,isOver:F,isSorting:ee,isDragging:ne,listeners:ie,node:j,overIndex:x,over:X,setNodeRef:J,setActivatorNodeRef:ae,setDroppableNodeRef:$,setDraggableNodeRef:ue,transform:Ie??Ae,transition:z()};function z(){if(Ie||Qe&&Pe.current.newIndex===C)return Fwe;if(!(fe&&!AA(D)||!u)&&(ee||Le))return d0.Transition.toString({...u,property:Ez})}}function zwe(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Kw(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Uwe=[er.Down,er.Right,er.Up,er.Left],Hwe=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(Uwe.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=a.get(h.id);if(m)switch(e.code){case er.Down:r.top<m.top&&l.push(h);break;case er.Up:r.top>m.top&&l.push(h);break;case er.Left:r.left>m.left&&l.push(h);break;case er.Right:r.left<m.left&&l.push(h);break}});const u=xve({collisionRect:r,droppableRects:a,droppableContainers:l});let d=lz(u,"id");if(d===(s==null?void 0:s.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),m=i.get(d),y=m?a.get(m.id):null,v=m==null?void 0:m.node.current;if(v&&y&&h&&m){const x=k1(v).some((I,R)=>o[R]!==I),w=Cz(h,m),S=qwe(h,m),E=x||!w?{x:0,y:0}:{x:S?r.width-y.width:0,y:S?r.height-y.height:0},C={x:y.left,y:y.top};return E.x&&E.y?C:u0(C,E)}}}};function Cz(e,t){return!Kw(e)||!Kw(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function qwe(e,t){return!Kw(e)||!Kw(t)||!Cz(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Vwe=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:l}=Bwe({id:e,disabled:n}),u={transform:d0.Transform.toString(s),transition:o,zIndex:l?10:void 0,opacity:n?.5:1};return p.jsxs("div",{ref:i,style:u,...r,...a,className:_t("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[p.jsx(Qq,{className:_t("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),p.jsx(Kt,{className:_t("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},Gwe=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAllAvailableModelDefsForProvider:a}=$n(dn(m=>({setGlobalModelSortOrder:m.setGlobalModelSortOrder,dbProviderConfigs:m.dbProviderConfigs,globalModelSortOrder:m.globalModelSortOrder,isLoading:m.isLoading,getAllAvailableModelDefsForProvider:m.getAllAvailableModelDefsForProvider}))),[i,s]=T.useState(""),o=T.useMemo(()=>{const m=new Map,y=new Set;t.forEach(w=>{if(!w.isEnabled||!w.enabledModels)return;const S=a(w.id),E=new Map(S.map(C=>[C.id,C]));w.enabledModels.forEach(C=>{const k=nu(w.id,C),I=E.get(C);I&&(y.add(k),m.set(k,{id:k,name:I.name||C,providerId:w.id,providerName:w.name,metadata:I}))})});const v=[],b=new Set;n.forEach(w=>{if(y.has(w)){const S=m.get(w);S&&!b.has(w)&&(v.push(S),b.add(w))}});const x=Array.from(y).filter(w=>!b.has(w)).map(w=>m.get(w)).filter(w=>!!w).sort((w,S)=>w.name.localeCompare(S.name));return[...v,...x]},[t,n,a]),l=T.useMemo(()=>{if(!i.trim())return o;const m=i.toLowerCase();return o.filter(y=>y.name.toLowerCase().includes(m)||y.providerName.toLowerCase().includes(m)||y.id.toLowerCase().includes(m))},[o,i]),u=T.useMemo(()=>l.map(m=>m.id),[l]),d=T.useCallback(m=>{const{active:y,over:v}=m;if(v&&y.id!==v.id){const b=o.map(C=>C.id),x=y.id,w=v.id,S=b.indexOf(x),E=b.indexOf(w);if(S!==-1&&E!==-1){const C=OA(b,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[o,e]),h=bve(h6(jA),h6(RA,{coordinateGetter:Hwe}));return r?p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx(dr,{className:"h-8 w-1/3"}),p.jsx(dr,{className:"h-6 w-1/2"}),p.jsx(dr,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),p.jsx(Rs,{}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(Kt,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),p.jsxs("div",{className:"relative",children:[p.jsx(Yl,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:m=>s(m.target.value),className:"pl-8 w-full",disabled:r})]}),p.jsx(sc,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?p.jsx(wwe,{sensors:h,collisionDetection:wve,onDragEnd:d,children:p.jsx(Owe,{items:u,strategy:Iwe,children:l.map(m=>p.jsx(Vwe,{id:m.id,name:`${m.name} (${m.providerName})`},m.id))})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},Kwe=mk("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function kz({className:e,variant:t,asChild:n=!1,...r}){const a=n?$6:"span";return p.jsx(a,{"data-slot":"badge",className:_t(Kwe({variant:t}),e),...r})}const Wwe=({modelId:e})=>{var s,o,l,u,d,h,m,y,v,b,x,w,S;const{getProviderById:t,getAllAvailableModelDefsForProvider:n}=$n(E=>({getProviderById:C=>E.dbProviderConfigs.find(k=>k.id===C),getAllAvailableModelDefsForProvider:E.getAllAvailableModelDefsForProvider})),r=T.useMemo(()=>{if(!e)return null;const{providerId:E,modelId:C}=cc(e);if(!E||!C)return null;const k=t(E);if(!k)return null;const R=n(E).find(j=>j.id===C);return R?{...R,providerName:k.name}:null},[e,t,n]);if(!r)return p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select a model from a provider's list to view its details."});const a=E=>{if(!E)return"N/A";const C=parseFloat(E);return isNaN(C)||C===0?"Free":`$${C.toFixed(4)} / 1M tokens`},i=E=>E?`${E.toLocaleString()} tokens`:"Unknown";return p.jsx(sc,{className:"h-full p-1",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("h3",{className:"text-xl font-semibold",children:[r.name," ",p.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.providerName,")"]})]}),p.jsx("p",{className:"text-sm text-muted-foreground",children:r.id}),r.description&&p.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:p.jsx("p",{children:r.description})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Context & Limits"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Context Length:"})," ",i(((s=r.top_provider)==null?void 0:s.context_length)??r.context_length)]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Max Completion Tokens:"})," ",(o=r.top_provider)!=null&&o.max_completion_tokens?r.top_provider.max_completion_tokens.toLocaleString():"Default"]}),r.per_request_limits&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Request Limits:"})," ",p.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.per_request_limits,null,2)})]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Pricing (per 1M tokens)"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Prompt:"})," ",a((l=r.pricing)==null?void 0:l.prompt)]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Completion:"})," ",a((u=r.pricing)==null?void 0:u.completion)]}),((d=r.pricing)==null?void 0:d.request)&&parseFloat(r.pricing.request)>0&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Request:"})," $",parseFloat(r.pricing.request).toFixed(6)]}),((h=r.pricing)==null?void 0:h.image)&&parseFloat(r.pricing.image)>0&&p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Image:"})," $",parseFloat(r.pricing.image).toFixed(6)]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Architecture"}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Modality:"})," ",((m=r.architecture)==null?void 0:m.modality)??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Input Modalities:"})," ",((v=(y=r.architecture)==null?void 0:y.input_modalities)==null?void 0:v.join(", "))??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Output Modalities:"})," ",((x=(b=r.architecture)==null?void 0:b.output_modalities)==null?void 0:x.join(", "))??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Tokenizer:"})," ",((w=r.architecture)==null?void 0:w.tokenizer)??"Unknown"]}),p.jsxs("p",{children:[p.jsx("span",{className:"font-semibold",children:"Instruct Type:"})," ",((S=r.architecture)==null?void 0:S.instruct_type)??"N/A"]})]}),p.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[p.jsx("h4",{className:"font-medium mb-1",children:"Supported Parameters"}),p.jsx("div",{className:"flex flex-wrap gap-1",children:r.supported_parameters&&r.supported_parameters.length>0?r.supported_parameters.map(E=>p.jsx(kz,{variant:"secondary",children:E},E)):p.jsx("span",{className:"text-muted-foreground italic",children:"None specified"})})]})]})]})})},Zwe=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=$n(dn(m=>({apiKeys:m.dbApiKeys,addApiKey:m.addApiKey,deleteApiKey:m.deleteApiKey,isLoading:m.isLoading}))),[a,i]=T.useState(!1),[s,o]=T.useState(!1),[l,u]=T.useState({}),d=T.useCallback(async(m,y,v)=>{o(!0);try{await t(m,y,v),i(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),h=T.useCallback(async(m,y)=>{if(window.confirm(`Are you sure you want to delete the API key "${y}"? This will unlink it from any providers using it.`)){u(v=>({...v,[m]:!0}));try{await n(m)}catch(v){console.error("Failed to delete API key (from component):",v)}finally{u(v=>({...v,[m]:!1}))}}},[n]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!a&&p.jsxs(jt,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[p.jsx(Kd,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),a&&p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),p.jsx(o$,{onSave:d,onCancel:()=>i(!1),isSaving:s})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!a?p.jsxs("div",{className:"space-y-2",children:[p.jsx(dr,{className:"h-10 w-full"}),p.jsx(dr,{className:"h-10 w-full"})]}):(e||[]).length===0&&!a?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Tp,{children:[p.jsx(Ap,{children:p.jsxs(Xr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{children:"Provider Type"}),p.jsx(Tr,{children:"Created"}),p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Np,{children:(e||[]).map(m=>{const y=l[m.id];return p.jsxs(Xr,{className:y?"opacity-50":"",children:[p.jsx(Dn,{className:"font-medium",children:m.name||"Unnamed Key"}),p.jsx(Dn,{children:m.providerId||"Unknown"}),p.jsx(Dn,{className:"text-xs text-muted-foreground",children:LC(new Date(m.createdAt),"PPp")}),p.jsx(Dn,{className:"text-right",children:p.jsx(Vn,{tooltipText:"Delete Key",onClick:()=>h(m.id,m.name||"Unnamed Key"),disabled:y,"aria-label":`Delete key ${m.name||"Unnamed Key"}`,icon:y?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(Li,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},m.id)})})]})})]})]})},Ywe=gt.memo(Zwe),Xwe=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:s,apiKeys:o,isLoading:l}=$n(dn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[u,d]=T.useState(!1),h=()=>d(!0),m=T.useCallback(()=>d(!1),[]),y=T.useCallback(async b=>{await a(b)},[a]),v=T.useMemo(()=>s||[],[s]);return p.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),p.jsx("div",{className:"flex-shrink-0",children:u?p.jsx(p$,{apiKeys:o||[],onAddProvider:t,onCancel:m}):p.jsxs(jt,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[p.jsx(Kd,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),p.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:p.jsxs("div",{className:"space-y-2",children:[l&&!u?p.jsx(p.Fragment,{children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsx(dr,{className:"h-24 w-full"}),p.jsx(dr,{className:"h-24 w-full"}),p.jsx(dr,{className:"h-24 w-full"})]})}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>p.jsx(Fbe,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:y,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!u&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},Jwe=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=$n(dn(s=>({selectedModelForDetails:s._selectedModelForDetails,setSelectedModelForDetails:s.setSelectedModelForDetails}))),[n,r]=T.useState("providers-config"),a=T.useCallback(s=>{t(s),s&&r("providers-details")},[t]),i=T.useMemo(()=>[{value:"providers-config",label:"Configuration",content:p.jsx(Xwe,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:p.jsx(Gwe,{})},{value:"api-keys",label:"API Keys",content:p.jsx(Ywe,{})},{value:"providers-details",label:"Model Details",content:p.jsx(Wwe,{modelId:e})}],[e,a]);return p.jsx(qu,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},Qwe=gt.memo(Jwe),Jm=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:s})=>p.jsxs("div",{className:_t("space-y-3",r),children:[p.jsxs("div",{children:[p.jsx("h3",{className:_t("text-lg font-medium",a),children:e}),t&&p.jsx("p",{className:_t("text-sm text-muted-foreground",i),children:t})]}),p.jsx("div",{className:_t(s),children:n})]}),exe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=lr(dn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return p.jsx("div",{className:"space-y-6 p-1",children:p.jsx(Jm,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"git-user-name",children:"Git User Name"}),p.jsx(Rn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"git-user-email",children:"Git User Email"}),p.jsx(Rn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},txe=gt.memo(exe),nxe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:s}=mn(dn(j=>({syncRepos:j.syncRepos,addSyncRepo:j.addSyncRepo,updateSyncRepo:j.updateSyncRepo,deleteSyncRepo:j.deleteSyncRepo,initializeOrSyncRepo:j.initializeOrSyncRepo,repoInitializationStatus:j.repoInitializationStatus,isLoading:j.isLoading}))),[o,l]=T.useState(!1),[u,d]=T.useState(null),[h,m]=T.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[y,v]=T.useState(!1),[b,x]=T.useState({}),w=T.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),S=T.useCallback((j,F)=>{m($=>({...$,[j]:F}))},[]),E=T.useCallback(async()=>{var j,F,$,G;if(!((j=h.name)!=null&&j.trim())||!((F=h.remoteUrl)!=null&&F.trim())){Ye.error("Repository Name and Remote URL are required.");return}v(!0);try{const D={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:(($=h.branch)==null?void 0:$.trim())||"main",username:((G=h.username)==null?void 0:G.trim())||null,password:h.password||null};u?await n(u,D):await t(D),w()}catch(D){console.error("Failed to save sync repo:",D)}finally{v(!1)}},[h,u,t,n,w]),C=j=>{d(j.id),m({name:j.name,remoteUrl:j.remoteUrl,branch:j.branch||"main",username:j.username??"",password:j.password??""}),l(!1)},k=T.useCallback(async(j,F)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${F}"? This will unlink it from any conversations and remove the local copy.`)){x($=>({...$,[j]:!0}));try{await r(j),u===j&&w()}catch($){console.error("Failed to delete sync repo:",$)}finally{x($=>({...$,[j]:!1}))}}},[r,u,w]),I=T.useCallback(async j=>{await a(j)},[a]),R=()=>{var j,F;return p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:u?"Edit Sync Repository":"Add New Sync Repository"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Kt,{htmlFor:"repo-name",children:"Name"}),p.jsx(Rn,{id:"repo-name",value:h.name||"",onChange:$=>S("name",$.target.value),placeholder:"e.g., My Backup",required:!0,className:"mt-1",disabled:y})]}),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsx(Kt,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),p.jsx(Rn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:$=>S("remoteUrl",$.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:y})]}),p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx(Kt,{htmlFor:"repo-branch",children:"Branch"}),p.jsx(Rn,{id:"repo-branch",value:h.branch||"",onChange:$=>S("branch",$.target.value),placeholder:"main",className:"mt-1",disabled:y})]})]}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Kt,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),p.jsxs(FB,{variant:"destructive",className:"mt-2 mb-3",children:[p.jsx(Jw,{className:"h-4 w-4"}),p.jsx(LB,{children:"Security Warning"}),p.jsx($B,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"repo-username",children:"Username"}),p.jsx(Rn,{id:"repo-username",value:h.username||"",onChange:$=>S("username",$.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:y,autoComplete:"off"})]}),p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"repo-password",children:"Password / Token"}),p.jsx(Rn,{id:"repo-password",type:"password",value:h.password||"",onChange:$=>S("password",$.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:y,autoComplete:"new-password"})]})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(jt,{variant:"ghost",size:"sm",onClick:w,disabled:y,type:"button",children:[p.jsx(xi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(jt,{variant:"secondary",size:"sm",onClick:E,disabled:y||!((j=h.name)!=null&&j.trim())||!((F=h.remoteUrl)!=null&&F.trim()),type:"button",children:[y&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",y?"Saving...":"Save Repository"]})]})]})};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!o&&!u&&p.jsxs(jt,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:s,children:[p.jsx(Kd,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||u)&&R(),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),s&&!o&&!u?p.jsxs("div",{className:"space-y-2",children:[p.jsx(dr,{className:"h-10 w-full"}),p.jsx(dr,{className:"h-10 w-full"}),p.jsx(dr,{className:"h-10 w-full"})]}):e.length===0&&!o&&!u?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):p.jsxs("div",{className:"border rounded-md overflow-x-auto",children:[" ",p.jsxs(Tp,{children:[p.jsx(Ap,{children:p.jsxs(Xr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{className:"hidden md:table-cell",children:"Remote URL"})," ",p.jsx(Tr,{className:"hidden lg:table-cell",children:"Branch"})," ",p.jsx(Tr,{className:"hidden lg:table-cell",children:"Auth"})," ",p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Np,{children:e.map(j=>{const F=b[j.id],$=u===j.id,G=!!j.username||!!j.password,D=i[j.id]||"idle",q=F||y||!!u||D==="syncing";let ue=null,ie="Initialize/Sync Repository";return D==="syncing"?(ue=p.jsx(On,{className:"h-4 w-4 animate-spin mr-1"}),ie="Initializing/Syncing..."):D==="idle"?(ue=p.jsx(bk,{className:"h-4 w-4 text-green-500 mr-1"}),ie="Sync Successful / Ready"):D==="error"?(ue=p.jsx(Nh,{className:"h-4 w-4 text-destructive mr-1"}),ie="Sync Failed"):ue=p.jsx(Xw,{className:"h-4 w-4 mr-1"}),p.jsxs(Xr,{className:_t($?"bg-muted/50":"",q&&!$?"opacity-70":""),children:[p.jsx(Dn,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:j.name}),p.jsx(Dn,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:j.remoteUrl}),p.jsx(Dn,{className:"hidden lg:table-cell",children:j.branch||"main"}),p.jsx(Dn,{className:"text-xs hidden lg:table-cell",children:G?"Configured":"None"}),p.jsxs(Dn,{className:"text-right space-x-1",children:[p.jsx(Vn,{tooltipText:ie,onClick:()=>I(j.id),"aria-label":`Initialize or Sync repo ${j.name}`,disabled:q,icon:ue,variant:"outline",className:"h-8 w-8"}),p.jsx(Vn,{tooltipText:"Edit",onClick:()=>C(j),"aria-label":`Edit repo ${j.name}`,disabled:q,icon:p.jsx(m0,{}),className:"h-8 w-8"}),p.jsx(Vn,{tooltipText:"Delete",onClick:()=>k(j.id,j.name),"aria-label":`Delete repo ${j.name}`,disabled:q,icon:F?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(Li,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},j.id)})})]})]})]})]})},rxe=gt.memo(nxe),axe=()=>{const e=T.useMemo(()=>[{value:"config",label:"User Config",content:p.jsx(txe,{})},{value:"sync",label:"Sync Repositories",content:p.jsx(rxe,{})}],[]);return p.jsx(qu,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},ixe=gt.memo(axe),sxe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.content)||""),[l,u]=T.useState((e==null?void 0:e.type)||"before");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.content)||""),u((e==null?void 0:e.type)||"before")},[e]);const d=T.useCallback(async()=>{if(!a.trim()||!s.trim()){Ye.error("Rule Name and Content are required.");return}await n({name:a.trim(),content:s.trim(),type:l})},[a,s,l,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx(Kt,{htmlFor:"rule-name",children:"Rule Name"}),p.jsx(Rn,{id:"rule-name",value:a,onChange:h=>i(h.target.value),placeholder:"e.g., Always respond in JSON",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"rule-type",children:"Rule Type"}),p.jsxs(el,{value:l,onValueChange:h=>u(h),disabled:t,children:[p.jsx(nl,{id:"rule-type",children:p.jsx(tl,{placeholder:"Select Type"})}),p.jsxs(rl,{children:[p.jsx(Gr,{value:"system",children:"System Prompt"}),p.jsx(Gr,{value:"before",children:"Before User Prompt"}),p.jsx(Gr,{value:"after",children:"After User Prompt"})]})]})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"rule-content",children:"Rule Content"}),p.jsx($u,{id:"rule-content",value:s,onChange:h=>o(h.target.value),placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(jt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(xi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(jt,{variant:"secondary",size:"sm",onClick:d,disabled:t||!a.trim()||!s.trim(),type:"button",children:[t&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Rule"]})]})]})},oxe=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:a})=>{const i=s=>{window.confirm(`Are you sure you want to delete the rule "${s.name}"? This will also remove it from any tags.`)&&a(s.id,s.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Tp,{children:[p.jsx(Ap,{children:p.jsxs(Xr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{children:"Type"}),p.jsx(Tr,{children:"Content Preview"}),p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Np,{children:t?p.jsxs(p.Fragment,{children:[p.jsx(Xr,{children:p.jsx(Dn,{colSpan:4,children:p.jsx(dr,{className:"h-10 w-full"})})}),p.jsx(Xr,{children:p.jsx(Dn,{colSpan:4,children:p.jsx(dr,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Xr,{children:p.jsx(Dn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(s=>{const o=n[s.id];return p.jsxs(Xr,{children:[p.jsx(Dn,{className:"font-medium",children:s.name}),p.jsx(Dn,{className:"capitalize",children:s.type}),p.jsx(Dn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.content}),p.jsxs(Dn,{className:"text-right space-x-1",children:[p.jsx(Vn,{tooltipText:"Edit Rule",onClick:()=>r(s),disabled:o,icon:p.jsx(m0,{}),className:"h-8 w-8","aria-label":`Edit rule ${s.name}`}),p.jsx(Vn,{tooltipText:"Delete Rule",onClick:()=>i(s),disabled:o,icon:o?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(Li,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${s.name}`})]})]},s.id)})})]})})},lxe=()=>{const{rules:e,addRule:t,updateRule:n,deleteRule:r,isLoading:a}=oc(dn(S=>({rules:S.rules,addRule:S.addRule,updateRule:S.updateRule,deleteRule:S.deleteRule,isLoading:S.isLoading}))),[i,s]=T.useState(!1),[o,l]=T.useState(null),[u,d]=T.useState(!1),[h,m]=T.useState({}),y=()=>{l(null),s(!0)},v=S=>{l(S),s(!0)},b=T.useCallback(()=>{s(!1),l(null),d(!1)},[]),x=T.useCallback(async S=>{d(!0);try{o?await n(o.id,S):await t(S),b()}catch{}finally{d(!1)}},[t,n,o,b]),w=T.useCallback(async S=>{m(E=>({...E,[S]:!0}));try{await r(S),(o==null?void 0:o.id)===S&&b()}catch{}finally{m(E=>({...E,[S]:!1}))}},[r,o,b]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&p.jsxs(jt,{onClick:y,variant:"outline",className:"w-full",disabled:a,children:[p.jsx(Kd,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&p.jsx(sxe,{initialData:o??void 0,isSaving:u,onSave:x,onCancel:b}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),p.jsx(oxe,{rules:e,isLoading:a,isDeleting:h,onEdit:v,onDelete:w})]})]})},cxe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[s,o]=T.useState((e==null?void 0:e.description)||"");T.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.description)||"")},[e]);const l=T.useCallback(async()=>{if(!a.trim()){Ye.error("Tag Name is required.");return}await n({name:a.trim(),description:(s==null?void 0:s.trim())||null})},[a,s,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"tag-name",children:"Tag Name"}),p.jsx(Rn,{id:"tag-name",value:a,onChange:u=>i(u.target.value),placeholder:"e.g., Code Generation, Summarization",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"tag-description",children:"Description (Optional)"}),p.jsx($u,{id:"tag-description",value:s||"",onChange:u=>o(u.target.value),placeholder:"Describe when to use this tag...",rows:2,disabled:t})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(jt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(xi,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(jt,{variant:"secondary",size:"sm",onClick:l,disabled:t||!a.trim(),type:"button",children:[t&&p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(Wd,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Tag"]})]})]})},uxe=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:a,onDelete:i})=>{const s=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&i(o.id,o.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Tp,{children:[p.jsx(Ap,{children:p.jsxs(Xr,{children:[p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{children:"Description"}),p.jsx(Tr,{children:"Linked Rules"}),p.jsx(Tr,{className:"text-right",children:"Actions"})]})}),p.jsx(Np,{children:n?p.jsxs(p.Fragment,{children:[p.jsx(Xr,{children:p.jsx(Dn,{colSpan:4,children:p.jsx(dr,{className:"h-10 w-full"})})}),p.jsx(Xr,{children:p.jsx(Dn,{colSpan:4,children:p.jsx(dr,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Xr,{children:p.jsx(Dn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],u=t.get(o.id)||[];return p.jsxs(Xr,{children:[p.jsx(Dn,{className:"font-medium",children:o.name}),p.jsx(Dn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),p.jsx(Dn,{className:"text-xs",children:u.length>0?u.map(d=>d.name).join(", "):"None"}),p.jsxs(Dn,{className:"text-right space-x-1",children:[p.jsx(Vn,{tooltipText:"Edit Tag & Rules",onClick:()=>a(o),disabled:l,icon:p.jsx(m0,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),p.jsx(Vn,{tooltipText:"Delete Tag",onClick:()=>s(o),disabled:l,icon:l?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(Li,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},dxe=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:a=!1})=>{const[i,s]=T.useState(!1),[o,l]=T.useState(""),u=T.useMemo(()=>[...t].sort((v,b)=>v.name.localeCompare(b.name)),[t]),d=T.useMemo(()=>{const v=o.toLowerCase();return v?u.filter(b=>b.name.toLowerCase().includes(v)||b.content.toLowerCase().includes(v)||b.type.toLowerCase().includes(v)):u},[u,o]),h=T.useCallback(v=>{const b=n.has(v);r(e.id,v,!b),l("")},[n,r,e.id]),m=T.useCallback((v,b)=>{b.stopPropagation(),r(e.id,v,!1)},[r,e.id]),y=T.useMemo(()=>u.filter(v=>n.has(v.id)),[u,n]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs(Kt,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),p.jsxs(zu,{open:i,onOpenChange:s,children:[p.jsx(Uu,{asChild:!0,children:p.jsxs(jt,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between h-9",disabled:a||t.length===0,children:[p.jsx("span",{className:"truncate",children:y.length>0?`${y.length} rule(s) selected`:"Select rules..."}),p.jsx(Yw,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(Hu,{className:"w-[--radix-popover-trigger-width] p-0",children:p.jsxs(gB,{shouldFilter:!1,children:[p.jsx(yB,{placeholder:"Search rules...",value:o,onValueChange:l}),p.jsxs(bB,{children:[p.jsx(vB,{children:t.length===0?"No rules defined.":"No rules found."}),p.jsx(wB,{children:d.map(v=>{const b=n.has(v.id);return p.jsxs(xB,{value:v.id,onSelect:()=>h(v.id),className:"cursor-pointer",children:[p.jsx(ls,{className:_t("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),p.jsx("span",{className:"truncate",children:v.name}),p.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",v.type,")"]})]},v.id)})})]})]})})]}),y.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:y.map(v=>p.jsxs(kz,{variant:"secondary",className:"flex items-center gap-1",children:[p.jsx("span",{className:"truncate",children:v.name}),p.jsx(jt,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>m(v.id,b),disabled:a,"aria-label":`Unlink rule ${v.name}`,children:p.jsx(xi,{className:"h-3 w-3"})})]},v.id))})]})},fxe=()=>{const{tags:e,rules:t,tagRuleLinks:n,addTag:r,updateTag:a,deleteTag:i,linkTagToRule:s,unlinkTagFromRule:o,getRulesForTag:l,isLoading:u}=oc(dn($=>({tags:$.tags,rules:$.rules,tagRuleLinks:$.tagRuleLinks,addTag:$.addTag,updateTag:$.updateTag,deleteTag:$.deleteTag,linkTagToRule:$.linkTagToRule,unlinkTagFromRule:$.unlinkTagFromRule,getRulesForTag:$.getRulesForTag,isLoading:$.isLoading}))),[d,h]=T.useState(!1),[m,y]=T.useState(null),[v,b]=T.useState(!1),[x,w]=T.useState({}),S=()=>{y(null),h(!0)},E=$=>{y($),h(!0)},C=T.useCallback(()=>{h(!1),y(null),b(!1)},[]),k=T.useCallback(async $=>{b(!0);try{m?await a(m.id,$):await r($),m||C()}catch{}finally{b(!1)}},[r,a,m,C]),I=T.useCallback(async $=>{w(G=>({...G,[$]:!0}));try{await i($),(m==null?void 0:m.id)===$&&C()}catch{}finally{w(G=>({...G,[$]:!1}))}},[i,m,C]),R=T.useCallback(async($,G,D)=>{try{D?await s($,G):await o($,G)}catch{}},[s,o]),j=T.useMemo(()=>{const $=new Map;return e.forEach(G=>{$.set(G.id,l(G.id))}),$},[e,l]),F=T.useMemo(()=>m?new Set(n.filter($=>$.tagId===m.id).map($=>$.ruleId)):new Set,[m,n]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!d&&p.jsxs(jt,{onClick:S,variant:"outline",className:"w-full",disabled:u,children:[p.jsx(Kd,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),d&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(cxe,{initialData:m??void 0,isSaving:v,onSave:k,onCancel:C}),m&&p.jsx(dxe,{tag:m,allRules:t,linkedRuleIds:F,onLinkChange:R,disabled:v})]}),p.jsx(Rs,{}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),p.jsx(uxe,{tags:e,rulesByTagId:j,isLoading:u,isDeleting:x,onEdit:E,onDelete:I})]})]})},hxe=()=>{const e=T.useMemo(()=>[{value:"rules",label:"Rules",content:p.jsx(lxe,{})},{value:"tags",label:"Tags",content:p.jsx(fxe,{})}],[]);return p.jsx(qu,{tabs:e,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},pxe=({label:e,colorKey:t,value:n,onChange:r})=>{const[a,i]=T.useState(n??"");T.useEffect(()=>{i(n??"")},[n]);const s=()=>{r(t,a.trim()||null)},o=l=>{i(l.target.value)};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Kt,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),p.jsx(Rn,{id:`color-${t}`,type:"text",value:a,onChange:o,onBlur:s,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),p.jsx(Rn,{type:"color",value:a!=null&&a.startsWith("#")?a:"#000000",onChange:l=>{i(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},mxe=()=>{const{theme:e,setTheme:t,prismThemeUrl:n,setPrismThemeUrl:r,customFontFamily:a,setCustomFontFamily:i,customFontSize:s,setCustomFontSize:o,chatMaxWidth:l,setChatMaxWidth:u,customThemeColors:d,setCustomThemeColor:h,resetThemeSettings:m}=lr(dn(E=>({theme:E.theme,setTheme:E.setTheme,prismThemeUrl:E.prismThemeUrl,setPrismThemeUrl:E.setPrismThemeUrl,customFontFamily:E.customFontFamily,setCustomFontFamily:E.setCustomFontFamily,customFontSize:E.customFontSize,setCustomFontSize:E.setCustomFontSize,chatMaxWidth:E.chatMaxWidth,setChatMaxWidth:E.setChatMaxWidth,customThemeColors:E.customThemeColors,setCustomThemeColor:E.setCustomThemeColor,resetThemeSettings:E.resetThemeSettings}))),[y,v]=T.useState(s??16);T.useEffect(()=>{v(s??16)},[s]);const b=T.useCallback(E=>{o(E[0])},[o]),x=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&m()},w=[{value:"max-w-3xl",label:"Very Small (3xl)"},{value:"max-w-4xl",label:"Small (4xl)"},{value:"max-w-5xl",label:"Medium (5xl)"},{value:"max-w-6xl",label:"Large (6xl)"},{value:"max-w-7xl",label:"Very Large (7xl)"},{value:"max-w-full",label:"Full Width"}],S=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}];return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsx(Jm,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(Kt,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsxs(el,{value:e??"system",onValueChange:E=>t(E),children:[p.jsx(nl,{id:"theme-select",className:"w-[180px]",children:p.jsx(tl,{placeholder:"Select theme"})}),p.jsxs(rl,{children:[p.jsx(Gr,{value:"light",children:"Default Light"}),p.jsx(Gr,{value:"dark",children:"Default Dark"}),p.jsx(Gr,{value:"system",children:"System"}),p.jsx(Gr,{value:"TijuLight",children:"Tiju Light"}),p.jsx(Gr,{value:"TijuDark",children:"Tiju Dark"}),p.jsx(Gr,{value:"custom",children:"User Custom"})]})]})]})}),p.jsxs(Jm,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-4",children:[p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"custom-font-family",children:"Custom Font Family"}),p.jsx(Rn,{id:"custom-font-family",value:a??"",onChange:E=>i(E.target.value||null),placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"custom-font-size",children:["Base Font Size (",y,"px)"]}),p.jsx(Ko,{id:"custom-font-size",min:12,max:20,step:1,value:[y],onValueChange:E=>v(E[0]),onValueCommit:b}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"chat-max-width",children:"Chat Content Max Width"}),p.jsxs(el,{value:l??"max-w-7xl",onValueChange:E=>u(E||null),children:[p.jsx(nl,{id:"chat-max-width",className:"w-full mt-1",children:p.jsx(tl,{placeholder:"Select max width"})}),p.jsx(rl,{children:w.map(E=>p.jsx(Gr,{value:E.value,children:E.label},E.value))})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),p.jsxs(Jm,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:[p.jsx(Kt,{htmlFor:"prism-theme-url",children:"Theme URL (Optional)"}),p.jsx(Rn,{id:"prism-theme-url",type:"url",placeholder:"e.g., https://.../prism-okaidia.min.css",value:n??"",onChange:E=>r(E.target.value||null),className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use default themes matching light/dark mode."})]}),p.jsx(Jm,{title:"Custom Theme Colors",description:"Define custom colors. Applies only when 'User Custom' theme is selected. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:S.map(({key:E,label:C})=>p.jsx(pxe,{label:C,colorKey:E,value:d==null?void 0:d[E],onChange:h},E))})}),p.jsx(Rs,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(jt,{variant:"outline",size:"sm",onClick:x,children:[p.jsx(Sk,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]})})]})},gxe=gt.memo(mxe),Tz=T.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=lr(dn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=o0(dn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=os(dn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[s,o]=T.useState(a||"general");T.useEffect(()=>{e&&o(a||"general")},[e,a]);const l=h=>{h||(t(),i())},u=h=>{o(h)},d=T.useMemo(()=>{const h=[{value:"general",label:"General",content:p.jsx(Dye,{})},{value:"theme",label:"Theme",content:p.jsx(gxe,{})},{value:"providers",label:"Providers & Models",content:p.jsx(Qwe,{})},...n?[{value:"assistant",label:"Assistant",content:p.jsx(wbe,{})}]:[],{value:"rules-tags",label:"Rules & Tags",content:p.jsx(hxe,{})},{value:"git",label:"Git",content:p.jsx(ixe,{})},{value:"data",label:"Data",content:p.jsx(Abe,{})},{value:"mods",label:"Mods",content:p.jsx(Ibe,{})}],m=r.map(y=>({value:y.id,label:y.title,content:gt.isValidElement(y.component)?y.component:typeof y.component=="function"?p.jsx(y.component,{}):null}));return[...h,...m]},[n,r]);return p.jsx(f1,{open:e,onOpenChange:l,children:p.jsxs(h1,{className:_t("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[p.jsxs(p1,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsx(g1,{children:"Settings"}),p.jsx(y1,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),p.jsx(qu,{tabs:d,initialValue:s,onValueChange:u,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsx(m1,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:p.jsx(jt,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});Tz.displayName="SettingsModalComponent";const yxe=Tz;function bxe(){const e=Rr.getState().registerChatControl,t=os.getState().toggleChatControlPanel,n=os.getState().setInitialSettingsTabs,r=()=>{const i=(s,o)=>{n(null,null),t("settingsModal",!0)};return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:p.jsx(Dv,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:"Settings"})]})})},a=()=>{const i=os.getState().isChatControlPanelOpen.settingsModal??!1,s=()=>t("settingsModal",!1);return p.jsx(yxe,{isOpen:i,onClose:s})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(r),iconRenderer:()=>gt.createElement(r),settingsRenderer:()=>gt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function vxe(){const e=Rr.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=os.getState();return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?p.jsx(gV,{className:"h-4 w-4"}):p.jsx(pV,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(t),iconRenderer:()=>gt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}const wxe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=Ci(dn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),s=lr.getState(),[o,l]=T.useState(()=>Ci.getState());T.useEffect(()=>{const d=h=>{l(m=>({...m,...h.params}))};return kt.on(Et.PROMPT_PARAMS_CHANGED,d),()=>{kt.off(Et.PROMPT_PARAMS_CHANGED,d)}},[]);const u={temperature:o.temperature??null,setTemperature:e,topP:o.topP??null,setTopP:t,maxTokens:o.maxTokens??null,setMaxTokens:n,topK:o.topK??null,setTopK:r,presencePenalty:o.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:o.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:s.temperature,defaultTopP:s.topP,defaultMaxTokens:s.maxTokens,defaultTopK:s.topK,defaultPresencePenalty:s.presencePenalty,defaultFrequencyPenalty:s.frequencyPenalty};return p.jsx(oB,{...u})},xxe=()=>{const[e,t]=T.useState(()=>qn.getState().status==="streaming"),[n,r]=T.useState(!0);return T.useEffect(()=>{const a=o=>{t(o.status==="streaming")},i=o=>{var y;if(!o.modelId){r(!1);return}const{getSelectedModel:l}=$n.getState(),u=l(),d=((y=u==null?void 0:u.metadata)==null?void 0:y.supported_parameters)??[],h=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],m=lr.getState().enableAdvancedSettings;r(m&&d.some(v=>h.includes(v)))},s=o=>{o.key==="enableAdvancedSettings"&&i({modelId:$n.getState().selectedModelId})};return i({modelId:$n.getState().selectedModelId}),kt.on(Et.INTERACTION_STATUS_CHANGED,a),kt.on(Et.MODEL_SELECTION_CHANGED,i),kt.on(Et.SETTINGS_CHANGED,s),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,a),kt.off(Et.MODEL_SELECTION_CHANGED,i),kt.off(Et.SETTINGS_CHANGED,s)}},[]),n?p.jsxs(zu,{children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Uu,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:e,"aria-label":"Adjust Advanced Parameters",children:p.jsx(RV,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:"Advanced Parameters"})]})}),p.jsx(Hu,{className:"w-auto p-0",align:"start",children:p.jsx(wxe,{})})]}):null};function _xe(){const e=Rr.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>gt.createElement(xxe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:s}=Ci.getState(),o=(u,d,h)=>{h!==null&&(u[d]=h)},l={};return o(l,"temperature",t),o(l,"top_p",n),o(l,"max_tokens",r),o(l,"top_k",a),o(l,"presence_penalty",i),o(l,"frequency_penalty",s),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const Az=20,Sxe=Az*1024*1024,Exe=()=>{const e=T.useRef(null),t=Jl.getState().addAttachedFile,[n,r]=T.useState(()=>qn.getState().status==="streaming"),[a,i]=T.useState(!0);T.useEffect(()=>{const u=h=>{r(h.status==="streaming")},d=h=>{var b,x;if(!h.modelId){i(!1);return}const{getSelectedModel:m}=$n.getState(),y=m(),v=(x=(b=y==null?void 0:y.metadata)==null?void 0:b.architecture)==null?void 0:x.input_modalities;i(!v||v.some(w=>w!=="text"))};return d({modelId:$n.getState().selectedModelId}),kt.on(Et.INTERACTION_STATUS_CHANGED,u),kt.on(Et.MODEL_SELECTION_CHANGED,d),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,u),kt.off(Et.MODEL_SELECTION_CHANGED,d)}},[]);const s=T.useCallback(async u=>{const d=u.target.files;if(!d)return;const h=a;for(const m of Array.from(d)){if(m.size>Sxe){Ye.error(`File "${m.name}" exceeds the ${Az}MB limit.`);continue}const y=kk(m.name,m.type),v=m.type.startsWith("image/");if(!y&&!h){Ye.warning(`File "${m.name}" (${m.type}) cannot be uploaded. The current model only supports text input.`);continue}try{let b={};if(y)b.contentText=await m.text();else if(v){const x=new FileReader,w=new Promise((E,C)=>{x.onload=()=>E(x.result),x.onerror=k=>C(k)});x.readAsDataURL(m);const S=await w;S&&S.includes(",")?b.contentBase64=S.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${m.name}`)}else h&&console.log(`File type ${m.type} (Name: ${m.name}) not directly processed for content storage, but model supports non-text.`);t({source:"direct",name:m.name,type:m.type||"application/octet-stream",size:m.size,...b})}catch(b){console.error(`Error processing file ${m.name}:`,b),Ye.error(`Failed to process file "${m.name}": ${b instanceof Error?b.message:String(b)}`)}}u.target&&(u.target.value="")},[t,a]),o=()=>{var u;(u=e.current)==null||u.click()},l=a?"Attach Files (Text, Images, etc.)":"Attach Text Files";return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:e,onChange:s,multiple:!0,className:"hidden",disabled:n}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{type:"button",variant:"ghost",size:"icon",onClick:o,disabled:n,className:"h-8 w-8","aria-label":l,children:p.jsx(_k,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:l})]})})]})},Cxe=()=>{const e=Jl.getState().removeAttachedFile,[t,n]=T.useState(()=>Jl.getState().attachedFilesMetadata),[r,a]=T.useState(()=>qn.getState().status==="streaming");return T.useEffect(()=>{const i=o=>{n(o.files)},s=o=>{a(o.status==="streaming")};return kt.on(Et.ATTACHED_FILES_CHANGED,i),kt.on(Et.INTERACTION_STATUS_CHANGED,s),()=>{kt.off(Et.ATTACHED_FILES_CHANGED,i),kt.off(Et.INTERACTION_STATUS_CHANGED,s)}},[]),t.length===0?null:p.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:t.map(i=>p.jsx(qT,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function kxe(){const e=Rr.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>gt.createElement(Exe),renderer:()=>gt.createElement(Cxe)}),console.log("[Function] Registered Core File Attachment Control")}const Txe=()=>{const{toggleVfsModal:e,isVfsModalOpen:t}=os(dn(l=>({toggleVfsModal:l.toggleVfsModal,isVfsModalOpen:l.isVfsModalOpen}))),{enableVfs:n,selectedFileIds:r,nodes:a,clearSelection:i}=lo(dn(l=>({enableVfs:l.enableVfs,selectedFileIds:l.selectedFileIds,nodes:l.nodes,clearSelection:l.clearSelection}))),s=Jl.getState().addAttachedFile,o=()=>{if(r.size===0){Ye.info("No files selected in VFS to attach.");return}let l=0;r.forEach(u=>{const d=a[u];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0&&(Ye.success(`Attached ${l} file(s) from VFS to the next prompt.`),i(),e(!1))};return n?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:_t("h-8 w-8",t&&"bg-muted text-primary"),onClick:()=>e(),"aria-label":"Toggle Virtual File System",children:p.jsx(lD,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:"Virtual Filesystem"})]})}),r.size>0&&p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsxs(jt,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:o,"aria-label":`Attach ${r.size} selected VFS file(s)`,children:[p.jsx(_k,{className:"h-4 w-4 mr-1"}),"Attach (",r.size,")"]})}),p.jsx(Qn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},Nz=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i,isMobile:s=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return s?p.jsxs("div",{className:"flex items-center gap-2 p-1",children:[p.jsx(Od,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),p.jsx(Rn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:i}),p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx(jt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(ls,{className:"h-4 w-4"})}),p.jsx(jt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(xi,{className:"h-4 w-4"})})]})]}):p.jsxs(Xr,{className:"bg-muted/30",children:[p.jsx(Dn,{className:"px-2 py-1"}),p.jsx(Dn,{className:"px-2 py-1",children:p.jsx(Od,{className:"h-5 w-5 text-yellow-400"})}),p.jsx(Dn,{className:"py-1 px-2",colSpan:3,children:p.jsx(Rn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),p.jsx(Dn,{className:"text-right pr-4 py-1",children:p.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(ls,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:"Create (Enter)"})]})}),p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(xi,{className:"h-4 w-4"})})}),p.jsx(Qn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var hk=["Enter"," "],Axe=["ArrowDown","PageUp","Home"],Rz=["ArrowUp","PageDown","End"],Nxe=[...Axe,...Rz],Rxe={ltr:[...hk,"ArrowRight"],rtl:[...hk,"ArrowLeft"]},Ixe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ly="Menu",[h0,jxe,Oxe]=Jx(ly),[df,N1]=di(ly,[Oxe,Au,S1]),R1=Au(),Iz=S1(),[Dxe,ff]=df(ly),[Mxe,cy]=df(ly),jz=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:s=!0}=e,o=R1(t),[l,u]=T.useState(null),d=T.useRef(!1),h=La(i),m=Sp(a);return T.useEffect(()=>{const y=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",y,{capture:!0}),()=>{document.removeEventListener("keydown",y,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),p.jsx(mx,{...o,children:p.jsx(Dxe,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:u,children:p.jsx(Mxe,{scope:t,onClose:T.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:s,children:r})})})};jz.displayName=ly;var Pxe="MenuAnchor",DA=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=R1(n);return p.jsx(w0,{...a,...r,ref:t})});DA.displayName=Pxe;var MA="MenuPortal",[Fxe,Oz]=df(MA,{forceMount:void 0}),Dz=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=ff(MA,t);return p.jsx(Fxe,{scope:t,forceMount:n,children:p.jsx(Ta,{present:n||i.open,children:p.jsx(lp,{asChild:!0,container:a,children:r})})})};Dz.displayName=MA;var Is="MenuContent",[Lxe,PA]=df(Is),Mz=T.forwardRef((e,t)=>{const n=Oz(Is,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=ff(Is,e.__scopeMenu),s=cy(Is,e.__scopeMenu);return p.jsx(h0.Provider,{scope:e.__scopeMenu,children:p.jsx(Ta,{present:r||i.open,children:p.jsx(h0.Slot,{scope:e.__scopeMenu,children:s.modal?p.jsx($xe,{...a,ref:t}):p.jsx(Bxe,{...a,ref:t})})})})}),$xe=T.forwardRef((e,t)=>{const n=ff(Is,e.__scopeMenu),r=T.useRef(null),a=Cn(t,r);return T.useEffect(()=>{const i=r.current;if(i)return t1(i)},[]),p.jsx(FA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Bxe=T.forwardRef((e,t)=>{const n=ff(Is,e.__scopeMenu);return p.jsx(FA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),zxe=lu("MenuContent.ScrollLock"),FA=T.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:y,disableOutsideScroll:v,...b}=e,x=ff(Is,n),w=cy(Is,n),S=R1(n),E=Iz(n),C=jxe(n),[k,I]=T.useState(null),R=T.useRef(null),j=Cn(t,R,x.onContentChange),F=T.useRef(0),$=T.useRef(""),G=T.useRef(0),D=T.useRef(null),Z=T.useRef("right"),q=T.useRef(0),ue=v?ty:T.Fragment,ie=v?{as:zxe,allowPinchZoom:!0}:void 0,ne=ae=>{var Ae,Ne;const B=$.current+ae,J=C().filter(Ce=>!Ce.disabled),ee=document.activeElement,te=(Ae=J.find(Ce=>Ce.ref.current===ee))==null?void 0:Ae.textValue,fe=J.map(Ce=>Ce.textValue),ve=Qxe(fe,B,te),De=(Ne=J.find(Ce=>Ce.textValue===ve))==null?void 0:Ne.ref.current;(function Ce(Pe){$.current=Pe,window.clearTimeout(F.current),Pe!==""&&(F.current=window.setTimeout(()=>Ce(""),1e3))})(B),De&&setTimeout(()=>De.focus())};T.useEffect(()=>()=>window.clearTimeout(F.current),[]),Qx();const X=T.useCallback(ae=>{var J,ee;return Z.current===((J=D.current)==null?void 0:J.side)&&t1e(ae,(ee=D.current)==null?void 0:ee.area)},[]);return p.jsx(Lxe,{scope:n,searchRef:$,onItemEnter:T.useCallback(ae=>{X(ae)&&ae.preventDefault()},[X]),onItemLeave:T.useCallback(ae=>{var B;X(ae)||((B=R.current)==null||B.focus(),I(null))},[X]),onTriggerLeave:T.useCallback(ae=>{X(ae)&&ae.preventDefault()},[X]),pointerGraceTimerRef:G,onPointerGraceIntentChange:T.useCallback(ae=>{D.current=ae},[]),children:p.jsx(ue,{...ie,children:p.jsx(ey,{asChild:!0,trapped:a,onMountAutoFocus:qt(i,ae=>{var B;ae.preventDefault(),(B=R.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:p.jsx(ip,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:y,children:p.jsx(VB,{asChild:!0,...E,dir:w.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:I,onEntryFocus:qt(l,ae=>{w.isUsingKeyboardRef.current||ae.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(gx,{role:"menu","aria-orientation":"vertical","data-state":Xz(x.open),"data-radix-menu-content":"",dir:w.dir,...S,...b,ref:j,style:{outline:"none",...b.style},onKeyDown:qt(b.onKeyDown,ae=>{const J=ae.target.closest("[data-radix-menu-content]")===ae.currentTarget,ee=ae.ctrlKey||ae.altKey||ae.metaKey,te=ae.key.length===1;J&&(ae.key==="Tab"&&ae.preventDefault(),!ee&&te&&ne(ae.key));const fe=R.current;if(ae.target!==fe||!Nxe.includes(ae.key))return;ae.preventDefault();const De=C().filter(Ae=>!Ae.disabled).map(Ae=>Ae.ref.current);Rz.includes(ae.key)&&De.reverse(),Xxe(De)}),onBlur:qt(e.onBlur,ae=>{ae.currentTarget.contains(ae.target)||(window.clearTimeout(F.current),$.current="")}),onPointerMove:qt(e.onPointerMove,p0(ae=>{const B=ae.target,J=q.current!==ae.clientX;if(ae.currentTarget.contains(B)&&J){const ee=ae.clientX>q.current?"right":"left";Z.current=ee,q.current=ae.clientX}}))})})})})})})});Mz.displayName=Is;var Uxe="MenuGroup",LA=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{role:"group",...r,ref:t})});LA.displayName=Uxe;var Hxe="MenuLabel",Pz=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{...r,ref:t})});Pz.displayName=Hxe;var Ww="MenuItem",k6="menu.itemSelect",I1=T.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=T.useRef(null),s=cy(Ww,e.__scopeMenu),o=PA(Ww,e.__scopeMenu),l=Cn(t,i),u=T.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(k6,{bubbles:!0,cancelable:!0});h.addEventListener(k6,y=>r==null?void 0:r(y),{once:!0}),H8(h,m),m.defaultPrevented?u.current=!1:s.onClose()}};return p.jsx(Fz,{...a,ref:l,disabled:n,onClick:qt(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:qt(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:qt(e.onKeyDown,h=>{const m=o.searchRef.current!=="";n||m&&h.key===" "||hk.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});I1.displayName=Ww;var Fz=T.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,s=PA(Ww,n),o=Iz(n),l=T.useRef(null),u=Cn(t,l),[d,h]=T.useState(!1),[m,y]=T.useState("");return T.useEffect(()=>{const v=l.current;v&&y((v.textContent??"").trim())},[i.children]),p.jsx(h0.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:p.jsx(GB,{asChild:!0,...o,focusable:!r,children:p.jsx(rn.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:qt(e.onPointerMove,p0(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:qt(e.onPointerLeave,p0(v=>s.onItemLeave(v))),onFocus:qt(e.onFocus,()=>h(!0)),onBlur:qt(e.onBlur,()=>h(!1))})})})}),qxe="MenuCheckboxItem",Lz=T.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return p.jsx(Hz,{scope:e.__scopeMenu,checked:n,children:p.jsx(I1,{role:"menuitemcheckbox","aria-checked":Zw(n)?"mixed":n,...a,ref:t,"data-state":BA(n),onSelect:qt(a.onSelect,()=>r==null?void 0:r(Zw(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Lz.displayName=qxe;var $z="MenuRadioGroup",[Vxe,Gxe]=df($z,{value:void 0,onValueChange:()=>{}}),Bz=T.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=La(r);return p.jsx(Vxe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:p.jsx(LA,{...a,ref:t})})});Bz.displayName=$z;var zz="MenuRadioItem",Uz=T.forwardRef((e,t)=>{const{value:n,...r}=e,a=Gxe(zz,e.__scopeMenu),i=n===a.value;return p.jsx(Hz,{scope:e.__scopeMenu,checked:i,children:p.jsx(I1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":BA(i),onSelect:qt(r.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,n)},{checkForDefaultPrevented:!1})})})});Uz.displayName=zz;var $A="MenuItemIndicator",[Hz,Kxe]=df($A,{checked:!1}),qz=T.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=Kxe($A,n);return p.jsx(Ta,{present:r||Zw(i.checked)||i.checked===!0,children:p.jsx(rn.span,{...a,ref:t,"data-state":BA(i.checked)})})});qz.displayName=$A;var Wxe="MenuSeparator",Vz=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(rn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Vz.displayName=Wxe;var Zxe="MenuArrow",Gz=T.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=R1(n);return p.jsx(yx,{...a,...r,ref:t})});Gz.displayName=Zxe;var Yxe="MenuSub",[tEe,Kz]=df(Yxe),Qm="MenuSubTrigger",Wz=T.forwardRef((e,t)=>{const n=ff(Qm,e.__scopeMenu),r=cy(Qm,e.__scopeMenu),a=Kz(Qm,e.__scopeMenu),i=PA(Qm,e.__scopeMenu),s=T.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=T.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return T.useEffect(()=>d,[d]),T.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),p.jsx(DA,{asChild:!0,...u,children:p.jsx(Fz,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Xz(n.open),...e,ref:Zl(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:qt(e.onPointerMove,p0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:qt(e.onPointerLeave,p0(h=>{var y,v;d();const m=(y=n.content)==null?void 0:y.getBoundingClientRect();if(m){const b=(v=n.content)==null?void 0:v.dataset.side,x=b==="right",w=x?-5:5,S=m[x?"left":"right"],E=m[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+w,y:h.clientY},{x:S,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:S,y:m.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:qt(e.onKeyDown,h=>{var y;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Rxe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(y=n.content)==null||y.focus(),h.preventDefault())})})})});Wz.displayName=Qm;var Zz="MenuSubContent",Yz=T.forwardRef((e,t)=>{const n=Oz(Is,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=ff(Is,e.__scopeMenu),s=cy(Is,e.__scopeMenu),o=Kz(Zz,e.__scopeMenu),l=T.useRef(null),u=Cn(t,l);return p.jsx(h0.Provider,{scope:e.__scopeMenu,children:p.jsx(Ta,{present:r||i.open,children:p.jsx(h0.Slot,{scope:e.__scopeMenu,children:p.jsx(FA,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;s.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:qt(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:qt(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:qt(e.onKeyDown,d=>{var y;const h=d.currentTarget.contains(d.target),m=Ixe[s.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(y=o.trigger)==null||y.focus(),d.preventDefault())})})})})})});Yz.displayName=Zz;function Xz(e){return e?"open":"closed"}function Zw(e){return e==="indeterminate"}function BA(e){return Zw(e)?"indeterminate":e?"checked":"unchecked"}function Xxe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Jxe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Qxe(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=Jxe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function e1e(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function t1e(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return e1e(n,t)}function p0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Jz=jz,Qz=DA,e7=Dz,t7=Mz,n7=LA,r7=Pz,a7=I1,i7=Lz,s7=Bz,o7=Uz,l7=qz,c7=Vz,u7=Gz,d7=Wz,f7=Yz,zA="ContextMenu",[n1e,nEe]=di(zA,[N1]),Ai=N1(),[r1e,h7]=n1e(zA),p7=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[s,o]=T.useState(!1),l=Ai(t),u=La(r),d=T.useCallback(h=>{o(h),u(h)},[u]);return p.jsx(r1e,{scope:t,open:s,onOpenChange:d,modal:i,children:p.jsx(Jz,{...l,dir:a,open:s,onOpenChange:d,modal:i,children:n})})};p7.displayName=zA;var m7="ContextMenuTrigger",g7=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=h7(m7,n),s=Ai(n),o=T.useRef({x:0,y:0}),l=T.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),u=T.useRef(0),d=T.useCallback(()=>window.clearTimeout(u.current),[]),h=m=>{o.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return T.useEffect(()=>d,[d]),T.useEffect(()=>void(r&&d()),[r,d]),p.jsxs(p.Fragment,{children:[p.jsx(Qz,{...s,virtualRef:l}),p.jsx(rn.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:qt(e.onContextMenu,m=>{d(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:qt(e.onPointerDown,wv(m=>{d(),u.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:qt(e.onPointerMove,wv(d)),onPointerCancel:r?e.onPointerCancel:qt(e.onPointerCancel,wv(d)),onPointerUp:r?e.onPointerUp:qt(e.onPointerUp,wv(d))})]})});g7.displayName=m7;var a1e="ContextMenuPortal",y7=e=>{const{__scopeContextMenu:t,...n}=e,r=Ai(t);return p.jsx(e7,{...r,...n})};y7.displayName=a1e;var b7="ContextMenuContent",v7=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=h7(b7,n),i=Ai(n),s=T.useRef(!1);return p.jsx(t7,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&s.current&&o.preventDefault(),s.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!a.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});v7.displayName=b7;var i1e="ContextMenuGroup",s1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(n7,{...a,...r,ref:t})});s1e.displayName=i1e;var o1e="ContextMenuLabel",l1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(r7,{...a,...r,ref:t})});l1e.displayName=o1e;var c1e="ContextMenuItem",w7=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(a7,{...a,...r,ref:t})});w7.displayName=c1e;var u1e="ContextMenuCheckboxItem",d1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(i7,{...a,...r,ref:t})});d1e.displayName=u1e;var f1e="ContextMenuRadioGroup",h1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(s7,{...a,...r,ref:t})});h1e.displayName=f1e;var p1e="ContextMenuRadioItem",m1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(o7,{...a,...r,ref:t})});m1e.displayName=p1e;var g1e="ContextMenuItemIndicator",y1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(l7,{...a,...r,ref:t})});y1e.displayName=g1e;var b1e="ContextMenuSeparator",x7=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(c7,{...a,...r,ref:t})});x7.displayName=b1e;var v1e="ContextMenuArrow",w1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(u7,{...a,...r,ref:t})});w1e.displayName=v1e;var x1e="ContextMenuSubTrigger",_1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(d7,{...a,...r,ref:t})});_1e.displayName=x1e;var S1e="ContextMenuSubContent",E1e=T.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ai(n);return p.jsx(f7,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});E1e.displayName=S1e;function wv(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var C1e=p7,k1e=g7,T1e=y7,A1e=v7,N1e=w7,R1e=x7;function T6({...e}){return p.jsx(C1e,{"data-slot":"context-menu",...e})}function A6({...e}){return p.jsx(k1e,{"data-slot":"context-menu-trigger",...e})}function N6({className:e,...t}){return p.jsx(T1e,{children:p.jsx(A1e,{"data-slot":"context-menu-content",className:_t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function ts({className:e,inset:t,variant:n="default",...r}){return p.jsx(N1e,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:_t("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function R6({className:e,...t}){return p.jsx(R1e,{"data-slot":"context-menu-separator",className:_t("bg-border -mx-1 my-1 h-px",e),...t})}const I1e=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:m,handleDelete:y,setNewName:v,renameInputRef:b,handleGitInit:x,handleGitPull:w,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const k=e.type==="folder",I=G=>{G.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(k?o(e):l(!n,e.id))},R=G=>{G.key==="Enter"?h():G.key==="Escape"&&d()},j=k?r?iD:Od:aD,F=k?r?"text-green-400":"text-yellow-400":"text-blue-400",$=p.jsxs(Xr,{className:_t("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!k&&"cursor-pointer"),onClick:I,onDoubleClick:()=>!i&&!t&&o(e),children:[p.jsx(Dn,{className:"px-2 py-1",children:p.jsx(l0,{checked:n,onCheckedChange:G=>l(!!G,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||k})}),p.jsx(Dn,{className:"px-2 py-1",children:p.jsx(j,{className:_t("h-5 w-5",F)})}),p.jsx(Dn,{className:"py-1 px-2",children:t?p.jsx(Rn,{ref:b,value:a,onChange:G=>v(G.target.value),onBlur:h,onKeyDown:R,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:G=>G.stopPropagation(),disabled:i}):p.jsx("span",{className:_t("truncate",k&&"cursor-pointer hover:underline"),title:e.name,onClick:G=>{k&&(G.stopPropagation(),o(e))},children:e.name})}),p.jsx(Dn,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?Pg(e.size):""}),p.jsx(Dn,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),p.jsx(Dn,{className:"text-right pr-4 py-1",children:p.jsx("div",{className:_t("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?p.jsxs(p.Fragment,{children:[p.jsx(Vn,{tooltipText:"Save (Enter)",onClick:G=>{G.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(ls,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),p.jsx(Vn,{tooltipText:"Cancel (Esc)",onClick:G=>{G.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:p.jsx(xi,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Vn,{tooltipText:"Rename",onClick:G=>{G.stopPropagation(),u(e)},"aria-label":"Rename",disabled:i||s,icon:p.jsx(ng,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Vn,{tooltipText:k?"Download folder (.zip)":"Download file",onClick:G=>{G.stopPropagation(),m(e)},"aria-label":k?"Download folder as ZIP":"Download file",disabled:i,icon:p.jsx(Rd,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Vn,{tooltipText:"Delete",onClick:G=>{G.stopPropagation(),y(e)},"aria-label":`Delete ${k?"folder":"file"}`,disabled:i,icon:p.jsx(Li,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return k?p.jsxs(T6,{children:[p.jsx(A6,{disabled:t||i,asChild:!0,children:$}),p.jsxs(N6,{children:[p.jsx(ts,{onSelect:()=>o(e),disabled:t||i,children:"Open Folder"}),p.jsx(R6,{}),r?p.jsxs(p.Fragment,{children:[p.jsxs(ts,{onSelect:()=>w(e.path),disabled:i,children:[p.jsx(oD,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),p.jsxs(ts,{onSelect:()=>S(e.path),disabled:i,children:[p.jsx(sD,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),p.jsxs(ts,{onSelect:()=>E(e.path),disabled:i,children:[p.jsx(xk,{className:"mr-2 h-4 w-4"}),"Git Push"]}),p.jsxs(ts,{onSelect:()=>C(e.path),disabled:i,children:[p.jsx(uD,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):p.jsxs(ts,{onSelect:()=>x(e.path),disabled:i,children:[p.jsx(cu,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),p.jsx(R6,{}),p.jsxs(ts,{onSelect:()=>u(e),disabled:i,children:[p.jsx(ng,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(ts,{onSelect:()=>m(e),disabled:i,children:[p.jsx(Rd,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),p.jsxs(ts,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>y(e),disabled:i,children:[p.jsx(Li,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):p.jsxs(T6,{children:[p.jsx(A6,{disabled:t||i,asChild:!0,children:$}),p.jsxs(N6,{children:[p.jsxs(ts,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),p.jsxs(ts,{onSelect:()=>u(e),disabled:i,children:[p.jsx(ng,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(ts,{onSelect:()=>m(e),disabled:i,children:[p.jsx(Rd,{className:"mr-2 h-4 w-4"}),"Download File"]}),p.jsxs(ts,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>y(e),disabled:i,children:[p.jsx(Li,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},j1e=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:y,handleDownload:v,handleDelete:b,setNewName:x,setNewFolderName:w,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:I,handleGitCommit:R,handleGitPush:j,handleGitStatus:F})=>{const $=T.useMemo(()=>e,[e]);return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):p.jsx("div",{className:"relative h-full",children:p.jsxs(Tp,{className:"w-full text-sm",children:[p.jsx(Ap,{className:"sticky top-0 bg-card z-10",children:p.jsxs(Xr,{className:"hover:bg-card",children:[p.jsx(Tr,{className:"w-[40px] px-2"}),p.jsx(Tr,{className:"w-[40px] px-2"}),p.jsx(Tr,{children:"Name"}),p.jsx(Tr,{className:"w-[100px] text-right",children:"Size"}),p.jsx(Tr,{className:"w-[150px] text-right",children:"Modified"}),p.jsx(Tr,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),p.jsxs(Np,{children:[r&&p.jsx(Nz,{newFolderName:a,setNewFolderName:w,handleCreateFolder:y,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s}),$.map(G=>{const D=t===G.path,Z=i.has(G.id),q=C[G.path]??!1;return p.jsx(I1e,{entry:G,isEditingThis:D,isChecked:Z,isGitRepo:q,newName:D?n:"",isOperationLoading:s,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:x,renameInputRef:S,handleGitInit:k,handleGitPull:I,handleGitCommit:R,handleGitPush:j,handleGitStatus:F},G.id)}),e.length===0&&!r&&!s&&p.jsx(Xr,{children:p.jsx(Dn,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},O1e=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:s,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:u,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:y,handleCloneClick:v,fileInputRef:b,folderInputRef:x,archiveInputRef:w,handleFileChange:S,handleArchiveChange:E})=>p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:b,onChange:S,className:"hidden",multiple:!0,disabled:t}),p.jsx("input",{type:"file",ref:x,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),p.jsx("input",{type:"file",ref:w,onChange:E,className:"hidden",accept:".zip",disabled:t}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(jt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:p.jsx(nV,{className:"h-4 w-4"})}),p.jsx(jt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:p.jsx(Gq,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),p.jsx("div",{className:"flex-grow"}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",p.jsx(jt,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(Xw,{className:"h-4 w-4"})}),p.jsxs(jt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(wk,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(jt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(nD,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),p.jsxs(jt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(Od,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(jt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(Rq,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),p.jsxs(jt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(cu,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),p.jsxs(jt,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),y()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(nq,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),_7=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:s,isSubmitting:o,submitDisabled:l=!1,className:u,contentClassName:d})=>{const h=async m=>{m==null||m.preventDefault(),!(o||l)&&await s()};return p.jsx(f1,{open:e,onOpenChange:t,children:p.jsxs(h1,{className:_t(u),children:[p.jsxs(p1,{children:[p.jsx(g1,{children:n}),r&&p.jsx(y1,{children:r})]}),p.jsx("div",{className:_t("py-4",d),children:a}),p.jsxs(m1,{children:[p.jsx(lye,{asChild:!0,children:p.jsx(jt,{variant:"outline",disabled:o,children:"Cancel"})}),p.jsxs(jt,{onClick:h,disabled:o||l,children:[o&&p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":i]})]})]})})},D1e=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:s,onSubmitClone:o,currentPath:l})=>p.jsx(_7,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:p.jsxs(p.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",p.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:s,submitDisabled:!n.trim(),children:p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Kt,{htmlFor:"clone-url",className:"text-right",children:"URL"}),p.jsx(Rn,{id:"clone-url",value:n,onChange:u=>r(u.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:s})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Kt,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),p.jsx(Rn,{id:"clone-branch",value:a,onChange:u=>i(u.target.value),className:"col-span-3",placeholder:"main (default)",disabled:s})]})]})}),M1e=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:s})=>p.jsx(_7,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:p.jsxs(p.Fragment,{children:["Enter a commit message for the changes in ",p.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:s,isSubmitting:i,submitDisabled:!r.trim(),children:p.jsx("div",{className:"grid gap-4",children:p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx(Kt,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),p.jsx(Rn,{id:"commit-msg",value:r,onChange:o=>a(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})});var j1="DropdownMenu",[P1e,rEe]=di(j1,[N1]),Ni=N1(),[F1e,S7]=P1e(j1),E7=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=Ni(t),u=T.useRef(null),[d,h]=js({prop:a,defaultProp:i??!1,onChange:s,caller:j1});return p.jsx(F1e,{scope:t,triggerId:Ea(),triggerRef:u,contentId:Ea(),open:d,onOpenChange:h,onOpenToggle:T.useCallback(()=>h(m=>!m),[h]),modal:o,children:p.jsx(Jz,{...l,open:d,onOpenChange:h,dir:r,modal:o,children:n})})};E7.displayName=j1;var C7="DropdownMenuTrigger",k7=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=S7(C7,n),s=Ni(n);return p.jsx(Qz,{asChild:!0,...s,children:p.jsx(rn.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Zl(t,i.triggerRef),onPointerDown:qt(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:qt(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});k7.displayName=C7;var L1e="DropdownMenuPortal",T7=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ni(t);return p.jsx(e7,{...r,...n})};T7.displayName=L1e;var A7="DropdownMenuContent",N7=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=S7(A7,n),i=Ni(n),s=T.useRef(!1);return p.jsx(t7,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:qt(e.onCloseAutoFocus,o=>{var l;s.current||(l=a.triggerRef.current)==null||l.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:qt(e.onInteractOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!a.modal||d)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});N7.displayName=A7;var $1e="DropdownMenuGroup",B1e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(n7,{...a,...r,ref:t})});B1e.displayName=$1e;var z1e="DropdownMenuLabel",U1e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(r7,{...a,...r,ref:t})});U1e.displayName=z1e;var H1e="DropdownMenuItem",R7=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(a7,{...a,...r,ref:t})});R7.displayName=H1e;var q1e="DropdownMenuCheckboxItem",V1e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(i7,{...a,...r,ref:t})});V1e.displayName=q1e;var G1e="DropdownMenuRadioGroup",K1e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(s7,{...a,...r,ref:t})});K1e.displayName=G1e;var W1e="DropdownMenuRadioItem",Z1e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(o7,{...a,...r,ref:t})});Z1e.displayName=W1e;var Y1e="DropdownMenuItemIndicator",X1e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(l7,{...a,...r,ref:t})});X1e.displayName=Y1e;var J1e="DropdownMenuSeparator",I7=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(c7,{...a,...r,ref:t})});I7.displayName=J1e;var Q1e="DropdownMenuArrow",e_e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(u7,{...a,...r,ref:t})});e_e.displayName=Q1e;var t_e="DropdownMenuSubTrigger",n_e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(d7,{...a,...r,ref:t})});n_e.displayName=t_e;var r_e="DropdownMenuSubContent",a_e=T.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Ni(n);return p.jsx(f7,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a_e.displayName=r_e;var i_e=E7,s_e=k7,o_e=T7,l_e=N7,c_e=R7,u_e=I7;function d_e({...e}){return p.jsx(i_e,{"data-slot":"dropdown-menu",...e})}function f_e({...e}){return p.jsx(s_e,{"data-slot":"dropdown-menu-trigger",...e})}function h_e({className:e,sideOffset:t=4,...n}){return p.jsx(o_e,{children:p.jsx(l_e,{"data-slot":"dropdown-menu-content",sideOffset:t,className:_t("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function Mo({className:e,inset:t,variant:n="default",...r}){return p.jsx(c_e,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:_t("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function I6({className:e,...t}){return p.jsx(u_e,{"data-slot":"dropdown-menu-separator",className:_t("bg-border -mx-1 my-1 h-px",e),...t})}const p_e=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:y,handleDownload:v,handleDelete:b,setNewName:x,setNewFolderName:w,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:I,handleGitCommit:R,handleGitPush:j,handleGitStatus:F})=>{const $=G=>{G.key==="Enter"?h():G.key==="Escape"&&d()};return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):p.jsxs("div",{className:"p-2 space-y-1",children:[r&&p.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:p.jsx(Nz,{newFolderName:a,setNewFolderName:w,handleCreateFolder:y,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s,isMobile:!0})}),e.map(G=>{const D=t===G.path,Z=i.has(G.id),q=C[G.path]??!1,ue=G.type==="folder",ie=ue?q?iD:Od:aD,ne=ue?q?"text-green-400":"text-yellow-400":"text-blue-400";return p.jsxs("div",{className:_t("flex items-center justify-between p-2 border rounded-md",D&&"bg-muted ring-1 ring-primary",s&&"opacity-70 cursor-not-allowed",!D&&"hover:bg-muted/50",!D&&"cursor-pointer"),onClick:()=>{D||s||(ue?o(G):l(!Z,G.id))},children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!ue&&p.jsx(l0,{checked:Z,onCheckedChange:X=>l(!!X,G.id),"aria-label":`Select ${G.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:s,onClick:X=>X.stopPropagation()}),ue&&p.jsx("div",{className:"w-6 flex-shrink-0"}),p.jsx(ie,{className:_t("h-5 w-5 flex-shrink-0",ne)}),p.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[D?p.jsx(Rn,{ref:S,value:n,onChange:X=>x(X.target.value),onBlur:h,onKeyDown:$,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:X=>X.stopPropagation(),disabled:s}):p.jsx("span",{className:"text-sm font-medium truncate",title:G.name,children:G.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:G.type==="file"&&G.size!==void 0?Pg(G.size):G.type==="folder"?q?"Git Repository":"Folder":""})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:D?p.jsxs(p.Fragment,{children:[p.jsx(jt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:X=>{X.stopPropagation(),h()},disabled:s||!n.trim(),"aria-label":"Save name",children:s?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(ls,{className:"h-4 w-4"})}),p.jsx(jt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:X=>{X.stopPropagation(),d()},disabled:s,"aria-label":"Cancel edit",children:p.jsx(xi,{className:"h-4 w-4"})})]}):p.jsxs(d_e,{children:[p.jsx(f_e,{asChild:!0,children:p.jsx(jt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:X=>X.stopPropagation(),disabled:s,"aria-label":"More actions",children:p.jsx(Aq,{className:"h-4 w-4"})})}),p.jsxs(h_e,{align:"end",onClick:X=>X.stopPropagation(),children:[ue&&p.jsx(Mo,{onSelect:()=>o(G),children:"Open Folder"}),!ue&&p.jsxs(Mo,{onSelect:()=>l(!Z,G.id),children:[Z?"Deselect":"Select"," File"]}),p.jsxs(Mo,{onSelect:()=>u(G),children:[p.jsx(ng,{className:"mr-2 h-4 w-4"})," Rename"]}),p.jsxs(Mo,{onSelect:()=>v(G),children:[p.jsx(Rd,{className:"mr-2 h-4 w-4"})," Download"," ",ue?"as ZIP":""]}),ue&&p.jsx(I6,{}),ue&&q&&p.jsxs(p.Fragment,{children:[p.jsxs(Mo,{onSelect:()=>I(G.path),children:[p.jsx(oD,{className:"mr-2 h-4 w-4"})," Git Pull"]}),p.jsxs(Mo,{onSelect:()=>R(G.path),children:[p.jsx(sD,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),p.jsxs(Mo,{onSelect:()=>j(G.path),children:[p.jsx(xk,{className:"mr-2 h-4 w-4"})," Git Push"]}),p.jsxs(Mo,{onSelect:()=>F(G.path),children:[p.jsx(uD,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),ue&&!q&&p.jsxs(Mo,{onSelect:()=>k(G.path),children:[p.jsx(cu,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),p.jsx(I6,{}),p.jsxs(Mo,{className:"text-red-600 focus:text-red-600",onSelect:()=>b(G),children:[p.jsx(Li,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},G.id)}),e.length===0&&!r&&!s&&p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},UA=T.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:s,createDirectory:o,uploadFiles:l,deleteNodes:u,renameNode:d,setCurrentPath:h,rootId:m,selectFile:y,deselectFile:v,selectedFileIds:b,vfsKey:x,configuredVfsKey:w,initializingKey:S,_setError:E,_setOperationLoading:C,findNodeByPath:k,initializeVFS:I}=lo(dn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[R,j]=T.useState(""),[F,$]=T.useState(null),[G,D]=T.useState(!1),[Z,q]=T.useState(""),[ue,ie]=T.useState({}),[ne,X]=T.useState(!1),[ae,B]=T.useState(""),[J,ee]=T.useState(""),[te,fe]=T.useState(!1),[ve,De]=T.useState(!1),[Ae,Ne]=T.useState(null),[Ce,Pe]=T.useState(""),[Qe,Le]=T.useState(!1),[Ie,z]=T.useState({}),Se=T.useRef(null),Te=T.useRef(null),de=T.useRef(null),se=T.useRef(null),Q=T.useRef(null),xe=n?e[n]:null,Fe=xe?xe.path:"/",Ge=(t[n||m||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,Rt)=>ut.type==="folder"&&Rt.type==="file"?-1:ut.type==="file"&&Rt.type==="folder"?1:ut.name.localeCompare(Rt.name)),Nt=T.useMemo(()=>Ge.filter(ut=>ut.type==="folder").map(ut=>ut.path),[Ge]),it=r||S!==null||x!==w,St=a||te||Qe||Object.values(Ie).some(Boolean);T.useEffect(()=>{n!==null&&!t[n]&&!it&&w===x?s(n):n===null&&m&&!t[m]&&!it&&w===x&&s(m)},[n,t,m,it,s,w,x]),T.useEffect(()=>{var ut,Rt;F&&((ut=se.current)==null||ut.focus(),(Rt=se.current)==null||Rt.select())},[F]),T.useEffect(()=>{var ut;G&&((ut=Q.current)==null||ut.focus())},[G]),T.useEffect(()=>{(async()=>{if(it||Nt.length===0)return;const Rt={};let Lt=!1;for(const Qt of Nt)try{const An=await voe(Qt);ue[Qt]!==An&&(Rt[Qt]=An,Lt=!0)}catch(An){console.error(`Error checking git status for ${Qt}:`,An),ue[Qt]!==!1&&(Rt[Qt]=!1,Lt=!0)}Lt&&ie(Qt=>({...Qt,...Rt}))})()},[Nt,it,ue]);const Ft=T.useCallback(async(ut,Rt)=>{if(!(St||it)){Rt!==!1&&C(!0),E(null);try{await ut()}catch(Lt){console.error("[FileManager Operation Error]:",Lt)}finally{Rt!==!1&&C(!1)}}},[St,it,E,C]),Dt=T.useCallback(ut=>{St||it||F||ut.type==="folder"&&Ft(()=>h(ut.path),!1)},[St,it,F,h,Ft]),Zt=T.useCallback(()=>{if(St||it||Fe==="/")return;const ut=R0(Fe);Ft(()=>h(ut),!1)},[St,it,Fe,h,Ft]),ye=T.useCallback(()=>{St||it||Fe==="/"||Ft(()=>h("/"),!1)},[St,it,Fe,h,Ft]),O=T.useCallback(()=>{it||Ft(()=>s(n),!1)},[Ft,s,n,it]),K=T.useCallback((ut,Rt)=>{const Lt=e[Rt];Lt&&Lt.type==="file"?ut?y(Rt):v(Rt):Lt&&Lt.type==="folder"&&Ye.info("Folders cannot be attached to the prompt.")},[y,v,e]),he=T.useCallback(ut=>{St||it||G||($(ut.path),j(ut.name),D(!1))},[St,it,G]),je=T.useCallback(()=>{$(null),j("")},[]),be=T.useCallback(async()=>{if(!F||!R.trim()){je();return}const ut=k(F);ut&&ut.name!==R.trim()&&await Ft(()=>d(ut.id,R.trim())),je()},[F,R,d,je,k,Ft]),ke=T.useCallback(()=>{St||it||F||(D(!0),q(""),$(null))},[St,it,F]),le=T.useCallback(()=>{D(!1),q("")},[]),ft=T.useCallback(async()=>{if(!Z.trim()){le();return}await Ft(()=>o(n,Z.trim())),le()},[Z,o,n,le,Ft]),vt=()=>{var ut;return(ut=Se.current)==null?void 0:ut.click()},P=()=>{var ut;return(ut=Te.current)==null?void 0:ut.click()},Be=()=>{var ut;return(ut=de.current)==null?void 0:ut.click()},nt=T.useCallback(async ut=>{const Rt=ut.target.files;Rt&&Rt.length>0&&(await Ft(()=>l(n,Rt)),ut.target&&(ut.target.value=""))},[l,n,Ft]),ge=T.useCallback(async ut=>{var Lt;const Rt=(Lt=ut.target.files)==null?void 0:Lt[0];Rt&&(await Ft(async()=>{await _oe(Rt,Fe),await s(n)}),ut.target&&(ut.target.value=""))},[Fe,s,n,Ft]),Oe=T.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ft(()=>u([ut.id]))},[u,Ft]),Ke=T.useCallback(async ut=>{await Ft(async()=>{ut.type==="file"?await xoe(ut.path):await eO(`${ut.name}.zip`,ut.path)})},[Ft]),Ot=T.useCallback(async()=>{Ge.length!==0&&await Ft(async()=>{const ut=ga(Fe)||"root";await eO(`${ut}_export.zip`,Fe)})},[Fe,Ge.length,Ft]),me=T.useCallback(async(ut,Rt)=>{if(!(Ie[ut]||it||a)){z(Lt=>({...Lt,[ut]:!0})),E(null);try{await Rt()}catch(Lt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Lt)}finally{z(Lt=>({...Lt,[ut]:!1}))}}},[E,Ie,it,a]),V=T.useCallback(ut=>{me(ut,async()=>{await TF(ut),ie(Rt=>({...Rt,[ut]:!0}))})},[me]),H=T.useCallback(ut=>{Ye.info("Pulling default branch (auth not implemented yet)..."),me(ut,()=>Hx(ut,"main"))},[me]),W=T.useCallback(ut=>{Ne(ut),Pe(""),De(!0)},[]),pe=T.useCallback(ut=>{Ye.info("Pushing default branch (auth not implemented yet)..."),me(ut,()=>zT(ut,"main"))},[me]),Re=T.useCallback(ut=>{me(ut,()=>AF(ut))},[me]),He=T.useCallback(()=>{B(""),ee(""),X(!0)},[]),pt=T.useCallback(async()=>{if(!ae.trim()){Ye.error("Repository URL cannot be empty.");return}fe(!0),E(null);try{const ut=ga(ae.trim().replace(/\.git$/,""))||"cloned_repo",Rt=Fg(Fe,ut);await kF(Rt,ae.trim(),J.trim()||void 0),X(!1),await O()}catch{}finally{fe(!1)}},[ae,J,Fe,E,O]),Wt=T.useCallback(async()=>{if(!Ae||!Ce.trim()){Ye.error("Commit message cannot be empty.");return}Le(!0),E(null);try{await BT(Ae,Ce.trim()),De(!1)}catch{}finally{Le(!1)}},[Ae,Ce,E]);return it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[p.jsx(On,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&p.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[p.jsxs("p",{children:["Error loading filesystem: ",i]}),p.jsx(jt,{variant:"outline",size:"sm",onClick:()=>I(x||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):p.jsxs("div",{className:_t("flex h-full flex-col bg-card text-card-foreground"),children:[p.jsx(O1e,{currentPath:Fe,isAnyLoading:St||it,isOperationLoading:a,entries:Ge,editingPath:F,creatingFolder:G,handleNavigateHome:ye,handleNavigateUp:Zt,handleRefresh:O,startCreatingFolder:ke,handleUploadClick:vt,handleFolderUploadClick:P,handleArchiveUploadClick:Be,handleDownloadAll:Ot,handleCloneClick:He,fileInputRef:Se,folderInputRef:Te,archiveInputRef:de,handleFileChange:nt,handleArchiveChange:ge}),p.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:p.jsx(j1e,{entries:Ge,editingPath:F,newName:R,creatingFolder:G,newFolderName:Z,selectedFileIds:b,isOperationLoading:St,handleNavigate:Dt,handleCheckboxChange:K,startEditing:he,cancelEditing:je,handleRename:be,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Oe,setNewName:j,setNewFolderName:q,renameInputRef:se,newFolderInputRef:Q,gitRepoStatus:ue,handleGitInit:V,handleGitPull:H,handleGitCommit:W,handleGitPush:pe,handleGitStatus:Re})}),p.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:p.jsx(p_e,{entries:Ge,editingPath:F,newName:R,creatingFolder:G,newFolderName:Z,selectedFileIds:b,isOperationLoading:St,handleNavigate:Dt,handleCheckboxChange:K,startEditing:he,cancelEditing:je,handleRename:be,cancelCreatingFolder:le,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Oe,setNewName:j,setNewFolderName:q,renameInputRef:se,newFolderInputRef:Q,gitRepoStatus:ue,handleGitInit:V,handleGitPull:H,handleGitCommit:W,handleGitPush:pe,handleGitStatus:Re})}),p.jsx(D1e,{isOpen:ne,onOpenChange:X,cloneRepoUrl:ae,setCloneRepoUrl:B,cloneBranch:J,setCloneBranch:ee,isCloning:te,onSubmitClone:pt,currentPath:Fe}),p.jsx(M1e,{isOpen:ve,onOpenChange:De,commitPath:Ae,commitMessage:Ce,setCommitMessage:Pe,isCommitting:Qe,onSubmitCommit:Wt})]})});UA.displayName="FileManager";const m_e=({vfsKey:e,selectedItemType:t})=>e==="orphan"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(r3,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Shared VFS:"})," All chats ",p.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(r3,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(Od,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,g_e=()=>{const{isVfsModalOpen:e,toggleVfsModal:t}=os(dn(d=>({isVfsModalOpen:d.isVfsModalOpen,toggleVfsModal:d.toggleVfsModal}))),{vfsKey:n,selectedFileIds:r,clearSelection:a,nodes:i}=lo(dn(d=>({vfsKey:d.vfsKey,selectedFileIds:d.selectedFileIds,clearSelection:d.clearSelection,nodes:d.nodes}))),s=mn(d=>d.selectedItemType),o=Jl.getState().addAttachedFile,l=()=>{if(r.size===0){Ye.info("No files selected in VFS to attach.");return}let d=0;r.forEach(h=>{const m=i[h];m&&m.type==="file"&&(o({source:"vfs",name:m.name,type:m.mimeType||"application/octet-stream",size:m.size,path:m.path}),d++)}),d>0?(Ye.success(`Attached ${d} file(s) from VFS to the next prompt.`),a(),t(!1)):Ye.warning("No valid files were selected to attach.")},u=()=>{a(),t(!1)};return p.jsx(f1,{open:e,onOpenChange:u,children:p.jsxs(h1,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[p.jsxs(p1,{className:"p-4 pb-2 border-b flex-shrink-0",children:[p.jsx(g1,{children:"Virtual Filesystem"}),p.jsx(y1,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),p.jsx(m_e,{vfsKey:n,selectedItemType:s})]}),p.jsx("div",{className:"flex-grow overflow-hidden",children:p.jsx(UA,{})}),p.jsxs(m1,{className:"p-4 pt-2 border-t flex-shrink-0",children:[p.jsx(jt,{variant:"outline",onClick:u,children:"Close"}),p.jsxs(jt,{onClick:l,disabled:r.size===0,children:[p.jsx(_k,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r.size,")"]})]})]})})};function y_e(){const e=Rr.getState().registerPromptControl,t=Rr.getState().registerChatControl;e({id:"core-vfs-prompt-trigger",show:()=>lo.getState().enableVfs,triggerRenderer:()=>gt.createElement(Txe)}),t({id:"core-vfs-modal-panel",panel:void 0,show:()=>os.getState().isVfsModalOpen,renderer:()=>gt.createElement(g_e),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control (Prompt Trigger & Modal)")}const b_e=()=>{const{linkConversationToRepo:e,syncConversation:t}=mn(dn($=>({linkConversationToRepo:$.linkConversationToRepo,syncConversation:$.syncConversation}))),[n,r]=T.useState(()=>mn.getState().selectedItemId),[a,i]=T.useState(()=>mn.getState().selectedItemType),[s,o]=T.useState(()=>mn.getState().syncRepos),[l,u]=T.useState(()=>mn.getState().conversationSyncStatus),[d,h]=T.useState(()=>qn.getState().status==="streaming"),[m,y]=T.useState(null),[v,b]=T.useState("idle"),[x,w]=T.useState(!1),[S,E]=T.useState(!1);T.useEffect(()=>{const $=ie=>{r(ie.selectedItemId),i(ie.selectedItemType)},G=()=>{o(mn.getState().syncRepos)},D=ie=>{u(ne=>({...ne,[ie.conversationId]:ie.status}))},Z=ie=>{h(ie.status==="streaming")},q=ie=>{ie.conversationId===n&&ie.updates.syncRepoId!==void 0&&y(ie.updates.syncRepoId)},ue=mn.getState();return r(ue.selectedItemId),i(ue.selectedItemType),o(ue.syncRepos),u(ue.conversationSyncStatus),kt.on(Et.CONTEXT_CHANGED,$),kt.on(Et.SYNC_REPO_CHANGED,G),kt.on(Et.CONVERSATION_SYNC_STATUS_CHANGED,D),kt.on(Et.INTERACTION_STATUS_CHANGED,Z),kt.on(Et.CONVERSATION_UPDATED,q),()=>{kt.off(Et.CONTEXT_CHANGED,$),kt.off(Et.SYNC_REPO_CHANGED,G),kt.off(Et.CONVERSATION_SYNC_STATUS_CHANGED,D),kt.off(Et.INTERACTION_STATUS_CHANGED,Z),kt.off(Et.CONVERSATION_UPDATED,q)}},[n]),T.useEffect(()=>{if(a==="conversation"&&n){const $=mn.getState().getConversationById(n);y(($==null?void 0:$.syncRepoId)??null),b(l[n]??"idle")}else y(null),b("idle")},[n,a,l]);const C=gt.useMemo(()=>new Map(s.map($=>[$.id,$.name])),[s]),k=m?C.get(m):void 0,I=T.useCallback(async $=>{if(!n||a!=="conversation")return;w(!0),await e(n,$==="none"?null:$),w(!1)},[n,a,e]),R=T.useCallback(async()=>{!n||!m||(E(!0),await t(n),E(!1))},[n,m,t]),j=C9(v,k),F=!m||S||x||d||v==="syncing";return a!=="conversation"||s.length===0?null:p.jsxs(zu,{children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Uu,{asChild:!0,children:p.jsx(jt,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||x||S,"aria-label":"Configure Git Sync",children:v==="syncing"||S||x?p.jsx(On,{className:"h-4 w-4 animate-spin"}):p.jsx(cu,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:m?`Sync Status: ${v}`:"Link to Sync Repo"})]})}),p.jsxs(Hu,{className:"w-64 p-4 space-y-3",align:"start",children:[p.jsx(Kt,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),p.jsxs(el,{value:m??"none",onValueChange:I,disabled:x||S||d,children:[p.jsx(nl,{id:"sync-repo-select",className:"w-full h-9",children:p.jsx(tl,{placeholder:"Select repository..."})}),p.jsxs(rl,{children:[p.jsx(Gr,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map($=>p.jsx(Gr,{value:$.id,children:$.name},$.id))]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",j||"Not Linked"]}),p.jsxs(jt,{size:"sm",variant:"outline",onClick:R,disabled:F,className:"h-8",children:[S||v==="syncing"?p.jsx(On,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(xk,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function v_e(){const e=Rr.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>gt.createElement(b_e)}),console.log("[Function] Registered Core Git Sync Control")}const w_e=U.object({path:U.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),x_e=U.object({path:U.string().describe("The path of the file to read within the VFS."),encoding:U.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),__e=U.object({path:U.string().describe("The path where the file should be written."),content:U.string().describe("The content to write to the file."),encoding:U.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),S_e=U.object({path:U.string().describe("The path of the file or directory to delete."),recursive:U.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),E_e=U.object({path:U.string().describe("The path of the directory to create (including parents).")}),C_e=U.object({oldPath:U.string().describe("The current path of the item to rename."),newName:U.string().describe("The new name for the item.")});function k_e(){const e=Rr.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:w_e},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=rr(o||"/");try{const h=await UT(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(m=>({name:m.name,type:m.isDirectory?"folder":"file",size:m.size,lastModified:m.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:x_e},async({path:o,encoding:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o);try{const m=await uf(h,{fsInstance:d});let y;return l==="base64"?y=btoa(String.fromCharCode(...m)):y=new TextDecoder().decode(m),{success:!0,path:h,content:y,encoding:l}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:__e},async({path:o,content:l,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=rr(o);try{let y;if(u==="base64"){const v=atob(l),b=v.length,x=new Uint8Array(b);for(let w=0;w<b;w++)x[w]=v.charCodeAt(w);y=x}else y=l;return await qx(m,y,{fsInstance:h}),{success:!0,path:m}}catch(y){return{success:!1,path:m,error:y.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:S_e},async({path:o,recursive:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o);try{return await HT(h,l,{fsInstance:d}),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:E_e},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=rr(o);try{return await NF(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:C_e},async({oldPath:o,newName:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=rr(o),m=rr(h.substring(0,h.lastIndexOf("/"))||"/"),y=Qo(m,l);try{return await IF(h,y,{fsInstance:d}),{success:!0,oldPath:h,newPath:y}}catch(v){return{success:!1,oldPath:h,newName:l,error:v.message}}}),console.log("[Function] Core VFS Tools Registered.")}const T_e=U.object({path:U.string().describe("The directory path within the VFS to initialize as a Git repository.")}),A_e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to commit."),message:U.string().describe("The commit message.")}),N_e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:U.string().optional().describe("The branch name to pull.")}),R_e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to push."),branch:U.string().optional().describe("The branch name to push.")}),I_e=U.object({path:U.string().describe("The directory path of the Git repository within the VFS to check status.")});function j_e(){const e=Rr.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:T_e},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await TF(s,{fsInstance:l}),{success:!0,message:`Repository initialized at ${s}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:A_e},async({path:s,message:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=lr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await BT(s,o,{fsInstance:u}),{success:!0,message:`Changes committed in ${s}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:N_e},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await Hx(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:R_e},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await zT(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:I_e},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await AF(s,{fsInstance:l}),{success:!0,message:`Status checked for ${s}`}}catch(u){return{success:!1,error:u.message}}}),console.log("[Function] Core Git Tools Registered.")}const O_e=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:s})=>{const o=Rr(S=>S.tools),l=lr(S=>S.toolMaxSteps),[u,d]=T.useState(""),h=T.useMemo(()=>Object.entries(o).map(([S,{definition:E,modId:C}])=>({name:S,description:E.description??"No description provided.",modId:C})).sort((S,E)=>S.name.localeCompare(E.name)),[o]),m=T.useMemo(()=>{const S=u.trim().toLowerCase();return S?h.filter(E=>E.name.toLowerCase().includes(S)||E.description.toLowerCase().includes(S)||E.modId.toLowerCase().includes(S)):h},[h,u]),y=T.useCallback((S,E)=>{n(C=>{const k=new Set(C);return E?k.add(S):k.delete(S),k})},[n]),v=T.useCallback(S=>{n(()=>S?new Set(h.map(E=>E.name)):new Set)},[h,n]),b=S=>{const E=S.target.value;if(E===""){a(null);return}const C=parseInt(E,10);if(isNaN(C))a(null);else{const k=Math.max(1,Math.min(20,C));a(k)}},x=r===null?"":String(r),w=s!=="conversation"||!i;return p.jsxs("div",{className:_t("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[p.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),p.jsxs("div",{className:"relative",children:[p.jsx(Yl,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter tools...",value:u,onChange:S=>d(S.target.value),className:"pl-8 h-9",disabled:w})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs(Kt,{className:"text-xs text-muted-foreground",children:[m.length," tools shown (",t.size," enabled)"]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx(jt,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:w||h.length===0,children:"Enable All"}),p.jsx(jt,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:w||h.length===0||t.size===0,children:"Disable All"})]})]}),p.jsx(sc,{className:"h-56 border rounded-md p-2 bg-background/50",children:w?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(S=>p.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[p.jsx(Fi,{id:`tool-switch-${S.name}`,checked:t.has(S.name),onCheckedChange:E=>y(S.name,E),className:"flex-shrink-0",disabled:w}),p.jsxs(Kt,{htmlFor:`tool-switch-${S.name}`,className:_t("text-sm font-normal flex-grow pl-2 space-y-0.5",w?"cursor-not-allowed":"cursor-pointer"),title:`${S.name} (from ${S.modId})`,children:[p.jsx("span",{className:"block font-medium",children:S.name}),p.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:S.description})]})]},S.name))})}),p.jsxs("div",{className:"pt-2",children:[p.jsx(Kt,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),p.jsx(Rn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:x,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:w}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let su=new Set,Hl=null,eg=()=>{};const D_e=()=>{const[e,t]=T.useState({enabledTools:su,maxStepsOverride:Hl}),[n,r]=T.useState(e.maxStepsOverride),[a,i]=T.useState(!1),[s,o]=T.useState(()=>qn.getState().status==="streaming"),[l,u]=T.useState(!0),[d,h]=T.useState(()=>mn.getState().selectedItemType),[m,y]=T.useState(()=>mn.getState().selectedItemId),v=Object.keys(Rr.getState().tools).length;T.useEffect(()=>(eg=E=>{const C=E({enabledTools:su,maxStepsOverride:Hl});su=C.enabledTools,Hl=C.maxStepsOverride,t(C)},t({enabledTools:su,maxStepsOverride:Hl}),()=>{eg=()=>{}}),[]),T.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),T.useEffect(()=>{const E=I=>{o(I.status==="streaming")},C=I=>{var $,G;if(!I.modelId){u(!1);return}const{getSelectedModel:R}=$n.getState(),j=R(),F=Object.keys(Rr.getState().tools).length>0;u(F&&(((G=($=j==null?void 0:j.metadata)==null?void 0:$.supported_parameters)==null?void 0:G.includes("tools"))??!1))},k=I=>{h(I.selectedItemType),y(I.selectedItemId)};return C({modelId:$n.getState().selectedModelId}),k({selectedItemId:mn.getState().selectedItemId,selectedItemType:mn.getState().selectedItemType}),kt.on(Et.INTERACTION_STATUS_CHANGED,E),kt.on(Et.MODEL_SELECTION_CHANGED,C),kt.on(Et.CONTEXT_CHANGED,k),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,E),kt.off(Et.MODEL_SELECTION_CHANGED,C),kt.off(Et.CONTEXT_CHANGED,k)}},[]);const b=E=>{i(E),!E&&n!==e.maxStepsOverride&&eg(C=>({...C,maxStepsOverride:n}))},x=T.useCallback(E=>{eg(C=>({...C,enabledTools:E(C.enabledTools)}))},[]),w=e.enabledTools.size>0||e.maxStepsOverride!==null,S=s||v===0||d!=="conversation";return l?p.jsxs(zu,{open:a,onOpenChange:b,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Uu,{asChild:!0,children:p.jsx(jt,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:S,"aria-label":"Configure Tools",children:p.jsx(fD,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:S?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),p.jsx(Hu,{className:"w-auto p-0",align:"start",children:p.jsx(O_e,{enabledTools:e.enabledTools,setEnabledTools:x,localMaxSteps:n,setLocalMaxSteps:r,conversationId:m,conversationType:d})})]}):null};function M_e(){const e=Rr.getState().registerPromptControl;su=new Set,Hl=null,e({id:"core-tool-selector",triggerRenderer:()=>gt.createElement(D_e),getMetadata:()=>{if(su.size>0||Hl!==null)return{enabledTools:Array.from(su),...Hl!==null&&{maxSteps:Hl}}},clearOnSubmit:()=>{su=new Set,Hl=null,eg(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}const P_e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:s})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),p.jsx($u,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:o=>t(o.target.value||null),rows:6,disabled:s,className:"mt-1"}),p.jsx(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:s||e===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{children:[p.jsx(Kt,{children:"Default Model (Overrides Parent/Global)"}),p.jsx(x1,{value:n??i,onChange:r,disabled:s}),p.jsx(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:s||n===null,children:"Use Inherited/Default"})]})]}),F_e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:m,setLocalTemp:y,localTopP:v,setLocalTopP:b,localPresence:x,setLocalPresence:w,localFrequency:S,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:k,effectiveTopP:I,effectiveTopK:R,effectivePresencePenalty:j,effectiveFrequencyPenalty:F,isSaving:$})=>{const G=T.useCallback((Z,q)=>{const ue=q.target.value,ie=ue===""?null:parseInt(ue,10);(ue===""||!isNaN(ie)&&ie!==null)&&Z(ie)},[]),D=T.useCallback((Z,q)=>{Z(q[0])},[]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),p.jsx(Ko,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:Z=>y(Z[0]),onValueCommit:Z=>D(t,Z),disabled:$}),p.jsxs(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:$||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),p.jsx(Ko,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:Z=>b(Z[0]),onValueCommit:Z=>D(i,Z),disabled:$}),p.jsxs(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:$||a===null,children:["Use Inherited/Default (",(I==null?void 0:I.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(Rn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:Z=>G(r,Z),min:"1",className:"h-8 text-xs",disabled:$}),p.jsx(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:$||n===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx(Kt,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),p.jsx(Rn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${R??"Default"}`,value:s??"",onChange:Z=>G(o,Z),min:"1",className:"h-8 text-xs",disabled:$}),p.jsx(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>o(null),disabled:$||s===null,children:"Use Inherited/Default"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",x.toFixed(2),")"]}),p.jsx(Ko,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[x],onValueChange:Z=>w(Z[0]),onValueCommit:Z=>D(u,Z),disabled:$}),p.jsxs(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>u(null),disabled:$||l===null,children:["Use Inherited/Default (",(j==null?void 0:j.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs(Kt,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),p.jsx(Ko,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:Z=>E(Z[0]),onValueCommit:Z=>D(h,Z),disabled:$}),p.jsxs(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:$||d===null,children:["Use Inherited/Default (",(F==null?void 0:F.toFixed(2))??"N/A",")"]})]})]})},L_e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var s;const i=((s=r.find(o=>o.id===n))==null?void 0:s.name)??"None";return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx(Kt,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),p.jsxs(el,{value:e??"none",onValueChange:o=>t(o==="none"?null:o),disabled:a||r.length===0,children:[p.jsx(nl,{id:"project-sync-repo",children:p.jsx(tl,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),p.jsxs(rl,{children:[p.jsx(Gr,{value:"none",children:p.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(o=>p.jsx(Gr,{value:o.id,children:o.name},o.id))]})]}),p.jsx(jt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},$_e=({projectId:e})=>{const t=T.useMemo(()=>[{value:"manage",label:"Manage Files",content:p.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?p.jsx(UA,{}):p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx(Kt,{children:"Project Filesystem Info"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),p.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",p.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),p.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[p.jsx(Kt,{className:"text-destructive",children:"Danger Zone"}),p.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return p.jsx(qu,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:_t("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},B_e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=ai(dn(Pe=>({getProjectById:Pe.getProjectById,updateProject:Pe.updateProject}))),i=ai(Pe=>Pe.getEffectiveProjectSettings),s=mn(Pe=>Pe.syncRepos),o=lr(dn(Pe=>({globalSystemPrompt:Pe.globalSystemPrompt,temperature:Pe.temperature,maxTokens:Pe.maxTokens,topP:Pe.topP,topK:Pe.topK,presencePenalty:Pe.presencePenalty,frequencyPenalty:Pe.frequencyPenalty}))),l=$n(Pe=>Pe.selectedModelId),u=lo(Pe=>Pe.setVfsKey),[d,h]=T.useState(null),[m,y]=T.useState(null),[v,b]=T.useState(null),[x,w]=T.useState(null),[S,E]=T.useState(null),[C,k]=T.useState(null),[I,R]=T.useState(null),[j,F]=T.useState(null),[$,G]=T.useState(null),[D,Z]=T.useState(.7),[q,ue]=T.useState(1),[ie,ne]=T.useState(0),[X,ae]=T.useState(0),[B,J]=T.useState(!1),[ee,te]=T.useState("prompt"),{project:fe,effectiveSettings:ve}=T.useMemo(()=>{const Pe=n?r(n):null,Qe=n?i(n):null;return{project:Pe,effectiveSettings:Qe}},[n,r,i]),De=T.useCallback(Pe=>{var Le;if(!Pe)return null;const Qe=r(Pe);return Qe?((Le=Qe.metadata)==null?void 0:Le.syncRepoId)!==void 0?Qe.metadata.syncRepoId:De(Qe.parentId):null},[r]),Ae=n?De(n):null;T.useEffect(()=>{var Pe;e&&n&&fe&&ve?(u(n),h(fe.systemPrompt??null),y(fe.modelId??null),b(fe.temperature??null),w(fe.maxTokens??null),E(fe.topP??null),k(fe.topK??null),R(fe.presencePenalty??null),F(fe.frequencyPenalty??null),G(((Pe=fe.metadata)==null?void 0:Pe.syncRepoId)??null),Z(ve.temperature??o.temperature),ue(ve.topP??o.topP??1),ne(ve.presencePenalty??o.presencePenalty??0),ae(ve.frequencyPenalty??o.frequencyPenalty??0),te("prompt")):e||(u(null),h(null),y(null),b(null),w(null),E(null),k(null),R(null),F(null),G(null))},[e,n,fe,ve,o,u]),T.useEffect(()=>Z(v??(ve==null?void 0:ve.temperature)??o.temperature),[v,ve,o.temperature]),T.useEffect(()=>ue(S??(ve==null?void 0:ve.topP)??o.topP??1),[S,ve,o.topP]),T.useEffect(()=>ne(I??(ve==null?void 0:ve.presencePenalty)??o.presencePenalty??0),[I,ve,o.presencePenalty]),T.useEffect(()=>ae(j??(ve==null?void 0:ve.frequencyPenalty)??o.frequencyPenalty??0),[j,ve,o.frequencyPenalty]);const Ne=async()=>{if(!(!n||!fe)){J(!0);try{const Pe=fe.parentId?i(fe.parentId):{systemPrompt:o.globalSystemPrompt,modelId:l,temperature:o.temperature,maxTokens:o.maxTokens,topP:o.topP,topK:o.topK,presencePenalty:o.presencePenalty,frequencyPenalty:o.frequencyPenalty},Qe=fe.parentId?De(fe.parentId):null,Le={},Ie={...fe.metadata??{}};d!==Pe.systemPrompt?Le.systemPrompt=d:Le.systemPrompt=void 0,m!==Pe.modelId?Le.modelId=m:Le.modelId=void 0,v!==Pe.temperature?Le.temperature=v:Le.temperature=void 0,x!==Pe.maxTokens?Le.maxTokens=x:Le.maxTokens=void 0,S!==Pe.topP?Le.topP=S:Le.topP=void 0,C!==Pe.topK?Le.topK=C:Le.topK=void 0,I!==Pe.presencePenalty?Le.presencePenalty=I:Le.presencePenalty=void 0,j!==Pe.frequencyPenalty?Le.frequencyPenalty=j:Le.frequencyPenalty=void 0,$!==Qe?Ie.syncRepoId=$:delete Ie.syncRepoId,Le.metadata=Ie,await a(n,Le),Ye.success(`Project "${fe.name}" settings updated.`),t()}catch(Pe){Ye.error("Failed to save project settings."),console.error("Failed to save project settings:",Pe)}finally{J(!1)}}},Ce=T.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:p.jsx(P_e,{systemPrompt:d,setSystemPrompt:h,modelId:m,setModelId:y,effectiveSystemPrompt:(ve==null?void 0:ve.systemPrompt)??o.globalSystemPrompt,effectiveModelId:(ve==null?void 0:ve.modelId)??l,isSaving:B})},{value:"params",label:"Parameters",content:p.jsx(F_e,{temperature:v,setTemperature:b,maxTokens:x,setMaxTokens:w,topP:S,setTopP:E,topK:C,setTopK:k,presencePenalty:I,setPresencePenalty:R,frequencyPenalty:j,setFrequencyPenalty:F,localTemp:D,setLocalTemp:Z,localTopP:q,setLocalTopP:ue,localPresence:ie,setLocalPresence:ne,localFrequency:X,setLocalFrequency:ae,effectiveTemperature:(ve==null?void 0:ve.temperature)??o.temperature,effectiveMaxTokens:(ve==null?void 0:ve.maxTokens)??o.maxTokens,effectiveTopP:(ve==null?void 0:ve.topP)??o.topP,effectiveTopK:(ve==null?void 0:ve.topK)??o.topK,effectivePresencePenalty:(ve==null?void 0:ve.presencePenalty)??o.presencePenalty,effectiveFrequencyPenalty:(ve==null?void 0:ve.frequencyPenalty)??o.frequencyPenalty,isSaving:B})},{value:"sync",label:"Sync",content:p.jsx(L_e,{syncRepoId:$,setSyncRepoId:G,effectiveSyncRepoId:Ae,syncRepos:s,isSaving:B})},{value:"vfs",label:"Filesystem",content:p.jsx($_e,{projectId:n,projectName:(fe==null?void 0:fe.name)??null,isSaving:B})}],[d,m,v,x,S,C,I,j,$,ve,o,l,B,D,q,ie,X,Ae,s,n,fe==null?void 0:fe.name]);return p.jsx(f1,{open:e,onOpenChange:t,children:p.jsxs(h1,{className:_t("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[p.jsxs(p1,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsxs(g1,{children:["Project Settings: ",fe==null?void 0:fe.name]}),p.jsx(y1,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),p.jsx(qu,{tabs:Ce,initialValue:ee,onValueChange:te,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsxs(m1,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[p.jsx(jt,{variant:"outline",onClick:t,disabled:B,children:"Cancel"}),p.jsxs(jt,{onClick:Ne,disabled:B,children:[B&&p.jsx(On,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function z_e(){const e=Rr.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=os.getState();return p.jsx(B_e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>gt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const U_e=()=>{const{selectedModelId:e,selectModel:t}=$n(dn(l=>({selectedModelId:l.selectedModelId,selectModel:l.selectModel}))),n=Ci(l=>l.setModelId),[r,a]=T.useState(()=>qn.getState().status==="streaming"),[i,s]=T.useState(e);T.useEffect(()=>{const l=h=>{a(h.status==="streaming")},u=h=>{s(h.modelId),n(h.modelId)},d=$n.getState().selectedModelId;return s(d),n(d),kt.on(Et.INTERACTION_STATUS_CHANGED,l),kt.on(Et.MODEL_SELECTION_CHANGED,u),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,l),kt.off(Et.MODEL_SELECTION_CHANGED,u)}},[n]);const o=l=>{t(l),n(l)};return p.jsx(x1,{value:i,onChange:o,disabled:r})};function H_e(){const e=Rr.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>$n.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(U_e),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const q_e=({initialPromptValue:e,onPromptChange:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(!1),[s,o]=T.useState(null),[l,u]=T.useState(()=>qn.getState().status==="streaming");T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const v=C=>{u(C.status==="streaming")},b=(C,k)=>{var $;const{getConversationById:I}=mn.getState(),{getEffectiveProjectSettings:R}=ai.getState(),j=lr.getState().globalSystemPrompt,F=k==="project"?C:k==="conversation"?(($=I(C))==null?void 0:$.projectId)??null:null;o(R(F).systemPrompt??j)},x=C=>{b(C.selectedItemId,C.selectedItemType)},w=C=>{var R;const k=mn.getState();(k.selectedItemType==="project"?k.selectedItemId:k.selectedItemType==="conversation"?((R=k.getConversationById(k.selectedItemId))==null?void 0:R.projectId)??null:null)===C.projectId&&b(k.selectedItemId,k.selectedItemType)},S=C=>{if(C.key==="globalSystemPrompt"){const k=mn.getState();b(k.selectedItemId,k.selectedItemType)}},E=mn.getState();return b(E.selectedItemId,E.selectedItemType),kt.on(Et.INTERACTION_STATUS_CHANGED,v),kt.on(Et.CONTEXT_CHANGED,x),kt.on(Et.PROJECT_UPDATED,w),kt.on(Et.SETTINGS_CHANGED,S),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,v),kt.off(Et.CONTEXT_CHANGED,x),kt.off(Et.PROJECT_UPDATED,w),kt.off(Et.SETTINGS_CHANGED,S)}},[]);const d=T.useCallback(()=>{t(n.trim()),i(!1)},[n,t]),h=T.useCallback(()=>{r(""),t(""),i(!1)},[t]),m=v=>{v&&r(e),i(v)},y=e.trim().length>0;return p.jsxs(zu,{open:a,onOpenChange:m,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Uu,{asChild:!0,children:p.jsx(jt,{variant:y?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:l,"aria-label":"Set System Prompt for Next Turn",children:p.jsx(LV,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:y?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),p.jsxs(Hu,{className:"w-80 p-4 space-y-3",align:"start",children:[p.jsx(Kt,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),p.jsx($u,{id:"turn-system-prompt",placeholder:`Inherited: ${(s==null?void 0:s.substring(0,50))||"Default"}${s&&s.length>50?"...":""}`,value:n,onChange:v=>r(v.target.value),rows:5,className:"text-sm"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx(jt,{variant:"outline",size:"sm",onClick:h,disabled:!n.trim(),children:"Clear Override"}),p.jsx(jt,{size:"sm",onClick:d,children:"Set for Next Turn"})]})]})]})};let Km="";function V_e(){const e=Rr.getState().registerPromptControl;Km="";const t=n=>{Km=n};e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>gt.createElement(q_e,{initialPromptValue:Km,onPromptChange:t}),getMetadata:()=>{const n=Km.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{Km=""}}),console.log("[Function] Registered Core System Prompt Control")}const G_e=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=Ci(dn(w=>({structuredOutputJson:w.structuredOutputJson,setStructuredOutputJson:w.setStructuredOutputJson}))),[n,r]=T.useState(!1),[a,i]=T.useState(e??""),[s,o]=T.useState(""),[l,u]=T.useState([]),d=T.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),Ye.success("Structured output applied for next turn.")}catch{Ye.error("Invalid JSON format.")}},[a,t]),h=T.useCallback(()=>{i(""),t(null),r(!1),Ye.info("Structured output cleared.")},[t]),m=T.useCallback(()=>{if(!s.trim()){Ye.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const w={id:Date.now().toString(),name:s.trim(),json:a};u(S=>[...S,w]),o(""),Ye.success(`"${w.name}" saved to library.`)}catch{Ye.error("Cannot save invalid JSON to library.")}},[a,s]),y=T.useCallback(w=>{i(w.json),t(w.json),r(!1),Ye.success(`Loaded "${w.name}" from library.`)},[t]),v=T.useCallback(w=>{u(S=>S.filter(E=>E.id!==w)),Ye.info("Item removed from library.")},[]);T.useEffect(()=>{n&&i(e??"")},[n,e]);const b=[{value:"entry",label:"Entry",content:p.jsxs("div",{className:"space-y-3 p-1",children:[p.jsx(Kt,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),p.jsx($u,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:w=>i(w.target.value),rows:8,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-between items-end gap-2",children:[p.jsxs("div",{className:"flex-grow space-y-1",children:[p.jsx(Kt,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),p.jsx(Rn,{id:"structured-output-name",value:s,onChange:w=>o(w.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),p.jsxs(jt,{size:"sm",variant:"outline",onClick:m,disabled:!s.trim()||!a.trim(),className:"h-8",children:[p.jsx(Wd,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsx(jt,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),p.jsx(jt,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:p.jsx("div",{className:"space-y-2 p-1",children:l.length===0?p.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(w=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[p.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:w.name}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(jt,{size:"sm",variant:"outline",onClick:()=>y(w),className:"h-7 px-2 text-xs",children:"Use"}),p.jsx(jt,{size:"icon",variant:"ghost",onClick:()=>v(w.id),className:"h-7 w-7 text-destructive",children:p.jsx(Li,{className:"h-3.5 w-3.5"})})]})]},w.id))})}],x=!!e;return p.jsxs(zu,{open:n,onOpenChange:r,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Uu,{asChild:!0,children:p.jsx(jt,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:p.jsx(rD,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:x?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),p.jsx(Hu,{className:"w-[450px] p-0",align:"start",children:p.jsx(qu,{tabs:b,defaultValue:"entry"})})]})},K_e=()=>{const[e,t]=T.useState(!0);return T.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=$n.getState(),i=a(),s=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,o=Array.isArray(s)&&s.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${o}`),t(o)};return n({modelId:$n.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${Et.MODEL_SELECTION_CHANGED}`),kt.on(Et.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),kt.off(Et.MODEL_SELECTION_CHANGED,n)}},[]),e?p.jsx(G_e,{}):null};function W_e(){const e=Rr.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>gt.createElement(K_e),getParameters:()=>{const{structuredOutputJson:t}=Ci.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{Ci.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const j7=4,B2=e=>{let t=0;return e.forEach(n=>{var r,a,i,s;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(s=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||s.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/j7)},Z_e=()=>{const[e,t]=T.useState(""),[n,r]=T.useState(0),[a,i]=T.useState([]),[s,o]=T.useState(null),[l,u]=T.useState(0);T.useEffect(()=>{const b=Jl.getState(),x=$n.getState(),w=qn.getState();if(i(b.attachedFilesMetadata),o(x.selectedModelId),w.currentConversationId){const R=w.interactions.filter(j=>j.status==="COMPLETED");r(B2(R))}else r(0);const S=R=>{t(R.value)},E=R=>{i(R.files)},C=R=>{console.log(R),o(R.modelId)},k=()=>{const R=qn.getState();if(R.currentConversationId){const j=R.interactions.filter(F=>F.status==="COMPLETED");r(B2(j))}},I=()=>{const R=qn.getState();if(R.currentConversationId){const j=R.interactions.filter(F=>F.status==="COMPLETED");r(B2(j))}else r(0)};return kt.on(Et.PROMPT_INPUT_CHANGE,S),kt.on(Et.ATTACHED_FILES_CHANGED,E),kt.on(Et.MODEL_SELECTION_CHANGED,C),kt.on(Et.INTERACTION_COMPLETED,k),kt.on(Et.CONTEXT_CHANGED,I),()=>{kt.off(Et.PROMPT_INPUT_CHANGE,S),kt.off(Et.ATTACHED_FILES_CHANGED,E),kt.off(Et.MODEL_SELECTION_CHANGED,C),kt.off(Et.INTERACTION_COMPLETED,k),kt.off(Et.CONTEXT_CHANGED,I)}},[]),T.useEffect(()=>{var j;if(!s){u(0);return}const{dbProviderConfigs:b,dbApiKeys:x}=$n.getState(),{providerId:w,modelId:S}=cc(s);if(!w||!S){u(0);return}const E=b.find(F=>F.id===w);if(!E){u(0);return}const C=x.find(F=>F.id===E.apiKeyId),k=Lk(E,S,C==null?void 0:C.value),I=k==null?void 0:k.metadata,R=((j=I==null?void 0:I.top_provider)==null?void 0:j.context_length)??(I==null?void 0:I.context_length)??0;u(R)},[s]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:m}=T.useMemo(()=>{const b=new TextEncoder().encode(e).length,x=a.reduce((C,k)=>C+k.size,0),w=Math.ceil((b+x)/j7),S=n+w,E=l?Math.min(100,Math.round(S/l*100)):0;return{estimatedInputTokens:w,totalEstimatedTokens:S,contextPercentage:E}},[e,a,n,l]),y=T.useMemo(()=>m>85?"text-red-600 dark:text-red-500":m>70?"text-orange-500 dark:text-orange-400":m>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[m]);if(!s||l===0)return null;const v=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${m}%) [History: ${n}, Input: ${d}]`;return p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:p.jsx(tD,{className:_t("h-3 w-3 fill-current",y)})})}),p.jsx(Qn,{side:"top",children:v})]})})};function Y_e(){const e=Rr.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>gt.createElement(Z_e),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const X_e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var b,x;if(!m.modelId){o(!1);return}const{getSelectedModel:y}=$n.getState(),v=y();o(((x=(b=v==null?void 0:v.metadata)==null?void 0:b.supported_parameters)==null?void 0:x.includes("reasoning"))??!1)};return h({modelId:$n.getState().selectedModelId}),kt.on(Et.INTERACTION_STATUS_CHANGED,d),kt.on(Et.MODEL_SELECTION_CHANGED,h),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,d),kt.off(Et.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:p.jsx(yk,{className:_t("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Qn,{side:"top",children:l?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function J_e(){const e=Rr.getState().registerPromptControl,t=Ci.getState(),n=r=>{t.setReasoningEnabled(r)};e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>gt.createElement(X_e,{initialEnabled:t.reasoningEnabled,onToggle:n}),getParameters:()=>{const{reasoningEnabled:r}=Ci.getState();return r===!0?{reasoning:!0}:void 0},clearOnSubmit:()=>{t.setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const Q_e=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!0);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var x;if(!m.modelId){o(!1);return}const{getSelectedModel:y}=$n.getState(),v=y(),b=((x=v==null?void 0:v.metadata)==null?void 0:x.supported_parameters)??[];o(b.includes("web_search")||b.includes("web_search_options"))};return h({modelId:$n.getState().selectedModelId}),kt.on(Et.INTERACTION_STATUS_CHANGED,d),kt.on(Et.MODEL_SELECTION_CHANGED,h),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,d),kt.off(Et.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:p.jsx(Yl,{className:_t("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Qn,{side:"top",children:l?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function eSe(){const e=Rr.getState().registerPromptControl,t=Ci.getState(),n=r=>{t.setWebSearchEnabled(r)};e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>gt.createElement(Q_e,{initialEnabled:t.webSearchEnabled,onToggle:n}),getParameters:()=>{const{webSearchEnabled:r}=Ci.getState();return r===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{t.setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const tSe=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r})=>{const{rules:a,tags:i,getRulesForTag:s}=oc(dn(S=>({rules:S.rules,tags:S.tags,getRulesForTag:S.getRulesForTag}))),[o,l]=T.useState(""),[u,d]=T.useState(""),h=T.useMemo(()=>{const S=o.toLowerCase();return S?i.filter(E=>{var C;return E.name.toLowerCase().includes(S)||((C=E.description)==null?void 0:C.toLowerCase().includes(S))}):i},[i,o]),m=T.useMemo(()=>{const S=u.toLowerCase();return S?a.filter(E=>E.name.toLowerCase().includes(S)||E.content.toLowerCase().includes(S)||E.type.toLowerCase().includes(S)):a},[a,u]),y=T.useCallback((S,E)=>{n(S,E)},[n]),v=T.useCallback((S,E)=>{r(S,E)},[r]),b=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Yl,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter tags...",value:o,onChange:S=>l(S.target.value),className:"pl-8 h-9"})]}),p.jsx(sc,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No tags defined.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(S=>{const E=s(S.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(l0,{id:`tag-activate-${S.id}`,checked:e.has(S.id),onCheckedChange:C=>y(S.id,!!C),className:"mt-0.5"}),p.jsxs(Kt,{htmlFor:`tag-activate-${S.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:S.name}),S.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:S.description}),E.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",E.map(C=>C.name).join(", ")]})]})]})},S.id)})})})]}),x=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(Yl,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(Rn,{type:"search",placeholder:"Filter rules...",value:u,onChange:S=>d(S.target.value),className:"pl-8 h-9"})]}),p.jsx(sc,{className:"h-64 border rounded-md p-2 bg-background/50",children:m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:a.length===0?"No rules defined.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(S=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(l0,{id:`rule-activate-${S.id}`,checked:t.has(S.id),onCheckedChange:E=>v(S.id,!!E),className:"mt-0.5"}),p.jsxs(Kt,{htmlFor:`rule-activate-${S.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:S.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",S.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",S.content]})]})]})},S.id))})})]}),w=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:x()}];return p.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:p.jsx(qu,{tabs:w,defaultValue:"tags"})})};let Ad=new Set,Nd=new Set,tg=()=>{};const nSe=()=>{const[e,t]=T.useState({activeTagIds:Ad,activeRuleIds:Nd}),[n,r]=T.useState(!1),[a,i]=T.useState(()=>qn.getState().status==="streaming"),s=oc(h=>h.rules.length>0||h.tags.length>0);T.useEffect(()=>(tg=h=>{const m=h({activeTagIds:Ad,activeRuleIds:Nd});Ad=m.activeTagIds,Nd=m.activeRuleIds,t(m)},t({activeTagIds:Ad,activeRuleIds:Nd}),()=>{tg=()=>{}}),[]),T.useEffect(()=>{const h=m=>{i(m.status==="streaming")};return kt.on(Et.INTERACTION_STATUS_CHANGED,h),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,h)}},[]);const o=T.useCallback((h,m)=>{tg(y=>{const v=new Set(y.activeTagIds);return m?v.add(h):v.delete(h),{...y,activeTagIds:v}})},[]),l=T.useCallback((h,m)=>{tg(y=>{const v=new Set(y.activeRuleIds);return m?v.add(h):v.delete(h),{...y,activeRuleIds:v}})},[]),u=e.activeTagIds.size>0||e.activeRuleIds.size>0,d=a||!s;return s?p.jsxs(zu,{open:n,onOpenChange:r,children:[p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(Uu,{asChild:!0,children:p.jsx(jt,{variant:u?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d,"aria-label":"Configure Rules & Tags for Next Turn",children:p.jsx(W2,{className:"h-4 w-4"})})})}),p.jsx(Qn,{side:"top",children:u?`Rules/Tags Active (${e.activeTagIds.size} tags, ${e.activeRuleIds.size} rules)`:"Activate Rules/Tags (Next Turn)"})]})}),p.jsx(Hu,{className:"w-auto p-0",align:"start",children:p.jsx(tSe,{activeTagIds:e.activeTagIds,activeRuleIds:e.activeRuleIds,onToggleTag:o,onToggleRule:l})})]}):null};function rSe(){const e=Rr.getState().registerPromptControl;Ad=new Set,Nd=new Set,e({id:"core-rules-tags",status:()=>oc.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(nSe),getMetadata:()=>{const t=Array.from(Ad),n=Array.from(Nd);if(t.length>0||n.length>0)return{activeTagIds:t,activeRuleIds:n}},clearOnSubmit:()=>{Ad=new Set,Nd=new Set,tg(()=>({activeTagIds:new Set,activeRuleIds:new Set}))},show:()=>{const t=oc.getState();return t.rules.length>0||t.tags.length>0}}),console.log("[Function] Registered Core Rules & Tags Control")}const aSe=({initialEnabled:e,onToggle:t})=>{const[n,r]=T.useState(e),[a,i]=T.useState(()=>qn.getState().status==="streaming"),[s,o]=T.useState(!1),l=lr(d=>d.autoTitleEnabled);T.useEffect(()=>{r(e)},[e]),T.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=()=>{const m=qn.getState(),y=m.currentConversationId!==null&&m.interactions.filter(v=>v.conversationId===m.currentConversationId).length===0;o(y),!y&&n&&u()};return h(),kt.on(Et.INTERACTION_STATUS_CHANGED,d),kt.on(Et.CONTEXT_CHANGED,h),kt.on(Et.INTERACTION_COMPLETED,h),()=>{kt.off(Et.INTERACTION_STATUS_CHANGED,d),kt.off(Et.CONTEXT_CHANGED,h),kt.off(Et.INTERACTION_COMPLETED,h)}},[n]);const u=()=>{const d=!n;r(d),t(d)};return!l||!s?null:p.jsx(Gn,{delayDuration:100,children:p.jsxs(Xn,{children:[p.jsx(Jn,{asChild:!0,children:p.jsx(jt,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:p.jsx(jV,{className:_t("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),p.jsx(Qn,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})})};let Wm=!1;function iSe(){const e=Rr.getState().registerPromptControl;Wm=!1;const t=n=>{Wm=n};e({id:"core-auto-title",status:()=>"ready",triggerRenderer:()=>gt.createElement(aSe,{initialEnabled:Wm,onToggle:t}),getMetadata:()=>Wm?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{Wm=!1}}),console.log("[Function] Registered Core Auto-Title Control")}const sSe=[W0e,vxe,bxe,z_e,H_e,iSe,Y_e,J_e,eSe,kxe,y_e,rSe,V_e,M_e,_xe,W_e,v_e,k_e,j_e];function oSe(){return p.jsxs(q0e,{children:[p.jsx(H0e,{}),p.jsx(U0e,{}),p.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:p.jsx("main",{className:"flex-grow overflow-hidden",children:p.jsx($0e,{controls:sSe})})})]})}dG();function lSe({children:e}){const t=lr(n=>n.theme);return T.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),p.jsx(p.Fragment,{children:e})}uH.createRoot(document.getElementById("root")).render(p.jsx(gt.StrictMode,{children:p.jsx(lSe,{children:p.jsx(oSe,{})})}));
