var U7=Object.defineProperty;var q7=(e,t,n)=>t in e?U7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var qa=(e,t,n)=>q7(e,typeof t!="symbol"?t+"":t,n);function H7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ja(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ix={exports:{}},Wp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR;function V7(){if(uR)return Wp;uR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Wp.Fragment=t,Wp.jsx=n,Wp.jsxs=n,Wp}var cR;function G7(){return cR||(cR=1,ix.exports=V7()),ix.exports}var y=G7(),ox={exports:{}};function W7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Q6={exports:{}},Jr=Q6.exports={},Cs,ks;function _2(){throw new Error("setTimeout has not been defined")}function x2(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Cs=setTimeout:Cs=_2}catch{Cs=_2}try{typeof clearTimeout=="function"?ks=clearTimeout:ks=x2}catch{ks=x2}})();function eO(e){if(Cs===setTimeout)return setTimeout(e,0);if((Cs===_2||!Cs)&&setTimeout)return Cs=setTimeout,setTimeout(e,0);try{return Cs(e,0)}catch{try{return Cs.call(null,e,0)}catch{return Cs.call(this,e,0)}}}function K7(e){if(ks===clearTimeout)return clearTimeout(e);if((ks===x2||!ks)&&clearTimeout)return ks=clearTimeout,clearTimeout(e);try{return ks(e)}catch{try{return ks.call(null,e)}catch{return ks.call(this,e)}}}var kl=[],$f=!1,td,lb=-1;function Z7(){!$f||!td||($f=!1,td.length?kl=td.concat(kl):lb=-1,kl.length&&tO())}function tO(){if(!$f){var e=eO(Z7);$f=!0;for(var t=kl.length;t;){for(td=kl,kl=[];++lb<t;)td&&td[lb].run();lb=-1,t=kl.length}td=null,$f=!1,K7(e)}}Jr.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];kl.push(new nO(e,t)),kl.length===1&&!$f&&eO(tO)};function nO(e,t){this.fun=e,this.array=t}nO.prototype.run=function(){this.fun.apply(null,this.array)};Jr.title="browser";Jr.browser=!0;Jr.env={};Jr.argv=[];Jr.version="";Jr.versions={};function $l(){}Jr.on=$l;Jr.addListener=$l;Jr.once=$l;Jr.off=$l;Jr.removeListener=$l;Jr.removeAllListeners=$l;Jr.emit=$l;Jr.prependListener=$l;Jr.prependOnceListener=$l;Jr.listeners=function(e){return[]};Jr.binding=function(e){throw new Error("process.binding is not supported")};Jr.cwd=function(){return"/"};Jr.chdir=function(e){throw new Error("process.chdir is not supported")};Jr.umask=function(){return 0};var Y7=Q6.exports;const Vr=W7(Y7);var Rn={},dR;function X7(){if(dR)return Rn;dR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,v={};function _(G,Y,J){this.props=G,this.context=Y,this.refs=v,this.updater=J||g}_.prototype.isReactComponent={},_.prototype.setState=function(G,Y){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,Y,"setState")},_.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(G,Y,J){this.props=G,this.context=Y,this.refs=v,this.updater=J||g}var E=S.prototype=new x;E.constructor=S,w(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(G,Y,J,re,we,ke){return J=ke.ref,{$$typeof:e,type:G,key:Y,ref:J!==void 0?J:null,props:ke}}function D(G,Y){return I(G.type,Y,void 0,void 0,void 0,G.props)}function B(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function W(G){var Y={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(J){return Y[J]})}var Q=/\/+/g;function M(G,Y){return typeof G=="object"&&G!==null&&G.key!=null?W(""+G.key):Y.toString(36)}function K(){}function U(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(K,K):(G.status="pending",G.then(function(Y){G.status==="pending"&&(G.status="fulfilled",G.value=Y)},function(Y){G.status==="pending"&&(G.status="rejected",G.reason=Y)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function me(G,Y,J,re,we){var ke=typeof G;(ke==="undefined"||ke==="boolean")&&(G=null);var Me=!1;if(G===null)Me=!0;else switch(ke){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(G.$$typeof){case e:case t:Me=!0;break;case f:return Me=G._init,me(Me(G._payload),Y,J,re,we)}}if(Me)return we=we(G),Me=re===""?"."+M(G,0):re,C(we)?(J="",Me!=null&&(J=Me.replace(Q,"$&/")+"/"),me(we,Y,J,"",function(Ae){return Ae})):we!=null&&(B(we)&&(we=D(we,J+(we.key==null||G&&G.key===we.key?"":(""+we.key).replace(Q,"$&/")+"/")+Me)),Y.push(we)),1;Me=0;var Pe=re===""?".":re+":";if(C(G))for(var Re=0;Re<G.length;Re++)re=G[Re],ke=Pe+M(re,Re),Me+=me(re,Y,J,ke,we);else if(Re=m(G),typeof Re=="function")for(G=Re.call(G),Re=0;!(re=G.next()).done;)re=re.value,ke=Pe+M(re,Re++),Me+=me(re,Y,J,ke,we);else if(ke==="object"){if(typeof G.then=="function")return me(U(G),Y,J,re,we);throw Y=String(G),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return Me}function se(G,Y,J){if(G==null)return G;var re=[],we=0;return me(G,re,"","",function(ke){return Y.call(J,ke,we++)}),re}function ne(G){if(G._status===-1){var Y=G._result;Y=Y(),Y.then(function(J){(G._status===0||G._status===-1)&&(G._status=1,G._result=J)},function(J){(G._status===0||G._status===-1)&&(G._status=2,G._result=J)}),G._status===-1&&(G._status=0,G._result=Y)}if(G._status===1)return G._result.default;throw G._result}var ee=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(Y))return}else if(typeof Vr=="object"&&typeof Vr.emit=="function"){Vr.emit("uncaughtException",G);return}console.error(G)};function ae(){}return Rn.Children={map:se,forEach:function(G,Y,J){se(G,function(){Y.apply(this,arguments)},J)},count:function(G){var Y=0;return se(G,function(){Y++}),Y},toArray:function(G){return se(G,function(Y){return Y})||[]},only:function(G){if(!B(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Rn.Component=_,Rn.Fragment=n,Rn.Profiler=a,Rn.PureComponent=S,Rn.StrictMode=r,Rn.Suspense=u,Rn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Rn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return A.H.useMemoCache(G)}},Rn.cache=function(G){return function(){return G.apply(null,arguments)}},Rn.cloneElement=function(G,Y,J){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var re=w({},G.props),we=G.key,ke=void 0;if(Y!=null)for(Me in Y.ref!==void 0&&(ke=void 0),Y.key!==void 0&&(we=""+Y.key),Y)!O.call(Y,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&Y.ref===void 0||(re[Me]=Y[Me]);var Me=arguments.length-2;if(Me===1)re.children=J;else if(1<Me){for(var Pe=Array(Me),Re=0;Re<Me;Re++)Pe[Re]=arguments[Re+2];re.children=Pe}return I(G.type,we,void 0,void 0,ke,re)},Rn.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:i,_context:G},G},Rn.createElement=function(G,Y,J){var re,we={},ke=null;if(Y!=null)for(re in Y.key!==void 0&&(ke=""+Y.key),Y)O.call(Y,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(we[re]=Y[re]);var Me=arguments.length-2;if(Me===1)we.children=J;else if(1<Me){for(var Pe=Array(Me),Re=0;Re<Me;Re++)Pe[Re]=arguments[Re+2];we.children=Pe}if(G&&G.defaultProps)for(re in Me=G.defaultProps,Me)we[re]===void 0&&(we[re]=Me[re]);return I(G,ke,void 0,void 0,null,we)},Rn.createRef=function(){return{current:null}},Rn.forwardRef=function(G){return{$$typeof:s,render:G}},Rn.isValidElement=B,Rn.lazy=function(G){return{$$typeof:f,_payload:{_status:-1,_result:G},_init:ne}},Rn.memo=function(G,Y){return{$$typeof:c,type:G,compare:Y===void 0?null:Y}},Rn.startTransition=function(G){var Y=A.T,J={};A.T=J;try{var re=G(),we=A.S;we!==null&&we(J,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(ae,ee)}catch(ke){ee(ke)}finally{A.T=Y}},Rn.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Rn.use=function(G){return A.H.use(G)},Rn.useActionState=function(G,Y,J){return A.H.useActionState(G,Y,J)},Rn.useCallback=function(G,Y){return A.H.useCallback(G,Y)},Rn.useContext=function(G){return A.H.useContext(G)},Rn.useDebugValue=function(){},Rn.useDeferredValue=function(G,Y){return A.H.useDeferredValue(G,Y)},Rn.useEffect=function(G,Y,J){var re=A.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(G,Y)},Rn.useId=function(){return A.H.useId()},Rn.useImperativeHandle=function(G,Y,J){return A.H.useImperativeHandle(G,Y,J)},Rn.useInsertionEffect=function(G,Y){return A.H.useInsertionEffect(G,Y)},Rn.useLayoutEffect=function(G,Y){return A.H.useLayoutEffect(G,Y)},Rn.useMemo=function(G,Y){return A.H.useMemo(G,Y)},Rn.useOptimistic=function(G,Y){return A.H.useOptimistic(G,Y)},Rn.useReducer=function(G,Y,J){return A.H.useReducer(G,Y,J)},Rn.useRef=function(G){return A.H.useRef(G)},Rn.useState=function(G){return A.H.useState(G)},Rn.useSyncExternalStore=function(G,Y,J){return A.H.useSyncExternalStore(G,Y,J)},Rn.useTransition=function(){return A.H.useTransition()},Rn.version="19.1.0",Rn}var fR;function GE(){return fR||(fR=1,ox.exports=X7()),ox.exports}var N=GE();const vt=Ja(N),rO=H7({__proto__:null,default:vt},[N]);var sx={exports:{}},Kp={},lx={exports:{}},ux={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hR;function J7(){return hR||(hR=1,function(e){function t(se,ne){var ee=se.length;se.push(ne);e:for(;0<ee;){var ae=ee-1>>>1,G=se[ae];if(0<a(G,ne))se[ae]=ne,se[ee]=G,ee=ae;else break e}}function n(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var ne=se[0],ee=se.pop();if(ee!==ne){se[0]=ee;e:for(var ae=0,G=se.length,Y=G>>>1;ae<Y;){var J=2*(ae+1)-1,re=se[J],we=J+1,ke=se[we];if(0>a(re,ee))we<G&&0>a(ke,re)?(se[ae]=ke,se[we]=ee,ae=we):(se[ae]=re,se[J]=ee,ae=J);else if(we<G&&0>a(ke,ee))se[ae]=ke,se[we]=ee,ae=we;else break e}}return ne}function a(se,ne){var ee=se.sortIndex-ne.sortIndex;return ee!==0?ee:se.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var u=[],c=[],f=1,h=null,m=3,g=!1,w=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(se){for(var ne=n(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=se)r(c),ne.sortIndex=ne.expirationTime,t(u,ne);else break;ne=n(c)}}function A(se){if(v=!1,C(se),!w)if(n(u)!==null)w=!0,O||(O=!0,M());else{var ne=n(c);ne!==null&&me(A,ne.startTime-se)}}var O=!1,I=-1,D=5,B=-1;function W(){return _?!0:!(e.unstable_now()-B<D)}function Q(){if(_=!1,O){var se=e.unstable_now();B=se;var ne=!0;try{e:{w=!1,v&&(v=!1,S(I),I=-1),g=!0;var ee=m;try{t:{for(C(se),h=n(u);h!==null&&!(h.expirationTime>se&&W());){var ae=h.callback;if(typeof ae=="function"){h.callback=null,m=h.priorityLevel;var G=ae(h.expirationTime<=se);if(se=e.unstable_now(),typeof G=="function"){h.callback=G,C(se),ne=!0;break t}h===n(u)&&r(u),C(se)}else r(u);h=n(u)}if(h!==null)ne=!0;else{var Y=n(c);Y!==null&&me(A,Y.startTime-se),ne=!1}}break e}finally{h=null,m=ee,g=!1}ne=void 0}}finally{ne?M():O=!1}}}var M;if(typeof E=="function")M=function(){E(Q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,U=K.port2;K.port1.onmessage=Q,M=function(){U.postMessage(null)}}else M=function(){x(Q,0)};function me(se,ne){I=x(function(){se(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(se){se.callback=null},e.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<se?Math.floor(1e3/se):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(se){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var ee=m;m=ne;try{return se()}finally{m=ee}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(se,ne){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ee=m;m=se;try{return ne()}finally{m=ee}},e.unstable_scheduleCallback=function(se,ne,ee){var ae=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ae+ee:ae):ee=ae,se){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ee+G,se={id:f++,callback:ne,priorityLevel:se,startTime:ee,expirationTime:G,sortIndex:-1},ee>ae?(se.sortIndex=ee,t(c,se),n(u)===null&&se===n(c)&&(v?(S(I),I=-1):v=!0,me(A,ee-ae))):(se.sortIndex=G,t(u,se),w||g||(w=!0,O||(O=!0,M()))),se},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(se){var ne=m;return function(){var ee=m;m=ne;try{return se.apply(this,arguments)}finally{m=ee}}}}(ux)),ux}var pR;function Q7(){return pR||(pR=1,lx.exports=J7()),lx.exports}var cx={exports:{}},Ha={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mR;function ez(){if(mR)return Ha;mR=1;var e=GE();function t(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(u,c,f){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:u,containerInfo:c,implementation:f}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(u,c){if(u==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Ha.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ha.createPortal=function(u,c){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(u,c,null,f)},Ha.flushSync=function(u){var c=o.T,f=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=c,r.p=f,r.d.f()}},Ha.preconnect=function(u,c){typeof u=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(u,c))},Ha.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Ha.preinit=function(u,c){if(typeof u=="string"&&c&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;f==="style"?r.d.S(u,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):f==="script"&&r.d.X(u,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Ha.preinitModule=function(u,c){if(typeof u=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var f=s(c.as,c.crossOrigin);r.d.M(u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(u)},Ha.preload=function(u,c){if(typeof u=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var f=c.as,h=s(f,c.crossOrigin);r.d.L(u,f,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Ha.preloadModule=function(u,c){if(typeof u=="string")if(c){var f=s(c.as,c.crossOrigin);r.d.m(u,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(u)},Ha.requestFormReset=function(u){r.d.r(u)},Ha.unstable_batchedUpdates=function(u,c){return u(c)},Ha.useFormState=function(u,c,f){return o.H.useFormState(u,c,f)},Ha.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ha.version="19.1.0",Ha}var gR;function aO(){if(gR)return cx.exports;gR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),cx.exports=ez(),cx.exports}var yR;function tz(){if(yR)return Kp;yR=1;var e=Q7(),t=GE(),n=aO();function r(l){var d="https://react.dev/errors/"+l;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var d=l,p=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,(d.flags&4098)!==0&&(p=d.return),l=d.return;while(l)}return d.tag===3?p:null}function o(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function s(l){if(i(l)!==l)throw Error(r(188))}function u(l){var d=l.alternate;if(!d){if(d=i(l),d===null)throw Error(r(188));return d!==l?null:l}for(var p=l,b=d;;){var T=p.return;if(T===null)break;var F=T.alternate;if(F===null){if(b=T.return,b!==null){p=b;continue}break}if(T.child===F.child){for(F=T.child;F;){if(F===p)return s(T),l;if(F===b)return s(T),d;F=F.sibling}throw Error(r(188))}if(p.return!==b.return)p=T,b=F;else{for(var oe=!1,Se=T.child;Se;){if(Se===p){oe=!0,p=T,b=F;break}if(Se===b){oe=!0,b=T,p=F;break}Se=Se.sibling}if(!oe){for(Se=F.child;Se;){if(Se===p){oe=!0,p=F,b=T;break}if(Se===b){oe=!0,b=F,p=T;break}Se=Se.sibling}if(!oe)throw Error(r(189))}}if(p.alternate!==b)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?l:d}function c(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l;for(l=l.child;l!==null;){if(d=c(l),d!==null)return d;l=l.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function M(l){return l===null||typeof l!="object"?null:(l=Q&&l[Q]||l["@@iterator"],typeof l=="function"?l:null)}var K=Symbol.for("react.client.reference");function U(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===K?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case w:return"Fragment";case _:return"Profiler";case v:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList";case B:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case g:return"Portal";case E:return(l.displayName||"Context")+".Provider";case S:return(l._context.displayName||"Context")+".Consumer";case C:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case I:return d=l.displayName||null,d!==null?d:U(l.type)||"Memo";case D:d=l._payload,l=l._init;try{return U(l(d))}catch{}}return null}var me=Array.isArray,se=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ae=[],G=-1;function Y(l){return{current:l}}function J(l){0>G||(l.current=ae[G],ae[G]=null,G--)}function re(l,d){G++,ae[G]=l.current,l.current=d}var we=Y(null),ke=Y(null),Me=Y(null),Pe=Y(null);function Re(l,d){switch(re(Me,d),re(ke,l),re(we,null),d.nodeType){case 9:case 11:l=(l=d.documentElement)&&(l=l.namespaceURI)?F3(l):0;break;default:if(l=d.tagName,d=d.namespaceURI)d=F3(d),l=L3(d,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}J(we),re(we,l)}function Ae(){J(we),J(ke),J(Me)}function He(l){l.memoizedState!==null&&re(Pe,l);var d=we.current,p=L3(d,l.type);d!==p&&(re(ke,l),re(we,p))}function st(l){ke.current===l&&(J(we),J(ke)),Pe.current===l&&(J(Pe),Up._currentValue=ee)}var Oe=Object.prototype.hasOwnProperty,Te=e.unstable_scheduleCallback,z=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,Ne=e.unstable_requestPaint,ce=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,X=e.unstable_ImmediatePriority,_e=e.unstable_UserBlockingPriority,Le=e.unstable_NormalPriority,xe=e.unstable_LowPriority,Ve=e.unstable_IdlePriority,xt=e.log,ft=e.unstable_setDisableYieldValue,Et=null,Lt=null;function Tt(l){if(typeof xt=="function"&&ft(l),Lt&&typeof Lt.setStrictMode=="function")try{Lt.setStrictMode(Et,l)}catch{}}var zt=Math.clz32?Math.clz32:H,ge=Math.log,R=Math.LN2;function H(l){return l>>>=0,l===0?32:31-(ge(l)/R|0)|0}var fe=256,Ie=4194304;function be(l){var d=l&42;if(d!==0)return d;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Ee(l,d,p){var b=l.pendingLanes;if(b===0)return 0;var T=0,F=l.suspendedLanes,oe=l.pingedLanes;l=l.warmLanes;var Se=b&134217727;return Se!==0?(b=Se&~F,b!==0?T=be(b):(oe&=Se,oe!==0?T=be(oe):p||(p=Se&~l,p!==0&&(T=be(p))))):(Se=b&~F,Se!==0?T=be(Se):oe!==0?T=be(oe):p||(p=b&~l,p!==0&&(T=be(p)))),T===0?0:d!==0&&d!==T&&(d&F)===0&&(F=T&-T,p=d&-d,F>=p||F===32&&(p&4194048)!==0)?d:T}function le(l,d){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&d)===0}function ct(l,d){switch(l){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yt(){var l=fe;return fe<<=1,(fe&4194048)===0&&(fe=256),l}function P(){var l=Ie;return Ie<<=1,(Ie&62914560)===0&&(Ie=4194304),l}function Be(l){for(var d=[],p=0;31>p;p++)d.push(l);return d}function et(l,d){l.pendingLanes|=d,d!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function pe(l,d,p,b,T,F){var oe=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var Se=l.entanglements,ze=l.expirationTimes,ut=l.hiddenUpdates;for(p=oe&~p;0<p;){var _t=31-zt(p),kt=1<<_t;Se[_t]=0,ze[_t]=-1;var pt=ut[_t];if(pt!==null)for(ut[_t]=null,_t=0;_t<pt.length;_t++){var mt=pt[_t];mt!==null&&(mt.lane&=-536870913)}p&=~kt}b!==0&&De(l,b,0),F!==0&&T===0&&l.tag!==0&&(l.suspendedLanes|=F&~(oe&~d))}function De(l,d,p){l.pendingLanes|=d,l.suspendedLanes&=~d;var b=31-zt(d);l.entangledLanes|=d,l.entanglements[b]=l.entanglements[b]|1073741824|p&4194090}function Ke(l,d){var p=l.entangledLanes|=d;for(l=l.entanglements;p;){var b=31-zt(p),T=1<<b;T&d|l[b]&d&&(l[b]|=d),p&=~T}}function Ct(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function ye(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function q(){var l=ne.p;return l!==0?l:(l=window.event,l===void 0?32:rR(l.type))}function L(l,d){var p=ne.p;try{return ne.p=l,d()}finally{ne.p=p}}var V=Math.random().toString(36).slice(2),he="__reactFiber$"+V,de="__reactProps$"+V,Fe="__reactContainer$"+V,it="__reactEvents$"+V,Dt="__reactListeners$"+V,un="__reactHandles$"+V,Bt="__reactResources$"+V,Vt="__reactMarker$"+V;function Xt(l){delete l[he],delete l[de],delete l[it],delete l[Dt],delete l[un]}function Tn(l){var d=l[he];if(d)return d;for(var p=l.parentNode;p;){if(d=p[Fe]||p[he]){if(p=d.alternate,d.child!==null||p!==null&&p.child!==null)for(l=U3(l);l!==null;){if(p=l[he])return p;l=U3(l)}return d}l=p,p=l.parentNode}return null}function $n(l){if(l=l[he]||l[Fe]){var d=l.tag;if(d===5||d===6||d===13||d===26||d===27||d===3)return l}return null}function cr(l){var d=l.tag;if(d===5||d===26||d===27||d===6)return l.stateNode;throw Error(r(33))}function dr(l){var d=l[Bt];return d||(d=l[Bt]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function Dn(l){l[Vt]=!0}var ei=new Set,os={};function ss(l,d){ls(l,d),ls(l+"Capture",d)}function ls(l,d){for(os[l]=d,l=0;l<d.length;l++)ei.add(d[l])}var $r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},Yi={};function bg(l){return Oe.call(Yi,l)?!0:Oe.call(us,l)?!1:$r.test(l)?Yi[l]=!0:(us[l]=!0,!1)}function Co(l,d,p){if(bg(d))if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(d);return;case"boolean":var b=d.toLowerCase().slice(0,5);if(b!=="data-"&&b!=="aria-"){l.removeAttribute(d);return}}l.setAttribute(d,""+p)}}function Gs(l,d,p){if(p===null)l.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(d);return}l.setAttribute(d,""+p)}}function Oi(l,d,p,b){if(b===null)l.removeAttribute(p);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(d,p,""+b)}}var _c,cs;function Ws(l){if(_c===void 0)try{throw Error()}catch(p){var d=p.stack.trim().match(/\n( *(at )?)/);_c=d&&d[1]||"",cs=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_c+l+cs}var Vl=!1;function Id(l,d){if(!l||Vl)return"";Vl=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var b={DetermineComponentFrameRoot:function(){try{if(d){var kt=function(){throw Error()};if(Object.defineProperty(kt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(kt,[])}catch(mt){var pt=mt}Reflect.construct(l,[],kt)}else{try{kt.call()}catch(mt){pt=mt}l.call(kt.prototype)}}else{try{throw Error()}catch(mt){pt=mt}(kt=l())&&typeof kt.catch=="function"&&kt.catch(function(){})}}catch(mt){if(mt&&pt&&typeof mt.stack=="string")return[mt.stack,pt.stack]}return[null,null]}};b.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(b.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(b.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=b.DetermineComponentFrameRoot(),oe=F[0],Se=F[1];if(oe&&Se){var ze=oe.split(`
`),ut=Se.split(`
`);for(T=b=0;b<ze.length&&!ze[b].includes("DetermineComponentFrameRoot");)b++;for(;T<ut.length&&!ut[T].includes("DetermineComponentFrameRoot");)T++;if(b===ze.length||T===ut.length)for(b=ze.length-1,T=ut.length-1;1<=b&&0<=T&&ze[b]!==ut[T];)T--;for(;1<=b&&0<=T;b--,T--)if(ze[b]!==ut[T]){if(b!==1||T!==1)do if(b--,T--,0>T||ze[b]!==ut[T]){var _t=`
`+ze[b].replace(" at new "," at ");return l.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",l.displayName)),_t}while(1<=b&&0<=T);break}}}finally{Vl=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?Ws(p):""}function Bn(l){switch(l.tag){case 26:case 27:case 5:return Ws(l.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 15:return Id(l.type,!1);case 11:return Id(l.type.render,!1);case 1:return Id(l.type,!0);case 31:return Ws("Activity");default:return""}}function Hh(l){try{var d="";do d+=Bn(l),l=l.return;while(l);return d}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ti(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Vh(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function wr(l){var d=Vh(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),b=""+l[d];if(!l.hasOwnProperty(d)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var T=p.get,F=p.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return T.call(this)},set:function(oe){b=""+oe,F.call(this,oe)}}),Object.defineProperty(l,d,{enumerable:p.enumerable}),{getValue:function(){return b},setValue:function(oe){b=""+oe},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function ds(l){l._valueTracker||(l._valueTracker=wr(l))}function Gl(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var p=d.getValue(),b="";return l&&(b=Vh(l)?l.checked?"true":"false":l.value),l=b,l!==p?(d.setValue(l),!0):!1}function ko(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Gh=/[\n"\\]/g;function $a(l){return l.replace(Gh,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function Wl(l,d,p,b,T,F,oe,Se){l.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?l.type=oe:l.removeAttribute("type"),d!=null?oe==="number"?(d===0&&l.value===""||l.value!=d)&&(l.value=""+ti(d)):l.value!==""+ti(d)&&(l.value=""+ti(d)):oe!=="submit"&&oe!=="reset"||l.removeAttribute("value"),d!=null?Kl(l,oe,ti(d)):p!=null?Kl(l,oe,ti(p)):b!=null&&l.removeAttribute("value"),T==null&&F!=null&&(l.defaultChecked=!!F),T!=null&&(l.checked=T&&typeof T!="function"&&typeof T!="symbol"),Se!=null&&typeof Se!="function"&&typeof Se!="symbol"&&typeof Se!="boolean"?l.name=""+ti(Se):l.removeAttribute("name")}function Wh(l,d,p,b,T,F,oe,Se){if(F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(l.type=F),d!=null||p!=null){if(!(F!=="submit"&&F!=="reset"||d!=null))return;p=p!=null?""+ti(p):"",d=d!=null?""+ti(d):p,Se||d===l.value||(l.value=d),l.defaultValue=d}b=b??T,b=typeof b!="function"&&typeof b!="symbol"&&!!b,l.checked=Se?l.checked:!!b,l.defaultChecked=!!b,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(l.name=oe)}function Kl(l,d,p){d==="number"&&ko(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Ks(l,d,p,b){if(l=l.options,d){d={};for(var T=0;T<p.length;T++)d["$"+p[T]]=!0;for(p=0;p<l.length;p++)T=d.hasOwnProperty("$"+l[p].value),l[p].selected!==T&&(l[p].selected=T),T&&b&&(l[p].defaultSelected=!0)}else{for(p=""+ti(p),d=null,T=0;T<l.length;T++){if(l[T].value===p){l[T].selected=!0,b&&(l[T].defaultSelected=!0);return}d!==null||l[T].disabled||(d=l[T])}d!==null&&(d.selected=!0)}}function Zl(l,d,p){if(d!=null&&(d=""+ti(d),d!==l.value&&(l.value=d),p==null)){l.defaultValue!==d&&(l.defaultValue=d);return}l.defaultValue=p!=null?""+ti(p):""}function Kh(l,d,p,b){if(d==null){if(b!=null){if(p!=null)throw Error(r(92));if(me(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),d=p}p=ti(d),l.defaultValue=p,b=l.textContent,b===p&&b!==""&&b!==null&&(l.value=b)}function Yl(l,d){if(d){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=d;return}}l.textContent=d}var Gn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Od(l,d,p){var b=d.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?b?l.setProperty(d,""):d==="float"?l.cssFloat="":l[d]="":b?l.setProperty(d,p):typeof p!="number"||p===0||Gn.has(d)?d==="float"?l.cssFloat=p:l[d]=(""+p).trim():l[d]=p+"px"}function vg(l,d,p){if(d!=null&&typeof d!="object")throw Error(r(62));if(l=l.style,p!=null){for(var b in p)!p.hasOwnProperty(b)||d!=null&&d.hasOwnProperty(b)||(b.indexOf("--")===0?l.setProperty(b,""):b==="float"?l.cssFloat="":l[b]="");for(var T in d)b=d[T],d.hasOwnProperty(T)&&p[T]!==b&&Od(l,T,b)}else for(var F in d)d.hasOwnProperty(F)&&Od(l,F,d[F])}function Zh(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ni=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xl=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zs(l){return Xl.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Xi=null;function Dd(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Ys=null,Nr=null;function Di(l){var d=$n(l);if(d&&(l=d.stateNode)){var p=l[de]||null;e:switch(l=d.stateNode,d.type){case"input":if(Wl(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),d=p.name,p.type==="radio"&&d!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+$a(""+d)+'"][type="radio"]'),d=0;d<p.length;d++){var b=p[d];if(b!==l&&b.form===l.form){var T=b[de]||null;if(!T)throw Error(r(90));Wl(b,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(d=0;d<p.length;d++)b=p[d],b.form===l.form&&Gl(b)}break e;case"textarea":Zl(l,p.value,p.defaultValue);break e;case"select":d=p.value,d!=null&&Ks(l,!!p.multiple,d,!1)}}}var Xs=!1;function Jl(l,d,p){if(Xs)return l(d,p);Xs=!0;try{var b=l(d);return b}finally{if(Xs=!1,(Ys!==null||Nr!==null)&&(sy(),Ys&&(d=Ys,l=Nr,Nr=Ys=null,Di(d),l)))for(d=0;d<l.length;d++)Di(l[d])}}function Js(l,d){var p=l.stateNode;if(p===null)return null;var b=p[de]||null;if(b===null)return null;p=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(l=l.type,b=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!b;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(r(231,d,typeof p));return p}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yh=!1;if(ma)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Yh=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Yh=!1}var Ji=null,jd=null,Ql=null;function eu(){if(Ql)return Ql;var l,d=jd,p=d.length,b,T="value"in Ji?Ji.value:Ji.textContent,F=T.length;for(l=0;l<p&&d[l]===T[l];l++);var oe=p-l;for(b=1;b<=oe&&d[p-b]===T[F-b];b++);return Ql=T.slice(l,1<b?1-b:void 0)}function tu(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function xc(){return!0}function wg(){return!1}function Qr(l){function d(p,b,T,F,oe){this._reactName=p,this._targetInst=T,this.type=b,this.nativeEvent=F,this.target=oe,this.currentTarget=null;for(var Se in l)l.hasOwnProperty(Se)&&(p=l[Se],this[Se]=p?p(F):F[Se]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?xc:wg,this.isPropagationStopped=wg,this}return f(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),d}var Qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Md=Qr(Qs),fs=f({},Qs,{view:0,detail:0}),Pd=Qr(fs),Sc,Xh,Ec,Fd=f({},fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:el,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Ec&&(Ec&&l.type==="mousemove"?(Sc=l.screenX-Ec.screenX,Xh=l.screenY-Ec.screenY):Xh=Sc=0,Ec=l),Sc)},movementY:function(l){return"movementY"in l?l.movementY:Xh}}),Ld=Qr(Fd),Jh=f({},Fd,{dataTransfer:0}),_g=Qr(Jh),$d=f({},fs,{relatedTarget:0}),nu=Qr($d),Bd=f({},Qs,{animationName:0,elapsedTime:0,pseudoElement:0}),xg=Qr(Bd),v1=f({},Qs,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),zd=Qr(v1),Qh=f({},Qs,{data:0}),Ud=Qr(Qh),ep={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ga={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cc(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=ga[l])?!!d[l]:!1}function el(){return Cc}var Sg=f({},fs,{key:function(l){if(l.key){var d=ep[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=tu(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?tp[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:el,charCode:function(l){return l.type==="keypress"?tu(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?tu(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),qd=Qr(Sg),Eg=f({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),np=Qr(Eg),Hd=f({},fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:el}),rp=Qr(Hd),tl=f({},Qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ap=Qr(tl),ip=f({},Fd,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Vd=Qr(ip),op=f({},Qs,{newState:0,oldState:0}),Cg=Qr(op),w1=[9,13,27,32],kc=ma&&"CompositionEvent"in window,hs=null;ma&&"documentMode"in document&&(hs=document.documentMode);var _1=ma&&"TextEvent"in window&&!hs,Gd=ma&&(!kc||hs&&8<hs&&11>=hs),Wd=" ",kg=!1;function sp(l,d){switch(l){case"keyup":return w1.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ag(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var nl=!1;function Tg(l,d){switch(l){case"compositionend":return Ag(d);case"keypress":return d.which!==32?null:(kg=!0,Wd);case"textInput":return l=d.data,l===Wd&&kg?null:l;default:return null}}function x1(l,d){if(nl)return l==="compositionend"||!kc&&sp(l,d)?(l=eu(),Ql=jd=Ji=null,nl=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Gd&&d.locale!=="ko"?null:d.data;default:return null}}var Rg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!Rg[l.type]:d==="textarea"}function lp(l,d,p,b){Ys?Nr?Nr.push(b):Nr=[b]:Ys=b,d=hy(d,"onChange"),0<d.length&&(p=new Md("onChange","change",null,p,b),l.push({event:p,listeners:d}))}var ru=null,Ac=null;function S1(l){O3(l,0)}function Zd(l){var d=cr(l);if(Gl(d))return l}function Tc(l,d){if(l==="change")return d}var Qi=!1;if(ma){var Ir;if(ma){var au="oninput"in document;if(!au){var ri=document.createElement("div");ri.setAttribute("oninput","return;"),au=typeof ri.oninput=="function"}Ir=au}else Ir=!1;Qi=Ir&&(!document.documentMode||9<document.documentMode)}function Ng(){ru&&(ru.detachEvent("onpropertychange",Yd),Ac=ru=null)}function Yd(l){if(l.propertyName==="value"&&Zd(Ac)){var d=[];lp(d,Ac,l,Dd(l)),Jl(S1,d)}}function Ig(l,d,p){l==="focusin"?(Ng(),ru=d,Ac=p,ru.attachEvent("onpropertychange",Yd)):l==="focusout"&&Ng()}function rl(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Zd(Ac)}function up(l,d){if(l==="click")return Zd(d)}function iu(l,d){if(l==="input"||l==="change")return Zd(d)}function ps(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var za=typeof Object.is=="function"?Object.is:ps;function k(l,d){if(za(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var p=Object.keys(l),b=Object.keys(d);if(p.length!==b.length)return!1;for(b=0;b<p.length;b++){var T=p[b];if(!Oe.call(d,T)||!za(l[T],d[T]))return!1}return!0}function j(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Z(l,d){var p=j(l);l=0;for(var b;p;){if(p.nodeType===3){if(b=l+p.textContent.length,l<=d&&b>=d)return{node:p,offset:d-l};l=b}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=j(p)}}function te(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?te(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function ue(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var d=ko(l.document);d instanceof l.HTMLIFrameElement;){try{var p=typeof d.contentWindow.location.href=="string"}catch{p=!1}if(p)l=d.contentWindow;else break;d=ko(l.document)}return d}function ve(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}var je=ma&&"documentMode"in document&&11>=document.documentMode,$e=null,We=null,Ye=null,tt=!1;function qe(l,d,p){var b=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;tt||$e==null||$e!==ko(b)||(b=$e,"selectionStart"in b&&ve(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Ye&&k(Ye,b)||(Ye=b,b=hy(We,"onSelect"),0<b.length&&(d=new Md("onSelect","select",null,d,p),l.push({event:d,listeners:b}),d.target=$e)))}function rt(l,d){var p={};return p[l.toLowerCase()]=d.toLowerCase(),p["Webkit"+l]="webkit"+d,p["Moz"+l]="moz"+d,p}var Ge={animationend:rt("Animation","AnimationEnd"),animationiteration:rt("Animation","AnimationIteration"),animationstart:rt("Animation","AnimationStart"),transitionrun:rt("Transition","TransitionRun"),transitionstart:rt("Transition","TransitionStart"),transitioncancel:rt("Transition","TransitionCancel"),transitionend:rt("Transition","TransitionEnd")},Qe={},at={};ma&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Xe(l){if(Qe[l])return Qe[l];if(!Ge[l])return l;var d=Ge[l],p;for(p in d)if(d.hasOwnProperty(p)&&p in at)return Qe[l]=d[p];return l}var dt=Xe("animationend"),gt=Xe("animationiteration"),bt=Xe("animationstart"),wt=Xe("transitionrun"),jt=Xe("transitionstart"),Ut=Xe("transitioncancel"),Nt=Xe("transitionend"),$t=new Map,qt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qt.push("scrollEnd");function It(l,d){$t.set(l,d),ss(d,[l])}var Zt=new WeakMap;function cn(l,d){if(typeof l=="object"&&l!==null){var p=Zt.get(l);return p!==void 0?p:(d={value:l,source:d,stack:Hh(d)},Zt.set(l,d),d)}return{value:l,source:d,stack:Hh(d)}}var dn=[],Sn=0,Ia=0;function yn(){for(var l=Sn,d=Ia=Sn=0;d<l;){var p=dn[d];dn[d++]=null;var b=dn[d];dn[d++]=null;var T=dn[d];dn[d++]=null;var F=dn[d];if(dn[d++]=null,b!==null&&T!==null){var oe=b.pending;oe===null?T.next=T:(T.next=oe.next,oe.next=T),b.pending=T}F!==0&&ya(p,T,F)}}function Kr(l,d,p,b){dn[Sn++]=l,dn[Sn++]=d,dn[Sn++]=p,dn[Sn++]=b,Ia|=b,l.lanes|=b,l=l.alternate,l!==null&&(l.lanes|=b)}function ea(l,d,p,b){return Kr(l,d,p,b),eo(l)}function Ao(l,d){return Kr(l,null,null,d),eo(l)}function ya(l,d,p){l.lanes|=p;var b=l.alternate;b!==null&&(b.lanes|=p);for(var T=!1,F=l.return;F!==null;)F.childLanes|=p,b=F.alternate,b!==null&&(b.childLanes|=p),F.tag===22&&(l=F.stateNode,l===null||l._visibility&1||(T=!0)),l=F,F=F.return;return l.tag===3?(F=l.stateNode,T&&d!==null&&(T=31-zt(p),l=F.hiddenUpdates,b=l[T],b===null?l[T]=[d]:b.push(d),d.lane=p|536870912),F):null}function eo(l){if(50<jp)throw jp=0,R_=null,Error(r(185));for(var d=l.return;d!==null;)l=d,d=l.return;return l.tag===3?l.stateNode:null}var ms={};function AB(l,d,p,b){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ji(l,d,p,b){return new AB(l,d,p,b)}function E1(l){return l=l.prototype,!(!l||!l.isReactComponent)}function al(l,d){var p=l.alternate;return p===null?(p=ji(l.tag,d,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=d,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,d=l.dependencies,p.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function yA(l,d){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=d,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,d=p.dependencies,l.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),l}function Og(l,d,p,b,T,F){var oe=0;if(b=l,typeof l=="function")E1(l)&&(oe=1);else if(typeof l=="string")oe=R7(l,p,we.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case B:return l=ji(31,p,d,T),l.elementType=B,l.lanes=F,l;case w:return Rc(p.children,T,F,d);case v:oe=8,T|=24;break;case _:return l=ji(12,p,d,T|2),l.elementType=_,l.lanes=F,l;case A:return l=ji(13,p,d,T),l.elementType=A,l.lanes=F,l;case O:return l=ji(19,p,d,T),l.elementType=O,l.lanes=F,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case x:case E:oe=10;break e;case S:oe=9;break e;case C:oe=11;break e;case I:oe=14;break e;case D:oe=16,b=null;break e}oe=29,p=Error(r(130,l===null?"null":typeof l,"")),b=null}return d=ji(oe,p,d,T),d.elementType=l,d.type=b,d.lanes=F,d}function Rc(l,d,p,b){return l=ji(7,l,b,d),l.lanes=p,l}function C1(l,d,p){return l=ji(6,l,null,d),l.lanes=p,l}function k1(l,d,p){return d=ji(4,l.children!==null?l.children:[],l.key,d),d.lanes=p,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}var Xd=[],Jd=0,Dg=null,jg=0,to=[],no=0,Nc=null,il=1,ol="";function Ic(l,d){Xd[Jd++]=jg,Xd[Jd++]=Dg,Dg=l,jg=d}function bA(l,d,p){to[no++]=il,to[no++]=ol,to[no++]=Nc,Nc=l;var b=il;l=ol;var T=32-zt(b)-1;b&=~(1<<T),p+=1;var F=32-zt(d)+T;if(30<F){var oe=T-T%5;F=(b&(1<<oe)-1).toString(32),b>>=oe,T-=oe,il=1<<32-zt(d)+T|p<<T|b,ol=F+l}else il=1<<F|p<<T|b,ol=l}function A1(l){l.return!==null&&(Ic(l,1),bA(l,1,0))}function T1(l){for(;l===Dg;)Dg=Xd[--Jd],Xd[Jd]=null,jg=Xd[--Jd],Xd[Jd]=null;for(;l===Nc;)Nc=to[--no],to[no]=null,ol=to[--no],to[no]=null,il=to[--no],to[no]=null}var ai=null,qr=null,Jn=!1,Oc=null,gs=!1,R1=Error(r(519));function Dc(l){var d=Error(r(418,""));throw fp(cn(d,l)),R1}function vA(l){var d=l.stateNode,p=l.type,b=l.memoizedProps;switch(d[he]=l,d[de]=b,p){case"dialog":Un("cancel",d),Un("close",d);break;case"iframe":case"object":case"embed":Un("load",d);break;case"video":case"audio":for(p=0;p<Pp.length;p++)Un(Pp[p],d);break;case"source":Un("error",d);break;case"img":case"image":case"link":Un("error",d),Un("load",d);break;case"details":Un("toggle",d);break;case"input":Un("invalid",d),Wh(d,b.value,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name,!0),ds(d);break;case"select":Un("invalid",d);break;case"textarea":Un("invalid",d),Kh(d,b.value,b.defaultValue,b.children),ds(d)}p=b.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||d.textContent===""+p||b.suppressHydrationWarning===!0||P3(d.textContent,p)?(b.popover!=null&&(Un("beforetoggle",d),Un("toggle",d)),b.onScroll!=null&&Un("scroll",d),b.onScrollEnd!=null&&Un("scrollend",d),b.onClick!=null&&(d.onclick=py),d=!0):d=!1,d||Dc(l)}function wA(l){for(ai=l.return;ai;)switch(ai.tag){case 5:case 13:gs=!1;return;case 27:case 3:gs=!0;return;default:ai=ai.return}}function cp(l){if(l!==ai)return!1;if(!Jn)return wA(l),Jn=!0,!1;var d=l.tag,p;if((p=d!==3&&d!==27)&&((p=d===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||V_(l.type,l.memoizedProps)),p=!p),p&&qr&&Dc(l),wA(l),d===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(d===0){qr=Ro(l.nextSibling);break e}d--}else p!=="$"&&p!=="$!"&&p!=="$?"||d++;l=l.nextSibling}qr=null}}else d===27?(d=qr,_u(l.type)?(l=Z_,Z_=null,qr=l):qr=d):qr=ai?Ro(l.stateNode.nextSibling):null;return!0}function dp(){qr=ai=null,Jn=!1}function _A(){var l=Oc;return l!==null&&(yi===null?yi=l:yi.push.apply(yi,l),Oc=null),l}function fp(l){Oc===null?Oc=[l]:Oc.push(l)}var N1=Y(null),jc=null,sl=null;function ou(l,d,p){re(N1,d._currentValue),d._currentValue=p}function ll(l){l._currentValue=N1.current,J(N1)}function I1(l,d,p){for(;l!==null;){var b=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),l===p)break;l=l.return}}function O1(l,d,p,b){var T=l.child;for(T!==null&&(T.return=l);T!==null;){var F=T.dependencies;if(F!==null){var oe=T.child;F=F.firstContext;e:for(;F!==null;){var Se=F;F=T;for(var ze=0;ze<d.length;ze++)if(Se.context===d[ze]){F.lanes|=p,Se=F.alternate,Se!==null&&(Se.lanes|=p),I1(F.return,p,l),b||(oe=null);break e}F=Se.next}}else if(T.tag===18){if(oe=T.return,oe===null)throw Error(r(341));oe.lanes|=p,F=oe.alternate,F!==null&&(F.lanes|=p),I1(oe,p,l),oe=null}else oe=T.child;if(oe!==null)oe.return=T;else for(oe=T;oe!==null;){if(oe===l){oe=null;break}if(T=oe.sibling,T!==null){T.return=oe.return,oe=T;break}oe=oe.return}T=oe}}function hp(l,d,p,b){l=null;for(var T=d,F=!1;T!==null;){if(!F){if((T.flags&524288)!==0)F=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var oe=T.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var Se=T.type;za(T.pendingProps.value,oe.value)||(l!==null?l.push(Se):l=[Se])}}else if(T===Pe.current){if(oe=T.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(l!==null?l.push(Up):l=[Up])}T=T.return}l!==null&&O1(d,l,p,b),d.flags|=262144}function Mg(l){for(l=l.firstContext;l!==null;){if(!za(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Mc(l){jc=l,sl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Ua(l){return xA(jc,l)}function Pg(l,d){return jc===null&&Mc(l),xA(l,d)}function xA(l,d){var p=d._currentValue;if(d={context:d,memoizedValue:p,next:null},sl===null){if(l===null)throw Error(r(308));sl=d,l.dependencies={lanes:0,firstContext:d},l.flags|=524288}else sl=sl.next=d;return p}var TB=typeof AbortController<"u"?AbortController:function(){var l=[],d=this.signal={aborted:!1,addEventListener:function(p,b){l.push(b)}};this.abort=function(){d.aborted=!0,l.forEach(function(p){return p()})}},RB=e.unstable_scheduleCallback,NB=e.unstable_NormalPriority,sa={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function D1(){return{controller:new TB,data:new Map,refCount:0}}function pp(l){l.refCount--,l.refCount===0&&RB(NB,function(){l.controller.abort()})}var mp=null,j1=0,Qd=0,ef=null;function IB(l,d){if(mp===null){var p=mp=[];j1=0,Qd=P_(),ef={status:"pending",value:void 0,then:function(b){p.push(b)}}}return j1++,d.then(SA,SA),d}function SA(){if(--j1===0&&mp!==null){ef!==null&&(ef.status="fulfilled");var l=mp;mp=null,Qd=0,ef=null;for(var d=0;d<l.length;d++)(0,l[d])()}}function OB(l,d){var p=[],b={status:"pending",value:null,reason:null,then:function(T){p.push(T)}};return l.then(function(){b.status="fulfilled",b.value=d;for(var T=0;T<p.length;T++)(0,p[T])(d)},function(T){for(b.status="rejected",b.reason=T,T=0;T<p.length;T++)(0,p[T])(void 0)}),b}var EA=se.S;se.S=function(l,d){typeof d=="object"&&d!==null&&typeof d.then=="function"&&IB(l,d),EA!==null&&EA(l,d)};var Pc=Y(null);function M1(){var l=Pc.current;return l!==null?l:Cr.pooledCache}function Fg(l,d){d===null?re(Pc,Pc.current):re(Pc,d.pool)}function CA(){var l=M1();return l===null?null:{parent:sa._currentValue,pool:l}}var gp=Error(r(460)),kA=Error(r(474)),Lg=Error(r(542)),P1={then:function(){}};function AA(l){return l=l.status,l==="fulfilled"||l==="rejected"}function $g(){}function TA(l,d,p){switch(p=l[p],p===void 0?l.push(d):p!==d&&(d.then($g,$g),d=p),d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,NA(l),l;default:if(typeof d.status=="string")d.then($g,$g);else{if(l=Cr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=d,l.status="pending",l.then(function(b){if(d.status==="pending"){var T=d;T.status="fulfilled",T.value=b}},function(b){if(d.status==="pending"){var T=d;T.status="rejected",T.reason=b}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw l=d.reason,NA(l),l}throw yp=d,gp}}var yp=null;function RA(){if(yp===null)throw Error(r(459));var l=yp;return yp=null,l}function NA(l){if(l===gp||l===Lg)throw Error(r(483))}var su=!1;function F1(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function L1(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function lu(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function uu(l,d,p){var b=l.updateQueue;if(b===null)return null;if(b=b.shared,(ir&2)!==0){var T=b.pending;return T===null?d.next=d:(d.next=T.next,T.next=d),b.pending=d,d=eo(l),ya(l,null,p),d}return Kr(l,b,d,p),eo(l)}function bp(l,d,p){if(d=d.updateQueue,d!==null&&(d=d.shared,(p&4194048)!==0)){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Ke(l,p)}}function $1(l,d){var p=l.updateQueue,b=l.alternate;if(b!==null&&(b=b.updateQueue,p===b)){var T=null,F=null;if(p=p.firstBaseUpdate,p!==null){do{var oe={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};F===null?T=F=oe:F=F.next=oe,p=p.next}while(p!==null);F===null?T=F=d:F=F.next=d}else T=F=d;p={baseState:b.baseState,firstBaseUpdate:T,lastBaseUpdate:F,shared:b.shared,callbacks:b.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=d}var B1=!1;function vp(){if(B1){var l=ef;if(l!==null)throw l}}function wp(l,d,p,b){B1=!1;var T=l.updateQueue;su=!1;var F=T.firstBaseUpdate,oe=T.lastBaseUpdate,Se=T.shared.pending;if(Se!==null){T.shared.pending=null;var ze=Se,ut=ze.next;ze.next=null,oe===null?F=ut:oe.next=ut,oe=ze;var _t=l.alternate;_t!==null&&(_t=_t.updateQueue,Se=_t.lastBaseUpdate,Se!==oe&&(Se===null?_t.firstBaseUpdate=ut:Se.next=ut,_t.lastBaseUpdate=ze))}if(F!==null){var kt=T.baseState;oe=0,_t=ut=ze=null,Se=F;do{var pt=Se.lane&-536870913,mt=pt!==Se.lane;if(mt?(Wn&pt)===pt:(b&pt)===pt){pt!==0&&pt===Qd&&(B1=!0),_t!==null&&(_t=_t.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var bn=l,fn=Se;pt=d;var pr=p;switch(fn.tag){case 1:if(bn=fn.payload,typeof bn=="function"){kt=bn.call(pr,kt,pt);break e}kt=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=fn.payload,pt=typeof bn=="function"?bn.call(pr,kt,pt):bn,pt==null)break e;kt=f({},kt,pt);break e;case 2:su=!0}}pt=Se.callback,pt!==null&&(l.flags|=64,mt&&(l.flags|=8192),mt=T.callbacks,mt===null?T.callbacks=[pt]:mt.push(pt))}else mt={lane:pt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},_t===null?(ut=_t=mt,ze=kt):_t=_t.next=mt,oe|=pt;if(Se=Se.next,Se===null){if(Se=T.shared.pending,Se===null)break;mt=Se,Se=mt.next,mt.next=null,T.lastBaseUpdate=mt,T.shared.pending=null}}while(!0);_t===null&&(ze=kt),T.baseState=ze,T.firstBaseUpdate=ut,T.lastBaseUpdate=_t,F===null&&(T.shared.lanes=0),yu|=oe,l.lanes=oe,l.memoizedState=kt}}function IA(l,d){if(typeof l!="function")throw Error(r(191,l));l.call(d)}function OA(l,d){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)IA(p[l],d)}var tf=Y(null),Bg=Y(0);function DA(l,d){l=ml,re(Bg,l),re(tf,d),ml=l|d.baseLanes}function z1(){re(Bg,ml),re(tf,tf.current)}function U1(){ml=Bg.current,J(tf),J(Bg)}var cu=0,Pn=null,fr=null,ta=null,zg=!1,nf=!1,Fc=!1,Ug=0,_p=0,rf=null,DB=0;function Zr(){throw Error(r(321))}function q1(l,d){if(d===null)return!1;for(var p=0;p<d.length&&p<l.length;p++)if(!za(l[p],d[p]))return!1;return!0}function H1(l,d,p,b,T,F){return cu=F,Pn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,se.H=l===null||l.memoizedState===null?gT:yT,Fc=!1,F=p(b,T),Fc=!1,nf&&(F=MA(d,p,b,T)),jA(l),F}function jA(l){se.H=Kg;var d=fr!==null&&fr.next!==null;if(cu=0,ta=fr=Pn=null,zg=!1,_p=0,rf=null,d)throw Error(r(300));l===null||ba||(l=l.dependencies,l!==null&&Mg(l)&&(ba=!0))}function MA(l,d,p,b){Pn=l;var T=0;do{if(nf&&(rf=null),_p=0,nf=!1,25<=T)throw Error(r(301));if(T+=1,ta=fr=null,l.updateQueue!=null){var F=l.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}se.H=BB,F=d(p,b)}while(nf);return F}function jB(){var l=se.H,d=l.useState()[0];return d=typeof d.then=="function"?xp(d):d,l=l.useState()[0],(fr!==null?fr.memoizedState:null)!==l&&(Pn.flags|=1024),d}function V1(){var l=Ug!==0;return Ug=0,l}function G1(l,d,p){d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~p}function W1(l){if(zg){for(l=l.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}zg=!1}cu=0,ta=fr=Pn=null,nf=!1,_p=Ug=0,rf=null}function mi(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ta===null?Pn.memoizedState=ta=l:ta=ta.next=l,ta}function na(){if(fr===null){var l=Pn.alternate;l=l!==null?l.memoizedState:null}else l=fr.next;var d=ta===null?Pn.memoizedState:ta.next;if(d!==null)ta=d,fr=l;else{if(l===null)throw Pn.alternate===null?Error(r(467)):Error(r(310));fr=l,l={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},ta===null?Pn.memoizedState=ta=l:ta=ta.next=l}return ta}function K1(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xp(l){var d=_p;return _p+=1,rf===null&&(rf=[]),l=TA(rf,l,d),d=Pn,(ta===null?d.memoizedState:ta.next)===null&&(d=d.alternate,se.H=d===null||d.memoizedState===null?gT:yT),l}function qg(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return xp(l);if(l.$$typeof===E)return Ua(l)}throw Error(r(438,String(l)))}function Z1(l){var d=null,p=Pn.updateQueue;if(p!==null&&(d=p.memoCache),d==null){var b=Pn.alternate;b!==null&&(b=b.updateQueue,b!==null&&(b=b.memoCache,b!=null&&(d={data:b.data.map(function(T){return T.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),p===null&&(p=K1(),Pn.updateQueue=p),p.memoCache=d,p=d.data[d.index],p===void 0)for(p=d.data[d.index]=Array(l),b=0;b<l;b++)p[b]=W;return d.index++,p}function ul(l,d){return typeof d=="function"?d(l):d}function Hg(l){var d=na();return Y1(d,fr,l)}function Y1(l,d,p){var b=l.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=p;var T=l.baseQueue,F=b.pending;if(F!==null){if(T!==null){var oe=T.next;T.next=F.next,F.next=oe}d.baseQueue=T=F,b.pending=null}if(F=l.baseState,T===null)l.memoizedState=F;else{d=T.next;var Se=oe=null,ze=null,ut=d,_t=!1;do{var kt=ut.lane&-536870913;if(kt!==ut.lane?(Wn&kt)===kt:(cu&kt)===kt){var pt=ut.revertLane;if(pt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null}),kt===Qd&&(_t=!0);else if((cu&pt)===pt){ut=ut.next,pt===Qd&&(_t=!0);continue}else kt={lane:0,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},ze===null?(Se=ze=kt,oe=F):ze=ze.next=kt,Pn.lanes|=pt,yu|=pt;kt=ut.action,Fc&&p(F,kt),F=ut.hasEagerState?ut.eagerState:p(F,kt)}else pt={lane:kt,revertLane:ut.revertLane,action:ut.action,hasEagerState:ut.hasEagerState,eagerState:ut.eagerState,next:null},ze===null?(Se=ze=pt,oe=F):ze=ze.next=pt,Pn.lanes|=kt,yu|=kt;ut=ut.next}while(ut!==null&&ut!==d);if(ze===null?oe=F:ze.next=Se,!za(F,l.memoizedState)&&(ba=!0,_t&&(p=ef,p!==null)))throw p;l.memoizedState=F,l.baseState=oe,l.baseQueue=ze,b.lastRenderedState=F}return T===null&&(b.lanes=0),[l.memoizedState,b.dispatch]}function X1(l){var d=na(),p=d.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=l;var b=p.dispatch,T=p.pending,F=d.memoizedState;if(T!==null){p.pending=null;var oe=T=T.next;do F=l(F,oe.action),oe=oe.next;while(oe!==T);za(F,d.memoizedState)||(ba=!0),d.memoizedState=F,d.baseQueue===null&&(d.baseState=F),p.lastRenderedState=F}return[F,b]}function PA(l,d,p){var b=Pn,T=na(),F=Jn;if(F){if(p===void 0)throw Error(r(407));p=p()}else p=d();var oe=!za((fr||T).memoizedState,p);oe&&(T.memoizedState=p,ba=!0),T=T.queue;var Se=$A.bind(null,b,T,l);if(Sp(2048,8,Se,[l]),T.getSnapshot!==d||oe||ta!==null&&ta.memoizedState.tag&1){if(b.flags|=2048,af(9,Vg(),LA.bind(null,b,T,p,d),null),Cr===null)throw Error(r(349));F||(cu&124)!==0||FA(b,d,p)}return p}function FA(l,d,p){l.flags|=16384,l={getSnapshot:d,value:p},d=Pn.updateQueue,d===null?(d=K1(),Pn.updateQueue=d,d.stores=[l]):(p=d.stores,p===null?d.stores=[l]:p.push(l))}function LA(l,d,p,b){d.value=p,d.getSnapshot=b,BA(d)&&zA(l)}function $A(l,d,p){return p(function(){BA(d)&&zA(l)})}function BA(l){var d=l.getSnapshot;l=l.value;try{var p=d();return!za(l,p)}catch{return!0}}function zA(l){var d=Ao(l,2);d!==null&&$i(d,l,2)}function J1(l){var d=mi();if(typeof l=="function"){var p=l;if(l=p(),Fc){Tt(!0);try{p()}finally{Tt(!1)}}}return d.memoizedState=d.baseState=l,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:l},d}function UA(l,d,p,b){return l.baseState=p,Y1(l,fr,typeof b=="function"?b:ul)}function MB(l,d,p,b,T){if(Wg(l))throw Error(r(485));if(l=d.action,l!==null){var F={payload:T,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){F.listeners.push(oe)}};se.T!==null?p(!0):F.isTransition=!1,b(F),p=d.pending,p===null?(F.next=d.pending=F,qA(d,F)):(F.next=p.next,d.pending=p.next=F)}}function qA(l,d){var p=d.action,b=d.payload,T=l.state;if(d.isTransition){var F=se.T,oe={};se.T=oe;try{var Se=p(T,b),ze=se.S;ze!==null&&ze(oe,Se),HA(l,d,Se)}catch(ut){Q1(l,d,ut)}finally{se.T=F}}else try{F=p(T,b),HA(l,d,F)}catch(ut){Q1(l,d,ut)}}function HA(l,d,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(b){VA(l,d,b)},function(b){return Q1(l,d,b)}):VA(l,d,p)}function VA(l,d,p){d.status="fulfilled",d.value=p,GA(d),l.state=p,d=l.pending,d!==null&&(p=d.next,p===d?l.pending=null:(p=p.next,d.next=p,qA(l,p)))}function Q1(l,d,p){var b=l.pending;if(l.pending=null,b!==null){b=b.next;do d.status="rejected",d.reason=p,GA(d),d=d.next;while(d!==b)}l.action=null}function GA(l){l=l.listeners;for(var d=0;d<l.length;d++)(0,l[d])()}function WA(l,d){return d}function KA(l,d){if(Jn){var p=Cr.formState;if(p!==null){e:{var b=Pn;if(Jn){if(qr){t:{for(var T=qr,F=gs;T.nodeType!==8;){if(!F){T=null;break t}if(T=Ro(T.nextSibling),T===null){T=null;break t}}F=T.data,T=F==="F!"||F==="F"?T:null}if(T){qr=Ro(T.nextSibling),b=T.data==="F!";break e}}Dc(b)}b=!1}b&&(d=p[0])}}return p=mi(),p.memoizedState=p.baseState=d,b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WA,lastRenderedState:d},p.queue=b,p=hT.bind(null,Pn,b),b.dispatch=p,b=J1(!1),F=a_.bind(null,Pn,!1,b.queue),b=mi(),T={state:d,dispatch:null,action:l,pending:null},b.queue=T,p=MB.bind(null,Pn,T,F,p),T.dispatch=p,b.memoizedState=l,[d,p,!1]}function ZA(l){var d=na();return YA(d,fr,l)}function YA(l,d,p){if(d=Y1(l,d,WA)[0],l=Hg(ul)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var b=xp(d)}catch(oe){throw oe===gp?Lg:oe}else b=d;d=na();var T=d.queue,F=T.dispatch;return p!==d.memoizedState&&(Pn.flags|=2048,af(9,Vg(),PB.bind(null,T,p),null)),[b,F,l]}function PB(l,d){l.action=d}function XA(l){var d=na(),p=fr;if(p!==null)return YA(d,p,l);na(),d=d.memoizedState,p=na();var b=p.queue.dispatch;return p.memoizedState=l,[d,b,!1]}function af(l,d,p,b){return l={tag:l,create:p,deps:b,inst:d,next:null},d=Pn.updateQueue,d===null&&(d=K1(),Pn.updateQueue=d),p=d.lastEffect,p===null?d.lastEffect=l.next=l:(b=p.next,p.next=l,l.next=b,d.lastEffect=l),l}function Vg(){return{destroy:void 0,resource:void 0}}function JA(){return na().memoizedState}function Gg(l,d,p,b){var T=mi();b=b===void 0?null:b,Pn.flags|=l,T.memoizedState=af(1|d,Vg(),p,b)}function Sp(l,d,p,b){var T=na();b=b===void 0?null:b;var F=T.memoizedState.inst;fr!==null&&b!==null&&q1(b,fr.memoizedState.deps)?T.memoizedState=af(d,F,p,b):(Pn.flags|=l,T.memoizedState=af(1|d,F,p,b))}function QA(l,d){Gg(8390656,8,l,d)}function eT(l,d){Sp(2048,8,l,d)}function tT(l,d){return Sp(4,2,l,d)}function nT(l,d){return Sp(4,4,l,d)}function rT(l,d){if(typeof d=="function"){l=l();var p=d(l);return function(){typeof p=="function"?p():d(null)}}if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function aT(l,d,p){p=p!=null?p.concat([l]):null,Sp(4,4,rT.bind(null,d,l),p)}function e_(){}function iT(l,d){var p=na();d=d===void 0?null:d;var b=p.memoizedState;return d!==null&&q1(d,b[1])?b[0]:(p.memoizedState=[l,d],l)}function oT(l,d){var p=na();d=d===void 0?null:d;var b=p.memoizedState;if(d!==null&&q1(d,b[1]))return b[0];if(b=l(),Fc){Tt(!0);try{l()}finally{Tt(!1)}}return p.memoizedState=[b,d],b}function t_(l,d,p){return p===void 0||(cu&1073741824)!==0?l.memoizedState=d:(l.memoizedState=p,l=u3(),Pn.lanes|=l,yu|=l,p)}function sT(l,d,p,b){return za(p,d)?p:tf.current!==null?(l=t_(l,p,b),za(l,d)||(ba=!0),l):(cu&42)===0?(ba=!0,l.memoizedState=p):(l=u3(),Pn.lanes|=l,yu|=l,d)}function lT(l,d,p,b,T){var F=ne.p;ne.p=F!==0&&8>F?F:8;var oe=se.T,Se={};se.T=Se,a_(l,!1,d,p);try{var ze=T(),ut=se.S;if(ut!==null&&ut(Se,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var _t=OB(ze,b);Ep(l,d,_t,Li(l))}else Ep(l,d,b,Li(l))}catch(kt){Ep(l,d,{then:function(){},status:"rejected",reason:kt},Li())}finally{ne.p=F,se.T=oe}}function FB(){}function n_(l,d,p,b){if(l.tag!==5)throw Error(r(476));var T=uT(l).queue;lT(l,T,d,ee,p===null?FB:function(){return cT(l),p(b)})}function uT(l){var d=l.memoizedState;if(d!==null)return d;d={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:ee},next:null};var p={};return d.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:p},next:null},l.memoizedState=d,l=l.alternate,l!==null&&(l.memoizedState=d),d}function cT(l){var d=uT(l).next.queue;Ep(l,d,{},Li())}function r_(){return Ua(Up)}function dT(){return na().memoizedState}function fT(){return na().memoizedState}function LB(l){for(var d=l.return;d!==null;){switch(d.tag){case 24:case 3:var p=Li();l=lu(p);var b=uu(d,l,p);b!==null&&($i(b,d,p),bp(b,d,p)),d={cache:D1()},l.payload=d;return}d=d.return}}function $B(l,d,p){var b=Li();p={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},Wg(l)?pT(d,p):(p=ea(l,d,p,b),p!==null&&($i(p,l,b),mT(p,d,b)))}function hT(l,d,p){var b=Li();Ep(l,d,p,b)}function Ep(l,d,p,b){var T={lane:b,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(Wg(l))pT(d,T);else{var F=l.alternate;if(l.lanes===0&&(F===null||F.lanes===0)&&(F=d.lastRenderedReducer,F!==null))try{var oe=d.lastRenderedState,Se=F(oe,p);if(T.hasEagerState=!0,T.eagerState=Se,za(Se,oe))return Kr(l,d,T,0),Cr===null&&yn(),!1}catch{}finally{}if(p=ea(l,d,T,b),p!==null)return $i(p,l,b),mT(p,d,b),!0}return!1}function a_(l,d,p,b){if(b={lane:2,revertLane:P_(),action:b,hasEagerState:!1,eagerState:null,next:null},Wg(l)){if(d)throw Error(r(479))}else d=ea(l,p,b,2),d!==null&&$i(d,l,2)}function Wg(l){var d=l.alternate;return l===Pn||d!==null&&d===Pn}function pT(l,d){nf=zg=!0;var p=l.pending;p===null?d.next=d:(d.next=p.next,p.next=d),l.pending=d}function mT(l,d,p){if((p&4194048)!==0){var b=d.lanes;b&=l.pendingLanes,p|=b,d.lanes=p,Ke(l,p)}}var Kg={readContext:Ua,use:qg,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useLayoutEffect:Zr,useInsertionEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useSyncExternalStore:Zr,useId:Zr,useHostTransitionStatus:Zr,useFormState:Zr,useActionState:Zr,useOptimistic:Zr,useMemoCache:Zr,useCacheRefresh:Zr},gT={readContext:Ua,use:qg,useCallback:function(l,d){return mi().memoizedState=[l,d===void 0?null:d],l},useContext:Ua,useEffect:QA,useImperativeHandle:function(l,d,p){p=p!=null?p.concat([l]):null,Gg(4194308,4,rT.bind(null,d,l),p)},useLayoutEffect:function(l,d){return Gg(4194308,4,l,d)},useInsertionEffect:function(l,d){Gg(4,2,l,d)},useMemo:function(l,d){var p=mi();d=d===void 0?null:d;var b=l();if(Fc){Tt(!0);try{l()}finally{Tt(!1)}}return p.memoizedState=[b,d],b},useReducer:function(l,d,p){var b=mi();if(p!==void 0){var T=p(d);if(Fc){Tt(!0);try{p(d)}finally{Tt(!1)}}}else T=d;return b.memoizedState=b.baseState=T,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:T},b.queue=l,l=l.dispatch=$B.bind(null,Pn,l),[b.memoizedState,l]},useRef:function(l){var d=mi();return l={current:l},d.memoizedState=l},useState:function(l){l=J1(l);var d=l.queue,p=hT.bind(null,Pn,d);return d.dispatch=p,[l.memoizedState,p]},useDebugValue:e_,useDeferredValue:function(l,d){var p=mi();return t_(p,l,d)},useTransition:function(){var l=J1(!1);return l=lT.bind(null,Pn,l.queue,!0,!1),mi().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,d,p){var b=Pn,T=mi();if(Jn){if(p===void 0)throw Error(r(407));p=p()}else{if(p=d(),Cr===null)throw Error(r(349));(Wn&124)!==0||FA(b,d,p)}T.memoizedState=p;var F={value:p,getSnapshot:d};return T.queue=F,QA($A.bind(null,b,F,l),[l]),b.flags|=2048,af(9,Vg(),LA.bind(null,b,F,p,d),null),p},useId:function(){var l=mi(),d=Cr.identifierPrefix;if(Jn){var p=ol,b=il;p=(b&~(1<<32-zt(b)-1)).toString(32)+p,d=""+d+"R"+p,p=Ug++,0<p&&(d+="H"+p.toString(32)),d+=""}else p=DB++,d=""+d+"r"+p.toString(32)+"";return l.memoizedState=d},useHostTransitionStatus:r_,useFormState:KA,useActionState:KA,useOptimistic:function(l){var d=mi();d.memoizedState=d.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=p,d=a_.bind(null,Pn,!0,p),p.dispatch=d,[l,d]},useMemoCache:Z1,useCacheRefresh:function(){return mi().memoizedState=LB.bind(null,Pn)}},yT={readContext:Ua,use:qg,useCallback:iT,useContext:Ua,useEffect:eT,useImperativeHandle:aT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:oT,useReducer:Hg,useRef:JA,useState:function(){return Hg(ul)},useDebugValue:e_,useDeferredValue:function(l,d){var p=na();return sT(p,fr.memoizedState,l,d)},useTransition:function(){var l=Hg(ul)[0],d=na().memoizedState;return[typeof l=="boolean"?l:xp(l),d]},useSyncExternalStore:PA,useId:dT,useHostTransitionStatus:r_,useFormState:ZA,useActionState:ZA,useOptimistic:function(l,d){var p=na();return UA(p,fr,l,d)},useMemoCache:Z1,useCacheRefresh:fT},BB={readContext:Ua,use:qg,useCallback:iT,useContext:Ua,useEffect:eT,useImperativeHandle:aT,useInsertionEffect:tT,useLayoutEffect:nT,useMemo:oT,useReducer:X1,useRef:JA,useState:function(){return X1(ul)},useDebugValue:e_,useDeferredValue:function(l,d){var p=na();return fr===null?t_(p,l,d):sT(p,fr.memoizedState,l,d)},useTransition:function(){var l=X1(ul)[0],d=na().memoizedState;return[typeof l=="boolean"?l:xp(l),d]},useSyncExternalStore:PA,useId:dT,useHostTransitionStatus:r_,useFormState:XA,useActionState:XA,useOptimistic:function(l,d){var p=na();return fr!==null?UA(p,fr,l,d):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:Z1,useCacheRefresh:fT},of=null,Cp=0;function Zg(l){var d=Cp;return Cp+=1,of===null&&(of=[]),TA(of,l,d)}function kp(l,d){d=d.props.ref,l.ref=d!==void 0?d:null}function Yg(l,d){throw d.$$typeof===h?Error(r(525)):(l=Object.prototype.toString.call(d),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l)))}function bT(l){var d=l._init;return d(l._payload)}function vT(l){function d(nt,Ze){if(l){var lt=nt.deletions;lt===null?(nt.deletions=[Ze],nt.flags|=16):lt.push(Ze)}}function p(nt,Ze){if(!l)return null;for(;Ze!==null;)d(nt,Ze),Ze=Ze.sibling;return null}function b(nt){for(var Ze=new Map;nt!==null;)nt.key!==null?Ze.set(nt.key,nt):Ze.set(nt.index,nt),nt=nt.sibling;return Ze}function T(nt,Ze){return nt=al(nt,Ze),nt.index=0,nt.sibling=null,nt}function F(nt,Ze,lt){return nt.index=lt,l?(lt=nt.alternate,lt!==null?(lt=lt.index,lt<Ze?(nt.flags|=67108866,Ze):lt):(nt.flags|=67108866,Ze)):(nt.flags|=1048576,Ze)}function oe(nt){return l&&nt.alternate===null&&(nt.flags|=67108866),nt}function Se(nt,Ze,lt,St){return Ze===null||Ze.tag!==6?(Ze=C1(lt,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,lt),Ze.return=nt,Ze)}function ze(nt,Ze,lt,St){var Qt=lt.type;return Qt===w?_t(nt,Ze,lt.props.children,St,lt.key):Ze!==null&&(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&bT(Qt)===Ze.type)?(Ze=T(Ze,lt.props),kp(Ze,lt),Ze.return=nt,Ze):(Ze=Og(lt.type,lt.key,lt.props,null,nt.mode,St),kp(Ze,lt),Ze.return=nt,Ze)}function ut(nt,Ze,lt,St){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==lt.containerInfo||Ze.stateNode.implementation!==lt.implementation?(Ze=k1(lt,nt.mode,St),Ze.return=nt,Ze):(Ze=T(Ze,lt.children||[]),Ze.return=nt,Ze)}function _t(nt,Ze,lt,St,Qt){return Ze===null||Ze.tag!==7?(Ze=Rc(lt,nt.mode,St,Qt),Ze.return=nt,Ze):(Ze=T(Ze,lt),Ze.return=nt,Ze)}function kt(nt,Ze,lt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=C1(""+Ze,nt.mode,lt),Ze.return=nt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case m:return lt=Og(Ze.type,Ze.key,Ze.props,null,nt.mode,lt),kp(lt,Ze),lt.return=nt,lt;case g:return Ze=k1(Ze,nt.mode,lt),Ze.return=nt,Ze;case D:var St=Ze._init;return Ze=St(Ze._payload),kt(nt,Ze,lt)}if(me(Ze)||M(Ze))return Ze=Rc(Ze,nt.mode,lt,null),Ze.return=nt,Ze;if(typeof Ze.then=="function")return kt(nt,Zg(Ze),lt);if(Ze.$$typeof===E)return kt(nt,Pg(nt,Ze),lt);Yg(nt,Ze)}return null}function pt(nt,Ze,lt,St){var Qt=Ze!==null?Ze.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return Qt!==null?null:Se(nt,Ze,""+lt,St);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:return lt.key===Qt?ze(nt,Ze,lt,St):null;case g:return lt.key===Qt?ut(nt,Ze,lt,St):null;case D:return Qt=lt._init,lt=Qt(lt._payload),pt(nt,Ze,lt,St)}if(me(lt)||M(lt))return Qt!==null?null:_t(nt,Ze,lt,St,null);if(typeof lt.then=="function")return pt(nt,Ze,Zg(lt),St);if(lt.$$typeof===E)return pt(nt,Ze,Pg(nt,lt),St);Yg(nt,lt)}return null}function mt(nt,Ze,lt,St,Qt){if(typeof St=="string"&&St!==""||typeof St=="number"||typeof St=="bigint")return nt=nt.get(lt)||null,Se(Ze,nt,""+St,Qt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case m:return nt=nt.get(St.key===null?lt:St.key)||null,ze(Ze,nt,St,Qt);case g:return nt=nt.get(St.key===null?lt:St.key)||null,ut(Ze,nt,St,Qt);case D:var Ln=St._init;return St=Ln(St._payload),mt(nt,Ze,lt,St,Qt)}if(me(St)||M(St))return nt=nt.get(lt)||null,_t(Ze,nt,St,Qt,null);if(typeof St.then=="function")return mt(nt,Ze,lt,Zg(St),Qt);if(St.$$typeof===E)return mt(nt,Ze,lt,Pg(Ze,St),Qt);Yg(Ze,St)}return null}function bn(nt,Ze,lt,St){for(var Qt=null,Ln=null,on=Ze,mn=Ze=0,wa=null;on!==null&&mn<lt.length;mn++){on.index>mn?(wa=on,on=null):wa=on.sibling;var Xn=pt(nt,on,lt[mn],St);if(Xn===null){on===null&&(on=wa);break}l&&on&&Xn.alternate===null&&d(nt,on),Ze=F(Xn,Ze,mn),Ln===null?Qt=Xn:Ln.sibling=Xn,Ln=Xn,on=wa}if(mn===lt.length)return p(nt,on),Jn&&Ic(nt,mn),Qt;if(on===null){for(;mn<lt.length;mn++)on=kt(nt,lt[mn],St),on!==null&&(Ze=F(on,Ze,mn),Ln===null?Qt=on:Ln.sibling=on,Ln=on);return Jn&&Ic(nt,mn),Qt}for(on=b(on);mn<lt.length;mn++)wa=mt(on,nt,mn,lt[mn],St),wa!==null&&(l&&wa.alternate!==null&&on.delete(wa.key===null?mn:wa.key),Ze=F(wa,Ze,mn),Ln===null?Qt=wa:Ln.sibling=wa,Ln=wa);return l&&on.forEach(function(ku){return d(nt,ku)}),Jn&&Ic(nt,mn),Qt}function fn(nt,Ze,lt,St){if(lt==null)throw Error(r(151));for(var Qt=null,Ln=null,on=Ze,mn=Ze=0,wa=null,Xn=lt.next();on!==null&&!Xn.done;mn++,Xn=lt.next()){on.index>mn?(wa=on,on=null):wa=on.sibling;var ku=pt(nt,on,Xn.value,St);if(ku===null){on===null&&(on=wa);break}l&&on&&ku.alternate===null&&d(nt,on),Ze=F(ku,Ze,mn),Ln===null?Qt=ku:Ln.sibling=ku,Ln=ku,on=wa}if(Xn.done)return p(nt,on),Jn&&Ic(nt,mn),Qt;if(on===null){for(;!Xn.done;mn++,Xn=lt.next())Xn=kt(nt,Xn.value,St),Xn!==null&&(Ze=F(Xn,Ze,mn),Ln===null?Qt=Xn:Ln.sibling=Xn,Ln=Xn);return Jn&&Ic(nt,mn),Qt}for(on=b(on);!Xn.done;mn++,Xn=lt.next())Xn=mt(on,nt,mn,Xn.value,St),Xn!==null&&(l&&Xn.alternate!==null&&on.delete(Xn.key===null?mn:Xn.key),Ze=F(Xn,Ze,mn),Ln===null?Qt=Xn:Ln.sibling=Xn,Ln=Xn);return l&&on.forEach(function(z7){return d(nt,z7)}),Jn&&Ic(nt,mn),Qt}function pr(nt,Ze,lt,St){if(typeof lt=="object"&&lt!==null&&lt.type===w&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case m:e:{for(var Qt=lt.key;Ze!==null;){if(Ze.key===Qt){if(Qt=lt.type,Qt===w){if(Ze.tag===7){p(nt,Ze.sibling),St=T(Ze,lt.props.children),St.return=nt,nt=St;break e}}else if(Ze.elementType===Qt||typeof Qt=="object"&&Qt!==null&&Qt.$$typeof===D&&bT(Qt)===Ze.type){p(nt,Ze.sibling),St=T(Ze,lt.props),kp(St,lt),St.return=nt,nt=St;break e}p(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}lt.type===w?(St=Rc(lt.props.children,nt.mode,St,lt.key),St.return=nt,nt=St):(St=Og(lt.type,lt.key,lt.props,null,nt.mode,St),kp(St,lt),St.return=nt,nt=St)}return oe(nt);case g:e:{for(Qt=lt.key;Ze!==null;){if(Ze.key===Qt)if(Ze.tag===4&&Ze.stateNode.containerInfo===lt.containerInfo&&Ze.stateNode.implementation===lt.implementation){p(nt,Ze.sibling),St=T(Ze,lt.children||[]),St.return=nt,nt=St;break e}else{p(nt,Ze);break}else d(nt,Ze);Ze=Ze.sibling}St=k1(lt,nt.mode,St),St.return=nt,nt=St}return oe(nt);case D:return Qt=lt._init,lt=Qt(lt._payload),pr(nt,Ze,lt,St)}if(me(lt))return bn(nt,Ze,lt,St);if(M(lt)){if(Qt=M(lt),typeof Qt!="function")throw Error(r(150));return lt=Qt.call(lt),fn(nt,Ze,lt,St)}if(typeof lt.then=="function")return pr(nt,Ze,Zg(lt),St);if(lt.$$typeof===E)return pr(nt,Ze,Pg(nt,lt),St);Yg(nt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,Ze!==null&&Ze.tag===6?(p(nt,Ze.sibling),St=T(Ze,lt),St.return=nt,nt=St):(p(nt,Ze),St=C1(lt,nt.mode,St),St.return=nt,nt=St),oe(nt)):p(nt,Ze)}return function(nt,Ze,lt,St){try{Cp=0;var Qt=pr(nt,Ze,lt,St);return of=null,Qt}catch(on){if(on===gp||on===Lg)throw on;var Ln=ji(29,on,null,nt.mode);return Ln.lanes=St,Ln.return=nt,Ln}finally{}}}var sf=vT(!0),wT=vT(!1),ro=Y(null),ys=null;function du(l){var d=l.alternate;re(la,la.current&1),re(ro,l),ys===null&&(d===null||tf.current!==null||d.memoizedState!==null)&&(ys=l)}function _T(l){if(l.tag===22){if(re(la,la.current),re(ro,l),ys===null){var d=l.alternate;d!==null&&d.memoizedState!==null&&(ys=l)}}else fu()}function fu(){re(la,la.current),re(ro,ro.current)}function cl(l){J(ro),ys===l&&(ys=null),J(la)}var la=Y(0);function Xg(l){for(var d=l;d!==null;){if(d.tag===13){var p=d.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||K_(p)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}function i_(l,d,p,b){d=l.memoizedState,p=p(b,d),p=p==null?d:f({},d,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var o_={enqueueSetState:function(l,d,p){l=l._reactInternals;var b=Li(),T=lu(b);T.payload=d,p!=null&&(T.callback=p),d=uu(l,T,b),d!==null&&($i(d,l,b),bp(d,l,b))},enqueueReplaceState:function(l,d,p){l=l._reactInternals;var b=Li(),T=lu(b);T.tag=1,T.payload=d,p!=null&&(T.callback=p),d=uu(l,T,b),d!==null&&($i(d,l,b),bp(d,l,b))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var p=Li(),b=lu(p);b.tag=2,d!=null&&(b.callback=d),d=uu(l,b,p),d!==null&&($i(d,l,p),bp(d,l,p))}};function xT(l,d,p,b,T,F,oe){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(b,F,oe):d.prototype&&d.prototype.isPureReactComponent?!k(p,b)||!k(T,F):!0}function ST(l,d,p,b){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(p,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(p,b),d.state!==l&&o_.enqueueReplaceState(d,d.state,null)}function Lc(l,d){var p=d;if("ref"in d){p={};for(var b in d)b!=="ref"&&(p[b]=d[b])}if(l=l.defaultProps){p===d&&(p=f({},p));for(var T in l)p[T]===void 0&&(p[T]=l[T])}return p}var Jg=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(d))return}else if(typeof Vr=="object"&&typeof Vr.emit=="function"){Vr.emit("uncaughtException",l);return}console.error(l)};function ET(l){Jg(l)}function CT(l){console.error(l)}function kT(l){Jg(l)}function Qg(l,d){try{var p=l.onUncaughtError;p(d.value,{componentStack:d.stack})}catch(b){setTimeout(function(){throw b})}}function AT(l,d,p){try{var b=l.onCaughtError;b(p.value,{componentStack:p.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function s_(l,d,p){return p=lu(p),p.tag=3,p.payload={element:null},p.callback=function(){Qg(l,d)},p}function TT(l){return l=lu(l),l.tag=3,l}function RT(l,d,p,b){var T=p.type.getDerivedStateFromError;if(typeof T=="function"){var F=b.value;l.payload=function(){return T(F)},l.callback=function(){AT(d,p,b)}}var oe=p.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(l.callback=function(){AT(d,p,b),typeof T!="function"&&(bu===null?bu=new Set([this]):bu.add(this));var Se=b.stack;this.componentDidCatch(b.value,{componentStack:Se!==null?Se:""})})}function zB(l,d,p,b,T){if(p.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){if(d=p.alternate,d!==null&&hp(d,p,T,!0),p=ro.current,p!==null){switch(p.tag){case 13:return ys===null?I_():p.alternate===null&&Hr===0&&(Hr=3),p.flags&=-257,p.flags|=65536,p.lanes=T,b===P1?p.flags|=16384:(d=p.updateQueue,d===null?p.updateQueue=new Set([b]):d.add(b),D_(l,b,T)),!1;case 22:return p.flags|=65536,b===P1?p.flags|=16384:(d=p.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([b])},p.updateQueue=d):(p=d.retryQueue,p===null?d.retryQueue=new Set([b]):p.add(b)),D_(l,b,T)),!1}throw Error(r(435,p.tag))}return D_(l,b,T),I_(),!1}if(Jn)return d=ro.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=T,b!==R1&&(l=Error(r(422),{cause:b}),fp(cn(l,p)))):(b!==R1&&(d=Error(r(423),{cause:b}),fp(cn(d,p))),l=l.current.alternate,l.flags|=65536,T&=-T,l.lanes|=T,b=cn(b,p),T=s_(l.stateNode,b,T),$1(l,T),Hr!==4&&(Hr=2)),!1;var F=Error(r(520),{cause:b});if(F=cn(F,p),Dp===null?Dp=[F]:Dp.push(F),Hr!==4&&(Hr=2),d===null)return!0;b=cn(b,p),p=d;do{switch(p.tag){case 3:return p.flags|=65536,l=T&-T,p.lanes|=l,l=s_(p.stateNode,b,l),$1(p,l),!1;case 1:if(d=p.type,F=p.stateNode,(p.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(bu===null||!bu.has(F))))return p.flags|=65536,T&=-T,p.lanes|=T,T=TT(T),RT(T,l,p,b),$1(p,T),!1}p=p.return}while(p!==null);return!1}var NT=Error(r(461)),ba=!1;function Oa(l,d,p,b){d.child=l===null?wT(d,null,p,b):sf(d,l.child,p,b)}function IT(l,d,p,b,T){p=p.render;var F=d.ref;if("ref"in b){var oe={};for(var Se in b)Se!=="ref"&&(oe[Se]=b[Se])}else oe=b;return Mc(d),b=H1(l,d,p,oe,F,T),Se=V1(),l!==null&&!ba?(G1(l,d,T),dl(l,d,T)):(Jn&&Se&&A1(d),d.flags|=1,Oa(l,d,b,T),d.child)}function OT(l,d,p,b,T){if(l===null){var F=p.type;return typeof F=="function"&&!E1(F)&&F.defaultProps===void 0&&p.compare===null?(d.tag=15,d.type=F,DT(l,d,F,b,T)):(l=Og(p.type,null,b,d,d.mode,T),l.ref=d.ref,l.return=d,d.child=l)}if(F=l.child,!m_(l,T)){var oe=F.memoizedProps;if(p=p.compare,p=p!==null?p:k,p(oe,b)&&l.ref===d.ref)return dl(l,d,T)}return d.flags|=1,l=al(F,b),l.ref=d.ref,l.return=d,d.child=l}function DT(l,d,p,b,T){if(l!==null){var F=l.memoizedProps;if(k(F,b)&&l.ref===d.ref)if(ba=!1,d.pendingProps=b=F,m_(l,T))(l.flags&131072)!==0&&(ba=!0);else return d.lanes=l.lanes,dl(l,d,T)}return l_(l,d,p,b,T)}function jT(l,d,p){var b=d.pendingProps,T=b.children,F=l!==null?l.memoizedState:null;if(b.mode==="hidden"){if((d.flags&128)!==0){if(b=F!==null?F.baseLanes|p:p,l!==null){for(T=d.child=l.child,F=0;T!==null;)F=F|T.lanes|T.childLanes,T=T.sibling;d.childLanes=F&~b}else d.childLanes=0,d.child=null;return MT(l,d,b,p)}if((p&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},l!==null&&Fg(d,F!==null?F.cachePool:null),F!==null?DA(d,F):z1(),_T(d);else return d.lanes=d.childLanes=536870912,MT(l,d,F!==null?F.baseLanes|p:p,p)}else F!==null?(Fg(d,F.cachePool),DA(d,F),fu(),d.memoizedState=null):(l!==null&&Fg(d,null),z1(),fu());return Oa(l,d,T,p),d.child}function MT(l,d,p,b){var T=M1();return T=T===null?null:{parent:sa._currentValue,pool:T},d.memoizedState={baseLanes:p,cachePool:T},l!==null&&Fg(d,null),z1(),_T(d),l!==null&&hp(l,d,b,!0),null}function ey(l,d){var p=d.ref;if(p===null)l!==null&&l.ref!==null&&(d.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(l===null||l.ref!==p)&&(d.flags|=4194816)}}function l_(l,d,p,b,T){return Mc(d),p=H1(l,d,p,b,void 0,T),b=V1(),l!==null&&!ba?(G1(l,d,T),dl(l,d,T)):(Jn&&b&&A1(d),d.flags|=1,Oa(l,d,p,T),d.child)}function PT(l,d,p,b,T,F){return Mc(d),d.updateQueue=null,p=MA(d,b,p,T),jA(l),b=V1(),l!==null&&!ba?(G1(l,d,F),dl(l,d,F)):(Jn&&b&&A1(d),d.flags|=1,Oa(l,d,p,F),d.child)}function FT(l,d,p,b,T){if(Mc(d),d.stateNode===null){var F=ms,oe=p.contextType;typeof oe=="object"&&oe!==null&&(F=Ua(oe)),F=new p(b,F),d.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=o_,d.stateNode=F,F._reactInternals=d,F=d.stateNode,F.props=b,F.state=d.memoizedState,F.refs={},F1(d),oe=p.contextType,F.context=typeof oe=="object"&&oe!==null?Ua(oe):ms,F.state=d.memoizedState,oe=p.getDerivedStateFromProps,typeof oe=="function"&&(i_(d,p,oe,b),F.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(oe=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),oe!==F.state&&o_.enqueueReplaceState(F,F.state,null),wp(d,b,F,T),vp(),F.state=d.memoizedState),typeof F.componentDidMount=="function"&&(d.flags|=4194308),b=!0}else if(l===null){F=d.stateNode;var Se=d.memoizedProps,ze=Lc(p,Se);F.props=ze;var ut=F.context,_t=p.contextType;oe=ms,typeof _t=="object"&&_t!==null&&(oe=Ua(_t));var kt=p.getDerivedStateFromProps;_t=typeof kt=="function"||typeof F.getSnapshotBeforeUpdate=="function",Se=d.pendingProps!==Se,_t||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(Se||ut!==oe)&&ST(d,F,b,oe),su=!1;var pt=d.memoizedState;F.state=pt,wp(d,b,F,T),vp(),ut=d.memoizedState,Se||pt!==ut||su?(typeof kt=="function"&&(i_(d,p,kt,b),ut=d.memoizedState),(ze=su||xT(d,p,ze,b,pt,ut,oe))?(_t||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(d.flags|=4194308)):(typeof F.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=ut),F.props=b,F.state=ut,F.context=oe,b=ze):(typeof F.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{F=d.stateNode,L1(l,d),oe=d.memoizedProps,_t=Lc(p,oe),F.props=_t,kt=d.pendingProps,pt=F.context,ut=p.contextType,ze=ms,typeof ut=="object"&&ut!==null&&(ze=Ua(ut)),Se=p.getDerivedStateFromProps,(ut=typeof Se=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(oe!==kt||pt!==ze)&&ST(d,F,b,ze),su=!1,pt=d.memoizedState,F.state=pt,wp(d,b,F,T),vp();var mt=d.memoizedState;oe!==kt||pt!==mt||su||l!==null&&l.dependencies!==null&&Mg(l.dependencies)?(typeof Se=="function"&&(i_(d,p,Se,b),mt=d.memoizedState),(_t=su||xT(d,p,_t,b,pt,mt,ze)||l!==null&&l.dependencies!==null&&Mg(l.dependencies))?(ut||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(b,mt,ze),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(b,mt,ze)),typeof F.componentDidUpdate=="function"&&(d.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof F.componentDidUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=mt),F.props=b,F.state=mt,F.context=ze,b=_t):(typeof F.componentDidUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||oe===l.memoizedProps&&pt===l.memoizedState||(d.flags|=1024),b=!1)}return F=b,ey(l,d),b=(d.flags&128)!==0,F||b?(F=d.stateNode,p=b&&typeof p.getDerivedStateFromError!="function"?null:F.render(),d.flags|=1,l!==null&&b?(d.child=sf(d,l.child,null,T),d.child=sf(d,null,p,T)):Oa(l,d,p,T),d.memoizedState=F.state,l=d.child):l=dl(l,d,T),l}function LT(l,d,p,b){return dp(),d.flags|=256,Oa(l,d,p,b),d.child}var u_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function c_(l){return{baseLanes:l,cachePool:CA()}}function d_(l,d,p){return l=l!==null?l.childLanes&~p:0,d&&(l|=ao),l}function $T(l,d,p){var b=d.pendingProps,T=!1,F=(d.flags&128)!==0,oe;if((oe=F)||(oe=l!==null&&l.memoizedState===null?!1:(la.current&2)!==0),oe&&(T=!0,d.flags&=-129),oe=(d.flags&32)!==0,d.flags&=-33,l===null){if(Jn){if(T?du(d):fu(),Jn){var Se=qr,ze;if(ze=Se){e:{for(ze=Se,Se=gs;ze.nodeType!==8;){if(!Se){Se=null;break e}if(ze=Ro(ze.nextSibling),ze===null){Se=null;break e}}Se=ze}Se!==null?(d.memoizedState={dehydrated:Se,treeContext:Nc!==null?{id:il,overflow:ol}:null,retryLane:536870912,hydrationErrors:null},ze=ji(18,null,null,0),ze.stateNode=Se,ze.return=d,d.child=ze,ai=d,qr=null,ze=!0):ze=!1}ze||Dc(d)}if(Se=d.memoizedState,Se!==null&&(Se=Se.dehydrated,Se!==null))return K_(Se)?d.lanes=32:d.lanes=536870912,null;cl(d)}return Se=b.children,b=b.fallback,T?(fu(),T=d.mode,Se=ty({mode:"hidden",children:Se},T),b=Rc(b,T,p,null),Se.return=d,b.return=d,Se.sibling=b,d.child=Se,T=d.child,T.memoizedState=c_(p),T.childLanes=d_(l,oe,p),d.memoizedState=u_,b):(du(d),f_(d,Se))}if(ze=l.memoizedState,ze!==null&&(Se=ze.dehydrated,Se!==null)){if(F)d.flags&256?(du(d),d.flags&=-257,d=h_(l,d,p)):d.memoizedState!==null?(fu(),d.child=l.child,d.flags|=128,d=null):(fu(),T=b.fallback,Se=d.mode,b=ty({mode:"visible",children:b.children},Se),T=Rc(T,Se,p,null),T.flags|=2,b.return=d,T.return=d,b.sibling=T,d.child=b,sf(d,l.child,null,p),b=d.child,b.memoizedState=c_(p),b.childLanes=d_(l,oe,p),d.memoizedState=u_,d=T);else if(du(d),K_(Se)){if(oe=Se.nextSibling&&Se.nextSibling.dataset,oe)var ut=oe.dgst;oe=ut,b=Error(r(419)),b.stack="",b.digest=oe,fp({value:b,source:null,stack:null}),d=h_(l,d,p)}else if(ba||hp(l,d,p,!1),oe=(p&l.childLanes)!==0,ba||oe){if(oe=Cr,oe!==null&&(b=p&-p,b=(b&42)!==0?1:Ct(b),b=(b&(oe.suspendedLanes|p))!==0?0:b,b!==0&&b!==ze.retryLane))throw ze.retryLane=b,Ao(l,b),$i(oe,l,b),NT;Se.data==="$?"||I_(),d=h_(l,d,p)}else Se.data==="$?"?(d.flags|=192,d.child=l.child,d=null):(l=ze.treeContext,qr=Ro(Se.nextSibling),ai=d,Jn=!0,Oc=null,gs=!1,l!==null&&(to[no++]=il,to[no++]=ol,to[no++]=Nc,il=l.id,ol=l.overflow,Nc=d),d=f_(d,b.children),d.flags|=4096);return d}return T?(fu(),T=b.fallback,Se=d.mode,ze=l.child,ut=ze.sibling,b=al(ze,{mode:"hidden",children:b.children}),b.subtreeFlags=ze.subtreeFlags&65011712,ut!==null?T=al(ut,T):(T=Rc(T,Se,p,null),T.flags|=2),T.return=d,b.return=d,b.sibling=T,d.child=b,b=T,T=d.child,Se=l.child.memoizedState,Se===null?Se=c_(p):(ze=Se.cachePool,ze!==null?(ut=sa._currentValue,ze=ze.parent!==ut?{parent:ut,pool:ut}:ze):ze=CA(),Se={baseLanes:Se.baseLanes|p,cachePool:ze}),T.memoizedState=Se,T.childLanes=d_(l,oe,p),d.memoizedState=u_,b):(du(d),p=l.child,l=p.sibling,p=al(p,{mode:"visible",children:b.children}),p.return=d,p.sibling=null,l!==null&&(oe=d.deletions,oe===null?(d.deletions=[l],d.flags|=16):oe.push(l)),d.child=p,d.memoizedState=null,p)}function f_(l,d){return d=ty({mode:"visible",children:d},l.mode),d.return=l,l.child=d}function ty(l,d){return l=ji(22,l,null,d),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function h_(l,d,p){return sf(d,l.child,null,p),l=f_(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function BT(l,d,p){l.lanes|=d;var b=l.alternate;b!==null&&(b.lanes|=d),I1(l.return,d,p)}function p_(l,d,p,b,T){var F=l.memoizedState;F===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:p,tailMode:T}:(F.isBackwards=d,F.rendering=null,F.renderingStartTime=0,F.last=b,F.tail=p,F.tailMode=T)}function zT(l,d,p){var b=d.pendingProps,T=b.revealOrder,F=b.tail;if(Oa(l,d,b.children,p),b=la.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&BT(l,p,d);else if(l.tag===19)BT(l,p,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}b&=1}switch(re(la,b),T){case"forwards":for(p=d.child,T=null;p!==null;)l=p.alternate,l!==null&&Xg(l)===null&&(T=p),p=p.sibling;p=T,p===null?(T=d.child,d.child=null):(T=p.sibling,p.sibling=null),p_(d,!1,T,p,F);break;case"backwards":for(p=null,T=d.child,d.child=null;T!==null;){if(l=T.alternate,l!==null&&Xg(l)===null){d.child=T;break}l=T.sibling,T.sibling=p,p=T,T=l}p_(d,!0,p,null,F);break;case"together":p_(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function dl(l,d,p){if(l!==null&&(d.dependencies=l.dependencies),yu|=d.lanes,(p&d.childLanes)===0)if(l!==null){if(hp(l,d,p,!1),(p&d.childLanes)===0)return null}else return null;if(l!==null&&d.child!==l.child)throw Error(r(153));if(d.child!==null){for(l=d.child,p=al(l,l.pendingProps),d.child=p,p.return=d;l.sibling!==null;)l=l.sibling,p=p.sibling=al(l,l.pendingProps),p.return=d;p.sibling=null}return d.child}function m_(l,d){return(l.lanes&d)!==0?!0:(l=l.dependencies,!!(l!==null&&Mg(l)))}function UB(l,d,p){switch(d.tag){case 3:Re(d,d.stateNode.containerInfo),ou(d,sa,l.memoizedState.cache),dp();break;case 27:case 5:He(d);break;case 4:Re(d,d.stateNode.containerInfo);break;case 10:ou(d,d.type,d.memoizedProps.value);break;case 13:var b=d.memoizedState;if(b!==null)return b.dehydrated!==null?(du(d),d.flags|=128,null):(p&d.child.childLanes)!==0?$T(l,d,p):(du(d),l=dl(l,d,p),l!==null?l.sibling:null);du(d);break;case 19:var T=(l.flags&128)!==0;if(b=(p&d.childLanes)!==0,b||(hp(l,d,p,!1),b=(p&d.childLanes)!==0),T){if(b)return zT(l,d,p);d.flags|=128}if(T=d.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),re(la,la.current),b)break;return null;case 22:case 23:return d.lanes=0,jT(l,d,p);case 24:ou(d,sa,l.memoizedState.cache)}return dl(l,d,p)}function UT(l,d,p){if(l!==null)if(l.memoizedProps!==d.pendingProps)ba=!0;else{if(!m_(l,p)&&(d.flags&128)===0)return ba=!1,UB(l,d,p);ba=(l.flags&131072)!==0}else ba=!1,Jn&&(d.flags&1048576)!==0&&bA(d,jg,d.index);switch(d.lanes=0,d.tag){case 16:e:{l=d.pendingProps;var b=d.elementType,T=b._init;if(b=T(b._payload),d.type=b,typeof b=="function")E1(b)?(l=Lc(b,l),d.tag=1,d=FT(null,d,b,l,p)):(d.tag=0,d=l_(null,d,b,l,p));else{if(b!=null){if(T=b.$$typeof,T===C){d.tag=11,d=IT(null,d,b,l,p);break e}else if(T===I){d.tag=14,d=OT(null,d,b,l,p);break e}}throw d=U(b)||b,Error(r(306,d,""))}}return d;case 0:return l_(l,d,d.type,d.pendingProps,p);case 1:return b=d.type,T=Lc(b,d.pendingProps),FT(l,d,b,T,p);case 3:e:{if(Re(d,d.stateNode.containerInfo),l===null)throw Error(r(387));b=d.pendingProps;var F=d.memoizedState;T=F.element,L1(l,d),wp(d,b,null,p);var oe=d.memoizedState;if(b=oe.cache,ou(d,sa,b),b!==F.cache&&O1(d,[sa],p,!0),vp(),b=oe.element,F.isDehydrated)if(F={element:b,isDehydrated:!1,cache:oe.cache},d.updateQueue.baseState=F,d.memoizedState=F,d.flags&256){d=LT(l,d,b,p);break e}else if(b!==T){T=cn(Error(r(424)),d),fp(T),d=LT(l,d,b,p);break e}else{switch(l=d.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(qr=Ro(l.firstChild),ai=d,Jn=!0,Oc=null,gs=!0,p=wT(d,null,b,p),d.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(dp(),b===T){d=dl(l,d,p);break e}Oa(l,d,b,p)}d=d.child}return d;case 26:return ey(l,d),l===null?(p=G3(d.type,null,d.pendingProps,null))?d.memoizedState=p:Jn||(p=d.type,l=d.pendingProps,b=my(Me.current).createElement(p),b[he]=d,b[de]=l,ja(b,p,l),Dn(b),d.stateNode=b):d.memoizedState=G3(d.type,l.memoizedProps,d.pendingProps,l.memoizedState),null;case 27:return He(d),l===null&&Jn&&(b=d.stateNode=q3(d.type,d.pendingProps,Me.current),ai=d,gs=!0,T=qr,_u(d.type)?(Z_=T,qr=Ro(b.firstChild)):qr=T),Oa(l,d,d.pendingProps.children,p),ey(l,d),l===null&&(d.flags|=4194304),d.child;case 5:return l===null&&Jn&&((T=b=qr)&&(b=g7(b,d.type,d.pendingProps,gs),b!==null?(d.stateNode=b,ai=d,qr=Ro(b.firstChild),gs=!1,T=!0):T=!1),T||Dc(d)),He(d),T=d.type,F=d.pendingProps,oe=l!==null?l.memoizedProps:null,b=F.children,V_(T,F)?b=null:oe!==null&&V_(T,oe)&&(d.flags|=32),d.memoizedState!==null&&(T=H1(l,d,jB,null,null,p),Up._currentValue=T),ey(l,d),Oa(l,d,b,p),d.child;case 6:return l===null&&Jn&&((l=p=qr)&&(p=y7(p,d.pendingProps,gs),p!==null?(d.stateNode=p,ai=d,qr=null,l=!0):l=!1),l||Dc(d)),null;case 13:return $T(l,d,p);case 4:return Re(d,d.stateNode.containerInfo),b=d.pendingProps,l===null?d.child=sf(d,null,b,p):Oa(l,d,b,p),d.child;case 11:return IT(l,d,d.type,d.pendingProps,p);case 7:return Oa(l,d,d.pendingProps,p),d.child;case 8:return Oa(l,d,d.pendingProps.children,p),d.child;case 12:return Oa(l,d,d.pendingProps.children,p),d.child;case 10:return b=d.pendingProps,ou(d,d.type,b.value),Oa(l,d,b.children,p),d.child;case 9:return T=d.type._context,b=d.pendingProps.children,Mc(d),T=Ua(T),b=b(T),d.flags|=1,Oa(l,d,b,p),d.child;case 14:return OT(l,d,d.type,d.pendingProps,p);case 15:return DT(l,d,d.type,d.pendingProps,p);case 19:return zT(l,d,p);case 31:return b=d.pendingProps,p=d.mode,b={mode:b.mode,children:b.children},l===null?(p=ty(b,p),p.ref=d.ref,d.child=p,p.return=d,d=p):(p=al(l.child,b),p.ref=d.ref,d.child=p,p.return=d,d=p),d;case 22:return jT(l,d,p);case 24:return Mc(d),b=Ua(sa),l===null?(T=M1(),T===null&&(T=Cr,F=D1(),T.pooledCache=F,F.refCount++,F!==null&&(T.pooledCacheLanes|=p),T=F),d.memoizedState={parent:b,cache:T},F1(d),ou(d,sa,T)):((l.lanes&p)!==0&&(L1(l,d),wp(d,null,null,p),vp()),T=l.memoizedState,F=d.memoizedState,T.parent!==b?(T={parent:b,cache:b},d.memoizedState=T,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=T),ou(d,sa,b)):(b=F.cache,ou(d,sa,b),b!==T.cache&&O1(d,[sa],p,!0))),Oa(l,d,d.pendingProps.children,p),d.child;case 29:throw d.pendingProps}throw Error(r(156,d.tag))}function fl(l){l.flags|=4}function qT(l,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!X3(d)){if(d=ro.current,d!==null&&((Wn&4194048)===Wn?ys!==null:(Wn&62914560)!==Wn&&(Wn&536870912)===0||d!==ys))throw yp=P1,kA;l.flags|=8192}}function ny(l,d){d!==null&&(l.flags|=4),l.flags&16384&&(d=l.tag!==22?P():536870912,l.lanes|=d,df|=d)}function Ap(l,d){if(!Jn)switch(l.tailMode){case"hidden":d=l.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:b.sibling=null}}function Br(l){var d=l.alternate!==null&&l.alternate.child===l.child,p=0,b=0;if(d)for(var T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags&65011712,b|=T.flags&65011712,T.return=l,T=T.sibling;else for(T=l.child;T!==null;)p|=T.lanes|T.childLanes,b|=T.subtreeFlags,b|=T.flags,T.return=l,T=T.sibling;return l.subtreeFlags|=b,l.childLanes=p,d}function qB(l,d,p){var b=d.pendingProps;switch(T1(d),d.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Br(d),null;case 1:return Br(d),null;case 3:return p=d.stateNode,b=null,l!==null&&(b=l.memoizedState.cache),d.memoizedState.cache!==b&&(d.flags|=2048),ll(sa),Ae(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(cp(d)?fl(d):l===null||l.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,_A())),Br(d),null;case 26:return p=d.memoizedState,l===null?(fl(d),p!==null?(Br(d),qT(d,p)):(Br(d),d.flags&=-16777217)):p?p!==l.memoizedState?(fl(d),Br(d),qT(d,p)):(Br(d),d.flags&=-16777217):(l.memoizedProps!==b&&fl(d),Br(d),d.flags&=-16777217),null;case 27:st(d),p=Me.current;var T=d.type;if(l!==null&&d.stateNode!=null)l.memoizedProps!==b&&fl(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return Br(d),null}l=we.current,cp(d)?vA(d):(l=q3(T,b,p),d.stateNode=l,fl(d))}return Br(d),null;case 5:if(st(d),p=d.type,l!==null&&d.stateNode!=null)l.memoizedProps!==b&&fl(d);else{if(!b){if(d.stateNode===null)throw Error(r(166));return Br(d),null}if(l=we.current,cp(d))vA(d);else{switch(T=my(Me.current),l){case 1:l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=T.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof b.is=="string"?T.createElement("select",{is:b.is}):T.createElement("select"),b.multiple?l.multiple=!0:b.size&&(l.size=b.size);break;default:l=typeof b.is=="string"?T.createElement(p,{is:b.is}):T.createElement(p)}}l[he]=d,l[de]=b;e:for(T=d.child;T!==null;){if(T.tag===5||T.tag===6)l.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===d)break e;for(;T.sibling===null;){if(T.return===null||T.return===d)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}d.stateNode=l;e:switch(ja(l,p,b),p){case"button":case"input":case"select":case"textarea":l=!!b.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&fl(d)}}return Br(d),d.flags&=-16777217,null;case 6:if(l&&d.stateNode!=null)l.memoizedProps!==b&&fl(d);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(l=Me.current,cp(d)){if(l=d.stateNode,p=d.memoizedProps,b=null,T=ai,T!==null)switch(T.tag){case 27:case 5:b=T.memoizedProps}l[he]=d,l=!!(l.nodeValue===p||b!==null&&b.suppressHydrationWarning===!0||P3(l.nodeValue,p)),l||Dc(d)}else l=my(l).createTextNode(b),l[he]=d,d.stateNode=l}return Br(d),null;case 13:if(b=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(T=cp(d),b!==null&&b.dehydrated!==null){if(l===null){if(!T)throw Error(r(318));if(T=d.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(r(317));T[he]=d}else dp(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Br(d),T=!1}else T=_A(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=T),T=!0;if(!T)return d.flags&256?(cl(d),d):(cl(d),null)}if(cl(d),(d.flags&128)!==0)return d.lanes=p,d;if(p=b!==null,l=l!==null&&l.memoizedState!==null,p){b=d.child,T=null,b.alternate!==null&&b.alternate.memoizedState!==null&&b.alternate.memoizedState.cachePool!==null&&(T=b.alternate.memoizedState.cachePool.pool);var F=null;b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(F=b.memoizedState.cachePool.pool),F!==T&&(b.flags|=2048)}return p!==l&&p&&(d.child.flags|=8192),ny(d,d.updateQueue),Br(d),null;case 4:return Ae(),l===null&&B_(d.stateNode.containerInfo),Br(d),null;case 10:return ll(d.type),Br(d),null;case 19:if(J(la),T=d.memoizedState,T===null)return Br(d),null;if(b=(d.flags&128)!==0,F=T.rendering,F===null)if(b)Ap(T,!1);else{if(Hr!==0||l!==null&&(l.flags&128)!==0)for(l=d.child;l!==null;){if(F=Xg(l),F!==null){for(d.flags|=128,Ap(T,!1),l=F.updateQueue,d.updateQueue=l,ny(d,l),d.subtreeFlags=0,l=p,p=d.child;p!==null;)yA(p,l),p=p.sibling;return re(la,la.current&1|2),d.child}l=l.sibling}T.tail!==null&&ce()>iy&&(d.flags|=128,b=!0,Ap(T,!1),d.lanes=4194304)}else{if(!b)if(l=Xg(F),l!==null){if(d.flags|=128,b=!0,l=l.updateQueue,d.updateQueue=l,ny(d,l),Ap(T,!0),T.tail===null&&T.tailMode==="hidden"&&!F.alternate&&!Jn)return Br(d),null}else 2*ce()-T.renderingStartTime>iy&&p!==536870912&&(d.flags|=128,b=!0,Ap(T,!1),d.lanes=4194304);T.isBackwards?(F.sibling=d.child,d.child=F):(l=T.last,l!==null?l.sibling=F:d.child=F,T.last=F)}return T.tail!==null?(d=T.tail,T.rendering=d,T.tail=d.sibling,T.renderingStartTime=ce(),d.sibling=null,l=la.current,re(la,b?l&1|2:l&1),d):(Br(d),null);case 22:case 23:return cl(d),U1(),b=d.memoizedState!==null,l!==null?l.memoizedState!==null!==b&&(d.flags|=8192):b&&(d.flags|=8192),b?(p&536870912)!==0&&(d.flags&128)===0&&(Br(d),d.subtreeFlags&6&&(d.flags|=8192)):Br(d),p=d.updateQueue,p!==null&&ny(d,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==p&&(d.flags|=2048),l!==null&&J(Pc),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),d.memoizedState.cache!==p&&(d.flags|=2048),ll(sa),Br(d),null;case 25:return null;case 30:return null}throw Error(r(156,d.tag))}function HB(l,d){switch(T1(d),d.tag){case 1:return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return ll(sa),Ae(),l=d.flags,(l&65536)!==0&&(l&128)===0?(d.flags=l&-65537|128,d):null;case 26:case 27:case 5:return st(d),null;case 13:if(cl(d),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(r(340));dp()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return J(la),null;case 4:return Ae(),null;case 10:return ll(d.type),null;case 22:case 23:return cl(d),U1(),l!==null&&J(Pc),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 24:return ll(sa),null;case 25:return null;default:return null}}function HT(l,d){switch(T1(d),d.tag){case 3:ll(sa),Ae();break;case 26:case 27:case 5:st(d);break;case 4:Ae();break;case 13:cl(d);break;case 19:J(la);break;case 10:ll(d.type);break;case 22:case 23:cl(d),U1(),l!==null&&J(Pc);break;case 24:ll(sa)}}function Tp(l,d){try{var p=d.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var T=b.next;p=T;do{if((p.tag&l)===l){b=void 0;var F=p.create,oe=p.inst;b=F(),oe.destroy=b}p=p.next}while(p!==T)}}catch(Se){_r(d,d.return,Se)}}function hu(l,d,p){try{var b=d.updateQueue,T=b!==null?b.lastEffect:null;if(T!==null){var F=T.next;b=F;do{if((b.tag&l)===l){var oe=b.inst,Se=oe.destroy;if(Se!==void 0){oe.destroy=void 0,T=d;var ze=p,ut=Se;try{ut()}catch(_t){_r(T,ze,_t)}}}b=b.next}while(b!==F)}}catch(_t){_r(d,d.return,_t)}}function VT(l){var d=l.updateQueue;if(d!==null){var p=l.stateNode;try{OA(d,p)}catch(b){_r(l,l.return,b)}}}function GT(l,d,p){p.props=Lc(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(b){_r(l,d,b)}}function Rp(l,d){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var b=l.stateNode;break;case 30:b=l.stateNode;break;default:b=l.stateNode}typeof p=="function"?l.refCleanup=p(b):p.current=b}}catch(T){_r(l,d,T)}}function bs(l,d){var p=l.ref,b=l.refCleanup;if(p!==null)if(typeof b=="function")try{b()}catch(T){_r(l,d,T)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(T){_r(l,d,T)}else p.current=null}function WT(l){var d=l.type,p=l.memoizedProps,b=l.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":p.autoFocus&&b.focus();break e;case"img":p.src?b.src=p.src:p.srcSet&&(b.srcset=p.srcSet)}}catch(T){_r(l,l.return,T)}}function g_(l,d,p){try{var b=l.stateNode;d7(b,l.type,p,d),b[de]=d}catch(T){_r(l,l.return,T)}}function KT(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&_u(l.type)||l.tag===4}function y_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||KT(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&_u(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function b_(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,d):(d=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,d.appendChild(l),p=p._reactRootContainer,p!=null||d.onclick!==null||(d.onclick=py));else if(b!==4&&(b===27&&_u(l.type)&&(p=l.stateNode,d=null),l=l.child,l!==null))for(b_(l,d,p),l=l.sibling;l!==null;)b_(l,d,p),l=l.sibling}function ry(l,d,p){var b=l.tag;if(b===5||b===6)l=l.stateNode,d?p.insertBefore(l,d):p.appendChild(l);else if(b!==4&&(b===27&&_u(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(ry(l,d,p),l=l.sibling;l!==null;)ry(l,d,p),l=l.sibling}function ZT(l){var d=l.stateNode,p=l.memoizedProps;try{for(var b=l.type,T=d.attributes;T.length;)d.removeAttributeNode(T[0]);ja(d,b,p),d[he]=l,d[de]=p}catch(F){_r(l,l.return,F)}}var hl=!1,Yr=!1,v_=!1,YT=typeof WeakSet=="function"?WeakSet:Set,va=null;function VB(l,d){if(l=l.containerInfo,q_=_y,l=ue(l),ve(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var b=p.getSelection&&p.getSelection();if(b&&b.rangeCount!==0){p=b.anchorNode;var T=b.anchorOffset,F=b.focusNode;b=b.focusOffset;try{p.nodeType,F.nodeType}catch{p=null;break e}var oe=0,Se=-1,ze=-1,ut=0,_t=0,kt=l,pt=null;t:for(;;){for(var mt;kt!==p||T!==0&&kt.nodeType!==3||(Se=oe+T),kt!==F||b!==0&&kt.nodeType!==3||(ze=oe+b),kt.nodeType===3&&(oe+=kt.nodeValue.length),(mt=kt.firstChild)!==null;)pt=kt,kt=mt;for(;;){if(kt===l)break t;if(pt===p&&++ut===T&&(Se=oe),pt===F&&++_t===b&&(ze=oe),(mt=kt.nextSibling)!==null)break;kt=pt,pt=kt.parentNode}kt=mt}p=Se===-1||ze===-1?null:{start:Se,end:ze}}else p=null}p=p||{start:0,end:0}}else p=null;for(H_={focusedElem:l,selectionRange:p},_y=!1,va=d;va!==null;)if(d=va,l=d.child,(d.subtreeFlags&1024)!==0&&l!==null)l.return=d,va=l;else for(;va!==null;){switch(d=va,F=d.alternate,l=d.flags,d.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&F!==null){l=void 0,p=d,T=F.memoizedProps,F=F.memoizedState,b=p.stateNode;try{var bn=Lc(p.type,T,p.elementType===p.type);l=b.getSnapshotBeforeUpdate(bn,F),b.__reactInternalSnapshotBeforeUpdate=l}catch(fn){_r(p,p.return,fn)}}break;case 3:if((l&1024)!==0){if(l=d.stateNode.containerInfo,p=l.nodeType,p===9)W_(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":W_(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=d.sibling,l!==null){l.return=d.return,va=l;break}va=d.return}}function XT(l,d,p){var b=p.flags;switch(p.tag){case 0:case 11:case 15:pu(l,p),b&4&&Tp(5,p);break;case 1:if(pu(l,p),b&4)if(l=p.stateNode,d===null)try{l.componentDidMount()}catch(oe){_r(p,p.return,oe)}else{var T=Lc(p.type,d.memoizedProps);d=d.memoizedState;try{l.componentDidUpdate(T,d,l.__reactInternalSnapshotBeforeUpdate)}catch(oe){_r(p,p.return,oe)}}b&64&&VT(p),b&512&&Rp(p,p.return);break;case 3:if(pu(l,p),b&64&&(l=p.updateQueue,l!==null)){if(d=null,p.child!==null)switch(p.child.tag){case 27:case 5:d=p.child.stateNode;break;case 1:d=p.child.stateNode}try{OA(l,d)}catch(oe){_r(p,p.return,oe)}}break;case 27:d===null&&b&4&&ZT(p);case 26:case 5:pu(l,p),d===null&&b&4&&WT(p),b&512&&Rp(p,p.return);break;case 12:pu(l,p);break;case 13:pu(l,p),b&4&&e3(l,p),b&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=e7.bind(null,p),b7(l,p))));break;case 22:if(b=p.memoizedState!==null||hl,!b){d=d!==null&&d.memoizedState!==null||Yr,T=hl;var F=Yr;hl=b,(Yr=d)&&!F?mu(l,p,(p.subtreeFlags&8772)!==0):pu(l,p),hl=T,Yr=F}break;case 30:break;default:pu(l,p)}}function JT(l){var d=l.alternate;d!==null&&(l.alternate=null,JT(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&Xt(d)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Pr=null,gi=!1;function pl(l,d,p){for(p=p.child;p!==null;)QT(l,d,p),p=p.sibling}function QT(l,d,p){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(Et,p)}catch{}switch(p.tag){case 26:Yr||bs(p,d),pl(l,d,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Yr||bs(p,d);var b=Pr,T=gi;_u(p.type)&&(Pr=p.stateNode,gi=!1),pl(l,d,p),Lp(p.stateNode),Pr=b,gi=T;break;case 5:Yr||bs(p,d);case 6:if(b=Pr,T=gi,Pr=null,pl(l,d,p),Pr=b,gi=T,Pr!==null)if(gi)try{(Pr.nodeType===9?Pr.body:Pr.nodeName==="HTML"?Pr.ownerDocument.body:Pr).removeChild(p.stateNode)}catch(F){_r(p,d,F)}else try{Pr.removeChild(p.stateNode)}catch(F){_r(p,d,F)}break;case 18:Pr!==null&&(gi?(l=Pr,z3(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Gp(l)):z3(Pr,p.stateNode));break;case 4:b=Pr,T=gi,Pr=p.stateNode.containerInfo,gi=!0,pl(l,d,p),Pr=b,gi=T;break;case 0:case 11:case 14:case 15:Yr||hu(2,p,d),Yr||hu(4,p,d),pl(l,d,p);break;case 1:Yr||(bs(p,d),b=p.stateNode,typeof b.componentWillUnmount=="function"&&GT(p,d,b)),pl(l,d,p);break;case 21:pl(l,d,p);break;case 22:Yr=(b=Yr)||p.memoizedState!==null,pl(l,d,p),Yr=b;break;default:pl(l,d,p)}}function e3(l,d){if(d.memoizedState===null&&(l=d.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Gp(l)}catch(p){_r(d,d.return,p)}}function GB(l){switch(l.tag){case 13:case 19:var d=l.stateNode;return d===null&&(d=l.stateNode=new YT),d;case 22:return l=l.stateNode,d=l._retryCache,d===null&&(d=l._retryCache=new YT),d;default:throw Error(r(435,l.tag))}}function w_(l,d){var p=GB(l);d.forEach(function(b){var T=t7.bind(null,l,b);p.has(b)||(p.add(b),b.then(T,T))})}function Mi(l,d){var p=d.deletions;if(p!==null)for(var b=0;b<p.length;b++){var T=p[b],F=l,oe=d,Se=oe;e:for(;Se!==null;){switch(Se.tag){case 27:if(_u(Se.type)){Pr=Se.stateNode,gi=!1;break e}break;case 5:Pr=Se.stateNode,gi=!1;break e;case 3:case 4:Pr=Se.stateNode.containerInfo,gi=!0;break e}Se=Se.return}if(Pr===null)throw Error(r(160));QT(F,oe,T),Pr=null,gi=!1,F=T.alternate,F!==null&&(F.return=null),T.return=null}if(d.subtreeFlags&13878)for(d=d.child;d!==null;)t3(d,l),d=d.sibling}var To=null;function t3(l,d){var p=l.alternate,b=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Mi(d,l),Pi(l),b&4&&(hu(3,l,l.return),Tp(3,l),hu(5,l,l.return));break;case 1:Mi(d,l),Pi(l),b&512&&(Yr||p===null||bs(p,p.return)),b&64&&hl&&(l=l.updateQueue,l!==null&&(b=l.callbacks,b!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?b:p.concat(b))));break;case 26:var T=To;if(Mi(d,l),Pi(l),b&512&&(Yr||p===null||bs(p,p.return)),b&4){var F=p!==null?p.memoizedState:null;if(b=l.memoizedState,p===null)if(b===null)if(l.stateNode===null){e:{b=l.type,p=l.memoizedProps,T=T.ownerDocument||T;t:switch(b){case"title":F=T.getElementsByTagName("title")[0],(!F||F[Vt]||F[he]||F.namespaceURI==="http://www.w3.org/2000/svg"||F.hasAttribute("itemprop"))&&(F=T.createElement(b),T.head.insertBefore(F,T.querySelector("head > title"))),ja(F,b,p),F[he]=l,Dn(F),b=F;break e;case"link":var oe=Z3("link","href",T).get(b+(p.href||""));if(oe){for(var Se=0;Se<oe.length;Se++)if(F=oe[Se],F.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&F.getAttribute("rel")===(p.rel==null?null:p.rel)&&F.getAttribute("title")===(p.title==null?null:p.title)&&F.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){oe.splice(Se,1);break t}}F=T.createElement(b),ja(F,b,p),T.head.appendChild(F);break;case"meta":if(oe=Z3("meta","content",T).get(b+(p.content||""))){for(Se=0;Se<oe.length;Se++)if(F=oe[Se],F.getAttribute("content")===(p.content==null?null:""+p.content)&&F.getAttribute("name")===(p.name==null?null:p.name)&&F.getAttribute("property")===(p.property==null?null:p.property)&&F.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&F.getAttribute("charset")===(p.charSet==null?null:p.charSet)){oe.splice(Se,1);break t}}F=T.createElement(b),ja(F,b,p),T.head.appendChild(F);break;default:throw Error(r(468,b))}F[he]=l,Dn(F),b=F}l.stateNode=b}else Y3(T,l.type,l.stateNode);else l.stateNode=K3(T,b,l.memoizedProps);else F!==b?(F===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):F.count--,b===null?Y3(T,l.type,l.stateNode):K3(T,b,l.memoizedProps)):b===null&&l.stateNode!==null&&g_(l,l.memoizedProps,p.memoizedProps)}break;case 27:Mi(d,l),Pi(l),b&512&&(Yr||p===null||bs(p,p.return)),p!==null&&b&4&&g_(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Mi(d,l),Pi(l),b&512&&(Yr||p===null||bs(p,p.return)),l.flags&32){T=l.stateNode;try{Yl(T,"")}catch(mt){_r(l,l.return,mt)}}b&4&&l.stateNode!=null&&(T=l.memoizedProps,g_(l,T,p!==null?p.memoizedProps:T)),b&1024&&(v_=!0);break;case 6:if(Mi(d,l),Pi(l),b&4){if(l.stateNode===null)throw Error(r(162));b=l.memoizedProps,p=l.stateNode;try{p.nodeValue=b}catch(mt){_r(l,l.return,mt)}}break;case 3:if(by=null,T=To,To=gy(d.containerInfo),Mi(d,l),To=T,Pi(l),b&4&&p!==null&&p.memoizedState.isDehydrated)try{Gp(d.containerInfo)}catch(mt){_r(l,l.return,mt)}v_&&(v_=!1,n3(l));break;case 4:b=To,To=gy(l.stateNode.containerInfo),Mi(d,l),Pi(l),To=b;break;case 12:Mi(d,l),Pi(l);break;case 13:Mi(d,l),Pi(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(k_=ce()),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,w_(l,b)));break;case 22:T=l.memoizedState!==null;var ze=p!==null&&p.memoizedState!==null,ut=hl,_t=Yr;if(hl=ut||T,Yr=_t||ze,Mi(d,l),Yr=_t,hl=ut,Pi(l),b&8192)e:for(d=l.stateNode,d._visibility=T?d._visibility&-2:d._visibility|1,T&&(p===null||ze||hl||Yr||$c(l)),p=null,d=l;;){if(d.tag===5||d.tag===26){if(p===null){ze=p=d;try{if(F=ze.stateNode,T)oe=F.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{Se=ze.stateNode;var kt=ze.memoizedProps.style,pt=kt!=null&&kt.hasOwnProperty("display")?kt.display:null;Se.style.display=pt==null||typeof pt=="boolean"?"":(""+pt).trim()}}catch(mt){_r(ze,ze.return,mt)}}}else if(d.tag===6){if(p===null){ze=d;try{ze.stateNode.nodeValue=T?"":ze.memoizedProps}catch(mt){_r(ze,ze.return,mt)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===l)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break e;for(;d.sibling===null;){if(d.return===null||d.return===l)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}b&4&&(b=l.updateQueue,b!==null&&(p=b.retryQueue,p!==null&&(b.retryQueue=null,w_(l,p))));break;case 19:Mi(d,l),Pi(l),b&4&&(b=l.updateQueue,b!==null&&(l.updateQueue=null,w_(l,b)));break;case 30:break;case 21:break;default:Mi(d,l),Pi(l)}}function Pi(l){var d=l.flags;if(d&2){try{for(var p,b=l.return;b!==null;){if(KT(b)){p=b;break}b=b.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var T=p.stateNode,F=y_(l);ry(l,F,T);break;case 5:var oe=p.stateNode;p.flags&32&&(Yl(oe,""),p.flags&=-33);var Se=y_(l);ry(l,Se,oe);break;case 3:case 4:var ze=p.stateNode.containerInfo,ut=y_(l);b_(l,ut,ze);break;default:throw Error(r(161))}}catch(_t){_r(l,l.return,_t)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function n3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var d=l;n3(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),l=l.sibling}}function pu(l,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)XT(l,d.alternate,d),d=d.sibling}function $c(l){for(l=l.child;l!==null;){var d=l;switch(d.tag){case 0:case 11:case 14:case 15:hu(4,d,d.return),$c(d);break;case 1:bs(d,d.return);var p=d.stateNode;typeof p.componentWillUnmount=="function"&&GT(d,d.return,p),$c(d);break;case 27:Lp(d.stateNode);case 26:case 5:bs(d,d.return),$c(d);break;case 22:d.memoizedState===null&&$c(d);break;case 30:$c(d);break;default:$c(d)}l=l.sibling}}function mu(l,d,p){for(p=p&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var b=d.alternate,T=l,F=d,oe=F.flags;switch(F.tag){case 0:case 11:case 15:mu(T,F,p),Tp(4,F);break;case 1:if(mu(T,F,p),b=F,T=b.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(ut){_r(b,b.return,ut)}if(b=F,T=b.updateQueue,T!==null){var Se=b.stateNode;try{var ze=T.shared.hiddenCallbacks;if(ze!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ze.length;T++)IA(ze[T],Se)}catch(ut){_r(b,b.return,ut)}}p&&oe&64&&VT(F),Rp(F,F.return);break;case 27:ZT(F);case 26:case 5:mu(T,F,p),p&&b===null&&oe&4&&WT(F),Rp(F,F.return);break;case 12:mu(T,F,p);break;case 13:mu(T,F,p),p&&oe&4&&e3(T,F);break;case 22:F.memoizedState===null&&mu(T,F,p),Rp(F,F.return);break;case 30:break;default:mu(T,F,p)}d=d.sibling}}function __(l,d){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(l=d.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&pp(p))}function x_(l,d){l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&pp(l))}function vs(l,d,p,b){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)r3(l,d,p,b),d=d.sibling}function r3(l,d,p,b){var T=d.flags;switch(d.tag){case 0:case 11:case 15:vs(l,d,p,b),T&2048&&Tp(9,d);break;case 1:vs(l,d,p,b);break;case 3:vs(l,d,p,b),T&2048&&(l=null,d.alternate!==null&&(l=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==l&&(d.refCount++,l!=null&&pp(l)));break;case 12:if(T&2048){vs(l,d,p,b),l=d.stateNode;try{var F=d.memoizedProps,oe=F.id,Se=F.onPostCommit;typeof Se=="function"&&Se(oe,d.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ze){_r(d,d.return,ze)}}else vs(l,d,p,b);break;case 13:vs(l,d,p,b);break;case 23:break;case 22:F=d.stateNode,oe=d.alternate,d.memoizedState!==null?F._visibility&2?vs(l,d,p,b):Np(l,d):F._visibility&2?vs(l,d,p,b):(F._visibility|=2,lf(l,d,p,b,(d.subtreeFlags&10256)!==0)),T&2048&&__(oe,d);break;case 24:vs(l,d,p,b),T&2048&&x_(d.alternate,d);break;default:vs(l,d,p,b)}}function lf(l,d,p,b,T){for(T=T&&(d.subtreeFlags&10256)!==0,d=d.child;d!==null;){var F=l,oe=d,Se=p,ze=b,ut=oe.flags;switch(oe.tag){case 0:case 11:case 15:lf(F,oe,Se,ze,T),Tp(8,oe);break;case 23:break;case 22:var _t=oe.stateNode;oe.memoizedState!==null?_t._visibility&2?lf(F,oe,Se,ze,T):Np(F,oe):(_t._visibility|=2,lf(F,oe,Se,ze,T)),T&&ut&2048&&__(oe.alternate,oe);break;case 24:lf(F,oe,Se,ze,T),T&&ut&2048&&x_(oe.alternate,oe);break;default:lf(F,oe,Se,ze,T)}d=d.sibling}}function Np(l,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var p=l,b=d,T=b.flags;switch(b.tag){case 22:Np(p,b),T&2048&&__(b.alternate,b);break;case 24:Np(p,b),T&2048&&x_(b.alternate,b);break;default:Np(p,b)}d=d.sibling}}var Ip=8192;function uf(l){if(l.subtreeFlags&Ip)for(l=l.child;l!==null;)a3(l),l=l.sibling}function a3(l){switch(l.tag){case 26:uf(l),l.flags&Ip&&l.memoizedState!==null&&I7(To,l.memoizedState,l.memoizedProps);break;case 5:uf(l);break;case 3:case 4:var d=To;To=gy(l.stateNode.containerInfo),uf(l),To=d;break;case 22:l.memoizedState===null&&(d=l.alternate,d!==null&&d.memoizedState!==null?(d=Ip,Ip=16777216,uf(l),Ip=d):uf(l));break;default:uf(l)}}function i3(l){var d=l.alternate;if(d!==null&&(l=d.child,l!==null)){d.child=null;do d=l.sibling,l.sibling=null,l=d;while(l!==null)}}function Op(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];va=b,s3(b,l)}i3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)o3(l),l=l.sibling}function o3(l){switch(l.tag){case 0:case 11:case 15:Op(l),l.flags&2048&&hu(9,l,l.return);break;case 3:Op(l);break;case 12:Op(l);break;case 22:var d=l.stateNode;l.memoizedState!==null&&d._visibility&2&&(l.return===null||l.return.tag!==13)?(d._visibility&=-3,ay(l)):Op(l);break;default:Op(l)}}function ay(l){var d=l.deletions;if((l.flags&16)!==0){if(d!==null)for(var p=0;p<d.length;p++){var b=d[p];va=b,s3(b,l)}i3(l)}for(l=l.child;l!==null;){switch(d=l,d.tag){case 0:case 11:case 15:hu(8,d,d.return),ay(d);break;case 22:p=d.stateNode,p._visibility&2&&(p._visibility&=-3,ay(d));break;default:ay(d)}l=l.sibling}}function s3(l,d){for(;va!==null;){var p=va;switch(p.tag){case 0:case 11:case 15:hu(8,p,d);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var b=p.memoizedState.cachePool.pool;b!=null&&b.refCount++}break;case 24:pp(p.memoizedState.cache)}if(b=p.child,b!==null)b.return=p,va=b;else e:for(p=l;va!==null;){b=va;var T=b.sibling,F=b.return;if(JT(b),b===p){va=null;break e}if(T!==null){T.return=F,va=T;break e}va=F}}}var WB={getCacheForType:function(l){var d=Ua(sa),p=d.data.get(l);return p===void 0&&(p=l(),d.data.set(l,p)),p}},KB=typeof WeakMap=="function"?WeakMap:Map,ir=0,Cr=null,zn=null,Wn=0,or=0,Fi=null,gu=!1,cf=!1,S_=!1,ml=0,Hr=0,yu=0,Bc=0,E_=0,ao=0,df=0,Dp=null,yi=null,C_=!1,k_=0,iy=1/0,oy=null,bu=null,Da=0,vu=null,ff=null,hf=0,A_=0,T_=null,l3=null,jp=0,R_=null;function Li(){if((ir&2)!==0&&Wn!==0)return Wn&-Wn;if(se.T!==null){var l=Qd;return l!==0?l:P_()}return q()}function u3(){ao===0&&(ao=(Wn&536870912)===0||Jn?yt():536870912);var l=ro.current;return l!==null&&(l.flags|=32),ao}function $i(l,d,p){(l===Cr&&(or===2||or===9)||l.cancelPendingCommit!==null)&&(pf(l,0),wu(l,Wn,ao,!1)),et(l,p),((ir&2)===0||l!==Cr)&&(l===Cr&&((ir&2)===0&&(Bc|=p),Hr===4&&wu(l,Wn,ao,!1)),ws(l))}function c3(l,d,p){if((ir&6)!==0)throw Error(r(327));var b=!p&&(d&124)===0&&(d&l.expiredLanes)===0||le(l,d),T=b?XB(l,d):O_(l,d,!0),F=b;do{if(T===0){cf&&!b&&wu(l,d,0,!1);break}else{if(p=l.current.alternate,F&&!ZB(p)){T=O_(l,d,!1),F=!1;continue}if(T===2){if(F=d,l.errorRecoveryDisabledLanes&F)var oe=0;else oe=l.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){d=oe;e:{var Se=l;T=Dp;var ze=Se.current.memoizedState.isDehydrated;if(ze&&(pf(Se,oe).flags|=256),oe=O_(Se,oe,!1),oe!==2){if(S_&&!ze){Se.errorRecoveryDisabledLanes|=F,Bc|=F,T=4;break e}F=yi,yi=T,F!==null&&(yi===null?yi=F:yi.push.apply(yi,F))}T=oe}if(F=!1,T!==2)continue}}if(T===1){pf(l,0),wu(l,d,0,!0);break}e:{switch(b=l,F=T,F){case 0:case 1:throw Error(r(345));case 4:if((d&4194048)!==d)break;case 6:wu(b,d,ao,!gu);break e;case 2:yi=null;break;case 3:case 5:break;default:throw Error(r(329))}if((d&62914560)===d&&(T=k_+300-ce(),10<T)){if(wu(b,d,ao,!gu),Ee(b,0,!0)!==0)break e;b.timeoutHandle=$3(d3.bind(null,b,p,yi,oy,C_,d,ao,Bc,df,gu,F,2,-0,0),T);break e}d3(b,p,yi,oy,C_,d,ao,Bc,df,gu,F,0,-0,0)}}break}while(!0);ws(l)}function d3(l,d,p,b,T,F,oe,Se,ze,ut,_t,kt,pt,mt){if(l.timeoutHandle=-1,kt=d.subtreeFlags,(kt&8192||(kt&16785408)===16785408)&&(zp={stylesheets:null,count:0,unsuspend:N7},a3(d),kt=O7(),kt!==null)){l.cancelPendingCommit=kt(b3.bind(null,l,d,F,p,b,T,oe,Se,ze,_t,1,pt,mt)),wu(l,F,oe,!ut);return}b3(l,d,F,p,b,T,oe,Se,ze)}function ZB(l){for(var d=l;;){var p=d.tag;if((p===0||p===11||p===15)&&d.flags&16384&&(p=d.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var b=0;b<p.length;b++){var T=p[b],F=T.getSnapshot;T=T.value;try{if(!za(F(),T))return!1}catch{return!1}}if(p=d.child,d.subtreeFlags&16384&&p!==null)p.return=d,d=p;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function wu(l,d,p,b){d&=~E_,d&=~Bc,l.suspendedLanes|=d,l.pingedLanes&=~d,b&&(l.warmLanes|=d),b=l.expirationTimes;for(var T=d;0<T;){var F=31-zt(T),oe=1<<F;b[F]=-1,T&=~oe}p!==0&&De(l,p,d)}function sy(){return(ir&6)===0?(Mp(0),!1):!0}function N_(){if(zn!==null){if(or===0)var l=zn.return;else l=zn,sl=jc=null,W1(l),of=null,Cp=0,l=zn;for(;l!==null;)HT(l.alternate,l),l=l.return;zn=null}}function pf(l,d){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,h7(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),N_(),Cr=l,zn=p=al(l.current,null),Wn=d,or=0,Fi=null,gu=!1,cf=le(l,d),S_=!1,df=ao=E_=Bc=yu=Hr=0,yi=Dp=null,C_=!1,(d&8)!==0&&(d|=d&32);var b=l.entangledLanes;if(b!==0)for(l=l.entanglements,b&=d;0<b;){var T=31-zt(b),F=1<<T;d|=l[T],b&=~F}return ml=d,yn(),p}function f3(l,d){Pn=null,se.H=Kg,d===gp||d===Lg?(d=RA(),or=3):d===kA?(d=RA(),or=4):or=d===NT?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,Fi=d,zn===null&&(Hr=1,Qg(l,cn(d,l.current)))}function h3(){var l=se.H;return se.H=Kg,l===null?Kg:l}function p3(){var l=se.A;return se.A=WB,l}function I_(){Hr=4,gu||(Wn&4194048)!==Wn&&ro.current!==null||(cf=!0),(yu&134217727)===0&&(Bc&134217727)===0||Cr===null||wu(Cr,Wn,ao,!1)}function O_(l,d,p){var b=ir;ir|=2;var T=h3(),F=p3();(Cr!==l||Wn!==d)&&(oy=null,pf(l,d)),d=!1;var oe=Hr;e:do try{if(or!==0&&zn!==null){var Se=zn,ze=Fi;switch(or){case 8:N_(),oe=6;break e;case 3:case 2:case 9:case 6:ro.current===null&&(d=!0);var ut=or;if(or=0,Fi=null,mf(l,Se,ze,ut),p&&cf){oe=0;break e}break;default:ut=or,or=0,Fi=null,mf(l,Se,ze,ut)}}YB(),oe=Hr;break}catch(_t){f3(l,_t)}while(!0);return d&&l.shellSuspendCounter++,sl=jc=null,ir=b,se.H=T,se.A=F,zn===null&&(Cr=null,Wn=0,yn()),oe}function YB(){for(;zn!==null;)m3(zn)}function XB(l,d){var p=ir;ir|=2;var b=h3(),T=p3();Cr!==l||Wn!==d?(oy=null,iy=ce()+500,pf(l,d)):cf=le(l,d);e:do try{if(or!==0&&zn!==null){d=zn;var F=Fi;t:switch(or){case 1:or=0,Fi=null,mf(l,d,F,1);break;case 2:case 9:if(AA(F)){or=0,Fi=null,g3(d);break}d=function(){or!==2&&or!==9||Cr!==l||(or=7),ws(l)},F.then(d,d);break e;case 3:or=7;break e;case 4:or=5;break e;case 7:AA(F)?(or=0,Fi=null,g3(d)):(or=0,Fi=null,mf(l,d,F,7));break;case 5:var oe=null;switch(zn.tag){case 26:oe=zn.memoizedState;case 5:case 27:var Se=zn;if(!oe||X3(oe)){or=0,Fi=null;var ze=Se.sibling;if(ze!==null)zn=ze;else{var ut=Se.return;ut!==null?(zn=ut,ly(ut)):zn=null}break t}}or=0,Fi=null,mf(l,d,F,5);break;case 6:or=0,Fi=null,mf(l,d,F,6);break;case 8:N_(),Hr=6;break e;default:throw Error(r(462))}}JB();break}catch(_t){f3(l,_t)}while(!0);return sl=jc=null,se.H=b,se.A=T,ir=p,zn!==null?0:(Cr=null,Wn=0,yn(),Hr)}function JB(){for(;zn!==null&&!Ce();)m3(zn)}function m3(l){var d=UT(l.alternate,l,ml);l.memoizedProps=l.pendingProps,d===null?ly(l):zn=d}function g3(l){var d=l,p=d.alternate;switch(d.tag){case 15:case 0:d=PT(p,d,d.pendingProps,d.type,void 0,Wn);break;case 11:d=PT(p,d,d.pendingProps,d.type.render,d.ref,Wn);break;case 5:W1(d);default:HT(p,d),d=zn=yA(d,ml),d=UT(p,d,ml)}l.memoizedProps=l.pendingProps,d===null?ly(l):zn=d}function mf(l,d,p,b){sl=jc=null,W1(d),of=null,Cp=0;var T=d.return;try{if(zB(l,T,d,p,Wn)){Hr=1,Qg(l,cn(p,l.current)),zn=null;return}}catch(F){if(T!==null)throw zn=T,F;Hr=1,Qg(l,cn(p,l.current)),zn=null;return}d.flags&32768?(Jn||b===1?l=!0:cf||(Wn&536870912)!==0?l=!1:(gu=l=!0,(b===2||b===9||b===3||b===6)&&(b=ro.current,b!==null&&b.tag===13&&(b.flags|=16384))),y3(d,l)):ly(d)}function ly(l){var d=l;do{if((d.flags&32768)!==0){y3(d,gu);return}l=d.return;var p=qB(d.alternate,d,ml);if(p!==null){zn=p;return}if(d=d.sibling,d!==null){zn=d;return}zn=d=l}while(d!==null);Hr===0&&(Hr=5)}function y3(l,d){do{var p=HB(l.alternate,l);if(p!==null){p.flags&=32767,zn=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!d&&(l=l.sibling,l!==null)){zn=l;return}zn=l=p}while(l!==null);Hr=6,zn=null}function b3(l,d,p,b,T,F,oe,Se,ze){l.cancelPendingCommit=null;do uy();while(Da!==0);if((ir&6)!==0)throw Error(r(327));if(d!==null){if(d===l.current)throw Error(r(177));if(F=d.lanes|d.childLanes,F|=Ia,pe(l,p,F,oe,Se,ze),l===Cr&&(zn=Cr=null,Wn=0),ff=d,vu=l,hf=p,A_=F,T_=T,l3=b,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,n7(Le,function(){return S3(),null})):(l.callbackNode=null,l.callbackPriority=0),b=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||b){b=se.T,se.T=null,T=ne.p,ne.p=2,oe=ir,ir|=4;try{VB(l,d,p)}finally{ir=oe,ne.p=T,se.T=b}}Da=1,v3(),w3(),_3()}}function v3(){if(Da===1){Da=0;var l=vu,d=ff,p=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||p){p=se.T,se.T=null;var b=ne.p;ne.p=2;var T=ir;ir|=4;try{t3(d,l);var F=H_,oe=ue(l.containerInfo),Se=F.focusedElem,ze=F.selectionRange;if(oe!==Se&&Se&&Se.ownerDocument&&te(Se.ownerDocument.documentElement,Se)){if(ze!==null&&ve(Se)){var ut=ze.start,_t=ze.end;if(_t===void 0&&(_t=ut),"selectionStart"in Se)Se.selectionStart=ut,Se.selectionEnd=Math.min(_t,Se.value.length);else{var kt=Se.ownerDocument||document,pt=kt&&kt.defaultView||window;if(pt.getSelection){var mt=pt.getSelection(),bn=Se.textContent.length,fn=Math.min(ze.start,bn),pr=ze.end===void 0?fn:Math.min(ze.end,bn);!mt.extend&&fn>pr&&(oe=pr,pr=fn,fn=oe);var nt=Z(Se,fn),Ze=Z(Se,pr);if(nt&&Ze&&(mt.rangeCount!==1||mt.anchorNode!==nt.node||mt.anchorOffset!==nt.offset||mt.focusNode!==Ze.node||mt.focusOffset!==Ze.offset)){var lt=kt.createRange();lt.setStart(nt.node,nt.offset),mt.removeAllRanges(),fn>pr?(mt.addRange(lt),mt.extend(Ze.node,Ze.offset)):(lt.setEnd(Ze.node,Ze.offset),mt.addRange(lt))}}}}for(kt=[],mt=Se;mt=mt.parentNode;)mt.nodeType===1&&kt.push({element:mt,left:mt.scrollLeft,top:mt.scrollTop});for(typeof Se.focus=="function"&&Se.focus(),Se=0;Se<kt.length;Se++){var St=kt[Se];St.element.scrollLeft=St.left,St.element.scrollTop=St.top}}_y=!!q_,H_=q_=null}finally{ir=T,ne.p=b,se.T=p}}l.current=d,Da=2}}function w3(){if(Da===2){Da=0;var l=vu,d=ff,p=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||p){p=se.T,se.T=null;var b=ne.p;ne.p=2;var T=ir;ir|=4;try{XT(l,d.alternate,d)}finally{ir=T,ne.p=b,se.T=p}}Da=3}}function _3(){if(Da===4||Da===3){Da=0,Ne();var l=vu,d=ff,p=hf,b=l3;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Da=5:(Da=0,ff=vu=null,x3(l,l.pendingLanes));var T=l.pendingLanes;if(T===0&&(bu=null),ye(p),d=d.stateNode,Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(Et,d,void 0,(d.current.flags&128)===128)}catch{}if(b!==null){d=se.T,T=ne.p,ne.p=2,se.T=null;try{for(var F=l.onRecoverableError,oe=0;oe<b.length;oe++){var Se=b[oe];F(Se.value,{componentStack:Se.stack})}}finally{se.T=d,ne.p=T}}(hf&3)!==0&&uy(),ws(l),T=l.pendingLanes,(p&4194090)!==0&&(T&42)!==0?l===R_?jp++:(jp=0,R_=l):jp=0,Mp(0)}}function x3(l,d){(l.pooledCacheLanes&=d)===0&&(d=l.pooledCache,d!=null&&(l.pooledCache=null,pp(d)))}function uy(l){return v3(),w3(),_3(),S3()}function S3(){if(Da!==5)return!1;var l=vu,d=A_;A_=0;var p=ye(hf),b=se.T,T=ne.p;try{ne.p=32>p?32:p,se.T=null,p=T_,T_=null;var F=vu,oe=hf;if(Da=0,ff=vu=null,hf=0,(ir&6)!==0)throw Error(r(331));var Se=ir;if(ir|=4,o3(F.current),r3(F,F.current,oe,p),ir=Se,Mp(0,!1),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(Et,F)}catch{}return!0}finally{ne.p=T,se.T=b,x3(l,d)}}function E3(l,d,p){d=cn(p,d),d=s_(l.stateNode,d,2),l=uu(l,d,2),l!==null&&(et(l,2),ws(l))}function _r(l,d,p){if(l.tag===3)E3(l,l,p);else for(;d!==null;){if(d.tag===3){E3(d,l,p);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(bu===null||!bu.has(b))){l=cn(p,l),p=TT(2),b=uu(d,p,2),b!==null&&(RT(p,b,d,l),et(b,2),ws(b));break}}d=d.return}}function D_(l,d,p){var b=l.pingCache;if(b===null){b=l.pingCache=new KB;var T=new Set;b.set(d,T)}else T=b.get(d),T===void 0&&(T=new Set,b.set(d,T));T.has(p)||(S_=!0,T.add(p),l=QB.bind(null,l,d,p),d.then(l,l))}function QB(l,d,p){var b=l.pingCache;b!==null&&b.delete(d),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Cr===l&&(Wn&p)===p&&(Hr===4||Hr===3&&(Wn&62914560)===Wn&&300>ce()-k_?(ir&2)===0&&pf(l,0):E_|=p,df===Wn&&(df=0)),ws(l)}function C3(l,d){d===0&&(d=P()),l=Ao(l,d),l!==null&&(et(l,d),ws(l))}function e7(l){var d=l.memoizedState,p=0;d!==null&&(p=d.retryLane),C3(l,p)}function t7(l,d){var p=0;switch(l.tag){case 13:var b=l.stateNode,T=l.memoizedState;T!==null&&(p=T.retryLane);break;case 19:b=l.stateNode;break;case 22:b=l.stateNode._retryCache;break;default:throw Error(r(314))}b!==null&&b.delete(d),C3(l,p)}function n7(l,d){return Te(l,d)}var cy=null,gf=null,j_=!1,dy=!1,M_=!1,zc=0;function ws(l){l!==gf&&l.next===null&&(gf===null?cy=gf=l:gf=gf.next=l),dy=!0,j_||(j_=!0,a7())}function Mp(l,d){if(!M_&&dy){M_=!0;do for(var p=!1,b=cy;b!==null;){if(l!==0){var T=b.pendingLanes;if(T===0)var F=0;else{var oe=b.suspendedLanes,Se=b.pingedLanes;F=(1<<31-zt(42|l)+1)-1,F&=T&~(oe&~Se),F=F&201326741?F&201326741|1:F?F|2:0}F!==0&&(p=!0,R3(b,F))}else F=Wn,F=Ee(b,b===Cr?F:0,b.cancelPendingCommit!==null||b.timeoutHandle!==-1),(F&3)===0||le(b,F)||(p=!0,R3(b,F));b=b.next}while(p);M_=!1}}function r7(){k3()}function k3(){dy=j_=!1;var l=0;zc!==0&&(f7()&&(l=zc),zc=0);for(var d=ce(),p=null,b=cy;b!==null;){var T=b.next,F=A3(b,d);F===0?(b.next=null,p===null?cy=T:p.next=T,T===null&&(gf=p)):(p=b,(l!==0||(F&3)!==0)&&(dy=!0)),b=T}Mp(l)}function A3(l,d){for(var p=l.suspendedLanes,b=l.pingedLanes,T=l.expirationTimes,F=l.pendingLanes&-62914561;0<F;){var oe=31-zt(F),Se=1<<oe,ze=T[oe];ze===-1?((Se&p)===0||(Se&b)!==0)&&(T[oe]=ct(Se,d)):ze<=d&&(l.expiredLanes|=Se),F&=~Se}if(d=Cr,p=Wn,p=Ee(l,l===d?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b=l.callbackNode,p===0||l===d&&(or===2||or===9)||l.cancelPendingCommit!==null)return b!==null&&b!==null&&z(b),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||le(l,p)){if(d=p&-p,d===l.callbackPriority)return d;switch(b!==null&&z(b),ye(p)){case 2:case 8:p=_e;break;case 32:p=Le;break;case 268435456:p=Ve;break;default:p=Le}return b=T3.bind(null,l),p=Te(p,b),l.callbackPriority=d,l.callbackNode=p,d}return b!==null&&b!==null&&z(b),l.callbackPriority=2,l.callbackNode=null,2}function T3(l,d){if(Da!==0&&Da!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(uy()&&l.callbackNode!==p)return null;var b=Wn;return b=Ee(l,l===Cr?b:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),b===0?null:(c3(l,b,d),A3(l,ce()),l.callbackNode!=null&&l.callbackNode===p?T3.bind(null,l):null)}function R3(l,d){if(uy())return null;c3(l,d,!0)}function a7(){p7(function(){(ir&6)!==0?Te(X,r7):k3()})}function P_(){return zc===0&&(zc=yt()),zc}function N3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:Zs(""+l)}function I3(l,d){var p=d.ownerDocument.createElement("input");return p.name=d.name,p.value=d.value,l.id&&p.setAttribute("form",l.id),d.parentNode.insertBefore(p,d),l=new FormData(l),p.parentNode.removeChild(p),l}function i7(l,d,p,b,T){if(d==="submit"&&p&&p.stateNode===T){var F=N3((T[de]||null).action),oe=b.submitter;oe&&(d=(d=oe[de]||null)?N3(d.formAction):oe.getAttribute("formAction"),d!==null&&(F=d,oe=null));var Se=new Md("action","action",null,b,T);l.push({event:Se,listeners:[{instance:null,listener:function(){if(b.defaultPrevented){if(zc!==0){var ze=oe?I3(T,oe):new FormData(T);n_(p,{pending:!0,data:ze,method:T.method,action:F},null,ze)}}else typeof F=="function"&&(Se.preventDefault(),ze=oe?I3(T,oe):new FormData(T),n_(p,{pending:!0,data:ze,method:T.method,action:F},F,ze))},currentTarget:T}]})}}for(var F_=0;F_<qt.length;F_++){var L_=qt[F_],o7=L_.toLowerCase(),s7=L_[0].toUpperCase()+L_.slice(1);It(o7,"on"+s7)}It(dt,"onAnimationEnd"),It(gt,"onAnimationIteration"),It(bt,"onAnimationStart"),It("dblclick","onDoubleClick"),It("focusin","onFocus"),It("focusout","onBlur"),It(wt,"onTransitionRun"),It(jt,"onTransitionStart"),It(Ut,"onTransitionCancel"),It(Nt,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pp));function O3(l,d){d=(d&4)!==0;for(var p=0;p<l.length;p++){var b=l[p],T=b.event;b=b.listeners;e:{var F=void 0;if(d)for(var oe=b.length-1;0<=oe;oe--){var Se=b[oe],ze=Se.instance,ut=Se.currentTarget;if(Se=Se.listener,ze!==F&&T.isPropagationStopped())break e;F=Se,T.currentTarget=ut;try{F(T)}catch(_t){Jg(_t)}T.currentTarget=null,F=ze}else for(oe=0;oe<b.length;oe++){if(Se=b[oe],ze=Se.instance,ut=Se.currentTarget,Se=Se.listener,ze!==F&&T.isPropagationStopped())break e;F=Se,T.currentTarget=ut;try{F(T)}catch(_t){Jg(_t)}T.currentTarget=null,F=ze}}}}function Un(l,d){var p=d[it];p===void 0&&(p=d[it]=new Set);var b=l+"__bubble";p.has(b)||(D3(d,l,2,!1),p.add(b))}function $_(l,d,p){var b=0;d&&(b|=4),D3(p,l,b,d)}var fy="_reactListening"+Math.random().toString(36).slice(2);function B_(l){if(!l[fy]){l[fy]=!0,ei.forEach(function(p){p!=="selectionchange"&&(l7.has(p)||$_(p,!1,l),$_(p,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[fy]||(d[fy]=!0,$_("selectionchange",!1,d))}}function D3(l,d,p,b){switch(rR(d)){case 2:var T=M7;break;case 8:T=P7;break;default:T=ex}p=T.bind(null,d,p,l),T=void 0,!Yh||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(T=!0),b?T!==void 0?l.addEventListener(d,p,{capture:!0,passive:T}):l.addEventListener(d,p,!0):T!==void 0?l.addEventListener(d,p,{passive:T}):l.addEventListener(d,p,!1)}function z_(l,d,p,b,T){var F=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var oe=b.tag;if(oe===3||oe===4){var Se=b.stateNode.containerInfo;if(Se===T)break;if(oe===4)for(oe=b.return;oe!==null;){var ze=oe.tag;if((ze===3||ze===4)&&oe.stateNode.containerInfo===T)return;oe=oe.return}for(;Se!==null;){if(oe=Tn(Se),oe===null)return;if(ze=oe.tag,ze===5||ze===6||ze===26||ze===27){b=F=oe;continue e}Se=Se.parentNode}}b=b.return}Jl(function(){var ut=F,_t=Dd(p),kt=[];e:{var pt=$t.get(l);if(pt!==void 0){var mt=Md,bn=l;switch(l){case"keypress":if(tu(p)===0)break e;case"keydown":case"keyup":mt=qd;break;case"focusin":bn="focus",mt=nu;break;case"focusout":bn="blur",mt=nu;break;case"beforeblur":case"afterblur":mt=nu;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":mt=Ld;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":mt=_g;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":mt=rp;break;case dt:case gt:case bt:mt=xg;break;case Nt:mt=ap;break;case"scroll":case"scrollend":mt=Pd;break;case"wheel":mt=Vd;break;case"copy":case"cut":case"paste":mt=zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":mt=np;break;case"toggle":case"beforetoggle":mt=Cg}var fn=(d&4)!==0,pr=!fn&&(l==="scroll"||l==="scrollend"),nt=fn?pt!==null?pt+"Capture":null:pt;fn=[];for(var Ze=ut,lt;Ze!==null;){var St=Ze;if(lt=St.stateNode,St=St.tag,St!==5&&St!==26&&St!==27||lt===null||nt===null||(St=Js(Ze,nt),St!=null&&fn.push(Fp(Ze,St,lt))),pr)break;Ze=Ze.return}0<fn.length&&(pt=new mt(pt,bn,null,p,_t),kt.push({event:pt,listeners:fn}))}}if((d&7)===0){e:{if(pt=l==="mouseover"||l==="pointerover",mt=l==="mouseout"||l==="pointerout",pt&&p!==Xi&&(bn=p.relatedTarget||p.fromElement)&&(Tn(bn)||bn[Fe]))break e;if((mt||pt)&&(pt=_t.window===_t?_t:(pt=_t.ownerDocument)?pt.defaultView||pt.parentWindow:window,mt?(bn=p.relatedTarget||p.toElement,mt=ut,bn=bn?Tn(bn):null,bn!==null&&(pr=i(bn),fn=bn.tag,bn!==pr||fn!==5&&fn!==27&&fn!==6)&&(bn=null)):(mt=null,bn=ut),mt!==bn)){if(fn=Ld,St="onMouseLeave",nt="onMouseEnter",Ze="mouse",(l==="pointerout"||l==="pointerover")&&(fn=np,St="onPointerLeave",nt="onPointerEnter",Ze="pointer"),pr=mt==null?pt:cr(mt),lt=bn==null?pt:cr(bn),pt=new fn(St,Ze+"leave",mt,p,_t),pt.target=pr,pt.relatedTarget=lt,St=null,Tn(_t)===ut&&(fn=new fn(nt,Ze+"enter",bn,p,_t),fn.target=lt,fn.relatedTarget=pr,St=fn),pr=St,mt&&bn)t:{for(fn=mt,nt=bn,Ze=0,lt=fn;lt;lt=yf(lt))Ze++;for(lt=0,St=nt;St;St=yf(St))lt++;for(;0<Ze-lt;)fn=yf(fn),Ze--;for(;0<lt-Ze;)nt=yf(nt),lt--;for(;Ze--;){if(fn===nt||nt!==null&&fn===nt.alternate)break t;fn=yf(fn),nt=yf(nt)}fn=null}else fn=null;mt!==null&&j3(kt,pt,mt,fn,!1),bn!==null&&pr!==null&&j3(kt,pr,bn,fn,!0)}}e:{if(pt=ut?cr(ut):window,mt=pt.nodeName&&pt.nodeName.toLowerCase(),mt==="select"||mt==="input"&&pt.type==="file")var Qt=Tc;else if(Kd(pt))if(Qi)Qt=iu;else{Qt=rl;var Ln=Ig}else mt=pt.nodeName,!mt||mt.toLowerCase()!=="input"||pt.type!=="checkbox"&&pt.type!=="radio"?ut&&Zh(ut.elementType)&&(Qt=Tc):Qt=up;if(Qt&&(Qt=Qt(l,ut))){lp(kt,Qt,p,_t);break e}Ln&&Ln(l,pt,ut),l==="focusout"&&ut&&pt.type==="number"&&ut.memoizedProps.value!=null&&Kl(pt,"number",pt.value)}switch(Ln=ut?cr(ut):window,l){case"focusin":(Kd(Ln)||Ln.contentEditable==="true")&&($e=Ln,We=ut,Ye=null);break;case"focusout":Ye=We=$e=null;break;case"mousedown":tt=!0;break;case"contextmenu":case"mouseup":case"dragend":tt=!1,qe(kt,p,_t);break;case"selectionchange":if(je)break;case"keydown":case"keyup":qe(kt,p,_t)}var on;if(kc)e:{switch(l){case"compositionstart":var mn="onCompositionStart";break e;case"compositionend":mn="onCompositionEnd";break e;case"compositionupdate":mn="onCompositionUpdate";break e}mn=void 0}else nl?sp(l,p)&&(mn="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(mn="onCompositionStart");mn&&(Gd&&p.locale!=="ko"&&(nl||mn!=="onCompositionStart"?mn==="onCompositionEnd"&&nl&&(on=eu()):(Ji=_t,jd="value"in Ji?Ji.value:Ji.textContent,nl=!0)),Ln=hy(ut,mn),0<Ln.length&&(mn=new Ud(mn,l,null,p,_t),kt.push({event:mn,listeners:Ln}),on?mn.data=on:(on=Ag(p),on!==null&&(mn.data=on)))),(on=_1?Tg(l,p):x1(l,p))&&(mn=hy(ut,"onBeforeInput"),0<mn.length&&(Ln=new Ud("onBeforeInput","beforeinput",null,p,_t),kt.push({event:Ln,listeners:mn}),Ln.data=on)),i7(kt,l,ut,p,_t)}O3(kt,d)})}function Fp(l,d,p){return{instance:l,listener:d,currentTarget:p}}function hy(l,d){for(var p=d+"Capture",b=[];l!==null;){var T=l,F=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||F===null||(T=Js(l,p),T!=null&&b.unshift(Fp(l,T,F)),T=Js(l,d),T!=null&&b.push(Fp(l,T,F))),l.tag===3)return b;l=l.return}return[]}function yf(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function j3(l,d,p,b,T){for(var F=d._reactName,oe=[];p!==null&&p!==b;){var Se=p,ze=Se.alternate,ut=Se.stateNode;if(Se=Se.tag,ze!==null&&ze===b)break;Se!==5&&Se!==26&&Se!==27||ut===null||(ze=ut,T?(ut=Js(p,F),ut!=null&&oe.unshift(Fp(p,ut,ze))):T||(ut=Js(p,F),ut!=null&&oe.push(Fp(p,ut,ze)))),p=p.return}oe.length!==0&&l.push({event:d,listeners:oe})}var u7=/\r\n?/g,c7=/\u0000|\uFFFD/g;function M3(l){return(typeof l=="string"?l:""+l).replace(u7,`
`).replace(c7,"")}function P3(l,d){return d=M3(d),M3(l)===d}function py(){}function hr(l,d,p,b,T,F){switch(p){case"children":typeof b=="string"?d==="body"||d==="textarea"&&b===""||Yl(l,b):(typeof b=="number"||typeof b=="bigint")&&d!=="body"&&Yl(l,""+b);break;case"className":Gs(l,"class",b);break;case"tabIndex":Gs(l,"tabindex",b);break;case"dir":case"role":case"viewBox":case"width":case"height":Gs(l,p,b);break;case"style":vg(l,b,F);break;case"data":if(d!=="object"){Gs(l,"data",b);break}case"src":case"href":if(b===""&&(d!=="a"||p!=="href")){l.removeAttribute(p);break}if(b==null||typeof b=="function"||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=Zs(""+b),l.setAttribute(p,b);break;case"action":case"formAction":if(typeof b=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof F=="function"&&(p==="formAction"?(d!=="input"&&hr(l,d,"name",T.name,T,null),hr(l,d,"formEncType",T.formEncType,T,null),hr(l,d,"formMethod",T.formMethod,T,null),hr(l,d,"formTarget",T.formTarget,T,null)):(hr(l,d,"encType",T.encType,T,null),hr(l,d,"method",T.method,T,null),hr(l,d,"target",T.target,T,null)));if(b==null||typeof b=="symbol"||typeof b=="boolean"){l.removeAttribute(p);break}b=Zs(""+b),l.setAttribute(p,b);break;case"onClick":b!=null&&(l.onclick=py);break;case"onScroll":b!=null&&Un("scroll",l);break;case"onScrollEnd":b!=null&&Un("scrollend",l);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"multiple":l.multiple=b&&typeof b!="function"&&typeof b!="symbol";break;case"muted":l.muted=b&&typeof b!="function"&&typeof b!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(b==null||typeof b=="function"||typeof b=="boolean"||typeof b=="symbol"){l.removeAttribute("xlink:href");break}p=Zs(""+b),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""+b):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":b&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":b===!0?l.setAttribute(p,""):b!==!1&&b!=null&&typeof b!="function"&&typeof b!="symbol"?l.setAttribute(p,b):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":b!=null&&typeof b!="function"&&typeof b!="symbol"&&!isNaN(b)&&1<=b?l.setAttribute(p,b):l.removeAttribute(p);break;case"rowSpan":case"start":b==null||typeof b=="function"||typeof b=="symbol"||isNaN(b)?l.removeAttribute(p):l.setAttribute(p,b);break;case"popover":Un("beforetoggle",l),Un("toggle",l),Co(l,"popover",b);break;case"xlinkActuate":Oi(l,"http://www.w3.org/1999/xlink","xlink:actuate",b);break;case"xlinkArcrole":Oi(l,"http://www.w3.org/1999/xlink","xlink:arcrole",b);break;case"xlinkRole":Oi(l,"http://www.w3.org/1999/xlink","xlink:role",b);break;case"xlinkShow":Oi(l,"http://www.w3.org/1999/xlink","xlink:show",b);break;case"xlinkTitle":Oi(l,"http://www.w3.org/1999/xlink","xlink:title",b);break;case"xlinkType":Oi(l,"http://www.w3.org/1999/xlink","xlink:type",b);break;case"xmlBase":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:base",b);break;case"xmlLang":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:lang",b);break;case"xmlSpace":Oi(l,"http://www.w3.org/XML/1998/namespace","xml:space",b);break;case"is":Co(l,"is",b);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=ni.get(p)||p,Co(l,p,b))}}function U_(l,d,p,b,T,F){switch(p){case"style":vg(l,b,F);break;case"dangerouslySetInnerHTML":if(b!=null){if(typeof b!="object"||!("__html"in b))throw Error(r(61));if(p=b.__html,p!=null){if(T.children!=null)throw Error(r(60));l.innerHTML=p}}break;case"children":typeof b=="string"?Yl(l,b):(typeof b=="number"||typeof b=="bigint")&&Yl(l,""+b);break;case"onScroll":b!=null&&Un("scroll",l);break;case"onScrollEnd":b!=null&&Un("scrollend",l);break;case"onClick":b!=null&&(l.onclick=py);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!os.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(T=p.endsWith("Capture"),d=p.slice(2,T?p.length-7:void 0),F=l[de]||null,F=F!=null?F[p]:null,typeof F=="function"&&l.removeEventListener(d,F,T),typeof b=="function")){typeof F!="function"&&F!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(d,b,T);break e}p in l?l[p]=b:b===!0?l.setAttribute(p,""):Co(l,p,b)}}}function ja(l,d,p){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Un("error",l),Un("load",l);var b=!1,T=!1,F;for(F in p)if(p.hasOwnProperty(F)){var oe=p[F];if(oe!=null)switch(F){case"src":b=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:hr(l,d,F,oe,p,null)}}T&&hr(l,d,"srcSet",p.srcSet,p,null),b&&hr(l,d,"src",p.src,p,null);return;case"input":Un("invalid",l);var Se=F=oe=T=null,ze=null,ut=null;for(b in p)if(p.hasOwnProperty(b)){var _t=p[b];if(_t!=null)switch(b){case"name":T=_t;break;case"type":oe=_t;break;case"checked":ze=_t;break;case"defaultChecked":ut=_t;break;case"value":F=_t;break;case"defaultValue":Se=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(r(137,d));break;default:hr(l,d,b,_t,p,null)}}Wh(l,F,Se,ze,ut,oe,T,!1),ds(l);return;case"select":Un("invalid",l),b=oe=F=null;for(T in p)if(p.hasOwnProperty(T)&&(Se=p[T],Se!=null))switch(T){case"value":F=Se;break;case"defaultValue":oe=Se;break;case"multiple":b=Se;default:hr(l,d,T,Se,p,null)}d=F,p=oe,l.multiple=!!b,d!=null?Ks(l,!!b,d,!1):p!=null&&Ks(l,!!b,p,!0);return;case"textarea":Un("invalid",l),F=T=b=null;for(oe in p)if(p.hasOwnProperty(oe)&&(Se=p[oe],Se!=null))switch(oe){case"value":b=Se;break;case"defaultValue":T=Se;break;case"children":F=Se;break;case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(91));break;default:hr(l,d,oe,Se,p,null)}Kh(l,b,T,F),ds(l);return;case"option":for(ze in p)if(p.hasOwnProperty(ze)&&(b=p[ze],b!=null))switch(ze){case"selected":l.selected=b&&typeof b!="function"&&typeof b!="symbol";break;default:hr(l,d,ze,b,p,null)}return;case"dialog":Un("beforetoggle",l),Un("toggle",l),Un("cancel",l),Un("close",l);break;case"iframe":case"object":Un("load",l);break;case"video":case"audio":for(b=0;b<Pp.length;b++)Un(Pp[b],l);break;case"image":Un("error",l),Un("load",l);break;case"details":Un("toggle",l);break;case"embed":case"source":case"link":Un("error",l),Un("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ut in p)if(p.hasOwnProperty(ut)&&(b=p[ut],b!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,d));default:hr(l,d,ut,b,p,null)}return;default:if(Zh(d)){for(_t in p)p.hasOwnProperty(_t)&&(b=p[_t],b!==void 0&&U_(l,d,_t,b,p,void 0));return}}for(Se in p)p.hasOwnProperty(Se)&&(b=p[Se],b!=null&&hr(l,d,Se,b,p,null))}function d7(l,d,p,b){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,F=null,oe=null,Se=null,ze=null,ut=null,_t=null;for(mt in p){var kt=p[mt];if(p.hasOwnProperty(mt)&&kt!=null)switch(mt){case"checked":break;case"value":break;case"defaultValue":ze=kt;default:b.hasOwnProperty(mt)||hr(l,d,mt,null,b,kt)}}for(var pt in b){var mt=b[pt];if(kt=p[pt],b.hasOwnProperty(pt)&&(mt!=null||kt!=null))switch(pt){case"type":F=mt;break;case"name":T=mt;break;case"checked":ut=mt;break;case"defaultChecked":_t=mt;break;case"value":oe=mt;break;case"defaultValue":Se=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,d));break;default:mt!==kt&&hr(l,d,pt,mt,b,kt)}}Wl(l,oe,Se,ze,ut,_t,F,T);return;case"select":mt=oe=Se=pt=null;for(F in p)if(ze=p[F],p.hasOwnProperty(F)&&ze!=null)switch(F){case"value":break;case"multiple":mt=ze;default:b.hasOwnProperty(F)||hr(l,d,F,null,b,ze)}for(T in b)if(F=b[T],ze=p[T],b.hasOwnProperty(T)&&(F!=null||ze!=null))switch(T){case"value":pt=F;break;case"defaultValue":Se=F;break;case"multiple":oe=F;default:F!==ze&&hr(l,d,T,F,b,ze)}d=Se,p=oe,b=mt,pt!=null?Ks(l,!!p,pt,!1):!!b!=!!p&&(d!=null?Ks(l,!!p,d,!0):Ks(l,!!p,p?[]:"",!1));return;case"textarea":mt=pt=null;for(Se in p)if(T=p[Se],p.hasOwnProperty(Se)&&T!=null&&!b.hasOwnProperty(Se))switch(Se){case"value":break;case"children":break;default:hr(l,d,Se,null,b,T)}for(oe in b)if(T=b[oe],F=p[oe],b.hasOwnProperty(oe)&&(T!=null||F!=null))switch(oe){case"value":pt=T;break;case"defaultValue":mt=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:T!==F&&hr(l,d,oe,T,b,F)}Zl(l,pt,mt);return;case"option":for(var bn in p)if(pt=p[bn],p.hasOwnProperty(bn)&&pt!=null&&!b.hasOwnProperty(bn))switch(bn){case"selected":l.selected=!1;break;default:hr(l,d,bn,null,b,pt)}for(ze in b)if(pt=b[ze],mt=p[ze],b.hasOwnProperty(ze)&&pt!==mt&&(pt!=null||mt!=null))switch(ze){case"selected":l.selected=pt&&typeof pt!="function"&&typeof pt!="symbol";break;default:hr(l,d,ze,pt,b,mt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var fn in p)pt=p[fn],p.hasOwnProperty(fn)&&pt!=null&&!b.hasOwnProperty(fn)&&hr(l,d,fn,null,b,pt);for(ut in b)if(pt=b[ut],mt=p[ut],b.hasOwnProperty(ut)&&pt!==mt&&(pt!=null||mt!=null))switch(ut){case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(r(137,d));break;default:hr(l,d,ut,pt,b,mt)}return;default:if(Zh(d)){for(var pr in p)pt=p[pr],p.hasOwnProperty(pr)&&pt!==void 0&&!b.hasOwnProperty(pr)&&U_(l,d,pr,void 0,b,pt);for(_t in b)pt=b[_t],mt=p[_t],!b.hasOwnProperty(_t)||pt===mt||pt===void 0&&mt===void 0||U_(l,d,_t,pt,b,mt);return}}for(var nt in p)pt=p[nt],p.hasOwnProperty(nt)&&pt!=null&&!b.hasOwnProperty(nt)&&hr(l,d,nt,null,b,pt);for(kt in b)pt=b[kt],mt=p[kt],!b.hasOwnProperty(kt)||pt===mt||pt==null&&mt==null||hr(l,d,kt,pt,b,mt)}var q_=null,H_=null;function my(l){return l.nodeType===9?l:l.ownerDocument}function F3(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L3(l,d){if(l===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&d==="foreignObject"?0:l}function V_(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var G_=null;function f7(){var l=window.event;return l&&l.type==="popstate"?l===G_?!1:(G_=l,!0):(G_=null,!1)}var $3=typeof setTimeout=="function"?setTimeout:void 0,h7=typeof clearTimeout=="function"?clearTimeout:void 0,B3=typeof Promise=="function"?Promise:void 0,p7=typeof queueMicrotask=="function"?queueMicrotask:typeof B3<"u"?function(l){return B3.resolve(null).then(l).catch(m7)}:$3;function m7(l){setTimeout(function(){throw l})}function _u(l){return l==="head"}function z3(l,d){var p=d,b=0,T=0;do{var F=p.nextSibling;if(l.removeChild(p),F&&F.nodeType===8)if(p=F.data,p==="/$"){if(0<b&&8>b){p=b;var oe=l.ownerDocument;if(p&1&&Lp(oe.documentElement),p&2&&Lp(oe.body),p&4)for(p=oe.head,Lp(p),oe=p.firstChild;oe;){var Se=oe.nextSibling,ze=oe.nodeName;oe[Vt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&oe.rel.toLowerCase()==="stylesheet"||p.removeChild(oe),oe=Se}}if(T===0){l.removeChild(F),Gp(d);return}T--}else p==="$"||p==="$?"||p==="$!"?T++:b=p.charCodeAt(0)-48;else b=0;p=F}while(p);Gp(d)}function W_(l){var d=l.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var p=d;switch(d=d.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":W_(p),Xt(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function g7(l,d,p,b){for(;l.nodeType===1;){var T=p;if(l.nodeName.toLowerCase()!==d.toLowerCase()){if(!b&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(b){if(!l[Vt])switch(d){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(F=l.getAttribute("rel"),F==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(F!==T.rel||l.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||l.getAttribute("title")!==(T.title==null?null:T.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(F=l.getAttribute("src"),(F!==(T.src==null?null:T.src)||l.getAttribute("type")!==(T.type==null?null:T.type)||l.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&F&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(d==="input"&&l.type==="hidden"){var F=T.name==null?null:""+T.name;if(T.type==="hidden"&&l.getAttribute("name")===F)return l}else return l;if(l=Ro(l.nextSibling),l===null)break}return null}function y7(l,d,p){if(d==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Ro(l.nextSibling),l===null))return null;return l}function K_(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function b7(l,d){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")d();else{var b=function(){d(),p.removeEventListener("DOMContentLoaded",b)};p.addEventListener("DOMContentLoaded",b),l._reactRetry=b}}function Ro(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?"||d==="F!"||d==="F")break;if(d==="/$")return null}}return l}var Z_=null;function U3(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(d===0)return l;d--}else p==="/$"&&d++}l=l.previousSibling}return null}function q3(l,d,p){switch(d=my(p),l){case"html":if(l=d.documentElement,!l)throw Error(r(452));return l;case"head":if(l=d.head,!l)throw Error(r(453));return l;case"body":if(l=d.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Lp(l){for(var d=l.attributes;d.length;)l.removeAttributeNode(d[0]);Xt(l)}var io=new Map,H3=new Set;function gy(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var gl=ne.d;ne.d={f:v7,r:w7,D:_7,C:x7,L:S7,m:E7,X:k7,S:C7,M:A7};function v7(){var l=gl.f(),d=sy();return l||d}function w7(l){var d=$n(l);d!==null&&d.tag===5&&d.type==="form"?cT(d):gl.r(l)}var bf=typeof document>"u"?null:document;function V3(l,d,p){var b=bf;if(b&&typeof d=="string"&&d){var T=$a(d);T='link[rel="'+l+'"][href="'+T+'"]',typeof p=="string"&&(T+='[crossorigin="'+p+'"]'),H3.has(T)||(H3.add(T),l={rel:l,crossOrigin:p,href:d},b.querySelector(T)===null&&(d=b.createElement("link"),ja(d,"link",l),Dn(d),b.head.appendChild(d)))}}function _7(l){gl.D(l),V3("dns-prefetch",l,null)}function x7(l,d){gl.C(l,d),V3("preconnect",l,d)}function S7(l,d,p){gl.L(l,d,p);var b=bf;if(b&&l&&d){var T='link[rel="preload"][as="'+$a(d)+'"]';d==="image"&&p&&p.imageSrcSet?(T+='[imagesrcset="'+$a(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(T+='[imagesizes="'+$a(p.imageSizes)+'"]')):T+='[href="'+$a(l)+'"]';var F=T;switch(d){case"style":F=vf(l);break;case"script":F=wf(l)}io.has(F)||(l=f({rel:"preload",href:d==="image"&&p&&p.imageSrcSet?void 0:l,as:d},p),io.set(F,l),b.querySelector(T)!==null||d==="style"&&b.querySelector($p(F))||d==="script"&&b.querySelector(Bp(F))||(d=b.createElement("link"),ja(d,"link",l),Dn(d),b.head.appendChild(d)))}}function E7(l,d){gl.m(l,d);var p=bf;if(p&&l){var b=d&&typeof d.as=="string"?d.as:"script",T='link[rel="modulepreload"][as="'+$a(b)+'"][href="'+$a(l)+'"]',F=T;switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":F=wf(l)}if(!io.has(F)&&(l=f({rel:"modulepreload",href:l},d),io.set(F,l),p.querySelector(T)===null)){switch(b){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Bp(F)))return}b=p.createElement("link"),ja(b,"link",l),Dn(b),p.head.appendChild(b)}}}function C7(l,d,p){gl.S(l,d,p);var b=bf;if(b&&l){var T=dr(b).hoistableStyles,F=vf(l);d=d||"default";var oe=T.get(F);if(!oe){var Se={loading:0,preload:null};if(oe=b.querySelector($p(F)))Se.loading=5;else{l=f({rel:"stylesheet",href:l,"data-precedence":d},p),(p=io.get(F))&&Y_(l,p);var ze=oe=b.createElement("link");Dn(ze),ja(ze,"link",l),ze._p=new Promise(function(ut,_t){ze.onload=ut,ze.onerror=_t}),ze.addEventListener("load",function(){Se.loading|=1}),ze.addEventListener("error",function(){Se.loading|=2}),Se.loading|=4,yy(oe,d,b)}oe={type:"stylesheet",instance:oe,count:1,state:Se},T.set(F,oe)}}}function k7(l,d){gl.X(l,d);var p=bf;if(p&&l){var b=dr(p).hoistableScripts,T=wf(l),F=b.get(T);F||(F=p.querySelector(Bp(T)),F||(l=f({src:l,async:!0},d),(d=io.get(T))&&X_(l,d),F=p.createElement("script"),Dn(F),ja(F,"link",l),p.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},b.set(T,F))}}function A7(l,d){gl.M(l,d);var p=bf;if(p&&l){var b=dr(p).hoistableScripts,T=wf(l),F=b.get(T);F||(F=p.querySelector(Bp(T)),F||(l=f({src:l,async:!0,type:"module"},d),(d=io.get(T))&&X_(l,d),F=p.createElement("script"),Dn(F),ja(F,"link",l),p.head.appendChild(F)),F={type:"script",instance:F,count:1,state:null},b.set(T,F))}}function G3(l,d,p,b){var T=(T=Me.current)?gy(T):null;if(!T)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(d=vf(p.href),p=dr(T).hoistableStyles,b=p.get(d),b||(b={type:"style",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=vf(p.href);var F=dr(T).hoistableStyles,oe=F.get(l);if(oe||(T=T.ownerDocument||T,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},F.set(l,oe),(F=T.querySelector($p(l)))&&!F._p&&(oe.instance=F,oe.state.loading=5),io.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},io.set(l,p),F||T7(T,l,p,oe.state))),d&&b===null)throw Error(r(528,""));return oe}if(d&&b!==null)throw Error(r(529,""));return null;case"script":return d=p.async,p=p.src,typeof p=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=wf(p),p=dr(T).hoistableScripts,b=p.get(d),b||(b={type:"script",instance:null,count:0,state:null},p.set(d,b)),b):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function vf(l){return'href="'+$a(l)+'"'}function $p(l){return'link[rel="stylesheet"]['+l+"]"}function W3(l){return f({},l,{"data-precedence":l.precedence,precedence:null})}function T7(l,d,p,b){l.querySelector('link[rel="preload"][as="style"]['+d+"]")?b.loading=1:(d=l.createElement("link"),b.preload=d,d.addEventListener("load",function(){return b.loading|=1}),d.addEventListener("error",function(){return b.loading|=2}),ja(d,"link",p),Dn(d),l.head.appendChild(d))}function wf(l){return'[src="'+$a(l)+'"]'}function Bp(l){return"script[async]"+l}function K3(l,d,p){if(d.count++,d.instance===null)switch(d.type){case"style":var b=l.querySelector('style[data-href~="'+$a(p.href)+'"]');if(b)return d.instance=b,Dn(b),b;var T=f({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return b=(l.ownerDocument||l).createElement("style"),Dn(b),ja(b,"style",T),yy(b,p.precedence,l),d.instance=b;case"stylesheet":T=vf(p.href);var F=l.querySelector($p(T));if(F)return d.state.loading|=4,d.instance=F,Dn(F),F;b=W3(p),(T=io.get(T))&&Y_(b,T),F=(l.ownerDocument||l).createElement("link"),Dn(F);var oe=F;return oe._p=new Promise(function(Se,ze){oe.onload=Se,oe.onerror=ze}),ja(F,"link",b),d.state.loading|=4,yy(F,p.precedence,l),d.instance=F;case"script":return F=wf(p.src),(T=l.querySelector(Bp(F)))?(d.instance=T,Dn(T),T):(b=p,(T=io.get(F))&&(b=f({},p),X_(b,T)),l=l.ownerDocument||l,T=l.createElement("script"),Dn(T),ja(T,"link",b),l.head.appendChild(T),d.instance=T);case"void":return null;default:throw Error(r(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(b=d.instance,d.state.loading|=4,yy(b,p.precedence,l));return d.instance}function yy(l,d,p){for(var b=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=b.length?b[b.length-1]:null,F=T,oe=0;oe<b.length;oe++){var Se=b[oe];if(Se.dataset.precedence===d)F=Se;else if(F!==T)break}F?F.parentNode.insertBefore(l,F.nextSibling):(d=p.nodeType===9?p.head:p,d.insertBefore(l,d.firstChild))}function Y_(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.title==null&&(l.title=d.title)}function X_(l,d){l.crossOrigin==null&&(l.crossOrigin=d.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=d.referrerPolicy),l.integrity==null&&(l.integrity=d.integrity)}var by=null;function Z3(l,d,p){if(by===null){var b=new Map,T=by=new Map;T.set(p,b)}else T=by,b=T.get(p),b||(b=new Map,T.set(p,b));if(b.has(l))return b;for(b.set(l,null),p=p.getElementsByTagName(l),T=0;T<p.length;T++){var F=p[T];if(!(F[Vt]||F[he]||l==="link"&&F.getAttribute("rel")==="stylesheet")&&F.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=F.getAttribute(d)||"";oe=l+oe;var Se=b.get(oe);Se?Se.push(F):b.set(oe,[F])}}return b}function Y3(l,d,p){l=l.ownerDocument||l,l.head.insertBefore(p,d==="title"?l.querySelector("head > title"):null)}function R7(l,d,p){if(p===1||d.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return l=d.disabled,typeof d.precedence=="string"&&l==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function X3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var zp=null;function N7(){}function I7(l,d,p){if(zp===null)throw Error(r(475));var b=zp;if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var T=vf(p.href),F=l.querySelector($p(T));if(F){l=F._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(b.count++,b=vy.bind(b),l.then(b,b)),d.state.loading|=4,d.instance=F,Dn(F);return}F=l.ownerDocument||l,p=W3(p),(T=io.get(T))&&Y_(p,T),F=F.createElement("link"),Dn(F);var oe=F;oe._p=new Promise(function(Se,ze){oe.onload=Se,oe.onerror=ze}),ja(F,"link",p),d.instance=F}b.stylesheets===null&&(b.stylesheets=new Map),b.stylesheets.set(d,l),(l=d.state.preload)&&(d.state.loading&3)===0&&(b.count++,d=vy.bind(b),l.addEventListener("load",d),l.addEventListener("error",d))}}function O7(){if(zp===null)throw Error(r(475));var l=zp;return l.stylesheets&&l.count===0&&J_(l,l.stylesheets),0<l.count?function(d){var p=setTimeout(function(){if(l.stylesheets&&J_(l,l.stylesheets),l.unsuspend){var b=l.unsuspend;l.unsuspend=null,b()}},6e4);return l.unsuspend=d,function(){l.unsuspend=null,clearTimeout(p)}}:null}function vy(){if(this.count--,this.count===0){if(this.stylesheets)J_(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var wy=null;function J_(l,d){l.stylesheets=null,l.unsuspend!==null&&(l.count++,wy=new Map,d.forEach(D7,l),wy=null,vy.call(l))}function D7(l,d){if(!(d.state.loading&4)){var p=wy.get(l);if(p)var b=p.get(null);else{p=new Map,wy.set(l,p);for(var T=l.querySelectorAll("link[data-precedence],style[data-precedence]"),F=0;F<T.length;F++){var oe=T[F];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(p.set(oe.dataset.precedence,oe),b=oe)}b&&p.set(null,b)}T=d.instance,oe=T.getAttribute("data-precedence"),F=p.get(oe)||b,F===b&&p.set(null,T),p.set(oe,T),this.count++,b=vy.bind(this),T.addEventListener("load",b),T.addEventListener("error",b),F?F.parentNode.insertBefore(T,F.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(T,l.firstChild)),d.state.loading|=4}}var Up={$$typeof:E,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function j7(l,d,p,b,T,F,oe,Se){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=b,this.onUncaughtError=T,this.onCaughtError=F,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function J3(l,d,p,b,T,F,oe,Se,ze,ut,_t,kt){return l=new j7(l,d,p,oe,Se,ze,ut,kt),d=1,F===!0&&(d|=24),F=ji(3,null,null,d),l.current=F,F.stateNode=l,d=D1(),d.refCount++,l.pooledCache=d,d.refCount++,F.memoizedState={element:b,isDehydrated:p,cache:d},F1(F),l}function Q3(l){return l?(l=ms,l):ms}function eR(l,d,p,b,T,F){T=Q3(T),b.context===null?b.context=T:b.pendingContext=T,b=lu(d),b.payload={element:p},F=F===void 0?null:F,F!==null&&(b.callback=F),p=uu(l,b,d),p!==null&&($i(p,l,d),bp(p,l,d))}function tR(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<d?p:d}}function Q_(l,d){tR(l,d),(l=l.alternate)&&tR(l,d)}function nR(l){if(l.tag===13){var d=Ao(l,67108864);d!==null&&$i(d,l,67108864),Q_(l,67108864)}}var _y=!0;function M7(l,d,p,b){var T=se.T;se.T=null;var F=ne.p;try{ne.p=2,ex(l,d,p,b)}finally{ne.p=F,se.T=T}}function P7(l,d,p,b){var T=se.T;se.T=null;var F=ne.p;try{ne.p=8,ex(l,d,p,b)}finally{ne.p=F,se.T=T}}function ex(l,d,p,b){if(_y){var T=tx(b);if(T===null)z_(l,d,b,xy,p),aR(l,b);else if(L7(T,l,d,p,b))b.stopPropagation();else if(aR(l,b),d&4&&-1<F7.indexOf(l)){for(;T!==null;){var F=$n(T);if(F!==null)switch(F.tag){case 3:if(F=F.stateNode,F.current.memoizedState.isDehydrated){var oe=be(F.pendingLanes);if(oe!==0){var Se=F;for(Se.pendingLanes|=2,Se.entangledLanes|=2;oe;){var ze=1<<31-zt(oe);Se.entanglements[1]|=ze,oe&=~ze}ws(F),(ir&6)===0&&(iy=ce()+500,Mp(0))}}break;case 13:Se=Ao(F,2),Se!==null&&$i(Se,F,2),sy(),Q_(F,2)}if(F=tx(b),F===null&&z_(l,d,b,xy,p),F===T)break;T=F}T!==null&&b.stopPropagation()}else z_(l,d,b,null,p)}}function tx(l){return l=Dd(l),nx(l)}var xy=null;function nx(l){if(xy=null,l=Tn(l),l!==null){var d=i(l);if(d===null)l=null;else{var p=d.tag;if(p===13){if(l=o(d),l!==null)return l;l=null}else if(p===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null)}}return xy=l,null}function rR(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case X:return 2;case _e:return 8;case Le:case xe:return 32;case Ve:return 268435456;default:return 32}default:return 32}}var rx=!1,xu=null,Su=null,Eu=null,qp=new Map,Hp=new Map,Cu=[],F7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aR(l,d){switch(l){case"focusin":case"focusout":xu=null;break;case"dragenter":case"dragleave":Su=null;break;case"mouseover":case"mouseout":Eu=null;break;case"pointerover":case"pointerout":qp.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hp.delete(d.pointerId)}}function Vp(l,d,p,b,T,F){return l===null||l.nativeEvent!==F?(l={blockedOn:d,domEventName:p,eventSystemFlags:b,nativeEvent:F,targetContainers:[T]},d!==null&&(d=$n(d),d!==null&&nR(d)),l):(l.eventSystemFlags|=b,d=l.targetContainers,T!==null&&d.indexOf(T)===-1&&d.push(T),l)}function L7(l,d,p,b,T){switch(d){case"focusin":return xu=Vp(xu,l,d,p,b,T),!0;case"dragenter":return Su=Vp(Su,l,d,p,b,T),!0;case"mouseover":return Eu=Vp(Eu,l,d,p,b,T),!0;case"pointerover":var F=T.pointerId;return qp.set(F,Vp(qp.get(F)||null,l,d,p,b,T)),!0;case"gotpointercapture":return F=T.pointerId,Hp.set(F,Vp(Hp.get(F)||null,l,d,p,b,T)),!0}return!1}function iR(l){var d=Tn(l.target);if(d!==null){var p=i(d);if(p!==null){if(d=p.tag,d===13){if(d=o(p),d!==null){l.blockedOn=d,L(l.priority,function(){if(p.tag===13){var b=Li();b=Ct(b);var T=Ao(p,b);T!==null&&$i(T,p,b),Q_(p,b)}});return}}else if(d===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Sy(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var p=tx(l.nativeEvent);if(p===null){p=l.nativeEvent;var b=new p.constructor(p.type,p);Xi=b,p.target.dispatchEvent(b),Xi=null}else return d=$n(p),d!==null&&nR(d),l.blockedOn=p,!1;d.shift()}return!0}function oR(l,d,p){Sy(l)&&p.delete(d)}function $7(){rx=!1,xu!==null&&Sy(xu)&&(xu=null),Su!==null&&Sy(Su)&&(Su=null),Eu!==null&&Sy(Eu)&&(Eu=null),qp.forEach(oR),Hp.forEach(oR)}function Ey(l,d){l.blockedOn===d&&(l.blockedOn=null,rx||(rx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$7)))}var Cy=null;function sR(l){Cy!==l&&(Cy=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Cy===l&&(Cy=null);for(var d=0;d<l.length;d+=3){var p=l[d],b=l[d+1],T=l[d+2];if(typeof b!="function"){if(nx(b||p)===null)continue;break}var F=$n(p);F!==null&&(l.splice(d,3),d-=3,n_(F,{pending:!0,data:T,method:p.method,action:b},b,T))}}))}function Gp(l){function d(ze){return Ey(ze,l)}xu!==null&&Ey(xu,l),Su!==null&&Ey(Su,l),Eu!==null&&Ey(Eu,l),qp.forEach(d),Hp.forEach(d);for(var p=0;p<Cu.length;p++){var b=Cu[p];b.blockedOn===l&&(b.blockedOn=null)}for(;0<Cu.length&&(p=Cu[0],p.blockedOn===null);)iR(p),p.blockedOn===null&&Cu.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(b=0;b<p.length;b+=3){var T=p[b],F=p[b+1],oe=T[de]||null;if(typeof F=="function")oe||sR(p);else if(oe){var Se=null;if(F&&F.hasAttribute("formAction")){if(T=F,oe=F[de]||null)Se=oe.formAction;else if(nx(T)!==null)continue}else Se=oe.action;typeof Se=="function"?p[b+1]=Se:(p.splice(b,3),b-=3),sR(p)}}}function ax(l){this._internalRoot=l}ky.prototype.render=ax.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(r(409));var p=d.current,b=Li();eR(p,b,l,d,null,null)},ky.prototype.unmount=ax.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;eR(l.current,2,null,l,null,null),sy(),d[Fe]=null}};function ky(l){this._internalRoot=l}ky.prototype.unstable_scheduleHydration=function(l){if(l){var d=q();l={blockedOn:null,target:l,priority:d};for(var p=0;p<Cu.length&&d!==0&&d<Cu[p].priority;p++);Cu.splice(p,0,l),p===0&&iR(l)}};var lR=t.version;if(lR!=="19.1.0")throw Error(r(527,lR,"19.1.0"));ne.findDOMNode=function(l){var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(d),l=l!==null?c(l):null,l=l===null?null:l.stateNode,l};var B7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:se,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ay=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ay.isDisabled&&Ay.supportsFiber)try{Et=Ay.inject(B7),Lt=Ay}catch{}}return Kp.createRoot=function(l,d){if(!a(l))throw Error(r(299));var p=!1,b="",T=ET,F=CT,oe=kT,Se=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(T=d.onUncaughtError),d.onCaughtError!==void 0&&(F=d.onCaughtError),d.onRecoverableError!==void 0&&(oe=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(Se=d.unstable_transitionCallbacks)),d=J3(l,1,!1,null,null,p,b,T,F,oe,Se,null),l[Fe]=d.current,B_(l),new ax(d)},Kp.hydrateRoot=function(l,d,p){if(!a(l))throw Error(r(299));var b=!1,T="",F=ET,oe=CT,Se=kT,ze=null,ut=null;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(T=p.identifierPrefix),p.onUncaughtError!==void 0&&(F=p.onUncaughtError),p.onCaughtError!==void 0&&(oe=p.onCaughtError),p.onRecoverableError!==void 0&&(Se=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ze=p.unstable_transitionCallbacks),p.formState!==void 0&&(ut=p.formState)),d=J3(l,1,!0,d,p??null,b,T,F,oe,Se,ze,ut),d.context=Q3(null),p=d.current,b=Li(),b=Ct(b),T=lu(b),T.callback=null,uu(p,T,b),p=b,d.current.lanes=p,et(d,p),ws(d),l[Fe]=d.current,B_(l),new ky(d)},Kp.version="19.1.0",Kp}var bR;function nz(){if(bR)return sx.exports;bR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),sx.exports=tz(),sx.exports}var rz=nz();const az=Ja(rz);function iO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=iO(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function oO(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=iO(e))&&(r&&(r+=" "),r+=t);return r}const WE="-",iz=e=>{const t=sz(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(WE);return s[0]===""&&s.length!==1&&s.shift(),sO(s,t)||oz(o)},getConflictingClassGroupIds:(o,s)=>{const u=n[o]||[];return s&&r[o]?[...u,...r[o]]:u}}},sO=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?sO(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(WE);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},vR=/^\[(.+)\]$/,oz=e=>{if(vR.test(e)){const t=vR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},sz=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)S2(n[a],r,a,t);return r},S2=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:wR(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(lz(a)){S2(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{S2(o,wR(t,i),n,r)})})},wR=(e,t)=>{let n=e;return t.split(WE).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},lz=e=>e.isThemeGetter,uz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},E2="!",C2=":",cz=C2.length,dz=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,u=0,c;for(let w=0;w<a.length;w++){let v=a[w];if(o===0&&s===0){if(v===C2){i.push(a.slice(u,w)),u=w+cz;continue}if(v==="/"){c=w;continue}}v==="["?o++:v==="]"?o--:v==="("?s++:v===")"&&s--}const f=i.length===0?a:a.substring(u),h=fz(f),m=h!==f,g=c&&c>u?c-u:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+C2,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},fz=e=>e.endsWith(E2)?e.substring(0,e.length-1):e.startsWith(E2)?e.substring(1):e,hz=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},pz=e=>({cache:uz(e.cacheSize),parseClassName:dz(e),sortModifiers:hz(e),...iz(e)}),mz=/\s+/,gz=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(mz);let u="";for(let c=s.length-1;c>=0;c-=1){const f=s[c],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:v}=n(f);if(h){u=f+(u.length>0?" "+u:u);continue}let _=!!v,x=r(_?w.substring(0,v):w);if(!x){if(!_){u=f+(u.length>0?" "+u:u);continue}if(x=r(w),!x){u=f+(u.length>0?" "+u:u);continue}_=!1}const S=i(m).join(":"),E=g?S+E2:S,C=E+x;if(o.includes(C))continue;o.push(C);const A=a(x,_);for(let O=0;O<A.length;++O){const I=A[O];o.push(E+I)}u=f+(u.length>0?" "+u:u)}return u};function yz(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=lO(t))&&(r&&(r+=" "),r+=n);return r}const lO=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=lO(e[r]))&&(n&&(n+=" "),n+=t);return n};function bz(e,...t){let n,r,a,i=o;function o(u){const c=t.reduce((f,h)=>h(f),e());return n=pz(c),r=n.cache.get,a=n.cache.set,i=s,s(u)}function s(u){const c=r(u);if(c)return c;const f=gz(u,n);return a(u,f),f}return function(){return i(yz.apply(null,arguments))}}const ua=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},uO=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,cO=/^\((?:(\w[\w-]*):)?(.+)\)$/i,vz=/^\d+\/\d+$/,wz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_z=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Sz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Ez=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,_f=e=>vz.test(e),Fn=e=>!!e&&!Number.isNaN(Number(e)),Au=e=>!!e&&Number.isInteger(Number(e)),dx=e=>e.endsWith("%")&&Fn(e.slice(0,-1)),yl=e=>wz.test(e),Cz=()=>!0,kz=e=>_z.test(e)&&!xz.test(e),dO=()=>!1,Az=e=>Sz.test(e),Tz=e=>Ez.test(e),Rz=e=>!en(e)&&!tn(e),Nz=e=>yh(e,pO,dO),en=e=>uO.test(e),Uc=e=>yh(e,mO,kz),fx=e=>yh(e,Mz,Fn),_R=e=>yh(e,fO,dO),Iz=e=>yh(e,hO,Tz),Ty=e=>yh(e,gO,Az),tn=e=>cO.test(e),Zp=e=>bh(e,mO),Oz=e=>bh(e,Pz),xR=e=>bh(e,fO),Dz=e=>bh(e,pO),jz=e=>bh(e,hO),Ry=e=>bh(e,gO,!0),yh=(e,t,n)=>{const r=uO.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},bh=(e,t,n=!1)=>{const r=cO.exec(e);return r?r[1]?t(r[1]):n:!1},fO=e=>e==="position"||e==="percentage",hO=e=>e==="image"||e==="url",pO=e=>e==="length"||e==="size"||e==="bg-size",mO=e=>e==="length",Mz=e=>e==="number",Pz=e=>e==="family-name",gO=e=>e==="shadow",Fz=()=>{const e=ua("color"),t=ua("font"),n=ua("text"),r=ua("font-weight"),a=ua("tracking"),i=ua("leading"),o=ua("breakpoint"),s=ua("container"),u=ua("spacing"),c=ua("radius"),f=ua("shadow"),h=ua("inset-shadow"),m=ua("text-shadow"),g=ua("drop-shadow"),w=ua("blur"),v=ua("perspective"),_=ua("aspect"),x=ua("ease"),S=ua("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...C(),tn,en],O=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],D=()=>[tn,en,u],B=()=>[_f,"full","auto",...D()],W=()=>[Au,"none","subgrid",tn,en],Q=()=>["auto",{span:["full",Au,tn,en]},Au,tn,en],M=()=>[Au,"auto",tn,en],K=()=>["auto","min","max","fr",tn,en],U=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],me=()=>["start","end","center","stretch","center-safe","end-safe"],se=()=>["auto",...D()],ne=()=>[_f,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],ee=()=>[e,tn,en],ae=()=>[...C(),xR,_R,{position:[tn,en]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Y=()=>["auto","cover","contain",Dz,Nz,{size:[tn,en]}],J=()=>[dx,Zp,Uc],re=()=>["","none","full",c,tn,en],we=()=>["",Fn,Zp,Uc],ke=()=>["solid","dashed","dotted","double"],Me=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Pe=()=>[Fn,dx,xR,_R],Re=()=>["","none",w,tn,en],Ae=()=>["none",Fn,tn,en],He=()=>["none",Fn,tn,en],st=()=>[Fn,tn,en],Oe=()=>[_f,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[yl],breakpoint:[yl],color:[Cz],container:[yl],"drop-shadow":[yl],ease:["in","out","in-out"],font:[Rz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[yl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[yl],shadow:[yl],spacing:["px",Fn],text:[yl],"text-shadow":[yl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",_f,en,tn,_]}],container:["container"],columns:[{columns:[Fn,en,tn,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:B()}],"inset-x":[{"inset-x":B()}],"inset-y":[{"inset-y":B()}],start:[{start:B()}],end:[{end:B()}],top:[{top:B()}],right:[{right:B()}],bottom:[{bottom:B()}],left:[{left:B()}],visibility:["visible","invisible","collapse"],z:[{z:[Au,"auto",tn,en]}],basis:[{basis:[_f,"full","auto",s,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Fn,_f,"auto","initial","none",en]}],grow:[{grow:["",Fn,tn,en]}],shrink:[{shrink:["",Fn,tn,en]}],order:[{order:[Au,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":W()}],"col-start-end":[{col:Q()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":W()}],"row-start-end":[{row:Q()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":K()}],"auto-rows":[{"auto-rows":K()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...U(),"normal"]}],"justify-items":[{"justify-items":[...me(),"normal"]}],"justify-self":[{"justify-self":["auto",...me()]}],"align-content":[{content:["normal",...U()]}],"align-items":[{items:[...me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...me(),{baseline:["","last"]}]}],"place-content":[{"place-content":U()}],"place-items":[{"place-items":[...me(),"baseline"]}],"place-self":[{"place-self":["auto",...me()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:se()}],mx:[{mx:se()}],my:[{my:se()}],ms:[{ms:se()}],me:[{me:se()}],mt:[{mt:se()}],mr:[{mr:se()}],mb:[{mb:se()}],ml:[{ml:se()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[s,"screen",...ne()]}],"min-w":[{"min-w":[s,"screen","none",...ne()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...ne()]}],h:[{h:["screen",...ne()]}],"min-h":[{"min-h":["screen","none",...ne()]}],"max-h":[{"max-h":["screen",...ne()]}],"font-size":[{text:["base",n,Zp,Uc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,tn,fx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",dx,en]}],"font-family":[{font:[Oz,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,tn,en]}],"line-clamp":[{"line-clamp":[Fn,"none",tn,fx]}],leading:[{leading:[i,...D()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ke(),"wavy"]}],"text-decoration-thickness":[{decoration:[Fn,"from-font","auto",tn,Uc]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[Fn,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ae()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:Y()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Au,tn,en],radial:["",tn,en],conic:[Au,tn,en]},jz,Iz]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:J()}],"gradient-via-pos":[{via:J()}],"gradient-to-pos":[{to:J()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:we()}],"border-w-x":[{"border-x":we()}],"border-w-y":[{"border-y":we()}],"border-w-s":[{"border-s":we()}],"border-w-e":[{"border-e":we()}],"border-w-t":[{"border-t":we()}],"border-w-r":[{"border-r":we()}],"border-w-b":[{"border-b":we()}],"border-w-l":[{"border-l":we()}],"divide-x":[{"divide-x":we()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":we()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ke(),"hidden","none"]}],"divide-style":[{divide:[...ke(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[...ke(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Fn,tn,en]}],"outline-w":[{outline:["",Fn,Zp,Uc]}],"outline-color":[{outline:ee()}],shadow:[{shadow:["","none",f,Ry,Ty]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",h,Ry,Ty]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:we()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[Fn,Uc]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":we()}],"inset-ring-color":[{"inset-ring":ee()}],"text-shadow":[{"text-shadow":["none",m,Ry,Ty]}],"text-shadow-color":[{"text-shadow":ee()}],opacity:[{opacity:[Fn,tn,en]}],"mix-blend":[{"mix-blend":[...Me(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Me()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Fn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Pe()}],"mask-image-linear-to-pos":[{"mask-linear-to":Pe()}],"mask-image-linear-from-color":[{"mask-linear-from":ee()}],"mask-image-linear-to-color":[{"mask-linear-to":ee()}],"mask-image-t-from-pos":[{"mask-t-from":Pe()}],"mask-image-t-to-pos":[{"mask-t-to":Pe()}],"mask-image-t-from-color":[{"mask-t-from":ee()}],"mask-image-t-to-color":[{"mask-t-to":ee()}],"mask-image-r-from-pos":[{"mask-r-from":Pe()}],"mask-image-r-to-pos":[{"mask-r-to":Pe()}],"mask-image-r-from-color":[{"mask-r-from":ee()}],"mask-image-r-to-color":[{"mask-r-to":ee()}],"mask-image-b-from-pos":[{"mask-b-from":Pe()}],"mask-image-b-to-pos":[{"mask-b-to":Pe()}],"mask-image-b-from-color":[{"mask-b-from":ee()}],"mask-image-b-to-color":[{"mask-b-to":ee()}],"mask-image-l-from-pos":[{"mask-l-from":Pe()}],"mask-image-l-to-pos":[{"mask-l-to":Pe()}],"mask-image-l-from-color":[{"mask-l-from":ee()}],"mask-image-l-to-color":[{"mask-l-to":ee()}],"mask-image-x-from-pos":[{"mask-x-from":Pe()}],"mask-image-x-to-pos":[{"mask-x-to":Pe()}],"mask-image-x-from-color":[{"mask-x-from":ee()}],"mask-image-x-to-color":[{"mask-x-to":ee()}],"mask-image-y-from-pos":[{"mask-y-from":Pe()}],"mask-image-y-to-pos":[{"mask-y-to":Pe()}],"mask-image-y-from-color":[{"mask-y-from":ee()}],"mask-image-y-to-color":[{"mask-y-to":ee()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Pe()}],"mask-image-radial-to-pos":[{"mask-radial-to":Pe()}],"mask-image-radial-from-color":[{"mask-radial-from":ee()}],"mask-image-radial-to-color":[{"mask-radial-to":ee()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Fn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Pe()}],"mask-image-conic-to-pos":[{"mask-conic-to":Pe()}],"mask-image-conic-from-color":[{"mask-conic-from":ee()}],"mask-image-conic-to-color":[{"mask-conic-to":ee()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ae()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:Y()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:Re()}],brightness:[{brightness:[Fn,tn,en]}],contrast:[{contrast:[Fn,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",g,Ry,Ty]}],"drop-shadow-color":[{"drop-shadow":ee()}],grayscale:[{grayscale:["",Fn,tn,en]}],"hue-rotate":[{"hue-rotate":[Fn,tn,en]}],invert:[{invert:["",Fn,tn,en]}],saturate:[{saturate:[Fn,tn,en]}],sepia:[{sepia:["",Fn,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Fn,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[Fn,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Fn,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Fn,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",Fn,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[Fn,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[Fn,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",Fn,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Fn,"initial",tn,en]}],ease:[{ease:["linear","initial",x,tn,en]}],delay:[{delay:[Fn,tn,en]}],animate:[{animate:["none",S,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,tn,en]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Ae()}],"rotate-x":[{"rotate-x":Ae()}],"rotate-y":[{"rotate-y":Ae()}],"rotate-z":[{"rotate-z":Ae()}],scale:[{scale:He()}],"scale-x":[{"scale-x":He()}],"scale-y":[{"scale-y":He()}],"scale-z":[{"scale-z":He()}],"scale-3d":["scale-3d"],skew:[{skew:st()}],"skew-x":[{"skew-x":st()}],"skew-y":[{"skew-y":st()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Oe()}],"translate-x":[{"translate-x":Oe()}],"translate-y":[{"translate-y":Oe()}],"translate-z":[{"translate-z":Oe()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[Fn,Zp,Uc,fx]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Lz=bz(Fz);function Mt(...e){return Lz(oO(e))}const SR=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:Mt(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(vt.Fragment,{children:i},a.id):null})})};function ER(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Il(...e){return t=>{let n=!1;const r=e.map(a=>{const i=ER(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():ER(e[a],null)}}}}function _n(...e){return N.useCallback(Il(...e),e)}function $u(e){const t=$z(e),n=N.forwardRef((r,a)=>{const{children:i,...o}=r,s=N.Children.toArray(i),u=s.find(zz);if(u){const c=u.props.children,f=s.map(h=>h===u?N.Children.count(c)>1?N.Children.only(null):N.isValidElement(c)?c.props.children:null:h);return y.jsx(t,{...o,ref:a,children:N.isValidElement(c)?N.cloneElement(c,void 0,f):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var yO=$u("Slot");function $z(e){const t=N.forwardRef((n,r)=>{const{children:a,...i}=n;if(N.isValidElement(a)){const o=qz(a),s=Uz(i,a.props);return a.type!==N.Fragment&&(s.ref=r?Il(r,o):o),N.cloneElement(a,s)}return N.Children.count(a)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bO=Symbol("radix.slottable");function Bz(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=bO,t}function zz(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bO}function Uz(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function qz(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const CR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,kR=oO,KE=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return kR(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(c=>{const f=n==null?void 0:n[c],h=i==null?void 0:i[c];if(f===null)return null;const m=CR(f)||CR(h);return a[c][m]}),s=n&&Object.entries(n).reduce((c,f)=>{let[h,m]=f;return m===void 0||(c[h]=m),c},{}),u=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((c,f)=>{let{class:h,className:m,...g}=f;return Object.entries(g).every(w=>{let[v,_]=w;return Array.isArray(_)?_.includes({...i,...s}[v]):{...i,...s}[v]===_})?[...c,h,m]:c},[]);return kR(e,o,u,n==null?void 0:n.class,n==null?void 0:n.className)},Hz=KE("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ht({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?yO:"button";return y.jsx(i,{"data-slot":"button",className:Mt(Hz({variant:t,size:n,className:e})),...a})}const AR=e=>{let t;const n=new Set,r=(c,f)=>{const h=typeof c=="function"?c(t):c;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c))},u=t=e(r,a,s);return s},Vz=e=>e?AR(e):AR,Gz=e=>e;function Wz(e,t=Gz){const n=vt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return vt.useDebugValue(n),n}const TR=e=>{const t=Vz(e),n=r=>Wz(t,r);return Object.assign(n,t),n},Bl=e=>e?TR(e):TR;var vO=Symbol.for("immer-nothing"),RR=Symbol.for("immer-draftable"),nr=Symbol.for("immer-state");function go(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Gf=Object.getPrototypeOf;function Wf(e){return!!e&&!!e[nr]}function Ol(e){var t;return e?wO(e)||Array.isArray(e)||!!e[RR]||!!((t=e.constructor)!=null&&t[RR])||Lv(e)||$v(e):!1}var Kz=Object.prototype.constructor.toString();function wO(e){if(!e||typeof e!="object")return!1;const t=Gf(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Kz}function ym(e,t){Fv(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Fv(e){const t=e[nr];return t?t.type_:Array.isArray(e)?1:Lv(e)?2:$v(e)?3:0}function k2(e,t){return Fv(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _O(e,t,n){const r=Fv(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Zz(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Lv(e){return e instanceof Map}function $v(e){return e instanceof Set}function xa(e){return e.copy_||e.base_}function A2(e,t){if(Lv(e))return new Map(e);if($v(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=wO(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[nr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(Gf(e),r)}else{const r=Gf(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function ZE(e,t=!1){return Bv(e)||Wf(e)||!Ol(e)||(Fv(e)>1&&(e.set=e.add=e.clear=e.delete=Yz),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>ZE(r,!0))),e}function Yz(){go(2)}function Bv(e){return Object.isFrozen(e)}var T2={};function id(e){const t=T2[e];return t||go(0,e),t}function Xz(e,t){T2[e]||(T2[e]=t)}var bm;function wb(){return bm}function Jz(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function NR(e,t){t&&(id("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function R2(e){N2(e),e.drafts_.forEach(Qz),e.drafts_=null}function N2(e){e===bm&&(bm=e.parent_)}function IR(e){return bm=Jz(bm,e)}function Qz(e){const t=e[nr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function OR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[nr].modified_&&(R2(t),go(4)),Ol(e)&&(e=_b(t,e),t.parent_||xb(t,e)),t.patches_&&id("Patches").generateReplacementPatches_(n[nr].base_,e,t.patches_,t.inversePatches_)):e=_b(t,n,[]),R2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vO?e:void 0}function _b(e,t,n){if(Bv(t))return t;const r=t[nr];if(!r)return ym(t,(a,i)=>DR(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return xb(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),ym(i,(s,u)=>DR(e,r,a,s,u,n,o)),xb(e,a,!1),n&&e.patches_&&id("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function DR(e,t,n,r,a,i,o){if(Wf(a)){const s=i&&t&&t.type_!==3&&!k2(t.assigned_,r)?i.concat(r):void 0,u=_b(e,a,s);if(_O(n,r,u),Wf(u))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(Ol(a)&&!Bv(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;_b(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&xb(e,a)}}function xb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ZE(t,n)}function eU(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:wb(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=YE;n&&(a=[r],i=vm);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var YE={get(e,t){if(t===nr)return e;const n=xa(e);if(!k2(n,t))return tU(e,n,t);const r=n[t];return e.finalized_||!Ol(r)?r:r===hx(e.base_,t)?(px(e),e.copy_[t]=wm(r,e)):r},has(e,t){return t in xa(e)},ownKeys(e){return Reflect.ownKeys(xa(e))},set(e,t,n){const r=xO(xa(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=hx(xa(e),t),i=a==null?void 0:a[nr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Zz(n,a)&&(n!==void 0||k2(e.base_,t)))return!0;px(e),_l(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return hx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,px(e),_l(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=xa(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){go(11)},getPrototypeOf(e){return Gf(e.base_)},setPrototypeOf(){go(12)}},vm={};ym(YE,(e,t)=>{vm[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});vm.deleteProperty=function(e,t){return vm.set.call(this,e,t,void 0)};vm.set=function(e,t,n){return YE.set.call(this,e[0],t,n,e[0])};function hx(e,t){const n=e[nr];return(n?xa(n):e)[t]}function tU(e,t,n){var a;const r=xO(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function xO(e,t){if(!(t in e))return;let n=Gf(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Gf(n)}}function _l(e){e.modified_||(e.modified_=!0,e.parent_&&_l(e.parent_))}function px(e){e.copy_||(e.copy_=A2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var nU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(u=i,...c){return o.produce(u,f=>n.call(this,f,...c))}}typeof n!="function"&&go(6),r!==void 0&&typeof r!="function"&&go(7);let a;if(Ol(t)){const i=IR(this),o=wm(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?R2(i):N2(i)}return NR(i,r),OR(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===vO&&(a=void 0),this.autoFreeze_&&ZE(a,!0),r){const i=[],o=[];id("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else go(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,u=>t(u,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ol(e)||go(8),Wf(e)&&(e=rU(e));const t=IR(this),n=wm(e,void 0);return n[nr].isManual_=!0,N2(t),n}finishDraft(e,t){const n=e&&e[nr];(!n||!n.isManual_)&&go(9);const{scope_:r}=n;return NR(r,t),OR(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=id("Patches").applyPatches_;return Wf(e)?r(e,t):this.produce(e,a=>r(a,t))}};function wm(e,t){const n=Lv(e)?id("MapSet").proxyMap_(e,t):$v(e)?id("MapSet").proxySet_(e,t):eU(e,t);return(t?t.scope_:wb()).drafts_.push(n),n}function rU(e){return Wf(e)||go(10,e),SO(e)}function SO(e){if(!Ol(e)||Bv(e))return e;const t=e[nr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=A2(e,t.scope_.immer_.useStrictShallowCopy_)}else n=A2(e,!0);return ym(n,(r,a)=>{_O(n,r,SO(a))}),t&&(t.finalized_=!1),n}function aU(){class e extends Map{constructor(u,c){super(),this[nr]={type_:2,parent_:c,scope_:c?c.scope_:wb(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:u,draft_:this,isManual_:!1,revoked_:!1}}get size(){return xa(this[nr]).size}has(u){return xa(this[nr]).has(u)}set(u,c){const f=this[nr];return o(f),(!xa(f).has(u)||xa(f).get(u)!==c)&&(n(f),_l(f),f.assigned_.set(u,!0),f.copy_.set(u,c),f.assigned_.set(u,!0)),this}delete(u){if(!this.has(u))return!1;const c=this[nr];return o(c),n(c),_l(c),c.base_.has(u)?c.assigned_.set(u,!1):c.assigned_.delete(u),c.copy_.delete(u),!0}clear(){const u=this[nr];o(u),xa(u).size&&(n(u),_l(u),u.assigned_=new Map,ym(u.base_,c=>{u.assigned_.set(c,!1)}),u.copy_.clear())}forEach(u,c){const f=this[nr];xa(f).forEach((h,m,g)=>{u.call(c,this.get(m),m,this)})}get(u){const c=this[nr];o(c);const f=xa(c).get(u);if(c.finalized_||!Ol(f)||f!==c.base_.get(u))return f;const h=wm(f,c);return n(c),c.copy_.set(u,h),h}keys(){return xa(this[nr]).keys()}values(){const u=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const c=u.next();return c.done?c:{done:!1,value:this.get(c.value)}}}}entries(){const u=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const c=u.next();if(c.done)return c;const f=this.get(c.value);return{done:!1,value:[c.value,f]}}}}[Symbol.iterator](){return this.entries()}}function t(s,u){return new e(s,u)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(u,c){super(),this[nr]={type_:3,parent_:c,scope_:c?c.scope_:wb(),modified_:!1,finalized_:!1,copy_:void 0,base_:u,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return xa(this[nr]).size}has(u){const c=this[nr];return o(c),c.copy_?!!(c.copy_.has(u)||c.drafts_.has(u)&&c.copy_.has(c.drafts_.get(u))):c.base_.has(u)}add(u){const c=this[nr];return o(c),this.has(u)||(i(c),_l(c),c.copy_.add(u)),this}delete(u){if(!this.has(u))return!1;const c=this[nr];return o(c),i(c),_l(c),c.copy_.delete(u)||(c.drafts_.has(u)?c.copy_.delete(c.drafts_.get(u)):!1)}clear(){const u=this[nr];o(u),xa(u).size&&(i(u),_l(u),u.copy_.clear())}values(){const u=this[nr];return o(u),i(u),u.copy_.values()}entries(){const u=this[nr];return o(u),i(u),u.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(u,c){const f=this.values();let h=f.next();for(;!h.done;)u.call(c,h.value,h.value,this),h=f.next()}}function a(s,u){return new r(s,u)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(u=>{if(Ol(u)){const c=wm(u,s);s.drafts_.set(u,c),s.copy_.add(c)}else s.copy_.add(u)}))}function o(s){s.revoked_&&go(3,JSON.stringify(xa(s)))}Xz("MapSet",{proxyMap_:t,proxySet_:a})}var Ki=new nU,iU=Ki.produce;Ki.produceWithPatches.bind(Ki);Ki.setAutoFreeze.bind(Ki);Ki.setUseStrictShallowCopy.bind(Ki);Ki.applyPatches.bind(Ki);Ki.createDraft.bind(Ki);Ki.finishDraft.bind(Ki);const oU=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?iU(a):a;return t(s,i,...o)},e(r.setState,n,r)),zl=oU,Ri=Bl(zl((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((u,c)=>(u.order??0)-(c.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var ub={exports:{}},sU=ub.exports,jR;function lU(){return jR||(jR=1,function(e,t){(function(n,r){e.exports=r()})(sU,function(){var n=function(k,j){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,te){Z.__proto__=te}||function(Z,te){for(var ue in te)Object.prototype.hasOwnProperty.call(te,ue)&&(Z[ue]=te[ue])})(k,j)},r=function(){return(r=Object.assign||function(k){for(var j,Z=1,te=arguments.length;Z<te;Z++)for(var ue in j=arguments[Z])Object.prototype.hasOwnProperty.call(j,ue)&&(k[ue]=j[ue]);return k}).apply(this,arguments)};function a(k,j,Z){for(var te,ue=0,ve=j.length;ue<ve;ue++)!te&&ue in j||((te=te||Array.prototype.slice.call(j,0,ue))[ue]=j[ue]);return k.concat(te||Array.prototype.slice.call(j))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ed,o=Object.keys,s=Array.isArray;function u(k,j){return typeof j!="object"||o(j).forEach(function(Z){k[Z]=j[Z]}),k}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,f={}.hasOwnProperty;function h(k,j){return f.call(k,j)}function m(k,j){typeof j=="function"&&(j=j(c(k))),(typeof Reflect>"u"?o:Reflect.ownKeys)(j).forEach(function(Z){w(k,Z,j[Z])})}var g=Object.defineProperty;function w(k,j,Z,te){g(k,j,u(Z&&h(Z,"get")&&typeof Z.get=="function"?{get:Z.get,set:Z.set,configurable:!0}:{value:Z,configurable:!0,writable:!0},te))}function v(k){return{from:function(j){return k.prototype=Object.create(j.prototype),w(k.prototype,"constructor",k),{extend:m.bind(null,k.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(k,j,Z){return x.call(k,j,Z)}function E(k,j){return j(k)}function C(k){if(!k)throw new Error("Assertion Failed")}function A(k){i.setImmediate?setImmediate(k):setTimeout(k,0)}function O(k,j){if(typeof j=="string"&&h(k,j))return k[j];if(!j)return k;if(typeof j!="string"){for(var Z=[],te=0,ue=j.length;te<ue;++te){var ve=O(k,j[te]);Z.push(ve)}return Z}var je=j.indexOf(".");if(je!==-1){var $e=k[j.substr(0,je)];return $e==null?void 0:O($e,j.substr(je+1))}}function I(k,j,Z){if(k&&j!==void 0&&!("isFrozen"in Object&&Object.isFrozen(k)))if(typeof j!="string"&&"length"in j){C(typeof Z!="string"&&"length"in Z);for(var te=0,ue=j.length;te<ue;++te)I(k,j[te],Z[te])}else{var ve,je,$e=j.indexOf(".");$e!==-1?(ve=j.substr(0,$e),(je=j.substr($e+1))===""?Z===void 0?s(k)&&!isNaN(parseInt(ve))?k.splice(ve,1):delete k[ve]:k[ve]=Z:I($e=!($e=k[ve])||!h(k,ve)?k[ve]={}:$e,je,Z)):Z===void 0?s(k)&&!isNaN(parseInt(j))?k.splice(j,1):delete k[j]:k[j]=Z}}function D(k){var j,Z={};for(j in k)h(k,j)&&(Z[j]=k[j]);return Z}var B=[].concat;function W(k){return B.apply([],k)}var Et="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(W([8,16,32,64].map(function(k){return["Int","Uint","Float"].map(function(j){return j+k+"Array"})}))).filter(function(k){return i[k]}),Q=new Set(Et.map(function(k){return i[k]})),M=null;function K(k){return M=new WeakMap,k=function j(Z){if(!Z||typeof Z!="object")return Z;var te=M.get(Z);if(te)return te;if(s(Z)){te=[],M.set(Z,te);for(var ue=0,ve=Z.length;ue<ve;++ue)te.push(j(Z[ue]))}else if(Q.has(Z.constructor))te=Z;else{var je,$e=c(Z);for(je in te=$e===Object.prototype?{}:Object.create($e),M.set(Z,te),Z)h(Z,je)&&(te[je]=j(Z[je]))}return te}(k),M=null,k}var U={}.toString;function me(k){return U.call(k).slice(8,-1)}var se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof se=="symbol"?function(k){var j;return k!=null&&(j=k[se])&&j.apply(k)}:function(){return null};function ee(k,j){return j=k.indexOf(j),0<=j&&k.splice(j,1),0<=j}var ae={};function G(k){var j,Z,te,ue;if(arguments.length===1){if(s(k))return k.slice();if(this===ae&&typeof k=="string")return[k];if(ue=ne(k)){for(Z=[];!(te=ue.next()).done;)Z.push(te.value);return Z}if(k==null)return[k];if(typeof(j=k.length)!="number")return[k];for(Z=new Array(j);j--;)Z[j]=k[j];return Z}for(j=arguments.length,Z=new Array(j);j--;)Z[j]=arguments[j];return Z}var Y=typeof Symbol<"u"?function(k){return k[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ft=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ri=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ft),J={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function re(k,j){this.name=k,this.message=j}function we(k,j){return k+". Errors: "+Object.keys(j).map(function(Z){return j[Z].toString()}).filter(function(Z,te,ue){return ue.indexOf(Z)===te}).join(`
`)}function ke(k,j,Z,te){this.failures=j,this.failedKeys=te,this.successCount=Z,this.message=we(k,j)}function Me(k,j){this.name="BulkError",this.failures=Object.keys(j).map(function(Z){return j[Z]}),this.failuresByPos=j,this.message=we(k,this.failures)}v(re).from(Error).extend({toString:function(){return this.name+": "+this.message}}),v(ke).from(re),v(Me).from(re);var Pe=ri.reduce(function(k,j){return k[j]=j+"Error",k},{}),Re=re,Ae=ri.reduce(function(k,j){var Z=j+"Error";function te(ue,ve){this.name=Z,ue?typeof ue=="string"?(this.message="".concat(ue).concat(ve?`
 `+ve:""),this.inner=ve||null):typeof ue=="object"&&(this.message="".concat(ue.name," ").concat(ue.message),this.inner=ue):(this.message=J[j]||Z,this.inner=null)}return v(te).from(Re),k[j]=te,k},{});Ae.Syntax=SyntaxError,Ae.Type=TypeError,Ae.Range=RangeError;var He=ft.reduce(function(k,j){return k[j+"Error"]=Ae[j],k},{}),st=ri.reduce(function(k,j){return["Syntax","Type","Range"].indexOf(j)===-1&&(k[j+"Error"]=Ae[j]),k},{});function Oe(){}function Te(k){return k}function z(k,j){return k==null||k===Te?j:function(Z){return j(k(Z))}}function Ce(k,j){return function(){k.apply(this,arguments),j.apply(this,arguments)}}function Ne(k,j){return k===Oe?j:function(){var Z=k.apply(this,arguments);Z!==void 0&&(arguments[0]=Z);var te=this.onsuccess,ue=this.onerror;this.onsuccess=null,this.onerror=null;var ve=j.apply(this,arguments);return te&&(this.onsuccess=this.onsuccess?Ce(te,this.onsuccess):te),ue&&(this.onerror=this.onerror?Ce(ue,this.onerror):ue),ve!==void 0?ve:Z}}function ce(k,j){return k===Oe?j:function(){k.apply(this,arguments);var Z=this.onsuccess,te=this.onerror;this.onsuccess=this.onerror=null,j.apply(this,arguments),Z&&(this.onsuccess=this.onsuccess?Ce(Z,this.onsuccess):Z),te&&(this.onerror=this.onerror?Ce(te,this.onerror):te)}}function ie(k,j){return k===Oe?j:function(Z){var te=k.apply(this,arguments);u(Z,te);var ue=this.onsuccess,ve=this.onerror;return this.onsuccess=null,this.onerror=null,Z=j.apply(this,arguments),ue&&(this.onsuccess=this.onsuccess?Ce(ue,this.onsuccess):ue),ve&&(this.onerror=this.onerror?Ce(ve,this.onerror):ve),te===void 0?Z===void 0?void 0:Z:u(te,Z)}}function X(k,j){return k===Oe?j:function(){return j.apply(this,arguments)!==!1&&k.apply(this,arguments)}}function _e(k,j){return k===Oe?j:function(){var Z=k.apply(this,arguments);if(Z&&typeof Z.then=="function"){for(var te=this,ue=arguments.length,ve=new Array(ue);ue--;)ve[ue]=arguments[ue];return Z.then(function(){return j.apply(te,ve)})}return j.apply(this,arguments)}}st.ModifyError=ke,st.DexieError=re,st.BulkError=Me;var Le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function xe(k){Le=k}var Ve={},xt=100,Et=typeof Promise>"u"?[]:function(){var k=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[k,c(k),k];var j=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[j,c(j),k]}(),ft=Et[0],ri=Et[1],Et=Et[2],ri=ri&&ri.then,Lt=ft&&ft.constructor,Tt=!!Et,zt=function(k,j){le.push([k,j]),R&&(queueMicrotask(ye),R=!1)},ge=!0,R=!0,H=[],fe=[],Ie=Te,be={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Oe,pgp:!1,env:{},finalize:Oe},Ee=be,le=[],ct=0,yt=[];function P(k){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var j=this._PSD=Ee;if(typeof k!="function"){if(k!==Ve)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&pe(this,this._value))}this._state=null,this._value=null,++j.ref,function Z(te,ue){try{ue(function(ve){if(te._state===null){if(ve===te)throw new TypeError("A promise cannot be resolved with itself.");var je=te._lib&&q();ve&&typeof ve.then=="function"?Z(te,function($e,We){ve instanceof P?ve._then($e,We):ve.then($e,We)}):(te._state=!0,te._value=ve,De(te)),je&&L()}},pe.bind(null,te))}catch(ve){pe(te,ve)}}(this,k)}var Be={get:function(){var k=Ee,j=Bt;function Z(te,ue){var ve=this,je=!k.global&&(k!==Ee||j!==Bt),$e=je&&!$n(),We=new P(function(Ye,tt){Ke(ve,new et(ss(te,k,je,$e),ss(ue,k,je,$e),Ye,tt,k))});return this._consoleTask&&(We._consoleTask=this._consoleTask),We}return Z.prototype=Ve,Z},set:function(k){w(this,"then",k&&k.prototype===Ve?Be:{get:function(){return k},set:Be.set})}};function et(k,j,Z,te,ue){this.onFulfilled=typeof k=="function"?k:null,this.onRejected=typeof j=="function"?j:null,this.resolve=Z,this.reject=te,this.psd=ue}function pe(k,j){var Z,te;fe.push(j),k._state===null&&(Z=k._lib&&q(),j=Ie(j),k._state=!1,k._value=j,te=k,H.some(function(ue){return ue._value===te._value})||H.push(te),De(k),Z&&L())}function De(k){var j=k._listeners;k._listeners=[];for(var Z=0,te=j.length;Z<te;++Z)Ke(k,j[Z]);var ue=k._PSD;--ue.ref||ue.finalize(),ct===0&&(++ct,zt(function(){--ct==0&&V()},[]))}function Ke(k,j){if(k._state!==null){var Z=k._state?j.onFulfilled:j.onRejected;if(Z===null)return(k._state?j.resolve:j.reject)(k._value);++j.psd.ref,++ct,zt(Ct,[Z,k,j])}else k._listeners.push(j)}function Ct(k,j,Z){try{var te,ue=j._value;!j._state&&fe.length&&(fe=[]),te=Le&&j._consoleTask?j._consoleTask.run(function(){return k(ue)}):k(ue),j._state||fe.indexOf(ue)!==-1||function(ve){for(var je=H.length;je;)if(H[--je]._value===ve._value)return H.splice(je,1)}(j),Z.resolve(te)}catch(ve){Z.reject(ve)}finally{--ct==0&&V(),--Z.psd.ref||Z.psd.finalize()}}function ye(){os(be,function(){q()&&L()})}function q(){var k=ge;return R=ge=!1,k}function L(){var k,j,Z;do for(;0<le.length;)for(k=le,le=[],Z=k.length,j=0;j<Z;++j){var te=k[j];te[0].apply(null,te[1])}while(0<le.length);R=ge=!0}function V(){var k=H;H=[],k.forEach(function(te){te._PSD.onunhandled.call(null,te._value,te)});for(var j=yt.slice(0),Z=j.length;Z;)j[--Z]()}function he(k){return new P(Ve,!1,k)}function de(k,j){var Z=Ee;return function(){var te=q(),ue=Ee;try{return Dn(Z,!0),k.apply(this,arguments)}catch(ve){j&&j(ve)}finally{Dn(ue,!1),te&&L()}}}m(P.prototype,{then:Be,_then:function(k,j){Ke(this,new et(null,null,k,j,Ee))},catch:function(k){if(arguments.length===1)return this.then(null,k);var j=k,Z=arguments[1];return typeof j=="function"?this.then(null,function(te){return(te instanceof j?Z:he)(te)}):this.then(null,function(te){return(te&&te.name===j?Z:he)(te)})},finally:function(k){return this.then(function(j){return P.resolve(k()).then(function(){return j})},function(j){return P.resolve(k()).then(function(){return he(j)})})},timeout:function(k,j){var Z=this;return k<1/0?new P(function(te,ue){var ve=setTimeout(function(){return ue(new Ae.Timeout(j))},k);Z.then(te,ue).finally(clearTimeout.bind(null,ve))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&w(P.prototype,Symbol.toStringTag,"Dexie.Promise"),be.env=ei(),m(P,{all:function(){var k=G.apply(null,arguments).map(cr);return new P(function(j,Z){k.length===0&&j([]);var te=k.length;k.forEach(function(ue,ve){return P.resolve(ue).then(function(je){k[ve]=je,--te||j(k)},Z)})})},resolve:function(k){return k instanceof P?k:k&&typeof k.then=="function"?new P(function(j,Z){k.then(j,Z)}):new P(Ve,!0,k)},reject:he,race:function(){var k=G.apply(null,arguments).map(cr);return new P(function(j,Z){k.map(function(te){return P.resolve(te).then(j,Z)})})},PSD:{get:function(){return Ee},set:function(k){return Ee=k}},totalEchoes:{get:function(){return Bt}},newPSD:Xt,usePSD:os,scheduler:{get:function(){return zt},set:function(k){zt=k}},rejectionMapper:{get:function(){return Ie},set:function(k){Ie=k}},follow:function(k,j){return new P(function(Z,te){return Xt(function(ue,ve){var je=Ee;je.unhandleds=[],je.onunhandled=ve,je.finalize=Ce(function(){var $e,We=this;$e=function(){We.unhandleds.length===0?ue():ve(We.unhandleds[0])},yt.push(function Ye(){$e(),yt.splice(yt.indexOf(Ye),1)}),++ct,zt(function(){--ct==0&&V()},[])},je.finalize),k()},j,Z,te)})}}),Lt&&(Lt.allSettled&&w(P,"allSettled",function(){var k=G.apply(null,arguments).map(cr);return new P(function(j){k.length===0&&j([]);var Z=k.length,te=new Array(Z);k.forEach(function(ue,ve){return P.resolve(ue).then(function(je){return te[ve]={status:"fulfilled",value:je}},function(je){return te[ve]={status:"rejected",reason:je}}).then(function(){return--Z||j(te)})})})}),Lt.any&&typeof AggregateError<"u"&&w(P,"any",function(){var k=G.apply(null,arguments).map(cr);return new P(function(j,Z){k.length===0&&Z(new AggregateError([]));var te=k.length,ue=new Array(te);k.forEach(function(ve,je){return P.resolve(ve).then(function($e){return j($e)},function($e){ue[je]=$e,--te||Z(new AggregateError(ue))})})})}),Lt.withResolvers&&(P.withResolvers=Lt.withResolvers));var Fe={awaits:0,echoes:0,id:0},it=0,Dt=[],un=0,Bt=0,Vt=0;function Xt(k,j,Z,te){var ue=Ee,ve=Object.create(ue);return ve.parent=ue,ve.ref=0,ve.global=!1,ve.id=++Vt,be.env,ve.env=Tt?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject}:{},j&&u(ve,j),++ue.ref,ve.finalize=function(){--this.parent.ref||this.parent.finalize()},te=os(ve,k,Z,te),ve.ref===0&&ve.finalize(),te}function Tn(){return Fe.id||(Fe.id=++it),++Fe.awaits,Fe.echoes+=xt,Fe.id}function $n(){return!!Fe.awaits&&(--Fe.awaits==0&&(Fe.id=0),Fe.echoes=Fe.awaits*xt,!0)}function cr(k){return Fe.echoes&&k&&k.constructor===Lt?(Tn(),k.then(function(j){return $n(),j},function(j){return $n(),$r(j)})):k}function dr(){var k=Dt[Dt.length-1];Dt.pop(),Dn(k,!1)}function Dn(k,j){var Z,te=Ee;(j?!Fe.echoes||un++&&k===Ee:!un||--un&&k===Ee)||queueMicrotask(j?(function(ue){++Bt,Fe.echoes&&--Fe.echoes!=0||(Fe.echoes=Fe.awaits=Fe.id=0),Dt.push(Ee),Dn(ue,!0)}).bind(null,k):dr),k!==Ee&&(Ee=k,te===be&&(be.env=ei()),Tt&&(Z=be.env.Promise,j=k.env,(te.global||k.global)&&(Object.defineProperty(i,"Promise",j.PromiseProp),Z.all=j.all,Z.race=j.race,Z.resolve=j.resolve,Z.reject=j.reject,j.allSettled&&(Z.allSettled=j.allSettled),j.any&&(Z.any=j.any))))}function ei(){var k=i.Promise;return Tt?{Promise:k,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject}:{}}function os(k,j,Z,te,ue){var ve=Ee;try{return Dn(k,!0),j(Z,te,ue)}finally{Dn(ve,!1)}}function ss(k,j,Z,te){return typeof k!="function"?k:function(){var ue=Ee;Z&&Tn(),Dn(j,!0);try{return k.apply(this,arguments)}finally{Dn(ue,!1),te&&queueMicrotask($n)}}}function ls(k){Promise===Lt&&Fe.echoes===0?un===0?k():enqueueNativeMicroTask(k):setTimeout(k,0)}(""+ri).indexOf("[native code]")===-1&&(Tn=$n=Oe);var $r=P.reject,us="",Yi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bg="String expected.",Co=[],Gs="__dbnames",Oi="readonly",_c="readwrite";function cs(k,j){return k?j?function(){return k.apply(this,arguments)&&j.apply(this,arguments)}:k:j}var Ws={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Vl(k){return typeof k!="string"||/\./.test(k)?function(j){return j}:function(j){return j[k]===void 0&&k in j&&delete(j=K(j))[k],j}}function Id(){throw Ae.Type()}function Bn(k,j){try{var Z=Hh(k),te=Hh(j);if(Z!==te)return Z==="Array"?1:te==="Array"?-1:Z==="binary"?1:te==="binary"?-1:Z==="string"?1:te==="string"?-1:Z==="Date"?1:te!=="Date"?NaN:-1;switch(Z){case"number":case"Date":case"string":return j<k?1:k<j?-1:0;case"binary":return function(ue,ve){for(var je=ue.length,$e=ve.length,We=je<$e?je:$e,Ye=0;Ye<We;++Ye)if(ue[Ye]!==ve[Ye])return ue[Ye]<ve[Ye]?-1:1;return je===$e?0:je<$e?-1:1}(ti(k),ti(j));case"Array":return function(ue,ve){for(var je=ue.length,$e=ve.length,We=je<$e?je:$e,Ye=0;Ye<We;++Ye){var tt=Bn(ue[Ye],ve[Ye]);if(tt!==0)return tt}return je===$e?0:je<$e?-1:1}(k,j)}}catch{}return NaN}function Hh(k){var j=typeof k;return j!="object"?j:ArrayBuffer.isView(k)?"binary":(k=me(k),k==="ArrayBuffer"?"binary":k)}function ti(k){return k instanceof Uint8Array?k:ArrayBuffer.isView(k)?new Uint8Array(k.buffer,k.byteOffset,k.byteLength):new Uint8Array(k)}var Vh=(wr.prototype._trans=function(k,j,Z){var te=this._tx||Ee.trans,ue=this.name,ve=Le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(k==="readonly"?"read":"write"," ").concat(this.name));function je(Ye,tt,qe){if(!qe.schema[ue])throw new Ae.NotFound("Table "+ue+" not part of transaction");return j(qe.idbtrans,qe)}var $e=q();try{var We=te&&te.db._novip===this.db._novip?te===Ee.trans?te._promise(k,je,Z):Xt(function(){return te._promise(k,je,Z)},{trans:te,transless:Ee.transless||Ee}):function Ye(tt,qe,rt,Ge){if(tt.idbdb&&(tt._state.openComplete||Ee.letThrough||tt._vip)){var Qe=tt._createTransaction(qe,rt,tt._dbSchema);try{Qe.create(),tt._state.PR1398_maxLoop=3}catch(at){return at.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,qe,rt,Ge)})):$r(at)}return Qe._promise(qe,function(at,Xe){return Xt(function(){return Ee.trans=Qe,Ge(at,Xe,Qe)})}).then(function(at){if(qe==="readwrite")try{Qe.idbtrans.commit()}catch{}return qe==="readonly"?at:Qe._completion.then(function(){return at})})}if(tt._state.openComplete)return $r(new Ae.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return $r(new Ae.DatabaseClosed);tt.open().catch(Oe)}return tt._state.dbReadyPromise.then(function(){return Ye(tt,qe,rt,Ge)})}(this.db,k,[this.name],je);return ve&&(We._consoleTask=ve,We=We.catch(function(Ye){return console.trace(Ye),$r(Ye)})),We}finally{$e&&L()}},wr.prototype.get=function(k,j){var Z=this;return k&&k.constructor===Object?this.where(k).first(j):k==null?$r(new Ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(te){return Z.core.get({trans:te,key:k}).then(function(ue){return Z.hook.reading.fire(ue)})}).then(j)},wr.prototype.where=function(k){if(typeof k=="string")return new this.db.WhereClause(this,k);if(s(k))return new this.db.WhereClause(this,"[".concat(k.join("+"),"]"));var j=o(k);if(j.length===1)return this.where(j[0]).equals(k[j[0]]);var Z=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&j.every(function(Ye){return 0<=$e.keyPath.indexOf(Ye)})){for(var We=0;We<j.length;++We)if(j.indexOf($e.keyPath[We])===-1)return!1;return!0}return!1}).sort(function($e,We){return $e.keyPath.length-We.keyPath.length})[0];if(Z&&this.db._maxKey!==us){var ve=Z.keyPath.slice(0,j.length);return this.where(ve).equals(ve.map(function(We){return k[We]}))}!Z&&Le&&console.warn("The query ".concat(JSON.stringify(k)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(j.join("+"),"]"));var te=this.schema.idxByName;function ue($e,We){return Bn($e,We)===0}var je=j.reduce(function(qe,We){var Ye=qe[0],tt=qe[1],qe=te[We],rt=k[We];return[Ye||qe,Ye||!qe?cs(tt,qe&&qe.multi?function(Ge){return Ge=O(Ge,We),s(Ge)&&Ge.some(function(Qe){return ue(rt,Qe)})}:function(Ge){return ue(rt,O(Ge,We))}):tt]},[null,null]),ve=je[0],je=je[1];return ve?this.where(ve.name).equals(k[ve.keyPath]).filter(je):Z?this.filter(je):this.where(j).equals("")},wr.prototype.filter=function(k){return this.toCollection().and(k)},wr.prototype.count=function(k){return this.toCollection().count(k)},wr.prototype.offset=function(k){return this.toCollection().offset(k)},wr.prototype.limit=function(k){return this.toCollection().limit(k)},wr.prototype.each=function(k){return this.toCollection().each(k)},wr.prototype.toArray=function(k){return this.toCollection().toArray(k)},wr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},wr.prototype.orderBy=function(k){return new this.db.Collection(new this.db.WhereClause(this,s(k)?"[".concat(k.join("+"),"]"):k))},wr.prototype.reverse=function(){return this.toCollection().reverse()},wr.prototype.mapToClass=function(k){var j,Z=this.db,te=this.name;function ue(){return j!==null&&j.apply(this,arguments)||this}(this.schema.mappedClass=k).prototype instanceof Id&&(function(We,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function tt(){this.constructor=We}n(We,Ye),We.prototype=Ye===null?Object.create(Ye):(tt.prototype=Ye.prototype,new tt)}(ue,j=k),Object.defineProperty(ue.prototype,"db",{get:function(){return Z},enumerable:!1,configurable:!0}),ue.prototype.table=function(){return te},k=ue);for(var ve=new Set,je=k.prototype;je;je=c(je))Object.getOwnPropertyNames(je).forEach(function(We){return ve.add(We)});function $e(We){if(!We)return We;var Ye,tt=Object.create(k.prototype);for(Ye in We)if(!ve.has(Ye))try{tt[Ye]=We[Ye]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),k},wr.prototype.defineClass=function(){return this.mapToClass(function(k){u(this,k)})},wr.prototype.add=function(k,j){var Z=this,te=this.schema.primKey,ue=te.auto,ve=te.keyPath,je=k;return ve&&ue&&(je=Vl(ve)(k)),this._trans("readwrite",function($e){return Z.core.mutate({trans:$e,type:"add",keys:j!=null?[j]:null,values:[je]})}).then(function($e){return $e.numFailures?P.reject($e.failures[0]):$e.lastResult}).then(function($e){if(ve)try{I(k,ve,$e)}catch{}return $e})},wr.prototype.update=function(k,j){return typeof k!="object"||s(k)?this.where(":id").equals(k).modify(j):(k=O(k,this.schema.primKey.keyPath),k===void 0?$r(new Ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(k).modify(j))},wr.prototype.put=function(k,j){var Z=this,te=this.schema.primKey,ue=te.auto,ve=te.keyPath,je=k;return ve&&ue&&(je=Vl(ve)(k)),this._trans("readwrite",function($e){return Z.core.mutate({trans:$e,type:"put",values:[je],keys:j!=null?[j]:null})}).then(function($e){return $e.numFailures?P.reject($e.failures[0]):$e.lastResult}).then(function($e){if(ve)try{I(k,ve,$e)}catch{}return $e})},wr.prototype.delete=function(k){var j=this;return this._trans("readwrite",function(Z){return j.core.mutate({trans:Z,type:"delete",keys:[k]})}).then(function(Z){return Z.numFailures?P.reject(Z.failures[0]):void 0})},wr.prototype.clear=function(){var k=this;return this._trans("readwrite",function(j){return k.core.mutate({trans:j,type:"deleteRange",range:Ws})}).then(function(j){return j.numFailures?P.reject(j.failures[0]):void 0})},wr.prototype.bulkGet=function(k){var j=this;return this._trans("readonly",function(Z){return j.core.getMany({keys:k,trans:Z}).then(function(te){return te.map(function(ue){return j.hook.reading.fire(ue)})})})},wr.prototype.bulkAdd=function(k,j,Z){var te=this,ue=Array.isArray(j)?j:void 0,ve=(Z=Z||(ue?void 0:j))?Z.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==k.length)throw new Ae.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&$e?k.map(Vl(Ye)):k;return te.core.mutate({trans:je,type:"add",keys:ue,values:Ye,wantResults:ve}).then(function(Qe){var qe=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(qe===0)return ve?rt:Ge;throw new Me("".concat(te.name,".bulkAdd(): ").concat(qe," of ").concat(We," operations failed"),Qe)})})},wr.prototype.bulkPut=function(k,j,Z){var te=this,ue=Array.isArray(j)?j:void 0,ve=(Z=Z||(ue?void 0:j))?Z.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==k.length)throw new Ae.InvalidArgument("Arguments objects and keys must have the same length");var We=k.length,Ye=Ye&&$e?k.map(Vl(Ye)):k;return te.core.mutate({trans:je,type:"put",keys:ue,values:Ye,wantResults:ve}).then(function(Qe){var qe=Qe.numFailures,rt=Qe.results,Ge=Qe.lastResult,Qe=Qe.failures;if(qe===0)return ve?rt:Ge;throw new Me("".concat(te.name,".bulkPut(): ").concat(qe," of ").concat(We," operations failed"),Qe)})})},wr.prototype.bulkUpdate=function(k){var j=this,Z=this.core,te=k.map(function(je){return je.key}),ue=k.map(function(je){return je.changes}),ve=[];return this._trans("readwrite",function(je){return Z.getMany({trans:je,keys:te,cache:"clone"}).then(function($e){var We=[],Ye=[];k.forEach(function(qe,rt){var Ge=qe.key,Qe=qe.changes,at=$e[rt];if(at){for(var Xe=0,dt=Object.keys(Qe);Xe<dt.length;Xe++){var gt=dt[Xe],bt=Qe[gt];if(gt===j.schema.primKey.keyPath){if(Bn(bt,Ge)!==0)throw new Ae.Constraint("Cannot update primary key in bulkUpdate()")}else I(at,gt,bt)}ve.push(rt),We.push(Ge),Ye.push(at)}});var tt=We.length;return Z.mutate({trans:je,type:"put",keys:We,values:Ye,updates:{keys:te,changeSpecs:ue}}).then(function(qe){var rt=qe.numFailures,Ge=qe.failures;if(rt===0)return tt;for(var Qe=0,at=Object.keys(Ge);Qe<at.length;Qe++){var Xe,dt=at[Qe],gt=ve[Number(dt)];gt!=null&&(Xe=Ge[dt],delete Ge[dt],Ge[gt]=Xe)}throw new Me("".concat(j.name,".bulkUpdate(): ").concat(rt," of ").concat(tt," operations failed"),Ge)})})})},wr.prototype.bulkDelete=function(k){var j=this,Z=k.length;return this._trans("readwrite",function(te){return j.core.mutate({trans:te,type:"delete",keys:k})}).then(function(je){var ue=je.numFailures,ve=je.lastResult,je=je.failures;if(ue===0)return ve;throw new Me("".concat(j.name,".bulkDelete(): ").concat(ue," of ").concat(Z," operations failed"),je)})},wr);function wr(){}function ds(k){function j(je,$e){if($e){for(var We=arguments.length,Ye=new Array(We-1);--We;)Ye[We-1]=arguments[We];return Z[je].subscribe.apply(null,Ye),k}if(typeof je=="string")return Z[je]}var Z={};j.addEventType=ve;for(var te=1,ue=arguments.length;te<ue;++te)ve(arguments[te]);return j;function ve(je,$e,We){if(typeof je!="object"){var Ye;$e=$e||X;var tt={subscribers:[],fire:We=We||Oe,subscribe:function(qe){tt.subscribers.indexOf(qe)===-1&&(tt.subscribers.push(qe),tt.fire=$e(tt.fire,qe))},unsubscribe:function(qe){tt.subscribers=tt.subscribers.filter(function(rt){return rt!==qe}),tt.fire=tt.subscribers.reduce($e,We)}};return Z[je]=j[je]=tt}o(Ye=je).forEach(function(qe){var rt=Ye[qe];if(s(rt))ve(qe,Ye[qe][0],Ye[qe][1]);else{if(rt!=="asap")throw new Ae.InvalidArgument("Invalid event config");var Ge=ve(qe,Te,function(){for(var Qe=arguments.length,at=new Array(Qe);Qe--;)at[Qe]=arguments[Qe];Ge.subscribers.forEach(function(Xe){A(function(){Xe.apply(null,at)})})})}})}}function Gl(k,j){return v(j).from({prototype:k}),j}function ko(k,j){return!(k.filter||k.algorithm||k.or)&&(j?k.justLimit:!k.replayFilter)}function Gh(k,j){k.filter=cs(k.filter,j)}function $a(k,j,Z){var te=k.replayFilter;k.replayFilter=te?function(){return cs(te(),j())}:j,k.justLimit=Z&&!te}function Wl(k,j){if(k.isPrimKey)return j.primaryKey;var Z=j.getIndexByKeyPath(k.index);if(!Z)throw new Ae.Schema("KeyPath "+k.index+" on object store "+j.name+" is not indexed");return Z}function Wh(k,j,Z){var te=Wl(k,j.schema);return j.openCursor({trans:Z,values:!k.keysOnly,reverse:k.dir==="prev",unique:!!k.unique,query:{index:te,range:k.range}})}function Kl(k,j,Z,te){var ue=k.replayFilter?cs(k.filter,k.replayFilter()):k.filter;if(k.or){var ve={},je=function($e,We,Ye){var tt,qe;ue&&!ue(We,Ye,function(rt){return We.stop(rt)},function(rt){return We.fail(rt)})||((qe=""+(tt=We.primaryKey))=="[object ArrayBuffer]"&&(qe=""+new Uint8Array(tt)),h(ve,qe)||(ve[qe]=!0,j($e,We,Ye)))};return Promise.all([k.or._iterate(je,Z),Ks(Wh(k,te,Z),k.algorithm,je,!k.keysOnly&&k.valueMapper)])}return Ks(Wh(k,te,Z),cs(k.algorithm,ue),j,!k.keysOnly&&k.valueMapper)}function Ks(k,j,Z,te){var ue=de(te?function(ve,je,$e){return Z(te(ve),je,$e)}:Z);return k.then(function(ve){if(ve)return ve.start(function(){var je=function(){return ve.continue()};j&&!j(ve,function($e){return je=$e},function($e){ve.stop($e),je=Oe},function($e){ve.fail($e),je=Oe})||ue(ve.value,ve,function($e){return je=$e}),je()})})}var Zl=(Kh.prototype.execute=function(k){var j=this["@@propmod"];if(j.add!==void 0){var Z=j.add;if(s(Z))return a(a([],s(k)?k:[],!0),Z).sort();if(typeof Z=="number")return(Number(k)||0)+Z;if(typeof Z=="bigint")try{return BigInt(k)+Z}catch{return BigInt(0)+Z}throw new TypeError("Invalid term ".concat(Z))}if(j.remove!==void 0){var te=j.remove;if(s(te))return s(k)?k.filter(function(ue){return!te.includes(ue)}).sort():[];if(typeof te=="number")return Number(k)-te;if(typeof te=="bigint")try{return BigInt(k)-te}catch{return BigInt(0)-te}throw new TypeError("Invalid subtrahend ".concat(te))}return Z=(Z=j.replacePrefix)===null||Z===void 0?void 0:Z[0],Z&&typeof k=="string"&&k.startsWith(Z)?j.replacePrefix[1]+k.substring(Z.length):k},Kh);function Kh(k){this["@@propmod"]=k}var Yl=(Gn.prototype._read=function(k,j){var Z=this._ctx;return Z.error?Z.table._trans(null,$r.bind(null,Z.error)):Z.table._trans("readonly",k).then(j)},Gn.prototype._write=function(k){var j=this._ctx;return j.error?j.table._trans(null,$r.bind(null,j.error)):j.table._trans("readwrite",k,"locked")},Gn.prototype._addAlgorithm=function(k){var j=this._ctx;j.algorithm=cs(j.algorithm,k)},Gn.prototype._iterate=function(k,j){return Kl(this._ctx,k,j,this._ctx.table.core)},Gn.prototype.clone=function(k){var j=Object.create(this.constructor.prototype),Z=Object.create(this._ctx);return k&&u(Z,k),j._ctx=Z,j},Gn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Gn.prototype.each=function(k){var j=this._ctx;return this._read(function(Z){return Kl(j,k,Z,j.table.core)})},Gn.prototype.count=function(k){var j=this;return this._read(function(Z){var te=j._ctx,ue=te.table.core;if(ko(te,!0))return ue.count({trans:Z,query:{index:Wl(te,ue.schema),range:te.range}}).then(function(je){return Math.min(je,te.limit)});var ve=0;return Kl(te,function(){return++ve,!1},Z,ue).then(function(){return ve})}).then(k)},Gn.prototype.sortBy=function(k,j){var Z=k.split(".").reverse(),te=Z[0],ue=Z.length-1;function ve(We,Ye){return Ye?ve(We[Z[Ye]],Ye-1):We[te]}var je=this._ctx.dir==="next"?1:-1;function $e(We,Ye){return Bn(ve(We,ue),ve(Ye,ue))*je}return this.toArray(function(We){return We.sort($e)}).then(j)},Gn.prototype.toArray=function(k){var j=this;return this._read(function(Z){var te=j._ctx;if(te.dir==="next"&&ko(te,!0)&&0<te.limit){var ue=te.valueMapper,ve=Wl(te,te.table.core.schema);return te.table.core.query({trans:Z,limit:te.limit,values:!0,query:{index:ve,range:te.range}}).then(function($e){return $e=$e.result,ue?$e.map(ue):$e})}var je=[];return Kl(te,function($e){return je.push($e)},Z,te.table.core).then(function(){return je})},k)},Gn.prototype.offset=function(k){var j=this._ctx;return k<=0||(j.offset+=k,ko(j)?$a(j,function(){var Z=k;return function(te,ue){return Z===0||(Z===1?--Z:ue(function(){te.advance(Z),Z=0}),!1)}}):$a(j,function(){var Z=k;return function(){return--Z<0}})),this},Gn.prototype.limit=function(k){return this._ctx.limit=Math.min(this._ctx.limit,k),$a(this._ctx,function(){var j=k;return function(Z,te,ue){return--j<=0&&te(ue),0<=j}},!0),this},Gn.prototype.until=function(k,j){return Gh(this._ctx,function(Z,te,ue){return!k(Z.value)||(te(ue),j)}),this},Gn.prototype.first=function(k){return this.limit(1).toArray(function(j){return j[0]}).then(k)},Gn.prototype.last=function(k){return this.reverse().first(k)},Gn.prototype.filter=function(k){var j;return Gh(this._ctx,function(Z){return k(Z.value)}),(j=this._ctx).isMatch=cs(j.isMatch,k),this},Gn.prototype.and=function(k){return this.filter(k)},Gn.prototype.or=function(k){return new this.db.WhereClause(this._ctx.table,k,this)},Gn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Gn.prototype.desc=function(){return this.reverse()},Gn.prototype.eachKey=function(k){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(Z,te){k(te.key,te)})},Gn.prototype.eachUniqueKey=function(k){return this._ctx.unique="unique",this.eachKey(k)},Gn.prototype.eachPrimaryKey=function(k){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(Z,te){k(te.primaryKey,te)})},Gn.prototype.keys=function(k){var j=this._ctx;j.keysOnly=!j.isMatch;var Z=[];return this.each(function(te,ue){Z.push(ue.key)}).then(function(){return Z}).then(k)},Gn.prototype.primaryKeys=function(k){var j=this._ctx;if(j.dir==="next"&&ko(j,!0)&&0<j.limit)return this._read(function(te){var ue=Wl(j,j.table.core.schema);return j.table.core.query({trans:te,values:!1,limit:j.limit,query:{index:ue,range:j.range}})}).then(function(te){return te.result}).then(k);j.keysOnly=!j.isMatch;var Z=[];return this.each(function(te,ue){Z.push(ue.primaryKey)}).then(function(){return Z}).then(k)},Gn.prototype.uniqueKeys=function(k){return this._ctx.unique="unique",this.keys(k)},Gn.prototype.firstKey=function(k){return this.limit(1).keys(function(j){return j[0]}).then(k)},Gn.prototype.lastKey=function(k){return this.reverse().firstKey(k)},Gn.prototype.distinct=function(){var k=this._ctx,k=k.index&&k.table.schema.idxByName[k.index];if(!k||!k.multi)return this;var j={};return Gh(this._ctx,function(ue){var te=ue.primaryKey.toString(),ue=h(j,te);return j[te]=!0,!ue}),this},Gn.prototype.modify=function(k){var j=this,Z=this._ctx;return this._write(function(te){var ue,ve,je;je=typeof k=="function"?k:(ue=o(k),ve=ue.length,function(Xe){for(var dt=!1,gt=0;gt<ve;++gt){var bt=ue[gt],wt=k[bt],jt=O(Xe,bt);wt instanceof Zl?(I(Xe,bt,wt.execute(jt)),dt=!0):jt!==wt&&(I(Xe,bt,wt),dt=!0)}return dt});var $e=Z.table.core,qe=$e.schema.primaryKey,We=qe.outbound,Ye=qe.extractKey,tt=200,qe=j.db._options.modifyChunkSize;qe&&(tt=typeof qe=="object"?qe[$e.name]||qe["*"]||200:qe);function rt(Xe,bt){var gt=bt.failures,bt=bt.numFailures;Qe+=Xe-bt;for(var wt=0,jt=o(gt);wt<jt.length;wt++){var Ut=jt[wt];Ge.push(gt[Ut])}}var Ge=[],Qe=0,at=[];return j.clone().primaryKeys().then(function(Xe){function dt(bt){var wt=Math.min(tt,Xe.length-bt);return $e.getMany({trans:te,keys:Xe.slice(bt,bt+wt),cache:"immutable"}).then(function(jt){for(var Ut=[],Nt=[],$t=We?[]:null,qt=[],It=0;It<wt;++It){var Zt=jt[It],cn={value:K(Zt),primKey:Xe[bt+It]};je.call(cn,cn.value,cn)!==!1&&(cn.value==null?qt.push(Xe[bt+It]):We||Bn(Ye(Zt),Ye(cn.value))===0?(Nt.push(cn.value),We&&$t.push(Xe[bt+It])):(qt.push(Xe[bt+It]),Ut.push(cn.value)))}return Promise.resolve(0<Ut.length&&$e.mutate({trans:te,type:"add",values:Ut}).then(function(dn){for(var Sn in dn.failures)qt.splice(parseInt(Sn),1);rt(Ut.length,dn)})).then(function(){return(0<Nt.length||gt&&typeof k=="object")&&$e.mutate({trans:te,type:"put",keys:$t,values:Nt,criteria:gt,changeSpec:typeof k!="function"&&k,isAdditionalChunk:0<bt}).then(function(dn){return rt(Nt.length,dn)})}).then(function(){return(0<qt.length||gt&&k===Od)&&$e.mutate({trans:te,type:"delete",keys:qt,criteria:gt,isAdditionalChunk:0<bt}).then(function(dn){return rt(qt.length,dn)})}).then(function(){return Xe.length>bt+wt&&dt(bt+tt)})})}var gt=ko(Z)&&Z.limit===1/0&&(typeof k!="function"||k===Od)&&{index:Z.index,range:Z.range};return dt(0).then(function(){if(0<Ge.length)throw new ke("Error modifying one or more objects",Ge,Qe,at);return Xe.length})})})},Gn.prototype.delete=function(){var k=this._ctx,j=k.range;return ko(k)&&(k.isPrimKey||j.type===3)?this._write(function(Z){var te=k.table.core.schema.primaryKey,ue=j;return k.table.core.count({trans:Z,query:{index:te,range:ue}}).then(function(ve){return k.table.core.mutate({trans:Z,type:"deleteRange",range:ue}).then(function(je){var $e=je.failures;if(je.lastResult,je.results,je=je.numFailures,je)throw new ke("Could not delete some values",Object.keys($e).map(function(We){return $e[We]}),ve-je);return ve-je})})}):this.modify(Od)},Gn);function Gn(){}var Od=function(k,j){return j.value=null};function vg(k,j){return k<j?-1:k===j?0:1}function Zh(k,j){return j<k?-1:k===j?0:1}function ni(k,j,Z){return k=k instanceof Ys?new k.Collection(k):k,k._ctx.error=new(Z||TypeError)(j),k}function Xl(k){return new k.Collection(k,function(){return Dd("")}).limit(0)}function Zs(k,j,Z,te){var ue,ve,je,$e,We,Ye,tt,qe=Z.length;if(!Z.every(function(Qe){return typeof Qe=="string"}))return ni(k,bg);function rt(Qe){ue=Qe==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},ve=Qe==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},je=Qe==="next"?vg:Zh;var at=Z.map(function(Xe){return{lower:ve(Xe),upper:ue(Xe)}}).sort(function(Xe,dt){return je(Xe.lower,dt.lower)});$e=at.map(function(Xe){return Xe.upper}),We=at.map(function(Xe){return Xe.lower}),tt=(Ye=Qe)==="next"?"":te}rt("next"),k=new k.Collection(k,function(){return Xi($e[0],We[qe-1]+te)}),k._ondirectionchange=function(Qe){rt(Qe)};var Ge=0;return k._addAlgorithm(function(Qe,at,Xe){var dt=Qe.key;if(typeof dt!="string")return!1;var gt=ve(dt);if(j(gt,We,Ge))return!0;for(var bt=null,wt=Ge;wt<qe;++wt){var jt=function(Ut,Nt,$t,qt,It,Zt){for(var cn=Math.min(Ut.length,qt.length),dn=-1,Sn=0;Sn<cn;++Sn){var Ia=Nt[Sn];if(Ia!==qt[Sn])return It(Ut[Sn],$t[Sn])<0?Ut.substr(0,Sn)+$t[Sn]+$t.substr(Sn+1):It(Ut[Sn],qt[Sn])<0?Ut.substr(0,Sn)+qt[Sn]+$t.substr(Sn+1):0<=dn?Ut.substr(0,dn)+Nt[dn]+$t.substr(dn+1):null;It(Ut[Sn],Ia)<0&&(dn=Sn)}return cn<qt.length&&Zt==="next"?Ut+$t.substr(Ut.length):cn<Ut.length&&Zt==="prev"?Ut.substr(0,$t.length):dn<0?null:Ut.substr(0,dn)+qt[dn]+$t.substr(dn+1)}(dt,gt,$e[wt],We[wt],je,Ye);jt===null&&bt===null?Ge=wt+1:(bt===null||0<je(bt,jt))&&(bt=jt)}return at(bt!==null?function(){Qe.continue(bt+tt)}:Xe),!1}),k}function Xi(k,j,Z,te){return{type:2,lower:k,upper:j,lowerOpen:Z,upperOpen:te}}function Dd(k){return{type:1,lower:k,upper:k}}var Ys=(Object.defineProperty(Nr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Nr.prototype.between=function(k,j,Z,te){Z=Z!==!1,te=te===!0;try{return 0<this._cmp(k,j)||this._cmp(k,j)===0&&(Z||te)&&(!Z||!te)?Xl(this):new this.Collection(this,function(){return Xi(k,j,!Z,!te)})}catch{return ni(this,Yi)}},Nr.prototype.equals=function(k){return k==null?ni(this,Yi):new this.Collection(this,function(){return Dd(k)})},Nr.prototype.above=function(k){return k==null?ni(this,Yi):new this.Collection(this,function(){return Xi(k,void 0,!0)})},Nr.prototype.aboveOrEqual=function(k){return k==null?ni(this,Yi):new this.Collection(this,function(){return Xi(k,void 0,!1)})},Nr.prototype.below=function(k){return k==null?ni(this,Yi):new this.Collection(this,function(){return Xi(void 0,k,!1,!0)})},Nr.prototype.belowOrEqual=function(k){return k==null?ni(this,Yi):new this.Collection(this,function(){return Xi(void 0,k)})},Nr.prototype.startsWith=function(k){return typeof k!="string"?ni(this,bg):this.between(k,k+us,!0,!0)},Nr.prototype.startsWithIgnoreCase=function(k){return k===""?this.startsWith(k):Zs(this,function(j,Z){return j.indexOf(Z[0])===0},[k],us)},Nr.prototype.equalsIgnoreCase=function(k){return Zs(this,function(j,Z){return j===Z[0]},[k],"")},Nr.prototype.anyOfIgnoreCase=function(){var k=G.apply(ae,arguments);return k.length===0?Xl(this):Zs(this,function(j,Z){return Z.indexOf(j)!==-1},k,"")},Nr.prototype.startsWithAnyOfIgnoreCase=function(){var k=G.apply(ae,arguments);return k.length===0?Xl(this):Zs(this,function(j,Z){return Z.some(function(te){return j.indexOf(te)===0})},k,us)},Nr.prototype.anyOf=function(){var k=this,j=G.apply(ae,arguments),Z=this._cmp;try{j.sort(Z)}catch{return ni(this,Yi)}if(j.length===0)return Xl(this);var te=new this.Collection(this,function(){return Xi(j[0],j[j.length-1])});te._ondirectionchange=function(ve){Z=ve==="next"?k._ascending:k._descending,j.sort(Z)};var ue=0;return te._addAlgorithm(function(ve,je,$e){for(var We=ve.key;0<Z(We,j[ue]);)if(++ue===j.length)return je($e),!1;return Z(We,j[ue])===0||(je(function(){ve.continue(j[ue])}),!1)}),te},Nr.prototype.notEqual=function(k){return this.inAnyRange([[-1/0,k],[k,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Nr.prototype.noneOf=function(){var k=G.apply(ae,arguments);if(k.length===0)return new this.Collection(this);try{k.sort(this._ascending)}catch{return ni(this,Yi)}var j=k.reduce(function(Z,te){return Z?Z.concat([[Z[Z.length-1][1],te]]):[[-1/0,te]]},null);return j.push([k[k.length-1],this.db._maxKey]),this.inAnyRange(j,{includeLowers:!1,includeUppers:!1})},Nr.prototype.inAnyRange=function(dt,j){var Z=this,te=this._cmp,ue=this._ascending,ve=this._descending,je=this._min,$e=this._max;if(dt.length===0)return Xl(this);if(!dt.every(function(gt){return gt[0]!==void 0&&gt[1]!==void 0&&ue(gt[0],gt[1])<=0}))return ni(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ae.InvalidArgument);var We=!j||j.includeLowers!==!1,Ye=j&&j.includeUppers===!0,tt,qe=ue;function rt(gt,bt){return qe(gt[0],bt[0])}try{(tt=dt.reduce(function(gt,bt){for(var wt=0,jt=gt.length;wt<jt;++wt){var Ut=gt[wt];if(te(bt[0],Ut[1])<0&&0<te(bt[1],Ut[0])){Ut[0]=je(Ut[0],bt[0]),Ut[1]=$e(Ut[1],bt[1]);break}}return wt===jt&&gt.push(bt),gt},[])).sort(rt)}catch{return ni(this,Yi)}var Ge=0,Qe=Ye?function(gt){return 0<ue(gt,tt[Ge][1])}:function(gt){return 0<=ue(gt,tt[Ge][1])},at=We?function(gt){return 0<ve(gt,tt[Ge][0])}:function(gt){return 0<=ve(gt,tt[Ge][0])},Xe=Qe,dt=new this.Collection(this,function(){return Xi(tt[0][0],tt[tt.length-1][1],!We,!Ye)});return dt._ondirectionchange=function(gt){qe=gt==="next"?(Xe=Qe,ue):(Xe=at,ve),tt.sort(rt)},dt._addAlgorithm(function(gt,bt,wt){for(var jt,Ut=gt.key;Xe(Ut);)if(++Ge===tt.length)return bt(wt),!1;return!Qe(jt=Ut)&&!at(jt)||(Z._cmp(Ut,tt[Ge][1])===0||Z._cmp(Ut,tt[Ge][0])===0||bt(function(){qe===ue?gt.continue(tt[Ge][0]):gt.continue(tt[Ge][1])}),!1)}),dt},Nr.prototype.startsWithAnyOf=function(){var k=G.apply(ae,arguments);return k.every(function(j){return typeof j=="string"})?k.length===0?Xl(this):this.inAnyRange(k.map(function(j){return[j,j+us]})):ni(this,"startsWithAnyOf() only works with strings")},Nr);function Nr(){}function Di(k){return de(function(j){return Xs(j),k(j.target.error),!1})}function Xs(k){k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault()}var Jl="storagemutated",Js="x-storagemutated-1",ma=ds(null,Jl),Yh=(Ba.prototype._lock=function(){return C(!Ee.global),++this._reculock,this._reculock!==1||Ee.global||(Ee.lockOwnerFor=this),this},Ba.prototype._unlock=function(){if(C(!Ee.global),--this._reculock==0)for(Ee.global||(Ee.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var k=this._blockedFuncs.shift();try{os(k[1],k[0])}catch{}}return this},Ba.prototype._locked=function(){return this._reculock&&Ee.lockOwnerFor!==this},Ba.prototype.create=function(k){var j=this;if(!this.mode)return this;var Z=this.db.idbdb,te=this.db._state.dbOpenError;if(C(!this.idbtrans),!k&&!Z)switch(te&&te.name){case"DatabaseClosedError":throw new Ae.DatabaseClosed(te);case"MissingAPIError":throw new Ae.MissingAPI(te.message,te);default:throw new Ae.OpenFailed(te)}if(!this.active)throw new Ae.TransactionInactive;return C(this._completion._state===null),(k=this.idbtrans=k||(this.db.core||Z).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=de(function(ue){Xs(ue),j._reject(k.error)}),k.onabort=de(function(ue){Xs(ue),j.active&&j._reject(new Ae.Abort(k.error)),j.active=!1,j.on("abort").fire(ue)}),k.oncomplete=de(function(){j.active=!1,j._resolve(),"mutatedParts"in k&&ma.storagemutated.fire(k.mutatedParts)}),this},Ba.prototype._promise=function(k,j,Z){var te=this;if(k==="readwrite"&&this.mode!=="readwrite")return $r(new Ae.ReadOnly("Transaction is readonly"));if(!this.active)return $r(new Ae.TransactionInactive);if(this._locked())return new P(function(ve,je){te._blockedFuncs.push([function(){te._promise(k,j,Z).then(ve,je)},Ee])});if(Z)return Xt(function(){var ve=new P(function(je,$e){te._lock();var We=j(je,$e,te);We&&We.then&&We.then(je,$e)});return ve.finally(function(){return te._unlock()}),ve._lib=!0,ve});var ue=new P(function(ve,je){var $e=j(ve,je,te);$e&&$e.then&&$e.then(ve,je)});return ue._lib=!0,ue},Ba.prototype._root=function(){return this.parent?this.parent._root():this},Ba.prototype.waitFor=function(k){var j,Z=this._root(),te=P.resolve(k);Z._waitingFor?Z._waitingFor=Z._waitingFor.then(function(){return te}):(Z._waitingFor=te,Z._waitingQueue=[],j=Z.idbtrans.objectStore(Z.storeNames[0]),function ve(){for(++Z._spinCount;Z._waitingQueue.length;)Z._waitingQueue.shift()();Z._waitingFor&&(j.get(-1/0).onsuccess=ve)}());var ue=Z._waitingFor;return new P(function(ve,je){te.then(function($e){return Z._waitingQueue.push(de(ve.bind(null,$e)))},function($e){return Z._waitingQueue.push(de(je.bind(null,$e)))}).finally(function(){Z._waitingFor===ue&&(Z._waitingFor=null)})})},Ba.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ae.Abort))},Ba.prototype.table=function(k){var j=this._memoizedTables||(this._memoizedTables={});if(h(j,k))return j[k];var Z=this.schema[k];if(!Z)throw new Ae.NotFound("Table "+k+" not part of transaction");return Z=new this.db.Table(k,Z,this),Z.core=this.db.core.table(k),j[k]=Z},Ba);function Ba(){}function Ji(k,j,Z,te,ue,ve,je){return{name:k,keyPath:j,unique:Z,multi:te,auto:ue,compound:ve,src:(Z&&!je?"&":"")+(te?"*":"")+(ue?"++":"")+jd(j)}}function jd(k){return typeof k=="string"?k:k?"["+[].join.call(k,"+")+"]":""}function Ql(k,j,Z){return{name:k,primKey:j,indexes:Z,mappedClass:null,idxByName:(te=function(ue){return[ue.name,ue]},Z.reduce(function(ue,ve,je){return je=te(ve,je),je&&(ue[je[0]]=je[1]),ue},{}))};var te}var eu=function(k){try{return k.only([[]]),eu=function(){return[[]]},[[]]}catch{return eu=function(){return us},us}};function tu(k){return k==null?function(){}:typeof k=="string"?(j=k).split(".").length===1?function(Z){return Z[j]}:function(Z){return O(Z,j)}:function(Z){return O(Z,k)};var j}function xc(k){return[].slice.call(k)}var wg=0;function Qr(k){return k==null?":id":typeof k=="string"?k:"[".concat(k.join("+"),"]")}function Qs(k,j,We){function te(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Xe.lower,Qe=Xe.upper,at=Xe.lowerOpen,Xe=Xe.upperOpen;return Ge===void 0?Qe===void 0?null:j.upperBound(Qe,!!Xe):Qe===void 0?j.lowerBound(Ge,!!at):j.bound(Ge,Qe,!!at,!!Xe)}function ue(rt){var Ge,Qe=rt.name;return{name:Qe,schema:rt,mutate:function(at){var Xe=at.trans,dt=at.type,gt=at.keys,bt=at.values,wt=at.range;return new Promise(function(jt,Ut){jt=de(jt);var Nt=Xe.objectStore(Qe),$t=Nt.keyPath==null,qt=dt==="put"||dt==="add";if(!qt&&dt!=="delete"&&dt!=="deleteRange")throw new Error("Invalid operation type: "+dt);var It,Zt=(gt||bt||{length:1}).length;if(gt&&bt&&gt.length!==bt.length)throw new Error("Given keys array must have same length as given values array.");if(Zt===0)return jt({numFailures:0,failures:{},results:[],lastResult:void 0});function cn(ya){++Ia,Xs(ya)}var dn=[],Sn=[],Ia=0;if(dt==="deleteRange"){if(wt.type===4)return jt({numFailures:Ia,failures:Sn,results:[],lastResult:void 0});wt.type===3?dn.push(It=Nt.clear()):dn.push(It=Nt.delete(te(wt)))}else{var $t=qt?$t?[bt,gt]:[bt,null]:[gt,null],yn=$t[0],Kr=$t[1];if(qt)for(var ea=0;ea<Zt;++ea)dn.push(It=Kr&&Kr[ea]!==void 0?Nt[dt](yn[ea],Kr[ea]):Nt[dt](yn[ea])),It.onerror=cn;else for(ea=0;ea<Zt;++ea)dn.push(It=Nt[dt](yn[ea])),It.onerror=cn}function Ao(ya){ya=ya.target.result,dn.forEach(function(eo,ms){return eo.error!=null&&(Sn[ms]=eo.error)}),jt({numFailures:Ia,failures:Sn,results:dt==="delete"?gt:dn.map(function(eo){return eo.result}),lastResult:ya})}It.onerror=function(ya){cn(ya),Ao(ya)},It.onsuccess=Ao})},getMany:function(at){var Xe=at.trans,dt=at.keys;return new Promise(function(gt,bt){gt=de(gt);for(var wt,jt=Xe.objectStore(Qe),Ut=dt.length,Nt=new Array(Ut),$t=0,qt=0,It=function(dn){dn=dn.target,Nt[dn._pos]=dn.result,++qt===$t&&gt(Nt)},Zt=Di(bt),cn=0;cn<Ut;++cn)dt[cn]!=null&&((wt=jt.get(dt[cn]))._pos=cn,wt.onsuccess=It,wt.onerror=Zt,++$t);$t===0&&gt(Nt)})},get:function(at){var Xe=at.trans,dt=at.key;return new Promise(function(gt,bt){gt=de(gt);var wt=Xe.objectStore(Qe).get(dt);wt.onsuccess=function(jt){return gt(jt.target.result)},wt.onerror=Di(bt)})},query:(Ge=Ye,function(at){return new Promise(function(Xe,dt){Xe=de(Xe);var gt,bt,wt,$t=at.trans,jt=at.values,Ut=at.limit,It=at.query,Nt=Ut===1/0?void 0:Ut,qt=It.index,It=It.range,$t=$t.objectStore(Qe),qt=qt.isPrimaryKey?$t:$t.index(qt.name),It=te(It);if(Ut===0)return Xe({result:[]});Ge?((Nt=jt?qt.getAll(It,Nt):qt.getAllKeys(It,Nt)).onsuccess=function(Zt){return Xe({result:Zt.target.result})},Nt.onerror=Di(dt)):(gt=0,bt=!jt&&"openKeyCursor"in qt?qt.openKeyCursor(It):qt.openCursor(It),wt=[],bt.onsuccess=function(Zt){var cn=bt.result;return cn?(wt.push(jt?cn.value:cn.primaryKey),++gt===Ut?Xe({result:wt}):void cn.continue()):Xe({result:wt})},bt.onerror=Di(dt))})}),openCursor:function(at){var Xe=at.trans,dt=at.values,gt=at.query,bt=at.reverse,wt=at.unique;return new Promise(function(jt,Ut){jt=de(jt);var qt=gt.index,Nt=gt.range,$t=Xe.objectStore(Qe),$t=qt.isPrimaryKey?$t:$t.index(qt.name),qt=bt?wt?"prevunique":"prev":wt?"nextunique":"next",It=!dt&&"openKeyCursor"in $t?$t.openKeyCursor(te(Nt),qt):$t.openCursor(te(Nt),qt);It.onerror=Di(Ut),It.onsuccess=de(function(Zt){var cn,dn,Sn,Ia,yn=It.result;yn?(yn.___id=++wg,yn.done=!1,cn=yn.continue.bind(yn),dn=(dn=yn.continuePrimaryKey)&&dn.bind(yn),Sn=yn.advance.bind(yn),Ia=function(){throw new Error("Cursor not stopped")},yn.trans=Xe,yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=function(){throw new Error("Cursor not started")},yn.fail=de(Ut),yn.next=function(){var Kr=this,ea=1;return this.start(function(){return ea--?Kr.continue():Kr.stop()}).then(function(){return Kr})},yn.start=function(Kr){function ea(){if(It.result)try{Kr()}catch(ya){yn.fail(ya)}else yn.done=!0,yn.start=function(){throw new Error("Cursor behind last entry")},yn.stop()}var Ao=new Promise(function(ya,eo){ya=de(ya),It.onerror=Di(eo),yn.fail=eo,yn.stop=function(ms){yn.stop=yn.continue=yn.continuePrimaryKey=yn.advance=Ia,ya(ms)}});return It.onsuccess=de(function(ya){It.onsuccess=ea,ea()}),yn.continue=cn,yn.continuePrimaryKey=dn,yn.advance=Sn,ea(),Ao},jt(yn)):jt(null)},Ut)})},count:function(at){var Xe=at.query,dt=at.trans,gt=Xe.index,bt=Xe.range;return new Promise(function(wt,jt){var Ut=dt.objectStore(Qe),Nt=gt.isPrimaryKey?Ut:Ut.index(gt.name),Ut=te(bt),Nt=Ut?Nt.count(Ut):Nt.count();Nt.onsuccess=de(function($t){return wt($t.target.result)}),Nt.onerror=Di(jt)})}}}var ve,je,$e,tt=(je=We,$e=xc((ve=k).objectStoreNames),{schema:{name:ve.name,tables:$e.map(function(rt){return je.objectStore(rt)}).map(function(rt){var Ge=rt.keyPath,Xe=rt.autoIncrement,Qe=s(Ge),at={},Xe={name:rt.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:Qe,keyPath:Ge,autoIncrement:Xe,unique:!0,extractKey:tu(Ge)},indexes:xc(rt.indexNames).map(function(dt){return rt.index(dt)}).map(function(wt){var gt=wt.name,bt=wt.unique,jt=wt.multiEntry,wt=wt.keyPath,jt={name:gt,compound:s(wt),keyPath:wt,unique:bt,multiEntry:jt,extractKey:tu(wt)};return at[Qr(wt)]=jt}),getIndexByKeyPath:function(dt){return at[Qr(dt)]}};return at[":id"]=Xe.primaryKey,Ge!=null&&(at[Qr(Ge)]=Xe.primaryKey),Xe})},hasGetAll:0<$e.length&&"getAll"in je.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),We=tt.schema,Ye=tt.hasGetAll,tt=We.tables.map(ue),qe={};return tt.forEach(function(rt){return qe[rt.name]=rt}),{stack:"dbcore",transaction:k.transaction.bind(k),table:function(rt){if(!qe[rt])throw new Error("Table '".concat(rt,"' not found"));return qe[rt]},MIN_KEY:-1/0,MAX_KEY:eu(j),schema:We}}function Md(k,j,Z,te){var ue=Z.IDBKeyRange;return Z.indexedDB,{dbcore:(te=Qs(j,ue,te),k.dbcore.reduce(function(ve,je){return je=je.create,r(r({},ve),je(ve))},te))}}function fs(k,te){var Z=te.db,te=Md(k._middlewares,Z,k._deps,te);k.core=te.dbcore,k.tables.forEach(function(ue){var ve=ue.name;k.core.schema.tables.some(function(je){return je.name===ve})&&(ue.core=k.core.table(ve),k[ve]instanceof k.Table&&(k[ve].core=ue.core))})}function Pd(k,j,Z,te){Z.forEach(function(ue){var ve=te[ue];j.forEach(function(je){var $e=function We(Ye,tt){return _(Ye,tt)||(Ye=c(Ye))&&We(Ye,tt)}(je,ue);(!$e||"value"in $e&&$e.value===void 0)&&(je===k.Transaction.prototype||je instanceof k.Transaction?w(je,ue,{get:function(){return this.table(ue)},set:function(We){g(this,ue,{value:We,writable:!0,configurable:!0,enumerable:!0})}}):je[ue]=new k.Table(ue,ve))})})}function Sc(k,j){j.forEach(function(Z){for(var te in Z)Z[te]instanceof k.Table&&delete Z[te]})}function Xh(k,j){return k._cfg.version-j._cfg.version}function Ec(k,j,Z,te){var ue=k._dbSchema;Z.objectStoreNames.contains("$meta")&&!ue.$meta&&(ue.$meta=Ql("$meta",xg("")[0],[]),k._storeNames.push("$meta"));var ve=k._createTransaction("readwrite",k._storeNames,ue);ve.create(Z),ve._completion.catch(te);var je=ve._reject.bind(ve),$e=Ee.transless||Ee;Xt(function(){return Ee.trans=ve,Ee.transless=$e,j!==0?(fs(k,Z),Ye=j,((We=ve).storeNames.includes("$meta")?We.table("$meta").get("version").then(function(tt){return tt??Ye}):P.resolve(Ye)).then(function(tt){return rt=tt,Ge=ve,Qe=Z,at=[],tt=(qe=k)._versions,Xe=qe._dbSchema=nu(0,qe.idbdb,Qe),(tt=tt.filter(function(dt){return dt._cfg.version>=rt})).length!==0?(tt.forEach(function(dt){at.push(function(){var gt=Xe,bt=dt._cfg.dbschema;Bd(qe,gt,Qe),Bd(qe,bt,Qe),Xe=qe._dbSchema=bt;var wt=Ld(gt,bt);wt.add.forEach(function(qt){Jh(Qe,qt[0],qt[1].primKey,qt[1].indexes)}),wt.change.forEach(function(qt){if(qt.recreate)throw new Ae.Upgrade("Not yet support for changing primary key");var It=Qe.objectStore(qt.name);qt.add.forEach(function(Zt){return $d(It,Zt)}),qt.change.forEach(function(Zt){It.deleteIndex(Zt.name),$d(It,Zt)}),qt.del.forEach(function(Zt){return It.deleteIndex(Zt)})});var jt=dt._cfg.contentUpgrade;if(jt&&dt._cfg.version>rt){fs(qe,Qe),Ge._memoizedTables={};var Ut=D(bt);wt.del.forEach(function(qt){Ut[qt]=gt[qt]}),Sc(qe,[qe.Transaction.prototype]),Pd(qe,[qe.Transaction.prototype],o(Ut),Ut),Ge.schema=Ut;var Nt,$t=Y(jt);return $t&&Tn(),wt=P.follow(function(){var qt;(Nt=jt(Ge))&&$t&&(qt=$n.bind(null,null),Nt.then(qt,qt))}),Nt&&typeof Nt.then=="function"?P.resolve(Nt):wt.then(function(){return Nt})}}),at.push(function(gt){var bt,wt,jt=dt._cfg.dbschema;bt=jt,wt=gt,[].slice.call(wt.db.objectStoreNames).forEach(function(Ut){return bt[Ut]==null&&wt.db.deleteObjectStore(Ut)}),Sc(qe,[qe.Transaction.prototype]),Pd(qe,[qe.Transaction.prototype],qe._storeNames,qe._dbSchema),Ge.schema=qe._dbSchema}),at.push(function(gt){qe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qe.idbdb.version/10)===dt._cfg.version?(qe.idbdb.deleteObjectStore("$meta"),delete qe._dbSchema.$meta,qe._storeNames=qe._storeNames.filter(function(bt){return bt!=="$meta"})):gt.objectStore("$meta").put(dt._cfg.version,"version"))})}),function dt(){return at.length?P.resolve(at.shift()(Ge.idbtrans)).then(dt):P.resolve()}().then(function(){_g(Xe,Qe)})):P.resolve();var qe,rt,Ge,Qe,at,Xe}).catch(je)):(o(ue).forEach(function(tt){Jh(Z,tt,ue[tt].primKey,ue[tt].indexes)}),fs(k,Z),void P.follow(function(){return k.on.populate.fire(ve)}).catch(je));var We,Ye})}function Fd(k,j){_g(k._dbSchema,j),j.db.version%10!=0||j.objectStoreNames.contains("$meta")||j.db.createObjectStore("$meta").add(Math.ceil(j.db.version/10-1),"version");var Z=nu(0,k.idbdb,j);Bd(k,k._dbSchema,j);for(var te=0,ue=Ld(Z,k._dbSchema).change;te<ue.length;te++){var ve=function(je){if(je.change.length||je.recreate)return console.warn("Unable to patch indexes of table ".concat(je.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=j.objectStore(je.name);je.add.forEach(function(We){Le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(je.name,".").concat(We.src)),$d($e,We)})}(ue[te]);if(typeof ve=="object")return ve.value}}function Ld(k,j){var Z,te={del:[],add:[],change:[]};for(Z in k)j[Z]||te.del.push(Z);for(Z in j){var ue=k[Z],ve=j[Z];if(ue){var je={name:Z,def:ve,recreate:!1,del:[],add:[],change:[]};if(""+(ue.primKey.keyPath||"")!=""+(ve.primKey.keyPath||"")||ue.primKey.auto!==ve.primKey.auto)je.recreate=!0,te.change.push(je);else{var $e=ue.idxByName,We=ve.idxByName,Ye=void 0;for(Ye in $e)We[Ye]||je.del.push(Ye);for(Ye in We){var tt=$e[Ye],qe=We[Ye];tt?tt.src!==qe.src&&je.change.push(qe):je.add.push(qe)}(0<je.del.length||0<je.add.length||0<je.change.length)&&te.change.push(je)}}else te.add.push([Z,ve])}return te}function Jh(k,j,Z,te){var ue=k.db.createObjectStore(j,Z.keyPath?{keyPath:Z.keyPath,autoIncrement:Z.auto}:{autoIncrement:Z.auto});return te.forEach(function(ve){return $d(ue,ve)}),ue}function _g(k,j){o(k).forEach(function(Z){j.db.objectStoreNames.contains(Z)||(Le&&console.debug("Dexie: Creating missing table",Z),Jh(j,Z,k[Z].primKey,k[Z].indexes))})}function $d(k,j){k.createIndex(j.name,j.keyPath,{unique:j.unique,multiEntry:j.multi})}function nu(k,j,Z){var te={};return S(j.objectStoreNames,0).forEach(function(ue){for(var ve=Z.objectStore(ue),je=Ji(jd(Ye=ve.keyPath),Ye||"",!0,!1,!!ve.autoIncrement,Ye&&typeof Ye!="string",!0),$e=[],We=0;We<ve.indexNames.length;++We){var tt=ve.index(ve.indexNames[We]),Ye=tt.keyPath,tt=Ji(tt.name,Ye,!!tt.unique,!!tt.multiEntry,!1,Ye&&typeof Ye!="string",!1);$e.push(tt)}te[ue]=Ql(ue,je,$e)}),te}function Bd(k,j,Z){for(var te=Z.db.objectStoreNames,ue=0;ue<te.length;++ue){var ve=te[ue],je=Z.objectStore(ve);k._hasGetAll="getAll"in je;for(var $e=0;$e<je.indexNames.length;++$e){var We=je.indexNames[$e],Ye=je.index(We).keyPath,tt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!j[ve]||(Ye=j[ve].idxByName[tt])&&(Ye.name=We,delete j[ve].idxByName[tt],j[ve].idxByName[We]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(k._hasGetAll=!1)}function xg(k){return k.split(",").map(function(j,Z){var te=(j=j.trim()).replace(/([&*]|\+\+)/g,""),ue=/^\[/.test(te)?te.match(/^\[(.*)\]$/)[1].split("+"):te;return Ji(te,ue||null,/\&/.test(j),/\*/.test(j),/\+\+/.test(j),s(ue),Z===0)})}var v1=(zd.prototype._parseStoresSpec=function(k,j){o(k).forEach(function(Z){if(k[Z]!==null){var te=xg(k[Z]),ue=te.shift();if(ue.unique=!0,ue.multi)throw new Ae.Schema("Primary key cannot be multi-valued");te.forEach(function(ve){if(ve.auto)throw new Ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!ve.keyPath)throw new Ae.Schema("Index must have a name and cannot be an empty string")}),j[Z]=Ql(Z,ue,te)}})},zd.prototype.stores=function(Z){var j=this.db;this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,Z):Z;var Z=j._versions,te={},ue={};return Z.forEach(function(ve){u(te,ve._cfg.storesSource),ue=ve._cfg.dbschema={},ve._parseStoresSpec(te,ue)}),j._dbSchema=ue,Sc(j,[j._allTables,j,j.Transaction.prototype]),Pd(j,[j._allTables,j,j.Transaction.prototype,this._cfg.tables],o(ue),ue),j._storeNames=o(ue),this},zd.prototype.upgrade=function(k){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||Oe,k),this},zd);function zd(){}function Qh(k,j){var Z=k._dbNamesDB;return Z||(Z=k._dbNamesDB=new Qi(Gs,{addons:[],indexedDB:k,IDBKeyRange:j})).version(1).stores({dbnames:"name"}),Z.table("dbnames")}function Ud(k){return k&&typeof k.databases=="function"}function ep(k){return Xt(function(){return Ee.letThrough=!0,k()})}function tp(k){return!("from"in k)}var ga=function(k,j){if(!this){var Z=new ga;return k&&"d"in k&&u(Z,k),Z}u(this,arguments.length?{d:1,from:k,to:1<arguments.length?j:k}:{d:0})};function Cc(k,j,Z){var te=Bn(j,Z);if(!isNaN(te)){if(0<te)throw RangeError();if(tp(k))return u(k,{from:j,to:Z,d:1});var ue=k.l,te=k.r;if(Bn(Z,k.from)<0)return ue?Cc(ue,j,Z):k.l={from:j,to:Z,d:1,l:null,r:null},Eg(k);if(0<Bn(j,k.to))return te?Cc(te,j,Z):k.r={from:j,to:Z,d:1,l:null,r:null},Eg(k);Bn(j,k.from)<0&&(k.from=j,k.l=null,k.d=te?te.d+1:1),0<Bn(Z,k.to)&&(k.to=Z,k.r=null,k.d=k.l?k.l.d+1:1),Z=!k.r,ue&&!k.l&&el(k,ue),te&&Z&&el(k,te)}}function el(k,j){tp(j)||function Z(te,We){var ve=We.from,je=We.to,$e=We.l,We=We.r;Cc(te,ve,je),$e&&Z(te,$e),We&&Z(te,We)}(k,j)}function Sg(k,j){var Z=qd(j),te=Z.next();if(te.done)return!1;for(var ue=te.value,ve=qd(k),je=ve.next(ue.from),$e=je.value;!te.done&&!je.done;){if(Bn($e.from,ue.to)<=0&&0<=Bn($e.to,ue.from))return!0;Bn(ue.from,$e.from)<0?ue=(te=Z.next($e.from)).value:$e=(je=ve.next(ue.from)).value}return!1}function qd(k){var j=tp(k)?null:{s:0,n:k};return{next:function(Z){for(var te=0<arguments.length;j;)switch(j.s){case 0:if(j.s=1,te)for(;j.n.l&&Bn(Z,j.n.from)<0;)j={up:j,n:j.n.l,s:1};else for(;j.n.l;)j={up:j,n:j.n.l,s:1};case 1:if(j.s=2,!te||Bn(Z,j.n.to)<=0)return{value:j.n,done:!1};case 2:if(j.n.r){j.s=3,j={up:j,n:j.n.r,s:0};continue}case 3:j=j.up}return{done:!0}}}}function Eg(k){var j,Z,te=(((j=k.r)===null||j===void 0?void 0:j.d)||0)-(((Z=k.l)===null||Z===void 0?void 0:Z.d)||0),ue=1<te?"r":te<-1?"l":"";ue&&(j=ue=="r"?"l":"r",Z=r({},k),te=k[ue],k.from=te.from,k.to=te.to,k[ue]=te[ue],Z[ue]=te[j],(k[j]=Z).d=np(Z)),k.d=np(k)}function np(Z){var j=Z.r,Z=Z.l;return(j?Z?Math.max(j.d,Z.d):j.d:Z?Z.d:0)+1}function Hd(k,j){return o(j).forEach(function(Z){k[Z]?el(k[Z],j[Z]):k[Z]=function te(ue){var ve,je,$e={};for(ve in ue)h(ue,ve)&&(je=ue[ve],$e[ve]=!je||typeof je!="object"||Q.has(je.constructor)?je:te(je));return $e}(j[Z])}),k}function rp(k,j){return k.all||j.all||Object.keys(k).some(function(Z){return j[Z]&&Sg(j[Z],k[Z])})}m(ga.prototype,((ri={add:function(k){return el(this,k),this},addKey:function(k){return Cc(this,k,k),this},addKeys:function(k){var j=this;return k.forEach(function(Z){return Cc(j,Z,Z)}),this},hasKey:function(k){var j=qd(this).next(k).value;return j&&Bn(j.from,k)<=0&&0<=Bn(j.to,k)}})[se]=function(){return qd(this)},ri));var tl={},ap={},ip=!1;function Vd(k){Hd(ap,k),ip||(ip=!0,setTimeout(function(){ip=!1,op(ap,!(ap={}))},0))}function op(k,j){j===void 0&&(j=!1);var Z=new Set;if(k.all)for(var te=0,ue=Object.values(tl);te<ue.length;te++)Cg(je=ue[te],k,Z,j);else for(var ve in k){var je,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(ve);$e&&(ve=$e[1],$e=$e[2],(je=tl["idb://".concat(ve,"/").concat($e)])&&Cg(je,k,Z,j))}Z.forEach(function(We){return We()})}function Cg(k,j,Z,te){for(var ue=[],ve=0,je=Object.entries(k.queries.query);ve<je.length;ve++){for(var $e=je[ve],We=$e[0],Ye=[],tt=0,qe=$e[1];tt<qe.length;tt++){var rt=qe[tt];rp(j,rt.obsSet)?rt.subscribers.forEach(function(Xe){return Z.add(Xe)}):te&&Ye.push(rt)}te&&ue.push([We,Ye])}if(te)for(var Ge=0,Qe=ue;Ge<Qe.length;Ge++){var at=Qe[Ge],We=at[0],Ye=at[1];k.queries.query[We]=Ye}}function w1(k){var j=k._state,Z=k._deps.indexedDB;if(j.isBeingOpened||k.idbdb)return j.dbReadyPromise.then(function(){return j.dbOpenError?$r(j.dbOpenError):k});j.isBeingOpened=!0,j.dbOpenError=null,j.openComplete=!1;var te=j.openCanceller,ue=Math.round(10*k.verno),ve=!1;function je(){if(j.openCanceller!==te)throw new Ae.DatabaseClosed("db.open() was cancelled")}function $e(){return new P(function(rt,Ge){if(je(),!Z)throw new Ae.MissingAPI;var Qe=k.name,at=j.autoSchema||!ue?Z.open(Qe):Z.open(Qe,ue);if(!at)throw new Ae.MissingAPI;at.onerror=Di(Ge),at.onblocked=de(k._fireOnBlocked),at.onupgradeneeded=de(function(Xe){var dt;tt=at.transaction,j.autoSchema&&!k._options.allowEmptyDB?(at.onerror=Xs,tt.abort(),at.result.close(),(dt=Z.deleteDatabase(Qe)).onsuccess=dt.onerror=de(function(){Ge(new Ae.NoSuchDatabase("Database ".concat(Qe," doesnt exist")))})):(tt.onerror=Di(Ge),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,qe=Xe<1,k.idbdb=at.result,ve&&Fd(k,tt),Ec(k,Xe/10,tt,Ge))},Ge),at.onsuccess=de(function(){tt=null;var Xe,dt,gt,bt,wt,jt=k.idbdb=at.result,Ut=S(jt.objectStoreNames);if(0<Ut.length)try{var Nt=jt.transaction((bt=Ut).length===1?bt[0]:bt,"readonly");if(j.autoSchema)dt=jt,gt=Nt,(Xe=k).verno=dt.version/10,gt=Xe._dbSchema=nu(0,dt,gt),Xe._storeNames=S(dt.objectStoreNames,0),Pd(Xe,[Xe._allTables],o(gt),gt);else if(Bd(k,k._dbSchema,Nt),((wt=Ld(nu(0,(wt=k).idbdb,Nt),wt._dbSchema)).add.length||wt.change.some(function($t){return $t.add.length||$t.change.length}))&&!ve)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),jt.close(),ue=jt.version+1,ve=!0,rt($e());fs(k,Nt)}catch{}Co.push(k),jt.onversionchange=de(function($t){j.vcFired=!0,k.on("versionchange").fire($t)}),jt.onclose=de(function($t){k.on("close").fire($t)}),qe&&(wt=k._deps,Nt=Qe,jt=wt.indexedDB,wt=wt.IDBKeyRange,Ud(jt)||Nt===Gs||Qh(jt,wt).put({name:Nt}).catch(Oe)),rt()},Ge)}).catch(function(rt){switch(rt==null?void 0:rt.name){case"UnknownError":if(0<j.PR1398_maxLoop)return j.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ue)return ue=0,$e()}return P.reject(rt)})}var We,Ye=j.dbReadyResolve,tt=null,qe=!1;return P.race([te,(typeof navigator>"u"?P.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(rt){function Ge(){return indexedDB.databases().finally(rt)}We=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(We)}):Promise.resolve()).then($e)]).then(function(){return je(),j.onReadyBeingFired=[],P.resolve(ep(function(){return k.on.ready.fire(k.vip)})).then(function rt(){if(0<j.onReadyBeingFired.length){var Ge=j.onReadyBeingFired.reduce(_e,Oe);return j.onReadyBeingFired=[],P.resolve(ep(function(){return Ge(k.vip)})).then(rt)}})}).finally(function(){j.openCanceller===te&&(j.onReadyBeingFired=null,j.isBeingOpened=!1)}).catch(function(rt){j.dbOpenError=rt;try{tt&&tt.abort()}catch{}return te===j.openCanceller&&k._close(),$r(rt)}).finally(function(){j.openComplete=!0,Ye()}).then(function(){var rt;return qe&&(rt={},k.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(Qe){Qe.name&&(rt["idb://".concat(k.name,"/").concat(Ge.name,"/").concat(Qe.name)]=new ga(-1/0,[[[]]]))}),rt["idb://".concat(k.name,"/").concat(Ge.name,"/")]=rt["idb://".concat(k.name,"/").concat(Ge.name,"/:dels")]=new ga(-1/0,[[[]]])}),ma(Jl).fire(rt),op(rt,!0)),k})}function kc(k){function j(ve){return k.next(ve)}var Z=ue(j),te=ue(function(ve){return k.throw(ve)});function ue(ve){return function(We){var $e=ve(We),We=$e.value;return $e.done?We:We&&typeof We.then=="function"?We.then(Z,te):s(We)?Promise.all(We).then(Z,te):Z(We)}}return ue(j)()}function hs(k,j,Z){for(var te=s(k)?k.slice():[k],ue=0;ue<Z;++ue)te.push(j);return te}var _1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(k){return r(r({},k),{table:function(j){var Z=k.table(j),te=Z.schema,ue={},ve=[];function je(qe,rt,Ge){var Qe=Qr(qe),at=ue[Qe]=ue[Qe]||[],Xe=qe==null?0:typeof qe=="string"?1:qe.length,dt=0<rt,dt=r(r({},Ge),{name:dt?"".concat(Qe,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:dt,keyTail:rt,keyLength:Xe,extractKey:tu(qe),unique:!dt&&Ge.unique});return at.push(dt),dt.isPrimaryKey||ve.push(dt),1<Xe&&je(Xe===2?qe[0]:qe.slice(0,Xe-1),rt+1,Ge),at.sort(function(gt,bt){return gt.keyTail-bt.keyTail}),dt}j=je(te.primaryKey.keyPath,0,te.primaryKey),ue[":id"]=[j];for(var $e=0,We=te.indexes;$e<We.length;$e++){var Ye=We[$e];je(Ye.keyPath,0,Ye)}function tt(qe){var rt,Ge=qe.query.index;return Ge.isVirtual?r(r({},qe),{query:{index:Ge.lowLevelIndex,range:(rt=qe.query.range,Ge=Ge.keyTail,{type:rt.type===1?2:rt.type,lower:hs(rt.lower,rt.lowerOpen?k.MAX_KEY:k.MIN_KEY,Ge),lowerOpen:!0,upper:hs(rt.upper,rt.upperOpen?k.MIN_KEY:k.MAX_KEY,Ge),upperOpen:!0})}}):qe}return r(r({},Z),{schema:r(r({},te),{primaryKey:j,indexes:ve,getIndexByKeyPath:function(qe){return(qe=ue[Qr(qe)])&&qe[0]}}),count:function(qe){return Z.count(tt(qe))},query:function(qe){return Z.query(tt(qe))},openCursor:function(qe){var rt=qe.query.index,Ge=rt.keyTail,Qe=rt.isVirtual,at=rt.keyLength;return Qe?Z.openCursor(tt(qe)).then(function(dt){return dt&&Xe(dt)}):Z.openCursor(qe);function Xe(dt){return Object.create(dt,{continue:{value:function(gt){gt!=null?dt.continue(hs(gt,qe.reverse?k.MAX_KEY:k.MIN_KEY,Ge)):qe.unique?dt.continue(dt.key.slice(0,at).concat(qe.reverse?k.MIN_KEY:k.MAX_KEY,Ge)):dt.continue()}},continuePrimaryKey:{value:function(gt,bt){dt.continuePrimaryKey(hs(gt,k.MAX_KEY,Ge),bt)}},primaryKey:{get:function(){return dt.primaryKey}},key:{get:function(){var gt=dt.key;return at===1?gt[0]:gt.slice(0,at)}},value:{get:function(){return dt.value}}})}}})}})}};function Gd(k,j,Z,te){return Z=Z||{},te=te||"",o(k).forEach(function(ue){var ve,je,$e;h(j,ue)?(ve=k[ue],je=j[ue],typeof ve=="object"&&typeof je=="object"&&ve&&je?($e=me(ve))!==me(je)?Z[te+ue]=j[ue]:$e==="Object"?Gd(ve,je,Z,te+ue+"."):ve!==je&&(Z[te+ue]=j[ue]):ve!==je&&(Z[te+ue]=j[ue])):Z[te+ue]=void 0}),o(j).forEach(function(ue){h(k,ue)||(Z[te+ue]=j[ue])}),Z}function Wd(k,j){return j.type==="delete"?j.keys:j.keys||j.values.map(k.extractKey)}var kg={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(k){return r(r({},k),{table:function(j){var Z=k.table(j),te=Z.schema.primaryKey;return r(r({},Z),{mutate:function(ue){var ve=Ee.trans,je=ve.table(j).hook,$e=je.deleting,We=je.creating,Ye=je.updating;switch(ue.type){case"add":if(We.fire===Oe)break;return ve._promise("readwrite",function(){return tt(ue)},!0);case"put":if(We.fire===Oe&&Ye.fire===Oe)break;return ve._promise("readwrite",function(){return tt(ue)},!0);case"delete":if($e.fire===Oe)break;return ve._promise("readwrite",function(){return tt(ue)},!0);case"deleteRange":if($e.fire===Oe)break;return ve._promise("readwrite",function(){return function qe(rt,Ge,Qe){return Z.query({trans:rt,values:!1,query:{index:te,range:Ge},limit:Qe}).then(function(at){var Xe=at.result;return tt({type:"delete",keys:Xe,trans:rt}).then(function(dt){return 0<dt.numFailures?Promise.reject(dt.failures[0]):Xe.length<Qe?{failures:[],numFailures:0,lastResult:void 0}:qe(rt,r(r({},Ge),{lower:Xe[Xe.length-1],lowerOpen:!0}),Qe)})})}(ue.trans,ue.range,1e4)},!0)}return Z.mutate(ue);function tt(qe){var rt,Ge,Qe,at=Ee.trans,Xe=qe.keys||Wd(te,qe);if(!Xe)throw new Error("Keys missing");return(qe=qe.type==="add"||qe.type==="put"?r(r({},qe),{keys:Xe}):r({},qe)).type!=="delete"&&(qe.values=a([],qe.values)),qe.keys&&(qe.keys=a([],qe.keys)),rt=Z,Qe=Xe,((Ge=qe).type==="add"?Promise.resolve([]):rt.getMany({trans:Ge.trans,keys:Qe,cache:"immutable"})).then(function(dt){var gt=Xe.map(function(bt,wt){var jt,Ut,Nt,$t=dt[wt],qt={onerror:null,onsuccess:null};return qe.type==="delete"?$e.fire.call(qt,bt,$t,at):qe.type==="add"||$t===void 0?(jt=We.fire.call(qt,bt,qe.values[wt],at),bt==null&&jt!=null&&(qe.keys[wt]=bt=jt,te.outbound||I(qe.values[wt],te.keyPath,bt))):(jt=Gd($t,qe.values[wt]),(Ut=Ye.fire.call(qt,jt,bt,$t,at))&&(Nt=qe.values[wt],Object.keys(Ut).forEach(function(It){h(Nt,It)?Nt[It]=Ut[It]:I(Nt,It,Ut[It])}))),qt});return Z.mutate(qe).then(function(bt){for(var wt=bt.failures,jt=bt.results,Ut=bt.numFailures,bt=bt.lastResult,Nt=0;Nt<Xe.length;++Nt){var $t=(jt||Xe)[Nt],qt=gt[Nt];$t==null?qt.onerror&&qt.onerror(wt[Nt]):qt.onsuccess&&qt.onsuccess(qe.type==="put"&&dt[Nt]?qe.values[Nt]:$t)}return{failures:wt,results:jt,numFailures:Ut,lastResult:bt}}).catch(function(bt){return gt.forEach(function(wt){return wt.onerror&&wt.onerror(bt)}),Promise.reject(bt)})})}}})}})}};function sp(k,j,Z){try{if(!j||j.keys.length<k.length)return null;for(var te=[],ue=0,ve=0;ue<j.keys.length&&ve<k.length;++ue)Bn(j.keys[ue],k[ve])===0&&(te.push(Z?K(j.values[ue]):j.values[ue]),++ve);return te.length===k.length?te:null}catch{return null}}var Ag={stack:"dbcore",level:-1,create:function(k){return{table:function(j){var Z=k.table(j);return r(r({},Z),{getMany:function(te){if(!te.cache)return Z.getMany(te);var ue=sp(te.keys,te.trans._cache,te.cache==="clone");return ue?P.resolve(ue):Z.getMany(te).then(function(ve){return te.trans._cache={keys:te.keys,values:te.cache==="clone"?K(ve):ve},ve})},mutate:function(te){return te.type!=="add"&&(te.trans._cache=null),Z.mutate(te)}})}}}};function nl(k,j){return k.trans.mode==="readonly"&&!!k.subscr&&!k.trans.explicit&&k.trans.db._options.cache!=="disabled"&&!j.schema.primaryKey.outbound}function Tg(k,j){switch(k){case"query":return j.values&&!j.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var x1={stack:"dbcore",level:0,name:"Observability",create:function(k){var j=k.schema.name,Z=new ga(k.MIN_KEY,k.MAX_KEY);return r(r({},k),{transaction:function(te,ue,ve){if(Ee.subscr&&ue!=="readonly")throw new Ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ee.querier));return k.transaction(te,ue,ve)},table:function(te){var ue=k.table(te),ve=ue.schema,je=ve.primaryKey,qe=ve.indexes,$e=je.extractKey,We=je.outbound,Ye=je.autoIncrement&&qe.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(je.keyPath)}),tt=r(r({},ue),{mutate:function(Ge){function Qe(It){return It="idb://".concat(j,"/").concat(te,"/").concat(It),bt[It]||(bt[It]=new ga)}var at,Xe,dt,gt=Ge.trans,bt=Ge.mutatedParts||(Ge.mutatedParts={}),wt=Qe(""),jt=Qe(":dels"),Ut=Ge.type,qt=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[Wd(je,Ge).filter(function(It){return It}),Ge.values]:[],Nt=qt[0],$t=qt[1],qt=Ge.trans._cache;return s(Nt)?(wt.addKeys(Nt),(qt=Ut==="delete"||Nt.length===$t.length?sp(Nt,qt):null)||jt.addKeys(Nt),(qt||$t)&&(at=Qe,Xe=qt,dt=$t,ve.indexes.forEach(function(It){var Zt=at(It.name||"");function cn(Sn){return Sn!=null?It.extractKey(Sn):null}function dn(Sn){return It.multiEntry&&s(Sn)?Sn.forEach(function(Ia){return Zt.addKey(Ia)}):Zt.addKey(Sn)}(Xe||dt).forEach(function(Sn,Kr){var yn=Xe&&cn(Xe[Kr]),Kr=dt&&cn(dt[Kr]);Bn(yn,Kr)!==0&&(yn!=null&&dn(yn),Kr!=null&&dn(Kr))})}))):Nt?($t={from:($t=Nt.lower)!==null&&$t!==void 0?$t:k.MIN_KEY,to:($t=Nt.upper)!==null&&$t!==void 0?$t:k.MAX_KEY},jt.add($t),wt.add($t)):(wt.add(Z),jt.add(Z),ve.indexes.forEach(function(It){return Qe(It.name).add(Z)})),ue.mutate(Ge).then(function(It){return!Nt||Ge.type!=="add"&&Ge.type!=="put"||(wt.addKeys(It.results),Ye&&Ye.forEach(function(Zt){for(var cn=Ge.values.map(function(yn){return Zt.extractKey(yn)}),dn=Zt.keyPath.findIndex(function(yn){return yn===je.keyPath}),Sn=0,Ia=It.results.length;Sn<Ia;++Sn)cn[Sn][dn]=It.results[Sn];Qe(Zt.name).addKeys(cn)})),gt.mutatedParts=Hd(gt.mutatedParts||{},bt),It})}}),qe=function(Qe){var at=Qe.query,Qe=at.index,at=at.range;return[Qe,new ga((Qe=at.lower)!==null&&Qe!==void 0?Qe:k.MIN_KEY,(at=at.upper)!==null&&at!==void 0?at:k.MAX_KEY)]},rt={get:function(Ge){return[je,new ga(Ge.key)]},getMany:function(Ge){return[je,new ga().addKeys(Ge.keys)]},count:qe,query:qe,openCursor:qe};return o(rt).forEach(function(Ge){tt[Ge]=function(Qe){var at=Ee.subscr,Xe=!!at,dt=nl(Ee,ue)&&Tg(Ge,Qe)?Qe.obsSet={}:at;if(Xe){var gt=function($t){return $t="idb://".concat(j,"/").concat(te,"/").concat($t),dt[$t]||(dt[$t]=new ga)},bt=gt(""),wt=gt(":dels"),at=rt[Ge](Qe),Xe=at[0],at=at[1];if((Ge==="query"&&Xe.isPrimaryKey&&!Qe.values?wt:gt(Xe.name||"")).add(at),!Xe.isPrimaryKey){if(Ge!=="count"){var jt=Ge==="query"&&We&&Qe.values&&ue.query(r(r({},Qe),{values:!1}));return ue[Ge].apply(this,arguments).then(function($t){if(Ge==="query"){if(We&&Qe.values)return jt.then(function(cn){return cn=cn.result,bt.addKeys(cn),$t});var qt=Qe.values?$t.result.map($e):$t.result;(Qe.values?bt:wt).addKeys(qt)}else if(Ge==="openCursor"){var It=$t,Zt=Qe.values;return It&&Object.create(It,{key:{get:function(){return wt.addKey(It.primaryKey),It.key}},primaryKey:{get:function(){var cn=It.primaryKey;return wt.addKey(cn),cn}},value:{get:function(){return Zt&&bt.addKey(It.primaryKey),It.value}}})}return $t})}wt.add(Z)}}return ue[Ge].apply(this,arguments)}}),tt}})}};function Rg(k,j,Z){if(Z.numFailures===0)return j;if(j.type==="deleteRange")return null;var te=j.keys?j.keys.length:"values"in j&&j.values?j.values.length:1;return Z.numFailures===te?null:(j=r({},j),s(j.keys)&&(j.keys=j.keys.filter(function(ue,ve){return!(ve in Z.failures)})),"values"in j&&s(j.values)&&(j.values=j.values.filter(function(ue,ve){return!(ve in Z.failures)})),j)}function Kd(k,j){return Z=k,((te=j).lower===void 0||(te.lowerOpen?0<Bn(Z,te.lower):0<=Bn(Z,te.lower)))&&(k=k,(j=j).upper===void 0||(j.upperOpen?Bn(k,j.upper)<0:Bn(k,j.upper)<=0));var Z,te}function lp(k,j,rt,te,ue,ve){if(!rt||rt.length===0)return k;var je=j.query.index,$e=je.multiEntry,We=j.query.range,Ye=te.schema.primaryKey.extractKey,tt=je.extractKey,qe=(je.lowLevelIndex||je).extractKey,rt=rt.reduce(function(Ge,Qe){var at=Ge,Xe=[];if(Qe.type==="add"||Qe.type==="put")for(var dt=new ga,gt=Qe.values.length-1;0<=gt;--gt){var bt,wt=Qe.values[gt],jt=Ye(wt);dt.hasKey(jt)||(bt=tt(wt),($e&&s(bt)?bt.some(function(It){return Kd(It,We)}):Kd(bt,We))&&(dt.addKey(jt),Xe.push(wt)))}switch(Qe.type){case"add":var Ut=new ga().addKeys(j.values?Ge.map(function(Zt){return Ye(Zt)}):Ge),at=Ge.concat(j.values?Xe.filter(function(Zt){return Zt=Ye(Zt),!Ut.hasKey(Zt)&&(Ut.addKey(Zt),!0)}):Xe.map(function(Zt){return Ye(Zt)}).filter(function(Zt){return!Ut.hasKey(Zt)&&(Ut.addKey(Zt),!0)}));break;case"put":var Nt=new ga().addKeys(Qe.values.map(function(Zt){return Ye(Zt)}));at=Ge.filter(function(Zt){return!Nt.hasKey(j.values?Ye(Zt):Zt)}).concat(j.values?Xe:Xe.map(function(Zt){return Ye(Zt)}));break;case"delete":var $t=new ga().addKeys(Qe.keys);at=Ge.filter(function(Zt){return!$t.hasKey(j.values?Ye(Zt):Zt)});break;case"deleteRange":var qt=Qe.range;at=Ge.filter(function(Zt){return!Kd(Ye(Zt),qt)})}return at},k);return rt===k?k:(rt.sort(function(Ge,Qe){return Bn(qe(Ge),qe(Qe))||Bn(Ye(Ge),Ye(Qe))}),j.limit&&j.limit<1/0&&(rt.length>j.limit?rt.length=j.limit:k.length===j.limit&&rt.length<j.limit&&(ue.dirty=!0)),ve?Object.freeze(rt):rt)}function ru(k,j){return Bn(k.lower,j.lower)===0&&Bn(k.upper,j.upper)===0&&!!k.lowerOpen==!!j.lowerOpen&&!!k.upperOpen==!!j.upperOpen}function Ac(k,j){return function(Z,te,ue,ve){if(Z===void 0)return te!==void 0?-1:0;if(te===void 0)return 1;if((te=Bn(Z,te))===0){if(ue&&ve)return 0;if(ue)return 1;if(ve)return-1}return te}(k.lower,j.lower,k.lowerOpen,j.lowerOpen)<=0&&0<=function(Z,te,ue,ve){if(Z===void 0)return te!==void 0?1:0;if(te===void 0)return-1;if((te=Bn(Z,te))===0){if(ue&&ve)return 0;if(ue)return-1;if(ve)return 1}return te}(k.upper,j.upper,k.upperOpen,j.upperOpen)}function S1(k,j,Z,te){k.subscribers.add(Z),te.addEventListener("abort",function(){var ue,ve;k.subscribers.delete(Z),k.subscribers.size===0&&(ue=k,ve=j,setTimeout(function(){ue.subscribers.size===0&&ee(ve,ue)},3e3))})}var Zd={stack:"dbcore",level:0,name:"Cache",create:function(k){var j=k.schema.name;return r(r({},k),{transaction:function(Z,te,ue){var ve,je,$e=k.transaction(Z,te,ue);return te==="readwrite"&&(je=(ve=new AbortController).signal,ue=function(We){return function(){if(ve.abort(),te==="readwrite"){for(var Ye=new Set,tt=0,qe=Z;tt<qe.length;tt++){var rt=qe[tt],Ge=tl["idb://".concat(j,"/").concat(rt)];if(Ge){var Qe=k.table(rt),at=Ge.optimisticOps.filter(function(Zt){return Zt.trans===$e});if($e._explicit&&We&&$e.mutatedParts)for(var Xe=0,dt=Object.values(Ge.queries.query);Xe<dt.length;Xe++)for(var gt=0,bt=(Ut=dt[Xe]).slice();gt<bt.length;gt++)rp((Nt=bt[gt]).obsSet,$e.mutatedParts)&&(ee(Ut,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)}));else if(0<at.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(Zt){return Zt.trans!==$e});for(var wt=0,jt=Object.values(Ge.queries.query);wt<jt.length;wt++)for(var Ut,Nt,$t,qt=0,It=(Ut=jt[wt]).slice();qt<It.length;qt++)(Nt=It[qt]).res!=null&&$e.mutatedParts&&(We&&!Nt.dirty?($t=Object.isFrozen(Nt.res),$t=lp(Nt.res,Nt.req,at,Qe,Nt,$t),Nt.dirty?(ee(Ut,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)})):$t!==Nt.res&&(Nt.res=$t,Nt.promise=P.resolve({result:$t}))):(Nt.dirty&&ee(Ut,Nt),Nt.subscribers.forEach(function(Zt){return Ye.add(Zt)})))}}}Ye.forEach(function(Zt){return Zt()})}}},$e.addEventListener("abort",ue(!1),{signal:je}),$e.addEventListener("error",ue(!1),{signal:je}),$e.addEventListener("complete",ue(!0),{signal:je})),$e},table:function(Z){var te=k.table(Z),ue=te.schema.primaryKey;return r(r({},te),{mutate:function(ve){var je=Ee.trans;if(ue.outbound||je.db._options.cache==="disabled"||je.explicit||je.idbtrans.mode!=="readwrite")return te.mutate(ve);var $e=tl["idb://".concat(j,"/").concat(Z)];return $e?(je=te.mutate(ve),ve.type!=="add"&&ve.type!=="put"||!(50<=ve.values.length||Wd(ue,ve).some(function(We){return We==null}))?($e.optimisticOps.push(ve),ve.mutatedParts&&Vd(ve.mutatedParts),je.then(function(We){0<We.numFailures&&(ee($e.optimisticOps,ve),(We=Rg(0,ve,We))&&$e.optimisticOps.push(We),ve.mutatedParts&&Vd(ve.mutatedParts))}),je.catch(function(){ee($e.optimisticOps,ve),ve.mutatedParts&&Vd(ve.mutatedParts)})):je.then(function(We){var Ye=Rg(0,r(r({},ve),{values:ve.values.map(function(tt,qe){var rt;return We.failures[qe]?tt:(tt=(rt=ue.keyPath)!==null&&rt!==void 0&&rt.includes(".")?K(tt):r({},tt),I(tt,ue.keyPath,We.results[qe]),tt)})}),We);$e.optimisticOps.push(Ye),queueMicrotask(function(){return ve.mutatedParts&&Vd(ve.mutatedParts)})}),je):te.mutate(ve)},query:function(ve){if(!nl(Ee,te)||!Tg("query",ve))return te.query(ve);var je=((Ye=Ee.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",qe=Ee,$e=qe.requery,We=qe.signal,Ye=function(Qe,at,Xe,dt){var gt=tl["idb://".concat(Qe,"/").concat(at)];if(!gt)return[];if(!(at=gt.queries[Xe]))return[null,!1,gt,null];var bt=at[(dt.query?dt.query.index.name:null)||""];if(!bt)return[null,!1,gt,null];switch(Xe){case"query":var wt=bt.find(function(jt){return jt.req.limit===dt.limit&&jt.req.values===dt.values&&ru(jt.req.query.range,dt.query.range)});return wt?[wt,!0,gt,bt]:[bt.find(function(jt){return("limit"in jt.req?jt.req.limit:1/0)>=dt.limit&&(!dt.values||jt.req.values)&&Ac(jt.req.query.range,dt.query.range)}),!1,gt,bt];case"count":return wt=bt.find(function(jt){return ru(jt.req.query.range,dt.query.range)}),[wt,!!wt,gt,bt]}}(j,Z,"query",ve),tt=Ye[0],qe=Ye[1],rt=Ye[2],Ge=Ye[3];return tt&&qe?tt.obsSet=ve.obsSet:(qe=te.query(ve).then(function(Qe){var at=Qe.result;if(tt&&(tt.res=at),je){for(var Xe=0,dt=at.length;Xe<dt;++Xe)Object.freeze(at[Xe]);Object.freeze(at)}else Qe.result=K(at);return Qe}).catch(function(Qe){return Ge&&tt&&ee(Ge,tt),Promise.reject(Qe)}),tt={obsSet:ve.obsSet,promise:qe,subscribers:new Set,type:"query",req:ve,dirty:!1},Ge?Ge.push(tt):(Ge=[tt],(rt=rt||(tl["idb://".concat(j,"/").concat(Z)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[ve.query.index.name||""]=Ge)),S1(tt,Ge,$e,We),tt.promise.then(function(Qe){return{result:lp(Qe.result,ve,rt==null?void 0:rt.optimisticOps,te,tt,je)}})}})}})}};function Tc(k,j){return new Proxy(k,{get:function(Z,te,ue){return te==="db"?j:Reflect.get(Z,te,ue)}})}var Qi=(Ir.prototype.version=function(k){if(isNaN(k)||k<.1)throw new Ae.Type("Given version is not a positive number");if(k=Math.round(10*k)/10,this.idbdb||this._state.isBeingOpened)throw new Ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,k);var j=this._versions,Z=j.filter(function(te){return te._cfg.version===k})[0];return Z||(Z=new this.Version(k),j.push(Z),j.sort(Xh),Z.stores({}),this._state.autoSchema=!1,Z)},Ir.prototype._whenReady=function(k){var j=this;return this.idbdb&&(this._state.openComplete||Ee.letThrough||this._vip)?k():new P(function(Z,te){if(j._state.openComplete)return te(new Ae.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return void te(new Ae.DatabaseClosed);j.open().catch(Oe)}j._state.dbReadyPromise.then(Z,te)}).then(k)},Ir.prototype.use=function(k){var j=k.stack,Z=k.create,te=k.level,ue=k.name;return ue&&this.unuse({stack:j,name:ue}),k=this._middlewares[j]||(this._middlewares[j]=[]),k.push({stack:j,create:Z,level:te??10,name:ue}),k.sort(function(ve,je){return ve.level-je.level}),this},Ir.prototype.unuse=function(k){var j=k.stack,Z=k.name,te=k.create;return j&&this._middlewares[j]&&(this._middlewares[j]=this._middlewares[j].filter(function(ue){return te?ue.create!==te:!!Z&&ue.name!==Z})),this},Ir.prototype.open=function(){var k=this;return os(be,function(){return w1(k)})},Ir.prototype._close=function(){var k=this._state,j=Co.indexOf(this);if(0<=j&&Co.splice(j,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}k.isBeingOpened||(k.dbReadyPromise=new P(function(Z){k.dbReadyResolve=Z}),k.openCanceller=new P(function(Z,te){k.cancelOpen=te}))},Ir.prototype.close=function(Z){var j=(Z===void 0?{disableAutoOpen:!0}:Z).disableAutoOpen,Z=this._state;j?(Z.isBeingOpened&&Z.cancelOpen(new Ae.DatabaseClosed),this._close(),Z.autoOpen=!1,Z.dbOpenError=new Ae.DatabaseClosed):(this._close(),Z.autoOpen=this._options.autoOpen||Z.isBeingOpened,Z.openComplete=!1,Z.dbOpenError=null)},Ir.prototype.delete=function(k){var j=this;k===void 0&&(k={disableAutoOpen:!0});var Z=0<arguments.length&&typeof arguments[0]!="object",te=this._state;return new P(function(ue,ve){function je(){j.close(k);var $e=j._deps.indexedDB.deleteDatabase(j.name);$e.onsuccess=de(function(){var We,Ye,tt;We=j._deps,Ye=j.name,tt=We.indexedDB,We=We.IDBKeyRange,Ud(tt)||Ye===Gs||Qh(tt,We).delete(Ye).catch(Oe),ue()}),$e.onerror=Di(ve),$e.onblocked=j._fireOnBlocked}if(Z)throw new Ae.InvalidArgument("Invalid closeOptions argument to db.delete()");te.isBeingOpened?te.dbReadyPromise.then(je):je()})},Ir.prototype.backendDB=function(){return this.idbdb},Ir.prototype.isOpen=function(){return this.idbdb!==null},Ir.prototype.hasBeenClosed=function(){var k=this._state.dbOpenError;return k&&k.name==="DatabaseClosed"},Ir.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ir.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ir.prototype,"tables",{get:function(){var k=this;return o(this._allTables).map(function(j){return k._allTables[j]})},enumerable:!1,configurable:!0}),Ir.prototype.transaction=function(){var k=(function(j,Z,te){var ue=arguments.length;if(ue<2)throw new Ae.InvalidArgument("Too few arguments");for(var ve=new Array(ue-1);--ue;)ve[ue-1]=arguments[ue];return te=ve.pop(),[j,W(ve),te]}).apply(this,arguments);return this._transaction.apply(this,k)},Ir.prototype._transaction=function(k,j,Z){var te=this,ue=Ee.trans;ue&&ue.db===this&&k.indexOf("!")===-1||(ue=null);var ve,je,$e=k.indexOf("?")!==-1;k=k.replace("!","").replace("?","");try{if(je=j.map(function(Ye){if(Ye=Ye instanceof te.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),k=="r"||k===Oi)ve=Oi;else{if(k!="rw"&&k!=_c)throw new Ae.InvalidArgument("Invalid transaction mode: "+k);ve=_c}if(ue){if(ue.mode===Oi&&ve===_c){if(!$e)throw new Ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ue=null}ue&&je.forEach(function(Ye){if(ue&&ue.storeNames.indexOf(Ye)===-1){if(!$e)throw new Ae.SubTransaction("Table "+Ye+" not included in parent transaction.");ue=null}}),$e&&ue&&!ue.active&&(ue=null)}}catch(Ye){return ue?ue._promise(null,function(tt,qe){qe(Ye)}):$r(Ye)}var We=(function Ye(tt,qe,rt,Ge,Qe){return P.resolve().then(function(){var at=Ee.transless||Ee,Xe=tt._createTransaction(qe,rt,tt._dbSchema,Ge);if(Xe.explicit=!0,at={trans:Xe,transless:at},Ge)Xe.idbtrans=Ge.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(bt){return bt.name===Pe.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Ye(tt,qe,rt,null,Qe)})):$r(bt)}var dt,gt=Y(Qe);return gt&&Tn(),at=P.follow(function(){var bt;(dt=Qe.call(Xe,Xe))&&(gt?(bt=$n.bind(null,null),dt.then(bt,bt)):typeof dt.next=="function"&&typeof dt.throw=="function"&&(dt=kc(dt)))},at),(dt&&typeof dt.then=="function"?P.resolve(dt).then(function(bt){return Xe.active?bt:$r(new Ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):at.then(function(){return dt})).then(function(bt){return Ge&&Xe._resolve(),Xe._completion.then(function(){return bt})}).catch(function(bt){return Xe._reject(bt),$r(bt)})})}).bind(null,this,ve,je,ue,Z);return ue?ue._promise(ve,We,"lock"):Ee.trans?os(Ee.transless,function(){return te._whenReady(We)}):this._whenReady(We)},Ir.prototype.table=function(k){if(!h(this._allTables,k))throw new Ae.InvalidTable("Table ".concat(k," does not exist"));return this._allTables[k]},Ir);function Ir(k,j){var Z=this;this._middlewares={},this.verno=0;var te=Ir.dependencies;this._options=j=r({addons:Ir.addons,autoOpen:!0,indexedDB:te.indexedDB,IDBKeyRange:te.IDBKeyRange,cache:"cloned"},j),this._deps={indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange},te=j.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ue,ve,je,$e,We,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Oe,dbReadyPromise:null,cancelOpen:Oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:j.autoOpen};Ye.dbReadyPromise=new P(function(qe){Ye.dbReadyResolve=qe}),Ye.openCanceller=new P(function(qe,rt){Ye.cancelOpen=rt}),this._state=Ye,this.name=k,this.on=ds(this,"populate","blocked","versionchange","close",{ready:[_e,Oe]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(qe){return function(rt,Ge){Ir.vip(function(){var Qe,at=Z._state;at.openComplete?(at.dbOpenError||P.resolve().then(rt),Ge&&qe(rt)):at.onReadyBeingFired?(at.onReadyBeingFired.push(rt),Ge&&qe(rt)):(qe(rt),Qe=Z,Ge||qe(function Xe(){Qe.on.ready.unsubscribe(rt),Qe.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(ue=this,Gl(Yl.prototype,function(dt,Xe){this.db=ue;var Ge=Ws,Qe=null;if(Xe)try{Ge=Xe()}catch(gt){Qe=gt}var at=dt._ctx,Xe=at.table,dt=Xe.hook.reading.fire;this._ctx={table:Xe,index:at.index,isPrimKey:!at.index||Xe.schema.primKey.keyPath&&at.index===Xe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Qe,or:at.or,valueMapper:dt!==Te?dt:null}})),this.Table=(ve=this,Gl(Vh.prototype,function(qe,rt,Ge){this.db=ve,this._tx=Ge,this.name=qe,this.schema=rt,this.hook=ve._allTables[qe]?ve._allTables[qe].hook:ds(null,{creating:[Ne,Oe],reading:[z,Te],updating:[ie,Oe],deleting:[ce,Oe]})})),this.Transaction=(je=this,Gl(Yh.prototype,function(qe,rt,Ge,Qe,at){var Xe=this;this.db=je,this.mode=qe,this.storeNames=rt,this.schema=Ge,this.chromeTransactionDurability=Qe,this.idbtrans=null,this.on=ds(this,"complete","error","abort"),this.parent=at||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(dt,gt){Xe._resolve=dt,Xe._reject=gt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(dt){var gt=Xe.active;return Xe.active=!1,Xe.on.error.fire(dt),Xe.parent?Xe.parent._reject(dt):gt&&Xe.idbtrans&&Xe.idbtrans.abort(),$r(dt)})})),this.Version=($e=this,Gl(v1.prototype,function(qe){this.db=$e,this._cfg={version:qe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(We=this,Gl(Ys.prototype,function(qe,rt,Ge){if(this.db=We,this._ctx={table:qe,index:rt===":id"?null:rt,or:Ge},this._cmp=this._ascending=Bn,this._descending=function(Qe,at){return Bn(at,Qe)},this._max=function(Qe,at){return 0<Bn(Qe,at)?Qe:at},this._min=function(Qe,at){return Bn(Qe,at)<0?Qe:at},this._IDBKeyRange=We._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ae.MissingAPI})),this.on("versionchange",function(qe){0<qe.newVersion?console.warn("Another connection wants to upgrade database '".concat(Z.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(Z.name,"'. Closing db now to resume the delete request.")),Z.close({disableAutoOpen:!1})}),this.on("blocked",function(qe){!qe.newVersion||qe.newVersion<qe.oldVersion?console.warn("Dexie.delete('".concat(Z.name,"') was blocked")):console.warn("Upgrade '".concat(Z.name,"' blocked by other connection holding version ").concat(qe.oldVersion/10))}),this._maxKey=eu(j.IDBKeyRange),this._createTransaction=function(qe,rt,Ge,Qe){return new Z.Transaction(qe,rt,Ge,Z._options.chromeTransactionDurability,Qe)},this._fireOnBlocked=function(qe){Z.on("blocked").fire(qe),Co.filter(function(rt){return rt.name===Z.name&&rt!==Z&&!rt._state.vcFired}).map(function(rt){return rt.on("versionchange").fire(qe)})},this.use(Ag),this.use(Zd),this.use(x1),this.use(_1),this.use(kg);var tt=new Proxy(this,{get:function(qe,rt,Ge){if(rt==="_vip")return!0;if(rt==="table")return function(at){return Tc(Z.table(at),tt)};var Qe=Reflect.get(qe,rt,Ge);return Qe instanceof Vh?Tc(Qe,tt):rt==="tables"?Qe.map(function(at){return Tc(at,tt)}):rt==="_createTransaction"?function(){return Tc(Qe.apply(this,arguments),tt)}:Qe}});this.vip=tt,te.forEach(function(qe){return qe(Z)})}var au,ri=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ng=(Yd.prototype.subscribe=function(k,j,Z){return this._subscribe(k&&typeof k!="function"?k:{next:k,error:j,complete:Z})},Yd.prototype[ri]=function(){return this},Yd);function Yd(k){this._subscribe=k}try{au={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{au={indexedDB:null,IDBKeyRange:null}}function Ig(k){var j,Z=!1,te=new Ng(function(ue){var ve=Y(k),je,$e=!1,We={},Ye={},tt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,je&&je.abort(),qe&&ma.storagemutated.unsubscribe(Ge))}};ue.start&&ue.start(tt);var qe=!1,rt=function(){return ls(Qe)},Ge=function(at){Hd(We,at),rp(Ye,We)&&rt()},Qe=function(){var at,Xe,dt;!$e&&au.indexedDB&&(We={},at={},je&&je.abort(),je=new AbortController,dt=function(gt){var bt=q();try{ve&&Tn();var wt=Xt(k,gt);return wt=ve?wt.finally($n):wt}finally{bt&&L()}}(Xe={subscr:at,signal:je.signal,requery:rt,querier:k,trans:null}),Promise.resolve(dt).then(function(gt){Z=!0,j=gt,$e||Xe.signal.aborted||(We={},function(bt){for(var wt in bt)if(h(bt,wt))return;return 1}(Ye=at)||qe||(ma(Jl,Ge),qe=!0),ls(function(){return!$e&&ue.next&&ue.next(gt)}))},function(gt){Z=!1,["DatabaseClosedError","AbortError"].includes(gt==null?void 0:gt.name)||$e||ls(function(){$e||ue.error&&ue.error(gt)})}))};return setTimeout(rt,0),tt});return te.hasValue=function(){return Z},te.getValue=function(){return j},te}var rl=Qi;function up(k){var j=ps;try{ps=!0,ma.storagemutated.fire(k),op(k,!0)}finally{ps=j}}m(rl,r(r({},st),{delete:function(k){return new rl(k,{addons:[]}).delete()},exists:function(k){return new rl(k,{addons:[]}).open().then(function(j){return j.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(k){try{return j=rl.dependencies,Z=j.indexedDB,j=j.IDBKeyRange,(Ud(Z)?Promise.resolve(Z.databases()).then(function(te){return te.map(function(ue){return ue.name}).filter(function(ue){return ue!==Gs})}):Qh(Z,j).toCollection().primaryKeys()).then(k)}catch{return $r(new Ae.MissingAPI)}var j,Z},defineClass:function(){return function(k){u(this,k)}},ignoreTransaction:function(k){return Ee.trans?os(Ee.transless,k):k()},vip:ep,async:function(k){return function(){try{var j=kc(k.apply(this,arguments));return j&&typeof j.then=="function"?j:P.resolve(j)}catch(Z){return $r(Z)}}},spawn:function(k,j,Z){try{var te=kc(k.apply(Z,j||[]));return te&&typeof te.then=="function"?te:P.resolve(te)}catch(ue){return $r(ue)}},currentTransaction:{get:function(){return Ee.trans||null}},waitFor:function(k,j){return j=P.resolve(typeof k=="function"?rl.ignoreTransaction(k):k).timeout(j||6e4),Ee.trans?Ee.trans.waitFor(j):j},Promise:P,debug:{get:function(){return Le},set:function(k){xe(k)}},derive:v,extend:u,props:m,override:E,Events:ds,on:ma,liveQuery:Ig,extendObservabilitySet:Hd,getByKeyPath:O,setByKeyPath:I,delByKeyPath:function(k,j){typeof j=="string"?I(k,j,void 0):"length"in j&&[].map.call(j,function(Z){I(k,Z,void 0)})},shallowClone:D,deepClone:K,getObjectDiff:Gd,cmp:Bn,asap:A,minKey:-1/0,addons:[],connections:Co,errnames:Pe,dependencies:au,cache:tl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(k){return parseInt(k)}).reduce(function(k,j,Z){return k+j/Math.pow(10,2*Z)})})),rl.maxKey=eu(rl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ma(Jl,function(k){ps||(k=new CustomEvent(Js,{detail:k}),ps=!0,dispatchEvent(k),ps=!1)}),addEventListener(Js,function(k){k=k.detail,ps||up(k)}));var iu,ps=!1,za=function(){};return typeof BroadcastChannel<"u"&&((za=function(){(iu=new BroadcastChannel(Js)).onmessage=function(k){return k.data&&up(k.data)}})(),typeof iu.unref=="function"&&iu.unref(),ma(Jl,function(k){ps||iu.postMessage(k)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(k){if(!Qi.disableBfCache&&k.persisted){Le&&console.debug("Dexie: handling persisted pagehide"),iu!=null&&iu.close();for(var j=0,Z=Co;j<Z.length;j++)Z[j].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(k){!Qi.disableBfCache&&k.persisted&&(Le&&console.debug("Dexie: handling persisted pageshow"),za(),up({all:new ga(-1/0,[[]])}))})),P.rejectionMapper=function(k,j){return!k||k instanceof re||k instanceof TypeError||k instanceof SyntaxError||!k.name||!He[k.name]?k:(j=new He[k.name](j||k.message,k),"stack"in k&&w(j,"stack",{get:function(){return this.inner.stack}}),j)},xe(Le),r(Qi,Object.freeze({__proto__:null,Dexie:Qi,liveQuery:Ig,Entity:Id,cmp:Bn,PropModification:Zl,replacePrefix:function(k,j){return new Zl({replacePrefix:[k,j]})},add:function(k){return new Zl({add:k})},remove:function(k){return new Zl({remove:k})},default:Qi,RangeSet:ga,mergeRanges:el,rangesOverlap:Sg}),{default:Qi}),Qi})}(ub)),ub.exports}var uU=lU();const I2=Ja(uU),MR=Symbol.for("Dexie"),Sb=globalThis[MR]||(globalThis[MR]=I2);if(I2.semVer!==Sb.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${I2.semVer} and ${Sb.semVer}`);const{liveQuery:Wwe,mergeRanges:Kwe,rangesOverlap:Zwe,RangeSet:Ywe,cmp:Xwe,Entity:Jwe,PropModification:Qwe,replacePrefix:e1e,add:t1e,remove:n1e}=Sb,zv=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},vr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Fu=(...e)=>vr(e.map(t=>t.trim()).filter(Boolean).join("/")),Uv=e=>{const t=vr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},fa=e=>{const t=vr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},Eb=(e,t)=>vr(e==="/"?`/${t}`:`${e}/${t}`);class cU extends Sb{constructor(){super("LiteChatDatabase_Rewrite_v1");qa(this,"conversations");qa(this,"interactions");qa(this,"mods");qa(this,"appState");qa(this,"providerConfigs");qa(this,"apiKeys");qa(this,"syncRepos");qa(this,"projects");this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}).upgrade(async n=>{console.log("Upgrading DB to version 5, adding unique path to projects.");const r=n.table("projects"),a=await r.toArray(),i=[],o=new Map(a.map(u=>[u.id,u])),s=(u,c)=>{if(!u.parentId)return vr(`/${u.name}`);const f=c.get(u.parentId);if(!f)return console.error(`Upgrade Error: Parent project ${u.parentId} not found for project ${u.id}. Defaulting path.`),vr(`/__ORPHANED__/${u.name}`);const h=s(f,c);return vr(`${h}/${u.name}`)};for(const u of a)if(!u.path){const c=s(u,o);i.push(r.update(u.id,{path:c}))}await Promise.all(i),console.log(`Updated paths for ${i.length} projects.`)}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const sn=new cU,Yp=e=>({...e,...e.createdAt&&{createdAt:new Date(e.createdAt)},...e.updatedAt&&{updatedAt:new Date(e.updatedAt)}});class Wt{static async loadConversations(){try{return(await sn.conversations.orderBy("updatedAt").reverse().toArray()).map(Yp)}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await sn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await sn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await sn.interactions.where({conversationId:t}).sortBy("index")).map(r=>({...r,...r.startedAt&&{startedAt:new Date(r.startedAt)},...r.endedAt&&{endedAt:new Date(r.endedAt)}}))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await sn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await sn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await sn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await sn.mods.orderBy("loadOrder").toArray()).map(n=>({...n,...n.createdAt&&{createdAt:new Date(n.createdAt)}}))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await sn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await sn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await sn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await sn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=sn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>({...Yp(r),...r.modelsLastFetchedAt&&{modelsLastFetchedAt:new Date(r.modelsLastFetchedAt)}}))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await sn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await sn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=sn.apiKeys)==null?void 0:t.toArray())??[]).map(Yp)}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await sn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await sn.transaction("rw",[sn.apiKeys,sn.providerConfigs],async()=>{const n=await sn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await sn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await sn.syncRepos.toArray()).map(n=>({...Yp(n),...n.lastPulledAt&&{lastPulledAt:new Date(n.lastPulledAt)},...n.lastPushedAt&&{lastPushedAt:new Date(n.lastPushedAt)}}))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await sn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await sn.transaction("rw",[sn.syncRepos,sn.conversations],async()=>{const n=await sn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>sn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await sn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await sn.projects.orderBy("updatedAt").reverse().toArray()).map(Yp)}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await sn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await sn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await sn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>sn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await sn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await sn.transaction("rw",[sn.projects,sn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await sn.transaction("rw",[sn.conversations,sn.interactions,sn.mods,sn.appState,sn.providerConfigs,sn.apiKeys,sn.syncRepos,sn.projects],async()=>{await sn.interactions.clear(),await sn.conversations.clear(),await sn.projects.clear(),await sn.mods.clear(),await sn.appState.clear(),await sn.providerConfigs.clear(),await sn.apiKeys.clear(),await sn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}const kr=Bl(zl((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n});try{const r=await Wt.loadInteractionsForConversation(n);r.sort((a,i)=>a.index-i.index),e({interactions:r,status:"idle"})}catch(r){console.error("InteractionStore: Error loading interactions",r),e({error:"Failed load interactions",status:"error"})}},_addInteractionToState:n=>{e(r=>{if(r.interactions.some(a=>a.id===n.id))console.warn(`InteractionStore: Interaction ${n.id} already exists in state.`);else{const a=[...r.interactions,n];a.sort((i,o)=>i.index-o.index),r.interactions=a}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];Object.assign(o,r),r.metadata&&(o.metadata={...o.metadata||{},...r.metadata})}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)?a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r:console.warn(`InteractionStore: Tried to append chunk to non-streaming interaction buffer ${n}.`)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},addInteractionAndPersist:async n=>{const a=t().interactions.filter(u=>u.conversationId===n.conversationId),i=a.reduce((u,c)=>Math.max(u,c.index),-1)+1,o=a.length>0?a[a.length-1].id:null,s={...n,index:i,parentId:o};t()._addInteractionToState(s);try{return await Wt.saveInteraction(s),s}catch(u){throw console.error("InteractionStore: Error persisting added interaction",u),t()._removeInteractionFromState(s.id),e({error:"Failed to save interaction"}),u}},updateInteractionAndPersist:async n=>{try{await Wt.saveInteraction({...n})}catch(r){throw console.error(`InteractionStore: Error persisting final update for ${n.id}`,r),e({error:"Failed to save final interaction state"}),r}},deleteInteraction:async n=>{const r=t().interactions.find(i=>i.id===n);if(!r)return;const a={...r};t()._removeInteractionFromState(n),t()._removeStreamingId(n);try{await Wt.deleteInteraction(n)}catch(i){throw console.error("InteractionStore: Error deleting interaction",i),t()._addInteractionToState(a),a.status==="STREAMING"&&t()._addStreamingId(n),e({error:"Failed to delete interaction"}),i}},setCurrentConversationId:n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions."),e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null})},setError:n=>{e(r=>{r.error=n,n?r.status="error":r.status==="error"&&(r.status=r.streamingInteractionIds.length>0?"streaming":"idle")})},setStatus:n=>{t().status!==n&&e({status:n})},_addStreamingId:n=>{e(r=>{r.streamingInteractionIds.includes(n)||(r.streamingInteractionIds.push(n),r.activeStreamBuffers[n]="",r.streamingInteractionIds.length===1&&(r.status="streaming"),r.error=null)})},_removeStreamingId:n=>{e(r=>{const a=r.streamingInteractionIds.indexOf(n);a!==-1&&(r.streamingInteractionIds.splice(a,1),delete r.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),r.streamingInteractionIds.length===0&&r.status==="streaming"&&(r.status=r.error?"error":"idle"))})}})));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),PR=e=>{const t=fU(e);return t.charAt(0).toUpperCase()+t.slice(1)},EO=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},u)=>N.createElement("svg",{ref:u,...hU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:EO("lucide",a),...s},[...o.map(([c,f])=>N.createElement(c,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=(e,t)=>{const n=N.forwardRef(({className:r,...a},i)=>N.createElement(pU,{ref:i,iconNode:t,className:EO(`lucide-${dU(PR(e))}`,`lucide-${e}`,r),...a}));return n.displayName=PR(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],gU=an("archive",mU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],vo=an("check",yU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],XE=an("chevron-down",bU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],wU=an("chevron-left",vU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],CO=an("chevron-right",_U);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],SU=an("chevron-up",xU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],qv=an("chevrons-up-down",EU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Bu=an("circle-alert",CU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],O2=an("circle-check",kU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],JE=an("clipboard",AU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],kO=an("cloud-upload",TU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],AO=an("copy",RU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Cb=an("download",NU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],OU=an("eye-off",IU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],jU=an("eye",DU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],PU=an("file-archive",MU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],LU=an("file-json",FU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],BU=an("file-question",$U);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],UU=an("file-text",zU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],HU=an("file",qU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],GU=an("folder-git",VU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],KU=an("folder-open",WU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],QE=an("folder-plus",ZU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]],XU=an("folder-sync",YU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],QU=an("folder-up",JU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eq=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Hv=an("folder",eq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],eC=an("git-branch",tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],rq=an("git-commit-horizontal",nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],iq=an("git-merge",aq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],sq=an("git-pull-request",oq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lq=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],uq=an("grip-vertical",lq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cq=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],dq=an("house",cq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],hq=an("image",fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pq=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],TO=an("info",pq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mq=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],gq=an("key",mq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qn=an("loader-circle",yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],vq=an("message-square",bq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],_q=an("music",wq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],Sq=an("panel-left-close",xq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],Cq=an("panel-right-close",Eq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],Aq=an("paperclip",kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tC=an("pen",Tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vv=an("plus",Rq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gv=an("refresh-cw",Nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Oq=an("rotate-ccw",Iq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],nC=an("save",Dq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],rC=an("search",jq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],Pq=an("send-horizontal",Mq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Lq=an("settings-2",Fq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],RO=an("settings",$q);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],zq=an("sliders-horizontal",Bq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uq=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],D2=an("square-pen",Uq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qq=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Hq=an("square",qq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],zu=an("trash-2",Vq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gq=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Wq=an("triangle-alert",Gq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kq=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Zq=an("upload",Kq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yq=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Xq=an("user",Yq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jq=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Qq=an("video",Jq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],zs=an("x",eH),tH="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Mo=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=tH[n[e]&63];return t};function nH(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Si=nH(),kb=Bl(zl(e=>({attachedFilesMetadata:[],addAttachedFile:t=>{e(n=>{if(n.attachedFilesMetadata.some(a=>a.source==="direct"&&t.source==="direct"?a.name===t.name:a.source==="vfs"&&t.source==="vfs"?a.path===t.path:!1))console.warn(`InputStore: File "${t.name}" (source: ${t.source}) already attached. Skipping.`);else{const a={id:crypto.randomUUID(),...t};n.attachedFilesMetadata.push(a)}})},removeAttachedFile:t=>{e(n=>{n.attachedFilesMetadata=n.attachedFilesMetadata.filter(r=>r.id!==t)})},clearAttachedFiles:()=>{e({attachedFilesMetadata:[]})}}))),rH=KE("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function aH({className:e,variant:t,asChild:n=!1,...r}){const a=n?yO:"span";return y.jsx(a,{"data-slot":"badge",className:Mt(rH({variant:t}),e),...r})}var Is=aO();const NO=Ja(Is);function iH(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const oH=e=>{switch(e){case"success":return uH;case"info":return dH;case"warning":return cH;case"error":return fH;default:return null}},sH=Array(12).fill(0),lH=({visible:e,className:t})=>vt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},vt.createElement("div",{className:"sonner-spinner"},sH.map((n,r)=>vt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),uH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),cH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),dH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),fH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},vt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),hH=vt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},vt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),vt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),pH=()=>{const[e,t]=vt.useState(document.hidden);return vt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let j2=1;class mH{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:j2++,o=this.toasts.find(u=>u.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:r}),{...u,...t,id:i,dismissible:s,title:r}):u):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async c=>{if(o=["resolve",c],vt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(yH(c)&&!c.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${c.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${c.status}`):n.description,w=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...w})}else if(c instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(c):n.error,m=typeof n.description=="function"?await n.description(c):n.description,w=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...w})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(c):n.success,m=typeof n.description=="function"?await n.description(c):n.description,w=typeof h=="object"&&!vt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...w})}}).catch(async c=>{if(o=["reject",c],n.error!==void 0){i=!1;const f=typeof n.error=="function"?await n.error(c):n.error,h=typeof n.description=="function"?await n.description(c):n.description,g=typeof f=="object"&&!vt.isValidElement(f)?f:{message:f};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),u=()=>new Promise((c,f)=>s.then(()=>o[0]==="reject"?f(o[1]):c(o[1])).catch(f));return typeof r!="string"&&typeof r!="number"?{unwrap:u}:Object.assign(r,{unwrap:u})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||j2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const vi=new mH,gH=(e,t)=>{const n=(t==null?void 0:t.id)||j2++;return vi.addToast({title:e,...t,id:n}),n},yH=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",bH=gH,vH=()=>vi.toasts,wH=()=>vi.getActiveToasts(),ht=Object.assign(bH,{success:vi.success,info:vi.info,warning:vi.warning,error:vi.error,custom:vi.custom,message:vi.message,promise:vi.promise,dismiss:vi.dismiss,loading:vi.loading},{getHistory:vH,getToasts:wH});iH("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ny(e){return e.label!==void 0}const _H=3,xH="24px",SH="16px",FR=4e3,EH=356,CH=14,kH=45,AH=200;function _s(...e){return e.filter(Boolean).join(" ")}function TH(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const RH=e=>{var t,n,r,a,i,o,s,u,c;const{invert:f,toast:h,unstyled:m,interacting:g,setHeights:w,visibleToasts:v,heights:_,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:A,closeButton:O,style:I,cancelButtonStyle:D,actionButtonStyle:B,className:W="",descriptionClassName:Q="",duration:M,position:K,gap:U,expandByDefault:me,classNames:se,icons:ne,closeButtonAriaLabel:ee="Close toast"}=e,[ae,G]=vt.useState(null),[Y,J]=vt.useState(null),[re,we]=vt.useState(!1),[ke,Me]=vt.useState(!1),[Pe,Re]=vt.useState(!1),[Ae,He]=vt.useState(!1),[st,Oe]=vt.useState(!1),[Te,z]=vt.useState(0),[Ce,Ne]=vt.useState(0),ce=vt.useRef(h.duration||M||FR),ie=vt.useRef(null),X=vt.useRef(null),_e=x===0,Le=x+1<=v,xe=h.type,Ve=h.dismissible!==!1,xt=h.className||"",ft=h.descriptionClassName||"",Et=vt.useMemo(()=>_.findIndex(De=>De.toastId===h.id)||0,[_,h.id]),Lt=vt.useMemo(()=>{var De;return(De=h.closeButton)!=null?De:O},[h.closeButton,O]),Tt=vt.useMemo(()=>h.duration||M||FR,[h.duration,M]),zt=vt.useRef(0),ge=vt.useRef(0),R=vt.useRef(0),H=vt.useRef(null),[fe,Ie]=K.split("-"),be=vt.useMemo(()=>_.reduce((De,Ke,Ct)=>Ct>=Et?De:De+Ke.height,0),[_,Et]),Ee=pH(),le=h.invert||f,ct=xe==="loading";ge.current=vt.useMemo(()=>Et*U+be,[Et,be]),vt.useEffect(()=>{ce.current=Tt},[Tt]),vt.useEffect(()=>{we(!0)},[]),vt.useEffect(()=>{const De=X.current;if(De){const Ke=De.getBoundingClientRect().height;return Ne(Ke),w(Ct=>[{toastId:h.id,height:Ke,position:h.position},...Ct]),()=>w(Ct=>Ct.filter(ye=>ye.toastId!==h.id))}},[w,h.id]),vt.useLayoutEffect(()=>{if(!re)return;const De=X.current,Ke=De.style.height;De.style.height="auto";const Ct=De.getBoundingClientRect().height;De.style.height=Ke,Ne(Ct),w(ye=>ye.find(L=>L.toastId===h.id)?ye.map(L=>L.toastId===h.id?{...L,height:Ct}:L):[{toastId:h.id,height:Ct,position:h.position},...ye])},[re,h.title,h.description,w,h.id]);const yt=vt.useCallback(()=>{Me(!0),z(ge.current),w(De=>De.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},AH)},[h,C,w,ge]);vt.useEffect(()=>{if(h.promise&&xe==="loading"||h.duration===1/0||h.type==="loading")return;let De;return E||g||Ee?(()=>{if(R.current<zt.current){const ye=new Date().getTime()-zt.current;ce.current=ce.current-ye}R.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(zt.current=new Date().getTime(),De=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),yt()},ce.current))})(),()=>clearTimeout(De)},[E,g,h,xe,Ee,yt]),vt.useEffect(()=>{h.delete&&yt()},[yt,h.delete]);function P(){var De;if(ne!=null&&ne.loading){var Ke;return vt.createElement("div",{className:_s(se==null?void 0:se.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":xe==="loading"},ne.loading)}return vt.createElement(lH,{className:_s(se==null?void 0:se.loader,h==null||(De=h.classNames)==null?void 0:De.loader),visible:xe==="loading"})}const Be=h.icon||(ne==null?void 0:ne[xe])||oH(xe);var et,pe;return vt.createElement("li",{tabIndex:0,ref:X,className:_s(W,xt,se==null?void 0:se.toast,h==null||(t=h.classNames)==null?void 0:t.toast,se==null?void 0:se.default,se==null?void 0:se[xe],h==null||(n=h.classNames)==null?void 0:n[xe]),"data-sonner-toast":"","data-rich-colors":(et=h.richColors)!=null?et:A,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":re,"data-promise":!!h.promise,"data-swiped":st,"data-removed":ke,"data-visible":Le,"data-y-position":fe,"data-x-position":Ie,"data-index":x,"data-front":_e,"data-swiping":Pe,"data-dismissible":Ve,"data-type":xe,"data-invert":le,"data-swipe-out":Ae,"data-swipe-direction":Y,"data-expanded":!!(E||me&&re),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${ke?Te:ge.current}px`,"--initial-height":me?"auto":`${Ce}px`,...I,...h.style},onDragEnd:()=>{Re(!1),G(null),H.current=null},onPointerDown:De=>{ct||!Ve||(ie.current=new Date,z(ge.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Re(!0),H.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,Ke,Ct;if(Ae||!Ve)return;H.current=null;const ye=Number(((De=X.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),q=Number(((Ke=X.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),L=new Date().getTime()-((Ct=ie.current)==null?void 0:Ct.getTime()),V=ae==="x"?ye:q,he=Math.abs(V)/L;if(Math.abs(V)>=kH||he>.11){z(ge.current),h.onDismiss==null||h.onDismiss.call(h,h),J(ae==="x"?ye>0?"right":"left":q>0?"down":"up"),yt(),He(!0);return}else{var de,Fe;(de=X.current)==null||de.style.setProperty("--swipe-amount-x","0px"),(Fe=X.current)==null||Fe.style.setProperty("--swipe-amount-y","0px")}Oe(!1),Re(!1),G(null)},onPointerMove:De=>{var Ke,Ct,ye;if(!H.current||!Ve||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const L=De.clientY-H.current.y,V=De.clientX-H.current.x;var he;const de=(he=e.swipeDirections)!=null?he:TH(K);!ae&&(Math.abs(V)>1||Math.abs(L)>1)&&G(Math.abs(V)>Math.abs(L)?"x":"y");let Fe={x:0,y:0};const it=Dt=>1/(1.5+Math.abs(Dt)/20);if(ae==="y"){if(de.includes("top")||de.includes("bottom"))if(de.includes("top")&&L<0||de.includes("bottom")&&L>0)Fe.y=L;else{const Dt=L*it(L);Fe.y=Math.abs(Dt)<Math.abs(L)?Dt:L}}else if(ae==="x"&&(de.includes("left")||de.includes("right")))if(de.includes("left")&&V<0||de.includes("right")&&V>0)Fe.x=V;else{const Dt=V*it(V);Fe.x=Math.abs(Dt)<Math.abs(V)?Dt:V}(Math.abs(Fe.x)>0||Math.abs(Fe.y)>0)&&Oe(!0),(Ct=X.current)==null||Ct.style.setProperty("--swipe-amount-x",`${Fe.x}px`),(ye=X.current)==null||ye.style.setProperty("--swipe-amount-y",`${Fe.y}px`)}},Lt&&!h.jsx&&xe!=="loading"?vt.createElement("button",{"aria-label":ee,"data-disabled":ct,"data-close-button":!0,onClick:ct||!Ve?()=>{}:()=>{yt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:_s(se==null?void 0:se.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(pe=ne==null?void 0:ne.close)!=null?pe:hH):null,(xe||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[xe])!==null||h.icon)?vt.createElement("div",{"data-icon":"",className:_s(se==null?void 0:se.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||P():null,h.type!=="loading"?Be:null):null,vt.createElement("div",{"data-content":"",className:_s(se==null?void 0:se.content,h==null||(i=h.classNames)==null?void 0:i.content)},vt.createElement("div",{"data-title":"",className:_s(se==null?void 0:se.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?vt.createElement("div",{"data-description":"",className:_s(Q,ft,se==null?void 0:se.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),vt.isValidElement(h.cancel)?h.cancel:h.cancel&&Ny(h.cancel)?vt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||D,onClick:De=>{Ny(h.cancel)&&Ve&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,De),yt())},className:_s(se==null?void 0:se.cancelButton,h==null||(u=h.classNames)==null?void 0:u.cancelButton)},h.cancel.label):null,vt.isValidElement(h.action)?h.action:h.action&&Ny(h.action)?vt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||B,onClick:De=>{Ny(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,De),!De.defaultPrevented&&yt())},className:_s(se==null?void 0:se.actionButton,h==null||(c=h.classNames)==null?void 0:c.actionButton)},h.action.label):null)};function LR(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function NH(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?SH:xH;function u(c){["top","right","bottom","left"].forEach(f=>{n[`${o}-${f}`]=typeof c=="number"?`${c}px`:c})}typeof r=="number"||typeof r=="string"?u(r):typeof r=="object"?["top","right","bottom","left"].forEach(c=>{r[c]===void 0?n[`${o}-${c}`]=s:n[`${o}-${c}`]=typeof r[c]=="number"?`${r[c]}px`:r[c]}):u(s)}),n}const IH=vt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:u,offset:c,mobileOffset:f,theme:h="light",richColors:m,duration:g,style:w,visibleToasts:v=_H,toastOptions:_,dir:x=LR(),gap:S=CH,icons:E,containerAriaLabel:C="Notifications"}=t,[A,O]=vt.useState([]),I=vt.useMemo(()=>Array.from(new Set([a].concat(A.filter(Y=>Y.position).map(Y=>Y.position)))),[A,a]),[D,B]=vt.useState([]),[W,Q]=vt.useState(!1),[M,K]=vt.useState(!1),[U,me]=vt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),se=vt.useRef(null),ne=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=vt.useRef(null),ae=vt.useRef(!1),G=vt.useCallback(Y=>{O(J=>{var re;return(re=J.find(we=>we.id===Y.id))!=null&&re.delete||vi.dismiss(Y.id),J.filter(({id:we})=>we!==Y.id)})},[]);return vt.useEffect(()=>vi.subscribe(Y=>{if(Y.dismiss){requestAnimationFrame(()=>{O(J=>J.map(re=>re.id===Y.id?{...re,delete:!0}:re))});return}setTimeout(()=>{NO.flushSync(()=>{O(J=>{const re=J.findIndex(we=>we.id===Y.id);return re!==-1?[...J.slice(0,re),{...J[re],...Y},...J.slice(re+1)]:[Y,...J]})})})}),[A]),vt.useEffect(()=>{if(h!=="system"){me(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?me("dark"):me("light")),typeof window>"u")return;const Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:J})=>{me(J?"dark":"light")})}catch{Y.addListener(({matches:re})=>{try{me(re?"dark":"light")}catch(we){console.error(we)}})}},[h]),vt.useEffect(()=>{A.length<=1&&Q(!1)},[A]),vt.useEffect(()=>{const Y=J=>{var re;if(i.every(Me=>J[Me]||J.code===Me)){var ke;Q(!0),(ke=se.current)==null||ke.focus()}J.code==="Escape"&&(document.activeElement===se.current||(re=se.current)!=null&&re.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[i]),vt.useEffect(()=>{if(se.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,ae.current=!1)}},[se.current]),vt.createElement("section",{ref:n,"aria-label":`${C} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((Y,J)=>{var re;const[we,ke]=Y.split("-");return A.length?vt.createElement("ol",{key:Y,dir:x==="auto"?LR():x,tabIndex:-1,ref:se,className:u,"data-sonner-toaster":!0,"data-sonner-theme":U,"data-y-position":we,"data-lifted":W&&A.length>1&&!o,"data-x-position":ke,style:{"--front-toast-height":`${((re=D[0])==null?void 0:re.height)||0}px`,"--width":`${EH}px`,"--gap":`${S}px`,...w,...NH(c,f)},onBlur:Me=>{ae.current&&!Me.currentTarget.contains(Me.relatedTarget)&&(ae.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||ae.current||(ae.current=!0,ee.current=Me.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{M||Q(!1)},onDragEnd:()=>Q(!1),onPointerDown:Me=>{Me.target instanceof HTMLElement&&Me.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},A.filter(Me=>!Me.position&&J===0||Me.position===Y).map((Me,Pe)=>{var Re,Ae;return vt.createElement(RH,{key:Me.id,icons:E,index:Pe,toast:Me,defaultRichColors:m,duration:(Re=_==null?void 0:_.duration)!=null?Re:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:v,closeButton:(Ae=_==null?void 0:_.closeButton)!=null?Ae:s,interacting:M,position:Y,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:G,toasts:A.filter(He=>He.position==Me.position),heights:D.filter(He=>He.position==Me.position),setHeights:B,expandByDefault:o,gap:S,expanded:W,swipeDirections:t.swipeDirections})})):null}))});async function OH(e,t){const n=Ri.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const DH=({InputAreaRenderer:e,onSubmit:t,className:n,inputRef:r})=>{const[a,i]=N.useState(""),{attachedFilesMetadata:o,clearAttachedFiles:s,removeAttachedFile:u}=kb(),[c,f]=N.useState(!1),h=Ri(C=>C.promptControls),m=kr(C=>C.status==="streaming"),g=N.useMemo(()=>Object.values(h).filter(C=>C.show?C.show():!0).sort((C,A)=>(C.order??1/0)-(A.order??1/0)),[h]),w=N.useCallback(()=>{i(""),s(),g.forEach(C=>{C.clearOnSubmit&&C.clearOnSubmit()})},[g,s]),v=N.useCallback(async C=>{C==null||C.preventDefault();const A=a.trim();if(m){console.warn("Submit prevented: AI is currently streaming.");return}const O=kb.getState().attachedFilesMetadata;if(!(A||O.length>0)){console.warn("Submit prevented: No content provided.");return}f(!0);const D=JSON.parse(JSON.stringify(O));let B={id:Mo(),content:A,parameters:{},metadata:{attachedFiles:D}};for(const M of g){if(M.getParameters)try{const K=await M.getParameters();K&&typeof K=="object"&&(B.parameters={...B.parameters,...K})}catch(K){console.error(`Error getting parameters from control ${M.id}:`,K)}if(M.getMetadata)try{const K=await M.getMetadata();if(K&&typeof K=="object"){const{attachedFiles:U,...me}=K;U&&console.warn(`Control ${M.id} tried to overwrite attachedFiles metadata. Ignoring.`),B.metadata={...B.metadata,...me,attachedFiles:B.metadata.attachedFiles}}}catch(K){console.error(`Error getting metadata from control ${M.id}:`,K)}}Si.emit("prompt:submitted",{turnData:B});const W=await OH("middleware:prompt:turnFinalize",{turnData:B});if(W===!1){console.log("Submission cancelled by middleware:prompt:turnFinalize."),f(!1);return}const Q=W&&typeof W=="object"?W.turnData:B;try{await t(Q),w()}catch(M){console.error("Error during final prompt submission:",M),ht.error(`Submission failed: ${M instanceof Error?M.message:String(M)}`)}finally{f(!1)}},[a,t,m,w,g]),_=N.useCallback(C=>{i(C)},[]),x=N.useCallback(()=>{v()},[v]),S=g.some(C=>!!C.renderer),E=g.some(C=>!!C.triggerRenderer);return N.useEffect(()=>()=>{s()},[s]),y.jsxs("form",{onSubmit:v,className:Mt("flex flex-col border-t border-[--border] bg-background",n),children:[S&&y.jsx("div",{className:"p-2 border-b border-[--border] bg-muted/30",children:y.jsx(SR,{controls:g,area:"panel"})}),o.length>0&&y.jsx("div",{className:"px-3 md:px-4 pt-2 border-b border-border/50 max-h-24 overflow-y-auto",children:y.jsx("div",{className:"flex flex-wrap gap-1.5 pb-1.5",children:o.map(C=>y.jsxs(aH,{variant:"secondary",className:"flex items-center gap-1.5 pl-1.5 pr-0.5 py-0.5 text-xs",children:[y.jsx("span",{className:"truncate max-w-[150px]",title:C.name,children:C.name}),y.jsxs("span",{className:"text-muted-foreground/80",children:["(",zv(C.size),")"]}),y.jsx(Ht,{type:"button",variant:"ghost",size:"icon",className:"h-4 w-4 text-muted-foreground hover:text-destructive hover:bg-destructive/10",onClick:()=>u(C.id),"aria-label":`Remove ${C.name}`,disabled:c||m,children:y.jsx(zs,{className:"h-3 w-3"})})]},C.id))})}),y.jsxs("div",{className:"p-3 md:p-4 flex items-end gap-2",children:[y.jsx("div",{className:"flex-grow",children:y.jsx(e,{ref:r,value:a,onChange:_,onSubmit:x,disabled:c||m})}),y.jsx("div",{className:"flex-shrink-0",children:y.jsx(Ht,{type:"submit",disabled:c||m||!a.trim()&&o.length===0,size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Send message",children:y.jsx(Pq,{className:"h-5 w-5"})})})]}),E&&y.jsx("div",{className:"px-3 md:px-4 pb-2 pt-1 flex-grow",children:y.jsx(SR,{controls:g,area:"trigger",className:"flex flex-wrap items-center gap-1 [&>*]:flex-shrink-0"})})]})};function Ft(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function jH(e,t){const n=N.createContext(t),r=i=>{const{children:o,...s}=i,u=N.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:u,children:o})};r.displayName=e+"Provider";function a(i){const o=N.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function ci(e,t=[]){let n=[];function r(i,o){const s=N.createContext(o),u=n.length;n=[...n,o];const c=h=>{var x;const{scope:m,children:g,...w}=h,v=((x=m==null?void 0:m[e])==null?void 0:x[u])||s,_=N.useMemo(()=>w,Object.values(w));return y.jsx(v.Provider,{value:_,children:g})};c.displayName=i+"Provider";function f(h,m){var v;const g=((v=m==null?void 0:m[e])==null?void 0:v[u])||s,w=N.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,f]}const a=()=>{const i=n.map(o=>N.createContext(o));return function(s){const u=(s==null?void 0:s[e])||i;return N.useMemo(()=>({[`__scope${e}`]:{...s,[e]:u}}),[s,u])}};return a.scopeName=e,[r,MH(a,...t)]}function MH(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...s,...h}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var PH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Jt=PH.reduce((e,t)=>{const n=$u(`Primitive.${t}`),r=N.forwardRef((a,i)=>{const{asChild:o,...s}=a,u=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(u,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function IO(e,t){e&&Is.flushSync(()=>e.dispatchEvent(t))}function Ea(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function FH(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e);N.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var LH="DismissableLayer",M2="dismissableLayer.update",$H="dismissableLayer.pointerDownOutside",BH="dismissableLayer.focusOutside",$R,OO=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vh=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...u}=e,c=N.useContext(OO),[f,h]=N.useState(null),m=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=N.useState({}),w=_n(t,I=>h(I)),v=Array.from(c.layers),[_]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(_),S=f?v.indexOf(f):-1,E=c.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,A=qH(I=>{const D=I.target,B=[...c.branches].some(W=>W.contains(D));!C||B||(a==null||a(I),o==null||o(I),I.defaultPrevented||s==null||s())},m),O=HH(I=>{const D=I.target;[...c.branches].some(W=>W.contains(D))||(i==null||i(I),o==null||o(I),I.defaultPrevented||s==null||s())},m);return FH(I=>{S===c.layers.size-1&&(r==null||r(I),!I.defaultPrevented&&s&&(I.preventDefault(),s()))},m),N.useEffect(()=>{if(f)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&($R=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(f)),c.layers.add(f),BR(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=$R)}},[f,m,n,c]),N.useEffect(()=>()=>{f&&(c.layers.delete(f),c.layersWithOutsidePointerEventsDisabled.delete(f),BR())},[f,c]),N.useEffect(()=>{const I=()=>g({});return document.addEventListener(M2,I),()=>document.removeEventListener(M2,I)},[]),y.jsx(Jt.div,{...u,ref:w,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:Ft(e.onFocusCapture,O.onFocusCapture),onBlurCapture:Ft(e.onBlurCapture,O.onBlurCapture),onPointerDownCapture:Ft(e.onPointerDownCapture,A.onPointerDownCapture)})});vh.displayName=LH;var zH="DismissableLayerBranch",UH=N.forwardRef((e,t)=>{const n=N.useContext(OO),r=N.useRef(null),a=_n(t,r);return N.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(Jt.div,{...e,ref:a})});UH.displayName=zH;function qH(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e),r=N.useRef(!1),a=N.useRef(()=>{});return N.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let u=function(){DO($H,n,c,{discrete:!0})};const c={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function HH(e,t=globalThis==null?void 0:globalThis.document){const n=Ea(e),r=N.useRef(!1);return N.useEffect(()=>{const a=i=>{i.target&&!r.current&&DO(BH,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function BR(){const e=new CustomEvent(M2);document.dispatchEvent(e)}function DO(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?IO(a,i):a.dispatchEvent(i)}var La=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},VH=rO[" useId ".trim().toString()]||(()=>{}),GH=0;function ka(e){const[t,n]=N.useState(VH());return La(()=>{n(r=>r??String(GH++))},[e]),t?`radix-${t}`:""}const WH=["top","right","bottom","left"],Uu=Math.min,Hi=Math.max,Ab=Math.round,Iy=Math.floor,Ms=e=>({x:e,y:e}),KH={left:"right",right:"left",bottom:"top",top:"bottom"},ZH={start:"end",end:"start"};function P2(e,t,n){return Hi(e,Uu(t,n))}function Dl(e,t){return typeof e=="function"?e(t):e}function jl(e){return e.split("-")[0]}function wh(e){return e.split("-")[1]}function aC(e){return e==="x"?"y":"x"}function iC(e){return e==="y"?"height":"width"}function qu(e){return["top","bottom"].includes(jl(e))?"y":"x"}function oC(e){return aC(qu(e))}function YH(e,t,n){n===void 0&&(n=!1);const r=wh(e),a=oC(e),i=iC(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Tb(o)),[o,Tb(o)]}function XH(e){const t=Tb(e);return[F2(e),t,F2(t)]}function F2(e){return e.replace(/start|end/g,t=>ZH[t])}function JH(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function QH(e,t,n,r){const a=wh(e);let i=JH(jl(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(F2)))),i}function Tb(e){return e.replace(/left|right|bottom|top/g,t=>KH[t])}function eV(e){return{top:0,right:0,bottom:0,left:0,...e}}function jO(e){return typeof e!="number"?eV(e):{top:e,right:e,bottom:e,left:e}}function Rb(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function zR(e,t,n){let{reference:r,floating:a}=e;const i=qu(t),o=oC(t),s=iC(o),u=jl(t),c=i==="y",f=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[s]/2-a[s]/2;let g;switch(u){case"top":g={x:f,y:r.y-a.height};break;case"bottom":g={x:f,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(wh(t)){case"start":g[o]-=m*(n&&c?-1:1);break;case"end":g[o]+=m*(n&&c?-1:1);break}return g}const tV=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:f,y:h}=zR(c,r,u),m=r,g={},w=0;for(let v=0;v<s.length;v++){const{name:_,fn:x}=s[v],{x:S,y:E,data:C,reset:A}=await x({x:f,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:c,platform:o,elements:{reference:e,floating:t}});f=S??f,h=E??h,g={...g,[_]:{...g[_],...C}},A&&w<=50&&(w++,typeof A=="object"&&(A.placement&&(m=A.placement),A.rects&&(c=A.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):A.rects),{x:f,y:h}=zR(c,m,u)),v=-1)}return{x:f,y:h,placement:m,strategy:a,middlewareData:g}};async function _m(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:u}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Dl(t,e),w=jO(g),_=s[m?h==="floating"?"reference":"floating":h],x=Rb(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:u})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},A=Rb(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:u}):S);return{top:(x.top-A.top+w.top)/C.y,bottom:(A.bottom-x.bottom+w.bottom)/C.y,left:(x.left-A.left+w.left)/C.x,right:(A.right-x.right+w.right)/C.x}}const nV=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:u}=t,{element:c,padding:f=0}=Dl(e,t)||{};if(c==null)return{};const h=jO(f),m={x:n,y:r},g=oC(a),w=iC(g),v=await o.getDimensions(c),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[w]+i.reference[g]-m[g]-i.floating[w],A=m[g]-i.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let I=O?O[E]:0;(!I||!await(o.isElement==null?void 0:o.isElement(O)))&&(I=s.floating[E]||i.floating[w]);const D=C/2-A/2,B=I/2-v[w]/2-1,W=Uu(h[x],B),Q=Uu(h[S],B),M=W,K=I-v[w]-Q,U=I/2-v[w]/2+D,me=P2(M,U,K),se=!u.arrow&&wh(a)!=null&&U!==me&&i.reference[w]/2-(U<M?W:Q)-v[w]/2<0,ne=se?U<M?U-M:U-K:0;return{[g]:m[g]+ne,data:{[g]:me,centerOffset:U-me-ne,...se&&{alignmentOffset:ne}},reset:se}}}),rV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:u,elements:c}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,..._}=Dl(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=jl(a),S=qu(s),E=jl(s)===s,C=await(u.isRTL==null?void 0:u.isRTL(c.floating)),A=m||(E||!v?[Tb(s)]:XH(s)),O=w!=="none";!m&&O&&A.push(...QH(s,v,w,C));const I=[s,...A],D=await _m(t,_),B=[];let W=((r=i.flip)==null?void 0:r.overflows)||[];if(f&&B.push(D[x]),h){const U=YH(a,o,C);B.push(D[U[0]],D[U[1]])}if(W=[...W,{placement:a,overflows:B}],!B.every(U=>U<=0)){var Q,M;const U=(((Q=i.flip)==null?void 0:Q.index)||0)+1,me=I[U];if(me)return{data:{index:U,overflows:W},reset:{placement:me}};let se=(M=W.filter(ne=>ne.overflows[0]<=0).sort((ne,ee)=>ne.overflows[1]-ee.overflows[1])[0])==null?void 0:M.placement;if(!se)switch(g){case"bestFit":{var K;const ne=(K=W.filter(ee=>{if(O){const ae=qu(ee.placement);return ae===S||ae==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(ae=>ae>0).reduce((ae,G)=>ae+G,0)]).sort((ee,ae)=>ee[1]-ae[1])[0])==null?void 0:K[0];ne&&(se=ne);break}case"initialPlacement":se=s;break}if(a!==se)return{reset:{placement:se}}}return{}}}};function UR(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function qR(e){return WH.some(t=>e[t]>=0)}const aV=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Dl(e,t);switch(r){case"referenceHidden":{const i=await _m(t,{...a,elementContext:"reference"}),o=UR(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:qR(o)}}}case"escaped":{const i=await _m(t,{...a,altBoundary:!0}),o=UR(i,n.floating);return{data:{escapedOffsets:o,escaped:qR(o)}}}default:return{}}}}};async function iV(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=jl(n),s=wh(n),u=qu(n)==="y",c=["left","top"].includes(o)?-1:1,f=i&&u?-1:1,h=Dl(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof w=="number"&&(g=s==="end"?w*-1:w),u?{x:g*f,y:m*c}:{x:m*c,y:g*f}}const oV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,u=await iV(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},sV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...u}=Dl(e,t),c={x:n,y:r},f=await _m(t,u),h=qu(jl(a)),m=aC(h);let g=c[m],w=c[h];if(i){const _=m==="y"?"top":"left",x=m==="y"?"bottom":"right",S=g+f[_],E=g-f[x];g=P2(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=w+f[_],E=w-f[x];w=P2(S,w,E)}const v=s.fn({...t,[m]:g,[h]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[h]:o}}}}}},lV=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:u=!0,crossAxis:c=!0}=Dl(e,t),f={x:n,y:r},h=qu(a),m=aC(h);let g=f[m],w=f[h];const v=Dl(s,t),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(u){const E=m==="y"?"height":"width",C=i.reference[m]-i.floating[E]+_.mainAxis,A=i.reference[m]+i.reference[E]-_.mainAxis;g<C?g=C:g>A&&(g=A)}if(c){var x,S;const E=m==="y"?"width":"height",C=["top","left"].includes(jl(a)),A=i.reference[h]-i.floating[E]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:_.crossAxis),O=i.reference[h]+i.reference[E]+(C?0:((S=o.offset)==null?void 0:S[h])||0)-(C?_.crossAxis:0);w<A?w=A:w>O&&(w=O)}return{[m]:g,[h]:w}}}},uV=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:u=()=>{},...c}=Dl(e,t),f=await _m(t,c),h=jl(a),m=wh(a),g=qu(a)==="y",{width:w,height:v}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=m===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=m==="end"?"top":"bottom");const S=v-f.top-f.bottom,E=w-f.left-f.right,C=Uu(v-f[_],S),A=Uu(w-f[x],E),O=!t.middlewareData.shift;let I=C,D=A;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(D=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(I=S),O&&!m){const W=Hi(f.left,0),Q=Hi(f.right,0),M=Hi(f.top,0),K=Hi(f.bottom,0);g?D=w-2*(W!==0||Q!==0?W+Q:Hi(f.left,f.right)):I=v-2*(M!==0||K!==0?M+K:Hi(f.top,f.bottom))}await u({...t,availableWidth:D,availableHeight:I});const B=await o.getDimensions(s.floating);return w!==B.width||v!==B.height?{reset:{rects:!0}}:{}}}};function Wv(){return typeof window<"u"}function _h(e){return MO(e)?(e.nodeName||"").toLowerCase():"#document"}function Gi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Us(e){var t;return(t=(MO(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MO(e){return Wv()?e instanceof Node||e instanceof Gi(e).Node:!1}function Vo(e){return Wv()?e instanceof Element||e instanceof Gi(e).Element:!1}function Ps(e){return Wv()?e instanceof HTMLElement||e instanceof Gi(e).HTMLElement:!1}function HR(e){return!Wv()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Gi(e).ShadowRoot}function g0(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Go(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function cV(e){return["table","td","th"].includes(_h(e))}function Kv(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function sC(e){const t=lC(),n=Vo(e)?Go(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function dV(e){let t=Hu(e);for(;Ps(t)&&!Kf(t);){if(sC(t))return t;if(Kv(t))return null;t=Hu(t)}return null}function lC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kf(e){return["html","body","#document"].includes(_h(e))}function Go(e){return Gi(e).getComputedStyle(e)}function Zv(e){return Vo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hu(e){if(_h(e)==="html")return e;const t=e.assignedSlot||e.parentNode||HR(e)&&e.host||Us(e);return HR(t)?t.host:t}function PO(e){const t=Hu(e);return Kf(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ps(t)&&g0(t)?t:PO(t)}function xm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=PO(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Gi(a);if(i){const s=L2(o);return t.concat(o,o.visualViewport||[],g0(a)?a:[],s&&n?xm(s):[])}return t.concat(a,xm(a,[],n))}function L2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function FO(e){const t=Go(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Ps(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Ab(n)!==i||Ab(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function uC(e){return Vo(e)?e:e.contextElement}function Bf(e){const t=uC(e);if(!Ps(t))return Ms(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=FO(t);let o=(i?Ab(n.width):n.width)/r,s=(i?Ab(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const fV=Ms(0);function LO(e){const t=Gi(e);return!lC()||!t.visualViewport?fV:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function hV(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Gi(e)?!1:t}function od(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=uC(e);let o=Ms(1);t&&(r?Vo(r)&&(o=Bf(r)):o=Bf(e));const s=hV(i,n,r)?LO(i):Ms(0);let u=(a.left+s.x)/o.x,c=(a.top+s.y)/o.y,f=a.width/o.x,h=a.height/o.y;if(i){const m=Gi(i),g=r&&Vo(r)?Gi(r):r;let w=m,v=L2(w);for(;v&&r&&g!==w;){const _=Bf(v),x=v.getBoundingClientRect(),S=Go(v),E=x.left+(v.clientLeft+parseFloat(S.paddingLeft))*_.x,C=x.top+(v.clientTop+parseFloat(S.paddingTop))*_.y;u*=_.x,c*=_.y,f*=_.x,h*=_.y,u+=E,c+=C,w=Gi(v),v=L2(w)}}return Rb({width:f,height:h,x:u,y:c})}function cC(e,t){const n=Zv(e).scrollLeft;return t?t.left+n:od(Us(e)).left+n}function $O(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:cC(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function pV(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Us(r),s=t?Kv(t.floating):!1;if(r===o||s&&i)return n;let u={scrollLeft:0,scrollTop:0},c=Ms(1);const f=Ms(0),h=Ps(r);if((h||!h&&!i)&&((_h(r)!=="body"||g0(o))&&(u=Zv(r)),Ps(r))){const g=od(r);c=Bf(r),f.x=g.x+r.clientLeft,f.y=g.y+r.clientTop}const m=o&&!h&&!i?$O(o,u,!0):Ms(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+f.x+m.x,y:n.y*c.y-u.scrollTop*c.y+f.y+m.y}}function mV(e){return Array.from(e.getClientRects())}function gV(e){const t=Us(e),n=Zv(e),r=e.ownerDocument.body,a=Hi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Hi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cC(e);const s=-n.scrollTop;return Go(r).direction==="rtl"&&(o+=Hi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function yV(e,t){const n=Gi(e),r=Us(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,u=0;if(a){i=a.width,o=a.height;const c=lC();(!c||c&&t==="fixed")&&(s=a.offsetLeft,u=a.offsetTop)}return{width:i,height:o,x:s,y:u}}function bV(e,t){const n=od(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Ps(e)?Bf(e):Ms(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,u=a*i.x,c=r*i.y;return{width:o,height:s,x:u,y:c}}function VR(e,t,n){let r;if(t==="viewport")r=yV(e,n);else if(t==="document")r=gV(Us(e));else if(Vo(t))r=bV(t,n);else{const a=LO(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Rb(r)}function BO(e,t){const n=Hu(e);return n===t||!Vo(n)||Kf(n)?!1:Go(n).position==="fixed"||BO(n,t)}function vV(e,t){const n=t.get(e);if(n)return n;let r=xm(e,[],!1).filter(s=>Vo(s)&&_h(s)!=="body"),a=null;const i=Go(e).position==="fixed";let o=i?Hu(e):e;for(;Vo(o)&&!Kf(o);){const s=Go(o),u=sC(o);!u&&s.position==="fixed"&&(a=null),(i?!u&&!a:!u&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||g0(o)&&!u&&BO(e,o))?r=r.filter(f=>f!==o):a=s,o=Hu(o)}return t.set(e,r),r}function wV(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Kv(t)?[]:vV(t,this._c):[].concat(n),r],s=o[0],u=o.reduce((c,f)=>{const h=VR(t,f,a);return c.top=Hi(h.top,c.top),c.right=Uu(h.right,c.right),c.bottom=Uu(h.bottom,c.bottom),c.left=Hi(h.left,c.left),c},VR(t,s,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function _V(e){const{width:t,height:n}=FO(e);return{width:t,height:n}}function xV(e,t,n){const r=Ps(t),a=Us(t),i=n==="fixed",o=od(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const u=Ms(0);if(r||!r&&!i)if((_h(t)!=="body"||g0(a))&&(s=Zv(t)),r){const m=od(t,!0,i,t);u.x=m.x+t.clientLeft,u.y=m.y+t.clientTop}else a&&(u.x=cC(a));const c=a&&!r&&!i?$O(a,s):Ms(0),f=o.left+s.scrollLeft-u.x-c.x,h=o.top+s.scrollTop-u.y-c.y;return{x:f,y:h,width:o.width,height:o.height}}function mx(e){return Go(e).position==="static"}function GR(e,t){if(!Ps(e)||Go(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Us(e)===n&&(n=n.ownerDocument.body),n}function zO(e,t){const n=Gi(e);if(Kv(e))return n;if(!Ps(e)){let a=Hu(e);for(;a&&!Kf(a);){if(Vo(a)&&!mx(a))return a;a=Hu(a)}return n}let r=GR(e,t);for(;r&&cV(r)&&mx(r);)r=GR(r,t);return r&&Kf(r)&&mx(r)&&!sC(r)?n:r||dV(e)||n}const SV=async function(e){const t=this.getOffsetParent||zO,n=this.getDimensions,r=await n(e.floating);return{reference:xV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function EV(e){return Go(e).direction==="rtl"}const CV={convertOffsetParentRelativeRectToViewportRelativeRect:pV,getDocumentElement:Us,getClippingRect:wV,getOffsetParent:zO,getElementRects:SV,getClientRects:mV,getDimensions:_V,getScale:Bf,isElement:Vo,isRTL:EV};function UO(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function kV(e,t){let n=null,r;const a=Us(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,u){s===void 0&&(s=!1),u===void 0&&(u=1),i();const c=e.getBoundingClientRect(),{left:f,top:h,width:m,height:g}=c;if(s||t(),!m||!g)return;const w=Iy(h),v=Iy(a.clientWidth-(f+m)),_=Iy(a.clientHeight-(h+g)),x=Iy(f),E={rootMargin:-w+"px "+-v+"px "+-_+"px "+-x+"px",threshold:Hi(0,Uu(1,u))||1};let C=!0;function A(O){const I=O[0].intersectionRatio;if(I!==u){if(!C)return o();I?o(!1,I):r=setTimeout(()=>{o(!1,1e-7)},1e3)}I===1&&!UO(c,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(A,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(A,E)}n.observe(e)}return o(!0),i}function AV(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,c=uC(e),f=a||i?[...c?xm(c):[],...xm(t)]:[];f.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=c&&s?kV(c,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),c&&!u&&g.observe(c),g.observe(t));let w,v=u?od(e):null;u&&_();function _(){const x=od(e);v&&!UO(v,x)&&n(),v=x,w=requestAnimationFrame(_)}return n(),()=>{var x;f.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,u&&cancelAnimationFrame(w)}}const TV=oV,RV=sV,NV=rV,IV=uV,OV=aV,WR=nV,DV=lV,jV=(e,t,n)=>{const r=new Map,a={platform:CV,...n},i={...a.platform,_c:r};return tV(e,t,{...a,platform:i})};var cb=typeof document<"u"?N.useLayoutEffect:N.useEffect;function Nb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Nb(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Nb(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function qO(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function KR(e,t){const n=qO(e);return Math.round(t*n)/n}function gx(e){const t=N.useRef(e);return cb(()=>{t.current=e}),t}function MV(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:u,open:c}=e,[f,h]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=N.useState(r);Nb(m,r)||g(r);const[w,v]=N.useState(null),[_,x]=N.useState(null),S=N.useCallback(ee=>{ee!==O.current&&(O.current=ee,v(ee))},[]),E=N.useCallback(ee=>{ee!==I.current&&(I.current=ee,x(ee))},[]),C=i||w,A=o||_,O=N.useRef(null),I=N.useRef(null),D=N.useRef(f),B=u!=null,W=gx(u),Q=gx(a),M=gx(c),K=N.useCallback(()=>{if(!O.current||!I.current)return;const ee={placement:t,strategy:n,middleware:m};Q.current&&(ee.platform=Q.current),jV(O.current,I.current,ee).then(ae=>{const G={...ae,isPositioned:M.current!==!1};U.current&&!Nb(D.current,G)&&(D.current=G,Is.flushSync(()=>{h(G)}))})},[m,t,n,Q,M]);cb(()=>{c===!1&&D.current.isPositioned&&(D.current.isPositioned=!1,h(ee=>({...ee,isPositioned:!1})))},[c]);const U=N.useRef(!1);cb(()=>(U.current=!0,()=>{U.current=!1}),[]),cb(()=>{if(C&&(O.current=C),A&&(I.current=A),C&&A){if(W.current)return W.current(C,A,K);K()}},[C,A,K,W,B]);const me=N.useMemo(()=>({reference:O,floating:I,setReference:S,setFloating:E}),[S,E]),se=N.useMemo(()=>({reference:C,floating:A}),[C,A]),ne=N.useMemo(()=>{const ee={position:n,left:0,top:0};if(!se.floating)return ee;const ae=KR(se.floating,f.x),G=KR(se.floating,f.y);return s?{...ee,transform:"translate("+ae+"px, "+G+"px)",...qO(se.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ae,top:G}},[n,s,se.floating,f.x,f.y]);return N.useMemo(()=>({...f,update:K,refs:me,elements:se,floatingStyles:ne}),[f,K,me,se,ne])}const PV=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?WR({element:r.current,padding:a}).fn(n):{}:r?WR({element:r,padding:a}).fn(n):{}}}},FV=(e,t)=>({...TV(e),options:[e,t]}),LV=(e,t)=>({...RV(e),options:[e,t]}),$V=(e,t)=>({...DV(e),options:[e,t]}),BV=(e,t)=>({...NV(e),options:[e,t]}),zV=(e,t)=>({...IV(e),options:[e,t]}),UV=(e,t)=>({...OV(e),options:[e,t]}),qV=(e,t)=>({...PV(e),options:[e,t]});var HV="Arrow",HO=N.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(Jt.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});HO.displayName=HV;var VV=HO;function Yv(e){const[t,n]=N.useState(void 0);return La(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const u=i.borderBoxSize,c=Array.isArray(u)?u[0]:u;o=c.inlineSize,s=c.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var dC="Popper",[VO,lc]=ci(dC),[GV,GO]=VO(dC),WO=e=>{const{__scopePopper:t,children:n}=e,[r,a]=N.useState(null);return y.jsx(GV,{scope:t,anchor:r,onAnchorChange:a,children:n})};WO.displayName=dC;var KO="PopperAnchor",ZO=N.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=GO(KO,n),o=N.useRef(null),s=_n(t,o);return N.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(Jt.div,{...a,ref:s})});ZO.displayName=KO;var fC="PopperContent",[WV,KV]=VO(fC),YO=N.forwardRef((e,t)=>{var Pe,Re,Ae,He,st,Oe;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:u=!0,collisionBoundary:c=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:w,...v}=e,_=GO(fC,n),[x,S]=N.useState(null),E=_n(t,Te=>S(Te)),[C,A]=N.useState(null),O=Yv(C),I=(O==null?void 0:O.width)??0,D=(O==null?void 0:O.height)??0,B=r+(i!=="center"?"-"+i:""),W=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},Q=Array.isArray(c)?c:[c],M=Q.length>0,K={padding:W,boundary:Q.filter(YV),altBoundary:M},{refs:U,floatingStyles:me,placement:se,isPositioned:ne,middlewareData:ee}=MV({strategy:"fixed",placement:B,whileElementsMounted:(...Te)=>AV(...Te,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[FV({mainAxis:a+D,alignmentAxis:o}),u&&LV({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?$V():void 0,...K}),u&&BV({...K}),zV({...K,apply:({elements:Te,rects:z,availableWidth:Ce,availableHeight:Ne})=>{const{width:ce,height:ie}=z.reference,X=Te.floating.style;X.setProperty("--radix-popper-available-width",`${Ce}px`),X.setProperty("--radix-popper-available-height",`${Ne}px`),X.setProperty("--radix-popper-anchor-width",`${ce}px`),X.setProperty("--radix-popper-anchor-height",`${ie}px`)}}),C&&qV({element:C,padding:s}),XV({arrowWidth:I,arrowHeight:D}),m&&UV({strategy:"referenceHidden",...K})]}),[ae,G]=QO(se),Y=Ea(w);La(()=>{ne&&(Y==null||Y())},[ne,Y]);const J=(Pe=ee.arrow)==null?void 0:Pe.x,re=(Re=ee.arrow)==null?void 0:Re.y,we=((Ae=ee.arrow)==null?void 0:Ae.centerOffset)!==0,[ke,Me]=N.useState();return La(()=>{x&&Me(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:U.setFloating,"data-radix-popper-content-wrapper":"",style:{...me,transform:ne?me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[(He=ee.transformOrigin)==null?void 0:He.x,(st=ee.transformOrigin)==null?void 0:st.y].join(" "),...((Oe=ee.hide)==null?void 0:Oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(WV,{scope:n,placedSide:ae,onArrowChange:A,arrowX:J,arrowY:re,shouldHideArrow:we,children:y.jsx(Jt.div,{"data-side":ae,"data-align":G,...v,ref:E,style:{...v.style,animation:ne?void 0:"none"}})})})});YO.displayName=fC;var XO="PopperArrow",ZV={top:"bottom",right:"left",bottom:"top",left:"right"},JO=N.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=KV(XO,r),o=ZV[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(VV,{...a,ref:n,style:{...a.style,display:"block"}})})});JO.displayName=XO;function YV(e){return e!==null}var XV=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[c,f]=QO(n),h={start:"0%",center:"50%",end:"100%"}[f],m=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+u/2;let w="",v="";return c==="bottom"?(w=o?h:`${m}px`,v=`${-u}px`):c==="top"?(w=o?h:`${m}px`,v=`${r.floating.height+u}px`):c==="right"?(w=`${-u}px`,v=o?h:`${g}px`):c==="left"&&(w=`${r.floating.width+u}px`,v=o?h:`${g}px`),{data:{x:w,y:v}}}});function QO(e){const[t,n="center"]=e.split("-");return[t,n]}var Xv=WO,y0=ZO,Jv=YO,Qv=JO,JV="Portal",xh=N.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=N.useState(!1);La(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?NO.createPortal(y.jsx(Jt.div,{...r,ref:t}),o):null});xh.displayName=JV;function QV(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var Na=e=>{const{present:t,children:n}=e,r=eG(t),a=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),i=_n(r.ref,tG(a));return typeof n=="function"||r.isPresent?N.cloneElement(a,{ref:i}):null};Na.displayName="Presence";function eG(e){const[t,n]=N.useState(),r=N.useRef(null),a=N.useRef(e),i=N.useRef("none"),o=e?"mounted":"unmounted",[s,u]=QV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const c=Oy(r.current);i.current=s==="mounted"?c:"none"},[s]),La(()=>{const c=r.current,f=a.current;if(f!==e){const m=i.current,g=Oy(c);e?u("MOUNT"):g==="none"||(c==null?void 0:c.display)==="none"?u("UNMOUNT"):u(f&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),La(()=>{if(t){let c;const f=t.ownerDocument.defaultView??window,h=g=>{const v=Oy(r.current).includes(g.animationName);if(g.target===t&&v&&(u("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",c=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},m=g=>{g.target===t&&(i.current=Oy(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(c),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:N.useCallback(c=>{r.current=c?getComputedStyle(c):null,n(c)},[])}}function Oy(e){return(e==null?void 0:e.animationName)||"none"}function tG(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var nG=rO[" useInsertionEffect ".trim().toString()]||La;function Wo({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=rG({defaultProp:t,onChange:n}),s=e!==void 0,u=s?e:a;{const f=N.useRef(e!==void 0);N.useEffect(()=>{const h=f.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=s},[s,r])}const c=N.useCallback(f=>{var h;if(s){const m=aG(f)?f(e):f;m!==e&&((h=o.current)==null||h.call(o,m))}else i(f)},[s,e,i,o]);return[u,c]}function rG({defaultProp:e,onChange:t}){const[n,r]=N.useState(e),a=N.useRef(n),i=N.useRef(t);return nG(()=>{i.current=t},[t]),N.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function aG(e){return typeof e=="function"}var eD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),iG="VisuallyHidden",tD=N.forwardRef((e,t)=>y.jsx(Jt.span,{...e,ref:t,style:{...eD,...e.style}}));tD.displayName=iG;var oG=tD,[ew,r1e]=ci("Tooltip",[lc]),tw=lc(),nD="TooltipProvider",sG=700,$2="tooltip.open",[lG,hC]=ew(nD),rD=e=>{const{__scopeTooltip:t,delayDuration:n=sG,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=N.useRef(!0),s=N.useRef(!1),u=N.useRef(0);return N.useEffect(()=>{const c=u.current;return()=>window.clearTimeout(c)},[]),y.jsx(lG,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:N.useCallback(c=>{s.current=c},[]),disableHoverableContent:a,children:i})};rD.displayName=nD;var Sm="Tooltip",[uG,b0]=ew(Sm),aD=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,u=hC(Sm,e.__scopeTooltip),c=tw(t),[f,h]=N.useState(null),m=ka(),g=N.useRef(0),w=o??u.disableHoverableContent,v=s??u.delayDuration,_=N.useRef(!1),[x,S]=Wo({prop:r,defaultProp:a??!1,onChange:I=>{I?(u.onOpen(),document.dispatchEvent(new CustomEvent($2))):u.onClose(),i==null||i(I)},caller:Sm}),E=N.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),C=N.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),A=N.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),O=N.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},v)},[v,S]);return N.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(Xv,{...c,children:y.jsx(uG,{scope:t,contentId:m,open:x,stateAttribute:E,trigger:f,onTriggerChange:h,onTriggerEnter:N.useCallback(()=>{u.isOpenDelayedRef.current?O():C()},[u.isOpenDelayedRef,O,C]),onTriggerLeave:N.useCallback(()=>{w?A():(window.clearTimeout(g.current),g.current=0)},[A,w]),onOpen:C,onClose:A,disableHoverableContent:w,children:n})})};aD.displayName=Sm;var B2="TooltipTrigger",iD=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=b0(B2,n),i=hC(B2,n),o=tw(n),s=N.useRef(null),u=_n(t,s,a.onTriggerChange),c=N.useRef(!1),f=N.useRef(!1),h=N.useCallback(()=>c.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(y0,{asChild:!0,...o,children:y.jsx(Jt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:u,onPointerMove:Ft(e.onPointerMove,m=>{m.pointerType!=="touch"&&!f.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),f.current=!0)}),onPointerLeave:Ft(e.onPointerLeave,()=>{a.onTriggerLeave(),f.current=!1}),onPointerDown:Ft(e.onPointerDown,()=>{a.open&&a.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ft(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:Ft(e.onBlur,a.onClose),onClick:Ft(e.onClick,a.onClose)})})});iD.displayName=B2;var pC="TooltipPortal",[cG,dG]=ew(pC,{forceMount:void 0}),oD=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=b0(pC,t);return y.jsx(cG,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(xh,{asChild:!0,container:a,children:r})})})};oD.displayName=pC;var Zf="TooltipContent",sD=N.forwardRef((e,t)=>{const n=dG(Zf,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=b0(Zf,e.__scopeTooltip);return y.jsx(Na,{present:r||o.open,children:o.disableHoverableContent?y.jsx(lD,{side:a,...i,ref:t}):y.jsx(fG,{side:a,...i,ref:t})})}),fG=N.forwardRef((e,t)=>{const n=b0(Zf,e.__scopeTooltip),r=hC(Zf,e.__scopeTooltip),a=N.useRef(null),i=_n(t,a),[o,s]=N.useState(null),{trigger:u,onClose:c}=n,f=a.current,{onPointerInTransitChange:h}=r,m=N.useCallback(()=>{s(null),h(!1)},[h]),g=N.useCallback((w,v)=>{const _=w.currentTarget,x={x:w.clientX,y:w.clientY},S=gG(x,_.getBoundingClientRect()),E=yG(x,S),C=bG(v.getBoundingClientRect()),A=wG([...E,...C]);s(A),h(!0)},[h]);return N.useEffect(()=>()=>m(),[m]),N.useEffect(()=>{if(u&&f){const w=_=>g(_,f),v=_=>g(_,u);return u.addEventListener("pointerleave",w),f.addEventListener("pointerleave",v),()=>{u.removeEventListener("pointerleave",w),f.removeEventListener("pointerleave",v)}}},[u,f,g,m]),N.useEffect(()=>{if(o){const w=v=>{const _=v.target,x={x:v.clientX,y:v.clientY},S=(u==null?void 0:u.contains(_))||(f==null?void 0:f.contains(_)),E=!vG(x,o);S?m():E&&(m(),c())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[u,f,o,c,m]),y.jsx(lD,{...e,ref:i})}),[hG,pG]=ew(Sm,{isInside:!1}),mG=Bz("TooltipContent"),lD=N.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,u=b0(Zf,n),c=tw(n),{onClose:f}=u;return N.useEffect(()=>(document.addEventListener($2,f),()=>document.removeEventListener($2,f)),[f]),N.useEffect(()=>{if(u.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(u.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[u.trigger,f]),y.jsx(vh,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:y.jsxs(Jv,{"data-state":u.stateAttribute,...c,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(mG,{children:r}),y.jsx(hG,{scope:n,isInside:!0,children:y.jsx(oG,{id:u.contentId,role:"tooltip",children:a||r})})]})})});sD.displayName=Zf;var uD="TooltipArrow",cD=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=tw(n);return pG(uD,n).isInside?null:y.jsx(Qv,{...a,...r,ref:t})});cD.displayName=uD;function gG(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function yG(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function bG(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function vG(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function wG(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),_G(t)}function _G(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var xG=rD,SG=aD,EG=iD,CG=oD,kG=sD,AG=cD;function kn({delayDuration:e=0,...t}){return y.jsx(xG,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Nn({...e}){return y.jsx(kn,{children:y.jsx(SG,{"data-slot":"tooltip",...e})})}function In({...e}){return y.jsx(EG,{"data-slot":"tooltip-trigger",...e})}function On({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(CG,{children:y.jsxs(kG,{"data-slot":"tooltip-content",sideOffset:t,className:Mt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(AG,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const ZR={};function TG(e){let t=ZR[e];if(t)return t;t=ZR[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Yf(e,t){typeof t!="string"&&(t=Yf.defaultChars);const n=TG(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const u=parseInt(r.slice(i+4,i+6),16);if((u&192)===128){const c=s<<6&1984|u&63;c<128?a+="":a+=String.fromCharCode(c),i+=3;continue}}if((s&240)===224&&i+6<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((u&192)===128&&(c&192)===128){const f=s<<12&61440|u<<6&4032|c&63;f<2048||f>=55296&&f<=57343?a+="":a+=String.fromCharCode(f),i+=6;continue}}if((s&248)===240&&i+9<o){const u=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),f=parseInt(r.slice(i+10,i+12),16);if((u&192)===128&&(c&192)===128&&(f&192)===128){let h=s<<18&1835008|u<<12&258048|c<<6&4032|f&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Yf.defaultChars=";/?:@&=+$,#";Yf.componentChars="";const YR={};function RG(e){let t=YR[e];if(t)return t;t=YR[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function v0(e,t,n){typeof t!="string"&&(n=t,t=v0.defaultChars),typeof n>"u"&&(n=!0);const r=RG(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const u=e.charCodeAt(i+1);if(u>=56320&&u<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}v0.defaultChars=";/?:@&=+$,-_.!~*'()#";v0.componentChars="-_.!~*'()";function mC(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Ib(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const NG=/^([a-z0-9.+-]+:)/i,IG=/:[0-9]*$/,OG=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,DG=["<",">",'"',"`"," ","\r",`
`,"	"],jG=["{","}","|","\\","^","`"].concat(DG),MG=["'"].concat(jG),XR=["%","/","?",";","#"].concat(MG),JR=["/","?","#"],PG=255,QR=/^[+a-z0-9A-Z_-]{0,63}$/,FG=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,eN={javascript:!0,"javascript:":!0},tN={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function gC(e,t){if(e&&e instanceof Ib)return e;const n=new Ib;return n.parse(e,t),n}Ib.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=OG.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=NG.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&eN[o])&&(i=i.substr(2),this.slashes=!0)),!eN[o]&&(a||o&&!tN[o])){let c=-1;for(let w=0;w<JR.length;w++)r=i.indexOf(JR[w]),r!==-1&&(c===-1||r<c)&&(c=r);let f,h;c===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",c),h!==-1&&(f=i.slice(0,h),i=i.slice(h+1),this.auth=f),c=-1;for(let w=0;w<XR.length;w++)r=i.indexOf(XR[w]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const m=i.slice(0,c);i=i.slice(c),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const w=this.hostname.split(/\./);for(let v=0,_=w.length;v<_;v++){const x=w[v];if(x&&!x.match(QR)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(QR)){const E=w.slice(0,v),C=w.slice(v+1),A=x.match(FG);A&&(E.push(A[1]),C.unshift(A[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>PG&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const u=i.indexOf("?");return u!==-1&&(this.search=i.substr(u),i=i.slice(0,u)),i&&(this.pathname=i),tN[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Ib.prototype.parseHost=function(e){let t=IG.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const LG=Object.freeze(Object.defineProperty({__proto__:null,decode:Yf,encode:v0,format:mC,parse:gC},Symbol.toStringTag,{value:"Module"})),dD=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,fD=/[\0-\x1F\x7F-\x9F]/,$G=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,yC=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,hD=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,pD=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,BG=Object.freeze(Object.defineProperty({__proto__:null,Any:dD,Cc:fD,Cf:$G,P:yC,S:hD,Z:pD},Symbol.toStringTag,{value:"Module"})),zG=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),UG=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var yx;const qG=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),HG=(yx=String.fromCodePoint)!==null&&yx!==void 0?yx:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function VG(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=qG.get(e))!==null&&t!==void 0?t:e}var Ca;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Ca||(Ca={}));const GG=32;var ju;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(ju||(ju={}));function z2(e){return e>=Ca.ZERO&&e<=Ca.NINE}function WG(e){return e>=Ca.UPPER_A&&e<=Ca.UPPER_F||e>=Ca.LOWER_A&&e<=Ca.LOWER_F}function KG(e){return e>=Ca.UPPER_A&&e<=Ca.UPPER_Z||e>=Ca.LOWER_A&&e<=Ca.LOWER_Z||z2(e)}function ZG(e){return e===Ca.EQUALS||KG(e)}var _a;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(_a||(_a={}));var Du;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Du||(Du={}));class YG{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=_a.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Du.Strict}startEntity(t){this.decodeMode=t,this.state=_a.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case _a.EntityStart:return t.charCodeAt(n)===Ca.NUM?(this.state=_a.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=_a.NamedEntity,this.stateNamedEntity(t,n));case _a.NumericStart:return this.stateNumericStart(t,n);case _a.NumericDecimal:return this.stateNumericDecimal(t,n);case _a.NumericHex:return this.stateNumericHex(t,n);case _a.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|GG)===Ca.LOWER_X?(this.state=_a.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=_a.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(z2(a)||WG(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(z2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Ca.SEMI)this.consumed+=1;else if(this.decodeMode===Du.Strict)return 0;return this.emitCodePoint(VG(this.result),this.consumed),this.errors&&(t!==Ca.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&ju.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=XG(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===Du.Attribute&&(i===0||ZG(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&ju.VALUE_LENGTH)>>14,i!==0){if(o===Ca.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Du.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&ju.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~ju.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case _a.NamedEntity:return this.result!==0&&(this.decodeMode!==Du.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case _a.NumericDecimal:return this.emitNumericEntity(0,2);case _a.NumericHex:return this.emitNumericEntity(0,3);case _a.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case _a.EntityStart:return 0}}}function mD(e){let t="";const n=new YG(e,r=>t+=HG(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const c=n.write(a,s+1);if(c<0){o=s+n.end();break}o=s+c,s=c===0?o+1:o}const u=t+a.slice(o);return t="",u}}function XG(e,t,n,r){const a=(t&ju.BRANCH_LENGTH)>>7,i=t&ju.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const u=r-i;return u<0||u>=a?-1:e[n+u]-1}let o=n,s=o+a-1;for(;o<=s;){const u=o+s>>>1,c=e[u];if(c<r)o=u+1;else if(c>r)s=u-1;else return e[u+a]}return-1}const JG=mD(zG);mD(UG);function gD(e,t=Du.Legacy){return JG(e,t)}function QG(e){return Object.prototype.toString.call(e)}function bC(e){return QG(e)==="[object String]"}const eW=Object.prototype.hasOwnProperty;function tW(e,t){return eW.call(e,t)}function nw(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function yD(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function vC(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Ob(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const bD=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,nW=/&([a-z#][a-z0-9]{1,31});/gi,rW=new RegExp(bD.source+"|"+nW.source,"gi"),aW=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function iW(e,t){if(t.charCodeAt(0)===35&&aW.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return vC(r)?Ob(r):e}const n=gD(e);return n!==e?n:e}function oW(e){return e.indexOf("\\")<0?e:e.replace(bD,"$1")}function Xf(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(rW,function(t,n,r){return n||iW(t,r)})}const sW=/[&<>"]/,lW=/[&<>"]/g,uW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function cW(e){return uW[e]}function Vu(e){return sW.test(e)?e.replace(lW,cW):e}const dW=/[.?*+^$[\]\\(){}|-]/g;function fW(e){return e.replace(dW,"\\$&")}function Ar(e){switch(e){case 9:case 32:return!0}return!1}function Em(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function Cm(e){return yC.test(e)||hD.test(e)}function km(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function rw(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const hW={mdurl:LG,ucmicro:BG},pW=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:yD,assign:nw,escapeHtml:Vu,escapeRE:fW,fromCodePoint:Ob,has:tW,isMdAsciiPunct:km,isPunctChar:Cm,isSpace:Ar,isString:bC,isValidEntityCode:vC,isWhiteSpace:Em,lib:hW,normalizeReference:rw,unescapeAll:Xf,unescapeMd:oW},Symbol.toStringTag,{value:"Module"}));function mW(e,t,n){let r,a,i,o;const s=e.posMax,u=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=u,-1}}let c=-1;return a&&(c=e.pos),e.pos=u,c}function gW(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Xf(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=Xf(e.slice(t,a)),i.pos=a,i.ok=!0),i}function yW(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=Xf(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=Xf(e.slice(t,i)),o}const bW=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:gW,parseLinkLabel:mW,parseLinkTitle:yW},Symbol.toStringTag,{value:"Module"})),qs={};qs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Vu(i.content)+"</code>"};qs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Vu(e[t].content)+`</code></pre>
`};qs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?Xf(i.info).trim():"";let s="",u="";if(o){const f=o.split(/(\s+)/g);s=f[0],u=f.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,s,u)||Vu(i.content):c=Vu(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const f=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];f<0?h.push(["class",n.langPrefix+s]):(h[f]=h[f].slice(),h[f][1]+=" "+n.langPrefix+s);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${c}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${c}</code></pre>
`};qs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};qs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};qs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};qs.text=function(e,t){return Vu(e[t].content)};qs.html_block=function(e,t){return e[t].content};qs.html_inline=function(e,t){return e[t].content};function Sh(){this.rules=nw({},qs)}Sh.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Vu(t.attrs[n][0])+'="'+Vu(t.attrs[n][1])+'"';return a};Sh.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};Sh.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};Sh.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};Sh.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Ai(){this.__rules__=[],this.__cache__=null}Ai.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Ai.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Ai.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Ai.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ai.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Ai.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Ai.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Ai.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Ai.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Ai.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Qo(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Qo.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};Qo.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Qo.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};Qo.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Qo.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function vD(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}vD.prototype.Token=Qo;const vW=/\r\n?|\n/g,wW=/\0/g;function _W(e){let t;t=e.src.replace(vW,`
`),t=t.replace(wW,""),e.src=t}function xW(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function SW(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function EW(e){return/^<a[>\s]/i.test(e)}function CW(e){return/^<\/a\s*>/i.test(e)}function kW(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(EW(s.content)&&i>0&&i--,CW(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const u=s.content;let c=e.md.linkify.match(u);const f=[];let h=s.level,m=0;c.length>0&&c[0].index===0&&o>0&&a[o-1].type==="text_special"&&(c=c.slice(1));for(let g=0;g<c.length;g++){const w=c[g].url,v=e.md.normalizeLink(w);if(!e.md.validateLink(v))continue;let _=c[g].text;c[g].schema?c[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=c[g].index;if(x>m){const A=new e.Token("text","",0);A.content=u.slice(m,x),A.level=h,f.push(A)}const S=new e.Token("link_open","a",1);S.attrs=[["href",v]],S.level=h++,S.markup="linkify",S.info="auto",f.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,f.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",f.push(C),m=c[g].lastIndex}if(m<u.length){const g=new e.Token("text","",0);g.content=u.slice(m),g.level=h,f.push(g)}t[n].children=a=yD(a,o,f)}}}}const wD=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,AW=/\((c|tm|r)\)/i,TW=/\((c|tm|r)\)/ig,RW={c:"",r:"",tm:""};function NW(e,t){return RW[t.toLowerCase()]}function IW(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(TW,NW)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function OW(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&wD.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function DW(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(AW.test(e.tokens[t].content)&&IW(e.tokens[t].children),wD.test(e.tokens[t].content)&&OW(e.tokens[t].children))}const jW=/['"]/,nN=/['"]/g,rN="";function Dy(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function MW(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,u=0,c=s.length;e:for(;u<c;){nN.lastIndex=u;const f=nN.exec(s);if(!f)break;let h=!0,m=!0;u=f.index+1;const g=f[0]==="'";let w=32;if(f.index-1>=0)w=s.charCodeAt(f.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){w=e[n].content.charCodeAt(e[n].content.length-1);break}let v=32;if(u<c)v=s.charCodeAt(u);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){v=e[n].content.charCodeAt(0);break}const _=km(w)||Cm(String.fromCharCode(w)),x=km(v)||Cm(String.fromCharCode(v)),S=Em(w),E=Em(v);if(E?h=!1:x&&(S||_||(h=!1)),S?m=!1:_&&(E||x||(m=!1)),v===34&&f[0]==='"'&&w>=48&&w<=57&&(m=h=!1),h&&m&&(h=_,m=x),!h&&!m){g&&(i.content=Dy(i.content,f.index,rN));continue}if(m)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let A,O;g?(A=t.md.options.quotes[2],O=t.md.options.quotes[3]):(A=t.md.options.quotes[0],O=t.md.options.quotes[1]),i.content=Dy(i.content,f.index,O),e[C.token].content=Dy(e[C.token].content,C.pos,A),u+=O.length-1,C.token===a&&(u+=A.length-1),s=i.content,c=s.length,r.length=n;continue e}}h?r.push({token:a,pos:f.index,single:g,level:o}):m&&g&&(i.content=Dy(i.content,f.index,rN))}}}function PW(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!jW.test(e.tokens[t].content)||MW(e.tokens[t].children,e)}function FW(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const bx=[["normalize",_W],["block",xW],["inline",SW],["linkify",kW],["replacements",DW],["smartquotes",PW],["text_join",FW]];function wC(){this.ruler=new Ai;for(let e=0;e<bx.length;e++)this.ruler.push(bx[e][0],bx[e][1])}wC.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};wC.prototype.State=vD;function Hs(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,u=0,c=a.length,f=!1;o<c;o++){const h=a.charCodeAt(o);if(!f)if(Ar(h)){s++,h===9?u+=4-u%4:u++;continue}else f=!0;(h===10||o===c-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(u),this.bsCount.push(0),f=!1,s=0,u=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Hs.prototype.push=function(e,t,n){const r=new Qo(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Hs.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Hs.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Hs.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Ar(r))break}return t};Hs.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Ar(this.src.charCodeAt(--t)))return t+1;return t};Hs.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Hs.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Hs.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let u=0;const c=this.bMarks[s];let f=c,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];f<h&&u<r;){const m=this.src.charCodeAt(f);if(Ar(m))m===9?u+=4-(u+this.bsCount[s])%4:u++;else if(f-c<this.tShift[s])u++;else break;f++}u>r?i[o]=new Array(u-r+1).join(" ")+this.src.slice(f,h):i[o]=this.src.slice(f,h)}return i.join("")};Hs.prototype.Token=Qo;const LW=65536;function vx(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function aN(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function $W(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!Ar(s)||o===45&&Ar(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!Ar(C))return!1;i++}let u=vx(e,t+1),c=u.split("|");const f=[];for(let C=0;C<c.length;C++){const A=c[C].trim();if(!A){if(C===0||C===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(A))return!1;A.charCodeAt(A.length-1)===58?f.push(A.charCodeAt(0)===58?"center":"right"):A.charCodeAt(0)===58?f.push("left"):f.push("")}if(u=vx(e,t).trim(),u.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=aN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const h=c.length;if(h===0||h!==f.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),w=e.push("table_open","table",1),v=[t,0];w.map=v;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<c.length;C++){const A=e.push("th_open","th",1);f[C]&&(A.attrs=[["style","text-align:"+f[C]]]);const O=e.push("inline","",0);O.content=c[C].trim(),O.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let O=0,I=g.length;O<I;O++)if(g[O](e,a,n,!0)){C=!0;break}if(C||(u=vx(e,a).trim(),!u)||e.sCount[a]-e.blkIndent>=4||(c=aN(u),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),E+=h-c.length,E>LW))break;if(a===t+2){const O=e.push("tbody_open","tbody",1);O.map=S=[t+2,0]}const A=e.push("tr_open","tr",1);A.map=[a,a+1];for(let O=0;O<h;O++){const I=e.push("td_open","td",1);f[O]&&(I.attrs=[["style","text-align:"+f[O]]]);const D=e.push("inline","",0);D.content=c[O]?c[O].trim():"",D.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),v[1]=a,e.parentType=m,e.line=a,!0}function BW(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function zW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let u=a-s;if(u<3)return!1;const c=e.src.slice(s,a),f=e.src.slice(a,i);if(o===96&&f.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<u)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}u=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=f,g.content=e.getLines(t+1,h,u,!0),g.markup=c,g.map=[t,e.line],!0}function UW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],u=[],c=[],f=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,w;for(w=t;w<n;w++){const E=e.sCount[w]<e.blkIndent;if(a=e.bMarks[w]+e.tShift[w],i=e.eMarks[w],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let A=e.sCount[w]+1,O,I;e.src.charCodeAt(a)===32?(a++,A++,I=!1,O=!0):e.src.charCodeAt(a)===9?(O=!0,(e.bsCount[w]+A)%4===3?(a++,A++,I=!1):I=!0):O=!1;let D=A;for(s.push(e.bMarks[w]),e.bMarks[w]=a;a<i;){const B=e.src.charCodeAt(a);if(Ar(B))B===9?D+=4-(D+e.bsCount[w]+(I?1:0))%4:D++;else break;a++}g=a>=i,u.push(e.bsCount[w]),e.bsCount[w]=e.sCount[w]+1+(O?1:0),c.push(e.sCount[w]),e.sCount[w]=D-A,f.push(e.tShift[w]),e.tShift[w]=a-e.bMarks[w];continue}if(g)break;let C=!1;for(let A=0,O=h.length;A<O;A++)if(h[A](e,w,n,!0)){C=!0;break}if(C){e.lineMax=w,e.blkIndent!==0&&(s.push(e.bMarks[w]),u.push(e.bsCount[w]),f.push(e.tShift[w]),c.push(e.sCount[w]),e.sCount[w]-=e.blkIndent);break}s.push(e.bMarks[w]),u.push(e.bsCount[w]),f.push(e.tShift[w]),c.push(e.sCount[w]),e.sCount[w]=-1}const v=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,w);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=m,x[1]=e.line;for(let E=0;E<f.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=f[E],e.sCount[E+t]=c[E],e.bsCount[E+t]=u[E];return e.blkIndent=v,!0}function qW(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const c=e.src.charCodeAt(i++);if(c!==o&&!Ar(c))return!1;c===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const u=e.push("hr","hr",0);return u.map=[t,e.line],u.markup=Array(s+1).join(String.fromCharCode(o)),!0}function iN(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Ar(i))return-1}return r}function oN(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Ar(i))?-1:a}function HW(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function VW(e,t,n,r){let a,i,o,s,u=t,c=!0;if(e.sCount[u]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[u]-e.listIndent>=4&&e.sCount[u]<e.blkIndent)return!1;let f=!1;r&&e.parentType==="paragraph"&&e.sCount[u]>=e.blkIndent&&(f=!0);let h,m,g;if((g=oN(e,u))>=0){if(h=!0,o=e.bMarks[u]+e.tShift[u],m=Number(e.src.slice(o,g-1)),f&&m!==1)return!1}else if((g=iN(e,u))>=0)h=!1;else return!1;if(f&&e.skipSpaces(g)>=e.eMarks[u])return!1;if(r)return!0;const w=e.src.charCodeAt(g-1),v=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),m!==1&&(s.attrs=[["start",m]])):s=e.push("bullet_list_open","ul",1);const _=[u,0];s.map=_,s.markup=String.fromCharCode(w);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";u<n;){i=g,a=e.eMarks[u];const C=e.sCount[u]+g-(e.bMarks[u]+e.tShift[u]);let A=C;for(;i<a;){const me=e.src.charCodeAt(i);if(me===9)A+=4-(A+e.bsCount[u])%4;else if(me===32)A++;else break;i++}const O=i;let I;O>=a?I=1:I=A-C,I>4&&(I=1);const D=C+I;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(w);const B=[u,0];s.map=B,h&&(s.info=e.src.slice(o,g-1));const W=e.tight,Q=e.tShift[u],M=e.sCount[u],K=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=D,e.tight=!0,e.tShift[u]=O-e.bMarks[u],e.sCount[u]=A,O>=a&&e.isEmpty(u+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,u,n,!0),(!e.tight||x)&&(c=!1),x=e.line-u>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=K,e.tShift[u]=Q,e.sCount[u]=M,e.tight=W,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(w),u=e.line,B[1]=u,u>=n||e.sCount[u]<e.blkIndent||e.sCount[u]-e.blkIndent>=4)break;let U=!1;for(let me=0,se=S.length;me<se;me++)if(S[me](e,u,n,!0)){U=!0;break}if(U)break;if(h){if(g=oN(e,u),g<0)break;o=e.bMarks[u]+e.tShift[u]}else if(g=iN(e,u),g<0)break;if(w!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(w),_[1]=u,e.line=u,e.parentType=E,c&&HW(e,v),!0}function GW(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const I=e.md.block.ruler.getRules("reference"),D=e.parentType;e.parentType="reference";let B=!1;for(let W=0,Q=I.length;W<Q;W++)if(I[W](e,S,E,!0)){B=!0;break}if(e.parentType=D,B)return null}const A=e.bMarks[S]+e.tShift[S],O=e.eMarks[S];return e.src.slice(A,O+1)}let u=e.src.slice(a,i+1);i=u.length;let c=-1;for(a=1;a<i;a++){const S=u.charCodeAt(a);if(S===91)return!1;if(S===93){c=a;break}else if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(S===92&&(a++,a<i&&u.charCodeAt(a)===10)){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}}if(c<0||u.charCodeAt(c+1)!==58)return!1;for(a=c+2;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Ar(S))break}const f=e.md.helpers.parseLinkDestination(u,a,i);if(!f.ok)return!1;const h=e.md.normalizeLink(f.str);if(!e.md.validateLink(h))return!1;a=f.pos;const m=a,g=o,w=a;for(;a<i;a++){const S=u.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(u+=E,i=u.length,o++)}else if(!Ar(S))break}let v=e.md.helpers.parseLinkTitle(u,a,i);for(;v.can_continue;){const S=s(o);if(S===null)break;u+=S,a=i,i=u.length,o++,v=e.md.helpers.parseLinkTitle(u,a,i,v)}let _;for(a<i&&w!==a&&v.ok?(_=v.str,a=v.pos):(_="",a=m,o=g);a<i;){const S=u.charCodeAt(a);if(!Ar(S))break;a++}if(a<i&&u.charCodeAt(a)!==10&&_)for(_="",a=m,o=g;a<i;){const S=u.charCodeAt(a);if(!Ar(S))break;a++}if(a<i&&u.charCodeAt(a)!==10)return!1;const x=rw(u.slice(1,c));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const WW=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],KW="[a-zA-Z_:][a-zA-Z0-9:._-]*",ZW="[^\"'=<>`\\x00-\\x20]+",YW="'[^']*'",XW='"[^"]*"',JW="(?:"+ZW+"|"+YW+"|"+XW+")",QW="(?:\\s+"+KW+"(?:\\s*=\\s*"+JW+")?)",_D="<[A-Za-z][A-Za-z0-9\\-]*"+QW+"*\\s*\\/?>",xD="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",eK="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",tK="<[?][\\s\\S]*?[?]>",nK="<![A-Za-z][^>]*>",rK="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",aK=new RegExp("^(?:"+_D+"|"+xD+"|"+eK+"|"+tK+"|"+nK+"|"+rK+")"),iK=new RegExp("^(?:"+_D+"|"+xD+")"),xf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+WW.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(iK.source+"\\s*$"),/^$/,!1]];function oK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<xf.length&&!xf[s][0].test(o);s++);if(s===xf.length)return!1;if(r)return xf[s][2];let u=t+1;if(!xf[s][1].test(o)){for(;u<n&&!(e.sCount[u]<e.blkIndent);u++)if(a=e.bMarks[u]+e.tShift[u],i=e.eMarks[u],o=e.src.slice(a,i),xf[s][1].test(o)){o.length!==0&&u++;break}}e.line=u;const c=e.push("html_block","",0);return c.map=[t,u],c.content=e.getLines(t,u,e.blkIndent,!0),!0}function sK(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!Ar(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const u=e.skipCharsBack(i,35,a);u>a&&Ar(e.src.charCodeAt(u-1))&&(i=u),e.line=t+1;const c=e.push("heading_open","h"+String(s),1);c.markup="########".slice(0,s),c.map=[t,e.line];const f=e.push("inline","",0);f.content=e.src.slice(a,i).trim(),f.map=[t,e.line],f.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function lK(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const w=e.eMarks[s];if(g<w&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=w))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let m=!1;for(let g=0,w=r.length;g<w;g++)if(r[g](e,s,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const u=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const f=e.push("inline","",0);f.content=u,f.map=[t,e.line-1],f.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function uK(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const u=e.push("inline","",0);return u.content=o,u.map=[t,e.line],u.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const jy=[["table",$W,["paragraph","reference"]],["code",BW],["fence",zW,["paragraph","reference","blockquote","list"]],["blockquote",UW,["paragraph","reference","blockquote","list"]],["hr",qW,["paragraph","reference","blockquote","list"]],["list",VW,["paragraph","reference","blockquote"]],["reference",GW],["html_block",oK,["paragraph","reference","blockquote"]],["heading",sK,["paragraph","reference","blockquote"]],["lheading",lK],["paragraph",uK]];function aw(){this.ruler=new Ai;for(let e=0;e<jy.length;e++)this.ruler.push(jy[e][0],jy[e][1],{alt:(jy[e][2]||[]).slice()})}aw.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const u=e.line;let c=!1;for(let f=0;f<a;f++)if(c=r[f](e,o,n,!1),c){if(u>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};aw.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};aw.prototype.State=Hs;function w0(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}w0.prototype.pushPending=function(){const e=new Qo("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};w0.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Qo(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};w0.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,u=km(a)||Cm(String.fromCharCode(a)),c=km(s)||Cm(String.fromCharCode(s)),f=Em(a),h=Em(s),m=!h&&(!c||f||u),g=!f&&(!u||h||c);return{can_open:m&&(t||!g||u),can_close:g&&(t||!m||c),length:o}};w0.prototype.Token=Qo;function cK(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function dK(e,t){let n=e.pos;for(;n<e.posMax&&!cK(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const fK=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function hK(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(fK);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const u=e.md.normalizeLink(s);if(!e.md.validateLink(u))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const c=e.push("link_open","a",1);c.attrs=[["href",u]],c.markup="linkify",c.info="auto";const f=e.push("text","",0);f.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function pK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Ar(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const _C=[];for(let e=0;e<256;e++)_C.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){_C[e.charCodeAt(0)]=1});function mK(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Ar(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&_C[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function gK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let u=n,c;for(;(c=e.src.indexOf("`",u))!==-1;){for(u=c+1;u<i&&e.src.charCodeAt(u)===96;)u++;const f=u-c;if(f===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=u,!0}e.backticks[f]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function yK(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let u=0;u<i;u+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function sN(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function bK(e){const t=e.tokens_meta,n=e.tokens_meta.length;sN(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&sN(e,t[r].delimiters)}const SD={tokenize:yK,postProcess:bK};function vK(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function lN(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),u=e.tokens[a.token];u.type=o?"strong_open":"em_open",u.tag=o?"strong":"em",u.nesting=1,u.markup=o?s+s:s,u.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?s+s:s,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function wK(e){const t=e.tokens_meta,n=e.tokens_meta.length;lN(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&lN(e,t[r].delimiters)}const ED={tokenize:vK,postProcess:wK};function _K(e,t){let n,r,a,i,o="",s="",u=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const f=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let w=g+1;if(w<h&&e.src.charCodeAt(w)===40){for(c=!1,w++;w<h&&(n=e.src.charCodeAt(w),!(!Ar(n)&&n!==10));w++);if(w>=h)return!1;if(u=w,a=e.md.helpers.parseLinkDestination(e.src,w,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?w=a.pos:o="",u=w;w<h&&(n=e.src.charCodeAt(w),!(!Ar(n)&&n!==10));w++);if(a=e.md.helpers.parseLinkTitle(e.src,w,e.posMax),w<h&&u!==w&&a.ok)for(s=a.str,w=a.pos;w<h&&(n=e.src.charCodeAt(w),!(!Ar(n)&&n!==10));w++);}(w>=h||e.src.charCodeAt(w)!==41)&&(c=!0),w++}if(c){if(typeof e.env.references>"u")return!1;if(w<h&&e.src.charCodeAt(w)===91?(u=w+1,w=e.md.helpers.parseLinkLabel(e,w),w>=0?r=e.src.slice(u,w++):w=g+1):w=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[rw(r)],!i)return e.pos=f,!1;o=i.href,s=i.title}if(!t){e.pos=m,e.posMax=g;const v=e.push("link_open","a",1),_=[["href",o]];v.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=w,e.posMax=h,!0}function xK(e,t){let n,r,a,i,o,s,u,c,f="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,w=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(w<0)return!1;if(i=w+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Ar(n)&&n!==10));i++);if(i>=m)return!1;for(c=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(f=e.md.normalizeLink(s.str),e.md.validateLink(f)?i=s.pos:f=""),c=i;i<m&&(n=e.src.charCodeAt(i),!(!Ar(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&c!==i&&s.ok)for(u=s.str,i=s.pos;i<m&&(n=e.src.charCodeAt(i),!(!Ar(n)&&n!==10));i++);else u="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(c,i++):i=w+1):i=w+1,a||(a=e.src.slice(g,w)),o=e.env.references[rw(a)],!o)return e.pos=h,!1;f=o.href,u=o.title}if(!t){r=e.src.slice(g,w);const v=[];e.md.inline.parse(r,e.md,e.env,v);const _=e.push("image","img",0),x=[["src",f],["alt",""]];_.attrs=x,_.children=v,_.content=r,u&&x.push(["title",u])}return e.pos=i,e.posMax=m,!0}const SK=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,EK=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function CK(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(EK.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(SK.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const u=e.push("text","",0);u.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function kK(e){return/^<a[>\s]/i.test(e)}function AK(e){return/^<\/a\s*>/i.test(e)}function TK(e){const t=e|32;return t>=97&&t<=122}function RK(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!TK(a))return!1;const i=e.src.slice(r).match(aK);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],kK(o.content)&&e.linkLevel++,AK(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const NK=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,IK=/^&([a-z][a-z0-9]{1,31});/i;function OK(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(NK);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=vC(o)?Ob(o):Ob(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(IK);if(i){const o=gD(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function uN(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const u=t[s.marker][(s.open?3:0)+s.length%3];let c=r-i[r]-1,f=c;for(;c>u;c-=i[c]+1){const h=e[c];if(h.marker===s.marker&&h.open&&h.end<0){let m=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(m=!0),!m){const g=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+g,i[c]=g,s.open=!1,h.end=o,h.close=!1,f=-1,a=-2;break}}}f!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=f)}}function DK(e){const t=e.tokens_meta,n=e.tokens_meta.length;uN(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&uN(t[r].delimiters)}function jK(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const wx=[["text",dK],["linkify",hK],["newline",pK],["escape",mK],["backticks",gK],["strikethrough",SD.tokenize],["emphasis",ED.tokenize],["link",_K],["image",xK],["autolink",CK],["html_inline",RK],["entity",OK]],_x=[["balance_pairs",DK],["strikethrough",SD.postProcess],["emphasis",ED.postProcess],["fragments_join",jK]];function _0(){this.ruler=new Ai;for(let e=0;e<wx.length;e++)this.ruler.push(wx[e][0],wx[e][1]);this.ruler2=new Ai;for(let e=0;e<_x.length;e++)this.ruler2.push(_x[e][0],_x[e][1])}_0.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};_0.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};_0.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};_0.prototype.State=w0;function MK(e){const t={};e=e||{},t.src_Any=dD.source,t.src_Cc=fD.source,t.src_Z=pD.source,t.src_P=yC.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function U2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function iw(e){return Object.prototype.toString.call(e)}function PK(e){return iw(e)==="[object String]"}function FK(e){return iw(e)==="[object Object]"}function LK(e){return iw(e)==="[object RegExp]"}function cN(e){return iw(e)==="[object Function]"}function $K(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const CD={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function BK(e){return Object.keys(e||{}).reduce(function(t,n){return t||CD.hasOwnProperty(n)},!1)}const zK={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},UK="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",qK="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function HK(e){e.__index__=-1,e.__text_cache__=""}function VK(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function dN(){return function(e,t){t.normalize(e)}}function Db(e){const t=e.re=MK(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(UK),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,u){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+u)}Object.keys(e.__schemas__).forEach(function(s){const u=e.__schemas__[s];if(u===null)return;const c={validate:null,link:null};if(e.__compiled__[s]=c,FK(u)){LK(u.validate)?c.validate=VK(u.validate):cN(u.validate)?c.validate=u.validate:i(s,u),cN(u.normalize)?c.normalize=u.normalize:u.normalize?i(s,u):c.normalize=dN();return}if(PK(u)){a.push(s);return}i(s,u)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:dN()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map($K).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),HK(e)}function GK(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function q2(e,t){const n=new GK(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Zi(e,t){if(!(this instanceof Zi))return new Zi(e,t);t||BK(e)&&(t=e,e={}),this.__opts__=U2({},CD,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=U2({},zK,e),this.__compiled__={},this.__tlds__=qK,this.__tlds_replaced__=!1,this.re={},Db(this)}Zi.prototype.add=function(t,n){return this.__schemas__[t]=n,Db(this),this};Zi.prototype.set=function(t){return this.__opts__=U2(this.__opts__,t),this};Zi.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,u,c,f;if(this.re.schema_test.test(t)){for(u=this.re.schema_search,u.lastIndex=0;(n=u.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],u.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(f=t.indexOf("@"),f>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};Zi.prototype.pretest=function(t){return this.re.pretest.test(t)};Zi.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Zi.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(q2(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(q2(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Zi.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,q2(this,0)):null};Zi.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Db(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Db(this),this)};Zi.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Zi.prototype.onCompile=function(){};const zf=2147483647,Os=36,xC=1,Am=26,WK=38,KK=700,kD=72,AD=128,TD="-",ZK=/^xn--/,YK=/[^\0-\x7F]/,XK=/[\x2E\u3002\uFF0E\uFF61]/g,JK={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},xx=Os-xC,Ds=Math.floor,Sx=String.fromCharCode;function Iu(e){throw new RangeError(JK[e])}function QK(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function RD(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(XK,".");const a=e.split("."),i=QK(a,t).join(".");return r+i}function ND(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const eZ=e=>String.fromCodePoint(...e),tZ=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Os},fN=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},ID=function(e,t,n){let r=0;for(e=n?Ds(e/KK):e>>1,e+=Ds(e/t);e>xx*Am>>1;r+=Os)e=Ds(e/xx);return Ds(r+(xx+1)*e/(e+WK))},OD=function(e){const t=[],n=e.length;let r=0,a=AD,i=kD,o=e.lastIndexOf(TD);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&Iu("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const u=r;for(let f=1,h=Os;;h+=Os){s>=n&&Iu("invalid-input");const m=tZ(e.charCodeAt(s++));m>=Os&&Iu("invalid-input"),m>Ds((zf-r)/f)&&Iu("overflow"),r+=m*f;const g=h<=i?xC:h>=i+Am?Am:h-i;if(m<g)break;const w=Os-g;f>Ds(zf/w)&&Iu("overflow"),f*=w}const c=t.length+1;i=ID(r-u,c,u==0),Ds(r/c)>zf-a&&Iu("overflow"),a+=Ds(r/c),r%=c,t.splice(r++,0,a)}return String.fromCodePoint(...t)},DD=function(e){const t=[];e=ND(e);const n=e.length;let r=AD,a=0,i=kD;for(const u of e)u<128&&t.push(Sx(u));const o=t.length;let s=o;for(o&&t.push(TD);s<n;){let u=zf;for(const f of e)f>=r&&f<u&&(u=f);const c=s+1;u-r>Ds((zf-a)/c)&&Iu("overflow"),a+=(u-r)*c,r=u;for(const f of e)if(f<r&&++a>zf&&Iu("overflow"),f===r){let h=a;for(let m=Os;;m+=Os){const g=m<=i?xC:m>=i+Am?Am:m-i;if(h<g)break;const w=h-g,v=Os-g;t.push(Sx(fN(g+w%v,0))),h=Ds(w/v)}t.push(Sx(fN(h,0))),i=ID(a,c,s===o),a=0,++s}++a,++r}return t.join("")},nZ=function(e){return RD(e,function(t){return ZK.test(t)?OD(t.slice(4).toLowerCase()):t})},rZ=function(e){return RD(e,function(t){return YK.test(t)?"xn--"+DD(t):t})},jD={version:"2.3.1",ucs2:{decode:ND,encode:eZ},decode:OD,encode:DD,toASCII:rZ,toUnicode:nZ},aZ={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},iZ={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},oZ={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},sZ={default:aZ,zero:iZ,commonmark:oZ},lZ=/^(vbscript|javascript|file|data):/,uZ=/^data:image\/(gif|png|jpeg|webp);/;function cZ(e){const t=e.trim().toLowerCase();return lZ.test(t)?uZ.test(t):!0}const MD=["http:","https:","mailto:"];function dZ(e){const t=gC(e,!0);if(t.hostname&&(!t.protocol||MD.indexOf(t.protocol)>=0))try{t.hostname=jD.toASCII(t.hostname)}catch{}return v0(mC(t))}function fZ(e){const t=gC(e,!0);if(t.hostname&&(!t.protocol||MD.indexOf(t.protocol)>=0))try{t.hostname=jD.toUnicode(t.hostname)}catch{}return Yf(mC(t),Yf.defaultChars+"%")}function wo(e,t){if(!(this instanceof wo))return new wo(e,t);t||bC(e)||(t=e||{},e="default"),this.inline=new _0,this.block=new aw,this.core=new wC,this.renderer=new Sh,this.linkify=new Zi,this.validateLink=cZ,this.normalizeLink=dZ,this.normalizeLinkText=fZ,this.utils=pW,this.helpers=nw({},bW),this.options={},this.configure(e),t&&this.set(t)}wo.prototype.set=function(e){return nw(this.options,e),this};wo.prototype.configure=function(e){const t=this;if(bC(e)){const n=e;if(e=sZ[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};wo.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};wo.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};wo.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};wo.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};wo.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};wo.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};wo.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const Ex=new wo({html:!1,linkify:!0,breaks:!0});function PD(e){return N.useMemo(()=>{var n;if(!e)return[];try{const r=Ex.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const u=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:u,code:s.content}),o++}else{const u=[];for(;o<r.length&&r[o].type!=="fence";)u.push(r[o]),o++;u.length>0&&(i+=Ex.renderer.render(u,Ex.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}var Cx={exports:{}},hN;function hZ(){return hN||(hN=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof u?new u(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var A,O;switch(s.util.type(E)){case"Object":if(O=s.util.objId(E),C[O])return C[O];A={},C[O]=A;for(var I in E)E.hasOwnProperty(I)&&(A[I]=S(E[I],C));return A;case"Array":return O=s.util.objId(E),C[O]?C[O]:(A=[],C[O]=A,E.forEach(function(D,B){A[B]=S(D,C)}),A);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(A){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(A.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var A="no-"+E;S;){var O=S.classList;if(O.contains(E))return!0;if(O.contains(A))return!1;S=S.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var C=s.util.clone(s.languages[S]);for(var A in E)C[A]=E[A];return C},insertBefore:function(S,E,C,A){A=A||s.languages;var O=A[S],I={};for(var D in O)if(O.hasOwnProperty(D)){if(D==E)for(var B in C)C.hasOwnProperty(B)&&(I[B]=C[B]);C.hasOwnProperty(D)||(I[D]=O[D])}var W=A[S];return A[S]=I,s.languages.DFS(s.languages,function(Q,M){M===W&&Q!=S&&(this[Q]=I)}),I},DFS:function S(E,C,A,O){O=O||{};var I=s.util.objId;for(var D in E)if(E.hasOwnProperty(D)){C.call(E,D,E[D],A||D);var B=E[D],W=s.util.type(B);W==="Object"&&!O[I(B)]?(O[I(B)]=!0,S(B,C,null,O)):W==="Array"&&!O[I(B)]&&(O[I(B)]=!0,S(B,C,D,O))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var A={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",A),A.elements=Array.prototype.slice.apply(A.container.querySelectorAll(A.selector)),s.hooks.run("before-all-elements-highlight",A);for(var O=0,I;I=A.elements[O++];)s.highlightElement(I,E===!0,A.callback)},highlightElement:function(S,E,C){var A=s.util.getLanguage(S),O=s.languages[A];s.util.setLanguage(S,A);var I=S.parentElement;I&&I.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(I,A);var D=S.textContent,B={element:S,language:A,grammar:O,code:D};function W(M){B.highlightedCode=M,s.hooks.run("before-insert",B),B.element.innerHTML=B.highlightedCode,s.hooks.run("after-highlight",B),s.hooks.run("complete",B),C&&C.call(B.element)}if(s.hooks.run("before-sanity-check",B),I=B.element.parentElement,I&&I.nodeName.toLowerCase()==="pre"&&!I.hasAttribute("tabindex")&&I.setAttribute("tabindex","0"),!B.code){s.hooks.run("complete",B),C&&C.call(B.element);return}if(s.hooks.run("before-highlight",B),!B.grammar){W(s.util.encode(B.code));return}if(E&&r.Worker){var Q=new Worker(s.filename);Q.onmessage=function(M){W(M.data)},Q.postMessage(JSON.stringify({language:B.language,code:B.code,immediateClose:!0}))}else W(s.highlight(B.code,B.grammar,B.language))},highlight:function(S,E,C){var A={code:S,grammar:E,language:C};if(s.hooks.run("before-tokenize",A),!A.grammar)throw new Error('The language "'+A.language+'" has no grammar.');return A.tokens=s.tokenize(A.code,A.grammar),s.hooks.run("after-tokenize",A),u.stringify(s.util.encode(A.tokens),A.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var A in C)E[A]=C[A];delete E.rest}var O=new h;return m(O,O.head,S),f(S,O,E,O.head,0),w(O)},hooks:{all:{},add:function(S,E){var C=s.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=s.hooks.all[S];if(!(!C||!C.length))for(var A=0,O;O=C[A++];)O(E)}},Token:u};r.Prism=s;function u(S,E,C,A){this.type=S,this.content=E,this.alias=C,this.length=(A||"").length|0}u.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var A="";return E.forEach(function(W){A+=S(W,C)}),A}var O={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},I=E.alias;I&&(Array.isArray(I)?Array.prototype.push.apply(O.classes,I):O.classes.push(I)),s.hooks.run("wrap",O);var D="";for(var B in O.attributes)D+=" "+B+'="'+(O.attributes[B]||"").replace(/"/g,"&quot;")+'"';return"<"+O.tag+' class="'+O.classes.join(" ")+'"'+D+">"+O.content+"</"+O.tag+">"};function c(S,E,C,A){S.lastIndex=E;var O=S.exec(C);if(O&&A&&O[1]){var I=O[1].length;O.index+=I,O[0]=O[0].slice(I)}return O}function f(S,E,C,A,O,I){for(var D in C)if(!(!C.hasOwnProperty(D)||!C[D])){var B=C[D];B=Array.isArray(B)?B:[B];for(var W=0;W<B.length;++W){if(I&&I.cause==D+","+W)return;var Q=B[W],M=Q.inside,K=!!Q.lookbehind,U=!!Q.greedy,me=Q.alias;if(U&&!Q.pattern.global){var se=Q.pattern.toString().match(/[imsuy]*$/)[0];Q.pattern=RegExp(Q.pattern.source,se+"g")}for(var ne=Q.pattern||Q,ee=A.next,ae=O;ee!==E.tail&&!(I&&ae>=I.reach);ae+=ee.value.length,ee=ee.next){var G=ee.value;if(E.length>S.length)return;if(!(G instanceof u)){var Y=1,J;if(U){if(J=c(ne,ae,S,K),!J||J.index>=S.length)break;var Me=J.index,re=J.index+J[0].length,we=ae;for(we+=ee.value.length;Me>=we;)ee=ee.next,we+=ee.value.length;if(we-=ee.value.length,ae=we,ee.value instanceof u)continue;for(var ke=ee;ke!==E.tail&&(we<re||typeof ke.value=="string");ke=ke.next)Y++,we+=ke.value.length;Y--,G=S.slice(ae,we),J.index-=ae}else if(J=c(ne,0,G,K),!J)continue;var Me=J.index,Pe=J[0],Re=G.slice(0,Me),Ae=G.slice(Me+Pe.length),He=ae+G.length;I&&He>I.reach&&(I.reach=He);var st=ee.prev;Re&&(st=m(E,st,Re),ae+=Re.length),g(E,st,Y);var Oe=new u(D,M?s.tokenize(Pe,M):Pe,me,Pe);if(ee=m(E,st,Oe),Ae&&m(E,ee,Ae),Y>1){var Te={cause:D+","+W,reach:He};f(S,E,C,ee.prev,ae,Te),I&&Te.reach>I.reach&&(I.reach=Te.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function m(S,E,C){var A=E.next,O={value:C,prev:E,next:A};return E.next=O,A.prev=O,S.length++,O}function g(S,E,C){for(var A=E.next,O=0;O<C&&A!==S.tail;O++)A=A.next;E.next=A,A.prev=E,S.length-=O}function w(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,A=E.code,O=E.immediateClose;r.postMessage(s.highlight(A,s.languages[C],C)),O&&r.close()},!1)),s;var v=s.util.currentScript();v&&(s.filename=v.src,v.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&v&&v.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof ed<"u"&&(ed.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var u={};u[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",u)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(v,_){return" Error "+v+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",u="loading",c="loaded",f="failed",h="pre[data-src]:not(["+s+'="'+c+'"]):not(['+s+'="'+u+'"])';function m(v,_,x){var S=new XMLHttpRequest;S.open("GET",v,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(v){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(v||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(v){v.selector+=", "+h}),n.hooks.add("before-sanity-check",function(v){var _=v.element;if(_.matches(h)){v.code="",_.setAttribute(s,u);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=v.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var A=n.plugins.autoloader;A&&A.loadLanguages(E),m(S,function(O){_.setAttribute(s,c);var I=g(_.getAttribute("data-range"));if(I){var D=O.split(/\r\n?|\n/g),B=I[0],W=I[1]==null?D.length:I[1];B<0&&(B+=D.length),B=Math.max(0,Math.min(B-1,D.length)),W<0&&(W+=D.length),W=Math.max(0,Math.min(W,D.length)),O=D.slice(B,W).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(B+1))}x.textContent=O,n.highlightElement(x)},function(O){_.setAttribute(s,f),x.textContent=O})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var w=!1;n.fileHighlight=function(){w||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),w=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(Cx)),Cx.exports}var pZ=hZ();const mZ=Ja(pZ);var pN={},mN;function gZ(){return mN||(mN=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),pN}gZ();var gN={},yN;function yZ(){return yN||(yN=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),gN}yZ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(h){f!==h&&(e.languages.markdown[f].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,w=m.length;g<w;g++){var v=m[g];if(v.type!=="code"){h(v.content);continue}var _=v.content[1],x=v.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var h="",m=0,g=f.classes.length;m<g;m++){var w=f.classes[m],v=/language-(.+)/.exec(w);if(v){h=v[1];break}}var _=e.languages[h];if(_)f.content=e.highlight(c(f.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},u=String.fromCodePoint||String.fromCharCode;function c(f){var h=f.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var w;return g[1]==="x"?w=parseInt(g.slice(2),16):w=Number(g.slice(1)),u(w)}else{var v=s[g];return v||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,u){u=(u||"").replace(/m/g,"")+"m";var c=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(c,u)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var bN={},vN;function bZ(){return vN||(vN=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),bN}bZ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const SC=({lang:e,code:t})=>{const[n,r]=N.useState(!1),[a,i]=N.useState(!1),o=N.useRef(null),s=N.useCallback(()=>{if(o.current&&t)try{o.current.textContent=t,mZ.highlightElement(o.current)}catch(m){console.error("Prism highlight error:",m),o.current.textContent=t}else o.current&&(o.current.textContent="")},[t]);N.useEffect(()=>{a||s()},[t,e,a,s]);const u=async()=>{try{await navigator.clipboard.writeText(t),r(!0),ht.success("Code copied to clipboard!"),setTimeout(()=>r(!1),1500)}catch(m){ht.error("Failed to copy code."),console.error("Clipboard copy failed:",m)}},c=()=>{const m=a;i(g=>!g),m&&setTimeout(s,0)},f=e?`language-${e}`:"language-plaintext",h=N.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container my-4",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("span",{className:"text-xs text-muted-foreground",children:e||"code"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:c,"aria-label":a?"Unfold code":"Fold code",children:y.jsx(qv,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:a?"Unfold":"Fold"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:u,"aria-label":"Copy code",children:n?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(JE,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy"})]})})]})]}),!a&&y.jsx("pre",{className:Mt("code-block-content"),children:y.jsx("code",{ref:o,className:Mt(f),children:t})}),a&&y.jsx("div",{className:"folded-content-preview p-4 pt-0",onClick:c,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:h})})]})},vZ=({interaction:e,allInteractionsInGroup:t,onRegenerate:n,className:r})=>{var Q,M,K,U,me,se,ne,ee;const[a,i]=N.useState(0),[o,s]=N.useState(!1),[u,c]=N.useState(!1),[f,h]=N.useState(!1),m=N.useMemo(()=>t.filter(ae=>ae.type==="message.user_assistant"&&ae.status==="COMPLETED"&&ae.prompt===null).sort((ae,G)=>{var Y,J;return(((Y=G.startedAt)==null?void 0:Y.getTime())??0)-(((J=ae.startedAt)==null?void 0:J.getTime())??0)}),[t]),g=m.length>0?m[a]:e,w=typeof g.response=="string"?g.response:null,v=PD(w),_=e.prompt&&g.status==="COMPLETED"&&typeof n=="function"&&a===0,x=ae=>{ae.stopPropagation(),n&&e.prompt?n(e.id):console.error("Could not regenerate: No callback or prompt data found in the original interaction.",e)},S=ae=>{i(G=>ae==="prev"?Math.min(G+1,m.length-1):Math.max(G-1,0))},E=N.useCallback(async()=>{if(w)try{await navigator.clipboard.writeText(w),c(!0),ht.success("Response copied to clipboard!"),setTimeout(()=>c(!1),1500)}catch(ae){ht.error("Failed to copy response."),console.error("Clipboard copy failed:",ae)}},[w]),C=N.useCallback(async()=>{try{await navigator.clipboard.writeText(g.id),h(!0),ht.success("Interaction ID copied to clipboard!"),setTimeout(()=>h(!1),1500)}catch(ae){ht.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",ae)}},[g.id]),A=()=>s(ae=>!ae),O=m.length>1,I=a<m.length-1,D=a>0,B=N.useMemo(()=>w?w.split(`
`).slice(0,3).join(`
`):"",[w]),W=N.useMemo(()=>g.startedAt&&g.endedAt?((g.endedAt.getTime()-g.startedAt.getTime())/1e3).toFixed(2):null,[g.startedAt,g.endedAt]);return y.jsxs("div",{className:Mt("p-3 my-2 border rounded-md shadow-sm bg-card relative group",r),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{children:["Assistant | ",g.status,((Q=g.metadata)==null?void 0:Q.modelId)&&y.jsxs("span",{className:"ml-2 text-blue-400",children:["(",g.metadata.modelId,")"]})]}),y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:A,"aria-label":o?"Unfold response":"Fold response",children:y.jsx(qv,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:o?"Unfold":"Fold"})]})}),O&&y.jsxs("div",{className:"flex items-center border border-border rounded bg-background/50",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>S("prev"),disabled:!I,"aria-label":"Previous revision",children:y.jsx(wU,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Previous Revision"})]})}),y.jsxs("span",{className:"text-[10px] px-1 text-muted-foreground select-none",children:[a+1,"/",m.length]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:()=>S("next"),disabled:!D,"aria-label":"Next revision",children:y.jsx(CO,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Next Revision"})]})})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:C,"aria-label":"Copy interaction ID",children:f?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(AO,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy ID"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:E,"aria-label":"Copy response",disabled:!w,children:u?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(JE,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy"})]})}),_&&y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:x,"aria-label":"Regenerate response",children:y.jsx(Gv,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Regenerate"})]})})]})]}),y.jsx("div",{className:"text-sm markdown-content",children:o?y.jsx("div",{className:"folded-content-preview",onClick:A,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:B})}):v.map((ae,G)=>typeof ae=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:ae}},G):ae.type==="code"?y.jsx(SC,{lang:ae.lang,code:ae.code},G):null)}),!o&&(((M=g.metadata)==null?void 0:M.promptTokens)||((K=g.metadata)==null?void 0:K.completionTokens)||W)&&y.jsxs("div",{className:"mt-2 pt-2 border-t border-border/50 text-xs text-muted-foreground flex justify-start gap-3",children:[W&&y.jsxs("span",{children:["Time: ",W,"s"]}),(((U=g.metadata)==null?void 0:U.promptTokens)||((me=g.metadata)==null?void 0:me.completionTokens))&&y.jsxs("span",{children:["Tokens: ",((se=g.metadata)==null?void 0:se.promptTokens)??"?"," ","(in) / ",((ne=g.metadata)==null?void 0:ne.completionTokens)??"?"," ","(out)"]})]}),g.status==="ERROR"&&((ee=g.metadata)==null?void 0:ee.error)&&y.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs text-destructive",children:[y.jsx(Bu,{className:"h-3.5 w-3.5"}),y.jsxs("span",{children:["Error: ",g.metadata.error]})]})]})},wZ=N.memo(vZ);var ot;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(ot||(ot={}));const wN={[ot.EPERM]:"Operation not permitted",[ot.ENOENT]:"No such file or directory",[ot.EINTR]:"Interrupted system call",[ot.EIO]:"Input/output error",[ot.ENXIO]:"No such device or address",[ot.EBADF]:"Bad file descriptor",[ot.EAGAIN]:"Resource temporarily unavailable",[ot.ENOMEM]:"Cannot allocate memory",[ot.EACCES]:"Permission denied",[ot.EFAULT]:"Bad address",[ot.ENOTBLK]:"Block device required",[ot.EBUSY]:"Resource busy or locked",[ot.EEXIST]:"File exists",[ot.EXDEV]:"Invalid cross-device link",[ot.ENODEV]:"No such device",[ot.ENOTDIR]:"File is not a directory",[ot.EISDIR]:"File is a directory",[ot.EINVAL]:"Invalid argument",[ot.ENFILE]:"Too many open files in system",[ot.EMFILE]:"Too many open files",[ot.ETXTBSY]:"Text file busy",[ot.EFBIG]:"File is too big",[ot.ENOSPC]:"No space left on disk",[ot.ESPIPE]:"Illegal seek",[ot.EROFS]:"Cannot modify a read-only file system",[ot.EMLINK]:"Too many links",[ot.EPIPE]:"Broken pipe",[ot.EDOM]:"Numerical argument out of domain",[ot.ERANGE]:"Numerical result out of range",[ot.EDEADLK]:"Resource deadlock would occur",[ot.ENAMETOOLONG]:"File name too long",[ot.ENOLCK]:"No locks available",[ot.ENOSYS]:"Function not implemented",[ot.ENOTEMPTY]:"Directory is not empty",[ot.ELOOP]:"Too many levels of symbolic links",[ot.ENOMSG]:"No message of desired type",[ot.EBADE]:"Invalid exchange",[ot.EBADR]:"Invalid request descriptor",[ot.EXFULL]:"Exchange full",[ot.ENOANO]:"No anode",[ot.EBADRQC]:"Invalid request code",[ot.ENOSTR]:"Device not a stream",[ot.ENODATA]:"No data available",[ot.ETIME]:"Timer expired",[ot.ENOSR]:"Out of streams resources",[ot.ENONET]:"Machine is not on the network",[ot.EREMOTE]:"Object is remote",[ot.ENOLINK]:"Link has been severed",[ot.ECOMM]:"Communication error on send",[ot.EPROTO]:"Protocol error",[ot.EBADMSG]:"Bad message",[ot.EOVERFLOW]:"Value too large for defined data type",[ot.EBADFD]:"File descriptor in bad state",[ot.ESTRPIPE]:"Streams pipe error",[ot.ENOTSOCK]:"Socket operation on non-socket",[ot.EDESTADDRREQ]:"Destination address required",[ot.EMSGSIZE]:"Message too long",[ot.EPROTOTYPE]:"Protocol wrong type for socket",[ot.ENOPROTOOPT]:"Protocol not available",[ot.EPROTONOSUPPORT]:"Protocol not supported",[ot.ESOCKTNOSUPPORT]:"Socket type not supported",[ot.ENOTSUP]:"Operation is not supported",[ot.ENETDOWN]:"Network is down",[ot.ENETUNREACH]:"Network is unreachable",[ot.ENETRESET]:"Network dropped connection on reset",[ot.ETIMEDOUT]:"Connection timed out",[ot.ECONNREFUSED]:"Connection refused",[ot.EHOSTDOWN]:"Host is down",[ot.EHOSTUNREACH]:"No route to host",[ot.EALREADY]:"Operation already in progress",[ot.EINPROGRESS]:"Operation now in progress",[ot.ESTALE]:"Stale file handle",[ot.EREMOTEIO]:"Remote I/O error",[ot.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(ot[t],wN[ot[t]],n,r)}constructor(t,n=wN[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=ot[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var kx={exports:{}},_N;function _Z(){return _N||(_N=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function i(u,c,f,h,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,h||u,m),w=n?n+c:c;return u._events[w]?u._events[w].fn?u._events[w]=[u._events[w],g]:u._events[w].push(g):(u._events[w]=g,u._eventsCount++),u}function o(u,c){--u._eventsCount===0?u._events=new r:delete u._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)t.call(f,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},s.prototype.listeners=function(c){var f=n?n+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,w=new Array(g);m<g;m++)w[m]=h[m].fn;return w},s.prototype.listenerCount=function(c){var f=n?n+c:c,h=this._events[f];return h?h.fn?1:h.length:0},s.prototype.emit=function(c,f,h,m,g,w){var v=n?n+c:c;if(!this._events[v])return!1;var _=this._events[v],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,f),!0;case 3:return _.fn.call(_.context,f,h),!0;case 4:return _.fn.call(_.context,f,h,m),!0;case 5:return _.fn.call(_.context,f,h,m,g),!0;case 6:return _.fn.call(_.context,f,h,m,g,w),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var C=_.length,A;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(c,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,f);break;case 3:_[E].fn.call(_[E].context,f,h);break;case 4:_[E].fn.call(_[E].context,f,h,m);break;default:if(!S)for(A=1,S=new Array(x-1);A<x;A++)S[A-1]=arguments[A];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(c,f,h){return i(this,c,f,h,!1)},s.prototype.once=function(c,f,h){return i(this,c,f,h,!0)},s.prototype.removeListener=function(c,f,h,m){var g=n?n+c:c;if(!this._events[g])return this;if(!f)return o(this,g),this;var w=this._events[g];if(w.fn)w.fn===f&&(!m||w.once)&&(!h||w.context===h)&&o(this,g);else{for(var v=0,_=[],x=w.length;v<x;v++)(w[v].fn!==f||m&&!w[v].once||h&&w[v].context!==h)&&_.push(w[v]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var f;return c?(f=n?n+c:c,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(kx)),kx.exports}var xZ=_Z();const EC=Ja(xZ);var J6;let SZ=class extends EC{constructor(n){super();qa(this,J6,"List");qa(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(J6=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function xN(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function sr(e){throw e}const SN=Intl.NumberFormat("en",{notation:"compact"});SN.format.bind(SN);function yd(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function EZ(e){try{return JSON.parse(e),!0}catch{return!1}}function H2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function CC(e){return e.at(0).toUpperCase()+e.slice(1)}const CZ=new TextEncoder;function Xc(e){return CZ.encode(e)}const EN=new TextDecoder;function kC(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return EN.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),EN.decode(t)}function Tm(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=Tm(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function kZ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var AZ={};let TZ="process"in globalThis&&"env"in globalThis.process&&AZ.U_DEBUG=="true";function Rm(...e){TZ&&console.debug("[U]",...e)}const CN=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],RZ=[...CN,...CN.map(e=>CC(e)),"char"],AC=/^(u?int|float)(8|16|32|64|128)$/i;function FD(e){return e=="char"?"uint8":e.toLowerCase()}function TC(e){return AC.test(e.toString())}function V2(e){return e=="char"||AC.test(e.toString().toLowerCase())}function NZ(e){if(!V2(e))throw new TypeError("Not a valid primitive type: "+e)}const kN=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function LD(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function IZ(e){return e!=null&&typeof e=="object"&&"struct"in e}function ow(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function $o(e){return typeof e=="function"&&Symbol.metadata in e&&IZ(e[Symbol.metadata])}function x0(e){return e!=null&&typeof e=="object"&&$o(e.constructor)}function $D(e){if(!x0(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function RC(e){return x0(e)||$o(e)}function BD(e){if(!RC(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function NC(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function jr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=jr(e[i]);return a}if(typeof e=="string")return NZ(e),+FD(e).match(AC)[2]/8;if(NC(e))return e[Symbol.size];BD(e);const t=$o(e)?e:e.constructor;ow(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if($o(e))return r;for(const a of n.members.values()){const i=e[a.name];if(x0(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,jr(i)):r+=jr(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=jr(RC(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function OZ(e,t){var i;BD(e);const n=$o(e)?e:e.constructor;ow(n);const{struct:r}=n[Symbol.metadata];if($o(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??sr(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=jr(RC(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function DZ(e,t){return Math.ceil(e/t)*t}function bd(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:u,length:c}of LD(r)){if(!V2(u)&&!$o(u))throw new TypeError("Not a valid type: "+u);if(typeof c=="string"){const m=a.get(c);if(!m)throw new Error(`"${c}" is undefined or declared after "${s}"`);if(!TC(m.type))throw new Error(`"${c}" is not a number and cannot be used to count "${s}"`)}let f=`${typeof u=="string"?u:u.name} ${s}`;c!==void 0&&(f+=`[${c}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:V2(u)?FD(u):u,length:c,decl:f});const h=typeof c=="string"||$o(u)&&u[Symbol.metadata].struct.isDynamic?0:jr(u)*(c||1);o||(o=$o(u)?u[Symbol.metadata].struct.isDynamic:typeof c=="string"),i=e.isUnion?Math.max(i,h):i+h,i=DZ(i,e.align||1),Rm("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function Nm(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return LD(r).push({name:a,type:e,length:t}),n}}function zD(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:sr(new Error("Array lengths must be natural numbers"))}function Ma(e){if(NC(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();$D(e),ow(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=jr(e),a=new Uint8Array(r),i=new DataView(a.buffer);Rm("serialize",e.constructor.name);let o=0,s=0;for(const u of n.values()){const c=zD(e,u);Rm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name][f]:e[u.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=x0(h)?jr(h):jr(u.type),!TC(u.type)){a.set(h?Ma(h):new Uint8Array(jr(u.type)),o);continue}const m=`set${CC(u.type)}`;if(m=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&kN,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&kN,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](o,Number(h),!t.bigEndian)}}return a}function sw(e,t){const n=kZ(t);if(NC(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);$D(e),ow(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);Rm("deserialize",e.constructor.name);let o=0,s=0;for(const u of a.values()){const c=zD(e,u);Rm("	",u.decl);for(let f=0;f<Math.abs(c);f++){let h=c!=-1?e[u.name]:e;const m=c!=-1?f:u.name,g=h[m]===null||h[m]===void 0,w=g&&$o(u.type)&&u.type[Symbol.metadata].struct.isDynamic;if(o=s,!x0(h[m])&&!w&&(s+=jr(u.type)),typeof e[u.name]=="string"){e[u.name]=e[u.name].slice(0,f)+String.fromCharCode(i.getUint8(o))+e[u.name].slice(f+1);continue}if(!TC(u.type)){if(w&&$o(u.type))h[m]??(h[m]=new u.type);else if(g)continue;sw(h[m],new Uint8Array(n.subarray(o))),s+=jr(h[m]);continue}c&&c!=-1&&(h||(h=[]));const v=`get${CC(u.type)}`;if(v=="getInt64"){h[m]=i.getBigInt64(o,!r.bigEndian);continue}if(v=="getUint64"){h[m]=i.getBigUint64(o,!r.bigEndian);continue}if(v=="getInt128"){h[m]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(v=="getUint128"){h[m]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(v=="getFloat128"){h[m]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[v](o,!r.bigEndian)}}}function jZ(e){function t(n,r){return typeof n=="number"||typeof n=="string"?Nm(e,n):Nm(e)(n,r)}return t}const gn=Object.fromEntries(RZ.map(e=>[e,jZ(e)]));function MZ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const es={root:"/",pwd:"/",credentials:MZ({uid:0,gid:0}),descriptors:new Map};function UD(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const u=n.lastIndexOf("/");u===-1?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function Ml(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:es.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=UD(n,!r),r?`/${n}`:n.length?n:"/"}function PZ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=UD(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function er(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?PZ(t):"."}function qD(e,t){if(e===t||(e=Ml.call(this,e),t=Ml.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let u=-1,c=0;for(;c<s;c++){const h=e[n+c];if(h!==t[i+c])break;h==="/"&&(u=c)}if(c===s)if(o>s){if(t[i+c]==="/")return t.slice(i+c+1);if(c===0)return t.slice(i+c)}else a>s&&(e[n+c]==="/"?u=c:c===0&&(u=0));let f="";for(c=n+u+1;c<=r;++c)(c===r||e[c]==="/")&&(f+=f.length===0?"..":"/..");return`${f}${t.slice(i+u)}`}function Zn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function Jf(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function Es(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,u=e.length-1,c=0;for(;u>=r;--u){if(e[u]==="/"){if(!s){i=u+1;break}continue}o===-1&&(s=!1,o=u+1),e[u]==="."?a===-1?a=u:c!==1&&(c=1):a!==-1&&(c=-1)}if(o!==-1){const f=i===0&&t?1:i;a===-1||c===0||c===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(f,o):(n.name=e.slice(f,a),n.base=e.slice(f,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var pn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(pn||(pn={}));pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";const FZ=new SZ;function LZ(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};FZ.add(n),GZ(n)}function $Z(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+er(i,e.path)}function uc(e){return function(t,n={}){return LZ(e,$Z(t,n)),t}}uc(pn.EMERG);const BZ=uc(pn.ALERT),lw=uc(pn.CRIT),wi=uc(pn.ERR),Wa=uc(pn.WARN),IC=uc(pn.NOTICE),HD=uc(pn.INFO),dm=uc(pn.DEBUG);function zZ(e,t){return`\x1B[${t}m${e}\x1B[0m`}function UZ(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[zZ(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"",pn.EMERG+"",pn.ALERT+"",pn.CRIT+"",pn.ERR+"",pn.WARN+"",pn.NOTICE+"",pn.INFO+"",pn.DEBUG+"";let qZ=e=>[...UZ(e),e.message];function HZ(e){const t=qZ(e);return typeof t=="string"?[t]:Array.from(t)}let VZ=console.error;function GZ(e){e.level>WZ||VZ(...HZ(e))}let WZ=pn.ALERT;function OC(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function KZ(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function ZZ(e,t){if(typeof t!="object"||t===null)throw wi(new Ue(ot.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){dm("Using default for option: "+n);continue}throw wi(new Ue(ot.EINVAL,"Missing required option: "+n))}const i=(c,f=a)=>{var h;return typeof c=="function"?Symbol.hasInstance in c&&c.prototype?a instanceof c:c(a):typeof a===c||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===c};if(Array.isArray(r.type)?r.type.some(c=>i(c)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=c=>typeof c=="function"?c.name!="type"?c.name:c.toString():c,u=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw wi(new Ue(ot.EINVAL,`Incorrect type for "${n}": ${o} (expected ${u})`))}}function VD(e){return e!=null&&typeof e=="object"&&"backend"in e&&OC(e.backend)}const DC=0,ha=4,Gr=2,db=1,jC=1,YZ=2,XZ=4,GD=0,Ga=1,Al=2,uw=64,cw=128,JZ=256,dw=512,sd=1024,QZ=65536,eY=262144,tY=131072,fw=1052672,nY=4096,rY=32768,aY=16384,iY=2048,mr=61440,vd=49152,Ul=40960,Bo=32768,wd=24576,aa=16384,_d=8192,xd=4096,S0=2048,E0=1024,oY=512,sY=448,WD=256,KD=128,ZD=64,lY=56,YD=32,XD=16,JD=8,uY=7,QD=4,ej=2,tj=1,cY=0,li=4294967295,nj=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:jC,COPYFILE_FICLONE:YZ,COPYFILE_FICLONE_FORCE:XZ,F_OK:DC,O_APPEND:sd,O_CREAT:uw,O_DIRECT:aY,O_DIRECTORY:QZ,O_DSYNC:nY,O_EXCL:cw,O_NOATIME:eY,O_NOCTTY:JZ,O_NOFOLLOW:tY,O_NONBLOCK:iY,O_RDONLY:GD,O_RDWR:Al,O_SYMLINK:rY,O_SYNC:fw,O_TRUNC:dw,O_WRONLY:Ga,R_OK:ha,S_IFBLK:wd,S_IFCHR:_d,S_IFDIR:aa,S_IFIFO:xd,S_IFLNK:Ul,S_IFMT:mr,S_IFREG:Bo,S_IFSOCK:vd,S_IRGRP:YD,S_IROTH:QD,S_IRUSR:WD,S_IRWXG:lY,S_IRWXO:uY,S_IRWXU:sY,S_ISGID:E0,S_ISUID:S0,S_ISVTX:oY,S_IWGRP:XD,S_IWOTH:ej,S_IWUSR:KD,S_IXGRP:JD,S_IXOTH:tj,S_IXUSR:ZD,UV_FS_O_FILEMAP:cY,W_OK:Gr,X_OK:db,size_max:li},Symbol.toStringTag,{value:"Module"})),My=BigInt(1e3);class rj{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:u,ino:c,...f}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(c??0),this.mode=this._convert(u??420&Bo),(this.mode&mr)==0&&(this.mode=this.mode|this._convert(Bo)),Object.assign(this,f)}isFile(){return(this.mode&mr)===Bo}isDirectory(){return(this.mode&mr)===aa}isSymbolicLink(){return(this.mode&mr)===Ul}isSocket(){return(this.mode&mr)===vd}isBlockDevice(){return(this.mode&mr)===wd}isCharacterDevice(){return(this.mode&mr)===_d}isFIFO(){return(this.mode&mr)===xd}toJSON(){return yd(this,G2)}hasAccess(t,n){return rr(n,this._isBigint?new ql(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*My}get mtimeNs(){return BigInt(this.mtimeMs)*My}get ctimeNs(){return BigInt(this.ctimeMs)*My}get birthtimeNs(){return BigInt(this.birthtimeMs)*My}}function aj(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<li?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<li?e.gid=n:r=!1,r}class ql extends rj{constructor(){super(...arguments),this._isBigint=!1}}class Sd extends rj{constructor(){super(...arguments),this._isBigint=!0}}function dY(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class fY{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=li,this.ffree=li}}class hY{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(li),this.ffree=BigInt(li)}}var Er=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var w={};for(var v in r)w[v]=v==="access"?{}:r[v];for(var v in r.access)w.access[v]=r.access[v];w.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],w);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},hn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},MC=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Bi=0,pY=1024;let AN=(()=>{var e,t;let n=[bd()],r,a=[],i,o,s=[],u=[],c,f=[],h=[],m,g=[],w=[],v,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=hn(this,s,0),this.valueSize=(hn(this,u),hn(this,f,0)),this._key=(hn(this,h),hn(this,g,"")),this._value=(hn(this,w),hn(this,_,new Uint8Array(pY))),hn(this,x),S&&(this.key=S),E&&(this.value=E)}},MC(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=gn).uint32.bind(e)],c=[(t=gn).uint32.bind(t)],m=[gn.char("keySize")],v=[gn.uint8("valueSize")],Er(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},s,u),Er(null,null,c,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},f,h),Er(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,w),Er(null,null,v,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},_,x),Er(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),hn(i,a)})(),i})(),Gu=(()=>{var e;let t=[bd()],n,r=[],a,i,o=[],s=[],u,c=[],f=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new AN(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=hn(this,o,0),this.data=(hn(this,s),hn(this,c,[])),hn(this,f)}},MC(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=gn).uint32.bind(e)],u=[Nm(AN,"size")],Er(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},o,s),Er(null,null,u,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},c,f),Er(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),hn(a,r)})(),a})();const G2=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],mY=4;var _i;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(_i||(_i={}));let ra=(()=>{var e,t,n,r,a,i,o,s,u,c,f,h,m,g,w,v;let _=[bd()],x,S=[],E,C,A=[],O=[],I,D=[],B=[],W,Q=[],M=[],K,U=[],me=[],se,ne=[],ee=[],ae,G=[],Y=[],J,re=[],we=[],ke,Me=[],Pe=[],Re,Ae=[],He=[],st,Oe=[],Te=[],z,Ce=[],Ne=[],ce,ie=[],X=[],_e,Le=[],xe=[],Ve,xt=[],ft=[],Et,Lt=[],Tt=[],zt,ge=[],R=[],H,fe=[],Ie=[],be,Ee=[],le=[];var ct=E=class{constructor(yt){if(this.data=hn(this,A,H2(0,li)),this.__data_old=(hn(this,O),hn(this,D,0)),this.size=(hn(this,B),hn(this,Q,0)),this.mode=(hn(this,M),hn(this,U,0)),this.nlink=(hn(this,me),hn(this,ne,1)),this.uid=(hn(this,ee),hn(this,G,0)),this.gid=(hn(this,Y),hn(this,re,0)),this.atimeMs=(hn(this,we),hn(this,Me,Date.now())),this.birthtimeMs=(hn(this,Pe),hn(this,Ae,Date.now())),this.mtimeMs=(hn(this,He),hn(this,Oe,Date.now())),this.ctimeMs=(hn(this,Te),hn(this,Ce,Date.now())),this.ino=(hn(this,Ne),hn(this,ie,H2(0,li))),this.__ino_old=(hn(this,X),hn(this,Le,0)),this.flags=(hn(this,xe),hn(this,xt,0)),this.__after_flags=(hn(this,ft),hn(this,Lt,0)),this.version=(hn(this,Tt),hn(this,ge,0)),this.__padding=(hn(this,R),hn(this,fe,[])),this.attributes=(hn(this,Ie),hn(this,Ee,new Gu)),hn(this,le),!!yt){if(!("byteLength"in yt)){Object.assign(this,yt);return}if(yt.byteLength<jr(ct))throw lw(new Ue(ot.EIO,"Buffer is too small to create an inode"));sw(this,yt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...yd(this,G2),attributes:this.attributes}}toStats(){return new ql(this)}update(yt){if(!yt)return!1;let P=!1;for(const Be of G2)yt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==yt[Be]&&(Be=="atimeMs"&&this.flags&_i.NoAtime||(this[Be]=yt[Be],P=!0)));return yt.attributes&&(this.attributes=yt.attributes,P=!0),P&&(this.ctimeMs=Date.now()),P}};return MC(E,"Inode"),(()=>{const yt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=gn).uint32.bind(e)],I=[(t=gn).uint32.bind(t)],W=[(n=gn).uint32.bind(n)],K=[(r=gn).uint16.bind(r)],se=[(a=gn).uint32.bind(a)],ae=[(i=gn).uint32.bind(i)],J=[(o=gn).uint32.bind(o)],ke=[(s=gn).float64.bind(s)],Re=[(u=gn).float64.bind(u)],st=[(c=gn).float64.bind(c)],z=[(f=gn).float64.bind(f)],ce=[(h=gn).uint32.bind(h)],_e=[(m=gn).uint32.bind(m)],Ve=[(g=gn).uint32.bind(g)],Et=[(w=gn).uint16.bind(w)],zt=[(v=gn).uint32.bind(v)],H=[gn.uint8(48)],be=[Nm(Gu)],Er(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:P=>"data"in P,get:P=>P.data,set:(P,Be)=>{P.data=Be}},metadata:yt},A,O),Er(null,null,I,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:P=>"__data_old"in P,get:P=>P.__data_old,set:(P,Be)=>{P.__data_old=Be}},metadata:yt},D,B),Er(null,null,W,{kind:"field",name:"size",static:!1,private:!1,access:{has:P=>"size"in P,get:P=>P.size,set:(P,Be)=>{P.size=Be}},metadata:yt},Q,M),Er(null,null,K,{kind:"field",name:"mode",static:!1,private:!1,access:{has:P=>"mode"in P,get:P=>P.mode,set:(P,Be)=>{P.mode=Be}},metadata:yt},U,me),Er(null,null,se,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:P=>"nlink"in P,get:P=>P.nlink,set:(P,Be)=>{P.nlink=Be}},metadata:yt},ne,ee),Er(null,null,ae,{kind:"field",name:"uid",static:!1,private:!1,access:{has:P=>"uid"in P,get:P=>P.uid,set:(P,Be)=>{P.uid=Be}},metadata:yt},G,Y),Er(null,null,J,{kind:"field",name:"gid",static:!1,private:!1,access:{has:P=>"gid"in P,get:P=>P.gid,set:(P,Be)=>{P.gid=Be}},metadata:yt},re,we),Er(null,null,ke,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:P=>"atimeMs"in P,get:P=>P.atimeMs,set:(P,Be)=>{P.atimeMs=Be}},metadata:yt},Me,Pe),Er(null,null,Re,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:P=>"birthtimeMs"in P,get:P=>P.birthtimeMs,set:(P,Be)=>{P.birthtimeMs=Be}},metadata:yt},Ae,He),Er(null,null,st,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:P=>"mtimeMs"in P,get:P=>P.mtimeMs,set:(P,Be)=>{P.mtimeMs=Be}},metadata:yt},Oe,Te),Er(null,null,z,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:P=>"ctimeMs"in P,get:P=>P.ctimeMs,set:(P,Be)=>{P.ctimeMs=Be}},metadata:yt},Ce,Ne),Er(null,null,ce,{kind:"field",name:"ino",static:!1,private:!1,access:{has:P=>"ino"in P,get:P=>P.ino,set:(P,Be)=>{P.ino=Be}},metadata:yt},ie,X),Er(null,null,_e,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:P=>"__ino_old"in P,get:P=>P.__ino_old,set:(P,Be)=>{P.__ino_old=Be}},metadata:yt},Le,xe),Er(null,null,Ve,{kind:"field",name:"flags",static:!1,private:!1,access:{has:P=>"flags"in P,get:P=>P.flags,set:(P,Be)=>{P.flags=Be}},metadata:yt},xt,ft),Er(null,null,Et,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:P=>"__after_flags"in P,get:P=>P.__after_flags,set:(P,Be)=>{P.__after_flags=Be}},metadata:yt},Lt,Tt),Er(null,null,zt,{kind:"field",name:"version",static:!1,private:!1,access:{has:P=>"version"in P,get:P=>P.version,set:(P,Be)=>{P.version=Be}},metadata:yt},ge,R),Er(null,null,H,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:P=>"__padding"in P,get:P=>P.__padding,set:(P,Be)=>{P.__padding=Be}},metadata:yt},fe,Ie),Er(null,null,be,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:P=>"attributes"in P,get:P=>P.attributes,set:(P,Be)=>{P.attributes=Be}},metadata:yt},Ee,le),Er(null,x={value:E},_,{kind:"class",name:E.name,metadata:yt},null,S),ct=E=x.value,yt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:yt}),hn(E,S)})(),ct=E})();function gY(e){return(e.mode&mr)===Bo}function Ko(e){return(e.mode&mr)===aa}function Qf(e){return(e.mode&mr)===Ul}function yY(e){return(e.mode&mr)===vd}function Im(e){return(e.mode&mr)===wd}function Om(e){return(e.mode&mr)===_d}function bY(e){return(e.mode&mr)===xd}function rr(e,t,n){const r=(e==null?void 0:e.credentials)||es.credentials;if(Qf(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&WD&&(a|=ha),t.mode&KD&&(a|=Gr),t.mode&ZD&&(a|=db)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&YD&&(a|=ha),t.mode&XD&&(a|=Gr),t.mode&JD&&(a|=db)),t.mode&QD&&(a|=ha),t.mode&ej&&(a|=Gr),t.mode&tj&&(a|=db),(a&n)===n}const TN=1;class jb extends Map{constructor(){super(...arguments),this.maxSize=li}toJSON(){return{version:TN,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*jr(ra);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&mr)!=aa)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())Zn(a)==t&&a!=t&&(r[Jf(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&mr)!=aa)continue;const a={};for(const i of this.keys())Zn(i)==n&&i!=n&&(a[Jf(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=TN)throw new Ue(ot.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=H2(1,li)),r=="/"&&(a.ino=0),this.set(r,new ra(a));return this}static parse(t){if(!EZ(t))throw new Ue(ot.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new jb;return r.fromJSON(n),r}}const Ax=4096;let PC=class W2{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===W2.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===W2.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=Ax){const u=s+Ax>o?o-s:Ax,c=new Uint8Array(u);await this.read(t,c,s,s+u).catch(r.error.bind(r)),r.enqueue(c)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const u=f=>{s=!0,o.error(f)},{size:c}=await this.stat(t);await this.write(t,i,a).catch(u),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(c,a)}).catch(u))}})}};function ii(e){return JSON.parse(kC(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function oo(e){return Xc(JSON.stringify(e))}function cc(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(ot.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Mb(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(ot.EINVAL,"Invalid time.")}}function ln(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(ot.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(ot.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(ot.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Ml(e)}function Tl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:cc("mode"in e?e==null?void 0:e.mode:null,r)}}class vY{constructor(t,n,r,a){qa(this,"id");qa(this,"_size");qa(this,"options");qa(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=Tm(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=Tm(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,u)=>s.start-u.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var Tx,Rx,Nx;(Tx=Promise.withResolvers)!==null&&Tx!==void 0||(Promise.withResolvers=(Wa("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(Rx=Symbol.dispose)!==null&&Rx!==void 0||(Symbol.dispose=(Wa("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(Nx=Symbol.asyncDispose)!==null&&Nx!==void 0||(Symbol.asyncDispose=(Wa("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class ij{constructor(t){this.store=t}}class wY extends ij{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class K2 extends ij{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new vY(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:u,end:c}of o)this.async(this.get(t,u,c));if(o.length)throw wi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){Wa("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class _Y{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof K2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,await this.raw.get(t,u.start,u.end),u.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof K2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const u of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,u.start,u.end),u.start)}}}var xr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Sr=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class oj extends PC{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=qD(t,a);if(o.startsWith(".."))continue;let s=er(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){Wa("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,dm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,Ma(o)),a.has(i)&&await r.set(o.data,oo(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,Ma(o)),a.has(i)&&r.setSync(o.data,oo(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new jb,a=xr(n,this.transaction(),!0),i=[["/",0]],o=xN(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new ra(await a.get(u));if(r.set(s,c),c.mode&aa){const f=ii((t=await a.get(c.data))!==null&&t!==void 0?t:sr(Ue.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([er(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new jb,a=xr(n,this.transaction(),!1),i=[["/",0]],o=xN(Ue.With("EDEADLK"));for(;i.length;){const[s,u]=i.shift(),c=new ra(a.getSync(u));if(r.set(s,c),c.mode&aa){const f=ii((t=a.getSync(c.data))!==null&&t!==void 0?t:sr(Ue.With("ENODATA",s)));for(const[h,m]of Object.entries(f))i.push([er(s,h),m])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!0),u=Es(t),c=Es(n),f=await this.findInode(s,u.dir,"rename"),h=ii((r=await s.get(f.data))!==null&&r!==void 0?r:sr(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&wi(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(ot.EBUSY,u.dir);const g=c.dir==u.dir,w=g?f:await this.findInode(s,c.dir,"rename"),v=g?h:ii((a=await s.get(w.data))!==null&&a!==void 0?a:sr(Ue.With("ENODATA",c.dir,"rename")));if(v[c.base]){const _=new ra((i=await s.get(v[c.base]))!==null&&i!==void 0?i:sr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(v[c.base])}v[c.base]=m,await s.set(f.data,oo(h)),await s.set(w.data,oo(v)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!1),u=Es(t),c=Es(n),f=this.findInodeSync(s,u.dir,"rename"),h=ii((r=s.getSync(f.data))!==null&&r!==void 0?r:sr(Ue.With("ENODATA",u.dir,"rename")));if(!h[u.base])throw Ue.With("ENOENT",t,"rename");const m=h[u.base];if(m!=this._ids.get(t)&&wi(`Ino mismatch while renaming ${t} to ${n}`),delete h[u.base],(c.dir+"/").startsWith(t+"/"))throw new Ue(ot.EBUSY,u.dir);const g=c.dir===u.dir,w=g?f:this.findInodeSync(s,c.dir,"rename"),v=g?h:ii((a=s.getSync(w.data))!==null&&a!==void 0?a:sr(Ue.With("ENODATA",c.dir,"rename")));if(v[c.base]){const _=new ra((i=s.getSync(v[c.base]))!==null&&i!==void 0?i:sr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(v[c.base])}v[c.base]=m,s.setSync(f.data,oo(h)),s.setSync(w.data,oo(v)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Sr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=xr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Sr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ma(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Sr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,Ma(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Sr(r)}}async createFile(t,n){return n.mode|=Bo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Bo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=aa,await this.commitNew(t,n,Xc("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=aa,this.commitNewSync(t,n,Xc("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(ii((n=await a.get(i.data))!==null&&n!==void 0?n:sr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Sr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=xr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(ii((n=a.getSync(i.data))!==null&&n!==void 0?n:sr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Sr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,Ma(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Sr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,Ma(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Sr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!0),o=Zn(n),s=await this.findInode(i,o,"link"),u=ii((r=await i.get(s.data))!==null&&r!==void 0?r:sr(Ue.With("ENOENT",o,"link"))),c=await this.findInode(i,t,"link");c.nlink++,u[Jf(n)]=c.ino,this._add(c.ino,n),await i.set(c.ino,Ma(c)),await i.set(s.data,oo(u)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Sr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=xr(a,this.transaction(),!1),o=Zn(n),s=this.findInodeSync(i,o,"link"),u=ii((r=i.getSync(s.data))!==null&&r!==void 0?r:sr(Ue.With("ENOENT",o,"link"))),c=this.findInodeSync(i,t,"link");c.nlink++,u[Jf(n)]=c.ino,this._add(c.ino,n),i.setSync(c.ino,Ma(c)),i.setSync(s.data,oo(u)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Sr(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!0),u=await this.findInode(s,t,"read");if(u.size==0)return;const c=(i=await s.get(u.data,r,a))!==null&&i!==void 0?i:sr(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&wi(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=xr(o,this.transaction(),!1),u=this.findInodeSync(s,t,"read");if(u.size==0)return;const c=(i=s.getSync(u.data,r,a))!==null&&i!==void 0?i:sr(Ue.With("ENODATA",t,"read")),f=s.flag("partial")?c:c.subarray(r,a);f.byteLength>n.byteLength&&wi(`Trying to place ${f.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(f)}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=xr(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let u=n;o.flag("partial")||(u=Tm((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),await o.set(s.data,u,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Sr(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=xr(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let u=n;o.flag("partial")||(u=Tm((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),u.set(n,r),r=0),o.setSync(s.data,u,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Sr(i)}}transaction(){return new _Y(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=xr(t,this.transaction(),!0);if(await n.get(Bi))return;const r=new ra({ino:Bi,data:1,mode:511|aa});await n.set(r.data,Xc("{}")),this._add(Bi,"/"),await n.set(Bi,Ma(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Sr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=xr(t,this.transaction(),!1);if(n.getSync(Bi))return;const r=new ra({ino:Bi,data:1,mode:511|aa});n.setSync(r.data,Xc("{}")),this._add(Bi,"/"),n.setSync(Bi,Ma(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Sr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){Wa("Attempted to populate tables after initialization");return}dm("Populating tables with existing store metadata");const n=xr(t,this.transaction(),!0),r=await n.get(Bi);if(!r){IC("Store does not have a root inode");const s=new ra({ino:Bi,data:1,mode:511|aa});await n.set(s.data,Xc("{}")),this._add(Bi,"/"),await n.set(Bi,Ma(s)),await n.commit();return}if(r.length<jr(ra)){lw("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",Bi]];for(;o.length>0;){i++;const[s,u]=o.shift();this._add(u,s);const c=await n.get(u);if(!c){Wa("Store is missing data for inode: "+u);continue}if(c.length<jr(ra)){Wa(`Invalid inode size for ino ${u}: ${c.length}`);continue}const f=new ra(c);if((f.mode&aa)!=aa||a.has(u))continue;a.add(u);const h=await n.get(f.data);if(!h){Wa("Store is missing directory data: "+f.data);continue}const m=ii(h);for(const[g,w]of Object.entries(m))o.push([er(s,g),w])}dm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Sr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ra((a=await t.get(i))!==null&&a!==void 0?a:sr(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new ra((a=t.getSync(i))!==null&&a!==void 0?a:sr(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>li)throw wi(new Ue(ot.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=xr(o,this.transaction(),!0),{dir:u,base:c}=Es(t),f=await this.findInode(s,u,a),h=ii((i=await s.get(f.data))!==null&&i!==void 0?i:sr(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new ra({...n,ino:m,data:m+1,size:r.byteLength});return await s.set(g.ino,Ma(g)),await s.set(g.data,r),h[c]=g.ino,await s.set(f.data,oo(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Sr(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=xr(o,this.transaction(),!1),{dir:u,base:c}=Es(t),f=this.findInodeSync(s,u,a),h=ii((i=s.getSync(f.data))!==null&&i!==void 0?i:sr(Ue.With("ENOENT",u,a)));if(h[c])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new ra({...n,ino:m,data:m+1,size:r.byteLength});return s.setSync(g.ino,Ma(g)),s.setSync(g.data,r),h[c]=g.ino,s.setSync(f.data,oo(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Sr(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=xr(i,this.transaction(),!0),{dir:u,base:c}=Es(t),f=await this.findInode(s,u,o),h=ii((r=await s.get(f.data))!==null&&r!==void 0?r:sr(Ue.With("ENOENT",u,o)));if(!h[c])throw Ue.With("ENOENT",t,o);const m=h[c],g=new ra((a=await s.get(m))!==null&&a!==void 0?a:sr(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Ko(g))throw Ue.With("EISDIR",t,o);await s.set(f.data,oo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,Ma(g))):(await s.remove(g.data),await s.remove(m),this._remove(m)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Sr(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=xr(i,this.transaction(),!1),{dir:u,base:c}=Es(t),f=this.findInodeSync(s,u,o),h=ii((r=s.getSync(f.data))!==null&&r!==void 0?r:sr(Ue.With("ENOENT",u,o))),m=h[c];if(!m)throw Ue.With("ENOENT",t,o);const g=new ra((a=s.getSync(m))!==null&&a!==void 0?a:sr(Ue.With("ENOENT",t,o)));if(delete h[c],!n&&Ko(g))throw Ue.With("EISDIR",t,o);s.setSync(f.data,oo(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,Ma(g))):(s.removeSync(g.data),s.removeSync(m),this._remove(m)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Sr(i)}}}class xY extends wY{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class SY extends Map{constructor(t=li,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new xY(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const EY={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new oj(new SY(e,t));return n.checkRootSync(),n}},CY=EY;let pa=!0;var FC={},hw={};hw.byteLength=TY;hw.toByteArray=NY;hw.fromByteArray=DY;var As=[],fo=[],kY=typeof Uint8Array<"u"?Uint8Array:Array,Ix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Sf=0,AY=Ix.length;Sf<AY;++Sf)As[Sf]=Ix[Sf],fo[Ix.charCodeAt(Sf)]=Sf;fo[45]=62;fo[95]=63;function sj(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function TY(e){var t=sj(e),n=t[0],r=t[1];return(n+r)*3/4-r}function RY(e,t,n){return(t+n)*3/4-n}function NY(e){var t,n=sj(e),r=n[0],a=n[1],i=new kY(RY(e,r,a)),o=0,s=a>0?r-4:r,u;for(u=0;u<s;u+=4)t=fo[e.charCodeAt(u)]<<18|fo[e.charCodeAt(u+1)]<<12|fo[e.charCodeAt(u+2)]<<6|fo[e.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=fo[e.charCodeAt(u)]<<2|fo[e.charCodeAt(u+1)]>>4,i[o++]=t&255),a===1&&(t=fo[e.charCodeAt(u)]<<10|fo[e.charCodeAt(u+1)]<<4|fo[e.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function IY(e){return As[e>>18&63]+As[e>>12&63]+As[e>>6&63]+As[e&63]}function OY(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(IY(r));return a.join("")}function DY(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(OY(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(As[t>>2]+As[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(As[t>>10]+As[t>>4&63]+As[t<<2&63]+"=")),a.join("")}var LC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */LC.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,u=(1<<s)-1,c=u>>1,f=-7,h=n?a-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-f)-1,g>>=-f,f+=s;f>0;i=i*256+e[t+h],h+=m,f-=8);for(o=i&(1<<-f)-1,i>>=-f,f+=r;f>0;o=o*256+e[t+h],h+=m,f-=8);if(i===0)i=1-c;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-c}return(g?-1:1)*o*Math.pow(2,i-r)};LC.write=function(e,t,n,r,a,i){var o,s,u,c=i*8-a-1,f=(1<<c)-1,h=f>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,w=r?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=m/u:t+=m*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=f?(s=0,o=f):o+h>=1?(s=(t*u-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=w,s/=256,a-=8);for(o=o<<a|s,c+=a;c>0;e[n+g]=o&255,g+=w,o/=256,c-=8);e[n+g-w]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=hw,n=LC,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=f,e.SlowBuffer=A,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;f.TYPED_ARRAY_SUPPORT=u(),!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const ge=new i(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,i.prototype),Object.setPrototypeOf(ge,R),ge.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function c(ge){if(ge>a)throw new RangeError('The value "'+ge+'" is invalid for option "size"');const R=new i(ge);return Object.setPrototypeOf(R,f.prototype),R}function f(ge,R,H){if(typeof ge=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return w(ge)}return h(ge,R,H)}f.poolSize=8192;function h(ge,R,H){if(typeof ge=="string")return v(ge,R);if(o.isView(ge))return x(ge);if(ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge);if(ft(ge,o)||ge&&ft(ge.buffer,o)||typeof s<"u"&&(ft(ge,s)||ge&&ft(ge.buffer,s)))return S(ge,R,H);if(typeof ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=ge.valueOf&&ge.valueOf();if(fe!=null&&fe!==ge)return f.from(fe,R,H);const Ie=E(ge);if(Ie)return Ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ge[Symbol.toPrimitive]=="function")return f.from(ge[Symbol.toPrimitive]("string"),R,H);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge)}f.from=function(ge,R,H){return h(ge,R,H)},Object.setPrototypeOf(f.prototype,i.prototype),Object.setPrototypeOf(f,i);function m(ge){if(typeof ge!="number")throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function g(ge,R,H){return m(ge),ge<=0?c(ge):R!==void 0?typeof H=="string"?c(ge).fill(R,H):c(ge).fill(R):c(ge)}f.alloc=function(ge,R,H){return g(ge,R,H)};function w(ge){return m(ge),c(ge<0?0:C(ge)|0)}f.allocUnsafe=function(ge){return w(ge)},f.allocUnsafeSlow=function(ge){return w(ge)};function v(ge,R){if((typeof R!="string"||R==="")&&(R="utf8"),!f.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const H=O(ge,R)|0;let fe=c(H);const Ie=fe.write(ge,R);return Ie!==H&&(fe=fe.slice(0,Ie)),fe}function _(ge){const R=ge.length<0?0:C(ge.length)|0,H=c(R);for(let fe=0;fe<R;fe+=1)H[fe]=ge[fe]&255;return H}function x(ge){if(ft(ge,i)){const R=new i(ge);return S(R.buffer,R.byteOffset,R.byteLength)}return _(ge)}function S(ge,R,H){if(R<0||ge.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<R+(H||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return R===void 0&&H===void 0?fe=new i(ge):H===void 0?fe=new i(ge,R):fe=new i(ge,R,H),Object.setPrototypeOf(fe,f.prototype),fe}function E(ge){if(f.isBuffer(ge)){const R=C(ge.length)|0,H=c(R);return H.length===0||ge.copy(H,0,0,R),H}if(ge.length!==void 0)return typeof ge.length!="number"||Et(ge.length)?c(0):_(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return _(ge.data)}function C(ge){if(ge>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ge|0}function A(ge){return+ge!=ge&&(ge=0),f.alloc(+ge)}f.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==f.prototype},f.compare=function(R,H){if(ft(R,i)&&(R=f.from(R,R.offset,R.byteLength)),ft(H,i)&&(H=f.from(H,H.offset,H.byteLength)),!f.isBuffer(R)||!f.isBuffer(H))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===H)return 0;let fe=R.length,Ie=H.length;for(let be=0,Ee=Math.min(fe,Ie);be<Ee;++be)if(R[be]!==H[be]){fe=R[be],Ie=H[be];break}return fe<Ie?-1:Ie<fe?1:0},f.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(R,H){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return f.alloc(0);let fe;if(H===void 0)for(H=0,fe=0;fe<R.length;++fe)H+=R[fe].length;const Ie=f.allocUnsafe(H);let be=0;for(fe=0;fe<R.length;++fe){let Ee=R[fe];if(ft(Ee,i))be+Ee.length>Ie.length?(f.isBuffer(Ee)||(Ee=f.from(Ee)),Ee.copy(Ie,be)):i.prototype.set.call(Ie,Ee,be);else if(f.isBuffer(Ee))Ee.copy(Ie,be);else throw new TypeError('"list" argument must be an Array of Buffers');be+=Ee.length}return Ie};function O(ge,R){if(f.isBuffer(ge))return ge.length;if(o.isView(ge)||ft(ge,o))return ge.byteLength;if(typeof ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ge);const H=ge.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&H===0)return 0;let Ie=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return H;case"utf8":case"utf-8":return _e(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H*2;case"hex":return H>>>1;case"base64":return Ve(ge).length;default:if(Ie)return fe?-1:_e(ge).length;R=(""+R).toLowerCase(),Ie=!0}}f.byteLength=O;function I(ge,R,H){let fe=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((H===void 0||H>this.length)&&(H=this.length),H<=0)||(H>>>=0,R>>>=0,H<=R))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return J(this,R,H);case"utf8":case"utf-8":return ne(this,R,H);case"ascii":return G(this,R,H);case"latin1":case"binary":return Y(this,R,H);case"base64":return se(this,R,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,R,H);default:if(fe)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),fe=!0}}f.prototype._isBuffer=!0;function D(ge,R,H){const fe=ge[R];ge[R]=ge[H],ge[H]=fe}f.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let H=0;H<R;H+=2)D(this,H,H+1);return this},f.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let H=0;H<R;H+=4)D(this,H,H+3),D(this,H+1,H+2);return this},f.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let H=0;H<R;H+=8)D(this,H,H+7),D(this,H+1,H+6),D(this,H+2,H+5),D(this,H+3,H+4);return this},f.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?ne(this,0,R):I.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(R){if(!f.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:f.compare(this,R)===0},f.prototype.inspect=function(){let R="";const H=e.INSPECT_MAX_BYTES;return R=this.toString("hex",0,H).replace(/(.{2})/g,"$1 ").trim(),this.length>H&&(R+=" ... "),"<Buffer "+R+">"},r&&(f.prototype[r]=f.prototype.inspect),f.prototype.compare=function(R,H,fe,Ie,be){if(ft(R,i)&&(R=f.from(R,R.offset,R.byteLength)),!f.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(H===void 0&&(H=0),fe===void 0&&(fe=R?R.length:0),Ie===void 0&&(Ie=0),be===void 0&&(be=this.length),H<0||fe>R.length||Ie<0||be>this.length)throw new RangeError("out of range index");if(Ie>=be&&H>=fe)return 0;if(Ie>=be)return-1;if(H>=fe)return 1;if(H>>>=0,fe>>>=0,Ie>>>=0,be>>>=0,this===R)return 0;let Ee=be-Ie,le=fe-H;const ct=Math.min(Ee,le),yt=this.slice(Ie,be),P=R.slice(H,fe);for(let Be=0;Be<ct;++Be)if(yt[Be]!==P[Be]){Ee=yt[Be],le=P[Be];break}return Ee<le?-1:le<Ee?1:0};function B(ge,R,H,fe,Ie){if(ge.length===0)return-1;if(typeof H=="string"?(fe=H,H=0):H>2147483647?H=2147483647:H<-2147483648&&(H=-2147483648),H=+H,Et(H)&&(H=Ie?0:ge.length-1),H<0&&(H=ge.length+H),H>=ge.length){if(Ie)return-1;H=ge.length-1}else if(H<0)if(Ie)H=0;else return-1;if(typeof R=="string"&&(R=f.from(R,fe)),f.isBuffer(R))return R.length===0?-1:W(ge,R,H,fe,Ie);if(typeof R=="number")return R=R&255,typeof i.prototype.indexOf=="function"?Ie?i.prototype.indexOf.call(ge,R,H):i.prototype.lastIndexOf.call(ge,R,H):W(ge,[R],H,fe,Ie);throw new TypeError("val must be string, number or Buffer")}function W(ge,R,H,fe,Ie){let be=1,Ee=ge.length,le=R.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(ge.length<2||R.length<2)return-1;be=2,Ee/=2,le/=2,H/=2}function ct(P,Be){return be===1?P[Be]:P.readUInt16BE(Be*be)}let yt;if(Ie){let P=-1;for(yt=H;yt<Ee;yt++)if(ct(ge,yt)===ct(R,P===-1?0:yt-P)){if(P===-1&&(P=yt),yt-P+1===le)return P*be}else P!==-1&&(yt-=yt-P),P=-1}else for(H+le>Ee&&(H=Ee-le),yt=H;yt>=0;yt--){let P=!0;for(let Be=0;Be<le;Be++)if(ct(ge,yt+Be)!==ct(R,Be)){P=!1;break}if(P)return yt}return-1}f.prototype.includes=function(R,H,fe){return this.indexOf(R,H,fe)!==-1},f.prototype.indexOf=function(R,H,fe){return B(this,R,H,fe,!0)},f.prototype.lastIndexOf=function(R,H,fe){return B(this,R,H,fe,!1)};function Q(ge,R,H,fe){H=Number(H)||0;const Ie=ge.length-H;fe?(fe=Number(fe),fe>Ie&&(fe=Ie)):fe=Ie;const be=R.length;fe>be/2&&(fe=be/2);let Ee;for(Ee=0;Ee<fe;++Ee){const le=parseInt(R.substr(Ee*2,2),16);if(Et(le))return Ee;ge[H+Ee]=le}return Ee}function M(ge,R,H,fe){return xt(_e(R,ge.length-H),ge,H,fe)}function K(ge,R,H,fe){return xt(Le(R),ge,H,fe)}function U(ge,R,H,fe){return xt(Ve(R),ge,H,fe)}function me(ge,R,H,fe){return xt(xe(R,ge.length-H),ge,H,fe)}f.prototype.write=function(R,H,fe,Ie){if(H===void 0)Ie="utf8",fe=this.length,H=0;else if(fe===void 0&&typeof H=="string")Ie=H,fe=this.length,H=0;else if(isFinite(H))H=H>>>0,isFinite(fe)?(fe=fe>>>0,Ie===void 0&&(Ie="utf8")):(Ie=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const be=this.length-H;if((fe===void 0||fe>be)&&(fe=be),R.length>0&&(fe<0||H<0)||H>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");let Ee=!1;for(;;)switch(Ie){case"hex":return Q(this,R,H,fe);case"utf8":case"utf-8":return M(this,R,H,fe);case"ascii":case"latin1":case"binary":return K(this,R,H,fe);case"base64":return U(this,R,H,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return me(this,R,H,fe);default:if(Ee)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),Ee=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function se(ge,R,H){return R===0&&H===ge.length?t.fromByteArray(ge):t.fromByteArray(ge.slice(R,H))}function ne(ge,R,H){H=Math.min(ge.length,H);const fe=[];let Ie=R;for(;Ie<H;){const be=ge[Ie];let Ee=null,le=be>239?4:be>223?3:be>191?2:1;if(Ie+le<=H){let ct,yt,P,Be;switch(le){case 1:be<128&&(Ee=be);break;case 2:ct=ge[Ie+1],(ct&192)===128&&(Be=(be&31)<<6|ct&63,Be>127&&(Ee=Be));break;case 3:ct=ge[Ie+1],yt=ge[Ie+2],(ct&192)===128&&(yt&192)===128&&(Be=(be&15)<<12|(ct&63)<<6|yt&63,Be>2047&&(Be<55296||Be>57343)&&(Ee=Be));break;case 4:ct=ge[Ie+1],yt=ge[Ie+2],P=ge[Ie+3],(ct&192)===128&&(yt&192)===128&&(P&192)===128&&(Be=(be&15)<<18|(ct&63)<<12|(yt&63)<<6|P&63,Be>65535&&Be<1114112&&(Ee=Be))}}Ee===null?(Ee=65533,le=1):Ee>65535&&(Ee-=65536,fe.push(Ee>>>10&1023|55296),Ee=56320|Ee&1023),fe.push(Ee),Ie+=le}return ae(fe)}const ee=4096;function ae(ge){const R=ge.length;if(R<=ee)return String.fromCharCode.apply(String,ge);let H="",fe=0;for(;fe<R;)H+=String.fromCharCode.apply(String,ge.slice(fe,fe+=ee));return H}function G(ge,R,H){let fe="";H=Math.min(ge.length,H);for(let Ie=R;Ie<H;++Ie)fe+=String.fromCharCode(ge[Ie]&127);return fe}function Y(ge,R,H){let fe="";H=Math.min(ge.length,H);for(let Ie=R;Ie<H;++Ie)fe+=String.fromCharCode(ge[Ie]);return fe}function J(ge,R,H){const fe=ge.length;(!R||R<0)&&(R=0),(!H||H<0||H>fe)&&(H=fe);let Ie="";for(let be=R;be<H;++be)Ie+=Lt[ge[be]];return Ie}function re(ge,R,H){const fe=ge.slice(R,H);let Ie="";for(let be=0;be<fe.length-1;be+=2)Ie+=String.fromCharCode(fe[be]+fe[be+1]*256);return Ie}f.prototype.slice=function(R,H){const fe=this.length;R=~~R,H=H===void 0?fe:~~H,R<0?(R+=fe,R<0&&(R=0)):R>fe&&(R=fe),H<0?(H+=fe,H<0&&(H=0)):H>fe&&(H=fe),H<R&&(H=R);const Ie=this.subarray(R,H);return Object.setPrototypeOf(Ie,f.prototype),Ie};function we(ge,R,H){if(ge%1!==0||ge<0)throw new RangeError("offset is not uint");if(ge+R>H)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(R,H,fe){R=R>>>0,H=H>>>0,fe||we(R,H,this.length);let Ie=this[R],be=1,Ee=0;for(;++Ee<H&&(be*=256);)Ie+=this[R+Ee]*be;return Ie},f.prototype.readUintBE=f.prototype.readUIntBE=function(R,H,fe){R=R>>>0,H=H>>>0,fe||we(R,H,this.length);let Ie=this[R+--H],be=1;for(;H>0&&(be*=256);)Ie+=this[R+--H]*be;return Ie},f.prototype.readUint8=f.prototype.readUInt8=function(R,H){return R=R>>>0,H||we(R,1,this.length),this[R]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(R,H){return R=R>>>0,H||we(R,2,this.length),this[R]|this[R+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(R,H){return R=R>>>0,H||we(R,2,this.length),this[R]<<8|this[R+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(R,H){return R=R>>>0,H||we(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(R,H){return R=R>>>0,H||we(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},f.prototype.readBigUInt64LE=Tt(function(R){R=R>>>0,Ne(R,"offset");const H=this[R],fe=this[R+7];(H===void 0||fe===void 0)&&ce(R,this.length-8);const Ie=H+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,be=this[++R]+this[++R]*2**8+this[++R]*2**16+fe*2**24;return BigInt(Ie)+(BigInt(be)<<BigInt(32))}),f.prototype.readBigUInt64BE=Tt(function(R){R=R>>>0,Ne(R,"offset");const H=this[R],fe=this[R+7];(H===void 0||fe===void 0)&&ce(R,this.length-8);const Ie=H*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],be=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+fe;return(BigInt(Ie)<<BigInt(32))+BigInt(be)}),f.prototype.readIntLE=function(R,H,fe){R=R>>>0,H=H>>>0,fe||we(R,H,this.length);let Ie=this[R],be=1,Ee=0;for(;++Ee<H&&(be*=256);)Ie+=this[R+Ee]*be;return be*=128,Ie>=be&&(Ie-=Math.pow(2,8*H)),Ie},f.prototype.readIntBE=function(R,H,fe){R=R>>>0,H=H>>>0,fe||we(R,H,this.length);let Ie=H,be=1,Ee=this[R+--Ie];for(;Ie>0&&(be*=256);)Ee+=this[R+--Ie]*be;return be*=128,Ee>=be&&(Ee-=Math.pow(2,8*H)),Ee},f.prototype.readInt8=function(R,H){return R=R>>>0,H||we(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},f.prototype.readInt16LE=function(R,H){R=R>>>0,H||we(R,2,this.length);const fe=this[R]|this[R+1]<<8;return fe&32768?fe|4294901760:fe},f.prototype.readInt16BE=function(R,H){R=R>>>0,H||we(R,2,this.length);const fe=this[R+1]|this[R]<<8;return fe&32768?fe|4294901760:fe},f.prototype.readInt32LE=function(R,H){return R=R>>>0,H||we(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},f.prototype.readInt32BE=function(R,H){return R=R>>>0,H||we(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},f.prototype.readBigInt64LE=Tt(function(R){R=R>>>0,Ne(R,"offset");const H=this[R],fe=this[R+7];(H===void 0||fe===void 0)&&ce(R,this.length-8);const Ie=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(fe<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(H+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),f.prototype.readBigInt64BE=Tt(function(R){R=R>>>0,Ne(R,"offset");const H=this[R],fe=this[R+7];(H===void 0||fe===void 0)&&ce(R,this.length-8);const Ie=(H<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+fe)}),f.prototype.readFloatLE=function(R,H){return R=R>>>0,H||we(R,4,this.length),n.read(this,R,!0,23,4)},f.prototype.readFloatBE=function(R,H){return R=R>>>0,H||we(R,4,this.length),n.read(this,R,!1,23,4)},f.prototype.readDoubleLE=function(R,H){return R=R>>>0,H||we(R,8,this.length),n.read(this,R,!0,52,8)},f.prototype.readDoubleBE=function(R,H){return R=R>>>0,H||we(R,8,this.length),n.read(this,R,!1,52,8)};function ke(ge,R,H,fe,Ie,be){if(!f.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>Ie||R<be)throw new RangeError('"value" argument is out of bounds');if(H+fe>ge.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(R,H,fe,Ie){if(R=+R,H=H>>>0,fe=fe>>>0,!Ie){const le=Math.pow(2,8*fe)-1;ke(this,R,H,fe,le,0)}let be=1,Ee=0;for(this[H]=R&255;++Ee<fe&&(be*=256);)this[H+Ee]=R/be&255;return H+fe},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(R,H,fe,Ie){if(R=+R,H=H>>>0,fe=fe>>>0,!Ie){const le=Math.pow(2,8*fe)-1;ke(this,R,H,fe,le,0)}let be=fe-1,Ee=1;for(this[H+be]=R&255;--be>=0&&(Ee*=256);)this[H+be]=R/Ee&255;return H+fe},f.prototype.writeUint8=f.prototype.writeUInt8=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,1,255,0),this[H]=R&255,H+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,2,65535,0),this[H]=R&255,this[H+1]=R>>>8,H+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,2,65535,0),this[H]=R>>>8,this[H+1]=R&255,H+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,4,4294967295,0),this[H+3]=R>>>24,this[H+2]=R>>>16,this[H+1]=R>>>8,this[H]=R&255,H+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,4,4294967295,0),this[H]=R>>>24,this[H+1]=R>>>16,this[H+2]=R>>>8,this[H+3]=R&255,H+4};function Me(ge,R,H,fe,Ie){Ce(R,fe,Ie,ge,H,7);let be=Number(R&BigInt(4294967295));ge[H++]=be,be=be>>8,ge[H++]=be,be=be>>8,ge[H++]=be,be=be>>8,ge[H++]=be;let Ee=Number(R>>BigInt(32)&BigInt(4294967295));return ge[H++]=Ee,Ee=Ee>>8,ge[H++]=Ee,Ee=Ee>>8,ge[H++]=Ee,Ee=Ee>>8,ge[H++]=Ee,H}function Pe(ge,R,H,fe,Ie){Ce(R,fe,Ie,ge,H,7);let be=Number(R&BigInt(4294967295));ge[H+7]=be,be=be>>8,ge[H+6]=be,be=be>>8,ge[H+5]=be,be=be>>8,ge[H+4]=be;let Ee=Number(R>>BigInt(32)&BigInt(4294967295));return ge[H+3]=Ee,Ee=Ee>>8,ge[H+2]=Ee,Ee=Ee>>8,ge[H+1]=Ee,Ee=Ee>>8,ge[H]=Ee,H+8}f.prototype.writeBigUInt64LE=Tt(function(R,H=0){return Me(this,R,H,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=Tt(function(R,H=0){return Pe(this,R,H,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(R,H,fe,Ie){if(R=+R,H=H>>>0,!Ie){const ct=Math.pow(2,8*fe-1);ke(this,R,H,fe,ct-1,-ct)}let be=0,Ee=1,le=0;for(this[H]=R&255;++be<fe&&(Ee*=256);)R<0&&le===0&&this[H+be-1]!==0&&(le=1),this[H+be]=(R/Ee>>0)-le&255;return H+fe},f.prototype.writeIntBE=function(R,H,fe,Ie){if(R=+R,H=H>>>0,!Ie){const ct=Math.pow(2,8*fe-1);ke(this,R,H,fe,ct-1,-ct)}let be=fe-1,Ee=1,le=0;for(this[H+be]=R&255;--be>=0&&(Ee*=256);)R<0&&le===0&&this[H+be+1]!==0&&(le=1),this[H+be]=(R/Ee>>0)-le&255;return H+fe},f.prototype.writeInt8=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,1,127,-128),R<0&&(R=255+R+1),this[H]=R&255,H+1},f.prototype.writeInt16LE=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,2,32767,-32768),this[H]=R&255,this[H+1]=R>>>8,H+2},f.prototype.writeInt16BE=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,2,32767,-32768),this[H]=R>>>8,this[H+1]=R&255,H+2},f.prototype.writeInt32LE=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,4,2147483647,-2147483648),this[H]=R&255,this[H+1]=R>>>8,this[H+2]=R>>>16,this[H+3]=R>>>24,H+4},f.prototype.writeInt32BE=function(R,H,fe){return R=+R,H=H>>>0,fe||ke(this,R,H,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[H]=R>>>24,this[H+1]=R>>>16,this[H+2]=R>>>8,this[H+3]=R&255,H+4},f.prototype.writeBigInt64LE=Tt(function(R,H=0){return Me(this,R,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=Tt(function(R,H=0){return Pe(this,R,H,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(ge,R,H,fe,Ie,be){if(H+fe>ge.length)throw new RangeError("Index out of range");if(H<0)throw new RangeError("Index out of range")}function Ae(ge,R,H,fe,Ie){return R=+R,H=H>>>0,Ie||Re(ge,R,H,4),n.write(ge,R,H,fe,23,4),H+4}f.prototype.writeFloatLE=function(R,H,fe){return Ae(this,R,H,!0,fe)},f.prototype.writeFloatBE=function(R,H,fe){return Ae(this,R,H,!1,fe)};function He(ge,R,H,fe,Ie){return R=+R,H=H>>>0,Ie||Re(ge,R,H,8),n.write(ge,R,H,fe,52,8),H+8}f.prototype.writeDoubleLE=function(R,H,fe){return He(this,R,H,!0,fe)},f.prototype.writeDoubleBE=function(R,H,fe){return He(this,R,H,!1,fe)},f.prototype.copy=function(R,H,fe,Ie){if(!f.isBuffer(R))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!Ie&&Ie!==0&&(Ie=this.length),H>=R.length&&(H=R.length),H||(H=0),Ie>0&&Ie<fe&&(Ie=fe),Ie===fe||R.length===0||this.length===0)return 0;if(H<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),R.length-H<Ie-fe&&(Ie=R.length-H+fe);const be=Ie-fe;return this===R&&typeof i.prototype.copyWithin=="function"?this.copyWithin(H,fe,Ie):i.prototype.set.call(R,this.subarray(fe,Ie),H),be},f.prototype.fill=function(R,H,fe,Ie){if(typeof R=="string"){if(typeof H=="string"?(Ie=H,H=0,fe=this.length):typeof fe=="string"&&(Ie=fe,fe=this.length),Ie!==void 0&&typeof Ie!="string")throw new TypeError("encoding must be a string");if(typeof Ie=="string"&&!f.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(R.length===1){const Ee=R.charCodeAt(0);(Ie==="utf8"&&Ee<128||Ie==="latin1")&&(R=Ee)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(H<0||this.length<H||this.length<fe)throw new RangeError("Out of range index");if(fe<=H)return this;H=H>>>0,fe=fe===void 0?this.length:fe>>>0,R||(R=0);let be;if(typeof R=="number")for(be=H;be<fe;++be)this[be]=R;else{const Ee=f.isBuffer(R)?R:f.from(R,Ie),le=Ee.length;if(le===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(be=0;be<fe-H;++be)this[be+H]=Ee[be%le]}return this};const st={};function Oe(ge,R,H){st[ge]=class extends H{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ge}]`,this.stack,delete this.name}get code(){return ge}set code(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}toString(){return`${this.name} [${ge}]: ${this.message}`}}}Oe("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?`${ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Oe("ERR_INVALID_ARG_TYPE",function(ge,R){return`The "${ge}" argument must be of type number. Received type ${typeof R}`},TypeError),Oe("ERR_OUT_OF_RANGE",function(ge,R,H){let fe=`The value of "${ge}" is out of range.`,Ie=H;return Number.isInteger(H)&&Math.abs(H)>2**32?Ie=Te(String(H)):typeof H=="bigint"&&(Ie=String(H),(H>BigInt(2)**BigInt(32)||H<-(BigInt(2)**BigInt(32)))&&(Ie=Te(Ie)),Ie+="n"),fe+=` It must be ${R}. Received ${Ie}`,fe},RangeError);function Te(ge){let R="",H=ge.length;const fe=ge[0]==="-"?1:0;for(;H>=fe+4;H-=3)R=`_${ge.slice(H-3,H)}${R}`;return`${ge.slice(0,H)}${R}`}function z(ge,R,H){Ne(R,"offset"),(ge[R]===void 0||ge[R+H]===void 0)&&ce(R,ge.length-(H+1))}function Ce(ge,R,H,fe,Ie,be){if(ge>H||ge<R){const Ee=typeof R=="bigint"?"n":"";let le;throw R===0||R===BigInt(0)?le=`>= 0${Ee} and < 2${Ee} ** ${(be+1)*8}${Ee}`:le=`>= -(2${Ee} ** ${(be+1)*8-1}${Ee}) and < 2 ** ${(be+1)*8-1}${Ee}`,new st.ERR_OUT_OF_RANGE("value",le,ge)}z(fe,Ie,be)}function Ne(ge,R){if(typeof ge!="number")throw new st.ERR_INVALID_ARG_TYPE(R,"number",ge)}function ce(ge,R,H){throw Math.floor(ge)!==ge?(Ne(ge,H),new st.ERR_OUT_OF_RANGE("offset","an integer",ge)):R<0?new st.ERR_BUFFER_OUT_OF_BOUNDS:new st.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${R}`,ge)}const ie=/[^+/0-9A-Za-z-_]/g;function X(ge){if(ge=ge.split("=")[0],ge=ge.trim().replace(ie,""),ge.length<2)return"";for(;ge.length%4!==0;)ge=ge+"=";return ge}function _e(ge,R){R=R||1/0;let H;const fe=ge.length;let Ie=null;const be=[];for(let Ee=0;Ee<fe;++Ee){if(H=ge.charCodeAt(Ee),H>55295&&H<57344){if(!Ie){if(H>56319){(R-=3)>-1&&be.push(239,191,189);continue}else if(Ee+1===fe){(R-=3)>-1&&be.push(239,191,189);continue}Ie=H;continue}if(H<56320){(R-=3)>-1&&be.push(239,191,189),Ie=H;continue}H=(Ie-55296<<10|H-56320)+65536}else Ie&&(R-=3)>-1&&be.push(239,191,189);if(Ie=null,H<128){if((R-=1)<0)break;be.push(H)}else if(H<2048){if((R-=2)<0)break;be.push(H>>6|192,H&63|128)}else if(H<65536){if((R-=3)<0)break;be.push(H>>12|224,H>>6&63|128,H&63|128)}else if(H<1114112){if((R-=4)<0)break;be.push(H>>18|240,H>>12&63|128,H>>6&63|128,H&63|128)}else throw new Error("Invalid code point")}return be}function Le(ge){const R=[];for(let H=0;H<ge.length;++H)R.push(ge.charCodeAt(H)&255);return R}function xe(ge,R){let H,fe,Ie;const be=[];for(let Ee=0;Ee<ge.length&&!((R-=2)<0);++Ee)H=ge.charCodeAt(Ee),fe=H>>8,Ie=H%256,be.push(Ie),be.push(fe);return be}function Ve(ge){return t.toByteArray(X(ge))}function xt(ge,R,H,fe){let Ie;for(Ie=0;Ie<fe&&!(Ie+H>=R.length||Ie>=ge.length);++Ie)R[Ie+H]=ge[Ie];return Ie}function ft(ge,R){return ge instanceof R||ge!=null&&ge.constructor!=null&&ge.constructor.name!=null&&ge.constructor.name===R.name}function Et(ge){return ge!==ge}const Lt=function(){const ge="0123456789abcdef",R=new Array(256);for(let H=0;H<16;++H){const fe=H*16;for(let Ie=0;Ie<16;++Ie)R[fe+Ie]=ge[H]+ge[Ie]}return R}();function Tt(ge){return typeof BigInt>"u"?zt:ge}function zt(){throw new Error("BigInt not supported")}})(FC);const Gt=FC.Buffer,Tr=FC.Buffer;class RN extends EC{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;so(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;so(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);Py(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);Py(this.output,0),so(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,so(this.output,-a.length,0),so(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;so(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(so(this.output,-this._cursor,0),so(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);Py(this.output,0),so(this.output,0,0),this.output.write(this._prompt+r),this.line=r,so(this.output,-r.length,0),so(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(Py(this.output,0),so(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return Wa("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return Wa("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function jY(e,t,n,r){return"input"in e?new RN(e.input,e.output,e.completer,e.terminal):new RN(e,t,n,r)}function Py(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function so(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Pb{get position(){return this.flag&sd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&fw||this.inode.flags&_i.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&Ga||this.flag&Al))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&Ga||this.flag&Al))throw new Ue(ot.EPERM,"File not opened with a writeable mode");if(this.inode.flags&_i.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Om(this.inode)&&!Im(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Ga)throw new Ue(ot.EPERM,"File not opened with a readable mode");this.inode.flags&_i.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Om(this.inode)&&!Im(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>mr?-61441:mr)|t,(this._isSync||t>mr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,aj(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&_i.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Fb(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:es.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function Qa(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:es.descriptors).get(t);if(!a)throw new Ue(ot.EBADF);return a}function lj(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:es.descriptors).delete(t)}const MY=/[rwasx]{1,2}\+?/;function Rl(e){if(typeof e=="number")return e;if(!MY.test(e))throw new Ue(ot.EINVAL,"Invalid flag string: "+e);return PY(e)}function PY(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(ot.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?GD:uw;return e.includes("w")&&(t|=dw),e.includes("a")&&(t|=sd),e.includes("+")?t|=Al:e.includes("r")||(t|=Ga),e.includes("s")&&(t|=fw),e.includes("x")&&(t|=cw),t}function uj(e){let t=0;return e&Ga||(t|=ha),(e&Ga||e&Al)&&(t|=Gr),t}const Dm=new Map;$C("/",CY.create({label:"root"}));function $C(e,t){if(e[0]!="/"&&(e="/"+e),e=Ml.call(this,e),Dm.has(e))throw wi(new Ue(ot.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,Dm.set(e,t),HD(`Mounted ${t.name} on ${e}`),dm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function cj(e){if(e[0]!="/"&&(e="/"+e),e=Ml.call(this,e),!Dm.has(e)){Wa(e+" is already unmounted");return}Dm.delete(e),IC("Unmounted "+e)}function jn(e,t){const n=(t==null?void 0:t.root)||es.root;e=ln(er(n,e));const r=[...Dm].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(LY(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw BZ(new Ue(ot.EIO,"No file system",e))}function Ox(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function ar(e,t){typeof e.stack=="string"&&(e.stack=Ox(e.stack,t));try{e.message=Ox(e.message,t)}catch{}return e.path&&(e.path=Ox(e.path,t)),e}function dj(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||li),files:(t?BigInt:Number)(n.totalNodes||li),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function FY(e){var t,n,r,a,i,o,s;const u=this!==null&&this!==void 0?this:es;if(((t=u.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=u.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=u.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=u.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(ot.EPERM,"Can not chroot() as non-root user");(i=u.root)!==null&&i!==void 0||(u.root="/");const c=er(u.root,e);for(const f of(s=(o=u.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!f.path.startsWith(u.root))throw Ue.With("EBUSY",f.path,"chroot");f.path=f.path.slice(u.root.length)}if(c.length>u.root.length)throw new Ue(ot.EPERM,"Can not chroot() outside of current root");u.root=c}function LY(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class fj extends EC{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class hj extends fj{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?er(t.root,n):n,BY(this.realpath,this)}close(){super.emit("close"),zY(this.realpath,this)}[Symbol.dispose](){this.close()}}class $Y extends fj{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Wu(this.path);dY(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Wu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Mu=new Map;function BY(e,t){const n=ln(e);Mu.has(n)||Mu.set(n,new Set),Mu.get(n).add(t)}function zY(e,t){const n=ln(e);Mu.has(n)&&(Mu.get(n).delete(t),Mu.get(n).size===0&&Mu.delete(n))}function Fa(e,t,n){var r;e&&(n=er((r=e.root)!==null&&r!==void 0?r:"/",n)),n=ln(n);for(let a=n;a!="/";a=Zn(a)){const i=Mu.get(a);if(i)for(const o of i)o.emit("change",t,qD.call(o._context,a,n)||Jf(n))}}var C0=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},k0=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function UY(e,t){e=ln(e),t=ln(t);const n=jn(e,this),r=jn(t,this);if(!Wu.call(this,Zn(e)).hasAccess(Gr,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Fa(this,"rename",e.toString()),Fa(this,"change",t.toString());return}HC.call(this,t,qC(e)),UC.call(this,e),Fa(this,"rename",e.toString())}catch(a){throw ar(a,{[n.path]:e,[r.path]:t})}}function BC(e){e=ln(e);try{const{fs:t,path:n}=jn(dc.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==ot.ENOENT)return!1;throw t}}function Wu(e,t){e=ln(e);const{fs:n,path:r}=jn(dc.call(this,e),this);try{const a=n.statSync(r);if(pa&&!rr(this,a,ha))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Sd(a):new ql(a)}catch(a){throw ar(a,{[r]:e})}}function zC(e,t){e=ln(e);const{fs:n,path:r}=jn(e,this);try{const a=n.statSync(r);if(pa&&!rr(this,a,ha))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Sd(a):new ql(a)}catch(a){throw ar(a,{[r]:e})}}function qY(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=C0(n,Ed.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(ot.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{k0(n)}}function UC(e){e=ln(e);const{fs:t,path:n}=jn(e,this);try{if(pa&&!rr(this,t.statSync(n),Gr))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),Fa(this,"rename",e.toString())}catch(r){throw ar(r,{[n]:e})}}function Ed(e,t){var n;e=ln(e);const r=cc(t.mode,420),a=Rl(t.flag);e=t.preserveSymlinks?e:dc.call(this,e);const{fs:i,path:o}=jn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&uw))throw Ue.With("ENOENT",e,"_open");const c=i.statSync(Zn(o));if(!rr(this,c,Gr))throw Ue.With("EACCES",Zn(e),"_open");if(!Ko(c))throw Ue.With("ENOTDIR",Zn(e),"_open");if(!t.allowDirectory&&r&aa)throw Ue.With("EISDIR",e,"_open");if(!rr(this,c,Gr))throw Ue.With("EACCES",Zn(o),"_open");const{euid:f,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:es.credentials,m=i.createFileSync(o,{mode:r,uid:c.mode&S0?c.uid:f,gid:c.mode&E0?c.gid:h});return new Pb(this,e,i,o,a,m)}if(!rr(this,s,r)||!rr(this,s,uj(a)))throw Ue.With("EACCES",e,"_open");if(a&cw)throw Ue.With("EEXIST",e,"_open");const u=new Pb(this,e,i,o,a,s);if(a&dw&&u.truncate(0),!t.allowDirectory&&s.mode&aa)throw Ue.With("EISDIR",e,"_open");return u}function pw(e,t,n=DC){return Fb(Ed.call(this,e,{flag:t,mode:n}))}function mw(e,t,n){return Fb(Ed.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function pj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=C0(r,typeof e=="number"?Qa(this,e):Ed.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{k0(r)}}function qC(e,t={}){const n=Tl(t,null,"r",420);if(Rl(n.flag)&Ga)throw new Ue(ot.EINVAL,"Flag passed to readFile must allow for reading");const a=Tr.from(pj.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function HC(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","w+",420),i=Rl(a.flag);if(!(i&Ga||i&Al))throw new Ue(ot.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Tr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new Ue(ot.EINVAL,"Data not specified");C0(r,typeof e=="number"?Qa(this,e):Ed.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),Fa(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{k0(r)}}function HY(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","a+",420),i=Rl(a.flag);if(!(i&sd))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Tr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);C0(r,Ed.call(this,typeof e=="number"?Qa(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{k0(r)}}function VY(e,t){const n=Qa(this,e).stat();return t!=null&&t.bigint?new Sd(n):new ql(n)}function Cd(e){Qa(this,e).close(),lj(this,e)}function GY(e,t=0){if(t||(t=0),t<0)throw new Ue(ot.EINVAL);Qa(this,e).truncate(t)}function WY(e){Qa(this,e).sync()}function KY(e){Qa(this,e).datasync()}function ZY(e,t,n,r,a){let i,o,s,u;if(typeof t=="string"){u=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Tr.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,u=typeof a=="number"?a:null;const c=Qa(this,e);u??(u=c.position);const f=c.write(i,o,s,u);return Fa(this,"change",c.path),f}function YY(e,t,n,r,a){const i=Qa(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function VC(e,t,n){Qa(this,e).chown(t,n)}function GC(e,t){const n=cc(t,-1);if(n<0)throw new Ue(ot.EINVAL,"Invalid mode.");Qa(this,e).chmod(n)}function WC(e,t,n){Qa(this,e).utimes(Mb(t),Mb(n))}function mj(e){e=ln(e);const{fs:t,path:n}=jn(dc.call(this,e),this);try{const r=t.statSync(n);if(!Ko(r))throw Ue.With("ENOTDIR",n,"rmdir");if(pa&&!rr(this,r,Gr))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),Fa(this,"rename",e.toString())}catch(r){throw ar(r,{[n]:e})}}function KC(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:es.credentials;t=typeof t=="object"?t:{mode:t};const o=cc(t==null?void 0:t.mode,511);e=dc.call(this,e);const{fs:s,path:u,root:c}=jn(e,this),f={[u]:e},h=(m,g)=>{if(!rr(this,g,Gr))throw Ue.With("EACCES",Zn(m),"mkdir");const w=s.mkdirSync(m,{mode:o,uid:g.mode&S0?g.uid:a,gid:g.mode&E0?g.gid:i});return Fa(this,"rename",m),w};try{if(!(t!=null&&t.recursive)){h(u,s.statSync(Zn(u)));return}const m=[];for(let w=u,v=e;!s.existsSync(w);w=Zn(w),v=Zn(v))m.unshift(w),f[w]=v;if(!m.length)return;const g=[s.statSync(Zn(m[0]))];for(const[w,v]of m.entries())g.push(h(v,g[w]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw ar(m,f)}}function Eh(e,t){t=typeof t=="object"?t:{encoding:t},e=ln(e);const{fs:n,path:r}=jn(dc.call(this,e),this);let a;try{const o=n.statSync(r);if(pa&&!rr(this,o,ha))throw Ue.With("EACCES",r,"readdir");if(!Ko(o))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw ar(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(er(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new jm(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Tr.from(o)):i.push(o),!(!Ko(s)||!(t!=null&&t.recursive)))for(const u of Eh.call(this,er(e,o),t))u instanceof jm?(u.path=er(o,u.path),i.push(u)):Tr.isBuffer(u)?i.push(Tr.from(er(o,kC(u)))):i.push(er(o,u))}return i}function XY(e,t){if(e=ln(e),!Wu(Zn(e)).hasAccess(ha,this))throw Ue.With("EACCES",Zn(e),"link");if(t=ln(t),!Wu(Zn(t)).hasAccess(Gr,this))throw Ue.With("EACCES",Zn(t),"link");const{fs:n,path:r}=jn(e,this),a=jn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(pa&&!rr(this,n.statSync(r),ha))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw ar(i,{[r]:e,[a.path]:t})}}function JY(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(ot.EINVAL,"Invalid type: "+n);t=ln(t);const a=C0(r,Ed.call(this,t,{flag:"wx",mode:420}),!1);a.write(Xc(ln(e,!0))),a.chmod(Ul)}catch(a){r.error=a,r.hasError=!0}finally{k0(r)}}function Z2(e,t){const n=Tr.from(pj.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function QY(e,t,n){const r=pw.call(this,e,"r+");VC.call(this,r,t,n),Cd.call(this,r)}function eX(e,t,n){const r=mw.call(this,e,"r+");VC.call(this,r,t,n),Cd.call(this,r)}function tX(e,t){const n=pw.call(this,e,"r+");GC.call(this,n,t),Cd.call(this,n)}function nX(e,t){const n=mw.call(this,e,"r+");GC.call(this,n,t),Cd.call(this,n)}function gj(e,t,n){const r=pw.call(this,e,"r+");WC.call(this,r,t,n),Cd.call(this,r)}function rX(e,t,n){const r=mw.call(this,e,"r+");WC.call(this,r,t,n),Cd.call(this,r)}function Y2(e,t,n){try{const u=jn(t,e),c=u.fs.statSync(u.path);if(!Qf(c))return{...u,fullPath:t,stats:c};const f=Ml.call(e,Zn(t),Z2.call(e,t).toString());return Y2(e,f)}catch{}const{base:r,dir:a}=Es(t),i=a=="/"?"/":dc.call(e,a),o=er(i,r),s=jn(o,e);try{const u=s.fs.statSync(s.path);if(!Qf(u))return{...s,fullPath:o,stats:u};const c=Ml.call(e,i,Z2.call(e,o).toString());return Y2(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw ar(u,{[s.path]:o})}}function dc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=Y2(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Tr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function aX(e,t=384){if(!rr(this,Wu.call(this,e),t))throw new Ue(ot.EACCES)}function yj(e,t){e=ln(e);let n;try{n=zC.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&mr){case aa:if(t!=null&&t.recursive)for(const r of Eh.call(this,e))yj.call(this,er(e,r),t);mj.call(this,e);break;case Bo:case Ul:case wd:case _d:UC.call(this,e);break;case xd:case vd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}}function iX(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return KC.call(this,a),n=="buffer"?Tr.from(a):a}function bj(e,t,n){if(e=ln(e),t=ln(t),n&&n&jC&&BC(t))throw new Ue(ot.EEXIST,"Destination file already exists",t,"copyFile");HC.call(this,t,qC(e)),Fa(this,"rename",t.toString())}function oX(e,t,n){const r=Qa(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function sX(e,t,n){const r=Qa(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function lX(e,t){return e=ln(e),new ZC(e,this)}function vj(e,t,n){e=ln(e),t=ln(t);const r=zC.call(this,e);if(n!=null&&n.errorOnExist&&BC.call(this,t))throw new Ue(ot.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&mr){case aa:if(!(n!=null&&n.recursive))throw new Ue(ot.EISDIR,e+" is a directory (not copied)",e,"cp");KC.call(this,t,{recursive:!0});for(const a of Eh.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(er(e,a.name),er(t,a.name))||vj.call(this,er(e,a.name),er(t,a.name),n);break;case Bo:case Ul:bj.call(this,e,t);break;case wd:case _d:case xd:case vd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&gj.call(this,t,r.atime,r.mtime)}function uX(e,t){e=ln(e);const{fs:n}=jn(e,this);return dj(n,t==null?void 0:t.bigint)}function cX(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(u=>(u=u.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${u}$`))),o=[];function s(u){const c=Eh(u,{withFileTypes:r,encoding:"utf8"});for(const f of c){const h=r?f.path:u+"/"+f;a(r?f:h)||(Wu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&s(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&o.push(r?f.path:h.replace(/^\/+/g,"")))}}return s(n),o}class jm{get name(){return Jf(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return gY(this.stats)}isDirectory(){return Ko(this.stats)}isBlockDevice(){return Im(this.stats)}isCharacterDevice(){return Om(this.stats)}isSymbolicLink(){return Qf(this.stats)}isFIFO(){return bY(this.stats)}isSocket(){return yY(this.stats)}}class ZC{checkClosed(){if(this.closed)throw new Ue(ot.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await pc.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Eh.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var Dx={exports:{}},jx={exports:{}},Mx={},NN;function fc(){return NN||(NN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=f,n.toByteArray=m,n.fromByteArray=v;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function c(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var A=C===E?0:4-C%4;return[C,A]}function f(S){var E=c(S),C=E[0],A=E[1];return(C+A)*3/4-A}function h(S,E,C){return(E+C)*3/4-C}function m(S){var E,C=c(S),A=C[0],O=C[1],I=new i(h(S,A,O)),D=0,B=O>0?A-4:A,W;for(W=0;W<B;W+=4)E=a[S.charCodeAt(W)]<<18|a[S.charCodeAt(W+1)]<<12|a[S.charCodeAt(W+2)]<<6|a[S.charCodeAt(W+3)],I[D++]=E>>16&255,I[D++]=E>>8&255,I[D++]=E&255;return O===2&&(E=a[S.charCodeAt(W)]<<2|a[S.charCodeAt(W+1)]>>4,I[D++]=E&255),O===1&&(E=a[S.charCodeAt(W)]<<10|a[S.charCodeAt(W+1)]<<4|a[S.charCodeAt(W+2)]>>2,I[D++]=E>>8&255,I[D++]=E&255),I}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function w(S,E,C){for(var A,O=[],I=E;I<C;I+=3)A=(S[I]<<16&16711680)+(S[I+1]<<8&65280)+(S[I+2]&255),O.push(g(A));return O.join("")}function v(S){for(var E,C=S.length,A=C%3,O=[],I=16383,D=0,B=C-A;D<B;D+=I)O.push(w(S,D,D+I>B?B:D+I));return A===1?(E=S[C-1],O.push(r[E>>2]+r[E<<4&63]+"==")):A===2&&(E=(S[C-2]<<8)+S[C-1],O.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),O.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,C,A,O){var I,D,B=O*8-A-1,W=(1<<B)-1,Q=W>>1,M=-7,K=C?O-1:0,U=C?-1:1,me=S[E+K];for(K+=U,I=me&(1<<-M)-1,me>>=-M,M+=B;M>0;I=I*256+S[E+K],K+=U,M-=8);for(D=I&(1<<-M)-1,I>>=-M,M+=A;M>0;D=D*256+S[E+K],K+=U,M-=8);if(I===0)I=1-Q;else{if(I===W)return D?NaN:(me?-1:1)*(1/0);D=D+Math.pow(2,A),I=I-Q}return(me?-1:1)*D*Math.pow(2,I-A)},_.write=function(S,E,C,A,O,I){var D,B,W,Q=I*8-O-1,M=(1<<Q)-1,K=M>>1,U=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,me=A?0:I-1,se=A?1:-1,ne=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(B=isNaN(E)?1:0,D=M):(D=Math.floor(Math.log(E)/Math.LN2),E*(W=Math.pow(2,-D))<1&&(D--,W*=2),D+K>=1?E+=U/W:E+=U*Math.pow(2,1-K),E*W>=2&&(D++,W/=2),D+K>=M?(B=0,D=M):D+K>=1?(B=(E*W-1)*Math.pow(2,O),D=D+K):(B=E*Math.pow(2,K-1)*Math.pow(2,O),D=0));O>=8;S[C+me]=B&255,me+=se,B/=256,O-=8);for(D=D<<O|B,Q+=O;Q>0;S[C+me]=D&255,me+=se,D/=256,Q-=8);S[C+me-se]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=_,A=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=M,S.SlowBuffer=re,S.INSPECT_MAX_BYTES=50;const O=2147483647;S.kMaxLength=O;const{Uint8Array:I,ArrayBuffer:D,SharedArrayBuffer:B}=globalThis;M.TYPED_ARRAY_SUPPORT=W(),!M.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function W(){try{const q=new I(1),L={foo:function(){return 42}};return Object.setPrototypeOf(L,I.prototype),Object.setPrototypeOf(q,L),q.foo()===42}catch{return!1}}Object.defineProperty(M.prototype,"parent",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.buffer}}),Object.defineProperty(M.prototype,"offset",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.byteOffset}});function Q(q){if(q>O)throw new RangeError('The value "'+q+'" is invalid for option "size"');const L=new I(q);return Object.setPrototypeOf(L,M.prototype),L}function M(q,L,V){if(typeof q=="number"){if(typeof L=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return se(q)}return K(q,L,V)}M.poolSize=8192;function K(q,L,V){if(typeof q=="string")return ne(q,L);if(D.isView(q))return ae(q);if(q==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(pe(q,D)||q&&pe(q.buffer,D)||typeof B<"u"&&(pe(q,B)||q&&pe(q.buffer,B)))return G(q,L,V);if(typeof q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=q.valueOf&&q.valueOf();if(he!=null&&he!==q)return M.from(he,L,V);const de=Y(q);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof q[Symbol.toPrimitive]=="function")return M.from(q[Symbol.toPrimitive]("string"),L,V);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}M.from=function(q,L,V){return K(q,L,V)},Object.setPrototypeOf(M.prototype,I.prototype),Object.setPrototypeOf(M,I);function U(q){if(typeof q!="number")throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function me(q,L,V){return U(q),q<=0?Q(q):L!==void 0?typeof V=="string"?Q(q).fill(L,V):Q(q).fill(L):Q(q)}M.alloc=function(q,L,V){return me(q,L,V)};function se(q){return U(q),Q(q<0?0:J(q)|0)}M.allocUnsafe=function(q){return se(q)},M.allocUnsafeSlow=function(q){return se(q)};function ne(q,L){if((typeof L!="string"||L==="")&&(L="utf8"),!M.isEncoding(L))throw new TypeError("Unknown encoding: "+L);const V=we(q,L)|0;let he=Q(V);const de=he.write(q,L);return de!==V&&(he=he.slice(0,de)),he}function ee(q){const L=q.length<0?0:J(q.length)|0,V=Q(L);for(let he=0;he<L;he+=1)V[he]=q[he]&255;return V}function ae(q){if(pe(q,I)){const L=new I(q);return G(L.buffer,L.byteOffset,L.byteLength)}return ee(q)}function G(q,L,V){if(L<0||q.byteLength<L)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<L+(V||0))throw new RangeError('"length" is outside of buffer bounds');let he;return L===void 0&&V===void 0?he=new I(q):V===void 0?he=new I(q,L):he=new I(q,L,V),Object.setPrototypeOf(he,M.prototype),he}function Y(q){if(M.isBuffer(q)){const L=J(q.length)|0,V=Q(L);return V.length===0||q.copy(V,0,0,L),V}if(q.length!==void 0)return typeof q.length!="number"||De(q.length)?Q(0):ee(q);if(q.type==="Buffer"&&Array.isArray(q.data))return ee(q.data)}function J(q){if(q>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return q|0}function re(q){return+q!=q&&(q=0),M.alloc(+q)}M.isBuffer=function(L){return L!=null&&L._isBuffer===!0&&L!==M.prototype},M.compare=function(L,V){if(pe(L,I)&&(L=M.from(L,L.offset,L.byteLength)),pe(V,I)&&(V=M.from(V,V.offset,V.byteLength)),!M.isBuffer(L)||!M.isBuffer(V))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(L===V)return 0;let he=L.length,de=V.length;for(let Fe=0,it=Math.min(he,de);Fe<it;++Fe)if(L[Fe]!==V[Fe]){he=L[Fe],de=V[Fe];break}return he<de?-1:de<he?1:0},M.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(L,V){if(!Array.isArray(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return M.alloc(0);let he;if(V===void 0)for(V=0,he=0;he<L.length;++he)V+=L[he].length;const de=M.allocUnsafe(V);let Fe=0;for(he=0;he<L.length;++he){let it=L[he];if(pe(it,I))Fe+it.length>de.length?(M.isBuffer(it)||(it=M.from(it)),it.copy(de,Fe)):I.prototype.set.call(de,it,Fe);else if(M.isBuffer(it))it.copy(de,Fe);else throw new TypeError('"list" argument must be an Array of Buffers');Fe+=it.length}return de};function we(q,L){if(M.isBuffer(q))return q.length;if(D.isView(q)||pe(q,D))return q.byteLength;if(typeof q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);const V=q.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&V===0)return 0;let de=!1;for(;;)switch(L){case"ascii":case"latin1":case"binary":return V;case"utf8":case"utf-8":return ct(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V*2;case"hex":return V>>>1;case"base64":return Be(q).length;default:if(de)return he?-1:ct(q).length;L=(""+L).toLowerCase(),de=!0}}M.byteLength=we;function ke(q,L,V){let he=!1;if((L===void 0||L<0)&&(L=0),L>this.length||((V===void 0||V>this.length)&&(V=this.length),V<=0)||(V>>>=0,L>>>=0,V<=L))return"";for(q||(q="utf8");;)switch(q){case"hex":return _e(this,L,V);case"utf8":case"utf-8":return Ce(this,L,V);case"ascii":return ie(this,L,V);case"latin1":case"binary":return X(this,L,V);case"base64":return z(this,L,V);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Le(this,L,V);default:if(he)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),he=!0}}M.prototype._isBuffer=!0;function Me(q,L,V){const he=q[L];q[L]=q[V],q[V]=he}M.prototype.swap16=function(){const L=this.length;if(L%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let V=0;V<L;V+=2)Me(this,V,V+1);return this},M.prototype.swap32=function(){const L=this.length;if(L%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let V=0;V<L;V+=4)Me(this,V,V+3),Me(this,V+1,V+2);return this},M.prototype.swap64=function(){const L=this.length;if(L%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let V=0;V<L;V+=8)Me(this,V,V+7),Me(this,V+1,V+6),Me(this,V+2,V+5),Me(this,V+3,V+4);return this},M.prototype.toString=function(){const L=this.length;return L===0?"":arguments.length===0?Ce(this,0,L):ke.apply(this,arguments)},M.prototype.toLocaleString=M.prototype.toString,M.prototype.equals=function(L){if(!M.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L?!0:M.compare(this,L)===0},M.prototype.inspect=function(){let L="";const V=S.INSPECT_MAX_BYTES;return L=this.toString("hex",0,V).replace(/(.{2})/g,"$1 ").trim(),this.length>V&&(L+=" ... "),"<Buffer "+L+">"},A&&(M.prototype[A]=M.prototype.inspect),M.prototype.compare=function(L,V,he,de,Fe){if(pe(L,I)&&(L=M.from(L,L.offset,L.byteLength)),!M.isBuffer(L))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof L);if(V===void 0&&(V=0),he===void 0&&(he=L?L.length:0),de===void 0&&(de=0),Fe===void 0&&(Fe=this.length),V<0||he>L.length||de<0||Fe>this.length)throw new RangeError("out of range index");if(de>=Fe&&V>=he)return 0;if(de>=Fe)return-1;if(V>=he)return 1;if(V>>>=0,he>>>=0,de>>>=0,Fe>>>=0,this===L)return 0;let it=Fe-de,Dt=he-V;const un=Math.min(it,Dt),Bt=this.slice(de,Fe),Vt=L.slice(V,he);for(let Xt=0;Xt<un;++Xt)if(Bt[Xt]!==Vt[Xt]){it=Bt[Xt],Dt=Vt[Xt];break}return it<Dt?-1:Dt<it?1:0};function Pe(q,L,V,he,de){if(q.length===0)return-1;if(typeof V=="string"?(he=V,V=0):V>2147483647?V=2147483647:V<-2147483648&&(V=-2147483648),V=+V,De(V)&&(V=de?0:q.length-1),V<0&&(V=q.length+V),V>=q.length){if(de)return-1;V=q.length-1}else if(V<0)if(de)V=0;else return-1;if(typeof L=="string"&&(L=M.from(L,he)),M.isBuffer(L))return L.length===0?-1:Re(q,L,V,he,de);if(typeof L=="number")return L=L&255,typeof I.prototype.indexOf=="function"?de?I.prototype.indexOf.call(q,L,V):I.prototype.lastIndexOf.call(q,L,V):Re(q,[L],V,he,de);throw new TypeError("val must be string, number or Buffer")}function Re(q,L,V,he,de){let Fe=1,it=q.length,Dt=L.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(q.length<2||L.length<2)return-1;Fe=2,it/=2,Dt/=2,V/=2}function un(Vt,Xt){return Fe===1?Vt[Xt]:Vt.readUInt16BE(Xt*Fe)}let Bt;if(de){let Vt=-1;for(Bt=V;Bt<it;Bt++)if(un(q,Bt)===un(L,Vt===-1?0:Bt-Vt)){if(Vt===-1&&(Vt=Bt),Bt-Vt+1===Dt)return Vt*Fe}else Vt!==-1&&(Bt-=Bt-Vt),Vt=-1}else for(V+Dt>it&&(V=it-Dt),Bt=V;Bt>=0;Bt--){let Vt=!0;for(let Xt=0;Xt<Dt;Xt++)if(un(q,Bt+Xt)!==un(L,Xt)){Vt=!1;break}if(Vt)return Bt}return-1}M.prototype.includes=function(L,V,he){return this.indexOf(L,V,he)!==-1},M.prototype.indexOf=function(L,V,he){return Pe(this,L,V,he,!0)},M.prototype.lastIndexOf=function(L,V,he){return Pe(this,L,V,he,!1)};function Ae(q,L,V,he){V=Number(V)||0;const de=q.length-V;he?(he=Number(he),he>de&&(he=de)):he=de;const Fe=L.length;he>Fe/2&&(he=Fe/2);let it;for(it=0;it<he;++it){const Dt=parseInt(L.substr(it*2,2),16);if(De(Dt))return it;q[V+it]=Dt}return it}function He(q,L,V,he){return et(ct(L,q.length-V),q,V,he)}function st(q,L,V,he){return et(yt(L),q,V,he)}function Oe(q,L,V,he){return et(Be(L),q,V,he)}function Te(q,L,V,he){return et(P(L,q.length-V),q,V,he)}M.prototype.write=function(L,V,he,de){if(V===void 0)de="utf8",he=this.length,V=0;else if(he===void 0&&typeof V=="string")de=V,he=this.length,V=0;else if(isFinite(V))V=V>>>0,isFinite(he)?(he=he>>>0,de===void 0&&(de="utf8")):(de=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Fe=this.length-V;if((he===void 0||he>Fe)&&(he=Fe),L.length>0&&(he<0||V<0)||V>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");let it=!1;for(;;)switch(de){case"hex":return Ae(this,L,V,he);case"utf8":case"utf-8":return He(this,L,V,he);case"ascii":case"latin1":case"binary":return st(this,L,V,he);case"base64":return Oe(this,L,V,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,L,V,he);default:if(it)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),it=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(q,L,V){return L===0&&V===q.length?E.fromByteArray(q):E.fromByteArray(q.slice(L,V))}function Ce(q,L,V){V=Math.min(q.length,V);const he=[];let de=L;for(;de<V;){const Fe=q[de];let it=null,Dt=Fe>239?4:Fe>223?3:Fe>191?2:1;if(de+Dt<=V){let un,Bt,Vt,Xt;switch(Dt){case 1:Fe<128&&(it=Fe);break;case 2:un=q[de+1],(un&192)===128&&(Xt=(Fe&31)<<6|un&63,Xt>127&&(it=Xt));break;case 3:un=q[de+1],Bt=q[de+2],(un&192)===128&&(Bt&192)===128&&(Xt=(Fe&15)<<12|(un&63)<<6|Bt&63,Xt>2047&&(Xt<55296||Xt>57343)&&(it=Xt));break;case 4:un=q[de+1],Bt=q[de+2],Vt=q[de+3],(un&192)===128&&(Bt&192)===128&&(Vt&192)===128&&(Xt=(Fe&15)<<18|(un&63)<<12|(Bt&63)<<6|Vt&63,Xt>65535&&Xt<1114112&&(it=Xt))}}it===null?(it=65533,Dt=1):it>65535&&(it-=65536,he.push(it>>>10&1023|55296),it=56320|it&1023),he.push(it),de+=Dt}return ce(he)}const Ne=4096;function ce(q){const L=q.length;if(L<=Ne)return String.fromCharCode.apply(String,q);let V="",he=0;for(;he<L;)V+=String.fromCharCode.apply(String,q.slice(he,he+=Ne));return V}function ie(q,L,V){let he="";V=Math.min(q.length,V);for(let de=L;de<V;++de)he+=String.fromCharCode(q[de]&127);return he}function X(q,L,V){let he="";V=Math.min(q.length,V);for(let de=L;de<V;++de)he+=String.fromCharCode(q[de]);return he}function _e(q,L,V){const he=q.length;(!L||L<0)&&(L=0),(!V||V<0||V>he)&&(V=he);let de="";for(let Fe=L;Fe<V;++Fe)de+=Ke[q[Fe]];return de}function Le(q,L,V){const he=q.slice(L,V);let de="";for(let Fe=0;Fe<he.length-1;Fe+=2)de+=String.fromCharCode(he[Fe]+he[Fe+1]*256);return de}M.prototype.slice=function(L,V){const he=this.length;L=~~L,V=V===void 0?he:~~V,L<0?(L+=he,L<0&&(L=0)):L>he&&(L=he),V<0?(V+=he,V<0&&(V=0)):V>he&&(V=he),V<L&&(V=L);const de=this.subarray(L,V);return Object.setPrototypeOf(de,M.prototype),de};function xe(q,L,V){if(q%1!==0||q<0)throw new RangeError("offset is not uint");if(q+L>V)throw new RangeError("Trying to access beyond buffer length")}M.prototype.readUintLE=M.prototype.readUIntLE=function(L,V,he){L=L>>>0,V=V>>>0,he||xe(L,V,this.length);let de=this[L],Fe=1,it=0;for(;++it<V&&(Fe*=256);)de+=this[L+it]*Fe;return de},M.prototype.readUintBE=M.prototype.readUIntBE=function(L,V,he){L=L>>>0,V=V>>>0,he||xe(L,V,this.length);let de=this[L+--V],Fe=1;for(;V>0&&(Fe*=256);)de+=this[L+--V]*Fe;return de},M.prototype.readUint8=M.prototype.readUInt8=function(L,V){return L=L>>>0,V||xe(L,1,this.length),this[L]},M.prototype.readUint16LE=M.prototype.readUInt16LE=function(L,V){return L=L>>>0,V||xe(L,2,this.length),this[L]|this[L+1]<<8},M.prototype.readUint16BE=M.prototype.readUInt16BE=function(L,V){return L=L>>>0,V||xe(L,2,this.length),this[L]<<8|this[L+1]},M.prototype.readUint32LE=M.prototype.readUInt32LE=function(L,V){return L=L>>>0,V||xe(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+this[L+3]*16777216},M.prototype.readUint32BE=M.prototype.readUInt32BE=function(L,V){return L=L>>>0,V||xe(L,4,this.length),this[L]*16777216+(this[L+1]<<16|this[L+2]<<8|this[L+3])},M.prototype.readBigUInt64LE=Ct(function(L){L=L>>>0,Ie(L,"offset");const V=this[L],he=this[L+7];(V===void 0||he===void 0)&&be(L,this.length-8);const de=V+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24,Fe=this[++L]+this[++L]*2**8+this[++L]*2**16+he*2**24;return BigInt(de)+(BigInt(Fe)<<BigInt(32))}),M.prototype.readBigUInt64BE=Ct(function(L){L=L>>>0,Ie(L,"offset");const V=this[L],he=this[L+7];(V===void 0||he===void 0)&&be(L,this.length-8);const de=V*2**24+this[++L]*2**16+this[++L]*2**8+this[++L],Fe=this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+he;return(BigInt(de)<<BigInt(32))+BigInt(Fe)}),M.prototype.readIntLE=function(L,V,he){L=L>>>0,V=V>>>0,he||xe(L,V,this.length);let de=this[L],Fe=1,it=0;for(;++it<V&&(Fe*=256);)de+=this[L+it]*Fe;return Fe*=128,de>=Fe&&(de-=Math.pow(2,8*V)),de},M.prototype.readIntBE=function(L,V,he){L=L>>>0,V=V>>>0,he||xe(L,V,this.length);let de=V,Fe=1,it=this[L+--de];for(;de>0&&(Fe*=256);)it+=this[L+--de]*Fe;return Fe*=128,it>=Fe&&(it-=Math.pow(2,8*V)),it},M.prototype.readInt8=function(L,V){return L=L>>>0,V||xe(L,1,this.length),this[L]&128?(255-this[L]+1)*-1:this[L]},M.prototype.readInt16LE=function(L,V){L=L>>>0,V||xe(L,2,this.length);const he=this[L]|this[L+1]<<8;return he&32768?he|4294901760:he},M.prototype.readInt16BE=function(L,V){L=L>>>0,V||xe(L,2,this.length);const he=this[L+1]|this[L]<<8;return he&32768?he|4294901760:he},M.prototype.readInt32LE=function(L,V){return L=L>>>0,V||xe(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},M.prototype.readInt32BE=function(L,V){return L=L>>>0,V||xe(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},M.prototype.readBigInt64LE=Ct(function(L){L=L>>>0,Ie(L,"offset");const V=this[L],he=this[L+7];(V===void 0||he===void 0)&&be(L,this.length-8);const de=this[L+4]+this[L+5]*2**8+this[L+6]*2**16+(he<<24);return(BigInt(de)<<BigInt(32))+BigInt(V+this[++L]*2**8+this[++L]*2**16+this[++L]*2**24)}),M.prototype.readBigInt64BE=Ct(function(L){L=L>>>0,Ie(L,"offset");const V=this[L],he=this[L+7];(V===void 0||he===void 0)&&be(L,this.length-8);const de=(V<<24)+this[++L]*2**16+this[++L]*2**8+this[++L];return(BigInt(de)<<BigInt(32))+BigInt(this[++L]*2**24+this[++L]*2**16+this[++L]*2**8+he)}),M.prototype.readFloatLE=function(L,V){return L=L>>>0,V||xe(L,4,this.length),C.read(this,L,!0,23,4)},M.prototype.readFloatBE=function(L,V){return L=L>>>0,V||xe(L,4,this.length),C.read(this,L,!1,23,4)},M.prototype.readDoubleLE=function(L,V){return L=L>>>0,V||xe(L,8,this.length),C.read(this,L,!0,52,8)},M.prototype.readDoubleBE=function(L,V){return L=L>>>0,V||xe(L,8,this.length),C.read(this,L,!1,52,8)};function Ve(q,L,V,he,de,Fe){if(!M.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(L>de||L<Fe)throw new RangeError('"value" argument is out of bounds');if(V+he>q.length)throw new RangeError("Index out of range")}M.prototype.writeUintLE=M.prototype.writeUIntLE=function(L,V,he,de){if(L=+L,V=V>>>0,he=he>>>0,!de){const Dt=Math.pow(2,8*he)-1;Ve(this,L,V,he,Dt,0)}let Fe=1,it=0;for(this[V]=L&255;++it<he&&(Fe*=256);)this[V+it]=L/Fe&255;return V+he},M.prototype.writeUintBE=M.prototype.writeUIntBE=function(L,V,he,de){if(L=+L,V=V>>>0,he=he>>>0,!de){const Dt=Math.pow(2,8*he)-1;Ve(this,L,V,he,Dt,0)}let Fe=he-1,it=1;for(this[V+Fe]=L&255;--Fe>=0&&(it*=256);)this[V+Fe]=L/it&255;return V+he},M.prototype.writeUint8=M.prototype.writeUInt8=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,1,255,0),this[V]=L&255,V+1},M.prototype.writeUint16LE=M.prototype.writeUInt16LE=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,2,65535,0),this[V]=L&255,this[V+1]=L>>>8,V+2},M.prototype.writeUint16BE=M.prototype.writeUInt16BE=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,2,65535,0),this[V]=L>>>8,this[V+1]=L&255,V+2},M.prototype.writeUint32LE=M.prototype.writeUInt32LE=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,4,4294967295,0),this[V+3]=L>>>24,this[V+2]=L>>>16,this[V+1]=L>>>8,this[V]=L&255,V+4},M.prototype.writeUint32BE=M.prototype.writeUInt32BE=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,4,4294967295,0),this[V]=L>>>24,this[V+1]=L>>>16,this[V+2]=L>>>8,this[V+3]=L&255,V+4};function xt(q,L,V,he,de){fe(L,he,de,q,V,7);let Fe=Number(L&BigInt(4294967295));q[V++]=Fe,Fe=Fe>>8,q[V++]=Fe,Fe=Fe>>8,q[V++]=Fe,Fe=Fe>>8,q[V++]=Fe;let it=Number(L>>BigInt(32)&BigInt(4294967295));return q[V++]=it,it=it>>8,q[V++]=it,it=it>>8,q[V++]=it,it=it>>8,q[V++]=it,V}function ft(q,L,V,he,de){fe(L,he,de,q,V,7);let Fe=Number(L&BigInt(4294967295));q[V+7]=Fe,Fe=Fe>>8,q[V+6]=Fe,Fe=Fe>>8,q[V+5]=Fe,Fe=Fe>>8,q[V+4]=Fe;let it=Number(L>>BigInt(32)&BigInt(4294967295));return q[V+3]=it,it=it>>8,q[V+2]=it,it=it>>8,q[V+1]=it,it=it>>8,q[V]=it,V+8}M.prototype.writeBigUInt64LE=Ct(function(L,V=0){return xt(this,L,V,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeBigUInt64BE=Ct(function(L,V=0){return ft(this,L,V,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeIntLE=function(L,V,he,de){if(L=+L,V=V>>>0,!de){const un=Math.pow(2,8*he-1);Ve(this,L,V,he,un-1,-un)}let Fe=0,it=1,Dt=0;for(this[V]=L&255;++Fe<he&&(it*=256);)L<0&&Dt===0&&this[V+Fe-1]!==0&&(Dt=1),this[V+Fe]=(L/it>>0)-Dt&255;return V+he},M.prototype.writeIntBE=function(L,V,he,de){if(L=+L,V=V>>>0,!de){const un=Math.pow(2,8*he-1);Ve(this,L,V,he,un-1,-un)}let Fe=he-1,it=1,Dt=0;for(this[V+Fe]=L&255;--Fe>=0&&(it*=256);)L<0&&Dt===0&&this[V+Fe+1]!==0&&(Dt=1),this[V+Fe]=(L/it>>0)-Dt&255;return V+he},M.prototype.writeInt8=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,1,127,-128),L<0&&(L=255+L+1),this[V]=L&255,V+1},M.prototype.writeInt16LE=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,2,32767,-32768),this[V]=L&255,this[V+1]=L>>>8,V+2},M.prototype.writeInt16BE=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,2,32767,-32768),this[V]=L>>>8,this[V+1]=L&255,V+2},M.prototype.writeInt32LE=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,4,2147483647,-2147483648),this[V]=L&255,this[V+1]=L>>>8,this[V+2]=L>>>16,this[V+3]=L>>>24,V+4},M.prototype.writeInt32BE=function(L,V,he){return L=+L,V=V>>>0,he||Ve(this,L,V,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),this[V]=L>>>24,this[V+1]=L>>>16,this[V+2]=L>>>8,this[V+3]=L&255,V+4},M.prototype.writeBigInt64LE=Ct(function(L,V=0){return xt(this,L,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),M.prototype.writeBigInt64BE=Ct(function(L,V=0){return ft(this,L,V,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(q,L,V,he,de,Fe){if(V+he>q.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("Index out of range")}function Lt(q,L,V,he,de){return L=+L,V=V>>>0,de||Et(q,L,V,4),C.write(q,L,V,he,23,4),V+4}M.prototype.writeFloatLE=function(L,V,he){return Lt(this,L,V,!0,he)},M.prototype.writeFloatBE=function(L,V,he){return Lt(this,L,V,!1,he)};function Tt(q,L,V,he,de){return L=+L,V=V>>>0,de||Et(q,L,V,8),C.write(q,L,V,he,52,8),V+8}M.prototype.writeDoubleLE=function(L,V,he){return Tt(this,L,V,!0,he)},M.prototype.writeDoubleBE=function(L,V,he){return Tt(this,L,V,!1,he)},M.prototype.copy=function(L,V,he,de){if(!M.isBuffer(L))throw new TypeError("argument should be a Buffer");if(he||(he=0),!de&&de!==0&&(de=this.length),V>=L.length&&(V=L.length),V||(V=0),de>0&&de<he&&(de=he),de===he||L.length===0||this.length===0)return 0;if(V<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),L.length-V<de-he&&(de=L.length-V+he);const Fe=de-he;return this===L&&typeof I.prototype.copyWithin=="function"?this.copyWithin(V,he,de):I.prototype.set.call(L,this.subarray(he,de),V),Fe},M.prototype.fill=function(L,V,he,de){if(typeof L=="string"){if(typeof V=="string"?(de=V,V=0,he=this.length):typeof he=="string"&&(de=he,he=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!M.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(L.length===1){const it=L.charCodeAt(0);(de==="utf8"&&it<128||de==="latin1")&&(L=it)}}else typeof L=="number"?L=L&255:typeof L=="boolean"&&(L=Number(L));if(V<0||this.length<V||this.length<he)throw new RangeError("Out of range index");if(he<=V)return this;V=V>>>0,he=he===void 0?this.length:he>>>0,L||(L=0);let Fe;if(typeof L=="number")for(Fe=V;Fe<he;++Fe)this[Fe]=L;else{const it=M.isBuffer(L)?L:M.from(L,de),Dt=it.length;if(Dt===0)throw new TypeError('The value "'+L+'" is invalid for argument "value"');for(Fe=0;Fe<he-V;++Fe)this[Fe+V]=it[Fe%Dt]}return this};const zt={};function ge(q,L,V){zt[q]=class extends V{constructor(){super(),Object.defineProperty(this,"message",{value:L.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${q}]`,this.stack,delete this.name}get code(){return q}set code(de){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:de,writable:!0})}toString(){return`${this.name} [${q}]: ${this.message}`}}}ge("ERR_BUFFER_OUT_OF_BOUNDS",function(q){return q?`${q} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ge("ERR_INVALID_ARG_TYPE",function(q,L){return`The "${q}" argument must be of type number. Received type ${typeof L}`},TypeError),ge("ERR_OUT_OF_RANGE",function(q,L,V){let he=`The value of "${q}" is out of range.`,de=V;return Number.isInteger(V)&&Math.abs(V)>2**32?de=R(String(V)):typeof V=="bigint"&&(de=String(V),(V>BigInt(2)**BigInt(32)||V<-(BigInt(2)**BigInt(32)))&&(de=R(de)),de+="n"),he+=` It must be ${L}. Received ${de}`,he},RangeError);function R(q){let L="",V=q.length;const he=q[0]==="-"?1:0;for(;V>=he+4;V-=3)L=`_${q.slice(V-3,V)}${L}`;return`${q.slice(0,V)}${L}`}function H(q,L,V){Ie(L,"offset"),(q[L]===void 0||q[L+V]===void 0)&&be(L,q.length-(V+1))}function fe(q,L,V,he,de,Fe){if(q>V||q<L){const it=typeof L=="bigint"?"n":"";let Dt;throw L===0||L===BigInt(0)?Dt=`>= 0${it} and < 2${it} ** ${(Fe+1)*8}${it}`:Dt=`>= -(2${it} ** ${(Fe+1)*8-1}${it}) and < 2 ** ${(Fe+1)*8-1}${it}`,new zt.ERR_OUT_OF_RANGE("value",Dt,q)}H(he,de,Fe)}function Ie(q,L){if(typeof q!="number")throw new zt.ERR_INVALID_ARG_TYPE(L,"number",q)}function be(q,L,V){throw Math.floor(q)!==q?(Ie(q,V),new zt.ERR_OUT_OF_RANGE("offset","an integer",q)):L<0?new zt.ERR_BUFFER_OUT_OF_BOUNDS:new zt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${L}`,q)}const Ee=/[^+/0-9A-Za-z-_]/g;function le(q){if(q=q.split("=")[0],q=q.trim().replace(Ee,""),q.length<2)return"";for(;q.length%4!==0;)q=q+"=";return q}function ct(q,L){L=L||1/0;let V;const he=q.length;let de=null;const Fe=[];for(let it=0;it<he;++it){if(V=q.charCodeAt(it),V>55295&&V<57344){if(!de){if(V>56319){(L-=3)>-1&&Fe.push(239,191,189);continue}else if(it+1===he){(L-=3)>-1&&Fe.push(239,191,189);continue}de=V;continue}if(V<56320){(L-=3)>-1&&Fe.push(239,191,189),de=V;continue}V=(de-55296<<10|V-56320)+65536}else de&&(L-=3)>-1&&Fe.push(239,191,189);if(de=null,V<128){if((L-=1)<0)break;Fe.push(V)}else if(V<2048){if((L-=2)<0)break;Fe.push(V>>6|192,V&63|128)}else if(V<65536){if((L-=3)<0)break;Fe.push(V>>12|224,V>>6&63|128,V&63|128)}else if(V<1114112){if((L-=4)<0)break;Fe.push(V>>18|240,V>>12&63|128,V>>6&63|128,V&63|128)}else throw new Error("Invalid code point")}return Fe}function yt(q){const L=[];for(let V=0;V<q.length;++V)L.push(q.charCodeAt(V)&255);return L}function P(q,L){let V,he,de;const Fe=[];for(let it=0;it<q.length&&!((L-=2)<0);++it)V=q.charCodeAt(it),he=V>>8,de=V%256,Fe.push(de),Fe.push(he);return Fe}function Be(q){return E.toByteArray(le(q))}function et(q,L,V,he){let de;for(de=0;de<he&&!(de+V>=L.length||de>=q.length);++de)L[de+V]=q[de];return de}function pe(q,L){return q instanceof L||q!=null&&q.constructor!=null&&q.constructor.name!=null&&q.constructor.name===L.name}function De(q){return q!==q}const Ke=function(){const q="0123456789abcdef",L=new Array(256);for(let V=0;V<16;++V){const he=V*16;for(let de=0;de<16;++de)L[he+de]=q[V]+q[de]}return L}();function Ct(q){return typeof BigInt>"u"?ye:q}function ye(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(Mx)),Mx}var Px,IN;function Ur(){if(IN)return Px;IN=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return Px={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},Px}var Fx={exports:{}},Lx,ON;function wj(){return ON||(ON=1,Lx={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),Lx}var $x,DN;function di(){if(DN)return $x;DN=1;const{format:e,inspect:t}=wj(),{AggregateError:n}=Ur(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",u={};function c(_,x){if(!_)throw new u.ERR_INTERNAL_ASSERTION(x)}function f(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return c(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return c(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function m(_,x,S){S||(S=Error);class E extends S{constructor(...A){super(h(_,x,A))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,u[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function w(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class v extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new u.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(_,x,S)=>{c(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],A=[],O=[];for(const D of x)c(typeof D=="string","All expected entries have to be of type string"),i.includes(D)?C.push(D.toLowerCase()):o.test(D)?A.push(D):(c(D!=="object",'The value "object" should be written as "Object"'),O.push(D));if(A.length>0){const D=C.indexOf("object");D!==-1&&(C.splice(C,D,1),A.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const D=C.pop();E+=`one of type ${C.join(", ")}, or ${D}`}}(A.length>0||O.length>0)&&(E+=" or ")}if(A.length>0){switch(A.length){case 1:E+=`an instance of ${A[0]}`;break;case 2:E+=`an instance of ${A[0]} or ${A[1]}`;break;default:{const D=A.pop();E+=`an instance of ${A.join(", ")}, or ${D}`}}O.length>0&&(E+=" or ")}switch(O.length){case 0:break;case 1:O[0].toLowerCase()!==O[0]&&(E+="an "),E+=`${O[0]}`;break;case 2:E+=`one of ${O[0]} or ${O[1]}`;break;default:{const D=O.pop();E+=`one of ${O.join(", ")}, or ${D}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var I;if((I=S.constructor)!==null&&I!==void 0&&I.name)E+=`. Received an instance of ${S.constructor.name}`;else{const D=t(S,{depth:-1});E+=`. Received ${D}`}}else{let D=t(S,{colors:!1});D.length>25&&(D=`${D.slice(0,25)}...`),E+=`. Received type ${typeof S} (${D})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${C}.`},TypeError),m("ERR_MISSING_ARGS",(..._)=>{c(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(_,x,S)=>{c(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=f(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=f(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),$x={AbortError:v,aggregateTwoErrors:g(w),hideStackFrames:g,codes:u},$x}var Xp={exports:{}},jN;function Mm(){if(jN)return Xp.exports;jN=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Xp.exports=e,Xp.exports.AbortSignal=t,Xp.exports.default=e,Xp.exports}var Fy={exports:{}},MN;function gw(){if(MN)return Fy.exports;MN=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(A,O,I){return Function.prototype.apply.call(A,O,I)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:n=function(A){return Object.getOwnPropertyNames(A)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(A){return A!==A};function i(){i.init.call(this)}Fy.exports=i,Fy.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this};function u(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(A){for(var O=[],I=1;I<arguments.length;I++)O.push(arguments[I]);var D=A==="error",B=this._events;if(B!==void 0)D=D&&B.error===void 0;else if(!D)return!1;if(D){var W;if(O.length>0&&(W=O[0]),W instanceof Error)throw W;var Q=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw Q.context=W,Q}var M=B[A];if(M===void 0)return!1;if(typeof M=="function")t(M,this,O);else for(var K=M.length,U=w(M,K),I=0;I<K;++I)t(U[I],this,O);return!0};function c(C,A,O,I){var D,B,W;if(s(O),B=C._events,B===void 0?(B=C._events=Object.create(null),C._eventsCount=0):(B.newListener!==void 0&&(C.emit("newListener",A,O.listener?O.listener:O),B=C._events),W=B[A]),W===void 0)W=B[A]=O,++C._eventsCount;else if(typeof W=="function"?W=B[A]=I?[O,W]:[W,O]:I?W.unshift(O):W.push(O),D=u(C),D>0&&W.length>D&&!W.warned){W.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(A)+" listeners added. Use emitter.setMaxListeners() to increase limit");Q.name="MaxListenersExceededWarning",Q.emitter=C,Q.type=A,Q.count=W.length,r(Q)}return C}i.prototype.addListener=function(A,O){return c(this,A,O,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(A,O){return c(this,A,O,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,A,O){var I={fired:!1,wrapFn:void 0,target:C,type:A,listener:O},D=f.bind(I);return D.listener=O,I.wrapFn=D,D}i.prototype.once=function(A,O){return s(O),this.on(A,h(this,A,O)),this},i.prototype.prependOnceListener=function(A,O){return s(O),this.prependListener(A,h(this,A,O)),this},i.prototype.removeListener=function(A,O){var I,D,B,W,Q;if(s(O),D=this._events,D===void 0)return this;if(I=D[A],I===void 0)return this;if(I===O||I.listener===O)--this._eventsCount===0?this._events=Object.create(null):(delete D[A],D.removeListener&&this.emit("removeListener",A,I.listener||O));else if(typeof I!="function"){for(B=-1,W=I.length-1;W>=0;W--)if(I[W]===O||I[W].listener===O){Q=I[W].listener,B=W;break}if(B<0)return this;B===0?I.shift():v(I,B),I.length===1&&(D[A]=I[0]),D.removeListener!==void 0&&this.emit("removeListener",A,Q||O)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(A){var O,I,D;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[A]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[A]),this;if(arguments.length===0){var B=Object.keys(I),W;for(D=0;D<B.length;++D)W=B[D],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(O=I[A],typeof O=="function")this.removeListener(A,O);else if(O!==void 0)for(D=O.length-1;D>=0;D--)this.removeListener(A,O[D]);return this};function m(C,A,O){var I=C._events;if(I===void 0)return[];var D=I[A];return D===void 0?[]:typeof D=="function"?O?[D.listener||D]:[D]:O?_(D):w(D,D.length)}i.prototype.listeners=function(A){return m(this,A,!0)},i.prototype.rawListeners=function(A){return m(this,A,!1)},i.listenerCount=function(C,A){return typeof C.listenerCount=="function"?C.listenerCount(A):g.call(C,A)},i.prototype.listenerCount=g;function g(C){var A=this._events;if(A!==void 0){var O=A[C];if(typeof O=="function")return 1;if(O!==void 0)return O.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function w(C,A){for(var O=new Array(A),I=0;I<A;++I)O[I]=C[I];return O}function v(C,A){for(;A+1<C.length;A++)C[A]=C[A+1];C.pop()}function _(C){for(var A=new Array(C.length),O=0;O<A.length;++O)A[O]=C[O].listener||C[O];return A}function x(C,A){return new Promise(function(O,I){function D(W){C.removeListener(A,B),I(W)}function B(){typeof C.removeListener=="function"&&C.removeListener("error",D),O([].slice.call(arguments))}E(C,A,B,{once:!0}),A!=="error"&&S(C,D,{once:!0})})}function S(C,A,O){typeof C.on=="function"&&E(C,"error",A,O)}function E(C,A,O,I){if(typeof C.on=="function")I.once?C.once(A,O):C.on(A,O);else if(typeof C.addEventListener=="function")C.addEventListener(A,function D(B){I.once&&C.removeEventListener(A,D),O(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return Fy.exports}var PN;function Ei(){return PN||(PN=1,function(e){const t=fc(),{format:n,inspect:r}=wj(),{codes:{ERR_INVALID_ARG_TYPE:a}}=di(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Ur(),u=globalThis.AbortSignal||Mm().AbortSignal,c=globalThis.AbortController||Mm().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(v,_)=>{if(v!==void 0&&(v===null||typeof v!="object"||!("aborted"in v)))throw new a(_,"AbortSignal",v)},w=(v,_)=>{if(typeof v!="function")throw new a(_,"Function",v)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(v){let _=!1;return function(...x){_||(_=!0,v.apply(this,x))}},createDeferredPromise:function(){let v,_;return{promise:new Promise((S,E)=>{v=S,_=E}),resolve:v,reject:_}},promisify(v){return new Promise((_,x)=>{v((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(v){return v instanceof f},isArrayBufferView(v){return ArrayBuffer.isView(v)}},isBlob:m,deprecate(v,_){return v},addAbortListener:gw().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),w(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:u.any||function(_){if(_.length===1)return _[0];const x=new c,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(Fx)),Fx.exports}var Ly={},Bx,FN;function A0(){if(FN)return Bx;FN=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:u,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:f,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=Ur(),{hideStackFrames:w,codes:{ERR_SOCKET_BAD_PORT:v,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=di(),{normalizeEncoding:C}=Ei(),{isAsyncFunction:A,isArrayBufferView:O}=Ei().types,I={};function D(X){return X===(X|0)}function B(X){return X===X>>>0}const W=/^[0-7]+$/,Q="must be a 32-bit unsigned integer or an octal string";function M(X,_e,Le){if(typeof X>"u"&&(X=Le),typeof X=="string"){if(f(W,X)===null)throw new x(_e,X,Q);X=u(X,8)}return me(X,_e),X}const K=w((X,_e,Le=s,xe=o)=>{if(typeof X!="number")throw new _(_e,"number",X);if(!a(X))throw new S(_e,"an integer",X);if(X<Le||X>xe)throw new S(_e,`>= ${Le} && <= ${xe}`,X)}),U=w((X,_e,Le=-2147483648,xe=2147483647)=>{if(typeof X!="number")throw new _(_e,"number",X);if(!a(X))throw new S(_e,"an integer",X);if(X<Le||X>xe)throw new S(_e,`>= ${Le} && <= ${xe}`,X)}),me=w((X,_e,Le=!1)=>{if(typeof X!="number")throw new _(_e,"number",X);if(!a(X))throw new S(_e,"an integer",X);const xe=Le?1:0,Ve=4294967295;if(X<xe||X>Ve)throw new S(_e,`>= ${xe} && <= ${Ve}`,X)});function se(X,_e){if(typeof X!="string")throw new _(_e,"string",X)}function ne(X,_e,Le=void 0,xe){if(typeof X!="number")throw new _(_e,"number",X);if(Le!=null&&X<Le||xe!=null&&X>xe||(Le!=null||xe!=null)&&i(X))throw new S(_e,`${Le!=null?`>= ${Le}`:""}${Le!=null&&xe!=null?" && ":""}${xe!=null?`<= ${xe}`:""}`,X)}const ee=w((X,_e,Le)=>{if(!t(Le,X)){const Ve="must be one of: "+n(r(Le,xt=>typeof xt=="string"?`'${xt}'`:h(xt)),", ");throw new x(_e,X,Ve)}});function ae(X,_e){if(typeof X!="boolean")throw new _(_e,"boolean",X)}function G(X,_e,Le){return X==null||!c(X,_e)?Le:X[_e]}const Y=w((X,_e,Le=null)=>{const xe=G(Le,"allowArray",!1),Ve=G(Le,"allowFunction",!1);if(!G(Le,"nullable",!1)&&X===null||!xe&&e(X)||typeof X!="object"&&(!Ve||typeof X!="function"))throw new _(_e,"Object",X)}),J=w((X,_e)=>{if(X!=null&&typeof X!="object"&&typeof X!="function")throw new _(_e,"a dictionary",X)}),re=w((X,_e,Le=0)=>{if(!e(X))throw new _(_e,"Array",X);if(X.length<Le){const xe=`must be longer than ${Le}`;throw new x(_e,X,xe)}});function we(X,_e){re(X,_e);for(let Le=0;Le<X.length;Le++)se(X[Le],`${_e}[${Le}]`)}function ke(X,_e){re(X,_e);for(let Le=0;Le<X.length;Le++)ae(X[Le],`${_e}[${Le}]`)}function Me(X,_e){re(X,_e);for(let Le=0;Le<X.length;Le++){const xe=X[Le],Ve=`${_e}[${Le}]`;if(xe==null)throw new _(Ve,"AbortSignal",xe);st(xe,Ve)}}function Pe(X,_e="signal"){if(se(X,_e),I[X]===void 0)throw I[m(X)]!==void 0?new E(X+" (signals must use all capital letters)"):new E(X)}const Re=w((X,_e="buffer")=>{if(!O(X))throw new _(_e,["Buffer","TypedArray","DataView"],X)});function Ae(X,_e){const Le=C(_e),xe=X.length;if(Le==="hex"&&xe%2!==0)throw new x("encoding",_e,`is invalid for data of length ${xe}`)}function He(X,_e="Port",Le=!0){if(typeof X!="number"&&typeof X!="string"||typeof X=="string"&&g(X).length===0||+X!==+X>>>0||X>65535||X===0&&!Le)throw new v(_e,X,Le);return X|0}const st=w((X,_e)=>{if(X!==void 0&&(X===null||typeof X!="object"||!("aborted"in X)))throw new _(_e,"AbortSignal",X)}),Oe=w((X,_e)=>{if(typeof X!="function")throw new _(_e,"Function",X)}),Te=w((X,_e)=>{if(typeof X!="function"||A(X))throw new _(_e,"Function",X)}),z=w((X,_e)=>{if(X!==void 0)throw new _(_e,"undefined",X)});function Ce(X,_e,Le){if(!t(Le,X))throw new _(_e,`('${n(Le,"|")}')`,X)}const Ne=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(X,_e){if(typeof X>"u"||!f(Ne,X))throw new x(_e,X,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ie(X){if(typeof X=="string")return ce(X,"hints"),X;if(e(X)){const _e=X.length;let Le="";if(_e===0)return Le;for(let xe=0;xe<_e;xe++){const Ve=X[xe];ce(Ve,"hints"),Le+=Ve,xe!==_e-1&&(Le+=", ")}return Le}throw new x("hints",X,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return Bx={isInt32:D,isUint32:B,parseFileMode:M,validateArray:re,validateStringArray:we,validateBooleanArray:ke,validateAbortSignalArray:Me,validateBoolean:ae,validateBuffer:Re,validateDictionary:J,validateEncoding:Ae,validateFunction:Oe,validateInt32:U,validateInteger:K,validateNumber:ne,validateObject:Y,validateOneOf:ee,validatePlainFunction:Te,validatePort:He,validateSignalName:Pe,validateString:se,validateUint32:me,validateUndefined:z,validateUnion:Ce,validateAbortSignal:st,validateLinkHeaderValue:ie},Bx}var $y={exports:{}},zx={},LN;function kd(){return LN||(LN=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function u(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var f=[],h=!1,m,g=-1;function w(){!h||!m||(h=!1,m.length?f=m.concat(f):g=-1,f.length&&v())}function v(){if(!h){var C=u(w);h=!0;for(var A=f.length;A;){for(m=f,f=[];++g<A;)m&&m[g].run();g=-1,A=f.length}m=null,h=!1,c(C)}}r.nextTick=function(C){var A=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)A[O-1]=arguments[O];f.push(new _(C,A)),f.length===1&&!h&&u(v)};function _(C,A){this.fun=C,this.array=A}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(zx)),zx}var Ux,$N;function Hl(){if($N)return Ux;$N=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Ur(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),u=n("nodejs.webstream.isClosedPromise"),c=n("nodejs.webstream.controllerErrorFunction");function f(G,Y=!1){var J;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!Y||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((J=G._readableState)===null||J===void 0?void 0:J.readable)!==!1)&&(!G._writableState||G._readableState))}function h(G){var Y;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((Y=G._writableState)===null||Y===void 0?void 0:Y.writable)!==!1))}function m(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function g(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function w(G){return!!(G&&!g(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function v(G){return!!(G&&!g(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function _(G){return!!(G&&!g(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function x(G){return w(G)||v(G)||_(G)}function S(G,Y){return G==null?!1:Y===!0?typeof G[e]=="function":Y===!1?typeof G[t]=="function":typeof G[e]=="function"||typeof G[t]=="function"}function E(G){if(!g(G))return null;const Y=G._writableState,J=G._readableState,re=Y||J;return!!(G.destroyed||G[r]||re!=null&&re.destroyed)}function C(G){if(!h(G))return null;if(G.writableEnded===!0)return!0;const Y=G._writableState;return Y!=null&&Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function A(G,Y){if(!h(G))return null;if(G.writableFinished===!0)return!0;const J=G._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.finished)!="boolean"?null:!!(J.finished||Y===!1&&J.ended===!0&&J.length===0)}function O(G){if(!f(G))return null;if(G.readableEnded===!0)return!0;const Y=G._readableState;return!Y||Y.errored?!1:typeof(Y==null?void 0:Y.ended)!="boolean"?null:Y.ended}function I(G,Y){if(!f(G))return null;const J=G._readableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.endEmitted)!="boolean"?null:!!(J.endEmitted||Y===!1&&J.ended===!0&&J.length===0)}function D(G){return G&&G[i]!=null?G[i]:typeof(G==null?void 0:G.readable)!="boolean"?null:E(G)?!1:f(G)&&G.readable&&!I(G)}function B(G){return G&&G[o]!=null?G[o]:typeof(G==null?void 0:G.writable)!="boolean"?null:E(G)?!1:h(G)&&G.writable&&!C(G)}function W(G,Y){return g(G)?E(G)?!0:!((Y==null?void 0:Y.readable)!==!1&&D(G)||(Y==null?void 0:Y.writable)!==!1&&B(G)):null}function Q(G){var Y,J;return g(G)?G.writableErrored?G.writableErrored:(Y=(J=G._writableState)===null||J===void 0?void 0:J.errored)!==null&&Y!==void 0?Y:null:null}function M(G){var Y,J;return g(G)?G.readableErrored?G.readableErrored:(Y=(J=G._readableState)===null||J===void 0?void 0:J.errored)!==null&&Y!==void 0?Y:null:null}function K(G){if(!g(G))return null;if(typeof G.closed=="boolean")return G.closed;const Y=G._writableState,J=G._readableState;return typeof(Y==null?void 0:Y.closed)=="boolean"||typeof(J==null?void 0:J.closed)=="boolean"?(Y==null?void 0:Y.closed)||(J==null?void 0:J.closed):typeof G._closed=="boolean"&&U(G)?G._closed:null}function U(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function me(G){return typeof G._sent100=="boolean"&&U(G)}function se(G){var Y;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((Y=G.req)===null||Y===void 0?void 0:Y.upgradeOrConnect)===void 0}function ne(G){if(!g(G))return null;const Y=G._writableState,J=G._readableState,re=Y||J;return!re&&me(G)||!!(re&&re.autoDestroy&&re.emitClose&&re.closed===!1)}function ee(G){var Y;return!!(G&&((Y=G[s])!==null&&Y!==void 0?Y:G.readableDidRead||G.readableAborted))}function ae(G){var Y,J,re,we,ke,Me,Pe,Re,Ae,He;return!!(G&&((Y=(J=(re=(we=(ke=(Me=G[a])!==null&&Me!==void 0?Me:G.readableErrored)!==null&&ke!==void 0?ke:G.writableErrored)!==null&&we!==void 0?we:(Pe=G._readableState)===null||Pe===void 0?void 0:Pe.errorEmitted)!==null&&re!==void 0?re:(Re=G._writableState)===null||Re===void 0?void 0:Re.errorEmitted)!==null&&J!==void 0?J:(Ae=G._readableState)===null||Ae===void 0?void 0:Ae.errored)!==null&&Y!==void 0?Y:!((He=G._writableState)===null||He===void 0)&&He.errored))}return Ux={isDestroyed:E,kIsDestroyed:r,isDisturbed:ee,kIsDisturbed:s,isErrored:ae,kIsErrored:a,isReadable:D,kIsReadable:i,kIsClosedPromise:u,kControllerErrorFunction:c,kIsWritable:o,isClosed:K,isDuplexNodeStream:m,isFinished:W,isIterable:S,isReadableNodeStream:f,isReadableStream:w,isReadableEnded:O,isReadableFinished:I,isReadableErrored:M,isNodeStream:g,isWebStream:x,isWritable:B,isWritableNodeStream:h,isWritableStream:v,isWritableEnded:C,isWritableFinished:A,isWritableErrored:Q,isServerRequest:se,isServerResponse:me,willEmitClose:ne,isTransformStream:_},Ux}var BN;function hc(){if(BN)return $y.exports;BN=1;const e=kd(),{AbortError:t,codes:n}=di(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=Ei(),{validateAbortSignal:s,validateFunction:u,validateObject:c,validateBoolean:f}=A0(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=Ur(),{isClosed:w,isReadable:v,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:A,isWritableStream:O,isWritableFinished:I,isWritableErrored:D,isNodeStream:B,willEmitClose:W,kIsClosedPromise:Q}=Hl();let M;function K(ee){return ee.setHeader&&typeof ee.abort=="function"}const U=()=>{};function me(ee,ae,G){var Y,J;if(arguments.length===2?(G=ae,ae=i):ae==null?ae=i:c(ae,"options"),u(G,"callback"),s(ae.signal,"options.signal"),G=o(G),x(ee)||O(ee))return se(ee,ae,G);if(!B(ee))throw new r("stream",["ReadableStream","WritableStream","Stream"],ee);const re=(Y=ae.readable)!==null&&Y!==void 0?Y:_(ee),we=(J=ae.writable)!==null&&J!==void 0?J:A(ee),ke=ee._writableState,Me=ee._readableState,Pe=()=>{ee.writable||He()};let Re=W(ee)&&_(ee)===re&&A(ee)===we,Ae=I(ee,!1);const He=()=>{Ae=!0,ee.destroyed&&(Re=!1),!(Re&&(!ee.readable||re))&&(!re||st)&&G.call(ee)};let st=S(ee,!1);const Oe=()=>{st=!0,ee.destroyed&&(Re=!1),!(Re&&(!ee.writable||we))&&(!we||Ae)&&G.call(ee)},Te=X=>{G.call(ee,X)};let z=w(ee);const Ce=()=>{z=!0;const X=D(ee)||E(ee);if(X&&typeof X!="boolean")return G.call(ee,X);if(re&&!st&&_(ee,!0)&&!S(ee,!1))return G.call(ee,new a);if(we&&!Ae&&!I(ee,!1))return G.call(ee,new a);G.call(ee)},Ne=()=>{z=!0;const X=D(ee)||E(ee);if(X&&typeof X!="boolean")return G.call(ee,X);G.call(ee)},ce=()=>{ee.req.on("finish",He)};K(ee)?(ee.on("complete",He),Re||ee.on("abort",Ce),ee.req?ce():ee.on("request",ce)):we&&!ke&&(ee.on("end",Pe),ee.on("close",Pe)),!Re&&typeof ee.aborted=="boolean"&&ee.on("aborted",Ce),ee.on("end",Oe),ee.on("finish",He),ae.error!==!1&&ee.on("error",Te),ee.on("close",Ce),z?e.nextTick(Ce):ke!=null&&ke.errorEmitted||Me!=null&&Me.errorEmitted?Re||e.nextTick(Ne):(!re&&(!Re||v(ee))&&(Ae||C(ee)===!1)||!we&&(!Re||C(ee))&&(st||v(ee)===!1)||Me&&ee.req&&ee.aborted)&&e.nextTick(Ne);const ie=()=>{G=U,ee.removeListener("aborted",Ce),ee.removeListener("complete",He),ee.removeListener("abort",Ce),ee.removeListener("request",ce),ee.req&&ee.req.removeListener("finish",He),ee.removeListener("end",Pe),ee.removeListener("close",Pe),ee.removeListener("finish",He),ee.removeListener("end",Oe),ee.removeListener("error",Te),ee.removeListener("close",Ce)};if(ae.signal&&!z){const X=()=>{const _e=G;ie(),_e.call(ee,new t(void 0,{cause:ae.signal.reason}))};if(ae.signal.aborted)e.nextTick(X);else{M=M||Ei().addAbortListener;const _e=M(ae.signal,X),Le=G;G=o((...xe)=>{_e[g](),Le.apply(ee,xe)})}}return ie}function se(ee,ae,G){let Y=!1,J=U;if(ae.signal)if(J=()=>{Y=!0,G.call(ee,new t(void 0,{cause:ae.signal.reason}))},ae.signal.aborted)e.nextTick(J);else{M=M||Ei().addAbortListener;const we=M(ae.signal,J),ke=G;G=o((...Me)=>{we[g](),ke.apply(ee,Me)})}const re=(...we)=>{Y||e.nextTick(()=>G.apply(ee,we))};return m(ee[Q].promise,re,re),U}function ne(ee,ae){var G;let Y=!1;return ae===null&&(ae=i),(G=ae)!==null&&G!==void 0&&G.cleanup&&(f(ae.cleanup,"cleanup"),Y=ae.cleanup),new h((J,re)=>{const we=me(ee,ae,ke=>{Y&&we(),ke?re(ke):J()})})}return $y.exports=me,$y.exports.finished=ne,$y.exports}var qx,zN;function Ch(){if(zN)return qx;zN=1;const e=kd(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=di(),{Symbol:a}=Ur(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:u}=Hl(),c=a("kDestroy"),f=a("kConstruct");function h(W,Q,M){W&&(W.stack,Q&&!Q.errored&&(Q.errored=W),M&&!M.errored&&(M.errored=W))}function m(W,Q){const M=this._readableState,K=this._writableState,U=K||M;return K!=null&&K.destroyed||M!=null&&M.destroyed?(typeof Q=="function"&&Q(),this):(h(W,K,M),K&&(K.destroyed=!0),M&&(M.destroyed=!0),U.constructed?g(this,W,Q):this.once(c,function(me){g(this,t(me,W),Q)}),this)}function g(W,Q,M){let K=!1;function U(me){if(K)return;K=!0;const se=W._readableState,ne=W._writableState;h(me,ne,se),ne&&(ne.closed=!0),se&&(se.closed=!0),typeof M=="function"&&M(me),me?e.nextTick(w,W,me):e.nextTick(v,W)}try{W._destroy(Q||null,U)}catch(me){U(me)}}function w(W,Q){_(W,Q),v(W)}function v(W){const Q=W._readableState,M=W._writableState;M&&(M.closeEmitted=!0),Q&&(Q.closeEmitted=!0),(M!=null&&M.emitClose||Q!=null&&Q.emitClose)&&W.emit("close")}function _(W,Q){const M=W._readableState,K=W._writableState;K!=null&&K.errorEmitted||M!=null&&M.errorEmitted||(K&&(K.errorEmitted=!0),M&&(M.errorEmitted=!0),W.emit("error",Q))}function x(){const W=this._readableState,Q=this._writableState;W&&(W.constructed=!0,W.closed=!1,W.closeEmitted=!1,W.destroyed=!1,W.errored=null,W.errorEmitted=!1,W.reading=!1,W.ended=W.readable===!1,W.endEmitted=W.readable===!1),Q&&(Q.constructed=!0,Q.destroyed=!1,Q.closed=!1,Q.closeEmitted=!1,Q.errored=null,Q.errorEmitted=!1,Q.finalCalled=!1,Q.prefinished=!1,Q.ended=Q.writable===!1,Q.ending=Q.writable===!1,Q.finished=Q.writable===!1)}function S(W,Q,M){const K=W._readableState,U=W._writableState;if(U!=null&&U.destroyed||K!=null&&K.destroyed)return this;K!=null&&K.autoDestroy||U!=null&&U.autoDestroy?W.destroy(Q):Q&&(Q.stack,U&&!U.errored&&(U.errored=Q),K&&!K.errored&&(K.errored=Q),M?e.nextTick(_,W,Q):_(W,Q))}function E(W,Q){if(typeof W._construct!="function")return;const M=W._readableState,K=W._writableState;M&&(M.constructed=!1),K&&(K.constructed=!1),W.once(f,Q),!(W.listenerCount(f)>1)&&e.nextTick(C,W)}function C(W){let Q=!1;function M(K){if(Q){S(W,K??new n);return}Q=!0;const U=W._readableState,me=W._writableState,se=me||U;U&&(U.constructed=!0),me&&(me.constructed=!0),se.destroyed?W.emit(c,K):K?S(W,K,!0):e.nextTick(A,W)}try{W._construct(K=>{e.nextTick(M,K)})}catch(K){e.nextTick(M,K)}}function A(W){W.emit(f)}function O(W){return(W==null?void 0:W.setHeader)&&typeof W.abort=="function"}function I(W){W.emit("close")}function D(W,Q){W.emit("error",Q),e.nextTick(I,W)}function B(W,Q){!W||o(W)||(!Q&&!s(W)&&(Q=new r),u(W)?(W.socket=null,W.destroy(Q)):O(W)?W.abort():O(W.req)?W.req.abort():typeof W.destroy=="function"?W.destroy(Q):typeof W.close=="function"?W.close():Q?e.nextTick(D,W,Q):e.nextTick(I,W),W.destroyed||(W[i]=!0))}return qx={construct:E,destroyer:B,destroy:m,undestroy:x,errorOrDestroy:S},qx}var Hx,UN;function YC(){if(UN)return Hx;UN=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Ur(),{EventEmitter:n}=gw();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function u(v){i.writable&&i.write(v)===!1&&s.pause&&s.pause()}s.on("data",u);function c(){s.readable&&s.resume&&s.resume()}i.on("drain",c),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",m));let f=!1;function h(){f||(f=!0,i.end())}function m(){f||(f=!0,typeof i.destroy=="function"&&i.destroy())}function g(v){w(),n.listenerCount(this,"error")===0&&this.emit("error",v)}a(s,"error",g),a(i,"error",g);function w(){s.removeListener("data",u),i.removeListener("drain",c),s.removeListener("end",h),s.removeListener("close",m),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",w),s.removeListener("close",w),i.removeListener("close",w)}return s.on("end",w),s.on("close",w),i.on("close",w),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return Hx={Stream:r,prependListener:a},Hx}var Vx={exports:{}},qN;function yw(){return qN||(qN=1,function(e){const{SymbolDispose:t}=Ur(),{AbortError:n,codes:r}=di(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Hl(),s=hc(),{ERR_INVALID_ARG_TYPE:u}=r;let c;const f=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new u(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(f(m,"signal"),!a(g)&&!i(g))throw new u("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{c=c||Ei().addAbortListener;const w=c(h,g);s(m,w[t])}return m}}(Vx)),Vx.exports}var Gx,HN;function dX(){if(HN)return Gx;HN=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Ur(),{Buffer:a}=fc(),{inspect:i}=Ei();return Gx=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const u={data:s,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length}unshift(s){const u={data:s,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let u=this.head,c=""+u.data;for(;(u=u.next)!==null;)c+=s+u.data;return c}concat(s){if(this.length===0)return a.alloc(0);const u=a.allocUnsafe(s>>>0);let c=this.head,f=0;for(;c;)n(u,c.data,f),f+=c.data.length,c=c.next;return u}consume(s,u){const c=this.head.data;if(s<c.length){const f=c.slice(0,s);return this.head.data=c.slice(s),f}return s===c.length?this.shift():u?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let u="",c=this.head,f=0;do{const h=c.data;if(s>h.length)u+=h,s-=h.length;else{s===h.length?(u+=h,++f,c.next?this.head=c.next:this.head=this.tail=null):(u+=e(h,0,s),this.head=c,c.data=e(h,s));break}++f}while((c=c.next)!==null);return this.length-=f,u}_getBuffer(s){const u=a.allocUnsafe(s),c=s;let f=this.head,h=0;do{const m=f.data;if(s>m.length)n(u,m,c-s),s-=m.length;else{s===m.length?(n(u,m,c-s),++h,f.next?this.head=f.next:this.head=this.tail=null):(n(u,new r(m.buffer,m.byteOffset,s),c-s),this.head=f,f.data=m.slice(s));break}++h}while((f=f.next)!==null);return this.length-=h,u}[Symbol.for("nodejs.util.inspect.custom")](s,u){return i(this,{...u,depth:0,customInspect:!1})}},Gx}var Wx,VN;function bw(){if(VN)return Wx;VN=1;const{MathFloor:e,NumberIsInteger:t}=Ur(),{validateInteger:n}=A0(),{ERR_INVALID_ARG_VALUE:r}=di().codes;let a=16*1024,i=16;function o(f,h,m){return f.highWaterMark!=null?f.highWaterMark:h?f[m]:null}function s(f){return f?i:a}function u(f,h){n(h,"value",0),f?i=h:a=h}function c(f,h,m,g){const w=o(h,g,m);if(w!=null){if(!t(w)||w<0){const v=g?`options.${m}`:"options.highWaterMark";throw new r(v,w)}return e(w)}return s(f.objectMode)}return Wx={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:u},Wx}var Kx={},By={exports:{}},GN;function XC(){return GN||(GN=1,function(e,t){var n=fc(),r=n.Buffer;function a(o,s){for(var u in o)s[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,u){return r(o,s,u)}a(r,i),i.from=function(o,s,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,u)},i.alloc=function(o,s,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof u=="string"?c.fill(s,u):c.fill(s):c.fill(0),c},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(By,By.exports)),By.exports}var WN;function fX(){if(WN)return Kx;WN=1;var e=XC().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}Kx.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=m,S=4;break;case"utf8":this.fillLast=u,S=4;break;case"base64":this.text=g,this.end=w,S=3;break;default:this.write=v,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=f,a.prototype.text=c,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var C=S.length-1;if(C<E)return 0;var A=i(S[C]);return A>=0?(A>0&&(x.lastNeed=A-1),A):--C<E||A===-2?0:(A=i(S[C]),A>=0?(A>0&&(x.lastNeed=A-2),A):--C<E||A===-2?0:(A=i(S[C]),A>=0?(A>0&&(A===2?A=0:x.lastNeed=A-3),A):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function u(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function c(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function f(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function m(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function w(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function v(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return Kx}var Zx,KN;function _j(){if(KN)return Zx;KN=1;const e=kd(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Ur(),{Buffer:a}=fc(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=di().codes;function s(u,c,f){let h;if(typeof c=="string"||c instanceof a)return new u({objectMode:!0,...f,read(){this.push(c),this.push(null)}});let m;if(c&&c[n])m=!0,h=c[n]();else if(c&&c[r])m=!1,h=c[r]();else throw new i("iterable",["Iterable"],c);const g=new u({objectMode:!0,highWaterMark:1,...f});let w=!1;g._read=function(){w||(w=!0,_())},g._destroy=function(x,S){t(v(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function v(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:A}=await h.throw(x);if(await C,A)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:x,done:S}=m?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw w=!1,new o;if(g.push(E))continue;w=!1}}catch(x){g.destroy(x)}break}}return g}return Zx=s,Zx}var Yx,ZN;function vw(){if(ZN)return Yx;ZN=1;const e=kd(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:u,SafeSet:c,SymbolAsyncDispose:f,SymbolAsyncIterator:h,Symbol:m}=Ur();Yx=xe,xe.ReadableState=Le;const{EventEmitter:g}=gw(),{Stream:w,prependListener:v}=YC(),{Buffer:_}=fc(),{addAbortSignal:x}=yw(),S=hc();let E=Ei().debuglog("stream",ye=>{E=ye});const C=dX(),A=Ch(),{getHighWaterMark:O,getDefaultHighWaterMark:I}=bw(),{aggregateTwoErrors:D,codes:{ERR_INVALID_ARG_TYPE:B,ERR_METHOD_NOT_IMPLEMENTED:W,ERR_OUT_OF_RANGE:Q,ERR_STREAM_PUSH_AFTER_EOF:M,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:K},AbortError:U}=di(),{validateObject:me}=A0(),se=m("kPaused"),{StringDecoder:ne}=fX(),ee=_j();s(xe.prototype,w.prototype),s(xe,w);const ae=()=>{},{errorOrDestroy:G}=A,Y=1,J=2,re=4,we=8,ke=16,Me=32,Pe=64,Re=128,Ae=256,He=512,st=1024,Oe=2048,Te=4096,z=8192,Ce=16384,Ne=32768,ce=65536,ie=1<<17,X=1<<18;function _e(ye){return{enumerable:!1,get(){return(this.state&ye)!==0},set(q){q?this.state|=ye:this.state&=~ye}}}i(Le.prototype,{objectMode:_e(Y),ended:_e(J),endEmitted:_e(re),reading:_e(we),constructed:_e(ke),sync:_e(Me),needReadable:_e(Pe),emittedReadable:_e(Re),readableListening:_e(Ae),resumeScheduled:_e(He),errorEmitted:_e(st),emitClose:_e(Oe),autoDestroy:_e(Te),destroyed:_e(z),closed:_e(Ce),closeEmitted:_e(Ne),multiAwaitDrain:_e(ce),readingMore:_e(ie),dataEmitted:_e(X)});function Le(ye,q,L){typeof L!="boolean"&&(L=q instanceof Pl()),this.state=Oe|Te|ke|Me,ye&&ye.objectMode&&(this.state|=Y),L&&ye&&ye.readableObjectMode&&(this.state|=Y),this.highWaterMark=ye?O(this,ye,"readableHighWaterMark",L):I(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[se]=null,ye&&ye.emitClose===!1&&(this.state&=-2049),ye&&ye.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=ye&&ye.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,ye&&ye.encoding&&(this.decoder=new ne(ye.encoding),this.encoding=ye.encoding)}function xe(ye){if(!(this instanceof xe))return new xe(ye);const q=this instanceof Pl();this._readableState=new Le(ye,this,q),ye&&(typeof ye.read=="function"&&(this._read=ye.read),typeof ye.destroy=="function"&&(this._destroy=ye.destroy),typeof ye.construct=="function"&&(this._construct=ye.construct),ye.signal&&!q&&x(ye.signal,this)),w.call(this,ye),A.construct(this,()=>{this._readableState.needReadable&&R(this,this._readableState)})}xe.prototype.destroy=A.destroy,xe.prototype._undestroy=A.undestroy,xe.prototype._destroy=function(ye,q){q(ye)},xe.prototype[g.captureRejectionSymbol]=function(ye){this.destroy(ye)},xe.prototype[f]=function(){let ye;return this.destroyed||(ye=this.readableEnded?null:new U,this.destroy(ye)),new u((q,L)=>S(this,V=>V&&V!==ye?L(V):q(null)))},xe.prototype.push=function(ye,q){return Ve(this,ye,q,!1)},xe.prototype.unshift=function(ye,q){return Ve(this,ye,q,!0)};function Ve(ye,q,L,V){E("readableAddChunk",q);const he=ye._readableState;let de;if((he.state&Y)===0&&(typeof q=="string"?(L=L||he.defaultEncoding,he.encoding!==L&&(V&&he.encoding?q=_.from(q,L).toString(he.encoding):(q=_.from(q,L),L=""))):q instanceof _?L="":w._isUint8Array(q)?(q=w._uint8ArrayToBuffer(q),L=""):q!=null&&(de=new B("chunk",["string","Buffer","Uint8Array"],q))),de)G(ye,de);else if(q===null)he.state&=-9,Tt(ye,he);else if((he.state&Y)!==0||q&&q.length>0)if(V)if((he.state&re)!==0)G(ye,new K);else{if(he.destroyed||he.errored)return!1;xt(ye,he,q,!0)}else if(he.ended)G(ye,new M);else{if(he.destroyed||he.errored)return!1;he.state&=-9,he.decoder&&!L?(q=he.decoder.write(q),he.objectMode||q.length!==0?xt(ye,he,q,!1):R(ye,he)):xt(ye,he,q,!1)}else V||(he.state&=-9,R(ye,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function xt(ye,q,L,V){q.flowing&&q.length===0&&!q.sync&&ye.listenerCount("data")>0?((q.state&ce)!==0?q.awaitDrainWriters.clear():q.awaitDrainWriters=null,q.dataEmitted=!0,ye.emit("data",L)):(q.length+=q.objectMode?1:L.length,V?q.buffer.unshift(L):q.buffer.push(L),(q.state&Pe)!==0&&zt(ye)),R(ye,q)}xe.prototype.isPaused=function(){const ye=this._readableState;return ye[se]===!0||ye.flowing===!1},xe.prototype.setEncoding=function(ye){const q=new ne(ye);this._readableState.decoder=q,this._readableState.encoding=this._readableState.decoder.encoding;const L=this._readableState.buffer;let V="";for(const he of L)V+=q.write(he);return L.clear(),V!==""&&L.push(V),this._readableState.length=V.length,this};const ft=1073741824;function Et(ye){if(ye>ft)throw new Q("size","<= 1GiB",ye);return ye--,ye|=ye>>>1,ye|=ye>>>2,ye|=ye>>>4,ye|=ye>>>8,ye|=ye>>>16,ye++,ye}function Lt(ye,q){return ye<=0||q.length===0&&q.ended?0:(q.state&Y)!==0?1:r(ye)?q.flowing&&q.length?q.buffer.first().length:q.length:ye<=q.length?ye:q.ended?q.length:0}xe.prototype.read=function(ye){E("read",ye),ye===void 0?ye=NaN:n(ye)||(ye=a(ye,10));const q=this._readableState,L=ye;if(ye>q.highWaterMark&&(q.highWaterMark=Et(ye)),ye!==0&&(q.state&=-129),ye===0&&q.needReadable&&((q.highWaterMark!==0?q.length>=q.highWaterMark:q.length>0)||q.ended))return E("read: emitReadable",q.length,q.ended),q.length===0&&q.ended?et(this):zt(this),null;if(ye=Lt(ye,q),ye===0&&q.ended)return q.length===0&&et(this),null;let V=(q.state&Pe)!==0;if(E("need readable",V),(q.length===0||q.length-ye<q.highWaterMark)&&(V=!0,E("length less than watermark",V)),q.ended||q.reading||q.destroyed||q.errored||!q.constructed)V=!1,E("reading, ended or constructing",V);else if(V){E("do read"),q.state|=we|Me,q.length===0&&(q.state|=Pe);try{this._read(q.highWaterMark)}catch(de){G(this,de)}q.state&=-33,q.reading||(ye=Lt(L,q))}let he;return ye>0?he=Be(ye,q):he=null,he===null?(q.needReadable=q.length<=q.highWaterMark,ye=0):(q.length-=ye,q.multiAwaitDrain?q.awaitDrainWriters.clear():q.awaitDrainWriters=null),q.length===0&&(q.ended||(q.needReadable=!0),L!==ye&&q.ended&&et(this)),he!==null&&!q.errorEmitted&&!q.closeEmitted&&(q.dataEmitted=!0,this.emit("data",he)),he};function Tt(ye,q){if(E("onEofChunk"),!q.ended){if(q.decoder){const L=q.decoder.end();L&&L.length&&(q.buffer.push(L),q.length+=q.objectMode?1:L.length)}q.ended=!0,q.sync?zt(ye):(q.needReadable=!1,q.emittedReadable=!0,ge(ye))}}function zt(ye){const q=ye._readableState;E("emitReadable",q.needReadable,q.emittedReadable),q.needReadable=!1,q.emittedReadable||(E("emitReadable",q.flowing),q.emittedReadable=!0,e.nextTick(ge,ye))}function ge(ye){const q=ye._readableState;E("emitReadable_",q.destroyed,q.length,q.ended),!q.destroyed&&!q.errored&&(q.length||q.ended)&&(ye.emit("readable"),q.emittedReadable=!1),q.needReadable=!q.flowing&&!q.ended&&q.length<=q.highWaterMark,ct(ye)}function R(ye,q){!q.readingMore&&q.constructed&&(q.readingMore=!0,e.nextTick(H,ye,q))}function H(ye,q){for(;!q.reading&&!q.ended&&(q.length<q.highWaterMark||q.flowing&&q.length===0);){const L=q.length;if(E("maybeReadMore read 0"),ye.read(0),L===q.length)break}q.readingMore=!1}xe.prototype._read=function(ye){throw new W("_read()")},xe.prototype.pipe=function(ye,q){const L=this,V=this._readableState;V.pipes.length===1&&(V.multiAwaitDrain||(V.multiAwaitDrain=!0,V.awaitDrainWriters=new c(V.awaitDrainWriters?[V.awaitDrainWriters]:[]))),V.pipes.push(ye),E("pipe count=%d opts=%j",V.pipes.length,q);const de=(!q||q.end!==!1)&&ye!==e.stdout&&ye!==e.stderr?it:dr;V.endEmitted?e.nextTick(de):L.once("end",de),ye.on("unpipe",Fe);function Fe(Dn,ei){E("onunpipe"),Dn===L&&ei&&ei.hasUnpiped===!1&&(ei.hasUnpiped=!0,Bt())}function it(){E("onend"),ye.end()}let Dt,un=!1;function Bt(){E("cleanup"),ye.removeListener("close",$n),ye.removeListener("finish",cr),Dt&&ye.removeListener("drain",Dt),ye.removeListener("error",Tn),ye.removeListener("unpipe",Fe),L.removeListener("end",it),L.removeListener("end",dr),L.removeListener("data",Xt),un=!0,Dt&&V.awaitDrainWriters&&(!ye._writableState||ye._writableState.needDrain)&&Dt()}function Vt(){un||(V.pipes.length===1&&V.pipes[0]===ye?(E("false write response, pause",0),V.awaitDrainWriters=ye,V.multiAwaitDrain=!1):V.pipes.length>1&&V.pipes.includes(ye)&&(E("false write response, pause",V.awaitDrainWriters.size),V.awaitDrainWriters.add(ye)),L.pause()),Dt||(Dt=fe(L,ye),ye.on("drain",Dt))}L.on("data",Xt);function Xt(Dn){E("ondata");const ei=ye.write(Dn);E("dest.write",ei),ei===!1&&Vt()}function Tn(Dn){if(E("onerror",Dn),dr(),ye.removeListener("error",Tn),ye.listenerCount("error")===0){const ei=ye._writableState||ye._readableState;ei&&!ei.errorEmitted?G(ye,Dn):ye.emit("error",Dn)}}v(ye,"error",Tn);function $n(){ye.removeListener("finish",cr),dr()}ye.once("close",$n);function cr(){E("onfinish"),ye.removeListener("close",$n),dr()}ye.once("finish",cr);function dr(){E("unpipe"),L.unpipe(ye)}return ye.emit("pipe",L),ye.writableNeedDrain===!0?Vt():V.flowing||(E("pipe resume"),L.resume()),ye};function fe(ye,q){return function(){const V=ye._readableState;V.awaitDrainWriters===q?(E("pipeOnDrain",1),V.awaitDrainWriters=null):V.multiAwaitDrain&&(E("pipeOnDrain",V.awaitDrainWriters.size),V.awaitDrainWriters.delete(q)),(!V.awaitDrainWriters||V.awaitDrainWriters.size===0)&&ye.listenerCount("data")&&ye.resume()}}xe.prototype.unpipe=function(ye){const q=this._readableState,L={hasUnpiped:!1};if(q.pipes.length===0)return this;if(!ye){const he=q.pipes;q.pipes=[],this.pause();for(let de=0;de<he.length;de++)he[de].emit("unpipe",this,{hasUnpiped:!1});return this}const V=t(q.pipes,ye);return V===-1?this:(q.pipes.splice(V,1),q.pipes.length===0&&this.pause(),ye.emit("unpipe",this,L),this)},xe.prototype.on=function(ye,q){const L=w.prototype.on.call(this,ye,q),V=this._readableState;return ye==="data"?(V.readableListening=this.listenerCount("readable")>0,V.flowing!==!1&&this.resume()):ye==="readable"&&!V.endEmitted&&!V.readableListening&&(V.readableListening=V.needReadable=!0,V.flowing=!1,V.emittedReadable=!1,E("on readable",V.length,V.reading),V.length?zt(this):V.reading||e.nextTick(be,this)),L},xe.prototype.addListener=xe.prototype.on,xe.prototype.removeListener=function(ye,q){const L=w.prototype.removeListener.call(this,ye,q);return ye==="readable"&&e.nextTick(Ie,this),L},xe.prototype.off=xe.prototype.removeListener,xe.prototype.removeAllListeners=function(ye){const q=w.prototype.removeAllListeners.apply(this,arguments);return(ye==="readable"||ye===void 0)&&e.nextTick(Ie,this),q};function Ie(ye){const q=ye._readableState;q.readableListening=ye.listenerCount("readable")>0,q.resumeScheduled&&q[se]===!1?q.flowing=!0:ye.listenerCount("data")>0?ye.resume():q.readableListening||(q.flowing=null)}function be(ye){E("readable nexttick read 0"),ye.read(0)}xe.prototype.resume=function(){const ye=this._readableState;return ye.flowing||(E("resume"),ye.flowing=!ye.readableListening,Ee(this,ye)),ye[se]=!1,this};function Ee(ye,q){q.resumeScheduled||(q.resumeScheduled=!0,e.nextTick(le,ye,q))}function le(ye,q){E("resume",q.reading),q.reading||ye.read(0),q.resumeScheduled=!1,ye.emit("resume"),ct(ye),q.flowing&&!q.reading&&ye.read(0)}xe.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[se]=!0,this};function ct(ye){const q=ye._readableState;for(E("flow",q.flowing);q.flowing&&ye.read()!==null;);}xe.prototype.wrap=function(ye){let q=!1;ye.on("data",V=>{!this.push(V)&&ye.pause&&(q=!0,ye.pause())}),ye.on("end",()=>{this.push(null)}),ye.on("error",V=>{G(this,V)}),ye.on("close",()=>{this.destroy()}),ye.on("destroy",()=>{this.destroy()}),this._read=()=>{q&&ye.resume&&(q=!1,ye.resume())};const L=o(ye);for(let V=1;V<L.length;V++){const he=L[V];this[he]===void 0&&typeof ye[he]=="function"&&(this[he]=ye[he].bind(ye))}return this},xe.prototype[h]=function(){return yt(this)},xe.prototype.iterator=function(ye){return ye!==void 0&&me(ye,"options"),yt(this,ye)};function yt(ye,q){typeof ye.read!="function"&&(ye=xe.wrap(ye,{objectMode:!0}));const L=P(ye,q);return L.stream=ye,L}async function*P(ye,q){let L=ae;function V(Fe){this===ye?(L(),L=ae):L=Fe}ye.on("readable",V);let he;const de=S(ye,{writable:!1},Fe=>{he=Fe?D(he,Fe):null,L(),L=ae});try{for(;;){const Fe=ye.destroyed?null:ye.read();if(Fe!==null)yield Fe;else{if(he)throw he;if(he===null)return;await new u(V)}}}catch(Fe){throw he=D(he,Fe),he}finally{(he||(q==null?void 0:q.destroyOnReturn)!==!1)&&(he===void 0||ye._readableState.autoDestroy)?A.destroyer(ye,null):(ye.off("readable",V),de())}}i(xe.prototype,{readable:{__proto__:null,get(){const ye=this._readableState;return!!ye&&ye.readable!==!1&&!ye.destroyed&&!ye.errorEmitted&&!ye.endEmitted},set(ye){this._readableState&&(this._readableState.readable=!!ye)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(ye){this._readableState&&(this._readableState.flowing=ye)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(ye){this._readableState&&(this._readableState.destroyed=ye)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Le.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[se]!==!1},set(ye){this[se]=!!ye}}}),xe._fromList=Be;function Be(ye,q){if(q.length===0)return null;let L;return q.objectMode?L=q.buffer.shift():!ye||ye>=q.length?(q.decoder?L=q.buffer.join(""):q.buffer.length===1?L=q.buffer.first():L=q.buffer.concat(q.length),q.buffer.clear()):L=q.buffer.consume(ye,q.decoder),L}function et(ye){const q=ye._readableState;E("endReadable",q.endEmitted),q.endEmitted||(q.ended=!0,e.nextTick(pe,q,ye))}function pe(ye,q){if(E("endReadableNT",ye.endEmitted,ye.length),!ye.errored&&!ye.closeEmitted&&!ye.endEmitted&&ye.length===0){if(ye.endEmitted=!0,q.emit("end"),q.writable&&q.allowHalfOpen===!1)e.nextTick(De,q);else if(ye.autoDestroy){const L=q._writableState;(!L||L.autoDestroy&&(L.finished||L.writable===!1))&&q.destroy()}}}function De(ye){ye.writable&&!ye.writableEnded&&!ye.destroyed&&ye.end()}xe.from=function(ye,q){return ee(xe,ye,q)};let Ke;function Ct(){return Ke===void 0&&(Ke={}),Ke}return xe.fromWeb=function(ye,q){return Ct().newStreamReadableFromReadableStream(ye,q)},xe.toWeb=function(ye,q){return Ct().newReadableStreamFromStreamReadable(ye,q)},xe.wrap=function(ye,q){var L,V;return new xe({objectMode:(L=(V=ye.readableObjectMode)!==null&&V!==void 0?V:ye.objectMode)!==null&&L!==void 0?L:!0,...q,destroy(he,de){A.destroyer(ye,he),de(he)}}).wrap(ye)},Yx}var Xx,YN;function JC(){if(YN)return Xx;YN=1;const e=kd(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:u,SymbolHasInstance:c}=Ur();Xx=me,me.WritableState=K;const{EventEmitter:f}=gw(),h=YC().Stream,{Buffer:m}=fc(),g=Ch(),{addAbortSignal:w}=yw(),{getHighWaterMark:v,getDefaultHighWaterMark:_}=bw(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:A,ERR_STREAM_ALREADY_FINISHED:O,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:D,ERR_UNKNOWN_ENCODING:B}=di().codes,{errorOrDestroy:W}=g;o(me.prototype,h.prototype),o(me,h);function Q(){}const M=u("kOnFinished");function K(Te,z,Ce){typeof Ce!="boolean"&&(Ce=z instanceof Pl()),this.objectMode=!!(Te&&Te.objectMode),Ce&&(this.objectMode=this.objectMode||!!(Te&&Te.writableObjectMode)),this.highWaterMark=Te?v(this,Te,"writableHighWaterMark",Ce):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ne=!!(Te&&Te.decodeStrings===!1);this.decodeStrings=!Ne,this.defaultEncoding=Te&&Te.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,U(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Te||Te.emitClose!==!1,this.autoDestroy=!Te||Te.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[M]=[]}function U(Te){Te.buffered=[],Te.bufferedIndex=0,Te.allBuffers=!0,Te.allNoop=!0}K.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(K.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function me(Te){const z=this instanceof Pl();if(!z&&!r(me,this))return new me(Te);this._writableState=new K(Te,this,z),Te&&(typeof Te.write=="function"&&(this._write=Te.write),typeof Te.writev=="function"&&(this._writev=Te.writev),typeof Te.destroy=="function"&&(this._destroy=Te.destroy),typeof Te.final=="function"&&(this._final=Te.final),typeof Te.construct=="function"&&(this._construct=Te.construct),Te.signal&&w(Te.signal,this)),h.call(this,Te),g.construct(this,()=>{const Ce=this._writableState;Ce.writing||we(this,Ce),Re(this,Ce)})}a(me,c,{__proto__:null,value:function(Te){return r(this,Te)?!0:this!==me?!1:Te&&Te._writableState instanceof K}}),me.prototype.pipe=function(){W(this,new C)};function se(Te,z,Ce,Ne){const ce=Te._writableState;if(typeof Ce=="function")Ne=Ce,Ce=ce.defaultEncoding;else{if(!Ce)Ce=ce.defaultEncoding;else if(Ce!=="buffer"&&!m.isEncoding(Ce))throw new B(Ce);typeof Ne!="function"&&(Ne=Q)}if(z===null)throw new I;if(!ce.objectMode)if(typeof z=="string")ce.decodeStrings!==!1&&(z=m.from(z,Ce),Ce="buffer");else if(z instanceof m)Ce="buffer";else if(h._isUint8Array(z))z=h._uint8ArrayToBuffer(z),Ce="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],z);let ie;return ce.ending?ie=new D:ce.destroyed&&(ie=new A("write")),ie?(e.nextTick(Ne,ie),W(Te,ie,!0),ie):(ce.pendingcb++,ne(Te,ce,z,Ce,Ne))}me.prototype.write=function(Te,z,Ce){return se(this,Te,z,Ce)===!0},me.prototype.cork=function(){this._writableState.corked++},me.prototype.uncork=function(){const Te=this._writableState;Te.corked&&(Te.corked--,Te.writing||we(this,Te))},me.prototype.setDefaultEncoding=function(z){if(typeof z=="string"&&(z=s(z)),!m.isEncoding(z))throw new B(z);return this._writableState.defaultEncoding=z,this};function ne(Te,z,Ce,Ne,ce){const ie=z.objectMode?1:Ce.length;z.length+=ie;const X=z.length<z.highWaterMark;return X||(z.needDrain=!0),z.writing||z.corked||z.errored||!z.constructed?(z.buffered.push({chunk:Ce,encoding:Ne,callback:ce}),z.allBuffers&&Ne!=="buffer"&&(z.allBuffers=!1),z.allNoop&&ce!==Q&&(z.allNoop=!1)):(z.writelen=ie,z.writecb=ce,z.writing=!0,z.sync=!0,Te._write(Ce,Ne,z.onwrite),z.sync=!1),X&&!z.errored&&!z.destroyed}function ee(Te,z,Ce,Ne,ce,ie,X){z.writelen=Ne,z.writecb=X,z.writing=!0,z.sync=!0,z.destroyed?z.onwrite(new A("write")):Ce?Te._writev(ce,z.onwrite):Te._write(ce,ie,z.onwrite),z.sync=!1}function ae(Te,z,Ce,Ne){--z.pendingcb,Ne(Ce),re(z),W(Te,Ce)}function G(Te,z){const Ce=Te._writableState,Ne=Ce.sync,ce=Ce.writecb;if(typeof ce!="function"){W(Te,new E);return}Ce.writing=!1,Ce.writecb=null,Ce.length-=Ce.writelen,Ce.writelen=0,z?(z.stack,Ce.errored||(Ce.errored=z),Te._readableState&&!Te._readableState.errored&&(Te._readableState.errored=z),Ne?e.nextTick(ae,Te,Ce,z,ce):ae(Te,Ce,z,ce)):(Ce.buffered.length>Ce.bufferedIndex&&we(Te,Ce),Ne?Ce.afterWriteTickInfo!==null&&Ce.afterWriteTickInfo.cb===ce?Ce.afterWriteTickInfo.count++:(Ce.afterWriteTickInfo={count:1,cb:ce,stream:Te,state:Ce},e.nextTick(Y,Ce.afterWriteTickInfo)):J(Te,Ce,1,ce))}function Y({stream:Te,state:z,count:Ce,cb:Ne}){return z.afterWriteTickInfo=null,J(Te,z,Ce,Ne)}function J(Te,z,Ce,Ne){for(!z.ending&&!Te.destroyed&&z.length===0&&z.needDrain&&(z.needDrain=!1,Te.emit("drain"));Ce-- >0;)z.pendingcb--,Ne();z.destroyed&&re(z),Re(Te,z)}function re(Te){if(Te.writing)return;for(let ce=Te.bufferedIndex;ce<Te.buffered.length;++ce){var z;const{chunk:ie,callback:X}=Te.buffered[ce],_e=Te.objectMode?1:ie.length;Te.length-=_e,X((z=Te.errored)!==null&&z!==void 0?z:new A("write"))}const Ce=Te[M].splice(0);for(let ce=0;ce<Ce.length;ce++){var Ne;Ce[ce]((Ne=Te.errored)!==null&&Ne!==void 0?Ne:new A("end"))}U(Te)}function we(Te,z){if(z.corked||z.bufferProcessing||z.destroyed||!z.constructed)return;const{buffered:Ce,bufferedIndex:Ne,objectMode:ce}=z,ie=Ce.length-Ne;if(!ie)return;let X=Ne;if(z.bufferProcessing=!0,ie>1&&Te._writev){z.pendingcb-=ie-1;const _e=z.allNoop?Q:xe=>{for(let Ve=X;Ve<Ce.length;++Ve)Ce[Ve].callback(xe)},Le=z.allNoop&&X===0?Ce:t(Ce,X);Le.allBuffers=z.allBuffers,ee(Te,z,!0,z.length,Le,"",_e),U(z)}else{do{const{chunk:_e,encoding:Le,callback:xe}=Ce[X];Ce[X++]=null;const Ve=ce?1:_e.length;ee(Te,z,!1,Ve,_e,Le,xe)}while(X<Ce.length&&!z.writing);X===Ce.length?U(z):X>256?(Ce.splice(0,X),z.bufferedIndex=0):z.bufferedIndex=X}z.bufferProcessing=!1}me.prototype._write=function(Te,z,Ce){if(this._writev)this._writev([{chunk:Te,encoding:z}],Ce);else throw new S("_write()")},me.prototype._writev=null,me.prototype.end=function(Te,z,Ce){const Ne=this._writableState;typeof Te=="function"?(Ce=Te,Te=null,z=null):typeof z=="function"&&(Ce=z,z=null);let ce;if(Te!=null){const ie=se(this,Te,z);ie instanceof n&&(ce=ie)}return Ne.corked&&(Ne.corked=1,this.uncork()),ce||(!Ne.errored&&!Ne.ending?(Ne.ending=!0,Re(this,Ne,!0),Ne.ended=!0):Ne.finished?ce=new O("end"):Ne.destroyed&&(ce=new A("end"))),typeof Ce=="function"&&(ce||Ne.finished?e.nextTick(Ce,ce):Ne[M].push(Ce)),this};function ke(Te){return Te.ending&&!Te.destroyed&&Te.constructed&&Te.length===0&&!Te.errored&&Te.buffered.length===0&&!Te.finished&&!Te.writing&&!Te.errorEmitted&&!Te.closeEmitted}function Me(Te,z){let Ce=!1;function Ne(ce){if(Ce){W(Te,ce??E());return}if(Ce=!0,z.pendingcb--,ce){const ie=z[M].splice(0);for(let X=0;X<ie.length;X++)ie[X](ce);W(Te,ce,z.sync)}else ke(z)&&(z.prefinished=!0,Te.emit("prefinish"),z.pendingcb++,e.nextTick(Ae,Te,z))}z.sync=!0,z.pendingcb++;try{Te._final(Ne)}catch(ce){Ne(ce)}z.sync=!1}function Pe(Te,z){!z.prefinished&&!z.finalCalled&&(typeof Te._final=="function"&&!z.destroyed?(z.finalCalled=!0,Me(Te,z)):(z.prefinished=!0,Te.emit("prefinish")))}function Re(Te,z,Ce){ke(z)&&(Pe(Te,z),z.pendingcb===0&&(Ce?(z.pendingcb++,e.nextTick((Ne,ce)=>{ke(ce)?Ae(Ne,ce):ce.pendingcb--},Te,z)):ke(z)&&(z.pendingcb++,Ae(Te,z))))}function Ae(Te,z){z.pendingcb--,z.finished=!0;const Ce=z[M].splice(0);for(let Ne=0;Ne<Ce.length;Ne++)Ce[Ne]();if(Te.emit("finish"),z.autoDestroy){const Ne=Te._readableState;(!Ne||Ne.autoDestroy&&(Ne.endEmitted||Ne.readable===!1))&&Te.destroy()}}i(me.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Te){this._writableState&&(this._writableState.destroyed=Te)}},writable:{__proto__:null,get(){const Te=this._writableState;return!!Te&&Te.writable!==!1&&!Te.destroyed&&!Te.errored&&!Te.ending&&!Te.ended},set(Te){this._writableState&&(this._writableState.writable=!!Te)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Te=this._writableState;return Te?!Te.destroyed&&!Te.ending&&Te.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const He=g.destroy;me.prototype.destroy=function(Te,z){const Ce=this._writableState;return!Ce.destroyed&&(Ce.bufferedIndex<Ce.buffered.length||Ce[M].length)&&e.nextTick(re,Ce),He.call(this,Te,z),this},me.prototype._undestroy=g.undestroy,me.prototype._destroy=function(Te,z){z(Te)},me.prototype[f.captureRejectionSymbol]=function(Te){this.destroy(Te)};let st;function Oe(){return st===void 0&&(st={}),st}return me.fromWeb=function(Te,z){return Oe().newStreamWritableFromWritableStream(Te,z)},me.toWeb=function(Te){return Oe().newWritableStreamFromStreamWritable(Te)},Xx}var Jx,XN;function hX(){if(XN)return Jx;XN=1;const e=kd(),t=fc(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:u,isReadableStream:c,isWritableStream:f}=Hl(),h=hc(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:w}}=di(),{destroyer:v}=Ch(),_=Pl(),x=vw(),S=JC(),{createDeferredPromise:E}=Ei(),C=_j(),A=globalThis.Blob||t.Blob,O=typeof A<"u"?function(K){return K instanceof A}:function(K){return!1},I=globalThis.AbortController||Mm().AbortController,{FunctionPrototypeCall:D}=Ur();class B extends _{constructor(K){super(K),(K==null?void 0:K.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(K==null?void 0:K.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Jx=function M(K,U){if(u(K))return K;if(o(K))return Q({readable:K});if(s(K))return Q({writable:K});if(i(K))return Q({writable:!1,readable:!1});if(c(K))return Q({readable:x.fromWeb(K)});if(f(K))return Q({writable:S.fromWeb(K)});if(typeof K=="function"){const{value:se,write:ne,final:ee,destroy:ae}=W(K);if(a(se))return C(B,se,{objectMode:!0,write:ne,final:ee,destroy:ae});const G=se==null?void 0:se.then;if(typeof G=="function"){let Y;const J=D(G,se,re=>{if(re!=null)throw new w("nully","body",re)},re=>{v(Y,re)});return Y=new B({objectMode:!0,readable:!1,write:ne,final(re){ee(async()=>{try{await J,e.nextTick(re,null)}catch(we){e.nextTick(re,we)}})},destroy:ae})}throw new w("Iterable, AsyncIterable or AsyncFunction",U,se)}if(O(K))return M(K.arrayBuffer());if(a(K))return C(B,K,{objectMode:!0,writable:!1});if(c(K==null?void 0:K.readable)&&f(K==null?void 0:K.writable))return B.fromWeb(K);if(typeof(K==null?void 0:K.writable)=="object"||typeof(K==null?void 0:K.readable)=="object"){const se=K!=null&&K.readable?o(K==null?void 0:K.readable)?K==null?void 0:K.readable:M(K.readable):void 0,ne=K!=null&&K.writable?s(K==null?void 0:K.writable)?K==null?void 0:K.writable:M(K.writable):void 0;return Q({readable:se,writable:ne})}const me=K==null?void 0:K.then;if(typeof me=="function"){let se;return D(me,K,ne=>{ne!=null&&se.push(ne),se.push(null)},ne=>{v(se,ne)}),se=new B({objectMode:!0,writable:!1,read(){}})}throw new g(U,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],K)};function W(M){let{promise:K,resolve:U}=E();const me=new I,se=me.signal;return{value:M(async function*(){for(;;){const ee=K;K=null;const{chunk:ae,done:G,cb:Y}=await ee;if(e.nextTick(Y),G)return;if(se.aborted)throw new m(void 0,{cause:se.reason});({promise:K,resolve:U}=E()),yield ae}}(),{signal:se}),write(ee,ae,G){const Y=U;U=null,Y({chunk:ee,done:!1,cb:G})},final(ee){const ae=U;U=null,ae({done:!0,cb:ee})},destroy(ee,ae){me.abort(),ae(ee)}}}function Q(M){const K=M.readable&&typeof M.readable.read!="function"?x.wrap(M.readable):M.readable,U=M.writable;let me=!!n(K),se=!!r(U),ne,ee,ae,G,Y;function J(re){const we=G;G=null,we?we(re):re&&Y.destroy(re)}return Y=new B({readableObjectMode:!!(K!=null&&K.readableObjectMode),writableObjectMode:!!(U!=null&&U.writableObjectMode),readable:me,writable:se}),se&&(h(U,re=>{se=!1,re&&v(K,re),J(re)}),Y._write=function(re,we,ke){U.write(re,we)?ke():ne=ke},Y._final=function(re){U.end(),ee=re},U.on("drain",function(){if(ne){const re=ne;ne=null,re()}}),U.on("finish",function(){if(ee){const re=ee;ee=null,re()}})),me&&(h(K,re=>{me=!1,re&&v(K,re),J(re)}),K.on("readable",function(){if(ae){const re=ae;ae=null,re()}}),K.on("end",function(){Y.push(null)}),Y._read=function(){for(;;){const re=K.read();if(re===null){ae=Y._read;return}if(!Y.push(re))return}}),Y._destroy=function(re,we){!re&&G!==null&&(re=new m),ae=null,ne=null,ee=null,G===null?we(re):(G=we,v(U,re),v(K,re))},Y}return Jx}var Qx,JN;function Pl(){if(JN)return Qx;JN=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Ur();Qx=o;const a=vw(),i=JC();r(o.prototype,a.prototype),r(o,a);{const f=n(i.prototype);for(let h=0;h<f.length;h++){const m=f[h];o.prototype[m]||(o.prototype[m]=i.prototype[m])}}function o(f){if(!(this instanceof o))return new o(f);a.call(this,f),i.call(this,f),f?(this.allowHalfOpen=f.allowHalfOpen!==!1,f.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),f.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(f){this._readableState&&this._writableState&&(this._readableState.destroyed=f,this._writableState.destroyed=f)}}});let s;function u(){return s===void 0&&(s={}),s}o.fromWeb=function(f,h){return u().newStreamDuplexFromReadableWritablePair(f,h)},o.toWeb=function(f){return u().newReadableWritablePairFromDuplex(f)};let c;return o.from=function(f){return c||(c=hX()),c(f,"body")},Qx}var eS,QN;function xj(){if(QN)return eS;QN=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Ur();eS=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=di().codes,r=Pl(),{getHighWaterMark:a}=bw();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const f=c?a(this,c,"readableHighWaterMark",!0):null;f===0&&(c={...c,highWaterMark:null,readableHighWaterMark:f,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[i]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",u)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((f,h)=>{if(f){c?c(f):this.destroy(f);return}h!=null&&this.push(h),this.push(null),c&&c()}):(this.push(null),c&&c())}function u(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,f,h){throw new n("_transform()")},o.prototype._write=function(c,f,h){const m=this._readableState,g=this._writableState,w=m.length;this._transform(c,f,(v,_)=>{if(v){h(v);return}_!=null&&this.push(_),g.ended||w===m.length||m.length<m.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const c=this[i];this[i]=null,c()}},eS}var tS,eI;function Sj(){if(eI)return tS;eI=1;const{ObjectSetPrototypeOf:e}=Ur();tS=n;const t=xj();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},tS}var nS,tI;function QC(){if(tI)return nS;tI=1;const e=kd(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Ur(),i=hc(),{once:o}=Ei(),s=Ch(),u=Pl(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:w},AbortError:v}=di(),{validateFunction:_,validateAbortSignal:x}=A0(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:A,isTransformStream:O,isWebStream:I,isReadableStream:D,isReadableFinished:B}=Hl(),W=globalThis.AbortController||Mm().AbortController;let Q,M,K;function U(re,we,ke){let Me=!1;re.on("close",()=>{Me=!0});const Pe=i(re,{readable:we,writable:ke},Re=>{Me=!Re});return{destroy:Re=>{Me||(Me=!0,s.destroyer(re,Re||new g("pipe")))},cleanup:Pe}}function me(re){return _(re[re.length-1],"streams[stream.length - 1]"),re.pop()}function se(re){if(S(re))return re;if(C(re))return ne(re);throw new f("val",["Readable","Iterable","AsyncIterable"],re)}async function*ne(re){M||(M=vw()),yield*M.prototype[r].call(re)}async function ee(re,we,ke,{end:Me}){let Pe,Re=null;const Ae=Oe=>{if(Oe&&(Pe=Oe),Re){const Te=Re;Re=null,Te()}},He=()=>new n((Oe,Te)=>{Pe?Te(Pe):Re=()=>{Pe?Te(Pe):Oe()}});we.on("drain",Ae);const st=i(we,{readable:!1},Ae);try{we.writableNeedDrain&&await He();for await(const Oe of re)we.write(Oe)||await He();Me&&(we.end(),await He()),ke()}catch(Oe){ke(Pe!==Oe?c(Pe,Oe):Oe)}finally{st(),we.off("drain",Ae)}}async function ae(re,we,ke,{end:Me}){O(we)&&(we=we.writable);const Pe=we.getWriter();try{for await(const Re of re)await Pe.ready,Pe.write(Re).catch(()=>{});await Pe.ready,Me&&await Pe.close(),ke()}catch(Re){try{await Pe.abort(Re),ke(Re)}catch(Ae){ke(Ae)}}}function G(...re){return Y(re,o(me(re)))}function Y(re,we,ke){if(re.length===1&&t(re[0])&&(re=re[0]),re.length<2)throw new m("streams");const Me=new W,Pe=Me.signal,Re=ke==null?void 0:ke.signal,Ae=[];x(Re,"options.signal");function He(){ce(new v)}K=K||Ei().addAbortListener;let st;Re&&(st=K(Re,He));let Oe,Te;const z=[];let Ce=0;function Ne(xe){ce(xe,--Ce===0)}function ce(xe,Ve){var xt;if(xe&&(!Oe||Oe.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Oe=xe),!(!Oe&&!Ve)){for(;z.length;)z.shift()(Oe);(xt=st)===null||xt===void 0||xt[a](),Me.abort(),Ve&&(Oe||Ae.forEach(ft=>ft()),e.nextTick(we,Oe,Te))}}let ie;for(let xe=0;xe<re.length;xe++){const Ve=re[xe],xt=xe<re.length-1,ft=xe>0,Et=xt||(ke==null?void 0:ke.end)!==!1,Lt=xe===re.length-1;if(A(Ve)){let Tt=function(zt){zt&&zt.name!=="AbortError"&&zt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ne(zt)};var Le=Tt;if(Et){const{destroy:zt,cleanup:ge}=U(Ve,xt,ft);z.push(zt),E(Ve)&&Lt&&Ae.push(ge)}Ve.on("error",Tt),E(Ve)&&Lt&&Ae.push(()=>{Ve.removeListener("error",Tt)})}if(xe===0)if(typeof Ve=="function"){if(ie=Ve({signal:Pe}),!S(ie))throw new h("Iterable, AsyncIterable or Stream","source",ie)}else S(Ve)||C(Ve)||O(Ve)?ie=Ve:ie=u.from(Ve);else if(typeof Ve=="function"){if(O(ie)){var X;ie=se((X=ie)===null||X===void 0?void 0:X.readable)}else ie=se(ie);if(ie=Ve(ie,{signal:Pe}),xt){if(!S(ie,!0))throw new h("AsyncIterable",`transform[${xe-1}]`,ie)}else{var _e;Q||(Q=Sj());const Tt=new Q({objectMode:!0}),zt=(_e=ie)===null||_e===void 0?void 0:_e.then;if(typeof zt=="function")Ce++,zt.call(ie,H=>{Te=H,H!=null&&Tt.write(H),Et&&Tt.end(),e.nextTick(Ne)},H=>{Tt.destroy(H),e.nextTick(Ne,H)});else if(S(ie,!0))Ce++,ee(ie,Tt,Ne,{end:Et});else if(D(ie)||O(ie)){const H=ie.readable||ie;Ce++,ee(H,Tt,Ne,{end:Et})}else throw new h("AsyncIterable or Promise","destination",ie);ie=Tt;const{destroy:ge,cleanup:R}=U(ie,!1,!0);z.push(ge),Lt&&Ae.push(R)}}else if(A(Ve)){if(C(ie)){Ce+=2;const Tt=J(ie,Ve,Ne,{end:Et});E(Ve)&&Lt&&Ae.push(Tt)}else if(O(ie)||D(ie)){const Tt=ie.readable||ie;Ce++,ee(Tt,Ve,Ne,{end:Et})}else if(S(ie))Ce++,ee(ie,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ve}else if(I(Ve)){if(C(ie))Ce++,ae(se(ie),Ve,Ne,{end:Et});else if(D(ie)||S(ie))Ce++,ae(ie,Ve,Ne,{end:Et});else if(O(ie))Ce++,ae(ie.readable,Ve,Ne,{end:Et});else throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ie);ie=Ve}else ie=u.from(Ve)}return(Pe!=null&&Pe.aborted||Re!=null&&Re.aborted)&&e.nextTick(He),ie}function J(re,we,ke,{end:Me}){let Pe=!1;if(we.on("close",()=>{Pe||ke(new w)}),re.pipe(we,{end:!1}),Me){let Ae=function(){Pe=!0,we.end()};var Re=Ae;B(re)?e.nextTick(Ae):re.once("end",Ae)}else ke();return i(re,{readable:!0,writable:!1},Ae=>{const He=re._readableState;Ae&&Ae.code==="ERR_STREAM_PREMATURE_CLOSE"&&He&&He.ended&&!He.errored&&!He.errorEmitted?re.once("end",ke).once("error",ke):ke(Ae)}),i(we,{readable:!1,writable:!0},ke)}return nS={pipelineImpl:Y,pipeline:G},nS}var rS,nI;function Ej(){if(nI)return rS;nI=1;const{pipeline:e}=QC(),t=Pl(),{destroyer:n}=Ch(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:u,isReadableStream:c}=Hl(),{AbortError:f,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=di(),g=hc();return rS=function(...v){if(v.length===0)throw new m("streams");if(v.length===1)return t.from(v[0]);const _=[...v];if(typeof v[0]=="function"&&(v[0]=t.from(v[0])),typeof v[v.length-1]=="function"){const Q=v.length-1;v[Q]=t.from(v[Q])}for(let Q=0;Q<v.length;++Q)if(!(!r(v[Q])&&!o(v[Q]))){if(Q<v.length-1&&!(a(v[Q])||c(v[Q])||s(v[Q])))throw new h(`streams[${Q}]`,_[Q],"must be readable");if(Q>0&&!(i(v[Q])||u(v[Q])||s(v[Q])))throw new h(`streams[${Q}]`,_[Q],"must be writable")}let x,S,E,C,A;function O(Q){const M=C;C=null,M?M(Q):Q?A.destroy(Q):!W&&!B&&A.destroy()}const I=v[0],D=e(v,O),B=!!(i(I)||u(I)||s(I)),W=!!(a(D)||c(D)||s(D));if(A=new t({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(D!=null&&D.readableObjectMode),writable:B,readable:W}),B){if(r(I))A._write=function(M,K,U){I.write(M,K)?U():x=U},A._final=function(M){I.end(),S=M},I.on("drain",function(){if(x){const M=x;x=null,M()}});else if(o(I)){const K=(s(I)?I.writable:I).getWriter();A._write=async function(U,me,se){try{await K.ready,K.write(U).catch(()=>{}),se()}catch(ne){se(ne)}},A._final=async function(U){try{await K.ready,K.close().catch(()=>{}),S=U}catch(me){U(me)}}}const Q=s(D)?D.readable:D;g(Q,()=>{if(S){const M=S;S=null,M()}})}if(W){if(r(D))D.on("readable",function(){if(E){const Q=E;E=null,Q()}}),D.on("end",function(){A.push(null)}),A._read=function(){for(;;){const Q=D.read();if(Q===null){E=A._read;return}if(!A.push(Q))return}};else if(o(D)){const M=(s(D)?D.readable:D).getReader();A._read=async function(){for(;;)try{const{value:K,done:U}=await M.read();if(!A.push(K))return;if(U){A.push(null);return}}catch{return}}}}return A._destroy=function(Q,M){!Q&&C!==null&&(Q=new f),E=null,x=null,S=null,C===null?M(Q):(C=M,r(D)&&n(D,Q))},A},rS}var rI;function pX(){if(rI)return Ly;rI=1;const e=globalThis.AbortController||Mm().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=di(),{validateAbortSignal:o,validateInteger:s,validateObject:u}=A0(),c=Ur().Symbol("kWeak"),f=Ur().Symbol("kResistStopPropagation"),{finished:h}=hc(),m=Ej(),{addAbortSignalNoValidate:g}=yw(),{isWritable:w,isNodeStream:v}=Hl(),{deprecate:_}=Ei(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:A,Promise:O,PromiseReject:I,PromiseResolve:D,PromisePrototypeThen:B,Symbol:W}=Ur(),Q=W("kEmpty"),M=W("kEof");function K(Re,Ae){if(Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal"),v(Re)&&!w(Re))throw new t("stream",Re,"must be writable");const He=m(this,Re);return Ae!=null&&Ae.signal&&g(Ae.signal,He),He}function U(Re,Ae){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal");let He=1;(Ae==null?void 0:Ae.concurrency)!=null&&(He=E(Ae.concurrency));let st=He-1;return(Ae==null?void 0:Ae.highWaterMark)!=null&&(st=E(Ae.highWaterMark)),s(He,"options.concurrency",1),s(st,"options.highWaterMark",0),st+=He,(async function*(){const Te=Ei().AbortSignalAny([Ae==null?void 0:Ae.signal].filter(S)),z=this,Ce=[],Ne={signal:Te};let ce,ie,X=!1,_e=0;function Le(){X=!0,xe()}function xe(){_e-=1,Ve()}function Ve(){ie&&!X&&_e<He&&Ce.length<st&&(ie(),ie=null)}async function xt(){try{for await(let ft of z){if(X)return;if(Te.aborted)throw new i;try{if(ft=Re(ft,Ne),ft===Q)continue;ft=D(ft)}catch(Et){ft=I(Et)}_e+=1,B(ft,xe,Le),Ce.push(ft),ce&&(ce(),ce=null),!X&&(Ce.length>=st||_e>=He)&&await new O(Et=>{ie=Et})}Ce.push(M)}catch(ft){const Et=I(ft);B(Et,xe,Le),Ce.push(Et)}finally{X=!0,ce&&(ce(),ce=null)}}xt();try{for(;;){for(;Ce.length>0;){const ft=await Ce[0];if(ft===M)return;if(Te.aborted)throw new i;ft!==Q&&(yield ft),Ce.shift(),Ve()}await new O(ft=>{ce=ft})}}finally{X=!0,ie&&(ie(),ie=null)}}).call(this)}function me(Re=void 0){return Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal"),(async function*(){let He=0;for await(const Oe of this){var st;if(Re!=null&&(st=Re.signal)!==null&&st!==void 0&&st.aborted)throw new i({cause:Re.signal.reason});yield[He++,Oe]}}).call(this)}async function se(Re,Ae=void 0){for await(const He of G.call(this,Re,Ae))return!0;return!1}async function ne(Re,Ae=void 0){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);return!await se.call(this,async(...He)=>!await Re(...He),Ae)}async function ee(Re,Ae){for await(const He of G.call(this,Re,Ae))return He}async function ae(Re,Ae){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function He(st,Oe){return await Re(st,Oe),Q}for await(const st of U.call(this,He,Ae));}function G(Re,Ae){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function He(st,Oe){return await Re(st,Oe)?st:Q}return U.call(this,He,Ae)}class Y extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function J(Re,Ae,He){var st;if(typeof Re!="function")throw new n("reducer",["Function","AsyncFunction"],Re);He!=null&&u(He,"options"),(He==null?void 0:He.signal)!=null&&o(He.signal,"options.signal");let Oe=arguments.length>1;if(He!=null&&(st=He.signal)!==null&&st!==void 0&&st.aborted){const ce=new i(void 0,{cause:He.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ce)),ce}const Te=new e,z=Te.signal;if(He!=null&&He.signal){const ce={once:!0,[c]:this,[f]:!0};He.signal.addEventListener("abort",()=>Te.abort(),ce)}let Ce=!1;try{for await(const ce of this){var Ne;if(Ce=!0,He!=null&&(Ne=He.signal)!==null&&Ne!==void 0&&Ne.aborted)throw new i;Oe?Ae=await Re(Ae,ce,{signal:z}):(Ae=ce,Oe=!0)}if(!Ce&&!Oe)throw new Y}finally{Te.abort()}return Ae}async function re(Re){Re!=null&&u(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal");const Ae=[];for await(const st of this){var He;if(Re!=null&&(He=Re.signal)!==null&&He!==void 0&&He.aborted)throw new i(void 0,{cause:Re.signal.reason});x(Ae,st)}return Ae}function we(Re,Ae){const He=U.call(this,Re,Ae);return(async function*(){for await(const Oe of He)yield*Oe}).call(this)}function ke(Re){if(Re=C(Re),A(Re))return 0;if(Re<0)throw new a("number",">= 0",Re);return Re}function Me(Re,Ae=void 0){return Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal"),Re=ke(Re),(async function*(){var st;if(Ae!=null&&(st=Ae.signal)!==null&&st!==void 0&&st.aborted)throw new i;for await(const Te of this){var Oe;if(Ae!=null&&(Oe=Ae.signal)!==null&&Oe!==void 0&&Oe.aborted)throw new i;Re--<=0&&(yield Te)}}).call(this)}function Pe(Re,Ae=void 0){return Ae!=null&&u(Ae,"options"),(Ae==null?void 0:Ae.signal)!=null&&o(Ae.signal,"options.signal"),Re=ke(Re),(async function*(){var st;if(Ae!=null&&(st=Ae.signal)!==null&&st!==void 0&&st.aborted)throw new i;for await(const Te of this){var Oe;if(Ae!=null&&(Oe=Ae.signal)!==null&&Oe!==void 0&&Oe.aborted)throw new i;if(Re-- >0&&(yield Te),Re<=0)return}}).call(this)}return Ly.streamReturningOperators={asIndexedPairs:_(me,"readable.asIndexedPairs will be removed in a future version."),drop:Me,filter:G,flatMap:we,map:U,take:Pe,compose:K},Ly.promiseReturningOperators={every:ne,forEach:ae,reduce:J,toArray:re,some:se,find:ee},Ly}var aS,aI;function Cj(){if(aI)return aS;aI=1;const{ArrayPrototypePop:e,Promise:t}=Ur(),{isIterable:n,isNodeStream:r,isWebStream:a}=Hl(),{pipelineImpl:i}=QC(),{finished:o}=hc();kj();function s(...u){return new t((c,f)=>{let h,m;const g=u[u.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const w=e(u);h=w.signal,m=w.end}i(u,(w,v)=>{w?f(w):c(v)},{signal:h,end:m})})}return aS={finished:o,pipeline:s},aS}var iI;function kj(){if(iI)return jx.exports;iI=1;const{Buffer:e}=fc(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Ur(),{promisify:{custom:a}}=Ei(),{streamReturningOperators:i,promiseReturningOperators:o}=pX(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=di(),u=Ej(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:f}=bw(),{pipeline:h}=QC(),{destroyer:m}=Ch(),g=hc(),w=Cj(),v=Hl(),_=jx.exports=YC().Stream;_.isDestroyed=v.isDestroyed,_.isDisturbed=v.isDisturbed,_.isErrored=v.isErrored,_.isReadable=v.isReadable,_.isWritable=v.isWritable,_.Readable=vw();for(const E of n(i)){let A=function(...O){if(new.target)throw s();return _.Readable.from(r(C,this,O))};var S=A;const C=i[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let A=function(...I){if(new.target)throw s();return r(C,this,I)};var S=A;const C=o[E];t(A,"name",{__proto__:null,value:C.name}),t(A,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:A,enumerable:!1,configurable:!0,writable:!0})}_.Writable=JC(),_.Duplex=Pl(),_.Transform=xj(),_.PassThrough=Sj(),_.pipeline=h;const{addAbortSignal:x}=yw();return _.addAbortSignal=x,_.finished=g,_.destroy=m,_.compose=u,_.setDefaultHighWaterMark=c,_.getDefaultHighWaterMark=f,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),t(h,a,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return w.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},jx.exports}var oI;function mX(){return oI||(oI=1,function(e){const t=kj(),n=Cj(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(Dx)),Dx.exports}var Aj=mX();class ek extends Aj.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(ot.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(ot.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class tk extends Aj.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(Wa(new Ue(ot.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(Wa(new Ue(ot.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(ot.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(ot.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(ot.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var _o=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},xo=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class Ka{get position(){return this.flag&sd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=Qa(t,n);Object.assign(this,yd(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&fw||this.inode.flags&_i.Sync)}_emitChange(){Fa(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,aj(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=cc(t,-1);if(n<0)throw new Ue(ot.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>mr?-61441:mr)|n,(this._isSync||n>mr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(ot.EINVAL);if(this.dirty=!0,!(this.flag&Ga||this.flag&Al))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Mb(t),this.inode.mtimeMs=Mb(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Tl(n,"utf8","a",420);if(!(Rl(r.flag)&sd))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const i=typeof t=="string"?Tr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&Ga)throw new Ue(ot.EPERM,"File not opened with a readable mode");this.inode.flags&_i.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!Om(this.inode)&&!Im(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Tl(t,null,"r",292);if(Rl(n.flag)&Ga)throw new Ue(ot.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Tr.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&_i.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&Ga)throw Ue.With("EBADF",this.path,"readLines");return jY({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!rr(this.context,this.inode,ha))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Sd(this.inode):new ql(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&_i.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"write");if(!(this.flag&Ga||this.flag&Al))throw new Ue(ot.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!Om(this.inode)&&!Im(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Tr.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const u=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:u}}async writeFile(t,n={}){const r=Tl(n,"utf8","w",420),a=Rl(r.flag);if(!(a&Ga||a&Al))throw new Ue(ot.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const i=typeof t=="string"?Tr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),lj(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&Ga)throw Ue.With("EBADF",this.path,"createReadStream");return new ek(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&_i.Immutable)throw new Ue(ot.EPERM,"File is immutable",this.path,"createWriteStream");return new tk(t,this)}}async function nk(e,t){e=ln(e),t=ln(t);const n=jn(e,this),r=jn(t,this);if(!(await ts.call(this,Zn(e))).hasAccess(Gr,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Fa(this,"rename",e.toString()),Fa(this,"change",t.toString());return}await I0.call(this,t,await N0(e)),await R0.call(this,e),Fa(this,"rename",e.toString())}catch(a){throw ar(a,{[n.path]:e,[r.path]:t})}}async function T0(e){try{const{fs:t,path:n}=jn(await mc.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function ts(e,t){e=ln(e);const{fs:n,path:r}=jn(await mc.call(this,e),this);try{const a=await n.stat(r);if(pa&&!rr(this,a,ha))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Sd(a):new ql(a)}catch(a){throw ar(a,{[r]:e})}}async function ww(e,t){e=ln(e);const{fs:n,path:r}=jn(e,this);try{const a=await n.stat(r);if(pa&&!rr(this,a,ha))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Sd(a):new ql(a)}catch(a){throw ar(a,{[r]:e})}}async function Tj(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await _o(n,await So.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=xo(n);r&&await r}}async function R0(e){e=ln(e);const{fs:t,path:n}=jn(e,this);try{if(pa&&!rr(this,await t.stat(n),Gr))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),Fa(this,"rename",e.toString())}catch(r){throw ar(r,{[n]:e})}}async function kh(e,t,n){var r;t=ln(t);const a=cc(n.mode,420),i=Rl(n.flag),{fullPath:o,fs:s,path:u,stats:c}=await $b(e,t.toString(),n.preserveSymlinks);if(!c){if(!(i&uw))throw Ue.With("ENOENT",o,"_open");const h=await s.stat(Zn(u));if(!rr(e,h,Gr))throw Ue.With("EACCES",Zn(o),"_open");if(!Ko(h))throw Ue.With("ENOTDIR",Zn(o),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:es.credentials,w=await s.createFile(u,{mode:a,uid:h.mode&S0?h.uid:m,gid:h.mode&E0?h.gid:g});return new Ka(e,Fb(new Pb(e,t,s,u,i,w)))}if(!rr(e,c,uj(i)))throw Ue.With("EACCES",o,"_open");if(i&cw)throw Ue.With("EEXIST",o,"_open");const f=new Ka(e,Fb(new Pb(e,t,s,u,i,c)));return i&dw&&await f.truncate(0),f}async function So(e,t="r",n=420){return await kh(this,e,{flag:t,mode:n})}async function N0(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Tl(t,null,"r",292);return await _o(n,typeof e=="object"&&"fd"in e?e:await So.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=xo(n);r&&await r}}async function I0(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","w+",420),i=_o(r,e instanceof Ka?e:await So.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Ue(ot.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=xo(r);a&&await a}}async function Rj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Tl(n,"utf8","a",420);if(!(Rl(a.flag)&sd))throw new Ue(ot.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(ot.EINVAL,"Encoding not specified");const o=typeof t=="string"?Tr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await _o(r,typeof e=="object"&&"fd"in e?e:await So.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=xo(r);a&&await a}}async function rk(e){e=await mc.call(this,e);const{fs:t,path:n}=jn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!Ko(r))throw Ue.With("ENOTDIR",n,"rmdir");if(pa&&!rr(this,r,Gr))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),Fa(this,"rename",e.toString())}catch(r){throw ar(r,{[n]:e})}}async function O0(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:es.credentials;t=typeof t=="object"?t:{mode:t};const o=cc(t==null?void 0:t.mode,511);e=await mc.call(this,e);const{fs:s,path:u,root:c}=jn(e,this),f={[u]:e},h=async(m,g)=>{if(!rr(this,g,Gr))throw Ue.With("EACCES",Zn(m),"mkdir");const w=await s.mkdir(m,{mode:o,uid:g.mode&S0?g.uid:a,gid:g.mode&E0?g.gid:i});return Fa(this,"rename",m),w};try{if(!(t!=null&&t.recursive)){await h(u,await s.stat(Zn(u)));return}const m=[];for(let w=u,v=e;!await s.exists(w);w=Zn(w),v=Zn(v))m.unshift(w),f[w]=v;if(!m.length)return;const g=[await s.stat(Zn(m[0]))];for(const[w,v]of m.entries())g.push(await h(v,g[w]));return c.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(c.length)}catch(m){throw ar(m,f)}}async function pc(e,t){t=typeof t=="object"?t:{encoding:t},e=await mc.call(this,e);const{fs:n,path:r}=jn(e,this),a=await n.stat(r).catch(u=>sr(ar(u,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!rr(this,a,ha))throw Ue.With("EACCES",e,"readdir");if(!Ko(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(u=>sr(ar(u,{[r]:e}))),o=[],s=async u=>{let c;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(c=await n.stat(er(r,u)).catch(f=>{if(f.code!="ENOENT")throw ar(f,{[r]:e})}),!c))&&(t!=null&&t.withFileTypes?o.push(new jm(u,c)):(t==null?void 0:t.encoding)=="buffer"?o.push(Tr.from(u)):o.push(u),!(!(t!=null&&t.recursive)||!Ko(c))))for(const f of await pc.call(this,er(e,u),t))f instanceof jm?(f.path=er(u,f.path),o.push(f)):Tr.isBuffer(f)?o.push(Tr.from(er(u,kC(f)))):o.push(er(u,f))};return await Promise.all(i.map(s)),o}async function Nj(e,t){e=ln(e),t=ln(t);const{fs:n,path:r}=jn(e,this),a=jn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(pa&&!rr(this,await n.stat(Zn(r)),ha))throw Ue.With("EACCES",Zn(r),"link");if(pa&&!(await ts.call(this,Zn(t))).hasAccess(Gr,this))throw Ue.With("EACCES",Zn(t),"link");if(pa&&!rr(this,await n.stat(r),ha))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw ar(i,{[a.path]:t,[r]:e})}}async function Ij(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(ot.EINVAL,"Invalid symlink type: "+n);if(t=ln(t),await T0.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=_o(r,await kh(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(ln(e,!0)),await a.chmod(Ul)}catch(a){r.error=a,r.hasError=!0}finally{const a=xo(r);a&&await a}}async function Lb(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await _o(n,await kh(this,ln(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=xo(n);r&&await r}}async function Oj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await _o(r,await So.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=xo(r);a&&await a}}async function Dj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await _o(r,await kh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=xo(r);a&&await a}}async function jj(e,t){const n={stack:[],error:void 0,hasError:!1};try{await _o(n,await So.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=xo(n);r&&await r}}async function Mj(e,t){const n={stack:[],error:void 0,hasError:!1};try{await _o(n,await kh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=xo(n);r&&await r}}async function ak(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await _o(r,await So.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=xo(r);a&&await a}}async function Pj(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await _o(r,await kh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=xo(r);a&&await a}}async function $b(e,t,n){if(n){const u=jn(t,e),c=await u.fs.stat(u.path).catch(()=>{});return{...u,fullPath:t,stats:c}}try{const u=jn(t,e),c=await u.fs.stat(u.path);if(!Qf(c))return{...u,fullPath:t,stats:c};const f=Ml.call(e,Zn(t),(await Lb.call(e,t)).toString());return await $b(e,f)}catch{}const{base:r,dir:a}=Es(t),i=a=="/"?"/":await mc.call(e,a),o=er(i,r),s=jn(o,e);try{const u=await s.fs.stat(s.path);if(!Qf(u))return{...s,fullPath:o,stats:u};const c=Ml.call(e,i,(await Lb.call(e,o)).toString());return await $b(e,c)}catch(u){if(u.code=="ENOENT")return{...s,fullPath:t};throw ar(u,{[s.path]:o})}}async function mc(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=ln(e);const{fullPath:a}=await $b(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Tr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function gX(e,t={}){const n=new hj(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var u;(u=r.shift())===null||u===void 0||u({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function Fj(e,t=DC){if(!(await ts.call(this,e)).hasAccess(t,this))throw new Ue(ot.EACCES)}async function D0(e,t){e=ln(e);const n=await ww.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&mr){case aa:if(t!=null&&t.recursive)for(const r of await pc.call(this,e))await D0.call(this,er(e,r),t);await rk.call(this,e);break;case Bo:case Ul:case wd:case _d:await R0.call(this,e);break;case xd:case vd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}}async function Lj(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await O0.call(this,a),n=="buffer"?Tr.from(a):a}async function ik(e,t,n){if(e=ln(e),t=ln(t),n&&n&jC&&await T0.call(this,t))throw new Ue(ot.EEXIST,"Destination file already exists",t,"copyFile");await I0.call(this,t,await N0.call(this,e)),Fa(this,"rename",t.toString())}function $j(e,t){return e=ln(e),Promise.resolve(new ZC(e,this))}async function ok(e,t,n){e=ln(e),t=ln(t);const r=await ww.call(this,e);if(n!=null&&n.errorOnExist&&await T0.call(this,t))throw new Ue(ot.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&mr){case aa:{if(!(n!=null&&n.recursive))throw new Ue(ot.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([pc.call(this,e,{withFileTypes:!0}),O0.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(er(e,o.name),er(t,o.name))||await ok.call(this,er(e,o.name),er(t,o.name),n)};await Promise.all(a.map(i));break}case Bo:case Ul:await ik.call(this,e,t);break;case wd:case _d:case xd:case vd:default:throw new Ue(ot.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await ak.call(this,t,r.atime,r.mtime)}async function Bj(e,t){e=ln(e);const{fs:n}=jn(e,this);return Promise.resolve(dj(n,t==null?void 0:t.bigint))}function zj(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const u=await pc(s,{withFileTypes:r,encoding:"utf8"});for(const c of u){const f=r?c.path:s+"/"+c;a(r?c:f)||((await ts(f)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(f)),i.some(h=>h.test(f.replace(/^\/+/g,"")))&&(yield r?c:f.replace(/^\/+/g,"")))}}return o(n)}const yX=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:Ka,access:Fj,appendFile:Rj,chmod:jj,chown:Oj,constants:nj,copyFile:ik,cp:ok,exists:T0,glob:zj,lchmod:Mj,lchown:Dj,link:Nj,lstat:ww,lutimes:Pj,mkdir:O0,mkdtemp:Lj,open:So,opendir:$j,readFile:N0,readdir:pc,readlink:Lb,realpath:mc,rename:nk,rm:D0,rmdir:rk,stat:ts,statfs:Bj,symlink:Ij,truncate:Tj,unlink:R0,utimes:ak,watch:gX,writeFile:I0},Symbol.toStringTag,{value:"Module"})),En=()=>{};async function bX(e){const t=[];for await(const n of e)t.push(n);return t}function vX(e,t,n=En){nk.call(this,e,t).then(()=>n()).catch(n)}function wX(e,t=En){T0.call(this,e).then(t).catch(()=>t(!1))}function _X(e,t,n=En){n=typeof t=="function"?t:n,ts.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function xX(e,t,n=En){n=typeof t=="function"?t:n,ww.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function SX(e,t=0,n=En){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;Tj.call(this,e,r).then(()=>n()).catch(n)}function EX(e,t=En){R0.call(this,e).then(()=>t()).catch(t)}function CX(e,t,n,r=En){const a=cc(n,420);r=typeof n=="function"?n:r,So.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function kX(e,t,n=En){n=typeof t=="function"?t:n,N0.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function AX(e,t,n,r=En){r=typeof n=="function"?n:r,I0.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function TX(e,t,n,r=En){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,Rj.call(this,e,t,a).then(()=>r()).catch(r)}function RX(e,t,n=En){n=typeof t=="function"?t:n,new Ka(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Sd(r):r)).catch(n)}function NX(e,t=En){new Ka(this,e).close().then(()=>t()).catch(t)}function IX(e,t,n=En){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new Ka(this,e);if(r<0)throw new Ue(ot.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function OX(e,t=En){new Ka(this,e).sync().then(()=>t()).catch(t)}function DX(e,t=En){new Ka(this,e).datasync().then(()=>t()).catch(t)}function jX(e,t,n,r,a,i=En){let o,s,u,c,f;const h=new Ka(this,e);if(typeof t=="string"){switch(f="utf8",typeof n){case"function":i=n;break;case"number":c=n,f=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(ot.EINVAL,"Invalid arguments"));return}o=Tr.from(t),s=0,u=o.length;const m=i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o.toString(f))).catch(m)}else{o=Tr.from(t.buffer),s=n,u=r,c=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(o,s,u,c).then(({bytesWritten:g})=>m(void 0,g,o)).catch(m)}}function MX(e,t,n,r,a,i=En){new Ka(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function PX(e,t,n,r=En){new Ka(this,e).chown(t,n).then(()=>r()).catch(r)}function FX(e,t,n){new Ka(this,e).chmod(t).then(()=>n()).catch(n)}function LX(e,t,n,r=En){new Ka(this,e).utimes(t,n).then(()=>r()).catch(r)}function $X(e,t=En){rk.call(this,e).then(()=>t()).catch(t)}function BX(e,t,n=En){O0.call(this,e,t).then(()=>n()).catch(n)}function zX(e,t,n=En){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};pc.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function UX(e,t,n=En){Nj.call(this,e,t).then(()=>n()).catch(n)}function qX(e,t,n,r=En){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,Ij.call(this,e,t,a).then(()=>r()).catch(r)}function HX(e,t,n=En){n=typeof t=="function"?t:n,Lb.call(this,e).then(r=>n(void 0,r)).catch(n)}function VX(e,t,n,r=En){Oj.call(this,e,t,n).then(()=>r()).catch(r)}function GX(e,t,n,r=En){Dj.call(this,e,t,n).then(()=>r()).catch(r)}function WX(e,t,n=En){jj.call(this,e,t).then(()=>n()).catch(n)}function KX(e,t,n=En){Mj.call(this,e,t).then(()=>n()).catch(n)}function ZX(e,t,n,r=En){ak.call(this,e,t,n).then(()=>r()).catch(r)}function YX(e,t,n,r=En){Pj.call(this,e,t,n).then(()=>r()).catch(r)}function XX(e,t,n=En){n=typeof t=="function"?t:n,mc.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function JX(e,t,n=En){const r=typeof t=="number"?t:ha;n=typeof t=="function"?t:n,Fj.call(this,e,r).then(()=>n()).catch(n)}const jf=new Map;function QX(e,t,n){const r=ln(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(ot.EINVAL,"No listener specified",e.toString(),"watchFile");if(jf.has(r)){const o=jf.get(r);o&&o.listeners.add(n);return}const i=new $Y(this,r,a);i.on("change",(o,s)=>{const u=jf.get(r);if(u)for(const c of u.listeners)c(o,s)}),jf.set(r,{watcher:i,listeners:new Set})}function eJ(e,t=En){const n=ln(e),r=jf.get(n);r&&(t&&t!==En?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),jf.delete(n)))}function tJ(e,t,n){const r=new hj(this,ln(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||En),r}function nJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=So.call(this,e,"r",t==null?void 0:t.mode);return new ek({...t,autoClose:!0},n)}function rJ(e,t){t=typeof t=="object"?t:{encoding:t};const n=So.call(this,e,"w",t==null?void 0:t.mode);return new tk(t,n)}function aJ(e,t,n=En){n=typeof t=="function"?t:n,D0.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function iJ(e,t,n=En){n=typeof t=="function"?t:n,Lj.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function oJ(e,t,n,r=En){r=typeof n=="function"?n:r,ik.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function sJ(e,t,n,r=En){r=typeof n=="function"?n:r,new Ka(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function lJ(e,t,n,r=En){r=typeof n=="function"?n:r,new Ka(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function uJ(e,t,n=En){n=typeof t=="function"?t:n,$j.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function cJ(e,t,n,r=En){r=typeof n=="function"?n:r,ok.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function dJ(e,t,n=En){n=typeof t=="function"?t:n,Bj.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function fJ(e,t){const n=await So.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function hJ(e,t,n=En){n=typeof t=="function"?t:n;const r=zj.call(this,e,typeof t=="function"?void 0:t);bX(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var qc=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var w={};for(var v in r)w[v]=v==="access"?{}:r[v];for(var v in r.access)w.access[v]=r.access[v];w.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],w);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},zi=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},pJ=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Bb;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Bb||(Bb={}));let Uj=(()=>{var e,t,n,r,a;let i=[bd()],o,s=[],u,c,f=[],h=[],m,g=[],w=[],v,_=[],x=[],S,E=[],C=[],A,O=[],I=[],D,B=[],W=[];return u=class{constructor(Q=sr(new Ue(ot.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=zi(this,f,0),this.extsize=(zi(this,h),zi(this,g,0)),this.nextents=(zi(this,w),zi(this,_,0)),this.projid=(zi(this,x),zi(this,E,0)),this.cowextsize=(zi(this,C),zi(this,O,0)),this.pad=(zi(this,I),zi(this,B,[])),zi(this,W),this.extsize=Q.size,this.nextents=1,this.projid=Q.uid,this.cowextsize=Q.size;for(const M of Object.keys(_i))Q.flags&_i[M]&&M in Bb&&(this.xflags|=Bb[M])}},pJ(u,"fsxattr"),(()=>{const Q=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;c=[(e=gn).uint32.bind(e)],m=[(t=gn).uint32.bind(t)],v=[(n=gn).uint32.bind(n)],S=[(r=gn).uint32.bind(r)],A=[(a=gn).uint32.bind(a)],D=[gn.char(8)],qc(null,null,c,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:M=>"xflags"in M,get:M=>M.xflags,set:(M,K)=>{M.xflags=K}},metadata:Q},f,h),qc(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:M=>"extsize"in M,get:M=>M.extsize,set:(M,K)=>{M.extsize=K}},metadata:Q},g,w),qc(null,null,v,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:M=>"nextents"in M,get:M=>M.nextents,set:(M,K)=>{M.nextents=K}},metadata:Q},_,x),qc(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:M=>"projid"in M,get:M=>M.projid,set:(M,K)=>{M.projid=K}},metadata:Q},E,C),qc(null,null,A,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:M=>"cowextsize"in M,get:M=>M.cowextsize,set:(M,K)=>{M.cowextsize=K}},metadata:Q},O,I),qc(null,null,D,{kind:"field",name:"pad",static:!1,private:!1,access:{has:M=>"pad"in M,get:M=>M.pad,set:(M,K)=>{M.pad=K}},metadata:Q},B,W),qc(null,o={value:u},i,{kind:"class",name:u.name,metadata:Q},null,s),u=o.value,Q&&Object.defineProperty(u,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Q}),zi(u,s)})(),u})();var Dr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Dr||(Dr={}));var Po;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(Po||(Po={}));async function mJ(e,t,...n){e=ln(e);const{fs:r,path:a}=jn(e,this);try{const i=new ra(await r.stat(a));switch(t){case Dr.GetFlags:case Po.GetFlags:return i.flags;case Dr.SetFlags:case Po.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Dr.GetVersion:case Po.GetVersion:return i.version;case Dr.SetVersion:case Po.SetVersion:i.version=n[0],await r.touch(a,i);return;case Dr.Fiemap:break;case Dr.GetXattr:return new Uj(i);case Dr.SetXattr:break;case Dr.GetLabel:return r.label;case Dr.SetLabel:r.label=n[0];return;case Dr.GetUUID:return r.uuid;case Dr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw ar(i,{[a]:e})}throw new Ue(ot.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function gJ(e,t,...n){e=ln(e);const{fs:r,path:a}=jn(e,this);try{const i=new ra(r.statSync(a));switch(t){case Dr.GetFlags:case Po.GetFlags:return i.flags;case Dr.SetFlags:case Po.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Dr.GetVersion:case Po.GetVersion:return i.version;case Dr.SetVersion:case Po.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Dr.Fiemap:break;case Dr.GetXattr:return new Uj(i);case Dr.SetXattr:break;case Dr.GetLabel:return r.label;case Dr.SetLabel:r.label=n[0];return;case Dr.GetUUID:return r.uuid;case Dr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw ar(i,{[a]:e})}throw new Ue(ot.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const yJ=[];function Ah(e,t,n,r){if(!t.startsWith("user.")&&!yJ.includes(t))throw new Ue(ot.EPERM,"Only attributes in the user namespace are supported",n,r)}async function bJ(e,t,n={}){var r;e=ln(e);const{fs:a,path:i}=jn(e,this);Ah(this,t,e,"xattr.get");try{const o=await a.stat(i);if(pa&&!rr(this,o,ha))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Gu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Tr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw ar(o,{[i]:e})}}function vJ(e,t,n={}){var r;e=ln(e),Ah(this,t,e,"xattr.get");const{fs:a,path:i}=jn(e,this);try{const o=a.statSync(i);if(pa&&!rr(this,o,ha))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new Gu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const u=Tr.from(s.value);return n.encoding=="buffer"||!n.encoding?u:u.toString(n.encoding)}catch(o){throw ar(o,{[i]:e})}}async function wJ(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=jn(e,this);Ah(this,t,e,"xattr.set");try{const s=await i.stat(o);if(pa&&!rr(this,s,Gr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Gu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Tr.from(n)),await i.touch(o,yd(s,"attributes"))}catch(s){throw ar(s,{[o]:e})}}function _J(e,t,n,r={}){var a;e=ln(e);const{fs:i,path:o}=jn(e,this);Ah(this,t,e,"xattr.set");try{const s=i.statSync(o);if(pa&&!rr(this,s,Gr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new Gu);const u=s.attributes.get(t);if(r.create&&u)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!u)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Tr.from(n)),i.touchSync(o,yd(s,"attributes"))}catch(s){throw ar(s,{[o]:e})}}async function xJ(e,t){var n;e=ln(e);const{fs:r,path:a}=jn(e,this);Ah(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(pa&&!rr(this,i,Gr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Gu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,yd(i,"attributes"))}catch(i){throw ar(i,{[a]:e})}}function SJ(e,t){var n;e=ln(e);const{fs:r,path:a}=jn(e,this);Ah(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(pa&&!rr(this,i,Gr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Gu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,yd(i,"attributes"))}catch(i){throw ar(i,{[a]:e})}}async function EJ(e){e=ln(e);const{fs:t,path:n}=jn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw ar(r,{[n]:e})}}function CJ(e){e=ln(e);const{fs:t,path:n}=jn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw ar(r,{[n]:e})}}const kJ=Object.freeze(Object.defineProperty({__proto__:null,get:bJ,getSync:vJ,list:EJ,listSync:CJ,remove:xJ,removeSync:SJ,set:wJ,setSync:_J},Symbol.toStringTag,{value:"Module"})),Pa=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:hY,Dir:ZC,Dirent:jm,get IOC(){return Dr},get IOC32(){return Po},ReadStream:ek,Stats:ql,StatsFs:fY,WriteStream:tk,access:JX,accessSync:aX,appendFile:TX,appendFileSync:HY,chmod:WX,chmodSync:tX,chown:VX,chownSync:QY,chroot:FY,close:NX,closeSync:Cd,constants:nj,copyFile:oJ,copyFileSync:bj,cp:cJ,cpSync:vj,createReadStream:nJ,createWriteStream:rJ,exists:wX,existsSync:BC,fchmod:FX,fchmodSync:GC,fchown:PX,fchownSync:VC,fdatasync:DX,fdatasyncSync:KY,fstat:RX,fstatSync:VY,fsync:OX,fsyncSync:WY,ftruncate:IX,ftruncateSync:GY,futimes:LX,futimesSync:WC,glob:hJ,globSync:cX,ioctl:mJ,ioctlSync:gJ,lchmod:KX,lchmodSync:nX,lchown:GX,lchownSync:eX,link:UX,linkSync:XY,lopenSync:mw,lstat:xX,lstatSync:zC,lutimes:YX,lutimesSync:rX,mkdir:BX,mkdirSync:KC,mkdtemp:iJ,mkdtempSync:iX,mount:$C,open:CX,openAsBlob:fJ,openSync:pw,opendir:uJ,opendirSync:lX,promises:yX,read:MX,readFile:kX,readFileSync:qC,readSync:YY,readdir:zX,readdirSync:Eh,readlink:HX,readlinkSync:Z2,readv:sJ,readvSync:oX,realpath:XX,realpathSync:dc,rename:vX,renameSync:UY,rm:aJ,rmSync:yj,rmdir:$X,rmdirSync:mj,stat:_X,statSync:Wu,statfs:dJ,statfsSync:uX,symlink:qX,symlinkSync:JY,truncate:SX,truncateSync:qY,umount:cj,unlink:EX,unlinkSync:UC,unwatchFile:eJ,utimes:ZX,utimesSync:gj,watch:tJ,watchFile:QX,write:jX,writeFile:AX,writeFileSync:HC,writeSync:ZY,writev:lJ,writevSync:sX,xattr:kJ},Symbol.toStringTag,{value:"Module"}));function sI(e){return VD(e)||OC(e)||e instanceof PC}async function qj(e,t=0){if(typeof e!="object"||e==null)throw wi(new Ue(ot.EINVAL,"Invalid options on mount configuration"));if(!sI(e))throw wi(new Ue(ot.EINVAL,"Invalid mount configuration"));if(e instanceof PC)return await e.ready(),e;OC(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&sI(i)){if(HD("Resolving nested mount configuration: "+a),t>10)throw wi(new Ue(ot.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await qj(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw wi(new Ue(ot.EPERM,"Backend not available: "+n.name));ZZ(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function AJ(e){if(!VD(e))throw new TypeError("Invalid single mount point configuration");const t=await qj(e);cj("/"),$C("/",t)}const TJ=["delete"];Math.max(...TJ.map(e=>e.length));KZ("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const Hj=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;Hj[e]=t}function RJ(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^Hj[(t^e[n])&255];return(t^4294967295)>>>0}var Or=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,u=s==="getter"?"get":s==="setter"?"set":"value",c=!t&&e?r.static?e:e.prototype:null,f=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var w={};for(var v in r)w[v]=v==="access"?{}:r[v];for(var v in r.access)w.access[v]=r.access[v];w.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:f.get,set:f.set}:f[u],w);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(f.get=h),(h=o(_.set))&&(f.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):f[u]=h)}c&&Object.defineProperty(c,r.name,f),m=!0},wn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},sk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let lI=(()=>{var e,t,n,r;let a=[bd()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],w,v=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=wn(this,c,0),this.offset_=(wn(this,f),wn(this,m,0)),this.offset=(wn(this,g),wn(this,v,0)),this.size=(wn(this,_),wn(this,S,0)),wn(this,E)}},sk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],w=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],Or(null,null,u,{kind:"field",name:"id",static:!1,private:!1,access:{has:A=>"id"in A,get:A=>A.id,set:(A,O)=>{A.id=O}},metadata:C},c,f),Or(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:A=>"offset_"in A,get:A=>A.offset_,set:(A,O)=>{A.offset_=O}},metadata:C},m,g),Or(null,null,w,{kind:"field",name:"offset",static:!1,private:!1,access:{has:A=>"offset"in A,get:A=>A.offset,set:(A,O)=>{A.offset=O}},metadata:C},v,_),Or(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:A=>"size"in A,get:A=>A.size,set:(A,O)=>{A.size=O}},metadata:C},S,E),Or(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),wn(s,o)})(),s})();const uI=255;let Hc=(()=>{var e,t,n,r;let a=[bd()],i,o=[],s,u,c=[],f=[],h,m=[],g=[],w,v=[],_=[],x,S=[],E=[],C,A=[],O=[];var I=s=class{constructor(D=sr(new Ue(ot.EINVAL,"Metadata block must be initialized with a superblock")),B=0){if(this.superblock=D,this.offset=B,this.checksum=wn(this,c,0),this.timestamp=(wn(this,f),wn(this,m,Date.now())),this.previous_offset_=(wn(this,g),wn(this,v,0)),this.previous_offset=(wn(this,_),wn(this,S,0)),this._previous=wn(this,E),this.entries=wn(this,A,Array.from({length:uI},()=>new lI)),wn(this,O),this.superblock=D,this.offset=B,!!B&&(sw(this,D.store._buffer.subarray(B,B+jr(I))),!Vj(this)))throw lw(new Ue(ot.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+B.toString(16)))}get previous(){var D;if(this.previous_offset)return(D=this._previous)!==null&&D!==void 0||(this._previous=new I(this.superblock,this.previous_offset)),this._previous}};return sk(s,"MetadataBlock"),(()=>{const D=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=gn).uint32.bind(e)],h=[(t=gn).uint32.bind(t)],w=[(n=gn).uint32.bind(n)],x=[(r=gn).uint32.bind(r)],C=[Nm(lI,uI)],Or(null,null,u,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:B=>"checksum"in B,get:B=>B.checksum,set:(B,W)=>{B.checksum=W}},metadata:D},c,f),Or(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:B=>"timestamp"in B,get:B=>B.timestamp,set:(B,W)=>{B.timestamp=W}},metadata:D},m,g),Or(null,null,w,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:B=>"previous_offset_"in B,get:B=>B.previous_offset_,set:(B,W)=>{B.previous_offset_=W}},metadata:D},v,_),Or(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:B=>"previous_offset"in B,get:B=>B.previous_offset,set:(B,W)=>{B.previous_offset=W}},metadata:D},S,E),Or(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:B=>"entries"in B,get:B=>B.entries,set:(B,W)=>{B.entries=W}},metadata:D},A,O),Or(null,i={value:s},a,{kind:"class",name:s.name,metadata:D},null,o),I=s=i.value,D&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:D}),wn(s,o)})(),I=s})();const cI=2049864546;(()=>{var e,t,n,r,a,i,o,s,u,c,f;let h=[bd()],m,g=[],w,v,_=[],x=[],S,E=[],C=[],A,O=[],I=[],D,B=[],W=[],Q,M=[],K=[],U,me=[],se=[],ne,ee=[],ae=[],G,Y=[],J=[],re,we=[],ke=[],Me,Pe=[],Re=[],Ae,He=[],st=[],Oe,Te=[],z=[],Ce,Ne=[],ce=[];var ie=w=class{constructor(X=sr(new Ue(ot.EINVAL,"Super block must be initialized with a store"))){if(this.store=X,this.checksum=wn(this,_,0),this.magic=(wn(this,x),wn(this,E,cI)),this.version=(wn(this,C),wn(this,O,1)),this.inode_format=(wn(this,I),wn(this,B,mY)),this.flags=(wn(this,W),wn(this,M,0)),this.used_bytes=(wn(this,K),wn(this,me,BigInt(0))),this.total_bytes=(wn(this,se),wn(this,ee,BigInt(0))),this.uuid=(wn(this,ae),wn(this,Y,BigInt(0))),this.metadata_block_size=(wn(this,J),wn(this,we,jr(Hc))),this.metadata_offset_=(wn(this,ke),wn(this,Pe,0)),this.metadata_offset=(wn(this,Re),wn(this,He,0)),this.metadata=wn(this,st),this.label=wn(this,Te,""),this._padding=(wn(this,z),wn(this,Ne,new Array(132).fill(0))),wn(this,ce),this.store=X,X._view.getUint32(OZ(ie,"magic"),!0)!=cI){Wa("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Hc(this),this.metadata.offset=jr(ie),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(jr(ie)+jr(Hc)),this.total_bytes=BigInt(X._buffer.byteLength),X._write(this),X._write(this.metadata);return}if(sw(this,X._buffer.subarray(0,jr(ie))),!Vj(this))throw lw(new Ue(ot.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Hc(this,this.metadata_offset)}rotateMetadata(){const X=new Hc(this);return X.offset=Number(this.used_bytes),X.previous_offset=this.metadata_offset,this.metadata=X,this.metadata_offset=X.offset,this.store._write(X),this.used_bytes+=BigInt(jr(Hc)),this.store._write(this),X}isUnused(X,_e){if(!_e)return!0;if(X+_e>this.total_bytes||X<jr(ie))return!1;for(let Le=this.metadata;Le;Le=Le.previous){if(X<Le.offset+jr(Hc)&&X+_e>Le.offset)return!1;for(const xe of Le.entries)if(xe.offset&&(X>=xe.offset&&X<xe.offset+xe.size||X+_e>xe.offset&&X+_e<=xe.offset+xe.size||X<=xe.offset&&X+_e>=xe.offset+xe.size))return!1}return!0}};return sk(w,"SuperBlock"),(()=>{const X=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;v=[(e=gn).uint32.bind(e)],S=[(t=gn).uint32.bind(t)],A=[(n=gn).uint16.bind(n)],D=[(r=gn).uint16.bind(r)],Q=[(a=gn).uint32.bind(a)],U=[(i=gn).uint64.bind(i)],ne=[(o=gn).uint64.bind(o)],G=[(s=gn).uint128.bind(s)],re=[(u=gn).uint32.bind(u)],Me=[(c=gn).uint32.bind(c)],Ae=[(f=gn).uint32.bind(f)],Oe=[gn.char(64)],Ce=[gn.char(132)],Or(null,null,v,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:_e=>"checksum"in _e,get:_e=>_e.checksum,set:(_e,Le)=>{_e.checksum=Le}},metadata:X},_,x),Or(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:_e=>"magic"in _e,get:_e=>_e.magic,set:(_e,Le)=>{_e.magic=Le}},metadata:X},E,C),Or(null,null,A,{kind:"field",name:"version",static:!1,private:!1,access:{has:_e=>"version"in _e,get:_e=>_e.version,set:(_e,Le)=>{_e.version=Le}},metadata:X},O,I),Or(null,null,D,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:_e=>"inode_format"in _e,get:_e=>_e.inode_format,set:(_e,Le)=>{_e.inode_format=Le}},metadata:X},B,W),Or(null,null,Q,{kind:"field",name:"flags",static:!1,private:!1,access:{has:_e=>"flags"in _e,get:_e=>_e.flags,set:(_e,Le)=>{_e.flags=Le}},metadata:X},M,K),Or(null,null,U,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:_e=>"used_bytes"in _e,get:_e=>_e.used_bytes,set:(_e,Le)=>{_e.used_bytes=Le}},metadata:X},me,se),Or(null,null,ne,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:_e=>"total_bytes"in _e,get:_e=>_e.total_bytes,set:(_e,Le)=>{_e.total_bytes=Le}},metadata:X},ee,ae),Or(null,null,G,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:_e=>"uuid"in _e,get:_e=>_e.uuid,set:(_e,Le)=>{_e.uuid=Le}},metadata:X},Y,J),Or(null,null,re,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:_e=>"metadata_block_size"in _e,get:_e=>_e.metadata_block_size,set:(_e,Le)=>{_e.metadata_block_size=Le}},metadata:X},we,ke),Or(null,null,Me,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:_e=>"metadata_offset_"in _e,get:_e=>_e.metadata_offset_,set:(_e,Le)=>{_e.metadata_offset_=Le}},metadata:X},Pe,Re),Or(null,null,Ae,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:_e=>"metadata_offset"in _e,get:_e=>_e.metadata_offset,set:(_e,Le)=>{_e.metadata_offset=Le}},metadata:X},He,st),Or(null,null,Oe,{kind:"field",name:"label",static:!1,private:!1,access:{has:_e=>"label"in _e,get:_e=>_e.label,set:(_e,Le)=>{_e.label=Le}},metadata:X},Te,z),Or(null,null,Ce,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:_e=>"_padding"in _e,get:_e=>_e._padding,set:(_e,Le)=>{_e._padding=Le}},metadata:X},Ne,ce),Or(null,m={value:w},h,{kind:"class",name:w.name,metadata:X},null,g),ie=w=m.value,X&&Object.defineProperty(w,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:X}),wn(w,g)})(),ie=w})();function Vj(e){const t=Ma(e),n=RJ(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Pa;function NJ(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function X2(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?ot[NJ(e)]:ot.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Mf(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(X2(e.error))}})}class IJ extends K2{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Mf(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Mf(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Mf(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Mf(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(X2(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(X2(this.tx.error)),this.tx.abort(),t}}async function OJ(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(Wa("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Mf(n)}class DJ{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new IJ(t,this)}}const jJ={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Mf(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await OJ(e.storeName||"zenfs",e.idbFactory),n=new DJ(t),r=new oj(n);if(e!=null&&e.disableAsyncCache)return IC("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},MJ=jJ,zb={APP_LOADED:"app:loaded",APP_ERROR:"app:error",CONVERSATION_SELECTED:"conversation:selected",CONVERSATION_CREATED:"conversation:created",CONVERSATION_DELETED:"conversation:deleted",CONVERSATION_RENAMED:"conversation:renamed",INTERACTION_STARTED:"interaction:started",INTERACTION_STREAM_CHUNK:"interaction:stream_chunk",INTERACTION_COMPLETED:"interaction:completed",PROMPT_SUBMITTED:"prompt:submitted",PROMPT_FINALISED:"prompt:finalised",SETTINGS_OPENED:"settings:opened",SETTINGS_CLOSED:"settings:closed",MOD_LOADED:"mod:loaded",MOD_ERROR:"mod:error",VFS_FILE_READ:"vfs:file:read",VFS_FILE_WRITTEN:"vfs:file:written",VFS_FILE_DELETED:"vfs:file:deleted"};function zy(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var iS={exports:{}},dI;function PJ(){return dI||(dI=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(c,f){if(!a[c]){if(!r[c]){var h=typeof zy=="function"&&zy;if(!f&&h)return h(c,!0);if(s)return s(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[c]={exports:{}};r[c][0].call(g.exports,function(w){var v=r[c][1][w];return o(v||w)},g,g.exports,n,r,a,i)}return a[c].exports}for(var s=typeof zy=="function"&&zy,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(u){for(var c,f,h,m,g,w,v,_=[],x=0,S=u.length,E=S,C=i.getTypeOf(u)!=="string";x<u.length;)E=S-x,h=C?(c=u[x++],f=x<S?u[x++]:0,x<S?u[x++]:0):(c=u.charCodeAt(x++),f=x<S?u.charCodeAt(x++):0,x<S?u.charCodeAt(x++):0),m=c>>2,g=(3&c)<<4|f>>4,w=1<E?(15&f)<<2|h>>6:64,v=2<E?63&h:64,_.push(s.charAt(m)+s.charAt(g)+s.charAt(w)+s.charAt(v));return _.join("")},a.decode=function(u){var c,f,h,m,g,w,v=0,_=0,x="data:";if(u.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===s.charAt(64)&&E--,u.charAt(u.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);v<u.length;)c=s.indexOf(u.charAt(v++))<<2|(m=s.indexOf(u.charAt(v++)))>>4,f=(15&m)<<4|(g=s.indexOf(u.charAt(v++)))>>2,h=(3&g)<<6|(w=s.indexOf(u.charAt(v++))),S[_++]=c,g!==64&&(S[_++]=f),w!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function c(f,h,m,g,w){this.compressedSize=f,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=w}c.prototype={getContentWorker:function(){var f=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),h=this;return f.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),f},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(f,h,m){return f.pipe(new s).pipe(new u("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new u("compressedSize")).withStreamInfo("compression",h)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,u=[],c=0;c<256;c++){s=c;for(var f=0;f<8;f++)s=1&s?3988292384^s>>>1:s>>>1;u[c]=s}return u}();r.exports=function(s,u){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(c,f,h,m){var g=o,w=m+h;c^=-1;for(var v=m;v<w;v++)c=c>>>8^g[255&(c^f[v])];return-1^c}(0|u,s,s.length,0):function(c,f,h,m){var g=o,w=m+h;c^=-1;for(var v=m;v<w;v++)c=c>>>8^g[255&(c^f.charCodeAt(v))];return-1^c}(0|u,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),u=n("./stream/GenericWorker"),c=i?"uint8array":"array";function f(h,m){u.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",s.inherits(f,u),f.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(c,h.data),!1)},f.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},f.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new f("Deflate",h)},a.uncompressWorker=function(){return new f("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,w){var v,_="";for(v=0;v<w;v++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,w,v,_,x,S){var E,C,A=g.file,O=g.compression,I=S!==c.utf8encode,D=s.transformTo("string",S(A.name)),B=s.transformTo("string",c.utf8encode(A.name)),W=A.comment,Q=s.transformTo("string",S(W)),M=s.transformTo("string",c.utf8encode(W)),K=B.length!==A.name.length,U=M.length!==W.length,me="",se="",ne="",ee=A.dir,ae=A.date,G={crc32:0,compressedSize:0,uncompressedSize:0};w&&!v||(G.crc32=g.crc32,G.compressedSize=g.compressedSize,G.uncompressedSize=g.uncompressedSize);var Y=0;w&&(Y|=8),I||!K&&!U||(Y|=2048);var J=0,re=0;ee&&(J|=16),x==="UNIX"?(re=798,J|=function(ke,Me){var Pe=ke;return ke||(Pe=Me?16893:33204),(65535&Pe)<<16}(A.unixPermissions,ee)):(re=20,J|=function(ke){return 63&(ke||0)}(A.dosPermissions)),E=ae.getUTCHours(),E<<=6,E|=ae.getUTCMinutes(),E<<=5,E|=ae.getUTCSeconds()/2,C=ae.getUTCFullYear()-1980,C<<=4,C|=ae.getUTCMonth()+1,C<<=5,C|=ae.getUTCDate(),K&&(se=i(1,1)+i(f(D),4)+B,me+="up"+i(se.length,2)+se),U&&(ne=i(1,1)+i(f(Q),4)+M,me+="uc"+i(ne.length,2)+ne);var we="";return we+=`
\0`,we+=i(Y,2),we+=O.magic,we+=i(E,2),we+=i(C,2),we+=i(G.crc32,4),we+=i(G.compressedSize,4),we+=i(G.uncompressedSize,4),we+=i(D.length,2),we+=i(me.length,2),{fileRecord:h.LOCAL_FILE_HEADER+we+D+me,dirRecord:h.CENTRAL_FILE_HEADER+i(re,2)+we+i(Q.length,2)+"\0\0\0\0"+i(J,4)+i(_,4)+D+me+Q}}var s=n("../utils"),u=n("../stream/GenericWorker"),c=n("../utf8"),f=n("../crc32"),h=n("../signature");function m(g,w,v,_){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=w,this.zipPlatform=v,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(m,u),m.prototype.push=function(g){var w=g.meta.percent||0,v=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,u.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:v?(w+100*(v-_-1))/v:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var w=this.streamFiles&&!g.file.dir;if(w){var v=o(g,w,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var w=this.streamFiles&&!g.file.dir,v=o(g,w,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),w)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,w=0;w<this.dirRecords.length;w++)this.push({data:this.dirRecords[w],meta:{percent:100}});var v=this.bytesWritten-g,_=function(x,S,E,C,A){var O=s.transformTo("string",A(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(O.length,2)+O}(this.dirRecords.length,v,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var w=this;return g.on("data",function(v){w.processChunk(v)}),g.on("end",function(){w.closedSource(w.previous.streamInfo),w._sources.length?w.prepareNextSource():w.end()}),g.on("error",function(v){w.error(v)}),this},m.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var w=this._sources;if(!u.prototype.error.call(this,g))return!1;for(var v=0;v<w.length;v++)try{w[v].error(g)}catch{}return!0},m.prototype.lock=function(){u.prototype.lock.call(this);for(var g=this._sources,w=0;w<g.length;w++)g[w].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,u,c){var f=new o(u.streamFiles,c,u.platform,u.encodeFileName),h=0;try{s.forEach(function(m,g){h++;var w=function(S,E){var C=S||E,A=i[C];if(!A)throw new Error(C+" is not a valid compression method !");return A}(g.options.compression,u.compression),v=g.options.compressionOptions||u.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(w,v).withStreamInfo("file",{name:m,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(f)}),f.entriesCount=h}catch(m){f.error(m)}return f}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),u=n("./zipEntries"),c=n("./stream/Crc32Probe"),f=n("./nodejsUtils");function h(m){return new o.Promise(function(g,w){var v=m.decompressed.getContentWorker().pipe(new c);v.on("error",function(_){w(_)}).on("end",function(){v.streamInfo.crc32!==m.decompressed.crc32?w(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var w=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),f.isNode&&f.isStream(m)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(v){var _=new u(g);return _.load(v),_}).then(function(v){var _=[o.Promise.resolve(v)],x=v.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(v){for(var _=v.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,A=i.resolve(E.fileNameStr);w.file(A,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(w.file(A).unsafeOriginalName=C)}return _.zipComment.length&&(w.comment=_.zipComment),w})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(u,c){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}i.inherits(s,o),s.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(f){c.push({data:f,meta:{percent:0}})}).on("error",function(f){c.isPaused?this.generatedError=f:c.error(f)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,u,c){i.call(this,u),this._helper=s;var f=this;s.on("data",function(h,m){f.push(h)||f._helper.pause(),c&&c(m)}).on("error",function(h){f.emit("error",h)}).on("end",function(){f.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Gt<"u",newBufferFrom:function(i,o){if(Gt.from&&Gt.from!==Uint8Array.from)return Gt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Gt(i,o)},allocBuffer:function(i){if(Gt.alloc)return Gt.alloc(i);var o=new Gt(i);return o.fill(0),o},isBuffer:function(i){return Gt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(A,O,I){var D,B=s.getTypeOf(O),W=s.extend(I||{},f);W.date=W.date||new Date,W.compression!==null&&(W.compression=W.compression.toUpperCase()),typeof W.unixPermissions=="string"&&(W.unixPermissions=parseInt(W.unixPermissions,8)),W.unixPermissions&&16384&W.unixPermissions&&(W.dir=!0),W.dosPermissions&&16&W.dosPermissions&&(W.dir=!0),W.dir&&(A=x(A)),W.createFolders&&(D=_(A))&&S.call(this,D,!0);var Q=B==="string"&&W.binary===!1&&W.base64===!1;I&&I.binary!==void 0||(W.binary=!Q),(O instanceof h&&O.uncompressedSize===0||W.dir||!O||O.length===0)&&(W.base64=!1,W.binary=!0,O="",W.compression="STORE",B="string");var M=null;M=O instanceof h||O instanceof u?O:w.isNode&&w.isStream(O)?new v(A,O):s.prepareContent(A,O,W.binary,W.optimizedBinaryString,W.base64);var K=new m(A,M,W);this.files[A]=K}var o=n("./utf8"),s=n("./utils"),u=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),f=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),w=n("./nodejsUtils"),v=n("./nodejs/NodejsStreamInputAdapter"),_=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var O=A.lastIndexOf("/");return 0<O?A.substring(0,O):""},x=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},S=function(A,O){return O=O!==void 0?O:f.createFolders,A=x(A),this.files[A]||i.call(this,A,null,{dir:!0,createFolders:O}),this.files[A]};function E(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var O,I,D;for(O in this.files)D=this.files[O],(I=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&A(I,D)},filter:function(A){var O=[];return this.forEach(function(I,D){A(I,D)&&O.push(D)}),O},file:function(A,O,I){if(arguments.length!==1)return A=this.root+A,i.call(this,A,O,I),this;if(E(A)){var D=A;return this.filter(function(W,Q){return!Q.dir&&D.test(W)})}var B=this.files[this.root+A];return B&&!B.dir?B:null},folder:function(A){if(!A)return this;if(E(A))return this.filter(function(B,W){return W.dir&&A.test(B)});var O=this.root+A,I=S.call(this,O),D=this.clone();return D.root=I.name,D},remove:function(A){A=this.root+A;var O=this.files[A];if(O||(A.slice(-1)!=="/"&&(A+="/"),O=this.files[A]),O&&!O.dir)delete this.files[A];else for(var I=this.filter(function(B,W){return W.name.slice(0,A.length)===A}),D=0;D<I.length;D++)delete this.files[I[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var O,I={};try{if((I=s.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=I.type.toLowerCase(),I.compression=I.compression.toUpperCase(),I.type==="binarystring"&&(I.type="string"),!I.type)throw new Error("No output type specified.");s.checkSupport(I.type),I.platform!=="darwin"&&I.platform!=="freebsd"&&I.platform!=="linux"&&I.platform!=="sunos"||(I.platform="UNIX"),I.platform==="win32"&&(I.platform="DOS");var D=I.comment||this.comment||"";O=g.generateWorker(this,I,D)}catch(B){(O=new u("error")).error(B)}return new c(O,I.type||"string",I.mimeType)},generateAsync:function(A,O){return this.generateInternalStream(A).accumulate(O)},generateNodeStream:function(A,O){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(O)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var u=0;u<this.data.length;u++)s[u]=255&s[u]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===u&&this.data[m+1]===c&&this.data[m+2]===f&&this.data[m+3]===h)return m-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var u=s.charCodeAt(0),c=s.charCodeAt(1),f=s.charCodeAt(2),h=s.charCodeAt(3),m=this.readData(4);return u===m[0]&&c===m[1]&&f===m[2]&&h===m[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var u,c=0;for(this.checkOffset(s),u=this.index+s-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=s,c},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var u=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,u},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),u=n("./StringReader"),c=n("./NodeBufferReader"),f=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||o.uint8array?m==="nodebuffer"?new c(h):o.uint8array?new f(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new u(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(u){i.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(s,i),s.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(s,o),s.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}o.prototype.processChunk.call(this,u)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(u){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(f){c.dataIsReady=!0,c.data=f,c.max=f&&f.length||0,c.type=i.getTypeOf(f),c.isPaused||c._tickAndRepeat()},function(f){c.error(f)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(u){s.processChunk(u)}),o.on("end",function(){s.end()}),o.on("error",function(u){s.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),u=n("../base64"),c=n("../support"),f=n("../external"),h=null;if(c.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(w,v){return new f.Promise(function(_,x){var S=[],E=w._internalType,C=w._outputType,A=w._mimeType;w.on("data",function(O,I){S.push(O),v&&v(I)}).on("error",function(O){S=[],x(O)}).on("end",function(){try{var O=function(I,D,B){switch(I){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),B);case"base64":return u.encode(D);default:return i.transformTo(I,D)}}(C,function(I,D){var B,W=0,Q=null,M=0;for(B=0;B<D.length;B++)M+=D[B].length;switch(I){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(Q=new Uint8Array(M),B=0;B<D.length;B++)Q.set(D[B],W),W+=D[B].length;return Q;case"nodebuffer":return Gt.concat(D);default:throw new Error("concat : unsupported type '"+I+"'")}}(E,S),A);_(O)}catch(I){x(I)}S=[]}).resume()})}function g(w,v,_){var x=v;switch(v){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=v,this._mimeType=_,i.checkSupport(x),this._worker=w.pipe(new o(x)),w.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(w){return m(this,w)},on:function(w,v){var _=this;return w==="data"?this._worker.on(w,function(x){v.call(_,x.data,x.meta)}):this._worker.on(w,function(){i.delay(v,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(w){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},w)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Gt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),u=n("./stream/GenericWorker"),c=new Array(256),f=0;f<256;f++)c[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;c[254]=c[254]=1;function h(){u.call(this,"utf-8 decode"),this.leftOver=null}function m(){u.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(w){var v,_,x,S,E,C=w.length,A=0;for(S=0;S<C;S++)(64512&(_=w.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=w.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),A+=_<128?1:_<2048?2:_<65536?3:4;for(v=o.uint8array?new Uint8Array(A):new Array(A),S=E=0;E<A;S++)(64512&(_=w.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=w.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?v[E++]=_:(_<2048?v[E++]=192|_>>>6:(_<65536?v[E++]=224|_>>>12:(v[E++]=240|_>>>18,v[E++]=128|_>>>12&63),v[E++]=128|_>>>6&63),v[E++]=128|63&_);return v}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(w){var v,_,x,S,E=w.length,C=new Array(2*E);for(v=_=0;v<E;)if((x=w[v++])<128)C[_++]=x;else if(4<(S=c[x]))C[_++]=65533,v+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&v<E;)x=x<<6|63&w[v++],S--;1<S?C[_++]=65533:x<65536?C[_++]=x:(x-=65536,C[_++]=55296|x>>10&1023,C[_++]=56320|1023&x)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,u),h.prototype.processChunk=function(g){var w=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var v=w;(w=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),w.set(v,this.leftOver.length)}else w=this.leftOver.concat(w);this.leftOver=null}var _=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+c[S[C]]>E?C:E}(w),x=w;_!==w.length&&(o.uint8array?(x=w.subarray(0,_),this.leftOver=w.subarray(_,w.length)):(x=w.slice(0,_),this.leftOver=w.slice(_,w.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,u),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),u=n("./external");function c(v){return v}function f(v,_){for(var x=0;x<v.length;++x)_[x]=255&v.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(v,_){a.checkSupport("blob");try{return new Blob([v],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(v),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(v,_,x){var S=[],E=0,C=v.length;if(C<=x)return String.fromCharCode.apply(null,v);for(;E<C;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,v.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,v.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(v){for(var _="",x=0;x<v.length;x++)_+=String.fromCharCode(v[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function m(v){var _=65536,x=a.getTypeOf(v),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(v,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(v)}function g(v,_){for(var x=0;x<v.length;x++)_[x]=v[x];return _}a.applyFromCharCode=m;var w={};w.string={string:c,array:function(v){return f(v,new Array(v.length))},arraybuffer:function(v){return w.string.uint8array(v).buffer},uint8array:function(v){return f(v,new Uint8Array(v.length))},nodebuffer:function(v){return f(v,s.allocBuffer(v.length))}},w.array={string:m,array:c,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return s.newBufferFrom(v)}},w.arraybuffer={string:function(v){return m(new Uint8Array(v))},array:function(v){return g(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:c,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return s.newBufferFrom(new Uint8Array(v))}},w.uint8array={string:m,array:function(v){return g(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:c,nodebuffer:function(v){return s.newBufferFrom(v)}},w.nodebuffer={string:m,array:function(v){return g(v,new Array(v.length))},arraybuffer:function(v){return w.nodebuffer.uint8array(v).buffer},uint8array:function(v){return g(v,new Uint8Array(v.length))},nodebuffer:c},a.transformTo=function(v,_){if(_=_||"",!v)return _;a.checkSupport(v);var x=a.getTypeOf(_);return w[x][v](_)},a.resolve=function(v){for(var _=v.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(v){var _,x,S="";for(x=0;x<(v||"").length;x++)S+="\\x"+((_=v.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(v,_,x){setImmediate(function(){v.apply(x||null,_||[])})},a.inherits=function(v,_){function x(){}x.prototype=_.prototype,v.prototype=new x},a.extend=function(){var v,_,x={};for(v=0;v<arguments.length;v++)for(_ in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],_)&&x[_]===void 0&&(x[_]=arguments[v][_]);return x},a.prepareContent=function(v,_,x,S,E){return u.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new u.Promise(function(A,O){var I=new FileReader;I.onload=function(D){A(D.target.result)},I.onerror=function(D){O(D.target.error)},I.readAsArrayBuffer(C)}):C}).then(function(C){var A=a.getTypeOf(C);return A?(A==="arraybuffer"?C=a.transformTo("uint8array",C):A==="string"&&(E?C=o.decode(C):x&&S!==!0&&(C=function(O){return f(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))}(C))),C):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),u=n("./zipEntry"),c=n("./support");function f(h){this.files=[],this.loadOptions=h}f.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(m)+", expected "+o.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var w=this.reader.readString(4)===m;return this.reader.setIndex(g),w},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=c.uint8array?"uint8array":"array",g=o.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,w=this.zip64EndOfCentralSize-44;0<w;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var w=m-g;if(0<w)this.isSignature(m,s.CENTRAL_FILE_HEADER)||(this.reader.zero=w);else if(w<0)throw new Error("Corrupted zip: missing "+Math.abs(w)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=f},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),u=n("./crc32"),c=n("./utf8"),f=n("./compressions"),h=n("./support");function m(g,w){this.options=g,this.loadOptions=w}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var w,v;if(g.skip(22),this.fileNameLength=g.readInt(2),v=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((w=function(_){for(var x in f)if(Object.prototype.hasOwnProperty.call(f,x)&&f[x].magic===_)return f[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,w,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var w=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(w),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var w,v,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)w=g.readInt(2),v=g.readInt(2),_=g.readData(v),this.extraFields[w]={id:w,length:v,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var w=this.findExtraFieldUnicodePath();if(w!==null)this.fileNameStr=w;else{var v=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var w=i(g.value);return w.readInt(1)!==1||u(this.fileName)!==w.readInt(4)?null:c.utf8decode(w.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var w=i(g.value);return w.readInt(1)!==1||u(this.fileComment)!==w.readInt(4)?null:c.utf8decode(w.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(w,v,_){this.name=w,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=v,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),u=n("./utf8"),c=n("./compressedObject"),f=n("./stream/GenericWorker");i.prototype={internalStream:function(w){var v=null,_="string";try{if(!w)throw new Error("No output type specified.");var x=(_=w.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),v=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(v=v.pipe(new u.Utf8EncodeWorker)),!S&&x&&(v=v.pipe(new u.Utf8DecodeWorker))}catch(E){(v=new f("error")).error(E)}return new o(v,_,"")},async:function(w,v){return this.internalStream(w).accumulate(v)},nodeStream:function(w,v){return this.internalStream(w||"nodebuffer").toNodejsStream(v)},_compressWorker:function(w,v){if(this._data instanceof c&&this._data.compression.magic===w.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(_,w,v)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof f?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var c=0,f=new u(w),h=i.document.createTextNode("");f.observe(h,{characterData:!0}),o=function(){h.data=c=++c%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){w(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(w,0)};else{var m=new i.MessageChannel;m.port1.onmessage=w,o=function(){m.port2.postMessage(0)}}var g=[];function w(){var v,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],v=-1;++v<x;)_[v]();x=g.length}s=!1}r.exports=function(v){g.push(v)!==1||s||o()}}).call(this,typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},u=["REJECTED"],c=["FULFILLED"],f=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,x!==o&&v(this,x)}function m(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var C;try{C=S(E)}catch(A){return s.reject(x,A)}C===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,C)})}function w(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function v(x,S){var E=!1;function C(I){E||(E=!0,s.reject(x,I))}function A(I){E||(E=!0,s.resolve(x,I))}var O=_(function(){S(A,C)});O.status==="error"&&C(O.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===c||typeof S!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==f?g(E,this.state===c?x:S,this.outcome):this.queue.push(new m(E,x,S)),E},m.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){s.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(w,S);if(E.status==="error")return s.reject(x,E.value);var C=E.value;if(C)v(x,C);else{x.state=c,x.outcome=S;for(var A=-1,O=x.queue.length;++A<O;)x.queue[A].callFulfilled(S)}return x},s.reject=function(x,S){x.state=u,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var A=new Array(E),O=0,I=-1,D=new this(o);++I<E;)B(x[I],I);return D;function B(W,Q){S.resolve(W).then(function(M){A[Q]=M,++O!==E||C||(C=!0,s.resolve(D,A))},function(M){C||(C=!0,s.reject(D,M))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var A=-1,O=new this(o);++A<E;)I=x[A],S.resolve(I).then(function(D){C||(C=!0,s.resolve(O,D))},function(D){C||(C=!0,s.reject(O,D))});var I;return O}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/messages"),c=n("./zlib/zstream"),f=Object.prototype.toString,h=0,m=-1,g=0,w=8;function v(x){if(!(this instanceof v))return new v(x);this.options=o.assign({level:m,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(u[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?s.string2buf(S.dictionary):f.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(u[E]);this._dict_set=!0}}function _(x,S){var E=new v(S);if(E.push(x,!0),E.err)throw E.msg||u[E.err];return E.result}v.prototype.push=function(x,S){var E,C,A=this.strm,O=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?A.input=s.string2buf(x):f.call(x)==="[object ArrayBuffer]"?A.input=new Uint8Array(x):A.input=x,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new o.Buf8(O),A.next_out=0,A.avail_out=O),(E=i.deflate(A,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(A.output,A.next_out))):this.onData(o.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(A.avail_out=0))},v.prototype.onData=function(x){this.chunks.push(x)},v.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=v,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),u=n("./zlib/constants"),c=n("./zlib/messages"),f=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(v){if(!(this instanceof g))return new g(v);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},v||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||v&&v.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==u.Z_OK)throw new Error(c[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function w(v,_){var x=new g(_);if(x.push(v,!0),x.err)throw x.msg||c[x.err];return x.result}g.prototype.push=function(v,_){var x,S,E,C,A,O,I=this.strm,D=this.options.chunkSize,B=this.options.dictionary,W=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?I.input=s.binstring2buf(v):m.call(v)==="[object ArrayBuffer]"?I.input=new Uint8Array(v):I.input=v,I.next_in=0,I.avail_in=I.input.length;do{if(I.avail_out===0&&(I.output=new o.Buf8(D),I.next_out=0,I.avail_out=D),(x=i.inflate(I,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&B&&(O=typeof B=="string"?s.string2buf(B):m.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,x=i.inflateSetDictionary(this.strm,O)),x===u.Z_BUF_ERROR&&W===!0&&(x=u.Z_OK,W=!1),x!==u.Z_STREAM_END&&x!==u.Z_OK)return this.onEnd(x),!(this.ended=!0);I.next_out&&(I.avail_out!==0&&x!==u.Z_STREAM_END&&(I.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(I.output,I.next_out),C=I.next_out-E,A=s.buf2string(I.output,E),I.next_out=C,I.avail_out=D-C,C&&o.arraySet(I.output,I.output,E,C,0),this.onData(A)):this.onData(o.shrinkBuf(I.output,I.next_out)))),I.avail_in===0&&I.avail_out===0&&(W=!0)}while((0<I.avail_in||I.avail_out===0)&&x!==u.Z_STREAM_END);return x===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(I.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},a.Inflate=g,a.inflate=w,a.inflateRaw=function(v,_){return(_=_||{}).raw=!0,w(v,_)},a.ungzip=w},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var f=c.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(var h in f)f.hasOwnProperty(h)&&(u[h]=f[h])}}return u},a.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var o={arraySet:function(u,c,f,h,m){if(c.subarray&&u.subarray)u.set(c.subarray(f,f+h),m);else for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){var c,f,h,m,g,w;for(c=h=0,f=u.length;c<f;c++)h+=u[c].length;for(w=new Uint8Array(h),c=m=0,f=u.length;c<f;c++)g=u[c],w.set(g,m),m+=g.length;return w}},s={arraySet:function(u,c,f,h,m){for(var g=0;g<h;g++)u[m+g]=c[f+g]},flattenChunks:function(u){return[].concat.apply([],u)}};a.setTyped=function(u){u?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var u=new i.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function f(h,m){if(m<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",w=0;w<m;w++)g+=String.fromCharCode(h[w]);return g}u[254]=u[254]=1,a.string2buf=function(h){var m,g,w,v,_,x=h.length,S=0;for(v=0;v<x;v++)(64512&(g=h.charCodeAt(v)))==55296&&v+1<x&&(64512&(w=h.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(w-56320),v++),S+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(S),v=_=0;_<S;v++)(64512&(g=h.charCodeAt(v)))==55296&&v+1<x&&(64512&(w=h.charCodeAt(v+1)))==56320&&(g=65536+(g-55296<<10)+(w-56320),v++),g<128?m[_++]=g:(g<2048?m[_++]=192|g>>>6:(g<65536?m[_++]=224|g>>>12:(m[_++]=240|g>>>18,m[_++]=128|g>>>12&63),m[_++]=128|g>>>6&63),m[_++]=128|63&g);return m},a.buf2binstring=function(h){return f(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,w=m.length;g<w;g++)m[g]=h.charCodeAt(g);return m},a.buf2string=function(h,m){var g,w,v,_,x=m||h.length,S=new Array(2*x);for(g=w=0;g<x;)if((v=h[g++])<128)S[w++]=v;else if(4<(_=u[v]))S[w++]=65533,g+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&g<x;)v=v<<6|63&h[g++],_--;1<_?S[w++]=65533:v<65536?S[w++]=v:(v-=65536,S[w++]=55296|v>>10&1023,S[w++]=56320|1023&v)}return f(S,w)},a.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+u[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,u){for(var c=65535&i|0,f=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;f=f+(c=c+o[u++]|0)|0,--h;);c%=65521,f%=65521}return c|f<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],u=0;u<256;u++){o=u;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;s[u]=o}return s}();r.exports=function(o,s,u,c){var f=i,h=c+u;o^=-1;for(var m=c;m<h;m++)o=o>>>8^f[255&(o^s[m])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),u=n("./adler32"),c=n("./crc32"),f=n("./messages"),h=0,m=4,g=0,w=-2,v=-1,_=4,x=2,S=8,E=9,C=286,A=30,O=19,I=2*C+1,D=15,B=3,W=258,Q=W+B+1,M=42,K=113,U=1,me=2,se=3,ne=4;function ee(z,Ce){return z.msg=f[Ce],Ce}function ae(z){return(z<<1)-(4<z?9:0)}function G(z){for(var Ce=z.length;0<=--Ce;)z[Ce]=0}function Y(z){var Ce=z.state,Ne=Ce.pending;Ne>z.avail_out&&(Ne=z.avail_out),Ne!==0&&(o.arraySet(z.output,Ce.pending_buf,Ce.pending_out,Ne,z.next_out),z.next_out+=Ne,Ce.pending_out+=Ne,z.total_out+=Ne,z.avail_out-=Ne,Ce.pending-=Ne,Ce.pending===0&&(Ce.pending_out=0))}function J(z,Ce){s._tr_flush_block(z,0<=z.block_start?z.block_start:-1,z.strstart-z.block_start,Ce),z.block_start=z.strstart,Y(z.strm)}function re(z,Ce){z.pending_buf[z.pending++]=Ce}function we(z,Ce){z.pending_buf[z.pending++]=Ce>>>8&255,z.pending_buf[z.pending++]=255&Ce}function ke(z,Ce){var Ne,ce,ie=z.max_chain_length,X=z.strstart,_e=z.prev_length,Le=z.nice_match,xe=z.strstart>z.w_size-Q?z.strstart-(z.w_size-Q):0,Ve=z.window,xt=z.w_mask,ft=z.prev,Et=z.strstart+W,Lt=Ve[X+_e-1],Tt=Ve[X+_e];z.prev_length>=z.good_match&&(ie>>=2),Le>z.lookahead&&(Le=z.lookahead);do if(Ve[(Ne=Ce)+_e]===Tt&&Ve[Ne+_e-1]===Lt&&Ve[Ne]===Ve[X]&&Ve[++Ne]===Ve[X+1]){X+=2,Ne++;do;while(Ve[++X]===Ve[++Ne]&&Ve[++X]===Ve[++Ne]&&Ve[++X]===Ve[++Ne]&&Ve[++X]===Ve[++Ne]&&Ve[++X]===Ve[++Ne]&&Ve[++X]===Ve[++Ne]&&Ve[++X]===Ve[++Ne]&&Ve[++X]===Ve[++Ne]&&X<Et);if(ce=W-(Et-X),X=Et-W,_e<ce){if(z.match_start=Ce,Le<=(_e=ce))break;Lt=Ve[X+_e-1],Tt=Ve[X+_e]}}while((Ce=ft[Ce&xt])>xe&&--ie!=0);return _e<=z.lookahead?_e:z.lookahead}function Me(z){var Ce,Ne,ce,ie,X,_e,Le,xe,Ve,xt,ft=z.w_size;do{if(ie=z.window_size-z.lookahead-z.strstart,z.strstart>=ft+(ft-Q)){for(o.arraySet(z.window,z.window,ft,ft,0),z.match_start-=ft,z.strstart-=ft,z.block_start-=ft,Ce=Ne=z.hash_size;ce=z.head[--Ce],z.head[Ce]=ft<=ce?ce-ft:0,--Ne;);for(Ce=Ne=ft;ce=z.prev[--Ce],z.prev[Ce]=ft<=ce?ce-ft:0,--Ne;);ie+=ft}if(z.strm.avail_in===0)break;if(_e=z.strm,Le=z.window,xe=z.strstart+z.lookahead,Ve=ie,xt=void 0,xt=_e.avail_in,Ve<xt&&(xt=Ve),Ne=xt===0?0:(_e.avail_in-=xt,o.arraySet(Le,_e.input,_e.next_in,xt,xe),_e.state.wrap===1?_e.adler=u(_e.adler,Le,xt,xe):_e.state.wrap===2&&(_e.adler=c(_e.adler,Le,xt,xe)),_e.next_in+=xt,_e.total_in+=xt,xt),z.lookahead+=Ne,z.lookahead+z.insert>=B)for(X=z.strstart-z.insert,z.ins_h=z.window[X],z.ins_h=(z.ins_h<<z.hash_shift^z.window[X+1])&z.hash_mask;z.insert&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[X+B-1])&z.hash_mask,z.prev[X&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=X,X++,z.insert--,!(z.lookahead+z.insert<B)););}while(z.lookahead<Q&&z.strm.avail_in!==0)}function Pe(z,Ce){for(var Ne,ce;;){if(z.lookahead<Q){if(Me(z),z.lookahead<Q&&Ce===h)return U;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=B&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),Ne!==0&&z.strstart-Ne<=z.w_size-Q&&(z.match_length=ke(z,Ne)),z.match_length>=B)if(ce=s._tr_tally(z,z.strstart-z.match_start,z.match_length-B),z.lookahead-=z.match_length,z.match_length<=z.max_lazy_match&&z.lookahead>=B){for(z.match_length--;z.strstart++,z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart,--z.match_length!=0;);z.strstart++}else z.strstart+=z.match_length,z.match_length=0,z.ins_h=z.window[z.strstart],z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+1])&z.hash_mask;else ce=s._tr_tally(z,0,z.window[z.strstart]),z.lookahead--,z.strstart++;if(ce&&(J(z,!1),z.strm.avail_out===0))return U}return z.insert=z.strstart<B-1?z.strstart:B-1,Ce===m?(J(z,!0),z.strm.avail_out===0?se:ne):z.last_lit&&(J(z,!1),z.strm.avail_out===0)?U:me}function Re(z,Ce){for(var Ne,ce,ie;;){if(z.lookahead<Q){if(Me(z),z.lookahead<Q&&Ce===h)return U;if(z.lookahead===0)break}if(Ne=0,z.lookahead>=B&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),z.prev_length=z.match_length,z.prev_match=z.match_start,z.match_length=B-1,Ne!==0&&z.prev_length<z.max_lazy_match&&z.strstart-Ne<=z.w_size-Q&&(z.match_length=ke(z,Ne),z.match_length<=5&&(z.strategy===1||z.match_length===B&&4096<z.strstart-z.match_start)&&(z.match_length=B-1)),z.prev_length>=B&&z.match_length<=z.prev_length){for(ie=z.strstart+z.lookahead-B,ce=s._tr_tally(z,z.strstart-1-z.prev_match,z.prev_length-B),z.lookahead-=z.prev_length-1,z.prev_length-=2;++z.strstart<=ie&&(z.ins_h=(z.ins_h<<z.hash_shift^z.window[z.strstart+B-1])&z.hash_mask,Ne=z.prev[z.strstart&z.w_mask]=z.head[z.ins_h],z.head[z.ins_h]=z.strstart),--z.prev_length!=0;);if(z.match_available=0,z.match_length=B-1,z.strstart++,ce&&(J(z,!1),z.strm.avail_out===0))return U}else if(z.match_available){if((ce=s._tr_tally(z,0,z.window[z.strstart-1]))&&J(z,!1),z.strstart++,z.lookahead--,z.strm.avail_out===0)return U}else z.match_available=1,z.strstart++,z.lookahead--}return z.match_available&&(ce=s._tr_tally(z,0,z.window[z.strstart-1]),z.match_available=0),z.insert=z.strstart<B-1?z.strstart:B-1,Ce===m?(J(z,!0),z.strm.avail_out===0?se:ne):z.last_lit&&(J(z,!1),z.strm.avail_out===0)?U:me}function Ae(z,Ce,Ne,ce,ie){this.good_length=z,this.max_lazy=Ce,this.nice_length=Ne,this.max_chain=ce,this.func=ie}function He(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*I),this.dyn_dtree=new o.Buf16(2*(2*A+1)),this.bl_tree=new o.Buf16(2*(2*O+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(D+1),this.heap=new o.Buf16(2*C+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function st(z){var Ce;return z&&z.state?(z.total_in=z.total_out=0,z.data_type=x,(Ce=z.state).pending=0,Ce.pending_out=0,Ce.wrap<0&&(Ce.wrap=-Ce.wrap),Ce.status=Ce.wrap?M:K,z.adler=Ce.wrap===2?0:1,Ce.last_flush=h,s._tr_init(Ce),g):ee(z,w)}function Oe(z){var Ce=st(z);return Ce===g&&function(Ne){Ne.window_size=2*Ne.w_size,G(Ne.head),Ne.max_lazy_match=i[Ne.level].max_lazy,Ne.good_match=i[Ne.level].good_length,Ne.nice_match=i[Ne.level].nice_length,Ne.max_chain_length=i[Ne.level].max_chain,Ne.strstart=0,Ne.block_start=0,Ne.lookahead=0,Ne.insert=0,Ne.match_length=Ne.prev_length=B-1,Ne.match_available=0,Ne.ins_h=0}(z.state),Ce}function Te(z,Ce,Ne,ce,ie,X){if(!z)return w;var _e=1;if(Ce===v&&(Ce=6),ce<0?(_e=0,ce=-ce):15<ce&&(_e=2,ce-=16),ie<1||E<ie||Ne!==S||ce<8||15<ce||Ce<0||9<Ce||X<0||_<X)return ee(z,w);ce===8&&(ce=9);var Le=new He;return(z.state=Le).strm=z,Le.wrap=_e,Le.gzhead=null,Le.w_bits=ce,Le.w_size=1<<Le.w_bits,Le.w_mask=Le.w_size-1,Le.hash_bits=ie+7,Le.hash_size=1<<Le.hash_bits,Le.hash_mask=Le.hash_size-1,Le.hash_shift=~~((Le.hash_bits+B-1)/B),Le.window=new o.Buf8(2*Le.w_size),Le.head=new o.Buf16(Le.hash_size),Le.prev=new o.Buf16(Le.w_size),Le.lit_bufsize=1<<ie+6,Le.pending_buf_size=4*Le.lit_bufsize,Le.pending_buf=new o.Buf8(Le.pending_buf_size),Le.d_buf=1*Le.lit_bufsize,Le.l_buf=3*Le.lit_bufsize,Le.level=Ce,Le.strategy=X,Le.method=Ne,Oe(z)}i=[new Ae(0,0,0,0,function(z,Ce){var Ne=65535;for(Ne>z.pending_buf_size-5&&(Ne=z.pending_buf_size-5);;){if(z.lookahead<=1){if(Me(z),z.lookahead===0&&Ce===h)return U;if(z.lookahead===0)break}z.strstart+=z.lookahead,z.lookahead=0;var ce=z.block_start+Ne;if((z.strstart===0||z.strstart>=ce)&&(z.lookahead=z.strstart-ce,z.strstart=ce,J(z,!1),z.strm.avail_out===0)||z.strstart-z.block_start>=z.w_size-Q&&(J(z,!1),z.strm.avail_out===0))return U}return z.insert=0,Ce===m?(J(z,!0),z.strm.avail_out===0?se:ne):(z.strstart>z.block_start&&(J(z,!1),z.strm.avail_out),U)}),new Ae(4,4,8,4,Pe),new Ae(4,5,16,8,Pe),new Ae(4,6,32,32,Pe),new Ae(4,4,16,16,Re),new Ae(8,16,32,32,Re),new Ae(8,16,128,128,Re),new Ae(8,32,128,256,Re),new Ae(32,128,258,1024,Re),new Ae(32,258,258,4096,Re)],a.deflateInit=function(z,Ce){return Te(z,Ce,S,15,8,0)},a.deflateInit2=Te,a.deflateReset=Oe,a.deflateResetKeep=st,a.deflateSetHeader=function(z,Ce){return z&&z.state?z.state.wrap!==2?w:(z.state.gzhead=Ce,g):w},a.deflate=function(z,Ce){var Ne,ce,ie,X;if(!z||!z.state||5<Ce||Ce<0)return z?ee(z,w):w;if(ce=z.state,!z.output||!z.input&&z.avail_in!==0||ce.status===666&&Ce!==m)return ee(z,z.avail_out===0?-5:w);if(ce.strm=z,Ne=ce.last_flush,ce.last_flush=Ce,ce.status===M)if(ce.wrap===2)z.adler=0,re(ce,31),re(ce,139),re(ce,8),ce.gzhead?(re(ce,(ce.gzhead.text?1:0)+(ce.gzhead.hcrc?2:0)+(ce.gzhead.extra?4:0)+(ce.gzhead.name?8:0)+(ce.gzhead.comment?16:0)),re(ce,255&ce.gzhead.time),re(ce,ce.gzhead.time>>8&255),re(ce,ce.gzhead.time>>16&255),re(ce,ce.gzhead.time>>24&255),re(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),re(ce,255&ce.gzhead.os),ce.gzhead.extra&&ce.gzhead.extra.length&&(re(ce,255&ce.gzhead.extra.length),re(ce,ce.gzhead.extra.length>>8&255)),ce.gzhead.hcrc&&(z.adler=c(z.adler,ce.pending_buf,ce.pending,0)),ce.gzindex=0,ce.status=69):(re(ce,0),re(ce,0),re(ce,0),re(ce,0),re(ce,0),re(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),re(ce,3),ce.status=K);else{var _e=S+(ce.w_bits-8<<4)<<8;_e|=(2<=ce.strategy||ce.level<2?0:ce.level<6?1:ce.level===6?2:3)<<6,ce.strstart!==0&&(_e|=32),_e+=31-_e%31,ce.status=K,we(ce,_e),ce.strstart!==0&&(we(ce,z.adler>>>16),we(ce,65535&z.adler)),z.adler=1}if(ce.status===69)if(ce.gzhead.extra){for(ie=ce.pending;ce.gzindex<(65535&ce.gzhead.extra.length)&&(ce.pending!==ce.pending_buf_size||(ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),Y(z),ie=ce.pending,ce.pending!==ce.pending_buf_size));)re(ce,255&ce.gzhead.extra[ce.gzindex]),ce.gzindex++;ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),ce.gzindex===ce.gzhead.extra.length&&(ce.gzindex=0,ce.status=73)}else ce.status=73;if(ce.status===73)if(ce.gzhead.name){ie=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),Y(z),ie=ce.pending,ce.pending===ce.pending_buf_size)){X=1;break}X=ce.gzindex<ce.gzhead.name.length?255&ce.gzhead.name.charCodeAt(ce.gzindex++):0,re(ce,X)}while(X!==0);ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),X===0&&(ce.gzindex=0,ce.status=91)}else ce.status=91;if(ce.status===91)if(ce.gzhead.comment){ie=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),Y(z),ie=ce.pending,ce.pending===ce.pending_buf_size)){X=1;break}X=ce.gzindex<ce.gzhead.comment.length?255&ce.gzhead.comment.charCodeAt(ce.gzindex++):0,re(ce,X)}while(X!==0);ce.gzhead.hcrc&&ce.pending>ie&&(z.adler=c(z.adler,ce.pending_buf,ce.pending-ie,ie)),X===0&&(ce.status=103)}else ce.status=103;if(ce.status===103&&(ce.gzhead.hcrc?(ce.pending+2>ce.pending_buf_size&&Y(z),ce.pending+2<=ce.pending_buf_size&&(re(ce,255&z.adler),re(ce,z.adler>>8&255),z.adler=0,ce.status=K)):ce.status=K),ce.pending!==0){if(Y(z),z.avail_out===0)return ce.last_flush=-1,g}else if(z.avail_in===0&&ae(Ce)<=ae(Ne)&&Ce!==m)return ee(z,-5);if(ce.status===666&&z.avail_in!==0)return ee(z,-5);if(z.avail_in!==0||ce.lookahead!==0||Ce!==h&&ce.status!==666){var Le=ce.strategy===2?function(xe,Ve){for(var xt;;){if(xe.lookahead===0&&(Me(xe),xe.lookahead===0)){if(Ve===h)return U;break}if(xe.match_length=0,xt=s._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++,xt&&(J(xe,!1),xe.strm.avail_out===0))return U}return xe.insert=0,Ve===m?(J(xe,!0),xe.strm.avail_out===0?se:ne):xe.last_lit&&(J(xe,!1),xe.strm.avail_out===0)?U:me}(ce,Ce):ce.strategy===3?function(xe,Ve){for(var xt,ft,Et,Lt,Tt=xe.window;;){if(xe.lookahead<=W){if(Me(xe),xe.lookahead<=W&&Ve===h)return U;if(xe.lookahead===0)break}if(xe.match_length=0,xe.lookahead>=B&&0<xe.strstart&&(ft=Tt[Et=xe.strstart-1])===Tt[++Et]&&ft===Tt[++Et]&&ft===Tt[++Et]){Lt=xe.strstart+W;do;while(ft===Tt[++Et]&&ft===Tt[++Et]&&ft===Tt[++Et]&&ft===Tt[++Et]&&ft===Tt[++Et]&&ft===Tt[++Et]&&ft===Tt[++Et]&&ft===Tt[++Et]&&Et<Lt);xe.match_length=W-(Lt-Et),xe.match_length>xe.lookahead&&(xe.match_length=xe.lookahead)}if(xe.match_length>=B?(xt=s._tr_tally(xe,1,xe.match_length-B),xe.lookahead-=xe.match_length,xe.strstart+=xe.match_length,xe.match_length=0):(xt=s._tr_tally(xe,0,xe.window[xe.strstart]),xe.lookahead--,xe.strstart++),xt&&(J(xe,!1),xe.strm.avail_out===0))return U}return xe.insert=0,Ve===m?(J(xe,!0),xe.strm.avail_out===0?se:ne):xe.last_lit&&(J(xe,!1),xe.strm.avail_out===0)?U:me}(ce,Ce):i[ce.level].func(ce,Ce);if(Le!==se&&Le!==ne||(ce.status=666),Le===U||Le===se)return z.avail_out===0&&(ce.last_flush=-1),g;if(Le===me&&(Ce===1?s._tr_align(ce):Ce!==5&&(s._tr_stored_block(ce,0,0,!1),Ce===3&&(G(ce.head),ce.lookahead===0&&(ce.strstart=0,ce.block_start=0,ce.insert=0))),Y(z),z.avail_out===0))return ce.last_flush=-1,g}return Ce!==m?g:ce.wrap<=0?1:(ce.wrap===2?(re(ce,255&z.adler),re(ce,z.adler>>8&255),re(ce,z.adler>>16&255),re(ce,z.adler>>24&255),re(ce,255&z.total_in),re(ce,z.total_in>>8&255),re(ce,z.total_in>>16&255),re(ce,z.total_in>>24&255)):(we(ce,z.adler>>>16),we(ce,65535&z.adler)),Y(z),0<ce.wrap&&(ce.wrap=-ce.wrap),ce.pending!==0?g:1)},a.deflateEnd=function(z){var Ce;return z&&z.state?(Ce=z.state.status)!==M&&Ce!==69&&Ce!==73&&Ce!==91&&Ce!==103&&Ce!==K&&Ce!==666?ee(z,w):(z.state=null,Ce===K?ee(z,-3):g):w},a.deflateSetDictionary=function(z,Ce){var Ne,ce,ie,X,_e,Le,xe,Ve,xt=Ce.length;if(!z||!z.state||(X=(Ne=z.state).wrap)===2||X===1&&Ne.status!==M||Ne.lookahead)return w;for(X===1&&(z.adler=u(z.adler,Ce,xt,0)),Ne.wrap=0,xt>=Ne.w_size&&(X===0&&(G(Ne.head),Ne.strstart=0,Ne.block_start=0,Ne.insert=0),Ve=new o.Buf8(Ne.w_size),o.arraySet(Ve,Ce,xt-Ne.w_size,Ne.w_size,0),Ce=Ve,xt=Ne.w_size),_e=z.avail_in,Le=z.next_in,xe=z.input,z.avail_in=xt,z.next_in=0,z.input=Ce,Me(Ne);Ne.lookahead>=B;){for(ce=Ne.strstart,ie=Ne.lookahead-(B-1);Ne.ins_h=(Ne.ins_h<<Ne.hash_shift^Ne.window[ce+B-1])&Ne.hash_mask,Ne.prev[ce&Ne.w_mask]=Ne.head[Ne.ins_h],Ne.head[Ne.ins_h]=ce,ce++,--ie;);Ne.strstart=ce,Ne.lookahead=B-1,Me(Ne)}return Ne.strstart+=Ne.lookahead,Ne.block_start=Ne.strstart,Ne.insert=Ne.lookahead,Ne.lookahead=0,Ne.match_length=Ne.prev_length=B-1,Ne.match_available=0,z.next_in=Le,z.input=xe,z.avail_in=_e,Ne.wrap=X,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,u,c,f,h,m,g,w,v,_,x,S,E,C,A,O,I,D,B,W,Q,M,K,U,me;s=i.state,u=i.next_in,U=i.input,c=u+(i.avail_in-5),f=i.next_out,me=i.output,h=f-(o-i.avail_out),m=f+(i.avail_out-257),g=s.dmax,w=s.wsize,v=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,C=s.lencode,A=s.distcode,O=(1<<s.lenbits)-1,I=(1<<s.distbits)-1;e:do{E<15&&(S+=U[u++]<<E,E+=8,S+=U[u++]<<E,E+=8),D=C[S&O];t:for(;;){if(S>>>=B=D>>>24,E-=B,(B=D>>>16&255)===0)me[f++]=65535&D;else{if(!(16&B)){if((64&B)==0){D=C[(65535&D)+(S&(1<<B)-1)];continue t}if(32&B){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}W=65535&D,(B&=15)&&(E<B&&(S+=U[u++]<<E,E+=8),W+=S&(1<<B)-1,S>>>=B,E-=B),E<15&&(S+=U[u++]<<E,E+=8,S+=U[u++]<<E,E+=8),D=A[S&I];n:for(;;){if(S>>>=B=D>>>24,E-=B,!(16&(B=D>>>16&255))){if((64&B)==0){D=A[(65535&D)+(S&(1<<B)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(Q=65535&D,E<(B&=15)&&(S+=U[u++]<<E,(E+=8)<B&&(S+=U[u++]<<E,E+=8)),g<(Q+=S&(1<<B)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=B,E-=B,(B=f-h)<Q){if(v<(B=Q-B)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(K=x,(M=0)===_){if(M+=w-B,B<W){for(W-=B;me[f++]=x[M++],--B;);M=f-Q,K=me}}else if(_<B){if(M+=w+_-B,(B-=_)<W){for(W-=B;me[f++]=x[M++],--B;);if(M=0,_<W){for(W-=B=_;me[f++]=x[M++],--B;);M=f-Q,K=me}}}else if(M+=_-B,B<W){for(W-=B;me[f++]=x[M++],--B;);M=f-Q,K=me}for(;2<W;)me[f++]=K[M++],me[f++]=K[M++],me[f++]=K[M++],W-=3;W&&(me[f++]=K[M++],1<W&&(me[f++]=K[M++]))}else{for(M=f-Q;me[f++]=me[M++],me[f++]=me[M++],me[f++]=me[M++],2<(W-=3););W&&(me[f++]=me[M++],1<W&&(me[f++]=me[M++]))}break}}break}}while(u<c&&f<m);u-=W=E>>3,S&=(1<<(E-=W<<3))-1,i.next_in=u,i.next_out=f,i.avail_in=u<c?c-u+5:5-(u-c),i.avail_out=f<m?m-f+257:257-(f-m),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),u=n("./inffast"),c=n("./inftrees"),f=1,h=2,m=0,g=-2,w=1,v=852,_=592;function x(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(M){var K;return M&&M.state?(K=M.state,M.total_in=M.total_out=K.total=0,M.msg="",K.wrap&&(M.adler=1&K.wrap),K.mode=w,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new i.Buf32(v),K.distcode=K.distdyn=new i.Buf32(_),K.sane=1,K.back=-1,m):g}function C(M){var K;return M&&M.state?((K=M.state).wsize=0,K.whave=0,K.wnext=0,E(M)):g}function A(M,K){var U,me;return M&&M.state?(me=M.state,K<0?(U=0,K=-K):(U=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?g:(me.window!==null&&me.wbits!==K&&(me.window=null),me.wrap=U,me.wbits=K,C(M))):g}function O(M,K){var U,me;return M?(me=new S,(M.state=me).window=null,(U=A(M,K))!==m&&(M.state=null),U):g}var I,D,B=!0;function W(M){if(B){var K;for(I=new i.Buf32(512),D=new i.Buf32(32),K=0;K<144;)M.lens[K++]=8;for(;K<256;)M.lens[K++]=9;for(;K<280;)M.lens[K++]=7;for(;K<288;)M.lens[K++]=8;for(c(f,M.lens,0,288,I,0,M.work,{bits:9}),K=0;K<32;)M.lens[K++]=5;c(h,M.lens,0,32,D,0,M.work,{bits:5}),B=!1}M.lencode=I,M.lenbits=9,M.distcode=D,M.distbits=5}function Q(M,K,U,me){var se,ne=M.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),me>=ne.wsize?(i.arraySet(ne.window,K,U-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(me<(se=ne.wsize-ne.wnext)&&(se=me),i.arraySet(ne.window,K,U-me,se,ne.wnext),(me-=se)?(i.arraySet(ne.window,K,U-me,me,0),ne.wnext=me,ne.whave=ne.wsize):(ne.wnext+=se,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=se))),0}a.inflateReset=C,a.inflateReset2=A,a.inflateResetKeep=E,a.inflateInit=function(M){return O(M,15)},a.inflateInit2=O,a.inflate=function(M,K){var U,me,se,ne,ee,ae,G,Y,J,re,we,ke,Me,Pe,Re,Ae,He,st,Oe,Te,z,Ce,Ne,ce,ie=0,X=new i.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return g;(U=M.state).mode===12&&(U.mode=13),ee=M.next_out,se=M.output,G=M.avail_out,ne=M.next_in,me=M.input,ae=M.avail_in,Y=U.hold,J=U.bits,re=ae,we=G,Ce=m;e:for(;;)switch(U.mode){case w:if(U.wrap===0){U.mode=13;break}for(;J<16;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if(2&U.wrap&&Y===35615){X[U.check=0]=255&Y,X[1]=Y>>>8&255,U.check=s(U.check,X,2,0),J=Y=0,U.mode=2;break}if(U.flags=0,U.head&&(U.head.done=!1),!(1&U.wrap)||(((255&Y)<<8)+(Y>>8))%31){M.msg="incorrect header check",U.mode=30;break}if((15&Y)!=8){M.msg="unknown compression method",U.mode=30;break}if(J-=4,z=8+(15&(Y>>>=4)),U.wbits===0)U.wbits=z;else if(z>U.wbits){M.msg="invalid window size",U.mode=30;break}U.dmax=1<<z,M.adler=U.check=1,U.mode=512&Y?10:12,J=Y=0;break;case 2:for(;J<16;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if(U.flags=Y,(255&U.flags)!=8){M.msg="unknown compression method",U.mode=30;break}if(57344&U.flags){M.msg="unknown header flags set",U.mode=30;break}U.head&&(U.head.text=Y>>8&1),512&U.flags&&(X[0]=255&Y,X[1]=Y>>>8&255,U.check=s(U.check,X,2,0)),J=Y=0,U.mode=3;case 3:for(;J<32;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}U.head&&(U.head.time=Y),512&U.flags&&(X[0]=255&Y,X[1]=Y>>>8&255,X[2]=Y>>>16&255,X[3]=Y>>>24&255,U.check=s(U.check,X,4,0)),J=Y=0,U.mode=4;case 4:for(;J<16;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}U.head&&(U.head.xflags=255&Y,U.head.os=Y>>8),512&U.flags&&(X[0]=255&Y,X[1]=Y>>>8&255,U.check=s(U.check,X,2,0)),J=Y=0,U.mode=5;case 5:if(1024&U.flags){for(;J<16;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}U.length=Y,U.head&&(U.head.extra_len=Y),512&U.flags&&(X[0]=255&Y,X[1]=Y>>>8&255,U.check=s(U.check,X,2,0)),J=Y=0}else U.head&&(U.head.extra=null);U.mode=6;case 6:if(1024&U.flags&&(ae<(ke=U.length)&&(ke=ae),ke&&(U.head&&(z=U.head.extra_len-U.length,U.head.extra||(U.head.extra=new Array(U.head.extra_len)),i.arraySet(U.head.extra,me,ne,ke,z)),512&U.flags&&(U.check=s(U.check,me,ke,ne)),ae-=ke,ne+=ke,U.length-=ke),U.length))break e;U.length=0,U.mode=7;case 7:if(2048&U.flags){if(ae===0)break e;for(ke=0;z=me[ne+ke++],U.head&&z&&U.length<65536&&(U.head.name+=String.fromCharCode(z)),z&&ke<ae;);if(512&U.flags&&(U.check=s(U.check,me,ke,ne)),ae-=ke,ne+=ke,z)break e}else U.head&&(U.head.name=null);U.length=0,U.mode=8;case 8:if(4096&U.flags){if(ae===0)break e;for(ke=0;z=me[ne+ke++],U.head&&z&&U.length<65536&&(U.head.comment+=String.fromCharCode(z)),z&&ke<ae;);if(512&U.flags&&(U.check=s(U.check,me,ke,ne)),ae-=ke,ne+=ke,z)break e}else U.head&&(U.head.comment=null);U.mode=9;case 9:if(512&U.flags){for(;J<16;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if(Y!==(65535&U.check)){M.msg="header crc mismatch",U.mode=30;break}J=Y=0}U.head&&(U.head.hcrc=U.flags>>9&1,U.head.done=!0),M.adler=U.check=0,U.mode=12;break;case 10:for(;J<32;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}M.adler=U.check=x(Y),J=Y=0,U.mode=11;case 11:if(U.havedict===0)return M.next_out=ee,M.avail_out=G,M.next_in=ne,M.avail_in=ae,U.hold=Y,U.bits=J,2;M.adler=U.check=1,U.mode=12;case 12:if(K===5||K===6)break e;case 13:if(U.last){Y>>>=7&J,J-=7&J,U.mode=27;break}for(;J<3;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}switch(U.last=1&Y,J-=1,3&(Y>>>=1)){case 0:U.mode=14;break;case 1:if(W(U),U.mode=20,K!==6)break;Y>>>=2,J-=2;break e;case 2:U.mode=17;break;case 3:M.msg="invalid block type",U.mode=30}Y>>>=2,J-=2;break;case 14:for(Y>>>=7&J,J-=7&J;J<32;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if((65535&Y)!=(Y>>>16^65535)){M.msg="invalid stored block lengths",U.mode=30;break}if(U.length=65535&Y,J=Y=0,U.mode=15,K===6)break e;case 15:U.mode=16;case 16:if(ke=U.length){if(ae<ke&&(ke=ae),G<ke&&(ke=G),ke===0)break e;i.arraySet(se,me,ne,ke,ee),ae-=ke,ne+=ke,G-=ke,ee+=ke,U.length-=ke;break}U.mode=12;break;case 17:for(;J<14;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if(U.nlen=257+(31&Y),Y>>>=5,J-=5,U.ndist=1+(31&Y),Y>>>=5,J-=5,U.ncode=4+(15&Y),Y>>>=4,J-=4,286<U.nlen||30<U.ndist){M.msg="too many length or distance symbols",U.mode=30;break}U.have=0,U.mode=18;case 18:for(;U.have<U.ncode;){for(;J<3;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}U.lens[_e[U.have++]]=7&Y,Y>>>=3,J-=3}for(;U.have<19;)U.lens[_e[U.have++]]=0;if(U.lencode=U.lendyn,U.lenbits=7,Ne={bits:U.lenbits},Ce=c(0,U.lens,0,19,U.lencode,0,U.work,Ne),U.lenbits=Ne.bits,Ce){M.msg="invalid code lengths set",U.mode=30;break}U.have=0,U.mode=19;case 19:for(;U.have<U.nlen+U.ndist;){for(;Ae=(ie=U.lencode[Y&(1<<U.lenbits)-1])>>>16&255,He=65535&ie,!((Re=ie>>>24)<=J);){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if(He<16)Y>>>=Re,J-=Re,U.lens[U.have++]=He;else{if(He===16){for(ce=Re+2;J<ce;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if(Y>>>=Re,J-=Re,U.have===0){M.msg="invalid bit length repeat",U.mode=30;break}z=U.lens[U.have-1],ke=3+(3&Y),Y>>>=2,J-=2}else if(He===17){for(ce=Re+3;J<ce;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}J-=Re,z=0,ke=3+(7&(Y>>>=Re)),Y>>>=3,J-=3}else{for(ce=Re+7;J<ce;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}J-=Re,z=0,ke=11+(127&(Y>>>=Re)),Y>>>=7,J-=7}if(U.have+ke>U.nlen+U.ndist){M.msg="invalid bit length repeat",U.mode=30;break}for(;ke--;)U.lens[U.have++]=z}}if(U.mode===30)break;if(U.lens[256]===0){M.msg="invalid code -- missing end-of-block",U.mode=30;break}if(U.lenbits=9,Ne={bits:U.lenbits},Ce=c(f,U.lens,0,U.nlen,U.lencode,0,U.work,Ne),U.lenbits=Ne.bits,Ce){M.msg="invalid literal/lengths set",U.mode=30;break}if(U.distbits=6,U.distcode=U.distdyn,Ne={bits:U.distbits},Ce=c(h,U.lens,U.nlen,U.ndist,U.distcode,0,U.work,Ne),U.distbits=Ne.bits,Ce){M.msg="invalid distances set",U.mode=30;break}if(U.mode=20,K===6)break e;case 20:U.mode=21;case 21:if(6<=ae&&258<=G){M.next_out=ee,M.avail_out=G,M.next_in=ne,M.avail_in=ae,U.hold=Y,U.bits=J,u(M,we),ee=M.next_out,se=M.output,G=M.avail_out,ne=M.next_in,me=M.input,ae=M.avail_in,Y=U.hold,J=U.bits,U.mode===12&&(U.back=-1);break}for(U.back=0;Ae=(ie=U.lencode[Y&(1<<U.lenbits)-1])>>>16&255,He=65535&ie,!((Re=ie>>>24)<=J);){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if(Ae&&(240&Ae)==0){for(st=Re,Oe=Ae,Te=He;Ae=(ie=U.lencode[Te+((Y&(1<<st+Oe)-1)>>st)])>>>16&255,He=65535&ie,!(st+(Re=ie>>>24)<=J);){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}Y>>>=st,J-=st,U.back+=st}if(Y>>>=Re,J-=Re,U.back+=Re,U.length=He,Ae===0){U.mode=26;break}if(32&Ae){U.back=-1,U.mode=12;break}if(64&Ae){M.msg="invalid literal/length code",U.mode=30;break}U.extra=15&Ae,U.mode=22;case 22:if(U.extra){for(ce=U.extra;J<ce;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}U.length+=Y&(1<<U.extra)-1,Y>>>=U.extra,J-=U.extra,U.back+=U.extra}U.was=U.length,U.mode=23;case 23:for(;Ae=(ie=U.distcode[Y&(1<<U.distbits)-1])>>>16&255,He=65535&ie,!((Re=ie>>>24)<=J);){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if((240&Ae)==0){for(st=Re,Oe=Ae,Te=He;Ae=(ie=U.distcode[Te+((Y&(1<<st+Oe)-1)>>st)])>>>16&255,He=65535&ie,!(st+(Re=ie>>>24)<=J);){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}Y>>>=st,J-=st,U.back+=st}if(Y>>>=Re,J-=Re,U.back+=Re,64&Ae){M.msg="invalid distance code",U.mode=30;break}U.offset=He,U.extra=15&Ae,U.mode=24;case 24:if(U.extra){for(ce=U.extra;J<ce;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}U.offset+=Y&(1<<U.extra)-1,Y>>>=U.extra,J-=U.extra,U.back+=U.extra}if(U.offset>U.dmax){M.msg="invalid distance too far back",U.mode=30;break}U.mode=25;case 25:if(G===0)break e;if(ke=we-G,U.offset>ke){if((ke=U.offset-ke)>U.whave&&U.sane){M.msg="invalid distance too far back",U.mode=30;break}Me=ke>U.wnext?(ke-=U.wnext,U.wsize-ke):U.wnext-ke,ke>U.length&&(ke=U.length),Pe=U.window}else Pe=se,Me=ee-U.offset,ke=U.length;for(G<ke&&(ke=G),G-=ke,U.length-=ke;se[ee++]=Pe[Me++],--ke;);U.length===0&&(U.mode=21);break;case 26:if(G===0)break e;se[ee++]=U.length,G--,U.mode=21;break;case 27:if(U.wrap){for(;J<32;){if(ae===0)break e;ae--,Y|=me[ne++]<<J,J+=8}if(we-=G,M.total_out+=we,U.total+=we,we&&(M.adler=U.check=U.flags?s(U.check,se,we,ee-we):o(U.check,se,we,ee-we)),we=G,(U.flags?Y:x(Y))!==U.check){M.msg="incorrect data check",U.mode=30;break}J=Y=0}U.mode=28;case 28:if(U.wrap&&U.flags){for(;J<32;){if(ae===0)break e;ae--,Y+=me[ne++]<<J,J+=8}if(Y!==(4294967295&U.total)){M.msg="incorrect length check",U.mode=30;break}J=Y=0}U.mode=29;case 29:Ce=1;break e;case 30:Ce=-3;break e;case 31:return-4;case 32:default:return g}return M.next_out=ee,M.avail_out=G,M.next_in=ne,M.avail_in=ae,U.hold=Y,U.bits=J,(U.wsize||we!==M.avail_out&&U.mode<30&&(U.mode<27||K!==4))&&Q(M,M.output,M.next_out,we-M.avail_out)?(U.mode=31,-4):(re-=M.avail_in,we-=M.avail_out,M.total_in+=re,M.total_out+=we,U.total+=we,U.wrap&&we&&(M.adler=U.check=U.flags?s(U.check,se,we,M.next_out-we):o(U.check,se,we,M.next_out-we)),M.data_type=U.bits+(U.last?64:0)+(U.mode===12?128:0)+(U.mode===20||U.mode===15?256:0),(re==0&&we===0||K===4)&&Ce===m&&(Ce=-5),Ce)},a.inflateEnd=function(M){if(!M||!M.state)return g;var K=M.state;return K.window&&(K.window=null),M.state=null,m},a.inflateGetHeader=function(M,K){var U;return M&&M.state?(2&(U=M.state).wrap)==0?g:((U.head=K).done=!1,m):g},a.inflateSetDictionary=function(M,K){var U,me=K.length;return M&&M.state?(U=M.state).wrap!==0&&U.mode!==11?g:U.mode===11&&o(1,K,me,0)!==U.check?-3:Q(M,K,me,me)?(U.mode=31,-4):(U.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(f,h,m,g,w,v,_,x){var S,E,C,A,O,I,D,B,W,Q=x.bits,M=0,K=0,U=0,me=0,se=0,ne=0,ee=0,ae=0,G=0,Y=0,J=null,re=0,we=new i.Buf16(16),ke=new i.Buf16(16),Me=null,Pe=0;for(M=0;M<=15;M++)we[M]=0;for(K=0;K<g;K++)we[h[m+K]]++;for(se=Q,me=15;1<=me&&we[me]===0;me--);if(me<se&&(se=me),me===0)return w[v++]=20971520,w[v++]=20971520,x.bits=1,0;for(U=1;U<me&&we[U]===0;U++);for(se<U&&(se=U),M=ae=1;M<=15;M++)if(ae<<=1,(ae-=we[M])<0)return-1;if(0<ae&&(f===0||me!==1))return-1;for(ke[1]=0,M=1;M<15;M++)ke[M+1]=ke[M]+we[M];for(K=0;K<g;K++)h[m+K]!==0&&(_[ke[h[m+K]]++]=K);if(I=f===0?(J=Me=_,19):f===1?(J=o,re-=257,Me=s,Pe-=257,256):(J=u,Me=c,-1),M=U,O=v,ee=K=Y=0,C=-1,A=(G=1<<(ne=se))-1,f===1&&852<G||f===2&&592<G)return 1;for(;;){for(D=M-ee,W=_[K]<I?(B=0,_[K]):_[K]>I?(B=Me[Pe+_[K]],J[re+_[K]]):(B=96,0),S=1<<M-ee,U=E=1<<ne;w[O+(Y>>ee)+(E-=S)]=D<<24|B<<16|W|0,E!==0;);for(S=1<<M-1;Y&S;)S>>=1;if(S!==0?(Y&=S-1,Y+=S):Y=0,K++,--we[M]==0){if(M===me)break;M=h[m+_[K]]}if(se<M&&(Y&A)!==C){for(ee===0&&(ee=se),O+=U,ae=1<<(ne=M-ee);ne+ee<me&&!((ae-=we[ne+ee])<=0);)ne++,ae<<=1;if(G+=1<<ne,f===1&&852<G||f===2&&592<G)return 1;w[C=Y&A]=se<<24|ne<<16|O-v|0}}return Y!==0&&(w[O+Y]=M-ee<<24|64<<16|0),x.bits=se,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function u(ie){for(var X=ie.length;0<=--X;)ie[X]=0}var c=0,f=29,h=256,m=h+1+f,g=30,w=19,v=2*m+1,_=15,x=16,S=7,E=256,C=16,A=17,O=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(m+2));u(Q);var M=new Array(2*g);u(M);var K=new Array(512);u(K);var U=new Array(256);u(U);var me=new Array(f);u(me);var se,ne,ee,ae=new Array(g);function G(ie,X,_e,Le,xe){this.static_tree=ie,this.extra_bits=X,this.extra_base=_e,this.elems=Le,this.max_length=xe,this.has_stree=ie&&ie.length}function Y(ie,X){this.dyn_tree=ie,this.max_code=0,this.stat_desc=X}function J(ie){return ie<256?K[ie]:K[256+(ie>>>7)]}function re(ie,X){ie.pending_buf[ie.pending++]=255&X,ie.pending_buf[ie.pending++]=X>>>8&255}function we(ie,X,_e){ie.bi_valid>x-_e?(ie.bi_buf|=X<<ie.bi_valid&65535,re(ie,ie.bi_buf),ie.bi_buf=X>>x-ie.bi_valid,ie.bi_valid+=_e-x):(ie.bi_buf|=X<<ie.bi_valid&65535,ie.bi_valid+=_e)}function ke(ie,X,_e){we(ie,_e[2*X],_e[2*X+1])}function Me(ie,X){for(var _e=0;_e|=1&ie,ie>>>=1,_e<<=1,0<--X;);return _e>>>1}function Pe(ie,X,_e){var Le,xe,Ve=new Array(_+1),xt=0;for(Le=1;Le<=_;Le++)Ve[Le]=xt=xt+_e[Le-1]<<1;for(xe=0;xe<=X;xe++){var ft=ie[2*xe+1];ft!==0&&(ie[2*xe]=Me(Ve[ft]++,ft))}}function Re(ie){var X;for(X=0;X<m;X++)ie.dyn_ltree[2*X]=0;for(X=0;X<g;X++)ie.dyn_dtree[2*X]=0;for(X=0;X<w;X++)ie.bl_tree[2*X]=0;ie.dyn_ltree[2*E]=1,ie.opt_len=ie.static_len=0,ie.last_lit=ie.matches=0}function Ae(ie){8<ie.bi_valid?re(ie,ie.bi_buf):0<ie.bi_valid&&(ie.pending_buf[ie.pending++]=ie.bi_buf),ie.bi_buf=0,ie.bi_valid=0}function He(ie,X,_e,Le){var xe=2*X,Ve=2*_e;return ie[xe]<ie[Ve]||ie[xe]===ie[Ve]&&Le[X]<=Le[_e]}function st(ie,X,_e){for(var Le=ie.heap[_e],xe=_e<<1;xe<=ie.heap_len&&(xe<ie.heap_len&&He(X,ie.heap[xe+1],ie.heap[xe],ie.depth)&&xe++,!He(X,Le,ie.heap[xe],ie.depth));)ie.heap[_e]=ie.heap[xe],_e=xe,xe<<=1;ie.heap[_e]=Le}function Oe(ie,X,_e){var Le,xe,Ve,xt,ft=0;if(ie.last_lit!==0)for(;Le=ie.pending_buf[ie.d_buf+2*ft]<<8|ie.pending_buf[ie.d_buf+2*ft+1],xe=ie.pending_buf[ie.l_buf+ft],ft++,Le===0?ke(ie,xe,X):(ke(ie,(Ve=U[xe])+h+1,X),(xt=I[Ve])!==0&&we(ie,xe-=me[Ve],xt),ke(ie,Ve=J(--Le),_e),(xt=D[Ve])!==0&&we(ie,Le-=ae[Ve],xt)),ft<ie.last_lit;);ke(ie,E,X)}function Te(ie,X){var _e,Le,xe,Ve=X.dyn_tree,xt=X.stat_desc.static_tree,ft=X.stat_desc.has_stree,Et=X.stat_desc.elems,Lt=-1;for(ie.heap_len=0,ie.heap_max=v,_e=0;_e<Et;_e++)Ve[2*_e]!==0?(ie.heap[++ie.heap_len]=Lt=_e,ie.depth[_e]=0):Ve[2*_e+1]=0;for(;ie.heap_len<2;)Ve[2*(xe=ie.heap[++ie.heap_len]=Lt<2?++Lt:0)]=1,ie.depth[xe]=0,ie.opt_len--,ft&&(ie.static_len-=xt[2*xe+1]);for(X.max_code=Lt,_e=ie.heap_len>>1;1<=_e;_e--)st(ie,Ve,_e);for(xe=Et;_e=ie.heap[1],ie.heap[1]=ie.heap[ie.heap_len--],st(ie,Ve,1),Le=ie.heap[1],ie.heap[--ie.heap_max]=_e,ie.heap[--ie.heap_max]=Le,Ve[2*xe]=Ve[2*_e]+Ve[2*Le],ie.depth[xe]=(ie.depth[_e]>=ie.depth[Le]?ie.depth[_e]:ie.depth[Le])+1,Ve[2*_e+1]=Ve[2*Le+1]=xe,ie.heap[1]=xe++,st(ie,Ve,1),2<=ie.heap_len;);ie.heap[--ie.heap_max]=ie.heap[1],function(Tt,zt){var ge,R,H,fe,Ie,be,Ee=zt.dyn_tree,le=zt.max_code,ct=zt.stat_desc.static_tree,yt=zt.stat_desc.has_stree,P=zt.stat_desc.extra_bits,Be=zt.stat_desc.extra_base,et=zt.stat_desc.max_length,pe=0;for(fe=0;fe<=_;fe++)Tt.bl_count[fe]=0;for(Ee[2*Tt.heap[Tt.heap_max]+1]=0,ge=Tt.heap_max+1;ge<v;ge++)et<(fe=Ee[2*Ee[2*(R=Tt.heap[ge])+1]+1]+1)&&(fe=et,pe++),Ee[2*R+1]=fe,le<R||(Tt.bl_count[fe]++,Ie=0,Be<=R&&(Ie=P[R-Be]),be=Ee[2*R],Tt.opt_len+=be*(fe+Ie),yt&&(Tt.static_len+=be*(ct[2*R+1]+Ie)));if(pe!==0){do{for(fe=et-1;Tt.bl_count[fe]===0;)fe--;Tt.bl_count[fe]--,Tt.bl_count[fe+1]+=2,Tt.bl_count[et]--,pe-=2}while(0<pe);for(fe=et;fe!==0;fe--)for(R=Tt.bl_count[fe];R!==0;)le<(H=Tt.heap[--ge])||(Ee[2*H+1]!==fe&&(Tt.opt_len+=(fe-Ee[2*H+1])*Ee[2*H],Ee[2*H+1]=fe),R--)}}(ie,X),Pe(Ve,Lt,ie.bl_count)}function z(ie,X,_e){var Le,xe,Ve=-1,xt=X[1],ft=0,Et=7,Lt=4;for(xt===0&&(Et=138,Lt=3),X[2*(_e+1)+1]=65535,Le=0;Le<=_e;Le++)xe=xt,xt=X[2*(Le+1)+1],++ft<Et&&xe===xt||(ft<Lt?ie.bl_tree[2*xe]+=ft:xe!==0?(xe!==Ve&&ie.bl_tree[2*xe]++,ie.bl_tree[2*C]++):ft<=10?ie.bl_tree[2*A]++:ie.bl_tree[2*O]++,Ve=xe,Lt=(ft=0)===xt?(Et=138,3):xe===xt?(Et=6,3):(Et=7,4))}function Ce(ie,X,_e){var Le,xe,Ve=-1,xt=X[1],ft=0,Et=7,Lt=4;for(xt===0&&(Et=138,Lt=3),Le=0;Le<=_e;Le++)if(xe=xt,xt=X[2*(Le+1)+1],!(++ft<Et&&xe===xt)){if(ft<Lt)for(;ke(ie,xe,ie.bl_tree),--ft!=0;);else xe!==0?(xe!==Ve&&(ke(ie,xe,ie.bl_tree),ft--),ke(ie,C,ie.bl_tree),we(ie,ft-3,2)):ft<=10?(ke(ie,A,ie.bl_tree),we(ie,ft-3,3)):(ke(ie,O,ie.bl_tree),we(ie,ft-11,7));Ve=xe,Lt=(ft=0)===xt?(Et=138,3):xe===xt?(Et=6,3):(Et=7,4)}}u(ae);var Ne=!1;function ce(ie,X,_e,Le){we(ie,(c<<1)+(Le?1:0),3),function(xe,Ve,xt,ft){Ae(xe),re(xe,xt),re(xe,~xt),i.arraySet(xe.pending_buf,xe.window,Ve,xt,xe.pending),xe.pending+=xt}(ie,X,_e)}a._tr_init=function(ie){Ne||(function(){var X,_e,Le,xe,Ve,xt=new Array(_+1);for(xe=Le=0;xe<f-1;xe++)for(me[xe]=Le,X=0;X<1<<I[xe];X++)U[Le++]=xe;for(U[Le-1]=xe,xe=Ve=0;xe<16;xe++)for(ae[xe]=Ve,X=0;X<1<<D[xe];X++)K[Ve++]=xe;for(Ve>>=7;xe<g;xe++)for(ae[xe]=Ve<<7,X=0;X<1<<D[xe]-7;X++)K[256+Ve++]=xe;for(_e=0;_e<=_;_e++)xt[_e]=0;for(X=0;X<=143;)Q[2*X+1]=8,X++,xt[8]++;for(;X<=255;)Q[2*X+1]=9,X++,xt[9]++;for(;X<=279;)Q[2*X+1]=7,X++,xt[7]++;for(;X<=287;)Q[2*X+1]=8,X++,xt[8]++;for(Pe(Q,m+1,xt),X=0;X<g;X++)M[2*X+1]=5,M[2*X]=Me(X,5);se=new G(Q,I,h+1,m,_),ne=new G(M,D,0,g,_),ee=new G(new Array(0),B,0,w,S)}(),Ne=!0),ie.l_desc=new Y(ie.dyn_ltree,se),ie.d_desc=new Y(ie.dyn_dtree,ne),ie.bl_desc=new Y(ie.bl_tree,ee),ie.bi_buf=0,ie.bi_valid=0,Re(ie)},a._tr_stored_block=ce,a._tr_flush_block=function(ie,X,_e,Le){var xe,Ve,xt=0;0<ie.level?(ie.strm.data_type===2&&(ie.strm.data_type=function(ft){var Et,Lt=4093624447;for(Et=0;Et<=31;Et++,Lt>>>=1)if(1&Lt&&ft.dyn_ltree[2*Et]!==0)return o;if(ft.dyn_ltree[18]!==0||ft.dyn_ltree[20]!==0||ft.dyn_ltree[26]!==0)return s;for(Et=32;Et<h;Et++)if(ft.dyn_ltree[2*Et]!==0)return s;return o}(ie)),Te(ie,ie.l_desc),Te(ie,ie.d_desc),xt=function(ft){var Et;for(z(ft,ft.dyn_ltree,ft.l_desc.max_code),z(ft,ft.dyn_dtree,ft.d_desc.max_code),Te(ft,ft.bl_desc),Et=w-1;3<=Et&&ft.bl_tree[2*W[Et]+1]===0;Et--);return ft.opt_len+=3*(Et+1)+5+5+4,Et}(ie),xe=ie.opt_len+3+7>>>3,(Ve=ie.static_len+3+7>>>3)<=xe&&(xe=Ve)):xe=Ve=_e+5,_e+4<=xe&&X!==-1?ce(ie,X,_e,Le):ie.strategy===4||Ve===xe?(we(ie,2+(Le?1:0),3),Oe(ie,Q,M)):(we(ie,4+(Le?1:0),3),function(ft,Et,Lt,Tt){var zt;for(we(ft,Et-257,5),we(ft,Lt-1,5),we(ft,Tt-4,4),zt=0;zt<Tt;zt++)we(ft,ft.bl_tree[2*W[zt]+1],3);Ce(ft,ft.dyn_ltree,Et-1),Ce(ft,ft.dyn_dtree,Lt-1)}(ie,ie.l_desc.max_code+1,ie.d_desc.max_code+1,xt+1),Oe(ie,ie.dyn_ltree,ie.dyn_dtree)),Re(ie),Le&&Ae(ie)},a._tr_tally=function(ie,X,_e){return ie.pending_buf[ie.d_buf+2*ie.last_lit]=X>>>8&255,ie.pending_buf[ie.d_buf+2*ie.last_lit+1]=255&X,ie.pending_buf[ie.l_buf+ie.last_lit]=255&_e,ie.last_lit++,X===0?ie.dyn_ltree[2*_e]++:(ie.matches++,X--,ie.dyn_ltree[2*(U[_e]+h+1)]++,ie.dyn_dtree[2*J(X)]++),ie.last_lit===ie.lit_bufsize-1},a._tr_align=function(ie){we(ie,2,3),ke(ie,E,Q),function(X){X.bi_valid===16?(re(X,X.bi_buf),X.bi_buf=0,X.bi_valid=0):8<=X.bi_valid&&(X.pending_buf[X.pending++]=255&X.bi_buf,X.bi_buf>>=8,X.bi_valid-=8)}(ie)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var u,c,f,h,m=1,g={},w=!1,v=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,u={}.toString.call(o.process)==="[object process]"?function(C){Vr.nextTick(function(){S(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,A=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=A,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((f=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){f.port2.postMessage(C)}):v&&"onreadystatechange"in v.createElement("script")?(c=v.documentElement,function(C){var A=v.createElement("script");A.onreadystatechange=function(){S(C),A.onreadystatechange=null,c.removeChild(A),A=null},c.appendChild(A)}):function(C){setTimeout(S,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var A=new Array(arguments.length-1),O=0;O<A.length;O++)A[O]=arguments[O+1];var I={callback:C,args:A};return g[m]=I,u(m),m++},_.clearImmediate=x}function x(C){delete g[C]}function S(C){if(w)setTimeout(S,0,C);else{var A=g[C];if(A){w=!0;try{(function(O){var I=O.callback,D=O.args;switch(D.length){case 0:I();break;case 1:I(D[0]);break;case 2:I(D[0],D[1]);break;case 3:I(D[0],D[1],D[2]);break;default:I.apply(s,D)}})(A)}finally{x(C),w=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(iS)),iS.exports}var FJ=PJ();const Gj=Ja(FJ);var oS,fI;function LJ(){if(fI)return oS;fI=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Vr>"u"||typeof Vr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var u=!1,c=null,f=null,h=null,m=this,g=function(E,C,A){f&&(clearTimeout(f),f=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),u||(s?C?o(C):i(A):typeof r=="function"&&r(C,A),u=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},w=function(E){if(u)return g(E);c&&(clearTimeout(c),c=null),m.domainReentrant&&E&&(m.domains[t]=Vr.domain);var C=a.maxExecutionTime||m.maxExecutionTime;if(C&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var A=!1;try{n(function(O,I){A||(A=!0,g(E,O,I))})}catch(O){A||(A=!0,g(E,O))}}else m._promiseTry(function(){return n()}).then(function(O){g(E,void 0,O)},function(O){g(E,O)})};m.domainReentrant&&Vr.domain&&(w=Vr.domain.bind(w));var v=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],w(!0);else if(m.domainReentrant&&Vr.domain&&Vr.domain===m.domains[t])w(!1);else if(m.queues[t].length>=v)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){w(!0)};a.skipQueue?m.queues[t].unshift(_):m.queues[t].push(_);var x=a.timeout||m.timeout;x&&(c=setTimeout(function(){c=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||m.maxOccupationTime;if(S&&(f=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(u,c){return function(f){i.acquire(u,c,f,a)}},s=t.reduceRight(function(u,c){return o(c,u)},n);if(typeof r=="function")s(r);else return new this.Promise(function(u,c){s.length===1?s(function(f,h){f?c(f):u(h)}):u(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},oS=e,oS}var sS,hI;function $J(){return hI||(hI=1,sS=LJ()),sS}var BJ=$J();const Pm=Ja(BJ);var Uy={exports:{}},pI;function zJ(){return pI||(pI=1,typeof Object.create=="function"?Uy.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Uy.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Uy.exports}var lS,mI;function UJ(){if(mI)return lS;mI=1;var e=XC().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,u=0;u<o;){for(var c=s%i,f=Math.min(o-u,i-c),h=0;h<f;h++)a[c+h]=n[u+h];s+=f,u+=f,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},lS=t,lS}var uS,gI;function qJ(){if(gI)return uS;gI=1;var e=zJ(),t=UJ(),n=XC().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(f){return f<<1|f>>>31}function s(f){return f<<5|f>>>27}function u(f){return f<<30|f>>>2}function c(f,h,m,g){return f===0?h&m|~h&g:f===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(f){for(var h=this._w,m=this._a|0,g=this._b|0,w=this._c|0,v=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=f.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=s(m)+c(E,g,w,v)+_+h[S]+r[E]|0;_=v,v=w,w=u(g),g=m,m=C}this._a=m+this._a|0,this._b=g+this._b|0,this._c=w+this._c|0,this._d=v+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var f=n.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},uS=i,uS}var HJ=qJ();const Wj=Ja(HJ);var cS,yI;function VJ(){if(yI)return cS;yI=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,u=-1,c=0,f,h=0;h<=a.length;++h){if(h<a.length)f=a.charCodeAt(h);else{if(f===47)break;f=47}if(f===47){if(!(u===h-1||c===1))if(u!==h-1&&c===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var m=o.lastIndexOf("/");if(m!==o.length-1){m===-1?(o="",s=0):(o=o.slice(0,m),s=o.length-1-o.lastIndexOf("/")),u=h,c=0;continue}}else if(o.length===2||o.length===1){o="",s=0,u=h,c=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(u+1,h):o=a.slice(u+1,h),s=h-u-1;u=h,c=0}else f===46&&c!==-1?++c:c=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,u=arguments.length-1;u>=-1&&!o;u--){var c;u>=0?c=arguments[u]:(s===void 0&&(s=Vr.cwd()),c=s),e(c),c.length!==0&&(i=c+"/"+i,o=c.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var u=i.length,c=u-s,f=1;f<o.length&&o.charCodeAt(f)===47;++f);for(var h=o.length,m=h-f,g=c<m?c:m,w=-1,v=0;v<=g;++v){if(v===g){if(m>g){if(o.charCodeAt(f+v)===47)return o.slice(f+v+1);if(v===0)return o.slice(f+v)}else c>g&&(i.charCodeAt(s+v)===47?w=v:v===0&&(w=0));break}var _=i.charCodeAt(s+v),x=o.charCodeAt(f+v);if(_!==x)break;_===47&&(w=v)}var S="";for(v=s+w+1;v<=u;++v)(v===u||i.charCodeAt(v)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(f+w):(f+=w,o.charCodeAt(f)===47&&++f,o.slice(f))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,u=-1,c=!0,f=i.length-1;f>=1;--f)if(o=i.charCodeAt(f),o===47){if(!c){u=f;break}}else c=!1;return u===-1?s?"/":".":s&&u===1?"//":i.slice(0,u)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,u=-1,c=!0,f;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,m=-1;for(f=i.length-1;f>=0;--f){var g=i.charCodeAt(f);if(g===47){if(!c){s=f+1;break}}else m===-1&&(c=!1,m=f+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(u=f):(h=-1,u=m))}return s===u?u=m:u===-1&&(u=i.length),i.slice(s,u)}else{for(f=i.length-1;f>=0;--f)if(i.charCodeAt(f)===47){if(!c){s=f+1;break}}else u===-1&&(c=!1,u=f+1);return u===-1?"":i.slice(s,u)}},extname:function(i){e(i);for(var o=-1,s=0,u=-1,c=!0,f=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!c){s=h+1;break}continue}u===-1&&(c=!1,u=h+1),m===46?o===-1?o=h:f!==1&&(f=1):o!==-1&&(f=-1)}return o===-1||u===-1||f===0||f===1&&o===u-1&&o===s+1?"":i.slice(o,u)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),u=s===47,c;u?(o.root="/",c=1):c=0;for(var f=-1,h=0,m=-1,g=!0,w=i.length-1,v=0;w>=c;--w){if(s=i.charCodeAt(w),s===47){if(!g){h=w+1;break}continue}m===-1&&(g=!1,m=w+1),s===46?f===-1?f=w:v!==1&&(v=1):f!==-1&&(v=-1)}return f===-1||m===-1||v===0||v===1&&f===m-1&&f===h+1?m!==-1&&(h===0&&u?o.base=o.name=i.slice(1,m):o.base=o.name=i.slice(h,m)):(h===0&&u?(o.name=i.slice(1,f),o.base=i.slice(1,m)):(o.name=i.slice(h,f),o.base=i.slice(h,m)),o.ext=i.slice(f,m)),h>0?o.dir=i.slice(0,h-1):u&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,cS=r,cS}var At=VJ(),dS={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var bI;function GJ(){return bI||(bI=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var D=0,B=new Array(256),W=0;W!=256;++W)D=W,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,B[W]=D;return typeof Int32Array<"u"?new Int32Array(B):B}var r=n();function a(D){var B=0,W=0,Q=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Q=0;Q!=256;++Q)M[Q]=D[Q];for(Q=0;Q!=256;++Q)for(W=D[Q],B=256+Q;B<4096;B+=256)W=M[B]=W>>>8^D[W&255];var K=[];for(Q=1;Q!=16;++Q)K[Q-1]=typeof Int32Array<"u"?M.subarray(Q*256,Q*256+256):M.slice(Q*256,Q*256+256);return K}var i=a(r),o=i[0],s=i[1],u=i[2],c=i[3],f=i[4],h=i[5],m=i[6],g=i[7],w=i[8],v=i[9],_=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function A(D,B){for(var W=B^-1,Q=0,M=D.length;Q<M;)W=W>>>8^r[(W^D.charCodeAt(Q++))&255];return~W}function O(D,B){for(var W=B^-1,Q=D.length-15,M=0;M<Q;)W=C[D[M++]^W&255]^E[D[M++]^W>>8&255]^S[D[M++]^W>>16&255]^x[D[M++]^W>>>24]^_[D[M++]]^v[D[M++]]^w[D[M++]]^g[D[M++]]^m[D[M++]]^h[D[M++]]^f[D[M++]]^c[D[M++]]^u[D[M++]]^s[D[M++]]^o[D[M++]]^r[D[M++]];for(Q+=15;M<Q;)W=W>>>8^r[(W^D[M++])&255];return~W}function I(D,B){for(var W=B^-1,Q=0,M=D.length,K=0,U=0;Q<M;)K=D.charCodeAt(Q++),K<128?W=W>>>8^r[(W^K)&255]:K<2048?(W=W>>>8^r[(W^(192|K>>6&31))&255],W=W>>>8^r[(W^(128|K&63))&255]):K>=55296&&K<57344?(K=(K&1023)+64,U=D.charCodeAt(Q++)&1023,W=W>>>8^r[(W^(240|K>>8&7))&255],W=W>>>8^r[(W^(128|K>>2&63))&255],W=W>>>8^r[(W^(128|U>>6&15|(K&3)<<4))&255],W=W>>>8^r[(W^(128|U&63))&255]):(W=W>>>8^r[(W^(224|K>>12&15))&255],W=W>>>8^r[(W^(128|K>>6&63))&255],W=W>>>8^r[(W^(128|K&63))&255]);return~W}t.table=r,t.bstr=A,t.buf=O,t.str=I})}(dS)),dS}var WJ=GJ();const KJ=Ja(WJ);var fS={},vI;function gc(){return vI||(vI=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(i[u]=s[u])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,u,c){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+u),c);return}for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){var o,s,u,c,f,h;for(u=0,o=0,s=i.length;o<s;o++)u+=i[o].length;for(h=new Uint8Array(u),c=0,o=0,s=i.length;o<s;o++)f=i[o],h.set(f,c),c+=f.length;return h}},a={arraySet:function(i,o,s,u,c){for(var f=0;f<u;f++)i[c+f]=o[s+f]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(fS)),fS}var Ef={},No={},Vc={},wI;function ZJ(){if(wI)return Vc;wI=1;var e=gc(),t=4,n=0,r=1,a=2;function i(R){for(var H=R.length;--H>=0;)R[H]=0}var o=0,s=1,u=2,c=3,f=258,h=29,m=256,g=m+1+h,w=30,v=19,_=2*g+1,x=15,S=16,E=7,C=256,A=16,O=17,I=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],W=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=512,K=new Array((g+2)*2);i(K);var U=new Array(w*2);i(U);var me=new Array(M);i(me);var se=new Array(f-c+1);i(se);var ne=new Array(h);i(ne);var ee=new Array(w);i(ee);function ae(R,H,fe,Ie,be){this.static_tree=R,this.extra_bits=H,this.extra_base=fe,this.elems=Ie,this.max_length=be,this.has_stree=R&&R.length}var G,Y,J;function re(R,H){this.dyn_tree=R,this.max_code=0,this.stat_desc=H}function we(R){return R<256?me[R]:me[256+(R>>>7)]}function ke(R,H){R.pending_buf[R.pending++]=H&255,R.pending_buf[R.pending++]=H>>>8&255}function Me(R,H,fe){R.bi_valid>S-fe?(R.bi_buf|=H<<R.bi_valid&65535,ke(R,R.bi_buf),R.bi_buf=H>>S-R.bi_valid,R.bi_valid+=fe-S):(R.bi_buf|=H<<R.bi_valid&65535,R.bi_valid+=fe)}function Pe(R,H,fe){Me(R,fe[H*2],fe[H*2+1])}function Re(R,H){var fe=0;do fe|=R&1,R>>>=1,fe<<=1;while(--H>0);return fe>>>1}function Ae(R){R.bi_valid===16?(ke(R,R.bi_buf),R.bi_buf=0,R.bi_valid=0):R.bi_valid>=8&&(R.pending_buf[R.pending++]=R.bi_buf&255,R.bi_buf>>=8,R.bi_valid-=8)}function He(R,H){var fe=H.dyn_tree,Ie=H.max_code,be=H.stat_desc.static_tree,Ee=H.stat_desc.has_stree,le=H.stat_desc.extra_bits,ct=H.stat_desc.extra_base,yt=H.stat_desc.max_length,P,Be,et,pe,De,Ke,Ct=0;for(pe=0;pe<=x;pe++)R.bl_count[pe]=0;for(fe[R.heap[R.heap_max]*2+1]=0,P=R.heap_max+1;P<_;P++)Be=R.heap[P],pe=fe[fe[Be*2+1]*2+1]+1,pe>yt&&(pe=yt,Ct++),fe[Be*2+1]=pe,!(Be>Ie)&&(R.bl_count[pe]++,De=0,Be>=ct&&(De=le[Be-ct]),Ke=fe[Be*2],R.opt_len+=Ke*(pe+De),Ee&&(R.static_len+=Ke*(be[Be*2+1]+De)));if(Ct!==0){do{for(pe=yt-1;R.bl_count[pe]===0;)pe--;R.bl_count[pe]--,R.bl_count[pe+1]+=2,R.bl_count[yt]--,Ct-=2}while(Ct>0);for(pe=yt;pe!==0;pe--)for(Be=R.bl_count[pe];Be!==0;)et=R.heap[--P],!(et>Ie)&&(fe[et*2+1]!==pe&&(R.opt_len+=(pe-fe[et*2+1])*fe[et*2],fe[et*2+1]=pe),Be--)}}function st(R,H,fe){var Ie=new Array(x+1),be=0,Ee,le;for(Ee=1;Ee<=x;Ee++)Ie[Ee]=be=be+fe[Ee-1]<<1;for(le=0;le<=H;le++){var ct=R[le*2+1];ct!==0&&(R[le*2]=Re(Ie[ct]++,ct))}}function Oe(){var R,H,fe,Ie,be,Ee=new Array(x+1);for(fe=0,Ie=0;Ie<h-1;Ie++)for(ne[Ie]=fe,R=0;R<1<<D[Ie];R++)se[fe++]=Ie;for(se[fe-1]=Ie,be=0,Ie=0;Ie<16;Ie++)for(ee[Ie]=be,R=0;R<1<<B[Ie];R++)me[be++]=Ie;for(be>>=7;Ie<w;Ie++)for(ee[Ie]=be<<7,R=0;R<1<<B[Ie]-7;R++)me[256+be++]=Ie;for(H=0;H<=x;H++)Ee[H]=0;for(R=0;R<=143;)K[R*2+1]=8,R++,Ee[8]++;for(;R<=255;)K[R*2+1]=9,R++,Ee[9]++;for(;R<=279;)K[R*2+1]=7,R++,Ee[7]++;for(;R<=287;)K[R*2+1]=8,R++,Ee[8]++;for(st(K,g+1,Ee),R=0;R<w;R++)U[R*2+1]=5,U[R*2]=Re(R,5);G=new ae(K,D,m+1,g,x),Y=new ae(U,B,0,w,x),J=new ae(new Array(0),W,0,v,E)}function Te(R){var H;for(H=0;H<g;H++)R.dyn_ltree[H*2]=0;for(H=0;H<w;H++)R.dyn_dtree[H*2]=0;for(H=0;H<v;H++)R.bl_tree[H*2]=0;R.dyn_ltree[C*2]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function z(R){R.bi_valid>8?ke(R,R.bi_buf):R.bi_valid>0&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function Ce(R,H,fe,Ie){z(R),ke(R,fe),ke(R,~fe),e.arraySet(R.pending_buf,R.window,H,fe,R.pending),R.pending+=fe}function Ne(R,H,fe,Ie){var be=H*2,Ee=fe*2;return R[be]<R[Ee]||R[be]===R[Ee]&&Ie[H]<=Ie[fe]}function ce(R,H,fe){for(var Ie=R.heap[fe],be=fe<<1;be<=R.heap_len&&(be<R.heap_len&&Ne(H,R.heap[be+1],R.heap[be],R.depth)&&be++,!Ne(H,Ie,R.heap[be],R.depth));)R.heap[fe]=R.heap[be],fe=be,be<<=1;R.heap[fe]=Ie}function ie(R,H,fe){var Ie,be,Ee=0,le,ct;if(R.last_lit!==0)do Ie=R.pending_buf[R.d_buf+Ee*2]<<8|R.pending_buf[R.d_buf+Ee*2+1],be=R.pending_buf[R.l_buf+Ee],Ee++,Ie===0?Pe(R,be,H):(le=se[be],Pe(R,le+m+1,H),ct=D[le],ct!==0&&(be-=ne[le],Me(R,be,ct)),Ie--,le=we(Ie),Pe(R,le,fe),ct=B[le],ct!==0&&(Ie-=ee[le],Me(R,Ie,ct)));while(Ee<R.last_lit);Pe(R,C,H)}function X(R,H){var fe=H.dyn_tree,Ie=H.stat_desc.static_tree,be=H.stat_desc.has_stree,Ee=H.stat_desc.elems,le,ct,yt=-1,P;for(R.heap_len=0,R.heap_max=_,le=0;le<Ee;le++)fe[le*2]!==0?(R.heap[++R.heap_len]=yt=le,R.depth[le]=0):fe[le*2+1]=0;for(;R.heap_len<2;)P=R.heap[++R.heap_len]=yt<2?++yt:0,fe[P*2]=1,R.depth[P]=0,R.opt_len--,be&&(R.static_len-=Ie[P*2+1]);for(H.max_code=yt,le=R.heap_len>>1;le>=1;le--)ce(R,fe,le);P=Ee;do le=R.heap[1],R.heap[1]=R.heap[R.heap_len--],ce(R,fe,1),ct=R.heap[1],R.heap[--R.heap_max]=le,R.heap[--R.heap_max]=ct,fe[P*2]=fe[le*2]+fe[ct*2],R.depth[P]=(R.depth[le]>=R.depth[ct]?R.depth[le]:R.depth[ct])+1,fe[le*2+1]=fe[ct*2+1]=P,R.heap[1]=P++,ce(R,fe,1);while(R.heap_len>=2);R.heap[--R.heap_max]=R.heap[1],He(R,H),st(fe,yt,R.bl_count)}function _e(R,H,fe){var Ie,be=-1,Ee,le=H[0*2+1],ct=0,yt=7,P=4;for(le===0&&(yt=138,P=3),H[(fe+1)*2+1]=65535,Ie=0;Ie<=fe;Ie++)Ee=le,le=H[(Ie+1)*2+1],!(++ct<yt&&Ee===le)&&(ct<P?R.bl_tree[Ee*2]+=ct:Ee!==0?(Ee!==be&&R.bl_tree[Ee*2]++,R.bl_tree[A*2]++):ct<=10?R.bl_tree[O*2]++:R.bl_tree[I*2]++,ct=0,be=Ee,le===0?(yt=138,P=3):Ee===le?(yt=6,P=3):(yt=7,P=4))}function Le(R,H,fe){var Ie,be=-1,Ee,le=H[0*2+1],ct=0,yt=7,P=4;for(le===0&&(yt=138,P=3),Ie=0;Ie<=fe;Ie++)if(Ee=le,le=H[(Ie+1)*2+1],!(++ct<yt&&Ee===le)){if(ct<P)do Pe(R,Ee,R.bl_tree);while(--ct!==0);else Ee!==0?(Ee!==be&&(Pe(R,Ee,R.bl_tree),ct--),Pe(R,A,R.bl_tree),Me(R,ct-3,2)):ct<=10?(Pe(R,O,R.bl_tree),Me(R,ct-3,3)):(Pe(R,I,R.bl_tree),Me(R,ct-11,7));ct=0,be=Ee,le===0?(yt=138,P=3):Ee===le?(yt=6,P=3):(yt=7,P=4)}}function xe(R){var H;for(_e(R,R.dyn_ltree,R.l_desc.max_code),_e(R,R.dyn_dtree,R.d_desc.max_code),X(R,R.bl_desc),H=v-1;H>=3&&R.bl_tree[Q[H]*2+1]===0;H--);return R.opt_len+=3*(H+1)+5+5+4,H}function Ve(R,H,fe,Ie){var be;for(Me(R,H-257,5),Me(R,fe-1,5),Me(R,Ie-4,4),be=0;be<Ie;be++)Me(R,R.bl_tree[Q[be]*2+1],3);Le(R,R.dyn_ltree,H-1),Le(R,R.dyn_dtree,fe-1)}function xt(R){var H=4093624447,fe;for(fe=0;fe<=31;fe++,H>>>=1)if(H&1&&R.dyn_ltree[fe*2]!==0)return n;if(R.dyn_ltree[9*2]!==0||R.dyn_ltree[10*2]!==0||R.dyn_ltree[13*2]!==0)return r;for(fe=32;fe<m;fe++)if(R.dyn_ltree[fe*2]!==0)return r;return n}var ft=!1;function Et(R){ft||(Oe(),ft=!0),R.l_desc=new re(R.dyn_ltree,G),R.d_desc=new re(R.dyn_dtree,Y),R.bl_desc=new re(R.bl_tree,J),R.bi_buf=0,R.bi_valid=0,Te(R)}function Lt(R,H,fe,Ie){Me(R,(o<<1)+(Ie?1:0),3),Ce(R,H,fe)}function Tt(R){Me(R,s<<1,3),Pe(R,C,K),Ae(R)}function zt(R,H,fe,Ie){var be,Ee,le=0;R.level>0?(R.strm.data_type===a&&(R.strm.data_type=xt(R)),X(R,R.l_desc),X(R,R.d_desc),le=xe(R),be=R.opt_len+3+7>>>3,Ee=R.static_len+3+7>>>3,Ee<=be&&(be=Ee)):be=Ee=fe+5,fe+4<=be&&H!==-1?Lt(R,H,fe,Ie):R.strategy===t||Ee===be?(Me(R,(s<<1)+(Ie?1:0),3),ie(R,K,U)):(Me(R,(u<<1)+(Ie?1:0),3),Ve(R,R.l_desc.max_code+1,R.d_desc.max_code+1,le+1),ie(R,R.dyn_ltree,R.dyn_dtree)),Te(R),Ie&&z(R)}function ge(R,H,fe){return R.pending_buf[R.d_buf+R.last_lit*2]=H>>>8&255,R.pending_buf[R.d_buf+R.last_lit*2+1]=H&255,R.pending_buf[R.l_buf+R.last_lit]=fe&255,R.last_lit++,H===0?R.dyn_ltree[fe*2]++:(R.matches++,H--,R.dyn_ltree[(se[fe]+m+1)*2]++,R.dyn_dtree[we(H)*2]++),R.last_lit===R.lit_bufsize-1}return Vc._tr_init=Et,Vc._tr_stored_block=Lt,Vc._tr_flush_block=zt,Vc._tr_tally=ge,Vc._tr_align=Tt,Vc}var hS,_I;function Kj(){if(_I)return hS;_I=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return hS=e,hS}var pS,xI;function Zj(){if(xI)return pS;xI=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,u=o+i;r^=-1;for(var c=o;c<u;c++)r=r>>>8^s[(r^a[c])&255];return r^-1}return pS=n,pS}var mS,SI;function lk(){return SI||(SI=1,mS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),mS}var EI;function YJ(){if(EI)return No;EI=1;var e=gc(),t=ZJ(),n=Kj(),r=Zj(),a=lk(),i=0,o=1,s=3,u=4,c=5,f=0,h=1,m=-2,g=-3,w=-5,v=-1,_=1,x=2,S=3,E=4,C=0,A=2,O=8,I=9,D=15,B=8,W=29,Q=256,M=Q+1+W,K=30,U=19,me=2*M+1,se=15,ne=3,ee=258,ae=ee+ne+1,G=32,Y=42,J=69,re=73,we=91,ke=103,Me=113,Pe=666,Re=1,Ae=2,He=3,st=4,Oe=3;function Te(P,Be){return P.msg=a[Be],Be}function z(P){return(P<<1)-(P>4?9:0)}function Ce(P){for(var Be=P.length;--Be>=0;)P[Be]=0}function Ne(P){var Be=P.state,et=Be.pending;et>P.avail_out&&(et=P.avail_out),et!==0&&(e.arraySet(P.output,Be.pending_buf,Be.pending_out,et,P.next_out),P.next_out+=et,Be.pending_out+=et,P.total_out+=et,P.avail_out-=et,Be.pending-=et,Be.pending===0&&(Be.pending_out=0))}function ce(P,Be){t._tr_flush_block(P,P.block_start>=0?P.block_start:-1,P.strstart-P.block_start,Be),P.block_start=P.strstart,Ne(P.strm)}function ie(P,Be){P.pending_buf[P.pending++]=Be}function X(P,Be){P.pending_buf[P.pending++]=Be>>>8&255,P.pending_buf[P.pending++]=Be&255}function _e(P,Be,et,pe){var De=P.avail_in;return De>pe&&(De=pe),De===0?0:(P.avail_in-=De,e.arraySet(Be,P.input,P.next_in,De,et),P.state.wrap===1?P.adler=n(P.adler,Be,De,et):P.state.wrap===2&&(P.adler=r(P.adler,Be,De,et)),P.next_in+=De,P.total_in+=De,De)}function Le(P,Be){var et=P.max_chain_length,pe=P.strstart,De,Ke,Ct=P.prev_length,ye=P.nice_match,q=P.strstart>P.w_size-ae?P.strstart-(P.w_size-ae):0,L=P.window,V=P.w_mask,he=P.prev,de=P.strstart+ee,Fe=L[pe+Ct-1],it=L[pe+Ct];P.prev_length>=P.good_match&&(et>>=2),ye>P.lookahead&&(ye=P.lookahead);do if(De=Be,!(L[De+Ct]!==it||L[De+Ct-1]!==Fe||L[De]!==L[pe]||L[++De]!==L[pe+1])){pe+=2,De++;do;while(L[++pe]===L[++De]&&L[++pe]===L[++De]&&L[++pe]===L[++De]&&L[++pe]===L[++De]&&L[++pe]===L[++De]&&L[++pe]===L[++De]&&L[++pe]===L[++De]&&L[++pe]===L[++De]&&pe<de);if(Ke=ee-(de-pe),pe=de-ee,Ke>Ct){if(P.match_start=Be,Ct=Ke,Ke>=ye)break;Fe=L[pe+Ct-1],it=L[pe+Ct]}}while((Be=he[Be&V])>q&&--et!==0);return Ct<=P.lookahead?Ct:P.lookahead}function xe(P){var Be=P.w_size,et,pe,De,Ke,Ct;do{if(Ke=P.window_size-P.lookahead-P.strstart,P.strstart>=Be+(Be-ae)){e.arraySet(P.window,P.window,Be,Be,0),P.match_start-=Be,P.strstart-=Be,P.block_start-=Be,pe=P.hash_size,et=pe;do De=P.head[--et],P.head[et]=De>=Be?De-Be:0;while(--pe);pe=Be,et=pe;do De=P.prev[--et],P.prev[et]=De>=Be?De-Be:0;while(--pe);Ke+=Be}if(P.strm.avail_in===0)break;if(pe=_e(P.strm,P.window,P.strstart+P.lookahead,Ke),P.lookahead+=pe,P.lookahead+P.insert>=ne)for(Ct=P.strstart-P.insert,P.ins_h=P.window[Ct],P.ins_h=(P.ins_h<<P.hash_shift^P.window[Ct+1])&P.hash_mask;P.insert&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[Ct+ne-1])&P.hash_mask,P.prev[Ct&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=Ct,Ct++,P.insert--,!(P.lookahead+P.insert<ne)););}while(P.lookahead<ae&&P.strm.avail_in!==0)}function Ve(P,Be){var et=65535;for(et>P.pending_buf_size-5&&(et=P.pending_buf_size-5);;){if(P.lookahead<=1){if(xe(P),P.lookahead===0&&Be===i)return Re;if(P.lookahead===0)break}P.strstart+=P.lookahead,P.lookahead=0;var pe=P.block_start+et;if((P.strstart===0||P.strstart>=pe)&&(P.lookahead=P.strstart-pe,P.strstart=pe,ce(P,!1),P.strm.avail_out===0)||P.strstart-P.block_start>=P.w_size-ae&&(ce(P,!1),P.strm.avail_out===0))return Re}return P.insert=0,Be===u?(ce(P,!0),P.strm.avail_out===0?He:st):(P.strstart>P.block_start&&(ce(P,!1),P.strm.avail_out===0),Re)}function xt(P,Be){for(var et,pe;;){if(P.lookahead<ae){if(xe(P),P.lookahead<ae&&Be===i)return Re;if(P.lookahead===0)break}if(et=0,P.lookahead>=ne&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,et=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),et!==0&&P.strstart-et<=P.w_size-ae&&(P.match_length=Le(P,et)),P.match_length>=ne)if(pe=t._tr_tally(P,P.strstart-P.match_start,P.match_length-ne),P.lookahead-=P.match_length,P.match_length<=P.max_lazy_match&&P.lookahead>=ne){P.match_length--;do P.strstart++,P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,et=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart;while(--P.match_length!==0);P.strstart++}else P.strstart+=P.match_length,P.match_length=0,P.ins_h=P.window[P.strstart],P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+1])&P.hash_mask;else pe=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++;if(pe&&(ce(P,!1),P.strm.avail_out===0))return Re}return P.insert=P.strstart<ne-1?P.strstart:ne-1,Be===u?(ce(P,!0),P.strm.avail_out===0?He:st):P.last_lit&&(ce(P,!1),P.strm.avail_out===0)?Re:Ae}function ft(P,Be){for(var et,pe,De;;){if(P.lookahead<ae){if(xe(P),P.lookahead<ae&&Be===i)return Re;if(P.lookahead===0)break}if(et=0,P.lookahead>=ne&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,et=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart),P.prev_length=P.match_length,P.prev_match=P.match_start,P.match_length=ne-1,et!==0&&P.prev_length<P.max_lazy_match&&P.strstart-et<=P.w_size-ae&&(P.match_length=Le(P,et),P.match_length<=5&&(P.strategy===_||P.match_length===ne&&P.strstart-P.match_start>4096)&&(P.match_length=ne-1)),P.prev_length>=ne&&P.match_length<=P.prev_length){De=P.strstart+P.lookahead-ne,pe=t._tr_tally(P,P.strstart-1-P.prev_match,P.prev_length-ne),P.lookahead-=P.prev_length-1,P.prev_length-=2;do++P.strstart<=De&&(P.ins_h=(P.ins_h<<P.hash_shift^P.window[P.strstart+ne-1])&P.hash_mask,et=P.prev[P.strstart&P.w_mask]=P.head[P.ins_h],P.head[P.ins_h]=P.strstart);while(--P.prev_length!==0);if(P.match_available=0,P.match_length=ne-1,P.strstart++,pe&&(ce(P,!1),P.strm.avail_out===0))return Re}else if(P.match_available){if(pe=t._tr_tally(P,0,P.window[P.strstart-1]),pe&&ce(P,!1),P.strstart++,P.lookahead--,P.strm.avail_out===0)return Re}else P.match_available=1,P.strstart++,P.lookahead--}return P.match_available&&(pe=t._tr_tally(P,0,P.window[P.strstart-1]),P.match_available=0),P.insert=P.strstart<ne-1?P.strstart:ne-1,Be===u?(ce(P,!0),P.strm.avail_out===0?He:st):P.last_lit&&(ce(P,!1),P.strm.avail_out===0)?Re:Ae}function Et(P,Be){for(var et,pe,De,Ke,Ct=P.window;;){if(P.lookahead<=ee){if(xe(P),P.lookahead<=ee&&Be===i)return Re;if(P.lookahead===0)break}if(P.match_length=0,P.lookahead>=ne&&P.strstart>0&&(De=P.strstart-1,pe=Ct[De],pe===Ct[++De]&&pe===Ct[++De]&&pe===Ct[++De])){Ke=P.strstart+ee;do;while(pe===Ct[++De]&&pe===Ct[++De]&&pe===Ct[++De]&&pe===Ct[++De]&&pe===Ct[++De]&&pe===Ct[++De]&&pe===Ct[++De]&&pe===Ct[++De]&&De<Ke);P.match_length=ee-(Ke-De),P.match_length>P.lookahead&&(P.match_length=P.lookahead)}if(P.match_length>=ne?(et=t._tr_tally(P,1,P.match_length-ne),P.lookahead-=P.match_length,P.strstart+=P.match_length,P.match_length=0):(et=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++),et&&(ce(P,!1),P.strm.avail_out===0))return Re}return P.insert=0,Be===u?(ce(P,!0),P.strm.avail_out===0?He:st):P.last_lit&&(ce(P,!1),P.strm.avail_out===0)?Re:Ae}function Lt(P,Be){for(var et;;){if(P.lookahead===0&&(xe(P),P.lookahead===0)){if(Be===i)return Re;break}if(P.match_length=0,et=t._tr_tally(P,0,P.window[P.strstart]),P.lookahead--,P.strstart++,et&&(ce(P,!1),P.strm.avail_out===0))return Re}return P.insert=0,Be===u?(ce(P,!0),P.strm.avail_out===0?He:st):P.last_lit&&(ce(P,!1),P.strm.avail_out===0)?Re:Ae}function Tt(P,Be,et,pe,De){this.good_length=P,this.max_lazy=Be,this.nice_length=et,this.max_chain=pe,this.func=De}var zt;zt=[new Tt(0,0,0,0,Ve),new Tt(4,4,8,4,xt),new Tt(4,5,16,8,xt),new Tt(4,6,32,32,xt),new Tt(4,4,16,16,ft),new Tt(8,16,32,32,ft),new Tt(8,16,128,128,ft),new Tt(8,32,128,256,ft),new Tt(32,128,258,1024,ft),new Tt(32,258,258,4096,ft)];function ge(P){P.window_size=2*P.w_size,Ce(P.head),P.max_lazy_match=zt[P.level].max_lazy,P.good_match=zt[P.level].good_length,P.nice_match=zt[P.level].nice_length,P.max_chain_length=zt[P.level].max_chain,P.strstart=0,P.block_start=0,P.lookahead=0,P.insert=0,P.match_length=P.prev_length=ne-1,P.match_available=0,P.ins_h=0}function R(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(me*2),this.dyn_dtree=new e.Buf16((2*K+1)*2),this.bl_tree=new e.Buf16((2*U+1)*2),Ce(this.dyn_ltree),Ce(this.dyn_dtree),Ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(se+1),this.heap=new e.Buf16(2*M+1),Ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*M+1),Ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(P){var Be;return!P||!P.state?Te(P,m):(P.total_in=P.total_out=0,P.data_type=A,Be=P.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?Y:Me,P.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),f)}function fe(P){var Be=H(P);return Be===f&&ge(P.state),Be}function Ie(P,Be){return!P||!P.state||P.state.wrap!==2?m:(P.state.gzhead=Be,f)}function be(P,Be,et,pe,De,Ke){if(!P)return m;var Ct=1;if(Be===v&&(Be=6),pe<0?(Ct=0,pe=-pe):pe>15&&(Ct=2,pe-=16),De<1||De>I||et!==O||pe<8||pe>15||Be<0||Be>9||Ke<0||Ke>E)return Te(P,m);pe===8&&(pe=9);var ye=new R;return P.state=ye,ye.strm=P,ye.wrap=Ct,ye.gzhead=null,ye.w_bits=pe,ye.w_size=1<<ye.w_bits,ye.w_mask=ye.w_size-1,ye.hash_bits=De+7,ye.hash_size=1<<ye.hash_bits,ye.hash_mask=ye.hash_size-1,ye.hash_shift=~~((ye.hash_bits+ne-1)/ne),ye.window=new e.Buf8(ye.w_size*2),ye.head=new e.Buf16(ye.hash_size),ye.prev=new e.Buf16(ye.w_size),ye.lit_bufsize=1<<De+6,ye.pending_buf_size=ye.lit_bufsize*4,ye.pending_buf=new e.Buf8(ye.pending_buf_size),ye.d_buf=1*ye.lit_bufsize,ye.l_buf=3*ye.lit_bufsize,ye.level=Be,ye.strategy=Ke,ye.method=et,fe(P)}function Ee(P,Be){return be(P,Be,O,D,B,C)}function le(P,Be){var et,pe,De,Ke;if(!P||!P.state||Be>c||Be<0)return P?Te(P,m):m;if(pe=P.state,!P.output||!P.input&&P.avail_in!==0||pe.status===Pe&&Be!==u)return Te(P,P.avail_out===0?w:m);if(pe.strm=P,et=pe.last_flush,pe.last_flush=Be,pe.status===Y)if(pe.wrap===2)P.adler=0,ie(pe,31),ie(pe,139),ie(pe,8),pe.gzhead?(ie(pe,(pe.gzhead.text?1:0)+(pe.gzhead.hcrc?2:0)+(pe.gzhead.extra?4:0)+(pe.gzhead.name?8:0)+(pe.gzhead.comment?16:0)),ie(pe,pe.gzhead.time&255),ie(pe,pe.gzhead.time>>8&255),ie(pe,pe.gzhead.time>>16&255),ie(pe,pe.gzhead.time>>24&255),ie(pe,pe.level===9?2:pe.strategy>=x||pe.level<2?4:0),ie(pe,pe.gzhead.os&255),pe.gzhead.extra&&pe.gzhead.extra.length&&(ie(pe,pe.gzhead.extra.length&255),ie(pe,pe.gzhead.extra.length>>8&255)),pe.gzhead.hcrc&&(P.adler=r(P.adler,pe.pending_buf,pe.pending,0)),pe.gzindex=0,pe.status=J):(ie(pe,0),ie(pe,0),ie(pe,0),ie(pe,0),ie(pe,0),ie(pe,pe.level===9?2:pe.strategy>=x||pe.level<2?4:0),ie(pe,Oe),pe.status=Me);else{var Ct=O+(pe.w_bits-8<<4)<<8,ye=-1;pe.strategy>=x||pe.level<2?ye=0:pe.level<6?ye=1:pe.level===6?ye=2:ye=3,Ct|=ye<<6,pe.strstart!==0&&(Ct|=G),Ct+=31-Ct%31,pe.status=Me,X(pe,Ct),pe.strstart!==0&&(X(pe,P.adler>>>16),X(pe,P.adler&65535)),P.adler=1}if(pe.status===J)if(pe.gzhead.extra){for(De=pe.pending;pe.gzindex<(pe.gzhead.extra.length&65535)&&!(pe.pending===pe.pending_buf_size&&(pe.gzhead.hcrc&&pe.pending>De&&(P.adler=r(P.adler,pe.pending_buf,pe.pending-De,De)),Ne(P),De=pe.pending,pe.pending===pe.pending_buf_size));)ie(pe,pe.gzhead.extra[pe.gzindex]&255),pe.gzindex++;pe.gzhead.hcrc&&pe.pending>De&&(P.adler=r(P.adler,pe.pending_buf,pe.pending-De,De)),pe.gzindex===pe.gzhead.extra.length&&(pe.gzindex=0,pe.status=re)}else pe.status=re;if(pe.status===re)if(pe.gzhead.name){De=pe.pending;do{if(pe.pending===pe.pending_buf_size&&(pe.gzhead.hcrc&&pe.pending>De&&(P.adler=r(P.adler,pe.pending_buf,pe.pending-De,De)),Ne(P),De=pe.pending,pe.pending===pe.pending_buf_size)){Ke=1;break}pe.gzindex<pe.gzhead.name.length?Ke=pe.gzhead.name.charCodeAt(pe.gzindex++)&255:Ke=0,ie(pe,Ke)}while(Ke!==0);pe.gzhead.hcrc&&pe.pending>De&&(P.adler=r(P.adler,pe.pending_buf,pe.pending-De,De)),Ke===0&&(pe.gzindex=0,pe.status=we)}else pe.status=we;if(pe.status===we)if(pe.gzhead.comment){De=pe.pending;do{if(pe.pending===pe.pending_buf_size&&(pe.gzhead.hcrc&&pe.pending>De&&(P.adler=r(P.adler,pe.pending_buf,pe.pending-De,De)),Ne(P),De=pe.pending,pe.pending===pe.pending_buf_size)){Ke=1;break}pe.gzindex<pe.gzhead.comment.length?Ke=pe.gzhead.comment.charCodeAt(pe.gzindex++)&255:Ke=0,ie(pe,Ke)}while(Ke!==0);pe.gzhead.hcrc&&pe.pending>De&&(P.adler=r(P.adler,pe.pending_buf,pe.pending-De,De)),Ke===0&&(pe.status=ke)}else pe.status=ke;if(pe.status===ke&&(pe.gzhead.hcrc?(pe.pending+2>pe.pending_buf_size&&Ne(P),pe.pending+2<=pe.pending_buf_size&&(ie(pe,P.adler&255),ie(pe,P.adler>>8&255),P.adler=0,pe.status=Me)):pe.status=Me),pe.pending!==0){if(Ne(P),P.avail_out===0)return pe.last_flush=-1,f}else if(P.avail_in===0&&z(Be)<=z(et)&&Be!==u)return Te(P,w);if(pe.status===Pe&&P.avail_in!==0)return Te(P,w);if(P.avail_in!==0||pe.lookahead!==0||Be!==i&&pe.status!==Pe){var q=pe.strategy===x?Lt(pe,Be):pe.strategy===S?Et(pe,Be):zt[pe.level].func(pe,Be);if((q===He||q===st)&&(pe.status=Pe),q===Re||q===He)return P.avail_out===0&&(pe.last_flush=-1),f;if(q===Ae&&(Be===o?t._tr_align(pe):Be!==c&&(t._tr_stored_block(pe,0,0,!1),Be===s&&(Ce(pe.head),pe.lookahead===0&&(pe.strstart=0,pe.block_start=0,pe.insert=0))),Ne(P),P.avail_out===0))return pe.last_flush=-1,f}return Be!==u?f:pe.wrap<=0?h:(pe.wrap===2?(ie(pe,P.adler&255),ie(pe,P.adler>>8&255),ie(pe,P.adler>>16&255),ie(pe,P.adler>>24&255),ie(pe,P.total_in&255),ie(pe,P.total_in>>8&255),ie(pe,P.total_in>>16&255),ie(pe,P.total_in>>24&255)):(X(pe,P.adler>>>16),X(pe,P.adler&65535)),Ne(P),pe.wrap>0&&(pe.wrap=-pe.wrap),pe.pending!==0?f:h)}function ct(P){var Be;return!P||!P.state?m:(Be=P.state.status,Be!==Y&&Be!==J&&Be!==re&&Be!==we&&Be!==ke&&Be!==Me&&Be!==Pe?Te(P,m):(P.state=null,Be===Me?Te(P,g):f))}function yt(P,Be){var et=Be.length,pe,De,Ke,Ct,ye,q,L,V;if(!P||!P.state||(pe=P.state,Ct=pe.wrap,Ct===2||Ct===1&&pe.status!==Y||pe.lookahead))return m;for(Ct===1&&(P.adler=n(P.adler,Be,et,0)),pe.wrap=0,et>=pe.w_size&&(Ct===0&&(Ce(pe.head),pe.strstart=0,pe.block_start=0,pe.insert=0),V=new e.Buf8(pe.w_size),e.arraySet(V,Be,et-pe.w_size,pe.w_size,0),Be=V,et=pe.w_size),ye=P.avail_in,q=P.next_in,L=P.input,P.avail_in=et,P.next_in=0,P.input=Be,xe(pe);pe.lookahead>=ne;){De=pe.strstart,Ke=pe.lookahead-(ne-1);do pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[De+ne-1])&pe.hash_mask,pe.prev[De&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=De,De++;while(--Ke);pe.strstart=De,pe.lookahead=ne-1,xe(pe)}return pe.strstart+=pe.lookahead,pe.block_start=pe.strstart,pe.insert=pe.lookahead,pe.lookahead=0,pe.match_length=pe.prev_length=ne-1,pe.match_available=0,P.next_in=q,P.input=L,P.avail_in=ye,pe.wrap=Ct,f}return No.deflateInit=Ee,No.deflateInit2=be,No.deflateReset=fe,No.deflateResetKeep=H,No.deflateSetHeader=Ie,No.deflate=le,No.deflateEnd=ct,No.deflateSetDictionary=yt,No.deflateInfo="pako deflate (from Nodeca project)",No}var Gc={},CI;function Yj(){if(CI)return Gc;CI=1;var e=gc(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,Gc.string2buf=function(o){var s,u,c,f,h,m=o.length,g=0;for(f=0;f<m;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(s=new e.Buf8(g),h=0,f=0;h<g;f++)u=o.charCodeAt(f),(u&64512)===55296&&f+1<m&&(c=o.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?s[h++]=u:u<2048?(s[h++]=192|u>>>6,s[h++]=128|u&63):u<65536?(s[h++]=224|u>>>12,s[h++]=128|u>>>6&63,s[h++]=128|u&63):(s[h++]=240|u>>>18,s[h++]=128|u>>>12&63,s[h++]=128|u>>>6&63,s[h++]=128|u&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var u="",c=0;c<s;c++)u+=String.fromCharCode(o[c]);return u}return Gc.buf2binstring=function(o){return i(o,o.length)},Gc.binstring2buf=function(o){for(var s=new e.Buf8(o.length),u=0,c=s.length;u<c;u++)s[u]=o.charCodeAt(u);return s},Gc.buf2string=function(o,s){var u,c,f,h,m=s||o.length,g=new Array(m*2);for(c=0,u=0;u<m;){if(f=o[u++],f<128){g[c++]=f;continue}if(h=r[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<m;)f=f<<6|o[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return i(g,c)},Gc.utf8border=function(o,s){var u;for(s=s||o.length,s>o.length&&(s=o.length),u=s-1;u>=0&&(o[u]&192)===128;)u--;return u<0||u===0?s:u+r[o[u]]>s?u:s},Gc}var gS,kI;function Xj(){if(kI)return gS;kI=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return gS=e,gS}var AI;function XJ(){if(AI)return Ef;AI=1;var e=YJ(),t=gc(),n=Yj(),r=lk(),a=Xj(),i=Object.prototype.toString,o=0,s=4,u=0,c=1,f=2,h=-1,m=0,g=8;function w(S){if(!(this instanceof w))return new w(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==u)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var A;if(typeof E.dictionary=="string"?A=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?A=new Uint8Array(E.dictionary):A=E.dictionary,C=e.deflateSetDictionary(this.strm,A),C!==u)throw new Error(r[C]);this._dict_set=!0}}w.prototype.push=function(S,E){var C=this.strm,A=this.options.chunkSize,O,I;if(this.ended)return!1;I=E===~~E?E:E===!0?s:o,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(A),C.next_out=0,C.avail_out=A),O=e.deflate(C,I),O!==c&&O!==u)return this.onEnd(O),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(I===s||I===f))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&O!==c);return I===s?(O=e.deflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===u):(I===f&&(this.onEnd(u),C.avail_out=0),!0)},w.prototype.onData=function(S){this.chunks.push(S)},w.prototype.onEnd=function(S){S===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function v(S,E){var C=new w(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function _(S,E){return E=E||{},E.raw=!0,v(S,E)}function x(S,E){return E=E||{},E.gzip=!0,v(S,E)}return Ef.Deflate=w,Ef.deflate=v,Ef.deflateRaw=_,Ef.gzip=x,Ef}var Cf={},lo={},yS,TI;function JJ(){if(TI)return yS;TI=1;var e=30,t=12;return yS=function(r,a){var i,o,s,u,c,f,h,m,g,w,v,_,x,S,E,C,A,O,I,D,B,W,Q,M,K;i=r.state,o=r.next_in,M=r.input,s=o+(r.avail_in-5),u=r.next_out,K=r.output,c=u-(a-r.avail_out),f=u+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,w=i.wnext,v=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,A=(1<<i.distbits)-1;e:do{x<15&&(_+=M[o++]<<x,x+=8,_+=M[o++]<<x,x+=8),O=S[_&C];t:for(;;){if(I=O>>>24,_>>>=I,x-=I,I=O>>>16&255,I===0)K[u++]=O&65535;else if(I&16){D=O&65535,I&=15,I&&(x<I&&(_+=M[o++]<<x,x+=8),D+=_&(1<<I)-1,_>>>=I,x-=I),x<15&&(_+=M[o++]<<x,x+=8,_+=M[o++]<<x,x+=8),O=E[_&A];n:for(;;){if(I=O>>>24,_>>>=I,x-=I,I=O>>>16&255,I&16){if(B=O&65535,I&=15,x<I&&(_+=M[o++]<<x,x+=8,x<I&&(_+=M[o++]<<x,x+=8)),B+=_&(1<<I)-1,B>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=I,x-=I,I=u-c,B>I){if(I=B-I,I>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(W=0,Q=v,w===0){if(W+=m-I,I<D){D-=I;do K[u++]=v[W++];while(--I);W=u-B,Q=K}}else if(w<I){if(W+=m+w-I,I-=w,I<D){D-=I;do K[u++]=v[W++];while(--I);if(W=0,w<D){I=w,D-=I;do K[u++]=v[W++];while(--I);W=u-B,Q=K}}}else if(W+=w-I,I<D){D-=I;do K[u++]=v[W++];while(--I);W=u-B,Q=K}for(;D>2;)K[u++]=Q[W++],K[u++]=Q[W++],K[u++]=Q[W++],D-=3;D&&(K[u++]=Q[W++],D>1&&(K[u++]=Q[W++]))}else{W=u-B;do K[u++]=K[W++],K[u++]=K[W++],K[u++]=K[W++],D-=3;while(D>2);D&&(K[u++]=K[W++],D>1&&(K[u++]=K[W++]))}}else if((I&64)===0){O=E[(O&65535)+(_&(1<<I)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((I&64)===0){O=S[(O&65535)+(_&(1<<I)-1)];continue t}else if(I&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&u<f);D=x>>3,o-=D,x-=D<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=u,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=u<f?257+(f-u):257-(u-f),i.hold=_,i.bits=x},yS}var bS,RI;function QJ(){if(RI)return bS;RI=1;var e=gc(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return bS=function(m,g,w,v,_,x,S,E){var C=E.bits,A=0,O=0,I=0,D=0,B=0,W=0,Q=0,M=0,K=0,U=0,me,se,ne,ee,ae,G=null,Y=0,J,re=new e.Buf16(t+1),we=new e.Buf16(t+1),ke=null,Me=0,Pe,Re,Ae;for(A=0;A<=t;A++)re[A]=0;for(O=0;O<v;O++)re[g[w+O]]++;for(B=C,D=t;D>=1&&re[D]===0;D--);if(B>D&&(B=D),D===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(I=1;I<D&&re[I]===0;I++);for(B<I&&(B=I),M=1,A=1;A<=t;A++)if(M<<=1,M-=re[A],M<0)return-1;if(M>0&&(m===a||D!==1))return-1;for(we[1]=0,A=1;A<t;A++)we[A+1]=we[A]+re[A];for(O=0;O<v;O++)g[w+O]!==0&&(S[we[g[w+O]]++]=O);if(m===a?(G=ke=S,J=19):m===i?(G=s,Y-=257,ke=u,Me-=257,J=256):(G=c,ke=f,J=-1),U=0,O=0,A=I,ae=x,W=B,Q=0,ne=-1,K=1<<B,ee=K-1,m===i&&K>n||m===o&&K>r)return 1;for(;;){Pe=A-Q,S[O]<J?(Re=0,Ae=S[O]):S[O]>J?(Re=ke[Me+S[O]],Ae=G[Y+S[O]]):(Re=96,Ae=0),me=1<<A-Q,se=1<<W,I=se;do se-=me,_[ae+(U>>Q)+se]=Pe<<24|Re<<16|Ae|0;while(se!==0);for(me=1<<A-1;U&me;)me>>=1;if(me!==0?(U&=me-1,U+=me):U=0,O++,--re[A]===0){if(A===D)break;A=g[w+S[O]]}if(A>B&&(U&ee)!==ne){for(Q===0&&(Q=B),ae+=I,W=A-Q,M=1<<W;W+Q<D&&(M-=re[W+Q],!(M<=0));)W++,M<<=1;if(K+=1<<W,m===i&&K>n||m===o&&K>r)return 1;ne=U&ee,_[ne]=B<<24|W<<16|ae-x|0}}return U!==0&&(_[ae+U]=A-Q<<24|64<<16|0),E.bits=B,0},bS}var NI;function eQ(){if(NI)return lo;NI=1;var e=gc(),t=Kj(),n=Zj(),r=JJ(),a=QJ(),i=0,o=1,s=2,u=4,c=5,f=6,h=0,m=1,g=2,w=-2,v=-3,_=-4,x=-5,S=8,E=1,C=2,A=3,O=4,I=5,D=6,B=7,W=8,Q=9,M=10,K=11,U=12,me=13,se=14,ne=15,ee=16,ae=17,G=18,Y=19,J=20,re=21,we=22,ke=23,Me=24,Pe=25,Re=26,Ae=27,He=28,st=29,Oe=30,Te=31,z=32,Ce=852,Ne=592,ce=15,ie=ce;function X(be){return(be>>>24&255)+(be>>>8&65280)+((be&65280)<<8)+((be&255)<<24)}function _e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Le(be){var Ee;return!be||!be.state?w:(Ee=be.state,be.total_in=be.total_out=Ee.total=0,be.msg="",Ee.wrap&&(be.adler=Ee.wrap&1),Ee.mode=E,Ee.last=0,Ee.havedict=0,Ee.dmax=32768,Ee.head=null,Ee.hold=0,Ee.bits=0,Ee.lencode=Ee.lendyn=new e.Buf32(Ce),Ee.distcode=Ee.distdyn=new e.Buf32(Ne),Ee.sane=1,Ee.back=-1,h)}function xe(be){var Ee;return!be||!be.state?w:(Ee=be.state,Ee.wsize=0,Ee.whave=0,Ee.wnext=0,Le(be))}function Ve(be,Ee){var le,ct;return!be||!be.state||(ct=be.state,Ee<0?(le=0,Ee=-Ee):(le=(Ee>>4)+1,Ee<48&&(Ee&=15)),Ee&&(Ee<8||Ee>15))?w:(ct.window!==null&&ct.wbits!==Ee&&(ct.window=null),ct.wrap=le,ct.wbits=Ee,xe(be))}function xt(be,Ee){var le,ct;return be?(ct=new _e,be.state=ct,ct.window=null,le=Ve(be,Ee),le!==h&&(be.state=null),le):w}function ft(be){return xt(be,ie)}var Et=!0,Lt,Tt;function zt(be){if(Et){var Ee;for(Lt=new e.Buf32(512),Tt=new e.Buf32(32),Ee=0;Ee<144;)be.lens[Ee++]=8;for(;Ee<256;)be.lens[Ee++]=9;for(;Ee<280;)be.lens[Ee++]=7;for(;Ee<288;)be.lens[Ee++]=8;for(a(o,be.lens,0,288,Lt,0,be.work,{bits:9}),Ee=0;Ee<32;)be.lens[Ee++]=5;a(s,be.lens,0,32,Tt,0,be.work,{bits:5}),Et=!1}be.lencode=Lt,be.lenbits=9,be.distcode=Tt,be.distbits=5}function ge(be,Ee,le,ct){var yt,P=be.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new e.Buf8(P.wsize)),ct>=P.wsize?(e.arraySet(P.window,Ee,le-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(yt=P.wsize-P.wnext,yt>ct&&(yt=ct),e.arraySet(P.window,Ee,le-ct,yt,P.wnext),ct-=yt,ct?(e.arraySet(P.window,Ee,le-ct,ct,0),P.wnext=ct,P.whave=P.wsize):(P.wnext+=yt,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=yt))),0}function R(be,Ee){var le,ct,yt,P,Be,et,pe,De,Ke,Ct,ye,q,L,V,he=0,de,Fe,it,Dt,un,Bt,Vt,Xt,Tn=new e.Buf8(4),$n,cr,dr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!be||!be.state||!be.output||!be.input&&be.avail_in!==0)return w;le=be.state,le.mode===U&&(le.mode=me),Be=be.next_out,yt=be.output,pe=be.avail_out,P=be.next_in,ct=be.input,et=be.avail_in,De=le.hold,Ke=le.bits,Ct=et,ye=pe,Xt=h;e:for(;;)switch(le.mode){case E:if(le.wrap===0){le.mode=me;break}for(;Ke<16;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if(le.wrap&2&&De===35615){le.check=0,Tn[0]=De&255,Tn[1]=De>>>8&255,le.check=n(le.check,Tn,2,0),De=0,Ke=0,le.mode=C;break}if(le.flags=0,le.head&&(le.head.done=!1),!(le.wrap&1)||(((De&255)<<8)+(De>>8))%31){be.msg="incorrect header check",le.mode=Oe;break}if((De&15)!==S){be.msg="unknown compression method",le.mode=Oe;break}if(De>>>=4,Ke-=4,Vt=(De&15)+8,le.wbits===0)le.wbits=Vt;else if(Vt>le.wbits){be.msg="invalid window size",le.mode=Oe;break}le.dmax=1<<Vt,be.adler=le.check=1,le.mode=De&512?M:U,De=0,Ke=0;break;case C:for(;Ke<16;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if(le.flags=De,(le.flags&255)!==S){be.msg="unknown compression method",le.mode=Oe;break}if(le.flags&57344){be.msg="unknown header flags set",le.mode=Oe;break}le.head&&(le.head.text=De>>8&1),le.flags&512&&(Tn[0]=De&255,Tn[1]=De>>>8&255,le.check=n(le.check,Tn,2,0)),De=0,Ke=0,le.mode=A;case A:for(;Ke<32;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}le.head&&(le.head.time=De),le.flags&512&&(Tn[0]=De&255,Tn[1]=De>>>8&255,Tn[2]=De>>>16&255,Tn[3]=De>>>24&255,le.check=n(le.check,Tn,4,0)),De=0,Ke=0,le.mode=O;case O:for(;Ke<16;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}le.head&&(le.head.xflags=De&255,le.head.os=De>>8),le.flags&512&&(Tn[0]=De&255,Tn[1]=De>>>8&255,le.check=n(le.check,Tn,2,0)),De=0,Ke=0,le.mode=I;case I:if(le.flags&1024){for(;Ke<16;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}le.length=De,le.head&&(le.head.extra_len=De),le.flags&512&&(Tn[0]=De&255,Tn[1]=De>>>8&255,le.check=n(le.check,Tn,2,0)),De=0,Ke=0}else le.head&&(le.head.extra=null);le.mode=D;case D:if(le.flags&1024&&(q=le.length,q>et&&(q=et),q&&(le.head&&(Vt=le.head.extra_len-le.length,le.head.extra||(le.head.extra=new Array(le.head.extra_len)),e.arraySet(le.head.extra,ct,P,q,Vt)),le.flags&512&&(le.check=n(le.check,ct,q,P)),et-=q,P+=q,le.length-=q),le.length))break e;le.length=0,le.mode=B;case B:if(le.flags&2048){if(et===0)break e;q=0;do Vt=ct[P+q++],le.head&&Vt&&le.length<65536&&(le.head.name+=String.fromCharCode(Vt));while(Vt&&q<et);if(le.flags&512&&(le.check=n(le.check,ct,q,P)),et-=q,P+=q,Vt)break e}else le.head&&(le.head.name=null);le.length=0,le.mode=W;case W:if(le.flags&4096){if(et===0)break e;q=0;do Vt=ct[P+q++],le.head&&Vt&&le.length<65536&&(le.head.comment+=String.fromCharCode(Vt));while(Vt&&q<et);if(le.flags&512&&(le.check=n(le.check,ct,q,P)),et-=q,P+=q,Vt)break e}else le.head&&(le.head.comment=null);le.mode=Q;case Q:if(le.flags&512){for(;Ke<16;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if(De!==(le.check&65535)){be.msg="header crc mismatch",le.mode=Oe;break}De=0,Ke=0}le.head&&(le.head.hcrc=le.flags>>9&1,le.head.done=!0),be.adler=le.check=0,le.mode=U;break;case M:for(;Ke<32;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}be.adler=le.check=X(De),De=0,Ke=0,le.mode=K;case K:if(le.havedict===0)return be.next_out=Be,be.avail_out=pe,be.next_in=P,be.avail_in=et,le.hold=De,le.bits=Ke,g;be.adler=le.check=1,le.mode=U;case U:if(Ee===c||Ee===f)break e;case me:if(le.last){De>>>=Ke&7,Ke-=Ke&7,le.mode=Ae;break}for(;Ke<3;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}switch(le.last=De&1,De>>>=1,Ke-=1,De&3){case 0:le.mode=se;break;case 1:if(zt(le),le.mode=J,Ee===f){De>>>=2,Ke-=2;break e}break;case 2:le.mode=ae;break;case 3:be.msg="invalid block type",le.mode=Oe}De>>>=2,Ke-=2;break;case se:for(De>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if((De&65535)!==(De>>>16^65535)){be.msg="invalid stored block lengths",le.mode=Oe;break}if(le.length=De&65535,De=0,Ke=0,le.mode=ne,Ee===f)break e;case ne:le.mode=ee;case ee:if(q=le.length,q){if(q>et&&(q=et),q>pe&&(q=pe),q===0)break e;e.arraySet(yt,ct,P,q,Be),et-=q,P+=q,pe-=q,Be+=q,le.length-=q;break}le.mode=U;break;case ae:for(;Ke<14;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if(le.nlen=(De&31)+257,De>>>=5,Ke-=5,le.ndist=(De&31)+1,De>>>=5,Ke-=5,le.ncode=(De&15)+4,De>>>=4,Ke-=4,le.nlen>286||le.ndist>30){be.msg="too many length or distance symbols",le.mode=Oe;break}le.have=0,le.mode=G;case G:for(;le.have<le.ncode;){for(;Ke<3;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}le.lens[dr[le.have++]]=De&7,De>>>=3,Ke-=3}for(;le.have<19;)le.lens[dr[le.have++]]=0;if(le.lencode=le.lendyn,le.lenbits=7,$n={bits:le.lenbits},Xt=a(i,le.lens,0,19,le.lencode,0,le.work,$n),le.lenbits=$n.bits,Xt){be.msg="invalid code lengths set",le.mode=Oe;break}le.have=0,le.mode=Y;case Y:for(;le.have<le.nlen+le.ndist;){for(;he=le.lencode[De&(1<<le.lenbits)-1],de=he>>>24,Fe=he>>>16&255,it=he&65535,!(de<=Ke);){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if(it<16)De>>>=de,Ke-=de,le.lens[le.have++]=it;else{if(it===16){for(cr=de+2;Ke<cr;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if(De>>>=de,Ke-=de,le.have===0){be.msg="invalid bit length repeat",le.mode=Oe;break}Vt=le.lens[le.have-1],q=3+(De&3),De>>>=2,Ke-=2}else if(it===17){for(cr=de+3;Ke<cr;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}De>>>=de,Ke-=de,Vt=0,q=3+(De&7),De>>>=3,Ke-=3}else{for(cr=de+7;Ke<cr;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}De>>>=de,Ke-=de,Vt=0,q=11+(De&127),De>>>=7,Ke-=7}if(le.have+q>le.nlen+le.ndist){be.msg="invalid bit length repeat",le.mode=Oe;break}for(;q--;)le.lens[le.have++]=Vt}}if(le.mode===Oe)break;if(le.lens[256]===0){be.msg="invalid code -- missing end-of-block",le.mode=Oe;break}if(le.lenbits=9,$n={bits:le.lenbits},Xt=a(o,le.lens,0,le.nlen,le.lencode,0,le.work,$n),le.lenbits=$n.bits,Xt){be.msg="invalid literal/lengths set",le.mode=Oe;break}if(le.distbits=6,le.distcode=le.distdyn,$n={bits:le.distbits},Xt=a(s,le.lens,le.nlen,le.ndist,le.distcode,0,le.work,$n),le.distbits=$n.bits,Xt){be.msg="invalid distances set",le.mode=Oe;break}if(le.mode=J,Ee===f)break e;case J:le.mode=re;case re:if(et>=6&&pe>=258){be.next_out=Be,be.avail_out=pe,be.next_in=P,be.avail_in=et,le.hold=De,le.bits=Ke,r(be,ye),Be=be.next_out,yt=be.output,pe=be.avail_out,P=be.next_in,ct=be.input,et=be.avail_in,De=le.hold,Ke=le.bits,le.mode===U&&(le.back=-1);break}for(le.back=0;he=le.lencode[De&(1<<le.lenbits)-1],de=he>>>24,Fe=he>>>16&255,it=he&65535,!(de<=Ke);){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if(Fe&&(Fe&240)===0){for(Dt=de,un=Fe,Bt=it;he=le.lencode[Bt+((De&(1<<Dt+un)-1)>>Dt)],de=he>>>24,Fe=he>>>16&255,it=he&65535,!(Dt+de<=Ke);){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}De>>>=Dt,Ke-=Dt,le.back+=Dt}if(De>>>=de,Ke-=de,le.back+=de,le.length=it,Fe===0){le.mode=Re;break}if(Fe&32){le.back=-1,le.mode=U;break}if(Fe&64){be.msg="invalid literal/length code",le.mode=Oe;break}le.extra=Fe&15,le.mode=we;case we:if(le.extra){for(cr=le.extra;Ke<cr;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}le.length+=De&(1<<le.extra)-1,De>>>=le.extra,Ke-=le.extra,le.back+=le.extra}le.was=le.length,le.mode=ke;case ke:for(;he=le.distcode[De&(1<<le.distbits)-1],de=he>>>24,Fe=he>>>16&255,it=he&65535,!(de<=Ke);){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if((Fe&240)===0){for(Dt=de,un=Fe,Bt=it;he=le.distcode[Bt+((De&(1<<Dt+un)-1)>>Dt)],de=he>>>24,Fe=he>>>16&255,it=he&65535,!(Dt+de<=Ke);){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}De>>>=Dt,Ke-=Dt,le.back+=Dt}if(De>>>=de,Ke-=de,le.back+=de,Fe&64){be.msg="invalid distance code",le.mode=Oe;break}le.offset=it,le.extra=Fe&15,le.mode=Me;case Me:if(le.extra){for(cr=le.extra;Ke<cr;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}le.offset+=De&(1<<le.extra)-1,De>>>=le.extra,Ke-=le.extra,le.back+=le.extra}if(le.offset>le.dmax){be.msg="invalid distance too far back",le.mode=Oe;break}le.mode=Pe;case Pe:if(pe===0)break e;if(q=ye-pe,le.offset>q){if(q=le.offset-q,q>le.whave&&le.sane){be.msg="invalid distance too far back",le.mode=Oe;break}q>le.wnext?(q-=le.wnext,L=le.wsize-q):L=le.wnext-q,q>le.length&&(q=le.length),V=le.window}else V=yt,L=Be-le.offset,q=le.length;q>pe&&(q=pe),pe-=q,le.length-=q;do yt[Be++]=V[L++];while(--q);le.length===0&&(le.mode=re);break;case Re:if(pe===0)break e;yt[Be++]=le.length,pe--,le.mode=re;break;case Ae:if(le.wrap){for(;Ke<32;){if(et===0)break e;et--,De|=ct[P++]<<Ke,Ke+=8}if(ye-=pe,be.total_out+=ye,le.total+=ye,ye&&(be.adler=le.check=le.flags?n(le.check,yt,ye,Be-ye):t(le.check,yt,ye,Be-ye)),ye=pe,(le.flags?De:X(De))!==le.check){be.msg="incorrect data check",le.mode=Oe;break}De=0,Ke=0}le.mode=He;case He:if(le.wrap&&le.flags){for(;Ke<32;){if(et===0)break e;et--,De+=ct[P++]<<Ke,Ke+=8}if(De!==(le.total&4294967295)){be.msg="incorrect length check",le.mode=Oe;break}De=0,Ke=0}le.mode=st;case st:Xt=m;break e;case Oe:Xt=v;break e;case Te:return _;case z:default:return w}return be.next_out=Be,be.avail_out=pe,be.next_in=P,be.avail_in=et,le.hold=De,le.bits=Ke,(le.wsize||ye!==be.avail_out&&le.mode<Oe&&(le.mode<Ae||Ee!==u))&&ge(be,be.output,be.next_out,ye-be.avail_out),Ct-=be.avail_in,ye-=be.avail_out,be.total_in+=Ct,be.total_out+=ye,le.total+=ye,le.wrap&&ye&&(be.adler=le.check=le.flags?n(le.check,yt,ye,be.next_out-ye):t(le.check,yt,ye,be.next_out-ye)),be.data_type=le.bits+(le.last?64:0)+(le.mode===U?128:0)+(le.mode===J||le.mode===ne?256:0),(Ct===0&&ye===0||Ee===u)&&Xt===h&&(Xt=x),Xt}function H(be){if(!be||!be.state)return w;var Ee=be.state;return Ee.window&&(Ee.window=null),be.state=null,h}function fe(be,Ee){var le;return!be||!be.state||(le=be.state,(le.wrap&2)===0)?w:(le.head=Ee,Ee.done=!1,h)}function Ie(be,Ee){var le=Ee.length,ct,yt,P;return!be||!be.state||(ct=be.state,ct.wrap!==0&&ct.mode!==K)?w:ct.mode===K&&(yt=1,yt=t(yt,Ee,le,0),yt!==ct.check)?v:(P=ge(be,Ee,le,le),P?(ct.mode=Te,_):(ct.havedict=1,h))}return lo.inflateReset=xe,lo.inflateReset2=Ve,lo.inflateResetKeep=Le,lo.inflateInit=ft,lo.inflateInit2=xt,lo.inflate=R,lo.inflateEnd=H,lo.inflateGetHeader=fe,lo.inflateSetDictionary=Ie,lo.inflateInfo="pako inflate (from Nodeca project)",lo}var vS,II;function Jj(){return II||(II=1,vS={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),vS}var wS,OI;function tQ(){if(OI)return wS;OI=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return wS=e,wS}var DI;function nQ(){if(DI)return Cf;DI=1;var e=eQ(),t=gc(),n=Yj(),r=Jj(),a=lk(),i=Xj(),o=tQ(),s=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):s.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(a[g])}u.prototype.push=function(h,m){var g=this.strm,w=this.options.chunkSize,v=this.options.dictionary,_,x,S,E,C,A=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(w),g.next_out=0,g.avail_out=w),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&v&&(_=e.inflateSetDictionary(this.strm,v)),_===r.Z_BUF_ERROR&&A===!0&&(_=r.Z_OK,A=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=w-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(A=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,m){var g=new u(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function f(h,m){return m=m||{},m.raw=!0,c(h,m)}return Cf.Inflate=u,Cf.inflate=c,Cf.inflateRaw=f,Cf.ungzip=c,Cf}var _S,jI;function rQ(){if(jI)return _S;jI=1;var e=gc().assign,t=XJ(),n=nQ(),r=Jj(),a={};return e(a,t,n,r),_S=a,_S}var aQ=rQ();const uk=Ja(aQ);var xS,MI;function iQ(){if(MI)return xS;MI=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,u)=>{s?o(s):i(u)}):r.push(i),t.apply(this,r)})};return xS=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=u=>typeof u=="string"?o===u:u.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},xS}var oQ=iQ();const SS=Ja(oQ);var ES,PI;function sQ(){if(PI)return ES;PI=1;var e={};function t(ne){return Array.isArray(ne)?ne:[ne]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,u=/^\\#/,c=/\r?\n/g,f=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,w=(ne,ee,ae)=>Object.defineProperty(ne,ee,{value:ae}),v=/([0-z])-([0-z])/g,_=()=>!1,x=ne=>ne.replace(v,(ee,ae,G)=>ae.charCodeAt(0)<=G.charCodeAt(0)?ee:n),S=ne=>{const{length:ee}=ne;return ne.slice(0,ee-ee%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ne,ee,ae)=>ee+(ae.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(ne,ee)=>{const{length:ae}=ee;return ee.slice(0,ae-ae%2)+r}],[/[\\$.|*+(){^]/g,ne=>`\\${ne}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ne,ee,ae)=>ee+6<ae.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ne,ee,ae)=>{const G=ae.replace(/\\\*/g,"[^\\/]*");return ee+G}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ne,ee,ae,G,Y)=>ee===a?`\\[${ae}${S(G)}${Y}`:Y==="]"&&G.length%2===0?`[${x(ae)}${G}]`:"[]"],[/(?:[^*])$/,ne=>/\/$/.test(ne)?`${ne}$`:`${ne}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ne,ee)=>`${ee?`${ee}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),A=(ne,ee)=>{let ae=C[ne];return ae||(ae=E.reduce((G,[Y,J])=>G.replace(Y,J.bind(ne)),ne),C[ne]=ae),ee?new RegExp(ae,"i"):new RegExp(ae)},O=ne=>typeof ne=="string",I=ne=>ne&&O(ne)&&!i.test(ne)&&!o.test(ne)&&ne.indexOf("#")!==0,D=ne=>ne.split(c);class B{constructor(ee,ae,G,Y){this.origin=ee,this.pattern=ae,this.negative=G,this.regex=Y}}const W=(ne,ee)=>{const ae=ne;let G=!1;ne.indexOf("!")===0&&(G=!0,ne=ne.substr(1)),ne=ne.replace(s,"!").replace(u,"#");const Y=A(ne,ee);return new B(ae,ne,G,Y)},Q=(ne,ee)=>{throw new ee(ne)},M=(ne,ee,ae)=>O(ne)?ne?M.isNotRelative(ne)?ae(`path should be a \`path.relative()\`d string, but got "${ee}"`,RangeError):!0:ae("path must not be empty",TypeError):ae(`path must be a string, but got \`${ee}\``,TypeError),K=ne=>f.test(ne);M.isNotRelative=K,M.convert=ne=>ne;class U{constructor({ignorecase:ee=!0,ignoreCase:ae=ee,allowRelativePaths:G=!1}={}){w(this,g,!0),this._rules=[],this._ignoreCase=ae,this._allowRelativePaths=G,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(ee){if(ee&&ee[g]){this._rules=this._rules.concat(ee._rules),this._added=!0;return}if(I(ee)){const ae=W(ee,this._ignoreCase);this._added=!0,this._rules.push(ae)}}add(ee){return this._added=!1,t(O(ee)?D(ee):ee).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(ee){return this.add(ee)}_testOne(ee,ae){let G=!1,Y=!1;return this._rules.forEach(J=>{const{negative:re}=J;if(Y===re&&G!==Y||re&&!G&&!Y&&!ae)return;J.regex.test(ee)&&(G=!re,Y=re)}),{ignored:G,unignored:Y}}_test(ee,ae,G,Y){const J=ee&&M.convert(ee);return M(J,ee,this._allowRelativePaths?_:Q),this._t(J,ae,G,Y)}_t(ee,ae,G,Y){if(ee in ae)return ae[ee];if(Y||(Y=ee.split(h)),Y.pop(),!Y.length)return ae[ee]=this._testOne(ee,G);const J=this._t(Y.join(h)+h,ae,G,Y);return ae[ee]=J.ignored?J:this._testOne(ee,G)}ignores(ee){return this._test(ee,this._ignoreCache,!1).ignored}createFilter(){return ee=>!this.ignores(ee)}filter(ee){return t(ee).filter(this.createFilter())}test(ee){return this._test(ee,this._testCache,!0)}}const me=ne=>new U(ne),se=ne=>M(ne&&M.convert(ne),ne,_);if(me.isPathValid=se,me.default=me,ES=me,typeof Vr<"u"&&(e&&e.IGNORE_TEST_WIN32||Vr.platform==="win32")){const ne=ae=>/^\\\\\?\\/.test(ae)||/["<>|\u0000-\u001F]+/u.test(ae)?ae:ae.replace(/\\/g,"/");M.convert=ne;const ee=/^[a-z]:\//i;M.isNotRelative=ae=>ee.test(ae)||K(ae)}return ES}var lQ=sQ();const uQ=Ja(lQ);var CS,FI;function cQ(){if(FI)return CS;FI=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return CS=n,CS}var dQ=cQ();const js=Ja(dQ);var kS,LI;function fQ(){return LI||(LI=1,kS=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,u=a+1,c=[],f=[],h=[],m="",g=-1,w=0,v=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,u=a+1)},E=function(I,D,B){return{x:I,y:D,k:B}},C=function(I,D){return{elem:I,t:D}},A=function(I,D,B){var W,Q,M;for(D>B?W=c[I-1+u]:W=c[I+1+u],M=Math.max(D,B),Q=M-I;Q<a&&M<i&&n[Q]===r[M];)++Q,++M;return c[I+u]=f.length,f[f.length]=new E(Q,M,W),M},O=function(I){var D,B,W;for(D=B=0,W=I.length-1;W>=0;--W)for(;D<I[W].x||B<I[W].y;)I[W].y-I[W].x>B-D?(o?h[h.length]=new C(r[B],g):h[h.length]=new C(r[B],v),++B):I[W].y-I[W].x<B-D?(o?h[h.length]=new C(n[D],v):h[h.length]=new C(n[D],g),++D):(h[h.length]=new C(n[D],w),m+=n[D],++D,++B)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return m},getses:function(){return h},compose:function(){var I,D,B,W,Q,M,K,U;for(I=i-a,D=a+i+3,B={},K=0;K<D;++K)B[K]=-1,c[K]=-1;W=-1;do{for(++W,U=-W;U<=I-1;++U)B[U+u]=A(U,B[U-1+u]+1,B[U+1+u]);for(U=I+W;U>=I+1;--U)B[U+u]=A(U,B[U-1+u]+1,B[U+1+u]);B[I+u]=A(I,B[I-1+u]+1,B[I+1+u])}while(B[I+u]!==i);for(s=I+2*W,Q=c[I+u],M=[];Q!==-1;)M[M.length]=new E(f[Q].x,f[Q].y,null),Q=f[Q].k;O(M)}}}),kS}var AS,$I;function hQ(){if($I)return AS;$I=1;var e=fQ();function t(i,o){var s=new e(i,o);s.compose();for(var u=s.getses(),c,f,h=i.length-1,m=o.length-1,g=u.length-1;g>=0;--g)u[g].t===s.SES_COMMON?(f?(f.chain={file1index:h,file2index:m,chain:null},f=f.chain):(c={file1index:h,file2index:m,chain:null},f=c),h--,m--):u[g].t===s.SES_DELETE?h--:u[g].t===s.SES_ADD&&m--;var w={file1index:-1,file2index:-1,chain:null};return f?(f.chain=w,c):w}function n(i,o){for(var s=[],u=i.length,c=o.length,f=t(i,o);f!==null;f=f.chain){var h=u-f.file1index-1,m=c-f.file2index-1;u=f.file1index,c=f.file2index,(h||m)&&s.push({file1:[u+1,h],file2:[c+1,m]})}return s.reverse(),s}function r(i,o,s){var u,c=n(o,i),f=n(o,s),h=[];function m(ee,ae){h.push([ee.file1[0],ae,ee.file1[1],ee.file2[0],ee.file2[1]])}for(u=0;u<c.length;u++)m(c[u],0);for(u=0;u<f.length;u++)m(f[u],2);h.sort(function(ee,ae){return ee[0]-ae[0]});var g=[],w=0;function v(ee){ee>w&&(g.push([1,w,ee-w]),w=ee)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],C=E+S[2];_<h.length-1;){var A=h[_+1],O=A[0];if(O>C)break;C=Math.max(C,O+A[2]),_++}if(v(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var I={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(u=x;u<=_;u++){S=h[u];var D=S[1],B=I[D],W=S[0],Q=W+S[2],M=S[3],K=M+S[4];B[0]=Math.min(M,B[0]),B[1]=Math.max(K,B[1]),B[2]=Math.min(W,B[2]),B[3]=Math.max(Q,B[3])}var U=I[0][0]+(E-I[0][2]),me=I[0][1]+(C-I[0][3]),se=I[2][0]+(E-I[2][2]),ne=I[2][1]+(C-I[2][3]);g.push([-1,U,me-U,E,C-E,se,ne-se])}w=C}return v(o.length),g}function a(i,o,s){var u=[],c=[i,o,s],f=r(i,o,s),h=[];function m(){h.length&&u.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function w(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],A=0;A<S[2];A++)if(i[A+E]!=s[A+C])return!0;return!1}for(var v=0;v<f.length;v++){var _=f[v],x=_[0];x==-1?w(_)?(m(),u.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(c[0].slice(_[1],_[1]+_[2])):g(c[x].slice(_[1],_[1]+_[2]))}return m(),u}return AS=a,AS}var pQ=hQ();const mQ=Ja(pQ);class Yn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Yn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class j0 extends Yn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=j0.code,this.data={filepaths:t}}}j0.code="UnmergedPathsError";class Cn extends Yn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Cn.code,this.data={message:t}}}Cn.code="InternalError";class Th extends Yn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Th.code,this.data={filepath:t}}}Th.code="UnsafeFilepathError";class Ts{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function _w(e,t){return-(e<t)||+(e>t)}function Qj(e,t){return _w(e.path,t.path)}function e8(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const xs=2**32;function BI(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function eh(e){const[t,n]=BI(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=BI(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%xs,ctimeNanoseconds:n%xs,mtimeSeconds:r%xs,mtimeNanoseconds:a%xs,dev:e.dev%xs,ino:e.ino%xs,mode:e8(e.mode%xs),uid:e.uid%xs,gid:e.gid%xs,size:e.size>-1?e.size%xs:0}}function gQ(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let TS=null;async function Fl(e){return TS===null&&(TS=await bQ()),TS?t8(e):yQ(e)}function yQ(e){return new Wj().update(e).digest("hex")}async function t8(e){const t=await crypto.subtle.digest("SHA-1",e);return gQ(t)}async function bQ(){try{if(await t8(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function vQ(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function wQ(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Gt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Jc{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Gt.isBuffer(t))return Jc.fromBuffer(t);if(t===null)return new Jc(null);throw new Cn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Cn("Index file is empty (.git/index)");const n=new Jc,r=new Ts(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new Cn(`Invalid dircache magic file number: ${a}`);const i=await Fl(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new Cn(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new Cn(`Unsupported dircache version: ${s}`);const u=r.readUInt32BE();let c=0;for(;!r.eof()&&c<u;){const f={};f.ctimeSeconds=r.readUInt32BE(),f.ctimeNanoseconds=r.readUInt32BE(),f.mtimeSeconds=r.readUInt32BE(),f.mtimeNanoseconds=r.readUInt32BE(),f.dev=r.readUInt32BE(),f.ino=r.readUInt32BE(),f.mode=r.readUInt32BE(),f.uid=r.readUInt32BE(),f.gid=r.readUInt32BE(),f.size=r.readUInt32BE(),f.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();f.flags=vQ(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new Cn(`Got a path length of: ${m}`);if(f.path=r.toString("utf8",m),f.path.includes("..\\")||f.path.includes("../"))throw new Th(f.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const w=r.readUInt8();if(w!==0)throw new Cn(`Expected 1-8 null characters but got '${w}' after ${f.path}`);if(r.eof())throw new Cn("Unexpected end of file")}f.stages=[],n._addEntry(f),c++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(Qj)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=eh(n);const i=Gt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Gt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Gt.alloc(r),i=new Ts(a),o=eh(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(wQ(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Gt.alloc(12),n=new Ts(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(Jc._entryToBuffer(s)),s.stages.length>1)for(const u of s.stages)u&&u!==s&&r.push(Jc._entryToBuffer(u));r=await Promise.all(r);const a=Gt.concat(r),i=Gt.concat([t,a]),o=await Fl(i);return Gt.concat([i,Gt.from(o,"hex")])}}function Ub(e,t,n=!0,r=!0){const a=eh(e),i=eh(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let RS=null;const NS=Symbol("IndexCache");function _Q(){return{map:new Map,stats:new Map}}async function xQ(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Jc.from(a);n.map.set(t,i),n.stats.set(t,r)}async function SQ(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Ub(r,a)}class Aa{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[NS]||(r[NS]=_Q());const o=`${n}/index`;RS===null&&(RS=new Pm({maxPending:1/0}));let s,u=[];return await RS.acquire(o,async()=>{const c=r[NS];await SQ(t,o,c)&&await xQ(t,o,c);const f=c.map.get(o);if(u=f.unmergedPaths,u.length&&!a)throw new j0(u);if(s=await i(f),f._dirty){const h=await f.toObject();await t.write(o,h),c.stats.set(o,await t.lstat(o)),f._dirty=!1}}),s}}function qb(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function th(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function n8(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:qb(a),metadata:{},children:[]};t.set(a,i),i.parent=n(th(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:qb(a),metadata:i,parent:n(th(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function EQ(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Cn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class CQ{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Aa.acquire({fs:t,gitdir:n,cache:r},async function(i){return n8(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(_w),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:eh(r.metadata);t._type=r.type==="tree"?"tree":EQ(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const xw=Symbol("GitWalkSymbol");function Rh(){const e=Object.create(null);return Object.defineProperty(e,xw,{value:function({fs:t,gitdir:n,cache:r}){return new CQ({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class yr extends Yn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=yr.code,this.data={what:t}}}yr.code="NotFoundError";class fi extends Yn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=fi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}fi.code="ObjectTypeError";class Ku extends Yn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Ku.code,this.data={value:t}}}Ku.code="InvalidOidError";class M0 extends Yn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=M0.code,this.data={remote:t}}}M0.code="NoRefspecError";class Hb{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Hb(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Vb{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",u=a==="*";if(u!==(o==="*"))throw new Cn("Invalid refspec");return new Vb({remotePath:r,localPath:i,force:s,matchPrefix:u})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class ck{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Vb.from(r));return new ck(n)}add(t){const n=Vb.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function kQ(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const AQ=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Jp=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},zI={core:{filemode:Jp,bare:Jp,logallrefupdates:Jp,symlinks:Jp,ignorecase:Jp,bigFileThreshold:AQ}},TQ=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,RQ=/^[A-Za-z0-9-.]+$/,NQ=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,IQ=/^[A-Za-z][A-Za-z-]*$/,OQ=/^(.*?)( *[#;].*)$/,DQ=e=>{const t=TQ.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},jQ=e=>{const t=NQ.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=MQ(r),i=PQ(a);return[n,i]}return null},MQ=e=>{const t=OQ.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return UI(n)&&UI(r)?`${n}${r}`:n},UI=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,PQ=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),qI=e=>e!=null?e.toLowerCase():null,J2=(e,t,n)=>[qI(e),t,qI(n)].filter(r=>r!=null).join("."),HI=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:J2(n,a,r),sectionPath:J2(n,a,null),isSection:!!n}},FQ=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class dk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),u=DQ(s),c=u!=null;if(c)[n,r]=u;else{const h=jQ(s);h!=null&&([i,o]=h)}const f=J2(n,r,i);return{line:a,isSection:c,section:n,subsection:r,name:i,value:o,path:f}}):[]}static from(t){return new dk(t)}async get(t,n=!1){const r=HI(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const u=zI[i]&&zI[i][o];return u?u(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:u,isSection:c}=HI(t),f=FQ(this.parsedConfig,h=>h.path===s);if(n==null)f!==-1&&this.parsedConfig.splice(f,1);else if(f!==-1){const h=this.parsedConfig[f],m=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(f+1,0,m):this.parsedConfig[f]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===u),m={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(RQ.test(a)&&IQ.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:c,section:a,subsection:i,modified:!0,path:u};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class oa{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return dk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const qy=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],LQ=["config","description","index","shallow","commondir"];let IS;async function Tu(e,t){return IS===void 0&&(IS=new Pm),IS.acquire(e,t)}class Ot{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:u=!1,pruneTags:c=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new Ku(_);const f=await oa.get({fs:t,gitdir:n});if(!s){if(s=await f.getall(`remote.${r}.fetch`),s.length===0)throw new M0(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=ck.from(s),m=new Map;if(c){const _=await Ot.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Ot.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await Ot.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);m.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);m.set(x,S)}const w=h.translate([...i.keys()]);for(const[_,x]of w){const S=i.get(_),E=h.translateOne(S);E&&m.set(x,`ref: ${E}`)}const v=[];if(u){for(const _ of h.localNamespaces()){const x=(await Ot.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)m.has(S)||v.push(S)}v.length>0&&await Ot.deleteRefs({fs:t,gitdir:n,refs:v})}for(const[_,x]of m)await Tu(_,async()=>t.write(At.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:v}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Ku(a);await Tu(r,async()=>t.write(At.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Tu(r,async()=>t.write(At.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Ot.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(At.join(n,s))));let a=await Tu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Hb.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await Tu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Ot.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Ot.packedRefs({fs:t,gitdir:n}),o=qy(r).filter(s=>!LQ.includes(s));for(const s of o){const u=await Tu(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(u)return Ot.resolve({fs:t,gitdir:n,ref:u.trim(),depth:a})}throw new yr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Ot.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Ot.packedRefs({fs:t,gitdir:n}),i=qy(r);for(const o of i)if(await Tu(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new yr(r)}static async expandAgainstMap({ref:t,map:n}){const r=qy(t);for(const a of r)if(await n.has(a))return a;throw new yr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Ot.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=qy(t);for(const o of i){const s=a.get(o);if(s)return Ot.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new yr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Tu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Hb.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Ot.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(kQ),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Ot.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Ot.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Ot.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function $Q(e,t){return _w(VI(e),VI(t))}function VI(e){return e.mode==="040000"?e.path+"/":e.path}function r8(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Cn(`Unexpected GitTree entry mode: ${e}`)}function BQ(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Cn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new Cn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=r8(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new Th(s);const u=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:u,type:o})}return t}function zQ(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Cn(`Could not understand file mode: ${e}`)}function UQ(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=zQ(e.mode),e.type||(e.type=r8(e.mode)),e}class Ti{constructor(t){if(Gt.isBuffer(t))this._entries=BQ(t);else if(Array.isArray(t))this._entries=t.map(UQ);else throw new Cn("invalid type passed to GitTree constructor");this._entries.sort(Qj)}static from(t){return new Ti(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort($Q),Gt.concat(t.map(n=>{const r=Gt.from(n.mode.replace(/^0/,"")),a=Gt.from(" "),i=Gt.from(n.path,"utf8"),o=Gt.from([0]),s=Gt.from(n.oid,"hex");return Gt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Nh{static wrap({type:t,object:n}){return Gt.concat([Gt.from(`${t} ${n.byteLength.toString()}\0`),Gt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new Cn(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Gt.from(t.slice(r+1))}}}async function a8({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function qQ(e,t){const n=new Ts(e),r=GI(n);if(r!==t.byteLength)throw new Cn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=GI(n);let i;const o=KI(n,t);if(o.byteLength===a)i=o;else{i=Gt.alloc(a);const s=new Ts(i);for(s.copy(o);!n.eof();)s.copy(KI(n,t));const u=s.tell();if(a!==u)throw new Cn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${u} bytes`)}return i}function GI(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function WI(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function KI(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=WI(e,n&a,4);let s=WI(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function HQ(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function i8(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:HQ(e)}class o8{constructor(t){if(typeof Gt>"u")throw new Error("Missing Buffer dependency");this.stream=i8(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Gt.alloc(0):(n&&(n=Gt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>VQ(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Gt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function VQ(e){return e.reduce((t,n)=>t+n.length,0)}async function GQ(e,t){const n=new o8(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Cn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new Cn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:u,ofs:c,reference:f}=await WQ(n),h=new uk.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new Cn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==u)throw new Cn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:f,ofs:c})}}}}async function WQ(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Gt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function s8(e){return uk.inflate(e)}function KQ(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function ZQ(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class nh{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new Ts(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Cn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Cn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let f=0;f<o;f++){const h=r.slice(20).toString("hex");s[f]=h}r.seek(r.tell()+4*o);const u=new Map;for(let f=0;f<o;f++)u.set(s[f],r.readUInt32BE());const c=r.slice(20).toString("hex");return new nh({hashes:s,crcs:{},offsets:u,packfileSha:c,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],u={},c=new Map;let f=null,h=null;await GQ([t],async({data:_,type:x,reference:S,offset:E,num:C})=>{f===null&&(f=C);const A=Math.floor((f-C)*100/f);A!==h&&r&&await r({phase:"Receiving objects",loaded:f-C,total:f}),h=A,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const m=Object.keys(i).map(Number);for(const[_,x]of m.entries()){const S=_+1===m.length?t.byteLength-20:m[_+1],E=i[x],C=KJ.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const g=new nh({pack:Promise.resolve(t),packfileSha:o,crcs:u,hashes:s,offsets:c,getExternalRefDelta:n});h=null;let w=0;const v=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(w*100/f);x!==h&&r&&await r({phase:"Resolving deltas",loaded:w,total:f}),w++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});v[g.readDepth]+=1;const A=await Fl(Nh.wrap({type:E,object:C}));S.oid=A,s.push(A),c.set(A,_),u[A]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(c,f)=>{t.push(Gt.from(c,f))};n("ff744f63","hex"),n("00000002","hex");const r=new Ts(Gt.alloc(256*4));for(let c=0;c<256;c++){let f=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=c&&f++;r.writeUInt32BE(f)}t.push(r.buffer);for(const c of this.hashes)n(c,"hex");const a=new Ts(Gt.alloc(this.hashes.length*4));for(const c of this.hashes)a.writeUInt32BE(this.crcs[c]);t.push(a.buffer);const i=new Ts(Gt.alloc(this.hashes.length*4));for(const c of this.hashes)i.writeUInt32BE(this.offsets.get(c));t.push(i.buffer),n(this.packfileSha,"hex");const o=Gt.concat(t),s=await Fl(o),u=Gt.alloc(20);return u.write(s,"hex"),Gt.concat([o,u])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Cn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Cn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new Ts(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new Cn("Unrecognized type: 0b"+o.toString(2));const u=i&15;let c=u;i&128&&(c=ZQ(a,u));let h=null,m=null;if(s==="ofs_delta"){const w=KQ(a),v=t-w;({object:h,type:s}=await this.readSlice({start:v}))}if(s==="ref_delta"){const w=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:w}))}const g=r.slice(a.tell());if(m=Gt.from(await s8(g)),m.byteLength!==c)throw new Cn(`Packfile told us object would have length ${c} but it had length ${m.byteLength}`);return h&&(m=Gt.from(qQ(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:m}),{type:s,format:"content",object:m}}}const Hy=Symbol("PackfileCache");async function YQ({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return nh.fromIdx({idx:i,getExternalRefDelta:n})}function fk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[Hy]||(t[Hy]=new Map);let o=t[Hy].get(n);return o||(o=YQ({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[Hy].set(n,o)),o}async function XQ({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await fk({fs:e,cache:t,filename:u,getExternalRefDelta:i});if(c.error)throw new Cn(c.error);if(c.offsets.has(r)){if(!c.pack){const h=u.replace(/idx$/,"pack");c.pack=e.read(h)}const f=await c.read({oid:r,getExternalRefDelta:i});return f.format="content",f.source=`objects/pack/${s.replace(/idx$/,"pack")}`,f}}return null}async function Lr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=f=>Lr({fs:e,cache:t,gitdir:n,oid:f});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Gt.from("tree 0\0")}),o||(o=await a8({fs:e,gitdir:n,oid:r})),!o){if(o=await XQ({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new yr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Gt.from(await s8(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Fl(o.object);if(s!==r)throw new Cn(`SHA check failed! Expected ${r}, computed ${s}`);const{object:u,type:c}=Nh.unwrap(o.object);if(o.type=c,o.object=u,o.format="content",a==="content")return o;throw new Cn(`invalid requested format "${a}"`)}class ns extends Yn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=ns.code,this.data={noun:t,where:n,canForce:r}}}ns.code="AlreadyExistsError";class P0 extends Yn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=P0.code,this.data={nouns:t,short:n,matches:r}}}P0.code="AmbiguousError";class F0 extends Yn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=F0.code,this.data={filepaths:t}}}F0.code="CheckoutConflictError";class L0 extends Yn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=L0.code,this.data={ref:t,oid:n}}}L0.code="CommitNotFetchedError";class $0 extends Yn{constructor(){super("Empty response from git server."),this.code=this.name=$0.code,this.data={}}}$0.code="EmptyServerResponseError";class B0 extends Yn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=B0.code,this.data={}}}B0.code="FastForwardError";class z0 extends Yn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=z0.code,this.data={prettyDetails:t,result:n}}}z0.code="GitPushError";class rh extends Yn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=rh.code,this.data={statusCode:t,statusMessage:n,response:r}}}rh.code="HttpError";class Zu extends Yn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Zu.code,this.data={reason:t}}}Zu.code="InvalidFilepathError";class Zo extends Yn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Zo.code,this.data={ref:t,suggestion:n}}}Zo.code="InvalidRefNameError";class U0 extends Yn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=U0.code,this.data={depth:t}}}U0.code="MaxDepthError";class Ih extends Yn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Ih.code,this.data={}}}Ih.code="MergeNotSupportedError";class Oh extends Yn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Oh.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Oh.code="MergeConflictError";class Za extends Yn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=Za.code,this.data={role:t}}}Za.code="MissingNameError";class Ci extends Yn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Ci.code,this.data={parameter:t}}}Ci.code="MissingParameterError";class q0 extends Yn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=q0.code,this.data={errors:t},this.errors=t}}q0.code="MultipleGitError";let H0=class l8 extends Yn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=l8.code,this.data={expected:t,actual:n}}};H0.code="ParseError";class ah extends Yn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=ah.code,this.data={reason:t}}}ah.code="PushRejectedError";class Pu extends Yn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Pu.code,this.data={capability:t,parameter:n}}}Pu.code="RemoteCapabilityError";class V0 extends Yn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=V0.code,this.data={preview:t,response:n}}}V0.code="SmartHttpError";class G0 extends Yn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=G0.code,this.data={url:t,transport:n,suggestion:r}}}G0.code="UnknownTransportError";class W0 extends Yn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=W0.code,this.data={url:t}}}W0.code="UrlParseError";class Dh extends Yn{constructor(){super("The operation was canceled."),this.code=this.name=Dh.code,this.data={}}}Dh.code="UserCanceledError";class K0 extends Yn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=K0.code,this.data={filepath:t}}}K0.code="IndexResetError";class Z0 extends Yn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Z0.code,this.data={ref:t}}}Z0.code="NoCommitError";var JQ=Object.freeze({__proto__:null,AlreadyExistsError:ns,AmbiguousError:P0,CheckoutConflictError:F0,CommitNotFetchedError:L0,EmptyServerResponseError:$0,FastForwardError:B0,GitPushError:z0,HttpError:rh,InternalError:Cn,InvalidFilepathError:Zu,InvalidOidError:Ku,InvalidRefNameError:Zo,MaxDepthError:U0,MergeNotSupportedError:Ih,MergeConflictError:Oh,MissingNameError:Za,MissingParameterError:Ci,MultipleGitError:q0,NoRefspecError:M0,NotFoundError:yr,ObjectTypeError:fi,ParseError:H0,PushRejectedError:ah,RemoteCapabilityError:Pu,SmartHttpError:V0,UnknownTransportError:G0,UnsafeFilepathError:Th,UrlParseError:W0,UserCanceledError:Dh,UnmergedPathsError:j0,IndexResetError:K0,NoCommitError:Z0});function Q2({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=QQ(r),`${e} <${t}> ${n} ${r}`}function QQ(e){const t=eee(tee(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function eee(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function tee(e){return e===0?e:-e}function xl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Gb(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:nee(a)}}function nee(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),ree(r)}function ree(e){return e===0?e:-e}class si{constructor(t){if(typeof t=="string")this._tag=t;else if(Gt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=si.render(t);else throw new Cn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new si(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${Q2(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=Gb(r.tagger)),r.committer&&(r.committer=Gb(r.committer)),r}withoutSignature(){const t=xl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return xl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Gt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=xl(i);const o=a+i;return si.from(o)}}function OS(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function aee(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Fr{constructor(t){if(typeof t=="string")this._commit=t;else if(Gt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Fr.render(t);else throw new Cn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Fr.justHeaders(t),a=Fr.justMessage(t),i=xl(r+`
gpgsig`+OS(n)+`
`+a);return new Fr(i)}static from(t){return new Fr(t)}toObject(){return Gt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Fr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return xl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Fr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=Gb(r.author)),r.committer&&(r.committer=Gb(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Cn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${Q2(r)}
`;const a=t.committer||t.author;return n+=`committer ${Q2(a)}
`,t.gpgsig&&(n+="gpgsig"+OS(t.gpgsig)),n}static render(t){return Fr.renderHeaders(t)+`
`+xl(t.message)}render(){return this._commit}withoutSignature(){const t=xl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return xl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return aee(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Fr.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=xl(o);const u=Fr.justHeaders(t._commit)+`
gpgsig`+OS(o)+`
`+i;return Fr.from(u)}}async function ih({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:Ti.from([]),oid:r};const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=si.from(i).parse().object,ih({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Fr.from(i).parse().tree,ih({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new fi(r,a,"tree");return{tree:Ti.from(i),oid:r}}class iee{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await Ot.resolve({fs:t,gitdir:n,ref:r})}catch(c){c instanceof yr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const u=await ih({fs:t,cache:this.cache,gitdir:n,oid:s});return u.type="tree",u.mode="40000",o.set(".",u),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const u=s.oid;if(!u)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:c,object:f}=await Lr({fs:r,cache:a,gitdir:i,oid:u});if(c!==s.type)throw new fi(u,c,s.type);const h=Ti.from(f);for(const m of h)o.set(At.join(n,m.path),m);return h.entries().map(m=>At.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=e8(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:u,object:c}=await Lr({fs:r,cache:a,gitdir:i,oid:s});u!=="blob"?t._content=void 0:t._content=new Uint8Array(c)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function yo({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,xw,{value:function({fs:n,gitdir:r,cache:a}){return new iee({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class oee{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(At.join(a,n));return i===null?null:i.map(o=>At.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=eh(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Aa.acquire({fs:r,gitdir:a,cache:i},async function(s){const u=s.entriesMap.get(t._fullpath),c=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof Vr<"u"?Vr.platform!=="win32":!0;if(!u||Ub(c,u,h,m)){const g=await t.content();g===void 0?o=void 0:(o=await Fl(Nh.wrap({type:"blob",object:g})),u&&o===u.oid&&(!h||c.mode===u.mode)&&Ub(c,u,h,m)&&s.insert({filepath:t._fullpath,stats:c,oid:o}))}else o=u.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await oa.get({fs:t,gitdir:n}),this.config)}}function Y0(){const e=Object.create(null);return Object.defineProperty(e,xw,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new oee({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function see(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const u8=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class lee{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*uee(e){const t=new lee;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function Yu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(u,c)=>c,reduce:o=async(u,c)=>{const f=u8(c);return u!==void 0&&f.unshift(u),f},iterate:s=(u,c)=>Promise.all([...c].map(u))}){const u=a.map(g=>g[xw]({fs:e,dir:n,gitdir:r,cache:t})),c=new Array(u.length).fill("."),f=see(0,u.length),h=async g=>{f.map(_=>{const x=g[_];g[_]=x&&new u[_].ConstructEntry(x)});const v=(await Promise.all(f.map(_=>{const x=g[_];return x?u[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:uee(v)}},m=async g=>{const{entries:w,children:v}=await h(g),_=w.find(S=>S&&S._fullpath)._fullpath,x=await i(_,w);if(x!==null){let S=await s(m,v);return S=S.filter(E=>E!==void 0),o(x,S)}};return m(c)}async function eE(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=At.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?eE(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function cee(e){return dee(e)&&ZI(e.then)&&ZI(e.catch)}function dee(e){return e&&typeof e=="object"}function ZI(e){return typeof e=="function"}function YI(e){return cee((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const XI=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function JI(e,t){if(YI(t))for(const n of XI)e[`_${n}`]=t[n].bind(t);else for(const n of XI)e[`_${n}`]=SS(t[n].bind(t));YI(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=eE.bind(null,e):t.rm?e._rm=SS(t.rm.bind(t)):t.rmdir.length>2?e._rm=SS(t.rmdir.bind(t)):e._rm=eE.bind(null,e)}class nn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?JI(this,t.promises):JI(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Gt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(th(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=th(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(_w),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Gt.isBuffer(r)?r:Gt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Je(e,t){if(t===void 0)throw new Ci(e)}async function Wb(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function fee({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Je("fs",e),Je("dir",t),Je("gitdir",n);const i=new nn(e),o=[yo({ref:r}),Y0(),Rh()];let s=[];await Aa.acquire({fs:i,gitdir:n,cache:a},async function(c){s=c.unmergedPaths});const u=await Yu({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(c,[f,h,m]){const g=!await Wb(h,m),w=s.includes(c),v=!await Wb(m,f);if(g||w)return f?{path:c,mode:await f.mode(),oid:await f.oid(),type:await f.type(),content:await f.content()}:void 0;if(v)return!1;throw new K0(c)}});await Aa.acquire({fs:i,gitdir:n,cache:a},async function(c){for(const f of u)if(f!==!1){if(!f){await i.rmdir(`${t}/${f.path}`,{recursive:!0}),c.delete({filepath:f.path});continue}if(f.type==="blob"){const h=new TextDecoder().decode(f.content);await i.write(`${t}/${f.path}`,h,{mode:f.mode}),c.insert({filepath:f.path,oid:f.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class jh{static async isIgnored({fs:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a}){if(qb(a)===".git")return!0;if(a===".")return!1;let i="";const o=At.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:At.join(n,".gitignore"),filepath:a}],u=a.split("/").filter(Boolean);for(let f=1;f<u.length;f++){const h=u.slice(0,f).join("/"),m=u.slice(f).join("/");s.push({gitignore:At.join(n,h,".gitignore"),filepath:m})}let c=!1;for(const f of s){let h;try{h=await t.read(f.gitignore,"utf8")}catch(w){if(w.code==="NOENT")continue}const m=uQ().add(i);m.add(h);const g=th(f.filepath);if(g!=="."&&m.ignores(g))return!0;c?c=!m.test(f.filepath).unignored:c=m.test(f.filepath).ignored}return c}}async function hee({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let DS=null;async function c8(e){return DS===null&&(DS=mee()),DS?pee(e):uk.deflate(e)}async function pee(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function mee(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Ni({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Nh.wrap({type:n,object:r})),i=await Fl(r),r=Gt.from(await c8(r))),o||await hee({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function d8(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function gee({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r);const s=new nn(e);await Aa.acquire({fs:s,gitdir:n,cache:a},async u=>{const f=await(await oa.get({fs:s,gitdir:n})).get("core.autocrlf");return tE({dir:t,gitdir:n,fs:s,filepath:r,index:u,force:i,parallel:o,autocrlf:f})})}catch(s){throw s.caller="git.add",s}}async function tE({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const u=r.map(async m=>{if(!i&&await jh.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(At.join(e,m));if(!g)throw new yr(m);if(g.isDirectory()){const w=await n.readdir(At.join(e,m));if(o){const v=w.map(_=>tE({dir:e,gitdir:t,fs:n,filepath:[At.join(m,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(v)}else for(const v of w)await tE({dir:e,gitdir:t,fs:n,filepath:[At.join(m,v)],index:a,force:i,parallel:o,autocrlf:s})}else{const w=g.isSymbolicLink()?await n.readlink(At.join(e,m)).then(d8):await n.read(At.join(e,m),{autocrlf:s});if(w===null)throw new yr(m);const v=await Ni({fs:n,gitdir:t,type:"blob",object:w});a.insert({filepath:m,stats:g,oid:v})}}),c=await Promise.allSettled(u),f=c.filter(m=>m.status==="rejected").map(m=>m.reason);if(f.length>1)throw new q0(f);if(f.length===1)throw f[0];return c.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function Fm({fs:e,gitdir:t,path:n}){return(await oa.get({fs:e,gitdir:t})).get(n)}function f8(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Xu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await Fm({fs:e,gitdir:t,path:"user.name"}),email:await Fm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=f8({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function oh({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await Fm({fs:e,gitdir:t,path:"user.name"}),email:await Fm({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=f8({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function h8({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=si.from(i).parse().object,h8({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new fi(r,a,"commit");return{commit:Fr.from(i),oid:r}}async function sh({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await h8({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function Sw({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g}){let w=!1;h||(h=await Ot.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let v,_;try{v=await Ot.resolve({fs:e,gitdir:r,ref:h}),_=await sh({fs:e,gitdir:r,oid:v,cache:{}})}catch{w=!0}if(u&&w)throw new Z0(h);const x=u?await Xu({fs:e,gitdir:r,author:i,commit:_.commit}):await Xu({fs:e,gitdir:r,author:i});if(!x)throw new Za("author");const S=u?await oh({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await oh({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new Za("committer");return Aa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const A=n8(E.entries).get(".");if(g||(g=await p8({fs:e,gitdir:r,inode:A,dryRun:c})),m?m=await Promise.all(m.map(D=>Ot.resolve({fs:e,gitdir:r,ref:D}))):u?m=_.commit.parent:m=v?[v]:[],!a)if(u)a=_.commit.message;else throw new Ci("message");let O=Fr.from({tree:g,parent:m,author:x,committer:S,message:a});s&&(O=await Fr.sign(O,n,s));const I=await Ni({fs:e,gitdir:r,type:"commit",object:O.toObject(),dryRun:c});return!f&&!c&&await Ot.writeRef({fs:e,gitdir:r,ref:h,value:I}),I})}async function p8({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const u of a)u.type==="tree"&&(u.metadata.mode="040000",u.metadata.oid=await p8({fs:e,gitdir:t,inode:u,dryRun:r}));const i=a.map(u=>({mode:u.metadata.mode,path:u.basename,oid:u.metadata.oid,type:u.type})),o=Ti.from(i);return await Ni({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function X0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Zu("leading-slash");if(a.endsWith("/"))throw new Zu("trailing-slash");const i=r,o=await ih({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const u=a.split("/");r=await m8({fs:e,cache:t,gitdir:n,tree:s,pathArray:u,oid:i,filepath:a})}return r}async function m8({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const u of r)if(u.path===s){if(a.length===0)return u.oid;{const{type:c,object:f}=await Lr({fs:e,cache:t,gitdir:n,oid:u.oid});if(c!=="tree")throw new fi(i,c,"tree",o);return r=Ti.from(f),m8({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new yr(`file or directory found at "${i}:${o}"`)}async function Mh({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await X0({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await ih({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function J0({fs:e,gitdir:t,tree:n}){const r=Ti.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function yee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:u,committer:c,signingKey:f}){let h;try{h=await Ot.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof yr))throw x}let g=(await Mh({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new ns("note",i);typeof o=="string"&&(o=Gt.from(o,"utf8"));const w=await Ni({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:w,type:"blob"});const v=await J0({fs:e,gitdir:r,tree:g});return await Sw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:v,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:u,committer:c,signingKey:f})}async function bee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:u,committer:c,signingKey:f,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i),Je("note",o),f&&Je("onSign",t);const m=new nn(e),g=await Xu({fs:m,gitdir:r,author:u});if(!g)throw new Za("author");const w=await oh({fs:m,gitdir:r,author:g,committer:c});if(!w)throw new Za("committer");return await yee({fs:new nn(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:w,signingKey:f})}catch(m){throw m.caller="git.addNote",m}}async function g8({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==js.clean(n))throw new Zo(n,js.clean(n));const i=await oa.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new ns("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await oa.save({fs:e,gitdir:t,config:i})}async function vee({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("remote",r),Je("url",a),await g8({fs:new nn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function wee({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!f&&await Ot.exists({fs:e,gitdir:r,ref:a}))throw new ns("tag",a);const h=await Ot.resolve({fs:e,gitdir:r,ref:u||"HEAD"}),{type:m}=await Lr({fs:e,cache:t,gitdir:r,oid:h});let g=si.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});c&&(g=await si.sign(g,n,c));const w=await Ni({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Ot.writeRef({fs:e,gitdir:r,ref:a,value:w})}async function _ee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:u,signingKey:c,force:f=!1,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("ref",a),c&&Je("onSign",t);const m=new nn(e),g=await Xu({fs:m,gitdir:r,author:i});if(!g)throw new Za("tagger");return await wee({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:u,signingKey:c,force:f})}catch(m){throw m.caller="git.annotatedTag",m}}async function xee({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==js.clean(n))throw new Zo(n,js.clean(n));const o=`refs/heads/${n}`;if(!i&&await Ot.exists({fs:e,gitdir:t,ref:o}))throw new ns("branch",n,!1);let s;try{s=await Ot.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await Ot.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await Ot.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function See({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await xee({fs:new nn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const y8=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function hk({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:u,noCheckout:c,noUpdateHead:f,dryRun:h,force:m,track:g=!0}){let w;if(r)try{w=await Ot.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{w="0000000000000000000000000000000000000000"}let v;try{v=await Ot.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(v=await Ot.resolve({fs:e,gitdir:i,ref:x}),g){const S=await oa.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await oa.save({fs:e,gitdir:i,config:S})}await Ot.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:v})}if(!c){let _;try{_=await Eee({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:m,filepaths:u})}catch(A){throw A instanceof yr&&A.data.what===v?new L0(s,v):A}const x=_.filter(([A])=>A==="conflict").map(([A,O])=>O);if(x.length>0)throw new F0(x);const S=_.filter(([A])=>A==="error").map(([A,O])=>O);if(S.length>0)throw new Cn(S.join(", "));if(h){r&&await r({previousHead:w,newHead:v,type:u!=null&&u.length>0?"file":"branch"});return}let E=0;const C=_.length;await Aa.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([O])=>O==="delete"||O==="delete-index").map(async function([O,I]){const D=`${a}/${I}`;O==="delete"&&await e.rm(D),A.delete({filepath:I}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Aa.acquire({fs:e,gitdir:i,cache:t},async function(A){for(const[O,I]of _)if(O==="rmdir"||O==="rmdir-index"){const D=`${a}/${I}`;try{O==="rmdir-index"&&A.delete({filepath:I}),await e.rmdir(D),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(B){if(B.code==="ENOTEMPTY")console.log(`Did not delete ${I} because directory is not empty`);else throw B}}}),await Promise.all(_.filter(([A])=>A==="mkdir"||A==="mkdir-index").map(async function([A,O]){const I=`${a}/${O}`;await e.mkdir(I),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Aa.acquire({fs:e,gitdir:i,cache:t},async function(A){await Promise.all(_.filter(([O])=>O==="create"||O==="create-index"||O==="update"||O==="mkdir-index").map(async function([O,I,D,B,W]){const Q=`${a}/${I}`;try{if(O!=="create-index"&&O!=="mkdir-index"){const{object:K}=await Lr({fs:e,cache:t,gitdir:i,oid:D});if(W&&await e.rm(Q),B===33188)await e.write(Q,K);else if(B===33261)await e.write(Q,K,{mode:511});else if(B===40960)await e.writelink(Q,K);else throw new Cn(`Invalid mode 0o${B.toString(8)} detected in blob ${D}`)}const M=await e.lstat(Q);B===33261&&(M.mode=493),O==="mkdir-index"&&(M.mode=57344),A.insert({filepath:I,stats:M,oid:D}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(M){console.log(M)}}))}),r&&await r({previousHead:w,newHead:v,type:u!=null&&u.length>0?"file":"branch"})}if(!f){const _=await Ot.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await Ot.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await Ot.writeRef({fs:e,gitdir:i,ref:"HEAD",value:v})}}async function Eee({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let u=0;return Yu({fs:e,cache:t,dir:r,gitdir:a,trees:[yo({ref:i}),Y0(),Rh()],map:async function(c,[f,h,m]){if(c===".")return;if(s&&!s.some(w=>y8(c,w)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++u}),[!!m,!!f,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(c)?["delete",c]:void 0;case"010":switch(await f.type()){case"tree":return["mkdir",c];case"blob":return["create",c,await f.oid(),await f.mode()];case"commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`new entry Unhandled type ${await f.type()}`]}case"011":switch(`${await f.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",c];case"blob-blob":return await f.oid()!==await h.oid()?o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]:await f.mode()!==await h.mode()?o?["update",c,await f.oid(),await f.mode(),!0]:["conflict",c]:["create-index",c,await f.oid(),await f.mode()];case"commit-tree":return;case"commit-blob":return["conflict",c];default:return["error",`new entry Unhandled type ${f.type}`]}case"100":return["delete-index",c];case"101":switch(await m.type()){case"tree":return["rmdir",c];case"blob":return await m.oid()!==await h.oid()?o?["delete",c]:["conflict",c]:["delete",c];case"commit":return["rmdir-index",c];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await f.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await f.oid()&&await m.mode()===await f.mode()&&!o)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await f.oid())return o?["update",c,await f.oid(),await f.mode(),await f.mode()!==await h.mode()]:["conflict",c]}else if(o)return["update",c,await f.oid(),await f.mode(),await f.mode()!==await m.mode()];return await f.mode()!==await m.mode()?["update",c,await f.oid(),await f.mode(),!0]:await f.oid()!==await m.oid()?["update",c,await f.oid(),await f.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",c,await f.oid()];case"blob-tree":return["update-blob-to-tree",c];case"commit-commit":return["mkdir-index",c,await f.oid(),await f.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await f.type()}`]}}},reduce:async function(c,f){return f=u8(f),c?c&&c[0]==="rmdir"?(f.push(c),f):(f.unshift(c),f):f}})}async function b8({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=At.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:u=!1,noUpdateHead:c=o===void 0,dryRun:f=!1,force:h=!1,track:m=!0,cache:g={}}){try{Je("fs",e),Je("dir",r),Je("gitdir",a);const w=o||"HEAD";return await hk({fs:new nn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:w,filepaths:s,noCheckout:u,noUpdateHead:c,dryRun:f,force:h,track:m})}catch(w){throw w.caller="git.checkout",w}}const Cee=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function nd(e){const t=Cee.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function yc({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Ot.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Ot.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:nd(a)}function kee(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function v8({username:e="",password:t=""}){return`Basic ${Gt.from(`${e}:${t}`).toString("base64")}`}async function Q0(e,t){const n=i8(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Kb(e){let t=0;const n=[];await Q0(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function QI(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function nE(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class Xr{static flush(){return Gt.from("0000","utf8")}static delim(){return Gt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Gt.from(t));const n=t.length+4,r=nE(4,n);return Gt.concat([Gt.from(r,"utf8"),t])}static streamReader(t){const n=new o8(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function e4(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function t4(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=Xr.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new $0;if(o.includes("version 2"))return e4(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new H0(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return e4(i);const[u,c]=jS(s,"\0","\\x00");if(c.split(" ").map(f=>n.add(f)),u!=="0000000000000000000000000000000000000000 capabilities^{}"){const[f,h]=jS(u," "," ");for(r.set(h,f);;){const m=await i();if(m===!0)break;if(m!==null){const[g,w]=jS(m.toString("utf8")," "," ");r.set(w,g)}}}for(const f of n)if(f.startsWith("symref=")){const h=f.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function jS(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new H0(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const n4=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,r4=(e,t)=>{(t.username||t.password)&&(e.Authorization=v8(t)),t.headers&&Object.assign(e,t.headers)},MS=async e=>{try{const t=Gt.from(await Kb(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Zb{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:u,headers:c,protocolVersion:f}){let{url:h,auth:m}=QI(u);const g=o?n4(o,h):h;(m.username||m.password)&&(c.Authorization=v8(m)),f===2&&(c["Git-Protocol"]="version=2");let w,v,_=!1;do if(w=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:c}),v=!1,w.statusCode===401||w.statusCode===203){const x=_?i:r;if(x){if(m=await x(h,{...m,headers:{...c}}),m&&m.cancel)throw new Dh;m&&(r4(c,m),_=!0,v=!0)}}else w.statusCode===200&&_&&a&&await a(h,m);while(v);if(w.statusCode!==200){const{response:x}=await MS(w);throw new rh(w.statusCode,w.statusMessage,x)}if(w.headers["content-type"]===`application/x-${s}-advertisement`){const x=await t4(w.body,{service:s});return x.auth=m,x}else{const{preview:x,response:S,data:E}=await MS(w);try{const C=await t4([E],{service:s});return C.auth=m,C}catch{throw new V0(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:u}){const c=QI(i);c&&(i=c.url),r&&(i=n4(r,i)),u["content-type"]=`application/x-${a}-request`,u.accept=`application/x-${a}-result`,r4(u,o);const f=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:u});if(f.statusCode!==200){const{response:h}=MS(f);throw new rh(f.statusCode,f.statusMessage,h)}return f}}function Aee({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class Ew{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Zb),n.set("https",Zb);const r=Aee({url:t});if(!r)throw new W0(t);if(n.has(r.transport))return n.get(r.transport);throw new G0(t,r.transport,r.transport==="ssh"?kee(t):void 0)}}let Wc=null;class Lm{static async read({fs:t,gitdir:n}){Wc===null&&(Wc=new Pm);const r=At.join(n,"shallow"),a=new Set;return await Wc.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){Wc===null&&(Wc=new Pm);const a=At.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Wc.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Wc.acquire(a,async function(){await t.rm(a)})}}async function Tee({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function Ree({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(At.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,u=await fk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(u.error)throw new Cn(u.error);if(u.offsets.has(r))return!0}return!1}async function a4({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>Lr({fs:e,cache:t,gitdir:n,oid:s});let o=await Tee({fs:e,gitdir:n,oid:r});return o||(o=await Ree({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function Nee(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function w8(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const Cw={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class fb{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Iee(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function _8(e){const t=new fb;let n="";return(async()=>(await Q0(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Iee(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class x8{static demux(t){const n=Xr.streamReader(t),r=new fb,a=new fb,i=new fb,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const u=s.slice(1);i.write(u),r.end(),i.end(),a.destroy(new Error(u.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function Oee(e){const{packetlines:t,packfile:n,progress:r}=x8.demux(e),a=[],i=[],o=[];let s=!1,u=!1;return new Promise((c,f)=>{Q0(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Ku(g)),a.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&f(new Ku(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,w]=m.split(" ");o.push({oid:g,status:w}),w||(u=!0)}else m.startsWith("NAK")?(s=!0,u=!0):(u=!0,s=!0);u&&(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{u||(e.error?f(e.error):c({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Dee({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let u=` ${e.join(" ")}`;for(const c of t)s.push(Xr.encode(`want ${c}${u}
`)),u="";for(const c of r)s.push(Xr.encode(`shallow ${c}
`));a!==null&&s.push(Xr.encode(`deepen ${a}
`)),i!==null&&s.push(Xr.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const c of o)s.push(Xr.encode(`deepen-not ${c}
`));s.push(Xr.flush());for(const c of n)s.push(Xr.encode(`have ${c}
`));return s.push(Xr.encode(`done
`)),s}async function pk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,ref:c,remoteRef:f,remote:h,url:m,corsProxy:g,depth:w=null,since:v=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:O=!1}){const I=c||await yc({fs:e,gitdir:u,test:!0}),D=await oa.get({fs:e,gitdir:u}),B=h||I&&await D.get(`branch.${I}.remote`)||"origin",W=m||await D.get(`remote.${B}.url`);if(typeof W>"u")throw new Ci("remote OR url");const Q=f||I&&await D.get(`branch.${I}.merge`)||c||"HEAD";g===void 0&&(g=await D.get("http.corsProxy"));const M=Ew.getRemoteHelperFor({url:W}),K=await M.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:W,headers:C,protocolVersion:1}),U=K.auth,me=K.refs;if(me.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(w!==null&&!K.capabilities.has("shallow"))throw new Pu("shallow","depth");if(v!==null&&!K.capabilities.has("deepen-since"))throw new Pu("deepen-since","since");if(_.length>0&&!K.capabilities.has("deepen-not"))throw new Pu("deepen-not","exclude");if(x===!0&&!K.capabilities.has("deepen-relative"))throw new Pu("deepen-relative","relative");const{oid:se,fullref:ne}=Ot.resolveAgainstMap({ref:Q,map:me});for(const Oe of me.keys())Oe===ne||Oe==="HEAD"||Oe.startsWith("refs/heads/")||S&&Oe.startsWith("refs/tags/")||me.delete(Oe);const ee=w8([...K.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${Cw.agent}`]);x&&ee.push("deepen-relative");const ae=E?[se]:me.values(),G=E?[I]:await Ot.listRefs({fs:e,gitdir:u,filepath:"refs"});let Y=[];for(let Oe of G)try{Oe=await Ot.expand({fs:e,gitdir:u,ref:Oe});const Te=await Ot.resolve({fs:e,gitdir:u,ref:Oe});await a4({fs:e,cache:t,gitdir:u,oid:Te})&&Y.push(Te)}catch{}Y=[...new Set(Y)];const J=await Lm.read({fs:e,gitdir:u}),re=K.capabilities.has("shallow")?[...J]:[],we=Dee({capabilities:ee,wants:ae,haves:Y,shallows:re,depth:w,since:v,exclude:_}),ke=Gt.from(await Kb(we)),Me=await M.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:W,auth:U,body:[ke],headers:C}),Pe=await Oee(Me.body);Me.headers&&(Pe.headers=Me.headers);for(const Oe of Pe.shallows)if(!J.has(Oe))try{const{object:Te}=await Lr({fs:e,cache:t,gitdir:u,oid:Oe}),z=new Fr(Te),Ce=await Promise.all(z.headers().parent.map(ce=>a4({fs:e,cache:t,gitdir:u,oid:ce})));Ce.length===0||Ce.every(ce=>ce)||J.add(Oe)}catch{J.add(Oe)}for(const Oe of Pe.unshallows)J.delete(Oe);if(await Lm.write({fs:e,gitdir:u,oids:J}),E){const Oe=new Map([[ne,se]]),Te=new Map;let z=10,Ce=ne;for(;z--;){const ie=K.symrefs.get(Ce);if(ie===void 0)break;Te.set(Ce,ie),Ce=ie}const Ne=me.get(Ce);Ne&&Oe.set(Ce,Ne);const{pruned:ce}=await Ot.updateRemoteRefs({fs:e,gitdir:u,remote:B,refs:Oe,symrefs:Te,tags:S,prune:A});A&&(Pe.pruned=ce)}else{const{pruned:Oe}=await Ot.updateRemoteRefs({fs:e,gitdir:u,remote:B,refs:me,symrefs:K.symrefs,tags:S,prune:A,pruneTags:O});A&&(Pe.pruned=Oe)}if(Pe.HEAD=K.symrefs.get("HEAD"),Pe.HEAD===void 0){const{oid:Oe}=Ot.resolveAgainstMap({ref:"HEAD",map:me});for(const[Te,z]of me.entries())if(Te!=="HEAD"&&z===Oe){Pe.HEAD=Te;break}}const Re=ne.startsWith("refs/tags")?"tag":"branch";if(Pe.FETCH_HEAD={oid:se,description:`${Re} '${nd(ne)}' of ${W}`},r||a){const Oe=_8(Pe.progress);Q0(Oe,async Te=>{if(a&&await a(Te),r){const z=Te.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);z&&await r({phase:z[1].trim(),loaded:parseInt(z[2],10),total:parseInt(z[3],10)})}})}const Ae=Gt.from(await Kb(Pe.packfile));if(Me.body.error)throw Me.body.error;const He=Ae.slice(-20).toString("hex"),st={defaultBranch:Pe.HEAD,fetchHead:Pe.FETCH_HEAD.oid,fetchHeadDescription:Pe.FETCH_HEAD.description};if(Pe.headers&&(st.headers=Pe.headers),A&&(st.pruned=Pe.pruned),He!==""&&!Nee(Ae)){st.packfile=`objects/pack/pack-${He}.pack`;const Oe=At.join(u,st.packfile);await e.write(Oe,Ae);const Te=Ce=>Lr({fs:e,cache:t,gitdir:u,oid:Ce}),z=await nh.fromPack({pack:Ae,getExternalRefDelta:Te,onProgress:r});await e.write(Oe.replace(/\.pack$/,".idx"),await z.toBuffer())}return st}async function S8({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function jee({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:u,dir:c,gitdir:f,url:h,corsProxy:m,ref:g,remote:w,depth:v,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:A,headers:O}){try{if(await S8({fs:e,gitdir:f}),await g8({fs:e,gitdir:f,remote:w,url:h,force:!1}),m){const B=await oa.get({fs:e,gitdir:f});await B.set("http.corsProxy",m),await oa.save({fs:e,gitdir:f,config:B})}const{defaultBranch:I,fetchHead:D}=await pk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:f,ref:g,remote:w,corsProxy:m,depth:v,since:_,exclude:x,relative:S,singleBranch:E,headers:O,tags:!A});if(D===null)return;g=g||I,g=g.replace("refs/heads/",""),await hk({fs:e,cache:t,onProgress:r,onPostCheckout:u,dir:c,gitdir:f,ref:g,remote:w,noCheckout:C})}catch(I){throw await e.rmdir(f,{recursive:!0,maxRetries:10}).catch(()=>{}),I}}async function Mee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c=At.join(u,".git"),url:f,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:w=void 0,since:v=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:A={},cache:O={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),E||Je("dir",u),Je("url",f),await jee({fs:new nn(e),cache:O,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:u,gitdir:c,url:f,corsProxy:h,ref:m,remote:g,depth:w,since:v,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:A})}catch(I){throw I.caller="git.clone",I}}async function Pee({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:u=!1,dryRun:c=!1,noUpdateBranch:f=!1,ref:h,parent:m,tree:g,cache:w={}}){try{Je("fs",e),u||Je("message",a),s&&Je("onSign",t);const v=new nn(e);return await Sw({fs:v,cache:w,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:u,dryRun:c,noUpdateBranch:f,ref:h,parent:m,tree:g})}catch(v){throw v.caller="git.commit",v}}async function Fee({fs:e,dir:t,gitdir:n=At.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Je("fs",e),Je("gitdir",n),await yc({fs:new nn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Lee({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Ot.exists({fs:e,gitdir:t,ref:n}))throw new yr(n);const a=await Ot.expand({fs:e,gitdir:t,ref:n}),i=await yc({fs:e,gitdir:t,fullname:!0});if(a===i){const u=await Ot.resolve({fs:e,gitdir:t,ref:a});await Ot.writeRef({fs:e,gitdir:t,ref:"HEAD",value:u})}await Ot.deleteRef({fs:e,gitdir:t,ref:a});const o=nd(n),s=await oa.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await oa.save({fs:e,gitdir:t,config:s})}async function $ee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Lee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Bee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{Je("fs",e),Je("ref",r),await Ot.deleteRef({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function zee({fs:e,gitdir:t,remote:n}){const r=await oa.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await oa.save({fs:e,gitdir:t,config:r})}async function Uee({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("remote",r),await zee({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function qee({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Ot.deleteRef({fs:e,gitdir:t,ref:n})}async function Hee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await qee({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Vee({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Gee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(At.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const u=`${n}/objects/pack/${s}`,c=await fk({fs:e,cache:t,filename:u,getExternalRefDelta:a});if(c.error)throw new Cn(c.error);for(const f of c.offsets.keys())f.startsWith(r)&&i.push(f)}return i}async function Wee({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>Lr({fs:e,cache:t,gitdir:n,oid:s}),i=await Vee({fs:e,gitdir:n,oid:r}),o=await Gee({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new P0("oids",r,i):new yr(`an object matching "${r}"`)}async function Kee({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Wee({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function Zee({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ot.expand({fs:new nn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function mk({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,u)=>({index:u,oid:s}));for(;o.length;){const s=new Set;for(const{oid:c,index:f}of o)a[c]||(a[c]=new Set),a[c].add(f),a[c].size===i&&s.add(c);if(s.size>0)return[...s];const u=new Map;for(const{oid:c,index:f}of o)try{const{object:h}=await Lr({fs:e,cache:t,gitdir:n,oid:c}),m=Fr.from(h),{parent:g}=m.parseHeaders();for(const w of g)(!a[w]||!a[w].has(f))&&u.set(w+":"+f,{oid:w,index:f})}catch{}o=Array.from(u.values())}return[]}const PS=/^.*(\r?\n|$)/gm;function Yee({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(PS),u=a.match(PS),c=o.match(PS),f=mQ(s,u,c),h=7;let m="",g=!0;for(const w of f)w.ok&&(m+=w.ok.join("")),w.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=w.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=w.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function Xee({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:u="ours",baseName:c="base",theirName:f="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const w=yo({ref:i}),v=yo({ref:o}),_=yo({ref:s}),x=[],S=[],E=[],C=[],A=await Yu({fs:e,cache:t,dir:n,gitdir:r,trees:[w,v,_],map:async function(O,[I,D,B]){const W=qb(O),Q=await Wb(I,D),M=await Wb(B,D);switch(`${Q}-${M}`){case"false-false":return{mode:await D.mode(),path:W,oid:await D.oid(),type:await D.type()};case"false-true":return B?{mode:await B.mode(),path:W,oid:await B.oid(),type:await B.type()}:void 0;case"true-false":return I?{mode:await I.mode(),path:W,oid:await I.oid(),type:await I.type()}:void 0;case"true-true":{if(I&&D&&B&&await I.type()==="blob"&&await D.type()==="blob"&&await B.type()==="blob")return Jee({fs:e,gitdir:r,path:W,ours:I,base:D,theirs:B,ourName:u,baseName:c,theirName:f,mergeDriver:g}).then(async K=>{if(K.cleanMerge)m||a.insert({filepath:O,oid:K.mergeResult.oid,stage:0});else if(x.push(O),S.push(O),!m){const U=await D.oid(),me=await I.oid(),se=await B.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:U,stage:1}),a.insert({filepath:O,oid:me,stage:2}),a.insert({filepath:O,oid:se,stage:3})}return K.mergeResult});if(D&&!I&&B&&await D.type()==="blob"&&await B.type()==="blob"){if(x.push(O),E.push(O),!m){const K=await D.oid(),U=await B.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:K,stage:1}),a.insert({filepath:O,oid:U,stage:3})}return{mode:await B.mode(),oid:await B.oid(),type:"blob",path:W}}if(D&&I&&!B&&await D.type()==="blob"&&await I.type()==="blob"){if(x.push(O),C.push(O),!m){const K=await D.oid(),U=await I.oid();a.delete({filepath:O}),a.insert({filepath:O,oid:K,stage:1}),a.insert({filepath:O,oid:U,stage:2})}return{mode:await I.mode(),oid:await I.oid(),type:"blob",path:W}}if(D&&!I&&!B&&await D.type()==="blob")return;throw new Ih}}},reduce:x.length!==0&&(!n||m)?void 0:async(O,I)=>{const D=I.filter(Boolean);if(O&&!(O&&O.type==="tree"&&D.length===0)){if(D.length>0){const W=new Ti(D).toObject(),Q=await Ni({fs:e,gitdir:r,type:"tree",object:W,dryRun:h});O.oid=Q}return O}}});return x.length!==0?(n&&!m&&await Yu({fs:e,cache:t,dir:n,gitdir:r,trees:[yo({ref:A.oid})],map:async function(O,[I]){const D=`${n}/${O}`;if(await I.type()==="blob"){const B=await I.mode(),W=new TextDecoder().decode(await I.content());await e.write(D,W,{mode:B})}return!0}}),new Oh(x,S,E,C)):A.oid}async function Jee({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:u,dryRun:c,mergeDriver:f=Yee}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Gt.from(await r.content()).toString("utf8"),w=Gt.from(await a.content()).toString("utf8"),v=Gt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await f({branches:[u,o,s],contents:[w,g,v],path:n}),S=await Ni({fs:e,gitdir:t,type:"blob",object:Gt.from(_,"utf8"),dryRun:c});return{cleanMerge:x,mergeResult:{mode:m,path:n,oid:S,type:h}}}async function E8({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:w,onSign:v,mergeDriver:_}){a===void 0&&(a=await yc({fs:e,gitdir:r,fullname:!0})),a=await Ot.expand({fs:e,gitdir:r,ref:a}),i=await Ot.expand({fs:e,gitdir:r,ref:i});const x=await Ot.resolve({fs:e,gitdir:r,ref:a}),S=await Ot.resolve({fs:e,gitdir:r,ref:i}),E=await mk({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new Ih;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(o&&C===x)return!u&&!c&&await Ot.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new B0;const A=await Aa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async I=>Xee({fs:e,cache:t,dir:n,gitdir:r,index:I,ourOid:x,theirOid:S,baseOid:C,ourName:nd(a),baseName:"base",theirName:nd(i),dryRun:u,abortOnConflict:f,mergeDriver:_}));if(A instanceof Oh)throw A;return h||(h=`Merge branch '${nd(i)}' into ${nd(a)}`),{oid:await Sw({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:A,parent:[x,S],author:m,committer:g,signingKey:w,onSign:v,dryRun:u,noUpdateBranch:c}),tree:A,mergeCommit:!0}}}async function C8({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:u,gitdir:c,ref:f,url:h,remote:m,remoteRef:g,prune:w,pruneTags:v,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:A,committer:O,signingKey:I}){try{if(!f){const W=await yc({fs:e,gitdir:c});if(!W)throw new Ci("ref");f=W}const{fetchHead:D,fetchHeadDescription:B}=await pk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:c,corsProxy:S,ref:f,url:h,remote:m,remoteRef:g,singleBranch:E,headers:C,prune:w,pruneTags:v});await E8({fs:e,cache:t,gitdir:c,ours:f,theirs:D,fastForward:_,fastForwardOnly:x,message:`Merge ${B}`,author:A,committer:O,signingKey:I,dryRun:!1,noUpdateBranch:!1}),await hk({fs:e,cache:t,onProgress:r,dir:u,gitdir:c,ref:f,remote:m,noCheckout:!1})}catch(D){throw D.caller="git.pull",D}}async function Qee({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,corsProxy:g,singleBranch:w,headers:v={},cache:_={}}){try{Je("fs",e),Je("http",t),Je("gitdir",u);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await C8({fs:new nn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:w,headers:v,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function ete({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:w=null,since:v=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:A=!1,pruneTags:O=!1,cache:I={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),await pk({fs:new nn(e),cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:u,ref:c,remote:f,remoteRef:h,url:m,corsProxy:g,depth:w,since:v,exclude:_,relative:x,tags:S,singleBranch:E,headers:C,prune:A,pruneTags:O})}catch(D){throw D.caller="git.fetch",D}}async function tte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await mk({fs:new nn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function k8({fs:e,filepath:t}){if(await e.exists(At.join(t,".git")))return t;{const n=th(t);if(n===t)throw new yr(`git root for ${t}`);return k8({fs:e,filepath:n})}}async function nte({fs:e,filepath:t}){try{return Je("fs",e),Je("filepath",t),await k8({fs:new nn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function rte({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await Fm({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function ate({fs:e,gitdir:t,path:n}){return(await oa.get({fs:e,gitdir:t})).getall(n)}async function ite({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await ate({fs:new nn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function ote({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Je("http",e),Je("url",i);const c=await Ew.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),f={capabilities:[...c.capabilities]};for(const[h,m]of c.refs){const g=h.split("/"),w=g.pop();let v=f;for(const _ of g)v[_]=v[_]||{},v=v[_];v[w]=m}for(const[h,m]of c.symrefs){const g=h.split("/"),w=g.pop();let v=f;for(const _ of g)v[_]=v[_]||{},v=v[_];v[w]=m}return f}catch(u){throw u.caller="git.getRemoteInfo",u}}function A8(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const u=i.replace("^{}",""),c=a[a.length-1],f=c.ref===u?c:a.find(h=>h.ref===u);if(f===void 0)throw new Error("I did not expect this to happen");f.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function ste({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2}){try{Je("http",e),Je("url",i);const f=await Ew.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(f.protocolVersion===2)return{protocolVersion:f.protocolVersion,capabilities:f.capabilities2};const h={};for(const m of f.capabilities){const[g,w]=m.split("=");w?h[g]=w:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:A8(f,void 0,!0,!0)}}catch(c){throw c.caller="git.getRemoteInfo2",c}}async function lte({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Nh.wrap({type:e,object:t})),r=await Fl(t)),{oid:r,object:t}}async function ute({object:e}){try{Je("object",e),typeof e=="string"?e=Gt.from(e,"utf8"):e=Gt.from(e);const t="blob",{oid:n,object:r}=await lte({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function cte({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=At.join(r,i);const o=await e.read(i),s=c=>Lr({fs:e,cache:t,gitdir:a,oid:c}),u=await nh.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await u.toBuffer()),{oids:[...u.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function dte({fs:e,onProgress:t,dir:n,gitdir:r=At.join(n,".git"),filepath:a,cache:i={}}){try{return Je("fs",e),Je("dir",n),Je("gitdir",n),Je("filepath",a),await cte({fs:new nn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function fte({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:At.join(n,".git"),defaultBranch:a="master"}){try{return Je("fs",e),Je("gitdir",r),t||Je("dir",n),await S8({fs:new nn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function T8({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await Lm.read({fs:e,gitdir:n});if(!r)throw new Ci("oid");if(!a)throw new Ci("ancestor");if(r===a)return!1;const s=[r],u=new Set;let c=0;for(;s.length;){if(c++===i)throw new U0(i);const f=s.shift(),{type:h,object:m}=await Lr({fs:e,cache:t,gitdir:n,oid:f});if(h!=="commit")throw new fi(f,h,"commit");const g=Fr.from(m).parse();for(const w of g.parent)if(w===a)return!0;if(!o.has(f))for(const w of g.parent)u.has(w)||(s.push(w),u.add(w))}return!1}async function hte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),Je("ancestor",a),await T8({fs:new nn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function pte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r),jh.isIgnored({fs:new nn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function mte({fs:e,dir:t,gitdir:n=At.join(t,".git"),remote:r}){try{return Je("fs",e),Je("gitdir",n),Ot.listBranches({fs:new nn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function gte({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Ot.resolve({gitdir:t,fs:e,ref:n}),i=[];return await R8({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Aa.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function R8({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await Mh({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await R8({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:At.join(i,s.path)}):a.push(At.join(i,s.path))}async function yte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),await gte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function bte({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Ot.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof yr)return[]}return(await Mh({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function vte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await bte({fs:new nn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function wte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("gitdir",n),Ot.listRefs({fs:new nn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function _te({fs:e,gitdir:t}){const n=await oa.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function xte({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),await _te({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function Ste(e){const t=Xr.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const u of o){const[c,f]=u.split(":");c==="symref-target"?s.target=f:c==="peeled"&&(s.peeled=f)}n.push(s)}return n}async function Ete({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(Xr.encode(`command=ls-refs
`)),r.push(Xr.encode(`agent=${Cw.agent}
`)),(n||t||e)&&r.push(Xr.delim()),n&&r.push(Xr.encode("peel")),t&&r.push(Xr.encode("symrefs")),e&&r.push(Xr.encode(`ref-prefix ${e}`)),r.push(Xr.flush()),r}async function Cte({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:u=2,prefix:c,symrefs:f,peelTags:h}){try{Je("http",e),Je("url",i);const m=await Zb.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:u});if(m.protocolVersion===1)return A8(m,c,f,h);const g=await Ete({prefix:c,symrefs:f,peelTags:h}),w=await Zb.connect({http:e,auth:m.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return Ste(w.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function kte({fs:e,dir:t,gitdir:n=At.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),Ot.listTags({fs:new nn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Ate(e,t){return e.committer.timestamp-t.committer.timestamp}const Tte="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function i4({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Tte)return;const i=r;let o;const s=await ih({fs:e,cache:t,gitdir:n,oid:r}),u=s.tree;return a===s.oid?o=s.path:(o=await N8({fs:e,cache:t,gitdir:n,tree:u,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function N8({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const u=r.entries().map(function(c){let f;return c.oid===a?(f=At.join(s,c.path),o.push(f)):c.type==="tree"&&(f=Lr({fs:e,cache:t,gitdir:n,oid:c.oid}).then(function({object:h}){return N8({fs:e,cache:t,gitdir:n,tree:Ti.from(h),fileId:a,oid:i,filepaths:o,parentPath:At.join(s,c.path)})})),f});return await Promise.all(u),o}async function Rte({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u}){const c=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),f=[],h=await Lm.read({fs:e,gitdir:n}),m=await Ot.resolve({fs:e,gitdir:n,ref:a}),g=[await sh({fs:e,cache:t,gitdir:n,oid:m})];let w,v,_;function x(S){_&&r&&f.push(S)}for(;g.length>0;){const S=g.pop();if(c!==void 0&&S.commit.committer.timestamp<=c)break;if(r){let E;try{E=await X0({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),v&&w!==E&&f.push(v),w=E,v=S,_=!0}catch(C){if(C instanceof yr){let A=u&&w;if(A&&(A=await i4({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:w}),A))if(Array.isArray(A)){if(v){const O=await i4({fs:e,cache:t,gitdir:n,oid:v.commit.tree,fileId:w});if(Array.isArray(O))if(A=A.filter(I=>O.indexOf(I)===-1),A.length===1)A=A[0],r=A,v&&f.push(v);else{A=!1,v&&f.push(v);break}}}else r=A,v&&f.push(v);if(!A){if(_&&w&&(f.push(v),!s))break;if(!s&&!u)throw C}v=S,_=!1}else throw C}}else f.push(S);if(i!==void 0&&f.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await sh({fs:e,cache:t,gitdir:n,oid:E});g.map(A=>A.oid).includes(C.oid)||g.push(C)}g.length===0&&x(S),g.sort((E,C)=>Ate(E.commit,C.commit))}return f}async function Nte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:u,cache:c={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",a),await Rte({fs:new nn(e),cache:c,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:u})}catch(f){throw f.caller="git.log",f}}async function Ite({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:u=!1,noUpdateBranch:c=!1,abortOnConflict:f=!0,message:h,author:m,committer:g,signingKey:w,cache:v={},mergeDriver:_}){try{Je("fs",e),w&&Je("onSign",t);const x=new nn(e),S=await Xu({fs:x,gitdir:r,author:m});if(!S&&(!s||!o))throw new Za("author");const E=await oh({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new Za("committer");return await E8({fs:x,cache:v,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:u,noUpdateBranch:c,abortOnConflict:f,message:h,author:S,committer:E,signingKey:w,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const Ote={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function I8({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new Wj,o=[];function s(f,h){const m=Gt.from(f,h);o.push(m),i.update(m)}async function u({stype:f,object:h}){const m=Ote[f];let g=h.length,w=g>15?128:0;const v=g&15;g=g>>>4;let _=(w|m|v).toString(16);for(s(_,"hex");w;)w=g>127?128:0,_=w|g&127,s(nE(2,_),"hex"),g=g>>>7;s(Gt.from(await c8(h)))}s("PACK"),s("00000002","hex"),s(nE(8,a.length),"hex");for(const f of a){const{type:h,object:m}=await Lr({fs:e,cache:t,gitdir:r,oid:f});await u({object:m,stype:h})}const c=i.digest();return o.push(c),o}async function Dte({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await I8({fs:e,cache:t,gitdir:n,oids:r}),o=Gt.from(await Kb(i)),u=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(At.join(n,`objects/pack/${u}`),o),{filename:u}):{filename:u,packfile:new Uint8Array(o)}}async function jte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Dte({fs:new nn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function Mte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u=At.join(s,".git"),ref:c,url:f,remote:h,remoteRef:m,prune:g=!1,pruneTags:w=!1,fastForward:v=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:A,signingKey:O,cache:I={}}){try{Je("fs",e),Je("gitdir",u);const D=new nn(e),B=await Xu({fs:D,gitdir:u,author:C});if(!B)throw new Za("author");const W=await oh({fs:D,gitdir:u,author:B,committer:A});if(!W)throw new Za("committer");return await C8({fs:D,cache:I,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:u,ref:c,url:f,remote:h,remoteRef:m,fastForward:v,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:B,committer:W,signingKey:O,prune:g,pruneTags:w})}catch(D){throw D.caller="git.pull",D}}async function Pte({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),start:a,finish:i}){const o=await Lm.read({fs:e,gitdir:r}),s=new Set,u=new Set;for(const h of a)s.add(await Ot.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Ot.resolve({fs:e,gitdir:r,ref:h});u.add(m)}catch{}const c=new Set;async function f(h){c.add(h);const{type:m,object:g}=await Lr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const v=si.from(g).headers().object;return f(v)}if(m!=="commit")throw new fi(h,m,"commit");if(!o.has(h)){const v=Fr.from(g).headers().parent;for(h of v)!u.has(h)&&!c.has(h)&&await f(h)}}for(const h of s)await f(h);return c}async function FS({fs:e,cache:t,dir:n,gitdir:r=At.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:u,object:c}=await Lr({fs:e,cache:t,gitdir:r,oid:s});if(u==="tag"){const h=si.from(c).headers().object;await o(h)}else if(u==="commit"){const h=Fr.from(c).headers().tree;await o(h)}else if(u==="tree"){const f=Ti.from(c);for(const h of f)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function Fte(e){const t={};let n="";const r=Xr.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new H0('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),u=o.slice(3);let c=u.indexOf(" ");c===-1&&(c=u.length);const f=u.slice(0,c),h=u.slice(c+1);t.refs[f]={ok:s==="ok",error:h}}return t}async function Lte({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(Xr.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(Xr.flush()),n}async function $te({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:u,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:w=!1,delete:v=!1,corsProxy:_,headers:x={}}){const S=f||await yc({fs:e,gitdir:c});if(typeof S>"u")throw new Ci("ref");const E=await oa.get({fs:e,gitdir:c});m=m||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof C>"u")throw new Ci("remote OR url");const A=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Ci("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const O=await Ot.expand({fs:e,gitdir:c,ref:S}),I=v?"0000000000000000000000000000000000000000":await Ot.resolve({fs:e,gitdir:c,ref:O}),D=Ew.getRemoteHelperFor({url:C}),B=await D.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),W=B.auth;let Q;if(!A)Q=O;else try{Q=await Ot.expandAgainstMap({ref:A,map:B.refs})}catch(J){if(J instanceof yr)Q=A.startsWith("refs/")?A:`refs/heads/${A}`;else throw J}const M=B.refs.get(Q)||"0000000000000000000000000000000000000000";if(u&&!await u({remote:m,url:C,localRef:{ref:v?"(delete)":O,oid:I},remoteRef:{ref:Q,oid:M}}))throw new Dh;const K=!B.capabilities.has("no-thin");let U=new Set;if(!v){const J=[...B.refs.values()];let re=new Set;if(M!=="0000000000000000000000000000000000000000"){const we=await mk({fs:e,cache:t,gitdir:c,oids:[I,M]});for(const ke of we)J.push(ke);K&&(re=await FS({fs:e,cache:t,gitdir:c,oids:we}))}if(!J.includes(I)){const we=await Pte({fs:e,cache:t,gitdir:c,start:[I],finish:J});U=await FS({fs:e,cache:t,gitdir:c,oids:we})}if(K){try{const we=await Ot.resolve({fs:e,gitdir:c,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:ke}=await Ot.resolveAgainstMap({ref:we.replace(`refs/remotes/${m}/`,""),fullref:we,map:B.refs}),Me=[ke];for(const Pe of await FS({fs:e,cache:t,gitdir:c,oids:Me}))re.add(Pe)}catch{}for(const we of re)U.delete(we)}if(I===M&&(w=!0),!w){if(O.startsWith("refs/tags")&&M!=="0000000000000000000000000000000000000000")throw new ah("tag-exists");if(I!=="0000000000000000000000000000000000000000"&&M!=="0000000000000000000000000000000000000000"&&!await T8({fs:e,cache:t,gitdir:c,oid:I,ancestor:M,depth:-1}))throw new ah("not-fast-forward")}}const me=w8([...B.capabilities],["report-status","side-band-64k",`agent=${Cw.agent}`]),se=await Lte({capabilities:me,triplets:[{oldoid:M,oid:I,fullRef:Q}]}),ne=v?[]:await I8({fs:e,cache:t,gitdir:c,oids:[...U]}),ee=await D.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:W,headers:x,body:[...se,...ne]}),{packfile:ae,progress:G}=await x8.demux(ee.body);if(a){const J=_8(G);Q0(J,async re=>{await a(re)})}const Y=await Fte(ae);if(ee.headers&&(Y.headers=ee.headers),m&&Y.ok&&Y.refs[Q].ok&&!O.startsWith("refs/tags")){const J=`refs/remotes/${m}/${Q.replace("refs/heads","")}`;v?await Ot.deleteRef({fs:e,gitdir:c,ref:J}):await Ot.writeRef({fs:e,gitdir:c,ref:J,value:I})}if(Y.ok&&Object.values(Y.refs).every(J=>J.ok))return Y;{const J=Object.entries(Y.refs).filter(([re,we])=>!we.ok).map(([re,we])=>`
  - ${re}: ${we.error}`).join("");throw new z0(J,Y)}}async function Bte({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:u,gitdir:c=At.join(u,".git"),ref:f,remoteRef:h,remote:m="origin",url:g,force:w=!1,delete:v=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",c),await $te({fs:new nn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:c,ref:f,remoteRef:h,remote:m,url:g,force:w,delete:v,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function O8({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=si.from(i).parse().object,O8({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new fi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function D8({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await X0({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await O8({fs:e,cache:t,gitdir:n,oid:r})}async function zte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await D8({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function j8({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await sh({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Ute({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Ot.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await D8({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function qte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oid",a),await Ute({fs:new nn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function Hte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Je("fs",e),Je("gitdir",n),Je("oid",r);const u=new nn(e);i!==void 0&&(r=await X0({fs:u,cache:s,gitdir:n,oid:r,filepath:i}));const f=await Lr({fs:u,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(f.oid=r,a==="parsed")switch(f.format="parsed",f.type){case"commit":f.object=Fr.from(f.object).parse();break;case"tree":f.object=Ti.from(f.object).entries();break;case"blob":o?f.object=f.object.toString(o):(f.object=new Uint8Array(f.object),f.format="content");break;case"tag":f.object=si.from(f.object).parse();break;default:throw new fi(f.oid,f.type,"blob|commit|tag|tree")}else(f.format==="deflated"||f.format==="wrapped")&&(f.type=f.format);return f}catch(u){throw u.caller="git.readObject",u}}async function Vte({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Lr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new fi(r,a,"tag");const o=si.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function Gte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Vte({fs:new nn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function Wte({fs:e,dir:t,gitdir:n=At.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Mh({fs:new nn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function Kte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r),await Aa.acquire({fs:new nn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function Zte({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u}){let c;try{c=await Ot.resolve({gitdir:r,fs:e,ref:a})}catch(w){if(!(w instanceof yr))throw w}let h=(await Mh({fs:e,gitdir:r,oid:c||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(w=>w.path!==i);const m=await J0({fs:e,gitdir:r,tree:h});return await Sw({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:c&&[c],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:u})}async function Yte({fs:e,onSign:t,dir:n,gitdir:r=At.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:u,cache:c={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i);const f=new nn(e),h=await Xu({fs:f,gitdir:r,author:o});if(!h)throw new Za("author");const m=await oh({fs:f,gitdir:r,author:h,committer:s});if(!m)throw new Za("committer");return await Zte({fs:f,cache:c,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:u})}catch(f){throw f.caller="git.removeNote",f}}async function Xte({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==js.clean(r))throw new Zo(r,js.clean(r));if(n!==js.clean(n))throw new Zo(n,js.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await Ot.exists({fs:e,gitdir:t,ref:o}))throw new ns("branch",r,!1);const u=await Ot.resolve({fs:e,gitdir:t,ref:i,depth:1});await Ot.writeRef({fs:e,gitdir:t,ref:o,value:u}),await Ot.deleteRef({fs:e,gitdir:t,ref:i});const f=await yc({fs:e,gitdir:t,fullname:!0})===i;(a||f)&&await Ot.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Jte({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oldref",a),await Xte({fs:new nn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function M8({gitdir:e,type:t,object:n}){return Fl(Nh.wrap({type:t,object:n}))}async function Qte({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const o=new nn(e);let s,u;try{s=await Ot.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await X0({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let c={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const f=t&&await o.read(At.join(t,r));f&&(u=await M8({gitdir:n,type:"blob",object:f}),s===u&&(c=await o.lstat(At.join(t,r)))),await Aa.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:c,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function ene({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,depth:a}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await Ot.resolve({fs:new nn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function tne({fs:e,dir:t,gitdir:n=At.join(t,".git"),path:r,value:a,append:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("path",r);const o=new nn(e),s=await oa.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await oa.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function P8({fs:e,gitdir:t,commit:n}){const r=Fr.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Yb{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=Yb.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const nne={stage:Rh,workdir:Y0};let LS;async function lh(e,t){return LS===void 0&&(LS=new Pm),LS.acquire(e,t)}async function rne(e,t,n,r,a=null){const i=At.join(n,r),o=await e.lstat(i);if(!o)throw new yr(i);if(o.isDirectory())throw new Cn(`${i}: file expected, but found directory`);const s=a?await a8({fs:e,gitdir:t,oid:a}):void 0;let u=s?a:void 0;return s||await lh({fs:e,gitdir:t,currentFilepath:i},async()=>{const c=o.isSymbolicLink()?await e.readlink(i).then(d8):await e.read(i);if(c===null)throw new yr(i);u=await Ni({fs:e,gitdir:t,type:"blob",object:c})}),u}async function ane({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await J0({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await rne(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function o4({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?nne[g]():g),o=[],f=await Yu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[w,v])=>{if(!(g==="."||await jh.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&v)return(!w||await w.oid()!==await v.oid()&&await v.oid()!==void 0)&&o.push([w,v]),{mode:await v.mode(),path:g,oid:await v.oid(),type:await v.type()}},reduce:async(g,w)=>(w=w.filter(Boolean),g?(g.children=w,g):w.length>0?w:void 0),iterate:async(g,w)=>{const v=[];for(const _ of w){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?v.push(_):o.push([null,S])):x&&(S?v.push(_):o.push([x,null]))}return v.length?Promise.all(v.map(g)):[]}});if(o.length===0||f.length===0)return null;const m=(await ane({fs:e,dir:t,gitdir:n,entries:f})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return J0({fs:e,gitdir:n,tree:m})}async function ine({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],u=await Yu({fs:e,cache:{},dir:t,gitdir:n,trees:[yo({ref:a}),yo({ref:r})],map:async(c,[f,h])=>{if(c==="."||await jh.isIgnored({fs:e,dir:t,gitdir:n,filepath:c}))return;const m=h?await h.type():await f.type();if(m!=="tree"&&m!=="blob")return;if(!h&&f){const w=m==="tree"?"rmdir":"rm";return m==="tree"&&o.push(c),m==="blob"&&i&&s.push({filepath:c,oid:await f.oid()}),{method:w,filepath:c}}const g=await h.oid();if(!f||await f.oid()!==g)return m==="tree"?{method:"mkdir",filepath:c}:(i&&s.push({filepath:c,oid:g,stats:await e.lstat(At.join(t,c))}),{method:"write",filepath:c,oid:g})}});await lh({fs:e,gitdir:n,dirRemoved:o,ops:u},async()=>{for(const c of u){const f=At.join(t,c.filepath);switch(c.method){case"rmdir":await e.rmdir(f);break;case"mkdir":await e.mkdir(f);break;case"rm":await e.rm(f);break;case"write":if(!o.some(h=>f.startsWith(h))){const{object:h}=await Lr({fs:e,cache:{},gitdir:n,oid:c.oid});await e.exists(f)&&await e.rm(f),await e.write(f,h)}break}}}),await Aa.acquire({fs:e,gitdir:n,cache:{}},async c=>{s.forEach(({filepath:f,stats:h,oid:m})=>{c.insert({filepath:f,stats:h,oid:m})})})}class Nl{constructor({fs:t,dir:n,gitdir:r=At.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return At.join(this.gitdir,Nl.refStash)}get refLogsStashPath(){return At.join(this.gitdir,Nl.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Xu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new Za("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return P8({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Zo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?sh({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Ot.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Nl.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Yb.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await lh({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Yb.getStashReflogEntry(r,t)}}async function one({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Nl({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await yc({fs:e,gitdir:n,fullname:!1}),o=await Ot.resolve({fs:e,gitdir:n,ref:"HEAD"}),u=(await j8({fs:e,dir:t,gitdir:n,oid:o})).commit.message,c=[o];let f=null,h=yo({ref:"HEAD"});const m=await o4({fs:e,dir:t,gitdir:n,treePair:[yo({ref:"HEAD"}),"stage"]});if(m){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:c});c.push(_),f=m,h=Rh()}const g=await o4({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[c[c.length-1]]});c.push(_),f=g}if(!f||!m&&!g)throw new yr("changes, nothing to stash");const w=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${u}`,v=await a.writeStashCommit({message:w,tree:f,parent:c});return await a.writeStashRef(v),await a.writeStashReflogEntry({stashCommit:v,message:w}),await b8({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),v}async function F8({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Nl({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const c=(await sh({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await ine({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:c})}}async function L8({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Nl({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await lh(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const u=a.refLogsStashPath;await lh({reflogEntries:s,stashReflogPath:u,stashMgr:a},async()=>{if(s.length){await e.write(u,s.join(`
`),"utf8");const c=s[s.length-1].split(" ")[1];await a.writeStashRef(c)}else await e.rm(u)})}async function sne({fs:e,dir:t,gitdir:n}){return new Nl({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function lne({fs:e,dir:t,gitdir:n}){const r=new Nl({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await lh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function une({fs:e,dir:t,gitdir:n,refIdx:r=0}){await F8({fs:e,dir:t,gitdir:n,refIdx:r}),await L8({fs:e,dir:t,gitdir:n,refIdx:r})}async function cne({fs:e,dir:t,gitdir:n=At.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Je("fs",e),Je("dir",t),Je("gitdir",n),Je("op",r);const o={push:one,apply:F8,drop:L8,list:sne,clear:lne,pop:une},s=["apply","drop","pop"];try{const u=new nn(e);["refs","logs","logs/refs"].map(h=>At.join(n,h)).forEach(async h=>{await u.exists(h)||await u.mkdir(h)});const f=o[r];if(f){if(s.includes(r)&&i<0)throw new Zo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await f({fs:u,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(u){throw u.caller="git.stash",u}}async function dne({fs:e,dir:t,gitdir:n=At.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const i=new nn(e);if(await jh.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await fne({fs:i,cache:a,gitdir:n}),u=await $8({fs:i,cache:a,gitdir:n,tree:s,path:r}),c=await Aa.acquire({fs:i,gitdir:n,cache:a},async function(v){for(const _ of v)if(_.path===r)return _;return null}),f=await i.lstat(At.join(t,r)),h=u!==null,m=c!==null,g=f!==null,w=async()=>{if(m&&!Ub(c,f))return c.oid;{const v=await i.read(At.join(t,r)),_=await M8({gitdir:n,type:"blob",object:v});return m&&c.oid===_&&f.size!==-1&&Aa.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:f,oid:_})}),_}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await w()===c.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return u===c.oid,"*deleted";if(h&&g&&!m)return await w()===u?"*undeleted":"*undeletemodified";if(h&&g&&m){const v=await w();return v===u?v===c.oid?"unmodified":"*unmodified":v===c.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function $8({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:u}=await Lr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const c=Ti.from(u);return $8({fs:e,cache:t,gitdir:n,tree:c,path:a})}if(s==="blob")throw new fi(o.oid,s,"blob",a.join("/"))}return null}async function fne({fs:e,cache:t,gitdir:n}){let r;try{r=await Ot.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof yr)return[]}const{tree:a}=await Mh({fs:e,cache:t,gitdir:n,oid:r});return a}async function hne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const u=new nn(e);return await Yu({fs:u,cache:o,dir:t,gitdir:n,trees:[yo({ref:r}),Y0(),Rh()],map:async function(c,[f,h,m]){if(!f&&!m&&h&&!s&&await jh.isIgnored({fs:u,dir:t,filepath:c})||!a.some(O=>y8(c,O)))return null;if(i&&!i(c))return;const[g,w,v]=await Promise.all([f&&f.type(),h&&h.type(),m&&m.type()]),_=[g,w,v].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((w==="tree"||w==="special")&&!_)return;if(v==="commit")return null;if((v==="tree"||v==="special")&&!_)return;const x=g==="blob"?await f.oid():void 0,S=v==="blob"?await m.oid():void 0;let E;g!=="blob"&&w==="blob"&&v!=="blob"?E="42":w==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],A=C.map(O=>C.indexOf(O));return A.shift(),[c,...A]}})}catch(u){throw u.caller="git.statusMatrix",u}}async function pne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,object:a,force:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const o=new nn(e);if(r===void 0)throw new Ci("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await Ot.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await Ot.exists({fs:o,gitdir:n,ref:r}))throw new ns("tag",r);await Ot.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function mne({fs:e,dir:t,gitdir:n=At.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:u,force:c}){try{Je("fs",e),Je("gitdir",n),Je("filepath",a);const f=new nn(e);if(u)return await Aa.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!c){const g=await f.lstat(At.join(t,a));if(g){if(g.isDirectory())throw new Zu("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await f.lstat(At.join(t,a)),!h)throw new yr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Zu("directory")}return await Aa.acquire({fs:f,gitdir:n,cache:r},async function(m){if(!s&&!m.has({filepath:a}))throw new yr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const w=g.isSymbolicLink()?await f.readlink(At.join(t,a)):await f.read(At.join(t,a));i=await Ni({fs:f,gitdir:n,type:"blob",format:"content",object:w})}return m.insert({filepath:a,oid:i,stats:g}),i})}catch(f){throw f.caller="git.updateIndex",f}}function gne(){try{return Cw.version}catch(e){throw e.caller="git.version",e}}async function yne({fs:e,dir:t,gitdir:n=At.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Je("fs",e),Je("gitdir",n),Je("trees",r),await Yu({fs:new nn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(u){throw u.caller="git.walk",u}}async function bne({fs:e,dir:t,gitdir:n=At.join(t,".git"),blob:r}){try{return Je("fs",e),Je("gitdir",n),Je("blob",r),await Ni({fs:new nn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function vne({fs:e,dir:t,gitdir:n=At.join(t,".git"),commit:r}){try{return Je("fs",e),Je("gitdir",n),Je("commit",r),await P8({fs:new nn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function wne({fs:e,dir:t,gitdir:n=At.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const u=new nn(e);if(i==="parsed"){switch(r){case"commit":a=Fr.from(a).toObject();break;case"tree":a=Ti.from(a).toObject();break;case"blob":a=Gt.from(a,s);break;case"tag":a=si.from(a).toObject();break;default:throw new fi(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Ni({fs:u,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(u){throw u.caller="git.writeObject",u}}async function _ne({fs:e,dir:t,gitdir:n=At.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r),Je("value",a);const s=new nn(e);if(r!==js.clean(r))throw new Zo(r,js.clean(r));if(!i&&await Ot.exists({fs:s,gitdir:n,ref:r}))throw new ns("ref",r);o?await Ot.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await Ot.resolve({fs:s,gitdir:n,ref:a}),await Ot.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function xne({fs:e,gitdir:t,tag:n}){const r=si.from(n).toObject();return await Ni({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function Sne({fs:e,dir:t,gitdir:n=At.join(t,".git"),tag:r}){try{return Je("fs",e),Je("gitdir",n),Je("tag",r),await xne({fs:new nn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function Ene({fs:e,dir:t,gitdir:n=At.join(t,".git"),tree:r}){try{return Je("fs",e),Je("gitdir",n),Je("tree",r),await J0({fs:new nn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var xi={Errors:JQ,STAGE:Rh,TREE:yo,WORKDIR:Y0,add:gee,abortMerge:fee,addNote:bee,addRemote:vee,annotatedTag:_ee,branch:See,checkout:b8,clone:Mee,commit:Pee,getConfig:rte,getConfigAll:ite,setConfig:tne,currentBranch:Fee,deleteBranch:$ee,deleteRef:Bee,deleteRemote:Uee,deleteTag:Hee,expandOid:Kee,expandRef:Zee,fastForward:Qee,fetch:ete,findMergeBase:tte,findRoot:nte,getRemoteInfo:ote,getRemoteInfo2:ste,hashBlob:ute,indexPack:dte,init:fte,isDescendent:hte,isIgnored:pte,listBranches:mte,listFiles:yte,listNotes:vte,listRefs:wte,listRemotes:xte,listServerRefs:Cte,listTags:kte,log:Nte,merge:Ite,packObjects:jte,pull:Mte,push:Bte,readBlob:zte,readCommit:j8,readNote:qte,readObject:Hte,readTag:Gte,readTree:Wte,remove:Kte,removeNote:Yte,renameBranch:Jte,resetIndex:Qte,updateIndex:mne,resolveRef:ene,status:dne,statusMatrix:hne,tag:pne,version:gne,walk:yne,writeBlob:bne,writeCommit:vne,writeObject:wne,writeRef:_ne,writeTag:Sne,writeTree:Ene,stash:cne};function Cne(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function kne(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Cne(e)}async function Ane(e,t){const n=kne(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Tne(e){let t=0;const n=[];await Ane(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function Rne(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Nne({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Tne(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?Rne(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,u]of i.headers.entries())r[s]=u;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var gk={request:Nne};const Vy="system",s4="You are a helpful AI assistant.",l4=.7,u4=null,c4=null,d4=null,f4=0,h4=0,p4=!0,Gy=!0,Wy=30,Ky=10,m4=null,g4=null,Ta=Bl(zl(e=>({theme:Vy,globalSystemPrompt:s4,temperature:l4,maxTokens:u4,topP:c4,topK:d4,presencePenalty:f4,frequencyPenalty:h4,enableAdvancedSettings:p4,enableStreamingMarkdown:Gy,streamingRenderFPS:Wy,streamingCodeRenderFPS:Ky,gitUserName:m4,gitUserEmail:g4,setTheme:t=>{e({theme:t}),Wt.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Wt.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Wt.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Wt.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Wt.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Wt.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Wt.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Wt.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Wt.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Wt.saveSetting("enableStreamingMarkdown",t)},setStreamingRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingRenderFPS:n}),Wt.saveSetting("streamingRenderFPS",n)},setStreamingCodeRenderFPS:t=>{const n=Math.max(1,Math.min(60,t));e({streamingCodeRenderFPS:n}),Wt.saveSetting("streamingCodeRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Wt.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Wt.saveSetting("gitUserEmail",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,u,c,f,h,m,g,w]=await Promise.all([Wt.loadSetting("theme",Vy),Wt.loadSetting("temperature",l4),Wt.loadSetting("maxTokens",u4),Wt.loadSetting("topP",c4),Wt.loadSetting("topK",d4),Wt.loadSetting("presencePenalty",f4),Wt.loadSetting("frequencyPenalty",h4),Wt.loadSetting("globalSystemPrompt",s4),Wt.loadSetting("enableAdvancedSettings",p4),Wt.loadSetting("enableStreamingMarkdown",Gy),Wt.loadSetting("streamingRenderFPS",Wy),Wt.loadSetting("streamingCodeRenderFPS",Ky),Wt.loadSetting("gitUserName",m4),Wt.loadSetting("gitUserEmail",g4)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:u,enableAdvancedSettings:c,enableStreamingMarkdown:f,streamingRenderFPS:h,streamingCodeRenderFPS:m,gitUserName:g,gitUserEmail:w})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:Vy,enableStreamingMarkdown:Gy,streamingRenderFPS:Wy,streamingCodeRenderFPS:Ky}),await Promise.all([Wt.saveSetting("theme",Vy),Wt.saveSetting("enableStreamingMarkdown",Gy),Wt.saveSetting("streamingRenderFPS",Wy),Wt.saveSetting("streamingCodeRenderFPS",Ky)]),ht.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),ht.error("Failed to reset general settings.")}}}))),yk="https://cors.isomorphic-git.org",ld=async e=>{const t=vr(e);if(t!=="/")try{await O0(t,{recursive:!0})}catch(n){if(n instanceof Error&&n.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${t}`);return}throw console.error(`[VFS Op] Failed to create directory ${t}:`,n),ht.error(`Error creating directory "${fa(t)}": ${n instanceof Error?n.message:String(n)}`),n}},B8=async e=>{const{gitUserName:t,gitUserEmail:n}=Ta.getState();if(!t||!n)return ht.error("Git user name and email must be configured in Settings before committing."),!1;try{const r=await xi.getConfig({fs:Pa,dir:e,path:"user.name"}),a=await xi.getConfig({fs:Pa,dir:e,path:"user.email"});return r!==t&&await xi.setConfig({fs:Pa,dir:e,path:"user.name",value:t}),a!==n&&await xi.setConfig({fs:Pa,dir:e,path:"user.email",value:n}),!0}catch(r){return console.error("[VFS Op] Error checking/setting Git config:",r),ht.error(`Failed to configure Git user: ${r instanceof Error?r.message:String(r)}`),!1}},bk=e=>(console.warn(`[VFS Op] Git Auth requested for ${e}. No credentials configured.`),null),vk=(e,t)=>(console.error(`[VFS Op] Git Auth FAILED for ${e}`,t),ht.error(`Authentication failed for ${e}`),null),wk=(e,t)=>{console.log(`[VFS Op] Git Auth SUCCESS for ${e}`,t)},Ine=async e=>{try{const t={backend:MJ,name:`litechat_vfs_${e}`};return console.log("[VFS Op] Configuring ZenFS with:",t),await AJ(t),console.log(`[VFS Op] ZenFS configured successfully for key "${e}".`),Pa}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),ht.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},z8=async e=>{const t=vr(e);try{const r=(await pc(t)).map(async i=>{const o=Fu(t,i);try{const s=await ts(o);return{name:i,path:o,isDirectory:s.isDirectory(),size:s.size,lastModified:s.mtime}}catch(s){return console.error(`[VFS Op] Failed to stat ${o}:`,s),null}});return(await Promise.all(r)).filter(i=>i!==null)}catch(n){if(n instanceof Error&&n.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing: ${t}`),[];throw console.error(`[VFS Op] Failed to list directory ${t}:`,n),ht.error(`Error listing files: ${n instanceof Error?n.message:String(n)}`),n}},eg=async e=>{const t=vr(e);try{const n=await N0(t);return Si.emit(zb.VFS_FILE_READ,{path:t}),n}catch(n){throw console.error(`[VFS Op] Failed to read file ${t}:`,n),ht.error(`Error reading file "${fa(t)}": ${n instanceof Error?n.message:String(n)}`),n}},_k=async(e,t)=>{const n=vr(e),r=Uv(n);try{r!=="/"&&await ld(r),await I0(n,t),Si.emit(zb.VFS_FILE_WRITTEN,{path:n})}catch(a){throw a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${n}:`,a),ht.error(`Error writing file "${fa(n)}": ${a instanceof Error?a.message:String(a)}`)),a}},One=async(e,t=!1)=>{const n=vr(e);if(n==="/")throw ht.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await ts(n)).isDirectory()?(await D0(n,{recursive:t}),Si.emit(zb.VFS_FILE_DELETED,{path:n})):(await R0(n),Si.emit(zb.VFS_FILE_DELETED,{path:n})),ht.success(`"${fa(n)}" deleted.`)}catch(r){if(r instanceof Error&&r.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${n}`);return}throw console.error(`[VFS Op] Failed to delete ${n}:`,r),ht.error(`Error deleting "${fa(n)}": ${r instanceof Error?r.message:String(r)}`),r}},Dne=async e=>{await ld(e)},jne=async(e,t)=>{try{const n=await eg(e),r=new Blob([n]),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a;const o=vr(e);i.download=t||fa(o),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)}catch(n){console.error(`[VFS Op] Failed to initiate download for ${e}:`,n),n instanceof Error&&n.message.includes("Error reading file")||ht.error(`Download failed: ${n instanceof Error?n.message:String(n)}`)}},U8=async(e,t)=>{const n=vr(t);let r=0,a=0;const i=Array.from(e);try{await ld(n);for(const o of i){const s=Fu(n,o.name);try{const u=await o.arrayBuffer();await _k(s,new Uint8Array(u)),r++}catch(u){a++,console.error(`[VFS Op] Failed to upload ${o.name}:`,u)}}}catch(o){a=i.length,console.error(`[VFS Op] Failed to prepare target directory ${n} for upload:`,o)}finally{a>0&&r>0?ht.warning(`Upload complete with issues. ${r} succeeded, ${a} failed.`):a===0&&r>0?ht.success(`Successfully uploaded ${r} file(s) to ${n==="/"?"root":fa(n)}.`):a>0&&r===0&&ht.error("Upload failed. Could not upload any files.")}},Mne=async(e,t)=>{if(!e.name.toLowerCase().endsWith(".zip")){ht.error("Please select a valid ZIP file.");return}const n=vr(t);let r;try{await ld(n),r=await Gj.loadAsync(e);const a=Object.values(r.files),i=await Promise.allSettled(a.map(async c=>{const f=Fu(n,c.name);if(c.dir)await ld(f);else{const h=await c.async("uint8array");await _k(f,h)}return{name:c.name,isDir:c.dir}}));let o=0,s=0,u=0;i.forEach(c=>{c.status==="fulfilled"&&c.value?c.value.isDir?s++:o++:c.status==="rejected"&&(u++,console.error("[VFS Op] ZIP Extraction item failed:",c.reason))}),u>0?ht.warning(`Finished extracting "${e.name}". ${o+s} items succeeded, ${u} failed.`):ht.success(`Successfully extracted ${o} files and ${s} folders from "${e.name}" to ${n==="/"?"root":fa(n)}.`)}catch(a){a instanceof Error&&a.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,a),ht.error(`ZIP extraction failed: ${a instanceof Error?a.message:String(a)}`))}},y4=async(e,t="/")=>{const n=new Gj,r=vr(t),a=fa(r)||"root";try{try{if(!(await ts(r)).isDirectory()){ht.error(`Cannot export: "${a}" is not a directory.`);return}}catch(f){f instanceof Error&&f.code==="ENOENT"?ht.error(`Cannot export: Path "${a}" not found.`):ht.error(`Cannot export: Error accessing path "${a}". ${f instanceof Error?f.message:String(f)}`);return}const i=async(f,h)=>{const m=await z8(f);for(const g of m)if(g.isDirectory){if(g.name===".git")continue;const w=h.folder(g.name);if(w)await i(g.path,w);else throw new Error(`Failed to create subfolder ${g.name} in zip.`)}else{const w=await eg(g.path);h.file(g.name,w)}};await i(r,n);const o=await n.generateAsync({type:"blob"}),s=URL.createObjectURL(o),u=document.createElement("a");u.href=s;const c=`vfs_${a}_export.zip`;u.download=e||c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s),ht.success(`"${a}" exported as ${u.download}.`)}catch(i){console.error("[VFS Op] Failed to download all as zip:",i),i instanceof Error&&(i.message.includes("Error listing files")||i.message.includes("Error reading file")||i.message.includes("Cannot export"))||ht.error(`ZIP export failed: ${i instanceof Error?i.message:String(i)}`)}},Pne=async(e,t)=>{const n=vr(e),r=vr(t);if(n==="/"||r==="/")throw ht.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(n!==r)try{const a=Uv(r);a!=="/"&&await ld(a),await nk(n,r),ht.success(`Renamed "${fa(n)}" to "${fa(r)}"`)}catch(a){throw a instanceof Error&&a.code==="ENOENT"?a.message.includes("Error creating directory")||ht.error(`Rename failed: Original item "${fa(n)}" not found.`):a instanceof Error&&a.code==="EEXIST"?ht.error(`Rename failed: An item named "${fa(r)}" already exists.`):a instanceof Error&&a.message.includes("Error creating directory")||ht.error(`Rename failed: ${a instanceof Error?a.message:String(a)}`),console.error(`[VFS Op] Failed to rename ${n} to ${r}:`,a),a}},Fne=async e=>{const t=vr(e),n=Fu(t,".git");try{return(await ts(n)).isDirectory()}catch(r){return r instanceof Error&&r.code==="ENOENT"||console.error(`[VFS Op] Error checking for .git in ${t}:`,r),!1}},q8=async(e,t,n)=>{const r=vr(e),a=fa(t.replace(/\/$/,"").replace(/\.git$/,"")),i=Fu(r,a);try{try{await ts(i),ht.error(`Directory "${a}" already exists in target location.`);return}catch(o){if(o.code!=="ENOENT")throw o}await ld(r),await xi.clone({fs:Pa,http:gk,dir:i,corsProxy:yk,url:t,ref:n||void 0,singleBranch:!!n,depth:10,onAuth:bk,onAuthFailure:vk,onAuthSuccess:wk,onProgress:o=>{o.phase==="counting objects"&&o.total?console.log(`Clone progress: ${o.phase} ${o.loaded}/${o.total}`):o.phase==="receiving objects"&&o.total?console.log(`Clone progress: ${o.phase} ${o.loaded}/${o.total}`):console.log(`Clone progress: ${o.phase}`)}}),ht.success(`Repository "${a}" cloned successfully into ${i}.`)}catch(o){console.error(`[VFS Op] Git clone failed for ${t}:`,o),ht.error(`Git clone failed: ${o instanceof Error?o.message:String(o)}`);try{await D0(i,{recursive:!0,force:!0})}catch(s){console.warn(`[VFS Op] Failed cleanup ${i}:`,s)}throw o}},Lne=async e=>{const t=vr(e);try{await xi.init({fs:Pa,dir:t}),ht.success(`Initialized empty Git repository in "${fa(t)}"`)}catch(n){throw console.error(`[VFS Op] Git init failed for ${t}:`,n),ht.error(`Git init failed: ${n instanceof Error?n.message:String(n)}`),n}},H8=async(e,t)=>{const n=vr(e);try{if(!await B8(n))throw new Error("Git user configuration is missing or invalid.");const a=await xi.statusMatrix({fs:Pa,dir:n});let i=!1;for(const[s,u,c]of a)c===2&&(await xi.add({fs:Pa,dir:n,filepath:s}),i=!0),u!==0&&c===0&&(await xi.remove({fs:Pa,dir:n,filepath:s}),i=!0);if(!i){ht.info("No changes detected to commit.");return}const o=await xi.commit({fs:Pa,dir:n,message:t,author:{name:Ta.getState().gitUserName,email:Ta.getState().gitUserEmail}});ht.success(`Changes committed: ${o.substring(0,7)}`)}catch(r){throw console.error(`[VFS Op] Git commit failed for ${n}:`,r),ht.error(`Git commit failed: ${r instanceof Error?r.message:String(r)}`),r}},V8=async e=>{const t=vr(e);try{if(!await B8(t))throw new Error("Git user configuration is missing or invalid.");const r=await xi.currentBranch({fs:Pa,dir:t});if(!r)throw new Error("Current branch not found.");await xi.pull({fs:Pa,http:gk,dir:t,corsProxy:yk,ref:r,singleBranch:!0,author:{name:Ta.getState().gitUserName,email:Ta.getState().gitUserEmail},onAuth:bk,onAuthFailure:vk,onAuthSuccess:wk}),ht.success(`Pulled latest changes for "${fa(t)}"`)}catch(n){throw console.error(`[VFS Op] Git pull failed for ${t}:`,n),ht.error(`Git pull failed: ${n instanceof Error?n.message:String(n)}`),n}},G8=async e=>{const t=vr(e);try{const n=await xi.push({fs:Pa,http:gk,dir:t,corsProxy:yk,onAuth:bk,onAuthFailure:vk,onAuthSuccess:wk});if(n.ok)ht.success(`Pushed changes successfully for "${fa(t)}"`);else throw new Error(n.error||"Push failed")}catch(n){throw console.error(`[VFS Op] Git push failed for ${t}:`,n),ht.error(`Git push failed: ${n instanceof Error?n.message:String(n)}`),n}},$ne=async e=>{const t=vr(e);console.log(`[VFS Op] Git Status on ${t}`);try{const n=await xi.statusMatrix({fs:Pa,dir:t});console.log("Git Status:",n);const r=n.map(([a,i,o,s])=>{let u="";return o===0?u="deleted":i===0&&o===2?u="new file":i===1&&o===2?u="modified":i===1&&o===1?u="unmodified":u=`h:${i} w:${o} s:${s}`,`${a}: ${u}`}).join(`
`);ht.info(`Git Status for "${fa(t)}":
${r||"No changes"}`,{duration:15e3})}catch(n){throw console.error(`[VFS Op] Git status failed for ${t}:`,n),ht.error(`Git status failed: ${n instanceof Error?n.message:String(n)}`),n}},b4=Pa,Bne=1024*5,zne=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},Une=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},qne=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],Hne=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:qne.some(r=>n.endsWith(r))},Vne=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=N.useState(null),[i,o]=N.useState(null),[s,u]=N.useState(!1),c=e.type||"application/octet-stream",f=Hne(e.name,c),h=c.startsWith("image/"),m=c.startsWith("audio/"),g=c.startsWith("video/");N.useEffect(()=>{let x=null;return o(null),!f&&e.contentBase64?(x=zne(e.contentBase64,c),x||o("Failed to decode file content for preview."),a(x)):a(null),()=>{x&&(URL.revokeObjectURL(x),a(null))}},[e.contentBase64,c,f]),N.useEffect(()=>{f&&e.contentText&&e.contentText.length>Bne?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):f&&e.contentText===void 0&&o("Text content missing from metadata.")},[e.contentText,e.size,f]);const w=async()=>{if(e.source==="vfs"){ht.info("File is already in VFS.");return}const x=Une(e);if(!x){ht.error("Cannot add to VFS: Failed to reconstruct file data.");return}u(!0);try{await U8([x],"/"),ht.success(`"${e.name}" added to VFS root.`)}catch(S){console.error("Failed to add file to VFS:",S),ht.error(`Failed to add "${e.name}" to VFS.`)}finally{u(!1)}},v=()=>f?y.jsx(UU,{className:"h-5 w-5 text-blue-500"}):h?y.jsx(hq,{className:"h-5 w-5 text-purple-500"}):m?y.jsx(_q,{className:"h-5 w-5 text-green-500"}):g?y.jsx(Qq,{className:"h-5 w-5 text-orange-500"}):y.jsx(BU,{className:"h-5 w-5 text-muted-foreground"}),_=()=>i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(Bu,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):f&&e.contentText!==void 0?y.jsx(SC,{lang:c==="text/markdown"?"markdown":"text",code:e.contentText}):h&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):m&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):g&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."});return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-2",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[v(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",zv(e.size),")"]}),e.source==="vfs"&&e.path&&y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-blue-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(On,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),!n&&t&&y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.source==="direct"&&y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:w,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Qn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(kO,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{children:"Add to VFS"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(zs,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{children:"Remove from Prompt"})]})})]})]}),y.jsx("div",{className:Mt("p-2 max-h-80 overflow-y-auto"),children:_()})]})},Gne=({interaction:e,className:t})=>{var v,_,x;const[n,r]=N.useState(!1),[a,i]=N.useState(!1),[o,s]=N.useState(!1),u=(v=e.prompt)!=null&&v.content&&typeof e.prompt.content=="string"?e.prompt.content:"",c=((x=(_=e.prompt)==null?void 0:_.metadata)==null?void 0:x.attachedFiles)||[],f=u||c.length>0,h=N.useCallback(async()=>{if(u)try{await navigator.clipboard.writeText(u),i(!0),ht.success("Prompt text copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(S){ht.error("Failed to copy prompt text."),console.error("Clipboard copy failed:",S)}},[u]),m=N.useCallback(async()=>{try{await navigator.clipboard.writeText(e.id),s(!0),ht.success("Interaction ID copied to clipboard!"),setTimeout(()=>s(!1),1500)}catch(S){ht.error("Failed to copy interaction ID."),console.error("Clipboard copy failed:",S)}},[e.id]),g=()=>r(S=>!S),w=N.useMemo(()=>u?u.split(`
`).slice(0,3).join(`
`):"",[u]);return y.jsxs("div",{className:Mt("flex items-start gap-3 my-2 group",t),children:[y.jsx("div",{className:"flex-shrink-0 h-8 w-8 rounded-full bg-primary/20 text-primary flex items-center justify-center mt-1",children:y.jsx(Xq,{className:"h-5 w-5"})}),y.jsxs("div",{className:"p-3 border rounded-md shadow-sm bg-muted/50 flex-grow min-w-0 relative",children:[y.jsxs("div",{className:"interaction-card-actions-sticky",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:g,"aria-label":n?"Unfold prompt":"Fold prompt",disabled:!f,children:y.jsx(qv,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:n?"Unfold":"Fold"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:m,"aria-label":"Copy interaction ID",children:o?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(AO,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy ID"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":"Copy prompt text",disabled:!u,children:a?y.jsx(vo,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(JE,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Copy Text"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:()=>ht.info("Edit functionality coming soon!"),"aria-label":"Edit prompt (coming soon)",children:y.jsx(D2,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Edit (Soon)"})]})})]}),y.jsx("div",{className:"text-sm",children:n?y.jsxs("div",{className:"folded-content-preview cursor-pointer",onClick:g,children:[u?y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground",children:w}):y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),c.length>0&&y.jsxs("span",{className:"text-muted-foreground text-xs ml-1",children:["(+",c.length," file(s))"]})]}):y.jsxs(y.Fragment,{children:[u?y.jsx("pre",{className:"whitespace-pre-wrap break-words mb-2",children:u}):!c.length&&y.jsx("span",{className:"text-muted-foreground italic",children:"[No text content]"}),c.length>0&&y.jsx("div",{className:"mt-2 space-y-2",children:c.map(S=>y.jsx(Vne,{fileMeta:S,isReadOnly:!0},S.id))})]})})]})]})},v4=e=>Symbol.iterator in e,w4=e=>"entries"in e,_4=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},Wne=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function Kne(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!v4(e)||!v4(t)?_4({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):w4(e)&&w4(t)?_4(e,t):Wne(e,t)}function Hn(e){const t=vt.useRef(void 0);return n=>{const r=e(n);return Kne(t.current,r)?t.current:t.current=r}}const Zne=({interactionId:e,onStop:t,className:n})=>{const r=a=>{a.stopPropagation(),t(e)};return y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"destructive",size:"icon",className:Mt("h-6 w-6",n),onClick:r,"aria-label":"Stop generation",children:y.jsx(Hq,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:y.jsx("p",{children:"Stop Generation"})})]})})};function x4(e,t){let n,r,a;return function(){n?(clearTimeout(r),r=setTimeout(()=>{Date.now()-a>=t&&(e(),a=Date.now())},t-(Date.now()-a))):(e(),a=Date.now(),n=!0)}}const S4=e=>/```/.test(e),W8=N.memo(({interactionId:e})=>{const t=kr(m=>m.activeStreamBuffers[e]),{enableStreamingMarkdown:n,streamingRenderFPS:r,streamingCodeRenderFPS:a}=Ta(Hn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,streamingRenderFPS:m.streamingRenderFPS,streamingCodeRenderFPS:m.streamingCodeRenderFPS}))),[i,o]=N.useState(""),s=N.useRef(""),u=N.useRef(void 0),c=N.useRef(100),f=N.useRef(!1);N.useEffect(()=>{s.current=t??"",f.current=!0},[t]),N.useEffect(()=>{var v;const g=S4(s.current)?a:r,w=g>0?1e3/g:100;w!==c.current&&(c.current=w,u.current=x4(()=>{i!==s.current&&o(s.current),f.current=!1},w)),f.current&&((v=u.current)==null||v.call(u))},[t,r,a,i]),N.useEffect(()=>{const m=kr.getState().activeStreamBuffers[e]??"";s.current=m;const w=S4(m)?a:r,v=w>0?1e3/w:100;c.current=v,u.current=x4(()=>{i!==s.current&&o(s.current),f.current=!1},v),o(m),f.current=!1},[e,r,a]);const h=PD(n?i:null);return n?y.jsx("div",{className:"text-sm markdown-content",children:h.map((m,g)=>typeof m=="string"?y.jsx("div",{dangerouslySetInnerHTML:{__html:m}},g):m.type==="code"?y.jsx(SC,{lang:m.lang,code:m.code},g):null)}):y.jsx("pre",{className:"text-sm whitespace-pre-wrap",children:i})});W8.displayName="StreamingContentView";const K8=N.memo(({interactionId:e,onStop:t})=>{const n=kr(Hn(o=>{var u;const s=o.interactions.find(c=>c.id===e);return s&&s.status==="STREAMING"?{index:s.index,type:s.type,modelId:(u=s.metadata)==null?void 0:u.modelId}:null}));if(!n)return console.log(`[StreamingInteractionCard] Shell data not found or not streaming for ${e}, rendering null.`),null;const{index:r,type:a,modelId:i}=n;return y.jsxs("div",{className:Mt("p-3 my-2 border rounded-md shadow-sm bg-card border-dashed relative group"),children:[y.jsxs("div",{className:"text-xs text-muted-foreground mb-1 flex justify-between items-center",children:[y.jsxs("span",{className:"flex items-center gap-1.5",children:["Idx:",r," | ",a," | Streaming",y.jsxs("span",{className:"relative flex h-2 w-2",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-400 opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-sky-500"})]}),i&&y.jsxs("span",{className:"ml-1 text-blue-400",children:["(",i,")"]})]}),y.jsx("div",{className:"interaction-card-actions-sticky",children:y.jsx(Zne,{interactionId:e,onStop:t})})]}),y.jsx(W8,{interactionId:e})]},e)});K8.displayName="StreamingInteractionCard";function Mr({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:Mt("bg-accent animate-pulse rounded-md",e),...t})}const Yne=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onStopInteraction:i})=>{const o=kr(Hn(c=>new Set(c.streamingInteractionIds))),s=t.reduce((c,f)=>{if(f.type==="message.user_assistant"){const h=f.index??-1;(c[h]=c[h]||[]).push(f)}return c},{}),u=Object.keys(s).map(Number).filter(c=>!isNaN(c)&&c>=0).sort((c,f)=>c-f);return y.jsxs("div",{className:Mt(r),children:[u.map(c=>{const f=s[c]||[],h=f.sort((m,g)=>{var w,v;return(((w=g.startedAt)==null?void 0:w.getTime())??0)-(((v=m.startedAt)==null?void 0:v.getTime())??0)})[0];return h?y.jsxs(vt.Fragment,{children:[h.prompt&&y.jsx(Gne,{interaction:h}),(h.response!==null||h.status==="STREAMING")&&(o.has(h.id)?y.jsx(K8,{interactionId:h.id,onStop:i}):y.jsx(wZ,{interaction:h,allInteractionsInGroup:f,onRegenerate:a}))]},`${c}-${h.id}`):null}),n==="loading"&&y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsx(Mr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Mr,{className:"h-12 w-3/4 mr-auto rounded-md"}),y.jsx(Mr,{className:"h-16 w-3/4 ml-auto rounded-md"}),y.jsx(Mr,{className:"h-12 w-3/4 mr-auto rounded-md"})]}),t.length===0&&n==="idle"&&!e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select or start a new conversation."}),t.length===0&&n==="idle"&&e&&y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Send a message to start chatting."})]})},Zy=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0)).sort((i,o)=>(i.order??1/0)-(o.order??1/0));return a.length===0?null:y.jsx("div",{className:Mt(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(vt.Fragment,{children:o?o():null},i.id)})})},Z8=6048e5,Xne=864e5,E4=Symbol.for("constructDateFrom");function Ju(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&E4 in e?e[E4](t):e instanceof Date?new e.constructor(t):new Date(t)}function rs(e,t){return Ju(t||e,e)}let Jne={};function kw(){return Jne}function $m(e,t){var s,u,c,f;const n=kw(),r=(t==null?void 0:t.weekStartsOn)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.weekStartsOn)??0,a=rs(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Xb(e,t){return $m(e,{...t,weekStartsOn:1})}function Y8(e,t){const n=rs(e,t==null?void 0:t.in),r=n.getFullYear(),a=Ju(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Xb(a),o=Ju(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=Xb(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function C4(e){const t=rs(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Qne(e,...t){const n=Ju.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function k4(e,t){const n=rs(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function ere(e,t,n){const[r,a]=Qne(n==null?void 0:n.in,e,t),i=k4(r),o=k4(a),s=+i-C4(i),u=+o-C4(o);return Math.round((s-u)/Xne)}function tre(e,t){const n=Y8(e,t),r=Ju(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Xb(r)}function nre(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function rre(e){return!(!nre(e)&&typeof e!="number"||isNaN(+rs(e)))}function are(e,t){const n=rs(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ire={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ore=(e,t,n)=>{let r;const a=ire[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function $S(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const sre={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},lre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ure={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},cre={date:$S({formats:sre,defaultWidth:"full"}),time:$S({formats:lre,defaultWidth:"full"}),dateTime:$S({formats:ure,defaultWidth:"full"})},dre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fre=(e,t,n,r)=>dre[e];function Qp(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const hre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},mre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},gre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vre=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},wre={ordinalNumber:vre,era:Qp({values:hre,defaultWidth:"wide"}),quarter:Qp({values:pre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Qp({values:mre,defaultWidth:"wide"}),day:Qp({values:gre,defaultWidth:"wide"}),dayPeriod:Qp({values:yre,defaultWidth:"wide",formattingValues:bre,defaultFormattingWidth:"wide"})};function em(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(s)?xre(s,h=>h.test(o)):_re(s,h=>h.test(o));let c;c=e.valueCallback?e.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;const f=t.slice(o.length);return{value:c,rest:f}}}function _re(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function xre(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Sre(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const Ere=/^(\d+)(th|st|nd|rd)?/i,Cre=/\d+/i,kre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Are={any:[/^b/i,/^(a|c)/i]},Tre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Rre={any:[/1/i,/2/i,/3/i,/4/i]},Nre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ire={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ore={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Dre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},jre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Mre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Pre={ordinalNumber:Sre({matchPattern:Ere,parsePattern:Cre,valueCallback:e=>parseInt(e,10)}),era:em({matchPatterns:kre,defaultMatchWidth:"wide",parsePatterns:Are,defaultParseWidth:"any"}),quarter:em({matchPatterns:Tre,defaultMatchWidth:"wide",parsePatterns:Rre,defaultParseWidth:"any",valueCallback:e=>e+1}),month:em({matchPatterns:Nre,defaultMatchWidth:"wide",parsePatterns:Ire,defaultParseWidth:"any"}),day:em({matchPatterns:Ore,defaultMatchWidth:"wide",parsePatterns:Dre,defaultParseWidth:"any"}),dayPeriod:em({matchPatterns:jre,defaultMatchWidth:"any",parsePatterns:Mre,defaultParseWidth:"any"})},Fre={code:"en-US",formatDistance:ore,formatLong:cre,formatRelative:fre,localize:wre,match:Pre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Lre(e,t){const n=rs(e,t==null?void 0:t.in);return ere(n,are(n))+1}function $re(e,t){const n=rs(e,t==null?void 0:t.in),r=+Xb(n)-+tre(n);return Math.round(r/Z8)+1}function X8(e,t){var f,h,m,g;const n=rs(e,t==null?void 0:t.in),r=n.getFullYear(),a=kw(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,o=Ju((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=$m(o,t),u=Ju((t==null?void 0:t.in)||e,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const c=$m(u,t);return+n>=+s?r+1:+n>=+c?r:r-1}function Bre(e,t){var s,u,c,f;const n=kw(),r=(t==null?void 0:t.firstWeekContainsDate)??((u=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(c=n.locale)==null?void 0:c.options)==null?void 0:f.firstWeekContainsDate)??1,a=X8(e,t),i=Ju((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),$m(i,t)}function zre(e,t){const n=rs(e,t==null?void 0:t.in),r=+$m(n,t)-+Bre(n,t);return Math.round(r/Z8)+1}function lr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Ru={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return lr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):lr(n+1,2)},d(e,t){return lr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return lr(e.getHours()%12||12,t.length)},H(e,t){return lr(e.getHours(),t.length)},m(e,t){return lr(e.getMinutes(),t.length)},s(e,t){return lr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return lr(a,t.length)}},kf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},A4={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Ru.y(e,t)},Y:function(e,t,n,r){const a=X8(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return lr(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):lr(i,t.length)},R:function(e,t){const n=Y8(e);return lr(n,t.length)},u:function(e,t){const n=e.getFullYear();return lr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return lr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return lr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Ru.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return lr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=zre(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):lr(a,t.length)},I:function(e,t,n){const r=$re(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):lr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Ru.d(e,t)},D:function(e,t,n){const r=Lre(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):lr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return lr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return lr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return lr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=kf.noon:r===0?a=kf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=kf.evening:r>=12?a=kf.afternoon:r>=4?a=kf.morning:a=kf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ru.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Ru.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):lr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):lr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ru.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Ru.s(e,t)},S:function(e,t){return Ru.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return R4(r);case"XXXX":case"XX":return Yc(r);case"XXXXX":case"XXX":default:return Yc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return R4(r);case"xxxx":case"xx":return Yc(r);case"xxxxx":case"xxx":default:return Yc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+T4(r,":");case"OOOO":default:return"GMT"+Yc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+T4(r,":");case"zzzz":default:return"GMT"+Yc(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return lr(r,t.length)},T:function(e,t,n){return lr(+e,t.length)}};function T4(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+lr(i,2)}function R4(e,t){return e%60===0?(e>0?"-":"+")+lr(Math.abs(e)/60,2):Yc(e,t)}function Yc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=lr(Math.trunc(r/60),2),i=lr(r%60,2);return n+a+t+i}const N4=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},J8=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Ure=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return N4(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",N4(r,t)).replace("{{time}}",J8(a,t))},qre={p:J8,P:Ure},Hre=/^D+$/,Vre=/^Y+$/,Gre=["D","DD","YY","YYYY"];function Wre(e){return Hre.test(e)}function Kre(e){return Vre.test(e)}function Zre(e,t,n){const r=Yre(e,t,n);if(console.warn(r),Gre.includes(e))throw new RangeError(r)}function Yre(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Xre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qre=/^'([^]*?)'?$/,eae=/''/g,tae=/[a-zA-Z]/;function I4(e,t,n){var f,h,m,g;const r=kw(),a=r.locale??Fre,i=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,s=rs(e,n==null?void 0:n.in);if(!rre(s))throw new RangeError("Invalid time value");let u=t.match(Jre).map(w=>{const v=w[0];if(v==="p"||v==="P"){const _=qre[v];return _(w,a.formatLong)}return w}).join("").match(Xre).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const v=w[0];if(v==="'")return{isToken:!1,value:nae(w)};if(A4[v])return{isToken:!0,value:w};if(v.match(tae))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:w}});a.localize.preprocessor&&(u=a.localize.preprocessor(s,u));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(w=>{if(!w.isToken)return w.value;const v=w.value;(Kre(v)||Wre(v))&&Zre(v,t,String(e));const _=A4[v[0]];return _(s,v,a.localize,c)}).join("")}function nae(e){const t=e.match(Qre);return t?t[1].replace(eae,"'"):e}const rae=".litechat/conversations",aae=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${I4(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${I4(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,u,c,f,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(u=r.prompt.metadata)!=null&&u.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${zv(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(c=r.metadata)!=null&&c.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((f=r.metadata)!=null&&f.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n},BS=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},zo=Bl(zl((e,t)=>({conversations:[],projects:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},isLoading:!1,error:null,loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([Wt.loadConversations(),Wt.loadProjects(),Wt.loadSyncRepos()]),i={};n.forEach(o=>{i[o.id]="idle"}),e({conversations:n,projects:r,syncRepos:a,conversationSyncStatus:i,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=Mo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:n.metadata??{},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]="idle")});try{const o=t().getConversationById(r);if(o)await Wt.saveConversation(o);else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(u=>u.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([u])=>u!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(u=>u.id===n);s!==-1&&(Object.assign(o.conversations[s],{...r,updatedAt:new Date}),(r.title!==void 0||r.metadata!==void 0||r.syncRepoId!==void 0||r.projectId!==void 0)&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(o.conversationSyncStatus[n]="needs-sync"))});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Wt.saveConversation(o)}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const u=s.conversations.findIndex(c=>c.id===n);u!==-1&&(s.conversations[u]=a),s.conversationSyncStatus[n]==="needs-sync"&&(s.conversationSyncStatus[n]="idle"),s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(u=>u.id===n);s!==-1&&(o.conversations[s]=a),o.conversationSyncStatus[n]==="needs-sync"&&(o.conversationSyncStatus[n]="idle"),o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Wt.deleteConversation(n),await Wt.deleteInteractionsForConversation(n),r===n&&a==="conversation"&&kr.getState().setCurrentConversationId(null)}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{i&&(s.conversations.push(i),s.conversationSyncStatus[n]="idle"),r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},addProject:async n=>{const r=n.parentId??null,a=t().getProjectById(r),i=a?a.path:"/",o=n.name.trim(),s=Eb(i,o),u=Mo(),c=new Date,f={id:u,path:s,createdAt:c,updatedAt:c,name:o,parentId:r,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,metadata:n.metadata??{}};e(h=>{h.projects.push(f)});try{const h=t().getProjectById(u);if(h){const m=JSON.parse(JSON.stringify(h));await Wt.saveProject(m)}else throw new Error("Failed to retrieve newly added project state");return u}catch(h){throw console.error("ConversationStore: Error adding project",h),h.name==="ConstraintError"?ht.error(`A project or folder named "${o}" already exists in this location.`):ht.error("Failed to save new project."),e(m=>({error:"Failed to save new project",projects:m.projects.filter(g=>g.id!==u)})),h}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ConversationStore: Project ${n} not found.`);return}let i=a.path,o=a.name;if(r.name!==void 0&&r.name!==a.name){o=r.name.trim();const u=t().getProjectById(a.parentId),c=u?u.path:"/";i=Eb(c,o)}e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&Object.assign(u.projects[c],{...r,name:o,path:i,updatedAt:new Date})});const s=t().getProjectById(n);if(s)try{const u=JSON.parse(JSON.stringify(s));await Wt.saveProject(u)}catch(u){throw console.error("ConversationStore: Error updating project",u),u.name==="ConstraintError"?ht.error(`A project or folder named "${o}" already exists in this location.`):ht.error("Failed to save project update."),e(c=>{const f=c.projects.findIndex(h=>h.id===n);f!==-1&&(c.projects[f]=a),c.error="Failed to save project update"}),u}else console.error("ConversationStore: Failed to retrieve updated project state after update."),e(u=>{const c=u.projects.findIndex(f=>f.id===n);c!==-1&&(u.projects[c]=a),u.error="Failed to save project update (state error)"})},deleteProject:async n=>{const r=t().selectedItemId,a=t().selectedItemType;if(!t().projects.find(c=>c.id===n))return;const o=new Set,s=new Set,u=c=>{o.add(c),t().projects.filter(f=>f.parentId===c).forEach(f=>u(f.id)),t().conversations.filter(f=>f.projectId===c).forEach(f=>s.add(f.id))};u(n),e(c=>({projects:c.projects.filter(f=>!o.has(f.id)),conversations:c.conversations.map(f=>s.has(f.id)?{...f,projectId:null}:f),selectedItemId:o.has(r??"")?null:r,selectedItemType:o.has(r??"")?null:a}));try{await Wt.deleteProject(n),o.has(r??"")&&kr.getState().setCurrentConversationId(null)}catch(c){throw console.error("ConversationStore: Error deleting project",c),e({error:"Failed to delete project. Please reload."}),c}},selectItem:(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),r==="conversation"?kr.getState().setCurrentConversationId(n):kr.getState().setCurrentConversationId(null)):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{try{const r=await n.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.conversation||!Array.isArray(a.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const i=a.conversation,o=a.interactions;if(!i.id||!i.title||!i.createdAt||!i.updatedAt)throw new Error("Invalid conversation data in import file.");const s=await t().addConversation({title:i.title||"Imported Chat",metadata:i.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(c=>Wt.saveInteraction({...c,conversationId:s,id:Mo()}));await Promise.all(u),t().selectItem(s,"conversation"),ht.success("Conversation imported successfully.")}catch(r){throw console.error("ConversationStore: Error importing conversation",r),ht.error(`Import failed: ${r instanceof Error?r.message:String(r)}`),r}},exportConversation:async(n,r)=>{try{const a=t().conversations.find(c=>c.id===n);if(!a)throw new Error("Conversation not found.");const i=await Wt.loadInteractionsForConversation(n);let o,s;const u=a.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(r==="json"){const f=JSON.stringify({conversation:a,interactions:i},null,2);o=new Blob([f],{type:"application/json"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.json`}else if(r==="md"){const c=aae(a,i);o=new Blob([c],{type:"text/markdown"}),s=`litechat_conversation_${u}_${n.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");BS(o,s),ht.success(`Conversation exported as ${r.toUpperCase()}.`)}catch(a){throw console.error("ConversationStore: Error exporting conversation",a),ht.error(`Export failed: ${a instanceof Error?a.message:String(a)}`),a}},exportProject:async n=>{try{const r=t().getProjectById(n);if(!r)throw new Error("Project not found.");const a=t().projects,i=t().conversations,o=async m=>{const g=a.find(x=>x.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const w=a.filter(x=>x.parentId===m),v=i.filter(x=>x.projectId===m),_=[];for(const x of w)_.push(await o(x.id));for(const x of v){const S=await Wt.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(n),u=JSON.stringify(s,null,2),c=new Blob([u],{type:"application/json"}),h=`litechat_project_${r.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${n.substring(0,6)}.json`;BS(c,h),ht.success(`Project "${r.name}" exported.`)}catch(r){throw console.error("ConversationStore: Error exporting project",r),ht.error(`Project export failed: ${r instanceof Error?r.message:String(r)}`),r}},exportAllConversations:async()=>{try{const n=t().conversations,r=[];for(const s of n){const u=await Wt.loadInteractionsForConversation(s.id);r.push({conversation:s,interactions:u})}const a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),o=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;BS(i,o),ht.success("All conversations exported.")}catch(n){throw console.error("ConversationStore: Error exporting conversations",n),ht.error(`Export failed: ${n instanceof Error?n.message:String(n)}`),n}},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Wt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=Mo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Wt.saveSyncRepo(s)}else throw new Error("Failed to retrieve newly added sync repo state");return ht.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(u=>u.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Wt.saveSyncRepo(o),ht.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const u=s.syncRepos.findIndex(c=>c.id===n);u!==-1&&(s.syncRepos[u]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(u=>u.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(a=>a.id===n);if(r){e(a=>({syncRepos:a.syncRepos.filter(i=>i.id!==n)}));try{await Wt.deleteSyncRepo(n),ht.success(`Sync repository "${r.name}" deleted.`)}catch(a){throw console.error("ConversationStore: Error deleting sync repo",a),e(i=>{r&&i.syncRepos.push(r),i.error="Failed to delete sync repository"}),a}}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,"idle"),ht.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)})},syncConversation:async n=>{var h,m;const{conversations:r,syncRepos:a,_setConversationSyncStatus:i,updateConversation:o}=t(),s=r.find(g=>g.id===n);if(!s){ht.error("Conversation not found for syncing.");return}if(!s.syncRepoId){ht.info("Conversation not linked to a sync repository.");return}const u=a.find(g=>g.id===s.syncRepoId);if(!u){ht.error("Sync repository configuration not found."),i(n,"error","Repo not found");return}i(n,"syncing");const c=vr(`/synced_convos/${u.id}`),f=Fu(c,rae,`${n}.json`);try{let g=!1;try{await b4.promises.stat(Fu(c,".git")),g=!0}catch(S){if(S.code!=="ENOENT")throw S}if(g)ht.info(`Pulling latest changes for "${u.name}"...`),await V8(c);else{ht.info(`Cloning repository "${u.name}" for first sync...`),await q8(Uv(c),u.remoteUrl,u.branch);try{await b4.promises.stat(Fu(c,".git"))}catch{throw new Error(`Clone seemed successful but repo dir "${c}" not found.`)}}let w=null,v=null;try{const S=await eg(f),E=new TextDecoder().decode(S);w=JSON.parse(E),v=(h=w==null?void 0:w.conversation)!=null&&h.updatedAt?new Date(w.conversation.updatedAt).getTime():null}catch(S){if(S.code==="ENOENT")console.log(`Conversation file ${f} not found in repo. Will push local version.`);else throw new Error(`Failed to read remote conversation file: ${S.message}`)}const _=s.updatedAt.getTime(),x=((m=s.lastSyncedAt)==null?void 0:m.getTime())??0;if(!w||_>(v??0)||_>x){ht.info("Local changes detected. Pushing to remote...");const S=await Wt.loadInteractionsForConversation(n),E={...s,lastSyncedAt:null},C=JSON.stringify({conversation:E,interactions:S},null,2);await _k(f,C),await H8(c,`Sync conversation: ${s.title} (${n})`),await G8(c),await o(n,{lastSyncedAt:new Date}),i(n,"idle"),ht.success("Conversation synced successfully (pushed).")}else if(v&&v>_){ht.info("Remote changes detected. Updating local conversation...");const S={...w.conversation,lastSyncedAt:new Date};await Wt.saveConversation(S),await Wt.deleteInteractionsForConversation(n);const E=w.interactions.map(C=>Wt.saveInteraction({...C,conversationId:n}));await Promise.all(E),e(C=>{const A=C.conversations.findIndex(O=>O.id===n);A!==-1&&(C.conversations[A]=S)}),t().selectedItemId===n&&t().selectedItemType==="conversation"&&kr.getState().loadInteractions(n),i(n,"idle"),ht.success("Conversation synced successfully (pulled).")}else ht.info("Conversation already up-to-date."),await o(n,{lastSyncedAt:new Date}),i(n,"idle")}catch(g){console.error(`Sync failed for conversation ${n}:`,g);const w=g instanceof Error?g.message:String(g);ht.error(`Sync failed: ${w}`),i(n,"error",w)}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},getTopLevelProjectId:(n,r)=>{if(!n||!r)return null;if(r==="conversation"){const i=t().getConversationById(n);n=(i==null?void 0:i.projectId)??null,r="project"}if(r!=="project"||!n)return null;let a=t().getProjectById(n);for(;a!=null&&a.parentId;){const i=t().getProjectById(a.parentId);if(!i)return a.id;a=i}return(a==null?void 0:a.id)??null}}))),Uo=Bl(zl(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t]})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})}})));var Q8="vercel.ai.error",iae=Symbol.for(Q8),eM,oae=class tM extends Error{constructor({name:t,message:n,cause:r}){super(n),this[eM]=!0,this.name=t,this.cause=r}static isInstance(t){return tM.hasMarker(t,Q8)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};eM=iae;var xn=oae,nM="AI_APICallError",rM=`vercel.ai.error.${nM}`,sae=Symbol.for(rM),aM,da=class extends xn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:nM,message:t,cause:s}),this[aM]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return xn.hasMarker(t,rM)}};aM=sae;var iM="AI_EmptyResponseBodyError",oM=`vercel.ai.error.${iM}`,lae=Symbol.for(oM),sM,xk=class extends xn{constructor({message:t="Empty response body"}={}){super({name:iM,message:t}),this[sM]=!0}static isInstance(t){return xn.hasMarker(t,oM)}};sM=lae;function tg(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var lM="AI_InvalidArgumentError",uM=`vercel.ai.error.${lM}`,uae=Symbol.for(uM),cM,Sk=class extends xn{constructor({message:t,cause:n,argument:r}){super({name:lM,message:t,cause:n}),this[cM]=!0,this.argument=r}static isInstance(t){return xn.hasMarker(t,uM)}};cM=uae;var dM="AI_InvalidPromptError",fM=`vercel.ai.error.${dM}`,cae=Symbol.for(fM),hM,wl=class extends xn{constructor({prompt:t,message:n,cause:r}){super({name:dM,message:`Invalid prompt: ${n}`,cause:r}),this[hM]=!0,this.prompt=t}static isInstance(t){return xn.hasMarker(t,fM)}};hM=cae;var pM="AI_InvalidResponseDataError",mM=`vercel.ai.error.${pM}`,dae=Symbol.for(mM),gM,Uf=class extends xn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:pM,message:n}),this[gM]=!0,this.data=t}static isInstance(t){return xn.hasMarker(t,mM)}};gM=dae;var yM="AI_JSONParseError",bM=`vercel.ai.error.${yM}`,fae=Symbol.for(bM),vM,Qu=class extends xn{constructor({text:t,cause:n}){super({name:yM,message:`JSON parsing failed: Text: ${t}.
Error message: ${tg(n)}`,cause:n}),this[vM]=!0,this.text=t}static isInstance(t){return xn.hasMarker(t,bM)}};vM=fae;var wM="AI_LoadAPIKeyError",_M=`vercel.ai.error.${wM}`,hae=Symbol.for(_M),xM,Yy=class extends xn{constructor({message:t}){super({name:wM,message:t}),this[xM]=!0}static isInstance(t){return xn.hasMarker(t,_M)}};xM=hae;var SM="AI_TooManyEmbeddingValuesForCallError",EM=`vercel.ai.error.${SM}`,pae=Symbol.for(EM),CM,Ek=class extends xn{constructor(t){super({name:SM,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[CM]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return xn.hasMarker(t,EM)}};CM=pae;var kM="AI_TypeValidationError",AM=`vercel.ai.error.${kM}`,mae=Symbol.for(AM),TM,gae=class rE extends xn{constructor({value:t,cause:n}){super({name:kM,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${tg(n)}`,cause:n}),this[TM]=!0,this.value=t}static isInstance(t){return xn.hasMarker(t,AM)}static wrap({value:t,cause:n}){return rE.isInstance(n)&&n.value===t?n:new rE({value:t,cause:n})}};TM=mae;var ec=gae,RM="AI_UnsupportedFunctionalityError",NM=`vercel.ai.error.${RM}`,yae=Symbol.for(NM),IM,br=class extends xn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:RM,message:n}),this[IM]=!0,this.functionality=t}static isInstance(t){return xn.hasMarker(t,NM)}};IM=yae;let bae=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Kc={exports:{}},O4;function vae(){if(O4)return Kc.exports;O4=1;const e=typeof Gt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,u,c){c==null&&u!==null&&typeof u=="object"&&(c=u,u=void 0),e&&Gt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const f=JSON.parse(s,u);if(f===null||typeof f!="object")return f;const h=c&&c.protoAction||"error",m=c&&c.constructorAction||"error";if(h==="ignore"&&m==="ignore")return f;if(h!=="ignore"&&m!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return f}else if(h!=="ignore"&&m==="ignore"){if(t.test(s)===!1)return f}else if(n.test(s)===!1)return f;return a(f,{protoAction:h,constructorAction:m,safe:c&&c.safe})}function a(s,{protoAction:u="error",constructorAction:c="error",safe:f}={}){let h=[s];for(;h.length;){const m=h;h=[];for(const g of m){if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(f===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(c!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(f===!0)return null;if(c==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const w in g){const v=g[w];v&&typeof v=="object"&&h.push(v)}}}return s}function i(s,u,c){const f=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,c)}finally{Error.stackTraceLimit=f}}function o(s,u){const c=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,u,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=c}}return Kc.exports=i,Kc.exports.default=i,Kc.exports.parse=i,Kc.exports.safeParse=o,Kc.exports.scan=a,Kc.exports}var wae=vae();const as=Ja(wae);var _ae={};function Fs(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function xae(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function Sae(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function Eae(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=Cae(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function Cae(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function ng(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Ad=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=bae(n,t);if(e==null)return a;if(n.includes(r))throw new Sk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Rs=Ad();function kae(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function Aae(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function hb(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Tae({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Yy({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new Yy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=_ae[t],e==null)throw new Yy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Yy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Jb=Symbol.for("vercel.ai.validator");function Rae(e){return{[Jb]:!0,validate:e}}function Nae(e){return typeof e=="object"&&e!==null&&Jb in e&&e[Jb]===!0&&"validate"in e}function Iae(e){return Nae(e)?e:Oae(e)}function Oae(e){return Rae(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Dae({value:e,schema:t}){const n=Ph({value:e,schema:t});if(!n.success)throw ec.wrap({value:e,cause:n.error});return n.value}function Ph({value:e,schema:t}){const n=Iae(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ec.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ec.wrap({value:e,cause:r})}}}function jae({text:e,schema:t}){try{const n=as.parse(e);return t==null?n:Dae({value:n,schema:t})}catch(n){throw Qu.isInstance(n)||ec.isInstance(n)?n:new Qu({text:e,cause:n})}}function ud({text:e,schema:t}){try{const n=as.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Ph({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Qu.isInstance(n)?n:new Qu({text:e,cause:n})}}}function D4(e){try{return as.parse(e),!0}catch{return!1}}function Mae({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Ph({value:t[e],schema:n});if(!r.success)throw new Sk({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var Pae=()=>globalThis.fetch,Yo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Fae({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Fae=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Pae()})=>{try{const s=await o(e,{method:"POST",headers:Aae(t),body:n.content,signal:i}),u=ng(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw hb(f)||da.isInstance(f)?f:new da({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(hb(c)||da.isInstance(c))?c:new da({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(hb(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new da({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},OM=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=ng(r);if(o.trim()==="")return{responseHeaders:s,value:new da({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=jae({text:o,schema:e});return{responseHeaders:s,value:new da({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new da({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Ck=e=>async({response:t})=>{const n=ng(t);if(t.body==null)throw new xk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(Eae()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(ud({text:r,schema:e}))}}))}},Td=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=ud({text:a,schema:e}),o=ng(t);if(!i.success)throw new da({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Lae,atob:$ae}=globalThis;function DM(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=$ae(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function uh(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Lae(t)}function jM(e){return e==null?void 0:e.replace(/\/$/,"")}const Bae=Symbol("Let zodToJsonSchema decide on which parser to use"),j4={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},zae=e=>typeof e=="string"?{...j4,name:e}:{...j4,...e},Uae=e=>{const t=zae(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function MM(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function ur(e,t,n,r,a){e[t]=n,MM(e,t,r,a)}var Kn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Kn||(Kn={}));var aE;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(aE||(aE={}));const Yt=Kn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sl=e=>{switch(typeof e){case"undefined":return Yt.undefined;case"string":return Yt.string;case"number":return isNaN(e)?Yt.nan:Yt.number;case"boolean":return Yt.boolean;case"function":return Yt.function;case"bigint":return Yt.bigint;case"symbol":return Yt.symbol;case"object":return Array.isArray(e)?Yt.array:e===null?Yt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Yt.promise:typeof Map<"u"&&e instanceof Map?Yt.map:typeof Set<"u"&&e instanceof Set?Yt.set:typeof Date<"u"&&e instanceof Date?Yt.date:Yt.object;default:return Yt.unknown}},Rt=Kn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),qae=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Wi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,u=0;for(;u<o.path.length;){const c=o.path[u];u===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(n(o))):s[c]=s[c]||{_errors:[]},s=s[c],u++}}};return a(this),r}static assert(t){if(!(t instanceof Wi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Kn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Wi.create=e=>new Wi(e);const ch=(e,t)=>{let n;switch(e.code){case Rt.invalid_type:e.received===Yt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Rt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Kn.jsonStringifyReplacer)}`;break;case Rt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Kn.joinValues(e.keys,", ")}`;break;case Rt.invalid_union:n="Invalid input";break;case Rt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Kn.joinValues(e.options)}`;break;case Rt.invalid_enum_value:n=`Invalid enum value. Expected ${Kn.joinValues(e.options)}, received '${e.received}'`;break;case Rt.invalid_arguments:n="Invalid function arguments";break;case Rt.invalid_return_type:n="Invalid function return type";break;case Rt.invalid_date:n="Invalid date";break;case Rt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Kn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Rt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Rt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Rt.custom:n="Invalid input";break;case Rt.invalid_intersection_types:n="Intersection results could not be merged";break;case Rt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Rt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Kn.assertNever(e)}return{message:n}};let PM=ch;function Hae(e){PM=e}function Qb(){return PM}const ev=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const u=r.filter(c=>!!c).slice().reverse();for(const c of u)s=c(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},Vae=[];function Kt(e,t){const n=Qb(),r=ev({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===ch?void 0:ch].filter(a=>!!a)});e.common.issues.push(r)}class Ya{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return vn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return Ya.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return vn;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const vn=Object.freeze({status:"aborted"}),Pf=e=>({status:"dirty",value:e}),ui=e=>({status:"valid",value:e}),iE=e=>e.status==="aborted",oE=e=>e.status==="dirty",cd=e=>e.status==="valid",Bm=e=>typeof Promise<"u"&&e instanceof Promise;function tv(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function FM(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var rn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(rn||(rn={}));var sm,lm;class Ls{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const M4=(e,t)=>{if(cd(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Wi(e.common.issues);return this._error=n,this._error}}};function An(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var u,c;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??s.defaultError}:typeof s.data>"u"?{message:(u=f??r)!==null&&u!==void 0?u:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(c=f??n)!==null&&c!==void 0?c:s.defaultError}},description:a}}class Mn{get description(){return this._def.description}_getType(t){return Sl(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Sl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ya,ctx:{common:t.parent.common,data:t.data,parsedType:Sl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Bm(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sl(t)},i=this._parseSync({data:t,path:a.path,parent:a});return M4(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sl(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return cd(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>cd(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sl(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(Bm(a)?a:Promise.resolve(a));return M4(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:Rt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Xo({schema:this,typeName:Pt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ho.create(this,this._def)}nullable(){return ac.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qo.create(this)}promise(){return fh.create(this,this._def)}or(t){return Hm.create([this,t],this._def)}and(t){return Vm.create(this,t,this._def)}transform(t){return new Xo({...An(this._def),schema:this,typeName:Pt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new Ym({...An(this._def),innerType:this,defaultValue:n,typeName:Pt.ZodDefault})}brand(){return new kk({typeName:Pt.ZodBranded,type:this,...An(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new Xm({...An(this._def),innerType:this,catchValue:n,typeName:Pt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return rg.create(this,t)}readonly(){return Jm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Gae=/^c[^\s-]{8,}$/i,Wae=/^[0-9a-z]+$/,Kae=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Zae=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Yae=/^[a-z0-9_-]{21}$/i,Xae=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Jae=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Qae=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,eie="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let zS;const tie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nie=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,rie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,aie=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,iie=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,oie=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,LM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",sie=new RegExp(`^${LM}$`);function $M(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function lie(e){return new RegExp(`^${$M(e)}$`)}function BM(e){let t=`${LM}T${$M(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function uie(e,t){return!!((t==="v4"||!t)&&tie.test(e)||(t==="v6"||!t)&&rie.test(e))}function cie(e,t){if(!Xae.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function die(e,t){return!!((t==="v4"||!t)&&nie.test(e)||(t==="v6"||!t)&&aie.test(e))}class Fo extends Mn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Yt.string){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.string,received:i.parsedType}),vn}const r=new Ya;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Kt(a,{code:Rt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Kt(a,{code:Rt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")Qae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"email",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")zS||(zS=new RegExp(eie,"u")),zS.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"emoji",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Zae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"uuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")Yae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"nanoid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Gae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")Wae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cuid2",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")Kae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ulid",code:Rt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Kt(a,{validation:"url",code:Rt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"regex",code:Rt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?BM(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?sie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?lie(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?Jae.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"duration",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?uie(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"ip",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?cie(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"jwt",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?die(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"cidr",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?iie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64",code:Rt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?oie.test(t.data)||(a=this._getOrReturnCtx(t,a),Kt(a,{validation:"base64url",code:Rt.invalid_string,message:i.message}),r.dirty()):Kn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Rt.invalid_string,...rn.errToObj(r)})}_addCheck(t){return new Fo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...rn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...rn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...rn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...rn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...rn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...rn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...rn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...rn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...rn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...rn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...rn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...rn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...rn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...rn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...rn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...rn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...rn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...rn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...rn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...rn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...rn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...rn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...rn.errToObj(n)})}nonempty(t){return this.min(1,rn.errToObj(t))}trim(){return new Fo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Fo.create=e=>{var t;return new Fo({checks:[],typeName:Pt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...An(e)})};function fie(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class tc extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Yt.number){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.number,received:i.parsedType}),vn}let r;const a=new Ya;for(const i of this._def.checks)i.kind==="int"?Kn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?fie(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_finite,message:i.message}),a.dirty()):Kn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new tc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new tc({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:rn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:rn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Kn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}tc.create=e=>new tc({checks:[],typeName:Pt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...An(e)});class nc extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Yt.bigint)return this._getInvalidInput(t);let r;const a=new Ya;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Kt(r,{code:Rt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Kn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.bigint,received:n.parsedType}),vn}gte(t,n){return this.setLimit("min",t,!0,rn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,rn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,rn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,rn.toString(n))}setLimit(t,n,r,a){return new nc({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:rn.toString(a)}]})}_addCheck(t){return new nc({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:rn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}nc.create=e=>{var t;return new nc({checks:[],typeName:Pt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...An(e)})};class zm extends Mn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Yt.boolean){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.boolean,received:r.parsedType}),vn}return ui(t.data)}}zm.create=e=>new zm({typeName:Pt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...An(e)});class dd extends Mn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Yt.date){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_type,expected:Yt.date,received:i.parsedType}),vn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Kt(i,{code:Rt.invalid_date}),vn}const r=new Ya;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Kt(a,{code:Rt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Kn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new dd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:rn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:rn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}dd.create=e=>new dd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Pt.ZodDate,...An(e)});class nv extends Mn{_parse(t){if(this._getType(t)!==Yt.symbol){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.symbol,received:r.parsedType}),vn}return ui(t.data)}}nv.create=e=>new nv({typeName:Pt.ZodSymbol,...An(e)});class Um extends Mn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.undefined,received:r.parsedType}),vn}return ui(t.data)}}Um.create=e=>new Um({typeName:Pt.ZodUndefined,...An(e)});class qm extends Mn{_parse(t){if(this._getType(t)!==Yt.null){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.null,received:r.parsedType}),vn}return ui(t.data)}}qm.create=e=>new qm({typeName:Pt.ZodNull,...An(e)});class dh extends Mn{constructor(){super(...arguments),this._any=!0}_parse(t){return ui(t.data)}}dh.create=e=>new dh({typeName:Pt.ZodAny,...An(e)});class ad extends Mn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ui(t.data)}}ad.create=e=>new ad({typeName:Pt.ZodUnknown,...An(e)});class Ll extends Mn{_parse(t){const n=this._getOrReturnCtx(t);return Kt(n,{code:Rt.invalid_type,expected:Yt.never,received:n.parsedType}),vn}}Ll.create=e=>new Ll({typeName:Pt.ZodNever,...An(e)});class rv extends Mn{_parse(t){if(this._getType(t)!==Yt.undefined){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.void,received:r.parsedType}),vn}return ui(t.data)}}rv.create=e=>new rv({typeName:Pt.ZodVoid,...An(e)});class qo extends Mn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==Yt.array)return Kt(n,{code:Rt.invalid_type,expected:Yt.array,received:n.parsedType}),vn;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Kt(n,{code:o?Rt.too_big:Rt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Kt(n,{code:Rt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Kt(n,{code:Rt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new Ls(n,o,n.path,s)))).then(o=>Ya.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new Ls(n,o,n.path,s)));return Ya.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new qo({...this._def,minLength:{value:t,message:rn.toString(n)}})}max(t,n){return new qo({...this._def,maxLength:{value:t,message:rn.toString(n)}})}length(t,n){return new qo({...this._def,exactLength:{value:t,message:rn.toString(n)}})}nonempty(t){return this.min(1,t)}}qo.create=(e,t)=>new qo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Pt.ZodArray,...An(t)});function Nf(e){if(e instanceof zr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ho.create(Nf(r))}return new zr({...e._def,shape:()=>t})}else return e instanceof qo?new qo({...e._def,type:Nf(e.element)}):e instanceof Ho?Ho.create(Nf(e.unwrap())):e instanceof ac?ac.create(Nf(e.unwrap())):e instanceof $s?$s.create(e.items.map(t=>Nf(t))):e}class zr extends Mn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Kn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==Yt.object){const c=this._getOrReturnCtx(t);return Kt(c,{code:Rt.invalid_type,expected:Yt.object,received:c.parsedType}),vn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Ll&&this._def.unknownKeys==="strip"))for(const c in a.data)o.includes(c)||s.push(c);const u=[];for(const c of o){const f=i[c],h=a.data[c];u.push({key:{status:"valid",value:c},value:f._parse(new Ls(a,h,a.path,c)),alwaysSet:c in a.data})}if(this._def.catchall instanceof Ll){const c=this._def.unknownKeys;if(c==="passthrough")for(const f of s)u.push({key:{status:"valid",value:f},value:{status:"valid",value:a.data[f]}});else if(c==="strict")s.length>0&&(Kt(a,{code:Rt.unrecognized_keys,keys:s}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const f of s){const h=a.data[f];u.push({key:{status:"valid",value:f},value:c._parse(new Ls(a,h,a.path,f)),alwaysSet:f in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const c=[];for(const f of u){const h=await f.key,m=await f.value;c.push({key:h,value:m,alwaysSet:f.alwaysSet})}return c}).then(c=>Ya.mergeObjectSync(r,c)):Ya.mergeObjectSync(r,u)}get shape(){return this._def.shape()}strict(t){return rn.errToObj,new zr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const u=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=rn.errToObj(t).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new zr({...this._def,unknownKeys:"strip"})}passthrough(){return new zr({...this._def,unknownKeys:"passthrough"})}extend(t){return new zr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new zr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Pt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new zr({...this._def,catchall:t})}pick(t){const n={};return Kn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}omit(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new zr({...this._def,shape:()=>n})}deepPartial(){return Nf(this)}partial(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new zr({...this._def,shape:()=>n})}required(t){const n={};return Kn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ho;)i=i._def.innerType;n[r]=i}}),new zr({...this._def,shape:()=>n})}keyof(){return zM(Kn.objectKeys(this.shape))}}zr.create=(e,t)=>new zr({shape:()=>e,unknownKeys:"strip",catchall:Ll.create(),typeName:Pt.ZodObject,...An(t)});zr.strictCreate=(e,t)=>new zr({shape:()=>e,unknownKeys:"strict",catchall:Ll.create(),typeName:Pt.ZodObject,...An(t)});zr.lazycreate=(e,t)=>new zr({shape:e,unknownKeys:"strip",catchall:Ll.create(),typeName:Pt.ZodObject,...An(t)});class Hm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Wi(s.ctx.common.issues));return Kt(n,{code:Rt.invalid_union,unionErrors:o}),vn}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of r){const c={...n,common:{...n.common,issues:[]},parent:null},f=u._parseSync({data:n.data,path:n.path,parent:c});if(f.status==="valid")return f;f.status==="dirty"&&!i&&(i={result:f,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(u=>new Wi(u));return Kt(n,{code:Rt.invalid_union,unionErrors:s}),vn}}get options(){return this._def.options}}Hm.create=(e,t)=>new Hm({options:e,typeName:Pt.ZodUnion,...An(t)});const vl=e=>e instanceof Wm?vl(e.schema):e instanceof Xo?vl(e.innerType()):e instanceof Km?[e.value]:e instanceof rc?e.options:e instanceof Zm?Kn.objectValues(e.enum):e instanceof Ym?vl(e._def.innerType):e instanceof Um?[void 0]:e instanceof qm?[null]:e instanceof Ho?[void 0,...vl(e.unwrap())]:e instanceof ac?[null,...vl(e.unwrap())]:e instanceof kk||e instanceof Jm?vl(e.unwrap()):e instanceof Xm?vl(e._def.innerType):[];class Aw extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.object)return Kt(n,{code:Rt.invalid_type,expected:Yt.object,received:n.parsedType}),vn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Kt(n,{code:Rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),vn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=vl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new Aw({typeName:Pt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...An(r)})}}function sE(e,t){const n=Sl(e),r=Sl(t);if(e===t)return{valid:!0,data:e};if(n===Yt.object&&r===Yt.object){const a=Kn.objectKeys(t),i=Kn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const u=sE(e[s],t[s]);if(!u.valid)return{valid:!1};o[s]=u.data}return{valid:!0,data:o}}else if(n===Yt.array&&r===Yt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],u=sE(o,s);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return n===Yt.date&&r===Yt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Vm extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(iE(i)||iE(o))return vn;const s=sE(i.value,o.value);return s.valid?((oE(i)||oE(o))&&n.dirty(),{status:n.value,value:s.data}):(Kt(r,{code:Rt.invalid_intersection_types}),vn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Vm.create=(e,t,n)=>new Vm({left:e,right:t,typeName:Pt.ZodIntersection,...An(n)});class $s extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.array)return Kt(r,{code:Rt.invalid_type,expected:Yt.array,received:r.parsedType}),vn;if(r.data.length<this._def.items.length)return Kt(r,{code:Rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),vn;!this._def.rest&&r.data.length>this._def.items.length&&(Kt(r,{code:Rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const u=this._def.items[s]||this._def.rest;return u?u._parse(new Ls(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>Ya.mergeArray(n,o)):Ya.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new $s({...this._def,rest:t})}}$s.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $s({items:e,typeName:Pt.ZodTuple,rest:null,...An(t)})};class Gm extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.object)return Kt(r,{code:Rt.invalid_type,expected:Yt.object,received:r.parsedType}),vn;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new Ls(r,s,r.path,s)),value:o._parse(new Ls(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?Ya.mergeObjectAsync(n,a):Ya.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Mn?new Gm({keyType:t,valueType:n,typeName:Pt.ZodRecord,...An(r)}):new Gm({keyType:Fo.create(),valueType:t,typeName:Pt.ZodRecord,...An(n)})}}class av extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.map)return Kt(r,{code:Rt.invalid_type,expected:Yt.map,received:r.parsedType}),vn;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,u],c)=>({key:a._parse(new Ls(r,s,r.path,[c,"key"])),value:i._parse(new Ls(r,u,r.path,[c,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const u of o){const c=await u.key,f=await u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const u of o){const c=u.key,f=u.value;if(c.status==="aborted"||f.status==="aborted")return vn;(c.status==="dirty"||f.status==="dirty")&&n.dirty(),s.set(c.value,f.value)}return{status:n.value,value:s}}}}av.create=(e,t,n)=>new av({valueType:t,keyType:e,typeName:Pt.ZodMap,...An(n)});class fd extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==Yt.set)return Kt(r,{code:Rt.invalid_type,expected:Yt.set,received:r.parsedType}),vn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Kt(r,{code:Rt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Kt(r,{code:Rt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(u){const c=new Set;for(const f of u){if(f.status==="aborted")return vn;f.status==="dirty"&&n.dirty(),c.add(f.value)}return{status:n.value,value:c}}const s=[...r.data.values()].map((u,c)=>i._parse(new Ls(r,u,r.path,c)));return r.common.async?Promise.all(s).then(u=>o(u)):o(s)}min(t,n){return new fd({...this._def,minSize:{value:t,message:rn.toString(n)}})}max(t,n){return new fd({...this._def,maxSize:{value:t,message:rn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}fd.create=(e,t)=>new fd({valueType:e,minSize:null,maxSize:null,typeName:Pt.ZodSet,...An(t)});class qf extends Mn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.function)return Kt(n,{code:Rt.invalid_type,expected:Yt.function,received:n.parsedType}),vn;function r(s,u){return ev({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Qb(),ch].filter(c=>!!c),issueData:{code:Rt.invalid_arguments,argumentsError:u}})}function a(s,u){return ev({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Qb(),ch].filter(c=>!!c),issueData:{code:Rt.invalid_return_type,returnTypeError:u}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof fh){const s=this;return ui(async function(...u){const c=new Wi([]),f=await s._def.args.parseAsync(u,i).catch(g=>{throw c.addIssue(r(u,g)),c}),h=await Reflect.apply(o,this,f);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw c.addIssue(a(h,g)),c})})}else{const s=this;return ui(function(...u){const c=s._def.args.safeParse(u,i);if(!c.success)throw new Wi([r(u,c.error)]);const f=Reflect.apply(o,this,c.data),h=s._def.returns.safeParse(f,i);if(!h.success)throw new Wi([a(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new qf({...this._def,args:$s.create(t).rest(ad.create())})}returns(t){return new qf({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new qf({args:t||$s.create([]).rest(ad.create()),returns:n||ad.create(),typeName:Pt.ZodFunction,...An(r)})}}class Wm extends Mn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Wm.create=(e,t)=>new Wm({getter:e,typeName:Pt.ZodLazy,...An(t)});class Km extends Mn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Kt(n,{received:n.data,code:Rt.invalid_literal,expected:this._def.value}),vn}return{status:"valid",value:t.data}}get value(){return this._def.value}}Km.create=(e,t)=>new Km({value:e,typeName:Pt.ZodLiteral,...An(t)});function zM(e,t){return new rc({values:e,typeName:Pt.ZodEnum,...An(t)})}class rc extends Mn{constructor(){super(...arguments),sm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{expected:Kn.joinValues(r),received:n.parsedType,code:Rt.invalid_type}),vn}if(tv(this,sm)||FM(this,sm,new Set(this._def.values)),!tv(this,sm).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Kt(n,{received:n.data,code:Rt.invalid_enum_value,options:r}),vn}return ui(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return rc.create(t,{...this._def,...n})}exclude(t,n=this._def){return rc.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}sm=new WeakMap;rc.create=zM;class Zm extends Mn{constructor(){super(...arguments),lm.set(this,void 0)}_parse(t){const n=Kn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Yt.string&&r.parsedType!==Yt.number){const a=Kn.objectValues(n);return Kt(r,{expected:Kn.joinValues(a),received:r.parsedType,code:Rt.invalid_type}),vn}if(tv(this,lm)||FM(this,lm,new Set(Kn.getValidEnumValues(this._def.values))),!tv(this,lm).has(t.data)){const a=Kn.objectValues(n);return Kt(r,{received:r.data,code:Rt.invalid_enum_value,options:a}),vn}return ui(t.data)}get enum(){return this._def.values}}lm=new WeakMap;Zm.create=(e,t)=>new Zm({values:e,typeName:Pt.ZodNativeEnum,...An(t)});class fh extends Mn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==Yt.promise&&n.common.async===!1)return Kt(n,{code:Rt.invalid_type,expected:Yt.promise,received:n.parsedType}),vn;const r=n.parsedType===Yt.promise?n.data:Promise.resolve(n.data);return ui(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}fh.create=(e,t)=>new fh({type:e,typeName:Pt.ZodPromise,...An(t)});class Xo extends Mn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Pt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Kt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return vn;const u=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return u.status==="aborted"?vn:u.status==="dirty"||n.value==="dirty"?Pf(u.value):u});{if(n.value==="aborted")return vn;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?vn:s.status==="dirty"||n.value==="dirty"?Pf(s.value):s}}if(a.type==="refinement"){const o=s=>{const u=a.refinement(s,i);if(r.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?vn:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!cd(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>cd(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Kn.assertNever(a)}}Xo.create=(e,t,n)=>new Xo({schema:e,typeName:Pt.ZodEffects,effect:t,...An(n)});Xo.createWithPreprocess=(e,t,n)=>new Xo({schema:t,effect:{type:"preprocess",transform:e},typeName:Pt.ZodEffects,...An(n)});class Ho extends Mn{_parse(t){return this._getType(t)===Yt.undefined?ui(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ho.create=(e,t)=>new Ho({innerType:e,typeName:Pt.ZodOptional,...An(t)});class ac extends Mn{_parse(t){return this._getType(t)===Yt.null?ui(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ac.create=(e,t)=>new ac({innerType:e,typeName:Pt.ZodNullable,...An(t)});class Ym extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===Yt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Ym.create=(e,t)=>new Ym({innerType:e,typeName:Pt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...An(t)});class Xm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Bm(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Wi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Xm.create=(e,t)=>new Xm({innerType:e,typeName:Pt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...An(t)});class iv extends Mn{_parse(t){if(this._getType(t)!==Yt.nan){const r=this._getOrReturnCtx(t);return Kt(r,{code:Rt.invalid_type,expected:Yt.nan,received:r.parsedType}),vn}return{status:"valid",value:t.data}}}iv.create=e=>new iv({typeName:Pt.ZodNaN,...An(e)});const hie=Symbol("zod_brand");class kk extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class rg extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?vn:i.status==="dirty"?(n.dirty(),Pf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?vn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new rg({in:t,out:n,typeName:Pt.ZodPipeline})}}class Jm extends Mn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(cd(a)&&(a.value=Object.freeze(a.value)),a);return Bm(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}Jm.create=(e,t)=>new Jm({innerType:e,typeName:Pt.ZodReadonly,...An(t)});function P4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function UM(e,t={},n){return e?dh.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(u=>{var c,f;if(!u){const h=P4(t,r),m=(f=(c=h.fatal)!==null&&c!==void 0?c:n)!==null&&f!==void 0?f:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!s){const u=P4(t,r),c=(o=(i=u.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...u,fatal:c})}}):dh.create()}const pie={object:zr.lazycreate};var Pt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Pt||(Pt={}));const mie=(e,t={message:`Input not instance of ${e.name}`})=>UM(n=>n instanceof e,t),qM=Fo.create,HM=tc.create,gie=iv.create,yie=nc.create,VM=zm.create,bie=dd.create,vie=nv.create,wie=Um.create,_ie=qm.create,xie=dh.create,Sie=ad.create,Eie=Ll.create,Cie=rv.create,kie=qo.create,Aie=zr.create,Tie=zr.strictCreate,Rie=Hm.create,Nie=Aw.create,Iie=Vm.create,Oie=$s.create,Die=Gm.create,jie=av.create,Mie=fd.create,Pie=qf.create,Fie=Wm.create,Lie=Km.create,$ie=rc.create,Bie=Zm.create,zie=fh.create,F4=Xo.create,Uie=Ho.create,qie=ac.create,Hie=Xo.createWithPreprocess,Vie=rg.create,Gie=()=>qM().optional(),Wie=()=>HM().optional(),Kie=()=>VM().optional(),Zie={string:e=>Fo.create({...e,coerce:!0}),number:e=>tc.create({...e,coerce:!0}),boolean:e=>zm.create({...e,coerce:!0}),bigint:e=>nc.create({...e,coerce:!0}),date:e=>dd.create({...e,coerce:!0})},Yie=vn;var $=Object.freeze({__proto__:null,defaultErrorMap:ch,setErrorMap:Hae,getErrorMap:Qb,makeIssue:ev,EMPTY_PATH:Vae,addIssueToContext:Kt,ParseStatus:Ya,INVALID:vn,DIRTY:Pf,OK:ui,isAborted:iE,isDirty:oE,isValid:cd,isAsync:Bm,get util(){return Kn},get objectUtil(){return aE},ZodParsedType:Yt,getParsedType:Sl,ZodType:Mn,datetimeRegex:BM,ZodString:Fo,ZodNumber:tc,ZodBigInt:nc,ZodBoolean:zm,ZodDate:dd,ZodSymbol:nv,ZodUndefined:Um,ZodNull:qm,ZodAny:dh,ZodUnknown:ad,ZodNever:Ll,ZodVoid:rv,ZodArray:qo,ZodObject:zr,ZodUnion:Hm,ZodDiscriminatedUnion:Aw,ZodIntersection:Vm,ZodTuple:$s,ZodRecord:Gm,ZodMap:av,ZodSet:fd,ZodFunction:qf,ZodLazy:Wm,ZodLiteral:Km,ZodEnum:rc,ZodNativeEnum:Zm,ZodPromise:fh,ZodEffects:Xo,ZodTransformer:Xo,ZodOptional:Ho,ZodNullable:ac,ZodDefault:Ym,ZodCatch:Xm,ZodNaN:iv,BRAND:hie,ZodBranded:kk,ZodPipeline:rg,ZodReadonly:Jm,custom:UM,Schema:Mn,ZodSchema:Mn,late:pie,get ZodFirstPartyTypeKind(){return Pt},coerce:Zie,any:xie,array:kie,bigint:yie,boolean:VM,date:bie,discriminatedUnion:Nie,effect:F4,enum:$ie,function:Pie,instanceof:mie,intersection:Iie,lazy:Fie,literal:Lie,map:jie,nan:gie,nativeEnum:Bie,never:Eie,null:_ie,nullable:qie,number:HM,object:Aie,oboolean:Kie,onumber:Wie,optional:Uie,ostring:Gie,pipeline:Vie,preprocess:Hie,promise:zie,record:Die,set:Mie,strictObject:Tie,string:qM,symbol:vie,transformer:F4,tuple:Oie,undefined:wie,union:Rie,unknown:Sie,void:Cie,NEVER:Yie,ZodIssueCode:Rt,quotelessJson:qae,ZodError:Wi});function Xie(){return{}}function Jie(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==Pt.ZodAny&&(n.items=tr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&ur(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&ur(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(ur(n,"minItems",e.exactLength.value,e.exactLength.message,t),ur(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function Qie(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?ur(n,"minimum",r.value,r.message,t):ur(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),ur(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?ur(n,"maximum",r.value,r.message,t):ur(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),ur(n,"maximum",r.value,r.message,t));break;case"multipleOf":ur(n,"multipleOf",r.value,r.message,t);break}return n}function eoe(){return{type:"boolean"}}function GM(e,t){return tr(e.type._def,t)}const toe=(e,t)=>tr(e.innerType._def,t);function WM(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>WM(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return noe(e,t)}}const noe=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":ur(n,"minimum",r.value,r.message,t);break;case"max":ur(n,"maximum",r.value,r.message,t);break}return n};function roe(e,t){return{...tr(e.innerType._def,t),default:e.defaultValue()}}function aoe(e,t){return t.effectStrategy==="input"?tr(e.schema._def,t):{}}function ioe(e){return{type:"string",enum:Array.from(e.values)}}const ooe=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function soe(e,t){const n=[tr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),tr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(ooe(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...u}=i;o=u}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function loe(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let US;const Io={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(US===void 0&&(US=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),US),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function KM(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":ur(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":ur(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Oo(n,"email",r.message,t);break;case"format:idn-email":Oo(n,"idn-email",r.message,t);break;case"pattern:zod":oi(n,Io.email,r.message,t);break}break;case"url":Oo(n,"uri",r.message,t);break;case"uuid":Oo(n,"uuid",r.message,t);break;case"regex":oi(n,r.regex,r.message,t);break;case"cuid":oi(n,Io.cuid,r.message,t);break;case"cuid2":oi(n,Io.cuid2,r.message,t);break;case"startsWith":oi(n,RegExp(`^${qS(r.value,t)}`),r.message,t);break;case"endsWith":oi(n,RegExp(`${qS(r.value,t)}$`),r.message,t);break;case"datetime":Oo(n,"date-time",r.message,t);break;case"date":Oo(n,"date",r.message,t);break;case"time":Oo(n,"time",r.message,t);break;case"duration":Oo(n,"duration",r.message,t);break;case"length":ur(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),ur(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{oi(n,RegExp(qS(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Oo(n,"ipv4",r.message,t),r.version!=="v4"&&Oo(n,"ipv6",r.message,t);break}case"base64url":oi(n,Io.base64url,r.message,t);break;case"jwt":oi(n,Io.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&oi(n,Io.ipv4Cidr,r.message,t),r.version!=="v4"&&oi(n,Io.ipv6Cidr,r.message,t);break}case"emoji":oi(n,Io.emoji(),r.message,t);break;case"ulid":{oi(n,Io.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Oo(n,"binary",r.message,t);break}case"contentEncoding:base64":{ur(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{oi(n,Io.base64,r.message,t);break}}break}case"nanoid":oi(n,Io.nanoid,r.message,t)}return n}function qS(e,t){return t.patternStrategy==="escape"?coe(e):e}const uoe=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function coe(e){let t="";for(let n=0;n<e.length;n++)uoe.has(e[n])||(t+="\\"),t+=e[n];return t}function Oo(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):ur(e,"format",t,n,r)}function oi(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:L4(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):ur(e,"pattern",L4(t,r),n,r)}function L4(e,t){var u;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let c=0;c<r.length;c++){if(i){a+=r[c],i=!1;continue}if(n.i){if(o){if(r[c].match(/[a-z]/)){s?(a+=r[c],a+=`${r[c-2]}-${r[c]}`.toUpperCase(),s=!1):r[c+1]==="-"&&((u=r[c+2])!=null&&u.match(/[a-z]/))?(a+=r[c],s=!0):a+=`${r[c]}${r[c].toUpperCase()}`;continue}}else if(r[c].match(/[a-z]/)){a+=`[${r[c]}${r[c].toUpperCase()}]`;continue}}if(n.m){if(r[c]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[c]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[c]==="."){a+=o?`${r[c]}\r
`:`[${r[c]}\r
]`;continue}a+=r[c],r[c]==="\\"?i=!0:o&&r[c]==="]"?o=!1:!o&&r[c]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function ZM(e,t){var r,a,i,o,s,u;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===Pt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((c,f)=>({...c,[f]:tr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",f]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:tr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===Pt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:c,...f}=KM(e.keyType._def,t);return{...n,propertyNames:f}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===Pt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===Pt.ZodBranded&&e.keyType._def.type._def.typeName===Pt.ZodString&&((u=e.keyType._def.type._def.checks)!=null&&u.length)){const{type:c,...f}=GM(e.keyType._def,t);return{...n,propertyNames:f}}}return n}function doe(e,t){if(t.mapStrategy==="record")return ZM(e,t);const n=tr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=tr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function foe(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function hoe(){return{not:{}}}function poe(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const ov={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function moe(e,t){if(t.target==="openApi3")return $4(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in ov&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=ov[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return $4(e,t)}const $4=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>tr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function goe(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:ov[e.innerType._def.typeName],nullable:!0}:{type:[ov[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=tr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=tr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function yoe(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",MM(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?ur(n,"minimum",r.value,r.message,t):ur(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),ur(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?ur(n,"maximum",r.value,r.message,t):ur(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),ur(n,"maximum",r.value,r.message,t));break;case"multipleOf":ur(n,"multipleOf",r.value,r.message,t);break}return n}function boe(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let u=i[s];if(u===void 0||u._def===void 0)continue;let c=woe(u);c&&n&&(u instanceof Ho&&(u=u._def.innerType),u.isNullable()||(u=u.nullable()),c=!1);const f=tr(u._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});f!==void 0&&(r.properties[s]=f,c||a.push(s))}a.length&&(r.required=a);const o=voe(e,t);return o!==void 0&&(r.additionalProperties=o),r}function voe(e,t){if(e.catchall._def.typeName!=="ZodNever")return tr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function woe(e){try{return e.isOptional()}catch{return!0}}const _oe=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return tr(e.innerType._def,t);const n=tr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},xoe=(e,t)=>{if(t.pipeStrategy==="input")return tr(e.in._def,t);if(t.pipeStrategy==="output")return tr(e.out._def,t);const n=tr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=tr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Soe(e,t){return tr(e.type._def,t)}function Eoe(e,t){const r={type:"array",uniqueItems:!0,items:tr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&ur(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&ur(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Coe(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>tr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:tr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>tr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function koe(){return{not:{}}}function Aoe(){return{}}const Toe=(e,t)=>tr(e.innerType._def,t),Roe=(e,t,n)=>{switch(t){case Pt.ZodString:return KM(e,n);case Pt.ZodNumber:return yoe(e,n);case Pt.ZodObject:return boe(e,n);case Pt.ZodBigInt:return Qie(e,n);case Pt.ZodBoolean:return eoe();case Pt.ZodDate:return WM(e,n);case Pt.ZodUndefined:return koe();case Pt.ZodNull:return poe(n);case Pt.ZodArray:return Jie(e,n);case Pt.ZodUnion:case Pt.ZodDiscriminatedUnion:return moe(e,n);case Pt.ZodIntersection:return soe(e,n);case Pt.ZodTuple:return Coe(e,n);case Pt.ZodRecord:return ZM(e,n);case Pt.ZodLiteral:return loe(e,n);case Pt.ZodEnum:return ioe(e);case Pt.ZodNativeEnum:return foe(e);case Pt.ZodNullable:return goe(e,n);case Pt.ZodOptional:return _oe(e,n);case Pt.ZodMap:return doe(e,n);case Pt.ZodSet:return Eoe(e,n);case Pt.ZodLazy:return()=>e.getter()._def;case Pt.ZodPromise:return Soe(e,n);case Pt.ZodNaN:case Pt.ZodNever:return hoe();case Pt.ZodEffects:return aoe(e,n);case Pt.ZodAny:return Xie();case Pt.ZodUnknown:return Aoe();case Pt.ZodDefault:return roe(e,n);case Pt.ZodBranded:return GM(e,n);case Pt.ZodReadonly:return Toe(e,n);case Pt.ZodCatch:return toe(e,n);case Pt.ZodPipeline:return xoe(e,n);case Pt.ZodFunction:case Pt.ZodVoid:case Pt.ZodSymbol:return;default:return(r=>{})()}};function tr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const u=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(u!==Bae)return u}if(r&&!n){const u=Noe(r,t);if(u!==void 0)return u}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=Roe(e,e.typeName,t),o=typeof i=="function"?tr(i(),t):i;if(o&&Ooe(e,t,o),t.postProcess){const u=t.postProcess(o,e,t);return a.jsonSchema=o,u}return a.jsonSchema=o,o}const Noe=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Ioe(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Ioe=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Ooe=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Doe=(e,t)=>{const n=Uae(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,f])=>({...u,[c]:tr(f._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=tr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var Qm={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},e0={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},t0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},n0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},r0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},joe=[Qm,e0,t0,n0,r0];Qm.code+"",e0.code+"",t0.code+"",n0.code+"",r0.code+"";Qm.name+"",Qm.code,e0.name+"",e0.code,t0.name+"",t0.code,n0.name+"",n0.code,r0.name+"",r0.code;joe.map(e=>e.code);function Moe(e){const t=["ROOT"];let n=-1,r=null;function a(u,c,f){switch(u){case'"':{n=c,t.pop(),t.push(f),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=c,r=c,t.pop(),t.push(f),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=c,t.pop(),t.push(f),t.push("INSIDE_NUMBER");break}case"{":{n=c,t.pop(),t.push(f),t.push("INSIDE_OBJECT_START");break}case"[":{n=c,t.pop(),t.push(f),t.push("INSIDE_ARRAY_START");break}}}function i(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=c,t.pop();break}}}function o(u,c){switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=c,t.pop();break}}}for(let u=0;u<e.length;u++){const c=e[u];switch(t[t.length-1]){case"ROOT":a(c,u,"FINISH");break;case"INSIDE_OBJECT_START":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=u,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(c){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(c){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(c,u,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(c,u);break}case"INSIDE_STRING":{switch(c){case'"':{t.pop(),n=u;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=u}break}case"INSIDE_ARRAY_START":{switch(c){case"]":{n=u,t.pop();break}default:{n=u,a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(c){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}default:{n=u;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(c,u,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=u;break}case"INSIDE_NUMBER":{switch(c){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(c,u);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,u+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(c,u):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(c,u)):n=u;break}}}let s=e.slice(0,n+1);for(let u=t.length-1;u>=0;u--)switch(t[u]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const f=e.substring(r,e.length);"true".startsWith(f)?s+="true".slice(f.length):"false".startsWith(f)?s+="false".slice(f.length):"null".startsWith(f)&&(s+="null".slice(f.length))}}return s}function Poe(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=ud({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=ud({text:Moe(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Foe={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Loe={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},$oe={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Boe={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},zoe={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},Uoe={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},qoe={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Hoe={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},Voe={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},Goe={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},Woe={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},Koe={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},Zoe={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},Yoe={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},Xoe={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},Joe={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},Tw=[Foe,Loe,$oe,Boe,zoe,Uoe,qoe,Hoe,Voe,Goe,Woe,Koe,Zoe,Yoe,Xoe,Joe];Object.fromEntries(Tw.map(e=>[e.code,e]));Object.fromEntries(Tw.map(e=>[e.name,e.code]));Tw.map(e=>e.code);function Va(e,t){const n=Tw.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function Qoe(e,t){var n;const r=(n=void 0)!=null?n:!1;return ese(Doe(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var lE=Symbol.for("vercel.ai.schema");function ese(e,{validate:t}={}){return{[lE]:!0,_type:void 0,[Jb]:!0,jsonSchema:e,validate:t}}function tse(e){return typeof e=="object"&&e!==null&&lE in e&&e[lE]===!0&&"jsonSchema"in e&&"validate"in e}function Rw(e){return tse(e)?e:Qoe(e)}const B4=globalThis||void 0||self;var nse=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof B4=="object"?B4:{},rd="1.9.0",z4=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function rse(e){var t=new Set([e]),n=new Set,r=e.match(z4);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(u){return u===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(u){if(t.has(u))return!0;if(n.has(u))return!1;var c=u.match(z4);if(!c)return i(u);var f={major:+c[1],minor:+c[2],patch:+c[3],prerelease:c[4]};return f.prerelease!=null||a.major!==f.major?i(u):a.major===0?a.minor===f.minor&&a.patch<=f.patch?o(u):i(u):a.minor<=f.minor?o(u):i(u)}}var ase=rse(rd),ise=rd.split(".")[0],a0=Symbol.for("opentelemetry.js.api."+ise),i0=nse;function Ak(e,t,n,r){var a;r===void 0&&(r=!1);var i=i0[a0]=(a=i0[a0])!==null&&a!==void 0?a:{version:rd};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==rd){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+rd);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+rd+"."),!0}function o0(e){var t,n,r=(t=i0[a0])===null||t===void 0?void 0:t.version;if(!(!r||!ase(r)))return(n=i0[a0])===null||n===void 0?void 0:n[e]}function Tk(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+rd+".");var n=i0[a0];n&&delete n[e]}var ose=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},sse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},lse=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tm("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tm("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tm("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tm("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tm("verbose",this._namespace,t)},e}();function tm(e,t,n){var r=o0("diag");if(r)return n.unshift(t),r[e].apply(r,sse([],ose(n),!1))}var Ui;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ui||(Ui={}));function use(e,t){e<Ui.NONE?e=Ui.NONE:e>Ui.ALL&&(e=Ui.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",Ui.ERROR),warn:n("warn",Ui.WARN),info:n("info",Ui.INFO),debug:n("debug",Ui.DEBUG),verbose:n("verbose",Ui.VERBOSE)}}var cse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},dse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},fse="diag",sv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=o0("diag");if(s)return s[a].apply(s,dse([],cse(i),!1))}}var n=this,r=function(a,i){var o,s,u;if(i===void 0&&(i={logLevel:Ui.INFO}),a===n){var c=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=c.stack)!==null&&o!==void 0?o:c.message),!1}typeof i=="number"&&(i={logLevel:i});var f=o0("diag"),h=use((s=i.logLevel)!==null&&s!==void 0?s:Ui.INFO,a);if(f&&!i.suppressOverrideMessage){var m=(u=new Error().stack)!==null&&u!==void 0?u:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return Ak("diag",h,n,!0)};n.setLogger=r,n.disable=function(){Tk(fse,n)},n.createComponentLogger=function(a){return new lse(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function hse(e){return Symbol.for(e)}var pse=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),mse=new pse,gse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},yse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},bse=function(){function e(){}return e.prototype.active=function(){return mse},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,yse([r],gse(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),vse=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},wse=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},HS="context",_se=new bse,YM=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Ak(HS,t,sv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,wse([t,n,r],vse(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return o0(HS)||_se},e.prototype.disable=function(){this._getContextManager().disable(),Tk(HS,sv.instance())},e}(),uE;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(uE||(uE={}));var XM="0000000000000000",JM="00000000000000000000000000000000",xse={traceId:JM,spanId:XM,traceFlags:uE.NONE},fm=function(){function e(t){t===void 0&&(t=xse),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),Rk=hse("OpenTelemetry Context Key SPAN");function Nk(e){return e.getValue(Rk)||void 0}function Sse(){return Nk(YM.getInstance().active())}function Ik(e,t){return e.setValue(Rk,t)}function Ese(e){return e.deleteValue(Rk)}function Cse(e,t){return Ik(e,new fm(t))}function QM(e){var t;return(t=Nk(e))===null||t===void 0?void 0:t.spanContext()}var kse=/^([0-9a-f]{32})$/i,Ase=/^[0-9a-f]{16}$/i;function Tse(e){return kse.test(e)&&e!==JM}function Rse(e){return Ase.test(e)&&e!==XM}function e5(e){return Tse(e.traceId)&&Rse(e.spanId)}function Nse(e){return new fm(e)}var VS=YM.getInstance(),t5=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=VS.active());var a=!!(n!=null&&n.root);if(a)return new fm;var i=r&&QM(r);return Ise(i)&&e5(i)?new fm(i):new fm},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var u=o??VS.active(),c=this.startSpan(t,i,u),f=Ik(u,c);return VS.with(f,s,void 0,c)}},e}();function Ise(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Ose=new t5,Dse=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Ose},e}(),jse=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new t5},e}(),Mse=new jse,U4=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Dse(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Mse},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),lv;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(lv||(lv={}));var GS="trace",Pse=function(){function e(){this._proxyTracerProvider=new U4,this.wrapSpanContext=Nse,this.isSpanContextValid=e5,this.deleteSpan=Ese,this.getSpan=Nk,this.getActiveSpan=Sse,this.getSpanContext=QM,this.setSpan=Ik,this.setSpanContext=Cse}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=Ak(GS,this._proxyTracerProvider,sv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return o0(GS)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){Tk(GS,sv.instance()),this._proxyTracerProvider=new U4},e}(),Fse=Pse.getInstance(),Lse=Object.defineProperty,Ok=(e,t)=>{for(var n in t)Lse(e,n,{get:t[n],enumerable:!0})};function uv(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function q4(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function H4({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:u}=await i.read();if(s)break;e.write(u)}}catch(s){throw s}finally{e.end()}})()}var n5="AI_InvalidArgumentError",r5=`vercel.ai.error.${n5}`,$se=Symbol.for(r5),a5,jo=class extends xn{constructor({parameter:t,value:n,message:r}){super({name:n5,message:`Invalid argument for parameter ${t}: ${r}`}),this[a5]=!0,this.parameter=t,this.value=n}static isInstance(t){return xn.hasMarker(t,r5)}};a5=$se;var i5="AI_RetryError",o5=`vercel.ai.error.${i5}`,Bse=Symbol.for(o5),s5,V4=class extends xn{constructor({message:e,reason:t,errors:n}){super({name:i5,message:e}),this[s5]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return xn.hasMarker(e,o5)}};s5=Bse;var zse=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>l5(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function l5(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(hb(i)||t===0)throw i;const o=kae(i),s=[...a,i],u=s.length;if(u>t)throw new V4({message:`Failed after ${u} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&da.isInstance(i)&&i.isRetryable===!0&&u<=t)return await Sae(n),l5(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw u===1?i:new V4({message:`Failed after ${u} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function Use({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new jo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new jo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:zse({maxRetries:t})}}function cE({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function qse({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var Hse={startSpan(){return Xy},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Xy);if(typeof n=="function")return n(Xy);if(typeof r=="function")return r(Xy)}},Xy={spanContext(){return Vse},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},Vse={traceId:"",spanId:"",traceFlags:0};function Gse({isEnabled:e=!1,tracer:t}={}){return e?t||Fse.getTracer("ai"):Hse}function dE({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:lv.ERROR,message:o.message})):i.setStatus({code:lv.ERROR})}finally{i.end()}throw o}})}function Ff({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var Wse=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=uh(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=DM(this.base64Data)),this.uint8ArrayData}},Kse=class extends Wse{constructor(e){super(e),this.type="file"}},Zse=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function Yse(e){for(const t of Zse)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var u5="AI_NoObjectGeneratedError",c5=`vercel.ai.error.${u5}`,Xse=Symbol.for(c5),d5,G4=class extends xn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:u5,message:e,cause:t}),this[d5]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return xn.hasMarker(e,c5)}};d5=Xse;var f5="AI_DownloadError",h5=`vercel.ai.error.${f5}`,Jse=Symbol.for(h5),p5,WS=class extends xn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:f5,message:a,cause:r}),this[p5]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return xn.hasMarker(e,h5)}};p5=Jse;async function Qse({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new WS({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw WS.isInstance(a)?a:new WS({url:r,cause:a})}}var m5="AI_InvalidDataContentError",g5=`vercel.ai.error.${m5}`,ele=Symbol.for(g5),y5,W4=class extends xn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:m5,message:n,cause:t}),this[y5]=!0,this.content=e}static isInstance(e){return xn.hasMarker(e,g5)}};y5=ele;var b5=$.union([$.string(),$.instanceof(Uint8Array),$.instanceof(ArrayBuffer),$.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function v5(e){return typeof e=="string"?e:e instanceof ArrayBuffer?uh(new Uint8Array(e)):uh(e)}function cv(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return DM(e)}catch(t){throw new W4({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new W4({content:e})}function tle(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var w5="AI_InvalidMessageRoleError",_5=`vercel.ai.error.${w5}`,nle=Symbol.for(_5),x5,rle=class extends xn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:w5,message:t}),this[x5]=!0,this.role=e}static isInstance(e){return xn.hasMarker(e,_5)}};x5=nle;function ale(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function ile({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=Qse}){const a=await sle(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>ole(i,a))]}function ole(e,t){var n,r,a,i,o,s;const u=e.role;switch(u){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(c=>lle(c,t)).filter(c=>c.type!=="text"||c.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(c=>c.type!=="text"||c.text!=="").map(c=>{var f;const h=(f=c.providerOptions)!=null?f:c.experimental_providerMetadata;switch(c.type){case"file":return{type:"file",data:c.data instanceof URL?c.data:v5(c.data),filename:c.filename,mimeType:c.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:c.text,signature:c.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:c.data,providerMetadata:h};case"text":return{type:"text",text:c.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:c.toolCallId,toolName:c.toolName,args:c.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(c=>{var f;return{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result,content:c.experimental_content,isError:c.isError,providerMetadata:(f=c.providerOptions)!=null?f:c.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const c=u;throw new rle({role:c})}}}async function sle(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function lle(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,u,c;const f=e.type;switch(f){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${f}`)}try{u=typeof s=="string"?new URL(s):s}catch{u=s}if(u instanceof URL)if(u.protocol==="data:"){const{mimeType:h,base64Content:m}=ale(u.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${f}`);o=h,c=cv(m)}else{const h=t[u.toString()];h?(c=h.data,o??(o=h.mimeType)):c=u}else c=cv(u);switch(f){case"image":return c instanceof Uint8Array&&(o=(r=Yse(c))!=null?r:o),{type:"image",image:c,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:c instanceof Uint8Array?v5(c):c,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function ule({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new jo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new jo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new jo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new jo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new jo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new jo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new jo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new jo({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function K4(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,u,c;try{[s,u]=i.url.split(","),c=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(c==null||u==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:cv(u)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:tle(cv(u))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:u,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var S5="AI_MessageConversionError",E5=`vercel.ai.error.${S5}`,cle=Symbol.for(E5),C5,KS=class extends xn{constructor({originalMessage:e,message:t}){super({name:S5,message:t}),this[C5]=!0,this.originalMessage=e}static isInstance(e){return xn.hasMarker(e,E5)}};C5=cle;function dle(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],u=o===e.length-1,{role:c,content:f,experimental_attachments:h}=s;switch(c){case"system":{i.push({role:"system",content:f});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:f},...K4(h)]:f});else{const m=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,...K4(h)]:m})}break}case"assistant":{if(s.parts!=null){let w=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const A of C.details)switch(A.type){case"text":S.push({type:"reasoning",text:A.text,signature:A.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:A.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const A=C;throw new Error(`Unsupported part: ${A}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new KS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:A,toolName:O,result:I}=C,D=a[O];return(D==null?void 0:D.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:A,toolName:O,result:D.experimental_toToolResultContent(I),experimental_content:D.experimental_toToolResultContent(I)}:{type:"tool-result",toolCallId:A,toolName:O,result:I}})}),x=[],_=!1,v++},v=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&w(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==v&&w(),x.push(S),_=!0;break}}w();break}const m=s.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:f});break}const g=m.reduce((w,v)=>{var _;return Math.max(w,(_=v.step)!=null?_:0)},0);for(let w=0;w<=g;w++){const v=m.filter(_=>{var x;return((x=_.step)!=null?x:0)===w});v.length!==0&&(i.push({role:"assistant",content:[...u&&f&&w===0?[{type:"text",text:f}]:[],...v.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:v.map(_=>{if(!("result"in _))throw new KS({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}f&&!u&&i.push({role:"assistant",content:f});break}case"data":break;default:{const m=c;throw new KS({originalMessage:s,message:`Unsupported role: ${m}`})}}}return i}function fle(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(hle);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function hle(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var fE=$.lazy(()=>$.union([$.null(),$.string(),$.number(),$.boolean(),$.record($.string(),fE),$.array(fE)])),Wr=$.record($.string(),$.record($.string(),fE)),ple=$.array($.union([$.object({type:$.literal("text"),text:$.string()}),$.object({type:$.literal("image"),data:$.string(),mimeType:$.string().optional()})])),k5=$.object({type:$.literal("text"),text:$.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),mle=$.object({type:$.literal("image"),image:$.union([b5,$.instanceof(URL)]),mimeType:$.string().optional(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),A5=$.object({type:$.literal("file"),data:$.union([b5,$.instanceof(URL)]),filename:$.string().optional(),mimeType:$.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),gle=$.object({type:$.literal("reasoning"),text:$.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),yle=$.object({type:$.literal("redacted-reasoning"),data:$.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),ble=$.object({type:$.literal("tool-call"),toolCallId:$.string(),toolName:$.string(),args:$.unknown(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),vle=$.object({type:$.literal("tool-result"),toolCallId:$.string(),toolName:$.string(),result:$.unknown(),content:ple.optional(),isError:$.boolean().optional(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),wle=$.object({role:$.literal("system"),content:$.string(),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),_le=$.object({role:$.literal("user"),content:$.union([$.string(),$.array($.union([k5,mle,A5]))]),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),xle=$.object({role:$.literal("assistant"),content:$.union([$.string(),$.array($.union([k5,A5,gle,yle,ble]))]),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Sle=$.object({role:$.literal("tool"),content:$.array(vle),providerOptions:Wr.optional(),experimental_providerMetadata:Wr.optional()}),Ele=$.union([wle,_le,xle,Sle]);function Cle({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new wl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new wl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new wl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new wl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=fle(e.messages);if(n==="other")throw new wl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?dle(e.messages,{tools:t}):e.messages;if(r.length===0)throw new wl({prompt:e,message:"messages must not be empty"});const a=Ph({value:r,schema:$.array(Ele)});if(!a.success)throw new wl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function kle({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Ale(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Tle="JSON schema:",Rle="You MUST answer with a JSON object that matches the JSON schema above.",Nle="You MUST answer with JSON.";function Ile({prompt:e,schema:t,schemaPrefix:n=t!=null?Tle:void 0,schemaSuffix:r=t!=null?Rle:Nle}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function ZS(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Ad({prefix:"aiobj",size:24});var bi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function Z4(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Ole(){let e=[],t=null,n=!1,r=Z4();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=Z4(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Dle(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Ad({prefix:"aiobj",size:24});var T5="AI_NoOutputSpecifiedError",R5=`vercel.ai.error.${T5}`,jle=Symbol.for(R5),N5,Mle=class extends xn{constructor({message:e="No output specified."}={}){super({name:T5,message:e}),this[N5]=!0}static isInstance(e){return xn.hasMarker(e,R5)}};N5=jle;var I5="AI_ToolExecutionError",O5=`vercel.ai.error.${I5}`,Ple=Symbol.for(O5),D5,Fle=class extends xn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${tg(r)}`}){super({name:I5,message:a,cause:r}),this[D5]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return xn.hasMarker(e,O5)}};D5=Ple;function Lle(e){return e!=null&&Object.keys(e).length>0}function $le({tools:e,toolChoice:t,activeTools:n}){return Lle(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:Rw(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var Ble=/^([\s\S]*?)(\s+)(\S*)$/;function zle(e){const t=e.match(Ble);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var j5="AI_InvalidToolArgumentsError",M5=`vercel.ai.error.${j5}`,Ule=Symbol.for(M5),P5,F5=class extends xn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${tg(n)}`}){super({name:j5,message:r,cause:n}),this[P5]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return xn.hasMarker(e,M5)}};P5=Ule;var L5="AI_NoSuchToolError",$5=`vercel.ai.error.${L5}`,qle=Symbol.for($5),B5,hE=class extends xn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:L5,message:n}),this[B5]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return xn.hasMarker(e,$5)}};B5=qle;var z5="AI_ToolCallRepairError",U5=`vercel.ai.error.${z5}`,Hle=Symbol.for(U5),q5,Vle=class extends xn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${tg(e)}`}){super({name:z5,message:n,cause:e}),this[q5]=!0,this.originalError=t}static isInstance(e){return xn.hasMarker(e,U5)}};q5=Hle;async function Gle({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new hE({toolName:e.toolName});try{return await Y4({toolCall:e,tools:t})}catch(i){if(n==null||!(hE.isInstance(i)||F5.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>Rw(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new Vle({cause:s,originalError:i})}if(o==null)throw i;return await Y4({toolCall:o,tools:t})}}async function Y4({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new hE({toolName:e.toolName,availableTools:Object.keys(t)});const a=Rw(r.parameters),i=e.args.trim()===""?Ph({value:{},schema:a}):ud({text:e.args,schema:a});if(i.success===!1)throw new F5({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function Wle(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function X4({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const u=[];return u.push({role:"assistant",content:[...n.map(c=>c.type==="text"?{...c,type:"reasoning"}:{...c,type:"redacted-reasoning"}),...t.map(c=>({type:"file",data:c.base64,mimeType:c.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&u.push({role:"tool",id:s(),content:i.map(c=>{const f=r[c.toolName];return(f==null?void 0:f.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:f.experimental_toToolResultContent(c.result),experimental_content:f.experimental_toToolResultContent(c.result)}:{type:"tool-result",toolCallId:c.toolCallId,toolName:c.toolName,result:c.result}})}),u}Ad({prefix:"aitxt",size:24});Ad({prefix:"msg",size:24});var Kle={};Ok(Kle,{object:()=>Jle,text:()=>Xle});var H5="AI_InvalidStreamPartError",V5=`vercel.ai.error.${H5}`,Zle=Symbol.for(V5),G5,Yle=class extends xn{constructor({chunk:e,message:t}){super({name:H5,message:t}),this[G5]=!0,this.chunk=e}static isInstance(e){return xn.hasMarker(e,V5)}};G5=Zle;var Xle=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),Jle=({schema:e})=>{const t=Rw(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Ile({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=Poe(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=ud({text:n});if(!a.success)throw new G4({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=Ph({value:a.value,schema:t});if(!i.success)throw new G4({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function Qle(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Dk(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function u(f){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}async function c(f){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?f.close():f.enqueue(h.value)}catch(h){f.error(h)}}return new ReadableStream({async pull(f){try{if(o){await c(f);return}if(s){await u(f);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||f.enqueue(h.value),m===n?(a=void 0,h.done&&(await c(f),o=!0)):(i=void 0,h.done&&(s=!0,await u(f)))}catch(h){f.error(h)}},cancel(){n.cancel(),r.cancel()}})}function eue({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:u}){let c=null;const f=new ReadableStream({start(x){c=x}}),h={},m=new Set;let g=!1,w;function v(){g&&m.size===0&&(w!=null&&c.enqueue(w),c.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new Kse({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await Gle({toolCall:x,tools:e,repairToolCall:u,system:i,messages:o});S.enqueue(C);const A=e[C.toolName];if(A.execute!=null){const O=Rs();m.add(O),dE({name:"ai.toolCall",attributes:Ff({telemetry:a,attributes:{...cE({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async I=>A.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(D=>{c.enqueue({...C,type:"tool-result",result:D}),m.delete(O),v();try{I.setAttributes(Ff({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(D)}}}))}catch{}},D=>{c.enqueue({type:"error",error:new Fle({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:D})}),m.delete(O),v()})})}}catch(C){c.enqueue({type:"error",error:C})}break}case"finish":{w={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:kle(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,v()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),f.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var tue=Ad({prefix:"aitxt",size:24}),nue=Ad({prefix:"msg",size:24});function rue({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:u,maxSteps:c=1,experimental_generateMessageId:f=nue,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:w,providerOptions:v=w,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:A,onError:O,onFinish:I,onStepFinish:D,_internal:{now:B=Dle,generateId:W=tue,currentDate:Q=()=>new Date}={},...M}){return new iue({model:e,telemetry:g,headers:u,settings:M,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:Qle(C),activeTools:S,repairToolCall:E,maxSteps:c,output:h,continueSteps:m,providerOptions:v,onChunk:A,onError:O,onFinish:I,onStepFinish:D,now:B,currentDate:Q,generateId:W,generateMessageId:f})}function aue(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const u=JSON.stringify(s.partial);u!==r&&(a({controller:o,partialOutput:s.partial}),r=u)}},flush(i){n.length>0&&a({controller:i})}})}var iue=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:u,tools:c,toolChoice:f,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:w,maxSteps:v,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:A,generateMessageId:O,onChunk:I,onError:D,onFinish:B,onStepFinish:W}){this.warningsPromise=new bi,this.usagePromise=new bi,this.finishReasonPromise=new bi,this.providerMetadataPromise=new bi,this.textPromise=new bi,this.reasoningPromise=new bi,this.reasoningDetailsPromise=new bi,this.sourcesPromise=new bi,this.filesPromise=new bi,this.toolCallsPromise=new bi,this.toolResultsPromise=new bi,this.requestPromise=new bi,this.responsePromise=new bi,this.stepsPromise=new bi;var Q;if(v<1)throw new jo({parameter:"maxSteps",value:v,message:"maxSteps must be at least 1"});this.output=_;let M="",K="",U="",me=[],se=[],ne,ee=[];const ae=[],G={id:A(),timestamp:C(),modelId:e.modelId,messages:[]};let Y=[],J=[],re,we,ke="initial";const Me=[];let Pe;const Re=new TransformStream({async transform(ce,ie){ie.enqueue(ce);const{part:X}=ce;if((X.type==="text-delta"||X.type==="reasoning"||X.type==="source"||X.type==="tool-call"||X.type==="tool-result"||X.type==="tool-call-streaming-start"||X.type==="tool-call-delta")&&await(I==null?void 0:I({chunk:X})),X.type==="error"&&await(D==null?void 0:D({error:X.error})),X.type==="text-delta"&&(M+=X.textDelta,K+=X.textDelta,U+=X.textDelta),X.type==="reasoning"&&(ne==null?(ne={type:"text",text:X.textDelta},me.push(ne)):ne.text+=X.textDelta),X.type==="reasoning-signature"){if(ne==null)throw new xn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});ne.signature=X.signature,ne=void 0}if(X.type==="redacted-reasoning"&&me.push({type:"redacted",data:X.data}),X.type==="file"&&se.push(X),X.type==="source"&&(ae.push(X.source),ee.push(X.source)),X.type==="tool-call"&&Y.push(X),X.type==="tool-result"&&J.push(X),X.type==="step-finish"){const _e=X4({text:K,files:se,reasoning:me,tools:c??{},toolCalls:Y,toolResults:J,messageId:X.messageId,generateMessageId:O}),Le=Me.length;let xe="done";Le+1<v&&(x&&X.finishReason==="length"&&Y.length===0?xe="continue":Y.length>0&&J.length===Y.length&&(xe="tool-result"));const Ve={stepType:ke,text:M,reasoning:Wle(me),reasoningDetails:me,files:se,sources:ee,toolCalls:Y,toolResults:J,finishReason:X.finishReason,usage:X.usage,warnings:X.warnings,logprobs:X.logprobs,request:X.request,response:{...X.response,messages:[...G.messages,..._e]},providerMetadata:X.experimental_providerMetadata,experimental_providerMetadata:X.experimental_providerMetadata,isContinued:X.isContinued};await(W==null?void 0:W(Ve)),Me.push(Ve),Y=[],J=[],M="",ee=[],me=[],se=[],ne=void 0,xe!=="done"&&(ke=xe),xe!=="continue"&&(G.messages.push(..._e),K="")}X.type==="finish"&&(G.id=X.response.id,G.timestamp=X.response.timestamp,G.modelId=X.response.modelId,G.headers=X.response.headers,we=X.usage,re=X.finishReason)},async flush(ce){var ie;try{if(Me.length===0)return;const X=Me[Me.length-1];Ne.warningsPromise.resolve(X.warnings),Ne.requestPromise.resolve(X.request),Ne.responsePromise.resolve(X.response),Ne.toolCallsPromise.resolve(X.toolCalls),Ne.toolResultsPromise.resolve(X.toolResults),Ne.providerMetadataPromise.resolve(X.experimental_providerMetadata),Ne.reasoningPromise.resolve(X.reasoning),Ne.reasoningDetailsPromise.resolve(X.reasoningDetails);const _e=re??"unknown",Le=we??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ne.finishReasonPromise.resolve(_e),Ne.usagePromise.resolve(Le),Ne.textPromise.resolve(U),Ne.sourcesPromise.resolve(ae),Ne.filesPromise.resolve(X.files),Ne.stepsPromise.resolve(Me),await(B==null?void 0:B({finishReason:_e,logprobs:void 0,usage:Le,text:U,reasoning:X.reasoning,reasoningDetails:X.reasoningDetails,files:X.files,sources:X.sources,toolCalls:X.toolCalls,toolResults:X.toolResults,request:(ie=X.request)!=null?ie:{},response:X.response,warnings:X.warnings,providerMetadata:X.providerMetadata,experimental_providerMetadata:X.experimental_providerMetadata,steps:Me})),Pe.setAttributes(Ff({telemetry:t,attributes:{"ai.response.finishReason":_e,"ai.response.text":{output:()=>U},"ai.response.toolCalls":{output:()=>{var xe;return(xe=X.toolCalls)!=null&&xe.length?JSON.stringify(X.toolCalls):void 0}},"ai.usage.promptTokens":Le.promptTokens,"ai.usage.completionTokens":Le.completionTokens}}))}catch(X){ce.error(X)}finally{Pe.end()}}}),Ae=Ole();this.addStream=Ae.addStream,this.closeStream=Ae.close;let He=Ae.stream;for(const ce of m)He=He.pipeThrough(ce({tools:c,stopStream(){Ae.terminate()}}));this.baseStream=He.pipeThrough(aue(_)).pipeThrough(Re);const{maxRetries:st,retry:Oe}=Use({maxRetries:a}),Te=Gse(t),z=qse({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:st}}),Ce=Cle({prompt:{system:(Q=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?Q:o,prompt:s,messages:u},tools:c}),Ne=this;dE({name:"ai.streamText",attributes:Ff({telemetry:t,attributes:{...cE({operationId:"ai.streamText",telemetry:t}),...z,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:u})},"ai.settings.maxSteps":v}}),tracer:Te,endWhenDone:!1,fn:async ce=>{Pe=ce;async function ie({currentStep:X,responseMessages:_e,usage:Le,stepType:xe,previousStepText:Ve,hasLeadingWhitespace:xt,messageId:ft}){var Et;const Lt=_e.length===0?Ce.type:"messages",Tt=[...Ce.messages,..._e],zt=await ile({prompt:{type:Lt,system:Ce.system,messages:Tt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Et=e.supportsUrl)==null?void 0:Et.bind(e)}),ge={type:"regular",...$le({tools:c,toolChoice:f,activeTools:g})},{result:{stream:R,warnings:H,rawResponse:fe,request:Ie},doStreamSpan:be,startTimestampMs:Ee}=await Oe(()=>dE({name:"ai.streamText.doStream",attributes:Ff({telemetry:t,attributes:{...cE({operationId:"ai.streamText.doStream",telemetry:t}),...z,"ai.prompt.format":{input:()=>Lt},"ai.prompt.messages":{input:()=>JSON.stringify(zt)},"ai.prompt.tools":{input:()=>{var Bt;return(Bt=ge.tools)==null?void 0:Bt.map(Vt=>JSON.stringify(Vt))}},"ai.prompt.toolChoice":{input:()=>ge.toolChoice!=null?JSON.stringify(ge.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Te,endWhenDone:!1,fn:async Bt=>({startTimestampMs:E(),doStreamSpan:Bt,result:await e.doStream({mode:ge,...ule(r),inputFormat:Lt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:zt,providerMetadata:S,abortSignal:i,headers:n})})})),le=eue({tools:c,generatorStream:R,toolCallStreaming:h,tracer:Te,telemetry:t,system:o,messages:Tt,repairToolCall:w,abortSignal:i}),ct=Ie??{},yt=[],P=[],Be=[],et=[];let pe,De="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Ct,ye=!0,q="",L=xe==="continue"?Ve:"",V,he={id:A(),timestamp:C(),modelId:e.modelId},de="",Fe=!1,it=!0,Dt=!1;async function un({controller:Bt,chunk:Vt}){Bt.enqueue(Vt),q+=Vt.textDelta,L+=Vt.textDelta,Fe=!0,Dt=Vt.textDelta.trimEnd()!==Vt.textDelta}Ne.addStream(le.pipeThrough(new TransformStream({async transform(Bt,Vt){var Xt,Tn,$n;if(ye){const dr=E()-Ee;ye=!1,be.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":dr}),be.setAttributes({"ai.response.msToFirstChunk":dr}),Vt.enqueue({type:"step-start",messageId:ft,request:ct,warnings:H??[]})}if(Bt.type==="text-delta"&&Bt.textDelta.length===0)return;const cr=Bt.type;switch(cr){case"text-delta":{if(x){const dr=it&&xt?Bt.textDelta.trimStart():Bt.textDelta;if(dr.length===0)break;it=!1,de+=dr;const Dn=zle(de);Dn!=null&&(de=Dn.suffix,await un({controller:Vt,chunk:{type:"text-delta",textDelta:Dn.prefix+Dn.whitespace}}))}else await un({controller:Vt,chunk:Bt});break}case"reasoning":{Vt.enqueue(Bt),pe==null?(pe={type:"text",text:Bt.textDelta},Be.push(pe)):pe.text+=Bt.textDelta;break}case"reasoning-signature":{if(Vt.enqueue(Bt),pe==null)throw new Yle({chunk:Bt,message:"reasoning-signature without reasoning"});pe.signature=Bt.signature,pe=void 0;break}case"redacted-reasoning":{Vt.enqueue(Bt),Be.push({type:"redacted",data:Bt.data});break}case"tool-call":{Vt.enqueue(Bt),yt.push(Bt);break}case"tool-result":{Vt.enqueue(Bt),P.push(Bt);break}case"response-metadata":{he={id:(Xt=Bt.id)!=null?Xt:he.id,timestamp:(Tn=Bt.timestamp)!=null?Tn:he.timestamp,modelId:($n=Bt.modelId)!=null?$n:he.modelId};break}case"finish":{Ke=Bt.usage,De=Bt.finishReason,Ct=Bt.experimental_providerMetadata,V=Bt.logprobs;const dr=E()-Ee;be.addEvent("ai.stream.finish"),be.setAttributes({"ai.response.msToFinish":dr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/dr});break}case"file":{et.push(Bt),Vt.enqueue(Bt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Vt.enqueue(Bt);break}case"error":{Vt.enqueue(Bt),De="error";break}default:{const dr=cr;throw new Error(`Unknown chunk type: ${dr}`)}}},async flush(Bt){const Vt=yt.length>0?JSON.stringify(yt):void 0;let Xt="done";X+1<v&&(x&&De==="length"&&yt.length===0?Xt="continue":yt.length>0&&P.length===yt.length&&(Xt="tool-result")),x&&de.length>0&&(Xt!=="continue"||xe==="continue"&&!Fe)&&(await un({controller:Bt,chunk:{type:"text-delta",textDelta:de}}),de="");try{be.setAttributes(Ff({telemetry:t,attributes:{"ai.response.finishReason":De,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>Vt},"ai.response.id":he.id,"ai.response.model":he.modelId,"ai.response.timestamp":he.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[De],"gen_ai.response.id":he.id,"gen_ai.response.model":he.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{be.end()}Bt.enqueue({type:"step-finish",finishReason:De,usage:Ke,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:V,request:ct,response:{...he,headers:fe==null?void 0:fe.headers},warnings:H,isContinued:Xt==="continue",messageId:ft});const Tn=Ale(Le,Ke);if(Xt==="done")Bt.enqueue({type:"finish",finishReason:De,usage:Tn,providerMetadata:Ct,experimental_providerMetadata:Ct,logprobs:V,response:{...he,headers:fe==null?void 0:fe.headers}}),Ne.closeStream();else{if(xe==="continue"){const $n=_e[_e.length-1];typeof $n.content=="string"?$n.content+=q:$n.content.push({text:q,type:"text"})}else _e.push(...X4({text:q,files:et,reasoning:Be,tools:c??{},toolCalls:yt,toolResults:P,messageId:ft,generateMessageId:O}));await ie({currentStep:X+1,responseMessages:_e,usage:Tn,stepType:Xt,previousStepText:L,hasLeadingWhitespace:Dt,messageId:Xt==="continue"?ft:O()})}}})))}await ie({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:O()})}}).catch(ce=>{Ne.addStream(new ReadableStream({start(ie){ie.enqueue({type:"error",error:ce}),ie.close()}})),Ne.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return ZS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return ZS(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new Mle;return ZS(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Va("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Va("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Va("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Va("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Va("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Va("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Va("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Va("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Va("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Va("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Va("error",e(i.error)));break}case"step-start":{o.enqueue(Va("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Va("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Va("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const u=s;throw new Error(`Unknown chunk type: ${u}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c}={}){H4({response:e,status:t,statusText:n,headers:q4(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:u,experimental_sendFinish:c})})}pipeTextStreamToResponse(e,t){H4({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:q4(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?Dk(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:u}),{status:t,statusText:n,headers:uv(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:uv(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},oue=$.object({name:$.string(),version:$.string()}).passthrough(),jk=$.object({_meta:$.optional($.object({}).passthrough())}).passthrough(),s0=jk,sue=$.object({method:$.string(),params:$.optional(jk)}),lue=$.object({experimental:$.optional($.object({}).passthrough()),logging:$.optional($.object({}).passthrough()),prompts:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough()),resources:$.optional($.object({subscribe:$.optional($.boolean()),listChanged:$.optional($.boolean())}).passthrough()),tools:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough())}).passthrough();s0.extend({protocolVersion:$.string(),capabilities:lue,serverInfo:oue,instructions:$.optional($.string())});var uue=s0.extend({nextCursor:$.optional($.string())}),cue=$.object({name:$.string(),description:$.optional($.string()),inputSchema:$.object({type:$.literal("object"),properties:$.optional($.object({}).passthrough())}).passthrough()}).passthrough();uue.extend({tools:$.array(cue)});var due=$.object({type:$.literal("text"),text:$.string()}).passthrough(),fue=$.object({type:$.literal("image"),data:$.string().base64(),mimeType:$.string()}).passthrough(),W5=$.object({uri:$.string(),mimeType:$.optional($.string())}).passthrough(),hue=W5.extend({text:$.string()}),pue=W5.extend({blob:$.string().base64()}),mue=$.object({type:$.literal("resource"),resource:$.union([hue,pue])}).passthrough();s0.extend({content:$.array($.union([due,fue,mue])),isError:$.boolean().default(!1).optional()}).or(s0.extend({toolResult:$.unknown()}));var Nw="2.0",gue=$.object({jsonrpc:$.literal(Nw),id:$.union([$.string(),$.number().int()])}).merge(sue).strict(),yue=$.object({jsonrpc:$.literal(Nw),id:$.union([$.string(),$.number().int()]),result:s0}).strict(),bue=$.object({jsonrpc:$.literal(Nw),id:$.union([$.string(),$.number().int()]),error:$.object({code:$.number().int(),message:$.string(),data:$.optional($.unknown())})}).strict(),vue=$.object({jsonrpc:$.literal(Nw)}).merge($.object({method:$.string(),params:$.optional(jk)})).strict();$.union([gue,vue,yue,bue]);var wue={};Ok(wue,{mergeIntoDataStream:()=>Sue,toDataStream:()=>_ue,toDataStreamResponse:()=>xue});function K5(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function Mk(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&J4((a=n.data)==null?void 0:a.chunk,r);return}J4(n,r)}})).pipeThrough(K5(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Va("text",n))}}))}function _ue(e,t){return Mk(e,t).pipeThrough(new TextEncoderStream)}function xue(e,t){var n;const r=Mk(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?Dk(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:uv(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Sue(e,t){t.dataStream.merge(Mk(e,t.callbacks))}function J4(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Eue={};Ok(Eue,{mergeIntoDataStream:()=>Aue,toDataStream:()=>Cue,toDataStreamResponse:()=>kue});function Pk(e,t){const n=Tue();return xae(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(K5(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Va("text",r))}}))}function Cue(e,t){return Pk(e,t).pipeThrough(new TextEncoderStream)}function kue(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=Pk(e,i).pipeThrough(new TextEncoderStream),s=a?Dk(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:uv(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Aue(e,t){t.dataStream.merge(Pk(e,t.callbacks))}function Tue(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}function Rue({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,u)=>{var c,f,h,m;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(c=s.mimeType)!=null?c:"image/jpeg"};base64,${uh(s.image)}`,detail:(h=(f=s.providerMetadata)==null?void 0:f.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new br({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=s.filename)!=null?m:`part-${u}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new br({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const u=[];for(const c of o)switch(c.type){case"text":{s+=c.text;break}case"tool-call":{u.push({id:c.toolCallId,type:"function",function:{name:c.toolName,arguments:JSON.stringify(c.args)}});break}}if(t){if(u.length>1)throw new br({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:u.length>0?u[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:u.length>0?u:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function Q4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function dv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Fk=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),ic=OM({errorSchema:Fk,errorToMessage:e=>e.error.message});function fv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Nue({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const c=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):c.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:c,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:c,function_call:void 0,toolWarnings:i};case"required":throw new br({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:c,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const c of a)c.type==="provider-defined"?i.push({type:"unsupported-tool",tool:c}):s.push({type:"function",function:{name:c.name,description:c.description,parameters:c.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const u=o.type;switch(u){case"auto":case"none":case"required":return{tools:s,tool_choice:u,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const c=u;throw new br({functionality:`Unsupported tool choice type: ${c}`})}}}var Iue=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:pE(this.modelId)}get defaultObjectGenerationMode(){return jue(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g,w,v,_,x,S,E;const C=e.type,A=[];i!=null&&A.push({type:"unsupported-setting",setting:"topK"}),(c==null?void 0:c.type)==="json"&&c.schema!=null&&!this.supportsStructuredOutputs&&A.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const O=this.settings.useLegacyFunctionCalling;if(O&&this.settings.parallelToolCalls===!0)throw new br({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(O&&this.supportsStructuredOutputs)throw new br({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:I,warnings:D}=Rue({prompt:t,useLegacyFunctionCalling:O,systemMessageMode:Mue(this.modelId)});A.push(...D);const B={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(c==null?void 0:c.type)==="json"?this.supportsStructuredOutputs&&c.schema!=null?{type:"json_schema",json_schema:{schema:c.schema,strict:!0,name:(m=c.name)!=null?m:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:f,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(w=h==null?void 0:h.openai)==null?void 0:w.store,metadata:(v=h==null?void 0:h.openai)==null?void 0:v.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:I};switch(pE(this.modelId)&&(B.temperature!=null&&(B.temperature=void 0,A.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),B.top_p!=null&&(B.top_p=void 0,A.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),B.frequency_penalty!=null&&(B.frequency_penalty=void 0,A.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),B.presence_penalty!=null&&(B.presence_penalty=void 0,A.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),B.logit_bias!=null&&(B.logit_bias=void 0,A.push({type:"other",message:"logitBias is not supported for reasoning models"})),B.logprobs!=null&&(B.logprobs=void 0,A.push({type:"other",message:"logprobs is not supported for reasoning models"})),B.top_logprobs!=null&&(B.top_logprobs=void 0,A.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),B.max_tokens!=null&&(B.max_completion_tokens==null&&(B.max_completion_tokens=B.max_tokens),B.max_tokens=void 0)),C){case"regular":{const{tools:W,tool_choice:Q,functions:M,function_call:K,toolWarnings:U}=Nue({mode:e,useLegacyFunctionCalling:O,structuredOutputs:this.supportsStructuredOutputs});return{args:{...B,tools:W,tool_choice:Q,functions:M,function_call:K},warnings:[...A,...U]}}case"object-json":return{args:{...B,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:A};case"object-tool":return{args:O?{...B,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...B,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:A};default:{const W=C;throw new Error(`Unsupported type: ${W}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u;const{args:c,warnings:f}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await Yo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:c,failedResponseHandler:ic,successfulResponseHandler:Td(Oue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:w,...v}=c,_=m.choices[0],x=(t=m.usage)==null?void 0:t.completion_tokens_details,S=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:Rs(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:Rs(),toolName:C.function.name,args:C.function.arguments}}),finishReason:dv(_.finish_reason),usage:{promptTokens:(o=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(u=(s=m.usage)==null?void 0:s.completion_tokens)!=null?u:NaN},rawCall:{rawPrompt:w,rawSettings:v},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(c)},response:fv(m),warnings:f,logprobs:Q4(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...v.response}),v.text&&x.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const S of v.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),x.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Yo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:r,failedResponseHandler:ic,successfulResponseHandler:Ck(Due),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,u=[];let c="unknown",f={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,w={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(v,_){var x,S,E,C,A,O,I,D,B,W,Q,M;if(!v.success){c="error",_.enqueue({type:"error",error:v.error});return}const K=v.value;if("error"in K){c="error",_.enqueue({type:"error",error:K.error});return}if(m&&(m=!1,_.enqueue({type:"response-metadata",...fv(K)})),K.usage!=null){const{prompt_tokens:ee,completion_tokens:ae,prompt_tokens_details:G,completion_tokens_details:Y}=K.usage;f={promptTokens:ee??void 0,completionTokens:ae??void 0},(Y==null?void 0:Y.reasoning_tokens)!=null&&(w.openai.reasoningTokens=Y==null?void 0:Y.reasoning_tokens),(Y==null?void 0:Y.accepted_prediction_tokens)!=null&&(w.openai.acceptedPredictionTokens=Y==null?void 0:Y.accepted_prediction_tokens),(Y==null?void 0:Y.rejected_prediction_tokens)!=null&&(w.openai.rejectedPredictionTokens=Y==null?void 0:Y.rejected_prediction_tokens),(G==null?void 0:G.cached_tokens)!=null&&(w.openai.cachedPromptTokens=G==null?void 0:G.cached_tokens)}const U=K.choices[0];if((U==null?void 0:U.finish_reason)!=null&&(c=dv(U.finish_reason)),(U==null?void 0:U.delta)==null)return;const me=U.delta;me.content!=null&&_.enqueue({type:"text-delta",textDelta:me.content});const se=Q4(U==null?void 0:U.logprobs);se!=null&&se.length&&(h===void 0&&(h=[]),h.push(...se));const ne=g&&me.function_call!=null?[{type:"function",id:Rs(),function:me.function_call,index:0}]:me.tool_calls;if(ne!=null)for(const ee of ne){const ae=ee.index;if(u[ae]==null){if(ee.type!=="function")throw new Uf({data:ee,message:"Expected 'function' type."});if(ee.id==null)throw new Uf({data:ee,message:"Expected 'id' to be a string."});if(((x=ee.function)==null?void 0:x.name)==null)throw new Uf({data:ee,message:"Expected 'function.name' to be a string."});u[ae]={id:ee.id,type:"function",function:{name:ee.function.name,arguments:(S=ee.function.arguments)!=null?S:""},hasFinished:!1};const Y=u[ae];((E=Y.function)==null?void 0:E.name)!=null&&((C=Y.function)==null?void 0:C.arguments)!=null&&(Y.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Y.id,toolName:Y.function.name,argsTextDelta:Y.function.arguments}),D4(Y.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(A=Y.id)!=null?A:Rs(),toolName:Y.function.name,args:Y.function.arguments}),Y.hasFinished=!0));continue}const G=u[ae];G.hasFinished||(((O=ee.function)==null?void 0:O.arguments)!=null&&(G.function.arguments+=(D=(I=ee.function)==null?void 0:I.arguments)!=null?D:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:(B=ee.function.arguments)!=null?B:""}),((W=G.function)==null?void 0:W.name)!=null&&((Q=G.function)==null?void 0:Q.arguments)!=null&&D4(G.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(M=G.id)!=null?M:Rs(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0))}},flush(v){var _,x;v.enqueue({type:"finish",finishReason:c,logprobs:h,usage:{promptTokens:(_=f.promptTokens)!=null?_:NaN,completionTokens:(x=f.completionTokens)!=null?x:NaN},...w!=null?{providerMetadata:w}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},Z5=$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish(),prompt_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),completion_tokens_details:$.object({reasoning_tokens:$.number().nullish(),accepted_prediction_tokens:$.number().nullish(),rejected_prediction_tokens:$.number().nullish()}).nullish()}).nullish(),Oue=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),function_call:$.object({arguments:$.string(),name:$.string()}).nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullish()})),usage:Z5}),Due=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),function_call:$.object({name:$.string().optional(),arguments:$.string().optional()}).nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()})),usage:Z5}),Fk]);function pE(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function jue(e){return e.startsWith("gpt-4o-audio-preview")}function Mue(e){var t,n;return pE(e)?(n=(t=Pue[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var Pue={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function Fue({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new wl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new br({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new br({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new br({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function e6(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var Lue=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h}){var m;const g=e.type,w=[];o!=null&&w.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&w.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:v,stopSequences:_}=Fue({prompt:n,inputFormat:t}),x=[..._??[],...c??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,prompt:v,stop:x.length>0?x:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new br({functionality:"tools"});if(e.toolChoice)throw new br({functionality:"toolChoice"});return{args:S,warnings:w}}case"object-json":throw new br({functionality:"object-json mode"});case"object-tool":throw new br({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Yo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:t,failedResponseHandler:ic,successfulResponseHandler:Td($ue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,u=a.choices[0];return{text:u.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:dv(u.finish_reason),logprobs:e6(u.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:fv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Yo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:r,failedResponseHandler:ic,successfulResponseHandler:Ck(Bue),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){u="error",g.enqueue({type:"error",error:m.error});return}const w=m.value;if("error"in w){u="error",g.enqueue({type:"error",error:w.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...fv(w)})),w.usage!=null&&(c={promptTokens:w.usage.prompt_tokens,completionTokens:w.usage.completion_tokens});const v=w.choices[0];(v==null?void 0:v.finish_reason)!=null&&(u=dv(v.finish_reason)),(v==null?void 0:v.text)!=null&&g.enqueue({type:"text-delta",textDelta:v.text});const _=e6(v==null?void 0:v.logprobs);_!=null&&_.length&&(f===void 0&&(f=[]),f.push(..._))},flush(m){m.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},$ue=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()})}),Bue=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),Fk]),zue=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Ek({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Yo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Fs(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:ic,successfulResponseHandler:Td(Uue),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Uue=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),que={"dall-e-3":1,"dall-e-2":10},Hue=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:que[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:w,responseHeaders:v}=await Yo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Fs(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:ic,successfulResponseHandler:Td(Vue),abortSignal:s,fetch:this.config.fetch});return{images:w.data.map(_=>_.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:v}}}},Vue=$.object({data:$.array($.object({b64_json:$.string()}))});function Gue({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var u,c,f,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${uh(o.image)}`,detail:(f=(c=o.providerMetadata)==null?void 0:c.openai)==null?void 0:f.imageDetail};case"file":{if(o.data instanceof URL)throw new br({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new br({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function t6({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function Wue({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)switch(u.type){case"function":o.push({type:"function",name:u.name,description:u.description,parameters:u.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(u.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:u.args.searchContextSize,user_location:u.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:u});break}break;default:a.push({type:"unsupported-tool",tool:u});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const u=s;throw new br({functionality:`Unsupported tool choice type: ${u}`})}}}var Kue=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:u,prompt:c,providerMetadata:f,responseFormat:h}){var m,g,w;const v=[],_=cce(this.modelId),x=e.type;i!=null&&v.push({type:"unsupported-setting",setting:"topK"}),u!=null&&v.push({type:"unsupported-setting",setting:"seed"}),o!=null&&v.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&v.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&v.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=Gue({prompt:c,systemMessageMode:_.systemMessageMode});v.push(...E);const C=Mae({provider:"openai",providerOptions:f,schema:dce}),A=(m=C==null?void 0:C.strictSchemas)!=null?m:!0,O={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:A,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(O.temperature!=null&&(O.temperature=void 0,v.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),O.top_p!=null&&(O.top_p=void 0,v.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:I,tool_choice:D,toolWarnings:B}=Wue({mode:e,strict:A});return{args:{...O,tools:I,tool_choice:D},warnings:[...v,...B]}}case"object-json":return{args:{...O,text:{format:e.schema!=null?{type:"json_schema",strict:A,name:(w=e.name)!=null?w:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:v};case"object-tool":return{args:{...O,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:A}]},warnings:v};default:{const I=x;throw new Error(`Unsupported type: ${I}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:u,value:c,rawValue:f}=await Yo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:o,failedResponseHandler:ic,successfulResponseHandler:Td($.object({id:$.string(),created_at:$.number(),model:$.string(),output:$.array($.discriminatedUnion("type",[$.object({type:$.literal("message"),role:$.literal("assistant"),content:$.array($.object({type:$.literal("output_text"),text:$.string(),annotations:$.array($.object({type:$.literal("url_citation"),start_index:$.number(),end_index:$.number(),url:$.string(),title:$.string()}))}))}),$.object({type:$.literal("function_call"),call_id:$.string(),name:$.string(),arguments:$.string()}),$.object({type:$.literal("web_search_call")}),$.object({type:$.literal("computer_call")}),$.object({type:$.literal("reasoning")})])),incomplete_details:$.object({reason:$.string()}).nullable(),usage:Y5})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=c.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),m=c.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(w=>{var v,_,x;return{sourceType:"url",id:(x=(_=(v=this.config).generateId)==null?void 0:_.call(v))!=null?x:Rs(),url:w.url,title:w.title}})),finishReason:t6({finishReason:(t=c.incomplete_details)==null?void 0:t.reason,hasToolCalls:m.length>0}),toolCalls:m.length>0?m:void 0,usage:{promptTokens:c.usage.input_tokens,completionTokens:c.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:u,body:f},request:{body:JSON.stringify(o)},response:{id:c.id,timestamp:new Date(c.created_at*1e3),modelId:c.model},providerMetadata:{openai:{responseId:c.id,cachedPromptTokens:(r=(n=c.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=c.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Yo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Fs(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:ic,successfulResponseHandler:Ck(nce),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,u=NaN,c=null,f=null,h=null;const m={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(w,v){var _,x,S,E,C,A,O,I;if(!w.success){o="error",v.enqueue({type:"error",error:w.error});return}const D=w.value;if(lce(D))D.item.type==="function_call"&&(m[D.output_index]={toolName:D.item.name,toolCallId:D.item.call_id},v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:D.item.call_id,toolName:D.item.name,argsTextDelta:D.item.arguments}));else if(sce(D)){const B=m[D.output_index];B!=null&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:B.toolCallId,toolName:B.toolName,argsTextDelta:D.delta})}else oce(D)?(h=D.response.id,v.enqueue({type:"response-metadata",id:D.response.id,timestamp:new Date(D.response.created_at*1e3),modelId:D.response.model})):rce(D)?v.enqueue({type:"text-delta",textDelta:D.delta}):ace(D)&&D.item.type==="function_call"?(m[D.output_index]=void 0,g=!0,v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:D.item.call_id,toolName:D.item.name,args:D.item.arguments})):ice(D)?(o=t6({finishReason:(_=D.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=D.response.usage.input_tokens,u=D.response.usage.output_tokens,c=(S=(x=D.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:c,f=(C=(E=D.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:f):uce(D)&&v.enqueue({type:"source",source:{sourceType:"url",id:(I=(O=(A=i.config).generateId)==null?void 0:O.call(A))!=null?I:Rs(),url:D.annotation.url,title:D.annotation.title}})},flush(w){w.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:u},...(c!=null||f!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:c,reasoningTokens:f}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},Y5=$.object({input_tokens:$.number(),input_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),output_tokens:$.number(),output_tokens_details:$.object({reasoning_tokens:$.number().nullish()}).nullish()}),Zue=$.object({type:$.literal("response.output_text.delta"),delta:$.string()}),Yue=$.object({type:$.enum(["response.completed","response.incomplete"]),response:$.object({incomplete_details:$.object({reason:$.string()}).nullish(),usage:Y5})}),Xue=$.object({type:$.literal("response.created"),response:$.object({id:$.string(),created_at:$.number(),model:$.string()})}),Jue=$.object({type:$.literal("response.output_item.done"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string(),status:$.literal("completed")})])}),Que=$.object({type:$.literal("response.function_call_arguments.delta"),item_id:$.string(),output_index:$.number(),delta:$.string()}),ece=$.object({type:$.literal("response.output_item.added"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string()})])}),tce=$.object({type:$.literal("response.output_text.annotation.added"),annotation:$.object({type:$.literal("url_citation"),url:$.string(),title:$.string()})}),nce=$.union([Zue,Yue,Xue,Jue,Que,ece,tce,$.object({type:$.string()}).passthrough()]);function rce(e){return e.type==="response.output_text.delta"}function ace(e){return e.type==="response.output_item.done"}function ice(e){return e.type==="response.completed"||e.type==="response.incomplete"}function oce(e){return e.type==="response.created"}function sce(e){return e.type==="response.function_call_arguments.delta"}function lce(e){return e.type==="response.output_item.added"}function uce(e){return e.type==="response.output_text.annotation.added"}function cce(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var dce=$.object({metadata:$.any().nullish(),parallelToolCalls:$.boolean().nullish(),previousResponseId:$.string().nullish(),store:$.boolean().nullish(),user:$.string().nullish(),reasoningEffort:$.string().nullish(),strictSchemas:$.boolean().nullish(),instructions:$.string().nullish()}),fce=$.object({});function hce({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:fce}}var pce={webSearchPreview:hce};function X5(e={}){var t,n,r;const a=(t=jM(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${Tae({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),u=(v,_={})=>new Iue(v,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),c=(v,_={})=>new Lue(v,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),f=(v,_={})=>new zue(v,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(v,_={})=>new Hue(v,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),m=(v,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return v==="gpt-3.5-turbo-instruct"?c(v,_):u(v,_)},g=v=>new Kue(v,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),w=function(v,_){return m(v,_)};return w.languageModel=m,w.chat=u,w.completion=c,w.responses=g,w.embedding=f,w.textEmbedding=f,w.textEmbeddingModel=f,w.image=h,w.imageModel=h,w.tools=pce,w}X5({compatibility:"strict"});var J5="vercel.ai.error",mce=Symbol.for(J5),Q5,gce=class eP extends Error{constructor({name:t,message:n,cause:r}){super(n),this[Q5]=!0,this.name=t,this.cause=r}static isInstance(t){return eP.hasMarker(t,J5)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};Q5=mce;var Xa=gce,tP="AI_APICallError",nP=`vercel.ai.error.${tP}`,yce=Symbol.for(nP),rP,El=class extends Xa{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:u=a!=null&&(a===408||a===409||a===429||a>=500),data:c}){super({name:tP,message:t,cause:s}),this[rP]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=u,this.data=c}static isInstance(t){return Xa.hasMarker(t,nP)}};rP=yce;var aP="AI_EmptyResponseBodyError",iP=`vercel.ai.error.${aP}`,bce=Symbol.for(iP),oP,vce=class extends Xa{constructor({message:t="Empty response body"}={}){super({name:aP,message:t}),this[oP]=!0}static isInstance(t){return Xa.hasMarker(t,iP)}};oP=bce;function sP(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var lP="AI_InvalidArgumentError",uP=`vercel.ai.error.${lP}`,wce=Symbol.for(uP),cP,dP=class extends Xa{constructor({message:t,cause:n,argument:r}){super({name:lP,message:t,cause:n}),this[cP]=!0,this.argument=r}static isInstance(t){return Xa.hasMarker(t,uP)}};cP=wce;var fP="AI_JSONParseError",hP=`vercel.ai.error.${fP}`,_ce=Symbol.for(hP),pP,hv=class extends Xa{constructor({text:t,cause:n}){super({name:fP,message:`JSON parsing failed: Text: ${t}.
Error message: ${sP(n)}`,cause:n}),this[pP]=!0,this.text=t}static isInstance(t){return Xa.hasMarker(t,hP)}};pP=_ce;var mP="AI_LoadAPIKeyError",gP=`vercel.ai.error.${mP}`,xce=Symbol.for(gP),yP,Jy=class extends Xa{constructor({message:t}){super({name:mP,message:t}),this[yP]=!0}static isInstance(t){return Xa.hasMarker(t,gP)}};yP=xce;var bP="AI_TooManyEmbeddingValuesForCallError",vP=`vercel.ai.error.${bP}`,Sce=Symbol.for(vP),wP,Ece=class extends Xa{constructor(e){super({name:bP,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[wP]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Xa.hasMarker(e,vP)}};wP=Sce;var _P="AI_TypeValidationError",xP=`vercel.ai.error.${_P}`,Cce=Symbol.for(xP),SP,kce=class mE extends Xa{constructor({value:t,cause:n}){super({name:_P,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${sP(n)}`,cause:n}),this[SP]=!0,this.value=t}static isInstance(t){return Xa.hasMarker(t,xP)}static wrap({value:t,cause:n}){return mE.isInstance(n)&&n.value===t?n:new mE({value:t,cause:n})}};SP=Cce;var pv=kce,EP="AI_UnsupportedFunctionalityError",CP=`vercel.ai.error.${EP}`,Ace=Symbol.for(CP),kP,pb=class extends Xa{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:EP,message:n}),this[kP]=!0,this.functionality=t}static isInstance(t){return Xa.hasMarker(t,CP)}};kP=Ace;let Tce=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var Rce={};function gE(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Nce(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=Ice(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function Ice(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Iw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Oce=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Tce(n,t);if(e==null)return a;if(n.includes(r))throw new dP({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Dce=Oce();function jce(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function YS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Mce({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Jy({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new Jy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Rce[t],e==null)throw new Jy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Jy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var yE=Symbol.for("vercel.ai.validator");function Pce(e){return{[yE]:!0,validate:e}}function Fce(e){return typeof e=="object"&&e!==null&&yE in e&&e[yE]===!0&&"validate"in e}function Lce(e){return Fce(e)?e:$ce(e)}function $ce(e){return Pce(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Bce({value:e,schema:t}){const n=Lk({value:e,schema:t});if(!n.success)throw pv.wrap({value:e,cause:n.error});return n.value}function Lk({value:e,schema:t}){const n=Lce(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:pv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:pv.wrap({value:e,cause:r})}}}function zce({text:e,schema:t}){try{const n=as.parse(e);return t==null?n:Bce({value:n,schema:t})}catch(n){throw hv.isInstance(n)||pv.isInstance(n)?n:new hv({text:e,cause:n})}}function AP({text:e,schema:t}){try{const n=as.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Lk({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:hv.isInstance(n)?n:new hv({text:e,cause:n})}}}function Uce({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Lk({value:t[e],schema:n});if(!r.success)throw new dP({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var qce=()=>globalThis.fetch,bE=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Hce({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Hce=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=qce()})=>{try{const s=await o(e,{method:"POST",headers:jce(t),body:n.content,signal:i}),u=Iw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw YS(f)||El.isInstance(f)?f:new El({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(YS(c)||El.isInstance(c))?c:new El({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(YS(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new El({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function vE(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Vce=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Iw(r);if(o.trim()==="")return{responseHeaders:s,value:new El({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=zce({text:o,schema:e});return{responseHeaders:s,value:new El({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new El({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},Gce=e=>async({response:t})=>{const n=Iw(t);if(t.body==null)throw new vce({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(Nce()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(AP({text:r,schema:e}))}}))}},TP=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=AP({text:a,schema:e}),o=Iw(t);if(!i.success)throw new El({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Wce}=globalThis;function Kce(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Wce(t)}function Zce(e){return e==null?void 0:e.replace(/\/$/,"")}function ho(e){if(Yce(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:u,format:c,const:f,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),c&&(g.format=c),f!==void 0&&(g.enum=[f]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(w=>w!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),a!=null&&(g.properties=Object.entries(a).reduce((w,[v,_])=>(w[v]=ho(_),w),{})),i&&(g.items=Array.isArray(i)?i.map(ho):ho(i)),o&&(g.allOf=o.map(ho)),s)if(s.some(w=>typeof w=="object"&&(w==null?void 0:w.type)==="null")){const w=s.filter(v=>!(typeof v=="object"&&(v==null?void 0:v.type)==="null"));if(w.length===1){const v=ho(w[0]);typeof v=="object"&&(g.nullable=!0,Object.assign(g,v))}else g.anyOf=w.map(ho),g.nullable=!0}else g.anyOf=s.map(ho);return u&&(g.oneOf=u.map(ho)),h!==void 0&&(g.minLength=h),g}function Yce(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function Xce(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new pb({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const u=[];for(const c of s)switch(c.type){case"text":{u.push({text:c.text});break}case"image":{u.push(c.image instanceof URL?{fileData:{mimeType:(t=c.mimeType)!=null?t:"image/jpeg",fileUri:c.image.toString()}}:{inlineData:{mimeType:(n=c.mimeType)!=null?n:"image/jpeg",data:Kce(c.image)}});break}case"file":{u.push(c.data instanceof URL?{fileData:{mimeType:c.mimeType,fileUri:c.data.toString()}}:{inlineData:{mimeType:c.mimeType,data:c.data}});break}}a.push({role:"user",parts:u});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(u=>{switch(u.type){case"text":return u.text.length===0?void 0:{text:u.text};case"file":{if(u.mimeType!=="image/png")throw new pb({functionality:"Only PNG images are supported in assistant messages"});if(u.data instanceof URL)throw new pb({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:u.mimeType,data:u.data}}}case"tool-call":return{functionCall:{name:u.toolName,args:u.args}}}}).filter(u=>u!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(u=>({functionResponse:{name:u.toolName,response:{name:u.toolName,content:u.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function n6(e){return e.includes("/")?e:`models/${e}`}var Jce=$.object({error:$.object({code:$.number().nullable(),message:$.string(),status:$.string()})}),wE=Vce({errorSchema:Jce,errorToMessage:e=>e.error.message});function Qce(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],u=r.includes("gemini-2"),c=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:u?{googleSearch:{}}:{googleSearchRetrieval:!c||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const f=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):f.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:ho(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:f},toolConfig:void 0,toolWarnings:s};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:f},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=m;throw new pb({functionality:`Unsupported tool choice type: ${g}`})}}}function r6({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var ede=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:u,responseFormat:c,seed:f,providerMetadata:h}){var m,g;const w=e.type,v=[],_=Uce({provider:"google",providerOptions:h,schema:ade}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:u,seed:f,responseMimeType:(c==null?void 0:c.type)==="json"?"application/json":void 0,responseSchema:(c==null?void 0:c.type)==="json"&&c.schema!=null&&this.supportsStructuredOutputs?ho(c.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=Xce(t);switch(w){case"regular":{const{tools:C,toolConfig:A,toolWarnings:O}=Qce(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:A,cachedContent:this.settings.cachedContent},warnings:[...v,...O]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?ho(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:ho(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:v};default:{const C=w;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),u=JSON.stringify(o),c=gE(await vE(this.config.headers),e.headers),{responseHeaders:f,value:h,rawValue:m}=await bE({url:`${this.config.baseURL}/${n6(this.modelId)}:generateContent`,headers:c,body:o,failedResponseHandler:wE,successfulResponseHandler:TP(nde),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...w}=o,v=h.candidates[0],_=v.content==null||typeof v.content!="object"||!("parts"in v.content)?[]:v.content.parts,x=a6({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:i6(_),files:(t=o6(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:r6({finishReason:v.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:w},rawResponse:{headers:f,body:m},warnings:s,providerMetadata:{google:{groundingMetadata:(a=v.groundingMetadata)!=null?a:null,safetyRatings:(i=v.safetyRatings)!=null?i:null}},sources:s6({groundingMetadata:v.groundingMetadata,generateId:this.config.generateId}),request:{body:u}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=gE(await vE(this.config.headers),e.headers),{responseHeaders:i,value:o}=await bE({url:`${this.config.baseURL}/${n6(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:wE,successfulResponseHandler:Gce(rde),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...u}=t;let c="unknown",f={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(w,v){var _,x,S,E,C,A;if(!w.success){v.enqueue({type:"error",error:w.error});return}const O=w.value,I=O.usageMetadata;I!=null&&(f={promptTokens:(_=I.promptTokenCount)!=null?_:NaN,completionTokens:(x=I.candidatesTokenCount)!=null?x:NaN});const D=(S=O.candidates)==null?void 0:S[0];if(D==null)return;const B=D.content;if(B!=null){const W=i6(B.parts);W!=null&&v.enqueue({type:"text-delta",textDelta:W});const Q=o6(B.parts);if(Q!=null)for(const K of Q)v.enqueue({type:"file",mimeType:K.inlineData.mimeType,data:K.inlineData.data});const M=a6({parts:B.parts,generateId:m});if(M!=null)for(const K of M)v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,argsTextDelta:K.args}),v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:K.toolCallId,toolName:K.toolName,args:K.args}),g=!0}if(D.finishReason!=null){c=r6({finishReason:D.finishReason,hasToolCalls:g});const W=(E=s6({groundingMetadata:D.groundingMetadata,generateId:m}))!=null?E:[];for(const Q of W)v.enqueue({type:"source",source:Q});h={google:{groundingMetadata:(C=D.groundingMetadata)!=null?C:null,safetyRatings:(A=D.safetyRatings)!=null?A:null}}}},flush(w){w.enqueue({type:"finish",finishReason:c,usage:f,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:u},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function a6({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function i6(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function o6(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function s6({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var RP=$.object({role:$.string(),parts:$.array($.union([$.object({text:$.string()}),$.object({functionCall:$.object({name:$.string(),args:$.unknown()})}),$.object({inlineData:$.object({mimeType:$.string(),data:$.string()})})])).nullish()}),tde=$.object({web:$.object({uri:$.string(),title:$.string()}).nullish(),retrievedContext:$.object({uri:$.string(),title:$.string()}).nullish()}),NP=$.object({webSearchQueries:$.array($.string()).nullish(),retrievalQueries:$.array($.string()).nullish(),searchEntryPoint:$.object({renderedContent:$.string()}).nullish(),groundingChunks:$.array(tde).nullish(),groundingSupports:$.array($.object({segment:$.object({startIndex:$.number().nullish(),endIndex:$.number().nullish(),text:$.string().nullish()}),segment_text:$.string().nullish(),groundingChunkIndices:$.array($.number()).nullish(),supportChunkIndices:$.array($.number()).nullish(),confidenceScores:$.array($.number()).nullish(),confidenceScore:$.array($.number()).nullish()})).nullish(),retrievalMetadata:$.union([$.object({webDynamicRetrievalScore:$.number()}),$.object({})]).nullish()}),IP=$.object({category:$.string(),probability:$.string(),probabilityScore:$.number().nullish(),severity:$.string().nullish(),severityScore:$.number().nullish(),blocked:$.boolean().nullish()}),nde=$.object({candidates:$.array($.object({content:RP.nullish().or($.object({}).strict()),finishReason:$.string().nullish(),safetyRatings:$.array(IP).nullish(),groundingMetadata:NP.nullish()})),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),rde=$.object({candidates:$.array($.object({content:RP.nullish(),finishReason:$.string().nullish(),safetyRatings:$.array(IP).nullish(),groundingMetadata:NP.nullish()})).nullish(),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),ade=$.object({responseModalities:$.array($.enum(["TEXT","IMAGE"])).nullish()}),ide=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Ece({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=gE(await vE(this.config.headers),t),{responseHeaders:a,value:i}=await bE({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:wE,successfulResponseHandler:TP(ode),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},ode=$.object({embeddings:$.array($.object({values:$.array($.number())}))});function sde(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function OP(e={}){var t;const n=(t=Zce(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":Mce({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,u={})=>{var c;return new ede(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(c=e.generateId)!=null?c:Dce,isSupportedUrl:sde,fetch:e.fetch})},i=(s,u={})=>new ide(s,u,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,u){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,u)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}OP();var DP="vercel.ai.error",lde=Symbol.for(DP),jP,ude=class MP extends Error{constructor({name:t,message:n,cause:r}){super(n),this[jP]=!0,this.name=t,this.cause=r}static isInstance(t){return MP.hasMarker(t,DP)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};jP=lde;var Ra=ude,PP="AI_APICallError",FP=`vercel.ai.error.${PP}`,cde=Symbol.for(FP),LP,Cl=class extends Ra{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:u}){super({name:PP,message:e,cause:o}),this[LP]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=u}static isInstance(e){return Ra.hasMarker(e,FP)}};LP=cde;var $P="AI_EmptyResponseBodyError",BP=`vercel.ai.error.${$P}`,dde=Symbol.for(BP),zP,fde=class extends Ra{constructor({message:e="Empty response body"}={}){super({name:$P,message:e}),this[zP]=!0}static isInstance(e){return Ra.hasMarker(e,BP)}};zP=dde;function UP(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var qP="AI_InvalidArgumentError",HP=`vercel.ai.error.${qP}`,hde=Symbol.for(HP),VP,pde=class extends Ra{constructor({message:e,cause:t,argument:n}){super({name:qP,message:e,cause:t}),this[VP]=!0,this.argument=n}static isInstance(e){return Ra.hasMarker(e,HP)}};VP=hde;var GP="AI_InvalidPromptError",WP=`vercel.ai.error.${GP}`,mde=Symbol.for(WP),KP,gde=class extends Ra{constructor({prompt:e,message:t,cause:n}){super({name:GP,message:`Invalid prompt: ${t}`,cause:n}),this[KP]=!0,this.prompt=e}static isInstance(e){return Ra.hasMarker(e,WP)}};KP=mde;var ZP="AI_InvalidResponseDataError",YP=`vercel.ai.error.${ZP}`,yde=Symbol.for(YP),XP,XS=class extends Ra{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:ZP,message:t}),this[XP]=!0,this.data=e}static isInstance(e){return Ra.hasMarker(e,YP)}};XP=yde;var JP="AI_JSONParseError",QP=`vercel.ai.error.${JP}`,bde=Symbol.for(QP),eF,mv=class extends Ra{constructor({text:e,cause:t}){super({name:JP,message:`JSON parsing failed: Text: ${e}.
Error message: ${UP(t)}`,cause:t}),this[eF]=!0,this.text=e}static isInstance(e){return Ra.hasMarker(e,QP)}};eF=bde;var tF="AI_LoadAPIKeyError",nF=`vercel.ai.error.${tF}`,vde=Symbol.for(nF),rF,Qy=class extends Ra{constructor({message:e}){super({name:tF,message:e}),this[rF]=!0}static isInstance(e){return Ra.hasMarker(e,nF)}};rF=vde;var aF="AI_TypeValidationError",iF=`vercel.ai.error.${aF}`,wde=Symbol.for(iF),oF,_de=class _E extends Ra{constructor({value:t,cause:n}){super({name:aF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${UP(n)}`,cause:n}),this[oF]=!0,this.value=t}static isInstance(t){return Ra.hasMarker(t,iF)}static wrap({value:t,cause:n}){return _E.isInstance(n)&&n.value===t?n:new _E({value:t,cause:n})}};oF=wde;var gv=_de,sF="AI_UnsupportedFunctionalityError",lF=`vercel.ai.error.${sF}`,xde=Symbol.for(lF),uF,mo=class extends Ra{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:sF,message:t}),this[uF]=!0,this.functionality=e}static isInstance(e){return Ra.hasMarker(e,lF)}};uF=xde;let Sde=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};class l6 extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}}function JS(e){}function Ede(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=JS,onError:n=JS,onRetry:r=JS,onComment:a}=e;let i="",o=!0,s,u="",c="";function f(v){const _=o?v.replace(/^\xEF\xBB\xBF/,""):v,[x,S]=Cde(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(v){if(v===""){g();return}if(v.startsWith(":")){a&&a(v.slice(v.startsWith(": ")?2:1));return}const _=v.indexOf(":");if(_!==-1){const x=v.slice(0,_),S=v[_+1]===" "?2:1,E=v.slice(_+S);m(x,E,v);return}m(v,"",v)}function m(v,_,x){switch(v){case"event":c=_;break;case"data":u=`${u}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new l6(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new l6(`Unknown field "${v.length>20?`${v.slice(0,20)}`:v}"`,{type:"unknown-field",field:v,value:_,line:x}));break}}function g(){u.length>0&&t({id:s,event:c||void 0,data:u.endsWith(`
`)?u.slice(0,-1):u}),s=void 0,u="",c=""}function w(v={}){i&&v.consume&&h(i),o=!0,s=void 0,u="",c="",i=""}return{feed:f,reset:w}}function Cde(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class kde extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=Ede({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var Ade={};function yv(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function Ow(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Tde=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Sde(n,t);if(e==null)return a;if(n.includes(r))throw new pde({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},eb=Tde();function Rde(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function QS(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function Nde({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Qy({message:`${r} API key must be a string.`});if(typeof Vr>"u")throw new Qy({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Ade[t],e==null)throw new Qy({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Qy({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var xE=Symbol.for("vercel.ai.validator");function Ide(e){return{[xE]:!0,validate:e}}function Ode(e){return typeof e=="object"&&e!==null&&xE in e&&e[xE]===!0&&"validate"in e}function Dde(e){return Ode(e)?e:jde(e)}function jde(e){return Ide(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Mde({value:e,schema:t}){const n=cF({value:e,schema:t});if(!n.success)throw gv.wrap({value:e,cause:n.error});return n.value}function cF({value:e,schema:t}){const n=Dde(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:gv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:gv.wrap({value:e,cause:r})}}}function Pde({text:e,schema:t}){try{const n=as.parse(e);return t==null?n:Mde({value:n,schema:t})}catch(n){throw mv.isInstance(n)||gv.isInstance(n)?n:new mv({text:e,cause:n})}}function dF({text:e,schema:t}){try{const n=as.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=cF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:mv.isInstance(n)?n:new mv({text:e,cause:n})}}}function e2(e){try{return as.parse(e),!0}catch{return!1}}var Fde=()=>globalThis.fetch,bv=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>Lde({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),Lde=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Fde()})=>{try{const s=await o(e,{method:"POST",headers:Rde(t),body:n.content,signal:i}),u=Ow(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw QS(f)||Cl.isInstance(f)?f:new Cl({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(QS(c)||Cl.isInstance(c))?c:new Cl({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(QS(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new Cl({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},$de=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Ow(r);if(o.trim()==="")return{responseHeaders:s,value:new Cl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=Pde({text:o,schema:e});return{responseHeaders:s,value:new Cl({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new Cl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},fF=e=>async({response:t})=>{const n=Ow(t);if(t.body==null)throw new fde({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new kde).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(dF({text:r,schema:e}))}}))}},hF=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=dF({text:a,schema:e}),o=Ow(t);if(!i.success)throw new Cl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Bde}=globalThis;function zde(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Bde(t)}function Ude(e){return e==null?void 0:e.replace(/\/$/,"")}var qde=Object.defineProperty,Hde=Object.defineProperties,Vde=Object.getOwnPropertyDescriptors,vv=Object.getOwnPropertySymbols,pF=Object.prototype.hasOwnProperty,mF=Object.prototype.propertyIsEnumerable,u6=(e,t,n)=>t in e?qde(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qi=(e,t)=>{for(var n in t||(t={}))pF.call(t,n)&&u6(e,n,t[n]);if(vv)for(var n of vv(t))mF.call(t,n)&&u6(e,n,t[n]);return e},mb=(e,t)=>Hde(e,Vde(t)),wv=(e,t)=>{var n={};for(var r in e)pF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&vv)for(var r of vv(e))t.indexOf(r)<0&&mF.call(e,r)&&(n[r]=e[r]);return n};function Ss(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function Gde(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:Ss(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=Ss(s))!=null?n:Ss(o[0].providerMetadata)});break}const u=Ss(s),c=o.map(f=>{var h,m,g,w;switch(f.type){case"text":return{type:"text",text:f.text,cache_control:(h=Ss(f.providerMetadata))!=null?h:u};case"image":return{type:"image_url",image_url:{url:f.image instanceof URL?f.image.toString():`data:${(m=f.mimeType)!=null?m:"image/jpeg"};base64,${zde(f.image)}`},cache_control:(g=Ss(f.providerMetadata))!=null?g:u};case"file":return{type:"text",text:f.data instanceof URL?f.data.toString():f.data,cache_control:(w=Ss(f.providerMetadata))!=null?w:u};default:{const v=f;throw new Error(`Unsupported content part type: ${v}`)}}});a.push({role:"user",content:c});break}case"assistant":{let u="";const c=[];for(const f of o)switch(f.type){case"text":{u+=f.text;break}case"tool-call":{c.push({id:f.toolCallId,type:"function",function:{name:f.toolName,arguments:JSON.stringify(f.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=f;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:u,tool_calls:c.length>0?c:void 0,cache_control:Ss(s)});break}case"tool":{for(const u of o)a.push({role:"tool",tool_call_id:u.toolCallId,content:JSON.stringify(u.result),cache_control:(r=Ss(s))!=null?r:Ss(u.providerMetadata)});break}default:{const u=i;throw new Error(`Unsupported role: ${u}`)}}return a}function c6(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function _v(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var $k=$.object({error:$.object({message:$.string(),type:$.string(),param:$.any().nullable(),code:$.string().nullable()})}),xv=$de({errorSchema:$k,errorToMessage:e=>e.error.message});function Wde(e){return"parameters"in e}var Kde=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:u,responseFormat:c,topK:f,providerMetadata:h}){var m;const g=e.type,w=(m=h==null?void 0:h.openrouter)!=null?m:{},v=qi(qi(qi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:u,response_format:c,top_k:f,messages:Gde(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),w);switch(g){case"regular":return qi(qi({},v),Xde(e));case"object-json":return mb(qi({},v),{response_format:{type:"json_object"}});case"object-tool":return mb(qi({},v),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new mo({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const u=this.getArgs(e),{responseHeaders:c,value:f}=await bv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:yv(this.config.headers(),e.headers),body:u,failedResponseHandler:xv,successfulResponseHandler:hF(Zde),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u,{messages:m}=h,g=wv(h,["messages"]),w=f.choices[0];if(!w)throw new Error("No choice in response");return{response:{id:f.id,modelId:f.model},text:(t=w.message.content)!=null?t:void 0,reasoning:(n=w.message.reasoning)!=null?n:void 0,toolCalls:(r=w.message.tool_calls)==null?void 0:r.map(v=>{var _;return{toolCallType:"function",toolCallId:(_=v.id)!=null?_:eb(),toolName:v.function.name,args:v.function.arguments}}),finishReason:_v(w.finish_reason),usage:{promptTokens:(i=(a=f.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=f.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:c},warnings:[],logprobs:c6(w.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await bv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:yv(this.config.headers(),e.headers),body:mb(qi({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:xv,successfulResponseHandler:fF(Yde),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=wv(a,["messages"]),s=[];let u="other",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,w,v,_,x,S,E,C,A,O,I,D;if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const B=h.value;if("error"in B){u="error",m.enqueue({type:"error",error:B.error});return}B.id&&m.enqueue({type:"response-metadata",id:B.id}),B.model&&m.enqueue({type:"response-metadata",modelId:B.model}),B.usage!=null&&(c={promptTokens:B.usage.prompt_tokens,completionTokens:B.usage.completion_tokens});const W=B.choices[0];if((W==null?void 0:W.finish_reason)!=null&&(u=_v(W.finish_reason)),(W==null?void 0:W.delta)==null)return;const Q=W.delta;Q.content!=null&&m.enqueue({type:"text-delta",textDelta:Q.content}),Q.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:Q.reasoning});const M=c6(W==null?void 0:W.logprobs);if(M!=null&&M.length&&(f===void 0&&(f=[]),f.push(...M)),Q.tool_calls!=null)for(const K of Q.tool_calls){const U=K.index;if(s[U]==null){if(K.type!=="function")throw new XS({data:K,message:"Expected 'function' type."});if(K.id==null)throw new XS({data:K,message:"Expected 'id' to be a string."});if(((g=K.function)==null?void 0:g.name)==null)throw new XS({data:K,message:"Expected 'function.name' to be a string."});s[U]={id:K.id,type:"function",function:{name:K.function.name,arguments:(w=K.function.arguments)!=null?w:""},sent:!1};const se=s[U];if(se==null)throw new Error("Tool call is missing");((v=se.function)==null?void 0:v.name)!=null&&((_=se.function)==null?void 0:_.arguments)!=null&&e2(se.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:se.id,toolName:se.function.name,argsTextDelta:se.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=se.id)!=null?x:eb(),toolName:se.function.name,args:se.function.arguments}),se.sent=!0);continue}const me=s[U];if(me==null)throw new Error("Tool call is missing");((S=K.function)==null?void 0:S.arguments)!=null&&(me.function.arguments+=(C=(E=K.function)==null?void 0:E.arguments)!=null?C:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:me.id,toolName:me.function.name,argsTextDelta:(A=K.function.arguments)!=null?A:""}),((O=me.function)==null?void 0:O.name)!=null&&((I=me.function)==null?void 0:I.arguments)!=null&&e2(me.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(D=me.id)!=null?D:eb(),toolName:me.function.name,args:me.function.arguments}),me.sent=!0)}},flush(h){var m;if(u==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:eb(),toolName:g.function.name,args:e2(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:u,logprobs:f,usage:c})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},gF=$.object({id:$.string().optional(),model:$.string().optional(),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number(),total_tokens:$.number()}).nullish()}),Zde=gF.extend({choices:$.array($.object({message:$.object({role:$.literal("assistant"),content:$.string().nullable().optional(),reasoning:$.string().nullable().optional(),tool_calls:$.array($.object({id:$.string().optional().nullable(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).optional()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullable().optional(),finish_reason:$.string().optional().nullable()}))}),Yde=$.union([gF.extend({choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).optional(),content:$.string().nullish(),reasoning:$.string().nullish().optional(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()}))}),$k]);function Xde(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>Wde(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function Jde({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new gde({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new mo({functionality:"images"});case"file":throw new mo({functionality:"file attachments"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new mo({functionality:"tool-call messages"});case"reasoning":throw new mo({functionality:"reasoning messages"});case"redacted-reasoning":throw new mo({functionality:"redacted reasoning messages"});default:{const c=u;throw new Error(`Unsupported content type: ${c}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new mo({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function d6(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var Qde=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:u,responseFormat:c,topK:f,stopSequences:h,providerMetadata:m}){var g,w;const v=e.type,_=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:x}=Jde({prompt:n,inputFormat:t}),S=qi(qi(qi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:u,stop:h,response_format:c,top_k:f,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(v){case"regular":{if((w=e.tools)!=null&&w.length)throw new mo({functionality:"tools"});if(e.toolChoice)throw new mo({functionality:"toolChoice"});return S}case"object-json":throw new mo({functionality:"object-json mode"});case"object-tool":throw new mo({functionality:"object-tool mode"});default:{const E=v;throw new mo({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:u}=await bv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:yv(this.config.headers(),e.headers),body:o,failedResponseHandler:xv,successfulResponseHandler:hF(f6),abortSignal:e.abortSignal,fetch:this.config.fetch}),c=o,{prompt:f}=c,h=wv(c,["prompt"]);if("error"in u)throw new Error(`${u.error.message}`);const m=u.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:u.id,modelId:u.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=u.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=u.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:_v(m.finish_reason),logprobs:d6(m.logprobs),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await bv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:yv(this.config.headers(),e.headers),body:mb(qi({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:xv,successfulResponseHandler:fF(f6),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=wv(a,["prompt"]);let s="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},c;return{stream:r.pipeThrough(new TransformStream({transform(f,h){if(!f.success){s="error",h.enqueue({type:"error",error:f.error});return}const m=f.value;if("error"in m){s="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(u={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=_v(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const w=d6(g==null?void 0:g.logprobs);w!=null&&w.length&&(c===void 0&&(c=[]),c.push(...w))},flush(f){f.enqueue({type:"finish",finishReason:s,logprobs:c,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},f6=$.union([$.object({id:$.string().optional(),model:$.string().optional(),choices:$.array($.object({text:$.string(),reasoning:$.string().nullish().optional(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullable().optional()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).optional().nullable()}),$k]);function yF(e={}){var t,n,r;const a=(n=Ude((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>qi({Authorization:`Bearer ${Nde({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,m={})=>new Kde(h,m,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m={})=>new Qde(h,m,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),c=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?u(h,m):s(h,m)},f=function(h,m){return c(h,m)};return f.languageModel=c,f.chat=s,f.completion=u,f}yF({compatibility:"strict"});var Zc={},t2={},h6;function p6(){return h6||(h6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(t2)),t2}var m6;function efe(){return m6||(m6=1,function(e){var t=Zc&&Zc.__createBinding||(Object.create?function(c,f,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(f,h);(!g||("get"in g?!f.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return f[h]}}),Object.defineProperty(c,m,g)}:function(c,f,h,m){m===void 0&&(m=h),c[m]=f[h]}),n=Zc&&Zc.__exportStar||function(c,f){for(var h in c)h!=="default"&&!Object.prototype.hasOwnProperty.call(f,h)&&t(f,c,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=p6();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(p6(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(c,f=r.Allow.ALL){if(typeof c!="string")throw new TypeError(`expecting str, got ${typeof c}`);if(!c.trim())throw new Error(`${c} is empty`);return s(c.trim(),f)}e.parseJSON=o;const s=(c,f)=>{const h=c.length;let m=0;const g=A=>{throw new a(`${A} at position ${m}`)},w=A=>{throw new i(`${A} at position ${m}`)},v=()=>(C(),m>=h&&g("Unexpected end of input"),c[m]==='"'?_():c[m]==="{"?x():c[m]==="["?S():c.substring(m,m+4)==="null"||r.Allow.NULL&f&&h-m<4&&"null".startsWith(c.substring(m))?(m+=4,null):c.substring(m,m+4)==="true"||r.Allow.BOOL&f&&h-m<4&&"true".startsWith(c.substring(m))?(m+=4,!0):c.substring(m,m+5)==="false"||r.Allow.BOOL&f&&h-m<5&&"false".startsWith(c.substring(m))?(m+=5,!1):c.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&f&&h-m<8&&"Infinity".startsWith(c.substring(m))?(m+=8,1/0):c.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&f&&1<h-m&&h-m<9&&"-Infinity".startsWith(c.substring(m))?(m+=9,-1/0):c.substring(m,m+3)==="NaN"||r.Allow.NAN&f&&h-m<3&&"NaN".startsWith(c.substring(m))?(m+=3,NaN):E()),_=()=>{const A=m;let O=!1;for(m++;m<h&&(c[m]!=='"'||O&&c[m-1]==="\\");)O=c[m]==="\\"?!O:!1,m++;if(c.charAt(m)=='"')try{return JSON.parse(c.substring(A,++m-Number(O)))}catch(I){w(String(I))}else if(r.Allow.STR&f)try{return JSON.parse(c.substring(A,m-Number(O))+'"')}catch{return JSON.parse(c.substring(A,c.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{m++,C();const A={};try{for(;c[m]!=="}";){if(C(),m>=h&&r.Allow.OBJ&f)return A;const O=_();C(),m++;try{const I=v();A[O]=I}catch(I){if(r.Allow.OBJ&f)return A;throw I}C(),c[m]===","&&m++}}catch{if(r.Allow.OBJ&f)return A;g("Expected '}' at end of object")}return m++,A},S=()=>{m++;const A=[];try{for(;c[m]!=="]";)A.push(v()),C(),c[m]===","&&m++}catch{if(r.Allow.ARR&f)return A;g("Expected ']' at end of array")}return m++,A},E=()=>{if(m===0){c==="-"&&w("Not sure what '-' is");try{return JSON.parse(c)}catch(O){if(r.Allow.NUM&f)try{return JSON.parse(c.substring(0,c.lastIndexOf("e")))}catch{}w(String(O))}}const A=m;for(c[m]==="-"&&m++;c[m]&&",]}".indexOf(c[m])===-1;)m++;m==h&&!(r.Allow.NUM&f)&&g("Unterminated number literal");try{return JSON.parse(c.substring(A,m))}catch{c.substring(A,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(c.substring(A,c.lastIndexOf("e")))}catch(I){w(String(I))}}},C=()=>{for(;m<h&&` 
\r	`.includes(c[m]);)m++};return v()},u=o;e.parse=u}(Zc)),Zc}var tfe=efe();function n2(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new br({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(uh(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var nfe=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=tfe.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:Rs(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function rfe({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var afe=$.object({error:$.object({code:$.string().nullable(),message:$.string(),param:$.any().nullable(),type:$.string()})}),SE=OM({errorSchema:afe,errorToMessage:e=>e.error.message});function ife({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new br({functionality:`Unsupported tool choice type: ${s}`})}}}function ofe(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var sfe=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},lfe=e=>async({response:t})=>{const n=ng(t);if(t.body===null)throw new xk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new sfe).pipeThrough(new TransformStream({transform(r,a){a.enqueue(ud({schema:e,text:r}))}}))}},ufe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:u,topK:c,topP:f}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:ofe({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:u,tfs_z:this.settings.tfsZ,top_k:c,top_p:f,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:w,toolWarnings:v}=ife({mode:n});return{args:{...g,messages:n2(a),tools:w},type:h,warnings:[...m,...v]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:n2(a)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:n2(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const w=h;throw new Error(`Unsupported type: ${w}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Yo({abortSignal:e.abortSignal,body:i,failedResponseHandler:SE,fetch:this.config.fetch,headers:Fs(this.config.headers(),e.headers),successfulResponseHandler:Td(cfe),url:`${this.config.baseURL}/chat`}),{messages:u,...c}=i,f=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:Rs(),toolCallType:"function",toolName:h.function.name}});return{finishReason:rfe({finishReason:s.done_reason,hasToolCalls:f!==void 0&&f.length>0}),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:f,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),w=new ReadableStream({start(v){if(v.enqueue({type:"response-metadata",...g.response}),g.text&&v.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)v.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),v.enqueue({type:"tool-call",..._});v.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),v.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:w,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Yo({abortSignal:e.abortSignal,body:t,failedResponseHandler:SE,fetch:this.config.fetch,headers:Fs(this.config.headers(),e.headers),successfulResponseHandler:lfe(dfe),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,u=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,c=new nfe({tools:u,type:n});let f="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:f,type:"finish",usage:h})},async transform(g,w){if(!g.success){w.enqueue({error:g.error,type:"error"});return}const v=g.value;if(v.done){f=c.finish({controller:w}),h={completionTokens:v.eval_count,promptTokens:v.prompt_eval_count||0};return}m&&c.parse({controller:w,delta:v.message.content})||v.message.content!==null&&w.enqueue({textDelta:v.message.content,type:"text-delta"})}})),warnings:r}}},cfe=$.object({created_at:$.string(),done:$.literal(!0),done_reason:$.string().optional().nullable(),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),message:$.object({content:$.string(),role:$.string(),tool_calls:$.array($.object({function:$.object({arguments:$.record($.any()),name:$.string()}),id:$.string().optional()})).optional().nullable()}),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()}),dfe=$.discriminatedUnion("done",[$.object({created_at:$.string(),done:$.literal(!1),message:$.object({content:$.string(),role:$.string()}),model:$.string()}),$.object({created_at:$.string(),done:$.literal(!0),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()})]),ffe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new Ek({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Yo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:SE,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Td(hfe),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},hfe=$.object({embeddings:$.array($.array($.number())),prompt_eval_count:$.number().nullable()});function bF(e={}){var t;const n=(t=jM(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,u={})=>new ufe(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,u={})=>new ffe(s,u,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,u){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,u)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}bF();let pfe=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function hh(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function mfe(){let e="",t,n=[],r,a;function i(u,c){if(u===""){o(c);return}if(u.startsWith(":"))return;const f=u.indexOf(":");if(f===-1){s(u,"");return}const h=u.slice(0,f),m=f+1,g=m<u.length&&u[m]===" "?u.slice(m+1):u.slice(m);s(h,g)}function o(u){n.length>0&&(u.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(u,c){switch(u){case"event":t=c;break;case"data":n.push(c);break;case"id":r=c;break;case"retry":const f=parseInt(c,10);isNaN(f)||(a=f);break}}return new TransformStream({transform(u,c){const{lines:f,incompleteLine:h}=gfe(e,u);e=h;for(let m=0;m<f.length;m++)i(f[m],c)},flush(u){i(e,u),o(u)}})}function gfe(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Dw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var yfe=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=pfe(n,t);if(e==null)return a;if(n.includes(r))throw new Sk({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},r2=yfe();function bfe(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function a2(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var EE=Symbol.for("vercel.ai.validator");function vfe(e){return{[EE]:!0,validate:e}}function wfe(e){return typeof e=="object"&&e!==null&&EE in e&&e[EE]===!0&&"validate"in e}function _fe(e){return wfe(e)?e:xfe(e)}function xfe(e){return vfe(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function Sfe({value:e,schema:t}){const n=vF({value:e,schema:t});if(!n.success)throw ec.wrap({value:e,cause:n.error});return n.value}function vF({value:e,schema:t}){const n=_fe(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:ec.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:ec.wrap({value:e,cause:r})}}}function Efe({text:e,schema:t}){try{const n=as.parse(e);return t==null?n:Sfe({value:n,schema:t})}catch(n){throw Qu.isInstance(n)||ec.isInstance(n)?n:new Qu({text:e,cause:n})}}function wF({text:e,schema:t}){try{const n=as.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=vF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Qu.isInstance(n)?n:new Qu({text:e,cause:n})}}}function g6(e){try{return as.parse(e),!0}catch{return!1}}var Cfe=()=>globalThis.fetch,ph=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>kfe({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),kfe=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=Cfe()})=>{try{const s=await o(e,{method:"POST",headers:bfe(t),body:n.content,signal:i}),u=Dw(s);if(!s.ok){let c;try{c=await a({response:s,url:e,requestBodyValues:n.values})}catch(f){throw a2(f)||da.isInstance(f)?f:new da({message:"Failed to process error response",cause:f,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}throw c.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(c){throw c instanceof Error&&(a2(c)||da.isInstance(c))?c:new da({message:"Failed to process successful response",cause:c,statusCode:s.status,url:e,responseHeaders:u,requestBodyValues:n.values})}}catch(s){if(a2(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const u=s.cause;if(u!=null)throw new da({message:`Cannot connect to API: ${u.message}`,cause:u,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},jw=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=Dw(r);if(o.trim()==="")return{responseHeaders:s,value:new da({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const u=Efe({text:o,schema:e});return{responseHeaders:s,value:new da({message:t(u),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:u,isRetryable:n==null?void 0:n(r,u)})}}catch{return{responseHeaders:s,value:new da({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},_F=e=>async({response:t})=>{const n=Dw(t);if(t.body==null)throw new xk({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(mfe()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(wF({text:r,schema:e}))}}))}},Mw=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=wF({text:a,schema:e}),o=Dw(t);if(!i.success)throw new da({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:Afe}=globalThis;function Tfe(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Afe(t)}function Rfe(e){return e==null?void 0:e.replace(/\/$/,"")}function nm(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function Nfe(e){const t=[];for(const{role:n,content:r,...a}of e){const i=nm({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...nm(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const u=nm(o);switch(o.type){case"text":return{type:"text",text:o.text,...u};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${Tfe(o.image)}`},...u};case"file":throw new br({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const u of r){const c=nm(u);switch(u.type){case"text":{o+=u.text;break}case"tool-call":{s.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)},...c});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=nm(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function Sv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function Ev(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Ife=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),Pw={errorSchema:Ife,errorToMessage:e=>e.error.message};function Ofe({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const u of r)u.type==="provider-defined"?a.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const u=s;throw new br({functionality:`Unsupported tool choice type: ${u}`})}}}var Dfe=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Pw;this.chunkSchema=Mfe(i.errorSchema),this.failedResponseHandler=jw(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:u,stopSequences:c,responseFormat:f,seed:h}){var m,g;const w=e.type,v=[];i!=null&&v.push({type:"unsupported-setting",setting:"topK"}),(f==null?void 0:f.type)==="json"&&f.schema!=null&&!this.supportsStructuredOutputs&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(f==null?void 0:f.type)==="json"?this.supportsStructuredOutputs===!0&&f.schema!=null?{type:"json_schema",json_schema:{schema:f.schema,name:(m=f.name)!=null?m:"response",description:f.description}}:{type:"json_object"}:void 0,stop:c,seed:h,...u==null?void 0:u[this.providerOptionsName],messages:Nfe(t)};switch(w){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=Ofe({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...v,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:v};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:v};default:{const x=w;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,u,c;const{args:f,warnings:h}=this.getArgs({...e}),m=JSON.stringify(f),{responseHeaders:g,value:w,rawValue:v}=await ph({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hh(this.config.headers(),e.headers),body:f,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Mw(jfe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=f,S=w.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:v});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var A;return{toolCallType:"function",toolCallId:(A=C.id)!=null?A:r2(),toolName:C.function.name,args:C.function.arguments}}),finishReason:Ev(S.finish_reason),usage:{promptTokens:(s=(o=w.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(c=(u=w.usage)==null?void 0:u.completion_tokens)!=null?c:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:v},response:Sv(w),warnings:h,request:{body:m}}}async doStream(e){var t;if(this.settings.simulateStreaming){const w=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...w.response}),w.reasoning)if(Array.isArray(w.reasoning))for(const x of w.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:w.reasoning});if(w.text&&_.enqueue({type:"text-delta",textDelta:w.text}),w.toolCalls)for(const x of w.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:w.finishReason,usage:w.usage,logprobs:w.logprobs,providerMetadata:w.providerMetadata}),_.close()}}),rawCall:w.rawCall,rawResponse:w.rawResponse,warnings:w.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await ph({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:hh(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:_F(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=n,f=[];let h="unknown",m={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(w,v){var _,x,S,E,C,A,O,I,D,B,W,Q,M,K;if(!w.success){h="error",v.enqueue({type:"error",error:w.error});return}const U=w.value;if(i==null||i.processChunk(w.rawValue),"error"in U){h="error",v.enqueue({type:"error",error:U.error.message});return}g&&(g=!1,v.enqueue({type:"response-metadata",...Sv(U)})),U.usage!=null&&(m={promptTokens:(_=U.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=U.usage.completion_tokens)!=null?x:void 0});const me=U.choices[0];if((me==null?void 0:me.finish_reason)!=null&&(h=Ev(me.finish_reason)),(me==null?void 0:me.delta)==null)return;const se=me.delta;if(se.reasoning_content!=null&&v.enqueue({type:"reasoning",textDelta:se.reasoning_content}),se.content!=null&&v.enqueue({type:"text-delta",textDelta:se.content}),se.tool_calls!=null)for(const ne of se.tool_calls){const ee=ne.index;if(f[ee]==null){if(ne.type!=="function")throw new Uf({data:ne,message:"Expected 'function' type."});if(ne.id==null)throw new Uf({data:ne,message:"Expected 'id' to be a string."});if(((S=ne.function)==null?void 0:S.name)==null)throw new Uf({data:ne,message:"Expected 'function.name' to be a string."});f[ee]={id:ne.id,type:"function",function:{name:ne.function.name,arguments:(E=ne.function.arguments)!=null?E:""},hasFinished:!1};const G=f[ee];((C=G.function)==null?void 0:C.name)!=null&&((A=G.function)==null?void 0:A.arguments)!=null&&(G.function.arguments.length>0&&v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:G.function.arguments}),g6(G.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=G.id)!=null?O:r2(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0));continue}const ae=f[ee];ae.hasFinished||(((I=ne.function)==null?void 0:I.arguments)!=null&&(ae.function.arguments+=(B=(D=ne.function)==null?void 0:D.arguments)!=null?B:""),v.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:(W=ne.function.arguments)!=null?W:""}),((Q=ae.function)==null?void 0:Q.name)!=null&&((M=ae.function)==null?void 0:M.arguments)!=null&&g6(ae.function.arguments)&&(v.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(K=ae.id)!=null?K:r2(),toolName:ae.function.name,args:ae.function.arguments}),ae.hasFinished=!0))}},flush(w){var v,_;const x=i==null?void 0:i.buildMetadata();w.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(v=m.promptTokens)!=null?v:NaN,completionTokens:(_=m.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:o},warnings:r,request:{body:a}}}},jfe=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),Mfe=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),e]);function Pfe({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new wl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"image":throw new br({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(u=>{switch(u.type){case"text":return u.text;case"tool-call":throw new br({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new br({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var Ffe=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Pw;this.chunkSchema=$fe(a.errorSchema),this.failedResponseHandler=jw(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,providerMetadata:m}){var g;const w=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),f!=null&&f.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=Pfe({prompt:n,inputFormat:t}),S=[...x??[],...c??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:u,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(w){case"regular":{if((g=e.tools)!=null&&g.length)throw new br({functionality:"tools"});if(e.toolChoice)throw new br({functionality:"toolChoice"});return{args:E,warnings:v}}case"object-json":throw new br({functionality:"object-json mode"});case"object-tool":throw new br({functionality:"object-tool mode"});default:{const C=w;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:u,rawValue:c}=await ph({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hh(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Mw(Lfe),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:f,...h}=i,m=u.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=u.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=u.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:Ev(m.finish_reason),rawCall:{rawPrompt:f,rawSettings:h},rawResponse:{headers:s,body:c},response:Sv(u),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await ph({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:hh(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:_F(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},f=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){u="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){u="error",m.enqueue({type:"error",error:g.error});return}f&&(f=!1,m.enqueue({type:"response-metadata",...Sv(g)})),g.usage!=null&&(c={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const w=g.choices[0];(w==null?void 0:w.finish_reason)!=null&&(u=Ev(w.finish_reason)),(w==null?void 0:w.text)!=null&&m.enqueue({type:"text-delta",textDelta:w.text})},flush(h){h.enqueue({type:"finish",finishReason:u,usage:c})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},Lfe=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),$fe=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),e]),Bfe=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new Ek({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await ph({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:hh(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:jw((r=this.config.errorStructure)!=null?r:Pw),successfulResponseHandler:Mw(zfe),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},zfe=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),Ufe=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var u,c,f,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const w=(f=(c=(u=this.config._internal)==null?void 0:u.currentDate)==null?void 0:c.call(u))!=null?f:new Date,{value:v,responseHeaders:_}=await ph({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:hh(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:jw((m=this.config.errorStructure)!=null?m:Pw),successfulResponseHandler:Mw(qfe),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(x=>x.b64_json),warnings:g,response:{timestamp:w,modelId:this.modelId,headers:_}}}},qfe=$.object({data:$.array($.object({b64_json:$.string()}))});function Hfe(e){const t=Rfe(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>o(h,m),o=(h,m={})=>new Dfe(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,m={})=>new Ffe(h,m,a("completion")),u=(h,m={})=>new Bfe(h,m,a("embedding")),c=(h,m={})=>new Ufe(h,m,a("image")),f=(h,m)=>i(h,m);return f.languageModel=i,f.chatModel=o,f.completionModel=s,f.textEmbeddingModel=u,f.imageModel=c,f}const Bk=e=>e==="openai"||e==="openrouter"||e==="google",zk=e=>e==="ollama"||e==="openai-compatible",hm=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",xF=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],If={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},SF=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function Vfe(e,t,n){try{switch(e.type){case"openai":return X5({apiKey:n})(t);case"google":return OP({apiKey:n})(t);case"openrouter":return yF({apiKey:n})(t);case"ollama":return bF({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return Hfe({baseURL:SF(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function Gfe(e,t,n){const r=e.type,i=(e.fetchedModels&&e.fetchedModels.length>0?e.fetchedModels:If[r]||[]).find(c=>c.id===t);if(!i)return;const o=Vfe(e,t,n);if(!o)return;const s=e.type==="openai",u=["openai","google","openrouter"].includes(e.type);return{id:`${e.id}:${t}`,name:i.name,providerId:e.id,providerName:e.name,instance:o,supportsImageGeneration:s,supportsToolCalling:u}}const rm=new Map,Wfe=5*60*1e3;async function Kfe(e,t){const n=`${e.id}-${e.baseURL||""}`,r=rm.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,u,c;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":{if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break}case"openrouter":{if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break}case"ollama":{const f=((u=e.baseURL)==null?void 0:u.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",f).toString(),delete o.Authorization;break}case"openai-compatible":{if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const f=SF(e.baseURL);i=new URL("models",f.endsWith("/")?f:f+"/").toString();break}case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(f){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,f),ht.error(`Invalid Base URL for ${e.name}: ${f instanceof Error?f.message:String(f)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const f=await fetch(i,{headers:o});if(!f.ok){let g=`(${f.status} ${f.statusText})`;try{const w=await f.text();try{const v=JSON.parse(w);g=((c=v==null?void 0:v.error)==null?void 0:c.message)||(v==null?void 0:v.message)||w||g}catch{g=w||g}}catch(w){console.warn("[ModelFetcher] Failed to read error response body:",w)}throw new Error(`API Error: ${g}`)}const h=await f.json();let m=[];if(e.type==="ollama")h.models&&Array.isArray(h.models)?m=h.models.map(g=>({id:g.name,name:g.name})):console.warn(`[ModelFetcher] Unexpected response structure from Ollama for ${e.name}:`,h);else{const g=h.data||h;Array.isArray(g)?m=g.map(w=>({id:w.id,name:w.name||w.id})):console.warn(`[ModelFetcher] Unexpected response structure for ${e.name} (Type: ${e.type}):`,h)}return m.sort((g,w)=>(g.name||g.id).localeCompare(w.name||w.id)),console.log(`[ModelFetcher] Fetched ${m.length} models for ${e.name}`),m}catch(f){const h=f instanceof Error?f.message:String(f);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),ht.error(`Failed to fetch models for ${e.name}: ${h}`),rm.delete(n),[]}})();return rm.set(n,a),setTimeout(()=>{rm.get(n)===a&&(rm.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},Wfe),a}const i2="provider:lastModelSelection",y6="provider:globalModelSortOrder",am=(e,t)=>`${e}:${t}`,Zfe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},ki=Bl(zl((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Wt.saveSetting("enableApiKeyManagement",n)},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Wt.loadProviderConfigs(),Wt.loadApiKeys(),Wt.loadSetting(y6,[]),Wt.loadSetting(i2,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(w=>{m.push(am(g.id,w))}),m),[]),u=new Set(s),c=i.filter(m=>u.has(m));e({globalModelSortOrder:c});let f=o;f&&u.has(f)||(f=c[0]??null,f||(f=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${f}`)),e({selectedModelId:f,isLoading:!1}),await Wt.saveSetting(i2,f)}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),ht.error("Failed to load provider data")}},selectModel:n=>{e({selectedModelId:n}),Wt.saveSetting(i2,n)},addApiKey:async(n,r,a)=>{const i=Mo(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Wt.saveApiKey(s),e(u=>{u.dbApiKeys.push(s)}),ht.success(`API Key "${n}" added.`),i}catch(u){throw console.error("ProviderStore: Error adding API key",u),ht.error(`Failed to add API Key: ${u instanceof Error?u.message:String(u)}`),u}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Wt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),ht.success(`API Key "${r}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting API key",i),ht.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=Mo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Wt.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),ht.success(`Provider "${n.name}" added.`),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),ht.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Wt.saveProviderConfig(i),e(h=>{const m=h.dbProviderConfigs.findIndex(g=>g.id===n);m!==-1&&(h.dbProviderConfigs[m]=i)});const o=t().globalModelSortOrder;let s=[...o],u=!1;const c=(i.fetchedModels??If[i.type]??[]).map(h=>am(n,h.id)),f=new Set((i.enabledModels??[]).map(h=>am(n,h)));r.isEnabled===!1?(s=s.filter(h=>!c.includes(h)),u=!0):(r.isEnabled===!0||r.enabledModels)&&(s=s.filter(h=>!c.includes(h)||f.has(h)),f.forEach(h=>{s.includes(h)||s.push(h)}),u=!0),(JSON.stringify(s)!==JSON.stringify(o)||u)&&await t().setGlobalModelSortOrder(s)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),ht.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Wt.deleteProviderConfig(n);const i=(r.fetchedModels??If[r.type]??[]).map(u=>am(n,u.id)),s=t().globalModelSortOrder.filter(u=>!i.includes(u));e(u=>{u.dbProviderConfigs=u.dbProviderConfigs.filter(c=>c.id!==n)}),await t().setGlobalModelSortOrder(s),ht.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),ht.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){ht.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(u=>u.id===i))==null?void 0:a.value,s=await Kfe(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),ht.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{var s,u;const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Wt.saveSetting(y6,r);const a=t().selectedModelId,i=t().getGloballyEnabledAndOrderedModels(),o=new Set(i.map(c=>c.id));if(a&&!o.has(a)){const c=r.find(f=>o.has(f))??((s=i[0])==null?void 0:s.id)??null;console.log(`[ProviderStore] Selection ${a} invalidated by order change. Selecting ${c}`),t().selectModel(c)}else if(!a&&r.length>0){const c=r.find(f=>o.has(f))??((u=i[0])==null?void 0:u.id)??null;console.log(`[ProviderStore] No selection, selecting first from new order: ${c}`),t().selectModel(c)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=Zfe(n);if(!i||!o)return;const s=r.find(c=>c.id===i);if(!s)return;const u=a.find(c=>c.id===s.apiKeyId);return Gfe(s,o,u==null?void 0:u.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=n.type,a=[...n.fetchedModels??(If[r]||[])];return{id:n.id,name:n.name,type:n.type,allAvailableModels:a}}),getGloballyEnabledAndOrderedModels:()=>{const{dbProviderConfigs:n,globalModelSortOrder:r}=t(),a=new Map,i=new Set;n.forEach(c=>{if(!c.isEnabled||!c.enabledModels)return;const f=c.type,h=c.fetchedModels??If[f]??[],m=new Map(h.map(g=>[g.id,g]));c.enabledModels.forEach(g=>{const w=am(c.id,g),v=m.get(g);v&&(i.add(w),a.set(w,{id:w,name:v.name||g,providerId:c.id,providerName:c.name}))})});const o=[],s=new Set;r.forEach(c=>{if(i.has(c)){const f=a.get(c);f&&!s.has(c)&&(o.push(f),s.add(c))}});const u=Array.from(i).filter(c=>!s.has(c)).map(c=>a.get(c)).filter(c=>!!c).sort((c,f)=>c.name.localeCompare(f.name));return[...o,...u]},getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return[];const a=r.type;return[...r.fetchedModels??(If[a]||[])]}})));async function b6(e,t){const n=Ri.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}const Yfe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}};function Xfe(){const e=kr.getState(),t=ki.getState(),n=Ta.getState(),{providerId:r}=Yfe(t.selectedModelId);return{selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme}}function Jfe(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}const Qfe=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"];function ehe(e){try{const t=e.type||"application/octet-stream",n=e.name.toLowerCase(),r=t.startsWith("text/")||t==="application/json"||Qfe.some(i=>n.endsWith(i)),a=t.startsWith("image/");if(r&&e.contentText!==void 0)return{type:"text",text:e.contentText};if(a&&e.contentBase64!==void 0)return{type:"image",image:Jfe(e.contentBase64),mimeType:t};if(!r&&e.contentBase64!==void 0)return console.warn(`AIService: Unsupported file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw new Error(`Missing content or unable to determine type for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),ht.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}class gb{static async startInteraction(t,n){var D,B,W,Q,M;const r=kr.getState(),a=r.currentConversationId;if(!a)return r.setError("No active conversation."),ht.error("Cannot start interaction: No active conversation."),null;const i=await b6("middleware:interaction:beforeStart",{prompt:t,conversationId:a});if(i===!1)return console.log("AIService: Interaction start cancelled by middleware."),null;const o=i&&typeof i=="object"?i.prompt:t,s=Mo(),u=new AbortController;this.activeStreams.set(s,u);const f=r.interactions.filter(K=>K.conversationId===a),h=f.reduce((K,U)=>Math.max(K,U.index),-1)+1,m=f.length>0?f[f.length-1].id:null,g=[...o.messages];let w=-1;for(let K=g.length-1;K>=0;K--)if(g[K].role==="user"){w=K;break}if(w!==-1&&((D=n.metadata)!=null&&D.attachedFiles)&&n.metadata.attachedFiles.length>0){const K=g[w],U=n.metadata.attachedFiles.map(ehe).filter(se=>se!==null);let me=[];typeof K.content=="string"?me.push({type:"text",text:K.content}):Array.isArray(K.content)&&(me=K.content.filter(se=>se&&typeof se=="object"&&"type"in se&&(se.type==="text"||se.type==="image"))),g[w]={...K,content:[...U,...me]},console.log(`AIService: Added ${U.length} file(s) to user message content.`)}const v={id:s,conversationId:a,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...o.metadata,attachedFiles:(B=n.metadata.attachedFiles)==null?void 0:B.map(({contentBase64:K,contentText:U,...me})=>me)},index:h,parentId:m};r._addInteractionToState(v),r._addStreamingId(s),Wt.saveInteraction({...v}).catch(K=>{console.error(`AIService: Failed initial persistence for ${s}`,K)}),Si.emit("interaction:started",{interactionId:s,conversationId:a,type:v.type}),console.log(`AIService: Starting AI call for interaction: ${s} with final messages:`,JSON.stringify(g,null,2));let _,x="ERROR",S,E,C,A=!1;const O=[],I=[];try{const K=(W=ki.getState().getSelectedModel())==null?void 0:W.instance;if(!K)throw new Error("Selected model instance not available.");const U=Ri.getState().getRegisteredTools(),me=Object.entries(U).reduce((ne,[ee,ae])=>(ne[ee]=ae.definition,ne),{}),se={model:K,messages:g,signal:u.signal,...Object.keys(me).length>0&&{tools:me},toolChoice:o.toolChoice??(Object.keys(me).length>0?"auto":"none"),toolExecutors:Object.entries(U).filter(([ne,ee])=>!!ee.implementation).reduce((ne,[ee,ae])=>(ne[ee]=async G=>{try{const Y=ae.definition.parameters.parse(G);return await ae.implementation(Y,Xfe())}catch(Y){console.error(`[AIService] Error executing tool ${ee}:`,Y);const J=Y instanceof Error?Y.message:String(Y);return Y instanceof $.ZodError?{error:`Invalid arguments: ${Y.errors.map(re=>`${re.path.join(".")} (${re.message})`).join(", ")}`}:{error:J}}},ne),{})};o.system&&(se.system=o.system),o.parameters&&(o.parameters.temperature!==void 0&&(se.temperature=o.parameters.temperature),o.parameters.max_tokens!==void 0&&(se.maxTokens=o.parameters.max_tokens),o.parameters.top_p!==void 0&&(se.topP=o.parameters.top_p),o.parameters.top_k!==void 0&&(se.topK=o.parameters.top_k),o.parameters.presence_penalty!==void 0&&(se.presencePenalty=o.parameters.presence_penalty),o.parameters.frequency_penalty!==void 0&&(se.frequencyPenalty=o.parameters.frequency_penalty)),_=await rue(se);for await(const ne of _.fullStream){if(u.signal.aborted)throw console.log(`AIService: Stream ${s} aborted by signal.`),new Error("Stream aborted by user.");switch(ne.type){case"text-delta":{const ee={interactionId:s,chunk:ne.textDelta},ae=await b6("middleware:interaction:processChunk",ee);if(ae!==!1){const G=ae&&typeof ae=="object"&&"chunk"in ae?ae.chunk:ne.textDelta;kr.getState().appendInteractionResponseChunk(s,G),Si.emit("interaction:stream_chunk",{interactionId:s,chunk:G})}break}case"tool-call":O.push(ne),console.log(`[AIService] Tool call observed: ${ne.toolName}`,ne.args);break;case"tool-result":I.push(ne),console.log(`[AIService] Tool result observed for ${ne.toolName} (Call ID: ${ne.toolCallId})`,ne.result);break;case"finish":console.log("[AIService] Stream finished part:",ne),E=ne.usage,C=ne.providerMetadata,A=!0;break;case"error":throw console.error("[AIService] Stream error part:",ne.error),new Error(`AI Stream Error: ${ne.error instanceof Error?ne.error.message:ne.error}`)}}if(u.signal.aborted)throw new Error("Stream aborted by user.");A?(x="COMPLETED",console.log(`AIService: Interaction ${s} completed.`)):(console.warn(`AIService: Stream loop finished for ${s} but no 'finish' event received.`),x="ERROR",S="Stream finished unexpectedly without completion signal.")}catch(K){console.error(`AIService: Error during interaction ${s}:`,K);const U=K instanceof Error&&K.message==="Stream aborted by user.";x=U?"CANCELLED":"ERROR",S=U?void 0:K instanceof Error?K.message:String(K),U?(console.log(`AIService: Interaction ${s} cancelled.`),ht.info("Interaction cancelled.")):ht.error(`AI Interaction Error: ${S}`)}finally{this.activeStreams.delete(s);const K=kr.getState().activeStreamBuffers[s]||"",U=((Q=kr.getState().interactions.find(ne=>ne.id===s))==null?void 0:Q.metadata)||v.metadata,me={status:x,endedAt:new Date,response:K,metadata:{...U,...E&&{promptTokens:E.promptTokens,completionTokens:E.completionTokens,totalTokens:E.totalTokens},...C&&{providerMetadata:C},...x==="ERROR"&&{error:S},...O.length>0&&{toolCalls:O},...I.length>0&&{toolResults:I},attachedFiles:(M=v.metadata.attachedFiles)==null?void 0:M.map(({contentBase64:ne,contentText:ee,...ae})=>ae)}};kr.getState()._updateInteractionInState(s,me),kr.getState()._removeStreamingId(s);const se=kr.getState().interactions.find(ne=>ne.id===s);se?kr.getState().updateInteractionAndPersist({...se}).catch(ne=>{console.error(`AIService: Failed final persistence for ${s}`,ne)}):console.error(`AIService: CRITICAL - Could not find final state for interaction ${s} to persist after updates. State might be inconsistent.`),Si.emit("interaction:completed",{interactionId:s,status:x,error:S??void 0}),console.log(`AIService: Finalized interaction ${s} with status ${x}.`)}return s}static stopInteraction(t){const n=this.activeStreams.get(t),r=kr.getState();if(n&&!n.signal.aborted)console.log(`AIService: Aborting interaction ${t}...`),n.abort();else{console.log(`AIService: No active controller found or already aborted for interaction ${t}. Attempting store cleanup if needed.`);const a=r.interactions.find(i=>i.id===t);if(a&&a.status==="STREAMING"&&(!n||n.signal.aborted)){console.warn(`AIService: Forcing CANCELLED status for interaction ${t} without active controller or already aborted.`);const i=r.activeStreamBuffers[t]||"",o={status:"CANCELLED",endedAt:new Date,response:i};r._updateInteractionInState(t,o),r._removeStreamingId(t);const s=kr.getState().interactions.find(u=>u.id===t);s&&r.updateInteractionAndPersist({...s}).catch(u=>{console.error(`AIService: Failed persistence for forced cancel of ${t}`,u)})}}}}qa(gb,"activeStreams",new Map);const l0=Bl(zl((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),ht.error(r)}},addDbMod:async n=>{const r=Mo(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Wt.saveMod(a),ht.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(u=>u.id!==r),s.error=o}),ht.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(u=>u.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Wt.saveMod(o),ht.success(`Mod "${o.name}" updated.`)}catch(s){const u="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(c=>{const f=c.dbMods.findIndex(h=>h.id===n);f!==-1&&a&&(c.dbMods[f]=a,c.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),c.error=u}),ht.error(u),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Wt.deleteMod(n),ht.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((u,c)=>u.loadOrder-c.loadOrder),s.error=o}),ht.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}}))),the=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}};function v6(e){const t=e.id,n=e.name,r=Ri.getState(),a=l0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>r.registerChatControl(o),registerTool:(o,s,u)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,u)),on:(o,s)=>(Si.on(o,s),()=>Si.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=kr.getState(),s=zo.getState(),u=Ta.getState(),c=ki.getState(),{providerId:f}=the(c.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:o.status==="streaming",selectedProviderId:f,selectedModelId:c.selectedModelId,activeSystemPrompt:u.globalSystemPrompt,temperature:u.temperature,maxTokens:u.maxTokens,theme:u.theme})},showToast:(o,s)=>{ht[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function nhe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=v6(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const c=await fetch(r.sourceUrl);if(!c.ok)throw new Error(`Failed to fetch mod script: ${c.status} ${c.statusText}`);a=await c.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(c){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,c),c}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(u){o=u instanceof Error?u:String(u),console.error(`[ModLoader] Error loading mod "${r.name}":`,u),ht.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=v6(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Si.emit(s.error?"mod:error":"mod:loaded",{id:r.id,name:r.name,error:s.error}),s}));return Si.emit("app:loaded",void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var rhe=(e,t,n,r,a,i,o,s)=>{let u=document.documentElement,c=["light","dark"];function f(g){(Array.isArray(e)?e:[e]).forEach(w=>{let v=w==="class",_=v&&i?a.map(x=>i[x]||x):a;v?(u.classList.remove(..._),u.classList.add(i&&i[g]?i[g]:g)):u.setAttribute(w,g)}),h(g)}function h(g){s&&c.includes(g)&&(u.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)f(r);else try{let g=localStorage.getItem(t)||n,w=o&&g==="system"?m():g;f(w)}catch{}},ahe=N.createContext(void 0),ihe={setTheme:e=>{},themes:[]},ohe=()=>{var e;return(e=N.useContext(ahe))!=null?e:ihe};N.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:u,scriptProps:c})=>{let f=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return N.createElement("script",{...c,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${rhe.toString()})(${f})`}})});const she=({...e})=>{const{theme:t="system"}=ohe();return y.jsx(IH,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function Uk({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:Mt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const EF=N.forwardRef(({value:e,onChange:t,onSubmit:n,disabled:r,placeholder:a="Type message... (Shift+Enter for new line)"},i)=>{const o=N.useRef(null);N.useImperativeHandle(i,()=>o.current,[]);const{focusInputOnNextRender:s,setFocusInputFlag:u}=Uo(Hn(h=>({focusInputOnNextRender:h.focusInputOnNextRender,setFocusInputFlag:h.setFocusInputFlag})));N.useEffect(()=>{s&&o.current&&(u(!1),requestAnimationFrame(()=>{var h;(h=o.current)==null||h.focus()}))},[s,u]);const c=h=>{h.key==="Enter"&&!h.shiftKey&&!r&&(h.preventDefault(),n())},f=h=>{t(h.target.value)};return N.useEffect(()=>{const h=o.current;if(h){h.style.height="auto";const m=h.scrollHeight,g=250;h.style.height=`${Math.min(m,g)}px`}},[e]),y.jsx(Uk,{ref:o,value:e,onChange:f,onKeyDown:c,disabled:r,placeholder:a,rows:3,className:Mt("w-full p-3 border border-[--border] rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-[--primary] outline-none disabled:opacity-50 overflow-y-auto","min-h-[80px] max-h-[250px]"),"aria-label":"Chat input"})});EF.displayName="InputArea";var lhe=N.createContext(void 0);function Fh(e){const t=N.useContext(lhe);return e||t||"ltr"}function u0(e,[t,n]){return Math.min(n,Math.max(t,e))}function uhe(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var qk="ScrollArea",[CF,A1e]=ci(qk),[che,Eo]=CF(qk),kF=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,u]=N.useState(null),[c,f]=N.useState(null),[h,m]=N.useState(null),[g,w]=N.useState(null),[v,_]=N.useState(null),[x,S]=N.useState(0),[E,C]=N.useState(0),[A,O]=N.useState(!1),[I,D]=N.useState(!1),B=_n(t,Q=>u(Q)),W=Fh(a);return y.jsx(che,{scope:n,type:r,dir:W,scrollHideDelay:i,scrollArea:s,viewport:c,onViewportChange:f,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:A,onScrollbarXEnabledChange:O,scrollbarY:v,onScrollbarYChange:_,scrollbarYEnabled:I,onScrollbarYEnabledChange:D,onCornerWidthChange:S,onCornerHeightChange:C,children:y.jsx(Jt.div,{dir:W,...o,ref:B,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});kF.displayName=qk;var AF="ScrollAreaViewport",TF=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=Eo(AF,n),s=N.useRef(null),u=_n(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(Jt.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});TF.displayName=AF;var Vs="ScrollAreaScrollbar",RF=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Eo(Vs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return N.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(dhe,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(fhe,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(NF,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(Hk,{...r,ref:t}):null});RF.displayName=Vs;var dhe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Eo(Vs,e.__scopeScrollArea),[i,o]=N.useState(!1);return N.useEffect(()=>{const s=a.scrollArea;let u=0;if(s){const c=()=>{window.clearTimeout(u),o(!0)},f=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",c),s.addEventListener("pointerleave",f),()=>{window.clearTimeout(u),s.removeEventListener("pointerenter",c),s.removeEventListener("pointerleave",f)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(Na,{present:n||i,children:y.jsx(NF,{"data-state":i?"visible":"hidden",...r,ref:t})})}),fhe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=Eo(Vs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=Lw(()=>u("SCROLL_END"),100),[s,u]=uhe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(s==="idle"){const c=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(c)}},[s,a.scrollHideDelay,u]),N.useEffect(()=>{const c=a.viewport,f=i?"scrollLeft":"scrollTop";if(c){let h=c[f];const m=()=>{const g=c[f];h!==g&&(u("SCROLL"),o()),h=g};return c.addEventListener("scroll",m),()=>c.removeEventListener("scroll",m)}},[a.viewport,i,u,o]),y.jsx(Na,{present:n||s!=="hidden",children:y.jsx(Hk,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Ft(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:Ft(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),NF=N.forwardRef((e,t)=>{const n=Eo(Vs,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=N.useState(!1),s=e.orientation==="horizontal",u=Lw(()=>{if(n.viewport){const c=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?c:f)}},10);return mh(n.viewport,u),mh(n.content,u),y.jsx(Na,{present:r||i,children:y.jsx(Hk,{"data-state":i?"visible":"hidden",...a,ref:t})})}),Hk=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=Eo(Vs,e.__scopeScrollArea),i=N.useRef(null),o=N.useRef(0),[s,u]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=MF(s.viewport,s.content),f={...r,sizes:s,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function h(m,g){return bhe(m,o.current,s,g)}return n==="horizontal"?y.jsx(hhe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=w6(m,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?y.jsx(phe,{...f,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=w6(m,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),hhe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Eo(Vs,e.__scopeScrollArea),[o,s]=N.useState(),u=N.useRef(null),c=_n(t,u,i.onScrollbarXChange);return N.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(OF,{"data-orientation":"horizontal",...a,ref:c,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+f.deltaX;e.onWheelScroll(m),FF(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:kv(o.paddingLeft),paddingEnd:kv(o.paddingRight)}})}})}),phe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=Eo(Vs,e.__scopeScrollArea),[o,s]=N.useState(),u=N.useRef(null),c=_n(t,u,i.onScrollbarYChange);return N.useEffect(()=>{u.current&&s(getComputedStyle(u.current))},[u]),y.jsx(OF,{"data-orientation":"vertical",...a,ref:c,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fw(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,h)=>{if(i.viewport){const m=i.viewport.scrollTop+f.deltaY;e.onWheelScroll(m),FF(m,h)&&f.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:kv(o.paddingTop),paddingEnd:kv(o.paddingBottom)}})}})}),[mhe,IF]=CF(Vs),OF=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:u,onDragScroll:c,onWheelScroll:f,onResize:h,...m}=e,g=Eo(Vs,n),[w,v]=N.useState(null),_=_n(t,B=>v(B)),x=N.useRef(null),S=N.useRef(""),E=g.viewport,C=r.content-r.viewport,A=Ea(f),O=Ea(u),I=Lw(h,10);function D(B){if(x.current){const W=B.clientX-x.current.left,Q=B.clientY-x.current.top;c({x:W,y:Q})}}return N.useEffect(()=>{const B=W=>{const Q=W.target;(w==null?void 0:w.contains(Q))&&A(W,C)};return document.addEventListener("wheel",B,{passive:!1}),()=>document.removeEventListener("wheel",B,{passive:!1})},[E,w,C,A]),N.useEffect(O,[r,O]),mh(w,I),mh(g.content,I),y.jsx(mhe,{scope:n,scrollbar:w,hasThumb:a,onThumbChange:Ea(i),onThumbPointerUp:Ea(o),onThumbPositionChange:O,onThumbPointerDown:Ea(s),children:y.jsx(Jt.div,{...m,ref:_,style:{position:"absolute",...m.style},onPointerDown:Ft(e.onPointerDown,B=>{B.button===0&&(B.target.setPointerCapture(B.pointerId),x.current=w.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),D(B))}),onPointerMove:Ft(e.onPointerMove,D),onPointerUp:Ft(e.onPointerUp,B=>{const W=B.target;W.hasPointerCapture(B.pointerId)&&W.releasePointerCapture(B.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Cv="ScrollAreaThumb",DF=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=IF(Cv,e.__scopeScrollArea);return y.jsx(Na,{present:n||a.hasThumb,children:y.jsx(ghe,{ref:t,...r})})}),ghe=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=Eo(Cv,n),o=IF(Cv,n),{onThumbPositionChange:s}=o,u=_n(t,h=>o.onThumbChange(h)),c=N.useRef(void 0),f=Lw(()=>{c.current&&(c.current(),c.current=void 0)},100);return N.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(f(),!c.current){const g=vhe(h,s);c.current=g,s()}};return s(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,f,s]),y.jsx(Jt.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Ft(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),w=h.clientX-g.left,v=h.clientY-g.top;o.onThumbPointerDown({x:w,y:v})}),onPointerUp:Ft(e.onPointerUp,o.onThumbPointerUp)})});DF.displayName=Cv;var Vk="ScrollAreaCorner",jF=N.forwardRef((e,t)=>{const n=Eo(Vk,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(yhe,{...e,ref:t}):null});jF.displayName=Vk;var yhe=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=Eo(Vk,n),[i,o]=N.useState(0),[s,u]=N.useState(0),c=!!(i&&s);return mh(a.scrollbarX,()=>{var h;const f=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(f),u(f)}),mh(a.scrollbarY,()=>{var h;const f=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(f),o(f)}),c?y.jsx(Jt.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function kv(e){return e?parseInt(e,10):0}function MF(e,t){const n=e/t;return isNaN(n)?0:n}function Fw(e){const t=MF(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function bhe(e,t,n,r="ltr"){const a=Fw(n),i=a/2,o=t||i,s=a-o,u=n.scrollbar.paddingStart+o,c=n.scrollbar.size-n.scrollbar.paddingEnd-s,f=n.content-n.viewport,h=r==="ltr"?[0,f]:[f*-1,0];return PF([u,c],h)(e)}function w6(e,t,n="ltr"){const r=Fw(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,u=n==="ltr"?[0,o]:[o*-1,0],c=u0(e,u);return PF([0,o],[0,s])(c)}function PF(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function FF(e,t){return e>0&&e<t}var vhe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function Lw(e,t){const n=Ea(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function mh(e,t){const n=Ea(t);La(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var whe=kF,_he=TF,xhe=jF;function $w({className:e,children:t,...n}){return y.jsxs(whe,{"data-slot":"scroll-area",className:Mt("relative",e),...n,children:[y.jsx(_he,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(She,{}),y.jsx(xhe,{})]})}function She({className:e,orientation:t="vertical",...n}){return y.jsx(RF,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Mt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(DF,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Rr({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:Mt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const Ehe=(e,t)=>{if(!t)return null;let n=eC,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Qn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Bu,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=Bu,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=O2,r="text-green-500",a=`Synced with ${t}`;break}return y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(n,{className:Mt("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(On,{side:"right",children:a})]})})},Av=N.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:w,editingItemType:v,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I})=>{const D=e.id===n,B=e.itemType==="project",W=e.id===w&&e.itemType===v,Q=B&&f.has(e.id),{projects:M,conversations:K}=B?m(e.id,g):{projects:[],conversations:[]},U=M.length>0||K.length>0,me=!B&&e.syncRepoId?r[e.id]:void 0,se=!B&&e.syncRepoId?a.get(e.syncRepoId):void 0,ne=!B&&se?Ehe(me,se):null,ee=()=>{W||(B&&U&&h(e.id),i(e.id,e.itemType))},ae=re=>{re.stopPropagation(),B?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,re):o(e.id,re)},G=re=>{re.stopPropagation(),E(e)},Y=re=>{re.key==="Enter"?(re.preventDefault(),C()):re.key==="Escape"&&A(B&&_==="New Project")};N.useEffect(()=>{var re,we;W&&((re=I.current)==null||re.focus(),(we=I.current)==null||we.select())},[W,I]);const J=B?e.name:e.title;return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:Mt("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!W&&"hover:bg-muted/50 hover:text-primary/80",D&&!W?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",W&&"bg-muted ring-1 ring-primary",!W&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ee,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[B&&U&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:re=>{re.stopPropagation(),h(e.id)},children:Q?y.jsx(XE,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(CO,{className:"h-3 w-3 text-muted-foreground"})}),B&&!U&&y.jsx("span",{className:"w-3 flex-shrink-0"}),B?y.jsx(Hv,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(vq,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),W?y.jsx(Rr,{ref:I,value:x,onChange:re=>S(re.target.value),onKeyDown:Y,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:re=>re.stopPropagation(),disabled:O}):y.jsx("span",{className:"truncate pr-1",children:J}),ne]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:W?y.jsxs(y.Fragment,{children:[y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-5 w-5 text-green-500 hover:text-green-600",onClick:re=>{re.stopPropagation(),C()},disabled:O||!x.trim()||x.trim()===_,"aria-label":"Save changes",children:O?y.jsx(Qn,{className:"h-3 w-3 animate-spin"}):y.jsx(vo,{className:"h-3 w-3"})}),y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:re=>{re.stopPropagation(),A(B&&_==="New Project")},disabled:O,"aria-label":"Cancel edit",children:y.jsx(zs,{className:"h-3 w-3"})})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:G,"aria-label":`Edit ${J}`,children:y.jsx(tC,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Edit"})]})}),B?y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-5 w-5 text-muted-foreground hover:text-foreground",onClick:re=>c(e.id,re),"aria-label":`Export project ${J}`,children:y.jsx(LU,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Export Project (JSON)"})]})}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx("div",{className:"p-1 rounded hover:bg-muted cursor-pointer","aria-label":`Export ${J}`,children:y.jsx(Cb,{className:"h-3 w-3 text-muted-foreground group-hover/export:text-foreground"})})}),y.jsx(On,{side:"top",children:"Export Conversation"})]})}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:re=>re.stopPropagation(),children:[y.jsx(Ht,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:re=>u(e.id,"json",re),children:"JSON"}),y.jsx(Ht,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:re=>u(e.id,"md",re),children:"MD"})]})]}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-5 w-5 text-destructive hover:text-destructive/80",onClick:ae,"aria-label":`Delete ${J}`,children:y.jsx(zu,{className:"h-3 w-3"})})}),y.jsx(On,{side:"top",children:"Delete"})]})})]})})]},e.id),B&&Q&&y.jsxs(y.Fragment,{children:[M.sort((re,we)=>we.updatedAt.getTime()-re.updatedAt.getTime()).map(re=>y.jsx(Av,{item:{...re,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:w,editingItemType:v,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I},re.id)),K.sort((re,we)=>we.updatedAt.getTime()-re.updatedAt.getTime()).map(re=>y.jsx(Av,{item:{...re,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:u,onExportProject:c,expandedProjects:f,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:w,editingItemType:v,editingName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:A,isSavingEdit:O,editInputRef:I},re.id))]})]})});Av.displayName="ConversationItemRenderer";const Che=({updateProject:e,updateConversation:t,deleteProject:n})=>{const[r,a]=N.useState(null),[i,o]=N.useState(null),[s,u]=N.useState(""),[c,f]=N.useState(""),[h,m]=N.useState(!1),g=N.useRef(null),w=N.useCallback(S=>{a(S.id),o(S.itemType);const E=S.itemType==="project"?S.name:S.title;u(E),f(E),m(!1)},[]),v=N.useCallback(()=>{a(null),o(null),u(""),f(""),m(!1)},[]),_=N.useCallback(async()=>{if(!r||!i||h)return;const S=c.trim();if(!S||S===s){S||ht.error("Name cannot be empty."),v();return}m(!0);try{i==="project"?await e(r,{name:S}):await t(r,{title:S}),v()}catch(E){console.error("Failed to save edit:",E),m(!1)}},[r,i,c,s,h,e,t,v]),x=N.useCallback((S=!1)=>{S&&i==="project"&&s==="New Project"&&r&&n(r).catch(E=>{console.error("Failed to delete new project on cancel:",E),ht.error("Failed to clean up new project.")}),v()},[r,i,s,n,v]);return{editingItemId:r,editingItemType:i,editingName:s,localEditingName:c,setLocalEditingName:f,isSavingEdit:h,editInputRef:g,handleStartEditing:w,handleSaveEdit:_,handleCancelEdit:x}},CE=(e,t,n,r,a,i,o,s,u)=>{if(!n)return!0;const c=`${t}-${e}`;if(u[c]!==void 0)return u[c];let f=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))f=!0;else{const m=s.get(e)||[],g=o.get(e)||[];for(const w of g)if(w.title.toLowerCase().includes(n)){f=!0;break}if(!f){for(const w of m)if(CE(w.id,"project",n,r,a,i,o,s,u)){f=!0;break}}}}return u[c]=f,f},khe=()=>{const{conversations:e,projects:t,selectItem:n,selectedItemId:r,selectedItemType:a,addConversation:i,updateConversation:o,deleteConversation:s,addProject:u,updateProject:c,deleteProject:f,exportConversation:h,exportProject:m,isLoading:g,syncRepos:w,conversationSyncStatus:v,getConversationById:_,getProjectById:x}=zo(Hn(Oe=>({conversations:Oe.conversations,projects:Oe.projects,selectItem:Oe.selectItem,selectedItemId:Oe.selectedItemId,selectedItemType:Oe.selectedItemType,addConversation:Oe.addConversation,updateConversation:Oe.updateConversation,deleteConversation:Oe.deleteConversation,addProject:Oe.addProject,updateProject:Oe.updateProject,deleteProject:Oe.deleteProject,exportConversation:Oe.exportConversation,exportProject:Oe.exportProject,isLoading:Oe.isLoading,syncRepos:Oe.syncRepos,conversationSyncStatus:Oe.conversationSyncStatus,getConversationById:Oe.getConversationById,getProjectById:Oe.getProjectById}))),S=Uo(Oe=>Oe.setFocusInputFlag),[E,C]=vt.useState(new Set),[A,O]=N.useState(""),{editingItemId:I,editingItemType:D,editingName:B,localEditingName:W,setLocalEditingName:Q,isSavingEdit:M,editInputRef:K,handleStartEditing:U,handleSaveEdit:me,handleCancelEdit:se}=Che({updateProject:c,updateConversation:o,deleteProject:f,getProjectById:x,getConversationById:_}),ne=N.useCallback(Oe=>{C(Te=>{const z=new Set(Te);return z.has(Oe)?z.delete(Oe):z.add(Oe),z})},[]),ee=N.useCallback(()=>{if(a==="project")return r;if(a==="conversation"&&r){const Oe=_(r);return(Oe==null?void 0:Oe.projectId)??null}return null},[r,a,_]),ae=N.useCallback(async()=>{if(!I)try{const Oe=ee(),Te=await i({title:"New Chat",projectId:Oe});n(Te,"conversation"),setTimeout(()=>S(!0),0)}catch(Oe){console.error("Failed to create new chat:",Oe),ht.error("Failed to create new chat.")}},[I,ee,i,n,S]),G=N.useCallback(async()=>{if(!I)try{const Oe=ee(),Te=await u({name:"New Project",parentId:Oe});n(Te,"project"),C(z=>new Set(z).add(Te)),setTimeout(()=>{const z=x(Te);z?U({...z,itemType:"project"}):(console.warn("New project data not found immediately, using fallback"),U({id:Te,itemType:"project",name:"New Project",parentId:Oe,createdAt:new Date,updatedAt:new Date,path:"/New Project"}))},50)}catch(Oe){console.error("Failed to create new project:",Oe)}},[I,ee,u,n,x,U]),Y=N.useCallback((Oe,Te)=>{Oe!==I&&(I&&Oe!==I&&(W.trim()&&W.trim()!==B?me():se(D==="project"&&B==="New Project")),!(Oe===r&&Te===a)&&(n(Oe,Te),Te==="conversation"&&setTimeout(()=>S(!0),0)))},[I,D,B,W,r,a,me,se,n,S]),J=N.useCallback((Oe,Te)=>{Te.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&s(Oe).catch(z=>{console.error("Failed to delete conversation:",z),ht.error("Failed to delete conversation.")})},[s]),re=N.useCallback((Oe,Te)=>{Te.stopPropagation(),f(Oe).catch(z=>{console.error("Failed to delete project:",z),ht.error("Failed to delete project.")})},[f]),we=N.useCallback(async(Oe,Te,z)=>{z.stopPropagation();try{await h(Oe,Te)}catch(Ce){console.error(`Failed to export conversation as ${Te}:`,Ce)}},[h]),ke=N.useCallback(async(Oe,Te)=>{Te.stopPropagation();try{await m(Oe)}catch(z){console.error("Failed to export project:",z)}},[m]),Me=N.useMemo(()=>new Map(w.map(Oe=>[Oe.id,Oe.name])),[w]),{projectsById:Pe,conversationsByProjectId:Re,projectsByParentId:Ae}=N.useMemo(()=>{const Oe=new Map(t.map(Ce=>[Ce.id,Ce])),Te=new Map;e.forEach(Ce=>{const Ne=Ce.projectId??null;Te.has(Ne)||Te.set(Ne,[]),Te.get(Ne).push(Ce)});const z=new Map;return t.forEach(Ce=>{const Ne=Ce.parentId??null;z.has(Ne)||z.set(Ne,[]),z.get(Ne).push(Ce)}),{projectsById:Oe,conversationsByProjectId:Te,projectsByParentId:z}},[t,e]),He=N.useCallback((Oe,Te)=>{const z=Te.toLowerCase(),Ce={},Ne=(Ae.get(Oe)||[]).filter(ie=>CE(ie.id,"project",z,t,e,Pe,Re,Ae,Ce)),ce=(Re.get(Oe)||[]).filter(ie=>ie.title.toLowerCase().includes(z));return Ne.sort((ie,X)=>X.updatedAt.getTime()-ie.updatedAt.getTime()),ce.sort((ie,X)=>X.updatedAt.getTime()-ie.updatedAt.getTime()),{projects:Ne,conversations:ce}},[t,e,Pe,Re,Ae]),st=N.useMemo(()=>{const Oe=A.toLowerCase(),Te={},z=(Ae.get(null)||[]).filter(ce=>CE(ce.id,"project",Oe,t,e,Pe,Re,Ae,Te)),Ce=(Re.get(null)||[]).filter(ce=>ce.title.toLowerCase().includes(Oe)),Ne=[...z.map(ce=>({...ce,itemType:"project"})),...Ce.map(ce=>({...ce,itemType:"conversation"}))];return Ne.sort((ce,ie)=>ie.updatedAt.getTime()-ce.updatedAt.getTime()),Ne},[t,e,A,Pe,Re,Ae]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{size:"sm",variant:"ghost",onClick:G,"aria-label":"New Project",disabled:g||!!I,className:"h-7 w-7 p-0",children:y.jsx(QE,{className:"h-4 w-4"})})}),y.jsx(On,{side:"bottom",children:"New Project"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{size:"sm",variant:"ghost",onClick:ae,"aria-label":"New Chat",disabled:g||!!I,className:"h-7 w-7 p-0",children:y.jsx(Vv,{className:"h-4 w-4"})})}),y.jsx(On,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(rC,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(Rr,{type:"search",placeholder:"Filter...",value:A,onChange:Oe=>O(Oe.target.value),className:"h-8 text-xs pl-8",disabled:g})]}),y.jsx($w,{className:"flex-grow",children:g?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"})]}):st.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:A.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:st.map(Oe=>y.jsx(Av,{item:Oe,level:0,selectedItemId:r,conversationSyncStatus:v,repoNameMap:Me,onSelectItem:Y,onDeleteConversation:J,onDeleteProject:re,onExportConversation:we,onExportProject:ke,expandedProjects:E,toggleProjectExpansion:ne,getChildren:He,filterText:A,editingItemId:I,editingItemType:D,editingName:B,localEditingName:W,setLocalEditingName:Q,handleStartEditing:U,handleSaveEdit:me,handleCancelEdit:se,isSavingEdit:M,editInputRef:K},Oe.id))})})]})},Ahe=()=>{const{addConversation:e,addProject:t,selectItem:n,selectedItemId:r,selectedItemType:a,getConversationById:i}=zo(Hn(f=>({addConversation:f.addConversation,addProject:f.addProject,selectItem:f.selectItem,selectedItemId:f.selectedItemId,selectedItemType:f.selectedItemType,getConversationById:f.getConversationById}))),o=Uo(f=>f.setFocusInputFlag),s=()=>{if(a==="project")return r;if(a==="conversation"&&r){const f=i(r);return(f==null?void 0:f.projectId)??null}return null},u=async()=>{try{const f=s(),h=await e({title:"New Chat",projectId:f});n(h,"conversation"),setTimeout(()=>o(!0),0)}catch(f){console.error("Failed to create new chat:",f)}},c=async()=>{try{const f=s(),h=await t({name:"New Project",parentId:f});n(h,"project")}catch(f){console.error("Failed to create new project:",f)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:c,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(QE,{className:"h-4 w-4"})})}),y.jsx(On,{side:"right",children:"New Project"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:u,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(Vv,{className:"h-4 w-4"})})}),y.jsx(On,{side:"right",children:"New Chat"})]})})]})},The=()=>{const e=Ri(n=>n.registerChatControl),t=zo(n=>n.isLoading);return vt.useEffect(()=>e({id:"core-conversation-list",status:()=>t?"loading":"ready",panel:"sidebar",renderer:()=>y.jsx(khe,{}),iconRenderer:()=>y.jsx(Ahe,{}),show:()=>!0,order:10}),[e,t]),null};var o2="focusScope.autoFocusOnMount",s2="focusScope.autoFocusOnUnmount",_6={bubbles:!1,cancelable:!0},Rhe="FocusScope",ag=N.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,u]=N.useState(null),c=Ea(a),f=Ea(i),h=N.useRef(null),m=_n(t,v=>u(v)),g=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let v=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:Nu(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||Nu(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const A of E)A.removedNodes.length>0&&Nu(s)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),N.useEffect(()=>{if(s){S6.add(g);const v=document.activeElement;if(!s.contains(v)){const x=new CustomEvent(o2,_6);s.addEventListener(o2,c),s.dispatchEvent(x),x.defaultPrevented||(Nhe(Mhe(LF(s)),{select:!0}),document.activeElement===v&&Nu(s))}return()=>{s.removeEventListener(o2,c),setTimeout(()=>{const x=new CustomEvent(s2,_6);s.addEventListener(s2,f),s.dispatchEvent(x),x.defaultPrevented||Nu(v??document.body,{select:!0}),s.removeEventListener(s2,f),S6.remove(g)},0)}}},[s,c,f,g]);const w=N.useCallback(v=>{if(!n&&!r||g.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(_&&x){const S=v.currentTarget,[E,C]=Ihe(S);E&&C?!v.shiftKey&&x===C?(v.preventDefault(),n&&Nu(E,{select:!0})):v.shiftKey&&x===E&&(v.preventDefault(),n&&Nu(C,{select:!0})):x===S&&v.preventDefault()}},[n,r,g.paused]);return y.jsx(Jt.div,{tabIndex:-1,...o,ref:m,onKeyDown:w})});ag.displayName=Rhe;function Nhe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Nu(r,{select:t}),document.activeElement!==n)return}function Ihe(e){const t=LF(e),n=x6(t,e),r=x6(t.reverse(),e);return[n,r]}function LF(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function x6(e,t){for(const n of e)if(!Ohe(n,{upTo:t}))return n}function Ohe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Dhe(e){return e instanceof HTMLInputElement&&"select"in e}function Nu(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Dhe(e)&&t&&e.select()}}var S6=jhe();function jhe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=E6(e,t),e.unshift(t)},remove(t){var n;e=E6(e,t),(n=e[0])==null||n.resume()}}}function E6(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Mhe(e){return e.filter(t=>t.tagName!=="A")}var l2=0;function Bw(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??C6()),document.body.insertAdjacentElement("beforeend",e[1]??C6()),l2++,()=>{l2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),l2--}},[])}function C6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ns=function(){return Ns=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ns.apply(this,arguments)};function $F(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function Phe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var yb="right-scroll-bar-position",bb="width-before-scroll-bar",Fhe="with-scroll-bars-hidden",Lhe="--removed-body-scroll-bar-size";function u2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function $he(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var Bhe=typeof window<"u"?N.useLayoutEffect:N.useEffect,k6=new WeakMap;function zhe(e,t){var n=$he(null,function(r){return e.forEach(function(a){return u2(a,r)})});return Bhe(function(){var r=k6.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||u2(s,null)}),i.forEach(function(s){a.has(s)||u2(s,o)})}k6.set(n,e)},[e]),n}function Uhe(e){return e}function qhe(e,t){t===void 0&&(t=Uhe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var u=function(){var f=o;o=[],f.forEach(i)},c=function(){return Promise.resolve().then(u)};c(),n={push:function(f){o.push(f),c()},filter:function(f){return o=o.filter(f),n}}}};return a}function Hhe(e){e===void 0&&(e={});var t=qhe(null);return t.options=Ns({async:!0,ssr:!1},e),t}var BF=function(e){var t=e.sideCar,n=$F(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Ns({},n))};BF.isSideCarExport=!0;function Vhe(e,t){return e.useMedium(t),BF}var zF=Hhe(),c2=function(){},zw=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:c2,onWheelCapture:c2,onTouchMoveCapture:c2}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,u=e.className,c=e.removeScrollBar,f=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,w=e.inert,v=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=$F(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=m,A=zhe([n,t]),O=Ns(Ns({},E),a);return N.createElement(N.Fragment,null,f&&N.createElement(C,{sideCar:zF,removeScrollBar:c,shards:h,noIsolation:g,inert:w,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:S}),o?N.cloneElement(N.Children.only(s),Ns(Ns({},O),{ref:A})):N.createElement(x,Ns({},O,{className:u,ref:A}),s))});zw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zw.classNames={fullWidth:bb,zeroRight:yb};var Ghe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Whe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Ghe();return t&&e.setAttribute("nonce",t),e}function Khe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Zhe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Yhe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Whe())&&(Khe(t,n),Zhe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Xhe=function(){var e=Yhe();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},UF=function(){var e=Xhe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Jhe={left:0,top:0,right:0,gap:0},d2=function(e){return parseInt(e||"",10)||0},Qhe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[d2(n),d2(r),d2(a)]},epe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Jhe;var t=Qhe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},tpe=UF(),Hf="data-scroll-locked",npe=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Fhe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(Hf,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(bb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(yb," .").concat(yb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(bb," .").concat(bb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Hf,`] {
    `).concat(Lhe,": ").concat(s,`px;
  }
`)},A6=function(){var e=parseInt(document.body.getAttribute(Hf)||"0",10);return isFinite(e)?e:0},rpe=function(){N.useEffect(function(){return document.body.setAttribute(Hf,(A6()+1).toString()),function(){var e=A6()-1;e<=0?document.body.removeAttribute(Hf):document.body.setAttribute(Hf,e.toString())}},[])},ape=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;rpe();var i=N.useMemo(function(){return epe(a)},[a]);return N.createElement(tpe,{styles:npe(i,!t,a,n?"":"!important")})},kE=!1;if(typeof window<"u")try{var tb=Object.defineProperty({},"passive",{get:function(){return kE=!0,!0}});window.addEventListener("test",tb,tb),window.removeEventListener("test",tb,tb)}catch{kE=!1}var Af=kE?{passive:!1}:!1,ipe=function(e){return e.tagName==="TEXTAREA"},qF=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ipe(e)&&n[t]==="visible")},ope=function(e){return qF(e,"overflowY")},spe=function(e){return qF(e,"overflowX")},T6=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=HF(e,r);if(a){var i=VF(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},lpe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},upe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},HF=function(e,t){return e==="v"?ope(t):spe(t)},VF=function(e,t){return e==="v"?lpe(t):upe(t)},cpe=function(e,t){return e==="h"&&t==="rtl"?-1:1},dpe=function(e,t,n,r,a){var i=cpe(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,u=t.contains(s),c=!1,f=o>0,h=0,m=0;do{var g=VF(e,s),w=g[0],v=g[1],_=g[2],x=v-_-i*w;(w||x)&&HF(e,s)&&(h+=x,m+=w),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!u&&s!==document.body||u&&(t.contains(s)||t===s));return(f&&Math.abs(h)<1||!f&&Math.abs(m)<1)&&(c=!0),c},nb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},R6=function(e){return[e.deltaX,e.deltaY]},N6=function(e){return e&&"current"in e?e.current:e},fpe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},hpe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ppe=0,Tf=[];function mpe(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),a=N.useState(ppe++)[0],i=N.useState(UF)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var v=Phe([e.lockRef.current],(e.shards||[]).map(N6),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=N.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=nb(v),S=n.current,E="deltaX"in v?v.deltaX:S[0]-x[0],C="deltaY"in v?v.deltaY:S[1]-x[1],A,O=v.target,I=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in v&&I==="h"&&O.type==="range")return!1;var D=T6(I,O);if(!D)return!0;if(D?A=I:(A=I==="v"?"h":"v",D=T6(I,O)),!D)return!1;if(!r.current&&"changedTouches"in v&&(E||C)&&(r.current=A),!A)return!0;var B=r.current||A;return dpe(B,_,v,B==="h"?E:C)},[]),u=N.useCallback(function(v){var _=v;if(!(!Tf.length||Tf[Tf.length-1]!==i)){var x="deltaY"in _?R6(_):nb(_),S=t.current.filter(function(A){return A.name===_.type&&(A.target===_.target||_.target===A.shadowParent)&&fpe(A.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(N6).filter(Boolean).filter(function(A){return A.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),c=N.useCallback(function(v,_,x,S){var E={name:v,delta:_,target:x,should:S,shadowParent:gpe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),f=N.useCallback(function(v){n.current=nb(v),r.current=void 0},[]),h=N.useCallback(function(v){c(v.type,R6(v),v.target,s(v,e.lockRef.current))},[]),m=N.useCallback(function(v){c(v.type,nb(v),v.target,s(v,e.lockRef.current))},[]);N.useEffect(function(){return Tf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",u,Af),document.addEventListener("touchmove",u,Af),document.addEventListener("touchstart",f,Af),function(){Tf=Tf.filter(function(v){return v!==i}),document.removeEventListener("wheel",u,Af),document.removeEventListener("touchmove",u,Af),document.removeEventListener("touchstart",f,Af)}},[]);var g=e.removeScrollBar,w=e.inert;return N.createElement(N.Fragment,null,w?N.createElement(i,{styles:hpe(a)}):null,g?N.createElement(ape,{gapMode:e.gapMode}):null)}function gpe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ype=Vhe(zF,mpe);var ig=N.forwardRef(function(e,t){return N.createElement(zw,Ns({},e,{ref:t,sideCar:ype}))});ig.classNames=zw.classNames;var bpe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Rf=new WeakMap,rb=new WeakMap,ab={},f2=0,GF=function(e){return e&&(e.host||GF(e.parentNode))},vpe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=GF(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},wpe=function(e,t,n,r){var a=vpe(t,Array.isArray(e)?e:[e]);ab[n]||(ab[n]=new WeakMap);var i=ab[n],o=[],s=new Set,u=new Set(a),c=function(h){!h||s.has(h)||(s.add(h),c(h.parentNode))};a.forEach(c);var f=function(h){!h||u.has(h)||Array.prototype.forEach.call(h.children,function(m){if(s.has(m))f(m);else try{var g=m.getAttribute(r),w=g!==null&&g!=="false",v=(Rf.get(m)||0)+1,_=(i.get(m)||0)+1;Rf.set(m,v),i.set(m,_),o.push(m),v===1&&w&&rb.set(m,!0),_===1&&m.setAttribute(n,"true"),w||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return f(t),s.clear(),f2++,function(){o.forEach(function(h){var m=Rf.get(h)-1,g=i.get(h)-1;Rf.set(h,m),i.set(h,g),m||(rb.has(h)||h.removeAttribute(r),rb.delete(h)),g||h.removeAttribute(n)}),f2--,f2||(Rf=new WeakMap,Rf=new WeakMap,rb=new WeakMap,ab={})}},Uw=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=bpe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),wpe(r,a,n,"aria-hidden")):function(){return null}},qw="Dialog",[WF,T1e]=ci(qw),[_pe,is]=WF(qw),KF=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=N.useRef(null),u=N.useRef(null),[c,f]=Wo({prop:r,defaultProp:a??!1,onChange:i,caller:qw});return y.jsx(_pe,{scope:t,triggerRef:s,contentRef:u,contentId:ka(),titleId:ka(),descriptionId:ka(),open:c,onOpenChange:f,onOpenToggle:N.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};KF.displayName=qw;var ZF="DialogTrigger",YF=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(ZF,n),i=_n(t,a.triggerRef);return y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Kk(a.open),...r,ref:i,onClick:Ft(e.onClick,a.onOpenToggle)})});YF.displayName=ZF;var Gk="DialogPortal",[xpe,XF]=WF(Gk,{forceMount:void 0}),JF=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=is(Gk,t);return y.jsx(xpe,{scope:t,forceMount:n,children:N.Children.map(r,o=>y.jsx(Na,{present:n||i.open,children:y.jsx(xh,{asChild:!0,container:a,children:o})}))})};JF.displayName=Gk;var Tv="DialogOverlay",QF=N.forwardRef((e,t)=>{const n=XF(Tv,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=is(Tv,e.__scopeDialog);return i.modal?y.jsx(Na,{present:r||i.open,children:y.jsx(Epe,{...a,ref:t})}):null});QF.displayName=Tv;var Spe=$u("DialogOverlay.RemoveScroll"),Epe=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(Tv,n);return y.jsx(ig,{as:Spe,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(Jt.div,{"data-state":Kk(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),hd="DialogContent",eL=N.forwardRef((e,t)=>{const n=XF(hd,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=is(hd,e.__scopeDialog);return y.jsx(Na,{present:r||i.open,children:i.modal?y.jsx(Cpe,{...a,ref:t}):y.jsx(kpe,{...a,ref:t})})});eL.displayName=hd;var Cpe=N.forwardRef((e,t)=>{const n=is(hd,e.__scopeDialog),r=N.useRef(null),a=_n(t,n.contentRef,r);return N.useEffect(()=>{const i=r.current;if(i)return Uw(i)},[]),y.jsx(tL,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:Ft(e.onFocusOutside,i=>i.preventDefault())})}),kpe=N.forwardRef((e,t)=>{const n=is(hd,e.__scopeDialog),r=N.useRef(!1),a=N.useRef(!1);return y.jsx(tL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),tL=N.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=is(hd,n),u=N.useRef(null),c=_n(t,u);return Bw(),y.jsxs(y.Fragment,{children:[y.jsx(ag,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(vh,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Kk(s.open),...o,ref:c,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(Ape,{titleId:s.titleId}),y.jsx(Rpe,{contentRef:u,descriptionId:s.descriptionId})]})]})}),Wk="DialogTitle",nL=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(Wk,n);return y.jsx(Jt.h2,{id:a.titleId,...r,ref:t})});nL.displayName=Wk;var rL="DialogDescription",aL=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(rL,n);return y.jsx(Jt.p,{id:a.descriptionId,...r,ref:t})});aL.displayName=rL;var iL="DialogClose",oL=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=is(iL,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>a.onOpenChange(!1))})});oL.displayName=iL;function Kk(e){return e?"open":"closed"}var sL="DialogTitleWarning",[R1e,lL]=jH(sL,{contentName:hd,titleName:Wk,docsSlug:"dialog"}),Ape=({titleId:e})=>{const t=lL(sL),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Tpe="DialogDescriptionWarning",Rpe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${lL(Tpe).contentName}}.`;return N.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},uL=KF,Npe=YF,cL=JF,dL=QF,fL=eL,Ipe=nL,Ope=aL,hL=oL;function Hw({...e}){return y.jsx(uL,{"data-slot":"dialog",...e})}function Dpe({...e}){return y.jsx(Npe,{"data-slot":"dialog-trigger",...e})}function jpe({...e}){return y.jsx(cL,{"data-slot":"dialog-portal",...e})}function Mpe({...e}){return y.jsx(hL,{"data-slot":"dialog-close",...e})}function Ppe({className:e,...t}){return y.jsx(dL,{"data-slot":"dialog-overlay",className:Mt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Vw({className:e,children:t,...n}){return y.jsxs(jpe,{"data-slot":"dialog-portal",children:[y.jsx(Ppe,{}),y.jsxs(fL,{"data-slot":"dialog-content",className:Mt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(hL,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(zs,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Gw({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:Mt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Ww({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:Mt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Kw({className:e,...t}){return y.jsx(Ipe,{"data-slot":"dialog-title",className:Mt("text-lg leading-none font-semibold",e),...t})}function Zw({className:e,...t}){return y.jsx(Ope,{"data-slot":"dialog-description",className:Mt("text-muted-foreground text-sm",e),...t})}function Yw(e){const t=e+"CollectionProvider",[n,r]=ci(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:_,children:x}=v,S=vt.useRef(null),E=vt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",u=$u(s),c=vt.forwardRef((v,_)=>{const{scope:x,children:S}=v,E=i(s,x),C=_n(_,E.collectionRef);return y.jsx(u,{ref:C,children:S})});c.displayName=s;const f=e+"CollectionItemSlot",h="data-radix-collection-item",m=$u(f),g=vt.forwardRef((v,_)=>{const{scope:x,children:S,...E}=v,C=vt.useRef(null),A=_n(_,C),O=i(f,x);return vt.useEffect(()=>(O.itemMap.set(C,{ref:C,...E}),()=>void O.itemMap.delete(C))),y.jsx(m,{[h]:"",ref:A,children:S})});g.displayName=f;function w(v){const _=i(e+"CollectionConsumer",v);return vt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((O,I)=>E.indexOf(O.ref.current)-E.indexOf(I.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:c,ItemSlot:g},w,r]}var h2="rovingFocusGroup.onEntryFocus",Fpe={bubbles:!1,cancelable:!0},og="RovingFocusGroup",[AE,pL,Lpe]=Yw(og),[$pe,Xw]=ci(og,[Lpe]),[Bpe,zpe]=$pe(og),mL=N.forwardRef((e,t)=>y.jsx(AE.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(AE.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(Upe,{...e,ref:t})})}));mL.displayName=og;var Upe=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:u,onEntryFocus:c,preventScrollOnEntryFocus:f=!1,...h}=e,m=N.useRef(null),g=_n(t,m),w=Fh(i),[v,_]=Wo({prop:o,defaultProp:s??null,onChange:u,caller:og}),[x,S]=N.useState(!1),E=Ea(c),C=pL(n),A=N.useRef(!1),[O,I]=N.useState(0);return N.useEffect(()=>{const D=m.current;if(D)return D.addEventListener(h2,E),()=>D.removeEventListener(h2,E)},[E]),y.jsx(Bpe,{scope:n,orientation:r,dir:w,loop:a,currentTabStopId:v,onItemFocus:N.useCallback(D=>_(D),[_]),onItemShiftTab:N.useCallback(()=>S(!0),[]),onFocusableItemAdd:N.useCallback(()=>I(D=>D+1),[]),onFocusableItemRemove:N.useCallback(()=>I(D=>D-1),[]),children:y.jsx(Jt.div,{tabIndex:x||O===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Ft(e.onMouseDown,()=>{A.current=!0}),onFocus:Ft(e.onFocus,D=>{const B=!A.current;if(D.target===D.currentTarget&&B&&!x){const W=new CustomEvent(h2,Fpe);if(D.currentTarget.dispatchEvent(W),!W.defaultPrevented){const Q=C().filter(se=>se.focusable),M=Q.find(se=>se.active),K=Q.find(se=>se.id===v),me=[M,K,...Q].filter(Boolean).map(se=>se.ref.current);bL(me,f)}}A.current=!1}),onBlur:Ft(e.onBlur,()=>S(!1))})})}),gL="RovingFocusGroupItem",yL=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,u=ka(),c=i||u,f=zpe(gL,n),h=f.currentTabStopId===c,m=pL(n),{onFocusableItemAdd:g,onFocusableItemRemove:w,currentTabStopId:v}=f;return N.useEffect(()=>{if(r)return g(),()=>w()},[r,g,w]),y.jsx(AE.ItemSlot,{scope:n,id:c,focusable:r,active:a,children:y.jsx(Jt.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...s,ref:t,onMouseDown:Ft(e.onMouseDown,_=>{r?f.onItemFocus(c):_.preventDefault()}),onFocus:Ft(e.onFocus,()=>f.onItemFocus(c)),onKeyDown:Ft(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){f.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=Vpe(_,f.orientation,f.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=m().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=f.loop?Gpe(E,C+1):E.slice(C+1)}setTimeout(()=>bL(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:v!=null}):o})})});yL.displayName=gL;var qpe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Hpe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Vpe(e,t,n){const r=Hpe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qpe[r]}function bL(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Gpe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var vL=mL,wL=yL,Jw="Tabs",[Wpe,N1e]=ci(Jw,[Xw]),_L=Xw(),[Kpe,Zk]=Wpe(Jw),xL=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:u="automatic",...c}=e,f=Fh(s),[h,m]=Wo({prop:r,onChange:a,defaultProp:i??"",caller:Jw});return y.jsx(Kpe,{scope:n,baseId:ka(),value:h,onValueChange:m,orientation:o,dir:f,activationMode:u,children:y.jsx(Jt.div,{dir:f,"data-orientation":o,...c,ref:t})})});xL.displayName=Jw;var SL="TabsList",EL=N.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=Zk(SL,n),o=_L(n);return y.jsx(vL,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(Jt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});EL.displayName=SL;var CL="TabsTrigger",kL=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=Zk(CL,n),s=_L(n),u=RL(o.baseId,r),c=NL(o.baseId,r),f=r===o.value;return y.jsx(wL,{asChild:!0,...s,focusable:!a,active:f,children:y.jsx(Jt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":c,"data-state":f?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:Ft(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Ft(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Ft(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!a&&h&&o.onValueChange(r)})})})});kL.displayName=CL;var AL="TabsContent",TL=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=Zk(AL,n),u=RL(s.baseId,r),c=NL(s.baseId,r),f=r===s.value,h=N.useRef(f);return N.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),y.jsx(Na,{present:a||f,children:({present:m})=>y.jsx(Jt.div,{"data-state":f?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":u,hidden:!m,id:c,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});TL.displayName=AL;function RL(e,t){return`${e}-trigger-${t}`}function NL(e,t){return`${e}-content-${t}`}var Zpe=xL,Ype=EL,Xpe=kL,Jpe=TL;function TE({className:e,...t}){return y.jsx(Zpe,{"data-slot":"tabs",className:Mt("flex flex-col gap-2",e),...t})}function RE({className:e,...t}){return y.jsx(Ype,{"data-slot":"tabs-list",className:Mt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function uo({className:e,...t}){return y.jsx(Xpe,{"data-slot":"tabs-trigger",className:Mt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function co({className:e,...t}){return y.jsx(Jpe,{"data-slot":"tabs-content",className:Mt("flex-1 outline-none",e),...t})}var Qpe="Label",IL=N.forwardRef((e,t)=>y.jsx(Jt.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));IL.displayName=Qpe;var eme=IL;function qn({className:e,...t}){return y.jsx(eme,{"data-slot":"label",className:Mt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function Qw(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var e1="Switch",[tme,I1e]=ci(e1),[nme,rme]=tme(e1),OL=N.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=N.useState(null),w=_n(t,E=>g(E)),v=N.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Wo({prop:a,defaultProp:i??!1,onChange:c,caller:e1});return y.jsxs(nme,{scope:n,checked:x,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":PL(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:w,onClick:Ft(e.onClick,E=>{S(C=>!C),_&&(v.current=E.isPropagationStopped(),v.current||E.stopPropagation())})}),_&&y.jsx(ML,{control:m,bubbles:!v.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"}})]})});OL.displayName=e1;var DL="SwitchThumb",jL=N.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=rme(DL,n);return y.jsx(Jt.span,{"data-state":PL(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});jL.displayName=DL;var ame="SwitchBubbleInput",ML=N.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=N.useRef(null),s=_n(o,i),u=Qw(n),c=Yv(t);return N.useEffect(()=>{const f=o.current;if(!f)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&g){const w=new Event("click",{bubbles:r});g.call(f,n),f.dispatchEvent(w)}},[u,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});ML.displayName=ame;function PL(e){return e?"checked":"unchecked"}var ime=OL,ome=jL;function oc({className:e,...t}){return y.jsx(ime,{"data-slot":"switch",className:Mt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(ome,{"data-slot":"switch-thumb",className:Mt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var sme=[" ","Enter","ArrowUp","ArrowDown"],lme=[" ","Enter"],pd="Select",[t1,n1,ume]=Yw(pd),[Lh,O1e]=ci(pd,[ume,lc]),r1=lc(),[cme,bc]=Lh(pd),[dme,fme]=Lh(pd),FL=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:u,dir:c,name:f,autoComplete:h,disabled:m,required:g,form:w}=e,v=r1(t),[_,x]=N.useState(null),[S,E]=N.useState(null),[C,A]=N.useState(!1),O=Fh(c),[I,D]=Wo({prop:r,defaultProp:a??!1,onChange:i,caller:pd}),[B,W]=Wo({prop:o,defaultProp:s,onChange:u,caller:pd}),Q=N.useRef(null),M=_?w||!!_.closest("form"):!0,[K,U]=N.useState(new Set),me=Array.from(K).map(se=>se.props.value).join(";");return y.jsx(Xv,{...v,children:y.jsxs(cme,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:A,contentId:ka(),value:B,onValueChange:W,open:I,onOpenChange:D,dir:O,triggerPointerDownPosRef:Q,disabled:m,children:[y.jsx(t1.Provider,{scope:t,children:y.jsx(dme,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(se=>{U(ne=>new Set(ne).add(se))},[]),onNativeOptionRemove:N.useCallback(se=>{U(ne=>{const ee=new Set(ne);return ee.delete(se),ee})},[]),children:n})}),M?y.jsxs(i9,{"aria-hidden":!0,required:g,tabIndex:-1,name:f,autoComplete:h,value:B,onChange:se=>W(se.target.value),disabled:m,form:w,children:[B===void 0?y.jsx("option",{value:""}):null,Array.from(K)]},me):null]})})};FL.displayName=pd;var LL="SelectTrigger",$L=N.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=r1(n),o=bc(LL,n),s=o.disabled||r,u=_n(t,o.onTriggerChange),c=n1(n),f=N.useRef("touch"),[h,m,g]=s9(v=>{const _=c().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=l9(_,v,x);S!==void 0&&o.onValueChange(S.value)}),w=v=>{s||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return y.jsx(y0,{asChild:!0,...i,children:y.jsx(Jt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":o9(o.value)?"":void 0,...a,ref:u,onClick:Ft(a.onClick,v=>{v.currentTarget.focus(),f.current!=="mouse"&&w(v)}),onPointerDown:Ft(a.onPointerDown,v=>{f.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:Ft(a.onKeyDown,v=>{const _=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(_&&v.key===" ")&&sme.includes(v.key)&&(w(),v.preventDefault())})})})});$L.displayName=LL;var BL="SelectValue",zL=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,u=bc(BL,n),{onValueNodeHasChildrenChange:c}=u,f=i!==void 0,h=_n(t,u.onValueNodeChange);return La(()=>{c(f)},[c,f]),y.jsx(Jt.span,{...s,ref:h,style:{pointerEvents:"none"},children:o9(u.value)?y.jsx(y.Fragment,{children:o}):i})});zL.displayName=BL;var hme="SelectIcon",UL=N.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(Jt.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});UL.displayName=hme;var pme="SelectPortal",qL=e=>y.jsx(xh,{asChild:!0,...e});qL.displayName=pme;var md="SelectContent",HL=N.forwardRef((e,t)=>{const n=bc(md,e.__scopeSelect),[r,a]=N.useState();if(La(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Is.createPortal(y.jsx(VL,{scope:e.__scopeSelect,children:y.jsx(t1.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(GL,{...e,ref:t})});HL.displayName=md;var Do=10,[VL,vc]=Lh(md),mme="SelectContentImpl",gme=$u("SelectContent.RemoveScroll"),GL=N.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_,...x}=e,S=bc(md,n),[E,C]=N.useState(null),[A,O]=N.useState(null),I=_n(t,Pe=>C(Pe)),[D,B]=N.useState(null),[W,Q]=N.useState(null),M=n1(n),[K,U]=N.useState(!1),me=N.useRef(!1);N.useEffect(()=>{if(E)return Uw(E)},[E]),Bw();const se=N.useCallback(Pe=>{const[Re,...Ae]=M().map(Oe=>Oe.ref.current),[He]=Ae.slice(-1),st=document.activeElement;for(const Oe of Pe)if(Oe===st||(Oe==null||Oe.scrollIntoView({block:"nearest"}),Oe===Re&&A&&(A.scrollTop=0),Oe===He&&A&&(A.scrollTop=A.scrollHeight),Oe==null||Oe.focus(),document.activeElement!==st))return},[M,A]),ne=N.useCallback(()=>se([D,E]),[se,D,E]);N.useEffect(()=>{K&&ne()},[K,ne]);const{onOpenChange:ee,triggerPointerDownPosRef:ae}=S;N.useEffect(()=>{if(E){let Pe={x:0,y:0};const Re=He=>{var st,Oe;Pe={x:Math.abs(Math.round(He.pageX)-(((st=ae.current)==null?void 0:st.x)??0)),y:Math.abs(Math.round(He.pageY)-(((Oe=ae.current)==null?void 0:Oe.y)??0))}},Ae=He=>{Pe.x<=10&&Pe.y<=10?He.preventDefault():E.contains(He.target)||ee(!1),document.removeEventListener("pointermove",Re),ae.current=null};return ae.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",Ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",Ae,{capture:!0})}}},[E,ee,ae]),N.useEffect(()=>{const Pe=()=>ee(!1);return window.addEventListener("blur",Pe),window.addEventListener("resize",Pe),()=>{window.removeEventListener("blur",Pe),window.removeEventListener("resize",Pe)}},[ee]);const[G,Y]=s9(Pe=>{const Re=M().filter(st=>!st.disabled),Ae=Re.find(st=>st.ref.current===document.activeElement),He=l9(Re,Pe,Ae);He&&setTimeout(()=>He.ref.current.focus())}),J=N.useCallback((Pe,Re,Ae)=>{const He=!me.current&&!Ae;(S.value!==void 0&&S.value===Re||He)&&(B(Pe),He&&(me.current=!0))},[S.value]),re=N.useCallback(()=>E==null?void 0:E.focus(),[E]),we=N.useCallback((Pe,Re,Ae)=>{const He=!me.current&&!Ae;(S.value!==void 0&&S.value===Re||He)&&Q(Pe)},[S.value]),ke=r==="popper"?NE:WL,Me=ke===NE?{side:s,sideOffset:u,align:c,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_}:{};return y.jsx(VL,{scope:n,content:E,viewport:A,onViewportChange:O,itemRefCallback:J,selectedItem:D,onItemLeave:re,itemTextRefCallback:we,focusSelectedItem:ne,selectedItemText:W,position:r,isPositioned:K,searchRef:G,children:y.jsx(ig,{as:gme,allowPinchZoom:!0,children:y.jsx(ag,{asChild:!0,trapped:S.open,onMountAutoFocus:Pe=>{Pe.preventDefault()},onUnmountAutoFocus:Ft(a,Pe=>{var Re;(Re=S.trigger)==null||Re.focus({preventScroll:!0}),Pe.preventDefault()}),children:y.jsx(vh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Pe=>Pe.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(ke,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Pe=>Pe.preventDefault(),...x,...Me,onPlaced:()=>U(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Ft(x.onKeyDown,Pe=>{const Re=Pe.ctrlKey||Pe.altKey||Pe.metaKey;if(Pe.key==="Tab"&&Pe.preventDefault(),!Re&&Pe.key.length===1&&Y(Pe.key),["ArrowUp","ArrowDown","Home","End"].includes(Pe.key)){let He=M().filter(st=>!st.disabled).map(st=>st.ref.current);if(["ArrowUp","End"].includes(Pe.key)&&(He=He.slice().reverse()),["ArrowUp","ArrowDown"].includes(Pe.key)){const st=Pe.target,Oe=He.indexOf(st);He=He.slice(Oe+1)}setTimeout(()=>se(He)),Pe.preventDefault()}})})})})})})});GL.displayName=mme;var yme="SelectItemAlignedPosition",WL=N.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=bc(md,n),o=vc(md,n),[s,u]=N.useState(null),[c,f]=N.useState(null),h=_n(t,I=>f(I)),m=n1(n),g=N.useRef(!1),w=N.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=N.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&c&&v&&_&&x){const I=i.trigger.getBoundingClientRect(),D=c.getBoundingClientRect(),B=i.valueNode.getBoundingClientRect(),W=x.getBoundingClientRect();if(i.dir!=="rtl"){const st=W.left-D.left,Oe=B.left-st,Te=I.left-Oe,z=I.width+Te,Ce=Math.max(z,D.width),Ne=window.innerWidth-Do,ce=u0(Oe,[Do,Math.max(Do,Ne-Ce)]);s.style.minWidth=z+"px",s.style.left=ce+"px"}else{const st=D.right-W.right,Oe=window.innerWidth-B.right-st,Te=window.innerWidth-I.right-Oe,z=I.width+Te,Ce=Math.max(z,D.width),Ne=window.innerWidth-Do,ce=u0(Oe,[Do,Math.max(Do,Ne-Ce)]);s.style.minWidth=z+"px",s.style.right=ce+"px"}const Q=m(),M=window.innerHeight-Do*2,K=v.scrollHeight,U=window.getComputedStyle(c),me=parseInt(U.borderTopWidth,10),se=parseInt(U.paddingTop,10),ne=parseInt(U.borderBottomWidth,10),ee=parseInt(U.paddingBottom,10),ae=me+se+K+ee+ne,G=Math.min(_.offsetHeight*5,ae),Y=window.getComputedStyle(v),J=parseInt(Y.paddingTop,10),re=parseInt(Y.paddingBottom,10),we=I.top+I.height/2-Do,ke=M-we,Me=_.offsetHeight/2,Pe=_.offsetTop+Me,Re=me+se+Pe,Ae=ae-Re;if(Re<=we){const st=Q.length>0&&_===Q[Q.length-1].ref.current;s.style.bottom="0px";const Oe=c.clientHeight-v.offsetTop-v.offsetHeight,Te=Math.max(ke,Me+(st?re:0)+Oe+ne),z=Re+Te;s.style.height=z+"px"}else{const st=Q.length>0&&_===Q[0].ref.current;s.style.top="0px";const Te=Math.max(we,me+v.offsetTop+(st?J:0)+Me)+Ae;s.style.height=Te+"px",v.scrollTop=Re-we+v.offsetTop}s.style.margin=`${Do}px 0`,s.style.minHeight=G+"px",s.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,s,c,v,_,x,i.dir,r]);La(()=>E(),[E]);const[C,A]=N.useState();La(()=>{c&&A(window.getComputedStyle(c).zIndex)},[c]);const O=N.useCallback(I=>{I&&w.current===!0&&(E(),S==null||S(),w.current=!1)},[E,S]);return y.jsx(vme,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:y.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(Jt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});WL.displayName=yme;var bme="SelectPopperPosition",NE=N.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Do,...i}=e,o=r1(n);return y.jsx(Jv,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});NE.displayName=bme;var[vme,Yk]=Lh(md,{}),IE="SelectViewport",KL=N.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=vc(IE,n),o=Yk(IE,n),s=_n(t,i.onViewportChange),u=N.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(t1.Slot,{scope:n,children:y.jsx(Jt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ft(a.onScroll,c=>{const f=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const g=Math.abs(u.current-f.scrollTop);if(g>0){const w=window.innerHeight-Do*2,v=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(v,_);if(x<w){const S=x+g,E=Math.min(w,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(f.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});KL.displayName=IE;var ZL="SelectGroup",[wme,_me]=Lh(ZL),xme=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=ka();return y.jsx(wme,{scope:n,id:a,children:y.jsx(Jt.div,{role:"group","aria-labelledby":a,...r,ref:t})})});xme.displayName=ZL;var YL="SelectLabel",Sme=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=_me(YL,n);return y.jsx(Jt.div,{id:a.id,...r,ref:t})});Sme.displayName=YL;var Rv="SelectItem",[Eme,XL]=Lh(Rv),JL=N.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=bc(Rv,n),u=vc(Rv,n),c=s.value===r,[f,h]=N.useState(i??""),[m,g]=N.useState(!1),w=_n(t,S=>{var E;return(E=u.itemRefCallback)==null?void 0:E.call(u,S,r,a)}),v=ka(),_=N.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(Eme,{scope:n,value:r,disabled:a,textId:v,isSelected:c,onItemTextChange:N.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(t1.ItemSlot,{scope:n,value:r,disabled:a,textValue:f,children:y.jsx(Jt.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":c&&m,"data-state":c?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:w,onFocus:Ft(o.onFocus,()=>g(!0)),onBlur:Ft(o.onBlur,()=>g(!1)),onClick:Ft(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:Ft(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:Ft(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:Ft(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=u.onItemLeave)==null||E.call(u):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ft(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=u.onItemLeave)==null||E.call(u))}),onKeyDown:Ft(o.onKeyDown,S=>{var C;((C=u.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(lme.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});JL.displayName=Rv;var um="SelectItemText",QL=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=bc(um,n),s=vc(um,n),u=XL(um,n),c=fme(um,n),[f,h]=N.useState(null),m=_n(t,x=>h(x),u.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,u.value,u.disabled)}),g=f==null?void 0:f.textContent,w=N.useMemo(()=>y.jsx("option",{value:u.value,disabled:u.disabled,children:g},u.value),[u.disabled,u.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=c;return La(()=>(v(w),()=>_(w)),[v,_,w]),y.jsxs(y.Fragment,{children:[y.jsx(Jt.span,{id:u.textId,...i,ref:m}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Is.createPortal(i.children,o.valueNode):null]})});QL.displayName=um;var e9="SelectItemIndicator",t9=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return XL(e9,n).isSelected?y.jsx(Jt.span,{"aria-hidden":!0,...r,ref:t}):null});t9.displayName=e9;var OE="SelectScrollUpButton",n9=N.forwardRef((e,t)=>{const n=vc(OE,e.__scopeSelect),r=Yk(OE,e.__scopeSelect),[a,i]=N.useState(!1),o=_n(t,r.onScrollButtonChange);return La(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollTop>0;i(c)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(a9,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop-u.offsetHeight)}}):null});n9.displayName=OE;var DE="SelectScrollDownButton",r9=N.forwardRef((e,t)=>{const n=vc(DE,e.__scopeSelect),r=Yk(DE,e.__scopeSelect),[a,i]=N.useState(!1),o=_n(t,r.onScrollButtonChange);return La(()=>{if(n.viewport&&n.isPositioned){let s=function(){const c=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<c;i(f)};const u=n.viewport;return s(),u.addEventListener("scroll",s),()=>u.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(a9,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:u}=n;s&&u&&(s.scrollTop=s.scrollTop+u.offsetHeight)}}):null});r9.displayName=DE;var a9=N.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=vc("SelectScrollButton",n),o=N.useRef(null),s=n1(n),u=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>u(),[u]),La(()=>{var f;const c=s().find(h=>h.ref.current===document.activeElement);(f=c==null?void 0:c.ref.current)==null||f.scrollIntoView({block:"nearest"})},[s]),y.jsx(Jt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ft(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Ft(a.onPointerMove,()=>{var c;(c=i.onItemLeave)==null||c.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Ft(a.onPointerLeave,()=>{u()})})}),Cme="SelectSeparator",kme=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(Jt.div,{"aria-hidden":!0,...r,ref:t})});kme.displayName=Cme;var jE="SelectArrow",Ame=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=r1(n),i=bc(jE,n),o=vc(jE,n);return i.open&&o.position==="popper"?y.jsx(Qv,{...a,...r,ref:t}):null});Ame.displayName=jE;var Tme="SelectBubbleInput",i9=N.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=N.useRef(null),i=_n(r,a),o=Qw(t);return N.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("change",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.select,{...n,style:{...eD,...n.style},ref:i,defaultValue:t})});i9.displayName=Tme;function o9(e){return e===""||e===void 0}function s9(e){const t=Ea(e),n=N.useRef(""),r=N.useRef(0),a=N.useCallback(o=>{const s=n.current+o;t(s),function u(c){n.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(s)},[t]),i=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function l9(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=Rme(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function Rme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Nme=FL,Ime=$L,Ome=zL,Dme=UL,jme=qL,Mme=HL,Pme=KL,Fme=JL,Lme=QL,$me=t9,Bme=n9,zme=r9;function sg({...e}){return y.jsx(Nme,{"data-slot":"select",...e})}function lg({...e}){return y.jsx(Ome,{"data-slot":"select-value",...e})}function ug({className:e,size:t="default",children:n,...r}){return y.jsxs(Ime,{"data-slot":"select-trigger","data-size":t,className:Mt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(Dme,{asChild:!0,children:y.jsx(XE,{className:"size-4 opacity-50"})})]})}function cg({className:e,children:t,position:n="popper",...r}){return y.jsx(jme,{children:y.jsxs(Mme,{"data-slot":"select-content",className:Mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(Ume,{}),y.jsx(Pme,{className:Mt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(qme,{})]})})}function Lo({className:e,children:t,...n}){return y.jsxs(Fme,{"data-slot":"select-item",className:Mt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx($me,{children:y.jsx(vo,{className:"size-4"})})}),y.jsx(Lme,{children:t})]})}function Ume({className:e,...t}){return y.jsx(Bme,{"data-slot":"select-scroll-up-button",className:Mt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(SU,{className:"size-4"})})}function qme({className:e,...t}){return y.jsx(zme,{"data-slot":"select-scroll-down-button",className:Mt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(XE,{className:"size-4"})})}var u9=["PageUp","PageDown"],c9=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],d9={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},$h="Slider",[ME,Hme,Vme]=Yw($h),[f9,D1e]=ci($h,[Vme]),[Gme,a1]=f9($h),h9=N.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:u=0,defaultValue:c=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:w,...v}=e,_=N.useRef(new Set),x=N.useRef(0),E=o==="horizontal"?Wme:Kme,[C=[],A]=Wo({prop:f,defaultProp:c,onChange:Q=>{var K;(K=[..._.current][x.current])==null||K.focus(),h(Q)}}),O=N.useRef(C);function I(Q){const M=Qme(C,Q);W(Q,M)}function D(Q){W(Q,x.current)}function B(){const Q=O.current[x.current];C[x.current]!==Q&&m(C)}function W(Q,M,{commit:K}={commit:!1}){const U=r0e(i),me=a0e(Math.round((Q-r)/i)*i+r,U),se=u0(me,[r,a]);A((ne=[])=>{const ee=Xme(ne,se,M);if(n0e(ee,u*i)){x.current=ee.indexOf(se);const ae=String(ee)!==String(ne);return ae&&K&&m(ee),ae?ee:ne}else return ne})}return y.jsx(Gme,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:C,orientation:o,form:w,children:y.jsx(ME.Provider,{scope:e.__scopeSlider,children:y.jsx(ME.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...v,ref:t,onPointerDown:Ft(v.onPointerDown,()=>{s||(O.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:I,onSlideMove:s?void 0:D,onSlideEnd:s?void 0:B,onHomeKeyDown:()=>!s&&W(r,0,{commit:!0}),onEndKeyDown:()=>!s&&W(a,C.length-1,{commit:!0}),onStepKeyDown:({event:Q,direction:M})=>{if(!s){const me=u9.includes(Q.key)||Q.shiftKey&&c9.includes(Q.key)?10:1,se=x.current,ne=C[se],ee=i*me*M;W(ne+ee,se,{commit:!0})}}})})})})});h9.displayName=$h;var[p9,m9]=f9($h,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Wme=N.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:u,onStepKeyDown:c,...f}=e,[h,m]=N.useState(null),g=_n(t,E=>m(E)),w=N.useRef(void 0),v=Fh(a),_=v==="ltr",x=_&&!i||!_&&i;function S(E){const C=w.current||h.getBoundingClientRect(),A=[0,C.width],I=Xk(A,x?[n,r]:[r,n]);return w.current=C,I(E-C.left)}return y.jsx(p9,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(g9,{dir:v,"data-orientation":"horizontal",...f,ref:g,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);s==null||s(C)},onSlideEnd:()=>{w.current=void 0,u==null||u()},onStepKeyDown:E=>{const A=d9[x?"from-left":"from-right"].includes(E.key);c==null||c({event:E,direction:A?-1:1})}})})}),Kme=N.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:u,...c}=e,f=N.useRef(null),h=_n(t,f),m=N.useRef(void 0),g=!a;function w(v){const _=m.current||f.current.getBoundingClientRect(),x=[0,_.height],E=Xk(x,g?[r,n]:[n,r]);return m.current=_,E(v-_.top)}return y.jsx(p9,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(g9,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const _=w(v.clientY);i==null||i(_)},onSlideMove:v=>{const _=w(v.clientY);o==null||o(_)},onSlideEnd:()=>{m.current=void 0,s==null||s()},onStepKeyDown:v=>{const x=d9[g?"from-bottom":"from-top"].includes(v.key);u==null||u({event:v,direction:x?-1:1})}})})}),g9=N.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:u,...c}=e,f=a1($h,n);return y.jsx(Jt.span,{...c,ref:t,onKeyDown:Ft(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):u9.concat(c9).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:Ft(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:Ft(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Ft(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),y9="SliderTrack",b9=N.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=a1(y9,n);return y.jsx(Jt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});b9.displayName=y9;var PE="SliderRange",v9=N.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=a1(PE,n),i=m9(PE,n),o=N.useRef(null),s=_n(t,o),u=a.values.length,c=a.values.map(m=>x9(m,a.min,a.max)),f=u>1?Math.min(...c):0,h=100-Math.max(...c);return y.jsx(Jt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:h+"%"}})});v9.displayName=PE;var FE="SliderThumb",w9=N.forwardRef((e,t)=>{const n=Hme(e.__scopeSlider),[r,a]=N.useState(null),i=_n(t,s=>a(s)),o=N.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(Zme,{...e,ref:i,index:o})}),Zme=N.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=a1(FE,n),s=m9(FE,n),[u,c]=N.useState(null),f=_n(t,S=>c(S)),h=u?o.form||!!u.closest("form"):!0,m=Yv(u),g=o.values[r],w=g===void 0?0:x9(g,o.min,o.max),v=Jme(r,o.values.length),_=m==null?void 0:m[s.size],x=_?e0e(_,w,s.direction):0;return N.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${w}% + ${x}px)`},children:[y.jsx(ME.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(Jt.span,{role:"slider","aria-label":e["aria-label"]||v,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:g===void 0?{display:"none"}:e.style,onFocus:Ft(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(_9,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});w9.displayName=FE;var Yme="RadioBubbleInput",_9=N.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=N.useRef(null),i=_n(a,r),o=Qw(t);return N.useEffect(()=>{const s=a.current;if(!s)return;const u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&f){const h=new Event("input",{bubbles:!0});f.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(Jt.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});_9.displayName=Yme;function Xme(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function x9(e,t,n){const i=100/(n-t)*(e-t);return u0(i,[0,100])}function Jme(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Qme(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function e0e(e,t,n){const r=e/2,i=Xk([0,50],[0,r]);return(r-i(t)*n)*n}function t0e(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function n0e(e,t){if(t>0){const n=t0e(e);return Math.min(...n)>=t}return!0}function Xk(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function r0e(e){return(String(e).split(".")[1]||"").length}function a0e(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var i0e=h9,o0e=b9,s0e=v9,l0e=w9;function Lf({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=N.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs(i0e,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:Mt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(o0e,{"data-slot":"slider-track",className:Mt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(s0e,{"data-slot":"slider-range",className:Mt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,u)=>y.jsx(l0e,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},u))]})}var u0e="Separator",I6="horizontal",c0e=["horizontal","vertical"],S9=N.forwardRef((e,t)=>{const{decorative:n,orientation:r=I6,...a}=e,i=d0e(r)?r:I6,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(Jt.div,{"data-orientation":i,...s,...a,ref:t})});S9.displayName=u0e;function d0e(e){return c0e.includes(e)}var f0e=S9;function Nv({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(f0e,{"data-slot":"separator-root",decorative:n,orientation:t,className:Mt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const h0e=()=>{const{theme:e,setTheme:t,enableAdvancedSettings:n,setEnableAdvancedSettings:r,enableStreamingMarkdown:a,setEnableStreamingMarkdown:i,streamingRenderFPS:o,setStreamingRenderFPS:s,streamingCodeRenderFPS:u,setStreamingCodeRenderFPS:c,resetGeneralSettings:f}=Ta(Hn(O=>({theme:O.theme,setTheme:O.setTheme,enableAdvancedSettings:O.enableAdvancedSettings,setEnableAdvancedSettings:O.setEnableAdvancedSettings,enableStreamingMarkdown:O.enableStreamingMarkdown,setEnableStreamingMarkdown:O.setEnableStreamingMarkdown,streamingRenderFPS:O.streamingRenderFPS,setStreamingRenderFPS:O.setStreamingRenderFPS,streamingCodeRenderFPS:O.streamingCodeRenderFPS,setStreamingCodeRenderFPS:O.setStreamingCodeRenderFPS,resetGeneralSettings:O.resetGeneralSettings}))),[h,m]=N.useState(o),[g,w]=N.useState(u),v=N.useCallback(O=>{m(O[0])},[]),_=N.useCallback(O=>{s(O[0])},[s]),x=N.useCallback(O=>{const I=O.target.value,D=I===""?30:parseInt(I.replace(/[^0-9]/g,""),10);if(!isNaN(D)){const B=Math.max(1,Math.min(60,D));s(B),m(B)}},[s]),S=N.useCallback(O=>{w(O[0])},[]),E=N.useCallback(O=>{c(O[0])},[c]),C=N.useCallback(O=>{const I=O.target.value,D=I===""?10:parseInt(I.replace(/[^0-9]/g,""),10);if(!isNaN(D)){const B=Math.max(1,Math.min(60,D));c(B),w(B)}},[c]);N.useEffect(()=>{m(o)},[o]),N.useEffect(()=>{w(u)},[u]);const A=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&f()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(qn,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(sg,{value:e??"system",onValueChange:O=>t(O),children:[y.jsx(ug,{id:"theme-select",className:"w-[180px]",children:y.jsx(lg,{placeholder:"Select theme"})}),y.jsxs(cg,{children:[y.jsx(Lo,{value:"light",children:"Light"}),y.jsx(Lo,{value:"dark",children:"Dark"}),y.jsx(Lo,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(qn,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(oc,{id:"streaming-markdown-switch",checked:a??!0,onCheckedChange:i})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[y.jsxs("div",{children:[y.jsxs(qn,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["General Streaming Update Rate (",h," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how smoothly streaming text appears. (Default: 30)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Lf,{id:"streaming-fps-slider",min:1,max:60,step:1,value:[h],onValueChange:v,onValueCommit:_,className:"flex-grow"}),y.jsx(Rr,{type:"number",min:1,max:60,step:1,value:h,onChange:x,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[y.jsxs("div",{children:[y.jsxs(qn,{htmlFor:"streaming-code-fps-slider",className:"font-medium",children:["Code Block Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Specific update rate when code blocks are streaming (lower values reduce lag). (Default: 10)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(Lf,{id:"streaming-code-fps-slider",min:1,max:60,step:1,value:[g],onValueChange:S,onValueCommit:E,className:"flex-grow"}),y.jsx(Rr,{type:"number",min:1,max:60,step:1,value:g,onChange:C,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(Nv,{}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Advanced Settings"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(qn,{htmlFor:"advanced-settings-switch",className:"font-medium",children:"Enable Advanced Controls"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Show controls for AI parameters (temperature, etc.) and Assistant settings tab."})]}),y.jsx(oc,{id:"advanced-settings-switch",checked:n??!1,onCheckedChange:r})]})]}),y.jsx(Nv,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Ht,{variant:"outline",size:"sm",onClick:A,children:[y.jsx(Oq,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},p0e=vt.memo(h0e),m0e=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t}=Ta(Hn(n=>({globalSystemPrompt:n.globalSystemPrompt,setGlobalSystemPrompt:n.setGlobalSystemPrompt})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt configuration"}),y.jsx(qn,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-3 block",children:"System prompt"}),y.jsx(Uk,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:n=>t(n.target.value),rows:4})]})})},g0e=vt.memo(m0e);function i1({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:Mt("w-full caption-bottom text-sm",e),...t})})}function o1({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:Mt("[&_tr]:border-b",e),...t})}function s1({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:Mt("[&_tr:last-child]:border-0",e),...t})}function Vi({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:Mt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function ia({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:Mt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function gr({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:Mt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const y0e=()=>{const{addApiKey:e,deleteApiKey:t,enableApiKeyManagement:n,dbApiKeys:r,dbProviderConfigs:a,isLoading:i}=ki(Hn(I=>({addApiKey:I.addApiKey,deleteApiKey:I.deleteApiKey,enableApiKeyManagement:I.enableApiKeyManagement,dbApiKeys:I.dbApiKeys,dbProviderConfigs:I.dbProviderConfigs,isLoading:I.isLoading}))),[o,s]=N.useState(""),[u,c]=N.useState(""),[f,h]=N.useState(""),[m,g]=N.useState(!1),[w,v]=N.useState({}),[_,x]=N.useState({}),S=N.useCallback(async I=>{if(I.preventDefault(),!o.trim()||!u.trim()||!f){ht.error("Please fill in all fields for the API key.");return}g(!0);try{await e(o.trim(),f,u.trim()),s(""),c(""),h("")}catch(D){console.error("Failed to add API key (from component):",D)}finally{g(!1)}},[e,o,u,f]),E=N.useCallback(async(I,D)=>{if(window.confirm(`Are you sure you want to delete the API key "${D}"? This will also unlink it from any providers using it. This action cannot be undone.`)){v(B=>({...B,[I]:!0}));try{await t(I),x(B=>{const W={...B};return delete W[I],W})}catch(B){console.error("Failed to delete API key (from component):",B)}finally{v(B=>({...B,[I]:!1}))}}},[t]),C=N.useMemo(()=>{const I=new Map;return(r||[]).forEach(D=>{const B=(a||[]).filter(W=>W.apiKeyId===D.id);I.set(D.id,B.length===0?"Not linked":B.map(W=>W.name).join(", "))}),I},[r,a]);if(!n)return y.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400 flex items-center justify-center gap-2 bg-gray-800/30 rounded-md border border-dashed border-gray-700 min-h-[200px]",children:[y.jsx(TO,{className:"h-5 w-5"}),"API Key Management is disabled in the configuration."]});const A=I=>{x(D=>({...D,[I]:!D[I]}))},O=I=>({openai:"OpenAI",google:"Google",openrouter:"OpenRouter","openai-compatible":"OpenAI-Compatible"})[I]||"Unknown/Custom";return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Add New API Key"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(qn,{htmlFor:"new-key-name",children:"Name"}),y.jsx(Rr,{id:"new-key-name",value:o,onChange:I=>s(I.target.value),placeholder:"e.g., My Personal Key",required:!0,className:"mt-1",disabled:m})]}),y.jsxs("div",{children:[y.jsx(qn,{htmlFor:"new-key-provider-type",children:"Intended Provider Type"}),y.jsxs(sg,{value:f,onValueChange:h,required:!0,disabled:m,children:[y.jsx(ug,{id:"new-key-provider-type",className:"mt-1",children:y.jsx(lg,{placeholder:"Select Type..."})}),y.jsxs(cg,{children:[y.jsx(Lo,{value:"openai",children:"OpenAI"}),y.jsx(Lo,{value:"google",children:"Google"}),y.jsx(Lo,{value:"openrouter",children:"OpenRouter"}),y.jsx(Lo,{value:"openai-compatible",children:"OpenAI-Compatible"})]})]})]}),y.jsxs("div",{children:[y.jsx(qn,{htmlFor:"new-key-value",children:"API Key Value"}),y.jsx(Rr,{id:"new-key-value",type:"password",value:u,onChange:I=>c(I.target.value),placeholder:"Paste your API key here",required:!0,className:"mt-1",disabled:m})]})]}),y.jsxs(Ht,{type:"submit",disabled:m,children:[m&&y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Key"]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Stored API Keys"}),i?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"})]}):(r||[]).length===0?y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No API keys stored yet. Add one above. Link keys to providers in the 'Providers' tab."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(i1,{children:[y.jsx(o1,{children:y.jsxs(Vi,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Type"}),y.jsx(ia,{children:"Linked To"}),y.jsx(ia,{children:"Key Value"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(s1,{children:(r||[]).map(I=>{const D=w[I.id];return y.jsxs(Vi,{children:[y.jsx(gr,{className:"font-medium",children:I.name}),y.jsx(gr,{children:O(I.providerId)}),y.jsx(gr,{className:"text-xs text-muted-foreground",children:C.get(I.id)??"Not linked"}),y.jsx(gr,{children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"font-mono text-xs",children:_[I.id]?I.value:""}),y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>A(I.id),className:"h-6 w-6","aria-label":_[I.id]?"Hide key":"Show key",disabled:D,children:_[I.id]?y.jsx(OU,{className:"h-4 w-4"}):y.jsx(jU,{className:"h-4 w-4"})})]})}),y.jsx(gr,{className:"text-right",children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>E(I.id,I.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete key ${I.name}`,disabled:D,children:D?y.jsx(Qn,{className:"h-4 w-4 animate-spin"}):y.jsx(zu,{className:"h-4 w-4"})})})]},I.id)})})]})})]})]})},b0e=vt.memo(y0e),v0e=()=>{const{importConversation:e,exportAllConversations:t}=zo(Hn(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=N.useRef(null),[r,a]=N.useState(!1),[i,o]=N.useState(!1),[s,u]=N.useState(!1),c=()=>{var g;(g=n.current)==null||g.click()},f=N.useCallback(async g=>{var v;const w=(v=g.target.files)==null?void 0:v[0];if(w){a(!0);try{await e(w)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=N.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),m=N.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await Wt.clearAllData(),ht.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const w="Failed to clear all data";console.error(w,g),ht.error(`${w}: ${g instanceof Error?g.message:String(g)}`),u(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:f,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Ht,{onClick:c,variant:"outline",disabled:r,children:[r?y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Zq,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Ht,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Cb,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Ht,{onClick:m,variant:"destructive",disabled:s,children:[s?y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(zu,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},w0e=vt.memo(v0e),_0e=KE("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function x0e({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Mt(_0e({variant:t}),e),...n})}function S0e({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:Mt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function E0e({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:Mt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}const C0e=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=l0(Hn(O=>({loadedMods:O.loadedMods,addDbMod:O.addDbMod,updateDbMod:O.updateDbMod,deleteDbMod:O.deleteDbMod,dbMods:O.dbMods,isLoading:O.isLoading}))),[o,s]=N.useState(""),[u,c]=N.useState(""),[f,h]=N.useState(""),[m,g]=N.useState(!1),[w,v]=N.useState({}),[_,x]=N.useState({}),S=N.useCallback(async()=>{if(!o.trim()){ht.error("Mod name cannot be empty.");return}if(!u.trim()&&!f.trim()){ht.error("Either Mod URL or Script Content must be provided.");return}if(u.trim()&&f.trim()){ht.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const O={name:o.trim(),sourceUrl:u.trim()||null,scriptContent:f.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(O),s(""),c(""),h(""),ht.info("Mod added. Reload required for changes to take effect.")}catch(O){console.error("Failed to add mod (from component):",O)}finally{g(!1)}},[o,u,f,t,a==null?void 0:a.length]),E=N.useCallback(async O=>{v(I=>({...I,[O.id]:!0}));try{await n(O.id,{enabled:!O.enabled}),ht.info(`Mod "${O.name}" ${O.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(I){console.error("Failed to update mod (from component):",I)}finally{v(I=>({...I,[O.id]:!1}))}},[n]),C=N.useCallback(async O=>{if(window.confirm(`Are you sure you want to delete the mod "${O.name}"? This cannot be undone.`)){x(I=>({...I,[O.id]:!0}));try{await r(O.id),ht.info("Mod deleted. Reload required for changes to take effect.")}catch(I){console.error("Failed to delete mod (from component):",I)}finally{x(I=>({...I,[O.id]:!1}))}}},[r]),A=N.useCallback(O=>{const I=e.find(B=>B.id===O);if(I)if(I.error){const B=I.error instanceof Error?I.error.message:String(I.error);return{status:"Error",error:I.error,tooltip:B}}else return{status:"Loaded"};const D=(a||[]).find(B=>B.id===O);return D?D.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(x0e,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(Wq,{className:"h-4 w-4"}),y.jsx(S0e,{children:"Security Warning"}),y.jsx(E0e,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(qn,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(Rr,{id:"mod-name",value:o,onChange:O=>s(O.target.value),placeholder:"My Awesome Mod",disabled:m})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(qn,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(Rr,{id:"mod-url",type:"url",value:u,onChange:O=>c(O.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!f.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(qn,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(Uk,{id:"mod-script",value:f,onChange:O=>h(O.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!u.trim()})]}),y.jsxs(Ht,{onClick:S,disabled:m,children:[m&&y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(kn,{delayDuration:100,children:y.jsxs(i1,{children:[y.jsx(o1,{children:y.jsxs(Vi,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Source"}),y.jsx(ia,{children:"Status"}),y.jsx(ia,{className:"text-center",children:"Enabled"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(s1,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Vi,{children:y.jsx(gr,{colSpan:5,children:y.jsx(Mr,{className:"h-10 w-full"})})}),y.jsx(Vi,{children:y.jsx(gr,{colSpan:5,children:y.jsx(Mr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Vi,{children:y.jsx(gr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(O=>{const{status:I,error:D,tooltip:B}=A(O.id),W=O.sourceUrl?new URL(O.sourceUrl).hostname:"Direct Script",Q=w[O.id],M=_[O.id],K=Q||M,U=I==="Error";return y.jsxs(Vi,{children:[y.jsx(gr,{className:"font-medium",children:O.name}),y.jsx(gr,{className:"text-muted-foreground",children:W}),y.jsxs(gr,{children:[y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx("span",{className:U?"text-destructive font-semibold cursor-help":"",children:I})}),B&&y.jsx(On,{className:"max-w-xs break-words",children:y.jsx("p",{children:B})})]}),U&&D&&y.jsx("p",{className:"text-xs text-destructive truncate",children:D instanceof Error?D.message:String(D)})]}),y.jsxs(gr,{className:"text-center",children:[y.jsx(oc,{checked:O.enabled??!1,onCheckedChange:()=>E(O),disabled:K,"aria-label":`Enable ${O.name}`}),Q&&y.jsx(Qn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(gr,{className:"text-right",children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>C(O),disabled:K,"aria-label":`Delete ${O.name}`,className:"text-destructive hover:text-destructive/80",children:M?y.jsx(Qn,{className:"h-4 w-4 animate-spin"}):y.jsx(zu,{className:"h-4 w-4"})})})]},O.id)})})]})})})]})]})},k0e=vt.memo(C0e),E9=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48"})=>{const[s,u]=N.useState(""),c=N.useMemo(()=>{if(!s)return t;const f=s.toLowerCase();return t.filter(h=>h.name.toLowerCase().includes(f)||h.id.toLowerCase().includes(f))},[t,s]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"}),y.jsx(Mr,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(Rr,{value:s,onChange:f=>u(f.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx($w,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:c.map(f=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(qn,{htmlFor:`enable-model-${e}-${f.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:f.name||f.id,children:f.name||f.id}),y.jsx(oc,{id:`enable-model-${e}-${f.id}`,checked:n.has(f.id),onCheckedChange:h=>r(f.id,h),className:"flex-shrink-0",disabled:i,"aria-label":`Enable model ${f.name||f.id}`})]},f.id))})})]})},A0e=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s})=>{var C;const u=Bk(e.type),c=zk(e.type),f=hm(e.type),h=o==="fetching"||s,m=s||o==="fetching",g=s||o==="fetching",v=ki(A=>A.getAllAvailableModelDefsForProvider)(e.id),_=N.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),x=e.apiKeyId?t.some(A=>A.id===e.apiKeyId):!1,S=u&&!x,E=N.useCallback(async(A,O)=>{const I=new Set(e.enabledModels??[]);O?I.add(A):I.delete(A);const D=Array.from(I);try{await i(e.id,{enabledModels:D})}catch(B){ht.error("Failed to update model status."),console.error("Failed to save model toggle:",B)}},[e.enabledModels,e.id,i]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{children:y.jsx("span",{className:Mt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(On,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),S&&y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{children:y.jsx(Bu,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(On,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:n,disabled:m,"aria-label":"Edit provider",className:"h-8 w-8",children:y.jsx(tC,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Edit"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:r,disabled:g,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",children:s?y.jsx(Qn,{className:"h-4 w-4 animate-spin"}):y.jsx(zu,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Delete"})]})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[u&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?x?y.jsx("span",{className:"text-green-400",children:((C=t.find(A=>A.id===e.apiKeyId))==null?void 0:C.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),c&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),f&&y.jsx("div",{className:"pt-1",children:y.jsxs(Ht,{variant:"outline",size:"sm",onClick:a,disabled:h,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Qn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(vo,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(Bu,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(Gv,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx("span",{className:"font-medium text-card-foreground text-sm",children:"Model Enablement (Saves Immediately):"}),y.jsx(E9,{providerId:e.id,allAvailableModels:v,enabledModelIds:_,onToggleModel:E,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64"})]})]})},T0e=vt.memo(A0e),C9=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var c;const o=f=>{r(f==="none"?null:f)},s=(c=a.find(f=>f.id===n))==null?void 0:c.name,u=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(sg,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(ug,{className:Mt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(lg,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(gq,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):u]})]})})}),y.jsxs(cg,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(Lo,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(f=>y.jsx(Lo,{value:f.id,children:f.name||`Key ID: ${f.id.substring(0,6)}...`},f.id))]})]})},R0e=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const u=Bk(t.type??null),c=zk(t.type??null),f=hm(t.type??null),h=t.isEnabled??!1,m=t.autoFetchModels??!1,g=N.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),w=N.useCallback((v,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(v):x.delete(v);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(qn,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(Rr,{id:`edit-name-${e}`,value:t.name||"",onChange:v=>s("name",v.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(qn,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(sg,{value:t.type??"",onValueChange:v=>s("type",v),disabled:a,children:[y.jsx(ug,{id:`edit-type-${e}`,children:y.jsx(lg,{placeholder:"Select Type"})}),y.jsx(cg,{children:xF.map(v=>y.jsx(Lo,{value:v.value,children:v.label},v.value))})]})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(qn,{children:"API Key"}),y.jsx(C9,{selectedKeyId:t.apiKeyId??null,onKeySelected:v=>s("apiKeyId",v),apiKeys:n,disabled:a})]}),c&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(qn,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(Rr,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:v=>s("baseURL",v.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(oc,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:v=>s("isEnabled",v),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(qn,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(oc,{id:`edit-autofetch-${e}`,checked:m,onCheckedChange:v=>s("autoFetchModels",v),disabled:!f||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(qn,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:f?"":"text-muted-foreground",children:["Auto-fetch models ",f?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(E9,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:w,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(Nv,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Ht,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(zs,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Ht,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(nC,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},N0e=vt.memo(R0e),I0e=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i})=>{const[o,s]=N.useState(!1),[u,c]=N.useState(!1),[f,h]=N.useState(!1),[m,g]=N.useState({}),w=ki(D=>D.getAllAvailableModelDefsForProvider),[v,_]=N.useState([]),x=N.useMemo(()=>[...v].sort((D,B)=>(D.name||D.id).localeCompare(B.name||B.id)),[v]);N.useEffect(()=>{if(o){const D=w(e.id);_(D),g({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else _([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,e.fetchedModels,w]);const S=()=>s(!0),E=()=>{s(!1),g({}),c(!1)},C=N.useCallback(async()=>{c(!0);try{const D=m.enabledModels&&m.enabledModels.length>0?m.enabledModels:null,B={name:m.name,type:m.type,isEnabled:m.isEnabled,apiKeyId:m.apiKeyId,baseURL:m.baseURL,autoFetchModels:m.autoFetchModels,enabledModels:D};Object.keys(B).forEach(W=>{B[W]===void 0&&delete B[W]}),await n(e.id,B),s(!1),g({}),ht.success(`Provider "${B.name||e.name}" updated.`)}catch(D){console.error("Failed to save provider update:",D),ht.error("Failed to save provider configuration.")}finally{c(!1)}},[m,n,e.id,e.name]),A=N.useCallback((D,B)=>{g(W=>({...W,[D]:B}))},[]),O=N.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){h(!0);try{await r(e.id)}catch(D){console.error("Failed to delete provider:",D),h(!1)}}},[r,e.id,e.name]),I=N.useCallback(async()=>{if(await a(e.id),o){const D=w(e.id);_(D)}},[a,e.id,o,w]);return y.jsx("div",{className:"border-b border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?y.jsx(N0e,{providerId:e.id,editData:m,apiKeys:t,allAvailableModels:x,isSaving:u,onCancel:E,onSave:C,onChange:A,onUpdate:n}):y.jsx(T0e,{provider:e,apiKeys:t,onEdit:S,onDelete:O,onFetchModels:I,onUpdate:n,fetchStatus:i,isDeleting:f})})},O0e=vt.memo(I0e),D0e=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=N.useState(!1),[i,o]=N.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!0,fetchedModels:null,modelsLastFetchedAt:null}),s=N.useCallback((m,g)=>{o(w=>{const v={...w,[m]:g};if(m==="type"){const _=g;v.apiKeyId=null,v.baseURL=null,v.autoFetchModels=hm(_),v.enabledModels=null}return(m==="isEnabled"||m==="autoFetchModels")&&(v[m]=!!g),v})},[]),u=N.useCallback(async()=>{if(!i.name||!i.type){ht.error("Provider Name and Type are required.");return}a(!0);try{const m=i.type,g=i.autoFetchModels??hm(m),w={name:i.name,type:m,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(w),n()}catch(m){console.error("Failed to add provider (from form component):",m)}finally{a(!1)}},[i,t,n]),c=Bk(i.type??null),f=zk(i.type??null),h=hm(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Rr,{value:i.name||"",onChange:m=>s("name",m.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(sg,{value:i.type??"openai",onValueChange:m=>s("type",m),disabled:r,children:[y.jsx(ug,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(lg,{placeholder:"Select Type"})}),y.jsx(cg,{children:xF.map(m=>y.jsx(Lo,{value:m.value,children:m.label},m.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(oc,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:m=>s("isEnabled",m),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(qn,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(c||f)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[c&&y.jsx(C9,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:m=>s("apiKeyId",m),apiKeys:e||[],className:"flex-grow",disabled:r}),f&&y.jsx(Rr,{value:i.baseURL||"",onChange:m=>s("baseURL",m.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(oc,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:m=>s("autoFetchModels",m),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(qn,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Ht,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(zs,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Ht,{variant:"secondary",size:"sm",onClick:u,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(nC,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})},j0e=()=>{const{addDbProviderConfig:e,updateDbProviderConfig:t,deleteDbProviderConfig:n,fetchModels:r,providerFetchStatus:a,dbProviderConfigs:i,apiKeys:o,isLoading:s}=ki(Hn(w=>({addDbProviderConfig:w.addProviderConfig,updateDbProviderConfig:w.updateProviderConfig,deleteDbProviderConfig:w.deleteProviderConfig,fetchModels:w.fetchModels,providerFetchStatus:w.providerFetchStatus,dbProviderConfigs:w.dbProviderConfigs,apiKeys:w.dbApiKeys,isLoading:w.isLoading}))),[u,c]=N.useState(!1),f=()=>c(!0),h=N.useCallback(()=>c(!1),[]),m=N.useCallback(async w=>{await r(w)},[r]),g=N.useMemo(()=>i||[],[i]);return y.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(D0e,{apiKeys:o||[],onAddProvider:e,onCancel:h}):y.jsxs(Ht,{onClick:f,variant:"outline",className:"w-full",disabled:s,children:[y.jsx(Vv,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow overflow-hidden border-t border-border pt-4 mt-4",children:y.jsxs("div",{className:"space-y-2",children:[s&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Mr,{className:"h-24 w-full"}),y.jsx(Mr,{className:"h-24 w-full"}),y.jsx(Mr,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:g.map(w=>y.jsx(O0e,{provider:w,apiKeys:o||[],onUpdate:t,onDelete:n,onFetchModels:m,fetchStatus:a[w.id]||"idle"},w.id))}),!s&&g.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},M0e=vt.memo(j0e);function P0e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const l1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bh(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Jk(e){return"nodeType"in e}function Ii(e){var t,n;return e?Bh(e)?e:Jk(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Qk(e){const{Document:t}=Ii(e);return e instanceof t}function dg(e){return Bh(e)?!1:e instanceof Ii(e).HTMLElement}function k9(e){return e instanceof Ii(e).SVGElement}function zh(e){return e?Bh(e)?e.document:Jk(e)?Qk(e)?e:dg(e)||k9(e)?e.ownerDocument:document:document:document}const Bs=l1?N.useLayoutEffect:N.useEffect;function eA(e){const t=N.useRef(e);return Bs(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function F0e(){const e=N.useRef(null),t=N.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=N.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function c0(e,t){t===void 0&&(t=[e]);const n=N.useRef(e);return Bs(()=>{n.current!==e&&(n.current=e)},t),n}function fg(e,t){const n=N.useRef();return N.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Iv(e){const t=eA(e),n=N.useRef(null),r=N.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function LE(e){const t=N.useRef();return N.useEffect(()=>{t.current=e},[e]),t.current}let p2={};function hg(e,t){return N.useMemo(()=>{if(t)return t;const n=p2[e]==null?0:p2[e]+1;return p2[e]=n,e+"-"+n},[e,t])}function A9(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[u,c]of s){const f=i[u];f!=null&&(i[u]=f+e*c)}return i},{...t})}}const Vf=A9(1),d0=A9(-1);function L0e(e){return"clientX"in e&&"clientY"in e}function tA(e){if(!e)return!1;const{KeyboardEvent:t}=Ii(e.target);return t&&e instanceof t}function $0e(e){if(!e)return!1;const{TouchEvent:t}=Ii(e.target);return t&&e instanceof t}function $E(e){if($0e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return L0e(e)?{x:e.clientX,y:e.clientY}:null}const f0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[f0.Translate.toString(e),f0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),O6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function B0e(e){return e.matches(O6)?e:e.querySelector(O6)}const z0e={display:"none"};function U0e(e){let{id:t,value:n}=e;return vt.createElement("div",{id:t,style:z0e},n)}function q0e(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function H0e(){const[e,t]=N.useState("");return{announce:N.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const T9=N.createContext(null);function V0e(e){const t=N.useContext(T9);N.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function G0e(){const[e]=N.useState(()=>new Set),t=N.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[N.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var s;return(s=o[a])==null?void 0:s.call(o,i)})},[e]),t]}const W0e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},K0e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Z0e(e){let{announcements:t=K0e,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=W0e}=e;const{announce:i,announcement:o}=H0e(),s=hg("DndLiveRegion"),[u,c]=N.useState(!1);if(N.useEffect(()=>{c(!0)},[]),V0e(N.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:g}=h;t.onDragMove&&i(t.onDragMove({active:m,over:g}))},onDragOver(h){let{active:m,over:g}=h;i(t.onDragOver({active:m,over:g}))},onDragEnd(h){let{active:m,over:g}=h;i(t.onDragEnd({active:m,over:g}))},onDragCancel(h){let{active:m,over:g}=h;i(t.onDragCancel({active:m,over:g}))}}),[i,t])),!u)return null;const f=vt.createElement(vt.Fragment,null,vt.createElement(U0e,{id:r,value:a.draggable}),vt.createElement(q0e,{id:s,announcement:o}));return n?Is.createPortal(f,n):f}var ca;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ca||(ca={}));function Ov(){}function D6(e,t){return N.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Y0e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Jo=Object.freeze({x:0,y:0});function R9(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function N9(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function X0e(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function j6(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function I9(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function M6(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const J0e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=M6(t,t.left,t.top),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=R9(M6(u),a);i.push({id:s,data:{droppableContainer:o,value:c}})}}return i.sort(N9)},Q0e=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=j6(t),i=[];for(const o of r){const{id:s}=o,u=n.get(s);if(u){const c=j6(u),f=a.reduce((m,g,w)=>m+R9(c[w],g),0),h=Number((f/4).toFixed(4));i.push({id:s,data:{droppableContainer:o,value:h}})}}return i.sort(N9)};function ege(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-r,s=i-n;if(r<a&&n<i){const u=t.width*t.height,c=e.width*e.height,f=o*s,h=f/(u+c-f);return Number(h.toFixed(4))}return 0}const tge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const u=ege(s,t);u>0&&a.push({id:o,data:{droppableContainer:i,value:u}})}}return a.sort(X0e)};function nge(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function O9(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Jo}function rge(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,s)=>({...o,top:o.top+e*s.y,bottom:o.bottom+e*s.y,left:o.left+e*s.x,right:o.right+e*s.x}),{...n})}}const age=rge(1);function ige(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function oge(e,t,n){const r=ige(t);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:s}=r,u=e.left-o-(1-a)*parseFloat(n),c=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),f=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:f,height:h,top:c,right:u+f,bottom:c+h,left:u}}const sge={ignoreTransform:!1};function Uh(e,t){t===void 0&&(t=sge);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:f}=Ii(e).getComputedStyle(e);c&&(n=oge(n,c,f))}const{top:r,left:a,width:i,height:o,bottom:s,right:u}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:u}}function P6(e){return Uh(e,{ignoreTransform:!0})}function lge(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function uge(e,t){return t===void 0&&(t=Ii(e).getComputedStyle(e)),t.position==="fixed"}function cge(e,t){t===void 0&&(t=Ii(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function u1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(Qk(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!dg(a)||k9(a)||n.includes(a))return n;const i=Ii(e).getComputedStyle(a);return a!==e&&cge(a,i)&&n.push(a),uge(a,i)?n:r(a.parentNode)}return e?r(e):n}function D9(e){const[t]=u1(e,1);return t??null}function m2(e){return!l1||!e?null:Bh(e)?e:Jk(e)?Qk(e)||e===zh(e).scrollingElement?window:dg(e)?e:null:null}function j9(e){return Bh(e)?e.scrollX:e.scrollLeft}function M9(e){return Bh(e)?e.scrollY:e.scrollTop}function BE(e){return{x:j9(e),y:M9(e)}}var Sa;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Sa||(Sa={}));function P9(e){return!l1||!e?!1:e===document.scrollingElement}function F9(e){const t={x:0,y:0},n=P9(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,s=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:t}}const dge={x:.2,y:.2};function fge(e,t,n,r,a){let{top:i,left:o,right:s,bottom:u}=n;r===void 0&&(r=10),a===void 0&&(a=dge);const{isTop:c,isBottom:f,isLeft:h,isRight:m}=F9(e),g={x:0,y:0},w={x:0,y:0},v={height:t.height*a.y,width:t.width*a.x};return!c&&i<=t.top+v.height?(g.y=Sa.Backward,w.y=r*Math.abs((t.top+v.height-i)/v.height)):!f&&u>=t.bottom-v.height&&(g.y=Sa.Forward,w.y=r*Math.abs((t.bottom-v.height-u)/v.height)),!m&&s>=t.right-v.width?(g.x=Sa.Forward,w.x=r*Math.abs((t.right-v.width-s)/v.width)):!h&&o<=t.left+v.width&&(g.x=Sa.Backward,w.x=r*Math.abs((t.left+v.width-o)/v.width)),{direction:g,speed:w}}function hge(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function L9(e){return e.reduce((t,n)=>Vf(t,BE(n)),Jo)}function pge(e){return e.reduce((t,n)=>t+j9(n),0)}function mge(e){return e.reduce((t,n)=>t+M9(n),0)}function gge(e,t){if(t===void 0&&(t=Uh),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);D9(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const yge=[["x",["left","right"],pge],["y",["top","bottom"],mge]];class nA{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=u1(n),a=L9(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,s]of yge)for(const u of o)Object.defineProperty(this,u,{get:()=>{const c=s(r),f=a[i]-c;return this.rect[u]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class pm{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function bge(e){const{EventTarget:t}=Ii(e);return e instanceof t?e:zh(e)}function g2(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var po;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(po||(po={}));function F6(e){e.preventDefault()}function vge(e){e.stopPropagation()}var Vn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Vn||(Vn={}));const $9={start:[Vn.Space,Vn.Enter],cancel:[Vn.Esc],end:[Vn.Space,Vn.Enter,Vn.Tab]},wge=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Vn.Right:return{...n,x:n.x+25};case Vn.Left:return{...n,x:n.x-25};case Vn.Down:return{...n,y:n.y+25};case Vn.Up:return{...n,y:n.y-25}}};class rA{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new pm(zh(n)),this.windowListeners=new pm(Ii(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(po.Resize,this.handleCancel),this.windowListeners.add(po.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(po.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&gge(r),n(Jo)}handleKeyDown(t){if(tA(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=$9,coordinateGetter:o=wge,scrollBehavior:s="smooth"}=a,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:c}=r.current,f=c?{x:c.left,y:c.top}:Jo;this.referenceCoordinates||(this.referenceCoordinates=f);const h=o(t,{active:n,context:r.current,currentCoordinates:f});if(h){const m=d0(h,f),g={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const _=t.code,{isTop:x,isRight:S,isLeft:E,isBottom:C,maxScroll:A,minScroll:O}=F9(v),I=hge(v),D={x:Math.min(_===Vn.Right?I.right-I.width/2:I.right,Math.max(_===Vn.Right?I.left:I.left+I.width/2,h.x)),y:Math.min(_===Vn.Down?I.bottom-I.height/2:I.bottom,Math.max(_===Vn.Down?I.top:I.top+I.height/2,h.y))},B=_===Vn.Right&&!S||_===Vn.Left&&!E,W=_===Vn.Down&&!C||_===Vn.Up&&!x;if(B&&D.x!==h.x){const Q=v.scrollLeft+m.x,M=_===Vn.Right&&Q<=A.x||_===Vn.Left&&Q>=O.x;if(M&&!m.y){v.scrollTo({left:Q,behavior:s});return}M?g.x=v.scrollLeft-Q:g.x=_===Vn.Right?v.scrollLeft-A.x:v.scrollLeft-O.x,g.x&&v.scrollBy({left:-g.x,behavior:s});break}else if(W&&D.y!==h.y){const Q=v.scrollTop+m.y,M=_===Vn.Down&&Q<=A.y||_===Vn.Up&&Q>=O.y;if(M&&!m.x){v.scrollTo({top:Q,behavior:s});return}M?g.y=v.scrollTop-Q:g.y=_===Vn.Down?v.scrollTop-A.y:v.scrollTop-O.y,g.y&&v.scrollBy({top:-g.y,behavior:s});break}}this.handleMove(t,Vf(d0(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}rA.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=$9,onActivation:a}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function L6(e){return!!(e&&"distance"in e)}function $6(e){return!!(e&&"delay"in e)}class aA{constructor(t,n,r){var a;r===void 0&&(r=bge(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=zh(o),this.documentListeners=new pm(this.document),this.listeners=new pm(r),this.windowListeners=new pm(Ii(o)),this.initialCoordinates=(a=$E(i))!=null?a:Jo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(po.Resize,this.handleCancel),this.windowListeners.add(po.DragStart,F6),this.windowListeners.add(po.VisibilityChange,this.handleCancel),this.windowListeners.add(po.ContextMenu,F6),this.documentListeners.add(po.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if($6(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(L6(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(po.Click,vge,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(po.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const u=(n=$E(t))!=null?n:Jo,c=d0(a,u);if(!r&&s){if(L6(s)){if(s.tolerance!=null&&g2(c,s.tolerance))return this.handleCancel();if(g2(c,s.distance))return this.handleStart()}if($6(s)&&g2(c,s.tolerance))return this.handleCancel();this.handlePending(s,c);return}t.cancelable&&t.preventDefault(),o(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Vn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const _ge={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class iA extends aA{constructor(t){const{event:n}=t,r=zh(n.target);super(t,_ge,r)}}iA.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const xge={move:{name:"mousemove"},end:{name:"mouseup"}};var zE;(function(e){e[e.RightClick=2]="RightClick"})(zE||(zE={}));class Sge extends aA{constructor(t){super(t,xge,zh(t.event.target))}}Sge.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===zE.RightClick?!1:(r==null||r({event:n}),!0)}}];const y2={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ege extends aA{constructor(t){super(t,y2)}static setup(){return window.addEventListener(y2.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(y2.move.name,t)};function t(){}}}Ege.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var mm;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(mm||(mm={}));var Dv;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Dv||(Dv={}));function Cge(e){let{acceleration:t,activator:n=mm.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=Dv.TreeOrder,pointerCoordinates:u,scrollableAncestors:c,scrollableAncestorRects:f,delta:h,threshold:m}=e;const g=Age({delta:h,disabled:!i}),[w,v]=F0e(),_=N.useRef({x:0,y:0}),x=N.useRef({x:0,y:0}),S=N.useMemo(()=>{switch(n){case mm.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case mm.DraggableRect:return a}},[n,a,u]),E=N.useRef(null),C=N.useCallback(()=>{const O=E.current;if(!O)return;const I=_.current.x*x.current.x,D=_.current.y*x.current.y;O.scrollBy(I,D)},[]),A=N.useMemo(()=>s===Dv.TreeOrder?[...c].reverse():c,[s,c]);N.useEffect(()=>{if(!i||!c.length||!S){v();return}for(const O of A){if((r==null?void 0:r(O))===!1)continue;const I=c.indexOf(O),D=f[I];if(!D)continue;const{direction:B,speed:W}=fge(O,D,S,t,m);for(const Q of["x","y"])g[Q][B[Q]]||(W[Q]=0,B[Q]=0);if(W.x>0||W.y>0){v(),E.current=O,w(C,o),_.current=W,x.current=B;return}}_.current={x:0,y:0},x.current={x:0,y:0},v()},[t,C,r,v,i,o,JSON.stringify(S),JSON.stringify(g),w,c,A,f,JSON.stringify(m)])}const kge={x:{[Sa.Backward]:!1,[Sa.Forward]:!1},y:{[Sa.Backward]:!1,[Sa.Forward]:!1}};function Age(e){let{delta:t,disabled:n}=e;const r=LE(t);return fg(a=>{if(n||!r||!a)return kge;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Sa.Backward]:a.x[Sa.Backward]||i.x===-1,[Sa.Forward]:a.x[Sa.Forward]||i.x===1},y:{[Sa.Backward]:a.y[Sa.Backward]||i.y===-1,[Sa.Forward]:a.y[Sa.Forward]||i.y===1}}},[n,t,r])}function Tge(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return fg(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function Rge(e,t){return N.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var h0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(h0||(h0={}));var UE;(function(e){e.Optimized="optimized"})(UE||(UE={}));const B6=new Map;function Nge(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=N.useState(null),{frequency:s,measure:u,strategy:c}=a,f=N.useRef(e),h=_(),m=c0(h),g=N.useCallback(function(x){x===void 0&&(x=[]),!m.current&&o(S=>S===null?x:S.concat(x.filter(E=>!S.includes(E))))},[m]),w=N.useRef(null),v=fg(x=>{if(h&&!n)return B6;if(!x||x===B6||f.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,A=C?new nA(u(C),C):null;E.rect.current=A,A&&S.set(E.id,A)}return S}return x},[e,i,n,h,u]);return N.useEffect(()=>{f.current=e},[e]),N.useEffect(()=>{h||g()},[n,h]),N.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),N.useEffect(()=>{h||typeof s!="number"||w.current!==null||(w.current=setTimeout(()=>{g(),w.current=null},s))},[s,h,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(c){case h0.Always:return!1;case h0.BeforeDragging:return n;default:return!n}}}function B9(e,t){return fg(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ige(e,t){return B9(e,t)}function Oge(e){let{callback:t,disabled:n}=e;const r=eA(t),a=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return N.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function c1(e){let{callback:t,disabled:n}=e;const r=eA(t),a=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return N.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Dge(e){return new nA(Uh(e),e)}function z6(e,t,n){t===void 0&&(t=Dge);const[r,a]=N.useState(null);function i(){a(u=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=u??n)!=null?c:null}const f=t(e);return JSON.stringify(u)===JSON.stringify(f)?u:f})}const o=Oge({callback(u){if(e)for(const c of u){const{type:f,target:h}=c;if(f==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),s=c1({callback:i});return Bs(()=>{i(),e?(s==null||s.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),o==null||o.disconnect())},[e]),r}function jge(e){const t=B9(e);return O9(e,t)}const U6=[];function Mge(e){const t=N.useRef(e),n=fg(r=>e?r&&r!==U6&&e&&t.current&&e.parentNode===t.current.parentNode?r:u1(e):U6,[e]);return N.useEffect(()=>{t.current=e},[e]),n}function Pge(e){const[t,n]=N.useState(null),r=N.useRef(e),a=N.useCallback(i=>{const o=m2(i.target);o&&n(s=>s?(s.set(o,BE(o)),new Map(s)):null)},[]);return N.useEffect(()=>{const i=r.current;if(e!==i){o(i);const s=e.map(u=>{const c=m2(u);return c?(c.addEventListener("scroll",a,{passive:!0}),[c,BE(c)]):null}).filter(u=>u!=null);n(s.length?new Map(s):null),r.current=e}return()=>{o(e),o(i)};function o(s){s.forEach(u=>{const c=m2(u);c==null||c.removeEventListener("scroll",a)})}},[a,e]),N.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>Vf(i,o),Jo):L9(e):Jo,[e,t])}function q6(e,t){t===void 0&&(t=[]);const n=N.useRef(null);return N.useEffect(()=>{n.current=null},t),N.useEffect(()=>{const r=e!==Jo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?d0(e,n.current):Jo}function Fge(e){N.useEffect(()=>{if(!l1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Lge(e,t){return N.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,t)},n},{}),[e,t])}function z9(e){return N.useMemo(()=>e?lge(e):null,[e])}const H6=[];function $ge(e,t){t===void 0&&(t=Uh);const[n]=e,r=z9(n?Ii(n):null),[a,i]=N.useState(H6);function o(){i(()=>e.length?e.map(u=>P9(u)?r:new nA(t(u),u)):H6)}const s=c1({callback:o});return Bs(()=>{s==null||s.disconnect(),o(),e.forEach(u=>s==null?void 0:s.observe(u))},[e]),a}function Bge(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return dg(t)?t:e}function zge(e){let{measure:t}=e;const[n,r]=N.useState(null),a=N.useCallback(c=>{for(const{target:f}of c)if(dg(f)){r(h=>{const m=t(f);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=c1({callback:a}),o=N.useCallback(c=>{const f=Bge(c);i==null||i.disconnect(),f&&(i==null||i.observe(f)),r(f?t(f):null)},[t,i]),[s,u]=Iv(o);return N.useMemo(()=>({nodeRef:s,rect:n,setRef:u}),[n,s,u])}const Uge=[{sensor:iA,options:{}},{sensor:rA,options:{}}],qge={current:{}},vb={draggable:{measure:P6},droppable:{measure:P6,strategy:h0.WhileDragging,frequency:UE.Optimized},dragOverlay:{measure:Uh}};class gm extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Hge={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new gm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ov},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:vb,measureDroppableContainers:Ov,windowRect:null,measuringScheduled:!1},Vge={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ov,draggableNodes:new Map,over:null,measureDroppableContainers:Ov},d1=N.createContext(Vge),U9=N.createContext(Hge);function Gge(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new gm}}}function Wge(e,t){switch(t.type){case ca.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ca.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ca.DragEnd:case ca.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ca.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new gm(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case ca.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new gm(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case ca.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new gm(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Kge(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=N.useContext(d1),i=LE(r),o=LE(n==null?void 0:n.id);return N.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!tA(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:u,node:c}=s;if(!u.current&&!c.current)return;requestAnimationFrame(()=>{for(const f of[u.current,c.current]){if(!f)continue;const h=B0e(f);if(h){h.focus();break}}})}},[r,t,a,o,i]),null}function Zge(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function Yge(e){return N.useMemo(()=>({draggable:{...vb.draggable,...e==null?void 0:e.draggable},droppable:{...vb.droppable,...e==null?void 0:e.droppable},dragOverlay:{...vb.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Xge(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=N.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;Bs(()=>{if(!o&&!s||!t){i.current=!1;return}if(i.current||!r)return;const c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;const f=n(c),h=O9(f,r);if(o||(h.x=0),s||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=D9(c);m&&m.scrollBy({top:h.y,left:h.x})}},[t,o,s,r,n])}const q9=N.createContext({...Jo,scaleX:1,scaleY:1});var Ou;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Ou||(Ou={}));const Jge=N.memo(function(t){var n,r,a,i;let{id:o,accessibility:s,autoScroll:u=!0,children:c,sensors:f=Uge,collisionDetection:h=tge,measuring:m,modifiers:g,...w}=t;const v=N.useReducer(Wge,void 0,Gge),[_,x]=v,[S,E]=G0e(),[C,A]=N.useState(Ou.Uninitialized),O=C===Ou.Initialized,{draggable:{active:I,nodes:D,translate:B},droppable:{containers:W}}=_,Q=I!=null?D.get(I):null,M=N.useRef({initial:null,translated:null}),K=N.useMemo(()=>{var et;return I!=null?{id:I,data:(et=Q==null?void 0:Q.data)!=null?et:qge,rect:M}:null},[I,Q]),U=N.useRef(null),[me,se]=N.useState(null),[ne,ee]=N.useState(null),ae=c0(w,Object.values(w)),G=hg("DndDescribedBy",o),Y=N.useMemo(()=>W.getEnabled(),[W]),J=Yge(m),{droppableRects:re,measureDroppableContainers:we,measuringScheduled:ke}=Nge(Y,{dragging:O,dependencies:[B.x,B.y],config:J.droppable}),Me=Tge(D,I),Pe=N.useMemo(()=>ne?$E(ne):null,[ne]),Re=Be(),Ae=Ige(Me,J.draggable.measure);Xge({activeNode:I!=null?D.get(I):null,config:Re.layoutShiftCompensation,initialRect:Ae,measure:J.draggable.measure});const He=z6(Me,J.draggable.measure,Ae),st=z6(Me?Me.parentElement:null),Oe=N.useRef({activatorEvent:null,active:null,activeNode:Me,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=W.getNodeFor((n=Oe.current.over)==null?void 0:n.id),z=zge({measure:J.dragOverlay.measure}),Ce=(r=z.nodeRef.current)!=null?r:Me,Ne=O?(a=z.rect)!=null?a:He:null,ce=!!(z.nodeRef.current&&z.rect),ie=jge(ce?null:He),X=z9(Ce?Ii(Ce):null),_e=Mge(O?Te??Me:null),Le=$ge(_e),xe=Zge(g,{transform:{x:B.x-ie.x,y:B.y-ie.y,scaleX:1,scaleY:1},activatorEvent:ne,active:K,activeNodeRect:He,containerNodeRect:st,draggingNodeRect:Ne,over:Oe.current.over,overlayNodeRect:z.rect,scrollableAncestors:_e,scrollableAncestorRects:Le,windowRect:X}),Ve=Pe?Vf(Pe,B):null,xt=Pge(_e),ft=q6(xt),Et=q6(xt,[He]),Lt=Vf(xe,ft),Tt=Ne?age(Ne,xe):null,zt=K&&Tt?h({active:K,collisionRect:Tt,droppableRects:re,droppableContainers:Y,pointerCoordinates:Ve}):null,ge=I9(zt,"id"),[R,H]=N.useState(null),fe=ce?xe:Vf(xe,Et),Ie=nge(fe,(i=R==null?void 0:R.rect)!=null?i:null,He),be=N.useRef(null),Ee=N.useCallback((et,pe)=>{let{sensor:De,options:Ke}=pe;if(U.current==null)return;const Ct=D.get(U.current);if(!Ct)return;const ye=et.nativeEvent,q=new De({active:U.current,activeNode:Ct,event:ye,options:Ke,context:Oe,onAbort(V){if(!D.get(V))return;const{onDragAbort:de}=ae.current,Fe={id:V};de==null||de(Fe),S({type:"onDragAbort",event:Fe})},onPending(V,he,de,Fe){if(!D.get(V))return;const{onDragPending:Dt}=ae.current,un={id:V,constraint:he,initialCoordinates:de,offset:Fe};Dt==null||Dt(un),S({type:"onDragPending",event:un})},onStart(V){const he=U.current;if(he==null)return;const de=D.get(he);if(!de)return;const{onDragStart:Fe}=ae.current,it={activatorEvent:ye,active:{id:he,data:de.data,rect:M}};Is.unstable_batchedUpdates(()=>{Fe==null||Fe(it),A(Ou.Initializing),x({type:ca.DragStart,initialCoordinates:V,active:he}),S({type:"onDragStart",event:it}),se(be.current),ee(ye)})},onMove(V){x({type:ca.DragMove,coordinates:V})},onEnd:L(ca.DragEnd),onCancel:L(ca.DragCancel)});be.current=q;function L(V){return async function(){const{active:de,collisions:Fe,over:it,scrollAdjustedTranslate:Dt}=Oe.current;let un=null;if(de&&Dt){const{cancelDrop:Bt}=ae.current;un={activatorEvent:ye,active:de,collisions:Fe,delta:Dt,over:it},V===ca.DragEnd&&typeof Bt=="function"&&await Promise.resolve(Bt(un))&&(V=ca.DragCancel)}U.current=null,Is.unstable_batchedUpdates(()=>{x({type:V}),A(Ou.Uninitialized),H(null),se(null),ee(null),be.current=null;const Bt=V===ca.DragEnd?"onDragEnd":"onDragCancel";if(un){const Vt=ae.current[Bt];Vt==null||Vt(un),S({type:Bt,event:un})}})}}},[D]),le=N.useCallback((et,pe)=>(De,Ke)=>{const Ct=De.nativeEvent,ye=D.get(Ke);if(U.current!==null||!ye||Ct.dndKit||Ct.defaultPrevented)return;const q={active:ye};et(De,pe.options,q)===!0&&(Ct.dndKit={capturedBy:pe.sensor},U.current=Ke,Ee(De,pe))},[D,Ee]),ct=Rge(f,le);Fge(f),Bs(()=>{He&&C===Ou.Initializing&&A(Ou.Initialized)},[He,C]),N.useEffect(()=>{const{onDragMove:et}=ae.current,{active:pe,activatorEvent:De,collisions:Ke,over:Ct}=Oe.current;if(!pe||!De)return;const ye={active:pe,activatorEvent:De,collisions:Ke,delta:{x:Lt.x,y:Lt.y},over:Ct};Is.unstable_batchedUpdates(()=>{et==null||et(ye),S({type:"onDragMove",event:ye})})},[Lt.x,Lt.y]),N.useEffect(()=>{const{active:et,activatorEvent:pe,collisions:De,droppableContainers:Ke,scrollAdjustedTranslate:Ct}=Oe.current;if(!et||U.current==null||!pe||!Ct)return;const{onDragOver:ye}=ae.current,q=Ke.get(ge),L=q&&q.rect.current?{id:q.id,rect:q.rect.current,data:q.data,disabled:q.disabled}:null,V={active:et,activatorEvent:pe,collisions:De,delta:{x:Ct.x,y:Ct.y},over:L};Is.unstable_batchedUpdates(()=>{H(L),ye==null||ye(V),S({type:"onDragOver",event:V})})},[ge]),Bs(()=>{Oe.current={activatorEvent:ne,active:K,activeNode:Me,collisionRect:Tt,collisions:zt,droppableRects:re,draggableNodes:D,draggingNode:Ce,draggingNodeRect:Ne,droppableContainers:W,over:R,scrollableAncestors:_e,scrollAdjustedTranslate:Lt},M.current={initial:Ne,translated:Tt}},[K,Me,zt,Tt,D,Ce,Ne,re,W,R,_e,Lt]),Cge({...Re,delta:B,draggingRect:Tt,pointerCoordinates:Ve,scrollableAncestors:_e,scrollableAncestorRects:Le});const yt=N.useMemo(()=>({active:K,activeNode:Me,activeNodeRect:He,activatorEvent:ne,collisions:zt,containerNodeRect:st,dragOverlay:z,draggableNodes:D,droppableContainers:W,droppableRects:re,over:R,measureDroppableContainers:we,scrollableAncestors:_e,scrollableAncestorRects:Le,measuringConfiguration:J,measuringScheduled:ke,windowRect:X}),[K,Me,He,ne,zt,st,z,D,W,re,R,we,_e,Le,J,ke,X]),P=N.useMemo(()=>({activatorEvent:ne,activators:ct,active:K,activeNodeRect:He,ariaDescribedById:{draggable:G},dispatch:x,draggableNodes:D,over:R,measureDroppableContainers:we}),[ne,ct,K,He,x,G,D,R,we]);return vt.createElement(T9.Provider,{value:E},vt.createElement(d1.Provider,{value:P},vt.createElement(U9.Provider,{value:yt},vt.createElement(q9.Provider,{value:Ie},c)),vt.createElement(Kge,{disabled:(s==null?void 0:s.restoreFocus)===!1})),vt.createElement(Z0e,{...s,hiddenTextDescribedById:G}));function Be(){const et=(me==null?void 0:me.autoScrollEnabled)===!1,pe=typeof u=="object"?u.enabled===!1:u===!1,De=O&&!et&&!pe;return typeof u=="object"?{...u,enabled:De}:{enabled:De}}}),Qge=N.createContext(null),V6="button",eye="Draggable";function tye(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=hg(eye),{activators:o,activatorEvent:s,active:u,activeNodeRect:c,ariaDescribedById:f,draggableNodes:h,over:m}=N.useContext(d1),{role:g=V6,roleDescription:w="draggable",tabIndex:v=0}=a??{},_=(u==null?void 0:u.id)===t,x=N.useContext(_?q9:Qge),[S,E]=Iv(),[C,A]=Iv(),O=Lge(o,t),I=c0(n);Bs(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:I}),()=>{const B=h.get(t);B&&B.key===i&&h.delete(t)}),[h,t]);const D=N.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":_&&g===V6?!0:void 0,"aria-roledescription":w,"aria-describedby":f.draggable}),[r,g,v,_,w,f.draggable]);return{active:u,activatorEvent:s,activeNodeRect:c,attributes:D,isDragging:_,listeners:r?void 0:O,node:S,over:m,setNodeRef:E,setActivatorNodeRef:A,transform:x}}function nye(){return N.useContext(U9)}const rye="Droppable",aye={timeout:25};function iye(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=hg(rye),{active:o,dispatch:s,over:u,measureDroppableContainers:c}=N.useContext(d1),f=N.useRef({disabled:n}),h=N.useRef(!1),m=N.useRef(null),g=N.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:_}={...aye,...a},x=c0(v??r),S=N.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),g.current=null},_)},[_]),E=c1({callback:S,disabled:w||!o}),C=N.useCallback((D,B)=>{E&&(B&&(E.unobserve(B),h.current=!1),D&&E.observe(D))},[E]),[A,O]=Iv(C),I=c0(t);return N.useEffect(()=>{!E||!A.current||(E.disconnect(),h.current=!1,E.observe(A.current))},[A,E]),N.useEffect(()=>(s({type:ca.RegisterDroppable,element:{id:r,key:i,disabled:n,node:A,rect:m,data:I}}),()=>s({type:ca.UnregisterDroppable,key:i,id:r})),[r]),N.useEffect(()=>{n!==f.current.disabled&&(s({type:ca.SetDroppableDisabled,id:r,key:i,disabled:n}),f.current.disabled=n)},[r,i,n,s]),{active:o,rect:m,isOver:(u==null?void 0:u.id)===r,node:A,over:u,setNodeRef:O}}function oA(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function oye(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function ib(e){return e!==null&&e>=0}function sye(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function lye(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const H9=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=oA(t,r,n),o=t[a],s=i[a];return!s||!o?null:{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}},ob={scaleX:1,scaleY:1},uye=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:o}=e;const s=(t=i[n])!=null?t:r;if(!s)return null;if(a===n){const c=i[o];return c?{x:0,y:n<o?c.top+c.height-(s.top+s.height):c.top-s.top,...ob}:null}const u=cye(i,a,n);return a>n&&a<=o?{x:0,y:-s.height-u,...ob}:a<n&&a>=o?{x:0,y:s.height+u,...ob}:{x:0,y:0,...ob}};function cye(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const V9="Sortable",G9=vt.createContext({activeIndex:-1,containerId:V9,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:H9,disabled:{draggable:!1,droppable:!1}});function dye(e){let{children:t,id:n,items:r,strategy:a=H9,disabled:i=!1}=e;const{active:o,dragOverlay:s,droppableRects:u,over:c,measureDroppableContainers:f}=nye(),h=hg(V9,n),m=s.rect!==null,g=N.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),w=o!=null,v=o?g.indexOf(o.id):-1,_=c?g.indexOf(c.id):-1,x=N.useRef(g),S=!sye(g,x.current),E=_!==-1&&v===-1||S,C=lye(i);Bs(()=>{S&&w&&f(g)},[S,g,w,f]),N.useEffect(()=>{x.current=g},[g]);const A=N.useMemo(()=>({activeIndex:v,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:_,useDragOverlay:m,sortedRects:oye(g,u),strategy:a}),[v,h,C.draggable,C.droppable,E,g,_,u,m,a]);return vt.createElement(G9.Provider,{value:A},t)}const fye=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return oA(n,r,a).indexOf(t)},hye=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:s,previousContainerId:u,transition:c}=e;return!c||!r||s!==i&&a===o?!1:n?!0:o!==a&&t===u},pye={duration:200,easing:"ease"},W9="transform",mye=f0.Transition.toString({property:W9,duration:0,easing:"linear"}),gye={roleDescription:"sortable"};function yye(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=N.useState(null),s=N.useRef(n);return Bs(()=>{if(!t&&n!==s.current&&r.current){const u=a.current;if(u){const c=Uh(r.current,{ignoreTransform:!0}),f={x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height};(f.x||f.y)&&o(f)}}n!==s.current&&(s.current=n)},[t,n,r,a]),N.useEffect(()=>{i&&o(null)},[i]),i}function bye(e){let{animateLayoutChanges:t=hye,attributes:n,disabled:r,data:a,getNewIndex:i=fye,id:o,strategy:s,resizeObserverConfig:u,transition:c=pye}=e;const{items:f,containerId:h,activeIndex:m,disabled:g,disableTransforms:w,sortedRects:v,overIndex:_,useDragOverlay:x,strategy:S}=N.useContext(G9),E=vye(r,g),C=f.indexOf(o),A=N.useMemo(()=>({sortable:{containerId:h,index:C,items:f},...a}),[h,a,C,f]),O=N.useMemo(()=>f.slice(f.indexOf(o)),[f,o]),{rect:I,node:D,isOver:B,setNodeRef:W}=iye({id:o,data:A,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...u}}),{active:Q,activatorEvent:M,activeNodeRect:K,attributes:U,setNodeRef:me,listeners:se,isDragging:ne,over:ee,setActivatorNodeRef:ae,transform:G}=tye({id:o,data:A,attributes:{...gye,...n},disabled:E.draggable}),Y=P0e(W,me),J=!!Q,re=J&&!w&&ib(m)&&ib(_),we=!x&&ne,ke=we&&re?G:null,Pe=re?ke??(s??S)({rects:v,activeNodeRect:K,activeIndex:m,overIndex:_,index:C}):null,Re=ib(m)&&ib(_)?i({id:o,items:f,activeIndex:m,overIndex:_}):C,Ae=Q==null?void 0:Q.id,He=N.useRef({activeId:Ae,items:f,newIndex:Re,containerId:h}),st=f!==He.current.items,Oe=t({active:Q,containerId:h,isDragging:ne,isSorting:J,id:o,index:C,items:f,newIndex:He.current.newIndex,previousItems:He.current.items,previousContainerId:He.current.containerId,transition:c,wasDragging:He.current.activeId!=null}),Te=yye({disabled:!Oe,index:C,node:D,rect:I});return N.useEffect(()=>{J&&He.current.newIndex!==Re&&(He.current.newIndex=Re),h!==He.current.containerId&&(He.current.containerId=h),f!==He.current.items&&(He.current.items=f)},[J,Re,h,f]),N.useEffect(()=>{if(Ae===He.current.activeId)return;if(Ae!=null&&He.current.activeId==null){He.current.activeId=Ae;return}const Ce=setTimeout(()=>{He.current.activeId=Ae},50);return()=>clearTimeout(Ce)},[Ae]),{active:Q,activeIndex:m,attributes:U,data:A,rect:I,index:C,newIndex:Re,items:f,isOver:B,isSorting:J,isDragging:ne,listeners:se,node:D,overIndex:_,over:ee,setNodeRef:Y,setActivatorNodeRef:ae,setDroppableNodeRef:W,setDraggableNodeRef:me,transform:Te??Pe,transition:z()};function z(){if(Te||st&&He.current.newIndex===C)return mye;if(!(we&&!tA(M)||!c)&&(J||Oe))return f0.Transition.toString({...c,property:W9})}}function vye(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function jv(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const wye=[Vn.Down,Vn.Right,Vn.Up,Vn.Left],_ye=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:s}}=t;if(wye.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=a.get(h.id);if(m)switch(e.code){case Vn.Down:r.top<m.top&&u.push(h);break;case Vn.Up:r.top>m.top&&u.push(h);break;case Vn.Left:r.left>m.left&&u.push(h);break;case Vn.Right:r.left<m.left&&u.push(h);break}});const c=Q0e({collisionRect:r,droppableRects:a,droppableContainers:u});let f=I9(c,"id");if(f===(o==null?void 0:o.id)&&c.length>1&&(f=c[1].id),f!=null){const h=i.get(n.id),m=i.get(f),g=m?a.get(m.id):null,w=m==null?void 0:m.node.current;if(w&&g&&h&&m){const _=u1(w).some((O,I)=>s[I]!==O),x=K9(h,m),S=xye(h,m),E=_||!x?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:d0(C,E)}}}};function K9(e,t){return!jv(e)||!jv(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function xye(e,t){return!jv(e)||!jv(t)||!K9(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Sye=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:o,transition:s,isDragging:u}=bye({id:e,disabled:n}),c={transform:f0.Transform.toString(o),transition:s,zIndex:u?10:void 0,opacity:n?.5:1};return y.jsxs("div",{ref:i,style:c,...r,...a,className:Mt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",u&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[y.jsx(uq,{className:Mt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),y.jsx(qn,{className:Mt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},Eye=()=>{const{setGlobalModelSortOrder:e,getGloballyEnabledAndOrderedModels:t,dbProviderConfigs:n,globalModelSortOrder:r,isLoading:a}=ki(Hn(m=>({setGlobalModelSortOrder:m.setGlobalModelSortOrder,getGloballyEnabledAndOrderedModels:m.getGloballyEnabledAndOrderedModels,dbProviderConfigs:m.dbProviderConfigs,globalModelSortOrder:m.globalModelSortOrder,isLoading:m.isLoading}))),[i,o]=N.useState(""),s=N.useMemo(()=>t?t():[],[t,n,r]),u=N.useMemo(()=>{if(!i.trim())return s;const m=i.toLowerCase();return s.filter(g=>g.name.toLowerCase().includes(m)||g.providerName.toLowerCase().includes(m)||g.id.toLowerCase().includes(m))},[s,i]),c=N.useMemo(()=>u.map(m=>m.id),[u]),f=N.useCallback(m=>{const{active:g,over:w}=m;if(w&&g.id!==w.id){const v=s.map(C=>C.id),_=g.id,x=w.id,S=v.indexOf(_),E=v.indexOf(x);if(S!==-1&&E!==-1){const C=oA(v,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[s,e]),h=Y0e(D6(iA),D6(rA,{coordinateGetter:_ye}));return a?y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx(Mr,{className:"h-8 w-1/3"}),y.jsx(Mr,{className:"h-6 w-1/2"}),y.jsx(Mr,{className:"h-64 w-full"})]}):y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),y.jsx(Nv,{}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(qn,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),y.jsxs("div",{className:"relative",children:[y.jsx(rC,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(Rr,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:m=>o(m.target.value),className:"pl-8 w-full",disabled:a})]}),y.jsx($w,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:u.length>0?y.jsx(Jge,{sensors:h,collisionDetection:J0e,onDragEnd:f,children:y.jsx(dye,{items:c,strategy:uye,children:u.map(m=>y.jsx(Sye,{id:m.id,name:`${m.name} (${m.providerName})`},m.id))})}):y.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},Cye=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=Ta(Hn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Git User Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Set your user name and email for Git commits made within the VFS. This is required for committing changes."}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 rounded-lg border p-4 shadow-sm bg-card",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(qn,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(Rr,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(qn,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(Rr,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})]})})},kye=vt.memo(Cye),Aye=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,isLoading:a}=zo(Hn(A=>({syncRepos:A.syncRepos,addSyncRepo:A.addSyncRepo,updateSyncRepo:A.updateSyncRepo,deleteSyncRepo:A.deleteSyncRepo,isLoading:A.isLoading}))),[i,o]=N.useState(!1),[s,u]=N.useState(null),[c,f]=N.useState({name:"",remoteUrl:"",branch:"main"}),[h,m]=N.useState(!1),[g,w]=N.useState({}),v=N.useCallback(()=>{f({name:"",remoteUrl:"",branch:"main"}),o(!1),u(null),m(!1)},[]),_=N.useCallback((A,O)=>{f(I=>({...I,[A]:O}))},[]),x=N.useCallback(async()=>{var A,O,I,D;if(!((A=c.name)!=null&&A.trim())||!((O=c.remoteUrl)!=null&&O.trim())){ht.error("Repository Name and Remote URL are required.");return}m(!0);try{s?await n(s,{name:c.name.trim(),remoteUrl:c.remoteUrl.trim(),branch:((I=c.branch)==null?void 0:I.trim())||"main"}):await t({name:c.name.trim(),remoteUrl:c.remoteUrl.trim(),branch:((D=c.branch)==null?void 0:D.trim())||"main"}),v()}catch(B){console.error("Failed to save sync repo:",B)}finally{m(!1)}},[c,s,t,n,v]),S=A=>{u(A.id),f({name:A.name,remoteUrl:A.remoteUrl,branch:A.branch}),o(!1)},E=N.useCallback(async(A,O)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${O}"? This will unlink it from any conversations.`)){w(I=>({...I,[A]:!0}));try{await r(A),s===A&&v()}catch(I){console.error("Failed to delete sync repo:",I)}finally{w(I=>({...I,[A]:!1}))}}},[r,s,v]),C=()=>{var A,O;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:s?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(qn,{htmlFor:"repo-name",children:"Name"}),y.jsx(Rr,{id:"repo-name",value:c.name||"",onChange:I=>_("name",I.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:h})]}),y.jsxs("div",{children:[y.jsx(qn,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(Rr,{id:"repo-url",type:"url",value:c.remoteUrl||"",onChange:I=>_("remoteUrl",I.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:h})]}),y.jsxs("div",{children:[y.jsx(qn,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(Rr,{id:"repo-branch",value:c.branch||"",onChange:I=>_("branch",I.target.value),placeholder:"main",required:!0,className:"mt-1",disabled:h})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Ht,{variant:"ghost",size:"sm",onClick:v,disabled:h,type:"button",children:[y.jsx(zs,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Ht,{variant:"secondary",size:"sm",onClick:x,disabled:h||!((A=c.name)!=null&&A.trim())||!((O=c.remoteUrl)!=null&&O.trim()),type:"button",children:[h&&y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(nC,{className:"h-4 w-4 mr-1"})," ",h?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area."})]}),!i&&!s&&y.jsxs(Ht,{onClick:()=>o(!0),variant:"outline",className:"w-full mb-4",disabled:a,children:[y.jsx(Vv,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(i||s)&&C(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),a&&!i&&!s?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"}),y.jsx(Mr,{className:"h-10 w-full"})]}):e.length===0&&!i&&!s?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(i1,{children:[y.jsx(o1,{children:y.jsxs(Vi,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Remote URL"}),y.jsx(ia,{children:"Branch"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(s1,{children:e.map(A=>{const O=g[A.id],I=s===A.id;return y.jsxs(Vi,{className:I?"bg-muted/50":"",children:[y.jsx(gr,{className:"font-medium",children:A.name}),y.jsx(gr,{className:"text-xs truncate max-w-xs",children:A.remoteUrl}),y.jsx(gr,{children:A.branch}),y.jsxs(gr,{className:"text-right",children:[y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>S(A),className:"h-8 w-8 mr-1","aria-label":`Edit repo ${A.name}`,disabled:O||h||!!s,children:y.jsx(tC,{className:"h-4 w-4"})}),y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>E(A.id,A.name),className:"text-red-600 hover:text-red-700 h-8 w-8","aria-label":`Delete repo ${A.name}`,disabled:O||h,children:O?y.jsx(Qn,{className:"h-4 w-4 animate-spin"}):y.jsx(zu,{className:"h-4 w-4"})})]})]},A.id)})})]})})]})]})},Tye=vt.memo(Aye),Rye=()=>{const e=Mt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsxs(TE,{defaultValue:"config",className:"flex flex-col h-full",children:[y.jsxs(RE,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(uo,{value:"config",className:e,children:"User Config"}),y.jsx(uo,{value:"sync",className:e,children:"Sync Repositories"})]}),y.jsxs("div",{className:"flex-grow mt-4 overflow-y-auto",children:[y.jsx(co,{value:"config",children:y.jsx(kye,{})}),y.jsx(co,{value:"sync",children:y.jsx(Tye,{})})]})]})},Nye=vt.memo(Rye),Z9=N.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=Ta(Hn(s=>({enableAdvancedSettings:s.enableAdvancedSettings}))),{enableApiKeyManagement:r}=ki(Hn(s=>({enableApiKeyManagement:s.enableApiKeyManagement}))),{customSettingsTabs:a}=l0(Hn(s=>({customSettingsTabs:s.modSettingsTabs||[]}))),i=s=>{s||t()},o=Mt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80");return y.jsx(Hw,{open:e,onOpenChange:i,children:y.jsxs(Vw,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(Gw,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(Kw,{children:"Settings"}),y.jsx(Zw,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsxs(TE,{defaultValue:"general",className:"flex-grow flex flex-col overflow-hidden px-6",children:[y.jsxs(RE,{className:"flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",children:[y.jsx(uo,{value:"general",className:o,children:"General"}),y.jsx(uo,{value:"providers",className:o,children:"Providers & Models"}),n&&y.jsx(uo,{value:"assistant",className:o,children:"Assistant"}),y.jsx(uo,{value:"git",className:o,children:"Git"}),y.jsx(uo,{value:"data",className:o,children:"Data"}),y.jsx(uo,{value:"mods",className:o,children:"Mods"}),a.map(s=>y.jsx(uo,{value:s.id,className:o,children:s.title},s.id))]}),y.jsxs("div",{className:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",children:[y.jsx(co,{value:"general",children:y.jsx(p0e,{})}),y.jsx(co,{value:"providers",className:"flex flex-col data-[state=inactive]:hidden",children:y.jsxs(TE,{defaultValue:"model-order",className:"flex flex-col",children:[y.jsxs(RE,{className:"flex-shrink-0 gap-1 p-1",children:[y.jsx(uo,{value:"model-order",className:o,children:"Global Model Order"}),y.jsx(uo,{value:"provider-list",className:o,children:"Provider List & Config"}),r&&y.jsx(uo,{value:"api-keys",className:o,children:"API Keys"})]}),y.jsxs("div",{className:"mt-4",children:[y.jsx(co,{value:"model-order",children:y.jsx(Eye,{})}),y.jsx(co,{value:"provider-list",children:y.jsx(M0e,{})}),r&&y.jsx(co,{value:"api-keys",children:y.jsx(b0e,{})})]})]})}),n&&y.jsx(co,{value:"assistant",children:y.jsx(g0e,{})}),y.jsx(co,{value:"git",className:"h-full",children:y.jsx(Nye,{})}),y.jsx(co,{value:"data",children:y.jsx(w0e,{})}),y.jsx(co,{value:"mods",children:y.jsx(k0e,{})}),a.map(s=>y.jsx(co,{value:s.id,children:vt.isValidElement(s.component)?s.component:typeof s.component=="function"?y.jsx(s.component,{}):null},s.id))]})]}),y.jsx(Ww,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Ht,{variant:"outline",onClick:()=>i(!1),children:"Close"})})]})})});Z9.displayName="SettingsModalComponent";const Iye=Z9,Oye=()=>{const e=Uo(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(Ht,{variant:"ghost",size:"icon",onClick:t,"aria-label":"Open Settings",className:"h-8 w-8",children:y.jsx(RO,{className:"h-4 w-4"})})},Dye=()=>{const e=Uo(n=>n.toggleChatControlPanel),t=()=>{e("settingsModal")};return y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:t,className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(RO,{className:"h-4 w-4"})})}),y.jsx(On,{side:"right",children:"Settings"})]})})},jye=()=>{const e=Ri(r=>r.registerChatControl),{isModalOpen:t,toggleModal:n}=Uo(Hn(r=>({isModalOpen:r.isChatControlPanelOpen.settingsModal??!1,toggleModal:r.toggleChatControlPanel})));return vt.useEffect(()=>e({id:"core-settings-trigger",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(Oye,{}),iconRenderer:()=>y.jsx(Dye,{}),show:()=>!0,order:100,settingsConfig:{tabId:"mainSettingsModal",title:"Settings"},settingsRenderer:()=>t?y.jsx(Iye,{isOpen:t,onClose:()=>n("settingsModal",!1)}):null}),[e,t,n]),null},Y9=({isCollapsed:e,onClick:t})=>y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>t(),className:"h-8 w-8","aria-label":e?"Open sidebar":"Close sidebar",children:e?y.jsx(Cq,{className:"h-4 w-4"}):y.jsx(Sq,{className:"h-4 w-4"})}),Mye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=Uo(Hn(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(Y9,{isCollapsed:e,onClick:t})},Pye=()=>{const{isSidebarCollapsed:e,toggleSidebar:t}=Uo(Hn(n=>({isSidebarCollapsed:n.isSidebarCollapsed,toggleSidebar:n.toggleSidebar})));return y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Y9,{isCollapsed:e,onClick:t})}),y.jsx(On,{side:"right",children:e?"Open Sidebar":"Close Sidebar"})]})})},Fye=()=>{const e=Ri(t=>t.registerChatControl);return vt.useEffect(()=>e({id:"core-sidebar-toggle",status:()=>"ready",panel:"sidebar-footer",renderer:()=>y.jsx(Mye,{}),iconRenderer:()=>y.jsx(Pye,{}),show:()=>!0,order:10}),[e]),null};var G6=1,Lye=.9,$ye=.8,Bye=.17,b2=.1,v2=.999,zye=.9999,Uye=.99,qye=/[\\\/_+.#"@\[\(\{&]/,Hye=/[\\\/_+.#"@\[\(\{&]/g,Vye=/[\s-]/,X9=/[\s-]/g;function qE(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?G6:Uye;var s=`${a},${i}`;if(o[s]!==void 0)return o[s];for(var u=r.charAt(i),c=n.indexOf(u,a),f=0,h,m,g,w;c>=0;)h=qE(e,t,n,r,c+1,i+1,o),h>f&&(c===a?h*=G6:qye.test(e.charAt(c-1))?(h*=$ye,g=e.slice(a,c-1).match(Hye),g&&a>0&&(h*=Math.pow(v2,g.length))):Vye.test(e.charAt(c-1))?(h*=Lye,w=e.slice(a,c-1).match(X9),w&&a>0&&(h*=Math.pow(v2,w.length))):(h*=Bye,a>0&&(h*=Math.pow(v2,c-a))),e.charAt(c)!==t.charAt(i)&&(h*=zye)),(h<b2&&n.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(c-1)!==r.charAt(i))&&(m=qE(e,t,n,r,c+1,i+2,o),m*b2>h&&(h=m*b2)),h>f&&(f=h),c=n.indexOf(u,c+1);return o[s]=f,f}function W6(e){return e.toLowerCase().replace(X9," ")}function Gye(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,qE(e,t,W6(e),W6(t),0,0,{})}var im='[cmdk-group=""]',w2='[cmdk-group-items=""]',Wye='[cmdk-group-heading=""]',J9='[cmdk-item=""]',K6=`${J9}:not([aria-disabled="true"])`,HE="cmdk-item-select",Of="data-value",Kye=(e,t,n)=>Gye(e,t,n),Q9=N.createContext(void 0),pg=()=>N.useContext(Q9),e$=N.createContext(void 0),sA=()=>N.useContext(e$),t$=N.createContext(void 0),n$=N.forwardRef((e,t)=>{let n=Df(()=>{var J,re;return{search:"",value:(re=(J=e.value)!=null?J:e.defaultValue)!=null?re:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Df(()=>new Set),a=Df(()=>new Map),i=Df(()=>new Map),o=Df(()=>new Set),s=r$(e),{label:u,children:c,value:f,onValueChange:h,filter:m,shouldFilter:g,loop:w,disablePointerSelection:v=!1,vimBindings:_=!0,...x}=e,S=ka(),E=ka(),C=ka(),A=N.useRef(null),O=ibe();gd(()=>{if(f!==void 0){let J=f.trim();n.current.value=J,I.emit()}},[f]),gd(()=>{O(6,K)},[]);let I=N.useMemo(()=>({subscribe:J=>(o.current.add(J),()=>o.current.delete(J)),snapshot:()=>n.current,setState:(J,re,we)=>{var ke,Me,Pe,Re;if(!Object.is(n.current[J],re)){if(n.current[J]=re,J==="search")M(),W(),O(1,Q);else if(J==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ae=document.getElementById(C);Ae?Ae.focus():(ke=document.getElementById(S))==null||ke.focus()}if(O(7,()=>{var Ae;n.current.selectedItemId=(Ae=U())==null?void 0:Ae.id,I.emit()}),we||O(5,K),((Me=s.current)==null?void 0:Me.value)!==void 0){let Ae=re??"";(Re=(Pe=s.current).onValueChange)==null||Re.call(Pe,Ae);return}}I.emit()}},emit:()=>{o.current.forEach(J=>J())}}),[]),D=N.useMemo(()=>({value:(J,re,we)=>{var ke;re!==((ke=i.current.get(J))==null?void 0:ke.value)&&(i.current.set(J,{value:re,keywords:we}),n.current.filtered.items.set(J,B(re,we)),O(2,()=>{W(),I.emit()}))},item:(J,re)=>(r.current.add(J),re&&(a.current.has(re)?a.current.get(re).add(J):a.current.set(re,new Set([J]))),O(3,()=>{M(),W(),n.current.value||Q(),I.emit()}),()=>{i.current.delete(J),r.current.delete(J),n.current.filtered.items.delete(J);let we=U();O(4,()=>{M(),(we==null?void 0:we.getAttribute("id"))===J&&Q(),I.emit()})}),group:J=>(a.current.has(J)||a.current.set(J,new Set),()=>{i.current.delete(J),a.current.delete(J)}),filter:()=>s.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:A}),[]);function B(J,re){var we,ke;let Me=(ke=(we=s.current)==null?void 0:we.filter)!=null?ke:Kye;return J?Me(J,n.current.search,re):0}function W(){if(!n.current.search||s.current.shouldFilter===!1)return;let J=n.current.filtered.items,re=[];n.current.filtered.groups.forEach(ke=>{let Me=a.current.get(ke),Pe=0;Me.forEach(Re=>{let Ae=J.get(Re);Pe=Math.max(Ae,Pe)}),re.push([ke,Pe])});let we=A.current;me().sort((ke,Me)=>{var Pe,Re;let Ae=ke.getAttribute("id"),He=Me.getAttribute("id");return((Pe=J.get(He))!=null?Pe:0)-((Re=J.get(Ae))!=null?Re:0)}).forEach(ke=>{let Me=ke.closest(w2);Me?Me.appendChild(ke.parentElement===Me?ke:ke.closest(`${w2} > *`)):we.appendChild(ke.parentElement===we?ke:ke.closest(`${w2} > *`))}),re.sort((ke,Me)=>Me[1]-ke[1]).forEach(ke=>{var Me;let Pe=(Me=A.current)==null?void 0:Me.querySelector(`${im}[${Of}="${encodeURIComponent(ke[0])}"]`);Pe==null||Pe.parentElement.appendChild(Pe)})}function Q(){let J=me().find(we=>we.getAttribute("aria-disabled")!=="true"),re=J==null?void 0:J.getAttribute(Of);I.setState("value",re||void 0)}function M(){var J,re,we,ke;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Me=0;for(let Pe of r.current){let Re=(re=(J=i.current.get(Pe))==null?void 0:J.value)!=null?re:"",Ae=(ke=(we=i.current.get(Pe))==null?void 0:we.keywords)!=null?ke:[],He=B(Re,Ae);n.current.filtered.items.set(Pe,He),He>0&&Me++}for(let[Pe,Re]of a.current)for(let Ae of Re)if(n.current.filtered.items.get(Ae)>0){n.current.filtered.groups.add(Pe);break}n.current.filtered.count=Me}function K(){var J,re,we;let ke=U();ke&&(((J=ke.parentElement)==null?void 0:J.firstChild)===ke&&((we=(re=ke.closest(im))==null?void 0:re.querySelector(Wye))==null||we.scrollIntoView({block:"nearest"})),ke.scrollIntoView({block:"nearest"}))}function U(){var J;return(J=A.current)==null?void 0:J.querySelector(`${J9}[aria-selected="true"]`)}function me(){var J;return Array.from(((J=A.current)==null?void 0:J.querySelectorAll(K6))||[])}function se(J){let re=me()[J];re&&I.setState("value",re.getAttribute(Of))}function ne(J){var re;let we=U(),ke=me(),Me=ke.findIndex(Re=>Re===we),Pe=ke[Me+J];(re=s.current)!=null&&re.loop&&(Pe=Me+J<0?ke[ke.length-1]:Me+J===ke.length?ke[0]:ke[Me+J]),Pe&&I.setState("value",Pe.getAttribute(Of))}function ee(J){let re=U(),we=re==null?void 0:re.closest(im),ke;for(;we&&!ke;)we=J>0?rbe(we,im):abe(we,im),ke=we==null?void 0:we.querySelector(K6);ke?I.setState("value",ke.getAttribute(Of)):ne(J)}let ae=()=>se(me().length-1),G=J=>{J.preventDefault(),J.metaKey?ae():J.altKey?ee(1):ne(1)},Y=J=>{J.preventDefault(),J.metaKey?se(0):J.altKey?ee(-1):ne(-1)};return N.createElement(Jt.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:J=>{var re;(re=x.onKeyDown)==null||re.call(x,J);let we=J.nativeEvent.isComposing||J.keyCode===229;if(!(J.defaultPrevented||we))switch(J.key){case"n":case"j":{_&&J.ctrlKey&&G(J);break}case"ArrowDown":{G(J);break}case"p":case"k":{_&&J.ctrlKey&&Y(J);break}case"ArrowUp":{Y(J);break}case"Home":{J.preventDefault(),se(0);break}case"End":{J.preventDefault(),ae();break}case"Enter":{J.preventDefault();let ke=U();if(ke){let Me=new Event(HE);ke.dispatchEvent(Me)}}}}},N.createElement("label",{"cmdk-label":"",htmlFor:D.inputId,id:D.labelId,style:sbe},u),f1(e,J=>N.createElement(e$.Provider,{value:I},N.createElement(Q9.Provider,{value:D},J))))}),Zye=N.forwardRef((e,t)=>{var n,r;let a=ka(),i=N.useRef(null),o=N.useContext(t$),s=pg(),u=r$(e),c=(r=(n=u.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;gd(()=>{if(!c)return s.item(a,o==null?void 0:o.id)},[c]);let f=a$(a,i,[e.value,e.children,i],e.keywords),h=sA(),m=sc(O=>O.value&&O.value===f.current),g=sc(O=>c||s.filter()===!1?!0:O.search?O.filtered.items.get(a)>0:!0);N.useEffect(()=>{let O=i.current;if(!(!O||e.disabled))return O.addEventListener(HE,w),()=>O.removeEventListener(HE,w)},[g,e.onSelect,e.disabled]);function w(){var O,I;v(),(I=(O=u.current).onSelect)==null||I.call(O,f.current)}function v(){h.setState("value",f.current,!0)}if(!g)return null;let{disabled:_,value:x,onSelect:S,forceMount:E,keywords:C,...A}=e;return N.createElement(Jt.div,{ref:Il(i,t),...A,id:a,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!m,"data-disabled":!!_,"data-selected":!!m,onPointerMove:_||s.getDisablePointerSelection()?void 0:v,onClick:_?void 0:w},e.children)}),Yye=N.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=ka(),s=N.useRef(null),u=N.useRef(null),c=ka(),f=pg(),h=sc(g=>a||f.filter()===!1?!0:g.search?g.filtered.groups.has(o):!0);gd(()=>f.group(o),[]),a$(o,s,[e.value,e.heading,u]);let m=N.useMemo(()=>({id:o,forceMount:a}),[a]);return N.createElement(Jt.div,{ref:Il(s,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&N.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),f1(e,g=>N.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},N.createElement(t$.Provider,{value:m},g))))}),Xye=N.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=N.useRef(null),i=sc(o=>!o.search);return!n&&!i?null:N.createElement(Jt.div,{ref:Il(a,t),...r,"cmdk-separator":"",role:"separator"})}),Jye=N.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=sA(),o=sc(c=>c.search),s=sc(c=>c.selectedItemId),u=pg();return N.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),N.createElement(Jt.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":s,id:u.inputId,type:"text",value:a?e.value:o,onChange:c=>{a||i.setState("search",c.target.value),n==null||n(c.target.value)}})}),Qye=N.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=N.useRef(null),o=N.useRef(null),s=sc(c=>c.selectedItemId),u=pg();return N.useEffect(()=>{if(o.current&&i.current){let c=o.current,f=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;f.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return m.observe(c),()=>{cancelAnimationFrame(h),m.unobserve(c)}}},[]),N.createElement(Jt.div,{ref:Il(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:u.listId},f1(e,c=>N.createElement("div",{ref:Il(o,u.listInnerRef),"cmdk-list-sizer":""},c)))}),ebe=N.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...s}=e;return N.createElement(uL,{open:n,onOpenChange:r},N.createElement(cL,{container:o},N.createElement(dL,{"cmdk-overlay":"",className:a}),N.createElement(fL,{"aria-label":e.label,"cmdk-dialog":"",className:i},N.createElement(n$,{ref:t,...s}))))}),tbe=N.forwardRef((e,t)=>sc(n=>n.filtered.count===0)?N.createElement(Jt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),nbe=N.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return N.createElement(Jt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},f1(e,o=>N.createElement("div",{"aria-hidden":!0},o)))}),qh=Object.assign(n$,{List:Qye,Item:Zye,Input:Jye,Group:Yye,Separator:Xye,Dialog:ebe,Empty:tbe,Loading:nbe});function rbe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function abe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function r$(e){let t=N.useRef(e);return gd(()=>{t.current=e}),t}var gd=typeof window>"u"?N.useEffect:N.useLayoutEffect;function Df(e){let t=N.useRef();return t.current===void 0&&(t.current=e()),t}function sc(e){let t=sA(),n=()=>e(t.snapshot());return N.useSyncExternalStore(t.subscribe,n,n)}function a$(e,t,n,r=[]){let a=N.useRef(),i=pg();return gd(()=>{var o;let s=(()=>{var c;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(c=f.current.textContent)==null?void 0:c.trim():a.current}})(),u=r.map(c=>c.trim());i.value(e,s,u),(o=t.current)==null||o.setAttribute(Of,s),a.current=s}),a}var ibe=()=>{let[e,t]=N.useState(),n=Df(()=>new Map);return gd(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function obe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function f1({asChild:e,children:t},n){return e&&N.isValidElement(t)?N.cloneElement(obe(t),{ref:t.ref},n(t.props.children)):n(t)}var sbe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function lbe({className:e,...t}){return y.jsx(qh,{"data-slot":"command",className:Mt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function ube({className:e,...t}){return y.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[y.jsx(rC,{className:"size-4 shrink-0 opacity-50"}),y.jsx(qh.Input,{"data-slot":"command-input",className:Mt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function cbe({className:e,...t}){return y.jsx(qh.List,{"data-slot":"command-list",className:Mt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function dbe({...e}){return y.jsx(qh.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function fbe({className:e,...t}){return y.jsx(qh.Group,{"data-slot":"command-group",className:Mt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function hbe({className:e,...t}){return y.jsx(qh.Item,{"data-slot":"command-item",className:Mt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}var h1="Popover",[i$,j1e]=ci(h1,[lc]),mg=lc(),[pbe,wc]=i$(h1),o$=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=mg(t),u=N.useRef(null),[c,f]=N.useState(!1),[h,m]=Wo({prop:r,defaultProp:a??!1,onChange:i,caller:h1});return y.jsx(Xv,{...s,children:y.jsx(pbe,{scope:t,contentId:ka(),triggerRef:u,open:h,onOpenChange:m,onOpenToggle:N.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:c,onCustomAnchorAdd:N.useCallback(()=>f(!0),[]),onCustomAnchorRemove:N.useCallback(()=>f(!1),[]),modal:o,children:n})})};o$.displayName=h1;var s$="PopoverAnchor",mbe=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=wc(s$,n),i=mg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return N.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(y0,{...i,...r,ref:t})});mbe.displayName=s$;var l$="PopoverTrigger",u$=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=wc(l$,n),i=mg(n),o=_n(t,a.triggerRef),s=y.jsx(Jt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":p$(a.open),...r,ref:o,onClick:Ft(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(y0,{asChild:!0,...i,children:s})});u$.displayName=l$;var lA="PopoverPortal",[gbe,ybe]=i$(lA,{forceMount:void 0}),c$=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=wc(lA,t);return y.jsx(gbe,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(xh,{asChild:!0,container:a,children:r})})})};c$.displayName=lA;var gh="PopoverContent",d$=N.forwardRef((e,t)=>{const n=ybe(gh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=wc(gh,e.__scopePopover);return y.jsx(Na,{present:r||i.open,children:i.modal?y.jsx(vbe,{...a,ref:t}):y.jsx(wbe,{...a,ref:t})})});d$.displayName=gh;var bbe=$u("PopoverContent.RemoveScroll"),vbe=N.forwardRef((e,t)=>{const n=wc(gh,e.__scopePopover),r=N.useRef(null),a=_n(t,r),i=N.useRef(!1);return N.useEffect(()=>{const o=r.current;if(o)return Uw(o)},[]),y.jsx(ig,{as:bbe,allowPinchZoom:!0,children:y.jsx(f$,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ft(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Ft(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,u=s.button===0&&s.ctrlKey===!0,c=s.button===2||u;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:Ft(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),wbe=N.forwardRef((e,t)=>{const n=wc(gh,e.__scopePopover),r=N.useRef(!1),a=N.useRef(!1);return y.jsx(f$,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var u,c;(u=e.onInteractOutside)==null||u.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),f$=N.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onInteractOutside:f,...h}=e,m=wc(gh,n),g=mg(n);return Bw(),y.jsx(ag,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx(vh,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:f,onEscapeKeyDown:s,onPointerDownOutside:u,onFocusOutside:c,onDismiss:()=>m.onOpenChange(!1),children:y.jsx(Jv,{"data-state":p$(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),h$="PopoverClose",_be=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=wc(h$,n);return y.jsx(Jt.button,{type:"button",...r,ref:t,onClick:Ft(e.onClick,()=>a.onOpenChange(!1))})});_be.displayName=h$;var xbe="PopoverArrow",Sbe=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=mg(n);return y.jsx(Qv,{...a,...r,ref:t})});Sbe.displayName=xbe;function p$(e){return e?"open":"closed"}var Ebe=o$,Cbe=u$,kbe=c$,Abe=d$;function m$({...e}){return y.jsx(Ebe,{"data-slot":"popover",...e})}function g$({...e}){return y.jsx(Cbe,{"data-slot":"popover-trigger",...e})}function y$({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(kbe,{children:y.jsx(Abe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function Tbe({options:e,value:t,onChange:n,placeholder:r="Select...",searchPlaceholder:a="Search...",emptyText:i="Nothing found.",triggerClassName:o,contentClassName:s,disabled:u=!1}){var m;const[c,f]=N.useState(!1),h=(m=e.find(g=>g.value===t))==null?void 0:m.label;return y.jsxs(m$,{open:c,onOpenChange:f,children:[y.jsx(g$,{asChild:!0,children:y.jsxs(Ht,{variant:"outline",role:"combobox","aria-expanded":c,className:Mt("w-[200px] justify-between",o),disabled:u,children:[h||r,y.jsx(qv,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),y.jsx(y$,{className:Mt("w-[200px] p-0",s),children:y.jsxs(lbe,{children:[y.jsx(ube,{placeholder:a}),y.jsxs(cbe,{children:[y.jsx(dbe,{children:i}),y.jsx(fbe,{children:e.map(g=>y.jsxs(hbe,{value:g.value,onSelect:w=>{n(w===t?"":w),f(!1)},children:[y.jsx(vo,{className:Mt("mr-2 h-4 w-4",t===g.value?"opacity-100":"opacity-0")}),g.label]},g.value))})]})]})})]})}const Rbe=()=>{const{selectedModelId:e,selectModel:t,getGloballyEnabledAndOrderedModels:n,dbProviderConfigs:r,globalModelSortOrder:a,isLoading:i}=ki(Hn(u=>({selectedModelId:u.selectedModelId,selectModel:u.selectModel,getGloballyEnabledAndOrderedModels:u.getGloballyEnabledAndOrderedModels,dbProviderConfigs:u.dbProviderConfigs,globalModelSortOrder:u.globalModelSortOrder,isLoading:u.isLoading}))),o=N.useMemo(()=>n?n():[],[n,r,a]),s=vt.useMemo(()=>o.map(u=>({value:u.id,label:`${u.name} (${u.providerName})`})),[o]);return i?y.jsx(Mr,{className:"h-10 w-[250px]"}):y.jsx(Tbe,{options:s,value:e??"",onChange:u=>t(u||null),placeholder:"Select Model...",searchPlaceholder:"Search models...",emptyText:"No models enabled.",triggerClassName:"h-10 w-full min-w-[200px] max-w-[300px] text-xs",contentClassName:"w-[--radix-popover-trigger-width]",disabled:i||s.length===0})},Nbe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},Ibe=()=>{const e=Ri(n=>n.registerPromptControl),t=ki(Hn(n=>({isLoading:n.isLoading,selectedModelId:n.selectedModelId})));return vt.useEffect(()=>e({id:"core-global-model-selector",triggerRenderer:()=>y.jsx(Rbe,{}),show:()=>!0,getMetadata:()=>{const a=t.selectedModelId,{providerId:i,modelId:o}=Nbe(a);return{providerId:i,modelId:o}},order:10}),[e,t.isLoading,t.selectedModelId]),null},Obe=({className:e})=>{const{temperature:t,setTemperature:n,topP:r,setTopP:a,maxTokens:i,setMaxTokens:o,topK:s,setTopK:u,presencePenalty:c,setPresencePenalty:f,frequencyPenalty:h,setFrequencyPenalty:m}=Ta(Hn(D=>({temperature:D.temperature,setTemperature:D.setTemperature,topP:D.topP,setTopP:D.setTopP,maxTokens:D.maxTokens,setMaxTokens:D.setMaxTokens,topK:D.topK,setTopK:D.setTopK,presencePenalty:D.presencePenalty,setPresencePenalty:D.setPresencePenalty,frequencyPenalty:D.frequencyPenalty,setFrequencyPenalty:D.setFrequencyPenalty}))),[g,w]=N.useState(t),[v,_]=N.useState(r??1),[x,S]=N.useState(c??0),[E,C]=N.useState(h??0);N.useEffect(()=>w(t),[t]),N.useEffect(()=>_(r??1),[r]),N.useEffect(()=>S(c??0),[c]),N.useEffect(()=>C(h??0),[h]);const A=N.useCallback((D,B)=>{const W=B.target.value,Q=W===""?null:parseInt(W,10);(W===""||!isNaN(Q)&&Q!==null)&&D(Q)},[]),O=N.useCallback((D,B)=>{D(B[0])},[]),I=N.useCallback((D,B)=>{D(B[0])},[]);return y.jsxs("div",{className:Mt("space-y-4 p-4 w-80",e),children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(qn,{htmlFor:"popover-temperature",className:"text-xs",children:["Temperature (",g.toFixed(2),")"]}),y.jsx(Lf,{id:"popover-temperature",min:0,max:1,step:.01,value:[g],onValueChange:D=>O(w,D),onValueCommit:D=>I(n,D)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(qn,{htmlFor:"popover-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),y.jsx(Lf,{id:"popover-top-p",min:0,max:1,step:.01,value:[v],onValueChange:D=>O(_,D),onValueCommit:D=>I(a,D)})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(qn,{htmlFor:"popover-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(Rr,{id:"popover-max-tokens",type:"number",placeholder:"Default",value:i??"",onChange:D=>A(o,D),min:"1",className:"h-8 text-xs"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(qn,{htmlFor:"popover-top-k",className:"text-xs",children:"Top K"}),y.jsx(Rr,{id:"popover-top-k",type:"number",placeholder:"Default",value:s??"",onChange:D=>A(u,D),min:"1",className:"h-8 text-xs"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(qn,{htmlFor:"popover-presence-penalty",className:"text-xs",children:["Presence Penalty (",x.toFixed(2),")"]}),y.jsx(Lf,{id:"popover-presence-penalty",min:-2,max:2,step:.01,value:[x],onValueChange:D=>O(S,D),onValueCommit:D=>I(f,D)})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(qn,{htmlFor:"popover-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",E.toFixed(2),")"]}),y.jsx(Lf,{id:"popover-frequency-penalty",min:-2,max:2,step:.01,value:[E],onValueChange:D=>O(C,D),onValueCommit:D=>I(m,D)})]})]})},Dbe=()=>{const e=Ri(u=>u.registerPromptControl),{enableAdvancedSettings:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s}=Ta(Hn(u=>({enableAdvancedSettings:u.enableAdvancedSettings,temperature:u.temperature,maxTokens:u.maxTokens,topP:u.topP,topK:u.topK,presencePenalty:u.presencePenalty,frequencyPenalty:u.frequencyPenalty})));return vt.useEffect(()=>e({id:"core-parameter-control",triggerRenderer:()=>y.jsxs(m$,{children:[y.jsx(g$,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full","aria-label":"Adjust AI Parameters",children:y.jsx(zq,{className:"h-5 w-5"})})}),y.jsx(y$,{className:"w-auto p-0",side:"top",align:"end",children:y.jsx(Obe,{})})]}),show:()=>t,getParameters:()=>{const f=Ta.getState(),h={};return f.temperature!==.7&&(h.temperature=f.temperature),f.maxTokens!==null&&(h.max_tokens=f.maxTokens),f.topP!==null&&(h.top_p=f.topP),f.topK!==null&&(h.top_k=f.topK),f.presencePenalty!==0&&(h.presence_penalty=f.presencePenalty),f.frequencyPenalty!==0&&(h.frequency_penalty=f.frequencyPenalty),Object.keys(h).length>0?h:void 0},order:20}),[e,t,n,r,a,i,o,s]),null},b$=[".txt",".md",".json",".js",".ts",".jsx",".tsx",".html",".css",".py",".java",".c",".cpp",".h",".cs",".go",".php",".rb",".swift",".kt",".rs",".toml",".yaml",".yml",".xml",".sh",".bat",".ps1"],jbe=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{if(typeof r.result=="string"){const a=r.result.split(",")[1];a?t(a):n(new Error("Failed to extract base64 content from data URL."))}else n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsDataURL(e)}),Mbe=e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{typeof r.result=="string"?t(r.result):n(new Error("FileReader result is not a string."))},r.onerror=a=>n(a),r.readAsText(e)}),Pbe=()=>{const e=Ri(i=>i.registerPromptControl),t=kb(i=>i.addAttachedFile),n=N.useRef(null),r=N.useCallback(()=>{var i;(i=n.current)==null||i.click()},[]),a=N.useCallback(async i=>{const o=i.target.files;if(o){const s=Array.from(o).map(async u=>{try{const c=u.type||"application/octet-stream",f=u.name.toLowerCase();if(c.startsWith("text/")||c==="application/json"||b$.some(m=>f.endsWith(m))){const m=await Mbe(u);t({source:"direct",name:u.name,type:c,size:u.size,contentText:m})}else{const m=await jbe(u);t({source:"direct",name:u.name,type:c,size:u.size,contentBase64:m})}}catch(c){console.error(`Error reading file ${u.name}:`,c),ht.error(`Failed to read file "${u.name}": ${c instanceof Error?c.message:"Unknown error"}`)}});await Promise.all(s),i.target&&(i.target.value="")}},[t]);return vt.useEffect(()=>e({id:"core-file-control",triggerRenderer:()=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:n,onChange:a,className:"hidden",multiple:!0}),y.jsx(Ht,{type:"button",variant:"ghost",size:"icon",onClick:r,className:"h-10 w-10 rounded-full","aria-label":"Attach file(s)",children:y.jsx(Aq,{className:"h-5 w-5"})})]}),show:()=>!0,order:30}),[e,t,r,a]),null},Qc=Bl(zl((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,isVfsEnabledForItem:!1,vfsKey:null,configuredVfsKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,n&&ht.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(u=>u.parentId===a).map(u=>u.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1})},setIsVfsEnabledForItem:n=>{console.log(`[VfsStore] Setting isVfsEnabledForItem to: ${n}`),e({isVfsEnabledForItem:n}),n?t().initializeVFS(t().vfsKey||"default_fallback_key"):(t().clearSelection(),t().vfsKey===t().configuredVfsKey&&e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}))},setVfsKey:n=>{const r=t().configuredVfsKey;console.log(`[VfsStore] Setting vfsKey to: ${n} (Current configured: ${r})`),e({vfsKey:n}),n!==r?(console.log("[VfsStore] vfsKey changed. Resetting VFS state."),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1}),t().initializeVFS(n||"default_fallback_key")):n===r&&!t().fs&&(console.log("[VfsStore] vfsKey matches configured key, but fs not ready. Retrying initialization."),t().initializeVFS(n||"default_fallback_key"))},setConfiguredVfsKey:n=>{e({configuredVfsKey:n})},initializeVFS:async(n=t().vfsKey||"default_fallback_key")=>{if(!n){console.warn("[VfsStore] initializeVFS called without a valid vfsKey.");return}if(t().configuredVfsKey===n&&t().fs||t().loading){console.log(`[VfsStore] Initialization skipped for key "${n}" (already initialized or loading).`);return}const{_setLoading:r,_setError:a,_addNodes:i,_setFsInstance:o,setConfiguredVfsKey:s}=t();r(!0),a(null),o(null);try{const u=await Ine(n);if(!u)throw new Error("Filesystem backend initialization failed.");o(u),s(n);const c="vfs-root";let f=t().nodes[c];try{await u.promises.stat("/")}catch(h){if(h.code!=="ENOENT")throw h}if(!f||f.path!=="/"){const h=Date.now();f={id:c,parentId:null,name:"",path:"/",type:"folder",createdAt:h,lastModified:h},i([f])}e(h=>{h.rootId=f.id,h.currentParentId=f.id}),await t().fetchNodes(f.id)}catch(u){console.error("Failed to initialize VFS:",u),a("Failed to initialize VFS."),o(null),s(null)}finally{r(!1)}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:u}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/",h=await z8(f),m=n??u??"",g=new Set(h.map(_=>_.path)),w=Object.values(s).filter(_=>_.parentId===n&&!g.has(_.path)).map(_=>_.id);w.length>0&&t()._removeNodes(w);const v=h.map(_=>{const x=Object.values(s).find(E=>E.path===_.path),S=Date.now();return{id:(x==null?void 0:x.id)||Mo(),parentId:n,name:_.name,path:_.path,type:_.isDirectory?"folder":"file",size:_.size,createdAt:(x==null?void 0:x.createdAt)??S,lastModified:_.lastModified.getTime(),mimeType:_.isDirectory?void 0:_.mimeType}});i(v),e(_=>{const x=v.map(S=>S.id);(!_.childrenMap[m]||JSON.stringify(_.childrenMap[m].sort())!==JSON.stringify(x.sort()))&&(_.childrenMap[m]=x)})}catch(c){console.error("Failed to fetch VFS nodes:",c),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=vr(n);if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i}=t(),o=vr(n),s=r(o);s&&s.type==="folder"?(e(u=>{u.currentParentId=s.id}),t().childrenMap[s.id]||await a(s.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u,_addNodes:c}=t();if(!o){i("Filesystem not initialized.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const f=n?s[n]:s[u||""],h=f?f.path:"/",m=Eb(h,r.trim());try{throw await o.promises.stat(m),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await Dne(m);const g=Date.now(),v={id:Mo(),parentId:n,name:r.trim(),path:m,type:"folder",createdAt:g,lastModified:g};c([v])}catch(f){console.error("Failed to create directory:",f),i(f.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:u}=t();if(!o){i("Filesystem not initialized.");return}a(!0);try{const c=n?s[n]:s[u||""],f=c?c.path:"/";await U8(Array.from(r),f),await t().fetchNodes(n)}catch(c){console.error("Failed to upload files:",c),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o}=t();if(!o){a("Filesystem not initialized.");return}r(!0);try{for(const s of n){const u=t().nodes[s];u&&await One(u.path,u.type==="folder")}i(n)}catch(s){console.error("Failed to delete nodes:",s),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:u,rootId:c}=t();if(!u){i("Filesystem not initialized.");return}if(!r.trim()){i("Name cannot be empty.");return}const f=s[n];if(!f){i("Item not found.");return}if(f.name!==r.trim()){a(!0);try{const h=f.parentId?s[f.parentId]:s[c||""],m=h?h.path:"/",g=Eb(m,r.trim());try{throw await u.promises.stat(g),new Error(`"${r.trim()}" already exists.`)}catch(v){if(v.code!=="ENOENT")throw v}await Pne(f.path,g);const w={name:r.trim(),path:g,lastModified:Date.now()};o(n,w),await t().fetchNodes(f.parentId)}catch(h){console.error("Failed to rename item:",h),i(h.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i}=t();if(!a)return i("Filesystem not initialized."),null;const o=r[n];if(!o||o.type!=="file")return i("File not found."),null;try{const s=await eg(o.path),u=o.mimeType||"application/octet-stream",c=new Blob([s],{type:u});return{name:o.name,blob:c}}catch(s){return console.error("Failed to download file:",s),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),Fbe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Vi,{className:"bg-muted/30",children:[y.jsx(gr,{className:"px-2 py-1"}),y.jsx(gr,{className:"px-2 py-1",children:y.jsx(Hv,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(gr,{className:"py-1 px-2",colSpan:3,children:y.jsx(Rr,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(gr,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Qn,{className:"h-4 w-4 animate-spin"}):y.jsx(vo,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Create (Enter)"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(zs,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var p1="Checkbox",[Lbe,M1e]=ci(p1),[$be,Bbe]=Lbe(p1),v$=N.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:u="on",onCheckedChange:c,form:f,...h}=e,[m,g]=N.useState(null),w=_n(t,C=>g(C)),v=N.useRef(!1),_=m?f||!!m.closest("form"):!0,[x,S]=Wo({prop:a,defaultProp:i??!1,onChange:c,caller:p1}),E=N.useRef(x);return N.useEffect(()=>{const C=m==null?void 0:m.form;if(C){const A=()=>S(E.current);return C.addEventListener("reset",A),()=>C.removeEventListener("reset",A)}},[m,S]),y.jsxs($be,{scope:n,state:x,disabled:s,children:[y.jsx(Jt.button,{type:"button",role:"checkbox","aria-checked":Lu(x)?"mixed":x,"aria-required":o,"data-state":S$(x),"data-disabled":s?"":void 0,disabled:s,value:u,...h,ref:w,onKeyDown:Ft(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:Ft(e.onClick,C=>{S(A=>Lu(A)?!0:!A),_&&(v.current=C.isPropagationStopped(),v.current||C.stopPropagation())})}),_&&y.jsx(x$,{control:m,bubbles:!v.current,name:r,value:u,checked:x,required:o,disabled:s,form:f,style:{transform:"translateX(-100%)"},defaultChecked:Lu(i)?!1:i})]})});v$.displayName=p1;var w$="CheckboxIndicator",_$=N.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Bbe(w$,n);return y.jsx(Na,{present:r||Lu(i.state)||i.state===!0,children:y.jsx(Jt.span,{"data-state":S$(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});_$.displayName=w$;var zbe="CheckboxBubbleInput",x$=N.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=N.useRef(null),u=_n(s,o),c=Qw(n),f=Yv(t);N.useEffect(()=>{const m=s.current;if(!m)return;const g=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(g,"checked").set;if(c!==n&&v){const _=new Event("click",{bubbles:r});m.indeterminate=Lu(n),v.call(m,Lu(n)?!1:n),m.dispatchEvent(_)}},[c,n,r]);const h=N.useRef(Lu(n)?!1:n);return y.jsx(Jt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:u,style:{...i.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});x$.displayName=zbe;function Lu(e){return e==="indeterminate"}function S$(e){return Lu(e)?"indeterminate":e?"checked":"unchecked"}var Ube=v$,qbe=_$;function Hbe({className:e,...t}){return y.jsx(Ube,{"data-slot":"checkbox",className:Mt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(qbe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(vo,{className:"size-3.5"})})})}var VE=["Enter"," "],Vbe=["ArrowDown","PageUp","Home"],E$=["ArrowUp","PageDown","End"],Gbe=[...Vbe,...E$],Wbe={ltr:[...VE,"ArrowRight"],rtl:[...VE,"ArrowLeft"]},Kbe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gg="Menu",[p0,Zbe,Ybe]=Yw(gg),[Rd,m1]=ci(gg,[Ybe,lc,Xw]),g1=lc(),C$=Xw(),[Xbe,Nd]=Rd(gg),[Jbe,yg]=Rd(gg),k$=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=g1(t),[u,c]=N.useState(null),f=N.useRef(!1),h=Ea(i),m=Fh(a);return N.useEffect(()=>{const g=()=>{f.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>f.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),y.jsx(Xv,{...s,children:y.jsx(Xbe,{scope:t,open:n,onOpenChange:h,content:u,onContentChange:c,children:y.jsx(Jbe,{scope:t,onClose:N.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:m,modal:o,children:r})})})};k$.displayName=gg;var Qbe="MenuAnchor",uA=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=g1(n);return y.jsx(y0,{...a,...r,ref:t})});uA.displayName=Qbe;var cA="MenuPortal",[eve,A$]=Rd(cA,{forceMount:void 0}),T$=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Nd(cA,t);return y.jsx(eve,{scope:t,forceMount:n,children:y.jsx(Na,{present:n||i.open,children:y.jsx(xh,{asChild:!0,container:a,children:r})})})};T$.displayName=cA;var bo="MenuContent",[tve,dA]=Rd(bo),R$=N.forwardRef((e,t)=>{const n=A$(bo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Nd(bo,e.__scopeMenu),o=yg(bo,e.__scopeMenu);return y.jsx(p0.Provider,{scope:e.__scopeMenu,children:y.jsx(Na,{present:r||i.open,children:y.jsx(p0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(nve,{...a,ref:t}):y.jsx(rve,{...a,ref:t})})})})}),nve=N.forwardRef((e,t)=>{const n=Nd(bo,e.__scopeMenu),r=N.useRef(null),a=_n(t,r);return N.useEffect(()=>{const i=r.current;if(i)return Uw(i)},[]),y.jsx(fA,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ft(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),rve=N.forwardRef((e,t)=>{const n=Nd(bo,e.__scopeMenu);return y.jsx(fA,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),ave=$u("MenuContent.ScrollLock"),fA=N.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:u,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:w,...v}=e,_=Nd(bo,n),x=yg(bo,n),S=g1(n),E=C$(n),C=Zbe(n),[A,O]=N.useState(null),I=N.useRef(null),D=_n(t,I,_.onContentChange),B=N.useRef(0),W=N.useRef(""),Q=N.useRef(0),M=N.useRef(null),K=N.useRef("right"),U=N.useRef(0),me=w?ig:N.Fragment,se=w?{as:ave,allowPinchZoom:!0}:void 0,ne=ae=>{var Pe,Re;const G=W.current+ae,Y=C().filter(Ae=>!Ae.disabled),J=document.activeElement,re=(Pe=Y.find(Ae=>Ae.ref.current===J))==null?void 0:Pe.textValue,we=Y.map(Ae=>Ae.textValue),ke=gve(we,G,re),Me=(Re=Y.find(Ae=>Ae.textValue===ke))==null?void 0:Re.ref.current;(function Ae(He){W.current=He,window.clearTimeout(B.current),He!==""&&(B.current=window.setTimeout(()=>Ae(""),1e3))})(G),Me&&setTimeout(()=>Me.focus())};N.useEffect(()=>()=>window.clearTimeout(B.current),[]),Bw();const ee=N.useCallback(ae=>{var Y,J;return K.current===((Y=M.current)==null?void 0:Y.side)&&bve(ae,(J=M.current)==null?void 0:J.area)},[]);return y.jsx(tve,{scope:n,searchRef:W,onItemEnter:N.useCallback(ae=>{ee(ae)&&ae.preventDefault()},[ee]),onItemLeave:N.useCallback(ae=>{var G;ee(ae)||((G=I.current)==null||G.focus(),O(null))},[ee]),onTriggerLeave:N.useCallback(ae=>{ee(ae)&&ae.preventDefault()},[ee]),pointerGraceTimerRef:Q,onPointerGraceIntentChange:N.useCallback(ae=>{M.current=ae},[]),children:y.jsx(me,{...se,children:y.jsx(ag,{asChild:!0,trapped:a,onMountAutoFocus:Ft(i,ae=>{var G;ae.preventDefault(),(G=I.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx(vh,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:y.jsx(vL,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:A,onCurrentTabStopIdChange:O,onEntryFocus:Ft(u,ae=>{x.isUsingKeyboardRef.current||ae.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(Jv,{role:"menu","aria-orientation":"vertical","data-state":V$(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...v,ref:D,style:{outline:"none",...v.style},onKeyDown:Ft(v.onKeyDown,ae=>{const Y=ae.target.closest("[data-radix-menu-content]")===ae.currentTarget,J=ae.ctrlKey||ae.altKey||ae.metaKey,re=ae.key.length===1;Y&&(ae.key==="Tab"&&ae.preventDefault(),!J&&re&&ne(ae.key));const we=I.current;if(ae.target!==we||!Gbe.includes(ae.key))return;ae.preventDefault();const Me=C().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);E$.includes(ae.key)&&Me.reverse(),pve(Me)}),onBlur:Ft(e.onBlur,ae=>{ae.currentTarget.contains(ae.target)||(window.clearTimeout(B.current),W.current="")}),onPointerMove:Ft(e.onPointerMove,m0(ae=>{const G=ae.target,Y=U.current!==ae.clientX;if(ae.currentTarget.contains(G)&&Y){const J=ae.clientX>U.current?"right":"left";K.current=J,U.current=ae.clientX}}))})})})})})})});R$.displayName=bo;var ive="MenuGroup",hA=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"group",...r,ref:t})});hA.displayName=ive;var ove="MenuLabel",N$=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{...r,ref:t})});N$.displayName=ove;var Mv="MenuItem",Z6="menu.itemSelect",y1=N.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=N.useRef(null),o=yg(Mv,e.__scopeMenu),s=dA(Mv,e.__scopeMenu),u=_n(t,i),c=N.useRef(!1),f=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(Z6,{bubbles:!0,cancelable:!0});h.addEventListener(Z6,g=>r==null?void 0:r(g),{once:!0}),IO(h,m),m.defaultPrevented?c.current=!1:o.onClose()}};return y.jsx(I$,{...a,ref:u,disabled:n,onClick:Ft(e.onClick,f),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),c.current=!0},onPointerUp:Ft(e.onPointerUp,h=>{var m;c.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:Ft(e.onKeyDown,h=>{const m=s.searchRef.current!=="";n||m&&h.key===" "||VE.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});y1.displayName=Mv;var I$=N.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=dA(Mv,n),s=C$(n),u=N.useRef(null),c=_n(t,u),[f,h]=N.useState(!1),[m,g]=N.useState("");return N.useEffect(()=>{const w=u.current;w&&g((w.textContent??"").trim())},[i.children]),y.jsx(p0.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:y.jsx(wL,{asChild:!0,...s,focusable:!r,children:y.jsx(Jt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:Ft(e.onPointerMove,m0(w=>{r?o.onItemLeave(w):(o.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ft(e.onPointerLeave,m0(w=>o.onItemLeave(w))),onFocus:Ft(e.onFocus,()=>h(!0)),onBlur:Ft(e.onBlur,()=>h(!1))})})})}),sve="MenuCheckboxItem",O$=N.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(F$,{scope:e.__scopeMenu,checked:n,children:y.jsx(y1,{role:"menuitemcheckbox","aria-checked":Pv(n)?"mixed":n,...a,ref:t,"data-state":mA(n),onSelect:Ft(a.onSelect,()=>r==null?void 0:r(Pv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});O$.displayName=sve;var D$="MenuRadioGroup",[lve,uve]=Rd(D$,{value:void 0,onValueChange:()=>{}}),j$=N.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ea(r);return y.jsx(lve,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(hA,{...a,ref:t})})});j$.displayName=D$;var M$="MenuRadioItem",P$=N.forwardRef((e,t)=>{const{value:n,...r}=e,a=uve(M$,e.__scopeMenu),i=n===a.value;return y.jsx(F$,{scope:e.__scopeMenu,checked:i,children:y.jsx(y1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":mA(i),onSelect:Ft(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});P$.displayName=M$;var pA="MenuItemIndicator",[F$,cve]=Rd(pA,{checked:!1}),L$=N.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=cve(pA,n);return y.jsx(Na,{present:r||Pv(i.checked)||i.checked===!0,children:y.jsx(Jt.span,{...a,ref:t,"data-state":mA(i.checked)})})});L$.displayName=pA;var dve="MenuSeparator",$$=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(Jt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});$$.displayName=dve;var fve="MenuArrow",B$=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=g1(n);return y.jsx(Qv,{...a,...r,ref:t})});B$.displayName=fve;var hve="MenuSub",[P1e,z$]=Rd(hve),cm="MenuSubTrigger",U$=N.forwardRef((e,t)=>{const n=Nd(cm,e.__scopeMenu),r=yg(cm,e.__scopeMenu),a=z$(cm,e.__scopeMenu),i=dA(cm,e.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:u}=i,c={__scopeMenu:e.__scopeMenu},f=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>f,[f]),N.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),u(null)}},[s,u]),y.jsx(uA,{asChild:!0,...c,children:y.jsx(I$,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":V$(n.open),...e,ref:Il(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ft(e.onPointerMove,m0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:Ft(e.onPointerLeave,m0(h=>{var g,w;f();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(w=n.content)==null?void 0:w.dataset.side,_=v==="right",x=_?-5:5,S=m[_?"left":"right"],E=m[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:S,y:m.bottom}],side:v}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ft(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||Wbe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});U$.displayName=cm;var q$="MenuSubContent",H$=N.forwardRef((e,t)=>{const n=A$(bo,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Nd(bo,e.__scopeMenu),o=yg(bo,e.__scopeMenu),s=z$(q$,e.__scopeMenu),u=N.useRef(null),c=_n(t,u);return y.jsx(p0.Provider,{scope:e.__scopeMenu,children:y.jsx(Na,{present:r||i.open,children:y.jsx(p0.Slot,{scope:e.__scopeMenu,children:y.jsx(fA,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=u.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Ft(e.onFocusOutside,f=>{f.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ft(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:Ft(e.onKeyDown,f=>{var g;const h=f.currentTarget.contains(f.target),m=Kbe[o.dir].includes(f.key);h&&m&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),f.preventDefault())})})})})})});H$.displayName=q$;function V$(e){return e?"open":"closed"}function Pv(e){return e==="indeterminate"}function mA(e){return Pv(e)?"indeterminate":e?"checked":"unchecked"}function pve(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function mve(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function gve(e,t,n){const a=t.length>1&&Array.from(t).every(c=>c===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=mve(e,Math.max(i,0));a.length===1&&(o=o.filter(c=>c!==n));const u=o.find(c=>c.toLowerCase().startsWith(a.toLowerCase()));return u!==n?u:void 0}function yve(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],u=t[o],c=s.x,f=s.y,h=u.x,m=u.y;f>r!=m>r&&n<(h-c)*(r-f)/(m-f)+c&&(a=!a)}return a}function bve(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return yve(n,t)}function m0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var G$=k$,W$=uA,K$=T$,Z$=R$,Y$=hA,X$=N$,J$=y1,Q$=O$,eB=j$,tB=P$,nB=L$,rB=$$,aB=B$,iB=U$,oB=H$,gA="ContextMenu",[vve,F1e]=ci(gA,[m1]),hi=m1(),[wve,sB]=vve(gA),lB=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=N.useState(!1),u=hi(t),c=Ea(r),f=N.useCallback(h=>{s(h),c(h)},[c]);return y.jsx(wve,{scope:t,open:o,onOpenChange:f,modal:i,children:y.jsx(G$,{...u,dir:a,open:o,onOpenChange:f,modal:i,children:n})})};lB.displayName=gA;var uB="ContextMenuTrigger",cB=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=sB(uB,n),o=hi(n),s=N.useRef({x:0,y:0}),u=N.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),c=N.useRef(0),f=N.useCallback(()=>window.clearTimeout(c.current),[]),h=m=>{s.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return N.useEffect(()=>f,[f]),N.useEffect(()=>void(r&&f()),[r,f]),y.jsxs(y.Fragment,{children:[y.jsx(W$,{...o,virtualRef:u}),y.jsx(Jt.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Ft(e.onContextMenu,m=>{f(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:Ft(e.onPointerDown,sb(m=>{f(),c.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:Ft(e.onPointerMove,sb(f)),onPointerCancel:r?e.onPointerCancel:Ft(e.onPointerCancel,sb(f)),onPointerUp:r?e.onPointerUp:Ft(e.onPointerUp,sb(f))})]})});cB.displayName=uB;var _ve="ContextMenuPortal",dB=e=>{const{__scopeContextMenu:t,...n}=e,r=hi(t);return y.jsx(K$,{...r,...n})};dB.displayName=_ve;var fB="ContextMenuContent",hB=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=sB(fB,n),i=hi(n),o=N.useRef(!1);return y.jsx(Z$,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var u;(u=e.onCloseAutoFocus)==null||u.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var u;(u=e.onInteractOutside)==null||u.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hB.displayName=fB;var xve="ContextMenuGroup",Sve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(Y$,{...a,...r,ref:t})});Sve.displayName=xve;var Eve="ContextMenuLabel",Cve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(X$,{...a,...r,ref:t})});Cve.displayName=Eve;var kve="ContextMenuItem",pB=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(J$,{...a,...r,ref:t})});pB.displayName=kve;var Ave="ContextMenuCheckboxItem",Tve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(Q$,{...a,...r,ref:t})});Tve.displayName=Ave;var Rve="ContextMenuRadioGroup",Nve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(eB,{...a,...r,ref:t})});Nve.displayName=Rve;var Ive="ContextMenuRadioItem",Ove=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(tB,{...a,...r,ref:t})});Ove.displayName=Ive;var Dve="ContextMenuItemIndicator",jve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(nB,{...a,...r,ref:t})});jve.displayName=Dve;var Mve="ContextMenuSeparator",mB=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(rB,{...a,...r,ref:t})});mB.displayName=Mve;var Pve="ContextMenuArrow",Fve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(aB,{...a,...r,ref:t})});Fve.displayName=Pve;var Lve="ContextMenuSubTrigger",$ve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(iB,{...a,...r,ref:t})});$ve.displayName=Lve;var Bve="ContextMenuSubContent",zve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=hi(n);return y.jsx(oB,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zve.displayName=Bve;function sb(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var Uve=lB,qve=cB,Hve=dB,Vve=hB,Gve=pB,Wve=mB;function Kve({...e}){return y.jsx(Uve,{"data-slot":"context-menu",...e})}function Zve({...e}){return y.jsx(qve,{"data-slot":"context-menu-trigger",...e})}function Yve({className:e,...t}){return y.jsx(Hve,{children:y.jsx(Vve,{"data-slot":"context-menu-content",className:Mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function bl({className:e,inset:t,variant:n="default",...r}){return y.jsx(Gve,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Mt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function Y6({className:e,...t}){return y.jsx(Wve,{"data-slot":"context-menu-separator",className:Mt("bg-border -mx-1 my-1 h-px",e),...t})}const Xve=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:m,handleDelete:g,setNewName:w,renameInputRef:v,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const A=Q=>{Q.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},O=Q=>{Q.key==="Enter"?h():Q.key==="Escape"&&f()},I=e.type==="folder",D=I?r?GU:Hv:HU,B=I?r?"text-green-400":"text-yellow-400":"text-blue-400",W=y.jsxs(Vi,{className:Mt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:A,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(gr,{className:"px-2 py-1",children:y.jsx(Hbe,{checked:n,onCheckedChange:Q=>u(!!Q,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||I})}),y.jsx(gr,{className:"px-2 py-1",children:y.jsx(D,{className:Mt("h-5 w-5",B)})}),y.jsx(gr,{className:"py-1 px-2",children:t?y.jsx(Rr,{ref:v,value:a,onChange:Q=>w(Q.target.value),onBlur:h,onKeyDown:O,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:Q=>Q.stopPropagation(),disabled:i}):y.jsx("span",{className:Mt("truncate",I&&"cursor-pointer hover:underline"),title:e.name,onClick:Q=>{I&&(Q.stopPropagation(),s(e))},children:e.name})}),y.jsx(gr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?zv(e.size):""}),y.jsx(gr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(gr,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:Mt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:Q=>{Q.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),children:i?y.jsx(Qn,{className:"h-4 w-4 animate-spin"}):y.jsx(vo,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Save (Enter)"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),f()},"aria-label":"Cancel edit",disabled:i,children:y.jsx(zs,{className:"h-4 w-4"})})}),y.jsx(On,{side:"top",children:"Cancel (Esc)"})]})})]}):y.jsxs(y.Fragment,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),c(e)},"aria-label":"Rename",disabled:i||o,children:y.jsx(D2,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Rename"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:Q=>{Q.stopPropagation(),m(e)},"aria-label":I?"Download folder as ZIP":"Download file",disabled:i,children:y.jsx(Cb,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:I?"Download folder (.zip)":"Download file"})]})}),y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:Q=>{Q.stopPropagation(),g(e)},"aria-label":`Delete ${I?"folder":"file"}`,disabled:i,children:y.jsx(zu,{className:"h-3.5 w-3.5"})})}),y.jsx(On,{side:"top",children:"Delete"})]})})]})})})]},e.id);return I?y.jsxs(Kve,{children:[y.jsx(Zve,{disabled:t||i,asChild:!0,children:W}),y.jsxs(Yve,{children:[y.jsx(bl,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(Y6,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(bl,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(iq,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(bl,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(rq,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(bl,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(sq,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(bl,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(TO,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(bl,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(eC,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(Y6,{}),y.jsxs(bl,{onSelect:()=>c(e),disabled:i,children:[y.jsx(D2,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(bl,{onSelect:()=>m(e),disabled:i,children:[y.jsx(Cb,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(bl,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx(zu,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):W},Jve=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:w,handleDelete:v,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:A,handleGitPull:O,handleGitCommit:I,handleGitPush:D,handleGitStatus:B})=>{const W=N.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx($w,{className:"flex-grow h-0 border-t border-border",children:y.jsxs(i1,{className:"w-full text-sm",children:[y.jsx(o1,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Vi,{className:"hover:bg-card",children:[y.jsx(ia,{className:"w-[40px] px-2"}),y.jsx(ia,{className:"w-[40px] px-2"}),y.jsx(ia,{children:"Name"}),y.jsx(ia,{className:"w-[100px] text-right",children:"Size"}),y.jsx(ia,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(ia,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(s1,{children:[r&&y.jsx(Fbe,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:o}),W.map(Q=>{const M=t===Q.path,K=i.has(Q.id),U=C[Q.path]??!1;return y.jsx(Xve,{entry:Q,isEditingThis:M,isChecked:K,isGitRepo:U,newName:M?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:u,startEditing:c,cancelEditing:f,handleRename:h,handleDownload:w,handleDelete:v,setNewName:_,renameInputRef:S,handleGitInit:A,handleGitPull:O,handleGitCommit:I,handleGitPush:D,handleGitStatus:B},Q.id)}),e.length===0&&!r&&!o&&y.jsx(Vi,{children:y.jsx(gr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},Qve=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:u,startCreatingFolder:c,handleUploadClick:f,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:w,fileInputRef:v,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:v,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Ht,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(dq,{className:"h-4 w-4"})}),y.jsx(Ht,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(QU,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Ht,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Qn,{className:"h-4 w-4 animate-spin"}):y.jsx(Gv,{className:"h-4 w-4"})}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),c()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(QE,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),f()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(kO,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Hv,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(PU,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),w()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(eC,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Qn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(gU,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),ewe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:u})=>y.jsx(Hw,{open:e,onOpenChange:t,children:y.jsxs(Vw,{children:[y.jsxs(Gw,{children:[y.jsx(Kw,{children:"Clone Git Repository"}),y.jsxs(Zw,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:u}),"."]})]}),y.jsxs("div",{className:"grid gap-4 py-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(qn,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(Rr,{id:"clone-url",value:n,onChange:c=>r(c.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(qn,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(Rr,{id:"clone-branch",value:a,onChange:c=>i(c.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]}),y.jsxs(Ww,{children:[y.jsx(Ht,{variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),y.jsx(Ht,{onClick:s,disabled:o||!n.trim(),children:o?y.jsxs(y.Fragment,{children:[y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Cloning..."]}):"Clone"})]})]})}),twe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(Hw,{open:e,onOpenChange:t,children:y.jsxs(Vw,{children:[y.jsxs(Gw,{children:[y.jsx(Kw,{children:"Commit Changes"}),y.jsxs(Zw,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]})]}),y.jsx("div",{className:"grid gap-4 py-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(qn,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(Rr,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})}),y.jsxs(Ww,{children:[y.jsx(Ht,{variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),y.jsx(Ht,{onClick:o,disabled:i||!r.trim(),children:i?y.jsxs(y.Fragment,{children:[y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Committing..."]}):"Commit"})]})]})}),gB=N.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,error:a,fetchNodes:i,createDirectory:o,uploadFiles:s,deleteNodes:u,renameNode:c,setCurrentPath:f,initializeVFS:h,rootId:m,fs:g,_setError:w,selectFile:v,deselectFile:_,selectedFileIds:x}=Qc(Hn(de=>({nodes:de.nodes,childrenMap:de.childrenMap,currentParentId:de.currentParentId,selectedFileIds:de.selectedFileIds,loading:de.loading,error:de.error,fetchNodes:de.fetchNodes,createDirectory:de.createDirectory,uploadFiles:de.uploadFiles,deleteNodes:de.deleteNodes,renameNode:de.renameNode,selectFile:de.selectFile,deselectFile:de.deselectFile,setCurrentPath:de.setCurrentPath,initializeVFS:de.initializeVFS,rootId:de.rootId,fs:de.fs,_setOperationLoading:de._setOperationLoading,_setError:de._setError,_addNodes:de._addNodes,_removeNodes:de._removeNodes}))),[S,E]=N.useState(""),[C,A]=N.useState(null),[O,I]=N.useState(!1),[D,B]=N.useState(""),[W,Q]=N.useState(!1),[M,K]=N.useState({}),[U,me]=N.useState(!1),[se,ne]=N.useState(""),[ee,ae]=N.useState(""),[G,Y]=N.useState(!1),[J,re]=N.useState(!1),[we,ke]=N.useState(null),[Me,Pe]=N.useState(""),[Re,Ae]=N.useState(!1),[He,st]=N.useState({}),Oe=N.useRef(null),Te=N.useRef(null),z=N.useRef(null),Ce=N.useRef(null),Ne=N.useRef(null),ce=n?e[n]:null,ie=ce?ce.path:"/",_e=(t[n||m||""]||[]).map(de=>e[de]).filter(de=>!!de).sort((de,Fe)=>de.type==="folder"&&Fe.type==="file"?-1:de.type==="file"&&Fe.type==="folder"?1:de.name.localeCompare(Fe.name)),Le=N.useMemo(()=>_e.filter(de=>de.type==="folder").map(de=>de.path),[_e]),xe=r||W||G||Re;N.useEffect(()=>{!m&&!r&&h("default_vfs_key")},[m,h,r]),N.useEffect(()=>{n!==null&&!t[n]&&!r&&g?i(n):n===null&&m&&!t[m]&&!r&&g&&i(m)},[n,i,t,m,r,g]),N.useEffect(()=>{var de,Fe;C&&((de=Ce.current)==null||de.focus(),(Fe=Ce.current)==null||Fe.select())},[C]),N.useEffect(()=>{var de;O&&((de=Ne.current)==null||de.focus())},[O]),N.useEffect(()=>{(async()=>{if(!g||Le.length===0)return;const Fe={};let it=!1;for(const Dt of Le)try{const un=await Fne(Dt);M[Dt]!==un&&(Fe[Dt]=un,it=!0)}catch(un){console.error(`Error checking git status for ${Dt}:`,un),M[Dt]!==!1&&(Fe[Dt]=!1,it=!0)}it&&K(Dt=>({...Dt,...Fe}))})()},[Le,g,M]);const Ve=N.useCallback(async(de,Fe=!0)=>{if(!xe){Fe&&Q(!0),w(null);try{await de()}catch(it){console.error("[FileManager Operation Error]:",it)}finally{Fe&&Q(!1)}}},[xe,w]),xt=N.useCallback(de=>{xe||C||de.type==="folder"&&Ve(()=>f(de.path),!1)},[xe,C,f,Ve]),ft=N.useCallback(()=>{if(xe||ie==="/")return;const de=Uv(ie);Ve(()=>f(de),!1)},[xe,ie,f,Ve]),Et=N.useCallback(()=>{xe||ie==="/"||Ve(()=>f("/"),!1)},[xe,ie,f,Ve]),Lt=N.useCallback(()=>{Ve(()=>i(n))},[Ve,i,n]),Tt=N.useCallback((de,Fe)=>{const it=e[Fe];it&&it.type==="file"?de?v(Fe):_(Fe):it&&it.type==="folder"&&ht.info("Folders cannot be attached to the prompt.")},[v,_,e]),zt=N.useCallback(de=>{xe||O||(A(de.path),E(de.name),I(!1))},[xe,O]),ge=N.useCallback(()=>{A(null),E("")},[]),R=N.useCallback(async()=>{if(!C||!S.trim()){ge();return}const de=Object.values(e).find(Fe=>Fe.path===C);de&&de.name!==S.trim()&&await Ve(()=>c(de.id,S.trim())),ge()},[C,S,c,ge,e,Ve]),H=N.useCallback(()=>{xe||C||(I(!0),B(""),A(null))},[xe,C]),fe=N.useCallback(()=>{I(!1),B("")},[]),Ie=N.useCallback(async()=>{if(!D.trim()){fe();return}await Ve(()=>o(n,D.trim())),fe()},[D,o,n,fe,Ve]),be=()=>{var de;return(de=Oe.current)==null?void 0:de.click()},Ee=()=>{var de;return(de=Te.current)==null?void 0:de.click()},le=()=>{var de;return(de=z.current)==null?void 0:de.click()},ct=N.useCallback(async de=>{const Fe=de.target.files;Fe&&Fe.length>0&&(await Ve(()=>s(n,Fe)),de.target&&(de.target.value=""))},[s,n,Ve]),yt=N.useCallback(async de=>{var it;const Fe=(it=de.target.files)==null?void 0:it[0];Fe&&(await Ve(async()=>{await Mne(Fe,ie),await i(n)}),de.target&&(de.target.value=""))},[ie,i,n,Ve]),P=N.useCallback(async de=>{window.confirm(`Delete ${de.type} "${de.name}"?${de.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ve(()=>u([de.id]))},[u,Ve]),Be=N.useCallback(async de=>{await Ve(async()=>{de.type==="file"?await jne(de.path):await y4(`${de.name}.zip`,de.path)})},[Ve]),et=N.useCallback(async()=>{_e.length!==0&&await Ve(async()=>{const de=fa(ie)||"root";await y4(`${de}_export.zip`,ie)})},[ie,_e.length,Ve]),pe=N.useCallback(async(de,Fe)=>{if(!He[de]){st(it=>({...it,[de]:!0})),w(null);try{await Fe()}catch(it){console.error(`[FileManager Git Op Error @ ${de}]:`,it)}finally{st(it=>({...it,[de]:!1}))}}},[w,He]),De=N.useCallback(de=>{pe(de,async()=>{await Lne(de),K(Fe=>({...Fe,[de]:!0}))})},[pe]),Ke=N.useCallback(de=>{pe(de,()=>V8(de))},[pe]),Ct=N.useCallback(de=>{ke(de),Pe(""),re(!0)},[]),ye=N.useCallback(de=>{pe(de,()=>G8(de))},[pe]),q=N.useCallback(de=>{pe(de,()=>$ne(de))},[pe]),L=N.useCallback(()=>{ne(""),ae(""),me(!0)},[]),V=N.useCallback(async()=>{if(!se.trim()){ht.error("Repository URL cannot be empty.");return}Y(!0),w(null);try{await q8(ie,se.trim(),ee.trim()||void 0),me(!1),await Lt()}catch{}finally{Y(!1)}},[se,ee,ie,w,Lt]),he=N.useCallback(async()=>{if(!we||!Me.trim()){ht.error("Commit message cannot be empty.");return}Ae(!0),w(null);try{await H8(we,Me.trim()),re(!1)}catch{}finally{Ae(!1)}},[we,Me,w]);return y.jsxs("div",{className:"flex h-full flex-col bg-card text-card-foreground rounded-lg border border-border shadow-sm overflow-hidden",children:[y.jsx(Qve,{currentPath:ie,isAnyLoading:xe,isOperationLoading:W,entries:_e,editingPath:C,creatingFolder:O,handleNavigateHome:Et,handleNavigateUp:ft,handleRefresh:Lt,startCreatingFolder:H,handleUploadClick:be,handleFolderUploadClick:Ee,handleArchiveUploadClick:le,handleDownloadAll:et,handleCloneClick:L,fileInputRef:Oe,folderInputRef:Te,archiveInputRef:z,handleFileChange:ct,handleArchiveChange:yt}),a&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-xs text-center flex-shrink-0",children:["Error: ",a]}),y.jsx(Jve,{entries:_e,editingPath:C,newName:S,creatingFolder:O,newFolderName:D,selectedFileIds:x,isOperationLoading:W||Object.values(He).some(Boolean),handleNavigate:xt,handleCheckboxChange:Tt,startEditing:zt,cancelEditing:ge,handleRename:R,cancelCreatingFolder:fe,handleCreateFolder:Ie,handleDownload:Be,handleDelete:P,setNewName:E,setNewFolderName:B,renameInputRef:Ce,newFolderInputRef:Ne,gitRepoStatus:M,handleGitInit:De,handleGitPull:Ke,handleGitCommit:Ct,handleGitPush:ye,handleGitStatus:q}),y.jsx(ewe,{isOpen:U,onOpenChange:me,cloneRepoUrl:se,setCloneRepoUrl:ne,cloneBranch:ee,setCloneBranch:ae,isCloning:G,onSubmitClone:V,currentPath:ie}),y.jsx(twe,{isOpen:J,onOpenChange:re,commitPath:we,commitMessage:Me,setCommitMessage:Pe,isCommitting:Re,onSubmitCommit:he})]})});gB.displayName="FileManager";const nwe="core-vfs-control",rwe=e=>{let t="";const n=new Uint8Array(e),r=n.byteLength;for(let a=0;a<r;a++)t+=String.fromCharCode(n[a]);return btoa(t)},awe=(e,t)=>{const n=e.toLowerCase();return t!=null&&t.startsWith("text/")||t==="application/json"?!0:b$.some(r=>n.endsWith(r))},iwe=()=>{const[e,t]=N.useState(!1),[n,r]=N.useState(!1),{nodes:a,selectedFileIds:i,clearSelection:o,uploadFiles:s}=Qc(Hn(S=>({nodes:S.nodes,selectedFileIds:S.selectedFileIds,clearSelection:S.clearSelection,uploadFiles:S.uploadFiles,currentParentId:S.currentParentId}))),{addAttachedFile:u,attachedFilesMetadata:c}=kb(Hn(S=>({addAttachedFile:S.addAttachedFile,attachedFilesMetadata:S.attachedFilesMetadata}))),f=vt.useMemo(()=>Array.from(i).map(S=>a[S]).filter(S=>!!S&&S.type==="file"),[i,a]),h=N.useCallback(async()=>{if(f.length===0||n)return;r(!0);let S=0,E=0;const C=f.map(async A=>{try{const O=await eg(A.path),I=A.mimeType||"application/octet-stream",D=awe(A.name,I),B={source:"vfs",name:A.name,type:I,size:A.size,path:A.path};D?B.contentText=new TextDecoder().decode(O):B.contentBase64=rwe(O),u(B),S++}catch(O){E++,console.error(`Failed to read VFS file ${A.path}:`,O),ht.error(`Failed to attach "${A.name}": ${O instanceof Error?O.message:"Read error"}`)}});await Promise.all(C),S>0&&ht.success(`${S} file(s) attached from VFS.`),E>0&&ht.warning(`${E} file(s) could not be attached.`),o(),r(!1),t(!1)},[f,u,o,n]),m=N.useCallback(S=>{S?t(!0):(i.size>0&&o(),t(!1))},[o,i.size]),g=Qc.getState().currentParentId,w=N.useCallback(()=>{const S=g?Qc.getState().nodes[g]:Qc.getState().nodes[Qc.getState().rootId||""];return(S==null?void 0:S.path)||"/"},[g]),v=N.useCallback(async S=>{S.preventDefault(),S.stopPropagation();const E=S.dataTransfer.files;if(E&&E.length>0)try{await s(g,E),ht.success(`${E.length} file(s) added to VFS at ${w()}. Select them in the manager.`)}catch(C){console.error("Error adding files via drop:",C),ht.error("Failed to add dropped files.")}},[s,g,w]),_=N.useCallback(S=>{S.preventDefault(),S.stopPropagation()},[]),x=c.filter(S=>S.source==="vfs").length;return y.jsxs(Hw,{open:e,onOpenChange:m,children:[y.jsx(kn,{children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx("div",{onDrop:v,onDragOver:_,className:"inline-block",children:y.jsx(Dpe,{asChild:!0,children:y.jsxs(Ht,{variant:"ghost",size:"icon",className:Mt("relative h-10 w-10 rounded-full",x>0&&"text-blue-500 hover:text-blue-600"),"aria-label":`Attach files from VFS (${x} selected)`,children:[y.jsx(KU,{className:"h-5 w-5"}),x>0&&y.jsx("span",{className:"absolute -right-1 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-blue-500 text-xs text-white",children:x})]})})})}),y.jsxs(On,{children:[y.jsxs("p",{children:["Attach files from VFS (",x," selected)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag & drop enabled"})]})]})}),y.jsxs(Vw,{className:"max-w-[1200px] h-[85vh] sm:max-w-4xl flex flex-col",children:[y.jsxs(Gw,{children:[y.jsx(Kw,{children:"File Manager"}),y.jsx(Zw,{children:'Manage files in the virtual filesystem. Select files and click "Attach Selected" to add them to your prompt.'})]}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(gB,{})}),y.jsxs(Ww,{children:[y.jsx(Mpe,{asChild:!0,children:y.jsx(Ht,{variant:"outline",onClick:()=>m(!1),children:"Cancel"})}),y.jsxs(Ht,{onClick:h,disabled:f.length===0||n,children:[n&&y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Attaching...":`Attach Selected (${f.length})`]})]})]})]})},owe=()=>{const e=Ri(n=>n.registerPromptControl),{enableVfs:t}=Qc(Hn(n=>({enableVfs:n.enableVfs})));return N.useEffect(()=>e({id:nwe,triggerRenderer:()=>y.jsx(iwe,{}),show:()=>t,order:40}),[e,t]),null};var b1="DropdownMenu",[swe,L1e]=ci(b1,[m1]),pi=m1(),[lwe,yB]=swe(b1),bB=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,u=pi(t),c=N.useRef(null),[f,h]=Wo({prop:a,defaultProp:i??!1,onChange:o,caller:b1});return y.jsx(lwe,{scope:t,triggerId:ka(),triggerRef:c,contentId:ka(),open:f,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(m=>!m),[h]),modal:s,children:y.jsx(G$,{...u,open:f,onOpenChange:h,dir:r,modal:s,children:n})})};bB.displayName=b1;var vB="DropdownMenuTrigger",wB=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=yB(vB,n),o=pi(n);return y.jsx(W$,{asChild:!0,...o,children:y.jsx(Jt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:Il(t,i.triggerRef),onPointerDown:Ft(e.onPointerDown,s=>{!r&&s.button===0&&s.ctrlKey===!1&&(i.onOpenToggle(),i.open||s.preventDefault())}),onKeyDown:Ft(e.onKeyDown,s=>{r||(["Enter"," "].includes(s.key)&&i.onOpenToggle(),s.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(s.key)&&s.preventDefault())})})})});wB.displayName=vB;var uwe="DropdownMenuPortal",_B=e=>{const{__scopeDropdownMenu:t,...n}=e,r=pi(t);return y.jsx(K$,{...r,...n})};_B.displayName=uwe;var xB="DropdownMenuContent",SB=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=yB(xB,n),i=pi(n),o=N.useRef(!1);return y.jsx(Z$,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Ft(e.onCloseAutoFocus,s=>{var u;o.current||(u=a.triggerRef.current)==null||u.focus(),o.current=!1,s.preventDefault()}),onInteractOutside:Ft(e.onInteractOutside,s=>{const u=s.detail.originalEvent,c=u.button===0&&u.ctrlKey===!0,f=u.button===2||c;(!a.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});SB.displayName=xB;var cwe="DropdownMenuGroup",dwe=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(Y$,{...a,...r,ref:t})});dwe.displayName=cwe;var fwe="DropdownMenuLabel",EB=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(X$,{...a,...r,ref:t})});EB.displayName=fwe;var hwe="DropdownMenuItem",CB=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(J$,{...a,...r,ref:t})});CB.displayName=hwe;var pwe="DropdownMenuCheckboxItem",mwe=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(Q$,{...a,...r,ref:t})});mwe.displayName=pwe;var gwe="DropdownMenuRadioGroup",ywe=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(eB,{...a,...r,ref:t})});ywe.displayName=gwe;var bwe="DropdownMenuRadioItem",vwe=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(tB,{...a,...r,ref:t})});vwe.displayName=bwe;var wwe="DropdownMenuItemIndicator",_we=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(nB,{...a,...r,ref:t})});_we.displayName=wwe;var xwe="DropdownMenuSeparator",kB=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(rB,{...a,...r,ref:t})});kB.displayName=xwe;var Swe="DropdownMenuArrow",Ewe=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(aB,{...a,...r,ref:t})});Ewe.displayName=Swe;var Cwe="DropdownMenuSubTrigger",kwe=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(iB,{...a,...r,ref:t})});kwe.displayName=Cwe;var Awe="DropdownMenuSubContent",Twe=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=pi(n);return y.jsx(oB,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Twe.displayName=Awe;var Rwe=bB,Nwe=wB,Iwe=_B,Owe=SB,Dwe=EB,jwe=CB,Mwe=kB;function Pwe({...e}){return y.jsx(Rwe,{"data-slot":"dropdown-menu",...e})}function Fwe({...e}){return y.jsx(Nwe,{"data-slot":"dropdown-menu-trigger",...e})}function Lwe({className:e,sideOffset:t=4,...n}){return y.jsx(Iwe,{children:y.jsx(Owe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:Mt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function om({className:e,inset:t,variant:n="default",...r}){return y.jsx(jwe,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:Mt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function $we({className:e,inset:t,...n}){return y.jsx(Dwe,{"data-slot":"dropdown-menu-label","data-inset":t,className:Mt("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function X6({className:e,...t}){return y.jsx(Mwe,{"data-slot":"dropdown-menu-separator",className:Mt("bg-border -mx-1 my-1 h-px",e),...t})}const Bwe=()=>{const{selectedItemId:e,selectedItemType:t,conversations:n,syncRepos:r,conversationSyncStatus:a,linkConversationToRepo:i,syncConversation:o}=zo(Hn(S=>({selectedItemId:S.selectedItemId,selectedItemType:S.selectedItemType,conversations:S.conversations,syncRepos:S.syncRepos,conversationSyncStatus:S.conversationSyncStatus,linkConversationToRepo:S.linkConversationToRepo,syncConversation:S.syncConversation}))),s=t==="conversation"?e:null,u=n.find(S=>S.id===s),c=u==null?void 0:u.syncRepoId,f=r.find(S=>S.id===c),h=s?a[s]??"idle":"idle",m=S=>{s&&i(s,S)},g=()=>{s&&c&&o(s)},w=()=>{alert("Please go to Settings -> Git -> Sync Repositories to configure sync.")},_=f?(()=>{switch(h){case"syncing":return{icon:y.jsx(Qn,{className:"h-3 w-3 animate-spin text-blue-500"}),tooltip:`Syncing with ${f==null?void 0:f.name}...`,colorClass:"text-blue-500"};case"error":return{icon:y.jsx(Bu,{className:"h-3 w-3 text-destructive fill-destructive/30"}),tooltip:`Sync error with ${f==null?void 0:f.name}. Check console/logs.`,colorClass:"text-destructive"};case"needs-sync":return{icon:y.jsx(Bu,{className:"h-3 w-3 text-orange-500 fill-orange-300"}),tooltip:`Local changes need sync with ${f==null?void 0:f.name}.`,colorClass:"text-orange-500"};case"idle":default:return{icon:y.jsx(O2,{className:"h-3 w-3 text-green-500"}),tooltip:`Synced with ${f==null?void 0:f.name}.`,colorClass:"text-green-500"}}})():null,x=!s;return y.jsxs(Pwe,{children:[y.jsx(kn,{delayDuration:100,children:y.jsxs(Nn,{children:[y.jsx(In,{asChild:!0,children:y.jsx(Fwe,{asChild:!0,disabled:x,children:y.jsxs(Ht,{type:"button",variant:"ghost",size:"icon",className:Mt("h-10 w-10 rounded-full relative",!f&&"text-muted-foreground hover:text-foreground",_==null?void 0:_.colorClass,x&&"opacity-50 cursor-not-allowed"),"aria-label":"Conversation Git Sync Status",children:[y.jsx(XU,{className:"h-5 w-5"}),_&&y.jsx("span",{className:"absolute top-0 right-0",children:_.icon})]})})}),y.jsx(On,{side:"top",children:x?"Select a conversation to manage sync":f?_==null?void 0:_.tooltip:"Link conversation to sync repository"})]})}),y.jsxs(Lwe,{align:"end",children:[y.jsx($we,{children:"Conversation Sync"}),y.jsx(X6,{}),r.map(S=>y.jsxs(om,{onClick:()=>m(S.id),disabled:!s||h==="syncing",children:[c===S.id&&y.jsx(O2,{className:"mr-2 h-4 w-4 text-green-500"}),"Link to: ",S.name]},S.id)),c&&y.jsxs(om,{onClick:()=>m(null),disabled:!s||h==="syncing",children:[y.jsx(zs,{className:"mr-2 h-4 w-4 text-muted-foreground"}),"Unlink Repository"]}),r.length===0&&y.jsx(om,{disabled:!0,children:"No sync repos configured"}),y.jsx(X6,{}),y.jsxs(om,{onClick:g,disabled:!s||!c||h==="syncing",children:[h==="syncing"?y.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Gv,{className:"mr-2 h-4 w-4"}),"Sync Now"]}),y.jsxs(om,{onClick:w,children:[y.jsx(Lq,{className:"mr-2 h-4 w-4"}),"Configure Repositories..."]})]})]})},zwe=()=>{const e=Ri(n=>n.registerPromptControl),t=zo(n=>n.syncRepos.length);return vt.useEffect(()=>e({id:"core-git-sync-control",triggerRenderer:()=>y.jsx(Bwe,{}),show:()=>!0,order:50}),[e,t]),null},Uwe=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},qwe=()=>{const{selectedItemId:e,selectedItemType:t,loadSidebarItems:n,addConversation:r,selectItem:a,getProjectById:i}=zo(Hn(M=>({selectedItemId:M.selectedItemId,selectedItemType:M.selectedItemType,loadSidebarItems:M.loadSidebarItems,addConversation:M.addConversation,selectItem:M.selectItem,getProjectById:M.getProjectById}))),{interactions:o,status:s,setCurrentConversationId:u}=kr(Hn(M=>({interactions:M.interactions,status:M.status,setCurrentConversationId:M.setCurrentConversationId}))),{globalError:c,isSidebarCollapsed:f}=Uo(Hn(M=>({globalError:M.globalError,isSidebarCollapsed:M.isSidebarCollapsed}))),h=Uo(M=>M.isChatControlPanelOpen.settingsModal??!1),m=Ri(M=>M.chatControls),g=N.useMemo(()=>Object.values(m),[m]),{loadDbMods:w,setLoadedMods:v}=l0(Hn(M=>({loadDbMods:M.loadDbMods,setLoadedMods:M.setLoadedMods}))),{loadInitialData:_}=ki(Hn(M=>({loadInitialData:M.loadInitialData}))),{loadSettings:x,globalSystemPrompt:S}=Ta(Hn(M=>({loadSettings:M.loadSettings,globalSystemPrompt:M.globalSystemPrompt})));The(),jye(),Fye(),Ibe(),Dbe(),Pbe(),owe(),zwe(),N.useEffect(()=>{let M=!0;return(async()=>{if(console.log("LiteChat: Starting initialization..."),!!M&&(await x(),console.log("LiteChat: Settings loaded."),!!M&&(await _(),console.log("LiteChat: Provider data loaded."),!!M&&(await n(),console.log("LiteChat: Sidebar items loaded."),!!M&&(await w(),console.log("LiteChat: DB Mods loaded."),!!M))))){try{const U=l0.getState().dbMods;if(console.log(`LiteChat: Loading ${U.length} mods...`),!M)return;const me=await nhe(U);M&&(v(me),console.log(`LiteChat: ${me.length} mods processed.`))}catch(U){console.error("LiteChat: Failed to load mods:",U)}M&&console.log("LiteChat: Initialization complete.")}})(),()=>{M=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[n,w,v,_,x]);const E=N.useCallback(M=>M.flatMap(K=>{var me,se,ne;const U=[];return(me=K.prompt)!=null&&me.content&&typeof K.prompt.content=="string"&&U.push({role:"user",content:K.prompt.content}),K.response&&typeof K.response=="string"&&U.push({role:"assistant",content:K.response}),(se=K.metadata)!=null&&se.toolCalls&&Array.isArray(K.metadata.toolCalls)&&U.push({role:"assistant",content:K.metadata.toolCalls}),(ne=K.metadata)!=null&&ne.toolResults&&Array.isArray(K.metadata.toolResults)&&K.metadata.toolResults.forEach(ee=>{U.push({role:"tool",content:[ee]})}),U}),[]),C=N.useCallback(async M=>{var we;let K=t==="conversation"?e:null;const U=t==="project"?e:t==="conversation"?((we=zo.getState().getConversationById(e))==null?void 0:we.projectId)??null:null,me=Uo.getState().setFocusInputFlag;if(!ki.getState().selectedModelId){ht.error("Please select a model before sending a message.");return}if(!K){console.log("LiteChat: No conversation selected, creating new one...");try{K=await r({title:"New Chat",projectId:U}),a(K,"conversation"),setTimeout(()=>me(!0),0),await new Promise(ke=>setTimeout(ke,0)),console.log(`LiteChat: New conversation created and selected: ${K}`)}catch(ke){console.error("LiteChat: Failed to create new conversation",ke),ht.error("Failed to start new chat.");return}}kr.getState().currentConversationId!==K&&(console.log(`LiteChat: Syncing InteractionStore to conversation ${K}`),u(K),setTimeout(()=>me(!0),0),await new Promise(ke=>setTimeout(ke,0)));const ae=kr.getState().interactions.filter(ke=>ke.status==="COMPLETED"&&ke.type==="message.user_assistant"),G=E(ae);M.content?G.push({role:"user",content:M.content}):console.warn("LiteChat: Submitting prompt without text content.");const Y=i(U),re={system:(Y==null?void 0:Y.systemPrompt)??S??void 0,messages:G,parameters:M.parameters,metadata:M.metadata};Si.emit("prompt:finalised",{prompt:re}),console.log("LiteChat: Submitting prompt to AIService:",re);try{await gb.startInteraction(re,M),console.log("LiteChat: AIService interaction started.")}catch(ke){console.error("LiteChat: Error starting AI interaction:",ke),ht.error(`Failed to start AI interaction: ${ke instanceof Error?ke.message:String(ke)}`)}},[e,t,r,a,u,S,E,i]),A=N.useCallback(async M=>{var Pe;console.log(`LiteChat: Regenerating interaction ${M}`);const K=kr.getState(),U=K.interactions.find(Re=>Re.id===M);if(!U||!U.prompt){console.error(`LiteChat: Cannot regenerate - interaction ${M} or its prompt not found.`),ht.error("Cannot regenerate: Original interaction data missing.");return}if(U.type!=="message.user_assistant"){console.error(`LiteChat: Cannot regenerate non-user_assistant interaction: ${M}`),ht.error("Can only regenerate from a user message interaction.");return}const me=zo.getState().getConversationById(U.conversationId),se=(me==null?void 0:me.projectId)??null,ne=i(se),ee=ki.getState().selectedModelId;if(!ee){ht.error("Please select a model before regenerating.");return}const{providerId:ae,modelId:G}=Uwe(ee);if(!ae||!G){ht.error("Invalid model selection for regeneration.");return}const Y=U.index,J=K.interactions.filter(Re=>Re.conversationId===U.conversationId&&Re.index<Y&&Re.status==="COMPLETED"&&Re.type==="message.user_assistant").sort((Re,Ae)=>Re.index-Ae.index),re=E(J);if((Pe=U.prompt)!=null&&Pe.content&&typeof U.prompt.content=="string")re.push({role:"user",content:U.prompt.content});else{console.error(`LiteChat: Cannot regenerate - missing or invalid user prompt content in interaction ${M}.`),ht.error("Cannot regenerate: Original user prompt missing.");return}const we=(ne==null?void 0:ne.systemPrompt)??Ta.getState().globalSystemPrompt??void 0,ke={...U.prompt.metadata,regeneratedFromId:M,providerId:ae,modelId:G},Me={system:we,messages:re,parameters:U.prompt.parameters,metadata:ke};Si.emit("prompt:finalised",{prompt:Me}),console.log(`LiteChat: Submitting regeneration request for ${M}:`,Me);try{await gb.startInteraction(Me,U.prompt),console.log(`LiteChat: AIService regeneration interaction started for ${M}.`)}catch(Re){console.error(`LiteChat: Error starting regeneration for ${M}:`,Re),ht.error("Failed to start regeneration.")}},[E,i]),O=N.useCallback(M=>{console.log(`LiteChat: Stopping interaction ${M}`),gb.stopInteraction(M)},[]),I=N.useMemo(()=>g.filter(M=>(M.panel??"main")==="sidebar"&&(M.show?M.show():!0)).sort((M,K)=>(M.order??1/0)-(K.order??1/0)),[g]),D=N.useMemo(()=>g.filter(M=>M.panel==="sidebar-footer"&&(M.show?M.show():!0)).sort((M,K)=>(M.order??1/0)-(K.order??1/0)),[g]),B=N.useMemo(()=>g.filter(M=>M.panel==="header"&&(M.show?M.show():!0)).sort((M,K)=>(M.order??1/0)-(K.order??1/0)),[g]),W=N.useMemo(()=>{var M;return(M=g.find(K=>K.id==="core-settings-trigger"))==null?void 0:M.settingsRenderer},[g]),Q=t==="conversation"?e:null;return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Mt("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:Mt("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",f?"w-16":"w-64"),children:[y.jsxs("div",{className:Mt("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:Mt(f?"hidden":"block"),children:y.jsx(Zy,{controls:I,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:Mt(f?"block":"hidden"),children:y.jsx(Zy,{controls:I,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:Mt("flex-shrink-0 border-t border-[--border] p-2",f?"flex flex-col items-center gap-2":"flex items-center justify-between"),children:y.jsx(Zy,{controls:D,panelId:"sidebar-footer",renderMode:f?"icon":"full",className:Mt("flex",f?"flex-col gap-2":"items-center gap-1")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Zy,{controls:B,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(Yne,{conversationId:Q,interactions:o,onRegenerateInteraction:A,onStopInteraction:O,status:s,className:"flex-grow overflow-y-auto p-4 space-y-4"}),c&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",c]}),y.jsx(DH,{InputAreaRenderer:EF,onSubmit:C,className:"border-t border-[--border] bg-card flex-shrink-0"})]})]}),h&&W&&W(),y.jsx(she,{richColors:!0,position:"top-right"})]})};function Hwe(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(qwe,{})})})}aU();function Vwe({children:e}){const t=Ta(n=>n.theme);return N.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}az.createRoot(document.getElementById("root")).render(y.jsx(vt.StrictMode,{children:y.jsx(Vwe,{children:y.jsx(Hwe,{})})}));
